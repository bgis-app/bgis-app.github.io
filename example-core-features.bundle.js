!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["bgis-core"]=e():t["bgis-core"]=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),n="propertychange",o=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){var o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;var i=void 0;if(n>0){for(i=1;i<o;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<o;++i)if(t[i]<=e)return i}else for(i=1;i<o;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return o-1}function s(t,e){for(var n=Array.isArray(e)?e:[e],o=n.length,i=0;i<o;i++)t[t.length]=n[i]}function a(t,e){var n=t.length;if(n!==e.length)return!1;for(var o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function l(){return!0}function u(){return!1}function c(){}var h="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,i=arguments.length;o<i;++o){var r=arguments[o];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n};function p(t){for(var e in t)delete t[e]}var d,f="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e},g=(d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},d(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const v=function(t){function n(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return g(n,t),n.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),o=n[t]||(n[t]=[]);-1===o.indexOf(e)&&o.push(e)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new e(t):t,o=n.type;n.target||(n.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[o];if(r){var s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});o in s||(s[o]=0,a[o]=0),++s[o];for(var l=0,u=r.length;l<u;++l)if(!1===(i="handleEvent"in r[l]?r[l].handleEvent(n):r[l].call(this,n))||n.propagationStopped){i=!1;break}if(--s[o],0===s[o]){var h=a[o];for(delete a[o];h--;)this.removeEventListener(o,c);delete s[o]}return i}},n.prototype.disposeInternal=function(){this.listeners_&&p(this.listeners_)},n.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},n.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},n.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var o=n.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[o]=c,++this.pendingRemovals_[t]):(n.splice(o,1),0===n.length&&delete this.listeners_[t]))}},n}(o),_="change",y="error",m="contextmenu",w="click",C="keydown",x="keypress",E="touchmove",b="wheel";function T(t,e,n,o,i){if(o&&o!==t&&(n=n.bind(o)),i){var r=n;n=function(){t.removeEventListener(e,n),r.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function P(t,e,n,o){return T(t,e,n,o,!0)}function O(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),p(t))}var R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),S=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return R(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(_)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=T(this,t[i],e);return o}return T(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var o=t.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=P(this,t[i],e)}else n=P(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)O(t[e]);else O(t)}(n);else if(Array.isArray(t))for(var o=0,i=t.length;o<i;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},e}(v);S.prototype.on,S.prototype.once,S.prototype.un;const M=S;function A(){return function(){throw new Error("Unimplemented abstract method.")}()}var I=0;function j(t){return t.ol_uid||(t.ol_uid=String(++I))}var L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.key=n,i.oldValue=o,i}return L(e,t),e}(e);const k=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,j(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return L(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&h({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var o;o="change:"+t,this.dispatchEvent(new F(o,t,e)),o=n,this.dispatchEvent(new F(o,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var o=this.values_||(this.values_={});if(n)o[t]=e;else{var i=o[t];o[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&h(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(M),D="opacity",z="visible",N="extent",G="zIndex",K="maxResolution",Z="minResolution",V="maxZoom",U="minZoom",X="source";var H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(t){function e(e){var n=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.12.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,o)||this).code=e,n.name="AssertionError",n.message=o,n}return H(e,t),e}(Error);function W(t,e){if(!t)throw new B(e)}function Y(t,e,n){return Math.min(Math.max(t,e),n)}var q="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},Q="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function $(t,e,n,o,i,r){var s=i-n,a=r-o;if(0!==s||0!==a){var l=((t-n)*s+(e-o)*a)/(s*s+a*a);l>1?(n=i,o=r):l>0&&(n+=s*l,o+=a*l)}return J(t,e,n,o)}function J(t,e,n,o){var i=n-t,r=o-e;return i*i+r*r}function tt(t){return 180*t/Math.PI}function et(t){return t*Math.PI/180}function nt(t,e){var n=t%e;return n*e<0?n+e:n}function ot(t,e,n){return t+n*(e-t)}function it(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function rt(t,e){return Math.floor(it(t,e))}function st(t,e){return Math.ceil(it(t,e))}var at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const lt=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.background_=e.background;var o=h({},e);return"object"==typeof e.properties&&(delete o.properties,h(o,e.properties)),o.opacity=void 0!==e.opacity?e.opacity:1,W("number"==typeof o.opacity,64),o.visible=void 0===e.visible||e.visible,o.zIndex=e.zIndex,o.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,o.minResolution=void 0!==e.minResolution?e.minResolution:0,o.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,o.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return at(e,t),e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Y(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return A()},e.prototype.getLayerStatesArray=function(t){return A()},e.prototype.getExtent=function(){return this.get(N)},e.prototype.getMaxResolution=function(){return this.get(K)},e.prototype.getMinResolution=function(){return this.get(Z)},e.prototype.getMinZoom=function(){return this.get(U)},e.prototype.getMaxZoom=function(){return this.get(V)},e.prototype.getOpacity=function(){return this.get(D)},e.prototype.getSourceState=function(){return A()},e.prototype.getVisible=function(){return this.get(z)},e.prototype.getZIndex=function(){return this.get(G)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(N,t)},e.prototype.setMaxResolution=function(t){this.set(K,t)},e.prototype.setMinResolution=function(t){this.set(Z,t)},e.prototype.setMaxZoom=function(t){this.set(V,t)},e.prototype.setMinZoom=function(t){this.set(U,t)},e.prototype.setOpacity=function(t){W("number"==typeof t,64),this.set(D,t)},e.prototype.setVisible=function(t){this.set(z,t)},e.prototype.setZIndex=function(t){this.set(G,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(k),ut="precompose",ct="rendercomplete",ht="undefined",pt="ready";var dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ft(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var o=e.zoom;return o>t.minZoom&&o<=t.maxZoom}const gt=function(t){function e(e){var n=this,o=h({},e);delete o.source,(n=t.call(this,o)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(X,n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return dt(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(X)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ht},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(O(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=T(t,_,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMapInternal=function(t){this.set("map",t)},e.prototype.getMapInternal=function(){return this.get("map")},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(O(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(O(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=T(t,ut,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);W(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=T(this,_,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(X,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(lt),vt="preload",_t="useInterimTilesOnError";var yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mt=function(t){function e(e){var n=this,o=e||{},i=h({},o);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==o.preload?o.preload:0),n.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),n}return yt(e,t),e.prototype.getPreload=function(){return this.get(vt)},e.prototype.setPreload=function(t){this.set(vt,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(_t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(_t,t)},e}(gt);var wt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ct=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return wt(e,t),e.prototype.getFeatures=function(t){return A()},e.prototype.prepareFrame=function(t){return A()},e.prototype.renderFrame=function(t,e){return A()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(o,i){var r=this.loadedTileCallback.bind(this,n,o);return t.forEachLoadedTile(e,o,i,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i){},e.prototype.getDataAtPixel=function(t,e,n){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(_,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==pt&&t.changed()},e}(M);var xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Et=function(t){function e(e,n,o,i){var r=t.call(this,e)||this;return r.inversePixelTransform=n,r.frameState=o,r.context=i,r}return xt(e,t),e}(e);var bt,Tt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Pt=-1!==Tt.indexOf("firefox"),Ot=(-1!==Tt.indexOf("safari")&&Tt.indexOf("chrom"),-1!==Tt.indexOf("webkit")&&-1==Tt.indexOf("edge")),Rt=-1!==Tt.indexOf("macintosh"),St="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Mt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,At="undefined"!=typeof Image&&Image.prototype.decode,It=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function jt(t,e){var n=e[0],o=e[1];return e[0]=t[0]*n+t[2]*o+t[4],e[1]=t[1]*n+t[3]*o+t[5],e}function Lt(t,e,n,o,i,r,s,a){var l=Math.sin(r),u=Math.cos(r);return t[0]=o*u,t[1]=i*l,t[2]=-o*l,t[3]=i*u,t[4]=s*o*u-a*o*l+e,t[5]=s*i*l+a*i*u+n,t}function Ft(t,e){var n,o=(n=e)[0]*n[3]-n[1]*n[2];W(0!==o,32);var i=e[0],r=e[1],s=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/o,t[1]=-r/o,t[2]=-s/o,t[3]=i/o,t[4]=(s*u-a*l)/o,t[5]=-(i*u-r*l)/o,t}new Array(6);var kt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Dt=/^([a-z]*)$|^hsla?\(.*\)$/i;var zt=function(){var t={},e=0;return function(n){var o;if(t.hasOwnProperty(n))o=t[n];else{if(e>=1024){var i=0;for(var r in t)0==(3&i++)&&(delete t[r],--e)}o=function(t){var e,n,o,i,r;if(Dt.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}(t)),kt.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),n=parseInt(t.substr(1+1*s,s),16),o=parseInt(t.substr(1+2*s,s),16),i=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,n=(n<<4)+n,o=(o<<4)+o,l&&(i=(i<<4)+i)),r=[e,n,o,i/255]}else 0==t.indexOf("rgba(")?Gt(r=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((r=t.slice(4,-1).split(",").map(Number)).push(1),Gt(r)):W(!1,14);return r}(n),t[n]=o,++e}return o}}();function Nt(t){return Array.isArray(t)?t:zt(t)}function Gt(t){return t[0]=Y(t[0]+.5|0,0,255),t[1]=Y(t[1]+.5|0,0,255),t[2]=Y(t[2]+.5|0,0,255),t[3]=Y(t[3],0,1),t}const Kt="top-left";function Zt(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,o=t.length;n<o;++n)qt(e,t[n]);return e}function Vt(t,e,n){var o,i;return(o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*o+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function Ut(t,e){return Xt(t,e[0],e[1])}function Xt(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Ht(t,e){var n=t[0],o=t[1],i=t[2],r=t[3],s=e[0],a=e[1],l=0;return s<n?l|=16:s>i&&(l|=4),a<o?l|=8:a>r&&(l|=2),0===l&&(l=1),l}function Bt(t,e,n,o,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=o,i):[t,e,n,o]}function Wt(t){return Bt(1/0,1/0,-1/0,-1/0,t)}function Yt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function qt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Qt(t,e,n,o,i){for(;n<o;n+=i)$t(t,e[n],e[n+1]);return t}function $t(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Jt(t,e){var n;return(n=e(ee(t)))||(n=e(ne(t)))||(n=e(ue(t)))?n:(n=e(le(t)))||!1}function te(t){var e=0;return pe(t)||(e=ce(t)*se(t)),e}function ee(t){return[t[0],t[1]]}function ne(t){return[t[2],t[1]]}function oe(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ie(t,e){var n;return"bottom-left"===e?n=ee(t):"bottom-right"===e?n=ne(t):e===Kt?n=le(t):"top-right"===e?n=ue(t):W(!1,13),n}function re(t,e,n,o,i){var r=e*o[0]/2,s=e*o[1]/2,a=Math.cos(n),l=Math.sin(n),u=r*a,c=r*l,h=s*a,p=s*l,d=t[0],f=t[1],g=d-u+p,v=d-u-p,_=d+u-p,y=d+u+p,m=f-c-h,w=f-c+h,C=f+c+h,x=f+c-h;return Bt(Math.min(g,v,_,y),Math.min(m,w,C,x),Math.max(g,v,_,y),Math.max(m,w,C,x),i)}function se(t){return t[3]-t[1]}function ae(t,e,n){var o=n||[1/0,1/0,-1/0,-1/0];return he(t,e)?(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]):Wt(o),o}function le(t){return[t[0],t[3]]}function ue(t){return[t[2],t[3]]}function ce(t){return t[2]-t[0]}function he(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function pe(t){return t[2]<t[0]||t[3]<t[1]}function de(t,e,n,o){var i;return i=n&&n.length?n.shift():Mt?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",o)}function fe(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function ge(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var ve=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.pixelContext_=null,n}return ve(e,t),e.prototype.getBackground=function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0},e.prototype.useContainer=function(t,e,n,o){var i,r,s=this.getLayer().getClassName();if(t&&t.className===s&&""===t.style.opacity&&1===n&&(!o||t.style.backgroundColor&&a(Nt(t.style.backgroundColor),Nt(o)))&&(u=t.firstElementChild)instanceof HTMLCanvasElement&&(r=u.getContext("2d")),r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(i=document.createElement("div")).className=s;var l=i.style;l.position="absolute",l.width="100%",l.height="100%",o&&(l.backgroundColor=o);var u=(r=de()).canvas;i.appendChild(u),(l=u.style).position="absolute",l.left="0",l.transformOrigin="top left",this.container=i,this.context=r}},e.prototype.clipUnrotated=function(t,e,n){var o=le(n),i=ue(n),r=ne(n),s=ee(n);jt(e.coordinateToPixelTransform,o),jt(e.coordinateToPixelTransform,i),jt(e.coordinateToPixelTransform,r),jt(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;jt(a,o),jt(a,i),jt(a,r),jt(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var o=this.getLayer();if(o.hasListener(t)){var i=new Et(t,this.inversePixelTransform,n,e);o.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,n,o,i,r,s){var a=i/2,l=r/2,u=o/e,c=-u,h=-t[0]+s,p=-t[1];return Lt(this.tempTransform,a,l,u,c,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var o=jt(this.inversePixelTransform,t.slice()),i=this.context,r=this.getLayer().getExtent();if(r&&!Ut(r,jt(e.pixelToCoordinateTransform,t.slice())))return null;var s,a=Math.round(o[0]),l=Math.round(o[1]),u=this.pixelContext_;if(!u){var c=document.createElement("canvas");c.width=1,c.height=1,u=c.getContext("2d"),this.pixelContext_=u}u.clearRect(0,0,1,1);try{u.drawImage(i.canvas,a,l,1,1,0,0,1,1),s=u.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.pixelContext_=null,new Uint8Array):s}return 0===s[3]?null:s},e}(Ct);const ye=_e;var me=function(){function t(t,e,n,o){this.minX=t,this.maxX=e,this.minY=n,this.maxY=o}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function we(t,e,n,o,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=o,i):new me(t,e,n,o)}const Ce=me;var xe={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Ee={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},be="ol-hidden",Te="ol-control",Pe=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),{RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"}),Oe={};Oe[Pe.RADIANS]=6370997/(2*Math.PI),Oe[Pe.DEGREES]=2*Math.PI*6370997/360,Oe[Pe.FEET]=.3048,Oe[Pe.METERS]=1,Oe[Pe.USFEET]=1200/3937;const Re=Pe,Se=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Oe[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var Me=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ae=6378137,Ie=Math.PI*Ae,je=[-Ie,-Ie,Ie,Ie],Le=[-180,-85,180,85],Fe=Ae*Math.log(Math.tan(Math.PI/2)),ke=function(t){function e(e){return t.call(this,{code:e,units:Re.METERS,extent:je,global:!0,worldExtent:Le,getPointResolution:function(t,e){return t/q(e[1]/Ae)}})||this}return Me(e,t),e}(Se),De=[new ke("EPSG:3857"),new ke("EPSG:102100"),new ke("EPSG:102113"),new ke("EPSG:900913"),new ke("http://www.opengis.net/def/crs/EPSG/0/3857"),new ke("http://www.opengis.net/gml/srs/epsg.xml#3857")];var ze=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ne=[-180,-90,180,90],Ge=6378137*Math.PI/180,Ke=function(t){function e(e,n){return t.call(this,{code:e,units:Re.DEGREES,extent:Ne,axisOrientation:n,global:!0,metersPerUnit:Ge,worldExtent:Ne})||this}return ze(e,t),e}(Se),Ze=[new Ke("CRS:84"),new Ke("EPSG:4326","neu"),new Ke("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ke("urn:ogc:def:crs:OGC:2:84"),new Ke("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ke("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ke("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Ve={},Ue={};function Xe(t,e,n){var o=t.getCode(),i=e.getCode();o in Ue||(Ue[o]={}),Ue[o][i]=n}var He=6371008.8;function Be(t,e,n){var o=n||He,i=et(t[1]),r=et(e[1]),s=(r-i)/2,a=et(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*o*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function We(t,e,n,o){var i=o||He,r=et(t[1]),s=et(t[0]),a=e/i,l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(n));return[tt(s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l))),tt(l)]}function Ye(t,e,n){var o;if(void 0!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];o=e}else o=t.slice();return o}function qe(t,e,n){if(void 0!==e&&t!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}return t}function Qe(t){!function(t,e){Ve[t]=e}(t.getCode(),t),Xe(t,t,Ye)}function $e(t){return"string"==typeof t?Ve[e=t]||Ve[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Je(t,e,n,o){var i,r=(t=$e(t)).getPointResolutionFunc();if(r)i=r(e,n),o&&o!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/Oe[o]);else{var s=t.getUnits();if(s==Re.DEGREES&&!o||o==Re.DEGREES)i=e;else{var a,l=on(t,$e("EPSG:4326"));if(l===qe&&s!==Re.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(Be((u=l(u,u,2)).slice(0,2),u.slice(2,4))+Be(u.slice(4,6),u.slice(6,8)))/2}void 0!==(a=o?Oe[o]:t.getMetersPerUnit())&&(i/=a)}}return i}function tn(t){!function(t){t.forEach(Qe)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Xe(e,t,Ye)}))}))}function en(t,e){return t?"string"==typeof t?$e(t):t:$e(e)}function nn(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||on(t,e)===Ye)&&n}function on(t,e){var n=function(t,e){var n;return t in Ue&&e in Ue[t]&&(n=Ue[t][e]),n}(t.getCode(),e.getCode());return n||(n=qe),n}function rn(t,e){return on($e(t),$e(e))}function sn(t,e,n){return rn(e,n)(t,void 0,t.length)}var an,ln,un,cn=null;function hn(){return cn}function pn(t,e){return t}function dn(t,e){return t}function fn(t,e){return t}tn(De),tn(Ze),an=De,ln=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i){r[s]=Ie*t[s]/180;var a=Ae*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>Fe?a=Fe:a<-Fe&&(a=-Fe),r[s+1]=a}return r},un=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i)r[s]=180*t[s]/Ie,r[s+1]=360*Math.atan(Math.exp(t[s+1]/Ae))/Math.PI-90;return r},Ze.forEach((function(t){an.forEach((function(e){Xe(t,e,ln),Xe(e,t,un)}))}));var gn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vn=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new Ce(0,0,0,0),n}return gn(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),o=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!o},e.prototype.getTile=function(t,e,n,o){var i=o.pixelRatio,r=o.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,n,i,r);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,n,o){return!!this.isDrawableTile(o)&&t.prototype.loadedTileCallback.call(this,e,n,o)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],o=t.viewState,r=o.projection,s=o.resolution,a=o.center,l=o.rotation,u=t.pixelRatio,c=this.getLayer(),p=c.getSource(),d=p.getRevision(),f=p.getTileGridForProjection(r),g=f.getZForResolution(s,p.zDirection),v=f.getResolution(g),_=t.extent,y=n.extent&&fn(n.extent);y&&(_=ae(_,fn(n.extent)));var m=p.getTilePixelRatio(u),w=Math.round(t.size[0]*m),C=Math.round(t.size[1]*m);if(l){var x=Math.round(Math.sqrt(w*w+C*C));w=x,C=x}var E=v*w/2/m,b=v*C/2/m,T=[a[0]-E,a[1]-b,a[0]+E,a[1]+b],P=f.getTileRangeForExtentAndZ(_,g),O={};O[g]={};var R=this.createLoadedTileFinder(p,r,O),S=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var A=P.minX;A<=P.maxX;++A)for(var I=P.minY;I<=P.maxY;++I){var L=this.getTile(g,A,I,t);if(this.isDrawableTile(L)){var F=j(this);if(2==L.getState()){O[g][L.tileCoord.toString()]=L;var k=L.inTransition(F);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(F,t.time))continue}var D=f.getTileCoordChildTileRange(L.tileCoord,M,S),z=!1;D&&(z=R(g+1,D)),z||f.forEachTileCoordParentTileRange(L.tileCoord,R,M,S)}var N=v/s;Lt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,l,-w/2,-C/2);var G=function(t){var e="matrix("+t.join(", ")+")";if(Mt)return e;var n=bt||(bt=document.createElement("div"));return n.style.transform=e,n.style.transform}(this.pixelTransform);this.useContainer(e,G,n.opacity,this.getBackground(t));var K=this.context,Z=K.canvas;Ft(this.inversePixelTransform,this.pixelTransform),Lt(this.tempTransform,w/2,C/2,N,N,0,-w/2,-C/2),Z.width!=w||Z.height!=C?(Z.width=w,Z.height=C):this.containerReused||K.clearRect(0,0,w,C),y&&this.clipUnrotated(K,t,y),p.getInterpolate()||h(K,xe),this.preRender(K,t),this.renderedTiles.length=0;var V,U,X,H=Object.keys(O).map(Number);H.sort(i),1!==n.opacity||this.containerReused&&!p.getOpaque(t.viewState.projection)?(V=[],U=[]):H=H.reverse();for(var B=H.length-1;B>=0;--B){var W=H[B],Y=p.getTilePixelSize(W,u,r),q=f.getResolution(W)/v,Q=Y[0]*q*N,$=Y[1]*q*N,J=f.getTileCoordForCoordAndZ(le(T),W),tt=f.getTileCoordExtent(J),et=jt(this.tempTransform,[m*(tt[0]-T[0])/v,m*(T[3]-tt[3])/v]),nt=m*p.getGutterForProjection(r),ot=O[W];for(var it in ot){var rt=(L=ot[it]).tileCoord,st=J[1]-rt[1],at=Math.round(et[0]-(st-1)*Q),lt=J[2]-rt[2],ut=Math.round(et[1]-(lt-1)*$),ct=at-(A=Math.round(et[0]-st*Q)),ht=ut-(I=Math.round(et[1]-lt*$)),pt=g===W;if(!(k=pt&&1!==L.getAlpha(j(this),t.time)))if(V){K.save(),X=[A,I,A+ct,I,A+ct,I+ht,A,I+ht];for(var dt=0,ft=V.length;dt<ft;++dt)if(g!==W&&W<U[dt]){var gt=V[dt];K.beginPath(),K.moveTo(X[0],X[1]),K.lineTo(X[2],X[3]),K.lineTo(X[4],X[5]),K.lineTo(X[6],X[7]),K.moveTo(gt[6],gt[7]),K.lineTo(gt[4],gt[5]),K.lineTo(gt[2],gt[3]),K.lineTo(gt[0],gt[1]),K.clip()}V.push(X),U.push(W)}else K.clearRect(A,I,ct,ht);this.drawTileImage(L,t,A,I,ct,ht,nt,pt),V&&!k?(K.restore(),this.renderedTiles.unshift(L)):this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,p,L)}}this.renderedRevision=d,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Yt(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,p,f,u,r,_,g,c.getPreload()),this.scheduleExpireCache(t,p),this.postRender(K,t),n.extent&&K.restore(),h(K,Ee),G!==Z.style.transform&&(Z.style.transform=G);var vt=function(t){return 1===t?"":String(Math.round(100*t)/100)}(n.opacity),_t=this.container;return vt!==_t.style.opacity&&(_t.style.opacity=vt),this.container},e.prototype.drawTileImage=function(t,e,n,o,i,r,s,a){var l=this.getTileImage(t);if(l){var u=j(this),c=a?t.getAlpha(u,e.time):1,h=c!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,o,i,r),h&&this.context.restore(),1!==c?e.animate=!0:a&&t.endTransition(u)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var o=j(t);o in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var o=j(e);o in t||(t[o]={}),t[o][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,o,i,r,s,a,l){var u=j(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,p,d,f,g,v=t.wantedTiles[u],_=t.tileQueue,y=0;for(g=n.getMinZoom();g<=s;++g)for(h=n.getTileRangeForExtentAndZ(r,g,h),p=n.getResolution(g),d=h.minX;d<=h.maxX;++d)for(f=h.minY;f<=h.maxY;++f)s-g<=a?(++y,0==(c=e.getTile(g,d,f,o,i)).getState()&&(v[c.getKey()]=!0,_.isKeyQueued(c.getKey())||_.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),p])),void 0!==l&&l(c)):e.useTile(g,d,f,i);e.updateCacheSize(y,i)},e}(ye);vn.prototype.getLayer;const _n=vn;var yn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mn=function(t){function e(e){return t.call(this,e)||this}return yn(e,t),e.prototype.createRenderer=function(){return new _n(this)},e}(mt),wn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Cn(t,e){for(var n=!0,o=t.length-1;o>=0;--o)if(t[o]!=e[o]){n=!1;break}return n}function xn(t,e){var n=Math.cos(e),o=Math.sin(e),i=t[0]*n-t[1]*o,r=t[1]*n+t[0]*o;return t[0]=i,t[1]=r,t}function En(t,e,n){return function(o,i,r,s,a){if(o){var l=e?0:r[0]*i,u=e?0:r[1]*i,c=a?a[0]:0,h=a?a[1]:0,p=t[0]+l/2+c,d=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;p>d&&(d=p=(d+p)/2),f>g&&(g=f=(g+f)/2);var v=Y(o[0],p,d),_=Y(o[1],f,g),y=30*i;return s&&n&&(v+=-y*Math.log(1+Math.max(0,p-o[0])/y)+y*Math.log(1+Math.max(0,o[0]-d)/y),_+=-y*Math.log(1+Math.max(0,f-o[1])/y)+y*Math.log(1+Math.max(0,o[1]-g)/y)),[v,_]}}}function bn(t){return t}function Tn(t,e,n,o){var i=ce(e)/n[0],r=se(e)/n[1];return o?Math.min(t,Math.max(i,r)):Math.min(t,Math.min(i,r))}function Pn(t,e,n){var o=Math.min(t,e);return o*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(o=Math.max(o,n),o/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Y(o,n/2,2*e)}function On(t,e,n,o,i){return function(r,s,a,l){if(void 0!==r){var u=o?Tn(t,o,a,i):t;return(void 0===n||n)&&l?Pn(r,u,e):Y(r,e,u)}}}function Rn(t){return void 0!==t?0:void 0}function Sn(t){return void 0!==t?t:void 0}function Mn(t){return Math.pow(t,3)}function An(t){return 1-Mn(1-t)}function In(t){return 3*t*t-2*t*t*t}function jn(t){return t}const Ln="XY",Fn="XYZM";var kn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dn=[1,0,0,1,0,0],zn=function(t){function e(){var e,n,o,i,r,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(e)},r=!1,function(){var t=Array.prototype.slice.call(arguments);return r&&this===i&&a(t,o)||(r=!0,i=this,o=t,n=e.apply(this,arguments)),n}),s}return kn(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return A()},e.prototype.closestPointXY=function(t,e,n,o){return A()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return A()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Wt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){A()},e.prototype.scale=function(t,e,n){A()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return A()},e.prototype.getType=function(){return A()},e.prototype.applyTransform=function(t){A()},e.prototype.intersectsExtent=function(t){return A()},e.prototype.translate=function(t,e){A()},e.prototype.transform=function(t,e){var n=$e(t),o=n.getUnits()==Re.TILE_PIXELS?function(t,o,i){var r=n.getExtent(),s=n.getWorldExtent(),a=se(s)/se(r);return Lt(Dn,s[0],s[3],a,-a,0,0,0),function(t,e,n,o,i,r){for(var s=r||[],a=0,l=0;l<n;l+=o){var u=t[l],c=t[l+1];s[a++]=i[0]*u+i[2]*c+i[4],s[a++]=i[1]*u+i[3]*c+i[5]}r&&s.length!=a&&(s.length=a)}(t,0,t.length,i,Dn,o),rn(n,e)(t,o,i)}:rn(n,e);return this.applyTransform(o),this},e}(k);const Nn=zn;var Gn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kn=function(t){function e(){var e=t.call(this)||this;return e.layout=Ln,e.stride=2,e.flatCoordinates=null,e}return Gn(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=this.flatCoordinates.length,o=this.stride,Qt(Wt(t),e,0,n,o);var e,n,o},e.prototype.getCoordinates=function(){return A()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Zn(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){A()},e.prototype.setLayout=function(t,e,n){var o;if(t)o=Zn(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=Ln,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=Ln:3==t?e="XYZ":4==t&&(e=Fn),e}(o=e.length)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=Math.cos(i),u=Math.sin(i),c=r[0],h=r[1],p=0,d=0;d<n;d+=o){var f=t[d]-c,g=t[d+1]-h;a[p++]=c+f*l-g*u,a[p++]=h+f*u+g*l;for(var v=d+2;v<d+o;++v)a[p++]=t[v]}s&&a.length!=p&&(a.length=p)}(n,0,n.length,o,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var o=e;void 0===o&&(o=t);var i=n;i||(i=oe(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,e,n,o,i,r,s,a){for(var l=a||[],u=s[0],c=s[1],h=0,p=0;p<n;p+=o){var d=t[p]-u,f=t[p+1]-c;l[h++]=u+i*d,l[h++]=c+r*f;for(var g=p+2;g<p+o;++g)l[h++]=t[g]}a&&l.length!=h&&(l.length=h)}(r,0,r.length,s,t,o,i,r),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=0,u=0;u<n;u+=o){a[l++]=t[u]+i,a[l++]=t[u+1]+r;for(var c=u+2;c<u+o;++c)a[l++]=t[c]}s&&a.length!=l&&(a.length=l)}(n,0,n.length,o,t,e,n),this.changed()}},e}(Nn);function Zn(t){var e;return t==Ln?e=2:"XYZ"==t||"XYM"==t?e=3:t==Fn&&(e=4),e}const Vn=Kn;function Un(t,e,n,o,i,r,s){var a,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)a=e;else{var p=((i-l)*c+(r-u)*h)/(c*c+h*h);if(p>1)a=n;else{if(p>0){for(var d=0;d<o;++d)s[d]=ot(t[e+d],t[n+d],p);return void(s.length=o)}a=e}}for(d=0;d<o;++d)s[d]=t[a+d];s.length=o}function Xn(t,e,n,o,i){var r=t[e],s=t[e+1];for(e+=o;e<n;e+=o){var a=t[e],l=t[e+1],u=J(r,s,a,l);u>i&&(i=u),r=a,s=l}return i}function Hn(t,e,n,o,i,r,s,a,l,u,c){if(e==n)return u;var h,p;if(0===i){if((p=J(s,a,t[e],t[e+1]))<u){for(h=0;h<o;++h)l[h]=t[e+h];return l.length=o,p}return u}for(var d=c||[NaN,NaN],f=e+o;f<n;)if(Un(t,f-o,f,o,s,a,d),(p=J(s,a,d[0],d[1]))<u){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o,f+=o}else f+=o*Math.max((Math.sqrt(p)-Math.sqrt(u))/i|0,1);if(r&&(Un(t,n-o,e,o,s,a,d),(p=J(s,a,d[0],d[1]))<u)){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o}return u}function Bn(t,e,n,o){for(var i=0,r=n.length;i<r;++i)for(var s=n[i],a=0;a<o;++a)t[e++]=s[a];return e}function Wn(t,e){return e*Math.round(t/e)}function Yn(t,e,n,o,i,r,s){if(e==n)return s;var a,l,u=Wn(t[e],i),c=Wn(t[e+1],i);e+=o,r[s++]=u,r[s++]=c;do{if(a=Wn(t[e],i),l=Wn(t[e+1],i),(e+=o)==n)return r[s++]=a,r[s++]=l,s}while(a==u&&l==c);for(;e<n;){var h=Wn(t[e],i),p=Wn(t[e+1],i);if(e+=o,h!=a||p!=l){var d=a-u,f=l-c,g=h-u,v=p-c;d*v==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&v<f||f==v||f>0&&v>f)?(a=h,l=p):(r[s++]=a,r[s++]=l,u=a,c=l,a=h,l=p)}}return r[s++]=a,r[s++]=l,s}function qn(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=e;a<n;a+=o)r[s++]=t.slice(a,a+o);return r.length=s,r}function Qn(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=s*a-r*l,r=a,s=l}return i/2}var $n=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jn=function(t){function e(e,n){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?o.setCoordinates(e,n):o.setFlatCoordinates(n,e),o}return $n(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,o){return o<Vt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.getArea=function(){return Qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=function(t,e,n,o,i,r,s){var a=(n-e)/o;if(a<3){for(;e<n;e+=o)r[s++]=t[e],r[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,n-o],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),d=0,f=t[p],g=t[p+1],v=t[h],_=t[h+1],y=p+o;y<h;y+=o){var m=$(t[y],t[y+1],f,g,v,_);m>d&&(c=y,d=m)}d>i&&(l[(c-e)/o]=1,p+o<c&&u.push(p,c),c+o<h&&u.push(c,h))}for(y=0;y<a;++y)l[y]&&(r[s++]=t[e+y*o],r[s++]=t[e+y*o+1]);return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Ln)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Vn);const to=Jn;var eo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),no=function(t){function e(e,n){var o=t.call(this)||this;return o.setCoordinates(e,n),o}return eo(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){var i=this.flatCoordinates,r=J(t,e,i[0],i[1]);if(r<o){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,r}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return n=t,Bt(o=(e=this.flatCoordinates)[0],i=e[1],o,i,n);var e,n,o,i},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return Xt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,o){for(var i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Vn);const oo=no;function io(t,e,n,o,i){return!Jt(i,(function(i){return!ro(t,e,n,o,i[0],i[1])}))}function ro(t,e,n,o,i,r){for(var s=0,a=t[n-o],l=t[n-o+1];e<n;e+=o){var u=t[e],c=t[e+1];l<=r?c>r&&(u-a)*(r-l)-(i-a)*(c-l)>0&&s++:c<=r&&(u-a)*(r-l)-(i-a)*(c-l)<0&&s--,a=u,l=c}return 0!==s}function so(t,e,n,o,i,r){if(0===n.length)return!1;if(!ro(t,e,n[0],o,i,r))return!1;for(var s=1,a=n.length;s<a;++s)if(ro(t,n[s-1],n[s],o,i,r))return!1;return!0}function ao(t,e,n,o,i){var r,s,a=Qt([1/0,1/0,-1/0,-1/0],t,e,n,o);return!!he(i,a)&&(s=a,(r=i)[0]<=s[0]&&s[2]<=r[2]&&r[1]<=s[1]&&s[3]<=r[3]||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]||function(t,e,n,o,r){var s,a,l;for(e+=o;e<n;e+=o)if(a=t.slice(e-o,e),l=t.slice(e,e+o),s=function(t,e,n){var o=!1,i=Ht(t,e),r=Ht(t,n);if(1===i||1===r)o=!0;else{var s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],p=n[0],d=n[1],f=(d-h)/(p-c),g=void 0,v=void 0;2&r&&!(2&i)&&(o=(g=p-(d-u)/f)>=s&&g<=l),o||!(4&r)||4&i||(o=(v=d-(p-l)*f)>=a&&v<=u),o||!(8&r)||8&i||(o=(g=p-(d-a)/f)>=s&&g<=l),o||!(16&r)||16&i||(o=(v=d-(p-s)*f)>=a&&v<=u)}return o}(i,a,l))return s;return!1}(t,e,n,o))}function lo(t,e,n,o){for(;e<n-o;){for(var i=0;i<o;++i){var r=t[e+i];t[e+i]=t[n-o+i],t[n-o+i]=r}e+=o,n-=o}}function uo(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=(a-r)*(l+s),r=a,s=l}return 0===i?void 0:i>0}function co(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=uo(t,e,l,o);(0===s?r&&u||!r&&!u:r&&!u||!r&&u)&&lo(t,e,l,o),e=l}return e}var ho=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),po=function(t){function e(e,n,o){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&o?(i.setFlatCoordinates(n,e),i.ends_=o):i.setCoordinates(e,n),i}return ho(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?s(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){return o<Vt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,o,i){for(var r=0,s=n.length;r<s;++r){var a=n[r];i=Xn(t,e,a,o,i),e=a}return i}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,o,i,r,s,a,l,u,c){for(var h=c||[NaN,NaN],p=0,d=n.length;p<d;++p){var f=n[p];u=Hn(t,e,f,o,i,r,s,a,l,u,h),e=f}return u}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.containsXY=function(t,e){return so(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,o){for(var i=0,r=0,s=n.length;r<s;++r){var a=n[r];i+=Qn(t,e,a,o),e=a}return i}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?co(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];r[s++]=qn(t,e,u,o,r[s]),e=u}return r.length=s,r}(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=oe(this.getExtent());this.flatInteriorPoint_=function(t,e,n,o,r,s,a){for(var l,u,c,h,p,d,f,g=r[s+1],v=[],_=0,y=n.length;_<y;++_){var m=n[_];for(h=t[m-o],d=t[m-o+1],l=e;l<m;l+=o)p=t[l],f=t[l+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(p-h)+h,v.push(c)),h=p,d=f}var w=NaN,C=-1/0;for(v.sort(i),h=v[0],l=1,u=v.length;l<u;++l){p=v[l];var x=Math.abs(p-h);x>C&&so(t,e,n,o,c=(h+p)/2,g)&&(w=c,C=x),h=p}return isNaN(w)&&(w=r[s]),a?(a.push(w,g,C),a):[w,g,C]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new oo(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new to(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,o=[],i=0,r=0,s=n.length;r<s;++r){var a=n[r],l=new to(e.slice(i,a),t);o.push(l),i=a}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=uo(t,e,l,o);if(0===s){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;e=l}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=co(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],o=[];return n.length=function(t,e,n,o,i,r,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=Yn(t,e,c,o,i,r,s),a.push(s),e=c}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,o),new e(n,Ln,o)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,o,i){if(!function(t,e,n,o,i){return!!(ao(t,e,n,o,i)||ro(t,e,n,o,i[0],i[1])||ro(t,e,n,o,i[0],i[3])||ro(t,e,n,o,i[2],i[1])||ro(t,e,n,o,i[2],i[3]))}(t,e,n[0],o,i))return!1;if(1===n.length)return!0;for(var r=1,s=n.length;r<s;++r)if(io(t,n[r-1],n[r],o,i)&&!ao(t,n[r-1],n[r],o,i))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,o,i){for(var r=i||[],s=0,a=0,l=n.length;a<l;++a){var u=Bn(t,e,n[a],o);r[s++]=u,e=u}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(Vn);const fo=po;function go(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=[e,n,e,i,o,i,o,n,e,n];return new po(r,Ln,[r.length])}var vo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_o=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=h({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=en(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,o.center&&(o.center=dn(o.center,n.projection_)),o.extent&&(o.extent=fn(o.extent,n.projection_)),n.applyOptions_(o),n}return vo(e,t),e.prototype.applyOptions_=function(t){var e=h({},t);for(var n in wn)delete e[n];this.setProperties(e,!0);var o=function(t){var e,n,o,i=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,h=en(t.projection,"EPSG:3857"),p=h.getExtent(),d=t.constrainOnlyCenter,f=t.extent;if(l||f||!h.isGlobal()||(d=!1,f=p),void 0!==t.resolutions){var g=t.resolutions;n=g[i],o=void 0!==g[s]?g[s]:g[g.length-1],e=t.constrainResolution?function(t,e,n,o){return function(i,s,a,l){if(void 0!==i){var u=t[0],c=t[t.length-1],h=n?Tn(u,n,a,o):u;if(l)return void 0===e||e?Pn(i,h,c):Y(i,c,h);var p=Math.min(h,i),d=Math.floor(r(t,p,s));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}(g,u,!d&&f,c):On(n,o,u,!d&&f,c)}else{var v=(p?Math.max(ce(p),se(p)):360*Oe[Re.DEGREES]/h.getMetersPerUnit())/256/Math.pow(2,0),_=v/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=v/Math.pow(a,i),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,s):v/Math.pow(a,s):_),s=i+Math.floor(Math.log(n/o)/Math.log(a)),o=n/Math.pow(a,s-i),e=t.constrainResolution?function(t,e,n,o,i,r){return function(s,a,l,u){if(void 0!==s){var c=i?Tn(e,i,l,r):e,h=void 0!==n?n:0;if(u)return void 0===o||o?Pn(s,c,h):Y(s,h,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),d=-a*(.5-1e-9)+.5,f=Math.min(c,s),g=Math.floor(Math.log(e/f)/Math.log(t)+d),v=Math.max(p,g);return Y(e/Math.pow(t,v),h,c)}}}(a,n,o,u,!d&&f,c):On(n,o,u,!d&&f,c)}return{constraint:e,maxResolution:n,minResolution:o,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=o.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return En(t.extent,t.constrainOnlyCenter,e)}var n=en(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,En(o,!1,!1)}return bn}(t),s=o.constraint,a=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=et(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?Sn:"number"==typeof e?(n=e,o=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/o+.5)*o:void 0}):Sn}return Rn;var n,o,i}(t);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),s=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-s])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),h({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=h({},o)).center=dn(o.center,this.getProjection())),o.anchor&&((o=h({},o)).anchor=dn(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var i=arguments[o];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(o!==n){for(var r=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,u=[];o<n;++o){var c=arguments[o],h={start:r,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||In,callback:e};if(c.center&&(h.sourceCenter=s,h.targetCenter=c.center.slice(),s=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=l;var p=nt(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+p,l=h.targetRotation}mo(h)?h.complete=!0:r+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(0,1),this.updateAnimations_()}else e&&yo(e,!0)},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var o=this.animations_[e];if(o[0].callback&&yo(o[0].callback,!1),!t)for(var i=0,r=o.length;i<r;++i){var s=o[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var o=this.animations_[n],i=!0,r=0,s=o.length;r<s;++r){var a=o[r];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):i=!1;var c=a.easing(u);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],d=a.targetCenter[0],f=a.targetCenter[1];this.nextCenter_=a.targetCenter;var g=h+c*(d-h),v=p+c*(f-p);this.targetCenter_=[g,v]}if(a.sourceResolution&&a.targetResolution){var _=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){var y=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(_,0,y,!0);this.targetCenter_=this.calculateCenterZoom(m,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var w=1===c?nt(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){var C=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(C,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(i){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var x=o[0].callback;x&&yo(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,o,i,r=this.getCenterInternal();return void 0!==r&&(xn(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),i=e,(o=n)[0]+=+i[0],o[1]+=+i[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();return void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?pn(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(wn.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();W(n,1);var o=this.getResolution();W(void 0!==o,2);var i=this.getRotation();return W(void 0!==i,3),re(n,o,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(wn.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(fn(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),o=ce(t)/n[0],i=se(t)/n[1];return Math.max(o,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(wn.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=wo(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=r(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Y(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Y(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(W(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))W(!pe(t),25),n=go(o=fn(t,this.getProjection()));else if("Circle"===t.getType()){var o;(n=go(o=fn(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),oe(o))}else{var i=hn();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),s=1/0,a=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=r){var p=i[c]*n-i[c+1]*o,d=i[c]*o+i[c+1]*n;s=Math.min(s,p),a=Math.min(a,d),l=Math.max(l,p),u=Math.max(u,d)}return[s,a,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},o=n.size;o||(o=this.getViewportSizeMinusPadding_());var i,r=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,s?0:1);var u=this.getRotation(),h=Math.sin(u),p=Math.cos(u),d=oe(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;var f=d[0]*p-d[1]*h,g=d[1]*p+d[0]*h,v=this.getConstrainedCenter([f,g],l),_=n.callback?n.callback:c;void 0!==n.duration?this.animateInternal({resolution:l,center:v,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),yo(_,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(dn(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(wo(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,o){var i,r=this.padding_;if(r&&t){var s=this.getViewportSizeMinusPadding_(-n),a=wo(t,o,[s[0]/2+r[3],s[1]/2+r[0]],e,n);i=[t[0]-a[0],t[1]-a[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=pn(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&dn(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=dn(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(dn(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,0,i,n),s=this.constraints_.center(this.targetCenter_,r,i,n,this.calculateCenterShift(this.targetCenter_,r,o,i));this.get(wn.ROTATION)!==o&&this.set(wn.ROTATION,o),this.get(wn.RESOLUTION)!==r&&(this.set(wn.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),s&&this.get(wn.CENTER)&&Cn(this.get(wn.CENTER),s)||this.set(wn.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var o=void 0!==t?t:200,i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,r,s));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var u=n||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&Cn(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:o,easing:An,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var o=n&&dn(n,this.getProjection());this.endInteractionInternal(t,e,o)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,o)},e}(k);function yo(t,e){setTimeout((function(){t(e)}),0)}function mo(t){return!(t.sourceCenter&&t.targetCenter&&!Cn(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function wo(t,e,n,o,i){var r=Math.cos(-i),s=Math.sin(-i),a=t[0]*r-t[1]*s,l=t[1]*r+t[0]*s;return[(a+=(e[0]/2-n[0])*o)*r-(l+=(n[1]-e[1]/2)*o)*(s=-s),l*r+a*s]}const Co=_o;function xo(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+e+","+n+","+o+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}(t)}(n):"null")}var Eo=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var o=xo(t,e,n);return o in this.cache_?this.cache_[o]:null},t.prototype.set=function(t,e,n,o){var i=xo(t,e,n);this.cache_[i]=o,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),bo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),To=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return bo(e,t),e.prototype.dispatchRenderEvent=function(t,e){A()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Lt(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ft(o,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i,r,s,a){var l,u=e.viewState;function c(t,e,n,o){return i.call(r,e,t?n:null,o)}var h=u.projection,p=function(t,e){if(e.canWrapX()){var n=ce(e.getExtent()),o=function(t,e,n){var o=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<o[0]||t[0]>o[2])){var r=n||ce(o);i=Math.floor((t[0]-o[0])/r)}return i}(t,e,n);o&&(t[0]-=o*n)}return t}(t.slice(),h),d=[[0,0]];if(h.canWrapX()&&o){var f=ce(h.getExtent());d.push([-f,0],[f,0])}for(var g=e.layerStatesArray,v=g.length,_=[],y=[],m=0;m<d.length;m++)for(var w=v-1;w>=0;--w){var C=g[w],x=C.layer;if(x.hasRenderer()&&ft(C,u)&&s.call(a,x)){var E=x.getRenderer(),b=x.getSource();if(E&&b){var T=b.getWrapX()?p:t,P=c.bind(null,C.managed);y[0]=T[0]+d[m][0],y[1]=T[1]+d[m][1],l=E.forEachFeatureAtCoordinate(y,e,n,P,_)}if(l)return l}}if(0!==_.length){var O=1/_.length;return _.forEach((function(t,e){return t.distanceSq+=e*O})),_.sort((function(t,e){return t.distanceSq-e.distanceSq})),_.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){return A()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,o,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,o,l,this,i,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){A()},e.prototype.scheduleExpireIconCache=function(t){Eo.canExpireCache()&&t.postRenderFunctions.push(Po)},e}(o);function Po(t,e){Eo.expire()}const Oo=To;var Ro=new k;(new v).setSize=function(){console.warn("labelCache is deprecated.")};var So=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Mo=function(t){function e(e){var o=t.call(this,e)||this;o.fontChangeListenerKey_=T(Ro,n,e.redrawText.bind(e)),o.element_=document.createElement("div");var i=o.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",o.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(o.element_,r.firstChild||null),o.children_=[],o.renderedVisible_=!0,o}return So(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var o=new Et(t,void 0,e);n.dispatchEvent(o)}},e.prototype.disposeInternal=function(){O(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(ut,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var o=[],i=null,r=0,s=e.length;r<s;++r){var a=e[r];if(t.layerIndex=r,ft(a,n)&&(a.sourceState==pt||a.sourceState==ht)){var l=a.layer,u=l.render(t,i);u&&(u!==i&&(this.children_.push(u),i=u),"getDeclutter"in l&&o.push(l))}}for(r=o.length-1;r>=0;--r)o[r].renderDeclutter(t);!function(t,e){for(var n=t.childNodes,o=0;;++o){var i=n[o],r=e[o];if(!i&&!r)break;i!==r&&(i?r?t.insertBefore(r,i):(t.removeChild(i),--o):t.appendChild(r))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){for(var r=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],u=l.layer;if(u.hasRenderer()&&ft(l,r)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=o(u,c);if(h)return h}}}},e}(Oo),Ao="add",Io="remove";var jo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lo="length",Fo=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.element=n,i.index=o,i}return jo(e,t),e}(e);const ko=function(t){function e(e,n){var o=t.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=e||[],o.unique_)for(var r=0,s=o.array_.length;r<s;++r)o.assertUnique_(o.array_[r],r);return o.updateLength_(),o}return jo(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Lo)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Fo(Ao,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Fo(Io,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Fo(Io,o,t)),this.dispatchEvent(new Fo(Ao,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Lo,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===t&&n!==e)throw new B(58)},e}(k);var Do=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zo=function(t){function e(e,n){var o=t.call(this,e)||this;return o.layer=n,o}return Do(e,t),e}(e),No="layers";const Go=function(t){function e(e){var n=this,o=e||{},i=h({},o);delete i.layers;var r=o.layers;return(n=t.call(this,i)||this).on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(No,n.handleLayersChanged_),r?Array.isArray(r)?r=new ko(r.slice(),{unique:!0}):W("function"==typeof r.getArray,43):r=new ko(void 0,{unique:!0}),n.setLayers(r),n}return Do(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(O),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(T(t,Ao,this.handleLayersAdd_,this),T(t,Io,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(O);p(this.listenerKeys_);for(var n=t.getArray(),o=0,i=n.length;o<i;o++){var r=n[o];this.registerLayerListeners_(r),this.dispatchEvent(new zo("addlayer",r))}this.changed()},e.prototype.registerLayerListeners_=function(t){var o=[T(t,n,this.handleLayerChange_,this),T(t,_,this.handleLayerChange_,this)];t instanceof e&&o.push(T(t,"addlayer",this.handleLayerGroupAdd_,this),T(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[j(t)]=o},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new zo("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new zo("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new zo("addlayer",e)),this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=j(e);this.listenerKeys_[n].forEach(O),delete this.listenerKeys_[n],this.dispatchEvent(new zo("removelayer",e)),this.changed()},e.prototype.getLayers=function(){return this.get(No)},e.prototype.setLayers=function(t){var e=this.getLayers();if(e)for(var n=e.getArray(),o=0,i=n.length;o<i;++o)this.dispatchEvent(new zo("removelayer",n[o]));this.set(No,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var o=this.getLayerState(),i=o.zIndex;t||void 0!==o.zIndex||(i=0);for(var r=n,s=e.length;r<s;r++){var a=e[r];a.opacity*=o.opacity,a.visible=a.visible&&o.visible,a.maxResolution=Math.min(a.maxResolution,o.maxResolution),a.minResolution=Math.max(a.minResolution,o.minResolution),a.minZoom=Math.max(a.minZoom,o.minZoom),a.maxZoom=Math.min(a.maxZoom,o.maxZoom),void 0!==o.extent&&(void 0!==a.extent?a.extent=ae(a.extent,o.extent):a.extent=o.extent),void 0===a.zIndex&&(a.zIndex=i)}return e},e.prototype.getSourceState=function(){return pt},e}(lt);var Ko=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Zo=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==o?o:null,i}return Ko(e,t),e}(e);var Vo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Uo=function(t){function e(e,n,o,i,r){var s=t.call(this,e,n,r)||this;return s.originalEvent=o,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s}return Vo(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Zo),Xo={SINGLECLICK:"singleclick",CLICK:w,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ho="pointermove",Bo="pointerdown";var Wo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Yo=function(t){function e(e,n){var o=t.call(this,e)||this;o.map_=e,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=void 0===n?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=0,o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=T(i,Bo,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=T(i,Ho,o.relayEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(E,o.boundHandleTouchMove_,!!It&&{passive:!1}),o}return Wo(e,t),e.prototype.emulateClick_=function(t){var e=new Uo(Xo.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Uo(Xo.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Uo(Xo.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Xo.POINTERUP||e.type==Xo.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Xo.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Uo(Xo.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(O),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new Uo(Xo.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var o=t[n];this.down_[n]="function"==typeof o?c:o}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(T(i,Xo.POINTERMOVE,this.handlePointerMove_,this),T(i,Xo.POINTERUP,this.handlePointerUp_,this),T(this.element_,Xo.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(T(this.element_.getRootNode(),Xo.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Uo(Xo.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Uo(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(O(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(E,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(O(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(O),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(v),qo="postrender",Qo="layergroup",$o="size",Jo="target",ti="view";var ei=1/0;const ni=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,p(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},t.prototype.enqueue=function(t){W(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=ei&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,o=e.length,i=e[t],r=n[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<o&&n[l]<n[a]?l:a;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=r,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,o=this.priorities_,i=n[e],r=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>r))break;n[e]=n[s],o[e]=o[s],e=s}n[e]=i,o[e]=r},t.prototype.reprioritize=function(){var t,e,n,o=this.priorityFunction_,i=this.elements_,r=this.priorities_,s=0,a=i.length;for(e=0;e<a;++e)(n=o(t=i[e]))==ei?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=n,i[s++]=t);i.length=s,r.length=s,this.heapify_()},t}();var oi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ii=function(t){function e(e,n){var o=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return oi(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(_,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(_,this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,o,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),0!==n.getState()||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())},e}(ni);function ri(t){return t[0]>0&&t[1]>0}function si(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var ai=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function li(t){t instanceof gt?t.setMapInternal(null):t instanceof Go&&t.getLayers().forEach(li)}function ui(t,e){if(t instanceof gt)t.setMapInternal(e);else if(t instanceof Go)for(var n=t.getLayers().getArray(),o=0,i=n.length;o<i;++o)ui(n[o],e)}const ci=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,o,i,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Go({layers:t.layers});return r.layergroup=s,r.target=t.target,r.view=t.view instanceof Co?t.view:new Co,void 0!==t.controls&&(Array.isArray(t.controls)?n=new ko(t.controls.slice()):(W("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new ko(t.interactions.slice()):(W("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new ko(t.overlays.slice()):(W("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new ko,{controls:n,interactions:o,keyboardEventTarget:e,overlays:i,values:r}}(e);n.renderComplete_,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:St,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=o.controls||new ko,n.interactions=o.interactions||new ko,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new ii(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Qo,n.handleLayerGroupChanged_),n.addChangeListener(ti,n.handleViewChanged_),n.addChangeListener($o,n.handleSizeChanged_),n.addChangeListener(Jo,n.handleTargetChanged_),n.setProperties(o.values);var i=n;return!e.view||e.view instanceof Co||e.view.then((function(t){i.setView(new Co(t))})),n.controls.addEventListener(Ao,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(Io,function(t){t.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Ao,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Io,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Ao,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(Io,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return ai(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.handleLayerAdd_=function(t){ui(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,r=void 0!==n.layerFilter?n.layerFilter:l,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,i,s,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.getAllLayers=function(){var t=[];return function e(n){n.forEach((function(n){n instanceof Go?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var o=n||{},i=void 0!==o.hitTolerance?o.hitTolerance:0,r=o.layerFilter||l;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,i=void 0!==e.hitTolerance?e.hitTolerance:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,r,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Jo)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return pn(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?jt(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Qo)},e.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof ko)e.setLayers(t);else{var n=e.getLayers();n.clear(),n.extend(t)}},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=dn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?jt(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get($o)},e.prototype.getView=function(){return this.get(ti)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,o){return function(t,e,n,o,i){if(!t||!(n in t.wantedTiles))return ei;if(!t.wantedTiles[n][e.getKey()])return ei;var r=t.viewState.center,s=o[0]-r[0],a=o[1]-r[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}(this.frameState_,t,e,n,o)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,o=new Uo(n,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===Bo||n===b||n===C){var o=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():o,r=e.target;if(this.overlayContainerStopEvent_.contains(r)||!(i===o?o.documentElement:i).contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),a=s.length-1;a>=0;a--){var l=s[a];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,o=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var r=Date.now()-t.time>8;n=r?0:8,o=r?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}t&&this.hasListener(ct)&&!t.animate&&this.renderComplete_&&this.renderer_.dispatchRenderEvent(ct,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)O(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(m,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(b,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ge(this.viewport_)}var n=this.getTargetElement();if(n){for(var o in n.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Yo(this,this.moveTolerance_),Xo)this.mapBrowserEventHandler_.addEventListener(Xo[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(m,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(b,this.boundHandleBrowserEvent_,!!It&&{passive:!1});var i=this.getOwnerDocument().defaultView,r=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[T(r,C,this.handleBrowserEvent,this),T(r,x,this.handleBrowserEvent,this),T(i,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(O(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(O(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=T(t,n,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=T(t,_,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(O),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new zo("addlayer",t)),this.layerGroupPropertyListenerKeys_=[T(t,n,this.render,this),T(t,_,this.render,this),T(t,"addlayer",this.handleLayerAdd_,this),T(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.handleLayerRemove_=function(t){li(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n,o=this,i=this.getSize(),r=this.getView(),s=this.frameState_,a=null;if(void 0!==i&&ri(i)&&r&&r.isDef()){var l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=r.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:re(u.center,u.resolution,u.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{},mapId:j(this),renderTargets:{}},u.nextCenter&&u.nextResolution){var c=isNaN(u.nextRotation)?u.rotation:u.nextRotation;a.nextExtent=re(u.nextCenter,u.nextResolution,c,i)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!pe(this.previousExtent_)&&!Yt(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Zo("movestart",this,s)),this.previousExtent_=Wt(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!Yt(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Zo("moveend",this,a)),e=a.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice())),this.dispatchEvent(new Zo(qo,this,a)),this.renderComplete_=!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoading(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){o.postRenderTimeoutHandle_=void 0,o.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new zo("removelayer",e)),this.set(Qo,t)},e.prototype.setSize=function(t){this.set($o,t)},e.prototype.setTarget=function(t){this.set(Jo,t)},e.prototype.setView=function(t){if(!t||t instanceof Co)this.set(ti,t);else{this.set(ti,new Co);var e=this;t.then((function(t){e.setView(new Co(t))}))}},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),o=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(o)||isNaN(i)||!ri(e=[o,i])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(k);var hi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const pi=function(t){function e(e){var n=t.call(this)||this,o=e.element;return!o||e.target||o.style.pointerEvents||(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return hi(e,t),e.prototype.disposeInternal=function(){ge(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&ge(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)O(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==c&&this.listenerKeys.push(T(t,qo,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(k);var di=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const fi=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===o.collapsed||o.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==o.collapsible,n.collapsible_=void 0===o.collapsible||o.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==o.className?o.className:"ol-attribution",r=void 0!==o.tipLabel?o.tipLabel:"Attributions",s=void 0!==o.expandClassName?o.expandClassName:i+"-expand",a=void 0!==o.collapseLabel?o.collapseLabel:"",l=void 0!==o.collapseClassName?o.collapseClassName:i+"-collpase";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a,n.collapseLabel_.className=l):n.collapseLabel_=a;var u=void 0!==o.label?o.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=s):n.label_=u;var c=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=r,n.toggleButton_.appendChild(c),n.toggleButton_.addEventListener(w,n.handleClick_.bind(n),!1);var h=i+" ol-unselectable "+Te+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),p=n.element;return p.className=h,p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return di(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],o=!0,i=t.layerStatesArray,r=0,s=i.length;r<s;++r){var a=i[r];if(ft(a,t.viewState)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(o=o&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!a(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var o=0,i=e.length;o<i;++o){var r=document.createElement("li");r.innerHTML=e[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?fe(this.collapseLabel_,this.label_):fe(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(pi);var gi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vi=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=void 0!==o.className?o.className:"ol-rotate",r=void 0!==o.label?o.label:"",s=void 0!==o.compassClassName?o.compassClassName:"ol-compass";n.label_=null,"string"==typeof r?(n.label_=document.createElement("span"),n.label_.className=s,n.label_.textContent=r):(n.label_=r,n.label_.classList.add(s));var a=o.tipLabel?o.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(n.label_),l.addEventListener(w,n.handleClick_.bind(n),!1);var u=i+" ol-unselectable "+Te,c=n.element;return c.className=u,c.appendChild(l),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=void 0!==o.duration?o.duration:250,n.autoHide_=void 0===o.autoHide||o.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(be),n}return gi(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:An}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var o="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(be);i||0!==n?i&&0!==n&&this.element.classList.remove(be):this.element.classList.add(be)}this.label_.style.transform=o}this.rotation_=n}},e}(pi);const _i=vi;var yi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mi=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),target:o.target})||this;var i=void 0!==o.className?o.className:"ol-zoom",r=void 0!==o.delta?o.delta:1,s=void 0!==o.zoomInClassName?o.zoomInClassName:i+"-in",a=void 0!==o.zoomOutClassName?o.zoomOutClassName:i+"-out",l=void 0!==o.zoomInLabel?o.zoomInLabel:"+",u=void 0!==o.zoomOutLabel?o.zoomOutLabel:"",c=void 0!==o.zoomInTipLabel?o.zoomInTipLabel:"Zoom in",h=void 0!==o.zoomOutTipLabel?o.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(w,n.handleClick_.bind(n,r),!1);var d=document.createElement("button");d.className=a,d.setAttribute("type","button"),d.title=h,d.appendChild("string"==typeof u?document.createTextNode(u):u),d.addEventListener(w,n.handleClick_.bind(n,-r),!1);var f=i+" ol-unselectable "+Te,g=n.element;return g.className=f,g.appendChild(p),g.appendChild(d),n.duration_=void 0!==o.duration?o.duration:250,n}return yi(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var o=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:o,duration:this.duration_,easing:An})):e.setZoom(o)}}},e}(pi),wi="active";var Ci=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function xi(t,e,n,o){var i=t.getZoom();if(void 0!==i){var r=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==o?o:250,easing:An})}}const Ei=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return Ci(e,t),e.prototype.getActive=function(){return this.get(wi)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(wi,t)},e.prototype.setMap=function(t){this.map_=t},e}(k);var bi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ti=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:250,n}return bi(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Xo.DBLCLICK){var n=t.originalEvent,o=t.map,i=t.coordinate,r=n.shiftKey?-this.delta_:this.delta_;xi(o.getView(),r,i,this.duration_),n.preventDefault(),e=!0}return!e},e}(Ei);var Pi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Oi(t){for(var e=t.length,n=0,o=0,i=0;i<e;i++)n+=t[i].clientX,o+=t[i].clientY;return[n/e,o/e]}const Ri=function(t){function e(e){var n=this,o=e||{};return n=t.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return Pi(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Xo.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Xo.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Xo.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==Xo.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Xo.POINTERDOWN||e===Xo.POINTERDRAG||e===Xo.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==Xo.POINTERUP?delete this.trackedPointers_[n]:(t.type==Xo.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=f(this.trackedPointers_)}},e}(Ei);function Si(t){var e=arguments;return function(t){for(var n=!0,o=0,i=e.length;o<i&&(n=n&&e[o](t));++o);return n}}var Mi=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ai=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){var e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},Ii=l,ji=function(t){var e=t.originalEvent;return 0==e.button&&!(Ot&&Rt&&e.ctrlKey)},Li=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Fi=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ki=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Di=function(t){var e=t.originalEvent;return W(void 0!==e,56),"mouse"==e.pointerType},zi=function(t){var e=t.originalEvent;return W(void 0!==e,56),e.isPrimary&&0===e.button},Ni=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Gi=function(t){function e(e){var n=t.call(this,{stopDown:u})||this,o=e||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:Si(Li,zi);return n.condition_=o.onFocusOnly?Si(Ai,i):i,n.noKinetic_=!1,n}return Ni(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,o=this.targetPointers,i=Oi(o);if(o.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();e=r,n=s.getResolution(),e[0]*=n,e[1]*=n,xn(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=o.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-o*Math.cos(i),s[1]-o*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:An})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Ri);var Ki=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zi=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,{stopDown:u})||this).condition_=o.condition?o.condition:Mi,n.lastAngle_=void 0,n.duration_=void 0!==o.duration?o.duration:250,n}return Ki(e,t),e.prototype.handleDragEvent=function(t){if(Di(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Rn){var o=e.getSize(),i=t.pixel,r=Math.atan2(o[1]/2-i[1],i[0]-o[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!Di(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!Di(t)||!ji(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(Ri);const Vi=Zi;var Ui=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xi=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Ui(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+n,o.top=Math.min(t[1],e[1])+n,o.width=Math.abs(e[0]-t[0])+n,o.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new fo([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(o);const Hi=Xi;var Bi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wi=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return Bi(e,t),e}(e);const Yi=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.box_=new Hi(o.className||"ol-dragbox"),n.minArea_=void 0!==o.minArea?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:ji,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return Bi(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var o=n[0]-e[0],i=n[1]-e[1];return o*o+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Wi("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Wi(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Wi("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(Ri);var qi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Qi=function(t){function e(e){var n=this,o=e||{},i=o.condition?o.condition:Fi;return(n=t.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this).duration_=void 0!==o.duration?o.duration:200,n.out_=void 0!==o.out&&o.out,n}return qi(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var o=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(o),r=e.getResolution()/i;(n=n.clone()).scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:An})},e}(Yi);var $i=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ji=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.defaultCondition_=function(t){return Li(t)&&ki(t)},n.condition_=void 0!==o.condition?o.condition:n.defaultCondition_,n.duration_=void 0!==o.duration?o.duration:100,n.pixelDelta_=void 0!==o.pixelDelta?o.pixelDelta:128,n}return $i(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C){var n=t.originalEvent,o=n.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,s=0,a=0;40==o?a=-r:37==o?s=-r:39==o?s=r:a=r;var l=[s,a];xn(l,i.getRotation()),function(t,e,n){var o=t.getCenterInternal();if(o){var i=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:jn,center:t.getConstrainedCenter(i)})}}(i,l,this.duration_),n.preventDefault(),e=!0}}return!e},e}(Ei);var tr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const er=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.condition_=o.condition?o.condition:ki,n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:100,n}return tr(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C||t.type==x){var n=t.originalEvent,o=n.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=t.map,r=o=="+".charCodeAt(0)?this.delta_:-this.delta_;xi(i.getView(),r,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(Ei),nr=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;var i=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,i),this.initialVelocity_=Math.sqrt(i*i+r*r)/o,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var or=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ir="trackpad";const rr=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,o)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,n.duration_=void 0!==o.duration?o.duration:250,n.timeout_=void 0!==o.timeout?o.timeout:80,n.useAnchor_=void 0===o.useAnchor||o.useAnchor,n.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var i=o.condition?o.condition:Ii;return n.condition_=o.onFocusOnly?Si(Ai,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return or(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==b)return!0;var e,n=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==b&&(e=o.deltaY,Pt&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=St),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?ir:"wheel");var r=n.getView();if(this.mode_===ir&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Y(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),xi(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Ei);var sr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ar=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return sr(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],o=this.targetPointers[1],i=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=i-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=i;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==Rn){var l=s.getViewport().getBoundingClientRect(),u=Oi(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ri);var lr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ur=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==o.duration?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return lr(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],o=this.targetPointers[1],i=n.clientX-o.clientX,r=n.clientY-o.clientY,s=Math.sqrt(i*i+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var u=a.getViewport().getBoundingClientRect(),c=Oi(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),a.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ri);var cr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hr=function(t){function e(e){return(e=h({},e)).controls||(e.controls=function(t){var e={},n=new ko;return(void 0===e.zoom||e.zoom)&&n.push(new mi(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new _i(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new fi(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},n=new ko,o=new nr(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Vi),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Ti({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Gi({onFocusOnly:e.onFocusOnly,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new ar),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new ur({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Ji),n.push(new er({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new rr({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Qi({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return cr(e,t),e.prototype.createRenderer=function(){return new Mo(this)},e}(ci);const pr=hr;class dr extends pi{constructor(t,e){const n=e||{};if(!n.element){const t=document.createElement("div");t.className="bgis-composite",n.element=t}let o;o=t instanceof pi?[t]:t,o.forEach((t=>{t.setTarget(n.element)})),super(n),this.childControls=o}setMap(t){super.setMap(t),t&&this.childControls.forEach((e=>{e.setMap(t)}))}getChildControls(){return this.childControls}}class fr extends dr{constructor(t){const e=t.element?t.element:document.createElement("div");e.classList.add(t.styleClass),t.element=e,super(t.childControls,t),this.styleClass=t.styleClass}getStyleClass(){return this.styleClass}}const gr=t=>Array.isArray(t)?t:[t];class vr extends dr{constructor(t,e){t.tooltipAsTextElement=!!t.tooltipAsTextElement&&t.tooltipAsTextElement,t.unicode=t.unicode||null,t.iconClassName=t.iconClassName||null,null===t.unicode&&null===t.iconClassName&&(t.unicode=59651),t.tooltip=t.tooltip||"";const n=t.element?t.element:document.createElement("div");n.className=t.containerClassName?t.containerClassName:"ol-control bgis-control",n.title=t.tooltip;const o=document.createElement("button");if(o.className="bgis-icon-button",null!==t.unicode?o.textContent=String.fromCodePoint(t.unicode):null!==t.iconClassName&&o.appendChild(vr.getIconElementForIconClassName(t.iconClassName)),o.title=t.tooltip,t.tooltip.length>0&&o.setAttribute("aria-label",t.tooltip),n.append(o),t.tooltipAsTextElement){const e=document.createElement("div");e.className="bgis-control-button-text-container";const o=document.createElement("span");o.textContent=t.tooltip,o.className="bgis-control-button-text",e.appendChild(o),n.appendChild(e)}super(e||[],Object.assign(Object.assign({},t),{element:n})),this.unicode=t.unicode,this.iconClassName=t.iconClassName,this.button=o,this.element.addEventListener("click",(()=>this.dispatchEvent("click")),!1),t.preventDefault||this.on("click",this.handleEvent)}handleEvent(t){return!0}getButton(){return this.button}setButtonUnicode(t){this.getButton().innerHTML="",this.getButton().textContent=String.fromCodePoint(t)}setButtonIconClassName(t){this.getButton().textContent="",this.getButton().innerHTML="",this.getButton().appendChild(vr.getIconElementForIconClassName(t))}static getIconElementForIconClassName(t){const e=document.createElement("i");return e.className="bgis-icon "+t,e}}class _r extends e{constructor(t,e){super(t),this.isToggled=e}}class yr extends vr{constructor(t){super(t||{},t.containerToToggle),this._isToggled=!1,this.containerToToggle=t.containerToToggle,this.unicodeToggled=t.unicodeToggled||null,this.iconClassNameToggled=t.iconClassNameToggled||null,null===this.unicodeToggled&&null===this.iconClassNameToggled&&(this.unicodeToggled=59651)}handleEvent(t){if(t.type===w){this.isToggled=!this.isToggled,this.dispatchEvent(new _r("toggle",this.isToggled));const t=this.getParentElement();t&&this.handleOverlayForElement(t.querySelector(".ol-overlaycontainer-stopevent")),this.handleOverlayOuter(),this.isToggled?null!==this.unicodeToggled?this.setButtonUnicode(this.unicodeToggled):null!==this.iconClassNameToggled&&this.setButtonIconClassName(this.iconClassNameToggled):null!==this.unicode?this.setButtonUnicode(this.unicode):null!==this.iconClassName&&this.setButtonIconClassName(this.iconClassName),((t,e,n=document)=>{gr(t).forEach((t=>{const o=n.querySelector(t);o&&gr(e).forEach((t=>null==o?void 0:o.classList.toggle(t)))}))})("."+this.containerToToggle.getStyleClass(),"show",t||document)}return!0}set isToggled(t){this._isToggled=t}get isToggled(){return this._isToggled}handleOverlayForElement(t,e="bgis-overlay-bg"){null!=this.element&&(this.isToggled?(null==t||t.classList.add("bgis-overlay-toggled-true"),((t,e,n)=>{null!=t?t.querySelector(`.${n}`)||t.appendChild(((t,e)=>{const n=document.createElement(t);return n.className=e,n})("div",n)):console.log("Enclosing element is null")})(t,0,e)):(null==t||t.classList.remove("bgis-overlay-toggled-true"),((t,e)=>{if(null!=t){const n=t.querySelectorAll(`.${e}`);null!=n&&n.length>0&&n.forEach((t=>t.parentElement.removeChild(t)))}})(t,e)))}handleOverlayOuter(){const t=this.getParentElement();if(t){const e=t.querySelectorAll(".bgis-toggled-overlayable");e&&e.length>0&&e.forEach((t=>{this.handleOverlayForElement(t)}))}}getParentElement(){let t=this.element.closest(".bgis");return t||(t=this.element.closest(".bgis-map")),t}}var mr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wr="accuracy",Cr="accuracyGeometry",xr="altitude",Er="altitudeAccuracy",br="heading",Tr="position",Pr="projection",Or="speed",Rr="tracking",Sr="trackingOptions",Mr=function(t){function e(e){var n=t.call(this,y)||this;return n.code=e.code,n.message=e.message,n}return mr(e,t),e}(e);const Ar=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.position_=null,n.transform_=qe,n.watchId_=void 0,n.addChangeListener(Pr,n.handleProjectionChanged_),n.addChangeListener(Rr,n.handleTrackingChanged_),void 0!==o.projection&&n.setProjection(o.projection),void 0!==o.trackingOptions&&n.setTrackingOptions(o.trackingOptions),n.setTracking(void 0!==o.tracking&&o.tracking),n}return mr(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=on($e("EPSG:4326"),t),this.position_&&this.set(Tr,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(wr,e.accuracy),this.set(xr,null===e.altitude?void 0:e.altitude),this.set(Er,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(br,null===e.heading?void 0:et(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var n=this.transform_(this.position_);this.set(Tr,n),this.set(Or,null===e.speed?void 0:e.speed);var o=function(t,e,n,o){for(var i=[],r=0;r<32;++r)s(i,We(t,e,2*Math.PI*r/32,undefined));return i.push(i[0],i[1]),new po(i,Ln,[i.length])}(this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(Cr,o),this.changed()},e.prototype.positionError_=function(t){this.dispatchEvent(new Mr(t))},e.prototype.getAccuracy=function(){return this.get(wr)},e.prototype.getAccuracyGeometry=function(){return this.get(Cr)||null},e.prototype.getAltitude=function(){return this.get(xr)},e.prototype.getAltitudeAccuracy=function(){return this.get(Er)},e.prototype.getHeading=function(){return this.get(br)},e.prototype.getPosition=function(){return this.get(Tr)},e.prototype.getProjection=function(){return this.get(Pr)},e.prototype.getSpeed=function(){return this.get(Or)},e.prototype.getTracking=function(){return this.get(Rr)},e.prototype.getTrackingOptions=function(){return this.get(Sr)},e.prototype.setProjection=function(t){this.set(Pr,$e(t))},e.prototype.setTracking=function(t){this.set(Rr,t)},e.prototype.setTrackingOptions=function(t){this.set(Sr,t)},e}(k);class Ir extends e{constructor(t,e){super(t),this.position=e}}var jr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lr="projection",Fr="coordinateFormat",kr=function(t){function e(e){var n=this,o=e||{},i=document.createElement("div");i.className=void 0!==o.className?o.className:"ol-mouse-position",(n=t.call(this,{element:i,render:o.render,target:o.target})||this).on,n.once,n.un,n.addChangeListener(Lr,n.handleProjectionChanged_),o.coordinateFormat&&n.setCoordinateFormat(o.coordinateFormat),o.projection&&n.setProjection(o.projection);var r=!0,s="&#160;";return"undefinedHTML"in o?(void 0!==o.undefinedHTML&&(s=o.undefinedHTML),r=!!s):"placeholder"in o&&(!1===o.placeholder?r=!1:s=String(o.placeholder)),n.placeholder_=s,n.renderOnMouseOut_=r,n.renderedHTML_=i.innerHTML,n.mapProjection_=null,n.transform_=null,n}return jr(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(Fr)},e.prototype.getProjection=function(){return this.get(Lr)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(T(n,Ho,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(T(n,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(Fr,t)},e.prototype.setProjection=function(t){this.set(Lr,$e(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();this.transform_=n?on(this.mapProjection_,n):qe}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var i=hn();i&&(this.transform_=on(this.mapProjection_,i)),this.transform_(o,o);var r=this.getCoordinateFormat();e=r?r(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(pi);const Dr=kr,zr=25.4/.28,Nr=[1,2,5];class Gr extends e{constructor(t,e){super(t),this.originalEvent=e}}class Kr extends pi{constructor(t){const e=t||{},n=document.createElement("div");n.className="bgis-overview-image";const o=document.createElement("figure");o.innerHTML=Kr.SVG_CODE,n.appendChild(o),e.element=n,super(e),this.preventDefault=e.preventDefault||!1,this.overviewContainerElement=n,this.extent=Zt([[101e4,579e4],[196e4,633e4]]),this.overviewContainerElement.addEventListener("click",(t=>this.dispatchEvent(new Gr("click",t))),!1),this.preventDefault||this.on("click",this.onOverviewImageClick),this.svgElement=o.firstChild,this.backgroundSVGRectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.backgroundSVGRectElement.setAttribute("class","bgis-overviewmap-svg-background"),this.backgroundSVGRectElement.setAttribute("x",String(0)),this.backgroundSVGRectElement.setAttribute("y",String(0)),this.backgroundSVGRectElement.setAttribute("rx",String(8)),this.backgroundSVGRectElement.setAttribute("ry",String(8)),this.backgroundSVGRectElement.setAttribute("width",String(Kr.SVG_WIDTH)),this.backgroundSVGRectElement.setAttribute("height",String(Kr.SVG_HEIGHT)),this.backgroundSVGRectElement.setAttribute("style","stroke-width:0"),this.backgroundSVGRectElement.setAttribute("fill",Kr.BACKGROUND_COLOR),this.svgElement.prepend(this.backgroundSVGRectElement)}setMap(t){super.setMap(t),t&&(this.preventDefault||t.on("moveend",(t=>this.updateCrosshair(t))))}updateCrosshair(t){var e;const n=[Kr.SVG_WIDTH,Kr.SVG_HEIGHT],o=this.getOverviewPxFromLonLat(null===(e=t.map.getView())||void 0===e?void 0:e.getCenter());if(o[0]>n[0]?o[0]=n[0]:o[0]<0&&(o[0]=0),o[1]>n[1]?o[1]=n[1]:o[1]<0&&(o[1]=0),this.svgElement){const t=this.svgElement.getElementsByClassName("bgis-overviewmap-svg-crosshair");if(t)for(const e of Array.from(t))this.svgElement.removeChild(e);this.svgElement.appendChild(Kr.getCrosshair(o[0],0,o[0],Kr.SVG_HEIGHT,"bgis-overviewmap-svg-crosshair-x")),this.svgElement.appendChild(Kr.getCrosshair(0,o[1],Kr.SVG_WIDTH,o[1],"bgis-overviewmap-svg-crosshair-y"))}}static getCrosshair(t,e,n,o,i){const r=document.createElementNS("http://www.w3.org/2000/svg","line");return r.setAttribute("x1",String(t)),r.setAttribute("y1",String(e)),r.setAttribute("x2",String(n)),r.setAttribute("y2",String(o)),r.setAttribute("style","fill: none; stroke: black; stroke-width: 1px;"),r.setAttribute("class","bgis-overviewmap-svg-crosshair "+i),r}static calculateResolutionFromWidth(t,e,n){return Math.abs(t-e)/n}getOverviewPxFromLonLat(t){if(t){const e=[Kr.SVG_WIDTH,Kr.SVG_HEIGHT],n=[Kr.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),Kr.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[Math.round(1/n[0]*(t[0]-this.extent[0])),Math.round(1/n[1]*(this.extent[3]-t[1]))]}return[0,0]}onOverviewImageClick(t){var e,n;const o=this.overviewContainerElement.getBoundingClientRect(),i=t.originalEvent.clientX-o.left,r=t.originalEvent.clientY-o.top,s=this.getLonLatFromOverviewPx([i,r]);null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n||n.animate({center:s,duration:300})}getLonLatFromOverviewPx(t){const e=[this.overviewContainerElement.clientWidth,this.overviewContainerElement.clientHeight],n=[Kr.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),Kr.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[t[0]*n[0]+this.extent[0],this.extent[3]-t[1]*n[1]]}getOverviewContainerElement(){return this.overviewContainerElement}getSVGElement(){return this.svgElement}getBackgroundRectElement(){return this.backgroundSVGRectElement}}Kr.BACKGROUND_COLOR="#e5ecf0",Kr.SVG_HEIGHT=216,Kr.SVG_WIDTH=380,Kr.SVG_CODE="<svg xmlns='http://www.w3.org/2000/svg' class='bgis-overviewmap-svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 "+Kr.SVG_WIDTH+" "+Kr.SVG_HEIGHT+"' preserveAspectRatio='xMidYMid meet' height='100%' width='100%' color-interpolation='auto' fill='black' fill-opacity='1'  stroke='black' stroke-dasharray='none' stroke-dashoffset='0' stroke-linecap='square' stroke-linejoin='miter' stroke-miterlimit='10' stroke-opacity='1' stroke-width='1' xmlns:v='https://vecta.io/nano'><style><![CDATA[.B{clip-path:url(#A)}.C{fill-rule:evenodd}.D{stroke:none}.E{fill:#999}.F{fill:none}.G{stroke-miterlimit:1}.H{stroke-width:2.5}]]></style><defs><clipPath id='A'><path d='M0 0h380v216H0V0z'/></clipPath><path id='B' d='M356 82l-.4 5.2 4.4 1.6-3.2 2.4v6.4l-3.6.8 2.8 3.6.8 6.8-9.6 1.2-.4-2-1.6 2.4h-3.6l-1.6-3.6-4.8-1.6-8 6.4 6.4 3.2 3.2-.8 1.2 4.8 2 .8-2.8 2.8.4 3.2-3.6 3.2-2.8-.4-.8 1.6-2.4-1.6-.4 4 2.4 4.8-2.4 1.6-.8 4 2 .8-.4 2.4 2.8-.4.8 1.6-3.2 1.6 2.8 2.8-4 2 3.6 1.6-10-.8-.4 3.2-4 1.6-2.4 4.4-6.4 2.8.8-3.6 6.4-6.8-3.2-5.2 1.6-4.8-4.8-14.8 13.2-6.8v-6l2.8-4-.8-3.6-2.4-1.2-1.2-7.6 3.2.8 2-2.8-2-1.6 2.8-.8 2-4 3.2-.4 2.4 4 5.6-5.6v-2.8l5.6-1.2 2.4-3.2L352 88l1.6-3.6-2-2 2.8 1.6 1.6-2z'/><path id='C' d='M162.4 146.8l.4 2 8.4 1.2 1.6 2.8 4.4 1.6 8-2 .4-2.8 4.8-.8 2 2 10.8.8 8.4 9.6 5.6-2 2.4-4 8.4-4.8 1.6 3.2h6l.8 3.2 4.8-3.2 5.6 2 10-3.6 8 8.8-2 8.8 2.4.8-.4 6.4 2 1.2-3.6 3.2-1.2-2-1.6 2-2.4-.4-2.4 6.4-4.8.8-.4 2.4-4.8 1.6-.8 4-2.4-3.6-2 1.2-2-2.4-12.4.8-1.2-2.8h-5.2l-4-2.8-5.6 1.2-18-4.8-6.8 1.6-6.4-3.2H168l-2.4-2.8-4.8-.4v-3.2h1.6V172l9.2-1.2 1.6-2.4-5.6-4v-3.2l-4.4-3.2-.8-2.4 2-3.2h-2.8l-2.4-3.6 3.2-2z'/><path id='D' d='M264.8 20.8l5.6 1.6.4 4 4.4-.8 1.6-2.8 8.8 3.2.8 2 8 4 6.8-1.6V32l5.2 2 .4 2.4 5.6 3.2 12.8 1.2 3.6-5.6 3.6-.4 2.4 2.4 2.8-.4 1.2 4 10.4 1.6 1.6 10.8-4.8 6-.8 4.8 5.6 7.6.8 6.4 4.4 3.2-1.6 2.8-2.8-1.6 2 2L352 88l-4.4-3.6-2.4 3.2-5.6 1.2v2.8l-5.6 5.6-2.4-4-3.2.4-1.6 3.6-3.2 1.2 2 1.2-2 3.2-3.2-.8 1.2 7.6 2.4 1.2.8 3.6-2.8 4 1.2 4-5.2 5.2h-2.8l-2-6.8-2.4 2.8-1.2-2-4.8-.8-1.2-2.8-2 .4.4-4-5.2-.4-1.2-5.6-1.6 1.2-3.2-3.6-4.4.4v-1.6H284l-4.4-4-2.4.4-.4 2-3.2-.4-.8 3.2-10.4.4-2 2.4-4-2.4-3.2 1.2-2.4-4v-4.4l2.8-1.6-.4-1.6-1.6-2.4-1.6.8-8.4-4.4-2-3.2v-3.6l1.6-.8-.8-6.4 2-2.4 6.8 5.2 7.2-2L258 74h3.2l1.2 2.4.8-8.4h-2l.8-4.8-2 .4 1.6-1.6-4-4.8 2.8-1.6-10.4-5.2 1.6-7.2 3.6-2.8.4-3.6 7.2 1.2V23.2l2-2.4zm62 47.2l-7.2 5.6-2.4-1.6-.8 6 1.6 3.2 9.6.4 2-2.8 4.4 1.6-2-2.4.8-6-2-2-1.6 1.2-2.4-3.2z'/><path id='E' d='M212.4 38l9.6 6.4-2.4 2 2.4 3.2h6l6.4 2.8 2-2.8h2.4L240 46l4 3.2 2.4-2 5.6 5.2 7.2 2 1.2 1.2-2.8 1.6.4 2 3.6 2.8-1.6 1.6 2-.4-.8 4.8h2v4.4l-.8 4-1.2-2.4H258l-1.6 2.8-6 2-6.8-5.2-3.2 2.4.8 6.4-1.6.8v3.6l6.4 6 5.6.8 2 3.2-2.8 2.4 1.6 6.8-2.4-.8-2 2.4-5.2.8-.8 2.4-8.4 4.8-3.2-.4-2-2.8-6.8 2.4v-3.6l-2-2-10.4-1.2-3.6 5.6 2.8 8.4-1.6 3.2h-2.4l-8.4-4 2-6.4-1.6-2 2.8-4.4-5.2-2 1.2-2.8 3.2.8v-1.6l-6.4.4-4.4-2-.4-8.8 3.6 1.2.4-2.8-4-2-6 2.8v-2l-3.2-.4-1.2-2.4h-4.4l-3.2 3.2-5.2-5.2-.4-3.2 12-9.6 14-4 4.8-7.2-.4-8.8 2 .4 1.2-2.4 10 5.2 4.4-7.2.4-5.6-2-.8 2.4-3.6z'/><path id='F' d='M176.4 86.8l1.6 2.4 3.2.4v2l6-2.8 4 2-.4 2.8-3.6-1.2.4 8.8 11.2 2.4h-3.6l-1.2 3.2 5.2 1.6-2.8 4.4 1.6 2-2 6.4 5.2 3.2-1.6 3.2 1.6 8.8 5.2 2 5.2-2.4.8 4.4 6.8 6.4-5.2 1.2 1.2 2.8-4.4 8-5.2-3.6v-2.4l-10.4-2.8-2.8.8-1.6-2-5.2.8-.4 2.8-7.2 2-5.2-1.6-1.6-2.8-8.4-1.2v-2l-4 2-6-3.6H148l-6.4 5.6-6-1.2-2-12.8 1.6-1.6 6.8.4 1.2-2 8.4.4v-3.6l4.4-.8 2.4-4.8 2.8-.8-3.2-4.8 2-2-4.4-1.6 1.2-4.4h8.4l-1.2 1.6 2.8 2.4-2 2 .8 2 7.6 5.2 3.6-1.2-.4-5.6 2.8-3.6-.8-4-2.4-2h-5.6l4.4-9.2-6.4-8.4 4-3.6h4z'/><path id='G' d='M279.2 101.2l7.2 3.6v1.6l4.4-.4 3.2 3.6 1.6-1.2 1.2 5.6 5.2.4-.8 3.2 2.4.4 1.2 2.8 4.8.8 1.2 2 1.6-2.8 1.2.8-.4 2.8 2.8 3.2-7.2 3.6 4.8 14.8-1.6 4.8 3.2 4.8-7.6 10.8v6l2.4 5.2-6.8-4h-3.6l-9.6 2-2 1.2v2.8l-3.2 1.2-2.8-3.2-14.8.8-2.4-1.6.4-6.4-2.4-.8 2-8.8-8-8.8-10 3.6-5.6-2-4.8 3.2-.8-3.2h-6l-1.6-3.2-8.4 4.8-2.4 4-4.4 2-3.2-1.6 5.6-8.8-1.2-2.8 5.2-1.2-6.8-6.4-.8-4.4-5.2 2.4-4.8-1.6-2-8.4 1.6-4.4 5.6 1.2 1.6-3.2-2.8-8.4 3.6-5.6 10.4 1.2 2 2v3.6l6.8-2.4 2 2.8 3.2.4 16.4-10.4 3.2 2.4 3.2-1.2 4 2.4 2-2.4 10.4-.4.8-3.2 3.2.4.4-2h2z'/><path id='H' d='M151.6 145.2l6.4 2.4 3.6 4.8h2.8l-2 3.2.8 2.4 4.4 3.2v3.2l5.6 4-1.6 2.4-9.2 1.2-1.6 5.6-5.6.4-8-4-1.2-4-3.2-.4-.4-6.8-2.8.8-3.2-2.8 1.2-1.6-2-4.8 3.6-.8 7.2-7.6 5.2-.8z'/><path id='I' d='M61.2 118.8l5.6 1.6 2-2.4 6.8 3.6 5.2-1.6 1.2 1.6-2.4 2h3.2l2 6h6l4-2.8 2 .4-.8 2.4 2.4-.4 2-3.2 4 .4-1.6-2.4 2.4-2.8 6 .4 2.4-5.2 9.6.8 6.8-2.8 9.2 1.2-2-6.4 4.4-2.8v4.4l8-1.2 2.8 4.8 3.2-.8v2l4 1.2-1.6 2.4 3.2 4.8-2.8.8-2.4 4.8-4.4.8v3.6l-8.4-.4-1.2 2-6.8-.4-1.6 1.6 2.4 13.6-8 2-9.2 5.2-5.2-3.2-3.6 2-3.2-1.6-2.4 2.8-2.4-1.6-9.2 1.6.4 1.6-3.2 1.6-3.2 10h-7.2l-6-1.6 1.6-2.4-4-3.2L66 166l-4-1.2.8-5.6-2.8-.8-1.6-3.2-3.6 3.2.4 2-3.6-.4v4l-4 1.2-1.6-2.8-.4-2.4 2.8-3.6-2-2.4 1.6-1.2-1.2-2.8 4-4 .4-7.2-2.4-1.2 6.8-2 4.8-5.2 2-3.2-2-4 .8-4.4z'/><path id='J' d='M31.2 116.4l2 .4-.4 2.8h6.8l1.2 4 4.4 1.6.4 2.4-1.6.8 1.6 3.6 6-2-.8 5.2-2 1.2 2.4 2.4-.4 7.2-4 4 1.2 2.8-1.6 1.2 2 2.4-2.8 3.6 2 3.6-1.2 2-3.2-1.2-1.2-2.8-6.4-2V154l-12-2.4 1.2-4.8-3.2-2.4.4-4.8-2-2 6.4-8-.4-4-2.8-.4-1.6-2.8 7.6-2 2-4z'/><path id='K' d='M327.6 68.4l.4 2 2.8-.4 2 2-.8 6 2 2.4-4.4-1.6-2 2.8-9.6-.4-1.6-3.2.8-6 2.4 1.6 1.6-2.4 3.6-.4.4-2.8 2.4.4z'/></defs><g text-rendering='optimizeLegibility'><use xlink:href='#B' class='B C D E'/><g stroke='silver'><use xlink:href='#B' class='B F G H'/><use xlink:href='#C' class='B C D E'/><use xlink:href='#C' class='B F G H'/><use xlink:href='#D' class='B C D E'/><use xlink:href='#D' class='B F G H'/><use xlink:href='#E' class='B C D E'/><use xlink:href='#E' class='B F G H'/><use xlink:href='#F' class='B C D E'/><use xlink:href='#F' class='B F G H'/><use xlink:href='#G' class='B C D E'/><use xlink:href='#G' class='B F G H'/><use xlink:href='#H' class='B C D E'/><use xlink:href='#H' class='B F G H'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B C D E'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B F G H'/><use xlink:href='#I' class='B C D E'/><use xlink:href='#I' class='B F G H'/><use xlink:href='#J' class='B C D E'/><use xlink:href='#J' class='B F G H'/><use xlink:href='#K' class='B C D E'/><use xlink:href='#K' class='B F G H'/></g></g></svg>";class Zr extends vr{constructor(t){const e=t||{};super(Object.assign({unicode:Zr.DEFAULT_UNICODE,tooltip:Zr.DEFAULT_TOOLTIP_TEXT,tooltipAsTextElement:!0},e))}}Zr.DEFAULT_TOOLTIP_TEXT="Ansicht teilen",Zr.DEFAULT_UNICODE=59692;var Vr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ur=function(t){function e(e,n,o){var i=t.call(this)||this,r=o||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.transition_=void 0===r.transition?250:r.transition,i.transitionStarts_={},i.interpolate=!!r.interpolate,i}return Vr(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){A()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var o=e-n+1e3/60;return o>=this.transition_?1:Mn(o/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(v);const Xr=Ur;var Hr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Br=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=o,r.resolution=n,r.state=i,r}return Hr(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return A()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){A()},e}(v);var Wr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Yr(t,e,n){var o=t,i=!0,r=!1,s=!1,a=[P(o,"load",(function(){s=!0,r||e()}))];return o.src&&At?(r=!0,o.decode().then((function(){i&&e()})).catch((function(t){i&&(s?e():n())}))):a.push(P(o,y,n)),function(){i=!1,a.forEach(O)}}!function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,o,0)||this;return a.src_=i,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}Wr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=se(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Yr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=se(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(Br);var qr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Qr=function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,s)||this;return a.crossOrigin_=i,a.src_=o,a.key=o,a.image_=new Image,null!==i&&(a.image_.crossOrigin=i),a.unlisten_=null,a.tileLoadFunction_=r,a}return qr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=de(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Yr(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Xr),$r=function(){function t(t,e,n,o,i,r){this.sourceProj_=t,this.targetProj_=e;var s={},a=rn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&ce(o)==ce(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ce(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ce(this.targetProj_.getExtent()):null;var l=le(n),u=ue(n),c=ne(n),h=ee(n),p=this.transformInv_(l),d=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),v=10+(r?Math.max(0,Math.ceil(Q(te(n)/(r*r*256*256)))):0);if(this.addQuad_(l,u,c,h,p,d,f,g,v),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach((function(t,e,n){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,n,o,i,r){this.triangles_.push({source:[o,i,r],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,o,i,r,s,a,l){var u=Zt([i,r,s,a]),c=this.sourceWorldWidth_?ce(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=ce(Zt([t,e,n,o]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)),!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||he(u,this.maxSourceExtent_)){var f=0;if(!(d||isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)d=!0;else if(1!=(f=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!d){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(g),_=void 0;_=p?(nt(i[0],h)+nt(s[0],h))/2-nt(v[0],h):(i[0]+s[0])/2-v[0];var y=(i[1]+s[1])/2-v[1];d=_*_+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],w=this.transformInv_(m),C=[(o[0]+t[0])/2,(o[1]+t[1])/2],x=this.transformInv_(C);this.addQuad_(t,e,m,C,i,r,w,x,l-1),this.addQuad_(C,m,n,o,x,w,s,a,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(E),T=[(n[0]+o[0])/2,(n[1]+o[1])/2],P=this.transformInv_(T);this.addQuad_(t,E,T,o,i,b,P,a,l-1),this.addQuad_(E,e,n,T,b,r,s,P,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&f)&&this.addTriangle_(t,n,o,i,s,a),0==(14&f)&&this.addTriangle_(t,n,e,i,s,r),f&&(0==(13&f)&&this.addTriangle_(e,o,t,r,a,i),0==(7&f)&&this.addTriangle_(e,o,n,r,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,o){var i=e.source;qt(t,i[0]),qt(t,i[1]),qt(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var Jr;function ts(t,e,n,o,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(o,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,o)+1,Math.max(n,i)),t.restore()}function es(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function ns(t,e,n,o){var i=sn(n,e,t),r=Je(e,o,n),s=e.getMetersPerUnit();void 0!==s&&(r*=s);var a=t.getMetersPerUnit();void 0!==a&&(r/=a);var l=t.getExtent();if(!l||Ut(l,i)){var u=Je(t,r,i)/r;isFinite(u)&&u>0&&(r/=u)}return r}var os=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const is=function(t){function e(e,n,o,i,r,s,a,l,u,c,h,p){var d=t.call(this,r,0,{interpolate:!!p})||this;d.renderEdges_=void 0!==h&&h,d.pixelRatio_=a,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=n,d.targetTileGrid_=i,d.wrappedTileCoord_=s||r,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var f=i.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),v=d.sourceTileGrid_.getExtent(),_=g?ae(f,g):f;if(0===te(_))return d.state=4,d;var y=e.getExtent();y&&(v=v?ae(v,y):y);var m=i.getResolution(d.wrappedTileCoord_[0]),w=function(t,e,n,o){var i=oe(n),r=ns(t,e,i,o);return(!isFinite(r)||r<=0)&&Jt(n,(function(n){return r=ns(t,e,n,o),isFinite(r)&&r>0})),r}(e,o,_,m);if(!isFinite(w)||w<=0)return d.state=4,d;var C=void 0!==c?c:.5;if(d.triangulation_=new $r(e,o,_,v,w*C,m),0===d.triangulation_.getTriangles().length)return d.state=4,d;d.sourceZ_=n.getZForResolution(w);var x=d.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(x[1]=Y(x[1],v[1],v[3]),x[3]=Y(x[3],v[1],v[3])):x=ae(x,v)),te(x)){for(var E=n.getTileRangeForExtentAndZ(x,d.sourceZ_),b=E.minX;b<=E.maxX;b++)for(var T=E.minY;T<=E.maxY;T++){var P=u(d.sourceZ_,b,T,a);P&&d.sourceTiles_.push(P)}0===d.sourceTiles_.length&&(d.state=4)}else d.state=4;return d}return os(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,o){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),o="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,o,i,r,s,a,l,u,c,p){var d=de(Math.round(n*t),Math.round(n*e));if(p||h(d,xe),0===l.length)return d.canvas;function f(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";var g=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){var o,i;o=g,(i=t.extent)[0]<o[0]&&(o[0]=i[0]),i[2]>o[2]&&(o[2]=i[2]),i[1]<o[1]&&(o[1]=i[1]),i[3]>o[3]&&(o[3]=i[3])}));var v=ce(g),_=se(g),y=de(Math.round(n*v/o),Math.round(n*_/o));p||h(y,xe);var m=n/o;l.forEach((function(t,e,n){var o=t.extent[0]-g[0],i=-(t.extent[3]-g[3]),r=ce(t.extent),s=se(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,o*m,i*m,r*m,s*m)}));var w=le(s);return a.getTriangles().forEach((function(t,e,i){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],c=s[1][0],h=s[1][1],v=s[2][0],_=s[2][1],m=f((a[0][0]-w[0])/r),C=f(-(a[0][1]-w[1])/r),x=f((a[1][0]-w[0])/r),E=f(-(a[1][1]-w[1])/r),b=f((a[2][0]-w[0])/r),T=f(-(a[2][1]-w[1])/r),P=l,O=u;l=0,u=0;var R=function(t){for(var e=t.length,n=0;n<e;n++){for(var o=n,i=Math.abs(t[n][n]),r=n+1;r<e;r++){var s=Math.abs(t[r][n]);s>i&&(i=s,o=r)}if(0===i)return null;var a=t[o];t[o]=t[n],t[n]=a;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*h[p]}return h}([[c-=P,h-=O,0,0,x-m],[v-=P,_-=O,0,0,b-m],[0,0,c,h,E-C],[0,0,v,_,T-C]]);if(R){if(d.save(),d.beginPath(),function(){if(void 0===Jr){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",ts(t,4,5,4,0),ts(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;Jr=es(e,0)||es(e,4)||es(e,8)}return Jr}()||!p){d.moveTo(x,E);for(var S=m-x,M=C-E,A=0;A<4;A++)d.lineTo(x+f((A+1)*S/4),E+f(A*M/3)),3!=A&&d.lineTo(x+f((A+1)*S/4),E+f((A+1)*M/3));d.lineTo(b,T)}else d.moveTo(x,E),d.lineTo(m,C),d.lineTo(b,T);d.clip(),d.transform(R[0],R[2],R[1],R[3],m,C),d.translate(g[0]-P,g[3]-O),d.scale(o/n,-o/n),d.drawImage(y.canvas,0,0),d.restore()}})),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,n){var o=t.target,i=(o[0][0]-w[0])/r,s=-(o[0][1]-w[1])/r,a=(o[1][0]-w[0])/r,l=-(o[1][1]-w[1])/r,u=(o[2][0]-w[0])/r,c=-(o[2][1]-w[1])/r;d.beginPath(),d.moveTo(a,l),d.lineTo(i,s),d.lineTo(u,c),d.closePath(),d.stroke()})),d.restore()),d.canvas}(o,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,o){var i=e.getState();if(0==i||1==i){t++;var r=T(e,_,(function(n){var o=e.getState();2!=o&&3!=o&&4!=o||(O(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(O),this.sourcesListenerKeys_=null},e}(Xr),rs=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return W(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return W(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){W(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function ss(t,e,n,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=n,o):[t,e,n]}function as(t,e,n){return t+"/"+e+"/"+n}function ls(t){return as(t[0],t[1],t[2])}var us=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return us(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey().split("/").map(Number)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(ls(e.tileCoord)),e.release())}.bind(this))}},e}(rs);const hs=cs;var ps=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ds(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const fs=function(t){function e(e){var n=t.call(this)||this;n.projection=$e(e.projection),n.attributions_=ds(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:pt,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n.interpolate_=!!e.interpolate,n.viewResolver=null,n.viewRejector=null;var o=n;return n.viewPromise_=new Promise((function(t,e){o.viewResolver=t,o.viewRejector=e})),n}return ps(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return A()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=ds(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(k);var gs=[0,0,0];const vs=function(){function t(t){var e,n,o;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,W((e=this.resolutions_,!0,n=function(t,e){return e-t}||i,e.every((function(t,o){if(0===o)return!0;var i=n(e[o-1],t);return!(i>0||0===i)}))),17),!t.origins)for(var r=0,s=this.resolutions_.length-1;r<s;++r)if(o){if(this.resolutions_[r]/this.resolutions_[r+1]!==o){o=void 0;break}}else o=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,W(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=le(a)),W(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,W(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,W(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new Ce(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var o=this.getTileRangeForExtentAndZ(a,e);n.minX=Math.max(o.minX,n.minX),n.maxX=Math.min(o.maxX,n.maxX),n.minY=Math.max(o.minY,n.minY),n.maxY=Math.min(o.maxY,n.maxY)}return n}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,n){for(var o=this.getTileRangeForExtentAndZ(t,e),i=o.minX,r=o.maxX;i<=r;++i)for(var s=o.minY,a=o.maxY;s<=a;++s)n([e,i,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,o){var i,r,s=null,a=t[0]-1;for(2===this.zoomFactor_?(i=t[1],r=t[2]):s=this.getTileCoordExtent(t,o);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?we(i=Math.floor(i/2),i,r=Math.floor(r/2),r,n):this.getTileRangeForExtentAndZ(s,a,n)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],i=2*t[2];return we(o,o+1,i,i+1,e)}var r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var o=t[0],i=t[1],r=t[2];if(e===o)return we(i,r,i,r,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-o),a=Math.floor(i*s),l=Math.floor(r*s);return e<o?we(a,a,l,l,n):we(a,Math.floor(s*(i+1))-1,l,Math.floor(s*(r+1))-1,n)}var u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var o=this.getOrigin(t),i=this.getResolution(t),r=si(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*r[0]*i,a=o[0]+(e.maxX+1)*r[0]*i;return Bt(s,o[1]+e.minY*r[1]*i,a,o[1]+(e.maxY+1)*r[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var o=gs;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,o);var i=o[1],r=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,o),we(i,o[1],r,o[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=si(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*n,e[1]-(t[2]+.5)*o[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=si(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*i[0]*o,s=n[1]-(t[2]+1)*i[1]*o;return Bt(r,s,r+i[0]*o,s+i[1]*o,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,o,i){var r=this.getZForResolution(n),s=n/this.getResolution(r),a=this.getOrigin(r),l=si(this.getTileSize(r),this.tmpSize_),u=s*(t-a[0])/n/l[0],c=s*(a[1]-e)/n/l[1];return o?(u=st(u,5)-1,c=st(c,5)-1):(u=rt(u,5),c=rt(c,5)),ss(r,u,c,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,o,i){var r=this.getOrigin(n),s=this.getResolution(n),a=si(this.getTileSize(n),this.tmpSize_),l=(t-r[0])/s/a[0],u=(r[1]-e)/s/a[1];return o?(l=st(l,5)-1,u=st(u,5)-1):(l=rt(l,5),u=rt(u,5)),ss(n,l,u,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return Y(r(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),o=this.minZoom;o<e;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},t}();function _s(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,o){return function(t,e,n,o){var i=ys(t,undefined,n);return new vs({extent:t,origin:ie(t,"top-left"),resolutions:i,tileSize:n})}(ms(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function ys(t,e,n,o){for(var i=void 0!==e?e:42,r=se(t),s=ce(t),a=si(void 0!==n?n:256),l=o>0?o:Math.max(s/a[0],r/a[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function ms(t){var e=(t=$e(t)).getExtent();if(!e){var n=180*Oe[Re.DEGREES]/t.getMetersPerUnit();e=Bt(-n,-n,n,n)}return e}var ws=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cs=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&si(o.getTileSize(o.getMinZoom()),[256,256]),n.tileCache=new hs(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition,interpolate:e.interpolate},n.zDirection=e.zDirection?e.zDirection:0,n}return ws(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,o){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var r,s,a,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)s=as(e,u,c),a=!1,i.containsKey(s)&&(a=2===(r=i.get(s)).getState())&&(a=!1!==o(r)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,o,i){return A()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:_s(t)},e.prototype.getTileCacheForProjection=function(t){return W(nn(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var o,i,r,s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),l=si(s.getTileSize(t),this.tmpSize);return 1==a?l:(o=l,i=a,void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=o[0]*i+.5|0,r[1]=o[1]*i+.5|0,r)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var o=e[0],i=t.getTileCoordCenter(e),r=ms(n);if(Ut(r,i))return e;var s=ce(r),a=Math.ceil((r[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,o)}(o,t,n)),function(t,e){var n=t[0],o=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var r=e.getFullTileRange(n);return!r||r.containsXY(o,i)}(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,o){},e}(fs),xs=function(t){function e(e,n){var o=t.call(this,e)||this;return o.tile=n,o}return ws(e,t),e}(e);const Es=Cs;function bs(t,e){var n=/\{z\}/g,o=/\{x\}/g,i=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(o,s[1].toString()).replace(i,s[2].toString()).replace(r,(function(){var t=s[0],n=e.getFullTileRange(t);return W(n,55),(n.getHeight()-s[2]-1).toString()})):void 0}}var Ts=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ps=function(t){function e(n){var o=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return o.generateTileUrlFunction_=o.tileUrlFunction===e.prototype.tileUrlFunction,o.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(o.tileUrlFunction=n.tileUrlFunction),o.urls=null,n.urls?o.setUrls(n.urls):n.url&&o.setUrl(n.url),o.tileLoadingKeys_={},o}return Ts(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,o=j(n),i=n.getState();1==i?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=3==i?"tileloaderror":2==i?"tileloadend":void 0),null!=e&&this.dispatchEvent(new xs(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var o=n[1].charCodeAt(0),i=n[2].charCodeAt(0),r=void 0;for(r=o;r<=i;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=bs(t[i],e);return function(t){return 1===t.length?t[0]:function(e,n,o){if(e){var i=function(t){return(t[1]<<t[0])+t[2]}(e),r=nt(i,t.length);return t[r](e,n,o)}}}(o)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var o=as(t,e,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(Es);var Os=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rs=function(t){function e(e){var n=this,o=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(o=e.interpolate),(n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ss,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:o,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:Qr,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return Os(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[o];i.expireCache(i==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!nn(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var e=t.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!nn(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!nn(e,t)){var n=j(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=_s(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||nn(e,t))return this.tileCache;var n=j(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new hs(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,o,i,r){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),l=a?this.tileUrlFunction(a,o,i):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(_,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,o,i){var r=this.getProjection();if(r&&i&&!nn(r,i)){var s=this.getTileCacheForProjection(i),a=[t,e,n],l=void 0,u=ls(a);s.containsKey(u)&&(l=s.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(r),p=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(a,i),f=new is(r,h,i,p,a,d,this.getTilePixelRatio(o),this.getGutter(),function(t,e,n,o){return this.getTileInternal(t,e,n,o,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return f.key=c,l?(f.interimTile=l,f.refreshInterimChain(),s.replace(u,f)):s.set(u,f),f}return this.getTileInternal(t,e,n,o,r||i)},e.prototype.getTileInternal=function(t,e,n,o,i){var r=null,s=as(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var l=r;r=this.createTile_(t,e,n,o,i,a),0==l.getState()?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,n,o,i,a),this.tileCache.set(s,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=$e(t);if(n){var o=j(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},e}(Ps);function Ss(t,e){t.getImage().src=e}const Ms=Rs;var As=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Is=function(t){function e(e){var n=e||{},o=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(o=n.interpolate);var i=void 0!==n.projection?n.projection:"EPSG:3857",r=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||$e("EPSG:3857").getExtent(),o={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:ys(n,e.maxZoom,e.tileSize,e.maxResolution)};return new vs(o)}({extent:ms(i),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:o,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return As(e,t),e}(Ms),js={geolandbasemap:"https://maps{1-4}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",bmapgrau:"https://maps{1-4}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png",bmaporthofoto30cm:"https://maps{1-4}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg",bmapgelaende:"https://maps{1-4}.wien.gv.at/basemap/bmapgelaende/grau/google3857/{z}/{y}/{x}.jpeg",bmapoberflaeche:"https://maps{1-4}.wien.gv.at/basemap/bmapoberflaeche/grau/google3857/{z}/{y}/{x}.jpeg",bmapoverlay:"https://maps{1-4}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png"};return new pr({target:"bgis-map",layers:[new mn({source:new class extends Is{constructor(t){const e=(null==t?void 0:t.variant)||"geolandbasemap";super({url:js[e],attributions:'Grundkarte: <a href="https://basemap.at/">basemap.at</a>',crossOrigin:"Anonymous"})}}})],controls:[new class extends fr{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-footer",childControls:t}))}}([new class extends pi{constructor(t){const e=t||{},n=e.className?e.className:"bgis-scaleline";super({element:document.createElement("div"),target:e.target}),this.viewState=null,this._minWidth=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible=!1,this.renderedWidth=void 0,this.renderedSVG=void 0,this.dpi=e.dpi||void 0,this.element.className=n}render(t){const e=t.frameState;this.viewState=e?e.viewState:null,this.updateElement()}updateElement(){const t=this.viewState;if(!t)return void(this.renderedVisible&&(this.element.style.display="none",this.renderedVisible=!1));const e=t.center,n=t.projection,o=Re.METERS;let i=Je(n,t.resolution,e,o);const r=this._minWidth*(this.dpi||zr)/zr,s=r*i;let a="";s<.001?(a="m",i*=1e6):s<1?(a="mm",i*=1e3):s<1e3?a="m":(a="km",i/=1e3);let l,u,c,h=3*Math.floor(Math.log(r*i)/Math.log(10));for(;;){c=Math.floor(h/3);const t=Math.pow(10,c);if(l=Nr[(h%3+3)%3]*t,u=Math.round(l/i),isNaN(u))return this.element.style.display="none",void(this.renderedVisible=!1);if(u>=r)break;++h}let p=null;l&&c>=0&&(p=this.getGeneratedSVG(l.toFixed(c<0?-c:0)+" "+a,u)),p&&this.renderedSVG!=p&&(this.element.innerHTML="",this.element.appendChild(p),this.renderedSVG=p),this.renderedWidth!=u&&(this.element.style.width=u+"px",p&&p.setAttribute("width",String(u)),this.renderedWidth=u),this.renderedVisible||(this.element.style.display="",this.renderedVisible=!0)}getGeneratedSVG(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id","bgis-scaleline-svg"),n.setAttribute("viewBox","0 0 "+e+" 18"),n.setAttribute("width",String(e)),n.setAttribute("height","100%");const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("id","bgis-scaleline-svg-background"),o.setAttribute("x",String(0)),o.setAttribute("y",String(0)),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","#e5ecf0"),o.setAttribute("fill-opacity",".5"),o.setAttribute("stroke","black"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","0 "+e+" "+(e+36)),n.appendChild(o);const i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.textContent=t,i.setAttribute("x",String(e/2)),i.setAttribute("y",String(12)),i.setAttribute("text-anchor","middle"),i.setAttribute("font-size","1em"),i.setAttribute("style",'font-size: 0.75rem; font-family: "Source Sans Pro", sans-serif'),i.setAttribute("font-family",'"Source Sans Pro", sans-serif'),i.setAttribute("fill","black"),n.appendChild(i),n}setMinWidth(t){this._minWidth=t}getMinWidth(){return this._minWidth}},new class extends Dr{constructor(t){const e=t||{};e.projection=e.projection?e.projection:"EPSG:4326",e.coordinateFormat=e.coordinateFormat?e.coordinateFormat:t=>t?function(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}(t,"{x}N/{y}E",4):"",e.undefinedHTML=e.undefinedHTML?e.undefinedHTML:"&nbsp;-&nbsp;N/&nbsp;-&nbsp;E",e.className=e.className?e.className:"ol-control ol-mouse-position bgis-mouseposition",super(e)}},new class extends fi{constructor(t){super(t||{collapsed:!1}),this.element.className+=" bgis-copyright"}}]),new class extends fr{constructor(t){let e=null;if(t.verticalControls&&t.verticalControls.length>0){const n=new fr({styleClass:"bgis-bottom-right-vertical",childControls:t.verticalControls});e=new yr({containerToToggle:n,containerClassName:"ol-control bgis-control bgis-bottom-right-overlay",unicode:59655,unicodeToggled:59684,tooltip:"mehr..."}),t.horizontalControls.push(e)}const n=t||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-bottom-right-horizontal",childControls:t.horizontalControls})),this.toggleButton=e,null!=this.toggleButton&&this.toggleButton.addEventListener("toggle",(t=>(this.dispatchEvent(t),!0)))}getToggleButton(){return this.toggleButton}}({horizontalControls:[new class extends vr{constructor(t){const e=t||{};super(Object.assign({unicode:59704,tooltip:"Begleitkarten verwalten"},e))}},new class extends vr{constructor(t){const e=t||{};super(Object.assign({unicode:59703,tooltip:"Liste anzeigen"},e))}}],verticalControls:[new class extends vr{constructor(t){const e=t||{};super(Object.assign({unicode:59666,tooltip:"Ansicht drucken",tooltipAsTextElement:!0},e))}},new Zr,new class extends vr{constructor(t){const e=t||{};super(Object.assign({unicode:59707,tooltip:"Toolbox einblenden",tooltipAsTextElement:!0},e))}}]}),new class extends fr{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-top-right",childControls:t}))}}([new class extends vr{constructor(t){const e=t||{};super(Object.assign({unicode:59702,containerClassName:"ol-control bgis-control ol-geolocate",tooltip:"Standort zentrieren"},e));const n=t||{};this._geoLocation=new Ar(n)}handleEvent(t){var e,n;return t.type===w&&this.geoLocation&&(null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n?void 0:n.getProjection())&&(this.geoLocation.once("change",(()=>{var t,e;this.geoLocation.setTracking(!1),null===(t=this.getMap())||void 0===t||t.getView().animate({center:(e=this.geoLocation.getPosition(),sn(e,"EPSG:4326","EPSG:3857")),duration:300}),this.geoLocation.getPosition()&&this.dispatchEvent(new Ir("location_retrieved",this.geoLocation.getPosition()))})),this.geoLocation.setTracking(!0)),!0}get geoLocation(){return this._geoLocation}},new class extends mi{constructor(t){const e=t||{};super(Object.assign(Object.assign({},e),{zoomInLabel:String.fromCodePoint(59700),zoomOutLabel:String.fromCodePoint(59701)})),this.element.className="ol-control bgis-control zoom-container"}}]),new Kr],view:new Co({center:oe([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),t})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxjZ0Z0U3RFOHNCLFNBQVUsTUFFVjErQixLQUFLNG9FLFlBQVlwYSxlQUNqQnh1RCxLQUFLc0UsY0FBYyxJQUFJb3FELEdBQXVCLHFCQUFzQjF1RCxLQUFLNG9FLFlBQVlwYSxtQkFHN0Z4dUQsS0FBSzRvRSxZQUFZN2IsYUFBWSxLQUc5QixFQUtQNmIsa0JBQ0EsT0FBTzVvRSxLQUFLMm9FLGUwQjVDUixJVW5CTCxjQUFtQkUsR0FLdEJ0bEUsWUFBWXNILEdBQ1IsTUFBTXMrQyxFQUFPdCtDLEdBQW9CLEdBQ2pDdStDLE1BQU16cEQsT0FBT29DLE9BQU9wQyxPQUFPb0MsT0FBTyxHQUFJb25ELEdBQU8sQ0FBRTVLLFlBQWFsN0MsT0FBTzZtRCxjQUFjLE9BQVMxTCxhQUFjbjdDLE9BQU82bUQsY0FBYyxVQUM3SGxxRCxLQUFLaXBDLFFBQVF2OUIsVUFBWSw2Q1ZhekIsSUFBSXVrRCxJQUVSM2MsS0FBTSxJQUFJNVosR0FBSyxDQUNYemdCLE9BQVFMLEdBQVUsQ0FBQyxNQUFTLFFBQVMsUUFBUyxVQUM5Q21pQixxQkFBcUIsRUFDckJFLHFCQUFxQixFQUNyQnp1QixPQUFRLENBQUMsTUFBUyxRQUFTLFFBQVMsU0FDcENoQixRQUFTLEdBQ1RELFFBQVMsRUFDVDBDLEtBQU0sTSIsInNvdXJjZXMiOlsid2VicGFjazovL2JnaXMtY29yZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JnaXMtY29yZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvRGlzcG9zYWJsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvYXJyYXkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvb2JqLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvVGFyZ2V0LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL09ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3V0aWwuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0Fzc2VydGlvbkVycm9yLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9hc3NlcnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9tYXRoLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0xheWVyLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0Jhc2VUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9MYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VTdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9oYXMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29sb3IuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9Db3JuZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZG9tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY3NzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1VuaXRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzM4NTcuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzQzMjYuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovcHJvamVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovdHJhbnNmb3Jtcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3BoZXJlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29vcmRpbmF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY2VudGVyY29uc3RyYWludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JvdGF0aW9uY29uc3RyYWludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZWFzaW5nLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5TGF5b3V0LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvdHJhbnNmb3JtLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvY2xvc2VzdC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2RlZmxhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zaW1wbGlmeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2luZmxhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9hcmVhLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0xpbmVhclJpbmcuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vR2VvbWV0cnlUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvY29udGFpbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc2VnbWVudHMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9yZXZlcnNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvb3JpZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvbHlnb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcmlvcnBvaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC9jb21tb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdIaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9JY29uSW1hZ2VDYWNoZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTWFwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9Db21wb3NpdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb25FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0dyb3VwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBFdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wb2ludGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlUXVldWUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NpemUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1BsdWdnYWJsZU1hcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Db250cm9sLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL0F0dHJpYnV0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9ab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUG9pbnRlci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL2NvbmRpdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0JveC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ0JveC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvS2V5Q29kZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9LaW5ldGljLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2Jhc2UvQ29tcG9zaXRlQ29udHJvbC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Db250YWluZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvdXRpbC9kb20udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL0J1dHRvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2Jhc2UvVG9nZ2xlQnV0dG9uLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9HZW9sb2NhdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL0dlb0xvY2F0ZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvU2NhbGVMaW5lLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvT3ZlcnZpZXcudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9TaGFyZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VCYXNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ovVHJpYW5ndWxhdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ovVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3RydWN0cy9MUlVDYWNoZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWNvb3JkLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVncmlkL1RpbGVHcmlkLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGV1cmxmdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1VybFRpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUltYWdlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvWFlaLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL3NvdXJjZS9CYXNlbWFwU291cmNlLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NpdGUvZXhhbXBsZXMvZGF0YS9jb3JlLWZlYXR1cmVzLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvY29udGFpbmVyL0Zvb3Rlci50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL01vdXNlUG9zaXRpb24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Cb3R0b21SaWdodC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL0xheWVyLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvVmlld0xpc3QudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9QcmludC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1Rvb2xzLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvY29udGFpbmVyL1RvcFJpZ2h0LnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvWm9vbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJiZ2lzLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiYmdpcy1jb3JlXCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTdHJpcHBlZCBkb3duIGltcGxlbWVudGF0aW9uIG9mIHRoZSBXM0MgRE9NIExldmVsIDIgRXZlbnQgaW50ZXJmYWNlLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMi1FdmVudHMvZXZlbnRzLmh0bWwjRXZlbnRzLWludGVyZmFjZS5cbiAqXG4gKiBUaGlzIGltcGxlbWVudGF0aW9uIG9ubHkgcHJvdmlkZXMgYHR5cGVgIGFuZCBgdGFyZ2V0YCBwcm9wZXJ0aWVzLCBhbmRcbiAqIGBzdG9wUHJvcGFnYXRpb25gIGFuZCBgcHJldmVudERlZmF1bHRgIG1ldGhvZHMuIEl0IGlzIG1lYW50IGFzIGJhc2UgY2xhc3NcbiAqIGZvciBoaWdoZXIgbGV2ZWwgZXZlbnRzIGRlZmluZWQgaW4gdGhlIGxpYnJhcnksIGFuZCB3b3JrcyB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9UYXJnZXR+VGFyZ2V0fS5cbiAqL1xudmFyIEJhc2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VFdmVudCh0eXBlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJvcGFnYXRpb25TdG9wcGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXZlbnQgdHlwZS5cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBldmVudCB0YXJnZXQuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJldmVudCBkZWZhdWx0LiBUaGlzIG1lYW5zIHRoYXQgbm8gZW11bGF0ZWQgYGNsaWNrYCwgYHNpbmdsZWNsaWNrYCBvciBgZG91YmxlY2xpY2tgIGV2ZW50c1xuICAgICAqIHdpbGwgYmUgZmlyZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VFdmVudDtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihldnQpIHtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuZXhwb3J0IGRlZmF1bHQgQmFzZUV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdEV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHByb3BlcnR5IGlzIGNoYW5nZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9PYmplY3QuT2JqZWN0RXZlbnQjcHJvcGVydHljaGFuZ2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJPUEVSVFlDSEFOR0U6ICdwcm9wZXJ0eWNoYW5nZScsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7J3Byb3BlcnR5Y2hhbmdlJ30gVHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9EaXNwb3NhYmxlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogT2JqZWN0cyB0aGF0IG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgdGhlbXNlbHZlcy5cbiAqL1xudmFyIERpc3Bvc2FibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGlzcG9zYWJsZSgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvYmplY3QgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUludGVybmFsKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3IgZGlzcG9zYWJsZSBvYmplY3RzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgcmV0dXJuIERpc3Bvc2FibGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgRGlzcG9zYWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpc3Bvc2FibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2FycmF5XG4gKi9cbi8qKlxuICogUGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9uIHRoZSBwcm92aWRlZCBzb3J0ZWQgbGlzdCBhbmQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQuIElmIGl0IGNhbid0IGJlIGZvdW5kIGl0J2xsIHJldHVybiAtMS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL2JpbmFyeS1zZWFyY2hcbiAqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBoYXlzdGFjayBJdGVtcyB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7Kn0gbmVlZGxlIFRoZSBpdGVtIHRvIGxvb2sgZm9yLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdF9jb21wYXJhdG9yXSBDb21wYXJhdG9yIGZ1bmN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQsIC0xIGlmIG5vdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmFyeVNlYXJjaChoYXlzdGFjaywgbmVlZGxlLCBvcHRfY29tcGFyYXRvcikge1xuICAgIHZhciBtaWQsIGNtcDtcbiAgICB2YXIgY29tcGFyYXRvciA9IG9wdF9jb21wYXJhdG9yIHx8IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb247XG4gICAgdmFyIGxvdyA9IDA7XG4gICAgdmFyIGhpZ2ggPSBoYXlzdGFjay5sZW5ndGg7XG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgLyogTm90ZSB0aGF0IFwiKGxvdyArIGhpZ2gpID4+PiAxXCIgbWF5IG92ZXJmbG93LCBhbmQgcmVzdWx0cyBpbiBhIHR5cGVjYXN0XG4gICAgICAgICAqIHRvIGRvdWJsZSAod2hpY2ggZ2l2ZXMgdGhlIHdyb25nIHJlc3VsdHMpLiAqL1xuICAgICAgICBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBjbXAgPSArY29tcGFyYXRvcihoYXlzdGFja1ttaWRdLCBuZWVkbGUpO1xuICAgICAgICBpZiAoY21wIDwgMC4wKSB7XG4gICAgICAgICAgICAvKiBUb28gbG93LiAqL1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIEtleSBmb3VuZCBvciB0b28gaGlnaCAqL1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgICAgIGZvdW5kID0gIWNtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBLZXkgbm90IGZvdW5kLiAqL1xuICAgIHJldHVybiBmb3VuZCA/IGxvdyA6IH5sb3c7XG59XG4vKipcbiAqIENvbXBhcmUgZnVuY3Rpb24gZm9yIGFycmF5IHNvcnQgdGhhdCBpcyBzYWZlIGZvciBudW1iZXJzLlxuICogQHBhcmFtIHsqfSBhIFRoZSBmaXJzdCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcGFyYW0geyp9IGIgVGhlIHNlY29uZCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbmVnYXRpdmUgbnVtYmVyLCB6ZXJvLCBvciBhIHBvc2l0aXZlIG51bWJlciBhcyB0aGUgZmlyc3RcbiAqICAgICBhcmd1bWVudCBpcyBsZXNzIHRoYW4sIGVxdWFsIHRvLCBvciBncmVhdGVyIHRoYW4gdGhlIHNlY29uZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhID4gYiA/IDEgOiBhIDwgYiA/IC0xIDogMDtcbn1cbi8qKlxuICogV2hldGhlciB0aGUgYXJyYXkgY29udGFpbnMgdGhlIGdpdmVuIG9iamVjdC5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gdGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHsqfSBvYmogVGhlIG9iamVjdCBmb3Igd2hpY2ggdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgaW4gdGhlIGFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZXMoYXJyLCBvYmopIHtcbiAgICByZXR1cm4gYXJyLmluZGV4T2Yob2JqKSA+PSAwO1xufVxuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVncmlkL1RpbGVHcmlkflRpbGVHcmlkI2dldFpGb3JSZXNvbHV0aW9ufSBjYW4gdXNlIGEgZnVuY3Rpb25cbiAqIG9mIHRoaXMgdHlwZSB0byBkZXRlcm1pbmUgd2hpY2ggbmVhcmVzdCByZXNvbHV0aW9uIHRvIHVzZS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHRha2VzIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgYSB2YWx1ZSBiZXR3ZWVuIHR3byBhcnJheSBlbnRyaWVzLFxuICogYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhlIG5lYXJlc3QgaGlnaGVyIGVudHJ5IGFuZFxuICogYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhlIG5lYXJlc3QgbG93ZXIgZW50cnlcbiAqIGFzIGFyZ3VtZW50cyBhbmQgcmV0dXJucyBhIGB7bnVtYmVyfWAuIElmIGEgbmVnYXRpdmUgbnVtYmVyIG9yIHplcm8gaXMgcmV0dXJuZWRcbiAqIHRoZSBsb3dlciB2YWx1ZSB3aWxsIGJlIHVzZWQsIGlmIGEgcG9zaXRpdmUgbnVtYmVyIGlzIHJldHVybmVkIHRoZSBoaWdoZXIgdmFsdWVcbiAqIHdpbGwgYmUgdXNlZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihudW1iZXIsIG51bWJlciwgbnVtYmVyKTogbnVtYmVyfSBOZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFyciBBcnJheSBpbiBkZXNjZW5kaW5nIG9yZGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCBUYXJnZXQuXG4gKiBAcGFyYW0ge251bWJlcnxOZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IGRpcmVjdGlvblxuICogICAgMCBtZWFucyByZXR1cm4gdGhlIG5lYXJlc3QsXG4gKiAgICA+IDAgbWVhbnMgcmV0dXJuIHRoZSBsYXJnZXN0IG5lYXJlc3QsXG4gKiAgICA8IDAgbWVhbnMgcmV0dXJuIHRoZSBzbWFsbGVzdCBuZWFyZXN0LlxuICogQHJldHVybiB7bnVtYmVyfSBJbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhckZpbmROZWFyZXN0KGFyciwgdGFyZ2V0LCBkaXJlY3Rpb24pIHtcbiAgICB2YXIgbiA9IGFyci5sZW5ndGg7XG4gICAgaWYgKGFyclswXSA8PSB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhcmdldCA8PSBhcnJbbiAtIDFdKSB7XG4gICAgICAgIHJldHVybiBuIC0gMTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBpID0gdm9pZCAwO1xuICAgICAgICBpZiAoZGlyZWN0aW9uID4gMCkge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXJlY3Rpb24gPCAwKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA8PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcnJbaV0gPCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkaXJlY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3Rpb24odGFyZ2V0LCBhcnJbaSAtIDFdLCBhcnJbaV0pID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFycltpIC0gMV0gLSB0YXJnZXQgPCB0YXJnZXQgLSBhcnJbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuIC0gMTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBBcnJheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWdpbiBCZWdpbiBpbmRleC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV2ZXJzZVN1YkFycmF5KGFyciwgYmVnaW4sIGVuZCkge1xuICAgIHdoaWxlIChiZWdpbiA8IGVuZCkge1xuICAgICAgICB2YXIgdG1wID0gYXJyW2JlZ2luXTtcbiAgICAgICAgYXJyW2JlZ2luXSA9IGFycltlbmRdO1xuICAgICAgICBhcnJbZW5kXSA9IHRtcDtcbiAgICAgICAgKytiZWdpbjtcbiAgICAgICAgLS1lbmQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0geyFBcnJheTxWQUxVRT58VkFMVUV9IGRhdGEgVGhlIGVsZW1lbnRzIG9yIGFycmF5cyBvZiBlbGVtZW50cyB0byBhZGQgdG8gYXJyLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoYXJyLCBkYXRhKSB7XG4gICAgdmFyIGV4dGVuc2lvbiA9IEFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogW2RhdGFdO1xuICAgIHZhciBsZW5ndGggPSBleHRlbnNpb24ubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyW2Fyci5sZW5ndGhdID0gZXh0ZW5zaW9uW2ldO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtWQUxVRX0gb2JqIFRoZSBlbGVtZW50IHRvIHJlbW92ZS5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoYXJyLCBvYmopIHtcbiAgICB2YXIgaSA9IGFyci5pbmRleE9mKG9iaik7XG4gICAgdmFyIGZvdW5kID0gaSA+IC0xO1xuICAgIGlmIChmb3VuZCkge1xuICAgICAgICBhcnIuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIHNlYXJjaCBpbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVkFMVUUsIG51bWJlciwgPykgOiBib29sZWFufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjb21wYXJlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtWQUxVRXxudWxsfSBUaGUgZWxlbWVudCBmb3VuZCBvciBudWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZChhcnIsIGZ1bmMpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyLmxlbmd0aCA+Pj4gMDtcbiAgICB2YXIgdmFsdWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IGFycltpXTtcbiAgICAgICAgaWYgKGZ1bmModmFsdWUsIGksIGFycikpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMSBUaGUgZmlyc3QgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjIgVGhlIHNlY29uZCBhcnJheSB0byBjb21wYXJlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgdHdvIGFycmF5cyBhcmUgZXF1YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoYXJyMSwgYXJyMikge1xuICAgIHZhciBsZW4xID0gYXJyMS5sZW5ndGg7XG4gICAgaWYgKGxlbjEgIT09IGFycjIubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW4xOyBpKyspIHtcbiAgICAgICAgaWYgKGFycjFbaV0gIT09IGFycjJbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogU29ydCB0aGUgcGFzc2VkIGFycmF5IHN1Y2ggdGhhdCB0aGUgcmVsYXRpdmUgb3JkZXIgb2YgZXF1YWwgZWxlbWVudHMgaXMgcHJlc2VydmVkLlxuICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NvcnRpbmdfYWxnb3JpdGhtI1N0YWJpbGl0eSBmb3IgZGV0YWlscy5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gc29ydCAobW9kaWZpZXMgb3JpZ2luYWwpLlxuICogQHBhcmFtIHshZnVuY3Rpb24oKiwgKik6IG51bWJlcn0gY29tcGFyZUZuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhYmxlU29ydChhcnIsIGNvbXBhcmVGbmMpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyLmxlbmd0aDtcbiAgICB2YXIgdG1wID0gQXJyYXkoYXJyLmxlbmd0aCk7XG4gICAgdmFyIGk7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRtcFtpXSA9IHsgaW5kZXg6IGksIHZhbHVlOiBhcnJbaV0gfTtcbiAgICB9XG4gICAgdG1wLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmVGbmMoYS52YWx1ZSwgYi52YWx1ZSkgfHwgYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgfSk7XG4gICAgZm9yIChpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJbaV0gPSB0bXBbaV0udmFsdWU7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNlYXJjaCBpbi5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gUmV0dXJuIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZEluZGV4KGFyciwgZnVuYykge1xuICAgIHZhciBpbmRleDtcbiAgICB2YXIgZm91bmQgPSAhYXJyLmV2ZXJ5KGZ1bmN0aW9uIChlbCwgaWR4KSB7XG4gICAgICAgIGluZGV4ID0gaWR4O1xuICAgICAgICByZXR1cm4gIWZ1bmMoZWwsIGlkeCwgYXJyKTtcbiAgICB9KTtcbiAgICByZXR1cm4gZm91bmQgPyBpbmRleCA6IC0xO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHRlc3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0X2Z1bmNdIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc3RyaWN0XSBTdHJpY3RseSBzb3J0ZWQgKGRlZmF1bHQgZmFsc2UpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJuIGluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTb3J0ZWQoYXJyLCBvcHRfZnVuYywgb3B0X3N0cmljdCkge1xuICAgIHZhciBjb21wYXJlID0gb3B0X2Z1bmMgfHwgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbjtcbiAgICByZXR1cm4gYXJyLmV2ZXJ5KGZ1bmN0aW9uIChjdXJyZW50VmFsLCBpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXMgPSBjb21wYXJlKGFycltpbmRleCAtIDFdLCBjdXJyZW50VmFsKTtcbiAgICAgICAgcmV0dXJuICEocmVzID4gMCB8fCAob3B0X3N0cmljdCAmJiByZXMgPT09IDApKTtcbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFycmF5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9mdW5jdGlvbnNcbiAqL1xuaW1wb3J0IHsgZXF1YWxzIGFzIGFycmF5RXF1YWxzIH0gZnJvbSAnLi9hcnJheS5qcyc7XG4vKipcbiAqIEFsd2F5cyByZXR1cm5zIHRydWUuXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVFJVRSgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQWx3YXlzIHJldHVybnMgZmFsc2UuXG4gKiBAcmV0dXJuIHtib29sZWFufSBmYWxzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIEZBTFNFKCkge1xuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQSByZXVzYWJsZSBmdW5jdGlvbiwgdXNlZCBlLmcuIGFzIGEgZGVmYXVsdCBmb3IgY2FsbGJhY2tzLlxuICpcbiAqIEByZXR1cm4ge3ZvaWR9IE5vdGhpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBWT0lEKCkgeyB9XG4vKipcbiAqIFdyYXAgYSBmdW5jdGlvbiBpbiBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgcmVtZW1iZXJzIHRoZSBsYXN0IHJldHVybi4gIElmIHRoZVxuICogcmV0dXJuZWQgZnVuY3Rpb24gaXMgY2FsbGVkIHR3aWNlIGluIGEgcm93IHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFuZCB0aGUgc2FtZVxuICogdGhpcyBvYmplY3QsIGl0IHdpbGwgcmV0dXJuIHRoZSB2YWx1ZSBmcm9tIHRoZSBmaXJzdCBjYWxsIGluIHRoZSBzZWNvbmQgY2FsbC5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFueSk6IFJldHVyblR5cGV9IGZuIFRoZSBmdW5jdGlvbiB0byBtZW1vaXplLlxuICogQHJldHVybiB7ZnVuY3Rpb24oLi4uYW55KTogUmV0dXJuVHlwZX0gVGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICogQHRlbXBsYXRlIFJldHVyblR5cGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lbW9pemVPbmUoZm4pIHtcbiAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgLyoqIEB0eXBlIHtSZXR1cm5UeXBlfSAqL1xuICAgIHZhciBsYXN0UmVzdWx0O1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8YW55Pn0gKi9cbiAgICB2YXIgbGFzdEFyZ3M7XG4gICAgdmFyIGxhc3RUaGlzO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZXh0QXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgIGlmICghY2FsbGVkIHx8IHRoaXMgIT09IGxhc3RUaGlzIHx8ICFhcnJheUVxdWFscyhuZXh0QXJncywgbGFzdEFyZ3MpKSB7XG4gICAgICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgICAgICAgICAgbGFzdEFyZ3MgPSBuZXh0QXJncztcbiAgICAgICAgICAgIGxhc3RSZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICAgIH07XG59XG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IChUIHwgUHJvbWlzZTxUPil9IGdldHRlciBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHZhbHVlIG9yIGEgcHJvbWlzZSBmb3IgYSB2YWx1ZS5cbiAqIEByZXR1cm4ge1Byb21pc2U8VD59IEEgcHJvbWlzZSBmb3IgdGhlIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Qcm9taXNlKGdldHRlcikge1xuICAgIGZ1bmN0aW9uIHByb21pc2VHZXR0ZXIoKSB7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhbHVlID0gZ2V0dGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZUdldHRlcigpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb25zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9vYmpcbiAqL1xuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgT2JqZWN0LmFzc2lnbigpLiAgQXNzaWducyBlbnVtZXJhYmxlIGFuZCBvd24gcHJvcGVydGllcyBmcm9tXG4gKiBvbmUgb3IgbW9yZSBzb3VyY2Ugb2JqZWN0cyB0byBhIHRhcmdldCBvYmplY3QuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbi5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdC5cbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSB2YXJfc291cmNlcyBUaGUgc291cmNlIG9iamVjdChzKS5cbiAqIEByZXR1cm4geyFPYmplY3R9IFRoZSBtb2RpZmllZCB0YXJnZXQgb2JqZWN0LlxuICovXG5leHBvcnQgdmFyIGFzc2lnbiA9IHR5cGVvZiBPYmplY3QuYXNzaWduID09PSAnZnVuY3Rpb24nXG4gICAgPyBPYmplY3QuYXNzaWduXG4gICAgOiBmdW5jdGlvbiAodGFyZ2V0LCB2YXJfc291cmNlcykge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbi8qKlxuICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbGVhci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG9iamVjdCkge1xuICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcbiAgICB9XG59XG4vKipcbiAqIFBvbHlmaWxsIGZvciBPYmplY3QudmFsdWVzKCkuICBHZXQgYW4gYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzIGZyb20gYW4gb2JqZWN0LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC92YWx1ZXNcbiAqXG4gKiBAcGFyYW0geyFPYmplY3Q8SyxWPn0gb2JqZWN0IFRoZSBvYmplY3QgZnJvbSB3aGljaCB0byBnZXQgdGhlIHZhbHVlcy5cbiAqIEByZXR1cm4geyFBcnJheTxWPn0gVGhlIHByb3BlcnR5IHZhbHVlcy5cbiAqIEB0ZW1wbGF0ZSBLLFZcbiAqL1xuZXhwb3J0IHZhciBnZXRWYWx1ZXMgPSB0eXBlb2YgT2JqZWN0LnZhbHVlcyA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gT2JqZWN0LnZhbHVlc1xuICAgIDogZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2gob2JqZWN0W3Byb3BlcnR5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9O1xuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGhhcyBhbnkgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KG9iamVjdCkge1xuICAgIHZhciBwcm9wZXJ0eTtcbiAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAhcHJvcGVydHk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvVGFyZ2V0XG4gKi9cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vRXZlbnQuanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtFdmVudFRhcmdldHxUYXJnZXR9IEV2ZW50VGFyZ2V0TGlrZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgc2ltcGxpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMC9SRUMtRE9NLUxldmVsLTItRXZlbnRzLTIwMDAxMTEzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldC5cbiAqXG4gKiBUaGVyZSBhcmUgdHdvIGltcG9ydGFudCBzaW1wbGlmaWNhdGlvbnMgY29tcGFyZWQgdG8gdGhlIHNwZWNpZmljYXRpb246XG4gKlxuICogMS4gVGhlIGhhbmRsaW5nIG9mIGB1c2VDYXB0dXJlYCBpbiBgYWRkRXZlbnRMaXN0ZW5lcmAgYW5kXG4gKiAgICBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuIFRoZXJlIGlzIG5vIHJlYWwgY2FwdHVyZSBtb2RlbC5cbiAqIDIuIFRoZSBoYW5kbGluZyBvZiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBvbiBgZGlzcGF0Y2hFdmVudGAuXG4gKiAgICBUaGVyZSBpcyBubyBldmVudCB0YXJnZXQgaGllcmFyY2h5LiBXaGVuIGEgbGlzdGVuZXIgY2FsbHNcbiAqICAgIGBzdG9wUHJvcGFnYXRpb25gIG9yIGBwcmV2ZW50RGVmYXVsdGAgb24gYW4gZXZlbnQgb2JqZWN0LCBpdCBtZWFucyB0aGF0IG5vXG4gKiAgICBtb3JlIGxpc3RlbmVycyBhZnRlciB0aGlzIG9uZSB3aWxsIGJlIGNhbGxlZC4gU2FtZSBhcyB3aGVuIHRoZSBsaXN0ZW5lclxuICogICAgcmV0dXJucyBmYWxzZS5cbiAqL1xudmFyIFRhcmdldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFyZ2V0LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdF90YXJnZXRdIERlZmF1bHQgZXZlbnQgdGFyZ2V0IGZvciBkaXNwYXRjaGVkIGV2ZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUYXJnZXQob3B0X3RhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ldmVudFRhcmdldF8gPSBvcHRfdGFyZ2V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGlzcGF0Y2hpbmdfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXI+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyc18gPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXR5cGUgfHwgIWxpc3RlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyB8fCAodGhpcy5saXN0ZW5lcnNfID0ge30pO1xuICAgICAgICB2YXIgbGlzdGVuZXJzRm9yVHlwZSA9IGxpc3RlbmVyc1t0eXBlXSB8fCAobGlzdGVuZXJzW3R5cGVdID0gW10pO1xuICAgICAgICBpZiAobGlzdGVuZXJzRm9yVHlwZS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYW5kIGNhbGxzIGFsbCBsaXN0ZW5lcnMgbGlzdGVuaW5nIGZvciBldmVudHNcbiAgICAgKiBvZiB0aGlzIHR5cGUuIFRoZSBldmVudCBwYXJhbWV0ZXIgY2FuIGVpdGhlciBiZSBhIHN0cmluZyBvciBhblxuICAgICAqIE9iamVjdCB3aXRoIGEgYHR5cGVgIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBldmVudCBFdmVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IGBmYWxzZWAgaWYgYW55b25lIGNhbGxlZCBwcmV2ZW50RGVmYXVsdCBvbiB0aGVcbiAgICAgKiAgICAgZXZlbnQgb2JqZWN0IG9yIGlmIGFueSBvZiB0aGUgbGlzdGVuZXJzIHJldHVybmVkIGZhbHNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8RXZlbnR9ICovXG4gICAgICAgIHZhciBldnQgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnID8gbmV3IEV2ZW50KGV2ZW50KSA6IGV2ZW50O1xuICAgICAgICB2YXIgdHlwZSA9IGV2dC50eXBlO1xuICAgICAgICBpZiAoIWV2dC50YXJnZXQpIHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQgPSB0aGlzLmV2ZW50VGFyZ2V0XyB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICB2YXIgcHJvcGFnYXRlO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICB2YXIgZGlzcGF0Y2hpbmcgPSB0aGlzLmRpc3BhdGNoaW5nXyB8fCAodGhpcy5kaXNwYXRjaGluZ18gPSB7fSk7XG4gICAgICAgICAgICB2YXIgcGVuZGluZ1JlbW92YWxzID0gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfIHx8ICh0aGlzLnBlbmRpbmdSZW1vdmFsc18gPSB7fSk7XG4gICAgICAgICAgICBpZiAoISh0eXBlIGluIGRpc3BhdGNoaW5nKSkge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoaW5nW3R5cGVdID0gMDtcbiAgICAgICAgICAgICAgICBwZW5kaW5nUmVtb3ZhbHNbdHlwZV0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytkaXNwYXRjaGluZ1t0eXBlXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdoYW5kbGVFdmVudCcgaW4gbGlzdGVuZXJzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyT2JqZWN0fSAqLyAobGlzdGVuZXJzW2ldKS5oYW5kbGVFdmVudChldnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbn0gKi8gKGxpc3RlbmVyc1tpXSkuY2FsbCh0aGlzLCBldnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJvcGFnYXRlID09PSBmYWxzZSB8fCBldnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLWRpc3BhdGNoaW5nW3R5cGVdO1xuICAgICAgICAgICAgaWYgKGRpc3BhdGNoaW5nW3R5cGVdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByID0gcGVuZGluZ1JlbW92YWxzW3R5cGVdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBwZW5kaW5nUmVtb3ZhbHNbdHlwZV07XG4gICAgICAgICAgICAgICAgd2hpbGUgKHByLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIFZPSUQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgZGlzcGF0Y2hpbmdbdHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvcGFnYXRlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNfICYmIGNsZWFyKHRoaXMubGlzdGVuZXJzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3RlbmVycyBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS4gTGlzdGVuZXJzIGFyZSByZXR1cm5lZCBpbiB0aGVcbiAgICAgKiBvcmRlciB0aGF0IHRoZXkgd2lsbCBiZSBjYWxsZWQgaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcj58dW5kZWZpbmVkfSBMaXN0ZW5lcnMuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV0pIHx8IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0X3R5cGVdIFR5cGUuIElmIG5vdCBwcm92aWRlZCxcbiAgICAgKiAgICAgYHRydWVgIHdpbGwgYmUgcmV0dXJuZWQgaWYgdGhpcyBldmVudCB0YXJnZXQgaGFzIGFueSBsaXN0ZW5lcnMuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSGFzIGxpc3RlbmVycy5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmhhc0xpc3RlbmVyID0gZnVuY3Rpb24gKG9wdF90eXBlKSB7XG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNfKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdF90eXBlXG4gICAgICAgICAgICA/IG9wdF90eXBlIGluIHRoaXMubGlzdGVuZXJzX1xuICAgICAgICAgICAgOiBPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVyc18pLmxlbmd0aCA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nUmVtb3ZhbHNfICYmIHR5cGUgaW4gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgbGlzdGVuZXIgYSBuby1vcCwgYW5kIHJlbW92ZSBsYXRlciBpbiAjZGlzcGF0Y2hFdmVudCgpXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyc1tpbmRleF0gPSBWT0lEO1xuICAgICAgICAgICAgICAgICAgICArK3RoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRhcmdldDtcbn0oRGlzcG9zYWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGFyZ2V0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFyZ2V0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBjb25zdFxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogR2VuZXJpYyBjaGFuZ2UgZXZlbnQuIFRyaWdnZXJlZCB3aGVuIHRoZSByZXZpc2lvbiBjb3VudGVyIGlzIGluY3JlYXNlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjY2hhbmdlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENIQU5HRTogJ2NoYW5nZScsXG4gICAgLyoqXG4gICAgICogR2VuZXJpYyBlcnJvciBldmVudC4gVHJpZ2dlcmVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNlcnJvclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBFUlJPUjogJ2Vycm9yJyxcbiAgICBCTFVSOiAnYmx1cicsXG4gICAgQ0xFQVI6ICdjbGVhcicsXG4gICAgQ09OVEVYVE1FTlU6ICdjb250ZXh0bWVudScsXG4gICAgQ0xJQ0s6ICdjbGljaycsXG4gICAgREJMQ0xJQ0s6ICdkYmxjbGljaycsXG4gICAgRFJBR0VOVEVSOiAnZHJhZ2VudGVyJyxcbiAgICBEUkFHT1ZFUjogJ2RyYWdvdmVyJyxcbiAgICBEUk9QOiAnZHJvcCcsXG4gICAgRk9DVVM6ICdmb2N1cycsXG4gICAgS0VZRE9XTjogJ2tleWRvd24nLFxuICAgIEtFWVBSRVNTOiAna2V5cHJlc3MnLFxuICAgIExPQUQ6ICdsb2FkJyxcbiAgICBSRVNJWkU6ICdyZXNpemUnLFxuICAgIFRPVUNITU9WRTogJ3RvdWNobW92ZScsXG4gICAgV0hFRUw6ICd3aGVlbCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHNcbiAqL1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuL29iai5qcyc7XG4vKipcbiAqIEtleSB0byB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSN1bkJ5S2V5fS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEV2ZW50c0tleVxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogTGlzdGVuZXIgZnVuY3Rpb24uIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYW4gZXZlbnQgb2JqZWN0IGFzIGFyZ3VtZW50LlxuICogV2hlbiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLCBldmVudCBwcm9wYWdhdGlvbiB3aWxsIHN0b3AuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KSk6ICh2b2lkfGJvb2xlYW4pfSBMaXN0ZW5lckZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTGlzdGVuZXJPYmplY3RcbiAqIEBwcm9wZXJ0eSB7TGlzdGVuZXJGdW5jdGlvbn0gaGFuZGxlRXZlbnQgSGFuZGxlRXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge0xpc3RlbmVyRnVuY3Rpb258TGlzdGVuZXJPYmplY3R9IExpc3RlbmVyXG4gKi9cbi8qKlxuICogUmVnaXN0ZXJzIGFuIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIHRvIGEgYHRoaXNgIG9iamVjdCwgYW5kIHJldHVybnNcbiAqIGEga2V5IGZvciB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy51bmxpc3RlbkJ5S2V5fS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBFdmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICogQHBhcmFtIHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0X3RoaXNdIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfb25jZV0gSWYgdHJ1ZSwgYWRkIHRoZSBsaXN0ZW5lciBhcyBvbmUtb2ZmIGxpc3RlbmVyLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMsIG9wdF9vbmNlKSB7XG4gICAgaWYgKG9wdF90aGlzICYmIG9wdF90aGlzICE9PSB0YXJnZXQpIHtcbiAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5iaW5kKG9wdF90aGlzKTtcbiAgICB9XG4gICAgaWYgKG9wdF9vbmNlKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbExpc3RlbmVyXzEgPSBsaXN0ZW5lcjtcbiAgICAgICAgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyXzEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGV2ZW50c0tleSA9IHtcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcbiAgICB9O1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gZXZlbnRzS2V5O1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgYSBvbmUtb2ZmIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIGFzIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lclxuICogdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJucyBhIGtleSBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLnVubGlzdGVuQnlLZXl9IGluIGNhc2UgdGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlXG4gKiB1bnJlZ2lzdGVyZWQgYmVmb3JlIGl0IGlzIGNhbGxlZC5cbiAqXG4gKiBXaGVuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLmxpc3Rlbn0gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFmdGVyIHRoaXNcbiAqIGZ1bmN0aW9uLCB0aGUgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyIHdpbGwgYmUgdHVybmVkIGludG8gYSBwZXJtYW5lbnRcbiAqIGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRfdGhpc10gT2JqZWN0IHJlZmVyZW5jZWQgYnkgdGhlIGB0aGlzYCBrZXl3b3JkIGluIHRoZVxuICogICAgIGxpc3RlbmVyLiBEZWZhdWx0IGlzIHRoZSBgdGFyZ2V0YC5cbiAqIEByZXR1cm4ge0V2ZW50c0tleX0gS2V5IGZvciB1bmxpc3RlbkJ5S2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuT25jZSh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcykge1xuICAgIHJldHVybiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMsIHRydWUpO1xufVxuLyoqXG4gKiBVbnJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGlzIHRoZSBrZXkgcmV0dXJuZWQgZnJvbVxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMubGlzdGVufSBvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy5saXN0ZW5PbmNlfS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50c0tleX0ga2V5IFRoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3RlbkJ5S2V5KGtleSkge1xuICAgIGlmIChrZXkgJiYga2V5LnRhcmdldCkge1xuICAgICAgICBrZXkudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoa2V5LnR5cGUsIGtleS5saXN0ZW5lcik7XG4gICAgICAgIGNsZWFyKGtleSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnRzLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvT2JzZXJ2YWJsZVxuICovXG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgbGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbi8qKipcbiAqIEB0ZW1wbGF0ZSB7c3RyaW5nfSBUeXBlXG4gKiBAdGVtcGxhdGUge0V2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IEV2ZW50Q2xhc3NcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHsodHlwZTogVHlwZSwgbGlzdGVuZXI6IChldmVudDogRXZlbnRDbGFzcykgPT4gPykgPT4gUmV0dXJufSBPblNpZ25hdHVyZVxuICovXG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYgeyh0eXBlOiBUeXBlW10sIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpID0+ID8pID0+IFJldHVybiBleHRlbmRzIHZvaWQgPyB2b2lkIDogUmV0dXJuW119IENvbWJpbmVkT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7J2NoYW5nZSd8J2Vycm9yJ30gRXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7T25TaWduYXR1cmU8RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmIENvbWJpbmVkT25TaWduYXR1cmU8RXZlbnRUeXBlcywgUmV0dXJuPn0gT2JzZXJ2YWJsZU9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQW4gZXZlbnQgdGFyZ2V0IHByb3ZpZGluZyBjb252ZW5pZW50IG1ldGhvZHMgZm9yIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogYW5kIHVucmVnaXN0cmF0aW9uLiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgYWx3YXlzIGF2YWlsYWJsZSB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSNjaGFuZ2VkfS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQGFwaVxuICovXG52YXIgT2JzZXJ2YWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5vbiA9XG4gICAgICAgICAgICAvKiogQHR5cGUge09ic2VydmFibGVPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fSAqLyAoX3RoaXMub25JbnRlcm5hbCk7XG4gICAgICAgIF90aGlzLm9uY2UgPVxuICAgICAgICAgICAgLyoqIEB0eXBlIHtPYnNlcnZhYmxlT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn0gKi8gKF90aGlzLm9uY2VJbnRlcm5hbCk7XG4gICAgICAgIF90aGlzLnVuID0gLyoqIEB0eXBlIHtPYnNlcnZhYmxlT25TaWduYXR1cmU8dm9pZD59ICovIChfdGhpcy51bkludGVybmFsKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXZpc2lvbl8gPSAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlYXNlcyB0aGUgcmV2aXNpb24gY291bnRlciBhbmQgZGlzcGF0Y2hlcyBhICdjaGFuZ2UnIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICArK3RoaXMucmV2aXNpb25fO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZlcnNpb24gbnVtYmVyIGZvciB0aGlzIG9iamVjdC4gIEVhY2ggdGltZSB0aGUgb2JqZWN0IGlzIG1vZGlmaWVkLFxuICAgICAqIGl0cyB2ZXJzaW9uIG51bWJlciB3aWxsIGJlIGluY3JlbWVudGVkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUmV2aXNpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmdldFJldmlzaW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXZpc2lvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gRXZlbnQga2V5LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbkludGVybmFsID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIga2V5cyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgIGtleXNbaV0gPSBsaXN0ZW4odGhpcywgdHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IEV2ZW50IGtleS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25jZUludGVybmFsID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBrZXk7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICAgICAgICBrZXkgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBrZXlbaV0gPSBsaXN0ZW5PbmNlKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGtleSA9IGxpc3Rlbk9uY2UodGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleSA9IGtleTtcbiAgICAgICAgcmV0dXJuIGtleTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVubGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudW5JbnRlcm5hbCA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIga2V5ID0gLyoqIEB0eXBlIHtPYmplY3R9ICovIChsaXN0ZW5lcikub2xfa2V5O1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICB1bkJ5S2V5KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdHlwZS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufShFdmVudFRhcmdldCkpO1xuLyoqXG4gKiBMaXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUub247XG4vKipcbiAqIExpc3RlbiBvbmNlIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAqICAgICBjYWxsZWQgd2l0aCBhbiBhcnJheSBvZiBldmVudCB0eXBlcyBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSByZXR1cm5cbiAqICAgICB3aWxsIGJlIGFuIGFycmF5IG9mIGtleXMuXG4gKiBAYXBpXG4gKi9cbk9ic2VydmFibGUucHJvdG90eXBlLm9uY2U7XG4vKipcbiAqIFVubGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5PYnNlcnZhYmxlLnByb3RvdHlwZS51bjtcbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciB1c2luZyB0aGUga2V5IHJldHVybmVkIGJ5IGBvbigpYCBvciBgb25jZSgpYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IGtleSBUaGUga2V5IHJldHVybmVkIGJ5IGBvbigpYFxuICogICAgIG9yIGBvbmNlKClgIChvciBhbiBhcnJheSBvZiBrZXlzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuQnlLZXkoa2V5KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBrZXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleShrZXlbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fSAqLyAoa2V5KSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3V0aWxcbiAqL1xuLyoqXG4gKiBAcmV0dXJuIHs/fSBBbnkgcmV0dXJuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWJzdHJhY3QoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7P30gKi8gKChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCBhYnN0cmFjdCBtZXRob2QuJyk7XG4gICAgfSkoKSk7XG59XG4vKipcbiAqIENvdW50ZXIgZm9yIGdldFVpZC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdWlkQ291bnRlcl8gPSAwO1xuLyoqXG4gKiBHZXRzIGEgdW5pcXVlIElEIGZvciBhbiBvYmplY3QuIFRoaXMgbXV0YXRlcyB0aGUgb2JqZWN0IHNvIHRoYXQgZnVydGhlciBjYWxsc1xuICogd2l0aCB0aGUgc2FtZSBvYmplY3QgYXMgYSBwYXJhbWV0ZXIgcmV0dXJucyB0aGUgc2FtZSB2YWx1ZS4gVW5pcXVlIElEcyBhcmUgZ2VuZXJhdGVkXG4gKiBhcyBhIHN0cmljdGx5IGluY3JlYXNpbmcgc2VxdWVuY2UuIEFkYXB0ZWQgZnJvbSBnb29nLmdldFVpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZ2V0IHRoZSB1bmlxdWUgSUQgZm9yLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdW5pcXVlIElEIGZvciB0aGUgb2JqZWN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VWlkKG9iaikge1xuICAgIHJldHVybiBvYmoub2xfdWlkIHx8IChvYmoub2xfdWlkID0gU3RyaW5nKCsrdWlkQ291bnRlcl8pKTtcbn1cbi8qKlxuICogT3BlbkxheWVycyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBWRVJTSU9OID0gJzYuMTIuMCc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvT2JqZWN0XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4vT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24sIGlzRW1wdHkgfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKi9cbnZhciBPYmplY3RFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JqZWN0RXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcHJvcGVydHkgbmFtZS5cbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIFRoZSBvbGQgdmFsdWUgZm9yIGBrZXlgLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE9iamVjdEV2ZW50KHR5cGUsIGtleSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB3aG9zZSB2YWx1ZSBpcyBjaGFuZ2luZy5cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5ID0ga2V5O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9sZCB2YWx1ZS4gVG8gZ2V0IHRoZSBuZXcgdmFsdWUgdXNlIGBlLnRhcmdldC5nZXQoZS5rZXkpYCB3aGVyZVxuICAgICAgICAgKiBgZWAgaXMgdGhlIGV2ZW50IG9iamVjdC5cbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9sZFZhbHVlID0gb2xkVmFsdWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgT2JqZWN0RXZlbnQgfTtcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBPYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgUmV0dXJuPn0gT2JqZWN0T25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBNb3N0IG5vbi10cml2aWFsIGNsYXNzZXMgaW5oZXJpdCBmcm9tIHRoaXMuXG4gKlxuICogVGhpcyBleHRlbmRzIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX0gd2l0aCBvYnNlcnZhYmxlXG4gKiBwcm9wZXJ0aWVzLCB3aGVyZSBlYWNoIHByb3BlcnR5IGlzIG9ic2VydmFibGUgYXMgd2VsbCBhcyB0aGUgb2JqZWN0IGFzIGFcbiAqIHdob2xlLlxuICpcbiAqIENsYXNzZXMgdGhhdCBpbmhlcml0IGZyb20gdGhpcyBoYXZlIHByZS1kZWZpbmVkIHByb3BlcnRpZXMsIHRvIHdoaWNoIHlvdSBjYW5cbiAqIGFkZCB5b3VyIG93bnMuIFRoZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzIGFyZSBsaXN0ZWQgaW4gdGhpcyBkb2N1bWVudGF0aW9uIGFzXG4gKiAnT2JzZXJ2YWJsZSBQcm9wZXJ0aWVzJywgYW5kIGhhdmUgdGhlaXIgb3duIGFjY2Vzc29yczsgZm9yIGV4YW1wbGUsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGhhcyBhIGB0YXJnZXRgIHByb3BlcnR5LCBhY2Nlc3NlZCB3aXRoXG4gKiBgZ2V0VGFyZ2V0KClgIGFuZCBjaGFuZ2VkIHdpdGggYHNldFRhcmdldCgpYC4gTm90IGFsbCBwcm9wZXJ0aWVzIGFyZSBob3dldmVyXG4gKiBzZXR0YWJsZS4gVGhlcmUgYXJlIGFsc28gZ2VuZXJhbC1wdXJwb3NlIGFjY2Vzc29ycyBgZ2V0KClgIGFuZCBgc2V0KClgLiBGb3JcbiAqIGV4YW1wbGUsIGBnZXQoJ3RhcmdldCcpYCBpcyBlcXVpdmFsZW50IHRvIGBnZXRUYXJnZXQoKWAuXG4gKlxuICogVGhlIGBzZXRgIGFjY2Vzc29ycyB0cmlnZ2VyIGEgY2hhbmdlIGV2ZW50LCBhbmQgeW91IGNhbiBtb25pdG9yIHRoaXMgYnlcbiAqIHJlZ2lzdGVyaW5nIGEgbGlzdGVuZXIuIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL1ZpZXd+Vmlld30gaGFzIGFcbiAqIGBjZW50ZXJgIHByb3BlcnR5LCBzbyBgdmlldy5vbignY2hhbmdlOmNlbnRlcicsIGZ1bmN0aW9uKGV2dCkgey4uLn0pO2Agd291bGRcbiAqIGNhbGwgdGhlIGZ1bmN0aW9uIHdoZW5ldmVyIHRoZSB2YWx1ZSBvZiB0aGUgY2VudGVyIHByb3BlcnR5IGNoYW5nZXMuIFdpdGhpblxuICogdGhlIGZ1bmN0aW9uLCBgZXZ0LnRhcmdldGAgd291bGQgYmUgdGhlIHZpZXcsIHNvIGBldnQudGFyZ2V0LmdldENlbnRlcigpYFxuICogd291bGQgcmV0dXJuIHRoZSBuZXcgY2VudGVyLlxuICpcbiAqIFlvdSBjYW4gYWRkIHlvdXIgb3duIG9ic2VydmFibGUgcHJvcGVydGllcyB3aXRoXG4gKiBgb2JqZWN0LnNldCgncHJvcCcsICd2YWx1ZScpYCwgYW5kIHJldHJpZXZlIHRoYXQgd2l0aCBgb2JqZWN0LmdldCgncHJvcCcpYC5cbiAqIFlvdSBjYW4gbGlzdGVuIGZvciBjaGFuZ2VzIG9uIHRoYXQgcHJvcGVydHkgdmFsdWUgd2l0aFxuICogYG9iamVjdC5vbignY2hhbmdlOnByb3AnLCBsaXN0ZW5lcilgLiBZb3UgY2FuIGdldCBhIGxpc3Qgb2YgYWxsXG4gKiBwcm9wZXJ0aWVzIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdCNnZXRQcm9wZXJ0aWVzfS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG9ic2VydmFibGUgcHJvcGVydGllcyBhcmUgc2VwYXJhdGUgZnJvbSBzdGFuZGFyZCBKUyBwcm9wZXJ0aWVzLlxuICogWW91IGNhbiwgZm9yIGV4YW1wbGUsIGdpdmUgeW91ciBtYXAgb2JqZWN0IGEgdGl0bGUgd2l0aFxuICogYG1hcC50aXRsZT0nTmV3IHRpdGxlJ2AgYW5kIHdpdGggYG1hcC5zZXQoJ3RpdGxlJywgJ0Fub3RoZXIgdGl0bGUnKWAuIFRoZVxuICogZmlyc3Qgd2lsbCBiZSBhIGBoYXNPd25Qcm9wZXJ0eWA7IHRoZSBzZWNvbmQgd2lsbCBhcHBlYXIgaW5cbiAqIGBnZXRQcm9wZXJ0aWVzKClgLiBPbmx5IHRoZSBzZWNvbmQgaXMgb2JzZXJ2YWJsZS5cbiAqXG4gKiBQcm9wZXJ0aWVzIGNhbiBiZSBkZWxldGVkIGJ5IHVzaW5nIHRoZSB1bnNldCBtZXRob2QuIEUuZy5cbiAqIG9iamVjdC51bnNldCgnZm9vJykuXG4gKlxuICogQGZpcmVzIE9iamVjdEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlT2JqZWN0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlT2JqZWN0LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgKj59IFtvcHRfdmFsdWVzXSBBbiBvYmplY3Qgd2l0aCBrZXktdmFsdWUgcGFpcnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZU9iamVjdChvcHRfdmFsdWVzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09iamVjdE9uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09iamVjdE9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8vIENhbGwge0BsaW5rIG1vZHVsZTpvbC91dGlsLmdldFVpZH0gdG8gZW5zdXJlIHRoYXQgdGhlIG9yZGVyIG9mIG9iamVjdHMnIGlkcyBpc1xuICAgICAgICAvLyB0aGUgc2FtZSBhcyB0aGUgb3JkZXIgaW4gd2hpY2ggdGhleSB3ZXJlIGNyZWF0ZWQuICBUaGlzIGFsc28gaGVscHMgdG9cbiAgICAgICAgLy8gZW5zdXJlIHRoYXQgb2JqZWN0IHByb3BlcnRpZXMgYXJlIGFsd2F5cyBhZGRlZCBpbiB0aGUgc2FtZSBvcmRlciwgd2hpY2hcbiAgICAgICAgLy8gaGVscHMgbWFueSBKYXZhU2NyaXB0IGVuZ2luZXMgZ2VuZXJhdGUgZmFzdGVyIGNvZGUuXG4gICAgICAgIGdldFVpZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52YWx1ZXNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdF92YWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhvcHRfdmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEByZXR1cm4geyp9IFZhbHVlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVzXyAmJiB0aGlzLnZhbHVlc18uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBsaXN0IG9mIG9iamVjdCBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBMaXN0IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudmFsdWVzXyAmJiBPYmplY3Qua2V5cyh0aGlzLnZhbHVlc18pKSB8fCBbXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbiBvYmplY3Qgb2YgYWxsIHByb3BlcnR5IG5hbWVzIGFuZCB2YWx1ZXMuXG4gICAgICogQHJldHVybiB7T2JqZWN0PHN0cmluZywgKj59IE9iamVjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgYXNzaWduKHt9LCB0aGlzLnZhbHVlc18pKSB8fCB7fTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaGFzIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuaGFzUHJvcGVydGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0geyp9IG9sZFZhbHVlIE9sZCB2YWx1ZS5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoa2V5LCBvbGRWYWx1ZSkge1xuICAgICAgICB2YXIgZXZlbnRUeXBlO1xuICAgICAgICBldmVudFR5cGUgPSBcImNoYW5nZTpcIiArIGtleTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICAgICAgZXZlbnRUeXBlID0gT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5hZGRDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChrZXksIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZTpcIiArIGtleSwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uIChrZXksIGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZTpcIiArIGtleSwgbGlzdGVuZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2lsZW50XSBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgb3B0X3NpbGVudCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gdGhpcy52YWx1ZXNfIHx8ICh0aGlzLnZhbHVlc18gPSB7fSk7XG4gICAgICAgIGlmIChvcHRfc2lsZW50KSB7XG4gICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdmFsdWVzW2tleV07XG4gICAgICAgICAgICB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKG9sZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIGEgY29sbGVjdGlvbiBvZiBrZXktdmFsdWUgcGFpcnMuICBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIGFueSBleGlzdGluZ1xuICAgICAqIHByb3BlcnRpZXMgYW5kIGFkZHMgbmV3IG9uZXMgKGl0IGRvZXMgbm90IHJlbW92ZSBhbnkgZXhpc3RpbmcgcHJvcGVydGllcykuXG4gICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2lsZW50XSBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5zZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHZhbHVlcywgb3B0X3NpbGVudCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICB0aGlzLnNldChrZXksIHZhbHVlc1trZXldLCBvcHRfc2lsZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbHkgYW55IHByb3BlcnRpZXMgZnJvbSBhbm90aGVyIG9iamVjdCB3aXRob3V0IHRyaWdnZXJpbmcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7QmFzZU9iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5hcHBseVByb3BlcnRpZXMgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGlmICghc291cmNlLnZhbHVlc18pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ24odGhpcy52YWx1ZXNfIHx8ICh0aGlzLnZhbHVlc18gPSB7fSksIHNvdXJjZS52YWx1ZXNfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVuc2V0cyBhIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3NpbGVudF0gVW5zZXQgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS51bnNldCA9IGZ1bmN0aW9uIChrZXksIG9wdF9zaWxlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVzXyAmJiBrZXkgaW4gdGhpcy52YWx1ZXNfKSB7XG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgICAgICAgIGlmIChpc0VtcHR5KHRoaXMudmFsdWVzXykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlc18gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFvcHRfc2lsZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoa2V5LCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBCYXNlT2JqZWN0O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBCYXNlT2JqZWN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9Qcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBPUEFDSVRZOiAnb3BhY2l0eScsXG4gICAgVklTSUJMRTogJ3Zpc2libGUnLFxuICAgIEVYVEVOVDogJ2V4dGVudCcsXG4gICAgWl9JTkRFWDogJ3pJbmRleCcsXG4gICAgTUFYX1JFU09MVVRJT046ICdtYXhSZXNvbHV0aW9uJyxcbiAgICBNSU5fUkVTT0xVVElPTjogJ21pblJlc29sdXRpb24nLFxuICAgIE1BWF9aT09NOiAnbWF4Wm9vbScsXG4gICAgTUlOX1pPT006ICdtaW5ab29tJyxcbiAgICBTT1VSQ0U6ICdzb3VyY2UnLFxuICAgIE1BUDogJ21hcCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvcGVydHkuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9Bc3NlcnRpb25FcnJvclxuICovXG5pbXBvcnQgeyBWRVJTSU9OIH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogRXJyb3Igb2JqZWN0IHRocm93biB3aGVuIGFuIGFzc2VydGlvbiBmYWlsZWQuIFRoaXMgaXMgYW4gRUNNQS0yNjIgRXJyb3IsXG4gKiBleHRlbmRlZCB3aXRoIGEgYGNvZGVgIHByb3BlcnR5LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yLlxuICovXG52YXIgQXNzZXJ0aW9uRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFzc2VydGlvbkVycm9yLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlIEVycm9yIGNvZGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3IoY29kZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcGF0aCA9IFZFUlNJT04gPT09ICdsYXRlc3QnID8gVkVSU0lPTiA6ICd2JyArIFZFUlNJT04uc3BsaXQoJy0nKVswXTtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnQXNzZXJ0aW9uIGZhaWxlZC4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vJyArXG4gICAgICAgICAgICBwYXRoICtcbiAgICAgICAgICAgICcvZG9jL2Vycm9ycy8jJyArXG4gICAgICAgICAgICBjb2RlICtcbiAgICAgICAgICAgICcgZm9yIGRldGFpbHMuJztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IgY29kZS4gVGhlIG1lYW5pbmcgb2YgdGhlIGNvZGUgY2FuIGJlIGZvdW5kIG9uXG4gICAgICAgICAqIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvIChyZXBsYWNlIGBsYXRlc3RgIHdpdGhcbiAgICAgICAgICogdGhlIHZlcnNpb24gZm91bmQgaW4gdGhlIE9wZW5MYXllcnMgc2NyaXB0J3MgaGVhZGVyIGNvbW1lbnQgaWYgYSB2ZXJzaW9uXG4gICAgICAgICAqIG90aGVyIHRoYW4gdGhlIGxhdGVzdCBpcyB1c2VkKS5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gICAgICAgIC8vIFJlLWFzc2lnbiBtZXNzYWdlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy80MFxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQXNzZXJ0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgZGVmYXVsdCBBc3NlcnRpb25FcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzc2VydGlvbkVycm9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9hc3NlcnRzXG4gKi9cbmltcG9ydCBBc3NlcnRpb25FcnJvciBmcm9tICcuL0Fzc2VydGlvbkVycm9yLmpzJztcbi8qKlxuICogQHBhcmFtIHsqfSBhc3NlcnRpb24gQXNzZXJ0aW9uIHdlIGV4cGVjdGVkIHRvIGJlIHRydXRoeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvckNvZGUgRXJyb3IgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIGVycm9yQ29kZSkge1xuICAgIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihlcnJvckNvZGUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2VydHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL21hdGhcbiAqL1xuLyoqXG4gKiBUYWtlcyBhIG51bWJlciBhbmQgY2xhbXBzIGl0IHRvIHdpdGhpbiB0aGUgcHJvdmlkZWQgYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBtaW5pbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gdmFsdWUgdG8gcmV0dXJuLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5wdXQgbnVtYmVyIGlmIGl0IGlzIHdpdGhpbiBib3VuZHMsIG9yIHRoZSBuZWFyZXN0XG4gKiAgICAgbnVtYmVyIHdpdGhpbiB0aGUgYm91bmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIGh5cGVyYm9saWMgY29zaW5lIG9mIGEgZ2l2ZW4gbnVtYmVyLiBUaGUgbWV0aG9kIHdpbGwgdXNlIHRoZVxuICogbmF0aXZlIGBNYXRoLmNvc2hgIGZ1bmN0aW9uIGlmIGl0IGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBoeXBlcmJvbGljXG4gKiBjb3NpbmUgd2lsbCBiZSBjYWxjdWxhdGVkIHZpYSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNb3ppbGxhXG4gKiBkZXZlbG9wZXIgbmV0d29yay5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHJldHVybiB7bnVtYmVyfSBIeXBlcmJvbGljIGNvc2luZSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGNvc2ggPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGNvc2g7XG4gICAgaWYgKCdjb3NoJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGguY29zaCBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGNvc2ggPSBNYXRoLmNvc2g7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBjb3NoID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciB5ID0gLyoqIEB0eXBlIHtNYXRofSAqLyAoTWF0aCkuZXhwKHgpO1xuICAgICAgICAgICAgcmV0dXJuICh5ICsgMSAvIHkpIC8gMjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNvc2g7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGJhc2UgMiBsb2dhcml0aG0gb2YgYSBnaXZlbiBudW1iZXIuIFRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlXG4gKiBuYXRpdmUgYE1hdGgubG9nMmAgZnVuY3Rpb24gaWYgaXQgaXMgYXZhaWxhYmxlLCBvdGhlcndpc2UgdGhlIGJhc2UgMlxuICogbG9nYXJpdGhtIHdpbGwgYmUgY2FsY3VsYXRlZCB2aWEgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIE1vemlsbGEgZGV2ZWxvcGVyIG5ldHdvcmsuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEByZXR1cm4ge251bWJlcn0gQmFzZSAyIGxvZ2FyaXRobSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGxvZzIgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGxvZzI7XG4gICAgaWYgKCdsb2cyJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGgubG9nMiBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGxvZzIgPSBNYXRoLmxvZzI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBsb2cyID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmxvZyh4KSAqIE1hdGguTE9HMkU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBsb2cyO1xufSkoKTtcbi8qKlxuICogUmV0dXJucyB0aGUgc3F1YXJlIG9mIHRoZSBjbG9zZXN0IGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50ICh4LCB5KSBhbmQgdGhlXG4gKiBsaW5lIHNlZ21lbnQgKHgxLCB5MSkgdG8gKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgaWYgKGR4ICE9PSAwIHx8IGR5ICE9PSAwKSB7XG4gICAgICAgIHZhciB0ID0gKCh4IC0geDEpICogZHggKyAoeSAtIHkxKSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmICh0ID4gMSkge1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodCA+IDApIHtcbiAgICAgICAgICAgIHgxICs9IGR4ICogdDtcbiAgICAgICAgICAgIHkxICs9IGR5ICogdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKHgsIHksIHgxLCB5MSk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzICh4MSwgeTEpIGFuZCAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5Mikge1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vKipcbiAqIFNvbHZlcyBzeXN0ZW0gb2YgbGluZWFyIGVxdWF0aW9ucyB1c2luZyBHYXVzc2lhbiBlbGltaW5hdGlvbiBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0IEF1Z21lbnRlZCBtYXRyaXggKG4geCBuICsgMSBjb2x1bW4pXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiByb3ctbWFqb3Igb3JkZXIuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgcmVzdWx0aW5nIHZlY3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbHZlTGluZWFyU3lzdGVtKG1hdCkge1xuICAgIHZhciBuID0gbWF0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAvLyBGaW5kIG1heCBpbiB0aGUgaS10aCBjb2x1bW4gKGlnbm9yaW5nIGkgLSAxIGZpcnN0IHJvd3MpXG4gICAgICAgIHZhciBtYXhSb3cgPSBpO1xuICAgICAgICB2YXIgbWF4RWwgPSBNYXRoLmFicyhtYXRbaV1baV0pO1xuICAgICAgICBmb3IgKHZhciByID0gaSArIDE7IHIgPCBuOyByKyspIHtcbiAgICAgICAgICAgIHZhciBhYnNWYWx1ZSA9IE1hdGguYWJzKG1hdFtyXVtpXSk7XG4gICAgICAgICAgICBpZiAoYWJzVmFsdWUgPiBtYXhFbCkge1xuICAgICAgICAgICAgICAgIG1heEVsID0gYWJzVmFsdWU7XG4gICAgICAgICAgICAgICAgbWF4Um93ID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4RWwgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBtYXRyaXggaXMgc2luZ3VsYXJcbiAgICAgICAgfVxuICAgICAgICAvLyBTd2FwIG1heCByb3cgd2l0aCBpLXRoIChjdXJyZW50KSByb3dcbiAgICAgICAgdmFyIHRtcCA9IG1hdFttYXhSb3ddO1xuICAgICAgICBtYXRbbWF4Um93XSA9IG1hdFtpXTtcbiAgICAgICAgbWF0W2ldID0gdG1wO1xuICAgICAgICAvLyBTdWJ0cmFjdCB0aGUgaS10aCByb3cgdG8gbWFrZSBhbGwgdGhlIHJlbWFpbmluZyByb3dzIDAgaW4gdGhlIGktdGggY29sdW1uXG4gICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IG47IGorKykge1xuICAgICAgICAgICAgdmFyIGNvZWYgPSAtbWF0W2pdW2ldIC8gbWF0W2ldW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IGk7IGsgPCBuICsgMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gaykge1xuICAgICAgICAgICAgICAgICAgICBtYXRbal1ba10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0W2pdW2tdICs9IGNvZWYgKiBtYXRbaV1ba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNvbHZlIEF4PWIgZm9yIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4IEEgKG1hdClcbiAgICB2YXIgeCA9IG5ldyBBcnJheShuKTtcbiAgICBmb3IgKHZhciBsID0gbiAtIDE7IGwgPj0gMDsgbC0tKSB7XG4gICAgICAgIHhbbF0gPSBtYXRbbF1bbl0gLyBtYXRbbF1bbF07XG4gICAgICAgIGZvciAodmFyIG0gPSBsIC0gMTsgbSA+PSAwOyBtLS0pIHtcbiAgICAgICAgICAgIG1hdFttXVtuXSAtPSBtYXRbbV1bbF0gKiB4W2xdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4O1xufVxuLyoqXG4gKiBDb252ZXJ0cyByYWRpYW5zIHRvIHRvIGRlZ3JlZXMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5SYWRpYW5zIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIGRlZ3JlZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RlZ3JlZXMoYW5nbGVJblJhZGlhbnMpIHtcbiAgICByZXR1cm4gKGFuZ2xlSW5SYWRpYW5zICogMTgwKSAvIE1hdGguUEk7XG59XG4vKipcbiAqIENvbnZlcnRzIGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJbkRlZ3JlZXMgQW5nbGUgaW4gZGVncmVlcy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gcmFkaWFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFucyhhbmdsZUluRGVncmVlcykge1xuICAgIHJldHVybiAoYW5nbGVJbkRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbW9kdWxvIG9mIGEgLyBiLCBkZXBlbmRpbmcgb24gdGhlIHNpZ24gb2YgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBEaXZpZGVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIERpdmlzb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1vZHVsby5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsbyhhLCBiKSB7XG4gICAgdmFyIHIgPSBhICUgYjtcbiAgICByZXR1cm4gciAqIGIgPCAwID8gciArIGIgOiByO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsaW5lYXJseSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgeCBiZXR3ZWVuIGEgYW5kIGIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGEgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFZhbHVlIHRvIGJlIGludGVycG9sYXRlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJwb2xhdGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVycChhLCBiLCB4KSB7XG4gICAgcmV0dXJuIGEgKyB4ICogKGIgLSBhKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIG51bWJlciB3aXRoIGEgbGltaXRlZCBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGlucHV0IG51bWJlciB3aXRoIGEgbGltaXRlZCBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0ZpeGVkKG4sIGRlY2ltYWxzKSB7XG4gICAgdmFyIGZhY3RvciA9IE1hdGgucG93KDEwLCBkZWNpbWFscyk7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobiAqIGZhY3RvcikgLyBmYWN0b3I7XG59XG4vKipcbiAqIFJvdW5kcyBhIG51bWJlciB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyIHZhbHVlIGNvbnNpZGVyaW5nIG9ubHkgdGhlIGdpdmVuIG51bWJlclxuICogb2YgZGVjaW1hbCBkaWdpdHMgKHdpdGggcm91bmRpbmcgb24gdGhlIGZpbmFsIGRpZ2l0KS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbHMgVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbmVhcmVzdCBpbnRlZ2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm91bmQobiwgZGVjaW1hbHMpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh0b0ZpeGVkKG4sIGRlY2ltYWxzKSk7XG59XG4vKipcbiAqIFJvdW5kcyBhIG51bWJlciB0byB0aGUgbmV4dCBzbWFsbGVyIGludGVnZXIgY29uc2lkZXJpbmcgb25seSB0aGUgZ2l2ZW4gbnVtYmVyXG4gKiBvZiBkZWNpbWFsIGRpZ2l0cyAod2l0aCByb3VuZGluZyBvbiB0aGUgZmluYWwgZGlnaXQpLlxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGlucHV0IG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWNpbWFscyBUaGUgbWF4aW11bSBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBuZXh0IHNtYWxsZXIgaW50ZWdlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsb29yKG4sIGRlY2ltYWxzKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IodG9GaXhlZChuLCBkZWNpbWFscykpO1xufVxuLyoqXG4gKiBSb3VuZHMgYSBudW1iZXIgdG8gdGhlIG5leHQgYmlnZ2VyIGludGVnZXIgY29uc2lkZXJpbmcgb25seSB0aGUgZ2l2ZW4gbnVtYmVyXG4gKiBvZiBkZWNpbWFsIGRpZ2l0cyAod2l0aCByb3VuZGluZyBvbiB0aGUgZmluYWwgZGlnaXQpLlxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGlucHV0IG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWNpbWFscyBUaGUgbWF4aW11bSBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBuZXh0IGJpZ2dlciBpbnRlZ2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2VpbChuLCBkZWNpbWFscykge1xuICAgIHJldHVybiBNYXRoLmNlaWwodG9GaXhlZChuLCBkZWNpbWFscykpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0aC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBMYXllclByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIEEgY3NzIGNvbG9yLCBvciBhIGZ1bmN0aW9uIGNhbGxlZCB3aXRoIGEgdmlldyByZXNvbHV0aW9uIHJldHVybmluZyBhIGNzcyBjb2xvci5cbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfGZ1bmN0aW9uKG51bWJlcik6c3RyaW5nfSBCYWNrZ3JvdW5kQ29sb3JcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6ZXh0ZW50J3wnY2hhbmdlOm1heFJlc29sdXRpb24nfCdjaGFuZ2U6bWF4Wm9vbSd8XG4gKiAgICAnY2hhbmdlOm1pblJlc29sdXRpb24nfCdjaGFuZ2U6bWluWm9vbSd8J2NoYW5nZTpvcGFjaXR5J3wnY2hhbmdlOnZpc2libGUnfCdjaGFuZ2U6ekluZGV4J30gQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxCYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfEJhc2VMYXllck9iamVjdEV2ZW50VHlwZXMsIFJldHVybj59IEJhc2VMYXllck9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7QmFja2dyb3VuZENvbG9yfSBbYmFja2dyb3VuZF0gQmFja2dyb3VuZCBjb2xvciBmb3IgdGhlIGxheWVyLiBJZiBub3Qgc3BlY2lmaWVkLCBubyBiYWNrZ3JvdW5kXG4gKiB3aWxsIGJlIHJlbmRlcmVkLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBOb3RlIHRoYXQgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V9IGFuZCBhbGwgaXRzIHN1YmNsYXNzZXMsIGFueSBwcm9wZXJ0eSBzZXQgaW5cbiAqIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fSBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0LCBzb1xuICogaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgTGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlTGF5ZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VMYXllck9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QmFja2dyb3VuZENvbG9yfGZhbHNlfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYmFja2dyb3VuZF8gPSBvcHRpb25zLmJhY2tncm91bmQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZGVsZXRlIHByb3BlcnRpZXMucHJvcGVydGllcztcbiAgICAgICAgICAgIGFzc2lnbihwcm9wZXJ0aWVzLCBvcHRpb25zLnByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZXSA9XG4gICAgICAgICAgICBvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhY2l0eSA6IDE7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk9QQUNJVFldID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlZJU0lCTEVdID1cbiAgICAgICAgICAgIG9wdGlvbnMudmlzaWJsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52aXNpYmxlIDogdHJ1ZTtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlpfSU5ERVhdID0gb3B0aW9ucy56SW5kZXg7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTl0gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFJlc29sdXRpb24gOiBJbmZpbml0eTtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OXSA9XG4gICAgICAgICAgICBvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluUmVzb2x1dGlvbiA6IDA7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAtSW5maW5pdHk7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFpvb20gOiBJbmZpbml0eTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jbGFzc05hbWVfID1cbiAgICAgICAgICAgIHByb3BlcnRpZXMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1sYXllcic7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmNsYXNzTmFtZTtcbiAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGVfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGJhY2tncm91bmQgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7QmFja2dyb3VuZENvbG9yfGZhbHNlfSBMYXllciBiYWNrZ3JvdW5kLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0QmFja2dyb3VuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IENTUyBjbGFzcyBuYW1lLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGFzc05hbWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IG1lYW50IHRvIGJlIGNhbGxlZCBieSBsYXllcnMgb3IgbGF5ZXIgcmVuZGVyZXJzIGJlY2F1c2UgdGhlIHN0YXRlXG4gICAgICogaXMgaW5jb3JyZWN0IGlmIHRoZSBsYXllciBpcyBpbmNsdWRlZCBpbiBhIGxheWVyIGdyb3VwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X21hbmFnZWRdIExheWVyIGlzIG1hbmFnZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gTGF5ZXIgc3RhdGUuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlID0gZnVuY3Rpb24gKG9wdF9tYW5hZ2VkKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gKi9cbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZV8gfHxcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHtcbiAgICAgICAgICAgICAgICBsYXllcjogdGhpcyxcbiAgICAgICAgICAgICAgICBtYW5hZ2VkOiBvcHRfbWFuYWdlZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdF9tYW5hZ2VkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHZhciB6SW5kZXggPSB0aGlzLmdldFpJbmRleCgpO1xuICAgICAgICBzdGF0ZS5vcGFjaXR5ID0gY2xhbXAoTWF0aC5yb3VuZCh0aGlzLmdldE9wYWNpdHkoKSAqIDEwMCkgLyAxMDAsIDAsIDEpO1xuICAgICAgICBzdGF0ZS5zb3VyY2VTdGF0ZSA9IHRoaXMuZ2V0U291cmNlU3RhdGUoKTtcbiAgICAgICAgc3RhdGUudmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZSgpO1xuICAgICAgICBzdGF0ZS5leHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgICAgICBzdGF0ZS56SW5kZXggPSB6SW5kZXggPT09IHVuZGVmaW5lZCAmJiAhc3RhdGUubWFuYWdlZCA/IEluZmluaXR5IDogekluZGV4O1xuICAgICAgICBzdGF0ZS5tYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRNYXhSZXNvbHV0aW9uKCk7XG4gICAgICAgIHN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heCh0aGlzLmdldE1pblJlc29sdXRpb24oKSwgMCk7XG4gICAgICAgIHN0YXRlLm1pblpvb20gPSB0aGlzLmdldE1pblpvb20oKTtcbiAgICAgICAgc3RhdGUubWF4Wm9vbSA9IHRoaXMuZ2V0TWF4Wm9vbSgpO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IFtvcHRfYXJyYXldIEFycmF5IG9mIGxheWVycyAodG8gYmVcbiAgICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IEFycmF5IG9mIGxheWVycy5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IFtvcHRfc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyXG4gICAgICogICAgIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiAob3B0X3N0YXRlcykge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUge0BsaW5rIG1vZHVsZTpvbC9leHRlbnR+RXh0ZW50IGV4dGVudH0gb2YgdGhlIGxheWVyIG9yIGB1bmRlZmluZWRgIGlmIGl0XG4gICAgICogd2lsbCBiZSB2aXNpYmxlIHJlZ2FyZGxlc3Mgb2YgZXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBUaGUgbGF5ZXIgZXh0ZW50LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuRVhURU5UKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1heFJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNaW5ab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1JTl9aT09NKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1heGltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1pPT00pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIgKGJldHdlZW4gMCBhbmQgMSkuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRPcGFjaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk9QQUNJVFkpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2Ugc3RhdGUuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyIChgdHJ1ZWAgb3IgYGZhbHNlYCkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0VmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuVklTSUJMRSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBaLWluZGV4IG9mIHRoZSBsYXllciwgd2hpY2ggaXMgdXNlZCB0byBvcmRlciBsYXllcnMgYmVmb3JlXG4gICAgICogcmVuZGVyaW5nLiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRaSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuWl9JTkRFWCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgYmFja2dybG91bmQgY29sb3IuXG4gICAgICogQHBhcmFtIHtCYWNrZ3JvdW5kQ29sb3J9IFtvcHRfYmFja2dyb3VuZF0gQmFja2dyb3VuZCBjb2xvci5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldEJhY2tncm91bmQgPSBmdW5jdGlvbiAob3B0X2JhY2tncm91bmQpIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kXyA9IG9wdF9iYWNrZ3JvdW5kO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZXh0ZW50IGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLiAgSWYgYHVuZGVmaW5lZGAsIHRoZSBsYXllclxuICAgICAqIHdpbGwgYmUgdmlzaWJsZSBhdCBhbGwgZXh0ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBleHRlbnQgVGhlIGV4dGVudCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuRVhURU5ULCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtYXhpbXVtIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKG1heFJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTiwgbWF4UmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAobWluUmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OLCBtaW5SZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWF4aW11bSB6b29tIChleGNsdXNpdmUpIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4Wm9vbSBUaGUgbWF4aW11bSB6b29tIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiAobWF4Wm9vbSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BWF9aT09NLCBtYXhab29tKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWluaW11bSB6b29tIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWm9vbSBUaGUgbWluaW11bSB6b29tIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1pblpvb20gPSBmdW5jdGlvbiAobWluWm9vbSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9aT09NLCBtaW5ab29tKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIsIGFsbG93ZWQgdmFsdWVzIHJhbmdlIGZyb20gMCB0byAxLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE9wYWNpdHkgPSBmdW5jdGlvbiAob3BhY2l0eSkge1xuICAgICAgICBhc3NlcnQodHlwZW9mIG9wYWNpdHkgPT09ICdudW1iZXInLCA2NCk7IC8vIExheWVyIG9wYWNpdHkgbXVzdCBiZSBhIG51bWJlclxuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk9QQUNJVFksIG9wYWNpdHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllciAoYHRydWVgIG9yIGBmYWxzZWApLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKHZpc2libGUpIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFLCB2aXNpYmxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBaLWluZGV4IG9mIHRoZSBsYXllciwgd2hpY2ggaXMgdXNlZCB0byBvcmRlciBsYXllcnMgYmVmb3JlIHJlbmRlcmluZy5cbiAgICAgKiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHppbmRleCBUaGUgei1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRaSW5kZXggPSBmdW5jdGlvbiAoemluZGV4KSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuWl9JTkRFWCwgemluZGV4KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVfLmxheWVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VMYXllcjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQmFzZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYmVmb3JlIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlcmVuZGVyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBSRVJFTkRFUjogJ3ByZXJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGJlZm9yZSBsYXllcnMgYXJlIGNvbXBvc2VkLiAgV2hlbiBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAsIHRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZVxuICAgICAqIGEgYGNvbnRleHRgIHNldC4gIFdoZW4gZGlzcGF0Y2hlZCBieSBhIGxheWVyLCB0aGUgZXZlbnQgb2JqZWN0IHdpbGwgaGF2ZSBhIGBjb250ZXh0YCBzZXQuICBPbmx5XG4gICAgICogV2ViR0wgbGF5ZXJzIGN1cnJlbnRseSBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZWNvbXBvc2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJFQ09NUE9TRTogJ3ByZWNvbXBvc2UnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBsYXllcnMgYXJlIGNvbXBvc2VkLiAgV2hlbiBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAsIHRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZVxuICAgICAqIGEgYGNvbnRleHRgIHNldC4gIFdoZW4gZGlzcGF0Y2hlZCBieSBhIGxheWVyLCB0aGUgZXZlbnQgb2JqZWN0IHdpbGwgaGF2ZSBhIGBjb250ZXh0YCBzZXQuICBPbmx5XG4gICAgICogV2ViR0wgbGF5ZXJzIGN1cnJlbnRseSBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3Rjb21wb3NlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPU1RDT01QT1NFOiAncG9zdGNvbXBvc2UnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHJlbmRlcmluZyBpcyBjb21wbGV0ZSwgaS5lLiBhbGwgc291cmNlcyBhbmQgdGlsZXMgaGF2ZVxuICAgICAqIGZpbmlzaGVkIGxvYWRpbmcgZm9yIHRoZSBjdXJyZW50IHZpZXdwb3J0LCBhbmQgYWxsIHRpbGVzIGFyZSBmYWRlZCBpbi5cbiAgICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3JlbmRlcmNvbXBsZXRlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJFTkRFUkNPTVBMRVRFOiAncmVuZGVyY29tcGxldGUnLFxufTtcbi8qKlxuICogQHR5cGVkZWYgeydwb3N0cmVuZGVyJ3wncHJlY29tcG9zZSd8J3Bvc3Rjb21wb3NlJ3wncmVuZGVyY29tcGxldGUnfSBNYXBSZW5kZXJFdmVudFR5cGVzXG4gKi9cbi8qKlxuICogQHR5cGVkZWYgeydwb3N0cmVuZGVyJ3wncHJlcmVuZGVyJ30gTGF5ZXJSZW5kZXJFdmVudFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1N0YXRlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIFN0YXRlIG9mIHRoZSBzb3VyY2UsIG9uZSBvZiAndW5kZWZpbmVkJywgJ2xvYWRpbmcnLCAncmVhZHknIG9yICdlcnJvcicuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBVTkRFRklORUQ6ICd1bmRlZmluZWQnLFxuICAgIExPQURJTkc6ICdsb2FkaW5nJyxcbiAgICBSRUFEWTogJ3JlYWR5JyxcbiAgICBFUlJPUjogJ2Vycm9yJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0xheWVyXG4gKi9cbmltcG9ydCBCYXNlTGF5ZXIgZnJvbSAnLi9CYXNlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZSk6SFRNTEVsZW1lbnR9IFJlbmRlckZ1bmN0aW9uXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAgICdjaGFuZ2U6c291cmNlJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfCdjaGFuZ2U6c291cmNlJ3xcbiAqICAgICBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgUmV0dXJuPn0gTGF5ZXJPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2VUeXBlXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtTb3VyY2VUeXBlfSBbc291cmNlXSBTb3VyY2UgZm9yIHRoaXMgbGF5ZXIuICBJZiBub3QgcHJvdmlkZWQgdG8gdGhlIGNvbnN0cnVjdG9yLFxuICogdGhlIHNvdXJjZSBjYW4gYmUgc2V0IGJ5IGNhbGxpbmcge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciNzZXRTb3VyY2UgbGF5ZXIuc2V0U291cmNlKHNvdXJjZSl9IGFmdGVyXG4gKiBjb25zdHJ1Y3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBNYXAuXG4gKiBAcHJvcGVydHkge1JlbmRlckZ1bmN0aW9ufSBbcmVuZGVyXSBSZW5kZXIgZnVuY3Rpb24uIFRha2VzIHRoZSBmcmFtZSBzdGF0ZSBhcyBpbnB1dCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGFuXG4gKiBIVE1MIGVsZW1lbnQuIFdpbGwgb3ZlcndyaXRlIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBmb3IgdGhlIGxheWVyLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eSwgdGhlIHZhbHVlIGlzIHJvdW5kZWQgdG8gdHdvIGRpZ2l0cyB0byBhcHBlYXIgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBzb3VyY2VTdGF0ZSBTb3VyY2VTdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdmlzaWJsZSBWaXNpYmxlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBtYW5hZ2VkIE1hbmFnZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6SW5kZXggWkluZGV4LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluaW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblpvb20gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFpvb20gTWF4aW11bSB6b29tLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZnJvbSB3aGljaCBhbGwgbGF5ZXIgdHlwZXMgYXJlIGRlcml2ZWQuIFRoaXMgc2hvdWxkIG9ubHkgYmUgaW5zdGFudGlhdGVkXG4gKiBpbiB0aGUgY2FzZSB3aGVyZSBhIGN1c3RvbSBsYXllciBpcyBiZSBhZGRlZCB0byB0aGUgbWFwIHdpdGggYSBjdXN0b20gYHJlbmRlcmAgZnVuY3Rpb24uXG4gKiBTdWNoIGEgZnVuY3Rpb24gY2FuIGJlIHNwZWNpZmllZCBpbiB0aGUgYG9wdGlvbnNgIG9iamVjdCwgYW5kIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhbiBIVE1MIGVsZW1lbnQuXG4gKlxuICogQSB2aXN1YWwgcmVwcmVzZW50YXRpb24gb2YgcmFzdGVyIG9yIHZlY3RvciBtYXAgZGF0YS5cbiAqIExheWVycyBncm91cCB0b2dldGhlciB0aG9zZSBwcm9wZXJ0aWVzIHRoYXQgcGVydGFpbiB0byBob3cgdGhlIGRhdGEgaXMgdG8gYmVcbiAqIGRpc3BsYXllZCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBzb3VyY2Ugb2YgdGhhdCBkYXRhLlxuICpcbiAqIExheWVycyBhcmUgdXN1YWxseSBhZGRlZCB0byBhIG1hcCB3aXRoIHtAbGluayBpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdCNhZGRMYXllciBtYXAuYWRkTGF5ZXIoKX0uIENvbXBvbmVudHNcbiAqIGxpa2Uge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmF3fkRyYXd9IHVzZSB1bm1hbmFnZWQgbGF5ZXJzXG4gKiBpbnRlcm5hbGx5LiBUaGVzZSB1bm1hbmFnZWQgbGF5ZXJzIGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcCB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciNzZXRNYXB9IGluc3RlYWQuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IGZvciBwZXJmb3JtYW5jZSByZWFzb25zIHNldmVyYWwgbGF5ZXJzIG1pZ2h0IGdldCByZW5kZXJlZCB0b1xuICogdGhlIHNhbWUgSFRNTCBlbGVtZW50LCB3aGljaCB3aWxsIGNhdXNlIHtAbGluayBpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdCNmb3JFYWNoTGF5ZXJBdFBpeGVsIG1hcC5mb3JFYWNoTGF5ZXJBdFBpeGVsKCl9IHRvXG4gKiBnaXZlIGZhbHNlIHBvc2l0aXZlcy4gVG8gYXZvaWQgdGhpcywgYXBwbHkgZGlmZmVyZW50IGBjbGFzc05hbWVgIHByb3BlcnRpZXMgdG8gdGhlXG4gKiBsYXllcnMgYXQgY3JlYXRpb24gdGltZS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50I3ByZXJlbmRlclxuICogQGZpcmVzIGltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5SZW5kZXJFdmVudCNwb3N0cmVuZGVyXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZVR5cGVcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gUmVuZGVyZXJUeXBlXG4gKiBAYXBpXG4gKi9cbnZhciBMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPFNvdXJjZVR5cGU+fSBvcHRpb25zIExheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGF5ZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgYmFzZU9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMuc291cmNlO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0xheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBQcmVjb21wb3NlS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBSZW5kZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1JlbmRlcmVyVHlwZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICAgIC8vIE92ZXJ3cml0ZSBkZWZhdWx0IHJlbmRlciBtZXRob2Qgd2l0aCBhIGN1c3RvbSBvbmVcbiAgICAgICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5tYXApIHtcbiAgICAgICAgICAgIF90aGlzLnNldE1hcChvcHRpb25zLm1hcCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsIF90aGlzLmhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyk7XG4gICAgICAgIHZhciBzb3VyY2UgPSBvcHRpb25zLnNvdXJjZVxuICAgICAgICAgICAgPyAvKiogQHR5cGUge1NvdXJjZVR5cGV9ICovIChvcHRpb25zLnNvdXJjZSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgX3RoaXMuc2V0U291cmNlKHNvdXJjZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBbb3B0X2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgYXJyYXkucHVzaCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gW29wdF9zdGF0ZXNdIE9wdGlvbmFsIGxpc3Qgb2YgbGF5ZXIgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IExpc3Qgb2YgbGF5ZXIgc3RhdGVzLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgdmFyIHN0YXRlcyA9IG9wdF9zdGF0ZXMgPyBvcHRfc3RhdGVzIDogW107XG4gICAgICAgIHN0YXRlcy5wdXNoKHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGF5ZXIgc291cmNlLlxuICAgICAqIEByZXR1cm4ge1NvdXJjZVR5cGV9IFRoZSBsYXllciBzb3VyY2UgKG9yIGBudWxsYCBpZiBub3QgeWV0IHNldCkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7U291cmNlVHlwZX0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuU09VUkNFKSkgfHwgbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2Ugc3RhdGUuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5nZXRTb3VyY2UoKTtcbiAgICAgICAgcmV0dXJuICFzb3VyY2UgPyBTb3VyY2VTdGF0ZS5VTkRFRklORUQgOiBzb3VyY2UuZ2V0U3RhdGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmhhbmRsZVNvdXJjZUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuc291cmNlQ2hhbmdlS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBsaXN0ZW4oc291cmNlLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVNvdXJjZUNoYW5nZV8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbFwiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlXCIpLmRlZmF1bHQ+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGhcbiAgICAgKiBhbiBhcnJheSBvZiBmZWF0dXJlcy5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiByZXNvbHZlKFtdKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmdldEZlYXR1cmVzKHBpeGVsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluIGNoYXJnZSB0byBtYW5hZ2UgdGhlIHJlbmRlcmluZyBvZiB0aGUgbGF5ZXIuIE9uZSBsYXllciB0eXBlIGlzXG4gICAgICogYm91bmRlZCB3aXRoIG9uZSBsYXllciByZW5kZXJlci5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHdoaWNoIHRoZSByZW5kZXJlciBtYXkgKGJ1dCBuZWVkIG5vdCkgdXNlXG4gICAgICogZm9yIHJlbmRlcmluZyBpdHMgY29udGVudC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSB0aGlzLmdldFJlbmRlcmVyKCk7XG4gICAgICAgIGlmIChsYXllclJlbmRlcmVyLnByZXBhcmVGcmFtZShmcmFtZVN0YXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxheWVyUmVuZGVyZXIucmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRm9yIHVzZSBpbnNpZGUgdGhlIGxpYnJhcnkgb25seS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5zZXRNYXBJbnRlcm5hbCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVAsIG1hcCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGb3IgdXNlIGluc2lkZSB0aGUgbGlicmFyeSBvbmx5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldE1hcEludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NQVApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbGF5ZXIgdG8gYmUgcmVuZGVyZWQgb24gdG9wIG9mIG90aGVyIGxheWVycyBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsXG4gICAgICogbm90IG1hbmFnZSB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbiwgYW5kIHRoZSBjYWxsYmFjayBpblxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNmb3JFYWNoTGF5ZXJBdFBpeGVsfSB3aWxsIHJlY2VpdmUgYG51bGxgIGFzIGxheWVyLiBUaGlzXG4gICAgICogaXMgdXNlZnVsIGZvciB0ZW1wb3JhcnkgbGF5ZXJzLiBUbyByZW1vdmUgYW4gdW5tYW5hZ2VkIGxheWVyIGZyb20gdGhlIG1hcCxcbiAgICAgKiB1c2UgYCNzZXRNYXAobnVsbClgLlxuICAgICAqXG4gICAgICogVG8gYWRkIHRoZSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAsIHVzZVxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNhZGRMYXllcn0gaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBQcmVjb21wb3NlS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXBSZW5kZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubWFwUmVuZGVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBsaXN0ZW4obWFwLCBSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJFdmVudCA9IFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChldnQpO1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gcmVuZGVyRXZlbnQuZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBBIGxheWVyIGNhbiBvbmx5IGJlIGFkZGVkIHRvIHRoZSBtYXAgb25jZS4gVXNlIGVpdGhlciBgbGF5ZXIuc2V0TWFwKClgIG9yIGBtYXAuYWRkTGF5ZXIoKWAsIG5vdCBib3RoLlxuICAgICAgICAgICAgICAgIGFzc2VydCghbGF5ZXJTdGF0ZXNBcnJheS5zb21lKGZ1bmN0aW9uIChhcnJheUxheWVyU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5TGF5ZXJTdGF0ZS5sYXllciA9PT0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgICAgICB9KSwgNjcpO1xuICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzQXJyYXkucHVzaChsYXllclN0YXRlKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tYXBSZW5kZXJLZXlfID0gbGlzdGVuKHRoaXMsIEV2ZW50VHlwZS5DSEFOR0UsIG1hcC5yZW5kZXIsIG1hcCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtTb3VyY2VUeXBlfSBzb3VyY2UgVGhlIGxheWVyIHNvdXJjZS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0U291cmNlID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlNPVVJDRSwgc291cmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7UmVuZGVyZXJUeXBlfSBUaGUgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaGFzIGEgcmVuZGVyZXIuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmhhc1JlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnJlbmRlcmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHJlbmRlcmVyIGZvciB0aGlzIGxheWVyLlxuICAgICAqIEByZXR1cm4ge1JlbmRlcmVyVHlwZX0gQSBsYXllciByZW5kZXJlci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcG9zZSgpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVuZGVyZXJfO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U291cmNlKG51bGwpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyO1xufShCYXNlTGF5ZXIpKTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgbGF5ZXIgaXMgdmlzaWJsZSBhbmQgaWYgdGhlIHByb3ZpZGVkIHZpZXcgc3RhdGVcbiAqIGhhcyByZXNvbHV0aW9uIGFuZCB6b29tIGxldmVscyB0aGF0IGFyZSBpbiByYW5nZSBvZiB0aGUgbGF5ZXIncyBtaW4vbWF4LlxuICogQHBhcmFtIHtTdGF0ZX0gbGF5ZXJTdGF0ZSBMYXllciBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5TdGF0ZX0gdmlld1N0YXRlIFZpZXcgc3RhdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaXMgdmlzaWJsZSBhdCB0aGUgZ2l2ZW4gdmlldyBzdGF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpIHtcbiAgICBpZiAoIWxheWVyU3RhdGUudmlzaWJsZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgaWYgKHJlc29sdXRpb24gPCBsYXllclN0YXRlLm1pblJlc29sdXRpb24gfHxcbiAgICAgICAgcmVzb2x1dGlvbiA+PSBsYXllclN0YXRlLm1heFJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgem9vbSA9IHZpZXdTdGF0ZS56b29tO1xuICAgIHJldHVybiB6b29tID4gbGF5ZXJTdGF0ZS5taW5ab29tICYmIHpvb20gPD0gbGF5ZXJTdGF0ZS5tYXhab29tO1xufVxuZXhwb3J0IGRlZmF1bHQgTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVGlsZVByb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFBSRUxPQUQ6ICdwcmVsb2FkJyxcbiAgICBVU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUjogJ3VzZUludGVyaW1UaWxlc09uRXJyb3InLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVQcm9wZXJ0eS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VUaWxlXG4gKi9cbmltcG9ydCBMYXllciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBUaWxlUHJvcGVydHkgZnJvbSAnLi9UaWxlUHJvcGVydHkuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAgICdjaGFuZ2U6c291cmNlJ3wnY2hhbmdlOnByZWxvYWQnfCdjaGFuZ2U6dXNlSW50ZXJpbVRpbGVzT25FcnJvcicsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgJ2NoYW5nZTpzb3VyY2UnfCdjaGFuZ2U6cHJlbG9hZCd8J2NoYW5nZTp1c2VJbnRlcmltVGlsZXNPbkVycm9yJ3xpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgUmV0dXJuPn0gQmFzZVRpbGVMYXllck9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJlbG9hZD0wXSBQcmVsb2FkLiBMb2FkIGxvdy1yZXNvbHV0aW9uIHRpbGVzIHVwIHRvIGBwcmVsb2FkYCBsZXZlbHMuIGAwYFxuICogbWVhbnMgbm8gcHJlbG9hZGluZy5cbiAqIEBwcm9wZXJ0eSB7VGlsZVNvdXJjZVR5cGV9IFtzb3VyY2VdIFNvdXJjZSBmb3IgdGhpcyBsYXllci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIFNldHMgdGhlIGxheWVyIGFzIG92ZXJsYXkgb24gYSBtYXAuIFRoZSBtYXAgd2lsbCBub3QgbWFuYWdlXG4gKiB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbiwgYW5kIHRoZSBsYXllciB3aWxsIGJlIHJlbmRlcmVkIG9uIHRvcC4gVGhpcyBpcyB1c2VmdWwgZm9yXG4gKiB0ZW1wb3JhcnkgbGF5ZXJzLiBUaGUgc3RhbmRhcmQgd2F5IHRvIGFkZCBhIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCBpcyB0b1xuICogdXNlIHtAbGluayBpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdCNhZGRMYXllciBtYXAuYWRkTGF5ZXIoKX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VJbnRlcmltVGlsZXNPbkVycm9yPXRydWVdIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBGb3IgbGF5ZXIgc291cmNlcyB0aGF0IHByb3ZpZGUgcHJlLXJlbmRlcmVkLCB0aWxlZCBpbWFnZXMgaW4gZ3JpZHMgdGhhdCBhcmVcbiAqIG9yZ2FuaXplZCBieSB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBSZW5kZXJlclR5cGVcbiAqIEBleHRlbmRzIHtMYXllcjxUaWxlU291cmNlVHlwZSwgUmVuZGVyZXJUeXBlPn1cbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VUaWxlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VUaWxlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zPFRpbGVTb3VyY2VUeXBlPn0gW29wdF9vcHRpb25zXSBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZVRpbGVMYXllcihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnByZWxvYWQ7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlVGlsZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIF90aGlzLnNldFByZWxvYWQob3B0aW9ucy5wcmVsb2FkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByZWxvYWQgOiAwKTtcbiAgICAgICAgX3RoaXMuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcihvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3IgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3JcbiAgICAgICAgICAgIDogdHJ1ZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuZ2V0UHJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5zZXRQcmVsb2FkID0gZnVuY3Rpb24gKHByZWxvYWQpIHtcbiAgICAgICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQsIHByZWxvYWQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogV2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB3ZSB1c2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUludGVyaW1UaWxlc09uRXJyb3IgVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uICh1c2VJbnRlcmltVGlsZXNPbkVycm9yKSB7XG4gICAgICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUiwgdXNlSW50ZXJpbVRpbGVzT25FcnJvcik7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZVRpbGVMYXllcjtcbn0oTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VUaWxlTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlVGlsZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL0xheWVyXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4uL09ic2VydmFibGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyVHlwZVxuICovXG52YXIgTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gbGF5ZXIgTGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGF5ZXJSZW5kZXJlcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8gPSBfdGhpcy5oYW5kbGVJbWFnZUNoYW5nZV8uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtMYXllclR5cGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllcl8gPSBsYXllcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvY2FudmFzL0V4ZWN1dG9yR3JvdXBcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlY2x1dHRlckV4ZWN1dG9yR3JvdXAgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBsYXllciBsZXZlbCBoaXQgZGV0ZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoXG4gICAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZXBhcmVGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHZvaWR9IElmIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgICAgICBpZiAoIXRpbGVzW3pvb21dKSB7XG4gICAgICAgICAgICB0aWxlc1t6b29tXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRpbGVzW3pvb21dW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gc291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbiBvZiB0aGUgdGlsZXMuXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IEEgZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggYSB6b29tIGxldmVsIGFuZCBhIHRpbGUgcmFuZ2UgdG8gYWRkIGxvYWRlZCB0aWxlcyB0byB0aGUgbG9va3VwLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jcmVhdGVMb2FkZWRUaWxlRmluZGVyID0gZnVuY3Rpb24gKHNvdXJjZSwgcHJvamVjdGlvbiwgdGlsZXMpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBsb2FkZWQuXG4gICAgICAgICAqIEB0aGlzIHtMYXllclJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHpvb20sIHRpbGVSYW5nZSkge1xuICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gdGhpcy5sb2FkZWRUaWxlQ2FsbGJhY2suYmluZCh0aGlzLCB0aWxlcywgem9vbSk7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlLmZvckVhY2hMb2FkZWRUaWxlKHByb2plY3Rpb24sIHpvb20sIHRpbGVSYW5nZSwgY2FsbGJhY2spO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL01hcC5qc1wiKS5IaXRNYXRjaDxUPj59IG1hdGNoZXMgVGhlIGhpdCBkZXRlY3RlZCBtYXRjaGVzIHdpdGggdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBtYXRjaGVzKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fSBUaGUgcmVzdWx0LiAgSWYgdGhlcmUgaXMgbm8gZGF0YSBhdCB0aGUgcGl4ZWxcbiAgICAgKiAgICBsb2NhdGlvbiwgbnVsbCB3aWxsIGJlIHJldHVybmVkLiAgSWYgdGhlcmUgaXMgZGF0YSwgYnV0IHBpeGVsIHZhbHVlcyBjYW5ub3QgYmVcbiAgICAgKiAgICByZXR1cm5lZCwgYW5kIGVtcHR5IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RGF0YUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0xheWVyVHlwZX0gTGF5ZXIuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheWVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYWN0aW9uIG5lY2Vzc2FyeSB0byBnZXQgdGhlIGxheWVyIHJlbmRlcmVkIGFmdGVyIG5ldyBmb250cyBoYXZlIGxvYWRlZFxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZUZvbnRzQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBJbWFnZSBjaGFuZ2UgZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUNoYW5nZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIGltYWdlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9JbWFnZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgaWYgKGltYWdlLmdldFN0YXRlKCkgPT09IEltYWdlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIGlmIG5vdCBhbHJlYWR5IGxvYWRlZCwgYW5kIHJlZ2lzdGVyIHRoZSBpbWFnZSBjaGFuZ2VcbiAgICAgKiBsaXN0ZW5lciBpZiBuZWVkZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9JbWFnZUJhc2UuanNcIikuZGVmYXVsdH0gaW1hZ2UgSW1hZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbWFnZSBpcyBhbHJlYWR5IGxvYWRlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmxvYWRJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB2YXIgaW1hZ2VTdGF0ZSA9IGltYWdlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmIChpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuTE9BREVEICYmIGltYWdlU3RhdGUgIT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIGltYWdlLmxvYWQoKTtcbiAgICAgICAgICAgIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCkgJiYgbGF5ZXIuZ2V0U291cmNlU3RhdGUoKSA9PSBTb3VyY2VTdGF0ZS5SRUFEWSkge1xuICAgICAgICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXJSZW5kZXJlcjtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVN0YXRlXG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIElETEU6IDAsXG4gICAgTE9BRElORzogMSxcbiAgICBMT0FERUQ6IDIsXG4gICAgRVJST1I6IDMsXG4gICAgRU1QVFk6IDQsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VTdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50XG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbnZhciBSZW5kZXJFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVuZGVyRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBbb3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybV0gVHJhbnNmb3JtIGZvclxuICAgICAqICAgICBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBbb3B0X2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7PyhDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8V2ViR0xSZW5kZXJpbmdDb250ZXh0KX0gW29wdF9jb250ZXh0XSBDb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlbmRlckV2ZW50KHR5cGUsIG9wdF9pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIG9wdF9mcmFtZVN0YXRlLCBvcHRfY29udGV4dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhbnNmb3JtIGZyb20gQ1NTIHBpeGVscyAocmVsYXRpdmUgdG8gdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgbWFwIHZpZXdwb3J0KVxuICAgICAgICAgKiB0byByZW5kZXJlZCBwaXhlbHMgb24gdGhpcyBldmVudCdzIGBjb250ZXh0YC4gT25seSBhdmFpbGFibGUgd2hlbiBhIENhbnZhcyByZW5kZXJlciBpcyB1c2VkLCBudWxsIG90aGVyd2lzZS5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gPSBvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCByZW5kZXIgZnJhbWUgc3RhdGUuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZXx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZyYW1lU3RhdGUgPSBvcHRfZnJhbWVTdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbnZhcyBjb250ZXh0LiBOb3QgYXZhaWxhYmxlIHdoZW4gdGhlIGV2ZW50IGlzIGRpc3BhdGNoZWQgYnkgdGhlIG1hcC4gRm9yIENhbnZhcyAyRCBsYXllcnMsXG4gICAgICAgICAqIHRoZSBjb250ZXh0IHdpbGwgYmUgdGhlIDJEIHJlbmRlcmluZyBjb250ZXh0LiAgRm9yIFdlYkdMIGxheWVycywgdGhlIGNvbnRleHQgd2lsbCBiZSB0aGUgV2ViR0xcbiAgICAgICAgICogY29udGV4dC5cbiAgICAgICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRHxXZWJHTFJlbmRlcmluZ0NvbnRleHR8dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0ID0gb3B0X2NvbnRleHQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFJlbmRlckV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IGRlZmF1bHQgUmVuZGVyRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaGFzXG4gKi9cbnZhciB1YSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBuYXZpZ2F0b3IudXNlckFnZW50ICE9PSAndW5kZWZpbmVkJ1xuICAgID8gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpXG4gICAgOiAnJztcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIEZpcmVmb3ggYXMgYnJvd3Nlci5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIEZJUkVGT1ggPSB1YS5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggU2FmYXJpIGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBTQUZBUkkgPSB1YS5pbmRleE9mKCdzYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignY2hyb20nKSA9PSAtMTtcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgV2ViS2l0IGVuZ2luZS5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFdFQktJVCA9IHVhLmluZGV4T2YoJ3dlYmtpdCcpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdlZGdlJykgPT0gLTE7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIE1hYyBhcyBwbGF0Zm9ybS5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIE1BQyA9IHVhLmluZGV4T2YoJ21hY2ludG9zaCcpICE9PSAtMTtcbi8qKlxuICogVGhlIHJhdGlvIGJldHdlZW4gcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzXG4gKiAoZGlwcykgb24gdGhlIGRldmljZSAoYHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvYCkuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgREVWSUNFX1BJWEVMX1JBVElPID0gdHlwZW9mIGRldmljZVBpeGVsUmF0aW8gIT09ICd1bmRlZmluZWQnID8gZGV2aWNlUGl4ZWxSYXRpbyA6IDE7XG4vKipcbiAqIFRoZSBleGVjdXRpb24gY29udGV4dCBpcyBhIHdvcmtlciB3aXRoIE9mZnNjcmVlbkNhbnZhcyBhdmFpbGFibGUuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlOyAvL2VzbGludC1kaXNhYmxlLWxpbmVcbi8qKlxuICogSW1hZ2UucHJvdG90eXBlLmRlY29kZSgpIGlzIHN1cHBvcnRlZC5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIElNQUdFX0RFQ09ERSA9IHR5cGVvZiBJbWFnZSAhPT0gJ3VuZGVmaW5lZCcgJiYgSW1hZ2UucHJvdG90eXBlLmRlY29kZTtcbi8qKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXNzaXZlID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcGFzc2l2ZSA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ18nLCBudWxsLCBvcHRpb25zKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ18nLCBudWxsLCBvcHRpb25zKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIHBhc3NpdmUgbm90IHN1cHBvcnRlZFxuICAgIH1cbiAgICByZXR1cm4gcGFzc2l2ZTtcbn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RyYW5zZm9ybVxuICovXG5pbXBvcnQgeyBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IHJlcHJlc2VudGluZyBhbiBhZmZpbmUgMmQgdHJhbnNmb3JtYXRpb24gZm9yIHVzZSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3RyYW5zZm9ybX0gZnVuY3Rpb25zLiBUaGUgYXJyYXkgaGFzIDYgZWxlbWVudHMuXG4gKiBAdHlwZWRlZiB7IUFycmF5PG51bWJlcj59IFRyYW5zZm9ybVxuICogQGFwaVxuICovXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucy4gVGhlIGZ1bmN0aW9ucyB3b3JrIG9uIGFuXG4gKiBhcnJheSBvZiA2IGVsZW1lbnRzLiBUaGUgZWxlbWVudCBvcmRlciBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFtTVkdNYXRyaXhcbiAqIGludGVyZmFjZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NWR01hdHJpeCkgYW5kIGlzXG4gKiBhIHN1YnNldCAoZWxlbWVudHMgYSB0byBmKSBvZiBhIDPDlzMgbWF0cml4OlxuICogYGBgXG4gKiBbIGEgYyBlIF1cbiAqIFsgYiBkIGYgXVxuICogWyAwIDAgMSBdXG4gKiBgYGBcbiAqL1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge1RyYW5zZm9ybX1cbiAqL1xudmFyIHRtcF8gPSBuZXcgQXJyYXkoNik7XG4vKipcbiAqIENyZWF0ZSBhbiBpZGVudGl0eSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBJZGVudGl0eSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cbi8qKlxuICogUmVzZXRzIHRoZSBnaXZlbiB0cmFuc2Zvcm0gdG8gYW4gaWRlbnRpdHkgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXQodHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHNldCh0cmFuc2Zvcm0sIDEsIDAsIDAsIDEsIDAsIDApO1xufVxuLyoqXG4gKiBNdWx0aXBseSB0aGUgdW5kZXJseWluZyBtYXRyaWNlcyBvZiB0d28gdHJhbnNmb3JtcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgaW5cbiAqIHRoZSBmaXJzdCB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDEuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDIuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIG11bHRpcGxpZWQgd2l0aCB0cmFuc2Zvcm0yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICAgIHZhciBhMSA9IHRyYW5zZm9ybTFbMF07XG4gICAgdmFyIGIxID0gdHJhbnNmb3JtMVsxXTtcbiAgICB2YXIgYzEgPSB0cmFuc2Zvcm0xWzJdO1xuICAgIHZhciBkMSA9IHRyYW5zZm9ybTFbM107XG4gICAgdmFyIGUxID0gdHJhbnNmb3JtMVs0XTtcbiAgICB2YXIgZjEgPSB0cmFuc2Zvcm0xWzVdO1xuICAgIHZhciBhMiA9IHRyYW5zZm9ybTJbMF07XG4gICAgdmFyIGIyID0gdHJhbnNmb3JtMlsxXTtcbiAgICB2YXIgYzIgPSB0cmFuc2Zvcm0yWzJdO1xuICAgIHZhciBkMiA9IHRyYW5zZm9ybTJbM107XG4gICAgdmFyIGUyID0gdHJhbnNmb3JtMls0XTtcbiAgICB2YXIgZjIgPSB0cmFuc2Zvcm0yWzVdO1xuICAgIHRyYW5zZm9ybTFbMF0gPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgICB0cmFuc2Zvcm0xWzFdID0gYjEgKiBhMiArIGQxICogYjI7XG4gICAgdHJhbnNmb3JtMVsyXSA9IGExICogYzIgKyBjMSAqIGQyO1xuICAgIHRyYW5zZm9ybTFbM10gPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgICB0cmFuc2Zvcm0xWzRdID0gYTEgKiBlMiArIGMxICogZjIgKyBlMTtcbiAgICB0cmFuc2Zvcm0xWzVdID0gYjEgKiBlMiArIGQxICogZjIgKyBmMTtcbiAgICByZXR1cm4gdHJhbnNmb3JtMTtcbn1cbi8qKlxuICogU2V0IHRoZSB0cmFuc2Zvcm0gY29tcG9uZW50cyBhLWYgb24gYSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgYSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBiIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGMgVGhlIGMgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZCBUaGUgZCBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlIFRoZSBlIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGYgVGhlIGYgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBNYXRyaXggd2l0aCB0cmFuc2Zvcm0gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh0cmFuc2Zvcm0sIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0cmFuc2Zvcm1bMF0gPSBhO1xuICAgIHRyYW5zZm9ybVsxXSA9IGI7XG4gICAgdHJhbnNmb3JtWzJdID0gYztcbiAgICB0cmFuc2Zvcm1bM10gPSBkO1xuICAgIHRyYW5zZm9ybVs0XSA9IGU7XG4gICAgdHJhbnNmb3JtWzVdID0gZjtcbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBTZXQgdHJhbnNmb3JtIG9uIG9uZSBtYXRyaXggZnJvbSBhbm90aGVyIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSB0by5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSBmcm9tLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSB3aXRoIHRyYW5zZm9ybSBmcm9tIHRyYW5zZm9ybTIgYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21BcnJheSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gICAgdHJhbnNmb3JtMVswXSA9IHRyYW5zZm9ybTJbMF07XG4gICAgdHJhbnNmb3JtMVsxXSA9IHRyYW5zZm9ybTJbMV07XG4gICAgdHJhbnNmb3JtMVsyXSA9IHRyYW5zZm9ybTJbMl07XG4gICAgdHJhbnNmb3JtMVszXSA9IHRyYW5zZm9ybTJbM107XG4gICAgdHJhbnNmb3JtMVs0XSA9IHRyYW5zZm9ybTJbNF07XG4gICAgdHJhbnNmb3JtMVs1XSA9IHRyYW5zZm9ybTJbNV07XG4gICAgcmV0dXJuIHRyYW5zZm9ybTE7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIGNvb3JkaW5hdGUgd2l0aCB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHJldHVybmluZyB0aGVcbiAqIHJlc3VsdGluZywgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZS4gVGhlIGNvb3JkaW5hdGUgd2lsbCBiZSBtb2RpZmllZCBpbi1wbGFjZS5cbiAqXG4gKiBAcGFyYW0ge1RyYW5zZm9ybX0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSByZXR1cm4gY29vcmRpbmF0ZSBzbyB0aGF0IG9wZXJhdGlvbnMgY2FuIGJlXG4gKiAgICAgY2hhaW5lZCB0b2dldGhlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5KHRyYW5zZm9ybSwgY29vcmRpbmF0ZSkge1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgY29vcmRpbmF0ZVswXSA9IHRyYW5zZm9ybVswXSAqIHggKyB0cmFuc2Zvcm1bMl0gKiB5ICsgdHJhbnNmb3JtWzRdO1xuICAgIGNvb3JkaW5hdGVbMV0gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQXBwbGllcyByb3RhdGlvbiB0byB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgcm90YXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUodHJhbnNmb3JtLCBhbmdsZSkge1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgY29zLCBzaW4sIC1zaW4sIGNvcywgMCwgMCkpO1xufVxuLyoqXG4gKiBBcHBsaWVzIHNjYWxlIHRvIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodHJhbnNmb3JtLCB4LCB5KSB7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIHgsIDAsIDAsIHksIDAsIDApKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHNjYWxlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBvdmVyd3JpdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFNjYWxlIGZhY3RvciB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHNjYWxlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTY2FsZSh0YXJnZXQsIHgsIHkpIHtcbiAgICByZXR1cm4gc2V0KHRhcmdldCwgeCwgMCwgMCwgeSwgMCwgMCk7XG59XG4vKipcbiAqIEFwcGxpZXMgdHJhbnNsYXRpb24gdG8gdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeCBUcmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5IFRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgdHJhbnNsYXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUodHJhbnNmb3JtLCBkeCwgZHkpIHtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgMSwgMCwgMCwgMSwgZHgsIGR5KSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSAod2lsbCBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBjb21wb3NpdGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSh0cmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB0cmFuc2Zvcm1bMF0gPSBzeCAqIGNvcztcbiAgICB0cmFuc2Zvcm1bMV0gPSBzeSAqIHNpbjtcbiAgICB0cmFuc2Zvcm1bMl0gPSAtc3ggKiBzaW47XG4gICAgdHJhbnNmb3JtWzNdID0gc3kgKiBjb3M7XG4gICAgdHJhbnNmb3JtWzRdID0gZHgyICogc3ggKiBjb3MgLSBkeTIgKiBzeCAqIHNpbiArIGR4MTtcbiAgICB0cmFuc2Zvcm1bNV0gPSBkeDIgKiBzeSAqIHNpbiArIGR5MiAqIHN5ICogY29zICsgZHkxO1xuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLiBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybVxuICogc3RyaW5nIGNhbiBiZSBhcHBsaWVkIGFzIGB0cmFuc2Zvcm1gIHByb3BlcnR5IG9mIGFuIEhUTUxFbGVtZW50J3Mgc3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBvc2l0ZSBjc3MgdHJhbnNmb3JtLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZUNzc1RyYW5zZm9ybShkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpIHtcbiAgICByZXR1cm4gdG9TdHJpbmcoY29tcG9zZShjcmVhdGUoKSwgZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSk7XG59XG4vKipcbiAqIEludmVydCB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBzb3VyY2UgVGhlIHNvdXJjZSB0cmFuc2Zvcm0gdG8gaW52ZXJ0LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGludmVydGVkIChzb3VyY2UpIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmVydChzb3VyY2UpIHtcbiAgICByZXR1cm4gbWFrZUludmVyc2Uoc291cmNlLCBzb3VyY2UpO1xufVxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBiZSBzZXQgYXMgdGhlIGludmVyc2Ugb2ZcbiAqICAgICB0aGUgc291cmNlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gc291cmNlIFRoZSBzb3VyY2UgdHJhbnNmb3JtIHRvIGludmVydC5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBpbnZlcnRlZCAodGFyZ2V0KSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlSW52ZXJzZSh0YXJnZXQsIHNvdXJjZSkge1xuICAgIHZhciBkZXQgPSBkZXRlcm1pbmFudChzb3VyY2UpO1xuICAgIGFzc2VydChkZXQgIT09IDAsIDMyKTsgLy8gVHJhbnNmb3JtYXRpb24gbWF0cml4IGNhbm5vdCBiZSBpbnZlcnRlZFxuICAgIHZhciBhID0gc291cmNlWzBdO1xuICAgIHZhciBiID0gc291cmNlWzFdO1xuICAgIHZhciBjID0gc291cmNlWzJdO1xuICAgIHZhciBkID0gc291cmNlWzNdO1xuICAgIHZhciBlID0gc291cmNlWzRdO1xuICAgIHZhciBmID0gc291cmNlWzVdO1xuICAgIHRhcmdldFswXSA9IGQgLyBkZXQ7XG4gICAgdGFyZ2V0WzFdID0gLWIgLyBkZXQ7XG4gICAgdGFyZ2V0WzJdID0gLWMgLyBkZXQ7XG4gICAgdGFyZ2V0WzNdID0gYSAvIGRldDtcbiAgICB0YXJnZXRbNF0gPSAoYyAqIGYgLSBkICogZSkgLyBkZXQ7XG4gICAgdGFyZ2V0WzVdID0gLShhICogZiAtIGIgKiBlKSAvIGRldDtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZXRlcm1pbmFudCBvZiB0aGUgZ2l2ZW4gbWF0cml4LlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7bnVtYmVyfSBEZXRlcm1pbmFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KG1hdCkge1xuICAgIHJldHVybiBtYXRbMF0gKiBtYXRbM10gLSBtYXRbMV0gKiBtYXRbMl07XG59XG4vKipcbiAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB0cmFuc2Zvcm1TdHJpbmdEaXY7XG4vKipcbiAqIEEgcm91bmRlZCBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgdHJhbnNmb3JtLiAgVGhpcyBjYW4gYmUgdXNlZFxuICogZm9yIENTUyB0cmFuc2Zvcm1zLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtIGFzIGEgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcobWF0KSB7XG4gICAgdmFyIHRyYW5zZm9ybVN0cmluZyA9ICdtYXRyaXgoJyArIG1hdC5qb2luKCcsICcpICsgJyknO1xuICAgIGlmIChXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUykge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtU3RyaW5nO1xuICAgIH1cbiAgICB2YXIgbm9kZSA9IHRyYW5zZm9ybVN0cmluZ0RpdiB8fCAodHJhbnNmb3JtU3RyaW5nRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtU3RyaW5nO1xuICAgIHJldHVybiBub2RlLnN0eWxlLnRyYW5zZm9ybTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29sb3JcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogQSBjb2xvciByZXByZXNlbnRlZCBhcyBhIHNob3J0IGFycmF5IFtyZWQsIGdyZWVuLCBibHVlLCBhbHBoYV0uXG4gKiByZWQsIGdyZWVuLCBhbmQgYmx1ZSBzaG91bGQgYmUgaW50ZWdlcnMgaW4gdGhlIHJhbmdlIDAuLjI1NSBpbmNsdXNpdmUuXG4gKiBhbHBoYSBzaG91bGQgYmUgYSBmbG9hdCBpbiB0aGUgcmFuZ2UgMC4uMSBpbmNsdXNpdmUuIElmIG5vIGFscGhhIHZhbHVlIGlzXG4gKiBnaXZlbiB0aGVuIGAxYCB3aWxsIGJlIHVzZWQuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gQ29sb3JcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBUaGlzIFJlZ0V4cCBtYXRjaGVzICMgZm9sbG93ZWQgYnkgMywgNCwgNiwgb3IgOCBoZXggZGlnaXRzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIEhFWF9DT0xPUl9SRV8gPSAvXiMoW2EtZjAtOV17M318W2EtZjAtOV17NH0oPzpbYS1mMC05XXsyfSl7MCwyfSkkL2k7XG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgbWF0Y2hpbmcgcG90ZW50aWFsIG5hbWVkIGNvbG9yIHN0eWxlIHN0cmluZ3MuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgTkFNRURfQ09MT1JfUkVfID0gL14oW2Etel0qKSR8XmhzbGE/XFwoLipcXCkkL2k7XG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gcmdiYSBzdHJpbmcuXG4gKiBAcGFyYW0ge0NvbG9yfHN0cmluZ30gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJnYmEgc3RyaW5nLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNTdHJpbmcoY29sb3IpIHtcbiAgICBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcoY29sb3IpO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJuIG5hbWVkIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yIE5hbWVkIGNvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2Igc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmcm9tTmFtZWQoY29sb3IpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5zdHlsZS5jb2xvciA9IGNvbG9yO1xuICAgIGlmIChlbC5zdHlsZS5jb2xvciAhPT0gJycpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGVsKS5jb2xvcjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgIHJldHVybiByZ2I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmV4cG9ydCB2YXIgZnJvbVN0cmluZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gV2UgbWFpbnRhaW4gYSBzbWFsbCBjYWNoZSBvZiBwYXJzZWQgc3RyaW5ncy4gIFRvIHByb3ZpZGUgY2hlYXAgTFJVLWxpa2VcbiAgICAvLyBzZW1hbnRpY3MsIHdoZW5ldmVyIHRoZSBjYWNoZSBncm93cyB0b28gbGFyZ2Ugd2Ugc2ltcGx5IGRlbGV0ZSBhblxuICAgIC8vIGFyYml0cmFyeSAyNSUgb2YgdGhlIGVudHJpZXMuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgTUFYX0NBQ0hFX1NJWkUgPSAxMDI0O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBDb2xvcj59XG4gICAgICovXG4gICAgdmFyIGNhY2hlID0ge307XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgY2FjaGVTaXplID0gMDtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAgICAgKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIGNvbG9yO1xuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkocykpIHtcbiAgICAgICAgICAgIGNvbG9yID0gY2FjaGVbc107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVTaXplID49IE1BWF9DQUNIRV9TSVpFKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGkrKyAmIDMpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC0tY2FjaGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sb3IgPSBmcm9tU3RyaW5nSW50ZXJuYWxfKHMpO1xuICAgICAgICAgICAgY2FjaGVbc10gPSBjb2xvcjtcbiAgICAgICAgICAgICsrY2FjaGVTaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9KTtcbn0pKCk7XG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gYXJyYXkuIFRoaXMgZnVuY3Rpb24gbWFpbnRhaW5zIGEgY2FjaGUgb2YgY2FsY3VsYXRlZFxuICogYXJyYXlzIHdoaWNoIG1lYW5zIHRoZSByZXN1bHQgc2hvdWxkIG5vdCBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7Q29sb3J8c3RyaW5nfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzQXJyYXkoY29sb3IpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb2xvcikpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZyb21TdHJpbmcoY29sb3IpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqL1xuZnVuY3Rpb24gZnJvbVN0cmluZ0ludGVybmFsXyhzKSB7XG4gICAgdmFyIHIsIGcsIGIsIGEsIGNvbG9yO1xuICAgIGlmIChOQU1FRF9DT0xPUl9SRV8uZXhlYyhzKSkge1xuICAgICAgICBzID0gZnJvbU5hbWVkKHMpO1xuICAgIH1cbiAgICBpZiAoSEVYX0NPTE9SX1JFXy5leGVjKHMpKSB7XG4gICAgICAgIC8vIGhleFxuICAgICAgICB2YXIgbiA9IHMubGVuZ3RoIC0gMTsgLy8gbnVtYmVyIG9mIGhleCBkaWdpdHNcbiAgICAgICAgdmFyIGQgPSAvLyBudW1iZXIgb2YgZGlnaXRzIHBlciBjaGFubmVsXG4gICAgICAgICB2b2lkIDA7IC8vIG51bWJlciBvZiBkaWdpdHMgcGVyIGNoYW5uZWxcbiAgICAgICAgaWYgKG4gPD0gNCkge1xuICAgICAgICAgICAgZCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkID0gMjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzQWxwaGEgPSBuID09PSA0IHx8IG4gPT09IDg7XG4gICAgICAgIHIgPSBwYXJzZUludChzLnN1YnN0cigxICsgMCAqIGQsIGQpLCAxNik7XG4gICAgICAgIGcgPSBwYXJzZUludChzLnN1YnN0cigxICsgMSAqIGQsIGQpLCAxNik7XG4gICAgICAgIGIgPSBwYXJzZUludChzLnN1YnN0cigxICsgMiAqIGQsIGQpLCAxNik7XG4gICAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICAgICAgYSA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAzICogZCwgZCksIDE2KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGEgPSAyNTU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQgPT0gMSkge1xuICAgICAgICAgICAgciA9IChyIDw8IDQpICsgcjtcbiAgICAgICAgICAgIGcgPSAoZyA8PCA0KSArIGc7XG4gICAgICAgICAgICBiID0gKGIgPDwgNCkgKyBiO1xuICAgICAgICAgICAgaWYgKGhhc0FscGhhKSB7XG4gICAgICAgICAgICAgICAgYSA9IChhIDw8IDQpICsgYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xvciA9IFtyLCBnLCBiLCBhIC8gMjU1XTtcbiAgICB9XG4gICAgZWxzZSBpZiAocy5pbmRleE9mKCdyZ2JhKCcpID09IDApIHtcbiAgICAgICAgLy8gcmdiYSgpXG4gICAgICAgIGNvbG9yID0gcy5zbGljZSg1LCAtMSkuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocy5pbmRleE9mKCdyZ2IoJykgPT0gMCkge1xuICAgICAgICAvLyByZ2IoKVxuICAgICAgICBjb2xvciA9IHMuc2xpY2UoNCwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgICAgIGNvbG9yLnB1c2goMSk7XG4gICAgICAgIG5vcm1hbGl6ZShjb2xvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3NlcnQoZmFsc2UsIDE0KTsgLy8gSW52YWxpZCBjb2xvclxuICAgIH1cbiAgICByZXR1cm4gY29sb3I7XG59XG4vKipcbiAqIFRPRE8gdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgaW4gdGhlIHRlc3QsIHdlIHByb2JhYmx5IHNob3VsZG4ndCBleHBvcnQgaXRcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENsYW1wZWQgY29sb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoY29sb3IpIHtcbiAgICBjb2xvclswXSA9IGNsYW1wKChjb2xvclswXSArIDAuNSkgfCAwLCAwLCAyNTUpO1xuICAgIGNvbG9yWzFdID0gY2xhbXAoKGNvbG9yWzFdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gICAgY29sb3JbMl0gPSBjbGFtcCgoY29sb3JbMl0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgICBjb2xvclszXSA9IGNsYW1wKGNvbG9yWzNdLCAwLCAxKTtcbiAgICByZXR1cm4gY29sb3I7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhjb2xvcikge1xuICAgIHZhciByID0gY29sb3JbMF07XG4gICAgaWYgKHIgIT0gKHIgfCAwKSkge1xuICAgICAgICByID0gKHIgKyAwLjUpIHwgMDtcbiAgICB9XG4gICAgdmFyIGcgPSBjb2xvclsxXTtcbiAgICBpZiAoZyAhPSAoZyB8IDApKSB7XG4gICAgICAgIGcgPSAoZyArIDAuNSkgfCAwO1xuICAgIH1cbiAgICB2YXIgYiA9IGNvbG9yWzJdO1xuICAgIGlmIChiICE9IChiIHwgMCkpIHtcbiAgICAgICAgYiA9IChiICsgMC41KSB8IDA7XG4gICAgfVxuICAgIHZhciBhID0gY29sb3JbM10gPT09IHVuZGVmaW5lZCA/IDEgOiBNYXRoLnJvdW5kKGNvbG9yWzNdICogMTAwKSAvIDEwMDtcbiAgICByZXR1cm4gJ3JnYmEoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnKSc7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHN0cmluZyBpcyBhY3R1YWxseSBhIHZhbGlkIGNvbG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZ0NvbG9yKHMpIHtcbiAgICBpZiAoTkFNRURfQ09MT1JfUkVfLnRlc3QocykpIHtcbiAgICAgICAgcyA9IGZyb21OYW1lZChzKTtcbiAgICB9XG4gICAgcmV0dXJuIChIRVhfQ09MT1JfUkVfLnRlc3QocykgfHwgcy5pbmRleE9mKCdyZ2JhKCcpID09PSAwIHx8IHMuaW5kZXhPZigncmdiKCcpID09PSAwKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbG9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnQvQ29ybmVyXG4gKi9cbi8qKlxuICogRXh0ZW50IGNvcm5lci5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBCT1RUT01fTEVGVDogJ2JvdHRvbS1sZWZ0JyxcbiAgICBCT1RUT01fUklHSFQ6ICdib3R0b20tcmlnaHQnLFxuICAgIFRPUF9MRUZUOiAndG9wLWxlZnQnLFxuICAgIFRPUF9SSUdIVDogJ3RvcC1yaWdodCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ybmVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnRcbiAqL1xuaW1wb3J0IENvcm5lciBmcm9tICcuL2V4dGVudC9Db3JuZXIuanMnO1xuaW1wb3J0IFJlbGF0aW9uc2hpcCBmcm9tICcuL2V4dGVudC9SZWxhdGlvbnNoaXAuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4gZXh0ZW50OiBgW21pbngsIG1pbnksIG1heHgsIG1heHldYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBFeHRlbnRcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBCdWlsZCBhbiBleHRlbnQgdGhhdCBpbmNsdWRlcyBhbGwgZ2l2ZW4gY29vcmRpbmF0ZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7RXh0ZW50fSBCb3VuZGluZyBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBib3VuZGluZ0V4dGVudChjb29yZGluYXRlcykge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4cyBYcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geXMgWXMuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZnVuY3Rpb24gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgb3B0X2V4dGVudCkge1xuICAgIHZhciBtaW5YID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeXMpO1xuICAgIHZhciBtYXhYID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeXMpO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogUmV0dXJuIGV4dGVudCBpbmNyZWFzZWQgYnkgdGhlIHByb3ZpZGVkIHZhbHVlLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGFtb3VudCBieSB3aGljaCB0aGUgZXh0ZW50IHNob3VsZCBiZSBidWZmZXJlZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXIoZXh0ZW50LCB2YWx1ZSwgb3B0X2V4dGVudCkge1xuICAgIGlmIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF0gLSB2YWx1ZTtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXSAtIHZhbHVlO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdICsgdmFsdWU7XG4gICAgICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM10gKyB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZXh0ZW50WzBdIC0gdmFsdWUsXG4gICAgICAgICAgICBleHRlbnRbMV0gLSB2YWx1ZSxcbiAgICAgICAgICAgIGV4dGVudFsyXSArIHZhbHVlLFxuICAgICAgICAgICAgZXh0ZW50WzNdICsgdmFsdWUsXG4gICAgICAgIF07XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2xvbmUgb2YgYW4gZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50IHRvIGNsb25lLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBjbG9uZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGV4dGVudCwgb3B0X2V4dGVudCkge1xuICAgIGlmIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF07XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBleHRlbnRbMV07XG4gICAgICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl07XG4gICAgICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM107XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudC5zbGljZSgpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge251bWJlcn0gQ2xvc2VzdCBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKGV4dGVudCwgeCwgeSkge1xuICAgIHZhciBkeCwgZHk7XG4gICAgaWYgKHggPCBleHRlbnRbMF0pIHtcbiAgICAgICAgZHggPSBleHRlbnRbMF0gLSB4O1xuICAgIH1cbiAgICBlbHNlIGlmIChleHRlbnRbMl0gPCB4KSB7XG4gICAgICAgIGR4ID0geCAtIGV4dGVudFsyXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGR4ID0gMDtcbiAgICB9XG4gICAgaWYgKHkgPCBleHRlbnRbMV0pIHtcbiAgICAgICAgZHkgPSBleHRlbnRbMV0gLSB5O1xuICAgIH1cbiAgICBlbHNlIGlmIChleHRlbnRbM10gPCB5KSB7XG4gICAgICAgIGR5ID0geSAtIGV4dGVudFszXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGR5ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgaW4gdGhlIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xufVxuLyoqXG4gKiBDaGVjayBpZiBvbmUgZXh0ZW50IGNvbnRhaW5zIGFub3RoZXIuXG4gKlxuICogQW4gZXh0ZW50IGlzIGRlZW1lZCBjb250YWluZWQgaWYgaXQgbGllcyBjb21wbGV0ZWx5IHdpdGhpbiB0aGUgb3RoZXIgZXh0ZW50LFxuICogaW5jbHVkaW5nIGlmIHRoZXkgc2hhcmUgb25lIG9yIG1vcmUgZWRnZXMuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzZWNvbmQgZXh0ZW50IGlzIGNvbnRhaW5lZCBieSBvciBvbiB0aGUgZWRnZSBvZiB0aGVcbiAqICAgICBmaXJzdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zRXh0ZW50KGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICByZXR1cm4gKGV4dGVudDFbMF0gPD0gZXh0ZW50MlswXSAmJlxuICAgICAgICBleHRlbnQyWzJdIDw9IGV4dGVudDFbMl0gJiZcbiAgICAgICAgZXh0ZW50MVsxXSA8PSBleHRlbnQyWzFdICYmXG4gICAgICAgIGV4dGVudDJbM10gPD0gZXh0ZW50MVszXSk7XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB4LCB5IHZhbHVlcyBhcmUgY29udGFpbmVkIGluIHRoZSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc1hZKGV4dGVudCwgeCwgeSkge1xuICAgIHJldHVybiBleHRlbnRbMF0gPD0geCAmJiB4IDw9IGV4dGVudFsyXSAmJiBleHRlbnRbMV0gPD0geSAmJiB5IDw9IGV4dGVudFszXTtcbn1cbi8qKlxuICogR2V0IHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBhIGNvb3JkaW5hdGUgYW5kIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC9SZWxhdGlvbnNoaXAuanNcIikuZGVmYXVsdH0gVGhlIHJlbGF0aW9uc2hpcCAoYml0d2lzZSBjb21wYXJlIHdpdGhcbiAqICAgICBpbXBvcnQoXCIuL2V4dGVudC9SZWxhdGlvbnNoaXAuanNcIikuUmVsYXRpb25zaGlwKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgdmFyIG1pblggPSBleHRlbnRbMF07XG4gICAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gICAgdmFyIG1heFggPSBleHRlbnRbMl07XG4gICAgdmFyIG1heFkgPSBleHRlbnRbM107XG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLlVOS05PV047XG4gICAgaWYgKHggPCBtaW5YKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5MRUZUO1xuICAgIH1cbiAgICBlbHNlIGlmICh4ID4gbWF4WCkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuUklHSFQ7XG4gICAgfVxuICAgIGlmICh5IDwgbWluWSkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuQkVMT1c7XG4gICAgfVxuICAgIGVsc2UgaWYgKHkgPiBtYXhZKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5BQk9WRTtcbiAgICB9XG4gICAgaWYgKHJlbGF0aW9uc2hpcCA9PT0gUmVsYXRpb25zaGlwLlVOS05PV04pIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORztcbiAgICB9XG4gICAgcmV0dXJuIHJlbGF0aW9uc2hpcDtcbn1cbi8qKlxuICogQ3JlYXRlIGFuIGVtcHR5IGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRW1wdHkgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRW1wdHkoKSB7XG4gICAgcmV0dXJuIFtJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5XTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGV4dGVudCBvciB1cGRhdGUgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IG1pblg7XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBtaW5ZO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gbWF4WDtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IG1heFk7XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBlbXB0eSBleHRlbnQgb3IgbWFrZSB0aGUgcHJvdmlkZWQgb25lIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCkge1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5LCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgb3B0X2V4dGVudCkge1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKHgsIHksIHgsIHksIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcyk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgb3B0X2V4dGVudCkge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICAgIHJldHVybiBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbVJpbmdzKHJpbmdzLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCk7XG4gICAgcmV0dXJuIGV4dGVuZFJpbmdzKGV4dGVudCwgcmluZ3MpO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGVxdWl2YWxlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICByZXR1cm4gKGV4dGVudDFbMF0gPT0gZXh0ZW50MlswXSAmJlxuICAgICAgICBleHRlbnQxWzJdID09IGV4dGVudDJbMl0gJiZcbiAgICAgICAgZXh0ZW50MVsxXSA9PSBleHRlbnQyWzFdICYmXG4gICAgICAgIGV4dGVudDFbM10gPT0gZXh0ZW50MlszXSk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0d28gZXh0ZW50cyBhcmUgYXBwcm94aW1hdGVseSBlcXVpdmFsZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlIGluIGV4dGVudCBjb29yZGluYXRlIHVuaXRzLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGRpZmZlciBieSBsZXNzIHRoYW4gdGhlIHRvbGVyYW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcHJveGltYXRlbHlFcXVhbHMoZXh0ZW50MSwgZXh0ZW50MiwgdG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIChNYXRoLmFicyhleHRlbnQxWzBdIC0gZXh0ZW50MlswXSkgPCB0b2xlcmFuY2UgJiZcbiAgICAgICAgTWF0aC5hYnMoZXh0ZW50MVsyXSAtIGV4dGVudDJbMl0pIDwgdG9sZXJhbmNlICYmXG4gICAgICAgIE1hdGguYWJzKGV4dGVudDFbMV0gLSBleHRlbnQyWzFdKSA8IHRvbGVyYW5jZSAmJlxuICAgICAgICBNYXRoLmFicyhleHRlbnQxWzNdIC0gZXh0ZW50MlszXSkgPCB0b2xlcmFuY2UpO1xufVxuLyoqXG4gKiBNb2RpZnkgYW4gZXh0ZW50IHRvIGluY2x1ZGUgYW5vdGhlciBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBUaGUgZXh0ZW50IHRvIGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgVGhlIGV4dGVudCB0aGF0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGZpcnN0LlxuICogQHJldHVybiB7RXh0ZW50fSBBIHJlZmVyZW5jZSB0byB0aGUgZmlyc3QgKGV4dGVuZGVkKSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIGlmIChleHRlbnQyWzBdIDwgZXh0ZW50MVswXSkge1xuICAgICAgICBleHRlbnQxWzBdID0gZXh0ZW50MlswXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDJbMl0gPiBleHRlbnQxWzJdKSB7XG4gICAgICAgIGV4dGVudDFbMl0gPSBleHRlbnQyWzJdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MlsxXSA8IGV4dGVudDFbMV0pIHtcbiAgICAgICAgZXh0ZW50MVsxXSA9IGV4dGVudDJbMV07XG4gICAgfVxuICAgIGlmIChleHRlbnQyWzNdID4gZXh0ZW50MVszXSkge1xuICAgICAgICBleHRlbnQxWzNdID0gZXh0ZW50MlszXTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDE7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgICBpZiAoY29vcmRpbmF0ZVswXSA8IGV4dGVudFswXSkge1xuICAgICAgICBleHRlbnRbMF0gPSBjb29yZGluYXRlWzBdO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZVswXSA+IGV4dGVudFsyXSkge1xuICAgICAgICBleHRlbnRbMl0gPSBjb29yZGluYXRlWzBdO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZVsxXSA8IGV4dGVudFsxXSkge1xuICAgICAgICBleHRlbnRbMV0gPSBjb29yZGluYXRlWzFdO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZVsxXSA+IGV4dGVudFszXSkge1xuICAgICAgICBleHRlbnRbM10gPSBjb29yZGluYXRlWzFdO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgY29vcmRpbmF0ZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICBleHRlbmRYWShleHRlbnQsIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gcmluZ3MgUmluZ3MuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFJpbmdzKGV4dGVudCwgcmluZ3MpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSByaW5ncy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgcmluZ3NbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kWFkoZXh0ZW50LCB4LCB5KSB7XG4gICAgZXh0ZW50WzBdID0gTWF0aC5taW4oZXh0ZW50WzBdLCB4KTtcbiAgICBleHRlbnRbMV0gPSBNYXRoLm1pbihleHRlbnRbMV0sIHkpO1xuICAgIGV4dGVudFsyXSA9IE1hdGgubWF4KGV4dGVudFsyXSwgeCk7XG4gICAgZXh0ZW50WzNdID0gTWF0aC5tYXgoZXh0ZW50WzNdLCB5KTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIGNvcm5lciBvZiB0aGUgZXh0ZW50LiBJZiB0aGVcbiAqIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdCB2YWx1ZVxuICogaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogU30gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcmV0dXJuIHtTfGJvb2xlYW59IFZhbHVlLlxuICogQHRlbXBsYXRlIFNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hDb3JuZXIoZXh0ZW50LCBjYWxsYmFjaykge1xuICAgIHZhciB2YWw7XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0Qm90dG9tTGVmdChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbVJpZ2h0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0VG9wUmlnaHQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICB2YWwgPSBjYWxsYmFjayhnZXRUb3BMZWZ0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNpemUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmVhKGV4dGVudCkge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICBpZiAoIWlzRW1wdHkoZXh0ZW50KSkge1xuICAgICAgICBhcmVhID0gZ2V0V2lkdGgoZXh0ZW50KSAqIGdldEhlaWdodChleHRlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8qKlxuICogR2V0IHRoZSBib3R0b20gbGVmdCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEJvdHRvbSBsZWZ0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3R0b21MZWZ0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIGJvdHRvbSByaWdodCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEJvdHRvbSByaWdodCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMl0sIGV4dGVudFsxXV07XG59XG4vKipcbiAqIEdldCB0aGUgY2VudGVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ2VudGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2VudGVyKGV4dGVudCkge1xuICAgIHJldHVybiBbKGV4dGVudFswXSArIGV4dGVudFsyXSkgLyAyLCAoZXh0ZW50WzFdICsgZXh0ZW50WzNdKSAvIDJdO1xufVxuLyoqXG4gKiBHZXQgYSBjb3JuZXIgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQvQ29ybmVyLmpzXCIpLmRlZmF1bHR9IGNvcm5lciBDb3JuZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29ybmVyIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JuZXIoZXh0ZW50LCBjb3JuZXIpIHtcbiAgICB2YXIgY29vcmRpbmF0ZTtcbiAgICBpZiAoY29ybmVyID09PSBDb3JuZXIuQk9UVE9NX0xFRlQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldEJvdHRvbUxlZnQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5UT1BfTEVGVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5UT1BfUklHSFQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3NlcnQoZmFsc2UsIDEzKTsgLy8gSW52YWxpZCBjb3JuZXJcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVubGFyZ2VkIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbmxhcmdlZEFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHZhciBtaW5YID0gTWF0aC5taW4oZXh0ZW50MVswXSwgZXh0ZW50MlswXSk7XG4gICAgdmFyIG1pblkgPSBNYXRoLm1pbihleHRlbnQxWzFdLCBleHRlbnQyWzFdKTtcbiAgICB2YXIgbWF4WCA9IE1hdGgubWF4KGV4dGVudDFbMl0sIGV4dGVudDJbMl0pO1xuICAgIHZhciBtYXhZID0gTWF0aC5tYXgoZXh0ZW50MVszXSwgZXh0ZW50MlszXSk7XG4gICAgcmV0dXJuIChtYXhYIC0gbWluWCkgKiAobWF4WSAtIG1pblkpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGR4ID0gKHJlc29sdXRpb24gKiBzaXplWzBdKSAvIDI7XG4gICAgdmFyIGR5ID0gKHJlc29sdXRpb24gKiBzaXplWzFdKSAvIDI7XG4gICAgdmFyIGNvc1JvdGF0aW9uID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgIHZhciBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICB2YXIgeENvcyA9IGR4ICogY29zUm90YXRpb247XG4gICAgdmFyIHhTaW4gPSBkeCAqIHNpblJvdGF0aW9uO1xuICAgIHZhciB5Q29zID0gZHkgKiBjb3NSb3RhdGlvbjtcbiAgICB2YXIgeVNpbiA9IGR5ICogc2luUm90YXRpb247XG4gICAgdmFyIHggPSBjZW50ZXJbMF07XG4gICAgdmFyIHkgPSBjZW50ZXJbMV07XG4gICAgdmFyIHgwID0geCAtIHhDb3MgKyB5U2luO1xuICAgIHZhciB4MSA9IHggLSB4Q29zIC0geVNpbjtcbiAgICB2YXIgeDIgPSB4ICsgeENvcyAtIHlTaW47XG4gICAgdmFyIHgzID0geCArIHhDb3MgKyB5U2luO1xuICAgIHZhciB5MCA9IHkgLSB4U2luIC0geUNvcztcbiAgICB2YXIgeTEgPSB5IC0geFNpbiArIHlDb3M7XG4gICAgdmFyIHkyID0geSArIHhTaW4gKyB5Q29zO1xuICAgIHZhciB5MyA9IHkgKyB4U2luIC0geUNvcztcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoTWF0aC5taW4oeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1pbih5MCwgeTEsIHkyLCB5MyksIE1hdGgubWF4KHgwLCB4MSwgeDIsIHgzKSwgTWF0aC5tYXgoeTAsIHkxLCB5MiwgeTMpLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBoZWlnaHQgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodChleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnNlY3Rpb24gYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbkFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Mik7XG4gICAgcmV0dXJuIGdldEFyZWEoaW50ZXJzZWN0aW9uKTtcbn1cbi8qKlxuICogR2V0IHRoZSBpbnRlcnNlY3Rpb24gb2YgdHdvIGV4dGVudHMuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBPcHRpb25hbCBleHRlbnQgdG8gcG9wdWxhdGUgd2l0aCBpbnRlcnNlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEludGVyc2VjdGluZyBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Miwgb3B0X2V4dGVudCkge1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBvcHRfZXh0ZW50ID8gb3B0X2V4dGVudCA6IGNyZWF0ZUVtcHR5KCk7XG4gICAgaWYgKGludGVyc2VjdHMoZXh0ZW50MSwgZXh0ZW50MikpIHtcbiAgICAgICAgaWYgKGV4dGVudDFbMF0gPiBleHRlbnQyWzBdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMF0gPSBleHRlbnQxWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MlswXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50MVsxXSA+IGV4dGVudDJbMV0pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsxXSA9IGV4dGVudDFbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQyWzFdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnQxWzJdIDwgZXh0ZW50MlsyXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzJdID0gZXh0ZW50MVsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDJbMl07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dGVudDFbM10gPCBleHRlbnQyWzNdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bM10gPSBleHRlbnQxWzNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MlszXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eShpbnRlcnNlY3Rpb24pO1xuICAgIH1cbiAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWFyZ2luLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFyZ2luKGV4dGVudCkge1xuICAgIHJldHVybiBnZXRXaWR0aChleHRlbnQpICsgZ2V0SGVpZ2h0KGV4dGVudCk7XG59XG4vKipcbiAqIEdldCB0aGUgc2l6ZSAod2lkdGgsIGhlaWdodCkgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFRoZSBleHRlbnQgc2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNpemUoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMl0gLSBleHRlbnRbMF0sIGV4dGVudFszXSAtIGV4dGVudFsxXV07XG59XG4vKipcbiAqIEdldCB0aGUgdG9wIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wTGVmdChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFswXSwgZXh0ZW50WzNdXTtcbn1cbi8qKlxuICogR2V0IHRoZSB0b3AgcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcFJpZ2h0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbM11dO1xufVxuLyoqXG4gKiBHZXQgdGhlIHdpZHRoIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpZHRoKGV4dGVudCkge1xuICAgIHJldHVybiBleHRlbnRbMl0gLSBleHRlbnRbMF07XG59XG4vKipcbiAqIERldGVybWluZSBpZiBvbmUgZXh0ZW50IGludGVyc2VjdHMgYW5vdGhlci5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGludGVyc2VjdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHMoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHJldHVybiAoZXh0ZW50MVswXSA8PSBleHRlbnQyWzJdICYmXG4gICAgICAgIGV4dGVudDFbMl0gPj0gZXh0ZW50MlswXSAmJlxuICAgICAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbM10gJiZcbiAgICAgICAgZXh0ZW50MVszXSA+PSBleHRlbnQyWzFdKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIGV4dGVudCBpcyBlbXB0eS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KGV4dGVudCkge1xuICAgIHJldHVybiBleHRlbnRbMl0gPCBleHRlbnRbMF0gfHwgZXh0ZW50WzNdIDwgZXh0ZW50WzFdO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXR1cm5PclVwZGF0ZShleHRlbnQsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBleHRlbnQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlRnJvbUNlbnRlcihleHRlbnQsIHZhbHVlKSB7XG4gICAgdmFyIGRlbHRhWCA9ICgoZXh0ZW50WzJdIC0gZXh0ZW50WzBdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gICAgdmFyIGRlbHRhWSA9ICgoZXh0ZW50WzNdIC0gZXh0ZW50WzFdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gICAgZXh0ZW50WzBdIC09IGRlbHRhWDtcbiAgICBleHRlbnRbMl0gKz0gZGVsdGFYO1xuICAgIGV4dGVudFsxXSAtPSBkZWx0YVk7XG4gICAgZXh0ZW50WzNdICs9IGRlbHRhWTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoZSBzZWdtZW50IGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzIGludGVyc2VjdHMgKGNyb3NzZXMsXG4gKiB0b3VjaGVzLCBvciBpcyBjb250YWluZWQgYnkpIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBzdGFydCBTZWdtZW50IHN0YXJ0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBlbmQgU2VnbWVudCBlbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzZWdtZW50IGludGVyc2VjdHMgdGhlIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgc3RhcnQsIGVuZCkge1xuICAgIHZhciBpbnRlcnNlY3RzID0gZmFsc2U7XG4gICAgdmFyIHN0YXJ0UmVsID0gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIHN0YXJ0KTtcbiAgICB2YXIgZW5kUmVsID0gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIGVuZCk7XG4gICAgaWYgKHN0YXJ0UmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HIHx8XG4gICAgICAgIGVuZFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORykge1xuICAgICAgICBpbnRlcnNlY3RzID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgICAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICAgICAgdmFyIG1heFggPSBleHRlbnRbMl07XG4gICAgICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgICAgICB2YXIgc3RhcnRYID0gc3RhcnRbMF07XG4gICAgICAgIHZhciBzdGFydFkgPSBzdGFydFsxXTtcbiAgICAgICAgdmFyIGVuZFggPSBlbmRbMF07XG4gICAgICAgIHZhciBlbmRZID0gZW5kWzFdO1xuICAgICAgICB2YXIgc2xvcGUgPSAoZW5kWSAtIHN0YXJ0WSkgLyAoZW5kWCAtIHN0YXJ0WCk7XG4gICAgICAgIHZhciB4ID0gdm9pZCAwLCB5ID0gdm9pZCAwO1xuICAgICAgICBpZiAoISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSAmJiAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyB0b3BcbiAgICAgICAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtYXhZKSAvIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuUklHSFQpICYmXG4gICAgICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyByaWdodFxuICAgICAgICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1heFgpICogc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdHMgJiZcbiAgICAgICAgICAgICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykgJiZcbiAgICAgICAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpKSB7XG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBpbnRlcnNlY3RzIGJvdHRvbVxuICAgICAgICAgICAgeCA9IGVuZFggLSAoZW5kWSAtIG1pblkpIC8gc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geCA+PSBtaW5YICYmIHggPD0gbWF4WDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdHMgJiZcbiAgICAgICAgICAgICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKSAmJlxuICAgICAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBsZWZ0XG4gICAgICAgICAgICB5ID0gZW5kWSAtIChlbmRYIC0gbWluWCkgKiBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB5ID49IG1pblkgJiYgeSA8PSBtYXhZO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3RzO1xufVxuLyoqXG4gKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogQ2FsbGVkIHdpdGggYFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXWAgZXh0ZW50IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zdG9wc10gTnVtYmVyIG9mIHN0b3BzIHBlciBzaWRlIHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm0uXG4gKiBCeSBkZWZhdWx0IG9ubHkgdGhlIGNvcm5lcnMgYXJlIHVzZWQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5VHJhbnNmb3JtKGV4dGVudCwgdHJhbnNmb3JtRm4sIG9wdF9leHRlbnQsIG9wdF9zdG9wcykge1xuICAgIHZhciBjb29yZGluYXRlcyA9IFtdO1xuICAgIGlmIChvcHRfc3RvcHMgPiAxKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IGV4dGVudFsyXSAtIGV4dGVudFswXTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGV4dGVudFszXSAtIGV4dGVudFsxXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRfc3RvcHM7ICsraSkge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMucHVzaChleHRlbnRbMF0gKyAod2lkdGggKiBpKSAvIG9wdF9zdG9wcywgZXh0ZW50WzFdLCBleHRlbnRbMl0sIGV4dGVudFsxXSArIChoZWlnaHQgKiBpKSAvIG9wdF9zdG9wcywgZXh0ZW50WzJdIC0gKHdpZHRoICogaSkgLyBvcHRfc3RvcHMsIGV4dGVudFszXSwgZXh0ZW50WzBdLCBleHRlbnRbM10gLSAoaGVpZ2h0ICogaSkgLyBvcHRfc3RvcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb29yZGluYXRlcyA9IFtcbiAgICAgICAgICAgIGV4dGVudFswXSxcbiAgICAgICAgICAgIGV4dGVudFsxXSxcbiAgICAgICAgICAgIGV4dGVudFsyXSxcbiAgICAgICAgICAgIGV4dGVudFsxXSxcbiAgICAgICAgICAgIGV4dGVudFsyXSxcbiAgICAgICAgICAgIGV4dGVudFszXSxcbiAgICAgICAgICAgIGV4dGVudFswXSxcbiAgICAgICAgICAgIGV4dGVudFszXSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgdHJhbnNmb3JtRm4oY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGVzLCAyKTtcbiAgICB2YXIgeHMgPSBbXTtcbiAgICB2YXIgeXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICB4cy5wdXNoKGNvb3JkaW5hdGVzW2ldKTtcbiAgICAgICAgeXMucHVzaChjb29yZGluYXRlc1tpICsgMV0pO1xuICAgIH1cbiAgICByZXR1cm4gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIE1vZGlmaWVzIHRoZSBwcm92aWRlZCBleHRlbnQgaW4tcGxhY2UgdG8gYmUgd2l0aGluIHRoZSByZWFsIHdvcmxkXG4gKiBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvblxuICogQHJldHVybiB7RXh0ZW50fSBUaGUgZXh0ZW50IHdpdGhpbiB0aGUgcmVhbCB3b3JsZCBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwWChleHRlbnQsIHByb2plY3Rpb24pIHtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGNlbnRlciA9IGdldENlbnRlcihleHRlbnQpO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgKGNlbnRlclswXSA8IHByb2plY3Rpb25FeHRlbnRbMF0gfHwgY2VudGVyWzBdID49IHByb2plY3Rpb25FeHRlbnRbMl0pKSB7XG4gICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgIHZhciB3b3JsZHNBd2F5ID0gTWF0aC5mbG9vcigoY2VudGVyWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyB3b3JsZFdpZHRoKTtcbiAgICAgICAgdmFyIG9mZnNldCA9IHdvcmxkc0F3YXkgKiB3b3JsZFdpZHRoO1xuICAgICAgICBleHRlbnRbMF0gLT0gb2Zmc2V0O1xuICAgICAgICBleHRlbnRbMl0gLT0gb2Zmc2V0O1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXh0ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnQvUmVsYXRpb25zaGlwXG4gKi9cbi8qKlxuICogUmVsYXRpb25zaGlwIHRvIGFuIGV4dGVudC5cbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBVTktOT1dOOiAwLFxuICAgIElOVEVSU0VDVElORzogMSxcbiAgICBBQk9WRTogMixcbiAgICBSSUdIVDogNCxcbiAgICBCRUxPVzogOCxcbiAgICBMRUZUOiAxNixcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWxhdGlvbnNoaXAuanMubWFwIiwiaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuL2hhcy5qcyc7XG4vKipcbiAqIEBtb2R1bGUgb2wvZG9tXG4gKi9cbi8vRklYTUUgTW92ZSB0aGlzIGZ1bmN0aW9uIHRvIHRoZSBjYW52YXMgbW9kdWxlXG4vKipcbiAqIENyZWF0ZSBhbiBodG1sIGNhbnZhcyBlbGVtZW50IGFuZCByZXR1cm5zIGl0cyAyZCBjb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfd2lkdGhdIENhbnZhcyB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2hlaWdodF0gQ2FudmFzIGhlaWdodC5cbiAqIEBwYXJhbSB7QXJyYXk8SFRNTENhbnZhc0VsZW1lbnQ+fSBbb3B0X2NhbnZhc1Bvb2xdIENhbnZhcyBwb29sIHRvIHRha2UgZXhpc3RpbmcgY2FudmFzIGZyb20uXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRFNldHRpbmdzfSBbb3B0X0NvbnRleHQyRFNldHRpbmdzXSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc1xuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBUaGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0NvbnRleHQyRChvcHRfd2lkdGgsIG9wdF9oZWlnaHQsIG9wdF9jYW52YXNQb29sLCBvcHRfQ29udGV4dDJEU2V0dGluZ3MpIHtcbiAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fE9mZnNjcmVlbkNhbnZhc30gKi9cbiAgICB2YXIgY2FudmFzO1xuICAgIGlmIChvcHRfY2FudmFzUG9vbCAmJiBvcHRfY2FudmFzUG9vbC5sZW5ndGgpIHtcbiAgICAgICAgY2FudmFzID0gb3B0X2NhbnZhc1Bvb2wuc2hpZnQoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgY2FudmFzID0gbmV3IE9mZnNjcmVlbkNhbnZhcyhvcHRfd2lkdGggfHwgMzAwLCBvcHRfaGVpZ2h0IHx8IDMwMCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB9XG4gICAgaWYgKG9wdF93aWR0aCkge1xuICAgICAgICBjYW52YXMud2lkdGggPSBvcHRfd2lkdGg7XG4gICAgfVxuICAgIGlmIChvcHRfaGVpZ2h0KSB7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBvcHRfaGVpZ2h0O1xuICAgIH1cbiAgICAvL0ZJWE1FIEFsbG93IE9mZnNjcmVlbkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCBhcyByZXR1cm4gdHlwZVxuICAgIHJldHVybiAvKiogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gKi8gKGNhbnZhcy5nZXRDb250ZXh0KCcyZCcsIG9wdF9Db250ZXh0MkRTZXR0aW5ncykpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgd2lkdGggZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlcldpZHRoKHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB3aWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVyV2lkdGgoZWxlbWVudCkge1xuICAgIHZhciB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICB3aWR0aCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5SaWdodCwgMTApO1xuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIGhlaWdodCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgaW5jbHVkaW5nIG1hcmdpbixcbiAqIHBhZGRpbmcgYW5kIGJvcmRlci5cbiAqIEVxdWl2YWxlbnQgdG8galF1ZXJ5J3MgYCQoZWwpLm91dGVySGVpZ2h0KHRydWUpYC5cbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBoZWlnaHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlckhlaWdodChlbGVtZW50KSB7XG4gICAgdmFyIGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgaGVpZ2h0ICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpblRvcCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luQm90dG9tLCAxMCk7XG4gICAgcmV0dXJuIGhlaWdodDtcbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gcmVwbGFjZSBvbGQgbm9kZVxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIFRoZSBub2RlIHRvIGJlIHJlcGxhY2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlTm9kZShuZXdOb2RlLCBvbGROb2RlKSB7XG4gICAgdmFyIHBhcmVudCA9IG9sZE5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybiB7Tm9kZX0gVGhlIG5vZGUgdGhhdCB3YXMgcmVtb3ZlZCBvciBudWxsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTm9kZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlID8gbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpIDogbnVsbDtcbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZSB0aGUgY2hpbGRyZW4gZnJvbS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUNoaWxkcmVuKG5vZGUpIHtcbiAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmxhc3RDaGlsZCk7XG4gICAgfVxufVxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGNoaWxkcmVuIG9mIGEgcGFyZW50IG5vZGUgc28gdGhleSBtYXRjaCB0aGVcbiAqIHByb3ZpZGVkIGxpc3Qgb2YgY2hpbGRyZW4uICBUaGlzIGZ1bmN0aW9uIGFpbXMgdG8gZWZmaWNpZW50bHlcbiAqIHJlbW92ZSwgYWRkLCBhbmQgcmVvcmRlciBjaGlsZCBub2RlcyB3aGlsZSBtYWludGFpbmluZyBhIHNpbXBsZVxuICogaW1wbGVtZW50YXRpb24gKGl0IGlzIG5vdCBndWFyYW50ZWVkIHRvIG1pbmltaXplIERPTSBvcGVyYXRpb25zKS5cbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgcGFyZW50IG5vZGUgd2hvc2UgY2hpbGRyZW4gbmVlZCByZXdvcmtpbmcuXG4gKiBAcGFyYW0ge0FycmF5PE5vZGU+fSBjaGlsZHJlbiBUaGUgZGVzaXJlZCBjaGlsZHJlbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VDaGlsZHJlbihub2RlLCBjaGlsZHJlbikge1xuICAgIHZhciBvbGRDaGlsZHJlbiA9IG5vZGUuY2hpbGROb2RlcztcbiAgICBmb3IgKHZhciBpID0gMDsgdHJ1ZTsgKytpKSB7XG4gICAgICAgIHZhciBvbGRDaGlsZCA9IG9sZENoaWxkcmVuW2ldO1xuICAgICAgICB2YXIgbmV3Q2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgLy8gY2hlY2sgaWYgb3VyIHdvcmsgaXMgZG9uZVxuICAgICAgICBpZiAoIW9sZENoaWxkICYmICFuZXdDaGlsZCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgY2hpbGRyZW4gbWF0Y2hcbiAgICAgICAgaWYgKG9sZENoaWxkID09PSBuZXdDaGlsZCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgYSBuZXcgY2hpbGQgbmVlZHMgdG8gYmUgYWRkZWRcbiAgICAgICAgaWYgKCFvbGRDaGlsZCkge1xuICAgICAgICAgICAgbm9kZS5hcHBlbmRDaGlsZChuZXdDaGlsZCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiBhbiBvbGQgY2hpbGQgbmVlZHMgdG8gYmUgcmVtb3ZlZFxuICAgICAgICBpZiAoIW5ld0NoaWxkKSB7XG4gICAgICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG9sZENoaWxkKTtcbiAgICAgICAgICAgIC0taTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlb3JkZXJcbiAgICAgICAgbm9kZS5pbnNlcnRCZWZvcmUobmV3Q2hpbGQsIG9sZENoaWxkKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvTGF5ZXJcbiAqL1xuaW1wb3J0IExheWVyUmVuZGVyZXIgZnJvbSAnLi4vTGF5ZXIuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50IGZyb20gJy4uLy4uL3JlbmRlci9FdmVudC5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uLy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgY3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYXNBcnJheSB9IGZyb20gJy4uLy4uL2NvbG9yLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgZ2V0Qm90dG9tTGVmdCwgZ2V0Qm90dG9tUmlnaHQsIGdldFRvcExlZnQsIGdldFRvcFJpZ2h0LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuLi8uLi9kb20uanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gTGF5ZXJUeXBlXG4gKiBAZXh0ZW5kcyB7TGF5ZXJSZW5kZXJlcjxMYXllclR5cGU+fVxuICovXG52YXIgQ2FudmFzTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gbGF5ZXIgTGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzTGF5ZXJSZW5kZXJlcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBsYXllcikgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGVtcG9yYXJ5IHRyYW5zZm9ybS4gIFRoZSB2YWx1ZXMgaW4gdGhpcyB0cmFuc2Zvcm0gc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiBhXG4gICAgICAgICAqIGZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgdmFsdWVzLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGVtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRyYW5zZm9ybSBmb3IgcmVuZGVyZWQgcGl4ZWxzIHRvIHZpZXdwb3J0IENTUyBwaXhlbHMuICBUaGlzIHRyYW5zZm9ybSBtdXN0XG4gICAgICAgICAqIGJlIHNldCB3aGVuIHJlbmRlcmluZyBhIGZyYW1lIGFuZCBtYXkgYmUgdXNlZCBieSBvdGhlciBmdW5jdGlvbnMgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHZpZXdwb3J0IENTUyBwaXhlbHMgdG8gcmVuZGVyZWQgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAgICAgKiBiZSBzZXQgd2hlbiByZW5kZXJpbmcgYSBmcmFtZSBhbmQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZnVuY3Rpb25zIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250YWluZXJSZXVzZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbENvbnRleHRfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vUGx1Z2dhYmxlTWFwLmpzJykuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEJhY2tncm91bmQgY29sb3IuXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0QmFja2dyb3VuZCA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIGJhY2tncm91bmQgPSBsYXllci5nZXRCYWNrZ3JvdW5kKCk7XG4gICAgICAgIGlmICh0eXBlb2YgYmFja2dyb3VuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgYmFja2dyb3VuZCA9IGJhY2tncm91bmQoZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhY2tncm91bmQgfHwgdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVuZGVyaW5nIGNvbnRhaW5lciBmcm9tIGFuIGV4aXN0aW5nIHRhcmdldCwgaWYgY29tcGF0aWJsZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgUG90ZW50aWFsIHJlbmRlciB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zZm9ybSBDU1MgVHJhbnNmb3JtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRfYmFja2dyb3VuZENvbG9yXSBCYWNrZ3JvdW5kIGNvbG9yLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLnVzZUNvbnRhaW5lciA9IGZ1bmN0aW9uICh0YXJnZXQsIHRyYW5zZm9ybSwgb3BhY2l0eSwgb3B0X2JhY2tncm91bmRDb2xvcikge1xuICAgICAgICB2YXIgbGF5ZXJDbGFzc05hbWUgPSB0aGlzLmdldExheWVyKCkuZ2V0Q2xhc3NOYW1lKCk7XG4gICAgICAgIHZhciBjb250YWluZXIsIGNvbnRleHQ7XG4gICAgICAgIGlmICh0YXJnZXQgJiZcbiAgICAgICAgICAgIHRhcmdldC5jbGFzc05hbWUgPT09IGxheWVyQ2xhc3NOYW1lICYmXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUub3BhY2l0eSA9PT0gJycgJiZcbiAgICAgICAgICAgIG9wYWNpdHkgPT09IDEgJiZcbiAgICAgICAgICAgICghb3B0X2JhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAgICAgICAgICh0YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yICYmXG4gICAgICAgICAgICAgICAgICAgIGVxdWFscyhhc0FycmF5KHRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLCBhc0FycmF5KG9wdF9iYWNrZ3JvdW5kQ29sb3IpKSkpKSB7XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gdGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9PT0gdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAvLyBDb250YWluZXIgb2YgdGhlIHByZXZpb3VzIGxheWVyIHJlbmRlcmVyIGNhbiBiZSB1c2VkLlxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29udGFpbmVyUmV1c2VkKSB7XG4gICAgICAgICAgICAvLyBQcmV2aW91c2x5IHJldXNlZCBjb250YWluZXIgY2Fubm90IGJlIHVzZWQgYW55IG1vcmUuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBsYXllckNsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGNvbnRhaW5lci5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAgICAgaWYgKG9wdF9iYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBvcHRfYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICAgICAgICBzdHlsZSA9IGNhbnZhcy5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgICAgICBzdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSAndG9wIGxlZnQnO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgQ2xpcCBleHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmNsaXBVbnJvdGF0ZWQgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgICAgIHZhciB0b3BMZWZ0ID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgICAgICB2YXIgdG9wUmlnaHQgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgICAgICB2YXIgYm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGdldEJvdHRvbUxlZnQoZXh0ZW50KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgdG9wTGVmdCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIHRvcFJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tUmlnaHQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBib3R0b21MZWZ0KTtcbiAgICAgICAgdmFyIGludmVydGVkID0gdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm07XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCB0b3BMZWZ0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIHRvcFJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIGJvdHRvbVJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIGJvdHRvbUxlZnQpO1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oTWF0aC5yb3VuZCh0b3BMZWZ0WzBdKSwgTWF0aC5yb3VuZCh0b3BMZWZ0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQodG9wUmlnaHRbMF0pLCBNYXRoLnJvdW5kKHRvcFJpZ2h0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tUmlnaHRbMF0pLCBNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tTGVmdFswXSksIE1hdGgucm91bmQoYm90dG9tTGVmdFsxXSkpO1xuICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudF8gPSBmdW5jdGlvbiAodHlwZSwgY29udGV4dCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGlmIChsYXllci5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBuZXcgUmVuZGVyRXZlbnQodHlwZSwgdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUsIGNvbnRleHQpO1xuICAgICAgICAgICAgbGF5ZXIuZGlzcGF0Y2hFdmVudChldmVudF8xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QUkVSRU5ERVIsIGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wb3N0UmVuZGVyID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUE9TVFJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdHJhbnNmb3JtIGZvciByZW5kZXJpbmcgdG8gYW4gZWxlbWVudCB0aGF0IHdpbGwgYmUgcm90YXRlZCBhZnRlciByZW5kZXJpbmcuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIE9mZnNldCBvbiB0aGUgeC1heGlzIGluIHZpZXcgY29vcmRpbmF0ZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBUcmFuc2Zvcm0uXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0UmVuZGVyVHJhbnNmb3JtID0gZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHBpeGVsUmF0aW8sIHdpZHRoLCBoZWlnaHQsIG9mZnNldFgpIHtcbiAgICAgICAgdmFyIGR4MSA9IHdpZHRoIC8gMjtcbiAgICAgICAgdmFyIGR5MSA9IGhlaWdodCAvIDI7XG4gICAgICAgIHZhciBzeCA9IHBpeGVsUmF0aW8gLyByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgc3kgPSAtc3g7XG4gICAgICAgIHZhciBkeDIgPSAtY2VudGVyWzBdICsgb2Zmc2V0WDtcbiAgICAgICAgdmFyIGR5MiA9IC1jZW50ZXJbMV07XG4gICAgICAgIHJldHVybiBjb21wb3NlVHJhbnNmb3JtKHRoaXMudGVtcFRyYW5zZm9ybSwgZHgxLCBkeTEsIHN4LCBzeSwgLXJvdGF0aW9uLCBkeDIsIGR5Mik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fSBUaGUgcmVzdWx0LiAgSWYgdGhlcmUgaXMgbm8gZGF0YSBhdCB0aGUgcGl4ZWxcbiAgICAgKiAgICBsb2NhdGlvbiwgbnVsbCB3aWxsIGJlIHJldHVybmVkLiAgSWYgdGhlcmUgaXMgZGF0YSwgYnV0IHBpeGVsIHZhbHVlcyBjYW5ub3QgYmVcbiAgICAgKiAgICByZXR1cm5lZCwgYW5kIGVtcHR5IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RGF0YUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgcmVuZGVyUGl4ZWwgPSBhcHBseVRyYW5zZm9ybSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciBsYXllckV4dGVudCA9IGxheWVyLmdldEV4dGVudCgpO1xuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJDb29yZGluYXRlID0gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgICAgICAvKiogZ2V0IG9ubHkgZGF0YSBpbnNpZGUgb2YgdGhlIGxheWVyIGV4dGVudCAqL1xuICAgICAgICAgICAgaWYgKCFjb250YWluc0Nvb3JkaW5hdGUobGF5ZXJFeHRlbnQsIHJlbmRlckNvb3JkaW5hdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHggPSBNYXRoLnJvdW5kKHJlbmRlclBpeGVsWzBdKTtcbiAgICAgICAgdmFyIHkgPSBNYXRoLnJvdW5kKHJlbmRlclBpeGVsWzFdKTtcbiAgICAgICAgdmFyIHBpeGVsQ29udGV4dCA9IHRoaXMucGl4ZWxDb250ZXh0XztcbiAgICAgICAgaWYgKCFwaXhlbENvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciBwaXhlbENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgcGl4ZWxDYW52YXMud2lkdGggPSAxO1xuICAgICAgICAgICAgcGl4ZWxDYW52YXMuaGVpZ2h0ID0gMTtcbiAgICAgICAgICAgIHBpeGVsQ29udGV4dCA9IHBpeGVsQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICB0aGlzLnBpeGVsQ29udGV4dF8gPSBwaXhlbENvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcGl4ZWxDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCAxLCAxKTtcbiAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwaXhlbENvbnRleHQuZHJhd0ltYWdlKGNvbnRleHQuY2FudmFzLCB4LCB5LCAxLCAxLCAwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgIGRhdGEgPSBwaXhlbENvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGVyci5uYW1lID09PSAnU2VjdXJpdHlFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAvLyB0YWludGVkIGNhbnZhcywgd2UgYXNzdW1lIHRoZXJlIGlzIGRhdGEgYXQgdGhlIGdpdmVuIHBpeGVsIChhbHRob3VnaCB0aGVyZSBtaWdodCBub3QgYmUpXG4gICAgICAgICAgICAgICAgdGhpcy5waXhlbENvbnRleHRfID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhWzNdID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9O1xuICAgIHJldHVybiBDYW52YXNMYXllclJlbmRlcmVyO1xufShMYXllclJlbmRlcmVyKSk7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNMYXllclJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVSYW5nZVxuICovXG4vKipcbiAqIEEgcmVwcmVzZW50YXRpb24gb2YgYSBjb250aWd1b3VzIGJsb2NrIG9mIHRpbGVzLiAgQSB0aWxlIHJhbmdlIGlzIHNwZWNpZmllZFxuICogYnkgaXRzIG1pbi9tYXggdGlsZSBjb29yZGluYXRlcyBhbmQgaXMgaW5jbHVzaXZlIG9mIGNvb3JkaW5hdGVzLlxuICovXG52YXIgVGlsZVJhbmdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhYID0gbWF4WDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblkgPSBtaW5ZO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKHRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluc1hZKHRpbGVDb29yZFsxXSwgdGlsZUNvb3JkWzJdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zVGlsZVJhbmdlID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluWCA8PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgICAgICAgdGlsZVJhbmdlLm1heFggPD0gdGhpcy5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1pblkgJiZcbiAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhZIDw9IHRoaXMubWF4WSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBjb29yZGluYXRlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnNYWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblggPD0geCAmJiB4IDw9IHRoaXMubWF4WCAmJiB0aGlzLm1pblkgPD0geSAmJiB5IDw9IHRoaXMubWF4WTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBFcXVhbHMuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YID09IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICAgICAgICB0aGlzLm1pblkgPT0gdGlsZVJhbmdlLm1pblkgJiZcbiAgICAgICAgICAgIHRoaXMubWF4WCA9PSB0aWxlUmFuZ2UubWF4WCAmJlxuICAgICAgICAgICAgdGhpcy5tYXhZID09IHRpbGVSYW5nZS5tYXhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgaWYgKHRpbGVSYW5nZS5taW5YIDwgdGhpcy5taW5YKSB7XG4gICAgICAgICAgICB0aGlzLm1pblggPSB0aWxlUmFuZ2UubWluWDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZVJhbmdlLm1heFggPiB0aGlzLm1heFgpIHtcbiAgICAgICAgICAgIHRoaXMubWF4WCA9IHRpbGVSYW5nZS5tYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWluWSA8IHRoaXMubWluWSkge1xuICAgICAgICAgICAgdGhpcy5taW5ZID0gdGlsZVJhbmdlLm1pblk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVSYW5nZS5tYXhZID4gdGhpcy5tYXhZKSB7XG4gICAgICAgICAgICB0aGlzLm1heFkgPSB0aWxlUmFuZ2UubWF4WTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFkgLSB0aGlzLm1pblkgKyAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFNpemUuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW3RoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRIZWlnaHQoKV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFggLSB0aGlzLm1pblggKyAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEludGVyc2VjdHMuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5pbnRlcnNlY3RzID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluWCA8PSB0aWxlUmFuZ2UubWF4WCAmJlxuICAgICAgICAgICAgdGhpcy5tYXhYID49IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICAgICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1heFkgJiZcbiAgICAgICAgICAgIHRoaXMubWF4WSA+PSB0aWxlUmFuZ2UubWluWSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZVJhbmdlO1xufSgpKTtcbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICogQHBhcmFtIHtUaWxlUmFuZ2V9IFt0aWxlUmFuZ2VdIFRpbGVSYW5nZS5cbiAqIEByZXR1cm4ge1RpbGVSYW5nZX0gVGlsZSByYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1heFgsIG1pblksIG1heFksIHRpbGVSYW5nZSkge1xuICAgIGlmICh0aWxlUmFuZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aWxlUmFuZ2UubWluWCA9IG1pblg7XG4gICAgICAgIHRpbGVSYW5nZS5tYXhYID0gbWF4WDtcbiAgICAgICAgdGlsZVJhbmdlLm1pblkgPSBtaW5ZO1xuICAgICAgICB0aWxlUmFuZ2UubWF4WSA9IG1heFk7XG4gICAgICAgIHJldHVybiB0aWxlUmFuZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBUaWxlUmFuZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUmFuZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9jb21tb25cbiAqL1xuLyoqXG4gKiBDb250ZXh0IG9wdGlvbnMgdG8gZGlzYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5leHBvcnQgdmFyIElNQUdFX1NNT09USElOR19ESVNBQkxFRCA9IHtcbiAgICBpbWFnZVNtb290aGluZ0VuYWJsZWQ6IGZhbHNlLFxuICAgIG1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkOiBmYWxzZSxcbn07XG4vKipcbiAqIENvbnRleHQgb3B0aW9ucyB0byBlbmFibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9TTU9PVEhJTkdfRU5BQkxFRCA9IHtcbiAgICBpbWFnZVNtb290aGluZ0VuYWJsZWQ6IHRydWUsXG4gICAgbXNJbWFnZVNtb290aGluZ0VuYWJsZWQ6IHRydWUsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jc3NcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGb250UGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IHN0eWxlIFN0eWxlLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHZhcmlhbnQgVmFyaWFudC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB3ZWlnaHQgV2VpZ2h0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNpemUgU2l6ZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBsaW5lSGVpZ2h0IExpbmVIZWlnaHQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZmFtaWx5IEZhbWlseS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gZmFtaWxpZXMgRmFtaWxpZXMuXG4gKi9cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgaGlkZGVuIGZlYXR1cmUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0hJRERFTiA9ICdvbC1oaWRkZW4nO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSBzZWxlY3RhYmxlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19TRUxFQ1RBQkxFID0gJ29sLXNlbGVjdGFibGUnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSB1bnNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1VOU0VMRUNUQUJMRSA9ICdvbC11bnNlbGVjdGFibGUnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciB1bnN1cHBvcnRlZCBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19VTlNVUFBPUlRFRCA9ICdvbC11bnN1cHBvcnRlZCc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGNvbnRyb2xzLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19DT05UUk9MID0gJ29sLWNvbnRyb2wnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRoYXQgYXJlIGNvbGxhcHNlZCwgaS5lLlxuICogdG8gdGhvc2UgZWxlbWVudHMgd2hpY2ggdXN1YWxseSBjYW4gYmUgZXhwYW5kZWQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0NPTExBUFNFRCA9ICdvbC1jb2xsYXBzZWQnO1xuLyoqXG4gKiBGcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMTM1Njk3L3JlZ2V4LXRvLXBhcnNlLWFueS1jc3MtZm9udFxuICogQHR5cGUge1JlZ0V4cH1cbiAqL1xudmFyIGZvbnRSZWdFeCA9IG5ldyBSZWdFeHAoW1xuICAgICdeXFxcXHMqKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShpdGFsaWN8b2JsaXF1ZSkpPyknLFxuICAgICcoPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KHNtYWxsLWNhcHMpKT8pJyxcbiAgICAnKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShib2xkKD86ZXIpP3xsaWdodGVyfFsxLTldMDAgKSk/KScsXG4gICAgJyg/Oig/Om5vcm1hbHxcXFxcMXxcXFxcMnxcXFxcMylcXFxccyopezAsM30oKD86eHg/LSk/JyxcbiAgICAnKD86c21hbGx8bGFyZ2UpfG1lZGl1bXxzbWFsbGVyfGxhcmdlcnxbXFxcXC5cXFxcZF0rKD86XFxcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSkpJyxcbiAgICAnKD86XFxcXHMqXFxcXC9cXFxccyoobm9ybWFsfFtcXFxcLlxcXFxkXSsoPzpcXFxcJXxpbnxbY2VtXW18ZXh8cFtjdHhdKT8pKScsXG4gICAgJz9cXFxccyooWy0sXFxcXFwiXFxcXFxcJ1xcXFxzYS16XSs/KVxcXFxzKiQnLFxuXS5qb2luKCcnKSwgJ2knKTtcbnZhciBmb250UmVnRXhNYXRjaEluZGV4ID0gW1xuICAgICdzdHlsZScsXG4gICAgJ3ZhcmlhbnQnLFxuICAgICd3ZWlnaHQnLFxuICAgICdzaXplJyxcbiAgICAnbGluZUhlaWdodCcsXG4gICAgJ2ZhbWlseScsXG5dO1xuLyoqXG4gKiBHZXQgdGhlIGxpc3Qgb2YgZm9udCBmYW1pbGllcyBmcm9tIGEgZm9udCBzcGVjLiAgTm90ZSB0aGF0IHRoaXMgZG9lc24ndCB3b3JrXG4gKiBmb3IgZm9udCBmYW1pbGllcyB0aGF0IGhhdmUgY29tbWFzIGluIHRoZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udFNwZWMgVGhlIENTUyBmb250IHByb3BlcnR5LlxuICogQHJldHVybiB7Rm9udFBhcmFtZXRlcnN9IFRoZSBmb250IHBhcmFtZXRlcnMgKG9yIG51bGwgaWYgdGhlIGlucHV0IHNwZWMgaXMgaW52YWxpZCkuXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rm9udFBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICB2YXIgbWF0Y2ggPSBmb250U3BlYy5tYXRjaChmb250UmVnRXgpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBzdHlsZSA9IC8qKiBAdHlwZSB7Rm9udFBhcmFtZXRlcnN9ICovICh7XG4gICAgICAgIGxpbmVIZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICBzaXplOiAnMS4yZW0nLFxuICAgICAgICBzdHlsZTogJ25vcm1hbCcsXG4gICAgICAgIHdlaWdodDogJ25vcm1hbCcsXG4gICAgICAgIHZhcmlhbnQ6ICdub3JtYWwnLFxuICAgIH0pO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZvbnRSZWdFeE1hdGNoSW5kZXgubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBtYXRjaFtpICsgMV07XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdHlsZVtmb250UmVnRXhNYXRjaEluZGV4W2ldXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0eWxlLmZhbWlsaWVzID0gc3R5bGUuZmFtaWx5LnNwbGl0KC8sXFxzPy8pO1xuICAgIHJldHVybiBzdHlsZTtcbn07XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkgKDAuLjEpLlxuICogQHJldHVybiB7c3RyaW5nfSBDU1Mgb3BhY2l0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc09wYWNpdHkob3BhY2l0eSkge1xuICAgIHJldHVybiBvcGFjaXR5ID09PSAxID8gJycgOiBTdHJpbmcoTWF0aC5yb3VuZChvcGFjaXR5ICogMTAwKSAvIDEwMCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc3MuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovVW5pdHNcbiAqL1xuLyoqXG4gKiBQcm9qZWN0aW9uIHVuaXRzOiBgJ2RlZ3JlZXMnYCwgYCdmdCdgLCBgJ20nYCwgYCdwaXhlbHMnYCwgYCd0aWxlLXBpeGVscydgIG9yXG4gKiBgJ3VzLWZ0J2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgVW5pdHMgPSB7XG4gICAgLyoqXG4gICAgICogUmFkaWFuc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSQURJQU5TOiAncmFkaWFucycsXG4gICAgLyoqXG4gICAgICogRGVncmVlc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBERUdSRUVTOiAnZGVncmVlcycsXG4gICAgLyoqXG4gICAgICogRmVldFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBGRUVUOiAnZnQnLFxuICAgIC8qKlxuICAgICAqIE1ldGVyc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNRVRFUlM6ICdtJyxcbiAgICAvKipcbiAgICAgKiBQaXhlbHNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUElYRUxTOiAncGl4ZWxzJyxcbiAgICAvKipcbiAgICAgKiBUaWxlIFBpeGVsc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFX1BJWEVMUzogJ3RpbGUtcGl4ZWxzJyxcbiAgICAvKipcbiAgICAgKiBVUyBGZWV0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVTRkVFVDogJ3VzLWZ0Jyxcbn07XG4vKipcbiAqIFNlZSBodHRwOi8vZHVmZi5lc3Mud2FzaGluZ3Rvbi5lZHUvZGF0YS9yYXN0ZXIvZHJnL2RvY3MvZ2VvdGlmZi50eHRcbiAqIEB0eXBlIHtPYmplY3Q8bnVtYmVyLCBVbml0cz59XG4gKi9cbnZhciB1bml0QnlDb2RlID0ge1xuICAgICc5MDAxJzogVW5pdHMuTUVURVJTLFxuICAgICc5MDAyJzogVW5pdHMuRkVFVCxcbiAgICAnOTAwMyc6IFVuaXRzLlVTRkVFVCxcbiAgICAnOTEwMSc6IFVuaXRzLlJBRElBTlMsXG4gICAgJzkxMDInOiBVbml0cy5ERUdSRUVTLFxufTtcbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgVW5pdCBjb2RlLlxuICogQHJldHVybiB7VW5pdHN9IFVuaXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUNvZGUoY29kZSkge1xuICAgIHJldHVybiB1bml0QnlDb2RlW2NvZGVdO1xufVxuLyoqXG4gKiBNZXRlcnMgcGVyIHVuaXQgbG9va3VwIHRhYmxlLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7T2JqZWN0PFVuaXRzLCBudW1iZXI+fVxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIE1FVEVSU19QRVJfVU5JVCA9IHt9O1xuLy8gdXNlIHRoZSByYWRpdXMgb2YgdGhlIE5vcm1hbCBzcGhlcmVcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5SQURJQU5TXSA9IDYzNzA5OTcgLyAoMiAqIE1hdGguUEkpO1xuTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdID0gKDIgKiBNYXRoLlBJICogNjM3MDk5NykgLyAzNjA7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuRkVFVF0gPSAwLjMwNDg7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuTUVURVJTXSA9IDE7XG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuVVNGRUVUXSA9IDEyMDAgLyAzOTM3O1xuZXhwb3J0IGRlZmF1bHQgVW5pdHM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Vbml0cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9Qcm9qZWN0aW9uXG4gKi9cbmltcG9ydCB7IE1FVEVSU19QRVJfVU5JVCB9IGZyb20gJy4vVW5pdHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29kZSBUaGUgU1JTIGlkZW50aWZpZXIgY29kZSwgZS5nLiBgRVBTRzo0MzI2YC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fHN0cmluZ30gW3VuaXRzXSBVbml0cy4gUmVxdWlyZWQgdW5sZXNzIGFcbiAqIHByb2o0IHByb2plY3Rpb24gaXMgZGVmaW5lZCBmb3IgYGNvZGVgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb249J2VudSddIFRoZSBheGlzIG9yaWVudGF0aW9uIGFzIHNwZWNpZmllZCBpbiBQcm9qNC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dsb2JhbD1mYWxzZV0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyB2YWxpZCBmb3IgdGhlIHdob2xlIGdsb2JlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttZXRlcnNQZXJVbml0XSBUaGUgbWV0ZXJzIHBlciB1bml0IGZvciB0aGUgU1JTLlxuICogSWYgbm90IHByb3ZpZGVkLCB0aGUgYHVuaXRzYCBhcmUgdXNlZCB0byBnZXQgdGhlIG1ldGVycyBwZXIgdW5pdCBmcm9tIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovVW5pdHN+TUVURVJTX1BFUl9VTklUfVxuICogbG9va3VwIHRhYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbd29ybGRFeHRlbnRdIFRoZSB3b3JsZCBleHRlbnQgZm9yIHRoZSBTUlMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IFtnZXRQb2ludFJlc29sdXRpb25dXG4gKiBGdW5jdGlvbiB0byBkZXRlcm1pbmUgcmVzb2x1dGlvbiBhdCBhIHBvaW50LiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYVxuICogYG51bWJlcmAgdmlldyByZXNvbHV0aW9uIGFuZCBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlIENvb3JkaW5hdGV9IGFzIGFyZ3VtZW50cywgYW5kIHJldHVybnNcbiAqIHRoZSBgbnVtYmVyYCByZXNvbHV0aW9uIGluIHByb2plY3Rpb24gdW5pdHMgYXQgdGhlIHBhc3NlZCBjb29yZGluYXRlLiBJZiB0aGlzIGlzIGB1bmRlZmluZWRgLFxuICogdGhlIGRlZmF1bHQge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmdldFBvaW50UmVzb2x1dGlvbiBnZXRQb2ludFJlc29sdXRpb24oKX0gZnVuY3Rpb24gd2lsbCBiZSB1c2VkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gZGVmaW5pdGlvbiBjbGFzcy4gT25lIG9mIHRoZXNlIGlzIGNyZWF0ZWQgZm9yIGVhY2ggcHJvamVjdGlvblxuICogc3VwcG9ydGVkIGluIHRoZSBhcHBsaWNhdGlvbiBhbmQgc3RvcmVkIGluIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p9IG5hbWVzcGFjZS5cbiAqIFlvdSBjYW4gdXNlIHRoZXNlIGluIGFwcGxpY2F0aW9ucywgYnV0IHRoaXMgaXMgbm90IHJlcXVpcmVkLCBhcyBBUEkgcGFyYW1zXG4gKiBhbmQgb3B0aW9ucyB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qflByb2plY3Rpb25MaWtlfSB3aGljaCBtZWFucyB0aGUgc2ltcGxlIHN0cmluZ1xuICogY29kZSB3aWxsIHN1ZmZpY2UuXG4gKlxuICogWW91IGNhbiB1c2Uge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmdldH0gdG8gcmV0cmlldmUgdGhlIG9iamVjdCBmb3IgYSBwYXJ0aWN1bGFyXG4gKiBwcm9qZWN0aW9uLlxuICpcbiAqIFRoZSBsaWJyYXJ5IGluY2x1ZGVzIGRlZmluaXRpb25zIGZvciBgRVBTRzo0MzI2YCBhbmQgYEVQU0c6Mzg1N2AsIHRvZ2V0aGVyXG4gKiB3aXRoIHRoZSBmb2xsb3dpbmcgYWxpYXNlczpcbiAqICogYEVQU0c6NDMyNmA6IENSUzo4NCwgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni42OjQzMjYsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQsIHVybjpvZ2M6ZGVmOmNyczpPR0M6Mjo4NCxcbiAqICAgICBodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjNDMyNixcbiAqICAgICB1cm46eC1vZ2M6ZGVmOmNyczpFUFNHOjQzMjZcbiAqICogYEVQU0c6Mzg1N2A6IEVQU0c6MTAyMTAwLCBFUFNHOjEwMjExMywgRVBTRzo5MDA5MTMsXG4gKiAgICAgdXJuOm9nYzpkZWY6Y3JzOkVQU0c6Ni4xODozOjM4NTcsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTdcbiAqXG4gKiBJZiB5b3UgdXNlIFtwcm9qNGpzXShodHRwczovL2dpdGh1Yi5jb20vcHJvajRqcy9wcm9qNGpzKSwgYWxpYXNlcyBjYW5cbiAqIGJlIGFkZGVkIHVzaW5nIGBwcm9qNC5kZWZzKClgLiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmVcbiAqIGFkZGVkLCBjYWxsIHRoZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovcHJvajQucmVnaXN0ZXJ9IGZ1bmN0aW9uLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFByb2plY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFByb2plY3Rpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQcm9qZWN0aW9uKG9wdGlvbnMpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvZGVfID0gb3B0aW9ucy5jb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVW5pdHMgb2YgcHJvamVjdGVkIGNvb3JkaW5hdGVzLiBXaGVuIHNldCB0byBgVElMRV9QSVhFTFNgLCBhXG4gICAgICAgICAqIGB0aGlzLmV4dGVudF9gIGFuZCBgdGhpcy53b3JsZEV4dGVudF9gIG11c3QgYmUgY29uZmlndXJlZCBwcm9wZXJseSBmb3IgZWFjaFxuICAgICAgICAgKiB0aWxlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy51bml0c18gPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdH0gKi8gKG9wdGlvbnMudW5pdHMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVmFsaWRpdHkgZXh0ZW50IG9mIHRoZSBwcm9qZWN0aW9uIGluIHByb2plY3RlZCBjb29yZGluYXRlcy4gRm9yIHByb2plY3Rpb25zXG4gICAgICAgICAqIHdpdGggYFRJTEVfUElYRUxTYCB1bml0cywgdGhpcyBpcyB0aGUgZXh0ZW50IG9mIHRoZSB0aWxlIGluXG4gICAgICAgICAqIHRpbGUgcGl4ZWwgc3BhY2UuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHRlbnRfID0gb3B0aW9ucy5leHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZXh0ZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV4dGVudCBvZiB0aGUgd29ybGQgaW4gRVBTRzo0MzI2LiBGb3IgcHJvamVjdGlvbnMgd2l0aFxuICAgICAgICAgKiBgVElMRV9QSVhFTFNgIHVuaXRzLCB0aGlzIGlzIHRoZSBleHRlbnQgb2YgdGhlIHRpbGUgaW5cbiAgICAgICAgICogcHJvamVjdGVkIGNvb3JkaW5hdGUgc3BhY2UuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53b3JsZEV4dGVudF8gPVxuICAgICAgICAgICAgb3B0aW9ucy53b3JsZEV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53b3JsZEV4dGVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5heGlzT3JpZW50YXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXhpc09yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiA6ICdlbnUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdsb2JhbF8gPSBvcHRpb25zLmdsb2JhbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5nbG9iYWwgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgdGhpcy5leHRlbnRfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18gPSBvcHRpb25zLmdldFBvaW50UmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZXRlcnNQZXJVbml0XyA9IG9wdGlvbnMubWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHByb2plY3Rpb24gaXMgc3VpdGFibGUgZm9yIHdyYXBwaW5nIHRoZSB4LWF4aXNcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5jYW5XcmFwWCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FuV3JhcFhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb2RlIGZvciB0aGlzIHByb2plY3Rpb24sIGUuZy4gJ0VQU0c6NDMyNicuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBDb2RlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRDb2RlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2RlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHVuaXRzIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9IFVuaXRzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRVbml0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudW5pdHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbW91bnQgb2YgbWV0ZXJzIHBlciB1bml0IG9mIHRoaXMgcHJvamVjdGlvbi4gIElmIHRoZSBwcm9qZWN0aW9uIGlzXG4gICAgICogbm90IGNvbmZpZ3VyZWQgd2l0aCBgbWV0ZXJzUGVyVW5pdGAgb3IgYSB1bml0cyBpZGVudGlmaWVyLCB0aGUgcmV0dXJuIGlzXG4gICAgICogYHVuZGVmaW5lZGAuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gTWV0ZXJzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRNZXRlcnNQZXJVbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRlcnNQZXJVbml0XyB8fCBNRVRFUlNfUEVSX1VOSVRbdGhpcy51bml0c19dO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB3b3JsZCBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53b3JsZEV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGF4aXMgb3JpZW50YXRpb24gb2YgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEV4YW1wbGUgdmFsdWVzIGFyZTpcbiAgICAgKiBlbnUgLSB0aGUgZGVmYXVsdCBlYXN0aW5nLCBub3J0aGluZywgZWxldmF0aW9uLlxuICAgICAqIG5ldSAtIG5vcnRoaW5nLCBlYXN0aW5nLCB1cCAtIHVzZWZ1bCBmb3IgXCJsYXQvbG9uZ1wiIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMsXG4gICAgICogICAgIG9yIHNvdXRoIG9yaWVudGF0ZWQgdHJhbnN2ZXJzZSBtZXJjYXRvci5cbiAgICAgKiB3bnUgLSB3ZXN0aW5nLCBub3J0aGluZywgdXAgLSBzb21lIHBsYW5ldGFyeSBjb29yZGluYXRlIHN5c3RlbXMgaGF2ZVxuICAgICAqICAgICBcIndlc3QgcG9zaXRpdmVcIiBjb29yZGluYXRlIHN5c3RlbXNcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEF4aXMgb3JpZW50YXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldEF4aXNPcmllbnRhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXhpc09yaWVudGF0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIElzIHRoaXMgcHJvamVjdGlvbiBhIGdsb2JhbCBwcm9qZWN0aW9uIHdoaWNoIHNwYW5zIHRoZSB3aG9sZSB3b3JsZD9cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuaXNHbG9iYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdsb2JhbF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgaWYgdGhlIHByb2plY3Rpb24gaXMgYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGdsb2JhbCBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2xvYmFsID0gZnVuY3Rpb24gKGdsb2JhbCkge1xuICAgICAgICB0aGlzLmdsb2JhbF8gPSBnbG9iYWw7XG4gICAgICAgIHRoaXMuY2FuV3JhcFhfID0gISEoZ2xvYmFsICYmIHRoaXMuZXh0ZW50Xyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaGUgZGVmYXVsdCB0aWxlIGdyaWQuXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RGVmYXVsdFRpbGVHcmlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0VGlsZUdyaWRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaGUgZGVmYXVsdCB0aWxlIGdyaWQuXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0RGVmYXVsdFRpbGVHcmlkID0gZnVuY3Rpb24gKHRpbGVHcmlkKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IHRpbGVHcmlkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldEV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdGhpcy5leHRlbnRfID0gZXh0ZW50O1xuICAgICAgICB0aGlzLmNhbldyYXBYXyA9ICEhKHRoaXMuZ2xvYmFsXyAmJiBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB3b3JsZCBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHdvcmxkRXh0ZW50IFdvcmxkIGV4dGVudFxuICAgICAqICAgICBbbWlubG9uLCBtaW5sYXQsIG1heGxvbiwgbWF4bGF0XS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0V29ybGRFeHRlbnQgPSBmdW5jdGlvbiAod29ybGRFeHRlbnQpIHtcbiAgICAgICAgdGhpcy53b3JsZEV4dGVudF8gPSB3b3JsZEV4dGVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZ2V0UG9pbnRSZXNvbHV0aW9uIGZ1bmN0aW9uIChzZWUge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmdldFBvaW50UmVzb2x1dGlvbn1cbiAgICAgKiBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcn0gZnVuYyBGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRHZXRQb2ludFJlc29sdXRpb24gPSBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gZnVuYztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VzdG9tIHBvaW50IHJlc29sdXRpb24gZnVuY3Rpb24gZm9yIHRoaXMgcHJvamVjdGlvbiAoaWYgc2V0KS5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGN1c3RvbSBwb2ludFxuICAgICAqIHJlc29sdXRpb24gZnVuY3Rpb24gKGlmIHNldCkuXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY187XG4gICAgfTtcbiAgICByZXR1cm4gUHJvamVjdGlvbjtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBQcm9qZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvamVjdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzM4NTdcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcbmltcG9ydCB7IGNvc2ggfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogUmFkaXVzIG9mIFdHUzg0IHNwaGVyZVxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBSQURJVVMgPSA2Mzc4MTM3O1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgSEFMRl9TSVpFID0gTWF0aC5QSSAqIFJBRElVUztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbLUhBTEZfU0laRSwgLUhBTEZfU0laRSwgSEFMRl9TSVpFLCBIQUxGX1NJWkVdO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICovXG5leHBvcnQgdmFyIFdPUkxEX0VYVEVOVCA9IFstMTgwLCAtODUsIDE4MCwgODVdO1xuLyoqXG4gKiBNYXhpbXVtIHNhZmUgdmFsdWUgaW4geSBkaXJlY3Rpb25cbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBNQVhfU0FGRV9ZID0gUkFESVVTICogTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDIpKTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIHdlYi9zcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKi9cbnZhciBFUFNHMzg1N1Byb2plY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVQU0czODU3UHJvamVjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29kZSBDb2RlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEVQU0czODU3UHJvamVjdGlvbihjb2RlKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgdW5pdHM6IFVuaXRzLk1FVEVSUyxcbiAgICAgICAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgICAgICAgd29ybGRFeHRlbnQ6IFdPUkxEX0VYVEVOVCxcbiAgICAgICAgICAgIGdldFBvaW50UmVzb2x1dGlvbjogZnVuY3Rpb24gKHJlc29sdXRpb24sIHBvaW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb24gLyBjb3NoKHBvaW50WzFdIC8gUkFESVVTKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBFUFNHMzg1N1Byb2plY3Rpb247XG59KFByb2plY3Rpb24pKTtcbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzozODU3LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IHZhciBQUk9KRUNUSU9OUyA9IFtcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjM4NTcnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjEwMCcpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6MTAyMTEzJyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzo5MDA5MTMnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdodHRwOi8vd3d3Lm9wZW5naXMubmV0L2RlZi9jcnMvRVBTRy8wLzM4NTcnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjMzg1NycpLFxuXTtcbi8qKlxuICogVHJhbnNmb3JtYXRpb24gZnJvbSBFUFNHOjQzMjYgdG8gRVBTRzozODU3LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUVQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIgZGltZW5zaW9uID0gb3B0X2RpbWVuc2lvbiA+IDEgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICBpZiAob3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgICAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgICAgICBvdXRwdXRbaV0gPSAoSEFMRl9TSVpFICogaW5wdXRbaV0pIC8gMTgwO1xuICAgICAgICB2YXIgeSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKChNYXRoLlBJICogKCtpbnB1dFtpICsgMV0gKyA5MCkpIC8gMzYwKSk7XG4gICAgICAgIGlmICh5ID4gTUFYX1NBRkVfWSkge1xuICAgICAgICAgICAgeSA9IE1BWF9TQUZFX1k7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoeSA8IC1NQVhfU0FGRV9ZKSB7XG4gICAgICAgICAgICB5ID0gLU1BWF9TQUZFX1k7XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0W2kgKyAxXSA9IHk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vKipcbiAqIFRyYW5zZm9ybWF0aW9uIGZyb20gRVBTRzozODU3IHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24gKGRlZmF1bHQgaXMgYDJgKS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRVBTRzQzMjYoaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0O1xuICAgIGlmIChvdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZGltZW5zaW9uID4gMikge1xuICAgICAgICAgICAgLy8gcHJlc2VydmUgdmFsdWVzIGJleW9uZCBzZWNvbmQgZGltZW5zaW9uXG4gICAgICAgICAgICBvdXRwdXQgPSBpbnB1dC5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgIG91dHB1dFtpXSA9ICgxODAgKiBpbnB1dFtpXSkgLyBIQUxGX1NJWkU7XG4gICAgICAgIG91dHB1dFtpICsgMV0gPVxuICAgICAgICAgICAgKDM2MCAqIE1hdGguYXRhbihNYXRoLmV4cChpbnB1dFtpICsgMV0gLyBSQURJVVMpKSkgLyBNYXRoLlBJIC0gOTA7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcHNnMzg1Ny5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzQzMjZcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL1VuaXRzLmpzJztcbi8qKlxuICogU2VtaS1tYWpvciByYWRpdXMgb2YgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcbi8qKlxuICogRXh0ZW50IG9mIHRoZSBFUFNHOjQzMjYgcHJvamVjdGlvbiB3aGljaCBpcyB0aGUgd2hvbGUgd29ybGQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBFWFRFTlQgPSBbLTE4MCwgLTkwLCAxODAsIDkwXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIE1FVEVSU19QRVJfVU5JVCA9IChNYXRoLlBJICogUkFESVVTKSAvIDE4MDtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIFdHUzg0IGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKEVQU0c6NDMyNikuXG4gKlxuICogTm90ZSB0aGF0IE9wZW5MYXllcnMgZG9lcyBub3Qgc3RyaWN0bHkgY29tcGx5IHdpdGggdGhlIEVQU0cgZGVmaW5pdGlvbi5cbiAqIFRoZSBFUFNHIHJlZ2lzdHJ5IGRlZmluZXMgNDMyNiBhcyBhIENSUyBmb3IgTGF0aXR1ZGUsTG9uZ2l0dWRlICh5LHgpLlxuICogT3BlbkxheWVycyB0cmVhdHMgRVBTRzo0MzI2IGFzIGEgcHNldWRvLXByb2plY3Rpb24sIHdpdGggeCx5IGNvb3JkaW5hdGVzLlxuICovXG52YXIgRVBTRzQzMjZQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHNDMyNlByb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdF9heGlzT3JpZW50YXRpb25dIEF4aXMgb3JpZW50YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gRVBTRzQzMjZQcm9qZWN0aW9uKGNvZGUsIG9wdF9heGlzT3JpZW50YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGNvZGU6IGNvZGUsXG4gICAgICAgICAgICB1bml0czogVW5pdHMuREVHUkVFUyxcbiAgICAgICAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgICAgICAgYXhpc09yaWVudGF0aW9uOiBvcHRfYXhpc09yaWVudGF0aW9uLFxuICAgICAgICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgICAgICAgbWV0ZXJzUGVyVW5pdDogTUVURVJTX1BFUl9VTklULFxuICAgICAgICAgICAgd29ybGRFeHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEVQU0c0MzI2UHJvamVjdGlvbjtcbn0oUHJvamVjdGlvbikpO1xuLyoqXG4gKiBQcm9qZWN0aW9ucyBlcXVhbCB0byBFUFNHOjQzMjYuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICovXG5leHBvcnQgdmFyIFBST0pFQ1RJT05TID0gW1xuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ0NSUzo4NCcpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ0VQU0c6NDMyNicsICduZXUnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCcpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpPR0M6Mjo4NCcpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZGVmL2Nycy9PR0MvMS4zL0NSUzg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYnLCAnbmV1JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9kZWYvY3JzL0VQU0cvMC80MzI2JywgJ25ldScpLFxuXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVwc2c0MzI2LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL3Byb2plY3Rpb25zXG4gKi9cbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xudmFyIGNhY2hlID0ge307XG4vKipcbiAqIENsZWFyIHRoZSBwcm9qZWN0aW9ucyBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIGNhY2hlID0ge307XG59XG4vKipcbiAqIEdldCBhIGNhY2hlZCBwcm9qZWN0aW9uIGJ5IGNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29kZSBUaGUgY29kZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gVGhlIHByb2plY3Rpb24gKGlmIGNhY2hlZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoY29kZSkge1xuICAgIHJldHVybiAoY2FjaGVbY29kZV0gfHxcbiAgICAgICAgY2FjaGVbY29kZS5yZXBsYWNlKC91cm46KHgtKT9vZ2M6ZGVmOmNyczpFUFNHOiguKjopPyhcXHcrKSQvLCAnRVBTRzokMycpXSB8fFxuICAgICAgICBudWxsKTtcbn1cbi8qKlxuICogQWRkIGEgcHJvamVjdGlvbiB0byB0aGUgY2FjaGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29kZSBUaGUgcHJvamVjdGlvbiBjb2RlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbiB0byBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChjb2RlLCBwcm9qZWN0aW9uKSB7XG4gICAgY2FjaGVbY29kZV0gPSBwcm9qZWN0aW9uO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvamVjdGlvbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovdHJhbnNmb3Jtc1xuICovXG5pbXBvcnQgeyBpc0VtcHR5IH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbj4+fVxuICovXG52YXIgdHJhbnNmb3JtcyA9IHt9O1xuLyoqXG4gKiBDbGVhciB0aGUgdHJhbnNmb3JtIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgdHJhbnNmb3JtcyA9IHt9O1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgYSBjb252ZXJzaW9uIGZ1bmN0aW9uIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBTb3VyY2UuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKHNvdXJjZSwgZGVzdGluYXRpb24sIHRyYW5zZm9ybUZuKSB7XG4gICAgdmFyIHNvdXJjZUNvZGUgPSBzb3VyY2UuZ2V0Q29kZSgpO1xuICAgIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvbi5nZXRDb2RlKCk7XG4gICAgaWYgKCEoc291cmNlQ29kZSBpbiB0cmFuc2Zvcm1zKSkge1xuICAgICAgICB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdID0ge307XG4gICAgfVxuICAgIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXSA9IHRyYW5zZm9ybUZuO1xufVxuLyoqXG4gKiBVbnJlZ2lzdGVycyB0aGUgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi4gIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY2xlYW4gdXBcbiAqIGNhY2hlZCB0cmFuc2Zvcm1zIGR1cmluZyB0ZXN0aW5nLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUaGUgdW5yZWdpc3RlcmVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIHNvdXJjZUNvZGUgPSBzb3VyY2UuZ2V0Q29kZSgpO1xuICAgIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICAgIGlmIChpc0VtcHR5KHRyYW5zZm9ybXNbc291cmNlQ29kZV0pKSB7XG4gICAgICAgIGRlbGV0ZSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBHZXQgYSB0cmFuc2Zvcm0gZ2l2ZW4gYSBzb3VyY2UgY29kZSBhbmQgYSBkZXN0aW5hdGlvbiBjb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHNvdXJjZUNvZGUgVGhlIGNvZGUgZm9yIHRoZSBzb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbkNvZGUgVGhlIGNvZGUgZm9yIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbnx1bmRlZmluZWR9IFRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gKGlmIGZvdW5kKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChzb3VyY2VDb2RlLCBkZXN0aW5hdGlvbkNvZGUpIHtcbiAgICB2YXIgdHJhbnNmb3JtO1xuICAgIGlmIChzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMgJiYgZGVzdGluYXRpb25Db2RlIGluIHRyYW5zZm9ybXNbc291cmNlQ29kZV0pIHtcbiAgICAgICAgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3Jtcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3BoZXJlXG4gKi9cbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgeyB0b0RlZ3JlZXMsIHRvUmFkaWFucyB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggb3B0aW9ucyBmb3IgdGhlIHtAbGluayBnZXRMZW5ndGh9IG9yIHtAbGluayBnZXRBcmVhfVxuICogZnVuY3Rpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gU3BoZXJlTWV0cmljT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXVxuICogUHJvamVjdGlvbiBvZiB0aGUgIGdlb21ldHJ5LiAgQnkgZGVmYXVsdCwgdGhlIGdlb21ldHJ5IGlzIGFzc3VtZWQgdG8gYmUgaW5cbiAqIFdlYiBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmFkaXVzPTYzNzEwMDguOF0gU3BoZXJlIHJhZGl1cy4gIEJ5IGRlZmF1bHQsIHRoZVxuICogW21lYW4gRWFydGggcmFkaXVzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FYXJ0aF9yYWRpdXMjTWVhbl9yYWRpdXMpXG4gKiBmb3IgdGhlIFdHUzg0IGVsbGlwc29pZCBpcyB1c2VkLlxuICovXG4vKipcbiAqIFRoZSBtZWFuIEVhcnRoIHJhZGl1cyAoMS8zICogKDJhICsgYikpIGZvciB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRWFydGhfcmFkaXVzI01lYW5fcmFkaXVzXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfUkFESVVTID0gNjM3MTAwOC44O1xuLyoqXG4gKiBHZXQgdGhlIGdyZWF0IGNpcmNsZSBkaXN0YW5jZSAoaW4gbWV0ZXJzKSBiZXR3ZWVuIHR3byBnZW9ncmFwaGljIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheX0gYzEgU3RhcnRpbmcgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7QXJyYXl9IGMyIEVuZGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcmFkaXVzXSBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuICBEZWZhdWx0cyB0byB0aGUgRWFydGgnc1xuICogICAgIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBncmVhdCBjaXJjbGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzIChpbiBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGlzdGFuY2UoYzEsIGMyLCBvcHRfcmFkaXVzKSB7XG4gICAgdmFyIHJhZGl1cyA9IG9wdF9yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIGxhdDEgPSB0b1JhZGlhbnMoYzFbMV0pO1xuICAgIHZhciBsYXQyID0gdG9SYWRpYW5zKGMyWzFdKTtcbiAgICB2YXIgZGVsdGFMYXRCeTIgPSAobGF0MiAtIGxhdDEpIC8gMjtcbiAgICB2YXIgZGVsdGFMb25CeTIgPSB0b1JhZGlhbnMoYzJbMF0gLSBjMVswXSkgLyAyO1xuICAgIHZhciBhID0gTWF0aC5zaW4oZGVsdGFMYXRCeTIpICogTWF0aC5zaW4oZGVsdGFMYXRCeTIpICtcbiAgICAgICAgTWF0aC5zaW4oZGVsdGFMb25CeTIpICpcbiAgICAgICAgICAgIE1hdGguc2luKGRlbHRhTG9uQnkyKSAqXG4gICAgICAgICAgICBNYXRoLmNvcyhsYXQxKSAqXG4gICAgICAgICAgICBNYXRoLmNvcyhsYXQyKTtcbiAgICByZXR1cm4gMiAqIHJhZGl1cyAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMSAtIGEpKTtcbn1cbi8qKlxuICogR2V0IHRoZSBjdW11bGF0aXZlIGdyZWF0IGNpcmNsZSBsZW5ndGggb2YgbGluZXN0cmluZyBjb29yZGluYXRlcyAoZ2VvZ3JhcGhpYykuXG4gKiBAcGFyYW0ge0FycmF5fSBjb29yZGluYXRlcyBMaW5lc3RyaW5nIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggKGluIG1ldGVycykuXG4gKi9cbmZ1bmN0aW9uIGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpIHtcbiAgICB2YXIgbGVuZ3RoID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaSAtIDE7ICsraSkge1xuICAgICAgICBsZW5ndGggKz0gZ2V0RGlzdGFuY2UoY29vcmRpbmF0ZXNbaV0sIGNvb3JkaW5hdGVzW2kgKyAxXSwgcmFkaXVzKTtcbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbi8qKlxuICogR2V0IHRoZSBzcGhlcmljYWwgbGVuZ3RoIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZVxuICogZ3JlYXQgY2lyY2xlIGRpc3RhbmNlcyBiZXR3ZWVuIGNvb3JkaW5hdGVzLiAgRm9yIHBvbHlnb25zLCB0aGUgbGVuZ3RoIGlzXG4gKiB0aGUgc3VtIG9mIGFsbCByaW5ncy4gIEZvciBwb2ludHMsIHRoZSBsZW5ndGggaXMgemVyby4gIEZvciBtdWx0aS1wYXJ0XG4gKiBnZW9tZXRyaWVzLCB0aGUgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlIGxlbmd0aCBvZiBlYWNoIHBhcnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMgZm9yIHRoZVxuICogbGVuZ3RoIGNhbGN1bGF0aW9uLiAgQnkgZGVmYXVsdCwgZ2VvbWV0cmllcyBhcmUgYXNzdW1lZCB0byBiZSBpbiAnRVBTRzozODU3Jy5cbiAqIFlvdSBjYW4gY2hhbmdlIHRoaXMgYnkgcHJvdmlkaW5nIGEgYHByb2plY3Rpb25gIG9wdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNwaGVyaWNhbCBsZW5ndGggKGluIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGgoZ2VvbWV0cnksIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gfHwgJ0VQU0c6Mzg1Nyc7XG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgaWYgKHR5cGUgIT09IEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OKSB7XG4gICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIH1cbiAgICB2YXIgbGVuZ3RoID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORzoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBsZW5ndGggPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046IHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyaWVzID0gXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRHZW9tZXRyaWVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGgoZ2VvbWV0cmllc1tpXSwgb3B0X29wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAnICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgc3BoZXJpY2FsIGFyZWEgZm9yIGEgbGlzdCBvZiBjb29yZGluYXRlcy5cbiAqXG4gKiBbUmVmZXJlbmNlXShodHRwczovL3Rycy5qcGwubmFzYS5nb3YvaGFuZGxlLzIwMTQvNDA0MDkpXG4gKiBSb2JlcnQuIEcuIENoYW1iZXJsYWluIGFuZCBXaWxsaWFtIEguIER1cXVldHRlLCBcIlNvbWUgQWxnb3JpdGhtcyBmb3JcbiAqIFBvbHlnb25zIG9uIGEgU3BoZXJlXCIsIEpQTCBQdWJsaWNhdGlvbiAwNy0wMywgSmV0IFByb3B1bHNpb25cbiAqIExhYm9yYXRvcnksIFBhc2FkZW5hLCBDQSwgSnVuZSAyMDA3XG4gKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIExpc3Qgb2YgY29vcmRpbmF0ZXMgb2YgYSBsaW5lYXJcbiAqIHJpbmcuIElmIHRoZSByaW5nIGlzIG9yaWVudGVkIGNsb2Nrd2lzZSwgdGhlIGFyZWEgd2lsbCBiZSBwb3NpdGl2ZSxcbiAqIG90aGVyd2lzZSBpdCB3aWxsIGJlIG5lZ2F0aXZlLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgc3BoZXJlIHJhZGl1cy5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAoaW4gc3F1YXJlIG1ldGVycykuXG4gKi9cbmZ1bmN0aW9uIGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIHZhciBsZW4gPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgdmFyIHgxID0gY29vcmRpbmF0ZXNbbGVuIC0gMV1bMF07XG4gICAgdmFyIHkxID0gY29vcmRpbmF0ZXNbbGVuIC0gMV1bMV07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgeDIgPSBjb29yZGluYXRlc1tpXVswXTtcbiAgICAgICAgdmFyIHkyID0gY29vcmRpbmF0ZXNbaV1bMV07XG4gICAgICAgIGFyZWEgKz1cbiAgICAgICAgICAgIHRvUmFkaWFucyh4MiAtIHgxKSAqXG4gICAgICAgICAgICAgICAgKDIgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTEpKSArIE1hdGguc2luKHRvUmFkaWFucyh5MikpKTtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIChhcmVhICogcmFkaXVzICogcmFkaXVzKSAvIDIuMDtcbn1cbi8qKlxuICogR2V0IHRoZSBzcGhlcmljYWwgYXJlYSBvZiBhIGdlb21ldHJ5LiAgVGhpcyBpcyB0aGUgYXJlYSAoaW4gbWV0ZXJzKSBhc3N1bWluZ1xuICogdGhhdCBwb2x5Z29uIGVkZ2VzIGFyZSBzZWdtZW50cyBvZiBncmVhdCBjaXJjbGVzIG9uIGEgc3BoZXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zIGZvciB0aGUgYXJlYVxuICogICAgIGNhbGN1bGF0aW9uLiAgQnkgZGVmYXVsdCwgZ2VvbWV0cmllcyBhcmUgYXNzdW1lZCB0byBiZSBpbiAnRVBTRzozODU3Jy5cbiAqICAgICBZb3UgY2FuIGNoYW5nZSB0aGlzIGJ5IHByb3ZpZGluZyBhIGBwcm9qZWN0aW9uYCBvcHRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBzcGhlcmljYWwgYXJlYSAoaW4gc3F1YXJlIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmVhKGdlb21ldHJ5LCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uIHx8ICdFUFNHOjM4NTcnO1xuICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICAgIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCkudHJhbnNmb3JtKHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICB9XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIHZhciBjb29yZGluYXRlcywgY29vcmRzLCBpLCBpaSwgaiwgamo7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPSU5UOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORzoge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9MWUdPTjoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGFyZWEgPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXNbMF0sIHJhZGl1cykpO1xuICAgICAgICAgICAgZm9yIChpID0gMSwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXNbaV0sIHJhZGl1cykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb29yZHMgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgICAgICBhcmVhICs9IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZHNbMF0sIHJhZGl1cykpO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDEsIGpqID0gY29vcmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgYXJlYSAtPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzW2pdLCByYWRpdXMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OOiB7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cmllcyA9IFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBhcmVhICs9IGdldEFyZWEoZ2VvbWV0cmllc1tpXSwgb3B0X29wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAnICsgdHlwZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgYXQgdGhlIGdpdmVuIGRpc3RhbmNlIGFuZCBiZWFyaW5nIGZyb20gYGMxYC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjMSBUaGUgb3JpZ2luIHBvaW50IChgW2xvbiwgbGF0XWAgaW4gZGVncmVlcykuXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgVGhlIGdyZWF0LWNpcmNsZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBvcmlnaW5cbiAqICAgICBwb2ludCBhbmQgdGhlIHRhcmdldCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWFyaW5nIFRoZSBiZWFyaW5nIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3JhZGl1c10gVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSB0YXJnZXQgcG9pbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvZmZzZXQoYzEsIGRpc3RhbmNlLCBiZWFyaW5nLCBvcHRfcmFkaXVzKSB7XG4gICAgdmFyIHJhZGl1cyA9IG9wdF9yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIGxhdDEgPSB0b1JhZGlhbnMoYzFbMV0pO1xuICAgIHZhciBsb24xID0gdG9SYWRpYW5zKGMxWzBdKTtcbiAgICB2YXIgZEJ5UiA9IGRpc3RhbmNlIC8gcmFkaXVzO1xuICAgIHZhciBsYXQgPSBNYXRoLmFzaW4oTWF0aC5zaW4obGF0MSkgKiBNYXRoLmNvcyhkQnlSKSArXG4gICAgICAgIE1hdGguY29zKGxhdDEpICogTWF0aC5zaW4oZEJ5UikgKiBNYXRoLmNvcyhiZWFyaW5nKSk7XG4gICAgdmFyIGxvbiA9IGxvbjEgK1xuICAgICAgICBNYXRoLmF0YW4yKE1hdGguc2luKGJlYXJpbmcpICogTWF0aC5zaW4oZEJ5UikgKiBNYXRoLmNvcyhsYXQxKSwgTWF0aC5jb3MoZEJ5UikgLSBNYXRoLnNpbihsYXQxKSAqIE1hdGguc2luKGxhdCkpO1xuICAgIHJldHVybiBbdG9EZWdyZWVzKGxvbiksIHRvRGVncmVlcyhsYXQpXTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNwaGVyZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvalxuICovXG4vKipcbiAqIFRoZSBvbC9wcm9qIG1vZHVsZSBzdG9yZXM6XG4gKiAqIGEgbGlzdCBvZiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn1cbiAqIG9iamVjdHMsIG9uZSBmb3IgZWFjaCBwcm9qZWN0aW9uIHN1cHBvcnRlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqICogYSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgbmVlZGVkIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgaW4gb25lIHByb2plY3Rpb25cbiAqIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgc3RhdGljIGZ1bmN0aW9ucyBhcmUgdGhlIG1ldGhvZHMgdXNlZCB0byBtYWludGFpbiB0aGVzZS5cbiAqIEVhY2ggdHJhbnNmb3JtIGZ1bmN0aW9uIGNhbiBoYW5kbGUgbm90IG9ubHkgc2ltcGxlIGNvb3JkaW5hdGUgcGFpcnMsIGJ1dCBhbHNvXG4gKiBsYXJnZSBhcnJheXMgb2YgY29vcmRpbmF0ZXMgc3VjaCBhcyB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBXaGVuIGxvYWRlZCwgdGhlIGxpYnJhcnkgYWRkcyBwcm9qZWN0aW9uIG9iamVjdHMgZm9yIEVQU0c6NDMyNiAoV0dTODRcbiAqIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMpIGFuZCBFUFNHOjM4NTcgKFdlYiBvciBTcGhlcmljYWwgTWVyY2F0b3IsIGFzIHVzZWRcbiAqIGZvciBleGFtcGxlIGJ5IEJpbmcgTWFwcyBvciBPcGVuU3RyZWV0TWFwKSwgdG9nZXRoZXIgd2l0aCB0aGUgcmVsZXZhbnRcbiAqIHRyYW5zZm9ybSBmdW5jdGlvbnMuXG4gKlxuICogQWRkaXRpb25hbCB0cmFuc2Zvcm1zIG1heSBiZSBhZGRlZCBieSB1c2luZyB0aGUgaHR0cDovL3Byb2o0anMub3JnL1xuICogbGlicmFyeSAodmVyc2lvbiAyLjIgb3IgbGF0ZXIpLiBZb3UgY2FuIHVzZSB0aGUgZnVsbCBidWlsZCBzdXBwbGllZCBieVxuICogUHJvajRqcywgb3IgY3JlYXRlIGEgY3VzdG9tIGJ1aWxkIHRvIHN1cHBvcnQgdGhvc2UgcHJvamVjdGlvbnMgeW91IG5lZWQ7IHNlZVxuICogdGhlIFByb2o0anMgd2Vic2l0ZSBmb3IgaG93IHRvIGRvIHRoaXMuIFlvdSBhbHNvIG5lZWQgdGhlIFByb2o0anMgZGVmaW5pdGlvbnNcbiAqIGZvciB0aGUgcmVxdWlyZWQgcHJvamVjdGlvbnMuIFRoZXNlIGRlZmluaXRpb25zIGNhbiBiZSBvYnRhaW5lZCBmcm9tXG4gKiBodHRwczovL2Vwc2cuaW8vLCBhbmQgYXJlIGEgSlMgZnVuY3Rpb24sIHNvIGNhbiBiZSBsb2FkZWQgaW4gYSBzY3JpcHRcbiAqIHRhZyAoYXMgaW4gdGhlIGV4YW1wbGVzKSBvciBwYXN0ZWQgaW50byB5b3VyIGFwcGxpY2F0aW9uLlxuICpcbiAqIEFmdGVyIGFsbCByZXF1aXJlZCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGFyZSBhZGRlZCB0byBwcm9qNCdzIHJlZ2lzdHJ5IChieVxuICogdXNpbmcgYHByb2o0LmRlZnMoKWApLCBzaW1wbHkgY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBmcm9tIHRoZSBgb2wvcHJvai9wcm9qNGBcbiAqIHBhY2thZ2UuIEV4aXN0aW5nIHRyYW5zZm9ybXMgYXJlIG5vdCBjaGFuZ2VkIGJ5IHRoaXMgZnVuY3Rpb24uIFNlZVxuICogZXhhbXBsZXMvd21zLWltYWdlLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogQWRkaXRpb25hbCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGNhbiBiZSByZWdpc3RlcmVkIHdpdGggYHByb2o0LmRlZnMoKWAgYW55XG4gKiB0aW1lLiBKdXN0IG1ha2Ugc3VyZSB0byBjYWxsIGByZWdpc3Rlcihwcm9qNClgIGFnYWluOyBmb3IgZXhhbXBsZSwgd2l0aCB1c2VyLXN1cHBsaWVkIGRhdGEgd2hlcmUgeW91IGRvbid0XG4gKiBrbm93IGluIGFkdmFuY2Ugd2hhdCBwcm9qZWN0aW9ucyBhcmUgbmVlZGVkLCB5b3UgY2FuIGluaXRpYWxseSBsb2FkIG1pbmltYWxcbiAqIHN1cHBvcnQgYW5kIHRoZW4gbG9hZCB3aGljaGV2ZXIgYXJlIHJlcXVlc3RlZC5cbiAqXG4gKiBOb3RlIHRoYXQgUHJvajRqcyBkb2VzIG5vdCBzdXBwb3J0IHByb2plY3Rpb24gZXh0ZW50cy4gSWYgeW91IHdhbnQgdG8gYWRkXG4gKiBvbmUgZm9yIGNyZWF0aW5nIGRlZmF1bHQgdGlsZSBncmlkcywgeW91IGNhbiBhZGQgaXQgYWZ0ZXIgdGhlIFByb2plY3Rpb25cbiAqIG9iamVjdCBoYXMgYmVlbiBjcmVhdGVkIHdpdGggYHNldEV4dGVudGAsIGZvciBleGFtcGxlLFxuICogYGdldCgnRVBTRzoxMjM0Jykuc2V0RXh0ZW50KGV4dGVudClgLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIFByb2o0anMgc3VwcG9ydCwgYW55IHRyYW5zZm9ybSBmdW5jdGlvbnMgY2FuIGJlIGFkZGVkIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFRvIHVzZSB0aGlzLCB5b3UgbXVzdCBmaXJzdCBjcmVhdGVcbiAqIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259IG9iamVjdCBmb3IgdGhlIG5ldyBwcm9qZWN0aW9uIGFuZCBhZGQgaXQgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmFkZFByb2plY3Rpb259LiBZb3UgY2FuIHRoZW4gYWRkIHRoZSBmb3J3YXJkIGFuZCBpbnZlcnNlXG4gKiBmdW5jdGlvbnMgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXN9LiBTZWVcbiAqIGV4YW1wbGVzL3dtcy1jdXN0b20tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZiB0aGlzLlxuICpcbiAqIE5vdGUgdGhhdCBpZiBubyB0cmFuc2Zvcm1zIGFyZSBuZWVkZWQgYW5kIHlvdSBvbmx5IG5lZWQgdG8gZGVmaW5lIHRoZVxuICogcHJvamVjdGlvbiwganVzdCBhZGQgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmFkZFByb2plY3Rpb259LiBTZWUgZXhhbXBsZXMvd21zLW5vLXByb2ogZm9yIGFuIGV4YW1wbGUgb2ZcbiAqIHRoaXMuXG4gKi9cbmltcG9ydCBQcm9qZWN0aW9uIGZyb20gJy4vcHJvai9Qcm9qZWN0aW9uLmpzJztcbmltcG9ydCBVbml0cywgeyBNRVRFUlNfUEVSX1VOSVQgfSBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHsgUFJPSkVDVElPTlMgYXMgRVBTRzM4NTdfUFJPSkVDVElPTlMsIGZyb21FUFNHNDMyNiwgdG9FUFNHNDMyNiwgfSBmcm9tICcuL3Byb2ovZXBzZzM4NTcuanMnO1xuaW1wb3J0IHsgUFJPSkVDVElPTlMgYXMgRVBTRzQzMjZfUFJPSkVDVElPTlMgfSBmcm9tICcuL3Byb2ovZXBzZzQzMjYuanMnO1xuaW1wb3J0IHsgYWRkIGFzIGFkZFByb2osIGNsZWFyIGFzIGNsZWFyUHJvaiwgZ2V0IGFzIGdldFByb2osIH0gZnJvbSAnLi9wcm9qL3Byb2plY3Rpb25zLmpzJztcbmltcG9ydCB7IGFkZCBhcyBhZGRUcmFuc2Zvcm1GdW5jLCBjbGVhciBhcyBjbGVhclRyYW5zZm9ybUZ1bmNzLCBnZXQgYXMgZ2V0VHJhbnNmb3JtRnVuYywgfSBmcm9tICcuL3Byb2ovdHJhbnNmb3Jtcy5qcyc7XG5pbXBvcnQgeyBhcHBseVRyYW5zZm9ybSwgZ2V0V2lkdGggfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjbGFtcCwgbW9kdWxvIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGdldERpc3RhbmNlIH0gZnJvbSAnLi9zcGhlcmUuanMnO1xuaW1wb3J0IHsgZ2V0V29ybGRzQXdheSB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEEgcHJvamVjdGlvbiBhcyB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0sIFNSUyBpZGVudGlmaWVyXG4gKiBzdHJpbmcgb3IgdW5kZWZpbmVkLlxuICogQHR5cGVkZWYge1Byb2plY3Rpb258c3RyaW5nfHVuZGVmaW5lZH0gUHJvamVjdGlvbkxpa2VcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBBIHRyYW5zZm9ybSBmdW5jdGlvbiBhY2NlcHRzIGFuIGFycmF5IG9mIGlucHV0IGNvb3JkaW5hdGUgdmFsdWVzLCBhbiBvcHRpb25hbFxuICogb3V0cHV0IGFycmF5LCBhbmQgYW4gb3B0aW9uYWwgZGltZW5zaW9uIChkZWZhdWx0IHNob3VsZCBiZSAyKS4gIFRoZSBmdW5jdGlvblxuICogdHJhbnNmb3JtcyB0aGUgaW5wdXQgY29vcmRpbmF0ZSB2YWx1ZXMsIHBvcHVsYXRlcyB0aGUgb3V0cHV0IGFycmF5LCBhbmRcbiAqIHJldHVybnMgdGhlIG91dHB1dCBhcnJheS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oQXJyYXk8bnVtYmVyPiwgQXJyYXk8bnVtYmVyPj0sIG51bWJlcj0pOiBBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1GdW5jdGlvblxuICogQGFwaVxuICovXG5leHBvcnQgeyBNRVRFUlNfUEVSX1VOSVQgfTtcbmV4cG9ydCB7IFByb2plY3Rpb24gfTtcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgY29vcmRpbmF0ZSBhcnJheSAobmV3IGFycmF5LCBzYW1lIGNvb3JkaW5hdGVcbiAqICAgICB2YWx1ZXMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVUcmFuc2Zvcm0oaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICB2YXIgb3V0cHV0O1xuICAgIGlmIChvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgb3B0X291dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvdXRwdXQgPSBpbnB1dC5zbGljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGNvb3JkaW5hdGUgYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IElucHV0IGNvb3JkaW5hdGUgYXJyYXkgKHNhbWUgYXJyYXkgYXMgaW5wdXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHlUcmFuc2Zvcm0oaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkICYmIGlucHV0ICE9PSBvcHRfb3V0cHV0KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9wdF9vdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dDtcbn1cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGFkZFByb2oocHJvamVjdGlvbi5nZXRDb2RlKCksIHByb2plY3Rpb24pO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbiwgcHJvamVjdGlvbiwgY2xvbmVUcmFuc2Zvcm0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb25zKHByb2plY3Rpb25zKSB7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChhZGRQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogRmV0Y2hlcyBhIFByb2plY3Rpb24gb2JqZWN0IGZvciB0aGUgY29kZSBzcGVjaWZpZWQuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbkxpa2UgRWl0aGVyIGEgY29kZSBzdHJpbmcgd2hpY2ggaXNcbiAqICAgICBhIGNvbWJpbmF0aW9uIG9mIGF1dGhvcml0eSBhbmQgaWRlbnRpZmllciBzdWNoIGFzIFwiRVBTRzo0MzI2XCIsIG9yIGFuXG4gKiAgICAgZXhpc3RpbmcgcHJvamVjdGlvbiBvYmplY3QsIG9yIHVuZGVmaW5lZC5cbiAqIEByZXR1cm4ge1Byb2plY3Rpb259IFByb2plY3Rpb24gb2JqZWN0LCBvciBudWxsIGlmIG5vdCBpbiBsaXN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHByb2plY3Rpb25MaWtlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBwcm9qZWN0aW9uTGlrZSA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBnZXRQcm9qKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKVxuICAgICAgICA6IC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb25MaWtlKSB8fCBudWxsO1xufVxuLyoqXG4gKiBHZXQgdGhlIHJlc29sdXRpb24gb2YgdGhlIHBvaW50IGluIGRlZ3JlZXMgb3IgZGlzdGFuY2UgdW5pdHMuXG4gKiBGb3IgcHJvamVjdGlvbnMgd2l0aCBkZWdyZWVzIGFzIHRoZSB1bml0IHRoaXMgd2lsbCBzaW1wbHkgcmV0dXJuIHRoZVxuICogcHJvdmlkZWQgcmVzb2x1dGlvbi4gRm9yIG90aGVyIHByb2plY3Rpb25zIHRoZSBwb2ludCByZXNvbHV0aW9uIGlzXG4gKiBieSBkZWZhdWx0IGVzdGltYXRlZCBieSB0cmFuc2Zvcm1pbmcgdGhlICdwb2ludCcgcGl4ZWwgdG8gRVBTRzo0MzI2LFxuICogbWVhc3VyaW5nIGl0cyB3aWR0aCBhbmQgaGVpZ2h0IG9uIHRoZSBub3JtYWwgc3BoZXJlLFxuICogYW5kIHRha2luZyB0aGUgYXZlcmFnZSBvZiB0aGUgd2lkdGggYW5kIGhlaWdodC5cbiAqIEEgY3VzdG9tIGZ1bmN0aW9uIGNhbiBiZSBwcm92aWRlZCBmb3IgYSBzcGVjaWZpYyBwcm9qZWN0aW9uLCBlaXRoZXJcbiAqIGJ5IHNldHRpbmcgdGhlIGBnZXRQb2ludFJlc29sdXRpb25gIG9wdGlvbiBpbiB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IGNvbnN0cnVjdG9yIG9yIGJ5IHVzaW5nXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9uI3NldEdldFBvaW50UmVzb2x1dGlvbn0gdG8gY2hhbmdlIGFuIGV4aXN0aW5nXG4gKiBwcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBOb21pbmFsIHJlc29sdXRpb24gaW4gcHJvamVjdGlvbiB1bml0cy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50IHRvIGZpbmQgYWRqdXN0ZWQgcmVzb2x1dGlvbiBhdC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1VuaXRzLmpzXCIpLmRlZmF1bHR9IFtvcHRfdW5pdHNdIFVuaXRzIHRvIGdldCB0aGUgcG9pbnQgcmVzb2x1dGlvbiBpbi5cbiAqIERlZmF1bHQgaXMgdGhlIHByb2plY3Rpb24ncyB1bml0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gUG9pbnQgcmVzb2x1dGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBvaW50UmVzb2x1dGlvbihwcm9qZWN0aW9uLCByZXNvbHV0aW9uLCBwb2ludCwgb3B0X3VuaXRzKSB7XG4gICAgcHJvamVjdGlvbiA9IGdldChwcm9qZWN0aW9uKTtcbiAgICB2YXIgcG9pbnRSZXNvbHV0aW9uO1xuICAgIHZhciBnZXR0ZXIgPSBwcm9qZWN0aW9uLmdldFBvaW50UmVzb2x1dGlvbkZ1bmMoKTtcbiAgICBpZiAoZ2V0dGVyKSB7XG4gICAgICAgIHBvaW50UmVzb2x1dGlvbiA9IGdldHRlcihyZXNvbHV0aW9uLCBwb2ludCk7XG4gICAgICAgIGlmIChvcHRfdW5pdHMgJiYgb3B0X3VuaXRzICE9PSBwcm9qZWN0aW9uLmdldFVuaXRzKCkpIHtcbiAgICAgICAgICAgIHZhciBtZXRlcnNQZXJVbml0ID0gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgICAgICBpZiAobWV0ZXJzUGVyVW5pdCkge1xuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9XG4gICAgICAgICAgICAgICAgICAgIChwb2ludFJlc29sdXRpb24gKiBtZXRlcnNQZXJVbml0KSAvIE1FVEVSU19QRVJfVU5JVFtvcHRfdW5pdHNdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdW5pdHMgPSBwcm9qZWN0aW9uLmdldFVuaXRzKCk7XG4gICAgICAgIGlmICgodW5pdHMgPT0gVW5pdHMuREVHUkVFUyAmJiAhb3B0X3VuaXRzKSB8fCBvcHRfdW5pdHMgPT0gVW5pdHMuREVHUkVFUykge1xuICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEVzdGltYXRlIHBvaW50IHJlc29sdXRpb24gYnkgdHJhbnNmb3JtaW5nIHRoZSBjZW50ZXIgcGl4ZWwgdG8gRVBTRzo0MzI2LFxuICAgICAgICAgICAgLy8gbWVhc3VyaW5nIGl0cyB3aWR0aCBhbmQgaGVpZ2h0IG9uIHRoZSBub3JtYWwgc3BoZXJlLCBhbmQgdGFraW5nIHRoZVxuICAgICAgICAgICAgLy8gYXZlcmFnZSBvZiB0aGUgd2lkdGggYW5kIGhlaWdodC5cbiAgICAgICAgICAgIHZhciB0b0VQU0c0MzI2XzEgPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMocHJvamVjdGlvbiwgZ2V0KCdFUFNHOjQzMjYnKSk7XG4gICAgICAgICAgICBpZiAodG9FUFNHNDMyNl8xID09PSBpZGVudGl0eVRyYW5zZm9ybSAmJiB1bml0cyAhPT0gVW5pdHMuREVHUkVFUykge1xuICAgICAgICAgICAgICAgIC8vIG5vIHRyYW5zZm9ybSBpcyBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uICogcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgdmVydGljZXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdIC0gcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSArIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdIC0gcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSArIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmVydGljZXMgPSB0b0VQU0c0MzI2XzEodmVydGljZXMsIHZlcnRpY2VzLCAyKTtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBnZXREaXN0YW5jZSh2ZXJ0aWNlcy5zbGljZSgwLCAyKSwgdmVydGljZXMuc2xpY2UoMiwgNCkpO1xuICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBnZXREaXN0YW5jZSh2ZXJ0aWNlcy5zbGljZSg0LCA2KSwgdmVydGljZXMuc2xpY2UoNiwgOCkpO1xuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9ICh3aWR0aCArIGhlaWdodCkgLyAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1ldGVyc1BlclVuaXQgPSBvcHRfdW5pdHNcbiAgICAgICAgICAgICAgICA/IE1FVEVSU19QRVJfVU5JVFtvcHRfdW5pdHNdXG4gICAgICAgICAgICAgICAgOiBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgICAgIGlmIChtZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gLz0gbWV0ZXJzUGVyVW5pdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRSZXNvbHV0aW9uO1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMuIFRob3NlIGFsbG93XG4gKiB0byB0cmFuc2Zvcm0gYmV0d2VlbiBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMocHJvamVjdGlvbnMpIHtcbiAgICBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucyk7XG4gICAgcHJvamVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHByb2plY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlICE9PSBkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMoc291cmNlLCBkZXN0aW5hdGlvbiwgY2xvbmVUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIGFueSBwcm9qZWN0aW9uXG4gKiBpbiBwcm9qZWN0aW9uMSB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczEgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9uczIgUHJvamVjdGlvbnMgd2l0aCBlcXVhbFxuICogICAgIG1lYW5pbmcuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBmb3J3YXJkVHJhbnNmb3JtIFRyYW5zZm9ybWF0aW9uIGZyb20gYW55XG4gKiAgIHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKiBAcGFyYW0ge1RyYW5zZm9ybUZ1bmN0aW9ufSBpbnZlcnNlVHJhbnNmb3JtIFRyYW5zZm9ybSBmcm9tIGFueSBwcm9qZWN0aW9uXG4gKiAgIGluIHByb2plY3Rpb24yIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xLi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKHByb2plY3Rpb25zMSwgcHJvamVjdGlvbnMyLCBmb3J3YXJkVHJhbnNmb3JtLCBpbnZlcnNlVHJhbnNmb3JtKSB7XG4gICAgcHJvamVjdGlvbnMxLmZvckVhY2goZnVuY3Rpb24gKHByb2plY3Rpb24xKSB7XG4gICAgICAgIHByb2plY3Rpb25zMi5mb3JFYWNoKGZ1bmN0aW9uIChwcm9qZWN0aW9uMikge1xuICAgICAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIsIGZvcndhcmRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhwcm9qZWN0aW9uMiwgcHJvamVjdGlvbjEsIGludmVyc2VUcmFuc2Zvcm0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbi8qKlxuICogQ2xlYXIgYWxsIGNhY2hlZCBwcm9qZWN0aW9ucyBhbmQgdHJhbnNmb3Jtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWxsUHJvamVjdGlvbnMoKSB7XG4gICAgY2xlYXJQcm9qKCk7XG4gICAgY2xlYXJUcmFuc2Zvcm1GdW5jcygpO1xufVxuLyoqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb258c3RyaW5nfHVuZGVmaW5lZH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGRlZmF1bHRDb2RlIERlZmF1bHQgY29kZS5cbiAqIEByZXR1cm4ge1Byb2plY3Rpb259IFByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm9qZWN0aW9uKHByb2plY3Rpb24sIGRlZmF1bHRDb2RlKSB7XG4gICAgaWYgKCFwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBnZXQoZGVmYXVsdENvZGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgcHJvamVjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGdldChwcm9qZWN0aW9uKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge1Byb2plY3Rpb259ICovIChwcm9qZWN0aW9uKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+VHJhbnNmb3JtRnVuY3Rpb259IGZyb20gYSBzaW1wbGUgMkQgY29vcmRpbmF0ZSB0cmFuc2Zvcm1cbiAqIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZFRyYW5zZm9ybSBDb29yZGluYXRlXG4gKiAgICAgdHJhbnNmb3JtLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGNvb3JkVHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICAgICAgdmFyIG91dHB1dCA9IG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCA/IG9wdF9vdXRwdXQgOiBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgICAgICB2YXIgcG9pbnQgPSBjb29yZFRyYW5zZm9ybShbaW5wdXRbaV0sIGlucHV0W2kgKyAxXV0pO1xuICAgICAgICAgICAgb3V0cHV0W2ldID0gcG9pbnRbMF07XG4gICAgICAgICAgICBvdXRwdXRbaSArIDFdID0gcG9pbnRbMV07XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSAyOyAtLWopIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbaSArIGpdID0gaW5wdXRbaSArIGpdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBiZXR3ZWVuIHRoZVxuICogc291cmNlIHByb2plY3Rpb24gYW5kIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogVGhlIGZvcndhcmQgYW5kIGludmVyc2UgZnVuY3Rpb25zIGNvbnZlcnQgY29vcmRpbmF0ZSBwYWlyczsgdGhpcyBmdW5jdGlvblxuICogY29udmVydHMgdGhlc2UgaW50byB0aGUgZnVuY3Rpb25zIHVzZWQgaW50ZXJuYWxseSB3aGljaCBhbHNvIGhhbmRsZVxuICogZXh0ZW50cyBhbmQgY29vcmRpbmF0ZSBhcnJheXMuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZm9yd2FyZCBUaGUgZm9yd2FyZCB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGludmVyc2UgVGhlIGludmVyc2UgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24gdG8gdGhlIHNvdXJjZVxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXMoc291cmNlLCBkZXN0aW5hdGlvbiwgZm9yd2FyZCwgaW52ZXJzZSkge1xuICAgIHZhciBzb3VyY2VQcm9qID0gZ2V0KHNvdXJjZSk7XG4gICAgdmFyIGRlc3RQcm9qID0gZ2V0KGRlc3RpbmF0aW9uKTtcbiAgICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZVByb2osIGRlc3RQcm9qLCBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShmb3J3YXJkKSk7XG4gICAgYWRkVHJhbnNmb3JtRnVuYyhkZXN0UHJvaiwgc291cmNlUHJvaiwgY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oaW52ZXJzZSkpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIGxvbmdpdHVkZS9sYXRpdHVkZSB0byBhIGRpZmZlcmVudCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIGFzIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUsIGkuZS5cbiAqICAgICBhbiBhcnJheSB3aXRoIGxvbmdpdHVkZSBhcyAxc3QgYW5kIGxhdGl0dWRlIGFzIDJuZCBlbGVtZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gW29wdF9wcm9qZWN0aW9uXSBUYXJnZXQgcHJvamVjdGlvbi4gVGhlXG4gKiAgICAgZGVmYXVsdCBpcyBXZWIgTWVyY2F0b3IsIGkuZS4gJ0VQU0c6Mzg1NycuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZSBwcm9qZWN0ZWQgdG8gdGhlIHRhcmdldCBwcm9qZWN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUxvbkxhdChjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbikge1xuICAgIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgJ0VQU0c6NDMyNicsIG9wdF9wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfcHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgdG8gbG9uZ2l0dWRlL2xhdGl0dWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBQcm9qZWN0ZWQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IFtvcHRfcHJvamVjdGlvbl0gUHJvamVjdGlvbiBvZiB0aGUgY29vcmRpbmF0ZS5cbiAqICAgICBUaGUgZGVmYXVsdCBpcyBXZWIgTWVyY2F0b3IsIGkuZS4gJ0VQU0c6Mzg1NycuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZSBhcyBsb25naXR1ZGUgYW5kIGxhdGl0dWRlLCBpLmUuIGFuIGFycmF5XG4gKiAgICAgd2l0aCBsb25naXR1ZGUgYXMgMXN0IGFuZCBsYXRpdHVkZSBhcyAybmQgZWxlbWVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvTG9uTGF0KGNvb3JkaW5hdGUsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgdmFyIGxvbkxhdCA9IHRyYW5zZm9ybShjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3JywgJ0VQU0c6NDMyNicpO1xuICAgIHZhciBsb24gPSBsb25MYXRbMF07XG4gICAgaWYgKGxvbiA8IC0xODAgfHwgbG9uID4gMTgwKSB7XG4gICAgICAgIGxvbkxhdFswXSA9IG1vZHVsbyhsb24gKyAxODAsIDM2MCkgLSAxODA7XG4gICAgfVxuICAgIHJldHVybiBsb25MYXQ7XG59XG4vKipcbiAqIENoZWNrcyBpZiB0d28gcHJvamVjdGlvbnMgYXJlIHRoZSBzYW1lLCB0aGF0IGlzIGV2ZXJ5IGNvb3JkaW5hdGUgaW4gb25lXG4gKiBwcm9qZWN0aW9uIGRvZXMgcmVwcmVzZW50IHRoZSBzYW1lIGdlb2dyYXBoaWMgcG9pbnQgYXMgdGhlIHNhbWUgY29vcmRpbmF0ZSBpblxuICogdGhlIG90aGVyIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uMSBQcm9qZWN0aW9uIDEuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24yIFByb2plY3Rpb24gMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWl2YWxlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVpdmFsZW50KHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMikge1xuICAgIGlmIChwcm9qZWN0aW9uMSA9PT0gcHJvamVjdGlvbjIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBlcXVhbFVuaXRzID0gcHJvamVjdGlvbjEuZ2V0VW5pdHMoKSA9PT0gcHJvamVjdGlvbjIuZ2V0VW5pdHMoKTtcbiAgICBpZiAocHJvamVjdGlvbjEuZ2V0Q29kZSgpID09PSBwcm9qZWN0aW9uMi5nZXRDb2RlKCkpIHtcbiAgICAgICAgcmV0dXJuIGVxdWFsVW5pdHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyA9PT0gY2xvbmVUcmFuc2Zvcm0gJiYgZXF1YWxVbml0cztcbiAgICB9XG59XG4vKipcbiAqIFNlYXJjaGVzIGluIHRoZSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgZm9yIHRoZSBmdW5jdGlvbiBmb3IgY29udmVydGluZ1xuICogY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBQcm9qZWN0aW9uIG9iamVjdC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIFByb2plY3Rpb25cbiAqICAgICBvYmplY3QuXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbikge1xuICAgIHZhciBzb3VyY2VDb2RlID0gc291cmNlUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uUHJvamVjdGlvbi5nZXRDb2RlKCk7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1GdW5jKHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSk7XG4gICAgaWYgKCF0cmFuc2Zvcm1GdW5jKSB7XG4gICAgICAgIHRyYW5zZm9ybUZ1bmMgPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmM7XG59XG4vKipcbiAqIEdpdmVuIHRoZSBwcm9qZWN0aW9uLWxpa2Ugb2JqZWN0cywgc2VhcmNoZXMgZm9yIGEgdHJhbnNmb3JtYXRpb25cbiAqIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBjb29yZGluYXRlcyBhcnJheSBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGVcbiAqIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSBnZXQoc291cmNlKTtcbiAgICB2YXIgZGVzdGluYXRpb25Qcm9qZWN0aW9uID0gZ2V0KGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gc291cmNlIHByb2plY3Rpb24gdG8gZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIFRoaXMgcmV0dXJucyBhIG5ldyBjb29yZGluYXRlIChhbmQgZG9lcyBub3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCkuXG4gKlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvcHJvai50cmFuc2Zvcm1FeHRlbnR9IGZvciBleHRlbnQgdHJhbnNmb3JtYXRpb24uXG4gKiBTZWUgdGhlIHRyYW5zZm9ybSBtZXRob2Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5fkdlb21ldHJ5fSBhbmQgaXRzXG4gKiBzdWJjbGFzc2VzIGZvciBnZW9tZXRyeSB0cmFuc2Zvcm1zLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi1saWtlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKGNvb3JkaW5hdGUsIHVuZGVmaW5lZCwgY29vcmRpbmF0ZS5sZW5ndGgpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGV4dGVudCBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uICBUaGlzXG4gKiByZXR1cm5zIGEgbmV3IGV4dGVudCAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudCB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N0b3BzXSBOdW1iZXIgb2Ygc3RvcHMgcGVyIHNpZGUgdXNlZCBmb3IgdGhlIHRyYW5zZm9ybS5cbiAqIEJ5IGRlZmF1bHQgb25seSB0aGUgY29ybmVycyBhcmUgdXNlZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIHRyYW5zZm9ybWVkIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHNvdXJjZSwgZGVzdGluYXRpb24sIG9wdF9zdG9wcykge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShleHRlbnQsIHRyYW5zZm9ybUZ1bmMsIHVuZGVmaW5lZCwgb3B0X3N0b3BzKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gcG9pbnQgdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2plY3Rpb24gU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtV2l0aFByb2plY3Rpb25zKHBvaW50LCBzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pO1xuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jKHBvaW50KTtcbn1cbi8qKlxuICogQHR5cGUgez9Qcm9qZWN0aW9ufVxuICovXG52YXIgdXNlclByb2plY3Rpb24gPSBudWxsO1xuLyoqXG4gKiBTZXQgdGhlIHByb2plY3Rpb24gZm9yIGNvb3JkaW5hdGVzIHN1cHBsaWVkIGZyb20gYW5kIHJldHVybmVkIGJ5IEFQSSBtZXRob2RzLlxuICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlclxuICogcHJvamVjdGlvbnMgaXMgbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0VXNlclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIHVzZXJQcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBDbGVhciB0aGUgdXNlciBwcm9qZWN0aW9uIGlmIHNldC4gIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZlxuICogdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZFxuICogYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclVzZXJQcm9qZWN0aW9uKCkge1xuICAgIHVzZXJQcm9qZWN0aW9uID0gbnVsbDtcbn1cbi8qKlxuICogR2V0IHRoZSBwcm9qZWN0aW9uIGZvciBjb29yZGluYXRlcyBzdXBwbGllZCBmcm9tIGFuZCByZXR1cm5lZCBieSBBUEkgbWV0aG9kcy5cbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXJcbiAqIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZCBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqIEByZXR1cm4gez9Qcm9qZWN0aW9ufSBUaGUgdXNlciBwcm9qZWN0aW9uIChvciBudWxsIGlmIG5vdCBzZXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlclByb2plY3Rpb24oKSB7XG4gICAgcmV0dXJuIHVzZXJQcm9qZWN0aW9uO1xufVxuLyoqXG4gKiBVc2UgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyAoV0dTLTg0IGRhdHVtKSBpbiBBUEkgbWV0aG9kcy4gIE5vdGUgdGhhdCB0aGlzXG4gKiBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2YgdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyIHByb2plY3Rpb25zIGlzXG4gKiBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VHZW9ncmFwaGljKCkge1xuICAgIHNldFVzZXJQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBpbnRvIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGUgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGUgSW5wdXQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGNvb3JkaW5hdGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHNvdXJjZVByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHNvdXJjZVByb2plY3Rpb24sIHVzZXJQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBmcm9tIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGUgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGUgSW5wdXQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RQcm9qZWN0aW9uIFRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIGlucHV0IGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZGVzdFByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBjb29yZGluYXRlO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHVzZXJQcm9qZWN0aW9uLCBkZXN0UHJvamVjdGlvbik7XG59XG4vKipcbiAqIFJldHVybiBhbiBleHRlbnQgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBleHRlbnQgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IElucHV0IGV4dGVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGV4dGVudCBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgaW5wdXQgZXh0ZW50IGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJFeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgc291cmNlUHJvamVjdGlvbiwgdXNlclByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gYW4gZXh0ZW50IHRyYW5zZm9ybWVkIGZyb20gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgZXh0ZW50IGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBJbnB1dCBleHRlbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIGlucHV0IGV4dGVudCB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Vc2VyRXh0ZW50KGV4dGVudCwgZGVzdFByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBleHRlbnQ7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIHJlc29sdXRpb24gaW4gdXNlciBwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbC4gSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIG9yIHNvdXJjZSBvciB1c2VyIHByb2plY3Rpb24gYXJlIG1pc3NpbmcgdW5pdHMsIHRoZSBvcmlnaW5hbCByZXNvbHV0aW9uXG4gKiBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24gaW4gaW5wdXQgcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2VQcm9qZWN0aW9uIFRoZSBpbnB1dCBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uIGluIHVzZXIgcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJSZXNvbHV0aW9uKHJlc29sdXRpb24sIHNvdXJjZVByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiByZXNvbHV0aW9uO1xuICAgIH1cbiAgICB2YXIgc291cmNlVW5pdHMgPSBnZXQoc291cmNlUHJvamVjdGlvbikuZ2V0VW5pdHMoKTtcbiAgICB2YXIgdXNlclVuaXRzID0gdXNlclByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgICByZXR1cm4gc291cmNlVW5pdHMgJiYgdXNlclVuaXRzXG4gICAgICAgID8gKHJlc29sdXRpb24gKiBNRVRFUlNfUEVSX1VOSVRbc291cmNlVW5pdHNdKSAvIE1FVEVSU19QRVJfVU5JVFt1c2VyVW5pdHNdXG4gICAgICAgIDogcmVzb2x1dGlvbjtcbn1cbi8qKlxuICogUmV0dXJuIHRoZSByZXNvbHV0aW9uIGluIHVzZXIgcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCBvciBzb3VyY2Ugb3IgdXNlciBwcm9qZWN0aW9uIGFyZSBtaXNzaW5nIHVuaXRzLCB0aGUgb3JpZ2luYWwgcmVzb2x1dGlvblxuICogaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uIGluIHVzZXIgcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbiBpbiBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Vc2VyUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBkZXN0UHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb247XG4gICAgfVxuICAgIHZhciBzb3VyY2VVbml0cyA9IGdldChkZXN0UHJvamVjdGlvbikuZ2V0VW5pdHMoKTtcbiAgICB2YXIgdXNlclVuaXRzID0gdXNlclByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgICByZXR1cm4gc291cmNlVW5pdHMgJiYgdXNlclVuaXRzXG4gICAgICAgID8gKHJlc29sdXRpb24gKiBNRVRFUlNfUEVSX1VOSVRbdXNlclVuaXRzXSkgLyBNRVRFUlNfUEVSX1VOSVRbc291cmNlVW5pdHNdXG4gICAgICAgIDogcmVzb2x1dGlvbjtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHNhZmUgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb24gZnJvbSBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogXCJTYWZlXCIgbWVhbnMgdGhhdCBpdCBjYW4gaGFuZGxlIHdyYXBwaW5nIG9mIHgtY29vcmRpbmF0ZXMgZm9yIGdsb2JhbCBwcm9qZWN0aW9ucyxcbiAqIGFuZCB0aGF0IGNvb3JkaW5hdGVzIGV4Y2VlZGluZyB0aGUgc291cmNlIHByb2plY3Rpb24gdmFsaWRpdHkgZXh0ZW50J3MgcmFuZ2Ugd2lsbCBiZVxuICogY2xhbXBlZCB0byB0aGUgdmFsaWRpdHkgcmFuZ2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RQcm9qIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRyYW5zZm9ybSBUcmFuc2Zvcm0gZnVuY3Rpb24gKHNvdXJjZSB0byBkZXN0aWF0aW9uKS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFNhZmUgdHJhbnNmb3JtIGZ1bmN0aW9uIChzb3VyY2UgdG8gZGVzdGlhdGlvbikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTYWZlQ29vcmRpbmF0ZVRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0UHJvaiwgdHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb29yZCkge1xuICAgICAgICB2YXIgc291cmNlWCA9IGNvb3JkWzBdO1xuICAgICAgICB2YXIgc291cmNlWSA9IGNvb3JkWzFdO1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWQsIHdvcmxkc0F3YXk7XG4gICAgICAgIGlmIChzb3VyY2VQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgdmFyIHNvdXJjZUV4dGVudFdpZHRoID0gZ2V0V2lkdGgoc291cmNlRXh0ZW50KTtcbiAgICAgICAgICAgIHdvcmxkc0F3YXkgPSBnZXRXb3JsZHNBd2F5KGNvb3JkLCBzb3VyY2VQcm9qLCBzb3VyY2VFeHRlbnRXaWR0aCk7XG4gICAgICAgICAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgICAgICAgICAgIC8vIE1vdmUgeCB0byB0aGUgcmVhbCB3b3JsZFxuICAgICAgICAgICAgICAgIHNvdXJjZVggPSBzb3VyY2VYIC0gd29ybGRzQXdheSAqIHNvdXJjZUV4dGVudFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291cmNlWCA9IGNsYW1wKHNvdXJjZVgsIHNvdXJjZUV4dGVudFswXSwgc291cmNlRXh0ZW50WzJdKTtcbiAgICAgICAgICAgIHNvdXJjZVkgPSBjbGFtcChzb3VyY2VZLCBzb3VyY2VFeHRlbnRbMV0sIHNvdXJjZUV4dGVudFszXSk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZCA9IHRyYW5zZm9ybShbc291cmNlWCwgc291cmNlWV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oY29vcmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JsZHNBd2F5ICYmIGRlc3RQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgIC8vIE1vdmUgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZSBiYWNrIHRvIHRoZSBvZmZzZXQgd29ybGRcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkWzBdICs9IHdvcmxkc0F3YXkgKiBnZXRXaWR0aChkZXN0UHJvai5nZXRFeHRlbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xuICAgIH07XG59XG4vKipcbiAqIEFkZCB0cmFuc2Zvcm1zIHRvIGFuZCBmcm9tIEVQU0c6NDMyNiBhbmQgRVBTRzozODU3LiAgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAqIGJ5IHdoZW4gdGhpcyBtb2R1bGUgaXMgZXhlY3V0ZWQgYW5kIHNob3VsZCBvbmx5IG5lZWQgdG8gYmUgY2FsbGVkIGFnYWluIGFmdGVyXG4gKiBgY2xlYXJBbGxQcm9qZWN0aW9ucygpYCBpcyBjYWxsZWQgKGUuZy4gaW4gdGVzdHMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29tbW9uKCkge1xuICAgIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcyB0byBjb252ZXJ0IHdpdGhpbiBzZXQgb2ZcbiAgICAvLyBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gICAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0czODU3X1BST0pFQ1RJT05TKTtcbiAgICBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMoRVBTRzQzMjZfUFJPSkVDVElPTlMpO1xuICAgIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdG8gY29udmVydCBFUFNHOjQzMjYgbGlrZSBjb29yZGluYXRlcyB0byBFUFNHOjM4NTcgbGlrZVxuICAgIC8vIGNvb3JkaW5hdGVzIGFuZCBiYWNrLlxuICAgIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKEVQU0c0MzI2X1BST0pFQ1RJT05TLCBFUFNHMzg1N19QUk9KRUNUSU9OUywgZnJvbUVQU0c0MzI2LCB0b0VQU0c0MzI2KTtcbn1cbmFkZENvbW1vbigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvai5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXJcbiAqL1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgVGlsZVJhbmdlIGZyb20gJy4uLy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uLy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQsIElNQUdFX1NNT09USElOR19FTkFCTEVEIH0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgbWFrZUludmVyc2UsIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uLy4uL29iai5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbXB0eSwgZXF1YWxzLCBnZXRJbnRlcnNlY3Rpb24sIGdldFRvcExlZnQsIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNzc09wYWNpdHkgfSBmcm9tICcuLi8uLi9jc3MuanMnO1xuaW1wb3J0IHsgZnJvbVVzZXJFeHRlbnQgfSBmcm9tICcuLi8uLi9wcm9qLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbmltcG9ydCB7IHRvU3RyaW5nIGFzIHRvVHJhbnNmb3JtU3RyaW5nIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIHJlbmRlcmVyIGZvciB0aWxlIGxheWVycy5cbiAqIEBhcGlcbiAqL1xudmFyIENhbnZhc1RpbGVMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVMYXllciBUaWxlIGxheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRpbGVMYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0aWxlTGF5ZXIpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXJlZCBleHRlbnQgaGFzIGNoYW5nZWQgc2luY2UgdGhlIHByZXZpb3VzIGByZW5kZXJGcmFtZSgpYCBjYWxsXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRQaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFByb2plY3Rpb24gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRSZXZpc2lvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRUaWxlcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5uZXdUaWxlc18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG1wVGlsZVJhbmdlXyA9IG5ldyBUaWxlUmFuZ2UoMCwgMCwgMCwgMCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBpcyBkcmF3YWJsZS5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaXNEcmF3YWJsZVRpbGUgPSBmdW5jdGlvbiAodGlsZSkge1xuICAgICAgICB2YXIgdGlsZUxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgdGlsZVN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICB2YXIgdXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IHRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCk7XG4gICAgICAgIHJldHVybiAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5MT0FERUQgfHxcbiAgICAgICAgICAgIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRU1QVFkgfHxcbiAgICAgICAgICAgICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SICYmICF1c2VJbnRlcmltVGlsZXNPbkVycm9yKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB2YXIgdGlsZUxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgdGlsZVNvdXJjZSA9IHRpbGVMYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgdmFyIHRpbGUgPSB0aWxlU291cmNlLmdldFRpbGUoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICBpZiAoIXRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHVzZUludGVyaW1UaWxlc09uRXJyb3IgaXMgZmFsc2UsIHdlIGNvbnNpZGVyIHRoZSBlcnJvciB0aWxlIGFzIGxvYWRlZC5cbiAgICAgICAgICAgICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5MT0FERUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGlsZUxheWVyLmdldFByZWxvYWQoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBQcmVsb2FkZWQgdGlsZXMgZm9yIGxvd2VyIHJlc29sdXRpb25zIG1pZ2h0IGhhdmUgZmluaXNoZWQgbG9hZGluZy5cbiAgICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgICB0aWxlID0gdGlsZS5nZXRJbnRlcmltVGlsZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHZvaWR9IElmIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5sb2FkZWRUaWxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAodGlsZXMsIHpvb20sIHRpbGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjay5jYWxsKHRoaXMsIHRpbGVzLCB6b29tLCB0aWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmdldExheWVyKCkuZ2V0U291cmNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIGxheWVyLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFRhcmdldCB0aGF0IG1heSBiZSB1c2VkIHRvIHJlbmRlciBjb250ZW50IHRvLlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5W2ZyYW1lU3RhdGUubGF5ZXJJbmRleF07XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgICAgIHZhciB2aWV3Q2VudGVyID0gdmlld1N0YXRlLmNlbnRlcjtcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2UgPSB0aWxlTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciBzb3VyY2VSZXZpc2lvbiA9IHRpbGVTb3VyY2UuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gdGlsZVNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24odmlld1Jlc29sdXRpb24sIHRpbGVTb3VyY2UuekRpcmVjdGlvbik7XG4gICAgICAgIHZhciB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcbiAgICAgICAgdmFyIGxheWVyRXh0ZW50ID0gbGF5ZXJTdGF0ZS5leHRlbnQgJiYgZnJvbVVzZXJFeHRlbnQobGF5ZXJTdGF0ZS5leHRlbnQsIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIGV4dGVudCA9IGdldEludGVyc2VjdGlvbihleHRlbnQsIGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVQaXhlbFJhdGlvID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAgICAgLy8gZGVzaXJlZCBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgaW4gcGl4ZWxzXG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzBdICogdGlsZVBpeGVsUmF0aW8pO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5yb3VuZChmcmFtZVN0YXRlLnNpemVbMV0gKiB0aWxlUGl4ZWxSYXRpbyk7XG4gICAgICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICAgICAgdmFyIHNpemUgPSBNYXRoLnJvdW5kKE1hdGguc3FydCh3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0KSk7XG4gICAgICAgICAgICB3aWR0aCA9IHNpemU7XG4gICAgICAgICAgICBoZWlnaHQgPSBzaXplO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkeCA9ICh0aWxlUmVzb2x1dGlvbiAqIHdpZHRoKSAvIDIgLyB0aWxlUGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIGR5ID0gKHRpbGVSZXNvbHV0aW9uICogaGVpZ2h0KSAvIDIgLyB0aWxlUGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIGNhbnZhc0V4dGVudCA9IFtcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMF0gLSBkeCxcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMV0gLSBkeSxcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMF0gKyBkeCxcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMV0gKyBkeSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciB0aWxlc1RvRHJhd0J5WiA9IHt9O1xuICAgICAgICB0aWxlc1RvRHJhd0J5Wlt6XSA9IHt9O1xuICAgICAgICB2YXIgZmluZExvYWRlZFRpbGVzID0gdGhpcy5jcmVhdGVMb2FkZWRUaWxlRmluZGVyKHRpbGVTb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzVG9EcmF3QnlaKTtcbiAgICAgICAgdmFyIHRtcEV4dGVudCA9IHRoaXMudG1wRXh0ZW50O1xuICAgICAgICB2YXIgdG1wVGlsZVJhbmdlID0gdGhpcy50bXBUaWxlUmFuZ2VfO1xuICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciB4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgICAgICAgZm9yICh2YXIgeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZSA9IHRoaXMuZ2V0VGlsZSh6LCB4LCB5LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVzVG9EcmF3QnlaW3pdW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpblRyYW5zaXRpb24gPSB0aWxlLmluVHJhbnNpdGlvbih1aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm5ld1RpbGVzXyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpblRyYW5zaXRpb24gfHwgdGhpcy5yZW5kZXJlZFRpbGVzLmluZGV4T2YodGlsZSkgPT09IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3VGlsZXNfID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGxvb2sgZm9yIGFsdCB0aWxlcyBpZiBhbHBoYSBpcyAxXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRUaWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSh0aWxlLnRpbGVDb29yZCwgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xuICAgICAgICAgICAgICAgIHZhciBjb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkVGlsZVJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSBmaW5kTG9hZGVkVGlsZXMoeiArIDEsIGNoaWxkVGlsZVJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjb3ZlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVHcmlkLmZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UodGlsZS50aWxlQ29vcmQsIGZpbmRMb2FkZWRUaWxlcywgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FudmFzU2NhbGUgPSB0aWxlUmVzb2x1dGlvbiAvIHZpZXdSZXNvbHV0aW9uO1xuICAgICAgICAvLyBzZXQgZm9yd2FyZCBhbmQgaW52ZXJzZSBwaXhlbCB0cmFuc2Zvcm1zXG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy5waXhlbFRyYW5zZm9ybSwgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMiwgMSAvIHRpbGVQaXhlbFJhdGlvLCAxIC8gdGlsZVBpeGVsUmF0aW8sIHJvdGF0aW9uLCAtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMik7XG4gICAgICAgIHZhciBjYW52YXNUcmFuc2Zvcm0gPSB0b1RyYW5zZm9ybVN0cmluZyh0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy51c2VDb250YWluZXIodGFyZ2V0LCBjYW52YXNUcmFuc2Zvcm0sIGxheWVyU3RhdGUub3BhY2l0eSwgdGhpcy5nZXRCYWNrZ3JvdW5kKGZyYW1lU3RhdGUpKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIHZhciBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgbWFrZUludmVyc2UodGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIHRoaXMucGl4ZWxUcmFuc2Zvcm0pO1xuICAgICAgICAvLyBzZXQgc2NhbGUgdHJhbnNmb3JtIGZvciBjYWxjdWxhdGluZyB0aWxlIHBvc2l0aW9ucyBvbiB0aGUgY2FudmFzXG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCB3aWR0aCAvIDIsIGhlaWdodCAvIDIsIGNhbnZhc1NjYWxlLCBjYW52YXNTY2FsZSwgMCwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpO1xuICAgICAgICBpZiAoY2FudmFzLndpZHRoICE9IHdpZHRoIHx8IGNhbnZhcy5oZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIXRoaXMuY29udGFpbmVyUmV1c2VkKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2xpcFVucm90YXRlZChjb250ZXh0LCBmcmFtZVN0YXRlLCBsYXllckV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aWxlU291cmNlLmdldEludGVycG9sYXRlKCkpIHtcbiAgICAgICAgICAgIGFzc2lnbihjb250ZXh0LCBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgICAgICB2YXIgenMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5WikubWFwKE51bWJlcik7XG4gICAgICAgIHpzLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgICAgIHZhciBjbGlwcywgY2xpcFpzLCBjdXJyZW50Q2xpcDtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUub3BhY2l0eSA9PT0gMSAmJlxuICAgICAgICAgICAgKCF0aGlzLmNvbnRhaW5lclJldXNlZCB8fFxuICAgICAgICAgICAgICAgIHRpbGVTb3VyY2UuZ2V0T3BhcXVlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pKSkge1xuICAgICAgICAgICAgenMgPSB6cy5yZXZlcnNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbGlwcyA9IFtdO1xuICAgICAgICAgICAgY2xpcFpzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IHpzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudFogPSB6c1tpXTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50VGlsZVBpeGVsU2l6ZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZShjdXJyZW50WiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKGN1cnJlbnRaKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIGR4XzEgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVswXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgICAgICAgdmFyIGR5XzEgPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVsxXSAqIGN1cnJlbnRTY2FsZSAqIGNhbnZhc1NjYWxlO1xuICAgICAgICAgICAgdmFyIG9yaWdpblRpbGVDb29yZCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihnZXRUb3BMZWZ0KGNhbnZhc0V4dGVudCksIGN1cnJlbnRaKTtcbiAgICAgICAgICAgIHZhciBvcmlnaW5UaWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KG9yaWdpblRpbGVDb29yZCk7XG4gICAgICAgICAgICB2YXIgb3JpZ2luXzEgPSBhcHBseVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIFtcbiAgICAgICAgICAgICAgICAodGlsZVBpeGVsUmF0aW8gKiAob3JpZ2luVGlsZUV4dGVudFswXSAtIGNhbnZhc0V4dGVudFswXSkpIC9cbiAgICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgKHRpbGVQaXhlbFJhdGlvICogKGNhbnZhc0V4dGVudFszXSAtIG9yaWdpblRpbGVFeHRlbnRbM10pKSAvXG4gICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB2YXIgdGlsZUd1dHRlciA9IHRpbGVQaXhlbFJhdGlvICogdGlsZVNvdXJjZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGVzVG9EcmF3ID0gdGlsZXNUb0RyYXdCeVpbY3VycmVudFpdO1xuICAgICAgICAgICAgZm9yICh2YXIgdGlsZUNvb3JkS2V5IGluIHRpbGVzVG9EcmF3KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZXNUb0RyYXdbdGlsZUNvb3JkS2V5XSk7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVDb29yZCA9IHRpbGUudGlsZUNvb3JkO1xuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBpbnRlZ2VyIHBvc2l0aW9ucyBhbmQgc2l6ZXMgc28gdGhhdCB0aWxlcyBhbGlnblxuICAgICAgICAgICAgICAgIHZhciB4SW5kZXggPSBvcmlnaW5UaWxlQ29vcmRbMV0gLSB0aWxlQ29vcmRbMV07XG4gICAgICAgICAgICAgICAgdmFyIG5leHRYID0gTWF0aC5yb3VuZChvcmlnaW5fMVswXSAtICh4SW5kZXggLSAxKSAqIGR4XzEpO1xuICAgICAgICAgICAgICAgIHZhciB5SW5kZXggPSBvcmlnaW5UaWxlQ29vcmRbMl0gLSB0aWxlQ29vcmRbMl07XG4gICAgICAgICAgICAgICAgdmFyIG5leHRZID0gTWF0aC5yb3VuZChvcmlnaW5fMVsxXSAtICh5SW5kZXggLSAxKSAqIGR5XzEpO1xuICAgICAgICAgICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChvcmlnaW5fMVswXSAtIHhJbmRleCAqIGR4XzEpO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gTWF0aC5yb3VuZChvcmlnaW5fMVsxXSAtIHlJbmRleCAqIGR5XzEpO1xuICAgICAgICAgICAgICAgIHZhciB3ID0gbmV4dFggLSB4O1xuICAgICAgICAgICAgICAgIHZhciBoID0gbmV4dFkgLSB5O1xuICAgICAgICAgICAgICAgIHZhciB0cmFuc2l0aW9uID0geiA9PT0gY3VycmVudFo7XG4gICAgICAgICAgICAgICAgdmFyIGluVHJhbnNpdGlvbiA9IHRyYW5zaXRpb24gJiYgdGlsZS5nZXRBbHBoYShnZXRVaWQodGhpcyksIGZyYW1lU3RhdGUudGltZSkgIT09IDE7XG4gICAgICAgICAgICAgICAgaWYgKCFpblRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGlwIG1hc2sgZm9yIHJlZ2lvbnMgaW4gdGhpcyB0aWxlIHRoYXQgYWxyZWFkeSBmaWxsZWQgYnkgYSBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDbGlwID0gW3gsIHksIHggKyB3LCB5LCB4ICsgdywgeSArIGgsIHgsIHkgKyBoXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlfMSA9IDAsIGlpID0gY2xpcHMubGVuZ3RoOyBpXzEgPCBpaTsgKytpXzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiAhPT0gY3VycmVudFogJiYgY3VycmVudFogPCBjbGlwWnNbaV8xXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xpcCA9IGNsaXBzW2lfMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50ZXItY2xvY2t3aXNlIChvdXRlciByaW5nKSBmb3IgY3VycmVudCB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGN1cnJlbnRDbGlwWzBdLCBjdXJyZW50Q2xpcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzJdLCBjdXJyZW50Q2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzRdLCBjdXJyZW50Q2xpcFs1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzZdLCBjdXJyZW50Q2xpcFs3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNsb2Nrd2lzZSAoaW5uZXIgcmluZykgZm9yIGhpZ2hlciB6IHRpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oY2xpcFs2XSwgY2xpcFs3XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbNF0sIGNsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzJdLCBjbGlwWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFswXSwgY2xpcFsxXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xpcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBzLnB1c2goY3VycmVudENsaXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xpcFpzLnB1c2goY3VycmVudFopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoeCwgeSwgdywgaCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3VGlsZUltYWdlKHRpbGUsIGZyYW1lU3RhdGUsIHgsIHksIHcsIGgsIHRpbGVHdXR0ZXIsIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgICAgIGlmIChjbGlwcyAmJiAhaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMudW5zaGlmdCh0aWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVzZWRUaWxlcyhmcmFtZVN0YXRlLnVzZWRUaWxlcywgdGlsZVNvdXJjZSwgdGlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uID0gc291cmNlUmV2aXNpb247XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb247XG4gICAgICAgIHRoaXMuZXh0ZW50Q2hhbmdlZCA9XG4gICAgICAgICAgICAhdGhpcy5yZW5kZXJlZEV4dGVudF8gfHwgIWVxdWFscyh0aGlzLnJlbmRlcmVkRXh0ZW50XywgY2FudmFzRXh0ZW50KTtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBjYW52YXNFeHRlbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZWRQaXhlbFJhdGlvID0gcGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5yZW5kZXJlZFByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLm1hbmFnZVRpbGVQeXJhbWlkKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBleHRlbnQsIHosIHRpbGVMYXllci5nZXRQcmVsb2FkKCkpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSk7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50KSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ24oY29udGV4dCwgSU1BR0VfU01PT1RISU5HX0VOQUJMRUQpO1xuICAgICAgICBpZiAoY2FudmFzVHJhbnNmb3JtICE9PSBjYW52YXMuc3R5bGUudHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUudHJhbnNmb3JtID0gY2FudmFzVHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcGFjaXR5ID0gY3NzT3BhY2l0eShsYXllclN0YXRlLm9wYWNpdHkpO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgIGlmIChvcGFjaXR5ICE9PSBjb250YWluZXIuc3R5bGUub3BhY2l0eSkge1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IExlZnQgb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVG9wIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3IFdpZHRoIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIFRpbGUgZ3V0dGVyLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdHJhbnNpdGlvbiBBcHBseSBhbiBhbHBoYSB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5kcmF3VGlsZUltYWdlID0gZnVuY3Rpb24gKHRpbGUsIGZyYW1lU3RhdGUsIHgsIHksIHcsIGgsIGd1dHRlciwgdHJhbnNpdGlvbikge1xuICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmdldFRpbGVJbWFnZSh0aWxlKTtcbiAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1aWQgPSBnZXRVaWQodGhpcyk7XG4gICAgICAgIHZhciBhbHBoYSA9IHRyYW5zaXRpb24gPyB0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA6IDE7XG4gICAgICAgIHZhciBhbHBoYUNoYW5nZWQgPSBhbHBoYSAhPT0gdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgICAgICBpZiAoYWxwaGFDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgZ3V0dGVyLCBndXR0ZXIsIGltYWdlLndpZHRoIC0gMiAqIGd1dHRlciwgaW1hZ2UuaGVpZ2h0IC0gMiAqIGd1dHRlciwgeCwgeSwgdywgaCk7XG4gICAgICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFscGhhICE9PSAxKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHRpbGUuZW5kVHJhbnNpdGlvbih1aWQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gSW1hZ2VcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICByZXR1cm4gY29udGV4dCA/IGNvbnRleHQuY2FudmFzIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW1hZ2UgZnJvbSBhIHRpbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlSW1hZ2UgPSBmdW5jdGlvbiAodGlsZSkge1xuICAgICAgICByZXR1cm4gdGlsZS5nZXRJbWFnZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5zY2hlZHVsZUV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UpIHtcbiAgICAgICAgaWYgKHRpbGVTb3VyY2UuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlU291cmNlLCBtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLnVzZWRUaWxlcykge1xuICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlLmV4cGlyZUNhY2hlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24sIGZyYW1lU3RhdGUudXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQobnVsbCwgdGlsZVNvdXJjZSk7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLlBvc3RSZW5kZXJGdW5jdGlvbn0gKi8gKHBvc3RSZW5kZXJGdW5jdGlvbikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAhT2JqZWN0PHN0cmluZywgYm9vbGVhbj4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL1RpbGUuanMnKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS51cGRhdGVVc2VkVGlsZXMgPSBmdW5jdGlvbiAodXNlZFRpbGVzLCB0aWxlU291cmNlLCB0aWxlKSB7XG4gICAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSB1c2UgdGlsZXNUb0RyYXdCeVogaW5zdGVhZD9cbiAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gdXNlZFRpbGVzKSkge1xuICAgICAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdXNlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldID0gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hbmFnZSB0aWxlIHB5cmFtaWQuXG4gICAgICogVGhpcyBmdW5jdGlvbiBwZXJmb3JtcyBhIG51bWJlciBvZiBmdW5jdGlvbnMgcmVsYXRlZCB0byB0aGUgdGlsZXMgYXQgdGhlXG4gICAgICogY3VycmVudCB6b29tIGFuZCBsb3dlciB6b29tIGxldmVsczpcbiAgICAgKiAtIHJlZ2lzdGVycyBpZGxlIHRpbGVzIGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMgc28gdGhhdCB0aGV5IGFyZSBub3RcbiAgICAgKiAgIGRpc2NhcmRlZCBieSB0aGUgdGlsZSBxdWV1ZVxuICAgICAqIC0gZW5xdWV1ZXMgbWlzc2luZyB0aWxlc1xuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRaIEN1cnJlbnQgWi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBMb2FkIGxvdyByZXNvbHV0aW9uIHRpbGVzIHVwIHRvICdwcmVsb2FkJyBsZXZlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtvcHRfdGlsZUNhbGxiYWNrXSBUaWxlIGNhbGxiYWNrLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubWFuYWdlVGlsZVB5cmFtaWQgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSwgdGlsZUdyaWQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGV4dGVudCwgY3VycmVudFosIHByZWxvYWQsIG9wdF90aWxlQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgIGlmICghKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgd2FudGVkVGlsZXMgPSBmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldO1xuICAgICAgICB2YXIgdGlsZVF1ZXVlID0gZnJhbWVTdGF0ZS50aWxlUXVldWU7XG4gICAgICAgIHZhciBtaW5ab29tID0gdGlsZUdyaWQuZ2V0TWluWm9vbSgpO1xuICAgICAgICB2YXIgdGlsZUNvdW50ID0gMDtcbiAgICAgICAgdmFyIHRpbGUsIHRpbGVSYW5nZSwgdGlsZVJlc29sdXRpb24sIHgsIHksIHo7XG4gICAgICAgIGZvciAoeiA9IG1pblpvb207IHogPD0gY3VycmVudFo7ICsreikge1xuICAgICAgICAgICAgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHosIHRpbGVSYW5nZSk7XG4gICAgICAgICAgICB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgICAgICBmb3IgKHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICAgICAgICAgICAgZm9yICh5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFogLSB6IDw9IHByZWxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrdGlsZUNvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3YW50ZWRUaWxlc1t0aWxlLmdldEtleSgpXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWxlUXVldWUuaXNLZXlRdWV1ZWQodGlsZS5nZXRLZXkoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVF1ZXVlLmVucXVldWUoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2VLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRfdGlsZUNhbGxiYWNrICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRfdGlsZUNhbGxiYWNrKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNvdXJjZS51c2VUaWxlKHosIHgsIHksIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRpbGVTb3VyY2UudXBkYXRlQ2FjaGVTaXplKHRpbGVDb3VudCwgcHJvamVjdGlvbik7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG59KENhbnZhc0xheWVyUmVuZGVyZXIpKTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fVxuICovXG5DYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0TGF5ZXI7XG5leHBvcnQgZGVmYXVsdCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVMYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVN0YXRlXG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIElETEU6IDAsXG4gICAgTE9BRElORzogMSxcbiAgICBMT0FERUQ6IDIsXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHRoYXQgdGlsZSBsb2FkaW5nIGZhaWxlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgRVJST1I6IDMsXG4gICAgRU1QVFk6IDQsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVN0YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvVGlsZVxuICovXG5pbXBvcnQgQmFzZVRpbGVMYXllciBmcm9tICcuL0Jhc2VUaWxlLmpzJztcbmltcG9ydCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRm9yIGxheWVyIHNvdXJjZXMgdGhhdCBwcm92aWRlIHByZS1yZW5kZXJlZCwgdGlsZWQgaW1hZ2VzIGluIGdyaWRzIHRoYXQgYXJlXG4gKiBvcmdhbml6ZWQgYnkgem9vbSBsZXZlbHMgZm9yIHNwZWNpZmljIHJlc29sdXRpb25zLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZVNvdXJjZVR5cGVcbiAqIEBleHRlbmRzIEJhc2VUaWxlTGF5ZXI8VGlsZVNvdXJjZVR5cGUsIENhbnZhc1RpbGVMYXllclJlbmRlcmVyPlxuICogQGFwaVxuICovXG52YXIgVGlsZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0Jhc2VUaWxlLmpzXCIpLk9wdGlvbnM8VGlsZVNvdXJjZVR5cGU+fSBbb3B0X29wdGlvbnNdIFRpbGUgbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdF9vcHRpb25zKSB8fCB0aGlzO1xuICAgIH1cbiAgICBUaWxlTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVMYXllcjtcbn0oQmFzZVRpbGVMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1Byb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIENFTlRFUjogJ2NlbnRlcicsXG4gICAgUkVTT0xVVElPTjogJ3Jlc29sdXRpb24nLFxuICAgIFJPVEFUSU9OOiAncm90YXRpb24nLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29vcmRpbmF0ZVxuICovXG5pbXBvcnQgeyBnZXRXaWR0aCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBwYWROdW1iZXIgfSBmcm9tICcuL3N0cmluZy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGFuIHh5IGNvb3JkaW5hdGUuIEV4YW1wbGU6IGBbMTYsIDQ4XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gQ29vcmRpbmF0ZVxuICogQGFwaVxuICovXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhbmRcbiAqIHRyYW5zZm9ybXMgaXQgaW50byBhIGB7c3RyaW5nfWAuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChDb29yZGluYXRlfHVuZGVmaW5lZCkpOiBzdHJpbmd9IENvb3JkaW5hdGVGb3JtYXRcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBBZGQgYGRlbHRhYCB0byBgY29vcmRpbmF0ZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge2FkZH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGFkZChjb29yZCwgWy0yLCA0XSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs1Ljg1LCA1MS45ODMzMzNdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGlucHV0IGNvb3JkaW5hdGUgYWRqdXN0ZWQgYnlcbiAqIHRoZSBnaXZlbiBkZWx0YS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChjb29yZGluYXRlLCBkZWx0YSkge1xuICAgIGNvb3JkaW5hdGVbMF0gKz0gK2RlbHRhWzBdO1xuICAgIGNvb3JkaW5hdGVbMV0gKz0gK2RlbHRhWzFdO1xuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwb2ludCBjbG9zZXN0IHRvIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBvbiB0aGUgcGFzc2VkIGNpcmNsZS5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gY2lyY2xlIFRoZSBjaXJjbGUuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDbG9zZXN0IHBvaW50IG9uIHRoZSBjaXJjdW1mZXJlbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdE9uQ2lyY2xlKGNvb3JkaW5hdGUsIGNpcmNsZSkge1xuICAgIHZhciByID0gY2lyY2xlLmdldFJhZGl1cygpO1xuICAgIHZhciBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIHgwID0gY2VudGVyWzBdO1xuICAgIHZhciB5MCA9IGNlbnRlclsxXTtcbiAgICB2YXIgeDEgPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5MSA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIGR4ID0geDEgLSB4MDtcbiAgICB2YXIgZHkgPSB5MSAtIHkwO1xuICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCkge1xuICAgICAgICBkeCA9IDE7XG4gICAgfVxuICAgIHZhciBkID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICB2YXIgeCA9IHgwICsgKHIgKiBkeCkgLyBkO1xuICAgIHZhciB5ID0geTAgKyAociAqIGR5KSAvIGQ7XG4gICAgcmV0dXJuIFt4LCB5XTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBzZWdtZW50LlxuICogVGhpcyBpcyB0aGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudCB3aGVuXG4gKiB0aGUgZm9vdCBpcyBvbiB0aGUgc2VnbWVudCwgb3IgdGhlIGNsb3Nlc3Qgc2VnbWVudCBjb29yZGluYXRlIHdoZW4gdGhlIGZvb3RcbiAqIGlzIG91dHNpZGUgdGhlIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBUaGUgdHdvIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgc2VnbWVudC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mXG4gKiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICAgIHZhciB4MCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkwID0gY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgc3RhcnQgPSBzZWdtZW50WzBdO1xuICAgIHZhciBlbmQgPSBzZWdtZW50WzFdO1xuICAgIHZhciB4MSA9IHN0YXJ0WzBdO1xuICAgIHZhciB5MSA9IHN0YXJ0WzFdO1xuICAgIHZhciB4MiA9IGVuZFswXTtcbiAgICB2YXIgeTIgPSBlbmRbMV07XG4gICAgdmFyIGR4ID0geDIgLSB4MTtcbiAgICB2YXIgZHkgPSB5MiAtIHkxO1xuICAgIHZhciBhbG9uZyA9IGR4ID09PSAwICYmIGR5ID09PSAwXG4gICAgICAgID8gMFxuICAgICAgICA6IChkeCAqICh4MCAtIHgxKSArIGR5ICogKHkwIC0geTEpKSAvIChkeCAqIGR4ICsgZHkgKiBkeSB8fCAwKTtcbiAgICB2YXIgeCwgeTtcbiAgICBpZiAoYWxvbmcgPD0gMCkge1xuICAgICAgICB4ID0geDE7XG4gICAgICAgIHkgPSB5MTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYWxvbmcgPj0gMSkge1xuICAgICAgICB4ID0geDI7XG4gICAgICAgIHkgPSB5MjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHggPSB4MSArIGFsb25nICogZHg7XG4gICAgICAgIHkgPSB5MSArIGFsb25nICogZHk7XG4gICAgfVxuICAgIHJldHVybiBbeCwgeV07XG59XG4vKipcbiAqIFJldHVybnMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZUZvcm1hdH0gZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAqIHVzZWQgdG8gZm9ybWF0XG4gKiBhIHtDb29yZGluYXRlfSB0byBhIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKCk7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgd2l0aCBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMiBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoMik7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuODUsIDQ3Ljk4J1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlRm9ybWF0fSBDb29yZGluYXRlIGZvcm1hdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0cmluZ1hZKG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcgWFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGhlbWlzcGhlcmVzIEhlbWlzcGhlcmVzLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgRGVncmVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZ3JlZXNUb1N0cmluZ0hETVMoaGVtaXNwaGVyZXMsIGRlZ3JlZXMsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHZhciBub3JtYWxpemVkRGVncmVlcyA9IG1vZHVsbyhkZWdyZWVzICsgMTgwLCAzNjApIC0gMTgwO1xuICAgIHZhciB4ID0gTWF0aC5hYnMoMzYwMCAqIG5vcm1hbGl6ZWREZWdyZWVzKTtcbiAgICB2YXIgZGZsUHJlY2lzaW9uID0gb3B0X2ZyYWN0aW9uRGlnaXRzIHx8IDA7XG4gICAgdmFyIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBkZmxQcmVjaXNpb24pO1xuICAgIHZhciBkZWcgPSBNYXRoLmZsb29yKHggLyAzNjAwKTtcbiAgICB2YXIgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICAgIHZhciBzZWMgPSB4IC0gZGVnICogMzYwMCAtIG1pbiAqIDYwO1xuICAgIHNlYyA9IE1hdGguY2VpbChzZWMgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIGlmIChzZWMgPj0gNjApIHtcbiAgICAgICAgc2VjID0gMDtcbiAgICAgICAgbWluICs9IDE7XG4gICAgfVxuICAgIGlmIChtaW4gPj0gNjApIHtcbiAgICAgICAgbWluID0gMDtcbiAgICAgICAgZGVnICs9IDE7XG4gICAgfVxuICAgIHJldHVybiAoZGVnICtcbiAgICAgICAgJ1xcdTAwYjAgJyArXG4gICAgICAgIHBhZE51bWJlcihtaW4sIDIpICtcbiAgICAgICAgJ1xcdTIwMzIgJyArXG4gICAgICAgIHBhZE51bWJlcihzZWMsIDIsIGRmbFByZWNpc2lvbikgK1xuICAgICAgICAnXFx1MjAzMycgK1xuICAgICAgICAobm9ybWFsaXplZERlZ3JlZXMgPT0gMFxuICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgOiAnICcgKyBoZW1pc3BoZXJlcy5jaGFyQXQobm9ybWFsaXplZERlZ3JlZXMgPCAwID8gMSA6IDApKSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSB0byBhIHN0cmluZ1xuICogdXNpbmcgdGhlIGdpdmVuIHN0cmluZyB0ZW1wbGF0ZS4gVGhlIHN0cmluZ3MgYHt4fWAgYW5kIGB7eX1gIGluIHRoZSB0ZW1wbGF0ZVxuICogd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHRlbXBsYXRlID0gJ0Nvb3JkaW5hdGUgaXMgKHt4fXx7eX0pLic7XG4gKiAgICAgdmFyIG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDh8NDgpLidcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHRlbXBsYXRlID0gJ0Nvb3JkaW5hdGUgaXMgKHt4fXx7eX0pLic7XG4gKiAgICAgdmFyIG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUsIDIpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDcuODV8NDcuOTgpLidcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBBIHRlbXBsYXRlIHN0cmluZyB3aXRoIGB7eH1gIGFuZCBge3l9YCBwbGFjZWhvbGRlcnNcbiAqICAgICB0aGF0IHdpbGwgYmUgcmVwbGFjZWQgYnkgZmlyc3QgYW5kIHNlY29uZCBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEZvcm1hdHRlZCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0KGNvb3JkaW5hdGUsIHRlbXBsYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7eH0nLCBjb29yZGluYXRlWzBdLnRvRml4ZWQob3B0X2ZyYWN0aW9uRGlnaXRzKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7eX0nLCBjb29yZGluYXRlWzFdLnRvRml4ZWQob3B0X2ZyYWN0aW9uRGlnaXRzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBjb29yZGluYXRlcyBhcmUgZXF1YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoY29vcmRpbmF0ZTEsIGNvb3JkaW5hdGUyKSB7XG4gICAgdmFyIGVxdWFscyA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IGNvb3JkaW5hdGUxLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGlmIChjb29yZGluYXRlMVtpXSAhPSBjb29yZGluYXRlMltpXSkge1xuICAgICAgICAgICAgZXF1YWxzID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXF1YWxzO1xufVxuLyoqXG4gKiBSb3RhdGUgYGNvb3JkaW5hdGVgIGJ5IGBhbmdsZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmRcbiAqIHJldHVybmVkIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge3JvdGF0ZX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciByb3RhdGVSYWRpYW5zID0gTWF0aC5QSSAvIDI7IC8vIDkwIGRlZ3JlZXNcbiAqICAgICByb3RhdGUoY29vcmQsIHJvdGF0ZVJhZGlhbnMpO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbLTQ3Ljk4MzMzMywgNy44NV1cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZSBpbiByYWRpYW4uXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGNvb3JkaW5hdGUsIGFuZ2xlKSB7XG4gICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF0gKiBjb3NBbmdsZSAtIGNvb3JkaW5hdGVbMV0gKiBzaW5BbmdsZTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV0gKiBjb3NBbmdsZSArIGNvb3JkaW5hdGVbMF0gKiBzaW5BbmdsZTtcbiAgICBjb29yZGluYXRlWzBdID0geDtcbiAgICBjb29yZGluYXRlWzFdID0geTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogU2NhbGUgYGNvb3JkaW5hdGVgIGJ5IGBzY2FsZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzY2FsZSA9IDEuMjtcbiAqICAgICBzY2FsZUNvb3JkaW5hdGUoY29vcmQsIHNjYWxlKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzkuNDIsIDU3LjU3OTk5OTZdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgZmFjdG9yLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGNvb3JkaW5hdGUsIHNjYWxlKSB7XG4gICAgY29vcmRpbmF0ZVswXSAqPSBzY2FsZTtcbiAgICBjb29yZGluYXRlWzFdICo9IHNjYWxlO1xuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDIgU2Vjb25kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZShjb29yZDEsIGNvb3JkMikge1xuICAgIHZhciBkeCA9IGNvb3JkMVswXSAtIGNvb3JkMlswXTtcbiAgICB2YXIgZHkgPSBjb29yZDFbMV0gLSBjb29yZDJbMV07XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDIgU2Vjb25kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IERpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZShjb29yZDEsIGNvb3JkMikge1xuICAgIHJldHVybiBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSk7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIGEgY29vcmRpbmF0ZSB0byBhIGxpbmUgc2VnbWVudC5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PENvb3JkaW5hdGU+fSBzZWdtZW50IExpbmUgc2VnbWVudCAoMlxuICogY29vcmRpbmF0ZXMpLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGZyb20gdGhlIHBvaW50IHRvIHRoZSBsaW5lIHNlZ21lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2VUb1NlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2UoY29vcmRpbmF0ZSwgY2xvc2VzdE9uU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSk7XG59XG4vKipcbiAqIEZvcm1hdCBhIGdlb2dyYXBoaWMgY29vcmRpbmF0ZSB3aXRoIHRoZSBoZW1pc3BoZXJlLCBkZWdyZWVzLCBtaW51dGVzLCBhbmRcbiAqIHNlY29uZHMuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdIRE1TfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MOKAsyBOIDfCsCA1MOKAsiA2MOKAsyBFJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIDEgZnJhY3Rpb25hbCBkaWdpdDpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdIRE1TKGNvb3JkLCAxKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc0N8KwIDU44oCyIDYwLjDigLMgTiA3wrAgNTDigLIgNjAuMOKAsyBFJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcyBhbmQgc2Vjb25kcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nSERNUyhjb29yZGluYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gKGRlZ3JlZXNUb1N0cmluZ0hETVMoJ05TJywgY29vcmRpbmF0ZVsxXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgZGVncmVlc1RvU3RyaW5nSERNUygnRVcnLCBjb29yZGluYXRlWzBdLCBvcHRfZnJhY3Rpb25EaWdpdHMpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIEZvcm1hdCBhIGNvb3JkaW5hdGUgYXMgYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gWFkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ1hZKGNvb3JkaW5hdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHJldHVybiBmb3JtYXQoY29vcmRpbmF0ZSwgJ3t4fSwge3l9Jywgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbn1cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUgaW4tcGxhY2UgdG8gYmUgd2l0aGluIHRoZSByZWFsIHdvcmxkXG4gKiBleHRlbnQuIFRoZSBsb3dlciBwcm9qZWN0aW9uIGV4dGVudCBib3VuZGFyeSBpcyBpbmNsdXNpdmUsIHRoZSB1cHBlciBvbmVcbiAqIGV4Y2x1c2l2ZS5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGNvb3JkaW5hdGUsIHByb2plY3Rpb24pIHtcbiAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpKSB7XG4gICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbi5nZXRFeHRlbnQoKSk7XG4gICAgICAgIHZhciB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCB3b3JsZFdpZHRoKTtcbiAgICAgICAgaWYgKHdvcmxkc0F3YXkpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVbMF0gLT0gd29ybGRzQXdheSAqIHdvcmxkV2lkdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zb3VyY2VFeHRlbnRXaWR0aF0gV2lkdGggb2YgdGhlIHNvdXJjZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE9mZnNldCBpbiB3b3JsZCB3aWR0aHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXb3JsZHNBd2F5KGNvb3JkaW5hdGUsIHByb2plY3Rpb24sIG9wdF9zb3VyY2VFeHRlbnRXaWR0aCkge1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgd29ybGRzQXdheSA9IDA7XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgICAgICAoY29vcmRpbmF0ZVswXSA8IHByb2plY3Rpb25FeHRlbnRbMF0gfHwgY29vcmRpbmF0ZVswXSA+IHByb2plY3Rpb25FeHRlbnRbMl0pKSB7XG4gICAgICAgIHZhciBzb3VyY2VFeHRlbnRXaWR0aCA9IG9wdF9zb3VyY2VFeHRlbnRXaWR0aCB8fCBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgd29ybGRzQXdheSA9IE1hdGguZmxvb3IoKGNvb3JkaW5hdGVbMF0gLSBwcm9qZWN0aW9uRXh0ZW50WzBdKSAvIHNvdXJjZUV4dGVudFdpZHRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdvcmxkc0F3YXk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb29yZGluYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jZW50ZXJjb25zdHJhaW50XG4gKi9cbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpLCBudW1iZXIsIGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplLCBib29sZWFuPSwgQXJyYXk8bnVtYmVyPj0pOiAoaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBvbmx5Q2VudGVyIElmIHRydWUsIHRoZSBjb25zdHJhaW50IHdpbGwgb25seSBhcHBseSB0byB0aGUgdmlldyBjZW50ZXIuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNtb290aCBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gZ28gc2xpZ2h0bHkgb3V0IG9mIHRoZSBnaXZlbiBleHRlbnRcbiAqIChvbmx5IGR1cmluZyBpbnRlcmFjdGlvbiBhbmQgYW5pbWF0aW9uKS5cbiAqIEByZXR1cm4ge1R5cGV9IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXh0ZW50KGV4dGVudCwgb25seUNlbnRlciwgc21vb3RoKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIENlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZTsgdW51c2VkIGlmIGBvbmx5Q2VudGVyYCB3YXMgc3BlY2lmaWVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2NlbnRlclNoaWZ0XSBTaGlmdCBiZXR3ZWVuIG1hcCBjZW50ZXIgYW5kIHZpZXdwb3J0IGNlbnRlci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoY2VudGVyLCByZXNvbHV0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcsIG9wdF9jZW50ZXJTaGlmdCkge1xuICAgICAgICBpZiAoY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgdmlld1dpZHRoID0gb25seUNlbnRlciA/IDAgOiBzaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2aWV3SGVpZ2h0ID0gb25seUNlbnRlciA/IDAgOiBzaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBzaGlmdFggPSBvcHRfY2VudGVyU2hpZnQgPyBvcHRfY2VudGVyU2hpZnRbMF0gOiAwO1xuICAgICAgICAgICAgdmFyIHNoaWZ0WSA9IG9wdF9jZW50ZXJTaGlmdCA/IG9wdF9jZW50ZXJTaGlmdFsxXSA6IDA7XG4gICAgICAgICAgICB2YXIgbWluWCA9IGV4dGVudFswXSArIHZpZXdXaWR0aCAvIDIgKyBzaGlmdFg7XG4gICAgICAgICAgICB2YXIgbWF4WCA9IGV4dGVudFsyXSAtIHZpZXdXaWR0aCAvIDIgKyBzaGlmdFg7XG4gICAgICAgICAgICB2YXIgbWluWSA9IGV4dGVudFsxXSArIHZpZXdIZWlnaHQgLyAyICsgc2hpZnRZO1xuICAgICAgICAgICAgdmFyIG1heFkgPSBleHRlbnRbM10gLSB2aWV3SGVpZ2h0IC8gMiArIHNoaWZ0WTtcbiAgICAgICAgICAgIC8vIG5vdGU6IHdoZW4gem9vbWluZyBvdXQgb2YgYm91bmRzLCBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHggYW5kIHkgbWF5XG4gICAgICAgICAgICAvLyBlbmQgdXAgaW52ZXJ0ZWQgKG1pbiA+IG1heCk7IHRoaXMgaGFzIHRvIGJlIGFjY291bnRlZCBmb3JcbiAgICAgICAgICAgIGlmIChtaW5YID4gbWF4WCkge1xuICAgICAgICAgICAgICAgIG1pblggPSAobWF4WCArIG1pblgpIC8gMjtcbiAgICAgICAgICAgICAgICBtYXhYID0gbWluWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW5ZID4gbWF4WSkge1xuICAgICAgICAgICAgICAgIG1pblkgPSAobWF4WSArIG1pblkpIC8gMjtcbiAgICAgICAgICAgICAgICBtYXhZID0gbWluWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB4ID0gY2xhbXAoY2VudGVyWzBdLCBtaW5YLCBtYXhYKTtcbiAgICAgICAgICAgIHZhciB5ID0gY2xhbXAoY2VudGVyWzFdLCBtaW5ZLCBtYXhZKTtcbiAgICAgICAgICAgIHZhciByYXRpbyA9IDMwICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIC8vIGR1cmluZyBhbiBpbnRlcmFjdGlvbiwgYWxsb3cgc29tZSBvdmVyc2Nyb2xsXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nICYmIHNtb290aCkge1xuICAgICAgICAgICAgICAgIHggKz1cbiAgICAgICAgICAgICAgICAgICAgLXJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIG1pblggLSBjZW50ZXJbMF0pIC8gcmF0aW8pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclswXSAtIG1heFgpIC8gcmF0aW8pO1xuICAgICAgICAgICAgICAgIHkgKz1cbiAgICAgICAgICAgICAgICAgICAgLXJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIG1pblkgLSBjZW50ZXJbMV0pIC8gcmF0aW8pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclsxXSAtIG1heFkpIC8gcmF0aW8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFt4LCB5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gQ2VudGVyLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKGNlbnRlcikge1xuICAgIHJldHVybiBjZW50ZXI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jZW50ZXJjb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXNvbHV0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXRIZWlnaHQsIGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGluZWFyRmluZE5lYXJlc3QgfSBmcm9tICcuL2FycmF5LmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChudW1iZXJ8dW5kZWZpbmVkKSwgbnVtYmVyLCBpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZSwgYm9vbGVhbj0pOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgcmVzb2x1dGlvbiB0YWtpbmcgaW50byBhY2NvdW50IHRoZSB2aWV3cG9ydCBzaXplIGFuZCBtYXhpbXVtXG4gKiBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb25cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhFeHRlbnQgTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHZpZXdwb3J0U2l6ZSBWaWV3cG9ydCBzaXplLlxuICogQHBhcmFtIHtib29sZWFufSBzaG93RnVsbEV4dGVudCBXaGV0aGVyIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBDYXBwZWQgcmVzb2x1dGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBtYXhFeHRlbnQsIHZpZXdwb3J0U2l6ZSwgc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICB2YXIgeFJlc29sdXRpb24gPSBnZXRXaWR0aChtYXhFeHRlbnQpIC8gdmlld3BvcnRTaXplWzBdO1xuICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChtYXhFeHRlbnQpIC8gdmlld3BvcnRTaXplWzFdO1xuICAgIGlmIChzaG93RnVsbEV4dGVudCkge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4ocmVzb2x1dGlvbiwgTWF0aC5tYXgoeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKSk7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1pbihyZXNvbHV0aW9uLCBNYXRoLm1pbih4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIG1vZGlmaWVkIHJlc29sdXRpb24gdG8gYmUgYmV0d2VlbiBtYXhSZXNvbHV0aW9uIGFuZCBtaW5SZXNvbHV0aW9uIHdoaWxlXG4gKiBzdGlsbCBhbGxvd2luZyB0aGUgdmFsdWUgdG8gYmUgc2xpZ2h0bHkgb3V0IG9mIGJvdW5kcy5cbiAqIE5vdGU6IHRoZSBjb21wdXRhdGlvbiBpcyBiYXNlZCBvbiB0aGUgbG9nYXJpdGhtIGZ1bmN0aW9uIChsbik6XG4gKiAgLSBhdCAxLCBsbih4KSBpcyAwXG4gKiAgLSBhYm92ZSAxLCBsbih4KSBrZWVwcyBpbmNyZWFzaW5nIGJ1dCBhdCBhIG11Y2ggc2xvd2VyIHBhY2UgdGhhbiB4XG4gKiBUaGUgZmluYWwgcmVzdWx0IGlzIGNsYW1wZWQgdG8gcHJldmVudCBnZXR0aW5nIHRvbyBmYXIgYXdheSBmcm9tIGJvdW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXggcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIE1pbiByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBTbW9vdGhlZCByZXNvbHV0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgdmFyIHJlc3VsdCA9IE1hdGgubWluKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24pO1xuICAgIHZhciByYXRpbyA9IDUwO1xuICAgIHJlc3VsdCAqPVxuICAgICAgICBNYXRoLmxvZygxICsgcmF0aW8gKiBNYXRoLm1heCgwLCByZXNvbHV0aW9uIC8gbWF4UmVzb2x1dGlvbiAtIDEpKSAvIHJhdGlvICtcbiAgICAgICAgICAgIDE7XG4gICAgaWYgKG1pblJlc29sdXRpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gTWF0aC5tYXgocmVzdWx0LCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgcmVzdWx0IC89XG4gICAgICAgICAgICBNYXRoLmxvZygxICsgcmF0aW8gKiBNYXRoLm1heCgwLCBtaW5SZXNvbHV0aW9uIC8gcmVzb2x1dGlvbiAtIDEpKSAvXG4gICAgICAgICAgICAgICAgcmF0aW8gK1xuICAgICAgICAgICAgICAgIDE7XG4gICAgfVxuICAgIHJldHVybiBjbGFtcChyZXN1bHQsIG1pblJlc29sdXRpb24gLyAyLCBtYXhSZXNvbHV0aW9uICogMik7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc21vb3RoXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gc2xpZ2h0bHkgZXhjZWVkIHJlc29sdXRpb24gbGltaXRzLiBEZWZhdWx0OiB0cnVlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zKHJlc29sdXRpb25zLCBvcHRfc21vb3RoLCBvcHRfbWF4RXh0ZW50LCBvcHRfc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBtYXhSZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbMF07XG4gICAgICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIC8vIGR1cmluZyBpbnRlcmFjdGluZyBvciBhbmltYXRpbmcsIGFsbG93IGludGVybWVkaWFyeSB2YWx1ZXNcbiAgICAgICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgc21vb3RoID0gb3B0X3Ntb290aCAhPT0gdW5kZWZpbmVkID8gb3B0X3Ntb290aCA6IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFzbW9vdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhcHBlZCA9IE1hdGgubWluKGNhcHBlZE1heFJlcywgcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB2YXIgeiA9IE1hdGguZmxvb3IobGluZWFyRmluZE5lYXJlc3QocmVzb2x1dGlvbnMsIGNhcHBlZCwgZGlyZWN0aW9uKSk7XG4gICAgICAgICAgICBpZiAocmVzb2x1dGlvbnNbel0gPiBjYXBwZWRNYXhSZXMgJiYgeiA8IHJlc29sdXRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x1dGlvbnNbeiArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3pdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcG93ZXIgUG93ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXhpbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9taW5SZXNvbHV0aW9uXSBNaW5pbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc21vb3RoXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gc2xpZ2h0bHkgZXhjZWVkIHJlc29sdXRpb24gbGltaXRzLiBEZWZhdWx0OiB0cnVlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Bvd2VyKHBvd2VyLCBtYXhSZXNvbHV0aW9uLCBvcHRfbWluUmVzb2x1dGlvbiwgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgY2FwcGVkTWF4UmVzID0gb3B0X21heEV4dGVudFxuICAgICAgICAgICAgICAgID8gZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBvcHRfbWF4RXh0ZW50LCBzaXplLCBvcHRfc2hvd0Z1bGxFeHRlbnQpXG4gICAgICAgICAgICAgICAgOiBtYXhSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSBvcHRfbWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X21pblJlc29sdXRpb24gOiAwO1xuICAgICAgICAgICAgLy8gZHVyaW5nIGludGVyYWN0aW5nIG9yIGFuaW1hdGluZywgYWxsb3cgaW50ZXJtZWRpYXJ5IHZhbHVlc1xuICAgICAgICAgICAgaWYgKG9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgICAgIHZhciBzbW9vdGggPSBvcHRfc21vb3RoICE9PSB1bmRlZmluZWQgPyBvcHRfc21vb3RoIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXNtb290aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIGNhcHBlZE1heFJlcywgbWluUmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdG9sZXJhbmNlID0gMWUtOTtcbiAgICAgICAgICAgIHZhciBtaW5ab29tTGV2ZWwgPSBNYXRoLmNlaWwoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIGNhcHBlZE1heFJlcykgLyBNYXRoLmxvZyhwb3dlcikgLSB0b2xlcmFuY2UpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IC1kaXJlY3Rpb24gKiAoMC41IC0gdG9sZXJhbmNlKSArIDAuNTtcbiAgICAgICAgICAgIHZhciBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgdmFyIGNhcHBlZFpvb21MZXZlbCA9IE1hdGguZmxvb3IoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIGNhcHBlZCkgLyBNYXRoLmxvZyhwb3dlcikgKyBvZmZzZXQpO1xuICAgICAgICAgICAgdmFyIHpvb21MZXZlbCA9IE1hdGgubWF4KG1pblpvb21MZXZlbCwgY2FwcGVkWm9vbUxldmVsKTtcbiAgICAgICAgICAgIHZhciBuZXdSZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHBvd2VyLCB6b29tTGV2ZWwpO1xuICAgICAgICAgICAgcmV0dXJuIGNsYW1wKG5ld1Jlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc21vb3RoXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gc2xpZ2h0bHkgZXhjZWVkIHJlc29sdXRpb24gbGltaXRzLiBEZWZhdWx0OiB0cnVlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgY2FwcGVkTWF4UmVzID0gb3B0X21heEV4dGVudFxuICAgICAgICAgICAgICAgID8gZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBvcHRfbWF4RXh0ZW50LCBzaXplLCBvcHRfc2hvd0Z1bGxFeHRlbnQpXG4gICAgICAgICAgICAgICAgOiBtYXhSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgaWYgKCFzbW9vdGggfHwgIW9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIGNhcHBlZE1heFJlcywgbWluUmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNvbHV0aW9uY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcm90YXRpb25jb25zdHJhaW50XG4gKi9cbmltcG9ydCB7IHRvUmFkaWFucyB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIGJvb2xlYW49KTogKG51bWJlcnx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZShyb3RhdGlvbikge1xuICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUocm90YXRpb24pIHtcbiAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG4gTi5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9OKG4pIHtcbiAgICB2YXIgdGhldGEgPSAoMiAqIE1hdGguUEkpIC8gbjtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocm90YXRpb24sIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJvdGF0aW9uID0gTWF0aC5mbG9vcihyb3RhdGlvbiAvIHRoZXRhICsgMC41KSAqIHRoZXRhO1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF90b2xlcmFuY2VdIFRvbGVyYW5jZS5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9aZXJvKG9wdF90b2xlcmFuY2UpIHtcbiAgICB2YXIgdG9sZXJhbmNlID0gb3B0X3RvbGVyYW5jZSB8fCB0b1JhZGlhbnMoNSk7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJvdGF0aW9uLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKG9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRpb24pIDw9IHRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm90YXRpb25jb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9lYXNpbmdcbiAqL1xuLyoqXG4gKiBTdGFydCBzbG93IGFuZCBzcGVlZCB1cC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucG93KHQsIDMpO1xufVxuLyoqXG4gKiBTdGFydCBmYXN0IGFuZCBzbG93IGRvd24uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0KHQpIHtcbiAgICByZXR1cm4gMSAtIGVhc2VJbigxIC0gdCk7XG59XG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgdGhlbiBzbG93IGRvd24gYWdhaW4uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbkFuZE91dCh0KSB7XG4gICAgcmV0dXJuIDMgKiB0ICogdCAtIDIgKiB0ICogdCAqIHQ7XG59XG4vKipcbiAqIE1haW50YWluIGEgY29uc3RhbnQgc3BlZWQgb3ZlciB0aW1lLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyKHQpIHtcbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogU3RhcnQgc2xvdywgc3BlZWQgdXAsIGFuZCBhdCB0aGUgdmVyeSBlbmQgc2xvdyBkb3duIGFnYWluLiAgVGhpcyBoYXMgdGhlXG4gKiBzYW1lIGdlbmVyYWwgYmVoYXZpb3IgYXMge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmcuaW5BbmRPdXR9LCBidXQgdGhlIGZpbmFsXG4gKiBzbG93ZG93biBpcyBkZWxheWVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBBbmREb3duKHQpIHtcbiAgICBpZiAodCA8IDAuNSkge1xuICAgICAgICByZXR1cm4gaW5BbmRPdXQoMiAqIHQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDEgLSBpbkFuZE91dCgyICogKHQgLSAwLjUpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lYXNpbmcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlMYXlvdXRcbiAqL1xuLyoqXG4gKiBUaGUgY29vcmRpbmF0ZSBsYXlvdXQgZm9yIGdlb21ldHJpZXMsIGluZGljYXRpbmcgd2hldGhlciBhIDNyZCBvciA0dGggeiAoJ1onKVxuICogb3IgbWVhc3VyZSAoJ00nKSBjb29yZGluYXRlIGlzIGF2YWlsYWJsZS4gU3VwcG9ydGVkIHZhbHVlcyBhcmUgYCdYWSdgLFxuICogYCdYWVonYCwgYCdYWU0nYCwgYCdYWVpNJ2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgWFk6ICdYWScsXG4gICAgWFlaOiAnWFlaJyxcbiAgICBYWU06ICdYWU0nLFxuICAgIFhZWk06ICdYWVpNJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeUxheW91dC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVtcHR5LCBjcmVhdGVPclVwZGF0ZUVtcHR5LCBnZXRIZWlnaHQsIHJldHVybk9yVXBkYXRlLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiwgZ2V0VHJhbnNmb3JtIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBtZW1vaXplT25lIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybTJEIH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICovXG52YXIgdG1wVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHZlY3RvciBnZW9tZXRyaWVzLlxuICpcbiAqIFRvIGdldCBub3RpZmllZCBvZiBjaGFuZ2VzIHRvIHRoZSBnZW9tZXRyeSwgcmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgdGhlXG4gKiBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IG9uIHlvdXIgZ2VvbWV0cnkgaW5zdGFuY2UuXG4gKlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBHZW9tZXRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbWV0cnksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR2VvbWV0cnkoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudF8gPSBjcmVhdGVFbXB0eSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSB0cmFuc2Zvcm1lZCBhbmQgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgICAgICogQGFic3RyYWN0XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXZpc2lvbiBUaGUgZ2VvbWV0cnkgcmV2aXNpb24uXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFtvcHRfdHJhbnNmb3JtXSBPcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAocmV2aXNpb24sIHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGlmICghb3B0X3RyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbG9uZSA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgICAgIGNsb25lLmFwcGx5VHJhbnNmb3JtKG9wdF90cmFuc2Zvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lLmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSBbb3B0X3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5zaW1wbGlmeVRyYW5zZm9ybWVkID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsKHRoaXMuZ2V0UmV2aXNpb24oKSwgc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7IUdlb21ldHJ5fSBDbG9uZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdmFyIGNvb3JkID0gdGhpcy5nZXRDbG9zZXN0UG9pbnQoW3gsIHldKTtcbiAgICAgICAgcmV0dXJuIGNvb3JkWzBdID09PSB4ICYmIGNvb3JkWzFdID09PSB5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjbG9zZXN0IHBvaW50IG9mIHRoZSBnZW9tZXRyeSB0byB0aGUgcGFzc2VkIHBvaW50IGFzXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGUgY29vcmRpbmF0ZX0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2Nsb3Nlc3RQb2ludF0gQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRDbG9zZXN0UG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIG9wdF9jbG9zZXN0UG9pbnQpIHtcbiAgICAgICAgdmFyIGNsb3Nlc3RQb2ludCA9IG9wdF9jbG9zZXN0UG9pbnQgPyBvcHRfY2xvc2VzdFBvaW50IDogW05hTiwgTmFOXTtcbiAgICAgICAgdGhpcy5jbG9zZXN0UG9pbnRYWShwb2ludFswXSwgcG9pbnRbMV0sIGNsb3Nlc3RQb2ludCwgSW5maW5pdHkpO1xuICAgICAgICByZXR1cm4gY2xvc2VzdFBvaW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZ2VvbWV0cnkgaW5jbHVkZXMgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlLiBJZiB0aGVcbiAgICAgKiBjb29yZGluYXRlIGlzIG9uIHRoZSBib3VuZGFyeSBvZiB0aGUgZ2VvbWV0cnksIHJldHVybnMgZmFsc2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJzZWN0c0Nvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluc1hZKGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmV4dGVudFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSB0aGlzLmNvbXB1dGVFeHRlbnQodGhpcy5leHRlbnRfKTtcbiAgICAgICAgICAgIGlmIChpc05hTihleHRlbnRbMF0pIHx8IGlzTmFOKGV4dGVudFsxXSkpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV4dGVudFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0dXJuT3JVcGRhdGUodGhpcy5leHRlbnRfLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGUgZ2VvbWV0cnkgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS4gVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gYW5nbGUgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAoYW5nbGUsIGFuY2hvcikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2NhbGUgdGhlIGdlb21ldHJ5ICh3aXRoIGFuIG9wdGlvbmFsIG9yaWdpbikuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeCBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N5XSBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uIChkZWZhdWx0cyB0byBzeCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgc2NhbGUgb3JpZ2luIChkZWZhdWx0cyB0byB0aGUgY2VudGVyXG4gICAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkuICBGb3IgbGluZXN0cmluZ3MsIHRoaXMgdXNlc1xuICAgICAqIHRoZSBbRG91Z2xhcyBQZXVja2VyXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SYW1lci1Eb3VnbGFzLVBldWNrZXJfYWxnb3JpdGhtKVxuICAgICAqIGFsZ29yaXRobS4gIEZvciBwb2x5Z29ucywgYSBxdWFudGl6YXRpb24tYmFzZWRcbiAgICAgKiBzaW1wbGlmaWNhdGlvbiBpcyB1c2VkIHRvIHByZXNlcnZlIHRvcG9sb2d5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVGhlIHRvbGVyYW5jZSBkaXN0YW5jZSBmb3Igc2ltcGxpZmljYXRpb24uXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IEEgbmV3LCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIG9yaWdpbmFsIGdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiAodG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeSh0b2xlcmFuY2UgKiB0b2xlcmFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkgdXNpbmcgdGhlIERvdWdsYXMgUGV1Y2tlclxuICAgICAqIGFsZ29yaXRobS5cbiAgICAgKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5ID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBDYWxsZWQgd2l0aCBhIGZsYXQgYXJyYXkgb2YgZ2VvbWV0cnkgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5VHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBlYWNoIGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5IGZyb20gb25lIGNvb3JkaW5hdGUgcmVmZXJlbmNlXG4gICAgICogc3lzdGVtIHRvIGFub3RoZXIuIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBGb3IgZXhhbXBsZSwgYSBsaW5lIHdpbGwgYmUgdHJhbnNmb3JtZWQgdG8gYSBsaW5lIGFuZCBhIGNpcmNsZSB0byBhIGNpcmNsZS5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHNvdXJjZSBUaGUgY3VycmVudCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBUaGUgZGVzaXJlZCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IFRoaXMgZ2VvbWV0cnkuICBOb3RlIHRoYXQgb3JpZ2luYWwgZ2VvbWV0cnkgaXNcbiAgICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbiAoc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqL1xuICAgICAgICB2YXIgc291cmNlUHJvaiA9IGdldFByb2plY3Rpb24oc291cmNlKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybUZuID0gc291cmNlUHJvai5nZXRVbml0cygpID09IFVuaXRzLlRJTEVfUElYRUxTXG4gICAgICAgICAgICA/IGZ1bmN0aW9uIChpbkNvb3JkaW5hdGVzLCBvdXRDb29yZGluYXRlcywgc3RyaWRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBpeGVsRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvamVjdGVkRXh0ZW50ID0gc291cmNlUHJvai5nZXRXb3JsZEV4dGVudCgpO1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IGdldEhlaWdodChwcm9qZWN0ZWRFeHRlbnQpIC8gZ2V0SGVpZ2h0KHBpeGVsRXh0ZW50KTtcbiAgICAgICAgICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcHJvamVjdGVkRXh0ZW50WzBdLCBwcm9qZWN0ZWRFeHRlbnRbM10sIHNjYWxlLCAtc2NhbGUsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTJEKGluQ29vcmRpbmF0ZXMsIDAsIGluQ29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIHRtcFRyYW5zZm9ybSwgb3V0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybUZuKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gR2VvbWV0cnk7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IEdlb21ldHJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC90cmFuc2Zvcm1cbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHggPSBmbGF0Q29vcmRpbmF0ZXNbal07XG4gICAgICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXTtcbiAgICAgICAgZGVzdFtpKytdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gICAgICAgIGRlc3RbaSsrXSA9IHRyYW5zZm9ybVsxXSAqIHggKyB0cmFuc2Zvcm1bM10gKiB5ICsgdHJhbnNmb3JtWzVdO1xuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmNob3IgUm90YXRpb24gYW5jaG9yIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBhbmdsZSwgYW5jaG9yLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgYW5jaG9yWCA9IGFuY2hvclswXTtcbiAgICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGZsYXRDb29yZGluYXRlc1tqXSAtIGFuY2hvclg7XG4gICAgICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWCArIGRlbHRhWCAqIGNvcyAtIGRlbHRhWSAqIHNpbjtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWSArIGRlbHRhWCAqIHNpbiArIGRlbHRhWSAqIGNvcztcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogU2NhbGUgdGhlIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBTY2FsZSBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3gsIHN5LCBhbmNob3IsIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGFuY2hvclggPSBhbmNob3JbMF07XG4gICAgdmFyIGFuY2hvclkgPSBhbmNob3JbMV07XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgICAgICB2YXIgZGVsdGFZID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSAtIGFuY2hvclk7XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclggKyBzeCAqIGRlbHRhWDtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWSArIHN5ICogZGVsdGFZO1xuICAgICAgICBmb3IgKHZhciBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBkZWx0YVgsIGRlbHRhWSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2pdICsgZGVsdGFYO1xuICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdICsgZGVsdGFZO1xuICAgICAgICBmb3IgKHZhciBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeVxuICovXG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi9HZW9tZXRyeS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzLCBnZXRDZW50ZXIgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgcm90YXRlLCBzY2FsZSwgdHJhbnNmb3JtMkQsIHRyYW5zbGF0ZSB9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXM7IGRvIG5vdCBpbnN0YW50aWF0ZVxuICogaW4gYXBwcywgYXMgY2Fubm90IGJlIHJlbmRlcmVkLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU2ltcGxlR2VvbWV0cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNpbXBsZUdlb21ldHJ5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNpbXBsZUdlb21ldHJ5KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHJpZGUgPSAyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRDb29yZGluYXRlcyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Kj59IENvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGZpcnN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gRmlyc3QgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKDAsIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsYXN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gTGFzdCBwb2ludC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldExhc3RDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UodGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC0gdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2dlb20vR2VvbWV0cnlMYXlvdXQgbGF5b3V0fSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRMYXlvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXIgYWxnb3JpdGhtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1NpbXBsZUdlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICBpZiAodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiAhPT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuICAgICAgICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBzcXVhcmVkVG9sZXJhbmNlIGlzIG5lZ2F0aXZlIG9yIGlmIHdlIGtub3cgdGhhdCBzaW1wbGlmaWNhdGlvbiB3aWxsIG5vdFxuICAgICAgICAvLyBoYXZlIGFueSBlZmZlY3QgdGhlbiBqdXN0IHJldHVybiB0aGlzLlxuICAgICAgICBpZiAoc3F1YXJlZFRvbGVyYW5jZSA8IDAgfHxcbiAgICAgICAgICAgICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgIT09IDAgJiZcbiAgICAgICAgICAgICAgICBzcXVhcmVkVG9sZXJhbmNlIDw9IHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaW1wbGlmaWVkR2VvbWV0cnkgPSB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsKHNxdWFyZWRUb2xlcmFuY2UpO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIDwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2ltcGxpZmllZEdlb21ldHJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU2ltcGxpZmljYXRpb24gZGlkIG5vdCBhY3R1YWxseSByZW1vdmUgYW55IGNvb3JkaW5hdGVzLiAgV2Ugbm93IGtub3dcbiAgICAgICAgICAgIC8vIHRoYXQgYW55IGNhbGxzIHRvIGdldFNpbXBsaWZpZWRHZW9tZXRyeSB3aXRoIGEgc3F1YXJlZFRvbGVyYW5jZSBsZXNzXG4gICAgICAgICAgICAvLyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBjdXJyZW50IHNxdWFyZWRUb2xlcmFuY2Ugd2lsbCBhbHNvIG5vdCBoYXZlIGFueVxuICAgICAgICAgICAgLy8gZWZmZWN0LiAgVGhpcyBhbGxvd3MgdXMgdG8gc2hvcnQgY2lyY3VpdCBzaW1wbGlmaWNhdGlvbiAoc2F2aW5nIENQVVxuICAgICAgICAgICAgLy8gY3ljbGVzKSBhbmQgcHJldmVudHMgdGhlIGNhY2hlIG9mIHNpbXBsaWZpZWQgZ2VvbWV0cmllcyBmcm9tIGZpbGxpbmdcbiAgICAgICAgICAgIC8vIHVwIHdpdGggdXNlbGVzcyBpZGVudGljYWwgY29waWVzIG9mIHRoaXMgZ2VvbWV0cnkgKHNhdmluZyBtZW1vcnkpLlxuICAgICAgICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gc3F1YXJlZFRvbGVyYW5jZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFN0cmlkZS5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U3RyaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJpZGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gbGF5b3V0IExheW91dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAobGF5b3V0LCBmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgdGhpcy5zdHJpZGUgPSBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KTtcbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gZmxhdENvb3JkaW5hdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHshQXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBsYXlvdXQgTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXN0aW5nIE5lc3RpbmcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRMYXlvdXQgPSBmdW5jdGlvbiAobGF5b3V0LCBjb29yZGluYXRlcywgbmVzdGluZykge1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICAgICAgdmFyIHN0cmlkZTtcbiAgICAgICAgaWYgKGxheW91dCkge1xuICAgICAgICAgICAgc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5lc3Rpbmc7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpZGUgPSAyO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7QXJyYXl9ICovIChjb29yZGluYXRlc1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyaWRlID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgbGF5b3V0ID0gZ2V0TGF5b3V0Rm9yU3RyaWRlKHN0cmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgICAgIHRoaXMuc3RyaWRlID0gc3RyaWRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIENhbGxlZCB3aXRoIGEgZmxhdCBhcnJheSBvZiBnZW9tZXRyeSBjb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5VHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG4gICAgICAgIGlmICh0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdHJhbnNmb3JtRm4odGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUm90YXRlIHRoZSBnZW9tZXRyeSBhcm91bmQgYSBnaXZlbiBjb29yZGluYXRlLiBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiBhbmdsZSBpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIChhbmdsZSwgYW5jaG9yKSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHJvdGF0ZShmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTY2FsZSB0aGUgZ2VvbWV0cnkgKHdpdGggYW4gb3B0aW9uYWwgb3JpZ2luKS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN4IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3ldIFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24gKGRlZmF1bHRzIHRvIHN4KS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICAgKiAgICAgb2YgdGhlIGdlb21ldHJ5IGV4dGVudCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uIChzeCwgb3B0X3N5LCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBzeSA9IG9wdF9zeTtcbiAgICAgICAgaWYgKHN5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN5ID0gc3g7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3I7XG4gICAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgICAgICBhbmNob3IgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgc2NhbGUoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIHN4LCBzeSwgYW5jaG9yLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSB0aGUgZ2VvbWV0cnkuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeSBjb29yZGluYXRlcyBpbiBwbGFjZS4gIElmXG4gICAgICogaW5zdGVhZCB5b3Ugd2FudCBhIG5ldyBnZW9tZXRyeSwgZmlyc3QgYGNsb25lKClgIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICB0cmFuc2xhdGUoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGRlbHRhWCwgZGVsdGFZLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTaW1wbGVHZW9tZXRyeTtcbn0oR2VvbWV0cnkpKTtcbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gKi9cbmZ1bmN0aW9uIGdldExheW91dEZvclN0cmlkZShzdHJpZGUpIHtcbiAgICB2YXIgbGF5b3V0O1xuICAgIGlmIChzdHJpZGUgPT0gMikge1xuICAgICAgICBsYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RyaWRlID09IDMpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdHJpZGUgPT0gNCkge1xuICAgICAgICBsYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWVpNO1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9ICovIChsYXlvdXQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gbGF5b3V0IExheW91dC5cbiAqIEByZXR1cm4ge251bWJlcn0gU3RyaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCkge1xuICAgIHZhciBzdHJpZGU7XG4gICAgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWSkge1xuICAgICAgICBzdHJpZGUgPSAyO1xuICAgIH1cbiAgICBlbHNlIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFlaIHx8IGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWU0pIHtcbiAgICAgICAgc3RyaWRlID0gMztcbiAgICB9XG4gICAgZWxzZSBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZWk0pIHtcbiAgICAgICAgc3RyaWRlID0gNDtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoc3RyaWRlKTtcbn1cbi8qKlxuICogQHBhcmFtIHtTaW1wbGVHZW9tZXRyeX0gc2ltcGxlR2VvbWV0cnkgU2ltcGxlIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgZmxhdCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUdlb20yRChzaW1wbGVHZW9tZXRyeSwgdHJhbnNmb3JtLCBvcHRfZGVzdCkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGVHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICBpZiAoIWZsYXRDb29yZGluYXRlcykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBzdHJpZGUgPSBzaW1wbGVHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTJEKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCB0cmFuc2Zvcm0sIG9wdF9kZXN0KTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBTaW1wbGVHZW9tZXRyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNpbXBsZUdlb21ldHJ5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY2xvc2VzdFxuICovXG5pbXBvcnQgeyBsZXJwLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4IH0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IG9uIHRoZSAyRCBsaW5lIHNlZ21lbnQgZmxhdENvb3JkaW5hdGVzW29mZnNldDFdIHRvXG4gKiBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0Ml0gdGhhdCBpcyBjbG9zZXN0IHRvIHRoZSBwb2ludCAoeCwgeSkuICBFeHRyYVxuICogZGltZW5zaW9ucyBhcmUgbGluZWFybHkgaW50ZXJwb2xhdGVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQxIE9mZnNldCAxLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldDIgT2Zmc2V0IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldDEsIG9mZnNldDIsIHN0cmlkZSwgeCwgeSwgY2xvc2VzdFBvaW50KSB7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDFdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxICsgMV07XG4gICAgdmFyIGR4ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIC0geDE7XG4gICAgdmFyIGR5ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDIgKyAxXSAtIHkxO1xuICAgIHZhciBvZmZzZXQ7XG4gICAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgICAgIG9mZnNldCA9IG9mZnNldDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBpZiAodCA+IDEpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBsZXJwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQxICsgaV0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgaV0sIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgfVxuICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG59XG4vKipcbiAqIFJldHVybiB0aGUgc3F1YXJlZCBvZiB0aGUgbGFyZ2VzdCBkaXN0YW5jZSBiZXR3ZWVuIGFueSBwYWlyIG9mIGNvbnNlY3V0aXZlXG4gKiBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCkge1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBmb3IgKG9mZnNldCArPSBzdHJpZGU7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB2YXIgc3F1YXJlZERlbHRhID0gc3F1YXJlZER4KHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgaWYgKHNxdWFyZWREZWx0YSA+IG1heCkge1xuICAgICAgICAgICAgbWF4ID0gc3F1YXJlZERlbHRhO1xuICAgICAgICB9XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgbWF4ID0gbWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbWF4O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBtYXgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIG1heCA9IGFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heCk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICB2YXIgaSwgc3F1YXJlZERpc3RhbmNlO1xuICAgIGlmIChtYXhEZWx0YSA9PT0gMCkge1xuICAgICAgICAvLyBBbGwgcG9pbnRzIGFyZSBpZGVudGljYWwsIHNvIGp1c3QgdGVzdCB0aGUgZmlyc3QgcG9pbnQuXG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgdmFyIGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICAgIHdoaWxlIChpbmRleCA8IGVuZCkge1xuICAgICAgICBhc3NpZ25DbG9zZXN0KGZsYXRDb29yZGluYXRlcywgaW5kZXggLSBzdHJpZGUsIGluZGV4LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICAgICAgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIHRtcFBvaW50WzBdLCB0bXBQb2ludFsxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IHRtcFBvaW50W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIGluZGV4ICs9IHN0cmlkZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgICAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgICAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgICAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgICAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICAgICAgaW5kZXggKz1cbiAgICAgICAgICAgICAgICBzdHJpZGUgKlxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgoKE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UpIC0gTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heERlbHRhKSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAwLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNSaW5nKSB7XG4gICAgICAgIC8vIENoZWNrIHRoZSBjbG9zaW5nIHNlZ21lbnQuXG4gICAgICAgIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBlbmQgLSBzdHJpZGUsIG9mZnNldCwgc3RyaWRlLCB4LCB5LCB0bXBQb2ludCk7XG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdFBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIHRtcFBvaW50KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heERlbHRhIE1heCBkZWx0YS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSaW5nIElzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF90bXBQb2ludF0gVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdE11bHRpQXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIG9wdF90bXBQb2ludCkge1xuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbG9zZXN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvZGVmbGF0ZVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlLCBzdHJpZGUpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbaV07XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGUgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdHJpZGU7ICsraikge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2VuZHNdIEVuZHMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzcywgc3RyaWRlLCBvcHRfZW5kcykge1xuICAgIHZhciBlbmRzID0gb3B0X2VuZHMgPyBvcHRfZW5kcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBjb29yZGluYXRlc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kID0gZGVmbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3Nbal0sIHN0cmlkZSk7XG4gICAgICAgIGVuZHNbaSsrXSA9IGVuZDtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICBlbmRzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGVuZHM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBjb29yZGluYXRlc3NzIENvb3JkaW5hdGVzc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IFtvcHRfZW5kc3NdIEVuZHNzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IEVuZHNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzcywgc3RyaWRlLCBvcHRfZW5kc3MpIHtcbiAgICB2YXIgZW5kc3MgPSBvcHRfZW5kc3MgPyBvcHRfZW5kc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmRzID0gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc3Nbal0sIHN0cmlkZSwgZW5kc3NbaV0pO1xuICAgICAgICBlbmRzc1tpKytdID0gZW5kcztcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBlbmRzcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBlbmRzcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmxhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9zaW1wbGlmeVxuICovXG4vLyBCYXNlZCBvbiBzaW1wbGlmeS1qcyBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9zaW1wbGlmeS1qc1xuLy8gQ29weXJpZ2h0IChjKSAyMDEyLCBWbGFkaW1pciBBZ2Fmb25raW5cbi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vL1xuLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4vLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbi8vXG4vLyAgICAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4vLyAgICAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy9cbi8vICAgIDIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4vLyAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuLy9cbi8vIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG4vLyBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG4vLyBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRVxuLy8gQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRVxuLy8gTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuLy8gQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0Zcbi8vIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTU1xuLy8gSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU5cbi8vIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4vLyBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRVxuLy8gUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG5pbXBvcnQgeyBzcXVhcmVkRGlzdGFuY2UsIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UgfSBmcm9tICcuLi8uLi9tYXRoLmpzJztcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtib29sZWFufSBoaWdoUXVhbGl0eSBIaWdoZXN0IHF1YWxpdHkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc10gU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBTaW1wbGlmaWVkIGxpbmUgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2ltcGxpZnlMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgaGlnaFF1YWxpdHksIG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzKSB7XG4gICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNcbiAgICAgICAgOiBbXTtcbiAgICBpZiAoIWhpZ2hRdWFsaXR5KSB7XG4gICAgICAgIGVuZCA9IHJhZGlhbERpc3RhbmNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIHN0cmlkZSA9IDI7XG4gICAgfVxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICByZXR1cm4gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gICAgdmFyIG4gPSAoZW5kIC0gb2Zmc2V0KSAvIHN0cmlkZTtcbiAgICBpZiAobiA8IDMpIHtcbiAgICAgICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBtYXJrZXJzID0gbmV3IEFycmF5KG4pO1xuICAgIG1hcmtlcnNbMF0gPSAxO1xuICAgIG1hcmtlcnNbbiAtIDFdID0gMTtcbiAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgdmFyIHN0YWNrID0gW29mZnNldCwgZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBsYXN0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIHZhciBmaXJzdCA9IHN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgbWF4U3F1YXJlZERpc3RhbmNlID0gMDtcbiAgICAgICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0XTtcbiAgICAgICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0ICsgMV07XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tsYXN0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2xhc3QgKyAxXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0ICsgc3RyaWRlOyBpIDwgbGFzdDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgdmFyIHkgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgdmFyIHNxdWFyZWREaXN0YW5jZV8xID0gc3F1YXJlZFNlZ21lbnREaXN0YW5jZSh4LCB5LCB4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlXzEgPiBtYXhTcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgbWF4U3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlXzE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heFNxdWFyZWREaXN0YW5jZSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIG1hcmtlcnNbKGluZGV4IC0gb2Zmc2V0KSAvIHN0cmlkZV0gPSAxO1xuICAgICAgICAgICAgaWYgKGZpcnN0ICsgc3RyaWRlIDwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGZpcnN0LCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggKyBzdHJpZGUgPCBsYXN0KSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChpbmRleCwgbGFzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNbaV0pIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGkgKiBzdHJpZGVdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSAqIHN0cmlkZSArIDFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEVuZHMgU2ltcGxpZmllZCBlbmRzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlcihmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kcy5wdXNoKHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHNzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZE9mZnNldCA9IGRvdWdsYXNQZXVja2VyQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZGlhbERpc3RhbmNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIGlmIChlbmQgPD0gb2Zmc2V0ICsgc3RyaWRlKSB7XG4gICAgICAgIC8vIHplcm8gb3Igb25lIHBvaW50LCBubyBzaW1wbGlmaWNhdGlvbiBwb3NzaWJsZSwgc28gY29weSBhbmQgcmV0dXJuXG4gICAgICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAvLyBjb3B5IGZpcnN0IHBvaW50XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gICAgdmFyIHgyID0geDE7XG4gICAgdmFyIHkyID0geTE7XG4gICAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UoeDEsIHkxLCB4MiwgeTIpID4gc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgLy8gY29weSBwb2ludCBhdCBvZmZzZXRcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoeDIgIT0geDEgfHwgeTIgIT0geTEpIHtcbiAgICAgICAgLy8gY29weSBsYXN0IHBvaW50XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHJldHVybiB7bnVtYmVyfSBSb3VuZGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc25hcCh2YWx1ZSwgdG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIHRvbGVyYW5jZSAqIE1hdGgucm91bmQodmFsdWUgLyB0b2xlcmFuY2UpO1xufVxuLyoqXG4gKiBTaW1wbGlmaWVzIGEgbGluZSBzdHJpbmcgdXNpbmcgYW4gYWxnb3JpdGhtIGRlc2lnbmVkIGJ5IFRpbSBTY2hhdWIuXG4gKiBDb29yZGluYXRlcyBhcmUgc25hcHBlZCB0byB0aGUgbmVhcmVzdCB2YWx1ZSBpbiBhIHZpcnR1YWwgZ3JpZCBhbmRcbiAqIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZSBjb29yZGluYXRlcyBhcmUgZGlzY2FyZGVkLiAgVGhpcyBlZmZlY3RpdmVseSBwcmVzZXJ2ZXNcbiAqIHRvcG9sb2d5IGFzIHRoZSBzaW1wbGlmaWNhdGlvbiBvZiBhbnkgc3Vic2VjdGlvbiBvZiBhIGxpbmUgc3RyaW5nIGlzXG4gKiBpbmRlcGVuZGVudCBvZiB0aGUgcmVzdCBvZiB0aGUgbGluZSBzdHJpbmcuICBUaGlzIG1lYW5zIHRoYXQsIGZvciBleGFtcGxlcyxcbiAqIHRoZSBjb21tb24gZWRnZSBiZXR3ZWVuIHR3byBwb2x5Z29ucyB3aWxsIGJlIHNpbXBsaWZpZWQgdG8gdGhlIHNhbWUgbGluZVxuICogc3RyaW5nIGluZGVwZW5kZW50bHkgaW4gYm90aCBwb2x5Z29ucy4gIFRoaXMgaW1wbGVtZW50YXRpb24gdXNlcyBhIHNpbmdsZVxuICogcGFzcyBvdmVyIHRoZSBjb29yZGluYXRlcyBhbmQgZWxpbWluYXRlcyBpbnRlcm1lZGlhdGUgY29sbGluZWFyIHBvaW50cy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gICAgLy8gZG8gbm90aGluZyBpZiB0aGUgbGluZSBpcyBlbXB0eVxuICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgICAvLyBzbmFwIHRoZSBmaXJzdCBjb29yZGluYXRlIChQMSlcbiAgICB2YXIgeDEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIHZhciB5MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgLy8gYWRkIHRoZSBmaXJzdCBjb29yZGluYXRlIHRvIHRoZSBvdXRwdXRcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MTtcbiAgICAvLyBmaW5kIHRoZSBuZXh0IGNvb3JkaW5hdGUgdGhhdCBkb2VzIG5vdCBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlIGFzIHRoZSBmaXJzdFxuICAgIC8vIGNvb3JkaW5hdGUgKFAyKVxuICAgIHZhciB4MiwgeTI7XG4gICAgZG8ge1xuICAgICAgICB4MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gICAgICAgIHkyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAgICAgICAvLyBhbGwgY29vcmRpbmF0ZXMgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSwgdGhlIGxpbmUgY29sbGFwc2VzIHRvIGEgcG9pbnRcbiAgICAgICAgICAgIC8vIHB1c2ggdGhlIGxhc3Qgc25hcHBlZCB2YWx1ZSBhbnl3YXkgdG8gZW5zdXJlIHRoYXQgdGhlIG91dHB1dCBjb250YWluc1xuICAgICAgICAgICAgLy8gYXQgbGVhc3QgdHdvIHBvaW50c1xuICAgICAgICAgICAgLy8gRklYTUUgc2hvdWxkIHdlIHJlYWxseSByZXR1cm4gYXQgbGVhc3QgdHdvIHBvaW50cyBhbnl3YXk/XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9IHdoaWxlICh4MiA9PSB4MSAmJiB5MiA9PSB5MSk7XG4gICAgd2hpbGUgKG9mZnNldCA8IGVuZCkge1xuICAgICAgICAvLyBzbmFwIHRoZSBuZXh0IGNvb3JkaW5hdGUgKFAzKVxuICAgICAgICB2YXIgeDMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgICAgICB2YXIgeTMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgLy8gc2tpcCBQMyBpZiBpdCBpcyBlcXVhbCB0byBQMlxuICAgICAgICBpZiAoeDMgPT0geDIgJiYgeTMgPT0geTIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiBQMSBhbmQgUDJcbiAgICAgICAgdmFyIGR4MSA9IHgyIC0geDE7XG4gICAgICAgIHZhciBkeTEgPSB5MiAtIHkxO1xuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDMgYW5kIFAxXG4gICAgICAgIHZhciBkeDIgPSB4MyAtIHgxO1xuICAgICAgICB2YXIgZHkyID0geTMgLSB5MTtcbiAgICAgICAgLy8gaWYgUDEsIFAyLCBhbmQgUDMgYXJlIGNvbGluZWFyIGFuZCBQMyBpcyBmdXJ0aGVyIGZyb20gUDEgdGhhbiBQMiBpcyBmcm9tXG4gICAgICAgIC8vIFAxIGluIHRoZSBzYW1lIGRpcmVjdGlvbiB0aGVuIFAyIGlzIG9uIHRoZSBzdHJhaWdodCBsaW5lIGJldHdlZW4gUDEgYW5kXG4gICAgICAgIC8vIFAzXG4gICAgICAgIGlmIChkeDEgKiBkeTIgPT0gZHkxICogZHgyICYmXG4gICAgICAgICAgICAoKGR4MSA8IDAgJiYgZHgyIDwgZHgxKSB8fCBkeDEgPT0gZHgyIHx8IChkeDEgPiAwICYmIGR4MiA+IGR4MSkpICYmXG4gICAgICAgICAgICAoKGR5MSA8IDAgJiYgZHkyIDwgZHkxKSB8fCBkeTEgPT0gZHkyIHx8IChkeTEgPiAwICYmIGR5MiA+IGR5MSkpKSB7XG4gICAgICAgICAgICAvLyBkaXNjYXJkIFAyIGFuZCBzZXQgUDIgPSBQM1xuICAgICAgICAgICAgeDIgPSB4MztcbiAgICAgICAgICAgIHkyID0geTM7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlaXRoZXIgUDEsIFAyLCBhbmQgUDMgYXJlIG5vdCBjb2xpbmVhciwgb3IgdGhleSBhcmUgY29saW5lYXIgYnV0IFAzIGlzXG4gICAgICAgIC8vIGJldHdlZW4gUDMgYW5kIFAxIG9yIG9uIHRoZSBvcHBvc2l0ZSBoYWxmIG9mIHRoZSBsaW5lIHRvIFAyLiAgYWRkIFAyLFxuICAgICAgICAvLyBhbmQgY29udGludWUgd2l0aCBQMSA9IFAyIGFuZCBQMiA9IFAzXG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgeDIgPSB4MztcbiAgICAgICAgeTIgPSB5MztcbiAgICB9XG4gICAgLy8gYWRkIHRoZSBsYXN0IHBvaW50IChQMilcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gc2ltcGxpZmllZEVuZHNzIFNpbXBsaWZpZWQgZW5kc3MuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW1wbGlmeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2luZmxhdGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBbb3B0X2Nvb3JkaW5hdGVzXSBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gb3B0X2Nvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXMgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgY29vcmRpbmF0ZXNbaSsrXSA9IGZsYXRDb29yZGluYXRlcy5zbGljZShqLCBqICsgc3RyaWRlKTtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXMubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBbb3B0X2Nvb3JkaW5hdGVzc10gQ29vcmRpbmF0ZXNzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9jb29yZGluYXRlc3MpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNzID0gb3B0X2Nvb3JkaW5hdGVzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbal07XG4gICAgICAgIGNvb3JkaW5hdGVzc1tpKytdID0gaW5mbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY29vcmRpbmF0ZXNzW2ldKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICBjb29yZGluYXRlc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXNzO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IFtvcHRfY29vcmRpbmF0ZXNzc11cbiAqICAgICBDb29yZGluYXRlc3NzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBDb29yZGluYXRlc3NzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzc3MpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNzcyA9IG9wdF9jb29yZGluYXRlc3NzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3Nbal07XG4gICAgICAgIGNvb3JkaW5hdGVzc3NbaSsrXSA9IGluZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGNvb3JkaW5hdGVzc3NbaV0pO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXNzcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZmxhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9hcmVhXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgdmFyIHR3aWNlQXJlYSA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgdHdpY2VBcmVhICs9IHkxICogeDIgLSB4MSAqIHkyO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gdHdpY2VBcmVhIC8gMjtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBhcmVhICs9IGxpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSkge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGFyZWEgKz0gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmVhLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9MaW5lYXJSaW5nXG4gKi9cbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgYXNzaWduQ2xvc2VzdFBvaW50LCBtYXhTcXVhcmVkRGVsdGEgfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQgeyBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgZG91Z2xhc1BldWNrZXIgfSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHsgaW5mbGF0ZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZyBhcyBsaW5lYXJSaW5nQXJlYSB9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGluZWFyIHJpbmcgZ2VvbWV0cnkuIE9ubHkgdXNlZCBhcyBwYXJ0IG9mIHBvbHlnb247IGNhbm5vdCBiZSByZW5kZXJlZFxuICogb24gaXRzIG93bi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBMaW5lYXJSaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMaW5lYXJSaW5nLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPnxBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiAgICAgRm9yIGludGVybmFsIHVzZSwgZmxhdCBjb29yZGluYXRlcyBpbiBjb21iaW5hdGlvbiB3aXRoIGBvcHRfbGF5b3V0YCBhcmUgYWxzbyBhY2NlcHRlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMaW5lYXJSaW5nKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFfID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgICAgICAgIF90aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlcyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7IUxpbmVhclJpbmd9IENsb25lLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KG1heFNxdWFyZWREZWx0YSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduQ2xvc2VzdFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBhcmVhIG9mIHRoZSBsaW5lYXIgcmluZyBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ0FyZWEodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW5mbGF0ZUNvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IFNpbXBsaWZpZWQgTGluZWFyUmluZy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAgICogQHBhcmFtIHshQXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAxKTtcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZXModGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIExpbmVhclJpbmc7XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5leHBvcnQgZGVmYXVsdCBMaW5lYXJSaW5nO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGluZWFyUmluZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeVR5cGVcbiAqL1xuLyoqXG4gKiBUaGUgZ2VvbWV0cnkgdHlwZS4gT25lIG9mIGAnUG9pbnQnYCwgYCdMaW5lU3RyaW5nJ2AsIGAnTGluZWFyUmluZydgLFxuICogYCdQb2x5Z29uJ2AsIGAnTXVsdGlQb2ludCdgLCBgJ011bHRpTGluZVN0cmluZydgLCBgJ011bHRpUG9seWdvbidgLFxuICogYCdHZW9tZXRyeUNvbGxlY3Rpb24nYCwgYCdDaXJjbGUnYC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQT0lOVDogJ1BvaW50JyxcbiAgICBMSU5FX1NUUklORzogJ0xpbmVTdHJpbmcnLFxuICAgIExJTkVBUl9SSU5HOiAnTGluZWFyUmluZycsXG4gICAgUE9MWUdPTjogJ1BvbHlnb24nLFxuICAgIE1VTFRJX1BPSU5UOiAnTXVsdGlQb2ludCcsXG4gICAgTVVMVElfTElORV9TVFJJTkc6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICAgIE1VTFRJX1BPTFlHT046ICdNdWx0aVBvbHlnb24nLFxuICAgIEdFT01FVFJZX0NPTExFQ1RJT046ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgIENJUkNMRTogJ0NpcmNsZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnlUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2ludFxuICovXG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGNvbnRhaW5zWFksIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGUgfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQgeyBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4IH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvaW50IGdlb21ldHJ5LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2ludCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9pbnQoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHshUG9pbnR9IENsb25lLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb2ludCA9IG5ldyBQb2ludCh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCk7XG4gICAgICAgIHBvaW50LmFwcGx5UHJvcGVydGllcyh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB2YXIgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIGZsYXRDb29yZGluYXRlc1swXSwgZmxhdENvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuc3RyaWRlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlIG9mIHRoZSBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPyBbXSA6IHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuUE9JTlQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBjb250YWluc1hZKGV4dGVudCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMF0sIHRoaXMuZmxhdENvb3JkaW5hdGVzWzFdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUFycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAwKTtcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9pbnQ7XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5leHBvcnQgZGVmYXVsdCBQb2ludDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY29udGFpbnNcbiAqL1xuaW1wb3J0IHsgZm9yRWFjaENvcm5lciB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICB2YXIgb3V0c2lkZSA9IGZvckVhY2hDb3JuZXIoZXh0ZW50LCBcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gIWxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICFvdXRzaWRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHgsIHkpIHtcbiAgICAvLyBodHRwczovL2dlb21hbGdvcml0aG1zLmNvbS9hMDMtX2luY2x1c2lvbi5odG1sXG4gICAgLy8gQ29weXJpZ2h0IDIwMDAgc29mdFN1cmZlciwgMjAxMiBEYW4gU3VuZGF5XG4gICAgLy8gVGhpcyBjb2RlIG1heSBiZSBmcmVlbHkgdXNlZCBhbmQgbW9kaWZpZWQgZm9yIGFueSBwdXJwb3NlXG4gICAgLy8gcHJvdmlkaW5nIHRoYXQgdGhpcyBjb3B5cmlnaHQgbm90aWNlIGlzIGluY2x1ZGVkIHdpdGggaXQuXG4gICAgLy8gU29mdFN1cmZlciBtYWtlcyBubyB3YXJyYW50eSBmb3IgdGhpcyBjb2RlLCBhbmQgY2Fubm90IGJlIGhlbGRcbiAgICAvLyBsaWFibGUgZm9yIGFueSByZWFsIG9yIGltYWdpbmVkIGRhbWFnZSByZXN1bHRpbmcgZnJvbSBpdHMgdXNlLlxuICAgIC8vIFVzZXJzIG9mIHRoaXMgY29kZSBtdXN0IHZlcmlmeSBjb3JyZWN0bmVzcyBmb3IgdGhlaXIgYXBwbGljYXRpb24uXG4gICAgdmFyIHduID0gMDtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICBpZiAoeTEgPD0geSkge1xuICAgICAgICAgICAgaWYgKHkyID4geSAmJiAoeDIgLSB4MSkgKiAoeSAtIHkxKSAtICh4IC0geDEpICogKHkyIC0geTEpID4gMCkge1xuICAgICAgICAgICAgICAgIHduKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoeTIgPD0geSAmJiAoeDIgLSB4MSkgKiAoeSAtIHkxKSAtICh4IC0geDEpICogKHkyIC0geTEpIDwgMCkge1xuICAgICAgICAgICAgd24tLTtcbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gd24gIT09IDA7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSB7XG4gICAgaWYgKGVuZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCB4LCB5KSB7XG4gICAgaWYgKGVuZHNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaWYgKGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250YWlucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyc2VjdHNleHRlbnRcbiAqL1xuaW1wb3J0IHsgY29udGFpbnNFeHRlbnQsIGNyZWF0ZUVtcHR5LCBleHRlbmRGbGF0Q29vcmRpbmF0ZXMsIGludGVyc2VjdHMsIGludGVyc2VjdHNTZWdtZW50LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBmb3JFYWNoIGFzIGZvckVhY2hTZWdtZW50IH0gZnJvbSAnLi9zZWdtZW50cy5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQsIGxpbmVhclJpbmdDb250YWluc1hZIH0gZnJvbSAnLi9jb250YWlucy5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIHZhciBjb29yZGluYXRlc0V4dGVudCA9IGV4dGVuZEZsYXRDb29yZGluYXRlcyhjcmVhdGVFbXB0eSgpLCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIGlmICghaW50ZXJzZWN0cyhleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjb250YWluc0V4dGVudChleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzBdID49IGV4dGVudFswXSAmJiBjb29yZGluYXRlc0V4dGVudFsyXSA8PSBleHRlbnRbMl0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlc0V4dGVudFsxXSA+PSBleHRlbnRbMV0gJiYgY29vcmRpbmF0ZXNFeHRlbnRbM10gPD0gZXh0ZW50WzNdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZm9yRWFjaFNlZ21lbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQxIFN0YXJ0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludDIgRW5kIHBvaW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgc2VnbWVudCBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QsXG4gICAgICogICAgIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChwb2ludDEsIHBvaW50Mikge1xuICAgICAgICByZXR1cm4gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBwb2ludDEsIHBvaW50Mik7XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZ0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBpZiAoaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBpZiAoaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMF0sIGV4dGVudFsxXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFswXSwgZXh0ZW50WzNdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbMV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMl0sIGV4dGVudFszXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgaWYgKCFpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGVuZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmVhclJpbmdDb250YWluc0V4dGVudChmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmdNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmIChpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0c2V4dGVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3NlZ21lbnRzXG4gKi9cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIHNlZ21lbnQgb2YgdGhlIGZsYXQgY29vcmRpbmF0ZXNcbiAqIGFycmF5LiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGF0XG4gKiB2YWx1ZSBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFR9IGNhbGxiYWNrIEZ1bmN0aW9uXG4gKiAgICAgY2FsbGVkIGZvciBlYWNoIHNlZ21lbnQuXG4gKiBAcmV0dXJuIHtUfGJvb2xlYW59IFZhbHVlLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2goZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjYWxsYmFjaykge1xuICAgIHZhciByZXQ7XG4gICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHJldCA9IGNhbGxiYWNrKGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQgLSBzdHJpZGUsIG9mZnNldCksIGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIG9mZnNldCArIHN0cmlkZSkpO1xuICAgICAgICBpZiAocmV0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlZ21lbnRzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvcmV2ZXJzZVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICB3aGlsZSAob2Zmc2V0IDwgZW5kIC0gc3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgIHZhciB0bXAgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV0gPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV07XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV0gPSB0bXA7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgZW5kIC09IHN0cmlkZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXZlcnNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvb3JpZW50XG4gKi9cbmltcG9ydCB7IGNvb3JkaW5hdGVzIGFzIHJldmVyc2VDb29yZGluYXRlcyB9IGZyb20gJy4vcmV2ZXJzZS5qcyc7XG4vKipcbiAqIElzIHRoZSBsaW5lYXIgcmluZyBvcmllbnRlZCBjbG9ja3dpc2UgaW4gYSBjb29yZGluYXRlIHN5c3RlbSB3aXRoIGEgYm90dG9tLWxlZnRcbiAqIGNvb3JkaW5hdGUgb3JpZ2luPyBGb3IgYSBjb29yZGluYXRlIHN5c3RlbSB3aXRoIGEgdG9wLWxlZnQgY29vcmRpbmF0ZSBvcmlnaW4sXG4gKiB0aGUgcmluZydzIG9yaWVudGF0aW9uIGlzIGNsb2Nrd2lzZSB3aGVuIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBmYWxzZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBjbG9ja3dpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzExNjU2NDcvY2xvY2t3aXNlLW1ldGhvZCMxMTY1OTQzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL09TR2VvL2dkYWwvYmxvYi9tYXN0ZXIvZ2RhbC9vZ3Ivb2dybGluZWFycmluZy5jcHBcbiAgICB2YXIgZWRnZSA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgZWRnZSArPSAoeDIgLSB4MSkgKiAoeTIgKyB5MSk7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiBlZGdlID09PSAwID8gdW5kZWZpbmVkIDogZWRnZSA+IDA7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgQXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gVGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvblxuICogICAgIChjb3VudGVyLWNsb2Nrd2lzZSBleHRlcmlvciByaW5nIGFuZCBjbG9ja3dpc2UgaW50ZXJpb3IgcmluZ3MpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmluZ3MgYXJlIGNvcnJlY3RseSBvcmllbnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gICAgdmFyIHJpZ2h0ID0gb3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQgPyBvcHRfcmlnaHQgOiBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHZhciBpc0Nsb2Nrd2lzZSA9IGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKChyaWdodCAmJiBpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiAhaXNDbG9ja3dpc2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKChyaWdodCAmJiAhaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgaXNDbG9ja3dpc2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaWYgKCFsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgdmFyIHJldmVyc2UgPSBpID09PSAwXG4gICAgICAgICAgICA/IChyaWdodCAmJiBpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiAhaXNDbG9ja3dpc2UpXG4gICAgICAgICAgICA6IChyaWdodCAmJiAhaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgaXNDbG9ja3dpc2UpO1xuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgcmV2ZXJzZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLyoqXG4gKiBPcmllbnQgY29vcmRpbmF0ZXMgaW4gYSBmbGF0IGFycmF5IG9mIGxpbmVhciByaW5ncy4gIEJ5IGRlZmF1bHQsIHJpbmdzXG4gKiBhcmUgb3JpZW50ZWQgZm9sbG93aW5nIHRoZSBsZWZ0LWhhbmQgcnVsZSAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmRcbiAqIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuICBUbyBvcmllbnQgYWNjb3JkaW5nIHRvIHRoZVxuICogcmlnaHQtaGFuZCBydWxlLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEFycmF5IG9mIGFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3NBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBvZmZzZXQgPSBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3NbaV0sIHN0cmlkZSwgb3B0X3JpZ2h0KTtcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yaWVudC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vUG9seWdvblxuICovXG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBMaW5lYXJSaW5nIGZyb20gJy4vTGluZWFyUmluZy5qcyc7XG5pbXBvcnQgUG9pbnQgZnJvbSAnLi9Qb2ludC5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgeyBhcnJheU1heFNxdWFyZWREZWx0YSwgYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQgfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQgeyBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFksIGdldENlbnRlciB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheSB9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGdldEludGVyaW9yUG9pbnRPZkFycmF5IH0gZnJvbSAnLi9mbGF0L2ludGVyaW9ycG9pbnQuanMnO1xuaW1wb3J0IHsgaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW5mbGF0ZS5qcyc7XG5pbXBvcnQgeyBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5IH0gZnJvbSAnLi9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3NBcmVPcmllbnRlZCwgb3JpZW50TGluZWFyUmluZ3MgfSBmcm9tICcuL2ZsYXQvb3JpZW50LmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdzIGFzIGxpbmVhclJpbmdzQXJlYSB9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdzQ29udGFpbnNYWSB9IGZyb20gJy4vZmxhdC9jb250YWlucy5qcyc7XG5pbXBvcnQgeyBtb2R1bG8gfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7IHF1YW50aXplQXJyYXkgfSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHsgb2Zmc2V0IGFzIHNwaGVyZU9mZnNldCB9IGZyb20gJy4uL3NwaGVyZS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvbHlnb24gZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgUG9seWdvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9seWdvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PnwhQXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXNcbiAgICAgKiAgICAgQXJyYXkgb2YgbGluZWFyIHJpbmdzIHRoYXQgZGVmaW5lIHRoZSBwb2x5Z29uLiBUaGUgZmlyc3QgbGluZWFyIHJpbmcgb2YgdGhlXG4gICAgICogICAgIGFycmF5IGRlZmluZXMgdGhlIG91dGVyLWJvdW5kYXJ5IG9yIHN1cmZhY2Ugb2YgdGhlIHBvbHlnb24uIEVhY2ggc3Vic2VxdWVudFxuICAgICAqICAgICBsaW5lYXIgcmluZyBkZWZpbmVzIGEgaG9sZSBpbiB0aGUgc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gQSBsaW5lYXIgcmluZyBpc1xuICAgICAqICAgICBhbiBhcnJheSBvZiB2ZXJ0aWNlcycgY29vcmRpbmF0ZXMgd2hlcmUgdGhlIGZpcnN0IGNvb3JkaW5hdGUgYW5kIHRoZSBsYXN0IGFyZVxuICAgICAqICAgICBlcXVpdmFsZW50LiAoRm9yIGludGVybmFsIHVzZSwgZmxhdCBjb29yZGluYXRlcyBpbiBjb21iaW5hdGlvbiB3aXRoXG4gICAgICogICAgIGBvcHRfbGF5b3V0YCBhbmQgYG9wdF9lbmRzYCBhcmUgYWxzbyBhY2NlcHRlZC4pXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2VuZHNdIEVuZHMgKGZvciBpbnRlcm5hbCB1c2Ugd2l0aCBmbGF0IGNvb3JkaW5hdGVzKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2x5Z29uKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0LCBvcHRfZW5kcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbmRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgICAgICAgIF90aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICAgICAgICBfdGhpcy5lbmRzXyA9IG9wdF9lbmRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCB0aGUgcGFzc2VkIGxpbmVhciByaW5nIHRvIHRoaXMgcG9seWdvbi5cbiAgICAgKiBAcGFyYW0ge0xpbmVhclJpbmd9IGxpbmVhclJpbmcgTGluZWFyIHJpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmFwcGVuZExpbmVhclJpbmcgPSBmdW5jdGlvbiAobGluZWFyUmluZykge1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVuZCh0aGlzLmZsYXRDb29yZGluYXRlcywgbGluZWFyUmluZy5nZXRGbGF0Q29vcmRpbmF0ZXMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRzXy5wdXNoKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFQb2x5Z29ufSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb2x5Z29uID0gbmV3IFBvbHlnb24odGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQsIHRoaXMuZW5kc18uc2xpY2UoKSk7XG4gICAgICAgIHBvbHlnb24uYXBwbHlQcm9wZXJ0aWVzKHRoaXMpO1xuICAgICAgICByZXR1cm4gcG9seWdvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KGFycmF5TWF4U3F1YXJlZERlbHRhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzQ29udGFpbnNYWSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB4LCB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ3NBcmVhKHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGFycmF5IGZvciB0aGlzIGdlb21ldHJ5LiAgVGhpcyBhcnJheSBoYXMgdGhlIHN0cnVjdHVyZVxuICAgICAqIG9mIGEgR2VvSlNPTiBjb29yZGluYXRlIGFycmF5IGZvciBwb2x5Z29ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gT3JpZW50IGNvb3JkaW5hdGVzIGFjY29yZGluZyB0byB0aGUgcmlnaHQtaGFuZFxuICAgICAqICAgICBydWxlIChjb3VudGVyLWNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLlxuICAgICAqICAgICBJZiBgZmFsc2VgLCBjb29yZGluYXRlcyB3aWxsIGJlIG9yaWVudGVkIGFjY29yZGluZyB0byB0aGUgbGVmdC1oYW5kIHJ1bGVcbiAgICAgKiAgICAgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAgICogICAgIEJ5IGRlZmF1bHQsIGNvb3JkaW5hdGUgb3JpZW50YXRpb24gd2lsbCBkZXBlbmQgb24gaG93IHRoZSBnZW9tZXRyeSB3YXNcbiAgICAgKiAgICAgY29uc3RydWN0ZWQuXG4gICAgICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChvcHRfcmlnaHQpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcztcbiAgICAgICAgaWYgKG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICAgICAgICAgIG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEVuZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnQuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RmxhdEludGVyaW9yUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdmFyIGZsYXRDZW50ZXIgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgICAgICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50XyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIGZsYXRDZW50ZXIsIDApO1xuICAgICAgICAgICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5mbGF0SW50ZXJpb3JQb2ludF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW50ZXJpb3IgcG9pbnQgb2YgdGhlIHBvbHlnb24uXG4gICAgICogQHJldHVybiB7UG9pbnR9IEludGVyaW9yIHBvaW50IGFzIFhZTSBjb29yZGluYXRlLCB3aGVyZSBNIGlzIHRoZVxuICAgICAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLmdldEZsYXRJbnRlcmlvclBvaW50KCksIEdlb21ldHJ5TGF5b3V0LlhZTSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiByaW5ncyBvZiB0aGUgcG9seWdvbiwgIHRoaXMgaW5jbHVkZXMgdGhlIGV4dGVyaW9yXG4gICAgICogcmluZyBhbmQgYW55IGludGVyaW9yIHJpbmdzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgcmluZ3MuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kc18ubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBOdGggbGluZWFyIHJpbmcgb2YgdGhlIHBvbHlnb24gZ2VvbWV0cnkuIFJldHVybiBgbnVsbGAgaWYgdGhlXG4gICAgICogZ2l2ZW4gaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgICAqIFRoZSBleHRlcmlvciBsaW5lYXIgcmluZyBpcyBhdmFpbGFibGUgYXQgaW5kZXggYDBgIGFuZCB0aGUgaW50ZXJpb3IgcmluZ3NcbiAgICAgKiBhdCBpbmRleCBgMWAgYW5kIGJleW9uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcmV0dXJuIHtMaW5lYXJSaW5nfSBMaW5lYXIgcmluZy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuZW5kc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IExpbmVhclJpbmcodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaW5kZXggPT09IDAgPyAwIDogdGhpcy5lbmRzX1tpbmRleCAtIDFdLCB0aGlzLmVuZHNfW2luZGV4XSksIHRoaXMubGF5b3V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGluZWFyIHJpbmdzIG9mIHRoZSBwb2x5Z29uLlxuICAgICAqIEByZXR1cm4ge0FycmF5PExpbmVhclJpbmc+fSBMaW5lYXIgcmluZ3MuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5b3V0ID0gdGhpcy5sYXlvdXQ7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgdmFyIGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgICAgICB2YXIgbGluZWFyUmluZ3MgPSBbXTtcbiAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgICAgICB2YXIgbGluZWFyUmluZyA9IG5ldyBMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIGVuZCksIGxheW91dCk7XG4gICAgICAgICAgICBsaW5lYXJSaW5ncy5wdXNoKGxpbmVhclJpbmcpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5lYXJSaW5ncztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE9yaWVudGVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm9yaWVudGVkUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICAgICAgaWYgKGxpbmVhclJpbmdzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18ubGVuZ3RoID0gb3JpZW50TGluZWFyUmluZ3ModGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18sIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3JpZW50ZWRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7UG9seWdvbn0gU2ltcGxpZmllZCBQb2x5Z29uLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplQXJyYXkodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDAsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gR2VvbWV0cnlUeXBlLlBPTFlHT047XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBvbHlnb24uXG4gICAgICogQHBhcmFtIHshQXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMik7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlLCB0aGlzLmVuZHNfKTtcbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZW5kcy5sZW5ndGggPT09IDAgPyAwIDogZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBQb2x5Z29uO1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgUG9seWdvbjtcbi8qKlxuICogQ3JlYXRlIGFuIGFwcHJveGltYXRpb24gb2YgYSBjaXJjbGUgb24gdGhlIHN1cmZhY2Ugb2YgYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciB0b1xuICogICAgIHRoZSBwb2x5Z29uIHZlcnRpY2VzIGluIG1ldGVycy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X25dIE9wdGlvbmFsIG51bWJlciBvZiB2ZXJ0aWNlcyBmb3IgdGhlIHJlc3VsdGluZ1xuICogICAgIHBvbHlnb24uIERlZmF1bHQgaXMgYDMyYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3NwaGVyZVJhZGl1c10gT3B0aW9uYWwgcmFkaXVzIGZvciB0aGUgc3BoZXJlIChkZWZhdWx0cyB0b1xuICogICAgIHRoZSBFYXJ0aCdzIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQpLlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIFwiY2lyY3VsYXJcIiBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2lyY3VsYXIoY2VudGVyLCByYWRpdXMsIG9wdF9uLCBvcHRfc3BoZXJlUmFkaXVzKSB7XG4gICAgdmFyIG4gPSBvcHRfbiA/IG9wdF9uIDogMzI7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICBleHRlbmQoZmxhdENvb3JkaW5hdGVzLCBzcGhlcmVPZmZzZXQoY2VudGVyLCByYWRpdXMsICgyICogTWF0aC5QSSAqIGkpIC8gbiwgb3B0X3NwaGVyZVJhZGl1cykpO1xuICAgIH1cbiAgICBmbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIFtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICBdKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcG9seWdvbiBmcm9tIGFuIGV4dGVudC4gVGhlIGxheW91dCB1c2VkIGlzIGBYWWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXh0ZW50KGV4dGVudCkge1xuICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXG4gICAgICAgIG1pblgsXG4gICAgICAgIG1pblksXG4gICAgICAgIG1pblgsXG4gICAgICAgIG1heFksXG4gICAgICAgIG1heFgsXG4gICAgICAgIG1heFksXG4gICAgICAgIG1heFgsXG4gICAgICAgIG1pblksXG4gICAgICAgIG1pblgsXG4gICAgICAgIG1pblksXG4gICAgXTtcbiAgICByZXR1cm4gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSwgW1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgIF0pO1xufVxuLyoqXG4gKiBDcmVhdGUgYSByZWd1bGFyIHBvbHlnb24gZnJvbSBhIGNpcmNsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9DaXJjbGUuanNcIikuZGVmYXVsdH0gY2lyY2xlIENpcmNsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3NpZGVzXSBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9hbmdsZV0gU3RhcnQgYW5nbGUgZm9yIHRoZSBmaXJzdCB2ZXJ0ZXggb2YgdGhlIHBvbHlnb24gaW5cbiAqICAgICBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zLiAwIG1lYW5zIEVhc3QuIERlZmF1bHQgaXMgMC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQ2lyY2xlKGNpcmNsZSwgb3B0X3NpZGVzLCBvcHRfYW5nbGUpIHtcbiAgICB2YXIgc2lkZXMgPSBvcHRfc2lkZXMgPyBvcHRfc2lkZXMgOiAzMjtcbiAgICB2YXIgc3RyaWRlID0gY2lyY2xlLmdldFN0cmlkZSgpO1xuICAgIHZhciBsYXlvdXQgPSBjaXJjbGUuZ2V0TGF5b3V0KCk7XG4gICAgdmFyIGNlbnRlciA9IGNpcmNsZS5nZXRDZW50ZXIoKTtcbiAgICB2YXIgYXJyYXlMZW5ndGggPSBzdHJpZGUgKiAoc2lkZXMgKyAxKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5TGVuZ3RoOyBpICs9IHN0cmlkZSkge1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaV0gPSAwO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdID0gMDtcbiAgICAgICAgZm9yICh2YXIgaiA9IDI7IGogPCBzdHJpZGU7IGorKykge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW2kgKyBqXSA9IGNlbnRlcltqXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgZW5kcyA9IFtmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoXTtcbiAgICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgbGF5b3V0LCBlbmRzKTtcbiAgICBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIGNpcmNsZS5nZXRSYWRpdXMoKSwgb3B0X2FuZ2xlKTtcbiAgICByZXR1cm4gcG9seWdvbjtcbn1cbi8qKlxuICogTW9kaWZ5IHRoZSBjb29yZGluYXRlcyBvZiBhIHBvbHlnb24gdG8gbWFrZSBpdCBhIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9hbmdsZV0gU3RhcnQgYW5nbGUgZm9yIHRoZSBmaXJzdCB2ZXJ0ZXggb2YgdGhlIHBvbHlnb24gaW5cbiAqICAgICBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zLiAwIG1lYW5zIEVhc3QuIERlZmF1bHQgaXMgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgcmFkaXVzLCBvcHRfYW5nbGUpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gcG9seWdvbi5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gcG9seWdvbi5nZXRTdHJpZGUoKTtcbiAgICB2YXIgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgICB2YXIgc3RhcnRBbmdsZSA9IG9wdF9hbmdsZSA/IG9wdF9hbmdsZSA6IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gc2lkZXM7ICsraSkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gaSAqIHN0cmlkZTtcbiAgICAgICAgdmFyIGFuZ2xlID0gc3RhcnRBbmdsZSArIChtb2R1bG8oaSwgc2lkZXMpICogMiAqIE1hdGguUEkpIC8gc2lkZXM7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdID0gY2VudGVyWzBdICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0gPSBjZW50ZXJbMV0gKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSk7XG4gICAgfVxuICAgIHBvbHlnb24uY2hhbmdlZCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWdvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyaW9ycG9pbnRcbiAqL1xuaW1wb3J0IHsgbGluZWFyUmluZ3NDb250YWluc1hZIH0gZnJvbSAnLi9jb250YWlucy5qcyc7XG5pbXBvcnQgeyBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuLyoqXG4gKiBDYWxjdWxhdGVzIGEgcG9pbnQgdGhhdCBpcyBsaWtlbHkgdG8gbGllIGluIHRoZSBpbnRlcmlvciBvZiB0aGUgbGluZWFyIHJpbmdzLlxuICogSW5zcGlyZWQgYnkgSlRTJ3MgY29tLnZpdmlkc29sdXRpb25zLmp0cy5nZW9tLkdlb21ldHJ5I2dldEludGVyaW9yUG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gZmxhdENlbnRlcnNPZmZzZXQgRmxhdCBjZW50ZXIgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRGVzdGluYXRpb24gcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gKiBsZW5ndGggb2YgdGhlIGhvcml6b250YWwgaW50ZXJzZWN0aW9uIHRoYXQgdGhlIHBvaW50IGJlbG9uZ3MgdG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcmlvclBvaW50T2ZBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBmbGF0Q2VudGVycywgZmxhdENlbnRlcnNPZmZzZXQsIG9wdF9kZXN0KSB7XG4gICAgdmFyIGksIGlpLCB4LCB4MSwgeDIsIHkxLCB5MjtcbiAgICB2YXIgeSA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0ICsgMV07XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBpbnRlcnNlY3Rpb25zID0gW107XG4gICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbnMgd2l0aCB0aGUgaG9yaXpvbnRhbCBsaW5lXG4gICAgZm9yICh2YXIgciA9IDAsIHJyID0gZW5kcy5sZW5ndGg7IHIgPCBycjsgKytyKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW3JdO1xuICAgICAgICB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgICAgICB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICAgICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoKHkgPD0geTEgJiYgeTIgPD0geSkgfHwgKHkxIDw9IHkgJiYgeSA8PSB5MikpIHtcbiAgICAgICAgICAgICAgICB4ID0gKCh5IC0geTEpIC8gKHkyIC0geTEpKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbnMucHVzaCh4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHgxID0geDI7XG4gICAgICAgICAgICB5MSA9IHkyO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEZpbmQgdGhlIGxvbmdlc3Qgc2VnbWVudCBvZiB0aGUgaG9yaXpvbnRhbCBsaW5lIHRoYXQgaGFzIGl0cyBjZW50ZXIgcG9pbnRcbiAgICAvLyBpbnNpZGUgdGhlIGxpbmVhciByaW5nLlxuICAgIHZhciBwb2ludFggPSBOYU47XG4gICAgdmFyIG1heFNlZ21lbnRMZW5ndGggPSAtSW5maW5pdHk7XG4gICAgaW50ZXJzZWN0aW9ucy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgIHgxID0gaW50ZXJzZWN0aW9uc1swXTtcbiAgICBmb3IgKGkgPSAxLCBpaSA9IGludGVyc2VjdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB4MiA9IGludGVyc2VjdGlvbnNbaV07XG4gICAgICAgIHZhciBzZWdtZW50TGVuZ3RoID0gTWF0aC5hYnMoeDIgLSB4MSk7XG4gICAgICAgIGlmIChzZWdtZW50TGVuZ3RoID4gbWF4U2VnbWVudExlbmd0aCkge1xuICAgICAgICAgICAgeCA9ICh4MSArIHgyKSAvIDI7XG4gICAgICAgICAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRYID0geDtcbiAgICAgICAgICAgICAgICBtYXhTZWdtZW50TGVuZ3RoID0gc2VnbWVudExlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgIH1cbiAgICBpZiAoaXNOYU4ocG9pbnRYKSkge1xuICAgICAgICAvLyBUaGVyZSBpcyBubyBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludCBpbnNpZGUgdGhlIGxpbmVhclxuICAgICAgICAvLyByaW5nLiAgVXNlIHRoZSBjZW50ZXIgb2YgdGhlIHRoZSBsaW5lYXIgcmluZydzIGV4dGVudC5cbiAgICAgICAgcG9pbnRYID0gZmxhdENlbnRlcnNbZmxhdENlbnRlcnNPZmZzZXRdO1xuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QpIHtcbiAgICAgICAgb3B0X2Rlc3QucHVzaChwb2ludFgsIHksIG1heFNlZ21lbnRMZW5ndGgpO1xuICAgICAgICByZXR1cm4gb3B0X2Rlc3Q7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW3BvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aF07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludHMgYXMgWFlNIGNvb3JkaW5hdGVzLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludHNPZk11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGZsYXRDZW50ZXJzKSB7XG4gICAgdmFyIGludGVyaW9yUG9pbnRzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpbnRlcmlvclBvaW50cyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGZsYXRDZW50ZXJzLCAyICogaSwgaW50ZXJpb3JQb2ludHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBpbnRlcmlvclBvaW50cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyaW9ycG9pbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9WaWV3XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGNyZWF0ZVByb2plY3Rpb24sIGZyb21Vc2VyQ29vcmRpbmF0ZSwgZnJvbVVzZXJFeHRlbnQsIGdldFVzZXJQcm9qZWN0aW9uLCB0b1VzZXJDb29yZGluYXRlLCB0b1VzZXJFeHRlbnQsIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkQ29vcmRpbmF0ZSwgZXF1YWxzIGFzIGNvb3JkaW5hdGVzRXF1YWwsIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgbm9uZSBhcyBjZW50ZXJOb25lLCBjcmVhdGVFeHRlbnQgfSBmcm9tICcuL2NlbnRlcmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9OLCBjcmVhdGVTbmFwVG9aZXJvLCBkaXNhYmxlLCBub25lIGFzIHJvdGF0aW9uTm9uZSwgfSBmcm9tICcuL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9Qb3dlciwgY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMsIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7IGdldENlbnRlciwgZ2V0Rm9yVmlld0FuZFNpemUsIGdldEhlaWdodCwgZ2V0V2lkdGgsIGlzRW1wdHksIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgaW5BbmRPdXQgfSBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudCB9IGZyb20gJy4vZ2VvbS9Qb2x5Z29uLmpzJztcbi8qKlxuICogQW4gYW5pbWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtzb3VyY2VDZW50ZXJdIFNvdXJjZSBjZW50ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbdGFyZ2V0Q2VudGVyXSBUYXJnZXQgY2VudGVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSZXNvbHV0aW9uXSBTb3VyY2UgcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0UmVzb2x1dGlvbl0gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJvdGF0aW9uXSBTb3VyY2Ugcm90YXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJvdGF0aW9uXSBUYXJnZXQgcm90YXRpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBBbmNob3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnQgU3RhcnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZHVyYXRpb24gRHVyYXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGNvbXBsZXRlIENvbXBsZXRlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gZWFzaW5nIEVhc2luZy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6dm9pZH0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ29uc3RyYWludHNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jZW50ZXJjb25zdHJhaW50LmpzXCIpLlR5cGV9IGNlbnRlciBDZW50ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaXRPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBib3ggdG8gZml0XG4gKiB0aGUgZXh0ZW50IGludG8uIERlZmF1bHQgaXMgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgZmlyc3QgbWFwIGluIHRoZSBET00gdGhhdFxuICogdXNlcyB0aGlzIHZpZXcsIG9yIGBbMTAwLCAxMDBdYCBpZiBubyBzdWNoIG1hcCBpcyBmb3VuZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gcGl4ZWxzKSB0byBiZVxuICogY2xlYXJlZCBpbnNpZGUgdGhlIHZpZXcuIFZhbHVlcyBpbiB0aGUgYXJyYXkgYXJlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxuICogcGFkZGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW25lYXJlc3Q9ZmFsc2VdIElmIHRoZSB2aWV3IGBjb25zdHJhaW5SZXNvbHV0aW9uYCBvcHRpb24gaXMgYHRydWVgLFxuICogZ2V0IHRoZSBuZWFyZXN0IGV4dGVudCBpbnN0ZWFkIG9mIHRoZSBjbG9zZXN0IHRoYXQgYWN0dWFsbHkgZml0cyB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbj0wXSBNaW5pbXVtIHJlc29sdXRpb24gdGhhdCB3ZSB6b29tIHRvLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgdGhhdCB3ZSB6b29tIHRvLiBJZlxuICogYG1pblJlc29sdXRpb25gIGlzIGdpdmVuLCB0aGlzIHByb3BlcnR5IGlzIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBCeSBkZWZhdWx0LCB0aGVyZSBpcyBubyBhbmltYXRpb24gdG8gdGhlIHRhcmdldCBleHRlbnQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBbZWFzaW5nXSBUaGUgZWFzaW5nIGZ1bmN0aW9uIHVzZWQgZHVyaW5nXG4gKiB0aGUgYW5pbWF0aW9uIChkZWZhdWx0cyB0byB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZy5pbkFuZE91dH0pLlxuICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIGZyYW1lIHdpdGggYSBudW1iZXIgcmVwcmVzZW50aW5nIGFcbiAqIGZyYWN0aW9uIG9mIHRoZSBhbmltYXRpb24ncyBkdXJhdGlvbi4gIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyXG4gKiBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0b3dhcmQgdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTp2b2lkfSBbY2FsbGJhY2tdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSB2aWV3IGlzIGluXG4gKiBpdHMgZmluYWwgcG9zaXRpb24uIFRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uXG4gKiBzZXJpZXMgY29tcGxldGVkIG9uIGl0cyBvd24gb3IgYGZhbHNlYCBpZiBpdCB3YXMgY2FuY2VsbGVkLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFZpZXdPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgaW5pdGlhbCBjZW50ZXIgZm9yXG4gKiB0aGUgdmlldy4gSWYgYSB1c2VyIHByb2plY3Rpb24gaXMgbm90IHNldCwgdGhlIGNvb3JkaW5hdGUgc3lzdGVtIGZvciB0aGUgY2VudGVyIGlzXG4gKiBzcGVjaWZpZWQgd2l0aCB0aGUgYHByb2plY3Rpb25gIG9wdGlvbi4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZSBmZXRjaGVkIGlmIHRoaXNcbiAqIGlzIG5vdCBzZXQsIGJ1dCB0aGUgY2VudGVyIGNhbiBiZSBzZXQgbGF0ZXIgd2l0aCB7QGxpbmsgI3NldENlbnRlcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW58bnVtYmVyfSBbY29uc3RyYWluUm90YXRpb249dHJ1ZV0gUm90YXRpb24gY29uc3RyYWludC5cbiAqIGBmYWxzZWAgbWVhbnMgbm8gY29uc3RyYWludC4gYHRydWVgIG1lYW5zIG5vIGNvbnN0cmFpbnQsIGJ1dCBzbmFwIHRvIHplcm9cbiAqIG5lYXIgemVyby4gQSBudW1iZXIgY29uc3RyYWlucyB0aGUgcm90YXRpb24gdG8gdGhhdCBudW1iZXIgb2YgdmFsdWVzLiBGb3JcbiAqIGV4YW1wbGUsIGA0YCB3aWxsIGNvbnN0cmFpbiB0aGUgcm90YXRpb24gdG8gMCwgOTAsIDE4MCwgYW5kIDI3MCBkZWdyZWVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZW5hYmxlUm90YXRpb249dHJ1ZV0gRW5hYmxlIHJvdGF0aW9uLlxuICogSWYgYGZhbHNlYCwgYSByb3RhdGlvbiBjb25zdHJhaW50IHRoYXQgYWx3YXlzIHNldHMgdGhlIHJvdGF0aW9uIHRvIHplcm8gaXNcbiAqIHVzZWQuIFRoZSBgY29uc3RyYWluUm90YXRpb25gIG9wdGlvbiBoYXMgbm8gZWZmZWN0IGlmIGBlbmFibGVSb3RhdGlvbmAgaXNcbiAqIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGV4dGVudCB0aGF0IGNvbnN0cmFpbnMgdGhlXG4gKiB2aWV3LCBpbiBvdGhlciB3b3Jkcywgbm90aGluZyBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50IGNhbiBiZSB2aXNpYmxlIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5Pbmx5Q2VudGVyPWZhbHNlXSBJZiB0cnVlLCB0aGUgZXh0ZW50XG4gKiBjb25zdHJhaW50IHdpbGwgb25seSBhcHBseSB0byB0aGUgdmlldyBjZW50ZXIgYW5kIG5vdCB0aGUgd2hvbGUgZXh0ZW50LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc21vb3RoRXh0ZW50Q29uc3RyYWludD10cnVlXSBJZiB0cnVlLCB0aGUgZXh0ZW50XG4gKiBjb25zdHJhaW50IHdpbGwgYmUgYXBwbGllZCBzbW9vdGhseSwgaS5lLiBhbGxvdyB0aGUgdmlldyB0byBnbyBzbGlnaHRseSBvdXRzaWRlXG4gKiBvZiB0aGUgZ2l2ZW4gYGV4dGVudGAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gdXNlZCB0byBkZXRlcm1pbmVcbiAqIHRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluUmVzb2x1dGlvbmAgKG9yXG4gKiBgbWF4Wm9vbWApIGFuZCBgem9vbUZhY3RvcmAuIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgaW4gc3VjaCBhIHdheVxuICogdGhhdCB0aGUgcHJvamVjdGlvbidzIHZhbGlkaXR5IGV4dGVudCBmaXRzIGluIGEgMjU2eDI1NiBweCB0aWxlLiBJZiB0aGVcbiAqIHByb2plY3Rpb24gaXMgU3BoZXJpY2FsIE1lcmNhdG9yICh0aGUgZGVmYXVsdCkgdGhlbiBgbWF4UmVzb2x1dGlvbmAgZGVmYXVsdHNcbiAqIHRvIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiA9IDE1NjU0My4wMzM5MjgwNDA5N2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gdXNlZCB0byBkZXRlcm1pbmVcbiAqIHRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnQuICBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1heFJlc29sdXRpb25gIChvclxuICogYG1pblpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiAgSWYgdW5zcGVjaWZpZWQgaXQgaXMgY2FsY3VsYXRlZCBhc3N1bWluZyAyOVxuICogem9vbSBsZXZlbHMgKHdpdGggYSBmYWN0b3Igb2YgMikuIElmIHRoZSBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvclxuICogKHRoZSBkZWZhdWx0KSB0aGVuIGBtaW5SZXNvbHV0aW9uYCBkZWZhdWx0cyB0b1xuICogYDQwMDc1MDE2LjY4NTU3ODQ5IC8gMjU2IC8gTWF0aC5wb3coMiwgMjgpID0gMC4wMDA1ODMxNjgyNDU1ODM5MjUzYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT0yOF0gVGhlIG1heGltdW0gem9vbSBsZXZlbCB1c2VkIHRvIGRldGVybWluZSB0aGVcbiAqIHJlc29sdXRpb24gY29uc3RyYWludC4gSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtaW5ab29tYCAob3JcbiAqIGBtYXhSZXNvbHV0aW9uYCkgYW5kIGB6b29tRmFjdG9yYC4gIE5vdGUgdGhhdCBpZiBgbWluUmVzb2x1dGlvbmAgaXMgYWxzb1xuICogcHJvdmlkZWQsIGl0IGlzIGdpdmVuIHByZWNlZGVuY2Ugb3ZlciBgbWF4Wm9vbWAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gVGhlIG1pbmltdW0gem9vbSBsZXZlbCB1c2VkIHRvIGRldGVybWluZSB0aGVcbiAqIHJlc29sdXRpb24gY29uc3RyYWludC4gSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhab29tYCAob3JcbiAqIGBtaW5SZXNvbHV0aW9uYCkgYW5kIGB6b29tRmFjdG9yYC4gIE5vdGUgdGhhdCBpZiBgbWF4UmVzb2x1dGlvbmAgaXMgYWxzb1xuICogcHJvdmlkZWQsIGl0IGlzIGdpdmVuIHByZWNlZGVuY2Ugb3ZlciBgbWluWm9vbWAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFttdWx0aVdvcmxkPWZhbHNlXSBJZiBgZmFsc2VgIHRoZSB2aWV3IGlzIGNvbnN0cmFpbmVkIHNvXG4gKiBvbmx5IG9uZSB3b3JsZCBpcyB2aXNpYmxlLCBhbmQgeW91IGNhbm5vdCBwYW4gb2ZmIHRoZSBlZGdlLiAgSWYgYHRydWVgIHRoZSBtYXBcbiAqIG1heSBzaG93IG11bHRpcGxlIHdvcmxkcyBhdCBsb3cgem9vbSBsZXZlbHMuICBPbmx5IHVzZWQgaWYgdGhlIGBwcm9qZWN0aW9uYCBpc1xuICogZ2xvYmFsLiAgTm90ZSB0aGF0IGlmIGBleHRlbnRgIGlzIGFsc28gcHJvdmlkZWQgaXQgaXMgZ2l2ZW4gcHJlY2VkZW5jZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYWx3YXlzXG4gKiBhbmltYXRlIHRvIHRoZSBjbG9zZXN0IHpvb20gbGV2ZWwgYWZ0ZXIgYW4gaW50ZXJhY3Rpb247IGZhbHNlIG1lYW5zXG4gKiBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgYXJlIGFsbG93ZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludD10cnVlXSBJZiB0cnVlLCB0aGUgcmVzb2x1dGlvblxuICogbWluL21heCB2YWx1ZXMgd2lsbCBiZSBhcHBsaWVkIHNtb290aGx5LCBpLiBlLiBhbGxvdyB0aGUgdmlldyB0byBleGNlZWQgc2xpZ2h0bHlcbiAqIHRoZSBnaXZlbiByZXNvbHV0aW9uIG9yIHpvb20gYm91bmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2hvd0Z1bGxFeHRlbnQ9ZmFsc2VdIEFsbG93IHRoZSB2aWV3IHRvIGJlIHpvb21lZCBvdXQgdG9cbiAqIHNob3cgdGhlIGZ1bGwgY29uZmlndXJlZCBleHRlbnQuIEJ5IGRlZmF1bHQsIHdoZW4gYSB2aWV3IGlzIGNvbmZpZ3VyZWQgd2l0aCBhblxuICogZXh0ZW50LCB1c2VycyB3aWxsIG5vdCBiZSBhYmxlIHRvIHpvb20gb3V0IHNvIHRoZSB2aWV3cG9ydCBleGNlZWRzIHRoZSBleHRlbnQgaW5cbiAqIGVpdGhlciBkaW1lbnNpb24uIFRoaXMgbWVhbnMgdGhlIGZ1bGwgZXh0ZW50IG1heSBub3QgYmUgdmlzaWJsZSBpZiB0aGUgdmlld3BvcnRcbiAqIGlzIHRhbGxlciBvciB3aWRlciB0aGFuIHRoZSBhc3BlY3QgcmF0aW8gb2YgdGhlIGNvbmZpZ3VyZWQgZXh0ZW50LiBJZlxuICogc2hvd0Z1bGxFeHRlbnQgaXMgdHJ1ZSwgdGhlIHVzZXIgd2lsbCBiZSBhYmxlIHRvIHpvb20gb3V0IHNvIHRoYXQgdGhlIHZpZXdwb3J0XG4gKiBleGNlZWRzIHRoZSBoZWlnaHQgb3Igd2lkdGggb2YgdGhlIGNvbmZpZ3VyZWQgZXh0ZW50LCBidXQgbm90IGJvdGgsIGFsbG93aW5nIHRoZVxuICogZnVsbCBleHRlbnQgdG8gYmUgc2hvd24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIFRoZVxuICogcHJvamVjdGlvbi4gVGhlIGRlZmF1bHQgaXMgU3BoZXJpY2FsIE1lcmNhdG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBUaGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy4gVGhlXG4gKiB1bml0cyBhcmUgYHByb2plY3Rpb25gIHVuaXRzIHBlciBwaXhlbCAoZS5nLiBtZXRlcnMgcGVyIHBpeGVsKS4gQW5cbiAqIGFsdGVybmF0aXZlIHRvIHNldHRpbmcgdGhpcyBpcyB0byBzZXQgYHpvb21gLiBMYXllciBzb3VyY2VzIHdpbGwgbm90IGJlXG4gKiBmZXRjaGVkIGlmIG5laXRoZXIgdGhpcyBub3IgYHpvb21gIGFyZSBkZWZpbmVkLCBidXQgdGhleSBjYW4gYmUgc2V0IGxhdGVyXG4gKiB3aXRoIHtAbGluayAjc2V0Wm9vbX0gb3Ige0BsaW5rICNzZXRSZXNvbHV0aW9ufS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW3Jlc29sdXRpb25zXSBSZXNvbHV0aW9ucyB0aGF0IGRldGVybWluZSB0aGVcbiAqIHpvb20gbGV2ZWxzIGlmIHNwZWNpZmllZC4gVGhlIGluZGV4IGluIHRoZSBhcnJheSBjb3JyZXNwb25kcyB0byB0aGUgem9vbSBsZXZlbCxcbiAqIHRoZXJlZm9yZSB0aGUgcmVzb2x1dGlvbiB2YWx1ZXMgaGF2ZSB0byBiZSBpbiBkZXNjZW5kaW5nIG9yZGVyLiBJdCBhbHNvIGNvbnN0cmFpbnNcbiAqIHRoZSByZXNvbHV0aW9uIGJ5IHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIHZhbHVlLiBJZiBzZXQgdGhlIGBtYXhSZXNvbHV0aW9uYCxcbiAqIGBtaW5SZXNvbHV0aW9uYCwgYG1pblpvb21gLCBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gVGhlIGluaXRpYWwgcm90YXRpb24gZm9yIHRoZSB2aWV3IGluIHJhZGlhbnNcbiAqIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UsIDAgbWVhbnMgTm9ydGgpLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBPbmx5IHVzZWQgaWYgYHJlc29sdXRpb25gIGlzIG5vdCBkZWZpbmVkLiBab29tXG4gKiBsZXZlbCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbUZhY3Rvcj0yXSBUaGUgem9vbSBmYWN0b3IgdXNlZCB0byBjb21wdXRlIHRoZVxuICogY29ycmVzcG9uZGluZyByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gW3BhZGRpbmc9WzAsIDAsIDAsIDBdXSBQYWRkaW5nIChpbiBjc3MgcGl4ZWxzKS5cbiAqIElmIHRoZSBtYXAgdmlld3BvcnQgaXMgcGFydGlhbGx5IGNvdmVyZWQgd2l0aCBvdGhlciBjb250ZW50IChvdmVybGF5cykgYWxvbmdcbiAqIGl0cyBlZGdlcywgdGhpcyBzZXR0aW5nIGFsbG93cyB0byBzaGlmdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydCBhd2F5IGZyb21cbiAqIHRoYXQgY29udGVudC4gVGhlIG9yZGVyIG9mIHRoZSB2YWx1ZXMgaXMgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gVGhlIHpvb20gbGV2ZWwgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZiB0aGVcbiAqIGFuaW1hdGlvbi4gVGhpcyB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYHJlc29sdXRpb25gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kXG4gKiBvZiB0aGUgYW5pbWF0aW9uLiAgSWYgYHpvb21gIGlzIGFsc28gcHJvdmlkZWQsIHRoaXMgb3B0aW9uIHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb25dIFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kIG9mXG4gKiB0aGUgYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gT3B0aW9uYWwgYW5jaG9yIHRvIHJlbWFpbiBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbbmV4dENlbnRlcl0gVGhlIG5leHQgY2VudGVyIGR1cmluZyBhbiBhbmltYXRpb24gc2VyaWVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtuZXh0UmVzb2x1dGlvbl0gVGhlIG5leHQgcmVzb2x1dGlvbiBkdXJpbmcgYW4gYW5pbWF0aW9uIHNlcmllcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbmV4dFJvdGF0aW9uXSBUaGUgbmV4dCByb3RhdGlvbiBkdXJpbmcgYW4gYW5pbWF0aW9uIHNlcmllcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6b29tIFpvb20uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtaW4gem9vbSBsZXZlbCBmb3IgdGhlIG1hcCB2aWV3LlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIERFRkFVTFRfTUlOX1pPT00gPSAwO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpjZW50ZXInfCdjaGFuZ2U6cmVzb2x1dGlvbid8J2NoYW5nZTpyb3RhdGlvbid9IFZpZXdPYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8Vmlld09iamVjdEV2ZW50VHlwZXMsIGltcG9ydChcIi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8Vmlld09iamVjdEV2ZW50VHlwZXMsIFJldHVybj59IFZpZXdPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgVmlldyBvYmplY3QgcmVwcmVzZW50cyBhIHNpbXBsZSAyRCB2aWV3IG9mIHRoZSBtYXAuXG4gKlxuICogVGhpcyBpcyB0aGUgb2JqZWN0IHRvIGFjdCB1cG9uIHRvIGNoYW5nZSB0aGUgY2VudGVyLCByZXNvbHV0aW9uLFxuICogYW5kIHJvdGF0aW9uIG9mIHRoZSBtYXAuXG4gKlxuICogQSBWaWV3IGhhcyBhIGBwcm9qZWN0aW9uYC4gVGhlIHByb2plY3Rpb24gZGV0ZXJtaW5lcyB0aGVcbiAqIGNvb3JkaW5hdGUgc3lzdGVtIG9mIHRoZSBjZW50ZXIsIGFuZCBpdHMgdW5pdHMgZGV0ZXJtaW5lIHRoZSB1bml0cyBvZiB0aGVcbiAqIHJlc29sdXRpb24gKHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsKS4gVGhlIGRlZmF1bHQgcHJvamVjdGlvbiBpc1xuICogU3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICpcbiAqICMjIyBUaGUgdmlldyBzdGF0ZXNcbiAqXG4gKiBBIFZpZXcgaXMgZGV0ZXJtaW5lZCBieSB0aHJlZSBzdGF0ZXM6IGBjZW50ZXJgLCBgcmVzb2x1dGlvbmAsXG4gKiBhbmQgYHJvdGF0aW9uYC4gRWFjaCBzdGF0ZSBoYXMgYSBjb3JyZXNwb25kaW5nIGdldHRlciBhbmQgc2V0dGVyLCBlLmcuXG4gKiBgZ2V0Q2VudGVyYCBhbmQgYHNldENlbnRlcmAgZm9yIHRoZSBgY2VudGVyYCBzdGF0ZS5cbiAqXG4gKiBUaGUgYHpvb21gIHN0YXRlIGlzIGFjdHVhbGx5IG5vdCBzYXZlZCBvbiB0aGUgdmlldzogYWxsIGNvbXB1dGF0aW9uc1xuICogaW50ZXJuYWxseSB1c2UgdGhlIGByZXNvbHV0aW9uYCBzdGF0ZS4gU3RpbGwsIHRoZSBgc2V0Wm9vbWAgYW5kIGBnZXRab29tYFxuICogbWV0aG9kcyBhcmUgYXZhaWxhYmxlLCBhcyB3ZWxsIGFzIGBnZXRSZXNvbHV0aW9uRm9yWm9vbWAgYW5kXG4gKiBgZ2V0Wm9vbUZvclJlc29sdXRpb25gIHRvIHN3aXRjaCBmcm9tIG9uZSBzeXN0ZW0gdG8gdGhlIG90aGVyLlxuICpcbiAqICMjIyBUaGUgY29uc3RyYWludHNcbiAqXG4gKiBgc2V0Q2VudGVyYCwgYHNldFJlc29sdXRpb25gIGFuZCBgc2V0Um90YXRpb25gIGNhbiBiZSB1c2VkIHRvIGNoYW5nZSB0aGVcbiAqIHN0YXRlcyBvZiB0aGUgdmlldywgYnV0IGFueSBjb25zdHJhaW50IGRlZmluZWQgaW4gdGhlIGNvbnN0cnVjdG9yIHdpbGxcbiAqIGJlIGFwcGxpZWQgYWxvbmcgdGhlIHdheS5cbiAqXG4gKiBBIFZpZXcgb2JqZWN0IGNhbiBoYXZlIGEgKnJlc29sdXRpb24gY29uc3RyYWludCosIGEgKnJvdGF0aW9uIGNvbnN0cmFpbnQqXG4gKiBhbmQgYSAqY2VudGVyIGNvbnN0cmFpbnQqLlxuICpcbiAqIFRoZSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiB0eXBpY2FsbHkgcmVzdHJpY3RzIG1pbi9tYXggdmFsdWVzIGFuZFxuICogc25hcHMgdG8gc3BlY2lmaWMgcmVzb2x1dGlvbnMuIEl0IGlzIGRldGVybWluZWQgYnkgdGhlIGZvbGxvd2luZ1xuICogb3B0aW9uczogYHJlc29sdXRpb25zYCwgYG1heFJlc29sdXRpb25gLCBgbWF4Wm9vbWAgYW5kIGB6b29tRmFjdG9yYC5cbiAqIElmIGByZXNvbHV0aW9uc2AgaXMgc2V0LCB0aGUgb3RoZXIgdGhyZWUgb3B0aW9ucyBhcmUgaWdub3JlZC4gU2VlXG4gKiBkb2N1bWVudGF0aW9uIGZvciBlYWNoIG9wdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4gQnkgZGVmYXVsdCwgdGhlIHZpZXdcbiAqIG9ubHkgaGFzIGEgbWluL21heCByZXN0cmljdGlvbiBhbmQgYWxsb3cgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIHdoZW5cbiAqIHBpbmNoLXpvb21pbmcgZm9yIGV4YW1wbGUuXG4gKlxuICogVGhlICpyb3RhdGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyBhbmdsZXMuIEl0IGlzIGRldGVybWluZWRcbiAqIGJ5IHRoZSBmb2xsb3dpbmcgb3B0aW9uczogYGVuYWJsZVJvdGF0aW9uYCBhbmQgYGNvbnN0cmFpblJvdGF0aW9uYC5cbiAqIEJ5IGRlZmF1bHQgcm90YXRpb24gaXMgYWxsb3dlZCBhbmQgaXRzIHZhbHVlIGlzIHNuYXBwZWQgdG8gemVybyB3aGVuIGFwcHJvYWNoaW5nIHRoZVxuICogaG9yaXpvbnRhbC5cbiAqXG4gKiBUaGUgKmNlbnRlciBjb25zdHJhaW50KiBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBgZXh0ZW50YCBvcHRpb24uIEJ5XG4gKiBkZWZhdWx0IHRoZSB2aWV3IGNlbnRlciBpcyBub3QgY29uc3RyYWluZWQgYXQgYWxsLlxuICpcbiAqICMjIyBDaGFuZ2luZyB0aGUgdmlldyBzdGF0ZVxuICpcbiAqIEl0IGlzIGltcG9ydGFudCB0byBub3RlIHRoYXQgYHNldFpvb21gLCBgc2V0UmVzb2x1dGlvbmAsIGBzZXRDZW50ZXJgIGFuZFxuICogYHNldFJvdGF0aW9uYCBhcmUgc3ViamVjdCB0byB0aGUgYWJvdmUgbWVudGlvbmVkIGNvbnN0cmFpbnRzLiBBcyBzdWNoLCBpdFxuICogbWF5IHNvbWV0aW1lcyBub3QgYmUgcG9zc2libGUgdG8ga25vdyBpbiBhZHZhbmNlIHRoZSByZXN1bHRpbmcgc3RhdGUgb2YgdGhlXG4gKiBWaWV3LiBGb3IgZXhhbXBsZSwgY2FsbGluZyBgc2V0UmVzb2x1dGlvbigxMClgIGRvZXMgbm90IGd1YXJhbnRlZSB0aGF0XG4gKiBgZ2V0UmVzb2x1dGlvbigpYCB3aWxsIHJldHVybiBgMTBgLlxuICpcbiAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0LCB3aGVuIGFwcGx5aW5nIGEgZGVsdGEgb24gdGhlIHZpZXcgc3RhdGUsIG9uZVxuICogc2hvdWxkIHVzZSBgYWRqdXN0Q2VudGVyYCwgYGFkanVzdFJvdGF0aW9uYCwgYGFkanVzdFpvb21gIGFuZCBgYWRqdXN0UmVzb2x1dGlvbmBcbiAqIHJhdGhlciB0aGFuIHRoZSBjb3JyZXNwb25kaW5nIHNldHRlcnMuIFRoaXMgd2lsbCBsZXQgdmlldyBkbyBpdHMgaW50ZXJuYWxcbiAqIGNvbXB1dGF0aW9ucy4gQmVzaWRlcywgdGhlIGBhZGp1c3QqYCBtZXRob2RzIGFsc28gdGFrZSBhbiBgb3B0X2FuY2hvcmBcbiAqIGFyZ3VtZW50IHdoaWNoIGFsbG93cyBzcGVjaWZ5aW5nIGFuIG9yaWdpbiBmb3IgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqICMjIyBJbnRlcmFjdGluZyB3aXRoIHRoZSB2aWV3XG4gKlxuICogVmlldyBjb25zdHJhaW50cyBhcmUgdXN1YWxseSBvbmx5IGFwcGxpZWQgd2hlbiB0aGUgdmlldyBpcyAqYXQgcmVzdCosIG1lYW5pbmcgdGhhdFxuICogbm8gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIG9uZ29pbmcuIEFzIHN1Y2gsIGlmIHRoZSB1c2VyIHB1dHMgdGhlIHZpZXcgaW4gYVxuICogc3RhdGUgdGhhdCBpcyBub3QgZXF1aXZhbGVudCB0byBhIGNvbnN0cmFpbmVkIG9uZSAoZS5nLiByb3RhdGluZyB0aGUgdmlldyB3aGVuXG4gKiB0aGUgc25hcCBhbmdsZSBpcyAwKSwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGF0IHRoZSBpbnRlcmFjdGlvbiBlbmQgdG9cbiAqIHB1dCBiYWNrIHRoZSB2aWV3IHRvIGEgc3RhYmxlIHN0YXRlO1xuICpcbiAqIEBhcGlcbiAqL1xudmFyIFZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZpZXcsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gW29wdF9vcHRpb25zXSBWaWV3IG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmlldyhvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1ZpZXdPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0X29wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oaW50c18gPSBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8QXJyYXk8QW5pbWF0aW9uPj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpb25zXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51cGRhdGVBbmltYXRpb25LZXlfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucHJvamVjdGlvbl8gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld3BvcnRTaXplXyA9IFsxMDAsIDEwMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0Q2VudGVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFJlc29sdXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRSb3RhdGlvbl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5uZXh0Q2VudGVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmV4dFJlc29sdXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5leHRSb3RhdGlvbl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FuY2VsQW5jaG9yXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNlbnRlciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRpb25zLmNlbnRlciwgX3RoaXMucHJvamVjdGlvbl8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmV4dGVudCkge1xuICAgICAgICAgICAgb3B0aW9ucy5leHRlbnQgPSBmcm9tVXNlckV4dGVudChvcHRpb25zLmV4dGVudCwgX3RoaXMucHJvamVjdGlvbl8pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmFwcGx5T3B0aW9uc18ob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHVwIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlPcHRpb25zXyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBwcm9wZXJ0aWVzID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIFZpZXdQcm9wZXJ0eSkge1xuICAgICAgICAgICAgZGVsZXRlIHByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcywgdHJ1ZSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludEluZm8gPSBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1heFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5SZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuem9vbUZhY3Rvcl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uem9vbUZhY3RvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbnNfID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFkZGluZ18gPSBvcHRpb25zLnBhZGRpbmc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5ab29tXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5ab29tO1xuICAgICAgICB2YXIgY2VudGVyQ29uc3RyYWludCA9IGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludCA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5jb25zdHJhaW50O1xuICAgICAgICB2YXIgcm90YXRpb25Db25zdHJhaW50ID0gY3JlYXRlUm90YXRpb25Db25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0NvbnN0cmFpbnRzfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb25zdHJhaW50c18gPSB7XG4gICAgICAgICAgICBjZW50ZXI6IGNlbnRlckNvbnN0cmFpbnQsXG4gICAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uQ29uc3RyYWludCxcbiAgICAgICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbkNvbnN0cmFpbnQsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2V0Um90YXRpb24ob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGlvbiA6IDApO1xuICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKG9wdGlvbnMuY2VudGVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNlbnRlciA6IG51bGwpO1xuICAgICAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihvcHRpb25zLnJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFpvb20ob3B0aW9ucy56b29tKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZpZXcucHJvdG90eXBlLCBcInBhZGRpbmdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUGFkZGluZyAoaW4gY3NzIHBpeGVscykuXG4gICAgICAgICAqIElmIHRoZSBtYXAgdmlld3BvcnQgaXMgcGFydGlhbGx5IGNvdmVyZWQgd2l0aCBvdGhlciBjb250ZW50IChvdmVybGF5cykgYWxvbmdcbiAgICAgICAgICogaXRzIGVkZ2VzLCB0aGlzIHNldHRpbmcgYWxsb3dzIHRvIHNoaWZ0IHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0IGF3YXkgZnJvbSB0aGF0XG4gICAgICAgICAqIGNvbnRlbnQuIFRoZSBvcmRlciBvZiB0aGUgdmFsdWVzIGluIHRoZSBhcnJheSBpcyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQuXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IGlzIG5vIHBhZGRpbmcsIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gYFswLCAwLCAwLCAwXWAuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocGFkZGluZykge1xuICAgICAgICAgICAgdmFyIG9sZFBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICAgICAgdGhpcy5wYWRkaW5nXyA9IHBhZGRpbmc7XG4gICAgICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgIGlmIChjZW50ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3UGFkZGluZyA9IHBhZGRpbmcgfHwgWzAsIDAsIDAsIDBdO1xuICAgICAgICAgICAgICAgIG9sZFBhZGRpbmcgPSBvbGRQYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRYID0gKHJlc29sdXRpb24gLyAyKSAqXG4gICAgICAgICAgICAgICAgICAgIChuZXdQYWRkaW5nWzNdIC0gb2xkUGFkZGluZ1szXSArIG9sZFBhZGRpbmdbMV0gLSBuZXdQYWRkaW5nWzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WSA9IChyZXNvbHV0aW9uIC8gMikgKlxuICAgICAgICAgICAgICAgICAgICAobmV3UGFkZGluZ1swXSAtIG9sZFBhZGRpbmdbMF0gKyBvbGRQYWRkaW5nWzJdIC0gbmV3UGFkZGluZ1syXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChbY2VudGVyWzBdICsgb2Zmc2V0WCwgY2VudGVyWzFdIC0gb2Zmc2V0WV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogR2V0IGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgdmlldyBvcHRpb25zIHVzZWQgdG8gY29uc3RydWN0IHRoZSB2aWV3LiAgVGhlXG4gICAgICogY3VycmVudCByZXNvbHV0aW9uIChvciB6b29tKSwgY2VudGVyLCBhbmQgcm90YXRpb24gYXJlIGFwcGxpZWQgdG8gYW55IHN0b3JlZFxuICAgICAqIG9wdGlvbnMuICBUaGUgcHJvdmlkZWQgb3B0aW9ucyBjYW4gYmUgdXNlZCB0byBhcHBseSBuZXcgbWluL21heCB6b29tIG9yXG4gICAgICogcmVzb2x1dGlvbiBsaW1pdHMuXG4gICAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gbmV3T3B0aW9ucyBOZXcgb3B0aW9ucyB0byBiZSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm4ge1ZpZXdPcHRpb25zfSBOZXcgb3B0aW9ucyB1cGRhdGVkIHdpdGggdGhlIGN1cnJlbnQgdmlldyBzdGF0ZS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRVcGRhdGVkT3B0aW9uc18gPSBmdW5jdGlvbiAobmV3T3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuZ2V0UHJvcGVydGllcygpO1xuICAgICAgICAvLyBwcmVzZXJ2ZSByZXNvbHV0aW9uIChvciB6b29tKVxuICAgICAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy56b29tID0gdGhpcy5nZXRab29tKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJlc2VydmUgY2VudGVyXG4gICAgICAgIG9wdGlvbnMuY2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICAvLyBwcmVzZXJ2ZSByb3RhdGlvblxuICAgICAgICBvcHRpb25zLnJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICByZXR1cm4gYXNzaWduKHt9LCBvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFuaW1hdGUgdGhlIHZpZXcuICBUaGUgdmlldydzIGNlbnRlciwgem9vbSAob3IgcmVzb2x1dGlvbiksIGFuZCByb3RhdGlvblxuICAgICAqIGNhbiBiZSBhbmltYXRlZCBmb3Igc21vb3RoIHRyYW5zaXRpb25zIGJldHdlZW4gdmlldyBzdGF0ZXMuICBGb3IgZXhhbXBsZSxcbiAgICAgKiB0byBhbmltYXRlIHRoZSB2aWV3IHRvIGEgbmV3IHpvb20gbGV2ZWw6XG4gICAgICpcbiAgICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiB2aWV3LmdldFpvb20oKSArIDF9KTtcbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIHRoZSBhbmltYXRpb24gbGFzdHMgb25lIHNlY29uZCBhbmQgdXNlcyBpbi1hbmQtb3V0IGVhc2luZy4gIFlvdVxuICAgICAqIGNhbiBjdXN0b21pemUgdGhpcyBiZWhhdmlvciBieSBpbmNsdWRpbmcgYGR1cmF0aW9uYCAoaW4gbWlsbGlzZWNvbmRzKSBhbmRcbiAgICAgKiBgZWFzaW5nYCBvcHRpb25zIChzZWUge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd9KS5cbiAgICAgKlxuICAgICAqIFRvIGNoYWluIHRvZ2V0aGVyIG11bHRpcGxlIGFuaW1hdGlvbnMsIGNhbGwgdGhlIG1ldGhvZCB3aXRoIG11bHRpcGxlXG4gICAgICogYW5pbWF0aW9uIG9iamVjdHMuICBGb3IgZXhhbXBsZSwgdG8gZmlyc3Qgem9vbSBhbmQgdGhlbiBwYW46XG4gICAgICpcbiAgICAgKiAgICAgdmlldy5hbmltYXRlKHt6b29tOiAxMH0sIHtjZW50ZXI6IFswLCAwXX0pO1xuICAgICAqXG4gICAgICogSWYgeW91IHByb3ZpZGUgYSBmdW5jdGlvbiBhcyB0aGUgbGFzdCBhcmd1bWVudCB0byB0aGUgYW5pbWF0ZSBtZXRob2QsIGl0XG4gICAgICogd2lsbCBnZXQgY2FsbGVkIGF0IHRoZSBlbmQgb2YgYW4gYW5pbWF0aW9uIHNlcmllcy4gIFRoZSBjYWxsYmFjayB3aWxsIGJlXG4gICAgICogY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb24gc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWBcbiAgICAgKiBpZiBpdCB3YXMgY2FuY2VsbGVkLlxuICAgICAqXG4gICAgICogQW5pbWF0aW9ucyBhcmUgY2FuY2VsbGVkIGJ5IHVzZXIgaW50ZXJhY3Rpb25zIChlLmcuIGRyYWdnaW5nIHRoZSBtYXApIG9yIGJ5XG4gICAgICogY2FsbGluZyBgdmlldy5zZXRDZW50ZXIoKWAsIGB2aWV3LnNldFJlc29sdXRpb24oKWAsIG9yIGB2aWV3LnNldFJvdGF0aW9uKClgXG4gICAgICogKG9yIGFub3RoZXIgbWV0aG9kIHRoYXQgY2FsbHMgb25lIG9mIHRoZXNlKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Li4uKEFuaW1hdGlvbk9wdGlvbnN8ZnVuY3Rpb24oYm9vbGVhbik6IHZvaWQpfSB2YXJfYXJncyBBbmltYXRpb25cbiAgICAgKiAgICAgb3B0aW9ucy4gIE11bHRpcGxlIGFuaW1hdGlvbnMgY2FuIGJlIHJ1biBpbiBzZXJpZXMgYnkgcGFzc2luZyBtdWx0aXBsZVxuICAgICAqICAgICBvcHRpb25zIG9iamVjdHMuICBUbyBydW4gbXVsdGlwbGUgYW5pbWF0aW9ucyBpbiBwYXJhbGxlbCwgY2FsbCB0aGUgbWV0aG9kXG4gICAgICogICAgIG11bHRpcGxlIHRpbWVzLiAgQW4gb3B0aW9uYWwgY2FsbGJhY2sgY2FuIGJlIHByb3ZpZGVkIGFzIGEgZmluYWxcbiAgICAgKiAgICAgYXJndW1lbnQuICBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyXG4gICAgICogICAgIHRoZSBhbmltYXRpb24gY29tcGxldGVkIHdpdGhvdXQgYmVpbmcgY2FuY2VsbGVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKHZhcl9hcmdzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRGVmKCkgJiYgIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFuY2hvcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYW5jaG9yID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdGlvbnMuYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhcmdzW2ldID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Li4uKEFuaW1hdGlvbk9wdGlvbnN8ZnVuY3Rpb24oYm9vbGVhbik6IHZvaWQpfSB2YXJfYXJncyBBbmltYXRpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hbmltYXRlSW50ZXJuYWwgPSBmdW5jdGlvbiAodmFyX2FyZ3MpIHtcbiAgICAgICAgdmFyIGFuaW1hdGlvbkNvdW50ID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNhbGxiYWNrO1xuICAgICAgICBpZiAoYW5pbWF0aW9uQ291bnQgPiAxICYmXG4gICAgICAgICAgICB0eXBlb2YgYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XG4gICAgICAgICAgICAtLWFuaW1hdGlvbkNvdW50O1xuICAgICAgICB9XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICg7IGkgPCBhbmltYXRpb25Db3VudCAmJiAhdGhpcy5pc0RlZigpOyArK2kpIHtcbiAgICAgICAgICAgIC8vIGlmIHZpZXcgcHJvcGVydGllcyBhcmUgbm90IHlldCBzZXQsIHNob3J0Y3V0IHRvIHRoZSBmaW5hbCBzdGF0ZVxuICAgICAgICAgICAgdmFyIHN0YXRlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHN0YXRlLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoc3RhdGUuY2VudGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFpvb20oc3RhdGUuem9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzdGF0ZS5yZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSZXNvbHV0aW9uKHN0YXRlLnJlc29sdXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJvdGF0aW9uKHN0YXRlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA9PT0gYW5pbWF0aW9uQ291bnQpIHtcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfLnNsaWNlKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy50YXJnZXRSb3RhdGlvbl87XG4gICAgICAgIHZhciBzZXJpZXMgPSBbXTtcbiAgICAgICAgZm9yICg7IGkgPCBhbmltYXRpb25Db3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IC8qKiBAdHlwZSB7QW5pbWF0aW9uT3B0aW9uc30gKi8gKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBvcHRpb25zLmFuY2hvcixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZUNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0Q2VudGVyID0gb3B0aW9ucy5jZW50ZXIuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBjZW50ZXIgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShvcHRpb25zLnpvb20pO1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IG9wdGlvbnMucmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uID0gcm90YXRpb247XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gbW9kdWxvKG9wdGlvbnMucm90YXRpb24gLSByb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uID0gcm90YXRpb24gKyBkZWx0YTtcbiAgICAgICAgICAgICAgICByb3RhdGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFuaW1hdGlvbiBpcyBhIG5vLW9wXG4gICAgICAgICAgICBpZiAoaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uY29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIHdlIHN0aWxsIHB1c2ggaXQgb250byB0aGUgc2VyaWVzIGZvciBjYWxsYmFjayBoYW5kbGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgKz0gYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VyaWVzLnB1c2goYW5pbWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uc18oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0QW5pbWF0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaW50c19bVmlld0hpbnQuQU5JTUFUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlldywgc3VjaCBhcyBwYW5uaW5nIG9yIHpvb21pbmcuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgaW50ZXJhY3RlZCB3aXRoLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRJbnRlcmFjdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LklOVEVSQUNUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYW5jZWwgYW55IG9uZ29pbmcgYW5pbWF0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FuY2VsQW5pbWF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLXRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10pO1xuICAgICAgICB2YXIgYW5jaG9yO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgICAgICAgaWYgKHNlcmllc1swXS5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKHNlcmllc1swXS5jYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gYW5pbWF0aW9uLmFuY2hvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gYW5jaG9yO1xuICAgICAgICB0aGlzLm5leHRDZW50ZXJfID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXh0UmVzb2x1dGlvbl8gPSBOYU47XG4gICAgICAgIHRoaXMubmV4dFJvdGF0aW9uXyA9IE5hTjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbGwgYW5pbWF0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS51cGRhdGVBbmltYXRpb25zXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgbW9yZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5hbmltYXRpb25zXy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICAgICAgICB2YXIgc2VyaWVzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gc2VyaWVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gYW5pbWF0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgICAgIHZhciBmcmFjdGlvbiA9IGFuaW1hdGlvbi5kdXJhdGlvbiA+IDAgPyBlbGFwc2VkIC8gYW5pbWF0aW9uLmR1cmF0aW9uIDogMTtcbiAgICAgICAgICAgICAgICBpZiAoZnJhY3Rpb24gPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uY29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmcmFjdGlvbiA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXNDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBhbmltYXRpb24uZWFzaW5nKGZyYWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzFdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRDZW50ZXJfID0gYW5pbWF0aW9uLnRhcmdldENlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSB4MCArIHByb2dyZXNzICogKHgxIC0geDApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHkwICsgcHJvZ3Jlc3MgKiAoeTEgLSB5MCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IFt4LCB5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICYmIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIDogYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25zdHJhaW5lZFJlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHJlc29sdXRpb24sIDAsIHNpemUsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJab29tKGNvbnN0cmFpbmVkUmVzb2x1dGlvbiwgYW5pbWF0aW9uLmFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0UmVzb2x1dGlvbl8gPSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8odHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0Um90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSBwcm9ncmVzcyA9PT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBtb2R1bG8oYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICsgTWF0aC5QSSwgMiAqIE1hdGguUEkpIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLlBJXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25zdHJhaW5lZFJvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24ocm90YXRpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUoY29uc3RyYWluZWRSb3RhdGlvbiwgYW5pbWF0aW9uLmFuY2hvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Um90YXRpb25fID0gYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICAgICAgICAgIG1vcmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXJpZXNDb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc19baV0gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIC0xKTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRDZW50ZXJfID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRSZXNvbHV0aW9uXyA9IE5hTjtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRSb3RhdGlvbl8gPSBOYU47XG4gICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gc2VyaWVzWzBdLmNhbGxiYWNrO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHBydW5lIGNvbXBsZXRlZCBzZXJpZXNcbiAgICAgICAgdGhpcy5hbmltYXRpb25zXyA9IHRoaXMuYW5pbWF0aW9uc18uZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgICBpZiAobW9yZSAmJiB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uc18uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBUYXJnZXQgcm90YXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFJvdGF0aW9uIGFuY2hvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3Igcm90YXRpb24gYW5kIGFuY2hvci5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVDZW50ZXJSb3RhdGUgPSBmdW5jdGlvbiAocm90YXRpb24sIGFuY2hvcikge1xuICAgICAgICB2YXIgY2VudGVyO1xuICAgICAgICB2YXIgY3VycmVudENlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgaWYgKGN1cnJlbnRDZW50ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2VudGVyID0gW2N1cnJlbnRDZW50ZXJbMF0gLSBhbmNob3JbMF0sIGN1cnJlbnRDZW50ZXJbMV0gLSBhbmNob3JbMV1dO1xuICAgICAgICAgICAgcm90YXRlQ29vcmRpbmF0ZShjZW50ZXIsIHJvdGF0aW9uIC0gdGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgICAgIGFkZENvb3JkaW5hdGUoY2VudGVyLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgWm9vbSBhbmNob3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJlc29sdXRpb24gYW5kIGFuY2hvci5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVDZW50ZXJab29tID0gZnVuY3Rpb24gKHJlc29sdXRpb24sIGFuY2hvcikge1xuICAgICAgICB2YXIgY2VudGVyO1xuICAgICAgICB2YXIgY3VycmVudENlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQgJiYgY3VycmVudFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIHggPSBhbmNob3JbMF0gLVxuICAgICAgICAgICAgICAgIChyZXNvbHV0aW9uICogKGFuY2hvclswXSAtIGN1cnJlbnRDZW50ZXJbMF0pKSAvIGN1cnJlbnRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHkgPSBhbmNob3JbMV0gLVxuICAgICAgICAgICAgICAgIChyZXNvbHV0aW9uICogKGFuY2hvclsxXSAtIGN1cnJlbnRDZW50ZXJbMV0pKSAvIGN1cnJlbnRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgY2VudGVyID0gW3gsIHldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHZpZXdwb3J0IHNpemUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yb3RhdGlvbl0gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIG9yIGBbMTAwLCAxMDBdYCB3aGVuIG5vIHZpZXdwb3J0IGlzIGZvdW5kLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFZpZXdwb3J0U2l6ZV8gPSBmdW5jdGlvbiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy52aWV3cG9ydFNpemVfO1xuICAgICAgICBpZiAob3B0X3JvdGF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdyA9IHNpemVbMF07XG4gICAgICAgICAgICB2YXIgaCA9IHNpemVbMV07XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIE1hdGguYWJzKHcgKiBNYXRoLmNvcyhvcHRfcm90YXRpb24pKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGggKiBNYXRoLnNpbihvcHRfcm90YXRpb24pKSxcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5zaW4ob3B0X3JvdGF0aW9uKSkgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhoICogTWF0aC5jb3Mob3B0X3JvdGF0aW9uKSksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNpemU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFN0b3JlcyB0aGUgdmlld3BvcnQgc2l6ZSBvbiB0aGUgdmlldy4gVGhlIHZpZXdwb3J0IHNpemUgaXMgbm90IHJlYWQgZXZlcnkgdGltZSBmcm9tIHRoZSBET01cbiAgICAgKiB0byBhdm9pZCBwZXJmb3JtYW5jZSBoaXQgYW5kIGxheW91dCByZWZsb3cuXG4gICAgICogVGhpcyBzaG91bGQgYmUgZG9uZSBvbiBtYXAgc2l6ZSBjaGFuZ2UuXG4gICAgICogTm90ZTogdGhlIGNvbnN0cmFpbnRzIGFyZSBub3QgcmVzb2x2ZWQgZHVyaW5nIGFuIGFuaW1hdGlvbiB0byBhdm9pZCBzdG9wcGluZyBpdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gVmlld3BvcnQgc2l6ZTsgaWYgdW5kZWZpbmVkLCBbMTAwLCAxMDBdIGlzIGFzc3VtZWRcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRWaWV3cG9ydFNpemUgPSBmdW5jdGlvbiAob3B0X3NpemUpIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydFNpemVfID0gQXJyYXkuaXNBcnJheShvcHRfc2l6ZSlcbiAgICAgICAgICAgID8gb3B0X3NpemUuc2xpY2UoKVxuICAgICAgICAgICAgOiBbMTAwLCAxMDBdO1xuICAgICAgICBpZiAoIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDZW50ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIGlmICghY2VudGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b1VzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGNlbnRlciB3aXRob3V0IHRyYW5zZm9ybWluZyB0byB1c2VyIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENlbnRlckludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9ICovICh0aGlzLmdldChWaWV3UHJvcGVydHkuQ0VOVEVSKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtDb25zdHJhaW50c30gQ29uc3RyYWludHMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWludHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFJlc29sdXRpb24gY29uc3RyYWludCBpcyBzZXRcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbnN0cmFpblJlc29sdXRpb24nKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9oaW50c10gRGVzdGluYXRpb24gYXJyYXkuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSGludC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRIaW50cyA9IGZ1bmN0aW9uIChvcHRfaGludHMpIHtcbiAgICAgICAgaWYgKG9wdF9oaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRfaGludHNbMF0gPSB0aGlzLmhpbnRzX1swXTtcbiAgICAgICAgICAgIG9wdF9oaW50c1sxXSA9IHRoaXMuaGludHNfWzFdO1xuICAgICAgICAgICAgcmV0dXJuIG9wdF9oaW50cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpbnRzXy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGV4dGVudCBmb3IgdGhlIGN1cnJlbnQgdmlldyBzdGF0ZSBhbmQgdGhlIHBhc3NlZCBzaXplLlxuICAgICAqIFRoZSBzaXplIGlzIHRoZSBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggaW50byB3aGljaCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAgICAgKiBzaG91bGQgZml0LiBJbiBtb3N0IGNhc2VzIHlvdSB3YW50IHRvIGdldCB0aGUgZXh0ZW50IG9mIHRoZSBlbnRpcmUgbWFwLFxuICAgICAqIHRoYXQgaXMgYG1hcC5nZXRTaXplKClgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCwgdGhlIHNpemVcbiAgICAgKiBvZiB0aGUgbWFwIHRoYXQgdXNlcyB0aGlzIHZpZXcgd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVFeHRlbnQgPSBmdW5jdGlvbiAob3B0X3NpemUpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IHRoaXMuY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwob3B0X3NpemUpO1xuICAgICAgICByZXR1cm4gdG9Vc2VyRXh0ZW50KGV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLFxuICAgICAqIHRoZSBtYXAncyBsYXN0IGtub3duIHZpZXdwb3J0IHNpemUgd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUV4dGVudEludGVybmFsID0gZnVuY3Rpb24gKG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSk7XG4gICAgICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgIGFzc2VydChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQsIDIpOyAvLyBUaGUgdmlldyByZXNvbHV0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIGFzc2VydChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkLCAzKTsgLy8gVGhlIHZpZXcgcm90YXRpb24gaXMgbm90IGRlZmluZWRcbiAgICAgICAgcmV0dXJuIGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG5ldyBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBtYXhab29tOiB6b29tIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGEgbmV3IG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0TWluWm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7IG1pblpvb206IHpvb20gfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhlIHZpZXcgc2hvdWxkIGFsbG93IGludGVybWVkaWFyeSB6b29tIGxldmVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgV2hldGhlciB0aGUgcmVzb2x1dGlvbiBpcyBjb25zdHJhaW5lZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q29uc3RyYWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7IGNvbnN0cmFpblJlc29sdXRpb246IGVuYWJsZWQgfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gVGhlIHByb2plY3Rpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFByb2plY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb25zIGZvciB0aGUgdmlldy4gVGhpcyByZXR1cm5zIHRoZSBhcnJheSBvZiByZXNvbHV0aW9uc1xuICAgICAqIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3Igb2YgdGhlIFZpZXcsIG9yIHVuZGVmaW5lZCBpZiBub25lIHdlcmUgZ2l2ZW4uXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSBwcm92aWRlZCBleHRlbnQgKGluIG1hcCB1bml0cykgYW5kIHNpemUgKGluIHBpeGVscykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICAgKiAgICAgdGhlIGdpdmVuIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3JFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50LCBvcHRfc2l6ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwoZnJvbVVzZXJFeHRlbnQoZXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSksIG9wdF9zaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSBwcm92aWRlZCBleHRlbnQgKGluIG1hcCB1bml0cykgYW5kIHNpemUgKGluIHBpeGVscykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICAgKiAgICAgdGhlIGdpdmVuIHNpemUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsID0gZnVuY3Rpb24gKGV4dGVudCwgb3B0X3NpemUpIHtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRfc2l6ZSB8fCB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oKTtcbiAgICAgICAgdmFyIHhSZXNvbHV0aW9uID0gZ2V0V2lkdGgoZXh0ZW50KSAvIHNpemVbMF07XG4gICAgICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChleHRlbnQpIC8gc2l6ZVsxXTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgZm9yIGFcbiAgICAgKiByZXNvbHV0aW9uLiBFeHBvbmVudGlhbCBzY2FsaW5nIGlzIGFzc3VtZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcG93ZXJdIFBvd2VyLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvclZhbHVlRnVuY3Rpb24gPSBmdW5jdGlvbiAob3B0X3Bvd2VyKSB7XG4gICAgICAgIHZhciBwb3dlciA9IG9wdF9wb3dlciB8fCAyO1xuICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pO1xuICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyhwb3dlcik7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHZhbHVlICogbWF4KTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyByb3RhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBpbiByYWRpYW5zLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChWaWV3UHJvcGVydHkuUk9UQVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHJlc29sdXRpb24gZm9yIGEgdmFsdWUgYmV0d2VlblxuICAgICAqIDAgYW5kIDEuIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9wb3dlcl0gUG93ZXIuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBWYWx1ZSBmb3IgcmVzb2x1dGlvbiBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRWYWx1ZUZvclJlc29sdXRpb25GdW5jdGlvbiA9IGZ1bmN0aW9uIChvcHRfcG93ZXIpIHtcbiAgICAgICAgdmFyIGxvZ1Bvd2VyID0gTWF0aC5sb2cob3B0X3Bvd2VyIHx8IDIpO1xuICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pO1xuICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBsb2dQb3dlcjtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gVmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb24pIC8gbG9nUG93ZXIgLyBtYXg7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdmlld3BvcnQgbWludXMgcGFkZGluZy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3JvdGF0aW9uXSBUYWtlIGludG8gYWNjb3VudCB0aGUgcm90YXRpb24gb2YgdGhlIHZpZXdwb3J0IHdoZW4gZ2l2aW5nIHRoZSBzaXplXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFZpZXdwb3J0IHNpemUgcmVkdWNlZCBieSB0aGUgcGFkZGluZy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfID0gZnVuY3Rpb24gKG9wdF9yb3RhdGlvbikge1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyhvcHRfcm90YXRpb24pO1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgICAgIGlmIChwYWRkaW5nKSB7XG4gICAgICAgICAgICBzaXplID0gW1xuICAgICAgICAgICAgICAgIHNpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSxcbiAgICAgICAgICAgICAgICBzaXplWzFdIC0gcGFkZGluZ1swXSAtIHBhZGRpbmdbMl0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7U3RhdGV9IFZpZXcgc3RhdGUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovICh0aGlzLmdldENlbnRlckludGVybmFsKCkpO1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgICAgIGlmIChwYWRkaW5nKSB7XG4gICAgICAgICAgICB2YXIgcmVkdWNlZFNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oKTtcbiAgICAgICAgICAgIGNlbnRlciA9IGNhbGN1bGF0ZUNlbnRlck9uKGNlbnRlciwgdGhpcy5nZXRWaWV3cG9ydFNpemVfKCksIFtyZWR1Y2VkU2l6ZVswXSAvIDIgKyBwYWRkaW5nWzNdLCByZWR1Y2VkU2l6ZVsxXSAvIDIgKyBwYWRkaW5nWzBdXSwgcmVzb2x1dGlvbiwgcm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjZW50ZXI6IGNlbnRlci5zbGljZSgwKSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IHByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IHByb2plY3Rpb24gOiBudWxsLFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbixcbiAgICAgICAgICAgIG5leHRDZW50ZXI6IHRoaXMubmV4dENlbnRlcl8sXG4gICAgICAgICAgICBuZXh0UmVzb2x1dGlvbjogdGhpcy5uZXh0UmVzb2x1dGlvbl8sXG4gICAgICAgICAgICBuZXh0Um90YXRpb246IHRoaXMubmV4dFJvdGF0aW9uXyxcbiAgICAgICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgICAgIHpvb206IHRoaXMuZ2V0Wm9vbSgpLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuIFRoaXMgbWV0aG9kIG1heSByZXR1cm4gbm9uLWludGVnZXIgem9vbSBsZXZlbHNcbiAgICAgKiBpZiB0aGUgdmlldyBkb2VzIG5vdCBjb25zdHJhaW4gdGhlIHJlc29sdXRpb24sIG9yIGlmIGFuIGludGVyYWN0aW9uIG9yXG4gICAgICogYW5pbWF0aW9uIGlzIHVuZGVyd2F5LlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFpvb20uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB6b29tO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB6b29tID0gdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgem9vbSBsZXZlbCBmb3IgYSByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFRoZSByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSB6b29tIGxldmVsIGZvciB0aGUgcHJvdmlkZWQgcmVzb2x1dGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24gPSBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5taW5ab29tXyB8fCAwO1xuICAgICAgICB2YXIgbWF4LCB6b29tRmFjdG9yO1xuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgICAgICAgIHZhciBuZWFyZXN0ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIDEpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gbmVhcmVzdDtcbiAgICAgICAgICAgIG1heCA9IHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3RdO1xuICAgICAgICAgICAgaWYgKG5lYXJlc3QgPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IG1heCAvIHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3QgKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1heCA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgICAgICAgICB6b29tRmFjdG9yID0gdGhpcy56b29tRmFjdG9yXztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0ICsgTWF0aC5sb2cobWF4IC8gcmVzb2x1dGlvbikgLyBNYXRoLmxvZyh6b29tRmFjdG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgdmlldyByZXNvbHV0aW9uIGZvciB0aGUgcHJvdmlkZWQgem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvclpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJhc2VMZXZlbCA9IGNsYW1wKE1hdGguZmxvb3Ioem9vbSksIDAsIHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgdmFyIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWxdIC8gdGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsICsgMV07XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbF0gL1xuICAgICAgICAgICAgICAgIE1hdGgucG93KHpvb21GYWN0b3IsIGNsYW1wKHpvb20gLSBiYXNlTGV2ZWwsIDAsIDEpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMubWF4UmVzb2x1dGlvbl8gLyBNYXRoLnBvdyh0aGlzLnpvb21GYWN0b3JfLCB6b29tIC0gdGhpcy5taW5ab29tXykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaXQgdGhlIGdpdmVuIGdlb21ldHJ5IG9yIGV4dGVudCBiYXNlZCBvbiB0aGUgZ2l2ZW4gbWFwIHNpemUgYW5kIGJvcmRlci5cbiAgICAgKiBUaGUgc2l6ZSBpcyBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggdG8gZml0IHRoZSBleHRlbnQgaW50by5cbiAgICAgKiBJbiBtb3N0IGNhc2VzIHlvdSB3aWxsIHdhbnQgdG8gdXNlIHRoZSBtYXAgc2l6ZSwgdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAgICogVGFrZXMgY2FyZSBvZiB0aGUgbWFwIGFuZ2xlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBnZW9tZXRyeU9yRXh0ZW50IFRoZSBnZW9tZXRyeSBvclxuICAgICAqICAgICBleHRlbnQgdG8gZml0IHRoZSB2aWV3IHRvLlxuICAgICAqIEBwYXJhbSB7Rml0T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5maXQgPSBmdW5jdGlvbiAoZ2VvbWV0cnlPckV4dGVudCwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi9cbiAgICAgICAgdmFyIGdlb21ldHJ5O1xuICAgICAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSB8fFxuICAgICAgICAgICAgdHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhnZW9tZXRyeU9yRXh0ZW50KS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkpID09PVxuICAgICAgICAgICAgICAgICdmdW5jdGlvbicsIDI0KTsgLy8gSW52YWxpZCBleHRlbnQgb3IgZ2VvbWV0cnkgcHJvdmlkZWQgYXMgYGdlb21ldHJ5YFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSkge1xuICAgICAgICAgICAgYXNzZXJ0KCFpc0VtcHR5KGdlb21ldHJ5T3JFeHRlbnQpLCAyNSk7IC8vIENhbm5vdCBmaXQgZW1wdHkgZXh0ZW50IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBmcm9tVXNlckV4dGVudChnZW9tZXRyeU9yRXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnlPckV4dGVudC5nZXRUeXBlKCkgPT09IEdlb21ldHJ5VHlwZS5DSVJDTEUpIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBmcm9tVXNlckV4dGVudChnZW9tZXRyeU9yRXh0ZW50LmdldEV4dGVudCgpLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGV4dGVudCk7XG4gICAgICAgICAgICBnZW9tZXRyeS5yb3RhdGUodGhpcy5nZXRSb3RhdGlvbigpLCBnZXRDZW50ZXIoZXh0ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdXNlclByb2plY3Rpb24gPSBnZXRVc2VyUHJvamVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnlPckV4dGVudFxuICAgICAgICAgICAgICAgICAgICAuY2xvbmUoKVxuICAgICAgICAgICAgICAgICAgICAudHJhbnNmb3JtKHVzZXJQcm9qZWN0aW9uLCB0aGlzLmdldFByb2plY3Rpb24oKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU9yRXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZml0SW50ZXJuYWwoZ2VvbWV0cnksIG9wdF9vcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSByb3RhdGVkIGV4dGVudFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IFRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudFwiKS5FeHRlbnR9IFRoZSByb3RhdGVkIGV4dGVudCBmb3IgdGhlIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKHJvdGF0aW9uKTtcbiAgICAgICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgICAgICAgdmFyIGNvb3JkcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBtaW5Sb3RYID0gK0luZmluaXR5O1xuICAgICAgICB2YXIgbWluUm90WSA9ICtJbmZpbml0eTtcbiAgICAgICAgdmFyIG1heFJvdFggPSAtSW5maW5pdHk7XG4gICAgICAgIHZhciBtYXhSb3RZID0gLUluZmluaXR5O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZHMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB2YXIgcm90WCA9IGNvb3Jkc1tpXSAqIGNvc0FuZ2xlIC0gY29vcmRzW2kgKyAxXSAqIHNpbkFuZ2xlO1xuICAgICAgICAgICAgdmFyIHJvdFkgPSBjb29yZHNbaV0gKiBzaW5BbmdsZSArIGNvb3Jkc1tpICsgMV0gKiBjb3NBbmdsZTtcbiAgICAgICAgICAgIG1pblJvdFggPSBNYXRoLm1pbihtaW5Sb3RYLCByb3RYKTtcbiAgICAgICAgICAgIG1pblJvdFkgPSBNYXRoLm1pbihtaW5Sb3RZLCByb3RZKTtcbiAgICAgICAgICAgIG1heFJvdFggPSBNYXRoLm1heChtYXhSb3RYLCByb3RYKTtcbiAgICAgICAgICAgIG1heFJvdFkgPSBNYXRoLm1heChtYXhSb3RZLCByb3RZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW21pblJvdFgsIG1pblJvdFksIG1heFJvdFgsIG1heFJvdFldO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7Rml0T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmZpdEludGVybmFsID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICAgICAgaWYgKCFzaXplKSB7XG4gICAgICAgICAgICBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGFkZGluZyA6IFswLCAwLCAwLCAwXTtcbiAgICAgICAgdmFyIG5lYXJlc3QgPSBvcHRpb25zLm5lYXJlc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubmVhcmVzdCA6IGZhbHNlO1xuICAgICAgICB2YXIgbWluUmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKG9wdGlvbnMubWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gb3B0aW9ucy5taW5SZXNvbHV0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShvcHRpb25zLm1heFpvb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJvdGF0ZWRFeHRlbnQgPSB0aGlzLnJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeShnZW9tZXRyeSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSByZXNvbHV0aW9uXG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwocm90YXRlZEV4dGVudCwgW1xuICAgICAgICAgICAgc2l6ZVswXSAtIHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdLFxuICAgICAgICAgICAgc2l6ZVsxXSAtIHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdLFxuICAgICAgICBdKTtcbiAgICAgICAgcmVzb2x1dGlvbiA9IGlzTmFOKHJlc29sdXRpb24pXG4gICAgICAgICAgICA/IG1pblJlc29sdXRpb25cbiAgICAgICAgICAgIDogTWF0aC5tYXgocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbik7XG4gICAgICAgIHJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBuZWFyZXN0ID8gMCA6IDEpO1xuICAgICAgICAvLyBjYWxjdWxhdGUgY2VudGVyXG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4ocm90YXRpb24pO1xuICAgICAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gICAgICAgIHZhciBjZW50ZXJSb3QgPSBnZXRDZW50ZXIocm90YXRlZEV4dGVudCk7XG4gICAgICAgIGNlbnRlclJvdFswXSArPSAoKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgY2VudGVyUm90WzFdICs9ICgocGFkZGluZ1swXSAtIHBhZGRpbmdbMl0pIC8gMikgKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgY2VudGVyWCA9IGNlbnRlclJvdFswXSAqIGNvc0FuZ2xlIC0gY2VudGVyUm90WzFdICogc2luQW5nbGU7XG4gICAgICAgIHZhciBjZW50ZXJZID0gY2VudGVyUm90WzFdICogY29zQW5nbGUgKyBjZW50ZXJSb3RbMF0gKiBzaW5BbmdsZTtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q29uc3RyYWluZWRDZW50ZXIoW2NlbnRlclgsIGNlbnRlclldLCByZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayA/IG9wdGlvbnMuY2FsbGJhY2sgOiBWT0lEO1xuICAgICAgICBpZiAob3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nLFxuICAgICAgICAgICAgfSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBjZW50ZXI7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2VudGVyIG9uIGNvb3JkaW5hdGUgYW5kIHZpZXcgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwb3NpdGlvbiBQb3NpdGlvbiBvbiB0aGUgdmlldyB0byBjZW50ZXIgb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNlbnRlck9uID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuY2VudGVyT25JbnRlcm5hbChmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpLCBzaXplLCBwb3NpdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jZW50ZXJPbkludGVybmFsID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoY2FsY3VsYXRlQ2VudGVyT24oY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24sIHRoaXMuZ2V0UmVzb2x1dGlvbigpLCB0aGlzLmdldFJvdGF0aW9uKCkpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIHNoaWZ0IGJldHdlZW4gbWFwIGFuZCB2aWV3cG9ydCBjZW50ZXIuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IENlbnRlciBzaGlmdC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVDZW50ZXJTaGlmdCA9IGZ1bmN0aW9uIChjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKSB7XG4gICAgICAgIHZhciBjZW50ZXJTaGlmdDtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICBpZiAocGFkZGluZyAmJiBjZW50ZXIpIHtcbiAgICAgICAgICAgIHZhciByZWR1Y2VkU2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygtcm90YXRpb24pO1xuICAgICAgICAgICAgdmFyIHNoaWZ0ZWRDZW50ZXIgPSBjYWxjdWxhdGVDZW50ZXJPbihjZW50ZXIsIHNpemUsIFtyZWR1Y2VkU2l6ZVswXSAvIDIgKyBwYWRkaW5nWzNdLCByZWR1Y2VkU2l6ZVsxXSAvIDIgKyBwYWRkaW5nWzBdXSwgcmVzb2x1dGlvbiwgcm90YXRpb24pO1xuICAgICAgICAgICAgY2VudGVyU2hpZnQgPSBbXG4gICAgICAgICAgICAgICAgY2VudGVyWzBdIC0gc2hpZnRlZENlbnRlclswXSxcbiAgICAgICAgICAgICAgICBjZW50ZXJbMV0gLSBzaGlmdGVkQ2VudGVyWzFdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyU2hpZnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBkZWZpbmVkLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmlzRGVmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmdldENlbnRlckludGVybmFsKCkgJiYgdGhpcy5nZXRSZXNvbHV0aW9uKCkgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgcmVsYXRpdmUgY29vcmRpbmF0ZXMgdG8gdGhlIGNlbnRlciBvZiB0aGUgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGFDb29yZGluYXRlcyBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdENlbnRlciA9IGZ1bmN0aW9uIChkZWx0YUNvb3JkaW5hdGVzKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0b1VzZXJDb29yZGluYXRlKHRoaXMudGFyZ2V0Q2VudGVyXywgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICB0aGlzLnNldENlbnRlcihbXG4gICAgICAgICAgICBjZW50ZXJbMF0gKyBkZWx0YUNvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgICAgY2VudGVyWzFdICsgZGVsdGFDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdENlbnRlckludGVybmFsID0gZnVuY3Rpb24gKGRlbHRhQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMudGFyZ2V0Q2VudGVyXztcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChbXG4gICAgICAgICAgICBjZW50ZXJbMF0gKyBkZWx0YUNvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgICAgY2VudGVyWzFdICsgZGVsdGFDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGUgdmlldyByZXNvbHV0aW9uIGJ5IGEgcmF0aW8sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcmVzb2x1dGlvblxuICAgICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gVGhlIHJhdGlvIHRvIGFwcGx5IG9uIHRoZSB2aWV3IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJhdGlvLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHJhdGlvLCBhbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwgPSBmdW5jdGlvbiAocmF0aW8sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGlzTW92aW5nID0gdGhpcy5nZXRBbmltYXRpbmcoKSB8fCB0aGlzLmdldEludGVyYWN0aW5nKCk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHZhciBuZXdSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbih0aGlzLnRhcmdldFJlc29sdXRpb25fICogcmF0aW8sIDAsIHNpemUsIGlzTW92aW5nKTtcbiAgICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShuZXdSZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fICo9IHJhdGlvO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgdmFsdWUgdG8gdGhlIHZpZXcgem9vbSBsZXZlbCwgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3Rab29tID0gZnVuY3Rpb24gKGRlbHRhLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbihNYXRoLnBvdyh0aGlzLnpvb21GYWN0b3JfLCAtZGVsdGEpLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB2YWx1ZSB0byB0aGUgdmlldyByb3RhdGlvbiwgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByb3RhdGlvblxuICAgICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIHJvdGF0aW9uLCBpbiByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSb3RhdGlvbiA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgb3B0X2FuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGp1c3RSb3RhdGlvbkludGVybmFsKGRlbHRhLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gcm90YXRpb24sIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Um90YXRpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKTtcbiAgICAgICAgdmFyIG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24odGhpcy50YXJnZXRSb3RhdGlvbl8gKyBkZWx0YSwgaXNNb3ZpbmcpO1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUobmV3Um90YXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fICs9IGRlbHRhO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNlbnRlciBvZiB0aGUgY3VycmVudCB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24gKGNlbnRlcikge1xuICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKGZyb21Vc2VyQ29vcmRpbmF0ZShjZW50ZXIsIHRoaXMuZ2V0UHJvamVjdGlvbigpKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNlbnRlciB1c2luZyB0aGUgdmlldyBwcm9qZWN0aW9uIChub3QgdGhlIHVzZXIgcHJvamVjdGlvbikuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldENlbnRlckludGVybmFsID0gZnVuY3Rpb24gKGNlbnRlcikge1xuICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBjZW50ZXI7XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9WaWV3SGludC5qc1wiKS5kZWZhdWx0fSBoaW50IEhpbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTmV3IHZhbHVlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldEhpbnQgPSBmdW5jdGlvbiAoaGludCwgZGVsdGEpIHtcbiAgICAgICAgdGhpcy5oaW50c19baGludF0gKz0gZGVsdGE7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5oaW50c19baGludF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoaXMgdmlldy4gQW55IHJlc29sdXRpb24gY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcm90YXRpb24gZm9yIHRoaXMgdmlldy4gQW55IHJvdGF0aW9uIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Um90YXRpb24gPSBmdW5jdGlvbiAocm90YXRpb24pIHtcbiAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogWm9vbSB0byBhIHNwZWNpZmljIHpvb20gbGV2ZWwuIEFueSByZXNvbHV0aW9uIGNvbnN0cmFpbiB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLnNldFJlc29sdXRpb24odGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh6b29tKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGUgcm90YXRpb24vcmVzb2x1dGlvbi9jZW50ZXIgYmFzZWQgb24gdGFyZ2V0IHZhbHVlcy5cbiAgICAgKiBOb3RlOiB3ZSBoYXZlIHRvIGNvbXB1dGUgcm90YXRpb24gZmlyc3QsIHRoZW4gcmVzb2x1dGlvbiBhbmQgY2VudGVyIGNvbnNpZGVyaW5nIHRoYXRcbiAgICAgKiBwYXJhbWV0ZXJzIGNhbiBpbmZsdWVuY2Ugb25lIGFub3RoZXIgaW4gY2FzZSBhIHZpZXcgZXh0ZW50IGNvbnN0cmFpbnQgaXMgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfZG9Ob3RDYW5jZWxBbmltc10gRG8gbm90IGNhbmNlbCBhbmltYXRpb25zLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9mb3JjZU1vdmluZ10gQXBwbHkgY29uc3RyYWludHMgYXMgaWYgdGhlIHZpZXcgaXMgbW92aW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlUYXJnZXRTdGF0ZV8gPSBmdW5jdGlvbiAob3B0X2RvTm90Q2FuY2VsQW5pbXMsIG9wdF9mb3JjZU1vdmluZykge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKSB8fCBvcHRfZm9yY2VNb3Zpbmc7XG4gICAgICAgIC8vIGNvbXB1dGUgcm90YXRpb25cbiAgICAgICAgdmFyIG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24odGhpcy50YXJnZXRSb3RhdGlvbl8sIGlzTW92aW5nKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8obmV3Um90YXRpb24pO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXywgMCwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICB2YXIgbmV3Q2VudGVyID0gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgc2l6ZSwgaXNNb3ZpbmcsIHRoaXMuY2FsY3VsYXRlQ2VudGVyU2hpZnQodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBuZXdSb3RhdGlvbiwgc2l6ZSkpO1xuICAgICAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OKSAhPT0gbmV3Um90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTiwgbmV3Um90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTikgIT09IG5ld1Jlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OLCBuZXdSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuc2V0KCd6b29tJywgdGhpcy5nZXRab29tKCksIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbmV3Q2VudGVyIHx8XG4gICAgICAgICAgICAhdGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUikgfHxcbiAgICAgICAgICAgICFlcXVhbHModGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUiksIG5ld0NlbnRlcikpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIsIG5ld0NlbnRlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkgJiYgIW9wdF9kb05vdENhbmNlbEFuaW1zKSB7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJZiBhbnkgY29uc3RyYWludHMgbmVlZCB0byBiZSBhcHBsaWVkLCBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQuXG4gICAgICogVGhpcyBpcyB0eXBpY2FsbHkgZG9uZSBvbiBpbnRlcmFjdGlvbiBlbmQuXG4gICAgICogTm90ZTogY2FsbGluZyB0aGlzIHdpdGggYSBkdXJhdGlvbiBvZiAwIHdpbGwgYXBwbHkgdGhlIGNvbnN0cmFpbmVkIHZhbHVlcyBzdHJhaWdodCBhd2F5LFxuICAgICAqIHdpdGhvdXQgYW5pbWF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBUaGUgYW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Jlc29sdXRpb25EaXJlY3Rpb25dIFdoaWNoIGRpcmVjdGlvbiB0byB6b29tLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5yZXNvbHZlQ29uc3RyYWludHMgPSBmdW5jdGlvbiAob3B0X2R1cmF0aW9uLCBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgZHVyYXRpb24gPSBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDIwMDtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uIHx8IDA7XG4gICAgICAgIHZhciBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHRoaXMudGFyZ2V0Um90YXRpb25fKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8obmV3Um90YXRpb24pO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXywgZGlyZWN0aW9uLCBzaXplKTtcbiAgICAgICAgdmFyIG5ld0NlbnRlciA9IHRoaXMuY29uc3RyYWludHNfLmNlbnRlcih0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIHNpemUsIGZhbHNlLCB0aGlzLmNhbGN1bGF0ZUNlbnRlclNoaWZ0KHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgbmV3Um90YXRpb24sIHNpemUpKTtcbiAgICAgICAgaWYgKGR1cmF0aW9uID09PSAwICYmICF0aGlzLmNhbmNlbEFuY2hvcl8pIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSBuZXdSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSBuZXdSb3RhdGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IG5ld0NlbnRlcjtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvciB8fCAoZHVyYXRpb24gPT09IDAgPyB0aGlzLmNhbmNlbEFuY2hvcl8gOiB1bmRlZmluZWQpO1xuICAgICAgICB0aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gbmV3UmVzb2x1dGlvbiB8fFxuICAgICAgICAgICAgdGhpcy5nZXRSb3RhdGlvbigpICE9PSBuZXdSb3RhdGlvbiB8fFxuICAgICAgICAgICAgIXRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSB8fFxuICAgICAgICAgICAgIWVxdWFscyh0aGlzLmdldENlbnRlckludGVybmFsKCksIG5ld0NlbnRlcikpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgcm90YXRpb246IG5ld1JvdGF0aW9uLFxuICAgICAgICAgICAgICAgIGNlbnRlcjogbmV3Q2VudGVyLFxuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICBhbmNob3I6IGFuY2hvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgc3RhcnRlZC5cbiAgICAgKiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWRcbiAgICAgKiAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmJlZ2luSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIDEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmVuZEludGVyYWN0aW9uID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3IgJiYgZnJvbVVzZXJDb29yZGluYXRlKG9wdF9hbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5lbmRJbnRlcmFjdGlvbkludGVybmFsKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIGFuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgZW5kZWQuIFRoZSB2aWV3IHN0YXRlIHdpbGwgYmUgcmVzb2x2ZWRcbiAgICAgKiB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkIChkZXBlbmRpbmcgb24gaXRzIGNvbnN0cmFpbnRzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Jlc29sdXRpb25EaXJlY3Rpb25dIFdoaWNoIGRpcmVjdGlvbiB0byB6b29tLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5lbmRJbnRlcmFjdGlvbkludGVybmFsID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgcG9zaXRpb24gZm9yIHRoZSB2aWV3IGNlbnRlciBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgY29uc3RyYWludHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3RhcmdldFJlc29sdXRpb25dIFRhcmdldCByZXNvbHV0aW9uLiBJZiBub3Qgc3VwcGxpZWQsIHRoZSBjdXJyZW50IG9uZSB3aWxsIGJlIHVzZWQuXG4gICAgICogVGhpcyBpcyB1c2VmdWwgdG8gZ3Vlc3MgYSB2YWxpZCBjZW50ZXIgcG9zaXRpb24gYXQgYSBkaWZmZXJlbnQgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFZhbGlkIGNlbnRlciBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZENlbnRlciA9IGZ1bmN0aW9uICh0YXJnZXRDZW50ZXIsIG9wdF90YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGFyZ2V0Q2VudGVyLCBvcHRfdGFyZ2V0UmVzb2x1dGlvbiB8fCB0aGlzLmdldFJlc29sdXRpb24oKSwgc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB2YWxpZCB6b29tIGxldmVsIGFjY29yZGluZyB0byB0aGUgY3VycmVudCB2aWV3IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdGFyZ2V0Wm9vbSBUYXJnZXQgem9vbS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVmFsaWQgem9vbSBsZXZlbC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZFpvb20gPSBmdW5jdGlvbiAodGFyZ2V0Wm9vbSwgb3B0X2RpcmVjdGlvbikge1xuICAgICAgICB2YXIgdGFyZ2V0UmVzID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh0YXJnZXRab29tKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGFyZ2V0UmVzLCBvcHRfZGlyZWN0aW9uKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB2YWxpZCByZXNvbHV0aW9uIGFjY29yZGluZyB0byB0aGUgY3VycmVudCB2aWV3IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICAgICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVmFsaWQgcmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24gPSBmdW5jdGlvbiAodGFyZ2V0UmVzb2x1dGlvbiwgb3B0X2RpcmVjdGlvbikge1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gb3B0X2RpcmVjdGlvbiB8fCAwO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbih0YXJnZXRSZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUpO1xuICAgIH07XG4gICAgcmV0dXJuIFZpZXc7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcGFyYW0geyp9IHJldHVyblZhbHVlIFJldHVybiB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHJldHVyblZhbHVlKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNhbGxiYWNrKHJldHVyblZhbHVlKTtcbiAgICB9LCAwKTtcbn1cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgc21vb3RoID0gb3B0aW9ucy5zbW9vdGhFeHRlbnRDb25zdHJhaW50ICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5zbW9vdGhFeHRlbnRDb25zdHJhaW50XG4gICAgICAgICAgICA6IHRydWU7XG4gICAgICAgIHJldHVybiBjcmVhdGVFeHRlbnQob3B0aW9ucy5leHRlbnQsIG9wdGlvbnMuY29uc3RyYWluT25seUNlbnRlciwgc21vb3RoKTtcbiAgICB9XG4gICAgdmFyIHByb2plY3Rpb24gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICAgIGlmIChvcHRpb25zLm11bHRpV29ybGQgIT09IHRydWUgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgICAgIHZhciBleHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpLnNsaWNlKCk7XG4gICAgICAgIGV4dGVudFswXSA9IC1JbmZpbml0eTtcbiAgICAgICAgZXh0ZW50WzJdID0gSW5maW5pdHk7XG4gICAgICAgIHJldHVybiBjcmVhdGVFeHRlbnQoZXh0ZW50LCBmYWxzZSwgZmFsc2UpO1xuICAgIH1cbiAgICByZXR1cm4gY2VudGVyTm9uZTtcbn1cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHt7Y29uc3RyYWludDogaW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlLCBtYXhSZXNvbHV0aW9uOiBudW1iZXIsXG4gKiAgICAgbWluUmVzb2x1dGlvbjogbnVtYmVyLCBtaW5ab29tOiBudW1iZXIsIHpvb21GYWN0b3I6IG51bWJlcn19IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICAgIHZhciByZXNvbHV0aW9uQ29uc3RyYWludDtcbiAgICB2YXIgbWF4UmVzb2x1dGlvbjtcbiAgICB2YXIgbWluUmVzb2x1dGlvbjtcbiAgICAvLyBUT0RPOiBtb3ZlIHRoZXNlIHRvIGJlIG9sIGNvbnN0YW50c1xuICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vb3BlbmxheWVycy9vcGVubGF5ZXJzL2lzc3Vlcy8yMDc2XG4gICAgdmFyIGRlZmF1bHRNYXhab29tID0gMjg7XG4gICAgdmFyIGRlZmF1bHRab29tRmFjdG9yID0gMjtcbiAgICB2YXIgbWluWm9vbSA9IG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5ab29tIDogREVGQVVMVF9NSU5fWk9PTTtcbiAgICB2YXIgbWF4Wm9vbSA9IG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhab29tIDogZGVmYXVsdE1heFpvb207XG4gICAgdmFyIHpvb21GYWN0b3IgPSBvcHRpb25zLnpvb21GYWN0b3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbUZhY3RvciA6IGRlZmF1bHRab29tRmFjdG9yO1xuICAgIHZhciBtdWx0aVdvcmxkID0gb3B0aW9ucy5tdWx0aVdvcmxkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm11bHRpV29ybGQgOiBmYWxzZTtcbiAgICB2YXIgc21vb3RoID0gb3B0aW9ucy5zbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludCAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5zbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludFxuICAgICAgICA6IHRydWU7XG4gICAgdmFyIHNob3dGdWxsRXh0ZW50ID0gb3B0aW9ucy5zaG93RnVsbEV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaG93RnVsbEV4dGVudCA6IGZhbHNlO1xuICAgIHZhciBwcm9qZWN0aW9uID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICB2YXIgcHJvakV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGNvbnN0cmFpbk9ubHlDZW50ZXIgPSBvcHRpb25zLmNvbnN0cmFpbk9ubHlDZW50ZXI7XG4gICAgdmFyIGV4dGVudCA9IG9wdGlvbnMuZXh0ZW50O1xuICAgIGlmICghbXVsdGlXb3JsZCAmJiAhZXh0ZW50ICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgICBjb25zdHJhaW5Pbmx5Q2VudGVyID0gZmFsc2U7XG4gICAgICAgIGV4dGVudCA9IHByb2pFeHRlbnQ7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHJlc29sdXRpb25zID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcbiAgICAgICAgbWF4UmVzb2x1dGlvbiA9IHJlc29sdXRpb25zW21pblpvb21dO1xuICAgICAgICBtaW5SZXNvbHV0aW9uID1cbiAgICAgICAgICAgIHJlc29sdXRpb25zW21heFpvb21dICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHJlc29sdXRpb25zW21heFpvb21dXG4gICAgICAgICAgICAgICAgOiByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyhyZXNvbHV0aW9ucywgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlZmF1bHQgbWluIGFuZCBtYXggcmVzb2x1dGlvblxuICAgICAgICB2YXIgc2l6ZSA9ICFwcm9qRXh0ZW50XG4gICAgICAgICAgICA/IC8vIHVzZSBhbiBleHRlbnQgdGhhdCBjYW4gZml0IHRoZSB3aG9sZSB3b3JsZCBpZiBuZWVkIGJlXG4gICAgICAgICAgICAgICAgKDM2MCAqIE1FVEVSU19QRVJfVU5JVFtVbml0cy5ERUdSRUVTXSkgLyBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKVxuICAgICAgICAgICAgOiBNYXRoLm1heChnZXRXaWR0aChwcm9qRXh0ZW50KSwgZ2V0SGVpZ2h0KHByb2pFeHRlbnQpKTtcbiAgICAgICAgdmFyIGRlZmF1bHRNYXhSZXNvbHV0aW9uID0gc2l6ZSAvIERFRkFVTFRfVElMRV9TSVpFIC8gTWF0aC5wb3coZGVmYXVsdFpvb21GYWN0b3IsIERFRkFVTFRfTUlOX1pPT00pO1xuICAgICAgICB2YXIgZGVmYXVsdE1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvXG4gICAgICAgICAgICBNYXRoLnBvdyhkZWZhdWx0Wm9vbUZhY3RvciwgZGVmYXVsdE1heFpvb20gLSBERUZBVUxUX01JTl9aT09NKTtcbiAgICAgICAgLy8gdXNlciBwcm92aWRlZCBtYXhSZXNvbHV0aW9uIHRha2VzIHByZWNlZGVuY2VcbiAgICAgICAgbWF4UmVzb2x1dGlvbiA9IG9wdGlvbnMubWF4UmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKG1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluWm9vbSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXhSZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtaW5ab29tKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1c2VyIHByb3ZpZGVkIG1pblJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgICAgICBtaW5SZXNvbHV0aW9uID0gb3B0aW9ucy5taW5SZXNvbHV0aW9uO1xuICAgICAgICBpZiAobWluUmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBkZWZhdWx0TWluUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBnaXZlbiBkaXNjcmV0ZSB6b29tIGxldmVscywgbWluUmVzb2x1dGlvbiBtYXkgYmUgZGlmZmVyZW50IHRoYW4gcHJvdmlkZWRcbiAgICAgICAgbWF4Wm9vbSA9XG4gICAgICAgICAgICBtaW5ab29tICtcbiAgICAgICAgICAgICAgICBNYXRoLmZsb29yKE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpKTtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tIC0gbWluWm9vbSk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUG93ZXIoem9vbUZhY3RvciwgbWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnN0cmFpbnQ6IHJlc29sdXRpb25Db25zdHJhaW50LFxuICAgICAgICBtYXhSZXNvbHV0aW9uOiBtYXhSZXNvbHV0aW9uLFxuICAgICAgICBtaW5SZXNvbHV0aW9uOiBtaW5SZXNvbHV0aW9uLFxuICAgICAgICBtaW5ab29tOiBtaW5ab29tLFxuICAgICAgICB6b29tRmFjdG9yOiB6b29tRmFjdG9yLFxuICAgIH07XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gICAgdmFyIGVuYWJsZVJvdGF0aW9uID0gb3B0aW9ucy5lbmFibGVSb3RhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5lbmFibGVSb3RhdGlvbiA6IHRydWU7XG4gICAgaWYgKGVuYWJsZVJvdGF0aW9uKSB7XG4gICAgICAgIHZhciBjb25zdHJhaW5Sb3RhdGlvbiA9IG9wdGlvbnMuY29uc3RyYWluUm90YXRpb247XG4gICAgICAgIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGNvbnN0cmFpblJvdGF0aW9uID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlU25hcFRvWmVybygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uTm9uZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgY29uc3RyYWluUm90YXRpb24gPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlU25hcFRvTihjb25zdHJhaW5Sb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb25Ob25lO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZGlzYWJsZTtcbiAgICB9XG59XG4vKipcbiAqIERldGVybWluZSBpZiBhbiBhbmltYXRpb24gaW52b2x2ZXMgbm8gdmlldyBjaGFuZ2UuXG4gKiBAcGFyYW0ge0FuaW1hdGlvbn0gYW5pbWF0aW9uIFRoZSBhbmltYXRpb24uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikge1xuICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyICYmIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIpIHtcbiAgICAgICAgaWYgKCFjb29yZGluYXRlc0VxdWFsKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIsIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICE9PSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwb3NpdGlvbiBQb3NpdGlvbiBvbiB0aGUgdmlldyB0byBjZW50ZXIgb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFNoaWZ0ZWQgY2VudGVyLlxuICovXG5mdW5jdGlvbiBjYWxjdWxhdGVDZW50ZXJPbihjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbiwgcmVzb2x1dGlvbiwgcm90YXRpb24pIHtcbiAgICAvLyBjYWxjdWxhdGUgcm90YXRlZCBwb3NpdGlvblxuICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKC1yb3RhdGlvbik7XG4gICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgICB2YXIgcm90WCA9IGNvb3JkaW5hdGVbMF0gKiBjb3NBbmdsZSAtIGNvb3JkaW5hdGVbMV0gKiBzaW5BbmdsZTtcbiAgICB2YXIgcm90WSA9IGNvb3JkaW5hdGVbMV0gKiBjb3NBbmdsZSArIGNvb3JkaW5hdGVbMF0gKiBzaW5BbmdsZTtcbiAgICByb3RYICs9IChzaXplWzBdIC8gMiAtIHBvc2l0aW9uWzBdKSAqIHJlc29sdXRpb247XG4gICAgcm90WSArPSAocG9zaXRpb25bMV0gLSBzaXplWzFdIC8gMikgKiByZXNvbHV0aW9uO1xuICAgIC8vIGdvIGJhY2sgdG8gb3JpZ2luYWwgYW5nbGVcbiAgICBzaW5BbmdsZSA9IC1zaW5BbmdsZTsgLy8gZ28gYmFjayB0byBvcmlnaW5hbCByb3RhdGlvblxuICAgIHZhciBjZW50ZXJYID0gcm90WCAqIGNvc0FuZ2xlIC0gcm90WSAqIHNpbkFuZ2xlO1xuICAgIHZhciBjZW50ZXJZID0gcm90WSAqIGNvc0FuZ2xlICsgcm90WCAqIHNpbkFuZ2xlO1xuICAgIHJldHVybiBbY2VudGVyWCwgY2VudGVyWV07XG59XG5leHBvcnQgZGVmYXVsdCBWaWV3O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlldy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtYXhpbXVtIHpvb20gZm9yIGRlZmF1bHQgdGlsZSBncmlkcy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9NQVhfWk9PTSA9IDQyO1xuLyoqXG4gKiBEZWZhdWx0IHRpbGUgc2l6ZS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9USUxFX1NJWkUgPSAyNTY7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb21tb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdIaW50XG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIEFOSU1BVElORzogMCxcbiAgICBJTlRFUkFDVElORzogMSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3SGludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGVcbiAqL1xuaW1wb3J0IHsgYXNTdHJpbmcgfSBmcm9tICcuLi9jb2xvci5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNpbmdsZXRvbiBjbGFzcy4gQXZhaWxhYmxlIHRocm91Z2gge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZX5zaGFyZWR9LlxuICovXG52YXIgSWNvbkltYWdlQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSWNvbkltYWdlQ2FjaGUoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZV8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4Q2FjaGVTaXplXyA9IDMyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgICAgIHRoaXMuY2FjaGVTaXplXyA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVTaXplXyA+IHRoaXMubWF4Q2FjaGVTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5leHBpcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlXykge1xuICAgICAgICAgICAgICAgIHZhciBpY29uSW1hZ2UgPSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAgICAgICAgIGlmICgoaSsrICYgMykgPT09IDAgJiYgIWljb25JbWFnZS5oYXNMaXN0ZW5lcigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlX1trZXldO1xuICAgICAgICAgICAgICAgICAgICAtLXRoaXMuY2FjaGVTaXplXztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9IEljb24gaW1hZ2UuXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcikge1xuICAgICAgICB2YXIga2V5ID0gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICAgICAgcmV0dXJuIGtleSBpbiB0aGlzLmNhY2hlXyA/IHRoaXMuY2FjaGVfW2tleV0gOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBpY29uSW1hZ2UgSWNvbiBpbWFnZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yLCBpY29uSW1hZ2UpIHtcbiAgICAgICAgdmFyIGtleSA9IGdldEtleShzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcik7XG4gICAgICAgIHRoaXMuY2FjaGVfW2tleV0gPSBpY29uSW1hZ2U7XG4gICAgICAgICsrdGhpcy5jYWNoZVNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjYWNoZSBzaXplIG9mIHRoZSBpY29uIGNhY2hlLiBEZWZhdWx0IGlzIGAzMmAuIENoYW5nZSB0aGlzIHZhbHVlIHdoZW5cbiAgICAgKiB5b3VyIG1hcCB1c2VzIG1vcmUgdGhhbiAzMiBkaWZmZXJlbnQgaWNvbiBpbWFnZXMgYW5kIHlvdSBhcmUgbm90IGNhY2hpbmcgaWNvblxuICAgICAqIHN0eWxlcyBvbiB0aGUgYXBwbGljYXRpb24gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heENhY2hlU2l6ZSBDYWNoZSBtYXggc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAobWF4Q2FjaGVTaXplKSB7XG4gICAgICAgIHRoaXMubWF4Q2FjaGVTaXplXyA9IG1heENhY2hlU2l6ZTtcbiAgICAgICAgdGhpcy5leHBpcmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBJY29uSW1hZ2VDYWNoZTtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ2FjaGUga2V5LlxuICovXG5mdW5jdGlvbiBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgICB2YXIgY29sb3JTdHJpbmcgPSBjb2xvciA/IGFzU3RyaW5nKGNvbG9yKSA6ICdudWxsJztcbiAgICByZXR1cm4gY3Jvc3NPcmlnaW4gKyAnOicgKyBzcmMgKyAnOicgKyBjb2xvclN0cmluZztcbn1cbmV4cG9ydCBkZWZhdWx0IEljb25JbWFnZUNhY2hlO1xuLyoqXG4gKiBUaGUge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZX5JY29uSW1hZ2VDYWNoZX0gZm9yXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25+SWNvbn0gaW1hZ2VzLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHNoYXJlZCA9IG5ldyBJY29uSW1hZ2VDYWNoZSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SWNvbkltYWdlQ2FjaGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9NYXBcbiAqL1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIG1ha2VJbnZlcnNlIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGdldFdpZHRoIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHNoYXJlZCBhcyBpY29uSW1hZ2VDYWNoZSB9IGZyb20gJy4uL3N0eWxlL0ljb25JbWFnZUNhY2hlLmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IHdyYXBYIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIEhpdE1hdGNoXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZGlzdGFuY2VTcSBTcXVhcmVkIGRpc3RhbmNlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIE1hcFJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcFJlbmRlcmVyKG1hcCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAodHlwZSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuY2FsY3VsYXRlTWF0cmljZXMyRCA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTtcbiAgICAgICAgdmFyIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTtcbiAgICAgICAgY29tcG9zZVRyYW5zZm9ybShjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMiwgMSAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCAtMSAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCAtdmlld1N0YXRlLnJvdGF0aW9uLCAtdmlld1N0YXRlLmNlbnRlclswXSwgLXZpZXdTdGF0ZS5jZW50ZXJbMV0pO1xuICAgICAgICBtYWtlSW52ZXJzZShwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrV3JhcHBlZCBDaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7U30gdGhpc0FyZyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBjYWxsYmFja2AuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBVLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEBwYXJhbSB7VX0gdGhpc0FyZzIgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFMsVCxVXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBjYWxsYmFjaywgdGhpc0FyZywgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcyKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWFuYWdlZCBNYW5hZ2VkIGxheWVyLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUobWFuYWdlZCwgZmVhdHVyZSwgbGF5ZXIsIGdlb21ldHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBmZWF0dXJlLCBtYW5hZ2VkID8gbGF5ZXIgOiBudWxsLCBnZW9tZXRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHRyYW5zbGF0ZWRDb29yZGluYXRlID0gd3JhcFgoY29vcmRpbmF0ZS5zbGljZSgpLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIG9mZnNldHMgPSBbWzAsIDBdXTtcbiAgICAgICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJiBjaGVja1dyYXBwZWQpIHtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgICAgICBvZmZzZXRzLnB1c2goWy13b3JsZFdpZHRoLCAwXSwgW3dvcmxkV2lkdGgsIDBdKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIHZhciBudW1MYXllcnMgPSBsYXllclN0YXRlcy5sZW5ndGg7XG4gICAgICAgIHZhciBtYXRjaGVzID0gLyoqIEB0eXBlIHtBcnJheTxIaXRNYXRjaDxUPj59ICovIChbXSk7XG4gICAgICAgIHZhciB0bXBDb29yZCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBudW1MYXllcnMgLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNbal07XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSAmJlxuICAgICAgICAgICAgICAgICAgICBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSAmJlxuICAgICAgICAgICAgICAgICAgICBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSBsYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXllclJlbmRlcmVyICYmIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gc291cmNlLmdldFdyYXBYKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRyYW5zbGF0ZWRDb29yZGluYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb29yZGluYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrXzEgPSBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZS5iaW5kKG51bGwsIGxheWVyU3RhdGUubWFuYWdlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBDb29yZFswXSA9IGNvb3JkaW5hdGVzWzBdICsgb2Zmc2V0c1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcENvb3JkWzFdID0gY29vcmRpbmF0ZXNbMV0gKyBvZmZzZXRzW2ldWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGF5ZXJSZW5kZXJlci5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSh0bXBDb29yZCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFja18xLCBtYXRjaGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3JkZXIgPSAxIC8gbWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgIG1hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAobSwgaSkgeyByZXR1cm4gKG0uZGlzdGFuY2VTcSArPSBpICogb3JkZXIpOyB9KTtcbiAgICAgICAgbWF0Y2hlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmRpc3RhbmNlU3EgLSBiLmRpc3RhbmNlU3E7IH0pO1xuICAgICAgICBtYXRjaGVzLnNvbWUoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gbS5jYWxsYmFjayhtLmZlYXR1cmUsIG0ubGF5ZXIsIG0uZ2VvbWV0cnkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZVwiKS5kZWZhdWx0PiwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2sgTGF5ZXJcbiAgICAgKiAgICAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2VcIikuZGVmYXVsdD4pOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBsYXllckZpbHRlcikge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjaGVja1dyYXBwZWQgQ2hlY2sgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFUsIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHBhcmFtIHtVfSB0aGlzQXJnIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIGNvb3JkaW5hdGU/XG4gICAgICogQHRlbXBsYXRlIFVcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIGhhc0ZlYXR1cmUgPSB0aGlzLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBUUlVFLCB0aGlzLCBsYXllckZpbHRlciwgdGhpc0FyZyk7XG4gICAgICAgIHJldHVybiBoYXNGZWF0dXJlICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5zY2hlZHVsZUV4cGlyZUljb25DYWNoZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmIChpY29uSW1hZ2VDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChleHBpcmVJY29uQ2FjaGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWFwUmVuZGVyZXI7XG59KERpc3Bvc2FibGUpKTtcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gKi9cbmZ1bmN0aW9uIGV4cGlyZUljb25DYWNoZShtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICBpY29uSW1hZ2VDYWNoZS5leHBpcmUoKTtcbn1cbmV4cG9ydCBkZWZhdWx0IE1hcFJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgeyBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyB9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuLi9kb20uanMnO1xuaW1wb3J0IHsgZ2V0Rm9udFBhcmFtZXRlcnMgfSBmcm9tICcuLi9jc3MuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gZmlsbFN0eWxlIEZpbGxTdHlsZS5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiBMYWJlbFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoIFdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodCBIZWlnaHQuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZ3xudW1iZXI+fSBjb250ZXh0SW5zdHJ1Y3Rpb25zIENvbnRleHRJbnN0cnVjdGlvbnMuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmlsbFN0cm9rZVN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtjdXJyZW50RmlsbFN0eWxlXSBDdXJyZW50IEZpbGxTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRTdHJva2VTdHlsZV0gQ3VycmVudCBTdHJva2VTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUNhcH0gW2N1cnJlbnRMaW5lQ2FwXSBDdXJyZW50IExpbmVDYXAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGN1cnJlbnRMaW5lRGFzaCBDdXJyZW50IExpbmVEYXNoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TGluZURhc2hPZmZzZXRdIEN1cnJlbnQgTGluZURhc2hPZmZzZXQuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVKb2lufSBbY3VycmVudExpbmVKb2luXSBDdXJyZW50IExpbmVKb2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TGluZVdpZHRoXSBDdXJyZW50IExpbmVXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudE1pdGVyTGltaXRdIEN1cnJlbnQgTWl0ZXJMaW1pdC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGFzdFN0cm9rZV0gTGFzdCBzdHJva2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtmaWxsU3R5bGVdIEZpbGxTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW3N0cm9rZVN0eWxlXSBTdHJva2VTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUNhcH0gW2xpbmVDYXBdIExpbmVDYXAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGxpbmVEYXNoIExpbmVEYXNoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lRGFzaE9mZnNldF0gTGluZURhc2hPZmZzZXQuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVKb2lufSBbbGluZUpvaW5dIExpbmVKb2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsaW5lV2lkdGhdIExpbmVXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWl0ZXJMaW1pdF0gTWl0ZXJMaW1pdC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBsaW5lQ2FwIExpbmVDYXAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGxpbmVEYXNoIExpbmVEYXNoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVEYXNoT2Zmc2V0IExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gbGluZUpvaW4gTGluZUpvaW4uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGluZVdpZHRoIExpbmVXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaXRlckxpbWl0IE1pdGVyTGltaXQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IHN0cm9rZVN0eWxlIFN0cm9rZVN0eWxlLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRTdGF0ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGV4dEFsaWduXSBUZXh0QWxpZ24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdGV4dEJhc2VsaW5lIFRleHRCYXNlbGluZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGxhY2VtZW50XSBQbGFjZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heEFuZ2xlXSBNYXhBbmdsZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW292ZXJmbG93XSBPdmVyZmxvdy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvRmlsbC5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZEZpbGxdIEJhY2tncm91bmRGaWxsLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9TdHJva2UuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRTdHJva2VdIEJhY2tncm91bmRTdHJva2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3NjYWxlXSBTY2FsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW3BhZGRpbmddIFBhZGRpbmcuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2VyaWFsaXphYmxlSW5zdHJ1Y3Rpb25zXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBpbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PCo+fSBoaXREZXRlY3Rpb25JbnN0cnVjdGlvbnMgVGhlIHJlbmRlcmluZyBoaXQgZGV0ZWN0aW9uIGluc3RydWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgVGhlIGFycmF5IG9mIGFsbCBjb29yZGluYXRlcy5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIFRleHRTdGF0ZT59IFt0ZXh0U3RhdGVzXSBUaGUgdGV4dCBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBGaWxsU3RhdGU+fSBbZmlsbFN0YXRlc10gVGhlIGZpbGwgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgU3Ryb2tlU3RhdGU+fSBbc3Ryb2tlU3RhdGVzXSBUaGUgc3Ryb2tlIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0PG51bWJlciwgaW1wb3J0KFwiLi9jYW52YXMvRXhlY3V0b3IuanNcIikuUmVwbGF5SW1hZ2VPckxhYmVsQXJncz59IERlY2x1dHRlckltYWdlV2l0aFRleHRcbiAqL1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdEZvbnQgPSAnMTBweCBzYW5zLXNlcmlmJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0RmlsbFN0eWxlID0gJyMwMDAnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lQ2FwID0gJ3JvdW5kJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZURhc2ggPSBbXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lRGFzaE9mZnNldCA9IDA7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0NhbnZhc0xpbmVKb2lufVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lSm9pbiA9ICdyb3VuZCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TWl0ZXJMaW1pdCA9IDEwO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRTdHJva2VTdHlsZSA9ICcjMDAwJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRUZXh0QWxpZ24gPSAnY2VudGVyJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRUZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0UGFkZGluZyA9IFswLCAwLCAwLCAwXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lV2lkdGggPSAxO1xuLyoqXG4gKiBAdHlwZSB7QmFzZU9iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBjaGVja2VkRm9udHMgPSBuZXcgQmFzZU9iamVjdCgpO1xuLyoqXG4gKiBUaGUgbGFiZWwgY2FjaGUgZm9yIHRleHQgcmVuZGVyaW5nLiBUbyBjaGFuZ2UgdGhlIGRlZmF1bHQgY2FjaGUgc2l6ZSBvZiAyMDQ4XG4gKiBlbnRyaWVzLCB1c2Uge0BsaW5rIG1vZHVsZTpvbC9zdHJ1Y3RzL0xSVUNhY2hlfkxSVUNhY2hlI3NldFNpemUgY2FjaGUuc2V0U2l6ZSgpfS5cbiAqIERlcHJlY2F0ZWQgLSB0aGVyZSBpcyBubyBsYWJlbCBjYWNoZSBhbnkgbW9yZS5cbiAqIEB0eXBlIHs/fVxuICogQGFwaVxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBsYWJlbENhY2hlID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG5sYWJlbENhY2hlLnNldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc29sZS53YXJuKCdsYWJlbENhY2hlIGlzIGRlcHJlY2F0ZWQuJyk7IC8vZXNsaW50LWRpc2FibGUtbGluZVxufTtcbi8qKlxuICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAqL1xudmFyIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIG1lYXN1cmVGb250O1xuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgdGV4dEhlaWdodHMgPSB7fTtcbi8qKlxuICogQ2xlYXJzIHRoZSBsYWJlbCBjYWNoZSB3aGVuIGEgZm9udCBiZWNvbWVzIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBDU1MgZm9udCBzcGVjLlxuICovXG5leHBvcnQgdmFyIHJlZ2lzdGVyRm9udCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldHJpZXMgPSAxMDA7XG4gICAgdmFyIHNpemUgPSAnMzJweCAnO1xuICAgIHZhciByZWZlcmVuY2VGb250cyA9IFsnbW9ub3NwYWNlJywgJ3NlcmlmJ107XG4gICAgdmFyIGxlbiA9IHJlZmVyZW5jZUZvbnRzLmxlbmd0aDtcbiAgICB2YXIgdGV4dCA9ICd3bXl0emlsV01ZVFpJTEAjLyY/JCUxMFxcdUYwMTMnO1xuICAgIHZhciBpbnRlcnZhbCwgcmVmZXJlbmNlV2lkdGg7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTdHlsZSBDc3MgZm9udC1zdHlsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb250V2VpZ2h0IENzcyBmb250LXdlaWdodFxuICAgICAqIEBwYXJhbSB7Kn0gZm9udEZhbWlseSBDc3MgZm9udC1mYW1pbHlcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBGb250IHdpdGggc3R5bGUgYW5kIHdlaWdodCBpcyBhdmFpbGFibGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0F2YWlsYWJsZShmb250U3R5bGUsIGZvbnRXZWlnaHQsIGZvbnRGYW1pbHkpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZSA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgIHZhciByZWZlcmVuY2VGb250ID0gcmVmZXJlbmNlRm9udHNbaV07XG4gICAgICAgICAgICByZWZlcmVuY2VXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udFN0eWxlICsgJyAnICsgZm9udFdlaWdodCArICcgJyArIHNpemUgKyByZWZlcmVuY2VGb250LCB0ZXh0KTtcbiAgICAgICAgICAgIGlmIChmb250RmFtaWx5ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnRTdHlsZSArXG4gICAgICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICBzaXplICtcbiAgICAgICAgICAgICAgICAgICAgZm9udEZhbWlseSArXG4gICAgICAgICAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUZvbnQsIHRleHQpO1xuICAgICAgICAgICAgICAgIC8vIElmIHdpZHRoIGFuZCByZWZlcmVuY2VXaWR0aCBhcmUgdGhlIHNhbWUsIHRoZW4gdGhlIGZhbGxiYWNrIHdhcyB1c2VkXG4gICAgICAgICAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgZm9udCB3ZSB3YW50ZWQsIHNvIHRoZSBmb250IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlID0gYXZhaWxhYmxlICYmIHdpZHRoICE9IHJlZmVyZW5jZVdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhdmFpbGFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgICAgIHZhciBkb25lID0gdHJ1ZTtcbiAgICAgICAgdmFyIGZvbnRzID0gY2hlY2tlZEZvbnRzLmdldEtleXMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZm9udHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGZvbnQgPSBmb250c1tpXTtcbiAgICAgICAgICAgIGlmIChjaGVja2VkRm9udHMuZ2V0KGZvbnQpIDwgcmV0cmllcykge1xuICAgICAgICAgICAgICAgIGlmIChpc0F2YWlsYWJsZS5hcHBseSh0aGlzLCBmb250LnNwbGl0KCdcXG4nKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXIodGV4dEhlaWdodHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBsb2FkZWQgZm9udHMgYXJlIHBpY2tlZCB1cCBieSBTYWZhcmlcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRm9udCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChmb250LCByZXRyaWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgY2hlY2tlZEZvbnRzLmdldChmb250KSArIDEsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgICAgIGludGVydmFsID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICAgICAgdmFyIGZvbnQgPSBnZXRGb250UGFyYW1ldGVycyhmb250U3BlYyk7XG4gICAgICAgIGlmICghZm9udCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmYW1pbGllcyA9IGZvbnQuZmFtaWxpZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZhbWlsaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmYW1pbHkgPSBmYW1pbGllc1tpXTtcbiAgICAgICAgICAgIHZhciBrZXkgPSBmb250LnN0eWxlICsgJ1xcbicgKyBmb250LndlaWdodCArICdcXG4nICsgZmFtaWx5O1xuICAgICAgICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIHJldHJpZXMsIHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICghaXNBdmFpbGFibGUoZm9udC5zdHlsZSwgZm9udC53ZWlnaHQsIGZhbWlseSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChrZXksIDAsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjaywgMzIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQgdG8gdXNlIGZvciBtZWFzdXJpbmcuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IE1lYXN1cmVtZW50LlxuICovXG5leHBvcnQgdmFyIG1lYXN1cmVUZXh0SGVpZ2h0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICovXG4gICAgdmFyIG1lYXN1cmVFbGVtZW50O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICAgICAgdmFyIGhlaWdodCA9IHRleHRIZWlnaHRzW2ZvbnRTcGVjXTtcbiAgICAgICAgaWYgKGhlaWdodCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUykge1xuICAgICAgICAgICAgICAgIHZhciBmb250ID0gZ2V0Rm9udFBhcmFtZXRlcnMoZm9udFNwZWMpO1xuICAgICAgICAgICAgICAgIHZhciBtZXRyaWNzID0gbWVhc3VyZVRleHQoZm9udFNwZWMsICfFvWcnKTtcbiAgICAgICAgICAgICAgICB2YXIgbGluZUhlaWdodCA9IGlzTmFOKE51bWJlcihmb250LmxpbmVIZWlnaHQpKVxuICAgICAgICAgICAgICAgICAgICA/IDEuMlxuICAgICAgICAgICAgICAgICAgICA6IE51bWJlcihmb250LmxpbmVIZWlnaHQpO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9XG4gICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQgKlxuICAgICAgICAgICAgICAgICAgICAgICAgKG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQgKyBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIW1lYXN1cmVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LmlubmVySFRNTCA9ICdNJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gJzAnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5tYXhIZWlnaHQgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5sZWZ0ID0gJy05OTk5OXB4JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUuZm9udCA9IGZvbnRTcGVjO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobWVhc3VyZUVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIGhlaWdodCA9IG1lYXN1cmVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKG1lYXN1cmVFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHRIZWlnaHRzW2ZvbnRTcGVjXSA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVpZ2h0O1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dC5cbiAqIEByZXR1cm4ge1RleHRNZXRyaWNzfSBUZXh0IG1ldHJpY3MuXG4gKi9cbmZ1bmN0aW9uIG1lYXN1cmVUZXh0KGZvbnQsIHRleHQpIHtcbiAgICBpZiAoIW1lYXN1cmVDb250ZXh0KSB7XG4gICAgICAgIG1lYXN1cmVDb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgIH1cbiAgICBpZiAoZm9udCAhPSBtZWFzdXJlRm9udCkge1xuICAgICAgICBtZWFzdXJlQ29udGV4dC5mb250ID0gZm9udDtcbiAgICAgICAgbWVhc3VyZUZvbnQgPSBtZWFzdXJlQ29udGV4dC5mb250O1xuICAgIH1cbiAgICByZXR1cm4gbWVhc3VyZUNvbnRleHQubWVhc3VyZVRleHQodGV4dCk7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCkge1xuICAgIHJldHVybiBtZWFzdXJlVGV4dChmb250LCB0ZXh0KS53aWR0aDtcbn1cbi8qKlxuICogTWVhc3VyZSB0ZXh0IHdpZHRoIHVzaW5nIGEgY2FjaGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBUaGUgZm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIG1lYXN1cmUuXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIG51bWJlcj59IGNhY2hlIEEgbG9va3VwIG9mIGNhY2hlZCB3aWR0aHMgYnkgdGV4dC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHRleHQgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGUpIHtcbiAgICBpZiAodGV4dCBpbiBjYWNoZSkge1xuICAgICAgICByZXR1cm4gY2FjaGVbdGV4dF07XG4gICAgfVxuICAgIHZhciB3aWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCk7XG4gICAgY2FjaGVbdGV4dF0gPSB3aWR0aDtcbiAgICByZXR1cm4gd2lkdGg7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQgdG8gdXNlIGZvciBtZWFzdXJpbmcuXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IGxpbmVzIExpbmVzIHRvIG1lYXN1cmUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHdpZHRocyBBcnJheSB3aWxsIGJlIHBvcHVsYXRlZCB3aXRoIHRoZSB3aWR0aHMgb2ZcbiAqIGVhY2ggbGluZS5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGggb2YgdGhlIHdob2xlIHRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRocyhmb250LCBsaW5lcywgd2lkdGhzKSB7XG4gICAgdmFyIG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xuICAgIHZhciB3aWR0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XG4gICAgICAgIHZhciBjdXJyZW50V2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIGxpbmVzW2ldKTtcbiAgICAgICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgY3VycmVudFdpZHRoKTtcbiAgICAgICAgd2lkdGhzLnB1c2goY3VycmVudFdpZHRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdpZHRoO1xufVxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggWCBvZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBZIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIHJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgICAgICBjb250ZXh0LnJvdGF0ZShyb3RhdGlvbik7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKC1vZmZzZXRYLCAtb2Zmc2V0WSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfG51bGx9IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICogQHBhcmFtIHtMYWJlbHxIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGxhYmVsT3JJbWFnZSBMYWJlbC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5YIE9yaWdpbiBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblkgT3JpZ2luIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gdyBXaWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IHNjYWxlIFNjYWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZHJhd0ltYWdlT3JMYWJlbChjb250ZXh0LCB0cmFuc2Zvcm0sIG9wYWNpdHksIGxhYmVsT3JJbWFnZSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgeCwgeSwgc2NhbGUpIHtcbiAgICBjb250ZXh0LnNhdmUoKTtcbiAgICBpZiAob3BhY2l0eSAhPT0gMSkge1xuICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhICo9IG9wYWNpdHk7XG4gICAgfVxuICAgIGlmICh0cmFuc2Zvcm0pIHtcbiAgICAgICAgY29udGV4dC5zZXRUcmFuc2Zvcm0uYXBwbHkoY29udGV4dCwgdHJhbnNmb3JtKTtcbiAgICB9XG4gICAgaWYgKCAvKiogQHR5cGUgeyp9ICovKGxhYmVsT3JJbWFnZSkuY29udGV4dEluc3RydWN0aW9ucykge1xuICAgICAgICAvLyBsYWJlbFxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pO1xuICAgICAgICBleGVjdXRlTGFiZWxJbnN0cnVjdGlvbnMoLyoqIEB0eXBlIHtMYWJlbH0gKi8gKGxhYmVsT3JJbWFnZSksIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzY2FsZVswXSA8IDAgfHwgc2NhbGVbMV0gPCAwKSB7XG4gICAgICAgIC8vIGZsaXBwZWQgaW1hZ2VcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGVbMF0sIHNjYWxlWzFdKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAobGFiZWxPckltYWdlKSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgMCwgMCwgdywgaCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBpZiBpbWFnZSBub3QgZmxpcHBlZCB0cmFuc2xhdGUgYW5kIHNjYWxlIGNhbiBiZSBhdm9pZGVkXG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGxhYmVsT3JJbWFnZSksIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHcgKiBzY2FsZVswXSwgaCAqIHNjYWxlWzFdKTtcbiAgICB9XG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7TGFiZWx9IGxhYmVsIExhYmVsLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zKGxhYmVsLCBjb250ZXh0KSB7XG4gICAgdmFyIGNvbnRleHRJbnN0cnVjdGlvbnMgPSBsYWJlbC5jb250ZXh0SW5zdHJ1Y3Rpb25zO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvbnRleHRJbnN0cnVjdGlvbnMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gMikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXSkpIHtcbiAgICAgICAgICAgIGNvbnRleHRbY29udGV4dEluc3RydWN0aW9uc1tpXV0uYXBwbHkoY29udGV4dCwgY29udGV4dEluc3RydWN0aW9uc1tpICsgMV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dFtjb250ZXh0SW5zdHJ1Y3Rpb25zW2ldXSA9IGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FudmFzLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvQ29tcG9zaXRlXG4gKi9cbmltcG9ydCBNYXBSZW5kZXJlciBmcm9tICcuL01hcC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBjaGVja2VkRm9udHMgfSBmcm9tICcuLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZXBsYWNlQ2hpbGRyZW4gfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDYW52YXMgbWFwIHJlbmRlcmVyLlxuICogQGFwaVxuICovXG52YXIgQ29tcG9zaXRlTWFwUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbXBvc2l0ZU1hcFJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29tcG9zaXRlTWFwUmVuZGVyZXIobWFwKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1hcCkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZm9udENoYW5nZUxpc3RlbmVyS2V5XyA9IGxpc3RlbihjaGVja2VkRm9udHMsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgbWFwLnJlZHJhd1RleHQuYmluZChtYXApKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHZhciBzdHlsZSA9IF90aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIHN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIHN0eWxlLnpJbmRleCA9ICcwJztcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uY2xhc3NOYW1lID0gQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyBvbC1sYXllcnMnO1xuICAgICAgICB2YXIgY29udGFpbmVyID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUoX3RoaXMuZWxlbWVudF8sIGNvbnRhaW5lci5maXJzdENoaWxkIHx8IG51bGwpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PEhUTUxFbGVtZW50Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNoaWxkcmVuXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAodHlwZSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgaWYgKG1hcC5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBuZXcgUmVuZGVyRXZlbnQodHlwZSwgdW5kZWZpbmVkLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgIG1hcC5kaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuZm9udENoYW5nZUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgIHRoaXMuZWxlbWVudF8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlci5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxjdWxhdGVNYXRyaWNlczJEKGZyYW1lU3RhdGUpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsIGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYS56SW5kZXggLSBiLnpJbmRleDtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl8ubGVuZ3RoID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9sYXllci9CYXNlVmVjdG9yLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGRlY2x1dHRlckxheWVycyA9IFtdO1xuICAgICAgICB2YXIgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzQXJyYXlbaV07XG4gICAgICAgICAgICBmcmFtZVN0YXRlLmxheWVySW5kZXggPSBpO1xuICAgICAgICAgICAgaWYgKCFpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSB8fFxuICAgICAgICAgICAgICAgIChsYXllclN0YXRlLnNvdXJjZVN0YXRlICE9IFNvdXJjZVN0YXRlLlJFQURZICYmXG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuc291cmNlU3RhdGUgIT0gU291cmNlU3RhdGUuVU5ERUZJTkVEKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gbGF5ZXIucmVuZGVyKGZyYW1lU3RhdGUsIHByZXZpb3VzRWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChlbGVtZW50ICE9PSBwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoJ2dldERlY2x1dHRlcicgaW4gbGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXJMYXllcnMucHVzaChcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL2xheWVyL0Jhc2VWZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IGRlY2x1dHRlckxheWVycy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgZGVjbHV0dGVyTGF5ZXJzW2ldLnJlbmRlckRlY2x1dHRlcihmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICByZXBsYWNlQ2hpbGRyZW4odGhpcy5lbGVtZW50XywgdGhpcy5jaGlsZHJlbl8pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBPU1RDT01QT1NFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2VcIikuZGVmYXVsdD4sIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrIExheWVyXG4gICAgICogICAgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlXCIpLmRlZmF1bHQ+KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbGF5ZXJGaWx0ZXIpIHtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIHZhciBudW1MYXllcnMgPSBsYXllclN0YXRlcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSBudW1MYXllcnMgLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc1tpXTtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSAmJlxuICAgICAgICAgICAgICAgIGluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpICYmXG4gICAgICAgICAgICAgICAgbGF5ZXJGaWx0ZXIobGF5ZXIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSBsYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbGF5ZXJSZW5kZXJlci5nZXREYXRhQXRQaXhlbChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2sobGF5ZXIsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tcG9zaXRlTWFwUmVuZGVyZXI7XG59KE1hcFJlbmRlcmVyKSk7XG5leHBvcnQgZGVmYXVsdCBDb21wb3NpdGVNYXBSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbXBvc2l0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvbkV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjYWRkXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEFERDogJ2FkZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNyZW1vdmVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUkVNT1ZFOiAncmVtb3ZlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uRXZlbnRUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvblxuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBMRU5HVEg6ICdsZW5ndGgnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXNcbiAqIHR5cGUuXG4gKi9cbnZhciBDb2xsZWN0aW9uRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbGxlY3Rpb25FdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0X2VsZW1lbnRdIEVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfaW5kZXhdIFRoZSBpbmRleCBvZiB0aGUgYWRkZWQgb3IgcmVtb3ZlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb25FdmVudCh0eXBlLCBvcHRfZWxlbWVudCwgb3B0X2luZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZWxlbWVudCB0aGF0IGlzIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnQgPSBvcHRfZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYWRkZWQgb3IgcmVtb3ZlZCBlbGVtZW50LlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbmRleCA9IG9wdF9pbmRleDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ29sbGVjdGlvbkV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgQ29sbGVjdGlvbkV2ZW50IH07XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6bGVuZ3RoJywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8J2FkZCd8J3JlbW92ZScsIENvbGxlY3Rpb25FdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6bGVuZ3RoJ3wnYWRkJ3wncmVtb3ZlJyxSZXR1cm4+fSBDb2xsZWN0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1bmlxdWU9ZmFsc2VdIERpc2FsbG93IHRoZSBzYW1lIGl0ZW0gZnJvbSBiZWluZyBhZGRlZCB0b1xuICogdGhlIGNvbGxlY3Rpb24gdHdpY2UuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQW4gZXhwYW5kZWQgdmVyc2lvbiBvZiBzdGFuZGFyZCBKUyBBcnJheSwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yXG4gKiBtYW5pcHVsYXRpb24uIEFkZCBhbmQgcmVtb3ZlIGNoYW5nZXMgdG8gdGhlIENvbGxlY3Rpb24gdHJpZ2dlciBhIENvbGxlY3Rpb25cbiAqIGV2ZW50LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjb3ZlciBjaGFuZ2VzIHRvIHRoZSBvYmplY3RzIF93aXRoaW5fIHRoZVxuICogQ29sbGVjdGlvbjsgdGhleSB0cmlnZ2VyIGV2ZW50cyBvbiB0aGUgYXBwcm9wcmlhdGUgb2JqZWN0LCBub3Qgb24gdGhlXG4gKiBDb2xsZWN0aW9uIGFzIGEgd2hvbGUuXG4gKlxuICogQGZpcmVzIENvbGxlY3Rpb25FdmVudFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAYXBpXG4gKi9cbnZhciBDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb2xsZWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8VD59IFtvcHRfYXJyYXldIEFycmF5LlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBDb2xsZWN0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbihvcHRfYXJyYXksIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuaXF1ZV8gPSAhIW9wdGlvbnMudW5pcXVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxUPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFycmF5XyA9IG9wdF9hcnJheSA/IG9wdF9hcnJheSA6IFtdO1xuICAgICAgICBpZiAoX3RoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gX3RoaXMuYXJyYXlfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hc3NlcnRVbmlxdWVfKF90aGlzLmFycmF5X1tpXSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgZWxlbWVudHMgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmdldExlbmd0aCgpID4gMCkge1xuICAgICAgICAgICAgdGhpcy5wb3AoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIGVsZW1lbnRzIHRvIHRoZSBjb2xsZWN0aW9uLiAgVGhpcyBwdXNoZXMgZWFjaCBpdGVtIGluIHRoZSBwcm92aWRlZCBhcnJheVxuICAgICAqIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHshQXJyYXk8VD59IGFyciBBcnJheS5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPFQ+fSBUaGlzIGNvbGxlY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMucHVzaChhcnJbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZSBvdmVyIGVhY2ggZWxlbWVudCwgY2FsbGluZyB0aGUgcHJvdmlkZWQgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIsIEFycmF5PFQ+KTogKn0gZiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuICAgICAqICAgICBmb3IgZXZlcnkgZWxlbWVudC4gVGhpcyBmdW5jdGlvbiB0YWtlcyAzIGFyZ3VtZW50cyAodGhlIGVsZW1lbnQsIHRoZVxuICAgICAqICAgICBpbmRleCBhbmQgdGhlIGFycmF5KS4gVGhlIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheV87XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGYoYXJyYXlbaV0sIGksIGFycmF5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSB1bmRlcmx5aW5nIEFycmF5IG9iamVjdC4gV2FybmluZzogaWYgdGhlIGFycmF5XG4gICAgICogaXMgbXV0YXRlZCwgbm8gZXZlbnRzIHdpbGwgYmUgZGlzcGF0Y2hlZCBieSB0aGUgY29sbGVjdGlvbiwgYW5kIHRoZVxuICAgICAqIGNvbGxlY3Rpb24ncyBcImxlbmd0aFwiIHByb3BlcnR5IHdvbid0IGJlIGluIHN5bmMgd2l0aCB0aGUgYWN0dWFsIGxlbmd0aFxuICAgICAqIG9mIHRoZSBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8VD59IEFycmF5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHJldHVybiB7VH0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxlbmd0aCBvZiB0aGUgYXJyYXkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoUHJvcGVydHkuTEVOR1RIKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluc2VydCBhbiBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmluc2VydEF0ID0gZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDAsIGVsZW0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0sIGluZGV4KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgY29sbGVjdGlvbiBhbmQgcmV0dXJuIGl0LlxuICAgICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmdldExlbmd0aCgpIC0gMSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnNlcnQgdGhlIHByb3ZpZGVkIGVsZW1lbnQgYXQgdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyBsZW5ndGggb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG4gPSB0aGlzLmdldExlbmd0aCgpO1xuICAgICAgICB0aGlzLmluc2VydEF0KG4sIGVsZW0pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50IGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGVsZW1lbnQgb3IgdW5kZWZpbmVkIGlmIG5vbmUgZm91bmQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIHZhciBhcnIgPSB0aGlzLmFycmF5XztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChhcnJbaV0gPT09IGVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleCBhbmQgcmV0dXJuIGl0LlxuICAgICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBkb2VzIG5vdCBjb250YWluIHRoaXMgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBWYWx1ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdmFyIHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgICAgIHRoaXMuYXJyYXlfLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgcHJldiwgaW5kZXgpKTtcbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuc2V0QXQgPSBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLmdldExlbmd0aCgpO1xuICAgICAgICBpZiAoaW5kZXggPCBuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0sIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5hcnJheV9baW5kZXhdID0gZWxlbTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2LCBpbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0sIGluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gbjsgaiA8IGluZGV4OyArK2opIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydEF0KGosIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluc2VydEF0KGluZGV4LCBlbGVtKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVMZW5ndGhfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5MRU5HVEgsIHRoaXMuYXJyYXlfLmxlbmd0aCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2V4Y2VwdF0gT3B0aW9uYWwgaW5kZXggdG8gaWdub3JlLlxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmFzc2VydFVuaXF1ZV8gPSBmdW5jdGlvbiAoZWxlbSwgb3B0X2V4Y2VwdCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcnJheV9baV0gPT09IGVsZW0gJiYgaSAhPT0gb3B0X2V4Y2VwdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcig1OCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDb2xsZWN0aW9uO1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBDb2xsZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29sbGVjdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0dyb3VwXG4gKi9cbmltcG9ydCBCYXNlTGF5ZXIgZnJvbSAnLi9CYXNlLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduLCBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBnZXRJbnRlcnNlY3Rpb24gfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7J2FkZGxheWVyJ3wncmVtb3ZlbGF5ZXInfSBFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGxheWVyIGdyb3VwIHRyaWdnZXJzICdhZGRsYXllcicgYW5kICdyZW1vdmVsYXllcicgZXZlbnRzIHdoZW4gbGF5ZXJzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBncm91cCBvciBvbmUgb2YgaXRzIGNoaWxkIGdyb3Vwcy4gIFdoZW4gYSBsYXllciBncm91cCBpcyBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gYW5vdGhlciBsYXllciBncm91cCxcbiAqIGEgc2luZ2xlIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIChpbnN0ZWFkIG9mIG9uZSBwZXIgbGF5ZXIgaW4gdGhlIGdyb3VwIGFkZGVkIG9yIHJlbW92ZWQpLlxuICovXG52YXIgR3JvdXBFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR3JvdXBFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0V2ZW50VHlwZX0gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge0Jhc2VMYXllcn0gbGF5ZXIgVGhlIGxheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEdyb3VwRXZlbnQodHlwZSwgbGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhZGRlZCBvciByZW1vdmVkIGxheWVyLlxuICAgICAgICAgKiBAdHlwZSB7QmFzZUxheWVyfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllciA9IGxheWVyO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBHcm91cEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgR3JvdXBFdmVudCB9O1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpsYXllcnMnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfCdjaGFuZ2U6bGF5ZXJzJywgUmV0dXJuPn0gR3JvdXBPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD58aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gW2xheWVyc10gQ2hpbGQgbGF5ZXJzLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICAgIExBWUVSUzogJ2xheWVycycsXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBvZiBsYXllcnMgdGhhdCBhcmUgaGFuZGxlZCB0b2dldGhlci5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIGdyb3VwL0NvbGxlY3Rpb24gY2hhbmdlcy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBMYXllckdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYXllckdyb3VwLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyR3JvdXAob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gLyoqIEB0eXBlIHtPcHRpb25zfSAqLyAoYXNzaWduKHt9LCBvcHRpb25zKSk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5sYXllcnM7XG4gICAgICAgIHZhciBsYXllcnMgPSBvcHRpb25zLmxheWVycztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7R3JvdXBPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtHcm91cE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7R3JvdXBPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyS2V5c18gPSB7fTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoUHJvcGVydHkuTEFZRVJTLCBfdGhpcy5oYW5kbGVMYXllcnNDaGFuZ2VkXyk7XG4gICAgICAgIGlmIChsYXllcnMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxheWVycykpIHtcbiAgICAgICAgICAgICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbihsYXllcnMuc2xpY2UoKSwgeyB1bmlxdWU6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhsYXllcnMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJywgNDMpOyAvLyBFeHBlY3RlZCBgbGF5ZXJzYCB0byBiZSBhbiBhcnJheSBvciBhIGBDb2xsZWN0aW9uYFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGF5ZXJzID0gbmV3IENvbGxlY3Rpb24odW5kZWZpbmVkLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5zZXRMYXllcnMobGF5ZXJzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc0NoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVycygpO1xuICAgICAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgdGhpcy5oYW5kbGVMYXllcnNBZGRfLCB0aGlzKSwgbGlzdGVuKGxheWVycywgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHRoaXMuaGFuZGxlTGF5ZXJzUmVtb3ZlXywgdGhpcykpO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLmxpc3RlbmVyS2V5c18pIHtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tpZF0uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhcih0aGlzLmxpc3RlbmVyS2V5c18pO1xuICAgICAgICB2YXIgbGF5ZXJzQXJyYXkgPSBsYXllcnMuZ2V0QXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJzQXJyYXkubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJzQXJyYXlbaV07XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyTGF5ZXJMaXN0ZW5lcnNfKGxheWVyKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgnYWRkbGF5ZXInLCBsYXllcikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtCYXNlTGF5ZXJ9IGxheWVyIFRoZSBsYXllci5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5yZWdpc3RlckxheWVyTGlzdGVuZXJzXyA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGlzdGVuZXJLZXlzID0gW1xuICAgICAgICAgICAgbGlzdGVuKGxheWVyLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICBdO1xuICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllckdyb3VwKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcktleXMucHVzaChsaXN0ZW4obGF5ZXIsICdhZGRsYXllcicsIHRoaXMuaGFuZGxlTGF5ZXJHcm91cEFkZF8sIHRoaXMpLCBsaXN0ZW4obGF5ZXIsICdyZW1vdmVsYXllcicsIHRoaXMuaGFuZGxlTGF5ZXJHcm91cFJlbW92ZV8sIHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19bZ2V0VWlkKGxheWVyKV0gPSBsaXN0ZW5lcktleXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dyb3VwRXZlbnR9IGV2ZW50IFRoZSBsYXllciBncm91cCBldmVudC5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllckdyb3VwQWRkXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ2FkZGxheWVyJywgZXZlbnQubGF5ZXIpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7R3JvdXBFdmVudH0gZXZlbnQgVGhlIGxheWVyIGdyb3VwIGV2ZW50LlxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyR3JvdXBSZW1vdmVfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgncmVtb3ZlbGF5ZXInLCBldmVudC5sYXllcikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc0FkZF8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9ICovIChjb2xsZWN0aW9uRXZlbnQuZWxlbWVudCk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJMYXllckxpc3RlbmVyc18obGF5ZXIpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ2FkZGxheWVyJywgbGF5ZXIpKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBjb2xsZWN0aW9uRXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzUmVtb3ZlXyA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdH0gKi8gKGNvbGxlY3Rpb25FdmVudC5lbGVtZW50KTtcbiAgICAgICAgdmFyIGtleSA9IGdldFVpZChsYXllcik7XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1trZXldLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBHcm91cEV2ZW50KCdyZW1vdmVsYXllcicsIGxheWVyKSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgICAqIGluIHRoaXMgZ3JvdXAuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IENvbGxlY3Rpb24gb2ZcbiAgICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZSBsYXllcnN9IHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBncm91cC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSAqLyAodGhpcy5nZXQoUHJvcGVydHkuTEFZRVJTKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbiBjb2xsZWN0aW9ufSBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyc31cbiAgICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBDb2xsZWN0aW9uIG9mXG4gICAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2UgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuc2V0TGF5ZXJzID0gZnVuY3Rpb24gKGxheWVycykge1xuICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXMuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudExheWVycyA9IGNvbGxlY3Rpb24uZ2V0QXJyYXkoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGN1cnJlbnRMYXllcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgncmVtb3ZlbGF5ZXInLCBjdXJyZW50TGF5ZXJzW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuTEFZRVJTLCBsYXllcnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBbb3B0X2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiAob3B0X2FycmF5KSB7XG4gICAgICAgIHZhciBhcnJheSA9IG9wdF9hcnJheSAhPT0gdW5kZWZpbmVkID8gb3B0X2FycmF5IDogW107XG4gICAgICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmdldExheWVyc0FycmF5KGFycmF5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGF5ZXIgc3RhdGVzIGxpc3QgYW5kIHVzZSB0aGlzIGdyb3VwcyB6LWluZGV4IGFzIHRoZSBkZWZhdWx0XG4gICAgICogZm9yIGFsbCBsYXllcnMgaW4gdGhpcyBhbmQgbmVzdGVkIGdyb3VwcywgaWYgaXQgaXMgdW5zZXQgYXQgdGhpcyBwb2ludC5cbiAgICAgKiBJZiBvcHRfc3RhdGVzIGlzIG5vdCBwcm92aWRlZCBhbmQgdGhpcyBncm91cCdzIHotaW5kZXggaXMgdW5kZWZpbmVkXG4gICAgICogMCBpcyB1c2VkIGEgdGhlIGRlZmF1bHQgei1pbmRleC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbb3B0X3N0YXRlc10gT3B0aW9uYWwgbGlzdFxuICAgICAqIG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgdmFyIHN0YXRlcyA9IG9wdF9zdGF0ZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICAgICAgdmFyIHBvcyA9IHN0YXRlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmdldExheWVyU3RhdGVzQXJyYXkoc3RhdGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBvd25MYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKCk7XG4gICAgICAgIHZhciBkZWZhdWx0WkluZGV4ID0gb3duTGF5ZXJTdGF0ZS56SW5kZXg7XG4gICAgICAgIGlmICghb3B0X3N0YXRlcyAmJiBvd25MYXllclN0YXRlLnpJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZWZhdWx0WkluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gcG9zLCBpaSA9IHN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IHN0YXRlc1tpXTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUub3BhY2l0eSAqPSBvd25MYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICAgICAgICBsYXllclN0YXRlLnZpc2libGUgPSBsYXllclN0YXRlLnZpc2libGUgJiYgb3duTGF5ZXJTdGF0ZS52aXNpYmxlO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uID0gTWF0aC5taW4obGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uLCBvd25MYXllclN0YXRlLm1heFJlc29sdXRpb24pO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgobGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uLCBvd25MYXllclN0YXRlLm1pblJlc29sdXRpb24pO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5taW5ab29tID0gTWF0aC5tYXgobGF5ZXJTdGF0ZS5taW5ab29tLCBvd25MYXllclN0YXRlLm1pblpvb20pO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5tYXhab29tID0gTWF0aC5taW4obGF5ZXJTdGF0ZS5tYXhab29tLCBvd25MYXllclN0YXRlLm1heFpvb20pO1xuICAgICAgICAgICAgaWYgKG93bkxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IGdldEludGVyc2VjdGlvbihsYXllclN0YXRlLmV4dGVudCwgb3duTGF5ZXJTdGF0ZS5leHRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQgPSBvd25MYXllclN0YXRlLmV4dGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGF5ZXJTdGF0ZS56SW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuekluZGV4ID0gZGVmYXVsdFpJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNvdXJjZVN0YXRlLlJFQURZO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyR3JvdXA7XG59KEJhc2VMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgTGF5ZXJHcm91cDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyb3VwLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvTWFwRXZlbnRcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5QbHVnZ2FibGVNYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBldmVudC5cbiAqL1xudmFyIE1hcEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBbb3B0X2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEV2ZW50KHR5cGUsIG1hcCwgb3B0X2ZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgd2hlcmUgdGhlIGV2ZW50IG9jY3VycmVkLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwID0gbWFwO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZyYW1lIHN0YXRlIGF0IHRoZSB0aW1lIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdF9mcmFtZVN0YXRlIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gTWFwRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEV2ZW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50XG4gKi9cbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGJyb3dzZXIgZXZlbnRzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvUGx1Z2dhYmxlTWFwflBsdWdnYWJsZU1hcH0gZm9yIHdoaWNoIGV2ZW50cyB0cmlnZ2VyIGEgbWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAdGVtcGxhdGUge1VJRXZlbnR9IEVWRU5UXG4gKi9cbnZhciBNYXBCcm93c2VyRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcEJyb3dzZXJFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAcGFyYW0ge0VWRU5UfSBvcmlnaW5hbEV2ZW50IE9yaWdpbmFsIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9kcmFnZ2luZ10gSXMgdGhlIG1hcCBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZD9cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBbb3B0X2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEJyb3dzZXJFdmVudCh0eXBlLCBtYXAsIG9yaWdpbmFsRXZlbnQsIG9wdF9kcmFnZ2luZywgb3B0X2ZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge0VWRU5UfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgaWYgdGhlIG1hcCBpcyBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZC4gT25seSBzZXQgZm9yXG4gICAgICAgICAqIGBQT0lOVEVSRFJBR2AgYW5kIGBQT0lOVEVSTU9WRWAgZXZlbnRzLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kcmFnZ2luZyA9IG9wdF9kcmFnZ2luZyAhPT0gdW5kZWZpbmVkID8gb3B0X2RyYWdnaW5nIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUsIFwicGl4ZWxcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5waXhlbF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBpeGVsXyA9IHRoaXMubWFwLmdldEV2ZW50UGl4ZWwodGhpcy5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBpeGVsXztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucGl4ZWxfID0gcGl4ZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZSwgXCJjb29yZGluYXRlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuICBUaGlzIHdpbGwgYmUgaW4gdGhlIHVzZXJcbiAgICAgICAgICogcHJvamVjdGlvbiBpZiBvbmUgaXMgc2V0LiAgT3RoZXJ3aXNlIGl0IHdpbGwgYmUgaW4gdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb29yZGluYXRlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZV8gPSB0aGlzLm1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMucGl4ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRpbmF0ZV87XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZV8gPSBjb29yZGluYXRlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBhY3Rpb24uXG4gICAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5wcmV2ZW50RGVmYXVsdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoJ3ByZXZlbnREZWZhdWx0JyBpbiB0aGlzLm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7VUlFdmVudH0gKi8gKHRoaXMub3JpZ2luYWxFdmVudCkucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgZnVydGhlciBwcm9wYWdhdGlvbiBvZiB0aGUgY3VycmVudCBldmVudC5cbiAgICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnN0b3BQcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uLmNhbGwodGhpcyk7XG4gICAgICAgIGlmICgnc3RvcFByb3BhZ2F0aW9uJyBpbiB0aGlzLm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7VUlFdmVudH0gKi8gKHRoaXMub3JpZ2luYWxFdmVudCkuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNYXBCcm93c2VyRXZlbnQ7XG59KE1hcEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFR5cGVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuLyoqXG4gKiBDb25zdGFudHMgZm9yIGV2ZW50IG5hbWVzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIEEgdHJ1ZSBzaW5nbGUgY2xpY2sgd2l0aCBubyBkcmFnZ2luZyBhbmQgbm8gZG91YmxlIGNsaWNrLiBOb3RlIHRoYXQgdGhpc1xuICAgICAqIGV2ZW50IGlzIGRlbGF5ZWQgYnkgMjUwIG1zIHRvIGVuc3VyZSB0aGF0IGl0IGlzIG5vdCBhIGRvdWJsZSBjbGljay5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjc2luZ2xlY2xpY2tcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU0lOR0xFQ0xJQ0s6ICdzaW5nbGVjbGljaycsXG4gICAgLyoqXG4gICAgICogQSBjbGljayB3aXRoIG5vIGRyYWdnaW5nLiBBIGRvdWJsZSBjbGljayB3aWxsIGZpcmUgdHdvIG9mIHRoaXMuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2NsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENMSUNLOiBFdmVudFR5cGUuQ0xJQ0ssXG4gICAgLyoqXG4gICAgICogQSB0cnVlIGRvdWJsZSBjbGljaywgd2l0aCBubyBkcmFnZ2luZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjZGJsY2xpY2tcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgREJMQ0xJQ0s6IEV2ZW50VHlwZS5EQkxDTElDSyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHBvaW50ZXIgaXMgZHJhZ2dlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcmRyYWdcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9JTlRFUkRSQUc6ICdwb2ludGVyZHJhZycsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIG1vdmVkLiBOb3RlIHRoYXQgb24gdG91Y2ggZGV2aWNlcyB0aGlzIGlzXG4gICAgICogdHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBpcyBwYW5uZWQsIHNvIGlzIG5vdCB0aGUgc2FtZSBhcyBtb3VzZW1vdmUuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJtb3ZlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICAgIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICAgIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gICAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gICAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICAgIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gICAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuLyoqKlxuICogQHR5cGVkZWYgeydzaW5nbGVjbGljayd8J2NsaWNrJ3wnZGJsY2xpY2snfCdwb2ludGVyZHJhZyd8J3BvaW50ZXJtb3ZlJ30gVHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBDb25zdGFudHMgZm9yIGV2ZW50IG5hbWVzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICAgIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICAgIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gICAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gICAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICAgIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gICAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRIYW5kbGVyXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCB7IFBBU1NJVkVfRVZFTlRfTElTVEVORVJTIH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbnZhciBNYXBCcm93c2VyRXZlbnRIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBCcm93c2VyRXZlbnRIYW5kbGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIFRoZSBtYXAgd2l0aCB0aGUgdmlld3BvcnQgdG8gbGlzdGVuIHRvIGV2ZW50cyBvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21vdmVUb2xlcmFuY2VdIFRoZSBtaW5pbWFsIGRpc3RhbmNlIHRoZSBwb2ludGVyIG11c3QgdHJhdmVsIHRvIHRyaWdnZXIgYSBtb3ZlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIobWFwLCBtb3ZlVG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1hcCkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdGhlIGVsZW1lbnQgdGhhdCB3ZSB3aWxsIGxpc3RlbiB0byB0aGUgcmVhbCBldmVudHMgb24uXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHthbnl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jbGlja1RpbWVvdXRJZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbXVsYXRlIGRibGNsaWNrIGFuZCBzaW5nbGVjbGljay4gV2lsbCBiZSB0cnVlIHdoZW4gb25seSBvbmUgcG9pbnRlciBpcyBhY3RpdmUuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZW11bGF0ZUNsaWNrc18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kcmFnTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1vdmVUb2xlcmFuY2VfID0gbW92ZVRvbGVyYW5jZSA9PT0gdW5kZWZpbmVkID8gMSA6IG1vdmVUb2xlcmFuY2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbW9zdCByZWNlbnQgXCJkb3duXCIgdHlwZSBldmVudCAob3IgbnVsbCBpZiBub25lIGhhdmUgb2NjdXJyZWQpLlxuICAgICAgICAgKiBTZXQgb24gcG9pbnRlcmRvd24uXG4gICAgICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kb3duXyA9IG51bGw7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMubWFwXy5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxudW1iZXIsIGJvb2xlYW4+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2tlZFRvdWNoZXNfID0ge307XG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBsaXN0ZW4oZWxlbWVudCwgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgX3RoaXMuaGFuZGxlUG9pbnRlckRvd25fLCBfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVsYXllZExpc3RlbmVyS2V5XyA9IGxpc3RlbihlbGVtZW50LCBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCBfdGhpcy5yZWxheUV2ZW50XywgX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXyA9IF90aGlzLmhhbmRsZVRvdWNoTW92ZV8uYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlRPVUNITU9WRSwgX3RoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmVtdWxhdGVDbGlja18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5jbGlja1RpbWVvdXRJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZG91YmxlLWNsaWNrXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXRJZF8pO1xuICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNsaWNrXG4gICAgICAgICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAvKiogQHRoaXMge01hcEJyb3dzZXJFdmVudEhhbmRsZXJ9ICovXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMjUwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogS2VlcHMgdHJhY2sgb24gaG93IG1hbnkgcG9pbnRlcnMgYXJlIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gcG9pbnRlckV2ZW50O1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCB8fFxuICAgICAgICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUwpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRUb3VjaGVzX1tldmVudC5wb2ludGVySWRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgICAgICAgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmVQb2ludGVyc18gPSBPYmplY3Qua2V5cyh0aGlzLnRyYWNrZWRUb3VjaGVzXykubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyVXBfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIC8vIFdlIGVtdWxhdGUgY2xpY2sgZXZlbnRzIG9uIGxlZnQgbW91c2UgYnV0dG9uIGNsaWNrLCB0b3VjaCBjb250YWN0LCBhbmQgcGVuXG4gICAgICAgIC8vIGNvbnRhY3QuIGlzTW91c2VBY3Rpb25CdXR0b24gcmV0dXJucyB0cnVlIGluIHRoZXNlIGNhc2VzIChldnQuYnV0dG9uIGlzIHNldFxuICAgICAgICAvLyB0byAwKS5cbiAgICAgICAgLy8gU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXNcbiAgICAgICAgLy8gV2Ugb25seSBmaXJlIGNsaWNrLCBzaW5nbGVjbGljaywgYW5kIGRvdWJsZWNsaWNrIGlmIG5vYm9keSBoYXMgY2FsbGVkXG4gICAgICAgIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCkuXG4gICAgICAgIGlmICh0aGlzLmVtdWxhdGVDbGlja3NfICYmXG4gICAgICAgICAgICAhbmV3RXZlbnQuZGVmYXVsdFByZXZlbnRlZCAmJlxuICAgICAgICAgICAgIXRoaXMuZHJhZ2dpbmdfICYmXG4gICAgICAgICAgICB0aGlzLmlzTW91c2VBY3Rpb25CdXR0b25fKHBvaW50ZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZW11bGF0ZUNsaWNrXyh0aGlzLmRvd25fKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hY3RpdmVQb2ludGVyc18gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRvd25fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGxlZnQgbW91c2UgYnV0dG9uIHdhcyBwcmVzc2VkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaXNNb3VzZUFjdGlvbkJ1dHRvbl8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyRG93bl8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuZW11bGF0ZUNsaWNrc18gPSB0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9PT0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIC8vIFN0b3JlIGEgY29weSBvZiB0aGUgZG93biBldmVudFxuICAgICAgICB0aGlzLmRvd25fID0gLyoqIEB0eXBlIHtQb2ludGVyRXZlbnR9ICovICh7fSk7XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHBvaW50ZXJFdmVudCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gcG9pbnRlckV2ZW50W3Byb3BlcnR5XTtcbiAgICAgICAgICAgIHRoaXMuZG93bl9bcHJvcGVydHldID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gVk9JRCA6IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMubWFwXy5nZXRPd25lckRvY3VtZW50KCk7XG4gICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKGRvYywgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSwgdGhpcy5oYW5kbGVQb2ludGVyTW92ZV8sIHRoaXMpLCBsaXN0ZW4oZG9jLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSwgXG4gICAgICAgICAgICAvKiBOb3RlIHRoYXQgdGhlIGxpc3RlbmVyIGZvciBgcG9pbnRlcmNhbmNlbCBpcyBzZXQgdXAgb25cbiAgICAgICAgICAgICAqIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AgYW5kIG5vdCBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgbGlrZVxuICAgICAgICAgICAgICogdGhlIGBwb2ludGVydXBgIGFuZCBgcG9pbnRlcm1vdmVgIGxpc3RlbmVycy5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBUaGUgcmVhc29uIGZvciB0aGlzIGlzIHRoZSBmb2xsb3dpbmc6IGBUb3VjaFNvdXJjZS52YWN1dW1Ub3VjaGVzXygpYFxuICAgICAgICAgICAgICogaXNzdWVzIGBwb2ludGVyY2FuY2VsYCBldmVudHMsIHdoZW4gdGhlcmUgd2FzIG5vIGB0b3VjaGVuZGAgZm9yIGFcbiAgICAgICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gTm93LCBsZXQncyBzYXkgYSBmaXJzdCBgdG91Y2hzdGFydGAgaXMgcmVnaXN0ZXJlZCBvblxuICAgICAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYC4gVGhlIGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBpcyBzZXQgdXAuXG4gICAgICAgICAgICAgKiBCdXQgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGRvZXNuJ3Qga25vdyBhYm91dCB0aGUgZmlyc3RcbiAgICAgICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gSWYgdGhlcmUgaXMgbm8gYHRvdWNoZW5kYCBmb3IgdGhlIGB0b3VjaHN0YXJ0YCwgd2UgY2FuXG4gICAgICAgICAgICAgKiBvbmx5IHJlY2VpdmUgYSBgdG91Y2hjYW5jZWxgIGZyb20gYHBvaW50ZXJFdmVudEhhbmRsZXJfYCwgYmVjYXVzZSBpdCBpc1xuICAgICAgICAgICAgICogb25seSByZWdpc3RlcmVkIHRoZXJlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsaXN0ZW4odGhpcy5lbGVtZW50XywgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRfLmdldFJvb3ROb2RlICYmIHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUoKSAhPT0gZG9jKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbih0aGlzLmVsZW1lbnRfLmdldFJvb3ROb2RlKCksIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyTW92ZV8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIC8vIEJldHdlZW4gcG9pbnRlcmRvd24gYW5kIHBvaW50ZXJ1cCwgcG9pbnRlcm1vdmUgZXZlbnRzIGFyZSB0cmlnZ2VyZWQuXG4gICAgICAgIC8vIFRvIGF2b2lkIGEgJ2ZhbHNlJyB0b3VjaG1vdmUgZXZlbnQgdG8gYmUgZGlzcGF0Y2hlZCwgd2UgdGVzdCBpZiB0aGUgcG9pbnRlclxuICAgICAgICAvLyBtb3ZlZCBhIHNpZ25pZmljYW50IGRpc3RhbmNlLlxuICAgICAgICBpZiAodGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2luZ18gPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCwgdGhpcy5kcmFnZ2luZ18pO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogV3JhcCBhbmQgcmVsYXkgYSBwb2ludGVyIGV2ZW50LiAgTm90ZSB0aGF0IHRoaXMgcmVxdWlyZXMgdGhhdCB0aGUgdHlwZVxuICAgICAqIHN0cmluZyBmb3IgdGhlIE1hcEJyb3dzZXJFdmVudCBtYXRjaGVzIHRoZSBQb2ludGVyRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnJlbGF5RXZlbnRfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB0aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF8gPSBwb2ludGVyRXZlbnQ7XG4gICAgICAgIHZhciBkcmFnZ2luZyA9ICEhKHRoaXMuZG93bl8gJiYgdGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwQnJvd3NlckV2ZW50KHBvaW50ZXJFdmVudC50eXBlLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCwgZHJhZ2dpbmcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZsZXhpYmxlIGhhbmRsaW5nIG9mIGEgYHRvdWNoLWFjdGlvbjogbm9uZWAgY3NzIGVxdWl2YWxlbnQ6IGJlY2F1c2UgY2FsbGluZ1xuICAgICAqIGBwcmV2ZW50RGVmYXVsdCgpYCBvbiBhIGBwb2ludGVybW92ZWAgZXZlbnQgZG9lcyBub3Qgc3RvcCBuYXRpdmUgcGFnZSBzY3JvbGxpbmdcbiAgICAgKiBhbmQgem9vbWluZywgd2UgYWxzbyBsaXN0ZW4gZm9yIGB0b3VjaG1vdmVgIGFuZCBjYWxsIGBwcmV2ZW50RGVmYXVsdCgpYCBvbiBpdFxuICAgICAqIHdoZW4gYW4gaW50ZXJhY3Rpb24gKGN1cnJlbnRseSBgRHJhZ1BhbmAgaGFuZGxlcyB0aGUgZXZlbnQuXG4gICAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVRvdWNoTW92ZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gRHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9tcGl6ZW5iZXJnL2VsbS1wZXAvaXNzdWVzLzIsIGB0aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF9gXG4gICAgICAgIC8vIG1heSBub3QgYmUgaW5pdGlhbGl6ZWQgeWV0IHdoZW4gd2UgZ2V0IGhlcmUgb24gYSBwbGF0Zm9ybSB3aXRob3V0IG5hdGl2ZSBwb2ludGVyIGV2ZW50cy5cbiAgICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSB0aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF87XG4gICAgICAgIGlmICgoIW9yaWdpbmFsRXZlbnQgfHwgb3JpZ2luYWxFdmVudC5kZWZhdWx0UHJldmVudGVkKSAmJlxuICAgICAgICAgICAgKHR5cGVvZiBldmVudC5jYW5jZWxhYmxlICE9PSAnYm9vbGVhbicgfHwgZXZlbnQuY2FuY2VsYWJsZSA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIG1vdmluZy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmlzTW92aW5nXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmRyYWdnaW5nXyB8fFxuICAgICAgICAgICAgTWF0aC5hYnMocG9pbnRlckV2ZW50LmNsaWVudFggLSB0aGlzLmRvd25fLmNsaWVudFgpID5cbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVUb2xlcmFuY2VfIHx8XG4gICAgICAgICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WSAtIHRoaXMuZG93bl8uY2xpZW50WSkgPiB0aGlzLm1vdmVUb2xlcmFuY2VfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlRPVUNITU9WRSwgdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8pO1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmVsZW1lbnRfID0gbnVsbDtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xufShUYXJnZXQpKTtcbmV4cG9ydCBkZWZhdWx0IE1hcEJyb3dzZXJFdmVudEhhbmRsZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnRIYW5kbGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbWFwIGZyYW1lIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjcG9zdHJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBzdGFydHMgbW92aW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjbW92ZXN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1PVkVTVEFSVDogJ21vdmVzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBtYXAgaXMgbW92ZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3ZlZW5kXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1PVkVFTkQ6ICdtb3ZlZW5kJyxcbn07XG4vKioqXG4gKiBAdHlwZWRlZiB7J3Bvc3RyZW5kZXInfCdtb3Zlc3RhcnQnfCdtb3ZlZW5kJ30gVHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBQcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBMQVlFUkdST1VQOiAnbGF5ZXJncm91cCcsXG4gICAgU0laRTogJ3NpemUnLFxuICAgIFRBUkdFVDogJ3RhcmdldCcsXG4gICAgVklFVzogJ3ZpZXcnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcFByb3BlcnR5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWVcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgRFJPUCA9IEluZmluaXR5O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcmlvcml0eSBxdWV1ZS5cbiAqXG4gKiBUaGUgaW1wbGVtZW50YXRpb24gaXMgaW5zcGlyZWQgZnJvbSB0aGUgQ2xvc3VyZSBMaWJyYXJ5J3MgSGVhcCBjbGFzcyBhbmRcbiAqIFB5dGhvbidzIGhlYXBxIG1vZHVsZS5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL3N0cnVjdHMvaGVhcC5qc1xuICogYW5kIGh0dHBzOi8vaGcucHl0aG9uLm9yZy9jcHl0aG9uL2ZpbGUvMi43L0xpYi9oZWFwcS5weS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgUHJpb3JpdHlRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiBudW1iZXJ9IHByaW9yaXR5RnVuY3Rpb24gUHJpb3JpdHkgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogc3RyaW5nfSBrZXlGdW5jdGlvbiBLZXkgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJpb3JpdHlRdWV1ZShwcmlvcml0eUZ1bmN0aW9uLCBrZXlGdW5jdGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKFQpOiBudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByaW9yaXR5RnVuY3Rpb25fID0gcHJpb3JpdHlGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihUKTogc3RyaW5nfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rZXlGdW5jdGlvbl8gPSBrZXlGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxUPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWxlbWVudHNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJpb3JpdGllc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnF1ZXVlZEVsZW1lbnRzXyA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wcmlvcml0aWVzXy5sZW5ndGggPSAwO1xuICAgICAgICBjbGVhcih0aGlzLnF1ZXVlZEVsZW1lbnRzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW5kIHJldHVybiB0aGUgaGlnaGVzdC1wcmlvcml0eSBlbGVtZW50LiBPKGxvZyBOKS5cbiAgICAgKiBAcmV0dXJuIHtUfSBFbGVtZW50LlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbMF07XG4gICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgZWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHByaW9yaXRpZXMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnRzWzBdID0gZWxlbWVudHMucG9wKCk7XG4gICAgICAgICAgICBwcmlvcml0aWVzWzBdID0gcHJpb3JpdGllcy5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuc2lmdFVwXygwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxlbWVudEtleSA9IHRoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICAgICAgICBkZWxldGUgdGhpcy5xdWV1ZWRFbGVtZW50c19bZWxlbWVudEtleV07XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRW5xdWV1ZSBhbiBlbGVtZW50LiBPKGxvZyBOKS5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBhc3NlcnQoISh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXyksIDMxKTsgLy8gVHJpZWQgdG8gZW5xdWV1ZSBhbiBgZWxlbWVudGAgdGhhdCB3YXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgcXVldWVcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uXyhlbGVtZW50KTtcbiAgICAgICAgaWYgKHByaW9yaXR5ICE9IERST1ApIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNfLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnByaW9yaXRpZXNfLnB1c2gocHJpb3JpdHkpO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2lmdERvd25fKDAsIHRoaXMuZWxlbWVudHNfLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNfLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBsZWZ0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgbGVmdCBjaGlsZCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRMZWZ0Q2hpbGRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ICogMiArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgcmlnaHQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSByaWdodCBjaGlsZCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0UmlnaHRDaGlsZEluZGV4XyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gaW5kZXggKiAyICsgMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBwYXJlbnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSBwYXJlbnQgZm9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBwYXJlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRQYXJlbnRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIChpbmRleCAtIDEpID4+IDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYWtlIHRoaXMgYSBoZWFwLiBPKE4pLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaGVhcGlmeV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAodGhpcy5lbGVtZW50c18ubGVuZ3RoID4+IDEpIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuc2lmdFVwXyhpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNfLmxlbmd0aCA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGtleSBxdWV1ZWQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNLZXlRdWV1ZWQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1R9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBxdWV1ZWQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNRdWV1ZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0tleVF1ZXVlZCh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIG1vdmUgZG93bi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnNpZnRVcF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGNvdW50ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdGllc1tpbmRleF07XG4gICAgICAgIHZhciBzdGFydEluZGV4ID0gaW5kZXg7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGNvdW50ID4+IDEpIHtcbiAgICAgICAgICAgIHZhciBsSW5kZXggPSB0aGlzLmdldExlZnRDaGlsZEluZGV4XyhpbmRleCk7XG4gICAgICAgICAgICB2YXIgckluZGV4ID0gdGhpcy5nZXRSaWdodENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICAgICAgICAgIHZhciBzbWFsbGVyQ2hpbGRJbmRleCA9IHJJbmRleCA8IGNvdW50ICYmIHByaW9yaXRpZXNbckluZGV4XSA8IHByaW9yaXRpZXNbbEluZGV4XVxuICAgICAgICAgICAgICAgID8gckluZGV4XG4gICAgICAgICAgICAgICAgOiBsSW5kZXg7XG4gICAgICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1tzbWFsbGVyQ2hpbGRJbmRleF07XG4gICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXRpZXNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgICAgICAgICAgaW5kZXggPSBzbWFsbGVyQ2hpbGRJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50O1xuICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLnNpZnREb3duXyhzdGFydEluZGV4LCBpbmRleCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCBUaGUgaW5kZXggb2YgdGhlIHJvb3QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBtb3ZlIHVwLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuc2lmdERvd25fID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGluZGV4KSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaW5kZXhdO1xuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0aWVzW2luZGV4XTtcbiAgICAgICAgd2hpbGUgKGluZGV4ID4gc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEluZGV4ID0gdGhpcy5nZXRQYXJlbnRJbmRleF8oaW5kZXgpO1xuICAgICAgICAgICAgaWYgKHByaW9yaXRpZXNbcGFyZW50SW5kZXhdID4gcHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1twYXJlbnRJbmRleF07XG4gICAgICAgICAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3BhcmVudEluZGV4XTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcmVudEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnJlcHJpb3JpdGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByaW9yaXR5RnVuY3Rpb24gPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgbiA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVsZW1lbnQsIGksIHByaW9yaXR5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgICBwcmlvcml0eSA9IHByaW9yaXR5RnVuY3Rpb24oZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAocHJpb3JpdHkgPT0gRFJPUCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4KytdID0gZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50cy5sZW5ndGggPSBpbmRleDtcbiAgICAgICAgcHJpb3JpdGllcy5sZW5ndGggPSBpbmRleDtcbiAgICAgICAgdGhpcy5oZWFwaWZ5XygpO1xuICAgIH07XG4gICAgcmV0dXJuIFByaW9yaXR5UXVldWU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUHJpb3JpdHlRdWV1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByaW9yaXR5UXVldWUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlUXVldWVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFByaW9yaXR5UXVldWUsIHsgRFJPUCB9IGZyb20gJy4vc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHQsIHN0cmluZywgaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIG51bWJlcik6IG51bWJlcn0gUHJpb3JpdHlGdW5jdGlvblxuICovXG52YXIgVGlsZVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlUXVldWUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQcmlvcml0eUZ1bmN0aW9ufSB0aWxlUHJpb3JpdHlGdW5jdGlvbiBUaWxlIHByaW9yaXR5IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogP30gdGlsZUNoYW5nZUNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIHRpbGUgY2hhbmdlIGV2ZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVRdWV1ZSh0aWxlUHJpb3JpdHlGdW5jdGlvbiwgdGlsZUNoYW5nZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFByaW9yaXR5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aWxlUHJpb3JpdHlGdW5jdGlvbi5hcHBseShudWxsLCBlbGVtZW50KTtcbiAgICAgICAgfSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZWxlbWVudFswXSkuZ2V0S2V5KCk7XG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfID0gX3RoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbigpOiA/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNoYW5nZUNhbGxiYWNrXyA9IHRpbGVDaGFuZ2VDYWxsYmFjaztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlc0xvYWRpbmdfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZyxib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVzTG9hZGluZ0tleXNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbGVtZW50IHdhcyBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGFkZGVkID0gX3N1cGVyLnByb3RvdHlwZS5lbnF1ZXVlLmNhbGwodGhpcywgZWxlbWVudCk7XG4gICAgICAgIGlmIChhZGRlZCkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSBlbGVtZW50WzBdO1xuICAgICAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkZGVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgdGlsZXMgbG9hZGluZy5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmdldFRpbGVzTG9hZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNMb2FkaW5nXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmIChzdGF0ZSA9PT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgdGlsZS5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgICAgICB2YXIgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV07XG4gICAgICAgICAgICAgICAgLS10aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFRvdGFsTG9hZGluZyBNYXhpbXVtIG51bWJlciB0aWxlcyB0byBsb2FkIHNpbXVsdGFuZW91c2x5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhOZXdMb2FkcyBNYXhpbXVtIG51bWJlciBvZiBuZXcgdGlsZXMgdG8gbG9hZC5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmxvYWRNb3JlVGlsZXMgPSBmdW5jdGlvbiAobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcykge1xuICAgICAgICB2YXIgbmV3TG9hZHMgPSAwO1xuICAgICAgICB2YXIgc3RhdGUsIHRpbGUsIHRpbGVLZXk7XG4gICAgICAgIHdoaWxlICh0aGlzLnRpbGVzTG9hZGluZ18gPCBtYXhUb3RhbExvYWRpbmcgJiZcbiAgICAgICAgICAgIG5ld0xvYWRzIDwgbWF4TmV3TG9hZHMgJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgICAgICAgIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5kZXF1ZXVlKClbMF0pO1xuICAgICAgICAgICAgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gVGlsZVN0YXRlLklETEUgJiYgISh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlc0xvYWRpbmdLZXlzX1t0aWxlS2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgKyt0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICAgICAgKytuZXdMb2FkcztcbiAgICAgICAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVRdWV1ZTtcbn0oUHJpb3JpdHlRdWV1ZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZVF1ZXVlO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9QbHVnZ2FibGVNYXAuanMnKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlUmVzb2x1dGlvbiBUaWxlIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaWxlUHJpb3JpdHkoZnJhbWVTdGF0ZSwgdGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAvLyBGaWx0ZXIgb3V0IHRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyB0aGFuIHRoZSBjdXJyZW50IHpvb20gbGV2ZWwsIG9yIHRoYXRcbiAgICAvLyBhcmUgb3V0c2lkZSB0aGUgdmlzaWJsZSBleHRlbnQuXG4gICAgaWYgKCFmcmFtZVN0YXRlIHx8ICEodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzKSkge1xuICAgICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgaWYgKCFmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldKSB7XG4gICAgICAgIHJldHVybiBEUk9QO1xuICAgIH1cbiAgICAvLyBQcmlvcml0aXplIHRoZSBoaWdoZXN0IHpvb20gbGV2ZWwgdGlsZXMgY2xvc2VzdCB0byB0aGUgZm9jdXMuXG4gICAgLy8gVGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIGFyZSBwcmlvcml0aXplZCB1c2luZyBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikuXG4gICAgLy8gV2l0aGluIGEgem9vbSBsZXZlbCwgdGlsZXMgYXJlIHByaW9yaXRpemVkIGJ5IHRoZSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlblxuICAgIC8vIHRoZSBjZW50ZXIgb2YgdGhlIHRpbGUgYW5kIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0LiAgVGhlIGZhY3RvciBvZiA2NTUzNlxuICAgIC8vIG1lYW5zIHRoYXQgdGhlIHByaW9yaXRpemF0aW9uIHNob3VsZCBiZWhhdmUgYXMgZGVzaXJlZCBmb3IgdGlsZXMgdXAgdG9cbiAgICAvLyA2NTUzNiAqIE1hdGgubG9nKDIpID0gNDU0MjYgcGl4ZWxzIGZyb20gdGhlIGZvY3VzLlxuICAgIHZhciBjZW50ZXIgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgdmFyIGRlbHRhWCA9IHRpbGVDZW50ZXJbMF0gLSBjZW50ZXJbMF07XG4gICAgdmFyIGRlbHRhWSA9IHRpbGVDZW50ZXJbMV0gLSBjZW50ZXJbMV07XG4gICAgcmV0dXJuICg2NTUzNiAqIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKSArXG4gICAgICAgIE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpIC8gdGlsZVJlc29sdXRpb24pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVF1ZXVlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zaXplXG4gKi9cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYSBzaXplOiBgW3dpZHRoLCBoZWlnaHRdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBTaXplXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIGJ1ZmZlcmVkIHNpemUuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBudW0gVGhlIGFtb3VudCBieSB3aGljaCB0byBidWZmZXIuXG4gKiBAcGFyYW0ge1NpemV9IFtvcHRfc2l6ZV0gT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFRoZSBidWZmZXJlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyKHNpemUsIG51bSwgb3B0X3NpemUpIHtcbiAgICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvcHRfc2l6ZSA9IFswLCAwXTtcbiAgICB9XG4gICAgb3B0X3NpemVbMF0gPSBzaXplWzBdICsgMiAqIG51bTtcbiAgICBvcHRfc2l6ZVsxXSA9IHNpemVbMV0gKyAyICogbnVtO1xuICAgIHJldHVybiBvcHRfc2l6ZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBUaGUgc2l6ZSB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0FyZWEoc2l6ZSkge1xuICAgIHJldHVybiBzaXplWzBdID4gMCAmJiBzaXplWzFdID4gMDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHNpemUgc2NhbGVkIGJ5IGEgcmF0aW8uIFRoZSByZXN1bHQgd2lsbCBiZSBhbiBhcnJheSBvZiBpbnRlZ2Vycy5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFJhdGlvLlxuICogQHBhcmFtIHtTaXplfSBbb3B0X3NpemVdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBUaGUgc2NhbGVkIHNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShzaXplLCByYXRpbywgb3B0X3NpemUpIHtcbiAgICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvcHRfc2l6ZSA9IFswLCAwXTtcbiAgICB9XG4gICAgb3B0X3NpemVbMF0gPSAoc2l6ZVswXSAqIHJhdGlvICsgMC41KSB8IDA7XG4gICAgb3B0X3NpemVbMV0gPSAoc2l6ZVsxXSAqIHJhdGlvICsgMC41KSB8IDA7XG4gICAgcmV0dXJuIG9wdF9zaXplO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFuIGBTaXplYCBhcnJheSBmb3IgdGhlIHBhc3NlZCBpbiBudW1iZXIgKG1lYW5pbmc6IHNxdWFyZSkgb3JcbiAqIGBTaXplYCBhcnJheS5cbiAqIChtZWFuaW5nOiBub24tc3F1YXJlKSxcbiAqIEBwYXJhbSB7bnVtYmVyfFNpemV9IHNpemUgV2lkdGggYW5kIGhlaWdodC5cbiAqIEBwYXJhbSB7U2l6ZX0gW29wdF9zaXplXSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gU2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU2l6ZShzaXplLCBvcHRfc2l6ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNpemUpKSB7XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdF9zaXplID0gW3NpemUsIHNpemVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0X3NpemVbMF0gPSBzaXplO1xuICAgICAgICAgICAgb3B0X3NpemVbMV0gPSBzaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRfc2l6ZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaXplLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvUGx1Z2dhYmxlTWFwXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IExheWVyIGZyb20gJy4vbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IExheWVyR3JvdXAsIHsgR3JvdXBFdmVudCB9IGZyb20gJy4vbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50SGFuZGxlciBmcm9tICcuL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcFByb3BlcnR5IGZyb20gJy4vTWFwUHJvcGVydHkuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlUXVldWUsIHsgZ2V0VGlsZVByaW9yaXR5IH0gZnJvbSAnLi9UaWxlUXVldWUuanMnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi9WaWV3LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7IERFVklDRV9QSVhFTF9SQVRJTywgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsb25lLCBjcmVhdGVPclVwZGF0ZUVtcHR5LCBlcXVhbHMsIGdldEZvclZpZXdBbmRTaXplLCBpc0VtcHR5LCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGZyb21Vc2VyQ29vcmRpbmF0ZSwgdG9Vc2VyQ29vcmRpbmF0ZSB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuL3V0aWwuanMnO1xuaW1wb3J0IHsgaGFzQXJlYSB9IGZyb20gJy4vc2l6ZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZW1vdmVOb2RlIH0gZnJvbSAnLi9kb20uanMnO1xuLyoqXG4gKiBTdGF0ZSBvZiB0aGUgY3VycmVudCBmcmFtZS4gT25seSBgcGl4ZWxSYXRpb2AsIGB0aW1lYCBhbmQgYHZpZXdTdGF0ZWAgc2hvdWxkXG4gKiBiZSB1c2VkIGluIGFwcGxpY2F0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZyYW1lU3RhdGVcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwaXhlbFJhdGlvIFRoZSBwaXhlbCByYXRpbyBvZiB0aGUgZnJhbWUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gdGltZSBUaGUgdGltZSB3aGVuIHJlbmRlcmluZyBvZiB0aGUgZnJhbWUgd2FzIHJlcXVlc3RlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9WaWV3LmpzXCIpLlN0YXRlfSB2aWV3U3RhdGUgVGhlIHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGFuaW1hdGUgQW5pbWF0ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSBDb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwicmJ1c2hcIikuZGVmYXVsdH0gZGVjbHV0dGVyVHJlZSBEZWNsdXR0ZXJUcmVlLlxuICogQHByb3BlcnR5IHtudWxsfGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbbmV4dEV4dGVudF0gTmV4dCBleHRlbnQgZHVyaW5nIGFuIGFuaW1hdGlvbiBzZXJpZXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXggSW5kZXguXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGU+fSBsYXllclN0YXRlc0FycmF5IExheWVyU3RhdGVzQXJyYXkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGF5ZXJJbmRleCBMYXllckluZGV4LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtIFBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLlxuICogQHByb3BlcnR5IHtBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fSBwb3N0UmVuZGVyRnVuY3Rpb25zIFBvc3RSZW5kZXJGdW5jdGlvbnMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcHJvcGVydHkge1RpbGVRdWV1ZX0gdGlsZVF1ZXVlIFRpbGVRdWV1ZS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gdXNlZFRpbGVzIFVzZWRUaWxlcy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gdmlld0hpbnRzIFZpZXdIaW50cy5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gd2FudGVkVGlsZXMgV2FudGVkVGlsZXMuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbWFwSWQgVGhlIGlkIG9mIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSByZW5kZXJUYXJnZXRzIElkZW50aWZpZXJzIG9mIHByZXZpb3VzbHkgcmVuZGVyZWQgZWxlbWVudHMuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKFBsdWdnYWJsZU1hcCwgP0ZyYW1lU3RhdGUpOiBhbnl9IFBvc3RSZW5kZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEF0UGl4ZWxPcHRpb25zXG4gKiBAcHJvcGVydHkge3VuZGVmaW5lZHxmdW5jdGlvbihpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9zb3VyY2UvU291cmNlXCIpLmRlZmF1bHQ+KTogYm9vbGVhbn0gW2xheWVyRmlsdGVyXSBMYXllciBmaWx0ZXJcbiAqIGZ1bmN0aW9uLiBUaGUgZmlsdGVyIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSBvbmUgYXJndW1lbnQsIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllci1jYW5kaWRhdGV9IGFuZCBpdCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS5cbiAqIE9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYFxuICogd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZSBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2hpdFRvbGVyYW5jZT0wXSBIaXQtZGV0ZWN0aW9uIHRvbGVyYW5jZSBpbiBjc3MgcGl4ZWxzLiBQaXhlbHNcbiAqIGluc2lkZSB0aGUgcmFkaXVzIGFyb3VuZCB0aGUgZ2l2ZW4gcG9zaXRpb24gd2lsbCBiZSBjaGVja2VkIGZvciBmZWF0dXJlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NoZWNrV3JhcHBlZD10cnVlXSBDaGVjay1XcmFwcGVkIFdpbGwgY2hlY2sgZm9yIGZvciB3cmFwcGVkIGdlb21ldHJpZXMgaW5zaWRlIHRoZSByYW5nZSBvZlxuICogICArLy0gMSB3b3JsZCB3aWR0aC4gV29ya3Mgb25seSBpZiBhIHByb2plY3Rpb24gaXMgdXNlZCB0aGF0IGNhbiBiZSB3cmFwcGVkLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1hcE9wdGlvbnNJbnRlcm5hbFxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBbY29udHJvbHNdIENvbnRyb2xzLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IFtpbnRlcmFjdGlvbnNdIEludGVyYWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9IGtleWJvYXJkRXZlbnRUYXJnZXQgS2V5Ym9hcmRFdmVudFRhcmdldC5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IG92ZXJsYXlzIE92ZXJsYXlzLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpsYXllcmdyb3VwJ3wnY2hhbmdlOnNpemUnfCdjaGFuZ2U6dGFyZ2V0J3wnY2hhbmdlOnZpZXcnfSBNYXBPYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPE1hcE9iamVjdEV2ZW50VHlwZXMsIGltcG9ydChcIi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFR5cGVcIikuVHlwZXMsIGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vTWFwRXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuL01hcEV2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5NYXBSZW5kZXJFdmVudFR5cGVzLCBpbXBvcnQoXCIuL3JlbmRlci9FdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfE1hcE9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICAgIGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50VHlwZVwiKS5UeXBlc3xpbXBvcnQoXCIuL01hcEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnRUeXBlXCIpLk1hcFJlbmRlckV2ZW50VHlwZXMsIFJldHVybj59IFBsdWdnYWJsZU1hcE9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBjb25maWcgb3B0aW9ucyBmb3IgdGhlIG1hcC5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1hcE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gW2NvbnRyb2xzXVxuICogQ29udHJvbHMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIElmIG5vdCBzcGVjaWZpZWQsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wuZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW9dIFRoZSByYXRpbyBiZXR3ZWVuXG4gKiBwaHlzaWNhbCBwaXhlbHMgYW5kIGRldmljZS1pbmRlcGVuZGVudCBwaXhlbHMgKGRpcHMpIG9uIHRoZSBkZXZpY2UuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXVxuICogSW50ZXJhY3Rpb25zIHRoYXQgYXJlIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi5kZWZhdWx0c30gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR8c3RyaW5nfSBba2V5Ym9hcmRFdmVudFRhcmdldF0gVGhlIGVsZW1lbnQgdG9cbiAqIGxpc3RlbiB0byBrZXlib2FyZCBldmVudHMgb24uIFRoaXMgZGV0ZXJtaW5lcyB3aGVuIHRoZSBgS2V5Ym9hcmRQYW5gIGFuZFxuICogYEtleWJvYXJkWm9vbWAgaW50ZXJhY3Rpb25zIHRyaWdnZXIuIEZvciBleGFtcGxlLCBpZiB0aGlzIG9wdGlvbiBpcyBzZXQgdG9cbiAqIGBkb2N1bWVudGAgdGhlIGtleWJvYXJkIGludGVyYWN0aW9ucyB3aWxsIGFsd2F5cyB0cmlnZ2VyLiBJZiB0aGlzIG9wdGlvbiBpc1xuICogbm90IHNwZWNpZmllZCwgdGhlIGVsZW1lbnQgdGhlIGxpYnJhcnkgbGlzdGVucyB0byBrZXlib2FyZCBldmVudHMgb24gaXMgdGhlXG4gKiBtYXAgdGFyZ2V0IChpLmUuIHRoZSB1c2VyLXByb3ZpZGVkIGRpdiBmb3IgdGhlIG1hcCkuIElmIHRoaXMgaXMgbm90XG4gKiBgZG9jdW1lbnRgLCB0aGUgdGFyZ2V0IGVsZW1lbnQgbmVlZHMgdG8gYmUgZm9jdXNlZCBmb3Iga2V5IGV2ZW50cyB0byBiZVxuICogZW1pdHRlZCwgcmVxdWlyaW5nIHRoYXQgdGhlIHRhcmdldCBlbGVtZW50IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58TGF5ZXJHcm91cH0gW2xheWVyc11cbiAqIExheWVycy4gSWYgdGhpcyBpcyBub3QgZGVmaW5lZCwgYSBtYXAgd2l0aCBubyBsYXllcnMgd2lsbCBiZSByZW5kZXJlZC4gTm90ZVxuICogdGhhdCBsYXllcnMgYXJlIHJlbmRlcmVkIGluIHRoZSBvcmRlciBzdXBwbGllZCwgc28gaWYgeW91IHdhbnQsIGZvciBleGFtcGxlLFxuICogYSB2ZWN0b3IgbGF5ZXIgdG8gYXBwZWFyIG9uIHRvcCBvZiBhIHRpbGUgbGF5ZXIsIGl0IG11c3QgY29tZSBhZnRlciB0aGUgdGlsZVxuICogbGF5ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFRpbGVzTG9hZGluZz0xNl0gTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZFxuICogc2ltdWx0YW5lb3VzbHkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21vdmVUb2xlcmFuY2U9MV0gVGhlIG1pbmltdW0gZGlzdGFuY2UgaW4gcGl4ZWxzIHRoZVxuICogY3Vyc29yIG11c3QgbW92ZSB0byBiZSBkZXRlY3RlZCBhcyBhIG1hcCBtb3ZlIGV2ZW50IGluc3RlYWQgb2YgYSBjbGljay5cbiAqIEluY3JlYXNpbmcgdGhpcyB2YWx1ZSBjYW4gbWFrZSBpdCBlYXNpZXIgdG8gY2xpY2sgb24gdGhlIG1hcC5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBbb3ZlcmxheXNdXG4gKiBPdmVybGF5cyBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gQnkgZGVmYXVsdCwgbm8gb3ZlcmxheXMgYXJlIGFkZGVkLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFRoZSBjb250YWluZXIgZm9yIHRoZSBtYXAsIGVpdGhlciB0aGVcbiAqIGVsZW1lbnQgaXRzZWxmIG9yIHRoZSBgaWRgIG9mIHRoZSBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkIGF0IGNvbnN0cnVjdGlvblxuICogdGltZSwge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI3NldFRhcmdldH0gbXVzdCBiZSBjYWxsZWQgZm9yIHRoZSBtYXAgdG8gYmVcbiAqIHJlbmRlcmVkLiBJZiBwYXNzZWQgYnkgZWxlbWVudCwgdGhlIGNvbnRhaW5lciBjYW4gYmUgaW4gYSBzZWNvbmRhcnkgZG9jdW1lbnQuXG4gKiBAcHJvcGVydHkge1ZpZXd8UHJvbWlzZTxpbXBvcnQoXCIuL1ZpZXcuanNcIikuVmlld09wdGlvbnM+fSBbdmlld10gVGhlIG1hcCdzIHZpZXcuICBObyBsYXllciBzb3VyY2VzIHdpbGwgYmVcbiAqIGZldGNoZWQgdW5sZXNzIHRoaXMgaXMgc3BlY2lmaWVkIGF0IGNvbnN0cnVjdGlvbiB0aW1lIG9yIHRocm91Z2hcbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRWaWV3fS5cbiAqL1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eShsYXllcikge1xuICAgIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgIGxheWVyLnNldE1hcEludGVybmFsKG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyR3JvdXApIHtcbiAgICAgICAgbGF5ZXIuZ2V0TGF5ZXJzKCkuZm9yRWFjaChyZW1vdmVMYXllck1hcFByb3BlcnR5KTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICogQHBhcmFtIHtQbHVnZ2FibGVNYXB9IG1hcCBNYXAuXG4gKi9cbmZ1bmN0aW9uIHNldExheWVyTWFwUHJvcGVydHkobGF5ZXIsIG1hcCkge1xuICAgIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgIGxheWVyLnNldE1hcEludGVybmFsKG1hcCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGxheWVyIGluc3RhbmNlb2YgTGF5ZXJHcm91cCkge1xuICAgICAgICB2YXIgbGF5ZXJzID0gbGF5ZXIuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHNldExheWVyTWFwUHJvcGVydHkobGF5ZXJzW2ldLCBtYXApO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnQuanNcIikuTWFwQnJvd3NlckV2ZW50XG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9NYXBFdmVudC5qc1wiKS5NYXBFdmVudFxuICogQGZpcmVzIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHQjcHJlY29tcG9zZVxuICogQGZpcmVzIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHQjcG9zdGNvbXBvc2VcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0I3JlbmRlcmNvbXBsZXRlXG4gKiBAYXBpXG4gKi9cbnZhciBQbHVnZ2FibGVNYXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBsdWdnYWJsZU1hcCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGx1Z2dhYmxlTWFwKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7UGx1Z2dhYmxlTWFwT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtQbHVnZ2FibGVNYXBPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7UGx1Z2dhYmxlTWFwT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnNJbnRlcm5hbCA9IGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyQ29tcGxldGVfO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfID0gX3RoaXMuaGFuZGxlQnJvd3NlckV2ZW50LmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heFRpbGVzTG9hZGluZ18gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhUaWxlc0xvYWRpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nIDogMTY7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpb18gPVxuICAgICAgICAgICAgb3B0aW9ucy5waXhlbFJhdGlvICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMucGl4ZWxSYXRpb1xuICAgICAgICAgICAgICAgIDogREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuaW1hdGlvbkRlbGF5S2V5XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpb25EZWxheV8gPSAvKiogQHRoaXMge1BsdWdnYWJsZU1hcH0gKi8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZyYW1lXyhEYXRlLm5vdygpKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZUluZGV4XyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0ZyYW1lU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXh0ZW50IGF0IHRoZSBwcmV2aW91cyAnbW92ZWVuZCcgZXZlbnQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wcmV2aW91c0V4dGVudF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdwb3J0XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uY2xhc3NOYW1lID1cbiAgICAgICAgICAgICdvbC12aWV3cG9ydCcgKyAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93ID8gJyBvbC10b3VjaCcgOiAnJyk7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmFwcGVuZENoaWxkKF90aGlzLm92ZXJsYXlDb250YWluZXJfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnpJbmRleCA9ICcwJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uY2xhc3NOYW1lID0gJ29sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50JztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmFwcGVuZENoaWxkKF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtNYXBCcm93c2VyRXZlbnRIYW5kbGVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1vdmVUb2xlcmFuY2VfID0gb3B0aW9ucy5tb3ZlVG9sZXJhbmNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fERvY3VtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5Ym9hcmRFdmVudFRhcmdldF8gPSBvcHRpb25zSW50ZXJuYWwua2V5Ym9hcmRFdmVudFRhcmdldDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldENoYW5nZUhhbmRsZXJLZXlzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udHJvbHMgPSBvcHRpb25zSW50ZXJuYWwuY29udHJvbHMgfHwgbmV3IENvbGxlY3Rpb24oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucyA9IG9wdGlvbnNJbnRlcm5hbC5pbnRlcmFjdGlvbnMgfHwgbmV3IENvbGxlY3Rpb24oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlzXyA9IG9wdGlvbnNJbnRlcm5hbC5vdmVybGF5cztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbG9va3VwIG9mIG92ZXJsYXlzIGJ5IGlkLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUlkSW5kZXhfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PFBvc3RSZW5kZXJGdW5jdGlvbj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1RpbGVRdWV1ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVRdWV1ZV8gPSBuZXcgVGlsZVF1ZXVlKF90aGlzLmdldFRpbGVQcmlvcml0eS5iaW5kKF90aGlzKSwgX3RoaXMuaGFuZGxlVGlsZUNoYW5nZV8uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5MQVlFUkdST1VQLCBfdGhpcy5oYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5WSUVXLCBfdGhpcy5oYW5kbGVWaWV3Q2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5TSVpFLCBfdGhpcy5oYW5kbGVTaXplQ2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5UQVJHRVQsIF90aGlzLmhhbmRsZVRhcmdldENoYW5nZWRfKTtcbiAgICAgICAgLy8gc2V0UHJvcGVydGllcyB3aWxsIHRyaWdnZXIgdGhlIHJlbmRlcmluZyBvZiB0aGUgbWFwIGlmIHRoZSBtYXBcbiAgICAgICAgLy8gaXMgXCJkZWZpbmVkXCIgYWxyZWFkeS5cbiAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhvcHRpb25zSW50ZXJuYWwudmFsdWVzKTtcbiAgICAgICAgdmFyIG1hcCA9IF90aGlzO1xuICAgICAgICBpZiAob3B0aW9ucy52aWV3ICYmICEob3B0aW9ucy52aWV3IGluc3RhbmNlb2YgVmlldykpIHtcbiAgICAgICAgICAgIG9wdGlvbnMudmlldy50aGVuKGZ1bmN0aW9uICh2aWV3T3B0aW9ucykge1xuICAgICAgICAgICAgICAgIG1hcC5zZXRWaWV3KG5ldyBWaWV3KHZpZXdPcHRpb25zKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKHRoaXMpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheXNfLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3ZlcmxheUludGVybmFsXyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9ICovIChldmVudC5lbGVtZW50KSk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5vdmVybGF5c18uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIG92ZXJsYXkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgaWQgPSBvdmVybGF5LmdldElkKCk7XG4gICAgICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuY29udHJvbHMuZm9yRWFjaChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgICAgICAgKiBAdGhpcyB7UGx1Z2dhYmxlTWFwfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgICAgIGNvbnRyb2wuc2V0TWFwKHRoaXMpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmZvckVhY2goXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24uXG4gICAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uLnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5mb3JFYWNoKF90aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8uYmluZChfdGhpcykpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9IFRoZSBtYXAgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZSBhIG1hcCB0eXBlIHRoYXQgaGFzIGEgY3JlYXRlUmVuZGVyZXIgbWV0aG9kJyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGNvbnRyb2wgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRDb250cm9sID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgdGhpcy5nZXRDb250cm9scygpLnB1c2goY29udHJvbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGludGVyYWN0aW9uIHRvIHRoZSBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhbiBpbnRlcmFjdGlvblxuICAgICAqIGF0IGFub3RoZXIgcG9pbnQgb2YgdGhlIGNvbGxlY3Rpb24gdXNlIGBnZXRJbnRlcmFjdGlvbigpYCBhbmQgdGhlIG1ldGhvZHNcbiAgICAgKiBhdmFpbGFibGUgb24ge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAgICogc3RvcCB0aGUgZXZlbnQgcHJvcGFnYXRpb24gZnJvbSB0aGUgaGFuZGxlRXZlbnQgZnVuY3Rpb24uIFRoZSBpbnRlcmFjdGlvbnNcbiAgICAgKiBnZXQgdG8gaGFuZGxlIHRoZSBldmVudHMgaW4gdGhlIHJldmVyc2Ugb3JkZXIgb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5wdXNoKGludGVyYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGdpdmVuIGxheWVyIHRvIHRoZSB0b3Agb2YgdGhpcyBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhIGxheWVyXG4gICAgICogZWxzZXdoZXJlIGluIHRoZSBzdGFjaywgdXNlIGBnZXRMYXllcnMoKWAgYW5kIHRoZSBtZXRob2RzIGF2YWlsYWJsZSBvblxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRMYXllciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9Hcm91cC5qc1wiKS5Hcm91cEV2ZW50fSBldmVudCBUaGUgbGF5ZXIgYWRkIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVMYXllckFkZF8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgc2V0TGF5ZXJNYXBQcm9wZXJ0eShldmVudC5sYXllciwgdGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIG92ZXJsYXkgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkT3ZlcmxheSA9IGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICAgIHRoaXMuZ2V0T3ZlcmxheXMoKS5wdXNoKG92ZXJsYXkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBkZWFscyB3aXRoIG1hcCdzIG92ZXJsYXkgY29sbGVjdGlvbiBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkT3ZlcmxheUludGVybmFsXyA9IGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICAgIHZhciBpZCA9IG92ZXJsYXkuZ2V0SWQoKTtcbiAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldID0gb3ZlcmxheTtcbiAgICAgICAgfVxuICAgICAgICBvdmVybGF5LnNldE1hcCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0VGFyZ2V0KG51bGwpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LCBhbmQgZXhlY3V0ZSBhXG4gICAgICogY2FsbGJhY2sgd2l0aCBlYWNoIGludGVyc2VjdGluZyBmZWF0dXJlLiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlIGRldGVjdGlvbiBjYW5cbiAgICAgKiBiZSBjb25maWd1cmVkIHRocm91Z2ggdGhlIGBsYXllckZpbHRlcmAgb3B0aW9uIGluIGBvcHRfb3B0aW9uc2AuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSwgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vc291cmNlL1NvdXJjZVwiKS5kZWZhdWx0PiwgaW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHQpOiBUfSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLiBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgICAqICAgICBjYWxsZWQgd2l0aCB0d28gYXJndW1lbnRzLiBUaGUgZmlyc3QgYXJndW1lbnQgaXMgb25lXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZSBmZWF0dXJlfSBvclxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9GZWF0dXJlIHJlbmRlciBmZWF0dXJlfSBhdCB0aGUgcGl4ZWwsIHRoZSBzZWNvbmQgaXNcbiAgICAgKiAgICAgdGhlIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXJ9IG9mIHRoZSBmZWF0dXJlIGFuZCB3aWxsIGJlIG51bGwgZm9yXG4gICAgICogICAgIHVubWFuYWdlZCBsYXllcnMuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFjayBmdW5jdGlvbnMgY2FuIHJldHVybiBhXG4gICAgICogICAgIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICAgKiBjYWxsYmFjayBleGVjdXRpb24sIG9yIHRoZSBmaXJzdCB0cnV0aHkgY2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBjYWxsYmFjaywgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvb3JkaW5hdGUgPSB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCk7XG4gICAgICAgIG9wdF9vcHRpb25zID0gb3B0X29wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5sYXllckZpbHRlciA6IFRSVUU7XG4gICAgICAgIHZhciBjaGVja1dyYXBwZWQgPSBvcHRfb3B0aW9ucy5jaGVja1dyYXBwZWQgIT09IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGNhbGxiYWNrLCBudWxsLCBsYXllckZpbHRlciwgbnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IFRoZSBkZXRlY3RlZCBmZWF0dXJlcyBvclxuICAgICAqIGFuIGVtcHR5IGFycmF5IGlmIG5vbmUgd2VyZSBmb3VuZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRGZWF0dXJlc0F0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICB0aGlzLmZvckVhY2hGZWF0dXJlQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICAgIH0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBsYXllcnMgZnJvbSBhbGwgbGF5ZXIgZ3JvdXBzLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdD59IExheWVycy5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEFsbExheWVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVycyA9IFtdO1xuICAgICAgICBmdW5jdGlvbiBhZGRMYXllcnNGcm9tKGxheWVyR3JvdXApIHtcbiAgICAgICAgICAgIGxheWVyR3JvdXAuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZExheWVyc0Zyb20obGF5ZXIuZ2V0TGF5ZXJzKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJzLnB1c2gobGF5ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGFkZExheWVyc0Zyb20odGhpcy5nZXRMYXllcnMoKSk7XG4gICAgICAgIHJldHVybiBsYXllcnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgbGF5ZXJzIHRoYXQgaGF2ZSBhIGNvbG9yIHZhbHVlIGF0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LCBhbmRcbiAgICAgKiBleGVjdXRlIGEgY2FsbGJhY2sgd2l0aCBlYWNoIG1hdGNoaW5nIGxheWVyLiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlXG4gICAgICogZGV0ZWN0aW9uIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggYG9wdF9sYXllckZpbHRlcmAuXG4gICAgICpcbiAgICAgKiBOb3RlOiBJbiBtYXBzIHdpdGggbW9yZSB0aGFuIG9uZSBsYXllciwgdGhpcyBtZXRob2Qgd2lsbCB0eXBpY2FsbHkgcmV0dXJuIHBpeGVsIGRhdGFcbiAgICAgKiByZXByZXNlbnRpbmcgdGhlIGNvbXBvc2VkIGltYWdlIG9mIGFsbCBsYXllcnMgdmlzaWJsZSBhdCB0aGUgZ2l2ZW4gcGl4ZWwg4oCTIGJlY2F1c2UgbGF5ZXJzXG4gICAgICogd2lsbCBnZW5lcmFsbHkgc2hhcmUgdGhlIHNhbWUgcmVuZGVyaW5nIGNvbnRleHQuICBUbyBmb3JjZSBsYXllcnMgdG8gcmVuZGVyIHNlcGFyYXRlbHksIGFuZFxuICAgICAqIHRvIGdldCBwaXhlbCBkYXRhIHJlcHJlc2VudGluZyBvbmx5IG9uZSBsYXllciBhdCBhIHRpbWUsIHlvdSBjYW4gYXNzaWduIGVhY2ggbGF5ZXIgYSB1bmlxdWVcbiAgICAgKiBgY2xhc3NOYW1lYCBpbiBpdHMgY29uc3RydWN0b3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFja1xuICAgICAqICAgICBMYXllciBjYWxsYmFjay4gVGhpcyBjYWxsYmFjayB3aWxsIHJlY2VpdmUgdHdvIGFyZ3VtZW50czogZmlyc3QgaXMgdGhlXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXJ9LCBzZWNvbmQgYXJndW1lbnQgaXMgYW4gYXJyYXkgcmVwcmVzZW50aW5nXG4gICAgICogICAgIFtSLCBHLCBCLCBBXSBwaXhlbCB2YWx1ZXMgKDAgLSAyNTUpIGFuZCB3aWxsIGJlIGBudWxsYCBmb3IgbGF5ZXIgdHlwZXNcbiAgICAgKiAgICAgdGhhdCBkbyBub3QgY3VycmVudGx5IHN1cHBvcnQgdGhpcyBhcmd1bWVudC4gVG8gc3RvcCBkZXRlY3Rpb24sIGNhbGxiYWNrXG4gICAgICogICAgIGZ1bmN0aW9ucyBjYW4gcmV0dXJuIGEgdHJ1dGh5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQsIGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZiBsYXN0XG4gICAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICAgKiBAdGVtcGxhdGUgUyxUXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRpb25zLmxheWVyRmlsdGVyIHx8IFRSVUU7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5mb3JFYWNoTGF5ZXJBdFBpeGVsKHBpeGVsLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBsYXllckZpbHRlcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgZmVhdHVyZXMgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlXG4gICAgICogZGV0ZWN0aW9uIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggYG9wdF9sYXllckZpbHRlcmAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBwaXhlbD9cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvb3JkaW5hdGUgPSB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCk7XG4gICAgICAgIG9wdF9vcHRpb25zID0gb3B0X29wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5sYXllckZpbHRlciA6IFRSVUU7XG4gICAgICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBjaGVja1dyYXBwZWQgPSBvcHRfb3B0aW9ucy5jaGVja1dyYXBwZWQgIT09IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgbGF5ZXJGaWx0ZXIsIG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBpbiB1c2VyIHByb2plY3Rpb24gZm9yIGEgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBpbiB2aWV3IHByb2plY3Rpb24gZm9yIGEgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRDb29yZGluYXRlSW50ZXJuYWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHBpeGVsIHBvc2l0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LlxuICAgICAqIEBwYXJhbSB7VUlFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gUGl4ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRQaXhlbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IHRoaXMudmlld3BvcnRfLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgZXZlbnRQb3NpdGlvbiA9IFxuICAgICAgICAvL0ZJWE1FIEFyZSB3ZSByZWFsbHkgY2FsbGluZyB0aGlzIHdpdGggYSBUb3VjaEV2ZW50IGFueXdoZXJlP1xuICAgICAgICAnY2hhbmdlZFRvdWNoZXMnIGluIGV2ZW50XG4gICAgICAgICAgICA/IC8qKiBAdHlwZSB7VG91Y2hFdmVudH0gKi8gKGV2ZW50KS5jaGFuZ2VkVG91Y2hlc1swXVxuICAgICAgICAgICAgOiAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChldmVudCk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBldmVudFBvc2l0aW9uLmNsaWVudFggLSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQsXG4gICAgICAgICAgICBldmVudFBvc2l0aW9uLmNsaWVudFkgLSB2aWV3cG9ydFBvc2l0aW9uLnRvcCxcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGFyZ2V0IGluIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJldHVybnMgd2hhdCBpcyBlbnRlcmVkIGFzIGFuIG9wdGlvbiBvciBpbiBzZXRUYXJnZXQ6XG4gICAgICogaWYgdGhhdCB3YXMgYW4gZWxlbWVudCwgaXQgcmV0dXJucyBhbiBlbGVtZW50OyBpZiBhIHN0cmluZywgaXQgcmV0dXJucyB0aGF0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9IFRoZSBFbGVtZW50IG9yIGlkIG9mIHRoZSBFbGVtZW50IHRoYXQgdGhlXG4gICAgICogICAgIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRhcmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlRBUkdFVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBET00gZWxlbWVudCBpbnRvIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLiBJbiBjb250cmFzdCB0b1xuICAgICAqIGBnZXRUYXJnZXRgIHRoaXMgbWV0aG9kIGFsd2F5cyByZXR1cm4gYW4gYEVsZW1lbnRgLCBvciBgbnVsbGAgaWYgdGhlXG4gICAgICogbWFwIGhhcyBubyB0YXJnZXQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSBlbGVtZW50IHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoKTtcbiAgICAgICAgaWYgKHRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldClcbiAgICAgICAgICAgICAgICA6IHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgICAqIHVzZXIgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIGZvciB0aGUgcGl4ZWwgcG9zaXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICByZXR1cm4gdG9Vc2VyQ29vcmRpbmF0ZSh0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCksIHRoaXMuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgICAqIG1hcCB2aWV3IHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSBmb3IgdGhlIHBpeGVsIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgY29udHJvbHMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgY29udHJvbHNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBDb250cm9scy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRDb250cm9scyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBvdmVybGF5cy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBvdmVybGF5c1xuICAgICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBPdmVybGF5cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFuIG92ZXJsYXkgYnkgaXRzIGlkZW50aWZpZXIgKHRoZSB2YWx1ZSByZXR1cm5lZCBieSBvdmVybGF5LmdldElkKCkpLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gU29cbiAgICAgKiBgbWFwLmdldE92ZXJsYXlCeUlkKDIpYCB3aWxsIHJldHVybiBhbiBvdmVybGF5IHdpdGggaWQgYCcyJ2Agb3IgYDJgLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gaWQgT3ZlcmxheSBpZGVudGlmaWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBPdmVybGF5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBvdmVybGF5ID0gdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV07XG4gICAgICAgIHJldHVybiBvdmVybGF5ICE9PSB1bmRlZmluZWQgPyBvdmVybGF5IDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGludGVyYWN0aW9ucy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBpbnRlcmFjdGlvbnNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKlxuICAgICAqIEludGVyYWN0aW9ucyBhcmUgdXNlZCBmb3IgZS5nLiBwYW4sIHpvb20gYW5kIHJvdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IEludGVyYWN0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRJbnRlcmFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVyYWN0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGF5ZXJncm91cCBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7TGF5ZXJHcm91cH0gQSBsYXllciBncm91cCBjb250YWluaW5nIHRoZSBsYXllcnMgaW4gdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMYXllckdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYXIgYW55IGV4aXN0aW5nIGxheWVycyBhbmQgYWRkIGxheWVycyB0byB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBsYXllcnMgVGhlIGxheWVycyB0byBiZSBhZGRlZCB0byB0aGUgbWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldExheWVycyA9IGZ1bmN0aW9uIChsYXllcnMpIHtcbiAgICAgICAgdmFyIGdyb3VwID0gdGhpcy5nZXRMYXllckdyb3VwKCk7XG4gICAgICAgIGlmIChsYXllcnMgaW5zdGFuY2VvZiBDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgICBncm91cC5zZXRMYXllcnMobGF5ZXJzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGdyb3VwLmdldExheWVycygpO1xuICAgICAgICBjb2xsZWN0aW9uLmNsZWFyKCk7XG4gICAgICAgIGNvbGxlY3Rpb24uZXh0ZW5kKGxheWVycyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbGxlY3Rpb24gb2YgbGF5ZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC5cbiAgICAgKiBAcmV0dXJuIHshQ29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD59IExheWVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICAgICAgcmV0dXJuIGxheWVycztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVycyBoYXZlIHNvdXJjZXMgdGhhdCBhcmUgc3RpbGwgbG9hZGluZy5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldExvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJTdGF0ZXNBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGVzQXJyYXlbaV0ubGF5ZXI7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICBpZiAoc291cmNlICYmIHNvdXJjZS5sb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwaXhlbCBmb3IgYSBjb29yZGluYXRlLiAgVGhpcyB0YWtlcyBhIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXJcbiAgICAgKiBwcm9qZWN0aW9uIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBBIHBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHZhciB2aWV3Q29vcmRpbmF0ZSA9IGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwodmlld0Nvb3JkaW5hdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwaXhlbCBmb3IgYSBjb29yZGluYXRlLiAgVGhpcyB0YWtlcyBhIGNvb3JkaW5hdGUgaW4gdGhlIG1hcCB2aWV3XG4gICAgICogcHJvamVjdGlvbiBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIEEgbWFwIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGNvb3JkaW5hdGUuc2xpY2UoMCwgMikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCByZW5kZXJlci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JlbmRlcmVyL01hcC5qc1wiKS5kZWZhdWx0fSBSZW5kZXJlclxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2l6ZSBvZiB0aGlzIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9IFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgbWFwIGluIHRoZSBET00uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5TSVpFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLiBBIHZpZXcgbWFuYWdlcyBwcm9wZXJ0aWVzIHN1Y2ggYXNcbiAgICAgKiBjZW50ZXIgYW5kIHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7Vmlld30gVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge1ZpZXd9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5WSUVXKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVmlld3BvcnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Vmlld3BvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgY29udGFpbmVyIGZvciBvdmVybGF5cy4gIEVsZW1lbnRzIGFkZGVkIHRvXG4gICAgICogdGhpcyBjb250YWluZXIgd2lsbCBsZXQgbW91c2Vkb3duIGFuZCB0b3VjaHN0YXJ0IGV2ZW50cyB0aHJvdWdoIHRvIHRoZSBtYXAsXG4gICAgICogc28gY2xpY2tzIGFuZCBnZXN0dXJlcyBvbiBhbiBvdmVybGF5IHdpbGwgdHJpZ2dlciB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9XG4gICAgICogZXZlbnRzLlxuICAgICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgYSBjb250YWluZXIgZm9yIG92ZXJsYXlzIHRoYXQgZG9uJ3QgYWxsb3dcbiAgICAgKiBldmVudCBwcm9wYWdhdGlvbi4gRWxlbWVudHMgYWRkZWQgdG8gdGhpcyBjb250YWluZXIgd29uJ3QgbGV0IG1vdXNlZG93biBhbmRcbiAgICAgKiB0b3VjaHN0YXJ0IGV2ZW50cyB0aHJvdWdoIHRvIHRoZSBtYXAsIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheVxuICAgICAqIGRvbid0IHRyaWdnZXIgYW55IHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0uXG4gICAgICogQHJldHVybiB7IUhUTUxFbGVtZW50fSBUaGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIgdGhhdCBzdG9wcyBldmVudHMuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4geyFEb2N1bWVudH0gVGhlIGRvY3VtZW50IHdoZXJlIHRoZSBtYXAgaXMgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3duZXJEb2N1bWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldEVsZW1lbnQgPyB0YXJnZXRFbGVtZW50Lm93bmVyRG9jdW1lbnQgOiBkb2N1bWVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGlsZVNvdXJjZUtleSBUaWxlIHNvdXJjZSBrZXkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwcmlvcml0eS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRpbGVQcmlvcml0eSA9IGZ1bmN0aW9uICh0aWxlLCB0aWxlU291cmNlS2V5LCB0aWxlQ2VudGVyLCB0aWxlUmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZ2V0VGlsZVByaW9yaXR5KHRoaXMuZnJhbWVTdGF0ZV8sIHRpbGUsIHRpbGVTb3VyY2VLZXksIHRpbGVDZW50ZXIsIHRpbGVSZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VUlFdmVudH0gYnJvd3NlckV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRfdHlwZV0gVHlwZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZUJyb3dzZXJFdmVudCA9IGZ1bmN0aW9uIChicm93c2VyRXZlbnQsIG9wdF90eXBlKSB7XG4gICAgICAgIHZhciB0eXBlID0gb3B0X3R5cGUgfHwgYnJvd3NlckV2ZW50LnR5cGU7XG4gICAgICAgIHZhciBtYXBCcm93c2VyRXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KHR5cGUsIHRoaXMsIGJyb3dzZXJFdmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01hcEJyb3dzZXJFdmVudH0gbWFwQnJvd3NlckV2ZW50IFRoZSBldmVudCB0byBoYW5kbGUuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVNYXBCcm93c2VyRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgLy8gV2l0aCBubyB2aWV3IGRlZmluZWQsIHdlIGNhbm5vdCB0cmFuc2xhdGUgcGl4ZWxzIGludG8gZ2VvZ3JhcGhpY2FsXG4gICAgICAgICAgICAvLyBjb29yZGluYXRlcyBzbyBpbnRlcmFjdGlvbnMgY2Fubm90IGJlIHVzZWQuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IG9yaWdpbmFsRXZlbnQudHlwZTtcbiAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiB8fFxuICAgICAgICAgICAgZXZlbnRUeXBlID09PSBFdmVudFR5cGUuV0hFRUwgfHxcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLktFWURPV04pIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLmdldE93bmVyRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIHZhciByb290Tm9kZSA9IHRoaXMudmlld3BvcnRfLmdldFJvb3ROb2RlXG4gICAgICAgICAgICAgICAgPyB0aGlzLnZpZXdwb3J0Xy5nZXRSb290Tm9kZSgpXG4gICAgICAgICAgICAgICAgOiBkb2M7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gLyoqIEB0eXBlIHtOb2RlfSAqLyAob3JpZ2luYWxFdmVudC50YXJnZXQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhlIHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIgZm9yIGVsZW1lbnRzIHdob3NlIGV2ZW50cyBhcmUgbm90IG1lYW50XG4gICAgICAgICAgICAvLyB0byBiZSBoYW5kbGVkIGJ5IG1hcCBpbnRlcmFjdGlvbnMuXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNvbnRhaW5zKHRhcmdldCkgfHxcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCBpZiB0aGUgZXZlbnQgdGFyZ2V0IGlzIGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lciB0aGF0IGlzIG5vIGxvbmdlciBpbiB0aGUgcGFnZS5cbiAgICAgICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIGZvciB0aGUgdGFyZ2V0IHRvIG5vIGxvbmdlciBiZSBpbiB0aGUgcGFnZSBpZiBpdCBoYXMgYmVlbiByZW1vdmVkIGluIGFuXG4gICAgICAgICAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXIsIHRoaXMgbWlnaHQgaGFwcGVuIGluIGEgQ29udHJvbCB0aGF0IHJlY3JlYXRlcyBpdCdzIGNvbnRlbnQgYmFzZWQgb25cbiAgICAgICAgICAgICAgICAvLyB1c2VyIGludGVyYWN0aW9uIGVpdGhlciBtYW51YWxseSBvciB2aWEgYSByZW5kZXIgaW4gc29tZXRoaW5nIGxpa2UgaHR0cHM6Ly9yZWFjdGpzLm9yZy9cbiAgICAgICAgICAgICAgICAhKHJvb3ROb2RlID09PSBkb2MgPyBkb2MuZG9jdW1lbnRFbGVtZW50IDogcm9vdE5vZGUpLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaEV2ZW50KG1hcEJyb3dzZXJFdmVudCkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJhY3Rpb25zQXJyYXkgPSB0aGlzLmdldEludGVyYWN0aW9ucygpLmdldEFycmF5KCkuc2xpY2UoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBpbnRlcmFjdGlvbnNBcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbiA9IGludGVyYWN0aW9uc0FycmF5W2ldO1xuICAgICAgICAgICAgICAgIGlmIChpbnRlcmFjdGlvbi5nZXRNYXAoKSAhPT0gdGhpcyB8fFxuICAgICAgICAgICAgICAgICAgICAhaW50ZXJhY3Rpb24uZ2V0QWN0aXZlKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29udCA9IGludGVyYWN0aW9uLmhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250IHx8IG1hcEJyb3dzZXJFdmVudC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVQb3N0UmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIC8vIE1hbmFnZSB0aGUgdGlsZSBxdWV1ZVxuICAgICAgICAvLyBJbWFnZSBsb2FkcyBhcmUgZXhwZW5zaXZlIGFuZCBhIGxpbWl0ZWQgcmVzb3VyY2UsIHNvIHRyeSB0byB1c2UgdGhlbVxuICAgICAgICAvLyBlZmZpY2llbnRseTpcbiAgICAgICAgLy8gKiBXaGVuIHRoZSB2aWV3IGlzIHN0YXRpYyB3ZSBhbGxvdyBhIGxhcmdlIG51bWJlciBvZiBwYXJhbGxlbCB0aWxlIGxvYWRzXG4gICAgICAgIC8vICAgdG8gY29tcGxldGUgdGhlIGZyYW1lIGFzIHF1aWNrbHkgYXMgcG9zc2libGUuXG4gICAgICAgIC8vICogV2hlbiBhbmltYXRpbmcgb3IgaW50ZXJhY3RpbmcsIGltYWdlIGxvYWRzIGNhbiBjYXVzZSBqYW5rcywgc28gd2UgcmVkdWNlXG4gICAgICAgIC8vICAgdGhlIG1heGltdW0gbnVtYmVyIG9mIGxvYWRzIHBlciBmcmFtZSBhbmQgbGltaXQgdGhlIG51bWJlciBvZiBwYXJhbGxlbFxuICAgICAgICAvLyAgIHRpbGUgbG9hZHMgdG8gcmVtYWluIHJlYWN0aXZlIHRvIHZpZXcgY2hhbmdlcyBhbmQgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2ZcbiAgICAgICAgLy8gICBsb2FkaW5nIHRpbGVzIHRoYXQgd2lsbCBxdWlja2x5IGRpc2FwcGVhciBmcm9tIHZpZXcuXG4gICAgICAgIHZhciB0aWxlUXVldWUgPSB0aGlzLnRpbGVRdWV1ZV87XG4gICAgICAgIGlmICghdGlsZVF1ZXVlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdmFyIG1heFRvdGFsTG9hZGluZyA9IHRoaXMubWF4VGlsZXNMb2FkaW5nXztcbiAgICAgICAgICAgIHZhciBtYXhOZXdMb2FkcyA9IG1heFRvdGFsTG9hZGluZztcbiAgICAgICAgICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhpbnRzID0gZnJhbWVTdGF0ZS52aWV3SGludHM7XG4gICAgICAgICAgICAgICAgaWYgKGhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gfHwgaGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb3dPbkZyYW1lQnVkZ2V0ID0gRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDg7XG4gICAgICAgICAgICAgICAgICAgIG1heFRvdGFsTG9hZGluZyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogODtcbiAgICAgICAgICAgICAgICAgICAgbWF4TmV3TG9hZHMgPSBsb3dPbkZyYW1lQnVkZ2V0ID8gMCA6IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbGVRdWV1ZS5nZXRUaWxlc0xvYWRpbmcoKSA8IG1heFRvdGFsTG9hZGluZykge1xuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5yZXByaW9yaXRpemUoKTsgLy8gRklYTUUgb25seSBjYWxsIGlmIHZpZXcgaGFzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICB0aWxlUXVldWUubG9hZE1vcmVUaWxlcyhtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJhbWVTdGF0ZSAmJlxuICAgICAgICAgICAgdGhpcy5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUpICYmXG4gICAgICAgICAgICAhZnJhbWVTdGF0ZS5hbmltYXRlICYmXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNvbXBsZXRlXykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUsIGZyYW1lU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwb3N0UmVuZGVyRnVuY3Rpb25zID0gdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcG9zdFJlbmRlckZ1bmN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zW2ldKHRoaXMsIGZyYW1lU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVTaXplQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmdldFZpZXcoKSAmJiAhdGhpcy5nZXRWaWV3KCkuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0VmlldygpLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVRhcmdldENoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c19baV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ09OVEVYVE1FTlUsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfKTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLldIRUVMLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50Xyk7XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuICAgICAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdGFyZ2V0IG1heSBiZSB1bmRlZmluZWQsIG51bGwsIGEgc3RyaW5nIG9yIGFuIEVsZW1lbnQuXG4gICAgICAgIC8vIElmIGl0J3MgYSBzdHJpbmcgd2UgY29udmVydCBpdCB0byBhbiBFbGVtZW50IGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICAvLyBJZiBpdCdzIG5vdCBub3cgYW4gRWxlbWVudCB3ZSByZW1vdmUgdGhlIHZpZXdwb3J0IGZyb20gdGhlIERPTS5cbiAgICAgICAgLy8gSWYgaXQncyBhbiBFbGVtZW50IHdlIGFwcGVuZCB0aGUgdmlld3BvcnQgZWxlbWVudCB0byBpdC5cbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8pO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyXy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheUtleV8pO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbmV3IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIodGhpcywgdGhpcy5tb3ZlVG9sZXJhbmNlXyk7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gTWFwQnJvd3NlckV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8uYWRkRXZlbnRMaXN0ZW5lcihNYXBCcm93c2VyRXZlbnRUeXBlW2tleV0sIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ09OVEVYVE1FTlUsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8sIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRWaWV3ID0gdGhpcy5nZXRPd25lckRvY3VtZW50KCkuZGVmYXVsdFZpZXc7XG4gICAgICAgICAgICB2YXIga2V5Ym9hcmRFdmVudFRhcmdldCA9ICF0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfXG4gICAgICAgICAgICAgICAgPyB0YXJnZXRFbGVtZW50XG4gICAgICAgICAgICAgICAgOiB0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18gPSBbXG4gICAgICAgICAgICAgICAgbGlzdGVuKGtleWJvYXJkRXZlbnRUYXJnZXQsIEV2ZW50VHlwZS5LRVlET1dOLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyksXG4gICAgICAgICAgICAgICAgbGlzdGVuKGtleWJvYXJkRXZlbnRUYXJnZXQsIEV2ZW50VHlwZS5LRVlQUkVTUywgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihkZWZhdWx0VmlldywgRXZlbnRUeXBlLlJFU0laRSwgdGhpcy51cGRhdGVTaXplLCB0aGlzKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgICAgIC8vIHVwZGF0ZVNpemUgY2FsbHMgc2V0U2l6ZSwgc28gbm8gbmVlZCB0byBjYWxsIHRoaXMucmVuZGVyXG4gICAgICAgIC8vIG91cnNlbHZlcyBoZXJlLlxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVRpbGVDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVZpZXdDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0U2l6ZV8oKTtcbiAgICAgICAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbGlzdGVuKHZpZXcsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4odmlldywgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXywgdGhpcyk7XG4gICAgICAgICAgICB2aWV3LnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXykge1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYXllckdyb3VwID0gdGhpcy5nZXRMYXllckdyb3VwKCk7XG4gICAgICAgIGlmIChsYXllckdyb3VwKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZUxheWVyQWRkXyhuZXcgR3JvdXBFdmVudCgnYWRkbGF5ZXInLCBsYXllckdyb3VwKSk7XG4gICAgICAgICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18gPSBbXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyR3JvdXAsIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSwgdGhpcy5yZW5kZXIsIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllckdyb3VwLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLnJlbmRlciwgdGhpcyksXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyR3JvdXAsICdhZGRsYXllcicsIHRoaXMuaGFuZGxlTGF5ZXJBZGRfLCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgJ3JlbW92ZWxheWVyJywgdGhpcy5oYW5kbGVMYXllclJlbW92ZV8sIHRoaXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgcmVuZGVyZWQuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5pc1JlbmRlcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmZyYW1lU3RhdGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVxdWVzdHMgYW4gaW1tZWRpYXRlIHJlbmRlciBpbiBhIHN5bmNocm9ub3VzIG1hbm5lci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXJTeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5XygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVkcmF3cyBhbGwgdGV4dCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlZHJhd1RleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZXNbaV0ubGF5ZXI7XG4gICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSkge1xuICAgICAgICAgICAgICAgIGxheWVyLmdldFJlbmRlcmVyKCkuaGFuZGxlRm9udHNDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcXVlc3QgYSBtYXAgcmVuZGVyaW5nIChhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXJfICYmIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBnaXZlbiBjb250cm9sIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgY29udHJvbCAob3IgdW5kZWZpbmVkXG4gICAgICogICAgIGlmIHRoZSBjb250cm9sIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUNvbnRyb2wgPSBmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb250cm9scygpLnJlbW92ZShjb250cm9sKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gZnJvbSB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgaW50ZXJhY3Rpb24gKG9yXG4gICAgICogICAgIHVuZGVmaW5lZCBpZiB0aGUgaW50ZXJhY3Rpb24gd2FzIG5vdCBmb3VuZCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkucmVtb3ZlKGludGVyYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIGxheWVyIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGxheWVyIChvciB1bmRlZmluZWQgaWYgdGhlXG4gICAgICogICAgIGxheWVyIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUxheWVyID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICAgICAgcmV0dXJuIGxheWVycy5yZW1vdmUobGF5ZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0dyb3VwLmpzXCIpLkdyb3VwRXZlbnR9IGV2ZW50IFRoZSBsYXllciByZW1vdmUgZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZUxheWVyUmVtb3ZlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZW1vdmVMYXllck1hcFByb3BlcnR5KGV2ZW50LmxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gb3ZlcmxheSBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgb3ZlcmxheSAob3IgdW5kZWZpbmVkXG4gICAgICogICAgIGlmIHRoZSBvdmVybGF5IHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZU92ZXJsYXkgPSBmdW5jdGlvbiAob3ZlcmxheSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPdmVybGF5cygpLnJlbW92ZShvdmVybGF5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRpbWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlckZyYW1lXyA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgICAgIHZhciBwcmV2aW91c0ZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICAvKiogQHR5cGUgez9GcmFtZVN0YXRlfSAqL1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IG51bGw7XG4gICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQgJiYgaGFzQXJlYShzaXplKSAmJiB2aWV3ICYmIHZpZXcuaXNEZWYoKSkge1xuICAgICAgICAgICAgdmFyIHZpZXdIaW50cyA9IHZpZXcuZ2V0SGludHModGhpcy5mcmFtZVN0YXRlXyA/IHRoaXMuZnJhbWVTdGF0ZV8udmlld0hpbnRzIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHZhciB2aWV3U3RhdGUgPSB2aWV3LmdldFN0YXRlKCk7XG4gICAgICAgICAgICBmcmFtZVN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGFuaW1hdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtOiB0aGlzLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyxcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXJUcmVlOiBudWxsLFxuICAgICAgICAgICAgICAgIGV4dGVudDogZ2V0Rm9yVmlld0FuZFNpemUodmlld1N0YXRlLmNlbnRlciwgdmlld1N0YXRlLnJlc29sdXRpb24sIHZpZXdTdGF0ZS5yb3RhdGlvbiwgc2l6ZSksXG4gICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZnJhbWVJbmRleF8rKyxcbiAgICAgICAgICAgICAgICBsYXllckluZGV4OiAwLFxuICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzQXJyYXk6IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBwaXhlbFJhdGlvOiB0aGlzLnBpeGVsUmF0aW9fLFxuICAgICAgICAgICAgICAgIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtOiB0aGlzLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyxcbiAgICAgICAgICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zOiBbXSxcbiAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZTogdGhpcy50aWxlUXVldWVfLFxuICAgICAgICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgICAgICAgdXNlZFRpbGVzOiB7fSxcbiAgICAgICAgICAgICAgICB2aWV3U3RhdGU6IHZpZXdTdGF0ZSxcbiAgICAgICAgICAgICAgICB2aWV3SGludHM6IHZpZXdIaW50cyxcbiAgICAgICAgICAgICAgICB3YW50ZWRUaWxlczoge30sXG4gICAgICAgICAgICAgICAgbWFwSWQ6IGdldFVpZCh0aGlzKSxcbiAgICAgICAgICAgICAgICByZW5kZXJUYXJnZXRzOiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodmlld1N0YXRlLm5leHRDZW50ZXIgJiYgdmlld1N0YXRlLm5leHRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gaXNOYU4odmlld1N0YXRlLm5leHRSb3RhdGlvbilcbiAgICAgICAgICAgICAgICAgICAgPyB2aWV3U3RhdGUucm90YXRpb25cbiAgICAgICAgICAgICAgICAgICAgOiB2aWV3U3RhdGUubmV4dFJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIGZyYW1lU3RhdGUubmV4dEV4dGVudCA9IGdldEZvclZpZXdBbmRTaXplKHZpZXdTdGF0ZS5uZXh0Q2VudGVyLCB2aWV3U3RhdGUubmV4dFJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lU3RhdGVfID0gZnJhbWVTdGF0ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlcl8ucmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZS5hbmltYXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18sIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucyk7XG4gICAgICAgICAgICBpZiAocHJldmlvdXNGcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vdmVTdGFydCA9ICF0aGlzLnByZXZpb3VzRXh0ZW50XyB8fFxuICAgICAgICAgICAgICAgICAgICAoIWlzRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAhZXF1YWxzKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50XykpO1xuICAgICAgICAgICAgICAgIGlmIChtb3ZlU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRVNUQVJULCB0aGlzLCBwcmV2aW91c0ZyYW1lU3RhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0V4dGVudF8gPSBjcmVhdGVPclVwZGF0ZUVtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaWRsZSA9IHRoaXMucHJldmlvdXNFeHRlbnRfICYmXG4gICAgICAgICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gJiZcbiAgICAgICAgICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddICYmXG4gICAgICAgICAgICAgICAgIWVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICAgICAgaWYgKGlkbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFRU5ELCB0aGlzLCBmcmFtZVN0YXRlKSk7XG4gICAgICAgICAgICAgICAgY2xvbmUoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLCBmcmFtZVN0YXRlKSk7XG4gICAgICAgIHRoaXMucmVuZGVyQ29tcGxldGVfID1cbiAgICAgICAgICAgICF0aGlzLnRpbGVRdWV1ZV8uZ2V0VGlsZXNMb2FkaW5nKCkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy50aWxlUXVldWVfLmdldENvdW50KCkgJiZcbiAgICAgICAgICAgICAgICAhdGhpcy5nZXRMb2FkaW5nKCk7XG4gICAgICAgIGlmICghdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8pIHtcbiAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZVBvc3RSZW5kZXIoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsYXllcmdyb3VwIG9mIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7TGF5ZXJHcm91cH0gbGF5ZXJHcm91cCBBIGxheWVyIGdyb3VwIGNvbnRhaW5pbmcgdGhlIGxheWVycyBpbiB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldExheWVyR3JvdXAgPSBmdW5jdGlvbiAobGF5ZXJHcm91cCkge1xuICAgICAgICB2YXIgb2xkTGF5ZXJHcm91cCA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpO1xuICAgICAgICBpZiAob2xkTGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVMYXllclJlbW92ZV8obmV3IEdyb3VwRXZlbnQoJ3JlbW92ZWxheWVyJywgb2xkTGF5ZXJHcm91cCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LkxBWUVSR1JPVVAsIGxheWVyR3JvdXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaXplIG9mIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBzaXplIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgbWFwIGluIHRoZSBET00uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuU0laRSwgc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRhcmdldCBlbGVtZW50IHRvIHJlbmRlciB0aGlzIG1hcCBpbnRvLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudFxuICAgICAqICAgICB0aGF0IHRoZSBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlRBUkdFVCwgdGFyZ2V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmlldyBmb3IgdGhpcyBtYXAuXG4gICAgICogQHBhcmFtIHtWaWV3fFByb21pc2U8aW1wb3J0KFwiLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zPn0gdmlldyBUaGUgdmlldyB0aGF0IGNvbnRyb2xzIHRoaXMgbWFwLlxuICAgICAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gcGFzcyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBvcHRpb25zIGZvciBjb25zdHJ1Y3RpbmcgYSB2aWV3LiAgVGhpc1xuICAgICAqIGFsdGVybmF0aXZlIGFsbG93cyB2aWV3IHByb3BlcnRpZXMgdG8gYmUgcmVzb2x2ZWQgYnkgc291cmNlcyBvciBvdGhlciBjb21wb25lbnRzIHRoYXQgbG9hZFxuICAgICAqIHZpZXctcmVsYXRlZCBtZXRhZGF0YS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldFZpZXcgPSBmdW5jdGlvbiAodmlldykge1xuICAgICAgICBpZiAoIXZpZXcgfHwgdmlldyBpbnN0YW5jZW9mIFZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlZJRVcsIHZpZXcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlZJRVcsIG5ldyBWaWV3KCkpO1xuICAgICAgICB2YXIgbWFwID0gdGhpcztcbiAgICAgICAgdmlldy50aGVuKGZ1bmN0aW9uICh2aWV3T3B0aW9ucykge1xuICAgICAgICAgICAgbWFwLnNldFZpZXcobmV3IFZpZXcodmlld09wdGlvbnMpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGb3JjZSBhIHJlY2FsY3VsYXRpb24gb2YgdGhlIG1hcCB2aWV3cG9ydCBzaXplLiAgVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW5cbiAgICAgKiB0aGlyZC1wYXJ0eSBjb2RlIGNoYW5nZXMgdGhlIHNpemUgb2YgdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51cGRhdGVTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgICAgICB2YXIgc2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyTGVmdFdpZHRoJ10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdMZWZ0J10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdSaWdodCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJSaWdodFdpZHRoJ10pO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlclRvcFdpZHRoJ10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdUb3AnXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ0JvdHRvbSddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJCb3R0b21XaWR0aCddKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4od2lkdGgpICYmICFpc05hTihoZWlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IFt3aWR0aCwgaGVpZ2h0XTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc0FyZWEoc2l6ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgISEodGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5vZmZzZXRIZWlnaHQgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyBtYXAgdmlzaWJsZSBiZWNhdXNlIHRoZSBtYXAgY29udGFpbmVyJ3Mgd2lkdGggb3IgaGVpZ2h0IGFyZSAwLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTaXplKHNpemUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0U2l6ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlY29tcHV0ZXMgdGhlIHZpZXdwb3J0IHNpemUgYW5kIHNhdmUgaXQgb24gdGhlIHZpZXcgb2JqZWN0IChpZiBhbnkpXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnVwZGF0ZVZpZXdwb3J0U2l6ZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3KSB7XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgICAgICBpZiAoY29tcHV0ZWRTdHlsZS53aWR0aCAmJiBjb21wdXRlZFN0eWxlLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNpemUgPSBbXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGNvbXB1dGVkU3R5bGUud2lkdGgsIDEwKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5oZWlnaHQsIDEwKSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmlldy5zZXRWaWV3cG9ydFNpemUoc2l6ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQbHVnZ2FibGVNYXA7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogQHBhcmFtIHtNYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICogQHJldHVybiB7TWFwT3B0aW9uc0ludGVybmFsfSBJbnRlcm5hbCBtYXAgb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlT3B0aW9uc0ludGVybmFsKG9wdGlvbnMpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9XG4gICAgICovXG4gICAgdmFyIGtleWJvYXJkRXZlbnRUYXJnZXQgPSBudWxsO1xuICAgIGlmIChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBrZXlib2FyZEV2ZW50VGFyZ2V0ID1cbiAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQpXG4gICAgICAgICAgICAgICAgOiBvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgKi9cbiAgICB2YXIgdmFsdWVzID0ge307XG4gICAgdmFyIGxheWVyR3JvdXAgPSBvcHRpb25zLmxheWVycyAmJlxuICAgICAgICB0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMubGF5ZXJzKS5nZXRMYXllcnMpID09PSAnZnVuY3Rpb24nXG4gICAgICAgID8gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAob3B0aW9ucy5sYXllcnMpXG4gICAgICAgIDogbmV3IExheWVyR3JvdXAoeyBsYXllcnM6IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMubGF5ZXJzKSB9KTtcbiAgICB2YWx1ZXNbTWFwUHJvcGVydHkuTEFZRVJHUk9VUF0gPSBsYXllckdyb3VwO1xuICAgIHZhbHVlc1tNYXBQcm9wZXJ0eS5UQVJHRVRdID0gb3B0aW9ucy50YXJnZXQ7XG4gICAgdmFsdWVzW01hcFByb3BlcnR5LlZJRVddID1cbiAgICAgICAgb3B0aW9ucy52aWV3IGluc3RhbmNlb2YgVmlldyA/IG9wdGlvbnMudmlldyA6IG5ldyBWaWV3KCk7XG4gICAgdmFyIGNvbnRyb2xzO1xuICAgIGlmIChvcHRpb25zLmNvbnRyb2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5jb250cm9scykpIHtcbiAgICAgICAgICAgIGNvbnRyb2xzID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5jb250cm9scy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMuY29udHJvbHMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJywgNDcpOyAvLyBFeHBlY3RlZCBgY29udHJvbHNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIGNvbnRyb2xzID0gLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5jb250cm9scyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGludGVyYWN0aW9ucztcbiAgICBpZiAob3B0aW9ucy5pbnRlcmFjdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmludGVyYWN0aW9ucykpIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMuaW50ZXJhY3Rpb25zLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5pbnRlcmFjdGlvbnMpLmdldEFycmF5KSA9PT1cbiAgICAgICAgICAgICAgICAnZnVuY3Rpb24nLCA0OCk7IC8vIEV4cGVjdGVkIGBpbnRlcmFjdGlvbnNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIGludGVyYWN0aW9ucyA9IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMuaW50ZXJhY3Rpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgb3ZlcmxheXM7XG4gICAgaWYgKG9wdGlvbnMub3ZlcmxheXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLm92ZXJsYXlzKSkge1xuICAgICAgICAgICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLm92ZXJsYXlzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5vdmVybGF5cykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0OSk7IC8vIEV4cGVjdGVkIGBvdmVybGF5c2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgICAgICAgb3ZlcmxheXMgPSBvcHRpb25zLm92ZXJsYXlzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRyb2xzOiBjb250cm9scyxcbiAgICAgICAgaW50ZXJhY3Rpb25zOiBpbnRlcmFjdGlvbnMsXG4gICAgICAgIGtleWJvYXJkRXZlbnRUYXJnZXQ6IGtleWJvYXJkRXZlbnRUYXJnZXQsXG4gICAgICAgIG92ZXJsYXlzOiBvdmVybGF5cyxcbiAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IFBsdWdnYWJsZU1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsdWdnYWJsZU1hcC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQ29udHJvbFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZSB9IGZyb20gJy4uL2RvbS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR9IFtlbGVtZW50XSBUaGUgZWxlbWVudCBpcyB0aGUgY29udHJvbCdzXG4gKiBjb250YWluZXIgZWxlbWVudC4gVGhpcyBvbmx5IG5lZWRzIHRvIGJlIHNwZWNpZmllZCBpZiB5b3UncmUgZGV2ZWxvcGluZ1xuICogYSBjdXN0b20gY29udHJvbC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW5cbiAqIHRoZSBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudFxuICogdGhlIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIGlzIGEgdmlzaWJsZSB3aWRnZXQgd2l0aCBhIERPTSBlbGVtZW50IGluIGEgZml4ZWQgcG9zaXRpb24gb24gdGhlXG4gKiBzY3JlZW4uIFRoZXkgY2FuIGludm9sdmUgdXNlciBpbnB1dCAoYnV0dG9ucyksIG9yIGJlIGluZm9ybWF0aW9uYWwgb25seTtcbiAqIHRoZSBwb3NpdGlvbiBpcyBkZXRlcm1pbmVkIHVzaW5nIENTUy4gQnkgZGVmYXVsdCB0aGVzZSBhcmUgcGxhY2VkIGluIHRoZVxuICogY29udGFpbmVyIHdpdGggQ1NTIGNsYXNzIG5hbWUgYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCwgYnV0IGNhbiB1c2VcbiAqIGFueSBvdXRzaWRlIERPTSBlbGVtZW50LlxuICpcbiAqIFRoaXMgaXMgdGhlIGJhc2UgY2xhc3MgZm9yIGNvbnRyb2xzLiBZb3UgY2FuIHVzZSBpdCBmb3Igc2ltcGxlIGN1c3RvbVxuICogY29udHJvbHMgYnkgY3JlYXRpbmcgdGhlIGVsZW1lbnQgd2l0aCBsaXN0ZW5lcnMsIGNyZWF0aW5nIGFuIGluc3RhbmNlOlxuICogYGBganNcbiAqIHZhciBteUNvbnRyb2wgPSBuZXcgQ29udHJvbCh7ZWxlbWVudDogbXlFbGVtZW50fSk7XG4gKiBgYGBcbiAqIGFuZCB0aGVuIGFkZGluZyB0aGlzIHRvIHRoZSBtYXAuXG4gKlxuICogVGhlIG1haW4gYWR2YW50YWdlIG9mIGhhdmluZyB0aGlzIGFzIGEgY29udHJvbCByYXRoZXIgdGhhbiBhIHNpbXBsZSBzZXBhcmF0ZVxuICogRE9NIGVsZW1lbnQgaXMgdGhhdCBwcmV2ZW50aW5nIHByb3BhZ2F0aW9uIGlzIGhhbmRsZWQgZm9yIHlvdS4gQ29udHJvbHNcbiAqIHdpbGwgYWxzbyBiZSBvYmplY3RzIGluIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LCBzbyB5b3UgY2FuIHVzZSB0aGVpciBtZXRob2RzLlxuICpcbiAqIFlvdSBjYW4gYWxzbyBleHRlbmQgdGhpcyBiYXNlIGZvciB5b3VyIG93biBjb250cm9sIGNsYXNzLiBTZWVcbiAqIGV4YW1wbGVzL2N1c3RvbS1jb250cm9scyBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdG8gZG8gdGhpcy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBDb250cm9sID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb250cm9sLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBDb250cm9sIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29udHJvbChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBlbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50O1xuICAgICAgICBpZiAoZWxlbWVudCAmJiAhb3B0aW9ucy50YXJnZXQgJiYgIWVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cykge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50ID8gZWxlbWVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGlzdGVuZXJLZXlzID0gW107XG4gICAgICAgIGlmIChvcHRpb25zLnJlbmRlcikge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyID0gb3B0aW9ucy5yZW5kZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRUYXJnZXQob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBjb250cm9sLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICAgKiB0aGUgbWFwIGhlcmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmxpc3RlbmVyS2V5cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubGlzdGVuZXJLZXlzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldF9cbiAgICAgICAgICAgICAgICA/IHRoaXMudGFyZ2V0X1xuICAgICAgICAgICAgICAgIDogbWFwLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKTtcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyICE9PSBWT0lEKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4obWFwLCBNYXBFdmVudFR5cGUuUE9TVFJFTkRFUiwgdGhpcy5yZW5kZXIsIHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgY29udHJvbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7IH07XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHNldCBhIHRhcmdldCBlbGVtZW50IGZvciB0aGUgY29udHJvbC4gSXQgaGFzIG5vXG4gICAgICogZWZmZWN0IGlmIGl0IGlzIGNhbGxlZCBhZnRlciB0aGUgY29udHJvbCBoYXMgYmVlbiBhZGRlZCB0byB0aGUgbWFwIChpLmUuXG4gICAgICogYWZ0ZXIgYHNldE1hcGAgaXMgY2FsbGVkIG9uIHRoZSBjb250cm9sKS4gSWYgbm8gYHRhcmdldGAgaXMgc2V0IGluIHRoZVxuICAgICAqIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSBjb250cm9sIGNvbnN0cnVjdG9yIGFuZCBpZiBgc2V0VGFyZ2V0YCBpcyBub3QgY2FsbGVkXG4gICAgICogdGhlbiB0aGUgY29udHJvbCBpcyBhZGRlZCB0byB0aGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxzdHJpbmd9IHRhcmdldCBUYXJnZXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50YXJnZXRfID1cbiAgICAgICAgICAgIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KSA6IHRhcmdldDtcbiAgICB9O1xuICAgIHJldHVybiBDb250cm9sO1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBDb250cm9sO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udHJvbC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQXR0cmlidXRpb25cbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19DT0xMQVBTRUQsIENMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBlcXVhbHMgfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgeyBpblZpZXcgfSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgeyByZW1vdmVDaGlsZHJlbiwgcmVwbGFjZU5vZGUgfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtYXR0cmlidXRpb24nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdVxuICogd2FudCB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAnc1xuICogdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb2xsYXBzaWJsZV0gU3BlY2lmeSBpZiBhdHRyaWJ1dGlvbnMgY2FuXG4gKiBiZSBjb2xsYXBzZWQuIElmIG5vdCBzcGVjaWZpZWQsIHNvdXJjZXMgY29udHJvbCB0aGlzIGJlaGF2aW9yIHdpdGggdGhlaXJcbiAqIGBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZWAgc2V0dGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNlZD10cnVlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBzaG91bGRcbiAqIGJlIGNvbGxhcHNlZCBhdCBzdGFydHVwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXBMYWJlbD0nQXR0cmlidXRpb25zJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtsYWJlbD0naSddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2V4cGFuZENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWV4cGFuZCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtjb2xsYXBzZUxhYmVsPSfigLonXSBUZXh0IGxhYmVsIHRvIHVzZVxuICogZm9yIHRoZSBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NvbGxhcHNlQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctY29sbGFwc2UnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlXG4gKiBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDb250cm9sIHRvIHNob3cgYWxsIHRoZSBhdHRyaWJ1dGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoZSBsYXllciBzb3VyY2VzXG4gKiBpbiB0aGUgbWFwLiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIGluY2x1ZGVkIGluIG1hcHMuXG4gKiBCeSBkZWZhdWx0IGl0IHdpbGwgc2hvdyBpbiB0aGUgYm90dG9tIHJpZ2h0IHBvcnRpb24gb2YgdGhlIG1hcCwgYnV0IHRoaXMgY2FuXG4gKiBiZSBjaGFuZ2VkIGJ5IHVzaW5nIGEgY3NzIHNlbGVjdG9yIGZvciBgLm9sLWF0dHJpYnV0aW9uYC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBBdHRyaWJ1dGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXR0cmlidXRpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIEF0dHJpYnV0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXR0cmlidXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVsRWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2xsYXBzZWRfID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29sbGFwc2VkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlZCA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVzZXJDb2xsYXBzZWRfID0gX3RoaXMuY29sbGFwc2VkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcnJpZGVDb2xsYXBzaWJsZV8gPSBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbGxhcHNpYmxlXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNpYmxlIDogdHJ1ZTtcbiAgICAgICAgaWYgKCFfdGhpcy5jb2xsYXBzaWJsZV8pIHtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlZF8gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLWF0dHJpYnV0aW9uJztcbiAgICAgICAgdmFyIHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aXBMYWJlbCA6ICdBdHRyaWJ1dGlvbnMnO1xuICAgICAgICB2YXIgZXhwYW5kQ2xhc3NOYW1lID0gb3B0aW9ucy5leHBhbmRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmV4cGFuZENsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWV4cGFuZCc7XG4gICAgICAgIHZhciBjb2xsYXBzZUxhYmVsID0gb3B0aW9ucy5jb2xsYXBzZUxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlTGFiZWwgOiAnXFx1MjAzQSc7XG4gICAgICAgIHZhciBjb2xsYXBzZUNsYXNzTmFtZSA9IG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbGxhcHNlQ2xhc3NOYW1lXG4gICAgICAgICAgICA6IGNsYXNzTmFtZSArICctY29sbHBhc2UnO1xuICAgICAgICBpZiAodHlwZW9mIGNvbGxhcHNlTGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8udGV4dENvbnRlbnQgPSBjb2xsYXBzZUxhYmVsO1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8uY2xhc3NOYW1lID0gY29sbGFwc2VDbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGNvbGxhcHNlTGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdpJztcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gZXhwYW5kQ2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFjdGl2ZUxhYmVsID0gX3RoaXMuY29sbGFwc2libGVfICYmICFfdGhpcy5jb2xsYXBzZWRfID8gX3RoaXMuY29sbGFwc2VMYWJlbF8gOiBfdGhpcy5sYWJlbF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFN0cmluZyghX3RoaXMuY29sbGFwc2VkXykpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8uYXBwZW5kQ2hpbGQoYWN0aXZlTGFiZWwpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcyksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIENMQVNTX1VOU0VMRUNUQUJMRSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgQ0xBU1NfQ09OVFJPTCArXG4gICAgICAgICAgICAoX3RoaXMuY29sbGFwc2VkXyAmJiBfdGhpcy5jb2xsYXBzaWJsZV8gPyAnICcgKyBDTEFTU19DT0xMQVBTRUQgOiAnJykgK1xuICAgICAgICAgICAgKF90aGlzLmNvbGxhcHNpYmxlXyA/ICcnIDogJyBvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnRvZ2dsZUJ1dHRvbl8pO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKF90aGlzLnVsRWxlbWVudF8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIGN1cnJlbnRseSByZW5kZXJlZCByZXNvbHV0aW9ucy5cbiAgICAgICAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29sbGVjdCBhIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMgYW5kIHNldCB0aGUgY29sbGFwc2libGUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBdHRyaWJ1dGlvbnMuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18gPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBkZXRlcm1pbmUgaWYgYW4gYXR0cmlidXRpb24gYWxyZWFkeSBleGlzdHMuXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgbG9va3VwID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHZpc2libGVBdHRyaWJ1dGlvbnMgPSBbXTtcbiAgICAgICAgdmFyIGNvbGxhcHNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgICAgICAgaWYgKCFpblZpZXcobGF5ZXJTdGF0ZSwgZnJhbWVTdGF0ZS52aWV3U3RhdGUpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXJTdGF0ZS5sYXllcikuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF0dHJpYnV0aW9uR2V0dGVyID0gc291cmNlLmdldEF0dHJpYnV0aW9ucygpO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGlvbkdldHRlcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGF0dHJpYnV0aW9ucyA9IGF0dHJpYnV0aW9uR2V0dGVyKGZyYW1lU3RhdGUpO1xuICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbGxhcHNpYmxlID1cbiAgICAgICAgICAgICAgICBjb2xsYXBzaWJsZSAmJiBzb3VyY2UuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUoKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zW2pdIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9va3VwW2F0dHJpYnV0aW9uc1tqXV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoYXR0cmlidXRpb25zIGluIGxvb2t1cCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUF0dHJpYnV0aW9ucy5wdXNoKGF0dHJpYnV0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cFthdHRyaWJ1dGlvbnNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbGxhcHNpYmxlKGNvbGxhcHNpYmxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmlzaWJsZUF0dHJpYnV0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnVwZGF0ZUVsZW1lbnRfID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGF0dHJpYnV0aW9ucyA9IHRoaXMuY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18oZnJhbWVTdGF0ZSk7XG4gICAgICAgIHZhciB2aXNpYmxlID0gYXR0cmlidXRpb25zLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8gIT0gdmlzaWJsZSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB2aXNpYmxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcXVhbHMoYXR0cmlidXRpb25zLCB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZW1vdmVDaGlsZHJlbih0aGlzLnVsRWxlbWVudF8pO1xuICAgICAgICAvLyBhcHBlbmQgdGhlIGF0dHJpYnV0aW9uc1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBhdHRyaWJ1dGlvbnNbaV07XG4gICAgICAgICAgICB0aGlzLnVsRWxlbWVudF8uYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18gPSBhdHRyaWJ1dGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgICAgIHRoaXMudXNlckNvbGxhcHNlZF8gPSB0aGlzLmNvbGxhcHNlZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5oYW5kbGVUb2dnbGVfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShDTEFTU19DT0xMQVBTRUQpO1xuICAgICAgICBpZiAodGhpcy5jb2xsYXBzZWRfKSB7XG4gICAgICAgICAgICByZXBsYWNlTm9kZSh0aGlzLmNvbGxhcHNlTGFiZWxfLCB0aGlzLmxhYmVsXyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXBsYWNlTm9kZSh0aGlzLmxhYmVsXywgdGhpcy5jb2xsYXBzZUxhYmVsXyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2xsYXBzZWRfID0gIXRoaXMuY29sbGFwc2VkXztcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25fLnNldEF0dHJpYnV0ZSgnYXJpYS1leHBhbmRlZCcsIFN0cmluZyghdGhpcy5jb2xsYXBzZWRfKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBhdHRyaWJ1dGlvbiBpcyBjb2xsYXBzaWJsZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuZ2V0Q29sbGFwc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxhcHNpYmxlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSBhdHRyaWJ1dGlvbiBzaG91bGQgYmUgY29sbGFwc2libGUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzaWJsZSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5zZXRDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uIChjb2xsYXBzaWJsZSkge1xuICAgICAgICBpZiAodGhpcy5jb2xsYXBzaWJsZV8gPT09IGNvbGxhcHNpYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb2xsYXBzaWJsZV8gPSBjb2xsYXBzaWJsZTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ29sLXVuY29sbGFwc2libGUnKTtcbiAgICAgICAgaWYgKHRoaXMudXNlckNvbGxhcHNlZF8pIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb2xsYXBzZSBvciBleHBhbmQgdGhlIGF0dHJpYnV0aW9uIGFjY29yZGluZyB0byB0aGUgcGFzc2VkIHBhcmFtZXRlci4gV2lsbFxuICAgICAqIG5vdCBkbyBhbnl0aGluZyBpZiB0aGUgYXR0cmlidXRpb24gaXNuJ3QgY29sbGFwc2libGUgb3IgaWYgdGhlIGN1cnJlbnRcbiAgICAgKiBjb2xsYXBzZWQgc3RhdGUgaXMgYWxyZWFkeSB0aGUgb25lIHJlcXVlc3RlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNlZCBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuc2V0Q29sbGFwc2VkID0gZnVuY3Rpb24gKGNvbGxhcHNlZCkge1xuICAgICAgICB0aGlzLnVzZXJDb2xsYXBzZWRfID0gY29sbGFwc2VkO1xuICAgICAgICBpZiAoIXRoaXMuY29sbGFwc2libGVfIHx8IHRoaXMuY29sbGFwc2VkXyA9PT0gY29sbGFwc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYHRydWVgIHdoZW4gdGhlIGF0dHJpYnV0aW9uIGlzIGN1cnJlbnRseSBjb2xsYXBzZWQgb3IgYGZhbHNlYFxuICAgICAqIG90aGVyd2lzZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuZ2V0Q29sbGFwc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzZWRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBhdHRyaWJ1dGlvbiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50XyhtYXBFdmVudC5mcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIHJldHVybiBBdHRyaWJ1dGlvbjtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgQXR0cmlidXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdHRyaWJ1dGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvUm90YXRlXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfSElEREVOLCBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1yb3RhdGUnXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbbGFiZWw9J+KHpyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgcm90YXRlIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXBMYWJlbD0nUmVzZXQgcm90YXRpb24nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NvbXBhc3NDbGFzc05hbWU9J29sLWNvbXBhc3MnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlIGNvbXBhc3MuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F1dG9IaWRlPXRydWVdIEhpZGUgdGhlIGNvbnRyb2wgd2hlbiByb3RhdGlvbiBpcyAwLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgY29udHJvbCBzaG91bGRcbiAqIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgIGNhbGxiYWNrLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbigpOnZvaWR9IFtyZXNldE5vcnRoXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgY29udHJvbCBpcyBjbGlja2VkLlxuICogVGhpcyB3aWxsIG92ZXJyaWRlIHRoZSBkZWZhdWx0IGByZXNldE5vcnRoYC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZSBjb250cm9sIHRvIGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGJ1dHRvbiBjb250cm9sIHRvIHJlc2V0IHJvdGF0aW9uIHRvIDAuXG4gKiBUbyBzdHlsZSB0aGlzIGNvbnRyb2wgdXNlIGNzcyBzZWxlY3RvciBgLm9sLXJvdGF0ZWAuIEEgYC5vbC1oaWRkZW5gIGNzc1xuICogc2VsZWN0b3IgaXMgYWRkZWQgdG8gdGhlIGJ1dHRvbiB3aGVuIHRoZSByb3RhdGlvbiBpcyAwLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFJvdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUm90YXRlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBSb3RhdGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1yb3RhdGUnO1xuICAgICAgICB2YXIgbGFiZWwgPSBvcHRpb25zLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxhYmVsIDogJ1xcdTIxRTcnO1xuICAgICAgICB2YXIgY29tcGFzc0NsYXNzTmFtZSA9IG9wdGlvbnMuY29tcGFzc0NsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuY29tcGFzc0NsYXNzTmFtZVxuICAgICAgICAgICAgOiAnb2wtY29tcGFzcyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYWJlbF8gPSBudWxsO1xuICAgICAgICBpZiAodHlwZW9mIGxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLmNsYXNzTmFtZSA9IGNvbXBhc3NDbGFzc05hbWU7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLmNsYXNzTGlzdC5hZGQoY29tcGFzc0NsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnUmVzZXQgcm90YXRpb24nO1xuICAgICAgICB2YXIgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi5jbGFzc05hbWUgPSBjbGFzc05hbWUgKyAnLXJlc2V0JztcbiAgICAgICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChfdGhpcy5sYWJlbF8pO1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzKSwgZmFsc2UpO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IGNsYXNzTmFtZSArICcgJyArIENMQVNTX1VOU0VMRUNUQUJMRSArICcgJyArIENMQVNTX0NPTlRST0w7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG4gICAgICAgIF90aGlzLmNhbGxSZXNldE5vcnRoXyA9IG9wdGlvbnMucmVzZXROb3J0aCA/IG9wdGlvbnMucmVzZXROb3J0aCA6IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hdXRvSGlkZV8gPSBvcHRpb25zLmF1dG9IaWRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF1dG9IaWRlIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpb25fID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAoX3RoaXMuYXV0b0hpZGVfKSB7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUm90YXRlLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMuY2FsbFJlc2V0Tm9ydGhfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbFJlc2V0Tm9ydGhfKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0Tm9ydGhfKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUm90YXRlLnByb3RvdHlwZS5yZXNldE5vcnRoXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKCF2aWV3KSB7XG4gICAgICAgICAgICAvLyB0aGUgbWFwIGRvZXMgbm90IGhhdmUgYSB2aWV3LCBzbyB3ZSBjYW4ndCBhY3RcbiAgICAgICAgICAgIC8vIHVwb24gaXRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm90YXRpb24gPSB2aWV3LmdldFJvdGF0aW9uKCk7XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPiAwICYmIHJvdGF0aW9uICUgKDIgKiBNYXRoLlBJKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0Um90YXRpb24oMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcm90YXRlIGNvbnRyb2wgZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBSb3RhdGUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtYXBFdmVudCkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IG1hcEV2ZW50LmZyYW1lU3RhdGU7XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgICBpZiAocm90YXRpb24gIT0gdGhpcy5yb3RhdGlvbl8pIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSAncm90YXRlKCcgKyByb3RhdGlvbiArICdyYWQpJztcbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9IaWRlXykge1xuICAgICAgICAgICAgICAgIHZhciBjb250YWlucyA9IHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbnRhaW5zICYmIHJvdGF0aW9uID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbnRhaW5zICYmIHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKENMQVNTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYWJlbF8uc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm90YXRpb25fID0gcm90YXRpb247XG4gICAgfTtcbiAgICByZXR1cm4gUm90YXRlO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBSb3RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Sb3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1pvb21cbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19DT05UUk9MLCBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLXpvb20nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbUluQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctaW4nXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlIHpvb20taW4gYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tT3V0Q2xhc3NOYW1lPWNsYXNzTmFtZSArICctb3V0J10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSB6b29tLW91dCBidXR0b24uXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW3pvb21JbkxhYmVsPScrJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSB6b29tLWluXG4gKiBidXR0b24uIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tT3V0TGFiZWw9J+KAkyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JblRpcExhYmVsPSdab29tIGluJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tT3V0VGlwTGFiZWw9J1pvb20gb3V0J10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBkZWx0YSBhcHBsaWVkIG9uIGVhY2ggY2xpY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHdpdGggMiBidXR0b25zLCBvbmUgZm9yIHpvb20gaW4gYW5kIG9uZSBmb3Igem9vbSBvdXQuXG4gKiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIG9mIGEgbWFwLiBUbyBzdHlsZSB0aGlzIGNvbnRyb2xcbiAqIHVzZSBjc3Mgc2VsZWN0b3JzIGAub2wtem9vbS1pbmAgYW5kIGAub2wtem9vbS1vdXRgLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFpvb20gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC16b29tJztcbiAgICAgICAgdmFyIGRlbHRhID0gb3B0aW9ucy5kZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kZWx0YSA6IDE7XG4gICAgICAgIHZhciB6b29tSW5DbGFzc05hbWUgPSBvcHRpb25zLnpvb21JbkNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuem9vbUluQ2xhc3NOYW1lXG4gICAgICAgICAgICA6IGNsYXNzTmFtZSArICctaW4nO1xuICAgICAgICB2YXIgem9vbU91dENsYXNzTmFtZSA9IG9wdGlvbnMuem9vbU91dENsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuem9vbU91dENsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLW91dCc7XG4gICAgICAgIHZhciB6b29tSW5MYWJlbCA9IG9wdGlvbnMuem9vbUluTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbUluTGFiZWwgOiAnKyc7XG4gICAgICAgIHZhciB6b29tT3V0TGFiZWwgPSBvcHRpb25zLnpvb21PdXRMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tT3V0TGFiZWwgOiAnXFx1MjAxMyc7XG4gICAgICAgIHZhciB6b29tSW5UaXBMYWJlbCA9IG9wdGlvbnMuem9vbUluVGlwTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbUluVGlwTGFiZWwgOiAnWm9vbSBpbic7XG4gICAgICAgIHZhciB6b29tT3V0VGlwTGFiZWwgPSBvcHRpb25zLnpvb21PdXRUaXBMYWJlbCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuem9vbU91dFRpcExhYmVsXG4gICAgICAgICAgICA6ICdab29tIG91dCc7XG4gICAgICAgIHZhciBpbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgaW5FbGVtZW50LmNsYXNzTmFtZSA9IHpvb21JbkNsYXNzTmFtZTtcbiAgICAgICAgaW5FbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgaW5FbGVtZW50LnRpdGxlID0gem9vbUluVGlwTGFiZWw7XG4gICAgICAgIGluRWxlbWVudC5hcHBlbmRDaGlsZCh0eXBlb2Ygem9vbUluTGFiZWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHpvb21JbkxhYmVsKVxuICAgICAgICAgICAgOiB6b29tSW5MYWJlbCk7XG4gICAgICAgIGluRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMsIGRlbHRhKSwgZmFsc2UpO1xuICAgICAgICB2YXIgb3V0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBvdXRFbGVtZW50LmNsYXNzTmFtZSA9IHpvb21PdXRDbGFzc05hbWU7XG4gICAgICAgIG91dEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBvdXRFbGVtZW50LnRpdGxlID0gem9vbU91dFRpcExhYmVsO1xuICAgICAgICBvdXRFbGVtZW50LmFwcGVuZENoaWxkKHR5cGVvZiB6b29tT3V0TGFiZWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHpvb21PdXRMYWJlbClcbiAgICAgICAgICAgIDogem9vbU91dExhYmVsKTtcbiAgICAgICAgb3V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMsIC1kZWx0YSksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgKyAnICcgKyBDTEFTU19VTlNFTEVDVEFCTEUgKyAnICcgKyBDTEFTU19DT05UUk9MO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpbkVsZW1lbnQpO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG91dEVsZW1lbnQpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFpvb20gZGVsdGEuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBab29tLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZGVsdGEsIGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuem9vbUJ5RGVsdGFfKGRlbHRhKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgWm9vbS5wcm90b3R5cGUuem9vbUJ5RGVsdGFfID0gZnVuY3Rpb24gKGRlbHRhKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgLy8gdGhlIG1hcCBkb2VzIG5vdCBoYXZlIGEgdmlldywgc28gd2UgY2FuJ3QgYWN0XG4gICAgICAgICAgICAvLyB1cG9uIGl0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnJlbnRab29tID0gdmlldy5nZXRab29tKCk7XG4gICAgICAgIGlmIChjdXJyZW50Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbmV3Wm9vbSA9IHZpZXcuZ2V0Q29uc3RyYWluZWRab29tKGN1cnJlbnRab29tICsgZGVsdGEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICB6b29tOiBuZXdab29tLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0Wm9vbShuZXdab29tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFpvb207XG59KENvbnRyb2wpKTtcbmV4cG9ydCBkZWZhdWx0IFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBQ1RJVkU6ICdhY3RpdmUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBJbnRlcmFjdGlvblByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IHsgZWFzZU91dCwgbGluZWFyIH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6YWN0aXZlJywgUmV0dXJuPn0gSW50ZXJhY3Rpb25PblNpZ25hdHVyZVxuICovXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLiBUaGUgaW50ZXJhY3Rpb25zXG4gKiBhcmUgdHJhdmVyc2VkIGluIHJldmVyc2Ugb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBjb2xsZWN0aW9uIG9mIHRoZSBtYXAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogVXNlciBhY3Rpb25zIHRoYXQgY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgbWFwLiBTb21lIGFyZSBzaW1pbGFyIHRvIGNvbnRyb2xzLFxuICogYnV0IGFyZSBub3QgYXNzb2NpYXRlZCB3aXRoIGEgRE9NIGVsZW1lbnQuXG4gKiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfSBpc1xuICogZnVuY3Rpb25hbGx5IHRoZSBzYW1lIGFzIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LCBidXQgdHJpZ2dlcmVkXG4gKiBieSBhIGtleWJvYXJkIGV2ZW50IG5vdCBhIGJ1dHRvbiBlbGVtZW50IGV2ZW50LlxuICogQWx0aG91Z2ggaW50ZXJhY3Rpb25zIGRvIG5vdCBoYXZlIGEgRE9NIGVsZW1lbnQsIHNvbWUgb2YgdGhlbSBkbyByZW5kZXJcbiAqIHZlY3RvcnMgYW5kIHNvIGFyZSB2aXNpYmxlIG9uIHRoZSBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBJbnRlcmFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW50ZXJhY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJbnRlcmFjdGlvbk9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbnRlcmFjdGlvbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0ludGVyYWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIGlmIChvcHRfb3B0aW9ucyAmJiBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRXZlbnQgPSBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG51bGw7XG4gICAgICAgIF90aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgaW50ZXJhY3Rpb24gaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyYWN0aW9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoZSBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFjdGl2ZSBBY3RpdmUuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChhY3RpdmUpIHtcbiAgICAgICAgdGhpcy5zZXQoSW50ZXJhY3Rpb25Qcm9wZXJ0eS5BQ1RJVkUsIGFjdGl2ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGludGVyYWN0aW9uIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAgICogdGhlIG1hcCBoZXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgIH07XG4gICAgcmV0dXJuIEludGVyYWN0aW9uO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gRHVyYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYW4odmlldywgZGVsdGEsIG9wdF9kdXJhdGlvbikge1xuICAgIHZhciBjdXJyZW50Q2VudGVyID0gdmlldy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgIGlmIChjdXJyZW50Q2VudGVyKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSBbY3VycmVudENlbnRlclswXSArIGRlbHRhWzBdLCBjdXJyZW50Q2VudGVyWzFdICsgZGVsdGFbMV1dO1xuICAgICAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0X2R1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZHVyYXRpb24gOiAyNTAsXG4gICAgICAgICAgICBlYXNpbmc6IGxpbmVhcixcbiAgICAgICAgICAgIGNlbnRlcjogdmlldy5nZXRDb25zdHJhaW5lZENlbnRlcihjZW50ZXIpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEgZnJvbSBwcmV2aW91cyB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBBbmNob3IgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIG9wdF9hbmNob3IsIG9wdF9kdXJhdGlvbikge1xuICAgIHZhciBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgIGlmIChjdXJyZW50Wm9vbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5ld1pvb20gPSB2aWV3LmdldENvbnN0cmFpbmVkWm9vbShjdXJyZW50Wm9vbSArIGRlbHRhKTtcbiAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbkZvclpvb20obmV3Wm9vbSk7XG4gICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgIGFuY2hvcjogb3B0X2FuY2hvcixcbiAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2R1cmF0aW9uIDogMjUwLFxuICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBJbnRlcmFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVyYWN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tXG4gKi9cbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBkZWx0YSBhcHBsaWVkIG9uIGVhY2ggZG91YmxlIGNsaWNrLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIGJ5IGRvdWJsZS1jbGlja2luZyBvbiB0aGUgbWFwLlxuICogQGFwaVxuICovXG52YXIgRG91YmxlQ2xpY2tab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEb3VibGVDbGlja1pvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRG91YmxlQ2xpY2tab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGFcbiAgICAgKiBkb3VibGVjbGljaykgYW5kIGV2ZW50dWFsbHkgem9vbXMgdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqL1xuICAgIERvdWJsZUNsaWNrWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICAgICAgICAgIHZhciBicm93c2VyRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGJyb3dzZXJFdmVudC5zaGlmdEtleSA/IC10aGlzLmRlbHRhXyA6IHRoaXMuZGVsdGFfO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIGFuY2hvciwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgYnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIERvdWJsZUNsaWNrWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERvdWJsZUNsaWNrWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURvdWJsZUNsaWNrWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BvaW50ZXJcbiAqL1xuaW1wb3J0IEludGVyYWN0aW9uIGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBnZXRWYWx1ZXMgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBbaGFuZGxlRG93bkV2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJkb3duXCIgZXZlbnRzLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgdGhlbiBhIGRyYWdcbiAqIHNlcXVlbmNlIGlzIHN0YXJ0ZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbaGFuZGxlRHJhZ0V2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJkcmFnXCIgZXZlbnRzLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBcIm1vdmVcIiBldmVudHNcbiAqIGR1cmluZyBhIGRyYWcgc2VxdWVuY2UuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBbaGFuZGxlRXZlbnRdXG4gKiBNZXRob2QgY2FsbGVkIGJ5IHRoZSBtYXAgdG8gbm90aWZ5IHRoZSBpbnRlcmFjdGlvbiB0aGF0IGEgYnJvd3NlciBldmVudCB3YXNcbiAqIGRpc3BhdGNoZWQgdG8gdGhlIG1hcC4gVGhlIGZ1bmN0aW9uIG1heSByZXR1cm4gYGZhbHNlYCB0byBwcmV2ZW50IHRoZVxuICogcHJvcGFnYXRpb24gb2YgdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zXG4gKiBjaGFpbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtoYW5kbGVNb3ZlRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcIm1vdmVcIiBldmVudHMuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIFwibW92ZVwiIGV2ZW50cy5cbiAqIFRoaXMgZnVuY3Rpb25zIGlzIGFsc28gY2FsbGVkIGR1cmluZyBhIGRyYWcgc2VxdWVuY2UsIHNvIGR1cmluZyBhIGRyYWdcbiAqIHNlcXVlbmNlIGJvdGggdGhlIGBoYW5kbGVEcmFnRXZlbnRgIGZ1bmN0aW9uIGFuZCB0aGlzIGZ1bmN0aW9uIGFyZSBjYWxsZWQuXG4gKiBJZiBgaGFuZGxlRG93bkV2ZW50YCBpcyBkZWZpbmVkIGFuZCBpdCByZXR1cm5zIHRydWUgdGhpcyBmdW5jdGlvbiB3aWxsIG5vdFxuICogYmUgY2FsbGVkIGR1cmluZyBhIGRyYWcgc2VxdWVuY2UuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBbaGFuZGxlVXBFdmVudF1cbiAqICBGdW5jdGlvbiBoYW5kbGluZyBcInVwXCIgZXZlbnRzLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgIHRoZW4gdGhlXG4gKiBjdXJyZW50IGRyYWcgc2VxdWVuY2UgaXMgc3RvcHBlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6Ym9vbGVhbn0gW3N0b3BEb3duXVxuICogU2hvdWxkIHRoZSBkb3duIGV2ZW50IGJlIHByb3BhZ2F0ZWQgdG8gb3RoZXIgaW50ZXJhY3Rpb25zLCBvciBzaG91bGQgYmVcbiAqIHN0b3BwZWQ/XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyB0aGF0IGNhbGxzIHVzZXItZGVmaW5lZCBmdW5jdGlvbnMgb24gYGRvd25gLCBgbW92ZWAgYW5kIGB1cGBcbiAqIGV2ZW50cy4gVGhpcyBjbGFzcyBhbHNvIG1hbmFnZXMgXCJkcmFnIHNlcXVlbmNlc1wiLlxuICpcbiAqIFdoZW4gdGhlIGBoYW5kbGVEb3duRXZlbnRgIHVzZXIgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgYSBkcmFnIHNlcXVlbmNlIGlzXG4gKiBzdGFydGVkLiBEdXJpbmcgYSBkcmFnIHNlcXVlbmNlIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCB1c2VyIGZ1bmN0aW9uIGlzXG4gKiBjYWxsZWQgb24gYG1vdmVgIGV2ZW50cy4gVGhlIGRyYWcgc2VxdWVuY2UgZW5kcyB3aGVuIHRoZSBgaGFuZGxlVXBFdmVudGBcbiAqIHVzZXIgZnVuY3Rpb24gaXMgY2FsbGVkIGFuZCByZXR1cm5zIGBmYWxzZWAuXG4gKiBAYXBpXG4gKi9cbnZhciBQb2ludGVySW50ZXJhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvaW50ZXJJbnRlcmFjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2ludGVySW50ZXJhY3Rpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIChvcHRpb25zKSkgfHwgdGhpcztcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlRG93bkV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVEb3duRXZlbnQgPSBvcHRpb25zLmhhbmRsZURvd25FdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVEcmFnRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlTW92ZUV2ZW50ID0gb3B0aW9ucy5oYW5kbGVNb3ZlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlVXBFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlVXBFdmVudCA9IG9wdGlvbnMuaGFuZGxlVXBFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgX3RoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBQb2ludGVyRXZlbnQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2tlZFBvaW50ZXJzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFBvaW50ZXJFdmVudD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFBvaW50ZXJzID0gW107XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBudW1iZXIgb2YgcG9pbnRlcnMgaW52b2x2ZWQgaW4gdGhlIGludGVyYWN0aW9uLFxuICAgICAqIGUuZy4gYDJgIHdoZW4gdHdvIGZpbmdlcnMgYXJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbnVtYmVyIG9mIHBvaW50ZXJzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldFBvaW50ZXJDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBhbmQgbWF5IGNhbGwgaW50b1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucywgaWYgZXZlbnQgc2VxdWVuY2VzIGxpa2UgZS5nLiAnZHJhZycgb3IgJ2Rvd24tdXAnIGV0Yy4gYXJlXG4gICAgICogZGV0ZWN0ZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0b3BFdmVudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgcGFnZSBzY3JvbGxpbmcgZHVyaW5nIGRyYWdnaW5nXG4gICAgICAgICAgICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZWRVcCA9IHRoaXMuaGFuZGxlVXBFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZWRVcCAmJiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkID0gdGhpcy5oYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBoYW5kbGVkO1xuICAgICAgICAgICAgICAgIHN0b3BFdmVudCA9IHRoaXMuc3RvcERvd24oaGFuZGxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3ZlRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIG1vdmUgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVNb3ZlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7IH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgXCJkb3duXCIgZXZlbnRzIHNob3VsZCBiZSBwcm9wYWdhdGVkXG4gICAgICogdG8gb3RoZXIgaW50ZXJhY3Rpb25zIG9yIHNob3VsZCBiZSBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFuZGxlZCBXYXMgdGhlIGV2ZW50IGhhbmRsZWQgYnkgdGhlIGludGVyYWN0aW9uP1xuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFNob3VsZCB0aGUgYGRvd25gIGV2ZW50IGJlIHN0b3BwZWQ/XG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5zdG9wRG93biA9IGZ1bmN0aW9uIChoYW5kbGVkKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS51cGRhdGVUcmFja2VkUG9pbnRlcnNfID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50O1xuICAgICAgICAgICAgdmFyIGlkID0gZXZlbnRfMS5wb2ludGVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaWQgaW4gdGhpcy50cmFja2VkUG9pbnRlcnNfKSB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG9ubHkgd2hlbiB0aGVyZSB3YXMgYSBwb2ludGVyZG93biBldmVudCBmb3IgdGhpcyBwb2ludGVyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXSA9IGV2ZW50XzE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhcmdldFBvaW50ZXJzID0gZ2V0VmFsdWVzKHRoaXMudHJhY2tlZFBvaW50ZXJzXyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQb2ludGVySW50ZXJhY3Rpb247XG59KEludGVyYWN0aW9uKSk7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8UG9pbnRlckV2ZW50Pn0gcG9pbnRlckV2ZW50cyBMaXN0IG9mIGV2ZW50cy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBDZW50cm9pZCBwaXhlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNlbnRyb2lkKHBvaW50ZXJFdmVudHMpIHtcbiAgICB2YXIgbGVuZ3RoID0gcG9pbnRlckV2ZW50cy5sZW5ndGg7XG4gICAgdmFyIGNsaWVudFggPSAwO1xuICAgIHZhciBjbGllbnRZID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNsaWVudFggKz0gcG9pbnRlckV2ZW50c1tpXS5jbGllbnRYO1xuICAgICAgICBjbGllbnRZICs9IHBvaW50ZXJFdmVudHNbaV0uY2xpZW50WTtcbiAgICB9XG4gICAgcmV0dXJuIFtjbGllbnRYIC8gbGVuZ3RoLCBjbGllbnRZIC8gbGVuZ3RoXTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZXZlbnQgaXMgYSBwb2ludGVyZG93biwgcG9pbnRlcmRyYWdcbiAqICAgICBvciBwb2ludGVydXAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGlzUG9pbnRlckRyYWdnaW5nRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgICByZXR1cm4gKHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICAgICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRyB8fFxuICAgICAgICB0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCk7XG59XG5leHBvcnQgZGVmYXVsdCBQb2ludGVySW50ZXJhY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvY29uZGl0aW9uXG4gKi9cbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgRkFMU0UsIFRSVUUgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgTUFDLCBXRUJLSVQgfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYHtib29sZWFufWAuIElmIHRoZSBjb25kaXRpb24gaXMgbWV0LCB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24odGhpczogPywgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBDb25kaXRpb25cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgY29uZGl0aW9uIGZ1bmN0aW9uIHRoYXQgcGFzc2VzIHdoZW4gYWxsIHByb3ZpZGVkIGNvbmRpdGlvbnMgcGFzcy5cbiAqIEBwYXJhbSB7Li4uQ29uZGl0aW9ufSB2YXJfYXJncyBDb25kaXRpb25zIHRvIGNoZWNrLlxuICogQHJldHVybiB7Q29uZGl0aW9ufSBDb25kaXRpb24gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbGwodmFyX2FyZ3MpIHtcbiAgICB2YXIgY29uZGl0aW9ucyA9IGFyZ3VtZW50cztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBBbGwgY29uZGl0aW9ucyBwYXNzZWQuXG4gICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgcGFzcyA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvbmRpdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcGFzcyA9IHBhc3MgJiYgY29uZGl0aW9uc1tpXShldmVudCk7XG4gICAgICAgICAgICBpZiAoIXBhc3MpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFzcztcbiAgICB9O1xufVxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBhbHQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgYWx0S2V5T25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuIChvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBhbmQgc2hpZnQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gKiAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdFNoaWZ0S2V5c09ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAob3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzLiBUaGlzIGNvbmRpdGlvbiByZXF1aXJlcyBhIG1hcCB0YXJnZXRcbiAqIGVsZW1lbnQgd2l0aCBhIGB0YWJpbmRleGAgYXR0cmlidXRlLCBlLmcuIGA8ZGl2IGlkPVwibWFwXCIgdGFiaW5kZXg9XCIxXCI+YC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBmb2N1cyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciB0YXJnZXRFbGVtZW50ID0gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICB2YXIgYWN0aXZlRWxlbWVudCA9IGV2ZW50Lm1hcC5nZXRPd25lckRvY3VtZW50KCkuYWN0aXZlRWxlbWVudDtcbiAgICByZXR1cm4gdGFyZ2V0RWxlbWVudC5jb250YWlucyhhY3RpdmVFbGVtZW50KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlIHNldC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgY29udGFpbmVyIGhhcyB0aGUgZm9jdXMgb3Igbm8gJ3RhYmluZGV4JyBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXNXaXRoVGFiaW5kZXggPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKS5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JylcbiAgICAgICAgPyBmb2N1cyhldmVudClcbiAgICAgICAgOiB0cnVlO1xufTtcbi8qKlxuICogUmV0dXJuIGFsd2F5cyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgYWx3YXlzID0gVFJVRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBgY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkNMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFzIGFuIFwiYWN0aW9uXCItcHJvZHVjaW5nIG1vdXNlIGJ1dHRvbi5cbiAqXG4gKiBCeSBkZWZpbml0aW9uLCB0aGlzIGluY2x1ZGVzIGxlZnQtY2xpY2sgb24gd2luZG93cy9saW51eCwgYW5kIGxlZnQtY2xpY2tcbiAqIHdpdGhvdXQgdGhlIGN0cmwga2V5IG9uIE1hY3MuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IHZhciBtb3VzZUFjdGlvbkJ1dHRvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gb3JpZ2luYWxFdmVudC5idXR0b24gPT0gMCAmJiAhKFdFQktJVCAmJiBNQUMgJiYgb3JpZ2luYWxFdmVudC5jdHJsS2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBhbHdheXMgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gRmFsc2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbmV2ZXIgPSBGQUxTRTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQsIGBmYWxzZWBcbiAqIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwb2ludGVyTW92ZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gJ3BvaW50ZXJtb3ZlJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2luZ2xlQ2xpY2sgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgZGJsY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGRvdWJsZUNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBubyBtb2RpZmllciBrZXkgKGFsdC0sIHNoaWZ0LSBvciBwbGF0Zm9ybS1tb2RpZmllci1rZXkpIGlzXG4gKiBwcmVzc2VkLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGVyZSBubyBtb2RpZmllciBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5vTW9kaWZpZXJLZXlzID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBsYXRmb3JtTW9kaWZpZXJLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAoTUFDID8gb3JpZ2luYWxFdmVudC5tZXRhS2V5IDogb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBzaGlmdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGlmdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAoIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBub3QgZWRpdGFibGUsIGkuZS4gbm90IGEgYDxpbnB1dD5gLSxcbiAqIGA8c2VsZWN0PmAtIG9yIGA8dGV4dGFyZWE+YC1lbGVtZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciB0YXJnZXROb3RFZGl0YWJsZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgdmFyIHRhZ05hbWUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovIChvcmlnaW5hbEV2ZW50LnRhcmdldCkudGFnTmFtZTtcbiAgICByZXR1cm4gdGFnTmFtZSAhPT0gJ0lOUFVUJyAmJiB0YWdOYW1lICE9PSAnU0VMRUNUJyAmJiB0YWdOYW1lICE9PSAnVEVYVEFSRUEnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIG1vdXNlIGRldmljZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBtb3VzZU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdmVudCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LnBvaW50ZXJUeXBlID09ICdtb3VzZSc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSB0b3VjaGFibGUgZGV2aWNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHRvdWNoYWJsZSBkZXZpY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgdG91Y2hPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZ0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2dC5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBlbk9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZ0ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gICAgLy8gc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICAgIHJldHVybiBwb2ludGVyRXZ0LnBvaW50ZXJUeXBlID09PSAncGVuJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlciBpblxuICogY29udGFjdCB3aXRoIHRoZSBzdXJmYWNlIG9yIGlmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiBpcyBwcmVzc2VkLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyNidXR0b24tc3RhdGVzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHByaW1hcnkgcG9pbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwcmltYXJ5QWN0aW9uID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZlbnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LmlzUHJpbWFyeSAmJiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmRpdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdQYW5cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWxsLCBmb2N1c1dpdGhUYWJpbmRleCwgbm9Nb2RpZmllcktleXMsIHByaW1hcnlBY3Rpb24sIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7IHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCBzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGUsIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ubm9Nb2RpZmllcktleXN9IGFuZCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ucHJpbWFyeUFjdGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gV2hlbiB0aGUgbWFwJ3MgdGFyZ2V0IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlIHNldCxcbiAqIHRoZSBpbnRlcmFjdGlvbiB3aWxsIG9ubHkgaGFuZGxlIGV2ZW50cyB3aGVuIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vS2luZXRpYy5qc1wiKS5kZWZhdWx0fSBba2luZXRpY10gS2luZXRpYyBpbmVydGlhIHRvIGFwcGx5IHRvIHRoZSBwYW4uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIGJ5IGRyYWdnaW5nIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUGFuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnUGFuLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdQYW4ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgc3RvcERvd246IEZBTFNFLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2luZXRpY18gPSBvcHRpb25zLmtpbmV0aWM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RQb2ludGVyc0NvdW50XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICA/IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICA6IGFsbChub01vZGlmaWVyS2V5cywgcHJpbWFyeUFjdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5vbkZvY3VzT25seVxuICAgICAgICAgICAgPyBhbGwoZm9jdXNXaXRoVGFiaW5kZXgsIGNvbmRpdGlvbilcbiAgICAgICAgICAgIDogY29uZGl0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ub0tpbmV0aWNfID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgICAgICB0aGlzLnBhbm5pbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGFyZ2V0UG9pbnRlcnMgPSB0aGlzLnRhcmdldFBvaW50ZXJzO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGlmICh0YXJnZXRQb2ludGVycy5sZW5ndGggPT0gdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy51cGRhdGUoY2VudHJvaWRbMF0sIGNlbnRyb2lkWzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxhc3RDZW50cm9pZCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWRbMF0gLSBjZW50cm9pZFswXSxcbiAgICAgICAgICAgICAgICAgICAgY2VudHJvaWRbMV0gLSB0aGlzLmxhc3RDZW50cm9pZFsxXSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgICAgICBzY2FsZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0UmVzb2x1dGlvbigpKTtcbiAgICAgICAgICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHZpZXcuYWRqdXN0Q2VudGVySW50ZXJuYWwoZGVsdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgICAgIC8vIGFmdGVyIG9uZSBmaW5nZXIgZG93biwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIGRvd25cbiAgICAgICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IGNlbnRyb2lkO1xuICAgICAgICB0aGlzLmxhc3RQb2ludGVyc0NvdW50XyA9IHRhcmdldFBvaW50ZXJzLmxlbmd0aDtcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUGFuLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5ub0tpbmV0aWNfICYmIHRoaXMua2luZXRpY18gJiYgdGhpcy5raW5ldGljXy5lbmQoKSkge1xuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IHRoaXMua2luZXRpY18uZ2V0RGlzdGFuY2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgYW5nbGUgPSB0aGlzLmtpbmV0aWNfLmdldEFuZ2xlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHZpZXcuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVycHggPSBtYXAuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGNlbnRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGRlc3QgPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKFtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVycHhbMF0gLSBkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgICAgICAgICAgICAgY2VudGVycHhbMV0gLSBkaXN0YW5jZSAqIE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcjogdmlldy5nZXRDb25zdHJhaW5lZENlbnRlcihkZXN0KSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFubmluZ18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbm5pbmdfID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgICAgICAvLyByZXNldCBzbyB3ZSBkb24ndCBvdmVyZXN0aW1hdGUgdGhlIGtpbmV0aWMgZW5lcmd5IGFmdGVyXG4gICAgICAgICAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciB1cCwgdGlueSBkcmFnLCBzZWNvbmQgZmluZ2VyIHVwXG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMCAmJiB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAgICAgICAvLyBzdG9wIGFueSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm8ga2luZXRpYyBhcyBzb29uIGFzIG1vcmUgdGhhbiBvbmUgcG9pbnRlciBvbiB0aGUgc2NyZWVuIGlzXG4gICAgICAgICAgICAvLyBkZXRlY3RlZC4gVGhpcyBpcyB0byBwcmV2ZW50IG5hc3R5IHBhbnMgYWZ0ZXIgcGluY2guXG4gICAgICAgICAgICB0aGlzLm5vS2luZXRpY18gPSB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDE7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERyYWdQYW47XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ1Bhbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdQYW4uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFsdFNoaWZ0S2V5c09ubHksIG1vdXNlQWN0aW9uQnV0dG9uLCBtb3VzZU9ubHksIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBkaXNhYmxlIH0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24uYWx0U2hpZnRLZXlzT25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcm90YXRlIHRoZSBtYXAgYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gdGhlIGFsdCBhbmQgc2hpZnQga2V5cyBhcmUgaGVsZCBkb3duLlxuICpcbiAqIFRoaXMgaW50ZXJhY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgZm9yIG1vdXNlIGRldmljZXMuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnUm90YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnUm90YXRlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgc3RvcERvd246IEZBTFNFLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHRTaGlmdEtleXNPbmx5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICAgIHZhciB0aGV0YSA9IE1hdGguYXRhbjIoc2l6ZVsxXSAvIDIgLSBvZmZzZXRbMV0sIG9mZnNldFswXSAtIHNpemVbMF0gLyAyKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdEFuZ2xlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSB0aGV0YSAtIHRoaXMubGFzdEFuZ2xlXztcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Um90YXRpb25JbnRlcm5hbCgtZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHRoZXRhO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VBY3Rpb25CdXR0b24obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIERyYWdSb3RhdGU7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ1JvdGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdSb3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9Cb3hcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IFBvbHlnb24gZnJvbSAnLi4vZ2VvbS9Qb2x5Z29uLmpzJztcbnZhciBSZW5kZXJCb3ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlbmRlckJveCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lIENTUyBjbGFzcyBuYW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlbmRlckJveChjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmdlb21ldHJ5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9ICdvbC1ib3ggJyArIGNsYXNzTmFtZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZW5kUGl4ZWxfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRNYXAobnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUucmVuZGVyXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXJ0UGl4ZWwgPSB0aGlzLnN0YXJ0UGl4ZWxfO1xuICAgICAgICB2YXIgZW5kUGl4ZWwgPSB0aGlzLmVuZFBpeGVsXztcbiAgICAgICAgdmFyIHB4ID0gJ3B4JztcbiAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgc3R5bGUubGVmdCA9IE1hdGgubWluKHN0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzBdKSArIHB4O1xuICAgICAgICBzdHlsZS50b3AgPSBNYXRoLm1pbihzdGFydFBpeGVsWzFdLCBlbmRQaXhlbFsxXSkgKyBweDtcbiAgICAgICAgc3R5bGUud2lkdGggPSBNYXRoLmFicyhlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF0pICsgcHg7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9IE1hdGguYWJzKGVuZFBpeGVsWzFdIC0gc3RhcnRQaXhlbFsxXSkgKyBweDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgICAgICAgICAgc3R5bGUubGVmdCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLnRvcCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLndpZHRoID0gJ2luaGVyaXQnO1xuICAgICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gJ2luaGVyaXQnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBTdGFydCBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBlbmRQaXhlbCBFbmQgcGl4ZWwuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5zZXRQaXhlbHMgPSBmdW5jdGlvbiAoc3RhcnRQaXhlbCwgZW5kUGl4ZWwpIHtcbiAgICAgICAgdGhpcy5zdGFydFBpeGVsXyA9IHN0YXJ0UGl4ZWw7XG4gICAgICAgIHRoaXMuZW5kUGl4ZWxfID0gZW5kUGl4ZWw7XG4gICAgICAgIHRoaXMuY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSgpO1xuICAgICAgICB0aGlzLnJlbmRlcl8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgb3IgdXBkYXRlcyB0aGUgY2FjaGVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXJ0UGl4ZWwgPSB0aGlzLnN0YXJ0UGl4ZWxfO1xuICAgICAgICB2YXIgZW5kUGl4ZWwgPSB0aGlzLmVuZFBpeGVsXztcbiAgICAgICAgdmFyIHBpeGVscyA9IFtcbiAgICAgICAgICAgIHN0YXJ0UGl4ZWwsXG4gICAgICAgICAgICBbc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMV1dLFxuICAgICAgICAgICAgZW5kUGl4ZWwsXG4gICAgICAgICAgICBbZW5kUGl4ZWxbMF0sIHN0YXJ0UGl4ZWxbMV1dLFxuICAgICAgICBdO1xuICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBwaXhlbHMubWFwKHRoaXMubWFwXy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwsIHRoaXMubWFwXyk7XG4gICAgICAgIC8vIGNsb3NlIHRoZSBwb2x5Z29uXG4gICAgICAgIGNvb3JkaW5hdGVzWzRdID0gY29vcmRpbmF0ZXNbMF0uc2xpY2UoKTtcbiAgICAgICAgaWYgKCF0aGlzLmdlb21ldHJ5Xykge1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeV8gPSBuZXcgUG9seWdvbihbY29vcmRpbmF0ZXNdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlfLnNldENvb3JkaW5hdGVzKFtjb29yZGluYXRlc10pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VvbWV0cnlfO1xuICAgIH07XG4gICAgcmV0dXJuIFJlbmRlckJveDtcbn0oRGlzcG9zYWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgUmVuZGVyQm94O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Qm94LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ0JveFxuICovXG4vLyBGSVhNRSBkcmF3IGRyYWcgYm94XG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCBSZW5kZXJCb3ggZnJvbSAnLi4vcmVuZGVyL0JveC5qcyc7XG5pbXBvcnQgeyBtb3VzZUFjdGlvbkJ1dHRvbiB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH0gYW5kIHR3b1xuICoge0BsaW5rIG1vZHVsZTpvbC9waXhlbH5QaXhlbH1zIGFuZCByZXR1cm5zIGEgYHtib29sZWFufWAuIElmIHRoZSBjb25kaXRpb24gaXMgbWV0LFxuICogdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24odGhpczogPywgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsLCBpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbCk6Ym9vbGVhbn0gRW5kQ29uZGl0aW9uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWdib3gnXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGUgYm94LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBvbC9ldmVudHMvY29uZGl0aW9ufm1vdXNlQWN0aW9uQnV0dG9ufS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluQXJlYT02NF0gVGhlIG1pbmltdW0gYXJlYSBvZiB0aGUgYm94IGluIHBpeGVsLCB0aGlzIHZhbHVlIGlzIHVzZWQgYnkgdGhlIGRlZmF1bHRcbiAqIGBib3hFbmRDb25kaXRpb25gIGZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtFbmRDb25kaXRpb259IFtib3hFbmRDb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHR3b1xuICoge0BsaW5rIG1vZHVsZTpvbC9waXhlbH5QaXhlbH1zIHRvIGluZGljYXRlIHdoZXRoZXIgYSBgYm94ZW5kYCBldmVudCBzaG91bGQgYmUgZmlyZWQuXG4gKiBEZWZhdWx0IGlzIGB0cnVlYCBpZiB0aGUgYXJlYSBvZiB0aGUgYm94IGlzIGJpZ2dlciB0aGFuIHRoZSBgbWluQXJlYWAgb3B0aW9uLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbih0aGlzOkRyYWdCb3gsIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbb25Cb3hFbmRdIENvZGUgdG8gZXhlY3V0ZSBqdXN0XG4gKiBiZWZvcmUgYGJveGVuZGAgaXMgZmlyZWQuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIERyYWdCb3hFdmVudFR5cGUgPSB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggc3RhcnQuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hzdGFydFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hTVEFSVDogJ2JveHN0YXJ0JyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgb24gZHJhZyB3aGVuIGJveCBpcyBhY3RpdmUuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hkcmFnXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWERSQUc6ICdib3hkcmFnJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBlbmQuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hlbmRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YRU5EOiAnYm94ZW5kJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBjYW5jZWxlZC5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGNhbmNlbFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hDQU5DRUw6ICdib3hjYW5jZWwnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnQm94fkRyYWdCb3h9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mXG4gKiB0aGlzIHR5cGUuXG4gKi9cbnZhciBEcmFnQm94RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdCb3hFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgZXZlbnQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgT3JpZ2luYXRpbmcgZXZlbnQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ0JveEV2ZW50KHR5cGUsIGNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgb2YgdGhlIGRyYWcgZXZlbnQuXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlID0gY29vcmRpbmF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcEJyb3dzZXJFdmVudCA9IG1hcEJyb3dzZXJFdmVudDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRHJhZ0JveEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgRHJhZ0JveEV2ZW50IH07XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPCdib3hjYW5jZWwnfCdib3hkcmFnJ3wnYm94ZW5kJ3wnYm94c3RhcnQnLCBEcmFnQm94RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZSd8J2JveGNhbmNlbCd8J2JveGRyYWcnfCdib3hlbmQnLCBSZXR1cm4+fSBEcmFnQm94T25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gZHJhdyBhIHZlY3RvciBib3ggYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gdGhlIHNoaWZ0IG9yIG90aGVyIGtleSBpcyBoZWxkIGRvd24uIFRoaXMgaXMgdXNlZCwgZm9yIGV4YW1wbGUsXG4gKiBmb3Igem9vbWluZyB0byBhIHNwZWNpZmljIGFyZWEgb2YgdGhlIG1hcFxuICogKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdab29tfkRyYWdab29tfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb219KS5cbiAqXG4gKiBAZmlyZXMgRHJhZ0JveEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnQm94LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdCb3gob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7RHJhZ0JveE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvQm94LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hfID0gbmV3IFJlbmRlckJveChvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ2JveCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcbiAgICAgICAgaWYgKG9wdGlvbnMub25Cb3hFbmQpIHtcbiAgICAgICAgICAgIF90aGlzLm9uQm94RW5kID0gb3B0aW9ucy5vbkJveEVuZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBtb3VzZUFjdGlvbkJ1dHRvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtFbmRDb25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hFbmRDb25kaXRpb25fID0gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgIDogX3RoaXMuZGVmYXVsdEJveEVuZENvbmRpdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCBjb25kaXRpb24gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIGJveGVuZCBldmVudFxuICAgICAqIHNob3VsZCBmaXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBUaGUgb3JpZ2luYXRpbmcgTWFwQnJvd3NlckV2ZW50XG4gICAgICogICAgIGxlYWRpbmcgdG8gdGhlIGJveCBlbmQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBUaGUgc3RhcnRpbmcgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBlbmRQaXhlbCBUaGUgZW5kIHBpeGVsIG9mIHRoZSBib3guXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIGJveGVuZCBjb25kaXRpb24gc2hvdWxkIGJlIGZpcmVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmRlZmF1bHRCb3hFbmRDb25kaXRpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgICAgICB2YXIgd2lkdGggPSBlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF07XG4gICAgICAgIHZhciBoZWlnaHQgPSBlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV07XG4gICAgICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGdlb21ldHJ5IG9mIGxhc3QgZHJhd24gYm94LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJveF8uZ2V0R2VvbWV0cnkoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hEUkFHLCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcbiAgICAgICAgdmFyIGNvbXBsZXRlQm94ID0gdGhpcy5ib3hFbmRDb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCwgdGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcbiAgICAgICAgaWYgKGNvbXBsZXRlQm94KSB7XG4gICAgICAgICAgICB0aGlzLm9uQm94RW5kKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoY29tcGxldGVCb3ggPyBEcmFnQm94RXZlbnRUeXBlLkJPWEVORCA6IERyYWdCb3hFdmVudFR5cGUuQk9YQ0FOQ0VMLCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgICAgICAgICAgdGhpcy5ib3hfLnNldE1hcChtYXBCcm93c2VyRXZlbnQubWFwKTtcbiAgICAgICAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgdGhpcy5zdGFydFBpeGVsXyk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChEcmFnQm94RXZlbnRUeXBlLkJPWFNUQVJULCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBqdXN0IGJlZm9yZSBgb25ib3hlbmRgIGlzIGZpcmVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUub25Cb3hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHsgfTtcbiAgICByZXR1cm4gRHJhZ0JveDtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnQm94O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ0JveC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdab29tXG4gKi9cbmltcG9ydCBEcmFnQm94IGZyb20gJy4vRHJhZ0JveC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7IHNoaWZ0S2V5T25seSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ3pvb20nXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGVcbiAqIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnNoaWZ0S2V5T25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTIwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW291dD1mYWxzZV0gVXNlIGludGVyYWN0aW9uIGZvciB6b29taW5nIG91dC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluQXJlYT02NF0gVGhlIG1pbmltdW0gYXJlYSBvZiB0aGUgYm94IGluIHBpeGVsLCB0aGlzIHZhbHVlIGlzIHVzZWQgYnkgdGhlIHBhcmVudCBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIGEga2V5LCBzaGlmdCBieSBkZWZhdWx0LCBpcyBoZWxkIGRvd24uXG4gKlxuICogVG8gY2hhbmdlIHRoZSBzdHlsZSBvZiB0aGUgYm94LCB1c2UgQ1NTIGFuZCB0aGUgYC5vbC1kcmFnem9vbWAgc2VsZWN0b3IsIG9yXG4gKiB5b3VyIGN1c3RvbSBvbmUgY29uZmlndXJlZCB3aXRoIGBjbGFzc05hbWVgLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1pvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IHNoaWZ0S2V5T25seTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbixcbiAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWd6b29tJyxcbiAgICAgICAgICAgIG1pbkFyZWE6IG9wdGlvbnMubWluQXJlYSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdXRfID0gb3B0aW9ucy5vdXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3V0IDogZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBqdXN0IGJlZm9yZSBgb25ib3hlbmRgIGlzIGZpcmVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ1pvb20ucHJvdG90eXBlLm9uQm94RW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gKi8gKG1hcC5nZXRWaWV3KCkpO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIGlmICh0aGlzLm91dF8pIHtcbiAgICAgICAgICAgIHZhciByb3RhdGVkRXh0ZW50ID0gdmlldy5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChyb3RhdGVkRXh0ZW50KTtcbiAgICAgICAgICAgIHZhciBmYWN0b3IgPSB2aWV3LmdldFJlc29sdXRpb24oKSAvIHJlc29sdXRpb247XG4gICAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCk7XG4gICAgICAgICAgICBnZW9tZXRyeS5zY2FsZShmYWN0b3IgKiBmYWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHZpZXcuZml0SW50ZXJuYWwoZ2VvbWV0cnksIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gRHJhZ1pvb207XG59KERyYWdCb3gpKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1pvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhblxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7IHBhbiB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSAnLi4vZXZlbnRzL0tleUNvZGUuanMnO1xuaW1wb3J0IHsgbm9Nb2RpZmllcktleXMsIHRhcmdldE5vdEVkaXRhYmxlIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5ub01vZGlmaWVyS2V5c30gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24udGFyZ2V0Tm90RWRpdGFibGV9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsRGVsdGE9MTI4XSBUaGUgYW1vdW50IG9mIHBpeGVscyB0byBwYW4gb24gZWFjaCBrZXlcbiAqIHByZXNzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCB1c2luZyBrZXlib2FyZCBhcnJvd3MuXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkUGFuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhLZXlib2FyZFBhbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBLZXlib2FyZFBhbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbWJpbmVkIGNvbmRpdGlvbiByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWZhdWx0Q29uZGl0aW9uXyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAobm9Nb2RpZmllcktleXMobWFwQnJvd3NlckV2ZW50KSAmJiB0YXJnZXROb3RFZGl0YWJsZShtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jb25kaXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgICAgICAgICA6IF90aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxEZWx0YV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5waXhlbERlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpeGVsRGVsdGEgOiAxMjg7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gICAgICogYEtleUV2ZW50YCwgYW5kIGRlY2lkZXMgdGhlIGRpcmVjdGlvbiB0byBwYW4gdG8gKGlmIGFuIGFycm93IGtleSB3YXNcbiAgICAgKiBwcmVzc2VkKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEB0aGlzIHtLZXlib2FyZFBhbn1cbiAgICAgKi9cbiAgICBLZXlib2FyZFBhbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgICAgICAgICB2YXIga2V5RXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIga2V5Q29kZSA9IGtleUV2ZW50LmtleUNvZGU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgICAgICAoa2V5Q29kZSA9PSBLZXlDb2RlLkRPV04gfHxcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQgfHxcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLlJJR0hUIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5VUCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcFVuaXRzRGVsdGEgPSB2aWV3LmdldFJlc29sdXRpb24oKSAqIHRoaXMucGl4ZWxEZWx0YV87XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhWCA9IDAsIGRlbHRhWSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWSA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09IEtleUNvZGUuTEVGVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVggPSAtbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLlJJR0hUKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWCA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVkgPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBbZGVsdGFYLCBkZWx0YVldO1xuICAgICAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgcGFuKHZpZXcsIGRlbHRhLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICAgICAga2V5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIEtleWJvYXJkUGFuO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRQYW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlib2FyZFBhbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0tleUNvZGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBMRUZUOiAzNyxcbiAgICBVUDogMzgsXG4gICAgUklHSFQ6IDM5LFxuICAgIERPV046IDQwLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleUNvZGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IHsgdGFyZ2V0Tm90RWRpdGFibGUgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGxldmVsIGRlbHRhIG9uIGVhY2gga2V5IHByZXNzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgdXNpbmcga2V5Ym9hcmQgKyBhbmQgLS5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS2V5Ym9hcmRab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEtleWJvYXJkWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogdGFyZ2V0Tm90RWRpdGFibGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVsdGFfID0gb3B0aW9ucy5kZWx0YSA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gICAgICogYEtleUV2ZW50YCwgYW5kIGRlY2lkZXMgd2hldGhlciB0byB6b29tIGluIG9yIG91dCAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlXG4gICAgICoga2V5IHByZXNzZWQgd2FzICcrJyBvciAnLScpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQHRoaXMge0tleWJvYXJkWm9vbX1cbiAgICAgKi9cbiAgICBLZXlib2FyZFpvb20ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTiB8fFxuICAgICAgICAgICAgbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWVBSRVNTKSB7XG4gICAgICAgICAgICB2YXIga2V5RXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBrZXlFdmVudC5jaGFyQ29kZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAgICAgICAgIChjaGFyQ29kZSA9PSAnKycuY2hhckNvZGVBdCgwKSB8fCBjaGFyQ29kZSA9PSAnLScuY2hhckNvZGVBdCgwKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBjaGFyQ29kZSA9PSAnKycuY2hhckNvZGVBdCgwKSA/IHRoaXMuZGVsdGFfIDogLXRoaXMuZGVsdGFfO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgICAgICB6b29tQnlEZWx0YSh2aWV3LCBkZWx0YSwgdW5kZWZpbmVkLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICAgICAga2V5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIEtleWJvYXJkWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkWm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvS2luZXRpY1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEtpbmV0aWMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlY2F5IFJhdGUgb2YgZGVjYXkgKG11c3QgYmUgbmVnYXRpdmUpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5WZWxvY2l0eSBNaW5pbXVtIHZlbG9jaXR5IChwaXhlbHMvbWlsbGlzZWNvbmQpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBEZWxheSB0byBjb25zaWRlciB0byBjYWxjdWxhdGUgdGhlIGtpbmV0aWNcbiAgICAgKiAgICAgaW5pdGlhbCB2YWx1ZXMgKG1pbGxpc2Vjb25kcykuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2luZXRpYyhkZWNheSwgbWluVmVsb2NpdHksIGRlbGF5KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWNheV8gPSBkZWNheTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVsYXlfID0gZGVsYXk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9pbnRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5nbGVfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuYW5nbGVfID0gMDtcbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB0aGlzLnBvaW50c18ucHVzaCh4LCB5LCBEYXRlLm5vdygpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgd2Ugc2hvdWxkIGRvIGtpbmV0aWMgYW5pbWF0aW9uLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9pbnRzXy5sZW5ndGggPCA2KSB7XG4gICAgICAgICAgICAvLyBhdCBsZWFzdCAyIHBvaW50cyBhcmUgcmVxdWlyZWQgKGkuZS4gdGhlcmUgbXVzdCBiZSBhdCBsZWFzdCA2IGVsZW1lbnRzXG4gICAgICAgICAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbGF5ID0gRGF0ZS5ub3coKSAtIHRoaXMuZGVsYXlfO1xuICAgICAgICB2YXIgbGFzdEluZGV4ID0gdGhpcy5wb2ludHNfLmxlbmd0aCAtIDM7XG4gICAgICAgIGlmICh0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMl0gPCBkZWxheSkge1xuICAgICAgICAgICAgLy8gdGhlIGxhc3QgdHJhY2tlZCBwb2ludCBpcyB0b28gb2xkLCB3aGljaCBtZWFucyB0aGF0IHRoZSB1c2VyIHN0b3BwZWRcbiAgICAgICAgICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gICAgICAgIHZhciBmaXJzdEluZGV4ID0gbGFzdEluZGV4IC0gMztcbiAgICAgICAgd2hpbGUgKGZpcnN0SW5kZXggPiAwICYmIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl0gPiBkZWxheSkge1xuICAgICAgICAgICAgZmlyc3RJbmRleCAtPSAzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgYSBkdXJhdGlvbiBvZiAwIChkaXZpZGUgYnkgemVybylcbiAgICAgICAgLy8gd2UgYWxzbyBtYWtlIHN1cmUgdGhlIHVzZXIgcGFubmVkIGZvciBhIGR1cmF0aW9uIG9mIGF0IGxlYXN0IG9uZSBmcmFtZVxuICAgICAgICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gICAgICAgIGlmIChkdXJhdGlvbiA8IDEwMDAgLyA2MCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkeCA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXhdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXhdO1xuICAgICAgICB2YXIgZHkgPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMV0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDFdO1xuICAgICAgICB0aGlzLmFuZ2xlXyA9IE1hdGguYXRhbjIoZHksIGR4KTtcbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsVmVsb2NpdHlfID4gdGhpcy5taW5WZWxvY2l0eV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRvdGFsIGRpc3RhbmNlIHRyYXZlbGxlZCAocGl4ZWxzKS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5nZXREaXN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblZlbG9jaXR5XyAtIHRoaXMuaW5pdGlhbFZlbG9jaXR5XykgLyB0aGlzLmRlY2F5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgb2YgdGhlIGtpbmV0aWMgcGFubmluZyBhbmltYXRpb24gKHJhZGlhbnMpLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmdldEFuZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmdsZV87XG4gICAgfTtcbiAgICByZXR1cm4gS2luZXRpYztcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBLaW5ldGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2luZXRpYy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7IERFVklDRV9QSVhFTF9SQVRJTywgRklSRUZPWCB9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgeyBhbGwsIGFsd2F5cywgZm9jdXNXaXRoVGFiaW5kZXggfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgTW9kZSA9IHtcbiAgICBUUkFDS1BBRDogJ3RyYWNrcGFkJyxcbiAgICBXSEVFTDogJ3doZWVsJyxcbn07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLmFsd2F5c30uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gV2hlbiB0aGUgbWFwJ3MgdGFyZ2V0IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlIHNldCxcbiAqIHRoZSBpbnRlcmFjdGlvbiB3aWxsIG9ubHkgaGFuZGxlIGV2ZW50cyB3aGVuIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4RGVsdGE9MV0gTWF4aW11bSBtb3VzZSB3aGVlbCBkZWx0YS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aW1lb3V0PTgwXSBNb3VzZSB3aGVlbCB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUFuY2hvcj10cnVlXSBFbmFibGUgem9vbWluZyB1c2luZyB0aGUgbW91c2Unc1xuICogbG9jYXRpb24gYXMgdGhlIGFuY2hvci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgem9vbWluZyBpbiBhbmQgb3V0IHdpbGwgem9vbSB0b1xuICogdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuIGluc3RlYWQgb2Ygem9vbWluZyBvbiB0aGUgbW91c2UncyBsb2NhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIElmIHRydWUsIHRoZSBtb3VzZSB3aGVlbCB6b29tXG4gKiBldmVudCB3aWxsIGFsd2F5cyBhbmltYXRlIHRvIHRoZSBjbG9zZXN0IHpvb20gbGV2ZWwgYWZ0ZXIgYW4gaW50ZXJhY3Rpb247XG4gKiBmYWxzZSBtZWFucyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgYXJlIGFsbG93ZWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBzY3JvbGxpbmcgdGhlIG1vdXNlIHdoZWVsLlxuICogQGFwaVxuICovXG52YXIgTW91c2VXaGVlbFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1vdXNlV2hlZWxab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1vdXNlV2hlZWxab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vSW50ZXJhY3Rpb24uanNcIikuSW50ZXJhY3Rpb25PcHRpb25zfSAqLyAob3B0aW9ucykpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG90YWxEZWx0YV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3REZWx0YV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhXyA9IG9wdGlvbnMubWF4RGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4RGVsdGEgOiAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGltZW91dF8gPSBvcHRpb25zLnRpbWVvdXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGltZW91dCA6IDgwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51c2VBbmNob3JfID1cbiAgICAgICAgICAgIG9wdGlvbnMudXNlQW5jaG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnVzZUFuY2hvciA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnN0cmFpblJlc29sdXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb25cbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICB2YXIgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IGFsd2F5cztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLm9uRm9jdXNPbmx5XG4gICAgICAgICAgICA/IGFsbChmb2N1c1dpdGhUYWJpbmRleCwgY29uZGl0aW9uKVxuICAgICAgICAgICAgOiBjb25kaXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGltZW91dElkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtNb2RlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1vZGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2twYWQgZXZlbnRzIHNlcGFyYXRlZCBieSB0aGlzIGRlbGF5IHdpbGwgYmUgY29uc2lkZXJlZCBzZXBhcmF0ZVxuICAgICAgICAgKiBpbnRlcmFjdGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFja3BhZEV2ZW50R2FwXyA9IDQwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2twYWRUaW1lb3V0SWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBkZWx0YSB2YWx1ZXMgcGVyIHpvb20gbGV2ZWxcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhUGVyWm9vbV8gPSAzMDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuZW5kSW50ZXJhY3Rpb25fID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRyYWNrcGFkVGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKTtcbiAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih1bmRlZmluZWQsIHRoaXMubGFzdERlbHRhXyA/ICh0aGlzLmxhc3REZWx0YV8gPiAwID8gMSA6IC0xKSA6IDAsIHRoaXMubGFzdEFuY2hvcl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYSBtb3VzZXdoZWVsLWV2ZW50KSBhbmQgZXZlbnR1YWxseVxuICAgICAqIHpvb21zIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0eXBlID0gbWFwQnJvd3NlckV2ZW50LnR5cGU7XG4gICAgICAgIGlmICh0eXBlICE9PSBFdmVudFR5cGUuV0hFRUwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgd2hlZWxFdmVudCA9IC8qKiBAdHlwZSB7V2hlZWxFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgd2hlZWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAodGhpcy51c2VBbmNob3JfKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmNob3JfID0gbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVsdGEgbm9ybWFsaXNhdGlvbiBpbnNwaXJlZCBieVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9ibG9iLzAwMWM3YjkvanMvdWkvaGFuZGxlci9zY3JvbGxfem9vbS5qc1xuICAgICAgICB2YXIgZGVsdGE7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuV0hFRUwpIHtcbiAgICAgICAgICAgIGRlbHRhID0gd2hlZWxFdmVudC5kZWx0YVk7XG4gICAgICAgICAgICBpZiAoRklSRUZPWCAmJiB3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgICAgICAgICAgICBkZWx0YSAvPSBERVZJQ0VfUElYRUxfUkFUSU87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2hlZWxFdmVudC5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkUpIHtcbiAgICAgICAgICAgICAgICBkZWx0YSAqPSA0MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGFzdERlbHRhXyA9IGRlbHRhO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAodGhpcy5zdGFydFRpbWVfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubW9kZV8gfHwgbm93IC0gdGhpcy5zdGFydFRpbWVfID4gdGhpcy50cmFja3BhZEV2ZW50R2FwXykge1xuICAgICAgICAgICAgdGhpcy5tb2RlXyA9IE1hdGguYWJzKGRlbHRhKSA8IDQgPyBNb2RlLlRSQUNLUEFEIDogTW9kZS5XSEVFTDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLlRSQUNLUEFEICYmXG4gICAgICAgICAgICAhKHZpZXcuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHx8IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50cmFja3BhZFRpbWVvdXRJZF8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50cmFja3BhZFRpbWVvdXRJZF8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpZXcuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuZW5kSW50ZXJhY3Rpb25fLmJpbmQodGhpcyksIHRoaXMudGltZW91dF8pO1xuICAgICAgICAgICAgdmlldy5hZGp1c3Rab29tKC1kZWx0YSAvIHRoaXMuZGVsdGFQZXJab29tXywgdGhpcy5sYXN0QW5jaG9yXyk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3RhbERlbHRhXyArPSBkZWx0YTtcbiAgICAgICAgdmFyIHRpbWVMZWZ0ID0gTWF0aC5tYXgodGhpcy50aW1lb3V0XyAtIChub3cgLSB0aGlzLnN0YXJ0VGltZV8pLCAwKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkXyk7XG4gICAgICAgIHRoaXMudGltZW91dElkXyA9IHNldFRpbWVvdXQodGhpcy5oYW5kbGVXaGVlbFpvb21fLmJpbmQodGhpcywgbWFwKSwgdGltZUxlZnQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmhhbmRsZVdoZWVsWm9vbV8gPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWx0YSA9IC1jbGFtcCh0aGlzLnRvdGFsRGVsdGFfLCAtdGhpcy5tYXhEZWx0YV8gKiB0aGlzLmRlbHRhUGVyWm9vbV8sIHRoaXMubWF4RGVsdGFfICogdGhpcy5kZWx0YVBlclpvb21fKSAvIHRoaXMuZGVsdGFQZXJab29tXztcbiAgICAgICAgaWYgKHZpZXcuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHx8IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pIHtcbiAgICAgICAgICAgIC8vIHZpZXcgaGFzIGEgem9vbSBjb25zdHJhaW50LCB6b29tIGJ5IDFcbiAgICAgICAgICAgIGRlbHRhID0gZGVsdGEgPyAoZGVsdGEgPiAwID8gMSA6IC0xKSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIHRoaXMubGFzdEFuY2hvcl8sIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50b3RhbERlbHRhXyA9IDA7XG4gICAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIHVzaW5nIHRoZSBtb3VzZSdzIGxvY2F0aW9uIGFzIGFuIGFuY2hvciB3aGVuIHpvb21pbmdcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUFuY2hvciB0cnVlIHRvIHpvb20gdG8gdGhlIG1vdXNlJ3MgbG9jYXRpb24sIGZhbHNlXG4gICAgICogdG8gem9vbSB0byB0aGUgY2VudGVyIG9mIHRoZSBtYXBcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLnNldE1vdXNlQW5jaG9yID0gZnVuY3Rpb24gKHVzZUFuY2hvcikge1xuICAgICAgICB0aGlzLnVzZUFuY2hvcl8gPSB1c2VBbmNob3I7XG4gICAgICAgIGlmICghdXNlQW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1vdXNlV2hlZWxab29tO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgTW91c2VXaGVlbFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb3VzZVdoZWVsWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGRpc2FibGUgfSBmcm9tICcuLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGhyZXNob2xkPTAuM10gTWluaW1hbCBhbmdsZSBpbiByYWRpYW5zIHRvIHN0YXJ0IGEgcm90YXRpb24uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IHR3aXN0aW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBpbmNoUm90YXRlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBpbmNoUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgcG9pbnRlck9wdGlvbnMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlci5qc1wiKS5PcHRpb25zfSAqLyAob3B0aW9ucyk7XG4gICAgICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGhyZXNob2xkXyA9IG9wdGlvbnMudGhyZXNob2xkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRocmVzaG9sZCA6IDAuMztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBQaW5jaFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgcm90YXRpb25EZWx0YSA9IDAuMDtcbiAgICAgICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgICAgIHZhciB0b3VjaDEgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzFdO1xuICAgICAgICAvLyBhbmdsZSBiZXR3ZWVuIHRvdWNoZXNcbiAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0b3VjaDEuY2xpZW50WSAtIHRvdWNoMC5jbGllbnRZLCB0b3VjaDEuY2xpZW50WCAtIHRvdWNoMC5jbGllbnRYKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdEFuZ2xlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBhbmdsZSAtIHRoaXMubGFzdEFuZ2xlXztcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25EZWx0YV8gKz0gZGVsdGE7XG4gICAgICAgICAgICBpZiAoIXRoaXMucm90YXRpbmdfICYmIE1hdGguYWJzKHRoaXMucm90YXRpb25EZWx0YV8pID4gdGhpcy50aHJlc2hvbGRfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGluZ18gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm90YXRpb25EZWx0YSA9IGRlbHRhO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IGFuZ2xlO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcm90YXRlIGFuY2hvciBwb2ludC5cbiAgICAgICAgLy8gRklYTUU6IHNob3VsZCBiZSB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gdGhlIGxpbmVzOlxuICAgICAgICAvLyAgICAgdG91Y2gwLHRvdWNoMSBhbmQgcHJldmlvdXNUb3VjaDAscHJldmlvdXNUb3VjaDFcbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGhpcy50YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICAgICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgICAgIHRoaXMuYW5jaG9yXyA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoY2VudHJvaWQpO1xuICAgICAgICAvLyByb3RhdGVcbiAgICAgICAgaWYgKHRoaXMucm90YXRpbmdfKSB7XG4gICAgICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwocm90YXRpb25EZWx0YSwgdGhpcy5hbmNob3JfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyA9IDAuMDtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBpbmNoUm90YXRlO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IFBpbmNoUm90YXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hSb3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTQwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IHBpbmNoaW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQaW5jaFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGluY2hab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgcG9pbnRlck9wdGlvbnMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlci5qc1wiKS5PcHRpb25zfSAqLyAob3B0aW9ucyk7XG4gICAgICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogNDAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0RGlzdGFuY2VfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc2NhbGVEZWx0YSA9IDEuMDtcbiAgICAgICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgICAgIHZhciB0b3VjaDEgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzFdO1xuICAgICAgICB2YXIgZHggPSB0b3VjaDAuY2xpZW50WCAtIHRvdWNoMS5jbGllbnRYO1xuICAgICAgICB2YXIgZHkgPSB0b3VjaDAuY2xpZW50WSAtIHRvdWNoMS5jbGllbnRZO1xuICAgICAgICAvLyBkaXN0YW5jZSBiZXR3ZWVuIHRvdWNoZXNcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKHRoaXMubGFzdERpc3RhbmNlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzY2FsZURlbHRhID0gdGhpcy5sYXN0RGlzdGFuY2VfIC8gZGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0RGlzdGFuY2VfID0gZGlzdGFuY2U7XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmIChzY2FsZURlbHRhICE9IDEuMCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSBzY2FsZURlbHRhO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNjYWxlIGFuY2hvciBwb2ludC5cbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGhpcy50YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICAgICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgICAgIHRoaXMuYW5jaG9yXyA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoY2VudHJvaWQpO1xuICAgICAgICAvLyBzY2FsZSwgYnlwYXNzIHRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnRcbiAgICAgICAgbWFwLnJlbmRlcigpO1xuICAgICAgICB2aWV3LmFkanVzdFJlc29sdXRpb25JbnRlcm5hbChzY2FsZURlbHRhLCB0aGlzLmFuY2hvcl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5sYXN0U2NhbGVEZWx0YV8gPiAxID8gMSA6IC0xO1xuICAgICAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXywgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFpvb20ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubGFzdERpc3RhbmNlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gMTtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBpbmNoWm9vbTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBQaW5jaFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaW5jaFpvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9NYXBcbiAqL1xuaW1wb3J0IENvbXBvc2l0ZU1hcFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvQ29tcG9zaXRlLmpzJztcbmltcG9ydCBQbHVnZ2FibGVNYXAgZnJvbSAnLi9QbHVnZ2FibGVNYXAuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMgYXMgZGVmYXVsdENvbnRyb2xzIH0gZnJvbSAnLi9jb250cm9sLmpzJztcbmltcG9ydCB7IGRlZmF1bHRzIGFzIGRlZmF1bHRJbnRlcmFjdGlvbnMgfSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogVGhlIG1hcCBpcyB0aGUgY29yZSBjb21wb25lbnQgb2YgT3BlbkxheWVycy4gRm9yIGEgbWFwIHRvIHJlbmRlciwgYSB2aWV3LFxuICogb25lIG9yIG1vcmUgbGF5ZXJzLCBhbmQgYSB0YXJnZXQgY29udGFpbmVyIGFyZSBuZWVkZWQ6XG4gKlxuICogICAgIGltcG9ydCBNYXAgZnJvbSAnb2wvTWFwJztcbiAqICAgICBpbXBvcnQgVmlldyBmcm9tICdvbC9WaWV3JztcbiAqICAgICBpbXBvcnQgVGlsZUxheWVyIGZyb20gJ29sL2xheWVyL1RpbGUnO1xuICogICAgIGltcG9ydCBPU00gZnJvbSAnb2wvc291cmNlL09TTSc7XG4gKlxuICogICAgIHZhciBtYXAgPSBuZXcgTWFwKHtcbiAqICAgICAgIHZpZXc6IG5ldyBWaWV3KHtcbiAqICAgICAgICAgY2VudGVyOiBbMCwgMF0sXG4gKiAgICAgICAgIHpvb206IDFcbiAqICAgICAgIH0pLFxuICogICAgICAgbGF5ZXJzOiBbXG4gKiAgICAgICAgIG5ldyBUaWxlTGF5ZXIoe1xuICogICAgICAgICAgIHNvdXJjZTogbmV3IE9TTSgpXG4gKiAgICAgICAgIH0pXG4gKiAgICAgICBdLFxuICogICAgICAgdGFyZ2V0OiAnbWFwJ1xuICogICAgIH0pO1xuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IGNyZWF0ZXMgYSBtYXAgdXNpbmcgYSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL1RpbGV9IHRvXG4gKiBkaXNwbGF5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL09TTX5PU019IE9TTSBkYXRhIGFuZCByZW5kZXIgaXQgdG8gYSBET01cbiAqIGVsZW1lbnQgd2l0aCB0aGUgaWQgYG1hcGAuXG4gKlxuICogVGhlIGNvbnN0cnVjdG9yIHBsYWNlcyBhIHZpZXdwb3J0IGNvbnRhaW5lciAod2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLXZpZXdwb3J0YCkgaW4gdGhlIHRhcmdldCBlbGVtZW50IChzZWUgYGdldFZpZXdwb3J0KClgKSwgYW5kIHRoZW4gdHdvXG4gKiBmdXJ0aGVyIGVsZW1lbnRzIHdpdGhpbiB0aGUgdmlld3BvcnQ6IG9uZSB3aXRoIENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRgIGZvciBjb250cm9scyBhbmQgc29tZSBvdmVybGF5cywgYW5kIG9uZSB3aXRoXG4gKiBDU1MgY2xhc3MgbmFtZSBgb2wtb3ZlcmxheWNvbnRhaW5lcmAgZm9yIG90aGVyIG92ZXJsYXlzIChzZWUgdGhlIGBzdG9wRXZlbnRgXG4gKiBvcHRpb24gb2Yge0BsaW5rIG1vZHVsZTpvbC9PdmVybGF5fk92ZXJsYXl9IGZvciB0aGUgZGlmZmVyZW5jZSkuIFRoZSBtYXBcbiAqIGl0c2VsZiBpcyBwbGFjZWQgaW4gYSBmdXJ0aGVyIGVsZW1lbnQgd2l0aGluIHRoZSB2aWV3cG9ydC5cbiAqXG4gKiBMYXllcnMgYXJlIHN0b3JlZCBhcyBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpblxuICogbGF5ZXJHcm91cHMuIEEgdG9wLWxldmVsIGdyb3VwIGlzIHByb3ZpZGVkIGJ5IHRoZSBsaWJyYXJ5LiBUaGlzIGlzIHdoYXQgaXNcbiAqIGFjY2Vzc2VkIGJ5IGBnZXRMYXllckdyb3VwYCBhbmQgYHNldExheWVyR3JvdXBgLiBMYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgYXJlIGFkZGVkIHRvIHRoaXMgZ3JvdXAsIGFuZCBgYWRkTGF5ZXJgIGFuZCBgcmVtb3ZlTGF5ZXJgIGNoYW5nZSB0aGVcbiAqIGxheWVyIGNvbGxlY3Rpb24gaW4gdGhlIGdyb3VwLiBgZ2V0TGF5ZXJzYCBpcyBhIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvclxuICogYGdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKWAuIE5vdGUgdGhhdCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0dyb3Vwfkdyb3VwfVxuICogaXMgYSBzdWJjbGFzcyBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V9LCBzbyBsYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgb3IgYWRkZWQgd2l0aCBgYWRkTGF5ZXJgIGNhbiBiZSBncm91cHMsIHdoaWNoIGNhbiBjb250YWluIGZ1cnRoZXJcbiAqIGdyb3VwcywgYW5kIHNvIG9uLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIE1hcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuTWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmNvbnRyb2xzKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNvbnRyb2xzID0gZGVmYXVsdENvbnRyb2xzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zLmludGVyYWN0aW9ucykge1xuICAgICAgICAgICAgb3B0aW9ucy5pbnRlcmFjdGlvbnMgPSBkZWZhdWx0SW50ZXJhY3Rpb25zKHtcbiAgICAgICAgICAgICAgICBvbkZvY3VzT25seTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZU1hcFJlbmRlcmVyKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcDtcbn0oUGx1Z2dhYmxlTWFwKSk7XG5leHBvcnQgZGVmYXVsdCBNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2xcbiAqL1xuaW1wb3J0IEF0dHJpYnV0aW9uIGZyb20gJy4vY29udHJvbC9BdHRyaWJ1dGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IFJvdGF0ZSBmcm9tICcuL2NvbnRyb2wvUm90YXRlLmpzJztcbmltcG9ydCBab29tIGZyb20gJy4vY29udHJvbC9ab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQXR0cmlidXRpb24gfSBmcm9tICcuL2NvbnRyb2wvQXR0cmlidXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBDb250cm9sIH0gZnJvbSAnLi9jb250cm9sL0NvbnRyb2wuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBGdWxsU2NyZWVuIH0gZnJvbSAnLi9jb250cm9sL0Z1bGxTY3JlZW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3VzZVBvc2l0aW9uIH0gZnJvbSAnLi9jb250cm9sL01vdXNlUG9zaXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBPdmVydmlld01hcCB9IGZyb20gJy4vY29udHJvbC9PdmVydmlld01hcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFJvdGF0ZSB9IGZyb20gJy4vY29udHJvbC9Sb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTY2FsZUxpbmUgfSBmcm9tICcuL2NvbnRyb2wvU2NhbGVMaW5lLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbSB9IGZyb20gJy4vY29udHJvbC9ab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbVNsaWRlciB9IGZyb20gJy4vY29udHJvbC9ab29tU2xpZGVyLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbVRvRXh0ZW50IH0gZnJvbSAnLi9jb250cm9sL1pvb21Ub0V4dGVudC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRzT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb249dHJ1ZV0gSW5jbHVkZVxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL0F0dHJpYnV0aW9uLmpzXCIpLk9wdGlvbnN9IFthdHRyaWJ1dGlvbk9wdGlvbnNdXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL1JvdGF0ZS5qc1wiKS5PcHRpb25zfSBbcm90YXRlT3B0aW9uc10gT3B0aW9uc1xuICogZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3pvb21dIEluY2x1ZGUge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29udHJvbC9ab29tLmpzXCIpLk9wdGlvbnN9IFt6b29tT3B0aW9uc10gT3B0aW9ucyBmb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LlxuICogQGFwaVxuICovXG4vKipcbiAqIFNldCBvZiBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFVubGVzcyBjb25maWd1cmVkIG90aGVyd2lzZSxcbiAqIHRoaXMgcmV0dXJucyBhIGNvbGxlY3Rpb24gY29udGFpbmluZyBhbiBpbnN0YW5jZSBvZiBlYWNoIG9mIHRoZSBmb2xsb3dpbmdcbiAqIGNvbnRyb2xzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zfSBbb3B0X29wdGlvbnNdXG4gKiBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn1cbiAqIENvbnRyb2xzLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICB2YXIgY29udHJvbHMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICAgIHZhciB6b29tQ29udHJvbCA9IG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tIDogdHJ1ZTtcbiAgICBpZiAoem9vbUNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbHMucHVzaChuZXcgWm9vbShvcHRpb25zLnpvb21PcHRpb25zKSk7XG4gICAgfVxuICAgIHZhciByb3RhdGVDb250cm9sID0gb3B0aW9ucy5yb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRlIDogdHJ1ZTtcbiAgICBpZiAocm90YXRlQ29udHJvbCkge1xuICAgICAgICBjb250cm9scy5wdXNoKG5ldyBSb3RhdGUob3B0aW9ucy5yb3RhdGVPcHRpb25zKSk7XG4gICAgfVxuICAgIHZhciBhdHRyaWJ1dGlvbkNvbnRyb2wgPSBvcHRpb25zLmF0dHJpYnV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF0dHJpYnV0aW9uIDogdHJ1ZTtcbiAgICBpZiAoYXR0cmlidXRpb25Db250cm9sKSB7XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobmV3IEF0dHJpYnV0aW9uKG9wdGlvbnMuYXR0cmlidXRpb25PcHRpb25zKSk7XG4gICAgfVxuICAgIHJldHVybiBjb250cm9scztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRyb2wuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgRG91YmxlQ2xpY2tab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmltcG9ydCBEcmFnUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyc7XG5pbXBvcnQgRHJhZ1JvdGF0ZSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMnO1xuaW1wb3J0IERyYWdab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMnO1xuaW1wb3J0IEtleWJvYXJkUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMnO1xuaW1wb3J0IEtleWJvYXJkWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5pbXBvcnQgS2luZXRpYyBmcm9tICcuL0tpbmV0aWMuanMnO1xuaW1wb3J0IE1vdXNlV2hlZWxab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuaW1wb3J0IFBpbmNoUm90YXRlIGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMnO1xuaW1wb3J0IFBpbmNoWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERvdWJsZUNsaWNrWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ0FuZERyb3AgfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdBbmREcm9wLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ0JveCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ0JveC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdQYW4gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnUm90YXRlIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1JvdGF0ZUFuZFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVBbmRab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1pvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhdyB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEV4dGVudCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRXh0ZW50LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgSW50ZXJhY3Rpb24gfSBmcm9tICcuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgS2V5Ym9hcmRQYW4gfSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgS2V5Ym9hcmRab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb2RpZnkgfSBmcm9tICcuL2ludGVyYWN0aW9uL01vZGlmeS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdXNlV2hlZWxab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBpbmNoUm90YXRlIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBpbmNoWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUG9pbnRlciB9IGZyb20gJy4vaW50ZXJhY3Rpb24vUG9pbnRlci5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNlbGVjdCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vU2VsZWN0LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgU25hcCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vU25hcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFRyYW5zbGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vVHJhbnNsYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbHRTaGlmdERyYWdSb3RhdGU9dHJ1ZV0gV2hldGhlciBBbHQtU2hpZnQtZHJhZyByb3RhdGUgaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gSW50ZXJhY3Qgb25seSB3aGVuIHRoZSBtYXAgaGFzIHRoZVxuICogZm9jdXMuIFRoaXMgYWZmZWN0cyB0aGUgYE1vdXNlV2hlZWxab29tYCBhbmQgYERyYWdQYW5gIGludGVyYWN0aW9ucyBhbmQgaXNcbiAqIHVzZWZ1bCB3aGVuIHBhZ2Ugc2Nyb2xsIGlzIGRlc2lyZWQgZm9yIG1hcHMgdGhhdCBkbyBub3QgaGF2ZSB0aGUgYnJvd3NlcidzXG4gKiBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RvdWJsZUNsaWNrWm9vbT10cnVlXSBXaGV0aGVyIGRvdWJsZSBjbGljayB6b29tIGlzXG4gKiBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBba2V5Ym9hcmQ9dHJ1ZV0gV2hldGhlciBrZXlib2FyZCBpbnRlcmFjdGlvbiBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbW91c2VXaGVlbFpvb209dHJ1ZV0gV2hldGhlciBtb3VzZXdoZWVsIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NoaWZ0RHJhZ1pvb209dHJ1ZV0gV2hldGhlciBTaGlmdC1kcmFnIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RyYWdQYW49dHJ1ZV0gV2hldGhlciBkcmFnIHBhbiBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcGluY2hSb3RhdGU9dHJ1ZV0gV2hldGhlciBwaW5jaCByb3RhdGUgaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoWm9vbT10cnVlXSBXaGV0aGVyIHBpbmNoIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbURlbHRhXSBab29tIGxldmVsIGRlbHRhIHdoZW4gdXNpbmcga2V5Ym9hcmQgb3IgZG91YmxlIGNsaWNrIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EdXJhdGlvbl0gRHVyYXRpb24gb2YgdGhlIHpvb20gYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKi9cbi8qKlxuICogU2V0IG9mIGludGVyYWN0aW9ucyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFNwZWNpZmljIGludGVyYWN0aW9ucyBjYW4gYmVcbiAqIGV4Y2x1ZGVkIGJ5IHNldHRpbmcgdGhlIGFwcHJvcHJpYXRlIG9wdGlvbiB0byBmYWxzZSBpbiB0aGUgY29uc3RydWN0b3JcbiAqIG9wdGlvbnMsIGJ1dCB0aGUgb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBpcyBmaXhlZC4gIElmIHlvdSB3YW50IHRvIHNwZWNpZnlcbiAqIGEgZGlmZmVyZW50IG9yZGVyIGZvciBpbnRlcmFjdGlvbnMsIHlvdSB3aWxsIG5lZWQgdG8gY3JlYXRlIHlvdXIgb3duXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9ufSBpbnN0YW5jZXMgYW5kIGluc2VydFxuICogdGhlbSBpbnRvIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSBpbiB0aGUgb3JkZXIgeW91IHdhbnRcbiAqIGJlZm9yZSBjcmVhdGluZyB5b3VyIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gaW5zdGFuY2UuIENoYW5naW5nIHRoZSBvcmRlciBjYW5cbiAqIGJlIG9mIGludGVyZXN0IGlmIHRoZSBldmVudCBwcm9wYWdhdGlvbiBuZWVkcyB0byBiZSBzdG9wcGVkIGF0IGEgcG9pbnQuXG4gKiBUaGUgZGVmYXVsdCBzZXQgb2YgaW50ZXJhY3Rpb25zLCBpbiBzZXF1ZW5jZSwgaXM6XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZX5EcmFnUm90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbX5Eb3VibGVDbGlja1pvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1Bhbn5EcmFnUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlflBpbmNoUm90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1BpbmNoWm9vbX5QaW5jaFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5+S2V5Ym9hcmRQYW59XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbX5Nb3VzZVdoZWVsWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbX5EcmFnWm9vbX1cbiAqXG4gKiBAcGFyYW0ge0RlZmF1bHRzT3B0aW9uc30gW29wdF9vcHRpb25zXSBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqIEEgY29sbGVjdGlvbiBvZiBpbnRlcmFjdGlvbnMgdG8gYmUgdXNlZCB3aXRoIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9XG4gKiBjb25zdHJ1Y3RvcidzIGBpbnRlcmFjdGlvbnNgIG9wdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgdmFyIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgdmFyIGtpbmV0aWMgPSBuZXcgS2luZXRpYygtMC4wMDUsIDAuMDUsIDEwMCk7XG4gICAgdmFyIGFsdFNoaWZ0RHJhZ1JvdGF0ZSA9IG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZVxuICAgICAgICA6IHRydWU7XG4gICAgaWYgKGFsdFNoaWZ0RHJhZ1JvdGF0ZSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1JvdGF0ZSgpKTtcbiAgICB9XG4gICAgdmFyIGRvdWJsZUNsaWNrWm9vbSA9IG9wdGlvbnMuZG91YmxlQ2xpY2tab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSA6IHRydWU7XG4gICAgaWYgKGRvdWJsZUNsaWNrWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRG91YmxlQ2xpY2tab29tKHtcbiAgICAgICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgZHJhZ1BhbiA9IG9wdGlvbnMuZHJhZ1BhbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kcmFnUGFuIDogdHJ1ZTtcbiAgICBpZiAoZHJhZ1Bhbikge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1Bhbih7XG4gICAgICAgICAgICBvbkZvY3VzT25seTogb3B0aW9ucy5vbkZvY3VzT25seSxcbiAgICAgICAgICAgIGtpbmV0aWM6IGtpbmV0aWMsXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIHBpbmNoUm90YXRlID0gb3B0aW9ucy5waW5jaFJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFJvdGF0ZSA6IHRydWU7XG4gICAgaWYgKHBpbmNoUm90YXRlKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBQaW5jaFJvdGF0ZSgpKTtcbiAgICB9XG4gICAgdmFyIHBpbmNoWm9vbSA9IG9wdGlvbnMucGluY2hab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpbmNoWm9vbSA6IHRydWU7XG4gICAgaWYgKHBpbmNoWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hab29tKHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIga2V5Ym9hcmQgPSBvcHRpb25zLmtleWJvYXJkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleWJvYXJkIDogdHJ1ZTtcbiAgICBpZiAoa2V5Ym9hcmQpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkUGFuKCkpO1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgS2V5Ym9hcmRab29tKHtcbiAgICAgICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgbW91c2VXaGVlbFpvb20gPSBvcHRpb25zLm1vdXNlV2hlZWxab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1vdXNlV2hlZWxab29tIDogdHJ1ZTtcbiAgICBpZiAobW91c2VXaGVlbFpvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IE1vdXNlV2hlZWxab29tKHtcbiAgICAgICAgICAgIG9uRm9jdXNPbmx5OiBvcHRpb25zLm9uRm9jdXNPbmx5LFxuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBzaGlmdERyYWdab29tID0gb3B0aW9ucy5zaGlmdERyYWdab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gOiB0cnVlO1xuICAgIGlmIChzaGlmdERyYWdab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnWm9vbSh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGludGVyYWN0aW9ucztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aW9uLmpzLm1hcCIsImltcG9ydCBDb250cm9sIGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XHJcbi8qKlxyXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBDb250cm9scyB3aXRoIGNoaWxkIGNvbnRyb2xzXHJcbiAqXHJcbiAqIFRoZSBlbGVtZW50IHByb3BlcnR5IG9mIHRoZSBDb21wb3NpdGVDb250cm9sIHdpbGwgYmVjb21lIHRoZSB0YXJnZXQgZWxlbWVudCBvZiBldmVyeSBjaGlsZCBjb250cm9sXHJcbiAqIGFuZCBhbHNvIHRoZSBjdXJyZW50IG1hcCB3aWxsIGJlIHNldCBmb3IgZWFjaCBjaGlsZCBjb250cm9sXHJcbiAqXHJcbiAqIFRoaXMgaXMgdXNlZCBlLmcuIGZvciB0aGUgKGxheW91dCkgY29udGFpbmVyIGNvbnRyb2xzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29tcG9zaXRlQ29udHJvbCBleHRlbmRzIENvbnRyb2wge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgQSBzaW5nbGUgY2hpbGQgY29udHJvbCBvciBhIGNvbGxlY3Rpb24gb2YgY2hpbGQgY29udHJvbHNcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgY29udHJvbCBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNoaWxkQ29udHJvbHMsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuICAgICAgICBpZiAoIW9wdHMuZWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtY29tcG9zaXRlJztcclxuICAgICAgICAgICAgb3B0cy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGNoaWxkcmVuO1xyXG4gICAgICAgIGlmIChjaGlsZENvbnRyb2xzIGluc3RhbmNlb2YgQ29udHJvbCkge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IFtjaGlsZENvbnRyb2xzXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuID0gY2hpbGRDb250cm9scztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAgICAgY29udHJvbC5zZXRUYXJnZXQob3B0cy5lbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzdXBlcihvcHRzKTtcclxuICAgICAgICB0aGlzLmNoaWxkQ29udHJvbHMgPSBjaGlsZHJlbjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG92ZXJyaWRkZW4gc2V0TWFwIG1ldGhvZFxyXG4gICAgICpcclxuICAgICAqIEhlcmUgd2Ugc2V0IHRoZSBtYXAgZm9yIGFsbCBjaGlsZCBjb250cm9sc1xyXG4gICAgICogQHBhcmFtIG1hcCB0aGUgY3VycmVudCBtYXBcclxuICAgICAqL1xyXG4gICAgc2V0TWFwKG1hcCkge1xyXG4gICAgICAgIHN1cGVyLnNldE1hcChtYXApO1xyXG4gICAgICAgIGlmIChtYXApIHtcclxuICAgICAgICAgICAgdGhpcy5jaGlsZENvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLnNldE1hcChtYXApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEEgZ2V0dGVyIGZvciB0aGUgY2hpbGQgY29udHJvbHNcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgZ2V0Q2hpbGRDb250cm9scygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZENvbnRyb2xzO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbXBvc2l0ZUNvbnRyb2wgfSBmcm9tIFwiLi4vYmFzZVwiO1xyXG4vKipcclxuICogQSBiYXNlIGNsYXNzIGZvciBhIGNvbnRhaW5lciBvZiBjb250cm9scyBpbiB0aGUgc2FtZSBIVE1MIGRpdiBlbGVtZW50XHJcbiAqXHJcbiAqIFRoaXMgY29udHJvbCBjcmVhdGVzIGEgcGFyZW50IGRpdiwgYW5kIHB1dHMgdGhlIGNoaWxkIGNvbnRyb2xzIGluIGl0LlxyXG4gKiBUYXJnZXQgYW5kIG1hcCBhcmUgc2V0IGF1dG9tYXRpY2FsbHkgLSBzZWUge0BsaW5rY29kZSBDb21wb3NpdGVDb250cm9sfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbnRhaW5lciBleHRlbmRzIENvbXBvc2l0ZUNvbnRyb2wge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNvbnRhaW5lciBvcHRpb25zXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50ID8gb3B0aW9ucy5lbGVtZW50IDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQob3B0aW9ucy5zdHlsZUNsYXNzKTtcclxuICAgICAgICBvcHRpb25zLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHN1cGVyKG9wdGlvbnMuY2hpbGRDb250cm9scywgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5zdHlsZUNsYXNzID0gb3B0aW9ucy5zdHlsZUNsYXNzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGdldHRlciBmb3IgdGhlIHN0eWxlIGNsYXNzXHJcbiAgICAgKi9cclxuICAgIGdldFN0eWxlQ2xhc3MoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVDbGFzcztcclxuICAgIH1cclxufVxyXG4iLCIvKipcclxuICogQSBzaW1wbGUgaGVscGVyIG1ldGhvZCBmb3Igc2ltcGxlciBoYW5kbGluZyBvZiBhcnJheXMuXHJcbiAqIFJlZ2FyZGxlc3MgaWYgeW91IGdpdmUgYSBzdHJpbmcgb3IgYW4gYXJyYXkgb2Ygc3RyaW5ncyB5b3Ugd2lsbCByZWNlaXZlIGFuIGFycmF5XHJcbiAqXHJcbiAqIEBwYXJhbSB2YWx1ZSBhIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdcclxuICovXHJcbmNvbnN0IHRvQXJyYXkgPSAodmFsdWUpID0+IHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBbdmFsdWVdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogQ3JlYXRlcyBhIGNoaWxkIEhUTUwgZWxlbWVudCBpZiBpdCBkb2VzIG5vdCBleGlzdCBhbmQgYWRkcyBpdCBhcyBjaGlsZCB0byB0aGUgZ2l2ZW4gZWxlbWVudFxyXG4gKlxyXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnRcclxuICogQHBhcmFtIHRhZ05hbWUgdGhlIHRhZyBuYW1lIGZvciB0aGUgbmV3IGNoaWxkIC0gZS5nLiBkaXZcclxuICogQHBhcmFtIGNsYXNzTmFtZSBhIGNzcyBjbGFzcyBuYW1lIGZvciB0aGUgbmV3IGNoaWxkXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlQ2hpbGRJZk5vdEV4aXN0ID0gKGVsZW1lbnQsIHRhZ05hbWUsIGNsYXNzTmFtZSkgPT4ge1xyXG4gICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgIGlmICghZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjbGFzc05hbWV9YCkpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChjcmVhdGVFbGVtZW50KHRhZ05hbWUsIGNsYXNzTmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRW5jbG9zaW5nIGVsZW1lbnQgaXMgbnVsbFwiKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJlbW92ZXMgYSBjaGlsZCBlbGVtZW50IHdpdGggZ2l2ZW4gY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGdpdmVuIGVsZW1lbnRcclxuICogQHBhcmFtIGVsZW1lbnQgdGhlIHBhcmVudCBlbGVtZW50XHJcbiAqIEBwYXJhbSBjbGFzc05hbWUgdGhlIGNzcyBjbGFzcyBuYW1lIG9mIHRoZSBjaGlsZCBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlQ2hpbGRJZkV4aXN0ID0gKGVsZW1lbnQsIGNsYXNzTmFtZSkgPT4ge1xyXG4gICAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjbGFzc05hbWV9YCk7XHJcbiAgICAgICAgaWYgKGNoaWxkICE9IG51bGwgJiYgZWxlbWVudC5jb250YWlucyhjaGlsZCkpIHtcclxuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmVtb3ZlIGFsbCBjaGlsZHJlbiBlbGVtZW50cyB3aXRoIGdpdmVuIGNzcyBjbGFzcyBuYW1lIG9mIHRoZSBnaXZlbiBwYXJlbnQgZWxlbWVudC5cclxuICogVGhlIGNoaWxkcmVuIGRvbid0IGhhdmUgdG8gYmUgYSBkaXJlY3QgY2hpbGQgb2YgdGhlIHBhcmVudCBlbGVtZW50LlxyXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnRcclxuICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGNoaWxkIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBjb25zdCByZW1vdmVDaGlsZHJlbklmRXhpc3QgPSAoZWxlbWVudCwgY2xhc3NOYW1lKSA9PiB7XHJcbiAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke2NsYXNzTmFtZX1gKTtcclxuICAgICAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCAmJiBjaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gY2hpbGQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBIVE1MIGVsZW1lbnRcclxuICogQHBhcmFtIHRhZ05hbWUgdGhlIHRhZyBuYW1lIGZvciB0aGUgbmV3IGVsZW1lbnQgLSBlLmcuIGRpdlxyXG4gKiBAcGFyYW0gY2xhc3NOYW1lIGEgY3NzIGNsYXNzIG5hbWUgZm9yIHRoZSBuZXcgZWxlbWVudFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUVsZW1lbnQgPSAodGFnTmFtZSwgY2xhc3NOYW1lKSA9PiB7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcclxuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgcmV0dXJuIGVsZW1lbnQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUb2dnbGVzIGNzcyBjbGFzcyBuYW1lcyBvZiBlbGVtZW50cyBmb3VuZCBieSB0aGUgZ2l2ZW4gc2VsZWN0b3IocylcclxuICogQHBhcmFtIHNlbGVjdG9yczJ0b2dnbGUgb25lIG9yIG1vcmUgY3NzIHNlbGVjdG9yc1xyXG4gKiBAcGFyYW0gdG9nZ2xlQ2xhc3NOYW1lcyBvbmUgb3IgbW9yZSBjbGFzcyBuYW1lcyB0byB0b2dnbGVcclxuICogQHBhcmFtIGFuY2VzdG9yIGFuIGFuY2VzdG9yIGVsZW1lbnQgZm9yIHRoZSBxdWVyeSBzZWxlY3Rpb24gKGRlZmF1bHQgaXMgZG9jdW1lbnQpXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdG9nZ2xlQ2xhc3MgPSAoc2VsZWN0b3JzMnRvZ2dsZSwgdG9nZ2xlQ2xhc3NOYW1lcywgYW5jZXN0b3IgPSBkb2N1bWVudCkgPT4ge1xyXG4gICAgdG9BcnJheShzZWxlY3RvcnMydG9nZ2xlKS5mb3JFYWNoKHNlbGVjdG9yMnRvZ2dsZSA9PiB7XHJcbiAgICAgICAgY29uc3QgdG9nZ2xlRWxlbWVudCA9IGFuY2VzdG9yLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IydG9nZ2xlKTtcclxuICAgICAgICBpZiAodG9nZ2xlRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0b0FycmF5KHRvZ2dsZUNsYXNzTmFtZXMpLmZvckVhY2godG9nZ2xlQ2xhc3NOYW1lID0+IHRvZ2dsZUVsZW1lbnQgPT09IG51bGwgfHwgdG9nZ2xlRWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdG9nZ2xlRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKHRvZ2dsZUNsYXNzTmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG4vKipcclxuICogQWRkcyBhIGNsaWNrIGV2ZW50IGxpc3RlbmVyIHRvIGVsZW1lbnRzIHdoaWNoIHRyaWdnZXJzIGNzcyBjbGFzcyB0b2dnbGluZ1xyXG4gKiBAcGFyYW0gY2xpY2tTZWxlY3RvcnMgb25lIG9yIG1vcmUgY3NzIHNlbGVjdG9ycyBmb3IgdGhlIGVsZW1lbnRzIHdoaWNoIHNoYWxsIGxpc3RlbiB0byBjbGljayBldmVudHNcclxuICogQHBhcmFtIHNlbGVjdG9yczJ0b2dnbGUgb25lIG9yIG1vcmUgY3NzIGNsYXNzIHNlbGVjdG9ycyBmb3IgdGhlIGVsZW1lbnRzIHdpdGggdGhlIGNzcyBjbGFzc2VzIHRvIHRvZ2dsZVxyXG4gKiBAcGFyYW0gdG9nZ2xlQ2xhc3NOYW1lcyBvbmUgb3IgbW9yZSBjc3MgY2xhc3MgbmFtZXMgd2hpY2ggc2hhbGwgdG9nZ2xlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgdG9nZ2xlQ2xhc3NPbkNsaWNrID0gKGNsaWNrU2VsZWN0b3JzLCBzZWxlY3RvcnMydG9nZ2xlLCB0b2dnbGVDbGFzc05hbWVzKSA9PiB7XHJcbiAgICB0b0FycmF5KGNsaWNrU2VsZWN0b3JzKS5mb3JFYWNoKGNsaWNrU2VsZWN0b3IgPT4ge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAoX2EgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNsaWNrU2VsZWN0b3IpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3Moc2VsZWN0b3JzMnRvZ2dsZSwgdG9nZ2xlQ2xhc3NOYW1lcyk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcbiIsImltcG9ydCB7IENvbXBvc2l0ZUNvbnRyb2wgfSBmcm9tIFwiLi9Db21wb3NpdGVDb250cm9sXCI7XHJcbi8qKlxyXG4gKiAqKkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGJ1dHRvbnMqKlxyXG4gKlxyXG4gKiBBIGJ1dHRvbiBpcyBhbiBPcGVuTGF5ZXIgY29udHJvbCB3aXRoIGEgZGVmYXVsdCBsYXlvdXQuIFlvdSBjYW4gY2hhbmdlIHNvbWUgc3R5bGUgY2xhc3NlcywgdG9vbHRpcHMgZXRjLlxyXG4gKiB3aXRoIHRoZSB7QGxpbmtjb2RlIEJ1dHRvbk9wdGlvbnN9XHJcbiAqXHJcbiAqIFNvbWUgYnV0dG9ucyBleHRlbmQgT3BlbkxheWVyIGNvbnRyb2xzIHdpdGggaXRzIGZlYXR1cmVzLCBidXQgbW9zdCBvZiB0aGVtIGFyZSBqdXN0IGEgc2hlbGwgZm9yIGZ1cnRoZXIgaW1wbGVtZW50YXRpb25zXHJcbiAqXHJcbiAqIFlvdSBjYW4gc2V0IHRoZSBpY29uIGZvbnQgb2YgdGhlIGJ1dHRvbiB3aXRoIHRoZSB1bmljb2RlIG51bWJlciBvciB0aGUgaWNvbkNsYXNzTmFtZSBvcHRpb24uXHJcbiAqXHJcbiAqIEBldmVudCBjbGljayBBIEJ1dHRvbiBkaXNwYXRjaGVzIHRoZSBDTElDSyBldmVudCBzbyB0aGF0IHlvdSBjYW4gbGlzdGVuIHRvIGl0IHdpdGggdGhlICpvbiogT3BlbkxheWVyIG1ldGhvZFxyXG4gKiBFeGFtcGxlOlxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIGNvbnN0IHByaW50Q3RybCA9IG5ldyBQcmludCh7IHByZXZlbnREZWZhdWx0OiB0cnVlIH0pO1xyXG4gKiBwcmludEN0cmwub24oRXZlbnRUeXBlLkNMSUNLLCB0aGlzLmhhbmRsZVByaW50KTtcclxuICogYGBgXHJcbiAqIEFsdGVybmF0aXZlbHkgeW91IGNhbiBvdmVycmlkZSB0aGUge0BsaW5rY29kZSBoYW5kbGVFdmVudH0gbWV0aG9kXHJcbiAqXHJcbiAqIEByZW1hcmsgQXMgYSBidXR0b24gaXMgYWxzbyBhIENvbXBvc2l0ZUNvbnRyb2wgaXQgY2FuIGhhdmUgY2hpbGQgY29udHJvbHMuIEUuZy4gaXQncyB1c2VkIHdpdGggdGhlIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1dHRvbiBleHRlbmRzIENvbXBvc2l0ZUNvbnRyb2wge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQnV0dG9uIG9wdGlvbnNcclxuICAgICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIE9wdGlvbmFsIGNoaWxkIGNvbnRyb2xzXHJcbiAgICAgKiBAZXZlbnQgY2xpY2sgVGhlIGV2ZW50IGZpcmVkIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNoaWxkQ29udHJvbHMpIHtcclxuICAgICAgICBvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50ID0gb3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCA/IG9wdGlvbnMudG9vbHRpcEFzVGV4dEVsZW1lbnQgOiBmYWxzZTtcclxuICAgICAgICBvcHRpb25zLnVuaWNvZGUgPSBvcHRpb25zLnVuaWNvZGUgfHwgbnVsbDtcclxuICAgICAgICBvcHRpb25zLmljb25DbGFzc05hbWUgPSBvcHRpb25zLmljb25DbGFzc05hbWUgfHwgbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucy51bmljb2RlID09PSBudWxsICYmIG9wdGlvbnMuaWNvbkNsYXNzTmFtZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBvcHRpb25zLnVuaWNvZGUgPSAweGU5MDM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG9wdGlvbnMudG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcCB8fCAnJztcclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXJFbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50ID8gb3B0aW9ucy5lbGVtZW50IDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyRWxlbWVudC5jbGFzc05hbWUgPSBvcHRpb25zLmNvbnRhaW5lckNsYXNzTmFtZSA/IG9wdGlvbnMuY29udGFpbmVyQ2xhc3NOYW1lIDogJ29sLWNvbnRyb2wgYmdpcy1jb250cm9sJztcclxuICAgICAgICBidXR0b25Db250YWluZXJFbGVtZW50LnRpdGxlID0gb3B0aW9ucy50b29sdGlwO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWljb24tYnV0dG9uJztcclxuICAgICAgICBpZiAob3B0aW9ucy51bmljb2RlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludChvcHRpb25zLnVuaWNvZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLmljb25DbGFzc05hbWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZChCdXR0b24uZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKG9wdGlvbnMuaWNvbkNsYXNzTmFtZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidXR0b25FbGVtZW50LnRpdGxlID0gb3B0aW9ucy50b29sdGlwO1xyXG4gICAgICAgIGlmIChvcHRpb25zLnRvb2x0aXAubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBidXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIG9wdGlvbnMudG9vbHRpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZGl2RWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1jb250cm9sLWJ1dHRvbi10ZXh0LWNvbnRhaW5lcic7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgICAgICBzcGFuRWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbnMudG9vbHRpcDtcclxuICAgICAgICAgICAgc3BhbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtY29udHJvbC1idXR0b24tdGV4dCc7XHJcbiAgICAgICAgICAgIGRpdkVsZW1lbnQuYXBwZW5kQ2hpbGQoc3BhbkVsZW1lbnQpO1xyXG4gICAgICAgICAgICBidXR0b25Db250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlcihjaGlsZENvbnRyb2xzID8gY2hpbGRDb250cm9scyA6IFtdLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IGVsZW1lbnQ6IGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQgfSkpO1xyXG4gICAgICAgIHRoaXMudW5pY29kZSA9IG9wdGlvbnMudW5pY29kZTtcclxuICAgICAgICB0aGlzLmljb25DbGFzc05hbWUgPSBvcHRpb25zLmljb25DbGFzc05hbWU7XHJcbiAgICAgICAgdGhpcy5idXR0b24gPSBidXR0b25FbGVtZW50O1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KFwiY2xpY2tcIiksIGZhbHNlKTtcclxuICAgICAgICBpZiAoIW9wdGlvbnMucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbihcImNsaWNrXCIsIHRoaXMuaGFuZGxlRXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBpcyB0aGUgZGVmYXVsdCBjbGljayBoYW5kbGVyIG9mIGEgYnV0dG9uXHJcbiAgICAgKlxyXG4gICAgICogT3ZlcnJpZGUgaXQgZm9yIHlvdXIgYmVuZWZpdCBvciBkaXNhYmxlIGV4ZWN1dGlvbiB3aXRoIG9wdGlvbnMucHJldmVudERlZmF1bHRcclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICovXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXHJcbiAgICBoYW5kbGVFdmVudChldmVudCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZ2V0dGVyIGZvciB0aGUgYnV0dG9uXHJcbiAgICAgKi9cclxuICAgIGdldEJ1dHRvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5idXR0b247XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEEgc2V0dGVyIHRvIGNoYW5nZSB0aGUgdW5pY29kZSBmb3IgdGhlIGJ1dHRvbiBmb250IGljb24uXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBpY29uIHRhZyBmb3IgdGhlIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSB1bmljb2RlXHJcbiAgICAgKi9cclxuICAgIHNldEJ1dHRvblVuaWNvZGUodW5pY29kZSkge1xyXG4gICAgICAgIHRoaXMuZ2V0QnV0dG9uKCkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgdGhpcy5nZXRCdXR0b24oKS50ZXh0Q29udGVudCA9IFN0cmluZy5mcm9tQ29kZVBvaW50KHVuaWNvZGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNldHRlciB0byBjaGFuZ2UgdGhlIGljb24gY2xhc3MgbmFtZSBmb3IgdGhlIGJ1dHRvbi5cclxuICAgICAqIFJlc2V0cyB0aGUgdW5pY29kZSBmb3IgdGhlIGJ1dHRvbiBpY29uLlxyXG4gICAgICogQHBhcmFtIGljb25DbGFzc05hbWVcclxuICAgICAqL1xyXG4gICAgc2V0QnV0dG9uSWNvbkNsYXNzTmFtZShpY29uQ2xhc3NOYW1lKSB7XHJcbiAgICAgICAgdGhpcy5nZXRCdXR0b24oKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIHRoaXMuZ2V0QnV0dG9uKCkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgdGhpcy5nZXRCdXR0b24oKS5hcHBlbmRDaGlsZChCdXR0b24uZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKGljb25DbGFzc05hbWUpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGFuIGljb24gZWxlbWVudCBmb3IgdGhlIGdpdmVuIGNzcyBjbGFzcyBuYW1lXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGljb25DbGFzc05hbWVcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEljb25FbGVtZW50Rm9ySWNvbkNsYXNzTmFtZShpY29uQ2xhc3NOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgaWNvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAgICAgaWNvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtaWNvbiAnICsgaWNvbkNsYXNzTmFtZTtcclxuICAgICAgICByZXR1cm4gaWNvbkVsZW1lbnQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEV2ZW50VHlwZSBmcm9tIFwib2wvZXZlbnRzL0V2ZW50VHlwZVwiO1xyXG5pbXBvcnQgeyBjcmVhdGVDaGlsZElmTm90RXhpc3QsIHJlbW92ZUNoaWxkcmVuSWZFeGlzdCwgdG9nZ2xlQ2xhc3MgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9kb21cIjtcclxuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4vQnV0dG9uXCI7XHJcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xyXG4vKipcclxuICogVGhlIHRvZ2dsZSBldmVudCB3aGljaCBpcyBkaXNwYXRjaGVkIHdoZW4gdGhlIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufSBpcyBjbGlja2VkXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9nZ2xlRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGUuIFVzdWFsbHkgYSB7QGxpbmtjb2RlIFRvZ2dsZUV2ZW50VHlwZX1cclxuICAgICAqIEBwYXJhbSBpc1RvZ2dsZWQgVGhlIGZsYWcgdG8gc2hvdyB0aGUgc3RhdGUgb2YgdGhlIHRvZ2dsZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBpc1RvZ2dsZWQpIHtcclxuICAgICAgICBzdXBlcih0eXBlKTtcclxuICAgICAgICB0aGlzLmlzVG9nZ2xlZCA9IGlzVG9nZ2xlZDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQSB7QGxpbmtDb2RlIEJ1dHRvbn0gdG8gdG9nZ2xlIHRoZSB2aXNpYmlsaXR5IG9mIGEge0BsaW5rY29kZSBDb250YWluZXJ9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9nZ2xlQnV0dG9uIGV4dGVuZHMgQnV0dG9uIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuICAgICAgICBzdXBlcihvcHRzLCBvcHRpb25zLmNvbnRhaW5lclRvVG9nZ2xlKTtcclxuICAgICAgICB0aGlzLl9pc1RvZ2dsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lclRvVG9nZ2xlID0gb3B0aW9ucy5jb250YWluZXJUb1RvZ2dsZTtcclxuICAgICAgICB0aGlzLnVuaWNvZGVUb2dnbGVkID0gb3B0aW9ucy51bmljb2RlVG9nZ2xlZCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQgPSBvcHRpb25zLmljb25DbGFzc05hbWVUb2dnbGVkIHx8IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMudW5pY29kZVRvZ2dsZWQgPT09IG51bGwgJiYgdGhpcy5pY29uQ2xhc3NOYW1lVG9nZ2xlZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnVuaWNvZGVUb2dnbGVkID0gMHhlOTAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIG92ZXJyaWRkZW4gaGFuZGxlRXZlbnQgbWV0aG9kXHJcbiAgICAgKiBAb3ZlcnJpZGVcclxuICAgICAqIEBwYXJhbSBldmVudFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVFdmVudChldmVudCkge1xyXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSBFdmVudFR5cGUuQ0xJQ0spIHtcclxuICAgICAgICAgICAgdGhpcy5pc1RvZ2dsZWQgPSAhdGhpcy5pc1RvZ2dsZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVG9nZ2xlRXZlbnQoXCJ0b2dnbGVcIiwgdGhpcy5pc1RvZ2dsZWQpKTtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudCA9IHRoaXMuZ2V0UGFyZW50RWxlbWVudCgpO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVPdmVybGF5Rm9yRWxlbWVudChwYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCcpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZU92ZXJsYXlPdXRlcigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1RvZ2dsZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuaWNvZGVUb2dnbGVkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRCdXR0b25Vbmljb2RlKHRoaXMudW5pY29kZVRvZ2dsZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pY29uQ2xhc3NOYW1lVG9nZ2xlZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QnV0dG9uSWNvbkNsYXNzTmFtZSh0aGlzLmljb25DbGFzc05hbWVUb2dnbGVkKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVuaWNvZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJ1dHRvblVuaWNvZGUodGhpcy51bmljb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuaWNvbkNsYXNzTmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QnV0dG9uSWNvbkNsYXNzTmFtZSh0aGlzLmljb25DbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzKCcuJyArIHRoaXMuY29udGFpbmVyVG9Ub2dnbGUuZ2V0U3R5bGVDbGFzcygpLCAnc2hvdycsIHBhcmVudEVsZW1lbnQgfHwgZG9jdW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQSBzZXR0ZXIgZm9yIHRoZSB0b2dnbGVkIHN0YXRlIG9mIHRoZSBidXR0b25cclxuICAgICAqIEBwYXJhbSBpc1RvZ2dsZWRcclxuICAgICAqL1xyXG4gICAgc2V0IGlzVG9nZ2xlZChpc1RvZ2dsZWQpIHtcclxuICAgICAgICB0aGlzLl9pc1RvZ2dsZWQgPSBpc1RvZ2dsZWQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEEgZ2V0dGVyIGZvciB0aGUgdG9nZ2xlZCBzdGF0ZSBvZiB0aGUgYnV0dG9uXHJcbiAgICAgKi9cclxuICAgIGdldCBpc1RvZ2dsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzVG9nZ2xlZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbmQgcmVtb3ZlcyBhbiBvdmVybGF5IGxheWVyIChmb3IgZ3JheSBvdXQpIG9uIGFuIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBwYXJlbnQgZWxlbWVudCBmb3IgdGhlIG92ZXJsYXkgbGF5ZXJcclxuICAgICAqIEBwYXJhbSBjbGFzc05hbWUgVGhlIHN0eWxlIGNsYXNzIG5hbWUgZm9yIHRoZSBvdmVybGF5IGxheWVyXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU92ZXJsYXlGb3JFbGVtZW50KGVsZW1lbnQsIGNsYXNzTmFtZSA9ICdiZ2lzLW92ZXJsYXktYmcnKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVG9nZ2xlZCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2JnaXMtb3ZlcmxheS10b2dnbGVkLXRydWUnKTtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUNoaWxkSWZOb3RFeGlzdChlbGVtZW50LCAnZGl2JywgY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPT09IG51bGwgfHwgZWxlbWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdiZ2lzLW92ZXJsYXktdG9nZ2xlZC10cnVlJyk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVDaGlsZHJlbklmRXhpc3QoZWxlbWVudCwgY2xhc3NOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRmluZHMgYWxsIGVsZW1lbnRzIGluIHRoZSBET00gd2l0aCAqLmJnaXMtdG9nZ2xlZC1vdmVybGF5YWJsZSogc3R5bGUgY2xhc3MgdG8gZ3JheSB0aGVtIG91dFxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBoYW5kbGVPdmVybGF5T3V0ZXIoKSB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50RWxlbWVudCA9IHRoaXMuZ2V0UGFyZW50RWxlbWVudCgpO1xyXG4gICAgICAgIGlmIChwYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXlhYmxlUGFyZW50cyA9IHBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJnaXMtdG9nZ2xlZC1vdmVybGF5YWJsZScpO1xyXG4gICAgICAgICAgICBpZiAob3ZlcmxheWFibGVQYXJlbnRzICYmIG92ZXJsYXlhYmxlUGFyZW50cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBvdmVybGF5YWJsZVBhcmVudHMuZm9yRWFjaCgocGFyZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVPdmVybGF5Rm9yRWxlbWVudChwYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY2xvc2VzdCBwYXJlbnQgZWxlbWVudCBmb3IgdG9nZ2xlLlxyXG4gICAgICogRm9yIHRoZSBjb3JlIGZlYXR1cmUgdmVyc2lvbiBpdCdzIHRoZSAuYmdpcy1tYXBcclxuICAgICAqIEZvciB0aGUgZnVsbCBmZWF0dXJlIHZlcnNpb24gaXQncyB0aGUgLmJnaXNcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgZ2V0UGFyZW50RWxlbWVudCgpIHtcclxuICAgICAgICBsZXQgY2xvc2VzdFBhcmVudCA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCcuYmdpcycpO1xyXG4gICAgICAgIGlmICghY2xvc2VzdFBhcmVudCkge1xyXG4gICAgICAgICAgICBjbG9zZXN0UGFyZW50ID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoJy5iZ2lzLW1hcCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY2xvc2VzdFBhcmVudDtcclxuICAgIH1cclxufVxyXG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0dlb2xvY2F0aW9uXG4gKi9cbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgY2lyY3VsYXIgYXMgY2lyY3VsYXJQb2x5Z29uIH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24sIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucywgaWRlbnRpdHlUcmFuc2Zvcm0sIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IHRvUmFkaWFucyB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBBQ0NVUkFDWTogJ2FjY3VyYWN5JyxcbiAgICBBQ0NVUkFDWV9HRU9NRVRSWTogJ2FjY3VyYWN5R2VvbWV0cnknLFxuICAgIEFMVElUVURFOiAnYWx0aXR1ZGUnLFxuICAgIEFMVElUVURFX0FDQ1VSQUNZOiAnYWx0aXR1ZGVBY2N1cmFjeScsXG4gICAgSEVBRElORzogJ2hlYWRpbmcnLFxuICAgIFBPU0lUSU9OOiAncG9zaXRpb24nLFxuICAgIFBST0pFQ1RJT046ICdwcm9qZWN0aW9uJyxcbiAgICBTUEVFRDogJ3NwZWVkJyxcbiAgICBUUkFDS0lORzogJ3RyYWNraW5nJyxcbiAgICBUUkFDS0lOR19PUFRJT05TOiAndHJhY2tpbmdPcHRpb25zJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIG9uIEdlb2xvY2F0aW9uIGVycm9yLlxuICovXG52YXIgR2VvbG9jYXRpb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbG9jYXRpb25FcnJvciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dlb2xvY2F0aW9uUG9zaXRpb25FcnJvcn0gZXJyb3IgZXJyb3Igb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgRXZlbnRUeXBlLkVSUk9SKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvZGUgPSBlcnJvci5jb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBHZW9sb2NhdGlvbkVycm9yO1xufShCYXNlRXZlbnQpKTtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdHJhY2tpbmc9ZmFsc2VdIFN0YXJ0IFRyYWNraW5nIHJpZ2h0IGFmdGVyXG4gKiBpbnN0YW50aWF0aW9uLlxuICogQHByb3BlcnR5IHtQb3NpdGlvbk9wdGlvbnN9IFt0cmFja2luZ09wdGlvbnNdIFRyYWNraW5nIG9wdGlvbnMuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFRoZSBwcm9qZWN0aW9uIHRoZSBwb3NpdGlvblxuICogaXMgcmVwb3J0ZWQgaW4uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6YWNjdXJhY3knfCdjaGFuZ2U6YWNjdXJhY3lHZW9tZXRyeSd8J2NoYW5nZTphbHRpdHVkZSd8XG4gKiAgICAnY2hhbmdlOmFsdGl0dWRlQWNjdXJhY3knfCdjaGFuZ2U6aGVhZGluZyd8J2NoYW5nZTpwb3NpdGlvbid8J2NoYW5nZTpwcm9qZWN0aW9uJ3wnY2hhbmdlOnNwZWVkJ3wnY2hhbmdlOnRyYWNraW5nJ3xcbiAqICAgICdjaGFuZ2U6dHJhY2tpbmdPcHRpb25zJ30gR2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8R2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTwnZXJyb3InLCBHZW9sb2NhdGlvbkVycm9yLCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8R2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzfFxuICogICAgICdlcnJvcicsIFJldHVybj59IEdlb2xvY2F0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBIZWxwZXIgY2xhc3MgZm9yIHByb3ZpZGluZyBIVE1MNSBHZW9sb2NhdGlvbiBjYXBhYmlsaXRpZXMuXG4gKiBUaGUgW0dlb2xvY2F0aW9uIEFQSV0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8pXG4gKiBpcyB1c2VkIHRvIGxvY2F0ZSBhIHVzZXIncyBwb3NpdGlvbi5cbiAqXG4gKiBUbyBnZXQgbm90aWZpZWQgb2YgcG9zaXRpb24gY2hhbmdlcywgcmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgdGhlIGdlbmVyaWNcbiAqIGBjaGFuZ2VgIGV2ZW50IG9uIHlvdXIgaW5zdGFuY2Ugb2Yge0BsaW5rIG1vZHVsZTpvbC9HZW9sb2NhdGlvbn5HZW9sb2NhdGlvbn0uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgdmFyIGdlb2xvY2F0aW9uID0gbmV3IEdlb2xvY2F0aW9uKHtcbiAqICAgICAgIC8vIHRha2UgdGhlIHByb2plY3Rpb24gdG8gdXNlIGZyb20gdGhlIG1hcCdzIHZpZXdcbiAqICAgICAgIHByb2plY3Rpb246IHZpZXcuZ2V0UHJvamVjdGlvbigpXG4gKiAgICAgfSk7XG4gKiAgICAgLy8gbGlzdGVuIHRvIGNoYW5nZXMgaW4gcG9zaXRpb25cbiAqICAgICBnZW9sb2NhdGlvbi5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZ0KSB7XG4gKiAgICAgICB3aW5kb3cuY29uc29sZS5sb2coZ2VvbG9jYXRpb24uZ2V0UG9zaXRpb24oKSk7XG4gKiAgICAgfSk7XG4gKlxuICogQGZpcmVzIG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2V2ZW50OmVycm9yXG4gKiBAYXBpXG4gKi9cbnZhciBHZW9sb2NhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbG9jYXRpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gR2VvbG9jYXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7R2VvbG9jYXRpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dlb2xvY2F0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dlb2xvY2F0aW9uT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1bnByb2plY3RlZCAoRVBTRzo0MzI2KSBkZXZpY2UgcG9zaXRpb24uXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb3NpdGlvbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zZm9ybV8gPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud2F0Y2hJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlBST0pFQ1RJT04sIF90aGlzLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlRSQUNLSU5HLCBfdGhpcy5oYW5kbGVUcmFja2luZ0NoYW5nZWRfKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudHJhY2tpbmdPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFRyYWNraW5nT3B0aW9ucyhvcHRpb25zLnRyYWNraW5nT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0VHJhY2tpbmcob3B0aW9ucy50cmFja2luZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50cmFja2luZyA6IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRyYWNraW5nKGZhbHNlKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKHByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhnZXRQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKSwgcHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbl8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5QT1NJVElPTiwgdGhpcy50cmFuc2Zvcm1fKHRoaXMucG9zaXRpb25fKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmhhbmRsZVRyYWNraW5nQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgnZ2VvbG9jYXRpb24nIGluIG5hdmlnYXRvcikge1xuICAgICAgICAgICAgdmFyIHRyYWNraW5nID0gdGhpcy5nZXRUcmFja2luZygpO1xuICAgICAgICAgICAgaWYgKHRyYWNraW5nICYmIHRoaXMud2F0Y2hJZF8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hJZF8gPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbih0aGlzLnBvc2l0aW9uQ2hhbmdlXy5iaW5kKHRoaXMpLCB0aGlzLnBvc2l0aW9uRXJyb3JfLmJpbmQodGhpcyksIHRoaXMuZ2V0VHJhY2tpbmdPcHRpb25zKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRyYWNraW5nICYmIHRoaXMud2F0Y2hJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMud2F0Y2hJZF8pO1xuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtHZW9sb2NhdGlvblBvc2l0aW9ufSBwb3NpdGlvbiBwb3NpdGlvbiBldmVudC5cbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUucG9zaXRpb25DaGFuZ2VfID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBjb29yZHMgPSBwb3NpdGlvbi5jb29yZHM7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkFDQ1VSQUNZLCBjb29yZHMuYWNjdXJhY3kpO1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5BTFRJVFVERSwgY29vcmRzLmFsdGl0dWRlID09PSBudWxsID8gdW5kZWZpbmVkIDogY29vcmRzLmFsdGl0dWRlKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuQUxUSVRVREVfQUNDVVJBQ1ksIGNvb3Jkcy5hbHRpdHVkZUFjY3VyYWN5ID09PSBudWxsID8gdW5kZWZpbmVkIDogY29vcmRzLmFsdGl0dWRlQWNjdXJhY3kpO1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5IRUFESU5HLCBjb29yZHMuaGVhZGluZyA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRvUmFkaWFucyhjb29yZHMuaGVhZGluZykpO1xuICAgICAgICBpZiAoIXRoaXMucG9zaXRpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uXyA9IFtjb29yZHMubG9uZ2l0dWRlLCBjb29yZHMubGF0aXR1ZGVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl9bMF0gPSBjb29yZHMubG9uZ2l0dWRlO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl9bMV0gPSBjb29yZHMubGF0aXR1ZGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2plY3RlZFBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm1fKHRoaXMucG9zaXRpb25fKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUE9TSVRJT04sIHByb2plY3RlZFBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuU1BFRUQsIGNvb3Jkcy5zcGVlZCA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvb3Jkcy5zcGVlZCk7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IGNpcmN1bGFyUG9seWdvbih0aGlzLnBvc2l0aW9uXywgY29vcmRzLmFjY3VyYWN5KTtcbiAgICAgICAgZ2VvbWV0cnkuYXBwbHlUcmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1fKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuQUNDVVJBQ1lfR0VPTUVUUlksIGdlb21ldHJ5KTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7R2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yfSBlcnJvciBlcnJvciBvYmplY3QuXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLnBvc2l0aW9uRXJyb3JfID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR2VvbG9jYXRpb25FcnJvcihlcnJvcikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24gaW4gbWV0ZXJzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24gbWVhc3VyZW1lbnQgaW5cbiAgICAgKiAgICAgbWV0ZXJzLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRBY2N1cmFjeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBnZW9tZXRyeSBvZiB0aGUgcG9zaXRpb24gYWNjdXJhY3kuXG4gICAgICogQHJldHVybiB7P2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEEgZ2VvbWV0cnkgb2YgdGhlIHBvc2l0aW9uIGFjY3VyYWN5LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRBY2N1cmFjeUdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHs/aW1wb3J0KFwiLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZX0dFT01FVFJZKSB8fCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYWx0aXR1ZGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgYWx0aXR1ZGUgb2YgdGhlIHBvc2l0aW9uIGluIG1ldGVycyBhYm92ZSBtZWFuXG4gICAgICogICAgIHNlYSBsZXZlbC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0QWx0aXR1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BTFRJVFVERSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbHRpdHVkZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGFjY3VyYWN5IG9mIHRoZSBhbHRpdHVkZSBtZWFzdXJlbWVudCBpblxuICAgICAqICAgICBtZXRlcnMuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldEFsdGl0dWRlQWNjdXJhY3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BTFRJVFVERV9BQ0NVUkFDWSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBoZWFkaW5nIGFzIHJhZGlhbnMgY2xvY2t3aXNlIGZyb20gTm9ydGguXG4gICAgICogTm90ZTogZGVwZW5kaW5nIG9uIHRoZSBicm93c2VyLCB0aGUgaGVhZGluZyBpcyBvbmx5IGRlZmluZWQgaWYgdGhlIGBlbmFibGVIaWdoQWNjdXJhY3lgXG4gICAgICogaXMgc2V0IHRvIGB0cnVlYCBpbiB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgaGVhZGluZyBvZiB0aGUgZGV2aWNlIGluIHJhZGlhbnMgZnJvbSBub3J0aC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0SGVhZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkhFQURJTkcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGRldmljZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBkZXZpY2UgcmVwb3J0ZWRcbiAgICAgKiAgICAgaW4gdGhlIGN1cnJlbnQgcHJvamVjdGlvbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBPU0lUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHByb2plY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHByb2plY3Rpb24gdGhlIHBvc2l0aW9uIGlzXG4gICAgICogICAgIHJlcG9ydGVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBST0pFQ1RJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3BlZWQgaW4gbWV0ZXJzIHBlciBzZWNvbmQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGluc3RhbnRhbmVvdXMgc3BlZWQgb2YgdGhlIGRldmljZSBpbiBtZXRlcnNcbiAgICAgKiAgICAgcGVyIHNlY29uZC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0U3BlZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5TUEVFRCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSBkZXZpY2UgbG9jYXRpb24gaXMgYmVpbmcgdHJhY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZGV2aWNlIGxvY2F0aW9uIGlzIGJlaW5nIHRyYWNrZWQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFRyYWNraW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoUHJvcGVydHkuVFJBQ0tJTkcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb24tb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtQb3NpdGlvbk9wdGlvbnN8dW5kZWZpbmVkfSBQb3NpdGlvbk9wdGlvbnMgYXMgZGVmaW5lZCBieVxuICAgICAqICAgICB0aGUgW0hUTUw1IEdlb2xvY2F0aW9uIHNwZWNcbiAgICAgKiAgICAgXShodHRwczovL3d3dy53My5vcmcvVFIvZ2VvbG9jYXRpb24tQVBJLyNwb3NpdGlvbl9vcHRpb25zX2ludGVyZmFjZSkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFRyYWNraW5nT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7UG9zaXRpb25PcHRpb25zfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlRSQUNLSU5HX09QVElPTlMpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvamVjdGlvbiB0byB1c2UgZm9yIHRyYW5zZm9ybWluZyB0aGUgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdGhlIHBvc2l0aW9uIGlzXG4gICAgICogICAgIHJlcG9ydGVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5zZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUFJPSkVDVElPTiwgZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSB0cmFja2luZy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHRyYWNraW5nIEVuYWJsZSB0cmFja2luZy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuc2V0VHJhY2tpbmcgPSBmdW5jdGlvbiAodHJhY2tpbmcpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuVFJBQ0tJTkcsIHRyYWNraW5nKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvZ2VvbG9jYXRpb24tQVBJLyNwb3NpdGlvbi1vcHRpb25zLlxuICAgICAqIEBwYXJhbSB7UG9zaXRpb25PcHRpb25zfSBvcHRpb25zIFBvc2l0aW9uT3B0aW9ucyBhcyBkZWZpbmVkIGJ5IHRoZVxuICAgICAqICAgICBbSFRNTDUgR2VvbG9jYXRpb24gc3BlY1xuICAgICAqICAgICBdKGh0dHA6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UpLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5zZXRUcmFja2luZ09wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5UUkFDS0lOR19PUFRJT05TLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIHJldHVybiBHZW9sb2NhdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgR2VvbG9jYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9sb2NhdGlvbi5qcy5tYXAiLCJpbXBvcnQgR2VvbG9jYXRpb24gZnJvbSAnb2wvR2VvbG9jYXRpb24nO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCBFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcbmltcG9ydCBFdmVudFR5cGUgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFR5cGVcIjtcclxuaW1wb3J0IHsgZnJvbUxvbkxhdCB9IGZyb20gXCJvbC9wcm9qXCI7XHJcbi8qKlxyXG4gKiBUaGUgbG9jYXRpb24gcmV0cmlldmVkIGV2ZW50IHdoaWNoIGlzIGRpc3BhdGNoZWQgd2hlbiB3ZSByZXRyaWV2ZSBhIHBvc2l0aW9uIHZpYSB0aGUge0BsaW5rY29kZSBHZW9Mb2NhdGV9IGJ1dHRvblxyXG4gKlxyXG4gKiBAVE9ETyBleHRlbmQgdG8gcmV0cmlldmUgbW9yZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBPcGVubGF5ZXJzIEdlb2xvY2F0ZSBvYmplY3RcclxuICovXHJcbmV4cG9ydCBjbGFzcyBMb2NhdGlvblJldHJpZXZlZEV2ZW50IGV4dGVuZHMgRXZlbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGUuIFVzdWFsbHkgYSB7QGxpbmtjb2RlIExvY2F0aW9uUmV0cmlldmVkRXZlbnRUeXBlfVxyXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIFlvdXIgY3VycmVudCBwb3NpdGlvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBwb3NpdGlvbikge1xyXG4gICAgICAgIHN1cGVyKHR5cGUpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQSB7QGxpbmtDb2RlIEJ1dHRvbn0gdG8gcmV0cmlldmUgeW91ciBjdXJyZW50IHBvc2l0aW9uXHJcbiAqXHJcbiAqIFRoaXMgY2xhc3MgdXNlcyB0aGUgT3BlbkxheWVycyBHZW9sb2NhdGlvbiBvYmplY3QgdG8gZmV0Y2ggdGhlIGN1cnJlbnQgcG9zaXRpb24uXHJcbiAqIFdoZW4gd2UgcmV0cmlldmUgdGhlIGN1cnJlbnQgcG9zaXRpb24sIGEgTG9jYXRpb25SZXRyaWV2ZWRFdmVudCBpcyBmaXJlZFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdlb0xvY2F0ZSBleHRlbmRzIEJ1dHRvbiB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbih7IHVuaWNvZGU6IDB4ZTkzNiwgY29udGFpbmVyQ2xhc3NOYW1lOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgb2wtZ2VvbG9jYXRlJywgdG9vbHRpcDogJ1N0YW5kb3J0IHplbnRyaWVyZW4nIH0sIG9wdHMpKTtcclxuICAgICAgICBjb25zdCBnZW9Mb2NhdGlvbk9wdGlvbnMgPSAob3B0aW9ucyB8fCB7fSk7XHJcbiAgICAgICAgdGhpcy5fZ2VvTG9jYXRpb24gPSBuZXcgR2VvbG9jYXRpb24oZ2VvTG9jYXRpb25PcHRpb25zKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNMSUNLKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdlb0xvY2F0aW9uICYmICgoX2IgPSAoX2EgPSB0aGlzLmdldE1hcCgpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0VmlldygpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZ2V0UHJvamVjdGlvbigpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5vbmNlKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VvTG9jYXRpb24uc2V0VHJhY2tpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuZ2V0TWFwKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRWaWV3KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogZnJvbUxvbkxhdCh0aGlzLmdlb0xvY2F0aW9uLmdldFBvc2l0aW9uKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlb0xvY2F0aW9uLmdldFBvc2l0aW9uKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBMb2NhdGlvblJldHJpZXZlZEV2ZW50KFwibG9jYXRpb25fcmV0cmlldmVkXCIsIHRoaXMuZ2VvTG9jYXRpb24uZ2V0UG9zaXRpb24oKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5zZXRUcmFja2luZyh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQSBnZXR0ZXIgZm9yIHRoZSBPcGVuTGF5ZXJzIEdlb2xvY2F0aW9uIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBnZXQgZ2VvTG9jYXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dlb0xvY2F0aW9uO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL01vdXNlUG9zaXRpb25cbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsIGdldFVzZXJQcm9qZWN0aW9uLCBpZGVudGl0eVRyYW5zZm9ybSwgfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciBQUk9KRUNUSU9OID0gJ3Byb2plY3Rpb24nO1xuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgQ09PUkRJTkFURV9GT1JNQVQgPSAnY29vcmRpbmF0ZUZvcm1hdCc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpjb29yZGluYXRlRm9ybWF0J3wnY2hhbmdlOnByb2plY3Rpb24nLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmNvb3JkaW5hdGVGb3JtYXQnfCdjaGFuZ2U6cHJvamVjdGlvbicsIFJldHVybj59IE1vdXNlUG9zaXRpb25PblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1tb3VzZS1wb3NpdGlvbiddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR9IFtjb29yZGluYXRlRm9ybWF0XSBDb29yZGluYXRlIGZvcm1hdC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlXG4gKiBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGVcbiAqIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xib29sZWFufSBbcGxhY2Vob2xkZXJdIE1hcmt1cCB0byBzaG93IHdoZW4gdGhlIG1vdXNlIHBvc2l0aW9uIGlzIG5vdFxuICogYXZhaWxhYmxlIChlLmcuIHdoZW4gdGhlIHBvaW50ZXIgbGVhdmVzIHRoZSBtYXAgdmlld3BvcnQpLiAgQnkgZGVmYXVsdCwgYSBub24tYnJlYWtpbmcgc3BhY2VcbiAqIGlzIHJlbmRlcmVkIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgdmlld3BvcnQuICBUbyByZW5kZXIgc29tZXRoaW5nIGVsc2UsIHByb3ZpZGUgYSBzdHJpbmdcbiAqIHRvIGJlIHVzZWQgYXMgdGhlIHRleHQgY29udGVudCAoZS5nLiAnbm8gcG9zaXRpb24nIG9yICcnIGZvciBhbiBlbXB0eSBzdHJpbmcpLiAgU2V0IHRoZSBwbGFjZWhvbGRlclxuICogdG8gYGZhbHNlYCB0byByZXRhaW4gdGhlIGxhc3QgcG9zaXRpb24gd2hlbiB0aGUgbW91c2UgbGVhdmVzIHRoZSB2aWV3cG9ydC4gIEluIGEgZnV0dXJlIHJlbGVhc2UsIHRoaXNcbiAqIHdpbGwgYmUgdGhlIGRlZmF1bHQgYmVoYXZpb3IuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VuZGVmaW5lZEhUTUw9JyYjMTYwOyddIFRoaXMgb3B0aW9uIGlzIGRlcHJlY2F0ZWQuICBVc2UgdGhlIGBwbGFjZWhvbGRlcmAgb3B0aW9uIGluc3RlYWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHRvIHNob3cgdGhlIDJEIGNvb3JkaW5hdGVzIG9mIHRoZSBtb3VzZSBjdXJzb3IuIEJ5IGRlZmF1bHQsIHRoZXNlXG4gKiBhcmUgaW4gdGhlIHZpZXcgcHJvamVjdGlvbiwgYnV0IGNhbiBiZSBpbiBhbnkgc3VwcG9ydGVkIHByb2plY3Rpb24uXG4gKiBCeSBkZWZhdWx0IHRoZSBjb250cm9sIGlzIHNob3duIGluIHRoZSB0b3AgcmlnaHQgY29ybmVyIG9mIHRoZSBtYXAsIGJ1dCB0aGlzXG4gKiBjYW4gYmUgY2hhbmdlZCBieSB1c2luZyB0aGUgY3NzIHNlbGVjdG9yIGAub2wtbW91c2UtcG9zaXRpb25gLlxuICpcbiAqIE9uIHRvdWNoIGRldmljZXMsIHdoaWNoIHVzdWFsbHkgZG8gbm90IGhhdmUgYSBtb3VzZSBjdXJzb3IsIHRoZSBjb29yZGluYXRlc1xuICogb2YgdGhlIGN1cnJlbnRseSB0b3VjaGVkIHBvc2l0aW9uIGFyZSBzaG93bi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBNb3VzZVBvc2l0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNb3VzZVBvc2l0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBNb3VzZSBwb3NpdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1vdXNlUG9zaXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID1cbiAgICAgICAgICAgIG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1tb3VzZS1wb3NpdGlvbic7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtNb3VzZVBvc2l0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFBST0pFQ1RJT04sIF90aGlzLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvb3JkaW5hdGVGb3JtYXQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVGb3JtYXQob3B0aW9ucy5jb29yZGluYXRlRm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoYW5nZSB0aGlzIHRvIGBmYWxzZWAgd2hlbiByZW1vdmluZyB0aGUgZGVwcmVjYXRlZCBgdW5kZWZpbmVkSFRNTGAgb3B0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciByZW5kZXJPbk1vdXNlT3V0ID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAnJiMxNjA7JztcbiAgICAgICAgaWYgKCd1bmRlZmluZWRIVE1MJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAvLyBkZXByZWNhdGVkIGJlaGF2aW9yXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51bmRlZmluZWRIVE1MICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9IG9wdGlvbnMudW5kZWZpbmVkSFRNTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlck9uTW91c2VPdXQgPSAhIXBsYWNlaG9sZGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdwbGFjZWhvbGRlcicgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyT25Nb3VzZU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBTdHJpbmcob3B0aW9ucy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wbGFjZWhvbGRlcl8gPSBwbGFjZWhvbGRlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyT25Nb3VzZU91dF8gPSByZW5kZXJPbk1vdXNlT3V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkSFRNTF8gPSBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBQcm9qZWN0aW9uXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2Zvcm1fID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBmb3JtYXQgdHlwZSB1c2VkIHRvIHJlbmRlciB0aGUgY3VycmVudCBwb3NpdGlvbiBvclxuICAgICAqIHVuZGVmaW5lZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSBUaGUgZm9ybWF0IHRvIHJlbmRlciB0aGUgY3VycmVudFxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlRm9ybWF0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoQ09PUkRJTkFURV9GT1JNQVQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgcHJvamVjdGlvbiB0aGF0IGlzIHVzZWQgdG8gcmVwb3J0IHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSBwcm9qZWN0aW9uIHRvIHJlcG9ydCBtb3VzZVxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9ICovICh0aGlzLmdldChQUk9KRUNUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZU1vdXNlTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdGhpcy51cGRhdGVIVE1MXyhtYXAuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuaGFuZGxlTW91c2VPdXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVIVE1MXyhudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgY29udHJvbCBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgICAqIHRoZSBtYXAgaGVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgICAgICAgaWYgKG1hcCkge1xuICAgICAgICAgICAgdmFyIHZpZXdwb3J0ID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbih2aWV3cG9ydCwgRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSwgdGhpcykpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyT25Nb3VzZU91dF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbih2aWV3cG9ydCwgRXZlbnRUeXBlLlBPSU5URVJPVVQsIHRoaXMuaGFuZGxlTW91c2VPdXQsIHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlSFRNTF8obnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29vcmRpbmF0ZSBmb3JtYXQgdHlwZSB1c2VkIHRvIHJlbmRlciB0aGUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZUZvcm1hdH0gZm9ybWF0IFRoZSBmb3JtYXQgdG8gcmVuZGVyIHRoZSBjdXJyZW50XG4gICAgICogICAgIHBvc2l0aW9uIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnNldENvb3JkaW5hdGVGb3JtYXQgPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIHRoaXMuc2V0KENPT1JESU5BVEVfRk9STUFULCBmb3JtYXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwcm9qZWN0aW9uIHRoYXQgaXMgdXNlZCB0byByZXBvcnQgdGhlIG1vdXNlIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbiB0byByZXBvcnQgbW91c2VcbiAgICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuc2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KFBST0pFQ1RJT04sIGdldFByb2plY3Rpb24ocHJvamVjdGlvbikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUudXBkYXRlSFRNTF8gPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnBsYWNlaG9sZGVyXztcbiAgICAgICAgaWYgKHBpeGVsICYmIHRoaXMubWFwUHJvamVjdGlvbl8pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50cmFuc2Zvcm1fKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnModGhpcy5tYXBQcm9qZWN0aW9uXywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgICAgIHZhciBjb29yZGluYXRlID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCk7XG4gICAgICAgICAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB1c2VyUHJvamVjdGlvbiA9IGdldFVzZXJQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyh0aGlzLm1hcFByb2plY3Rpb25fLCB1c2VyUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyhjb29yZGluYXRlLCBjb29yZGluYXRlKTtcbiAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZUZvcm1hdCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZvcm1hdCgpO1xuICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgPSBjb29yZGluYXRlRm9ybWF0KGNvb3JkaW5hdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGNvb3JkaW5hdGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkSFRNTF8gfHwgaHRtbCAhPT0gdGhpcy5yZW5kZXJlZEhUTUxfKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRIVE1MXyA9IGh0bWw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvamVjdGlvbi4gUmVuZGVyaW5nIG9mIHRoZSBjb29yZGluYXRlcyBpcyBkb25lIGluXG4gICAgICogYGhhbmRsZU1vdXNlTW92ZWAgYW5kIGBoYW5kbGVNb3VzZVVwYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMubWFwUHJvamVjdGlvbl8gIT0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNb3VzZVBvc2l0aW9uO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBNb3VzZVBvc2l0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VQb3NpdGlvbi5qcy5tYXAiLCJpbXBvcnQgeyBDb250cm9sIH0gZnJvbSBcIm9sL2NvbnRyb2xcIjtcclxuaW1wb3J0IFVuaXRzIGZyb20gXCJvbC9wcm9qL1VuaXRzXCI7XHJcbmltcG9ydCB7IGdldFBvaW50UmVzb2x1dGlvbiB9IGZyb20gXCJvbC9wcm9qXCI7XHJcbi8qKlxyXG4gKiAyNS40bW0gPSAxIGluY2hcclxuICogMC4yOG1tID0gcGl4ZWwgc2l6ZSBhY2NvcmRpbmcgdG8gdGhlIE9HQyBXTVRTIHNwZWNpZmljYXRpb25cclxuICpcclxuICogQGNvbnN0XHJcbiAqIEB0eXBlIHtudW1iZXJ9XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgRElTUExBWV9EUEkgPSAyNS40IC8gMC4yODsgLy8gfjkwLjcxNFxyXG4vKipcclxuICogQGNvbnN0XHJcbiAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxyXG4gKi9cclxuY29uc3QgTEVBRElOR19ESUdJVFMgPSBbMSwgMiwgNV07XHJcbi8qKlxyXG4gKiBEaXNwbGF5cyBhIHNjYWxlIGxpbmUgaW4gdGhlIG1hcC5cclxuICpcclxuICogVGhpcyBjb250cm9sIGlzIGFuIGN1c3RvbWl6ZWQgdmVyc2lvbiBvZiB0aGUgT3BlbkxheWVycyBTY2FsZWxpbmUgY29udHJvbC5cclxuICogSGVyZSB0aGUgc2NhbGVsaW5lIGlzIGEgc3ZnIGltYWdlLCBiZWNhdXNlIG5vdyB0aGUgY2xpZW50IGNhbiBleHBvcnQgaXRcclxuICogd2l0aG91dCAzcmQgcGFydHkgZGVwZW5kZW5jeSAoc2VlIG91ciBleHBvcnQgZXhhbXBsZSlcclxuICovXHJcbmV4cG9ydCBjbGFzcyBTY2FsZUxpbmUgZXh0ZW5kcyBDb250cm9sIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBzY2FsZWxpbmUgY29udHJvbC5cclxuICAgICAqIGBgYHR5cGVzY3JpcHRcclxuICAgICAqIC8vIEV4YW1wbGU6IGNyZWF0ZSBhIG5ldyBTY2FsZUxpbmUgY29udHJvbCB3aXRoIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXHJcbiAgICAgKiBjb25zdCBzY2FsZUxpbmVDb250cm9sID0gbmV3IFNjYWxlTGluZSgpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKiBAcGFyYW0gb3B0X29wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0X29wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xyXG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnYmdpcy1zY2FsZWxpbmUnO1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy52aWV3U3RhdGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21pbldpZHRoID0gb3B0aW9ucy5taW5XaWR0aCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5XaWR0aCA6IDY0O1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZFdpZHRoID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRTVkcgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kcGkgPSBvcHRpb25zLmRwaSB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlIHRoZSBzY2FsZSBsaW5lIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSBtYXBFdmVudFxyXG4gICAgICovXHJcbiAgICByZW5kZXIobWFwRXZlbnQpIHtcclxuICAgICAgICBjb25zdCBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcclxuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVFbGVtZW50KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBjb2RlIGlzIG1haW5seSBjb3BpZWQgZnJvbSB0aGUgT3BlbkxheWVycyBTY2FsZWxpbmUgY29udHJvbFxyXG4gICAgICogYW5kIGN1c3RvbWl6ZWQgZm9yIG91ciBzdmcgZWxlbWVudFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdXBkYXRlRWxlbWVudCgpIHtcclxuICAgICAgICBjb25zdCB2aWV3U3RhdGUgPSB0aGlzLnZpZXdTdGF0ZTtcclxuICAgICAgICBpZiAoIXZpZXdTdGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XHJcbiAgICAgICAgY29uc3QgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xyXG4gICAgICAgIGNvbnN0IHBvaW50UmVzb2x1dGlvblVuaXRzID0gVW5pdHMuTUVURVJTO1xyXG4gICAgICAgIGxldCBwb2ludFJlc29sdXRpb24gPSBnZXRQb2ludFJlc29sdXRpb24ocHJvamVjdGlvbiwgdmlld1N0YXRlLnJlc29sdXRpb24sIGNlbnRlciwgcG9pbnRSZXNvbHV0aW9uVW5pdHMpO1xyXG4gICAgICAgIGNvbnN0IG1pbldpZHRoID0gKHRoaXMuX21pbldpZHRoICogKHRoaXMuZHBpIHx8IERJU1BMQVlfRFBJKSkgLyBESVNQTEFZX0RQSTtcclxuICAgICAgICBjb25zdCBub21pbmFsQ291bnQgPSBtaW5XaWR0aCAqIHBvaW50UmVzb2x1dGlvbjtcclxuICAgICAgICBsZXQgc3VmZml4ID0gJyc7XHJcbiAgICAgICAgaWYgKG5vbWluYWxDb3VudCA8IDAuMDAxKSB7XHJcbiAgICAgICAgICAgIHN1ZmZpeCA9ICfOvG0nO1xyXG4gICAgICAgICAgICBwb2ludFJlc29sdXRpb24gKj0gMTAwMDAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobm9taW5hbENvdW50IDwgMSkge1xyXG4gICAgICAgICAgICBzdWZmaXggPSAnbW0nO1xyXG4gICAgICAgICAgICBwb2ludFJlc29sdXRpb24gKj0gMTAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAobm9taW5hbENvdW50IDwgMTAwMCkge1xyXG4gICAgICAgICAgICBzdWZmaXggPSAnbSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzdWZmaXggPSAna20nO1xyXG4gICAgICAgICAgICBwb2ludFJlc29sdXRpb24gLz0gMTAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGkgPSAzICogTWF0aC5mbG9vcihNYXRoLmxvZyhtaW5XaWR0aCAqIHBvaW50UmVzb2x1dGlvbikgLyBNYXRoLmxvZygxMCkpO1xyXG4gICAgICAgIGxldCBjb3VudCwgd2lkdGgsIGRlY2ltYWxDb3VudDtcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgZGVjaW1hbENvdW50ID0gTWF0aC5mbG9vcihpIC8gMyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY2ltYWwgPSBNYXRoLnBvdygxMCwgZGVjaW1hbENvdW50KTtcclxuICAgICAgICAgICAgY291bnQgPSBMRUFESU5HX0RJR0lUU1soKGkgJSAzKSArIDMpICUgM10gKiBkZWNpbWFsO1xyXG4gICAgICAgICAgICB3aWR0aCA9IE1hdGgucm91bmQoY291bnQgLyBwb2ludFJlc29sdXRpb24pO1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4od2lkdGgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2lkdGggPj0gbWluV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGdlbmVyYXRlZFNWRyA9IG51bGw7XHJcbiAgICAgICAgaWYgKGNvdW50ICYmIGRlY2ltYWxDb3VudCA+PSAwKSB7XHJcbiAgICAgICAgICAgIGdlbmVyYXRlZFNWRyA9IHRoaXMuZ2V0R2VuZXJhdGVkU1ZHKGNvdW50LnRvRml4ZWQoZGVjaW1hbENvdW50IDwgMCA/IC1kZWNpbWFsQ291bnQgOiAwKSArICcgJyArIHN1ZmZpeCwgd2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZ2VuZXJhdGVkU1ZHICYmIHRoaXMucmVuZGVyZWRTVkcgIT0gZ2VuZXJhdGVkU1ZHKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGdlbmVyYXRlZFNWRyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRTVkcgPSBnZW5lcmF0ZWRTVkc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkV2lkdGggIT0gd2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xyXG4gICAgICAgICAgICBpZiAoZ2VuZXJhdGVkU1ZHKSB7XHJcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZWRTVkcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyh3aWR0aCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRXaWR0aCA9IHdpZHRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZWRWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgZ2VuZXJhdGVkIHN2ZyBlbGVtZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHR4dCB0aGUgY2FsY3VsYXRlZCB0ZXh0IGNvbnRlbnQgb2YgdGhlIGVsZW1lbnRcclxuICAgICAqIEBwYXJhbSB3aWR0aCB0aGUgY2FsY3VsYXRlZCBvdXRwdXQgd2lkdGhcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGdldEdlbmVyYXRlZFNWRyh0eHQsIHdpZHRoKSB7XHJcbiAgICAgICAgY29uc3Qgc3ZnSGVpZ2h0ID0gMTg7XHJcbiAgICAgICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnaWQnLCAnYmdpcy1zY2FsZWxpbmUtc3ZnJyk7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgc3ZnSGVpZ2h0KTtcclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyh3aWR0aCkpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcxMDAlJyk7XHJcbiAgICAgICAgY29uc3QgcmVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncmVjdCcpO1xyXG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdiZ2lzLXNjYWxlbGluZS1zdmctYmFja2dyb3VuZCcpO1xyXG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKDApKTtcclxuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgneScsIFN0cmluZygwKSk7XHJcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzEwMCUnIC8qU3RyaW5nKHdpZHRoKSovKTtcclxuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzEwMCUnIC8qU3RyaW5nKHN2Z0hlaWdodCkqLyk7XHJcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnI2U1ZWNmMCcpO1xyXG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCAnLjUnKTtcclxuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XHJcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxJyk7XHJcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCAnMCAnICsgd2lkdGggKyAnICcgKyAod2lkdGggKyAyICogc3ZnSGVpZ2h0KSk7XHJcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHJlY3QpO1xyXG4gICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcclxuICAgICAgICB0ZXh0LnRleHRDb250ZW50ID0gdHh0O1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKHdpZHRoIC8gMikpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCd5JywgU3RyaW5nKDEyKSk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LXNpemUnLCAnMWVtJyk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC1mYW1pbHk6IFwiU291cmNlIFNhbnMgUHJvXCIsIHNhbnMtc2VyaWYnKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC1mYW1pbHknLCAnXCJTb3VyY2UgU2FucyBQcm9cIiwgc2Fucy1zZXJpZicpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2JsYWNrJyk7XHJcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHRleHQpO1xyXG4gICAgICAgIHJldHVybiBzdmc7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCB0aGUgbWluIHdpZHRoXHJcbiAgICAgKiBAcGFyYW0gdmFsdWVcclxuICAgICAqL1xyXG4gICAgc2V0TWluV2lkdGgodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9taW5XaWR0aCA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIG1pbiB3aWR0aFxyXG4gICAgICovXHJcbiAgICBnZXRNaW5XaWR0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbWluV2lkdGg7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IENvbnRyb2wgZnJvbSAnb2wvY29udHJvbC9Db250cm9sJztcclxuaW1wb3J0IHsgYm91bmRpbmdFeHRlbnQgfSBmcm9tIFwib2wvZXh0ZW50XCI7XHJcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xyXG4vKipcclxuICogQW4gZXZlbnQgY2xhc3MgdG8gaGFuZGxlIG1vdXNlIGV2ZW50c1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3TWFwRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xyXG4gICAgY29uc3RydWN0b3IodHlwZSwgb3JpZ2luYWxFdmVudCkge1xyXG4gICAgICAgIHN1cGVyKHR5cGUpO1xyXG4gICAgICAgIHRoaXMub3JpZ2luYWxFdmVudCA9IG9yaWdpbmFsRXZlbnQ7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERpc3BsYXlzIGFuIG92ZXJ2aWV3IG1hcCBvZiBBdXN0cmlhIGFuZCBhIGNyb3NzaGFpciBtYXJrZXIgZm9yIHRoZSBjdXJyZW50XHJcbiAqIGNlbnRlciBpbiB0aGUgbWFpbiBtYXAuIFlvdSBjYW4gY2xpY2sgb24gdGhlIG92ZXJ2aWV3IG1hcCB0byByZWNlbnRlciB0aGVcclxuICogbWFpbiBtYXAuXHJcbiAqXHJcbiAqIEhpbnQ6IHRoZSBkZWZhdWx0IHNpemUgb2YgdGhlIG92ZXJ2aWV3IG1hcCBkZXBlbmRzIG9uIHRoZSB3aWR0aCBvZiB0aGUgdmlld3BvcnQgKGFwcHJvcHJpYXRlIGZvciBmdWxsc2NyZWVuIG1hcHMpLlxyXG4gKiBUbyBsaW1pdCB0aGUgc2l6ZSBhZGQgYSBtYXgtd2lkdGggYW5kIG1heC1oZWlnaHQgKG1heC13aWR0aCA9IDEuNzUqbWF4LWhlaWdodCkgdG8gdGhlIC5iZ2lzLW92ZXJ2aWV3LWltYWdlIGNzcyBjbGFzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBPdmVydmlldyBleHRlbmRzIENvbnRyb2wge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG92ZXJ2aWV3IG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1vdmVydmlldy1pbWFnZSc7XHJcbiAgICAgICAgY29uc3QgZmlndXJlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZpZ3VyZScpO1xyXG4gICAgICAgIGZpZ3VyZUVsZW1lbnQuaW5uZXJIVE1MID0gT3ZlcnZpZXcuU1ZHX0NPREU7XHJcbiAgICAgICAgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGZpZ3VyZUVsZW1lbnQpO1xyXG4gICAgICAgIG9wdHMuZWxlbWVudCA9IG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudDtcclxuICAgICAgICBzdXBlcihvcHRzKTtcclxuICAgICAgICB0aGlzLnByZXZlbnREZWZhdWx0ID0gb3B0cy5wcmV2ZW50RGVmYXVsdCB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCA9IG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudDtcclxuICAgICAgICAvLyBleHRlbnQ6IFttaW54LCBtaW55LCBtYXh4LCBtYXh5XSAtLSBjb29yZGluYXRlczogW1tsZWZ0LCBib3R0b21dLCBbcmlnaHQsIHRvcF1dXHJcbiAgICAgICAgdGhpcy5leHRlbnQgPSBib3VuZGluZ0V4dGVudChbWzEwMTAwMDAsIDU3OTAwMDBdLCBbMTk2MDAwMCwgNjMzMDAwMF1dKTtcclxuICAgICAgICB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT3ZlcnZpZXdNYXBFdmVudCgnY2xpY2snLCBlKSksIGZhbHNlKTtcclxuICAgICAgICBpZiAoIXRoaXMucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbihcImNsaWNrXCIsIHRoaXMub25PdmVydmlld0ltYWdlQ2xpY2spO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN2Z0VsZW1lbnQgPSBmaWd1cmVFbGVtZW50LmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWJhY2tncm91bmQnKTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3gnLCBTdHJpbmcoMCkpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgneScsIFN0cmluZygwKSk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdyeCcsIFN0cmluZyg4KSk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdyeScsIFN0cmluZyg4KSk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyhPdmVydmlldy5TVkdfV0lEVEgpKTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIFN0cmluZyhPdmVydmlldy5TVkdfSEVJR0hUKSk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdzdHlsZScsICdzdHJva2Utd2lkdGg6MCcpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnZmlsbCcsIE92ZXJ2aWV3LkJBQ0tHUk9VTkRfQ09MT1IpO1xyXG4gICAgICAgIHRoaXMuc3ZnRWxlbWVudC5wcmVwZW5kKHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBtYXBcclxuICAgICAqL1xyXG4gICAgc2V0TWFwKG1hcCkge1xyXG4gICAgICAgIHN1cGVyLnNldE1hcChtYXApO1xyXG4gICAgICAgIGlmIChtYXApIHtcclxuICAgICAgICAgICAgLy8gaWYodGhpcy5zdmdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vICAgdGhpcy5zdmdFbGVtZW50LnByZXBlbmQodGhpcy5zdmdCYWNrZ3JvdW5kUmVjdCk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZlbnREZWZhdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBtYXAub24oJ21vdmVlbmQnLCAoZXZlbnQpID0+IHRoaXMudXBkYXRlQ3Jvc3NoYWlyKGV2ZW50KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICB1cGRhdGVDcm9zc2hhaXIoZXZlbnQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3Qgc2l6ZSA9IFtPdmVydmlldy5TVkdfV0lEVEgsIE92ZXJ2aWV3LlNWR19IRUlHSFRdO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IHRoaXMuZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQoKF9hID0gZXZlbnQubWFwLmdldFZpZXcoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldENlbnRlcigpKTtcclxuICAgICAgICAvLyBqdXN0IHRvIGJlIHN1cmUgbWFrZSBzb21lIGxpbWl0c1xyXG4gICAgICAgIGlmIChjZW50ZXJbMF0gPiBzaXplWzBdKVxyXG4gICAgICAgICAgICBjZW50ZXJbMF0gPSBzaXplWzBdO1xyXG4gICAgICAgIGVsc2UgaWYgKGNlbnRlclswXSA8IDApXHJcbiAgICAgICAgICAgIGNlbnRlclswXSA9IDA7XHJcbiAgICAgICAgaWYgKGNlbnRlclsxXSA+IHNpemVbMV0pXHJcbiAgICAgICAgICAgIGNlbnRlclsxXSA9IHNpemVbMV07XHJcbiAgICAgICAgZWxzZSBpZiAoY2VudGVyWzFdIDwgMClcclxuICAgICAgICAgICAgY2VudGVyWzFdID0gMDtcclxuICAgICAgICAvLyB1cGRhdGUgY3Jvc3NoYWlyXHJcbiAgICAgICAgaWYgKHRoaXMuc3ZnRWxlbWVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0VsbXMgPSB0aGlzLnN2Z0VsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmdpcy1vdmVydmlld21hcC1zdmctY3Jvc3NoYWlyJyk7XHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0VsbXMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZXhpc3RpbmdFbG0gb2YgQXJyYXkuZnJvbShleGlzdGluZ0VsbXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdmdFbGVtZW50LnJlbW92ZUNoaWxkKGV4aXN0aW5nRWxtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoT3ZlcnZpZXcuZ2V0Q3Jvc3NoYWlyKGNlbnRlclswXSwgMCwgY2VudGVyWzBdLCBPdmVydmlldy5TVkdfSEVJR0hULCAnYmdpcy1vdmVydmlld21hcC1zdmctY3Jvc3NoYWlyLXgnKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3ZnRWxlbWVudC5hcHBlbmRDaGlsZChPdmVydmlldy5nZXRDcm9zc2hhaXIoMCwgY2VudGVyWzFdLCBPdmVydmlldy5TVkdfV0lEVEgsIGNlbnRlclsxXSwgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpci15JykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB4MVxyXG4gICAgICogQHBhcmFtIHkxXHJcbiAgICAgKiBAcGFyYW0geDJcclxuICAgICAqIEBwYXJhbSB5MlxyXG4gICAgICogQHBhcmFtIGNzc0NsYXNzXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0Q3Jvc3NoYWlyKHgxLCB5MSwgeDIsIHkyLCBjc3NDbGFzcykge1xyXG4gICAgICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcclxuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDEnLCBTdHJpbmcoeDEpKTtcclxuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTEnLCBTdHJpbmcoeTEpKTtcclxuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDInLCBTdHJpbmcoeDIpKTtcclxuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTInLCBTdHJpbmcoeTIpKTtcclxuICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZmlsbDogbm9uZTsgc3Ryb2tlOiBibGFjazsgc3Ryb2tlLXdpZHRoOiAxcHg7Jyk7XHJcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpciAnICsgY3NzQ2xhc3MpO1xyXG4gICAgICAgIHJldHVybiBsaW5lO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxlZnRcclxuICAgICAqIEBwYXJhbSByaWdodFxyXG4gICAgICogQHBhcmFtIHdpZHRoXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aChsZWZ0LCByaWdodCwgd2lkdGgpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5hYnMoKGxlZnQgLSByaWdodCkpIC8gd2lkdGg7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2VudGVyXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBnZXRPdmVydmlld1B4RnJvbUxvbkxhdChjZW50ZXIpIHtcclxuICAgICAgICBpZiAoY2VudGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBbT3ZlcnZpZXcuU1ZHX1dJRFRILCBPdmVydmlldy5TVkdfSEVJR0hUXTtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9IFtcclxuICAgICAgICAgICAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMF0sIHRoaXMuZXh0ZW50WzJdLCBzaXplWzBdKSxcclxuICAgICAgICAgICAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMV0sIHRoaXMuZXh0ZW50WzNdLCBzaXplWzFdKVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgTWF0aC5yb3VuZCgxIC8gcmVzb2x1dGlvblswXSAqIChjZW50ZXJbMF0gLSB0aGlzLmV4dGVudFswXSkpLFxyXG4gICAgICAgICAgICAgICAgTWF0aC5yb3VuZCgxIC8gcmVzb2x1dGlvblsxXSAqICh0aGlzLmV4dGVudFszXSAtIGNlbnRlclsxXSkpXHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbMCwgMF07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1ldGhvZDogb25PdmVydmlld0ltYWdlQ2xpY2tcclxuICAgICAqIEhhbmRsZSBjbGljayBpbiBvdmVydmlldyBpbWFnZVxyXG4gICAgICpcclxuICAgICAqIFBhcmFtZXRlcnM6XHJcbiAgICAgKiBlIC0gTW91c2VFdmVudCBvYmplY3RcclxuICAgICAqL1xyXG4gICAgb25PdmVydmlld0ltYWdlQ2xpY2soZSkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgY29uc3Qgb3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QgPSB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICBjb25zdCB4ID0gZS5vcmlnaW5hbEV2ZW50LmNsaWVudFggLSBvdmVydmlld0NvbnRhaW5lckNsaWVudEJvdW5kaW5nUmVjdC5sZWZ0OyAvLyBYLXBvcyBpbiBvdmVydmlldyBpbWFnZVxyXG4gICAgICAgIGNvbnN0IHkgPSBlLm9yaWdpbmFsRXZlbnQuY2xpZW50WSAtIG92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0LnRvcDsgLy8gWS1wb3MgaW4gb3ZlcnZpZXcgaW1hZ2VcclxuICAgICAgICAvLyBnZXQgTG9uTGF0XHJcbiAgICAgICAgY29uc3QgY2xpY2tMb25MYXQgPSB0aGlzLmdldExvbkxhdEZyb21PdmVydmlld1B4KFt4LCB5XSk7XHJcbiAgICAgICAgLy8gdXBkYXRlIGNlbnRlciBvZiB0aGUgbWFwXHJcbiAgICAgICAgKF9iID0gKF9hID0gdGhpcy5nZXRNYXAoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFZpZXcoKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICBjZW50ZXI6IGNsaWNrTG9uTGF0LFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2Q6IGdldExvbkxhdEZyb21PdmVydmlld1B4XHJcbiAgICAgKiBHZXQgbWFwIGxvY2F0aW9uIGZyb20gcGl4ZWwgbG9jYXRpb25cclxuICAgICAqXHJcbiAgICAgKiBQYXJhbWV0ZXJzOlxyXG4gICAgICogb1B4IC0gQ29vcmRpbmF0ZVxyXG4gICAgICpcclxuICAgICAqIFJldHVybnM6XHJcbiAgICAgKiBbeCx5XSBMb2NhdGlvbiBpbiBsb24vbGF0IHRyYW5zbGF0ZWQgZnJvbVxyXG4gICAgICogcGFzc2VkIGluIHBpeGVsLWxvY2F0aW9uIGluIG92ZXJ2aWV3IG1hcFxyXG4gICAgICovXHJcbiAgICBnZXRMb25MYXRGcm9tT3ZlcnZpZXdQeChvUHgpIHtcclxuICAgICAgICBjb25zdCBzaXplID0gW3RoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsaWVudFdpZHRoLCB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5jbGllbnRIZWlnaHRdO1xyXG4gICAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBbXHJcbiAgICAgICAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMF0sIHRoaXMuZXh0ZW50WzJdLCBzaXplWzBdKSxcclxuICAgICAgICAgICAgT3ZlcnZpZXcuY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aCh0aGlzLmV4dGVudFsxXSwgdGhpcy5leHRlbnRbM10sIHNpemVbMV0pXHJcbiAgICAgICAgXTtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBvUHhbMF0gKiByZXNvbHV0aW9uWzBdICsgdGhpcy5leHRlbnRbMF0sXHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW50WzNdIC0gb1B4WzFdICogcmVzb2x1dGlvblsxXVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgb3ZlcnZpZXcgcGFyZW50IGNvbnRhaW5lciBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGdldE92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgb3ZlcnZpZXcgc3ZnIGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZ2V0U1ZHRWxlbWVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdmdFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIHN2ZyBiYWNrZ3JvdW5kIHJlY3QgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBnZXRCYWNrZ3JvdW5kUmVjdEVsZW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50O1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuT3ZlcnZpZXcuQkFDS0dST1VORF9DT0xPUiA9ICcjZTVlY2YwJztcclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5PdmVydmlldy5TVkdfSEVJR0hUID0gMjE2O1xyXG4vKipcclxuICpcclxuICovXHJcbk92ZXJ2aWV3LlNWR19XSURUSCA9IDM4MDtcclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5PdmVydmlldy5TVkdfQ09ERSA9IFwiPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIGNsYXNzPSdiZ2lzLW92ZXJ2aWV3bWFwLXN2ZycgeG1sbnM6eGxpbms9J2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnIHZpZXdCb3g9JzAgMCBcIiArIE92ZXJ2aWV3LlNWR19XSURUSCArIFwiIFwiICsgT3ZlcnZpZXcuU1ZHX0hFSUdIVCArIFwiJyBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSd4TWlkWU1pZCBtZWV0JyBoZWlnaHQ9JzEwMCUnIHdpZHRoPScxMDAlJyBjb2xvci1pbnRlcnBvbGF0aW9uPSdhdXRvJyBmaWxsPSdibGFjaycgZmlsbC1vcGFjaXR5PScxJyAgc3Ryb2tlPSdibGFjaycgc3Ryb2tlLWRhc2hhcnJheT0nbm9uZScgc3Ryb2tlLWRhc2hvZmZzZXQ9JzAnIHN0cm9rZS1saW5lY2FwPSdzcXVhcmUnIHN0cm9rZS1saW5lam9pbj0nbWl0ZXInIHN0cm9rZS1taXRlcmxpbWl0PScxMCcgc3Ryb2tlLW9wYWNpdHk9JzEnIHN0cm9rZS13aWR0aD0nMScgeG1sbnM6dj0naHR0cHM6Ly92ZWN0YS5pby9uYW5vJz48c3R5bGU+PCFbQ0RBVEFbLkJ7Y2xpcC1wYXRoOnVybCgjQSl9LkN7ZmlsbC1ydWxlOmV2ZW5vZGR9LkR7c3Ryb2tlOm5vbmV9LkV7ZmlsbDojOTk5fS5Ge2ZpbGw6bm9uZX0uR3tzdHJva2UtbWl0ZXJsaW1pdDoxfS5Ie3N0cm9rZS13aWR0aDoyLjV9XV0+PC9zdHlsZT48ZGVmcz48Y2xpcFBhdGggaWQ9J0EnPjxwYXRoIGQ9J00wIDBoMzgwdjIxNkgwVjB6Jy8+PC9jbGlwUGF0aD48cGF0aCBpZD0nQicgZD0nTTM1NiA4MmwtLjQgNS4yIDQuNCAxLjYtMy4yIDIuNHY2LjRsLTMuNi44IDIuOCAzLjYuOCA2LjgtOS42IDEuMi0uNC0yLTEuNiAyLjRoLTMuNmwtMS42LTMuNi00LjgtMS42LTggNi40IDYuNCAzLjIgMy4yLS44IDEuMiA0LjggMiAuOC0yLjggMi44LjQgMy4yLTMuNiAzLjItMi44LS40LS44IDEuNi0yLjQtMS42LS40IDQgMi40IDQuOC0yLjQgMS42LS44IDQgMiAuOC0uNCAyLjQgMi44LS40LjggMS42LTMuMiAxLjYgMi44IDIuOC00IDIgMy42IDEuNi0xMC0uOC0uNCAzLjItNCAxLjYtMi40IDQuNC02LjQgMi44LjgtMy42IDYuNC02LjgtMy4yLTUuMiAxLjYtNC44LTQuOC0xNC44IDEzLjItNi44di02bDIuOC00LS44LTMuNi0yLjQtMS4yLTEuMi03LjYgMy4yLjggMi0yLjgtMi0xLjYgMi44LS44IDItNCAzLjItLjQgMi40IDQgNS42LTUuNnYtMi44bDUuNi0xLjIgMi40LTMuMkwzNTIgODhsMS42LTMuNi0yLTIgMi44IDEuNiAxLjYtMnonLz48cGF0aCBpZD0nQycgZD0nTTE2Mi40IDE0Ni44bC40IDIgOC40IDEuMiAxLjYgMi44IDQuNCAxLjYgOC0yIC40LTIuOCA0LjgtLjggMiAyIDEwLjguOCA4LjQgOS42IDUuNi0yIDIuNC00IDguNC00LjggMS42IDMuMmg2bC44IDMuMiA0LjgtMy4yIDUuNiAyIDEwLTMuNiA4IDguOC0yIDguOCAyLjQuOC0uNCA2LjQgMiAxLjItMy42IDMuMi0xLjItMi0xLjYgMi0yLjQtLjQtMi40IDYuNC00LjguOC0uNCAyLjQtNC44IDEuNi0uOCA0LTIuNC0zLjYtMiAxLjItMi0yLjQtMTIuNC44LTEuMi0yLjhoLTUuMmwtNC0yLjgtNS42IDEuMi0xOC00LjgtNi44IDEuNi02LjQtMy4ySDE2OGwtMi40LTIuOC00LjgtLjR2LTMuMmgxLjZWMTcybDkuMi0xLjIgMS42LTIuNC01LjYtNHYtMy4ybC00LjQtMy4yLS44LTIuNCAyLTMuMmgtMi44bC0yLjQtMy42IDMuMi0yeicvPjxwYXRoIGlkPSdEJyBkPSdNMjY0LjggMjAuOGw1LjYgMS42LjQgNCA0LjQtLjggMS42LTIuOCA4LjggMy4yLjggMiA4IDQgNi44LTEuNlYzMmw1LjIgMiAuNCAyLjQgNS42IDMuMiAxMi44IDEuMiAzLjYtNS42IDMuNi0uNCAyLjQgMi40IDIuOC0uNCAxLjIgNCAxMC40IDEuNiAxLjYgMTAuOC00LjggNi0uOCA0LjggNS42IDcuNi44IDYuNCA0LjQgMy4yLTEuNiAyLjgtMi44LTEuNiAyIDJMMzUyIDg4bC00LjQtMy42LTIuNCAzLjItNS42IDEuMnYyLjhsLTUuNiA1LjYtMi40LTQtMy4yLjQtMS42IDMuNi0zLjIgMS4yIDIgMS4yLTIgMy4yLTMuMi0uOCAxLjIgNy42IDIuNCAxLjIuOCAzLjYtMi44IDQgMS4yIDQtNS4yIDUuMmgtMi44bC0yLTYuOC0yLjQgMi44LTEuMi0yLTQuOC0uOC0xLjItMi44LTIgLjQuNC00LTUuMi0uNC0xLjItNS42LTEuNiAxLjItMy4yLTMuNi00LjQuNHYtMS42SDI4NGwtNC40LTQtMi40LjQtLjQgMi0zLjItLjQtLjggMy4yLTEwLjQuNC0yIDIuNC00LTIuNC0zLjIgMS4yLTIuNC00di00LjRsMi44LTEuNi0uNC0xLjYtMS42LTIuNC0xLjYuOC04LjQtNC40LTItMy4ydi0zLjZsMS42LS44LS44LTYuNCAyLTIuNCA2LjggNS4yIDcuMi0yTDI1OCA3NGgzLjJsMS4yIDIuNC44LTguNGgtMmwuOC00LjgtMiAuNCAxLjYtMS42LTQtNC44IDIuOC0xLjYtMTAuNC01LjIgMS42LTcuMiAzLjYtMi44LjQtMy42IDcuMiAxLjJWMjMuMmwyLTIuNHptNjIgNDcuMmwtNy4yIDUuNi0yLjQtMS42LS44IDYgMS42IDMuMiA5LjYuNCAyLTIuOCA0LjQgMS42LTItMi40LjgtNi0yLTItMS42IDEuMi0yLjQtMy4yeicvPjxwYXRoIGlkPSdFJyBkPSdNMjEyLjQgMzhsOS42IDYuNC0yLjQgMiAyLjQgMy4yaDZsNi40IDIuOCAyLTIuOGgyLjRMMjQwIDQ2bDQgMy4yIDIuNC0yIDUuNiA1LjIgNy4yIDIgMS4yIDEuMi0yLjggMS42LjQgMiAzLjYgMi44LTEuNiAxLjYgMi0uNC0uOCA0LjhoMnY0LjRsLS44IDQtMS4yLTIuNEgyNThsLTEuNiAyLjgtNiAyLTYuOC01LjItMy4yIDIuNC44IDYuNC0xLjYuOHYzLjZsNi40IDYgNS42LjggMiAzLjItMi44IDIuNCAxLjYgNi44LTIuNC0uOC0yIDIuNC01LjIuOC0uOCAyLjQtOC40IDQuOC0zLjItLjQtMi0yLjgtNi44IDIuNHYtMy42bC0yLTItMTAuNC0xLjItMy42IDUuNiAyLjggOC40LTEuNiAzLjJoLTIuNGwtOC40LTQgMi02LjQtMS42LTIgMi44LTQuNC01LjItMiAxLjItMi44IDMuMi44di0xLjZsLTYuNC40LTQuNC0yLS40LTguOCAzLjYgMS4yLjQtMi44LTQtMi02IDIuOHYtMmwtMy4yLS40LTEuMi0yLjRoLTQuNGwtMy4yIDMuMi01LjItNS4yLS40LTMuMiAxMi05LjYgMTQtNCA0LjgtNy4yLS40LTguOCAyIC40IDEuMi0yLjQgMTAgNS4yIDQuNC03LjIuNC01LjYtMi0uOCAyLjQtMy42eicvPjxwYXRoIGlkPSdGJyBkPSdNMTc2LjQgODYuOGwxLjYgMi40IDMuMi40djJsNi0yLjggNCAyLS40IDIuOC0zLjYtMS4yLjQgOC44IDExLjIgMi40aC0zLjZsLTEuMiAzLjIgNS4yIDEuNi0yLjggNC40IDEuNiAyLTIgNi40IDUuMiAzLjItMS42IDMuMiAxLjYgOC44IDUuMiAyIDUuMi0yLjQuOCA0LjQgNi44IDYuNC01LjIgMS4yIDEuMiAyLjgtNC40IDgtNS4yLTMuNnYtMi40bC0xMC40LTIuOC0yLjguOC0xLjYtMi01LjIuOC0uNCAyLjgtNy4yIDItNS4yLTEuNi0xLjYtMi44LTguNC0xLjJ2LTJsLTQgMi02LTMuNkgxNDhsLTYuNCA1LjYtNi0xLjItMi0xMi44IDEuNi0xLjYgNi44LjQgMS4yLTIgOC40LjR2LTMuNmw0LjQtLjggMi40LTQuOCAyLjgtLjgtMy4yLTQuOCAyLTItNC40LTEuNiAxLjItNC40aDguNGwtMS4yIDEuNiAyLjggMi40LTIgMiAuOCAyIDcuNiA1LjIgMy42LTEuMi0uNC01LjYgMi44LTMuNi0uOC00LTIuNC0yaC01LjZsNC40LTkuMi02LjQtOC40IDQtMy42aDR6Jy8+PHBhdGggaWQ9J0cnIGQ9J00yNzkuMiAxMDEuMmw3LjIgMy42djEuNmw0LjQtLjQgMy4yIDMuNiAxLjYtMS4yIDEuMiA1LjYgNS4yLjQtLjggMy4yIDIuNC40IDEuMiAyLjggNC44LjggMS4yIDIgMS42LTIuOCAxLjIuOC0uNCAyLjggMi44IDMuMi03LjIgMy42IDQuOCAxNC44LTEuNiA0LjggMy4yIDQuOC03LjYgMTAuOHY2bDIuNCA1LjItNi44LTRoLTMuNmwtOS42IDItMiAxLjJ2Mi44bC0zLjIgMS4yLTIuOC0zLjItMTQuOC44LTIuNC0xLjYuNC02LjQtMi40LS44IDItOC44LTgtOC44LTEwIDMuNi01LjYtMi00LjggMy4yLS44LTMuMmgtNmwtMS42LTMuMi04LjQgNC44LTIuNCA0LTQuNCAyLTMuMi0xLjYgNS42LTguOC0xLjItMi44IDUuMi0xLjItNi44LTYuNC0uOC00LjQtNS4yIDIuNC00LjgtMS42LTItOC40IDEuNi00LjQgNS42IDEuMiAxLjYtMy4yLTIuOC04LjQgMy42LTUuNiAxMC40IDEuMiAyIDJ2My42bDYuOC0yLjQgMiAyLjggMy4yLjQgMTYuNC0xMC40IDMuMiAyLjQgMy4yLTEuMiA0IDIuNCAyLTIuNCAxMC40LS40LjgtMy4yIDMuMi40LjQtMmgyeicvPjxwYXRoIGlkPSdIJyBkPSdNMTUxLjYgMTQ1LjJsNi40IDIuNCAzLjYgNC44aDIuOGwtMiAzLjIuOCAyLjQgNC40IDMuMnYzLjJsNS42IDQtMS42IDIuNC05LjIgMS4yLTEuNiA1LjYtNS42LjQtOC00LTEuMi00LTMuMi0uNC0uNC02LjgtMi44LjgtMy4yLTIuOCAxLjItMS42LTItNC44IDMuNi0uOCA3LjItNy42IDUuMi0uOHonLz48cGF0aCBpZD0nSScgZD0nTTYxLjIgMTE4LjhsNS42IDEuNiAyLTIuNCA2LjggMy42IDUuMi0xLjYgMS4yIDEuNi0yLjQgMmgzLjJsMiA2aDZsNC0yLjggMiAuNC0uOCAyLjQgMi40LS40IDItMy4yIDQgLjQtMS42LTIuNCAyLjQtMi44IDYgLjQgMi40LTUuMiA5LjYuOCA2LjgtMi44IDkuMiAxLjItMi02LjQgNC40LTIuOHY0LjRsOC0xLjIgMi44IDQuOCAzLjItLjh2Mmw0IDEuMi0xLjYgMi40IDMuMiA0LjgtMi44LjgtMi40IDQuOC00LjQuOHYzLjZsLTguNC0uNC0xLjIgMi02LjgtLjQtMS42IDEuNiAyLjQgMTMuNi04IDItOS4yIDUuMi01LjItMy4yLTMuNiAyLTMuMi0xLjYtMi40IDIuOC0yLjQtMS42LTkuMiAxLjYuNCAxLjYtMy4yIDEuNi0zLjIgMTBoLTcuMmwtNi0xLjYgMS42LTIuNC00LTMuMkw2NiAxNjZsLTQtMS4yLjgtNS42LTIuOC0uOC0xLjYtMy4yLTMuNiAzLjIuNCAyLTMuNi0uNHY0bC00IDEuMi0xLjYtMi44LS40LTIuNCAyLjgtMy42LTItMi40IDEuNi0xLjItMS4yLTIuOCA0LTQgLjQtNy4yLTIuNC0xLjIgNi44LTIgNC44LTUuMiAyLTMuMi0yLTQgLjgtNC40eicvPjxwYXRoIGlkPSdKJyBkPSdNMzEuMiAxMTYuNGwyIC40LS40IDIuOGg2LjhsMS4yIDQgNC40IDEuNi40IDIuNC0xLjYuOCAxLjYgMy42IDYtMi0uOCA1LjItMiAxLjIgMi40IDIuNC0uNCA3LjItNCA0IDEuMiAyLjgtMS42IDEuMiAyIDIuNC0yLjggMy42IDIgMy42LTEuMiAyLTMuMi0xLjItMS4yLTIuOC02LjQtMlYxNTRsLTEyLTIuNCAxLjItNC44LTMuMi0yLjQuNC00LjgtMi0yIDYuNC04LS40LTQtMi44LS40LTEuNi0yLjggNy42LTIgMi00eicvPjxwYXRoIGlkPSdLJyBkPSdNMzI3LjYgNjguNGwuNCAyIDIuOC0uNCAyIDItLjggNiAyIDIuNC00LjQtMS42LTIgMi44LTkuNi0uNC0xLjYtMy4yLjgtNiAyLjQgMS42IDEuNi0yLjQgMy42LS40LjQtMi44IDIuNC40eicvPjwvZGVmcz48ZyB0ZXh0LXJlbmRlcmluZz0nb3B0aW1pemVMZWdpYmlsaXR5Jz48dXNlIHhsaW5rOmhyZWY9JyNCJyBjbGFzcz0nQiBDIEQgRScvPjxnIHN0cm9rZT0nc2lsdmVyJz48dXNlIHhsaW5rOmhyZWY9JyNCJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0MnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjQycgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNEJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0QnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRScgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNFJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0YnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNHJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0cnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjSCcgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNIJyBjbGFzcz0nQiBGIEcgSCcvPjxwYXRoIGQ9J002MS4yIDExOC44bC0xLjItMS4yIDIuNC0uOC0xLjIgMnonIGNsYXNzPSdCIEMgRCBFJy8+PHBhdGggZD0nTTYxLjIgMTE4LjhsLTEuMi0xLjIgMi40LS44LTEuMiAyeicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNJJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0knIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjSicgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNKJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0snIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSycgY2xhc3M9J0IgRiBHIEgnLz48L2c+PC9nPjwvc3ZnPlwiO1xyXG4iLCJpbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi9iYXNlXCI7XHJcbi8qKlxyXG4gKiBBIGRlZmF1bHQgYnV0dG9uIHdpdGggYSBcInNoYXJlXCIgaWNvblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNoYXJlIGV4dGVuZHMgQnV0dG9uIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBidXR0b24gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbih7IHVuaWNvZGU6IFNoYXJlLkRFRkFVTFRfVU5JQ09ERSwgdG9vbHRpcDogU2hhcmUuREVGQVVMVF9UT09MVElQX1RFWFQsIHRvb2x0aXBBc1RleHRFbGVtZW50OiB0cnVlIH0sIG9wdHMpKTtcclxuICAgIH1cclxufVxyXG5TaGFyZS5ERUZBVUxUX1RPT0xUSVBfVEVYVCA9ICdBbnNpY2h0IHRlaWxlbic7XHJcblNoYXJlLkRFRkFVTFRfVU5JQ09ERSA9IDB4ZTkyYztcclxuIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQgeyBlYXNlSW4gfSBmcm9tICcuL2Vhc2luZy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL1RpbGV9IGZvciB0aGUgdGlsZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHVybCBhcyBhcmd1bWVudHMuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9KTtcbiAqIGBgYFxuICogRm9yIG1vcmUgZmluZSBncmFpbmVkIGNvbnRyb2wsIHRoZSBsb2FkIGZ1bmN0aW9uIGNhbiB1c2UgZmV0Y2ggb3IgWE1MSHR0cFJlcXVlc3QgYW5kIGludm9sdmVcbiAqIGVycm9yIGhhbmRsaW5nOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQgVGlsZVN0YXRlIGZyb20gJ29sL1RpbGVTdGF0ZSc7XG4gKlxuICogc291cmNlLnNldFRpbGVMb2FkRnVuY3Rpb24oZnVuY3Rpb24odGlsZSwgc3JjKSB7XG4gKiAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAqICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlbmQnLCBmdW5jdGlvbiAoZXZ0KSB7XG4gKiAgICAgdmFyIGRhdGEgPSB0aGlzLnJlc3BvbnNlO1xuICogICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAqICAgICAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xuICogICAgIH0gZWxzZSB7XG4gKiAgICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5FUlJPUik7XG4gKiAgICAgfVxuICogICB9KTtcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICogICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgfSk7XG4gKiAgIHhoci5vcGVuKCdHRVQnLCBzcmMpO1xuICogICB4aHIuc2VuZCgpO1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oVGlsZSwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlfSBzb3VyY2VzIHVzZSBhIGZ1bmN0aW9uIG9mIHRoaXMgdHlwZSB0byBnZXRcbiAqIHRoZSB1cmwgdGhhdCBwcm92aWRlcyBhIHRpbGUgZm9yIGEgZ2l2ZW4gdGlsZSBjb29yZGluYXRlLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC90aWxlY29vcmR+VGlsZUNvb3JkfSBmb3IgdGhlIHRpbGVcbiAqIGNvb3JkaW5hdGUsIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHBpeGVsIHJhdGlvIGFuZCBhXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gZm9yIHRoZSBwcm9qZWN0aW9uICBhcyBhcmd1bWVudHNcbiAqIGFuZCByZXR1cm5zIGEgYHtzdHJpbmd9YCByZXByZXNlbnRpbmcgdGhlIHRpbGUgVVJMLCBvciB1bmRlZmluZWQgaWYgbm8gdGlsZVxuICogc2hvdWxkIGJlIHJlcXVlc3RlZCBmb3IgdGhlIHBhc3NlZCB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCwgbnVtYmVyLFxuICogICAgICAgICAgIGltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQpOiAoc3RyaW5nfHVuZGVmaW5lZCl9IFVybEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uPTI1MF0gQSBkdXJhdGlvbiBmb3IgdGlsZSBvcGFjaXR5XG4gKiB0cmFuc2l0aW9ucyBpbiBtaWxsaXNlY29uZHMuIEEgZHVyYXRpb24gb2YgMCBkaXNhYmxlcyB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9ZmFsc2VdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiB0aGUgbmVhcmVzdCBuZWlnaGJvciBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy5cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciB0aWxlcy5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIFRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gVGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGUodGlsZUNvb3JkLCBzdGF0ZSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNvb3JkID0gdGlsZUNvb3JkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBcImludGVyaW1cIiB0aWxlIGZvciB0aGlzIHRpbGUuIFRoZSBpbnRlcmltIHRpbGUgbWF5IGJlIHVzZWQgd2hpbGUgdGhpc1xuICAgICAgICAgKiBvbmUgaXMgbG9hZGluZywgZm9yIFwic21vb3RoXCIgdHJhbnNpdGlvbnMgd2hlbiBjaGFuZ2luZyBwYXJhbXMvZGltZW5zaW9uc1xuICAgICAgICAgKiBvbiB0aGUgc291cmNlLlxuICAgICAgICAgKiBAdHlwZSB7VGlsZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludGVyaW1UaWxlID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEga2V5IGFzc2lnbmVkIHRvIHRoZSB0aWxlLiBUaGlzIGlzIHVzZWQgYnkgdGhlIHRpbGUgc291cmNlIHRvIGRldGVybWluZVxuICAgICAgICAgKiBpZiB0aGlzIHRpbGUgY2FuIGVmZmVjdGl2ZWx5IGJlIHVzZWQsIG9yIGlmIGEgbmV3IHRpbGUgc2hvdWxkIGJlIGNyZWF0ZWRcbiAgICAgICAgICogYW5kIHRoaXMgb25lIGJlIHVzZWQgYXMgYW4gaW50ZXJpbSB0aWxlIGZvciB0aGlzIG5ldyB0aWxlLlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5ID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZHVyYXRpb24gZm9yIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2l0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRyYW5zaXRpb24gPT09IHVuZGVmaW5lZCA/IDI1MCA6IG9wdGlvbnMudHJhbnNpdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvb2t1cCBvZiBzdGFydCB0aW1lcyBmb3IgcmVuZGVyaW5nIHRyYW5zaXRpb25zLiAgSWYgdGhlIHN0YXJ0IHRpbWUgaXNcbiAgICAgICAgICogZXF1YWwgdG8gLTEsIHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zaXRpb25TdGFydHNfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludGVycG9sYXRlID0gISFvcHRpb25zLmludGVycG9sYXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgdGhlIHRpbGUgY2FjaGUgd2hlbiB0aGUgdGlsZSBpcyByZW1vdmVkIGZyb20gdGhlIGNhY2hlIGR1ZSB0byBleHBpcnlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ICsgJy8nICsgdGhpcy50aWxlQ29vcmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGludGVyaW0gdGlsZSBtb3N0IHN1aXRhYmxlIGZvciByZW5kZXJpbmcgdXNpbmcgdGhlIGNoYWluIG9mIGludGVyaW1cbiAgICAgKiB0aWxlcy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgIG1vc3QgcmVjZW50IHRpbGUgdGhhdCBoYXMgYmVlbiBsb2FkZWQsIGlmIG5vXG4gICAgICogc3VjaCB0aWxlIGV4aXN0cywgdGhlIG9yaWdpbmFsIHRpbGUgaXMgcmV0dXJuZWQuXG4gICAgICogQHJldHVybiB7IVRpbGV9IEJlc3QgdGlsZSBmb3IgcmVuZGVyaW5nLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEludGVyaW1UaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgICAgICAgIC8vZW1wdHkgY2hhaW5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcbiAgICAgICAgLy8gZmluZCB0aGUgZmlyc3QgbG9hZGVkIHRpbGUgYW5kIHJldHVybiBpdC4gU2luY2UgdGhlIGNoYWluIGlzIHNvcnRlZCBpblxuICAgICAgICAvLyBkZWNyZWFzaW5nIG9yZGVyIG9mIGNyZWF0aW9uIHRpbWUsIHRoZXJlIGlzIG5vIG5lZWQgdG8gc2VhcmNoIHRoZSByZW1haW5kZXJcbiAgICAgICAgLy8gb2YgdGhlIGxpc3QgKGFsbCB0aG9zZSB0aWxlcyBjb3JyZXNwb25kIHRvIG9sZGVyIHJlcXVlc3RzIGFuZCB3aWxsIGJlXG4gICAgICAgIC8vIGNsZWFuZWQgdXAgYnkgcmVmcmVzaEludGVyaW1DaGFpbilcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyB0aWxlIGltbWVkaWF0ZWx5IGluc3RlYWQgb2YgZmFkaW5nIGl0IGluIGFmdGVyIGxvYWRpbmcsIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW50ZXJpbSB0aWxlIGlzIGluIHBsYWNlIGFscmVhZHlcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25fID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgICB9IHdoaWxlICh0aWxlKTtcbiAgICAgICAgLy8gd2UgY2FuIG5vdCBmaW5kIGEgYmV0dGVyIHRpbGVcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHb2VzIHRocm91Z2ggdGhlIGNoYWluIG9mIGludGVyaW0gdGlsZXMgYW5kIGRpc2NhcmRzIHNlY3Rpb25zIG9mIHRoZSBjaGFpblxuICAgICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWxldmFudC5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5yZWZyZXNoSW50ZXJpbUNoYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7VGlsZX1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBwcmV2ID0gdGhpcztcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgLy93ZSBoYXZlIGEgbG9hZGVkIHRpbGUsIHdlIGNhbiBkaXNjYXJkIHRoZSByZXN0IG9mIHRoZSBsaXN0XG4gICAgICAgICAgICAgICAgLy93ZSB3b3VsZCBjb3VsZCBhYm9ydCBhbnkgTE9BRElORyB0aWxlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICAvL29sZGVyIHRoYW4gdGhpcyB0aWxlIChpLmUuIGFueSBMT0FESU5HIHRpbGUgZm9sbG93aW5nIHRoaXMgZW50cnkgaW4gdGhlIGNoYWluKVxuICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgICAgICAgLy9rZWVwIHRoaXMgTE9BRElORyB0aWxlIGFueSBsb2FkZWQgdGlsZXMgbGF0ZXIgaW4gdGhlIGNoYWluIGFyZVxuICAgICAgICAgICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUsIHNvIHdlJ3JlIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhlIHJlcXVlc3RcbiAgICAgICAgICAgICAgICBwcmV2ID0gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgIC8vdGhlIGhlYWQgb2YgdGhlIGxpc3QgaXMgdGhlIG1vc3QgY3VycmVudCB0aWxlLCB3ZSBkb24ndCBuZWVkXG4gICAgICAgICAgICAgICAgLy90byBzdGFydCBhbnkgb3RoZXIgcmVxdWVzdHMgZm9yIHRoaXMgY2hhaW5cbiAgICAgICAgICAgICAgICBwcmV2LmludGVyaW1UaWxlID0gdGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXYgPSB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGlsZSA9IHByZXYuaW50ZXJpbVRpbGU7XG4gICAgICAgIH0gd2hpbGUgKHRpbGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoaXMgdGlsZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRoZSB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldFRpbGVDb29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNvb3JkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhpcyB0aWxlLiBJZiB5b3Ugd3JpdGUgeW91ciBvd24ge0BsaW5rIG1vZHVsZTpvbC9UaWxlfkxvYWRGdW5jdGlvbiB0aWxlTG9hZEZ1bmN0aW9ufSAsXG4gICAgICogaXQgaXMgaW1wb3J0YW50IHRvIHNldCB0aGUgc3RhdGUgY29ycmVjdGx5IHRvIHtAbGluayBtb2R1bGU6b2wvVGlsZVN0YXRlfkVSUk9SfVxuICAgICAqIHdoZW4gdGhlIHRpbGUgY2Fubm90IGJlIGxvYWRlZC4gT3RoZXJ3aXNlIHRoZSB0aWxlIGNhbm5vdCBiZSByZW1vdmVkIGZyb21cbiAgICAgKiB0aGUgdGlsZSBxdWV1ZSBhbmQgd2lsbCBibG9jayBvdGhlciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSAhPT0gVGlsZVN0YXRlLkVSUk9SICYmIHRoaXMuc3RhdGUgPiBzdGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaWxlIGxvYWQgc2VxdWVuY2UgdmlvbGF0aW9uJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIG9yIHJldHJ5IGlmIGxvYWRpbmcgcHJldmlvdXNseSBmYWlsZWQuXG4gICAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYWxwaGEgdmFsdWUgZm9yIHJlbmRlcmluZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBUaGUgcmVuZGVyIGZyYW1lIHRpbWUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0QWxwaGEgPSBmdW5jdGlvbiAoaWQsIHRpbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXTtcbiAgICAgICAgaWYgKCFzdGFydCkge1xuICAgICAgICAgICAgc3RhcnQgPSB0aW1lO1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSBzdGFydDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGFydCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWx0YSA9IHRpbWUgLSBzdGFydCArIDEwMDAgLyA2MDsgLy8gYXZvaWQgcmVuZGVyaW5nIGF0IDBcbiAgICAgICAgaWYgKGRlbHRhID49IHRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlYXNlSW4oZGVsdGEgLyB0aGlzLnRyYW5zaXRpb25fKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiBhIHRpbGUgaXMgaW4gYW4gYWxwaGEgdHJhbnNpdGlvbi4gIEEgdGlsZSBpcyBjb25zaWRlcmVkIGluXG4gICAgICogdHJhbnNpdGlvbiBpZiB0aWxlLmdldEFscGhhKCkgaGFzIG5vdCB5ZXQgYmVlbiBjYWxsZWQgb3IgaGFzIGJlZW4gY2FsbGVkXG4gICAgICogYW5kIHJldHVybmVkIDEuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgaXMgaW4gdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5pblRyYW5zaXRpb24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdICE9PSAtMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmsgYSB0cmFuc2l0aW9uIGFzIGNvbXBsZXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmVuZFRyYW5zaXRpb24gPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgaWYgKHRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gLTE7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaWxlO1xufShFdmVudFRhcmdldCkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZUJhc2VcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4vdXRpbC5qcyc7XG4vKipcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgSW1hZ2VCYXNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbWFnZUJhc2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VCYXNlKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudCA9IGV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFBpeGVsUmF0aW8uXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5nZXRQaXhlbFJhdGlvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waXhlbFJhdGlvXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMucmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICByZXR1cm4gSW1hZ2VCYXNlO1xufShFdmVudFRhcmdldCkpO1xuZXhwb3J0IGRlZmF1bHQgSW1hZ2VCYXNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VCYXNlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEltYWdlQmFzZSBmcm9tICcuL0ltYWdlQmFzZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IHsgSU1BR0VfREVDT0RFIH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHsgZ2V0SGVpZ2h0IH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvSW1hZ2V+SW1hZ2V9IGZvciB0aGUgaW1hZ2UgYW5kIGFcbiAqIGB7c3RyaW5nfWAgZm9yIHRoZSBzcmMgYXMgYXJndW1lbnRzLiBJdCBpcyBzdXBwb3NlZCB0byBtYWtlIGl0IHNvIHRoZVxuICogdW5kZXJseWluZyBpbWFnZSB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlfkltYWdlI2dldEltYWdlfSBpcyBhc3NpZ25lZCB0aGVcbiAqIGNvbnRlbnQgc3BlY2lmaWVkIGJ5IHRoZSBzcmMuIElmIG5vdCBzcGVjaWZpZWQsIHRoZSBkZWZhdWx0IGlzXG4gKlxuICogICAgIGZ1bmN0aW9uKGltYWdlLCBzcmMpIHtcbiAqICAgICAgIGltYWdlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogICAgIH1cbiAqXG4gKiBQcm92aWRpbmcgYSBjdXN0b20gYGltYWdlTG9hZEZ1bmN0aW9uYCBjYW4gYmUgdXNlZnVsIHRvIGxvYWQgaW1hZ2VzIHdpdGhcbiAqIHBvc3QgcmVxdWVzdHMgb3IgLSBpbiBnZW5lcmFsIC0gdGhyb3VnaCBYSFIgcmVxdWVzdHMsIHdoZXJlIHRoZSBzcmMgb2YgdGhlXG4gKiBpbWFnZSBlbGVtZW50IHdvdWxkIGJlIHNldCB0byBhIGRhdGEgVVJJIHdoZW4gdGhlIGNvbnRlbnQgaXMgbG9hZGVkLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihJbWFnZVdyYXBwZXIsIHN0cmluZyk6IHZvaWR9IExvYWRGdW5jdGlvblxuICogQGFwaVxuICovXG52YXIgSW1hZ2VXcmFwcGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbWFnZVdyYXBwZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBJbWFnZSBzb3VyY2UgVVJJLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7TG9hZEZ1bmN0aW9ufSBpbWFnZUxvYWRGdW5jdGlvbiBJbWFnZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlV3JhcHBlcihleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHNyYywgY3Jvc3NPcmlnaW4sIGltYWdlTG9hZEZ1bmN0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgSW1hZ2VTdGF0ZS5JRExFKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNyY18gPSBzcmM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChjcm9zc09yaWdpbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgX3RoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/ZnVuY3Rpb24oKTp2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLklETEU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TG9hZEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VMb2FkRnVuY3Rpb25fID0gaW1hZ2VMb2FkRnVuY3Rpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhY2tzIGxvYWRpbmcgb3IgcmVhZCBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VFcnJvcl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkVSUk9SO1xuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHN1Y2Nlc3NmdWwgaW1hZ2UgbG9hZC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUxvYWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IGdldEhlaWdodCh0aGlzLmV4dGVudCkgLyB0aGlzLmltYWdlXy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuTE9BREVEO1xuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgaW1hZ2Ugb3IgcmV0cnkgaWYgbG9hZGluZyBwcmV2aW91c2x5IGZhaWxlZC5cbiAgICAgKiBMb2FkaW5nIGlzIHRha2VuIGNhcmUgb2YgYnkgdGhlIHRpbGUgcXVldWUsIGFuZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzXG4gICAgICogb25seSBuZWVkZWQgZm9yIHByZWxvYWRpbmcgb3IgZm9yIHJlbG9hZGluZyBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IEltYWdlU3RhdGUuSURMRSB8fCB0aGlzLnN0YXRlID09IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VMb2FkRnVuY3Rpb25fKHRoaXMsIHRoaXMuc3JjXyk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkltYWdlKHRoaXMuaW1hZ2VfLCB0aGlzLmhhbmRsZUltYWdlTG9hZF8uYmluZCh0aGlzKSwgdGhpcy5oYW5kbGVJbWFnZUVycm9yXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuc2V0SW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBpbWFnZTtcbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KHRoaXMuZXh0ZW50KSAvIHRoaXMuaW1hZ2VfLmhlaWdodDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc2NhcmRzIGV2ZW50IGhhbmRsZXJzIHdoaWNoIGxpc3RlbiBmb3IgbG9hZCBjb21wbGV0aW9uIG9yIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS51bmxpc3RlbkltYWdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudW5saXN0ZW5fKSB7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXygpO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSW1hZ2VXcmFwcGVyO1xufShJbWFnZUJhc2UpKTtcbi8qKlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlIGVsZW1lbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6YW55fSBsb2FkSGFuZGxlciBMb2FkIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbigpOmFueX0gZXJyb3JIYW5kbGVyIEVycm9yIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHJldHVybiB7ZnVuY3Rpb24oKTp2b2lkfSBDYWxsYmFjayB0byBzdG9wIGxpc3RlbmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbkltYWdlKGltYWdlLCBsb2FkSGFuZGxlciwgZXJyb3JIYW5kbGVyKSB7XG4gICAgdmFyIGltZyA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKGltYWdlKTtcbiAgICB2YXIgbGlzdGVuaW5nID0gdHJ1ZTtcbiAgICB2YXIgZGVjb2RpbmcgPSBmYWxzZTtcbiAgICB2YXIgbG9hZGVkID0gZmFsc2U7XG4gICAgdmFyIGxpc3RlbmVyS2V5cyA9IFtcbiAgICAgICAgbGlzdGVuT25jZShpbWcsIEV2ZW50VHlwZS5MT0FELCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKCFkZWNvZGluZykge1xuICAgICAgICAgICAgICAgIGxvYWRIYW5kbGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgIF07XG4gICAgaWYgKGltZy5zcmMgJiYgSU1BR0VfREVDT0RFKSB7XG4gICAgICAgIGRlY29kaW5nID0gdHJ1ZTtcbiAgICAgICAgaW1nXG4gICAgICAgICAgICAuZGVjb2RlKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChsaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmluZykge1xuICAgICAgICAgICAgICAgIGlmIChsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ySGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsaXN0ZW5lcktleXMucHVzaChsaXN0ZW5PbmNlKGltZywgRXZlbnRUeXBlLkVSUk9SLCBlcnJvckhhbmRsZXIpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVubGlzdGVuKCkge1xuICAgICAgICBsaXN0ZW5pbmcgPSBmYWxzZTtcbiAgICAgICAgbGlzdGVuZXJLZXlzLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IEltYWdlV3JhcHBlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VUaWxlXG4gKi9cbmltcG9ydCBUaWxlIGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGxpc3RlbkltYWdlIH0gZnJvbSAnLi9JbWFnZS5qcyc7XG52YXIgSW1hZ2VUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbWFnZVRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGUgbG9hZCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5PcHRpb25zfSBbb3B0X29wdGlvbnNdIFRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVRpbGUodGlsZUNvb3JkLCBzdGF0ZSwgc3JjLCBjcm9zc09yaWdpbiwgdGlsZUxvYWRGdW5jdGlvbiwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUNvb3JkLCBzdGF0ZSwgb3B0X29wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNyb3NzT3JpZ2luXyA9IGNyb3NzT3JpZ2luO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW1hZ2UgVVJJXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zcmNfID0gc3JjO1xuICAgICAgICBfdGhpcy5rZXkgPSBzcmM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2Z1bmN0aW9uKCk6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVMb2FkRnVuY3Rpb25fID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEhUTUwgaW1hZ2UgZWxlbWVudCBmb3IgdGhpcyB0aWxlIChtYXkgYmUgYSBDYW52YXMsIEltYWdlLCBvciBWaWRlbykuXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhbiBIVE1MIGltYWdlIGVsZW1lbnQgZm9yIHRoaXMgdGlsZSAobWF5IGJlIGEgQ2FudmFzIG9yIHByZWxvYWRlZCBJbWFnZSkuXG4gICAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmltYWdlXyA9IGdldEJsYW5rSW1hZ2UoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKHRoaXMuaW1hZ2VfKTtcbiAgICAgICAgaWYgKGltYWdlLm5hdHVyYWxXaWR0aCAmJiBpbWFnZS5uYXR1cmFsSGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5JRExFO1xuICAgICAgICAgICAgdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luXyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gdGhpcy5jcm9zc09yaWdpbl87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBsaXN0ZW5JbWFnZSh0aGlzLmltYWdlXywgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc2NhcmRzIGV2ZW50IGhhbmRsZXJzIHdoaWNoIGxpc3RlbiBmb3IgbG9hZCBjb21wbGV0aW9uIG9yIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS51bmxpc3RlbkltYWdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudW5saXN0ZW5fKSB7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXygpO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSW1hZ2VUaWxlO1xufShUaWxlKSk7XG4vKipcbiAqIEdldCBhIDEtcGl4ZWwgYmxhbmsgaW1hZ2UuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQmxhbmsgaW1hZ2UuXG4gKi9cbmZ1bmN0aW9uIGdldEJsYW5rSW1hZ2UoKSB7XG4gICAgdmFyIGN0eCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMCknO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICByZXR1cm4gY3R4LmNhbnZhcztcbn1cbmV4cG9ydCBkZWZhdWx0IEltYWdlVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb25cbiAqL1xuaW1wb3J0IHsgYm91bmRpbmdFeHRlbnQsIGNyZWF0ZUVtcHR5LCBleHRlbmRDb29yZGluYXRlLCBnZXRBcmVhLCBnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCwgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHQsIGdldFdpZHRoLCBpbnRlcnNlY3RzLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBnZXRUcmFuc2Zvcm0gfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGxvZzIsIG1vZHVsbyB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBTaW5nbGUgdHJpYW5nbGU7IGNvbnNpc3RzIG9mIDMgc291cmNlIHBvaW50cyBhbmQgMyB0YXJnZXQgcG9pbnRzLlxuICogQHR5cGVkZWYge09iamVjdH0gVHJpYW5nbGVcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gc291cmNlIFNvdXJjZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gdGFyZ2V0IFRhcmdldC5cbiAqL1xuLyoqXG4gKiBNYXhpbXVtIG51bWJlciBvZiBzdWJkaXZpc2lvbiBzdGVwcyBkdXJpbmcgcmFzdGVyIHJlcHJvamVjdGlvbiB0cmlhbmd1bGF0aW9uLlxuICogUHJldmVudHMgaGlnaCBtZW1vcnkgdXNhZ2UgYW5kIGxhcmdlIG51bWJlciBvZiBwcm9qNCBjYWxscyAoZm9yIGNlcnRhaW5cbiAqIHRyYW5zZm9ybWF0aW9ucyBhbmQgYXJlYXMpLiBBdCBtb3N0IGAyKigyXnRoaXMpYCB0cmlhbmdsZXMgYXJlIGNyZWF0ZWQgZm9yXG4gKiBlYWNoIHRyaWFuZ3VsYXRlZCBleHRlbnQgKHRpbGUvaW1hZ2UpLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIE1BWF9TVUJESVZJU0lPTiA9IDEwO1xuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZiB0cmlhbmdsZSByZWxhdGl2ZSB0byB3b3JsZCB3aWR0aC4gV2hlbiB0cmFuc2Zvcm1pbmdcbiAqIGNvcm5lcnMgb2Ygd29ybGQgZXh0ZW50IGJldHdlZW4gY2VydGFpbiBwcm9qZWN0aW9ucywgdGhlIHJlc3VsdGluZ1xuICogdHJpYW5ndWxhdGlvbiBzZWVtcyB0byBoYXZlIHplcm8gZXJyb3IgYW5kIG5vIHN1YmRpdmlzaW9uIGlzIHBlcmZvcm1lZC4gSWZcbiAqIHRoZSB0cmlhbmdsZSB3aWR0aCBpcyBtb3JlIHRoYW4gdGhpcyAocmVsYXRpdmUgdG8gd29ybGQgd2lkdGg7IDAtMSksXG4gKiBzdWJkaXZpc29uIGlzIGZvcmNlZCAodXAgdG8gYE1BWF9TVUJESVZJU0lPTmApLiBEZWZhdWx0IGlzIGAwLjI1YC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfVFJJQU5HTEVfV0lEVEggPSAwLjI1O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBjb250YWluaW5nIHRyaWFuZ3VsYXRpb24gb2YgdGhlIGdpdmVuIHRhcmdldCBleHRlbnQuXG4gKiBVc2VkIGZvciBkZXRlcm1pbmluZyBzb3VyY2UgZGF0YSBhbmQgdGhlIHJlcHJvamVjdGlvbiBpdHNlbGYuXG4gKi9cbnZhciBUcmlhbmd1bGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50IHRvIHRyaWFuZ3VsYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4U291cmNlRXh0ZW50IE1heGltYWwgc291cmNlIGV4dGVudCB0aGF0IGNhbiBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvclRocmVzaG9sZCBBY2NlcHRhYmxlIGVycm9yIChpbiBzb3VyY2UgdW5pdHMpLlxuICAgICAqIEBwYXJhbSB7P251bWJlcn0gb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiBUaGUgKG9wdGlvbmFsKSByZXNvbHV0aW9uIG9mIHRoZSBkZXN0aW5hdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldEV4dGVudCwgbWF4U291cmNlRXh0ZW50LCBlcnJvclRocmVzaG9sZCwgb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VQcm9qXyA9IHNvdXJjZVByb2o7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldFByb2pfID0gdGFyZ2V0UHJvajtcbiAgICAgICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi9cbiAgICAgICAgdmFyIHRyYW5zZm9ybUludkNhY2hlID0ge307XG4gICAgICAgIHZhciB0cmFuc2Zvcm1JbnYgPSBnZXRUcmFuc2Zvcm0odGhpcy50YXJnZXRQcm9qXywgdGhpcy5zb3VyY2VQcm9qXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBBIGNvb3JkaW5hdGUuXG4gICAgICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhbnNmb3JtSW52XyA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gY1swXSArICcvJyArIGNbMV07XG4gICAgICAgICAgICBpZiAoIXRyYW5zZm9ybUludkNhY2hlW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1JbnZDYWNoZVtrZXldID0gdHJhbnNmb3JtSW52KGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUludkNhY2hlW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4U291cmNlRXh0ZW50XyA9IG1heFNvdXJjZUV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF8gPSBlcnJvclRocmVzaG9sZCAqIGVycm9yVGhyZXNob2xkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFRyaWFuZ2xlPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpYW5nbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHRyaWFuZ3VsYXRpb24gY3Jvc3NlcyBlZGdlIG9mIHRoZSBzb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhbldyYXBYSW5Tb3VyY2VfID1cbiAgICAgICAgICAgIHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgICAgICEhbWF4U291cmNlRXh0ZW50ICYmXG4gICAgICAgICAgICAgICAgISF0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpICYmXG4gICAgICAgICAgICAgICAgZ2V0V2lkdGgobWF4U291cmNlRXh0ZW50KSA9PSBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA9IHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXRXb3JsZFdpZHRoXyA9IHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wUmlnaHQgPSBnZXRUb3BSaWdodCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Cb3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbkJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BMZWZ0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wTGVmdCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BSaWdodCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcFJpZ2h0KTtcbiAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tUmlnaHQpO1xuICAgICAgICB2YXIgc291cmNlQm90dG9tTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvbkJvdHRvbUxlZnQpO1xuICAgICAgICAvKlxuICAgICAgICAgKiBUaGUgbWF4U3ViZGl2aXNpb24gY29udHJvbHMgaG93IG1hbnkgc3BsaXR0aW5ncyBvZiB0aGUgdGFyZ2V0IGFyZWEgY2FuXG4gICAgICAgICAqIGJlIGRvbmUuIFRoZSBpZGVhIGhlcmUgaXMgdG8gZG8gYSBsaW5lYXIgbWFwcGluZyBvZiB0aGUgdGFyZ2V0IGFyZWFzXG4gICAgICAgICAqIGJ1dCB0aGUgYWN0dWFsIG92ZXJhbCByZXByb2plY3Rpb24gKGNhbiBiZSkgZXh0cmVtZWx5IG5vbi1saW5lYXIuIFRoZVxuICAgICAgICAgKiBkZWZhdWx0IHZhbHVlIG9mIE1BWF9TVUJESVZJU0lPTiB3YXMgY2hvc2VuIGJhc2VkIG9uIG1hcHBpbmcgYSAyNTZ4MjU2XG4gICAgICAgICAqIHRpbGUgc2l6ZS4gSG93ZXZlciB0aGlzIGZ1bmN0aW9uIGlzIGFsc28gY2FsbGVkIHRvIHJlbWFwIGNhbnZhcyByZW5kZXJlZFxuICAgICAgICAgKiBsYXllcnMgd2hpY2ggY2FuIGJlIG11Y2ggbGFyZ2VyLiBUaGlzIGNhbGN1bGF0aW9uIGluY3JlYXNlcyB0aGUgbWF4U3ViZGl2aXNpb25cbiAgICAgICAgICogdmFsdWUgYnkgdGhlIHJpZ2h0IGZhY3RvciBzbyB0aGF0IGVhY2ggMjU2eDI1NiBwaXhlbCBhcmVhIGhhc1xuICAgICAgICAgKiBNQVhfU1VCRElWSVNJT04gZGl2aXNpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIG1heFN1YmRpdmlzaW9uID0gTUFYX1NVQkRJVklTSU9OICtcbiAgICAgICAgICAgIChvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgPyBNYXRoLm1heCgwLCBNYXRoLmNlaWwobG9nMihnZXRBcmVhKHRhcmdldEV4dGVudCkgL1xuICAgICAgICAgICAgICAgICAgICAob3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiAqXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uICpcbiAgICAgICAgICAgICAgICAgICAgICAgIDI1NiAqXG4gICAgICAgICAgICAgICAgICAgICAgICAyNTYpKSkpXG4gICAgICAgICAgICAgICAgOiAwKTtcbiAgICAgICAgdGhpcy5hZGRRdWFkXyhkZXN0aW5hdGlvblRvcExlZnQsIGRlc3RpbmF0aW9uVG9wUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tTGVmdCwgc291cmNlVG9wTGVmdCwgc291cmNlVG9wUmlnaHQsIHNvdXJjZUJvdHRvbVJpZ2h0LCBzb3VyY2VCb3R0b21MZWZ0LCBtYXhTdWJkaXZpc2lvbik7XG4gICAgICAgIGlmICh0aGlzLndyYXBzWEluU291cmNlXykge1xuICAgICAgICAgICAgdmFyIGxlZnRCb3VuZF8xID0gSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID0gTWF0aC5taW4obGVmdEJvdW5kXzEsIHRyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTaGlmdCB0cmlhbmdsZXMgdG8gYmUgYXMgY2xvc2UgdG8gYGxlZnRCb3VuZGAgYXMgcG9zc2libGVcbiAgICAgICAgICAgIC8vIChpZiB0aGUgZGlzdGFuY2UgaXMgbW9yZSB0aGFuIGB3b3JsZFdpZHRoIC8gMmAgaXQgY2FuIGJlIGNsb3Nlci5cbiAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLm1heCh0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzBdKSAtXG4gICAgICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RyaWFuZ2xlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzBdWzFdXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVsxXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzJdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMV1dLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMF1bMF0gLSBsZWZ0Qm91bmRfMSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVsxXVswXSAtIGxlZnRCb3VuZF8xID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzFdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzJdWzBdIC0gbGVmdEJvdW5kXzEgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVbMl1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBSYXJlbHkgKGlmIHRoZSBleHRlbnQgY29udGFpbnMgYm90aCB0aGUgZGF0ZWxpbmUgYW5kIHByaW1lIG1lcmlkaWFuKVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2hpZnQgY2FuIGluIHR1cm4gYnJlYWsgc29tZSB0cmlhbmdsZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIERldGVjdCB0aGlzIGhlcmUgYW5kIGRvbid0IHNoaWZ0IGluIHN1Y2ggY2FzZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW5YID0gTWF0aC5taW4obmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhYID0gTWF0aC5tYXgobmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhYIC0gbWluWCA8IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2UgPSBuZXdUcmlhbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0cmlhbmdsZSB0byB0aGUgdHJpYW5ndWxhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFRyaWFuZ2xlXyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBhU3JjLCBiU3JjLCBjU3JjKSB7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzXy5wdXNoKHtcbiAgICAgICAgICAgIHNvdXJjZTogW2FTcmMsIGJTcmMsIGNTcmNdLFxuICAgICAgICAgICAgdGFyZ2V0OiBbYSwgYiwgY10sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBxdWFkIChwb2ludHMgaW4gY2xvY2std2lzZSBvcmRlcikgdG8gdGhlIHRyaWFuZ3VsYXRpb25cbiAgICAgKiAoYW5kIHJlcHJvamVjdHMgdGhlIHZlcnRpY2VzKSBpZiB2YWxpZC5cbiAgICAgKiBQZXJmb3JtcyBxdWFkIHN1YmRpdmlzaW9uIGlmIG5lZWRlZCB0byBpbmNyZWFzZSBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZCBUaGUgdGFyZ2V0IGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZFNyYyBUaGUgc291cmNlIGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3ViZGl2aXNpb24gTWF4aW1hbCBhbGxvd2VkIHN1YmRpdmlzaW9uIG9mIHRoZSBxdWFkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuYWRkUXVhZF8gPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgYVNyYywgYlNyYywgY1NyYywgZFNyYywgbWF4U3ViZGl2aXNpb24pIHtcbiAgICAgICAgdmFyIHNvdXJjZVF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYVNyYywgYlNyYywgY1NyYywgZFNyY10pO1xuICAgICAgICB2YXIgc291cmNlQ292ZXJhZ2VYID0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoX1xuICAgICAgICAgICAgPyBnZXRXaWR0aChzb3VyY2VRdWFkRXh0ZW50KSAvIHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIHNvdXJjZVdvcmxkV2lkdGggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuc291cmNlV29ybGRXaWR0aF8pO1xuICAgICAgICAvLyB3aGVuIHRoZSBxdWFkIGlzIHdyYXBwZWQgaW4gdGhlIHNvdXJjZSBwcm9qZWN0aW9uXG4gICAgICAgIC8vIGl0IGNvdmVycyBtb3N0IG9mIHRoZSBwcm9qZWN0aW9uIGV4dGVudCwgYnV0IG5vdCBmdWxseVxuICAgICAgICB2YXIgd3JhcHNYID0gdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPiAwLjUgJiZcbiAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA8IDE7XG4gICAgICAgIHZhciBuZWVkc1N1YmRpdmlzaW9uID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldFByb2pfLmlzR2xvYmFsKCkgJiYgdGhpcy50YXJnZXRXb3JsZFdpZHRoXykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2EsIGIsIGMsIGRdKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Q292ZXJhZ2VYID0gZ2V0V2lkdGgodGFyZ2V0UXVhZEV4dGVudCkgLyB0aGlzLnRhcmdldFdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHwgbmVlZHNTdWJkaXZpc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghd3JhcHNYICYmIHRoaXMuc291cmNlUHJval8uaXNHbG9iYWwoKSAmJiBzb3VyY2VDb3ZlcmFnZVgpIHtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID1cbiAgICAgICAgICAgICAgICAgICAgc291cmNlQ292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8IG5lZWRzU3ViZGl2aXNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uICYmIHRoaXMubWF4U291cmNlRXh0ZW50Xykge1xuICAgICAgICAgICAgaWYgKGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMF0pICYmXG4gICAgICAgICAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsxXSkgJiZcbiAgICAgICAgICAgICAgICBpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzJdKSAmJlxuICAgICAgICAgICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbM10pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHNvdXJjZVF1YWRFeHRlbnQsIHRoaXMubWF4U291cmNlRXh0ZW50XykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hvbGUgcXVhZCBvdXRzaWRlIHNvdXJjZSBwcm9qZWN0aW9uIGV4dGVudCAtPiBpZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNOb3RGaW5pdGUgPSAwO1xuICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgIGlmICghaXNGaW5pdGUoYVNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYVNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1sxXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQgbWlnaHQgYmUgdGhlIGNhc2UgdGhhdCBvbmx5IDEgb2YgdGhlIHBvaW50cyBpcyBpbmZpbml0ZS4gSW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGNhbiBkcmF3IGEgc2luZ2xlIHRyaWFuZ2xlIHdpdGggdGhlIG90aGVyIHRocmVlIHBvaW50c1xuICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGFTcmNbMF0pIHx8ICFpc0Zpbml0ZShhU3JjWzFdKSA/IDggOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShiU3JjWzBdKSB8fCAhaXNGaW5pdGUoYlNyY1sxXSkgPyA0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoY1NyY1swXSkgfHwgIWlzRmluaXRlKGNTcmNbMV0pID8gMiA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGRTcmNbMF0pIHx8ICFpc0Zpbml0ZShkU3JjWzFdKSA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm90RmluaXRlICE9IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gWyhhWzBdICsgY1swXSkgLyAyLCAoYVsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZW50ZXIpO1xuICAgICAgICAgICAgICAgIHZhciBkeCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFc3RpbVggPSAobW9kdWxvKGFTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsbyhjU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgMjtcbiAgICAgICAgICAgICAgICAgICAgZHggPSBjZW50ZXJTcmNFc3RpbVggLSBtb2R1bG8oY2VudGVyU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGR4ID0gKGFTcmNbMF0gKyBjU3JjWzBdKSAvIDIgLSBjZW50ZXJTcmNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkeSA9IChhU3JjWzFdICsgY1NyY1sxXSkgLyAyIC0gY2VudGVyU3JjWzFdO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gY2VudGVyU3JjRXJyb3JTcXVhcmVkID4gdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoYVswXSAtIGNbMF0pIDw9IE1hdGguYWJzKGFbMV0gLSBjWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzcGxpdCBob3Jpem9udGFsbHkgKHRvcCAmIGJvdHRvbSlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJjID0gWyhiWzBdICsgY1swXSkgLyAyLCAoYlsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBiY1NyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhiYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IFsoZFswXSArIGFbMF0pIC8gMiwgKGRbMV0gKyBhWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGFTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oZGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGEsIGIsIGJjLCBkYSwgYVNyYywgYlNyYywgYmNTcmMsIGRhU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGRhLCBiYywgYywgZCwgZGFTcmMsIGJjU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQgdmVydGljYWxseSAobGVmdCAmIHJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICB2YXIgYWIgPSBbKGFbMF0gKyBiWzBdKSAvIDIsIChhWzFdICsgYlsxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFiU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGFiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNkID0gWyhjWzBdICsgZFswXSkgLyAyLCAoY1sxXSArIGRbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZFNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYSwgYWIsIGNkLCBkLCBhU3JjLCBhYlNyYywgY2RTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYWIsIGIsIGMsIGNkLCBhYlNyYywgYlNyYywgY1NyYywgY2RTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuV3JhcFhJblNvdXJjZV8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhhY3RseSB6ZXJvIG9yIG9uZSBvZiAqU3JjIGlzIG5vdCBmaW5pdGVcbiAgICAgICAgLy8gVGhlIHRyaWFuZ2xlcyBtdXN0IGhhdmUgdGhlIGRpYWdvbmFsIGxpbmUgYXMgdGhlIGZpcnN0IHNpZGVcbiAgICAgICAgLy8gVGhpcyBpcyB0byBhbGxvdyBlYXN5IGNvZGUgaW4gcmVwcm9qLnMgdG8gbWFrZSBpdCBzdHJhaWdodCBmb3IgYnJva2VuXG4gICAgICAgIC8vIGJyb3dzZXJzIHRoYXQgY2FuJ3QgaGFuZGxlIGRpYWdvbmFsIGNsaXBwaW5nXG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGIpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGQsIGFTcmMsIGNTcmMsIGRTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGUpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGIsIGFTcmMsIGNTcmMsIGJTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05vdEZpbml0ZSkge1xuICAgICAgICAgICAgLy8gVHJ5IHRoZSBvdGhlciB0d28gdHJpYW5nbGVzXG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhkKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYSwgYlNyYywgZFNyYywgYVNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHg3KSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYywgYlNyYywgZFNyYywgY1NyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgZXh0ZW50IG9mIHRoZSAnc291cmNlJyBjb29yZGluYXRlcyBmcm9tIGFsbCB0aGUgdHJpYW5nbGVzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gQ2FsY3VsYXRlZCBleHRlbnQuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuY2FsY3VsYXRlU291cmNlRXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzBdKTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMV0pO1xuICAgICAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1syXSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8VHJpYW5nbGU+fSBBcnJheSBvZiB0aGUgY2FsY3VsYXRlZCB0cmlhbmdsZXMuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuZ2V0VHJpYW5nbGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmlhbmdsZXNfO1xuICAgIH07XG4gICAgcmV0dXJuIFRyaWFuZ3VsYXRpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgVHJpYW5ndWxhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyaWFuZ3VsYXRpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvalxuICovXG5pbXBvcnQgeyBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgfSBmcm9tICcuL3JlbmRlcmVyL2NhbnZhcy9jb21tb24uanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgY29udGFpbnNDb29yZGluYXRlLCBjcmVhdGVFbXB0eSwgZXh0ZW5kLCBmb3JFYWNoQ29ybmVyLCBnZXRDZW50ZXIsIGdldEhlaWdodCwgZ2V0VG9wTGVmdCwgZ2V0V2lkdGgsIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgZ2V0UG9pbnRSZXNvbHV0aW9uLCB0cmFuc2Zvcm0gfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IHsgc29sdmVMaW5lYXJTeXN0ZW0gfSBmcm9tICcuL21hdGguanMnO1xudmFyIGJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXztcbi8qKlxuICogVGhpcyBkcmF3cyBhIHNtYWxsIHRyaWFuZ2xlIGludG8gYSBjYW52YXMgYnkgc2V0dGluZyB0aGUgdHJpYW5nbGUgYXMgdGhlIGNsaXAgcmVnaW9uXG4gKiBhbmQgdGhlbiBkcmF3aW5nIGEgKHRvbyBsYXJnZSkgcmVjdGFuZ2xlXG4gKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGN0eCBUaGUgY29udGV4dCBpbiB3aGljaCB0byBkcmF3IHRoZSB0cmlhbmdsZVxuICogQHBhcmFtIHtudW1iZXJ9IHUxIFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIHNlY29uZCBwb2ludC4gVGhlIGZpcnN0IHBvaW50IGlzIDAsMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2MSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBzZWNvbmQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdTIgVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgdGhpcmQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdjIgVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgdGhpcmQgcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGRyYXdUZXN0VHJpYW5nbGUoY3R4LCB1MSwgdjEsIHUyLCB2Mikge1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKDAsIDApO1xuICAgIGN0eC5saW5lVG8odTEsIHYxKTtcbiAgICBjdHgubGluZVRvKHUyLCB2Mik7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LmNsaXAoKTtcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgTWF0aC5tYXgodTEsIHUyKSArIDEsIE1hdGgubWF4KHYxLCB2MikpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG59XG4vKipcbiAqIEdpdmVuIHRoZSBkYXRhIGZyb20gZ2V0SW1hZ2VEYXRhLCBzZWUgaWYgdGhlIHJpZ2h0IHZhbHVlcyBhcHBlYXIgYXQgdGhlIHByb3ZpZGVkIG9mZnNldC5cbiAqIFJldHVybnMgdHJ1ZSBpZiBlaXRoZXIgdGhlIGNvbG9yIG9yIHRyYW5zcGFyZW5jeSBpcyBvZmZcbiAqXG4gKiBAcGFyYW0ge1VpbnQ4Q2xhbXBlZEFycmF5fSBkYXRhIFRoZSBkYXRhIHJldHVybmVkIGZyb20gZ2V0SW1hZ2VEYXRhXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IFRoZSBwaXhlbCBvZmZzZXQgZnJvbSB0aGUgc3RhcnQgb2YgZGF0YS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIGRpYWdvbmFsIHJlbmRlcmluZyBpcyBicm9rZW5cbiAqL1xuZnVuY3Rpb24gdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgb2Zmc2V0KSB7XG4gICAgLy8gdGhlIHZhbHVlcyBvdWdodCB0byBiZSBjbG9zZSB0byB0aGUgcmdiYSgyMTAsIDAsIDAsIDAuNzUpXG4gICAgcmV0dXJuIChNYXRoLmFicyhkYXRhW29mZnNldCAqIDRdIC0gMjEwKSA+IDIgfHxcbiAgICAgICAgTWF0aC5hYnMoZGF0YVtvZmZzZXQgKiA0ICsgM10gLSAwLjc1ICogMjU1KSA+IDIpO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBjdXJyZW50IGJyb3dzZXIgY29uZmlndXJhdGlvbiBjYW4gcmVuZGVyIHRyaWFuZ3VsYXIgY2xpcCByZWdpb25zIGNvcnJlY3RseS5cbiAqIFRoaXMgdmFsdWUgaXMgY2FjaGVkIHNvIHRoZSBmdW5jdGlvbiBpcyBvbmx5IGV4cGVuc2l2ZSB0aGUgZmlyc3QgdGltZSBjYWxsZWQuXG4gKiBGaXJlZm94IG9uIFdpbmRvd3MgKGFzIG9mIG5vdykgZG9lcyBub3QgaWYgSFdBIGlzIGVuYWJsZWQuIFNlZSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNjA2OTc2XG4gKiBJRSBhbHNvIGRvZXNuJ3QuIENocm9tZSB3b3JrcywgYW5kIGV2ZXJ5dGhpbmcgc2VlbXMgdG8gd29yayBvbiBPU1ggYW5kIEFuZHJvaWQuIFRoaXMgZnVuY3Rpb24gY2FjaGVzIHRoZVxuICogcmVzdWx0LiBJIHN1cHBvc2UgdGhhdCBpdCBpcyBjb25jZWl2YWJseSBwb3NzaWJsZSB0aGF0IGEgYnJvd3NlciBtaWdodCBmbGlwIG1vZGVzIHdoaWxlIHRoZSBhcHAgaXNcbiAqIHJ1bm5pbmcsIGJ1dCBsZXRzIGhvcGUgbm90LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIERpYWdvbmFsIFJlbmRlcmluZyBpcyBicm9rZW4uXG4gKi9cbmZ1bmN0aW9uIGlzQnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoKSB7XG4gICAgaWYgKGJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBjdHggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKS5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2xpZ2h0ZXInO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjEwLCAwLCAwLCAwLjc1KSc7XG4gICAgICAgIGRyYXdUZXN0VHJpYW5nbGUoY3R4LCA0LCA1LCA0LCAwKTtcbiAgICAgICAgZHJhd1Rlc3RUcmlhbmdsZShjdHgsIDQsIDUsIDAsIDUpO1xuICAgICAgICB2YXIgZGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgMywgMykuZGF0YTtcbiAgICAgICAgYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfID1cbiAgICAgICAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDApIHx8XG4gICAgICAgICAgICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgNCkgfHxcbiAgICAgICAgICAgICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCA4KTtcbiAgICB9XG4gICAgcmV0dXJuIGJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXztcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBpZGVhbCByZXNvbHV0aW9uIHRvIHVzZSBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gYWNoaWV2ZVxuICogcGl4ZWwgbWFwcGluZyBhcyBjbG9zZSBhcyBwb3NzaWJsZSB0byAxOjEgZHVyaW5nIHJlcHJvamVjdGlvbi5cbiAqIFRoZSByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWQgcmVnYXJkbGVzcyBvZiB3aGF0IHJlc29sdXRpb25zXG4gKiBhcmUgYWN0dWFsbHkgYXZhaWxhYmxlIGluIHRoZSBkYXRhc2V0IChUaWxlR3JpZCwgSW1hZ2UsIC4uLikuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGFyZ2V0Q2VudGVyIFRhcmdldCBjZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGJlc3QgcmVzb2x1dGlvbiB0byB1c2UuIENhbiBiZSArLUluZmluaXR5LCBOYU4gb3IgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0Q2VudGVyLCB0YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgdmFyIHNvdXJjZUNlbnRlciA9IHRyYW5zZm9ybSh0YXJnZXRDZW50ZXIsIHRhcmdldFByb2osIHNvdXJjZVByb2opO1xuICAgIC8vIGNhbGN1bGF0ZSB0aGUgaWRlYWwgcmVzb2x1dGlvbiBvZiB0aGUgc291cmNlIGRhdGFcbiAgICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IGdldFBvaW50UmVzb2x1dGlvbih0YXJnZXRQcm9qLCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRDZW50ZXIpO1xuICAgIHZhciB0YXJnZXRNZXRlcnNQZXJVbml0ID0gdGFyZ2V0UHJvai5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgaWYgKHRhcmdldE1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzb3VyY2VSZXNvbHV0aW9uICo9IHRhcmdldE1ldGVyc1BlclVuaXQ7XG4gICAgfVxuICAgIHZhciBzb3VyY2VNZXRlcnNQZXJVbml0ID0gc291cmNlUHJvai5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgaWYgKHNvdXJjZU1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzb3VyY2VSZXNvbHV0aW9uIC89IHNvdXJjZU1ldGVyc1BlclVuaXQ7XG4gICAgfVxuICAgIC8vIEJhc2VkIG9uIHRoZSBwcm9qZWN0aW9uIHByb3BlcnRpZXMsIHRoZSBwb2ludCByZXNvbHV0aW9uIGF0IHRoZSBzcGVjaWZpZWRcbiAgICAvLyBjb29yZGluYXRlcyBtYXkgYmUgc2xpZ2h0bHkgZGlmZmVyZW50LiBXZSBuZWVkIHRvIHJldmVyc2UtY29tcGVuc2F0ZSB0aGlzXG4gICAgLy8gaW4gb3JkZXIgdG8gYWNoaWV2ZSBvcHRpbWFsIHJlc3VsdHMuXG4gICAgdmFyIHNvdXJjZUV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gICAgaWYgKCFzb3VyY2VFeHRlbnQgfHwgY29udGFpbnNDb29yZGluYXRlKHNvdXJjZUV4dGVudCwgc291cmNlQ2VudGVyKSkge1xuICAgICAgICB2YXIgY29tcGVuc2F0aW9uRmFjdG9yID0gZ2V0UG9pbnRSZXNvbHV0aW9uKHNvdXJjZVByb2osIHNvdXJjZVJlc29sdXRpb24sIHNvdXJjZUNlbnRlcikgL1xuICAgICAgICAgICAgc291cmNlUmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKGlzRmluaXRlKGNvbXBlbnNhdGlvbkZhY3RvcikgJiYgY29tcGVuc2F0aW9uRmFjdG9yID4gMCkge1xuICAgICAgICAgICAgc291cmNlUmVzb2x1dGlvbiAvPSBjb21wZW5zYXRpb25GYWN0b3I7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZVJlc29sdXRpb247XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgaWRlYWwgcmVzb2x1dGlvbiB0byB1c2UgZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGFjaGlldmVcbiAqIHBpeGVsIG1hcHBpbmcgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gMToxIGR1cmluZyByZXByb2plY3Rpb24uXG4gKiBUaGUgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCByZXNvbHV0aW9uc1xuICogYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBpbiB0aGUgZGF0YXNldCAoVGlsZUdyaWQsIEltYWdlLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudFxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiZXN0IHJlc29sdXRpb24gdG8gdXNlLiBDYW4gYmUgKy1JbmZpbml0eSwgTmFOIG9yIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldEV4dGVudCwgdGFyZ2V0UmVzb2x1dGlvbikge1xuICAgIHZhciB0YXJnZXRDZW50ZXIgPSBnZXRDZW50ZXIodGFyZ2V0RXh0ZW50KTtcbiAgICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0Q2VudGVyLCB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICBpZiAoIWlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pIHx8IHNvdXJjZVJlc29sdXRpb24gPD0gMCkge1xuICAgICAgICBmb3JFYWNoQ29ybmVyKHRhcmdldEV4dGVudCwgZnVuY3Rpb24gKGNvcm5lcikge1xuICAgICAgICAgICAgc291cmNlUmVzb2x1dGlvbiA9IGNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgY29ybmVyLCB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSAmJiBzb3VyY2VSZXNvbHV0aW9uID4gMDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2VSZXNvbHV0aW9uO1xufVxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBJbWFnZUV4dGVudFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcHJvcGVydHkge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gKi9cbi8qKlxuICogUmVuZGVycyB0aGUgc291cmNlIGRhdGEgaW50byBuZXcgY2FudmFzIGJhc2VkIG9uIHRoZSB0cmlhbmd1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgdGhlIGNhbnZhcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICogQHBhcmFtIHtudW1iZXJ9IHNvdXJjZVJlc29sdXRpb24gU291cmNlIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gc291cmNlRXh0ZW50IEV4dGVudCBvZiB0aGUgZGF0YSBzb3VyY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9yZXByb2ovVHJpYW5ndWxhdGlvbi5qc1wiKS5kZWZhdWx0fSB0cmlhbmd1bGF0aW9uIENhbGN1bGF0ZWQgdHJpYW5ndWxhdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8SW1hZ2VFeHRlbnQ+fSBzb3VyY2VzIEFycmF5IG9mIHNvdXJjZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIEd1dHRlciBvZiB0aGUgc291cmNlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yZW5kZXJFZGdlc10gUmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0X2ludGVycG9sYXRlXSBVc2UgbGluZWFyIGludGVycG9sYXRpb24gd2hlbiByZXNhbXBsaW5nLlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IENhbnZhcyB3aXRoIHJlcHJvamVjdGVkIGRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIod2lkdGgsIGhlaWdodCwgcGl4ZWxSYXRpbywgc291cmNlUmVzb2x1dGlvbiwgc291cmNlRXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRFeHRlbnQsIHRyaWFuZ3VsYXRpb24sIHNvdXJjZXMsIGd1dHRlciwgb3B0X3JlbmRlckVkZ2VzLCBvcHRfaW50ZXJwb2xhdGUpIHtcbiAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiB3aWR0aCksIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIGhlaWdodCkpO1xuICAgIGlmICghb3B0X2ludGVycG9sYXRlKSB7XG4gICAgICAgIGFzc2lnbihjb250ZXh0LCBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQpO1xuICAgIH1cbiAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY2FudmFzO1xuICAgIH1cbiAgICBjb250ZXh0LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuICAgIGZ1bmN0aW9uIHBpeGVsUm91bmQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodmFsdWUgKiBwaXhlbFJhdGlvKSAvIHBpeGVsUmF0aW87XG4gICAgfVxuICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2xpZ2h0ZXInO1xuICAgIHZhciBzb3VyY2VEYXRhRXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNyYywgaSwgYXJyKSB7XG4gICAgICAgIGV4dGVuZChzb3VyY2VEYXRhRXh0ZW50LCBzcmMuZXh0ZW50KTtcbiAgICB9KTtcbiAgICB2YXIgY2FudmFzV2lkdGhJblVuaXRzID0gZ2V0V2lkdGgoc291cmNlRGF0YUV4dGVudCk7XG4gICAgdmFyIGNhbnZhc0hlaWdodEluVW5pdHMgPSBnZXRIZWlnaHQoc291cmNlRGF0YUV4dGVudCk7XG4gICAgdmFyIHN0aXRjaENvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoTWF0aC5yb3VuZCgocGl4ZWxSYXRpbyAqIGNhbnZhc1dpZHRoSW5Vbml0cykgLyBzb3VyY2VSZXNvbHV0aW9uKSwgTWF0aC5yb3VuZCgocGl4ZWxSYXRpbyAqIGNhbnZhc0hlaWdodEluVW5pdHMpIC8gc291cmNlUmVzb2x1dGlvbikpO1xuICAgIGlmICghb3B0X2ludGVycG9sYXRlKSB7XG4gICAgICAgIGFzc2lnbihzdGl0Y2hDb250ZXh0LCBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQpO1xuICAgIH1cbiAgICB2YXIgc3RpdGNoU2NhbGUgPSBwaXhlbFJhdGlvIC8gc291cmNlUmVzb2x1dGlvbjtcbiAgICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNyYywgaSwgYXJyKSB7XG4gICAgICAgIHZhciB4UG9zID0gc3JjLmV4dGVudFswXSAtIHNvdXJjZURhdGFFeHRlbnRbMF07XG4gICAgICAgIHZhciB5UG9zID0gLShzcmMuZXh0ZW50WzNdIC0gc291cmNlRGF0YUV4dGVudFszXSk7XG4gICAgICAgIHZhciBzcmNXaWR0aCA9IGdldFdpZHRoKHNyYy5leHRlbnQpO1xuICAgICAgICB2YXIgc3JjSGVpZ2h0ID0gZ2V0SGVpZ2h0KHNyYy5leHRlbnQpO1xuICAgICAgICAvLyBUaGlzIHRlc3Qgc2hvdWxkIG5ldmVyIGZhaWwgLS0gYnV0IGl0IGRvZXMuIE5lZWQgdG8gZmluZCBhIGZpeCB0aGUgdXBzdHJlYW0gY29uZGl0aW9uXG4gICAgICAgIGlmIChzcmMuaW1hZ2Uud2lkdGggPiAwICYmIHNyYy5pbWFnZS5oZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICBzdGl0Y2hDb250ZXh0LmRyYXdJbWFnZShzcmMuaW1hZ2UsIGd1dHRlciwgZ3V0dGVyLCBzcmMuaW1hZ2Uud2lkdGggLSAyICogZ3V0dGVyLCBzcmMuaW1hZ2UuaGVpZ2h0IC0gMiAqIGd1dHRlciwgeFBvcyAqIHN0aXRjaFNjYWxlLCB5UG9zICogc3RpdGNoU2NhbGUsIHNyY1dpZHRoICogc3RpdGNoU2NhbGUsIHNyY0hlaWdodCAqIHN0aXRjaFNjYWxlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciB0YXJnZXRUb3BMZWZ0ID0gZ2V0VG9wTGVmdCh0YXJnZXRFeHRlbnQpO1xuICAgIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAvKiBDYWxjdWxhdGUgYWZmaW5lIHRyYW5zZm9ybSAoc3JjIC0+IGRzdClcbiAgICAgICAgICogUmVzdWx0aW5nIG1hdHJpeCBjYW4gYmUgdXNlZCB0byB0cmFuc2Zvcm0gY29vcmRpbmF0ZVxuICAgICAgICAgKiBmcm9tIGBzb3VyY2VQcm9qZWN0aW9uYCB0byBkZXN0aW5hdGlvbiBwaXhlbHMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRvIG9wdGltaXplIG51bWJlciBvZiBjb250ZXh0IGNhbGxzIGFuZCBpbmNyZWFzZSBudW1lcmljYWwgc3RhYmlsaXR5LFxuICAgICAgICAgKiB3ZSBhbHNvIGRvIHRoZSBmb2xsb3dpbmcgb3BlcmF0aW9uczpcbiAgICAgICAgICogdHJhbnMoLXRvcExlZnRFeHRlbnRDb3JuZXIpLCBzY2FsZSgxIC8gdGFyZ2V0UmVzb2x1dGlvbiksIHNjYWxlKDEsIC0xKVxuICAgICAgICAgKiBoZXJlIGJlZm9yZSBzb2x2aW5nIHRoZSBsaW5lYXIgc3lzdGVtIHNvIFt1aSwgdmldIGFyZSBwaXhlbCBjb29yZGluYXRlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogU3JjIHBvaW50czogeGksIHlpXG4gICAgICAgICAqIERzdCBwb2ludHM6IHVpLCB2aVxuICAgICAgICAgKiBBZmZpbmUgY29lZmZpY2llbnRzOiBhaWpcbiAgICAgICAgICpcbiAgICAgICAgICogfCB4MCB5MCAxICAwICAwIDAgfCAgIHxhMDB8ICAgfHUwfFxuICAgICAgICAgKiB8IHgxIHkxIDEgIDAgIDAgMCB8ICAgfGEwMXwgICB8dTF8XG4gICAgICAgICAqIHwgeDIgeTIgMSAgMCAgMCAwIHwgeCB8YTAyfCA9IHx1MnxcbiAgICAgICAgICogfCAgMCAgMCAwIHgwIHkwIDEgfCAgIHxhMTB8ICAgfHYwfFxuICAgICAgICAgKiB8ICAwICAwIDAgeDEgeTEgMSB8ICAgfGExMXwgICB8djF8XG4gICAgICAgICAqIHwgIDAgIDAgMCB4MiB5MiAxIHwgICB8YTEyfCAgIHx2MnxcbiAgICAgICAgICovXG4gICAgICAgIHZhciBzb3VyY2UgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0cmlhbmdsZS50YXJnZXQ7XG4gICAgICAgIHZhciB4MCA9IHNvdXJjZVswXVswXSwgeTAgPSBzb3VyY2VbMF1bMV07XG4gICAgICAgIHZhciB4MSA9IHNvdXJjZVsxXVswXSwgeTEgPSBzb3VyY2VbMV1bMV07XG4gICAgICAgIHZhciB4MiA9IHNvdXJjZVsyXVswXSwgeTIgPSBzb3VyY2VbMl1bMV07XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgaXMgb24gcGl4ZWwgYm91bmRhcmllc1xuICAgICAgICB2YXIgdTAgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdjAgPSBwaXhlbFJvdW5kKC0odGFyZ2V0WzBdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHUxID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzFdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHYxID0gcGl4ZWxSb3VuZCgtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB1MiA9IHBpeGVsUm91bmQoKHRhcmdldFsyXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2MiA9IHBpeGVsUm91bmQoLSh0YXJnZXRbMl1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICAvLyBTaGlmdCBhbGwgdGhlIHNvdXJjZSBwb2ludHMgdG8gaW1wcm92ZSBudW1lcmljYWwgc3RhYmlsaXR5XG4gICAgICAgIC8vIG9mIGFsbCB0aGUgc3Vic2VxdWVudCBjYWxjdWxhdGlvbnMuIFRoZSBbeDAsIHkwXSBpcyB1c2VkIGhlcmUuXG4gICAgICAgIC8vIFRoaXMgaXMgYWxzbyB1c2VkIHRvIHNpbXBsaWZ5IHRoZSBsaW5lYXIgc3lzdGVtLlxuICAgICAgICB2YXIgc291cmNlTnVtZXJpY2FsU2hpZnRYID0geDA7XG4gICAgICAgIHZhciBzb3VyY2VOdW1lcmljYWxTaGlmdFkgPSB5MDtcbiAgICAgICAgeDAgPSAwO1xuICAgICAgICB5MCA9IDA7XG4gICAgICAgIHgxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WDtcbiAgICAgICAgeTEgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRZO1xuICAgICAgICB4MiAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFg7XG4gICAgICAgIHkyIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcbiAgICAgICAgdmFyIGF1Z21lbnRlZE1hdHJpeCA9IFtcbiAgICAgICAgICAgIFt4MSwgeTEsIDAsIDAsIHUxIC0gdTBdLFxuICAgICAgICAgICAgW3gyLCB5MiwgMCwgMCwgdTIgLSB1MF0sXG4gICAgICAgICAgICBbMCwgMCwgeDEsIHkxLCB2MSAtIHYwXSxcbiAgICAgICAgICAgIFswLCAwLCB4MiwgeTIsIHYyIC0gdjBdLFxuICAgICAgICBdO1xuICAgICAgICB2YXIgYWZmaW5lQ29lZnMgPSBzb2x2ZUxpbmVhclN5c3RlbShhdWdtZW50ZWRNYXRyaXgpO1xuICAgICAgICBpZiAoIWFmZmluZUNvZWZzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGlmIChpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKCkgfHwgIW9wdF9pbnRlcnBvbGF0ZSkge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgYWxsIGxpbmVzIGFyZSBob3Jpem9udGFsIG9yIHZlcnRpY2FsXG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZGlhZ29uYWwgbGluZS4gRG8gaXQgaW4gNCBzdGVwc1xuICAgICAgICAgICAgdmFyIHN0ZXBzID0gNDtcbiAgICAgICAgICAgIHZhciB1ZCA9IHUwIC0gdTE7XG4gICAgICAgICAgICB2YXIgdmQgPSB2MCAtIHYxO1xuICAgICAgICAgICAgZm9yICh2YXIgc3RlcCA9IDA7IHN0ZXAgPCBzdGVwczsgc3RlcCsrKSB7XG4gICAgICAgICAgICAgICAgLy8gR28gaG9yaXpvbnRhbGx5XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKHN0ZXAgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIC8vIEdvIHZlcnRpY2FsbHlcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCAhPSBzdGVwcyAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGFyZSBhbG1vc3QgYXQgdTByLCB2MHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNmb3JtKGFmZmluZUNvZWZzWzBdLCBhZmZpbmVDb2Vmc1syXSwgYWZmaW5lQ29lZnNbMV0sIGFmZmluZUNvZWZzWzNdLCB1MCwgdjApO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShzb3VyY2VEYXRhRXh0ZW50WzBdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRYLCBzb3VyY2VEYXRhRXh0ZW50WzNdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRZKTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzb3VyY2VSZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbywgLXNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2Uoc3RpdGNoQ29udGV4dC5jYW52YXMsIDAsIDApO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9KTtcbiAgICBpZiAob3B0X3JlbmRlckVkZ2VzKSB7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciB1MCA9ICh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjAgPSAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MSA9ICh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjEgPSAtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MiA9ICh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjIgPSAtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXByb2ouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovVGlsZVxuICovXG5pbXBvcnQgeyBFUlJPUl9USFJFU0hPTEQgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGUgZnJvbSAnLi4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVHJpYW5ndWxhdGlvbiBmcm9tICcuL1RyaWFuZ3VsYXRpb24uanMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiwgcmVuZGVyIGFzIHJlbmRlclJlcHJvamVjdGVkLCB9IGZyb20gJy4uL3JlcHJvai5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0QXJlYSwgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIpIDogaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBGdW5jdGlvblR5cGVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBlbmNhcHN1bGF0aW5nIHNpbmdsZSByZXByb2plY3RlZCB0aWxlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGVJbWFnZX5UaWxlSW1hZ2V9LlxuICpcbiAqL1xudmFyIFJlcHJvalRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlcHJvalRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVRpbGVHcmlkIFNvdXJjZSB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRhcmdldFRpbGVHcmlkIFRhcmdldCB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHdyYXBwZWRUaWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZSB3cmFwcGVkIGluIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZSB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uVHlwZX0gZ2V0VGlsZUZ1bmN0aW9uXG4gICAgICogICAgIEZ1bmN0aW9uIHJldHVybmluZyBzb3VyY2UgdGlsZXMgKHosIHgsIHksIHBpeGVsUmF0aW8pLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2Vycm9yVGhyZXNob2xkXSBBY2NlcHRhYmxlIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcHgpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yZW5kZXJFZGdlc10gUmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaW50ZXJwb2xhdGVdIFVzZSBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aGVuIHJlc2FtcGxpbmcuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVwcm9qVGlsZShzb3VyY2VQcm9qLCBzb3VyY2VUaWxlR3JpZCwgdGFyZ2V0UHJvaiwgdGFyZ2V0VGlsZUdyaWQsIHRpbGVDb29yZCwgd3JhcHBlZFRpbGVDb29yZCwgcGl4ZWxSYXRpbywgZ3V0dGVyLCBnZXRUaWxlRnVuY3Rpb24sIG9wdF9lcnJvclRocmVzaG9sZCwgb3B0X3JlbmRlckVkZ2VzLCBvcHRfaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUNvb3JkLCBUaWxlU3RhdGUuSURMRSwgeyBpbnRlcnBvbGF0ZTogISFvcHRfaW50ZXJwb2xhdGUgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyRWRnZXNfID0gb3B0X3JlbmRlckVkZ2VzICE9PSB1bmRlZmluZWQgPyBvcHRfcmVuZGVyRWRnZXMgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZ3V0dGVyXyA9IGd1dHRlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbnZhc18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VUaWxlR3JpZF8gPSBzb3VyY2VUaWxlR3JpZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0VGlsZUdyaWRfID0gdGFyZ2V0VGlsZUdyaWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndyYXBwZWRUaWxlQ29vcmRfID0gd3JhcHBlZFRpbGVDb29yZCA/IHdyYXBwZWRUaWxlQ29vcmQgOiB0aWxlQ29vcmQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VUaWxlc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlWl8gPSAwO1xuICAgICAgICB2YXIgdGFyZ2V0RXh0ZW50ID0gdGFyZ2V0VGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KF90aGlzLndyYXBwZWRUaWxlQ29vcmRfKTtcbiAgICAgICAgdmFyIG1heFRhcmdldEV4dGVudCA9IF90aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRFeHRlbnQoKTtcbiAgICAgICAgdmFyIG1heFNvdXJjZUV4dGVudCA9IF90aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRFeHRlbnQoKTtcbiAgICAgICAgdmFyIGxpbWl0ZWRUYXJnZXRFeHRlbnQgPSBtYXhUYXJnZXRFeHRlbnRcbiAgICAgICAgICAgID8gZ2V0SW50ZXJzZWN0aW9uKHRhcmdldEV4dGVudCwgbWF4VGFyZ2V0RXh0ZW50KVxuICAgICAgICAgICAgOiB0YXJnZXRFeHRlbnQ7XG4gICAgICAgIGlmIChnZXRBcmVhKGxpbWl0ZWRUYXJnZXRFeHRlbnQpID09PSAwKSB7XG4gICAgICAgICAgICAvLyBUaWxlIGlzIGNvbXBsZXRlbHkgb3V0c2lkZSByYW5nZSAtPiBFTVBUWVxuICAgICAgICAgICAgLy8gVE9ETzogaXMgaXQgYWN0dWFsbHkgY29ycmVjdCB0aGF0IHRoZSBzb3VyY2UgZXZlbiBjcmVhdGVzIHRoZSB0aWxlID9cbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2VQcm9qRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgaWYgKHNvdXJjZVByb2pFeHRlbnQpIHtcbiAgICAgICAgICAgIGlmICghbWF4U291cmNlRXh0ZW50KSB7XG4gICAgICAgICAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gc291cmNlUHJvakV4dGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1heFNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihtYXhTb3VyY2VFeHRlbnQsIHNvdXJjZVByb2pFeHRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB0YXJnZXRSZXNvbHV0aW9uID0gdGFyZ2V0VGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihfdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXSk7XG4gICAgICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBsaW1pdGVkVGFyZ2V0RXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSB8fCBzb3VyY2VSZXNvbHV0aW9uIDw9IDApIHtcbiAgICAgICAgICAgIC8vIGludmFsaWQgc291cmNlUmVzb2x1dGlvbiAtPiBFTVBUWVxuICAgICAgICAgICAgLy8gcHJvYmFibHkgZWRnZXMgb2YgdGhlIHByb2plY3Rpb25zIHdoZW4gbm8gZXh0ZW50IGlzIGRlZmluZWRcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlcnJvclRocmVzaG9sZEluUGl4ZWxzID0gb3B0X2Vycm9yVGhyZXNob2xkICE9PSB1bmRlZmluZWQgPyBvcHRfZXJyb3JUaHJlc2hvbGQgOiBFUlJPUl9USFJFU0hPTEQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IWltcG9ydChcIi4vVHJpYW5ndWxhdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJpYW5ndWxhdGlvbl8gPSBuZXcgVHJpYW5ndWxhdGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBsaW1pdGVkVGFyZ2V0RXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQsIHNvdXJjZVJlc29sdXRpb24gKiBlcnJvclRocmVzaG9sZEluUGl4ZWxzLCB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgaWYgKF90aGlzLnRyaWFuZ3VsYXRpb25fLmdldFRyaWFuZ2xlcygpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gbm8gdmFsaWQgdHJpYW5nbGVzIC0+IEVNUFRZXG4gICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5zb3VyY2VaXyA9IHNvdXJjZVRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHNvdXJjZVJlc29sdXRpb24pO1xuICAgICAgICB2YXIgc291cmNlRXh0ZW50ID0gX3RoaXMudHJpYW5ndWxhdGlvbl8uY2FsY3VsYXRlU291cmNlRXh0ZW50KCk7XG4gICAgICAgIGlmIChtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2VQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VFeHRlbnRbMV0gPSBjbGFtcChzb3VyY2VFeHRlbnRbMV0sIG1heFNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzNdKTtcbiAgICAgICAgICAgICAgICBzb3VyY2VFeHRlbnRbM10gPSBjbGFtcChzb3VyY2VFeHRlbnRbM10sIG1heFNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzNdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudCA9IGdldEludGVyc2VjdGlvbihzb3VyY2VFeHRlbnQsIG1heFNvdXJjZUV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnZXRBcmVhKHNvdXJjZUV4dGVudCkpIHtcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNvdXJjZVJhbmdlID0gc291cmNlVGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihzb3VyY2VFeHRlbnQsIF90aGlzLnNvdXJjZVpfKTtcbiAgICAgICAgICAgIGZvciAodmFyIHNyY1ggPSBzb3VyY2VSYW5nZS5taW5YOyBzcmNYIDw9IHNvdXJjZVJhbmdlLm1heFg7IHNyY1grKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHNyY1kgPSBzb3VyY2VSYW5nZS5taW5ZOyBzcmNZIDw9IHNvdXJjZVJhbmdlLm1heFk7IHNyY1krKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGlsZSA9IGdldFRpbGVGdW5jdGlvbihfdGhpcy5zb3VyY2VaXywgc3JjWCwgc3JjWSwgcGl4ZWxSYXRpbyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zb3VyY2VUaWxlc18ucHVzaCh0aWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChfdGhpcy5zb3VyY2VUaWxlc18ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEhUTUwgQ2FudmFzIGVsZW1lbnQgZm9yIHRoaXMgdGlsZS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzLlxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS5yZXByb2plY3RfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICB0aGlzLnNvdXJjZVRpbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgc291cmNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW50OiB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdGlsZS5nZXRJbWFnZSgpLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPSAwO1xuICAgICAgICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRVJST1I7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgeiA9IHRoaXMud3JhcHBlZFRpbGVDb29yZF9bMF07XG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFRpbGVTaXplKHopO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdHlwZW9mIHNpemUgPT09ICdudW1iZXInID8gc2l6ZSA6IHNpemVbMF07XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdHlwZW9mIHNpemUgPT09ICdudW1iZXInID8gc2l6ZSA6IHNpemVbMV07XG4gICAgICAgICAgICB2YXIgdGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgICAgICB2YXIgc291cmNlUmVzb2x1dGlvbiA9IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFJlc29sdXRpb24odGhpcy5zb3VyY2VaXyk7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0RXh0ZW50ID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZUNvb3JkRXh0ZW50KHRoaXMud3JhcHBlZFRpbGVDb29yZF8pO1xuICAgICAgICAgICAgdGhpcy5jYW52YXNfID0gcmVuZGVyUmVwcm9qZWN0ZWQod2lkdGgsIGhlaWdodCwgdGhpcy5waXhlbFJhdGlvXywgc291cmNlUmVzb2x1dGlvbiwgdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0RXh0ZW50KCksIHRhcmdldFJlc29sdXRpb24sIHRhcmdldEV4dGVudCwgdGhpcy50cmlhbmd1bGF0aW9uXywgc291cmNlcywgdGhpcy5ndXR0ZXJfLCB0aGlzLnJlbmRlckVkZ2VzXywgdGhpcy5pbnRlcnBvbGF0ZSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgICAgIHZhciBsZWZ0VG9Mb2FkXzEgPSAwO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSB8fCBzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0VG9Mb2FkXzErKztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZUxpc3RlbktleV8xID0gbGlzdGVuKHRpbGUsIEV2ZW50VHlwZS5DSEFOR0UsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoc291cmNlTGlzdGVuS2V5XzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRUb0xvYWRfMS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmxpc3RlblNvdXJjZXNfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0XygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18ucHVzaChzb3VyY2VMaXN0ZW5LZXlfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMucmVwcm9qZWN0Xy5iaW5kKHRoaXMpLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS51bmxpc3RlblNvdXJjZXNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcHJvalRpbGU7XG59KFRpbGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlcHJvalRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtYXhpbXVtIGFsbG93ZWQgdGhyZXNob2xkICAoaW4gcGl4ZWxzKSBmb3IgcmVwcm9qZWN0aW9uXG4gKiB0cmlhbmd1bGF0aW9uLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBFUlJPUl9USFJFU0hPTEQgPSAwLjU7XG4vKipcbiAqIEVuYWJsZSBhdXRvbWF0aWMgcmVwcm9qZWN0aW9uIG9mIHJhc3RlciBzb3VyY2VzLiBEZWZhdWx0IGlzIGB0cnVlYC5cbiAqIFRPRE86IGRlY2lkZSBpZiB3ZSB3YW50IHRvIGV4cG9zZSB0aGlzIGFzIGEgYnVpbGQgZmxhZyBvciByZW1vdmUgaXRcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9MUlVDYWNoZVxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRW50cnlcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBrZXlfIEtleS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBuZXdlciBOZXdlci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvbGRlciBPbGRlci5cbiAqIEBwcm9wZXJ0eSB7Kn0gdmFsdWVfIFZhbHVlLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudHMgYSBMZWFzdC1SZWNlbnRseS1Vc2VkIGNhY2hlIHdoZXJlIHRoZSBrZXlzIGRvIG5vdCBjb25mbGljdCB3aXRoXG4gKiBPYmplY3QncyBwcm9wZXJ0aWVzIChlLmcuICdoYXNPd25Qcm9wZXJ0eScgaXMgbm90IGFsbG93ZWQgYXMgYSBrZXkpLiBFeHBpcmluZ1xuICogaXRlbXMgZnJvbSB0aGUgY2FjaGUgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSB1c2VyLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIExSVUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2hpZ2hXYXRlck1hcmtdIEhpZ2ggd2F0ZXIgbWFyay5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMUlVDYWNoZShvcHRfaGlnaFdhdGVyTWFyaykge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVzaXJlZCBtYXggY2FjaGUgc2l6ZSBhZnRlciBleHBpcmVDYWNoZSgpLiBJZiBzZXQgdG8gMCwgbm8gY2FjaGUgZW50cmllc1xuICAgICAgICAgKiB3aWxsIGJlIHBydW5lZCBhdCBhbGwuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPVxuICAgICAgICAgICAgb3B0X2hpZ2hXYXRlck1hcmsgIT09IHVuZGVmaW5lZCA/IG9wdF9oaWdoV2F0ZXJNYXJrIDogMjA0ODtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEVudHJ5Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW50cmllc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/RW50cnl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoV2F0ZXJNYXJrID4gMCAmJiB0aGlzLmdldENvdW50KCkgPiB0aGlzLmhpZ2hXYXRlck1hcms7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY291bnRfID0gMDtcbiAgICAgICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgICAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50cmllc18uaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgc3RyaW5nLCBMUlVDYWNoZTxUPik6ID99IGYgVGhlIGZ1bmN0aW9uXG4gICAgICogICAgIHRvIGNhbGwgZm9yIGV2ZXJ5IGVudHJ5IGZyb20gdGhlIG9sZGVzdCB0byB0aGUgbmV3ZXIuIFRoaXMgZnVuY3Rpb24gdGFrZXNcbiAgICAgKiAgICAgMyBhcmd1bWVudHMgKHRoZSBlbnRyeSB2YWx1ZSwgdGhlIGVudHJ5IGtleSBhbmQgdGhlIExSVUNhY2hlIG9iamVjdCkuXG4gICAgICogICAgIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICAgICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICAgICAgICBmKGVudHJ5LnZhbHVlXywgZW50cnkua2V5XywgdGhpcyk7XG4gICAgICAgICAgICBlbnRyeSA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRfb3B0aW9uc10gT3B0aW9ucyAocmVzZXJ2ZWQgZm9yIHN1YmNsYXNzZXMpLlxuICAgICAqIEByZXR1cm4ge1R9IFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgICAgIGFzc2VydChlbnRyeSAhPT0gdW5kZWZpbmVkLCAxNSk7IC8vIFRyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZVxuICAgICAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAodGhpcy5vbGRlc3RfLm5ld2VyKTtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5uZXdlciA9IG51bGw7XG4gICAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy5uZXdlc3RfO1xuICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBlbnRyeTtcbiAgICAgICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW4gZW50cnkgZnJvbSB0aGUgY2FjaGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgZW50cnkga2V5LlxuICAgICAqIEByZXR1cm4ge1R9IFRoZSByZW1vdmVkIGVudHJ5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgYXNzZXJ0KGVudHJ5ICE9PSB1bmRlZmluZWQsIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgICAgIGlmIChlbnRyeSA9PT0gdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkub2xkZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm5ld2VyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjtcbiAgICAgICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgLS10aGlzLmNvdW50XztcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQ291bnQuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3VudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBLZXlzLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5cyA9IG5ldyBBcnJheSh0aGlzLmNvdW50Xyk7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGVudHJ5O1xuICAgICAgICBmb3IgKGVudHJ5ID0gdGhpcy5uZXdlc3RfOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5vbGRlcikge1xuICAgICAgICAgICAga2V5c1tpKytdID0gZW50cnkua2V5XztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PFQ+fSBWYWx1ZXMuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheSh0aGlzLmNvdW50Xyk7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGVudHJ5O1xuICAgICAgICBmb3IgKGVudHJ5ID0gdGhpcy5uZXdlc3RfOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5vbGRlcikge1xuICAgICAgICAgICAgdmFsdWVzW2krK10gPSBlbnRyeS52YWx1ZV87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1R9IExhc3QgdmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRlc3RfLnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gTGFzdCBrZXkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRlc3RfLmtleV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGtleSBvZiB0aGUgbmV3ZXN0IGl0ZW0gaW4gdGhlIGNhY2hlLiAgVGhyb3dzIGlmIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuZXdlc3Qga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wZWVrRmlyc3RLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld2VzdF8ua2V5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICAgICAgZGVsZXRlIHRoaXMuZW50cmllc19bZW50cnkua2V5X107XG4gICAgICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5uZXdlcik7XG4gICAgICAgIGlmICghdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC0tdGhpcy5jb3VudF87XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5nZXQoa2V5KTsgLy8gdXBkYXRlIGBuZXdlc3RfYFxuICAgICAgICB0aGlzLmVudHJpZXNfW2tleV0udmFsdWVfID0gdmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBhc3NlcnQoIShrZXkgaW4gdGhpcy5lbnRyaWVzXyksIDE2KTsgLy8gVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5XG4gICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgIGtleV86IGtleSxcbiAgICAgICAgICAgIG5ld2VyOiBudWxsLFxuICAgICAgICAgICAgb2xkZXI6IHRoaXMubmV3ZXN0XyxcbiAgICAgICAgICAgIHZhbHVlXzogdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IGVudHJ5O1xuICAgICAgICB0aGlzLmVudHJpZXNfW2tleV0gPSBlbnRyeTtcbiAgICAgICAgKyt0aGlzLmNvdW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG1heGltdW0gbnVtYmVyIG9mIGVudHJpZXMgZm9yIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBDYWNoZSBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9IHNpemU7XG4gICAgfTtcbiAgICByZXR1cm4gTFJVQ2FjaGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgTFJVQ2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MUlVDYWNoZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWNvb3JkXG4gKi9cbi8qKlxuICogQW4gYXJyYXkgb2YgdGhyZWUgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIGxvY2F0aW9uIG9mIGEgdGlsZSBpbiBhIHRpbGVcbiAqIGdyaWQuIFRoZSBvcmRlciBpcyBgemAgKHpvb20gbGV2ZWwpLCBgeGAgKGNvbHVtbiksIGFuZCBgeWAgKHJvdykuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gVGlsZUNvb3JkXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKHosIHgsIHksIG9wdF90aWxlQ29vcmQpIHtcbiAgICBpZiAob3B0X3RpbGVDb29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF90aWxlQ29vcmRbMF0gPSB6O1xuICAgICAgICBvcHRfdGlsZUNvb3JkWzFdID0geDtcbiAgICAgICAgb3B0X3RpbGVDb29yZFsyXSA9IHk7XG4gICAgICAgIHJldHVybiBvcHRfdGlsZUNvb3JkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFt6LCB4LCB5XTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5WlhZKHosIHgsIHkpIHtcbiAgICByZXR1cm4geiArICcvJyArIHggKyAnLycgKyB5O1xufVxuLyoqXG4gKiBHZXQgdGhlIGtleSBmb3IgYSB0aWxlIGNvb3JkLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaGUgdGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5KHRpbGVDb29yZCkge1xuICAgIHJldHVybiBnZXRLZXlaWFkodGlsZUNvb3JkWzBdLCB0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG59XG4vKipcbiAqIEdldCB0aGUgdGlsZSBjYWNoZSBrZXkgZm9yIGEgdGlsZSBrZXkgb2J0YWluZWQgdGhyb3VnaCBgdGlsZS5nZXRLZXkoKWAuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGlsZUtleSBUaGUgdGlsZSBrZXkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjYWNoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZUtleUZvclRpbGVLZXkodGlsZUtleSkge1xuICAgIHZhciBfYSA9IHRpbGVLZXlcbiAgICAgICAgLnN1YnN0cmluZyh0aWxlS2V5Lmxhc3RJbmRleE9mKCcvJykgKyAxLCB0aWxlS2V5Lmxlbmd0aClcbiAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgLm1hcChOdW1iZXIpLCB6ID0gX2FbMF0sIHggPSBfYVsxXSwgeSA9IF9hWzJdO1xuICAgIHJldHVybiBnZXRLZXlaWFkoeiwgeCwgeSk7XG59XG4vKipcbiAqIEdldCBhIHRpbGUgY29vcmQgZ2l2ZW4gYSBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSB0aWxlIGNvb3JkIGtleS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGhlIHRpbGUgY29vcmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tS2V5KGtleSkge1xuICAgIHJldHVybiBrZXkuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkLlxuICogQHJldHVybiB7bnVtYmVyfSBIYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzaCh0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gKHRpbGVDb29yZFsxXSA8PCB0aWxlQ29vcmRbMF0pICsgdGlsZUNvb3JkWzJdO1xufVxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7IWltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBjb29yZGluYXRlIGlzIHdpdGhpbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpIHtcbiAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICB2YXIgeCA9IHRpbGVDb29yZFsxXTtcbiAgICB2YXIgeSA9IHRpbGVDb29yZFsyXTtcbiAgICBpZiAodGlsZUdyaWQuZ2V0TWluWm9vbSgpID4geiB8fCB6ID4gdGlsZUdyaWQuZ2V0TWF4Wm9vbSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgaWYgKCF0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlLmNvbnRhaW5zWFkoeCwgeSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWNvb3JkLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVGlsZUNhY2hlXG4gKi9cbmltcG9ydCBMUlVDYWNoZSBmcm9tICcuL3N0cnVjdHMvTFJVQ2FjaGUuanMnO1xuaW1wb3J0IHsgZnJvbUtleSwgZ2V0S2V5IH0gZnJvbSAnLi90aWxlY29vcmQuanMnO1xudmFyIFRpbGVDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUNhY2hlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZUNhY2hlLnByb3RvdHlwZS5leHBpcmVDYWNoZSA9IGZ1bmN0aW9uICh1c2VkVGlsZXMpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLnBlZWtMYXN0KCk7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRLZXkoKSBpbiB1c2VkVGlsZXMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wKCkucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQcnVuZSBhbGwgdGlsZXMgZnJvbSB0aGUgY2FjaGUgdGhhdCBkb24ndCBoYXZlIHRoZSBzYW1lIHogYXMgdGhlIG5ld2VzdCB0aWxlLlxuICAgICAqL1xuICAgIFRpbGVDYWNoZS5wcm90b3R5cGUucHJ1bmVFeGNlcHROZXdlc3RaID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRDb3VudCgpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleSA9IHRoaXMucGVla0ZpcnN0S2V5KCk7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBmcm9tS2V5KGtleSk7XG4gICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgICAgIGlmICh0aWxlLnRpbGVDb29yZFswXSAhPT0geikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGdldEtleSh0aWxlLnRpbGVDb29yZCkpO1xuICAgICAgICAgICAgICAgIHRpbGUucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVDYWNoZTtcbn0oTFJVQ2FjaGUpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVDYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVDYWNoZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9Tb3VyY2VcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuL1N0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJy4uL3Byb2ouanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5GcmFtZVN0YXRlfSBhbmQgcmV0dXJucyBhIHN0cmluZyBvclxuICogYW4gYXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgc291cmNlIGF0dHJpYnV0aW9ucy5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGUpOiAoc3RyaW5nfEFycmF5PHN0cmluZz4pfSBBdHRyaWJ1dGlvblxuICovXG4vKipcbiAqIEEgdHlwZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYXR0cmlidXRpb24gaW5mb3JtYXRpb24gZm9yIGRhdGEgc291cmNlcy5cbiAqXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlclxuICogKiBhIHNpbXBsZSBzdHJpbmcgKGUuZy4gYCfCqSBBY21lIEluYy4nYClcbiAqICogYW4gYXJyYXkgb2Ygc2ltcGxlIHN0cmluZ3MgKGUuZy4gYFsnwqkgQWNtZSBJbmMuJywgJ8KpIEJhY21lIEluYy4nXWApXG4gKiAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgKHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0pXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ3xBcnJheTxzdHJpbmc+fEF0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbkxpa2VcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0F0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGU9J3JlYWR5J10gU3RhdGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZT1mYWxzZV0gVXNlIGludGVycG9sYXRlZCB2YWx1ZXMgd2hlbiByZXNhbXBsaW5nLiAgQnkgZGVmYXVsdCxcbiAqIHRoZSBuZWFyZXN0IG5laWdoYm9yIGlzIHVzZWQgd2hlbiByZXNhbXBsaW5nLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXJ9IHNvdXJjZXMuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU291cmNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBTb3VyY2Ugb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTb3VyY2Uob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wcm9qZWN0aW9uID0gZ2V0UHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BdHRyaWJ1dGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhvcHRpb25zLmF0dHJpYnV0aW9ucyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXyA9XG4gICAgICAgICAgICBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGVcbiAgICAgICAgICAgICAgICA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIHNvdXJjZSBpcyBjdXJyZW50bHkgbG9hZGluZyBkYXRhLiBTb3VyY2VzIHRoYXQgZGVmZXIgbG9hZGluZyB0byB0aGVcbiAgICAgICAgICogbWFwJ3MgdGlsZSBxdWV1ZSBuZXZlciBzZXQgdGhpcyB0byBgdHJ1ZWAuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlXyA9XG4gICAgICAgICAgICBvcHRpb25zLnN0YXRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0YXRlIDogU291cmNlU3RhdGUuUkVBRFk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLndyYXBYXyA9IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW50ZXJwb2xhdGVfID0gISFvcHRpb25zLmludGVycG9sYXRlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucyk6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdSZXNvbHZlciA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihFcnJvcik6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdSZWplY3RvciA9IG51bGw7XG4gICAgICAgIHZhciBzZWxmID0gX3RoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7UHJvbWlzZTxpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdQcm9taXNlXyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHNlbGYudmlld1Jlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgICAgICAgIHNlbGYudmlld1JlamVjdG9yID0gcmVqZWN0O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGF0dHJpYnV0aW9uIGZ1bmN0aW9uIGZvciB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQXR0cmlidXRpb24gZnVuY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGlvbnNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBSZXNvbHV0aW9ucy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucz59IEEgcHJvbWlzZSBmb3Igdmlldy1yZWxhdGVkIHByb3BlcnRpZXMuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3UHJvbWlzZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UsIHNlZSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9TdGF0ZX5TdGF0ZX0gZm9yIHBvc3NpYmxlIHN0YXRlcy5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHVuZGVmaW5lZH0gV3JhcCBYLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0V3JhcFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBYXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFVzZSBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aGVuIHJlc2FtcGxpbmcuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRJbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJwb2xhdGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVmcmVzaGVzIHRoZSBzb3VyY2UuIFRoZSBzb3VyY2Ugd2lsbCBiZSBjbGVhcmVkLCBhbmQgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBiZSByZWxvYWRlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgYXR0cmlidXRpb25zIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbnMgQXR0cmlidXRpb25zLlxuICAgICAqICAgICBDYW4gYmUgcGFzc2VkIGFzIGBzdHJpbmdgLCBgQXJyYXk8c3RyaW5nPmAsIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0sXG4gICAgICogICAgIG9yIGB1bmRlZmluZWRgLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLnNldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGlvbnMpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25zKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU291cmNlO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIFR1cm5zIHRoZSBhdHRyaWJ1dGlvbnMgb3B0aW9uIGludG8gYW4gYXR0cmlidXRpb25zIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtBdHRyaWJ1dGlvbkxpa2V8dW5kZWZpbmVkfSBhdHRyaWJ1dGlvbkxpa2UgVGhlIGF0dHJpYnV0aW9uIG9wdGlvbi5cbiAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQW4gYXR0cmlidXRpb24gZnVuY3Rpb24gKG9yIG51bGwpLlxuICovXG5mdW5jdGlvbiBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbkxpa2UpIHtcbiAgICBpZiAoIWF0dHJpYnV0aW9uTGlrZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25MaWtlKSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICh0eXBlb2YgYXR0cmlidXRpb25MaWtlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICByZXR1cm4gW2F0dHJpYnV0aW9uTGlrZV07XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IFNvdXJjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNvdXJjZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWQvVGlsZUdyaWRcbiAqL1xuaW1wb3J0IFRpbGVSYW5nZSwgeyBjcmVhdGVPclVwZGF0ZSBhcyBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZSwgfSBmcm9tICcuLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNlaWwsIGNsYW1wLCBmbG9vciB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgY3JlYXRlT3JVcGRhdGUsIGdldFRvcExlZnQgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlT3JVcGRhdGUgYXMgY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQgfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgaXNTb3J0ZWQsIGxpbmVhckZpbmROZWFyZXN0IH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgdG9TaXplIH0gZnJvbSAnLi4vc2l6ZS5qcyc7XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAqL1xudmFyIHRtcFRpbGVDb29yZCA9IFswLCAwLCAwXTtcbi8qKlxuICogTnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzIHRvIGNvbnNpZGVyIGluIGludGVnZXIgdmFsdWVzIHdoZW4gcm91bmRpbmcuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgREVDSU1BTFMgPSA1O1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudCBmb3IgdGhlIHRpbGUgZ3JpZC4gTm8gdGlsZXMgb3V0c2lkZSB0aGlzXG4gKiBleHRlbnQgd2lsbCBiZSByZXF1ZXN0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX0gc291cmNlcy4gV2hlbiBubyBgb3JpZ2luYCBvclxuICogYG9yaWdpbnNgIGFyZSBjb25maWd1cmVkLCB0aGUgYG9yaWdpbmAgd2lsbCBiZSBzZXQgdG8gdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3JpZ2luXSBUaGUgdGlsZSBncmlkIG9yaWdpbiwgaS5lLiB3aGVyZSB0aGUgYHhgXG4gKiBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIGRvd253YXJkcy4gSWYgbm90XG4gKiBzcGVjaWZpZWQsIGBleHRlbnRgIG9yIGBvcmlnaW5zYCBtdXN0IGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBbb3JpZ2luc10gVGlsZSBncmlkIG9yaWdpbnMsIGkuZS4gd2hlcmVcbiAqIHRoZSBgeGAgYW5kIGB5YCBheGVzIG1lZXQgKGBbeiwgMCwgMF1gKSwgZm9yIGVhY2ggem9vbSBsZXZlbC4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogb3JpZ2luLiBUaWxlIGNvb3JkaW5hdGVzIGluY3JlYXNlIGxlZnQgdG8gcmlnaHQgYW5kIGRvd253YXJkcy4gSWYgbm90IHNwZWNpZmllZCwgYGV4dGVudGAgb3JcbiAqIGBvcmlnaW5gIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSByZXNvbHV0aW9ucyBSZXNvbHV0aW9ucy4gVGhlIGFycmF5IGluZGV4IG9mIGVhY2ggcmVzb2x1dGlvbiBuZWVkc1xuICogdG8gbWF0Y2ggdGhlIHpvb20gbGV2ZWwuIFRoaXMgbWVhbnMgdGhhdCBldmVuIGlmIGEgYG1pblpvb21gIGlzIGNvbmZpZ3VyZWQsIHRoZSByZXNvbHV0aW9uc1xuICogYXJyYXkgd2lsbCBoYXZlIGEgbGVuZ3RoIG9mIGBtYXhab29tICsgMWAuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59IFtzaXplc10gTnVtYmVyIG9mIHRpbGUgcm93cyBhbmQgY29sdW1uc1xuICogb2YgdGhlIGdyaWQgZm9yIGVhY2ggem9vbSBsZXZlbC4gSWYgc3BlY2lmaWVkIHRoZSB2YWx1ZXNcbiAqIGRlZmluZSBlYWNoIHpvb20gbGV2ZWwncyBleHRlbnQgdG9nZXRoZXIgd2l0aCB0aGUgYG9yaWdpbmAgb3IgYG9yaWdpbnNgLlxuICogQSBncmlkIGBleHRlbnRgIGNhbiBiZSBjb25maWd1cmVkIGluIGFkZGl0aW9uLCBhbmQgd2lsbCBmdXJ0aGVyIGxpbWl0IHRoZSBleHRlbnRcbiAqIGZvciB3aGljaCB0aWxlIHJlcXVlc3RzIGFyZSBtYWRlIGJ5IHNvdXJjZXMuIElmIHRoZSBib3R0b20tbGVmdCBjb3JuZXIgb2ZcbiAqIGFuIGV4dGVudCBpcyB1c2VkIGFzIGBvcmlnaW5gIG9yIGBvcmlnaW5zYCwgdGhlbiB0aGUgYHlgIHZhbHVlIG11c3QgYmVcbiAqIG5lZ2F0aXZlIGJlY2F1c2UgT3BlbkxheWVycyB0aWxlIGNvb3JkaW5hdGVzIHVzZSB0aGUgdG9wIGxlZnQgYXMgdGhlIG9yaWdpbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplXSBUaWxlIHNpemUuXG4gKiBEZWZhdWx0IGlzIGBbMjU2LCAyNTZdYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3RpbGVTaXplc10gVGlsZSBzaXplcy4gSWYgZ2l2ZW4sIHRoZSBhcnJheSBsZW5ndGhcbiAqIHNob3VsZCBtYXRjaCB0aGUgbGVuZ3RoIG9mIHRoZSBgcmVzb2x1dGlvbnNgIGFycmF5LCBpLmUuIGVhY2ggcmVzb2x1dGlvbiBjYW4gaGF2ZSBhIGRpZmZlcmVudFxuICogdGlsZSBzaXplLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNldHRpbmcgdGhlIGdyaWQgcGF0dGVybiBmb3Igc291cmNlcyBhY2Nlc3NpbmcgdGlsZWQtaW1hZ2VcbiAqIHNlcnZlcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlR3JpZCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgVGlsZSBncmlkIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUdyaWQob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICBhc3NlcnQoaXNTb3J0ZWQodGhpcy5yZXNvbHV0aW9uc18sIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gYiAtIGE7XG4gICAgICAgIH0sIHRydWUpLCAxNyk7IC8vIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBzb3J0ZWQgaW4gZGVzY2VuZGluZyBvcmRlclxuICAgICAgICAvLyBjaGVjayBpZiB3ZSd2ZSBnb3QgYSBjb25zaXN0ZW50IHpvb20gZmFjdG9yIGFuZCBvcmlnaW5cbiAgICAgICAgdmFyIHpvb21GYWN0b3I7XG4gICAgICAgIGlmICghb3B0aW9ucy5vcmlnaW5zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAxOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICghem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gdGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV0gIT09IHpvb21GYWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpvb21GYWN0b3JfID0gem9vbUZhY3RvcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4Wm9vbSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmlnaW5fID0gb3B0aW9ucy5vcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcmlnaW5zXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLm9yaWdpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5zXyA9IG9wdGlvbnMub3JpZ2lucztcbiAgICAgICAgICAgIGFzc2VydCh0aGlzLm9yaWdpbnNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDIwKTsgLy8gTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGV4dGVudCA9IG9wdGlvbnMuZXh0ZW50O1xuICAgICAgICBpZiAoZXh0ZW50ICE9PSB1bmRlZmluZWQgJiYgIXRoaXMub3JpZ2luXyAmJiAhdGhpcy5vcmlnaW5zXykge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5fID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCgoIXRoaXMub3JpZ2luXyAmJiB0aGlzLm9yaWdpbnNfKSB8fCAodGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSwgMTgpOyAvLyBFaXRoZXIgYG9yaWdpbmAgb3IgYG9yaWdpbnNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWxlU2l6ZXNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMudGlsZVNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZVNpemVzXyA9IG9wdGlvbnMudGlsZVNpemVzO1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMudGlsZVNpemVzXy5sZW5ndGggPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoLCAxOSk7IC8vIE51bWJlciBvZiBgdGlsZVNpemVzYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aWxlU2l6ZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlU2l6ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnRpbGVTaXplXG4gICAgICAgICAgICAgICAgOiAhdGhpcy50aWxlU2l6ZXNfXG4gICAgICAgICAgICAgICAgICAgID8gREVGQVVMVF9USUxFX1NJWkVcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBhc3NlcnQoKCF0aGlzLnRpbGVTaXplXyAmJiB0aGlzLnRpbGVTaXplc18pIHx8XG4gICAgICAgICAgICAodGhpcy50aWxlU2l6ZV8gJiYgIXRoaXMudGlsZVNpemVzXyksIDIyKTsgLy8gRWl0aGVyIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IGV4dGVudCAhPT0gdW5kZWZpbmVkID8gZXh0ZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50bXBTaXplXyA9IFswLCAwXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50bXBFeHRlbnRfID0gWzAsIDAsIDAsIDBdO1xuICAgICAgICBpZiAob3B0aW9ucy5zaXplcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IG9wdGlvbnMuc2l6ZXMubWFwKGZ1bmN0aW9uIChzaXplLCB6KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVSYW5nZSA9IG5ldyBUaWxlUmFuZ2UoTWF0aC5taW4oMCwgc2l6ZVswXSksIE1hdGgubWF4KHNpemVbMF0gLSAxLCAtMSksIE1hdGgubWluKDAsIHNpemVbMV0pLCBNYXRoLm1heChzaXplWzFdIC0gMSwgLTEpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN0cmljdGVkVGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5taW5YID0gTWF0aC5tYXgocmVzdHJpY3RlZFRpbGVSYW5nZS5taW5YLCB0aWxlUmFuZ2UubWluWCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhYID0gTWF0aC5taW4ocmVzdHJpY3RlZFRpbGVSYW5nZS5tYXhYLCB0aWxlUmFuZ2UubWF4WCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5taW5ZID0gTWF0aC5tYXgocmVzdHJpY3RlZFRpbGVSYW5nZS5taW5ZLCB0aWxlUmFuZ2UubWluWSk7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhZID0gTWF0aC5taW4ocmVzdHJpY3RlZFRpbGVSYW5nZS5tYXhZLCB0aWxlUmFuZ2UubWF4WSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlUmFuZ2U7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlVGlsZVJhbmdlc18oZXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgZnVuY3Rpb24gd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCk6IHZvaWR9IGNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCB3aXRoIGVhY2ggdGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZCA9IGZ1bmN0aW9uIChleHRlbnQsIHpvb20sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6b29tKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRpbGVSYW5nZS5taW5YLCBpaSA9IHRpbGVSYW5nZS5tYXhYOyBpIDw9IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSB0aWxlUmFuZ2UubWluWSwgamogPSB0aWxlUmFuZ2UubWF4WTsgaiA8PSBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soW3pvb20sIGksIGpdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGNhbGxiYWNrIENhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYWxsYmFjayBzdWNjZWVkZWQuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UgPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBjYWxsYmFjaywgb3B0X3RpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgdGlsZVJhbmdlLCB4LCB5O1xuICAgICAgICB2YXIgdGlsZUNvb3JkRXh0ZW50ID0gbnVsbDtcbiAgICAgICAgdmFyIHogPSB0aWxlQ29vcmRbMF0gLSAxO1xuICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgeCA9IHRpbGVDb29yZFsxXTtcbiAgICAgICAgICAgIHkgPSB0aWxlQ29vcmRbMl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRFeHRlbnQgPSB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIG9wdF9leHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh6ID49IHRoaXMubWluWm9vbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgICAgICAgICB4ID0gTWF0aC5mbG9vcih4IC8gMik7XG4gICAgICAgICAgICAgICAgeSA9IE1hdGguZmxvb3IoeSAvIDIpO1xuICAgICAgICAgICAgICAgIHRpbGVSYW5nZSA9IGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHgsIHgsIHksIHksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRpbGVDb29yZEV4dGVudCwgeiwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2soeiwgdGlsZVJhbmdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLS16O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZCwgaWYgaXQgd2FzIGNvbmZpZ3VyZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBncmlkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWF4IHpvb20uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhab29tO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSBncmlkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluIHpvb20uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRNaW5ab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5ab29tO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBvcmlnaW4gZm9yIHRoZSBncmlkIGF0IHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IE9yaWdpbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE9yaWdpbiA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIGlmICh0aGlzLm9yaWdpbl8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbl87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5zX1t6XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGUgZ2l2ZW4gem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICh6KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t6XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGlzdCBvZiByZXNvbHV0aW9ucyBmb3IgdGhlIHRpbGUgZ3JpZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gW29wdF90aWxlUmFuZ2VdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF90aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgaWYgKHRpbGVDb29yZFswXSA8IHRoaXMubWF4Wm9vbSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWluWCA9IHRpbGVDb29yZFsxXSAqIDI7XG4gICAgICAgICAgICAgICAgdmFyIG1pblkgPSB0aWxlQ29vcmRbMl0gKiAyO1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtaW5YICsgMSwgbWluWSwgbWluWSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCB8fCB0aGlzLnRtcEV4dGVudF8pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHRpbGVDb29yZFswXSArIDEsIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbb3B0X3RpbGVSYW5nZV0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gVGlsZSByYW5nZS5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZVJhbmdlRm9yVGlsZUNvb3JkQW5kWiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIHosIG9wdF90aWxlUmFuZ2UpIHtcbiAgICAgICAgaWYgKHogPiB0aGlzLm1heFpvb20gfHwgeiA8IHRoaXMubWluWm9vbSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVDb29yZFogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRYID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgaWYgKHogPT09IHRpbGVDb29yZFopIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZSh0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXykge1xuICAgICAgICAgICAgdmFyIGZhY3RvciA9IE1hdGgucG93KHRoaXMuem9vbUZhY3Rvcl8sIHogLSB0aWxlQ29vcmRaKTtcbiAgICAgICAgICAgIHZhciBtaW5YID0gTWF0aC5mbG9vcih0aWxlQ29vcmRYICogZmFjdG9yKTtcbiAgICAgICAgICAgIHZhciBtaW5ZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZICogZmFjdG9yKTtcbiAgICAgICAgICAgIGlmICh6IDwgdGlsZUNvb3JkWikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtaW5YLCBtaW5ZLCBtaW5ZLCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtYXhYID0gTWF0aC5mbG9vcihmYWN0b3IgKiAodGlsZUNvb3JkWCArIDEpKSAtIDE7XG4gICAgICAgICAgICB2YXIgbWF4WSA9IE1hdGguZmxvb3IoZmFjdG9yICogKHRpbGVDb29yZFkgKyAxKSkgLSAxO1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIHRoaXMudG1wRXh0ZW50Xyk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IGZvciBhIHRpbGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUV4dGVudCA9IGZ1bmN0aW9uICh6LCB0aWxlUmFuZ2UsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHopO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgbWluWCA9IG9yaWdpblswXSArIHRpbGVSYW5nZS5taW5YICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WCA9IG9yaWdpblswXSArICh0aWxlUmFuZ2UubWF4WCArIDEpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWluWSA9IG9yaWdpblsxXSArIHRpbGVSYW5nZS5taW5ZICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WSA9IG9yaWdpblsxXSArICh0aWxlUmFuZ2UubWF4WSArIDEpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB0aWxlIHJhbmdlIGZvciB0aGUgZ2l2ZW4gZXh0ZW50IGFuZCBpbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbb3B0X3RpbGVSYW5nZV0gVGVtcG9yYXJ5IHRpbGUgcmFuZ2Ugb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaID0gZnVuY3Rpb24gKGV4dGVudCwgeiwgb3B0X3RpbGVSYW5nZSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkID0gdG1wVGlsZUNvb3JkO1xuICAgICAgICB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oZXh0ZW50WzBdLCBleHRlbnRbM10sIHosIGZhbHNlLCB0aWxlQ29vcmQpO1xuICAgICAgICB2YXIgbWluWCA9IHRpbGVDb29yZFsxXTtcbiAgICAgICAgdmFyIG1pblkgPSB0aWxlQ29vcmRbMl07XG4gICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMl0sIGV4dGVudFsxXSwgeiwgdHJ1ZSwgdGlsZUNvb3JkKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIHRpbGVDb29yZFsxXSwgbWluWSwgdGlsZUNvb3JkWzJdLCBvcHRfdGlsZVJhbmdlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRpbGUgY2VudGVyLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRDZW50ZXIgPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh0aWxlQ29vcmRbMF0pLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIG9yaWdpblswXSArICh0aWxlQ29vcmRbMV0gKyAwLjUpICogdGlsZVNpemVbMF0gKiByZXNvbHV0aW9uLFxuICAgICAgICAgICAgb3JpZ2luWzFdIC0gKHRpbGVDb29yZFsyXSArIDAuNSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb24sXG4gICAgICAgIF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBvZiBhIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfZXh0ZW50XSBUZW1wb3JhcnkgZXh0ZW50IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRFeHRlbnQgPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih0aWxlQ29vcmRbMF0pO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh0aWxlQ29vcmRbMF0pLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgdmFyIG1pblggPSBvcmlnaW5bMF0gKyB0aWxlQ29vcmRbMV0gKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtaW5ZID0gb3JpZ2luWzFdIC0gKHRpbGVDb29yZFsyXSArIDEpICogdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgbWF4WCA9IG1pblggKyB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhZID0gbWluWSArIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIG9wdF9leHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoZSBnaXZlbiBtYXAgY29vcmRpbmF0ZSBhbmQgcmVzb2x1dGlvbi4gIFRoaXNcbiAgICAgKiBtZXRob2QgY29uc2lkZXJzIHRoYXQgY29vcmRpbmF0ZXMgdGhhdCBpbnRlcnNlY3QgdGlsZSBib3VuZGFyaWVzIHNob3VsZCBiZVxuICAgICAqIGFzc2lnbmVkIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCByZXNvbHV0aW9uLCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8oY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSwgcmVzb2x1dGlvbiwgZmFsc2UsIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyB0aGF0IGNvcnJlc3BvbmRcbiAgICAgKiB0byBhbiBpbnRlZ2VyIHpvb20gbGV2ZWwuICBJbnN0ZWFkIGNhbGwgdGhlIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFpfYCBtZXRob2QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24gKGZvciBhIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWwpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgICAqICAgICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gICAgICogICAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fID0gZnVuY3Rpb24gKHgsIHksIHJlc29sdXRpb24sIHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3ksIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIHogPSB0aGlzLmdldFpGb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgICAgICB2YXIgc2NhbGUgPSByZXNvbHV0aW9uIC8gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFggPSAoc2NhbGUgKiAoeCAtIG9yaWdpblswXSkpIC8gcmVzb2x1dGlvbiAvIHRpbGVTaXplWzBdO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWSA9IChzY2FsZSAqIChvcmlnaW5bMV0gLSB5KSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gY2VpbCh0aWxlQ29vcmRYLCBERUNJTUFMUykgLSAxO1xuICAgICAgICAgICAgdGlsZUNvb3JkWSA9IGNlaWwodGlsZUNvb3JkWSwgREVDSU1BTFMpIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZFggPSBmbG9vcih0aWxlQ29vcmRYLCBERUNJTUFMUyk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gZmxvb3IodGlsZUNvb3JkWSwgREVDSU1BTFMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCh6LCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZUNvb3JkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFsdGhvdWdoIHRoZXJlIGlzIHJlcGV0aXRpb24gYmV0d2VlbiB0aGlzIG1ldGhvZCBhbmQgYGdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl9gLFxuICAgICAqIHRoZXkgc2hvdWxkIGhhdmUgc2VwYXJhdGUgaW1wbGVtZW50YXRpb25zLiAgVGhpcyBtZXRob2QgaXMgZm9yIGludGVnZXIgem9vbVxuICAgICAqIGxldmVscy4gIFRoZSBvdGhlciBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyBjb3JyZXNwb25kaW5nXG4gICAgICogdG8gbm9uLWludGVnZXIgem9vbSBsZXZlbHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggTWFwIHggY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBNYXAgeSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgSW5zdGVhZCBvZiBsZXR0aW5nIGVkZ2VcbiAgICAgKiAgICAgaW50ZXJzZWN0aW9ucyBnbyB0byB0aGUgaGlnaGVyIHRpbGUgY29vcmRpbmF0ZSwgbGV0IGVkZ2UgaW50ZXJzZWN0aW9uc1xuICAgICAqICAgICBnbyB0byB0aGUgbG93ZXIgdGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyA9IGZ1bmN0aW9uICh4LCB5LCB6LCByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5LCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFggPSAoeCAtIG9yaWdpblswXSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gKG9yaWdpblsxXSAtIHkpIC8gcmVzb2x1dGlvbiAvIHRpbGVTaXplWzFdO1xuICAgICAgICBpZiAocmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSkge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IGNlaWwodGlsZUNvb3JkWCwgREVDSU1BTFMpIC0gMTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBjZWlsKHRpbGVDb29yZFksIERFQ0lNQUxTKSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gZmxvb3IodGlsZUNvb3JkWCwgREVDSU1BTFMpO1xuICAgICAgICAgICAgdGlsZUNvb3JkWSA9IGZsb29yKHRpbGVDb29yZFksIERFQ0lNQUxTKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB0aWxlIGNvb3JkaW5hdGUgZ2l2ZW4gYSBtYXAgY29vcmRpbmF0ZSBhbmQgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHosIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCB6LCBmYWxzZSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZFJlc29sdXRpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t0aWxlQ29vcmRbMF1dO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIHNpemUgZm9yIGEgem9vbSBsZXZlbC4gVGhlIHR5cGUgb2YgdGhlIHJldHVybiB2YWx1ZSBtYXRjaGVzIHRoZVxuICAgICAqIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgdGhhdCB0aGUgdGlsZSBncmlkIHdhcyBjb25maWd1cmVkIHdpdGguIFRvIGFsd2F5c1xuICAgICAqIGdldCBhbiBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplYCwgcnVuIHRoZSByZXN1bHQgdGhyb3VnaCBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplLnRvU2l6ZSgpYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgICAqIEByZXR1cm4ge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVTaXplID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMudGlsZVNpemVfKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZXNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBFeHRlbnQgdGlsZSByYW5nZSBmb3IgdGhlIHNwZWNpZmllZCB6b29tIGxldmVsLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRGdWxsVGlsZVJhbmdlID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKCF0aGlzLmZ1bGxUaWxlUmFuZ2VzXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50X1xuICAgICAgICAgICAgICAgID8gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRoaXMuZXh0ZW50XywgeilcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mdWxsVGlsZVJhbmdlc19bel07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbb3B0X2RpcmVjdGlvbl1cbiAgICAgKiAgICAgSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogICAgIElmIDEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIChsb3dlciBaKSB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGVcbiAgICAgKiAgICAgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uIChoaWdoZXIgWikgd2lsbCBiZSB1c2VkLiBEZWZhdWx0IGlzIDAuXG4gICAgICogICAgIFVzZSBhIHtAbGluayBtb2R1bGU6b2wvYXJyYXl+TmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBmb3IgbW9yZSBwcmVjaXNlIGNvbnRyb2wuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSB0byBjaGFuZ2UgdGlsZSBaIGF0IHRoZSBtaWRwb2ludCBvZiB6b29tIGxldmVsc1xuICAgICAqIGBgYGpzXG4gICAgICogZnVuY3Rpb24odmFsdWUsIGhpZ2gsIGxvdykge1xuICAgICAqICAgcmV0dXJuIHZhbHVlIC0gbG93ICogTWF0aC5zcXJ0KGhpZ2ggLyBsb3cpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFouXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRaRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciB6ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24gfHwgMCk7XG4gICAgICAgIHJldHVybiBjbGFtcCh6LCB0aGlzLm1pblpvb20sIHRoaXMubWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5jYWxjdWxhdGVUaWxlUmFuZ2VzXyA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aDtcbiAgICAgICAgdmFyIGZ1bGxUaWxlUmFuZ2VzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIHogPSB0aGlzLm1pblpvb207IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgICAgICAgZnVsbFRpbGVSYW5nZXNbel0gPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IGZ1bGxUaWxlUmFuZ2VzO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVHcmlkO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVHcmlkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUdyaWQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkXG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBUaWxlR3JpZCBmcm9tICcuL3RpbGVncmlkL1RpbGVHcmlkLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9NQVhfWk9PTSwgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlT3JVcGRhdGUsIGdldENvcm5lciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuL3NpemUuanMnO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gRGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZVxuICogcGFzc2VkIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGlsZUdyaWQgPSBwcm9qZWN0aW9uLmdldERlZmF1bHRUaWxlR3JpZCgpO1xuICAgIGlmICghdGlsZUdyaWQpIHtcbiAgICAgICAgdGlsZUdyaWQgPSBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBwcm9qZWN0aW9uLnNldERlZmF1bHRUaWxlR3JpZCh0aWxlR3JpZCk7XG4gICAgfVxuICAgIHJldHVybiB0aWxlR3JpZDtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlR3JpZH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbikge1xuICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgIHZhciBjZW50ZXIgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZUNvb3JkKTtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGlmICghY29udGFpbnNDb29yZGluYXRlKHByb2plY3Rpb25FeHRlbnQsIGNlbnRlcikpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmNlaWwoKHByb2plY3Rpb25FeHRlbnRbMF0gLSBjZW50ZXJbMF0pIC8gd29ybGRXaWR0aCk7XG4gICAgICAgIGNlbnRlclswXSArPSB3b3JsZFdpZHRoICogd29ybGRzQXdheTtcbiAgICAgICAgcmV0dXJuIHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjZW50ZXIsIHopO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRpbGVDb29yZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF90aWxlU2l6ZV0gVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBbb3B0X2Nvcm5lcl0gRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgY29ybmVyID0gb3B0X2Nvcm5lciAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvcm5lciA6IENvcm5lci5UT1BfTEVGVDtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplKTtcbiAgICByZXR1cm4gbmV3IFRpbGVHcmlkKHtcbiAgICAgICAgZXh0ZW50OiBleHRlbnQsXG4gICAgICAgIG9yaWdpbjogZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zLFxuICAgICAgICB0aWxlU2l6ZTogb3B0X3RpbGVTaXplLFxuICAgIH0pO1xufVxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBYWVpPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBUaGUgb3JpZ2luIGZvciBhbiBYWVogdGlsZSBncmlkIGlzIHRoZVxuICogdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuIElmIGBtYXhSZXNvbHV0aW9uYCBpcyBub3QgcHJvdmlkZWQgdGhlIHplcm8gbGV2ZWwgb2YgdGhlIGdyaWQgaXMgZGVmaW5lZCBieSB0aGUgcmVzb2x1dGlvblxuICogYXQgd2hpY2ggb25lIHRpbGUgZml0cyBpbiB0aGUgcHJvdmlkZWQgZXh0ZW50LiBJZiBub3QgcHJvdmlkZWQsIHRoZSBleHRlbnQgb2YgdGhlIEVQU0c6Mzg1NyBwcm9qZWN0aW9uIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tLiBUaGUgZGVmYXVsdCBpcyBgNDJgLiBUaGlzIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBsZXZlbHNcbiAqIGluIHRoZSBncmlkIHNldC4gRm9yIGV4YW1wbGUsIGEgYG1heFpvb21gIG9mIDIxIG1lYW5zIHRoZXJlIGFyZSAyMiBsZXZlbHMgaW4gdGhlIGdyaWQgc2V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGlsZSBzaXplIGluIHBpeGVscy5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdGlsZSBncmlkIHdpdGggYSBzdGFuZGFyZCBYWVogdGlsaW5nIHNjaGVtZS5cbiAqIEBwYXJhbSB7WFlaT3B0aW9uc30gW29wdF9vcHRpb25zXSBUaWxlIGdyaWQgb3B0aW9ucy5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZSBncmlkIGluc3RhbmNlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWFlaKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIHh5ek9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZXh0ZW50ID0geHl6T3B0aW9ucy5leHRlbnQgfHwgZ2V0UHJvamVjdGlvbignRVBTRzozODU3JykuZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGdyaWRPcHRpb25zID0ge1xuICAgICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgICAgbWluWm9vbTogeHl6T3B0aW9ucy5taW5ab29tLFxuICAgICAgICB0aWxlU2l6ZTogeHl6T3B0aW9ucy50aWxlU2l6ZSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIHh5ek9wdGlvbnMubWF4Wm9vbSwgeHl6T3B0aW9ucy50aWxlU2l6ZSwgeHl6T3B0aW9ucy5tYXhSZXNvbHV0aW9uKSxcbiAgICB9O1xuICAgIHJldHVybiBuZXcgVGlsZUdyaWQoZ3JpZE9wdGlvbnMpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSByZXNvbHV0aW9ucyBhcnJheSBmcm9tIGFuIGV4dGVudC4gIEEgem9vbSBmYWN0b3Igb2YgMiBpcyBhc3N1bWVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9tYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEByZXR1cm4geyFBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucyBhcnJheS5cbiAqL1xuZnVuY3Rpb24gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X21heFJlc29sdXRpb24pIHtcbiAgICB2YXIgbWF4Wm9vbSA9IG9wdF9tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRfbWF4Wm9vbSA6IERFRkFVTFRfTUFYX1pPT007XG4gICAgdmFyIGhlaWdodCA9IGdldEhlaWdodChleHRlbnQpO1xuICAgIHZhciB3aWR0aCA9IGdldFdpZHRoKGV4dGVudCk7XG4gICAgdmFyIHRpbGVTaXplID0gdG9TaXplKG9wdF90aWxlU2l6ZSAhPT0gdW5kZWZpbmVkID8gb3B0X3RpbGVTaXplIDogREVGQVVMVF9USUxFX1NJWkUpO1xuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gb3B0X21heFJlc29sdXRpb24gPiAwXG4gICAgICAgID8gb3B0X21heFJlc29sdXRpb25cbiAgICAgICAgOiBNYXRoLm1heCh3aWR0aCAvIHRpbGVTaXplWzBdLCBoZWlnaHQgLyB0aWxlU2l6ZVsxXSk7XG4gICAgdmFyIGxlbmd0aCA9IG1heFpvb20gKyAxO1xuICAgIHZhciByZXNvbHV0aW9ucyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIHogPSAwOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICAgICAgcmVzb2x1dGlvbnNbel0gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coMiwgeik7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHV0aW9ucztcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfdGlsZVNpemVdIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC9Db3JuZXIuanNcIikuZGVmYXVsdH0gW29wdF9jb3JuZXJdIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24sIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgZXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgcmV0dXJuIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHRpbGUgZ3JpZCBleHRlbnQgZnJvbSBhIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBoYXMgYW5cbiAqIGV4dGVudCwgaXQgaXMgdXNlZC4gIElmIG5vdCwgYSBnbG9iYWwgZXh0ZW50IGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgcHJvamVjdGlvbiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgaWYgKCFleHRlbnQpIHtcbiAgICAgICAgdmFyIGhhbGYgPSAoMTgwICogTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdKSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZSgtaGFsZiwgLWhhbGYsIGhhbGYsIGhhbGYpO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWdyaWQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZVxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBTb3VyY2UgZnJvbSAnLi9Tb3VyY2UuanMnO1xuaW1wb3J0IFRpbGVDYWNoZSBmcm9tICcuLi9UaWxlQ2FjaGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgZXF1aXZhbGVudCB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0S2V5WlhZLCB3aXRoaW5FeHRlbnRBbmRaIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLCB3cmFwWCwgfSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5pbXBvcnQgeyBzY2FsZSBhcyBzY2FsZVNpemUsIHRvU2l6ZSB9IGZyb20gJy4uL3NpemUuanMnO1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vVGlsZUV2ZW50VHlwZVwiKS5UaWxlU291cmNlRXZlbnRUeXBlcywgVGlsZVNvdXJjZUV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgaW1wb3J0KFwiLi9UaWxlRXZlbnRUeXBlXCIpLlRpbGVTb3VyY2VFdmVudFR5cGVzLCBSZXR1cm4+fSBUaWxlU291cmNlT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBDYWNoZVNpemUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW9dIFRpbGVQaXhlbFJhdGlvLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFN0YXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGVHcmlkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9ZmFsc2VdIFdyYXBYLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXSBUcmFuc2l0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXldIEtleS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW3pEaXJlY3Rpb249MF0gWkRpcmVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPWZhbHNlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogdGhlIG5lYXJlc3QgbmVpZ2hib3IgaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgaW1hZ2VzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZC5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgVGlsZVNvdXJjZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZVNvdXJjZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgU291cmNlVGlsZSBzb3VyY2Ugb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlU291cmNlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIGludGVycG9sYXRlOiBvcHRpb25zLmludGVycG9sYXRlLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7VGlsZVNvdXJjZU9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7VGlsZVNvdXJjZU9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9wYXF1ZV8gPSBvcHRpb25zLm9wYXF1ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcGFxdWUgOiBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUGl4ZWxSYXRpb18gPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlR3JpZCA6IG51bGw7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IFsyNTYsIDI1Nl07XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IG9wdGlvbnMudGlsZUdyaWQ7XG4gICAgICAgIGlmICh0aWxlR3JpZCkge1xuICAgICAgICAgICAgdG9TaXplKHRpbGVHcmlkLmdldFRpbGVTaXplKHRpbGVHcmlkLmdldE1pblpvb20oKSksIHRpbGVTaXplKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZUNhY2hlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2FjaGUgPSBuZXcgVGlsZUNhY2hlKG9wdGlvbnMuY2FjaGVTaXplIHx8IDApO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG1wU2l6ZSA9IFswLCAwXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXlfID0gb3B0aW9ucy5rZXkgfHwgJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLk9wdGlvbnN9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGludGVycG9sYXRlOiBvcHRpb25zLmludGVycG9sYXRlLFxuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogekRpcmVjdGlvbiBoaW50LCByZWFkIGJ5IHRoZSByZW5kZXJlci4gSW5kaWNhdGVzIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgICAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlld3MgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICAgICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy56RGlyZWN0aW9uID0gb3B0aW9ucy56RGlyZWN0aW9uID8gb3B0aW9ucy56RGlyZWN0aW9uIDogMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh1c2VkVGlsZXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk6KGJvb2xlYW58dm9pZCl9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2hcbiAgICAgKiAgICAgbG9hZGVkIHRpbGUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZVxuICAgICAqICAgICBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBjb3ZlcmVkIHdpdGggbG9hZGVkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmZvckVhY2hMb2FkZWRUaWxlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHosIHRpbGVSYW5nZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKCF0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY292ZXJlZCA9IHRydWU7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlQ29vcmRLZXksIGxvYWRlZDtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICAgICAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gdGlsZS5nZXRTdGF0ZSgpID09PSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSBjYWxsYmFjayh0aWxlKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY292ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBrZXkgZm9yIGFsbCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZhbHVlIHRvIGJlIHVzZWQgYXMgdGhlIGtleSBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IGZvciB0aWxlcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuc2V0S2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBpZiAodGhpcy5rZXlfICE9PSBrZXkpIHtcbiAgICAgICAgICAgIHRoaXMua2V5XyA9IGtleTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gT3BhcXVlLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldE9wYXF1ZSA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wYXF1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucy5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQuZ2V0UmVzb2x1dGlvbnMoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdGlsZSBncmlkIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaWxlIGdyaWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVHcmlkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGhpcy50aWxlR3JpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZUNhY2hlLmpzXCIpLmRlZmF1bHR9IFRpbGUgY2FjaGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBhc3NlcnQoZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbiksIDY4IC8vIEEgVmVjdG9yVGlsZSBzb3VyY2UgY2FuIG9ubHkgYmUgcmVuZGVyZWQgaWYgaXQgaGFzIGEgcHJvamVjdGlvbiBjb21wYXRpYmxlIHdpdGggdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIHBpeGVsIHJhdGlvIGZvciB0aGlzIHNvdXJjZS4gU3ViY2xhc3NlcyBtYXkgb3ZlcnJpZGUgdGhpc1xuICAgICAqIG1ldGhvZCwgd2hpY2ggaXMgbWVhbnQgdG8gcmV0dXJuIGEgc3VwcG9ydGVkIHBpeGVsIHJhdGlvIHRoYXQgbWF0Y2hlcyB0aGVcbiAgICAgKiBwcm92aWRlZCBgcGl4ZWxSYXRpb2AgYXMgY2xvc2UgYXMgcG9zc2libGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHBpeGVsIHJhdGlvLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVQaXhlbFJhdGlvID0gZnVuY3Rpb24gKHBpeGVsUmF0aW8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVBpeGVsUmF0aW9fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBUaWxlIHNpemUuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZVBpeGVsU2l6ZSA9IGZ1bmN0aW9uICh6LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVBpeGVsUmF0aW8gPSB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZSk7XG4gICAgICAgIGlmICh0aWxlUGl4ZWxSYXRpbyA9PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gdGlsZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2NhbGVTaXplKHRpbGVTaXplLCB0aWxlUGl4ZWxSYXRpbywgdGhpcy50bXBTaXplKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHRpbGUgY29vcmRpbmF0ZSB3cmFwcGVkIGFyb3VuZCB0aGUgeC1heGlzLiBXaGVuIHRoZSB0aWxlIGNvb3JkaW5hdGVcbiAgICAgKiBpcyBvdXRzaWRlIHRoZSByZXNvbHV0aW9uIGFuZCBleHRlbnQgcmFuZ2Ugb2YgdGhlIHRpbGUgZ3JpZCwgYG51bGxgIHdpbGwgYmVcbiAgICAgKiByZXR1cm5lZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gW29wdF9wcm9qZWN0aW9uXSBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZSB0byBiZSBwYXNzZWQgdG8gdGhlIHRpbGVVcmxGdW5jdGlvbiBvclxuICAgICAqICAgICBudWxsIGlmIG5vIHRpbGUgVVJMIHNob3VsZCBiZSBjcmVhdGVkIGZvciB0aGUgcGFzc2VkIGB0aWxlQ29vcmRgLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGhpcy5nZXRXcmFwWCgpICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgICAgICAgdGlsZUNvb3JkID0gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpdGhpbkV4dGVudEFuZFoodGlsZUNvb3JkLCB0aWxlR3JpZCkgPyB0aWxlQ29vcmQgOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBjYWNoZWQgdGlsZXMgZnJvbSB0aGUgc291cmNlLiBUaGUgbmV4dCByZW5kZXIgY3ljbGUgd2lsbCBmZXRjaCBuZXcgdGlsZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5jbGVhcigpO1xuICAgIH07XG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnJlZnJlc2guY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluY3JlYXNlcyB0aGUgY2FjaGUgc2l6ZSBpZiBuZWVkZWRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZUNvdW50IE1pbmltdW0gbnVtYmVyIG9mIHRpbGVzIG5lZWRlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUudXBkYXRlQ2FjaGVTaXplID0gZnVuY3Rpb24gKHRpbGVDb3VudCwgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGlsZUNvdW50ID4gdGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspIHtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrID0gdGlsZUNvdW50O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYXJrcyBhIHRpbGUgY29vcmQgYXMgYmVpbmcgdXNlZCwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgbG9hZC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUudXNlVGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5LCBwcm9qZWN0aW9uKSB7IH07XG4gICAgcmV0dXJuIFRpbGVTb3VyY2U7XG59KFNvdXJjZSkpO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGVTb3VyY2V9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXNcbiAqIHR5cGUuXG4gKi9cbnZhciBUaWxlU291cmNlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVTb3VyY2VFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRoZSB0aWxlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVTb3VyY2VFdmVudCh0eXBlLCB0aWxlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGlsZSByZWxhdGVkIHRvIHRoZSBldmVudC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZSA9IHRpbGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFRpbGVTb3VyY2VFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IFRpbGVTb3VyY2VFdmVudCB9O1xuZXhwb3J0IGRlZmF1bHQgVGlsZVNvdXJjZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGV1cmxmdW5jdGlvblxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGhhc2ggYXMgdGlsZUNvb3JkSGFzaCB9IGZyb20gJy4vdGlsZWNvb3JkLmpzJztcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIFRlbXBsYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHRpbGVHcmlkKSB7XG4gICAgdmFyIHpSZWdFeCA9IC9cXHt6XFx9L2c7XG4gICAgdmFyIHhSZWdFeCA9IC9cXHt4XFx9L2c7XG4gICAgdmFyIHlSZWdFeCA9IC9cXHt5XFx9L2c7XG4gICAgdmFyIGRhc2hZUmVnRXggPSAvXFx7LXlcXH0vZztcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aWxlQ29vcmQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICAgICAgICAgICAgICAucmVwbGFjZSh6UmVnRXgsIHRpbGVDb29yZFswXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHhSZWdFeCwgdGlsZUNvb3JkWzFdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoeVJlZ0V4LCB0aWxlQ29vcmRbMl0udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZShkYXNoWVJlZ0V4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgICAgICAgICAgdmFyIHJhbmdlID0gdGlsZUdyaWQuZ2V0RnVsbFRpbGVSYW5nZSh6KTtcbiAgICAgICAgICAgICAgICBhc3NlcnQocmFuZ2UsIDU1KTsgLy8gVGhlIHsteX0gcGxhY2Vob2xkZXIgcmVxdWlyZXMgYSB0aWxlIGdyaWQgd2l0aCBleHRlbnRcbiAgICAgICAgICAgICAgICB2YXIgeSA9IHJhbmdlLmdldEhlaWdodCgpIC0gdGlsZUNvb3JkWzJdIC0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4geS50b1N0cmluZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSB0ZW1wbGF0ZXMgVGVtcGxhdGVzLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGVtcGxhdGVzKHRlbXBsYXRlcywgdGlsZUdyaWQpIHtcbiAgICB2YXIgbGVuID0gdGVtcGxhdGVzLmxlbmd0aDtcbiAgICB2YXIgdGlsZVVybEZ1bmN0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgdGlsZVVybEZ1bmN0aW9uc1tpXSA9IGNyZWF0ZUZyb21UZW1wbGF0ZSh0ZW1wbGF0ZXNbaV0sIHRpbGVHcmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbj59IHRpbGVVcmxGdW5jdGlvbnMgVGlsZSBVUkwgRnVuY3Rpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpIHtcbiAgICBpZiAodGlsZVVybEZ1bmN0aW9ucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbMF07XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBoID0gdGlsZUNvb3JkSGFzaCh0aWxlQ29vcmQpO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gbW9kdWxvKGgsIHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zW2luZGV4XSh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbnVsbFRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEFycmF5IG9mIHVybHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRVcmwodXJsKSB7XG4gICAgdmFyIHVybHMgPSBbXTtcbiAgICB2YXIgbWF0Y2ggPSAvXFx7KFthLXpdKS0oW2Etel0pXFx9Ly5leGVjKHVybCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIC8vIGNoYXIgcmFuZ2VcbiAgICAgICAgdmFyIHN0YXJ0Q2hhckNvZGUgPSBtYXRjaFsxXS5jaGFyQ29kZUF0KDApO1xuICAgICAgICB2YXIgc3RvcENoYXJDb2RlID0gbWF0Y2hbMl0uY2hhckNvZGVBdCgwKTtcbiAgICAgICAgdmFyIGNoYXJDb2RlID0gdm9pZCAwO1xuICAgICAgICBmb3IgKGNoYXJDb2RlID0gc3RhcnRDaGFyQ29kZTsgY2hhckNvZGUgPD0gc3RvcENoYXJDb2RlOyArK2NoYXJDb2RlKSB7XG4gICAgICAgICAgICB1cmxzLnB1c2godXJsLnJlcGxhY2UobWF0Y2hbMF0sIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybHM7XG4gICAgfVxuICAgIG1hdGNoID0gL1xceyhcXGQrKS0oXFxkKylcXH0vLmV4ZWModXJsKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgLy8gbnVtYmVyIHJhbmdlXG4gICAgICAgIHZhciBzdG9wXzEgPSBwYXJzZUludChtYXRjaFsyXSwgMTApO1xuICAgICAgICBmb3IgKHZhciBpID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTsgaSA8PSBzdG9wXzE7IGkrKykge1xuICAgICAgICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKG1hdGNoWzBdLCBpLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJscztcbiAgICB9XG4gICAgdXJscy5wdXNoKHVybCk7XG4gICAgcmV0dXJuIHVybHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aWxldXJsZnVuY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVXJsVGlsZVxuICovXG5pbXBvcnQgVGlsZUV2ZW50VHlwZSBmcm9tICcuL1RpbGVFdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVTb3VyY2UsIHsgVGlsZVNvdXJjZUV2ZW50IH0gZnJvbSAnLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUZyb21UZW1wbGF0ZXMsIGV4cGFuZFVybCB9IGZyb20gJy4uL3RpbGV1cmxmdW5jdGlvbi5qcyc7XG5pbXBvcnQgeyBnZXRLZXlaWFkgfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIENhY2hlIHNpemUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlXSBTdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlR3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZUxvYWRGdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW9dIFRpbGVQaXhlbFJhdGlvLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBbdGlsZVVybEZ1bmN0aW9uXSBUaWxlVXJsRnVuY3Rpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF0gVXJsLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc10gVXJscy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdyYXBYLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXSBUcmFuc2l0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXldIEtleS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW3pEaXJlY3Rpb249MF0gWkRpcmVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPWZhbHNlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogdGhlIG5lYXJlc3QgbmVpZ2hib3IgaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgdGlsZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkIG92ZXIgaHR0cC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICovXG52YXIgVXJsVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVXJsVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFVybFRpbGUob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgICAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGludGVycG9sYXRlOiBvcHRpb25zLmludGVycG9sYXRlLFxuICAgICAgICAgICAga2V5OiBvcHRpb25zLmtleSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgICAgICAgekRpcmVjdGlvbjogb3B0aW9ucy56RGlyZWN0aW9uLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8gPVxuICAgICAgICAgICAgX3RoaXMudGlsZVVybEZ1bmN0aW9uID09PSBVcmxUaWxlLnByb3RvdHlwZS50aWxlVXJsRnVuY3Rpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVMb2FkRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb247XG4gICAgICAgIGlmIChvcHRpb25zLnRpbGVVcmxGdW5jdGlvbikge1xuICAgICAgICAgICAgX3RoaXMudGlsZVVybEZ1bmN0aW9uID0gb3B0aW9ucy50aWxlVXJsRnVuY3Rpb247XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxzdHJpbmc+fG51bGx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51cmxzID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMudXJscykge1xuICAgICAgICAgICAgX3RoaXMuc2V0VXJscyhvcHRpb25zLnVybHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRVcmwob3B0aW9ucy51cmwpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUxvYWRpbmdLZXlzXyA9IHt9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdGlsZSBsb2FkIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFRpbGVMb2FkRnVuY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUxvYWRGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUxvYWRGdW5jdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgdGlsZSBVUkwgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlVXJsRnVuY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuZ2V0VGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLnRpbGVVcmxGdW5jdGlvbiA9PT0gdGhpcy50aWxlVXJsRnVuY3Rpb25cbiAgICAgICAgICAgID8gdGhpcy50aWxlVXJsRnVuY3Rpb24uYmluZCh0aGlzKVxuICAgICAgICAgICAgOiB0aGlzLnRpbGVVcmxGdW5jdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgVVJMcyB1c2VkIGZvciB0aGlzIHNvdXJjZS5cbiAgICAgKiBXaGVuIGEgdGlsZVVybEZ1bmN0aW9uIGlzIHVzZWQgaW5zdGVhZCBvZiB1cmwgb3IgdXJscyxcbiAgICAgKiBudWxsIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICogQHJldHVybiB7IUFycmF5PHN0cmluZz58bnVsbH0gVVJMcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuZ2V0VXJscyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJscztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSB0aWxlIGNoYW5nZSBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmhhbmRsZVRpbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIHZhciB1aWQgPSBnZXRVaWQodGlsZSk7XG4gICAgICAgIHZhciB0aWxlU3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIHZhciB0eXBlO1xuICAgICAgICBpZiAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVMb2FkaW5nS2V5c19bdWlkXSA9IHRydWU7XG4gICAgICAgICAgICB0eXBlID0gVGlsZUV2ZW50VHlwZS5USUxFTE9BRFNUQVJUO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVpZCBpbiB0aGlzLnRpbGVMb2FkaW5nS2V5c18pIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbGVMb2FkaW5nS2V5c19bdWlkXTtcbiAgICAgICAgICAgIHR5cGUgPVxuICAgICAgICAgICAgICAgIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRVJST1JcbiAgICAgICAgICAgICAgICAgICAgPyBUaWxlRXZlbnRUeXBlLlRJTEVMT0FERVJST1JcbiAgICAgICAgICAgICAgICAgICAgOiB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBUaWxlRXZlbnRUeXBlLlRJTEVMT0FERU5EXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVGlsZVNvdXJjZUV2ZW50KHR5cGUsIHRpbGUpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0aWxlIGxvYWQgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGUgbG9hZCBmdW5jdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VGlsZUxvYWRGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlTG9hZEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLmNsZWFyKCk7XG4gICAgICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbiA9IHRpbGVMb2FkRnVuY3Rpb247XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0aWxlIFVSTCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gdGlsZVVybEZ1bmN0aW9uIFRpbGUgVVJMIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBba2V5XSBPcHRpb25hbCBuZXcgdGlsZSBrZXkgZm9yIHRoZSBzb3VyY2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnNldFRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlVXJsRnVuY3Rpb24sIGtleSkge1xuICAgICAgICB0aGlzLnRpbGVVcmxGdW5jdGlvbiA9IHRpbGVVcmxGdW5jdGlvbjtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUucHJ1bmVFeGNlcHROZXdlc3RaKCk7XG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5zZXRLZXkoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIFVSTCB0byB1c2UgZm9yIHJlcXVlc3RzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRVcmwgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciB1cmxzID0gZXhwYW5kVXJsKHVybCk7XG4gICAgICAgIHRoaXMudXJscyA9IHVybHM7XG4gICAgICAgIHRoaXMuc2V0VXJscyh1cmxzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgVVJMcyB0byB1c2UgZm9yIHJlcXVlc3RzLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdXJscyBVUkxzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRVcmxzID0gZnVuY3Rpb24gKHVybHMpIHtcbiAgICAgICAgdGhpcy51cmxzID0gdXJscztcbiAgICAgICAgdmFyIGtleSA9IHVybHMuam9pbignXFxuJyk7XG4gICAgICAgIGlmICh0aGlzLmdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXykge1xuICAgICAgICAgICAgdGhpcy5zZXRUaWxlVXJsRnVuY3Rpb24oY3JlYXRlRnJvbVRlbXBsYXRlcyh1cmxzLCB0aGlzLnRpbGVHcmlkKSwga2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0S2V5KGtleSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUudGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFya3MgYSB0aWxlIGNvb3JkIGFzIGJlaW5nIHVzZWQsIHdpdGhvdXQgdHJpZ2dlcmluZyBhIGxvYWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUudXNlVGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5KSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmRLZXkgPSBnZXRLZXlaWFkoeiwgeCwgeSk7XG4gICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICB0aGlzLnRpbGVDYWNoZS5nZXQodGlsZUNvb3JkS2V5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFVybFRpbGU7XG59KFRpbGVTb3VyY2UpKTtcbmV4cG9ydCBkZWZhdWx0IFVybFRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1VcmxUaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZUV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRpbGUgc3RhcnRzIGxvYWRpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRzdGFydFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BRFNUQVJUOiAndGlsZWxvYWRzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSB0aWxlIGZpbmlzaGVzIGxvYWRpbmcsIGVpdGhlciB3aGVuIGl0cyBkYXRhIGlzIGxvYWRlZCxcbiAgICAgKiBvciB3aGVuIGxvYWRpbmcgd2FzIGFib3J0ZWQgYmVjYXVzZSB0aGUgdGlsZSBpcyBubyBsb25nZXIgbmVlZGVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2FkZW5kXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRJTEVMT0FERU5EOiAndGlsZWxvYWRlbmQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBpZiB0aWxlIGxvYWRpbmcgcmVzdWx0cyBpbiBhbiBlcnJvci5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVycm9yXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRJTEVMT0FERVJST1I6ICd0aWxlbG9hZGVycm9yJyxcbn07XG4vKipcbiAqIEB0eXBlZGVmIHsndGlsZWxvYWRzdGFydCd8J3RpbGVsb2FkZW5kJ3wndGlsZWxvYWRlcnJvcid9IFRpbGVTb3VyY2VFdmVudFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVFdmVudFR5cGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZUltYWdlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VUaWxlIGZyb20gJy4uL0ltYWdlVGlsZS5qcyc7XG5pbXBvcnQgUmVwcm9qVGlsZSBmcm9tICcuLi9yZXByb2ovVGlsZS5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVXJsVGlsZSBmcm9tICcuL1VybFRpbGUuanMnO1xuaW1wb3J0IHsgRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfSBmcm9tICcuLi9yZXByb2ovY29tbW9uLmpzJztcbmltcG9ydCB7IGVxdWl2YWxlbnQsIGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRLZXksIGdldEtleVpYWSB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBnZXRGb3JQcm9qZWN0aW9uIGFzIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBJbml0aWFsIHRpbGUgY2FjaGUgc2l6ZS4gV2lsbCBhdXRvLWdyb3cgdG8gaG9sZCBhdCBsZWFzdCB0aGUgbnVtYmVyIG9mIHRpbGVzIGluIHRoZSB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW1hZ2VTbW9vdGhpbmc9dHJ1ZV0gRGVwcmVjYXRlZC4gIFVzZSB0aGUgYGludGVycG9sYXRlYCBvcHRpb24gaW5zdGVhZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPXRydWVdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiBsaW5lYXIgaW50ZXJwb2xhdGlvbiBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy4gIFNldCB0byBmYWxzZSB0byB1c2UgdGhlIG5lYXJlc3QgbmVpZ2hib3IgaW5zdGVhZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gW3N0YXRlXSBTb3VyY2Ugc3RhdGUuXG4gKiBAcHJvcGVydHkge3R5cGVvZiBpbXBvcnQoXCIuLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gW3RpbGVDbGFzc10gQ2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSBpbWFnZSB0aWxlcy5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9JbWFnZVRpbGV+SW1hZ2VUaWxlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlIGdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBbdGlsZUxvYWRGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9hZCBhIHRpbGUgZ2l2ZW4gYSBVUkwuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAqICAgaW1hZ2VUaWxlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogfTtcbiAqIGBgYFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpbz0xXSBUaGUgcGl4ZWwgcmF0aW8gdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGVcbiAqIHNlcnZpY2UgYWR2ZXJ0aXplcyAyNTZweCBieSAyNTZweCB0aWxlcyBidXQgYWN0dWFsbHkgc2VuZHMgNTEycHhcbiAqIGJ5IDUxMnB4IGltYWdlcyAoZm9yIHJldGluYS9oaWRwaSBkZXZpY2VzKSB0aGVuIGB0aWxlUGl4ZWxSYXRpb2BcbiAqIHNob3VsZCBiZSBzZXQgdG8gYDJgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBbdGlsZVVybEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBnZXQgdGlsZSBVUkwgZ2l2ZW4gYSB0aWxlIGNvb3JkaW5hdGUgYW5kIHRoZSBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVSTCB0ZW1wbGF0ZS4gTXVzdCBpbmNsdWRlIGB7eH1gLCBge3l9YCBvciBgey15fWAsIGFuZCBge3p9YCBwbGFjZWhvbGRlcnMuXG4gKiBBIGB7Py0/fWAgdGVtcGxhdGUgcGF0dGVybiwgZm9yIGV4YW1wbGUgYHN1YmRvbWFpbnthLWZ9LmRvbWFpbi5jb21gLCBtYXkgYmVcbiAqIHVzZWQgaW5zdGVhZCBvZiBkZWZpbmluZyBlYWNoIG9uZSBzZXBhcmF0ZWx5IGluIHRoZSBgdXJsc2Agb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc10gQW4gYXJyYXkgb2YgVVJMIHRlbXBsYXRlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS4gVGhlIGRlZmF1bHQsIGlzIHRvXG4gKiByZXF1ZXN0IG91dC1vZi1ib3VuZHMgdGlsZXMgZnJvbSB0aGUgc2VydmVyLiBXaGVuIHNldCB0byBgZmFsc2VgLCBvbmx5IG9uZVxuICogd29ybGQgd2lsbCBiZSByZW5kZXJlZC4gV2hlbiBzZXQgdG8gYHRydWVgLCB0aWxlcyB3aWxsIGJlIHJlcXVlc3RlZCBmb3Igb25lXG4gKiB3b3JsZCBvbmx5LCBidXQgdGhleSB3aWxsIGJlIHdyYXBwZWQgaG9yaXpvbnRhbGx5IHRvIHJlbmRlciBtdWx0aXBsZSB3b3JsZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gT3B0aW9uYWwgdGlsZSBrZXkgZm9yIHByb3BlciBjYWNoZSBmZXRjaGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXVxuICogQ2hvb3NlIHdoZXRoZXIgdG8gdXNlIHRpbGVzIHdpdGggYSBoaWdoZXIgb3IgbG93ZXIgem9vbSBsZXZlbCB3aGVuIGJldHdlZW4gaW50ZWdlclxuICogem9vbSBsZXZlbHMuIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3RpbGVncmlkL1RpbGVHcmlkflRpbGVHcmlkI2dldFpGb3JSZXNvbHV0aW9ufS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciBzb3VyY2VzIHByb3ZpZGluZyBpbWFnZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL1RpbGUuanNcIikuVGlsZVNvdXJjZUV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlSW1hZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVJbWFnZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPcHRpb25zfSBvcHRpb25zIEltYWdlIHRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlSW1hZ2Uob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmltYWdlU21vb3RoaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmltYWdlU21vb3RoaW5nIDogdHJ1ZTtcbiAgICAgICAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmludGVycG9sYXRlO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICAgICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgICAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvblxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbixcbiAgICAgICAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGludGVycG9sYXRlOiBpbnRlcnBvbGF0ZSxcbiAgICAgICAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbiA9XG4gICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNyb3NzT3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge3R5cGVvZiBJbWFnZVRpbGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2xhc3MgPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlQ2xhc3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUNsYXNzIDogSW1hZ2VUaWxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIFRpbGVDYWNoZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfID0gb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5jYW5FeHBpcmVDYWNoZS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2tleV0uY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHVzZWRUaWxlcykge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICBfc3VwZXIucHJvdG90eXBlLmV4cGlyZUNhY2hlLmNhbGwodGhpcywgcHJvamVjdGlvbiwgdXNlZFRpbGVzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXNlZFRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuZXhwaXJlQ2FjaGUodGhpcy50aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXTtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRHdXR0ZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRHdXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBrZXkgdG8gYmUgdXNlZCBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXkgPSBfc3VwZXIucHJvdG90eXBlLmdldEtleS5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuZ2V0SW50ZXJwb2xhdGUoKSkge1xuICAgICAgICAgICAga2V5ICs9ICc6ZGlzYWJsZS1pbnRlcnBvbGF0aW9uJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldE9wYXF1ZSA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0T3BhcXVlLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLnRpbGVHcmlkICYmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9XG4gICAgICAgICAgICAgICAgICAgIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24uY2FsbCh0aGlzLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKCF0aGlzUHJvaiB8fCBlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV0gPSBuZXcgVGlsZUNhY2hlKHRoaXMudGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBzZXQgb24gdGhlIHRpbGUuXG4gICAgICogQHJldHVybiB7IUltYWdlVGlsZX0gVGlsZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY3JlYXRlVGlsZV8gPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgICAgIHZhciB1cmxUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVVybCA9IHVybFRpbGVDb29yZFxuICAgICAgICAgICAgPyB0aGlzLnRpbGVVcmxGdW5jdGlvbih1cmxUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHRpbGUgPSBuZXcgdGhpcy50aWxlQ2xhc3ModGlsZUNvb3JkLCB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyBUaWxlU3RhdGUuSURMRSA6IFRpbGVTdGF0ZS5FTVBUWSwgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gdGlsZVVybCA6ICcnLCB0aGlzLmNyb3NzT3JpZ2luLCB0aGlzLnRpbGVMb2FkRnVuY3Rpb24sIHRoaXMudGlsZU9wdGlvbnMpO1xuICAgICAgICB0aWxlLmtleSA9IGtleTtcbiAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IShJbWFnZVRpbGV8UmVwcm9qVGlsZSl9IFRpbGUuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHNvdXJjZVByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB8fFxuICAgICAgICAgICAgIXNvdXJjZVByb2plY3Rpb24gfHxcbiAgICAgICAgICAgICFwcm9qZWN0aW9uIHx8XG4gICAgICAgICAgICBlcXVpdmFsZW50KHNvdXJjZVByb2plY3Rpb24sIHByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbiB8fCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgICAgICAgICB2YXIgdGlsZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZhciB0aWxlQ29vcmRLZXkgPSBnZXRLZXkodGlsZUNvb3JkKTtcbiAgICAgICAgICAgIGlmIChjYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICAgICAgdGlsZSA9IGNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGtleSA9IHRoaXMuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAodGlsZSAmJiB0aWxlLmtleSA9PSBrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHNvdXJjZVByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRUaWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3VGlsZSA9IG5ldyBSZXByb2pUaWxlKHNvdXJjZVByb2plY3Rpb24sIHNvdXJjZVRpbGVHcmlkLCBwcm9qZWN0aW9uLCB0YXJnZXRUaWxlR3JpZCwgdGlsZUNvb3JkLCB3cmFwcGVkVGlsZUNvb3JkLCB0aGlzLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pLCB0aGlzLmdldEd1dHRlcigpLCBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLCB0aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXywgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18sIHRoaXMuZ2V0SW50ZXJwb2xhdGUoKSk7XG4gICAgICAgICAgICAgICAgbmV3VGlsZS5rZXkgPSBrZXk7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGlsZS5pbnRlcmltVGlsZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RpbGUucmVmcmVzaEludGVyaW1DaGFpbigpO1xuICAgICAgICAgICAgICAgICAgICBjYWNoZS5yZXBsYWNlKHRpbGVDb29yZEtleSwgbmV3VGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZS5zZXQodGlsZUNvb3JkS2V5LCBuZXdUaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1RpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IShJbWFnZVRpbGV8UmVwcm9qVGlsZSl9IFRpbGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUludGVybmFsID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGUgPSBudWxsO1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgaWYgKCF0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy5jcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpO1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuc2V0KHRpbGVDb29yZEtleSwgdGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICBpZiAodGlsZS5rZXkgIT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHNvdXJjZSdzIHBhcmFtcyBjaGFuZ2VkLiBJZiB0aGUgdGlsZSBoYXMgYW4gaW50ZXJpbSB0aWxlIGFuZCBpZiB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiB1c2UgaXQgdGhlbiB3ZSB1c2UgaXQuIE90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgdGlsZS4gIEluIGJvdGhcbiAgICAgICAgICAgICAgICAvLyBjYXNlcyB3ZSBhdHRlbXB0IHRvIGFzc2lnbiBhbiBpbnRlcmltIHRpbGUgdG8gdGhlIG5ldyB0aWxlLlxuICAgICAgICAgICAgICAgIHZhciBpbnRlcmltVGlsZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgICAgICAgICAgICAvL21ha2UgdGhlIG5ldyB0aWxlIHRoZSBoZWFkIG9mIHRoZSBsaXN0LFxuICAgICAgICAgICAgICAgIGlmIChpbnRlcmltVGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIG9sZCB0aWxlIGhhc24ndCBiZWd1biBsb2FkaW5nIHlldCwgYW5kIGlzIG5vdyBvdXRkYXRlZCwgc28gd2UgY2FuIHNpbXBseSBkaXNjYXJkIGl0XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIHRvIHJlbmRlciByZXByb2plY3Rpb24gZWRnZXMgb3Igbm90ICh1c3VhbGx5IGZvciBkZWJ1Z2dpbmcpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVuZGVyIFJlbmRlciB0aGUgZWRnZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMgPSBmdW5jdGlvbiAocmVuZGVyKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfHxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID09IHJlbmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gcmVuZGVyO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltpZF0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRpbGUgZ3JpZCB0byB1c2Ugd2hlbiByZXByb2plY3RpbmcgdGhlIHRpbGVzIHRvIHRoZSBnaXZlblxuICAgICAqIHByb2plY3Rpb24gaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gdGhlIGRlZmF1bHQgdGlsZSBncmlkIGNhbm5vdCBiZSBjcmVhdGVkXG4gICAgICogKGUuZy4gcHJvamVjdGlvbiBoYXMgbm8gZXh0ZW50IGRlZmluZWQpIG9yXG4gICAgICogZm9yIG9wdGltaXphdGlvbiByZWFzb25zIChjdXN0b20gdGlsZSBzaXplLCByZXNvbHV0aW9ucywgLi4uKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZWdyaWQgVGlsZSBncmlkIHRvIHVzZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHRpbGVncmlkKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgdmFyIHByb2ogPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHByb2opIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qKTtcbiAgICAgICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IHRpbGVncmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVJbWFnZTtcbn0oVXJsVGlsZSkpO1xuLyoqXG4gKiBAcGFyYW0ge0ltYWdlVGlsZX0gaW1hZ2VUaWxlIEltYWdlIHRpbGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNvdXJjZS5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGltYWdlVGlsZS5nZXRJbWFnZSgpKS5zcmMgPVxuICAgICAgICBzcmM7XG59XG5leHBvcnQgZGVmYXVsdCBUaWxlSW1hZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlSW1hZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9YWVpcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBUaWxlSW1hZ2UgZnJvbSAnLi9UaWxlSW1hZ2UuanMnO1xuaW1wb3J0IHsgY3JlYXRlWFlaLCBleHRlbnRGcm9tUHJvamVjdGlvbiB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIERlcHJlY2F0ZWQuICBVc2UgdGhlIGBpbnRlcnBvbGF0ZWAgb3B0aW9uIGluc3RlYWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZT10cnVlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogbGluZWFyIGludGVycG9sYXRpb24gaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuICBTZXQgdG8gZmFsc2UgdG8gdXNlIHRoZSBuZWFyZXN0IG5laWdoYm9yIGluc3RlYWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT00Ml0gT3B0aW9uYWwgbWF4IHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gT3B0aW9uYWwgbWluIHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIE9wdGlvbmFsIHRpbGUgZ3JpZCByZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW89MV0gVGhlIHBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZSBzZXJ2aWNlIGFkdmVydGl6ZXMgMjU2cHggYnkgMjU2cHggdGlsZXMgYnV0IGFjdHVhbGx5IHNlbmRzIDUxMnB4XG4gKiBieSA1MTJweCBpbWFnZXMgKGZvciByZXRpbmEvaGlkcGkgZGV2aWNlcykgdGhlbiBgdGlsZVBpeGVsUmF0aW9gXG4gKiBzaG91bGQgYmUgc2V0IHRvIGAyYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRoZSB0aWxlIHNpemUgdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLlxuICogTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiBgdXJsYCBvciBgdXJsc2AgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExheWVyIHNvdXJjZSBmb3IgdGlsZSBkYXRhIHdpdGggVVJMcyBpbiBhIHNldCBYWVogZm9ybWF0IHRoYXQgYXJlXG4gKiBkZWZpbmVkIGluIGEgVVJMIHRlbXBsYXRlLiBCeSBkZWZhdWx0LCB0aGlzIGZvbGxvd3MgdGhlIHdpZGVseS11c2VkXG4gKiBHb29nbGUgZ3JpZCB3aGVyZSBgeGAgMCBhbmQgYHlgIDAgYXJlIGluIHRoZSB0b3AgbGVmdC4gR3JpZHMgbGlrZVxuICogVE1TIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIGJvdHRvbSBsZWZ0IGNhbiBiZSB1c2VkIGJ5XG4gKiB1c2luZyB0aGUgYHsteX1gIHBsYWNlaG9sZGVyIGluIHRoZSBVUkwgdGVtcGxhdGUsIHNvIGxvbmcgYXMgdGhlXG4gKiBzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIGN1c3RvbSB0aWxlIGdyaWQuIEluIHRoaXMgY2FzZVxuICogYSBgdGlsZVVybEZ1bmN0aW9uYCBjYW4gYmUgdXNlZCwgc3VjaCBhczpcbiAqIGBgYGpzXG4gKiAgdGlsZVVybEZ1bmN0aW9uOiBmdW5jdGlvbihjb29yZGluYXRlKSB7XG4gKiAgICByZXR1cm4gJ2h0dHA6Ly9tYXBzZXJ2ZXIuY29tLycgKyBjb29yZGluYXRlWzBdICsgJy8nICtcbiAqICAgICAgY29vcmRpbmF0ZVsxXSArICcvJyArICgtY29vcmRpbmF0ZVsyXSAtIDEpICsgJy5wbmcnO1xuICogIH1cbiAqIGBgYFxuICogQGFwaVxuICovXG52YXIgWFlaID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhYWVosIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFhZWiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFhZWihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmltYWdlU21vb3RoaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmltYWdlU21vb3RoaW5nIDogdHJ1ZTtcbiAgICAgICAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGUgPSBvcHRpb25zLmludGVycG9sYXRlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByb2plY3Rpb24gOiAnRVBTRzozODU3JztcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMudGlsZUdyaWRcbiAgICAgICAgICAgIDogY3JlYXRlWFlaKHtcbiAgICAgICAgICAgICAgICBleHRlbnQ6IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pLFxuICAgICAgICAgICAgICAgIG1heFJlc29sdXRpb246IG9wdGlvbnMubWF4UmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBtYXhab29tOiBvcHRpb25zLm1heFpvb20sXG4gICAgICAgICAgICAgICAgbWluWm9vbTogb3B0aW9ucy5taW5ab29tLFxuICAgICAgICAgICAgICAgIHRpbGVTaXplOiBvcHRpb25zLnRpbGVTaXplLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICAgICAgICBjcm9zc09yaWdpbjogb3B0aW9ucy5jcm9zc09yaWdpbixcbiAgICAgICAgICAgIGludGVycG9sYXRlOiBpbnRlcnBvbGF0ZSxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgICAgICAgcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsXG4gICAgICAgICAgICB0aWxlR3JpZDogdGlsZUdyaWQsXG4gICAgICAgICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiB0cnVlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFhZWjtcbn0oVGlsZUltYWdlKSk7XG5leHBvcnQgZGVmYXVsdCBYWVo7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1YWVouanMubWFwIiwiaW1wb3J0IFhZWlNvdXJjZSBmcm9tICdvbC9zb3VyY2UvWFlaLmpzJztcclxuLyoqXHJcbiAqIEF2YWlsYWJsZSBCYXNlbWFwIHZhcmlhbnRzXHJcbiAqIEBwcml2YXRlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVkFSSUFOVFMgPSB7XHJcbiAgICBnZW9sYW5kYmFzZW1hcDogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9nZW9sYW5kYmFzZW1hcC9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG4gICAgYm1hcGdyYXU6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcGdyYXUvbm9ybWFsL2dvb2dsZTM4NTcve3p9L3t5fS97eH0ucG5nJyxcclxuICAgIGJtYXBvcnRob2ZvdG8zMGNtOiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBvcnRob2ZvdG8zMGNtL25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gICAgYm1hcGdlbGFlbmRlOiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBnZWxhZW5kZS9ncmF1L2dvb2dsZTM4NTcve3p9L3t5fS97eH0uanBlZycsXHJcbiAgICBibWFwb2JlcmZsYWVjaGU6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcG9iZXJmbGFlY2hlL2dyYXUvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5qcGVnJyxcclxuICAgIGJtYXBvdmVybGF5OiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBvdmVybGF5L25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LnBuZycsXHJcbn07XHJcbi8qKlxyXG4gKiBDb252ZW5pZW5jZSBzb3VyY2UgZm9yIGJhc2VtYXAuYXQgcmFzdGVyIG1hcHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZW1hcFNvdXJjZSBleHRlbmRzIFhZWlNvdXJjZSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9uc1xyXG4gICAgICogQHBhcmFtIHtrZXlvZiB2YXJpYW50c30gW29wdGlvbnMudmFyaWFudD1cImdlb2xhbmRiYXNlbWFwXCJdIEJhc2VtYXAgdmFyaWFudFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgdmFyaWFudCA9IChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMudmFyaWFudCkgfHwgJ2dlb2xhbmRiYXNlbWFwJztcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIHVybDogVkFSSUFOVFNbdmFyaWFudF0sXHJcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogJ0dydW5ka2FydGU6IDxhIGhyZWY9XCJodHRwczovL2Jhc2VtYXAuYXQvXCI+YmFzZW1hcC5hdDwvYT4nLFxyXG4gICAgICAgICAgICBjcm9zc09yaWdpbjogXCJBbm9ueW1vdXNcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCAnLi4vLi4vLi4vc3JjL2luZGV4Q29yZS5zY3NzJztcclxuaW1wb3J0IFRpbGVMYXllciBmcm9tIFwib2wvbGF5ZXIvVGlsZVwiO1xyXG5pbXBvcnQgVmlldyBmcm9tIFwib2wvVmlld1wiO1xyXG5pbXBvcnQgTWFwIGZyb20gXCJvbC9NYXBcIjtcclxuaW1wb3J0IHsgQXR0cmlidXRpb24sIEJhc2VtYXBTb3VyY2UsIEJvdHRvbVJpZ2h0LCBGb290ZXIsIEdlb0xvY2F0ZSwgTGF5ZXIsIE1vdXNlUG9zaXRpb24sIE92ZXJ2aWV3LCBQcmludCwgU2NhbGVMaW5lLCBTaGFyZSwgVG9vbHMsIFRvcFJpZ2h0LCBWaWV3TGlzdCwgWm9vbSB9IGZyb20gXCIuLi8uLi8uLi9zcmNcIjtcclxuaW1wb3J0IHsgZ2V0Q2VudGVyIH0gZnJvbSBcIm9sL2V4dGVudFwiO1xyXG5uZXcgTWFwKHtcclxuICAgIHRhcmdldDogJ2JnaXMtbWFwJyxcclxuICAgIGxheWVyczogW25ldyBUaWxlTGF5ZXIoe1xyXG4gICAgICAgICAgICBzb3VyY2U6IG5ldyBCYXNlbWFwU291cmNlKClcclxuICAgICAgICB9KV0sXHJcbiAgICBjb250cm9sczogW1xyXG4gICAgICAgIG5ldyBGb290ZXIoW1xyXG4gICAgICAgICAgICBuZXcgU2NhbGVMaW5lKCksXHJcbiAgICAgICAgICAgIG5ldyBNb3VzZVBvc2l0aW9uKCksXHJcbiAgICAgICAgICAgIG5ldyBBdHRyaWJ1dGlvbigpLFxyXG4gICAgICAgIF0pLFxyXG4gICAgICAgIG5ldyBCb3R0b21SaWdodCh7IGhvcml6b250YWxDb250cm9sczogW25ldyBMYXllcigpLFxyXG4gICAgICAgICAgICAgICAgbmV3IFZpZXdMaXN0KCldLFxyXG4gICAgICAgICAgICB2ZXJ0aWNhbENvbnRyb2xzOiBbbmV3IFByaW50KCksXHJcbiAgICAgICAgICAgICAgICBuZXcgU2hhcmUoKSwgbmV3IFRvb2xzKCldXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgbmV3IFRvcFJpZ2h0KFtcclxuICAgICAgICAgICAgbmV3IEdlb0xvY2F0ZSgpLFxyXG4gICAgICAgICAgICBuZXcgWm9vbSgpLFxyXG4gICAgICAgIF0pLFxyXG4gICAgICAgIG5ldyBPdmVydmlldygpXHJcbiAgICBdLFxyXG4gICAgdmlldzogbmV3IFZpZXcoe1xyXG4gICAgICAgIGNlbnRlcjogZ2V0Q2VudGVyKFsxMDYwMDAwLCA1ODM4MDMwLCAxOTEzNTMwLCA2MjgxMjkwXSksXHJcbiAgICAgICAgY29uc3RyYWluT25seUNlbnRlcjogdHJ1ZSxcclxuICAgICAgICBjb25zdHJhaW5SZXNvbHV0aW9uOiBmYWxzZSxcclxuICAgICAgICBleHRlbnQ6IFsxMDYwMDAwLCA1ODM4MDMwLCAxOTEzNTMwLCA2MjgxMjkwXSxcclxuICAgICAgICBtYXhab29tOiAxNSxcclxuICAgICAgICBtaW5ab29tOiA2LFxyXG4gICAgICAgIHpvb206IDcsXHJcbiAgICB9KVxyXG59KTtcclxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcbi8qKlxyXG4gKiBBIHNpbXBsZSBmb290ZXIge0BsaW5rY29kZSBDb250YWluZXJ9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRm9vdGVyIGV4dGVuZHMgQ29udGFpbmVyIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIFRoZSBjaGlsZCBjb250cm9scyBmb3IgdGhlIGZvb3RlciBjb250YWluZXJcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgY29udHJvbCBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNoaWxkQ29udHJvbHMsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMpLCB7IHN0eWxlQ2xhc3M6ICdiZ2lzLWZvb3RlcicsIGNoaWxkQ29udHJvbHMgfSkpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGRlZmF1bHQgYXMgT2xNb3VzZVBvc2l0aW9uIH0gZnJvbSAnb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uJztcclxuaW1wb3J0IHsgZm9ybWF0IH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XHJcbi8qKlxyXG4gKiBEaXNwbGF5cyB0aGUgbW91c2UgcG9zaXRpb24gaW4gdGhlIG1hcC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb3VzZVBvc2l0aW9uIGV4dGVuZHMgT2xNb3VzZVBvc2l0aW9uIHtcclxuICAgIC8qKlxyXG4gICAgICAgKiBDcmVhdGVzIGEgbmV3IG1vdXNlIHBvc2l0aW9uIGNvbnRyb2wgd2l0aCB0aGUgZGZhdWx0IHZhbHVlcy4uXHJcbiAgICAgICAqIGBgYHR5cGVzY3JpcHRcclxuICAgICAgICogLy8gRXhhbXBsZTogY3JlYXRlIGEgbmV3IE1vdXNlUG9zaXRpb24gY29udHJvbCB3aXRoIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXHJcbiAgICAgICAqIGNvbnN0IG1vdXNlUG9zaXRpb25Db250cm9sID0gbmV3IE1vdXNlUG9zaXRpb24oKTtcclxuICAgICAgICogYGBgXHJcbiAgICAgICAqIEBwYXJhbSBvcHRpb25zIEFsbCBvcHRpb25zIG9mIHRoZSBvcmlnaW5hbCBPcGVuTGF5ZXJzIE1vdXNlUG9zaXRpb24gY29udHJvbCBhcmUgYWxvd2VkLlxyXG4gICAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuICAgICAgICBvcHRzLnByb2plY3Rpb24gPSBvcHRzLnByb2plY3Rpb24gPyBvcHRzLnByb2plY3Rpb24gOiAnRVBTRzo0MzI2JztcclxuICAgICAgICBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgPSBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgPyBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgOiAoY29vcmRpbmF0ZSkgPT4gY29vcmRpbmF0ZSA/IGZvcm1hdChjb29yZGluYXRlLCAne3h9wrBOL3t5fcKwRScsIDQpIDogJyc7XHJcbiAgICAgICAgb3B0cy51bmRlZmluZWRIVE1MID0gb3B0cy51bmRlZmluZWRIVE1MID8gb3B0cy51bmRlZmluZWRIVE1MIDogJyZuYnNwOy0mbmJzcDvCsE4vJm5ic3A7LSZuYnNwO8KwRSc7XHJcbiAgICAgICAgb3B0cy5jbGFzc05hbWUgPSBvcHRzLmNsYXNzTmFtZSA/IG9wdHMuY2xhc3NOYW1lIDogJ29sLWNvbnRyb2wgb2wtbW91c2UtcG9zaXRpb24gYmdpcy1tb3VzZXBvc2l0aW9uJztcclxuICAgICAgICBzdXBlcihvcHRzKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBkZWZhdWx0IGFzIE9sQXR0cmlidXRpb24gfSBmcm9tICdvbC9jb250cm9sL0F0dHJpYnV0aW9uJztcclxuLyoqXHJcbiAqIEEgc2ltcGxlIHdyYXBwZXIgY29udHJvbCBvZiB0aGUgT3BlbkxheWVyIEF0dHJpYnV0aW9uIGNvbnRyb2xcclxuICpcclxuICogSXQgaXMgY29sbGFwc2VkIGFuZCB3ZSBhZGQgYSBiZ2lzIHN0eWxlIGNsYXNzICgqYmdpcy1jb3B5cmlnaHQqKS5cclxuICogU29tZSB2aXNpYmxlIGNoYW5nZXMgYXJlIG1hZGUgdmlhIGNzcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGlvbiBleHRlbmRzIE9sQXR0cmlidXRpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5sYXllciBBdHRyaWJ1dGlvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7XHJcbiAgICAgICAgICAgIGNvbGxhcHNlZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN1cGVyKG9wdHMpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgKz0gJyBiZ2lzLWNvcHlyaWdodCc7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcbmltcG9ydCB7IFRvZ2dsZUJ1dHRvbiB9IGZyb20gXCIuLi9iYXNlXCI7XHJcbi8qKlxyXG4gKiBBIHtAbGlua2NvZGUgQ29udGFpbmVyfSBmb3IgZGlzcGxheSBpbiB0aGUgYm90dG9tIHJpZ2h0IGNvcm5lci5cclxuICogV2UgaGF2ZSBob3Jpem9udGFsIGNvbnRyb2xzIGFuZCB2ZXJ0aWNhbCBjb250cm9scy4gVGhlIHZpc2liaWxpdHkgb2YgdmVydGljYWxcclxuICogY29udHJvbHMgaXMgY29udHJvbGxlZCBieSBhIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJvdHRvbVJpZ2h0IGV4dGVuZHMgQ29udGFpbmVyIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zXHJcbiAgICAgKiBAZXZlbnQgVG9nZ2xlRXZlbnQgVGhlIGV2ZW50IGZpcmVkIHdoZW4gdGhlIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufSBpcyBjbGlja2VkXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgdG9nZ2xlQnV0dG9uID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucy52ZXJ0aWNhbENvbnRyb2xzICYmIG9wdGlvbnMudmVydGljYWxDb250cm9scy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lclRvVG9nZ2xlID0gbmV3IENvbnRhaW5lcih7IHN0eWxlQ2xhc3M6ICdiZ2lzLWJvdHRvbS1yaWdodC12ZXJ0aWNhbCcsIGNoaWxkQ29udHJvbHM6IG9wdGlvbnMudmVydGljYWxDb250cm9scyB9KTtcclxuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uID0gbmV3IFRvZ2dsZUJ1dHRvbih7IGNvbnRhaW5lclRvVG9nZ2xlLCBjb250YWluZXJDbGFzc05hbWU6ICdvbC1jb250cm9sIGJnaXMtY29udHJvbCBiZ2lzLWJvdHRvbS1yaWdodC1vdmVybGF5JywgdW5pY29kZTogMHhlOTA3LCB1bmljb2RlVG9nZ2xlZDogMHhlOTI0LCB0b29sdGlwOiAnbWVoci4uLicgfSk7XHJcbiAgICAgICAgICAgIG9wdGlvbnMuaG9yaXpvbnRhbENvbnRyb2xzLnB1c2godG9nZ2xlQnV0dG9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRzKSwgeyBzdHlsZUNsYXNzOiAnYmdpcy1ib3R0b20tcmlnaHQtaG9yaXpvbnRhbCcsIGNoaWxkQ29udHJvbHM6IG9wdGlvbnMuaG9yaXpvbnRhbENvbnRyb2xzIH0pKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IHRvZ2dsZUJ1dHRvbjtcclxuICAgICAgICBpZiAodGhpcy50b2dnbGVCdXR0b24gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwidG9nZ2xlXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEEgZ2V0dGVyIGZvciB0aGUge0BsaW5rY29kZSBUb2dnbGVCdXR0b259XHJcbiAgICAgKi9cclxuICAgIGdldFRvZ2dsZUJ1dHRvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b2dnbGVCdXR0b247XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4vYmFzZVwiO1xyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIExheWVycyBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTGF5ZXIgZXh0ZW5kcyBCdXR0b24ge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKHsgdW5pY29kZTogMHhlOTM4LCB0b29sdGlwOiAnQmVnbGVpdGthcnRlbiB2ZXJ3YWx0ZW4nIH0sIG9wdHMpKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi9iYXNlXCI7XHJcbi8qKlxyXG4gKiBBIGRlZmF1bHQgYnV0dG9uIHdpdGggYSBcInZpZXcgbGlzdFwiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBWaWV3TGlzdCBleHRlbmRzIEJ1dHRvbiB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgYnV0dG9uIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24oeyB1bmljb2RlOiAweGU5MzcsIHRvb2x0aXA6ICdMaXN0ZSBhbnplaWdlbicgfSwgb3B0cykpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuL2Jhc2VcIjtcclxuLyoqXHJcbiAqIEEgZGVmYXVsdCBidXR0b24gd2l0aCBhIFwicHJpbnRcIiBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJpbnQgZXh0ZW5kcyBCdXR0b24ge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKHsgdW5pY29kZTogMHhlOTEyLCB0b29sdGlwOiAnQW5zaWNodCBkcnVja2VuJywgdG9vbHRpcEFzVGV4dEVsZW1lbnQ6IHRydWUgfSwgb3B0cykpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuL2Jhc2VcIjtcclxuLyoqXHJcbiAqIEEgZGVmYXVsdCBidXR0b24gd2l0aCBhIFwidG9vbHNcIiBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9vbHMgZXh0ZW5kcyBCdXR0b24ge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKHsgdW5pY29kZTogMHhlOTNiLCB0b29sdGlwOiAnVG9vbGJveCBlaW5ibGVuZGVuJywgdG9vbHRpcEFzVGV4dEVsZW1lbnQ6IHRydWUgfSwgb3B0cykpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lclwiO1xyXG4vKipcclxuICogQSBzaW1wbGUge0BsaW5rY29kZSBDb250YWluZXJ9IGZvciBjb250cm9scyBvbiB0aGUgdXBwZXIgcmlnaHQgY29ybmVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9wUmlnaHQgZXh0ZW5kcyBDb250YWluZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgVGhlIGNoaWxkIGNvbnRyb2wgb3IgYW4gYXJyYXkgb2YgY2hpbGQgY29udHJvbHNcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihjaGlsZENvbnRyb2xzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRzKSwgeyBzdHlsZUNsYXNzOiAnYmdpcy10b3AtcmlnaHQnLCBjaGlsZENvbnRyb2xzIH0pKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBkZWZhdWx0IGFzIE9sWm9vbSB9IGZyb20gJ29sL2NvbnRyb2wvWm9vbSc7XHJcbi8qKlxyXG4gKiBab29tIGJ1dHRvbnMgY29udHJvbFxyXG4gKiBUaGUgT3BlbkxheWVycyBab29tIGNvbnRyb2wgaXMgdGhlIGJhc2UgY2xhc3NcclxuICovXHJcbmV4cG9ydCBjbGFzcyBab29tIGV4dGVuZHMgT2xab29tIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3JcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBPcGVuTGF5ZXJzIFpvb20gY29udHJvbCBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMpLCB7IHpvb21JbkxhYmVsOiBTdHJpbmcuZnJvbUNvZGVQb2ludCgweGU5MzQpLCB6b29tT3V0TGFiZWw6IFN0cmluZy5mcm9tQ29kZVBvaW50KDB4ZTkzNSkgfSkpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgem9vbS1jb250YWluZXInO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiQmFzZUV2ZW50IiwidHlwZSIsInRoaXMiLCJwcm9wYWdhdGlvblN0b3BwZWQiLCJkZWZhdWx0UHJldmVudGVkIiwidGFyZ2V0IiwicHJvdG90eXBlIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJEaXNwb3NhYmxlIiwiZGlzcG9zZWQiLCJkaXNwb3NlIiwiZGlzcG9zZUludGVybmFsIiwibnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiIsImEiLCJiIiwibGluZWFyRmluZE5lYXJlc3QiLCJhcnIiLCJkaXJlY3Rpb24iLCJuIiwibGVuZ3RoIiwiaSIsImV4dGVuZCIsImRhdGEiLCJleHRlbnNpb24iLCJBcnJheSIsImlzQXJyYXkiLCJlcXVhbHMiLCJhcnIxIiwiYXJyMiIsImxlbjEiLCJUUlVFIiwiVk9JRCIsImFzc2lnbiIsInZhcl9zb3VyY2VzIiwiVHlwZUVycm9yIiwib3V0cHV0IiwiaWkiLCJhcmd1bWVudHMiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImNsZWFyIiwib2JqZWN0IiwicHJvcGVydHkiLCJleHRlbmRTdGF0aWNzIiwiZ2V0VmFsdWVzIiwidmFsdWVzIiwicHVzaCIsIl9fZXh0ZW5kcyIsImQiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsInAiLCJjYWxsIiwiU3RyaW5nIiwiX18iLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsIl9zdXBlciIsIlRhcmdldCIsIm9wdF90YXJnZXQiLCJfdGhpcyIsImV2ZW50VGFyZ2V0XyIsInBlbmRpbmdSZW1vdmFsc18iLCJkaXNwYXRjaGluZ18iLCJsaXN0ZW5lcnNfIiwiYWRkRXZlbnRMaXN0ZW5lciIsImxpc3RlbmVyIiwibGlzdGVuZXJzIiwibGlzdGVuZXJzRm9yVHlwZSIsImluZGV4T2YiLCJkaXNwYXRjaEV2ZW50IiwiZXZlbnQiLCJldnQiLCJFdmVudCIsInByb3BhZ2F0ZSIsImRpc3BhdGNoaW5nIiwicGVuZGluZ1JlbW92YWxzIiwiaGFuZGxlRXZlbnQiLCJwciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRMaXN0ZW5lcnMiLCJ1bmRlZmluZWQiLCJoYXNMaXN0ZW5lciIsIm9wdF90eXBlIiwia2V5cyIsImluZGV4Iiwic3BsaWNlIiwibGlzdGVuIiwib3B0X3RoaXMiLCJvcHRfb25jZSIsImJpbmQiLCJvcmlnaW5hbExpc3RlbmVyXzEiLCJhcHBseSIsImV2ZW50c0tleSIsImxpc3Rlbk9uY2UiLCJ1bmxpc3RlbkJ5S2V5IiwiT2JzZXJ2YWJsZSIsIm9uIiwib25jZSIsInVuIiwicmV2aXNpb25fIiwiY2hhbmdlZCIsIkV2ZW50VHlwZSIsImdldFJldmlzaW9uIiwib25JbnRlcm5hbCIsImxlbiIsIm9uY2VJbnRlcm5hbCIsIm9sX2tleSIsInVuSW50ZXJuYWwiLCJ1bkJ5S2V5IiwiRXJyb3IiLCJ1aWRDb3VudGVyXyIsImdldFVpZCIsIm9iaiIsIm9sX3VpZCIsIk9iamVjdEV2ZW50Iiwib2xkVmFsdWUiLCJCYXNlT2JqZWN0Iiwib3B0X3ZhbHVlcyIsInZhbHVlc18iLCJzZXRQcm9wZXJ0aWVzIiwiZ2V0IiwiZ2V0S2V5cyIsImdldFByb3BlcnRpZXMiLCJoYXNQcm9wZXJ0aWVzIiwibm90aWZ5IiwiZXZlbnRUeXBlIiwiT2JqZWN0RXZlbnRUeXBlIiwiYWRkQ2hhbmdlTGlzdGVuZXIiLCJyZW1vdmVDaGFuZ2VMaXN0ZW5lciIsInNldCIsIm9wdF9zaWxlbnQiLCJhcHBseVByb3BlcnRpZXMiLCJ1bnNldCIsIkFzc2VydGlvbkVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzcGxpdCIsIm5hbWUiLCJhc3NlcnRpb24iLCJlcnJvckNvZGUiLCJtaW4iLCJtYXgiLCJNYXRoIiwiY29zaCIsIngiLCJ5IiwiZXhwIiwibG9nMiIsImxvZyIsIkxPRzJFIiwic3F1YXJlZFNlZ21lbnREaXN0YW5jZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiZHgiLCJkeSIsInQiLCJ0b0RlZ3JlZXMiLCJhbmdsZUluUmFkaWFucyIsIlBJIiwiYW5nbGVJbkRlZ3JlZXMiLCJyIiwibGVycCIsInRvRml4ZWQiLCJkZWNpbWFscyIsImZhY3RvciIsInBvdyIsInJvdW5kIiwiZmxvb3IiLCJjZWlsIiwiQmFzZUxheWVyIiwib3B0aW9ucyIsImJhY2tncm91bmRfIiwiYmFja2dyb3VuZCIsInByb3BlcnRpZXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsInpJbmRleCIsIm1heFJlc29sdXRpb24iLCJJbmZpbml0eSIsIm1pblJlc29sdXRpb24iLCJtaW5ab29tIiwibWF4Wm9vbSIsImNsYXNzTmFtZV8iLCJjbGFzc05hbWUiLCJzdGF0ZV8iLCJnZXRCYWNrZ3JvdW5kIiwiZ2V0Q2xhc3NOYW1lIiwiZ2V0TGF5ZXJTdGF0ZSIsIm9wdF9tYW5hZ2VkIiwic3RhdGUiLCJsYXllciIsIm1hbmFnZWQiLCJnZXRaSW5kZXgiLCJnZXRPcGFjaXR5Iiwic291cmNlU3RhdGUiLCJnZXRTb3VyY2VTdGF0ZSIsImdldFZpc2libGUiLCJleHRlbnQiLCJnZXRFeHRlbnQiLCJnZXRNYXhSZXNvbHV0aW9uIiwiZ2V0TWluUmVzb2x1dGlvbiIsImdldE1pblpvb20iLCJnZXRNYXhab29tIiwiZ2V0TGF5ZXJzQXJyYXkiLCJvcHRfYXJyYXkiLCJnZXRMYXllclN0YXRlc0FycmF5Iiwib3B0X3N0YXRlcyIsInNldEJhY2tncm91bmQiLCJvcHRfYmFja2dyb3VuZCIsInNldEV4dGVudCIsInNldE1heFJlc29sdXRpb24iLCJzZXRNaW5SZXNvbHV0aW9uIiwic2V0TWF4Wm9vbSIsInNldE1pblpvb20iLCJzZXRPcGFjaXR5Iiwic2V0VmlzaWJsZSIsInNldFpJbmRleCIsInppbmRleCIsImluVmlldyIsImxheWVyU3RhdGUiLCJ2aWV3U3RhdGUiLCJyZXNvbHV0aW9uIiwiem9vbSIsIkxheWVyIiwiYmFzZU9wdGlvbnMiLCJtYXBQcmVjb21wb3NlS2V5XyIsIm1hcFJlbmRlcktleV8iLCJzb3VyY2VDaGFuZ2VLZXlfIiwicmVuZGVyZXJfIiwicmVuZGVyIiwibWFwIiwic2V0TWFwIiwiaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfIiwic2V0U291cmNlIiwiYXJyYXkiLCJzdGF0ZXMiLCJnZXRTb3VyY2UiLCJnZXRTdGF0ZSIsImhhbmRsZVNvdXJjZUNoYW5nZV8iLCJnZXRGZWF0dXJlcyIsInBpeGVsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJmcmFtZVN0YXRlIiwibGF5ZXJSZW5kZXJlciIsImdldFJlbmRlcmVyIiwicHJlcGFyZUZyYW1lIiwicmVuZGVyRnJhbWUiLCJzZXRNYXBJbnRlcm5hbCIsImdldE1hcEludGVybmFsIiwibGF5ZXJTdGF0ZXNBcnJheSIsInNvbWUiLCJhcnJheUxheWVyU3RhdGUiLCJjcmVhdGVSZW5kZXJlciIsImhhc1JlbmRlcmVyIiwiQmFzZSIsIkJhc2VUaWxlTGF5ZXIiLCJvcHRfb3B0aW9ucyIsInByZWxvYWQiLCJ1c2VJbnRlcmltVGlsZXNPbkVycm9yIiwic2V0UHJlbG9hZCIsInNldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJnZXRQcmVsb2FkIiwiVGlsZVByb3BlcnR5IiwiZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciIsIkxheWVyUmVuZGVyZXIiLCJib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyIsImhhbmRsZUltYWdlQ2hhbmdlXyIsImxheWVyXyIsImRlY2x1dHRlckV4ZWN1dG9yR3JvdXAiLCJsb2FkZWRUaWxlQ2FsbGJhY2siLCJ0aWxlcyIsInRpbGUiLCJ0aWxlQ29vcmQiLCJ0b1N0cmluZyIsImNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIiLCJwcm9qZWN0aW9uIiwidGlsZVJhbmdlIiwiY2FsbGJhY2siLCJmb3JFYWNoTG9hZGVkVGlsZSIsImZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlIiwiY29vcmRpbmF0ZSIsImhpdFRvbGVyYW5jZSIsIm1hdGNoZXMiLCJnZXREYXRhQXRQaXhlbCIsImdldExheWVyIiwiaGFuZGxlRm9udHNDaGFuZ2VkIiwicmVuZGVySWZSZWFkeUFuZFZpc2libGUiLCJsb2FkSW1hZ2UiLCJpbWFnZSIsImltYWdlU3RhdGUiLCJsb2FkIiwiUmVuZGVyRXZlbnQiLCJvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtIiwib3B0X2ZyYW1lU3RhdGUiLCJvcHRfY29udGV4dCIsImludmVyc2VQaXhlbFRyYW5zZm9ybSIsImNvbnRleHQiLCJ0cmFuc2Zvcm1TdHJpbmdEaXYiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiRklSRUZPWCIsIldFQktJVCIsIkRFVklDRV9QSVhFTF9SQVRJTyIsImRldmljZVBpeGVsUmF0aW8iLCJXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyIsIldvcmtlckdsb2JhbFNjb3BlIiwiT2Zmc2NyZWVuQ2FudmFzIiwiSU1BR0VfREVDT0RFIiwiSW1hZ2UiLCJkZWNvZGUiLCJQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyIsInBhc3NpdmUiLCJ3aW5kb3ciLCJlcnJvciIsInRyYW5zZm9ybSIsImNvbXBvc2UiLCJkeDEiLCJkeTEiLCJzeCIsInN5IiwiYW5nbGUiLCJkeDIiLCJkeTIiLCJzaW4iLCJjb3MiLCJtYWtlSW52ZXJzZSIsIm1hdCIsImRldCIsImMiLCJlIiwiZiIsIkhFWF9DT0xPUl9SRV8iLCJOQU1FRF9DT0xPUl9SRV8iLCJmcm9tU3RyaW5nIiwiY2FjaGUiLCJjYWNoZVNpemUiLCJzIiwiY29sb3IiLCJnIiwiZXhlYyIsImVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJyZ2IiLCJnZXRDb21wdXRlZFN0eWxlIiwicmVtb3ZlQ2hpbGQiLCJmcm9tTmFtZWQiLCJoYXNBbHBoYSIsInBhcnNlSW50Iiwic3Vic3RyIiwibm9ybWFsaXplIiwic2xpY2UiLCJOdW1iZXIiLCJmcm9tU3RyaW5nSW50ZXJuYWxfIiwiYXNBcnJheSIsImJvdW5kaW5nRXh0ZW50IiwiY29vcmRpbmF0ZXMiLCJleHRlbmRDb29yZGluYXRlIiwiY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIiwiY29udGFpbnNDb29yZGluYXRlIiwiY29udGFpbnNYWSIsImNvb3JkaW5hdGVSZWxhdGlvbnNoaXAiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwicmVsYXRpb25zaGlwIiwiY3JlYXRlT3JVcGRhdGUiLCJvcHRfZXh0ZW50IiwiY3JlYXRlT3JVcGRhdGVFbXB0eSIsImV4dGVudDEiLCJleHRlbnQyIiwiZXh0ZW5kRmxhdENvb3JkaW5hdGVzIiwiZmxhdENvb3JkaW5hdGVzIiwib2Zmc2V0IiwiZW5kIiwic3RyaWRlIiwiZXh0ZW5kWFkiLCJmb3JFYWNoQ29ybmVyIiwidmFsIiwiZ2V0Qm90dG9tTGVmdCIsImdldEJvdHRvbVJpZ2h0IiwiZ2V0VG9wUmlnaHQiLCJnZXRUb3BMZWZ0IiwiZ2V0QXJlYSIsImFyZWEiLCJnZXRIZWlnaHQiLCJnZXRDZW50ZXIiLCJnZXRDb3JuZXIiLCJjb3JuZXIiLCJDb3JuZXIiLCJnZXRGb3JWaWV3QW5kU2l6ZSIsImNlbnRlciIsInJvdGF0aW9uIiwic2l6ZSIsImNvc1JvdGF0aW9uIiwic2luUm90YXRpb24iLCJ4Q29zIiwieFNpbiIsInlDb3MiLCJ5U2luIiwieDAiLCJ4MyIsInkwIiwieTMiLCJnZXRJbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3RzIiwiY3JlYXRlQ2FudmFzQ29udGV4dDJEIiwib3B0X3dpZHRoIiwib3B0X2hlaWdodCIsIm9wdF9jYW52YXNQb29sIiwib3B0X0NvbnRleHQyRFNldHRpbmdzIiwiY2FudmFzIiwic2hpZnQiLCJ3aWR0aCIsImhlaWdodCIsImdldENvbnRleHQiLCJyZXBsYWNlTm9kZSIsIm5ld05vZGUiLCJvbGROb2RlIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsInJlbW92ZU5vZGUiLCJub2RlIiwiQ2FudmFzTGF5ZXJSZW5kZXJlciIsImNvbnRhaW5lciIsInJlbmRlcmVkUmVzb2x1dGlvbiIsInRlbXBUcmFuc2Zvcm0iLCJwaXhlbFRyYW5zZm9ybSIsImNvbnRhaW5lclJldXNlZCIsInBpeGVsQ29udGV4dF8iLCJ1c2VDb250YWluZXIiLCJvcHRfYmFja2dyb3VuZENvbG9yIiwibGF5ZXJDbGFzc05hbWUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIkhUTUxDYW52YXNFbGVtZW50IiwicG9zaXRpb24iLCJsZWZ0IiwidHJhbnNmb3JtT3JpZ2luIiwiY2xpcFVucm90YXRlZCIsInRvcExlZnQiLCJ0b3BSaWdodCIsImJvdHRvbVJpZ2h0IiwiYm90dG9tTGVmdCIsImNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtIiwiaW52ZXJ0ZWQiLCJzYXZlIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwibGluZVRvIiwiY2xpcCIsImRpc3BhdGNoUmVuZGVyRXZlbnRfIiwiZXZlbnRfMSIsInByZVJlbmRlciIsInBvc3RSZW5kZXIiLCJnZXRSZW5kZXJUcmFuc2Zvcm0iLCJwaXhlbFJhdGlvIiwib2Zmc2V0WCIsInJlbmRlclBpeGVsIiwibGF5ZXJFeHRlbnQiLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSIsInBpeGVsQ29udGV4dCIsInBpeGVsQ2FudmFzIiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwiZ2V0SW1hZ2VEYXRhIiwiZXJyIiwiVWludDhBcnJheSIsIlRpbGVSYW5nZSIsImNvbnRhaW5zIiwiY29udGFpbnNUaWxlUmFuZ2UiLCJnZXRTaXplIiwiZ2V0V2lkdGgiLCJJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJtc0ltYWdlU21vb3RoaW5nRW5hYmxlZCIsIklNQUdFX1NNT09USElOR19FTkFCTEVEIiwiQ0xBU1NfSElEREVOIiwiQ0xBU1NfQ09OVFJPTCIsIlVuaXRzIiwiUmVnRXhwIiwiam9pbiIsIlJBRElBTlMiLCJERUdSRUVTIiwiRkVFVCIsIk1FVEVSUyIsIlBJWEVMUyIsIlRJTEVfUElYRUxTIiwiVVNGRUVUIiwiUHJvamVjdGlvbiIsImNvZGVfIiwidW5pdHNfIiwiZXh0ZW50XyIsIndvcmxkRXh0ZW50XyIsIndvcmxkRXh0ZW50IiwiYXhpc09yaWVudGF0aW9uXyIsImF4aXNPcmllbnRhdGlvbiIsImdsb2JhbF8iLCJnbG9iYWwiLCJjYW5XcmFwWF8iLCJnZXRQb2ludFJlc29sdXRpb25GdW5jXyIsImdldFBvaW50UmVzb2x1dGlvbiIsImRlZmF1bHRUaWxlR3JpZF8iLCJtZXRlcnNQZXJVbml0XyIsIm1ldGVyc1BlclVuaXQiLCJjYW5XcmFwWCIsImdldENvZGUiLCJnZXRVbml0cyIsImdldE1ldGVyc1BlclVuaXQiLCJnZXRXb3JsZEV4dGVudCIsImdldEF4aXNPcmllbnRhdGlvbiIsImlzR2xvYmFsIiwic2V0R2xvYmFsIiwiZ2V0RGVmYXVsdFRpbGVHcmlkIiwic2V0RGVmYXVsdFRpbGVHcmlkIiwidGlsZUdyaWQiLCJzZXRXb3JsZEV4dGVudCIsInNldEdldFBvaW50UmVzb2x1dGlvbiIsImZ1bmMiLCJnZXRQb2ludFJlc29sdXRpb25GdW5jIiwiUkFESVVTIiwiSEFMRl9TSVpFIiwiRVhURU5UIiwiV09STERfRVhURU5UIiwiTUFYX1NBRkVfWSIsInRhbiIsIkVQU0czODU3UHJvamVjdGlvbiIsInVuaXRzIiwicG9pbnQiLCJQUk9KRUNUSU9OUyIsIkVQU0c0MzI2UHJvamVjdGlvbiIsIm9wdF9heGlzT3JpZW50YXRpb24iLCJ0cmFuc2Zvcm1zIiwiZGVzdGluYXRpb24iLCJ0cmFuc2Zvcm1GbiIsInNvdXJjZUNvZGUiLCJkZXN0aW5hdGlvbkNvZGUiLCJERUZBVUxUX1JBRElVUyIsImdldERpc3RhbmNlIiwiYzEiLCJjMiIsIm9wdF9yYWRpdXMiLCJyYWRpdXMiLCJsYXQxIiwibGF0MiIsImRlbHRhTGF0QnkyIiwiZGVsdGFMb25CeTIiLCJhdGFuMiIsInNxcnQiLCJkaXN0YW5jZSIsImJlYXJpbmciLCJsb24xIiwiZEJ5UiIsImxhdCIsImFzaW4iLCJjbG9uZVRyYW5zZm9ybSIsImlucHV0Iiwib3B0X291dHB1dCIsIm9wdF9kaW1lbnNpb24iLCJpZGVudGl0eVRyYW5zZm9ybSIsImFkZFByb2plY3Rpb24iLCJhZGQiLCJwcm9qZWN0aW9uTGlrZSIsInJlcGxhY2UiLCJvcHRfdW5pdHMiLCJwb2ludFJlc29sdXRpb24iLCJnZXR0ZXIiLCJ0b0VQU0c0MzI2XzEiLCJnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMiLCJ2ZXJ0aWNlcyIsImFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyIsInByb2plY3Rpb25zIiwiZm9yRWFjaCIsImFkZFByb2plY3Rpb25zIiwiY3JlYXRlUHJvamVjdGlvbiIsImRlZmF1bHRDb2RlIiwiZXF1aXZhbGVudCIsInByb2plY3Rpb24xIiwicHJvamVjdGlvbjIiLCJlcXVhbFVuaXRzIiwic291cmNlUHJvamVjdGlvbiIsImRlc3RpbmF0aW9uUHJvamVjdGlvbiIsInRyYW5zZm9ybUZ1bmMiLCJnZXRUcmFuc2Zvcm0iLCJwcm9qZWN0aW9uczIiLCJmb3J3YXJkVHJhbnNmb3JtIiwiaW52ZXJzZVRyYW5zZm9ybSIsInVzZXJQcm9qZWN0aW9uIiwiZ2V0VXNlclByb2plY3Rpb24iLCJ0b1VzZXJDb29yZGluYXRlIiwiZnJvbVVzZXJDb29yZGluYXRlIiwiZGVzdFByb2plY3Rpb24iLCJmcm9tVXNlckV4dGVudCIsImRpbWVuc2lvbiIsImF0YW4iLCJDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciIsInRpbGVMYXllciIsImV4dGVudENoYW5nZWQiLCJyZW5kZXJlZEV4dGVudF8iLCJyZW5kZXJlZFBpeGVsUmF0aW8iLCJyZW5kZXJlZFByb2plY3Rpb24iLCJyZW5kZXJlZFJldmlzaW9uIiwicmVuZGVyZWRUaWxlcyIsIm5ld1RpbGVzXyIsInRtcEV4dGVudCIsInRtcFRpbGVSYW5nZV8iLCJpc0RyYXdhYmxlVGlsZSIsInRpbGVTdGF0ZSIsImdldFRpbGUiLCJ6Iiwic2V0U3RhdGUiLCJnZXRJbnRlcmltVGlsZSIsImxheWVySW5kZXgiLCJ2aWV3UmVzb2x1dGlvbiIsInZpZXdDZW50ZXIiLCJ0aWxlU291cmNlIiwic291cmNlUmV2aXNpb24iLCJnZXRUaWxlR3JpZEZvclByb2plY3Rpb24iLCJnZXRaRm9yUmVzb2x1dGlvbiIsInpEaXJlY3Rpb24iLCJ0aWxlUmVzb2x1dGlvbiIsImdldFJlc29sdXRpb24iLCJ0aWxlUGl4ZWxSYXRpbyIsImdldFRpbGVQaXhlbFJhdGlvIiwiY2FudmFzRXh0ZW50IiwiZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWiIsInRpbGVzVG9EcmF3QnlaIiwiZmluZExvYWRlZFRpbGVzIiwidG1wVGlsZVJhbmdlIiwidWlkIiwiaW5UcmFuc2l0aW9uIiwiZ2V0QWxwaGEiLCJ0aW1lIiwiY2hpbGRUaWxlUmFuZ2UiLCJnZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSIsImNvdmVyZWQiLCJmb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlIiwiY2FudmFzU2NhbGUiLCJjYW52YXNUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1TdHJpbmciLCJnZXRJbnRlcnBvbGF0ZSIsImNsaXBzIiwiY2xpcFpzIiwiY3VycmVudENsaXAiLCJ6cyIsInNvcnQiLCJnZXRPcGFxdWUiLCJyZXZlcnNlIiwiY3VycmVudFoiLCJjdXJyZW50VGlsZVBpeGVsU2l6ZSIsImdldFRpbGVQaXhlbFNpemUiLCJjdXJyZW50U2NhbGUiLCJkeF8xIiwiZHlfMSIsIm9yaWdpblRpbGVDb29yZCIsImdldFRpbGVDb29yZEZvckNvb3JkQW5kWiIsIm9yaWdpblRpbGVFeHRlbnQiLCJnZXRUaWxlQ29vcmRFeHRlbnQiLCJvcmlnaW5fMSIsInRpbGVHdXR0ZXIiLCJnZXRHdXR0ZXJGb3JQcm9qZWN0aW9uIiwidGlsZXNUb0RyYXciLCJ0aWxlQ29vcmRLZXkiLCJ4SW5kZXgiLCJuZXh0WCIsInlJbmRleCIsIm5leHRZIiwidyIsImgiLCJ0cmFuc2l0aW9uIiwiaV8xIiwiZHJhd1RpbGVJbWFnZSIsInJlc3RvcmUiLCJ1bnNoaWZ0IiwidXBkYXRlVXNlZFRpbGVzIiwidXNlZFRpbGVzIiwibWFuYWdlVGlsZVB5cmFtaWQiLCJzY2hlZHVsZUV4cGlyZUNhY2hlIiwiY3NzT3BhY2l0eSIsImd1dHRlciIsImdldFRpbGVJbWFnZSIsImFscGhhIiwiYWxwaGFDaGFuZ2VkIiwiZ2xvYmFsQWxwaGEiLCJhbmltYXRlIiwiZW5kVHJhbnNpdGlvbiIsImdldEltYWdlIiwiY2FuRXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb24iLCJ0aWxlU291cmNlS2V5IiwiZXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb25zIiwiZ2V0S2V5Iiwib3B0X3RpbGVDYWxsYmFjayIsIndhbnRlZFRpbGVzIiwidGlsZVF1ZXVlIiwidGlsZUNvdW50IiwiaXNLZXlRdWV1ZWQiLCJlbnF1ZXVlIiwiZ2V0VGlsZUNvb3JkQ2VudGVyIiwidXNlVGlsZSIsInVwZGF0ZUNhY2hlU2l6ZSIsIlRpbGVMYXllciIsIkJhc2VUaWxlIiwiQ0VOVEVSIiwiUkVTT0xVVElPTiIsIlJPVEFUSU9OIiwiY29vcmRpbmF0ZTEiLCJjb29yZGluYXRlMiIsImNvc0FuZ2xlIiwic2luQW5nbGUiLCJjcmVhdGVFeHRlbnQiLCJvbmx5Q2VudGVyIiwic21vb3RoIiwib3B0X2lzTW92aW5nIiwib3B0X2NlbnRlclNoaWZ0Iiwidmlld1dpZHRoIiwidmlld0hlaWdodCIsInNoaWZ0WCIsInNoaWZ0WSIsInJhdGlvIiwibm9uZSIsImdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24iLCJtYXhFeHRlbnQiLCJ2aWV3cG9ydFNpemUiLCJzaG93RnVsbEV4dGVudCIsInhSZXNvbHV0aW9uIiwieVJlc29sdXRpb24iLCJnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbiIsInJlc3VsdCIsImNyZWF0ZU1pbk1heFJlc29sdXRpb24iLCJvcHRfc21vb3RoIiwib3B0X21heEV4dGVudCIsIm9wdF9zaG93RnVsbEV4dGVudCIsImNhcHBlZE1heFJlcyIsImRpc2FibGUiLCJlYXNlSW4iLCJlYXNlT3V0IiwiaW5BbmRPdXQiLCJsaW5lYXIiLCJ0bXBUcmFuc2Zvcm0iLCJHZW9tZXRyeSIsImZuIiwibGFzdFJlc3VsdCIsImxhc3RBcmdzIiwibGFzdFRoaXMiLCJjYWxsZWQiLCJleHRlbnRSZXZpc2lvbl8iLCJzaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlIiwic2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24iLCJzaW1wbGlmeVRyYW5zZm9ybWVkSW50ZXJuYWwiLCJyZXZpc2lvbiIsInNxdWFyZWRUb2xlcmFuY2UiLCJvcHRfdHJhbnNmb3JtIiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5IiwiY2xvbmUiLCJhcHBseVRyYW5zZm9ybSIsIm5leHRBcmdzIiwic2ltcGxpZnlUcmFuc2Zvcm1lZCIsImNsb3Nlc3RQb2ludFhZIiwiY2xvc2VzdFBvaW50IiwibWluU3F1YXJlZERpc3RhbmNlIiwiY29vcmQiLCJnZXRDbG9zZXN0UG9pbnQiLCJvcHRfY2xvc2VzdFBvaW50IiwiTmFOIiwiaW50ZXJzZWN0c0Nvb3JkaW5hdGUiLCJjb21wdXRlRXh0ZW50IiwiaXNOYU4iLCJyZXR1cm5PclVwZGF0ZSIsInJvdGF0ZSIsImFuY2hvciIsInNjYWxlIiwib3B0X3N5Iiwib3B0X2FuY2hvciIsInNpbXBsaWZ5IiwidG9sZXJhbmNlIiwiZ2V0VHlwZSIsImludGVyc2VjdHNFeHRlbnQiLCJ0cmFuc2xhdGUiLCJkZWx0YVgiLCJkZWx0YVkiLCJzb3VyY2VQcm9qIiwiaW5Db29yZGluYXRlcyIsIm91dENvb3JkaW5hdGVzIiwicGl4ZWxFeHRlbnQiLCJwcm9qZWN0ZWRFeHRlbnQiLCJvcHRfZGVzdCIsImRlc3QiLCJqIiwiU2ltcGxlR2VvbWV0cnkiLCJsYXlvdXQiLCJHZW9tZXRyeUxheW91dCIsImdldENvb3JkaW5hdGVzIiwiZ2V0Rmlyc3RDb29yZGluYXRlIiwiZ2V0RmxhdENvb3JkaW5hdGVzIiwiZ2V0TGFzdENvb3JkaW5hdGUiLCJnZXRMYXlvdXQiLCJzaW1wbGlmaWVkR2VvbWV0cnkiLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCIsImdldFN0cmlkZSIsInNldEZsYXRDb29yZGluYXRlcyIsImdldFN0cmlkZUZvckxheW91dCIsInNldENvb3JkaW5hdGVzIiwib3B0X2xheW91dCIsInNldExheW91dCIsIm5lc3RpbmciLCJnZXRMYXlvdXRGb3JTdHJpZGUiLCJhbmNob3JYIiwiYW5jaG9yWSIsImsiLCJhc3NpZ25DbG9zZXN0Iiwib2Zmc2V0MSIsIm9mZnNldDIiLCJtYXhTcXVhcmVkRGVsdGEiLCJzcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0UG9pbnQiLCJtYXhEZWx0YSIsImlzUmluZyIsIm9wdF90bXBQb2ludCIsInNxdWFyZWREaXN0YW5jZSIsInRtcFBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGVzIiwic25hcCIsInF1YW50aXplIiwic2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyIsInNpbXBsaWZpZWRPZmZzZXQiLCJpbmZsYXRlQ29vcmRpbmF0ZXMiLCJvcHRfY29vcmRpbmF0ZXMiLCJsaW5lYXJSaW5nIiwidHdpY2VBcmVhIiwiTGluZWFyUmluZyIsIm1heERlbHRhXyIsIm1heERlbHRhUmV2aXNpb25fIiwibWFya2VycyIsInN0YWNrIiwibGFzdCIsInBvcCIsImZpcnN0IiwibWF4U3F1YXJlZERpc3RhbmNlIiwic3F1YXJlZERpc3RhbmNlXzEiLCJkb3VnbGFzUGV1Y2tlciIsIlBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGUiLCJsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQiLCJsaW5lYXJSaW5nQ29udGFpbnNYWSIsInduIiwibGluZWFyUmluZ3NDb250YWluc1hZIiwiZW5kcyIsImludGVyc2VjdHNMaW5lU3RyaW5nIiwiY29vcmRpbmF0ZXNFeHRlbnQiLCJyZXQiLCJwb2ludDEiLCJwb2ludDIiLCJzdGFydCIsInN0YXJ0UmVsIiwiZW5kUmVsIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJzbG9wZSIsImludGVyc2VjdHNTZWdtZW50IiwidG1wIiwibGluZWFyUmluZ0lzQ2xvY2t3aXNlIiwiZWRnZSIsIm9yaWVudExpbmVhclJpbmdzIiwib3B0X3JpZ2h0IiwicmlnaHQiLCJpc0Nsb2Nrd2lzZSIsIlBvbHlnb24iLCJvcHRfZW5kcyIsImVuZHNfIiwiZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8iLCJmbGF0SW50ZXJpb3JQb2ludF8iLCJvcmllbnRlZFJldmlzaW9uXyIsIm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyIsImFwcGVuZExpbmVhclJpbmciLCJwb2x5Z29uIiwiYXJyYXlNYXhTcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCIsImdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzIiwibGluZWFyUmluZ3MiLCJvcHRfY29vcmRpbmF0ZXNzIiwiY29vcmRpbmF0ZXNzIiwiamoiLCJpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSIsImdldEVuZHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludCIsImZsYXRDZW50ZXIiLCJmbGF0Q2VudGVycyIsImZsYXRDZW50ZXJzT2Zmc2V0IiwiaW50ZXJzZWN0aW9ucyIsInJyIiwicG9pbnRYIiwibWF4U2VnbWVudExlbmd0aCIsInNlZ21lbnRMZW5ndGgiLCJhYnMiLCJnZXRJbnRlcmlvclBvaW50T2ZBcnJheSIsImdldEludGVyaW9yUG9pbnQiLCJnZXRMaW5lYXJSaW5nQ291bnQiLCJnZXRMaW5lYXJSaW5nIiwiZ2V0TGluZWFyUmluZ3MiLCJsaW5lYXJSaW5nc0FyZU9yaWVudGVkIiwic2ltcGxpZmllZEVuZHMiLCJxdWFudGl6ZUFycmF5IiwiaW50ZXJzZWN0c0xpbmVhclJpbmciLCJpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5IiwiZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJmcm9tRXh0ZW50IiwiVmlldyIsImhpbnRzXyIsImFuaW1hdGlvbnNfIiwidXBkYXRlQW5pbWF0aW9uS2V5XyIsInByb2plY3Rpb25fIiwidmlld3BvcnRTaXplXyIsInRhcmdldENlbnRlcl8iLCJ0YXJnZXRSZXNvbHV0aW9uXyIsInRhcmdldFJvdGF0aW9uXyIsIm5leHRDZW50ZXJfIiwibmV4dFJlc29sdXRpb25fIiwibmV4dFJvdGF0aW9uXyIsImNhbmNlbEFuY2hvcl8iLCJhcHBseU9wdGlvbnNfIiwiVmlld1Byb3BlcnR5IiwicmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvIiwicmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJ6b29tRmFjdG9yIiwibXVsdGlXb3JsZCIsInNtb290aFJlc29sdXRpb25Db25zdHJhaW50IiwicHJvakV4dGVudCIsImNvbnN0cmFpbk9ubHlDZW50ZXIiLCJyZXNvbHV0aW9ucyIsImNvbnN0cmFpblJlc29sdXRpb24iLCJjYXBwZWQiLCJjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyIsImRlZmF1bHRNYXhSZXNvbHV0aW9uIiwiZGVmYXVsdE1pblJlc29sdXRpb24iLCJkZWZhdWx0TWF4Wm9vbSIsInBvd2VyIiwib3B0X21pblJlc29sdXRpb24iLCJtaW5ab29tTGV2ZWwiLCJjYXBwZWRab29tTGV2ZWwiLCJ6b29tTGV2ZWwiLCJjcmVhdGVTbmFwVG9Qb3dlciIsImNvbnN0cmFpbnQiLCJjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludCIsIm1heFJlc29sdXRpb25fIiwibWluUmVzb2x1dGlvbl8iLCJ6b29tRmFjdG9yXyIsInJlc29sdXRpb25zXyIsInBhZGRpbmdfIiwicGFkZGluZyIsIm1pblpvb21fIiwiY2VudGVyQ29uc3RyYWludCIsInNtb290aEV4dGVudENvbnN0cmFpbnQiLCJjcmVhdGVDZW50ZXJDb25zdHJhaW50Iiwicm90YXRpb25Db25zdHJhaW50IiwiZW5hYmxlUm90YXRpb24iLCJjb25zdHJhaW5Sb3RhdGlvbiIsInRoZXRhIiwiY3JlYXRlUm90YXRpb25Db25zdHJhaW50IiwiY29uc3RyYWludHNfIiwic2V0Um90YXRpb24iLCJzZXRDZW50ZXJJbnRlcm5hbCIsInNldFJlc29sdXRpb24iLCJzZXRab29tIiwib2xkUGFkZGluZyIsIm5ld1BhZGRpbmciLCJvZmZzZXRZIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsImdldFVwZGF0ZWRPcHRpb25zXyIsIm5ld09wdGlvbnMiLCJnZXRab29tIiwiZ2V0Q2VudGVySW50ZXJuYWwiLCJnZXRSb3RhdGlvbiIsInZhcl9hcmdzIiwiaXNEZWYiLCJnZXRBbmltYXRpbmciLCJyZXNvbHZlQ29uc3RyYWludHMiLCJhcmdzIiwiZ2V0UHJvamVjdGlvbiIsImFuaW1hdGVJbnRlcm5hbCIsImFuaW1hdGlvbkNvdW50IiwiRGF0ZSIsIm5vdyIsInNlcmllcyIsImFuaW1hdGlvbiIsImNvbXBsZXRlIiwiZHVyYXRpb24iLCJlYXNpbmciLCJzb3VyY2VDZW50ZXIiLCJ0YXJnZXRDZW50ZXIiLCJzb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0UmVzb2x1dGlvbiIsImdldFJlc29sdXRpb25Gb3Jab29tIiwic291cmNlUm90YXRpb24iLCJkZWx0YSIsInRhcmdldFJvdGF0aW9uIiwiaXNOb29wQW5pbWF0aW9uIiwic2V0SGludCIsInVwZGF0ZUFuaW1hdGlvbnNfIiwiYW5pbWF0aW9uQ2FsbGJhY2siLCJnZXRJbnRlcmFjdGluZyIsImNhbmNlbEFuaW1hdGlvbnMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIm1vcmUiLCJzZXJpZXNDb21wbGV0ZSIsImVsYXBzZWQiLCJmcmFjdGlvbiIsInByb2dyZXNzIiwiZ2V0Vmlld3BvcnRTaXplXyIsImNvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImNhbGN1bGF0ZUNlbnRlclpvb20iLCJhcHBseVRhcmdldFN0YXRlXyIsImNvbnN0cmFpbmVkUm90YXRpb24iLCJjYWxjdWxhdGVDZW50ZXJSb3RhdGUiLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY3VycmVudENlbnRlciIsImN1cnJlbnRSZXNvbHV0aW9uIiwib3B0X3JvdGF0aW9uIiwic2V0Vmlld3BvcnRTaXplIiwib3B0X3NpemUiLCJnZXRDb25zdHJhaW50cyIsImdldENvbnN0cmFpblJlc29sdXRpb24iLCJnZXRIaW50cyIsIm9wdF9oaW50cyIsImNhbGN1bGF0ZUV4dGVudCIsImNhbGN1bGF0ZUV4dGVudEludGVybmFsIiwiZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyIsImdldFpvb21Gb3JSZXNvbHV0aW9uIiwic2V0Q29uc3RyYWluUmVzb2x1dGlvbiIsImVuYWJsZWQiLCJnZXRSZXNvbHV0aW9ucyIsImdldFJlc29sdXRpb25Gb3JFeHRlbnQiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwiLCJnZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiIsIm9wdF9wb3dlciIsImdldENvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uIiwibG9nUG93ZXIiLCJyZWR1Y2VkU2l6ZSIsImNhbGN1bGF0ZUNlbnRlck9uIiwibmV4dENlbnRlciIsIm5leHRSZXNvbHV0aW9uIiwibmV4dFJvdGF0aW9uIiwibmVhcmVzdCIsImJhc2VMZXZlbCIsImZpdCIsImdlb21ldHJ5T3JFeHRlbnQiLCJnZW9tZXRyeSIsImZpdEludGVybmFsIiwicm90YXRlZEV4dGVudEZvckdlb21ldHJ5IiwiY29vcmRzIiwibWluUm90WCIsIm1pblJvdFkiLCJtYXhSb3RYIiwibWF4Um90WSIsInJvdFgiLCJyb3RZIiwicm90YXRlZEV4dGVudCIsImNlbnRlclJvdCIsImNlbnRlclgiLCJjZW50ZXJZIiwiZ2V0Q29uc3RyYWluZWRDZW50ZXIiLCJjZW50ZXJPbiIsImNlbnRlck9uSW50ZXJuYWwiLCJjYWxjdWxhdGVDZW50ZXJTaGlmdCIsImNlbnRlclNoaWZ0Iiwic2hpZnRlZENlbnRlciIsImFkanVzdENlbnRlciIsImRlbHRhQ29vcmRpbmF0ZXMiLCJzZXRDZW50ZXIiLCJhZGp1c3RDZW50ZXJJbnRlcm5hbCIsImFkanVzdFJlc29sdXRpb24iLCJhZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwiLCJpc01vdmluZyIsIm5ld1Jlc29sdXRpb24iLCJhZGp1c3Rab29tIiwiYWRqdXN0Um90YXRpb24iLCJhZGp1c3RSb3RhdGlvbkludGVybmFsIiwibmV3Um90YXRpb24iLCJoaW50Iiwib3B0X2RvTm90Q2FuY2VsQW5pbXMiLCJvcHRfZm9yY2VNb3ZpbmciLCJuZXdDZW50ZXIiLCJvcHRfZHVyYXRpb24iLCJvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiIsImJlZ2luSW50ZXJhY3Rpb24iLCJlbmRJbnRlcmFjdGlvbiIsImVuZEludGVyYWN0aW9uSW50ZXJuYWwiLCJvcHRfdGFyZ2V0UmVzb2x1dGlvbiIsImdldENvbnN0cmFpbmVkWm9vbSIsInRhcmdldFpvb20iLCJvcHRfZGlyZWN0aW9uIiwidGFyZ2V0UmVzIiwicmV0dXJuVmFsdWUiLCJzZXRUaW1lb3V0Iiwic3JjIiwiY3Jvc3NPcmlnaW4iLCJhc1N0cmluZyIsInNoYXJlZCIsIkljb25JbWFnZUNhY2hlIiwiY2FjaGVfIiwiY2FjaGVTaXplXyIsIm1heENhY2hlU2l6ZV8iLCJleHBpcmUiLCJpY29uSW1hZ2UiLCJzZXRTaXplIiwibWF4Q2FjaGVTaXplIiwiTWFwUmVuZGVyZXIiLCJtYXBfIiwiZGlzcGF0Y2hSZW5kZXJFdmVudCIsImNhbGN1bGF0ZU1hdHJpY2VzMkQiLCJjaGVja1dyYXBwZWQiLCJ0aGlzQXJnIiwibGF5ZXJGaWx0ZXIiLCJ0aGlzQXJnMiIsImZlYXR1cmUiLCJ0cmFuc2xhdGVkQ29vcmRpbmF0ZSIsIndvcmxkV2lkdGgiLCJ3b3JsZHNBd2F5Iiwib3B0X3NvdXJjZUV4dGVudFdpZHRoIiwicHJvamVjdGlvbkV4dGVudCIsInNvdXJjZUV4dGVudFdpZHRoIiwib2Zmc2V0cyIsImxheWVyU3RhdGVzIiwibnVtTGF5ZXJzIiwidG1wQ29vcmQiLCJnZXRXcmFwWCIsImNhbGxiYWNrXzEiLCJvcmRlciIsIm0iLCJkaXN0YW5jZVNxIiwiZm9yRWFjaExheWVyQXRQaXhlbCIsImhhc0ZlYXR1cmVBdENvb3JkaW5hdGUiLCJnZXRNYXAiLCJzY2hlZHVsZUV4cGlyZUljb25DYWNoZSIsImV4cGlyZUljb25DYWNoZSIsImNoZWNrZWRGb250cyIsImNvbnNvbGUiLCJ3YXJuIiwiQ29tcG9zaXRlTWFwUmVuZGVyZXIiLCJmb250Q2hhbmdlTGlzdGVuZXJLZXlfIiwicmVkcmF3VGV4dCIsImVsZW1lbnRfIiwiQ0xBU1NfVU5TRUxFQ1RBQkxFIiwiZ2V0Vmlld3BvcnQiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW5fIiwicmVuZGVyZWRWaXNpYmxlXyIsImRlY2x1dHRlckxheWVycyIsInByZXZpb3VzRWxlbWVudCIsImVsZW1lbnQiLCJyZW5kZXJEZWNsdXR0ZXIiLCJjaGlsZHJlbiIsIm9sZENoaWxkcmVuIiwiY2hpbGROb2RlcyIsIm9sZENoaWxkIiwibmV3Q2hpbGQiLCJyZXBsYWNlQ2hpbGRyZW4iLCJkaXNwbGF5IiwiTWFwIiwiQ29sbGVjdGlvbkV2ZW50Iiwib3B0X2VsZW1lbnQiLCJvcHRfaW5kZXgiLCJDb2xsZWN0aW9uIiwidW5pcXVlXyIsInVuaXF1ZSIsImFycmF5XyIsImFzc2VydFVuaXF1ZV8iLCJ1cGRhdGVMZW5ndGhfIiwiZ2V0TGVuZ3RoIiwiZ2V0QXJyYXkiLCJpdGVtIiwiaW5zZXJ0QXQiLCJlbGVtIiwiQ29sbGVjdGlvbkV2ZW50VHlwZSIsInJlbW92ZUF0IiwicmVtb3ZlIiwicHJldiIsInNldEF0Iiwib3B0X2V4Y2VwdCIsIkdyb3VwRXZlbnQiLCJMYXllckdyb3VwIiwibGF5ZXJzIiwibGF5ZXJzTGlzdGVuZXJLZXlzXyIsImxpc3RlbmVyS2V5c18iLCJoYW5kbGVMYXllcnNDaGFuZ2VkXyIsInNldExheWVycyIsImhhbmRsZUxheWVyQ2hhbmdlXyIsImdldExheWVycyIsImlkIiwiaGFuZGxlTGF5ZXJzQWRkXyIsImhhbmRsZUxheWVyc1JlbW92ZV8iLCJsYXllcnNBcnJheSIsInJlZ2lzdGVyTGF5ZXJMaXN0ZW5lcnNfIiwibGlzdGVuZXJLZXlzIiwiaGFuZGxlTGF5ZXJHcm91cEFkZF8iLCJoYW5kbGVMYXllckdyb3VwUmVtb3ZlXyIsImNvbGxlY3Rpb25FdmVudCIsImNvbGxlY3Rpb24iLCJjdXJyZW50TGF5ZXJzIiwicG9zIiwib3duTGF5ZXJTdGF0ZSIsImRlZmF1bHRaSW5kZXgiLCJNYXBFdmVudCIsIk1hcEJyb3dzZXJFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJvcHRfZHJhZ2dpbmciLCJwaXhlbF8iLCJjb29yZGluYXRlXyIsImRyYWdnaW5nIiwiZ2V0RXZlbnRQaXhlbCIsImdldENvb3JkaW5hdGVGcm9tUGl4ZWwiLCJTSU5HTEVDTElDSyIsIkNMSUNLIiwiREJMQ0xJQ0siLCJQT0lOVEVSRFJBRyIsIlBPSU5URVJNT1ZFIiwiUE9JTlRFUkRPV04iLCJQT0lOVEVSVVAiLCJQT0lOVEVST1ZFUiIsIlBPSU5URVJPVVQiLCJQT0lOVEVSRU5URVIiLCJQT0lOVEVSTEVBVkUiLCJQT0lOVEVSQ0FOQ0VMIiwiTWFwQnJvd3NlckV2ZW50SGFuZGxlciIsIm1vdmVUb2xlcmFuY2UiLCJjbGlja1RpbWVvdXRJZF8iLCJlbXVsYXRlQ2xpY2tzXyIsImRyYWdnaW5nXyIsImRyYWdMaXN0ZW5lcktleXNfIiwibW92ZVRvbGVyYW5jZV8iLCJkb3duXyIsImFjdGl2ZVBvaW50ZXJzXyIsInRyYWNrZWRUb3VjaGVzXyIsInBvaW50ZXJkb3duTGlzdGVuZXJLZXlfIiwiaGFuZGxlUG9pbnRlckRvd25fIiwib3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyIsInJlbGF5ZWRMaXN0ZW5lcktleV8iLCJyZWxheUV2ZW50XyIsImJvdW5kSGFuZGxlVG91Y2hNb3ZlXyIsImhhbmRsZVRvdWNoTW92ZV8iLCJlbXVsYXRlQ2xpY2tfIiwicG9pbnRlckV2ZW50IiwibmV3RXZlbnQiLCJjbGVhclRpbWVvdXQiLCJ1cGRhdGVBY3RpdmVQb2ludGVyc18iLCJwb2ludGVySWQiLCJoYW5kbGVQb2ludGVyVXBfIiwiaXNNb3VzZUFjdGlvbkJ1dHRvbl8iLCJidXR0b24iLCJkb2MiLCJnZXRPd25lckRvY3VtZW50IiwiaGFuZGxlUG9pbnRlck1vdmVfIiwiZ2V0Um9vdE5vZGUiLCJpc01vdmluZ18iLCJjYW5jZWxhYmxlIiwiY2xpZW50WCIsImNsaWVudFkiLCJEUk9QIiwiUHJpb3JpdHlRdWV1ZSIsInByaW9yaXR5RnVuY3Rpb24iLCJrZXlGdW5jdGlvbiIsInByaW9yaXR5RnVuY3Rpb25fIiwia2V5RnVuY3Rpb25fIiwiZWxlbWVudHNfIiwicHJpb3JpdGllc18iLCJxdWV1ZWRFbGVtZW50c18iLCJkZXF1ZXVlIiwiZWxlbWVudHMiLCJwcmlvcml0aWVzIiwic2lmdFVwXyIsImVsZW1lbnRLZXkiLCJwcmlvcml0eSIsInNpZnREb3duXyIsImdldENvdW50IiwiZ2V0TGVmdENoaWxkSW5kZXhfIiwiZ2V0UmlnaHRDaGlsZEluZGV4XyIsImdldFBhcmVudEluZGV4XyIsImhlYXBpZnlfIiwiaXNFbXB0eSIsImlzUXVldWVkIiwiY291bnQiLCJzdGFydEluZGV4IiwibEluZGV4IiwickluZGV4Iiwic21hbGxlckNoaWxkSW5kZXgiLCJwYXJlbnRJbmRleCIsInJlcHJpb3JpdGl6ZSIsIlRpbGVRdWV1ZSIsInRpbGVQcmlvcml0eUZ1bmN0aW9uIiwidGlsZUNoYW5nZUNhbGxiYWNrIiwiYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyIsImhhbmRsZVRpbGVDaGFuZ2UiLCJ0aWxlQ2hhbmdlQ2FsbGJhY2tfIiwidGlsZXNMb2FkaW5nXyIsInRpbGVzTG9hZGluZ0tleXNfIiwiYWRkZWQiLCJnZXRUaWxlc0xvYWRpbmciLCJ0aWxlS2V5IiwibG9hZE1vcmVUaWxlcyIsIm1heFRvdGFsTG9hZGluZyIsIm1heE5ld0xvYWRzIiwibmV3TG9hZHMiLCJoYXNBcmVhIiwidG9TaXplIiwicmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eSIsInNldExheWVyTWFwUHJvcGVydHkiLCJQbHVnZ2FibGVNYXAiLCJvcHRpb25zSW50ZXJuYWwiLCJrZXlib2FyZEV2ZW50VGFyZ2V0IiwiZ2V0RWxlbWVudEJ5SWQiLCJjb250cm9scyIsImludGVyYWN0aW9ucyIsIm92ZXJsYXlzIiwibGF5ZXJHcm91cCIsInZpZXciLCJjcmVhdGVPcHRpb25zSW50ZXJuYWwiLCJyZW5kZXJDb21wbGV0ZV8iLCJib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8iLCJoYW5kbGVCcm93c2VyRXZlbnQiLCJtYXhUaWxlc0xvYWRpbmdfIiwibWF4VGlsZXNMb2FkaW5nIiwicGl4ZWxSYXRpb18iLCJwb3N0UmVuZGVyVGltZW91dEhhbmRsZV8iLCJhbmltYXRpb25EZWxheUtleV8iLCJhbmltYXRpb25EZWxheV8iLCJyZW5kZXJGcmFtZV8iLCJjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8iLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8iLCJmcmFtZUluZGV4XyIsImZyYW1lU3RhdGVfIiwicHJldmlvdXNFeHRlbnRfIiwidmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfIiwidmlld0NoYW5nZUxpc3RlbmVyS2V5XyIsImxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18iLCJ2aWV3cG9ydF8iLCJvdmVyZmxvdyIsIm92ZXJsYXlDb250YWluZXJfIiwicG9pbnRlckV2ZW50cyIsIm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfIiwibWFwQnJvd3NlckV2ZW50SGFuZGxlcl8iLCJrZXlib2FyZEV2ZW50VGFyZ2V0XyIsInRhcmdldENoYW5nZUhhbmRsZXJLZXlzXyIsIm92ZXJsYXlzXyIsIm92ZXJsYXlJZEluZGV4XyIsInBvc3RSZW5kZXJGdW5jdGlvbnNfIiwidGlsZVF1ZXVlXyIsImdldFRpbGVQcmlvcml0eSIsImhhbmRsZVRpbGVDaGFuZ2VfIiwiTWFwUHJvcGVydHkiLCJoYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8iLCJoYW5kbGVWaWV3Q2hhbmdlZF8iLCJoYW5kbGVTaXplQ2hhbmdlZF8iLCJoYW5kbGVUYXJnZXRDaGFuZ2VkXyIsInRoZW4iLCJ2aWV3T3B0aW9ucyIsInNldFZpZXciLCJhZGRPdmVybGF5SW50ZXJuYWxfIiwiZ2V0SWQiLCJjb250cm9sIiwiaW50ZXJhY3Rpb24iLCJhZGRDb250cm9sIiwiZ2V0Q29udHJvbHMiLCJhZGRJbnRlcmFjdGlvbiIsImdldEludGVyYWN0aW9ucyIsImFkZExheWVyIiwiZ2V0TGF5ZXJHcm91cCIsImhhbmRsZUxheWVyQWRkXyIsImFkZE92ZXJsYXkiLCJvdmVybGF5IiwiZ2V0T3ZlcmxheXMiLCJzZXRUYXJnZXQiLCJmb3JFYWNoRmVhdHVyZUF0UGl4ZWwiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwiLCJnZXRGZWF0dXJlc0F0UGl4ZWwiLCJmZWF0dXJlcyIsImdldEFsbExheWVycyIsImFkZExheWVyc0Zyb20iLCJoYXNGZWF0dXJlQXRQaXhlbCIsImdldEV2ZW50Q29vcmRpbmF0ZSIsImdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsIiwidmlld3BvcnRQb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImV2ZW50UG9zaXRpb24iLCJjaGFuZ2VkVG91Y2hlcyIsInRvcCIsImdldFRhcmdldCIsImdldFRhcmdldEVsZW1lbnQiLCJnZXRWaWV3IiwiZ2V0T3ZlcmxheUJ5SWQiLCJncm91cCIsImdldExvYWRpbmciLCJsb2FkaW5nIiwiZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSIsInZpZXdDb29yZGluYXRlIiwiZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsIiwiZ2V0T3ZlcmxheUNvbnRhaW5lciIsImdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQiLCJ0YXJnZXRFbGVtZW50Iiwib3duZXJEb2N1bWVudCIsInRpbGVDZW50ZXIiLCJicm93c2VyRXZlbnQiLCJtYXBCcm93c2VyRXZlbnQiLCJoYW5kbGVNYXBCcm93c2VyRXZlbnQiLCJyb290Tm9kZSIsImRvY3VtZW50RWxlbWVudCIsImludGVyYWN0aW9uc0FycmF5IiwiZ2V0QWN0aXZlIiwiaGFuZGxlUG9zdFJlbmRlciIsImhpbnRzIiwidmlld0hpbnRzIiwibG93T25GcmFtZUJ1ZGdldCIsImRlZmF1bHRWaWV3IiwidXBkYXRlU2l6ZSIsImhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfIiwidXBkYXRlVmlld3BvcnRTaXplXyIsImhhbmRsZUxheWVyUmVtb3ZlXyIsImlzUmVuZGVyZWQiLCJyZW5kZXJTeW5jIiwicmVtb3ZlQ29udHJvbCIsInJlbW92ZUludGVyYWN0aW9uIiwicmVtb3ZlTGF5ZXIiLCJyZW1vdmVPdmVybGF5IiwicHJldmlvdXNGcmFtZVN0YXRlIiwiZGVjbHV0dGVyVHJlZSIsIm1hcElkIiwicmVuZGVyVGFyZ2V0cyIsIm5leHRFeHRlbnQiLCJNYXBFdmVudFR5cGUiLCJzZXRMYXllckdyb3VwIiwib2xkTGF5ZXJHcm91cCIsImNvbXB1dGVkU3R5bGUiLCJvZmZzZXRXaWR0aCIsInBhcnNlRmxvYXQiLCJvZmZzZXRIZWlnaHQiLCJnZXRDbGllbnRSZWN0cyIsIkNvbnRyb2wiLCJ0YXJnZXRfIiwibWFwRXZlbnQiLCJBdHRyaWJ1dGlvbiIsInVsRWxlbWVudF8iLCJjb2xsYXBzZWRfIiwiY29sbGFwc2VkIiwidXNlckNvbGxhcHNlZF8iLCJvdmVycmlkZUNvbGxhcHNpYmxlXyIsImNvbGxhcHNpYmxlIiwiY29sbGFwc2libGVfIiwidGlwTGFiZWwiLCJleHBhbmRDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsIiwiY29sbGFwc2VDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsXyIsInRleHRDb250ZW50IiwibGFiZWwiLCJsYWJlbF8iLCJhY3RpdmVMYWJlbCIsInRvZ2dsZUJ1dHRvbl8iLCJzZXRBdHRyaWJ1dGUiLCJ0aXRsZSIsImhhbmRsZUNsaWNrXyIsImNzc0NsYXNzZXMiLCJyZW5kZXJlZEF0dHJpYnV0aW9uc18iLCJjb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyIsImxvb2t1cCIsInZpc2libGVBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkdldHRlciIsImdldEF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9ucyIsImdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIiwic2V0Q29sbGFwc2libGUiLCJ1cGRhdGVFbGVtZW50XyIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkcmVuIiwiaW5uZXJIVE1MIiwiaGFuZGxlVG9nZ2xlXyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldENvbGxhcHNpYmxlIiwic2V0Q29sbGFwc2VkIiwiZ2V0Q29sbGFwc2VkIiwiUm90YXRlIiwiY29tcGFzc0NsYXNzTmFtZSIsImNhbGxSZXNldE5vcnRoXyIsInJlc2V0Tm9ydGgiLCJkdXJhdGlvbl8iLCJhdXRvSGlkZV8iLCJhdXRvSGlkZSIsInJvdGF0aW9uXyIsInJlc2V0Tm9ydGhfIiwiWm9vbSIsInpvb21JbkNsYXNzTmFtZSIsInpvb21PdXRDbGFzc05hbWUiLCJ6b29tSW5MYWJlbCIsInpvb21PdXRMYWJlbCIsInpvb21JblRpcExhYmVsIiwiem9vbU91dFRpcExhYmVsIiwiaW5FbGVtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJvdXRFbGVtZW50Iiwiem9vbUJ5RGVsdGFfIiwiY3VycmVudFpvb20iLCJuZXdab29tIiwiem9vbUJ5RGVsdGEiLCJJbnRlcmFjdGlvbiIsInNldEFjdGl2ZSIsImFjdGl2ZSIsIkRvdWJsZUNsaWNrWm9vbSIsImRlbHRhXyIsInN0b3BFdmVudCIsInNoaWZ0S2V5IiwiUG9pbnRlckludGVyYWN0aW9uIiwiaGFuZGxlRG93bkV2ZW50IiwiaGFuZGxlRHJhZ0V2ZW50IiwiaGFuZGxlTW92ZUV2ZW50IiwiaGFuZGxlVXBFdmVudCIsInN0b3BEb3duIiwiaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSIsInRyYWNrZWRQb2ludGVyc18iLCJ0YXJnZXRQb2ludGVycyIsImdldFBvaW50ZXJDb3VudCIsInVwZGF0ZVRyYWNrZWRQb2ludGVyc18iLCJoYW5kbGVkVXAiLCJoYW5kbGVkIiwiaXNQb2ludGVyRHJhZ2dpbmdFdmVudCIsImNvbmRpdGlvbnMiLCJwYXNzIiwiYWx0U2hpZnRLZXlzT25seSIsImFsdEtleSIsIm1ldGFLZXkiLCJjdHJsS2V5IiwiZm9jdXNXaXRoVGFiaW5kZXgiLCJoYXNBdHRyaWJ1dGUiLCJhY3RpdmVFbGVtZW50IiwiYWx3YXlzIiwibW91c2VBY3Rpb25CdXR0b24iLCJub01vZGlmaWVyS2V5cyIsInNoaWZ0S2V5T25seSIsInRhcmdldE5vdEVkaXRhYmxlIiwidGFnTmFtZSIsIm1vdXNlT25seSIsInBvaW50ZXJUeXBlIiwicHJpbWFyeUFjdGlvbiIsImlzUHJpbWFyeSIsIkRyYWdQYW4iLCJraW5ldGljXyIsImtpbmV0aWMiLCJsYXN0Q2VudHJvaWQiLCJsYXN0UG9pbnRlcnNDb3VudF8iLCJwYW5uaW5nXyIsImNvbmRpdGlvbiIsImNvbmRpdGlvbl8iLCJvbkZvY3VzT25seSIsIm5vS2luZXRpY18iLCJjZW50cm9pZCIsInVwZGF0ZSIsImJlZ2luIiwiZ2V0QW5nbGUiLCJjZW50ZXJweCIsIlBvaW50ZXIiLCJEcmFnUm90YXRlIiwibGFzdEFuZ2xlXyIsIlJlbmRlckJveCIsImdlb21ldHJ5XyIsInN0YXJ0UGl4ZWxfIiwiZW5kUGl4ZWxfIiwicmVuZGVyXyIsInN0YXJ0UGl4ZWwiLCJlbmRQaXhlbCIsInB4Iiwic2V0UGl4ZWxzIiwiY3JlYXRlT3JVcGRhdGVHZW9tZXRyeSIsImdldEdlb21ldHJ5IiwiRHJhZ0JveEV2ZW50IiwiRHJhZ0JveCIsImJveF8iLCJtaW5BcmVhXyIsIm1pbkFyZWEiLCJvbkJveEVuZCIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwiY29tcGxldGVCb3giLCJEcmFnWm9vbSIsIm91dF8iLCJvdXQiLCJLZXlib2FyZFBhbiIsImRlZmF1bHRDb25kaXRpb25fIiwicGl4ZWxEZWx0YV8iLCJwaXhlbERlbHRhIiwia2V5RXZlbnQiLCJrZXlDb2RlIiwibWFwVW5pdHNEZWx0YSIsInBhbiIsIktleWJvYXJkWm9vbSIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsIktpbmV0aWMiLCJkZWNheSIsIm1pblZlbG9jaXR5IiwiZGVsYXkiLCJkZWNheV8iLCJtaW5WZWxvY2l0eV8iLCJkZWxheV8iLCJwb2ludHNfIiwiYW5nbGVfIiwiaW5pdGlhbFZlbG9jaXR5XyIsImxhc3RJbmRleCIsImZpcnN0SW5kZXgiLCJNb2RlIiwiTW91c2VXaGVlbFpvb20iLCJ0b3RhbERlbHRhXyIsImxhc3REZWx0YV8iLCJ0aW1lb3V0XyIsInRpbWVvdXQiLCJ1c2VBbmNob3JfIiwidXNlQW5jaG9yIiwiY29uc3RyYWluUmVzb2x1dGlvbl8iLCJsYXN0QW5jaG9yXyIsInN0YXJ0VGltZV8iLCJ0aW1lb3V0SWRfIiwibW9kZV8iLCJ0cmFja3BhZEV2ZW50R2FwXyIsInRyYWNrcGFkVGltZW91dElkXyIsImRlbHRhUGVyWm9vbV8iLCJlbmRJbnRlcmFjdGlvbl8iLCJ3aGVlbEV2ZW50IiwiZGVsdGFNb2RlIiwiV2hlZWxFdmVudCIsIkRPTV9ERUxUQV9QSVhFTCIsIkRPTV9ERUxUQV9MSU5FIiwidGltZUxlZnQiLCJoYW5kbGVXaGVlbFpvb21fIiwic2V0TW91c2VBbmNob3IiLCJQaW5jaFJvdGF0ZSIsInBvaW50ZXJPcHRpb25zIiwiYW5jaG9yXyIsInJvdGF0aW5nXyIsInJvdGF0aW9uRGVsdGFfIiwidGhyZXNob2xkXyIsInRocmVzaG9sZCIsInJvdGF0aW9uRGVsdGEiLCJ0b3VjaDAiLCJ0b3VjaDEiLCJQaW5jaFpvb20iLCJsYXN0RGlzdGFuY2VfIiwibGFzdFNjYWxlRGVsdGFfIiwic2NhbGVEZWx0YSIsInpvb21PcHRpb25zIiwicm90YXRlT3B0aW9ucyIsImF0dHJpYnV0aW9uIiwiYXR0cmlidXRpb25PcHRpb25zIiwiYWx0U2hpZnREcmFnUm90YXRlIiwiZG91YmxlQ2xpY2tab29tIiwiem9vbURlbHRhIiwiem9vbUR1cmF0aW9uIiwiZHJhZ1BhbiIsInBpbmNoUm90YXRlIiwicGluY2hab29tIiwia2V5Ym9hcmQiLCJtb3VzZVdoZWVsWm9vbSIsInNoaWZ0RHJhZ1pvb20iLCJDb21wb3NpdGUiLCJDb21wb3NpdGVDb250cm9sIiwiY2hpbGRDb250cm9scyIsIm9wdHMiLCJzdXBlciIsImdldENoaWxkQ29udHJvbHMiLCJDb250YWluZXIiLCJzdHlsZUNsYXNzIiwiZ2V0U3R5bGVDbGFzcyIsInRvQXJyYXkiLCJCdXR0b24iLCJ0b29sdGlwQXNUZXh0RWxlbWVudCIsInVuaWNvZGUiLCJpY29uQ2xhc3NOYW1lIiwidG9vbHRpcCIsImJ1dHRvbkNvbnRhaW5lckVsZW1lbnQiLCJjb250YWluZXJDbGFzc05hbWUiLCJidXR0b25FbGVtZW50IiwiZnJvbUNvZGVQb2ludCIsImdldEljb25FbGVtZW50Rm9ySWNvbkNsYXNzTmFtZSIsImFwcGVuZCIsImRpdkVsZW1lbnQiLCJzcGFuRWxlbWVudCIsImdldEJ1dHRvbiIsInNldEJ1dHRvblVuaWNvZGUiLCJzZXRCdXR0b25JY29uQ2xhc3NOYW1lIiwiaWNvbkVsZW1lbnQiLCJUb2dnbGVFdmVudCIsImlzVG9nZ2xlZCIsIlRvZ2dsZUJ1dHRvbiIsImNvbnRhaW5lclRvVG9nZ2xlIiwiX2lzVG9nZ2xlZCIsInVuaWNvZGVUb2dnbGVkIiwiaWNvbkNsYXNzTmFtZVRvZ2dsZWQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0UGFyZW50RWxlbWVudCIsImhhbmRsZU92ZXJsYXlGb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZU92ZXJsYXlPdXRlciIsInNlbGVjdG9yczJ0b2dnbGUiLCJ0b2dnbGVDbGFzc05hbWVzIiwiYW5jZXN0b3IiLCJzZWxlY3RvcjJ0b2dnbGUiLCJ0b2dnbGVFbGVtZW50IiwidG9nZ2xlQ2xhc3NOYW1lIiwidG9nZ2xlQ2xhc3MiLCJjcmVhdGVDaGlsZElmTm90RXhpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hpbGQiLCJyZW1vdmVDaGlsZHJlbklmRXhpc3QiLCJvdmVybGF5YWJsZVBhcmVudHMiLCJjbG9zZXN0UGFyZW50IiwiY2xvc2VzdCIsIkdlb2xvY2F0aW9uRXJyb3IiLCJHZW9sb2NhdGlvbiIsInBvc2l0aW9uXyIsInRyYW5zZm9ybV8iLCJ3YXRjaElkXyIsImhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyIsImhhbmRsZVRyYWNraW5nQ2hhbmdlZF8iLCJzZXRQcm9qZWN0aW9uIiwidHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmciLCJ0cmFja2luZyIsImdldFRyYWNraW5nIiwiZ2VvbG9jYXRpb24iLCJ3YXRjaFBvc2l0aW9uIiwicG9zaXRpb25DaGFuZ2VfIiwicG9zaXRpb25FcnJvcl8iLCJnZXRUcmFja2luZ09wdGlvbnMiLCJjbGVhcldhdGNoIiwiYWNjdXJhY3kiLCJhbHRpdHVkZSIsImFsdGl0dWRlQWNjdXJhY3kiLCJoZWFkaW5nIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJwcm9qZWN0ZWRQb3NpdGlvbiIsInNwZWVkIiwib3B0X24iLCJvcHRfc3BoZXJlUmFkaXVzIiwiY2lyY3VsYXIiLCJnZXRBY2N1cmFjeSIsImdldEFjY3VyYWN5R2VvbWV0cnkiLCJnZXRBbHRpdHVkZSIsImdldEFsdGl0dWRlQWNjdXJhY3kiLCJnZXRIZWFkaW5nIiwiZ2V0UG9zaXRpb24iLCJnZXRTcGVlZCIsIkxvY2F0aW9uUmV0cmlldmVkRXZlbnQiLCJQUk9KRUNUSU9OIiwiQ09PUkRJTkFURV9GT1JNQVQiLCJNb3VzZVBvc2l0aW9uIiwiY29vcmRpbmF0ZUZvcm1hdCIsInNldENvb3JkaW5hdGVGb3JtYXQiLCJyZW5kZXJPbk1vdXNlT3V0IiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWRIVE1MIiwicGxhY2Vob2xkZXJfIiwicmVuZGVyT25Nb3VzZU91dF8iLCJyZW5kZXJlZEhUTUxfIiwibWFwUHJvamVjdGlvbl8iLCJnZXRDb29yZGluYXRlRm9ybWF0IiwiaGFuZGxlTW91c2VNb3ZlIiwidXBkYXRlSFRNTF8iLCJoYW5kbGVNb3VzZU91dCIsInZpZXdwb3J0IiwiZm9ybWF0IiwiaHRtbCIsIkRJU1BMQVlfRFBJIiwiTEVBRElOR19ESUdJVFMiLCJPdmVydmlld01hcEV2ZW50IiwiT3ZlcnZpZXciLCJvdmVydmlld0NvbnRhaW5lckVsZW1lbnQiLCJmaWd1cmVFbGVtZW50IiwiU1ZHX0NPREUiLCJvbk92ZXJ2aWV3SW1hZ2VDbGljayIsInN2Z0VsZW1lbnQiLCJiYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJTVkdfV0lEVEgiLCJTVkdfSEVJR0hUIiwiQkFDS0dST1VORF9DT0xPUiIsInByZXBlbmQiLCJ1cGRhdGVDcm9zc2hhaXIiLCJfYSIsImdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0IiwiZXhpc3RpbmdFbG1zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImV4aXN0aW5nRWxtIiwiZnJvbSIsImdldENyb3NzaGFpciIsImNzc0NsYXNzIiwibGluZSIsImNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgiLCJfYiIsIm92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0IiwiY2xpY2tMb25MYXQiLCJnZXRMb25MYXRGcm9tT3ZlcnZpZXdQeCIsIm9QeCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiZ2V0T3ZlcnZpZXdDb250YWluZXJFbGVtZW50IiwiZ2V0U1ZHRWxlbWVudCIsImdldEJhY2tncm91bmRSZWN0RWxlbWVudCIsIlNoYXJlIiwiREVGQVVMVF9VTklDT0RFIiwiREVGQVVMVF9UT09MVElQX1RFWFQiLCJUaWxlIiwiaW50ZXJpbVRpbGUiLCJ0cmFuc2l0aW9uXyIsInRyYW5zaXRpb25TdGFydHNfIiwiaW50ZXJwb2xhdGUiLCJyZWxlYXNlIiwicmVmcmVzaEludGVyaW1DaGFpbiIsImdldFRpbGVDb29yZCIsIkltYWdlQmFzZSIsImdldFBpeGVsUmF0aW8iLCJsaXN0ZW5JbWFnZSIsImxvYWRIYW5kbGVyIiwiZXJyb3JIYW5kbGVyIiwiaW1nIiwibGlzdGVuaW5nIiwiZGVjb2RpbmciLCJsb2FkZWQiLCJjYXRjaCIsIkltYWdlV3JhcHBlciIsImltYWdlTG9hZEZ1bmN0aW9uIiwic3JjXyIsImltYWdlXyIsInVubGlzdGVuXyIsImltYWdlTG9hZEZ1bmN0aW9uXyIsImhhbmRsZUltYWdlRXJyb3JfIiwidW5saXN0ZW5JbWFnZV8iLCJoYW5kbGVJbWFnZUxvYWRfIiwic2V0SW1hZ2UiLCJJbWFnZVRpbGUiLCJ0aWxlTG9hZEZ1bmN0aW9uIiwiY3Jvc3NPcmlnaW5fIiwidGlsZUxvYWRGdW5jdGlvbl8iLCJjdHgiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsIm5hdHVyYWxXaWR0aCIsIm5hdHVyYWxIZWlnaHQiLCJUcmlhbmd1bGF0aW9uIiwidGFyZ2V0UHJvaiIsInRhcmdldEV4dGVudCIsIm1heFNvdXJjZUV4dGVudCIsImVycm9yVGhyZXNob2xkIiwib3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiIsInNvdXJjZVByb2pfIiwidGFyZ2V0UHJval8iLCJ0cmFuc2Zvcm1JbnZDYWNoZSIsInRyYW5zZm9ybUludiIsInRyYW5zZm9ybUludl8iLCJtYXhTb3VyY2VFeHRlbnRfIiwiZXJyb3JUaHJlc2hvbGRTcXVhcmVkXyIsInRyaWFuZ2xlc18iLCJ3cmFwc1hJblNvdXJjZV8iLCJjYW5XcmFwWEluU291cmNlXyIsInNvdXJjZVdvcmxkV2lkdGhfIiwidGFyZ2V0V29ybGRXaWR0aF8iLCJkZXN0aW5hdGlvblRvcExlZnQiLCJkZXN0aW5hdGlvblRvcFJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21SaWdodCIsImRlc3RpbmF0aW9uQm90dG9tTGVmdCIsInNvdXJjZVRvcExlZnQiLCJzb3VyY2VUb3BSaWdodCIsInNvdXJjZUJvdHRvbVJpZ2h0Iiwic291cmNlQm90dG9tTGVmdCIsIm1heFN1YmRpdmlzaW9uIiwiYWRkUXVhZF8iLCJsZWZ0Qm91bmRfMSIsInRyaWFuZ2xlIiwibmV3VHJpYW5nbGUiLCJhZGRUcmlhbmdsZV8iLCJhU3JjIiwiYlNyYyIsImNTcmMiLCJkU3JjIiwic291cmNlUXVhZEV4dGVudCIsInNvdXJjZUNvdmVyYWdlWCIsInNvdXJjZVdvcmxkV2lkdGgiLCJ3cmFwc1giLCJuZWVkc1N1YmRpdmlzaW9uIiwiaXNGaW5pdGUiLCJpc05vdEZpbml0ZSIsImNlbnRlclNyYyIsImJjIiwiYmNTcmMiLCJkYSIsImRhU3JjIiwiYWIiLCJhYlNyYyIsImNkIiwiY2RTcmMiLCJjYWxjdWxhdGVTb3VyY2VFeHRlbnQiLCJnZXRUcmlhbmdsZXMiLCJicm9rZW5EaWFnb25hbFJlbmRlcmluZ18iLCJkcmF3VGVzdFRyaWFuZ2xlIiwidTEiLCJ2MSIsInUyIiwidjIiLCJjbG9zZVBhdGgiLCJ2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyIsImNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24iLCJ0YXJnZXRNZXRlcnNQZXJVbml0Iiwic291cmNlTWV0ZXJzUGVyVW5pdCIsInNvdXJjZUV4dGVudCIsImNvbXBlbnNhdGlvbkZhY3RvciIsIlJlcHJvalRpbGUiLCJzb3VyY2VUaWxlR3JpZCIsInRhcmdldFRpbGVHcmlkIiwid3JhcHBlZFRpbGVDb29yZCIsImdldFRpbGVGdW5jdGlvbiIsIm9wdF9lcnJvclRocmVzaG9sZCIsIm9wdF9yZW5kZXJFZGdlcyIsIm9wdF9pbnRlcnBvbGF0ZSIsInJlbmRlckVkZ2VzXyIsImd1dHRlcl8iLCJjYW52YXNfIiwic291cmNlVGlsZUdyaWRfIiwidGFyZ2V0VGlsZUdyaWRfIiwid3JhcHBlZFRpbGVDb29yZF8iLCJzb3VyY2VUaWxlc18iLCJzb3VyY2VzTGlzdGVuZXJLZXlzXyIsInNvdXJjZVpfIiwibWF4VGFyZ2V0RXh0ZW50IiwibGltaXRlZFRhcmdldEV4dGVudCIsInNvdXJjZVByb2pFeHRlbnQiLCJjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uIiwiZXJyb3JUaHJlc2hvbGRJblBpeGVscyIsInRyaWFuZ3VsYXRpb25fIiwic291cmNlUmFuZ2UiLCJzcmNYIiwic3JjWSIsInJlcHJvamVjdF8iLCJzb3VyY2VzIiwiZ2V0VGlsZVNpemUiLCJ0cmlhbmd1bGF0aW9uIiwicGl4ZWxSb3VuZCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsInNvdXJjZURhdGFFeHRlbnQiLCJjYW52YXNXaWR0aEluVW5pdHMiLCJjYW52YXNIZWlnaHRJblVuaXRzIiwic3RpdGNoQ29udGV4dCIsInN0aXRjaFNjYWxlIiwieFBvcyIsInlQb3MiLCJzcmNXaWR0aCIsInNyY0hlaWdodCIsInRhcmdldFRvcExlZnQiLCJ1MCIsInYwIiwic291cmNlTnVtZXJpY2FsU2hpZnRYIiwic291cmNlTnVtZXJpY2FsU2hpZnRZIiwiYWZmaW5lQ29lZnMiLCJtYXhSb3ciLCJtYXhFbCIsImFic1ZhbHVlIiwiY29lZiIsImwiLCJzb2x2ZUxpbmVhclN5c3RlbSIsImlzQnJva2VuRGlhZ29uYWxSZW5kZXJpbmciLCJ1ZCIsInZkIiwic3RlcCIsInN0ZXBzIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJzdHJva2UiLCJsZWZ0VG9Mb2FkXzEiLCJzb3VyY2VMaXN0ZW5LZXlfMSIsInVubGlzdGVuU291cmNlc18iLCJMUlVDYWNoZSIsIm9wdF9oaWdoV2F0ZXJNYXJrIiwiaGlnaFdhdGVyTWFyayIsImNvdW50XyIsImVudHJpZXNfIiwib2xkZXN0XyIsIm5ld2VzdF8iLCJjb250YWluc0tleSIsImVudHJ5IiwidmFsdWVfIiwia2V5XyIsIm5ld2VyIiwib2xkZXIiLCJwZWVrTGFzdCIsInBlZWtMYXN0S2V5IiwicGVla0ZpcnN0S2V5Iiwib3B0X3RpbGVDb29yZCIsImdldEtleVpYWSIsIlRpbGVDYWNoZSIsInBydW5lRXhjZXB0TmV3ZXN0WiIsImFkYXB0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25MaWtlIiwiU291cmNlIiwiYXR0cmlidXRpb25zXyIsImF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXyIsImF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIiwid3JhcFhfIiwid3JhcFgiLCJpbnRlcnBvbGF0ZV8iLCJ2aWV3UmVzb2x2ZXIiLCJ2aWV3UmVqZWN0b3IiLCJ2aWV3UHJvbWlzZV8iLCJyZWplY3QiLCJyZWZyZXNoIiwic2V0QXR0cmlidXRpb25zIiwidG1wVGlsZUNvb3JkIiwiVGlsZUdyaWQiLCJjb21wYXJlIiwiZXZlcnkiLCJjdXJyZW50VmFsIiwicmVzIiwib3JpZ2lucyIsIm9yaWdpbl8iLCJvcmlnaW4iLCJvcmlnaW5zXyIsInRpbGVTaXplc18iLCJ0aWxlU2l6ZXMiLCJ0aWxlU2l6ZV8iLCJ0aWxlU2l6ZSIsImZ1bGxUaWxlUmFuZ2VzXyIsInRtcFNpemVfIiwidG1wRXh0ZW50XyIsInNpemVzIiwicmVzdHJpY3RlZFRpbGVSYW5nZSIsImNhbGN1bGF0ZVRpbGVSYW5nZXNfIiwiZm9yRWFjaFRpbGVDb29yZCIsIm9wdF90aWxlUmFuZ2UiLCJ0aWxlQ29vcmRFeHRlbnQiLCJnZXRPcmlnaW4iLCJnZXRUaWxlUmFuZ2VGb3JUaWxlQ29vcmRBbmRaIiwidGlsZUNvb3JkWiIsInRpbGVDb29yZFgiLCJ0aWxlQ29vcmRZIiwiZ2V0VGlsZVJhbmdlRXh0ZW50IiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyIsImdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbiIsImdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8iLCJyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IiwiZ2V0VGlsZUNvb3JkUmVzb2x1dGlvbiIsImdldEZ1bGxUaWxlUmFuZ2UiLCJmdWxsVGlsZVJhbmdlcyIsImdldEZvclByb2plY3Rpb24iLCJvcHRfbWF4Wm9vbSIsIm9wdF90aWxlU2l6ZSIsIm9wdF9jb3JuZXIiLCJyZXNvbHV0aW9uc0Zyb21FeHRlbnQiLCJjcmVhdGVGb3JFeHRlbnQiLCJleHRlbnRGcm9tUHJvamVjdGlvbiIsImNyZWF0ZUZvclByb2plY3Rpb24iLCJvcHRfbWF4UmVzb2x1dGlvbiIsImhhbGYiLCJUaWxlU291cmNlIiwib3BhcXVlXyIsIm9wYXF1ZSIsInRpbGVQaXhlbFJhdGlvXyIsInRpbGVDYWNoZSIsInRtcFNpemUiLCJ0aWxlT3B0aW9ucyIsImdldFRpbGVDYWNoZUZvclByb2plY3Rpb24iLCJzZXRLZXkiLCJnZXRUaWxlR3JpZCIsImdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbiIsIm9wdF9wcm9qZWN0aW9uIiwid2l0aGluRXh0ZW50QW5kWiIsIlRpbGVTb3VyY2VFdmVudCIsImNyZWF0ZUZyb21UZW1wbGF0ZSIsInRlbXBsYXRlIiwielJlZ0V4IiwieFJlZ0V4IiwieVJlZ0V4IiwiZGFzaFlSZWdFeCIsInJhbmdlIiwiVXJsVGlsZSIsImdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyIsInRpbGVVcmxGdW5jdGlvbiIsInVybHMiLCJzZXRVcmxzIiwidXJsIiwic2V0VXJsIiwidGlsZUxvYWRpbmdLZXlzXyIsImdldFRpbGVMb2FkRnVuY3Rpb24iLCJnZXRUaWxlVXJsRnVuY3Rpb24iLCJnZXRQcm90b3R5cGVPZiIsImdldFVybHMiLCJzZXRUaWxlTG9hZEZ1bmN0aW9uIiwic2V0VGlsZVVybEZ1bmN0aW9uIiwibWF0Y2giLCJzdGFydENoYXJDb2RlIiwic3RvcENoYXJDb2RlIiwiZnJvbUNoYXJDb2RlIiwic3RvcF8xIiwiZXhwYW5kVXJsIiwidGVtcGxhdGVzIiwidGlsZVVybEZ1bmN0aW9ucyIsImNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRlbXBsYXRlcyIsIlRpbGVJbWFnZSIsImltYWdlU21vb3RoaW5nIiwiZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24iLCJ0aWxlQ2xhc3MiLCJ0aWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwidGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJyZW5kZXJSZXByb2plY3Rpb25FZGdlc18iLCJ1c2VkVGlsZUNhY2hlIiwiZ2V0R3V0dGVyIiwidGhpc1Byb2oiLCJwcm9qS2V5IiwiY3JlYXRlVGlsZV8iLCJ1cmxUaWxlQ29vcmQiLCJ0aWxlVXJsIiwibmV3VGlsZSIsImdldFRpbGVJbnRlcm5hbCIsInNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzIiwic2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZWdyaWQiLCJwcm9qIiwiaW1hZ2VUaWxlIiwiWFlaIiwieHl6T3B0aW9ucyIsImdyaWRPcHRpb25zIiwiY3JlYXRlWFlaIiwiVkFSSUFOVFMiLCJnZW9sYW5kYmFzZW1hcCIsImJtYXBncmF1IiwiYm1hcG9ydGhvZm90bzMwY20iLCJibWFwZ2VsYWVuZGUiLCJibWFwb2JlcmZsYWVjaGUiLCJibWFwb3ZlcmxheSIsIlhZWlNvdXJjZSIsInZhcmlhbnQiLCJfbWluV2lkdGgiLCJtaW5XaWR0aCIsInJlbmRlcmVkVmlzaWJsZSIsInJlbmRlcmVkV2lkdGgiLCJyZW5kZXJlZFNWRyIsImRwaSIsInVwZGF0ZUVsZW1lbnQiLCJwb2ludFJlc29sdXRpb25Vbml0cyIsIm5vbWluYWxDb3VudCIsInN1ZmZpeCIsImRlY2ltYWxDb3VudCIsImRlY2ltYWwiLCJnZW5lcmF0ZWRTVkciLCJnZXRHZW5lcmF0ZWRTVkciLCJ0eHQiLCJzdmciLCJyZWN0IiwidGV4dCIsInNldE1pbldpZHRoIiwiZ2V0TWluV2lkdGgiLCJPbE1vdXNlUG9zaXRpb24iLCJvcHRfZnJhY3Rpb25EaWdpdHMiLCJPbEF0dHJpYnV0aW9uIiwidG9nZ2xlQnV0dG9uIiwidmVydGljYWxDb250cm9scyIsImhvcml6b250YWxDb250cm9scyIsImdldFRvZ2dsZUJ1dHRvbiIsImdlb0xvY2F0aW9uT3B0aW9ucyIsIl9nZW9Mb2NhdGlvbiIsImdlb0xvY2F0aW9uIiwiT2xab29tIl0sInNvdXJjZVJvb3QiOiIifQ==