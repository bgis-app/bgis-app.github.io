!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["bgis-core"]=e():t["bgis-core"]=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),n="propertychange",o=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){var o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;var i=void 0;if(n>0){for(i=1;i<o;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<o;++i)if(t[i]<=e)return i}else for(i=1;i<o;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return o-1}function s(t,e){var n=t.length;if(n!==e.length)return!1;for(var o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function a(){return!0}function l(){return!1}function u(){}var c="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,i=arguments.length;o<i;++o){var r=arguments[o];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n};function h(t){for(var e in t)delete t[e]}var p,d="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e},f=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const g=function(t){function n(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return f(n,t),n.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),o=n[t]||(n[t]=[]);-1===o.indexOf(e)&&o.push(e)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new e(t):t,o=n.type;n.target||(n.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[o];if(r){var s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});o in s||(s[o]=0,a[o]=0),++s[o];for(var l=0,c=r.length;l<c;++l)if(!1===(i="handleEvent"in r[l]?r[l].handleEvent(n):r[l].call(this,n))||n.propagationStopped){i=!1;break}if(--s[o],0===s[o]){var h=a[o];for(delete a[o];h--;)this.removeEventListener(o,u);delete s[o]}return i}},n.prototype.disposeInternal=function(){this.listeners_&&h(this.listeners_)},n.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},n.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},n.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var o=n.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[o]=u,++this.pendingRemovals_[t]):(n.splice(o,1),0===n.length&&delete this.listeners_[t]))}},n}(o),_="change",v="contextmenu",y="click",m="keydown",C="keypress",w="resize",x="touchmove",E="wheel";function b(t,e,n,o,i){if(o&&o!==t&&(n=n.bind(o)),i){var r=n;n=function(){t.removeEventListener(e,n),r.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function T(t,e,n,o){return b(t,e,n,o,!0)}function P(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),h(t))}var O=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),R=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return O(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(_)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=b(this,t[i],e);return o}return b(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var o=t.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=T(this,t[i],e)}else n=T(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)P(t[e]);else P(t)}(n);else if(Array.isArray(t))for(var o=0,i=t.length;o<i;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},e}(g);R.prototype.on,R.prototype.once,R.prototype.un;const S=R;function M(){return function(){throw new Error("Unimplemented abstract method.")}()}var A=0;function I(t){return t.ol_uid||(t.ol_uid=String(++A))}var j=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.key=n,i.oldValue=o,i}return j(e,t),e}(e);const L=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,I(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return j(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&c({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var o;o="change:"+t,this.dispatchEvent(new F(o,t,e)),o=n,this.dispatchEvent(new F(o,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var o=this.values_||(this.values_={});if(n)o[t]=e;else{var i=o[t];o[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&c(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(S),D="opacity",k="visible",z="extent",G="zIndex",N="maxResolution",K="minResolution",Z="maxZoom",V="minZoom",U="source";var X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const H=function(t){function e(e){var n=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.6.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,o)||this).code=e,n.name="AssertionError",n.message=o,n}return X(e,t),e}(Error);function B(t,e){if(!t)throw new H(e)}function W(t,e,n){return Math.min(Math.max(t,e),n)}var Y="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},q="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function Q(t,e,n,o,i,r){var s=i-n,a=r-o;if(0!==s||0!==a){var l=((t-n)*s+(e-o)*a)/(s*s+a*a);l>1?(n=i,o=r):l>0&&(n+=s*l,o+=a*l)}return $(t,e,n,o)}function $(t,e,n,o){var i=n-t,r=o-e;return i*i+r*r}function J(t){return t*Math.PI/180}function tt(t,e){var n=t%e;return n*e<0?n+e:n}function et(t,e,n){return t+n*(e-t)}var nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ot=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=c({},e);return"object"==typeof e.properties&&(delete o.properties,c(o,e.properties)),o.opacity=void 0!==e.opacity?e.opacity:1,B("number"==typeof o.opacity,64),o.visible=void 0===e.visible||e.visible,o.zIndex=e.zIndex,o.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,o.minResolution=void 0!==e.minResolution?e.minResolution:0,o.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,o.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return nt(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=W(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return M()},e.prototype.getLayerStatesArray=function(t){return M()},e.prototype.getExtent=function(){return this.get(z)},e.prototype.getMaxResolution=function(){return this.get(N)},e.prototype.getMinResolution=function(){return this.get(K)},e.prototype.getMinZoom=function(){return this.get(V)},e.prototype.getMaxZoom=function(){return this.get(Z)},e.prototype.getOpacity=function(){return this.get(D)},e.prototype.getSourceState=function(){return M()},e.prototype.getVisible=function(){return this.get(k)},e.prototype.getZIndex=function(){return this.get(G)},e.prototype.setExtent=function(t){this.set(z,t)},e.prototype.setMaxResolution=function(t){this.set(N,t)},e.prototype.setMinResolution=function(t){this.set(K,t)},e.prototype.setMaxZoom=function(t){this.set(Z,t)},e.prototype.setMinZoom=function(t){this.set(V,t)},e.prototype.setOpacity=function(t){B("number"==typeof t,64),this.set(D,t)},e.prototype.setVisible=function(t){this.set(k,t)},e.prototype.setZIndex=function(t){this.set(G,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(L),it="precompose",rt="rendercomplete",st="undefined",at="ready";var lt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ut(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var o=e.zoom;return o>t.minZoom&&o<=t.maxZoom}const ct=function(t){function e(e){var n=this,o=c({},e);delete o.source,(n=t.call(this,o)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(U,n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return lt(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(U)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():st},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(P(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=b(t,_,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(P(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(P(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=b(t,it,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);B(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=b(this,_,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(U,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(ot),ht="preload",pt="useInterimTilesOnError";var dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ft=function(t){function e(e){var n=this,o=e||{},i=c({},o);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==o.preload?o.preload:0),n.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),n}return dt(e,t),e.prototype.getPreload=function(){return this.get(ht)},e.prototype.setPreload=function(t){this.set(ht,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(pt)},e.prototype.setUseInterimTilesOnError=function(t){this.set(pt,t)},e}(ct);var gt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _t=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return gt(e,t),e.prototype.getFeatures=function(t){return M()},e.prototype.prepareFrame=function(t){return M()},e.prototype.renderFrame=function(t,e){return M()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(o,i){var r=this.loadedTileCallback.bind(this,n,o);return t.forEachLoadedTile(e,o,i,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i){},e.prototype.getDataAtPixel=function(t,e,n){return M()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(_,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==at&&t.changed()},e}(S);var vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const yt=function(t){function e(e,n,o,i){var r=t.call(this,e)||this;return r.inversePixelTransform=n,r.frameState=o,r.context=i,r}return vt(e,t),e}(e);var mt,Ct="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",wt=-1!==Ct.indexOf("firefox"),xt=(-1!==Ct.indexOf("safari")&&Ct.indexOf("chrom"),-1!==Ct.indexOf("webkit")&&-1==Ct.indexOf("edge")),Et=-1!==Ct.indexOf("macintosh"),bt="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Tt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Pt="undefined"!=typeof Image&&Image.prototype.decode,Ot=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function Rt(t,e){var n=e[0],o=e[1];return e[0]=t[0]*n+t[2]*o+t[4],e[1]=t[1]*n+t[3]*o+t[5],e}function St(t,e,n,o,i,r,s,a){var l=Math.sin(r),u=Math.cos(r);return t[0]=o*u,t[1]=i*l,t[2]=-o*l,t[3]=i*u,t[4]=s*o*u-a*o*l+e,t[5]=s*i*l+a*i*u+n,t}function Mt(t,e){var n,o=(n=e)[0]*n[3]-n[1]*n[2];B(0!==o,32);var i=e[0],r=e[1],s=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/o,t[1]=-r/o,t[2]=-s/o,t[3]=i/o,t[4]=(s*u-a*l)/o,t[5]=-(i*u-r*l)/o,t}new Array(6);const At="top-left";function It(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,o=t.length;n<o;++n)Nt(e,t[n]);return e}function jt(t,e,n){var o,i;return(o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*o+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function Ft(t,e){return Lt(t,e[0],e[1])}function Lt(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Dt(t,e){var n=t[0],o=t[1],i=t[2],r=t[3],s=e[0],a=e[1],l=0;return s<n?l|=16:s>i&&(l|=4),a<o?l|=8:a>r&&(l|=2),0===l&&(l=1),l}function kt(t,e,n,o,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=o,i):[t,e,n,o]}function zt(t){return kt(1/0,1/0,-1/0,-1/0,t)}function Gt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Nt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Kt(t,e,n,o,i){for(;n<o;n+=i)Zt(t,e[n],e[n+1]);return t}function Zt(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Vt(t,e){var n;return(n=e(Xt(t)))||(n=e(Ht(t)))||(n=e(Jt(t)))?n:(n=e($t(t)))||!1}function Ut(t){var e=0;return ne(t)||(e=te(t)*qt(t)),e}function Xt(t){return[t[0],t[1]]}function Ht(t){return[t[2],t[1]]}function Bt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Wt(t,e){var n;return"bottom-left"===e?n=Xt(t):"bottom-right"===e?n=Ht(t):e===At?n=$t(t):"top-right"===e?n=Jt(t):B(!1,13),n}function Yt(t,e,n,o,i){var r=e*o[0]/2,s=e*o[1]/2,a=Math.cos(n),l=Math.sin(n),u=r*a,c=r*l,h=s*a,p=s*l,d=t[0],f=t[1],g=d-u+p,_=d-u-p,v=d+u-p,y=d+u+p,m=f-c-h,C=f-c+h,w=f+c+h,x=f+c-h;return kt(Math.min(g,_,v,y),Math.min(m,C,w,x),Math.max(g,_,v,y),Math.max(m,C,w,x),i)}function qt(t){return t[3]-t[1]}function Qt(t,e,n){var o=n||[1/0,1/0,-1/0,-1/0];return ee(t,e)?(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]):zt(o),o}function $t(t){return[t[0],t[3]]}function Jt(t){return[t[2],t[3]]}function te(t){return t[2]-t[0]}function ee(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function ne(t){return t[2]<t[0]||t[3]<t[1]}function oe(t,e,n,o){var i=n&&n.length?n.shift():Tt?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d",o)}function ie(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function re(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var se=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ae=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return se(e,t),e.prototype.useContainer=function(t,e,n){var o,i,r=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===r&&(a=t.firstElementChild)instanceof HTMLCanvasElement&&(i=a.getContext("2d")),!i||0!==i.canvas.width&&i.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=i,this.containerReused=!0),!this.container){(o=document.createElement("div")).className=r;var s=o.style;s.position="absolute",s.width="100%",s.height="100%";var a=(i=oe()).canvas;o.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=o,this.context=i}},e.prototype.clipUnrotated=function(t,e,n){var o=$t(n),i=Jt(n),r=Ht(n),s=Xt(n);Rt(e.coordinateToPixelTransform,o),Rt(e.coordinateToPixelTransform,i),Rt(e.coordinateToPixelTransform,r),Rt(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;Rt(a,o),Rt(a,i),Rt(a,r),Rt(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var o=this.getLayer();if(o.hasListener(t)){var i=new yt(t,this.inversePixelTransform,n,e);o.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,n,o,i,r,s){var a=i/2,l=r/2,u=o/e,c=-u,h=-t[0]+s,p=-t[1];return St(this.tempTransform,a,l,u,c,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var o,i=Rt(this.inversePixelTransform,t.slice()),r=this.context,s=this.getLayer().getExtent();if(s&&!Ft(s,Rt(e.pixelToCoordinateTransform,t.slice())))return null;try{var a=Math.round(i[0]),l=Math.round(i[1]),u=document.createElement("canvas"),c=u.getContext("2d");u.width=1,u.height=1,c.clearRect(0,0,1,1),c.drawImage(r.canvas,a,l,1,1,0,0,1,1),o=c.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:o}return 0===o[3]?null:o},e}(_t);var le=function(){function t(t,e,n,o){this.minX=t,this.maxX=e,this.minY=n,this.maxY=o}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ue(t,e,n,o,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=o,i):new le(t,e,n,o)}const ce=le;var he={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},pe={};pe[he.DEGREES]=2*Math.PI*6370997/360,pe[he.FEET]=.3048,pe[he.METERS]=1,pe[he.USFEET]=1200/3937;const de=he,fe=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||pe[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var ge=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=6378137,ve=Math.PI*_e,ye=[-ve,-ve,ve,ve],me=[-180,-85,180,85],Ce=_e*Math.log(Math.tan(Math.PI/2)),we=function(t){function e(e){return t.call(this,{code:e,units:de.METERS,extent:ye,global:!0,worldExtent:me,getPointResolution:function(t,e){return t/Y(e[1]/_e)}})||this}return ge(e,t),e}(fe),xe=[new we("EPSG:3857"),new we("EPSG:102100"),new we("EPSG:102113"),new we("EPSG:900913"),new we("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Ee=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),be=[-180,-90,180,90],Te=6378137*Math.PI/180,Pe=function(t){function e(e,n){return t.call(this,{code:e,units:de.DEGREES,extent:be,axisOrientation:n,global:!0,metersPerUnit:Te,worldExtent:be})||this}return Ee(e,t),e}(fe),Oe=[new Pe("CRS:84"),new Pe("EPSG:4326","neu"),new Pe("urn:ogc:def:crs:OGC:1.3:CRS84"),new Pe("urn:ogc:def:crs:OGC:2:84"),new Pe("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],Re={},Se={};function Me(t,e,n){var o=t.getCode(),i=e.getCode();o in Se||(Se[o]={}),Se[o][i]=n}function Ae(t,e,n){var o=n||6371008.8,i=J(t[1]),r=J(e[1]),s=(r-i)/2,a=J(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*o*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function Ie(t,e,n){var o;if(void 0!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];o=e}else o=t.slice();return o}function je(t,e,n){if(void 0!==e&&t!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}return t}function Fe(t){!function(t,e){Re[t]=e}(t.getCode(),t),Me(t,t,Ie)}function Le(t){return"string"==typeof t?Re[e=t]||Re[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function De(t,e,n,o){var i,r=(t=Le(t)).getPointResolutionFunc();if(r)i=r(e,n),o&&o!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/pe[o]);else{var s=t.getUnits();if(s==de.DEGREES&&!o||o==de.DEGREES)i=e;else{var a,l=Ne(t,Le("EPSG:4326"));if(l===je&&s!==de.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(Ae((u=l(u,u,2)).slice(0,2),u.slice(2,4))+Ae(u.slice(4,6),u.slice(6,8)))/2}void 0!==(a=o?pe[o]:t.getMetersPerUnit())&&(i/=a)}}return i}function ke(t){!function(t){t.forEach(Fe)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Me(e,t,Ie)}))}))}function ze(t,e){return t?"string"==typeof t?Le(t):t:Le(e)}function Ge(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Ne(t,e)===Ie)&&n}function Ne(t,e){var n=function(t,e){var n;return t in Se&&e in Se[t]&&(n=Se[t][e]),n}(t.getCode(),e.getCode());return n||(n=je),n}function Ke(t,e){return Ne(Le(t),Le(e))}function Ze(t,e,n){return Ke(e,n)(t,void 0,t.length)}var Ve,Ue,Xe,He=null;function Be(){return He}function We(t,e){return t}function Ye(t,e){return t}function qe(t,e){return t}ke(xe),ke(Oe),Ve=xe,Ue=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i){r[s]=ve*t[s]/180;var a=_e*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>Ce?a=Ce:a<-Ce&&(a=-Ce),r[s+1]=a}return r},Xe=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i)r[s]=180*t[s]/ve,r[s+1]=360*Math.atan(Math.exp(t[s+1]/_e))/Math.PI-90;return r},Oe.forEach((function(t){Ve.forEach((function(e){Me(t,e,Ue),Me(e,t,Xe)}))}));var Qe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$e=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new ce(0,0,0,0),n}return Qe(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),o=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!o},e.prototype.getTile=function(t,e,n,o){var i=o.pixelRatio,r=o.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,n,i,r);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,n,o){return!!this.isDrawableTile(o)&&t.prototype.loadedTileCallback.call(this,e,n,o)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],o=t.viewState,r=o.projection,s=o.resolution,a=o.center,l=o.rotation,u=t.pixelRatio,h=this.getLayer(),p=h.getSource(),d=p.getRevision(),f=p.getTileGridForProjection(r),g=f.getZForResolution(s,p.zDirection),_=f.getResolution(g),v=t.extent,y=n.extent&&qe(n.extent);y&&(v=Qt(v,qe(n.extent)));var m=p.getTilePixelRatio(u),C=Math.round(t.size[0]*m),w=Math.round(t.size[1]*m);if(l){var x=Math.round(Math.sqrt(C*C+w*w));C=x,w=x}var E=_*C/2/m,b=_*w/2/m,T=[a[0]-E,a[1]-b,a[0]+E,a[1]+b],P=f.getTileRangeForExtentAndZ(v,g),O={};O[g]={};var R=this.createLoadedTileFinder(p,r,O),S=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var A=P.minX;A<=P.maxX;++A)for(var j=P.minY;j<=P.maxY;++j){var F=this.getTile(g,A,j,t);if(this.isDrawableTile(F)){var L=I(this);if(2==F.getState()){O[g][F.tileCoord.toString()]=F;var D=F.inTransition(L);this.newTiles_||!D&&-1!==this.renderedTiles.indexOf(F)||(this.newTiles_=!0)}if(1===F.getAlpha(L,t.time))continue}var k=f.getTileCoordChildTileRange(F.tileCoord,M,S),z=!1;k&&(z=R(g+1,k)),z||f.forEachTileCoordParentTileRange(F.tileCoord,R,M,S)}var G=_/s;St(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,l,-C/2,-w/2);var N=function(t){var e="matrix("+t.join(", ")+")";if(Tt)return e;var n=mt||(mt=document.createElement("div"));return n.style.transform=e,n.style.transform}(this.pixelTransform);this.useContainer(e,N,n.opacity);var K=this.context,Z=K.canvas;Mt(this.inversePixelTransform,this.pixelTransform),St(this.tempTransform,C/2,w/2,G,G,0,-C/2,-w/2),Z.width!=C||Z.height!=w?(Z.width=C,Z.height=w):this.containerReused||K.clearRect(0,0,C,w),y&&this.clipUnrotated(K,t,y),c(K,p.getContextOptions()),this.preRender(K,t),this.renderedTiles.length=0;var V,U,X,H=Object.keys(O).map(Number);H.sort(i),1!==n.opacity||this.containerReused&&!p.getOpaque(t.viewState.projection)?(V=[],U=[]):H=H.reverse();for(var B=H.length-1;B>=0;--B){var W=H[B],Y=p.getTilePixelSize(W,u,r),q=f.getResolution(W)/_,Q=Y[0]*q*G,$=Y[1]*q*G,J=f.getTileCoordForCoordAndZ($t(T),W),tt=f.getTileCoordExtent(J),et=Rt(this.tempTransform,[m*(tt[0]-T[0])/_,m*(T[3]-tt[3])/_]),nt=m*p.getGutterForProjection(r),ot=O[W];for(var it in ot){var rt=(F=ot[it]).tileCoord,st=J[1]-rt[1],at=Math.round(et[0]-(st-1)*Q),lt=J[2]-rt[2],ut=Math.round(et[1]-(lt-1)*$),ct=at-(A=Math.round(et[0]-st*Q)),ht=ut-(j=Math.round(et[1]-lt*$)),pt=g===W;if(!(D=pt&&1!==F.getAlpha(I(this),t.time)))if(V){K.save(),X=[A,j,A+ct,j,A+ct,j+ht,A,j+ht];for(var dt=0,ft=V.length;dt<ft;++dt)if(g!==W&&W<U[dt]){var gt=V[dt];K.beginPath(),K.moveTo(X[0],X[1]),K.lineTo(X[2],X[3]),K.lineTo(X[4],X[5]),K.lineTo(X[6],X[7]),K.moveTo(gt[6],gt[7]),K.lineTo(gt[4],gt[5]),K.lineTo(gt[2],gt[3]),K.lineTo(gt[0],gt[1]),K.clip()}V.push(X),U.push(W)}else K.clearRect(A,j,ct,ht);this.drawTileImage(F,t,A,j,ct,ht,nt,pt,n.opacity),V&&!D?(K.restore(),this.renderedTiles.unshift(F)):this.renderedTiles.push(F),this.updateUsedTiles(t.usedTiles,p,F)}}return this.renderedRevision=d,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!Gt(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,p,f,u,r,v,g,h.getPreload()),this.scheduleExpireCache(t,p),this.postRender(K,t),n.extent&&K.restore(),N!==Z.style.transform&&(Z.style.transform=N),this.container},e.prototype.drawTileImage=function(t,e,n,o,i,r,s,a,l){var u=this.getTileImage(t);if(u){var c=I(this),h=a?t.getAlpha(c,e.time):1,p=l*h,d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,n,o,i,r),d&&this.context.restore(),1!==h?e.animate=!0:a&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var o=I(t);o in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var o=I(e);o in t||(t[o]={}),t[o][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,o,i,r,s,a,l){var u=I(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,p,d,f,g,_=t.wantedTiles[u],v=t.tileQueue,y=0;for(g=n.getMinZoom();g<=s;++g)for(h=n.getTileRangeForExtentAndZ(r,g,h),p=n.getResolution(g),d=h.minX;d<=h.maxX;++d)for(f=h.minY;f<=h.maxY;++f)s-g<=a?(++y,0==(c=e.getTile(g,d,f,o,i)).getState()&&(_[c.getKey()]=!0,v.isKeyQueued(c.getKey())||v.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),p])),void 0!==l&&l(c)):e.useTile(g,d,f,i);e.updateCacheSize(y,i)},e}(ae);$e.prototype.getLayer;const Je=$e;var tn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const en=function(t){function e(e){return t.call(this,e)||this}return tn(e,t),e.prototype.createRenderer=function(){return new Je(this)},e}(ft),nn="center",on="resolution",rn="rotation";function sn(t,e){for(var n=!0,o=t.length-1;o>=0;--o)if(t[o]!=e[o]){n=!1;break}return n}function an(t,e){var n=Math.cos(e),o=Math.sin(e),i=t[0]*n-t[1]*o,r=t[1]*n+t[0]*o;return t[0]=i,t[1]=r,t}function ln(t,e,n){return function(o,i,r,s,a){if(o){var l=e?0:r[0]*i,u=e?0:r[1]*i,c=a?a[0]:0,h=a?a[1]:0,p=t[0]+l/2+c,d=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;p>d&&(d=p=(d+p)/2),f>g&&(g=f=(g+f)/2);var _=W(o[0],p,d),v=W(o[1],f,g),y=30*i;return s&&n&&(_+=-y*Math.log(1+Math.max(0,p-o[0])/y)+y*Math.log(1+Math.max(0,o[0]-d)/y),v+=-y*Math.log(1+Math.max(0,f-o[1])/y)+y*Math.log(1+Math.max(0,o[1]-g)/y)),[_,v]}}}function un(t){return t}function cn(t,e,n,o){var i=te(e)/n[0],r=qt(e)/n[1];return o?Math.min(t,Math.max(i,r)):Math.min(t,Math.min(i,r))}function hn(t,e,n){var o=Math.min(t,e);return o*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(o=Math.max(o,n),o/=Math.log(1+50*Math.max(0,n/t-1))/50+1),W(o,n/2,2*e)}function pn(t,e,n,o,i){return function(r,s,a,l){if(void 0!==r){var u=o?cn(t,o,a,i):t;return(void 0===n||n)&&l?hn(r,u,e):W(r,e,u)}}}function dn(t){return void 0!==t?0:void 0}function fn(t){return void 0!==t?t:void 0}function gn(t){return Math.pow(t,3)}function _n(t){return 1-gn(1-t)}function vn(t){return 3*t*t-2*t*t*t}function yn(t){return t}const mn="XY",Cn="XYZM";var wn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xn=[1,0,0,1,0,0];const En=function(t){function e(){var e,n,o,i,r,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(e)},r=!1,function(){var t=Array.prototype.slice.call(arguments);return r&&this===i&&s(t,o)||(r=!0,i=this,o=t,n=e.apply(this,arguments)),n}),a}return wn(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return M()},e.prototype.closestPointXY=function(t,e,n,o){return M()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return M()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&zt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){M()},e.prototype.scale=function(t,e,n){M()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return M()},e.prototype.getType=function(){return M()},e.prototype.applyTransform=function(t){M()},e.prototype.intersectsExtent=function(t){return M()},e.prototype.translate=function(t,e){M()},e.prototype.transform=function(t,e){var n=Le(t),o=n.getUnits()==de.TILE_PIXELS?function(t,o,i){var r=n.getExtent(),s=n.getWorldExtent(),a=qt(s)/qt(r);return St(xn,s[0],s[3],a,-a,0,0,0),function(t,e,n,o,i,r){for(var s=r||[],a=0,l=0;l<n;l+=o){var u=t[l],c=t[l+1];s[a++]=i[0]*u+i[2]*c+i[4],s[a++]=i[1]*u+i[3]*c+i[5]}r&&s.length!=a&&(s.length=a)}(t,0,t.length,i,xn,o),Ke(n,e)(t,o,i)}:Ke(n,e);return this.applyTransform(o),this},e}(L);var bn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Tn(t){var e;return t==mn?e=2:"XYZ"==t||"XYM"==t?e=3:t==Cn&&(e=4),e}const Pn=function(t){function e(){var e=t.call(this)||this;return e.layout=mn,e.stride=2,e.flatCoordinates=null,e}return bn(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=this.flatCoordinates.length,o=this.stride,Kt(zt(t),e,0,n,o);var e,n,o},e.prototype.getCoordinates=function(){return M()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Tn(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){M()},e.prototype.setLayout=function(t,e,n){var o;if(t)o=Tn(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=mn,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=mn:3==t?e="XYZ":4==t&&(e=Cn),e}(o=e.length)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=Math.cos(i),u=Math.sin(i),c=r[0],h=r[1],p=0,d=0;d<n;d+=o){var f=t[d]-c,g=t[d+1]-h;a[p++]=c+f*l-g*u,a[p++]=h+f*u+g*l;for(var _=d+2;_<d+o;++_)a[p++]=t[_]}s&&a.length!=p&&(a.length=p)}(n,0,n.length,o,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var o=e;void 0===o&&(o=t);var i=n;i||(i=Bt(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,e,n,o,i,r,s,a){for(var l=a||[],u=s[0],c=s[1],h=0,p=0;p<n;p+=o){var d=t[p]-u,f=t[p+1]-c;l[h++]=u+i*d,l[h++]=c+r*f;for(var g=p+2;g<p+o;++g)l[h++]=t[g]}a&&l.length!=h&&(l.length=h)}(r,0,r.length,s,t,o,i,r),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=0,u=0;u<n;u+=o){a[l++]=t[u]+i,a[l++]=t[u+1]+r;for(var c=u+2;c<u+o;++c)a[l++]=t[c]}s&&a.length!=l&&(a.length=l)}(n,0,n.length,o,t,e,n),this.changed()}},e}(En);function On(t,e,n,o,i,r,s){var a,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)a=e;else{var p=((i-l)*c+(r-u)*h)/(c*c+h*h);if(p>1)a=n;else{if(p>0){for(var d=0;d<o;++d)s[d]=et(t[e+d],t[n+d],p);return void(s.length=o)}a=e}}for(d=0;d<o;++d)s[d]=t[a+d];s.length=o}function Rn(t,e,n,o,i){var r=t[e],s=t[e+1];for(e+=o;e<n;e+=o){var a=t[e],l=t[e+1],u=$(r,s,a,l);u>i&&(i=u),r=a,s=l}return i}function Sn(t,e,n,o,i,r,s,a,l,u,c){if(e==n)return u;var h,p;if(0===i){if((p=$(s,a,t[e],t[e+1]))<u){for(h=0;h<o;++h)l[h]=t[e+h];return l.length=o,p}return u}for(var d=c||[NaN,NaN],f=e+o;f<n;)if(On(t,f-o,f,o,s,a,d),(p=$(s,a,d[0],d[1]))<u){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o,f+=o}else f+=o*Math.max((Math.sqrt(p)-Math.sqrt(u))/i|0,1);if(r&&(On(t,n-o,e,o,s,a,d),(p=$(s,a,d[0],d[1]))<u)){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o}return u}function Mn(t,e,n,o){for(var i=0,r=n.length;i<r;++i)for(var s=n[i],a=0;a<o;++a)t[e++]=s[a];return e}function An(t,e){return e*Math.round(t/e)}function In(t,e,n,o,i,r,s){if(e==n)return s;var a,l,u=An(t[e],i),c=An(t[e+1],i);e+=o,r[s++]=u,r[s++]=c;do{if(a=An(t[e],i),l=An(t[e+1],i),(e+=o)==n)return r[s++]=a,r[s++]=l,s}while(a==u&&l==c);for(;e<n;){var h=An(t[e],i),p=An(t[e+1],i);if(e+=o,h!=a||p!=l){var d=a-u,f=l-c,g=h-u,_=p-c;d*_==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&_<f||f==_||f>0&&_>f)?(a=h,l=p):(r[s++]=a,r[s++]=l,u=a,c=l,a=h,l=p)}}return r[s++]=a,r[s++]=l,s}function jn(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=e;a<n;a+=o)r[s++]=t.slice(a,a+o);return r.length=s,r}function Fn(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=s*a-r*l,r=a,s=l}return i/2}var Ln=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Dn=function(t){function e(e,n){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?o.setCoordinates(e,n):o.setFlatCoordinates(n,e),o}return Ln(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,o){return o<jt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Rn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Sn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.getArea=function(){return Fn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return jn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=function(t,e,n,o,i,r,s){var a=(n-e)/o;if(a<3){for(;e<n;e+=o)r[s++]=t[e],r[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,n-o],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),d=0,f=t[p],g=t[p+1],_=t[h],v=t[h+1],y=p+o;y<h;y+=o){var m=Q(t[y],t[y+1],f,g,_,v);m>d&&(c=y,d=m)}d>i&&(l[(c-e)/o]=1,p+o<c&&u.push(p,c),c+o<h&&u.push(c,h))}for(y=0;y<a;++y)l[y]&&(r[s++]=t[e+y*o],r[s++]=t[e+y*o+1]);return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,mn)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Pn);var kn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const zn=function(t){function e(e,n){var o=t.call(this)||this;return o.setCoordinates(e,n),o}return kn(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){var i=this.flatCoordinates,r=$(t,e,i[0],i[1]);if(r<o){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,r}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return n=t,kt(o=(e=this.flatCoordinates)[0],i=e[1],o,i,n);var e,n,o,i},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return Lt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,o){for(var i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Pn);function Gn(t,e,n,o,i){return!Vt(i,(function(i){return!Nn(t,e,n,o,i[0],i[1])}))}function Nn(t,e,n,o,i,r){for(var s=0,a=t[n-o],l=t[n-o+1];e<n;e+=o){var u=t[e],c=t[e+1];l<=r?c>r&&(u-a)*(r-l)-(i-a)*(c-l)>0&&s++:c<=r&&(u-a)*(r-l)-(i-a)*(c-l)<0&&s--,a=u,l=c}return 0!==s}function Kn(t,e,n,o,i,r){if(0===n.length)return!1;if(!Nn(t,e,n[0],o,i,r))return!1;for(var s=1,a=n.length;s<a;++s)if(Nn(t,n[s-1],n[s],o,i,r))return!1;return!0}function Zn(t,e,n,o,i){var r,s,a=Kt([1/0,1/0,-1/0,-1/0],t,e,n,o);return!!ee(i,a)&&(s=a,(r=i)[0]<=s[0]&&s[2]<=r[2]&&r[1]<=s[1]&&s[3]<=r[3]||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]||function(t,e,n,o,i){for(var r,s=[t[e],t[e+1]],a=[];e+o<n;e+=o){if(a[0]=t[e+o],a[1]=t[e+o+1],r=i(s,a))return r;s[0]=a[0],s[1]=a[1]}return!1}(t,e,n,o,(function(t,e){return function(t,e,n){var o=!1,i=Dt(t,e),r=Dt(t,n);if(1===i||1===r)o=!0;else{var s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],p=n[0],d=n[1],f=(d-h)/(p-c),g=void 0,_=void 0;2&r&&!(2&i)&&(o=(g=p-(d-u)/f)>=s&&g<=l),o||!(4&r)||4&i||(o=(_=d-(p-l)*f)>=a&&_<=u),o||!(8&r)||8&i||(o=(g=p-(d-a)/f)>=s&&g<=l),o||!(16&r)||16&i||(o=(_=d-(p-s)*f)>=a&&_<=u)}return o}(i,t,e)})))}function Vn(t,e,n,o){for(;e<n-o;){for(var i=0;i<o;++i){var r=t[e+i];t[e+i]=t[n-o+i],t[n-o+i]=r}e+=o,n-=o}}function Un(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=(a-r)*(l+s),r=a,s=l}return 0===i?void 0:i>0}function Xn(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=Un(t,e,l,o);(0===s?r&&u||!r&&!u:r&&!u||!r&&u)&&Vn(t,e,l,o),e=l}return e}var Hn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bn=function(t){function e(e,n,o){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&o?(i.setFlatCoordinates(n,e),i.ends_=o):i.setCoordinates(e,n),i}return Hn(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?function(t,e){for(var n=Array.isArray(e)?e:[e],o=n.length,i=0;i<o;i++)t[t.length]=n[i]}(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){return o<jt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,o,i){for(var r=0,s=n.length;r<s;++r){var a=n[r];i=Rn(t,e,a,o,i),e=a}return i}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,o,i,r,s,a,l,u,c){for(var h=c||[NaN,NaN],p=0,d=n.length;p<d;++p){var f=n[p];u=Sn(t,e,f,o,i,r,s,a,l,u,h),e=f}return u}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.containsXY=function(t,e){return Kn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,o){for(var i=0,r=0,s=n.length;r<s;++r){var a=n[r];i+=Fn(t,e,a,o),e=a}return i}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Xn(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];r[s++]=jn(t,e,u,o,r[s]),e=u}return r.length=s,r}(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Bt(this.getExtent());this.flatInteriorPoint_=function(t,e,n,o,r,s,a){for(var l,u,c,h,p,d,f,g=r[s+1],_=[],v=0,y=n.length;v<y;++v){var m=n[v];for(h=t[m-o],d=t[m-o+1],l=e;l<m;l+=o)p=t[l],f=t[l+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(p-h)+h,_.push(c)),h=p,d=f}var C=NaN,w=-1/0;for(_.sort(i),h=_[0],l=1,u=_.length;l<u;++l){p=_[l];var x=Math.abs(p-h);x>w&&Kn(t,e,n,o,c=(h+p)/2,g)&&(C=c,w=x),h=p}return isNaN(C)&&(C=r[s]),a?(a.push(C,g,w),a):[C,g,w]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new zn(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Dn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,o=[],i=0,r=0,s=n.length;r<s;++r){var a=n[r],l=new Dn(e.slice(i,a),t);o.push(l),i=a}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=Un(t,e,l,o);if(0===s){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;e=l}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Xn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],o=[];return n.length=function(t,e,n,o,i,r,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=In(t,e,c,o,i,r,s),a.push(s),e=c}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,o),new e(n,mn,o)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,o,i){if(!function(t,e,n,o,i){return!!(Zn(t,e,n,o,i)||Nn(t,e,n,o,i[0],i[1])||Nn(t,e,n,o,i[0],i[3])||Nn(t,e,n,o,i[2],i[1])||Nn(t,e,n,o,i[2],i[3]))}(t,e,n[0],o,i))return!1;if(1===n.length)return!0;for(var r=1,s=n.length;r<s;++r)if(Gn(t,n[r-1],n[r],o,i)&&!Zn(t,n[r-1],n[r],o,i))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,o,i){for(var r=i||[],s=0,a=0,l=n.length;a<l;++a){var u=Mn(t,e,n[a],o);r[s++]=u,e=u}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(Pn);const Wn=Bn;function Yn(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=[e,n,e,i,o,i,o,n,e,n];return new Bn(r,mn,[r.length])}var qn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Qn(t,e){setTimeout((function(){t(e)}),0)}function $n(t){return!(t.sourceCenter&&t.targetCenter&&!sn(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Jn(t,e,n,o,i){var r=Math.cos(-i),s=Math.sin(-i),a=t[0]*r-t[1]*s,l=t[1]*r+t[0]*s;return[(a+=(e[0]/2-n[0])*o)*r-(l+=(n[1]-e[1]/2)*o)*(s=-s),l*r+a*s]}const to=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=c({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=ze(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.cancelAnchor_=void 0,o.center&&(o.center=Ye(o.center,n.projection_)),o.extent&&(o.extent=qe(o.extent,n.projection_)),n.applyOptions_(o),n}return qn(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,o,i=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,h=ze(t.projection,"EPSG:3857"),p=h.getExtent(),d=t.constrainOnlyCenter,f=t.extent;if(l||f||!h.isGlobal()||(d=!1,f=p),void 0!==t.resolutions){var g=t.resolutions;n=g[i],o=void 0!==g[s]?g[s]:g[g.length-1],e=t.constrainResolution?function(t,e,n,o){return function(i,s,a,l){if(void 0!==i){var u=t[0],c=t[t.length-1],h=n?cn(u,n,a,o):u;if(l)return void 0===e||e?hn(i,h,c):W(i,c,h);var p=Math.min(h,i),d=Math.floor(r(t,p,s));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}(g,u,!d&&f,c):pn(n,o,u,!d&&f,c)}else{var _=(p?Math.max(te(p),qt(p)):360*pe[de.DEGREES]/h.getMetersPerUnit())/256/Math.pow(2,0),v=_/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=_/Math.pow(a,i),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,s):_/Math.pow(a,s):v),s=i+Math.floor(Math.log(n/o)/Math.log(a)),o=n/Math.pow(a,s-i),e=t.constrainResolution?function(t,e,n,o,i,r){return function(s,a,l,u){if(void 0!==s){var c=i?cn(e,i,l,r):e,h=void 0!==n?n:0;if(u)return void 0===o||o?hn(s,c,h):W(s,h,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),d=-a*(.5-1e-9)+.5,f=Math.min(c,s),g=Math.floor(Math.log(e/f)/Math.log(t)+d),_=Math.max(p,g);return W(e/Math.pow(t,_),h,c)}}}(a,n,o,u,!d&&f,c):pn(n,o,u,!d&&f,c)}return{constraint:e,maxResolution:n,minResolution:o,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ln(t.extent,t.constrainOnlyCenter,e)}var n=ze(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,ln(o,!1,!1)}return un}(t),o=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=J(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?fn:"number"==typeof e?(n=e,o=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/o+.5)*o:void 0}):fn}return dn;var n,o,i}(t);this.constraints_={center:n,resolution:o,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),s=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-s])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=c({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),c({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=c({},o)).center=Ye(o.center,this.getProjection())),o.anchor&&((o=c({},o)).anchor=Ye(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var o=arguments[n-1];return o.center&&this.setCenterInternal(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&Qn(e,!0))}for(var i=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_,l=[],u=0;u<n;++u){var c=arguments[u],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||vn,callback:e};if(c.center&&(h.sourceCenter=r,h.targetCenter=c.center.slice(),r=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=s,h.targetResolution=this.getResolutionForZoom(c.zoom),s=h.targetResolution):c.resolution&&(h.sourceResolution=s,h.targetResolution=c.resolution,s=h.targetResolution),void 0!==c.rotation){h.sourceRotation=a;var p=tt(c.rotation-a+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=a+p,a=h.targetRotation}$n(h)?h.complete=!0:i+=h.duration,l.push(h)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var o=this.animations_[e];if(o[0].callback&&Qn(o[0].callback,!1),!t)for(var i=0,r=o.length;i<r;++i){var s=o[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var o=this.animations_[n],i=!0,r=0,s=o.length;r<s;++r){var a=o[r];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):i=!1;var c=a.easing(u);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],d=h+c*(a.targetCenter[0]-h),f=p+c*(a.targetCenter[1]-p);this.targetCenter_=[d,f]}if(a.sourceResolution&&a.targetResolution){var g=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){var _=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(g,0,_,!0);this.targetCenter_=this.calculateCenterZoom(v,a.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var y=1===c?tt(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){var m=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(m,a.anchor)}this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(i){this.animations_[n]=null,this.setHint(0,-1);var C=o[0].callback;C&&Qn(C,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,o,i,r=this.getCenterInternal();return void 0!==r&&(an(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),i=e,(o=n)[0]+=+i[0],o[1]+=+i[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();return void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?We(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(nn)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();B(n,1);var o=this.getResolution();B(void 0!==o,2);var i=this.getRotation();return B(void 0!==i,3),Yt(n,o,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(on)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(qe(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),o=te(t)/n[0],i=qt(t)/n[1];return Math.max(o,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(rn)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=Jn(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=r(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=W(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,W(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(B(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))B(!ne(t),25),n=Yn(o=qe(t,this.getProjection()));else if("Circle"===t.getType()){var o;(n=Yn(o=qe(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Bt(o))}else{var i=Be();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),s=1/0,a=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=r){var p=i[c]*n-i[c+1]*o,d=i[c]*o+i[c+1]*n;s=Math.min(s,p),a=Math.min(a,d),l=Math.max(l,p),u=Math.max(u,d)}return[s,a,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},o=n.size;o||(o=this.getViewportSizeMinusPadding_());var i,r=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,s?0:1);var c=this.getRotation(),h=Math.sin(c),p=Math.cos(c),d=Bt(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;var f=d[0]*p-d[1]*h,g=d[1]*p+d[0]*h,_=this.getConstrainedCenter([f,g],l),v=n.callback?n.callback:u;void 0!==n.duration?this.animateInternal({resolution:l,center:_,duration:n.duration,easing:n.easing},v):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),Qn(v,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Ye(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(Jn(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,o){var i,r=this.padding_;if(r&&t){var s=this.getViewportSizeMinusPadding_(-n),a=Jn(t,o,[s[0]/2+r[3],s[1]/2+r[0]],e,n);i=[t[0]-a[0],t[1]-a[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=We(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Ye(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Ye(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Ye(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,0,i,n),s=this.constraints_.center(this.targetCenter_,r,i,n,this.calculateCenterShift(this.targetCenter_,r,o,i));this.get(rn)!==o&&this.set(rn,o),this.get(on)!==r&&this.set(on,r),this.get(nn)&&sn(this.get(nn),s)||this.set(nn,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var o=void 0!==t?t:200,i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,r,s));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var u=n||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&sn(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:o,easing:_n,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var o=n&&Ye(n,this.getProjection());this.endInteractionInternal(t,e,o)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,o)},e}(L);function eo(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+e+","+n+","+o+","+(void 0===t[3]?1:t[3])+")"}(t)}(n):"null")}var no=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var o=eo(t,e,n);return o in this.cache_?this.cache_[o]:null},t.prototype.set=function(t,e,n,o){var i=eo(t,e,n);this.cache_[i]=o,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),oo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function io(t,e){no.expire()}const ro=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return oo(e,t),e.prototype.dispatchRenderEvent=function(t,e){M()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;St(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Mt(o,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i,r,s,a){var l,u=e.viewState;function c(t,e,n,o){return i.call(r,e,t?n:null,o)}var h=u.projection,p=function(t,e){if(e.canWrapX()){var n=te(e.getExtent()),o=function(t,e,n){var o=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<o[0]||t[0]>o[2])){var r=n||te(o);i=Math.floor((t[0]-o[0])/r)}return i}(t,e,n);o&&(t[0]-=o*n)}return t}(t.slice(),h),d=[[0,0]];if(h.canWrapX()&&o){var f=te(h.getExtent());d.push([-f,0],[f,0])}for(var g=e.layerStatesArray,_=g.length,v=[],y=[],m=0;m<d.length;m++)for(var C=_-1;C>=0;--C){var w=g[C],x=w.layer;if(x.hasRenderer()&&ut(w,u)&&s.call(a,x)){var E=x.getRenderer(),b=x.getSource();if(E&&b){var T=b.getWrapX()?p:t,P=c.bind(null,w.managed);y[0]=T[0]+d[m][0],y[1]=T[1]+d[m][1],l=E.forEachFeatureAtCoordinate(y,e,n,P,v)}if(l)return l}}if(0!==v.length){var O=1/v.length;return v.forEach((function(t,e){return t.distanceSq+=e*O})),v.sort((function(t,e){return t.distanceSq-e.distanceSq})),v.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){return M()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,o,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,o,a,this,i,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){M()},e.prototype.scheduleExpireIconCache=function(t){no.canExpireCache()&&t.postRenderFunctions.push(io)},e}(o);var so="ol-hidden",ao="ol-control",lo=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),new L);(new g).setSize=function(){console.warn("labelCache is deprecated.")};var uo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const co=function(t){function e(e){var o=t.call(this,e)||this;o.fontChangeListenerKey_=b(lo,n,e.redrawText.bind(e)),o.element_=document.createElement("div");var i=o.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",o.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(o.element_,r.firstChild||null),o.children_=[],o.renderedVisible_=!0,o}return uo(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var o=new yt(t,void 0,e);n.dispatchEvent(o)}},e.prototype.disposeInternal=function(){P(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(it,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var o=[],i=null,r=0,s=e.length;r<s;++r){var a=e[r];if(t.layerIndex=r,ut(a,n)&&(a.sourceState==at||a.sourceState==st)){var l=a.layer,u=l.render(t,i);u&&(u!==i&&(this.children_.push(u),i=u),"getDeclutter"in l&&o.push(l))}}for(r=o.length-1;r>=0;--r)o[r].renderDeclutter(t);!function(t,e){for(var n=t.childNodes,o=0;;++o){var i=n[o],r=e[o];if(!i&&!r)break;i!==r&&(i?r?t.insertBefore(r,i):(t.removeChild(i),--o):t.appendChild(r))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){for(var r=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],u=l.layer;if(u.hasRenderer()&&ut(l,r)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=o(u,c);if(h)return h}}}},e}(ro),ho="add",po="remove";var fo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),go="length",_o=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.element=n,i.index=o,i}return fo(e,t),e}(e);const vo=function(t){function e(e,n){var o=t.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=e||[],o.unique_)for(var r=0,s=o.array_.length;r<s;++r)o.assertUnique_(o.array_[r],r);return o.updateLength_(),o}return fo(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(go)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new _o(ho,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new _o(po,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new _o(po,o,t)),this.dispatchEvent(new _o(ho,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(go,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===t&&n!==e)throw new H(58)},e}(L);var yo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mo="layers";const Co=function(t){function e(e){var n=this,o=e||{},i=c({},o);delete i.layers;var r=o.layers;return(n=t.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(mo,n.handleLayersChanged_),r?Array.isArray(r)?r=new vo(r.slice(),{unique:!0}):B("function"==typeof r.getArray,43):r=new vo(void 0,{unique:!0}),n.setLayers(r),n}return yo(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(P),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(b(t,ho,this.handleLayersAdd_,this),b(t,po,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(P);h(this.listenerKeys_);for(var o=t.getArray(),i=0,r=o.length;i<r;i++){var s=o[i];this.listenerKeys_[I(s)]=[b(s,n,this.handleLayerChange_,this),b(s,_,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[I(e)]=[b(e,n,this.handleLayerChange_,this),b(e,_,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=I(t.element);this.listenerKeys_[e].forEach(P),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(mo)},e.prototype.setLayers=function(t){this.set(mo,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var o=this.getLayerState(),i=o.zIndex;t||void 0!==o.zIndex||(i=0);for(var r=n,s=e.length;r<s;r++){var a=e[r];a.opacity*=o.opacity,a.visible=a.visible&&o.visible,a.maxResolution=Math.min(a.maxResolution,o.maxResolution),a.minResolution=Math.max(a.minResolution,o.minResolution),a.minZoom=Math.max(a.minZoom,o.minZoom),a.maxZoom=Math.min(a.maxZoom,o.maxZoom),void 0!==o.extent&&(void 0!==a.extent?a.extent=Qt(a.extent,o.extent):a.extent=o.extent),void 0===a.zIndex&&(a.zIndex=i)}return e},e.prototype.getSourceState=function(){return at},e}(ot);var wo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const xo=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==o?o:null,i}return wo(e,t),e}(e);var Eo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const bo=function(t){function e(e,n,o,i,r){var s=t.call(this,e,n,r)||this;return s.originalEvent=o,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s}return Eo(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(xo),To={SINGLECLICK:"singleclick",CLICK:y,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Po="pointermove",Oo="pointerdown";var Ro=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const So=function(t){function e(e,n){var o=t.call(this,e)||this;o.map_=e,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=void 0===n?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=0,o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=b(i,Oo,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=b(i,Po,o.relayEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(x,o.boundHandleTouchMove_,!!Ot&&{passive:!1}),o}return Ro(e,t),e.prototype.emulateClick_=function(t){var e=new bo(To.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new bo(To.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new bo(To.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==To.POINTERUP||e.type==To.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==To.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new bo(To.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(P),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new bo(To.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var o=t[n];this.down_[n]="function"==typeof o?u:o}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(b(i,To.POINTERMOVE,this.handlePointerMove_,this),b(i,To.POINTERUP,this.handlePointerUp_,this),b(this.element_,To.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(b(this.element_.getRootNode(),To.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new bo(To.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new bo(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(P(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(x,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(P(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(P),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(g),Mo="postrender",Ao="layergroup",Io="size",jo="target",Fo="view";var Lo=1/0;const Do=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,h(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},t.prototype.enqueue=function(t){B(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=Lo&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,o=e.length,i=e[t],r=n[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<o&&n[l]<n[a]?l:a;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=r,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,o=this.priorities_,i=n[e],r=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>r))break;n[e]=n[s],o[e]=o[s],e=s}n[e]=i,o[e]=r},t.prototype.reprioritize=function(){var t,e,n,o=this.priorityFunction_,i=this.elements_,r=this.priorities_,s=0,a=i.length;for(e=0;e<a;++e)(n=o(t=i[e]))==Lo?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=n,i[s++]=t);i.length=s,r.length=s,this.heapify_()},t}();var ko=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const zo=function(t){function e(e,n){var o=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return ko(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(_,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(_,this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,o,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),0!==n.getState()||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())},e}(Do);function Go(t){return t[0]>0&&t[1]>0}function No(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var Ko=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Zo=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,o,i,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Co({layers:t.layers});return r.layergroup=s,r.target=t.target,r.view=void 0!==t.view?t.view:new to,void 0!==t.controls&&(Array.isArray(t.controls)?n=new vo(t.controls.slice()):(B("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new vo(t.interactions.slice()):(B("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new vo(t.overlays.slice()):(B("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new vo,{controls:n,interactions:o,keyboardEventTarget:e,overlays:i,values:r}}(e);return n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:bt,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.keyHandlerKeys_=null,n.controls=o.controls||new vo,n.interactions=o.interactions||new vo,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new zo(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Ao,n.handleLayerGroupChanged_),n.addChangeListener(Fo,n.handleViewChanged_),n.addChangeListener(Io,n.handleSizeChanged_),n.addChangeListener(jo,n.handleTargetChanged_),n.setProperties(o.values),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.controls.addEventListener(ho,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(po,function(t){t.element.setMap(null)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.addEventListener(ho,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(po,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(ho,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(po,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n}return Ko(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,r=void 0!==n.layerFilter?n.layerFilter:a,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,i,s,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var o=n||{},i=void 0!==o.hitTolerance?o.hitTolerance:0,r=o.layerFilter||a;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:a,i=void 0!==e.hitTolerance?e.hitTolerance:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,r,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(jo)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return We(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?Rt(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Ao)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Ye(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?Rt(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Io)},e.prototype.getView=function(){return this.get(Fo)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,o){return function(t,e,n,o,i){if(!t||!(n in t.wantedTiles))return Lo;if(!t.wantedTiles[n][e.getKey()])return Lo;var r=t.viewState.center,s=o[0]-r[0],a=o[1]-r[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}(this.frameState_,t,e,n,o)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,o=new bo(n,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===Oo||n===E||n===m){var o=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():o,r=e.target;if(this.overlayContainerStopEvent_.contains(r)||!(i===o?o.documentElement:i).contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),a=s.length-1;a>=0;a--){var l=s[a];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,o=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var r=Date.now()-t.time>8;n=r?0:8,o=r?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}!t||!this.hasListener(rt)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(rt,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)P(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(v,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(E,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(w,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,re(this.viewport_)}if(t){for(var o in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new So(this,this.moveTolerance_),To)this.mapBrowserEventHandler_.addEventListener(To[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(v,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(E,this.boundHandleBrowserEvent_,!!Ot&&{passive:!1});var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[b(i,m,this.handleBrowserEvent,this),b(i,C,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(w,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(P(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(P(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=b(t,n,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=b(t,_,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(P),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[b(t,n,this.render,this),b(t,_,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n,o=this,i=this.getSize(),r=this.getView(),s=this.frameState_,a=null;if(void 0!==i&&Go(i)&&r&&r.isDef()){var l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=r.getState();a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Yt(u.center,u.resolution,u.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{}}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!ne(this.previousExtent_)&&!Gt(a.extent,this.previousExtent_))&&(this.dispatchEvent(new xo("movestart",this,s)),this.previousExtent_=zt(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!Gt(a.extent,this.previousExtent_)&&(this.dispatchEvent(new xo("moveend",this,a)),e=a.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice())),this.dispatchEvent(new xo(Mo,this,a)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){o.postRenderTimeoutHandle_=void 0,o.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){this.set(Ao,t)},e.prototype.setSize=function(t){this.set(Io,t)},e.prototype.setTarget=function(t){this.set(jo,t)},e.prototype.setView=function(t){this.set(Fo,t)},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),o=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(o)||isNaN(i)||Go(e=[o,i])||console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(L);var Vo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Uo=function(t){function e(e){var n=t.call(this)||this,o=e.element;return!o||e.target||o.style.pointerEvents||(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return Vo(e,t),e.prototype.disposeInternal=function(){re(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&re(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)P(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==u&&this.listenerKeys.push(b(t,Mo,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(L);var Xo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ho=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===o.collapsed||o.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==o.collapsible,n.collapsible_=void 0===o.collapsible||o.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==o.className?o.className:"ol-attribution",r=void 0!==o.tipLabel?o.tipLabel:"Attributions",s=void 0!==o.expandClassName?o.expandClassName:i+"-expand",a=void 0!==o.collapseLabel?o.collapseLabel:"»",l=void 0!==o.collapseClassName?o.collapseClassName:i+"-collpase";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a,n.collapseLabel_.className=l):n.collapseLabel_=a;var u=void 0!==o.label?o.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=s):n.label_=u;var c=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=r,n.toggleButton_.appendChild(c),n.toggleButton_.addEventListener(y,n.handleClick_.bind(n),!1);var h=i+" ol-unselectable "+ao+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),p=n.element;return p.className=h,p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return Xo(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],o=!0,i=t.layerStatesArray,r=0,s=i.length;r<s;++r){var a=i[r];if(ut(a,t.viewState)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(o=o&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!s(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var o=0,i=e.length;o<i;++o){var r=document.createElement("li");r.innerHTML=e[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ie(this.collapseLabel_,this.label_):ie(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(Uo);var Bo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Wo=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=void 0!==o.className?o.className:"ol-rotate",r=void 0!==o.label?o.label:"⇧",s=void 0!==o.compassClassName?o.compassClassName:"ol-compass";n.label_=null,"string"==typeof r?(n.label_=document.createElement("span"),n.label_.className=s,n.label_.textContent=r):(n.label_=r,n.label_.classList.add(s));var a=o.tipLabel?o.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(n.label_),l.addEventListener(y,n.handleClick_.bind(n),!1);var u=i+" ol-unselectable "+ao,c=n.element;return c.className=u,c.appendChild(l),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=void 0!==o.duration?o.duration:250,n.autoHide_=void 0===o.autoHide||o.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(so),n}return Bo(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:_n}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var o="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(so);i||0!==n?i&&0!==n&&this.element.classList.remove(so):this.element.classList.add(so)}this.label_.style.transform=o}this.rotation_=n}},e}(Uo);var Yo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const qo=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),target:o.target})||this;var i=void 0!==o.className?o.className:"ol-zoom",r=void 0!==o.delta?o.delta:1,s=void 0!==o.zoomInClassName?o.zoomInClassName:i+"-in",a=void 0!==o.zoomOutClassName?o.zoomOutClassName:i+"-out",l=void 0!==o.zoomInLabel?o.zoomInLabel:"+",u=void 0!==o.zoomOutLabel?o.zoomOutLabel:"−",c=void 0!==o.zoomInTipLabel?o.zoomInTipLabel:"Zoom in",h=void 0!==o.zoomOutTipLabel?o.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(y,n.handleClick_.bind(n,r),!1);var d=document.createElement("button");d.className=a,d.setAttribute("type","button"),d.title=h,d.appendChild("string"==typeof u?document.createTextNode(u):u),d.addEventListener(y,n.handleClick_.bind(n,-r),!1);var f=i+" ol-unselectable "+ao,g=n.element;return g.className=f,g.appendChild(p),g.appendChild(d),n.duration_=void 0!==o.duration?o.duration:250,n}return Yo(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var o=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:o,duration:this.duration_,easing:_n})):e.setZoom(o)}}},e}(Uo),Qo="active";var $o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Jo(t,e,n,o){var i=t.getZoom();if(void 0!==i){var r=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==o?o:250,easing:_n})}}const ti=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return $o(e,t),e.prototype.getActive=function(){return this.get(Qo)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Qo,t)},e.prototype.setMap=function(t){this.map_=t},e}(L);var ei=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ni=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:250,n}return ei(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==To.DBLCLICK){var n=t.originalEvent,o=t.map,i=t.coordinate,r=n.shiftKey?-this.delta_:this.delta_;Jo(o.getView(),r,i,this.duration_),n.preventDefault(),e=!0}return!e},e}(ti);var oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ii(t){for(var e=t.length,n=0,o=0,i=0;i<e;i++)n+=t[i].clientX,o+=t[i].clientY;return[n/e,o/e]}const ri=function(t){function e(e){var n=this,o=e||{};return n=t.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return oi(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==To.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==To.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==To.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==To.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===To.POINTERDOWN||e===To.POINTERDRAG||e===To.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==To.POINTERUP?delete this.trackedPointers_[n]:(t.type==To.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=d(this.trackedPointers_)}},e}(ti);function si(t){var e=arguments;return function(t){for(var n=!0,o=0,i=e.length;o<i&&(n=n&&e[o](t));++o);return n}}var ai=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},li=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},ui=a,ci=function(t){var e=t.originalEvent;return 0==e.button&&!(xt&&Et&&e.ctrlKey)},hi=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},pi=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},di=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},fi=function(t){var e=t.originalEvent;return B(void 0!==e,56),"mouse"==e.pointerType},gi=function(t){var e=t.originalEvent;return B(void 0!==e,56),e.isPrimary&&0===e.button},_i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const vi=function(t){function e(e){var n=t.call(this,{stopDown:l})||this,o=e||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:si(hi,gi);return n.condition_=o.onFocusOnly?si(li,i):i,n.noKinetic_=!1,n}return _i(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,o=this.targetPointers,i=ii(o);if(o.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();e=r,n=s.getResolution(),e[0]*=n,e[1]*=n,an(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=o.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-o*Math.cos(i),s[1]-o*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:_n})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(ri);var yi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mi=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,{stopDown:l})||this).condition_=o.condition?o.condition:ai,n.lastAngle_=void 0,n.duration_=void 0!==o.duration?o.duration:250,n}return yi(e,t),e.prototype.handleDragEvent=function(t){if(fi(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==dn){var o=e.getSize(),i=t.pixel,r=Math.atan2(o[1]/2-i[1],i[0]-o[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!fi(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!fi(t)||!ci(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(ri);var Ci=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const wi=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Ci(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+n,o.top=Math.min(t[1],e[1])+n,o.width=Math.abs(e[0]-t[0])+n,o.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Wn([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(o);var xi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ei=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return xi(e,t),e}(e);const bi=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.box_=new wi(o.className||"ol-dragbox"),n.minArea_=void 0!==o.minArea?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:ci,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return xi(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var o=n[0]-e[0],i=n[1]-e[1];return o*o+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ei("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Ei(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ei("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(ri);var Ti=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Pi=function(t){function e(e){var n=this,o=e||{},i=o.condition?o.condition:pi;return(n=t.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this).duration_=void 0!==o.duration?o.duration:200,n.out_=void 0!==o.out&&o.out,n}return Ti(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var o=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(o),r=e.getResolution()/i;(n=n.clone()).scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:_n})},e}(bi);var Oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ri=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.defaultCondition_=function(t){return hi(t)&&di(t)},n.condition_=void 0!==o.condition?o.condition:n.defaultCondition_,n.duration_=void 0!==o.duration?o.duration:100,n.pixelDelta_=void 0!==o.pixelDelta?o.pixelDelta:128,n}return Oi(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==m){var n=t.originalEvent,o=n.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,s=0,a=0;40==o?a=-r:37==o?s=-r:39==o?s=r:a=r;var l=[s,a];an(l,i.getRotation()),function(t,e,n){var o=t.getCenterInternal();if(o){var i=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:yn,center:t.getConstrainedCenter(i)})}}(i,l,this.duration_),n.preventDefault(),e=!0}}return!e},e}(ti);var Si=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Mi=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.condition_=o.condition?o.condition:di,n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:100,n}return Si(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==m||t.type==C){var n=t.originalEvent,o=n.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=t.map,r=o=="+".charCodeAt(0)?this.delta_:-this.delta_;Jo(i.getView(),r,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(ti),Ai=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;var i=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,i),this.initialVelocity_=Math.sqrt(i*i+r*r)/o,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var Ii=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ji="trackpad";const Fi=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,o)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,n.duration_=void 0!==o.duration?o.duration:250,n.timeout_=void 0!==o.timeout?o.timeout:80,n.useAnchor_=void 0===o.useAnchor||o.useAnchor,n.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var i=o.condition?o.condition:ui;return n.condition_=o.onFocusOnly?si(li,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return Ii(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==E)return!0;var e,n=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==E&&(e=o.deltaY,wt&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=bt),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?ji:"wheel");var r=n.getView();if(this.mode_===ji&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-W(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Jo(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(ti);var Li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Di=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=l),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return Li(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],o=this.targetPointers[1],i=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=i-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=i;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==dn){var l=s.getViewport().getBoundingClientRect(),u=ii(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ri);var ki=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const zi=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=l),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==o.duration?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return ki(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],o=this.targetPointers[1],i=n.clientX-o.clientX,r=n.clientY-o.clientY,s=Math.sqrt(i*i+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var u=a.getViewport().getBoundingClientRect(),c=ii(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),a.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ri);var Gi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ni=function(t){function e(e){return(e=c({},e)).controls||(e.controls=function(t){var e={},n=new vo;return(void 0===e.zoom||e.zoom)&&n.push(new qo(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Wo(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Ho(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},n=new vo,o=new Ai(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new mi),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new ni({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new vi({onFocusOnly:e.onFocusOnly,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new Di),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new zi({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Ri),n.push(new Mi({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new Fi({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Pi({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return Gi(e,t),e.prototype.createRenderer=function(){return new co(this)},e}(Zo);class Ki extends Uo{constructor(t,e){const n=e||{};if(!n.element){const t=document.createElement("div");t.className="bgis-composite",n.element=t}let o;o=t instanceof Uo?[t]:t,o.forEach((t=>{t.setTarget(n.element)})),super(n),this.childControls=o}setMap(t){super.setMap(t),t&&this.childControls.forEach((e=>{e.setMap(t)}))}getChildControls(){return this.childControls}}class Zi extends Ki{constructor(t){const e=t.element?t.element:document.createElement("div");e.classList.add(t.styleClass),t.element=e,super(t.childControls,t),this.styleClass=t.styleClass}getStyleClass(){return this.styleClass}}const Vi=t=>Array.isArray(t)?t:[t];class Ui extends Ki{constructor(t,e){t.tooltipAsTextElement=!!t.tooltipAsTextElement&&t.tooltipAsTextElement,t.unicode=t.unicode||null,t.iconClassName=t.iconClassName||null,null===t.unicode&&null===t.iconClassName&&(t.unicode=59651),t.tooltip=t.tooltip||"";const n=t.element?t.element:document.createElement("div");n.className=t.containerClassName?t.containerClassName:"ol-control bgis-control",n.title=t.tooltip;const o=document.createElement("button");if(o.className="bgis-icon-button",null!==t.unicode?o.textContent=String.fromCodePoint(t.unicode):null!==t.iconClassName&&o.appendChild(Ui.getIconElementForIconClassName(t.iconClassName)),o.title=t.tooltip,t.tooltip.length>0&&o.setAttribute("aria-label",t.tooltip),n.append(o),t.tooltipAsTextElement){const e=document.createElement("div");e.className="bgis-control-button-text-container";const o=document.createElement("span");o.textContent=t.tooltip,o.className="bgis-control-button-text",e.appendChild(o),n.appendChild(e)}super(e||[],Object.assign(Object.assign({},t),{element:n})),this.unicode=t.unicode,this.iconClassName=t.iconClassName,this.button=o,this.element.addEventListener("click",(()=>this.dispatchEvent("click")),!1),t.preventDefault||this.on("click",this.handleEvent)}handleEvent(t){return!0}getButton(){return this.button}setButtonUnicode(t){this.getButton().innerHTML="",this.getButton().textContent=String.fromCodePoint(t)}setButtonIconClassName(t){this.getButton().textContent="",this.getButton().innerHTML="",this.getButton().appendChild(Ui.getIconElementForIconClassName(t))}static getIconElementForIconClassName(t){const e=document.createElement("i");return e.className="bgis-icon "+t,e}}class Xi extends e{constructor(t,e){super(t),this.isToggled=e}}class Hi extends Ui{constructor(t){super(t||{},t.containerToToggle),this._isToggled=!1,this.containerToToggle=t.containerToToggle,this.unicodeToggled=t.unicodeToggled||null,this.iconClassNameToggled=t.iconClassNameToggled||null,null===this.unicodeToggled&&null===this.iconClassNameToggled&&(this.unicodeToggled=59651)}handleEvent(t){if(t.type===y){this.isToggled=!this.isToggled,this.dispatchEvent(new Xi("toggle",this.isToggled));const t=this.getParentElement();t&&this.handleOverlayForElement(t.querySelector(".ol-overlaycontainer-stopevent")),this.handleOverlayOuter(),this.isToggled?null!==this.unicodeToggled?this.setButtonUnicode(this.unicodeToggled):null!==this.iconClassNameToggled&&this.setButtonIconClassName(this.iconClassNameToggled):null!==this.unicode?this.setButtonUnicode(this.unicode):null!==this.iconClassName&&this.setButtonIconClassName(this.iconClassName),((t,e,n=document)=>{Vi(t).forEach((t=>{const o=n.querySelector(t);o&&Vi(e).forEach((t=>null==o?void 0:o.classList.toggle(t)))}))})("."+this.containerToToggle.getStyleClass(),"show",t||document)}return!0}set isToggled(t){this._isToggled=t}get isToggled(){return this._isToggled}handleOverlayForElement(t,e="bgis-overlay-bg"){null!=this.element&&(this.isToggled?(null==t||t.classList.add("bgis-overlay-toggled-true"),((t,e,n)=>{null!=t?t.querySelector(`.${n}`)||t.appendChild(((t,e)=>{const n=document.createElement(t);return n.className=e,n})("div",n)):console.log("Enclosing element is null")})(t,0,e)):(null==t||t.classList.remove("bgis-overlay-toggled-true"),((t,e)=>{if(null!=t){const n=t.querySelectorAll(`.${e}`);null!=n&&n.length>0&&n.forEach((t=>t.parentElement.removeChild(t)))}})(t,e)))}handleOverlayOuter(){const t=this.getParentElement();if(t){const e=t.querySelectorAll(".bgis-toggled-overlayable");e&&e.length>0&&e.forEach((t=>{this.handleOverlayForElement(t)}))}}getParentElement(){let t=this.element.closest(".bgis");return t||(t=this.element.closest(".bgis-map")),t}}var Bi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wi="projection",Yi="coordinateFormat";const qi=function(t){function e(e){var n=this,o=e||{},i=document.createElement("div");i.className=void 0!==o.className?o.className:"ol-mouse-position",(n=t.call(this,{element:i,render:o.render,target:o.target})||this).on,n.once,n.un,n.addChangeListener(Wi,n.handleProjectionChanged_),o.coordinateFormat&&n.setCoordinateFormat(o.coordinateFormat),o.projection&&n.setProjection(o.projection);var r=!0,s="&#160;";return"undefinedHTML"in o?(void 0!==o.undefinedHTML&&(s=o.undefinedHTML),r=!!s):"placeholder"in o&&(!1===o.placeholder?r=!1:s=String(o.placeholder)),n.placeholder_=s,n.renderOnMouseOut_=r,n.renderedHTML_=i.innerHTML,n.mapProjection_=null,n.transform_=null,n}return Bi(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(Yi)},e.prototype.getProjection=function(){return this.get(Wi)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(b(n,Po,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(b(n,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(Yi,t)},e.prototype.setProjection=function(t){this.set(Wi,Le(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();this.transform_=n?Ne(this.mapProjection_,n):je}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var i=Be();i&&(this.transform_=Ne(this.mapProjection_,i)),this.transform_(o,o);var r=this.getCoordinateFormat();e=r?r(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(Uo),Qi=25.4/.28,$i=[1,2,5];class Ji extends e{constructor(t,e){super(t),this.originalEvent=e}}class tr extends Uo{constructor(t){const e=t||{},n=document.createElement("div");n.className="bgis-overview-image";const o=document.createElement("figure");o.innerHTML=tr.SVG_CODE,n.appendChild(o),e.element=n,super(e),this.preventDefault=e.preventDefault||!1,this.overviewContainerElement=n,this.extent=It([[101e4,579e4],[196e4,633e4]]),this.overviewContainerElement.addEventListener("click",(t=>this.dispatchEvent(new Ji("click",t))),!1),this.preventDefault||this.on("click",this.onOverviewImageClick),this.svgElement=o.firstChild,this.backgroundSVGRectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.backgroundSVGRectElement.setAttribute("class","bgis-overviewmap-svg-background"),this.backgroundSVGRectElement.setAttribute("x",String(0)),this.backgroundSVGRectElement.setAttribute("y",String(0)),this.backgroundSVGRectElement.setAttribute("rx",String(8)),this.backgroundSVGRectElement.setAttribute("ry",String(8)),this.backgroundSVGRectElement.setAttribute("width",String(tr.SVG_WIDTH)),this.backgroundSVGRectElement.setAttribute("height",String(tr.SVG_HEIGHT)),this.backgroundSVGRectElement.setAttribute("style","stroke-width:0"),this.backgroundSVGRectElement.setAttribute("fill",tr.BACKGROUND_COLOR),this.svgElement.prepend(this.backgroundSVGRectElement)}setMap(t){super.setMap(t),t&&(this.preventDefault||t.on("moveend",(t=>this.updateCrosshair(t))))}updateCrosshair(t){var e;const n=[tr.SVG_WIDTH,tr.SVG_HEIGHT],o=this.getOverviewPxFromLonLat(null===(e=t.map.getView())||void 0===e?void 0:e.getCenter());if(o[0]>n[0]?o[0]=n[0]:o[0]<0&&(o[0]=0),o[1]>n[1]?o[1]=n[1]:o[1]<0&&(o[1]=0),this.svgElement){const t=this.svgElement.getElementsByClassName("bgis-overviewmap-svg-crosshair");if(t)for(const e of Array.from(t))this.svgElement.removeChild(e);this.svgElement.appendChild(tr.getCrosshair(o[0],0,o[0],tr.SVG_HEIGHT,"bgis-overviewmap-svg-crosshair-x")),this.svgElement.appendChild(tr.getCrosshair(0,o[1],tr.SVG_WIDTH,o[1],"bgis-overviewmap-svg-crosshair-y"))}}static getCrosshair(t,e,n,o,i){const r=document.createElementNS("http://www.w3.org/2000/svg","line");return r.setAttribute("x1",String(t)),r.setAttribute("y1",String(e)),r.setAttribute("x2",String(n)),r.setAttribute("y2",String(o)),r.setAttribute("style","fill: none; stroke: black; stroke-width: 1px;"),r.setAttribute("class","bgis-overviewmap-svg-crosshair "+i),r}static calculateResolutionFromWidth(t,e,n){return Math.abs(t-e)/n}getOverviewPxFromLonLat(t){if(t){const e=[tr.SVG_WIDTH,tr.SVG_HEIGHT],n=[tr.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),tr.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[Math.round(1/n[0]*(t[0]-this.extent[0])),Math.round(1/n[1]*(this.extent[3]-t[1]))]}return[0,0]}onOverviewImageClick(t){var e,n;const o=this.overviewContainerElement.getBoundingClientRect(),i=t.originalEvent.clientX-o.left,r=t.originalEvent.clientY-o.top,s=this.getLonLatFromOverviewPx([i,r]);null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n||n.animate({center:s,duration:300})}getLonLatFromOverviewPx(t){const e=[this.overviewContainerElement.clientWidth,this.overviewContainerElement.clientHeight],n=[tr.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),tr.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[t[0]*n[0]+this.extent[0],this.extent[3]-t[1]*n[1]]}getOverviewContainerElement(){return this.overviewContainerElement}getSVGElement(){return this.svgElement}getBackgroundRectElement(){return this.backgroundSVGRectElement}}tr.BACKGROUND_COLOR="#e5ecf0",tr.SVG_HEIGHT=216,tr.SVG_WIDTH=380,tr.SVG_CODE="<svg xmlns='http://www.w3.org/2000/svg' class='bgis-overviewmap-svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 "+tr.SVG_WIDTH+" "+tr.SVG_HEIGHT+"' preserveAspectRatio='xMidYMid meet' height='100%' width='100%' color-interpolation='auto' fill='black' fill-opacity='1'  stroke='black' stroke-dasharray='none' stroke-dashoffset='0' stroke-linecap='square' stroke-linejoin='miter' stroke-miterlimit='10' stroke-opacity='1' stroke-width='1' xmlns:v='https://vecta.io/nano'><style><![CDATA[.B{clip-path:url(#A)}.C{fill-rule:evenodd}.D{stroke:none}.E{fill:#999}.F{fill:none}.G{stroke-miterlimit:1}.H{stroke-width:2.5}]]></style><defs><clipPath id='A'><path d='M0 0h380v216H0V0z'/></clipPath><path id='B' d='M356 82l-.4 5.2 4.4 1.6-3.2 2.4v6.4l-3.6.8 2.8 3.6.8 6.8-9.6 1.2-.4-2-1.6 2.4h-3.6l-1.6-3.6-4.8-1.6-8 6.4 6.4 3.2 3.2-.8 1.2 4.8 2 .8-2.8 2.8.4 3.2-3.6 3.2-2.8-.4-.8 1.6-2.4-1.6-.4 4 2.4 4.8-2.4 1.6-.8 4 2 .8-.4 2.4 2.8-.4.8 1.6-3.2 1.6 2.8 2.8-4 2 3.6 1.6-10-.8-.4 3.2-4 1.6-2.4 4.4-6.4 2.8.8-3.6 6.4-6.8-3.2-5.2 1.6-4.8-4.8-14.8 13.2-6.8v-6l2.8-4-.8-3.6-2.4-1.2-1.2-7.6 3.2.8 2-2.8-2-1.6 2.8-.8 2-4 3.2-.4 2.4 4 5.6-5.6v-2.8l5.6-1.2 2.4-3.2L352 88l1.6-3.6-2-2 2.8 1.6 1.6-2z'/><path id='C' d='M162.4 146.8l.4 2 8.4 1.2 1.6 2.8 4.4 1.6 8-2 .4-2.8 4.8-.8 2 2 10.8.8 8.4 9.6 5.6-2 2.4-4 8.4-4.8 1.6 3.2h6l.8 3.2 4.8-3.2 5.6 2 10-3.6 8 8.8-2 8.8 2.4.8-.4 6.4 2 1.2-3.6 3.2-1.2-2-1.6 2-2.4-.4-2.4 6.4-4.8.8-.4 2.4-4.8 1.6-.8 4-2.4-3.6-2 1.2-2-2.4-12.4.8-1.2-2.8h-5.2l-4-2.8-5.6 1.2-18-4.8-6.8 1.6-6.4-3.2H168l-2.4-2.8-4.8-.4v-3.2h1.6V172l9.2-1.2 1.6-2.4-5.6-4v-3.2l-4.4-3.2-.8-2.4 2-3.2h-2.8l-2.4-3.6 3.2-2z'/><path id='D' d='M264.8 20.8l5.6 1.6.4 4 4.4-.8 1.6-2.8 8.8 3.2.8 2 8 4 6.8-1.6V32l5.2 2 .4 2.4 5.6 3.2 12.8 1.2 3.6-5.6 3.6-.4 2.4 2.4 2.8-.4 1.2 4 10.4 1.6 1.6 10.8-4.8 6-.8 4.8 5.6 7.6.8 6.4 4.4 3.2-1.6 2.8-2.8-1.6 2 2L352 88l-4.4-3.6-2.4 3.2-5.6 1.2v2.8l-5.6 5.6-2.4-4-3.2.4-1.6 3.6-3.2 1.2 2 1.2-2 3.2-3.2-.8 1.2 7.6 2.4 1.2.8 3.6-2.8 4 1.2 4-5.2 5.2h-2.8l-2-6.8-2.4 2.8-1.2-2-4.8-.8-1.2-2.8-2 .4.4-4-5.2-.4-1.2-5.6-1.6 1.2-3.2-3.6-4.4.4v-1.6H284l-4.4-4-2.4.4-.4 2-3.2-.4-.8 3.2-10.4.4-2 2.4-4-2.4-3.2 1.2-2.4-4v-4.4l2.8-1.6-.4-1.6-1.6-2.4-1.6.8-8.4-4.4-2-3.2v-3.6l1.6-.8-.8-6.4 2-2.4 6.8 5.2 7.2-2L258 74h3.2l1.2 2.4.8-8.4h-2l.8-4.8-2 .4 1.6-1.6-4-4.8 2.8-1.6-10.4-5.2 1.6-7.2 3.6-2.8.4-3.6 7.2 1.2V23.2l2-2.4zm62 47.2l-7.2 5.6-2.4-1.6-.8 6 1.6 3.2 9.6.4 2-2.8 4.4 1.6-2-2.4.8-6-2-2-1.6 1.2-2.4-3.2z'/><path id='E' d='M212.4 38l9.6 6.4-2.4 2 2.4 3.2h6l6.4 2.8 2-2.8h2.4L240 46l4 3.2 2.4-2 5.6 5.2 7.2 2 1.2 1.2-2.8 1.6.4 2 3.6 2.8-1.6 1.6 2-.4-.8 4.8h2v4.4l-.8 4-1.2-2.4H258l-1.6 2.8-6 2-6.8-5.2-3.2 2.4.8 6.4-1.6.8v3.6l6.4 6 5.6.8 2 3.2-2.8 2.4 1.6 6.8-2.4-.8-2 2.4-5.2.8-.8 2.4-8.4 4.8-3.2-.4-2-2.8-6.8 2.4v-3.6l-2-2-10.4-1.2-3.6 5.6 2.8 8.4-1.6 3.2h-2.4l-8.4-4 2-6.4-1.6-2 2.8-4.4-5.2-2 1.2-2.8 3.2.8v-1.6l-6.4.4-4.4-2-.4-8.8 3.6 1.2.4-2.8-4-2-6 2.8v-2l-3.2-.4-1.2-2.4h-4.4l-3.2 3.2-5.2-5.2-.4-3.2 12-9.6 14-4 4.8-7.2-.4-8.8 2 .4 1.2-2.4 10 5.2 4.4-7.2.4-5.6-2-.8 2.4-3.6z'/><path id='F' d='M176.4 86.8l1.6 2.4 3.2.4v2l6-2.8 4 2-.4 2.8-3.6-1.2.4 8.8 11.2 2.4h-3.6l-1.2 3.2 5.2 1.6-2.8 4.4 1.6 2-2 6.4 5.2 3.2-1.6 3.2 1.6 8.8 5.2 2 5.2-2.4.8 4.4 6.8 6.4-5.2 1.2 1.2 2.8-4.4 8-5.2-3.6v-2.4l-10.4-2.8-2.8.8-1.6-2-5.2.8-.4 2.8-7.2 2-5.2-1.6-1.6-2.8-8.4-1.2v-2l-4 2-6-3.6H148l-6.4 5.6-6-1.2-2-12.8 1.6-1.6 6.8.4 1.2-2 8.4.4v-3.6l4.4-.8 2.4-4.8 2.8-.8-3.2-4.8 2-2-4.4-1.6 1.2-4.4h8.4l-1.2 1.6 2.8 2.4-2 2 .8 2 7.6 5.2 3.6-1.2-.4-5.6 2.8-3.6-.8-4-2.4-2h-5.6l4.4-9.2-6.4-8.4 4-3.6h4z'/><path id='G' d='M279.2 101.2l7.2 3.6v1.6l4.4-.4 3.2 3.6 1.6-1.2 1.2 5.6 5.2.4-.8 3.2 2.4.4 1.2 2.8 4.8.8 1.2 2 1.6-2.8 1.2.8-.4 2.8 2.8 3.2-7.2 3.6 4.8 14.8-1.6 4.8 3.2 4.8-7.6 10.8v6l2.4 5.2-6.8-4h-3.6l-9.6 2-2 1.2v2.8l-3.2 1.2-2.8-3.2-14.8.8-2.4-1.6.4-6.4-2.4-.8 2-8.8-8-8.8-10 3.6-5.6-2-4.8 3.2-.8-3.2h-6l-1.6-3.2-8.4 4.8-2.4 4-4.4 2-3.2-1.6 5.6-8.8-1.2-2.8 5.2-1.2-6.8-6.4-.8-4.4-5.2 2.4-4.8-1.6-2-8.4 1.6-4.4 5.6 1.2 1.6-3.2-2.8-8.4 3.6-5.6 10.4 1.2 2 2v3.6l6.8-2.4 2 2.8 3.2.4 16.4-10.4 3.2 2.4 3.2-1.2 4 2.4 2-2.4 10.4-.4.8-3.2 3.2.4.4-2h2z'/><path id='H' d='M151.6 145.2l6.4 2.4 3.6 4.8h2.8l-2 3.2.8 2.4 4.4 3.2v3.2l5.6 4-1.6 2.4-9.2 1.2-1.6 5.6-5.6.4-8-4-1.2-4-3.2-.4-.4-6.8-2.8.8-3.2-2.8 1.2-1.6-2-4.8 3.6-.8 7.2-7.6 5.2-.8z'/><path id='I' d='M61.2 118.8l5.6 1.6 2-2.4 6.8 3.6 5.2-1.6 1.2 1.6-2.4 2h3.2l2 6h6l4-2.8 2 .4-.8 2.4 2.4-.4 2-3.2 4 .4-1.6-2.4 2.4-2.8 6 .4 2.4-5.2 9.6.8 6.8-2.8 9.2 1.2-2-6.4 4.4-2.8v4.4l8-1.2 2.8 4.8 3.2-.8v2l4 1.2-1.6 2.4 3.2 4.8-2.8.8-2.4 4.8-4.4.8v3.6l-8.4-.4-1.2 2-6.8-.4-1.6 1.6 2.4 13.6-8 2-9.2 5.2-5.2-3.2-3.6 2-3.2-1.6-2.4 2.8-2.4-1.6-9.2 1.6.4 1.6-3.2 1.6-3.2 10h-7.2l-6-1.6 1.6-2.4-4-3.2L66 166l-4-1.2.8-5.6-2.8-.8-1.6-3.2-3.6 3.2.4 2-3.6-.4v4l-4 1.2-1.6-2.8-.4-2.4 2.8-3.6-2-2.4 1.6-1.2-1.2-2.8 4-4 .4-7.2-2.4-1.2 6.8-2 4.8-5.2 2-3.2-2-4 .8-4.4z'/><path id='J' d='M31.2 116.4l2 .4-.4 2.8h6.8l1.2 4 4.4 1.6.4 2.4-1.6.8 1.6 3.6 6-2-.8 5.2-2 1.2 2.4 2.4-.4 7.2-4 4 1.2 2.8-1.6 1.2 2 2.4-2.8 3.6 2 3.6-1.2 2-3.2-1.2-1.2-2.8-6.4-2V154l-12-2.4 1.2-4.8-3.2-2.4.4-4.8-2-2 6.4-8-.4-4-2.8-.4-1.6-2.8 7.6-2 2-4z'/><path id='K' d='M327.6 68.4l.4 2 2.8-.4 2 2-.8 6 2 2.4-4.4-1.6-2 2.8-9.6-.4-1.6-3.2.8-6 2.4 1.6 1.6-2.4 3.6-.4.4-2.8 2.4.4z'/></defs><g text-rendering='optimizeLegibility'><use xlink:href='#B' class='B C D E'/><g stroke='silver'><use xlink:href='#B' class='B F G H'/><use xlink:href='#C' class='B C D E'/><use xlink:href='#C' class='B F G H'/><use xlink:href='#D' class='B C D E'/><use xlink:href='#D' class='B F G H'/><use xlink:href='#E' class='B C D E'/><use xlink:href='#E' class='B F G H'/><use xlink:href='#F' class='B C D E'/><use xlink:href='#F' class='B F G H'/><use xlink:href='#G' class='B C D E'/><use xlink:href='#G' class='B F G H'/><use xlink:href='#H' class='B C D E'/><use xlink:href='#H' class='B F G H'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B C D E'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B F G H'/><use xlink:href='#I' class='B C D E'/><use xlink:href='#I' class='B F G H'/><use xlink:href='#J' class='B C D E'/><use xlink:href='#J' class='B F G H'/><use xlink:href='#K' class='B C D E'/><use xlink:href='#K' class='B F G H'/></g></g></svg>";class er extends Ui{constructor(t){const e=t||{};super(Object.assign({unicode:er.DEFAULT_UNICODE,tooltip:er.DEFAULT_TOOLTIP_TEXT,tooltipAsTextElement:!0},e))}}er.DEFAULT_TOOLTIP_TEXT="Ansicht teilen",er.DEFAULT_UNICODE=59692;var nr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const or=function(t){function e(e,n,o){var i=t.call(this)||this,r=o||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.transition_=void 0===r.transition?250:r.transition,i.transitionStarts_={},i}return nr(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){M()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var o=e-n+1e3/60;return o>=this.transition_?1:gn(o/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(g);var ir=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const rr=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=o,r.resolution=n,r.state=i,r}return ir(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return M()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){M()},e}(g);var sr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ar(t,e,n){var o=t;if(o.src&&Pt){var i=o.decode(),r=!0;return i.then((function(){r&&e()})).catch((function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){r=!1}}var s=[T(o,"load",e),T(o,"error",n)];return function(){s.forEach(P)}}!function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,o,0)||this;return a.src_=i,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}sr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=qt(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=ar(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=qt(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(rr);var lr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ur=function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,s)||this;return a.crossOrigin_=i,a.src_=o,a.key=o,a.image_=new Image,null!==i&&(a.image_.crossOrigin=i),a.unlisten_=null,a.tileLoadFunction_=r,a}return lr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=oe(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ar(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(or),cr=function(){function t(t,e,n,o,i,r){this.sourceProj_=t,this.targetProj_=e;var s={},a=Ke(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&te(o)==te(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?te(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?te(this.targetProj_.getExtent()):null;var l=$t(n),u=Jt(n),c=Ht(n),h=Xt(n),p=this.transformInv_(l),d=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),_=10+(r?Math.max(0,Math.ceil(q(Ut(n)/(r*r*256*256)))):0);if(this.addQuad_(l,u,c,h,p,d,f,g,_),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach((function(t,e,n){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,n,o,i,r){this.triangles_.push({source:[o,i,r],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,o,i,r,s,a,l){var u=It([i,r,s,a]),c=this.sourceWorldWidth_?te(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=te(It([t,e,n,o]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)),!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||ee(u,this.maxSourceExtent_)){var f=0;if(!(d||isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)d=!0;else if(1!=(f=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!d){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],_=this.transformInv_(g),v=void 0;v=p?(tt(i[0],h)+tt(s[0],h))/2-tt(_[0],h):(i[0]+s[0])/2-_[0];var y=(i[1]+s[1])/2-_[1];d=v*v+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],C=this.transformInv_(m),w=[(o[0]+t[0])/2,(o[1]+t[1])/2],x=this.transformInv_(w);this.addQuad_(t,e,m,w,i,r,C,x,l-1),this.addQuad_(w,m,n,o,x,C,s,a,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(E),T=[(n[0]+o[0])/2,(n[1]+o[1])/2],P=this.transformInv_(T);this.addQuad_(t,E,T,o,i,b,P,a,l-1),this.addQuad_(E,e,n,T,b,r,s,P,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&f)&&this.addTriangle_(t,n,o,i,s,a),0==(14&f)&&this.addTriangle_(t,n,e,i,s,r),f&&(0==(13&f)&&this.addTriangle_(e,o,t,r,a,i),0==(7&f)&&this.addTriangle_(e,o,n,r,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,o){var i=e.source;Nt(t,i[0]),Nt(t,i[1]),Nt(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var hr,pr={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function dr(t,e,n,o,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(o,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,o)+1,Math.max(n,i)),t.restore()}function fr(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function gr(t,e,n,o){var i=Ze(n,e,t),r=De(e,o,n),s=e.getMetersPerUnit();void 0!==s&&(r*=s);var a=t.getMetersPerUnit();void 0!==a&&(r/=a);var l=t.getExtent();if(!l||Ft(l,i)){var u=De(t,r,i)/r;isFinite(u)&&u>0&&(r/=u)}return r}var _r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const vr=function(t){function e(e,n,o,i,r,s,a,l,u,c,h,p){var d=t.call(this,r,0)||this;d.renderEdges_=void 0!==h&&h,d.contextOptions_=p,d.pixelRatio_=a,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=n,d.targetTileGrid_=i,d.wrappedTileCoord_=s||r,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var f=i.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),_=d.sourceTileGrid_.getExtent(),v=g?Qt(f,g):f;if(0===Ut(v))return d.state=4,d;var y=e.getExtent();y&&(_=_?Qt(_,y):y);var m=i.getResolution(d.wrappedTileCoord_[0]),C=function(t,e,n,o){var i=Bt(n),r=gr(t,e,i,o);return(!isFinite(r)||r<=0)&&Vt(n,(function(n){return r=gr(t,e,n,o),isFinite(r)&&r>0})),r}(e,o,v,m);if(!isFinite(C)||C<=0)return d.state=4,d;var w=void 0!==c?c:.5;if(d.triangulation_=new cr(e,o,v,_,C*w,m),0===d.triangulation_.getTriangles().length)return d.state=4,d;d.sourceZ_=n.getZForResolution(C);var x=d.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(x[1]=W(x[1],_[1],_[3]),x[3]=W(x[3],_[1],_[3])):x=Qt(x,_)),Ut(x)){for(var E=n.getTileRangeForExtentAndZ(x,d.sourceZ_),b=E.minX;b<=E.maxX;b++)for(var T=E.minY;T<=E.maxY;T++){var P=u(d.sourceZ_,b,T,a);P&&d.sourceTiles_.push(P)}0===d.sourceTiles_.length&&(d.state=4)}else d.state=4;return d}return _r(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,o){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),o="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,o,i,r,s,a,l,u,h,p){var d=oe(Math.round(n*t),Math.round(n*e));if(c(d,p),0===l.length)return d.canvas;function f(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";var g=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){var o,i;o=g,(i=t.extent)[0]<o[0]&&(o[0]=i[0]),i[2]>o[2]&&(o[2]=i[2]),i[1]<o[1]&&(o[1]=i[1]),i[3]>o[3]&&(o[3]=i[3])}));var _=te(g),v=qt(g),y=oe(Math.round(n*_/o),Math.round(n*v/o));c(y,p);var m=n/o;l.forEach((function(t,e,n){var o=t.extent[0]-g[0],i=-(t.extent[3]-g[3]),r=te(t.extent),s=qt(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,o*m,i*m,r*m,s*m)}));var C=$t(s);return a.getTriangles().forEach((function(t,e,i){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],c=s[1][0],h=s[1][1],_=s[2][0],v=s[2][1],m=f((a[0][0]-C[0])/r),w=f(-(a[0][1]-C[1])/r),x=f((a[1][0]-C[0])/r),E=f(-(a[1][1]-C[1])/r),b=f((a[2][0]-C[0])/r),T=f(-(a[2][1]-C[1])/r),P=l,O=u;l=0,u=0;var R=function(t){for(var e=t.length,n=0;n<e;n++){for(var o=n,i=Math.abs(t[n][n]),r=n+1;r<e;r++){var s=Math.abs(t[r][n]);s>i&&(i=s,o=r)}if(0===i)return null;var a=t[o];t[o]=t[n],t[n]=a;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*h[p]}return h}([[c-=P,h-=O,0,0,x-m],[_-=P,v-=O,0,0,b-m],[0,0,c,h,E-w],[0,0,_,v,T-w]]);if(R){if(d.save(),d.beginPath(),function(){if(void 0===hr){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",dr(t,4,5,4,0),dr(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;hr=fr(e,0)||fr(e,4)||fr(e,8)}return hr}()||p===pr){d.moveTo(x,E);for(var S=m-x,M=w-E,A=0;A<4;A++)d.lineTo(x+f((A+1)*S/4),E+f(A*M/3)),3!=A&&d.lineTo(x+f((A+1)*S/4),E+f((A+1)*M/3));d.lineTo(b,T)}else d.moveTo(x,E),d.lineTo(m,w),d.lineTo(b,T);d.clip(),d.transform(R[0],R[2],R[1],R[3],m,w),d.translate(g[0]-P,g[3]-O),d.scale(o/n,-o/n),d.drawImage(y.canvas,0,0),d.restore()}})),h&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,n){var o=t.target,i=(o[0][0]-C[0])/r,s=-(o[0][1]-C[1])/r,a=(o[1][0]-C[0])/r,l=-(o[1][1]-C[1])/r,u=(o[2][0]-C[0])/r,c=-(o[2][1]-C[1])/r;d.beginPath(),d.moveTo(a,l),d.lineTo(i,s),d.lineTo(u,c),d.closePath(),d.stroke()})),d.restore()),d.canvas}(o,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,o){var i=e.getState();if(0==i||1==i){t++;var r=b(e,_,(function(n){var o=e.getState();2!=o&&3!=o&&4!=o||(P(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(P),this.sourcesListenerKeys_=null},e}(or),yr=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return B(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return B(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){B(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function mr(t,e,n,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=n,o):[t,e,n]}function Cr(t,e,n){return t+"/"+e+"/"+n}function wr(t){return Cr(t[0],t[1],t[2])}var xr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Er=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xr(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=(e=this.peekFirstKey(),e.split("/").map(Number))[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(wr(e.tileCoord)),e.release())}.bind(this))}var e},e}(yr);var br=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Tr(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Pr=function(t){function e(e){var n=t.call(this)||this;return n.projection=Le(e.projection),n.attributions_=Tr(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:at,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n}return br(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return M()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Tr(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(L);var Or=[0,0,0];const Rr=function(){function t(t){var e,n,o;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,B((e=this.resolutions_,!0,n=function(t,e){return e-t}||i,e.every((function(t,o){if(0===o)return!0;var i=n(e[o-1],t);return!(i>0||0===i)}))),17),!t.origins)for(var r=0,s=this.resolutions_.length-1;r<s;++r)if(o){if(this.resolutions_[r]/this.resolutions_[r+1]!==o){o=void 0;break}}else o=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,B(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=$t(a)),B(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,B(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,B(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new ce(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var o=this.getTileRangeForExtentAndZ(a,e);n.minX=Math.max(o.minX,n.minX),n.maxX=Math.min(o.maxX,n.maxX),n.minY=Math.max(o.minY,n.minY),n.maxY=Math.min(o.maxY,n.maxY)}return n}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,n){for(var o=this.getTileRangeForExtentAndZ(t,e),i=o.minX,r=o.maxX;i<=r;++i)for(var s=o.minY,a=o.maxY;s<=a;++s)n([e,i,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,o){var i,r,s=null,a=t[0]-1;for(2===this.zoomFactor_?(i=t[1],r=t[2]):s=this.getTileCoordExtent(t,o);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?ue(i=Math.floor(i/2),i,r=Math.floor(r/2),r,n):this.getTileRangeForExtentAndZ(s,a,n)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],i=2*t[2];return ue(o,o+1,i,i+1,e)}var r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var o=t[0],i=t[1],r=t[2];if(e===o)return ue(i,r,i,r,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-o),a=Math.floor(i*s),l=Math.floor(r*s);return e<o?ue(a,a,l,l,n):ue(a,Math.floor(s*(i+1))-1,l,Math.floor(s*(r+1))-1,n)}var u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var o=this.getOrigin(t),i=this.getResolution(t),r=No(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*r[0]*i,a=o[0]+(e.maxX+1)*r[0]*i;return kt(s,o[1]+e.minY*r[1]*i,a,o[1]+(e.maxY+1)*r[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var o=Or;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,o);var i=o[1],r=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,o),ue(i,o[1],r,o[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=No(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*n,e[1]-(t[2]+.5)*o[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=No(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*i[0]*o,s=n[1]-(t[2]+1)*i[1]*o;return kt(r,s,r+i[0]*o,s+i[1]*o,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,o,i){var r=this.getZForResolution(n),s=n/this.getResolution(r),a=this.getOrigin(r),l=No(this.getTileSize(r),this.tmpSize_),u=o?.5:0,c=o?.5:0,h=Math.floor((t-a[0])/n+u),p=Math.floor((a[1]-e)/n+c),d=s*h/l[0],f=s*p/l[1];return o?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),mr(r,d,f,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,o,i){var r=this.getOrigin(n),s=this.getResolution(n),a=No(this.getTileSize(n),this.tmpSize_),l=o?.5:0,u=o?.5:0,c=Math.floor((t-r[0])/s+l),h=Math.floor((r[1]-e)/s+u),p=c/a[0],d=h/a[1];return o?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),mr(n,p,d,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return W(r(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),o=this.minZoom;o<e;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},t}();function Sr(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,o){return function(t,e,n,o){var i=Mr(t,undefined,n);return new Rr({extent:t,origin:Wt(t,"top-left"),resolutions:i,tileSize:n})}(Ar(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function Mr(t,e,n,o){for(var i=void 0!==e?e:42,r=qt(t),s=te(t),a=No(void 0!==n?n:256),l=o>0?o:Math.max(s/a[0],r/a[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function Ar(t){var e=(t=Le(t)).getExtent();if(!e){var n=180*pe[de.DEGREES]/t.getMetersPerUnit();e=kt(-n,-n,n,n)}return e}var Ir=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jr=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&No(o.getTileSize(o.getMinZoom()),[256,256]),n.tileCache=new Er(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return Ir(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,o){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var r,s,a,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)s=Cr(e,u,c),a=!1,i.containsKey(s)&&(a=2===(r=i.get(s)).getState())&&(a=!1!==o(r)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,o,i){return M()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Sr(t)},e.prototype.getTileCacheForProjection=function(t){return B(Ge(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var o,i,r,s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),l=No(s.getTileSize(t),this.tmpSize);return 1==a?l:(o=l,i=a,void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=o[0]*i+.5|0,r[1]=o[1]*i+.5|0,r)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var o=e[0],i=t.getTileCoordCenter(e),r=Ar(n);if(Ft(r,i))return e;var s=te(r),a=Math.ceil((r[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,o)}(o,t,n)),function(t,e){var n=t[0],o=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var r=e.getFullTileRange(n);return!r||r.containsXY(o,i)}(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,o){},e}(Pr),Fr=function(t){function e(e,n){var o=t.call(this,e)||this;return o.tile=n,o}return Ir(e,t),e}(e);const Lr=jr;function Dr(t,e){var n=/\{z\}/g,o=/\{x\}/g,i=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(o,s[1].toString()).replace(i,s[2].toString()).replace(r,(function(){var t=s[0],n=e.getFullTileRange(t);return B(n,55),(n.getHeight()-s[2]-1).toString()})):void 0}}var kr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const zr=function(t){function e(n){var o=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return o.generateTileUrlFunction_=o.tileUrlFunction===e.prototype.tileUrlFunction,o.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(o.tileUrlFunction=n.tileUrlFunction),o.urls=null,n.urls?o.setUrls(n.urls):n.url&&o.setUrl(n.url),o.tileLoadingKeys_={},o}return kr(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,o=I(n),i=n.getState();1==i?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=3==i?"tileloaderror":2==i?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Fr(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var o=n[1].charCodeAt(0),i=n[2].charCodeAt(0),r=void 0;for(r=o;r<=i;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=Dr(t[i],e);return function(t){return 1===t.length?t[0]:function(e,n,o){if(e){var i=tt(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[i](e,n,o)}}}(o)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var o=Cr(t,e,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(Lr);var Gr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Nr(t,e){t.getImage().src=e}const Kr=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Nr,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:ur,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.contextOptions_=!1===e.imageSmoothing?pr:void 0,n.renderReprojectionEdges_=!1,n}return Gr(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[o];i.expireCache(i==n?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Ge(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Ge(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Ge(e,t)){var n=I(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Sr(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Ge(e,t))return this.tileCache;var n=I(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Er(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,o,i,r){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),l=a?this.tileUrlFunction(a,o,i):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(_,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,o,i){var r=this.getProjection();if(r&&i&&!Ge(r,i)){var s=this.getTileCacheForProjection(i),a=[t,e,n],l=void 0,u=wr(a);s.containsKey(u)&&(l=s.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(r),p=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(a,i),f=new vr(r,h,i,p,a,d,this.getTilePixelRatio(o),this.getGutter(),function(t,e,n,o){return this.getTileInternal(t,e,n,o,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return f.key=c,l?(f.interimTile=l,f.refreshInterimChain(),s.replace(u,f)):s.set(u,f),f}return this.getTileInternal(t,e,n,o,r||i)},e.prototype.getTileInternal=function(t,e,n,o,i){var r=null,s=Cr(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var l=r;r=this.createTile_(t,e,n,o,i,a),0==l.getState()?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,n,o,i,a),this.tileCache.set(s,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Le(t);if(n){var o=I(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},e}(zr);var Zr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vr=function(t){function e(e){var n=e||{},o=void 0!==n.projection?n.projection:"EPSG:3857",i=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Le("EPSG:3857").getExtent(),o={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Mr(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Rr(o)}({extent:Ar(o),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:o,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return Zr(e,t),e}(Kr),Ur={geolandbasemap:"https://maps{1-4}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",bmapgrau:"https://maps{1-4}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png",bmaporthofoto30cm:"https://maps{1-4}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg",bmapgelaende:"https://maps{1-4}.wien.gv.at/basemap/bmapgelaende/grau/google3857/{z}/{y}/{x}.jpeg",bmapoberflaeche:"https://maps{1-4}.wien.gv.at/basemap/bmapoberflaeche/grau/google3857/{z}/{y}/{x}.jpeg",bmapoverlay:"https://maps{1-4}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png"},Xr=document.getElementById("textarea-output"),Hr=new class extends Ui{constructor(t){super(t)}handleEvent(){return Xr.value="CustomButton1 clicked\n"+Xr.value,!0}}({iconClassName:"bgis-icon-tornado",tooltip:"CustomButton1 Tooltip"}),Br=new class extends Ui{constructor(){super({unicode:59717,tooltip:"CustomButton2 Tooltip",tooltipAsTextElement:!0})}handleEvent(){return Xr.value="CustomButton2 clicked\n"+Xr.value,!0}};return new Ni({target:"bgis-map",layers:[new en({source:new class extends Vr{constructor(t){const e=(null==t?void 0:t.variant)||"geolandbasemap";super({url:Ur[e],attributions:'Grundkarte: <a href="https://basemap.at/">basemap.at</a>',crossOrigin:"Anonymous"})}}})],controls:[new class extends Zi{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-footer",childControls:t}))}}([new class extends Uo{constructor(t){const e=t||{},n=e.className?e.className:"bgis-scaleline";super({element:document.createElement("div"),target:e.target}),this.viewState=null,this._minWidth=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible=!1,this.renderedWidth=void 0,this.renderedSVG=void 0,this.dpi=e.dpi||void 0,this.element.className=n}render(t){const e=t.frameState;this.viewState=e?e.viewState:null,this.updateElement()}updateElement(){const t=this.viewState;if(!t)return void(this.renderedVisible&&(this.element.style.display="none",this.renderedVisible=!1));const e=t.center,n=t.projection,o=de.METERS;let i=De(n,t.resolution,e,o);const r=this._minWidth*(this.dpi||Qi)/Qi,s=r*i;let a="";s<.001?(a="μm",i*=1e6):s<1?(a="mm",i*=1e3):s<1e3?a="m":(a="km",i/=1e3);let l,u,c,h=3*Math.floor(Math.log(r*i)/Math.log(10));for(;;){c=Math.floor(h/3);const t=Math.pow(10,c);if(l=$i[(h%3+3)%3]*t,u=Math.round(l/i),isNaN(u))return this.element.style.display="none",void(this.renderedVisible=!1);if(u>=r)break;++h}let p=null;l&&c>=0&&(p=this.getGeneratedSVG(l.toFixed(c<0?-c:0)+" "+a,u)),p&&this.renderedSVG!=p&&(this.element.innerHTML="",this.element.appendChild(p),this.renderedSVG=p),this.renderedWidth!=u&&(this.element.style.width=u+"px",p&&p.setAttribute("width",String(u)),this.renderedWidth=u),this.renderedVisible||(this.element.style.display="",this.renderedVisible=!0)}getGeneratedSVG(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id","bgis-scaleline-svg"),n.setAttribute("viewBox","0 0 "+e+" 18"),n.setAttribute("width",String(e)),n.setAttribute("height","100%");const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("id","bgis-scaleline-svg-background"),o.setAttribute("x",String(0)),o.setAttribute("y",String(0)),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","#e5ecf0"),o.setAttribute("fill-opacity",".5"),o.setAttribute("stroke","black"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","0 "+e+" "+(e+36)),n.appendChild(o);const i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.textContent=t,i.setAttribute("x",String(e/2)),i.setAttribute("y",String(12)),i.setAttribute("text-anchor","middle"),i.setAttribute("font-size","1em"),i.setAttribute("style",'font-size: 0.75rem; font-family: "Source Sans Pro", sans-serif'),i.setAttribute("font-family",'"Source Sans Pro", sans-serif'),i.setAttribute("fill","black"),n.appendChild(i),n}setMinWidth(t){this._minWidth=t}getMinWidth(){return this._minWidth}},new class extends qi{constructor(t){const e=t||{};e.projection=e.projection?e.projection:"EPSG:4326",e.coordinateFormat=e.coordinateFormat?e.coordinateFormat:t=>t?function(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}(t,"{x}°N/{y}°E",4):"",e.undefinedHTML=e.undefinedHTML?e.undefinedHTML:"&nbsp;-&nbsp;°N/&nbsp;-&nbsp;°E",e.className=e.className?e.className:"ol-control ol-mouse-position bgis-mouseposition",super(e)}},new class extends Ho{constructor(t){super(t||{collapsed:!1}),this.element.className+=" bgis-copyright"}}]),new class extends Zi{constructor(t){let e=null;if(t.verticalControls&&t.verticalControls.length>0){const n=new Zi({styleClass:"bgis-bottom-right-vertical",childControls:t.verticalControls});e=new Hi({containerToToggle:n,containerClassName:"ol-control bgis-control bgis-bottom-right-overlay",unicode:59655,unicodeToggled:59684,tooltip:"mehr..."}),t.horizontalControls.push(e)}const n=t||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-bottom-right-horizontal",childControls:t.horizontalControls})),this.toggleButton=e,null!=this.toggleButton&&this.toggleButton.addEventListener("toggle",(t=>(this.dispatchEvent(t),!0)))}getToggleButton(){return this.toggleButton}}({horizontalControls:[Hr],verticalControls:[Br]})],view:new to({center:Bt([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),t})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZ2lzLWNvcmUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2JnaXMtY29yZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3RFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0Rpc3Bvc2FibGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2FycmF5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL29iai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL1RhcmdldC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC91dGlsLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3QuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1Byb3BlcnR5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Bc3NlcnRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvYXNzZXJ0cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbWF0aC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1N0YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9MYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVGlsZVByb3BlcnR5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9FdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaGFzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9Db3JuZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZG9tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Vbml0cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Qcm9qZWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2czODU3LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2c0MzI2LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3Byb2plY3Rpb25zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3RyYW5zZm9ybXMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NwaGVyZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVN0YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3UHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Nvb3JkaW5hdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NlbnRlcmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Jlc29sdXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yb3RhdGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Vhc2luZy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeUxheW91dC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2Nsb3Nlc3QuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9kZWZsYXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc2ltcGxpZnkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbmZsYXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvYXJlYS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9MaW5lYXJSaW5nLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2NvbnRhaW5zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NlZ21lbnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvcmV2ZXJzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L29yaWVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2x5Z29uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVmlldy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3SGludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbG9yLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9NYXAuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Nzcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvQ29tcG9zaXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Db2xsZWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Hcm91cC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVF1ZXVlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zaXplLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9QbHVnZ2FibGVNYXAuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvQ29udHJvbC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Sb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9jb25kaXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdQYW4uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9Cb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdCb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0tleUNvZGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvS2luZXRpYy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL0NvbXBvc2l0ZUNvbnRyb2wudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvQ29udGFpbmVyLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL3V0aWwvZG9tLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvYmFzZS9CdXR0b24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL1RvZ2dsZUJ1dHRvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvU2NhbGVMaW5lLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvT3ZlcnZpZXcudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9TaGFyZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VCYXNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ovVHJpYW5ndWxhdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ovVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3RydWN0cy9MUlVDYWNoZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWNvb3JkLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVncmlkL1RpbGVHcmlkLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGV1cmxmdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1VybFRpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUltYWdlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvWFlaLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL3NvdXJjZS9CYXNlbWFwU291cmNlLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NpdGUvZXhhbXBsZXMvZGF0YS9jdXN0b20tYnV0dG9ucy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Gb290ZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvQXR0cmlidXRpb24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvQm90dG9tUmlnaHQudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIkJhc2VFdmVudCIsInR5cGUiLCJ0aGlzIiwicHJvcGFnYXRpb25TdG9wcGVkIiwiZGVmYXVsdFByZXZlbnRlZCIsInRhcmdldCIsInByb3RvdHlwZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiRGlzcG9zYWJsZSIsImRpc3Bvc2VkIiwiZGlzcG9zZSIsImRpc3Bvc2VJbnRlcm5hbCIsIm51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24iLCJhIiwiYiIsImxpbmVhckZpbmROZWFyZXN0IiwiYXJyIiwiZGlyZWN0aW9uIiwibiIsImxlbmd0aCIsImkiLCJlcXVhbHMiLCJhcnIxIiwiYXJyMiIsImxlbjEiLCJUUlVFIiwiVk9JRCIsImFzc2lnbiIsInZhcl9zb3VyY2VzIiwiVHlwZUVycm9yIiwib3V0cHV0IiwiaWkiLCJhcmd1bWVudHMiLCJzb3VyY2UiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImNsZWFyIiwib2JqZWN0IiwicHJvcGVydHkiLCJleHRlbmRTdGF0aWNzIiwiZ2V0VmFsdWVzIiwidmFsdWVzIiwicHVzaCIsIl9fZXh0ZW5kcyIsImQiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwicCIsImNhbGwiLCJTdHJpbmciLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiX3N1cGVyIiwiVGFyZ2V0Iiwib3B0X3RhcmdldCIsIl90aGlzIiwiZXZlbnRUYXJnZXRfIiwicGVuZGluZ1JlbW92YWxzXyIsImRpc3BhdGNoaW5nXyIsImxpc3RlbmVyc18iLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiaW5kZXhPZiIsImRpc3BhdGNoRXZlbnQiLCJldmVudCIsImV2dCIsInByb3BhZ2F0ZSIsImRpc3BhdGNoaW5nIiwicGVuZGluZ1JlbW92YWxzIiwiaGFuZGxlRXZlbnQiLCJwciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRMaXN0ZW5lcnMiLCJ1bmRlZmluZWQiLCJoYXNMaXN0ZW5lciIsIm9wdF90eXBlIiwia2V5cyIsImluZGV4Iiwic3BsaWNlIiwibGlzdGVuIiwib3B0X3RoaXMiLCJvcHRfb25jZSIsImJpbmQiLCJvcmlnaW5hbExpc3RlbmVyXzEiLCJhcHBseSIsImV2ZW50c0tleSIsImxpc3Rlbk9uY2UiLCJ1bmxpc3RlbkJ5S2V5IiwiT2JzZXJ2YWJsZSIsIm9uIiwib25JbnRlcm5hbCIsIm9uY2UiLCJvbmNlSW50ZXJuYWwiLCJ1biIsInVuSW50ZXJuYWwiLCJyZXZpc2lvbl8iLCJjaGFuZ2VkIiwiZ2V0UmV2aXNpb24iLCJpc0FycmF5IiwibGVuIiwib2xfa2V5IiwidW5CeUtleSIsIkVycm9yIiwidWlkQ291bnRlcl8iLCJnZXRVaWQiLCJvYmoiLCJvbF91aWQiLCJPYmplY3RFdmVudCIsIm9sZFZhbHVlIiwiQmFzZU9iamVjdCIsIm9wdF92YWx1ZXMiLCJ2YWx1ZXNfIiwic2V0UHJvcGVydGllcyIsImdldCIsImdldEtleXMiLCJnZXRQcm9wZXJ0aWVzIiwiaGFzUHJvcGVydGllcyIsIm5vdGlmeSIsImV2ZW50VHlwZSIsIk9iamVjdEV2ZW50VHlwZSIsImFkZENoYW5nZUxpc3RlbmVyIiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJzZXQiLCJvcHRfc2lsZW50IiwiYXBwbHlQcm9wZXJ0aWVzIiwidW5zZXQiLCJBc3NlcnRpb25FcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3BsaXQiLCJuYW1lIiwiYXNzZXJ0aW9uIiwiZXJyb3JDb2RlIiwibWluIiwibWF4IiwiTWF0aCIsImNvc2giLCJ4IiwieSIsImV4cCIsImxvZzIiLCJsb2ciLCJMT0cyRSIsInNxdWFyZWRTZWdtZW50RGlzdGFuY2UiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImR4IiwiZHkiLCJ0IiwiYW5nbGVJbkRlZ3JlZXMiLCJQSSIsInIiLCJsZXJwIiwiQmFzZUxheWVyIiwib3B0aW9ucyIsInByb3BlcnRpZXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsInpJbmRleCIsIm1heFJlc29sdXRpb24iLCJJbmZpbml0eSIsIm1pblJlc29sdXRpb24iLCJtaW5ab29tIiwibWF4Wm9vbSIsImNsYXNzTmFtZV8iLCJjbGFzc05hbWUiLCJzdGF0ZV8iLCJnZXRDbGFzc05hbWUiLCJnZXRMYXllclN0YXRlIiwib3B0X21hbmFnZWQiLCJzdGF0ZSIsImxheWVyIiwibWFuYWdlZCIsImdldFpJbmRleCIsInJvdW5kIiwiZ2V0T3BhY2l0eSIsInNvdXJjZVN0YXRlIiwiZ2V0U291cmNlU3RhdGUiLCJnZXRWaXNpYmxlIiwiZXh0ZW50IiwiZ2V0RXh0ZW50IiwiZ2V0TWF4UmVzb2x1dGlvbiIsImdldE1pblJlc29sdXRpb24iLCJnZXRNaW5ab29tIiwiZ2V0TWF4Wm9vbSIsImdldExheWVyc0FycmF5Iiwib3B0X2FycmF5IiwiZ2V0TGF5ZXJTdGF0ZXNBcnJheSIsIm9wdF9zdGF0ZXMiLCJzZXRFeHRlbnQiLCJzZXRNYXhSZXNvbHV0aW9uIiwic2V0TWluUmVzb2x1dGlvbiIsInNldE1heFpvb20iLCJzZXRNaW5ab29tIiwic2V0T3BhY2l0eSIsInNldFZpc2libGUiLCJzZXRaSW5kZXgiLCJ6aW5kZXgiLCJpblZpZXciLCJsYXllclN0YXRlIiwidmlld1N0YXRlIiwicmVzb2x1dGlvbiIsInpvb20iLCJMYXllciIsImJhc2VPcHRpb25zIiwibWFwUHJlY29tcG9zZUtleV8iLCJtYXBSZW5kZXJLZXlfIiwic291cmNlQ2hhbmdlS2V5XyIsInJlbmRlcmVyXyIsInJlbmRlciIsIm1hcCIsInNldE1hcCIsImhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyIsInNldFNvdXJjZSIsImFycmF5Iiwic3RhdGVzIiwiZ2V0U291cmNlIiwiZ2V0U3RhdGUiLCJoYW5kbGVTb3VyY2VDaGFuZ2VfIiwiZ2V0RmVhdHVyZXMiLCJwaXhlbCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZnJhbWVTdGF0ZSIsImxheWVyUmVuZGVyZXIiLCJnZXRSZW5kZXJlciIsInByZXBhcmVGcmFtZSIsInJlbmRlckZyYW1lIiwibGF5ZXJTdGF0ZXNBcnJheSIsInNvbWUiLCJhcnJheUxheWVyU3RhdGUiLCJjcmVhdGVSZW5kZXJlciIsImhhc1JlbmRlcmVyIiwiQmFzZSIsIkJhc2VUaWxlTGF5ZXIiLCJvcHRfb3B0aW9ucyIsInByZWxvYWQiLCJ1c2VJbnRlcmltVGlsZXNPbkVycm9yIiwic2V0UHJlbG9hZCIsInNldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJnZXRQcmVsb2FkIiwiVGlsZVByb3BlcnR5IiwiZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciIsIkxheWVyUmVuZGVyZXIiLCJib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyIsImhhbmRsZUltYWdlQ2hhbmdlXyIsImxheWVyXyIsImRlY2x1dHRlckV4ZWN1dG9yR3JvdXAiLCJsb2FkZWRUaWxlQ2FsbGJhY2siLCJ0aWxlcyIsInRpbGUiLCJ0aWxlQ29vcmQiLCJ0b1N0cmluZyIsImNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIiLCJwcm9qZWN0aW9uIiwidGlsZVJhbmdlIiwiY2FsbGJhY2siLCJmb3JFYWNoTG9hZGVkVGlsZSIsImZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlIiwiY29vcmRpbmF0ZSIsImhpdFRvbGVyYW5jZSIsIm1hdGNoZXMiLCJnZXREYXRhQXRQaXhlbCIsImdldExheWVyIiwiaGFuZGxlRm9udHNDaGFuZ2VkIiwicmVuZGVySWZSZWFkeUFuZFZpc2libGUiLCJsb2FkSW1hZ2UiLCJpbWFnZSIsImltYWdlU3RhdGUiLCJsb2FkIiwiUmVuZGVyRXZlbnQiLCJvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtIiwib3B0X2ZyYW1lU3RhdGUiLCJvcHRfY29udGV4dCIsImludmVyc2VQaXhlbFRyYW5zZm9ybSIsImNvbnRleHQiLCJ0cmFuc2Zvcm1TdHJpbmdEaXYiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiRklSRUZPWCIsIldFQktJVCIsIkRFVklDRV9QSVhFTF9SQVRJTyIsImRldmljZVBpeGVsUmF0aW8iLCJXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyIsIldvcmtlckdsb2JhbFNjb3BlIiwiT2Zmc2NyZWVuQ2FudmFzIiwiSU1BR0VfREVDT0RFIiwiSW1hZ2UiLCJkZWNvZGUiLCJQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyIsInBhc3NpdmUiLCJ3aW5kb3ciLCJlcnJvciIsInRyYW5zZm9ybSIsImNvbXBvc2UiLCJkeDEiLCJkeTEiLCJzeCIsInN5IiwiYW5nbGUiLCJkeDIiLCJkeTIiLCJzaW4iLCJjb3MiLCJtYWtlSW52ZXJzZSIsIm1hdCIsImRldCIsImMiLCJlIiwiZiIsImJvdW5kaW5nRXh0ZW50IiwiY29vcmRpbmF0ZXMiLCJleHRlbmRDb29yZGluYXRlIiwiY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIiwiY29udGFpbnNDb29yZGluYXRlIiwiY29udGFpbnNYWSIsImNvb3JkaW5hdGVSZWxhdGlvbnNoaXAiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwicmVsYXRpb25zaGlwIiwiY3JlYXRlT3JVcGRhdGUiLCJvcHRfZXh0ZW50IiwiY3JlYXRlT3JVcGRhdGVFbXB0eSIsImV4dGVudDEiLCJleHRlbnQyIiwiZXh0ZW5kRmxhdENvb3JkaW5hdGVzIiwiZmxhdENvb3JkaW5hdGVzIiwib2Zmc2V0IiwiZW5kIiwic3RyaWRlIiwiZXh0ZW5kWFkiLCJmb3JFYWNoQ29ybmVyIiwidmFsIiwiZ2V0Qm90dG9tTGVmdCIsImdldEJvdHRvbVJpZ2h0IiwiZ2V0VG9wUmlnaHQiLCJnZXRUb3BMZWZ0IiwiZ2V0QXJlYSIsImFyZWEiLCJnZXRIZWlnaHQiLCJnZXRDZW50ZXIiLCJnZXRDb3JuZXIiLCJjb3JuZXIiLCJDb3JuZXIiLCJnZXRGb3JWaWV3QW5kU2l6ZSIsImNlbnRlciIsInJvdGF0aW9uIiwic2l6ZSIsImNvc1JvdGF0aW9uIiwic2luUm90YXRpb24iLCJ4Q29zIiwieFNpbiIsInlDb3MiLCJ5U2luIiwieDAiLCJ4MyIsInkwIiwieTMiLCJnZXRJbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3RzIiwiY3JlYXRlQ2FudmFzQ29udGV4dDJEIiwib3B0X3dpZHRoIiwib3B0X2hlaWdodCIsIm9wdF9jYW52YXNQb29sIiwib3B0X0NvbnRleHQyRFNldHRpbmdzIiwiY2FudmFzIiwic2hpZnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImhlaWdodCIsImdldENvbnRleHQiLCJyZXBsYWNlTm9kZSIsIm5ld05vZGUiLCJvbGROb2RlIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsInJlbW92ZU5vZGUiLCJub2RlIiwicmVtb3ZlQ2hpbGQiLCJDYW52YXNMYXllclJlbmRlcmVyIiwiY29udGFpbmVyIiwicmVuZGVyZWRSZXNvbHV0aW9uIiwidGVtcFRyYW5zZm9ybSIsInBpeGVsVHJhbnNmb3JtIiwiY29udGFpbmVyUmV1c2VkIiwidXNlQ29udGFpbmVyIiwibGF5ZXJDbGFzc05hbWUiLCJzdHlsZSIsImZpcnN0RWxlbWVudENoaWxkIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJwb3NpdGlvbiIsImFwcGVuZENoaWxkIiwibGVmdCIsInRyYW5zZm9ybU9yaWdpbiIsImNsaXBVbnJvdGF0ZWQiLCJ0b3BMZWZ0IiwidG9wUmlnaHQiLCJib3R0b21SaWdodCIsImJvdHRvbUxlZnQiLCJjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSIsImludmVydGVkIiwic2F2ZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsaXAiLCJkaXNwYXRjaFJlbmRlckV2ZW50XyIsImV2ZW50XzEiLCJwcmVSZW5kZXIiLCJwb3N0UmVuZGVyIiwiZ2V0UmVuZGVyVHJhbnNmb3JtIiwicGl4ZWxSYXRpbyIsIm9mZnNldFgiLCJkYXRhIiwicmVuZGVyUGl4ZWwiLCJzbGljZSIsImxheWVyRXh0ZW50IiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0iLCJuZXdDYW52YXMiLCJuZXdDb250ZXh0IiwiY2xlYXJSZWN0IiwiZHJhd0ltYWdlIiwiZ2V0SW1hZ2VEYXRhIiwiZXJyIiwiVWludDhBcnJheSIsIlRpbGVSYW5nZSIsImNvbnRhaW5zIiwiY29udGFpbnNUaWxlUmFuZ2UiLCJleHRlbmQiLCJnZXRTaXplIiwiZ2V0V2lkdGgiLCJVbml0cyIsIkRFR1JFRVMiLCJGRUVUIiwiTUVURVJTIiwiUElYRUxTIiwiVElMRV9QSVhFTFMiLCJVU0ZFRVQiLCJNRVRFUlNfUEVSX1VOSVQiLCJQcm9qZWN0aW9uIiwiY29kZV8iLCJ1bml0c18iLCJleHRlbnRfIiwid29ybGRFeHRlbnRfIiwid29ybGRFeHRlbnQiLCJheGlzT3JpZW50YXRpb25fIiwiYXhpc09yaWVudGF0aW9uIiwiZ2xvYmFsXyIsImdsb2JhbCIsImNhbldyYXBYXyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmNfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uIiwiZGVmYXVsdFRpbGVHcmlkXyIsIm1ldGVyc1BlclVuaXRfIiwibWV0ZXJzUGVyVW5pdCIsImNhbldyYXBYIiwiZ2V0Q29kZSIsImdldFVuaXRzIiwiZ2V0TWV0ZXJzUGVyVW5pdCIsImdldFdvcmxkRXh0ZW50IiwiZ2V0QXhpc09yaWVudGF0aW9uIiwiaXNHbG9iYWwiLCJzZXRHbG9iYWwiLCJnZXREZWZhdWx0VGlsZUdyaWQiLCJzZXREZWZhdWx0VGlsZUdyaWQiLCJ0aWxlR3JpZCIsInNldFdvcmxkRXh0ZW50Iiwic2V0R2V0UG9pbnRSZXNvbHV0aW9uIiwiZnVuYyIsImdldFBvaW50UmVzb2x1dGlvbkZ1bmMiLCJSQURJVVMiLCJIQUxGX1NJWkUiLCJFWFRFTlQiLCJXT1JMRF9FWFRFTlQiLCJNQVhfU0FGRV9ZIiwidGFuIiwiRVBTRzM4NTdQcm9qZWN0aW9uIiwidW5pdHMiLCJwb2ludCIsIlBST0pFQ1RJT05TIiwiRVBTRzQzMjZQcm9qZWN0aW9uIiwib3B0X2F4aXNPcmllbnRhdGlvbiIsImNhY2hlIiwidHJhbnNmb3JtcyIsImRlc3RpbmF0aW9uIiwidHJhbnNmb3JtRm4iLCJzb3VyY2VDb2RlIiwiZGVzdGluYXRpb25Db2RlIiwiZ2V0RGlzdGFuY2UiLCJjMSIsImMyIiwib3B0X3JhZGl1cyIsInJhZGl1cyIsImxhdDEiLCJsYXQyIiwiZGVsdGFMYXRCeTIiLCJkZWx0YUxvbkJ5MiIsImF0YW4yIiwic3FydCIsImNsb25lVHJhbnNmb3JtIiwiaW5wdXQiLCJvcHRfb3V0cHV0Iiwib3B0X2RpbWVuc2lvbiIsImlkZW50aXR5VHJhbnNmb3JtIiwiYWRkUHJvamVjdGlvbiIsImFkZCIsInByb2plY3Rpb25MaWtlIiwicmVwbGFjZSIsIm9wdF91bml0cyIsInBvaW50UmVzb2x1dGlvbiIsImdldHRlciIsInRvRVBTRzQzMjZfMSIsImdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyIsInZlcnRpY2VzIiwiYWRkRXF1aXZhbGVudFByb2plY3Rpb25zIiwicHJvamVjdGlvbnMiLCJmb3JFYWNoIiwiYWRkUHJvamVjdGlvbnMiLCJjcmVhdGVQcm9qZWN0aW9uIiwiZGVmYXVsdENvZGUiLCJlcXVpdmFsZW50IiwicHJvamVjdGlvbjEiLCJwcm9qZWN0aW9uMiIsImVxdWFsVW5pdHMiLCJzb3VyY2VQcm9qZWN0aW9uIiwiZGVzdGluYXRpb25Qcm9qZWN0aW9uIiwidHJhbnNmb3JtRnVuYyIsImdldFRyYW5zZm9ybSIsInByb2plY3Rpb25zMiIsImZvcndhcmRUcmFuc2Zvcm0iLCJpbnZlcnNlVHJhbnNmb3JtIiwidXNlclByb2plY3Rpb24iLCJnZXRVc2VyUHJvamVjdGlvbiIsInRvVXNlckNvb3JkaW5hdGUiLCJmcm9tVXNlckNvb3JkaW5hdGUiLCJkZXN0UHJvamVjdGlvbiIsImZyb21Vc2VyRXh0ZW50IiwiZGltZW5zaW9uIiwiYXRhbiIsIkNhbnZhc1RpbGVMYXllclJlbmRlcmVyIiwidGlsZUxheWVyIiwiZXh0ZW50Q2hhbmdlZCIsInJlbmRlcmVkRXh0ZW50XyIsInJlbmRlcmVkUGl4ZWxSYXRpbyIsInJlbmRlcmVkUHJvamVjdGlvbiIsInJlbmRlcmVkUmV2aXNpb24iLCJyZW5kZXJlZFRpbGVzIiwibmV3VGlsZXNfIiwidG1wRXh0ZW50IiwidG1wVGlsZVJhbmdlXyIsImlzRHJhd2FibGVUaWxlIiwidGlsZVN0YXRlIiwiZ2V0VGlsZSIsInoiLCJzZXRTdGF0ZSIsImdldEludGVyaW1UaWxlIiwibGF5ZXJJbmRleCIsInZpZXdSZXNvbHV0aW9uIiwidmlld0NlbnRlciIsInRpbGVTb3VyY2UiLCJzb3VyY2VSZXZpc2lvbiIsImdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiIsImdldFpGb3JSZXNvbHV0aW9uIiwiekRpcmVjdGlvbiIsInRpbGVSZXNvbHV0aW9uIiwiZ2V0UmVzb2x1dGlvbiIsInRpbGVQaXhlbFJhdGlvIiwiZ2V0VGlsZVBpeGVsUmF0aW8iLCJjYW52YXNFeHRlbnQiLCJnZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaIiwidGlsZXNUb0RyYXdCeVoiLCJmaW5kTG9hZGVkVGlsZXMiLCJ0bXBUaWxlUmFuZ2UiLCJ1aWQiLCJpblRyYW5zaXRpb24iLCJnZXRBbHBoYSIsInRpbWUiLCJjaGlsZFRpbGVSYW5nZSIsImdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlIiwiY292ZXJlZCIsImZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UiLCJjYW52YXNTY2FsZSIsImNhbnZhc1RyYW5zZm9ybSIsInRyYW5zZm9ybVN0cmluZyIsImpvaW4iLCJnZXRDb250ZXh0T3B0aW9ucyIsImNsaXBzIiwiY2xpcFpzIiwiY3VycmVudENsaXAiLCJ6cyIsIk51bWJlciIsInNvcnQiLCJnZXRPcGFxdWUiLCJyZXZlcnNlIiwiY3VycmVudFoiLCJjdXJyZW50VGlsZVBpeGVsU2l6ZSIsImdldFRpbGVQaXhlbFNpemUiLCJjdXJyZW50U2NhbGUiLCJkeF8xIiwiZHlfMSIsIm9yaWdpblRpbGVDb29yZCIsImdldFRpbGVDb29yZEZvckNvb3JkQW5kWiIsIm9yaWdpblRpbGVFeHRlbnQiLCJnZXRUaWxlQ29vcmRFeHRlbnQiLCJvcmlnaW5fMSIsInRpbGVHdXR0ZXIiLCJnZXRHdXR0ZXJGb3JQcm9qZWN0aW9uIiwidGlsZXNUb0RyYXciLCJ0aWxlQ29vcmRLZXkiLCJ4SW5kZXgiLCJuZXh0WCIsInlJbmRleCIsIm5leHRZIiwidyIsImgiLCJ0cmFuc2l0aW9uIiwiaV8xIiwiZHJhd1RpbGVJbWFnZSIsInJlc3RvcmUiLCJ1bnNoaWZ0IiwidXBkYXRlVXNlZFRpbGVzIiwidXNlZFRpbGVzIiwibWFuYWdlVGlsZVB5cmFtaWQiLCJzY2hlZHVsZUV4cGlyZUNhY2hlIiwiZ3V0dGVyIiwiZ2V0VGlsZUltYWdlIiwidGlsZUFscGhhIiwiYWxwaGEiLCJhbHBoYUNoYW5nZWQiLCJnbG9iYWxBbHBoYSIsImFuaW1hdGUiLCJlbmRUcmFuc2l0aW9uIiwiZ2V0SW1hZ2UiLCJjYW5FeHBpcmVDYWNoZSIsInBvc3RSZW5kZXJGdW5jdGlvbiIsInRpbGVTb3VyY2VLZXkiLCJleHBpcmVDYWNoZSIsInBvc3RSZW5kZXJGdW5jdGlvbnMiLCJnZXRLZXkiLCJvcHRfdGlsZUNhbGxiYWNrIiwid2FudGVkVGlsZXMiLCJ0aWxlUXVldWUiLCJ0aWxlQ291bnQiLCJpc0tleVF1ZXVlZCIsImVucXVldWUiLCJnZXRUaWxlQ29vcmRDZW50ZXIiLCJ1c2VUaWxlIiwidXBkYXRlQ2FjaGVTaXplIiwiVGlsZUxheWVyIiwiQmFzZVRpbGUiLCJjb29yZGluYXRlMSIsImNvb3JkaW5hdGUyIiwiY29zQW5nbGUiLCJzaW5BbmdsZSIsImNyZWF0ZUV4dGVudCIsIm9ubHlDZW50ZXIiLCJzbW9vdGgiLCJvcHRfaXNNb3ZpbmciLCJvcHRfY2VudGVyU2hpZnQiLCJ2aWV3V2lkdGgiLCJ2aWV3SGVpZ2h0Iiwic2hpZnRYIiwic2hpZnRZIiwicmF0aW8iLCJub25lIiwiZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbiIsIm1heEV4dGVudCIsInZpZXdwb3J0U2l6ZSIsInNob3dGdWxsRXh0ZW50IiwieFJlc29sdXRpb24iLCJ5UmVzb2x1dGlvbiIsImdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uIiwicmVzdWx0IiwiY3JlYXRlTWluTWF4UmVzb2x1dGlvbiIsIm9wdF9zbW9vdGgiLCJvcHRfbWF4RXh0ZW50Iiwib3B0X3Nob3dGdWxsRXh0ZW50IiwiY2FwcGVkTWF4UmVzIiwiZGlzYWJsZSIsImVhc2VJbiIsInBvdyIsImVhc2VPdXQiLCJpbkFuZE91dCIsImxpbmVhciIsInRtcFRyYW5zZm9ybSIsIkdlb21ldHJ5IiwiZm4iLCJsYXN0UmVzdWx0IiwibGFzdEFyZ3MiLCJsYXN0VGhpcyIsImNhbGxlZCIsImV4dGVudFJldmlzaW9uXyIsInNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UiLCJzaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiIsInNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCIsInJldmlzaW9uIiwic3F1YXJlZFRvbGVyYW5jZSIsIm9wdF90cmFuc2Zvcm0iLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnkiLCJjbG9uZSIsImFwcGx5VHJhbnNmb3JtIiwibmV4dEFyZ3MiLCJzaW1wbGlmeVRyYW5zZm9ybWVkIiwiY2xvc2VzdFBvaW50WFkiLCJjbG9zZXN0UG9pbnQiLCJtaW5TcXVhcmVkRGlzdGFuY2UiLCJjb29yZCIsImdldENsb3Nlc3RQb2ludCIsIm9wdF9jbG9zZXN0UG9pbnQiLCJOYU4iLCJpbnRlcnNlY3RzQ29vcmRpbmF0ZSIsImNvbXB1dGVFeHRlbnQiLCJpc05hTiIsInJldHVybk9yVXBkYXRlIiwicm90YXRlIiwiYW5jaG9yIiwic2NhbGUiLCJvcHRfc3kiLCJvcHRfYW5jaG9yIiwic2ltcGxpZnkiLCJ0b2xlcmFuY2UiLCJnZXRUeXBlIiwiaW50ZXJzZWN0c0V4dGVudCIsInRyYW5zbGF0ZSIsImRlbHRhWCIsImRlbHRhWSIsInNvdXJjZVByb2oiLCJpbkNvb3JkaW5hdGVzIiwib3V0Q29vcmRpbmF0ZXMiLCJwaXhlbEV4dGVudCIsInByb2plY3RlZEV4dGVudCIsIm9wdF9kZXN0IiwiZGVzdCIsImoiLCJnZXRTdHJpZGVGb3JMYXlvdXQiLCJsYXlvdXQiLCJTaW1wbGVHZW9tZXRyeSIsImdldENvb3JkaW5hdGVzIiwiZ2V0Rmlyc3RDb29yZGluYXRlIiwiZ2V0RmxhdENvb3JkaW5hdGVzIiwiZ2V0TGFzdENvb3JkaW5hdGUiLCJnZXRMYXlvdXQiLCJzaW1wbGlmaWVkR2VvbWV0cnkiLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCIsImdldFN0cmlkZSIsInNldEZsYXRDb29yZGluYXRlcyIsInNldENvb3JkaW5hdGVzIiwib3B0X2xheW91dCIsInNldExheW91dCIsIm5lc3RpbmciLCJnZXRMYXlvdXRGb3JTdHJpZGUiLCJhbmNob3JYIiwiYW5jaG9yWSIsImsiLCJhc3NpZ25DbG9zZXN0Iiwib2Zmc2V0MSIsIm9mZnNldDIiLCJtYXhTcXVhcmVkRGVsdGEiLCJzcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0UG9pbnQiLCJtYXhEZWx0YSIsImlzUmluZyIsIm9wdF90bXBQb2ludCIsInNxdWFyZWREaXN0YW5jZSIsInRtcFBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGVzIiwic25hcCIsInF1YW50aXplIiwic2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyIsInNpbXBsaWZpZWRPZmZzZXQiLCJpbmZsYXRlQ29vcmRpbmF0ZXMiLCJvcHRfY29vcmRpbmF0ZXMiLCJsaW5lYXJSaW5nIiwidHdpY2VBcmVhIiwiTGluZWFyUmluZyIsIm1heERlbHRhXyIsIm1heERlbHRhUmV2aXNpb25fIiwibWFya2VycyIsInN0YWNrIiwibGFzdCIsInBvcCIsImZpcnN0IiwibWF4U3F1YXJlZERpc3RhbmNlIiwic3F1YXJlZERpc3RhbmNlXzEiLCJkb3VnbGFzUGV1Y2tlciIsIlBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGUiLCJsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQiLCJsaW5lYXJSaW5nQ29udGFpbnNYWSIsInduIiwibGluZWFyUmluZ3NDb250YWluc1hZIiwiZW5kcyIsImludGVyc2VjdHNMaW5lU3RyaW5nIiwiY29vcmRpbmF0ZXNFeHRlbnQiLCJyZXQiLCJwb2ludDEiLCJwb2ludDIiLCJzdGFydCIsInN0YXJ0UmVsIiwiZW5kUmVsIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJzbG9wZSIsImludGVyc2VjdHNTZWdtZW50IiwidG1wIiwibGluZWFyUmluZ0lzQ2xvY2t3aXNlIiwiZWRnZSIsIm9yaWVudExpbmVhclJpbmdzIiwib3B0X3JpZ2h0IiwicmlnaHQiLCJpc0Nsb2Nrd2lzZSIsIlBvbHlnb24iLCJvcHRfZW5kcyIsImVuZHNfIiwiZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8iLCJmbGF0SW50ZXJpb3JQb2ludF8iLCJvcmllbnRlZFJldmlzaW9uXyIsIm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyIsImFwcGVuZExpbmVhclJpbmciLCJleHRlbnNpb24iLCJwb2x5Z29uIiwiYXJyYXlNYXhTcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCIsImdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzIiwibGluZWFyUmluZ3MiLCJvcHRfY29vcmRpbmF0ZXNzIiwiY29vcmRpbmF0ZXNzIiwiamoiLCJpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSIsImdldEVuZHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludCIsImZsYXRDZW50ZXIiLCJmbGF0Q2VudGVycyIsImZsYXRDZW50ZXJzT2Zmc2V0IiwiaW50ZXJzZWN0aW9ucyIsInJyIiwicG9pbnRYIiwibWF4U2VnbWVudExlbmd0aCIsInNlZ21lbnRMZW5ndGgiLCJhYnMiLCJnZXRJbnRlcmlvclBvaW50T2ZBcnJheSIsImdldEludGVyaW9yUG9pbnQiLCJnZXRMaW5lYXJSaW5nQ291bnQiLCJnZXRMaW5lYXJSaW5nIiwiZ2V0TGluZWFyUmluZ3MiLCJsaW5lYXJSaW5nc0FyZU9yaWVudGVkIiwic2ltcGxpZmllZEVuZHMiLCJxdWFudGl6ZUFycmF5IiwiaW50ZXJzZWN0c0xpbmVhclJpbmciLCJpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5IiwiZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJmcm9tRXh0ZW50IiwiYW5pbWF0aW9uQ2FsbGJhY2siLCJyZXR1cm5WYWx1ZSIsInNldFRpbWVvdXQiLCJpc05vb3BBbmltYXRpb24iLCJhbmltYXRpb24iLCJzb3VyY2VDZW50ZXIiLCJ0YXJnZXRDZW50ZXIiLCJzb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0UmVzb2x1dGlvbiIsInNvdXJjZVJvdGF0aW9uIiwidGFyZ2V0Um90YXRpb24iLCJjYWxjdWxhdGVDZW50ZXJPbiIsInJvdFgiLCJyb3RZIiwiVmlldyIsImhpbnRzXyIsImFuaW1hdGlvbnNfIiwidXBkYXRlQW5pbWF0aW9uS2V5XyIsInByb2plY3Rpb25fIiwidmlld3BvcnRTaXplXyIsInRhcmdldENlbnRlcl8iLCJ0YXJnZXRSZXNvbHV0aW9uXyIsInRhcmdldFJvdGF0aW9uXyIsImNhbmNlbEFuY2hvcl8iLCJhcHBseU9wdGlvbnNfIiwicmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvIiwicmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJ6b29tRmFjdG9yIiwibXVsdGlXb3JsZCIsInNtb290aFJlc29sdXRpb25Db25zdHJhaW50IiwicHJvakV4dGVudCIsImNvbnN0cmFpbk9ubHlDZW50ZXIiLCJyZXNvbHV0aW9ucyIsImNvbnN0cmFpblJlc29sdXRpb24iLCJjYXBwZWQiLCJmbG9vciIsImNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zIiwiZGVmYXVsdE1heFJlc29sdXRpb24iLCJkZWZhdWx0TWluUmVzb2x1dGlvbiIsImRlZmF1bHRNYXhab29tIiwicG93ZXIiLCJvcHRfbWluUmVzb2x1dGlvbiIsIm1pblpvb21MZXZlbCIsImNlaWwiLCJjYXBwZWRab29tTGV2ZWwiLCJ6b29tTGV2ZWwiLCJjcmVhdGVTbmFwVG9Qb3dlciIsImNvbnN0cmFpbnQiLCJjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludCIsIm1heFJlc29sdXRpb25fIiwibWluUmVzb2x1dGlvbl8iLCJ6b29tRmFjdG9yXyIsInJlc29sdXRpb25zXyIsInBhZGRpbmdfIiwicGFkZGluZyIsIm1pblpvb21fIiwiY2VudGVyQ29uc3RyYWludCIsInNtb290aEV4dGVudENvbnN0cmFpbnQiLCJjcmVhdGVDZW50ZXJDb25zdHJhaW50Iiwicm90YXRpb25Db25zdHJhaW50IiwiZW5hYmxlUm90YXRpb24iLCJjb25zdHJhaW5Sb3RhdGlvbiIsInRoZXRhIiwiY3JlYXRlUm90YXRpb25Db25zdHJhaW50IiwiY29uc3RyYWludHNfIiwic2V0Um90YXRpb24iLCJzZXRDZW50ZXJJbnRlcm5hbCIsInNldFJlc29sdXRpb24iLCJzZXRab29tIiwib3B0aW9uc18iLCJvbGRQYWRkaW5nIiwibmV3UGFkZGluZyIsIm9mZnNldFkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiZ2V0VXBkYXRlZE9wdGlvbnNfIiwibmV3T3B0aW9ucyIsImdldFpvb20iLCJnZXRDZW50ZXJJbnRlcm5hbCIsImdldFJvdGF0aW9uIiwidmFyX2FyZ3MiLCJpc0RlZiIsImdldEFuaW1hdGluZyIsInJlc29sdmVDb25zdHJhaW50cyIsImFyZ3MiLCJnZXRQcm9qZWN0aW9uIiwiYW5pbWF0ZUludGVybmFsIiwiYW5pbWF0aW9uQ291bnQiLCJEYXRlIiwibm93Iiwic2VyaWVzIiwiY29tcGxldGUiLCJkdXJhdGlvbiIsImVhc2luZyIsImdldFJlc29sdXRpb25Gb3Jab29tIiwiZGVsdGEiLCJzZXRIaW50IiwidXBkYXRlQW5pbWF0aW9uc18iLCJnZXRJbnRlcmFjdGluZyIsImNhbmNlbEFuaW1hdGlvbnMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIm1vcmUiLCJzZXJpZXNDb21wbGV0ZSIsImVsYXBzZWQiLCJmcmFjdGlvbiIsInByb2dyZXNzIiwiZ2V0Vmlld3BvcnRTaXplXyIsImNvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImNhbGN1bGF0ZUNlbnRlclpvb20iLCJhcHBseVRhcmdldFN0YXRlXyIsImNvbnN0cmFpbmVkUm90YXRpb24iLCJjYWxjdWxhdGVDZW50ZXJSb3RhdGUiLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY3VycmVudENlbnRlciIsImN1cnJlbnRSZXNvbHV0aW9uIiwib3B0X3JvdGF0aW9uIiwic2V0Vmlld3BvcnRTaXplIiwib3B0X3NpemUiLCJWaWV3UHJvcGVydHkiLCJnZXRDb25zdHJhaW50cyIsImdldENvbnN0cmFpblJlc29sdXRpb24iLCJnZXRIaW50cyIsIm9wdF9oaW50cyIsImNhbGN1bGF0ZUV4dGVudCIsImNhbGN1bGF0ZUV4dGVudEludGVybmFsIiwiZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyIsImdldFpvb21Gb3JSZXNvbHV0aW9uIiwic2V0Q29uc3RyYWluUmVzb2x1dGlvbiIsImVuYWJsZWQiLCJnZXRSZXNvbHV0aW9ucyIsImdldFJlc29sdXRpb25Gb3JFeHRlbnQiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwiLCJnZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiIsIm9wdF9wb3dlciIsImdldENvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uIiwibG9nUG93ZXIiLCJyZWR1Y2VkU2l6ZSIsIm5lYXJlc3QiLCJiYXNlTGV2ZWwiLCJmaXQiLCJnZW9tZXRyeU9yRXh0ZW50IiwiZ2VvbWV0cnkiLCJmaXRJbnRlcm5hbCIsInJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeSIsImNvb3JkcyIsIm1pblJvdFgiLCJtaW5Sb3RZIiwibWF4Um90WCIsIm1heFJvdFkiLCJyb3RhdGVkRXh0ZW50IiwiY2VudGVyUm90IiwiY2VudGVyWCIsImNlbnRlclkiLCJnZXRDb25zdHJhaW5lZENlbnRlciIsImNlbnRlck9uIiwiY2VudGVyT25JbnRlcm5hbCIsImNhbGN1bGF0ZUNlbnRlclNoaWZ0IiwiY2VudGVyU2hpZnQiLCJzaGlmdGVkQ2VudGVyIiwiYWRqdXN0Q2VudGVyIiwiZGVsdGFDb29yZGluYXRlcyIsInNldENlbnRlciIsImFkanVzdENlbnRlckludGVybmFsIiwiYWRqdXN0UmVzb2x1dGlvbiIsImFkanVzdFJlc29sdXRpb25JbnRlcm5hbCIsImlzTW92aW5nIiwibmV3UmVzb2x1dGlvbiIsImFkanVzdFpvb20iLCJhZGp1c3RSb3RhdGlvbiIsImFkanVzdFJvdGF0aW9uSW50ZXJuYWwiLCJuZXdSb3RhdGlvbiIsImhpbnQiLCJvcHRfZG9Ob3RDYW5jZWxBbmltcyIsIm9wdF9mb3JjZU1vdmluZyIsIm5ld0NlbnRlciIsIm9wdF9kdXJhdGlvbiIsIm9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uIiwiYmVnaW5JbnRlcmFjdGlvbiIsImVuZEludGVyYWN0aW9uIiwiZW5kSW50ZXJhY3Rpb25JbnRlcm5hbCIsIm9wdF90YXJnZXRSZXNvbHV0aW9uIiwiZ2V0Q29uc3RyYWluZWRab29tIiwidGFyZ2V0Wm9vbSIsIm9wdF9kaXJlY3Rpb24iLCJ0YXJnZXRSZXMiLCJzcmMiLCJjcm9zc09yaWdpbiIsImNvbG9yIiwiZyIsImFzU3RyaW5nIiwic2hhcmVkIiwiSWNvbkltYWdlQ2FjaGUiLCJjYWNoZV8iLCJjYWNoZVNpemVfIiwibWF4Q2FjaGVTaXplXyIsImV4cGlyZSIsImljb25JbWFnZSIsInNldFNpemUiLCJtYXhDYWNoZVNpemUiLCJleHBpcmVJY29uQ2FjaGUiLCJNYXBSZW5kZXJlciIsIm1hcF8iLCJkaXNwYXRjaFJlbmRlckV2ZW50IiwiY2FsY3VsYXRlTWF0cmljZXMyRCIsImNoZWNrV3JhcHBlZCIsInRoaXNBcmciLCJsYXllckZpbHRlciIsInRoaXNBcmcyIiwiZmVhdHVyZSIsInRyYW5zbGF0ZWRDb29yZGluYXRlIiwid29ybGRXaWR0aCIsIndvcmxkc0F3YXkiLCJvcHRfc291cmNlRXh0ZW50V2lkdGgiLCJwcm9qZWN0aW9uRXh0ZW50Iiwic291cmNlRXh0ZW50V2lkdGgiLCJvZmZzZXRzIiwibGF5ZXJTdGF0ZXMiLCJudW1MYXllcnMiLCJ0bXBDb29yZCIsImdldFdyYXBYIiwiY2FsbGJhY2tfMSIsIm9yZGVyIiwibSIsImRpc3RhbmNlU3EiLCJmb3JFYWNoTGF5ZXJBdFBpeGVsIiwiaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZSIsImdldE1hcCIsInNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlIiwiQ0xBU1NfSElEREVOIiwiQ0xBU1NfQ09OVFJPTCIsImNoZWNrZWRGb250cyIsIlJlZ0V4cCIsImNvbnNvbGUiLCJ3YXJuIiwiQ29tcG9zaXRlTWFwUmVuZGVyZXIiLCJmb250Q2hhbmdlTGlzdGVuZXJLZXlfIiwicmVkcmF3VGV4dCIsImVsZW1lbnRfIiwiQ0xBU1NfVU5TRUxFQ1RBQkxFIiwiZ2V0Vmlld3BvcnQiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW5fIiwicmVuZGVyZWRWaXNpYmxlXyIsImRlY2x1dHRlckxheWVycyIsInByZXZpb3VzRWxlbWVudCIsImVsZW1lbnQiLCJyZW5kZXJEZWNsdXR0ZXIiLCJjaGlsZHJlbiIsIm9sZENoaWxkcmVuIiwiY2hpbGROb2RlcyIsIm9sZENoaWxkIiwibmV3Q2hpbGQiLCJyZXBsYWNlQ2hpbGRyZW4iLCJkaXNwbGF5IiwiTWFwIiwiQ29sbGVjdGlvbkV2ZW50Iiwib3B0X2VsZW1lbnQiLCJvcHRfaW5kZXgiLCJDb2xsZWN0aW9uIiwidW5pcXVlXyIsInVuaXF1ZSIsImFycmF5XyIsImFzc2VydFVuaXF1ZV8iLCJ1cGRhdGVMZW5ndGhfIiwiZ2V0TGVuZ3RoIiwiZ2V0QXJyYXkiLCJpdGVtIiwiaW5zZXJ0QXQiLCJlbGVtIiwiQ29sbGVjdGlvbkV2ZW50VHlwZSIsInJlbW92ZUF0IiwicmVtb3ZlIiwicHJldiIsInNldEF0Iiwib3B0X2V4Y2VwdCIsIkxheWVyR3JvdXAiLCJsYXllcnMiLCJsYXllcnNMaXN0ZW5lcktleXNfIiwibGlzdGVuZXJLZXlzXyIsImhhbmRsZUxheWVyc0NoYW5nZWRfIiwic2V0TGF5ZXJzIiwiaGFuZGxlTGF5ZXJDaGFuZ2VfIiwiZ2V0TGF5ZXJzIiwiaWQiLCJoYW5kbGVMYXllcnNBZGRfIiwiaGFuZGxlTGF5ZXJzUmVtb3ZlXyIsImxheWVyc0FycmF5IiwiY29sbGVjdGlvbkV2ZW50IiwicG9zIiwib3duTGF5ZXJTdGF0ZSIsImRlZmF1bHRaSW5kZXgiLCJNYXBFdmVudCIsIk1hcEJyb3dzZXJFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJvcHRfZHJhZ2dpbmciLCJwaXhlbF8iLCJjb29yZGluYXRlXyIsImRyYWdnaW5nIiwiZ2V0RXZlbnRQaXhlbCIsImdldENvb3JkaW5hdGVGcm9tUGl4ZWwiLCJTSU5HTEVDTElDSyIsIkNMSUNLIiwiREJMQ0xJQ0siLCJQT0lOVEVSRFJBRyIsIlBPSU5URVJNT1ZFIiwiUE9JTlRFUkRPV04iLCJQT0lOVEVSVVAiLCJQT0lOVEVST1ZFUiIsIlBPSU5URVJPVVQiLCJQT0lOVEVSRU5URVIiLCJQT0lOVEVSTEVBVkUiLCJQT0lOVEVSQ0FOQ0VMIiwiTWFwQnJvd3NlckV2ZW50SGFuZGxlciIsIm1vdmVUb2xlcmFuY2UiLCJjbGlja1RpbWVvdXRJZF8iLCJlbXVsYXRlQ2xpY2tzXyIsImRyYWdnaW5nXyIsImRyYWdMaXN0ZW5lcktleXNfIiwibW92ZVRvbGVyYW5jZV8iLCJkb3duXyIsImFjdGl2ZVBvaW50ZXJzXyIsInRyYWNrZWRUb3VjaGVzXyIsInBvaW50ZXJkb3duTGlzdGVuZXJLZXlfIiwiaGFuZGxlUG9pbnRlckRvd25fIiwib3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyIsInJlbGF5ZWRMaXN0ZW5lcktleV8iLCJyZWxheUV2ZW50XyIsImJvdW5kSGFuZGxlVG91Y2hNb3ZlXyIsImhhbmRsZVRvdWNoTW92ZV8iLCJlbXVsYXRlQ2xpY2tfIiwicG9pbnRlckV2ZW50IiwibmV3RXZlbnQiLCJjbGVhclRpbWVvdXQiLCJ1cGRhdGVBY3RpdmVQb2ludGVyc18iLCJwb2ludGVySWQiLCJoYW5kbGVQb2ludGVyVXBfIiwiaXNNb3VzZUFjdGlvbkJ1dHRvbl8iLCJidXR0b24iLCJkb2MiLCJnZXRPd25lckRvY3VtZW50IiwiaGFuZGxlUG9pbnRlck1vdmVfIiwiZ2V0Um9vdE5vZGUiLCJpc01vdmluZ18iLCJjYW5jZWxhYmxlIiwiY2xpZW50WCIsImNsaWVudFkiLCJEUk9QIiwiUHJpb3JpdHlRdWV1ZSIsInByaW9yaXR5RnVuY3Rpb24iLCJrZXlGdW5jdGlvbiIsInByaW9yaXR5RnVuY3Rpb25fIiwia2V5RnVuY3Rpb25fIiwiZWxlbWVudHNfIiwicHJpb3JpdGllc18iLCJxdWV1ZWRFbGVtZW50c18iLCJkZXF1ZXVlIiwiZWxlbWVudHMiLCJwcmlvcml0aWVzIiwic2lmdFVwXyIsImVsZW1lbnRLZXkiLCJwcmlvcml0eSIsInNpZnREb3duXyIsImdldENvdW50IiwiZ2V0TGVmdENoaWxkSW5kZXhfIiwiZ2V0UmlnaHRDaGlsZEluZGV4XyIsImdldFBhcmVudEluZGV4XyIsImhlYXBpZnlfIiwiaXNFbXB0eSIsImlzUXVldWVkIiwiY291bnQiLCJzdGFydEluZGV4IiwibEluZGV4IiwickluZGV4Iiwic21hbGxlckNoaWxkSW5kZXgiLCJwYXJlbnRJbmRleCIsInJlcHJpb3JpdGl6ZSIsIlRpbGVRdWV1ZSIsInRpbGVQcmlvcml0eUZ1bmN0aW9uIiwidGlsZUNoYW5nZUNhbGxiYWNrIiwiYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyIsImhhbmRsZVRpbGVDaGFuZ2UiLCJ0aWxlQ2hhbmdlQ2FsbGJhY2tfIiwidGlsZXNMb2FkaW5nXyIsInRpbGVzTG9hZGluZ0tleXNfIiwiYWRkZWQiLCJnZXRUaWxlc0xvYWRpbmciLCJ0aWxlS2V5IiwibG9hZE1vcmVUaWxlcyIsIm1heFRvdGFsTG9hZGluZyIsIm1heE5ld0xvYWRzIiwibmV3TG9hZHMiLCJoYXNBcmVhIiwidG9TaXplIiwiUGx1Z2dhYmxlTWFwIiwib3B0aW9uc0ludGVybmFsIiwia2V5Ym9hcmRFdmVudFRhcmdldCIsImdldEVsZW1lbnRCeUlkIiwiY29udHJvbHMiLCJpbnRlcmFjdGlvbnMiLCJvdmVybGF5cyIsImxheWVyR3JvdXAiLCJ2aWV3IiwiY3JlYXRlT3B0aW9uc0ludGVybmFsIiwiYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfIiwiaGFuZGxlQnJvd3NlckV2ZW50IiwibWF4VGlsZXNMb2FkaW5nXyIsIm1heFRpbGVzTG9hZGluZyIsInBpeGVsUmF0aW9fIiwicG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfIiwiYW5pbWF0aW9uRGVsYXlLZXlfIiwiYW5pbWF0aW9uRGVsYXlfIiwicmVuZGVyRnJhbWVfIiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fIiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fIiwiZnJhbWVJbmRleF8iLCJmcmFtZVN0YXRlXyIsInByZXZpb3VzRXh0ZW50XyIsInZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyIsInZpZXdDaGFuZ2VMaXN0ZW5lcktleV8iLCJsYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfIiwidmlld3BvcnRfIiwib3ZlcmZsb3ciLCJvdmVybGF5Q29udGFpbmVyXyIsInBvaW50ZXJFdmVudHMiLCJvdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XyIsIm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfIiwia2V5Ym9hcmRFdmVudFRhcmdldF8iLCJrZXlIYW5kbGVyS2V5c18iLCJvdmVybGF5c18iLCJvdmVybGF5SWRJbmRleF8iLCJoYW5kbGVSZXNpemVfIiwicG9zdFJlbmRlckZ1bmN0aW9uc18iLCJ0aWxlUXVldWVfIiwiZ2V0VGlsZVByaW9yaXR5IiwiaGFuZGxlVGlsZUNoYW5nZV8iLCJNYXBQcm9wZXJ0eSIsImhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyIsImhhbmRsZVZpZXdDaGFuZ2VkXyIsImhhbmRsZVNpemVDaGFuZ2VkXyIsImhhbmRsZVRhcmdldENoYW5nZWRfIiwiY29udHJvbCIsImludGVyYWN0aW9uIiwiYWRkT3ZlcmxheUludGVybmFsXyIsImdldElkIiwiYWRkQ29udHJvbCIsImdldENvbnRyb2xzIiwiYWRkSW50ZXJhY3Rpb24iLCJnZXRJbnRlcmFjdGlvbnMiLCJhZGRMYXllciIsImdldExheWVyR3JvdXAiLCJhZGRPdmVybGF5Iiwib3ZlcmxheSIsImdldE92ZXJsYXlzIiwic2V0VGFyZ2V0IiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwiZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsIiwiZ2V0RmVhdHVyZXNBdFBpeGVsIiwiZmVhdHVyZXMiLCJoYXNGZWF0dXJlQXRQaXhlbCIsImdldEV2ZW50Q29vcmRpbmF0ZSIsImdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsIiwidmlld3BvcnRQb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImV2ZW50UG9zaXRpb24iLCJjaGFuZ2VkVG91Y2hlcyIsInRvcCIsImdldFRhcmdldCIsImdldFRhcmdldEVsZW1lbnQiLCJnZXRWaWV3IiwiZ2V0T3ZlcmxheUJ5SWQiLCJnZXRMb2FkaW5nIiwibG9hZGluZyIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGUiLCJ2aWV3Q29vcmRpbmF0ZSIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCIsImdldE92ZXJsYXlDb250YWluZXIiLCJnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50IiwidGFyZ2V0RWxlbWVudCIsIm93bmVyRG9jdW1lbnQiLCJ0aWxlQ2VudGVyIiwiYnJvd3NlckV2ZW50IiwibWFwQnJvd3NlckV2ZW50IiwiaGFuZGxlTWFwQnJvd3NlckV2ZW50Iiwicm9vdE5vZGUiLCJkb2N1bWVudEVsZW1lbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsImdldEFjdGl2ZSIsImhhbmRsZVBvc3RSZW5kZXIiLCJoaW50cyIsInZpZXdIaW50cyIsImxvd09uRnJhbWVCdWRnZXQiLCJ1cGRhdGVTaXplIiwiaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8iLCJ1cGRhdGVWaWV3cG9ydFNpemVfIiwiaXNSZW5kZXJlZCIsInJlbmRlclN5bmMiLCJyZW1vdmVDb250cm9sIiwicmVtb3ZlSW50ZXJhY3Rpb24iLCJyZW1vdmVMYXllciIsInJlbW92ZU92ZXJsYXkiLCJwcmV2aW91c0ZyYW1lU3RhdGUiLCJkZWNsdXR0ZXJUcmVlIiwiTWFwRXZlbnRUeXBlIiwic2V0TGF5ZXJHcm91cCIsInNldFZpZXciLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm9mZnNldFdpZHRoIiwicGFyc2VGbG9hdCIsIm9mZnNldEhlaWdodCIsInBhcnNlSW50IiwiQ29udHJvbCIsInRhcmdldF8iLCJsaXN0ZW5lcktleXMiLCJtYXBFdmVudCIsIkF0dHJpYnV0aW9uIiwidWxFbGVtZW50XyIsImNvbGxhcHNlZF8iLCJjb2xsYXBzZWQiLCJ1c2VyQ29sbGFwc2VkXyIsIm92ZXJyaWRlQ29sbGFwc2libGVfIiwiY29sbGFwc2libGUiLCJjb2xsYXBzaWJsZV8iLCJ0aXBMYWJlbCIsImV4cGFuZENsYXNzTmFtZSIsImNvbGxhcHNlTGFiZWwiLCJjb2xsYXBzZUNsYXNzTmFtZSIsImNvbGxhcHNlTGFiZWxfIiwidGV4dENvbnRlbnQiLCJsYWJlbCIsImxhYmVsXyIsImFjdGl2ZUxhYmVsIiwidG9nZ2xlQnV0dG9uXyIsInNldEF0dHJpYnV0ZSIsInRpdGxlIiwiaGFuZGxlQ2xpY2tfIiwiY3NzQ2xhc3NlcyIsInJlbmRlcmVkQXR0cmlidXRpb25zXyIsImNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfIiwibG9va3VwIiwidmlzaWJsZUF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uR2V0dGVyIiwiZ2V0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25zIiwiZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJzZXRDb2xsYXBzaWJsZSIsInVwZGF0ZUVsZW1lbnRfIiwibGFzdENoaWxkIiwicmVtb3ZlQ2hpbGRyZW4iLCJpbm5lckhUTUwiLCJoYW5kbGVUb2dnbGVfIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0Q29sbGFwc2libGUiLCJzZXRDb2xsYXBzZWQiLCJnZXRDb2xsYXBzZWQiLCJSb3RhdGUiLCJjb21wYXNzQ2xhc3NOYW1lIiwiY2FsbFJlc2V0Tm9ydGhfIiwicmVzZXROb3J0aCIsImR1cmF0aW9uXyIsImF1dG9IaWRlXyIsImF1dG9IaWRlIiwicm90YXRpb25fIiwicmVzZXROb3J0aF8iLCJab29tIiwiem9vbUluQ2xhc3NOYW1lIiwiem9vbU91dENsYXNzTmFtZSIsInpvb21JbkxhYmVsIiwiem9vbU91dExhYmVsIiwiem9vbUluVGlwTGFiZWwiLCJ6b29tT3V0VGlwTGFiZWwiLCJpbkVsZW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsIm91dEVsZW1lbnQiLCJ6b29tQnlEZWx0YV8iLCJjdXJyZW50Wm9vbSIsIm5ld1pvb20iLCJ6b29tQnlEZWx0YSIsIkludGVyYWN0aW9uIiwic2V0QWN0aXZlIiwiYWN0aXZlIiwiRG91YmxlQ2xpY2tab29tIiwiZGVsdGFfIiwic3RvcEV2ZW50Iiwic2hpZnRLZXkiLCJQb2ludGVySW50ZXJhY3Rpb24iLCJoYW5kbGVEb3duRXZlbnQiLCJoYW5kbGVEcmFnRXZlbnQiLCJoYW5kbGVNb3ZlRXZlbnQiLCJoYW5kbGVVcEV2ZW50Iiwic3RvcERvd24iLCJoYW5kbGluZ0Rvd25VcFNlcXVlbmNlIiwidHJhY2tlZFBvaW50ZXJzXyIsInRhcmdldFBvaW50ZXJzIiwiZ2V0UG9pbnRlckNvdW50IiwidXBkYXRlVHJhY2tlZFBvaW50ZXJzXyIsImhhbmRsZWRVcCIsImhhbmRsZWQiLCJpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50IiwiY29uZGl0aW9ucyIsInBhc3MiLCJhbHRTaGlmdEtleXNPbmx5IiwiYWx0S2V5IiwibWV0YUtleSIsImN0cmxLZXkiLCJmb2N1c1dpdGhUYWJpbmRleCIsImhhc0F0dHJpYnV0ZSIsImFjdGl2ZUVsZW1lbnQiLCJhbHdheXMiLCJtb3VzZUFjdGlvbkJ1dHRvbiIsIm5vTW9kaWZpZXJLZXlzIiwic2hpZnRLZXlPbmx5IiwidGFyZ2V0Tm90RWRpdGFibGUiLCJ0YWdOYW1lIiwibW91c2VPbmx5IiwicG9pbnRlclR5cGUiLCJwcmltYXJ5QWN0aW9uIiwiaXNQcmltYXJ5IiwiRHJhZ1BhbiIsImtpbmV0aWNfIiwia2luZXRpYyIsImxhc3RDZW50cm9pZCIsImxhc3RQb2ludGVyc0NvdW50XyIsInBhbm5pbmdfIiwiY29uZGl0aW9uIiwiY29uZGl0aW9uXyIsIm9uRm9jdXNPbmx5Iiwibm9LaW5ldGljXyIsImNlbnRyb2lkIiwidXBkYXRlIiwiYmVnaW4iLCJkaXN0YW5jZSIsImdldEFuZ2xlIiwiY2VudGVycHgiLCJQb2ludGVyIiwiRHJhZ1JvdGF0ZSIsImxhc3RBbmdsZV8iLCJSZW5kZXJCb3giLCJnZW9tZXRyeV8iLCJzdGFydFBpeGVsXyIsImVuZFBpeGVsXyIsInJlbmRlcl8iLCJzdGFydFBpeGVsIiwiZW5kUGl4ZWwiLCJweCIsInNldFBpeGVscyIsImNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkiLCJnZXRHZW9tZXRyeSIsIkRyYWdCb3hFdmVudCIsIkRyYWdCb3giLCJib3hfIiwibWluQXJlYV8iLCJtaW5BcmVhIiwib25Cb3hFbmQiLCJib3hFbmRDb25kaXRpb25fIiwiYm94RW5kQ29uZGl0aW9uIiwiZGVmYXVsdEJveEVuZENvbmRpdGlvbiIsImNvbXBsZXRlQm94IiwiRHJhZ1pvb20iLCJvdXRfIiwib3V0IiwiZmFjdG9yIiwiS2V5Ym9hcmRQYW4iLCJkZWZhdWx0Q29uZGl0aW9uXyIsInBpeGVsRGVsdGFfIiwicGl4ZWxEZWx0YSIsImtleUV2ZW50Iiwia2V5Q29kZSIsIm1hcFVuaXRzRGVsdGEiLCJwYW4iLCJLZXlib2FyZFpvb20iLCJjaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJLaW5ldGljIiwiZGVjYXkiLCJtaW5WZWxvY2l0eSIsImRlbGF5IiwiZGVjYXlfIiwibWluVmVsb2NpdHlfIiwiZGVsYXlfIiwicG9pbnRzXyIsImFuZ2xlXyIsImluaXRpYWxWZWxvY2l0eV8iLCJsYXN0SW5kZXgiLCJmaXJzdEluZGV4IiwiTW9kZSIsIk1vdXNlV2hlZWxab29tIiwidG90YWxEZWx0YV8iLCJsYXN0RGVsdGFfIiwidGltZW91dF8iLCJ0aW1lb3V0IiwidXNlQW5jaG9yXyIsInVzZUFuY2hvciIsImNvbnN0cmFpblJlc29sdXRpb25fIiwibGFzdEFuY2hvcl8iLCJzdGFydFRpbWVfIiwidGltZW91dElkXyIsIm1vZGVfIiwidHJhY2twYWRFdmVudEdhcF8iLCJ0cmFja3BhZFRpbWVvdXRJZF8iLCJkZWx0YVBlclpvb21fIiwiZW5kSW50ZXJhY3Rpb25fIiwid2hlZWxFdmVudCIsImRlbHRhTW9kZSIsIldoZWVsRXZlbnQiLCJET01fREVMVEFfUElYRUwiLCJET01fREVMVEFfTElORSIsInRpbWVMZWZ0IiwiaGFuZGxlV2hlZWxab29tXyIsInNldE1vdXNlQW5jaG9yIiwiUGluY2hSb3RhdGUiLCJwb2ludGVyT3B0aW9ucyIsImFuY2hvcl8iLCJyb3RhdGluZ18iLCJyb3RhdGlvbkRlbHRhXyIsInRocmVzaG9sZF8iLCJ0aHJlc2hvbGQiLCJyb3RhdGlvbkRlbHRhIiwidG91Y2gwIiwidG91Y2gxIiwiUGluY2hab29tIiwibGFzdERpc3RhbmNlXyIsImxhc3RTY2FsZURlbHRhXyIsInNjYWxlRGVsdGEiLCJ6b29tT3B0aW9ucyIsInJvdGF0ZU9wdGlvbnMiLCJhdHRyaWJ1dGlvbiIsImF0dHJpYnV0aW9uT3B0aW9ucyIsImFsdFNoaWZ0RHJhZ1JvdGF0ZSIsImRvdWJsZUNsaWNrWm9vbSIsInpvb21EZWx0YSIsInpvb21EdXJhdGlvbiIsImRyYWdQYW4iLCJwaW5jaFJvdGF0ZSIsInBpbmNoWm9vbSIsImtleWJvYXJkIiwibW91c2VXaGVlbFpvb20iLCJzaGlmdERyYWdab29tIiwiQ29tcG9zaXRlIiwiQ29tcG9zaXRlQ29udHJvbCIsImNoaWxkQ29udHJvbHMiLCJvcHRzIiwic3VwZXIiLCJDb250YWluZXIiLCJzdHlsZUNsYXNzIiwidG9BcnJheSIsInRvb2x0aXBBc1RleHRFbGVtZW50IiwidW5pY29kZSIsImljb25DbGFzc05hbWUiLCJ0b29sdGlwIiwiYnV0dG9uQ29udGFpbmVyRWxlbWVudCIsImNvbnRhaW5lckNsYXNzTmFtZSIsImJ1dHRvbkVsZW1lbnQiLCJmcm9tQ29kZVBvaW50IiwiZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lIiwiYXBwZW5kIiwiZGl2RWxlbWVudCIsInNwYW5FbGVtZW50IiwiZ2V0QnV0dG9uIiwiaWNvbkVsZW1lbnQiLCJUb2dnbGVFdmVudCIsImlzVG9nZ2xlZCIsIlRvZ2dsZUJ1dHRvbiIsImNvbnRhaW5lclRvVG9nZ2xlIiwiX2lzVG9nZ2xlZCIsInVuaWNvZGVUb2dnbGVkIiwiaWNvbkNsYXNzTmFtZVRvZ2dsZWQiLCJwYXJlbnRFbGVtZW50IiwiZ2V0UGFyZW50RWxlbWVudCIsImhhbmRsZU92ZXJsYXlGb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZU92ZXJsYXlPdXRlciIsInNldEJ1dHRvblVuaWNvZGUiLCJzZXRCdXR0b25JY29uQ2xhc3NOYW1lIiwic2VsZWN0b3JzMnRvZ2dsZSIsInRvZ2dsZUNsYXNzTmFtZXMiLCJhbmNlc3RvciIsInNlbGVjdG9yMnRvZ2dsZSIsInRvZ2dsZUVsZW1lbnQiLCJ0b2dnbGVDbGFzc05hbWUiLCJ0b2dnbGVDbGFzcyIsImdldFN0eWxlQ2xhc3MiLCJjcmVhdGVDaGlsZElmTm90RXhpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hpbGQiLCJyZW1vdmVDaGlsZHJlbklmRXhpc3QiLCJvdmVybGF5YWJsZVBhcmVudHMiLCJjbG9zZXN0UGFyZW50IiwiY2xvc2VzdCIsIlBST0pFQ1RJT04iLCJDT09SRElOQVRFX0ZPUk1BVCIsIk1vdXNlUG9zaXRpb24iLCJoYW5kbGVQcm9qZWN0aW9uQ2hhbmdlZF8iLCJjb29yZGluYXRlRm9ybWF0Iiwic2V0Q29vcmRpbmF0ZUZvcm1hdCIsInNldFByb2plY3Rpb24iLCJyZW5kZXJPbk1vdXNlT3V0IiwicGxhY2Vob2xkZXIiLCJ1bmRlZmluZWRIVE1MIiwicGxhY2Vob2xkZXJfIiwicmVuZGVyT25Nb3VzZU91dF8iLCJyZW5kZXJlZEhUTUxfIiwibWFwUHJvamVjdGlvbl8iLCJ0cmFuc2Zvcm1fIiwiZ2V0Q29vcmRpbmF0ZUZvcm1hdCIsImhhbmRsZU1vdXNlTW92ZSIsInVwZGF0ZUhUTUxfIiwiaGFuZGxlTW91c2VPdXQiLCJ2aWV3cG9ydCIsImZvcm1hdCIsImh0bWwiLCJESVNQTEFZX0RQSSIsIkxFQURJTkdfRElHSVRTIiwiT3ZlcnZpZXdNYXBFdmVudCIsIk92ZXJ2aWV3Iiwib3ZlcnZpZXdDb250YWluZXJFbGVtZW50IiwiZmlndXJlRWxlbWVudCIsIlNWR19DT0RFIiwib25PdmVydmlld0ltYWdlQ2xpY2siLCJzdmdFbGVtZW50IiwiYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiU1ZHX1dJRFRIIiwiU1ZHX0hFSUdIVCIsIkJBQ0tHUk9VTkRfQ09MT1IiLCJwcmVwZW5kIiwidXBkYXRlQ3Jvc3NoYWlyIiwiZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQiLCJleGlzdGluZ0VsbXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZXhpc3RpbmdFbG0iLCJmcm9tIiwiZ2V0Q3Jvc3NoYWlyIiwiY3NzQ2xhc3MiLCJsaW5lIiwiY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aCIsIm92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0IiwiY2xpY2tMb25MYXQiLCJnZXRMb25MYXRGcm9tT3ZlcnZpZXdQeCIsIm9QeCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiU2hhcmUiLCJERUZBVUxUX1VOSUNPREUiLCJERUZBVUxUX1RPT0xUSVBfVEVYVCIsIlRpbGUiLCJpbnRlcmltVGlsZSIsInRyYW5zaXRpb25fIiwidHJhbnNpdGlvblN0YXJ0c18iLCJyZWxlYXNlIiwicmVmcmVzaEludGVyaW1DaGFpbiIsImdldFRpbGVDb29yZCIsIkltYWdlQmFzZSIsImdldFBpeGVsUmF0aW8iLCJsaXN0ZW5JbWFnZSIsImxvYWRIYW5kbGVyIiwiZXJyb3JIYW5kbGVyIiwiaW1nIiwicHJvbWlzZSIsImxpc3RlbmluZ18xIiwidGhlbiIsImNhdGNoIiwiSW1hZ2VXcmFwcGVyIiwiaW1hZ2VMb2FkRnVuY3Rpb24iLCJzcmNfIiwiaW1hZ2VfIiwidW5saXN0ZW5fIiwiaW1hZ2VMb2FkRnVuY3Rpb25fIiwiaGFuZGxlSW1hZ2VFcnJvcl8iLCJ1bmxpc3RlbkltYWdlXyIsImhhbmRsZUltYWdlTG9hZF8iLCJzZXRJbWFnZSIsIkltYWdlVGlsZSIsInRpbGVMb2FkRnVuY3Rpb24iLCJjcm9zc09yaWdpbl8iLCJ0aWxlTG9hZEZ1bmN0aW9uXyIsImN0eCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsIlRyaWFuZ3VsYXRpb24iLCJ0YXJnZXRQcm9qIiwidGFyZ2V0RXh0ZW50IiwibWF4U291cmNlRXh0ZW50IiwiZXJyb3JUaHJlc2hvbGQiLCJvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uIiwic291cmNlUHJval8iLCJ0YXJnZXRQcm9qXyIsInRyYW5zZm9ybUludkNhY2hlIiwidHJhbnNmb3JtSW52IiwidHJhbnNmb3JtSW52XyIsIm1heFNvdXJjZUV4dGVudF8iLCJlcnJvclRocmVzaG9sZFNxdWFyZWRfIiwidHJpYW5nbGVzXyIsIndyYXBzWEluU291cmNlXyIsImNhbldyYXBYSW5Tb3VyY2VfIiwic291cmNlV29ybGRXaWR0aF8iLCJ0YXJnZXRXb3JsZFdpZHRoXyIsImRlc3RpbmF0aW9uVG9wTGVmdCIsImRlc3RpbmF0aW9uVG9wUmlnaHQiLCJkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21MZWZ0Iiwic291cmNlVG9wTGVmdCIsInNvdXJjZVRvcFJpZ2h0Iiwic291cmNlQm90dG9tUmlnaHQiLCJzb3VyY2VCb3R0b21MZWZ0IiwibWF4U3ViZGl2aXNpb24iLCJhZGRRdWFkXyIsImxlZnRCb3VuZF8xIiwidHJpYW5nbGUiLCJuZXdUcmlhbmdsZSIsImFkZFRyaWFuZ2xlXyIsImFTcmMiLCJiU3JjIiwiY1NyYyIsImRTcmMiLCJzb3VyY2VRdWFkRXh0ZW50Iiwic291cmNlQ292ZXJhZ2VYIiwic291cmNlV29ybGRXaWR0aCIsIndyYXBzWCIsIm5lZWRzU3ViZGl2aXNpb24iLCJpc0Zpbml0ZSIsImlzTm90RmluaXRlIiwiY2VudGVyU3JjIiwiYmMiLCJiY1NyYyIsImRhIiwiZGFTcmMiLCJhYiIsImFiU3JjIiwiY2QiLCJjZFNyYyIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudCIsImdldFRyaWFuZ2xlcyIsImJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyIsIklNQUdFX1NNT09USElOR19ESVNBQkxFRCIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsIm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwiZHJhd1Rlc3RUcmlhbmdsZSIsInUxIiwidjEiLCJ1MiIsInYyIiwiY2xvc2VQYXRoIiwidmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmciLCJjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0TWV0ZXJzUGVyVW5pdCIsInNvdXJjZU1ldGVyc1BlclVuaXQiLCJzb3VyY2VFeHRlbnQiLCJjb21wZW5zYXRpb25GYWN0b3IiLCJSZXByb2pUaWxlIiwic291cmNlVGlsZUdyaWQiLCJ0YXJnZXRUaWxlR3JpZCIsIndyYXBwZWRUaWxlQ29vcmQiLCJnZXRUaWxlRnVuY3Rpb24iLCJvcHRfZXJyb3JUaHJlc2hvbGQiLCJvcHRfcmVuZGVyRWRnZXMiLCJvcHRfY29udGV4dE9wdGlvbnMiLCJyZW5kZXJFZGdlc18iLCJjb250ZXh0T3B0aW9uc18iLCJndXR0ZXJfIiwiY2FudmFzXyIsInNvdXJjZVRpbGVHcmlkXyIsInRhcmdldFRpbGVHcmlkXyIsIndyYXBwZWRUaWxlQ29vcmRfIiwic291cmNlVGlsZXNfIiwic291cmNlc0xpc3RlbmVyS2V5c18iLCJzb3VyY2VaXyIsIm1heFRhcmdldEV4dGVudCIsImxpbWl0ZWRUYXJnZXRFeHRlbnQiLCJzb3VyY2VQcm9qRXh0ZW50IiwiY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiIsImVycm9yVGhyZXNob2xkSW5QaXhlbHMiLCJ0cmlhbmd1bGF0aW9uXyIsInNvdXJjZVJhbmdlIiwic3JjWCIsInNyY1kiLCJyZXByb2plY3RfIiwic291cmNlcyIsImdldFRpbGVTaXplIiwidHJpYW5ndWxhdGlvbiIsInBpeGVsUm91bmQiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJzb3VyY2VEYXRhRXh0ZW50IiwiY2FudmFzV2lkdGhJblVuaXRzIiwiY2FudmFzSGVpZ2h0SW5Vbml0cyIsInN0aXRjaENvbnRleHQiLCJzdGl0Y2hTY2FsZSIsInhQb3MiLCJ5UG9zIiwic3JjV2lkdGgiLCJzcmNIZWlnaHQiLCJ0YXJnZXRUb3BMZWZ0IiwidTAiLCJ2MCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WSIsImFmZmluZUNvZWZzIiwibWF4Um93IiwibWF4RWwiLCJhYnNWYWx1ZSIsImNvZWYiLCJsIiwic29sdmVMaW5lYXJTeXN0ZW0iLCJpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nIiwidWQiLCJ2ZCIsInN0ZXAiLCJzdGVwcyIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwibGVmdFRvTG9hZF8xIiwic291cmNlTGlzdGVuS2V5XzEiLCJ1bmxpc3RlblNvdXJjZXNfIiwiTFJVQ2FjaGUiLCJvcHRfaGlnaFdhdGVyTWFyayIsImhpZ2hXYXRlck1hcmsiLCJjb3VudF8iLCJlbnRyaWVzXyIsIm9sZGVzdF8iLCJuZXdlc3RfIiwiY29udGFpbnNLZXkiLCJlbnRyeSIsInZhbHVlXyIsImtleV8iLCJuZXdlciIsIm9sZGVyIiwicGVla0xhc3QiLCJwZWVrTGFzdEtleSIsInBlZWtGaXJzdEtleSIsIm9wdF90aWxlQ29vcmQiLCJnZXRLZXlaWFkiLCJUaWxlQ2FjaGUiLCJwcnVuZUV4Y2VwdE5ld2VzdFoiLCJhZGFwdEF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uTGlrZSIsIlNvdXJjZSIsImF0dHJpYnV0aW9uc18iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV8iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsIndyYXBYXyIsIndyYXBYIiwicmVmcmVzaCIsInNldEF0dHJpYnV0aW9ucyIsInRtcFRpbGVDb29yZCIsIlRpbGVHcmlkIiwiY29tcGFyZSIsImV2ZXJ5IiwiY3VycmVudFZhbCIsInJlcyIsIm9yaWdpbnMiLCJvcmlnaW5fIiwib3JpZ2luIiwib3JpZ2luc18iLCJ0aWxlU2l6ZXNfIiwidGlsZVNpemVzIiwidGlsZVNpemVfIiwidGlsZVNpemUiLCJmdWxsVGlsZVJhbmdlc18iLCJ0bXBTaXplXyIsInRtcEV4dGVudF8iLCJzaXplcyIsInJlc3RyaWN0ZWRUaWxlUmFuZ2UiLCJjYWxjdWxhdGVUaWxlUmFuZ2VzXyIsImZvckVhY2hUaWxlQ29vcmQiLCJvcHRfdGlsZVJhbmdlIiwidGlsZUNvb3JkRXh0ZW50IiwiZ2V0T3JpZ2luIiwiZ2V0VGlsZVJhbmdlRm9yVGlsZUNvb3JkQW5kWiIsInRpbGVDb29yZFoiLCJ0aWxlQ29vcmRYIiwidGlsZUNvb3JkWSIsImdldFRpbGVSYW5nZUV4dGVudCIsImdldFRpbGVDb29yZEZvclhZQW5kWl8iLCJnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFJlc29sdXRpb24iLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fIiwicmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSIsImFkanVzdFgiLCJhZGp1c3RZIiwieEZyb21PcmlnaW4iLCJ5RnJvbU9yaWdpbiIsImdldFRpbGVDb29yZFJlc29sdXRpb24iLCJnZXRGdWxsVGlsZVJhbmdlIiwiZnVsbFRpbGVSYW5nZXMiLCJnZXRGb3JQcm9qZWN0aW9uIiwib3B0X21heFpvb20iLCJvcHRfdGlsZVNpemUiLCJvcHRfY29ybmVyIiwicmVzb2x1dGlvbnNGcm9tRXh0ZW50IiwiY3JlYXRlRm9yRXh0ZW50IiwiZXh0ZW50RnJvbVByb2plY3Rpb24iLCJjcmVhdGVGb3JQcm9qZWN0aW9uIiwib3B0X21heFJlc29sdXRpb24iLCJoYWxmIiwiVGlsZVNvdXJjZSIsIm9wYXF1ZV8iLCJvcGFxdWUiLCJ0aWxlUGl4ZWxSYXRpb18iLCJ0aWxlQ2FjaGUiLCJjYWNoZVNpemUiLCJ0bXBTaXplIiwidGlsZU9wdGlvbnMiLCJnZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwibG9hZGVkIiwic2V0S2V5IiwiZ2V0VGlsZUdyaWQiLCJnZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24iLCJvcHRfcHJvamVjdGlvbiIsIndpdGhpbkV4dGVudEFuZFoiLCJUaWxlU291cmNlRXZlbnQiLCJjcmVhdGVGcm9tVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsInpSZWdFeCIsInhSZWdFeCIsInlSZWdFeCIsImRhc2hZUmVnRXgiLCJyYW5nZSIsIlVybFRpbGUiLCJnZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8iLCJ0aWxlVXJsRnVuY3Rpb24iLCJ1cmxzIiwic2V0VXJscyIsInVybCIsInNldFVybCIsInRpbGVMb2FkaW5nS2V5c18iLCJnZXRUaWxlTG9hZEZ1bmN0aW9uIiwiZ2V0VGlsZVVybEZ1bmN0aW9uIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRVcmxzIiwic2V0VGlsZUxvYWRGdW5jdGlvbiIsInNldFRpbGVVcmxGdW5jdGlvbiIsIm1hdGNoIiwiZXhlYyIsInN0YXJ0Q2hhckNvZGUiLCJzdG9wQ2hhckNvZGUiLCJmcm9tQ2hhckNvZGUiLCJzdG9wXzEiLCJleHBhbmRVcmwiLCJ0ZW1wbGF0ZXMiLCJ0aWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnMiLCJjcmVhdGVGcm9tVGVtcGxhdGVzIiwiZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24iLCJpbWFnZVRpbGUiLCJUaWxlSW1hZ2UiLCJ0aWxlQ2xhc3MiLCJ0aWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwidGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJpbWFnZVNtb290aGluZyIsInJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyIsInVzZWRUaWxlQ2FjaGUiLCJnZXRHdXR0ZXIiLCJKU09OIiwic3RyaW5naWZ5IiwidGhpc1Byb2oiLCJwcm9qS2V5IiwiY3JlYXRlVGlsZV8iLCJ1cmxUaWxlQ29vcmQiLCJ0aWxlVXJsIiwibmV3VGlsZSIsImdldFRpbGVJbnRlcm5hbCIsInNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzIiwic2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZWdyaWQiLCJwcm9qIiwiWFlaIiwieHl6T3B0aW9ucyIsImdyaWRPcHRpb25zIiwiY3JlYXRlWFlaIiwiVkFSSUFOVFMiLCJnZW9sYW5kYmFzZW1hcCIsImJtYXBncmF1IiwiYm1hcG9ydGhvZm90bzMwY20iLCJibWFwZ2VsYWVuZGUiLCJibWFwb2JlcmZsYWVjaGUiLCJibWFwb3ZlcmxheSIsIm91dHB1dFRleHRhcmVhIiwiY3VzdG9tQnV0dG9uMUN0cmwiLCJjdXN0b21CdXR0b24yQ3RybCIsInZhcmlhbnQiLCJfbWluV2lkdGgiLCJtaW5XaWR0aCIsInJlbmRlcmVkVmlzaWJsZSIsInJlbmRlcmVkV2lkdGgiLCJyZW5kZXJlZFNWRyIsImRwaSIsInVwZGF0ZUVsZW1lbnQiLCJwb2ludFJlc29sdXRpb25Vbml0cyIsIm5vbWluYWxDb3VudCIsInN1ZmZpeCIsImRlY2ltYWxDb3VudCIsImRlY2ltYWwiLCJnZW5lcmF0ZWRTVkciLCJnZXRHZW5lcmF0ZWRTVkciLCJ0b0ZpeGVkIiwidHh0Iiwic3ZnIiwicmVjdCIsInRleHQiLCJvcHRfZnJhY3Rpb25EaWdpdHMiLCJ0b2dnbGVCdXR0b24iLCJ2ZXJ0aWNhbENvbnRyb2xzIiwiaG9yaXpvbnRhbENvbnRyb2xzIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUEyQ0EsRUFBTUMsR0FDMUIsaUJBQVpDLFNBQTBDLGlCQUFYQyxPQUN4Q0EsT0FBT0QsUUFBVUQsSUFDUSxtQkFBWEcsUUFBeUJBLE9BQU9DLElBQzlDRCxPQUFPLEdBQUlILEdBQ2UsaUJBQVpDLFFBQ2RBLFFBQVEsYUFBZUQsSUFFdkJELEVBQUssYUFBZUMsSUFSdEIsQ0FTR0ssTUFBTSxXQUNULE0sbUJDVEEsSSxLQ0F3QixDQUFDSixJQUNILG9CQUFYSyxRQUEwQkEsT0FBT0MsYUFDMUNDLE9BQU9DLGVBQWVSLEVBQVNLLE9BQU9DLFlBQWEsQ0FBRUcsTUFBTyxXQUU3REYsT0FBT0MsZUFBZVIsRUFBUyxhQUFjLENBQUVTLE9BQU8sSyxJQytEdkQsUUF2RCtCLFdBSTNCLFNBQVNDLEVBQVVDLEdBSWZDLEtBQUtDLG1CQUlMRCxLQUFLRSxpQkFNTEYsS0FBS0QsS0FBT0EsRUFNWkMsS0FBS0csT0FBUyxLQWlCbEIsT0FWQUwsRUFBVU0sVUFBVUMsZUFBaUIsV0FDakNMLEtBQUtFLGtCQUFtQixHQU01QkosRUFBVU0sVUFBVUUsZ0JBQWtCLFdBQ2xDTixLQUFLQyxvQkFBcUIsR0FFdkJILEVBekNtQixHQ1A5QixFQU1vQixpQkNvQnBCLEVBekJnQyxXQUM1QixTQUFTUyxJQU1MUCxLQUFLUSxVQUFXLEVBZ0JwQixPQVhBRCxFQUFXSCxVQUFVSyxRQUFVLFdBQ3RCVCxLQUFLUSxXQUNOUixLQUFLUSxVQUFXLEVBQ2hCUixLQUFLVSxvQkFPYkgsRUFBV0gsVUFBVU0sZ0JBQWtCLGFBQ2hDSCxFQXZCb0IsR0NvQ3hCLFNBQVNJLEVBQTBCQyxFQUFHQyxHQUN6QyxPQUFPRCxFQUFJQyxFQUFJLEVBQUlELEVBQUlDLEdBQUssRUFBSSxFQWlDN0IsU0FBU0MsRUFBa0JDLEVBQUtaLEVBQVFhLEdBQzNDLElBQUlDLEVBQUlGLEVBQUlHLE9BQ1osR0FBSUgsRUFBSSxJQUFNWixFQUNWLE9BQU8sRUFFTixHQUFJQSxHQUFVWSxFQUFJRSxFQUFJLEdBQ3ZCLE9BQU9BLEVBQUksRUFHWCxJQUFJRSxPQUFJLEVBQ1IsR0FBSUgsRUFBWSxHQUNaLElBQUtHLEVBQUksRUFBR0EsRUFBSUYsSUFBS0UsRUFDakIsR0FBSUosRUFBSUksR0FBS2hCLEVBQ1QsT0FBT2dCLEVBQUksT0FJbEIsR0FBSUgsRUFBWSxHQUNqQixJQUFLRyxFQUFJLEVBQUdBLEVBQUlGLElBQUtFLEVBQ2pCLEdBQUlKLEVBQUlJLElBQU1oQixFQUNWLE9BQU9nQixPQUtmLElBQUtBLEVBQUksRUFBR0EsRUFBSUYsSUFBS0UsRUFBRyxDQUNwQixHQUFJSixFQUFJSSxJQUFNaEIsRUFDVixPQUFPZ0IsRUFFTixHQUFJSixFQUFJSSxHQUFLaEIsRUFDZCxNQUF5QixtQkFBZGEsRUFDSEEsRUFBVWIsRUFBUVksRUFBSUksRUFBSSxHQUFJSixFQUFJSSxJQUFNLEVBQ2pDQSxFQUFJLEVBR0pBLEVBR05KLEVBQUlJLEVBQUksR0FBS2hCLEVBQVNBLEVBQVNZLEVBQUlJLEdBQ2pDQSxFQUFJLEVBR0pBLEVBS3ZCLE9BQU9GLEVBQUksRUFpRVosU0FBU0csRUFBT0MsRUFBTUMsR0FDekIsSUFBSUMsRUFBT0YsRUFBS0gsT0FDaEIsR0FBSUssSUFBU0QsRUFBS0osT0FDZCxPQUFPLEVBRVgsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlJLEVBQU1KLElBQ3RCLEdBQUlFLEVBQUtGLEtBQU9HLEVBQUtILEdBQ2pCLE9BQU8sRUFHZixPQUFPLEVDL0xKLFNBQVNLLElBQ1osT0FBTyxFQU1KLFNBQVMsSUFDWixPQUFPLEVBT0osU0FBU0MsS0NYVCxJQUFJLEVBQWtDLG1CQUFsQjlCLE9BQU8rQixPQUM1Qi9CLE9BQU8rQixPQUNQLFNBQVV2QixFQUFRd0IsR0FDaEIsR0FBSXhCLFFBQ0EsTUFBTSxJQUFJeUIsVUFBVSw4Q0FHeEIsSUFEQSxJQUFJQyxFQUFTbEMsT0FBT1EsR0FDWGdCLEVBQUksRUFBR1csRUFBS0MsVUFBVWIsT0FBUUMsRUFBSVcsSUFBTVgsRUFBRyxDQUNoRCxJQUFJYSxFQUFTRCxVQUFVWixHQUN2QixHQUFJYSxRQUNBLElBQUssSUFBSUMsS0FBT0QsRUFDUkEsRUFBT0UsZUFBZUQsS0FDdEJKLEVBQU9JLEdBQU9ELEVBQU9DLElBS3JDLE9BQU9KLEdBTVIsU0FBU00sRUFBTUMsR0FDbEIsSUFBSyxJQUFJQyxLQUFZRCxTQUNWQSxFQUFPQyxHQVdmLElDL0NDQyxFRCtDR0MsRUFBcUMsbUJBQWxCNUMsT0FBTzZDLE9BQy9CN0MsT0FBTzZDLE9BQ1AsU0FBVUosR0FDUixJQUFJSSxFQUFTLEdBQ2IsSUFBSyxJQUFJSCxLQUFZRCxFQUNqQkksRUFBT0MsS0FBS0wsRUFBT0MsSUFFdkIsT0FBT0csR0N2RFhFLEdBQ0lKLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRXJCLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLEtBZ0x2RixRQXBKNEIsU0FBVUcsR0FLbEMsU0FBU0MsRUFBT0MsR0FDWixJQUFJQyxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FxQmpDLE9BaEJBd0QsRUFBTUMsYUFBZUYsRUFLckJDLEVBQU1FLGlCQUFtQixLQUt6QkYsRUFBTUcsYUFBZSxLQUtyQkgsRUFBTUksV0FBYSxLQUNaSixFQXVIWCxPQWpKQWQsRUFBVVksRUFBUUQsR0FnQ2xCQyxFQUFPbEQsVUFBVXlELGlCQUFtQixTQUFVOUQsRUFBTStELEdBQ2hELEdBQUsvRCxHQUFTK0QsRUFBZCxDQUdBLElBQUlDLEVBQVkvRCxLQUFLNEQsYUFBZTVELEtBQUs0RCxXQUFhLElBQ2xESSxFQUFtQkQsRUFBVWhFLEtBQVVnRSxFQUFVaEUsR0FBUSxLQUNqQixJQUF4Q2lFLEVBQWlCQyxRQUFRSCxJQUN6QkUsRUFBaUJ2QixLQUFLcUIsS0FhOUJSLEVBQU9sRCxVQUFVOEQsY0FBZ0IsU0FBVUMsR0FFdkMsSUFBSUMsRUFBdUIsaUJBQVZELEVBQXFCLElBQUksRUFBTUEsR0FBU0EsRUFDckRwRSxFQUFPcUUsRUFBSXJFLEtBQ1ZxRSxFQUFJakUsU0FDTGlFLEVBQUlqRSxPQUFTSCxLQUFLeUQsY0FBZ0J6RCxNQUV0QyxJQUNJcUUsRUFEQU4sRUFBWS9ELEtBQUs0RCxZQUFjNUQsS0FBSzRELFdBQVc3RCxHQUVuRCxHQUFJZ0UsRUFBVyxDQUNYLElBQUlPLEVBQWN0RSxLQUFLMkQsZUFBaUIzRCxLQUFLMkQsYUFBZSxJQUN4RFksRUFBa0J2RSxLQUFLMEQsbUJBQXFCMUQsS0FBSzBELGlCQUFtQixJQUNsRTNELEtBQVF1RSxJQUNWQSxFQUFZdkUsR0FBUSxFQUNwQndFLEVBQWdCeEUsR0FBUSxLQUUxQnVFLEVBQVl2RSxHQUNkLElBQUssSUFBSW9CLEVBQUksRUFBR1csRUFBS2lDLEVBQVU3QyxPQUFRQyxFQUFJVyxJQUFNWCxFQU83QyxJQUFrQixLQUxka0QsRUFEQSxnQkFBaUJOLEVBQVU1QyxHQUN1QzRDLEVBQVU1QyxHQUFJcUQsWUFBWUosR0FHeEJMLEVBQVU1QyxHQUFJNkIsS0FBS2hELEtBQU1vRSxLQUV0RUEsRUFBSW5FLG1CQUFvQixDQUMvQ29FLEdBQVksRUFDWixNQUlSLEtBREVDLEVBQVl2RSxHQUNZLElBQXRCdUUsRUFBWXZFLEdBQWEsQ0FDekIsSUFBSTBFLEVBQUtGLEVBQWdCeEUsR0FFekIsV0FET3dFLEVBQWdCeEUsR0FDaEIwRSxLQUNIekUsS0FBSzBFLG9CQUFvQjNFLEVBQU0wQixVQUU1QjZDLEVBQVl2RSxHQUV2QixPQUFPc0UsSUFNZmYsRUFBT2xELFVBQVVNLGdCQUFrQixXQUMvQlYsS0FBSzRELFlBQWN6QixFQUFNbkMsS0FBSzRELGFBU2xDTixFQUFPbEQsVUFBVXVFLGFBQWUsU0FBVTVFLEdBQ3RDLE9BQVFDLEtBQUs0RCxZQUFjNUQsS0FBSzRELFdBQVc3RCxTQUFVNkUsR0FPekR0QixFQUFPbEQsVUFBVXlFLFlBQWMsU0FBVUMsR0FDckMsUUFBSzlFLEtBQUs0RCxhQUdIa0IsRUFDREEsS0FBWTlFLEtBQUs0RCxXQUNqQmpFLE9BQU9vRixLQUFLL0UsS0FBSzRELFlBQVkxQyxPQUFTLElBTWhEb0MsRUFBT2xELFVBQVVzRSxvQkFBc0IsU0FBVTNFLEVBQU0rRCxHQUNuRCxJQUFJQyxFQUFZL0QsS0FBSzRELFlBQWM1RCxLQUFLNEQsV0FBVzdELEdBQ25ELEdBQUlnRSxFQUFXLENBQ1gsSUFBSWlCLEVBQVFqQixFQUFVRSxRQUFRSCxJQUNmLElBQVhrQixJQUNJaEYsS0FBSzBELGtCQUFvQjNELEtBQVFDLEtBQUswRCxrQkFFdENLLEVBQVVpQixHQUFTdkQsSUFDakJ6QixLQUFLMEQsaUJBQWlCM0QsS0FHeEJnRSxFQUFVa0IsT0FBT0QsRUFBTyxHQUNDLElBQXJCakIsRUFBVTdDLGVBQ0hsQixLQUFLNEQsV0FBVzdELE9BTXBDdUQsRUFsSmdCLENBbUp6QixHQ3BMRixFQU1ZLFNBTlosRUFlaUIsY0FmakIsRUFnQlcsUUFoQlgsRUFzQmEsVUF0QmIsRUF1QmMsV0F2QmQsRUF5QlksU0F6QlosRUEwQmUsWUExQmYsRUEyQlcsUUNPSixTQUFTNEIsRUFBTy9FLEVBQVFKLEVBQU0rRCxFQUFVcUIsRUFBVUMsR0FJckQsR0FISUQsR0FBWUEsSUFBYWhGLElBQ3pCMkQsRUFBV0EsRUFBU3VCLEtBQUtGLElBRXpCQyxFQUFVLENBQ1YsSUFBSUUsRUFBcUJ4QixFQUN6QkEsRUFBVyxXQUNQM0QsRUFBT3VFLG9CQUFvQjNFLEVBQU0rRCxHQUNqQ3dCLEVBQW1CQyxNQUFNdkYsS0FBTStCLFlBR3ZDLElBQUl5RCxFQUFZLENBQ1pyRixPQUFRQSxFQUNSSixLQUFNQSxFQUNOK0QsU0FBVUEsR0FHZCxPQURBM0QsRUFBTzBELGlCQUFpQjlELEVBQU0rRCxHQUN2QjBCLEVBc0JKLFNBQVNDLEVBQVd0RixFQUFRSixFQUFNK0QsRUFBVXFCLEdBQy9DLE9BQU9ELEVBQU8vRSxFQUFRSixFQUFNK0QsRUFBVXFCLEdBQVUsR0FXN0MsU0FBU08sRUFBY3pELEdBQ3RCQSxHQUFPQSxFQUFJOUIsU0FDWDhCLEVBQUk5QixPQUFPdUUsb0JBQW9CekMsRUFBSWxDLEtBQU1rQyxFQUFJNkIsVUFDN0MzQixFQUFNRixJQy9GZCxJQUFJLEVBQXdDLFdBQ3hDLElBQUlLLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0FpRHhDeUMsRUFBNEIsU0FBVXRDLEdBRXRDLFNBQVNzQyxJQUNMLElBQUluQyxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FrQmpDLE9BZEF3RCxFQUFNb0MsR0FBS3BDLEVBQU1xQyxXQUlqQnJDLEVBQU1zQyxLQUFPdEMsRUFBTXVDLGFBSW5CdkMsRUFBTXdDLEdBQUt4QyxFQUFNeUMsV0FLakJ6QyxFQUFNMEMsVUFBWSxFQUNYMUMsRUErRVgsT0FuR0EsRUFBVW1DLEVBQVl0QyxHQTBCdEJzQyxFQUFXdkYsVUFBVStGLFFBQVUsYUFDekJuRyxLQUFLa0csVUFDUGxHLEtBQUtrRSxjQUFjLElBUXZCeUIsRUFBV3ZGLFVBQVVnRyxZQUFjLFdBQy9CLE9BQU9wRyxLQUFLa0csV0FRaEJQLEVBQVd2RixVQUFVeUYsV0FBYSxTQUFVOUYsRUFBTStELEdBQzlDLEdBQUloQixNQUFNdUQsUUFBUXRHLEdBQU8sQ0FHckIsSUFGQSxJQUFJdUcsRUFBTXZHLEVBQUttQixPQUNYNkQsRUFBTyxJQUFJakMsTUFBTXdELEdBQ1puRixFQUFJLEVBQUdBLEVBQUltRixJQUFPbkYsRUFDdkI0RCxFQUFLNUQsR0FBSytELEVBQU9sRixLQUFNRCxFQUFLb0IsR0FBSTJDLEdBRXBDLE9BQU9pQixFQUdQLE9BQU9HLEVBQU9sRixLQUE0QixFQUFROEQsSUFTMUQ2QixFQUFXdkYsVUFBVTJGLGFBQWUsU0FBVWhHLEVBQU0rRCxHQUNoRCxJQUFJN0IsRUFDSixHQUFJYSxNQUFNdUQsUUFBUXRHLEdBQU8sQ0FDckIsSUFBSXVHLEVBQU12RyxFQUFLbUIsT0FDZmUsRUFBTSxJQUFJYSxNQUFNd0QsR0FDaEIsSUFBSyxJQUFJbkYsRUFBSSxFQUFHQSxFQUFJbUYsSUFBT25GLEVBQ3ZCYyxFQUFJZCxHQUFLc0UsRUFBV3pGLEtBQU1ELEVBQUtvQixHQUFJMkMsUUFJdkM3QixFQUFNd0QsRUFBV3pGLEtBQTRCLEVBQVE4RCxHQUd6RCxPQURzQixFQUFXeUMsT0FBU3RFLEVBQ25DQSxHQVFYMEQsRUFBV3ZGLFVBQVU2RixXQUFhLFNBQVVsRyxFQUFNK0QsR0FDOUMsSUFBSTdCLEVBQTRCLEVBQVdzRSxPQUMzQyxHQUFJdEUsR0FrREwsU0FBaUJBLEdBQ3BCLEdBQUlhLE1BQU11RCxRQUFRcEUsR0FDZCxJQUFLLElBQUlkLEVBQUksRUFBR1csRUFBS0csRUFBSWYsT0FBUUMsRUFBSVcsSUFBTVgsRUFDdkN1RSxFQUFjekQsRUFBSWQsU0FJdEJ1RSxFQUE2RCxHQXhEekRjLENBQVF2RSxRQUVQLEdBQUlhLE1BQU11RCxRQUFRdEcsR0FDbkIsSUFBSyxJQUFJb0IsRUFBSSxFQUFHVyxFQUFLL0IsRUFBS21CLE9BQVFDLEVBQUlXLElBQU1YLEVBQ3hDbkIsS0FBSzBFLG9CQUFvQjNFLEVBQUtvQixHQUFJMkMsUUFJdEM5RCxLQUFLMEUsb0JBQW9CM0UsRUFBTStELElBR2hDNkIsRUFwR29CLENBcUc3QixHQVdGQSxFQUFXdkYsVUFBVXdGLEdBV3JCRCxFQUFXdkYsVUFBVTBGLEtBUXJCSCxFQUFXdkYsVUFBVTRGLEdBaUJyQixVQy9MTyxTQUFTLElBQ1osT0FBeUIsV0FDckIsTUFBTSxJQUFJUyxNQUFNLGtDQURJLEdBUzVCLElBQUlDLEVBQWMsRUFVWCxTQUFTQyxFQUFPQyxHQUNuQixPQUFPQSxFQUFJQyxTQUFXRCxFQUFJQyxPQUFTNUQsU0FBU3lELElBTXpDLElDakNILEVBQXdDLFdBQ3hDLElBQUlwRSxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBMkJ4QzRELEVBQTZCLFNBQVV6RCxHQU92QyxTQUFTeUQsRUFBWS9HLEVBQU1rQyxFQUFLOEUsR0FDNUIsSUFBSXZELEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNRCxJQUFTQyxLQWN2QyxPQVJBd0QsRUFBTXZCLElBQU1BLEVBT1p1QixFQUFNdUQsU0FBV0EsRUFDVnZELEVBRVgsT0F2QkEsRUFBVXNELEVBQWF6RCxHQXVCaEJ5RCxFQXhCcUIsQ0F5QjlCLEdBZ05GLFFBN0pnQyxTQUFVekQsR0FLdEMsU0FBUzJELEVBQVdDLEdBQ2hCLElBQUl6RCxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0EwQmpDLE9BdEJBd0QsRUFBTW9DLEdBSU5wQyxFQUFNc0MsS0FJTnRDLEVBQU13QyxHQUtOVyxFQUFPbkQsR0FLUEEsRUFBTTBELFFBQVUsVUFDR3RDLElBQWZxQyxHQUNBekQsRUFBTTJELGNBQWNGLEdBRWpCekQsRUEySFgsT0ExSkEsRUFBVXdELEVBQVkzRCxHQXVDdEIyRCxFQUFXNUcsVUFBVWdILElBQU0sU0FBVW5GLEdBQ2pDLElBQUlwQyxFQUlKLE9BSElHLEtBQUtrSCxTQUFXbEgsS0FBS2tILFFBQVFoRixlQUFlRCxLQUM1Q3BDLEVBQVFHLEtBQUtrSCxRQUFRakYsSUFFbEJwQyxHQU9YbUgsRUFBVzVHLFVBQVVpSCxRQUFVLFdBQzNCLE9BQVFySCxLQUFLa0gsU0FBV3ZILE9BQU9vRixLQUFLL0UsS0FBS2tILFVBQWEsSUFPMURGLEVBQVc1RyxVQUFVa0gsY0FBZ0IsV0FDakMsT0FBUXRILEtBQUtrSCxTQUFXLEVBQU8sR0FBSWxILEtBQUtrSCxVQUFhLElBS3pERixFQUFXNUcsVUFBVW1ILGNBQWdCLFdBQ2pDLFFBQVN2SCxLQUFLa0gsU0FNbEJGLEVBQVc1RyxVQUFVb0gsT0FBUyxTQUFVdkYsRUFBSzhFLEdBQ3pDLElBQUlVLEVBQ0pBLEVBQVksVUFBWXhGLEVBQ3hCakMsS0FBS2tFLGNBQWMsSUFBSTRDLEVBQVlXLEVBQVd4RixFQUFLOEUsSUFDbkRVLEVBQVlDLEVBQ1oxSCxLQUFLa0UsY0FBYyxJQUFJNEMsRUFBWVcsRUFBV3hGLEVBQUs4RSxLQU12REMsRUFBVzVHLFVBQVV1SCxrQkFBb0IsU0FBVTFGLEVBQUs2QixHQUNwRDlELEtBQUs2RCxpQkFBaUIsVUFBWTVCLEVBQUs2QixJQU0zQ2tELEVBQVc1RyxVQUFVd0gscUJBQXVCLFNBQVUzRixFQUFLNkIsR0FDdkQ5RCxLQUFLMEUsb0JBQW9CLFVBQVl6QyxFQUFLNkIsSUFTOUNrRCxFQUFXNUcsVUFBVXlILElBQU0sU0FBVTVGLEVBQUtwQyxFQUFPaUksR0FDN0MsSUFBSXRGLEVBQVN4QyxLQUFLa0gsVUFBWWxILEtBQUtrSCxRQUFVLElBQzdDLEdBQUlZLEVBQ0F0RixFQUFPUCxHQUFPcEMsTUFFYixDQUNELElBQUlrSCxFQUFXdkUsRUFBT1AsR0FDdEJPLEVBQU9QLEdBQU9wQyxFQUNWa0gsSUFBYWxILEdBQ2JHLEtBQUt3SCxPQUFPdkYsRUFBSzhFLEtBVzdCQyxFQUFXNUcsVUFBVStHLGNBQWdCLFNBQVUzRSxFQUFRc0YsR0FDbkQsSUFBSyxJQUFJN0YsS0FBT08sRUFDWnhDLEtBQUs2SCxJQUFJNUYsRUFBS08sRUFBT1AsR0FBTTZGLElBUW5DZCxFQUFXNUcsVUFBVTJILGdCQUFrQixTQUFVL0YsR0FDeENBLEVBQU9rRixTQUdaLEVBQU9sSCxLQUFLa0gsVUFBWWxILEtBQUtrSCxRQUFVLElBQUtsRixFQUFPa0YsVUFRdkRGLEVBQVc1RyxVQUFVNEgsTUFBUSxTQUFVL0YsRUFBSzZGLEdBQ3hDLEdBQUk5SCxLQUFLa0gsU0FBV2pGLEtBQU9qQyxLQUFLa0gsUUFBUyxDQUNyQyxJQUFJSCxFQUFXL0csS0FBS2tILFFBQVFqRixVQUNyQmpDLEtBQUtrSCxRQUFRakYsR04zTHpCLFNBQWlCRyxHQUNwQixJQUFJQyxFQUNKLElBQUtBLEtBQVlELEVBQ2IsT0FBTyxFQUVYLE9BQVFDLEVNdUxJLENBQVFyQyxLQUFLa0gsV0FDYmxILEtBQUtrSCxRQUFVLE1BRWRZLEdBQ0Q5SCxLQUFLd0gsT0FBT3ZGLEVBQUs4RSxLQUl0QkMsRUEzSm9CLENBNEo3QixHQzdQRixFQUNhLFVBRGIsRUFFYSxVQUZiLEVBR1ksU0FIWixFQUlhLFNBSmIsRUFLb0IsZ0JBTHBCLEVBTW9CLGdCQU5wQixFQU9jLFVBUGQsRUFRYyxVQVJkLEVBU1ksU0NmWixJQUFJLEVBQXdDLFdBQ3hDLElBQUkxRSxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBeUQ1QyxRQWpDb0MsU0FBVUcsR0FLMUMsU0FBUzRFLEVBQWVDLEdBQ3BCLElBQUkxRSxFQUFReEQsS0FFUm1JLEVBQVUsb0RIQ0QsUUdGNkNDLE1BQU0sS0FBSyxHQUdqRSxnQkFDQUYsRUFDQSxnQkFpQkosT0FoQkExRSxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTW1JLElBQVluSSxNQVNoQ2tJLEtBQU9BLEVBSWIxRSxFQUFNNkUsS0FBTyxpQkFFYjdFLEVBQU0yRSxRQUFVQSxFQUNUM0UsRUFFWCxPQTlCQSxFQUFVeUUsRUFBZ0I1RSxHQThCbkI0RSxFQS9Cd0IsQ0FnQ2pDeEIsT0NoREssU0FBUyxFQUFPNkIsRUFBV0MsR0FDOUIsSUFBS0QsRUFDRCxNQUFNLElBQUksRUFBZUMsR0NDMUIsU0FBUyxFQUFNMUksRUFBTzJJLEVBQUtDLEdBQzlCLE9BQU9DLEtBQUtGLElBQUlFLEtBQUtELElBQUk1SSxFQUFPMkksR0FBTUMsR0FXbkMsSUFBSUUsRUFJSCxTQUFVRCxLQUVIQSxLQUFLQyxLQUlMLFNBQVVDLEdBQ2IsSUFBSUMsRUFBd0IsS0FBT0MsSUFBSUYsR0FDdkMsT0FBUUMsRUFBSSxFQUFJQSxHQUFLLEdBY3RCRSxFQUlILFNBQVVMLEtBRUhBLEtBQUtLLEtBSUwsU0FBVUgsR0FDYixPQUFPRixLQUFLTSxJQUFJSixHQUFLRixLQUFLTyxPQWdCL0IsU0FBU0MsRUFBdUJOLEVBQUdDLEVBQUdNLEVBQUlDLEVBQUlDLEVBQUlDLEdBQ3JELElBQUlDLEVBQUtGLEVBQUtGLEVBQ1ZLLEVBQUtGLEVBQUtGLEVBQ2QsR0FBVyxJQUFQRyxHQUFtQixJQUFQQyxFQUFVLENBQ3RCLElBQUlDLElBQU1iLEVBQUlPLEdBQU1JLEdBQU1WLEVBQUlPLEdBQU1JLElBQU9ELEVBQUtBLEVBQUtDLEVBQUtBLEdBQ3REQyxFQUFJLEdBQ0pOLEVBQUtFLEVBQ0xELEVBQUtFLEdBRUFHLEVBQUksSUFDVE4sR0FBTUksRUFBS0UsRUFDWEwsR0FBTUksRUFBS0MsR0FHbkIsT0FBTyxFQUFnQmIsRUFBR0MsRUFBR00sRUFBSUMsR0FVOUIsU0FBUyxFQUFnQkQsRUFBSUMsRUFBSUMsRUFBSUMsR0FDeEMsSUFBSUMsRUFBS0YsRUFBS0YsRUFDVkssRUFBS0YsRUFBS0YsRUFDZCxPQUFPRyxFQUFLQSxFQUFLQyxFQUFLQSxFQW1FbkIsU0FBUyxFQUFVRSxHQUN0QixPQUFRQSxFQUFpQmhCLEtBQUtpQixHQUFNLElBU2pDLFNBQVMsR0FBTy9JLEVBQUdDLEdBQ3RCLElBQUkrSSxFQUFJaEosRUFBSUMsRUFDWixPQUFPK0ksRUFBSS9JLEVBQUksRUFBSStJLEVBQUkvSSxFQUFJK0ksRUFVeEIsU0FBU0MsR0FBS2pKLEVBQUdDLEVBQUcrSCxHQUN2QixPQUFPaEksRUFBSWdJLEdBQUsvSCxFQUFJRCxHQ2pNeEIsSUFBSSxHQUF3QyxXQUN4QyxJQUFJMEIsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQXdWNUMsU0F2UitCLFNBQVVHLEdBS3JDLFNBQVN5RyxFQUFVQyxHQUNmLElBQUl2RyxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FJakN3RCxFQUFNb0MsR0FJTnBDLEVBQU1zQyxLQUlOdEMsRUFBTXdDLEdBSU4sSUFBSWdFLEVBQWEsRUFBTyxHQUFJRCxHQWdDNUIsTUEvQmtDLGlCQUF2QkEsRUFBUUMsb0JBQ1JBLEVBQVdBLFdBQ2xCLEVBQU9BLEVBQVlELEVBQVFDLGFBRS9CQSxFQUFnQyxhQUNScEYsSUFBcEJtRixFQUFRRSxRQUF3QkYsRUFBUUUsUUFBVSxFQUN0RCxFQUFvRCxpQkFBdENELEVBQWdDLFFBQWdCLElBQzlEQSxFQUFnQyxhQUNScEYsSUFBcEJtRixFQUFRRyxTQUF3QkgsRUFBUUcsUUFDNUNGLEVBQWdDLE9BQUlELEVBQVFJLE9BQzVDSCxFQUF1QyxtQkFDVHBGLElBQTFCbUYsRUFBUUssY0FBOEJMLEVBQVFLLGNBQWdCQyxJQUNsRUwsRUFBdUMsbUJBQ1RwRixJQUExQm1GLEVBQVFPLGNBQThCUCxFQUFRTyxjQUFnQixFQUNsRU4sRUFBaUMsYUFDVHBGLElBQXBCbUYsRUFBUVEsUUFBd0JSLEVBQVFRLFNBQVUsSUFDdERQLEVBQWlDLGFBQ1RwRixJQUFwQm1GLEVBQVFTLFFBQXdCVCxFQUFRUyxRQUFVSCxJQUt0RDdHLEVBQU1pSCxnQkFDdUI3RixJQUF6Qm9GLEVBQVdVLFVBQTBCWCxFQUFRVyxVQUFZLGtCQUN0RFYsRUFBV1UsVUFDbEJsSCxFQUFNMkQsY0FBYzZDLEdBS3BCeEcsRUFBTW1ILE9BQVMsS0FDUm5ILEVBK05YLE9BcFJBLEdBQVVzRyxFQUFXekcsR0EwRHJCeUcsRUFBVTFKLFVBQVV3SyxhQUFlLFdBQy9CLE9BQU81SyxLQUFLeUssWUFTaEJYLEVBQVUxSixVQUFVeUssY0FBZ0IsU0FBVUMsR0FFMUMsSUFBSUMsRUFBUS9LLEtBQUsySyxRQUNJLENBQ2JLLE1BQU9oTCxLQUNQaUwsYUFBeUJyRyxJQUFoQmtHLEdBQW1DQSxHQUVoRFgsRUFBU25LLEtBQUtrTCxZQVdsQixPQVZBSCxFQUFNZCxRQUFVLEVBQU12QixLQUFLeUMsTUFBMEIsSUFBcEJuTCxLQUFLb0wsY0FBc0IsSUFBSyxFQUFHLEdBQ3BFTCxFQUFNTSxZQUFjckwsS0FBS3NMLGlCQUN6QlAsRUFBTWIsUUFBVWxLLEtBQUt1TCxhQUNyQlIsRUFBTVMsT0FBU3hMLEtBQUt5TCxZQUNwQlYsRUFBTVosWUFBb0J2RixJQUFYdUYsR0FBeUJZLEVBQU1FLFFBQXFCZCxFQUFYRSxJQUN4RFUsRUFBTVgsY0FBZ0JwSyxLQUFLMEwsbUJBQzNCWCxFQUFNVCxjQUFnQjVCLEtBQUtELElBQUl6SSxLQUFLMkwsbUJBQW9CLEdBQ3hEWixFQUFNUixRQUFVdkssS0FBSzRMLGFBQ3JCYixFQUFNUCxRQUFVeEssS0FBSzZMLGFBQ3JCN0wsS0FBSzJLLE9BQVNJLEVBQ1BBLEdBUVhqQixFQUFVMUosVUFBVTBMLGVBQWlCLFNBQVVDLEdBQzNDLE9BQU8sS0FRWGpDLEVBQVUxSixVQUFVNEwsb0JBQXNCLFNBQVVDLEdBQ2hELE9BQU8sS0FTWG5DLEVBQVUxSixVQUFVcUwsVUFBWSxXQUM1QixPQUErRHpMLEtBQUtvSCxJQUFJLElBUTVFMEMsRUFBVTFKLFVBQVVzTCxpQkFBbUIsV0FDbkMsT0FBOEIxTCxLQUFLb0gsSUFBSSxJQVEzQzBDLEVBQVUxSixVQUFVdUwsaUJBQW1CLFdBQ25DLE9BQThCM0wsS0FBS29ILElBQUksSUFRM0MwQyxFQUFVMUosVUFBVXdMLFdBQWEsV0FDN0IsT0FBOEI1TCxLQUFLb0gsSUFBSSxJQVEzQzBDLEVBQVUxSixVQUFVeUwsV0FBYSxXQUM3QixPQUE4QjdMLEtBQUtvSCxJQUFJLElBUTNDMEMsRUFBVTFKLFVBQVVnTCxXQUFhLFdBQzdCLE9BQThCcEwsS0FBS29ILElBQUksSUFNM0MwQyxFQUFVMUosVUFBVWtMLGVBQWlCLFdBQ2pDLE9BQU8sS0FRWHhCLEVBQVUxSixVQUFVbUwsV0FBYSxXQUM3QixPQUErQnZMLEtBQUtvSCxJQUFJLElBUzVDMEMsRUFBVTFKLFVBQVU4SyxVQUFZLFdBQzVCLE9BQThCbEwsS0FBS29ILElBQUksSUFTM0MwQyxFQUFVMUosVUFBVThMLFVBQVksU0FBVVYsR0FDdEN4TCxLQUFLNkgsSUFBSSxFQUFzQjJELElBUW5DMUIsRUFBVTFKLFVBQVUrTCxpQkFBbUIsU0FBVS9CLEdBQzdDcEssS0FBSzZILElBQUksRUFBOEJ1QyxJQVEzQ04sRUFBVTFKLFVBQVVnTSxpQkFBbUIsU0FBVTlCLEdBQzdDdEssS0FBSzZILElBQUksRUFBOEJ5QyxJQVUzQ1IsRUFBVTFKLFVBQVVpTSxXQUFhLFNBQVU3QixHQUN2Q3hLLEtBQUs2SCxJQUFJLEVBQXdCMkMsSUFVckNWLEVBQVUxSixVQUFVa00sV0FBYSxTQUFVL0IsR0FDdkN2SyxLQUFLNkgsSUFBSSxFQUF3QjBDLElBUXJDVCxFQUFVMUosVUFBVW1NLFdBQWEsU0FBVXRDLEdBQ3ZDLEVBQTBCLGlCQUFaQSxFQUFzQixJQUNwQ2pLLEtBQUs2SCxJQUFJLEVBQXVCb0MsSUFRcENILEVBQVUxSixVQUFVb00sV0FBYSxTQUFVdEMsR0FDdkNsSyxLQUFLNkgsSUFBSSxFQUF1QnFDLElBU3BDSixFQUFVMUosVUFBVXFNLFVBQVksU0FBVUMsR0FDdEMxTSxLQUFLNkgsSUFBSSxFQUF1QjZFLElBS3BDNUMsRUFBVTFKLFVBQVVNLGdCQUFrQixXQUM5QlYsS0FBSzJLLFNBQ0wzSyxLQUFLMkssT0FBT0ssTUFBUSxLQUNwQmhMLEtBQUsySyxPQUFTLE1BRWxCdEgsRUFBT2pELFVBQVVNLGdCQUFnQnNDLEtBQUtoRCxPQUVuQzhKLEVBclJtQixDQXNSNUIsR0NqVkYsR0FtQmdCLGFBbkJoQixHQWtDb0IsaUJDakNwQixHQUNlLFlBRGYsR0FHVyxRQ1ZYLElBQUksR0FBd0MsV0FDeEMsSUFBSXhILEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0E0VXJDLFNBQVN5SixHQUFPQyxFQUFZQyxHQUMvQixJQUFLRCxFQUFXMUMsUUFDWixPQUFPLEVBRVgsSUFBSTRDLEVBQWFELEVBQVVDLFdBQzNCLEdBQUlBLEVBQWFGLEVBQVd0QyxlQUN4QndDLEdBQWNGLEVBQVd4QyxjQUN6QixPQUFPLEVBRVgsSUFBSTJDLEVBQU9GLEVBQVVFLEtBQ3JCLE9BQU9BLEVBQU9ILEVBQVdyQyxTQUFXd0MsR0FBUUgsRUFBV3BDLFFBRTNELFNBNU8yQixTQUFVbkgsR0FLakMsU0FBUzJKLEVBQU1qRCxHQUNYLElBQUl2RyxFQUFReEQsS0FDUmlOLEVBQWMsRUFBTyxHQUFJbEQsVUFDdEJrRCxFQUFZakwsUUFDbkJ3QixFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTWlOLElBQWdCak4sTUFJcEM0RixHQUlOcEMsRUFBTXNDLEtBSU50QyxFQUFNd0MsR0FLTnhDLEVBQU0wSixrQkFBb0IsS0FLMUIxSixFQUFNMkosY0FBZ0IsS0FLdEIzSixFQUFNNEosaUJBQW1CLEtBS3pCNUosRUFBTTZKLFVBQVksS0FFZHRELEVBQVF1RCxTQUNSOUosRUFBTThKLE9BQVN2RCxFQUFRdUQsUUFFdkJ2RCxFQUFRd0QsS0FDUi9KLEVBQU1nSyxPQUFPekQsRUFBUXdELEtBRXpCL0osRUFBTW1FLGtCQUFrQixFQUFzQm5FLEVBQU1pSyw2QkFDcEQsSUFBSXpMLEVBQVMrSCxFQUFRL0gsT0FDWStILEVBQWMsT0FDekMsS0FFTixPQURBdkcsRUFBTWtLLFVBQVUxTCxHQUNUd0IsRUFpS1gsT0F0TkEsR0FBVXdKLEVBQU8zSixHQTJEakIySixFQUFNNU0sVUFBVTBMLGVBQWlCLFNBQVVDLEdBQ3ZDLElBQUk0QixFQUFRNUIsR0FBd0IsR0FFcEMsT0FEQTRCLEVBQU1sTCxLQUFLekMsTUFDSjJOLEdBTVhYLEVBQU01TSxVQUFVNEwsb0JBQXNCLFNBQVVDLEdBQzVDLElBQUkyQixFQUFTM0IsR0FBMEIsR0FFdkMsT0FEQTJCLEVBQU9uTCxLQUFLekMsS0FBSzZLLGlCQUNWK0MsR0FRWFosRUFBTTVNLFVBQVV5TixVQUFZLFdBQ3hCLE9BQWtDN04sS0FBS29ILElBQUksSUFBMEIsTUFLekU0RixFQUFNNU0sVUFBVWtMLGVBQWlCLFdBQzdCLElBQUl0SixFQUFTaEMsS0FBSzZOLFlBQ2xCLE9BQVE3TCxFQUFpQ0EsRUFBTzhMLFdBQS9CLElBS3JCZCxFQUFNNU0sVUFBVTJOLG9CQUFzQixXQUNsQy9OLEtBQUttRyxXQUtUNkcsRUFBTTVNLFVBQVVxTiw0QkFBOEIsV0FDdEN6TixLQUFLb04sbUJBQ0wxSCxFQUFjMUYsS0FBS29OLGtCQUNuQnBOLEtBQUtvTixpQkFBbUIsTUFFNUIsSUFBSXBMLEVBQVNoQyxLQUFLNk4sWUFDZDdMLElBQ0FoQyxLQUFLb04saUJBQW1CbEksRUFBT2xELEVBQVEsRUFBa0JoQyxLQUFLK04sb0JBQXFCL04sT0FFdkZBLEtBQUttRyxXQU9UNkcsRUFBTTVNLFVBQVU0TixZQUFjLFNBQVVDLEdBQ3BDLE9BQUtqTyxLQUFLcU4sVUFHSHJOLEtBQUtxTixVQUFVVyxZQUFZQyxHQUZ2QixJQUFJQyxTQUFRLFNBQVVDLEdBQVcsT0FBT0EsRUFBUSxRQVkvRG5CLEVBQU01TSxVQUFVa04sT0FBUyxTQUFVYyxFQUFZak8sR0FDM0MsSUFBSWtPLEVBQWdCck8sS0FBS3NPLGNBQ3pCLEdBQUlELEVBQWNFLGFBQWFILEdBQzNCLE9BQU9DLEVBQWNHLFlBQVlKLEVBQVlqTyxJQWVyRDZNLEVBQU01TSxVQUFVb04sT0FBUyxTQUFVRCxHQUMzQnZOLEtBQUtrTixvQkFDTHhILEVBQWMxRixLQUFLa04sbUJBQ25CbE4sS0FBS2tOLGtCQUFvQixNQUV4QkssR0FDRHZOLEtBQUttRyxVQUVMbkcsS0FBS21OLGdCQUNMekgsRUFBYzFGLEtBQUttTixlQUNuQm5OLEtBQUttTixjQUFnQixNQUVyQkksSUFDQXZOLEtBQUtrTixrQkFBb0JoSSxFQUFPcUksRUFBSyxJQUE0QixTQUFVbkosR0FDdkUsSUFFSXFLLEVBRGdELEVBQ2pCTCxXQUFXSyxpQkFDMUM3QixFQUFhNU0sS0FBSzZLLGVBQWMsR0FFcEMsR0FBUTRELEVBQWlCQyxNQUFLLFNBQVVDLEdBQ3BDLE9BQU9BLEVBQWdCM0QsUUFBVTRCLEVBQVc1QixTQUM1QyxJQUNKeUQsRUFBaUJoTSxLQUFLbUssS0FDdkI1TSxNQUNIQSxLQUFLbU4sY0FBZ0JqSSxFQUFPbEYsS0FBTSxFQUFrQnVOLEVBQUlELE9BQVFDLEdBQ2hFdk4sS0FBS21HLFlBU2I2RyxFQUFNNU0sVUFBVXNOLFVBQVksU0FBVTFMLEdBQ2xDaEMsS0FBSzZILElBQUksRUFBc0I3RixJQU1uQ2dMLEVBQU01TSxVQUFVa08sWUFBYyxXQUkxQixPQUhLdE8sS0FBS3FOLFlBQ05yTixLQUFLcU4sVUFBWXJOLEtBQUs0TyxrQkFFbkI1TyxLQUFLcU4sV0FLaEJMLEVBQU01TSxVQUFVeU8sWUFBYyxXQUMxQixRQUFTN08sS0FBS3FOLFdBT2xCTCxFQUFNNU0sVUFBVXdPLGVBQWlCLFdBQzdCLE9BQU8sTUFLWDVCLEVBQU01TSxVQUFVTSxnQkFBa0IsV0FDOUJWLEtBQUswTixVQUFVLE1BQ2ZySyxFQUFPakQsVUFBVU0sZ0JBQWdCc0MsS0FBS2hELE9BRW5DZ04sRUF2TmUsQ0F3TnhCOEIsSUM5VEYsR0FDYSxVQURiLEdBRWdDLHlCQ1JoQyxJQUFJLEdBQXdDLFdBQ3hDLElBQUl4TSxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBNEk1QyxTQXBFbUMsU0FBVUcsR0FLekMsU0FBUzBMLEVBQWNDLEdBQ25CLElBQUl4TCxFQUFReEQsS0FDUitKLEVBQVVpRixHQUE0QixHQUN0Qy9CLEVBQWMsRUFBTyxHQUFJbEQsR0FvQjdCLGNBbkJPa0QsRUFBWWdDLGVBQ1poQyxFQUFZaUMsd0JBQ25CMUwsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU1pTixJQUFnQmpOLE1BSXBDNEYsR0FJTnBDLEVBQU1zQyxLQUlOdEMsRUFBTXdDLEdBQ054QyxFQUFNMkwsZ0JBQStCdkssSUFBcEJtRixFQUFRa0YsUUFBd0JsRixFQUFRa0YsUUFBVSxHQUNuRXpMLEVBQU00TCwrQkFBNkR4SyxJQUFuQ21GLEVBQVFtRix3QkFDbENuRixFQUFRbUYsd0JBRVAxTCxFQXNDWCxPQWpFQSxHQUFVdUwsRUFBZTFMLEdBbUN6QjBMLEVBQWMzTyxVQUFVaVAsV0FBYSxXQUNqQyxPQUE4QnJQLEtBQUtvSCxJQUFJa0ksS0FRM0NQLEVBQWMzTyxVQUFVK08sV0FBYSxTQUFVRixHQUMzQ2pQLEtBQUs2SCxJQUFJeUgsR0FBc0JMLElBUW5DRixFQUFjM08sVUFBVW1QLDBCQUE0QixXQUNoRCxPQUErQnZQLEtBQUtvSCxJQUFJa0ksS0FRNUNQLEVBQWMzTyxVQUFVZ1AsMEJBQTRCLFNBQVVGLEdBQzFEbFAsS0FBSzZILElBQUl5SCxHQUF5Q0osSUFFL0NILEVBbEV1QixDQW1FaEMsSUMzSUYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJek0sRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQXlMNUMsU0EvSm1DLFNBQVVHLEdBS3pDLFNBQVNtTSxFQUFjeEUsR0FDbkIsSUFBSXhILEVBQVFILEVBQU9MLEtBQUtoRCxPQUFTQSxLQVlqQyxPQVZBd0QsRUFBTWlNLHdCQUEwQmpNLEVBQU1rTSxtQkFBbUJySyxLQUFLN0IsR0FLOURBLEVBQU1tTSxPQUFTM0UsRUFJZnhILEVBQU1vTSx1QkFBeUIsS0FDeEJwTSxFQTJJWCxPQTVKQSxHQUFVZ00sRUFBZW5NLEdBeUJ6Qm1NLEVBQWNwUCxVQUFVNE4sWUFBYyxTQUFVQyxHQUM1QyxPQUFPLEtBUVh1QixFQUFjcFAsVUFBVW1PLGFBQWUsU0FBVUgsR0FDN0MsT0FBTyxLQVNYb0IsRUFBY3BQLFVBQVVvTyxZQUFjLFNBQVVKLEVBQVlqTyxHQUN4RCxPQUFPLEtBUVhxUCxFQUFjcFAsVUFBVXlQLG1CQUFxQixTQUFVQyxFQUFPL0MsRUFBTWdELEdBQzNERCxFQUFNL0MsS0FDUCtDLEVBQU0vQyxHQUFRLElBRWxCK0MsRUFBTS9DLEdBQU1nRCxFQUFLQyxVQUFVQyxZQUFjRixHQVk3Q1AsRUFBY3BQLFVBQVU4UCx1QkFBeUIsU0FBVWxPLEVBQVFtTyxFQUFZTCxHQUMzRSxPQU9BLFNBQVUvQyxFQUFNcUQsR0FDWixJQUFJQyxFQUFXclEsS0FBSzZQLG1CQUFtQnhLLEtBQUtyRixLQUFNOFAsRUFBTy9DLEdBQ3pELE9BQU8vSyxFQUFPc08sa0JBQWtCSCxFQUFZcEQsRUFBTXFELEVBQVdDLElBQy9EaEwsS0FBS3JGLE9BWVh3UCxFQUFjcFAsVUFBVW1RLDJCQUE2QixTQUFVQyxFQUFZcEMsRUFBWXFDLEVBQWNKLEVBQVVLLEtBWS9HbEIsRUFBY3BQLFVBQVV1USxlQUFpQixTQUFVMUMsRUFBT0csRUFBWXFDLEdBQ2xFLE9BQU8sS0FLWGpCLEVBQWNwUCxVQUFVd1EsU0FBVyxXQUMvQixPQUFPNVEsS0FBSzJQLFFBTWhCSCxFQUFjcFAsVUFBVXlRLG1CQUFxQixhQU03Q3JCLEVBQWNwUCxVQUFVc1AsbUJBQXFCLFNBQVV2TCxHQzdJL0MsSUQ4SXNEQSxFQUFZLE9BQzVEMkosWUFDTjlOLEtBQUs4USwyQkFVYnRCLEVBQWNwUCxVQUFVMlEsVUFBWSxTQUFVQyxHQUMxQyxJQUFJQyxFQUFhRCxFQUFNbEQsV0FRdkIsT0NuS0ksR0Q0SkFtRCxHQzNKRCxHRDJKb0NBLEdBQ25DRCxFQUFNbk4saUJBQWlCLEVBQWtCN0QsS0FBS3lQLHlCQy9KaEQsR0RpS0V3QixJQUNBRCxFQUFNRSxPQUNORCxFQUFhRCxFQUFNbEQsWUNqS25CLEdEbUtHbUQsR0FLWHpCLEVBQWNwUCxVQUFVMFEsd0JBQTBCLFdBQzlDLElBQUk5RixFQUFRaEwsS0FBSzRRLFdBQ2I1RixFQUFNTyxjQUFnQlAsRUFBTU0sa0JBQW9CLElBQ2hETixFQUFNN0UsV0FHUHFKLEVBN0p1QixDQThKaEMsR0VyTEYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbE4sRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQW1ENUMsU0FuQ2lDLFNBQVVHLEdBU3ZDLFNBQVM4TixFQUFZcFIsRUFBTXFSLEVBQTJCQyxFQUFnQkMsR0FDbEUsSUFBSTlOLEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNRCxJQUFTQyxLQXFCdkMsT0FkQXdELEVBQU0rTixzQkFBd0JILEVBTTlCNU4sRUFBTTRLLFdBQWFpRCxFQU9uQjdOLEVBQU1nTyxRQUFVRixFQUNUOU4sRUFFWCxPQWhDQSxHQUFVMk4sRUFBYTlOLEdBZ0NoQjhOLEVBakNxQixDQWtDOUIsR0NsREYsSUNvUElNLEdEcFBBQyxHQUEwQixvQkFBZEMsZ0JBQTRELElBQXhCQSxVQUFVQyxVQUN4REQsVUFBVUMsVUFBVUMsY0FDcEIsR0FLS0MsSUFBcUMsSUFBM0JKLEdBQUd6TixRQUFRLFdBVXJCOE4sS0FMbUMsSUFBMUJMLEdBQUd6TixRQUFRLFdBQW9CeU4sR0FBR3pOLFFBQVEsVUFLaEIsSUFBMUJ5TixHQUFHek4sUUFBUSxZQUEyQyxHQUF2QnlOLEdBQUd6TixRQUFRLFNBS25ELElBQW1DLElBQTdCeU4sR0FBR3pOLFFBQVEsYUFRakIrTixHQUFpRCxvQkFBckJDLGlCQUFtQ0EsaUJBQW1CLEVBTWxGQyxHQUF1RCxvQkFBdEJDLG1CQUNiLG9CQUFwQkMsaUJBQ1A1UyxnQkFBZ0IyUyxrQkFLVEUsR0FBZ0Msb0JBQVZDLE9BQXlCQSxNQUFNbFMsVUFBVW1TLE9BSS9EQyxHQUEwQixXQUNqQyxJQUFJQyxHQUFVLEVBQ2QsSUFDSSxJQUFJMUksRUFBVXBLLE9BQU9DLGVBQWUsR0FBSSxVQUFXLENBQy9Dd0gsSUFBSyxXQUNEcUwsR0FBVSxLQUdsQkMsT0FBTzdPLGlCQUFpQixJQUFLLEtBQU1rRyxHQUNuQzJJLE9BQU9oTyxvQkFBb0IsSUFBSyxLQUFNcUYsR0FFMUMsTUFBTzRJLElBR1AsT0FBT0YsRUFkMEIsR0NnRTlCLFNBQVNsTixHQUFNcU4sRUFBV3BDLEdBQzdCLElBQUk1SCxFQUFJNEgsRUFBVyxHQUNmM0gsRUFBSTJILEVBQVcsR0FHbkIsT0FGQUEsRUFBVyxHQUFLb0MsRUFBVSxHQUFLaEssRUFBSWdLLEVBQVUsR0FBSy9KLEVBQUkrSixFQUFVLEdBQ2hFcEMsRUFBVyxHQUFLb0MsRUFBVSxHQUFLaEssRUFBSWdLLEVBQVUsR0FBSy9KLEVBQUkrSixFQUFVLEdBQ3pEcEMsRUF3REosU0FBU3FDLEdBQVFELEVBQVdFLEVBQUtDLEVBQUtDLEVBQUlDLEVBQUlDLEVBQU9DLEVBQUtDLEdBQzdELElBQUlDLEVBQU0zSyxLQUFLMkssSUFBSUgsR0FDZkksRUFBTTVLLEtBQUs0SyxJQUFJSixHQU9uQixPQU5BTixFQUFVLEdBQUtJLEVBQUtNLEVBQ3BCVixFQUFVLEdBQUtLLEVBQUtJLEVBQ3BCVCxFQUFVLElBQU1JLEVBQUtLLEVBQ3JCVCxFQUFVLEdBQUtLLEVBQUtLLEVBQ3BCVixFQUFVLEdBQUtPLEVBQU1ILEVBQUtNLEVBQU1GLEVBQU1KLEVBQUtLLEVBQU1QLEVBQ2pERixFQUFVLEdBQUtPLEVBQU1GLEVBQUtJLEVBQU1ELEVBQU1ILEVBQUtLLEVBQU1QLEVBQzFDSCxFQWtDSixTQUFTVyxHQUFZcFQsRUFBUTZCLEdBQ2hDLElBcUJ3QndSLEVBckJwQkMsR0FxQm9CRCxFQXJCRnhSLEdBc0JYLEdBQUt3UixFQUFJLEdBQUtBLEVBQUksR0FBS0EsRUFBSSxHQXJCdEMsRUFBZSxJQUFSQyxFQUFXLElBQ2xCLElBQUk3UyxFQUFJb0IsRUFBTyxHQUNYbkIsRUFBSW1CLEVBQU8sR0FDWDBSLEVBQUkxUixFQUFPLEdBQ1hXLEVBQUlYLEVBQU8sR0FDWDJSLEVBQUkzUixFQUFPLEdBQ1g0UixFQUFJNVIsRUFBTyxHQU9mLE9BTkE3QixFQUFPLEdBQUt3QyxFQUFJOFEsRUFDaEJ0VCxFQUFPLElBQU1VLEVBQUk0UyxFQUNqQnRULEVBQU8sSUFBTXVULEVBQUlELEVBQ2pCdFQsRUFBTyxHQUFLUyxFQUFJNlMsRUFDaEJ0VCxFQUFPLElBQU11VCxFQUFJRSxFQUFJalIsRUFBSWdSLEdBQUtGLEVBQzlCdFQsRUFBTyxLQUFPUyxFQUFJZ1QsRUFBSS9TLEVBQUk4UyxHQUFLRixFQUN4QnRULEVBL01BLElBQUkyQyxNQUFNLEdDbkJyQixTQUdjLFdDUVAsU0FBUytRLEdBQWVDLEdBRTNCLElBREEsSUFBSXRJLEVBMktHLENBQUNuQixJQUFVQSxLQUFVLEtBQVcsS0ExSzlCbEosRUFBSSxFQUFHVyxFQUFLZ1MsRUFBWTVTLE9BQVFDLEVBQUlXLElBQU1YLEVBQy9DNFMsR0FBaUJ2SSxFQUFRc0ksRUFBWTNTLElBRXpDLE9BQU9xSyxFQWtFSixTQUFTd0ksR0FBeUJ4SSxFQUFRNUMsRUFBR0MsR0FDaEQsSUFBSVUsRUFBSUMsRUFtQlIsT0FqQklELEVBREFYLEVBQUk0QyxFQUFPLEdBQ05BLEVBQU8sR0FBSzVDLEVBRVo0QyxFQUFPLEdBQUs1QyxFQUNaQSxFQUFJNEMsRUFBTyxHQUdYLEdBV0dqQyxHQVJSQyxFQURBWCxFQUFJMkMsRUFBTyxHQUNOQSxFQUFPLEdBQUszQyxFQUVaMkMsRUFBTyxHQUFLM0MsRUFDWkEsRUFBSTJDLEVBQU8sR0FHWCxHQUVhaEMsRUFVbkIsU0FBU3lLLEdBQW1CekksRUFBUWdGLEdBQ3ZDLE9BQU8wRCxHQUFXMUksRUFBUWdGLEVBQVcsR0FBSUEsRUFBVyxJQTZCakQsU0FBUzBELEdBQVcxSSxFQUFRNUMsRUFBR0MsR0FDbEMsT0FBTzJDLEVBQU8sSUFBTTVDLEdBQUtBLEdBQUs0QyxFQUFPLElBQU1BLEVBQU8sSUFBTTNDLEdBQUtBLEdBQUsyQyxFQUFPLEdBU3RFLFNBQVMySSxHQUF1QjNJLEVBQVFnRixHQUMzQyxJQUFJNEQsRUFBTzVJLEVBQU8sR0FDZDZJLEVBQU83SSxFQUFPLEdBQ2Q4SSxFQUFPOUksRUFBTyxHQUNkK0ksRUFBTy9JLEVBQU8sR0FDZDVDLEVBQUk0SCxFQUFXLEdBQ2YzSCxFQUFJMkgsRUFBVyxHQUNmZ0UsRUM5SkssRUQ4S1QsT0FmSTVMLEVBQUl3TCxFQUNKSSxHQzNKRSxHRDZKRzVMLEVBQUkwTCxJQUNURSxHQ2hLRyxHRGtLSDNMLEVBQUl3TCxFQUNKRyxHQ2xLRyxFRG9LRTNMLEVBQUkwTCxJQUNUQyxHQ3ZLRyxHQUZFLElEMktMQSxJQUNBQSxFQzNLVSxHRDZLUEEsRUFtQkosU0FBU0MsR0FBZUwsRUFBTUMsRUFBTUMsRUFBTUMsRUFBTUcsR0FDbkQsT0FBSUEsR0FDQUEsRUFBVyxHQUFLTixFQUNoQk0sRUFBVyxHQUFLTCxFQUNoQkssRUFBVyxHQUFLSixFQUNoQkksRUFBVyxHQUFLSCxFQUNURyxHQUdBLENBQUNOLEVBQU1DLEVBQU1DLEVBQU1DLEdBUTNCLFNBQVNJLEdBQW9CRCxHQUNoQyxPQUFPRCxHQUFlcEssSUFBVUEsS0FBVSxLQUFXLElBQVdxSyxHQWlEN0QsU0FBUyxHQUFPRSxFQUFTQyxHQUM1QixPQUFRRCxFQUFRLElBQU1DLEVBQVEsSUFDMUJELEVBQVEsSUFBTUMsRUFBUSxJQUN0QkQsRUFBUSxJQUFNQyxFQUFRLElBQ3RCRCxFQUFRLElBQU1DLEVBQVEsR0F5Q3ZCLFNBQVNkLEdBQWlCdkksRUFBUWdGLEdBQ2pDQSxFQUFXLEdBQUtoRixFQUFPLEtBQ3ZCQSxFQUFPLEdBQUtnRixFQUFXLElBRXZCQSxFQUFXLEdBQUtoRixFQUFPLEtBQ3ZCQSxFQUFPLEdBQUtnRixFQUFXLElBRXZCQSxFQUFXLEdBQUtoRixFQUFPLEtBQ3ZCQSxFQUFPLEdBQUtnRixFQUFXLElBRXZCQSxFQUFXLEdBQUtoRixFQUFPLEtBQ3ZCQSxFQUFPLEdBQUtnRixFQUFXLElBc0J4QixTQUFTc0UsR0FBc0J0SixFQUFRdUosRUFBaUJDLEVBQVFDLEVBQUtDLEdBQ3hFLEtBQU9GLEVBQVNDLEVBQUtELEdBQVVFLEVBQzNCQyxHQUFTM0osRUFBUXVKLEVBQWdCQyxHQUFTRCxFQUFnQkMsRUFBUyxJQUV2RSxPQUFPeEosRUFrQkosU0FBUzJKLEdBQVMzSixFQUFRNUMsRUFBR0MsR0FDaEMyQyxFQUFPLEdBQUs5QyxLQUFLRixJQUFJZ0QsRUFBTyxHQUFJNUMsR0FDaEM0QyxFQUFPLEdBQUs5QyxLQUFLRixJQUFJZ0QsRUFBTyxHQUFJM0MsR0FDaEMyQyxFQUFPLEdBQUs5QyxLQUFLRCxJQUFJK0MsRUFBTyxHQUFJNUMsR0FDaEM0QyxFQUFPLEdBQUs5QyxLQUFLRCxJQUFJK0MsRUFBTyxHQUFJM0MsR0FXN0IsU0FBU3VNLEdBQWM1SixFQUFRNkUsR0FDbEMsSUFBSWdGLEVBRUosT0FEQUEsRUFBTWhGLEVBQVNpRixHQUFjOUosT0FJN0I2SixFQUFNaEYsRUFBU2tGLEdBQWUvSixPQUk5QjZKLEVBQU1oRixFQUFTbUYsR0FBWWhLLEtBTmhCNkosR0FVWEEsRUFBTWhGLEVBQVNvRixHQUFXakssT0FJbkIsRUFRSixTQUFTa0ssR0FBUWxLLEdBQ3BCLElBQUltSyxFQUFPLEVBSVgsT0FISyxHQUFRbkssS0FDVG1LLEVBQU8sR0FBU25LLEdBQVVvSyxHQUFVcEssSUFFakNtSyxFQVFKLFNBQVNMLEdBQWM5SixHQUMxQixNQUFPLENBQUNBLEVBQU8sR0FBSUEsRUFBTyxJQVF2QixTQUFTK0osR0FBZS9KLEdBQzNCLE1BQU8sQ0FBQ0EsRUFBTyxHQUFJQSxFQUFPLElBUXZCLFNBQVNxSyxHQUFVckssR0FDdEIsTUFBTyxFQUFFQSxFQUFPLEdBQUtBLEVBQU8sSUFBTSxHQUFJQSxFQUFPLEdBQUtBLEVBQU8sSUFBTSxHQVE1RCxTQUFTc0ssR0FBVXRLLEVBQVF1SyxHQUM5QixJQUFJdkYsRUFnQkosTUQxY2EsZ0JDMmJUdUYsRUFDQXZGLEVBQWE4RSxHQUFjOUosR0QzYmpCLGlCQzZiTHVLLEVBQ0x2RixFQUFhK0UsR0FBZS9KLEdBRXZCdUssSUFBV0MsR0FDaEJ4RixFQUFhaUYsR0FBV2pLLEdEL2JqQixjQ2ljRnVLLEVBQ0x2RixFQUFhZ0YsR0FBWWhLLEdBR3pCLEdBQU8sRUFBTyxJQUVYZ0YsRUFzQkosU0FBU3lGLEdBQWtCQyxFQUFRcEosRUFBWXFKLEVBQVVDLEVBQU0xQixHQUNsRSxJQUFJbkwsRUFBTXVELEVBQWFzSixFQUFLLEdBQU0sRUFDOUI1TSxFQUFNc0QsRUFBYXNKLEVBQUssR0FBTSxFQUM5QkMsRUFBYzNOLEtBQUs0SyxJQUFJNkMsR0FDdkJHLEVBQWM1TixLQUFLMkssSUFBSThDLEdBQ3ZCSSxFQUFPaE4sRUFBSzhNLEVBQ1pHLEVBQU9qTixFQUFLK00sRUFDWkcsRUFBT2pOLEVBQUs2TSxFQUNaSyxFQUFPbE4sRUFBSzhNLEVBQ1oxTixFQUFJc04sRUFBTyxHQUNYck4sRUFBSXFOLEVBQU8sR0FDWFMsRUFBSy9OLEVBQUkyTixFQUFPRyxFQUNoQnZOLEVBQUtQLEVBQUkyTixFQUFPRyxFQUNoQnJOLEVBQUtULEVBQUkyTixFQUFPRyxFQUNoQkUsRUFBS2hPLEVBQUkyTixFQUFPRyxFQUNoQkcsRUFBS2hPLEVBQUkyTixFQUFPQyxFQUNoQnJOLEVBQUtQLEVBQUkyTixFQUFPQyxFQUNoQm5OLEVBQUtULEVBQUkyTixFQUFPQyxFQUNoQkssRUFBS2pPLEVBQUkyTixFQUFPQyxFQUNwQixPQUFPaEMsR0FBZS9MLEtBQUtGLElBQUltTyxFQUFJeE4sRUFBSUUsRUFBSXVOLEdBQUtsTyxLQUFLRixJQUFJcU8sRUFBSXpOLEVBQUlFLEVBQUl3TixHQUFLcE8sS0FBS0QsSUFBSWtPLEVBQUl4TixFQUFJRSxFQUFJdU4sR0FBS2xPLEtBQUtELElBQUlvTyxFQUFJek4sRUFBSUUsRUFBSXdOLEdBQUtwQyxHQVEzSCxTQUFTa0IsR0FBVXBLLEdBQ3RCLE9BQU9BLEVBQU8sR0FBS0EsRUFBTyxHQW1CdkIsU0FBU3VMLEdBQWdCbkMsRUFBU0MsRUFBU0gsR0FDOUMsSUFBSXNDLEVBQWV0QyxHQTFWWixDQUFDckssSUFBVUEsS0FBVSxLQUFXLEtBd1h2QyxPQTdCSTRNLEdBQVdyQyxFQUFTQyxJQUNoQkQsRUFBUSxHQUFLQyxFQUFRLEdBQ3JCbUMsRUFBYSxHQUFLcEMsRUFBUSxHQUcxQm9DLEVBQWEsR0FBS25DLEVBQVEsR0FFMUJELEVBQVEsR0FBS0MsRUFBUSxHQUNyQm1DLEVBQWEsR0FBS3BDLEVBQVEsR0FHMUJvQyxFQUFhLEdBQUtuQyxFQUFRLEdBRTFCRCxFQUFRLEdBQUtDLEVBQVEsR0FDckJtQyxFQUFhLEdBQUtwQyxFQUFRLEdBRzFCb0MsRUFBYSxHQUFLbkMsRUFBUSxHQUUxQkQsRUFBUSxHQUFLQyxFQUFRLEdBQ3JCbUMsRUFBYSxHQUFLcEMsRUFBUSxHQUcxQm9DLEVBQWEsR0FBS25DLEVBQVEsSUFJOUJGLEdBQW9CcUMsR0FFakJBLEVBd0JKLFNBQVN2QixHQUFXakssR0FDdkIsTUFBTyxDQUFDQSxFQUFPLEdBQUlBLEVBQU8sSUFRdkIsU0FBU2dLLEdBQVloSyxHQUN4QixNQUFPLENBQUNBLEVBQU8sR0FBSUEsRUFBTyxJQVF2QixTQUFTLEdBQVNBLEdBQ3JCLE9BQU9BLEVBQU8sR0FBS0EsRUFBTyxHQVN2QixTQUFTeUwsR0FBV3JDLEVBQVNDLEdBQ2hDLE9BQVFELEVBQVEsSUFBTUMsRUFBUSxJQUMxQkQsRUFBUSxJQUFNQyxFQUFRLElBQ3RCRCxFQUFRLElBQU1DLEVBQVEsSUFDdEJELEVBQVEsSUFBTUMsRUFBUSxHQVF2QixTQUFTLEdBQVFySixHQUNwQixPQUFPQSxFQUFPLEdBQUtBLEVBQU8sSUFBTUEsRUFBTyxHQUFLQSxFQUFPLEdFMW1CaEQsU0FBUzBMLEdBQXNCQyxFQUFXQyxFQUFZQyxFQUFnQkMsR0FDekUsSUFBSUMsRUFBU0YsR0FBa0JBLEVBQWVuVyxPQUN4Q21XLEVBQWVHLFFBQ2Z0RixHQUNJLElBQUlFLGdCQUFnQitFLEdBQWEsSUFBS0MsR0FBYyxLQUNwREssU0FBU0MsY0FBYyxVQVFqQyxPQVBJUCxJQUNBSSxFQUFPSSxNQUFRUixHQUVmQyxJQUNBRyxFQUFPSyxPQUFTUixHQUc0QkcsRUFBT00sV0FBVyxLQUFNUCxHQWdDckUsU0FBU1EsR0FBWUMsRUFBU0MsR0FDakMsSUFBSUMsRUFBU0QsRUFBUUUsV0FDakJELEdBQ0FBLEVBQU9FLGFBQWFKLEVBQVNDLEdBTzlCLFNBQVNJLEdBQVdDLEdBQ3ZCLE9BQU9BLEdBQVFBLEVBQUtILFdBQWFHLEVBQUtILFdBQVdJLFlBQVlELEdBQVEsS0NyRXpFLElBQUksR0FBd0MsV0FDeEMsSUFBSS9WLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EwUDVDLFNBN055QyxTQUFVRyxHQUsvQyxTQUFTa1YsRUFBb0J2TixHQUN6QixJQUFJeEgsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU1nTCxJQUFVaEwsS0F3Q3hDLE9BbkNBd0QsRUFBTWdWLFVBQVksS0FLbEJoVixFQUFNaVYsbUJBT05qVixFQUFNa1YsY0xwQkgsQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0syQm5CbFYsRUFBTW1WLGVMM0JILENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdLa0NuQm5WLEVBQU0rTixzQkxsQ0gsQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0tzQ25CL04sRUFBTWdPLFFBQVUsS0FJaEJoTyxFQUFNb1YsaUJBQWtCLEVBQ2pCcFYsRUE2S1gsT0ExTkEsR0FBVStVLEVBQXFCbFYsR0FxRC9Ca1YsRUFBb0JuWSxVQUFVeVksYUFBZSxTQUFVMVksRUFBUXlTLEVBQVczSSxHQUN0RSxJQUNJdU8sRUFBV2hILEVBRFhzSCxFQUFpQjlZLEtBQUs0USxXQUFXaEcsZUF3QnJDLEdBdEJJekssR0FDeUIsS0FBekJBLEVBQU80WSxNQUFNOU8sU0FDYjlKLEVBQU91SyxZQUFjb08sSUFDakJ2QixFQUFTcFgsRUFBTzZZLDZCQUNFQyxvQkFDbEJ6SCxFQUFVK0YsRUFBT00sV0FBVyxRQUdoQ3JHLEdBQzBCLElBQXpCQSxFQUFRK0YsT0FBT0ksT0FDWm5HLEVBQVErRixPQUFPd0IsTUFBTW5HLFlBQWNBLEVBTWxDNVMsS0FBSzRZLGtCQUVWNVksS0FBS3dZLFVBQVksS0FDakJ4WSxLQUFLd1IsUUFBVSxLQUNmeFIsS0FBSzRZLGlCQUFrQixJQVJ2QjVZLEtBQUt3WSxVQUFZclksRUFDakJILEtBQUt3UixRQUFVQSxFQUNmeFIsS0FBSzRZLGlCQUFrQixJQVF0QjVZLEtBQUt3WSxVQUFXLEVBQ2pCQSxFQUFZZixTQUFTQyxjQUFjLFFBQ3pCaE4sVUFBWW9PLEVBQ3RCLElBQUlDLEVBQVFQLEVBQVVPLE1BQ3RCQSxFQUFNRyxTQUFXLFdBQ2pCSCxFQUFNcEIsTUFBUSxPQUNkb0IsRUFBTW5CLE9BQVMsT0FFZixJQUFJTCxHQURKL0YsRUFBVTBGLE1BQ1dLLE9BQ3JCaUIsRUFBVVcsWUFBWTVCLElBQ3RCd0IsRUFBUXhCLEVBQU93QixPQUNURyxTQUFXLFdBQ2pCSCxFQUFNSyxLQUFPLElBQ2JMLEVBQU1NLGdCQUFrQixXQUN4QnJaLEtBQUt3WSxVQUFZQSxFQUNqQnhZLEtBQUt3UixRQUFVQSxJQVN2QitHLEVBQW9CblksVUFBVWtaLGNBQWdCLFNBQVU5SCxFQUFTcEQsRUFBWTVDLEdBQ3pFLElBQUkrTixFQUFVOUQsR0FBV2pLLEdBQ3JCZ08sRUFBV2hFLEdBQVloSyxHQUN2QmlPLEVBQWNsRSxHQUFlL0osR0FDN0JrTyxFQUFhcEUsR0FBYzlKLEdBQy9CakcsR0FBZTZJLEVBQVd1TCwyQkFBNEJKLEdBQ3REaFUsR0FBZTZJLEVBQVd1TCwyQkFBNEJILEdBQ3REalUsR0FBZTZJLEVBQVd1TCwyQkFBNEJGLEdBQ3REbFUsR0FBZTZJLEVBQVd1TCwyQkFBNEJELEdBQ3RELElBQUlFLEVBQVc1WixLQUFLdVIsc0JBQ3BCaE0sR0FBZXFVLEVBQVVMLEdBQ3pCaFUsR0FBZXFVLEVBQVVKLEdBQ3pCalUsR0FBZXFVLEVBQVVILEdBQ3pCbFUsR0FBZXFVLEVBQVVGLEdBQ3pCbEksRUFBUXFJLE9BQ1JySSxFQUFRc0ksWUFDUnRJLEVBQVF1SSxPQUFPclIsS0FBS3lDLE1BQU1vTyxFQUFRLElBQUs3USxLQUFLeUMsTUFBTW9PLEVBQVEsS0FDMUQvSCxFQUFRd0ksT0FBT3RSLEtBQUt5QyxNQUFNcU8sRUFBUyxJQUFLOVEsS0FBS3lDLE1BQU1xTyxFQUFTLEtBQzVEaEksRUFBUXdJLE9BQU90UixLQUFLeUMsTUFBTXNPLEVBQVksSUFBSy9RLEtBQUt5QyxNQUFNc08sRUFBWSxLQUNsRWpJLEVBQVF3SSxPQUFPdFIsS0FBS3lDLE1BQU11TyxFQUFXLElBQUtoUixLQUFLeUMsTUFBTXVPLEVBQVcsS0FDaEVsSSxFQUFReUksUUFRWjFCLEVBQW9CblksVUFBVThaLHFCQUF1QixTQUFVbmEsRUFBTXlSLEVBQVNwRCxHQUMxRSxJQUFJcEQsRUFBUWhMLEtBQUs0USxXQUNqQixHQUFJNUYsRUFBTW5HLFlBQVk5RSxHQUFPLENBQ3pCLElBQUlvYSxFQUFVLElBQUksR0FBWXBhLEVBQU1DLEtBQUt1UixzQkFBdUJuRCxFQUFZb0QsR0FDNUV4RyxFQUFNOUcsY0FBY2lXLEtBUTVCNUIsRUFBb0JuWSxVQUFVZ2EsVUFBWSxTQUFVNUksRUFBU3BELEdBQ3pEcE8sS0FBS2thLHFCZGpLRSxZY2lLOEMxSSxFQUFTcEQsSUFPbEVtSyxFQUFvQm5ZLFVBQVVpYSxXQUFhLFNBQVU3SSxFQUFTcEQsR0FDMURwTyxLQUFLa2EscUJkbktHLGFjbUs4QzFJLEVBQVNwRCxJQWNuRW1LLEVBQW9CblksVUFBVWthLG1CQUFxQixTQUFVcEUsRUFBUXBKLEVBQVlxSixFQUFVb0UsRUFBWTVDLEVBQU9DLEVBQVE0QyxHQUNsSCxJQUFJMUgsRUFBTTZFLEVBQVEsRUFDZDVFLEVBQU02RSxFQUFTLEVBQ2Y1RSxFQUFLdUgsRUFBYXpOLEVBQ2xCbUcsR0FBTUQsRUFDTkcsR0FBTytDLEVBQU8sR0FBS3NFLEVBQ25CcEgsR0FBTzhDLEVBQU8sR0FDbEIsT0FBT3JELEdBQWlCN1MsS0FBSzBZLGNBQWU1RixFQUFLQyxFQUFLQyxFQUFJQyxHQUFLa0QsRUFBVWhELEVBQUtDLElBVWxGbUYsRUFBb0JuWSxVQUFVdVEsZUFBaUIsU0FBVTFDLEVBQU9HLEVBQVlxQyxHQUN4RSxJQVdJZ0ssRUFYQUMsRUFBY25WLEdBQWV2RixLQUFLdVIsc0JBQXVCdEQsRUFBTTBNLFNBQy9EbkosRUFBVXhSLEtBQUt3UixRQUVmb0osRUFEUTVhLEtBQUs0USxXQUNPbkYsWUFDeEIsR0FBSW1QLElBR0szRyxHQUFtQjJHLEVBRkRyVixHQUFlNkksRUFBV3lNLDJCQUE0QjVNLEVBQU0wTSxVQUcvRSxPQUFPLEtBSWYsSUFDSSxJQUFJL1IsRUFBSUYsS0FBS3lDLE1BQU11UCxFQUFZLElBQzNCN1IsRUFBSUgsS0FBS3lDLE1BQU11UCxFQUFZLElBQzNCSSxFQUFZckQsU0FBU0MsY0FBYyxVQUNuQ3FELEVBQWFELEVBQVVqRCxXQUFXLE1BQ3RDaUQsRUFBVW5ELE1BQVEsRUFDbEJtRCxFQUFVbEQsT0FBUyxFQUNuQm1ELEVBQVdDLFVBQVUsRUFBRyxFQUFHLEVBQUcsR0FDOUJELEVBQVdFLFVBQVV6SixFQUFRK0YsT0FBUTNPLEVBQUdDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdBQzFENFIsRUFBT00sRUFBV0csYUFBYSxFQUFHLEVBQUcsRUFBRyxHQUFHVCxLQUUvQyxNQUFPVSxHQUNILE1BQWlCLGtCQUFiQSxFQUFJOVMsS0FFRyxJQUFJK1MsV0FFUlgsRUFFWCxPQUFnQixJQUFaQSxFQUFLLEdBQ0UsS0FFSkEsR0FFSmxDLEVBM042QixDQTROdEMsSUNsUEYsSUFBSThDLEdBQTJCLFdBTzNCLFNBQVNBLEVBQVVqSCxFQUFNRSxFQUFNRCxFQUFNRSxHQUlqQ3ZVLEtBQUtvVSxLQUFPQSxFQUlacFUsS0FBS3NVLEtBQU9BLEVBSVp0VSxLQUFLcVUsS0FBT0EsRUFJWnJVLEtBQUt1VSxLQUFPQSxFQWtGaEIsT0E1RUE4RyxFQUFVamIsVUFBVWtiLFNBQVcsU0FBVXRMLEdBQ3JDLE9BQU9oUSxLQUFLa1UsV0FBV2xFLEVBQVUsR0FBSUEsRUFBVSxLQU1uRHFMLEVBQVVqYixVQUFVbWIsa0JBQW9CLFNBQVVuTCxHQUM5QyxPQUFRcFEsS0FBS29VLE1BQVFoRSxFQUFVZ0UsTUFDM0JoRSxFQUFVa0UsTUFBUXRVLEtBQUtzVSxNQUN2QnRVLEtBQUtxVSxNQUFRakUsRUFBVWlFLE1BQ3ZCakUsRUFBVW1FLE1BQVF2VSxLQUFLdVUsTUFPL0I4RyxFQUFVamIsVUFBVThULFdBQWEsU0FBVXRMLEVBQUdDLEdBQzFDLE9BQU83SSxLQUFLb1UsTUFBUXhMLEdBQUtBLEdBQUs1SSxLQUFLc1UsTUFBUXRVLEtBQUtxVSxNQUFReEwsR0FBS0EsR0FBSzdJLEtBQUt1VSxNQU0zRThHLEVBQVVqYixVQUFVZ0IsT0FBUyxTQUFVZ1AsR0FDbkMsT0FBUXBRLEtBQUtvVSxNQUFRaEUsRUFBVWdFLE1BQzNCcFUsS0FBS3FVLE1BQVFqRSxFQUFVaUUsTUFDdkJyVSxLQUFLc1UsTUFBUWxFLEVBQVVrRSxNQUN2QnRVLEtBQUt1VSxNQUFRbkUsRUFBVW1FLE1BSy9COEcsRUFBVWpiLFVBQVVvYixPQUFTLFNBQVVwTCxHQUMvQkEsRUFBVWdFLEtBQU9wVSxLQUFLb1UsT0FDdEJwVSxLQUFLb1UsS0FBT2hFLEVBQVVnRSxNQUV0QmhFLEVBQVVrRSxLQUFPdFUsS0FBS3NVLE9BQ3RCdFUsS0FBS3NVLEtBQU9sRSxFQUFVa0UsTUFFdEJsRSxFQUFVaUUsS0FBT3JVLEtBQUtxVSxPQUN0QnJVLEtBQUtxVSxLQUFPakUsRUFBVWlFLE1BRXRCakUsRUFBVW1FLEtBQU92VSxLQUFLdVUsT0FDdEJ2VSxLQUFLdVUsS0FBT25FLEVBQVVtRSxPQU05QjhHLEVBQVVqYixVQUFVd1YsVUFBWSxXQUM1QixPQUFPNVYsS0FBS3VVLEtBQU92VSxLQUFLcVUsS0FBTyxHQUtuQ2dILEVBQVVqYixVQUFVcWIsUUFBVSxXQUMxQixNQUFPLENBQUN6YixLQUFLMGIsV0FBWTFiLEtBQUs0VixjQUtsQ3lGLEVBQVVqYixVQUFVc2IsU0FBVyxXQUMzQixPQUFPMWIsS0FBS3NVLEtBQU90VSxLQUFLb1UsS0FBTyxHQU1uQ2lILEVBQVVqYixVQUFVNlcsV0FBYSxTQUFVN0csR0FDdkMsT0FBUXBRLEtBQUtvVSxNQUFRaEUsRUFBVWtFLE1BQzNCdFUsS0FBS3NVLE1BQVFsRSxFQUFVZ0UsTUFDdkJwVSxLQUFLcVUsTUFBUWpFLEVBQVVtRSxNQUN2QnZVLEtBQUt1VSxNQUFRbkUsRUFBVWlFLE1BRXhCZ0gsRUF6R21CLEdBbUh2QixTQUFTLEdBQWVqSCxFQUFNRSxFQUFNRCxFQUFNRSxFQUFNbkUsR0FDbkQsWUFBa0J4TCxJQUFkd0wsR0FDQUEsRUFBVWdFLEtBQU9BLEVBQ2pCaEUsRUFBVWtFLEtBQU9BLEVBQ2pCbEUsRUFBVWlFLEtBQU9BLEVBQ2pCakUsRUFBVW1FLEtBQU9BLEVBQ1ZuRSxHQUdBLElBQUlpTCxHQUFVakgsRUFBTUUsRUFBTUQsRUFBTUUsR0FHL0MsWUM5SEEsSUFBSW9ILEdBQVEsQ0FLUkMsUUFBUyxVQUtUQyxLQUFNLEtBS05DLE9BQVEsSUFLUkMsT0FBUSxTQUtSQyxZQUFhLGNBS2JDLE9BQVEsU0FRREMsR0FBa0IsR0FFN0JBLEdBQWdCUCxHQUFNQyxTQUFZLEVBQUlsVCxLQUFLaUIsR0FBSyxRQUFXLElBQzNEdVMsR0FBZ0JQLEdBQU1FLE1BQVEsTUFDOUJLLEdBQWdCUCxHQUFNRyxRQUFVLEVBQ2hDSSxHQUFnQlAsR0FBTU0sUUFBVSxLQUFPLEtBQ3ZDLFlDZ01BLEdBbk1nQyxXQUk1QixTQUFTRSxFQUFXcFMsR0FLaEIvSixLQUFLb2MsTUFBUXJTLEVBQVE3QixLQVFyQmxJLEtBQUtxYyxPQUFzRHRTLEVBQWEsTUFReEUvSixLQUFLc2MsYUFBNkIxWCxJQUFuQm1GLEVBQVF5QixPQUF1QnpCLEVBQVF5QixPQUFTLEtBUS9EeEwsS0FBS3VjLGtCQUN1QjNYLElBQXhCbUYsRUFBUXlTLFlBQTRCelMsRUFBUXlTLFlBQWMsS0FLOUR4YyxLQUFLeWMsc0JBQzJCN1gsSUFBNUJtRixFQUFRMlMsZ0JBQWdDM1MsRUFBUTJTLGdCQUFrQixNQUt0RTFjLEtBQUsyYyxhQUE2Qi9YLElBQW5CbUYsRUFBUTZTLFFBQXVCN1MsRUFBUTZTLE9BS3RENWMsS0FBSzZjLGFBQWU3YyxLQUFLMmMsVUFBVzNjLEtBQUtzYyxTQUt6Q3RjLEtBQUs4Yyx3QkFBMEIvUyxFQUFRZ1QsbUJBS3ZDL2MsS0FBS2dkLGlCQUFtQixLQUt4QmhkLEtBQUtpZCxlQUFpQmxULEVBQVFtVCxjQWdJbEMsT0EzSEFmLEVBQVcvYixVQUFVK2MsU0FBVyxXQUM1QixPQUFPbmQsS0FBSzZjLFdBT2hCVixFQUFXL2IsVUFBVWdkLFFBQVUsV0FDM0IsT0FBT3BkLEtBQUtvYyxPQU9oQkQsRUFBVy9iLFVBQVVxTCxVQUFZLFdBQzdCLE9BQU96TCxLQUFLc2MsU0FPaEJILEVBQVcvYixVQUFVaWQsU0FBVyxXQUM1QixPQUFPcmQsS0FBS3FjLFFBU2hCRixFQUFXL2IsVUFBVWtkLGlCQUFtQixXQUNwQyxPQUFPdGQsS0FBS2lkLGdCQUFrQmYsR0FBZ0JsYyxLQUFLcWMsU0FPdkRGLEVBQVcvYixVQUFVbWQsZUFBaUIsV0FDbEMsT0FBT3ZkLEtBQUt1YyxjQWFoQkosRUFBVy9iLFVBQVVvZCxtQkFBcUIsV0FDdEMsT0FBT3hkLEtBQUt5YyxrQkFPaEJOLEVBQVcvYixVQUFVcWQsU0FBVyxXQUM1QixPQUFPemQsS0FBSzJjLFNBT2hCUixFQUFXL2IsVUFBVXNkLFVBQVksU0FBVWQsR0FDdkM1YyxLQUFLMmMsUUFBVUMsRUFDZjVjLEtBQUs2YyxhQUFlRCxJQUFVNWMsS0FBS3NjLFVBS3ZDSCxFQUFXL2IsVUFBVXVkLG1CQUFxQixXQUN0QyxPQUFPM2QsS0FBS2dkLGtCQUtoQmIsRUFBVy9iLFVBQVV3ZCxtQkFBcUIsU0FBVUMsR0FDaEQ3ZCxLQUFLZ2QsaUJBQW1CYSxHQU81QjFCLEVBQVcvYixVQUFVOEwsVUFBWSxTQUFVVixHQUN2Q3hMLEtBQUtzYyxRQUFVOVEsRUFDZnhMLEtBQUs2YyxhQUFlN2MsS0FBSzJjLFVBQVduUixJQVF4QzJRLEVBQVcvYixVQUFVMGQsZUFBaUIsU0FBVXRCLEdBQzVDeGMsS0FBS3VjLGFBQWVDLEdBUXhCTCxFQUFXL2IsVUFBVTJkLHNCQUF3QixTQUFVQyxHQUNuRGhlLEtBQUs4Yyx3QkFBMEJrQixHQU9uQzdCLEVBQVcvYixVQUFVNmQsdUJBQXlCLFdBQzFDLE9BQU9qZSxLQUFLOGMseUJBRVRYLEVBak1vQixHQ2pEL0IsSUFBSSxHQUF3QyxXQUN4QyxJQUFJN1osRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQTJCakNnYixHQUFTLFFBS1RDLEdBQVl6VixLQUFLaUIsR0FBS3VVLEdBS3RCRSxHQUFTLEVBQUVELElBQVlBLEdBQVdBLEdBQVdBLElBSzdDRSxHQUFlLEVBQUUsS0FBTSxHQUFJLElBQUssSUFNaENDLEdBQWFKLEdBQVN4VixLQUFLTSxJQUFJTixLQUFLNlYsSUFBSTdWLEtBQUtpQixHQUFLLElBS3pENlUsR0FBb0MsU0FBVW5iLEdBSzlDLFNBQVNtYixFQUFtQnRXLEdBQ3hCLE9BQU83RSxFQUFPTCxLQUFLaEQsS0FBTSxDQUNyQmtJLEtBQU1BLEVBQ051VyxNQUFPLFVBQ1BqVCxPQUFRNFMsR0FDUnhCLFFBQVEsRUFDUkosWUFBYTZCLEdBQ2J0QixtQkFBb0IsU0FBVWpRLEVBQVk0UixHQUN0QyxPQUFPNVIsRUFBYW5FLEVBQUsrVixFQUFNLEdBQUtSLFFBRXRDbGUsS0FFVixPQWhCQSxHQUFVd2UsRUFBb0JuYixHQWdCdkJtYixFQWpCNEIsQ0FrQnJDLElBT1NHLEdBQWMsQ0FDckIsSUFBSUgsR0FBbUIsYUFDdkIsSUFBSUEsR0FBbUIsZUFDdkIsSUFBSUEsR0FBbUIsZUFDdkIsSUFBSUEsR0FBbUIsZUFDdkIsSUFBSUEsR0FBbUIsaURDbkYzQixJQUFJLEdBQXdDLFdBQ3hDLElBQUlsYyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBaUNqQyxHQUFTLEVBQUUsS0FBTSxHQUFJLElBQUssSUFLMUIsR0FaUyxRQVlVd0YsS0FBS2lCLEdBQWUsSUFTOUNpVixHQUFvQyxTQUFVdmIsR0FNOUMsU0FBU3ViLEVBQW1CMVcsRUFBTTJXLEdBQzlCLE9BQU94YixFQUFPTCxLQUFLaEQsS0FBTSxDQUNyQmtJLEtBQU1BLEVBQ051VyxNQUFPLFdBQ1BqVCxPQUFRLEdBQ1JrUixnQkFBaUJtQyxFQUNqQmpDLFFBQVEsRUFDUk0sY0FBZSxHQUNmVixZQUFhLE1BQ1h4YyxLQUVWLE9BaEJBLEdBQVU0ZSxFQUFvQnZiLEdBZ0J2QnViLEVBakI0QixDQWtCckMsSUFPUyxHQUFjLENBQ3JCLElBQUlBLEdBQW1CLFVBQ3ZCLElBQUlBLEdBQW1CLFlBQWEsT0FDcEMsSUFBSUEsR0FBbUIsaUNBQ3ZCLElBQUlBLEdBQW1CLDRCQUN2QixJQUFJQSxHQUFtQiwrQ0FBZ0QsUUN2RXZFRSxHQUFRLEdDRVJDLEdBQWEsR0FlVixTQUFTLEdBQUkvYyxFQUFRZ2QsRUFBYUMsR0FDckMsSUFBSUMsRUFBYWxkLEVBQU9vYixVQUNwQitCLEVBQWtCSCxFQUFZNUIsVUFDNUI4QixLQUFjSCxLQUNoQkEsR0FBV0csR0FBYyxJQUU3QkgsR0FBV0csR0FBWUMsR0FBbUJGLEVDRXZDLFNBQVNHLEdBQVlDLEVBQUlDLEVBQUlDLEdBQ2hDLElBQUlDLEVBQVNELEdBWFcsVUFZcEJFLEVBQU8sRUFBVUosRUFBRyxJQUNwQkssRUFBTyxFQUFVSixFQUFHLElBQ3BCSyxHQUFlRCxFQUFPRCxHQUFRLEVBQzlCRyxFQUFjLEVBQVVOLEVBQUcsR0FBS0QsRUFBRyxJQUFNLEVBQ3pDemUsRUFBSThILEtBQUsySyxJQUFJc00sR0FBZWpYLEtBQUsySyxJQUFJc00sR0FDckNqWCxLQUFLMkssSUFBSXVNLEdBQ0xsWCxLQUFLMkssSUFBSXVNLEdBQ1RsWCxLQUFLNEssSUFBSW1NLEdBQ1QvVyxLQUFLNEssSUFBSW9NLEdBQ2pCLE9BQU8sRUFBSUYsRUFBUzlXLEtBQUttWCxNQUFNblgsS0FBS29YLEtBQUtsZixHQUFJOEgsS0FBS29YLEtBQUssRUFBSWxmLElDOEN4RCxTQUFTbWYsR0FBZUMsRUFBT0MsRUFBWUMsR0FDOUMsSUFBSXJlLEVBQ0osUUFBbUIrQyxJQUFmcWIsRUFBMEIsQ0FDMUIsSUFBSyxJQUFJOWUsRUFBSSxFQUFHVyxFQUFLa2UsRUFBTTllLE9BQVFDLEVBQUlXLElBQU1YLEVBQ3pDOGUsRUFBVzllLEdBQUs2ZSxFQUFNN2UsR0FFMUJVLEVBQVNvZSxPQUdUcGUsRUFBU21lLEVBQU1yRixRQUVuQixPQUFPOVksRUFRSixTQUFTc2UsR0FBa0JILEVBQU9DLEVBQVlDLEdBQ2pELFFBQW1CdGIsSUFBZnFiLEdBQTRCRCxJQUFVQyxFQUFZLENBQ2xELElBQUssSUFBSTllLEVBQUksRUFBR1csRUFBS2tlLEVBQU05ZSxPQUFRQyxFQUFJVyxJQUFNWCxFQUN6QzhlLEVBQVc5ZSxHQUFLNmUsRUFBTTdlLEdBRTFCNmUsRUFBUUMsRUFFWixPQUFPRCxFQVNKLFNBQVNJLEdBQWNqUSxJSC9GdkIsU0FBYWpJLEVBQU1pSSxHQUN0QjJPLEdBQU01VyxHQUFRaUksRUcrRmRrUSxDQUFRbFEsRUFBV2lOLFVBQVdqTixHQUM5QixHQUFpQkEsRUFBWUEsRUFBWTRQLElBaUJ0QyxTQUFTLEdBQUlPLEdBQ2hCLE1BQWlDLGlCQUFuQkEsRUg1SE54QixHQURRNVcsRUc4SG9CLElINUhoQzRXLEdBQU01VyxFQUFLcVksUUFBUSx5Q0FBMEMsYUFDN0QsS0c0SDRCLEdBQW9CLEtIL0hqRCxJQUFhclksRUdxSmIsU0FBUzZVLEdBQW1CNU0sRUFBWXJELEVBQVk0UixFQUFPOEIsR0FFOUQsSUFBSUMsRUFDQUMsR0FGSnZRLEVBQWEsR0FBSUEsSUFFTzhOLHlCQUN4QixHQUFJeUMsRUFDQUQsRUFBa0JDLEVBQU81VCxFQUFZNFIsR0FDakM4QixHQUFhQSxJQUFjclEsRUFBV2tOLGFBQ2xDSCxFQUFnQi9NLEVBQVdtTixzQkFFM0JtRCxFQUNLQSxFQUFrQnZELEVBQWlCaEIsR0FBZ0JzRSxRQUkvRCxDQUNELElBQUkvQixFQUFRdE8sRUFBV2tOLFdBQ3ZCLEdBQUtvQixHQUFTLGFBQWtCK0IsR0FBY0EsR0FBYSxXQUN2REMsRUFBa0IzVCxNQUVqQixDQUlELElBcUJJb1EsRUFyQkF5RCxFQUFlQyxHQUE0QnpRLEVBQVksR0FBSSxjQUMvRCxHQUFJd1EsSUFBaUJSLElBQXFCMUIsSUFBVSxXQUVoRGdDLEVBQWtCM1QsRUFBYXFELEVBQVdtTix1QkFFekMsQ0FDRCxJQUFJdUQsRUFBVyxDQUNYbkMsRUFBTSxHQUFLNVIsRUFBYSxFQUN4QjRSLEVBQU0sR0FDTkEsRUFBTSxHQUFLNVIsRUFBYSxFQUN4QjRSLEVBQU0sR0FDTkEsRUFBTSxHQUNOQSxFQUFNLEdBQUs1UixFQUFhLEVBQ3hCNFIsRUFBTSxHQUNOQSxFQUFNLEdBQUs1UixFQUFhLEdBSzVCMlQsR0FGWXJCLElBRFp5QixFQUFXRixFQUFhRSxFQUFVQSxFQUFVLElBQ1hsRyxNQUFNLEVBQUcsR0FBSWtHLEVBQVNsRyxNQUFNLEVBQUcsSUFDbkR5RSxHQUFZeUIsRUFBU2xHLE1BQU0sRUFBRyxHQUFJa0csRUFBU2xHLE1BQU0sRUFBRyxLQUM1QixPQUtuQi9WLEtBSGxCc1ksRUFBZ0JzRCxFQUNkdEUsR0FBZ0JzRSxHQUNoQnJRLEVBQVdtTixzQkFFYm1ELEdBQW1CdkQsSUFJL0IsT0FBT3VELEVBU0osU0FBU0ssR0FBeUJDLElBbEdsQyxTQUF3QkEsR0FDM0JBLEVBQVlDLFFBQVFaLElBa0dwQmEsQ0FBZUYsR0FDZkEsRUFBWUMsU0FBUSxTQUFVaGYsR0FDMUIrZSxFQUFZQyxTQUFRLFNBQVVoQyxHQUN0QmhkLElBQVdnZCxHQUNYLEdBQWlCaGQsRUFBUWdkLEVBQWFlLFVBc0MvQyxTQUFTbUIsR0FBaUIvUSxFQUFZZ1IsR0FDekMsT0FBS2hSLEVBRzBCLGlCQUFmQSxFQUNMLEdBQUlBLEdBR3NCLEVBTjFCLEdBQUlnUixHQXVHWixTQUFTQyxHQUFXQyxFQUFhQyxHQUNwQyxHQUFJRCxJQUFnQkMsRUFDaEIsT0FBTyxFQUVYLElBQUlDLEVBQWFGLEVBQVloRSxhQUFlaUUsRUFBWWpFLFdBQ3hELE9BQUlnRSxFQUFZakUsWUFBY2tFLEVBQVlsRSxXQUlsQndELEdBQTRCUyxFQUFhQyxLQUNwQ3ZCLEtBSmxCd0IsRUFnQlIsU0FBU1gsR0FBNEJZLEVBQWtCQyxHQUMxRCxJQUVJQyxFRnpWRCxTQUFheEMsRUFBWUMsR0FDNUIsSUFBSXZNLEVBSUosT0FISXNNLEtBQWNILElBQWNJLEtBQW1CSixHQUFXRyxLQUMxRHRNLEVBQVltTSxHQUFXRyxHQUFZQyxJQUVoQ3ZNLEVFb1ZhLENBRkg0TyxFQUFpQnBFLFVBQ1pxRSxFQUFzQnJFLFdBSzVDLE9BSEtzRSxJQUNEQSxFQUFnQnZCLElBRWJ1QixFQVlKLFNBQVNDLEdBQWEzZixFQUFRZ2QsR0FHakMsT0FBTzRCLEdBRmdCLEdBQUk1ZSxHQUNDLEdBQUlnZCxJQWlCN0IsU0FBU3BNLEdBQVVwQyxFQUFZeE8sRUFBUWdkLEdBRTFDLE9BRG9CMkMsR0FBYTNmLEVBQVFnZCxFQUNsQzBDLENBQWNsUixPQUFZNUwsRUFBVzRMLEVBQVd0UCxRQWlDM0QsSUE1TnNEMGdCLEdBQWNDLEdBQWtCQyxHQTRObEZDLEdBQWlCLEtBd0JkLFNBQVNDLEtBQ1osT0FBT0QsR0FpQkosU0FBU0UsR0FBaUJ6UixFQUFZZ1IsR0FDekMsT0FDV2hSLEVBV1IsU0FBUzBSLEdBQW1CMVIsRUFBWTJSLEdBQzNDLE9BQ1czUixFQXdCUixTQUFTNFIsR0FBZTVXLEVBQVEyVyxHQUNuQyxPQUNXM1csRUFpRFhzVixHQUF5QixJQUN6QkEsR0FBeUIsSUFqV3lCYyxHQW9XSixHQXBXa0JDLEdMOUo3RCxTQUFzQjdCLEVBQU9DLEVBQVlDLEdBQzVDLElBQUloZixFQUFTOGUsRUFBTTllLE9BQ2ZtaEIsRUFBWW5DLEVBQWdCLEVBQUlBLEVBQWdCLEVBQ2hEcmUsRUFBU29lLE9BQ0VyYixJQUFYL0MsSUFHSUEsRUFGQXdnQixFQUFZLEVBRUhyQyxFQUFNckYsUUFHTixJQUFJN1gsTUFBTTVCLElBRzNCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFRQyxHQUFLa2hCLEVBQVcsQ0FDeEN4Z0IsRUFBT1YsR0FBTWdkLEdBQVk2QixFQUFNN2UsR0FBTSxJQUNyQyxJQUFJMEgsRUFBSXFWLEdBQVN4VixLQUFLTSxJQUFJTixLQUFLNlYsSUFBSzdWLEtBQUtpQixLQUFPcVcsRUFBTTdlLEVBQUksR0FBSyxJQUFPLE1BQ2xFMEgsRUFBSXlWLEdBQ0p6VixFQUFJeVYsR0FFQ3pWLEdBQUt5VixLQUNWelYsR0FBS3lWLElBRVR6YyxFQUFPVixFQUFJLEdBQUswSCxFQUVwQixPQUFPaEgsR0tzSTJFaWdCLEdMNUgvRSxTQUFvQjlCLEVBQU9DLEVBQVlDLEdBQzFDLElBQUloZixFQUFTOGUsRUFBTTllLE9BQ2ZtaEIsRUFBWW5DLEVBQWdCLEVBQUlBLEVBQWdCLEVBQ2hEcmUsRUFBU29lLE9BQ0VyYixJQUFYL0MsSUFHSUEsRUFGQXdnQixFQUFZLEVBRUhyQyxFQUFNckYsUUFHTixJQUFJN1gsTUFBTTVCLElBRzNCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFRQyxHQUFLa2hCLEVBQzdCeGdCLEVBQU9WLEdBQU0sSUFBTTZlLEVBQU03ZSxHQUFNZ2QsR0FDL0J0YyxFQUFPVixFQUFJLEdBQ04sSUFBTXVILEtBQUs0WixLQUFLNVosS0FBS0ksSUFBSWtYLEVBQU03ZSxFQUFJLEdBQUsrYyxLQUFZeFYsS0FBS2lCLEdBQUssR0FFdkUsT0FBTzlILEdLOGNpQixHQW5XWG1mLFNBQVEsU0FBVUssR0FDM0JPLEdBQWFaLFNBQVEsU0FBVU0sR0FDM0IsR0FBaUJELEVBQWFDLEVBQWFPLElBQzNDLEdBQWlCUCxFQUFhRCxFQUFhUyxVQy9QdkQsSUFBSSxHQUF3QyxXQUN4QyxJQUFJeGYsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQWlDeENxZixHQUF5QyxTQUFVbGYsR0FLbkQsU0FBU2tmLEVBQXdCQyxHQUM3QixJQUFJaGYsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU13aUIsSUFBY3hpQixLQThDNUMsT0F6Q0F3RCxFQUFNaWYsZUFBZ0IsRUFLdEJqZixFQUFNa2YsZ0JBQWtCLEtBS3hCbGYsRUFBTW1mLG1CQUtObmYsRUFBTW9mLG1CQUFxQixLQUszQnBmLEVBQU1xZixpQkFLTnJmLEVBQU1zZixjQUFnQixHQUt0QnRmLEVBQU11ZixXQUFZLEVBS2xCdmYsRUFBTXdmLFViK0dILENBQUMzWSxJQUFVQSxLQUFVLEtBQVcsS2ExR25DN0csRUFBTXlmLGNBQWdCLElBQUksR0FBVSxFQUFHLEVBQUcsRUFBRyxHQUN0Q3pmLEVBOFpYLE9BamRBLEdBQVUrZSxFQUF5QmxmLEdBMERuQ2tmLEVBQXdCbmlCLFVBQVU4aUIsZUFBaUIsU0FBVW5ULEdBQ3pELElBQUl5UyxFQUFZeGlCLEtBQUs0USxXQUNqQnVTLEVBQVlwVCxFQUFLakMsV0FDakJvQixFQUF5QnNULEVBQVVqVCw0QkFDdkMsT0N2RkksR0R1Rkk0VCxHQ2pGTCxHRGtGQ0EsR0NuRkQsR0RvRkVBLElBQWlDalUsR0FTMUNxVCxFQUF3Qm5pQixVQUFVZ2pCLFFBQVUsU0FBVUMsRUFBR3phLEVBQUdDLEVBQUd1RixHQUMzRCxJQUFJbU0sRUFBYW5NLEVBQVdtTSxXQUN4QnBLLEVBQWEvQixFQUFXdkIsVUFBVXNELFdBQ2xDcVMsRUFBWXhpQixLQUFLNFEsV0FFakJiLEVBRGF5UyxFQUFVM1UsWUFDTHVWLFFBQVFDLEVBQUd6YSxFQUFHQyxFQUFHMFIsRUFBWXBLLEdBY25ELE9DaEhHLEdEbUdDSixFQUFLakMsYUFDQTBVLEVBQVVqVCw0QkFJTmlULEVBQVVuVCxhQUFlLElBRTlCclAsS0FBSytpQixXQUFZLEdBSmpCaFQsRUFBS3VULFNDM0dULElEa0hDdGpCLEtBQUtrakIsZUFBZW5ULEtBQ3JCQSxFQUFPQSxFQUFLd1Qsa0JBRVR4VCxHQVFYd1MsRUFBd0JuaUIsVUFBVXlQLG1CQUFxQixTQUFVQyxFQUFPL0MsRUFBTWdELEdBQzFFLFFBQUkvUCxLQUFLa2pCLGVBQWVuVCxJQUNiMU0sRUFBT2pELFVBQVV5UCxtQkFBbUI3TSxLQUFLaEQsS0FBTThQLEVBQU8vQyxFQUFNZ0QsSUFTM0V3UyxFQUF3Qm5pQixVQUFVbU8sYUFBZSxTQUFVSCxHQUN2RCxRQUFTcE8sS0FBSzRRLFdBQVcvQyxhQVE3QjBVLEVBQXdCbmlCLFVBQVVvTyxZQUFjLFNBQVVKLEVBQVlqTyxHQUNsRSxJQUFJeU0sRUFBYXdCLEVBQVdLLGlCQUFpQkwsRUFBV29WLFlBQ3BEM1csRUFBWXVCLEVBQVd2QixVQUN2QnNELEVBQWF0RCxFQUFVc0QsV0FDdkJzVCxFQUFpQjVXLEVBQVVDLFdBQzNCNFcsRUFBYTdXLEVBQVVxSixPQUN2QkMsRUFBV3RKLEVBQVVzSixTQUNyQm9FLEVBQWFuTSxFQUFXbU0sV0FDeEJpSSxFQUFZeGlCLEtBQUs0USxXQUNqQitTLEVBQWFuQixFQUFVM1UsWUFDdkIrVixFQUFpQkQsRUFBV3ZkLGNBQzVCeVgsRUFBVzhGLEVBQVdFLHlCQUF5QjFULEdBQy9Da1QsRUFBSXhGLEVBQVNpRyxrQkFBa0JMLEVBQWdCRSxFQUFXSSxZQUMxREMsRUFBaUJuRyxFQUFTb0csY0FBY1osR0FDeEM3WCxFQUFTNEMsRUFBVzVDLE9BQ3BCb1AsRUFBY2hPLEVBQVdwQixRQUFVNFcsR0FBZXhWLEVBQVdwQixRQUM3RG9QLElBQ0FwUCxFQUFTdUwsR0FBZ0J2TCxFQUFRNFcsR0FBZXhWLEVBQVdwQixVQUUvRCxJQUFJMFksRUFBaUJQLEVBQVdRLGtCQUFrQjVKLEdBRTlDNUMsRUFBUWpQLEtBQUt5QyxNQUFNaUQsRUFBV2dJLEtBQUssR0FBSzhOLEdBQ3hDdE0sRUFBU2xQLEtBQUt5QyxNQUFNaUQsRUFBV2dJLEtBQUssR0FBSzhOLEdBQzdDLEdBQUkvTixFQUFVLENBQ1YsSUFBSUMsRUFBTzFOLEtBQUt5QyxNQUFNekMsS0FBS29YLEtBQUtuSSxFQUFRQSxFQUFRQyxFQUFTQSxJQUN6REQsRUFBUXZCLEVBQ1J3QixFQUFTeEIsRUFFYixJQUFJN00sRUFBTXlhLEVBQWlCck0sRUFBUyxFQUFJdU0sRUFDcEMxYSxFQUFNd2EsRUFBaUJwTSxFQUFVLEVBQUlzTSxFQUNyQ0UsRUFBZSxDQUNmVixFQUFXLEdBQUtuYSxFQUNoQm1hLEVBQVcsR0FBS2xhLEVBQ2hCa2EsRUFBVyxHQUFLbmEsRUFDaEJtYSxFQUFXLEdBQUtsYSxHQUVoQjRHLEVBQVl5TixFQUFTd0csMEJBQTBCN1ksRUFBUTZYLEdBSXZEaUIsRUFBaUIsR0FDckJBLEVBQWVqQixHQUFLLEdBQ3BCLElBQUlrQixFQUFrQnZrQixLQUFLa1EsdUJBQXVCeVQsRUFBWXhULEVBQVltVSxHQUN0RXRCLEVBQVloakIsS0FBS2dqQixVQUNqQndCLEVBQWV4a0IsS0FBS2lqQixjQUN4QmpqQixLQUFLK2lCLFdBQVksRUFDakIsSUFBSyxJQUFJbmEsRUFBSXdILEVBQVVnRSxLQUFNeEwsR0FBS3dILEVBQVVrRSxPQUFRMUwsRUFDaEQsSUFBSyxJQUFJQyxFQUFJdUgsRUFBVWlFLEtBQU14TCxHQUFLdUgsRUFBVW1FLE9BQVExTCxFQUFHLENBQ25ELElBQUlrSCxFQUFPL1AsS0FBS29qQixRQUFRQyxFQUFHemEsRUFBR0MsRUFBR3VGLEdBQ2pDLEdBQUlwTyxLQUFLa2pCLGVBQWVuVCxHQUFPLENBQzNCLElBQUkwVSxFQUFNOWQsRUFBTzNHLE1BQ2pCLEdDcE1SLEdEb01ZK1AsRUFBS2pDLFdBQWdDLENBQ3JDd1csRUFBZWpCLEdBQUd0VCxFQUFLQyxVQUFVQyxZQUFjRixFQUMvQyxJQUFJMlUsRUFBZTNVLEVBQUsyVSxhQUFhRCxHQUNoQ3prQixLQUFLK2lCLFlBQ0wyQixJQUFzRCxJQUF0QzFrQixLQUFLOGlCLGNBQWM3ZSxRQUFROEwsS0FDNUMvUCxLQUFLK2lCLFdBQVksR0FHekIsR0FBNEMsSUFBeENoVCxFQUFLNFUsU0FBU0YsRUFBS3JXLEVBQVd3VyxNQUU5QixTQUdSLElBQUlDLEVBQWlCaEgsRUFBU2lILDJCQUEyQi9VLEVBQUtDLFVBQVd3VSxFQUFjeEIsR0FDbkYrQixHQUFVLEVBQ1ZGLElBQ0FFLEVBQVVSLEVBQWdCbEIsRUFBSSxFQUFHd0IsSUFFaENFLEdBQ0RsSCxFQUFTbUgsZ0NBQWdDalYsRUFBS0MsVUFBV3VVLEVBQWlCQyxFQUFjeEIsR0FJcEcsSUFBSWlDLEVBQWNqQixFQUFpQlAsRUFFbkM1USxHQUFpQjdTLEtBQUsyWSxlQUFnQnZLLEVBQVdnSSxLQUFLLEdBQUssRUFBR2hJLEVBQVdnSSxLQUFLLEdBQUssRUFBRyxFQUFJOE4sRUFBZ0IsRUFBSUEsRUFBZ0IvTixHQUFXd0IsRUFBUSxHQUFJQyxFQUFTLEdBQzlKLElBQUlzTixFZnVCTCxTQUFrQjFSLEdBQ3JCLElBQUkyUixFQUFrQixVQUFZM1IsRUFBSTRSLEtBQUssTUFBUSxJQUNuRCxHQUFJbFQsR0FDQSxPQUFPaVQsRUFFWCxJQUFJOU0sRUFBTzVHLEtBQXVCQSxHQUFxQmdHLFNBQVNDLGNBQWMsUUFFOUUsT0FEQVcsRUFBS1UsTUFBTW5HLFVBQVl1UyxFQUNoQjlNLEVBQUtVLE1BQU1uRyxVZTlCUSxDQUFrQjVTLEtBQUsyWSxnQkFDN0MzWSxLQUFLNlksYUFBYTFZLEVBQVEra0IsRUFBaUJ0WSxFQUFXM0MsU0FDdEQsSUFBSXVILEVBQVV4UixLQUFLd1IsUUFDZitGLEVBQVMvRixFQUFRK0YsT0FDckJoRSxHQUFZdlQsS0FBS3VSLHNCQUF1QnZSLEtBQUsyWSxnQkFFN0M5RixHQUFpQjdTLEtBQUswWSxjQUFlZixFQUFRLEVBQUdDLEVBQVMsRUFBR3FOLEVBQWFBLEVBQWEsR0FBSXROLEVBQVEsR0FBSUMsRUFBUyxHQUMzR0wsRUFBT0ksT0FBU0EsR0FBU0osRUFBT0ssUUFBVUEsR0FDMUNMLEVBQU9JLE1BQVFBLEVBQ2ZKLEVBQU9LLE9BQVNBLEdBRVY1WCxLQUFLNFksaUJBQ1hwSCxFQUFRd0osVUFBVSxFQUFHLEVBQUdyRCxFQUFPQyxHQUUvQmdELEdBQ0E1YSxLQUFLc1osY0FBYzlILEVBQVNwRCxFQUFZd00sR0FFNUMsRUFBT3BKLEVBQVNtUyxFQUFXMEIscUJBQzNCcmxCLEtBQUtvYSxVQUFVNUksRUFBU3BELEdBQ3hCcE8sS0FBSzhpQixjQUFjNWhCLE9BQVMsRUFFNUIsSUFFSW9rQixFQUFPQyxFQUFRQyxFQUZmQyxFQUFLOWxCLE9BQU9vRixLQUFLdWYsR0FBZ0IvVyxJQUFJbVksUUFDekNELEVBQUdFLEtBQUtobEIsR0FFbUIsSUFBdkJpTSxFQUFXM0MsU0FDVGpLLEtBQUs0WSxrQkFDSCtLLEVBQVdpQyxVQUFVeFgsRUFBV3ZCLFVBQVVzRCxhQUk5Q21WLEVBQVEsR0FDUkMsRUFBUyxJQUpURSxFQUFLQSxFQUFHSSxVQU1aLElBQUssSUFBSTFrQixFQUFJc2tCLEVBQUd2a0IsT0FBUyxFQUFHQyxHQUFLLElBQUtBLEVBQUcsQ0FDckMsSUFBSTJrQixFQUFXTCxFQUFHdGtCLEdBQ2Q0a0IsRUFBdUJwQyxFQUFXcUMsaUJBQWlCRixFQUFVdkwsRUFBWXBLLEdBRXpFOFYsRUFEb0JwSSxFQUFTb0csY0FBYzZCLEdBQ1I5QixFQUNuQ2tDLEVBQU9ILEVBQXFCLEdBQUtFLEVBQWVoQixFQUNoRGtCLEVBQU9KLEVBQXFCLEdBQUtFLEVBQWVoQixFQUNoRG1CLEVBQWtCdkksRUFBU3dJLHlCQUF5QjVRLEdBQVcyTyxHQUFlMEIsR0FDOUVRLEdBQW1CekksRUFBUzBJLG1CQUFtQkgsR0FDL0NJLEdBQVdqaEIsR0FBZXZGLEtBQUswWSxjQUFlLENBQzdDd0wsR0FBa0JvQyxHQUFpQixHQUFLbEMsRUFBYSxJQUNsREosRUFDSEUsR0FBa0JFLEVBQWEsR0FBS2tDLEdBQWlCLElBQ2xEdEMsSUFFSnlDLEdBQWF2QyxFQUFpQlAsRUFBVytDLHVCQUF1QnZXLEdBQ2hFd1csR0FBY3JDLEVBQWV3QixHQUNqQyxJQUFLLElBQUljLE1BQWdCRCxHQUFhLENBQ2xDLElBQ0kzVyxJQURBRCxFQUE0RDRXLEdBQVlDLEtBQ3ZENVcsVUFFakI2VyxHQUFTVCxFQUFnQixHQUFLcFcsR0FBVSxHQUN4QzhXLEdBQVFwZSxLQUFLeUMsTUFBTXFiLEdBQVMsSUFBTUssR0FBUyxHQUFLWCxHQUNoRGEsR0FBU1gsRUFBZ0IsR0FBS3BXLEdBQVUsR0FDeENnWCxHQUFRdGUsS0FBS3lDLE1BQU1xYixHQUFTLElBQU1PLEdBQVMsR0FBS1osR0FHaERjLEdBQUlILElBRkpsZSxFQUFJRixLQUFLeUMsTUFBTXFiLEdBQVMsR0FBS0ssR0FBU1gsSUFHdENnQixHQUFJRixJQUZKbmUsRUFBSUgsS0FBS3lDLE1BQU1xYixHQUFTLEdBQUtPLEdBQVNaLElBR3RDZ0IsR0FBYTlELElBQU15QyxFQUV2QixLQURJcEIsRUFBZXlDLElBQStELElBQWpEcFgsRUFBSzRVLFNBQVNoZSxFQUFPM0csTUFBT29PLEVBQVd3VyxPQUVwRSxHQUFJVSxFQUFPLENBRVA5VCxFQUFRcUksT0FDUjJMLEVBQWMsQ0FBQzVjLEVBQUdDLEVBQUdELEVBQUlxZSxHQUFHcGUsRUFBR0QsRUFBSXFlLEdBQUdwZSxFQUFJcWUsR0FBR3RlLEVBQUdDLEVBQUlxZSxJQUNwRCxJQUFLLElBQUlFLEdBQU0sRUFBR3RsQixHQUFLd2pCLEVBQU1wa0IsT0FBUWttQixHQUFNdGxCLEtBQU1zbEIsR0FDN0MsR0FBSS9ELElBQU15QyxHQUFZQSxFQUFXUCxFQUFPNkIsSUFBTSxDQUMxQyxJQUFJbk4sR0FBT3FMLEVBQU04QixJQUNqQjVWLEVBQVFzSSxZQUVSdEksRUFBUXVJLE9BQU95TCxFQUFZLEdBQUlBLEVBQVksSUFDM0NoVSxFQUFRd0ksT0FBT3dMLEVBQVksR0FBSUEsRUFBWSxJQUMzQ2hVLEVBQVF3SSxPQUFPd0wsRUFBWSxHQUFJQSxFQUFZLElBQzNDaFUsRUFBUXdJLE9BQU93TCxFQUFZLEdBQUlBLEVBQVksSUFFM0NoVSxFQUFRdUksT0FBT0UsR0FBSyxHQUFJQSxHQUFLLElBQzdCekksRUFBUXdJLE9BQU9DLEdBQUssR0FBSUEsR0FBSyxJQUM3QnpJLEVBQVF3SSxPQUFPQyxHQUFLLEdBQUlBLEdBQUssSUFDN0J6SSxFQUFRd0ksT0FBT0MsR0FBSyxHQUFJQSxHQUFLLElBQzdCekksRUFBUXlJLE9BR2hCcUwsRUFBTTdpQixLQUFLK2lCLEdBQ1hELEVBQU85aUIsS0FBS3FqQixRQUdadFUsRUFBUXdKLFVBQVVwUyxFQUFHQyxFQUFHb2UsR0FBR0MsSUFHbkNsbkIsS0FBS3FuQixjQUFjdFgsRUFBTTNCLEVBQVl4RixFQUFHQyxFQUFHb2UsR0FBR0MsR0FBR1QsR0FBWVUsR0FBWXZhLEVBQVczQyxTQUNoRnFiLElBQVVaLEdBQ1ZsVCxFQUFROFYsVUFDUnRuQixLQUFLOGlCLGNBQWN5RSxRQUFReFgsSUFHM0IvUCxLQUFLOGlCLGNBQWNyZ0IsS0FBS3NOLEdBRTVCL1AsS0FBS3duQixnQkFBZ0JwWixFQUFXcVosVUFBVzlELEVBQVk1VCxJQW1CL0QsT0FoQkEvUCxLQUFLNmlCLGlCQUFtQmUsRUFDeEI1akIsS0FBS3lZLG1CQUFxQnVMLEVBQzFCaGtCLEtBQUt5aUIsZUFDQXppQixLQUFLMGlCLGtCQUFvQixHQUFPMWlCLEtBQUswaUIsZ0JBQWlCMEIsR0FDM0Rwa0IsS0FBSzBpQixnQkFBa0IwQixFQUN2QnBrQixLQUFLMmlCLG1CQUFxQnBJLEVBQzFCdmEsS0FBSzRpQixtQkFBcUJ6UyxFQUMxQm5RLEtBQUswbkIsa0JBQWtCdFosRUFBWXVWLEVBQVk5RixFQUFVdEQsRUFBWXBLLEVBQVkzRSxFQUFRNlgsRUFBR2IsRUFBVW5ULGNBQ3RHclAsS0FBSzJuQixvQkFBb0J2WixFQUFZdVYsR0FDckMzakIsS0FBS3FhLFdBQVc3SSxFQUFTcEQsR0FDckJ4QixFQUFXcEIsUUFDWGdHLEVBQVE4VixVQUVScEMsSUFBb0IzTixFQUFPd0IsTUFBTW5HLFlBQ2pDMkUsRUFBT3dCLE1BQU1uRyxVQUFZc1MsR0FFdEJsbEIsS0FBS3dZLFdBYWhCK0osRUFBd0JuaUIsVUFBVWluQixjQUFnQixTQUFVdFgsRUFBTTNCLEVBQVl4RixFQUFHQyxFQUFHb2UsRUFBR0MsRUFBR1UsRUFBUVQsRUFBWWxkLEdBQzFHLElBQUkrRyxFQUFRaFIsS0FBSzZuQixhQUFhOVgsR0FDOUIsR0FBS2lCLEVBQUwsQ0FHQSxJQUFJeVQsRUFBTTlkLEVBQU8zRyxNQUNiOG5CLEVBQVlYLEVBQWFwWCxFQUFLNFUsU0FBU0YsRUFBS3JXLEVBQVd3VyxNQUFRLEVBQy9EbUQsRUFBUTlkLEVBQVU2ZCxFQUNsQkUsRUFBZUQsSUFBVS9uQixLQUFLd1IsUUFBUXlXLFlBQ3RDRCxJQUNBaG9CLEtBQUt3UixRQUFRcUksT0FDYjdaLEtBQUt3UixRQUFReVcsWUFBY0YsR0FFL0IvbkIsS0FBS3dSLFFBQVF5SixVQUFVakssRUFBTzRXLEVBQVFBLEVBQVE1VyxFQUFNMkcsTUFBUSxFQUFJaVEsRUFBUTVXLEVBQU00RyxPQUFTLEVBQUlnUSxFQUFRaGYsRUFBR0MsRUFBR29lLEVBQUdDLEdBQ3hHYyxHQUNBaG9CLEtBQUt3UixRQUFROFYsVUFFQyxJQUFkUSxFQUNBMVosRUFBVzhaLFNBQVUsRUFFaEJmLEdBQ0xwWCxFQUFLb1ksY0FBYzFELEtBTTNCbEMsRUFBd0JuaUIsVUFBVWdvQixTQUFXLFdBQ3pDLElBQUk1VyxFQUFVeFIsS0FBS3dSLFFBQ25CLE9BQU9BLEVBQVVBLEVBQVErRixPQUFTLE1BUXRDZ0wsRUFBd0JuaUIsVUFBVXluQixhQUFlLFNBQVU5WCxHQUN2RCxPQUFPQSxFQUFLcVksWUFPaEI3RixFQUF3Qm5pQixVQUFVdW5CLG9CQUFzQixTQUFVdlosRUFBWXVWLEdBQzFFLEdBQUlBLEVBQVcwRSxpQkFBa0IsQ0FNN0IsSUFBSUMsRUFBcUIsU0FBVTNFLEVBQVlwVyxFQUFLYSxHQUNoRCxJQUFJbWEsRUFBZ0I1aEIsRUFBT2dkLEdBQ3ZCNEUsS0FBaUJuYSxFQUFXcVosV0FDNUI5RCxFQUFXNkUsWUFBWXBhLEVBQVd2QixVQUFVc0QsV0FBWS9CLEVBQVdxWixVQUFVYyxLQUVuRmxqQixLQUFLLEtBQU1zZSxHQUNidlYsRUFBV3FhLG9CQUFvQmhtQixLQUNtQyxLQVMxRThmLEVBQXdCbmlCLFVBQVVvbkIsZ0JBQWtCLFNBQVVDLEVBQVc5RCxFQUFZNVQsR0FFakYsSUFBSXdZLEVBQWdCNWhCLEVBQU9nZCxHQUNyQjRFLEtBQWlCZCxJQUNuQkEsRUFBVWMsR0FBaUIsSUFFL0JkLEVBQVVjLEdBQWV4WSxFQUFLMlksV0FBWSxHQW9COUNuRyxFQUF3Qm5pQixVQUFVc25CLGtCQUFvQixTQUFVdFosRUFBWXVWLEVBQVk5RixFQUFVdEQsRUFBWXBLLEVBQVkzRSxFQUFRc2EsRUFBVTdXLEVBQVMwWixHQUNqSixJQUFJSixFQUFnQjVoQixFQUFPZ2QsR0FDckI0RSxLQUFpQm5hLEVBQVd3YSxjQUM5QnhhLEVBQVd3YSxZQUFZTCxHQUFpQixJQUU1QyxJQUlJeFksRUFBTUssRUFBVzRULEVBQWdCcGIsRUFBR0MsRUFBR3dhLEVBSnZDdUYsRUFBY3hhLEVBQVd3YSxZQUFZTCxHQUNyQ00sRUFBWXphLEVBQVd5YSxVQUV2QkMsRUFBWSxFQUVoQixJQUFLekYsRUFIU3hGLEVBQVNqUyxhQUdMeVgsR0FBS3lDLElBQVl6QyxFQUcvQixJQUZBalQsRUFBWXlOLEVBQVN3RywwQkFBMEI3WSxFQUFRNlgsRUFBR2pULEdBQzFENFQsRUFBaUJuRyxFQUFTb0csY0FBY1osR0FDbkN6YSxFQUFJd0gsRUFBVWdFLEtBQU14TCxHQUFLd0gsRUFBVWtFLE9BQVExTCxFQUM1QyxJQUFLQyxFQUFJdUgsRUFBVWlFLEtBQU14TCxHQUFLdUgsRUFBVW1FLE9BQVExTCxFQUN4Q2lkLEVBQVd6QyxHQUFLcFUsS0FDZDZaLEVDbmRoQixJRG9kYy9ZLEVBQU80VCxFQUFXUCxRQUFRQyxFQUFHemEsRUFBR0MsRUFBRzBSLEVBQVlwSyxJQUN0Q3JDLGFBQ0w4YSxFQUFZN1ksRUFBSzJZLFdBQVksRUFDeEJHLEVBQVVFLFlBQVloWixFQUFLMlksV0FDNUJHLEVBQVVHLFFBQVEsQ0FDZGpaLEVBQ0F3WSxFQUNBMUssRUFBU29MLG1CQUFtQmxaLEVBQUtDLFdBQ2pDZ1UsVUFJYXBmLElBQXJCK2pCLEdBQ0FBLEVBQWlCNVksSUFJckI0VCxFQUFXdUYsUUFBUTdGLEVBQUd6YSxFQUFHQyxFQUFHc0gsR0FLNUN3VCxFQUFXd0YsZ0JBQWdCTCxFQUFXM1ksSUFFbkNvUyxFQWxkaUMsQ0FtZDFDLElBS0ZBLEdBQXdCbmlCLFVBQVV3USxTQUNsQyxZRTFmQSxJQUFJLEdBQXdDLFdBQ3hDLElBQUl0TyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBa0Q1QyxTQWxCK0IsU0FBVUcsR0FLckMsU0FBUytsQixFQUFVcGEsR0FDZixPQUFPM0wsRUFBT0wsS0FBS2hELEtBQU1nUCxJQUFnQmhQLEtBVTdDLE9BZkEsR0FBVW9wQixFQUFXL2xCLEdBWXJCK2xCLEVBQVVocEIsVUFBVXdPLGVBQWlCLFdBQ2pDLE9BQU8sSUFBSSxHQUF3QjVPLE9BRWhDb3BCLEVBaEJtQixDQWlCNUJDLElDM0NGLEdBQ1ksU0FEWixHQUVnQixhQUZoQixHQUdjLFdDdU5QLFNBQVMsR0FBT0MsRUFBYUMsR0FFaEMsSUFEQSxJQUFJbm9CLEdBQVMsRUFDSkQsRUFBSW1vQixFQUFZcG9CLE9BQVMsRUFBR0MsR0FBSyxJQUFLQSxFQUMzQyxHQUFJbW9CLEVBQVlub0IsSUFBTW9vQixFQUFZcG9CLEdBQUksQ0FDbENDLEdBQVMsRUFDVCxNQUdSLE9BQU9BLEVBb0JKLFNBQVMsR0FBT29QLEVBQVkwQyxHQUMvQixJQUFJc1csRUFBVzlnQixLQUFLNEssSUFBSUosR0FDcEJ1VyxFQUFXL2dCLEtBQUsySyxJQUFJSCxHQUNwQnRLLEVBQUk0SCxFQUFXLEdBQUtnWixFQUFXaFosRUFBVyxHQUFLaVosRUFDL0M1Z0IsRUFBSTJILEVBQVcsR0FBS2daLEVBQVdoWixFQUFXLEdBQUtpWixFQUduRCxPQUZBalosRUFBVyxHQUFLNUgsRUFDaEI0SCxFQUFXLEdBQUszSCxFQUNUMkgsRUNyUEosU0FBU2taLEdBQWFsZSxFQUFRbWUsRUFBWUMsR0FDN0MsT0FBTyxTQVNHMVQsRUFBUXBKLEVBQVlzSixFQUFNeVQsRUFBY0MsR0FDOUMsR0FBSTVULEVBQVEsQ0FDUixJQUFJNlQsRUFBWUosRUFBYSxFQUFJdlQsRUFBSyxHQUFLdEosRUFDdkNrZCxFQUFhTCxFQUFhLEVBQUl2VCxFQUFLLEdBQUt0SixFQUN4Q21kLEVBQVNILEVBQWtCQSxFQUFnQixHQUFLLEVBQ2hESSxFQUFTSixFQUFrQkEsRUFBZ0IsR0FBSyxFQUNoRDFWLEVBQU81SSxFQUFPLEdBQUt1ZSxFQUFZLEVBQUlFLEVBQ25DM1YsRUFBTzlJLEVBQU8sR0FBS3VlLEVBQVksRUFBSUUsRUFDbkM1VixFQUFPN0ksRUFBTyxHQUFLd2UsRUFBYSxFQUFJRSxFQUNwQzNWLEVBQU8vSSxFQUFPLEdBQUt3ZSxFQUFhLEVBQUlFLEVBR3BDOVYsRUFBT0UsSUFFUEEsRUFEQUYsR0FBUUUsRUFBT0YsR0FBUSxHQUd2QkMsRUFBT0UsSUFFUEEsRUFEQUYsR0FBUUUsRUFBT0YsR0FBUSxHQUczQixJQUFJekwsRUFBSSxFQUFNc04sRUFBTyxHQUFJOUIsRUFBTUUsR0FDM0J6TCxFQUFJLEVBQU1xTixFQUFPLEdBQUk3QixFQUFNRSxHQUMzQjRWLEVBQVEsR0FBS3JkLEVBVWpCLE9BUkkrYyxHQUFnQkQsSUFDaEJoaEIsSUFDS3VoQixFQUFRemhCLEtBQUtNLElBQUksRUFBSU4sS0FBS0QsSUFBSSxFQUFHMkwsRUFBTzhCLEVBQU8sSUFBTWlVLEdBQ2xEQSxFQUFRemhCLEtBQUtNLElBQUksRUFBSU4sS0FBS0QsSUFBSSxFQUFHeU4sRUFBTyxHQUFLNUIsR0FBUTZWLEdBQzdEdGhCLElBQ0tzaEIsRUFBUXpoQixLQUFLTSxJQUFJLEVBQUlOLEtBQUtELElBQUksRUFBRzRMLEVBQU82QixFQUFPLElBQU1pVSxHQUNsREEsRUFBUXpoQixLQUFLTSxJQUFJLEVBQUlOLEtBQUtELElBQUksRUFBR3lOLEVBQU8sR0FBSzNCLEdBQVE0VixJQUUxRCxDQUFDdmhCLEVBQUdDLEtBV2hCLFNBQVN1aEIsR0FBS2xVLEdBQ2pCLE9BQU9BLEVDbERYLFNBQVNtVSxHQUE2QnZkLEVBQVl3ZCxFQUFXQyxFQUFjQyxHQUN2RSxJQUFJQyxFQUFjLEdBQVNILEdBQWFDLEVBQWEsR0FDakRHLEVBQWM5VSxHQUFVMFUsR0FBYUMsRUFBYSxHQUN0RCxPQUFJQyxFQUNPOWhCLEtBQUtGLElBQUlzRSxFQUFZcEUsS0FBS0QsSUFBSWdpQixFQUFhQyxJQUUvQ2hpQixLQUFLRixJQUFJc0UsRUFBWXBFLEtBQUtGLElBQUlpaUIsRUFBYUMsSUFjdEQsU0FBU0MsR0FBMkI3ZCxFQUFZMUMsRUFBZUUsR0FDM0QsSUFBSXNnQixFQUFTbGlCLEtBQUtGLElBQUlzRSxFQUFZMUMsR0FZbEMsT0FWQXdnQixHQUNJbGlCLEtBQUtNLElBQUksRUFGRCxHQUVhTixLQUFLRCxJQUFJLEVBQUdxRSxFQUFhMUMsRUFBZ0IsSUFGdEQsR0FHSixFQUNKRSxJQUNBc2dCLEVBQVNsaUIsS0FBS0QsSUFBSW1pQixFQUFRdGdCLEdBQzFCc2dCLEdBQ0lsaUIsS0FBS00sSUFBSSxFQVBMLEdBT2lCTixLQUFLRCxJQUFJLEVBQUc2QixFQUFnQndDLEVBQWEsSUFQMUQsR0FTQSxHQUVMLEVBQU04ZCxFQUFRdGdCLEVBQWdCLEVBQW1CLEVBQWhCRixHQW1HckMsU0FBU3lnQixHQUF1QnpnQixFQUFlRSxFQUFld2dCLEVBQVlDLEVBQWVDLEdBQzVGLE9BQU8sU0FRR2xlLEVBQVk5TCxFQUFXb1YsRUFBTXlULEdBQ25DLFFBQW1CamxCLElBQWZrSSxFQUEwQixDQUMxQixJQUFJbWUsRUFBZUYsRUFDYlYsR0FBNkJqZ0IsRUFBZTJnQixFQUFlM1UsRUFBTTRVLEdBQ2pFNWdCLEVBRU4sWUFENEJ4RixJQUFma21CLEdBQTJCQSxJQUN4QmpCLEVBR1RjLEdBQTJCN2QsRUFBWW1lLEVBQWMzZ0IsR0FGakQsRUFBTXdDLEVBQVl4QyxFQUFlMmdCLEtDM0pqRCxTQUFTQyxHQUFRL1UsR0FDcEIsWUFBaUJ2UixJQUFidVIsRUFDTyxPQUdQLEVBT0QsU0FBUyxHQUFLQSxHQUNqQixZQUFpQnZSLElBQWJ1UixFQUNPQSxPQUdQLEVDbkJELFNBQVNnVixHQUFPMWhCLEdBQ25CLE9BQU9mLEtBQUswaUIsSUFBSTNoQixFQUFHLEdBUWhCLFNBQVM0aEIsR0FBUTVoQixHQUNwQixPQUFPLEVBQUkwaEIsR0FBTyxFQUFJMWhCLEdBUW5CLFNBQVM2aEIsR0FBUzdoQixHQUNyQixPQUFPLEVBQUlBLEVBQUlBLEVBQUksRUFBSUEsRUFBSUEsRUFBSUEsRUFRNUIsU0FBUzhoQixHQUFPOWhCLEdBQ25CLE9BQU9BLEVDNUJYLFNBQ1EsS0FEUixHQUlVLE9DYlYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbkgsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQTZCeENzb0IsR3pCR08sQ0FBQyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR3lCa1EzQixTQXhQOEIsU0FBVW5vQixHQUVwQyxTQUFTb29CLElBQ0wsSS9DWm1CQyxFQUduQkMsRUFFQUMsRUFDQUMsRUFMQUMsRStDV0l0b0IsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBcUNqQyxPQWhDQXdELEVBQU04WSxRdkI0SUgsQ0FBQ2pTLElBQVVBLEtBQVUsS0FBVyxLdUJ2SW5DN0csRUFBTXVvQixpQkFBbUIsRUFLekJ2b0IsRUFBTXdvQix5Q0FBMkMsRUFLakR4b0IsRUFBTXlvQiwyQkFBNkIsRUFTbkN6b0IsRUFBTTBvQiw2Qi9DekNhUixFK0N5QzRCLFNBQVVTLEVBQVVDLEVBQWtCQyxHQUNqRixJQUFLQSxFQUNELE9BQU9yc0IsS0FBS3NzQixzQkFBc0JGLEdBRXRDLElBQUlHLEVBQVF2c0IsS0FBS3VzQixRQUVqQixPQURBQSxFQUFNQyxlQUFlSCxHQUNkRSxFQUFNRCxzQkFBc0JGLEkvQzlDdkNOLEdBQVMsRUFNTixXQUNILElBQUlXLEVBQVczcEIsTUFBTTFDLFVBQVV1YSxNQUFNM1gsS0FBS2pCLFdBTzFDLE9BTksrcEIsR0FBVTlyQixPQUFTNnJCLEdBQWEsRUFBWVksRUFBVWIsS0FDdkRFLEdBQVMsRUFDVEQsRUFBVzdyQixLQUNYNHJCLEVBQVdhLEVBQ1hkLEVBQWFELEVBQUdubUIsTUFBTXZGLEtBQU0rQixZQUV6QjRwQixJK0NrQ0Fub0IsRUE4TVgsT0FyUEEsR0FBVWlvQixFQUFVcG9CLEdBZ0RwQm9vQixFQUFTcnJCLFVBQVVzc0Isb0JBQXNCLFNBQVVOLEVBQWtCQyxHQUNqRSxPQUFPcnNCLEtBQUtrc0IsNEJBQTRCbHNCLEtBQUtvRyxjQUFlZ21CLEVBQWtCQyxJQU9sRlosRUFBU3JyQixVQUFVbXNCLE1BQVEsV0FDdkIsT0FBTyxLQVVYZCxFQUFTcnJCLFVBQVV1c0IsZUFBaUIsU0FBVS9qQixFQUFHQyxFQUFHK2pCLEVBQWNDLEdBQzlELE9BQU8sS0FPWHBCLEVBQVNyckIsVUFBVThULFdBQWEsU0FBVXRMLEVBQUdDLEdBQ3pDLElBQUlpa0IsRUFBUTlzQixLQUFLK3NCLGdCQUFnQixDQUFDbmtCLEVBQUdDLElBQ3JDLE9BQU9pa0IsRUFBTSxLQUFPbGtCLEdBQUtra0IsRUFBTSxLQUFPamtCLEdBVTFDNGlCLEVBQVNyckIsVUFBVTJzQixnQkFBa0IsU0FBVXJPLEVBQU9zTyxHQUNsRCxJQUFJSixFQUFlSSxHQUFzQyxDQUFDQyxJQUFLQSxLQUUvRCxPQURBanRCLEtBQUsyc0IsZUFBZWpPLEVBQU0sR0FBSUEsRUFBTSxHQUFJa08sRUFBY3ZpQixLQUMvQ3VpQixHQVNYbkIsRUFBU3JyQixVQUFVOHNCLHFCQUF1QixTQUFVMWMsR0FDaEQsT0FBT3hRLEtBQUtrVSxXQUFXMUQsRUFBVyxHQUFJQSxFQUFXLEtBUXJEaWIsRUFBU3JyQixVQUFVK3NCLGNBQWdCLFNBQVUzaEIsR0FDekMsT0FBTyxLQVFYaWdCLEVBQVNyckIsVUFBVXFMLFVBQVksU0FBVWlKLEdBQ3JDLEdBQUkxVSxLQUFLK3JCLGlCQUFtQi9yQixLQUFLb0csY0FBZSxDQUM1QyxJQUFJb0YsRUFBU3hMLEtBQUttdEIsY0FBY250QixLQUFLc2MsVUFDakM4USxNQUFNNWhCLEVBQU8sS0FBTzRoQixNQUFNNWhCLEVBQU8sTUFDakNtSixHQUFvQm5KLEdBRXhCeEwsS0FBSytyQixnQkFBa0IvckIsS0FBS29HLGNBRWhDLE92QnNkRCxTQUF3Qm9GLEVBQVFrSixHQUNuQyxPQUFJQSxHQUNBQSxFQUFXLEdBQUtsSixFQUFPLEdBQ3ZCa0osRUFBVyxHQUFLbEosRUFBTyxHQUN2QmtKLEVBQVcsR0FBS2xKLEVBQU8sR0FDdkJrSixFQUFXLEdBQUtsSixFQUFPLEdBQ2hCa0osR0FHQWxKLEV1Qi9kQTZoQixDQUFlcnRCLEtBQUtzYyxRQUFTNUgsSUFVeEMrVyxFQUFTcnJCLFVBQVVrdEIsT0FBUyxTQUFVcGEsRUFBT3FhLEdBQ3pDLEtBWUo5QixFQUFTcnJCLFVBQVVvdEIsTUFBUSxTQUFVeGEsRUFBSXlhLEVBQVFDLEdBQzdDLEtBV0pqQyxFQUFTcnJCLFVBQVV1dEIsU0FBVyxTQUFVQyxHQUNwQyxPQUFPNXRCLEtBQUtzc0Isc0JBQXNCc0IsRUFBWUEsSUFVbERuQyxFQUFTcnJCLFVBQVVrc0Isc0JBQXdCLFNBQVVGLEdBQ2pELE9BQU8sS0FPWFgsRUFBU3JyQixVQUFVeXRCLFFBQVUsV0FDekIsT0FBTyxLQVdYcEMsRUFBU3JyQixVQUFVb3NCLGVBQWlCLFNBQVV2TixHQUMxQyxLQVFKd00sRUFBU3JyQixVQUFVMHRCLGlCQUFtQixTQUFVdGlCLEdBQzVDLE9BQU8sS0FVWGlnQixFQUFTcnJCLFVBQVUydEIsVUFBWSxTQUFVQyxFQUFRQyxHQUM3QyxLQWlCSnhDLEVBQVNyckIsVUFBVXdTLFVBQVksU0FBVTVRLEVBQVFnZCxHQUU3QyxJQUFJa1AsRUFBYSxHQUFjbHNCLEdBQzNCaWQsRUFBY2lQLEVBQVc3USxZQUFjLGVBQ3JDLFNBQVU4USxFQUFlQyxFQUFnQmxaLEdBQ3ZDLElBQUltWixFQUFjSCxFQUFXemlCLFlBQ3pCNmlCLEVBQWtCSixFQUFXM1EsaUJBQzdCaVEsRUFBUTVYLEdBQVUwWSxHQUFtQjFZLEdBQVV5WSxHQUduRCxPQUZBeGIsR0FBaUIyWSxHQUFjOEMsRUFBZ0IsR0FBSUEsRUFBZ0IsR0FBSWQsR0FBUUEsRUFBTyxFQUFHLEVBQUcsR0M1UXJHLFNBQXFCelksRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVF0QyxFQUFXMmIsR0FHekUsSUFGQSxJQUFJQyxFQUFPRCxHQUFzQixHQUM3QnB0QixFQUFJLEVBQ0NzdEIsRUQwUThCLEVDMVFsQkEsRUFBSXhaLEVBQUt3WixHQUFLdlosRUFBUSxDQUN2QyxJQUFJdE0sRUFBSW1NLEVBQWdCMFosR0FDcEI1bEIsRUFBSWtNLEVBQWdCMFosRUFBSSxHQUM1QkQsRUFBS3J0QixLQUFPeVIsRUFBVSxHQUFLaEssRUFBSWdLLEVBQVUsR0FBSy9KLEVBQUkrSixFQUFVLEdBQzVENGIsRUFBS3J0QixLQUFPeVIsRUFBVSxHQUFLaEssRUFBSWdLLEVBQVUsR0FBSy9KLEVBQUkrSixFQUFVLEdBRTVEMmIsR0FBWUMsRUFBS3R0QixRQUFVQyxJQUMzQnF0QixFQUFLdHRCLE9BQVNDLEdEbVFOLENBQVlndEIsRUFBZSxFQUFHQSxFQUFjanRCLE9BQVFnVSxFQUFRc1csR0FBYzRDLEdBQ25Fek0sR0FBYXVNLEVBQVlsUCxFQUF6QjJDLENBQXNDd00sRUFBZUMsRUFBZ0JsWixJQUU5RXlNLEdBQWF1TSxFQUFZbFAsR0FFL0IsT0FEQWhmLEtBQUt3c0IsZUFBZXZOLEdBQ2JqZixNQUVKeXJCLEVBdFBrQixDQXVQM0IsR0VqU0YsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbnBCLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EyUnJDLFNBQVN3ckIsR0FBbUJDLEdBQy9CLElBQUl6WixFQVVKLE9BVEl5WixHQUFVLEdBQ1Z6WixFQUFTLEVIblJSLE9HcVJJeVosR0hwUkosT0dvUm9DQSxFQUNyQ3paLEVBQVMsRUFFSnlaLEdBQVUsS0FDZnpaLEVBQVMsR0FFZ0IsRUFrQmpDLFNBelJvQyxTQUFVN1IsR0FFMUMsU0FBU3VyQixJQUNMLElBQUlwckIsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBZ0JqQyxPQVhBd0QsRUFBTW1yQixPQUFTLEdBS2ZuckIsRUFBTTBSLE9BQVMsRUFLZjFSLEVBQU11UixnQkFBa0IsS0FDakJ2UixFQWtOWCxPQXBPQSxHQUFVb3JCLEVBQWdCdnJCLEdBeUIxQnVyQixFQUFleHVCLFVBQVUrc0IsY0FBZ0IsU0FBVTNoQixHQUMvQyxPekI4TDBDdUosRXlCOUxEL1UsS0FBSytVLGdCekI4THFCRSxFeUI5TERqVixLQUFLK1UsZ0JBQWdCN1QsT3pCOExmZ1UsRXlCOUx1QmxWLEtBQUtrVixPekJnTWpHSixHQURNSCxHeUIvTG1HbkosR3pCZ00zRXVKLEV5QmhNOEIsRXpCZ01MRSxFQUFLQyxHQUZoRSxJQUEyQ0gsRUFBeUJFLEVBQUtDLEd5QnhMNUUwWixFQUFleHVCLFVBQVV5dUIsZUFBaUIsV0FDdEMsT0FBTyxLQU9YRCxFQUFleHVCLFVBQVUwdUIsbUJBQXFCLFdBQzFDLE9BQU85dUIsS0FBSytVLGdCQUFnQjRGLE1BQU0sRUFBRzNhLEtBQUtrVixTQUs5QzBaLEVBQWV4dUIsVUFBVTJ1QixtQkFBcUIsV0FDMUMsT0FBTy91QixLQUFLK1UsaUJBT2hCNlosRUFBZXh1QixVQUFVNHVCLGtCQUFvQixXQUN6QyxPQUFPaHZCLEtBQUsrVSxnQkFBZ0I0RixNQUFNM2EsS0FBSytVLGdCQUFnQjdULE9BQVNsQixLQUFLa1YsU0FPekUwWixFQUFleHVCLFVBQVU2dUIsVUFBWSxXQUNqQyxPQUFPanZCLEtBQUsydUIsUUFPaEJDLEVBQWV4dUIsVUFBVWtzQixzQkFBd0IsU0FBVUYsR0FPdkQsR0FOSXBzQixLQUFLaXNCLDZCQUErQmpzQixLQUFLb0csZ0JBQ3pDcEcsS0FBS2dzQix5Q0FBMkMsRUFDaERoc0IsS0FBS2lzQiwyQkFBNkJqc0IsS0FBS29HLGVBSXZDZ21CLEVBQW1CLEdBQ2dDLElBQWxEcHNCLEtBQUtnc0IsMENBQ0ZJLEdBQW9CcHNCLEtBQUtnc0IseUNBQzdCLE9BQU9oc0IsS0FFWCxJQUFJa3ZCLEVBQXFCbHZCLEtBQUttdkIsOEJBQThCL0MsR0FFNUQsT0FEZ0M4QyxFQUFtQkgscUJBQ3JCN3RCLE9BQVNsQixLQUFLK1UsZ0JBQWdCN1QsT0FDakRndUIsR0FTUGx2QixLQUFLZ3NCLHlDQUEyQ0ksRUFDekNwc0IsT0FRZjR1QixFQUFleHVCLFVBQVUrdUIsOEJBQWdDLFNBQVUvQyxHQUMvRCxPQUFPcHNCLE1BS1g0dUIsRUFBZXh1QixVQUFVZ3ZCLFVBQVksV0FDakMsT0FBT3B2QixLQUFLa1YsUUFNaEIwWixFQUFleHVCLFVBQVVpdkIsbUJBQXFCLFNBQVVWLEVBQVE1WixHQUM1RC9VLEtBQUtrVixPQUFTd1osR0FBbUJDLEdBQ2pDM3VCLEtBQUsydUIsT0FBU0EsRUFDZDN1QixLQUFLK1UsZ0JBQWtCQSxHQU8zQjZaLEVBQWV4dUIsVUFBVWt2QixlQUFpQixTQUFVeGIsRUFBYXliLEdBQzdELEtBUUpYLEVBQWV4dUIsVUFBVW92QixVQUFZLFNBQVViLEVBQVE3YSxFQUFhMmIsR0FFaEUsSUFBSXZhLEVBQ0osR0FBSXlaLEVBQ0F6WixFQUFTd1osR0FBbUJDLE9BRTNCLENBQ0QsSUFBSyxJQUFJeHRCLEVBQUksRUFBR0EsRUFBSXN1QixJQUFXdHVCLEVBQUcsQ0FDOUIsR0FBMkIsSUFBdkIyUyxFQUFZNVMsT0FHWixPQUZBbEIsS0FBSzJ1QixPQUFTLFFBQ2QzdUIsS0FBS2tWLE9BQVMsR0FJZHBCLEVBQW9DQSxFQUFZLEdBSXhENmEsRUFpRlosU0FBNEJ6WixHQUN4QixJQUFJeVosRUFVSixPQVRjLEdBQVZ6WixFQUNBeVosRUFBUyxHQUVNLEdBQVZ6WixFQUNMeVosRUhyUUMsTUd1UWMsR0FBVnpaLElBQ0x5WixFQUFTLElBRStDLEVBNUYzQ2UsQ0FEVHhhLEVBQVNwQixFQUFZNVMsUUFHekJsQixLQUFLMnVCLE9BQVNBLEVBQ2QzdUIsS0FBS2tWLE9BQVNBLEdBV2xCMFosRUFBZXh1QixVQUFVb3NCLGVBQWlCLFNBQVV2TixHQUM1Q2pmLEtBQUsrVSxrQkFDTGtLLEVBQVlqZixLQUFLK1UsZ0JBQWlCL1UsS0FBSytVLGdCQUFpQi9VLEtBQUtrVixRQUM3RGxWLEtBQUttRyxZQVVieW9CLEVBQWV4dUIsVUFBVWt0QixPQUFTLFNBQVVwYSxFQUFPcWEsR0FDL0MsSUFBSXhZLEVBQWtCL1UsS0FBSyt1QixxQkFDM0IsR0FBSWhhLEVBQWlCLENBQ2pCLElBQUlHLEVBQVNsVixLQUFLb3ZCLGFEbkx2QixTQUFnQnJhLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRaEMsRUFBT3FhLEVBQVFnQixHQU94RSxJQU5BLElBQUlDLEVBQU9ELEdBQXNCLEdBQzdCamIsRUFBTTVLLEtBQUs0SyxJQUFJSixHQUNmRyxFQUFNM0ssS0FBSzJLLElBQUlILEdBQ2Z5YyxFQUFVcEMsRUFBTyxHQUNqQnFDLEVBQVVyQyxFQUFPLEdBQ2pCcHNCLEVBQUksRUFDQ3N0QixFQzZLdUIsRUQ3S1hBLEVBQUl4WixFQUFLd1osR0FBS3ZaLEVBQVEsQ0FDdkMsSUFBSThZLEVBQVNqWixFQUFnQjBaLEdBQUtrQixFQUM5QjFCLEVBQVNsWixFQUFnQjBaLEVBQUksR0FBS21CLEVBQ3RDcEIsRUFBS3J0QixLQUFPd3VCLEVBQVUzQixFQUFTMWEsRUFBTTJhLEVBQVM1YSxFQUM5Q21iLEVBQUtydEIsS0FBT3l1QixFQUFVNUIsRUFBUzNhLEVBQU00YSxFQUFTM2EsRUFDOUMsSUFBSyxJQUFJdWMsRUFBSXBCLEVBQUksRUFBR29CLEVBQUlwQixFQUFJdlosSUFBVTJhLEVBQ2xDckIsRUFBS3J0QixLQUFPNFQsRUFBZ0I4YSxHQUdoQ3RCLEdBQVlDLEVBQUt0dEIsUUFBVUMsSUFDM0JxdEIsRUFBS3R0QixPQUFTQyxHQ21LVixDQUFPNFQsRUFBaUIsRUFBR0EsRUFBZ0I3VCxPQUFRZ1UsRUFBUWhDLEVBQU9xYSxFQUFReFksR0FDMUUvVSxLQUFLbUcsWUFZYnlvQixFQUFleHVCLFVBQVVvdEIsTUFBUSxTQUFVeGEsRUFBSXlhLEVBQVFDLEdBQ25ELElBQUl6YSxFQUFLd2EsT0FDRTdvQixJQUFQcU8sSUFDQUEsRUFBS0QsR0FFVCxJQUFJdWEsRUFBU0csRUFDUkgsSUFDREEsRUFBUzFYLEdBQVU3VixLQUFLeUwsY0FFNUIsSUFBSXNKLEVBQWtCL1UsS0FBSyt1QixxQkFDM0IsR0FBSWhhLEVBQWlCLENBQ2pCLElBQUlHLEVBQVNsVixLQUFLb3ZCLGFEM0t2QixTQUFlcmEsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVFsQyxFQUFJQyxFQUFJc2EsRUFBUWdCLEdBS3hFLElBSkEsSUFBSUMsRUFBT0QsR0FBc0IsR0FDN0JvQixFQUFVcEMsRUFBTyxHQUNqQnFDLEVBQVVyQyxFQUFPLEdBQ2pCcHNCLEVBQUksRUFDQ3N0QixFQ3VLc0IsRUR2S1ZBLEVBQUl4WixFQUFLd1osR0FBS3ZaLEVBQVEsQ0FDdkMsSUFBSThZLEVBQVNqWixFQUFnQjBaLEdBQUtrQixFQUM5QjFCLEVBQVNsWixFQUFnQjBaLEVBQUksR0FBS21CLEVBQ3RDcEIsRUFBS3J0QixLQUFPd3VCLEVBQVUzYyxFQUFLZ2IsRUFDM0JRLEVBQUtydEIsS0FBT3l1QixFQUFVM2MsRUFBS2diLEVBQzNCLElBQUssSUFBSTRCLEVBQUlwQixFQUFJLEVBQUdvQixFQUFJcEIsRUFBSXZaLElBQVUyYSxFQUNsQ3JCLEVBQUtydEIsS0FBTzRULEVBQWdCOGEsR0FHaEN0QixHQUFZQyxFQUFLdHRCLFFBQVVDLElBQzNCcXRCLEVBQUt0dEIsT0FBU0MsR0M2SlYsQ0FBTTRULEVBQWlCLEVBQUdBLEVBQWdCN1QsT0FBUWdVLEVBQVFsQyxFQUFJQyxFQUFJc2EsRUFBUXhZLEdBQzFFL1UsS0FBS21HLFlBVWJ5b0IsRUFBZXh1QixVQUFVMnRCLFVBQVksU0FBVUMsRUFBUUMsR0FDbkQsSUFBSWxaLEVBQWtCL1UsS0FBSyt1QixxQkFDM0IsR0FBSWhhLEVBQWlCLENBQ2pCLElBQUlHLEVBQVNsVixLQUFLb3ZCLGFEN0p2QixTQUFtQnJhLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFROFksRUFBUUMsRUFBUU0sR0FHNUUsSUFGQSxJQUFJQyxFQUFPRCxHQUFzQixHQUM3QnB0QixFQUFJLEVBQ0NzdEIsRUMySjBCLEVEM0pkQSxFQUFJeFosRUFBS3daLEdBQUt2WixFQUFRLENBQ3ZDc1osRUFBS3J0QixLQUFPNFQsRUFBZ0IwWixHQUFLVCxFQUNqQ1EsRUFBS3J0QixLQUFPNFQsRUFBZ0IwWixFQUFJLEdBQUtSLEVBQ3JDLElBQUssSUFBSTRCLEVBQUlwQixFQUFJLEVBQUdvQixFQUFJcEIsRUFBSXZaLElBQVUyYSxFQUNsQ3JCLEVBQUtydEIsS0FBTzRULEVBQWdCOGEsR0FHaEN0QixHQUFZQyxFQUFLdHRCLFFBQVVDLElBQzNCcXRCLEVBQUt0dEIsT0FBU0MsR0NtSlYsQ0FBVTRULEVBQWlCLEVBQUdBLEVBQWdCN1QsT0FBUWdVLEVBQVE4WSxFQUFRQyxFQUFRbFosR0FDOUUvVSxLQUFLbUcsWUFHTnlvQixFQXJPd0IsQ0FzT2pDLElDclBGLFNBQVNrQixHQUFjL2EsRUFBaUJnYixFQUFTQyxFQUFTOWEsRUFBUXRNLEVBQUdDLEVBQUcrakIsR0FDcEUsSUFJSTVYLEVBSkE3TCxFQUFLNEwsRUFBZ0JnYixHQUNyQjNtQixFQUFLMkwsRUFBZ0JnYixFQUFVLEdBQy9CeG1CLEVBQUt3TCxFQUFnQmliLEdBQVc3bUIsRUFDaENLLEVBQUt1TCxFQUFnQmliLEVBQVUsR0FBSzVtQixFQUV4QyxHQUFXLElBQVBHLEdBQW1CLElBQVBDLEVBQ1p3TCxFQUFTK2EsTUFFUixDQUNELElBQUl0bUIsSUFBTWIsRUFBSU8sR0FBTUksR0FBTVYsRUFBSU8sR0FBTUksSUFBT0QsRUFBS0EsRUFBS0MsRUFBS0EsR0FDMUQsR0FBSUMsRUFBSSxFQUNKdUwsRUFBU2diLE1BRVIsSUFBSXZtQixFQUFJLEVBQUcsQ0FDWixJQUFLLElBQUl0SSxFQUFJLEVBQUdBLEVBQUkrVCxJQUFVL1QsRUFDMUJ5ckIsRUFBYXpyQixHQUFLMEksR0FBS2tMLEVBQWdCZ2IsRUFBVTV1QixHQUFJNFQsRUFBZ0JpYixFQUFVN3VCLEdBQUlzSSxHQUd2RixZQURBbWpCLEVBQWExckIsT0FBU2dVLEdBSXRCRixFQUFTK2EsR0FHakIsSUFBUzV1QixFQUFJLEVBQUdBLEVBQUkrVCxJQUFVL1QsRUFDMUJ5ckIsRUFBYXpyQixHQUFLNFQsRUFBZ0JDLEVBQVM3VCxHQUUvQ3lyQixFQUFhMXJCLE9BQVNnVSxFQVluQixTQUFTK2EsR0FBZ0JsYixFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUXpNLEdBQ2xFLElBQUlVLEVBQUs0TCxFQUFnQkMsR0FDckI1TCxFQUFLMkwsRUFBZ0JDLEVBQVMsR0FDbEMsSUFBS0EsR0FBVUUsRUFBUUYsRUFBU0MsRUFBS0QsR0FBVUUsRUFBUSxDQUNuRCxJQUFJN0wsRUFBSzBMLEVBQWdCQyxHQUNyQjFMLEVBQUt5TCxFQUFnQkMsRUFBUyxHQUM5QmtiLEVBQWUsRUFBVS9tQixFQUFJQyxFQUFJQyxFQUFJQyxHQUNyQzRtQixFQUFlem5CLElBQ2ZBLEVBQU15bkIsR0FFVi9tQixFQUFLRSxFQUNMRCxFQUFLRSxFQUVULE9BQU9iLEVBZ0RKLFNBQVMwbkIsR0FBbUJwYixFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUWtiLEVBQVVDLEVBQVF6bkIsRUFBR0MsRUFBRytqQixFQUFjQyxFQUFvQnlELEdBQy9ILEdBQUl0YixHQUFVQyxFQUNWLE9BQU80WCxFQUVYLElBQUkxckIsRUFBR292QixFQUNQLEdBQWlCLElBQWJILEVBQWdCLENBR2hCLElBREFHLEVBQWtCLEVBQVUzbkIsRUFBR0MsRUFBR2tNLEVBQWdCQyxHQUFTRCxFQUFnQkMsRUFBUyxLQUM5RDZYLEVBQW9CLENBQ3RDLElBQUsxckIsRUFBSSxFQUFHQSxFQUFJK1QsSUFBVS9ULEVBQ3RCeXJCLEVBQWF6ckIsR0FBSzRULEVBQWdCQyxFQUFTN1QsR0FHL0MsT0FEQXlyQixFQUFhMXJCLE9BQVNnVSxFQUNmcWIsRUFHUCxPQUFPMUQsRUFLZixJQUZBLElBQUkyRCxFQUFXRixHQUE4QixDQUFDckQsSUFBS0EsS0FDL0Nqb0IsRUFBUWdRLEVBQVNFLEVBQ2RsUSxFQUFRaVEsR0FHWCxHQUZBNmEsR0FBYy9hLEVBQWlCL1AsRUFBUWtRLEVBQVFsUSxFQUFPa1EsRUFBUXRNLEVBQUdDLEVBQUcybkIsSUFDcEVELEVBQWtCLEVBQVUzbkIsRUFBR0MsRUFBRzJuQixFQUFTLEdBQUlBLEVBQVMsS0FDbEMzRCxFQUFvQixDQUV0QyxJQURBQSxFQUFxQjBELEVBQ2hCcHZCLEVBQUksRUFBR0EsRUFBSStULElBQVUvVCxFQUN0QnlyQixFQUFhenJCLEdBQUtxdkIsRUFBU3J2QixHQUUvQnlyQixFQUFhMXJCLE9BQVNnVSxFQUN0QmxRLEdBQVNrUSxPQWFUbFEsR0FDSWtRLEVBQ0l4TSxLQUFLRCxLQUFNQyxLQUFLb1gsS0FBS3lRLEdBQW1CN25CLEtBQUtvWCxLQUFLK00sSUFDOUN1RCxFQUNBLEVBQUcsR0FHdkIsR0FBSUMsSUFFQVAsR0FBYy9hLEVBQWlCRSxFQUFNQyxFQUFRRixFQUFRRSxFQUFRdE0sRUFBR0MsRUFBRzJuQixJQUNuRUQsRUFBa0IsRUFBVTNuQixFQUFHQyxFQUFHMm5CLEVBQVMsR0FBSUEsRUFBUyxLQUNsQzNELEdBQW9CLENBRXRDLElBREFBLEVBQXFCMEQsRUFDaEJwdkIsRUFBSSxFQUFHQSxFQUFJK1QsSUFBVS9ULEVBQ3RCeXJCLEVBQWF6ckIsR0FBS3F2QixFQUFTcnZCLEdBRS9CeXJCLEVBQWExckIsT0FBU2dVLEVBRzlCLE9BQU8yWCxFQzVKSixTQUFTNEQsR0FBbUIxYixFQUFpQkMsRUFBUWxCLEVBQWFvQixHQUNyRSxJQUFLLElBQUkvVCxFQUFJLEVBQUdXLEVBQUtnUyxFQUFZNVMsT0FBUUMsRUFBSVcsSUFBTVgsRUFFL0MsSUFEQSxJQUFJcVAsRUFBYXNELEVBQVkzUyxHQUNwQnN0QixFQUFJLEVBQUdBLEVBQUl2WixJQUFVdVosRUFDMUIxWixFQUFnQkMsS0FBWXhFLEVBQVdpZSxHQUcvQyxPQUFPelosRUNzTEosU0FBUzBiLEdBQUs3d0IsRUFBTyt0QixHQUN4QixPQUFPQSxFQUFZbGxCLEtBQUt5QyxNQUFNdEwsRUFBUSt0QixHQXFCbkMsU0FBUytDLEdBQVM1YixFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTBZLEVBQVdnRCxFQUEyQkMsR0FFakcsR0FBSTdiLEdBQVVDLEVBQ1YsT0FBTzRiLEVBR1gsSUFRSXhuQixFQUFJQyxFQVJKSCxFQUFLdW5CLEdBQUszYixFQUFnQkMsR0FBUzRZLEdBQ25DeGtCLEVBQUtzbkIsR0FBSzNiLEVBQWdCQyxFQUFTLEdBQUk0WSxHQUMzQzVZLEdBQVVFLEVBRVYwYixFQUEwQkMsS0FBc0IxbkIsRUFDaER5bkIsRUFBMEJDLEtBQXNCem5CLEVBSWhELEdBSUksR0FIQUMsRUFBS3FuQixHQUFLM2IsRUFBZ0JDLEdBQVM0WSxHQUNuQ3RrQixFQUFLb25CLEdBQUszYixFQUFnQkMsRUFBUyxHQUFJNFksSUFDdkM1WSxHQUFVRSxJQUNJRCxFQU9WLE9BRkEyYixFQUEwQkMsS0FBc0J4bkIsRUFDaER1bkIsRUFBMEJDLEtBQXNCdm5CLEVBQ3pDdW5CLFFBRU54bkIsR0FBTUYsR0FBTUcsR0FBTUYsR0FDM0IsS0FBTzRMLEVBQVNDLEdBQUssQ0FFakIsSUFBSTJCLEVBQUs4WixHQUFLM2IsRUFBZ0JDLEdBQVM0WSxHQUNuQzlXLEVBQUs0WixHQUFLM2IsRUFBZ0JDLEVBQVMsR0FBSTRZLEdBRzNDLEdBRkE1WSxHQUFVRSxFQUVOMEIsR0FBTXZOLEdBQU15TixHQUFNeE4sRUFBdEIsQ0FJQSxJQUFJd0osRUFBTXpKLEVBQUtGLEVBQ1g0SixFQUFNekosRUFBS0YsRUFFWCtKLEVBQU15RCxFQUFLek4sRUFDWGlLLEVBQU0wRCxFQUFLMU4sRUFJWDBKLEVBQU1NLEdBQU9MLEVBQU1JLElBQ2pCTCxFQUFNLEdBQUtLLEVBQU1MLEdBQVFBLEdBQU9LLEdBQVFMLEVBQU0sR0FBS0ssRUFBTUwsS0FDekRDLEVBQU0sR0FBS0ssRUFBTUwsR0FBUUEsR0FBT0ssR0FBUUwsRUFBTSxHQUFLSyxFQUFNTCxJQUUzRDFKLEVBQUt1TixFQUNMdE4sRUFBS3dOLElBTVQ4WixFQUEwQkMsS0FBc0J4bkIsRUFDaER1bkIsRUFBMEJDLEtBQXNCdm5CLEVBQ2hESCxFQUFLRSxFQUNMRCxFQUFLRSxFQUNMRCxFQUFLdU4sRUFDTHROLEVBQUt3TixJQUtULE9BRkE4WixFQUEwQkMsS0FBc0J4bkIsRUFDaER1bkIsRUFBMEJDLEtBQXNCdm5CLEVBQ3pDdW5CLEVDblNKLFNBQVNDLEdBQW1CL2IsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVE2YixHQUdyRSxJQUZBLElBQUlqZCxPQUFrQ2xQLElBQXBCbXNCLEVBQWdDQSxFQUFrQixHQUNoRTV2QixFQUFJLEVBQ0NzdEIsRUFBSXpaLEVBQVF5WixFQUFJeFosRUFBS3daLEdBQUt2WixFQUMvQnBCLEVBQVkzUyxLQUFPNFQsRUFBZ0I0RixNQUFNOFQsRUFBR0EsRUFBSXZaLEdBR3BELE9BREFwQixFQUFZNVMsT0FBU0MsRUFDZDJTLEVDUkosU0FBU2tkLEdBQVdqYyxFQUFpQkMsRUFBUUMsRUFBS0MsR0FJckQsSUFIQSxJQUFJK2IsRUFBWSxFQUNaOW5CLEVBQUs0TCxFQUFnQkUsRUFBTUMsR0FDM0I5TCxFQUFLMkwsRUFBZ0JFLEVBQU1DLEVBQVMsR0FDakNGLEVBQVNDLEVBQUtELEdBQVVFLEVBQVEsQ0FDbkMsSUFBSTdMLEVBQUswTCxFQUFnQkMsR0FDckIxTCxFQUFLeUwsRUFBZ0JDLEVBQVMsR0FDbENpYyxHQUFhN25CLEVBQUtDLEVBQUtGLEVBQUtHLEVBQzVCSCxFQUFLRSxFQUNMRCxFQUFLRSxFQUVULE9BQU8ybkIsRUFBWSxFQ3JCdkIsSUFBSSxHQUF3QyxXQUN4QyxJQUFJM3VCLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0FtSjVDLFNBakhnQyxTQUFVRyxHQU90QyxTQUFTNnRCLEVBQVdwZCxFQUFheWIsR0FDN0IsSUFBSS9yQixFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FtQmpDLE9BZEF3RCxFQUFNMnRCLFdBQWEsRUFLbkIzdEIsRUFBTTR0QixtQkFBcUIsT0FDUnhzQixJQUFmMnFCLEdBQTZCenNCLE1BQU11RCxRQUFReU4sRUFBWSxJQUt2RHRRLEVBQU04ckIsZUFDc0QsRUFBZUMsR0FMM0UvckIsRUFBTTZyQixtQkFBbUJFLEVBQ0ksR0FNMUIvckIsRUFvRlgsT0E5R0EsR0FBVTB0QixFQUFZN3RCLEdBaUN0QjZ0QixFQUFXOXdCLFVBQVVtc0IsTUFBUSxXQUN6QixPQUFPLElBQUkyRSxFQUFXbHhCLEtBQUsrVSxnQkFBZ0I0RixRQUFTM2EsS0FBSzJ1QixTQVM3RHVDLEVBQVc5d0IsVUFBVXVzQixlQUFpQixTQUFVL2pCLEVBQUdDLEVBQUcrakIsRUFBY0MsR0FDaEUsT0FBSUEsRUFBcUI3WSxHQUF5QmhVLEtBQUt5TCxZQUFhN0MsRUFBR0MsR0FDNURna0IsR0FFUDdzQixLQUFLb3hCLG1CQUFxQnB4QixLQUFLb0csZ0JBQy9CcEcsS0FBS214QixVQUFZem9CLEtBQUtvWCxLQUFLbVEsR0FBZ0Jqd0IsS0FBSytVLGdCQUFpQixFQUFHL1UsS0FBSytVLGdCQUFnQjdULE9BQVFsQixLQUFLa1YsT0FBUSxJQUM5R2xWLEtBQUtveEIsa0JBQW9CcHhCLEtBQUtvRyxlQUUzQitwQixHQUFtQm53QixLQUFLK1UsZ0JBQWlCLEVBQUcvVSxLQUFLK1UsZ0JBQWdCN1QsT0FBUWxCLEtBQUtrVixPQUFRbFYsS0FBS214QixXQUFXLEVBQU12b0IsRUFBR0MsRUFBRytqQixFQUFjQyxLQU8zSXFFLEVBQVc5d0IsVUFBVXNWLFFBQVUsV0FDM0IsT0FBT3NiLEdBQWVoeEIsS0FBSytVLGdCQUFpQixFQUFHL1UsS0FBSytVLGdCQUFnQjdULE9BQVFsQixLQUFLa1YsU0FPckZnYyxFQUFXOXdCLFVBQVV5dUIsZUFBaUIsV0FDbEMsT0FBT2lDLEdBQW1COXdCLEtBQUsrVSxnQkFBaUIsRUFBRy9VLEtBQUsrVSxnQkFBZ0I3VCxPQUFRbEIsS0FBS2tWLFNBT3pGZ2MsRUFBVzl3QixVQUFVK3VCLDhCQUFnQyxTQUFVL0MsR0FDM0QsSUFBSXdFLEVBQTRCLEdBRWhDLE9BREFBLEVBQTBCMXZCLE9IL0MzQixTQUF3QjZULEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRa1gsRUFBa0J3RSxFQUEyQkMsR0FDOUcsSUFBSTV2QixHQUFLZ1UsRUFBTUQsR0FBVUUsRUFDekIsR0FBSWpVLEVBQUksRUFBRyxDQUNQLEtBQU8rVCxFQUFTQyxFQUFLRCxHQUFVRSxFQUMzQjBiLEVBQTBCQyxLQUFzQjliLEVBQWdCQyxHQUNoRTRiLEVBQTBCQyxLQUN0QjliLEVBQWdCQyxFQUFTLEdBRWpDLE9BQU82YixFQUdYLElBQUlRLEVBQVUsSUFBSXZ1QixNQUFNN0IsR0FDeEJvd0IsRUFBUSxHQUFLLEVBQ2JBLEVBQVFwd0IsRUFBSSxHQUFLLEVBSWpCLElBRkEsSUFBSXF3QixFQUFRLENBQUN0YyxFQUFRQyxFQUFNQyxHQUN2QmxRLEVBQVEsRUFDTHNzQixFQUFNcHdCLE9BQVMsR0FBRyxDQVFyQixJQVBBLElBQUlxd0IsRUFBT0QsRUFBTUUsTUFDYkMsRUFBUUgsRUFBTUUsTUFDZEUsRUFBcUIsRUFDckJ2b0IsRUFBSzRMLEVBQWdCMGMsR0FDckJyb0IsRUFBSzJMLEVBQWdCMGMsRUFBUSxHQUM3QnBvQixFQUFLMEwsRUFBZ0J3YyxHQUNyQmpvQixFQUFLeUwsRUFBZ0J3YyxFQUFPLEdBQ3ZCcHdCLEVBQUlzd0IsRUFBUXZjLEVBQVEvVCxFQUFJb3dCLEVBQU1wd0IsR0FBSytULEVBQVEsQ0FDaEQsSUFFSXljLEVBQW9Cem9CLEVBRmhCNkwsRUFBZ0I1VCxHQUNoQjRULEVBQWdCNVQsRUFBSSxHQUN5QmdJLEVBQUlDLEVBQUlDLEVBQUlDLEdBQzdEcW9CLEVBQW9CRCxJQUNwQjFzQixFQUFRN0QsRUFDUnV3QixFQUFxQkMsR0FHekJELEVBQXFCdEYsSUFDckJpRixHQUFTcnNCLEVBQVFnUSxHQUFVRSxHQUFVLEVBQ2pDdWMsRUFBUXZjLEVBQVNsUSxHQUNqQnNzQixFQUFNN3VCLEtBQUtndkIsRUFBT3pzQixHQUVsQkEsRUFBUWtRLEVBQVNxYyxHQUNqQkQsRUFBTTd1QixLQUFLdUMsRUFBT3VzQixJQUk5QixJQUFTcHdCLEVBQUksRUFBR0EsRUFBSUYsSUFBS0UsRUFDakJrd0IsRUFBUWx3QixLQUNSeXZCLEVBQTBCQyxLQUN0QjliLEVBQWdCQyxFQUFTN1QsRUFBSStULEdBQ2pDMGIsRUFBMEJDLEtBQ3RCOWIsRUFBZ0JDLEVBQVM3VCxFQUFJK1QsRUFBUyxJQUdsRCxPQUFPMmIsRUdMZ0NlLENBQWU1eEIsS0FBSytVLGdCQUFpQixFQUFHL1UsS0FBSytVLGdCQUFnQjdULE9BQVFsQixLQUFLa1YsT0FBUWtYLEVBQWtCd0UsRUFBMkIsR0FDM0osSUFBSU0sRUFBV04sRUFBMkIsS0FPckRNLEVBQVc5d0IsVUFBVXl0QixRQUFVLFdBQzNCLE1DNUdTLGNEb0hicUQsRUFBVzl3QixVQUFVMHRCLGlCQUFtQixTQUFVdGlCLEdBQzlDLE9BQU8sR0FRWDBsQixFQUFXOXdCLFVBQVVrdkIsZUFBaUIsU0FBVXhiLEVBQWF5YixHQUN6RHZ2QixLQUFLd3ZCLFVBQVVELEVBQVl6YixFQUFhLEdBQ25DOVQsS0FBSytVLGtCQUNOL1UsS0FBSytVLGdCQUFrQixJQUUzQi9VLEtBQUsrVSxnQkFBZ0I3VCxPQUFTdXZCLEdBQW1CendCLEtBQUsrVSxnQkFBaUIsRUFBR2pCLEVBQWE5VCxLQUFLa1YsUUFDNUZsVixLQUFLbUcsV0FFRitxQixFQS9Hb0IsQ0FnSDdCLElFbEpGLElBQUksR0FBd0MsV0FDeEMsSUFBSTV1QixFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBd0g1QyxTQTNGMkIsU0FBVUcsR0FNakMsU0FBU3d1QixFQUFNL2QsRUFBYXliLEdBQ3hCLElBQUkvckIsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBRWpDLE9BREF3RCxFQUFNOHJCLGVBQWV4YixFQUFheWIsR0FDM0IvckIsRUFnRlgsT0F4RkEsR0FBVXF1QixFQUFPeHVCLEdBZWpCd3VCLEVBQU16eEIsVUFBVW1zQixNQUFRLFdBQ3BCLElBQUk3TixFQUFRLElBQUltVCxFQUFNN3hCLEtBQUsrVSxnQkFBZ0I0RixRQUFTM2EsS0FBSzJ1QixRQUV6RCxPQURBalEsRUFBTTNXLGdCQUFnQi9ILE1BQ2YwZSxHQVNYbVQsRUFBTXp4QixVQUFVdXNCLGVBQWlCLFNBQVUvakIsRUFBR0MsRUFBRytqQixFQUFjQyxHQUMzRCxJQUFJOVgsRUFBa0IvVSxLQUFLK1UsZ0JBQ3ZCd2IsRUFBa0IsRUFBVTNuQixFQUFHQyxFQUFHa00sRUFBZ0IsR0FBSUEsRUFBZ0IsSUFDMUUsR0FBSXdiLEVBQWtCMUQsRUFBb0IsQ0FFdEMsSUFEQSxJQUFJM1gsRUFBU2xWLEtBQUtrVixPQUNUL1QsRUFBSSxFQUFHQSxFQUFJK1QsSUFBVS9ULEVBQzFCeXJCLEVBQWF6ckIsR0FBSzRULEVBQWdCNVQsR0FHdEMsT0FEQXlyQixFQUFhMXJCLE9BQVNnVSxFQUNmcWIsRUFHUCxPQUFPMUQsR0FRZmdGLEVBQU16eEIsVUFBVXl1QixlQUFpQixXQUM3QixPQUFRN3VCLEtBQUsrVSxnQkFBdUIvVSxLQUFLK1UsZ0JBQWdCNEYsUUFBMUIsSUFPbkNrWCxFQUFNenhCLFVBQVUrc0IsY0FBZ0IsU0FBVTNoQixHQUN0QyxPakM0SWlEa0osRWlDNUlTbEosRWpDK0l2RGlKLEdBRkg3TCxHQURxQzRILEVpQzVJRHhRLEtBQUsrVSxpQmpDNkkxQixHQUNmbE0sRUFBSTJILEVBQVcsR0FDUzVILEVBQUdDLEVBQUc2TCxHQUgvQixJQUFzQ2xFLEVBQVlrRSxFQUNqRDlMLEVBQ0FDLEdpQ3ZJSmdwQixFQUFNenhCLFVBQVV5dEIsUUFBVSxXQUN0QixNRHBGRyxTQzRGUGdFLEVBQU16eEIsVUFBVTB0QixpQkFBbUIsU0FBVXRpQixHQUN6QyxPQUFPMEksR0FBVzFJLEVBQVF4TCxLQUFLK1UsZ0JBQWdCLEdBQUkvVSxLQUFLK1UsZ0JBQWdCLEtBTzVFOGMsRUFBTXp4QixVQUFVa3ZCLGVBQWlCLFNBQVV4YixFQUFheWIsR0FDcER2dkIsS0FBS3d2QixVQUFVRCxFQUFZemIsRUFBYSxHQUNuQzlULEtBQUsrVSxrQkFDTi9VLEtBQUsrVSxnQkFBa0IsSUFFM0IvVSxLQUFLK1UsZ0JBQWdCN1QsT056R3RCLFNBQTJCNlQsRUFBaUJDLEVBQVF4RSxFQUFZMEUsR0FDbkUsSUFBSyxJQUFJL1QsRUFBSSxFQUFHVyxFQUFLME8sRUFBV3RQLE9BQVFDLEVBQUlXLElBQU1YLEVBQzlDNFQsRUFBZ0JDLEtBQVl4RSxFQUFXclAsR0FFM0MsT0FBTzZULEVNcUcyQjhjLENBQWtCOXhCLEtBQUsrVSxnQkFBaUIsRUFBR2pCLEVBQWE5VCxLQUFLa1YsUUFDM0ZsVixLQUFLbUcsV0FFRjByQixFQXpGZSxDQTBGeEIsSUMzR0ssU0FBU0UsR0FBeUJoZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTFKLEdBUzNFLE9BUmM0SixHQUFjNUosR0FLNUIsU0FBVWdGLEdBQ04sT0FBUXdoQixHQUFxQmpkLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRMUUsRUFBVyxHQUFJQSxFQUFXLE9BYTlGLFNBQVN3aEIsR0FBcUJqZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUXRNLEVBQUdDLEdBVzFFLElBSEEsSUFBSW9wQixFQUFLLEVBQ0w5b0IsRUFBSzRMLEVBQWdCRSxFQUFNQyxHQUMzQjlMLEVBQUsyTCxFQUFnQkUsRUFBTUMsRUFBUyxHQUNqQ0YsRUFBU0MsRUFBS0QsR0FBVUUsRUFBUSxDQUNuQyxJQUFJN0wsRUFBSzBMLEVBQWdCQyxHQUNyQjFMLEVBQUt5TCxFQUFnQkMsRUFBUyxHQUM5QjVMLEdBQU1QLEVBQ0ZTLEVBQUtULElBQU1RLEVBQUtGLElBQU9OLEVBQUlPLElBQU9SLEVBQUlPLElBQU9HLEVBQUtGLEdBQU0sR0FDeEQ2b0IsSUFHQzNvQixHQUFNVCxJQUFNUSxFQUFLRixJQUFPTixFQUFJTyxJQUFPUixFQUFJTyxJQUFPRyxFQUFLRixHQUFNLEdBQzlENm9CLElBRUo5b0IsRUFBS0UsRUFDTEQsRUFBS0UsRUFFVCxPQUFjLElBQVAyb0IsRUFXSixTQUFTQyxHQUFzQm5kLEVBQWlCQyxFQUFRbWQsRUFBTWpkLEVBQVF0TSxFQUFHQyxHQUM1RSxHQUFvQixJQUFoQnNwQixFQUFLanhCLE9BQ0wsT0FBTyxFQUVYLElBQUs4d0IsR0FBcUJqZCxFQUFpQkMsRUFBUW1kLEVBQUssR0FBSWpkLEVBQVF0TSxFQUFHQyxHQUNuRSxPQUFPLEVBRVgsSUFBSyxJQUFJMUgsRUFBSSxFQUFHVyxFQUFLcXdCLEVBQUtqeEIsT0FBUUMsRUFBSVcsSUFBTVgsRUFDeEMsR0FBSTZ3QixHQUFxQmpkLEVBQWlCb2QsRUFBS2h4QixFQUFJLEdBQUlneEIsRUFBS2h4QixHQUFJK1QsRUFBUXRNLEVBQUdDLEdBQ3ZFLE9BQU8sRUFHZixPQUFPLEVDbEVKLFNBQVN1cEIsR0FBcUJyZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTFKLEdBQ3ZFLEluQ3VIMkJvSixFQUFTQyxFbUN2SGhDd2QsRUFBb0J2ZCxHbkMrS2pCLENBQUN6SyxJQUFVQSxLQUFVLEtBQVcsS21DL0tzQjBLLEVBQWlCQyxFQUFRQyxFQUFLQyxHQUMzRixRQUFLK0IsR0FBV3pMLEVBQVE2bUIsS25Dc0hZeGQsRW1DbkhUd2QsR25DbUhBemQsRW1DbkhScEosR25Db0hILElBQU1xSixFQUFRLElBQzFCQSxFQUFRLElBQU1ELEVBQVEsSUFDdEJBLEVBQVEsSUFBTUMsRUFBUSxJQUN0QkEsRUFBUSxJQUFNRCxFQUFRLEltQ3BIdEJ5ZCxFQUFrQixJQUFNN21CLEVBQU8sSUFBTTZtQixFQUFrQixJQUFNN21CLEVBQU8sSUFHcEU2bUIsRUFBa0IsSUFBTTdtQixFQUFPLElBQU02bUIsRUFBa0IsSUFBTTdtQixFQUFPLElDVHJFLFNBQWlCdUosRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVE3RSxHQUkxRCxJQUhBLElBRUlpaUIsRUFGQUMsRUFBUyxDQUFDeGQsRUFBZ0JDLEdBQVNELEVBQWdCQyxFQUFTLElBQzVEd2QsRUFBUyxHQUVOeGQsRUFBU0UsRUFBU0QsRUFBS0QsR0FBVUUsRUFBUSxDQUk1QyxHQUhBc2QsRUFBTyxHQUFLemQsRUFBZ0JDLEVBQVNFLEdBQ3JDc2QsRUFBTyxHQUFLemQsRUFBZ0JDLEVBQVNFLEVBQVMsR0FDOUNvZCxFQUFNamlCLEVBQVNraUIsRUFBUUMsR0FFbkIsT0FBT0YsRUFFWEMsRUFBTyxHQUFLQyxFQUFPLEdBQ25CRCxFQUFPLEdBQUtDLEVBQU8sR0FFdkIsT0FBTyxFREZBeFIsQ0FBZWpNLEVBQWlCQyxFQUFRQyxFQUFLQyxHQU9wRCxTQUFVcWQsRUFBUUMsR0FDZCxPbkMwbkJELFNBQTJCaG5CLEVBQVFpbkIsRUFBT3hkLEdBQzdDLElBQUlnQyxHQUFhLEVBQ2J5YixFQUFXdmUsR0FBdUIzSSxFQUFRaW5CLEdBQzFDRSxFQUFTeGUsR0FBdUIzSSxFQUFReUosR0FDNUMsR0N6cEJjLElEeXBCVnlkLEdDenBCVSxJRDBwQlZDLEVBQ0ExYixHQUFhLE1BRVosQ0FDRCxJQUFJN0MsRUFBTzVJLEVBQU8sR0FDZDZJLEVBQU83SSxFQUFPLEdBQ2Q4SSxFQUFPOUksRUFBTyxHQUNkK0ksRUFBTy9JLEVBQU8sR0FDZG9uQixFQUFTSCxFQUFNLEdBQ2ZJLEVBQVNKLEVBQU0sR0FDZkssRUFBTzdkLEVBQUksR0FDWDhkLEVBQU85ZCxFQUFJLEdBQ1grZCxHQUFTRCxFQUFPRixJQUFXQyxFQUFPRixHQUNsQ2hxQixPQUFJLEVBQVFDLE9BQUksRUN0cUJqQixFRHVxQkk4cEIsS0N2cUJKLEVEdXFCc0NELEtBR3JDemIsR0FEQXJPLEVBQUlrcUIsR0FBUUMsRUFBT3hlLEdBQVF5ZSxJQUNUNWUsR0FBUXhMLEdBQUswTCxHQUU5QjJDLEtDM3FCRixFRDRxQkkwYixJQzVxQkosRUQ2cUJHRCxJQUdGemIsR0FEQXBPLEVBQUlrcUIsR0FBUUQsRUFBT3hlLEdBQVEwZSxJQUNUM2UsR0FBUXhMLEdBQUswTCxHQUU5QjBDLEtDanJCRixFRGtyQkkwYixJQ2xyQkosRURtckJHRCxJQUdGemIsR0FEQXJPLEVBQUlrcUIsR0FBUUMsRUFBTzFlLEdBQVEyZSxJQUNUNWUsR0FBUXhMLEdBQUswTCxHQUU5QjJDLEtDdnJCSCxHRHdyQkswYixJQ3hyQkwsR0R5ckJJRCxJQUdGemIsR0FEQXBPLEVBQUlrcUIsR0FBUUQsRUFBTzFlLEdBQVE0ZSxJQUNUM2UsR0FBUXhMLEdBQUswTCxHQUd2QyxPQUFPMEMsRW1DeHFCSWdjLENBQWtCem5CLEVBQVErbUIsRUFBUUMsT0UzQjFDLFNBQVMxZSxHQUFZaUIsRUFBaUJDLEVBQVFDLEVBQUtDLEdBQ3RELEtBQU9GLEVBQVNDLEVBQU1DLEdBQVEsQ0FDMUIsSUFBSyxJQUFJL1QsRUFBSSxFQUFHQSxFQUFJK1QsSUFBVS9ULEVBQUcsQ0FDN0IsSUFBSSt4QixFQUFNbmUsRUFBZ0JDLEVBQVM3VCxHQUNuQzRULEVBQWdCQyxFQUFTN1QsR0FBSzRULEVBQWdCRSxFQUFNQyxFQUFTL1QsR0FDN0Q0VCxFQUFnQkUsRUFBTUMsRUFBUy9ULEdBQUsreEIsRUFFeENsZSxHQUFVRSxFQUNWRCxHQUFPQyxHQ0hSLFNBQVNpZSxHQUFzQnBlLEVBQWlCQyxFQUFRQyxFQUFLQyxHQU1oRSxJQUhBLElBQUlrZSxFQUFPLEVBQ1BqcUIsRUFBSzRMLEVBQWdCRSxFQUFNQyxHQUMzQjlMLEVBQUsyTCxFQUFnQkUsRUFBTUMsRUFBUyxHQUNqQ0YsRUFBU0MsRUFBS0QsR0FBVUUsRUFBUSxDQUNuQyxJQUFJN0wsRUFBSzBMLEVBQWdCQyxHQUNyQjFMLEVBQUt5TCxFQUFnQkMsRUFBUyxHQUNsQ29lLElBQVMvcEIsRUFBS0YsSUFBT0csRUFBS0YsR0FDMUJELEVBQUtFLEVBQ0xELEVBQUtFLEVBRVQsT0FBZ0IsSUFBVDhwQixPQUFheHVCLEVBQVl3dUIsRUFBTyxFQXdFcEMsU0FBU0MsR0FBa0J0ZSxFQUFpQkMsRUFBUW1kLEVBQU1qZCxFQUFRb2UsR0FFckUsSUFEQSxJQUFJQyxPQUFzQjN1QixJQUFkMHVCLEdBQTBCQSxFQUM3Qm55QixFQUFJLEVBQUdXLEVBQUtxd0IsRUFBS2p4QixPQUFRQyxFQUFJVyxJQUFNWCxFQUFHLENBQzNDLElBQUk4VCxFQUFNa2QsRUFBS2h4QixHQUNYcXlCLEVBQWNMLEdBQXNCcGUsRUFBaUJDLEVBQVFDLEVBQUtDLElBQ2xELElBQU4vVCxFQUNQb3lCLEdBQVNDLElBQWtCRCxJQUFVQyxFQUNyQ0QsSUFBVUMsSUFBa0JELEdBQVNDLElBRXhDLEdBQW1CemUsRUFBaUJDLEVBQVFDLEVBQUtDLEdBRXJERixFQUFTQyxFQUViLE9BQU9ELEVDaEhYLElBQUksR0FBd0MsV0FDeEMsSUFBSTFTLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EwQ3hDdXdCLEdBQXlCLFNBQVVwd0IsR0FhbkMsU0FBU293QixFQUFRM2YsRUFBYXliLEVBQVltRSxHQUN0QyxJQUFJbHdCLEVBQVFILEVBQU9MLEtBQUtoRCxPQUFTQSxLQTZDakMsT0F4Q0F3RCxFQUFNbXdCLE1BQVEsR0FLZG53QixFQUFNb3dCLDRCQUE4QixFQUtwQ3B3QixFQUFNcXdCLG1CQUFxQixLQUszQnJ3QixFQUFNMnRCLFdBQWEsRUFLbkIzdEIsRUFBTTR0QixtQkFBcUIsRUFLM0I1dEIsRUFBTXN3QixtQkFBcUIsRUFLM0J0d0IsRUFBTXV3Qix5QkFBMkIsVUFDZG52QixJQUFmMnFCLEdBQTRCbUUsR0FDNUJsd0IsRUFBTTZyQixtQkFBbUJFLEVBQ0ksR0FDN0IvckIsRUFBTW13QixNQUFRRCxHQUdkbHdCLEVBQU04ckIsZUFDNkQsRUFBZUMsR0FFL0UvckIsRUF1TlgsT0FqUkEsR0FBVWl3QixFQUFTcHdCLEdBaUVuQm93QixFQUFRcnpCLFVBQVU0ekIsaUJBQW1CLFNBQVVoRCxHQUN0Q2h4QixLQUFLK1UsZ0JoRXFDWCxTQUFnQmhVLEVBQUswWixHQUd4QixJQUZBLElBQUl3WixFQUFZbnhCLE1BQU11RCxRQUFRb1UsR0FBUUEsRUFBTyxDQUFDQSxHQUMxQ3ZaLEVBQVMreUIsRUFBVS95QixPQUNkQyxFQUFJLEVBQUdBLEVBQUlELEVBQVFDLElBQ3hCSixFQUFJQSxFQUFJRyxRQUFVK3lCLEVBQVU5eUIsR2dFckN4QixDQUFPbkIsS0FBSytVLGdCQUFpQmljLEVBQVdqQyxzQkFIeEMvdUIsS0FBSytVLGdCQUFrQmljLEVBQVdqQyxxQkFBcUJwVSxRQUszRDNhLEtBQUsyekIsTUFBTWx4QixLQUFLekMsS0FBSytVLGdCQUFnQjdULFFBQ3JDbEIsS0FBS21HLFdBT1RzdEIsRUFBUXJ6QixVQUFVbXNCLE1BQVEsV0FDdEIsSUFBSTJILEVBQVUsSUFBSVQsRUFBUXp6QixLQUFLK1UsZ0JBQWdCNEYsUUFBUzNhLEtBQUsydUIsT0FBUTN1QixLQUFLMnpCLE1BQU1oWixTQUVoRixPQURBdVosRUFBUW5zQixnQkFBZ0IvSCxNQUNqQmswQixHQVNYVCxFQUFRcnpCLFVBQVV1c0IsZUFBaUIsU0FBVS9qQixFQUFHQyxFQUFHK2pCLEVBQWNDLEdBQzdELE9BQUlBLEVBQXFCN1ksR0FBeUJoVSxLQUFLeUwsWUFBYTdDLEVBQUdDLEdBQzVEZ2tCLEdBRVA3c0IsS0FBS294QixtQkFBcUJweEIsS0FBS29HLGdCQUMvQnBHLEtBQUtteEIsVUFBWXpvQixLQUFLb1gsS2I3RDNCLFNBQThCL0ssRUFBaUJDLEVBQVFtZCxFQUFNamQsRUFBUXpNLEdBQ3hFLElBQUssSUFBSXRILEVBQUksRUFBR1csRUFBS3F3QixFQUFLanhCLE9BQVFDLEVBQUlXLElBQU1YLEVBQUcsQ0FDM0MsSUFBSThULEVBQU1rZCxFQUFLaHhCLEdBQ2ZzSCxFQUFNd25CLEdBQWdCbGIsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVF6TSxHQUM1RHVNLEVBQVNDLEVBRWIsT0FBT3hNLEVhdUQ0QjByQixDQUFxQm4wQixLQUFLK1UsZ0JBQWlCLEVBQUcvVSxLQUFLMnpCLE1BQU8zekIsS0FBS2tWLE9BQVEsSUFDbEdsVixLQUFLb3hCLGtCQUFvQnB4QixLQUFLb0csZWJzRG5DLFNBQWlDMk8sRUFBaUJDLEVBQVFtZCxFQUFNamQsRUFBUWtiLEVBQVVDLEVBQVF6bkIsRUFBR0MsRUFBRytqQixFQUFjQyxFQUFvQnlELEdBRXJJLElBREEsSUFBSUUsRUFBV0YsR0FBOEIsQ0FBQ3JELElBQUtBLEtBQzFDOXJCLEVBQUksRUFBR1csRUFBS3F3QixFQUFLanhCLE9BQVFDLEVBQUlXLElBQU1YLEVBQUcsQ0FDM0MsSUFBSThULEVBQU1rZCxFQUFLaHhCLEdBQ2YwckIsRUFBcUJzRCxHQUFtQnBiLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRa2IsRUFBVUMsRUFBUXpuQixFQUFHQyxFQUFHK2pCLEVBQWNDLEVBQW9CMkQsR0FDeEl4YixFQUFTQyxFQUViLE9BQU80WCxFYTNESXVILENBQXdCcDBCLEtBQUsrVSxnQkFBaUIsRUFBRy9VLEtBQUsyekIsTUFBTzN6QixLQUFLa1YsT0FBUWxWLEtBQUtteEIsV0FBVyxFQUFNdm9CLEVBQUdDLEVBQUcrakIsRUFBY0MsS0FPL0g0RyxFQUFRcnpCLFVBQVU4VCxXQUFhLFNBQVV0TCxFQUFHQyxHQUN4QyxPQUFPcXBCLEdBQXNCbHlCLEtBQUtxMEIsNkJBQThCLEVBQUdyMEIsS0FBSzJ6QixNQUFPM3pCLEtBQUtrVixPQUFRdE0sRUFBR0MsSUFPbkc0cUIsRUFBUXJ6QixVQUFVc1YsUUFBVSxXQUN4QixPVGpJRCxTQUFxQlgsRUFBaUJDLEVBQVFtZCxFQUFNamQsR0FFdkQsSUFEQSxJQUFJUyxFQUFPLEVBQ0Z4VSxFQUFJLEVBQUdXLEVBQUtxd0IsRUFBS2p4QixPQUFRQyxFQUFJVyxJQUFNWCxFQUFHLENBQzNDLElBQUk4VCxFQUFNa2QsRUFBS2h4QixHQUNmd1UsR0FBUXFiLEdBQVdqYyxFQUFpQkMsRUFBUUMsRUFBS0MsR0FDakRGLEVBQVNDLEVBRWIsT0FBT1UsRVMwSEkyZSxDQUFnQnQwQixLQUFLcTBCLDZCQUE4QixFQUFHcjBCLEtBQUsyekIsTUFBTzN6QixLQUFLa1YsU0FlbEZ1ZSxFQUFRcnpCLFVBQVV5dUIsZUFBaUIsU0FBVXlFLEdBQ3pDLElBQUl2ZSxFQVFKLFlBUGtCblEsSUFBZDB1QixFQUVBRCxHQURBdGUsRUFBa0IvVSxLQUFLcTBCLDZCQUE2QjFaLFFBQ2pCLEVBQUczYSxLQUFLMnpCLE1BQU8zekIsS0FBS2tWLE9BQVFvZSxHQUcvRHZlLEVBQWtCL1UsS0FBSytVLGdCVnpKNUIsU0FBaUNBLEVBQWlCQyxFQUFRbWQsRUFBTWpkLEVBQVFxZixHQUczRSxJQUZBLElBQUlDLE9BQW9DNXZCLElBQXJCMnZCLEVBQWlDQSxFQUFtQixHQUNuRXB6QixFQUFJLEVBQ0NzdEIsRUFBSSxFQUFHZ0csRUFBS3RDLEVBQUtqeEIsT0FBUXV0QixFQUFJZ0csSUFBTWhHLEVBQUcsQ0FDM0MsSUFBSXhaLEVBQU1rZCxFQUFLMUQsR0FDZitGLEVBQWFyekIsS0FBTzJ2QixHQUFtQi9iLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRc2YsRUFBYXJ6QixJQUMxRjZULEVBQVNDLEVBR2IsT0FEQXVmLEVBQWF0ekIsT0FBU0MsRUFDZnF6QixFVWtKSUUsQ0FBd0IzZixFQUFpQixFQUFHL1UsS0FBSzJ6QixNQUFPM3pCLEtBQUtrVixTQUt4RXVlLEVBQVFyekIsVUFBVXUwQixRQUFVLFdBQ3hCLE9BQU8zMEIsS0FBSzJ6QixPQUtoQkYsRUFBUXJ6QixVQUFVdzBCLHFCQUF1QixXQUNyQyxHQUFJNTBCLEtBQUs0ekIsNEJBQThCNXpCLEtBQUtvRyxjQUFlLENBQ3ZELElBQUl5dUIsRUFBYWhmLEdBQVU3VixLQUFLeUwsYUFDaEN6TCxLQUFLNnpCLG1CQ25MVixTQUFpQzllLEVBQWlCQyxFQUFRbWQsRUFBTWpkLEVBQVE0ZixFQUFhQyxFQUFtQnhHLEdBTTNHLElBTEEsSUFBSXB0QixFQUFHVyxFQUFJOEcsRUFBR08sRUFBSUUsRUFBSUQsRUFBSUUsRUFDdEJULEVBQUlpc0IsRUFBWUMsRUFBb0IsR0FFcENDLEVBQWdCLEdBRVhwckIsRUFBSSxFQUFHcXJCLEVBQUs5QyxFQUFLanhCLE9BQVEwSSxFQUFJcXJCLElBQU1yckIsRUFBRyxDQUMzQyxJQUFJcUwsRUFBTWtkLEVBQUt2b0IsR0FHZixJQUZBVCxFQUFLNEwsRUFBZ0JFLEVBQU1DLEdBQzNCOUwsRUFBSzJMLEVBQWdCRSxFQUFNQyxFQUFTLEdBQy9CL1QsRUFBSTZULEVBQVE3VCxFQUFJOFQsRUFBSzlULEdBQUsrVCxFQUMzQjdMLEVBQUswTCxFQUFnQjVULEdBQ3JCbUksRUFBS3lMLEVBQWdCNVQsRUFBSSxJQUNwQjBILEdBQUtPLEdBQU1FLEdBQU1ULEdBQU9PLEdBQU1QLEdBQUtBLEdBQUtTLEtBQ3pDVixHQUFNQyxFQUFJTyxJQUFPRSxFQUFLRixJQUFRQyxFQUFLRixHQUFNQSxFQUN6QzZyQixFQUFjdnlCLEtBQUttRyxJQUV2Qk8sRUFBS0UsRUFDTEQsRUFBS0UsRUFLYixJQUFJNHJCLEVBQVNqSSxJQUNUa0ksR0FBbUIsSUFHdkIsSUFGQUgsRUFBY3JQLEtBQUtobEIsR0FDbkJ3SSxFQUFLNnJCLEVBQWMsR0FDZDd6QixFQUFJLEVBQUdXLEVBQUtrekIsRUFBYzl6QixPQUFRQyxFQUFJVyxJQUFNWCxFQUFHLENBQ2hEa0ksRUFBSzJyQixFQUFjN3pCLEdBQ25CLElBQUlpMEIsRUFBZ0Ixc0IsS0FBSzJzQixJQUFJaHNCLEVBQUtGLEdBQzlCaXNCLEVBQWdCRCxHQUVaakQsR0FBc0JuZCxFQUFpQkMsRUFBUW1kLEVBQU1qZCxFQUR6RHRNLEdBQUtPLEVBQUtFLEdBQU0sRUFDb0RSLEtBQ2hFcXNCLEVBQVN0c0IsRUFDVHVzQixFQUFtQkMsR0FHM0Jqc0IsRUFBS0UsRUFPVCxPQUxJK2pCLE1BQU04SCxLQUdOQSxFQUFTSixFQUFZQyxJQUVyQnhHLEdBQ0FBLEVBQVM5ckIsS0FBS3l5QixFQUFRcnNCLEVBQUdzc0IsR0FDbEI1RyxHQUdBLENBQUMyRyxFQUFRcnNCLEVBQUdzc0IsR0RrSVdHLENBQXdCdDFCLEtBQUtxMEIsNkJBQThCLEVBQUdyMEIsS0FBSzJ6QixNQUFPM3pCLEtBQUtrVixPQUFRMmYsRUFBWSxHQUM3SDcwQixLQUFLNHpCLDJCQUE2QjV6QixLQUFLb0csY0FFM0MsT0FBT3BHLEtBQUs2ekIsb0JBUWhCSixFQUFRcnpCLFVBQVVtMUIsaUJBQW1CLFdBQ2pDLE9BQU8sSUFBSSxHQUFNdjFCLEtBQUs0MEIsdUJqQnJNckIsUWlCOE1MbkIsRUFBUXJ6QixVQUFVbzFCLG1CQUFxQixXQUNuQyxPQUFPeDFCLEtBQUsyekIsTUFBTXp5QixRQVl0QnV5QixFQUFRcnpCLFVBQVVxMUIsY0FBZ0IsU0FBVXp3QixHQUN4QyxPQUFJQSxFQUFRLEdBQUtoRixLQUFLMnpCLE1BQU16eUIsUUFBVThELEVBQzNCLEtBRUosSUFBSSxHQUFXaEYsS0FBSytVLGdCQUFnQjRGLE1BQWdCLElBQVYzVixFQUFjLEVBQUloRixLQUFLMnpCLE1BQU0zdUIsRUFBUSxHQUFJaEYsS0FBSzJ6QixNQUFNM3VCLElBQVNoRixLQUFLMnVCLFNBT3ZIOEUsRUFBUXJ6QixVQUFVczFCLGVBQWlCLFdBTS9CLElBTEEsSUFBSS9HLEVBQVMzdUIsS0FBSzJ1QixPQUNkNVosRUFBa0IvVSxLQUFLK1UsZ0JBQ3ZCb2QsRUFBT255QixLQUFLMnpCLE1BQ1pXLEVBQWMsR0FDZHRmLEVBQVMsRUFDSjdULEVBQUksRUFBR1csRUFBS3F3QixFQUFLanhCLE9BQVFDLEVBQUlXLElBQU1YLEVBQUcsQ0FDM0MsSUFBSThULEVBQU1rZCxFQUFLaHhCLEdBQ1g2dkIsRUFBYSxJQUFJLEdBQVdqYyxFQUFnQjRGLE1BQU0zRixFQUFRQyxHQUFNMFosR0FDcEUyRixFQUFZN3hCLEtBQUt1dUIsR0FDakJoYyxFQUFTQyxFQUViLE9BQU9xZixHQUtYYixFQUFRcnpCLFVBQVVpMEIsMkJBQTZCLFdBQzNDLEdBQUlyMEIsS0FBSzh6QixtQkFBcUI5ekIsS0FBS29HLGNBQWUsQ0FDOUMsSUFBSTJPLEVBQWtCL1UsS0FBSytVLGlCRDNOaEMsU0FBZ0NBLEVBQWlCQyxFQUFRbWQsRUFBTWpkLEVBQVFvZSxHQUUxRSxJQURBLElBQUlDLE9BQXNCM3VCLElBQWQwdUIsR0FBMEJBLEVBQzdCbnlCLEVBQUksRUFBR1csRUFBS3F3QixFQUFLanhCLE9BQVFDLEVBQUlXLElBQU1YLEVBQUcsQ0FDM0MsSUFBSThULEVBQU1rZCxFQUFLaHhCLEdBQ1hxeUIsRUFBY0wsR0FBc0JwZSxFQUFpQkMsRUFBUUMsRUFBS0MsR0FDdEUsR0FBVSxJQUFOL1QsR0FDQSxHQUFLb3lCLEdBQVNDLElBQWtCRCxJQUFVQyxFQUN0QyxPQUFPLE9BSVgsR0FBS0QsSUFBVUMsSUFBa0JELEdBQVNDLEVBQ3RDLE9BQU8sRUFHZnhlLEVBQVNDLEVBRWIsT0FBTyxFQzJNSzBnQixDQUF1QjVnQixFQUFpQixFQUFHL1UsS0FBSzJ6QixNQUFPM3pCLEtBQUtrVixTQUk1RGxWLEtBQUsrekIseUJBQTJCaGYsRUFBZ0I0RixRQUNoRDNhLEtBQUsrekIseUJBQXlCN3lCLE9BQVNteUIsR0FBa0JyekIsS0FBSyt6Qix5QkFBMEIsRUFBRy96QixLQUFLMnpCLE1BQU8zekIsS0FBS2tWLFNBSjVHbFYsS0FBSyt6Qix5QkFBMkJoZixFQU1wQy9VLEtBQUs4ekIsa0JBQW9COXpCLEtBQUtvRyxjQUVsQyxPQUFPcEcsS0FBSyt6QiwwQkFPaEJOLEVBQVFyekIsVUFBVSt1Qiw4QkFBZ0MsU0FBVS9DLEdBQ3hELElBQUl3RSxFQUE0QixHQUM1QmdGLEVBQWlCLEdBRXJCLE9BREFoRixFQUEwQjF2QixPWG1DM0IsU0FBdUI2VCxFQUFpQkMsRUFBUW1kLEVBQU1qZCxFQUFRMFksRUFBV2dELEVBQTJCQyxFQUFrQitFLEdBQ3pILElBQUssSUFBSXowQixFQUFJLEVBQUdXLEVBQUtxd0IsRUFBS2p4QixPQUFRQyxFQUFJVyxJQUFNWCxFQUFHLENBQzNDLElBQUk4VCxFQUFNa2QsRUFBS2h4QixHQUNmMHZCLEVBQW1CRixHQUFTNWIsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVEwWSxFQUFXZ0QsRUFBMkJDLEdBQ3hHK0UsRUFBZW56QixLQUFLb3VCLEdBQ3BCN2IsRUFBU0MsRUFFYixPQUFPNGIsRVcxQ2dDZ0YsQ0FBYzcxQixLQUFLK1UsZ0JBQWlCLEVBQUcvVSxLQUFLMnpCLE1BQU8zekIsS0FBS2tWLE9BQVF4TSxLQUFLb1gsS0FBS3NNLEdBQW1Cd0UsRUFBMkIsRUFBR2dGLEdBQ3ZKLElBQUluQyxFQUFRN0MsRUFBMkIsR0FBbUJnRixJQU9yRW5DLEVBQVFyekIsVUFBVXl0QixRQUFVLFdBQ3hCLE1QclJLLFdPNlJUNEYsRUFBUXJ6QixVQUFVMHRCLGlCQUFtQixTQUFVdGlCLEdBQzNDLE9Kak5ELFNBQW1DdUosRUFBaUJDLEVBQVFtZCxFQUFNamQsRUFBUTFKLEdBQzdFLElBM0JHLFNBQThCdUosRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVExSixHQUN2RSxTQUFJNG1CLEdBQXFCcmQsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVExSixJQUczRHdtQixHQUFxQmpkLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRMUosRUFBTyxHQUFJQSxFQUFPLEtBRzdFd21CLEdBQXFCamQsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVExSixFQUFPLEdBQUlBLEVBQU8sS0FHN0V3bUIsR0FBcUJqZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTFKLEVBQU8sR0FBSUEsRUFBTyxLQUc3RXdtQixHQUFxQmpkLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRMUosRUFBTyxHQUFJQSxFQUFPLEtBYzVFc3FCLENBQXFCL2dCLEVBQWlCQyxFQUFRbWQsRUFBSyxHQUFJamQsRUFBUTFKLEdBQ2hFLE9BQU8sRUFFWCxHQUFvQixJQUFoQjJtQixFQUFLanhCLE9BQ0wsT0FBTyxFQUVYLElBQUssSUFBSUMsRUFBSSxFQUFHVyxFQUFLcXdCLEVBQUtqeEIsT0FBUUMsRUFBSVcsSUFBTVgsRUFDeEMsR0FBSTR3QixHQUF5QmhkLEVBQWlCb2QsRUFBS2h4QixFQUFJLEdBQUlneEIsRUFBS2h4QixHQUFJK1QsRUFBUTFKLEtBQ25FNG1CLEdBQXFCcmQsRUFBaUJvZCxFQUFLaHhCLEVBQUksR0FBSWd4QixFQUFLaHhCLEdBQUkrVCxFQUFRMUosR0FDckUsT0FBTyxFQUluQixPQUFPLEVJbU1JdXFCLENBQTBCLzFCLEtBQUtxMEIsNkJBQThCLEVBQUdyMEIsS0FBSzJ6QixNQUFPM3pCLEtBQUtrVixPQUFRMUosSUFRcEdpb0IsRUFBUXJ6QixVQUFVa3ZCLGVBQWlCLFNBQVV4YixFQUFheWIsR0FDdER2dkIsS0FBS3d2QixVQUFVRCxFQUFZemIsRUFBYSxHQUNuQzlULEtBQUsrVSxrQkFDTi9VLEtBQUsrVSxnQkFBa0IsSUFFM0IsSUFBSW9kLEVaaFJMLFNBQWlDcGQsRUFBaUJDLEVBQVF3ZixFQUFjdGYsRUFBUXdlLEdBR25GLElBRkEsSUFBSXZCLEVBQU91QixHQUFzQixHQUM3QnZ5QixFQUFJLEVBQ0NzdEIsRUFBSSxFQUFHZ0csRUFBS0QsRUFBYXR6QixPQUFRdXRCLEVBQUlnRyxJQUFNaEcsRUFBRyxDQUNuRCxJQUFJeFosRUFBTXdiLEdBQW1CMWIsRUFBaUJDLEVBQVF3ZixFQUFhL0YsR0FBSXZaLEdBQ3ZFaWQsRUFBS2h4QixLQUFPOFQsRUFDWkQsRUFBU0MsRUFHYixPQURBa2QsRUFBS2p4QixPQUFTQyxFQUNQZ3hCLEVZdVFRNkQsQ0FBd0JoMkIsS0FBSytVLGdCQUFpQixFQUFHakIsRUFBYTlULEtBQUtrVixPQUFRbFYsS0FBSzJ6QixPQUMzRjN6QixLQUFLK1UsZ0JBQWdCN1QsT0FBeUIsSUFBaEJpeEIsRUFBS2p4QixPQUFlLEVBQUlpeEIsRUFBS0EsRUFBS2p4QixPQUFTLEdBQ3pFbEIsS0FBS21HLFdBRUZzdEIsRUFsUmlCLENBbVIxQixJQUNGLFlBK0JPLFNBQVN3QyxHQUFXenFCLEdBQ3ZCLElBQUk0SSxFQUFPNUksRUFBTyxHQUNkNkksRUFBTzdJLEVBQU8sR0FDZDhJLEVBQU85SSxFQUFPLEdBQ2QrSSxFQUFPL0ksRUFBTyxHQUNkdUosRUFBa0IsQ0FDbEJYLEVBQ0FDLEVBQ0FELEVBQ0FHLEVBQ0FELEVBQ0FDLEVBQ0FELEVBQ0FELEVBQ0FELEVBQ0FDLEdBRUosT0FBTyxJQUFJb2YsR0FBUTFlLEVBQWlCLEdBQW1CLENBQ25EQSxFQUFnQjdULFNFL1d4QixJQUFJLEdBQXdDLFdBQ3hDLElBQUlvQixFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBNGpENUMsU0FBU2d6QixHQUFrQjdsQixFQUFVOGxCLEdBQ2pDQyxZQUFXLFdBQ1AvbEIsRUFBUzhsQixLQUNWLEdBbUpBLFNBQVNFLEdBQWdCQyxHQUM1QixRQUFJQSxFQUFVQyxjQUFnQkQsRUFBVUUsZUFDL0IsR0FBaUJGLEVBQVVDLGFBQWNELEVBQVVFLGdCQUl4REYsRUFBVUcsbUJBQXFCSCxFQUFVSSxrQkFHekNKLEVBQVVLLGlCQUFtQkwsRUFBVU0sZUFhL0MsU0FBU0MsR0FBa0JybUIsRUFBWTRGLEVBQU04QyxFQUFVcE0sRUFBWXFKLEdBRS9ELElBQUlxVCxFQUFXOWdCLEtBQUs0SyxLQUFLNkMsR0FDckJzVCxFQUFXL2dCLEtBQUsySyxLQUFLOEMsR0FDckIyZ0IsRUFBT3RtQixFQUFXLEdBQUtnWixFQUFXaFosRUFBVyxHQUFLaVosRUFDbERzTixFQUFPdm1CLEVBQVcsR0FBS2daLEVBQVdoWixFQUFXLEdBQUtpWixFQU90RCxNQUFPLEVBTlBxTixJQUFTMWdCLEVBQUssR0FBSyxFQUFJOEMsRUFBUyxJQUFNcE0sR0FJakIwYyxHQUhyQnVOLElBQVM3ZCxFQUFTLEdBQUs5QyxFQUFLLEdBQUssR0FBS3RKLElBRXRDMmMsR0FBWUEsR0FFRXNOLEVBQU92TixFQUFXc04sRUFBT3JOLEdBRzNDLFNBNTlDMEIsU0FBVXBtQixHQUtoQyxTQUFTMnpCLEVBQUtob0IsR0FDVixJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBSWpDd0QsRUFBTW9DLEdBSU5wQyxFQUFNc0MsS0FJTnRDLEVBQU13QyxHQUNOLElBQUkrRCxFQUFVLEVBQU8sR0FBSWlGLEdBc0R6QixPQWpEQXhMLEVBQU15ekIsT0FBUyxDQUFDLEVBQUcsR0FLbkJ6ekIsRUFBTTB6QixZQUFjLEdBS3BCMXpCLEVBQU0yekIsb0JBTU4zekIsRUFBTTR6QixZQUFjbFcsR0FBaUJuWCxFQUFRb0csV0FBWSxhQUt6RDNNLEVBQU02ekIsY0FBZ0IsQ0FBQyxJQUFLLEtBSzVCN3pCLEVBQU04ekIsY0FBZ0IsS0FLdEI5ekIsRUFBTSt6QixrQkFLTi96QixFQUFNZzBCLGdCQUtOaDBCLEVBQU1pMEIsbUJBQWdCN3lCLEVBQ2xCbUYsRUFBUW1NLFNBQ1JuTSxFQUFRbU0sT0FBU2dNLEdBQW1CblksRUFBUW1NLE9BQVExUyxFQUFNNHpCLGNBRTFEcnRCLEVBQVF5QixTQUNSekIsRUFBUXlCLE9BQVM0VyxHQUFlclksRUFBUXlCLE9BQVFoSSxFQUFNNHpCLGNBRTFENXpCLEVBQU1rMEIsY0FBYzN0QixHQUNidkcsRUFtdENYLE9BM3hDQSxHQUFVd3pCLEVBQU0zekIsR0E4RWhCMnpCLEVBQUs1MkIsVUFBVXMzQixjQUFnQixTQUFVM3RCLEdBSXJDLElBQ0k0dEIsRUE0dUNMLFNBQW9DNXRCLEdBQ3ZDLElBQUk2dEIsRUFDQXh0QixFQUNBRSxFQUtBQyxPQUE4QjNGLElBQXBCbUYsRUFBUVEsUUFBd0JSLEVBQVFRLFFBMTVDbkMsRUEyNUNmQyxPQUE4QjVGLElBQXBCbUYsRUFBUVMsUUFBd0JULEVBQVFTLFFBSGpDLEdBSWpCcXRCLE9BQW9DanpCLElBQXZCbUYsRUFBUTh0QixXQUEyQjl0QixFQUFROHRCLFdBSHBDLEVBSXBCQyxPQUFvQ2x6QixJQUF2Qm1GLEVBQVErdEIsWUFBMkIvdEIsRUFBUSt0QixXQUN4RGxPLE9BQWdEaGxCLElBQXZDbUYsRUFBUWd1Qiw0QkFDZmh1QixFQUFRZ3VCLDJCQUVWdk4sT0FBNEM1bEIsSUFBM0JtRixFQUFReWdCLGdCQUErQnpnQixFQUFReWdCLGVBQ2hFcmEsRUFBYStRLEdBQWlCblgsRUFBUW9HLFdBQVksYUFDbEQ2bkIsRUFBYTduQixFQUFXMUUsWUFDeEJ3c0IsRUFBc0JsdUIsRUFBUWt1QixvQkFDOUJ6c0IsRUFBU3pCLEVBQVF5QixPQUtyQixHQUpLc3NCLEdBQWV0c0IsSUFBVTJFLEVBQVdzTixhQUNyQ3dhLEdBQXNCLEVBQ3RCenNCLEVBQVN3c0IsUUFFZXB6QixJQUF4Qm1GLEVBQVFtdUIsWUFBMkIsQ0FDbkMsSUFBSUEsRUFBY251QixFQUFRbXVCLFlBQzFCOXRCLEVBQWdCOHRCLEVBQVkzdEIsR0FDNUJELE9BQzZCMUYsSUFBekJzekIsRUFBWTF0QixHQUNOMHRCLEVBQVkxdEIsR0FDWjB0QixFQUFZQSxFQUFZaDNCLE9BQVMsR0FFdkMwMkIsRUFEQTd0QixFQUFRb3VCLG9CdEI3akRiLFNBQWlDRCxFQUFhcE4sRUFBWUMsRUFBZUMsR0FDNUUsT0FBTyxTQVFHbGUsRUFBWTlMLEVBQVdvVixFQUFNeVQsR0FDbkMsUUFBbUJqbEIsSUFBZmtJLEVBQTBCLENBQzFCLElBQUkxQyxFQUFnQjh0QixFQUFZLEdBQzVCNXRCLEVBQWdCNHRCLEVBQVlBLEVBQVloM0IsT0FBUyxHQUNqRCtwQixFQUFlRixFQUNiVixHQUE2QmpnQixFQUFlMmdCLEVBQWUzVSxFQUFNNFUsR0FDakU1Z0IsRUFFTixHQUFJeWYsRUFFQSxZQUQ0QmpsQixJQUFma21CLEdBQTJCQSxFQUlqQ0gsR0FBMkI3ZCxFQUFZbWUsRUFBYzNnQixHQUZqRCxFQUFNd0MsRUFBWXhDLEVBQWUyZ0IsR0FJaEQsSUFBSW1OLEVBQVMxdkIsS0FBS0YsSUFBSXlpQixFQUFjbmUsR0FDaEN1VyxFQUFJM2EsS0FBSzJ2QixNQUFNdjNCLEVBQWtCbzNCLEVBQWFFLEVBQVFwM0IsSUFDMUQsT0FBSWszQixFQUFZN1UsR0FBSzRILEdBQWdCNUgsRUFBSTZVLEVBQVloM0IsT0FBUyxFQUNuRGczQixFQUFZN1UsRUFBSSxHQUVwQjZVLEVBQVk3VSxLc0JpaURJaVYsQ0FBd0JKLEVBQWF0TyxHQUFTcU8sR0FBdUJ6c0IsRUFBUWdmLEdBRzdFSyxHQUF1QnpnQixFQUFlRSxFQUFlc2YsR0FBU3FPLEdBQXVCenNCLEVBQVFnZixPQUd2SCxDQUVELElBSUkrTixHQUpRUCxFQUdOdHZCLEtBQUtELElBQUksR0FBU3V2QixHQUFhcGlCLEdBQVVvaUIsSUFEdEMsSUFBTTliLEdBQWdCLFlBQWtCL0wsRUFBV21OLG9CQ3huRHJDLElEMG5EK0I1VSxLQUFLMGlCLElBckN2QyxFQXo1Q0wsR0ErN0NYb04sRUFBdUJELEVBQ3ZCN3ZCLEtBQUswaUIsSUF2Q1csRUF1Q1lxTixTQUdWN3pCLEtBRHRCd0YsRUFBZ0JMLEVBQVFLLGVBRXBCRyxFQUFVLEVBR1ZILEVBQWdCbXVCLEVBQXVCN3ZCLEtBQUswaUIsSUFBSXlNLEVBQVl0dEIsUUFJMUMzRixLQUR0QjBGLEVBQWdCUCxFQUFRTyxpQkFJWkEsT0FGZ0IxRixJQUFwQm1GLEVBQVFTLGFBQ3NCNUYsSUFBMUJtRixFQUFRSyxjQUNRQSxFQUFnQjFCLEtBQUswaUIsSUFBSXlNLEVBQVlydEIsR0FHckMrdEIsRUFBdUI3dkIsS0FBSzBpQixJQUFJeU0sRUFBWXJ0QixHQUloRGd1QixHQUl4Qmh1QixFQUNJRCxFQUNJN0IsS0FBSzJ2QixNQUFNM3ZCLEtBQUtNLElBQUlvQixFQUFnQkUsR0FBaUI1QixLQUFLTSxJQUFJNnVCLElBQ3RFdnRCLEVBQWdCRixFQUFnQjFCLEtBQUswaUIsSUFBSXlNLEVBQVlydEIsRUFBVUQsR0FFM0RxdEIsRUFEQTd0QixFQUFRb3VCLG9CdEI1akRiLFNBQTJCTyxFQUFPdHVCLEVBQWV1dUIsRUFBbUI3TixFQUFZQyxFQUFlQyxHQUNsRyxPQUFPLFNBUUdsZSxFQUFZOUwsRUFBV29WLEVBQU15VCxHQUNuQyxRQUFtQmpsQixJQUFma0ksRUFBMEIsQ0FDMUIsSUFBSW1lLEVBQWVGLEVBQ2JWLEdBQTZCamdCLEVBQWUyZ0IsRUFBZTNVLEVBQU00VSxHQUNqRTVnQixFQUNGRSxPQUFzQzFGLElBQXRCK3pCLEVBQWtDQSxFQUFvQixFQUUxRSxHQUFJOU8sRUFFQSxZQUQ0QmpsQixJQUFma21CLEdBQTJCQSxFQUlqQ0gsR0FBMkI3ZCxFQUFZbWUsRUFBYzNnQixHQUZqRCxFQUFNd0MsRUFBWXhDLEVBQWUyZ0IsR0FJaEQsSUFDSTJOLEVBQWVsd0IsS0FBS213QixLQUFLbndCLEtBQUtNLElBQUlvQixFQUFnQjZnQixHQUFnQnZpQixLQUFLTSxJQUFJMHZCLEdBRC9ELE1BRVoxakIsR0FBVWhVLEdBQWEsR0FGWCxNQUU4QixHQUMxQ28zQixFQUFTMXZCLEtBQUtGLElBQUl5aUIsRUFBY25lLEdBQ2hDZ3NCLEVBQWtCcHdCLEtBQUsydkIsTUFBTTN2QixLQUFLTSxJQUFJb0IsRUFBZ0JndUIsR0FBVTF2QixLQUFLTSxJQUFJMHZCLEdBQVMxakIsR0FDbEYrakIsRUFBWXJ3QixLQUFLRCxJQUFJbXdCLEVBQWNFLEdBRXZDLE9BQU8sRUFEYTF1QixFQUFnQjFCLEtBQUswaUIsSUFBSXNOLEVBQU9LLEdBQ3hCenVCLEVBQWUyZ0IsS3NCK2hEcEIrTixDQUFrQm5CLEVBQVl6dEIsRUFBZUUsRUFBZXNmLEdBQVNxTyxHQUF1QnpzQixFQUFRZ2YsR0FHcEdLLEdBQXVCemdCLEVBQWVFLEVBQWVzZixHQUFTcU8sR0FBdUJ6c0IsRUFBUWdmLEdBRzVILE1BQU8sQ0FDSHlPLFdBQVlyQixFQUNaeHRCLGNBQWVBLEVBQ2ZFLGNBQWVBLEVBQ2ZDLFFBQVNBLEVBQ1RzdEIsV0FBWUEsR0FuMENtQnFCLENBQTJCbnZCLEdBSzFEL0osS0FBS201QixlQUFpQnhCLEVBQXlCdnRCLGNBSy9DcEssS0FBS281QixlQUFpQnpCLEVBQXlCcnRCLGNBSy9DdEssS0FBS3E1QixZQUFjMUIsRUFBeUJFLFdBSzVDNzNCLEtBQUtzNUIsYUFBZXZ2QixFQUFRbXVCLFlBSzVCbDRCLEtBQUt1NUIsU0FBV3h2QixFQUFReXZCLFFBS3hCeDVCLEtBQUt5NUIsU0FBVzlCLEVBQXlCcHRCLFFBQ3pDLElBQUltdkIsRUF3ckNMLFNBQWdDM3ZCLEdBQ25DLFFBQXVCbkYsSUFBbkJtRixFQUFReUIsT0FBc0IsQ0FDOUIsSUFBSW9lLE9BQTRDaGxCLElBQW5DbUYsRUFBUTR2Qix3QkFDZjV2QixFQUFRNHZCLHVCQUVkLE9BQU9qUSxHQUFhM2YsRUFBUXlCLE9BQVF6QixFQUFRa3VCLG9CQUFxQnJPLEdBRXJFLElBQUl6WixFQUFhK1EsR0FBaUJuWCxFQUFRb0csV0FBWSxhQUN0RCxJQUEyQixJQUF2QnBHLEVBQVErdEIsWUFBdUIzbkIsRUFBV3NOLFdBQVksQ0FDdEQsSUFBSWpTLEVBQVMyRSxFQUFXMUUsWUFBWWtQLFFBR3BDLE9BRkFuUCxFQUFPLElBQUssSUFDWkEsRUFBTyxHQUFLbkIsSUFDTHFmLEdBQWFsZSxHQUFRLEdBQU8sR0FFdkMsT0FBTyxHQXRzQ29Cb3VCLENBQXVCN3ZCLEdBQzFDNnRCLEVBQXVCRCxFQUF5QnNCLFdBQ2hEWSxFQXl5Q0wsU0FBa0M5dkIsR0FFckMsUUFEZ0RuRixJQUEzQm1GLEVBQVErdkIsZ0JBQStCL3ZCLEVBQVErdkIsZUFDaEQsQ0FDaEIsSUFBSUMsRUFBb0Jod0IsRUFBUWd3QixrQkFDaEMsWUFBMEJuMUIsSUFBdEJtMUIsSUFBeUQsSUFBdEJBLEdyQi9uRHZDbk0sRUFBNkIsRUFBVSxHQUNwQyxTQU1HelgsRUFBVTBULEdBQ2hCLE9BQUlBLEVBQ08xVCxPQUVNdlIsSUFBYnVSLEVBQ0l6TixLQUFLMnNCLElBQUlsZixJQUFheVgsRUFDZixFQUdBelgsT0FJWCxLcUI4bUQyQixJQUF0QjRqQixFQUNFLEdBRTJCLGlCQUF0QkEsR3JCL3BETTk0QixFcUJncURHODRCLEVyQi9wRHpCQyxFQUFTLEVBQUl0eEIsS0FBS2lCLEdBQU0xSSxFQUNyQixTQU1Ha1YsRUFBVTBULEdBQ2hCLE9BQUlBLEVBQ08xVCxPQUVNdlIsSUFBYnVSLEVBQ0FBLEVBQVd6TixLQUFLMnZCLE1BQU1saUIsRUFBVzZqQixFQUFRLElBQU9BLE9BSWhELElxQmtwRE8sR0FJWCxPQUFPOU8sR3JCdnFEUixJQUF1QmpxQixFQUN0Qis0QixFQXlCQXBNLEVxQmtWeUJxTSxDQUF5Qmx3QixHQUtsRC9KLEtBQUtrNkIsYUFBZSxDQUNoQmhrQixPQUFRd2pCLEVBQ1I1c0IsV0FBWThxQixFQUNaemhCLFNBQVUwakIsR0FFZDc1QixLQUFLbTZCLGlCQUFpQ3YxQixJQUFyQm1GLEVBQVFvTSxTQUF5QnBNLEVBQVFvTSxTQUFXLEdBQ3JFblcsS0FBS282Qix1QkFBcUN4MUIsSUFBbkJtRixFQUFRbU0sT0FBdUJuTSxFQUFRbU0sT0FBUyxXQUM1Q3RSLElBQXZCbUYsRUFBUStDLFdBQ1I5TSxLQUFLcTZCLGNBQWN0d0IsRUFBUStDLGlCQUVMbEksSUFBakJtRixFQUFRZ0QsTUFDYi9NLEtBQUtzNkIsUUFBUXZ3QixFQUFRZ0QsTUFFekIvTSxLQUFLbUgsY0FwRFksSUF5RGpCbkgsS0FBS3U2QixTQUFXeHdCLEdBRXBCcEssT0FBT0MsZUFBZW8zQixFQUFLNTJCLFVBQVcsVUFBVyxDQVU3Q2dILElBQUssV0FDRCxPQUFPcEgsS0FBS3U1QixVQUVoQjF4QixJQUFLLFNBQVUyeEIsR0FDWCxJQUFJZ0IsRUFBYXg2QixLQUFLdTVCLFNBQ3RCdjVCLEtBQUt1NUIsU0FBV0MsRUFDaEIsSUFBSXRqQixFQUFTbFcsS0FBSzZWLFlBQ2xCLEdBQUlLLEVBQVEsQ0FDUixJQUFJdWtCLEVBQWFqQixHQUFXLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FDdENnQixFQUFhQSxHQUFjLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FDckMsSUFBSTF0QixFQUFhOU0sS0FBS2lrQixnQkFDbEJ6SixFQUFXMU4sRUFBYSxHQUN2QjJ0QixFQUFXLEdBQUtELEVBQVcsR0FBS0EsRUFBVyxHQUFLQyxFQUFXLElBQzVEQyxFQUFXNXRCLEVBQWEsR0FDdkIydEIsRUFBVyxHQUFLRCxFQUFXLEdBQUtBLEVBQVcsR0FBS0MsRUFBVyxJQUNoRXo2QixLQUFLbzZCLGtCQUFrQixDQUFDbGtCLEVBQU8sR0FBS3NFLEVBQVN0RSxFQUFPLEdBQUt3a0IsTUFHakVDLFlBQVksRUFDWkMsY0FBYyxJQVVsQjVELEVBQUs1MkIsVUFBVXk2QixtQkFBcUIsU0FBVUMsR0FDMUMsSUFBSS93QixFQUFVLEVBQU8sR0FBSS9KLEtBQUt1NkIsVUFZOUIsWUFWMkIzMUIsSUFBdkJtRixFQUFRK0MsV0FDUi9DLEVBQVErQyxXQUFhOU0sS0FBS2lrQixnQkFHMUJsYSxFQUFRZ0QsS0FBTy9NLEtBQUsrNkIsVUFHeEJoeEIsRUFBUW1NLE9BQVNsVyxLQUFLZzdCLG9CQUV0Qmp4QixFQUFRb00sU0FBV25XLEtBQUtpN0IsY0FDakIsRUFBTyxHQUFJbHhCLEVBQVMrd0IsSUFtQy9COUQsRUFBSzUyQixVQUFVOG5CLFFBQVUsU0FBVWdULEdBQzNCbDdCLEtBQUttN0IsVUFBWW43QixLQUFLbzdCLGdCQUN0QnA3QixLQUFLcTdCLG1CQUFtQixHQUc1QixJQURBLElBQUlDLEVBQU8sSUFBSXg0QixNQUFNZixVQUFVYixRQUN0QkMsRUFBSSxFQUFHQSxFQUFJbTZCLEVBQUtwNkIsU0FBVUMsRUFBRyxDQUNsQyxJQUFJNEksRUFBVWhJLFVBQVVaLEdBQ3BCNEksRUFBUW1NLFVBQ1JuTSxFQUFVLEVBQU8sR0FBSUEsSUFDYm1NLE9BQVNnTSxHQUFtQm5ZLEVBQVFtTSxPQUFRbFcsS0FBS3U3QixrQkFFekR4eEIsRUFBUXdqQixVQUNSeGpCLEVBQVUsRUFBTyxHQUFJQSxJQUNid2pCLE9BQVNyTCxHQUFtQm5ZLEVBQVF3akIsT0FBUXZ0QixLQUFLdTdCLGtCQUU3REQsRUFBS242QixHQUFLNEksRUFFZC9KLEtBQUt3N0IsZ0JBQWdCajJCLE1BQU12RixLQUFNczdCLElBS3JDdEUsRUFBSzUyQixVQUFVbzdCLGdCQUFrQixTQUFVTixHQUN2QyxJQUNJN3FCLEVBREFvckIsRUFBaUIxNUIsVUFBVWIsT0FPL0IsR0FMSXU2QixFQUFpQixHQUN3QixtQkFBbEMxNUIsVUFBVTA1QixFQUFpQixLQUNsQ3ByQixFQUFXdE8sVUFBVTA1QixFQUFpQixLQUNwQ0EsSUFFRHo3QixLQUFLbTdCLFFBQVMsQ0FFZixJQUFJcHdCLEVBQVFoSixVQUFVMDVCLEVBQWlCLEdBYXZDLE9BWkkxd0IsRUFBTW1MLFFBQ05sVyxLQUFLbzZCLGtCQUFrQnJ2QixFQUFNbUwsYUFFZHRSLElBQWZtRyxFQUFNZ0MsTUFDTi9NLEtBQUtzNkIsUUFBUXZ2QixFQUFNZ0MsV0FFQW5JLElBQW5CbUcsRUFBTW9MLFVBQ05uVyxLQUFLbTZCLFlBQVlwdkIsRUFBTW9MLGVBRXZCOUYsR0FDQTZsQixHQUFrQjdsQixHQUFVLElBU3BDLElBTEEsSUFBSW9pQixFQUFRaUosS0FBS0MsTUFDYnpsQixFQUFTbFcsS0FBS3MzQixjQUFjM2MsUUFDNUI3TixFQUFhOU0sS0FBS3UzQixrQkFDbEJwaEIsRUFBV25XLEtBQUt3M0IsZ0JBQ2hCb0UsRUFBUyxHQUNKejZCLEVBQUksRUFBR0EsRUFBSXM2QixJQUFrQnQ2QixFQUFHLENBQ3JDLElBQUk0SSxFQUEyQ2hJLFVBQVVaLEdBQ3JEbTFCLEVBQVksQ0FDWjdELE1BQU9BLEVBQ1BvSixVQUFVLEVBQ1Z0TyxPQUFReGpCLEVBQVF3akIsT0FDaEJ1TyxjQUErQmwzQixJQUFyQm1GLEVBQVEreEIsU0FBeUIveEIsRUFBUSt4QixTQUFXLElBQzlEQyxPQUFRaHlCLEVBQVFneUIsUUFBVXpRLEdBQzFCamIsU0FBVUEsR0FpQmQsR0FmSXRHLEVBQVFtTSxTQUNSb2dCLEVBQVVDLGFBQWVyZ0IsRUFDekJvZ0IsRUFBVUUsYUFBZXpzQixFQUFRbU0sT0FBT3lFLFFBQ3hDekUsRUFBU29nQixFQUFVRSxtQkFFRjV4QixJQUFqQm1GLEVBQVFnRCxNQUNSdXBCLEVBQVVHLGlCQUFtQjNwQixFQUM3QndwQixFQUFVSSxpQkFBbUIxMkIsS0FBS2c4QixxQkFBcUJqeUIsRUFBUWdELE1BQy9ERCxFQUFhd3BCLEVBQVVJLGtCQUVsQjNzQixFQUFRK0MsYUFDYndwQixFQUFVRyxpQkFBbUIzcEIsRUFDN0J3cEIsRUFBVUksaUJBQW1CM3NCLEVBQVErQyxXQUNyQ0EsRUFBYXdwQixFQUFVSSx1QkFFRjl4QixJQUFyQm1GLEVBQVFvTSxTQUF3QixDQUNoQ21nQixFQUFVSyxlQUFpQnhnQixFQUMzQixJQUFJOGxCLEVBQVEsR0FBT2x5QixFQUFRb00sU0FBV0EsRUFBV3pOLEtBQUtpQixHQUFJLEVBQUlqQixLQUFLaUIsSUFBTWpCLEtBQUtpQixHQUM5RTJzQixFQUFVTSxlQUFpQnpnQixFQUFXOGxCLEVBQ3RDOWxCLEVBQVdtZ0IsRUFBVU0sZUFHckJQLEdBQWdCQyxHQUNoQkEsRUFBVXVGLFVBQVcsRUFJckJwSixHQUFTNkQsRUFBVXdGLFNBRXZCRixFQUFPbjVCLEtBQUs2ekIsR0FFaEJ0MkIsS0FBS2szQixZQUFZejBCLEtBQUttNUIsR0FDdEI1N0IsS0FBS2s4QixRRXRsQkUsRUZzbEIwQixHQUNqQ2w4QixLQUFLbThCLHFCQU9UbkYsRUFBSzUyQixVQUFVZzdCLGFBQWUsV0FDMUIsT0FBT3A3QixLQUFLaTNCLE9FL2xCTCxHRitsQmtDLEdBTzdDRCxFQUFLNTJCLFVBQVVnOEIsZUFBaUIsV0FDNUIsT0FBT3A4QixLQUFLaTNCLE9FdG1CSCxHRnNtQmtDLEdBTS9DRCxFQUFLNTJCLFVBQVVpOEIsaUJBQW1CLFdBRTlCLElBQUk5TyxFQURKdnRCLEtBQUtrOEIsUUU5bUJFLEdGOG1CMkJsOEIsS0FBS2kzQixPRTltQmhDLElGZ25CUCxJQUFLLElBQUk5MUIsRUFBSSxFQUFHVyxFQUFLOUIsS0FBS2szQixZQUFZaDJCLE9BQVFDLEVBQUlXLElBQU1YLEVBQUcsQ0FDdkQsSUFBSXk2QixFQUFTNTdCLEtBQUtrM0IsWUFBWS8xQixHQUk5QixHQUhJeTZCLEVBQU8sR0FBR3ZyQixVQUNWNmxCLEdBQWtCMEYsRUFBTyxHQUFHdnJCLFVBQVUsSUFFckNrZCxFQUNELElBQUssSUFBSWtCLEVBQUksRUFBR2dHLEVBQUttSCxFQUFPMTZCLE9BQVF1dEIsRUFBSWdHLElBQU1oRyxFQUFHLENBQzdDLElBQUk2SCxFQUFZc0YsRUFBT25OLEdBQ3ZCLElBQUs2SCxFQUFVdUYsU0FBVSxDQUNyQnRPLEVBQVMrSSxFQUFVL0ksT0FDbkIsUUFLaEJ2dEIsS0FBS2szQixZQUFZaDJCLE9BQVMsRUFDMUJsQixLQUFLeTNCLGNBQWdCbEssR0FLekJ5SixFQUFLNTJCLFVBQVUrN0Isa0JBQW9CLFdBSy9CLFFBSmlDdjNCLElBQTdCNUUsS0FBS20zQixzQkFDTG1GLHFCQUFxQnQ4QixLQUFLbTNCLHFCQUMxQm4zQixLQUFLbTNCLHlCQUFzQnZ5QixHQUUxQjVFLEtBQUtvN0IsZUFBVixDQUtBLElBRkEsSUFBSU8sRUFBTUQsS0FBS0MsTUFDWFksR0FBTyxFQUNGcDdCLEVBQUluQixLQUFLazNCLFlBQVloMkIsT0FBUyxFQUFHQyxHQUFLLElBQUtBLEVBQUcsQ0FHbkQsSUFGQSxJQUFJeTZCLEVBQVM1N0IsS0FBS2szQixZQUFZLzFCLEdBQzFCcTdCLEdBQWlCLEVBQ1ovTixFQUFJLEVBQUdnRyxFQUFLbUgsRUFBTzE2QixPQUFRdXRCLEVBQUlnRyxJQUFNaEcsRUFBRyxDQUM3QyxJQUFJNkgsRUFBWXNGLEVBQU9uTixHQUN2QixJQUFJNkgsRUFBVXVGLFNBQWQsQ0FHQSxJQUFJWSxFQUFVZCxFQUFNckYsRUFBVTdELE1BQzFCaUssRUFBV3BHLEVBQVV3RixTQUFXLEVBQUlXLEVBQVVuRyxFQUFVd0YsU0FBVyxFQUNuRVksR0FBWSxHQUNacEcsRUFBVXVGLFVBQVcsRUFDckJhLEVBQVcsR0FHWEYsR0FBaUIsRUFFckIsSUFBSUcsRUFBV3JHLEVBQVV5RixPQUFPVyxHQUNoQyxHQUFJcEcsRUFBVUMsYUFBYyxDQUN4QixJQUFJNWYsRUFBSzJmLEVBQVVDLGFBQWEsR0FDNUIxZixFQUFLeWYsRUFBVUMsYUFBYSxHQUc1QjN0QixFQUFJK04sRUFBS2dtQixHQUZKckcsRUFBVUUsYUFBYSxHQUVGN2YsR0FDMUI5TixFQUFJZ08sRUFBSzhsQixHQUZKckcsRUFBVUUsYUFBYSxHQUVGM2YsR0FDOUI3VyxLQUFLczNCLGNBQWdCLENBQUMxdUIsRUFBR0MsR0FFN0IsR0FBSXl0QixFQUFVRyxrQkFBb0JILEVBQVVJLGlCQUFrQixDQUMxRCxJQUFJNXBCLEVBQTBCLElBQWI2dkIsRUFDWHJHLEVBQVVJLGlCQUNWSixFQUFVRyxpQkFDUmtHLEdBQ0tyRyxFQUFVSSxpQkFBbUJKLEVBQVVHLGtCQUNwRCxHQUFJSCxFQUFVL0ksT0FBUSxDQUNsQixJQUFJblgsRUFBT3BXLEtBQUs0OEIsaUJBQWlCNThCLEtBQUtpN0IsZUFDbEM0QixFQUF3Qjc4QixLQUFLazZCLGFBQWFwdEIsV0FBV0EsRUFBWSxFQUFHc0osR0FBTSxHQUM5RXBXLEtBQUtzM0IsY0FBZ0J0M0IsS0FBSzg4QixvQkFBb0JELEVBQXVCdkcsRUFBVS9JLFFBRW5GdnRCLEtBQUt1M0Isa0JBQW9CenFCLEVBQ3pCOU0sS0FBSys4QixtQkFBa0IsR0FFM0IsUUFBaUNuNEIsSUFBN0IweEIsRUFBVUsscUJBQ21CL3hCLElBQTdCMHhCLEVBQVVNLGVBQThCLENBQ3hDLElBQUl6Z0IsRUFBd0IsSUFBYndtQixFQUNULEdBQU9yRyxFQUFVTSxlQUFpQmx1QixLQUFLaUIsR0FBSSxFQUFJakIsS0FBS2lCLElBQ2xEakIsS0FBS2lCLEdBQ1Ayc0IsRUFBVUssZUFDUmdHLEdBQ0tyRyxFQUFVTSxlQUFpQk4sRUFBVUssZ0JBQ2xELEdBQUlMLEVBQVUvSSxPQUFRLENBQ2xCLElBQUl5UCxFQUFzQmg5QixLQUFLazZCLGFBQWEvakIsU0FBU0EsR0FBVSxHQUMvRG5XLEtBQUtzM0IsY0FBZ0J0M0IsS0FBS2k5QixzQkFBc0JELEVBQXFCMUcsRUFBVS9JLFFBRW5GdnRCLEtBQUt3M0IsZ0JBQWtCcmhCLEVBSTNCLEdBRkFuVyxLQUFLKzhCLG1CQUFrQixHQUN2QlIsR0FBTyxHQUNGakcsRUFBVXVGLFNBQ1gsT0FHUixHQUFJVyxFQUFnQixDQUNoQng4QixLQUFLazNCLFlBQVkvMUIsR0FBSyxLQUN0Qm5CLEtBQUtrOEIsUUU5c0JOLEdGOHNCbUMsR0FDbEMsSUFBSTdyQixFQUFXdXJCLEVBQU8sR0FBR3ZyQixTQUNyQkEsR0FDQTZsQixHQUFrQjdsQixHQUFVLElBS3hDclEsS0FBS2szQixZQUFjbDNCLEtBQUtrM0IsWUFBWWdHLE9BQU9DLFNBQ3ZDWixRQUFxQzMzQixJQUE3QjVFLEtBQUttM0Isc0JBQ2JuM0IsS0FBS20zQixvQkFBc0JpRyxzQkFBc0JwOUIsS0FBS204QixrQkFBa0I5MkIsS0FBS3JGLFVBUXJGZzNCLEVBQUs1MkIsVUFBVTY4QixzQkFBd0IsU0FBVTltQixFQUFVb1gsR0FDdkQsSUFBSXJYLEV4QnBzQlExRixFQUFZeXJCLEV3QnFzQnBCb0IsRUFBZ0JyOUIsS0FBS2c3QixvQkFNekIsWUFMc0JwMkIsSUFBbEJ5NEIsSUFFQSxHQURBbm5CLEVBQVMsQ0FBQ21uQixFQUFjLEdBQUs5UCxFQUFPLEdBQUk4UCxFQUFjLEdBQUs5UCxFQUFPLElBQ3pDcFgsRUFBV25XLEtBQUtpN0IsZXhCeHNCckJnQixFd0J5c0JFMU8sR3hCenNCZC9jLEV3QnlzQk0wRixHeEJ4c0JYLEtBQU8rbEIsRUFBTSxHQUN4QnpyQixFQUFXLEtBQU95ckIsRUFBTSxJd0J5c0JiL2xCLEdBT1g4Z0IsRUFBSzUyQixVQUFVMDhCLG9CQUFzQixTQUFVaHdCLEVBQVl5Z0IsR0FDdkQsSUFBSXJYLEVBQ0FtbkIsRUFBZ0JyOUIsS0FBS2c3QixvQkFDckJzQyxFQUFvQnQ5QixLQUFLaWtCLGdCQVE3QixZQVBzQnJmLElBQWxCeTRCLFFBQXFEejRCLElBQXRCMDRCLElBSy9CcG5CLEVBQVMsQ0FKRHFYLEVBQU8sR0FDVnpnQixHQUFjeWdCLEVBQU8sR0FBSzhQLEVBQWMsSUFBT0MsRUFDNUMvUCxFQUFPLEdBQ1Z6Z0IsR0FBY3lnQixFQUFPLEdBQUs4UCxFQUFjLElBQU9DLElBR2pEcG5CLEdBUVg4Z0IsRUFBSzUyQixVQUFVdzhCLGlCQUFtQixTQUFVVyxHQUN4QyxJQUFJbm5CLEVBQU9wVyxLQUFLcTNCLGNBQ2hCLEdBQUlrRyxFQUFjLENBQ2QsSUFBSXRXLEVBQUk3USxFQUFLLEdBQ1Q4USxFQUFJOVEsRUFBSyxHQUNiLE1BQU8sQ0FDSDFOLEtBQUsyc0IsSUFBSXBPLEVBQUl2ZSxLQUFLNEssSUFBSWlxQixJQUNsQjcwQixLQUFLMnNCLElBQUluTyxFQUFJeGUsS0FBSzJLLElBQUlrcUIsSUFDMUI3MEIsS0FBSzJzQixJQUFJcE8sRUFBSXZlLEtBQUsySyxJQUFJa3FCLElBQ2xCNzBCLEtBQUsyc0IsSUFBSW5PLEVBQUl4ZSxLQUFLNEssSUFBSWlxQixLQUk5QixPQUFPbm5CLEdBVWY0Z0IsRUFBSzUyQixVQUFVbzlCLGdCQUFrQixTQUFVQyxHQUN2Q3o5QixLQUFLcTNCLGNBQWdCdjBCLE1BQU11RCxRQUFRbzNCLEdBQzdCQSxFQUFTOWlCLFFBQ1QsQ0FBQyxJQUFLLEtBQ1AzYSxLQUFLbzdCLGdCQUNOcDdCLEtBQUtxN0IsbUJBQW1CLElBU2hDckUsRUFBSzUyQixVQUFVeVYsVUFBWSxXQUN2QixJQUFJSyxFQUFTbFcsS0FBS2c3QixvQkFDbEIsT0FBSzlrQixFQUdFK0wsR0FBaUIvTCxFQUFRbFcsS0FBS3U3QixpQkFGMUJybEIsR0FRZjhnQixFQUFLNTJCLFVBQVU0NkIsa0JBQW9CLFdBQy9CLE9BQXNFaDdCLEtBQUtvSCxJQUFJczJCLEtBS25GMUcsRUFBSzUyQixVQUFVdTlCLGVBQWlCLFdBQzVCLE9BQU8zOUIsS0FBS2s2QixjQUtoQmxELEVBQUs1MkIsVUFBVXc5Qix1QkFBeUIsV0FDcEMsT0FBTzU5QixLQUFLdTZCLFNBQVNwQyxxQkFNekJuQixFQUFLNTJCLFVBQVV5OUIsU0FBVyxTQUFVQyxHQUNoQyxZQUFrQmw1QixJQUFkazVCLEdBQ0FBLEVBQVUsR0FBSzk5QixLQUFLaTNCLE9BQU8sR0FDM0I2RyxFQUFVLEdBQUs5OUIsS0FBS2kzQixPQUFPLEdBQ3BCNkcsR0FHQTk5QixLQUFLaTNCLE9BQU90YyxTQWEzQnFjLEVBQUs1MkIsVUFBVTI5QixnQkFBa0IsU0FBVU4sR0FFdkMsTzdCdlVxQmp5QixFNkJzVVJ4TCxLQUFLZytCLHdCQUF3QlAsR0FDZHo5QixLQUFLdTdCLGdCN0JyVTFCL3ZCLEVBRlIsSUFBc0JBLEc2QjhVekJ3ckIsRUFBSzUyQixVQUFVNDlCLHdCQUEwQixTQUFVUCxHQUMvQyxJQUFJcm5CLEVBQU9xbkIsR0FBWXo5QixLQUFLaStCLCtCQUN4Qi9uQixFQUErRGxXLEtBQUtnN0Isb0JBQ3hFLEVBQU85a0IsRUFBUSxHQUNmLElBQUlwSixFQUFxQzlNLEtBQUtpa0IsZ0JBQzlDLE9BQXNCcmYsSUFBZmtJLEVBQTBCLEdBQ2pDLElBQUlxSixFQUFtQ25XLEtBQUtpN0IsY0FFNUMsT0FEQSxPQUFvQnIyQixJQUFidVIsRUFBd0IsR0FDeEJGLEdBQWtCQyxFQUFRcEosRUFBWXFKLEVBQVVDLElBTzNENGdCLEVBQUs1MkIsVUFBVXNMLGlCQUFtQixXQUM5QixPQUFPMUwsS0FBS201QixnQkFPaEJuQyxFQUFLNTJCLFVBQVV1TCxpQkFBbUIsV0FDOUIsT0FBTzNMLEtBQUtvNUIsZ0JBT2hCcEMsRUFBSzUyQixVQUFVeUwsV0FBYSxXQUN4QixPQUE4QjdMLEtBQUtrK0IscUJBQXFCbCtCLEtBQUtvNUIsaUJBT2pFcEMsRUFBSzUyQixVQUFVaU0sV0FBYSxTQUFVVSxHQUNsQy9NLEtBQUswM0IsY0FBYzEzQixLQUFLNjZCLG1CQUFtQixDQUFFcndCLFFBQVN1QyxNQU8xRGlxQixFQUFLNTJCLFVBQVV3TCxXQUFhLFdBQ3hCLE9BQThCNUwsS0FBS2srQixxQkFBcUJsK0IsS0FBS201QixpQkFPakVuQyxFQUFLNTJCLFVBQVVrTSxXQUFhLFNBQVVTLEdBQ2xDL00sS0FBSzAzQixjQUFjMTNCLEtBQUs2NkIsbUJBQW1CLENBQUV0d0IsUUFBU3dDLE1BTzFEaXFCLEVBQUs1MkIsVUFBVSs5Qix1QkFBeUIsU0FBVUMsR0FDOUNwK0IsS0FBSzAzQixjQUFjMTNCLEtBQUs2NkIsbUJBQW1CLENBQUUxQyxvQkFBcUJpRyxNQU90RXBILEVBQUs1MkIsVUFBVW03QixjQUFnQixXQUMzQixPQUFPdjdCLEtBQUtvM0IsYUFRaEJKLEVBQUs1MkIsVUFBVTZqQixjQUFnQixXQUMzQixPQUF3Q2prQixLQUFLb0gsSUFBSXMyQixLQVFyRDFHLEVBQUs1MkIsVUFBVWkrQixlQUFpQixXQUM1QixPQUFPcitCLEtBQUtzNUIsY0FVaEJ0QyxFQUFLNTJCLFVBQVVrK0IsdUJBQXlCLFNBQVU5eUIsRUFBUWl5QixHQUN0RCxPQUFPejlCLEtBQUt1K0IsK0JBQStCbmMsR0FBZTVXLEVBQVF4TCxLQUFLdTdCLGlCQUFrQmtDLElBUzdGekcsRUFBSzUyQixVQUFVbStCLCtCQUFpQyxTQUFVL3lCLEVBQVFpeUIsR0FDOUQsSUFBSXJuQixFQUFPcW5CLEdBQVl6OUIsS0FBS2krQiwrQkFDeEJ4VCxFQUFjLEdBQVNqZixHQUFVNEssRUFBSyxHQUN0Q3NVLEVBQWM5VSxHQUFVcEssR0FBVTRLLEVBQUssR0FDM0MsT0FBTzFOLEtBQUtELElBQUlnaUIsRUFBYUMsSUFRakNzTSxFQUFLNTJCLFVBQVVvK0IsOEJBQWdDLFNBQVVDLEdBQ3JELElBQUkvRixFQUFRK0YsR0FBYSxFQUNyQnIwQixFQUFnQnBLLEtBQUswK0IseUJBQXlCMStCLEtBQUttNUIsZ0JBQ25EN3VCLEVBQWdCdEssS0FBS281QixlQUNyQjN3QixFQUFNQyxLQUFLTSxJQUFJb0IsRUFBZ0JFLEdBQWlCNUIsS0FBS00sSUFBSTB2QixHQUM3RCxPQUFPLFNBS0c3NEIsR0FFTixPQURpQnVLLEVBQWdCMUIsS0FBSzBpQixJQUFJc04sRUFBTzc0QixFQUFRNEksS0FVakV1dUIsRUFBSzUyQixVQUFVNjZCLFlBQWMsV0FDekIsT0FBOEJqN0IsS0FBS29ILElBQUlzMkIsS0FRM0MxRyxFQUFLNTJCLFVBQVV1K0IsOEJBQWdDLFNBQVVGLEdBQ3JELElBQUlHLEVBQVdsMkIsS0FBS00sSUFBSXkxQixHQUFhLEdBQ2pDcjBCLEVBQWdCcEssS0FBSzArQix5QkFBeUIxK0IsS0FBS201QixnQkFDbkQ3dUIsRUFBZ0J0SyxLQUFLbzVCLGVBQ3JCM3dCLEVBQU1DLEtBQUtNLElBQUlvQixFQUFnQkUsR0FBaUJzMEIsRUFDcEQsT0FBTyxTQUtHOXhCLEdBRU4sT0FEWXBFLEtBQUtNLElBQUlvQixFQUFnQjBDLEdBQWM4eEIsRUFBV24yQixJQVV0RXV1QixFQUFLNTJCLFVBQVU2OUIsNkJBQStCLFNBQVVWLEdBQ3BELElBQUlubkIsRUFBT3BXLEtBQUs0OEIsaUJBQWlCVyxHQUM3Qi9ELEVBQVV4NUIsS0FBS3U1QixTQU9uQixPQU5JQyxJQUNBcGpCLEVBQU8sQ0FDSEEsRUFBSyxHQUFLb2pCLEVBQVEsR0FBS0EsRUFBUSxHQUMvQnBqQixFQUFLLEdBQUtvakIsRUFBUSxHQUFLQSxFQUFRLEtBR2hDcGpCLEdBS1g0Z0IsRUFBSzUyQixVQUFVME4sU0FBVyxXQUN0QixJQUFJcUMsRUFBYW5RLEtBQUt1N0IsZ0JBQ2xCenVCLEVBQW9DOU0sS0FBS2lrQixnQkFDekM5TixFQUFXblcsS0FBS2k3QixjQUNoQi9rQixFQUE4RGxXLEtBQUtnN0Isb0JBQ25FeEIsRUFBVXg1QixLQUFLdTVCLFNBQ25CLEdBQUlDLEVBQVMsQ0FDVCxJQUFJcUYsRUFBYzcrQixLQUFLaStCLCtCQUN2Qi9uQixFQUFTMmdCLEdBQWtCM2dCLEVBQVFsVyxLQUFLNDhCLG1CQUFvQixDQUFDaUMsRUFBWSxHQUFLLEVBQUlyRixFQUFRLEdBQUlxRixFQUFZLEdBQUssRUFBSXJGLEVBQVEsSUFBSzFzQixFQUFZcUosR0FFaEosTUFBTyxDQUNIRCxPQUFRQSxFQUFPeUUsTUFBTSxHQUNyQnhLLGdCQUEyQnZMLElBQWZ1TCxFQUEyQkEsRUFBYSxLQUNwRHJELFdBQVlBLEVBQ1pxSixTQUFVQSxFQUNWcEosS0FBTS9NLEtBQUsrNkIsWUFVbkIvRCxFQUFLNTJCLFVBQVUyNkIsUUFBVSxXQUNyQixJQUFJaHVCLEVBQ0FELEVBQWE5TSxLQUFLaWtCLGdCQUl0QixZQUhtQnJmLElBQWZrSSxJQUNBQyxFQUFPL00sS0FBS2srQixxQkFBcUJweEIsSUFFOUJDLEdBUVhpcUIsRUFBSzUyQixVQUFVODlCLHFCQUF1QixTQUFVcHhCLEdBQzVDLElBQ0lyRSxFQUFLb3ZCLEVBREw3aUIsRUFBU2hWLEtBQUt5NUIsVUFBWSxFQUU5QixHQUFJejVCLEtBQUtzNUIsYUFBYyxDQUNuQixJQUFJd0YsRUFBVWgrQixFQUFrQmQsS0FBS3M1QixhQUFjeHNCLEVBQVksR0FDL0RrSSxFQUFTOHBCLEVBQ1RyMkIsRUFBTXpJLEtBQUtzNUIsYUFBYXdGLEdBRXBCakgsRUFEQWlILEdBQVc5K0IsS0FBS3M1QixhQUFhcDRCLE9BQVMsRUFDekIsRUFHQXVILEVBQU16SSxLQUFLczVCLGFBQWF3RixFQUFVLFFBSW5EcjJCLEVBQU16SSxLQUFLbTVCLGVBQ1h0QixFQUFhNzNCLEtBQUtxNUIsWUFFdEIsT0FBT3JrQixFQUFTdE0sS0FBS00sSUFBSVAsRUFBTXFFLEdBQWNwRSxLQUFLTSxJQUFJNnVCLElBUTFEYixFQUFLNTJCLFVBQVU0N0IscUJBQXVCLFNBQVVqdkIsR0FDNUMsR0FBSS9NLEtBQUtzNUIsYUFBYyxDQUNuQixHQUFJdDVCLEtBQUtzNUIsYUFBYXA0QixRQUFVLEVBQzVCLE9BQU8sRUFFWCxJQUFJNjlCLEVBQVksRUFBTXIyQixLQUFLMnZCLE1BQU10ckIsR0FBTyxFQUFHL00sS0FBS3M1QixhQUFhcDRCLE9BQVMsR0FDbEUyMkIsRUFBYTczQixLQUFLczVCLGFBQWF5RixHQUFhLytCLEtBQUtzNUIsYUFBYXlGLEVBQVksR0FDOUUsT0FBUS8rQixLQUFLczVCLGFBQWF5RixHQUN0QnIyQixLQUFLMGlCLElBQUl5TSxFQUFZLEVBQU05cUIsRUFBT2d5QixFQUFXLEVBQUcsSUFHcEQsT0FBUS8rQixLQUFLbTVCLGVBQWlCendCLEtBQUswaUIsSUFBSXByQixLQUFLcTVCLFlBQWF0c0IsRUFBTy9NLEtBQUt5NUIsV0FhN0V6QyxFQUFLNTJCLFVBQVU0K0IsSUFBTSxTQUFVQyxFQUFrQmp3QixHQUU3QyxJQUFJa3dCLEVBSUosR0FIQSxFQUFPcDhCLE1BQU11RCxRQUFRNDRCLElBRWIsbUJBRHFCLEVBQXdDLHNCQUNqRCxJQUNoQm44QixNQUFNdUQsUUFBUTQ0QixHQUNkLEdBQVEsR0FBUUEsR0FBbUIsSUFFbkNDLEVBQVcsR0FEUDF6QixFQUFTNFcsR0FBZTZjLEVBQWtCai9CLEtBQUt1N0IsdUJBR2xELEdUdG5DRCxXU3NuQ0swRCxFQUFpQnBSLFVBQW1DLENBQ3pELElBQUlyaUIsR0FDSjB6QixFQUFXLEdBRFAxekIsRUFBUzRXLEdBQWU2YyxFQUFpQnh6QixZQUFhekwsS0FBS3U3QixtQkFFdERqTyxPQUFPdHRCLEtBQUtpN0IsY0FBZXBsQixHQUFVckssUUFFN0MsQ0FDRCxJQUFJdVcsRUFBaUJDLEtBRWpCa2QsRUFEQW5kLEVBQ3NFa2QsRUFDakUxUyxRQUNBM1osVUFBVW1QLEVBQWdCL2hCLEtBQUt1N0IsaUJBR3pCMEQsRUFHbkJqL0IsS0FBS20vQixZQUFZRCxFQUFVbHdCLElBTy9CZ29CLEVBQUs1MkIsVUFBVWcvQix5QkFBMkIsU0FBVUYsR0FVaEQsSUFUQSxJQUFJL29CLEVBQVduVyxLQUFLaTdCLGNBQ2hCelIsRUFBVzlnQixLQUFLNEssSUFBSTZDLEdBQ3BCc1QsRUFBVy9nQixLQUFLMkssS0FBSzhDLEdBQ3JCa3BCLEVBQVNILEVBQVNuUSxxQkFDbEI3WixFQUFTZ3FCLEVBQVM5UCxZQUNsQmtRLEVBQVUsSUFDVkMsRUFBVSxJQUNWQyxHQUFVLElBQ1ZDLEdBQVUsSUFDTHQrQixFQUFJLEVBQUdXLEVBQUt1OUIsRUFBT24rQixPQUFRQyxFQUFJVyxFQUFJWCxHQUFLK1QsRUFBUSxDQUNyRCxJQUFJNGhCLEVBQU91SSxFQUFPbCtCLEdBQUtxb0IsRUFBVzZWLEVBQU9sK0IsRUFBSSxHQUFLc29CLEVBQzlDc04sRUFBT3NJLEVBQU9sK0IsR0FBS3NvQixFQUFXNFYsRUFBT2wrQixFQUFJLEdBQUtxb0IsRUFDbEQ4VixFQUFVNTJCLEtBQUtGLElBQUk4MkIsRUFBU3hJLEdBQzVCeUksRUFBVTcyQixLQUFLRixJQUFJKzJCLEVBQVN4SSxHQUM1QnlJLEVBQVU5MkIsS0FBS0QsSUFBSSsyQixFQUFTMUksR0FDNUIySSxFQUFVLzJCLEtBQUtELElBQUlnM0IsRUFBUzFJLEdBRWhDLE1BQU8sQ0FBQ3VJLEVBQVNDLEVBQVNDLEVBQVNDLElBTXZDekksRUFBSzUyQixVQUFVKytCLFlBQWMsU0FBVUQsRUFBVWx3QixHQUM3QyxJQUFJakYsRUFBVWlGLEdBQWUsR0FDekJvSCxFQUFPck0sRUFBUXFNLEtBQ2RBLElBQ0RBLEVBQU9wVyxLQUFLaStCLGdDQUVoQixJQUVJM3pCLEVBRkFrdkIsT0FBOEI1MEIsSUFBcEJtRixFQUFReXZCLFFBQXdCenZCLEVBQVF5dkIsUUFBVSxDQUFDLEVBQUcsRUFBRyxFQUFHLEdBQ3RFc0YsT0FBOEJsNkIsSUFBcEJtRixFQUFRKzBCLFNBQXdCLzBCLEVBQVErMEIsUUFHbER4MEIsT0FEMEIxRixJQUExQm1GLEVBQVFPLGNBQ1FQLEVBQVFPLG1CQUVDMUYsSUFBcEJtRixFQUFRUyxRQUNHeEssS0FBS2c4QixxQkFBcUJqeUIsRUFBUVMsU0FHbEMsRUFFcEIsSUFBSWsxQixFQUFnQjEvQixLQUFLby9CLHlCQUF5QkYsR0FFOUNweUIsRUFBYTlNLEtBQUt1K0IsK0JBQStCbUIsRUFBZSxDQUNoRXRwQixFQUFLLEdBQUtvakIsRUFBUSxHQUFLQSxFQUFRLEdBQy9CcGpCLEVBQUssR0FBS29qQixFQUFRLEdBQUtBLEVBQVEsS0FFbkMxc0IsRUFBYXNnQixNQUFNdGdCLEdBQ2J4QyxFQUNBNUIsS0FBS0QsSUFBSXFFLEVBQVl4QyxHQUMzQndDLEVBQWE5TSxLQUFLMCtCLHlCQUF5QjV4QixFQUFZZ3lCLEVBQVUsRUFBSSxHQUVyRSxJQUFJM29CLEVBQVduVyxLQUFLaTdCLGNBQ2hCeFIsRUFBVy9nQixLQUFLMkssSUFBSThDLEdBQ3BCcVQsRUFBVzlnQixLQUFLNEssSUFBSTZDLEdBQ3BCd3BCLEVBQVk5cEIsR0FBVTZwQixHQUMxQkMsRUFBVSxLQUFRbkcsRUFBUSxHQUFLQSxFQUFRLElBQU0sRUFBSzFzQixFQUNsRDZ5QixFQUFVLEtBQVFuRyxFQUFRLEdBQUtBLEVBQVEsSUFBTSxFQUFLMXNCLEVBQ2xELElBQUk4eUIsRUFBVUQsRUFBVSxHQUFLblcsRUFBV21XLEVBQVUsR0FBS2xXLEVBQ25Eb1csRUFBVUYsRUFBVSxHQUFLblcsRUFBV21XLEVBQVUsR0FBS2xXLEVBQ25EdlQsRUFBU2xXLEtBQUs4L0IscUJBQXFCLENBQUNGLEVBQVNDLEdBQVUveUIsR0FDdkR1RCxFQUFXdEcsRUFBUXNHLFNBQVd0RyxFQUFRc0csU0FBVzVPLE9BQzVCbUQsSUFBckJtRixFQUFRK3hCLFNBQ1I5N0IsS0FBS3c3QixnQkFBZ0IsQ0FDakIxdUIsV0FBWUEsRUFDWm9KLE9BQVFBLEVBQ1I0bEIsU0FBVS94QixFQUFRK3hCLFNBQ2xCQyxPQUFRaHlCLEVBQVFneUIsUUFDakIxckIsSUFHSHJRLEtBQUt1M0Isa0JBQW9CenFCLEVBQ3pCOU0sS0FBS3MzQixjQUFnQnBoQixFQUNyQmxXLEtBQUsrOEIsbUJBQWtCLEdBQU8sR0FDOUI3RyxHQUFrQjdsQixHQUFVLEtBVXBDMm1CLEVBQUs1MkIsVUFBVTIvQixTQUFXLFNBQVV2dkIsRUFBWTRGLEVBQU04QyxHQUNsRGxaLEtBQUtnZ0MsaUJBQWlCOWQsR0FBbUIxUixFQUFZeFEsS0FBS3U3QixpQkFBa0JubEIsRUFBTThDLElBT3RGOGQsRUFBSzUyQixVQUFVNC9CLGlCQUFtQixTQUFVeHZCLEVBQVk0RixFQUFNOEMsR0FDMURsWixLQUFLbzZCLGtCQUFrQnZELEdBQWtCcm1CLEVBQVk0RixFQUFNOEMsRUFBVWxaLEtBQUtpa0IsZ0JBQWlCamtCLEtBQUtpN0IsaUJBVXBHakUsRUFBSzUyQixVQUFVNi9CLHFCQUF1QixTQUFVL3BCLEVBQVFwSixFQUFZcUosRUFBVUMsR0FDMUUsSUFBSThwQixFQUNBMUcsRUFBVXg1QixLQUFLdTVCLFNBQ25CLEdBQUlDLEdBQVd0akIsRUFBUSxDQUNuQixJQUFJMm9CLEVBQWM3K0IsS0FBS2krQiw4QkFBOEI5bkIsR0FDakRncUIsRUFBZ0J0SixHQUFrQjNnQixFQUFRRSxFQUFNLENBQUN5b0IsRUFBWSxHQUFLLEVBQUlyRixFQUFRLEdBQUlxRixFQUFZLEdBQUssRUFBSXJGLEVBQVEsSUFBSzFzQixFQUFZcUosR0FDcEkrcEIsRUFBYyxDQUNWaHFCLEVBQU8sR0FBS2lxQixFQUFjLEdBQzFCanFCLEVBQU8sR0FBS2lxQixFQUFjLElBR2xDLE9BQU9ELEdBS1hsSixFQUFLNTJCLFVBQVUrNkIsTUFBUSxXQUNuQixRQUFTbjdCLEtBQUtnN0IsMEJBQWdEcDJCLElBQXpCNUUsS0FBS2lrQixpQkFPOUMrUyxFQUFLNTJCLFVBQVVnZ0MsYUFBZSxTQUFVQyxHQUNwQyxJQUFJbnFCLEVBQVMrTCxHQUFpQmppQixLQUFLczNCLGNBQWV0M0IsS0FBS3U3QixpQkFDdkR2N0IsS0FBS3NnQyxVQUFVLENBQ1hwcUIsRUFBTyxHQUFLbXFCLEVBQWlCLEdBQzdCbnFCLEVBQU8sR0FBS21xQixFQUFpQixNQU9yQ3JKLEVBQUs1MkIsVUFBVW1nQyxxQkFBdUIsU0FBVUYsR0FDNUMsSUFBSW5xQixFQUFTbFcsS0FBS3MzQixjQUNsQnQzQixLQUFLbzZCLGtCQUFrQixDQUNuQmxrQixFQUFPLEdBQUttcUIsRUFBaUIsR0FDN0JucUIsRUFBTyxHQUFLbXFCLEVBQWlCLE1BVXJDckosRUFBSzUyQixVQUFVb2dDLGlCQUFtQixTQUFVclcsRUFBT3VELEdBQy9DLElBQUlILEVBQVNHLEdBQWN4TCxHQUFtQndMLEVBQVkxdEIsS0FBS3U3QixpQkFDL0R2N0IsS0FBS3lnQyx5QkFBeUJ0VyxFQUFPb0QsSUFRekN5SixFQUFLNTJCLFVBQVVxZ0MseUJBQTJCLFNBQVV0VyxFQUFPdUQsR0FDdkQsSUFBSWdULEVBQVcxZ0MsS0FBS283QixnQkFBa0JwN0IsS0FBS284QixpQkFDdkNobUIsRUFBT3BXLEtBQUs0OEIsaUJBQWlCNThCLEtBQUtpN0IsZUFDbEMwRixFQUFnQjNnQyxLQUFLazZCLGFBQWFwdEIsV0FBVzlNLEtBQUt1M0Isa0JBQW9CcE4sRUFBTyxFQUFHL1QsRUFBTXNxQixHQUN0RmhULElBQ0ExdEIsS0FBS3MzQixjQUFnQnQzQixLQUFLODhCLG9CQUFvQjZELEVBQWVqVCxJQUVqRTF0QixLQUFLdTNCLG1CQUFxQnBOLEVBQzFCbnFCLEtBQUsrOEIscUJBU1QvRixFQUFLNTJCLFVBQVV3Z0MsV0FBYSxTQUFVM0UsRUFBT3ZPLEdBQ3pDMXRCLEtBQUt3Z0MsaUJBQWlCOTNCLEtBQUswaUIsSUFBSXByQixLQUFLcTVCLGFBQWM0QyxHQUFRdk8sSUFTOURzSixFQUFLNTJCLFVBQVV5Z0MsZUFBaUIsU0FBVTVFLEVBQU92TyxHQUN6Q0EsSUFDQUEsRUFBYXhMLEdBQW1Cd0wsRUFBWTF0QixLQUFLdTdCLGtCQUVyRHY3QixLQUFLOGdDLHVCQUF1QjdFLEVBQU92TyxJQU12Q3NKLEVBQUs1MkIsVUFBVTBnQyx1QkFBeUIsU0FBVTdFLEVBQU92TyxHQUNyRCxJQUFJZ1QsRUFBVzFnQyxLQUFLbzdCLGdCQUFrQnA3QixLQUFLbzhCLGlCQUN2QzJFLEVBQWMvZ0MsS0FBS2s2QixhQUFhL2pCLFNBQVNuVyxLQUFLdzNCLGdCQUFrQnlFLEVBQU95RSxHQUN2RWhULElBQ0ExdEIsS0FBS3MzQixjQUFnQnQzQixLQUFLaTlCLHNCQUFzQjhELEVBQWFyVCxJQUVqRTF0QixLQUFLdzNCLGlCQUFtQnlFLEVBQ3hCajhCLEtBQUsrOEIscUJBUVQvRixFQUFLNTJCLFVBQVVrZ0MsVUFBWSxTQUFVcHFCLEdBQ2pDbFcsS0FBS282QixrQkFBa0JsWSxHQUFtQmhNLEVBQVFsVyxLQUFLdTdCLG1CQU0zRHZFLEVBQUs1MkIsVUFBVWc2QixrQkFBb0IsU0FBVWxrQixHQUN6Q2xXLEtBQUtzM0IsY0FBZ0JwaEIsRUFDckJsVyxLQUFLKzhCLHFCQU9UL0YsRUFBSzUyQixVQUFVODdCLFFBQVUsU0FBVThFLEVBQU0vRSxHQUdyQyxPQUZBajhCLEtBQUtpM0IsT0FBTytKLElBQVMvRSxFQUNyQmo4QixLQUFLbUcsVUFDRW5HLEtBQUtpM0IsT0FBTytKLElBUXZCaEssRUFBSzUyQixVQUFVaTZCLGNBQWdCLFNBQVV2dEIsR0FDckM5TSxLQUFLdTNCLGtCQUFvQnpxQixFQUN6QjlNLEtBQUsrOEIscUJBUVQvRixFQUFLNTJCLFVBQVUrNUIsWUFBYyxTQUFVaGtCLEdBQ25DblcsS0FBS3czQixnQkFBa0JyaEIsRUFDdkJuVyxLQUFLKzhCLHFCQU9UL0YsRUFBSzUyQixVQUFVazZCLFFBQVUsU0FBVXZ0QixHQUMvQi9NLEtBQUtxNkIsY0FBY3I2QixLQUFLZzhCLHFCQUFxQmp2QixLQVVqRGlxQixFQUFLNTJCLFVBQVUyOEIsa0JBQW9CLFNBQVVrRSxFQUFzQkMsR0FDL0QsSUFBSVIsRUFBVzFnQyxLQUFLbzdCLGdCQUFrQnA3QixLQUFLbzhCLGtCQUFvQjhFLEVBRTNESCxFQUFjL2dDLEtBQUtrNkIsYUFBYS9qQixTQUFTblcsS0FBS3czQixnQkFBaUJrSixHQUMvRHRxQixFQUFPcFcsS0FBSzQ4QixpQkFBaUJtRSxHQUM3QkosRUFBZ0IzZ0MsS0FBS2s2QixhQUFhcHRCLFdBQVc5TSxLQUFLdTNCLGtCQUFtQixFQUFHbmhCLEVBQU1zcUIsR0FDOUVTLEVBQVluaEMsS0FBS2s2QixhQUFhaGtCLE9BQU9sVyxLQUFLczNCLGNBQWVxSixFQUFldnFCLEVBQU1zcUIsRUFBVTFnQyxLQUFLaWdDLHFCQUFxQmpnQyxLQUFLczNCLGNBQWVxSixFQUFlSSxFQUFhM3FCLElBQ2xLcFcsS0FBS29ILElBQUlzMkIsTUFBMkJxRCxHQUNwQy9nQyxLQUFLNkgsSUFBSTYxQixHQUF1QnFELEdBRWhDL2dDLEtBQUtvSCxJQUFJczJCLE1BQTZCaUQsR0FDdEMzZ0MsS0FBSzZILElBQUk2MUIsR0FBeUJpRCxHQUVqQzNnQyxLQUFLb0gsSUFBSXMyQixLQUNULEdBQU8xOUIsS0FBS29ILElBQUlzMkIsSUFBc0J5RCxJQUN2Q25oQyxLQUFLNkgsSUFBSTYxQixHQUFxQnlELEdBRTlCbmhDLEtBQUtvN0IsaUJBQW1CNkYsR0FDeEJqaEMsS0FBS3E4QixtQkFFVHI4QixLQUFLeTNCLG1CQUFnQjd5QixHQVd6Qm95QixFQUFLNTJCLFVBQVVpN0IsbUJBQXFCLFNBQVUrRixFQUFjQyxFQUF5QjNULEdBQ2pGLElBQUlvTyxPQUE0QmwzQixJQUFqQnc4QixFQUE2QkEsRUFBZSxJQUN2RHBnQyxFQUFZcWdDLEdBQTJCLEVBQ3ZDTixFQUFjL2dDLEtBQUtrNkIsYUFBYS9qQixTQUFTblcsS0FBS3czQixpQkFDOUNwaEIsRUFBT3BXLEtBQUs0OEIsaUJBQWlCbUUsR0FDN0JKLEVBQWdCM2dDLEtBQUtrNkIsYUFBYXB0QixXQUFXOU0sS0FBS3UzQixrQkFBbUJ2MkIsRUFBV29WLEdBQ2hGK3FCLEVBQVluaEMsS0FBS2s2QixhQUFhaGtCLE9BQU9sVyxLQUFLczNCLGNBQWVxSixFQUFldnFCLEdBQU0sRUFBT3BXLEtBQUtpZ0MscUJBQXFCamdDLEtBQUtzM0IsY0FBZXFKLEVBQWVJLEVBQWEzcUIsSUFDbkssR0FBaUIsSUFBYjBsQixJQUFtQjk3QixLQUFLeTNCLGNBS3hCLE9BSkF6M0IsS0FBS3UzQixrQkFBb0JvSixFQUN6QjNnQyxLQUFLdzNCLGdCQUFrQnVKLEVBQ3ZCL2dDLEtBQUtzM0IsY0FBZ0I2SixPQUNyQm5oQyxLQUFLKzhCLG9CQUdULElBQUl4UCxFQUFTRyxJQUE0QixJQUFib08sRUFBaUI5N0IsS0FBS3kzQixtQkFBZ0I3eUIsR0FDbEU1RSxLQUFLeTNCLG1CQUFnQjd5QixFQUNqQjVFLEtBQUtpa0Isa0JBQW9CMGMsR0FDekIzZ0MsS0FBS2k3QixnQkFBa0I4RixHQUN0Qi9nQyxLQUFLZzdCLHFCQUNMLEdBQU9oN0IsS0FBS2c3QixvQkFBcUJtRyxLQUM5Qm5oQyxLQUFLbzdCLGdCQUNMcDdCLEtBQUtxOEIsbUJBRVRyOEIsS0FBS3c3QixnQkFBZ0IsQ0FDakJybEIsU0FBVTRxQixFQUNWN3FCLE9BQVFpckIsRUFDUnIwQixXQUFZNnpCLEVBQ1o3RSxTQUFVQSxFQUNWQyxPQUFRMVEsR0FDUmtDLE9BQVFBLE1BVXBCeUosRUFBSzUyQixVQUFVa2hDLGlCQUFtQixXQUM5QnRoQyxLQUFLcTdCLG1CQUFtQixHQUN4QnI3QixLQUFLazhCLFFFLytDSSxFRisrQzBCLElBVXZDbEYsRUFBSzUyQixVQUFVbWhDLGVBQWlCLFNBQVVILEVBQWNDLEVBQXlCM1QsR0FDN0UsSUFBSUgsRUFBU0csR0FBY3hMLEdBQW1Cd0wsRUFBWTF0QixLQUFLdTdCLGlCQUMvRHY3QixLQUFLd2hDLHVCQUF1QkosRUFBY0MsRUFBeUI5VCxJQVN2RXlKLEVBQUs1MkIsVUFBVW9oQyx1QkFBeUIsU0FBVUosRUFBY0MsRUFBeUIzVCxHQUNyRjF0QixLQUFLazhCLFFFcmdESSxHRnFnRDJCLEdBQ3BDbDhCLEtBQUtxN0IsbUJBQW1CK0YsRUFBY0MsRUFBeUIzVCxJQVNuRXNKLEVBQUs1MkIsVUFBVTAvQixxQkFBdUIsU0FBVXRKLEVBQWNpTCxHQUMxRCxJQUFJcnJCLEVBQU9wVyxLQUFLNDhCLGlCQUFpQjU4QixLQUFLaTdCLGVBQ3RDLE9BQU9qN0IsS0FBS2s2QixhQUFhaGtCLE9BQU9zZ0IsRUFBY2lMLEdBQXdCemhDLEtBQUtpa0IsZ0JBQWlCN04sSUFXaEc0Z0IsRUFBSzUyQixVQUFVc2hDLG1CQUFxQixTQUFVQyxFQUFZQyxHQUN0RCxJQUFJQyxFQUFZN2hDLEtBQUtnOEIscUJBQXFCMkYsR0FDMUMsT0FBTzNoQyxLQUFLaytCLHFCQUFxQmwrQixLQUFLMCtCLHlCQUF5Qm1ELEVBQVdELEtBVzlFNUssRUFBSzUyQixVQUFVcytCLHlCQUEyQixTQUFVaEksRUFBa0JrTCxHQUNsRSxJQUFJNWdDLEVBQVk0Z0MsR0FBaUIsRUFDN0J4ckIsRUFBT3BXLEtBQUs0OEIsaUJBQWlCNThCLEtBQUtpN0IsZUFDdEMsT0FBT2o3QixLQUFLazZCLGFBQWFwdEIsV0FBVzRwQixFQUFrQjExQixFQUFXb1YsSUFFOUQ0Z0IsRUE1eENjLENBNnhDdkIsR0d6OUNGLFNBQVN0TyxHQUFPb1osRUFBS0MsRUFBYUMsR0FFOUIsT0FBT0QsRUFBYyxJQUFNRCxFQUFNLEtBRGZFLEVDOURmLFNBQWtCQSxHQUNyQixNQUFxQixpQkFBVkEsRUFDQUEsRUFnS1IsU0FBa0JBLEdBQ3JCLElBQUlwNEIsRUFBSW80QixFQUFNLEdBQ1ZwNEIsSUFBVSxFQUFKQSxLQUNOQSxFQUFLQSxFQUFJLEdBQU8sR0FFcEIsSUFBSXE0QixFQUFJRCxFQUFNLEdBQ1ZDLElBQVUsRUFBSkEsS0FDTkEsRUFBS0EsRUFBSSxHQUFPLEdBRXBCLElBQUlwaEMsRUFBSW1oQyxFQUFNLEdBS2QsT0FKSW5oQyxJQUFVLEVBQUpBLEtBQ05BLEVBQUtBLEVBQUksR0FBTyxHQUdiLFFBQVUrSSxFQUFJLElBQU1xNEIsRUFBSSxJQUFNcGhDLEVBQUksVUFEcEIrRCxJQUFibzlCLEVBQU0sR0FBbUIsRUFBSUEsRUFBTSxJQUNRLElBM0t4QyxDQUFTQSxHRHlETUUsQ0FBU0YsR0FBUyxRQVN6QyxJQUFJRyxHQUFTLElBaEdnQixXQUNoQyxTQUFTQyxJQUtMcGlDLEtBQUtxaUMsT0FBUyxHQUtkcmlDLEtBQUtzaUMsV0FBYSxFQUtsQnRpQyxLQUFLdWlDLGNBQWdCLEdBOER6QixPQXpEQUgsRUFBZWhpQyxVQUFVK0IsTUFBUSxXQUM3Qm5DLEtBQUtxaUMsT0FBUyxHQUNkcmlDLEtBQUtzaUMsV0FBYSxHQUt0QkYsRUFBZWhpQyxVQUFVaW9CLGVBQWlCLFdBQ3RDLE9BQU9yb0IsS0FBS3NpQyxXQUFhdGlDLEtBQUt1aUMsZUFLbENILEVBQWVoaUMsVUFBVW9pQyxPQUFTLFdBQzlCLEdBQUl4aUMsS0FBS3FvQixpQkFBa0IsQ0FDdkIsSUFBSWxuQixFQUFJLEVBQ1IsSUFBSyxJQUFJYyxLQUFPakMsS0FBS3FpQyxPQUFRLENBQ3pCLElBQUlJLEVBQVl6aUMsS0FBS3FpQyxPQUFPcGdDLEdBQ1YsSUFBUCxFQUFOZCxNQUFtQnNoQyxFQUFVNTlCLHVCQUN2QjdFLEtBQUtxaUMsT0FBT3BnQyxLQUNqQmpDLEtBQUtzaUMsZUFXdkJGLEVBQWVoaUMsVUFBVWdILElBQU0sU0FBVTA2QixFQUFLQyxFQUFhQyxHQUN2RCxJQUFJLy9CLEVBQU15bUIsR0FBT29aLEVBQUtDLEVBQWFDLEdBQ25DLE9BQU8vL0IsS0FBT2pDLEtBQUtxaUMsT0FBU3JpQyxLQUFLcWlDLE9BQU9wZ0MsR0FBTyxNQVFuRG1nQyxFQUFlaGlDLFVBQVV5SCxJQUFNLFNBQVVpNkIsRUFBS0MsRUFBYUMsRUFBT1MsR0FDOUQsSUFBSXhnQyxFQUFNeW1CLEdBQU9vWixFQUFLQyxFQUFhQyxHQUNuQ2hpQyxLQUFLcWlDLE9BQU9wZ0MsR0FBT3dnQyxJQUNqQnppQyxLQUFLc2lDLFlBU1hGLEVBQWVoaUMsVUFBVXNpQyxRQUFVLFNBQVVDLEdBQ3pDM2lDLEtBQUt1aUMsY0FBZ0JJLEVBQ3JCM2lDLEtBQUt3aUMsVUFFRkosRUE5RXdCLElFUi9CLEdBQXdDLFdBQ3hDLElBQUk5L0IsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQWlONUMsU0FBUzAvQixHQUFnQnIxQixFQUFLYSxHQUMxQixZQUVKLFNBOUtpQyxTQUFVL0ssR0FLdkMsU0FBU3cvQixFQUFZdDFCLEdBQ2pCLElBQUkvSixFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FNakMsT0FEQXdELEVBQU1zL0IsS0FBT3YxQixFQUNOL0osRUF5SlgsT0FwS0EsR0FBVXEvQixFQUFheC9CLEdBa0J2QncvQixFQUFZemlDLFVBQVUyaUMsb0JBQXNCLFNBQVVoakMsRUFBTXFPLEdBQ3hELEtBTUp5MEIsRUFBWXppQyxVQUFVNGlDLG9CQUFzQixTQUFVNTBCLEdBQ2xELElBQUl2QixFQUFZdUIsRUFBV3ZCLFVBQ3ZCOE0sRUFBNkJ2TCxFQUFXdUwsMkJBQ3hDa0IsRUFBNkJ6TSxFQUFXeU0sMkJBQzVDaEksR0FBaUI4RyxFQUE0QnZMLEVBQVdnSSxLQUFLLEdBQUssRUFBR2hJLEVBQVdnSSxLQUFLLEdBQUssRUFBRyxFQUFJdkosRUFBVUMsWUFBYSxFQUFJRCxFQUFVQyxZQUFhRCxFQUFVc0osVUFBV3RKLEVBQVVxSixPQUFPLElBQUtySixFQUFVcUosT0FBTyxJQUMvTTNDLEdBQVlzSCxFQUE0QmxCLElBaUI1Q2twQixFQUFZemlDLFVBQVVtUSwyQkFBNkIsU0FBVUMsRUFBWXBDLEVBQVlxQyxFQUFjd3lCLEVBQWM1eUIsRUFBVTZ5QixFQUFTQyxFQUFhQyxHQUM3SSxJQUFJeFksRUFDQS9kLEVBQVl1QixFQUFXdkIsVUFRM0IsU0FBUzBELEVBQTJCdEYsRUFBU280QixFQUFTcjRCLEVBQU9rMEIsR0FDekQsT0FBTzd1QixFQUFTck4sS0FBS2tnQyxFQUFTRyxFQUFTcDRCLEVBQVVELEVBQVEsS0FBTWswQixHQUVuRSxJQUFJL3VCLEVBQWF0RCxFQUFVc0QsV0FDdkJtekIsRTdCNlJMLFNBQWU5eUIsRUFBWUwsR0FDOUIsR0FBSUEsRUFBV2dOLFdBQVksQ0FDdkIsSUFBSW9tQixFQUFhLEdBQVNwekIsRUFBVzFFLGFBQ2pDKzNCLEVBYUwsU0FBdUJoekIsRUFBWUwsRUFBWXN6QixHQUNsRCxJQUFJQyxFQUFtQnZ6QixFQUFXMUUsWUFDOUIrM0IsRUFBYSxFQUNqQixHQUFJcnpCLEVBQVdnTixhQUNWM00sRUFBVyxHQUFLa3pCLEVBQWlCLElBQU1sekIsRUFBVyxHQUFLa3pCLEVBQWlCLElBQUssQ0FDOUUsSUFBSUMsRUFBb0JGLEdBQXlCLEdBQVNDLEdBQzFERixFQUFhOTZCLEtBQUsydkIsT0FBTzduQixFQUFXLEdBQUtrekIsRUFBaUIsSUFBTUMsR0FFcEUsT0FBT0gsRUFyQmMsQ0FBY2h6QixFQUFZTCxFQUFZb3pCLEdBQ25EQyxJQUNBaHpCLEVBQVcsSUFBTWd6QixFQUFhRCxHQUd0QyxPQUFPL3lCLEU2QnJTd0IsQ0FBTUEsRUFBV21LLFFBQVN4SyxHQUNqRHl6QixFQUFVLENBQUMsQ0FBQyxFQUFHLElBQ25CLEdBQUl6ekIsRUFBV2dOLFlBQWM4bEIsRUFBYyxDQUN2QyxJQUNJTSxFQUFhLEdBRE1wekIsRUFBVzFFLGFBRWxDbTRCLEVBQVFuaEMsS0FBSyxFQUFFOGdDLEVBQVksR0FBSSxDQUFDQSxFQUFZLElBTWhELElBSkEsSUFBSU0sRUFBY3oxQixFQUFXSyxpQkFDekJxMUIsRUFBWUQsRUFBWTNpQyxPQUN4QndQLEVBQTRDLEdBQzVDcXpCLEVBQVcsR0FDTjVpQyxFQUFJLEVBQUdBLEVBQUl5aUMsRUFBUTFpQyxPQUFRQyxJQUNoQyxJQUFLLElBQUlzdEIsRUFBSXFWLEVBQVksRUFBR3JWLEdBQUssSUFBS0EsRUFBRyxDQUNyQyxJQUFJN2hCLEVBQWFpM0IsRUFBWXBWLEdBQ3pCempCLEVBQVE0QixFQUFXNUIsTUFDdkIsR0FBSUEsRUFBTTZELGVBQ05sQyxHQUFPQyxFQUFZQyxJQUNuQnMyQixFQUFZbmdDLEtBQUtvZ0MsRUFBVXA0QixHQUFRLENBQ25DLElBQUlxRCxFQUFnQnJELEVBQU1zRCxjQUN0QnRNLEVBQVNnSixFQUFNNkMsWUFDbkIsR0FBSVEsR0FBaUJyTSxFQUFRLENBQ3pCLElBQUk4UixFQUFjOVIsRUFBT2dpQyxXQUNuQlYsRUFDQTl5QixFQUNGeXpCLEVBQWExekIsRUFBMkJsTCxLQUFLLEtBQU11SCxFQUFXM0IsU0FDbEU4NEIsRUFBUyxHQUFLandCLEVBQVksR0FBSzh2QixFQUFRemlDLEdBQUcsR0FDMUM0aUMsRUFBUyxHQUFLandCLEVBQVksR0FBSzh2QixFQUFRemlDLEdBQUcsR0FDMUN5cEIsRUFBU3ZjLEVBQWNrQywyQkFBMkJ3ekIsRUFBVTMxQixFQUFZcUMsRUFBY3d6QixFQUFZdnpCLEdBRXRHLEdBQUlrYSxFQUNBLE9BQU9BLEdBS3ZCLEdBQXVCLElBQW5CbGEsRUFBUXhQLE9BQVosQ0FHQSxJQUFJZ2pDLEVBQVEsRUFBSXh6QixFQUFReFAsT0FNeEIsT0FMQXdQLEVBQVFzUSxTQUFRLFNBQVVtakIsRUFBR2hqQyxHQUFLLE9BQVFnakMsRUFBRUMsWUFBY2pqQyxFQUFJK2lDLEtBQzlEeHpCLEVBQVFpVixNQUFLLFNBQVUva0IsRUFBR0MsR0FBSyxPQUFPRCxFQUFFd2pDLFdBQWF2akMsRUFBRXVqQyxjQUN2RDF6QixFQUFRaEMsTUFBSyxTQUFVeTFCLEdBQ25CLE9BQVF2WixFQUFTdVosRUFBRTl6QixTQUFTOHpCLEVBQUVkLFFBQVNjLEVBQUVuNUIsTUFBT201QixFQUFFakYsYUFFL0N0VSxJQWdCWGlZLEVBQVl6aUMsVUFBVWlrQyxvQkFBc0IsU0FBVXAyQixFQUFPRyxFQUFZcUMsRUFBY0osRUFBVTh5QixHQUM3RixPQUFPLEtBZVhOLEVBQVl6aUMsVUFBVWtrQyx1QkFBeUIsU0FBVTl6QixFQUFZcEMsRUFBWXFDLEVBQWN3eUIsRUFBY0UsRUFBYUQsR0FFdEgsWUFBc0J0K0IsSUFETDVFLEtBQUt1USwyQkFBMkJDLEVBQVlwQyxFQUFZcUMsRUFBY3d5QixFQUFjemhDLEVBQU14QixLQUFNbWpDLEVBQWFELElBTWxJTCxFQUFZemlDLFVBQVVta0MsT0FBUyxXQUMzQixPQUFPdmtDLEtBQUs4aUMsTUFPaEJELEVBQVl6aUMsVUFBVW9PLFlBQWMsU0FBVUosR0FDMUMsS0FNSnkwQixFQUFZemlDLFVBQVVva0Msd0JBQTBCLFNBQVVwMkIsR0FDbEQscUJBQ0FBLEVBQVdxYSxvQkFBb0JobUIsS0FBS21nQyxLQUdyQ0MsRUFyS3FCLENBc0s5QixHQ3pMSyxJQUFJNEIsR0FBZSxZQTRCZkMsR0FBZ0IsYUMwRmhCQyxJRDdFSyxJQUFJQyxPQUFPLENBQ3ZCLHFEQUNBLDRDQUNBLDhEQUNBLGdEQUNBLDhFQUNBLGdFQUNBLG1DQUNGeGYsS0FBSyxJQUFLLEtDcUVjLElBQUksSUFTTixJQUFJLEdBQ2pCc2QsUUFBVSxXQUNqQm1DLFFBQVFDLEtBQUssOEJDcEpqQixJQUFJLEdBQXdDLFdBQ3hDLElBQUl4aUMsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQW1MNUMsU0FsSjBDLFNBQVVHLEdBS2hELFNBQVMwaEMsRUFBcUJ4M0IsR0FDMUIsSUFBSS9KLEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNdU4sSUFBUXZOLEtBSXRDd0QsRUFBTXdoQyx1QkFBeUI5L0IsRUFBT3kvQixHQUFjajlCLEVBQWdDNkYsRUFBSTAzQixXQUFXNS9CLEtBQUtrSSxJQUt4Ry9KLEVBQU0waEMsU0FBV3p0QixTQUFTQyxjQUFjLE9BQ3hDLElBQUlxQixFQUFRdlYsRUFBTTBoQyxTQUFTbnNCLE1BQzNCQSxFQUFNRyxTQUFXLFdBQ2pCSCxFQUFNcEIsTUFBUSxPQUNkb0IsRUFBTW5CLE9BQVMsT0FDZm1CLEVBQU01TyxPQUFTLElBQ2YzRyxFQUFNMGhDLFNBQVN4NkIsVUFBWXk2Qiw0QkFDM0IsSUFBSTNzQixFQUFZakwsRUFBSTYzQixjQVlwQixPQVhBNXNCLEVBQVU2c0IsYUFBYTdoQyxFQUFNMGhDLFNBQVUxc0IsRUFBVThzQixZQUFjLE1BSy9EOWhDLEVBQU0raEMsVUFBWSxHQUtsQi9oQyxFQUFNZ2lDLGtCQUFtQixFQUNsQmhpQyxFQThHWCxPQS9JQSxHQUFVdWhDLEVBQXNCMWhDLEdBdUNoQzBoQyxFQUFxQjNrQyxVQUFVMmlDLG9CQUFzQixTQUFVaGpDLEVBQU1xTyxHQUNqRSxJQUFJYixFQUFNdk4sS0FBS3VrQyxTQUNmLEdBQUloM0IsRUFBSTFJLFlBQVk5RSxHQUFPLENBQ3ZCLElBQUlvYSxFQUFVLElBQUksR0FBWXBhLE9BQU02RSxFQUFXd0osR0FDL0NiLEVBQUlySixjQUFjaVcsS0FHMUI0cUIsRUFBcUIza0MsVUFBVU0sZ0JBQWtCLFdBQzdDZ0YsRUFBYzFGLEtBQUtnbEMsd0JBQ25CaGxDLEtBQUtrbEMsU0FBU2h0QixXQUFXSSxZQUFZdFksS0FBS2tsQyxVQUMxQzdoQyxFQUFPakQsVUFBVU0sZ0JBQWdCc0MsS0FBS2hELE9BTTFDK2tDLEVBQXFCM2tDLFVBQVVvTyxZQUFjLFNBQVVKLEdBQ25ELEdBQUtBLEVBQUwsQ0FPQXBPLEtBQUtnakMsb0JBQW9CNTBCLEdBQ3pCcE8sS0FBSytpQyxvQkFBb0IsR0FBNEIzMEIsR0FDckQsSUFBSUssRUFBbUJMLEVBQVdLLGlCQUFpQmtYLE1BQUssU0FBVS9rQixFQUFHQyxHQUNqRSxPQUFPRCxFQUFFdUosT0FBU3RKLEVBQUVzSixVQUVwQjBDLEVBQVl1QixFQUFXdkIsVUFDM0I3TSxLQUFLdWxDLFVBQVVya0MsT0FBUyxFQU14QixJQUZBLElBQUl1a0MsRUFBa0IsR0FDbEJDLEVBQWtCLEtBQ2J2a0MsRUFBSSxFQUFHVyxFQUFLMk0sRUFBaUJ2TixPQUFRQyxFQUFJVyxJQUFNWCxFQUFHLENBQ3ZELElBQUl5TCxFQUFhNkIsRUFBaUJ0TixHQUVsQyxHQURBaU4sRUFBV29WLFdBQWFyaUIsRUFDbkJ3TCxHQUFPQyxFQUFZQyxLQUNuQkQsRUFBV3ZCLGFBQWUsSUFDdkJ1QixFQUFXdkIsYUFBZSxJQUZsQyxDQUtBLElBQUlMLEVBQVE0QixFQUFXNUIsTUFDbkIyNkIsRUFBVTM2QixFQUFNc0MsT0FBT2MsRUFBWXMzQixHQUNsQ0MsSUFHREEsSUFBWUQsSUFDWjFsQyxLQUFLdWxDLFVBQVU5aUMsS0FBS2tqQyxHQUNwQkQsRUFBa0JDLEdBRWxCLGlCQUFrQjM2QixHQUNsQnk2QixFQUFnQmhqQyxLQUN3QyxLQUdoRSxJQUFTdEIsRUFBSXNrQyxFQUFnQnZrQyxPQUFTLEVBQUdDLEdBQUssSUFBS0EsRUFDL0Nza0MsRUFBZ0J0a0MsR0FBR3lrQyxnQkFBZ0J4M0IsSS9DN0N4QyxTQUF5QmlLLEVBQU13dEIsR0FFbEMsSUFEQSxJQUFJQyxFQUFjenRCLEVBQUswdEIsV0FDZDVrQyxFQUFJLEtBQVdBLEVBQUcsQ0FDdkIsSUFBSTZrQyxFQUFXRixFQUFZM2tDLEdBQ3ZCOGtDLEVBQVdKLEVBQVMxa0MsR0FFeEIsSUFBSzZrQyxJQUFhQyxFQUNkLE1BR0FELElBQWFDLElBSVpELEVBS0FDLEVBTUw1dEIsRUFBS2d0QixhQUFhWSxFQUFVRCxJQUx4QjN0QixFQUFLQyxZQUFZMHRCLEtBQ2Y3a0MsR0FORmtYLEVBQUtjLFlBQVk4c0IsSytDZ0NyQkMsQ0FBZ0JsbUMsS0FBS2tsQyxTQUFVbGxDLEtBQUt1bEMsV0FDcEN2bEMsS0FBSytpQyxvQjVEdkdJLGM0RHVHNkMzMEIsR0FDakRwTyxLQUFLd2xDLG1CQUNOeGxDLEtBQUtrbEMsU0FBU25zQixNQUFNb3RCLFFBQVUsR0FDOUJubUMsS0FBS3dsQyxrQkFBbUIsR0FFNUJ4bEMsS0FBS3drQyx3QkFBd0JwMkIsUUFqRHJCcE8sS0FBS3dsQyxtQkFDTHhsQyxLQUFLa2xDLFNBQVNuc0IsTUFBTW90QixRQUFVLE9BQzlCbm1DLEtBQUt3bEMsa0JBQW1CLElBOERwQ1QsRUFBcUIza0MsVUFBVWlrQyxvQkFBc0IsU0FBVXAyQixFQUFPRyxFQUFZcUMsRUFBY0osRUFBVTh5QixHQUl0RyxJQUhBLElBQUl0MkIsRUFBWXVCLEVBQVd2QixVQUN2QmczQixFQUFjejFCLEVBQVdLLGlCQUVwQnROLEVBRE8waUMsRUFBWTNpQyxPQUNILEVBQUdDLEdBQUssSUFBS0EsRUFBRyxDQUNyQyxJQUFJeUwsRUFBYWkzQixFQUFZMWlDLEdBQ3pCNkosRUFBUTRCLEVBQVc1QixNQUN2QixHQUFJQSxFQUFNNkQsZUFDTmxDLEdBQU9DLEVBQVlDLElBQ25CczJCLEVBQVluNEIsR0FBUSxDQUNwQixJQUNJeVAsRUFEZ0J6UCxFQUFNc0QsY0FDRHFDLGVBQWUxQyxFQUFPRyxFQUFZcUMsR0FDM0QsR0FBSWdLLEVBQU0sQ0FDTixJQUFJbVEsRUFBU3ZhLEVBQVNyRixFQUFPeVAsR0FDN0IsR0FBSW1RLEVBQ0EsT0FBT0EsTUFPcEJtYSxFQWhKOEIsQ0FpSnZDcUIsSUM1S0YsR0FNUyxNQU5ULEdBWVksU0NsQlosSUFBSSxHQUF3QyxXQUN4QyxJQUFJOWpDLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EwQnhDLEdBQ1EsU0FPUm1qQyxHQUFpQyxTQUFVaGpDLEdBTzNDLFNBQVNnakMsRUFBZ0J0bUMsRUFBTXVtQyxFQUFhQyxHQUN4QyxJQUFJL2lDLEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNRCxJQUFTQyxLQWF2QyxPQVBBd0QsRUFBTW1pQyxRQUFVVyxFQU1oQjlpQyxFQUFNd0IsTUFBUXVoQyxFQUNQL2lDLEVBRVgsT0F0QkEsR0FBVTZpQyxFQUFpQmhqQyxHQXNCcEJnakMsRUF2QnlCLENBd0JsQyxHQWlQRixTQXJOZ0MsU0FBVWhqQyxHQU10QyxTQUFTbWpDLEVBQVd6NkIsRUFBV2lELEdBQzNCLElBQUl4TCxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FJakN3RCxFQUFNb0MsR0FJTnBDLEVBQU1zQyxLQUlOdEMsRUFBTXdDLEdBQ04sSUFBSStELEVBQVVpRixHQUFlLEdBVzdCLEdBTkF4TCxFQUFNaWpDLFVBQVkxOEIsRUFBUTI4QixPQUsxQmxqQyxFQUFNbWpDLE9BQVM1NkIsR0FBd0IsR0FDbkN2SSxFQUFNaWpDLFFBQ04sSUFBSyxJQUFJdGxDLEVBQUksRUFBR1csRUFBSzBCLEVBQU1takMsT0FBT3psQyxPQUFRQyxFQUFJVyxJQUFNWCxFQUNoRHFDLEVBQU1vakMsY0FBY3BqQyxFQUFNbWpDLE9BQU94bEMsR0FBSUEsR0FJN0MsT0FEQXFDLEVBQU1xakMsZ0JBQ0NyakMsRUE4S1gsT0FsTkEsR0FBVWdqQyxFQUFZbmpDLEdBMEN0Qm1qQyxFQUFXcG1DLFVBQVUrQixNQUFRLFdBQ3pCLEtBQU9uQyxLQUFLOG1DLFlBQWMsR0FDdEI5bUMsS0FBS3d4QixPQVViZ1YsRUFBV3BtQyxVQUFVb2IsT0FBUyxTQUFVemEsR0FDcEMsSUFBSyxJQUFJSSxFQUFJLEVBQUdXLEVBQUtmLEVBQUlHLE9BQVFDLEVBQUlXLElBQU1YLEVBQ3ZDbkIsS0FBS3lDLEtBQUsxQixFQUFJSSxJQUVsQixPQUFPbkIsTUFTWHdtQyxFQUFXcG1DLFVBQVU0Z0IsUUFBVSxTQUFVcE4sR0FFckMsSUFEQSxJQUFJakcsRUFBUTNOLEtBQUsybUMsT0FDUnhsQyxFQUFJLEVBQUdXLEVBQUs2TCxFQUFNek0sT0FBUUMsRUFBSVcsSUFBTVgsRUFDekN5UyxFQUFFakcsRUFBTXhNLEdBQUlBLEVBQUd3TSxJQVd2QjY0QixFQUFXcG1DLFVBQVUybUMsU0FBVyxXQUM1QixPQUFPL21DLEtBQUsybUMsUUFRaEJILEVBQVdwbUMsVUFBVTRtQyxLQUFPLFNBQVVoaUMsR0FDbEMsT0FBT2hGLEtBQUsybUMsT0FBTzNoQyxJQVF2QndoQyxFQUFXcG1DLFVBQVUwbUMsVUFBWSxXQUM3QixPQUFPOW1DLEtBQUtvSCxJQUFJLEtBUXBCby9CLEVBQVdwbUMsVUFBVTZtQyxTQUFXLFNBQVVqaUMsRUFBT2tpQyxHQUN6Q2xuQyxLQUFLeW1DLFNBQ0x6bUMsS0FBSzRtQyxjQUFjTSxHQUV2QmxuQyxLQUFLMm1DLE9BQU8xaEMsT0FBT0QsRUFBTyxFQUFHa2lDLEdBQzdCbG5DLEtBQUs2bUMsZ0JBQ0w3bUMsS0FBS2tFLGNBQWMsSUFBSW1pQyxHQUFnQmMsR0FBeUJELEVBQU1saUMsS0FRMUV3aEMsRUFBV3BtQyxVQUFVb3hCLElBQU0sV0FDdkIsT0FBT3h4QixLQUFLb25DLFNBQVNwbkMsS0FBSzhtQyxZQUFjLElBUTVDTixFQUFXcG1DLFVBQVVxQyxLQUFPLFNBQVV5a0MsR0FDOUJsbkMsS0FBS3ltQyxTQUNMem1DLEtBQUs0bUMsY0FBY00sR0FFdkIsSUFBSWptQyxFQUFJakIsS0FBSzhtQyxZQUViLE9BREE5bUMsS0FBS2luQyxTQUFTaG1DLEVBQUdpbUMsR0FDVmxuQyxLQUFLOG1DLGFBUWhCTixFQUFXcG1DLFVBQVVpbkMsT0FBUyxTQUFVSCxHQUVwQyxJQURBLElBQUlubUMsRUFBTWYsS0FBSzJtQyxPQUNOeGxDLEVBQUksRUFBR1csRUFBS2YsRUFBSUcsT0FBUUMsRUFBSVcsSUFBTVgsRUFDdkMsR0FBSUosRUFBSUksS0FBTytsQyxFQUNYLE9BQU9sbkMsS0FBS29uQyxTQUFTam1DLElBWWpDcWxDLEVBQVdwbUMsVUFBVWduQyxTQUFXLFNBQVVwaUMsR0FDdEMsSUFBSXNpQyxFQUFPdG5DLEtBQUsybUMsT0FBTzNoQyxHQUl2QixPQUhBaEYsS0FBSzJtQyxPQUFPMWhDLE9BQU9ELEVBQU8sR0FDMUJoRixLQUFLNm1DLGdCQUNMN21DLEtBQUtrRSxjQUFjLElBQUltaUMsR0FBZ0JjLEdBQTRCRyxFQUFNdGlDLElBQ2xFc2lDLEdBUVhkLEVBQVdwbUMsVUFBVW1uQyxNQUFRLFNBQVV2aUMsRUFBT2tpQyxHQUMxQyxJQUFJam1DLEVBQUlqQixLQUFLOG1DLFlBQ2IsR0FBSTloQyxFQUFRL0QsRUFBRyxDQUNQakIsS0FBS3ltQyxTQUNMem1DLEtBQUs0bUMsY0FBY00sRUFBTWxpQyxHQUU3QixJQUFJc2lDLEVBQU90bkMsS0FBSzJtQyxPQUFPM2hDLEdBQ3ZCaEYsS0FBSzJtQyxPQUFPM2hDLEdBQVNraUMsRUFDckJsbkMsS0FBS2tFLGNBQWMsSUFBSW1pQyxHQUFnQmMsR0FBNEJHLEVBQU10aUMsSUFDekVoRixLQUFLa0UsY0FBYyxJQUFJbWlDLEdBQWdCYyxHQUF5QkQsRUFBTWxpQyxRQUVyRSxDQUNELElBQUssSUFBSXlwQixFQUFJeHRCLEVBQUd3dEIsRUFBSXpwQixJQUFTeXBCLEVBQ3pCenVCLEtBQUtpbkMsU0FBU3hZLE9BQUc3cEIsR0FFckI1RSxLQUFLaW5DLFNBQVNqaUMsRUFBT2tpQyxLQU03QlYsRUFBV3BtQyxVQUFVeW1DLGNBQWdCLFdBQ2pDN21DLEtBQUs2SCxJQUFJLEdBQWlCN0gsS0FBSzJtQyxPQUFPemxDLFNBTzFDc2xDLEVBQVdwbUMsVUFBVXdtQyxjQUFnQixTQUFVTSxFQUFNTSxHQUNqRCxJQUFLLElBQUlybUMsRUFBSSxFQUFHVyxFQUFLOUIsS0FBSzJtQyxPQUFPemxDLE9BQVFDLEVBQUlXLElBQU1YLEVBQy9DLEdBQUluQixLQUFLMm1DLE9BQU94bEMsS0FBTytsQyxHQUFRL2xDLElBQU1xbUMsRUFDakMsTUFBTSxJQUFJLEVBQWUsS0FJOUJoQixFQW5Ob0IsQ0FvTjdCLEdDMVNGLElBQUksR0FBd0MsV0FDeEMsSUFBSWxrQyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBc0R4QyxHQUNRLFNBcUxaLFNBM0tnQyxTQUFVRyxHQUt0QyxTQUFTb2tDLEVBQVd6NEIsR0FDaEIsSUFBSXhMLEVBQVF4RCxLQUNSK0osRUFBVWlGLEdBQWUsR0FDekIvQixFQUFzQyxFQUFPLEdBQUlsRCxVQUM5Q2tELEVBQVl5NkIsT0FDbkIsSUFBSUEsRUFBUzM5QixFQUFRMjlCLE9BeUJyQixPQXhCQWxrQyxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTWlOLElBQWdCak4sTUFLcEMybkMsb0JBQXNCLEdBSzVCbmtDLEVBQU1va0MsY0FBZ0IsR0FDdEJwa0MsRUFBTW1FLGtCQUFrQixHQUFpQm5FLEVBQU1xa0Msc0JBQzNDSCxFQUNJNWtDLE1BQU11RCxRQUFRcWhDLEdBQ2RBLEVBQVMsSUFBSSxHQUFXQSxFQUFPL3NCLFFBQVMsQ0FBRStyQixRQUFRLElBR2xELEVBQXVELG1CQUF2QixFQUFpQixTQUFrQixJQUl2RWdCLEVBQVMsSUFBSSxRQUFXOWlDLEVBQVcsQ0FBRThoQyxRQUFRLElBRWpEbGpDLEVBQU1za0MsVUFBVUosR0FDVGxrQyxFQXNJWCxPQXhLQSxHQUFVaWtDLEVBQVlwa0MsR0F1Q3RCb2tDLEVBQVdybkMsVUFBVTJuQyxtQkFBcUIsV0FDdEMvbkMsS0FBS21HLFdBS1RzaEMsRUFBV3JuQyxVQUFVeW5DLHFCQUF1QixXQUN4QzduQyxLQUFLMm5DLG9CQUFvQjNtQixRQUFRdGIsR0FDakMxRixLQUFLMm5DLG9CQUFvQnptQyxPQUFTLEVBQ2xDLElBQUl3bUMsRUFBUzFuQyxLQUFLZ29DLFlBRWxCLElBQUssSUFBSUMsS0FEVGpvQyxLQUFLMm5DLG9CQUFvQmxsQyxLQUFLeUMsRUFBT3dpQyxFQUFRUCxHQUF5Qm5uQyxLQUFLa29DLGlCQUFrQmxvQyxNQUFPa0YsRUFBT3dpQyxFQUFRUCxHQUE0Qm5uQyxLQUFLbW9DLG9CQUFxQm5vQyxPQUMxSkEsS0FBSzRuQyxjQUNoQjVuQyxLQUFLNG5DLGNBQWNLLEdBQUlqbkIsUUFBUXRiLEdBRW5DdkQsRUFBTW5DLEtBQUs0bkMsZUFFWCxJQURBLElBQUlRLEVBQWNWLEVBQU9YLFdBQ2hCNWxDLEVBQUksRUFBR1csRUFBS3NtQyxFQUFZbG5DLE9BQVFDLEVBQUlXLEVBQUlYLElBQUssQ0FDbEQsSUFBSTZKLEVBQVFvOUIsRUFBWWpuQyxHQUN4Qm5CLEtBQUs0bkMsY0FBY2poQyxFQUFPcUUsSUFBVSxDQUNoQzlGLEVBQU84RixFQUFPdEQsRUFBZ0MxSCxLQUFLK25DLG1CQUFvQi9uQyxNQUN2RWtGLEVBQU84RixFQUFPLEVBQWtCaEwsS0FBSytuQyxtQkFBb0IvbkMsT0FHakVBLEtBQUttRyxXQU1Uc2hDLEVBQVdybkMsVUFBVThuQyxpQkFBbUIsU0FBVUcsR0FDOUMsSUFBSXI5QixFQUFvRHE5QixFQUF1QixRQUMvRXJvQyxLQUFLNG5DLGNBQWNqaEMsRUFBT3FFLElBQVUsQ0FDaEM5RixFQUFPOEYsRUFBT3RELEVBQWdDMUgsS0FBSytuQyxtQkFBb0IvbkMsTUFDdkVrRixFQUFPOEYsRUFBTyxFQUFrQmhMLEtBQUsrbkMsbUJBQW9CL25DLE9BRTdEQSxLQUFLbUcsV0FNVHNoQyxFQUFXcm5DLFVBQVUrbkMsb0JBQXNCLFNBQVVFLEdBQ2pELElBQ0lwbUMsRUFBTTBFLEVBRDhDMGhDLEVBQXVCLFNBRS9Fcm9DLEtBQUs0bkMsY0FBYzNsQyxHQUFLK2UsUUFBUXRiLFVBQ3pCMUYsS0FBSzRuQyxjQUFjM2xDLEdBQzFCakMsS0FBS21HLFdBVVRzaEMsRUFBV3JuQyxVQUFVNG5DLFVBQVksV0FDN0IsT0FBd0Zob0MsS0FBS29ILElBQUksS0FVckdxZ0MsRUFBV3JuQyxVQUFVMG5DLFVBQVksU0FBVUosR0FDdkMxbkMsS0FBSzZILElBQUksR0FBaUI2L0IsSUFNOUJELEVBQVdybkMsVUFBVTBMLGVBQWlCLFNBQVVDLEdBQzVDLElBQUk0QixPQUFzQi9JLElBQWRtSCxFQUEwQkEsRUFBWSxHQUlsRCxPQUhBL0wsS0FBS2dvQyxZQUFZaG5CLFNBQVEsU0FBVWhXLEdBQy9CQSxFQUFNYyxlQUFlNkIsTUFFbEJBLEdBV1g4NUIsRUFBV3JuQyxVQUFVNEwsb0JBQXNCLFNBQVVDLEdBQ2pELElBQUkyQixPQUF3QmhKLElBQWZxSCxFQUEyQkEsRUFBYSxHQUNqRHE4QixFQUFNMTZCLEVBQU8xTSxPQUNqQmxCLEtBQUtnb0MsWUFBWWhuQixTQUFRLFNBQVVoVyxHQUMvQkEsRUFBTWdCLG9CQUFvQjRCLE1BRTlCLElBQUkyNkIsRUFBZ0J2b0MsS0FBSzZLLGdCQUNyQjI5QixFQUFnQkQsRUFBY3ArQixPQUM3QjhCLFFBQXVDckgsSUFBekIyakMsRUFBY3ArQixTQUM3QnErQixFQUFnQixHQUVwQixJQUFLLElBQUlybkMsRUFBSW1uQyxFQUFLeG1DLEVBQUs4TCxFQUFPMU0sT0FBUUMsRUFBSVcsRUFBSVgsSUFBSyxDQUMvQyxJQUFJeUwsRUFBYWdCLEVBQU96TSxHQUN4QnlMLEVBQVczQyxTQUFXcytCLEVBQWN0K0IsUUFDcEMyQyxFQUFXMUMsUUFBVTBDLEVBQVcxQyxTQUFXcStCLEVBQWNyK0IsUUFDekQwQyxFQUFXeEMsY0FBZ0IxQixLQUFLRixJQUFJb0UsRUFBV3hDLGNBQWVtK0IsRUFBY24rQixlQUM1RXdDLEVBQVd0QyxjQUFnQjVCLEtBQUtELElBQUltRSxFQUFXdEMsY0FBZWkrQixFQUFjaitCLGVBQzVFc0MsRUFBV3JDLFFBQVU3QixLQUFLRCxJQUFJbUUsRUFBV3JDLFFBQVNnK0IsRUFBY2grQixTQUNoRXFDLEVBQVdwQyxRQUFVOUIsS0FBS0YsSUFBSW9FLEVBQVdwQyxRQUFTKzlCLEVBQWMvOUIsY0FDbkM1RixJQUF6QjJqQyxFQUFjLzhCLGNBQ1k1RyxJQUF0QmdJLEVBQVdwQixPQUNYb0IsRUFBV3BCLE9BQVN1TCxHQUFnQm5LLEVBQVdwQixPQUFRKzhCLEVBQWMvOEIsUUFHckVvQixFQUFXcEIsT0FBUys4QixFQUFjLzhCLGFBR2hCNUcsSUFBdEJnSSxFQUFXekMsU0FDWHlDLEVBQVd6QyxPQUFTcStCLEdBRzVCLE9BQU81NkIsR0FLWDY1QixFQUFXcm5DLFVBQVVrTCxlQUFpQixXQUNsQyxPQUFPLElBRUptOEIsRUF6S29CLENBMEs3QjM0QixJQzNPRixJQUFJLEdBQXdDLFdBQ3hDLElBQUl4TSxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBaUQ1QyxTQXpCOEIsU0FBVUcsR0FPcEMsU0FBU29sQyxFQUFTMW9DLEVBQU13TixFQUFLOEQsR0FDekIsSUFBSTdOLEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNRCxJQUFTQyxLQWF2QyxPQVBBd0QsRUFBTStKLElBQU1BLEVBTVovSixFQUFNNEssZ0JBQWdDeEosSUFBbkJ5TSxFQUErQkEsRUFBaUIsS0FDNUQ3TixFQUVYLE9BdEJBLEdBQVVpbEMsRUFBVXBsQyxHQXNCYm9sQyxFQXZCa0IsQ0F3QjNCLEdDaERGLElBQUksR0FBd0MsV0FDeEMsSUFBSW5tQyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBNEg1QyxTQW5HcUMsU0FBVUcsR0FTM0MsU0FBU3FsQyxFQUFnQjNvQyxFQUFNd04sRUFBS283QixFQUFlQyxFQUFjdjNCLEdBQzdELElBQUk3TixFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTUQsRUFBTXdOLEVBQUs4RCxJQUFtQnJSLEtBMEI1RCxPQW5CQXdELEVBQU1tbEMsY0FBZ0JBLEVBS3RCbmxDLEVBQU1xbEMsT0FBUyxLQUtmcmxDLEVBQU1zbEMsWUFBYyxLQVFwQnRsQyxFQUFNdWxDLGNBQTRCbmtDLElBQWpCZ2tDLEdBQTZCQSxFQUN2Q3BsQyxFQTZEWCxPQWhHQSxHQUFVa2xDLEVBQWlCcmxDLEdBcUMzQjFELE9BQU9DLGVBQWU4b0MsRUFBZ0J0b0MsVUFBVyxRQUFTLENBTXREZ0gsSUFBSyxXQUlELE9BSEtwSCxLQUFLNm9DLFNBQ043b0MsS0FBSzZvQyxPQUFTN29DLEtBQUt1TixJQUFJeTdCLGNBQWNocEMsS0FBSzJvQyxnQkFFdkMzb0MsS0FBSzZvQyxRQUVoQmhoQyxJQUFLLFNBQVVvRyxHQUNYak8sS0FBSzZvQyxPQUFTNTZCLEdBRWxCMHNCLFlBQVksRUFDWkMsY0FBYyxJQUVsQmo3QixPQUFPQyxlQUFlOG9DLEVBQWdCdG9DLFVBQVcsYUFBYyxDQU8zRGdILElBQUssV0FJRCxPQUhLcEgsS0FBSzhvQyxjQUNOOW9DLEtBQUs4b0MsWUFBYzlvQyxLQUFLdU4sSUFBSTA3Qix1QkFBdUJqcEMsS0FBS2lPLFFBRXJEak8sS0FBSzhvQyxhQUVoQmpoQyxJQUFLLFNBQVUySSxHQUNYeFEsS0FBSzhvQyxZQUFjdDRCLEdBRXZCbXFCLFlBQVksRUFDWkMsY0FBYyxJQU9sQjhOLEVBQWdCdG9DLFVBQVVDLGVBQWlCLFdBQ3ZDZ0QsRUFBT2pELFVBQVVDLGVBQWUyQyxLQUFLaEQsTUFDakMsbUJBQW9CQSxLQUFLMm9DLGVBQ0Qzb0MsS0FBa0IsY0FBRUssa0JBUXBEcW9DLEVBQWdCdG9DLFVBQVVFLGdCQUFrQixXQUN4QytDLEVBQU9qRCxVQUFVRSxnQkFBZ0IwQyxLQUFLaEQsTUFDbEMsb0JBQXFCQSxLQUFLMm9DLGVBQ0Yzb0MsS0FBa0IsY0FBRU0sbUJBRzdDb29DLEVBakd5QixDQWtHbEMsSUNuSEYsSUFPSVEsWUFBYSxjQU1iQyxNQUFPLEVBTVBDLFM1RUhVLFc0RVNWQyxZQUFhLGNBT2JDLFlBQWEsY0FDYkMsWUFBYSxjQUNiQyxVQUFXLFlBQ1hDLFlBQWEsY0FDYkMsV0FBWSxhQUNaQyxhQUFjLGVBQ2RDLGFBQWMsZUFDZEMsY0FBZSxpQkN4Q25CLEdBQ2lCLGNBRGpCLEdBRWlCLGNDTmpCLElBQUksR0FBd0MsV0FDeEMsSUFBSXZuQyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBMFM1QyxTQW5SNEMsU0FBVUcsR0FNbEQsU0FBU3ltQyxFQUF1QnY4QixFQUFLdzhCLEdBQ2pDLElBQUl2bUMsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU11TixJQUFRdk4sS0FNdEN3RCxFQUFNcy9CLEtBQU92MUIsRUFLYi9KLEVBQU13bUMsZ0JBS054bUMsRUFBTXltQyxnQkFBaUIsRUFLdkJ6bUMsRUFBTTBtQyxXQUFZLEVBS2xCMW1DLEVBQU0ybUMsa0JBQW9CLEdBSzFCM21DLEVBQU00bUMsb0JBQW1DeGxDLElBQWxCbWxDLEVBQThCLEVBQUlBLEVBT3pEdm1DLEVBQU02bUMsTUFBUSxLQUNkLElBQUkxRSxFQUFVbmlDLEVBQU1zL0IsS0FBS3NDLGNBZ0N6QixPQTNCQTVoQyxFQUFNOG1DLGdCQUFrQixFQUt4QjltQyxFQUFNK21DLGdCQUFrQixHQUN4Qi9tQyxFQUFNMGhDLFNBQVdTLEVBS2pCbmlDLEVBQU1nbkMsd0JBQTBCdGxDLEVBQU95Z0MsRUFBUyxHQUE4Qm5pQyxFQUFNaW5DLG1CQUFvQmpuQyxHQUt4R0EsRUFBTWtuQywwQkFLTmxuQyxFQUFNbW5DLG9CQUFzQnpsQyxFQUFPeWdDLEVBQVMsR0FBOEJuaUMsRUFBTW9uQyxZQUFhcG5DLEdBSTdGQSxFQUFNcW5DLHNCQUF3QnJuQyxFQUFNc25DLGlCQUFpQnpsQyxLQUFLN0IsR0FDMURBLEVBQU0waEMsU0FBU3JoQyxpQkFBaUIsRUFBcUJMLEVBQU1xbkMsd0JBQXVCcjRCLElBQTBCLENBQUVDLFNBQVMsSUFDaEhqUCxFQW1NWCxPQWhSQSxHQUFVc21DLEVBQXdCem1DLEdBb0ZsQ3ltQyxFQUF1QjFwQyxVQUFVMnFDLGNBQWdCLFNBQVVDLEdBQ3ZELElBQUlDLEVBQVcsSUFBSSxHQUFnQixTQUEyQmpyQyxLQUFLOGlDLEtBQU1rSSxHQUN6RWhyQyxLQUFLa0UsY0FBYyttQyxRQUNVcm1DLElBQXpCNUUsS0FBS2dxQyxpQkFFTGtCLGFBQWFsckMsS0FBS2dxQyxpQkFDbEJocUMsS0FBS2dxQyxxQkFBa0JwbEMsRUFDdkJxbUMsRUFBVyxJQUFJLEdBQWdCLFlBQThCanJDLEtBQUs4aUMsS0FBTWtJLEdBQ3hFaHJDLEtBQUtrRSxjQUFjK21DLElBSW5CanJDLEtBQUtncUMsZ0JBQWtCNVQsV0FFdkIsV0FDSXAyQixLQUFLZ3FDLHFCQUFrQnBsQyxFQUN2QixJQUFJcW1DLEVBQVcsSUFBSSxHQUFnQixlQUFpQ2pyQyxLQUFLOGlDLEtBQU1rSSxHQUMvRWhyQyxLQUFLa0UsY0FBYyttQyxJQUNyQjVsQyxLQUFLckYsTUFBTyxNQVV0QjhwQyxFQUF1QjFwQyxVQUFVK3FDLHNCQUF3QixTQUFVSCxHQUMvRCxJQUFJN21DLEVBQVE2bUMsRUFDUjdtQyxFQUFNcEUsTUFBUSxjQUNkb0UsRUFBTXBFLE1BQVEsd0JBQ1BDLEtBQUt1cUMsZ0JBQWdCcG1DLEVBQU1pbkMsV0FFN0JqbkMsRUFBTXBFLE1BQVEsaUJBQ25CQyxLQUFLdXFDLGdCQUFnQnBtQyxFQUFNaW5DLFlBQWEsR0FFNUNwckMsS0FBS3NxQyxnQkFBa0IzcUMsT0FBT29GLEtBQUsvRSxLQUFLdXFDLGlCQUFpQnJwQyxRQU83RDRvQyxFQUF1QjFwQyxVQUFVaXJDLGlCQUFtQixTQUFVTCxHQUMxRGhyQyxLQUFLbXJDLHNCQUFzQkgsR0FDM0IsSUFBSUMsRUFBVyxJQUFJLEdBQWdCLGFBQStCanJDLEtBQUs4aUMsS0FBTWtJLEdBQzdFaHJDLEtBQUtrRSxjQUFjK21DLEdBT2ZqckMsS0FBS2lxQyxpQkFDSmdCLEVBQVMvcUMsbUJBQ1RGLEtBQUtrcUMsV0FDTmxxQyxLQUFLc3JDLHFCQUFxQk4sSUFDMUJockMsS0FBSytxQyxjQUFjL3FDLEtBQUtxcUMsT0FFQyxJQUF6QnJxQyxLQUFLc3FDLGtCQUNMdHFDLEtBQUttcUMsa0JBQWtCbnBCLFFBQVF0YixHQUMvQjFGLEtBQUttcUMsa0JBQWtCanBDLE9BQVMsRUFDaENsQixLQUFLa3FDLFdBQVksRUFDakJscUMsS0FBS3FxQyxNQUFRLE9BU3JCUCxFQUF1QjFwQyxVQUFVa3JDLHFCQUF1QixTQUFVTixHQUM5RCxPQUErQixJQUF4QkEsRUFBYU8sUUFPeEJ6QixFQUF1QjFwQyxVQUFVcXFDLG1CQUFxQixTQUFVTyxHQUM1RGhyQyxLQUFLaXFDLGVBQTBDLElBQXpCanFDLEtBQUtzcUMsZ0JBQzNCdHFDLEtBQUttckMsc0JBQXNCSCxHQUMzQixJQUFJQyxFQUFXLElBQUksR0FBZ0IsZUFBaUNqckMsS0FBSzhpQyxLQUFNa0ksR0FJL0UsSUFBSyxJQUFJM29DLEtBSFRyQyxLQUFLa0UsY0FBYyttQyxHQUVuQmpyQyxLQUFLcXFDLE1BQW9DLEdBQ3BCVyxFQUFjLENBQy9CLElBQUluckMsRUFBUW1yQyxFQUFhM29DLEdBQ3pCckMsS0FBS3FxQyxNQUFNaG9DLEdBQTZCLG1CQUFWeEMsRUFBdUI0QixFQUFPNUIsRUFFaEUsR0FBc0MsSUFBbENHLEtBQUttcUMsa0JBQWtCanBDLE9BQWMsQ0FDckMsSUFBSXNxQyxFQUFNeHJDLEtBQUs4aUMsS0FBSzJJLG1CQUNwQnpyQyxLQUFLbXFDLGtCQUFrQjFuQyxLQUFLeUMsRUFBT3NtQyxFQUFLLGVBQWlDeHJDLEtBQUswckMsbUJBQW9CMXJDLE1BQU9rRixFQUFPc21DLEVBQUssYUFBK0J4ckMsS0FBS3FyQyxpQkFBa0JyckMsTUFjM0trRixFQUFPbEYsS0FBS2tsQyxTQUFVLGlCQUFtQ2xsQyxLQUFLcXJDLGlCQUFrQnJyQyxPQUM1RUEsS0FBS2tsQyxTQUFTeUcsYUFBZTNyQyxLQUFLa2xDLFNBQVN5RyxnQkFBa0JILEdBQzdEeHJDLEtBQUttcUMsa0JBQWtCMW5DLEtBQUt5QyxFQUFPbEYsS0FBS2tsQyxTQUFTeUcsY0FBZSxhQUErQjNyQyxLQUFLcXJDLGlCQUFrQnJyQyxTQVNsSThwQyxFQUF1QjFwQyxVQUFVc3JDLG1CQUFxQixTQUFVVixHQUk1RCxHQUFJaHJDLEtBQUs0ckMsVUFBVVosR0FBZSxDQUM5QmhyQyxLQUFLa3FDLFdBQVksRUFDakIsSUFBSWUsRUFBVyxJQUFJLEdBQWdCLGVBQWlDanJDLEtBQUs4aUMsS0FBTWtJLEVBQWNockMsS0FBS2txQyxXQUNsR2xxQyxLQUFLa0UsY0FBYyttQyxLQVUzQm5CLEVBQXVCMXBDLFVBQVV3cUMsWUFBYyxTQUFVSSxHQUNyRGhyQyxLQUFLMHFDLDBCQUE0Qk0sRUFDakMsSUFBSWpDLEtBQWMvb0MsS0FBS3FxQyxRQUFTcnFDLEtBQUs0ckMsVUFBVVosSUFDL0NockMsS0FBS2tFLGNBQWMsSUFBSSxHQUFnQjhtQyxFQUFhanJDLEtBQU1DLEtBQUs4aUMsS0FBTWtJLEVBQWNqQyxLQVV2RmUsRUFBdUIxcEMsVUFBVTBxQyxpQkFBbUIsU0FBVTNtQyxHQUcxRCxJQUFJd2tDLEVBQWdCM29DLEtBQUswcUMsMEJBQ25CL0IsSUFBaUJBLEVBQWN6b0Msa0JBQ0osa0JBQXJCaUUsRUFBTTBuQyxhQUFpRCxJQUFyQjFuQyxFQUFNMG5DLFlBQ2hEMW5DLEVBQU05RCxrQkFTZHlwQyxFQUF1QjFwQyxVQUFVd3JDLFVBQVksU0FBVVosR0FDbkQsT0FBUWhyQyxLQUFLa3FDLFdBQ1R4aEMsS0FBSzJzQixJQUFJMlYsRUFBYWMsUUFBVTlyQyxLQUFLcXFDLE1BQU15QixTQUN2QzlyQyxLQUFLb3FDLGdCQUNUMWhDLEtBQUsyc0IsSUFBSTJWLEVBQWFlLFFBQVUvckMsS0FBS3FxQyxNQUFNMEIsU0FBVy9yQyxLQUFLb3FDLGdCQUtuRU4sRUFBdUIxcEMsVUFBVU0sZ0JBQWtCLFdBQzNDVixLQUFLMnFDLHNCQUNMamxDLEVBQWMxRixLQUFLMnFDLHFCQUNuQjNxQyxLQUFLMnFDLG9CQUFzQixNQUUvQjNxQyxLQUFLa2xDLFNBQVN4Z0Msb0JBQW9CLEVBQXFCMUUsS0FBSzZxQyx1QkFDeEQ3cUMsS0FBS3dxQywwQkFDTDlrQyxFQUFjMUYsS0FBS3dxQyx5QkFDbkJ4cUMsS0FBS3dxQyx3QkFBMEIsTUFFbkN4cUMsS0FBS21xQyxrQkFBa0JucEIsUUFBUXRiLEdBQy9CMUYsS0FBS21xQyxrQkFBa0JqcEMsT0FBUyxFQUNoQ2xCLEtBQUtrbEMsU0FBVyxLQUNoQjdoQyxFQUFPakQsVUFBVU0sZ0JBQWdCc0MsS0FBS2hELE9BRW5DOHBDLEVBalJnQyxDQWtSekMsR0N0U0YsR0FNZ0IsYUNOaEIsR0FDZ0IsYUFEaEIsR0FFVSxPQUZWLEdBR1ksU0FIWixHQUlVLE9DRkgsSUFBSWtDLEdBQU8zaEMsSUFzT2xCLFNBek5tQyxXQUsvQixTQUFTNGhDLEVBQWNDLEVBQWtCQyxHQUtyQ25zQyxLQUFLb3NDLGtCQUFvQkYsRUFLekJsc0MsS0FBS3FzQyxhQUFlRixFQUtwQm5zQyxLQUFLc3NDLFVBQVksR0FLakJ0c0MsS0FBS3VzQyxZQUFjLEdBS25CdnNDLEtBQUt3c0MsZ0JBQWtCLEdBeUwzQixPQXBMQVAsRUFBYzdyQyxVQUFVK0IsTUFBUSxXQUM1Qm5DLEtBQUtzc0MsVUFBVXByQyxPQUFTLEVBQ3hCbEIsS0FBS3VzQyxZQUFZcnJDLE9BQVMsRUFDMUJpQixFQUFNbkMsS0FBS3dzQyxrQkFNZlAsRUFBYzdyQyxVQUFVcXNDLFFBQVUsV0FDOUIsSUFBSUMsRUFBVzFzQyxLQUFLc3NDLFVBQ2hCSyxFQUFhM3NDLEtBQUt1c0MsWUFDbEI1RyxFQUFVK0csRUFBUyxHQUNBLEdBQW5CQSxFQUFTeHJDLFFBQ1R3ckMsRUFBU3hyQyxPQUFTLEVBQ2xCeXJDLEVBQVd6ckMsT0FBUyxJQUdwQndyQyxFQUFTLEdBQUtBLEVBQVNsYixNQUN2Qm1iLEVBQVcsR0FBS0EsRUFBV25iLE1BQzNCeHhCLEtBQUs0c0MsUUFBUSxJQUVqQixJQUFJQyxFQUFhN3NDLEtBQUtxc0MsYUFBYTFHLEdBRW5DLGNBRE8zbEMsS0FBS3dzQyxnQkFBZ0JLLEdBQ3JCbEgsR0FPWHNHLEVBQWM3ckMsVUFBVTRvQixRQUFVLFNBQVUyYyxHQUN4QyxJQUFTM2xDLEtBQUtxc0MsYUFBYTFHLEtBQVkzbEMsS0FBS3dzQyxpQkFBa0IsSUFDOUQsSUFBSU0sRUFBVzlzQyxLQUFLb3NDLGtCQUFrQnpHLEdBQ3RDLE9BQUltSCxHQUFZZCxLQUNaaHNDLEtBQUtzc0MsVUFBVTdwQyxLQUFLa2pDLEdBQ3BCM2xDLEtBQUt1c0MsWUFBWTlwQyxLQUFLcXFDLEdBQ3RCOXNDLEtBQUt3c0MsZ0JBQWdCeHNDLEtBQUtxc0MsYUFBYTFHLEtBQVksRUFDbkQzbEMsS0FBSytzQyxVQUFVLEVBQUcvc0MsS0FBS3NzQyxVQUFVcHJDLE9BQVMsSUFDbkMsSUFPZitxQyxFQUFjN3JDLFVBQVU0c0MsU0FBVyxXQUMvQixPQUFPaHRDLEtBQUtzc0MsVUFBVXByQyxRQVExQitxQyxFQUFjN3JDLFVBQVU2c0MsbUJBQXFCLFNBQVVqb0MsR0FDbkQsT0FBZSxFQUFSQSxFQUFZLEdBUXZCaW5DLEVBQWM3ckMsVUFBVThzQyxvQkFBc0IsU0FBVWxvQyxHQUNwRCxPQUFlLEVBQVJBLEVBQVksR0FRdkJpbkMsRUFBYzdyQyxVQUFVK3NDLGdCQUFrQixTQUFVbm9DLEdBQ2hELE9BQVFBLEVBQVEsR0FBTSxHQU0xQmluQyxFQUFjN3JDLFVBQVVndEMsU0FBVyxXQUMvQixJQUFJanNDLEVBQ0osSUFBS0EsR0FBS25CLEtBQUtzc0MsVUFBVXByQyxRQUFVLEdBQUssRUFBR0MsR0FBSyxFQUFHQSxJQUMvQ25CLEtBQUs0c0MsUUFBUXpyQyxJQU1yQjhxQyxFQUFjN3JDLFVBQVVpdEMsUUFBVSxXQUM5QixPQUFpQyxJQUExQnJ0QyxLQUFLc3NDLFVBQVVwckMsUUFNMUIrcUMsRUFBYzdyQyxVQUFVMm9CLFlBQWMsU0FBVTltQixHQUM1QyxPQUFPQSxLQUFPakMsS0FBS3dzQyxpQkFNdkJQLEVBQWM3ckMsVUFBVWt0QyxTQUFXLFNBQVUzSCxHQUN6QyxPQUFPM2xDLEtBQUsrb0IsWUFBWS9vQixLQUFLcXNDLGFBQWExRyxLQU05Q3NHLEVBQWM3ckMsVUFBVXdzQyxRQUFVLFNBQVU1bkMsR0FPeEMsSUFOQSxJQUFJMG5DLEVBQVcxc0MsS0FBS3NzQyxVQUNoQkssRUFBYTNzQyxLQUFLdXNDLFlBQ2xCZ0IsRUFBUWIsRUFBU3hyQyxPQUNqQnlrQyxFQUFVK0csRUFBUzFuQyxHQUNuQjhuQyxFQUFXSCxFQUFXM25DLEdBQ3RCd29DLEVBQWF4b0MsRUFDVkEsRUFBUXVvQyxHQUFTLEdBQUcsQ0FDdkIsSUFBSUUsRUFBU3p0QyxLQUFLaXRDLG1CQUFtQmpvQyxHQUNqQzBvQyxFQUFTMXRDLEtBQUtrdEMsb0JBQW9CbG9DLEdBQ2xDMm9DLEVBQW9CRCxFQUFTSCxHQUFTWixFQUFXZSxHQUFVZixFQUFXYyxHQUNwRUMsRUFDQUQsRUFDTmYsRUFBUzFuQyxHQUFTMG5DLEVBQVNpQixHQUMzQmhCLEVBQVczbkMsR0FBUzJuQyxFQUFXZ0IsR0FDL0Izb0MsRUFBUTJvQyxFQUVaakIsRUFBUzFuQyxHQUFTMmdDLEVBQ2xCZ0gsRUFBVzNuQyxHQUFTOG5DLEVBQ3BCOXNDLEtBQUsrc0MsVUFBVVMsRUFBWXhvQyxJQU8vQmluQyxFQUFjN3JDLFVBQVUyc0MsVUFBWSxTQUFVUyxFQUFZeG9DLEdBS3RELElBSkEsSUFBSTBuQyxFQUFXMXNDLEtBQUtzc0MsVUFDaEJLLEVBQWEzc0MsS0FBS3VzQyxZQUNsQjVHLEVBQVUrRyxFQUFTMW5DLEdBQ25COG5DLEVBQVdILEVBQVczbkMsR0FDbkJBLEVBQVF3b0MsR0FBWSxDQUN2QixJQUFJSSxFQUFjNXRDLEtBQUttdEMsZ0JBQWdCbm9DLEdBQ3ZDLEtBQUkybkMsRUFBV2lCLEdBQWVkLEdBTTFCLE1BTEFKLEVBQVMxbkMsR0FBUzBuQyxFQUFTa0IsR0FDM0JqQixFQUFXM25DLEdBQVMybkMsRUFBV2lCLEdBQy9CNW9DLEVBQVE0b0MsRUFNaEJsQixFQUFTMW5DLEdBQVMyZ0MsRUFDbEJnSCxFQUFXM25DLEdBQVM4bkMsR0FLeEJiLEVBQWM3ckMsVUFBVXl0QyxhQUFlLFdBQ25DLElBS0lsSSxFQUFTeGtDLEVBQUcyckMsRUFMWlosRUFBbUJsc0MsS0FBS29zQyxrQkFDeEJNLEVBQVcxc0MsS0FBS3NzQyxVQUNoQkssRUFBYTNzQyxLQUFLdXNDLFlBQ2xCdm5DLEVBQVEsRUFDUi9ELEVBQUl5ckMsRUFBU3hyQyxPQUVqQixJQUFLQyxFQUFJLEVBQUdBLEVBQUlGLElBQUtFLEdBRWpCMnJDLEVBQVdaLEVBRFh2RyxFQUFVK0csRUFBU3ZyQyxNQUVINnFDLFVBQ0xoc0MsS0FBS3dzQyxnQkFBZ0J4c0MsS0FBS3FzQyxhQUFhMUcsS0FHOUNnSCxFQUFXM25DLEdBQVM4bkMsRUFDcEJKLEVBQVMxbkMsS0FBVzJnQyxHQUc1QitHLEVBQVN4ckMsT0FBUzhELEVBQ2xCMm5DLEVBQVd6ckMsT0FBUzhELEVBQ3BCaEYsS0FBS290QyxZQUVGbkIsRUF2TnVCLEdDckJsQyxJQUFJLEdBQXdDLFdBQ3hDLElBQUkzcEMsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQTZINUMsU0FyRytCLFNBQVVHLEdBTXJDLFNBQVN5cUMsRUFBVUMsRUFBc0JDLEdBQ3JDLElBQUl4cUMsRUFBUUgsRUFBT0wsS0FBS2hELE1BS3hCLFNBQVUybEMsR0FDTixPQUFPb0ksRUFBcUJ4b0MsTUFBTSxLQUFNb2dDLE1BTTVDLFNBQVVBLEdBQ04sT0FBbURBLEVBQVEsR0FBSWpkLGFBQzdEMW9CLEtBa0JOLE9BaEJBd0QsRUFBTXlxQyx1QkFBeUJ6cUMsRUFBTTBxQyxpQkFBaUI3b0MsS0FBSzdCLEdBSzNEQSxFQUFNMnFDLG9CQUFzQkgsRUFLNUJ4cUMsRUFBTTRxQyxjQUFnQixFQUt0QjVxQyxFQUFNNnFDLGtCQUFvQixHQUNuQjdxQyxFQTREWCxPQWxHQSxHQUFVc3FDLEVBQVd6cUMsR0E0Q3JCeXFDLEVBQVUxdEMsVUFBVTRvQixRQUFVLFNBQVUyYyxHQUNwQyxJQUFJMkksRUFBUWpyQyxFQUFPakQsVUFBVTRvQixRQUFRaG1CLEtBQUtoRCxLQUFNMmxDLEdBS2hELE9BSkkySSxHQUNXM0ksRUFBUSxHQUNkOWhDLGlCQUFpQixFQUFrQjdELEtBQUtpdUMsd0JBRTFDSyxHQUtYUixFQUFVMXRDLFVBQVVtdUMsZ0JBQWtCLFdBQ2xDLE9BQU92dUMsS0FBS291QyxlQU1oQk4sRUFBVTF0QyxVQUFVOHRDLGlCQUFtQixTQUFVL3BDLEdBQzdDLElBQUk0TCxFQUFtRDVMLEVBQVksT0FDL0Q0RyxFQUFRZ0YsRUFBS2pDLFdBQ2pCLEcvQ2pGSSxJK0NpRkEvQyxHL0M1RUQsSStDNkVDQSxHL0M1RUQsSStDNkVDQSxFQUEyQixDQUMzQmdGLEVBQUtyTCxvQkFBb0IsRUFBa0IxRSxLQUFLaXVDLHdCQUNoRCxJQUFJTyxFQUFVeitCLEVBQUsyWSxTQUNmOGxCLEtBQVd4dUMsS0FBS3F1QywyQkFDVHJ1QyxLQUFLcXVDLGtCQUFrQkcsS0FDNUJ4dUMsS0FBS291QyxlQUVYcHVDLEtBQUttdUMsd0JBT2JMLEVBQVUxdEMsVUFBVXF1QyxjQUFnQixTQUFVQyxFQUFpQkMsR0FHM0QsSUFGQSxJQUNXNStCLEVBQU15K0IsRUFEYkksRUFBVyxFQUVSNXVDLEtBQUtvdUMsY0FBZ0JNLEdBQ3hCRSxFQUFXRCxHQUNYM3VDLEtBQUtndEMsV0FBYSxHQUVsQndCLEdBREF6K0IsRUFBbUQvUCxLQUFLeXNDLFVBQVUsSUFDbkQvakIsUy9DMUdqQixJK0MyR1UzWSxFQUFLakMsWUFDcUIwZ0MsS0FBV3h1QyxLQUFLcXVDLG9CQUM5Q3J1QyxLQUFLcXVDLGtCQUFrQkcsSUFBVyxJQUNoQ3h1QyxLQUFLb3VDLGdCQUNMUSxFQUNGNytCLEVBQUttQixTQUlWNDhCLEVBbkdtQixDQW9HNUIsSUNoR0ssU0FBU2UsR0FBUXo0QixHQUNwQixPQUFPQSxFQUFLLEdBQUssR0FBS0EsRUFBSyxHQUFLLEVBMEI3QixTQUFTMDRCLEdBQU8xNEIsRUFBTXFuQixHQUN6QixPQUFJMzZCLE1BQU11RCxRQUFRK1AsR0FDUEEsUUFHVXhSLElBQWI2NEIsRUFDQUEsRUFBVyxDQUFDcm5CLEVBQU1BLElBR2xCcW5CLEVBQVMsR0FBS3JuQixFQUNkcW5CLEVBQVMsR0FBS3JuQixHQUVYcW5CLEdDbkVmLElBQUksR0FBd0MsV0FDeEMsSUFBSW43QixFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBNjBDNUMsU0E1ckNrQyxTQUFVRyxHQUt4QyxTQUFTMHJDLEVBQWFobEMsR0FDbEIsSUFBSXZHLEVBQVFILEVBQU9MLEtBQUtoRCxPQUFTQSxLQUlqQ3dELEVBQU1vQyxHQUlOcEMsRUFBTXNDLEtBSU50QyxFQUFNd0MsR0FDTixJQUFJZ3BDLEVBd21DWixTQUErQmpsQyxHQUkzQixJQUFJa2xDLEVBQXNCLFVBQ1VycUMsSUFBaENtRixFQUFRa2xDLHNCQUNSQSxFQUMyQyxpQkFBaENsbEMsRUFBUWtsQyxvQkFDVHgzQixTQUFTeTNCLGVBQWVubEMsRUFBUWtsQyxxQkFDaENsbEMsRUFBUWtsQyxxQkFLdEIsSUFTSUUsRUFVQUMsRUFXQUMsRUE5QkE3c0MsRUFBUyxHQUNUOHNDLEVBQWF2bEMsRUFBUTI5QixRQUNvQyxtQkFBL0IzOUIsRUFBYyxPQUFXLFVBQ3RCQSxFQUFjLE9BQ3pDLElBQUksR0FBVyxDQUFFMjlCLE9BQW1DMzlCLEVBQWMsU0F1Q3hFLE9BdENBdkgsRUFBNkIsV0FBSThzQyxFQUNqQzlzQyxFQUF5QixPQUFJdUgsRUFBUTVKLE9BQ3JDcUMsRUFBdUIsVUFDRm9DLElBQWpCbUYsRUFBUXdsQyxLQUFxQnhsQyxFQUFRd2xDLEtBQU8sSUFBSSxRQUUzQjNxQyxJQUFyQm1GLEVBQVFvbEMsV0FDSnJzQyxNQUFNdUQsUUFBUTBELEVBQVFvbEMsVUFDdEJBLEVBQVcsSUFBSSxHQUFXcGxDLEVBQVFvbEMsU0FBU3gwQixVQUczQyxFQUFpRSxtQkFBaEM1USxFQUFnQixTQUFVLFNBQWtCLElBQzdFb2xDLEVBQXNDcGxDLEVBQWdCLGdCQUlqQ25GLElBQXpCbUYsRUFBUXFsQyxlQUNKdHNDLE1BQU11RCxRQUFRMEQsRUFBUXFsQyxjQUN0QkEsRUFBZSxJQUFJLEdBQVdybEMsRUFBUXFsQyxhQUFhejBCLFVBR25ELEVBQ0ksbUJBRDZCNVEsRUFBb0IsYUFBVSxTQUMvQyxJQUNoQnFsQyxFQUEwQ3JsQyxFQUFvQixvQkFJN0NuRixJQUFyQm1GLEVBQVFzbEMsU0FDSnZzQyxNQUFNdUQsUUFBUTBELEVBQVFzbEMsVUFDdEJBLEVBQVcsSUFBSSxHQUFXdGxDLEVBQVFzbEMsU0FBUzEwQixVQUczQyxFQUFpRSxtQkFBaEM1USxFQUFnQixTQUFVLFNBQWtCLElBQzdFc2xDLEVBQVd0bEMsRUFBUXNsQyxVQUl2QkEsRUFBVyxJQUFJLEdBRVosQ0FDSEYsU0FBVUEsRUFDVkMsYUFBY0EsRUFDZEgsb0JBQXFCQSxFQUNyQkksU0FBVUEsRUFDVjdzQyxPQUFRQSxHQXRxQ2NndEMsQ0FBc0J6bEMsR0FtUDVDLE9BalBBdkcsRUFBTWlzQyx5QkFBMkJqc0MsRUFBTWtzQyxtQkFBbUJycUMsS0FBSzdCLEdBSy9EQSxFQUFNbXNDLHNCQUMwQi9xQyxJQUE1Qm1GLEVBQVE2bEMsZ0JBQWdDN2xDLEVBQVE2bEMsZ0JBQWtCLEdBS3RFcHNDLEVBQU1xc0MsaUJBQ3FCanJDLElBQXZCbUYsRUFBUXdRLFdBQ0Z4USxFQUFRd1EsV0FDUnZJLEdBS1Z4TyxFQUFNc3NDLHlCQUtOdHNDLEVBQU11c0MsbUJBSU52c0MsRUFBTXdzQyxnQkFBOEMsV0FDaERod0MsS0FBSyt2Qyx3QkFBcUJuckMsRUFDMUI1RSxLQUFLaXdDLGFBQWF2VSxLQUFLQyxRQUN6QnQyQixLQUFLN0IsR0FLUEEsRUFBTTBzQyw0QmpFMUtILENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdpRStLbkIxc0MsRUFBTTJzQyw0QmpFL0tILENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdpRW9MbkIzc0MsRUFBTTRzQyxZQUFjLEVBS3BCNXNDLEVBQU02c0MsWUFBYyxLQU1wQjdzQyxFQUFNOHNDLGdCQUFrQixLQUt4QjlzQyxFQUFNK3NDLHlCQUEyQixLQUtqQy9zQyxFQUFNZ3RDLHVCQUF5QixLQUsvQmh0QyxFQUFNaXRDLGdDQUFrQyxLQUt4Q2p0QyxFQUFNa3RDLFVBQVlqNUIsU0FBU0MsY0FBYyxPQUN6Q2xVLEVBQU1rdEMsVUFBVWhtQyxVQUNaLGVBQWlCLGlCQUFrQmdJLE9BQVMsWUFBYyxJQUM5RGxQLEVBQU1rdEMsVUFBVTMzQixNQUFNRyxTQUFXLFdBQ2pDMVYsRUFBTWt0QyxVQUFVMzNCLE1BQU00M0IsU0FBVyxTQUNqQ250QyxFQUFNa3RDLFVBQVUzM0IsTUFBTXBCLE1BQVEsT0FDOUJuVSxFQUFNa3RDLFVBQVUzM0IsTUFBTW5CLE9BQVMsT0FLL0JwVSxFQUFNb3RDLGtCQUFvQm41QixTQUFTQyxjQUFjLE9BQ2pEbFUsRUFBTW90QyxrQkFBa0I3M0IsTUFBTUcsU0FBVyxXQUN6QzFWLEVBQU1vdEMsa0JBQWtCNzNCLE1BQU01TyxPQUFTLElBQ3ZDM0csRUFBTW90QyxrQkFBa0I3M0IsTUFBTXBCLE1BQVEsT0FDdENuVSxFQUFNb3RDLGtCQUFrQjczQixNQUFNbkIsT0FBUyxPQUN2Q3BVLEVBQU1vdEMsa0JBQWtCNzNCLE1BQU04M0IsY0FBZ0IsT0FDOUNydEMsRUFBTW90QyxrQkFBa0JsbUMsVUFBWSxzQkFDcENsSCxFQUFNa3RDLFVBQVV2M0IsWUFBWTNWLEVBQU1vdEMsbUJBS2xDcHRDLEVBQU1zdEMsMkJBQTZCcjVCLFNBQVNDLGNBQWMsT0FDMURsVSxFQUFNc3RDLDJCQUEyQi8zQixNQUFNRyxTQUFXLFdBQ2xEMVYsRUFBTXN0QywyQkFBMkIvM0IsTUFBTTVPLE9BQVMsSUFDaEQzRyxFQUFNc3RDLDJCQUEyQi8zQixNQUFNcEIsTUFBUSxPQUMvQ25VLEVBQU1zdEMsMkJBQTJCLzNCLE1BQU1uQixPQUFTLE9BQ2hEcFUsRUFBTXN0QywyQkFBMkIvM0IsTUFBTTgzQixjQUFnQixPQUN2RHJ0QyxFQUFNc3RDLDJCQUEyQnBtQyxVQUFZLGdDQUM3Q2xILEVBQU1rdEMsVUFBVXYzQixZQUFZM1YsRUFBTXN0Qyw0QkFLbEN0dEMsRUFBTXV0Qyx3QkFBMEIsS0FLaEN2dEMsRUFBTTRtQyxlQUFpQnJnQyxFQUFRZ2dDLGNBSy9Cdm1DLEVBQU13dEMscUJBQXVCaEMsRUFBZ0JDLG9CQUs3Q3pyQyxFQUFNeXRDLGdCQUFrQixLQUt4Qnp0QyxFQUFNMnJDLFNBQVdILEVBQWdCRyxVQUFZLElBQUksR0FLakQzckMsRUFBTTRyQyxhQUFlSixFQUFnQkksY0FBZ0IsSUFBSSxHQUt6RDVyQyxFQUFNMHRDLFVBQVlsQyxFQUFnQkssU0FNbEM3ckMsRUFBTTJ0QyxnQkFBa0IsR0FLeEIzdEMsRUFBTTZKLFVBQVksS0FLbEI3SixFQUFNNHRDLGNBS041dEMsRUFBTTZ0QyxxQkFBdUIsR0FLN0I3dEMsRUFBTTh0QyxXQUFhLElBQUksR0FBVTl0QyxFQUFNK3RDLGdCQUFnQmxzQyxLQUFLN0IsR0FBUUEsRUFBTWd1QyxrQkFBa0Juc0MsS0FBSzdCLElBQ2pHQSxFQUFNbUUsa0JBQWtCOHBDLEdBQXdCanVDLEVBQU1rdUMsMEJBQ3REbHVDLEVBQU1tRSxrQkFBa0I4cEMsR0FBa0JqdUMsRUFBTW11QyxvQkFDaERudUMsRUFBTW1FLGtCQUFrQjhwQyxHQUFrQmp1QyxFQUFNb3VDLG9CQUNoRHB1QyxFQUFNbUUsa0JBQWtCOHBDLEdBQW9CanVDLEVBQU1xdUMsc0JBR2xEcnVDLEVBQU0yRCxjQUFjNm5DLEVBQWdCeHNDLFFBQ3BDZ0IsRUFBTTJyQyxTQUFTbnVCLFFBS2YsU0FBVTh3QixHQUNOQSxFQUFRdGtDLE9BQU94TixPQUNqQnFGLEtBQUs3QixJQUNQQSxFQUFNMnJDLFNBQVN0ckMsaUJBQWlCc2pDLEdBSWhDLFNBQVVoakMsR0FDTkEsRUFBTXdoQyxRQUFRbjRCLE9BQU94TixPQUN2QnFGLEtBQUs3QixJQUNQQSxFQUFNMnJDLFNBQVN0ckMsaUJBQWlCc2pDLEdBSWhDLFNBQVVoakMsR0FDTkEsRUFBTXdoQyxRQUFRbjRCLE9BQU8sT0FDdkJuSSxLQUFLN0IsSUFDUEEsRUFBTTRyQyxhQUFhcHVCLFFBS25CLFNBQVUrd0IsR0FDTkEsRUFBWXZrQyxPQUFPeE4sT0FDckJxRixLQUFLN0IsSUFDUEEsRUFBTTRyQyxhQUFhdnJDLGlCQUFpQnNqQyxHQUlwQyxTQUFVaGpDLEdBQ05BLEVBQU13aEMsUUFBUW40QixPQUFPeE4sT0FDdkJxRixLQUFLN0IsSUFDUEEsRUFBTTRyQyxhQUFhdnJDLGlCQUFpQnNqQyxHQUlwQyxTQUFVaGpDLEdBQ05BLEVBQU13aEMsUUFBUW40QixPQUFPLE9BQ3ZCbkksS0FBSzdCLElBQ1BBLEVBQU0wdEMsVUFBVWx3QixRQUFReGQsRUFBTXd1QyxvQkFBb0Izc0MsS0FBSzdCLElBQ3ZEQSxFQUFNMHRDLFVBQVVydEMsaUJBQWlCc2pDLEdBSWpDLFNBQVVoakMsR0FDTm5FLEtBQUtneUMsb0JBQzBDN3RDLEVBQWEsVUFDOURrQixLQUFLN0IsSUFDUEEsRUFBTTB0QyxVQUFVcnRDLGlCQUFpQnNqQyxHQUlqQyxTQUFVaGpDLEdBQ04sSUFDSThqQyxFQUR5RDlqQyxFQUFhLFFBQ3pEOHRDLGFBQ05ydEMsSUFBUHFqQyxVQUNPam9DLEtBQUtteEMsZ0JBQWdCbEosRUFBR2g0QixZQUVuQzlMLEVBQU13aEMsUUFBUW40QixPQUFPLE9BQ3ZCbkksS0FBSzdCLElBQ0FBLEVBKzJCWCxPQXBuQ0EsR0FBVXVyQyxFQUFjMXJDLEdBMlF4QjByQyxFQUFhM3VDLFVBQVV3TyxlQUFpQixXQUNwQyxNQUFNLElBQUluSSxNQUFNLG9EQU9wQnNvQyxFQUFhM3VDLFVBQVU4eEMsV0FBYSxTQUFVSixHQUMxQzl4QyxLQUFLbXlDLGNBQWMxdkMsS0FBS3F2QyxJQVc1Qi9DLEVBQWEzdUMsVUFBVWd5QyxlQUFpQixTQUFVTCxHQUM5Qy94QyxLQUFLcXlDLGtCQUFrQjV2QyxLQUFLc3ZDLElBU2hDaEQsRUFBYTN1QyxVQUFVa3lDLFNBQVcsU0FBVXRuQyxHQUMzQmhMLEtBQUt1eUMsZ0JBQWdCdkssWUFDM0J2bEMsS0FBS3VJLElBT2hCK2pDLEVBQWEzdUMsVUFBVW95QyxXQUFhLFNBQVVDLEdBQzFDenlDLEtBQUsweUMsY0FBY2p3QyxLQUFLZ3dDLElBTzVCMUQsRUFBYTN1QyxVQUFVNHhDLG9CQUFzQixTQUFVUyxHQUNuRCxJQUFJeEssRUFBS3dLLEVBQVFSLGFBQ05ydEMsSUFBUHFqQyxJQUNBam9DLEtBQUtteEMsZ0JBQWdCbEosRUFBR2g0QixZQUFjd2lDLEdBRTFDQSxFQUFRamxDLE9BQU94TixPQU1uQit1QyxFQUFhM3VDLFVBQVVNLGdCQUFrQixXQUNyQ1YsS0FBSzJ5QyxVQUFVLE1BQ2Z0dkMsRUFBT2pELFVBQVVNLGdCQUFnQnNDLEtBQUtoRCxPQW9CMUMrdUMsRUFBYTN1QyxVQUFVd3lDLHNCQUF3QixTQUFVM2tDLEVBQU9vQyxFQUFVckIsR0FDdEUsR0FBS2hQLEtBQUtxd0MsWUFBVixDQUdBLElBQUk3L0IsRUFBYXhRLEtBQUs2eUMsK0JBQStCNWtDLEdBRWpEd0MsT0FBNEM3TCxLQURoRG9LLE9BQThCcEssSUFBaEJvSyxFQUE0QkEsRUFBYyxJQUN6QnlCLGFBQTZCekIsRUFBWXlCLGFBQWUsRUFDbkYweUIsT0FBMEN2K0IsSUFBNUJvSyxFQUFZbTBCLFlBQTRCbjBCLEVBQVltMEIsWUFBYzNoQyxFQUNoRnloQyxHQUE0QyxJQUE3QmowQixFQUFZaTBCLGFBQy9CLE9BQU9qakMsS0FBS3FOLFVBQVVrRCwyQkFBMkJDLEVBQVl4USxLQUFLcXdDLFlBQWE1L0IsRUFBY3d5QixFQUFjNXlCLEVBQVUsS0FBTTh5QixFQUFhLFFBVTVJNEwsRUFBYTN1QyxVQUFVMHlDLG1CQUFxQixTQUFVN2tDLEVBQU9lLEdBQ3pELElBQUkrakMsRUFBVyxHQUlmLE9BSEEveUMsS0FBSzR5QyxzQkFBc0Iza0MsR0FBTyxTQUFVbzFCLEdBQ3hDMFAsRUFBU3R3QyxLQUFLNGdDLEtBQ2ZyMEIsR0FDSStqQyxHQXVCWGhFLEVBQWEzdUMsVUFBVWlrQyxvQkFBc0IsU0FBVXAyQixFQUFPb0MsRUFBVXJCLEdBQ3BFLEdBQUtoUCxLQUFLcXdDLFlBQVYsQ0FHQSxJQUFJdG1DLEVBQVVpRixHQUFlLEdBQ3pCeUIsT0FBd0M3TCxJQUF6Qm1GLEVBQVEwRyxhQUE2QjFHLEVBQVEwRyxhQUFlLEVBQzNFMHlCLEVBQWNwNUIsRUFBUW81QixhQUFlM2hDLEVBQ3pDLE9BQU94QixLQUFLcU4sVUFBVWczQixvQkFBb0JwMkIsRUFBT2pPLEtBQUtxd0MsWUFBYTUvQixFQUFjSixFQUFVOHlCLEtBVS9GNEwsRUFBYTN1QyxVQUFVNHlDLGtCQUFvQixTQUFVL2tDLEVBQU9lLEdBQ3hELElBQUtoUCxLQUFLcXdDLFlBQ04sT0FBTyxFQUVYLElBQUk3L0IsRUFBYXhRLEtBQUs2eUMsK0JBQStCNWtDLEdBRWpEazFCLE9BQTBDditCLEtBRDlDb0ssT0FBOEJwSyxJQUFoQm9LLEVBQTRCQSxFQUFjLElBQzFCbTBCLFlBQTRCbjBCLEVBQVltMEIsWUFBYzNoQyxFQUNoRmlQLE9BQTRDN0wsSUFBN0JvSyxFQUFZeUIsYUFBNkJ6QixFQUFZeUIsYUFBZSxFQUNuRnd5QixHQUE0QyxJQUE3QmowQixFQUFZaTBCLGFBQy9CLE9BQU9qakMsS0FBS3FOLFVBQVVpM0IsdUJBQXVCOXpCLEVBQVl4USxLQUFLcXdDLFlBQWE1L0IsRUFBY3d5QixFQUFjRSxFQUFhLE9BUXhINEwsRUFBYTN1QyxVQUFVNnlDLG1CQUFxQixTQUFVOXVDLEdBQ2xELE9BQU9uRSxLQUFLaXBDLHVCQUF1QmpwQyxLQUFLZ3BDLGNBQWM3a0MsS0FPMUQ0cUMsRUFBYTN1QyxVQUFVOHlDLDJCQUE2QixTQUFVL3VDLEdBQzFELE9BQU9uRSxLQUFLNnlDLCtCQUErQjd5QyxLQUFLZ3BDLGNBQWM3a0MsS0FRbEU0cUMsRUFBYTN1QyxVQUFVNG9DLGNBQWdCLFNBQVU3a0MsR0FDN0MsSUFBSWd2QyxFQUFtQm56QyxLQUFLMHdDLFVBQVUwQyx3QkFDbENDLEVBRUosbUJBQW9CbHZDLEVBQ1ksRUFBUW12QyxlQUFlLEdBQ3ZCLEVBQ2hDLE1BQU8sQ0FDSEQsRUFBY3ZILFFBQVVxSCxFQUFpQi81QixLQUN6Q2k2QixFQUFjdEgsUUFBVW9ILEVBQWlCSSxNQVlqRHhFLEVBQWEzdUMsVUFBVW96QyxVQUFZLFdBQy9CLE9BQW9EeHpDLEtBQUtvSCxJQUFJcXFDLEtBU2pFMUMsRUFBYTN1QyxVQUFVcXpDLGlCQUFtQixXQUN0QyxJQUFJdHpDLEVBQVNILEtBQUt3ekMsWUFDbEIsWUFBZTV1QyxJQUFYekUsRUFDeUIsaUJBQVhBLEVBQ1JzWCxTQUFTeTNCLGVBQWUvdUMsR0FDeEJBLEVBR0MsTUFVZjR1QyxFQUFhM3VDLFVBQVU2b0MsdUJBQXlCLFNBQVVoN0IsR0FDdEQsT0FBT2dVLEdBQWlCamlCLEtBQUs2eUMsK0JBQStCNWtDLEdBQVFqTyxLQUFLMHpDLFVBQVVuWSxrQkFRdkZ3VCxFQUFhM3VDLFVBQVV5eUMsK0JBQWlDLFNBQVU1a0MsR0FDOUQsSUFBSUcsRUFBYXBPLEtBQUtxd0MsWUFDdEIsT0FBS2ppQyxFQUlNN0ksR0FBZTZJLEVBQVd5TSwyQkFBNEI1TSxFQUFNME0sU0FINUQsTUFZZm8wQixFQUFhM3VDLFVBQVUreEMsWUFBYyxXQUNqQyxPQUFPbnlDLEtBQUttdkMsVUFRaEJKLEVBQWEzdUMsVUFBVXN5QyxZQUFjLFdBQ2pDLE9BQU8xeUMsS0FBS2t4QyxXQVVoQm5DLEVBQWEzdUMsVUFBVXV6QyxlQUFpQixTQUFVMUwsR0FDOUMsSUFBSXdLLEVBQVV6eUMsS0FBS214QyxnQkFBZ0JsSixFQUFHaDRCLFlBQ3RDLFlBQW1CckwsSUFBWjZ0QyxFQUF3QkEsRUFBVSxNQVU3QzFELEVBQWEzdUMsVUFBVWl5QyxnQkFBa0IsV0FDckMsT0FBT3J5QyxLQUFLb3ZDLGNBUWhCTCxFQUFhM3VDLFVBQVVteUMsY0FBZ0IsV0FDbkMsT0FBa0N2eUMsS0FBS29ILElBQUlxcUMsS0FPL0MxQyxFQUFhM3VDLFVBQVU0bkMsVUFBWSxXQUUvQixPQURhaG9DLEtBQUt1eUMsZ0JBQWdCdkssYUFNdEMrRyxFQUFhM3VDLFVBQVV3ekMsV0FBYSxXQUVoQyxJQURBLElBQUlubEMsRUFBbUJ6TyxLQUFLdXlDLGdCQUFnQnZtQyxzQkFDbkM3SyxFQUFJLEVBQUdXLEVBQUsyTSxFQUFpQnZOLE9BQVFDLEVBQUlXLElBQU1YLEVBQUcsQ0FDdkQsSUFDSWEsRUFEUXlNLEVBQWlCdE4sR0FBRzZKLE1BQ3VDNkMsWUFDdkUsR0FBSTdMLEdBQVVBLEVBQU82eEMsUUFDakIsT0FBTyxFQUdmLE9BQU8sR0FTWDlFLEVBQWEzdUMsVUFBVTB6Qyx1QkFBeUIsU0FBVXRqQyxHQUN0RCxJQUFJdWpDLEVBQWlCN3hCLEdBQW1CMVIsRUFBWXhRLEtBQUswekMsVUFBVW5ZLGlCQUNuRSxPQUFPdjdCLEtBQUtnMEMsK0JBQStCRCxJQVEvQ2hGLEVBQWEzdUMsVUFBVTR6QywrQkFBaUMsU0FBVXhqQyxHQUM5RCxJQUFJcEMsRUFBYXBPLEtBQUtxd0MsWUFDdEIsT0FBS2ppQyxFQUlNN0ksR0FBZTZJLEVBQVd1TCwyQkFBNEJuSixFQUFXbUssTUFBTSxFQUFHLElBSDFFLE1BVWZvMEIsRUFBYTN1QyxVQUFVa08sWUFBYyxXQUNqQyxPQUFPdE8sS0FBS3FOLFdBUWhCMGhDLEVBQWEzdUMsVUFBVXFiLFFBQVUsV0FDN0IsT0FBMER6YixLQUFLb0gsSUFBSXFxQyxLQVN2RTFDLEVBQWEzdUMsVUFBVXN6QyxRQUFVLFdBQzdCLE9BQTRCMXpDLEtBQUtvSCxJQUFJcXFDLEtBT3pDMUMsRUFBYTN1QyxVQUFVZ2xDLFlBQWMsV0FDakMsT0FBT3BsQyxLQUFLMHdDLFdBU2hCM0IsRUFBYTN1QyxVQUFVNnpDLG9CQUFzQixXQUN6QyxPQUFPajBDLEtBQUs0d0MsbUJBU2hCN0IsRUFBYTN1QyxVQUFVOHpDLDZCQUErQixXQUNsRCxPQUFPbDBDLEtBQUs4d0MsNEJBS2hCL0IsRUFBYTN1QyxVQUFVcXJDLGlCQUFtQixXQUN0QyxJQUFJMEksRUFBZ0JuMEMsS0FBS3l6QyxtQkFDekIsT0FBT1UsRUFBZ0JBLEVBQWNDLGNBQWdCMzhCLFVBU3pEczNCLEVBQWEzdUMsVUFBVW14QyxnQkFBa0IsU0FBVXhoQyxFQUFNd1ksRUFBZThyQixFQUFZcndCLEdBQ2hGLE9GcHJCRCxTQUF5QjVWLEVBQVkyQixFQUFNd1ksRUFBZThyQixFQUFZcndCLEdBR3pFLElBQUs1VixLQUFnQm1hLEtBQWlCbmEsRUFBV3dhLGFBQzdDLE9BQU9vakIsR0FFWCxJQUFLNTlCLEVBQVd3YSxZQUFZTCxHQUFleFksRUFBSzJZLFVBQzVDLE9BQU9zakIsR0FRWCxJQUFJOTFCLEVBQVM5SCxFQUFXdkIsVUFBVXFKLE9BQzlCOFgsRUFBU3FtQixFQUFXLEdBQUtuK0IsRUFBTyxHQUNoQytYLEVBQVNvbUIsRUFBVyxHQUFLbitCLEVBQU8sR0FDcEMsT0FBUSxNQUFReE4sS0FBS00sSUFBSWdiLEdBQ3JCdGIsS0FBS29YLEtBQUtrTyxFQUFTQSxFQUFTQyxFQUFTQSxHQUFVakssRUVpcUJ4Q3V0QixDQUFnQnZ4QyxLQUFLcXdDLFlBQWF0Z0MsRUFBTXdZLEVBQWU4ckIsRUFBWXJ3QixJQU05RStxQixFQUFhM3VDLFVBQVVzdkMsbUJBQXFCLFNBQVU0RSxFQUFjeHZDLEdBQ2hFLElBQUkvRSxFQUFPK0UsR0FBWXd2QyxFQUFhdjBDLEtBQ2hDdzBDLEVBQWtCLElBQUksR0FBZ0J4MEMsRUFBTUMsS0FBTXMwQyxHQUN0RHQwQyxLQUFLdzBDLHNCQUFzQkQsSUFLL0J4RixFQUFhM3VDLFVBQVVvMEMsc0JBQXdCLFNBQVVELEdBQ3JELEdBQUt2MEMsS0FBS3F3QyxZQUFWLENBS0EsSUFBSTFILEVBQTZDNEwsRUFBNkIsY0FDMUU5c0MsRUFBWWtoQyxFQUFjNW9DLEtBQzlCLEdBQUkwSCxJQUFjLElBQ2RBLElBQWMsR0FDZEEsSUFBYyxFQUFtQixDQUNqQyxJQUFJK2pDLEVBQU14ckMsS0FBS3lyQyxtQkFDWGdKLEVBQVd6MEMsS0FBSzB3QyxVQUFVL0UsWUFDeEIzckMsS0FBSzB3QyxVQUFVL0UsY0FDZkgsRUFDRnJyQyxFQUE4QndvQyxFQUFvQixPQUN0RCxHQUdBM29DLEtBQUs4d0MsMkJBQTJCeDFCLFNBQVNuYixNQUtuQ3MwQyxJQUFhakosRUFBTUEsRUFBSWtKLGdCQUFrQkQsR0FBVW41QixTQUFTbmIsR0FDOUQsT0FJUixHQURBbzBDLEVBQWdCbm1DLFdBQWFwTyxLQUFLcXdDLGFBQ1UsSUFBeENyd0MsS0FBS2tFLGNBQWNxd0MsR0FFbkIsSUFEQSxJQUFJSSxFQUFvQjMwQyxLQUFLcXlDLGtCQUFrQnRMLFdBQVdwc0IsUUFDakR4WixFQUFJd3pDLEVBQWtCenpDLE9BQVMsRUFBR0MsR0FBSyxFQUFHQSxJQUFLLENBQ3BELElBQUk0d0MsRUFBYzRDLEVBQWtCeHpDLEdBQ3BDLEdBQUk0d0MsRUFBWXhOLFdBQWF2a0MsTUFDeEIreEMsRUFBWTZDLGFBQ1o1MEMsS0FBS3l6QyxzQkFHQzFCLEVBQVl2dEMsWUFBWSt2QyxJQUN0QkEsRUFBZ0J0MEMsb0JBQ3pCLFNBUWhCOHVDLEVBQWEzdUMsVUFBVXkwQyxpQkFBbUIsV0FDdEMsSUFBSXptQyxFQUFhcE8sS0FBS3F3QyxZQVVsQnhuQixFQUFZN29CLEtBQUtzeEMsV0FDckIsSUFBS3pvQixFQUFVd2tCLFVBQVcsQ0FDdEIsSUFBSXFCLEVBQWtCMXVDLEtBQUsydkMsaUJBQ3ZCaEIsRUFBY0QsRUFDbEIsR0FBSXRnQyxFQUFZLENBQ1osSUFBSTBtQyxFQUFRMW1DLEVBQVcybUMsVUFDdkIsR0FBSUQsRXBCbDRCTCxJb0JrNEJrQ0EsRXBCajRCaEMsR29CaTRCNkQsQ0FDMUQsSUFBSUUsRUFBbUJ0WixLQUFLQyxNQUFRdnRCLEVBQVd3VyxLQUFPLEVBQ3REOHBCLEVBQWtCc0csRUFBbUIsRUFBSSxFQUN6Q3JHLEVBQWNxRyxFQUFtQixFQUFJLEdBR3pDbnNCLEVBQVUwbEIsa0JBQW9CRyxJQUM5QjdsQixFQUFVZ2xCLGVBQ1ZobEIsRUFBVTRsQixjQUFjQyxFQUFpQkMsS0FHN0N2Z0MsSUFDQXBPLEtBQUs2RSxZQUFZLEtBQ2hCdUosRUFBVzhaLFNBQ1hsb0IsS0FBS3N4QyxXQUFXL0MsbUJBQ2hCdnVDLEtBQUs0ekMsY0FDTjV6QyxLQUFLcU4sVUFBVTAxQixvQkFBb0IsR0FBZ0MzMEIsR0FHdkUsSUFEQSxJQUFJcWEsRUFBc0J6b0IsS0FBS3F4QyxxQkFDdEJsd0MsRUFBSSxFQUFHVyxFQUFLMm1CLEVBQW9Cdm5CLE9BQVFDLEVBQUlXLElBQU1YLEVBQ3ZEc25CLEVBQW9CdG5CLEdBQUduQixLQUFNb08sR0FFakNxYSxFQUFvQnZuQixPQUFTLEdBS2pDNnRDLEVBQWEzdUMsVUFBVXd4QyxtQkFBcUIsV0FDcEM1eEMsS0FBSzB6QyxZQUFjMXpDLEtBQUswekMsVUFBVXRZLGdCQUNsQ3A3QixLQUFLMHpDLFVBQVVyWSxtQkFBbUIsR0FFdENyN0IsS0FBS3NOLFVBS1R5aEMsRUFBYTN1QyxVQUFVeXhDLHFCQUF1QixXQUsxQyxJQUFJc0MsRUFJSixHQUhJbjBDLEtBQUt3ekMsY0FDTFcsRUFBZ0JuMEMsS0FBS3l6QyxvQkFFckJ6ekMsS0FBSyt3Qyx3QkFBeUIsQ0FDOUIsSUFBSyxJQUFJNXZDLEVBQUksRUFBR1csRUFBSzlCLEtBQUtpeEMsZ0JBQWdCL3ZDLE9BQVFDLEVBQUlXLElBQU1YLEVBQ3hEdUUsRUFBYzFGLEtBQUtpeEMsZ0JBQWdCOXZDLElBRXZDbkIsS0FBS2l4QyxnQkFBa0IsS0FDdkJqeEMsS0FBSzB3QyxVQUFVaHNDLG9CQUFvQixFQUF1QjFFLEtBQUt5dkMsMEJBQy9EenZDLEtBQUswd0MsVUFBVWhzQyxvQkFBb0IsRUFBaUIxRSxLQUFLeXZDLCtCQUM5QjdxQyxJQUF2QjVFLEtBQUtveEMsZ0JBQ0wxc0Msb0JBQW9CLEVBQWtCMUUsS0FBS294QyxlQUFlLEdBQzFEcHhDLEtBQUtveEMsbUJBQWdCeHNDLEdBRXpCNUUsS0FBSyt3Qyx3QkFBd0J0d0MsVUFDN0JULEtBQUsrd0Msd0JBQTBCLEtBQy9CMzRCLEdBQVdwWSxLQUFLMHdDLFdBRXBCLEdBQUt5RCxFQWFBLENBTUQsSUFBSyxJQUFJbHlDLEtBTFRreUMsRUFBY2g3QixZQUFZblosS0FBSzB3QyxXQUMxQjF3QyxLQUFLcU4sWUFDTnJOLEtBQUtxTixVQUFZck4sS0FBSzRPLGtCQUUxQjVPLEtBQUsrd0Msd0JBQTBCLElBQUksR0FBdUIvd0MsS0FBTUEsS0FBS29xQyxnQkFDckQsR0FDWnBxQyxLQUFLK3dDLHdCQUF3Qmx0QyxpQkFBaUIsR0FBb0I1QixHQUFNakMsS0FBS3cwQyxzQkFBc0JudkMsS0FBS3JGLE9BRTVHQSxLQUFLMHdDLFVBQVU3c0MsaUJBQWlCLEVBQXVCN0QsS0FBS3l2QywwQkFBMEIsR0FDdEZ6dkMsS0FBSzB3QyxVQUFVN3NDLGlCQUFpQixFQUFpQjdELEtBQUt5dkMsMkJBQTBCajlCLElBQTBCLENBQUVDLFNBQVMsSUFDckgsSUFBSXc4QixFQUF1Qmp2QyxLQUFLZ3hDLHFCQUUxQmh4QyxLQUFLZ3hDLHFCQURMbUQsRUFFTm4wQyxLQUFLaXhDLGdCQUFrQixDQUNuQi9yQyxFQUFPK3BDLEVBQXFCLEVBQW1CanZDLEtBQUswdkMsbUJBQW9CMXZDLE1BQ3hFa0YsRUFBTytwQyxFQUFxQixFQUFvQmp2QyxLQUFLMHZDLG1CQUFvQjF2QyxPQUV4RUEsS0FBS294QyxnQkFDTnB4QyxLQUFLb3hDLGNBQWdCcHhDLEtBQUtpMUMsV0FBVzV2QyxLQUFLckYsTUFDMUMwUyxPQUFPN08saUJBQWlCLEVBQWtCN0QsS0FBS294QyxlQUFlLFNBaEM5RHB4QyxLQUFLcU4sWUFDTDY5QixhQUFhbHJDLEtBQUs4dkMsMEJBQ2xCOXZDLEtBQUs4dkMsOEJBQTJCbHJDLEVBQ2hDNUUsS0FBS3F4QyxxQkFBcUJud0MsT0FBUyxFQUNuQ2xCLEtBQUtxTixVQUFVNU0sVUFDZlQsS0FBS3FOLFVBQVksTUFFakJyTixLQUFLK3ZDLHFCQUNMelQscUJBQXFCdDhCLEtBQUsrdkMsb0JBQzFCL3ZDLEtBQUsrdkMsd0JBQXFCbnJDLEdBMEJsQzVFLEtBQUtpMUMsY0FPVGxHLEVBQWEzdUMsVUFBVW94QyxrQkFBb0IsV0FDdkN4eEMsS0FBS3NOLFVBS1R5aEMsRUFBYTN1QyxVQUFVODBDLDJCQUE2QixXQUNoRGwxQyxLQUFLc04sVUFLVHloQyxFQUFhM3VDLFVBQVV1eEMsbUJBQXFCLFdBQ3BDM3hDLEtBQUt1d0MsMkJBQ0w3cUMsRUFBYzFGLEtBQUt1d0MsMEJBQ25CdndDLEtBQUt1d0MseUJBQTJCLE1BRWhDdndDLEtBQUt3d0MseUJBQ0w5cUMsRUFBYzFGLEtBQUt3d0Msd0JBQ25CeHdDLEtBQUt3d0MsdUJBQXlCLE1BRWxDLElBQUlqQixFQUFPdnZDLEtBQUswekMsVUFDWm5FLElBQ0F2dkMsS0FBS20xQyxzQkFDTG4xQyxLQUFLdXdDLHlCQUEyQnJyQyxFQUFPcXFDLEVBQU03bkMsRUFBZ0MxSCxLQUFLazFDLDJCQUE0QmwxQyxNQUM5R0EsS0FBS3d3Qyx1QkFBeUJ0ckMsRUFBT3FxQyxFQUFNLEVBQWtCdnZDLEtBQUtrMUMsMkJBQTRCbDFDLE1BQzlGdXZDLEVBQUtsVSxtQkFBbUIsSUFFNUJyN0IsS0FBS3NOLFVBS1R5aEMsRUFBYTN1QyxVQUFVc3hDLHlCQUEyQixXQUMxQzF4QyxLQUFLeXdDLGtDQUNMendDLEtBQUt5d0MsZ0NBQWdDenZCLFFBQVF0YixHQUM3QzFGLEtBQUt5d0MsZ0NBQWtDLE1BRTNDLElBQUluQixFQUFhdHZDLEtBQUt1eUMsZ0JBQ2xCakQsSUFDQXR2QyxLQUFLeXdDLGdDQUFrQyxDQUNuQ3ZyQyxFQUFPb3FDLEVBQVk1bkMsRUFBZ0MxSCxLQUFLc04sT0FBUXROLE1BQ2hFa0YsRUFBT29xQyxFQUFZLEVBQWtCdHZDLEtBQUtzTixPQUFRdE4sUUFHMURBLEtBQUtzTixVQUtUeWhDLEVBQWEzdUMsVUFBVWcxQyxXQUFhLFdBQ2hDLFFBQVNwMUMsS0FBS3F3QyxhQU1sQnRCLEVBQWEzdUMsVUFBVWkxQyxXQUFhLFdBQzVCcjFDLEtBQUsrdkMsb0JBQ0x6VCxxQkFBcUJ0OEIsS0FBSyt2QyxvQkFFOUIvdkMsS0FBS2d3QyxtQkFLVGpCLEVBQWEzdUMsVUFBVTZrQyxXQUFhLFdBRWhDLElBREEsSUFBSXBCLEVBQWM3akMsS0FBS3V5QyxnQkFBZ0J2bUMsc0JBQzlCN0ssRUFBSSxFQUFHVyxFQUFLK2hDLEVBQVkzaUMsT0FBUUMsRUFBSVcsSUFBTVgsRUFBRyxDQUNsRCxJQUFJNkosRUFBUTY0QixFQUFZMWlDLEdBQUc2SixNQUN2QkEsRUFBTTZELGVBQ043RCxFQUFNc0QsY0FBY3VDLHVCQVFoQ2srQixFQUFhM3VDLFVBQVVrTixPQUFTLFdBQ3hCdE4sS0FBS3FOLGdCQUF5Q3pJLElBQTVCNUUsS0FBSyt2QyxxQkFDdkIvdkMsS0FBSyt2QyxtQkFBcUIzUyxzQkFBc0JwOUIsS0FBS2d3QyxtQkFVN0RqQixFQUFhM3VDLFVBQVVrMUMsY0FBZ0IsU0FBVXhELEdBQzdDLE9BQU85eEMsS0FBS215QyxjQUFjOUssT0FBT3lLLElBU3JDL0MsRUFBYTN1QyxVQUFVbTFDLGtCQUFvQixTQUFVeEQsR0FDakQsT0FBTy94QyxLQUFLcXlDLGtCQUFrQmhMLE9BQU8wSyxJQVN6Q2hELEVBQWEzdUMsVUFBVW8xQyxZQUFjLFNBQVV4cUMsR0FFM0MsT0FEYWhMLEtBQUt1eUMsZ0JBQWdCdkssWUFDcEJYLE9BQU9yOEIsSUFTekIrakMsRUFBYTN1QyxVQUFVcTFDLGNBQWdCLFNBQVVoRCxHQUM3QyxPQUFPenlDLEtBQUsweUMsY0FBY3JMLE9BQU9vTCxJQU1yQzFELEVBQWEzdUMsVUFBVTZ2QyxhQUFlLFNBQVVyckIsR0FDNUMsSS9EM2lDY3BaLEVBQVFrSixFK0QyaUNsQmxSLEVBQVF4RCxLQUNSb1csRUFBT3BXLEtBQUt5YixVQUNaOHpCLEVBQU92dkMsS0FBSzB6QyxVQUNaZ0MsRUFBcUIxMUMsS0FBS3F3QyxZQUUxQmppQyxFQUFhLEtBQ2pCLFFBQWF4SixJQUFUd1IsR0FBc0J5NEIsR0FBUXo0QixJQUFTbTVCLEdBQVFBLEVBQUtwVSxRQUFTLENBQzdELElBQUk0WixFQUFZeEYsRUFBSzFSLFNBQVM3OUIsS0FBS3F3QyxZQUFjcndDLEtBQUtxd0MsWUFBWTBFLGVBQVlud0MsR0FDMUVpSSxFQUFZMGlDLEVBQUt6aEMsV0FDckJNLEVBQWEsQ0FDVDhaLFNBQVMsRUFDVHZPLDJCQUE0QjNaLEtBQUtrd0MsNEJBQ2pDeUYsY0FBZSxLQUNmbnFDLE9BQVF5SyxHQUFrQnBKLEVBQVVxSixPQUFRckosRUFBVUMsV0FBWUQsRUFBVXNKLFNBQVVDLEdBQ3RGcFIsTUFBT2hGLEtBQUtvd0MsY0FDWjVzQixXQUFZLEVBQ1ovVSxpQkFBa0J6TyxLQUFLdXlDLGdCQUFnQnZtQyxzQkFDdkN1TyxXQUFZdmEsS0FBSzZ2QyxZQUNqQmgxQiwyQkFBNEI3YSxLQUFLbXdDLDRCQUNqQzFuQixvQkFBcUIsR0FDckJyUyxLQUFNQSxFQUNOeVMsVUFBVzdvQixLQUFLc3hDLFdBQ2hCMXNCLEtBQU1BLEVBQ042QyxVQUFXLEdBQ1g1YSxVQUFXQSxFQUNYa29DLFVBQVdBLEVBQ1huc0IsWUFBYSxJQUdyQjVvQixLQUFLcXdDLFlBQWNqaUMsRUFDbkJwTyxLQUFLcU4sVUFBVW1CLFlBQVlKLEdBQ3ZCQSxJQUNJQSxFQUFXOFosU0FDWGxvQixLQUFLc04sU0FFVHhLLE1BQU0xQyxVQUFVcUMsS0FBSzhDLE1BQU12RixLQUFLcXhDLHFCQUFzQmpqQyxFQUFXcWEscUJBQzdEaXRCLEtBQ2lCMTFDLEtBQUtzd0Msa0JBQ2hCLEdBQVF0d0MsS0FBS3N3QyxtQkFDVixHQUFPbGlDLEVBQVc1QyxPQUFReEwsS0FBS3N3QyxvQkFFcEN0d0MsS0FBS2tFLGNBQWMsSUFBSSxHTHpvQzVCLFlLeW9DNkRsRSxLQUFNMDFDLElBQzlEMTFDLEtBQUtzd0MsZ0JBQWtCMzdCLEdBQW9CM1UsS0FBS3N3QyxrQkFHN0N0d0MsS0FBS3N3QyxrQkFDWGxpQyxFQUFXMm1DLFVwQnpwQ2IsS29CMHBDRTNtQyxFQUFXMm1DLFVwQnpwQ1gsS29CMHBDQSxHQUFPM21DLEVBQVc1QyxPQUFReEwsS0FBS3N3QyxtQkFFaEN0d0MsS0FBS2tFLGNBQWMsSUFBSSxHTDVvQzFCLFVLNG9DeURsRSxLQUFNb08sSS9EN2xDdEQ1QyxFK0Q4bENBNEMsRUFBVzVDLFEvRDlsQ0hrSixFK0Q4bENXMVUsS0FBS3N3QyxrQi9ENWxDdEM1N0IsRUFBVyxHQUFLbEosRUFBTyxHQUN2QmtKLEVBQVcsR0FBS2xKLEVBQU8sR0FDdkJrSixFQUFXLEdBQUtsSixFQUFPLEdBQ3ZCa0osRUFBVyxHQUFLbEosRUFBTyxJQUloQkEsRUFBT21QLFUrRHdsQ2QzYSxLQUFLa0UsY0FBYyxJQUFJLEdBQVMweEMsR0FBeUI1MUMsS0FBTW9PLElBQzFEcE8sS0FBSzh2QywyQkFDTjl2QyxLQUFLOHZDLHlCQUEyQjFaLFlBQVcsV0FDdkM1eUIsRUFBTXNzQyw4QkFBMkJsckMsRUFDakNwQixFQUFNcXhDLHFCQUNQLEtBU1g5RixFQUFhM3VDLFVBQVV5MUMsY0FBZ0IsU0FBVXZHLEdBQzdDdHZDLEtBQUs2SCxJQUFJNHBDLEdBQXdCbkMsSUFRckNQLEVBQWEzdUMsVUFBVXNpQyxRQUFVLFNBQVV0c0IsR0FDdkNwVyxLQUFLNkgsSUFBSTRwQyxHQUFrQnI3QixJQVMvQjI0QixFQUFhM3VDLFVBQVV1eUMsVUFBWSxTQUFVeHlDLEdBQ3pDSCxLQUFLNkgsSUFBSTRwQyxHQUFvQnR4QyxJQVFqQzR1QyxFQUFhM3VDLFVBQVUwMUMsUUFBVSxTQUFVdkcsR0FDdkN2dkMsS0FBSzZILElBQUk0cEMsR0FBa0JsQyxJQU8vQlIsRUFBYTN1QyxVQUFVNjBDLFdBQWEsV0FDaEMsSUFBSWQsRUFBZ0JuMEMsS0FBS3l6QyxtQkFDckJyOUIsT0FBT3hSLEVBQ1gsR0FBSXV2QyxFQUFlLENBQ2YsSUFBSTRCLEVBQWdCQyxpQkFBaUI3QixHQUNqQ3g4QixFQUFRdzhCLEVBQWM4QixZQUN0QkMsV0FBV0gsRUFBK0IsaUJBQzFDRyxXQUFXSCxFQUEyQixhQUN0Q0csV0FBV0gsRUFBNEIsY0FDdkNHLFdBQVdILEVBQWdDLGtCQUMzQ24rQixFQUFTdThCLEVBQWNnQyxhQUN2QkQsV0FBV0gsRUFBOEIsZ0JBQ3pDRyxXQUFXSCxFQUEwQixZQUNyQ0csV0FBV0gsRUFBNkIsZUFDeENHLFdBQVdILEVBQWlDLG1CQUMzQzNvQixNQUFNelYsSUFBV3lWLE1BQU14VixJQUVuQmkzQixHQURMejRCLEVBQU8sQ0FBQ3VCLEVBQU9DLEtBR1hpdEIsUUFBUUMsS0FBSyxxRUFJekI5a0MsS0FBSzBpQyxRQUFRdHNCLEdBQ2JwVyxLQUFLbTFDLHVCQU1UcEcsRUFBYTN1QyxVQUFVKzBDLG9CQUFzQixXQUN6QyxJQUFJNUYsRUFBT3Z2QyxLQUFLMHpDLFVBQ2hCLEdBQUluRSxFQUFNLENBQ04sSUFBSW41QixPQUFPeFIsRUFDUG14QyxFQUFnQkMsaUJBQWlCaDJDLEtBQUswd0MsV0FDdENxRixFQUFjcCtCLE9BQVNvK0IsRUFBY24rQixTQUNyQ3hCLEVBQU8sQ0FDSGdnQyxTQUFTTCxFQUFjcCtCLE1BQU8sSUFDOUJ5K0IsU0FBU0wsRUFBY24rQixPQUFRLE1BR3ZDMjNCLEVBQUsvUixnQkFBZ0JwbkIsS0FHdEIyNEIsRUFybkNzQixDQXNuQy9CLEdDdndDRixJQUFJLEdBQXdDLFdBQ3hDLElBQUl6c0MsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQWdLNUMsU0F0RzZCLFNBQVVHLEdBS25DLFNBQVNnekMsRUFBUXRzQyxHQUNiLElBQUl2RyxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FDN0IybEMsRUFBVTU3QixFQUFRNDdCLFFBOEJ0QixPQTdCSUEsR0FBWTU3QixFQUFRNUosUUFBV3dsQyxFQUFRNXNCLE1BQU04M0IsZ0JBQzdDbEwsRUFBUTVzQixNQUFNODNCLGNBQWdCLFFBTWxDcnRDLEVBQU1taUMsUUFBVUEsR0FBb0IsS0FLcENuaUMsRUFBTTh5QyxRQUFVLEtBS2hCOXlDLEVBQU1zL0IsS0FBTyxLQUtidC9CLEVBQU0reUMsYUFBZSxHQUNqQnhzQyxFQUFRdUQsU0FDUjlKLEVBQU04SixPQUFTdkQsRUFBUXVELFFBRXZCdkQsRUFBUTVKLFFBQ1JxRCxFQUFNbXZDLFVBQVU1b0MsRUFBUTVKLFFBRXJCcUQsRUErRFgsT0FuR0EsR0FBVTZ5QyxFQUFTaHpDLEdBeUNuQmd6QyxFQUFRajJDLFVBQVVNLGdCQUFrQixXQUNoQzBYLEdBQVdwWSxLQUFLMmxDLFNBQ2hCdGlDLEVBQU9qRCxVQUFVTSxnQkFBZ0JzQyxLQUFLaEQsT0FPMUNxMkMsRUFBUWoyQyxVQUFVbWtDLE9BQVMsV0FDdkIsT0FBT3ZrQyxLQUFLOGlDLE1BU2hCdVQsRUFBUWoyQyxVQUFVb04sT0FBUyxTQUFVRCxHQUM3QnZOLEtBQUs4aUMsTUFDTDFxQixHQUFXcFksS0FBSzJsQyxTQUVwQixJQUFLLElBQUl4a0MsRUFBSSxFQUFHVyxFQUFLOUIsS0FBS3UyQyxhQUFhcjFDLE9BQVFDLEVBQUlXLElBQU1YLEVBQ3JEdUUsRUFBYzFGLEtBQUt1MkMsYUFBYXAxQyxJQUVwQ25CLEtBQUt1MkMsYUFBYXIxQyxPQUFTLEVBQzNCbEIsS0FBSzhpQyxLQUFPdjFCLEVBQ1J2TixLQUFLOGlDLFFBQ1E5aUMsS0FBS3MyQyxRQUNadDJDLEtBQUtzMkMsUUFDTC9vQyxFQUFJMm1DLGdDQUNILzZCLFlBQVluWixLQUFLMmxDLFNBQ3BCM2xDLEtBQUtzTixTQUFXN0wsR0FDaEJ6QixLQUFLdTJDLGFBQWE5ekMsS0FBS3lDLEVBQU9xSSxFQUFLcW9DLEdBQXlCNTFDLEtBQUtzTixPQUFRdE4sT0FFN0V1TixFQUFJRCxXQVFaK29DLEVBQVFqMkMsVUFBVWtOLE9BQVMsU0FBVWtwQyxLQVVyQ0gsRUFBUWoyQyxVQUFVdXlDLFVBQVksU0FBVXh5QyxHQUNwQ0gsS0FBS3MyQyxRQUNpQixpQkFBWG4yQyxFQUFzQnNYLFNBQVN5M0IsZUFBZS91QyxHQUFVQSxHQUVoRWsyQyxFQXBHaUIsQ0FxRzFCLEdDL0pGLElBQUksR0FBd0MsV0FDeEMsSUFBSS96QyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBa1Y1QyxTQXZSaUMsU0FBVUcsR0FLdkMsU0FBU296QyxFQUFZem5DLEdBQ2pCLElBQUl4TCxFQUFReEQsS0FDUitKLEVBQVVpRixHQUE0QixJQUMxQ3hMLEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNLENBQ3RCMmxDLFFBQVNsdUIsU0FBU0MsY0FBYyxPQUNoQ3BLLE9BQVF2RCxFQUFRdUQsT0FDaEJuTixPQUFRNEosRUFBUTVKLFVBQ2RILE1BS0EwMkMsV0FBYWovQixTQUFTQyxjQUFjLE1BSzFDbFUsRUFBTW16QyxnQkFDb0IveEMsSUFBdEJtRixFQUFRNnNDLFdBQTBCN3NDLEVBQVE2c0MsVUFLOUNwekMsRUFBTXF6QyxlQUFpQnJ6QyxFQUFNbXpDLFdBSzdCbnpDLEVBQU1zekMsMEJBQStDbHlDLElBQXhCbUYsRUFBUWd0QyxZQUtyQ3Z6QyxFQUFNd3pDLGtCQUNzQnB5QyxJQUF4Qm1GLEVBQVFndEMsYUFBNEJodEMsRUFBUWd0QyxZQUMzQ3Z6QyxFQUFNd3pDLGVBQ1B4ekMsRUFBTW16QyxZQUFhLEdBRXZCLElBQUlqc0MsT0FBa0M5RixJQUF0Qm1GLEVBQVFXLFVBQTBCWCxFQUFRVyxVQUFZLGlCQUNsRXVzQyxPQUFnQ3J5QyxJQUFyQm1GLEVBQVFrdEMsU0FBeUJsdEMsRUFBUWt0QyxTQUFXLGVBQy9EQyxPQUE4Q3R5QyxJQUE1Qm1GLEVBQVFtdEMsZ0JBQ3hCbnRDLEVBQVFtdEMsZ0JBQ1J4c0MsRUFBWSxVQUNkeXNDLE9BQTBDdnlDLElBQTFCbUYsRUFBUW90QyxjQUE4QnB0QyxFQUFRb3RDLGNBQWdCLElBQzlFQyxPQUFrRHh5QyxJQUE5Qm1GLEVBQVFxdEMsa0JBQzFCcnRDLEVBQVFxdEMsa0JBQ1Ixc0MsRUFBWSxZQUNXLGlCQUFsQnlzQyxHQUtQM3pDLEVBQU02ekMsZUFBaUI1L0IsU0FBU0MsY0FBYyxRQUM5Q2xVLEVBQU02ekMsZUFBZUMsWUFBY0gsRUFDbkMzekMsRUFBTTZ6QyxlQUFlM3NDLFVBQVkwc0MsR0FHakM1ekMsRUFBTTZ6QyxlQUFpQkYsRUFFM0IsSUFBSUksT0FBMEIzeUMsSUFBbEJtRixFQUFRd3RDLE1BQXNCeHRDLEVBQVF3dEMsTUFBUSxJQUNyQyxpQkFBVkEsR0FLUC96QyxFQUFNZzBDLE9BQVMvL0IsU0FBU0MsY0FBYyxRQUN0Q2xVLEVBQU1nMEMsT0FBT0YsWUFBY0MsRUFDM0IvekMsRUFBTWcwQyxPQUFPOXNDLFVBQVl3c0MsR0FHekIxekMsRUFBTWcwQyxPQUFTRCxFQUVuQixJQUFJRSxFQUFjajBDLEVBQU13ekMsZUFBaUJ4ekMsRUFBTW16QyxXQUFhbnpDLEVBQU02ekMsZUFBaUI3ekMsRUFBTWcwQyxPQUt6RmgwQyxFQUFNazBDLGNBQWdCamdDLFNBQVNDLGNBQWMsVUFDN0NsVSxFQUFNazBDLGNBQWNDLGFBQWEsT0FBUSxVQUN6Q24wQyxFQUFNazBDLGNBQWNDLGFBQWEsZ0JBQWlCMTBDLFFBQVFPLEVBQU1tekMsYUFDaEVuekMsRUFBTWswQyxjQUFjRSxNQUFRWCxFQUM1Qnp6QyxFQUFNazBDLGNBQWN2K0IsWUFBWXMrQixHQUNoQ2owQyxFQUFNazBDLGNBQWM3ekMsaUJBQWlCLEVBQWlCTCxFQUFNcTBDLGFBQWF4eUMsS0FBSzdCLElBQVEsR0FDdEYsSUFBSXMwQyxFQUFhcHRDLHNCQUliZzZCLElBQ0NsaEMsRUFBTW16QyxZQUFjbnpDLEVBQU13ekMsYUFBZSxnQkFBd0IsS0FDakV4ekMsRUFBTXd6QyxhQUFlLEdBQUsscUJBQzNCclIsRUFBVW5pQyxFQUFNbWlDLFFBZXBCLE9BZEFBLEVBQVFqN0IsVUFBWW90QyxFQUNwQm5TLEVBQVF4c0IsWUFBWTNWLEVBQU1rMEMsZUFDMUIvUixFQUFReHNCLFlBQVkzVixFQUFNa3pDLFlBTTFCbHpDLEVBQU11MEMsc0JBQXdCLEdBSzlCdjBDLEVBQU1naUMsa0JBQW1CLEVBQ2xCaGlDLEVBdUtYLE9BcFJBLEdBQVVpekMsRUFBYXB6QyxHQXFIdkJvekMsRUFBWXIyQyxVQUFVNDNDLDJCQUE2QixTQUFVNXBDLEdBYXpELElBUkEsSUFBSTZwQyxFQUFTLEdBS1RDLEVBQXNCLEdBQ3RCbkIsR0FBYyxFQUNkdG9DLEVBQW1CTCxFQUFXSyxpQkFDekJ0TixFQUFJLEVBQUdXLEVBQUsyTSxFQUFpQnZOLE9BQVFDLEVBQUlXLElBQU1YLEVBQUcsQ0FDdkQsSUFBSXlMLEVBQWE2QixFQUFpQnROLEdBQ2xDLEdBQUt3TCxHQUFPQyxFQUFZd0IsRUFBV3ZCLFdBQW5DLENBR0EsSUFBSTdLLEVBQTZENEssRUFBZ0IsTUFBRWlCLFlBQ25GLEdBQUs3TCxFQUFMLENBR0EsSUFBSW0yQyxFQUFvQm4yQyxFQUFPbzJDLGtCQUMvQixHQUFLRCxFQUFMLENBR0EsSUFBSUUsRUFBZUYsRUFBa0IvcEMsR0FDckMsR0FBS2lxQyxFQUtMLEdBRkF0QixFQUNJQSxJQUF1RCxJQUF4Qy8wQyxFQUFPczJDLDZCQUN0QngxQyxNQUFNdUQsUUFBUWd5QyxHQUNkLElBQUssSUFBSTVwQixFQUFJLEVBQUdnRyxFQUFLNGpCLEVBQWFuM0MsT0FBUXV0QixFQUFJZ0csSUFBTWhHLEVBQzFDNHBCLEVBQWE1cEIsS0FBTXdwQixJQUNyQkMsRUFBb0J6MUMsS0FBSzQxQyxFQUFhNXBCLElBQ3RDd3BCLEVBQU9JLEVBQWE1cEIsS0FBTSxRQUs1QjRwQixLQUFnQkosSUFDbEJDLEVBQW9CejFDLEtBQUs0MUMsR0FDekJKLEVBQU9JLElBQWdCLE1BT25DLE9BSEtyNEMsS0FBSzgyQyxzQkFDTjkyQyxLQUFLdTRDLGVBQWV4QixHQUVqQm1CLEdBTVh6QixFQUFZcjJDLFVBQVVvNEMsZUFBaUIsU0FBVXBxQyxHQUM3QyxHQUFLQSxFQUFMLENBT0EsSUFBSWlxQyxFQUFlcjRDLEtBQUtnNEMsMkJBQTJCNXBDLEdBQy9DbEUsRUFBVW11QyxFQUFhbjNDLE9BQVMsRUFLcEMsR0FKSWxCLEtBQUt3bEMsa0JBQW9CdDdCLElBQ3pCbEssS0FBSzJsQyxRQUFRNXNCLE1BQU1vdEIsUUFBVWo4QixFQUFVLEdBQUssT0FDNUNsSyxLQUFLd2xDLGlCQUFtQnQ3QixJQUV4QjlJLEVBQU9pM0MsRUFBY3I0QyxLQUFLKzNDLHVCQUE5QixFL0Q3S0QsU0FBd0IxL0IsR0FDM0IsS0FBT0EsRUFBS29nQyxXQUNScGdDLEVBQUtDLFlBQVlELEVBQUtvZ0MsVytEOEt0QkMsQ0FBZTE0QyxLQUFLMDJDLFlBRXBCLElBQUssSUFBSXYxQyxFQUFJLEVBQUdXLEVBQUt1MkMsRUFBYW4zQyxPQUFRQyxFQUFJVyxJQUFNWCxFQUFHLENBQ25ELElBQUl3a0MsRUFBVWx1QixTQUFTQyxjQUFjLE1BQ3JDaXVCLEVBQVFnVCxVQUFZTixFQUFhbDNDLEdBQ2pDbkIsS0FBSzAyQyxXQUFXdjlCLFlBQVl3c0IsR0FFaEMzbEMsS0FBSyszQyxzQkFBd0JNLFFBdEJyQnI0QyxLQUFLd2xDLG1CQUNMeGxDLEtBQUsybEMsUUFBUTVzQixNQUFNb3RCLFFBQVUsT0FDN0JubUMsS0FBS3dsQyxrQkFBbUIsSUEwQnBDaVIsRUFBWXIyQyxVQUFVeTNDLGFBQWUsU0FBVTF6QyxHQUMzQ0EsRUFBTTlELGlCQUNOTCxLQUFLNDRDLGdCQUNMNTRDLEtBQUs2MkMsZUFBaUI3MkMsS0FBSzIyQyxZQUsvQkYsRUFBWXIyQyxVQUFVdzRDLGNBQWdCLFdBQ2xDNTRDLEtBQUsybEMsUUFBUWtULFVBQVVDLE9sQnpORixnQmtCME5qQjk0QyxLQUFLMjJDLFdBQ0w3K0IsR0FBWTlYLEtBQUtxM0MsZUFBZ0JyM0MsS0FBS3czQyxRQUd0QzEvQixHQUFZOVgsS0FBS3czQyxPQUFReDNDLEtBQUtxM0MsZ0JBRWxDcjNDLEtBQUsyMkMsWUFBYzMyQyxLQUFLMjJDLFdBQ3hCMzJDLEtBQUswM0MsY0FBY0MsYUFBYSxnQkFBaUIxMEMsUUFBUWpELEtBQUsyMkMsY0FPbEVGLEVBQVlyMkMsVUFBVTI0QyxlQUFpQixXQUNuQyxPQUFPLzRDLEtBQUtnM0MsY0FPaEJQLEVBQVlyMkMsVUFBVW00QyxlQUFpQixTQUFVeEIsR0FDekMvMkMsS0FBS2czQyxlQUFpQkQsSUFHMUIvMkMsS0FBS2czQyxhQUFlRCxFQUNwQi8yQyxLQUFLMmxDLFFBQVFrVCxVQUFVQyxPQUFPLG9CQUMxQjk0QyxLQUFLNjJDLGdCQUNMNzJDLEtBQUs0NEMsa0JBVWJuQyxFQUFZcjJDLFVBQVU0NEMsYUFBZSxTQUFVcEMsR0FDM0M1MkMsS0FBSzYyQyxlQUFpQkQsRUFDakI1MkMsS0FBS2czQyxjQUFnQmgzQyxLQUFLMjJDLGFBQWVDLEdBRzlDNTJDLEtBQUs0NEMsaUJBUVRuQyxFQUFZcjJDLFVBQVU2NEMsYUFBZSxXQUNqQyxPQUFPajVDLEtBQUsyMkMsWUFPaEJGLEVBQVlyMkMsVUFBVWtOLE9BQVMsU0FBVWtwQyxHQUNyQ3gyQyxLQUFLdzRDLGVBQWVoQyxFQUFTcG9DLGFBRTFCcW9DLEVBclJxQixDQXNSOUIsSUNqVkYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbjBDLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0FnTDVDLFNBbEk0QixTQUFVRyxHQUtsQyxTQUFTNjFDLEVBQU9scUMsR0FDWixJQUFJeEwsRUFBUXhELEtBQ1IrSixFQUFVaUYsR0FBNEIsR0FDMUN4TCxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTSxDQUN0QjJsQyxRQUFTbHVCLFNBQVNDLGNBQWMsT0FDaENwSyxPQUFRdkQsRUFBUXVELE9BQ2hCbk4sT0FBUTRKLEVBQVE1SixVQUNkSCxLQUNOLElBQUkwSyxPQUFrQzlGLElBQXRCbUYsRUFBUVcsVUFBMEJYLEVBQVFXLFVBQVksWUFDbEU2c0MsT0FBMEIzeUMsSUFBbEJtRixFQUFRd3RDLE1BQXNCeHRDLEVBQVF3dEMsTUFBUSxJQUN0RDRCLE9BQWdEdjBDLElBQTdCbUYsRUFBUW92QyxpQkFDekJwdkMsRUFBUW92QyxpQkFDUixhQUtOMzFDLEVBQU1nMEMsT0FBUyxLQUNNLGlCQUFWRCxHQUNQL3pDLEVBQU1nMEMsT0FBUy8vQixTQUFTQyxjQUFjLFFBQ3RDbFUsRUFBTWcwQyxPQUFPOXNDLFVBQVl5dUMsRUFDekIzMUMsRUFBTWcwQyxPQUFPRixZQUFjQyxJQUczQi96QyxFQUFNZzBDLE9BQVNELEVBQ2YvekMsRUFBTWcwQyxPQUFPcUIsVUFBVXg0QixJQUFJODRCLElBRS9CLElBQUlsQyxFQUFXbHRDLEVBQVFrdEMsU0FBV2x0QyxFQUFRa3RDLFNBQVcsaUJBQ2pEMUwsRUFBUzl6QixTQUFTQyxjQUFjLFVBQ3BDNnpCLEVBQU83Z0MsVUFBWUEsRUFBWSxTQUMvQjZnQyxFQUFPb00sYUFBYSxPQUFRLFVBQzVCcE0sRUFBT3FNLE1BQVFYLEVBQ2YxTCxFQUFPcHlCLFlBQVkzVixFQUFNZzBDLFFBQ3pCak0sRUFBTzFuQyxpQkFBaUIsRUFBaUJMLEVBQU1xMEMsYUFBYXh5QyxLQUFLN0IsSUFBUSxHQUN6RSxJQUFJczBDLEVBQWFwdEMsc0JBQTZDZzZCLEdBQzFEaUIsRUFBVW5pQyxFQUFNbWlDLFFBc0JwQixPQXJCQUEsRUFBUWo3QixVQUFZb3RDLEVBQ3BCblMsRUFBUXhzQixZQUFZb3lCLEdBQ3BCL25DLEVBQU00MUMsZ0JBQWtCcnZDLEVBQVFzdkMsV0FBYXR2QyxFQUFRc3ZDLGdCQUFhejBDLEVBS2xFcEIsRUFBTTgxQyxlQUFpQzEwQyxJQUFyQm1GLEVBQVEreEIsU0FBeUIveEIsRUFBUSt4QixTQUFXLElBS3RFdDRCLEVBQU0rMUMsZUFBaUMzMEMsSUFBckJtRixFQUFReXZDLFVBQXlCenZDLEVBQVF5dkMsU0FLM0RoMkMsRUFBTWkyQyxlQUFZNzBDLEVBQ2RwQixFQUFNKzFDLFdBQ04vMUMsRUFBTW1pQyxRQUFRa1QsVUFBVXg0QixJQUFJb2tCLElBRXpCamhDLEVBa0VYLE9BL0hBLEdBQVUwMUMsRUFBUTcxQyxHQW1FbEI2MUMsRUFBTzk0QyxVQUFVeTNDLGFBQWUsU0FBVTF6QyxHQUN0Q0EsRUFBTTlELHNCQUN1QnVFLElBQXpCNUUsS0FBS281QyxnQkFDTHA1QyxLQUFLbzVDLGtCQUdMcDVDLEtBQUswNUMsZUFNYlIsRUFBTzk0QyxVQUFVczVDLFlBQWMsV0FDM0IsSUFDSW5LLEVBRE12dkMsS0FBS3VrQyxTQUNBbVAsVUFDZixHQUFLbkUsRUFBTCxDQUtBLElBQUlwNUIsRUFBV281QixFQUFLdFUsbUJBQ0hyMkIsSUFBYnVSLElBQ0luVyxLQUFLczVDLFVBQVksR0FBS25qQyxHQUFZLEVBQUl6TixLQUFLaUIsS0FBUSxFQUNuRDRsQyxFQUFLcm5CLFFBQVEsQ0FDVC9SLFNBQVUsRUFDVjJsQixTQUFVOTdCLEtBQUtzNUMsVUFDZnZkLE9BQVExUSxLQUlaa2tCLEVBQUtwVixZQUFZLE1BUzdCK2UsRUFBTzk0QyxVQUFVa04sT0FBUyxTQUFVa3BDLEdBQ2hDLElBQUlwb0MsRUFBYW9vQyxFQUFTcG9DLFdBQzFCLEdBQUtBLEVBQUwsQ0FHQSxJQUFJK0gsRUFBVy9ILEVBQVd2QixVQUFVc0osU0FDcEMsR0FBSUEsR0FBWW5XLEtBQUt5NUMsVUFBVyxDQUM1QixJQUFJN21DLEVBQVksVUFBWXVELEVBQVcsT0FDdkMsR0FBSW5XLEtBQUt1NUMsVUFBVyxDQUNoQixJQUFJaitCLEVBQVd0YixLQUFLMmxDLFFBQVFrVCxVQUFVdjlCLFNBQVNtcEIsSUFDMUNucEIsR0FBeUIsSUFBYm5GLEVBR1JtRixHQUF5QixJQUFibkYsR0FDakJuVyxLQUFLMmxDLFFBQVFrVCxVQUFVeFIsT0FBTzVDLElBSDlCemtDLEtBQUsybEMsUUFBUWtULFVBQVV4NEIsSUFBSW9rQixJQU1uQ3prQyxLQUFLdzNDLE9BQU96K0IsTUFBTW5HLFVBQVlBLEVBRWxDNVMsS0FBS3k1QyxVQUFZdGpDLElBRWQraUMsRUFoSWdCLENBaUl6QixJQy9LRixJQUFJLEdBQXdDLFdBQ3hDLElBQUk1MkMsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQTZJNUMsU0EvRjBCLFNBQVVHLEdBS2hDLFNBQVNzMkMsRUFBSzNxQyxHQUNWLElBQUl4TCxFQUFReEQsS0FDUitKLEVBQVVpRixHQUE0QixHQUMxQ3hMLEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNLENBQ3RCMmxDLFFBQVNsdUIsU0FBU0MsY0FBYyxPQUNoQ3ZYLE9BQVE0SixFQUFRNUosVUFDZEgsS0FDTixJQUFJMEssT0FBa0M5RixJQUF0Qm1GLEVBQVFXLFVBQTBCWCxFQUFRVyxVQUFZLFVBQ2xFdXhCLE9BQTBCcjNCLElBQWxCbUYsRUFBUWt5QixNQUFzQmx5QixFQUFRa3lCLE1BQVEsRUFDdEQyZCxPQUE4Q2gxQyxJQUE1Qm1GLEVBQVE2dkMsZ0JBQ3hCN3ZDLEVBQVE2dkMsZ0JBQ1JsdkMsRUFBWSxNQUNkbXZDLE9BQWdEajFDLElBQTdCbUYsRUFBUTh2QyxpQkFDekI5dkMsRUFBUTh2QyxpQkFDUm52QyxFQUFZLE9BQ2RvdkMsT0FBc0NsMUMsSUFBeEJtRixFQUFRK3ZDLFlBQTRCL3ZDLEVBQVErdkMsWUFBYyxJQUN4RUMsT0FBd0NuMUMsSUFBekJtRixFQUFRZ3dDLGFBQTZCaHdDLEVBQVFnd0MsYUFBZSxJQUMzRUMsT0FBNENwMUMsSUFBM0JtRixFQUFRaXdDLGVBQStCandDLEVBQVFpd0MsZUFBaUIsVUFDakZDLE9BQThDcjFDLElBQTVCbUYsRUFBUWt3QyxnQkFDeEJsd0MsRUFBUWt3QyxnQkFDUixXQUNGQyxFQUFZemlDLFNBQVNDLGNBQWMsVUFDdkN3aUMsRUFBVXh2QyxVQUFZa3ZDLEVBQ3RCTSxFQUFVdkMsYUFBYSxPQUFRLFVBQy9CdUMsRUFBVXRDLE1BQVFvQyxFQUNsQkUsRUFBVS9nQyxZQUFtQyxpQkFBaEIyZ0MsRUFDdkJyaUMsU0FBUzBpQyxlQUFlTCxHQUN4QkEsR0FDTkksRUFBVXIyQyxpQkFBaUIsRUFBaUJMLEVBQU1xMEMsYUFBYXh5QyxLQUFLN0IsRUFBT3k0QixJQUFRLEdBQ25GLElBQUltZSxFQUFhM2lDLFNBQVNDLGNBQWMsVUFDeEMwaUMsRUFBVzF2QyxVQUFZbXZDLEVBQ3ZCTyxFQUFXekMsYUFBYSxPQUFRLFVBQ2hDeUMsRUFBV3hDLE1BQVFxQyxFQUNuQkcsRUFBV2poQyxZQUFvQyxpQkFBakI0Z0MsRUFDeEJ0aUMsU0FBUzBpQyxlQUFlSixHQUN4QkEsR0FDTkssRUFBV3YyQyxpQkFBaUIsRUFBaUJMLEVBQU1xMEMsYUFBYXh5QyxLQUFLN0IsR0FBUXk0QixJQUFRLEdBQ3JGLElBQUk2YixFQUFhcHRDLHNCQUE2Q2c2QixHQUMxRGlCLEVBQVVuaUMsRUFBTW1pQyxRQVNwQixPQVJBQSxFQUFRajdCLFVBQVlvdEMsRUFDcEJuUyxFQUFReHNCLFlBQVkrZ0MsR0FDcEJ2VSxFQUFReHNCLFlBQVlpaEMsR0FLcEI1MkMsRUFBTTgxQyxlQUFpQzEwQyxJQUFyQm1GLEVBQVEreEIsU0FBeUIveEIsRUFBUSt4QixTQUFXLElBQy9EdDRCLEVBeUNYLE9BNUZBLEdBQVVtMkMsRUFBTXQyQyxHQTBEaEJzMkMsRUFBS3Y1QyxVQUFVeTNDLGFBQWUsU0FBVTViLEVBQU85M0IsR0FDM0NBLEVBQU05RCxpQkFDTkwsS0FBS3E2QyxhQUFhcGUsSUFNdEIwZCxFQUFLdjVDLFVBQVVpNkMsYUFBZSxTQUFVcGUsR0FDcEMsSUFDSXNULEVBRE12dkMsS0FBS3VrQyxTQUNBbVAsVUFDZixHQUFLbkUsRUFBTCxDQUtBLElBQUkrSyxFQUFjL0ssRUFBS3hVLFVBQ3ZCLFFBQW9CbjJCLElBQWhCMDFDLEVBQTJCLENBQzNCLElBQUlDLEVBQVVoTCxFQUFLN04sbUJBQW1CNFksRUFBY3JlLEdBQ2hEajhCLEtBQUtzNUMsVUFBWSxHQUNiL0osRUFBS25VLGdCQUNMbVUsRUFBS2xULG1CQUVUa1QsRUFBS3JuQixRQUFRLENBQ1RuYixLQUFNd3RDLEVBQ056ZSxTQUFVOTdCLEtBQUtzNUMsVUFDZnZkLE9BQVExUSxNQUlaa2tCLEVBQUtqVixRQUFRaWdCLE1BSWxCWixFQTdGYyxDQThGdkIsSUN0SUYsR0FDWSxTQ1BaLElBQUksR0FBd0MsV0FDeEMsSUFBSXIzQyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBc0pyQyxTQUFTczNDLEdBQVlqTCxFQUFNdFQsRUFBT3ZPLEVBQVkwVCxHQUNqRCxJQUFJa1osRUFBYy9LLEVBQUt4VSxVQUN2QixRQUFvQm4yQixJQUFoQjAxQyxFQUFKLENBR0EsSUFBSUMsRUFBVWhMLEVBQUs3TixtQkFBbUI0WSxFQUFjcmUsR0FDaEQwRSxFQUFnQjRPLEVBQUt2VCxxQkFBcUJ1ZSxHQUMxQ2hMLEVBQUtuVSxnQkFDTG1VLEVBQUtsVCxtQkFFVGtULEVBQUtybkIsUUFBUSxDQUNUcGIsV0FBWTZ6QixFQUNacFQsT0FBUUcsRUFDUm9PLGNBQTJCbDNCLElBQWpCdzhCLEVBQTZCQSxFQUFlLElBQ3REckYsT0FBUTFRLE1BR2hCLFNBbkhpQyxTQUFVaG9CLEdBS3ZDLFNBQVNvM0MsRUFBWXpyQyxHQUNqQixJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBc0JqQyxPQWxCQXdELEVBQU1vQyxHQUlOcEMsRUFBTXNDLEtBSU50QyxFQUFNd0MsR0FDRmdKLEdBQWVBLEVBQVl4SyxjQUMzQmhCLEVBQU1nQixZQUFjd0ssRUFBWXhLLGFBTXBDaEIsRUFBTXMvQixLQUFPLEtBQ2J0L0IsRUFBTWszQyxXQUFVLEdBQ1RsM0MsRUE4Q1gsT0F6RUEsR0FBVWkzQyxFQUFhcDNDLEdBbUN2Qm8zQyxFQUFZcjZDLFVBQVV3MEMsVUFBWSxXQUM5QixPQUErQjUwQyxLQUFLb0gsSUFBSSxLQU81Q3F6QyxFQUFZcjZDLFVBQVVta0MsT0FBUyxXQUMzQixPQUFPdmtDLEtBQUs4aUMsTUFRaEIyWCxFQUFZcjZDLFVBQVVvRSxZQUFjLFNBQVUrdkMsR0FDMUMsT0FBTyxHQVFYa0csRUFBWXI2QyxVQUFVczZDLFVBQVksU0FBVUMsR0FDeEMzNkMsS0FBSzZILElBQUksR0FBNEI4eUMsSUFRekNGLEVBQVlyNkMsVUFBVW9OLE9BQVMsU0FBVUQsR0FDckN2TixLQUFLOGlDLEtBQU92MUIsR0FFVGt0QyxFQTFFcUIsQ0EyRTlCLEdDL0hGLElBQUksR0FBd0MsV0FDeEMsSUFBSW40QyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBd0U1QyxTQTFDcUMsU0FBVUcsR0FLM0MsU0FBU3UzQyxFQUFnQjVyQyxHQUNyQixJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBQzdCK0osRUFBVWlGLEdBQTRCLEdBVzFDLE9BTkF4TCxFQUFNcTNDLE9BQVM5d0MsRUFBUWt5QixNQUFRbHlCLEVBQVFreUIsTUFBUSxFQUsvQ3o0QixFQUFNODFDLGVBQWlDMTBDLElBQXJCbUYsRUFBUSt4QixTQUF5Qi94QixFQUFRK3hCLFNBQVcsSUFDL0R0NEIsRUFzQlgsT0F2Q0EsR0FBVW8zQyxFQUFpQnYzQyxHQXlCM0J1M0MsRUFBZ0J4NkMsVUFBVW9FLFlBQWMsU0FBVSt2QyxHQUM5QyxJQUFJdUcsR0FBWSxFQUNoQixHQUFJdkcsRUFBZ0J4MEMsTUFBUSxZQUE4QixDQUN0RCxJQUFJdTBDLEVBQTBDQyxFQUE2QixjQUN2RWhuQyxFQUFNZ25DLEVBQWdCaG5DLElBQ3RCZ2dCLEVBQVNnbkIsRUFBZ0IvakMsV0FDekJ5ckIsRUFBUXFZLEVBQWF5RyxVQUFZLzZDLEtBQUs2NkMsT0FBUzc2QyxLQUFLNjZDLE9BRXhETCxHQURXanRDLEVBQUltbUMsVUFDR3pYLEVBQU8xTyxFQUFRdnRCLEtBQUtzNUMsV0FDdENoRixFQUFhajBDLGlCQUNieTZDLEdBQVksRUFFaEIsT0FBUUEsR0FFTEYsRUF4Q3lCLENBeUNsQyxJQ3ZFRixJQUFJLEdBQXdDLFdBQ3hDLElBQUl0NEMsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQXFOckMsU0FBUyxHQUFTMnRDLEdBSXJCLElBSEEsSUFBSTN2QyxFQUFTMnZDLEVBQWMzdkMsT0FDdkI0cUMsRUFBVSxFQUNWQyxFQUFVLEVBQ0w1cUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFRQyxJQUN4QjJxQyxHQUFXK0UsRUFBYzF2QyxHQUFHMnFDLFFBQzVCQyxHQUFXOEUsRUFBYzF2QyxHQUFHNHFDLFFBRWhDLE1BQU8sQ0FBQ0QsRUFBVTVxQyxFQUFRNnFDLEVBQVU3cUMsR0FheEMsU0FoTHdDLFNBQVVtQyxHQUs5QyxTQUFTMjNDLEVBQW1CaHNDLEdBQ3hCLElBQUl4TCxFQUFReEQsS0FDUitKLEVBQVVpRixHQUE0QixHQWlDMUMsT0FoQ0F4TCxFQUFRSCxFQUFPTCxLQUFLaEQsS0FDeUMsSUFBY0EsS0FDdkUrSixFQUFRa3hDLGtCQUNSejNDLEVBQU15M0MsZ0JBQWtCbHhDLEVBQVFreEMsaUJBRWhDbHhDLEVBQVFteEMsa0JBQ1IxM0MsRUFBTTAzQyxnQkFBa0JueEMsRUFBUW14QyxpQkFFaENueEMsRUFBUW94QyxrQkFDUjMzQyxFQUFNMjNDLGdCQUFrQnB4QyxFQUFRb3hDLGlCQUVoQ3B4QyxFQUFRcXhDLGdCQUNSNTNDLEVBQU00M0MsY0FBZ0JyeEMsRUFBUXF4QyxlQUU5QnJ4QyxFQUFRc3hDLFdBQ1I3M0MsRUFBTTYzQyxTQUFXdHhDLEVBQVFzeEMsVUFNN0I3M0MsRUFBTTgzQyx3QkFBeUIsRUFLL0I5M0MsRUFBTSszQyxpQkFBbUIsR0FLekIvM0MsRUFBTWc0QyxlQUFpQixHQUNoQmg0QyxFQTZHWCxPQXBKQSxHQUFVdzNDLEVBQW9CMzNDLEdBK0M5QjIzQyxFQUFtQjU2QyxVQUFVcTdDLGdCQUFrQixXQUMzQyxPQUFPejdDLEtBQUt3N0MsZUFBZXQ2QyxRQVEvQjg1QyxFQUFtQjU2QyxVQUFVNjZDLGdCQUFrQixTQUFVMUcsR0FDckQsT0FBTyxHQU9YeUcsRUFBbUI1NkMsVUFBVTg2QyxnQkFBa0IsU0FBVTNHLEtBU3pEeUcsRUFBbUI1NkMsVUFBVW9FLFlBQWMsU0FBVSt2QyxHQUNqRCxJQUFLQSxFQUFnQjVMLGNBQ2pCLE9BQU8sRUFFWCxJQUFJbVMsR0FBWSxFQUVoQixHQURBOTZDLEtBQUswN0MsdUJBQXVCbkgsR0FDeEJ2MEMsS0FBS3M3Qyx3QkFDTCxHQUFJL0csRUFBZ0J4MEMsTUFBUSxlQUN4QkMsS0FBS2s3QyxnQkFBZ0IzRyxHQUVyQkEsRUFBZ0I1TCxjQUFjdG9DLHNCQUU3QixHQUFJazBDLEVBQWdCeDBDLE1BQVEsYUFBK0IsQ0FDNUQsSUFBSTQ3QyxFQUFZMzdDLEtBQUtvN0MsY0FBYzdHLEdBQ25DdjBDLEtBQUtzN0MsdUJBQ0RLLEdBQWEzN0MsS0FBS3c3QyxlQUFldDZDLE9BQVMsUUFJbEQsR0FBSXF6QyxFQUFnQngwQyxNQUFRLGVBQWlDLENBQ3pELElBQUk2N0MsRUFBVTU3QyxLQUFLaTdDLGdCQUFnQjFHLEdBQ25DdjBDLEtBQUtzN0MsdUJBQXlCTSxFQUM5QmQsRUFBWTk2QyxLQUFLcTdDLFNBQVNPLFFBRXJCckgsRUFBZ0J4MEMsTUFBUSxnQkFDN0JDLEtBQUttN0MsZ0JBQWdCNUcsR0FHN0IsT0FBUXVHLEdBT1pFLEVBQW1CNTZDLFVBQVUrNkMsZ0JBQWtCLFNBQVU1RyxLQU96RHlHLEVBQW1CNTZDLFVBQVVnN0MsY0FBZ0IsU0FBVTdHLEdBQ25ELE9BQU8sR0FRWHlHLEVBQW1CNTZDLFVBQVVpN0MsU0FBVyxTQUFVTyxHQUM5QyxPQUFPQSxHQU1YWixFQUFtQjU2QyxVQUFVczdDLHVCQUF5QixTQUFVbkgsR0FDNUQsR0FxQ1IsU0FBZ0NBLEdBQzVCLElBQUl4MEMsRUFBT3cwQyxFQUFnQngwQyxLQUMzQixPQUFRQSxJQUFTLGdCQUNiQSxJQUFTLGdCQUNUQSxJQUFTLGFBekNMODdDLENBQXVCdEgsR0FBa0IsQ0FDekMsSUFBSXA2QixFQUFVbzZCLEVBQWdCNUwsY0FDMUJWLEVBQUs5dEIsRUFBUWl4QixVQUFVbjdCLFdBQ3ZCc2tDLEVBQWdCeDBDLE1BQVEsb0JBQ2pCQyxLQUFLdTdDLGlCQUFpQnRULElBRXhCc00sRUFBZ0J4MEMsTUFBUSxnQkFHeEJrb0MsS0FBTWpvQyxLQUFLdTdDLG9CQUZoQnY3QyxLQUFLdTdDLGlCQUFpQnRULEdBQU05dEIsR0FNaENuYSxLQUFLdzdDLGVBQWlCajVDLEVBQVV2QyxLQUFLdTdDLG9CQUd0Q1AsRUFySjRCLENBc0pyQyxJQzlMSyxTQUFTLEdBQUk5ZixHQUNoQixJQUFJNGdCLEVBQWEvNUMsVUFLakIsT0FBTyxTQUFVb0MsR0FFYixJQURBLElBQUk0M0MsR0FBTyxFQUNGNTZDLEVBQUksRUFBR1csRUFBS2c2QyxFQUFXNTZDLE9BQVFDLEVBQUlXLElBQ3hDaTZDLEVBQU9BLEdBQVFELEVBQVczNkMsR0FBR2dELE1BRGlCaEQsR0FNbEQsT0FBTzQ2QyxHQVdSLElBY0lDLEdBQW1CLFNBQVV6SCxHQUNwQyxJQUFJNUwsRUFBb0U0TCxFQUE2QixjQUNyRyxPQUFRNUwsRUFBY3NULFVBQ2hCdFQsRUFBY3VULFNBQVd2VCxFQUFjd1QsVUFDekN4VCxFQUFjb1MsVUFtQlhxQixHQUFvQixTQUFVajRDLEdBQ3JDLE9BQU9BLEVBQU1vSixJQUFJa21DLG1CQUFtQjRJLGFBQWEsYUFWbEMsU0FBVWw0QyxHQUN6QixPQUFPQSxFQUFNaEUsT0FBT3N6QyxtQkFBbUJuNEIsU0FBUzdELFNBQVM2a0MsZUFVbkQsQ0FBTW40QyxJQVVMbzRDLEdBQVMvNkMsRUFvQlRnN0MsR0FBb0IsU0FBVWpJLEdBQ3JDLElBQUk1TCxFQUEyQzRMLEVBQTZCLGNBQzVFLE9BQStCLEdBQXhCNUwsRUFBYzRDLFVBQWlCeDVCLElBQVUsSUFBTzQyQixFQUFjd1QsVUFpRDlETSxHQUFpQixTQUFVbEksR0FDbEMsSUFBSTVMLEVBQW9FNEwsRUFBNkIsY0FDckcsT0FBUzVMLEVBQWNzVCxVQUNqQnRULEVBQWN1VCxTQUFXdlQsRUFBY3dULFdBQ3hDeFQsRUFBY29TLFVBeUJaMkIsR0FBZSxTQUFVbkksR0FDaEMsSUFBSTVMLEVBQW9FNEwsRUFBNkIsY0FDckcsT0FBUzVMLEVBQWNzVCxVQUNqQnRULEVBQWN1VCxTQUFXdlQsRUFBY3dULFVBQ3pDeFQsRUFBY29TLFVBVVg0QixHQUFvQixTQUFVcEksR0FDckMsSUFDSXFJLEVBRG9FckksRUFBNkIsY0FDM0MsT0FBRXFJLFFBQzVELE1BQW1CLFVBQVpBLEdBQW1DLFdBQVpBLEdBQW9DLGFBQVpBLEdBUy9DQyxHQUFZLFNBQVV0SSxHQUM3QixJQUFJdkosRUFBbUUsRUFBa0JyQyxjQUd6RixPQUZBLE9BQXdCL2pDLElBQWpCb21DLEVBQTRCLElBRUEsU0FBNUJBLEVBQWE4UixhQXFDYkMsR0FBZ0IsU0FBVXhJLEdBQ2pDLElBQUl2SixFQUFtRSxFQUFrQnJDLGNBRXpGLE9BREEsT0FBd0IvakMsSUFBakJvbUMsRUFBNEIsSUFDNUJBLEVBQWFnUyxXQUFxQyxJQUF4QmhTLEVBQWFPLFFDdFE5QyxHQUF3QyxXQUN4QyxJQUFJanBDLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0F5TDVDLFNBcEo2QixTQUFVRyxHQUtuQyxTQUFTNDVDLEVBQVFqdUMsR0FDYixJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU0sQ0FDMUJxN0MsU0FBVSxLQUNScjdDLEtBQ0YrSixFQUFVaUYsR0FBNEIsR0FLMUN4TCxFQUFNMDVDLFNBQVduekMsRUFBUW96QyxRQUl6QjM1QyxFQUFNNDVDLGFBQWUsS0FJckI1NUMsRUFBTTY1QyxtQkFJTjc1QyxFQUFNODVDLFVBQVcsRUFDakIsSUFBSUMsRUFBWXh6QyxFQUFRd3pDLFVBQ2xCeHpDLEVBQVF3ekMsVUFDUixHQUFJZCxHQUFnQk0sSUFhMUIsT0FSQXY1QyxFQUFNZzZDLFdBQWF6ekMsRUFBUTB6QyxZQUNyQixHQUFJckIsR0FBbUJtQixHQUN2QkEsRUFLTi81QyxFQUFNazZDLFlBQWEsRUFDWmw2QyxFQXdHWCxPQWpKQSxHQUFVeTVDLEVBQVM1NUMsR0ErQ25CNDVDLEVBQVE3OEMsVUFBVTg2QyxnQkFBa0IsU0FBVTNHLEdBQ3JDdjBDLEtBQUtzOUMsV0FDTnQ5QyxLQUFLczlDLFVBQVcsRUFDaEJ0OUMsS0FBS3VrQyxTQUFTbVAsVUFBVXBTLG9CQUU1QixJeEQ0TGM5d0IsRUFBWWdkLEV3RDVMdEJndUIsRUFBaUJ4N0MsS0FBS3c3QyxlQUN0Qm1DLEVBQVcsR0FBcUJuQyxHQUNwQyxHQUFJQSxFQUFldDZDLFFBQVVsQixLQUFLcTlDLG9CQUk5QixHQUhJcjlDLEtBQUtrOUMsVUFDTGw5QyxLQUFLazlDLFNBQVNVLE9BQU9ELEVBQVMsR0FBSUEsRUFBUyxJQUUzQzM5QyxLQUFLbzlDLGFBQWMsQ0FDbkIsSUFBSW5oQixFQUFRLENBQ1JqOEIsS0FBS285QyxhQUFhLEdBQUtPLEVBQVMsR0FDaENBLEVBQVMsR0FBSzM5QyxLQUFLbzlDLGFBQWEsSUFHaEM3TixFQURNZ0YsRUFBZ0JobkMsSUFDWG1tQyxVeERnTFRsakMsRXdEL0tVeXJCLEV4RCtLRXpPLEV3RC9LSytoQixFQUFLdHJCLGdCeERnTHhDelQsRUFBVyxJQUFNZ2QsRUFDakJoZCxFQUFXLElBQU1nZCxFd0RoTEwsR0FBaUJ5TyxFQUFPc1QsRUFBS3RVLGVBQzdCc1UsRUFBS2hQLHFCQUFxQnRFLFNBR3pCajhCLEtBQUtrOUMsVUFHVmw5QyxLQUFLazlDLFNBQVNXLFFBRWxCNzlDLEtBQUtvOUMsYUFBZU8sRUFDcEIzOUMsS0FBS3E5QyxtQkFBcUI3QixFQUFldDZDLE9BQ3pDcXpDLEVBQWdCNUwsY0FBY3RvQyxrQkFPbEM0OEMsRUFBUTc4QyxVQUFVZzdDLGNBQWdCLFNBQVU3RyxHQUN4QyxJQUFJaG5DLEVBQU1nbkMsRUFBZ0JobkMsSUFDdEJnaUMsRUFBT2hpQyxFQUFJbW1DLFVBQ2YsR0FBbUMsSUFBL0IxekMsS0FBS3c3QyxlQUFldDZDLE9BQWMsQ0FDbEMsSUFBS2xCLEtBQUswOUMsWUFBYzE5QyxLQUFLazlDLFVBQVlsOUMsS0FBS2s5QyxTQUFTam9DLE1BQU8sQ0FDMUQsSUFBSTZvQyxFQUFXOTlDLEtBQUtrOUMsU0FBUzk5QixjQUN6QmxNLEVBQVFsVCxLQUFLazlDLFNBQVNhLFdBQ3RCN25DLEVBQVNxNUIsRUFBS3ZVLG9CQUNkZ2pCLEVBQVd6d0MsRUFBSXltQywrQkFBK0I5OUIsR0FDOUNzWSxFQUFPamhCLEVBQUlzbEMsK0JBQStCLENBQzFDbUwsRUFBUyxHQUFLRixFQUFXcDFDLEtBQUs0SyxJQUFJSixHQUNsQzhxQyxFQUFTLEdBQUtGLEVBQVdwMUMsS0FBSzJLLElBQUlILEtBRXRDcThCLEVBQUsvVCxnQkFBZ0IsQ0FDakJ0bEIsT0FBUXE1QixFQUFLelAscUJBQXFCdFIsR0FDbENzTixTQUFVLElBQ1ZDLE9BQVExUSxLQU9oQixPQUpJcnJCLEtBQUtzOUMsV0FDTHQ5QyxLQUFLczlDLFVBQVcsRUFDaEIvTixFQUFLaE8sbUJBRUYsRUFTUCxPQU5JdmhDLEtBQUtrOUMsVUFHTGw5QyxLQUFLazlDLFNBQVNXLFFBRWxCNzlDLEtBQUtvOUMsYUFBZSxNQUNiLEdBUWZILEVBQVE3OEMsVUFBVTY2QyxnQkFBa0IsU0FBVTFHLEdBQzFDLEdBQUl2MEMsS0FBS3c3QyxlQUFldDZDLE9BQVMsR0FBS2xCLEtBQUt3OUMsV0FBV2pKLEdBQWtCLENBQ3BFLElBQ0loRixFQURNZ0YsRUFBZ0JobkMsSUFDWG1tQyxVQVlmLE9BWEExekMsS0FBS285QyxhQUFlLEtBRWhCN04sRUFBS25VLGdCQUNMbVUsRUFBS2xULG1CQUVMcjhCLEtBQUtrOUMsVUFDTGw5QyxLQUFLazlDLFNBQVNXLFFBSWxCNzlDLEtBQUswOUMsV0FBYTE5QyxLQUFLdzdDLGVBQWV0NkMsT0FBUyxHQUN4QyxFQUdQLE9BQU8sR0FHUis3QyxFQWxKaUIsQ0FtSjFCZ0IsSUN4TEYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJMzdDLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0E2SDVDLFNBdEZnQyxTQUFVRyxHQUt0QyxTQUFTNjZDLEVBQVdsdkMsR0FDaEIsSUFBSXhMLEVBQVF4RCxLQUNSK0osRUFBVWlGLEdBQTRCLEdBbUIxQyxPQWxCQXhMLEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNLENBQ3RCcTdDLFNBQVUsS0FDUnI3QyxNQUtBdzlDLFdBQWF6ekMsRUFBUXd6QyxVQUFZeHpDLEVBQVF3ekMsVUFBWXZCLEdBSzNEeDRDLEVBQU0yNkMsZ0JBQWF2NUMsRUFLbkJwQixFQUFNODFDLGVBQWlDMTBDLElBQXJCbUYsRUFBUSt4QixTQUF5Qi94QixFQUFRK3hCLFNBQVcsSUFDL0R0NEIsRUEwRFgsT0FuRkEsR0FBVTA2QyxFQUFZNzZDLEdBK0J0QjY2QyxFQUFXOTlDLFVBQVU4NkMsZ0JBQWtCLFNBQVUzRyxHQUM3QyxHQUFLc0ksR0FBVXRJLEdBQWYsQ0FHQSxJQUFJaG5DLEVBQU1nbkMsRUFBZ0JobkMsSUFDdEJnaUMsRUFBT2hpQyxFQUFJbW1DLFVBQ2YsR0FBSW5FLEVBQUs1UixpQkFBaUJ4bkIsV0FBYStVLEdBQXZDLENBR0EsSUFBSTlVLEVBQU83SSxFQUFJa08sVUFDWHpHLEVBQVN1L0IsRUFBZ0J0bUMsTUFDekIrckIsRUFBUXR4QixLQUFLbVgsTUFBTXpKLEVBQUssR0FBSyxFQUFJcEIsRUFBTyxHQUFJQSxFQUFPLEdBQUtvQixFQUFLLEdBQUssR0FDdEUsUUFBd0J4UixJQUFwQjVFLEtBQUttK0MsV0FBMEIsQ0FDL0IsSUFBSWxpQixFQUFRakMsRUFBUWg2QixLQUFLbStDLFdBQ3pCNU8sRUFBS3pPLHdCQUF3QjdFLEdBRWpDajhCLEtBQUttK0MsV0FBYW5rQixLQU90QmtrQixFQUFXOTlDLFVBQVVnN0MsY0FBZ0IsU0FBVTdHLEdBQzNDLE9BQUtzSSxHQUFVdEksS0FHTEEsRUFBZ0JobkMsSUFDWG1tQyxVQUNWblMsZUFBZXZoQyxLQUFLczVDLFlBQ2xCLElBT1g0RSxFQUFXOTlDLFVBQVU2NkMsZ0JBQWtCLFNBQVUxRyxHQUM3QyxTQUFLc0ksR0FBVXRJLEtBR1hpSSxHQUFrQmpJLEtBQ2xCdjBDLEtBQUt3OUMsV0FBV2pKLEtBQ05BLEVBQWdCaG5DLElBQ3RCbW1DLFVBQVVwUyxtQkFDZHRoQyxLQUFLbStDLGdCQUFhdjVDLEVBQ1gsS0FNUnM1QyxFQXBGb0IsQ0FxRjdCRCxJQ3pIRixJQUFJLEdBQXdDLFdBQ3hDLElBQUkzN0MsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQWtJNUMsU0FqSCtCLFNBQVVHLEdBS3JDLFNBQVMrNkMsRUFBVTF6QyxHQUNmLElBQUlsSCxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0E2QmpDLE9BeEJBd0QsRUFBTTY2QyxVQUFZLEtBS2xCNzZDLEVBQU0waEMsU0FBV3p0QixTQUFTQyxjQUFjLE9BQ3hDbFUsRUFBTTBoQyxTQUFTbnNCLE1BQU1HLFNBQVcsV0FDaEMxVixFQUFNMGhDLFNBQVNuc0IsTUFBTTgzQixjQUFnQixPQUNyQ3J0QyxFQUFNMGhDLFNBQVN4NkIsVUFBWSxVQUFZQSxFQUt2Q2xILEVBQU1zL0IsS0FBTyxLQUtidC9CLEVBQU04NkMsWUFBYyxLQUtwQjk2QyxFQUFNKzZDLFVBQVksS0FDWC82QyxFQTRFWCxPQTlHQSxHQUFVNDZDLEVBQVcvNkMsR0F1Q3JCKzZDLEVBQVVoK0MsVUFBVU0sZ0JBQWtCLFdBQ2xDVixLQUFLd04sT0FBTyxPQUtoQjR3QyxFQUFVaCtDLFVBQVVvK0MsUUFBVSxXQUMxQixJQUFJQyxFQUFheitDLEtBQUtzK0MsWUFDbEJJLEVBQVcxK0MsS0FBS3UrQyxVQUNoQkksRUFBSyxLQUNMNWxDLEVBQVEvWSxLQUFLa2xDLFNBQVNuc0IsTUFDMUJBLEVBQU1LLEtBQU8xUSxLQUFLRixJQUFJaTJDLEVBQVcsR0FBSUMsRUFBUyxJQUFNQyxFQUNwRDVsQyxFQUFNdzZCLElBQU03cUMsS0FBS0YsSUFBSWkyQyxFQUFXLEdBQUlDLEVBQVMsSUFBTUMsRUFDbkQ1bEMsRUFBTXBCLE1BQVFqUCxLQUFLMnNCLElBQUlxcEIsRUFBUyxHQUFLRCxFQUFXLElBQU1FLEVBQ3RENWxDLEVBQU1uQixPQUFTbFAsS0FBSzJzQixJQUFJcXBCLEVBQVMsR0FBS0QsRUFBVyxJQUFNRSxHQUszRFAsRUFBVWgrQyxVQUFVb04sT0FBUyxTQUFVRCxHQUNuQyxHQUFJdk4sS0FBSzhpQyxLQUFNLENBQ1g5aUMsS0FBSzhpQyxLQUFLbVIsc0JBQXNCMzdCLFlBQVl0WSxLQUFLa2xDLFVBQ2pELElBQUluc0IsRUFBUS9ZLEtBQUtrbEMsU0FBU25zQixNQUMxQkEsRUFBTUssS0FBTyxVQUNiTCxFQUFNdzZCLElBQU0sVUFDWng2QixFQUFNcEIsTUFBUSxVQUNkb0IsRUFBTW5CLE9BQVMsVUFFbkI1WCxLQUFLOGlDLEtBQU92MUIsRUFDUnZOLEtBQUs4aUMsTUFDTDlpQyxLQUFLOGlDLEtBQUttUixzQkFBc0I5NkIsWUFBWW5aLEtBQUtrbEMsV0FPekRrWixFQUFVaCtDLFVBQVV3K0MsVUFBWSxTQUFVSCxFQUFZQyxHQUNsRDErQyxLQUFLcytDLFlBQWNHLEVBQ25CeitDLEtBQUt1K0MsVUFBWUcsRUFDakIxK0MsS0FBSzYrQyx5QkFDTDcrQyxLQUFLdytDLFdBS1RKLEVBQVVoK0MsVUFBVXkrQyx1QkFBeUIsV0FDekMsSUFBSUosRUFBYXorQyxLQUFLcytDLFlBQ2xCSSxFQUFXMStDLEtBQUt1K0MsVUFPaEJ6cUMsRUFOUyxDQUNUMnFDLEVBQ0EsQ0FBQ0EsRUFBVyxHQUFJQyxFQUFTLElBQ3pCQSxFQUNBLENBQUNBLEVBQVMsR0FBSUQsRUFBVyxLQUVKbHhDLElBQUl2TixLQUFLOGlDLEtBQUsrUCwrQkFBZ0M3eUMsS0FBSzhpQyxNQUU1RWh2QixFQUFZLEdBQUtBLEVBQVksR0FBRzZHLFFBQzNCM2EsS0FBS3ErQyxVQUlOcitDLEtBQUtxK0MsVUFBVS91QixlQUFlLENBQUN4YixJQUgvQjlULEtBQUtxK0MsVUFBWSxJQUFJLEdBQVEsQ0FBQ3ZxQyxLQVN0Q3NxQyxFQUFVaCtDLFVBQVUwK0MsWUFBYyxXQUM5QixPQUFPOStDLEtBQUtxK0MsV0FFVEQsRUEvR21CLENBZ0g1QixHQ3BJRixJQUFJLEdBQXdDLFdBQ3hDLElBQUk5N0MsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQTZFeEM2N0MsR0FBOEIsU0FBVTE3QyxHQU94QyxTQUFTMDdDLEVBQWFoL0MsRUFBTXlRLEVBQVkrakMsR0FDcEMsSUFBSS93QyxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTUQsSUFBU0MsS0FjdkMsT0FQQXdELEVBQU1nTixXQUFhQSxFQU1uQmhOLEVBQU0rd0MsZ0JBQWtCQSxFQUNqQi93QyxFQUVYLE9BdkJBLEdBQVV1N0MsRUFBYzE3QyxHQXVCakIwN0MsRUF4QnNCLENBeUIvQixHQStJRixTQXhINkIsU0FBVTE3QyxHQUtuQyxTQUFTMjdDLEVBQVFod0MsR0FDYixJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBSWpDd0QsRUFBTW9DLEdBSU5wQyxFQUFNc0MsS0FJTnRDLEVBQU13QyxHQUNOLElBQUkrRCxFQUFVaUYsR0FBNEIsR0ErQjFDLE9BMUJBeEwsRUFBTXk3QyxLQUFPLElBQUksR0FBVWwxQyxFQUFRVyxXQUFhLGNBS2hEbEgsRUFBTTA3QyxjQUErQnQ2QyxJQUFwQm1GLEVBQVFvMUMsUUFBd0JwMUMsRUFBUW8xQyxRQUFVLEdBQy9EcDFDLEVBQVFxMUMsV0FDUjU3QyxFQUFNNDdDLFNBQVdyMUMsRUFBUXExQyxVQU03QjU3QyxFQUFNODZDLFlBQWMsS0FLcEI5NkMsRUFBTWc2QyxXQUFhenpDLEVBQVF3ekMsVUFBWXh6QyxFQUFRd3pDLFVBQVlmLEdBSzNEaDVDLEVBQU02N0MsaUJBQW1CdDFDLEVBQVF1MUMsZ0JBQzNCdjFDLEVBQVF1MUMsZ0JBQ1I5N0MsRUFBTSs3Qyx1QkFDTC83QyxFQW9FWCxPQXJIQSxHQUFVdzdDLEVBQVMzN0MsR0E0RG5CMjdDLEVBQVE1K0MsVUFBVW0vQyx1QkFBeUIsU0FBVWhMLEVBQWlCa0ssRUFBWUMsR0FDOUUsSUFBSS9tQyxFQUFRK21DLEVBQVMsR0FBS0QsRUFBVyxHQUNqQzdtQyxFQUFTOG1DLEVBQVMsR0FBS0QsRUFBVyxHQUN0QyxPQUFPOW1DLEVBQVFBLEVBQVFDLEVBQVNBLEdBQVU1WCxLQUFLay9DLFVBT25ERixFQUFRNStDLFVBQVUwK0MsWUFBYyxXQUM1QixPQUFPOStDLEtBQUtpL0MsS0FBS0gsZUFNckJFLEVBQVE1K0MsVUFBVTg2QyxnQkFBa0IsU0FBVTNHLEdBQzFDdjBDLEtBQUtpL0MsS0FBS0wsVUFBVTUrQyxLQUFLcytDLFlBQWEvSixFQUFnQnRtQyxPQUN0RGpPLEtBQUtrRSxjQUFjLElBQUk2NkMsR0FuSmxCLFVBbUp5RHhLLEVBQWdCL2pDLFdBQVkrakMsS0FPOUZ5SyxFQUFRNStDLFVBQVVnN0MsY0FBZ0IsU0FBVTdHLEdBQ3hDdjBDLEtBQUtpL0MsS0FBS3p4QyxPQUFPLE1BQ2pCLElBQUlneUMsRUFBY3gvQyxLQUFLcS9DLGlCQUFpQjlLLEVBQWlCdjBDLEtBQUtzK0MsWUFBYS9KLEVBQWdCdG1DLE9BSzNGLE9BSkl1eEMsR0FDQXgvQyxLQUFLby9DLFNBQVM3SyxHQUVsQnYwQyxLQUFLa0UsY0FBYyxJQUFJNjZDLEdBQWFTLEVBMUpoQyxTQU1HLFlBb0ppR2pMLEVBQWdCL2pDLFdBQVkrakMsS0FDN0gsR0FPWHlLLEVBQVE1K0MsVUFBVTY2QyxnQkFBa0IsU0FBVTFHLEdBQzFDLFFBQUl2MEMsS0FBS3c5QyxXQUFXakosS0FDaEJ2MEMsS0FBS3MrQyxZQUFjL0osRUFBZ0J0bUMsTUFDbkNqTyxLQUFLaS9DLEtBQUt6eEMsT0FBTyttQyxFQUFnQmhuQyxLQUNqQ3ZOLEtBQUtpL0MsS0FBS0wsVUFBVTUrQyxLQUFLcytDLFlBQWF0K0MsS0FBS3MrQyxhQUMzQ3QrQyxLQUFLa0UsY0FBYyxJQUFJNjZDLEdBbkxyQixXQW1MNkR4SyxFQUFnQi9qQyxXQUFZK2pDLEtBQ3BGLElBVWZ5SyxFQUFRNStDLFVBQVVnL0MsU0FBVyxTQUFVajdDLEtBQ2hDNjZDLEVBdEhpQixDQXVIMUJmLElDcFBGLElBQUksR0FBd0MsV0FDeEMsSUFBSTM3QyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBNEY1QyxTQWhEOEIsU0FBVUcsR0FLcEMsU0FBU284QyxFQUFTendDLEdBQ2QsSUFBSXhMLEVBQVF4RCxLQUNSK0osRUFBVWlGLEdBQTRCLEdBQ3RDdXVDLEVBQVl4ekMsRUFBUXd6QyxVQUFZeHpDLEVBQVF3ekMsVUFBWWIsR0FnQnhELE9BZkFsNUMsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU0sQ0FDdEJ1OUMsVUFBV0EsRUFDWDd5QyxVQUFXWCxFQUFRVyxXQUFhLGNBQ2hDeTBDLFFBQVNwMUMsRUFBUW8xQyxXQUNmbi9DLE1BS0FzNUMsZUFBaUMxMEMsSUFBckJtRixFQUFRK3hCLFNBQXlCL3hCLEVBQVEreEIsU0FBVyxJQUt0RXQ0QixFQUFNazhDLFVBQXVCOTZDLElBQWhCbUYsRUFBUTQxQyxLQUFvQjUxQyxFQUFRNDFDLElBQzFDbjhDLEVBc0JYLE9BN0NBLEdBQVVpOEMsRUFBVXA4QyxHQTZCcEJvOEMsRUFBU3IvQyxVQUFVZy9DLFNBQVcsU0FBVWo3QyxHQUNwQyxJQUNJb3JDLEVBRE12dkMsS0FBS3VrQyxTQUM4Q21QLFVBQ3pEeFUsRUFBV2wvQixLQUFLOCtDLGNBQ3BCLEdBQUk5K0MsS0FBSzAvQyxLQUFNLENBQ1gsSUFBSWhnQixFQUFnQjZQLEVBQUtuUSx5QkFBeUJGLEdBQzlDcHlCLEVBQWF5aUMsRUFBS2hSLCtCQUErQm1CLEdBQ2pEa2dCLEVBQVNyUSxFQUFLdHJCLGdCQUFrQm5YLEdBQ3BDb3lCLEVBQVdBLEVBQVMzUyxTQUNYaUIsTUFBTW95QixFQUFTQSxHQUU1QnJRLEVBQUtwUSxZQUFZRCxFQUFVLENBQ3ZCcEQsU0FBVTk3QixLQUFLczVDLFVBQ2Z2ZCxPQUFRMVEsTUFHVG8wQixFQTlDa0IsQ0ErQzNCLElDM0ZGLElBQUksR0FBd0MsV0FDeEMsSUFBSW45QyxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBaUk1QyxTQWxGaUMsU0FBVUcsR0FLdkMsU0FBU3c4QyxFQUFZN3dDLEdBQ2pCLElBQUl4TCxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FDN0IrSixFQUFVaUYsR0FBZSxHQTRCN0IsT0F0QkF4TCxFQUFNczhDLGtCQUFvQixTQUFVdkwsR0FDaEMsT0FBUWtJLEdBQWVsSSxJQUFvQm9JLEdBQWtCcEksSUFNakUvd0MsRUFBTWc2QyxnQkFDb0I1NEMsSUFBdEJtRixFQUFRd3pDLFVBQ0Z4ekMsRUFBUXd6QyxVQUNSLzVDLEVBQU1zOEMsa0JBS2hCdDhDLEVBQU04MUMsZUFBaUMxMEMsSUFBckJtRixFQUFRK3hCLFNBQXlCL3hCLEVBQVEreEIsU0FBVyxJQUt0RXQ0QixFQUFNdThDLGlCQUNxQm43QyxJQUF2Qm1GLEVBQVFpMkMsV0FBMkJqMkMsRUFBUWkyQyxXQUFhLElBQ3JEeDhDLEVBNkNYLE9BL0VBLEdBQVVxOEMsRUFBYXg4QyxHQTRDdkJ3OEMsRUFBWXovQyxVQUFVb0UsWUFBYyxTQUFVK3ZDLEdBQzFDLElBQUl1RyxHQUFZLEVBQ2hCLEdBQUl2RyxFQUFnQngwQyxNQUFRLEVBQW1CLENBQzNDLElBQUlrZ0QsRUFBeUMxTCxFQUE2QixjQUN0RTJMLEVBQVVELEVBQVNDLFFBQ3ZCLEdBQUlsZ0QsS0FBS3c5QyxXQUFXakosS0N0RnRCLElEdUZPMkwsR0MxRlAsSUQyRlVBLEdDekZULElEMEZTQSxHQzNGWixJRDRGWUEsR0FBd0IsQ0FDNUIsSUFDSTNRLEVBRE1nRixFQUFnQmhuQyxJQUNYbW1DLFVBQ1h5TSxFQUFnQjVRLEVBQUt0ckIsZ0JBQWtCamtCLEtBQUsrL0MsWUFDNUMveEIsRUFBUyxFQUFHQyxFQUFTLEVDOUYvQixJRCtGVWl5QixFQUNBanlCLEdBQVVreUIsRUNuR3BCLElEcUdlRCxFQUNMbHlCLEdBQVVteUIsRUNwR25CLElEc0djRCxFQUNMbHlCLEVBQVNteUIsRUFHVGx5QixFQUFTa3lCLEVBRWIsSUFBSWxrQixFQUFRLENBQUNqTyxFQUFRQyxHQUNyQixHQUFpQmdPLEVBQU9zVCxFQUFLdFUsZVRjdEMsU0FBYXNVLEVBQU10VCxFQUFPbUYsR0FDN0IsSUFBSS9ELEVBQWdCa1MsRUFBS3ZVLG9CQUN6QixHQUFJcUMsRUFBZSxDQUNmLElBQUlubkIsRUFBUyxDQUFDbW5CLEVBQWMsR0FBS3BCLEVBQU0sR0FBSW9CLEVBQWMsR0FBS3BCLEVBQU0sSUFDcEVzVCxFQUFLL1QsZ0JBQWdCLENBQ2pCTSxjQUEyQmwzQixJQUFqQnc4QixFQUE2QkEsRUFBZSxJQUN0RHJGLE9BQVF4USxHQUNSclYsT0FBUXE1QixFQUFLelAscUJBQXFCNXBCLE1TcEI5QmtxQyxDQUFJN1EsRUFBTXRULEVBQU9qOEIsS0FBS3M1QyxXQUN0QjJHLEVBQVM1L0MsaUJBQ1R5NkMsR0FBWSxHQUdwQixPQUFRQSxHQUVMK0UsRUFoRnFCLENBaUY5QixJRWhJRixJQUFJLEdBQXdDLFdBQ3hDLElBQUl2OUMsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQWdHNUMsU0FyRGtDLFNBQVVHLEdBS3hDLFNBQVNnOUMsRUFBYXJ4QyxHQUNsQixJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBQzdCK0osRUFBVWlGLEdBQTRCLEdBZ0IxQyxPQVhBeEwsRUFBTWc2QyxXQUFhenpDLEVBQVF3ekMsVUFBWXh6QyxFQUFRd3pDLFVBQVlaLEdBSzNEbjVDLEVBQU1xM0MsT0FBUzl3QyxFQUFRa3lCLE1BQVFseUIsRUFBUWt5QixNQUFRLEVBSy9DejRCLEVBQU04MUMsZUFBaUMxMEMsSUFBckJtRixFQUFRK3hCLFNBQXlCL3hCLEVBQVEreEIsU0FBVyxJQUMvRHQ0QixFQTRCWCxPQWxEQSxHQUFVNjhDLEVBQWNoOUMsR0FnQ3hCZzlDLEVBQWFqZ0QsVUFBVW9FLFlBQWMsU0FBVSt2QyxHQUMzQyxJQUFJdUcsR0FBWSxFQUNoQixHQUFJdkcsRUFBZ0J4MEMsTUFBUSxHQUN4QncwQyxFQUFnQngwQyxNQUFRLEVBQW9CLENBQzVDLElBQUlrZ0QsRUFBeUMxTCxFQUE2QixjQUN0RStMLEVBQVdMLEVBQVNLLFNBQ3hCLEdBQUl0Z0QsS0FBS3c5QyxXQUFXakosS0FDZitMLEdBQVksSUFBSUMsV0FBVyxJQUFNRCxHQUFZLElBQUlDLFdBQVcsSUFBSyxDQUNsRSxJQUFJaHpDLEVBQU1nbkMsRUFBZ0JobkMsSUFDdEIwdUIsRUFBUXFrQixHQUFZLElBQUlDLFdBQVcsR0FBS3ZnRCxLQUFLNjZDLFFBQVU3NkMsS0FBSzY2QyxPQUVoRUwsR0FEV2p0QyxFQUFJbW1DLFVBQ0d6WCxPQUFPcjNCLEVBQVc1RSxLQUFLczVDLFdBQ3pDMkcsRUFBUzUvQyxpQkFDVHk2QyxHQUFZLEdBR3BCLE9BQVFBLEdBRUx1RixFQW5Ec0IsQ0FvRC9CLElDZ0JGLEdBdEc2QixXQU96QixTQUFTRyxFQUFRQyxFQUFPQyxFQUFhQyxHQUtqQzNnRCxLQUFLNGdELE9BQVNILEVBS2R6Z0QsS0FBSzZnRCxhQUFlSCxFQUtwQjFnRCxLQUFLOGdELE9BQVNILEVBS2QzZ0QsS0FBSytnRCxRQUFVLEdBS2YvZ0QsS0FBS2doRCxPQUFTLEVBS2RoaEQsS0FBS2loRCxpQkFBbUIsRUErRDVCLE9BMURBVCxFQUFRcGdELFVBQVV5OUMsTUFBUSxXQUN0Qjc5QyxLQUFLK2dELFFBQVE3L0MsT0FBUyxFQUN0QmxCLEtBQUtnaEQsT0FBUyxFQUNkaGhELEtBQUtpaEQsaUJBQW1CLEdBTTVCVCxFQUFRcGdELFVBQVV3OUMsT0FBUyxTQUFVaDFDLEVBQUdDLEdBQ3BDN0ksS0FBSytnRCxRQUFRdCtDLEtBQUttRyxFQUFHQyxFQUFHNnlCLEtBQUtDLFFBS2pDNmtCLEVBQVFwZ0QsVUFBVTZVLElBQU0sV0FDcEIsR0FBSWpWLEtBQUsrZ0QsUUFBUTcvQyxPQUFTLEVBR3RCLE9BQU8sRUFFWCxJQUFJeS9DLEVBQVFqbEIsS0FBS0MsTUFBUTM3QixLQUFLOGdELE9BQzFCSSxFQUFZbGhELEtBQUsrZ0QsUUFBUTcvQyxPQUFTLEVBQ3RDLEdBQUlsQixLQUFLK2dELFFBQVFHLEVBQVksR0FBS1AsRUFHOUIsT0FBTyxFQUlYLElBREEsSUFBSVEsRUFBYUQsRUFBWSxFQUN0QkMsRUFBYSxHQUFLbmhELEtBQUsrZ0QsUUFBUUksRUFBYSxHQUFLUixHQUNwRFEsR0FBYyxFQUVsQixJQUFJcmxCLEVBQVc5N0IsS0FBSytnRCxRQUFRRyxFQUFZLEdBQUtsaEQsS0FBSytnRCxRQUFRSSxFQUFhLEdBSXZFLEdBQUlybEIsRUFBVyxJQUFPLEdBQ2xCLE9BQU8sRUFFWCxJQUFJdnlCLEVBQUt2SixLQUFLK2dELFFBQVFHLEdBQWFsaEQsS0FBSytnRCxRQUFRSSxHQUM1QzMzQyxFQUFLeEosS0FBSytnRCxRQUFRRyxFQUFZLEdBQUtsaEQsS0FBSytnRCxRQUFRSSxFQUFhLEdBR2pFLE9BRkFuaEQsS0FBS2doRCxPQUFTdDRDLEtBQUttWCxNQUFNclcsRUFBSUQsR0FDN0J2SixLQUFLaWhELGlCQUFtQnY0QyxLQUFLb1gsS0FBS3ZXLEVBQUtBLEVBQUtDLEVBQUtBLEdBQU1zeUIsRUFDaEQ5N0IsS0FBS2loRCxpQkFBbUJqaEQsS0FBSzZnRCxjQUt4Q0wsRUFBUXBnRCxVQUFVZ2YsWUFBYyxXQUM1QixPQUFRcGYsS0FBSzZnRCxhQUFlN2dELEtBQUtpaEQsa0JBQW9CamhELEtBQUs0Z0QsUUFLOURKLEVBQVFwZ0QsVUFBVTI5QyxTQUFXLFdBQ3pCLE9BQU8vOUMsS0FBS2doRCxRQUVUUixFQXBHaUIsR0NUNUIsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbCtDLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EwQmpDaytDLEdBQ0csV0F3T2QsU0E5TW9DLFNBQVUvOUMsR0FLMUMsU0FBU2crQyxFQUFlcnlDLEdBQ3BCLElBQUl4TCxFQUFReEQsS0FDUitKLEVBQVVpRixHQUE0QixJQUMxQ3hMLEVBQVFILEVBQU9MLEtBQUtoRCxLQUN5QyxJQUFjQSxNQUtyRXNoRCxZQUFjLEVBS3BCOTlDLEVBQU0rOUMsV0FBYSxFQUtuQi85QyxFQUFNMnRCLGVBQWlDdnNCLElBQXJCbUYsRUFBUXFtQixTQUF5QnJtQixFQUFRcW1CLFNBQVcsRUFLdEU1c0IsRUFBTTgxQyxlQUFpQzEwQyxJQUFyQm1GLEVBQVEreEIsU0FBeUIveEIsRUFBUSt4QixTQUFXLElBS3RFdDRCLEVBQU1nK0MsY0FBK0I1OEMsSUFBcEJtRixFQUFRMDNDLFFBQXdCMTNDLEVBQVEwM0MsUUFBVSxHQUtuRWorQyxFQUFNaytDLGdCQUNvQjk4QyxJQUF0Qm1GLEVBQVE0M0MsV0FBMEI1M0MsRUFBUTQzQyxVQUs5Q24rQyxFQUFNbytDLDBCQUM4Qmg5QyxJQUFoQ21GLEVBQVFvdUIscUJBQ0ZwdUIsRUFBUW91QixvQkFFbEIsSUFBSW9sQixFQUFZeHpDLEVBQVF3ekMsVUFBWXh6QyxFQUFRd3pDLFVBQVloQixHQTRDeEQsT0F2Q0EvNEMsRUFBTWc2QyxXQUFhenpDLEVBQVEwekMsWUFDckIsR0FBSXJCLEdBQW1CbUIsR0FDdkJBLEVBS04vNUMsRUFBTXErQyxZQUFjLEtBS3BCcitDLEVBQU1zK0MsZ0JBQWFsOUMsRUFLbkJwQixFQUFNdStDLFdBS052K0MsRUFBTXcrQyxXQUFRcDlDLEVBTWRwQixFQUFNeStDLGtCQUFvQixJQUkxQnorQyxFQUFNMCtDLG1CQU1OMStDLEVBQU0yK0MsY0FBZ0IsSUFDZjMrQyxFQStHWCxPQTNNQSxHQUFVNjlDLEVBQWdCaCtDLEdBaUcxQmcrQyxFQUFlamhELFVBQVVnaUQsZ0JBQWtCLFdBQ3ZDcGlELEtBQUtraUQsd0JBQXFCdDlDLEVBQ2Y1RSxLQUFLdWtDLFNBQVNtUCxVQUNwQm5TLG9CQUFlMzhCLEVBQVc1RSxLQUFLdWhELFdBQWN2aEQsS0FBS3VoRCxXQUFhLEVBQUksR0FBSyxFQUFLLEVBQUd2aEQsS0FBSzZoRCxjQVE5RlIsRUFBZWpoRCxVQUFVb0UsWUFBYyxTQUFVK3ZDLEdBQzdDLElBQUt2MEMsS0FBS3c5QyxXQUFXakosR0FDakIsT0FBTyxFQUdYLEdBRFdBLEVBQWdCeDBDLE9BQ2QsRUFDVCxPQUFPLEVBRVgsSUFRSWs4QixFQVJBMXVCLEVBQU1nbkMsRUFBZ0JobkMsSUFDdEI4MEMsRUFBd0M5TixFQUE2QixjQWlCekUsR0FoQkE4TixFQUFXaGlELGlCQUNQTCxLQUFLMGhELGFBQ0wxaEQsS0FBSzZoRCxZQUFjdE4sRUFBZ0IvakMsWUFLbkMrakMsRUFBZ0J4MEMsTUFBUSxJQUN4Qms4QixFQUFRb21CLEVBQVdwMEIsT0FDZm5jLElBQVd1d0MsRUFBV0MsWUFBY0MsV0FBV0Msa0JBQy9Ddm1CLEdBQVNqcUIsSUFFVHF3QyxFQUFXQyxZQUFjQyxXQUFXRSxpQkFDcEN4bUIsR0FBUyxLQUdILElBQVZBLEVBQ0EsT0FBTyxFQUdQajhCLEtBQUt1aEQsV0FBYXRsQixFQUV0QixJQUFJTixFQUFNRCxLQUFLQyxXQUNTLzJCLElBQXBCNUUsS0FBSzhoRCxhQUNMOWhELEtBQUs4aEQsV0FBYW5tQixLQUVqQjM3QixLQUFLZ2lELE9BQVNybUIsRUFBTTM3QixLQUFLOGhELFdBQWE5aEQsS0FBS2lpRCxxQkFDNUNqaUQsS0FBS2dpRCxNQUFRdDVDLEtBQUsyc0IsSUFBSTRHLEdBQVMsRUFBSW1sQixHQTNLcEMsU0E2S0gsSUFBSTdSLEVBQU9oaUMsRUFBSW1tQyxVQUNmLEdBQUkxekMsS0FBS2dpRCxRQUFVWixLQUNiN1IsRUFBSzNSLDJCQUE0QjU5QixLQUFLNGhELHFCQWF4QyxPQVpJNWhELEtBQUtraUQsbUJBQ0xoWCxhQUFhbHJDLEtBQUtraUQscUJBR2QzUyxFQUFLblUsZ0JBQ0xtVSxFQUFLbFQsbUJBRVRrVCxFQUFLak8sb0JBRVR0aEMsS0FBS2tpRCxtQkFBcUI5ckIsV0FBV3AyQixLQUFLb2lELGdCQUFnQi84QyxLQUFLckYsTUFBT0EsS0FBS3doRCxVQUMzRWpTLEVBQUszTyxZQUFZM0UsRUFBUWo4QixLQUFLbWlELGNBQWVuaUQsS0FBSzZoRCxhQUNsRDdoRCxLQUFLOGhELFdBQWFubUIsR0FDWCxFQUVYMzdCLEtBQUtzaEQsYUFBZXJsQixFQUNwQixJQUFJeW1CLEVBQVdoNkMsS0FBS0QsSUFBSXpJLEtBQUt3aEQsVUFBWTdsQixFQUFNMzdCLEtBQUs4aEQsWUFBYSxHQUdqRSxPQUZBNVcsYUFBYWxyQyxLQUFLK2hELFlBQ2xCL2hELEtBQUsraEQsV0FBYTNyQixXQUFXcDJCLEtBQUsyaUQsaUJBQWlCdDlDLEtBQUtyRixLQUFNdU4sR0FBTW0xQyxJQUM3RCxHQU1YckIsRUFBZWpoRCxVQUFVdWlELGlCQUFtQixTQUFVcDFDLEdBQ2xELElBQUlnaUMsRUFBT2hpQyxFQUFJbW1DLFVBQ1huRSxFQUFLblUsZ0JBQ0xtVSxFQUFLbFQsbUJBRVQsSUFBSUosR0FBUyxFQUFNajhCLEtBQUtzaEQsYUFBY3RoRCxLQUFLbXhCLFVBQVlueEIsS0FBS21pRCxjQUFlbmlELEtBQUtteEIsVUFBWW54QixLQUFLbWlELGVBQWlCbmlELEtBQUttaUQsZUFDbkg1UyxFQUFLM1IsMEJBQTRCNTlCLEtBQUs0aEQsd0JBRXRDM2xCLEVBQVFBLEVBQVNBLEVBQVEsRUFBSSxHQUFLLEVBQUssR0FFM0N1ZSxHQUFZakwsRUFBTXRULEVBQU9qOEIsS0FBSzZoRCxZQUFhN2hELEtBQUtzNUMsV0FDaER0NUMsS0FBS2dpRCxXQUFRcDlDLEVBQ2I1RSxLQUFLc2hELFlBQWMsRUFDbkJ0aEQsS0FBSzZoRCxZQUFjLEtBQ25CN2hELEtBQUs4aEQsZ0JBQWFsOUMsRUFDbEI1RSxLQUFLK2hELGdCQUFhbjlDLEdBUXRCeThDLEVBQWVqaEQsVUFBVXdpRCxlQUFpQixTQUFVakIsR0FDaEQzaEQsS0FBSzBoRCxXQUFhQyxFQUNiQSxJQUNEM2hELEtBQUs2aEQsWUFBYyxPQUdwQlIsRUE1TXdCLENBNk1qQyxJQ2xRRixJQUFJLEdBQXdDLFdBQ3hDLElBQUkvK0MsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQTJKNUMsU0ExSGlDLFNBQVVHLEdBS3ZDLFNBQVN3L0MsRUFBWTd6QyxHQUNqQixJQUFJeEwsRUFBUXhELEtBQ1IrSixFQUFVaUYsR0FBNEIsR0FDdEM4ekMsRUFBK0QsRUFtQ25FLE9BbENLQSxFQUFlekgsV0FDaEJ5SCxFQUFlekgsU0FBVyxJQUU5QjczQyxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTThpRCxJQUFtQjlpRCxNQUt2QytpRCxRQUFVLEtBS2hCdi9DLEVBQU0yNkMsZ0JBQWF2NUMsRUFLbkJwQixFQUFNdy9DLFdBQVksRUFLbEJ4L0MsRUFBTXkvQyxlQUFpQixFQUt2QnovQyxFQUFNMC9DLGdCQUFtQ3QrQyxJQUF0Qm1GLEVBQVFvNUMsVUFBMEJwNUMsRUFBUW81QyxVQUFZLEdBS3pFMy9DLEVBQU04MUMsZUFBaUMxMEMsSUFBckJtRixFQUFRK3hCLFNBQXlCL3hCLEVBQVEreEIsU0FBVyxJQUMvRHQ0QixFQTZFWCxPQXZIQSxHQUFVcS9DLEVBQWF4L0MsR0FnRHZCdy9DLEVBQVl6aUQsVUFBVTg2QyxnQkFBa0IsU0FBVTNHLEdBQzlDLElBQUk2TyxFQUFnQixFQUNoQkMsRUFBU3JqRCxLQUFLdzdDLGVBQWUsR0FDN0I4SCxFQUFTdGpELEtBQUt3N0MsZUFBZSxHQUU3QnRvQyxFQUFReEssS0FBS21YLE1BQU15akMsRUFBT3ZYLFFBQVVzWCxFQUFPdFgsUUFBU3VYLEVBQU94WCxRQUFVdVgsRUFBT3ZYLFNBQ2hGLFFBQXdCbG5DLElBQXBCNUUsS0FBS20rQyxXQUEwQixDQUMvQixJQUFJbGlCLEVBQVEvb0IsRUFBUWxULEtBQUttK0MsV0FDekJuK0MsS0FBS2lqRCxnQkFBa0JobkIsR0FDbEJqOEIsS0FBS2dqRCxXQUFhdDZDLEtBQUsyc0IsSUFBSXIxQixLQUFLaWpELGdCQUFrQmpqRCxLQUFLa2pELGFBQ3hEbGpELEtBQUtnakQsV0FBWSxHQUVyQkksRUFBZ0JubkIsRUFFcEJqOEIsS0FBS20rQyxXQUFhanJDLEVBQ2xCLElBQUkzRixFQUFNZ25DLEVBQWdCaG5DLElBQ3RCZ2lDLEVBQU9oaUMsRUFBSW1tQyxVQUNmLEdBQUluRSxFQUFLNVIsaUJBQWlCeG5CLFdBQWErVSxHQUF2QyxDQU1BLElBQUlpb0IsRUFBbUI1bEMsRUFBSTYzQixjQUFjZ08sd0JBQ3JDdUssRUFBVyxHQUFxQjM5QyxLQUFLdzdDLGdCQUN6Q21DLEVBQVMsSUFBTXhLLEVBQWlCLzVCLEtBQ2hDdWtDLEVBQVMsSUFBTXhLLEVBQWlCSSxJQUNoQ3Z6QyxLQUFLK2lELFFBQVV4MUMsRUFBSXNsQywrQkFBK0I4SyxHQUU5QzM5QyxLQUFLZ2pELFlBQ0x6MUMsRUFBSUQsU0FDSmlpQyxFQUFLek8sdUJBQXVCc2lCLEVBQWVwakQsS0FBSytpRCxZQVF4REYsRUFBWXppRCxVQUFVZzdDLGNBQWdCLFNBQVU3RyxHQUM1QyxRQUFJdjBDLEtBQUt3N0MsZUFBZXQ2QyxPQUFTLElBQ25CcXpDLEVBQWdCaG5DLElBQ1htbUMsVUFDVm5TLGVBQWV2aEMsS0FBS3M1QyxXQUNsQixLQVdmdUosRUFBWXppRCxVQUFVNjZDLGdCQUFrQixTQUFVMUcsR0FDOUMsR0FBSXYwQyxLQUFLdzdDLGVBQWV0NkMsUUFBVSxFQUFHLENBQ2pDLElBQUlxTSxFQUFNZ25DLEVBQWdCaG5DLElBUTFCLE9BUEF2TixLQUFLK2lELFFBQVUsS0FDZi9pRCxLQUFLbStDLGdCQUFhdjVDLEVBQ2xCNUUsS0FBS2dqRCxXQUFZLEVBQ2pCaGpELEtBQUtpakQsZUFBaUIsRUFDakJqakQsS0FBS3M3Qyx3QkFDTi90QyxFQUFJbW1DLFVBQVVwUyxvQkFFWCxFQUdQLE9BQU8sR0FHUnVoQixFQXhIcUIsQ0F5SDlCNUUsSUMxSkYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJMzdDLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0F1STVDLFNBekcrQixTQUFVRyxHQUtyQyxTQUFTa2dELEVBQVV2MEMsR0FDZixJQUFJeEwsRUFBUXhELEtBQ1IrSixFQUFVaUYsR0FBNEIsR0FDdEM4ekMsRUFBK0QsRUF5Qm5FLE9BeEJLQSxFQUFlekgsV0FDaEJ5SCxFQUFlekgsU0FBVyxJQUU5QjczQyxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTThpRCxJQUFtQjlpRCxNQUt2QytpRCxRQUFVLEtBS2hCdi9DLEVBQU04MUMsZUFBaUMxMEMsSUFBckJtRixFQUFRK3hCLFNBQXlCL3hCLEVBQVEreEIsU0FBVyxJQUt0RXQ0QixFQUFNZ2dELG1CQUFnQjUrQyxFQUt0QnBCLEVBQU1pZ0QsZ0JBQWtCLEVBQ2pCamdELEVBc0VYLE9BdEdBLEdBQVUrL0MsRUFBV2xnRCxHQXNDckJrZ0QsRUFBVW5qRCxVQUFVODZDLGdCQUFrQixTQUFVM0csR0FDNUMsSUFBSW1QLEVBQWEsRUFDYkwsRUFBU3JqRCxLQUFLdzdDLGVBQWUsR0FDN0I4SCxFQUFTdGpELEtBQUt3N0MsZUFBZSxHQUM3Qmp5QyxFQUFLODVDLEVBQU92WCxRQUFVd1gsRUFBT3hYLFFBQzdCdGlDLEVBQUs2NUMsRUFBT3RYLFFBQVV1WCxFQUFPdlgsUUFFN0IrUixFQUFXcDFDLEtBQUtvWCxLQUFLdlcsRUFBS0EsRUFBS0MsRUFBS0EsUUFDYjVFLElBQXZCNUUsS0FBS3dqRCxnQkFDTEUsRUFBYTFqRCxLQUFLd2pELGNBQWdCMUYsR0FFdEM5OUMsS0FBS3dqRCxjQUFnQjFGLEVBQ3JCLElBQUl2d0MsRUFBTWduQyxFQUFnQmhuQyxJQUN0QmdpQyxFQUFPaGlDLEVBQUltbUMsVUFDRyxHQUFkZ1EsSUFDQTFqRCxLQUFLeWpELGdCQUFrQkMsR0FHM0IsSUFBSXZRLEVBQW1CNWxDLEVBQUk2M0IsY0FBY2dPLHdCQUNyQ3VLLEVBQVcsR0FBcUIzOUMsS0FBS3c3QyxnQkFDekNtQyxFQUFTLElBQU14SyxFQUFpQi81QixLQUNoQ3VrQyxFQUFTLElBQU14SyxFQUFpQkksSUFDaEN2ekMsS0FBSytpRCxRQUFVeDFDLEVBQUlzbEMsK0JBQStCOEssR0FFbERwd0MsRUFBSUQsU0FDSmlpQyxFQUFLOU8seUJBQXlCaWpCLEVBQVkxakQsS0FBSytpRCxVQU9uRFEsRUFBVW5qRCxVQUFVZzdDLGNBQWdCLFNBQVU3RyxHQUMxQyxHQUFJdjBDLEtBQUt3N0MsZUFBZXQ2QyxPQUFTLEVBQUcsQ0FDaEMsSUFDSXF1QyxFQURNZ0YsRUFBZ0JobkMsSUFDWG1tQyxVQUNYMXlDLEVBQVloQixLQUFLeWpELGdCQUFrQixFQUFJLEdBQUssRUFFaEQsT0FEQWxVLEVBQUtoTyxlQUFldmhDLEtBQUtzNUMsVUFBV3Q0QyxJQUM3QixFQUdQLE9BQU8sR0FRZnVpRCxFQUFVbmpELFVBQVU2NkMsZ0JBQWtCLFNBQVUxRyxHQUM1QyxHQUFJdjBDLEtBQUt3N0MsZUFBZXQ2QyxRQUFVLEVBQUcsQ0FDakMsSUFBSXFNLEVBQU1nbkMsRUFBZ0JobkMsSUFPMUIsT0FOQXZOLEtBQUsraUQsUUFBVSxLQUNmL2lELEtBQUt3akQsbUJBQWdCNStDLEVBQ3JCNUUsS0FBS3lqRCxnQkFBa0IsRUFDbEJ6akQsS0FBS3M3Qyx3QkFDTi90QyxFQUFJbW1DLFVBQVVwUyxvQkFFWCxFQUdQLE9BQU8sR0FHUmlpQixFQXZHbUIsQ0F3RzVCdEYsSUN0SUYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJMzdDLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0E4RjVDLFNBeEJ5QixTQUFVRyxHQUsvQixTQUFTK2lDLEVBQUlyOEIsR0FZVCxPQVZBQSxFQUFVLEVBQU8sR0FBSUEsSUFDUm9sQyxXQUNUcGxDLEVBQVFvbEMsU0NqQ2IsU0FBa0JuZ0MsR0FDckIsSUFBSWpGLEVBQXNDLEdBQ3RDb2xDLEVBQVcsSUFBSSxHQWFuQixZQVptQ3ZxQyxJQUFqQm1GLEVBQVFnRCxNQUFxQmhELEVBQVFnRCxPQUVuRG9pQyxFQUFTMXNDLEtBQUssSUFBSSxHQUFLc0gsRUFBUTQ1QyxvQkFFSS8rQyxJQUFuQm1GLEVBQVF1akIsUUFBdUJ2akIsRUFBUXVqQixTQUV2RDZoQixFQUFTMXNDLEtBQUssSUFBSSxHQUFPc0gsRUFBUTY1QyxzQkFFWWgvQyxJQUF4Qm1GLEVBQVE4NUMsYUFBNEI5NUMsRUFBUTg1QyxjQUVqRTFVLEVBQVMxc0MsS0FBSyxJQUFJLEdBQVlzSCxFQUFRKzVDLHFCQUVuQzNVLEVEa0JvQixJQUVsQnBsQyxFQUFRcWxDLGVBQ1RybEMsRUFBUXFsQyxhRUZiLFNBQWtCcGdDLEdBQ3JCLElBQUlqRixFRkMrQyxDQUN2QzB6QyxhQUFhLElFRmlCLEdBQ3RDck8sRUFBZSxJQUFJLEdBQ25CK04sRUFBVSxJQUFJLElBQVMsS0FBTyxJQUFNLEtBb0R4QyxZQW5Ed0R2NEMsSUFBL0JtRixFQUFRZzZDLG9CQUMzQmg2QyxFQUFRZzZDLHFCQUdWM1UsRUFBYTNzQyxLQUFLLElBQUksVUFFd0JtQyxJQUE1Qm1GLEVBQVFpNkMsaUJBQWdDajZDLEVBQVFpNkMsa0JBRWxFNVUsRUFBYTNzQyxLQUFLLElBQUksR0FBZ0IsQ0FDbEN3NUIsTUFBT2x5QixFQUFRazZDLFVBQ2Zub0IsU0FBVS94QixFQUFRbTZDLHNCQUdRdC9DLElBQXBCbUYsRUFBUW82QyxTQUF3QnA2QyxFQUFRbzZDLFVBRWxEL1UsRUFBYTNzQyxLQUFLLElBQUksR0FBUSxDQUMxQmc3QyxZQUFhMXpDLEVBQVEwekMsWUFDckJOLFFBQVNBLFdBR3lCdjRDLElBQXhCbUYsRUFBUXE2QyxhQUE0QnI2QyxFQUFRcTZDLGNBRTFEaFYsRUFBYTNzQyxLQUFLLElBQUksVUFFWW1DLElBQXRCbUYsRUFBUXM2QyxXQUEwQnQ2QyxFQUFRczZDLFlBRXREalYsRUFBYTNzQyxLQUFLLElBQUksR0FBVSxDQUM1QnE1QixTQUFVL3hCLEVBQVFtNkMsc0JBR1V0L0MsSUFBckJtRixFQUFRdTZDLFVBQXlCdjZDLEVBQVF1NkMsWUFFcERsVixFQUFhM3NDLEtBQUssSUFBSSxJQUN0QjJzQyxFQUFhM3NDLEtBQUssSUFBSSxHQUFhLENBQy9CdzVCLE1BQU9seUIsRUFBUWs2QyxVQUNmbm9CLFNBQVUveEIsRUFBUW02Qyx1QkFHc0J0L0MsSUFBM0JtRixFQUFRdzZDLGdCQUErQng2QyxFQUFRdzZDLGlCQUVoRW5WLEVBQWEzc0MsS0FBSyxJQUFJLEdBQWUsQ0FDakNnN0MsWUFBYTF6QyxFQUFRMHpDLFlBQ3JCM2hCLFNBQVUveEIsRUFBUW02QyxzQkFHb0J0L0MsSUFBMUJtRixFQUFReTZDLGVBQThCejZDLEVBQVF5NkMsZ0JBRTlEcFYsRUFBYTNzQyxLQUFLLElBQUksR0FBUyxDQUMzQnE1QixTQUFVL3hCLEVBQVFtNkMsZ0JBR25COVUsRUZyRHdCLElBSW5CL3JDLEVBQU9MLEtBQUtoRCxLQUFNK0osSUFBWS9KLEtBTTFDLE9BckJBLEdBQVVvbUMsRUFBSy9pQyxHQWtCZitpQyxFQUFJaG1DLFVBQVV3TyxlQUFpQixXQUMzQixPQUFPLElBQUk2MUMsR0FBcUJ6a0QsT0FFN0JvbUMsRUF0QmEsQ0F1QnRCLElHbEZJLE1BQWdCc2UsV0FBeUIsR0FhN0MsWUFBc0JDLEVBQW9DNTZDLEdBRXhELE1BQU02NkMsRUFBTzc2QyxHQUFvQixHQUVqQyxJQUFJNjZDLEVBQUtqZixRQUFTLENBQ2hCLE1BQU1BLEVBQVVsdUIsU0FBU0MsY0FBYyxPQUN2Q2l1QixFQUFRajdCLFVBQVksaUJBQ3BCazZDLEVBQUtqZixRQUFVQSxFQUdqQixJQUFJRSxFQUVGQSxFQURFOGUsYUFBeUIsR0FDaEIsQ0FBQ0EsR0FFREEsRUFHYjllLEVBQVM3a0IsU0FBUTh3QixJQUNmQSxFQUFRYSxVQUFVaVMsRUFBS2pmLFlBR3pCa2YsTUFBTUQsR0FFTjVrRCxLQUFLMmtELGNBQWdCOWUsRUFTdkIsT0FBT3Q0QixHQUNMczNDLE1BQU1yM0MsT0FBT0QsR0FDVkEsR0FDRHZOLEtBQUsya0QsY0FBYzNqQyxTQUFROHdCLElBQ3pCQSxFQUFRdGtDLE9BQU9ELE1BU2QsbUJBQ0wsT0FBT3ZOLEtBQUsya0QsZUNuRFYsTUFBT0csV0FBa0JKLEdBVTdCLFlBQVkzNkMsR0FDVixNQUFNNDdCLEVBQVU1N0IsRUFBUTQ3QixRQUFVNTdCLEVBQVE0N0IsUUFBVWx1QixTQUFTQyxjQUFjLE9BQzNFaXVCLEVBQVFrVCxVQUFVeDRCLElBQUl0VyxFQUFRZzdDLFlBQzlCaDdDLEVBQVE0N0IsUUFBVUEsRUFDbEJrZixNQUFNOTZDLEVBQVE0NkMsY0FBZTU2QyxHQUM3Qi9KLEtBQUsra0QsV0FBYWg3QyxFQUFRZzdDLFdBTXJCLGdCQUNMLE9BQU8va0QsS0FBSytrRCxZQ25DaEIsTUFBTUMsR0FBV25sRCxHQUNYaUQsTUFBTXVELFFBQVF4RyxHQUNUQSxFQUVBLENBQUNBLEdDZ0ROLE1BQWdCLFdBQWU2a0QsR0FzQm5DLFlBQXNCMzZDLEVBQXdCNDZDLEdBRTVDNTZDLEVBQVFrN0MsdUJBQXVCbDdDLEVBQVFrN0Msc0JBQXVCbDdDLEVBQVFrN0MscUJBRXRFbDdDLEVBQVFtN0MsUUFBVW43QyxFQUFRbTdDLFNBQVcsS0FDckNuN0MsRUFBUW83QyxjQUFnQnA3QyxFQUFRbzdDLGVBQWlCLEtBQzVCLE9BQWxCcDdDLEVBQVFtN0MsU0FBMEMsT0FBeEJuN0MsRUFBUW83QyxnQkFDbkNwN0MsRUFBUW03QyxRQUFVLE9BRXBCbjdDLEVBQVFxN0MsUUFBVXI3QyxFQUFRcTdDLFNBQVcsR0FFckMsTUFBTUMsRUFBeUJ0N0MsRUFBUTQ3QixRQUFVNTdCLEVBQVE0N0IsUUFBVWx1QixTQUFTQyxjQUFjLE9BQzFGMnRDLEVBQXVCMzZDLFVBQVlYLEVBQVF1N0MsbUJBQXFCdjdDLEVBQVF1N0MsbUJBQXFCLDBCQUM3RkQsRUFBdUJ6TixNQUFRN3RDLEVBQVFxN0MsUUFFdkMsTUFBTUcsRUFBZ0I5dEMsU0FBU0MsY0FBYyxVQWU3QyxHQWRBNnRDLEVBQWM3NkMsVUFBWSxtQkFFSCxPQUFwQlgsRUFBUW03QyxRQUNUSyxFQUFjak8sWUFBY3IwQyxPQUFPdWlELGNBQWN6N0MsRUFBUW03QyxTQUN0QixPQUExQm43QyxFQUFRbzdDLGVBQ2pCSSxFQUFjcHNDLFlBQVksR0FBT3NzQywrQkFBK0IxN0MsRUFBUW83QyxnQkFHMUVJLEVBQWMzTixNQUFRN3RDLEVBQVFxN0MsUUFDM0JyN0MsRUFBUXE3QyxRQUFRbGtELE9BQVMsR0FDMUJxa0QsRUFBYzVOLGFBQWEsYUFBYzV0QyxFQUFRcTdDLFNBRW5EQyxFQUF1QkssT0FBT0gsR0FFMUJ4N0MsRUFBUWs3QyxxQkFBc0IsQ0FDaEMsTUFBTVUsRUFBYWx1QyxTQUFTQyxjQUFjLE9BQzFDaXVDLEVBQVdqN0MsVUFBWSxxQ0FDdkIsTUFBTWs3QyxFQUFjbnVDLFNBQVNDLGNBQWMsUUFDM0NrdUMsRUFBWXRPLFlBQWN2dEMsRUFBUXE3QyxRQUNsQ1EsRUFBWWw3QyxVQUFZLDJCQUN4Qmk3QyxFQUFXeHNDLFlBQVl5c0MsR0FDdkJQLEVBQXVCbHNDLFlBQVl3c0MsR0FHckNkLE1BQU1GLEdBQWdDLEdBQUUsK0JBQ25DNTZDLEdBQU8sQ0FDVjQ3QixRQUFTMGYsS0FHWHJsRCxLQUFLa2xELFFBQVVuN0MsRUFBUW03QyxRQUN2QmxsRCxLQUFLbWxELGNBQWdCcDdDLEVBQVFvN0MsY0FDN0JubEQsS0FBS3VyQyxPQUFTZ2EsRUFFZHZsRCxLQUFLMmxDLFFBQVE5aEMsaUJBQWlCLFNBQVMsSUFBTTdELEtBQUtrRSxjQUFjLFdBQVUsR0FFdEU2RixFQUFRMUosZ0JBQ1ZMLEtBQUs0RixHQUFHLFFBQVM1RixLQUFLd0UsYUFZbkIsWUFBWUwsR0FDakIsT0FBTyxFQU1GLFlBQ0wsT0FBT25FLEtBQUt1ckMsT0FRUCxpQkFBaUIyWixHQUN0QmxsRCxLQUFLNmxELFlBQVlsTixVQUFZLEdBQzdCMzRDLEtBQUs2bEQsWUFBWXZPLFlBQWNyMEMsT0FBT3VpRCxjQUFjTixHQVEvQyx1QkFBdUJDLEdBQzVCbmxELEtBQUs2bEQsWUFBWXZPLFlBQWMsR0FDL0J0M0MsS0FBSzZsRCxZQUFZbE4sVUFBWSxHQUM3QjM0QyxLQUFLNmxELFlBQVkxc0MsWUFBWSxHQUFPc3NDLCtCQUErQk4sSUFTaEMsc0NBQUNBLEdBQ3BDLE1BQU1XLEVBQWNydUMsU0FBU0MsY0FBYyxLQUUzQyxPQURBb3VDLEVBQVlwN0MsVUFBWSxhQUFleTZDLEVBQ2hDVyxHQ2hMTCxNQUFPQyxXQUFvQixFQVUvQixZQUFZaG1ELEVBQWNpbUQsR0FDeEJuQixNQUFNOWtELEdBRU5DLEtBQUtnbUQsVUFBWUEsR0FxQmYsTUFBT0MsV0FBcUIsR0FrQmhDLFlBQW1CbDhDLEdBSWpCODZDLE1BRmE5NkMsR0FBb0IsR0FFSkEsRUFBUW04QyxtQkFFckNsbUQsS0FBS21tRCxZQUFhLEVBQ2xCbm1ELEtBQUtrbUQsa0JBQW9CbjhDLEVBQVFtOEMsa0JBQ2pDbG1ELEtBQUtvbUQsZUFBaUJyOEMsRUFBUXE4QyxnQkFBa0IsS0FDaERwbUQsS0FBS3FtRCxxQkFBdUJ0OEMsRUFBUXM4QyxzQkFBd0IsS0FFakMsT0FBeEJybUQsS0FBS29tRCxnQkFBeUQsT0FBOUJwbUQsS0FBS3FtRCx1QkFDdENybUQsS0FBS29tRCxlQUFpQixPQVVuQixZQUFZamlELEdBQ2pCLEdBQUdBLEVBQU1wRSxPQUFTLEVBQWlCLENBQ2pDQyxLQUFLZ21ELFdBQWFobUQsS0FBS2dtRCxVQUN2QmhtRCxLQUFLa0UsY0FBYyxJQUFJNmhELEdBQVksU0FBVS9sRCxLQUFLZ21ELFlBRWxELE1BQU1NLEVBQWdCdG1ELEtBQUt1bUQsbUJBRXhCRCxHQUNEdG1ELEtBQUt3bUQsd0JBQXdCRixFQUFjRyxjQUFjLG1DQUczRHptRCxLQUFLMG1ELHFCQUVEMW1ELEtBQUtnbUQsVUFDa0IsT0FBdEJobUQsS0FBS29tRCxlQUNOcG1ELEtBQUsybUQsaUJBQWlCM21ELEtBQUtvbUQsZ0JBQ1MsT0FBNUJwbUQsS0FBS3FtRCxzQkFDYnJtRCxLQUFLNG1ELHVCQUF1QjVtRCxLQUFLcW1ELHNCQUdqQixPQUFmcm1ELEtBQUtrbEQsUUFDTmxsRCxLQUFLMm1ELGlCQUFpQjNtRCxLQUFLa2xELFNBQ0ksT0FBdkJsbEQsS0FBS21sRCxlQUNibmxELEtBQUs0bUQsdUJBQXVCNW1ELEtBQUttbEQsZUY1QmhCLEVBQUMwQixFQUFxQ0MsRUFBcUNDLEVBQStCdHZDLFlBQ25JdXRDLEdBQVE2QixHQUFrQjdsQyxTQUFRZ21DLElBQ2hDLE1BQU1DLEVBQWdCRixFQUFTTixjQUFjTyxHQUN6Q0MsR0FDRmpDLEdBQVE4QixHQUFrQjlsQyxTQUN4QmttQyxHQUFtQkQsYUFBYSxFQUFiQSxFQUFlcE8sVUFBVUMsT0FBT29PLFNFMEJyREMsQ0FBWSxJQUFNbm5ELEtBQUtrbUQsa0JBQWtCa0IsZ0JBQWlCLE9BQVFkLEdBQWlCN3VDLFVBRXJGLE9BQU8sRUFPVyxjQUFDdXVDLEdBQ25CaG1ELEtBQUttbUQsV0FBYUgsRUFNQSxnQkFDbEIsT0FBT2htRCxLQUFLbW1ELFdBU0osd0JBQXdCeGdCLEVBQTZCajdCLEVBQVksbUJBQ3RELE1BQWhCMUssS0FBSzJsQyxVQUNIM2xDLEtBQUtnbUQsV0FDTnJnQixXQUFTa1QsVUFBVXg0QixJQUFJLDZCRnJITSxFQUFDc2xCLEVBQTZCaVgsRUFBaUJseUMsS0FDakUsTUFBWGk3QixFQUNHQSxFQUFROGdCLGNBQWMsSUFBSS83QyxNQUM3Qmk3QixFQUFReHNCLFlBMENhLEVBQUN5akMsRUFBaUJseUMsS0FDN0MsTUFBTWk3QixFQUFVbHVCLFNBQVNDLGNBQWNrbEMsR0FFdkMsT0FEQWpYLEVBQVFqN0IsVUFBWUEsRUFDYmk3QixHQTdDbUJqdUIsQ0VtSFcsTUZuSFloTixJQUc3Q202QixRQUFRNzdCLElBQUksOEJFZ0hWcStDLENBQXNCMWhCLEVBQVMsRUFBT2o3QixLQUV0Q2k3QixXQUFTa1QsVUFBVXhSLE9BQU8sNkJGekZHLEVBQUMxQixFQUE2Qmo3QixLQUNqRSxHQUFlLE1BQVhpN0IsRUFBaUIsQ0FDbkIsTUFBTUUsRUFBV0YsRUFBUTJoQixpQkFBaUIsSUFBSTU4QyxLQUM5QixNQUFabTdCLEdBQW9CQSxFQUFTM2tDLE9BQU8sR0FDdEMya0MsRUFBUzdrQixTQUFRdW1DLEdBQVNBLEVBQU1qQixjQUFlaHVDLFlBQVlpdkMsT0VzRnpEQyxDQUFzQjdoQixFQUFTajdCLEtBUzNCLHFCQUNSLE1BQU00N0MsRUFBZ0J0bUQsS0FBS3VtRCxtQkFDM0IsR0FBR0QsRUFBZSxDQUNoQixNQUFNbUIsRUFBcUJuQixFQUFjZ0IsaUJBQWlCLDZCQUN2REcsR0FBc0JBLEVBQW1Cdm1ELE9BQU8sR0FDakR1bUQsRUFBbUJ6bUMsU0FBUy9JLElBQzFCalksS0FBS3dtRCx3QkFBd0J2dUMsT0FZM0IsbUJBQ1IsSUFBSXl2QyxFQUFnQjFuRCxLQUFLMmxDLFFBQVFnaUIsUUFBUSxTQUl6QyxPQUhJRCxJQUNGQSxFQUFnQjFuRCxLQUFLMmxDLFFBQVFnaUIsUUFBUSxjQUVoQ0QsR0MzS1gsSUFBSSxHQUF3QyxXQUN4QyxJQUFJcGxELEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0FzQnhDMGtELEdBQWEsYUFJYkMsR0FBb0IsbUJBdVF4QixTQWhPbUMsU0FBVXhrRCxHQUt6QyxTQUFTeWtELEVBQWM5NEMsR0FDbkIsSUFBSXhMLEVBQVF4RCxLQUNSK0osRUFBVWlGLEdBQTRCLEdBQ3RDMjJCLEVBQVVsdUIsU0FBU0MsY0FBYyxPQUNyQ2l1QixFQUFRajdCLGVBQ2tCOUYsSUFBdEJtRixFQUFRVyxVQUEwQlgsRUFBUVcsVUFBWSxxQkFDMURsSCxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTSxDQUN0QjJsQyxRQUFTQSxFQUNUcjRCLE9BQVF2RCxFQUFRdUQsT0FDaEJuTixPQUFRNEosRUFBUTVKLFVBQ2RILE1BSUE0RixHQUlOcEMsRUFBTXNDLEtBSU50QyxFQUFNd0MsR0FDTnhDLEVBQU1tRSxrQkFBa0JpZ0QsR0FBWXBrRCxFQUFNdWtELDBCQUN0Q2grQyxFQUFRaStDLGtCQUNSeGtELEVBQU15a0Qsb0JBQW9CbCtDLEVBQVFpK0Msa0JBRWxDaitDLEVBQVFvRyxZQUNSM00sRUFBTTBrRCxjQUFjbitDLEVBQVFvRyxZQU1oQyxJQUFJZzRDLEdBQW1CLEVBSW5CQyxFQUFjLFNBeUNsQixNQXhDSSxrQkFBbUJyK0MsUUFFV25GLElBQTFCbUYsRUFBUXMrQyxnQkFDUkQsRUFBY3IrQyxFQUFRcytDLGVBRTFCRixJQUFxQkMsR0FFaEIsZ0JBQWlCcitDLEtBQ00sSUFBeEJBLEVBQVFxK0MsWUFDUkQsR0FBbUIsRUFHbkJDLEVBQWNubEQsT0FBTzhHLEVBQVFxK0MsY0FPckM1a0QsRUFBTThrRCxhQUFlRixFQUtyQjVrRCxFQUFNK2tELGtCQUFvQkosRUFLMUIza0QsRUFBTWdsRCxjQUFnQjdpQixFQUFRZ1QsVUFLOUJuMUMsRUFBTWlsRCxlQUFpQixLQUt2QmpsRCxFQUFNa2xELFdBQWEsS0FDWmxsRCxFQTBJWCxPQTdOQSxHQUFVc2tELEVBQWV6a0QsR0F3RnpCeWtELEVBQWMxbkQsVUFBVTJuRCx5QkFBMkIsV0FDL0MvbkQsS0FBSzBvRCxXQUFhLE1BVXRCWixFQUFjMW5ELFVBQVV1b0Qsb0JBQXNCLFdBQzFDLE9BQTZFM29ELEtBQUtvSCxJQUFJeWdELEtBUzFGQyxFQUFjMW5ELFVBQVVtN0IsY0FBZ0IsV0FDcEMsT0FBeUV2N0IsS0FBS29ILElBQUl3Z0QsS0FNdEZFLEVBQWMxbkQsVUFBVXdvRCxnQkFBa0IsU0FBVXprRCxHQUNoRCxJQUFJb0osRUFBTXZOLEtBQUt1a0MsU0FDZnZrQyxLQUFLNm9ELFlBQVl0N0MsRUFBSXk3QixjQUFjN2tDLEtBTXZDMmpELEVBQWMxbkQsVUFBVTBvRCxlQUFpQixTQUFVM2tELEdBQy9DbkUsS0FBSzZvRCxZQUFZLE9BU3JCZixFQUFjMW5ELFVBQVVvTixPQUFTLFNBQVVELEdBRXZDLEdBREFsSyxFQUFPakQsVUFBVW9OLE9BQU94SyxLQUFLaEQsS0FBTXVOLEdBQy9CQSxFQUFLLENBQ0wsSUFBSXc3QyxFQUFXeDdDLEVBQUk2M0IsY0FDbkJwbEMsS0FBS3UyQyxhQUFhOXpDLEtBQUt5QyxFQUFPNmpELEVBQVUsR0FBdUIvb0QsS0FBSzRvRCxnQkFBaUI1b0QsT0FDakZBLEtBQUt1b0QsbUJBQ0x2b0QsS0FBS3UyQyxhQUFhOXpDLEtBQUt5QyxFQUFPNmpELEVyQ3JNOUIsYXFDcU04RC9vRCxLQUFLOG9ELGVBQWdCOW9ELE9BRXZGQSxLQUFLNm9ELFlBQVksUUFVekJmLEVBQWMxbkQsVUFBVTZuRCxvQkFBc0IsU0FBVWUsR0FDcERocEQsS0FBSzZILElBQUlnZ0QsR0FBbUJtQixJQVNoQ2xCLEVBQWMxbkQsVUFBVThuRCxjQUFnQixTQUFVLzNDLEdBQzlDblEsS0FBSzZILElBQUkrL0MsR0FBWSxHQUFjejNDLEtBTXZDMjNDLEVBQWMxbkQsVUFBVXlvRCxZQUFjLFNBQVU1NkMsR0FDNUMsSUFBSWc3QyxFQUFPanBELEtBQUtzb0QsYUFDaEIsR0FBSXI2QyxHQUFTak8sS0FBS3lvRCxlQUFnQixDQUM5QixJQUFLem9ELEtBQUswb0QsV0FBWSxDQUNsQixJQUFJdjRDLEVBQWFuUSxLQUFLdTdCLGdCQUVsQnY3QixLQUFLMG9ELFdBREx2NEMsRUFDa0J5USxHQUE0QjVnQixLQUFLeW9ELGVBQWdCdDRDLEdBR2pEZ1EsR0FHMUIsSUFDSTNQLEVBRE14USxLQUFLdWtDLFNBQ01zTywrQkFBK0I1a0MsR0FDcEQsR0FBSXVDLEVBQVksQ0FDWixJQUFJdVIsRUFBaUJDLEtBQ2pCRCxJQUNBL2hCLEtBQUswb0QsV0FBYTluQyxHQUE0QjVnQixLQUFLeW9ELGVBQWdCMW1DLElBRXZFL2hCLEtBQUswb0QsV0FBV2w0QyxFQUFZQSxHQUM1QixJQUFJdzNDLEVBQW1CaG9ELEtBQUsyb0Qsc0JBRXhCTSxFQURBakIsRUFDT0EsRUFBaUJ4M0MsR0FHakJBLEVBQVdQLFlBSXpCalEsS0FBS3dvRCxlQUFpQlMsSUFBU2pwRCxLQUFLd29ELGdCQUNyQ3hvRCxLQUFLMmxDLFFBQVFnVCxVQUFZc1EsRUFDekJqcEQsS0FBS3dvRCxjQUFnQlMsSUFTN0JuQixFQUFjMW5ELFVBQVVrTixPQUFTLFNBQVVrcEMsR0FDdkMsSUFBSXBvQyxFQUFhb29DLEVBQVNwb0MsV0FDckJBLEVBSUdwTyxLQUFLeW9ELGdCQUFrQnI2QyxFQUFXdkIsVUFBVXNELGFBQzVDblEsS0FBS3lvRCxlQUFpQnI2QyxFQUFXdkIsVUFBVXNELFdBQzNDblEsS0FBSzBvRCxXQUFhLE1BTHRCMW9ELEtBQUt5b0QsZUFBaUIsTUFTdkJYLEVBOU51QixDQStOaEMsSUN0UldvQixHQUFjLEtBQU8sSUFNNUJDLEdBQWlCLENBQUMsRUFBRyxFQUFHLEdDRHhCLE1BQU9DLFdBQXlCLEVBRXBDLFlBQVlycEQsRUFBYzRvQyxHQUN4QmtjLE1BQU05a0QsR0FDTkMsS0FBSzJvQyxjQUFnQkEsR0FpQm5CLE1BQU8wZ0IsV0FBaUIsR0E2RDVCLFlBQVl0L0MsR0FFVixNQUFNNjZDLEVBQU83NkMsR0FBVyxHQUVsQnUvQyxFQUEyQjd4QyxTQUFTQyxjQUFjLE9BQ3hENHhDLEVBQXlCNStDLFVBQVksc0JBRXJDLE1BQU02K0MsRUFBZ0I5eEMsU0FBU0MsY0FBYyxVQUM3QzZ4QyxFQUFjNVEsVUFBWTBRLEdBQVNHLFNBRW5DRixFQUF5Qm53QyxZQUFZb3dDLEdBRXJDM0UsRUFBS2pmLFFBQVUyakIsRUFFZnpFLE1BQU1ELEdBRU41a0QsS0FBS0ssZUFBaUJ1a0QsRUFBS3ZrRCxpQkFBa0IsRUFFN0NMLEtBQUtzcEQseUJBQTJCQSxFQUdoQ3RwRCxLQUFLd0wsT0FBU3FJLEdBQWUsQ0FBQyxDQUFDLE1BQVMsT0FBVSxDQUFDLE1BQVMsU0FFNUQ3VCxLQUFLc3BELHlCQUF5QnpsRCxpQkFBaUIsU0FBVThQLEdBQU0zVCxLQUFLa0UsY0FBYyxJQUFJa2xELEdBQWlCLFFBQVN6MUMsTUFBSyxHQUVqSDNULEtBQUtLLGdCQUNQTCxLQUFLNEYsR0FBRyxRQUFTNUYsS0FBS3lwRCxzQkFHeEJ6cEQsS0FBSzBwRCxXQUFhSCxFQUFjamtCLFdBRWhDdGxDLEtBQUsycEQseUJBQTJCbHlDLFNBQVNteUMsZ0JBQWdCLDZCQUE4QixRQUN2RjVwRCxLQUFLMnBELHlCQUF5QmhTLGFBQWEsUUFBUyxtQ0FDcEQzM0MsS0FBSzJwRCx5QkFBeUJoUyxhQUFhLElBQUsxMEMsT0FBTyxJQUN2RGpELEtBQUsycEQseUJBQXlCaFMsYUFBYSxJQUFLMTBDLE9BQU8sSUFDdkRqRCxLQUFLMnBELHlCQUF5QmhTLGFBQWEsS0FBTTEwQyxPQUFPLElBQ3hEakQsS0FBSzJwRCx5QkFBeUJoUyxhQUFhLEtBQU0xMEMsT0FBTyxJQUN4RGpELEtBQUsycEQseUJBQXlCaFMsYUFBYSxRQUFTMTBDLE9BQU9vbUQsR0FBU1EsWUFDcEU3cEQsS0FBSzJwRCx5QkFBeUJoUyxhQUFhLFNBQVUxMEMsT0FBT29tRCxHQUFTUyxhQUNyRTlwRCxLQUFLMnBELHlCQUF5QmhTLGFBQWEsUUFBUyxrQkFDcEQzM0MsS0FBSzJwRCx5QkFBeUJoUyxhQUFhLE9BQVEwUixHQUFTVSxrQkFFNUQvcEQsS0FBSzBwRCxXQUFXTSxRQUFRaHFELEtBQUsycEQsMEJBT3hCLE9BQU9wOEMsR0FDWnMzQyxNQUFNcjNDLE9BQU9ELEdBQ1RBLElBSUV2TixLQUFLSyxnQkFDUGtOLEVBQUkzSCxHQUFHLFdBQVl6QixHQUFvQm5FLEtBQUtpcUQsZ0JBQWdCOWxELE1BVXhELGdCQUFnQkEsRyxNQUV4QixNQUFNaVMsRUFBTyxDQUFDaXpDLEdBQVNRLFVBQVdSLEdBQVNTLFlBRXJDNXpDLEVBQVNsVyxLQUFLa3FELHdCQUEyQyxRQUFuQixFQUFBL2xELEVBQU1vSixJQUFJbW1DLGlCQUFTLGVBQUU3OUIsYUFjakUsR0FYSUssRUFBTyxHQUFLRSxFQUFLLEdBQ25CRixFQUFPLEdBQUtFLEVBQUssR0FDVkYsRUFBTyxHQUFLLElBQ25CQSxFQUFPLEdBQUssR0FFVkEsRUFBTyxHQUFLRSxFQUFLLEdBQ25CRixFQUFPLEdBQUtFLEVBQUssR0FDVkYsRUFBTyxHQUFLLElBQ25CQSxFQUFPLEdBQUssR0FHVmxXLEtBQUswcEQsV0FBWSxDQUNuQixNQUFNUyxFQUFlbnFELEtBQUswcEQsV0FBV1UsdUJBQXVCLGtDQUM1RCxHQUFJRCxFQUNGLElBQUssTUFBTUUsS0FBZXZuRCxNQUFNd25ELEtBQUtILEdBQ25DbnFELEtBQUswcEQsV0FBV3B4QyxZQUFZK3hDLEdBR2hDcnFELEtBQUswcEQsV0FBV3Z3QyxZQUFZa3dDLEdBQVNrQixhQUFhcjBDLEVBQU8sR0FBSSxFQUFHQSxFQUFPLEdBQUltekMsR0FBU1MsV0FBWSxxQ0FDaEc5cEQsS0FBSzBwRCxXQUFXdndDLFlBQVlrd0MsR0FBU2tCLGFBQWEsRUFBR3IwQyxFQUFPLEdBQUltekMsR0FBU1EsVUFBVzN6QyxFQUFPLEdBQUksc0NBY3pFLG9CQUFDL00sRUFBWUMsRUFBWUMsRUFBWUMsRUFBWWtoRCxHQUN6RSxNQUFNQyxFQUFPaHpDLFNBQVNteUMsZ0JBQWdCLDZCQUE4QixRQU9wRSxPQU5BYSxFQUFLOVMsYUFBYSxLQUFNMTBDLE9BQU9rRyxJQUMvQnNoRCxFQUFLOVMsYUFBYSxLQUFNMTBDLE9BQU9tRyxJQUMvQnFoRCxFQUFLOVMsYUFBYSxLQUFNMTBDLE9BQU9vRyxJQUMvQm9oRCxFQUFLOVMsYUFBYSxLQUFNMTBDLE9BQU9xRyxJQUMvQm1oRCxFQUFLOVMsYUFBYSxRQUFTLGlEQUMzQjhTLEVBQUs5UyxhQUFhLFFBQVMsa0NBQW9DNlMsR0FDeERDLEVBVWlDLG9DQUFDcnhDLEVBQWNtYSxFQUFlNWIsR0FDdEUsT0FBT2pQLEtBQUsyc0IsSUFBS2pjLEVBQU9tYSxHQUFVNWIsRUFRMUIsd0JBQXdCekIsR0FDaEMsR0FBSUEsRUFBUSxDQUNWLE1BQU1FLEVBQU8sQ0FBQ2l6QyxHQUFTUSxVQUFXUixHQUFTUyxZQUNyQ2g5QyxFQUFhLENBQ2pCdThDLEdBQVNxQiw2QkFBNkIxcUQsS0FBS3dMLE9BQU8sR0FBSXhMLEtBQUt3TCxPQUFPLEdBQUk0SyxFQUFLLElBQzNFaXpDLEdBQVNxQiw2QkFBNkIxcUQsS0FBS3dMLE9BQU8sR0FBSXhMLEtBQUt3TCxPQUFPLEdBQUk0SyxFQUFLLEtBRTdFLE1BQU8sQ0FDTDFOLEtBQUt5QyxNQUFNLEVBQUkyQixFQUFXLElBQU1vSixFQUFPLEdBQUtsVyxLQUFLd0wsT0FBTyxLQUN4RDlDLEtBQUt5QyxNQUFNLEVBQUkyQixFQUFXLElBQU05TSxLQUFLd0wsT0FBTyxHQUFLMEssRUFBTyxNQUc1RCxNQUFPLENBQUMsRUFBRyxHQVVILHFCQUFxQnZDLEcsUUFFN0IsTUFBTWczQyxFQUFzQzNxRCxLQUFLc3BELHlCQUF5QmxXLHdCQUNwRXhxQyxFQUFJK0ssRUFBRWcxQixjQUFjbUQsUUFBVTZlLEVBQW9DdnhDLEtBQ2xFdlEsRUFBSThLLEVBQUVnMUIsY0FBY29ELFFBQVU0ZSxFQUFvQ3BYLElBR2xFcVgsRUFBYzVxRCxLQUFLNnFELHdCQUF3QixDQUFDamlELEVBQUdDLElBRzdCLFFBQXhCLEVBQWEsUUFBYixFQUFBN0ksS0FBS3VrQyxnQkFBUSxlQUFFbVAsaUJBQVMsU0FBRXhyQixRQUFRLENBQ2hDaFMsT0FBUTAwQyxFQUNSOXVCLFNBQVUsTUFnQkosd0JBQXdCZ3ZCLEdBRWhDLE1BQU0xMEMsRUFBTyxDQUFDcFcsS0FBS3NwRCx5QkFBeUJ5QixZQUFhL3FELEtBQUtzcEQseUJBQXlCMEIsY0FDakZsK0MsRUFBYSxDQUNqQnU4QyxHQUFTcUIsNkJBQTZCMXFELEtBQUt3TCxPQUFPLEdBQUl4TCxLQUFLd0wsT0FBTyxHQUFJNEssRUFBSyxJQUMzRWl6QyxHQUFTcUIsNkJBQTZCMXFELEtBQUt3TCxPQUFPLEdBQUl4TCxLQUFLd0wsT0FBTyxHQUFJNEssRUFBSyxLQUc3RSxNQUFPLENBQ0wwMEMsRUFBSSxHQUFLaCtDLEVBQVcsR0FBSzlNLEtBQUt3TCxPQUFPLEdBQ3JDeEwsS0FBS3dMLE9BQU8sR0FBS3MvQyxFQUFJLEdBQUtoK0MsRUFBVyxJQU9sQyw4QkFDTCxPQUFPOU0sS0FBS3NwRCx5QkFNUCxnQkFDTCxPQUFPdHBELEtBQUswcEQsV0FNUCwyQkFDTCxPQUFPMXBELEtBQUsycEQsMEJBL1FQLEdBQUFJLGlCQUFtQixVQUtuQixHQUFBRCxXQUFhLElBS2IsR0FBQUQsVUFBWSxJQUtaLEdBQUFMLFNBQVcsZ0lBQWtJSCxHQUFTUSxVQUFZLElBQU1SLEdBQVNTLFdBQWEsdzJMQ3JEak0sTUFBT21CLFdBQWMsR0FTekIsWUFBbUJsaEQsR0FDakIsTUFBTTY2QyxFQUFPNzZDLEdBQVcsR0FFeEI4NkMsTUFBSyxlQUFHSyxRQUFTK0YsR0FBTUMsZ0JBQWlCOUYsUUFBUzZGLEdBQU1FLHFCQUFzQmxHLHNCQUFzQixHQUFTTCxLQVY5RixHQUFBdUcscUJBQXVCLGlCQUN2QixHQUFBRCxnQkFBa0IsTUNUcEMsSUFBSSxHQUF3QyxXQUN4QyxJQUFJNW9ELEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0F5UzVDLFNBcE4wQixTQUFVRyxHQU9oQyxTQUFTK25ELEVBQUtwN0MsRUFBV2pGLEVBQU9pRSxHQUM1QixJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELE9BQVNBLEtBQzdCK0osRUFBVWlGLEdBQTRCLEdBb0MxQyxPQWhDQXhMLEVBQU13TSxVQUFZQSxFQUtsQnhNLEVBQU11SCxNQUFRQSxFQU9kdkgsRUFBTTZuRCxZQUFjLEtBT3BCN25ELEVBQU12QixJQUFNLEdBS1p1QixFQUFNOG5ELGlCQUNxQjFtRCxJQUF2Qm1GLEVBQVFvZCxXQUEyQixJQUFNcGQsRUFBUW9kLFdBTXJEM2pCLEVBQU0rbkQsa0JBQW9CLEdBQ25CL25ELEVBcUtYLE9Bak5BLEdBQVU0bkQsRUFBTS9uRCxHQWlEaEIrbkQsRUFBS2hyRCxVQUFVK0YsUUFBVSxXQUNyQm5HLEtBQUtrRSxjQUFjLElBS3ZCa25ELEVBQUtockQsVUFBVW9yRCxRQUFVLGFBSXpCSixFQUFLaHJELFVBQVVzb0IsT0FBUyxXQUNwQixPQUFPMW9CLEtBQUtpQyxJQUFNLElBQU1qQyxLQUFLZ1EsV0FRakNvN0MsRUFBS2hyRCxVQUFVbWpCLGVBQWlCLFdBQzVCLElBQUt2akIsS0FBS3FyRCxZQUVOLE9BQU9yckQsS0FFWCxJQUFJK1AsRUFBTy9QLEtBQUtxckQsWUFLaEIsRUFBRyxDQUNDLEduRjVKQSxHbUY0Skl0N0MsRUFBS2pDLFdBSUwsT0FEQTlOLEtBQUtzckQsWUFBYyxFQUNadjdDLEVBRVhBLEVBQU9BLEVBQUtzN0Msa0JBQ1B0N0MsR0FFVCxPQUFPL1AsTUFNWG9yRCxFQUFLaHJELFVBQVVxckQsb0JBQXNCLFdBQ2pDLEdBQUt6ckQsS0FBS3FyRCxZQUFWLENBR0EsSUFBSXQ3QyxFQUFPL1AsS0FBS3FyRCxZQUNaL2pCLEVBQTJCLEtBQy9CLEVBQUcsQ0FDQyxHbkZsTEEsR21Ga0xJdjNCLEVBQUtqQyxXQUFnQyxDQUlyQ2lDLEVBQUtzN0MsWUFBYyxLQUNuQixNbkZ4TEgsR21GMExRdDdDLEVBQUtqQyxXQUdWdzVCLEVBQU92M0IsRW5GOUxiLEdtRmdNV0EsRUFBS2pDLFdBR1Z3NUIsRUFBSytqQixZQUFjdDdDLEVBQUtzN0MsWUFHeEIvakIsRUFBT3YzQixFQUVYQSxFQUFPdTNCLEVBQUsrakIsa0JBQ1B0N0MsS0FPYnE3QyxFQUFLaHJELFVBQVVzckQsYUFBZSxXQUMxQixPQUFPMXJELEtBQUtnUSxXQUtoQm83QyxFQUFLaHJELFVBQVUwTixTQUFXLFdBQ3RCLE9BQU85TixLQUFLK0ssT0FVaEJxZ0QsRUFBS2hyRCxVQUFVa2pCLFNBQVcsU0FBVXZZLEdBQ2hDLEduRjNORyxJbUYyTkMvSyxLQUFLK0ssT0FBNkIvSyxLQUFLK0ssTUFBUUEsRUFDL0MsTUFBTSxJQUFJdEUsTUFBTSxnQ0FFcEJ6RyxLQUFLK0ssTUFBUUEsRUFDYi9LLEtBQUttRyxXQVNUaWxELEVBQUtockQsVUFBVThRLEtBQU8sV0FDbEIsS0FRSms2QyxFQUFLaHJELFVBQVV1a0IsU0FBVyxTQUFVc2pCLEVBQUlyakIsR0FDcEMsSUFBSzVrQixLQUFLc3JELFlBQ04sT0FBTyxFQUVYLElBQUk3NEIsRUFBUXp5QixLQUFLdXJELGtCQUFrQnRqQixHQUNuQyxHQUFLeFYsR0FJQSxJQUFlLElBQVhBLEVBQ0wsT0FBTyxPQUpQQSxFQUFRN04sRUFDUjVrQixLQUFLdXJELGtCQUFrQnRqQixHQUFNeFYsRUFLakMsSUFBSXdKLEVBQVFyWCxFQUFPNk4sRUFBUSxJQUFPLEdBQ2xDLE9BQUl3SixHQUFTajhCLEtBQUtzckQsWUFDUCxFQUVKbmdDLEdBQU84USxFQUFRajhCLEtBQUtzckQsY0FTL0JGLEVBQUtockQsVUFBVXNrQixhQUFlLFNBQVV1akIsR0FDcEMsUUFBS2pvQyxLQUFLc3JELGNBRzZCLElBQWhDdHJELEtBQUt1ckQsa0JBQWtCdGpCLElBTWxDbWpCLEVBQUtockQsVUFBVStuQixjQUFnQixTQUFVOGYsR0FDakNqb0MsS0FBS3NyRCxjQUNMdHJELEtBQUt1ckQsa0JBQWtCdGpCLElBQU8sSUFHL0JtakIsRUFsTmMsQ0FtTnZCLEdDeFNGLElBQUksR0FBd0MsV0FDeEMsSUFBSTlvRCxFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBc0c1QyxTQTlFK0IsU0FBVUcsR0FRckMsU0FBU3NvRCxFQUFVbmdELEVBQVFzQixFQUFZeU4sRUFBWXhQLEdBQy9DLElBQUl2SCxFQUFRSCxFQUFPTCxLQUFLaEQsT0FBU0EsS0FxQmpDLE9BaEJBd0QsRUFBTWdJLE9BQVNBLEVBS2ZoSSxFQUFNcXNDLFlBQWN0MUIsRUFLcEIvVyxFQUFNc0osV0FBYUEsRUFLbkJ0SixFQUFNdUgsTUFBUUEsRUFDUHZILEVBOENYLE9BM0VBLEdBQVVtb0QsRUFBV3RvRCxHQWtDckJzb0QsRUFBVXZyRCxVQUFVK0YsUUFBVSxXQUMxQm5HLEtBQUtrRSxjQUFjLElBS3ZCeW5ELEVBQVV2ckQsVUFBVXFMLFVBQVksV0FDNUIsT0FBT3pMLEtBQUt3TCxRQU1oQm1nRCxFQUFVdnJELFVBQVVnb0IsU0FBVyxXQUMzQixPQUFPLEtBS1h1akMsRUFBVXZyRCxVQUFVd3JELGNBQWdCLFdBQ2hDLE9BQU81ckQsS0FBSzZ2QyxhQUtoQjhiLEVBQVV2ckQsVUFBVTZqQixjQUFnQixXQUNoQyxPQUE4QmprQixLQUFlLFlBS2pEMnJELEVBQVV2ckQsVUFBVTBOLFNBQVcsV0FDM0IsT0FBTzlOLEtBQUsrSyxPQU1oQjRnRCxFQUFVdnJELFVBQVU4USxLQUFPLFdBQ3ZCLEtBRUd5NkMsRUE1RW1CLENBNkU1QixHQ3JHRixJQUFJLEdBQXdDLFdBQ3hDLElBQUlycEQsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQXlKckMsU0FBUzJvRCxHQUFZNzZDLEVBQU84NkMsRUFBYUMsR0FDNUMsSUFBSUMsRUFBc0MsRUFDMUMsR0FBSUEsRUFBSWxxQixLQUFPenZCLEdBQWMsQ0FDekIsSUFBSTQ1QyxFQUFVRCxFQUFJejVDLFNBQ2QyNUMsR0FBYyxFQXVCbEIsT0FuQkFELEVBQ0tFLE1BQUssV0FDRkQsR0FDQUosT0FHSE0sT0FBTSxTQUFVejVDLEdBQ2J1NUMsSUFHbUIsa0JBQWZ2NUMsRUFBTXRLLE1BQ1ksd0JBQWxCc0ssRUFBTXhLLFFBQ04yakQsSUFHQUMsUUFsQkcsV0FDWEcsR0FBYyxHQXVCdEIsSUFBSTNWLEVBQWUsQ0FDZjl3QyxFQUFXdW1ELEV4SHhKVCxPd0h3SjhCRixHQUNoQ3JtRCxFQUFXdW1ELEV4SHJLUixRd0hxSzhCRCxJQUVyQyxPQUFPLFdBQ0h4VixFQUFhdjFCLFFBQVF0YixLQWxKSyxTQUFVckMsR0FVeEMsU0FBU2dwRCxFQUFhN2dELEVBQVFzQixFQUFZeU4sRUFBWXVuQixFQUFLQyxFQUFhdXFCLEdBQ3BFLElBQUk5b0QsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU13TCxFQUFRc0IsRUFBWXlOLEV4RzdDaEQsSXdHNkNnRnZhLEtBNkJsRixPQXhCQXdELEVBQU0rb0QsS0FBT3pxQixFQUtidCtCLEVBQU1ncEQsT0FBUyxJQUFJbDZDLE1BQ0MsT0FBaEJ5dkIsSUFDQXYrQixFQUFNZ3BELE9BQU96cUIsWUFBY0EsR0FNL0J2K0IsRUFBTWlwRCxVQUFZLEtBS2xCanBELEVBQU11SCxNeEdwRUosRXdHeUVGdkgsRUFBTWtwRCxtQkFBcUJKLEVBQ3BCOW9ELEVBdkNYLEdBQVU2b0QsRUFBY2hwRCxHQTZDeEJncEQsRUFBYWpzRCxVQUFVZ29CLFNBQVcsV0FDOUIsT0FBT3BvQixLQUFLd3NELFFBT2hCSCxFQUFhanNELFVBQVV1c0Qsa0JBQW9CLFdBQ3ZDM3NELEtBQUsrSyxNeEd0RkYsRXdHdUZIL0ssS0FBSzRzRCxpQkFDTDVzRCxLQUFLbUcsV0FPVGttRCxFQUFhanNELFVBQVV5c0QsaUJBQW1CLGdCQUNkam9ELElBQXBCNUUsS0FBSzhNLGFBQ0w5TSxLQUFLOE0sV0FBYThJLEdBQVU1VixLQUFLd0wsUUFBVXhMLEtBQUt3c0QsT0FBTzUwQyxRQUUzRDVYLEtBQUsrSyxNeEdwR0QsRXdHcUdKL0ssS0FBSzRzRCxpQkFDTDVzRCxLQUFLbUcsV0FRVGttRCxFQUFhanNELFVBQVU4USxLQUFPLFd4R2hIeEIsR3dHaUhFbFIsS0FBSytLLE94RzlHTixHd0c4R2tDL0ssS0FBSytLLFFBQ3RDL0ssS0FBSytLLE14R2pISixFd0drSEQvSyxLQUFLbUcsVUFDTG5HLEtBQUswc0QsbUJBQW1CMXNELEtBQU1BLEtBQUt1c0QsTUFDbkN2c0QsS0FBS3lzRCxVQUFZWixHQUFZN3JELEtBQUt3c0QsT0FBUXhzRCxLQUFLNnNELGlCQUFpQnhuRCxLQUFLckYsTUFBT0EsS0FBSzJzRCxrQkFBa0J0bkQsS0FBS3JGLFNBTWhIcXNELEVBQWFqc0QsVUFBVTBzRCxTQUFXLFNBQVU5N0MsR0FDeENoUixLQUFLd3NELE9BQVN4N0MsRUFDZGhSLEtBQUs4TSxXQUFhOEksR0FBVTVWLEtBQUt3TCxRQUFVeEwsS0FBS3dzRCxPQUFPNTBDLFFBTzNEeTBDLEVBQWFqc0QsVUFBVXdzRCxlQUFpQixXQUNoQzVzRCxLQUFLeXNELFlBQ0x6c0QsS0FBS3lzRCxZQUNMenNELEtBQUt5c0QsVUFBWSxPQXJHSSxDQXlHL0IsSUNsSkYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbnFELEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EwSjVDLFNBcEkrQixTQUFVRyxHQVVyQyxTQUFTMHBELEVBQVUvOEMsRUFBV2pGLEVBQU8rMkIsRUFBS0MsRUFBYWlyQixFQUFrQmgrQyxHQUNyRSxJQUFJeEwsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU1nUSxFQUFXakYsRUFBT2lFLElBQWdCaFAsS0FnQ2hFLE9BM0JBd0QsRUFBTXlwRCxhQUFlbHJCLEVBT3JCditCLEVBQU0rb0QsS0FBT3pxQixFQUNidCtCLEVBQU12QixJQUFNNi9CLEVBS1p0K0IsRUFBTWdwRCxPQUFTLElBQUlsNkMsTUFDQyxPQUFoQnl2QixJQUNBditCLEVBQU1ncEQsT0FBT3pxQixZQUFjQSxHQU0vQnYrQixFQUFNaXBELFVBQVksS0FLbEJqcEQsRUFBTTBwRCxrQkFBb0JGLEVBQ25CeHBELEVBNkVYLE9BdkhBLEdBQVV1cEQsRUFBVzFwRCxHQWlEckIwcEQsRUFBVTNzRCxVQUFVZ29CLFNBQVcsV0FDM0IsT0FBT3BvQixLQUFLd3NELFFBTWhCTyxFQUFVM3NELFVBQVUwc0QsU0FBVyxTQUFVbm5CLEdBQ3JDM2xDLEtBQUt3c0QsT0FBUzdtQixFQUNkM2xDLEtBQUsrSyxNdEZ4RUQsRXNGeUVKL0ssS0FBSzRzRCxpQkFDTDVzRCxLQUFLbUcsV0FPVDRtRCxFQUFVM3NELFVBQVV1c0Qsa0JBQW9CLFdBMEQ1QyxJQUNRUSxFQTFEQW50RCxLQUFLK0ssTXRGN0VGLEVzRjhFSC9LLEtBQUs0c0QsaUJBQ0w1c0QsS0FBS3dzRCxTQXdETFcsRUFBTWoyQyxHQUFzQixFQUFHLElBQy9CazJDLFVBQVksZ0JBQ2hCRCxFQUFJRSxTQUFTLEVBQUcsRUFBRyxFQUFHLEdBQ2ZGLEVBQUk1MUMsUUExRFB2WCxLQUFLbUcsV0FPVDRtRCxFQUFVM3NELFVBQVV5c0QsaUJBQW1CLFdBQ25DLElBQUk3N0MsRUFBeUNoUixLQUFXLE9BQ3BEZ1IsRUFBTXM4QyxjQUFnQnQ4QyxFQUFNdThDLGNBQzVCdnRELEtBQUsrSyxNdEYvRkwsRXNGa0dBL0ssS0FBSytLLE10RjVGTixFc0Y4RkgvSyxLQUFLNHNELGlCQUNMNXNELEtBQUttRyxXQU1UNG1ELEVBQVUzc0QsVUFBVThRLEtBQU8sV3RGdEdwQixHc0Z1R0NsUixLQUFLK0ssUUFDTC9LLEtBQUsrSyxNdEYvR1AsRXNGZ0hFL0ssS0FBS3dzRCxPQUFTLElBQUlsNkMsTUFDUSxPQUF0QnRTLEtBQUtpdEQsZUFDTGp0RCxLQUFLd3NELE9BQU96cUIsWUFBYy9oQyxLQUFLaXRELGV0RmxIckMsR3NGcUhFanRELEtBQUsrSyxRQUNML0ssS0FBSytLLE10RnJISixFc0ZzSEQvSyxLQUFLbUcsVUFDTG5HLEtBQUtrdEQsa0JBQWtCbHRELEtBQU1BLEtBQUt1c0QsTUFDbEN2c0QsS0FBS3lzRCxVQUFZWixHQUFZN3JELEtBQUt3c0QsT0FBUXhzRCxLQUFLNnNELGlCQUFpQnhuRCxLQUFLckYsTUFBT0EsS0FBSzJzRCxrQkFBa0J0bkQsS0FBS3JGLFNBUWhIK3NELEVBQVUzc0QsVUFBVXdzRCxlQUFpQixXQUM3QjVzRCxLQUFLeXNELFlBQ0x6c0QsS0FBS3lzRCxZQUNMenNELEtBQUt5c0QsVUFBWSxPQUdsQk0sRUF4SG1CLENBeUg1QixJQzZORixHQTFVbUMsV0FTL0IsU0FBU1MsRUFBY3QvQixFQUFZdS9CLEVBQVlDLEVBQWNDLEVBQWlCQyxFQUFnQkMsR0FLMUY3dEQsS0FBSzh0RCxZQUFjNS9CLEVBS25CbHVCLEtBQUsrdEQsWUFBY04sRUFFbkIsSUFBSU8sRUFBb0IsR0FDcEJDLEVBQWV0c0MsR0FBYTNoQixLQUFLK3RELFlBQWEvdEQsS0FBSzh0RCxhQU12RDl0RCxLQUFLa3VELGNBQWdCLFNBQVV4NkMsR0FDM0IsSUFBSXpSLEVBQU15UixFQUFFLEdBQUssSUFBTUEsRUFBRSxHQUl6QixPQUhLczZDLEVBQWtCL3JELEtBQ25CK3JELEVBQWtCL3JELEdBQU9nc0QsRUFBYXY2QyxJQUVuQ3M2QyxFQUFrQi9yRCxJQU03QmpDLEtBQUttdUQsaUJBQW1CUixFQUt4QjN0RCxLQUFLb3VELHVCQUF5QlIsRUFBaUJBLEVBSy9DNXRELEtBQUtxdUQsV0FBYSxHQU1sQnJ1RCxLQUFLc3VELGlCQUFrQixFQUt2QnR1RCxLQUFLdXVELGtCQUNEdnVELEtBQUs4dEQsWUFBWTN3QyxjQUNYd3dDLEtBQ0EzdEQsS0FBSzh0RCxZQUFZcmlELGFBQ25CLEdBQVNraUQsSUFBb0IsR0FBUzN0RCxLQUFLOHRELFlBQVlyaUQsYUFLL0R6TCxLQUFLd3VELGtCQUFvQnh1RCxLQUFLOHRELFlBQVlyaUQsWUFDcEMsR0FBU3pMLEtBQUs4dEQsWUFBWXJpRCxhQUMxQixLQUtOekwsS0FBS3l1RCxrQkFBb0J6dUQsS0FBSyt0RCxZQUFZdGlELFlBQ3BDLEdBQVN6TCxLQUFLK3RELFlBQVl0aUQsYUFDMUIsS0FDTixJQUFJaWpELEVBQXFCajVDLEdBQVdpNEMsR0FDaENpQixFQUFzQm41QyxHQUFZazRDLEdBQ2xDa0IsRUFBeUJyNUMsR0FBZW00QyxHQUN4Q21CLEVBQXdCdjVDLEdBQWNvNEMsR0FDdENvQixFQUFnQjl1RCxLQUFLa3VELGNBQWNRLEdBQ25DSyxFQUFpQi91RCxLQUFLa3VELGNBQWNTLEdBQ3BDSyxFQUFvQmh2RCxLQUFLa3VELGNBQWNVLEdBQ3ZDSyxFQUFtQmp2RCxLQUFLa3VELGNBQWNXLEdBV3RDSyxFQWhIVSxJQWlIVHJCLEVBQ0tubEQsS0FBS0QsSUFBSSxFQUFHQyxLQUFLbXdCLEtBQUs5dkIsRUFBSzJNLEdBQVFnNEMsSUFDaENHLEVBQ0dBLEVBQ0EsSUFDQSxRQUNOLEdBRVYsR0FEQTd0RCxLQUFLbXZELFNBQVNULEVBQW9CQyxFQUFxQkMsRUFBd0JDLEVBQXVCQyxFQUFlQyxFQUFnQkMsRUFBbUJDLEVBQWtCQyxHQUN0S2x2RCxLQUFLc3VELGdCQUFpQixDQUN0QixJQUFJYyxFQUFjL2tELElBQ2xCckssS0FBS3F1RCxXQUFXcnRDLFNBQVEsU0FBVXF1QyxFQUFVbHVELEVBQUdKLEdBQzNDcXVELEVBQWMxbUQsS0FBS0YsSUFBSTRtRCxFQUFhQyxFQUFTcnRELE9BQU8sR0FBRyxHQUFJcXRELEVBQVNydEQsT0FBTyxHQUFHLEdBQUlxdEQsRUFBU3J0RCxPQUFPLEdBQUcsT0FJekdoQyxLQUFLcXVELFdBQVdydEMsUUFBUSxTQUFVcXVDLEdBQzlCLEdBQUkzbUQsS0FBS0QsSUFBSTRtRCxFQUFTcnRELE9BQU8sR0FBRyxHQUFJcXRELEVBQVNydEQsT0FBTyxHQUFHLEdBQUlxdEQsRUFBU3J0RCxPQUFPLEdBQUcsSUFDMUVvdEQsRUFDQXB2RCxLQUFLd3VELGtCQUFvQixFQUFHLENBQzVCLElBQUljLEVBQWMsQ0FDZCxDQUFDRCxFQUFTcnRELE9BQU8sR0FBRyxHQUFJcXRELEVBQVNydEQsT0FBTyxHQUFHLElBQzNDLENBQUNxdEQsRUFBU3J0RCxPQUFPLEdBQUcsR0FBSXF0RCxFQUFTcnRELE9BQU8sR0FBRyxJQUMzQyxDQUFDcXRELEVBQVNydEQsT0FBTyxHQUFHLEdBQUlxdEQsRUFBU3J0RCxPQUFPLEdBQUcsS0FFM0NzdEQsRUFBWSxHQUFHLEdBQUtGLEVBQWNwdkQsS0FBS3d1RCxrQkFBb0IsSUFDM0RjLEVBQVksR0FBRyxJQUFNdHZELEtBQUt3dUQsbUJBRTFCYyxFQUFZLEdBQUcsR0FBS0YsRUFBY3B2RCxLQUFLd3VELGtCQUFvQixJQUMzRGMsRUFBWSxHQUFHLElBQU10dkQsS0FBS3d1RCxtQkFFMUJjLEVBQVksR0FBRyxHQUFLRixFQUFjcHZELEtBQUt3dUQsa0JBQW9CLElBQzNEYyxFQUFZLEdBQUcsSUFBTXR2RCxLQUFLd3VELG1CQUs5QixJQUFJcDZDLEVBQU8xTCxLQUFLRixJQUFJOG1ELEVBQVksR0FBRyxHQUFJQSxFQUFZLEdBQUcsR0FBSUEsRUFBWSxHQUFHLElBQzlENW1ELEtBQUtELElBQUk2bUQsRUFBWSxHQUFHLEdBQUlBLEVBQVksR0FBRyxHQUFJQSxFQUFZLEdBQUcsSUFDOURsN0MsRUFBT3BVLEtBQUt3dUQsa0JBQW9CLElBQ3ZDYSxFQUFTcnRELE9BQVNzdEQsS0FHNUJqcUQsS0FBS3JGLE9BRVhndUQsRUFBb0IsR0EwTHhCLE9BOUtBUixFQUFjcHRELFVBQVVtdkQsYUFBZSxTQUFVM3VELEVBQUdDLEVBQUc2UyxFQUFHODdDLEVBQU1DLEVBQU1DLEdBQ2xFMXZELEtBQUtxdUQsV0FBVzVyRCxLQUFLLENBQ2pCVCxPQUFRLENBQUN3dEQsRUFBTUMsRUFBTUMsR0FDckJ2dkQsT0FBUSxDQUFDUyxFQUFHQyxFQUFHNlMsTUFtQnZCODVDLEVBQWNwdEQsVUFBVSt1RCxTQUFXLFNBQVV2dUQsRUFBR0MsRUFBRzZTLEVBQUcvUSxFQUFHNnNELEVBQU1DLEVBQU1DLEVBQU1DLEVBQU1ULEdBQzdFLElBQUlVLEVBQW1CLzdDLEdBQWUsQ0FBQzI3QyxFQUFNQyxFQUFNQyxFQUFNQyxJQUNyREUsRUFBa0I3dkQsS0FBS3d1RCxrQkFDckIsR0FBU29CLEdBQW9CNXZELEtBQUt3dUQsa0JBQ2xDLEtBQ0ZzQixFQUEwQzl2RCxLQUFzQixrQkFHaEUrdkQsRUFBUy92RCxLQUFLOHRELFlBQVkzd0MsWUFDMUIweUMsRUFBa0IsSUFDbEJBLEVBQWtCLEVBQ2xCRyxHQUFtQixFQWF2QixHQVpJZCxFQUFpQixJQUNibHZELEtBQUsrdEQsWUFBWXR3QyxZQUFjemQsS0FBS3l1RCxvQkFHcEN1QixFQURzQixHQURDbjhDLEdBQWUsQ0FBQ2pULEVBQUdDLEVBQUc2UyxFQUFHL1EsS0FDRzNDLEtBQUt5dUQsa0JBck0vQyxLQXVNbUN1QixJQUUzQ0QsR0FBVS92RCxLQUFLOHRELFlBQVlyd0MsWUFBY295QyxJQUMxQ0csRUFDSUgsRUEzTUssS0EyTW1DRyxPQUcvQ0EsR0FBb0Jod0QsS0FBS211RCxrQkFDdEI4QixTQUFTTCxFQUFpQixLQUMxQkssU0FBU0wsRUFBaUIsS0FDMUJLLFNBQVNMLEVBQWlCLEtBQzFCSyxTQUFTTCxFQUFpQixNQUNyQjM0QyxHQUFXMjRDLEVBQWtCNXZELEtBQUttdUQsa0JBTC9DLENBV0EsSUFBSStCLEVBQWMsRUFDbEIsS0FBS0YsR0FDSUMsU0FBU1QsRUFBSyxLQUNkUyxTQUFTVCxFQUFLLEtBQ2RTLFNBQVNSLEVBQUssS0FDZFEsU0FBU1IsRUFBSyxLQUNkUSxTQUFTUCxFQUFLLEtBQ2RPLFNBQVNQLEVBQUssS0FDZE8sU0FBU04sRUFBSyxLQUNkTSxTQUFTTixFQUFLLEtBQ2YsR0FBSVQsRUFBaUIsRUFDakJjLEdBQW1CLE9BVW5CLEdBQW1CLElBTG5CRSxHQUNNRCxTQUFTVCxFQUFLLEtBQVFTLFNBQVNULEVBQUssSUFBVSxFQUFKLElBQ3RDUyxTQUFTUixFQUFLLEtBQVFRLFNBQVNSLEVBQUssSUFBVSxFQUFKLElBQzFDUSxTQUFTUCxFQUFLLEtBQVFPLFNBQVNQLEVBQUssSUFBVSxFQUFKLElBQzFDTyxTQUFTTixFQUFLLEtBQVFNLFNBQVNOLEVBQUssSUFBVSxFQUFKLEtBRWpDLEdBQWZPLEdBQ2UsR0FBZkEsR0FDZSxHQUFmQSxFQUNBLE9BS2hCLEdBQUloQixFQUFpQixFQUFHLENBQ3BCLElBQUtjLEVBQWtCLENBQ25CLElBQUk5NUMsRUFBUyxFQUFFdFYsRUFBRSxHQUFLOFMsRUFBRSxJQUFNLEdBQUk5UyxFQUFFLEdBQUs4UyxFQUFFLElBQU0sR0FDN0N5OEMsRUFBWW53RCxLQUFLa3VELGNBQWNoNEMsR0FDL0IzTSxPQUFLLEVBS0xBLEVBSkF3bUQsR0FDdUIsR0FBT1AsRUFBSyxHQUFJTSxHQUNuQyxHQUFPSixFQUFLLEdBQUlJLElBQ2hCLEVBQ21CLEdBQU9LLEVBQVUsR0FBSUwsSUFHdENOLEVBQUssR0FBS0UsRUFBSyxJQUFNLEVBQUlTLEVBQVUsR0FFN0MsSUFBSTNtRCxHQUFNZ21ELEVBQUssR0FBS0UsRUFBSyxJQUFNLEVBQUlTLEVBQVUsR0FFN0NILEVBRDRCem1ELEVBQUtBLEVBQUtDLEVBQUtBLEVBQ0F4SixLQUFLb3VELHVCQUVwRCxHQUFJNEIsRUFBa0IsQ0FDbEIsR0FBSXRuRCxLQUFLMnNCLElBQUl6MEIsRUFBRSxHQUFLOFMsRUFBRSxLQUFPaEwsS0FBSzJzQixJQUFJejBCLEVBQUUsR0FBSzhTLEVBQUUsSUFBSyxDQUVoRCxJQUFJMDhDLEVBQUssRUFBRXZ2RCxFQUFFLEdBQUs2UyxFQUFFLElBQU0sR0FBSTdTLEVBQUUsR0FBSzZTLEVBQUUsSUFBTSxHQUN6QzI4QyxFQUFRcndELEtBQUtrdUQsY0FBY2tDLEdBQzNCRSxFQUFLLEVBQUUzdEQsRUFBRSxHQUFLL0IsRUFBRSxJQUFNLEdBQUkrQixFQUFFLEdBQUsvQixFQUFFLElBQU0sR0FDekMydkQsRUFBUXZ3RCxLQUFLa3VELGNBQWNvQyxHQUMvQnR3RCxLQUFLbXZELFNBQVN2dUQsRUFBR0MsRUFBR3V2RCxFQUFJRSxFQUFJZCxFQUFNQyxFQUFNWSxFQUFPRSxFQUFPckIsRUFBaUIsR0FDdkVsdkQsS0FBS212RCxTQUFTbUIsRUFBSUYsRUFBSTE4QyxFQUFHL1EsRUFBRzR0RCxFQUFPRixFQUFPWCxFQUFNQyxFQUFNVCxFQUFpQixPQUV0RSxDQUVELElBQUlzQixFQUFLLEVBQUU1dkQsRUFBRSxHQUFLQyxFQUFFLElBQU0sR0FBSUQsRUFBRSxHQUFLQyxFQUFFLElBQU0sR0FDekM0dkQsRUFBUXp3RCxLQUFLa3VELGNBQWNzQyxHQUMzQkUsRUFBSyxFQUFFaDlDLEVBQUUsR0FBSy9RLEVBQUUsSUFBTSxHQUFJK1EsRUFBRSxHQUFLL1EsRUFBRSxJQUFNLEdBQ3pDZ3VELEVBQVEzd0QsS0FBS2t1RCxjQUFjd0MsR0FDL0Ixd0QsS0FBS212RCxTQUFTdnVELEVBQUc0dkQsRUFBSUUsRUFBSS90RCxFQUFHNnNELEVBQU1pQixFQUFPRSxFQUFPaEIsRUFBTVQsRUFBaUIsR0FDdkVsdkQsS0FBS212RCxTQUFTcUIsRUFBSTN2RCxFQUFHNlMsRUFBR2c5QyxFQUFJRCxFQUFPaEIsRUFBTUMsRUFBTWlCLEVBQU96QixFQUFpQixHQUUzRSxRQUdSLEdBQUlhLEVBQVEsQ0FDUixJQUFLL3ZELEtBQUt1dUQsa0JBQ04sT0FFSnZ1RCxLQUFLc3VELGlCQUFrQixFQU1BLElBQVIsR0FBZDRCLElBQ0Rsd0QsS0FBS3V2RCxhQUFhM3VELEVBQUc4UyxFQUFHL1EsRUFBRzZzRCxFQUFNRSxFQUFNQyxHQUVoQixJQUFSLEdBQWRPLElBQ0Rsd0QsS0FBS3V2RCxhQUFhM3VELEVBQUc4UyxFQUFHN1MsRUFBRzJ1RCxFQUFNRSxFQUFNRCxHQUV2Q1MsSUFFMkIsSUFBUixHQUFkQSxJQUNEbHdELEtBQUt1dkQsYUFBYTF1RCxFQUFHOEIsRUFBRy9CLEVBQUc2dUQsRUFBTUUsRUFBTUgsR0FFaEIsSUFBUixFQUFkVSxJQUNEbHdELEtBQUt1dkQsYUFBYTF1RCxFQUFHOEIsRUFBRytRLEVBQUcrN0MsRUFBTUUsRUFBTUQsTUFTbkRsQyxFQUFjcHRELFVBQVV3d0Qsc0JBQXdCLFdBQzVDLElBQUlwbEQsRXJHN0pELENBQUNuQixJQUFVQSxLQUFVLEtBQVcsS3FHb0tuQyxPQU5BckssS0FBS3F1RCxXQUFXcnRDLFNBQVEsU0FBVXF1QyxFQUFVbHVELEVBQUdKLEdBQzNDLElBQUkrZ0MsRUFBTXV0QixFQUFTcnRELE9BQ25CK1IsR0FBaUJ2SSxFQUFRczJCLEVBQUksSUFDN0IvdEIsR0FBaUJ2SSxFQUFRczJCLEVBQUksSUFDN0IvdEIsR0FBaUJ2SSxFQUFRczJCLEVBQUksT0FFMUJ0MkIsR0FLWGdpRCxFQUFjcHRELFVBQVV5d0QsYUFBZSxXQUNuQyxPQUFPN3dELEtBQUtxdUQsWUFFVGIsRUF4VXVCLEdDM0IzQixJQ0VIc0QsR0RHT0MsR0FBMkIsQ0FDbENDLHVCQUF1QixFQUN2QkMseUJBQXlCLEdDTTdCLFNBQVNDLEdBQWlCL0QsRUFBS2dFLEVBQUlDLEVBQUlDLEVBQUlDLEdBQ3ZDbkUsRUFBSXJ6QyxZQUNKcXpDLEVBQUlwekMsT0FBTyxFQUFHLEdBQ2RvekMsRUFBSW56QyxPQUFPbTNDLEVBQUlDLEdBQ2ZqRSxFQUFJbnpDLE9BQU9xM0MsRUFBSUMsR0FDZm5FLEVBQUlvRSxZQUNKcEUsRUFBSXR6QyxPQUNKc3pDLEVBQUlsekMsT0FDSmt6QyxFQUFJRSxTQUFTLEVBQUcsRUFBRzNrRCxLQUFLRCxJQUFJMG9ELEVBQUlFLEdBQU0sRUFBRzNvRCxLQUFLRCxJQUFJMm9ELEVBQUlFLElBQ3REbkUsRUFBSTdsQyxVQVVSLFNBQVNrcUMsR0FBOEIvMkMsRUFBTXpGLEdBRXpDLE9BQVF0TSxLQUFLMnNCLElBQUk1YSxFQUFjLEVBQVR6RixHQUFjLEtBQU8sR0FDdkN0TSxLQUFLMnNCLElBQUk1YSxFQUFjLEVBQVR6RixFQUFhLEdBQUssUUFBYyxFQXVDL0MsU0FBU3k4QyxHQUEwQnZqQyxFQUFZdS9CLEVBQVlqM0IsRUFBY0UsR0FDNUUsSUFBSUgsRUFBZTNqQixHQUFVNGpCLEVBQWNpM0IsRUFBWXYvQixHQUVuRHVJLEVBQW1CMVosR0FBbUIwd0MsRUFBWS8yQixFQUFrQkYsR0FDcEVrN0IsRUFBc0JqRSxFQUFXbndDLHdCQUNUMVksSUFBeEI4c0QsSUFDQWo3QixHQUFvQmk3QixHQUV4QixJQUFJQyxFQUFzQnpqQyxFQUFXNVEsd0JBQ1QxWSxJQUF4QitzRCxJQUNBbDdCLEdBQW9CazdCLEdBS3hCLElBQUlDLEVBQWUxakMsRUFBV3ppQixZQUM5QixJQUFLbW1ELEdBQWdCMzlDLEdBQW1CMjlDLEVBQWNyN0IsR0FBZSxDQUNqRSxJQUFJczdCLEVBQXFCOTBDLEdBQW1CbVIsRUFBWXVJLEVBQWtCRixHQUN0RUUsRUFDQXc1QixTQUFTNEIsSUFBdUJBLEVBQXFCLElBQ3JEcDdCLEdBQW9CbzdCLEdBRzVCLE9BQU9wN0IsRUN4R1gsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbjBCLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0E0UTVDLFNBeE9nQyxTQUFVRyxHQWlCdEMsU0FBU3l1RCxFQUFXNWpDLEVBQVk2akMsRUFBZ0J0RSxFQUFZdUUsRUFBZ0JoaUQsRUFBV2lpRCxFQUFrQjEzQyxFQUFZcU4sRUFBUXNxQyxFQUFpQkMsRUFBb0JDLEVBQWlCQyxHQUMvSyxJQUFJN3VELEVBQVFILEVBQU9MLEtBQUtoRCxLQUFNZ1EsRTFGL0M1QixJMEYrQzBEaFEsS0FLNUR3RCxFQUFNOHVELGtCQUFtQzF0RCxJQUFwQnd0RCxHQUFnQ0EsRUFLckQ1dUQsRUFBTSt1RCxnQkFBa0JGLEVBS3hCN3VELEVBQU1xc0MsWUFBY3QxQixFQUtwQi9XLEVBQU1ndkQsUUFBVTVxQyxFQUtoQnBrQixFQUFNaXZELFFBQVUsS0FLaEJqdkQsRUFBTWt2RCxnQkFBa0JYLEVBS3hCdnVELEVBQU1tdkQsZ0JBQWtCWCxFQUt4Qnh1RCxFQUFNb3ZELGtCQUFvQlgsR0FBc0NqaUQsRUFLaEV4TSxFQUFNcXZELGFBQWUsR0FLckJydkQsRUFBTXN2RCxxQkFBdUIsS0FLN0J0dkQsRUFBTXV2RCxTQUFXLEVBQ2pCLElBQUlyRixFQUFlc0UsRUFBZXpyQyxtQkFBbUIvaUIsRUFBTW92RCxtQkFDdkRJLEVBQWtCeHZELEVBQU1tdkQsZ0JBQWdCbG5ELFlBQ3hDa2lELEVBQWtCbnFELEVBQU1rdkQsZ0JBQWdCam5ELFlBQ3hDd25ELEVBQXNCRCxFQUNwQmo4QyxHQUFnQjIyQyxFQUFjc0YsR0FDOUJ0RixFQUNOLEdBQXFDLElBQWpDaDRDLEdBQVF1OUMsR0FJUixPQURBenZELEVBQU11SCxNMUZ4R1AsRTBGeUdRdkgsRUFFWCxJQUFJMHZELEVBQW1CaGxDLEVBQVd6aUIsWUFDOUJ5bkQsSUFLSXZGLEVBSkNBLEVBSWlCNTJDLEdBQWdCNDJDLEVBQWlCdUYsR0FIakNBLEdBTTFCLElBQUl4OEIsRUFBbUJzN0IsRUFBZS90QyxjQUFjemdCLEVBQU1vdkQsa0JBQWtCLElBQ3hFbjhCLEVEZEwsU0FBeUN2SSxFQUFZdS9CLEVBQVlDLEVBQWNoM0IsR0FDbEYsSUFBSUYsRUFBZTNnQixHQUFVNjNDLEdBQ3pCajNCLEVBQW1CZzdCLEdBQTBCdmpDLEVBQVl1L0IsRUFBWWozQixFQUFjRSxHQU92RixRQU5LdTVCLFNBQVN4NUIsSUFBcUJBLEdBQW9CLElBQ25EcmhCLEdBQWNzNEMsR0FBYyxTQUFVMzNDLEdBRWxDLE9BREEwZ0IsRUFBbUJnN0IsR0FBMEJ2akMsRUFBWXUvQixFQUFZMTNDLEVBQVEyZ0IsR0FDdEV1NUIsU0FBU3g1QixJQUFxQkEsRUFBbUIsS0FHekRBLEVDS29CMDhCLENBQWdDamxDLEVBQVl1L0IsRUFBWXdGLEVBQXFCdjhCLEdBQ3BHLElBQUt1NUIsU0FBU3g1QixJQUFxQkEsR0FBb0IsRUFJbkQsT0FEQWp6QixFQUFNdUgsTTFGekhQLEUwRjBIUXZILEVBRVgsSUFBSTR2RCxPQUFnRHh1RCxJQUF2QnV0RCxFQUFtQ0EsRUNuSTNDLEdEeUlyQixHQURBM3VELEVBQU02dkQsZUFBaUIsSUFBSSxHQUFjbmxDLEVBQVl1L0IsRUFBWXdGLEVBQXFCdEYsRUFBaUJsM0IsRUFBbUIyOEIsRUFBd0IxOEIsR0FDL0YsSUFBL0NsekIsRUFBTTZ2RCxlQUFleEMsZUFBZTN2RCxPQUdwQyxPQURBc0MsRUFBTXVILE0xRnBJUCxFMEZxSVF2SCxFQUVYQSxFQUFNdXZELFNBQVdoQixFQUFlanVDLGtCQUFrQjJTLEdBQ2xELElBQUltN0IsRUFBZXB1RCxFQUFNNnZELGVBQWV6Qyx3QkFVeEMsR0FUSWpELElBQ0l6L0IsRUFBVy9RLFlBQ1h5MEMsRUFBYSxHQUFLLEVBQU1BLEVBQWEsR0FBSWpFLEVBQWdCLEdBQUlBLEVBQWdCLElBQzdFaUUsRUFBYSxHQUFLLEVBQU1BLEVBQWEsR0FBSWpFLEVBQWdCLEdBQUlBLEVBQWdCLEtBRzdFaUUsRUFBZTc2QyxHQUFnQjY2QyxFQUFjakUsSUFHaERqNEMsR0FBUWs4QyxHQUdSLENBRUQsSUFEQSxJQUFJMEIsRUFBY3ZCLEVBQWUxdEMsMEJBQTBCdXRDLEVBQWNwdUQsRUFBTXV2RCxVQUN0RVEsRUFBT0QsRUFBWWwvQyxLQUFNbS9DLEdBQVFELEVBQVloL0MsS0FBTWkvQyxJQUN4RCxJQUFLLElBQUlDLEVBQU9GLEVBQVlqL0MsS0FBTW0vQyxHQUFRRixFQUFZLytDLEtBQU1pL0MsSUFBUSxDQUNoRSxJQUFJempELEVBQU9taUQsRUFBZ0IxdUQsRUFBTXV2RCxTQUFVUSxFQUFNQyxFQUFNajVDLEdBQ25EeEssR0FDQXZNLEVBQU1xdkQsYUFBYXB3RCxLQUFLc04sR0FJRixJQUE5QnZNLEVBQU1xdkQsYUFBYTN4RCxTQUNuQnNDLEVBQU11SCxNMUZoS1gsUTBGbUpDdkgsRUFBTXVILE0xRm5KUCxFMEZtS0gsT0FBT3ZILEVBd0ZYLE9Bck9BLEdBQVVzdUQsRUFBWXp1RCxHQW1KdEJ5dUQsRUFBVzF4RCxVQUFVZ29CLFNBQVcsV0FDNUIsT0FBT3BvQixLQUFLeXlELFNBS2hCWCxFQUFXMXhELFVBQVVxekQsV0FBYSxXQUM5QixJQUFJQyxFQUFVLEdBVWQsR0FUQTF6RCxLQUFLNnlELGFBQWE3eEMsUUFBUSxTQUFValIsRUFBTTVPLEVBQUdKLEdBQ3JDZ1AsRzFGeExKLEcwRndMWUEsRUFBS2pDLFlBQ2I0bEQsRUFBUWp4RCxLQUFLLENBQ1QrSSxPQUFReEwsS0FBSzB5RCxnQkFBZ0Juc0MsbUJBQW1CeFcsRUFBS0MsV0FDckRnQixNQUFPakIsRUFBS3FZLGNBR3RCL2lCLEtBQUtyRixPQUNQQSxLQUFLNnlELGFBQWEzeEQsT0FBUyxFQUNKLElBQW5Cd3lELEVBQVF4eUQsT0FDUmxCLEtBQUsrSyxNMUY1TE4sTTBGOExFLENBQ0QsSUFBSXNZLEVBQUlyakIsS0FBSzR5RCxrQkFBa0IsR0FDM0J4OEMsRUFBT3BXLEtBQUsyeUQsZ0JBQWdCZ0IsWUFBWXR3QyxHQUN4QzFMLEVBQXdCLGlCQUFUdkIsRUFBb0JBLEVBQU9BLEVBQUssR0FDL0N3QixFQUF5QixpQkFBVHhCLEVBQW9CQSxFQUFPQSxFQUFLLEdBQ2hEc2dCLEVBQW1CMTJCLEtBQUsyeUQsZ0JBQWdCMXVDLGNBQWNaLEdBQ3REb1QsRUFBbUJ6MkIsS0FBSzB5RCxnQkFBZ0J6dUMsY0FBY2prQixLQUFLK3lELFVBQzNEckYsRUFBZTF0RCxLQUFLMnlELGdCQUFnQnBzQyxtQkFBbUJ2bUIsS0FBSzR5RCxtQkFDaEU1eUQsS0FBS3l5RCxRRDdEVixTQUFnQjk2QyxFQUFPQyxFQUFRMkMsRUFBWWtjLEVBQWtCbTdCLEVBQWNsN0IsRUFBa0JnM0IsRUFBY2tHLEVBQWVGLEVBQVM5ckMsRUFBUXdxQyxFQUFpQkMsR0FDL0osSUFBSTdnRCxFQUFVMEYsR0FBc0J4TyxLQUFLeUMsTUFBTW9QLEVBQWE1QyxHQUFRalAsS0FBS3lDLE1BQU1vUCxFQUFhM0MsSUFFNUYsR0FEQSxFQUFPcEcsRUFBUzZnRCxHQUNPLElBQW5CcUIsRUFBUXh5RCxPQUNSLE9BQU9zUSxFQUFRK0YsT0FHbkIsU0FBU3M4QyxFQUFXaDBELEdBQ2hCLE9BQU82SSxLQUFLeUMsTUFBTXRMLEVBQVEwYSxHQUFjQSxFQUY1Qy9JLEVBQVFnYyxNQUFNalQsRUFBWUEsR0FJMUIvSSxFQUFRc2lELHlCQUEyQixVQUNuQyxJQUFJQyxFdkc0QkcsQ0FBQzFwRCxJQUFVQSxLQUFVLEtBQVcsS3VHM0J2Q3FwRCxFQUFRMXlDLFNBQVEsU0FBVThnQixFQUFLM2dDLEVBQUdKLEd2R21JL0IsSUFBZ0I2VCxFQUFTQyxFQUFURCxFdUdsSVJtL0MsR3ZHa0lpQmwvQyxFdUdsSUNpdEIsRUFBSXQyQixRdkdtSXJCLEdBQUtvSixFQUFRLEtBQ3JCQSxFQUFRLEdBQUtDLEVBQVEsSUFFckJBLEVBQVEsR0FBS0QsRUFBUSxLQUNyQkEsRUFBUSxHQUFLQyxFQUFRLElBRXJCQSxFQUFRLEdBQUtELEVBQVEsS0FDckJBLEVBQVEsR0FBS0MsRUFBUSxJQUVyQkEsRUFBUSxHQUFLRCxFQUFRLEtBQ3JCQSxFQUFRLEdBQUtDLEVBQVEsT3VHM0l6QixJQUFJbS9DLEVBQXFCLEdBQVNELEdBQzlCRSxFQUFzQnIrQyxHQUFVbStDLEdBQ2hDRyxFQUFnQmg5QyxHQUFzQnhPLEtBQUt5QyxNQUFPb1AsRUFBYXk1QyxFQUFzQnY5QixHQUFtQi90QixLQUFLeUMsTUFBT29QLEVBQWEwNUMsRUFBdUJ4OUIsSUFDNUosRUFBT3k5QixFQUFlN0IsR0FDdEIsSUFBSThCLEVBQWM1NUMsRUFBYWtjLEVBQy9CaTlCLEVBQVExeUMsU0FBUSxTQUFVOGdCLEVBQUszZ0MsRUFBR0osR0FDOUIsSUFBSXF6RCxFQUFPdHlCLEVBQUl0MkIsT0FBTyxHQUFLdW9ELEVBQWlCLEdBQ3hDTSxJQUFTdnlCLEVBQUl0MkIsT0FBTyxHQUFLdW9ELEVBQWlCLElBQzFDTyxFQUFXLEdBQVN4eUIsRUFBSXQyQixRQUN4QitvRCxFQUFZMytDLEdBQVVrc0IsRUFBSXQyQixRQUUxQnMyQixFQUFJOXdCLE1BQU0yRyxNQUFRLEdBQUttcUIsRUFBSTl3QixNQUFNNEcsT0FBUyxHQUMxQ3M4QyxFQUFjajVDLFVBQVU2bUIsRUFBSTl3QixNQUFPNFcsRUFBUUEsRUFBUWthLEVBQUk5d0IsTUFBTTJHLE1BQVEsRUFBSWlRLEVBQVFrYSxFQUFJOXdCLE1BQU00RyxPQUFTLEVBQUlnUSxFQUFRd3NDLEVBQU9ELEVBQWFFLEVBQU9GLEVBQWFHLEVBQVdILEVBQWFJLEVBQVlKLE1BR3BNLElBQUlLLEVBQWdCLytDLEdBQVdpNEMsR0E4Ry9CLE9BN0dBa0csRUFBYy9DLGVBQWU3dkMsU0FBUSxTQUFVcXVDLEVBQVVsdUQsRUFBR0osR0FxQnhELElBQUlpQixFQUFTcXRELEVBQVNydEQsT0FDbEI3QixFQUFTa3ZELEVBQVNsdkQsT0FDbEJ3VyxFQUFLM1UsRUFBTyxHQUFHLEdBQUk2VSxFQUFLN1UsRUFBTyxHQUFHLEdBQ2xDbUgsRUFBS25ILEVBQU8sR0FBRyxHQUFJb0gsRUFBS3BILEVBQU8sR0FBRyxHQUNsQ3FILEVBQUtySCxFQUFPLEdBQUcsR0FBSXNILEVBQUt0SCxFQUFPLEdBQUcsR0FFbEN5eUQsRUFBS1osR0FBWTF6RCxFQUFPLEdBQUcsR0FBS3EwRCxFQUFjLElBQU05OUIsR0FDcERnK0IsRUFBS2IsSUFBYTF6RCxFQUFPLEdBQUcsR0FBS3EwRCxFQUFjLElBQU05OUIsR0FDckR5NkIsRUFBSzBDLEdBQVkxekQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEdBQ3BEMDZCLEVBQUt5QyxJQUFhMXpELEVBQU8sR0FBRyxHQUFLcTBELEVBQWMsSUFBTTk5QixHQUNyRDI2QixFQUFLd0MsR0FBWTF6RCxFQUFPLEdBQUcsR0FBS3EwRCxFQUFjLElBQU05OUIsR0FDcEQ0NkIsRUFBS3VDLElBQWExekQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEdBSXJEaStCLEVBQXdCaCtDLEVBQ3hCaStDLEVBQXdCLzlDLEVBQzVCRixFQUFLLEVBQ0xFLEVBQUssRUFLTCxJQU1JZytDLEVwSHhITCxTQUEyQnJoRCxHQUU5QixJQURBLElBQUl2UyxFQUFJdVMsRUFBSXRTLE9BQ0hDLEVBQUksRUFBR0EsRUFBSUYsRUFBR0UsSUFBSyxDQUl4QixJQUZBLElBQUkyekQsRUFBUzN6RCxFQUNUNHpELEVBQVFyc0QsS0FBSzJzQixJQUFJN2hCLEVBQUlyUyxHQUFHQSxJQUNuQnlJLEVBQUl6SSxFQUFJLEVBQUd5SSxFQUFJM0ksRUFBRzJJLElBQUssQ0FDNUIsSUFBSW9yRCxFQUFXdHNELEtBQUsyc0IsSUFBSTdoQixFQUFJNUosR0FBR3pJLElBQzNCNnpELEVBQVdELElBQ1hBLEVBQVFDLEVBQ1JGLEVBQVNsckQsR0FHakIsR0FBYyxJQUFWbXJELEVBQ0EsT0FBTyxLQUdYLElBQUk3aEMsRUFBTTFmLEVBQUlzaEQsR0FDZHRoRCxFQUFJc2hELEdBQVV0aEQsRUFBSXJTLEdBQ2xCcVMsRUFBSXJTLEdBQUsreEIsRUFFVCxJQUFLLElBQUl6RSxFQUFJdHRCLEVBQUksRUFBR3N0QixFQUFJeHRCLEVBQUd3dEIsSUFFdkIsSUFEQSxJQUFJd21DLEdBQVF6aEQsRUFBSWliLEdBQUd0dEIsR0FBS3FTLEVBQUlyUyxHQUFHQSxHQUN0QjB1QixFQUFJMXVCLEVBQUcwdUIsRUFBSTV1QixFQUFJLEVBQUc0dUIsSUFDbkIxdUIsR0FBSzB1QixFQUNMcmMsRUFBSWliLEdBQUdvQixHQUFLLEVBR1pyYyxFQUFJaWIsR0FBR29CLElBQU1vbEMsRUFBT3poRCxFQUFJclMsR0FBRzB1QixHQU8zQyxJQURBLElBQUlqbkIsRUFBSSxJQUFJOUYsTUFBTTdCLEdBQ1RpMEQsRUFBSWowRCxFQUFJLEVBQUdpMEQsR0FBSyxFQUFHQSxJQUFLLENBQzdCdHNELEVBQUVzc0QsR0FBSzFoRCxFQUFJMGhELEdBQUdqMEQsR0FBS3VTLEVBQUkwaEQsR0FBR0EsR0FDMUIsSUFBSyxJQUFJL3dCLEVBQUkrd0IsRUFBSSxFQUFHL3dCLEdBQUssRUFBR0EsSUFDeEIzd0IsRUFBSTJ3QixHQUFHbGpDLElBQU11UyxFQUFJMndCLEdBQUcrd0IsR0FBS3RzRCxFQUFFc3NELEdBR25DLE9BQU90c0QsRW9IK0VldXNELENBTkksQ0FDbEIsQ0FMSmhzRCxHQUFNd3JELEVBQ052ckQsR0FBTXdyRCxFQUlPLEVBQUcsRUFBR3pELEVBQUtzRCxHQUNwQixDQUpKcHJELEdBQU1zckQsRUFDTnJyRCxHQUFNc3JELEVBR08sRUFBRyxFQUFHdkQsRUFBS29ELEdBQ3BCLENBQUMsRUFBRyxFQUFHdHJELEVBQUlDLEVBQUlnb0QsRUFBS3NELEdBQ3BCLENBQUMsRUFBRyxFQUFHcnJELEVBQUlDLEVBQUlnb0QsRUFBS29ELEtBR3hCLEdBQUtHLEVBQUwsQ0FLQSxHQUZBcmpELEVBQVFxSSxPQUNSckksRUFBUXNJLFlBdkxoQixXQUNJLFFBQWlDbFYsSUFBN0Jrc0QsR0FBd0MsQ0FDeEMsSUFBSTNELEVBQU0xMUMsU0FBU0MsY0FBYyxVQUFVRyxXQUFXLE1BQ3REczFDLEVBQUkyRyx5QkFBMkIsVUFDL0IzRyxFQUFJQyxVQUFZLHdCQUNoQjhELEdBQWlCL0QsRUFBSyxFQUFHLEVBQUcsRUFBRyxHQUMvQitELEdBQWlCL0QsRUFBSyxFQUFHLEVBQUcsRUFBRyxHQUMvQixJQUFJMXlDLEVBQU8weUMsRUFBSWp5QyxhQUFhLEVBQUcsRUFBRyxFQUFHLEdBQUdULEtBQ3hDcTJDLEdBQ0lVLEdBQThCLzJDLEVBQU0sSUFDaEMrMkMsR0FBOEIvMkMsRUFBTSxJQUNwQysyQyxHQUE4Qi8yQyxFQUFNLEdBRWhELE9BQU9xMkMsR0EyS0NzRSxJQUNBL0MsSUFBdUJ0QixHQUEwQixDQUVqRHYvQyxFQUFRdUksT0FBT28zQyxFQUFJQyxHQUtuQixJQUhBLElBQ0lpRSxFQUFLWixFQUFLdEQsRUFDVm1FLEVBQUtaLEVBQUt0RCxFQUNMbUUsRUFBTyxFQUFHQSxFQUhQLEVBR3FCQSxJQUU3Qi9qRCxFQUFRd0ksT0FBT20zQyxFQUFLMEMsR0FBYTBCLEVBQU8sR0FBS0YsRUFMckMsR0FLbURqRSxFQUFLeUMsRUFBWTBCLEVBQU9ELEVBQU0sSUFFN0VFLEdBQVJELEdBQ0EvakQsRUFBUXdJLE9BQU9tM0MsRUFBSzBDLEdBQWEwQixFQUFPLEdBQUtGLEVBUnpDLEdBUXVEakUsRUFBS3lDLEdBQWEwQixFQUFPLEdBQUtELEVBQU0sSUFJdkc5akQsRUFBUXdJLE9BQU9xM0MsRUFBSUMsUUFHbkI5L0MsRUFBUXVJLE9BQU9vM0MsRUFBSUMsR0FDbkI1L0MsRUFBUXdJLE9BQU95NkMsRUFBSUMsR0FDbkJsakQsRUFBUXdJLE9BQU9xM0MsRUFBSUMsR0FFdkI5L0MsRUFBUXlJLE9BQ1J6SSxFQUFRb0IsVUFBVWlpRCxFQUFZLEdBQUlBLEVBQVksR0FBSUEsRUFBWSxHQUFJQSxFQUFZLEdBQUlKLEVBQUlDLEdBQ3RGbGpELEVBQVF1YyxVQUFVZ21DLEVBQWlCLEdBQUtZLEVBQXVCWixFQUFpQixHQUFLYSxHQUNyRnBqRCxFQUFRZ2MsTUFBTWlKLEVBQW1CbGMsR0FBYWtjLEVBQW1CbGMsR0FDakUvSSxFQUFReUosVUFBVWk1QyxFQUFjMzhDLE9BQVEsRUFBRyxHQUMzQy9GLEVBQVE4VixjQUVSOHFDLElBQ0E1Z0QsRUFBUXFJLE9BQ1JySSxFQUFRc2lELHlCQUEyQixjQUNuQ3RpRCxFQUFRaWtELFlBQWMsUUFDdEJqa0QsRUFBUWtrRCxVQUFZLEVBQ3BCOUIsRUFBYy9DLGVBQWU3dkMsU0FBUSxTQUFVcXVDLEVBQVVsdUQsRUFBR0osR0FDeEQsSUFBSVosRUFBU2t2RCxFQUFTbHZELE9BQ2xCczBELEdBQU10MEQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEVBQ3pDZytCLElBQU92MEQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEVBQzFDeTZCLEdBQU1oeEQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEVBQ3pDMDZCLElBQU9qeEQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEVBQzFDMjZCLEdBQU1seEQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEVBQ3pDNDZCLElBQU9ueEQsRUFBTyxHQUFHLEdBQUtxMEQsRUFBYyxJQUFNOTlCLEVBQzlDbGxCLEVBQVFzSSxZQUNSdEksRUFBUXVJLE9BQU9vM0MsRUFBSUMsR0FDbkI1L0MsRUFBUXdJLE9BQU95NkMsRUFBSUMsR0FDbkJsakQsRUFBUXdJLE9BQU9xM0MsRUFBSUMsR0FDbkI5L0MsRUFBUSsvQyxZQUNSLy9DLEVBQVFta0QsWUFFWm5rRCxFQUFROFYsV0FFTDlWLEVBQVErRixPQy9FUWpLLENBQWtCcUssRUFBT0MsRUFBUTVYLEtBQUs2dkMsWUFBYXBaLEVBQWtCejJCLEtBQUsweUQsZ0JBQWdCam5ELFlBQWFpckIsRUFBa0JnM0IsRUFBYzF0RCxLQUFLcXpELGVBQWdCSyxFQUFTMXpELEtBQUt3eUQsUUFBU3h5RCxLQUFLc3lELGFBQWN0eUQsS0FBS3V5RCxpQkFDMU52eUQsS0FBSytLLE0xRjVNTCxFMEY4TUovSyxLQUFLbUcsV0FLVDJyRCxFQUFXMXhELFVBQVU4USxLQUFPLFdBQ3hCLEcxRnRORSxHMEZzTkVsUixLQUFLK0ssTUFBeUIsQ0FDOUIvSyxLQUFLK0ssTTFGdE5KLEUwRnVORC9LLEtBQUttRyxVQUNMLElBQUl5dkQsRUFBZSxFQUNuQjUxRCxLQUFLOHlELHFCQUF1QixHQUM1Qjl5RCxLQUFLNnlELGFBQWE3eEMsUUFBUSxTQUFValIsRUFBTTVPLEVBQUdKLEdBQ3pDLElBQUlnSyxFQUFRZ0YsRUFBS2pDLFdBQ2pCLEcxRjdOTixHMEY2TlUvQyxHMUY1TlAsRzBGNE5rQ0EsRUFBNEIsQ0FDdkQ2cUQsSUFDQSxJQUFJQyxFQUFvQjN3RCxFQUFPNkssRUFBTSxHQUFrQixTQUFVNEQsR0FDN0QsSUFBSTVJLEVBQVFnRixFQUFLakMsVzFGOU43QixHMEYrTmdCL0MsRzFGMU5qQixHMEYyTmlCQSxHMUYxTmpCLEcwRjJOaUJBLElBQ0FyRixFQUFjbXdELEdBRU8sS0FEckJELElBRUk1MUQsS0FBSzgxRCxtQkFDTDkxRCxLQUFLeXpELGlCQUdkenpELE1BQ0hBLEtBQUs4eUQscUJBQXFCcndELEtBQUtvekQsS0FFckN4d0QsS0FBS3JGLE9BQ2MsSUFBakI0MUQsRUFDQXgvQixXQUFXcDJCLEtBQUt5ekQsV0FBV3B1RCxLQUFLckYsTUFBTyxHQUd2Q0EsS0FBSzZ5RCxhQUFhN3hDLFNBQVEsU0FBVWpSLEVBQU01TyxFQUFHSixHMUZuUG5ELEcwRm9Qc0JnUCxFQUFLakMsWUFFYmlDLEVBQUttQixZQVN6QjRnRCxFQUFXMXhELFVBQVUwMUQsaUJBQW1CLFdBQ3BDOTFELEtBQUs4eUQscUJBQXFCOXhDLFFBQVF0YixHQUNsQzFGLEtBQUs4eUQscUJBQXVCLE1BRXpCaEIsRUF0T29CLENBdU83QixJRXJCRixHQWxPOEIsV0FJMUIsU0FBU2lFLEVBQVNDLEdBTWRoMkQsS0FBS2kyRCxtQkFDcUJyeEQsSUFBdEJveEQsRUFBa0NBLEVBQW9CLEtBSzFEaDJELEtBQUtrMkQsT0FBUyxFQUtkbDJELEtBQUttMkQsU0FBVyxHQUtoQm4yRCxLQUFLbzJELFFBQVUsS0FLZnAyRCxLQUFLcTJELFFBQVUsS0FpTW5CLE9BNUxBTixFQUFTMzFELFVBQVVpb0IsZUFBaUIsV0FDaEMsT0FBT3JvQixLQUFLaTJELGNBQWdCLEdBQUtqMkQsS0FBS2d0QyxXQUFhaHRDLEtBQUtpMkQsZUFLNURGLEVBQVMzMUQsVUFBVStCLE1BQVEsV0FDdkJuQyxLQUFLazJELE9BQVMsRUFDZGwyRCxLQUFLbTJELFNBQVcsR0FDaEJuMkQsS0FBS28yRCxRQUFVLEtBQ2ZwMkQsS0FBS3EyRCxRQUFVLE1BTW5CTixFQUFTMzFELFVBQVVrMkQsWUFBYyxTQUFVcjBELEdBQ3ZDLE9BQU9qQyxLQUFLbTJELFNBQVNqMEQsZUFBZUQsSUFReEM4ekQsRUFBUzMxRCxVQUFVNGdCLFFBQVUsU0FBVXBOLEdBRW5DLElBREEsSUFBSTJpRCxFQUFRdjJELEtBQUtvMkQsUUFDVkcsR0FDSDNpRCxFQUFFMmlELEVBQU1DLE9BQVFELEVBQU1FLEtBQU16MkQsTUFDNUJ1MkQsRUFBUUEsRUFBTUcsT0FRdEJYLEVBQVMzMUQsVUFBVWdILElBQU0sU0FBVW5GLEVBQUsrTSxHQUNwQyxJQUFJdW5ELEVBQVF2MkQsS0FBS20yRCxTQUFTbDBELEdBRTFCLE9BREEsT0FBaUIyQyxJQUFWMnhELEVBQXFCLElBQ3hCQSxJQUFVdjJELEtBQUtxMkQsVUFHVkUsSUFBVXYyRCxLQUFLbzJELFNBQ3BCcDJELEtBQUtvMkQsUUFBZ0NwMkQsS0FBS28yRCxRQUFhLE1BQ3ZEcDJELEtBQUtvMkQsUUFBUU8sTUFBUSxPQUdyQkosRUFBTUcsTUFBTUMsTUFBUUosRUFBTUksTUFDMUJKLEVBQU1JLE1BQU1ELE1BQVFILEVBQU1HLE9BRTlCSCxFQUFNRyxNQUFRLEtBQ2RILEVBQU1JLE1BQVEzMkQsS0FBS3EyRCxRQUNuQnIyRCxLQUFLcTJELFFBQVFLLE1BQVFILEVBQ3JCdjJELEtBQUtxMkQsUUFBVUUsR0FiSkEsRUFBTUMsUUFxQnJCVCxFQUFTMzFELFVBQVVpbkMsT0FBUyxTQUFVcGxDLEdBQ2xDLElBQUlzMEQsRUFBUXYyRCxLQUFLbTJELFNBQVNsMEQsR0FvQjFCLE9BbkJBLE9BQWlCMkMsSUFBVjJ4RCxFQUFxQixJQUN4QkEsSUFBVXYyRCxLQUFLcTJELFNBQ2ZyMkQsS0FBS3EyRCxRQUFnQ0UsRUFBVyxNQUM1Q3YyRCxLQUFLcTJELFVBQ0xyMkQsS0FBS3EyRCxRQUFRSyxNQUFRLE9BR3BCSCxJQUFVdjJELEtBQUtvMkQsU0FDcEJwMkQsS0FBS28yRCxRQUFnQ0csRUFBVyxNQUM1Q3YyRCxLQUFLbzJELFVBQ0xwMkQsS0FBS28yRCxRQUFRTyxNQUFRLFFBSXpCSixFQUFNRyxNQUFNQyxNQUFRSixFQUFNSSxNQUMxQkosRUFBTUksTUFBTUQsTUFBUUgsRUFBTUcsY0FFdkIxMkQsS0FBS20yRCxTQUFTbDBELEtBQ25CakMsS0FBS2syRCxPQUNBSyxFQUFNQyxRQUtqQlQsRUFBUzMxRCxVQUFVNHNDLFNBQVcsV0FDMUIsT0FBT2h0QyxLQUFLazJELFFBS2hCSCxFQUFTMzFELFVBQVVpSCxRQUFVLFdBQ3pCLElBRUlrdkQsRUFGQXh4RCxFQUFPLElBQUlqQyxNQUFNOUMsS0FBS2syRCxRQUN0Qi8wRCxFQUFJLEVBRVIsSUFBS28xRCxFQUFRdjJELEtBQUtxMkQsUUFBU0UsRUFBT0EsRUFBUUEsRUFBTUksTUFDNUM1eEQsRUFBSzVELEtBQU9vMUQsRUFBTUUsS0FFdEIsT0FBTzF4RCxHQUtYZ3hELEVBQVMzMUQsVUFBVW1DLFVBQVksV0FDM0IsSUFFSWcwRCxFQUZBL3pELEVBQVMsSUFBSU0sTUFBTTlDLEtBQUtrMkQsUUFDeEIvMEQsRUFBSSxFQUVSLElBQUtvMUQsRUFBUXYyRCxLQUFLcTJELFFBQVNFLEVBQU9BLEVBQVFBLEVBQU1JLE1BQzVDbjBELEVBQU9yQixLQUFPbzFELEVBQU1DLE9BRXhCLE9BQU9oMEQsR0FLWHV6RCxFQUFTMzFELFVBQVV3MkQsU0FBVyxXQUMxQixPQUFPNTJELEtBQUtvMkQsUUFBUUksUUFLeEJULEVBQVMzMUQsVUFBVXkyRCxZQUFjLFdBQzdCLE9BQU83MkQsS0FBS28yRCxRQUFRSyxNQU14QlYsRUFBUzMxRCxVQUFVMDJELGFBQWUsV0FDOUIsT0FBTzkyRCxLQUFLcTJELFFBQVFJLE1BS3hCVixFQUFTMzFELFVBQVVveEIsSUFBTSxXQUNyQixJQUFJK2tDLEVBQVF2MkQsS0FBS28yRCxRQVVqQixjQVRPcDJELEtBQUttMkQsU0FBU0ksRUFBTUUsTUFDdkJGLEVBQU1HLFFBQ05ILEVBQU1HLE1BQU1DLE1BQVEsTUFFeEIzMkQsS0FBS28yRCxRQUFnQ0csRUFBVyxNQUMzQ3YyRCxLQUFLbzJELFVBQ05wMkQsS0FBS3EyRCxRQUFVLFFBRWpCcjJELEtBQUtrMkQsT0FDQUssRUFBTUMsUUFNakJULEVBQVMzMUQsVUFBVW1nQixRQUFVLFNBQVV0ZSxFQUFLcEMsR0FDeENHLEtBQUtvSCxJQUFJbkYsR0FDVGpDLEtBQUttMkQsU0FBU2wwRCxHQUFLdTBELE9BQVMzMkQsR0FNaENrMkQsRUFBUzMxRCxVQUFVeUgsSUFBTSxTQUFVNUYsRUFBS3BDLEdBQ3BDLElBQVNvQyxLQUFPakMsS0FBS20yRCxVQUFXLElBQ2hDLElBQUlJLEVBQVEsQ0FDUkUsS0FBTXgwRCxFQUNOeTBELE1BQU8sS0FDUEMsTUFBTzMyRCxLQUFLcTJELFFBQ1pHLE9BQVEzMkQsR0FFUEcsS0FBS3EyRCxRQUlOcjJELEtBQUtxMkQsUUFBUUssTUFBUUgsRUFIckJ2MkQsS0FBS28yRCxRQUFVRyxFQUtuQnYyRCxLQUFLcTJELFFBQVVFLEVBQ2Z2MkQsS0FBS20yRCxTQUFTbDBELEdBQU9zMEQsSUFDbkJ2MkQsS0FBS2syRCxRQU9YSCxFQUFTMzFELFVBQVVzaUMsUUFBVSxTQUFVdHNCLEdBQ25DcFcsS0FBS2kyRCxjQUFnQjcvQyxHQUVsQjIvQyxFQWhPa0IsR0NKdEIsU0FBUyxHQUFlMXlDLEVBQUd6YSxFQUFHQyxFQUFHa3VELEdBQ3BDLFlBQXNCbnlELElBQWxCbXlELEdBQ0FBLEVBQWMsR0FBSzF6QyxFQUNuQjB6QyxFQUFjLEdBQUtudUQsRUFDbkJtdUQsRUFBYyxHQUFLbHVELEVBQ1prdUQsR0FHQSxDQUFDMXpDLEVBQUd6YSxFQUFHQyxHQVNmLFNBQVNtdUQsR0FBVTN6QyxFQUFHemEsRUFBR0MsR0FDNUIsT0FBT3dhLEVBQUksSUFBTXphLEVBQUksSUFBTUMsRUFPeEIsU0FBUyxHQUFPbUgsR0FDbkIsT0FBT2duRCxHQUFVaG5ELEVBQVUsR0FBSUEsRUFBVSxHQUFJQSxFQUFVLElDMUMzRCxJQUFJLEdBQXdDLFdBQ3hDLElBQUkxTixFQUFnQixTQUFVSyxFQUFHOUIsR0FJN0IsT0FIQXlCLEVBQWdCM0MsT0FBT2lELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCQyxPQUFTLFNBQVVILEVBQUc5QixHQUFLOEIsRUFBRUUsVUFBWWhDLElBQ3ZFLFNBQVU4QixFQUFHOUIsR0FBSyxJQUFLLElBQUlrQyxLQUFLbEMsRUFBT2xCLE9BQU9TLFVBQVU4QixlQUFlYyxLQUFLbkMsRUFBR2tDLEtBQUlKLEVBQUVJLEdBQUtsQyxFQUFFa0MsTUFDM0VKLEVBQUc5QixJQUU1QixPQUFPLFNBQVU4QixFQUFHOUIsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSWUsVUFBVSx1QkFBeUJxQixPQUFPcEMsR0FBSyxpQ0FFN0QsU0FBU3FDLElBQU9sRCxLQUFLbUQsWUFBY1IsRUFEbkNMLEVBQWNLLEVBQUc5QixHQUVqQjhCLEVBQUV2QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBT3lELE9BQU92QyxJQUFNcUMsRUFBRzlDLFVBQVlTLEVBQUVULFVBQVcsSUFBSThDLElBWjNDLEdBMEQ1QyxTQXRDK0IsU0FBVUcsR0FFckMsU0FBUzR6RCxJQUNMLE9BQWtCLE9BQVg1ekQsR0FBbUJBLEVBQU9rQyxNQUFNdkYsS0FBTStCLFlBQWMvQixLQWlDL0QsT0FuQ0EsR0FBVWkzRCxFQUFXNXpELEdBT3JCNHpELEVBQVU3MkQsVUFBVW9vQixZQUFjLFNBQVVmLEdBQ3hDLEtBQU96bkIsS0FBS3FvQixvQkFDR3JvQixLQUFLNDJELFdBQ1BsdUMsV0FBWWpCLElBSWpCem5CLEtBQUt3eEIsTUFBTWc2QixXQU92QnlMLEVBQVU3MkQsVUFBVTgyRCxtQkFBcUIsV0FDckMsR0FBd0IsSUFBcEJsM0QsS0FBS2d0QyxXQUFULENBR0EsSUFFSTNwQixHRGFZcGhCLEVDZk5qQyxLQUFLODJELGVEZ0JaNzBELEVBQUltRyxNQUFNLEtBQUttRixJQUFJbVksU0NkSixHQUNsQjFsQixLQUFLZ2hCLFFBQVEsU0FBVWpSLEdBQ2ZBLEVBQUtDLFVBQVUsS0FBT3FULElBQ3RCcmpCLEtBQUtxbkMsT0FBTyxHQUFPdDNCLEVBQUtDLFlBQ3hCRCxFQUFLeTdDLFlBRVhubUQsS0FBS3JGLE9ET1IsSUFBaUJpQyxHQ0xiZzFELEVBcENtQixDQXFDNUIsSUN6REYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJMzBELEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0FxTDVDLFNBQVNpMEQsR0FBa0JDLEdBQ3ZCLE9BQUtBLEVBR0R0MEQsTUFBTXVELFFBQVErd0QsR0FDUCxTQUFVaHBELEdBQ2IsT0FBT2dwRCxHQUdnQixtQkFBcEJBLEVBQ0FBLEVBRUosU0FBVWhwRCxHQUNiLE1BQU8sQ0FBQ2dwRCxJQVhELEtBY2YsU0E3STRCLFNBQVUvekQsR0FLbEMsU0FBU2cwRCxFQUFPdHRELEdBQ1osSUFBSXZHLEVBQVFILEVBQU9MLEtBQUtoRCxPQUFTQSxLQW9DakMsT0EvQkF3RCxFQUFNMk0sV0FBYSxHQUFjcEcsRUFBUW9HLFlBS3pDM00sRUFBTTh6RCxjQUFnQkgsR0FBa0JwdEQsRUFBUXN1QyxjQUtoRDcwQyxFQUFNK3pELDhCQUNrQzN5RCxJQUFwQ21GLEVBQVF5dEQseUJBQ0Z6dEQsRUFBUXl0RCx3QkFPbEJoMEQsRUFBTXF3QyxTQUFVLEVBS2hCcndDLEVBQU1tSCxZQUNnQi9GLElBQWxCbUYsRUFBUWdCLE1BQXNCaEIsRUFBUWdCLE1BQVEsR0FLbER2SCxFQUFNaTBELFlBQTJCN3lELElBQWxCbUYsRUFBUTJ0RCxPQUFzQjN0RCxFQUFRMnRELE1BQzlDbDBELEVBNEVYLE9BckhBLEdBQVU2ekQsRUFBUWgwRCxHQStDbEJnMEQsRUFBT2ozRCxVQUFVZzRDLGdCQUFrQixXQUMvQixPQUFPcDRDLEtBQUtzM0QsZUFLaEJELEVBQU9qM0QsVUFBVWs0QywyQkFBNkIsV0FDMUMsT0FBT3Q0QyxLQUFLdTNELDBCQU9oQkYsRUFBT2ozRCxVQUFVbTdCLGNBQWdCLFdBQzdCLE9BQU92N0IsS0FBS21RLFlBTWhCa25ELEVBQU9qM0QsVUFBVWkrQixlQUFpQixXQUM5QixPQUFPLEtBT1hnNUIsRUFBT2ozRCxVQUFVME4sU0FBVyxXQUN4QixPQUFPOU4sS0FBSzJLLFFBS2hCMHNELEVBQU9qM0QsVUFBVTRqQyxTQUFXLFdBQ3hCLE9BQU9oa0MsS0FBS3kzRCxRQUtoQkosRUFBT2ozRCxVQUFVaWxCLGtCQUFvQixhQU9yQ2d5QyxFQUFPajNELFVBQVV1M0QsUUFBVSxXQUN2QjMzRCxLQUFLbUcsV0FTVGt4RCxFQUFPajNELFVBQVV3M0QsZ0JBQWtCLFNBQVV2ZixHQUN6Q3I0QyxLQUFLczNELGNBQWdCSCxHQUFrQjllLEdBQ3ZDcjRDLEtBQUttRyxXQU1Ua3hELEVBQU9qM0QsVUFBVWtqQixTQUFXLFNBQVV2WSxHQUNsQy9LLEtBQUsySyxPQUFTSSxFQUNkL0ssS0FBS21HLFdBRUZreEQsRUF0SGdCLENBdUh6QixHQ2hLRixJQUFJUSxHQUFlLENBQUMsRUFBRyxFQUFHLEdBMmhCMUIsU0F0ZjhCLFdBSTFCLFNBQVNDLEVBQVMvdEQsR3ZJeUxmLElBQWtCaEosRUFDakJnM0QsRXVJM0tJbGdDLEVBQ0osR0FYQTczQixLQUFLdUssYUFBOEIzRixJQUFwQm1GLEVBQVFRLFFBQXdCUixFQUFRUSxRQUFVLEVBS2pFdkssS0FBS3M1QixhQUFldnZCLEVBQVFtdUIsWUFDNUIsR3ZJOEtpQm4zQixFdUk5S0RmLEtBQUtzNUIsY0FFbEIsRXZJNktIeStCLEV1SS9LbUMsU0FBVW4zRCxFQUFHQyxHQUM1QyxPQUFPQSxFQUFJRCxJdkk4S09ELEVBQ25CSSxFQUFJaTNELE9BQU0sU0FBVUMsRUFBWWp6RCxHQUNuQyxHQUFjLElBQVZBLEVBQ0EsT0FBTyxFQUVYLElBQUlrekQsRUFBTUgsRUFBUWgzRCxFQUFJaUUsRUFBUSxHQUFJaXpELEdBQ2xDLFFBQVNDLEVBQU0sR0FBNEIsSUFBUkEsT3VJbkx6QixLQUdMbnVELEVBQVFvdUQsUUFDVCxJQUFLLElBQUloM0QsRUFBSSxFQUFHVyxFQUFLOUIsS0FBS3M1QixhQUFhcDRCLE9BQVMsRUFBR0MsRUFBSVcsSUFBTVgsRUFDekQsR0FBSzAyQixHQUlELEdBQUk3M0IsS0FBS3M1QixhQUFhbjRCLEdBQUtuQixLQUFLczVCLGFBQWFuNEIsRUFBSSxLQUFPMDJCLEVBQVksQ0FDaEVBLE9BQWFqekIsRUFDYixZQUxKaXpCLEVBQWE3M0IsS0FBS3M1QixhQUFhbjRCLEdBQUtuQixLQUFLczVCLGFBQWFuNEIsRUFBSSxHQWN0RW5CLEtBQUtxNUIsWUFBY3hCLEVBS25CNzNCLEtBQUt3SyxRQUFVeEssS0FBS3M1QixhQUFhcDRCLE9BQVMsRUFLMUNsQixLQUFLbzRELGFBQTZCeHpELElBQW5CbUYsRUFBUXN1RCxPQUF1QnR1RCxFQUFRc3VELE9BQVMsS0FLL0RyNEQsS0FBS3M0RCxTQUFXLFVBQ1ExekQsSUFBcEJtRixFQUFRb3VELFVBQ1JuNEQsS0FBS3M0RCxTQUFXdnVELEVBQVFvdUQsUUFDeEIsRUFBT240RCxLQUFLczRELFNBQVNwM0QsUUFBVWxCLEtBQUtzNUIsYUFBYXA0QixPQUFRLEtBRTdELElBQUlzSyxFQUFTekIsRUFBUXlCLFlBQ041RyxJQUFYNEcsR0FBeUJ4TCxLQUFLbzRELFNBQVlwNEQsS0FBS3M0RCxXQUMvQ3Q0RCxLQUFLbzRELFFBQVUzaUQsR0FBV2pLLElBRTlCLEdBQVN4TCxLQUFLbzRELFNBQVdwNEQsS0FBS3M0RCxVQUFjdDRELEtBQUtvNEQsVUFBWXA0RCxLQUFLczRELFNBQVcsSUFLN0V0NEQsS0FBS3U0RCxXQUFhLFVBQ1EzekQsSUFBdEJtRixFQUFReXVELFlBQ1J4NEQsS0FBS3U0RCxXQUFheHVELEVBQVF5dUQsVUFDMUIsRUFBT3g0RCxLQUFLdTRELFdBQVdyM0QsUUFBVWxCLEtBQUtzNUIsYUFBYXA0QixPQUFRLEtBTS9EbEIsS0FBS3k0RCxlQUNvQjd6RCxJQUFyQm1GLEVBQVEydUQsU0FDRjN1RCxFQUFRMnVELFNBQ1AxNEQsS0FBS3U0RCxXQUVGLEtwRXhIUyxJb0V5SHZCLEdBQVN2NEQsS0FBS3k0RCxXQUFhejRELEtBQUt1NEQsWUFDM0J2NEQsS0FBS3k0RCxZQUFjejRELEtBQUt1NEQsV0FBYSxJQUsxQ3Y0RCxLQUFLc2MsYUFBcUIxWCxJQUFYNEcsRUFBdUJBLEVBQVMsS0FLL0N4TCxLQUFLMjRELGdCQUFrQixLQUt2QjM0RCxLQUFLNDRELFNBQVcsQ0FBQyxFQUFHLEdBS3BCNTRELEtBQUs2NEQsV0FBYSxDQUFDLEVBQUcsRUFBRyxFQUFHLFFBQ05qMEQsSUFBbEJtRixFQUFRK3VELE1BQ1I5NEQsS0FBSzI0RCxnQkFBa0I1dUQsRUFBUSt1RCxNQUFNdnJELEtBQUksU0FBVTZJLEVBQU1pTixHQUNyRCxJQUFJalQsRUFBWSxJQUFJLEdBQVUxSCxLQUFLRixJQUFJLEVBQUc0TixFQUFLLElBQUsxTixLQUFLRCxJQUFJMk4sRUFBSyxHQUFLLEdBQUksR0FBSTFOLEtBQUtGLElBQUksRUFBRzROLEVBQUssSUFBSzFOLEtBQUtELElBQUkyTixFQUFLLEdBQUssR0FBSSxJQUM1SCxHQUFJNUssRUFBUSxDQUNSLElBQUl1dEQsRUFBc0IvNEQsS0FBS3FrQiwwQkFBMEI3WSxFQUFRNlgsR0FDakVqVCxFQUFVZ0UsS0FBTzFMLEtBQUtELElBQUlzd0QsRUFBb0Iza0QsS0FBTWhFLEVBQVVnRSxNQUM5RGhFLEVBQVVrRSxLQUFPNUwsS0FBS0YsSUFBSXV3RCxFQUFvQnprRCxLQUFNbEUsRUFBVWtFLE1BQzlEbEUsRUFBVWlFLEtBQU8zTCxLQUFLRCxJQUFJc3dELEVBQW9CMWtELEtBQU1qRSxFQUFVaUUsTUFDOURqRSxFQUFVbUUsS0FBTzdMLEtBQUtGLElBQUl1d0QsRUFBb0J4a0QsS0FBTW5FLEVBQVVtRSxNQUVsRSxPQUFPbkUsSUFDUnBRLE1BRUV3TCxHQUNMeEwsS0FBS2c1RCxxQkFBcUJ4dEQsR0ErWGxDLE9BcFhBc3NELEVBQVMxM0QsVUFBVTY0RCxpQkFBbUIsU0FBVXp0RCxFQUFRdUIsRUFBTXNELEdBRTFELElBREEsSUFBSUQsRUFBWXBRLEtBQUtxa0IsMEJBQTBCN1ksRUFBUXVCLEdBQzlDNUwsRUFBSWlQLEVBQVVnRSxLQUFNdFMsRUFBS3NPLEVBQVVrRSxLQUFNblQsR0FBS1csSUFBTVgsRUFDekQsSUFBSyxJQUFJc3RCLEVBQUlyZSxFQUFVaUUsS0FBTW9nQixFQUFLcmtCLEVBQVVtRSxLQUFNa2EsR0FBS2dHLElBQU1oRyxFQUN6RHBlLEVBQVMsQ0FBQ3RELEVBQU01TCxFQUFHc3RCLEtBVy9CcXBDLEVBQVMxM0QsVUFBVTRrQixnQ0FBa0MsU0FBVWhWLEVBQVdLLEVBQVU2b0QsRUFBZXhrRCxHQUMvRixJQUFlOUwsRUFBR0MsRUFDZHN3RCxFQUFrQixLQUNsQjkxQyxFQUFJclQsRUFBVSxHQUFLLEVBUXZCLElBUHlCLElBQXJCaFEsS0FBS3E1QixhQUNMendCLEVBQUlvSCxFQUFVLEdBQ2RuSCxFQUFJbUgsRUFBVSxJQUdkbXBELEVBQWtCbjVELEtBQUt1bUIsbUJBQW1CdlcsRUFBVzBFLEdBRWxEMk8sR0FBS3JqQixLQUFLdUssU0FBUyxDQVN0QixHQUFJOEYsRUFBU2dULEVBUlksSUFBckJyakIsS0FBS3E1QixZQUdPLEdBRlp6d0IsRUFBSUYsS0FBSzJ2QixNQUFNenZCLEVBQUksR0FFb0JBLEVBRHZDQyxFQUFJSCxLQUFLMnZCLE1BQU14dkIsRUFBSSxHQUMwQkEsRUFBR3F3RCxHQUdwQ2w1RCxLQUFLcWtCLDBCQUEwQjgwQyxFQUFpQjkxQyxFQUFHNjFDLElBRy9ELE9BQU8sSUFFVDcxQyxFQUVOLE9BQU8sR0FPWHkwQyxFQUFTMTNELFVBQVVxTCxVQUFZLFdBQzNCLE9BQU96TCxLQUFLc2MsU0FPaEJ3N0MsRUFBUzEzRCxVQUFVeUwsV0FBYSxXQUM1QixPQUFPN0wsS0FBS3dLLFNBT2hCc3RELEVBQVMxM0QsVUFBVXdMLFdBQWEsV0FDNUIsT0FBTzVMLEtBQUt1SyxTQVFoQnV0RCxFQUFTMTNELFVBQVVnNUQsVUFBWSxTQUFVLzFDLEdBQ3JDLE9BQUlyakIsS0FBS280RCxRQUNFcDRELEtBQUtvNEQsUUFHTHA0RCxLQUFLczRELFNBQVNqMUMsSUFTN0J5MEMsRUFBUzEzRCxVQUFVNmpCLGNBQWdCLFNBQVVaLEdBQ3pDLE9BQU9yakIsS0FBS3M1QixhQUFhalcsSUFPN0J5MEMsRUFBUzEzRCxVQUFVaStCLGVBQWlCLFdBQ2hDLE9BQU9yK0IsS0FBS3M1QixjQVFoQncrQixFQUFTMTNELFVBQVUwa0IsMkJBQTZCLFNBQVU5VSxFQUFXa3BELEVBQWV4a0QsR0FDaEYsR0FBSTFFLEVBQVUsR0FBS2hRLEtBQUt3SyxRQUFTLENBQzdCLEdBQXlCLElBQXJCeEssS0FBS3E1QixZQUFtQixDQUN4QixJQUFJamxCLEVBQXNCLEVBQWZwRSxFQUFVLEdBQ2pCcUUsRUFBc0IsRUFBZnJFLEVBQVUsR0FDckIsT0FBTyxHQUF3Qm9FLEVBQU1BLEVBQU8sRUFBR0MsRUFBTUEsRUFBTyxFQUFHNmtELEdBRW5FLElBQUlDLEVBQWtCbjVELEtBQUt1bUIsbUJBQW1CdlcsRUFBVzBFLEdBQWMxVSxLQUFLNjRELFlBQzVFLE9BQU83NEQsS0FBS3FrQiwwQkFBMEI4MEMsRUFBaUJucEQsRUFBVSxHQUFLLEVBQUdrcEQsR0FFN0UsT0FBTyxNQVFYcEIsRUFBUzEzRCxVQUFVaTVELDZCQUErQixTQUFVcnBELEVBQVdxVCxFQUFHNjFDLEdBQ3RFLEdBQUk3MUMsRUFBSXJqQixLQUFLd0ssU0FBVzZZLEVBQUlyakIsS0FBS3VLLFFBQzdCLE9BQU8sS0FFWCxJQUFJK3VELEVBQWF0cEQsRUFBVSxHQUN2QnVwRCxFQUFhdnBELEVBQVUsR0FDdkJ3cEQsRUFBYXhwRCxFQUFVLEdBQzNCLEdBQUlxVCxJQUFNaTJDLEVBQ04sT0FBTyxHQUF3QkMsRUFBWUMsRUFBWUQsRUFBWUMsRUFBWU4sR0FFbkYsR0FBSWw1RCxLQUFLcTVCLFlBQWEsQ0FDbEIsSUFBSXVtQixFQUFTbDNDLEtBQUswaUIsSUFBSXByQixLQUFLcTVCLFlBQWFoVyxFQUFJaTJDLEdBQ3hDbGxELEVBQU8xTCxLQUFLMnZCLE1BQU1raEMsRUFBYTNaLEdBQy9CdnJDLEVBQU8zTCxLQUFLMnZCLE1BQU1taEMsRUFBYTVaLEdBQ25DLE9BQUl2OEIsRUFBSWkyQyxFQUNHLEdBQXdCbGxELEVBQU1BLEVBQU1DLEVBQU1BLEVBQU02a0QsR0FJcEQsR0FBd0I5a0QsRUFGcEIxTCxLQUFLMnZCLE1BQU11bkIsR0FBVTJaLEVBQWEsSUFBTSxFQUVSbGxELEVBRGhDM0wsS0FBSzJ2QixNQUFNdW5CLEdBQVU0WixFQUFhLElBQU0sRUFDSU4sR0FFM0QsSUFBSUMsRUFBa0JuNUQsS0FBS3VtQixtQkFBbUJ2VyxFQUFXaFEsS0FBSzY0RCxZQUM5RCxPQUFPNzRELEtBQUtxa0IsMEJBQTBCODBDLEVBQWlCOTFDLEVBQUc2MUMsSUFTOURwQixFQUFTMTNELFVBQVVxNUQsbUJBQXFCLFNBQVVwMkMsRUFBR2pULEVBQVdzRSxHQUM1RCxJQUFJMmpELEVBQVNyNEQsS0FBS281RCxVQUFVLzFDLEdBQ3hCdlcsRUFBYTlNLEtBQUtpa0IsY0FBY1osR0FDaENxMUMsRUFBVzVwQixHQUFPOXVDLEtBQUsyekQsWUFBWXR3QyxHQUFJcmpCLEtBQUs0NEQsVUFDNUN4a0QsRUFBT2lrRCxFQUFPLEdBQUtqb0QsRUFBVWdFLEtBQU9za0QsRUFBUyxHQUFLNXJELEVBQ2xEd0gsRUFBTytqRCxFQUFPLElBQU1qb0QsRUFBVWtFLEtBQU8sR0FBS29rRCxFQUFTLEdBQUs1ckQsRUFHNUQsT0FBTzJILEdBQWVMLEVBRlhpa0QsRUFBTyxHQUFLam9ELEVBQVVpRSxLQUFPcWtELEVBQVMsR0FBSzVyRCxFQUVwQndILEVBRHZCK2pELEVBQU8sSUFBTWpvRCxFQUFVbUUsS0FBTyxHQUFLbWtELEVBQVMsR0FBSzVyRCxFQUNkNEgsSUFTbERvakQsRUFBUzEzRCxVQUFVaWtCLDBCQUE0QixTQUFVN1ksRUFBUTZYLEVBQUc2MUMsR0FDaEUsSUFBSWxwRCxFQUFZNm5ELEdBQ2hCNzNELEtBQUswNUQsdUJBQXVCbHVELEVBQU8sR0FBSUEsRUFBTyxHQUFJNlgsR0FBRyxFQUFPclQsR0FDNUQsSUFBSW9FLEVBQU9wRSxFQUFVLEdBQ2pCcUUsRUFBT3JFLEVBQVUsR0FFckIsT0FEQWhRLEtBQUswNUQsdUJBQXVCbHVELEVBQU8sR0FBSUEsRUFBTyxHQUFJNlgsR0FBRyxFQUFNclQsR0FDcEQsR0FBd0JvRSxFQUFNcEUsRUFBVSxHQUFJcUUsRUFBTXJFLEVBQVUsR0FBSWtwRCxJQU0zRXBCLEVBQVMxM0QsVUFBVTZvQixtQkFBcUIsU0FBVWpaLEdBQzlDLElBQUlxb0QsRUFBU3I0RCxLQUFLbzVELFVBQVVwcEQsRUFBVSxJQUNsQ2xELEVBQWE5TSxLQUFLaWtCLGNBQWNqVSxFQUFVLElBQzFDMG9ELEVBQVc1cEIsR0FBTzl1QyxLQUFLMnpELFlBQVkzakQsRUFBVSxJQUFLaFEsS0FBSzQ0RCxVQUMzRCxNQUFPLENBQ0hQLEVBQU8sSUFBTXJvRCxFQUFVLEdBQUssSUFBTzBvRCxFQUFTLEdBQUs1ckQsRUFDakR1ckQsRUFBTyxJQUFNcm9ELEVBQVUsR0FBSyxJQUFPMG9ELEVBQVMsR0FBSzVyRCxJQVd6RGdyRCxFQUFTMTNELFVBQVVtbUIsbUJBQXFCLFNBQVV2VyxFQUFXMEUsR0FDekQsSUFBSTJqRCxFQUFTcjRELEtBQUtvNUQsVUFBVXBwRCxFQUFVLElBQ2xDbEQsRUFBYTlNLEtBQUtpa0IsY0FBY2pVLEVBQVUsSUFDMUMwb0QsRUFBVzVwQixHQUFPOXVDLEtBQUsyekQsWUFBWTNqRCxFQUFVLElBQUtoUSxLQUFLNDRELFVBQ3ZEeGtELEVBQU9pa0QsRUFBTyxHQUFLcm9ELEVBQVUsR0FBSzBvRCxFQUFTLEdBQUs1ckQsRUFDaER1SCxFQUFPZ2tELEVBQU8sSUFBTXJvRCxFQUFVLEdBQUssR0FBSzBvRCxFQUFTLEdBQUs1ckQsRUFHMUQsT0FBTzJILEdBQWVMLEVBQU1DLEVBRmpCRCxFQUFPc2tELEVBQVMsR0FBSzVyRCxFQUNyQnVILEVBQU9xa0QsRUFBUyxHQUFLNXJELEVBQ2M0SCxJQWFsRG9qRCxFQUFTMTNELFVBQVV1NUQsa0NBQW9DLFNBQVVucEQsRUFBWTFELEVBQVlpcUQsR0FDckYsT0FBTy8yRCxLQUFLNDVELGdDQUFnQ3BwRCxFQUFXLEdBQUlBLEVBQVcsR0FBSTFELEdBQVksRUFBT2lxRCxJQWVqR2UsRUFBUzEzRCxVQUFVdzVELGdDQUFrQyxTQUFVaHhELEVBQUdDLEVBQUdpRSxFQUFZK3NELEVBQTJCOUMsR0FDeEcsSUFBSTF6QyxFQUFJcmpCLEtBQUs4akIsa0JBQWtCaFgsR0FDM0IwZ0IsRUFBUTFnQixFQUFhOU0sS0FBS2lrQixjQUFjWixHQUN4Q2cxQyxFQUFTcjRELEtBQUtvNUQsVUFBVS8xQyxHQUN4QnExQyxFQUFXNXBCLEdBQU85dUMsS0FBSzJ6RCxZQUFZdHdDLEdBQUlyakIsS0FBSzQ0RCxVQUM1Q2tCLEVBQVVELEVBQTRCLEdBQU0sRUFDNUNFLEVBQVVGLEVBQTRCLEdBQU0sRUFDNUNHLEVBQWN0eEQsS0FBSzJ2QixPQUFPenZCLEVBQUl5dkQsRUFBTyxJQUFNdnJELEVBQWFndEQsR0FDeERHLEVBQWN2eEQsS0FBSzJ2QixPQUFPZ2dDLEVBQU8sR0FBS3h2RCxHQUFLaUUsRUFBYWl0RCxHQUN4RFIsRUFBYy9yQyxFQUFRd3NDLEVBQWV0QixFQUFTLEdBQzlDYyxFQUFjaHNDLEVBQVF5c0MsRUFBZXZCLEVBQVMsR0FTbEQsT0FSSW1CLEdBQ0FOLEVBQWE3d0QsS0FBS213QixLQUFLMGdDLEdBQWMsRUFDckNDLEVBQWE5d0QsS0FBS213QixLQUFLMmdDLEdBQWMsSUFHckNELEVBQWE3d0QsS0FBSzJ2QixNQUFNa2hDLEdBQ3hCQyxFQUFhOXdELEtBQUsydkIsTUFBTW1oQyxJQUVyQixHQUF3Qm4yQyxFQUFHazJDLEVBQVlDLEVBQVl6QyxJQWlCOURlLEVBQVMxM0QsVUFBVXM1RCx1QkFBeUIsU0FBVTl3RCxFQUFHQyxFQUFHd2EsRUFBR3cyQyxFQUEyQjlDLEdBQ3RGLElBQUlzQixFQUFTcjRELEtBQUtvNUQsVUFBVS8xQyxHQUN4QnZXLEVBQWE5TSxLQUFLaWtCLGNBQWNaLEdBQ2hDcTFDLEVBQVc1cEIsR0FBTzl1QyxLQUFLMnpELFlBQVl0d0MsR0FBSXJqQixLQUFLNDRELFVBQzVDa0IsRUFBVUQsRUFBNEIsR0FBTSxFQUM1Q0UsRUFBVUYsRUFBNEIsR0FBTSxFQUM1Q0csRUFBY3R4RCxLQUFLMnZCLE9BQU96dkIsRUFBSXl2RCxFQUFPLElBQU12ckQsRUFBYWd0RCxHQUN4REcsRUFBY3Z4RCxLQUFLMnZCLE9BQU9nZ0MsRUFBTyxHQUFLeHZELEdBQUtpRSxFQUFhaXRELEdBQ3hEUixFQUFhUyxFQUFjdEIsRUFBUyxHQUNwQ2MsRUFBYVMsRUFBY3ZCLEVBQVMsR0FTeEMsT0FSSW1CLEdBQ0FOLEVBQWE3d0QsS0FBS213QixLQUFLMGdDLEdBQWMsRUFDckNDLEVBQWE5d0QsS0FBS213QixLQUFLMmdDLEdBQWMsSUFHckNELEVBQWE3d0QsS0FBSzJ2QixNQUFNa2hDLEdBQ3hCQyxFQUFhOXdELEtBQUsydkIsTUFBTW1oQyxJQUVyQixHQUF3Qm4yQyxFQUFHazJDLEVBQVlDLEVBQVl6QyxJQVU5RGUsRUFBUzEzRCxVQUFVaW1CLHlCQUEyQixTQUFVN1YsRUFBWTZTLEVBQUcwekMsR0FDbkUsT0FBTy8yRCxLQUFLMDVELHVCQUF1QmxwRCxFQUFXLEdBQUlBLEVBQVcsR0FBSTZTLEdBQUcsRUFBTzB6QyxJQU0vRWUsRUFBUzEzRCxVQUFVODVELHVCQUF5QixTQUFVbHFELEdBQ2xELE9BQU9oUSxLQUFLczVCLGFBQWF0cEIsRUFBVSxLQVV2QzhuRCxFQUFTMTNELFVBQVV1ekQsWUFBYyxTQUFVdHdDLEdBQ3ZDLE9BQUlyakIsS0FBS3k0RCxVQUNFejRELEtBQUt5NEQsVUFHTHo0RCxLQUFLdTRELFdBQVdsMUMsSUFPL0J5MEMsRUFBUzEzRCxVQUFVKzVELGlCQUFtQixTQUFVOTJDLEdBQzVDLE9BQUtyakIsS0FBSzI0RCxnQkFNQzM0RCxLQUFLMjRELGdCQUFnQnQxQyxHQUxyQnJqQixLQUFLc2MsUUFDTnRjLEtBQUtxa0IsMEJBQTBCcmtCLEtBQUtzYyxRQUFTK0csR0FDN0MsTUF1QmR5MEMsRUFBUzEzRCxVQUFVMGpCLGtCQUFvQixTQUFVaFgsRUFBWTgwQixHQUV6RCxPQUFPLEVBREM5Z0MsRUFBa0JkLEtBQUtzNUIsYUFBY3hzQixFQUFZODBCLEdBQWlCLEdBQzFENWhDLEtBQUt1SyxRQUFTdkssS0FBS3dLLFVBTXZDc3RELEVBQVMxM0QsVUFBVTQ0RCxxQkFBdUIsU0FBVXh0RCxHQUdoRCxJQUZBLElBQUl0SyxFQUFTbEIsS0FBS3M1QixhQUFhcDRCLE9BQzNCazVELEVBQWlCLElBQUl0M0QsTUFBTTVCLEdBQ3RCbWlCLEVBQUlyakIsS0FBS3VLLFFBQVM4WSxFQUFJbmlCLElBQVVtaUIsRUFDckMrMkMsRUFBZS8yQyxHQUFLcmpCLEtBQUtxa0IsMEJBQTBCN1ksRUFBUTZYLEdBRS9EcmpCLEtBQUsyNEQsZ0JBQWtCeUIsR0FFcEJ0QyxFQXBma0IsR0NyQ3RCLFNBQVN1QyxHQUFpQmxxRCxHQUM3QixJQUFJME4sRUFBVzFOLEVBQVd3TixxQkFLMUIsT0FKS0UsSUFDREEsRUEwR0QsU0FBNkIxTixFQUFZbXFELEVBQWFDLEVBQWNDLEdBRXZFLE9BMUVHLFNBQXlCaHZELEVBQVE4dUQsRUFBYUMsRUFBY0MsR0FDL0QsSUFDSXRpQyxFQUFjdWlDLEdBQXNCanZELEVBd0VUOHVELFVBeEU4QkMsR0FDN0QsT0FBTyxJQUFJLEdBQVMsQ0FDaEIvdUQsT0FBUUEsRUFDUjZzRCxPQUFRdmlELEdBQVV0SyxFQUorQndLLFlBS2pEa2lCLFlBQWFBLEVBQ2J3Z0MsU0FBVTZCLElBbUVQRyxDQURNQyxHQUFxQnhxRCxHQTNHbkJ5cUQsV0FBb0J6cUQsR0FDL0JBLEVBQVd5TixtQkFBbUJDLElBRTNCQSxFQStFWCxTQUFTNDhDLEdBQXNCanZELEVBQVE4dUQsRUFBYUMsRUFBY00sR0FVOUQsSUFUQSxJQUFJcndELE9BQTBCNUYsSUFBaEIwMUQsRUFBNEJBLEVyRTlGaEIsR3FFK0Z0QjFpRCxFQUFTaEMsR0FBVXBLLEdBQ25CbU0sRUFBUSxHQUFTbk0sR0FDakJrdEQsRUFBVzVwQixRQUF3QmxxQyxJQUFqQjIxRCxFQUE2QkEsRXJFNUZ4QixLcUU2RnZCbndELEVBQWdCeXdELEVBQW9CLEVBQ2xDQSxFQUNBbnlELEtBQUtELElBQUlrUCxFQUFRK2dELEVBQVMsR0FBSTlnRCxFQUFTOGdELEVBQVMsSUFDbER4M0QsRUFBU3NKLEVBQVUsRUFDbkIwdEIsRUFBYyxJQUFJcDFCLE1BQU01QixHQUNuQm1pQixFQUFJLEVBQUdBLEVBQUluaUIsSUFBVW1pQixFQUMxQjZVLEVBQVk3VSxHQUFLalosRUFBZ0IxQixLQUFLMGlCLElBQUksRUFBRy9ILEdBRWpELE9BQU82VSxFQXFCSixTQUFTeWlDLEdBQXFCeHFELEdBRWpDLElBQUkzRSxHQURKMkUsRUFBYSxHQUFjQSxJQUNIMUUsWUFDeEIsSUFBS0QsRUFBUSxDQUNULElBQUlzdkQsRUFBUSxJQUFNNStDLEdBQWdCLFlBQWtCL0wsRUFBV21OLG1CQUMvRDlSLEVBQVNpSixJQUFnQnFtRCxHQUFPQSxFQUFNQSxFQUFNQSxHQUVoRCxPQUFPdHZELEVDN0lYLElBQUksR0FBd0MsV0FDeEMsSUFBSWxKLEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EyRHhDNjNELEdBQTRCLFNBQVUxM0QsR0FLdEMsU0FBUzAzRCxFQUFXaHhELEdBQ2hCLElBQUl2RyxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTSxDQUMxQnE0QyxhQUFjdHVDLEVBQVFzdUMsYUFDdEJtZix3QkFBeUJ6dEQsRUFBUXl0RCx3QkFDakNybkQsV0FBWXBHLEVBQVFvRyxXQUNwQnBGLE1BQU9oQixFQUFRZ0IsTUFDZjJzRCxNQUFPM3RELEVBQVEydEQsU0FDYjEzRCxLQUlOd0QsRUFBTW9DLEdBSU5wQyxFQUFNc0MsS0FJTnRDLEVBQU13QyxHQUtOeEMsRUFBTXczRCxhQUE2QnAyRCxJQUFuQm1GLEVBQVFreEQsUUFBdUJseEQsRUFBUWt4RCxPQUt2RHozRCxFQUFNMDNELHFCQUN5QnQyRCxJQUEzQm1GLEVBQVFtYSxlQUErQm5hLEVBQVFtYSxlQUFpQixFQUtwRTFnQixFQUFNcWEsY0FBZ0NqWixJQUFyQm1GLEVBQVE4VCxTQUF5QjlULEVBQVE4VCxTQUFXLEtBQ3JFLElBQ0lBLEVBQVc5VCxFQUFROFQsU0FnQ3ZCLE9BL0JJQSxHQUNBaXhCLEdBQU9qeEIsRUFBUzgxQyxZQUFZOTFDLEVBQVNqUyxjQUgxQixDQUFDLElBQUssTUFTckJwSSxFQUFNMjNELFVBQVksSUFBSSxHQUFVcHhELEVBQVFxeEQsV0FBYSxHQUtyRDUzRCxFQUFNNjNELFFBQVUsQ0FBQyxFQUFHLEdBS3BCNzNELEVBQU1pekQsS0FBTzFzRCxFQUFROUgsS0FBTyxHQUs1QnVCLEVBQU04M0QsWUFBYyxDQUFFbjBDLFdBQVlwZCxFQUFRb2QsWUFRMUMzakIsRUFBTXVnQixXQUFhaGEsRUFBUWdhLFdBQWFoYSxFQUFRZ2EsV0FBYSxFQUN0RHZnQixFQWdOWCxPQXpSQSxHQUFVdTNELEVBQVkxM0QsR0E4RXRCMDNELEVBQVczNkQsVUFBVWlvQixlQUFpQixXQUNsQyxPQUFPcm9CLEtBQUttN0QsVUFBVTl5QyxrQkFNMUIweUMsRUFBVzM2RCxVQUFVb29CLFlBQWMsU0FBVXJZLEVBQVlzWCxHQUNyRCxJQUFJMHpDLEVBQVluN0QsS0FBS3U3RCwwQkFBMEJwckQsR0FDM0NnckQsR0FDQUEsRUFBVTN5QyxZQUFZZixJQVk5QnN6QyxFQUFXMzZELFVBQVVrUSxrQkFBb0IsU0FBVUgsRUFBWWtULEVBQUdqVCxFQUFXQyxHQUN6RSxJQUFJOHFELEVBQVluN0QsS0FBS3U3RCwwQkFBMEJwckQsR0FDL0MsSUFBS2dyRCxFQUNELE9BQU8sRUFJWCxJQUZBLElBQ0lwckQsRUFBTTZXLEVBQWM0MEMsRUFEcEJ6MkMsR0FBVSxFQUVMbmMsRUFBSXdILEVBQVVnRSxLQUFNeEwsR0FBS3dILEVBQVVrRSxPQUFRMUwsRUFDaEQsSUFBSyxJQUFJQyxFQUFJdUgsRUFBVWlFLEtBQU14TCxHQUFLdUgsRUFBVW1FLE9BQVExTCxFQUNoRCtkLEVBQWVvd0MsR0FBVTN6QyxFQUFHemEsRUFBR0MsR0FDL0IyeUQsR0FBUyxFQUNMTCxFQUFVN0UsWUFBWTF2QyxLQUV0QjQwQyxFbEdwS1IsS2tHbUtRenJELEVBQXFEb3JELEVBQVUvekQsSUFBSXdmLElBQ3JEOVksY0FFVjB0RCxHQUE0QixJQUFuQm5yRCxFQUFTTixJQUdyQnlyRCxJQUNEejJDLEdBQVUsR0FJdEIsT0FBT0EsR0FNWGcyQyxFQUFXMzZELFVBQVVzbUIsdUJBQXlCLFNBQVV2VyxHQUNwRCxPQUFPLEdBT1g0cUQsRUFBVzM2RCxVQUFVc29CLE9BQVMsV0FDMUIsT0FBTzFvQixLQUFLeTJELE1BT2hCc0UsRUFBVzM2RCxVQUFVcTdELE9BQVMsU0FBVXg1RCxHQUNoQ2pDLEtBQUt5MkQsT0FBU3gwRCxJQUNkakMsS0FBS3kyRCxLQUFPeDBELEVBQ1pqQyxLQUFLbUcsWUFPYjQwRCxFQUFXMzZELFVBQVV3bEIsVUFBWSxTQUFVelYsR0FDdkMsT0FBT25RLEtBQUtnN0QsU0FLaEJELEVBQVczNkQsVUFBVWkrQixlQUFpQixXQUNsQyxPQUFPcitCLEtBQUs2ZCxTQUFTd2dCLGtCQVd6QjA4QixFQUFXMzZELFVBQVVnakIsUUFBVSxTQUFVQyxFQUFHemEsRUFBR0MsRUFBRzBSLEVBQVlwSyxHQUMxRCxPQUFPLEtBT1g0cUQsRUFBVzM2RCxVQUFVczdELFlBQWMsV0FDL0IsT0FBTzE3RCxLQUFLNmQsVUFNaEJrOUMsRUFBVzM2RCxVQUFVeWpCLHlCQUEyQixTQUFVMVQsR0FDdEQsT0FBS25RLEtBQUs2ZCxTQUlDN2QsS0FBSzZkLFNBSEwsR0FBeUIxTixJQVd4QzRxRCxFQUFXMzZELFVBQVVtN0QsMEJBQTRCLFNBQVVwckQsR0FHdkQsT0FGQSxFQUFPaVIsR0FBV3BoQixLQUFLdTdCLGdCQUFpQnByQixHQUFhLElBRTlDblEsS0FBS203RCxXQVNoQkosRUFBVzM2RCxVQUFVK2pCLGtCQUFvQixTQUFVNUosR0FDL0MsT0FBT3ZhLEtBQUtrN0QsaUJBUWhCSCxFQUFXMzZELFVBQVU0bEIsaUJBQW1CLFNBQVUzQyxFQUFHOUksRUFBWXBLLEdBQzdELElsRHJQY2lHLEVBQU0rVCxFQUFPc1QsRWtEcVB2QjVmLEVBQVc3ZCxLQUFLNmpCLHlCQUF5QjFULEdBQ3pDK1QsRUFBaUJsa0IsS0FBS21rQixrQkFBa0I1SixHQUN4Q20rQyxFQUFXNXBCLEdBQU9qeEIsRUFBUzgxQyxZQUFZdHdDLEdBQUlyakIsS0FBS3E3RCxTQUNwRCxPQUFzQixHQUFsQm4zQyxFQUNPdzBDLEdsRHpQR3RpRCxFa0Q0UE9zaUQsRWxENVBEdnVDLEVrRDRQV2pHLE9sRDNQbEJ0ZixLQURjNjRCLEVrRDRQb0J6OUIsS0FBS3E3RCxXbEQxUHBENTlCLEVBQVcsQ0FBQyxFQUFHLElBRW5CQSxFQUFTLEdBQU1ybkIsRUFBSyxHQUFLK1QsRUFBUSxHQUFPLEVBQ3hDc1QsRUFBUyxHQUFNcm5CLEVBQUssR0FBSytULEVBQVEsR0FBTyxFQUNqQ3NULElrRGtRUHM5QixFQUFXMzZELFVBQVV1N0QsK0JBQWlDLFNBQVUzckQsRUFBVzRyRCxHQUN2RSxJQUFJenJELE9BQWdDdkwsSUFBbkJnM0QsRUFBK0JBLEVBQWlCNTdELEtBQUt1N0IsZ0JBQ2xFMWQsRUFBVzdkLEtBQUs2akIseUJBQXlCMVQsR0FJN0MsT0FISW5RLEtBQUtna0MsWUFBYzd6QixFQUFXc04sYUFDOUJ6TixFRHJSTCxTQUFlNk4sRUFBVTdOLEVBQVdHLEdBQ3ZDLElBQUlrVCxFQUFJclQsRUFBVSxHQUNka0csRUFBUzJILEVBQVNvTCxtQkFBbUJqWixHQUNyQzB6QixFQUFtQmkzQixHQUFxQnhxRCxHQUM1QyxHQUFLOEQsR0FBbUJ5dkIsRUFBa0J4dEIsR0FPdEMsT0FBT2xHLEVBTlAsSUFBSXV6QixFQUFhLEdBQVNHLEdBQ3RCRixFQUFhOTZCLEtBQUttd0IsTUFBTTZLLEVBQWlCLEdBQUt4dEIsRUFBTyxJQUFNcXRCLEdBRS9ELE9BREFydEIsRUFBTyxJQUFNcXRCLEVBQWFDLEVBQ25CM2xCLEVBQVN3SSx5QkFBeUJuUSxFQUFRbU4sR0M2UWpDLENBQU14RixFQUFVN04sRUFBV0csSUx0TzVDLFNBQTBCSCxFQUFXNk4sR0FDeEMsSUFBSXdGLEVBQUlyVCxFQUFVLEdBQ2RwSCxFQUFJb0gsRUFBVSxHQUNkbkgsRUFBSW1ILEVBQVUsR0FDbEIsR0FBSTZOLEVBQVNqUyxhQUFleVgsR0FBS0EsRUFBSXhGLEVBQVNoUyxhQUMxQyxPQUFPLEVBRVgsSUFBSXVFLEVBQVl5TixFQUFTczhDLGlCQUFpQjkyQyxHQUMxQyxPQUFLalQsR0FJTUEsRUFBVThELFdBQVd0TCxFQUFHQyxHSzROeEJnekQsQ0FBaUI3ckQsRUFBVzZOLEdBQVk3TixFQUFZLE1BTS9EK3FELEVBQVczNkQsVUFBVStCLE1BQVEsV0FDekJuQyxLQUFLbTdELFVBQVVoNUQsU0FFbkI0NEQsRUFBVzM2RCxVQUFVdTNELFFBQVUsV0FDM0IzM0QsS0FBS21DLFFBQ0xrQixFQUFPakQsVUFBVXUzRCxRQUFRMzBELEtBQUtoRCxPQU9sQys2RCxFQUFXMzZELFVBQVUrb0IsZ0JBQWtCLFNBQVVMLEVBQVczWSxHQUN4RCxJQUFJZ3JELEVBQVluN0QsS0FBS3U3RCwwQkFBMEJwckQsR0FDM0MyWSxFQUFZcXlDLEVBQVVsRixnQkFDdEJrRixFQUFVbEYsY0FBZ0JudEMsSUFXbENpeUMsRUFBVzM2RCxVQUFVOG9CLFFBQVUsU0FBVTdGLEVBQUd6YSxFQUFHQyxFQUFHc0gsS0FDM0M0cUQsRUExUm9CLENBMlI3QixJQU1FZSxHQUFpQyxTQUFVejRELEdBTTNDLFNBQVN5NEQsRUFBZ0IvN0QsRUFBTWdRLEdBQzNCLElBQUl2TSxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTUQsSUFBU0MsS0FPdkMsT0FEQXdELEVBQU11TSxLQUFPQSxFQUNOdk0sRUFFWCxPQWZBLEdBQVVzNEQsRUFBaUJ6NEQsR0FlcEJ5NEQsRUFoQnlCLENBaUJsQyxHQUVGLFlDcFdPLFNBQVNDLEdBQW1CQyxFQUFVbitDLEdBQ3pDLElBQUlvK0MsRUFBUyxTQUNUQyxFQUFTLFNBQ1RDLEVBQVMsU0FDVEMsRUFBYSxVQUNqQixPQUFPLFNBT0dwc0QsRUFBV3VLLEVBQVlwSyxHQUM3QixPQUFLSCxFQUlNZ3NELEVBQ0Z6N0MsUUFBUTA3QyxFQUFRanNELEVBQVUsR0FBR0MsWUFDN0JzUSxRQUFRMjdDLEVBQVFsc0QsRUFBVSxHQUFHQyxZQUM3QnNRLFFBQVE0N0MsRUFBUW5zRCxFQUFVLEdBQUdDLFlBQzdCc1EsUUFBUTY3QyxHQUFZLFdBQ3JCLElBQUkvNEMsRUFBSXJULEVBQVUsR0FDZHFzRCxFQUFReCtDLEVBQVNzOEMsaUJBQWlCOTJDLEdBR3RDLE9BRkEsRUFBT2c1QyxFQUFPLEtBQ05BLEVBQU16bUQsWUFBYzVGLEVBQVUsR0FBSyxHQUNsQ0MsbUJBWmIsR0N6QlosSUFBSSxHQUF3QyxXQUN4QyxJQUFJM04sRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQXNPNUMsU0FyTDZCLFNBQVVHLEdBS25DLFNBQVNpNUQsRUFBUXZ5RCxHQUNiLElBQUl2RyxFQUFRSCxFQUFPTCxLQUFLaEQsS0FBTSxDQUMxQnE0QyxhQUFjdHVDLEVBQVFzdUMsYUFDdEIraUIsVUFBV3J4RCxFQUFRcXhELFVBQ25CSCxPQUFRbHhELEVBQVFreEQsT0FDaEI5cUQsV0FBWXBHLEVBQVFvRyxXQUNwQnBGLE1BQU9oQixFQUFRZ0IsTUFDZjhTLFNBQVU5VCxFQUFROFQsU0FDbEJxRyxlQUFnQm5hLEVBQVFtYSxlQUN4Qnd6QyxNQUFPM3RELEVBQVEydEQsTUFDZnZ3QyxXQUFZcGQsRUFBUW9kLFdBQ3BCbGxCLElBQUs4SCxFQUFROUgsSUFDYnUxRCx3QkFBeUJ6dEQsRUFBUXl0RCx3QkFDakN6ekMsV0FBWWhhLEVBQVFnYSxjQUNsQi9qQixLQStCTixPQTFCQXdELEVBQU0rNEQseUJBQ0YvNEQsRUFBTWc1RCxrQkFBb0JGLEVBQVFsOEQsVUFBVW84RCxnQkFLaERoNUQsRUFBTXdwRCxpQkFBbUJqakQsRUFBUWlqRCxpQkFDN0JqakQsRUFBUXl5RCxrQkFDUmg1RCxFQUFNZzVELGdCQUFrQnp5RCxFQUFReXlELGlCQU1wQ2g1RCxFQUFNaTVELEtBQU8sS0FDVDF5RCxFQUFRMHlELEtBQ1JqNUQsRUFBTWs1RCxRQUFRM3lELEVBQVEweUQsTUFFakIxeUQsRUFBUTR5RCxLQUNibjVELEVBQU1vNUQsT0FBTzd5RCxFQUFRNHlELEtBTXpCbjVELEVBQU1xNUQsaUJBQW1CLEdBQ2xCcjVELEVBaUlYLE9BbExBLEdBQVU4NEQsRUFBU2o1RCxHQXdEbkJpNUQsRUFBUWw4RCxVQUFVMDhELG9CQUFzQixXQUNwQyxPQUFPOThELEtBQUtndEQsa0JBT2hCc1AsRUFBUWw4RCxVQUFVMjhELG1CQUFxQixXQUNuQyxPQUFPcDlELE9BQU9xOUQsZUFBZWg5RCxNQUFNdzhELGtCQUFvQng4RCxLQUFLdzhELGdCQUN0RHg4RCxLQUFLdzhELGdCQUFnQm4zRCxLQUFLckYsTUFDMUJBLEtBQUt3OEQsaUJBU2ZGLEVBQVFsOEQsVUFBVTY4RCxRQUFVLFdBQ3hCLE9BQU9qOUQsS0FBS3k4RCxNQU9oQkgsRUFBUWw4RCxVQUFVOHRDLGlCQUFtQixTQUFVL3BDLEdBQzNDLElBR0lwRSxFQUhBZ1EsRUFBb0Q1TCxFQUFZLE9BQ2hFc2dCLEVBQU05ZCxFQUFPb0osR0FDYm9ULEVBQVlwVCxFQUFLakMsV3BHakloQixHb0dtSURxVixHQUNBbmpCLEtBQUs2OEQsaUJBQWlCcDRDLElBQU8sRUFDN0Ixa0IsRUNqSU8saUJEbUlGMGtCLEtBQU96a0IsS0FBSzY4RCwwQkFDVjc4RCxLQUFLNjhELGlCQUFpQnA0QyxHQUM3QjFrQixFcEduSUQsR29Hb0lLb2pCLEVDekhHLGdCckdoQlAsR29HMklVQSxFQ2pJTCxtQkRtSVN2ZSxHQUVOQSxNQUFSN0UsR0FDQUMsS0FBS2tFLGNBQWMsSUFBSTQzRCxHQUFnQi83RCxFQUFNZ1EsS0FRckR1c0QsRUFBUWw4RCxVQUFVODhELG9CQUFzQixTQUFVbFEsR0FDOUNodEQsS0FBS203RCxVQUFVaDVELFFBQ2ZuQyxLQUFLZ3RELGlCQUFtQkEsRUFDeEJodEQsS0FBS21HLFdBUVRtMkQsRUFBUWw4RCxVQUFVKzhELG1CQUFxQixTQUFVWCxFQUFpQnY2RCxHQUM5RGpDLEtBQUt3OEQsZ0JBQWtCQSxFQUN2Qng4RCxLQUFLbTdELFVBQVVqRSwwQkFDSSxJQUFSajFELEVBQ1BqQyxLQUFLeTdELE9BQU94NUQsR0FHWmpDLEtBQUttRyxXQVFibTJELEVBQVFsOEQsVUFBVXc4RCxPQUFTLFNBQVVELEdBQ2pDLElBQUlGLEVEOUZMLFNBQW1CRSxHQUN0QixJQUFJRixFQUFPLEdBQ1BXLEVBQVEsc0JBQXNCQyxLQUFLVixHQUN2QyxHQUFJUyxFQUFPLENBRVAsSUFBSUUsRUFBZ0JGLEVBQU0sR0FBRzdjLFdBQVcsR0FDcENnZCxFQUFlSCxFQUFNLEdBQUc3YyxXQUFXLEdBQ25DRCxPQUFXLEVBQ2YsSUFBS0EsRUFBV2dkLEVBQWVoZCxHQUFZaWQsSUFBZ0JqZCxFQUN2RG1jLEVBQUtoNkQsS0FBS2s2RCxFQUFJcDhDLFFBQVE2OEMsRUFBTSxHQUFJbjZELE9BQU91NkQsYUFBYWxkLEtBRXhELE9BQU9tYyxFQUdYLEdBREFXLEVBQVEsa0JBQWtCQyxLQUFLVixHQUNwQixDQUdQLElBREEsSUFBSWMsRUFBU3JuQixTQUFTZ25CLEVBQU0sR0FBSSxJQUN2Qmo4RCxFQUFJaTFDLFNBQVNnbkIsRUFBTSxHQUFJLElBQUtqOEQsR0FBS3M4RCxFQUFRdDhELElBQzlDczdELEVBQUtoNkQsS0FBS2s2RCxFQUFJcDhDLFFBQVE2OEMsRUFBTSxHQUFJajhELEVBQUU4TyxhQUV0QyxPQUFPd3NELEVBR1gsT0FEQUEsRUFBS2g2RCxLQUFLazZELEdBQ0hGLEVDdUVRaUIsQ0FBVWYsR0FDckIzOEQsS0FBS3k4RCxLQUFPQSxFQUNaejhELEtBQUswOEQsUUFBUUQsSUFPakJILEVBQVFsOEQsVUFBVXM4RCxRQUFVLFNBQVVELEdBQ2xDejhELEtBQUt5OEQsS0FBT0EsRUFDWixJQUFJeDZELEVBQU13NkQsRUFBS3IzQyxLQUFLLE1BQ2hCcGxCLEtBQUt1OEQseUJBQ0x2OEQsS0FBS205RCxtQkQxSlYsU0FBNkJRLEVBQVc5L0MsR0FHM0MsSUFGQSxJQUFJdlgsRUFBTXEzRCxFQUFVejhELE9BQ2hCMDhELEVBQW1CLElBQUk5NkQsTUFBTXdELEdBQ3hCbkYsRUFBSSxFQUFHQSxFQUFJbUYsSUFBT25GLEVBQ3ZCeThELEVBQWlCejhELEdBQUs0NkQsR0FBbUI0QixFQUFVeDhELEdBQUkwYyxHQUUzRCxPQU1HLFNBQW9DKy9DLEdBQ3ZDLE9BQWdDLElBQTVCQSxFQUFpQjE4RCxPQUNWMDhELEVBQWlCLEdBRXJCLFNBT0c1dEQsRUFBV3VLLEVBQVlwSyxHQUM3QixHQUFLSCxFQUdBLENBQ0QsSUFDSWhMLEVBQVEsR05SakIsU0FBY2dMLEdBQ2pCLE9BQVFBLEVBQVUsSUFBTUEsRUFBVSxJQUFNQSxFQUFVLEdNTWxDLENBQWNBLEdBQ0E0dEQsRUFBaUIxOEQsUUFDdkMsT0FBTzA4RCxFQUFpQjU0RCxHQUFPZ0wsRUFBV3VLLEVBQVlwSyxLQXhCdkQwdEQsQ0FBMkJELEdDb0pGRSxDQUFvQnJCLEVBQU16OEQsS0FBSzZkLFVBQVc1YixHQUdsRWpDLEtBQUt5N0QsT0FBT3g1RCxJQVNwQnE2RCxFQUFRbDhELFVBQVVvOEQsZ0JBQWtCLFNBQVV4c0QsRUFBV3VLLEVBQVlwSyxLQVNyRW1zRCxFQUFRbDhELFVBQVU4b0IsUUFBVSxTQUFVN0YsRUFBR3phLEVBQUdDLEdBQ3hDLElBQUkrZCxFQUFlb3dDLEdBQVUzekMsRUFBR3phLEVBQUdDLEdBQy9CN0ksS0FBS203RCxVQUFVN0UsWUFBWTF2QyxJQUMzQjVtQixLQUFLbTdELFVBQVUvekQsSUFBSXdmLElBR3BCMDFDLEVBbkxpQixDQW9MMUIsSUVyT0YsSUFBSSxHQUF3QyxXQUN4QyxJQUFJaDZELEVBQWdCLFNBQVVLLEVBQUc5QixHQUk3QixPQUhBeUIsRUFBZ0IzQyxPQUFPaUQsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0JDLE9BQVMsU0FBVUgsRUFBRzlCLEdBQUs4QixFQUFFRSxVQUFZaEMsSUFDdkUsU0FBVThCLEVBQUc5QixHQUFLLElBQUssSUFBSWtDLEtBQUtsQyxFQUFPbEIsT0FBT1MsVUFBVThCLGVBQWVjLEtBQUtuQyxFQUFHa0MsS0FBSUosRUFBRUksR0FBS2xDLEVBQUVrQyxNQUMzRUosRUFBRzlCLElBRTVCLE9BQU8sU0FBVThCLEVBQUc5QixHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJZSxVQUFVLHVCQUF5QnFCLE9BQU9wQyxHQUFLLGlDQUU3RCxTQUFTcUMsSUFBT2xELEtBQUttRCxZQUFjUixFQURuQ0wsRUFBY0ssRUFBRzlCLEdBRWpCOEIsRUFBRXZDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPeUQsT0FBT3ZDLElBQU1xQyxFQUFHOUMsVUFBWVMsRUFBRVQsVUFBVyxJQUFJOEMsSUFaM0MsR0EwYTVDLFNBQVM2NkQsR0FBd0JDLEVBQVdsOEIsR0FDVWs4QixFQUFVNTFDLFdBQVkwWixJQUNwRUEsRUFFUixTQTlWK0IsU0FBVXorQixHQUtyQyxTQUFTNDZELEVBQVVsMEQsR0FDZixJQUFJdkcsRUFBUUgsRUFBT0wsS0FBS2hELEtBQU0sQ0FDMUJxNEMsYUFBY3R1QyxFQUFRc3VDLGFBQ3RCK2lCLFVBQVdyeEQsRUFBUXF4RCxVQUNuQkgsT0FBUWx4RCxFQUFRa3hELE9BQ2hCOXFELFdBQVlwRyxFQUFRb0csV0FDcEJwRixNQUFPaEIsRUFBUWdCLE1BQ2Y4UyxTQUFVOVQsRUFBUThULFNBQ2xCbXZDLGlCQUFrQmpqRCxFQUFRaWpELGlCQUNwQmpqRCxFQUFRaWpELGlCQUNSK1EsR0FDTjc1QyxlQUFnQm5hLEVBQVFtYSxlQUN4QnM0QyxnQkFBaUJ6eUQsRUFBUXl5RCxnQkFDekJHLElBQUs1eUQsRUFBUTR5RCxJQUNiRixLQUFNMXlELEVBQVEweUQsS0FDZC9FLE1BQU8zdEQsRUFBUTJ0RCxNQUNmdndDLFdBQVlwZCxFQUFRb2QsV0FDcEJsbEIsSUFBSzhILEVBQVE5SCxJQUNidTFELHdCQUF5Qnp0RCxFQUFReXRELHdCQUNqQ3p6QyxXQUFZaGEsRUFBUWdhLGNBQ2xCL2pCLEtBdUNOLE9BbENBd0QsRUFBTXUrQixpQkFDc0JuOUIsSUFBeEJtRixFQUFRZzRCLFlBQTRCaDRCLEVBQVFnNEIsWUFBYyxLQUs5RHYrQixFQUFNMDZELGVBQ29CdDVELElBQXRCbUYsRUFBUW0wRCxVQUEwQm4wRCxFQUFRbTBELFVBQVksR0FLMUQxNkQsRUFBTTI2RCx1QkFBeUIsR0FLL0IzNkQsRUFBTTQ2RCxzQkFBd0IsR0FLOUI1NkQsRUFBTTY2RCw0QkFBOEJ0MEQsRUFBUXUwRCwyQkFLNUM5NkQsRUFBTSt1RCxpQkFDeUIsSUFBM0J4b0QsRUFBUXcwRCxlQUEyQnhOLFFBQTJCbnNELEVBS2xFcEIsRUFBTWc3RCwwQkFBMkIsRUFDMUJoN0QsRUFvUlgsT0FuVkEsR0FBVXk2RCxFQUFXNTZELEdBb0VyQjQ2RCxFQUFVNzlELFVBQVVpb0IsZUFBaUIsV0FJakMsR0FBSXJvQixLQUFLbTdELFVBQVU5eUMsaUJBQ2YsT0FBTyxFQUdQLElBQUssSUFBSXBtQixLQUFPakMsS0FBS20rRCx1QkFDakIsR0FBSW4rRCxLQUFLbStELHVCQUF1Qmw4RCxHQUFLb21CLGlCQUNqQyxPQUFPLEVBSW5CLE9BQU8sR0FNWDQxQyxFQUFVNzlELFVBQVVvb0IsWUFBYyxTQUFVclksRUFBWXNYLEdBS3BELElBQUlnM0MsRUFBZ0J6K0QsS0FBS3U3RCwwQkFBMEJwckQsR0FFbkQsSUFBSyxJQUFJODNCLEtBRFRqb0MsS0FBS203RCxVQUFVM3lDLFlBQVl4b0IsS0FBS203RCxXQUFhc0QsRUFBZ0JoM0MsRUFBWSxJQUMxRHpuQixLQUFLbStELHVCQUF3QixDQUN4QyxJQUFJaEQsRUFBWW43RCxLQUFLbStELHVCQUF1QmwyQixHQUM1Q2t6QixFQUFVM3lDLFlBQVkyeUMsR0FBYXNELEVBQWdCaDNDLEVBQVksTUFNdkV3MkMsRUFBVTc5RCxVQUFVaWxCLGtCQUFvQixXQUNwQyxPQUFPcmxCLEtBQUt1eUQsaUJBTWhCMEwsRUFBVTc5RCxVQUFVc21CLHVCQUF5QixTQUFVdlcsR0FDbkQsT0FDSW5RLEtBQUt1N0IsaUJBQ0xwckIsSUFDQ2lSLEdBQVdwaEIsS0FBS3U3QixnQkFBaUJwckIsR0FDM0IsRUFHQW5RLEtBQUswK0QsYUFNcEJULEVBQVU3OUQsVUFBVXMrRCxVQUFZLFdBQzVCLE9BQU8sR0FPWFQsRUFBVTc5RCxVQUFVc29CLE9BQVMsV0FDekIsT0FBUXJsQixFQUFPakQsVUFBVXNvQixPQUFPMWxCLEtBQUtoRCxPQUNoQ0EsS0FBS3V5RCxnQkFBa0IsS0FBT29NLEtBQUtDLFVBQVU1K0QsS0FBS3V5RCxpQkFBbUIsS0FNOUUwTCxFQUFVNzlELFVBQVV3bEIsVUFBWSxTQUFVelYsR0FDdEMsUUFDSW5RLEtBQUt1N0IsaUJBQ0xwckIsSUFDQ2lSLEdBQVdwaEIsS0FBS3U3QixnQkFBaUJwckIsS0FJM0I5TSxFQUFPakQsVUFBVXdsQixVQUFVNWlCLEtBQUtoRCxLQUFNbVEsSUFPckQ4dEQsRUFBVTc5RCxVQUFVeWpCLHlCQUEyQixTQUFVMVQsR0FJckQsSUFBSTB1RCxFQUFXNytELEtBQUt1N0IsZ0JBQ3BCLElBQUl2N0IsS0FBSzZkLFVBQWNnaEQsSUFBWXo5QyxHQUFXeTlDLEVBQVUxdUQsR0FHbkQsQ0FDRCxJQUFJMnVELEVBQVVuNEQsRUFBT3dKLEdBS3JCLE9BSk0ydUQsS0FBVzkrRCxLQUFLbytELHdCQUNsQnArRCxLQUFLbytELHNCQUFzQlUsR0FDdkIsR0FBeUIzdUQsSUFFMUJuUSxLQUFLbytELHNCQUFzQlUsR0FSbEMsT0FBTzkrRCxLQUFLNmQsVUFlcEJvZ0QsRUFBVTc5RCxVQUFVbTdELDBCQUE0QixTQUFVcHJELEdBSXRELElBQUkwdUQsRUFBVzcrRCxLQUFLdTdCLGdCQUNwQixJQUFLc2pDLEdBQVl6OUMsR0FBV3k5QyxFQUFVMXVELEdBQ2xDLE9BQU9uUSxLQUFLbTdELFVBR1osSUFBSTJELEVBQVVuNEQsRUFBT3dKLEdBSXJCLE9BSE0ydUQsS0FBVzkrRCxLQUFLbStELHlCQUNsQm4rRCxLQUFLbStELHVCQUF1QlcsR0FBVyxJQUFJLEdBQVU5K0QsS0FBS203RCxVQUFVbEYsZ0JBRWpFajJELEtBQUttK0QsdUJBQXVCVyxJQWEzQ2IsRUFBVTc5RCxVQUFVMitELFlBQWMsU0FBVTE3QyxFQUFHemEsRUFBR0MsRUFBRzBSLEVBQVlwSyxFQUFZbE8sR0FDekUsSUFBSStOLEVBQVksQ0FBQ3FULEVBQUd6YSxFQUFHQyxHQUNuQm0yRCxFQUFlaC9ELEtBQUsyN0QsK0JBQStCM3JELEVBQVdHLEdBQzlEOHVELEVBQVVELEVBQ1JoL0QsS0FBS3c4RCxnQkFBZ0J3QyxFQUFjemtELEVBQVlwSyxRQUMvQ3ZMLEVBQ0ZtTCxFQUFPLElBQUkvUCxLQUFLaytELFVBQVVsdUQsT0FBdUJwTCxJQUFacTZELEV0RzFSdkMsRUFRQyxPc0drUjRHcjZELElBQVpxNkQsRUFBd0JBLEVBQVUsR0FBSWovRCxLQUFLK2hDLFlBQWEvaEMsS0FBS2d0RCxpQkFBa0JodEQsS0FBS3M3RCxhQUd2TCxPQUZBdnJELEVBQUs5TixJQUFNQSxFQUNYOE4sRUFBS2xNLGlCQUFpQixFQUFrQjdELEtBQUtrdUMsaUJBQWlCN29DLEtBQUtyRixPQUM1RCtQLEdBVVhrdUQsRUFBVTc5RCxVQUFVZ2pCLFFBQVUsU0FBVUMsRUFBR3phLEVBQUdDLEVBQUcwUixFQUFZcEssR0FDekQsSUFBSXFSLEVBQW1CeGhCLEtBQUt1N0IsZ0JBQzVCLEdBQ0svWixHQUNBclIsSUFDRGlSLEdBQVdJLEVBQWtCclIsR0FHNUIsQ0FDRCxJQUFJMk8sRUFBUTllLEtBQUt1N0QsMEJBQTBCcHJELEdBQ3ZDSCxFQUFZLENBQUNxVCxFQUFHemEsRUFBR0MsR0FDbkJrSCxPQUFPLEVBQ1A2VyxFQUFlLEdBQU81VyxHQUN0QjhPLEVBQU13M0MsWUFBWTF2QyxLQUNsQjdXLEVBQU8rTyxFQUFNMVgsSUFBSXdmLElBRXJCLElBQUkza0IsRUFBTWpDLEtBQUswb0IsU0FDZixHQUFJM1ksR0FBUUEsRUFBSzlOLEtBQU9BLEVBQ3BCLE9BQU84TixFQUdQLElBQUlnaUQsRUFBaUIveEQsS0FBSzZqQix5QkFBeUJyQyxHQUMvQ3d3QyxFQUFpQmh5RCxLQUFLNmpCLHlCQUF5QjFULEdBQy9DOGhELEVBQW1CanlELEtBQUsyN0QsK0JBQStCM3JELEVBQVdHLEdBQ2xFK3VELEVBQVUsSUFBSSxHQUFXMTlDLEVBQWtCdXdDLEVBQWdCNWhELEVBQVk2aEQsRUFBZ0JoaUQsRUFBV2lpRCxFQUFrQmp5RCxLQUFLbWtCLGtCQUFrQjVKLEdBQWF2YSxLQUFLMCtELFlBQWEsU0FBVXI3QyxFQUFHemEsRUFBR0MsRUFBRzBSLEdBQzdMLE9BQU92YSxLQUFLbS9ELGdCQUFnQjk3QyxFQUFHemEsRUFBR0MsRUFBRzBSLEVBQVlpSCxJQUNuRG5jLEtBQUtyRixNQUFPQSxLQUFLcStELDRCQUE2QnIrRCxLQUFLdytELHlCQUEwQngrRCxLQUFLdXlELGlCQVVwRixPQVRBMk0sRUFBUWo5RCxJQUFNQSxFQUNWOE4sR0FDQW12RCxFQUFRN1QsWUFBY3Q3QyxFQUN0Qm12RCxFQUFRelQsc0JBQ1Izc0MsRUFBTXlCLFFBQVFxRyxFQUFjczRDLElBRzVCcGdELEVBQU1qWCxJQUFJK2UsRUFBY3M0QyxHQUVyQkEsRUE5QlgsT0FBT2wvRCxLQUFLbS9ELGdCQUFnQjk3QyxFQUFHemEsRUFBR0MsRUFBRzBSLEVBQVlpSCxHQUFvQnJSLElBMkM3RTh0RCxFQUFVNzlELFVBQVUrK0QsZ0JBQWtCLFNBQVU5N0MsRUFBR3phLEVBQUdDLEVBQUcwUixFQUFZcEssR0FDakUsSUFBSUosRUFBTyxLQUNQNlcsRUFBZW93QyxHQUFVM3pDLEVBQUd6YSxFQUFHQyxHQUMvQjVHLEVBQU1qQyxLQUFLMG9CLFNBQ2YsR0FBSzFvQixLQUFLbTdELFVBQVU3RSxZQUFZMXZDLElBTTVCLElBREE3VyxFQUFPL1AsS0FBS203RCxVQUFVL3pELElBQUl3ZixJQUNqQjNrQixLQUFPQSxFQUFLLENBSWpCLElBQUlvcEQsRUFBY3Q3QyxFQUNsQkEsRUFBTy9QLEtBQUsrK0QsWUFBWTE3QyxFQUFHemEsRUFBR0MsRUFBRzBSLEVBQVlwSyxFQUFZbE8sR3RHdlcvRCxHc0d5V1VvcEQsRUFBWXY5QyxXQUVaaUMsRUFBS3M3QyxZQUFjQSxFQUFZQSxZQUcvQnQ3QyxFQUFLczdDLFlBQWNBLEVBRXZCdDdDLEVBQUswN0Msc0JBQ0x6ckQsS0FBS203RCxVQUFVNTZDLFFBQVFxRyxFQUFjN1csU0FwQnpDQSxFQUFPL1AsS0FBSysrRCxZQUFZMTdDLEVBQUd6YSxFQUFHQyxFQUFHMFIsRUFBWXBLLEVBQVlsTyxHQUN6RGpDLEtBQUttN0QsVUFBVXR6RCxJQUFJK2UsRUFBYzdXLEdBc0JyQyxPQUFPQSxHQU9Ya3VELEVBQVU3OUQsVUFBVWcvRCwyQkFBNkIsU0FBVTl4RCxHQUN2RCxHQUNJdE4sS0FBS3crRCwwQkFBNEJseEQsRUFEckMsQ0FLQSxJQUFLLElBQUkyNkIsS0FEVGpvQyxLQUFLdytELHlCQUEyQmx4RCxFQUNqQnROLEtBQUttK0QsdUJBQ2hCbitELEtBQUttK0QsdUJBQXVCbDJCLEdBQUk5bEMsUUFFcENuQyxLQUFLbUcsWUFjVDgzRCxFQUFVNzlELFVBQVVpL0QseUJBQTJCLFNBQVVsdkQsRUFBWW12RCxHQUU3RCxJQUFJQyxFQUFPLEdBQWNwdkQsR0FDekIsR0FBSW92RCxFQUFNLENBQ04sSUFBSVQsRUFBVW40RCxFQUFPNDRELEdBQ2ZULEtBQVc5K0QsS0FBS28rRCx3QkFDbEJwK0QsS0FBS28rRCxzQkFBc0JVLEdBQVdRLEtBSy9DckIsRUFwVm1CLENBcVY1QixJQ2xhRixJQUFJLEdBQXdDLFdBQ3hDLElBQUkzN0QsRUFBZ0IsU0FBVUssRUFBRzlCLEdBSTdCLE9BSEF5QixFQUFnQjNDLE9BQU9pRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQkMsT0FBUyxTQUFVSCxFQUFHOUIsR0FBSzhCLEVBQUVFLFVBQVloQyxJQUN2RSxTQUFVOEIsRUFBRzlCLEdBQUssSUFBSyxJQUFJa0MsS0FBS2xDLEVBQU9sQixPQUFPUyxVQUFVOEIsZUFBZWMsS0FBS25DLEVBQUdrQyxLQUFJSixFQUFFSSxHQUFLbEMsRUFBRWtDLE1BQzNFSixFQUFHOUIsSUFFNUIsT0FBTyxTQUFVOEIsRUFBRzlCLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUllLFVBQVUsdUJBQXlCcUIsT0FBT3BDLEdBQUssaUNBRTdELFNBQVNxQyxJQUFPbEQsS0FBS21ELFlBQWNSLEVBRG5DTCxFQUFjSyxFQUFHOUIsR0FFakI4QixFQUFFdkMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU95RCxPQUFPdkMsSUFBTXFDLEVBQUc5QyxVQUFZUyxFQUFFVCxVQUFXLElBQUk4QyxJQVozQyxHQXNINUMsU0F6Q3lCLFNBQVVHLEdBSy9CLFNBQVNtOEQsRUFBSXh3RCxHQUNULElBQ0lqRixFQUFVaUYsR0FBZSxHQUN6Qm1CLE9BQW9DdkwsSUFBdkJtRixFQUFRb0csV0FBMkJwRyxFQUFRb0csV0FBYSxZQUNyRTBOLE9BQWdDalosSUFBckJtRixFQUFROFQsU0FDakI5VCxFQUFROFQsU05YZixTQUFtQjdPLEdBQ3RCLElBQUl5d0QsRUFBYXp3RCxHQUFlLEdBQzVCeEQsRUFBU2kwRCxFQUFXajBELFFBQVUsR0FBYyxhQUFhQyxZQUN6RGkwRCxFQUFjLENBQ2RsMEQsT0FBUUEsRUFDUmpCLFFBQVNrMUQsRUFBV2wxRCxRQUNwQm11RCxTQUFVK0csRUFBVy9HLFNBQ3JCeGdDLFlBQWF1aUMsR0FBc0JqdkQsRUFBUWkwRCxFQUFXajFELFFBQVNpMUQsRUFBVy9HLFNBQVUrRyxFQUFXcjFELGdCQUVuRyxPQUFPLElBQUksR0FBU3MxRCxHTUdWQyxDQUFVLENBQ1JuMEQsT0FBUW12RCxHQUFxQnhxRCxHQUM3Qi9GLGNBQWVMLEVBQVFLLGNBQ3ZCSSxRQUFTVCxFQUFRUyxRQUNqQkQsUUFBU1IsRUFBUVEsUUFDakJtdUQsU0FBVTN1RCxFQUFRMnVELFdBcUIxQixPQW5CUXIxRCxFQUFPTCxLQUFLaEQsS0FBTSxDQUN0QnE0QyxhQUFjdHVDLEVBQVFzdUMsYUFDdEIraUIsVUFBV3J4RCxFQUFRcXhELFVBQ25CcjVCLFlBQWFoNEIsRUFBUWc0QixZQUNyQnc4QixlQUFnQngwRCxFQUFRdzBELGVBQ3hCdEQsT0FBUWx4RCxFQUFRa3hELE9BQ2hCOXFELFdBQVlBLEVBQ1ptdUQsMkJBQTRCdjBELEVBQVF1MEQsMkJBQ3BDemdELFNBQVVBLEVBQ1ZtdkMsaUJBQWtCampELEVBQVFpakQsaUJBQzFCOW9DLGVBQWdCbmEsRUFBUW1hLGVBQ3hCczRDLGdCQUFpQnp5RCxFQUFReXlELGdCQUN6QkcsSUFBSzV5RCxFQUFRNHlELElBQ2JGLEtBQU0xeUQsRUFBUTB5RCxLQUNkL0UsV0FBeUI5eUQsSUFBbEJtRixFQUFRMnRELE9BQXNCM3RELEVBQVEydEQsTUFDN0N2d0MsV0FBWXBkLEVBQVFvZCxXQUNwQnF3Qyx3QkFBeUJ6dEQsRUFBUXl0RCx3QkFDakN6ekMsV0FBWWhhLEVBQVFnYSxjQUNsQi9qQixLQUdWLE9BdENBLEdBQVV3L0QsRUFBS244RCxHQXNDUm04RCxFQXZDYSxDQXdDdEIsSUMzR1dJLEdBQXFCLENBQ2hDQyxlQUFnQix3RkFDaEJDLFNBQVUsa0ZBQ1ZDLGtCQUFtQiw0RkFDbkJDLGFBQWMscUZBQ2RDLGdCQUFpQix3RkFDakJDLFlBQWEsc0ZDWFRDLEdBQWlCMW9ELFNBQVN5M0IsZUFBZSxtQkFnQ3pDa3hCLEdBQW9CLElBM0IxQixjQUE0QixHQUUxQixZQUFZcjJELEdBQ1Y4NkMsTUFBTTk2QyxHQUdSLGNBRUUsT0FEQW8yRCxHQUFldGdFLE1BQVEsMEJBQTRCc2dFLEdBQWV0Z0UsT0FDM0QsSUFtQmlDLENBQUVzbEQsY0FBZSxvQkFBcUJDLFFBQVMsMEJBRXJGaWIsR0FBb0IsSUFkMUIsY0FBNEIsR0FFMUIsY0FDRXhiLE1BQU0sQ0FBRUssUUFBUyxNQUFRRSxRQUFTLHdCQUF5Qkgsc0JBQXNCLElBR25GLGNBRUUsT0FEQWtiLEdBQWV0Z0UsTUFBUSwwQkFBNEJzZ0UsR0FBZXRnRSxPQUMzRCxJLE9BUVgsSUFBSSxHQUFJLENBQ05NLE9BQVEsV0FDUnVuQyxPQUFRLENBQUMsSUFBSTBqQixHQUFVLENBQ3JCcHBELE9BQVEsSURmTixjQUE2QixHQU1qQyxZQUFZK0gsR0FDVixNQUFNdTJELEdBQVV2MkQsYUFBTyxFQUFQQSxFQUFTdTJELFVBQVcsaUJBQ3BDemIsTUFBTSxDQUNKOFgsSUFBS2lELEdBQVNVLEdBQ2Rqb0IsYUFBYywyREFDZHRXLFlBQWEsbUJDTWpCb04sU0FBVSxDQUNSLElDNUNFLGNBQXNCMlYsR0FPMUIsWUFBWUgsRUFBb0M1NkMsR0FDOUMsTUFBTTY2QyxFQUFPNzZDLEdBQW1CLEdBQ2hDODZDLE1BQUssK0JBQUtELEdBQUksQ0FBR0csV0FBWSxjQUFlSixxQkRtQ2pDLENBQ1QsSXpCTEEsY0FBeUIsR0FzQjdCLFlBQVkzMUMsR0FDVixNQUFNakYsRUFBVWlGLEdBQTRCLEdBRXRDdEUsRUFBWVgsRUFBUVcsVUFBWVgsRUFBUVcsVUFBWSxpQkFFMURtNkMsTUFBTSxDQUNKbGYsUUFBU2x1QixTQUFTQyxjQUFjLE9BQ2hDdlgsT0FBUTRKLEVBQVE1SixTQUdsQkgsS0FBSzZNLFVBQVksS0FFakI3TSxLQUFLdWdFLGVBQWlDMzdELElBQXJCbUYsRUFBUXkyRCxTQUF5QnoyRCxFQUFReTJELFNBQVcsR0FDckV4Z0UsS0FBS3lnRSxpQkFBa0IsRUFDdkJ6Z0UsS0FBSzBnRSxtQkFBZ0I5N0QsRUFDckI1RSxLQUFLMmdFLGlCQUFjLzdELEVBQ25CNUUsS0FBSzRnRSxJQUFNNzJELEVBQVE2MkQsVUFBT2g4RCxFQUUxQjVFLEtBQUsybEMsUUFBUWo3QixVQUFZQSxFQVFwQixPQUFPOHJDLEdBQ1osTUFBTXBvQyxFQUFhb29DLEVBQVNwb0MsV0FJMUJwTyxLQUFLNk0sVUFIRnVCLEVBR2NBLEVBQVd2QixVQUZYLEtBSW5CN00sS0FBSzZnRSxnQkFRQyxnQkFFTixNQUFNaDBELEVBQVk3TSxLQUFLNk0sVUFFdkIsSUFBS0EsRUFLSCxZQUpJN00sS0FBS3lnRSxrQkFDUHpnRSxLQUFLMmxDLFFBQVE1c0IsTUFBTW90QixRQUFVLE9BQzdCbm1DLEtBQUt5Z0UsaUJBQWtCLElBSzNCLE1BQU12cUQsRUFBU3JKLEVBQVVxSixPQUNuQi9GLEVBQWF0RCxFQUFVc0QsV0FDdkIyd0QsRUFBdUIsVUFDN0IsSUFBSXJnRCxFQUFrQjFELEdBQ3BCNU0sRUFDQXRELEVBQVVDLFdBQ1ZvSixFQUNBNHFELEdBR0YsTUFBTU4sRUFBWXhnRSxLQUFLdWdFLFdBQWF2Z0UsS0FBSzRnRSxLQUFPMVgsSUFBZ0JBLEdBRTFENlgsRUFBZVAsRUFBVy8vQyxFQUNoQyxJQUFJdWdELEVBQVMsR0FDVEQsRUFBZSxNQUNqQkMsRUFBUyxLQUNUdmdELEdBQW1CLEtBQ1ZzZ0QsRUFBZSxHQUN4QkMsRUFBUyxLQUNUdmdELEdBQW1CLEtBQ1ZzZ0QsRUFBZSxJQUN4QkMsRUFBUyxLQUVUQSxFQUFTLEtBQ1R2Z0QsR0FBbUIsS0FHckIsSUFDSThzQixFQUFPNTFCLEVBQU9zcEQsRUFEZDkvRCxFQUFJLEVBQUl1SCxLQUFLMnZCLE1BQU0zdkIsS0FBS00sSUFBSXczRCxFQUFXLy9DLEdBQW1CL1gsS0FBS00sSUFBSSxLQUl2RSxPQUFhLENBQ1hpNEQsRUFBZXY0RCxLQUFLMnZCLE1BQU1sM0IsRUFBSSxHQUM5QixNQUFNKy9ELEVBQVV4NEQsS0FBSzBpQixJQUFJLEdBQUk2MUMsR0FHN0IsR0FGQTF6QixFQUFRNGIsSUFBaUJob0QsRUFBSSxFQUFLLEdBQUssR0FBSysvRCxFQUM1Q3ZwRCxFQUFRalAsS0FBS3lDLE1BQU1vaUMsRUFBUTlzQixHQUN2QjJNLE1BQU16VixHQUdSLE9BRkEzWCxLQUFLMmxDLFFBQVE1c0IsTUFBTW90QixRQUFVLFlBQzdCbm1DLEtBQUt5Z0UsaUJBQWtCLEdBRWxCLEdBQUk5b0QsR0FBUzZvRCxFQUNsQixRQUVBci9ELEVBR0osSUFBSWdnRSxFQUFlLEtBQ2Y1ekIsR0FBUzB6QixHQUFjLElBQ3pCRSxFQUFlbmhFLEtBQUtvaEUsZ0JBQWdCN3pCLEVBQU04ekIsUUFBUUosRUFBZSxHQUFLQSxFQUFlLEdBQUssSUFBTUQsRUFBUXJwRCxJQUd0R3dwRCxHQUFnQm5oRSxLQUFLMmdFLGFBQWVRLElBQ3RDbmhFLEtBQUsybEMsUUFBUWdULFVBQVksR0FDekIzNEMsS0FBSzJsQyxRQUFReHNCLFlBQVlnb0QsR0FDekJuaEUsS0FBSzJnRSxZQUFjUSxHQUdqQm5oRSxLQUFLMGdFLGVBQWlCL29ELElBQ3hCM1gsS0FBSzJsQyxRQUFRNXNCLE1BQU1wQixNQUFRQSxFQUFRLEtBQ2hDd3BELEdBQ0RBLEVBQWF4cEIsYUFBYSxRQUFTMTBDLE9BQU8wVSxJQUU1QzNYLEtBQUswZ0UsY0FBZ0Ivb0QsR0FHbEIzWCxLQUFLeWdFLGtCQUNSemdFLEtBQUsybEMsUUFBUTVzQixNQUFNb3RCLFFBQVUsR0FDN0JubUMsS0FBS3lnRSxpQkFBa0IsR0FZakIsZ0JBQWdCYSxFQUFhM3BELEdBRXJDLE1BRU00cEQsRUFBTTlwRCxTQUFTbXlDLGdCQUFnQiw2QkFBOEIsT0FDbkUyWCxFQUFJNXBCLGFBQWEsS0FBTSxzQkFDdkI0cEIsRUFBSTVwQixhQUFhLFVBQVcsT0FBU2hnQyxFQUFULE9BQzVCNHBELEVBQUk1cEIsYUFBYSxRQUFTMTBDLE9BQU8wVSxJQUNqQzRwRCxFQUFJNXBCLGFBQWEsU0FBVSxRQUUzQixNQUFNNnBCLEVBQU8vcEQsU0FBU215QyxnQkFBZ0IsNkJBQThCLFFBQ3BFNFgsRUFBSzdwQixhQUFhLEtBQU0saUNBQ3hCNnBCLEVBQUs3cEIsYUFBYSxJQUFLMTBDLE9BQU8sSUFDOUJ1K0QsRUFBSzdwQixhQUFhLElBQUsxMEMsT0FBTyxJQUM5QnUrRCxFQUFLN3BCLGFBQWEsUUFBUyxRQUMzQjZwQixFQUFLN3BCLGFBQWEsU0FBVSxRQUM1QjZwQixFQUFLN3BCLGFBQWEsT0FBUSxXQUMxQjZwQixFQUFLN3BCLGFBQWEsZUFBZ0IsTUFDbEM2cEIsRUFBSzdwQixhQUFhLFNBQVUsU0FDNUI2cEIsRUFBSzdwQixhQUFhLGVBQWdCLEtBQ2xDNnBCLEVBQUs3cEIsYUFBYSxtQkFBb0IsS0FBT2hnQyxFQUFRLEtBQU9BLEVBQVEsS0FDcEU0cEQsRUFBSXBvRCxZQUFZcW9ELEdBRWhCLE1BQU1DLEVBQXVCaHFELFNBQVNteUMsZ0JBQWdCLDZCQUE4QixRQVdwRixPQVZBNlgsRUFBS25xQixZQUFjZ3FCLEVBQ25CRyxFQUFLOXBCLGFBQWEsSUFBSzEwQyxPQUFPMFUsRUFBUSxJQUN0QzhwRCxFQUFLOXBCLGFBQWEsSUFBSzEwQyxPQUFPLEtBQzlCdytELEVBQUs5cEIsYUFBYSxjQUFlLFVBQ2pDOHBCLEVBQUs5cEIsYUFBYSxZQUFhLE9BQy9COHBCLEVBQUs5cEIsYUFBYSxRQUFTLGtFQUMzQjhwQixFQUFLOXBCLGFBQWEsY0FBZSxpQ0FDakM4cEIsRUFBSzlwQixhQUFhLE9BQVEsU0FDMUI0cEIsRUFBSXBvRCxZQUFZc29ELEdBRVRGLEVBT0YsWUFBWTFoRSxHQUNqQkcsS0FBS3VnRSxVQUFZMWdFLEVBTVosY0FDTCxPQUFPRyxLQUFLdWdFLFl5QnJNVixJRTlDQSxjQUE2QixHQVVqQyxZQUFZeDJELEdBRVYsTUFBTTY2QyxFQUFPNzZDLEdBQW9CLEdBRWpDNjZDLEVBQUt6MEMsV0FBYXkwQyxFQUFLejBDLFdBQWF5MEMsRUFBS3owQyxXQUFhLFlBQ3REeTBDLEVBQUtvRCxpQkFBbUJwRCxFQUFLb0QsaUJBQW1CcEQsRUFBS29ELGlCQUFvQngzQyxHQUF1Q0EsRXhHNEw3RyxTQUFnQkEsRUFBWXdyRCxFQUFVMEYsR0FDekMsT0FBSWx4RCxFQUNPd3JELEVBQ0Z6N0MsUUFBUSxNQUFPL1AsRUFBVyxHQUFHNndELFFBQVFLLElBQ3JDbmhELFFBQVEsTUFBTy9QLEVBQVcsR0FBRzZ3RCxRQUFRSyxJQUduQyxHd0duTWtIMVksQ0FBT3g0QyxFQUFZLGNBQWUsR0FBSyxHQUNwS28wQyxFQUFLeUQsY0FBZ0J6RCxFQUFLeUQsY0FBZ0J6RCxFQUFLeUQsY0FBZ0Isa0NBQy9EekQsRUFBS2w2QyxVQUFZazZDLEVBQUtsNkMsVUFBWWs2QyxFQUFLbDZDLFVBQVksa0RBRW5EbTZDLE1BQU1ELEtGNEJKLElHN0NBLGNBQTJCLEdBTS9CLFlBQVk3NkMsR0FLVjg2QyxNQUhhOTZDLEdBQW9CLENBQy9CNnNDLFdBQVcsSUFJYjUyQyxLQUFLMmxDLFFBQVFqN0IsV0FBYSxzQkhrQzFCLElJM0JFLGNBQTJCbzZDLEdBZS9CLFlBQVkvNkMsR0FFVixJQUFJNDNELEVBQWUsS0FDbkIsR0FBRzUzRCxFQUFRNjNELGtCQUFvQjczRCxFQUFRNjNELGlCQUFpQjFnRSxPQUFPLEVBQUcsQ0FDaEUsTUFBTWdsRCxFQUFvQixJQUFJcEIsR0FBVSxDQUFFQyxXQUFZLDZCQUE4QkosY0FBZTU2QyxFQUFRNjNELG1CQUMzR0QsRUFBZSxJQUFJMWIsR0FBYSxDQUFFQyxvQkFBbUJaLG1CQUFvQixvREFBcURKLFFBQVMsTUFBUWtCLGVBQWdCLE1BQVFoQixRQUFTLFlBQ2hMcjdDLEVBQVE4M0QsbUJBQW1CcC9ELEtBQUtrL0QsR0FFbEMsTUFBTS9jLEVBQU83NkMsR0FBbUIsR0FDaEM4NkMsTUFBSywrQkFBS0QsR0FBSSxDQUFHRyxXQUFZLCtCQUFnQ0osY0FBZTU2QyxFQUFRODNELHNCQUVwRjdoRSxLQUFLMmhFLGFBQWVBLEVBQ0UsTUFBbkIzaEUsS0FBSzJoRSxjQUNOM2hFLEtBQUsyaEUsYUFBYTk5RCxpQkFBaUIsVUFBV00sSUFDNUNuRSxLQUFLa0UsY0FBY0MsSUFDWixLQVNOLGtCQUNMLE9BQU9uRSxLQUFLMmhFLGVKYkksQ0FDZEUsbUJBQW9CLENBQUN6QixJQUNyQndCLGlCQUFrQixDQUFDdkIsT0FHdkI5d0IsS0FBTSxJQUFJLEdBQUssQ0FDYnI1QixPQUFRTCxHQUFVLENBQUMsTUFBUyxRQUFTLFFBQVMsVUFDOUNvaUIscUJBQXFCLEVBQ3JCRSxxQkFBcUIsRUFDckIzc0IsT0FBUSxDQUFDLE1BQVMsUUFBUyxRQUFTLFNBQ3BDaEIsUUFBUyxHQUNURCxRQUFTLEVBQ1R3QyxLQUFNLE0iLCJmaWxlIjoiZXhhbXBsZS1jdXN0b20tYnV0dG9ucy5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJiZ2lzLWNvcmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiYmdpcy1jb3JlXCJdID0gZmFjdG9yeSgpO1xufSkoc2VsZiwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTdHJpcHBlZCBkb3duIGltcGxlbWVudGF0aW9uIG9mIHRoZSBXM0MgRE9NIExldmVsIDIgRXZlbnQgaW50ZXJmYWNlLlxuICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMi1FdmVudHMvZXZlbnRzLmh0bWwjRXZlbnRzLWludGVyZmFjZS5cbiAqXG4gKiBUaGlzIGltcGxlbWVudGF0aW9uIG9ubHkgcHJvdmlkZXMgYHR5cGVgIGFuZCBgdGFyZ2V0YCBwcm9wZXJ0aWVzLCBhbmRcbiAqIGBzdG9wUHJvcGFnYXRpb25gIGFuZCBgcHJldmVudERlZmF1bHRgIG1ldGhvZHMuIEl0IGlzIG1lYW50IGFzIGJhc2UgY2xhc3NcbiAqIGZvciBoaWdoZXIgbGV2ZWwgZXZlbnRzIGRlZmluZWQgaW4gdGhlIGxpYnJhcnksIGFuZCB3b3JrcyB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9UYXJnZXR+VGFyZ2V0fS5cbiAqL1xudmFyIEJhc2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VFdmVudCh0eXBlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJvcGFnYXRpb25TdG9wcGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXZlbnQgdHlwZS5cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBldmVudCB0YXJnZXQuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJldmVudCBkZWZhdWx0LiBUaGlzIG1lYW5zIHRoYXQgbm8gZW11bGF0ZWQgYGNsaWNrYCwgYHNpbmdsZWNsaWNrYCBvciBgZG91YmxlY2xpY2tgIGV2ZW50c1xuICAgICAqIHdpbGwgYmUgZmlyZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VFdmVudDtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbihldnQpIHtcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7RXZlbnR8aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fSBldnQgRXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGV2dCkge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuZXhwb3J0IGRlZmF1bHQgQmFzZUV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdEV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHByb3BlcnR5IGlzIGNoYW5nZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9PYmplY3QuT2JqZWN0RXZlbnQjcHJvcGVydHljaGFuZ2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJPUEVSVFlDSEFOR0U6ICdwcm9wZXJ0eWNoYW5nZScsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7J3Byb3BlcnR5Y2hhbmdlJ30gVHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9EaXNwb3NhYmxlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogT2JqZWN0cyB0aGF0IG5lZWQgdG8gY2xlYW4gdXAgYWZ0ZXIgdGhlbXNlbHZlcy5cbiAqL1xudmFyIERpc3Bvc2FibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRGlzcG9zYWJsZSgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvYmplY3QgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZUludGVybmFsKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEV4dGVuc2lvbiBwb2ludCBmb3IgZGlzcG9zYWJsZSBvYmplY3RzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgcmV0dXJuIERpc3Bvc2FibGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgRGlzcG9zYWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURpc3Bvc2FibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2FycmF5XG4gKi9cbi8qKlxuICogUGVyZm9ybXMgYSBiaW5hcnkgc2VhcmNoIG9uIHRoZSBwcm92aWRlZCBzb3J0ZWQgbGlzdCBhbmQgcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQuIElmIGl0IGNhbid0IGJlIGZvdW5kIGl0J2xsIHJldHVybiAtMS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYXJrc2t5YXBwL2JpbmFyeS1zZWFyY2hcbiAqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBoYXlzdGFjayBJdGVtcyB0byBzZWFyY2ggdGhyb3VnaC5cbiAqIEBwYXJhbSB7Kn0gbmVlZGxlIFRoZSBpdGVtIHRvIGxvb2sgZm9yLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdF9jb21wYXJhdG9yXSBDb21wYXJhdG9yIGZ1bmN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGl0ZW0gaWYgZm91bmQsIC0xIGlmIG5vdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJpbmFyeVNlYXJjaChoYXlzdGFjaywgbmVlZGxlLCBvcHRfY29tcGFyYXRvcikge1xuICAgIHZhciBtaWQsIGNtcDtcbiAgICB2YXIgY29tcGFyYXRvciA9IG9wdF9jb21wYXJhdG9yIHx8IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb247XG4gICAgdmFyIGxvdyA9IDA7XG4gICAgdmFyIGhpZ2ggPSBoYXlzdGFjay5sZW5ndGg7XG4gICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgICAgLyogTm90ZSB0aGF0IFwiKGxvdyArIGhpZ2gpID4+PiAxXCIgbWF5IG92ZXJmbG93LCBhbmQgcmVzdWx0cyBpbiBhIHR5cGVjYXN0XG4gICAgICAgICAqIHRvIGRvdWJsZSAod2hpY2ggZ2l2ZXMgdGhlIHdyb25nIHJlc3VsdHMpLiAqL1xuICAgICAgICBtaWQgPSBsb3cgKyAoKGhpZ2ggLSBsb3cpID4+IDEpO1xuICAgICAgICBjbXAgPSArY29tcGFyYXRvcihoYXlzdGFja1ttaWRdLCBuZWVkbGUpO1xuICAgICAgICBpZiAoY21wIDwgMC4wKSB7XG4gICAgICAgICAgICAvKiBUb28gbG93LiAqL1xuICAgICAgICAgICAgbG93ID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8qIEtleSBmb3VuZCBvciB0b28gaGlnaCAqL1xuICAgICAgICAgICAgaGlnaCA9IG1pZDtcbiAgICAgICAgICAgIGZvdW5kID0gIWNtcDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiBLZXkgbm90IGZvdW5kLiAqL1xuICAgIHJldHVybiBmb3VuZCA/IGxvdyA6IH5sb3c7XG59XG4vKipcbiAqIENvbXBhcmUgZnVuY3Rpb24gZm9yIGFycmF5IHNvcnQgdGhhdCBpcyBzYWZlIGZvciBudW1iZXJzLlxuICogQHBhcmFtIHsqfSBhIFRoZSBmaXJzdCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcGFyYW0geyp9IGIgVGhlIHNlY29uZCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbmVnYXRpdmUgbnVtYmVyLCB6ZXJvLCBvciBhIHBvc2l0aXZlIG51bWJlciBhcyB0aGUgZmlyc3RcbiAqICAgICBhcmd1bWVudCBpcyBsZXNzIHRoYW4sIGVxdWFsIHRvLCBvciBncmVhdGVyIHRoYW4gdGhlIHNlY29uZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhID4gYiA/IDEgOiBhIDwgYiA/IC0xIDogMDtcbn1cbi8qKlxuICogV2hldGhlciB0aGUgYXJyYXkgY29udGFpbnMgdGhlIGdpdmVuIG9iamVjdC5cbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gdGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHsqfSBvYmogVGhlIG9iamVjdCBmb3Igd2hpY2ggdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgaW4gdGhlIGFycmF5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5jbHVkZXMoYXJyLCBvYmopIHtcbiAgICByZXR1cm4gYXJyLmluZGV4T2Yob2JqKSA+PSAwO1xufVxuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVncmlkL1RpbGVHcmlkflRpbGVHcmlkI2dldFpGb3JSZXNvbHV0aW9ufSBjYW4gdXNlIGEgZnVuY3Rpb25cbiAqIG9mIHRoaXMgdHlwZSB0byBkZXRlcm1pbmUgd2hpY2ggbmVhcmVzdCByZXNvbHV0aW9uIHRvIHVzZS5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIHRha2VzIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgYSB2YWx1ZSBiZXR3ZWVuIHR3byBhcnJheSBlbnRyaWVzLFxuICogYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhlIG5lYXJlc3QgaGlnaGVyIGVudHJ5IGFuZFxuICogYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgdmFsdWUgb2YgdGhlIG5lYXJlc3QgbG93ZXIgZW50cnlcbiAqIGFzIGFyZ3VtZW50cyBhbmQgcmV0dXJucyBhIGB7bnVtYmVyfWAuIElmIGEgbmVnYXRpdmUgbnVtYmVyIG9yIHplcm8gaXMgcmV0dXJuZWRcbiAqIHRoZSBsb3dlciB2YWx1ZSB3aWxsIGJlIHVzZWQsIGlmIGEgcG9zaXRpdmUgbnVtYmVyIGlzIHJldHVybmVkIHRoZSBoaWdoZXIgdmFsdWVcbiAqIHdpbGwgYmUgdXNlZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihudW1iZXIsIG51bWJlciwgbnVtYmVyKTogbnVtYmVyfSBOZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFyciBBcnJheSBpbiBkZXNjY2VuZGluZyBvcmRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtudW1iZXJ8TmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBkaXJlY3Rpb25cbiAqICAgIDAgbWVhbnMgcmV0dXJuIHRoZSBuZWFyZXN0LFxuICogICAgPiAwIG1lYW5zIHJldHVybiB0aGUgbGFyZ2VzdCBuZWFyZXN0LFxuICogICAgPCAwIG1lYW5zIHJldHVybiB0aGUgc21hbGxlc3QgbmVhcmVzdC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJGaW5kTmVhcmVzdChhcnIsIHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gICAgdmFyIG4gPSBhcnIubGVuZ3RoO1xuICAgIGlmIChhcnJbMF0gPD0gdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YXJnZXQgPD0gYXJyW24gLSAxXSkge1xuICAgICAgICByZXR1cm4gbiAtIDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCkge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPD0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGlyZWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uKHRhcmdldCwgYXJyW2kgLSAxXSwgYXJyW2ldKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcnJbaSAtIDFdIC0gdGFyZ2V0IDwgdGFyZ2V0IC0gYXJyW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbiAtIDE7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgQXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4gaW5kZXguXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZCBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VTdWJBcnJheShhcnIsIGJlZ2luLCBlbmQpIHtcbiAgICB3aGlsZSAoYmVnaW4gPCBlbmQpIHtcbiAgICAgICAgdmFyIHRtcCA9IGFycltiZWdpbl07XG4gICAgICAgIGFycltiZWdpbl0gPSBhcnJbZW5kXTtcbiAgICAgICAgYXJyW2VuZF0gPSB0bXA7XG4gICAgICAgICsrYmVnaW47XG4gICAgICAgIC0tZW5kO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHshQXJyYXk8VkFMVUU+fFZBTFVFfSBkYXRhIFRoZSBlbGVtZW50cyBvciBhcnJheXMgb2YgZWxlbWVudHMgdG8gYWRkIHRvIGFyci5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGFyciwgZGF0YSkge1xuICAgIHZhciBleHRlbnNpb24gPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbiAgICB2YXIgbGVuZ3RoID0gZXh0ZW5zaW9uLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyclthcnIubGVuZ3RoXSA9IGV4dGVuc2lvbltpXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7VkFMVUV9IG9iaiBUaGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGFyciwgb2JqKSB7XG4gICAgdmFyIGkgPSBhcnIuaW5kZXhPZihvYmopO1xuICAgIHZhciBmb3VuZCA9IGkgPiAtMTtcbiAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYXJyLnNwbGljZShpLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFZBTFVFLCBudW1iZXIsID8pIDogYm9vbGVhbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29tcGFyZS5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICogQHJldHVybiB7VkFMVUV8bnVsbH0gVGhlIGVsZW1lbnQgZm91bmQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoYXJyLCBmdW5jKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGggPj4+IDA7XG4gICAgdmFyIHZhbHVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBhcnJbaV07XG4gICAgICAgIGlmIChmdW5jKHZhbHVlLCBpLCBhcnIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjEgVGhlIGZpcnN0IGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIyIFRoZSBzZWNvbmQgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHR3byBhcnJheXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGFycjEsIGFycjIpIHtcbiAgICB2YXIgbGVuMSA9IGFycjEubGVuZ3RoO1xuICAgIGlmIChsZW4xICE9PSBhcnIyLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuMTsgaSsrKSB7XG4gICAgICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFNvcnQgdGhlIHBhc3NlZCBhcnJheSBzdWNoIHRoYXQgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIGVxdWFsIGVsZW1lbnRzIGlzIHByZXZlcnZlZC5cbiAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Tb3J0aW5nX2FsZ29yaXRobSNTdGFiaWxpdHkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNvcnQgKG1vZGlmaWVzIG9yaWdpbmFsKS5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCosICopOiBudW1iZXJ9IGNvbXBhcmVGbmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm5jKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gICAgdmFyIHRtcCA9IEFycmF5KGFyci5sZW5ndGgpO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0bXBbaV0gPSB7IGluZGV4OiBpLCB2YWx1ZTogYXJyW2ldIH07XG4gICAgfVxuICAgIHRtcC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlRm5jKGEudmFsdWUsIGIudmFsdWUpIHx8IGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gdG1wW2ldLnZhbHVlO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbmRleChhcnIsIGZ1bmMpIHtcbiAgICB2YXIgaW5kZXg7XG4gICAgdmFyIGZvdW5kID0gIWFyci5ldmVyeShmdW5jdGlvbiAoZWwsIGlkeCkge1xuICAgICAgICBpbmRleCA9IGlkeDtcbiAgICAgICAgcmV0dXJuICFmdW5jKGVsLCBpZHgsIGFycik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kID8gaW5kZXggOiAtMTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdF9mdW5jXSBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3N0cmljdF0gU3RyaWN0bHkgc29ydGVkIChkZWZhdWx0IGZhbHNlKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU29ydGVkKGFyciwgb3B0X2Z1bmMsIG9wdF9zdHJpY3QpIHtcbiAgICB2YXIgY29tcGFyZSA9IG9wdF9mdW5jIHx8IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb247XG4gICAgcmV0dXJuIGFyci5ldmVyeShmdW5jdGlvbiAoY3VycmVudFZhbCwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzID0gY29tcGFyZShhcnJbaW5kZXggLSAxXSwgY3VycmVudFZhbCk7XG4gICAgICAgIHJldHVybiAhKHJlcyA+IDAgfHwgKG9wdF9zdHJpY3QgJiYgcmVzID09PSAwKSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcnJheS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZnVuY3Rpb25zXG4gKi9cbmltcG9ydCB7IGVxdWFscyBhcyBhcnJheUVxdWFscyB9IGZyb20gJy4vYXJyYXkuanMnO1xuLyoqXG4gKiBBbHdheXMgcmV0dXJucyB0cnVlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRSVUUoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEFsd2F5cyByZXR1cm5zIGZhbHNlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGQUxTRSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEEgcmV1c2FibGUgZnVuY3Rpb24sIHVzZWQgZS5nLiBhcyBhIGRlZmF1bHQgZm9yIGNhbGxiYWNrcy5cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfSBOb3RoaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVk9JRCgpIHsgfVxuLyoqXG4gKiBXcmFwIGEgZnVuY3Rpb24gaW4gYW5vdGhlciBmdW5jdGlvbiB0aGF0IHJlbWVtYmVycyB0aGUgbGFzdCByZXR1cm4uICBJZiB0aGVcbiAqIHJldHVybmVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB0d2ljZSBpbiBhIHJvdyB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyBhbmQgdGhlIHNhbWVcbiAqIHRoaXMgb2JqZWN0LCBpdCB3aWxsIHJldHVybiB0aGUgdmFsdWUgZnJvbSB0aGUgZmlyc3QgY2FsbCBpbiB0aGUgc2Vjb25kIGNhbGwuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbiguLi5hbnkpOiBSZXR1cm5UeXBlfSBmbiBUaGUgZnVuY3Rpb24gdG8gbWVtb2l6ZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKC4uLmFueSk6IFJldHVyblR5cGV9IFRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAqIEB0ZW1wbGF0ZSBSZXR1cm5UeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZW1vaXplT25lKGZuKSB7XG4gICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICAgIC8qKiBAdHlwZSB7UmV0dXJuVHlwZX0gKi9cbiAgICB2YXIgbGFzdFJlc3VsdDtcbiAgICAvKiogQHR5cGUge0FycmF5PGFueT59ICovXG4gICAgdmFyIGxhc3RBcmdzO1xuICAgIHZhciBsYXN0VGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV4dEFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICBpZiAoIWNhbGxlZCB8fCB0aGlzICE9PSBsYXN0VGhpcyB8fCAhYXJyYXlFcXVhbHMobmV4dEFyZ3MsIGxhc3RBcmdzKSkge1xuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICAgICAgICAgIGxhc3RBcmdzID0gbmV4dEFyZ3M7XG4gICAgICAgICAgICBsYXN0UmVzdWx0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb25zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9vYmpcbiAqL1xuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgT2JqZWN0LmFzc2lnbigpLiAgQXNzaWducyBlbnVtZXJhYmxlIGFuZCBvd24gcHJvcGVydGllcyBmcm9tXG4gKiBvbmUgb3IgbW9yZSBzb3VyY2Ugb2JqZWN0cyB0byBhIHRhcmdldCBvYmplY3QuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnbi5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldCBUaGUgdGFyZ2V0IG9iamVjdC5cbiAqIEBwYXJhbSB7Li4uT2JqZWN0fSB2YXJfc291cmNlcyBUaGUgc291cmNlIG9iamVjdChzKS5cbiAqIEByZXR1cm4geyFPYmplY3R9IFRoZSBtb2RpZmllZCB0YXJnZXQgb2JqZWN0LlxuICovXG5leHBvcnQgdmFyIGFzc2lnbiA9IHR5cGVvZiBPYmplY3QuYXNzaWduID09PSAnZnVuY3Rpb24nXG4gICAgPyBPYmplY3QuYXNzaWduXG4gICAgOiBmdW5jdGlvbiAodGFyZ2V0LCB2YXJfc291cmNlcykge1xuICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gdW5kZWZpbmVkICYmIHNvdXJjZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfTtcbi8qKlxuICogUmVtb3ZlcyBhbGwgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjbGVhci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKG9iamVjdCkge1xuICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICBkZWxldGUgb2JqZWN0W3Byb3BlcnR5XTtcbiAgICB9XG59XG4vKipcbiAqIFBvbHlmaWxsIGZvciBPYmplY3QudmFsdWVzKCkuICBHZXQgYW4gYXJyYXkgb2YgcHJvcGVydHkgdmFsdWVzIGZyb20gYW4gb2JqZWN0LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC92YWx1ZXNcbiAqXG4gKiBAcGFyYW0geyFPYmplY3Q8SyxWPn0gb2JqZWN0IFRoZSBvYmplY3QgZnJvbSB3aGljaCB0byBnZXQgdGhlIHZhbHVlcy5cbiAqIEByZXR1cm4geyFBcnJheTxWPn0gVGhlIHByb3BlcnR5IHZhbHVlcy5cbiAqIEB0ZW1wbGF0ZSBLLFZcbiAqL1xuZXhwb3J0IHZhciBnZXRWYWx1ZXMgPSB0eXBlb2YgT2JqZWN0LnZhbHVlcyA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gT2JqZWN0LnZhbHVlc1xuICAgIDogZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgdmFsdWVzLnB1c2gob2JqZWN0W3Byb3BlcnR5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9O1xuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGhhcyBhbnkgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KG9iamVjdCkge1xuICAgIHZhciBwcm9wZXJ0eTtcbiAgICBmb3IgKHByb3BlcnR5IGluIG9iamVjdCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiAhcHJvcGVydHk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYmouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvVGFyZ2V0XG4gKi9cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vRXZlbnQuanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtFdmVudFRhcmdldHxUYXJnZXR9IEV2ZW50VGFyZ2V0TGlrZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgc2ltcGxpZmllZCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMC9SRUMtRE9NLUxldmVsLTItRXZlbnRzLTIwMDAxMTEzL2V2ZW50cy5odG1sI0V2ZW50cy1FdmVudFRhcmdldC5cbiAqXG4gKiBUaGVyZSBhcmUgdHdvIGltcG9ydGFudCBzaW1wbGlmaWNhdGlvbnMgY29tcGFyZWQgdG8gdGhlIHNwZWNpZmljYXRpb246XG4gKlxuICogMS4gVGhlIGhhbmRsaW5nIG9mIGB1c2VDYXB0dXJlYCBpbiBgYWRkRXZlbnRMaXN0ZW5lcmAgYW5kXG4gKiAgICBgcmVtb3ZlRXZlbnRMaXN0ZW5lcmAuIFRoZXJlIGlzIG5vIHJlYWwgY2FwdHVyZSBtb2RlbC5cbiAqIDIuIFRoZSBoYW5kbGluZyBvZiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBvbiBgZGlzcGF0Y2hFdmVudGAuXG4gKiAgICBUaGVyZSBpcyBubyBldmVudCB0YXJnZXQgaGllcmFyY2h5LiBXaGVuIGEgbGlzdGVuZXIgY2FsbHNcbiAqICAgIGBzdG9wUHJvcGFnYXRpb25gIG9yIGBwcmV2ZW50RGVmYXVsdGAgb24gYW4gZXZlbnQgb2JqZWN0LCBpdCBtZWFucyB0aGF0IG5vXG4gKiAgICBtb3JlIGxpc3RlbmVycyBhZnRlciB0aGlzIG9uZSB3aWxsIGJlIGNhbGxlZC4gU2FtZSBhcyB3aGVuIHRoZSBsaXN0ZW5lclxuICogICAgcmV0dXJucyBmYWxzZS5cbiAqL1xudmFyIFRhcmdldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGFyZ2V0LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdF90YXJnZXRdIERlZmF1bHQgZXZlbnQgdGFyZ2V0IGZvciBkaXNwYXRjaGVkIGV2ZW50cy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUYXJnZXQob3B0X3RhcmdldCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ldmVudFRhcmdldF8gPSBvcHRfdGFyZ2V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGlzcGF0Y2hpbmdfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXI+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyc18gPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoIXR5cGUgfHwgIWxpc3RlbmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyB8fCAodGhpcy5saXN0ZW5lcnNfID0ge30pO1xuICAgICAgICB2YXIgbGlzdGVuZXJzRm9yVHlwZSA9IGxpc3RlbmVyc1t0eXBlXSB8fCAobGlzdGVuZXJzW3R5cGVdID0gW10pO1xuICAgICAgICBpZiAobGlzdGVuZXJzRm9yVHlwZS5pbmRleE9mKGxpc3RlbmVyKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc0ZvclR5cGUucHVzaChsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYW5kIGNhbGxzIGFsbCBsaXN0ZW5lcnMgbGlzdGVuaW5nIGZvciBldmVudHNcbiAgICAgKiBvZiB0aGlzIHR5cGUuIFRoZSBldmVudCBwYXJhbWV0ZXIgY2FuIGVpdGhlciBiZSBhIHN0cmluZyBvciBhblxuICAgICAqIE9iamVjdCB3aXRoIGEgYHR5cGVgIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBldmVudCBFdmVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx1bmRlZmluZWR9IGBmYWxzZWAgaWYgYW55b25lIGNhbGxlZCBwcmV2ZW50RGVmYXVsdCBvbiB0aGVcbiAgICAgKiAgICAgZXZlbnQgb2JqZWN0IG9yIGlmIGFueSBvZiB0aGUgbGlzdGVuZXJzIHJldHVybmVkIGZhbHNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8RXZlbnR9ICovXG4gICAgICAgIHZhciBldnQgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnID8gbmV3IEV2ZW50KGV2ZW50KSA6IGV2ZW50O1xuICAgICAgICB2YXIgdHlwZSA9IGV2dC50eXBlO1xuICAgICAgICBpZiAoIWV2dC50YXJnZXQpIHtcbiAgICAgICAgICAgIGV2dC50YXJnZXQgPSB0aGlzLmV2ZW50VGFyZ2V0XyB8fCB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICB2YXIgcHJvcGFnYXRlO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICB2YXIgZGlzcGF0Y2hpbmcgPSB0aGlzLmRpc3BhdGNoaW5nXyB8fCAodGhpcy5kaXNwYXRjaGluZ18gPSB7fSk7XG4gICAgICAgICAgICB2YXIgcGVuZGluZ1JlbW92YWxzID0gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfIHx8ICh0aGlzLnBlbmRpbmdSZW1vdmFsc18gPSB7fSk7XG4gICAgICAgICAgICBpZiAoISh0eXBlIGluIGRpc3BhdGNoaW5nKSkge1xuICAgICAgICAgICAgICAgIGRpc3BhdGNoaW5nW3R5cGVdID0gMDtcbiAgICAgICAgICAgICAgICBwZW5kaW5nUmVtb3ZhbHNbdHlwZV0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytkaXNwYXRjaGluZ1t0eXBlXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCdoYW5kbGVFdmVudCcgaW4gbGlzdGVuZXJzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyT2JqZWN0fSAqLyAobGlzdGVuZXJzW2ldKS5oYW5kbGVFdmVudChldnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcGFnYXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbn0gKi8gKGxpc3RlbmVyc1tpXSkuY2FsbCh0aGlzLCBldnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJvcGFnYXRlID09PSBmYWxzZSB8fCBldnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLWRpc3BhdGNoaW5nW3R5cGVdO1xuICAgICAgICAgICAgaWYgKGRpc3BhdGNoaW5nW3R5cGVdID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByID0gcGVuZGluZ1JlbW92YWxzW3R5cGVdO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBwZW5kaW5nUmVtb3ZhbHNbdHlwZV07XG4gICAgICAgICAgICAgICAgd2hpbGUgKHByLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIFZPSUQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWxldGUgZGlzcGF0Y2hpbmdbdHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvcGFnYXRlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNfICYmIGNsZWFyKHRoaXMubGlzdGVuZXJzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxpc3RlbmVycyBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS4gTGlzdGVuZXJzIGFyZSByZXR1cm5lZCBpbiB0aGVcbiAgICAgKiBvcmRlciB0aGF0IHRoZXkgd2lsbCBiZSBjYWxsZWQgaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcj58dW5kZWZpbmVkfSBMaXN0ZW5lcnMuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5nZXRMaXN0ZW5lcnMgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV0pIHx8IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0X3R5cGVdIFR5cGUuIElmIG5vdCBwcm92aWRlZCxcbiAgICAgKiAgICAgYHRydWVgIHdpbGwgYmUgcmV0dXJuZWQgaWYgdGhpcyBldmVudCB0YXJnZXQgaGFzIGFueSBsaXN0ZW5lcnMuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSGFzIGxpc3RlbmVycy5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmhhc0xpc3RlbmVyID0gZnVuY3Rpb24gKG9wdF90eXBlKSB7XG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNfKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdF90eXBlXG4gICAgICAgICAgICA/IG9wdF90eXBlIGluIHRoaXMubGlzdGVuZXJzX1xuICAgICAgICAgICAgOiBPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVyc18pLmxlbmd0aCA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nUmVtb3ZhbHNfICYmIHR5cGUgaW4gdGhpcy5wZW5kaW5nUmVtb3ZhbHNfKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgbGlzdGVuZXIgYSBuby1vcCwgYW5kIHJlbW92ZSBsYXRlciBpbiAjZGlzcGF0Y2hFdmVudCgpXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyc1tpbmRleF0gPSBWT0lEO1xuICAgICAgICAgICAgICAgICAgICArK3RoaXMucGVuZGluZ1JlbW92YWxzX1t0eXBlXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRhcmdldDtcbn0oRGlzcG9zYWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGFyZ2V0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGFyZ2V0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBjb25zdFxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogR2VuZXJpYyBjaGFuZ2UgZXZlbnQuIFRyaWdnZXJlZCB3aGVuIHRoZSByZXZpc2lvbiBjb3VudGVyIGlzIGluY3JlYXNlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjY2hhbmdlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENIQU5HRTogJ2NoYW5nZScsXG4gICAgLyoqXG4gICAgICogR2VuZXJpYyBlcnJvciBldmVudC4gVHJpZ2dlcmVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNlcnJvclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBFUlJPUjogJ2Vycm9yJyxcbiAgICBCTFVSOiAnYmx1cicsXG4gICAgQ0xFQVI6ICdjbGVhcicsXG4gICAgQ09OVEVYVE1FTlU6ICdjb250ZXh0bWVudScsXG4gICAgQ0xJQ0s6ICdjbGljaycsXG4gICAgREJMQ0xJQ0s6ICdkYmxjbGljaycsXG4gICAgRFJBR0VOVEVSOiAnZHJhZ2VudGVyJyxcbiAgICBEUkFHT1ZFUjogJ2RyYWdvdmVyJyxcbiAgICBEUk9QOiAnZHJvcCcsXG4gICAgRk9DVVM6ICdmb2N1cycsXG4gICAgS0VZRE9XTjogJ2tleWRvd24nLFxuICAgIEtFWVBSRVNTOiAna2V5cHJlc3MnLFxuICAgIExPQUQ6ICdsb2FkJyxcbiAgICBSRVNJWkU6ICdyZXNpemUnLFxuICAgIFRPVUNITU9WRTogJ3RvdWNobW92ZScsXG4gICAgV0hFRUw6ICd3aGVlbCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHNcbiAqL1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuL29iai5qcyc7XG4vKipcbiAqIEtleSB0byB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSN1bkJ5S2V5fS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEV2ZW50c0tleVxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogTGlzdGVuZXIgZnVuY3Rpb24uIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggYW4gZXZlbnQgb2JqZWN0IGFzIGFyZ3VtZW50LlxuICogV2hlbiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLCBldmVudCBwcm9wYWdhdGlvbiB3aWxsIHN0b3AuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0KSk6ICh2b2lkfGJvb2xlYW4pfSBMaXN0ZW5lckZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTGlzdGVuZXJPYmplY3RcbiAqIEBwcm9wZXJ0eSB7TGlzdGVuZXJGdW5jdGlvbn0gaGFuZGxlRXZlbnQgSGFuZGxlRXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge0xpc3RlbmVyRnVuY3Rpb258TGlzdGVuZXJPYmplY3R9IExpc3RlbmVyXG4gKi9cbi8qKlxuICogUmVnaXN0ZXJzIGFuIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIHRvIGEgYHRoaXNgIG9iamVjdCwgYW5kIHJldHVybnNcbiAqIGEga2V5IGZvciB1c2Ugd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy51bmxpc3RlbkJ5S2V5fS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBFdmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICogQHBhcmFtIHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0X3RoaXNdIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfb25jZV0gSWYgdHJ1ZSwgYWRkIHRoZSBsaXN0ZW5lciBhcyBvbmUtb2ZmIGxpc3RlbmVyLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMsIG9wdF9vbmNlKSB7XG4gICAgaWYgKG9wdF90aGlzICYmIG9wdF90aGlzICE9PSB0YXJnZXQpIHtcbiAgICAgICAgbGlzdGVuZXIgPSBsaXN0ZW5lci5iaW5kKG9wdF90aGlzKTtcbiAgICB9XG4gICAgaWYgKG9wdF9vbmNlKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbExpc3RlbmVyXzEgPSBsaXN0ZW5lcjtcbiAgICAgICAgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyXzEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGV2ZW50c0tleSA9IHtcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGxpc3RlbmVyOiBsaXN0ZW5lcixcbiAgICB9O1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICByZXR1cm4gZXZlbnRzS2V5O1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgYSBvbmUtb2ZmIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIGFzIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lclxuICogdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJucyBhIGtleSBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLnVubGlzdGVuQnlLZXl9IGluIGNhc2UgdGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlXG4gKiB1bnJlZ2lzdGVyZWQgYmVmb3JlIGl0IGlzIGNhbGxlZC5cbiAqXG4gKiBXaGVuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLmxpc3Rlbn0gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFmdGVyIHRoaXNcbiAqIGZ1bmN0aW9uLCB0aGUgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyIHdpbGwgYmUgdHVybmVkIGludG8gYSBwZXJtYW5lbnRcbiAqIGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRfdGhpc10gT2JqZWN0IHJlZmVyZW5jZWQgYnkgdGhlIGB0aGlzYCBrZXl3b3JkIGluIHRoZVxuICogICAgIGxpc3RlbmVyLiBEZWZhdWx0IGlzIHRoZSBgdGFyZ2V0YC5cbiAqIEByZXR1cm4ge0V2ZW50c0tleX0gS2V5IGZvciB1bmxpc3RlbkJ5S2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuT25jZSh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCBvcHRfdGhpcykge1xuICAgIHJldHVybiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMsIHRydWUpO1xufVxuLyoqXG4gKiBVbnJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGlzIHRoZSBrZXkgcmV0dXJuZWQgZnJvbVxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMubGlzdGVufSBvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy5saXN0ZW5PbmNlfS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50c0tleX0ga2V5IFRoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3RlbkJ5S2V5KGtleSkge1xuICAgIGlmIChrZXkgJiYga2V5LnRhcmdldCkge1xuICAgICAgICBrZXkudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoa2V5LnR5cGUsIGtleS5saXN0ZW5lcik7XG4gICAgICAgIGNsZWFyKGtleSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnRzLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvT2JzZXJ2YWJsZVxuICovXG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgbGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbi8qKipcbiAqIEB0ZW1wbGF0ZSB7c3RyaW5nfSBUeXBlXG4gKiBAdGVtcGxhdGUge0V2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IEV2ZW50Q2xhc3NcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHsodHlwZTogVHlwZXxUeXBlW10sIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50Q2xhc3MpID0+ID8pID0+IFJldHVybn0gT25TaWduYXR1cmVcbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIHtzdHJpbmd9IFR5cGVcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHsodHlwZTogVHlwZVtdLCBsaXN0ZW5lcjogKGV2ZW50OiBFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSA9PiA/KSA9PiBSZXR1cm59IENvbWJpbmVkT25TaWduYXR1cmVcbiAqL1xuLyoqKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fSBPblJldHVyblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHsnY2hhbmdlJ3wnZXJyb3InfSBFdmVudFR5cGVzXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQW4gZXZlbnQgdGFyZ2V0IHByb3ZpZGluZyBjb252ZW5pZW50IG1ldGhvZHMgZm9yIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogYW5kIHVucmVnaXN0cmF0aW9uLiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgYWx3YXlzIGF2YWlsYWJsZSB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSNjaGFuZ2VkfS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQGFwaVxuICovXG52YXIgT2JzZXJ2YWJsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoT2JzZXJ2YWJsZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPblNpZ25hdHVyZTxFdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBPblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbiA9IF90aGlzLm9uSW50ZXJuYWw7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIE9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2UgPSBfdGhpcy5vbmNlSW50ZXJuYWw7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW4gPSBfdGhpcy51bkludGVybmFsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJldmlzaW9uXyA9IDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW5jcmVhc2VzIHRoZSByZXZpc2lvbiBjb3VudGVyIGFuZCBkaXNwYXRjaGVzIGEgJ2NoYW5nZScgZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICsrdGhpcy5yZXZpc2lvbl87XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmVyc2lvbiBudW1iZXIgZm9yIHRoaXMgb2JqZWN0LiAgRWFjaCB0aW1lIHRoZSBvYmplY3QgaXMgbW9kaWZpZWQsXG4gICAgICogaXRzIHZlcnNpb24gbnVtYmVyIHdpbGwgYmUgaW5jcmVtZW50ZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXZpc2lvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZ2V0UmV2aXNpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJldmlzaW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gRXZlbnQga2V5LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbkludGVybmFsID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIga2V5cyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgIGtleXNbaV0gPSBsaXN0ZW4odGhpcywgdHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBFdmVudCBrZXkuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLm9uY2VJbnRlcm5hbCA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgICAgICAga2V5ID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAga2V5W2ldID0gbGlzdGVuT25jZSh0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBrZXkgPSBsaXN0ZW5PbmNlKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogQHR5cGUge09iamVjdH0gKi8gKGxpc3RlbmVyKS5vbF9rZXkgPSBrZXk7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oPyk6ID99IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS51bkludGVybmFsID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBrZXkgPSAvKiogQHR5cGUge09iamVjdH0gKi8gKGxpc3RlbmVyKS5vbF9rZXk7XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICAgIHVuQnlLZXkoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0eXBlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KEV2ZW50VGFyZ2V0KSk7XG4vKipcbiAqIExpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuIElmXG4gKiAgICAgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgcmV0dXJuXG4gKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICogQGFwaVxuICovXG5PYnNlcnZhYmxlLnByb3RvdHlwZS5vbjtcbi8qKlxuICogTGlzdGVuIG9uY2UgZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUub25jZTtcbi8qKlxuICogVW5saXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAYXBpXG4gKi9cbk9ic2VydmFibGUucHJvdG90eXBlLnVuO1xuLyoqXG4gKiBSZW1vdmVzIGFuIGV2ZW50IGxpc3RlbmVyIHVzaW5nIHRoZSBrZXkgcmV0dXJuZWQgYnkgYG9uKClgIG9yIGBvbmNlKClgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0ga2V5IFRoZSBrZXkgcmV0dXJuZWQgYnkgYG9uKClgXG4gKiAgICAgb3IgYG9uY2UoKWAgKG9yIGFuIGFycmF5IG9mIGtleXMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5CeUtleShrZXkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShrZXkpKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGtleS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KGtleVtpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHVubGlzdGVuQnlLZXkoLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9ICovIChrZXkpKTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBPYnNlcnZhYmxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2YWJsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdXRpbFxuICovXG4vKipcbiAqIEByZXR1cm4gez99IEFueSByZXR1cm4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhYnN0cmFjdCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHs/fSAqLyAoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkIGFic3RyYWN0IG1ldGhvZC4nKTtcbiAgICB9KSgpKTtcbn1cbi8qKlxuICogQ291bnRlciBmb3IgZ2V0VWlkLlxuICogQHR5cGUge251bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1aWRDb3VudGVyXyA9IDA7XG4vKipcbiAqIEdldHMgYSB1bmlxdWUgSUQgZm9yIGFuIG9iamVjdC4gVGhpcyBtdXRhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBmdXJ0aGVyIGNhbGxzXG4gKiB3aXRoIHRoZSBzYW1lIG9iamVjdCBhcyBhIHBhcmFtZXRlciByZXR1cm5zIHRoZSBzYW1lIHZhbHVlLiBVbmlxdWUgSURzIGFyZSBnZW5lcmF0ZWRcbiAqIGFzIGEgc3RyaWN0bHkgaW5jcmVhc2luZyBzZXF1ZW5jZS4gQWRhcHRlZCBmcm9tIGdvb2cuZ2V0VWlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBnZXQgdGhlIHVuaXF1ZSBJRCBmb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB1bmlxdWUgSUQgZm9yIHRoZSBvYmplY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVaWQob2JqKSB7XG4gICAgcmV0dXJuIG9iai5vbF91aWQgfHwgKG9iai5vbF91aWQgPSBTdHJpbmcoKyt1aWRDb3VudGVyXykpO1xufVxuLyoqXG4gKiBPcGVuTGF5ZXJzIHZlcnNpb24uXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIFZFUlNJT04gPSAnNi42LjEnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdFxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuL09ic2VydmFibGUuanMnO1xuaW1wb3J0IHsgYXNzaWduLCBpc0VtcHR5IH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICovXG52YXIgT2JqZWN0RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9iamVjdEV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHByb3BlcnR5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBUaGUgb2xkIHZhbHVlIGZvciBga2V5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBPYmplY3RFdmVudCh0eXBlLCBrZXksIG9sZFZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgY2hhbmdpbmcuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvbGQgdmFsdWUuIFRvIGdldCB0aGUgbmV3IHZhbHVlIHVzZSBgZS50YXJnZXQuZ2V0KGUua2V5KWAgd2hlcmVcbiAgICAgICAgICogYGVgIGlzIHRoZSBldmVudCBvYmplY3QuXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbGRWYWx1ZSA9IG9sZFZhbHVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3RFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IE9iamVjdEV2ZW50IH07XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXMsIFJldHVybj59IE9iamVjdE9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTW9zdCBub24tdHJpdmlhbCBjbGFzc2VzIGluaGVyaXQgZnJvbSB0aGlzLlxuICpcbiAqIFRoaXMgZXh0ZW5kcyB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV9IHdpdGggb2JzZXJ2YWJsZVxuICogcHJvcGVydGllcywgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBvYnNlcnZhYmxlIGFzIHdlbGwgYXMgdGhlIG9iamVjdCBhcyBhXG4gKiB3aG9sZS5cbiAqXG4gKiBDbGFzc2VzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgaGF2ZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzLCB0byB3aGljaCB5b3UgY2FuXG4gKiBhZGQgeW91ciBvd25zLiBUaGUgcHJlLWRlZmluZWQgcHJvcGVydGllcyBhcmUgbGlzdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbiBhc1xuICogJ09ic2VydmFibGUgUHJvcGVydGllcycsIGFuZCBoYXZlIHRoZWlyIG93biBhY2Nlc3NvcnM7IGZvciBleGFtcGxlLFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBoYXMgYSBgdGFyZ2V0YCBwcm9wZXJ0eSwgYWNjZXNzZWQgd2l0aFxuICogYGdldFRhcmdldCgpYCBhbmQgY2hhbmdlZCB3aXRoIGBzZXRUYXJnZXQoKWAuIE5vdCBhbGwgcHJvcGVydGllcyBhcmUgaG93ZXZlclxuICogc2V0dGFibGUuIFRoZXJlIGFyZSBhbHNvIGdlbmVyYWwtcHVycG9zZSBhY2Nlc3NvcnMgYGdldCgpYCBhbmQgYHNldCgpYC4gRm9yXG4gKiBleGFtcGxlLCBgZ2V0KCd0YXJnZXQnKWAgaXMgZXF1aXZhbGVudCB0byBgZ2V0VGFyZ2V0KClgLlxuICpcbiAqIFRoZSBgc2V0YCBhY2Nlc3NvcnMgdHJpZ2dlciBhIGNoYW5nZSBldmVudCwgYW5kIHlvdSBjYW4gbW9uaXRvciB0aGlzIGJ5XG4gKiByZWdpc3RlcmluZyBhIGxpc3RlbmVyLiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9WaWV3flZpZXd9IGhhcyBhXG4gKiBgY2VudGVyYCBwcm9wZXJ0eSwgc28gYHZpZXcub24oJ2NoYW5nZTpjZW50ZXInLCBmdW5jdGlvbihldnQpIHsuLi59KTtgIHdvdWxkXG4gKiBjYWxsIHRoZSBmdW5jdGlvbiB3aGVuZXZlciB0aGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwcm9wZXJ0eSBjaGFuZ2VzLiBXaXRoaW5cbiAqIHRoZSBmdW5jdGlvbiwgYGV2dC50YXJnZXRgIHdvdWxkIGJlIHRoZSB2aWV3LCBzbyBgZXZ0LnRhcmdldC5nZXRDZW50ZXIoKWBcbiAqIHdvdWxkIHJldHVybiB0aGUgbmV3IGNlbnRlci5cbiAqXG4gKiBZb3UgY2FuIGFkZCB5b3VyIG93biBvYnNlcnZhYmxlIHByb3BlcnRpZXMgd2l0aFxuICogYG9iamVjdC5zZXQoJ3Byb3AnLCAndmFsdWUnKWAsIGFuZCByZXRyaWV2ZSB0aGF0IHdpdGggYG9iamVjdC5nZXQoJ3Byb3AnKWAuXG4gKiBZb3UgY2FuIGxpc3RlbiBmb3IgY2hhbmdlcyBvbiB0aGF0IHByb3BlcnR5IHZhbHVlIHdpdGhcbiAqIGBvYmplY3Qub24oJ2NoYW5nZTpwcm9wJywgbGlzdGVuZXIpYC4gWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbFxuICogcHJvcGVydGllcyB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3QjZ2V0UHJvcGVydGllc30uXG4gKlxuICogTm90ZSB0aGF0IHRoZSBvYnNlcnZhYmxlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gc3RhbmRhcmQgSlMgcHJvcGVydGllcy5cbiAqIFlvdSBjYW4sIGZvciBleGFtcGxlLCBnaXZlIHlvdXIgbWFwIG9iamVjdCBhIHRpdGxlIHdpdGhcbiAqIGBtYXAudGl0bGU9J05ldyB0aXRsZSdgIGFuZCB3aXRoIGBtYXAuc2V0KCd0aXRsZScsICdBbm90aGVyIHRpdGxlJylgLiBUaGVcbiAqIGZpcnN0IHdpbGwgYmUgYSBgaGFzT3duUHJvcGVydHlgOyB0aGUgc2Vjb25kIHdpbGwgYXBwZWFyIGluXG4gKiBgZ2V0UHJvcGVydGllcygpYC4gT25seSB0aGUgc2Vjb25kIGlzIG9ic2VydmFibGUuXG4gKlxuICogUHJvcGVydGllcyBjYW4gYmUgZGVsZXRlZCBieSB1c2luZyB0aGUgdW5zZXQgbWV0aG9kLiBFLmcuXG4gKiBvYmplY3QudW5zZXQoJ2ZvbycpLlxuICpcbiAqIEBmaXJlcyBPYmplY3RFdmVudFxuICogQGFwaVxuICovXG52YXIgQmFzZU9iamVjdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZU9iamVjdCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSBbb3B0X3ZhbHVlc10gQW4gb2JqZWN0IHdpdGgga2V5LXZhbHVlIHBhaXJzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VPYmplY3Qob3B0X3ZhbHVlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09iamVjdE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICAvLyBDYWxsIHtAbGluayBtb2R1bGU6b2wvdXRpbC5nZXRVaWR9IHRvIGVuc3VyZSB0aGF0IHRoZSBvcmRlciBvZiBvYmplY3RzJyBpZHMgaXNcbiAgICAgICAgLy8gdGhlIHNhbWUgYXMgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBjcmVhdGVkLiAgVGhpcyBhbHNvIGhlbHBzIHRvXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBhbHdheXMgYWRkZWQgaW4gdGhlIHNhbWUgb3JkZXIsIHdoaWNoXG4gICAgICAgIC8vIGhlbHBzIG1hbnkgSmF2YVNjcmlwdCBlbmdpbmVzIGdlbmVyYXRlIGZhc3RlciBjb2RlLlxuICAgICAgICBnZXRVaWQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmFsdWVzXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRfdmFsdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMob3B0X3ZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgdmFsdWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHsqfSBWYWx1ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlc18gJiYgdGhpcy52YWx1ZXNfLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgbGlzdCBvZiBvYmplY3QgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gTGlzdCBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgT2JqZWN0LmtleXModGhpcy52YWx1ZXNfKSkgfHwgW107XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gb2JqZWN0IG9mIGFsbCBwcm9wZXJ0eSBuYW1lcyBhbmQgdmFsdWVzLlxuICAgICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsICo+fSBPYmplY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmdldFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy52YWx1ZXNfICYmIGFzc2lnbih7fSwgdGhpcy52YWx1ZXNfKSkgfHwge307XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGhhcyBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmhhc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMudmFsdWVzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBPbGQgdmFsdWUuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKGtleSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdmFyIGV2ZW50VHlwZTtcbiAgICAgICAgZXZlbnRUeXBlID0gXCJjaGFuZ2U6XCIgKyBrZXk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT2JqZWN0RXZlbnQoZXZlbnRUeXBlLCBrZXksIG9sZFZhbHVlKSk7XG4gICAgICAgIGV2ZW50VHlwZSA9IE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuYWRkQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoa2V5LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2U6XCIgKyBrZXksIGxpc3RlbmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoa2V5LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2U6XCIgKyBrZXksIGxpc3RlbmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3NpbGVudF0gVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdF9zaWxlbnQpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMudmFsdWVzXyB8fCAodGhpcy52YWx1ZXNfID0ge30pO1xuICAgICAgICBpZiAob3B0X3NpbGVudCkge1xuICAgICAgICAgICAgdmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHZhbHVlc1trZXldO1xuICAgICAgICAgICAgdmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShrZXksIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhIGNvbGxlY3Rpb24gb2Yga2V5LXZhbHVlIHBhaXJzLiAgTm90ZSB0aGF0IHRoaXMgY2hhbmdlcyBhbnkgZXhpc3RpbmdcbiAgICAgKiBwcm9wZXJ0aWVzIGFuZCBhZGRzIG5ldyBvbmVzIChpdCBkb2VzIG5vdCByZW1vdmUgYW55IGV4aXN0aW5nIHByb3BlcnRpZXMpLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgKj59IHZhbHVlcyBWYWx1ZXMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3NpbGVudF0gVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuc2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uICh2YWx1ZXMsIG9wdF9zaWxlbnQpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB2YWx1ZXNba2V5XSwgb3B0X3NpbGVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGFueSBwcm9wZXJ0aWVzIGZyb20gYW5vdGhlciBvYmplY3Qgd2l0aG91dCB0cmlnZ2VyaW5nIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge0Jhc2VPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuYXBwbHlQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBpZiAoIXNvdXJjZS52YWx1ZXNfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKHRoaXMudmFsdWVzXyB8fCAodGhpcy52YWx1ZXNfID0ge30pLCBzb3VyY2UudmFsdWVzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVbnNldHMgYSBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaWxlbnRdIFVuc2V0IHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoa2V5LCBvcHRfc2lsZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlc18gJiYga2V5IGluIHRoaXMudmFsdWVzXykge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLnZhbHVlc18pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghb3B0X3NpbGVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZU9iamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgQmFzZU9iamVjdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgT1BBQ0lUWTogJ29wYWNpdHknLFxuICAgIFZJU0lCTEU6ICd2aXNpYmxlJyxcbiAgICBFWFRFTlQ6ICdleHRlbnQnLFxuICAgIFpfSU5ERVg6ICd6SW5kZXgnLFxuICAgIE1BWF9SRVNPTFVUSU9OOiAnbWF4UmVzb2x1dGlvbicsXG4gICAgTUlOX1JFU09MVVRJT046ICdtaW5SZXNvbHV0aW9uJyxcbiAgICBNQVhfWk9PTTogJ21heFpvb20nLFxuICAgIE1JTl9aT09NOiAnbWluWm9vbScsXG4gICAgU09VUkNFOiAnc291cmNlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0Fzc2VydGlvbkVycm9yXG4gKi9cbmltcG9ydCB7IFZFUlNJT04gfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBFcnJvciBvYmplY3QgdGhyb3duIHdoZW4gYW4gYXNzZXJ0aW9uIGZhaWxlZC4gVGhpcyBpcyBhbiBFQ01BLTI2MiBFcnJvcixcbiAqIGV4dGVuZGVkIHdpdGggYSBgY29kZWAgcHJvcGVydHkuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IuXG4gKi9cbnZhciBBc3NlcnRpb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQXNzZXJ0aW9uRXJyb3IsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgRXJyb3IgY29kZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBc3NlcnRpb25FcnJvcihjb2RlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBwYXRoID0gVkVSU0lPTiA9PT0gJ2xhdGVzdCcgPyBWRVJTSU9OIDogJ3YnICsgVkVSU0lPTi5zcGxpdCgnLScpWzBdO1xuICAgICAgICB2YXIgbWVzc2FnZSA9ICdBc3NlcnRpb24gZmFpbGVkLiBTZWUgaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi8nICtcbiAgICAgICAgICAgIHBhdGggK1xuICAgICAgICAgICAgJy9kb2MvZXJyb3JzLyMnICtcbiAgICAgICAgICAgIGNvZGUgK1xuICAgICAgICAgICAgJyBmb3IgZGV0YWlscy4nO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFcnJvciBjb2RlLiBUaGUgbWVhbmluZyBvZiB0aGUgY29kZSBjYW4gYmUgZm91bmQgb25cbiAgICAgICAgICogaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi9sYXRlc3QvZG9jL2Vycm9ycy8gKHJlcGxhY2UgYGxhdGVzdGAgd2l0aFxuICAgICAgICAgKiB0aGUgdmVyc2lvbiBmb3VuZCBpbiB0aGUgT3BlbkxheWVycyBzY3JpcHQncyBoZWFkZXIgY29tbWVudCBpZiBhIHZlcnNpb25cbiAgICAgICAgICogb3RoZXIgdGhhbiB0aGUgbGF0ZXN0IGlzIHVzZWQpLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2RlID0gY29kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcbiAgICAgICAgLy8gUmUtYXNzaWduIG1lc3NhZ2UsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vUmljaC1IYXJyaXMvYnVibGUvaXNzdWVzLzQwXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBBc3NlcnRpb25FcnJvcjtcbn0oRXJyb3IpKTtcbmV4cG9ydCBkZWZhdWx0IEFzc2VydGlvbkVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXNzZXJ0aW9uRXJyb3IuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Fzc2VydHNcbiAqL1xuaW1wb3J0IEFzc2VydGlvbkVycm9yIGZyb20gJy4vQXNzZXJ0aW9uRXJyb3IuanMnO1xuLyoqXG4gKiBAcGFyYW0geyp9IGFzc2VydGlvbiBBc3NlcnRpb24gd2UgZXhwZWN0ZWQgdG8gYmUgdHJ1dGh5LlxuICogQHBhcmFtIHtudW1iZXJ9IGVycm9yQ29kZSBFcnJvciBjb2RlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KGFzc2VydGlvbiwgZXJyb3JDb2RlKSB7XG4gICAgaWYgKCFhc3NlcnRpb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEFzc2VydGlvbkVycm9yKGVycm9yQ29kZSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXNzZXJ0cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbWF0aFxuICovXG4vKipcbiAqIFRha2VzIGEgbnVtYmVyIGFuZCBjbGFtcHMgaXQgdG8gd2l0aGluIHRoZSBwcm92aWRlZCBib3VuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGlucHV0IG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW4gVGhlIG1pbmltdW0gdmFsdWUgdG8gcmV0dXJuLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBUaGUgbWF4aW11bSB2YWx1ZSB0byByZXR1cm4uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbnB1dCBudW1iZXIgaWYgaXQgaXMgd2l0aGluIGJvdW5kcywgb3IgdGhlIG5lYXJlc3RcbiAqICAgICBudW1iZXIgd2l0aGluIHRoZSBib3VuZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcCh2YWx1ZSwgbWluLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heCk7XG59XG4vKipcbiAqIFJldHVybiB0aGUgaHlwZXJib2xpYyBjb3NpbmUgb2YgYSBnaXZlbiBudW1iZXIuIFRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlXG4gKiBuYXRpdmUgYE1hdGguY29zaGAgZnVuY3Rpb24gaWYgaXQgaXMgYXZhaWxhYmxlLCBvdGhlcndpc2UgdGhlIGh5cGVyYm9saWNcbiAqIGNvc2luZSB3aWxsIGJlIGNhbGN1bGF0ZWQgdmlhIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgdGhlIE1vemlsbGFcbiAqIGRldmVsb3BlciBuZXR3b3JrLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEh5cGVyYm9saWMgY29zaW5lIG9mIHguXG4gKi9cbmV4cG9ydCB2YXIgY29zaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gV3JhcHBlZCBpbiBhIGlpZmUsIHRvIHNhdmUgdGhlIG92ZXJoZWFkIG9mIGNoZWNraW5nIGZvciB0aGUgbmF0aXZlXG4gICAgLy8gaW1wbGVtZW50YXRpb24gb24gZXZlcnkgaW52b2NhdGlvbi5cbiAgICB2YXIgY29zaDtcbiAgICBpZiAoJ2Nvc2gnIGluIE1hdGgpIHtcbiAgICAgICAgLy8gVGhlIGVudmlyb25tZW50IHN1cHBvcnRzIHRoZSBuYXRpdmUgTWF0aC5jb3NoIGZ1bmN0aW9uLCB1c2UgaXTigKZcbiAgICAgICAgY29zaCA9IE1hdGguY29zaDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIOKApiBlbHNlLCB1c2UgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiBNRE46XG4gICAgICAgIGNvc2ggPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdmFyIHkgPSAvKiogQHR5cGUge01hdGh9ICovIChNYXRoKS5leHAoeCk7XG4gICAgICAgICAgICByZXR1cm4gKHkgKyAxIC8geSkgLyAyO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gY29zaDtcbn0pKCk7XG4vKipcbiAqIFJldHVybiB0aGUgYmFzZSAyIGxvZ2FyaXRobSBvZiBhIGdpdmVuIG51bWJlci4gVGhlIG1ldGhvZCB3aWxsIHVzZSB0aGVcbiAqIG5hdGl2ZSBgTWF0aC5sb2cyYCBmdW5jdGlvbiBpZiBpdCBpcyBhdmFpbGFibGUsIG90aGVyd2lzZSB0aGUgYmFzZSAyXG4gKiBsb2dhcml0aG0gd2lsbCBiZSBjYWxjdWxhdGVkIHZpYSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIHRoZVxuICogTW96aWxsYSBkZXZlbG9wZXIgbmV0d29yay5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHJldHVybiB7bnVtYmVyfSBCYXNlIDIgbG9nYXJpdGhtIG9mIHguXG4gKi9cbmV4cG9ydCB2YXIgbG9nMiA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gV3JhcHBlZCBpbiBhIGlpZmUsIHRvIHNhdmUgdGhlIG92ZXJoZWFkIG9mIGNoZWNraW5nIGZvciB0aGUgbmF0aXZlXG4gICAgLy8gaW1wbGVtZW50YXRpb24gb24gZXZlcnkgaW52b2NhdGlvbi5cbiAgICB2YXIgbG9nMjtcbiAgICBpZiAoJ2xvZzInIGluIE1hdGgpIHtcbiAgICAgICAgLy8gVGhlIGVudmlyb25tZW50IHN1cHBvcnRzIHRoZSBuYXRpdmUgTWF0aC5sb2cyIGZ1bmN0aW9uLCB1c2UgaXTigKZcbiAgICAgICAgbG9nMiA9IE1hdGgubG9nMjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIOKApiBlbHNlLCB1c2UgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiBNRE46XG4gICAgICAgIGxvZzIgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubG9nKHgpICogTWF0aC5MT0cyRTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGxvZzI7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcXVhcmUgb2YgdGhlIGNsb3Nlc3QgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnQgKHgsIHkpIGFuZCB0aGVcbiAqIGxpbmUgc2VnbWVudCAoeDEsIHkxKSB0byAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHgxIFgxLlxuICogQHBhcmFtIHtudW1iZXJ9IHkxIFkxLlxuICogQHBhcmFtIHtudW1iZXJ9IHgyIFgyLlxuICogQHBhcmFtIHtudW1iZXJ9IHkyIFkyLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZFNlZ21lbnREaXN0YW5jZSh4LCB5LCB4MSwgeTEsIHgyLCB5Mikge1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICBpZiAoZHggIT09IDAgfHwgZHkgIT09IDApIHtcbiAgICAgICAgdmFyIHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKHQgPiAxKSB7XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ID4gMCkge1xuICAgICAgICAgICAgeDEgKz0gZHggKiB0O1xuICAgICAgICAgICAgeTEgKz0gZHkgKiB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2UoeCwgeSwgeDEsIHkxKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgc3F1YXJlIG9mIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb2ludHMgKHgxLCB5MSkgYW5kICh4MiwgeTIpLlxuICogQHBhcmFtIHtudW1iZXJ9IHgxIFgxLlxuICogQHBhcmFtIHtudW1iZXJ9IHkxIFkxLlxuICogQHBhcmFtIHtudW1iZXJ9IHgyIFgyLlxuICogQHBhcmFtIHtudW1iZXJ9IHkyIFkyLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIGR4ID0geDIgLSB4MTtcbiAgICB2YXIgZHkgPSB5MiAtIHkxO1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogU29sdmVzIHN5c3RlbSBvZiBsaW5lYXIgZXF1YXRpb25zIHVzaW5nIEdhdXNzaWFuIGVsaW1pbmF0aW9uIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBtYXQgQXVnbWVudGVkIG1hdHJpeCAobiB4IG4gKyAxIGNvbHVtbilcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHJvdy1tYWpvciBvcmRlci5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSByZXN1bHRpbmcgdmVjdG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc29sdmVMaW5lYXJTeXN0ZW0obWF0KSB7XG4gICAgdmFyIG4gPSBtYXQubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIC8vIEZpbmQgbWF4IGluIHRoZSBpLXRoIGNvbHVtbiAoaWdub3JpbmcgaSAtIDEgZmlyc3Qgcm93cylcbiAgICAgICAgdmFyIG1heFJvdyA9IGk7XG4gICAgICAgIHZhciBtYXhFbCA9IE1hdGguYWJzKG1hdFtpXVtpXSk7XG4gICAgICAgIGZvciAodmFyIHIgPSBpICsgMTsgciA8IG47IHIrKykge1xuICAgICAgICAgICAgdmFyIGFic1ZhbHVlID0gTWF0aC5hYnMobWF0W3JdW2ldKTtcbiAgICAgICAgICAgIGlmIChhYnNWYWx1ZSA+IG1heEVsKSB7XG4gICAgICAgICAgICAgICAgbWF4RWwgPSBhYnNWYWx1ZTtcbiAgICAgICAgICAgICAgICBtYXhSb3cgPSByO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhFbCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7IC8vIG1hdHJpeCBpcyBzaW5ndWxhclxuICAgICAgICB9XG4gICAgICAgIC8vIFN3YXAgbWF4IHJvdyB3aXRoIGktdGggKGN1cnJlbnQpIHJvd1xuICAgICAgICB2YXIgdG1wID0gbWF0W21heFJvd107XG4gICAgICAgIG1hdFttYXhSb3ddID0gbWF0W2ldO1xuICAgICAgICBtYXRbaV0gPSB0bXA7XG4gICAgICAgIC8vIFN1YnRyYWN0IHRoZSBpLXRoIHJvdyB0byBtYWtlIGFsbCB0aGUgcmVtYWluaW5nIHJvd3MgMCBpbiB0aGUgaS10aCBjb2x1bW5cbiAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgbjsgaisrKSB7XG4gICAgICAgICAgICB2YXIgY29lZiA9IC1tYXRbal1baV0gLyBtYXRbaV1baV07XG4gICAgICAgICAgICBmb3IgKHZhciBrID0gaTsgayA8IG4gKyAxOyBrKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PSBrKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdFtqXVtrXSA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXRbal1ba10gKz0gY29lZiAqIG1hdFtpXVtrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gU29sdmUgQXg9YiBmb3IgdXBwZXIgdHJpYW5ndWxhciBtYXRyaXggQSAobWF0KVxuICAgIHZhciB4ID0gbmV3IEFycmF5KG4pO1xuICAgIGZvciAodmFyIGwgPSBuIC0gMTsgbCA+PSAwOyBsLS0pIHtcbiAgICAgICAgeFtsXSA9IG1hdFtsXVtuXSAvIG1hdFtsXVtsXTtcbiAgICAgICAgZm9yICh2YXIgbSA9IGwgLSAxOyBtID49IDA7IG0tLSkge1xuICAgICAgICAgICAgbWF0W21dW25dIC09IG1hdFttXVtsXSAqIHhbbF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHg7XG59XG4vKipcbiAqIENvbnZlcnRzIHJhZGlhbnMgdG8gdG8gZGVncmVlcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJblJhZGlhbnMgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gZGVncmVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGVncmVlcyhhbmdsZUluUmFkaWFucykge1xuICAgIHJldHVybiAoYW5nbGVJblJhZGlhbnMgKiAxODApIC8gTWF0aC5QSTtcbn1cbi8qKlxuICogQ29udmVydHMgZGVncmVlcyB0byByYWRpYW5zLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluRGVncmVlcyBBbmdsZSBpbiBkZWdyZWVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBpbiByYWRpYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9SYWRpYW5zKGFuZ2xlSW5EZWdyZWVzKSB7XG4gICAgcmV0dXJuIChhbmdsZUluRGVncmVlcyAqIE1hdGguUEkpIC8gMTgwO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtb2R1bG8gb2YgYSAvIGIsIGRlcGVuZGluZyBvbiB0aGUgc2lnbiBvZiBiLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIERpdmlkZW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IGIgRGl2aXNvci5cbiAqIEByZXR1cm4ge251bWJlcn0gTW9kdWxvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kdWxvKGEsIGIpIHtcbiAgICB2YXIgciA9IGEgJSBiO1xuICAgIHJldHVybiByICogYiA8IDAgPyByICsgYiA6IHI7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxpbmVhcmx5IGludGVycG9sYXRlZCB2YWx1ZSBvZiB4IGJldHdlZW4gYSBhbmQgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IHggVmFsdWUgdG8gYmUgaW50ZXJwb2xhdGVkLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnBvbGF0ZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKGEsIGIsIHgpIHtcbiAgICByZXR1cm4gYSArIHggKiAoYiAtIGEpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWF0aC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBMYXllclByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpleHRlbnQnfCdjaGFuZ2U6bWF4UmVzb2x1dGlvbid8J2NoYW5nZTptYXhab29tJ3xcbiAqICAgICdjaGFuZ2U6bWluUmVzb2x1dGlvbid8J2NoYW5nZTptaW5ab29tJ3wnY2hhbmdlOm9wYWNpdHknfCdjaGFuZ2U6dmlzaWJsZSd8J2NoYW5nZTp6SW5kZXgnfSBCYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPEJhc2VMYXllck9iamVjdEV2ZW50VHlwZXMsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8QmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlcywgUmV0dXJuPn0gQmFzZUxheWVyT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBOb3RlIHRoYXQgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V9IGFuZCBhbGwgaXRzIHN1YmNsYXNzZXMsIGFueSBwcm9wZXJ0eSBzZXQgaW5cbiAqIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fSBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0LCBzb1xuICogaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgTGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlTGF5ZXIob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VMYXllck9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZGVsZXRlIHByb3BlcnRpZXMucHJvcGVydGllcztcbiAgICAgICAgICAgIGFzc2lnbihwcm9wZXJ0aWVzLCBvcHRpb25zLnByb3BlcnRpZXMpO1xuICAgICAgICB9XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZXSA9XG4gICAgICAgICAgICBvcHRpb25zLm9wYWNpdHkgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhY2l0eSA6IDE7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk9QQUNJVFldID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlZJU0lCTEVdID1cbiAgICAgICAgICAgIG9wdGlvbnMudmlzaWJsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52aXNpYmxlIDogdHJ1ZTtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlpfSU5ERVhdID0gb3B0aW9ucy56SW5kZXg7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTl0gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFJlc29sdXRpb24gOiBJbmZpbml0eTtcbiAgICAgICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OXSA9XG4gICAgICAgICAgICBvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluUmVzb2x1dGlvbiA6IDA7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAtSW5maW5pdHk7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFpvb20gOiBJbmZpbml0eTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jbGFzc05hbWVfID1cbiAgICAgICAgICAgIHByb3BlcnRpZXMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1sYXllcic7XG4gICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmNsYXNzTmFtZTtcbiAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGVfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IENTUyBjbGFzcyBuYW1lLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0Q2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jbGFzc05hbWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgbm90IG1lYW50IHRvIGJlIGNhbGxlZCBieSBsYXllcnMgb3IgbGF5ZXIgcmVuZGVyZXJzIGJlY2F1c2UgdGhlIHN0YXRlXG4gICAgICogaXMgaW5jb3JyZWN0IGlmIHRoZSBsYXllciBpcyBpbmNsdWRlZCBpbiBhIGxheWVyIGdyb3VwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X21hbmFnZWRdIExheWVyIGlzIG1hbmFnZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gTGF5ZXIgc3RhdGUuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlID0gZnVuY3Rpb24gKG9wdF9tYW5hZ2VkKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gKi9cbiAgICAgICAgdmFyIHN0YXRlID0gdGhpcy5zdGF0ZV8gfHxcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHtcbiAgICAgICAgICAgICAgICBsYXllcjogdGhpcyxcbiAgICAgICAgICAgICAgICBtYW5hZ2VkOiBvcHRfbWFuYWdlZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdF9tYW5hZ2VkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIHZhciB6SW5kZXggPSB0aGlzLmdldFpJbmRleCgpO1xuICAgICAgICBzdGF0ZS5vcGFjaXR5ID0gY2xhbXAoTWF0aC5yb3VuZCh0aGlzLmdldE9wYWNpdHkoKSAqIDEwMCkgLyAxMDAsIDAsIDEpO1xuICAgICAgICBzdGF0ZS5zb3VyY2VTdGF0ZSA9IHRoaXMuZ2V0U291cmNlU3RhdGUoKTtcbiAgICAgICAgc3RhdGUudmlzaWJsZSA9IHRoaXMuZ2V0VmlzaWJsZSgpO1xuICAgICAgICBzdGF0ZS5leHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgICAgICBzdGF0ZS56SW5kZXggPSB6SW5kZXggPT09IHVuZGVmaW5lZCAmJiAhc3RhdGUubWFuYWdlZCA/IEluZmluaXR5IDogekluZGV4O1xuICAgICAgICBzdGF0ZS5tYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRNYXhSZXNvbHV0aW9uKCk7XG4gICAgICAgIHN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heCh0aGlzLmdldE1pblJlc29sdXRpb24oKSwgMCk7XG4gICAgICAgIHN0YXRlLm1pblpvb20gPSB0aGlzLmdldE1pblpvb20oKTtcbiAgICAgICAgc3RhdGUubWF4Wm9vbSA9IHRoaXMuZ2V0TWF4Wm9vbSgpO1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IFtvcHRfYXJyYXldIEFycmF5IG9mIGxheWVycyAodG8gYmVcbiAgICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IEFycmF5IG9mIGxheWVycy5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IFtvcHRfc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyXG4gICAgICogICAgIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiAob3B0X3N0YXRlcykge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUge0BsaW5rIG1vZHVsZTpvbC9leHRlbnR+RXh0ZW50IGV4dGVudH0gb2YgdGhlIGxheWVyIG9yIGB1bmRlZmluZWRgIGlmIGl0XG4gICAgICogd2lsbCBiZSB2aXNpYmxlIHJlZ2FyZGxlc3Mgb2YgZXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBUaGUgbGF5ZXIgZXh0ZW50LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuRVhURU5UKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1heFJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNaW5ab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1JTl9aT09NKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1heGltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1pPT00pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIgKGJldHdlZW4gMCBhbmQgMSkuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRPcGFjaXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk9QQUNJVFkpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2Ugc3RhdGUuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyIChgdHJ1ZWAgb3IgYGZhbHNlYCkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0VmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuVklTSUJMRSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBaLWluZGV4IG9mIHRoZSBsYXllciwgd2hpY2ggaXMgdXNlZCB0byBvcmRlciBsYXllcnMgYmVmb3JlXG4gICAgICogcmVuZGVyaW5nLiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRaSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuWl9JTkRFWCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBleHRlbnQgYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuICBJZiBgdW5kZWZpbmVkYCwgdGhlIGxheWVyXG4gICAgICogd2lsbCBiZSB2aXNpYmxlIGF0IGFsbCBleHRlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9IGV4dGVudCBUaGUgZXh0ZW50IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldEV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5FWFRFTlQsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1heFJlc29sdXRpb24gPSBmdW5jdGlvbiAobWF4UmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OLCBtYXhSZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChtaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT04sIG1pblJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtYXhpbXVtIHpvb20gKGV4Y2x1c2l2ZSkgYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogTm90ZSB0aGF0IHRoZSB6b29tIGxldmVscyBmb3IgbGF5ZXIgdmlzaWJpbGl0eSBhcmUgYmFzZWQgb24gdGhlXG4gICAgICogdmlldyB6b29tIGxldmVsLCB3aGljaCBtYXkgYmUgZGlmZmVyZW50IGZyb20gYSB0aWxlIHNvdXJjZSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhab29tIFRoZSBtYXhpbXVtIHpvb20gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWF4Wm9vbSA9IGZ1bmN0aW9uIChtYXhab29tKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1pPT00sIG1heFpvb20pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtaW5pbXVtIHpvb20gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogTm90ZSB0aGF0IHRoZSB6b29tIGxldmVscyBmb3IgbGF5ZXIgdmlzaWJpbGl0eSBhcmUgYmFzZWQgb24gdGhlXG4gICAgICogdmlldyB6b29tIGxldmVsLCB3aGljaCBtYXkgYmUgZGlmZmVyZW50IGZyb20gYSB0aWxlIHNvdXJjZSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ab29tIFRoZSBtaW5pbXVtIHpvb20gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWluWm9vbSA9IGZ1bmN0aW9uIChtaW5ab29tKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUlOX1pPT00sIG1pblpvb20pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBvcGFjaXR5IG9mIHRoZSBsYXllciwgYWxsb3dlZCB2YWx1ZXMgcmFuZ2UgZnJvbSAwIHRvIDEuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgVGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0T3BhY2l0eSA9IGZ1bmN0aW9uIChvcGFjaXR5KSB7XG4gICAgICAgIGFzc2VydCh0eXBlb2Ygb3BhY2l0eSA9PT0gJ251bWJlcicsIDY0KTsgLy8gTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyXG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuT1BBQ0lUWSwgb3BhY2l0eSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyIChgdHJ1ZWAgb3IgYGZhbHNlYCkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2aXNpYmxlIFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldFZpc2libGUgPSBmdW5jdGlvbiAodmlzaWJsZSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlZJU0lCTEUsIHZpc2libGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IFotaW5kZXggb2YgdGhlIGxheWVyLCB3aGljaCBpcyB1c2VkIHRvIG9yZGVyIGxheWVycyBiZWZvcmUgcmVuZGVyaW5nLlxuICAgICAqIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gemluZGV4IFRoZSB6LWluZGV4IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldFpJbmRleCA9IGZ1bmN0aW9uICh6aW5kZXgpIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5aX0lOREVYLCB6aW5kZXgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlXykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZV8ubGF5ZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUxheWVyO1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBCYXNlTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBiZWZvcmUgYSBsYXllciBpcyByZW5kZXJlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwcmVyZW5kZXJcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUFJFUkVOREVSOiAncHJlcmVuZGVyJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgYSBsYXllciBpcyByZW5kZXJlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwb3N0cmVuZGVyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPU1RSRU5ERVI6ICdwb3N0cmVuZGVyJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYmVmb3JlIGxheWVycyBhcmUgcmVuZGVyZWQuXG4gICAgICogVGhlIGV2ZW50IG9iamVjdCB3aWxsIG5vdCBoYXZlIGEgYGNvbnRleHRgIHNldC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwcmVjb21wb3NlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBSRUNPTVBPU0U6ICdwcmVjb21wb3NlJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgYWxsIGxheWVycyBhcmUgcmVuZGVyZWQuXG4gICAgICogVGhlIGV2ZW50IG9iamVjdCB3aWxsIG5vdCBoYXZlIGEgYGNvbnRleHRgIHNldC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwb3N0Y29tcG9zZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUQ09NUE9TRTogJ3Bvc3Rjb21wb3NlJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiByZW5kZXJpbmcgaXMgY29tcGxldGUsIGkuZS4gYWxsIHNvdXJjZXMgYW5kIHRpbGVzIGhhdmVcbiAgICAgKiBmaW5pc2hlZCBsb2FkaW5nIGZvciB0aGUgY3VycmVudCB2aWV3cG9ydCwgYW5kIGFsbCB0aWxlcyBhcmUgZmFkZWQgaW4uXG4gICAgICogVGhlIGV2ZW50IG9iamVjdCB3aWxsIG5vdCBoYXZlIGEgYGNvbnRleHRgIHNldC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNyZW5kZXJjb21wbGV0ZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSRU5ERVJDT01QTEVURTogJ3JlbmRlcmNvbXBsZXRlJyxcbn07XG4vKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J3ByZWNvbXBvc2UnfCdwb3N0Y29tcG9zZSd8J3JlbmRlcmNvbXBsZXRlJ30gTWFwUmVuZGVyRXZlbnRUeXBlc1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J3ByZXJlbmRlcid9IExheWVyUmVuZGVyRXZlbnRUeXBlc1xuICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9TdGF0ZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBTdGF0ZSBvZiB0aGUgc291cmNlLCBvbmUgb2YgJ3VuZGVmaW5lZCcsICdsb2FkaW5nJywgJ3JlYWR5JyBvciAnZXJyb3InLlxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgVU5ERUZJTkVEOiAndW5kZWZpbmVkJyxcbiAgICBMT0FESU5HOiAnbG9hZGluZycsXG4gICAgUkVBRFk6ICdyZWFkeScsXG4gICAgRVJST1I6ICdlcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9MYXllclxuICovXG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IExheWVyUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGUpOkhUTUxFbGVtZW50fSBSZW5kZXJGdW5jdGlvblxuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAnY2hhbmdlOnNvdXJjZScsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3wnY2hhbmdlOnNvdXJjZSd8XG4gKiAgICAgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIFJldHVybj59IExheWVyT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gU291cmNlVHlwZVxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7U291cmNlVHlwZX0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gTWFwLlxuICogQHByb3BlcnR5IHtSZW5kZXJGdW5jdGlvbn0gW3JlbmRlcl0gUmVuZGVyIGZ1bmN0aW9uLiBUYWtlcyB0aGUgZnJhbWUgc3RhdGUgYXMgaW5wdXQgYW5kIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhblxuICogSFRNTCBlbGVtZW50LiBXaWxsIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCByZW5kZXJpbmcgZm9yIHRoZSBsYXllci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHksIHRoZSB2YWx1ZSBpcyByb3VuZGVkIHRvIHR3byBkaWdpdHMgdG8gYXBwZWFyIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gc291cmNlU3RhdGUgU291cmNlU3RhdGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHZpc2libGUgVmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbWFuYWdlZCBNYW5hZ2VkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBFeHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gekluZGV4IFpJbmRleC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heGltdW0gcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIE1pbmltdW0gcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5ab29tIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhab29tIE1heGltdW0gem9vbS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZyb20gd2hpY2ggYWxsIGxheWVyIHR5cGVzIGFyZSBkZXJpdmVkLiBUaGlzIHNob3VsZCBvbmx5IGJlIGluc3RhbnRpYXRlZFxuICogaW4gdGhlIGNhc2Ugd2hlcmUgYSBjdXN0b20gbGF5ZXIgaXMgYmUgYWRkZWQgdG8gdGhlIG1hcCB3aXRoIGEgY3VzdG9tIGByZW5kZXJgIGZ1bmN0aW9uLlxuICogU3VjaCBhIGZ1bmN0aW9uIGNhbiBiZSBzcGVjaWZpZWQgaW4gdGhlIGBvcHRpb25zYCBvYmplY3QsIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYW4gSFRNTCBlbGVtZW50LlxuICpcbiAqIEEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHJhc3RlciBvciB2ZWN0b3IgbWFwIGRhdGEuXG4gKiBMYXllcnMgZ3JvdXAgdG9nZXRoZXIgdGhvc2UgcHJvcGVydGllcyB0aGF0IHBlcnRhaW4gdG8gaG93IHRoZSBkYXRhIGlzIHRvIGJlXG4gKiBkaXNwbGF5ZWQsIGlycmVzcGVjdGl2ZSBvZiB0aGUgc291cmNlIG9mIHRoYXQgZGF0YS5cbiAqXG4gKiBMYXllcnMgYXJlIHVzdWFsbHkgYWRkZWQgdG8gYSBtYXAgd2l0aCB7QGxpbmsgaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHQjYWRkTGF5ZXIgbWFwLmFkZExheWVyKCl9LiBDb21wb25lbnRzXG4gKiBsaWtlIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vU2VsZWN0flNlbGVjdH0gdXNlIHVubWFuYWdlZCBsYXllcnNcbiAqIGludGVybmFsbHkuIFRoZXNlIHVubWFuYWdlZCBsYXllcnMgYXJlIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwIHVzaW5nXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyI3NldE1hcH0gaW5zdGVhZC5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgZmlyZWQgd2hlbiB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSBjaGFuZ2VzLlxuICpcbiAqIFBsZWFzZSBub3RlIHRoYXQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgc2V2ZXJhbCBsYXllcnMgbWlnaHQgZ2V0IHJlbmRlcmVkIHRvXG4gKiB0aGUgc2FtZSBIVE1MIGVsZW1lbnQsIHdoaWNoIHdpbGwgY2F1c2Uge0BsaW5rIGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0I2ZvckVhY2hMYXllckF0UGl4ZWwgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwoKX0gdG9cbiAqIGdpdmUgZmFsc2UgcG9zaXRpdmVzLiBUbyBhdm9pZCB0aGlzLCBhcHBseSBkaWZmZXJlbnQgYGNsYXNzTmFtZWAgcHJvcGVydGllcyB0byB0aGVcbiAqIGxheWVycyBhdCBjcmVhdGlvbiB0aW1lLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuUmVuZGVyRXZlbnQjcHJlcmVuZGVyXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50I3Bvc3RyZW5kZXJcbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gU291cmNlVHlwZVxuICogQGFwaVxuICovXG52YXIgTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uczxTb3VyY2VUeXBlPn0gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnNvdXJjZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZXJfID0gbnVsbDtcbiAgICAgICAgLy8gT3ZlcndyaXRlIGRlZmF1bHQgcmVuZGVyIG1ldGhvZCB3aXRoIGEgY3VzdG9tIG9uZVxuICAgICAgICBpZiAob3B0aW9ucy5yZW5kZXIpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLm1hcCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0TWFwKG9wdGlvbnMubWFwKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihMYXllclByb3BlcnR5LlNPVVJDRSwgX3RoaXMuaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfKTtcbiAgICAgICAgdmFyIHNvdXJjZSA9IG9wdGlvbnMuc291cmNlXG4gICAgICAgICAgICA/IC8qKiBAdHlwZSB7U291cmNlVHlwZX0gKi8gKG9wdGlvbnMuc291cmNlKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICBfdGhpcy5zZXRTb3VyY2Uoc291cmNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IFtvcHRfYXJyYXldIEFycmF5IG9mIGxheWVycyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IEFycmF5IG9mIGxheWVycy5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiAob3B0X2FycmF5KSB7XG4gICAgICAgIHZhciBhcnJheSA9IG9wdF9hcnJheSA/IG9wdF9hcnJheSA6IFtdO1xuICAgICAgICBhcnJheS5wdXNoKHRoaXMpO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbb3B0X3N0YXRlc10gT3B0aW9uYWwgbGlzdCBvZiBsYXllciBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyU3RhdGVzQXJyYXkgPSBmdW5jdGlvbiAob3B0X3N0YXRlcykge1xuICAgICAgICB2YXIgc3RhdGVzID0gb3B0X3N0YXRlcyA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICAgICAgc3RhdGVzLnB1c2godGhpcy5nZXRMYXllclN0YXRlKCkpO1xuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQHJldHVybiB7U291cmNlVHlwZX0gVGhlIGxheWVyIHNvdXJjZSAob3IgYG51bGxgIGlmIG5vdCB5ZXQgc2V0KS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpKSB8fCBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgICAgICByZXR1cm4gIXNvdXJjZSA/IFNvdXJjZVN0YXRlLlVOREVGSU5FRCA6IHNvdXJjZS5nZXRTdGF0ZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUNoYW5nZUtleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMuc291cmNlQ2hhbmdlS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlQ2hhbmdlS2V5XyA9IGxpc3Rlbihzb3VyY2UsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlU291cmNlQ2hhbmdlXywgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuZGVmYXVsdD4+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aFxuICAgICAqIGFuIGFycmF5IG9mIGZlYXR1cmVzLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmV0dXJuIHJlc29sdmUoW10pOyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZ2V0RmVhdHVyZXMocGl4ZWwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW4gY2hhcmdlIHRvIG1hbmFnZSB0aGUgcmVuZGVyaW5nIG9mIHRoZSBsYXllci4gT25lIGxheWVyIHR5cGUgaXNcbiAgICAgKiBib3VuZGVkIHdpdGggb25lIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgd2hpY2ggdGhlIHJlbmRlcmVyIG1heSAoYnV0IG5lZWQgbm90KSB1c2VcbiAgICAgKiBmb3IgcmVuZGVyaW5nIGl0cyBjb250ZW50LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICB2YXIgbGF5ZXJSZW5kZXJlciA9IHRoaXMuZ2V0UmVuZGVyZXIoKTtcbiAgICAgICAgaWYgKGxheWVyUmVuZGVyZXIucHJlcGFyZUZyYW1lKGZyYW1lU3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbGF5ZXJSZW5kZXJlci5yZW5kZXJGcmFtZShmcmFtZVN0YXRlLCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsYXllciB0byBiZSByZW5kZXJlZCBvbiB0b3Agb2Ygb3RoZXIgbGF5ZXJzIG9uIGEgbWFwLiBUaGUgbWFwIHdpbGxcbiAgICAgKiBub3QgbWFuYWdlIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGNhbGxiYWNrIGluXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI2ZvckVhY2hMYXllckF0UGl4ZWx9IHdpbGwgcmVjZWl2ZSBgbnVsbGAgYXMgbGF5ZXIuIFRoaXNcbiAgICAgKiBpcyB1c2VmdWwgZm9yIHRlbXBvcmFyeSBsYXllcnMuIFRvIHJlbW92ZSBhbiB1bm1hbmFnZWQgbGF5ZXIgZnJvbSB0aGUgbWFwLFxuICAgICAqIHVzZSBgI3NldE1hcChudWxsKWAuXG4gICAgICpcbiAgICAgKiBUbyBhZGQgdGhlIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCwgdXNlXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI2FkZExheWVyfSBpbnN0ZWFkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIGlmICh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubWFwUHJlY29tcG9zZUtleV8pO1xuICAgICAgICAgICAgdGhpcy5tYXBQcmVjb21wb3NlS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtYXApIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1hcFJlbmRlcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBSZW5kZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcCkge1xuICAgICAgICAgICAgdGhpcy5tYXBQcmVjb21wb3NlS2V5XyA9IGxpc3RlbihtYXAsIFJlbmRlckV2ZW50VHlwZS5QUkVDT01QT1NFLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlckV2ZW50ID0gXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuZGVmYXVsdH0gKi8gKGV2dCk7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSByZW5kZXJFdmVudC5mcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSB0aGlzLmdldExheWVyU3RhdGUoZmFsc2UpO1xuICAgICAgICAgICAgICAgIC8vIEEgbGF5ZXIgY2FuIG9ubHkgYmUgYWRkZWQgdG8gdGhlIG1hcCBvbmNlLiBVc2UgZWl0aGVyIGBsYXllci5zZXRNYXAoKWAgb3IgYG1hcC5hZGRMYXllcigpYCwgbm90IGJvdGguXG4gICAgICAgICAgICAgICAgYXNzZXJ0KCFsYXllclN0YXRlc0FycmF5LnNvbWUoZnVuY3Rpb24gKGFycmF5TGF5ZXJTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlMYXllclN0YXRlLmxheWVyID09PSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgICAgICAgICAgIH0pLCA2Nyk7XG4gICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZXNBcnJheS5wdXNoKGxheWVyU3RhdGUpO1xuICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBsaXN0ZW4odGhpcywgRXZlbnRUeXBlLkNIQU5HRSwgbWFwLnJlbmRlciwgbWFwKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxheWVyIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge1NvdXJjZVR5cGV9IHNvdXJjZSBUaGUgbGF5ZXIgc291cmNlLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5zZXRTb3VyY2UgPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuU09VUkNFLCBzb3VyY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBUaGUgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaGFzIGEgcmVuZGVyZXIuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmhhc1JlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnJlbmRlcmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHJlbmRlcmVyIGZvciB0aGlzIGxheWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IEEgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFNvdXJjZShudWxsKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBMYXllcjtcbn0oQmFzZUxheWVyKSk7XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGxheWVyIGlzIHZpc2libGUgYW5kIGlmIHRoZSBwcm92aWRlZCB2aWV3IHN0YXRlXG4gKiBoYXMgcmVzb2x1dGlvbiBhbmQgem9vbSBsZXZlbHMgdGhhdCBhcmUgaW4gcmFuZ2Ugb2YgdGhlIGxheWVyJ3MgbWluL21heC5cbiAqIEBwYXJhbSB7U3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuU3RhdGV9IHZpZXdTdGF0ZSBWaWV3IHN0YXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGlzIHZpc2libGUgYXQgdGhlIGdpdmVuIHZpZXcgc3RhdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSB7XG4gICAgaWYgKCFsYXllclN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgIGlmIChyZXNvbHV0aW9uIDwgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uIHx8XG4gICAgICAgIHJlc29sdXRpb24gPj0gbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHpvb20gPSB2aWV3U3RhdGUuem9vbTtcbiAgICByZXR1cm4gem9vbSA+IGxheWVyU3RhdGUubWluWm9vbSAmJiB6b29tIDw9IGxheWVyU3RhdGUubWF4Wm9vbTtcbn1cbmV4cG9ydCBkZWZhdWx0IExheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1RpbGVQcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQUkVMT0FEOiAncHJlbG9hZCcsXG4gICAgVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1I6ICd1c2VJbnRlcmltVGlsZXNPbkVycm9yJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUHJvcGVydHkuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9CYXNlVGlsZVxuICovXG5pbXBvcnQgTGF5ZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgVGlsZVByb3BlcnR5IGZyb20gJy4vVGlsZVByb3BlcnR5LmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAnY2hhbmdlOnNvdXJjZSd8J2NoYW5nZTpwcmVsb2FkJ3wnY2hhbmdlOnVzZUludGVyaW1UaWxlc09uRXJyb3InLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICdjaGFuZ2U6c291cmNlJ3wnY2hhbmdlOnByZWxvYWQnfCdjaGFuZ2U6dXNlSW50ZXJpbVRpbGVzT25FcnJvcid8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIFJldHVybj59IEJhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZVNvdXJjZVR5cGVcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3ByZWxvYWQ9MF0gUHJlbG9hZC4gTG9hZCBsb3ctcmVzb2x1dGlvbiB0aWxlcyB1cCB0byBgcHJlbG9hZGAgbGV2ZWxzLiBgMGBcbiAqIG1lYW5zIG5vIHByZWxvYWRpbmcuXG4gKiBAcHJvcGVydHkge1RpbGVTb3VyY2VUeXBlfSBbc291cmNlXSBTb3VyY2UgZm9yIHRoaXMgbGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHQjYWRkTGF5ZXIgbWFwLmFkZExheWVyKCl9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlSW50ZXJpbVRpbGVzT25FcnJvcj10cnVlXSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRm9yIGxheWVyIHNvdXJjZXMgdGhhdCBwcm92aWRlIHByZS1yZW5kZXJlZCwgdGlsZWQgaW1hZ2VzIGluIGdyaWRzIHRoYXQgYXJlXG4gKiBvcmdhbml6ZWQgYnkgem9vbSBsZXZlbHMgZm9yIHNwZWNpZmljIHJlc29sdXRpb25zLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZVNvdXJjZVR5cGVcbiAqIEBleHRlbmRzIHtMYXllcjxUaWxlU291cmNlVHlwZT59XG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlVGlsZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlVGlsZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uczxUaWxlU291cmNlVHlwZT59IFtvcHRfb3B0aW9uc10gVGlsZSBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VUaWxlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBiYXNlT3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5wcmVsb2FkO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvcjtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICBfdGhpcy5zZXRQcmVsb2FkKG9wdGlvbnMucHJlbG9hZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcmVsb2FkIDogMCk7XG4gICAgICAgIF90aGlzLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3Iob3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yXG4gICAgICAgICAgICA6IHRydWUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLmdldFByZWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FEKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxldmVsIGFzIG51bWJlciB0byB3aGljaCB3ZSB3aWxsIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuc2V0UHJlbG9hZCA9IGZ1bmN0aW9uIChwcmVsb2FkKSB7XG4gICAgICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FELCBwcmVsb2FkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1c2VJbnRlcmltVGlsZXNPbkVycm9yIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiAodXNlSW50ZXJpbVRpbGVzT25FcnJvcikge1xuICAgICAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IsIHVzZUludGVyaW1UaWxlc09uRXJyb3IpO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VUaWxlTGF5ZXI7XG59KExheWVyKSk7XG5leHBvcnQgZGVmYXVsdCBCYXNlVGlsZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZVRpbGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9MYXllclxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbi8qKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllclR5cGVcbiAqL1xudmFyIExheWVyUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllclR5cGV9IGxheWVyIExheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyUmVuZGVyZXIobGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfID0gX3RoaXMuaGFuZGxlSW1hZ2VDaGFuZ2VfLmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7TGF5ZXJUeXBlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5ZXJfID0gbGF5ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9FeGVjdXRvckdyb3VwXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWNsdXR0ZXJFeGVjdXRvckdyb3VwID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgbGF5ZXIgbGV2ZWwgaGl0IGRldGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuZGVmYXVsdD4+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aFxuICAgICAqIGFuIGFycmF5IG9mIGZlYXR1cmVzLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEZlYXR1cmVzID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciB0aGUgbGF5ZXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHRoYXQgbWF5IGJlIHVzZWQgdG8gcmVuZGVyIGNvbnRlbnQgdG8uXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSByZW5kZXJlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5sb2FkZWRUaWxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAodGlsZXMsIHpvb20sIHRpbGUpIHtcbiAgICAgICAgaWYgKCF0aWxlc1t6b29tXSkge1xuICAgICAgICAgICAgdGlsZXNbem9vbV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aWxlc1t6b29tXVt0aWxlLnRpbGVDb29yZC50b1N0cmluZygpXSA9IHRpbGU7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBmdW5jdGlvbiB0aGF0IGFkZHMgbG9hZGVkIHRpbGVzIHRvIHRoZSB0aWxlIGxvb2t1cC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24gb2YgdGhlIHRpbGVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAgICogICAgIGNhbGxlZCB3aXRoIGEgem9vbSBsZXZlbCBhbmQgYSB0aWxlIHJhbmdlIHRvIGFkZCBsb2FkZWQgdGlsZXMgdG8gdGhlIGxvb2t1cC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlTG9hZGVkVGlsZUZpbmRlciA9IGZ1bmN0aW9uIChzb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgcmFuZ2UgaXMgZnVsbHkgbG9hZGVkLlxuICAgICAgICAgKiBAdGhpcyB7TGF5ZXJSZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uICh6b29tLCB0aWxlUmFuZ2UpIHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMubG9hZGVkVGlsZUNhbGxiYWNrLmJpbmQodGhpcywgdGlsZXMsIHpvb20pO1xuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5mb3JFYWNoTG9hZGVkVGlsZShwcm9qZWN0aW9uLCB6b29tLCB0aWxlUmFuZ2UsIGNhbGxiYWNrKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9NYXAuanNcIikuSGl0TWF0Y2g8VD4+fSBtYXRjaGVzIFRoZSBoaXQgZGV0ZWN0ZWQgbWF0Y2hlcyB3aXRoIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbWF0Y2hlcykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheX0gVGhlIHJlc3VsdC4gIElmIHRoZXJlIGlzIG5vIGRhdGEgYXQgdGhlIHBpeGVsXG4gICAgICogICAgbG9jYXRpb24sIG51bGwgd2lsbCBiZSByZXR1cm5lZC4gIElmIHRoZXJlIGlzIGRhdGEsIGJ1dCBwaXhlbCB2YWx1ZXMgY2Fubm90IGJlXG4gICAgICogICAgcmV0dXJuZWQsIGFuZCBlbXB0eSBhcnJheSB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldERhdGFBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtMYXllclR5cGV9IExheWVyLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldExheWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXllcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFjdGlvbiBuZWNlc3NhcnkgdG8gZ2V0IHRoZSBsYXllciByZW5kZXJlZCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVGb250c0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoYW5nZXMgaW4gaW1hZ2Ugc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgSW1hZ2UgY2hhbmdlIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VDaGFuZ2VfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGlmIChpbWFnZS5nZXRTdGF0ZSgpID09PSBJbWFnZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBpbWFnZSBpZiBub3QgYWxyZWFkeSBsb2FkZWQsIGFuZCByZWdpc3RlciB0aGUgaW1hZ2UgY2hhbmdlXG4gICAgICogbGlzdGVuZXIgaWYgbmVlZGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vSW1hZ2VCYXNlLmpzXCIpLmRlZmF1bHR9IGltYWdlIEltYWdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgaW1hZ2UgaXMgYWxyZWFkeSBsb2FkZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5sb2FkSW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgdmFyIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkxPQURFRCAmJiBpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5ib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICBpbWFnZS5sb2FkKCk7XG4gICAgICAgICAgICBpbWFnZVN0YXRlID0gaW1hZ2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICBpZiAobGF5ZXIuZ2V0VmlzaWJsZSgpICYmIGxheWVyLmdldFNvdXJjZVN0YXRlKCkgPT0gU291cmNlU3RhdGUuUkVBRFkpIHtcbiAgICAgICAgICAgIGxheWVyLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIExheWVyUmVuZGVyZXI7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCBkZWZhdWx0IExheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VTdGF0ZVxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBJRExFOiAwLFxuICAgIExPQURJTkc6IDEsXG4gICAgTE9BREVEOiAyLFxuICAgIEVSUk9SOiAzLFxuICAgIEVNUFRZOiA0LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlU3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9FdmVudFxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG52YXIgUmVuZGVyRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlbmRlckV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gW29wdF9pbnZlcnNlUGl4ZWxUcmFuc2Zvcm1dIFRyYW5zZm9ybSBmb3JcbiAgICAgKiAgICAgQ1NTIHBpeGVscyB0byByZW5kZXJlZCBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gW29wdF9mcmFtZVN0YXRlXSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0gez9DYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IFtvcHRfY29udGV4dF0gQ29udGV4dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJFdmVudCh0eXBlLCBvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBvcHRfZnJhbWVTdGF0ZSwgb3B0X2NvbnRleHQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYW5zZm9ybSBmcm9tIENTUyBwaXhlbHMgKHJlbGF0aXZlIHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIG1hcCB2aWV3cG9ydClcbiAgICAgICAgICogdG8gcmVuZGVyZWQgcGl4ZWxzIG9uIHRoaXMgZXZlbnQncyBgY29udGV4dGAuIE9ubHkgYXZhaWxhYmxlIHdoZW4gYSBDYW52YXMgcmVuZGVyZXIgaXMgdXNlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtID0gb3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcmVuZGVyIGZyYW1lIHN0YXRlLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV8dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW52YXMgY29udGV4dC4gTm90IGF2YWlsYWJsZSB3aGVuIHRoZSBldmVudCBpcyBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAuIE9ubHkgYXZhaWxhYmxlXG4gICAgICAgICAqIHdoZW4gYSBDYW52YXMgcmVuZGVyZXIgaXMgdXNlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8bnVsbHx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHQgPSBvcHRfY29udGV4dDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gUmVuZGVyRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBSZW5kZXJFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9oYXNcbiAqL1xudmFyIHVhID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hdmlnYXRvci51c2VyQWdlbnQgIT09ICd1bmRlZmluZWQnXG4gICAgPyBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKClcbiAgICA6ICcnO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggRmlyZWZveCBhcyBicm93c2VyLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgRklSRUZPWCA9IHVhLmluZGV4T2YoJ2ZpcmVmb3gnKSAhPT0gLTE7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBTYWZhcmkgYXMgYnJvd3Nlci5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFNBRkFSSSA9IHVhLmluZGV4T2YoJ3NhZmFyaScpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdjaHJvbScpID09IC0xO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBXZWJLaXQgZW5naW5lLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgV0VCS0lUID0gdWEuaW5kZXhPZignd2Via2l0JykgIT09IC0xICYmIHVhLmluZGV4T2YoJ2VkZ2UnKSA9PSAtMTtcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgTWFjIGFzIHBsYXRmb3JtLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgTUFDID0gdWEuaW5kZXhPZignbWFjaW50b3NoJykgIT09IC0xO1xuLyoqXG4gKiBUaGUgcmF0aW8gYmV0d2VlbiBwaHlzaWNhbCBwaXhlbHMgYW5kIGRldmljZS1pbmRlcGVuZGVudCBwaXhlbHNcbiAqIChkaXBzKSBvbiB0aGUgZGV2aWNlIChgd2luZG93LmRldmljZVBpeGVsUmF0aW9gKS5cbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBERVZJQ0VfUElYRUxfUkFUSU8gPSB0eXBlb2YgZGV2aWNlUGl4ZWxSYXRpbyAhPT0gJ3VuZGVmaW5lZCcgPyBkZXZpY2VQaXhlbFJhdGlvIDogMTtcbi8qKlxuICogVGhlIGV4ZWN1dGlvbiBjb250ZXh0IGlzIGEgd29ya2VyIHdpdGggT2Zmc2NyZWVuQ2FudmFzIGF2YWlsYWJsZS5cbiAqIEBjb25zdFxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIE9mZnNjcmVlbkNhbnZhcyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGU7IC8vZXNsaW50LWRpc2FibGUtbGluZVxuLyoqXG4gKiBJbWFnZS5wcm90b3R5cGUuZGVjb2RlKCkgaXMgc3VwcG9ydGVkLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgSU1BR0VfREVDT0RFID0gdHlwZW9mIEltYWdlICE9PSAndW5kZWZpbmVkJyAmJiBJbWFnZS5wcm90b3R5cGUuZGVjb2RlO1xuLyoqXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHBhc3NpdmUgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwYXNzaXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignXycsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignXycsIG51bGwsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gcGFzc2l2ZSBub3Qgc3VwcG9ydGVkXG4gICAgfVxuICAgIHJldHVybiBwYXNzaXZlO1xufSkoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhhcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdHJhbnNmb3JtXG4gKi9cbmltcG9ydCB7IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbi8qKlxuICogQW4gYXJyYXkgcmVwcmVzZW50aW5nIGFuIGFmZmluZSAyZCB0cmFuc2Zvcm1hdGlvbiBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvdHJhbnNmb3JtfSBmdW5jdGlvbnMuIFRoZSBhcnJheSBoYXMgNiBlbGVtZW50cy5cbiAqIEB0eXBlZGVmIHshQXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQ29sbGVjdGlvbiBvZiBhZmZpbmUgMmQgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zLiBUaGUgZnVuY3Rpb25zIHdvcmsgb24gYW5cbiAqIGFycmF5IG9mIDYgZWxlbWVudHMuIFRoZSBlbGVtZW50IG9yZGVyIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgW1NWR01hdHJpeFxuICogaW50ZXJmYWNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU1ZHTWF0cml4KSBhbmQgaXNcbiAqIGEgc3Vic2V0IChlbGVtZW50cyBhIHRvIGYpIG9mIGEgM8OXMyBtYXRyaXg6XG4gKiBgYGBcbiAqIFsgYSBjIGUgXVxuICogWyBiIGQgZiBdXG4gKiBbIDAgMCAxIF1cbiAqIGBgYFxuICovXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7VHJhbnNmb3JtfVxuICovXG52YXIgdG1wXyA9IG5ldyBBcnJheSg2KTtcbi8qKlxuICogQ3JlYXRlIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IElkZW50aXR5IHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4gWzEsIDAsIDAsIDEsIDAsIDBdO1xufVxuLyoqXG4gKiBSZXNldHMgdGhlIGdpdmVuIHRyYW5zZm9ybSB0byBhbiBpZGVudGl0eSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUcmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldCh0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gc2V0KHRyYW5zZm9ybSwgMSwgMCwgMCwgMSwgMCwgMCk7XG59XG4vKipcbiAqIE11bHRpcGx5IHRoZSB1bmRlcmx5aW5nIG1hdHJpY2VzIG9mIHR3byB0cmFuc2Zvcm1zIGFuZCByZXR1cm4gdGhlIHJlc3VsdCBpblxuICogdGhlIGZpcnN0IHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBUcmFuc2Zvcm0gcGFyYW1ldGVycyBvZiBtYXRyaXggMS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBUcmFuc2Zvcm0gcGFyYW1ldGVycyBvZiBtYXRyaXggMi5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgbXVsdGlwbGllZCB3aXRoIHRyYW5zZm9ybTIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gICAgdmFyIGExID0gdHJhbnNmb3JtMVswXTtcbiAgICB2YXIgYjEgPSB0cmFuc2Zvcm0xWzFdO1xuICAgIHZhciBjMSA9IHRyYW5zZm9ybTFbMl07XG4gICAgdmFyIGQxID0gdHJhbnNmb3JtMVszXTtcbiAgICB2YXIgZTEgPSB0cmFuc2Zvcm0xWzRdO1xuICAgIHZhciBmMSA9IHRyYW5zZm9ybTFbNV07XG4gICAgdmFyIGEyID0gdHJhbnNmb3JtMlswXTtcbiAgICB2YXIgYjIgPSB0cmFuc2Zvcm0yWzFdO1xuICAgIHZhciBjMiA9IHRyYW5zZm9ybTJbMl07XG4gICAgdmFyIGQyID0gdHJhbnNmb3JtMlszXTtcbiAgICB2YXIgZTIgPSB0cmFuc2Zvcm0yWzRdO1xuICAgIHZhciBmMiA9IHRyYW5zZm9ybTJbNV07XG4gICAgdHJhbnNmb3JtMVswXSA9IGExICogYTIgKyBjMSAqIGIyO1xuICAgIHRyYW5zZm9ybTFbMV0gPSBiMSAqIGEyICsgZDEgKiBiMjtcbiAgICB0cmFuc2Zvcm0xWzJdID0gYTEgKiBjMiArIGMxICogZDI7XG4gICAgdHJhbnNmb3JtMVszXSA9IGIxICogYzIgKyBkMSAqIGQyO1xuICAgIHRyYW5zZm9ybTFbNF0gPSBhMSAqIGUyICsgYzEgKiBmMiArIGUxO1xuICAgIHRyYW5zZm9ybTFbNV0gPSBiMSAqIGUyICsgZDEgKiBmMiArIGYxO1xuICAgIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuLyoqXG4gKiBTZXQgdGhlIHRyYW5zZm9ybSBjb21wb25lbnRzIGEtZiBvbiBhIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhIFRoZSBhIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGIgVGhlIGIgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYyBUaGUgYyBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkIFRoZSBkIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGUgVGhlIGUgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZiBUaGUgZiBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IE1hdHJpeCB3aXRoIHRyYW5zZm9ybSBhcHBsaWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0KHRyYW5zZm9ybSwgYSwgYiwgYywgZCwgZSwgZikge1xuICAgIHRyYW5zZm9ybVswXSA9IGE7XG4gICAgdHJhbnNmb3JtWzFdID0gYjtcbiAgICB0cmFuc2Zvcm1bMl0gPSBjO1xuICAgIHRyYW5zZm9ybVszXSA9IGQ7XG4gICAgdHJhbnNmb3JtWzRdID0gZTtcbiAgICB0cmFuc2Zvcm1bNV0gPSBmO1xuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIFNldCB0cmFuc2Zvcm0gb24gb25lIG1hdHJpeCBmcm9tIGFub3RoZXIgbWF0cml4LlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIE1hdHJpeCB0byBzZXQgdHJhbnNmb3JtIHRvLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0yIE1hdHJpeCB0byBzZXQgdHJhbnNmb3JtIGZyb20uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIHdpdGggdHJhbnNmb3JtIGZyb20gdHJhbnNmb3JtMiBhcHBsaWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0RnJvbUFycmF5KHRyYW5zZm9ybTEsIHRyYW5zZm9ybTIpIHtcbiAgICB0cmFuc2Zvcm0xWzBdID0gdHJhbnNmb3JtMlswXTtcbiAgICB0cmFuc2Zvcm0xWzFdID0gdHJhbnNmb3JtMlsxXTtcbiAgICB0cmFuc2Zvcm0xWzJdID0gdHJhbnNmb3JtMlsyXTtcbiAgICB0cmFuc2Zvcm0xWzNdID0gdHJhbnNmb3JtMlszXTtcbiAgICB0cmFuc2Zvcm0xWzRdID0gdHJhbnNmb3JtMls0XTtcbiAgICB0cmFuc2Zvcm0xWzVdID0gdHJhbnNmb3JtMls1XTtcbiAgICByZXR1cm4gdHJhbnNmb3JtMTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gY29vcmRpbmF0ZSB3aXRoIHRoZSBnaXZlbiB0cmFuc2Zvcm0gcmV0dXJuaW5nIHRoZVxuICogcmVzdWx0aW5nLCB0cmFuc2Zvcm1lZCBjb29yZGluYXRlLiBUaGUgY29vcmRpbmF0ZSB3aWxsIGJlIG1vZGlmaWVkIGluLXBsYWNlLlxuICpcbiAqIEBwYXJhbSB7VHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybWF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlIHRvIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfGltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHJldHVybiBjb29yZGluYXRlIHNvIHRoYXQgb3BlcmF0aW9ucyBjYW4gYmVcbiAqICAgICBjaGFpbmVkIHRvZ2V0aGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHkodHJhbnNmb3JtLCBjb29yZGluYXRlKSB7XG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZVsxXTtcbiAgICBjb29yZGluYXRlWzBdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gICAgY29vcmRpbmF0ZVsxXSA9IHRyYW5zZm9ybVsxXSAqIHggKyB0cmFuc2Zvcm1bM10gKiB5ICsgdHJhbnNmb3JtWzVdO1xuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBBcHBsaWVzIHJvdGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSByb3RhdGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZSh0cmFuc2Zvcm0sIGFuZ2xlKSB7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCBjb3MsIHNpbiwgLXNpbiwgY29zLCAwLCAwKSk7XG59XG4vKipcbiAqIEFwcGxpZXMgc2NhbGUgdG8gYSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0geCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFNjYWxlIGZhY3RvciB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHNjYWxlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZSh0cmFuc2Zvcm0sIHgsIHkpIHtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgeCwgMCwgMCwgeSwgMCwgMCkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgc2NhbGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0YXJnZXQgVHJhbnNmb3JtIHRvIG92ZXJ3cml0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHkgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgc2NhbGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNjYWxlKHRhcmdldCwgeCwgeSkge1xuICAgIHJldHVybiBzZXQodGFyZ2V0LCB4LCAwLCAwLCB5LCAwLCAwKTtcbn1cbi8qKlxuICogQXBwbGllcyB0cmFuc2xhdGlvbiB0byB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4IFRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkgVHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSB0cmFuc2xhdGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZSh0cmFuc2Zvcm0sIGR4LCBkeSkge1xuICAgIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCAxLCAwLCAwLCAxLCBkeCwgZHkpKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSB0cmFuc2Zvcm0gZ2l2ZW4gYW4gaW5pdGlhbCB0cmFuc2xhdGlvbiwgc2NhbGUsIHJvdGF0aW9uLCBhbmRcbiAqIGZpbmFsIHRyYW5zbGF0aW9uIChpbiB0aGF0IG9yZGVyIG9ubHksIG5vdCBjb21tdXRhdGl2ZSkuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUaGUgdHJhbnNmb3JtICh3aWxsIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDEgSW5pdGlhbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MSBJbml0aWFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0gc3kgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gKGluIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MiBGaW5hbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MiBGaW5hbCB0cmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGNvbXBvc2l0ZSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlKHRyYW5zZm9ybSwgZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSB7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHRyYW5zZm9ybVswXSA9IHN4ICogY29zO1xuICAgIHRyYW5zZm9ybVsxXSA9IHN5ICogc2luO1xuICAgIHRyYW5zZm9ybVsyXSA9IC1zeCAqIHNpbjtcbiAgICB0cmFuc2Zvcm1bM10gPSBzeSAqIGNvcztcbiAgICB0cmFuc2Zvcm1bNF0gPSBkeDIgKiBzeCAqIGNvcyAtIGR5MiAqIHN4ICogc2luICsgZHgxO1xuICAgIHRyYW5zZm9ybVs1XSA9IGR4MiAqIHN5ICogc2luICsgZHkyICogc3kgKiBjb3MgKyBkeTE7XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSB0cmFuc2Zvcm0gZ2l2ZW4gYW4gaW5pdGlhbCB0cmFuc2xhdGlvbiwgc2NhbGUsIHJvdGF0aW9uLCBhbmRcbiAqIGZpbmFsIHRyYW5zbGF0aW9uIChpbiB0aGF0IG9yZGVyIG9ubHksIG5vdCBjb21tdXRhdGl2ZSkuIFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtXG4gKiBzdHJpbmcgY2FuIGJlIGFwcGxpZWQgYXMgYHRyYW5zZm9ybWAgcHJvcGVydHkgb2YgYW4gSFRNTEVsZW1lbnQncyBzdHlsZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDEgSW5pdGlhbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MSBJbml0aWFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0gc3kgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gKGluIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MiBGaW5hbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MiBGaW5hbCB0cmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY29tcG9zaXRlIGNzcyB0cmFuc2Zvcm0uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlQ3NzVHJhbnNmb3JtKGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICAgIHJldHVybiB0b1N0cmluZyhjb21wb3NlKGNyZWF0ZSgpLCBkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpKTtcbn1cbi8qKlxuICogSW52ZXJ0IHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHNvdXJjZSBUaGUgc291cmNlIHRyYW5zZm9ybSB0byBpbnZlcnQuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgaW52ZXJ0ZWQgKHNvdXJjZSkgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJ0KHNvdXJjZSkge1xuICAgIHJldHVybiBtYWtlSW52ZXJzZShzb3VyY2UsIHNvdXJjZSk7XG59XG4vKipcbiAqIEludmVydCB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0YXJnZXQgVHJhbnNmb3JtIHRvIGJlIHNldCBhcyB0aGUgaW52ZXJzZSBvZlxuICogICAgIHRoZSBzb3VyY2UgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBzb3VyY2UgVGhlIHNvdXJjZSB0cmFuc2Zvcm0gdG8gaW52ZXJ0LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGludmVydGVkICh0YXJnZXQpIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VJbnZlcnNlKHRhcmdldCwgc291cmNlKSB7XG4gICAgdmFyIGRldCA9IGRldGVybWluYW50KHNvdXJjZSk7XG4gICAgYXNzZXJ0KGRldCAhPT0gMCwgMzIpOyAvLyBUcmFuc2Zvcm1hdGlvbiBtYXRyaXggY2Fubm90IGJlIGludmVydGVkXG4gICAgdmFyIGEgPSBzb3VyY2VbMF07XG4gICAgdmFyIGIgPSBzb3VyY2VbMV07XG4gICAgdmFyIGMgPSBzb3VyY2VbMl07XG4gICAgdmFyIGQgPSBzb3VyY2VbM107XG4gICAgdmFyIGUgPSBzb3VyY2VbNF07XG4gICAgdmFyIGYgPSBzb3VyY2VbNV07XG4gICAgdGFyZ2V0WzBdID0gZCAvIGRldDtcbiAgICB0YXJnZXRbMV0gPSAtYiAvIGRldDtcbiAgICB0YXJnZXRbMl0gPSAtYyAvIGRldDtcbiAgICB0YXJnZXRbM10gPSBhIC8gZGV0O1xuICAgIHRhcmdldFs0XSA9IChjICogZiAtIGQgKiBlKSAvIGRldDtcbiAgICB0YXJnZXRbNV0gPSAtKGEgKiBmIC0gYiAqIGUpIC8gZGV0O1xuICAgIHJldHVybiB0YXJnZXQ7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIGRldGVybWluYW50IG9mIHRoZSBnaXZlbiBtYXRyaXguXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IG1hdCBNYXRyaXguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IERldGVybWluYW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZXJtaW5hbnQobWF0KSB7XG4gICAgcmV0dXJuIG1hdFswXSAqIG1hdFszXSAtIG1hdFsxXSAqIG1hdFsyXTtcbn1cbi8qKlxuICogQHR5cGUge0hUTUxFbGVtZW50fVxuICogQHByaXZhdGVcbiAqL1xudmFyIHRyYW5zZm9ybVN0cmluZ0Rpdjtcbi8qKlxuICogQSByb3VuZGVkIHN0cmluZyB2ZXJzaW9uIG9mIHRoZSB0cmFuc2Zvcm0uICBUaGlzIGNhbiBiZSB1c2VkXG4gKiBmb3IgQ1NTIHRyYW5zZm9ybXMuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IG1hdCBNYXRyaXguXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0cmFuc2Zvcm0gYXMgYSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhtYXQpIHtcbiAgICB2YXIgdHJhbnNmb3JtU3RyaW5nID0gJ21hdHJpeCgnICsgbWF0LmpvaW4oJywgJykgKyAnKSc7XG4gICAgaWYgKFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1TdHJpbmc7XG4gICAgfVxuICAgIHZhciBub2RlID0gdHJhbnNmb3JtU3RyaW5nRGl2IHx8ICh0cmFuc2Zvcm1TdHJpbmdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgbm9kZS5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm1TdHJpbmc7XG4gICAgcmV0dXJuIG5vZGUuc3R5bGUudHJhbnNmb3JtO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnQvQ29ybmVyXG4gKi9cbi8qKlxuICogRXh0ZW50IGNvcm5lci5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBCT1RUT01fTEVGVDogJ2JvdHRvbS1sZWZ0JyxcbiAgICBCT1RUT01fUklHSFQ6ICdib3R0b20tcmlnaHQnLFxuICAgIFRPUF9MRUZUOiAndG9wLWxlZnQnLFxuICAgIFRPUF9SSUdIVDogJ3RvcC1yaWdodCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29ybmVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnRcbiAqL1xuaW1wb3J0IENvcm5lciBmcm9tICcuL2V4dGVudC9Db3JuZXIuanMnO1xuaW1wb3J0IFJlbGF0aW9uc2hpcCBmcm9tICcuL2V4dGVudC9SZWxhdGlvbnNoaXAuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4gZXh0ZW50OiBgW21pbngsIG1pbnksIG1heHgsIG1heHldYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBFeHRlbnRcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBCdWlsZCBhbiBleHRlbnQgdGhhdCBpbmNsdWRlcyBhbGwgZ2l2ZW4gY29vcmRpbmF0ZXMuXG4gKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7RXh0ZW50fSBCb3VuZGluZyBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBib3VuZGluZ0V4dGVudChjb29yZGluYXRlcykge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGVzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4cyBYcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geXMgWXMuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZnVuY3Rpb24gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgb3B0X2V4dGVudCkge1xuICAgIHZhciBtaW5YID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeXMpO1xuICAgIHZhciBtYXhYID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeHMpO1xuICAgIHZhciBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeXMpO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogUmV0dXJuIGV4dGVudCBpbmNyZWFzZWQgYnkgdGhlIHByb3ZpZGVkIHZhbHVlLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGFtb3VudCBieSB3aGljaCB0aGUgZXh0ZW50IHNob3VsZCBiZSBidWZmZXJlZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXIoZXh0ZW50LCB2YWx1ZSwgb3B0X2V4dGVudCkge1xuICAgIGlmIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF0gLSB2YWx1ZTtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXSAtIHZhbHVlO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdICsgdmFsdWU7XG4gICAgICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM10gKyB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZXh0ZW50WzBdIC0gdmFsdWUsXG4gICAgICAgICAgICBleHRlbnRbMV0gLSB2YWx1ZSxcbiAgICAgICAgICAgIGV4dGVudFsyXSArIHZhbHVlLFxuICAgICAgICAgICAgZXh0ZW50WzNdICsgdmFsdWUsXG4gICAgICAgIF07XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEgY2xvbmUgb2YgYW4gZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50IHRvIGNsb25lLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IFRoZSBjbG9uZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lKGV4dGVudCwgb3B0X2V4dGVudCkge1xuICAgIGlmIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIG9wdF9leHRlbnRbMF0gPSBleHRlbnRbMF07XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBleHRlbnRbMV07XG4gICAgICAgIG9wdF9leHRlbnRbMl0gPSBleHRlbnRbMl07XG4gICAgICAgIG9wdF9leHRlbnRbM10gPSBleHRlbnRbM107XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudC5zbGljZSgpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge251bWJlcn0gQ2xvc2VzdCBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKGV4dGVudCwgeCwgeSkge1xuICAgIHZhciBkeCwgZHk7XG4gICAgaWYgKHggPCBleHRlbnRbMF0pIHtcbiAgICAgICAgZHggPSBleHRlbnRbMF0gLSB4O1xuICAgIH1cbiAgICBlbHNlIGlmIChleHRlbnRbMl0gPCB4KSB7XG4gICAgICAgIGR4ID0geCAtIGV4dGVudFsyXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGR4ID0gMDtcbiAgICB9XG4gICAgaWYgKHkgPCBleHRlbnRbMV0pIHtcbiAgICAgICAgZHkgPSBleHRlbnRbMV0gLSB5O1xuICAgIH1cbiAgICBlbHNlIGlmIChleHRlbnRbM10gPCB5KSB7XG4gICAgICAgIGR5ID0geSAtIGV4dGVudFszXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGR5ID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgaW4gdGhlIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xufVxuLyoqXG4gKiBDaGVjayBpZiBvbmUgZXh0ZW50IGNvbnRhaW5zIGFub3RoZXIuXG4gKlxuICogQW4gZXh0ZW50IGlzIGRlZW1lZCBjb250YWluZWQgaWYgaXQgbGllcyBjb21wbGV0ZWx5IHdpdGhpbiB0aGUgb3RoZXIgZXh0ZW50LFxuICogaW5jbHVkaW5nIGlmIHRoZXkgc2hhcmUgb25lIG9yIG1vcmUgZWRnZXMuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzZWNvbmQgZXh0ZW50IGlzIGNvbnRhaW5lZCBieSBvciBvbiB0aGUgZWRnZSBvZiB0aGVcbiAqICAgICBmaXJzdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zRXh0ZW50KGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICByZXR1cm4gKGV4dGVudDFbMF0gPD0gZXh0ZW50MlswXSAmJlxuICAgICAgICBleHRlbnQyWzJdIDw9IGV4dGVudDFbMl0gJiZcbiAgICAgICAgZXh0ZW50MVsxXSA8PSBleHRlbnQyWzFdICYmXG4gICAgICAgIGV4dGVudDJbM10gPD0gZXh0ZW50MVszXSk7XG59XG4vKipcbiAqIENoZWNrIGlmIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBpcyBjb250YWluZWQgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFggY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB4LCB5IHZhbHVlcyBhcmUgY29udGFpbmVkIGluIHRoZSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc1hZKGV4dGVudCwgeCwgeSkge1xuICAgIHJldHVybiBleHRlbnRbMF0gPD0geCAmJiB4IDw9IGV4dGVudFsyXSAmJiBleHRlbnRbMV0gPD0geSAmJiB5IDw9IGV4dGVudFszXTtcbn1cbi8qKlxuICogR2V0IHRoZSByZWxhdGlvbnNoaXAgYmV0d2VlbiBhIGNvb3JkaW5hdGUgYW5kIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC9SZWxhdGlvbnNoaXAuanNcIikuZGVmYXVsdH0gVGhlIHJlbGF0aW9uc2hpcCAoYml0d2lzZSBjb21wYXJlIHdpdGhcbiAqICAgICBpbXBvcnQoXCIuL2V4dGVudC9SZWxhdGlvbnNoaXAuanNcIikuUmVsYXRpb25zaGlwKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgdmFyIG1pblggPSBleHRlbnRbMF07XG4gICAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gICAgdmFyIG1heFggPSBleHRlbnRbMl07XG4gICAgdmFyIG1heFkgPSBleHRlbnRbM107XG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLlVOS05PV047XG4gICAgaWYgKHggPCBtaW5YKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5MRUZUO1xuICAgIH1cbiAgICBlbHNlIGlmICh4ID4gbWF4WCkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuUklHSFQ7XG4gICAgfVxuICAgIGlmICh5IDwgbWluWSkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuQkVMT1c7XG4gICAgfVxuICAgIGVsc2UgaWYgKHkgPiBtYXhZKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5BQk9WRTtcbiAgICB9XG4gICAgaWYgKHJlbGF0aW9uc2hpcCA9PT0gUmVsYXRpb25zaGlwLlVOS05PV04pIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORztcbiAgICB9XG4gICAgcmV0dXJuIHJlbGF0aW9uc2hpcDtcbn1cbi8qKlxuICogQ3JlYXRlIGFuIGVtcHR5IGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRW1wdHkgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRW1wdHkoKSB7XG4gICAgcmV0dXJuIFtJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5XTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGV4dGVudCBvciB1cGRhdGUgdGhlIHByb3ZpZGVkIGV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IG1pblg7XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBtaW5ZO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gbWF4WDtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IG1heFk7XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBlbXB0eSBleHRlbnQgb3IgbWFrZSB0aGUgcHJvdmlkZWQgb25lIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCkge1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5LCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgb3B0X2V4dGVudCkge1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKHgsIHksIHgsIHksIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCBjb29yZGluYXRlcyk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgb3B0X2V4dGVudCkge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICAgIHJldHVybiBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbVJpbmdzKHJpbmdzLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCk7XG4gICAgcmV0dXJuIGV4dGVuZFJpbmdzKGV4dGVudCwgcmluZ3MpO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGVxdWl2YWxlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICByZXR1cm4gKGV4dGVudDFbMF0gPT0gZXh0ZW50MlswXSAmJlxuICAgICAgICBleHRlbnQxWzJdID09IGV4dGVudDJbMl0gJiZcbiAgICAgICAgZXh0ZW50MVsxXSA9PSBleHRlbnQyWzFdICYmXG4gICAgICAgIGV4dGVudDFbM10gPT0gZXh0ZW50MlszXSk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0d28gZXh0ZW50cyBhcmUgYXBwcm94aW1hdGVseSBlcXVpdmFsZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlIGluIGV4dGVudCBjb29yZGluYXRlIHVuaXRzLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGRpZmZlciBieSBsZXNzIHRoYW4gdGhlIHRvbGVyYW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcHJveGltYXRlbHlFcXVhbHMoZXh0ZW50MSwgZXh0ZW50MiwgdG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIChNYXRoLmFicyhleHRlbnQxWzBdIC0gZXh0ZW50MlswXSkgPCB0b2xlcmFuY2UgJiZcbiAgICAgICAgTWF0aC5hYnMoZXh0ZW50MVsyXSAtIGV4dGVudDJbMl0pIDwgdG9sZXJhbmNlICYmXG4gICAgICAgIE1hdGguYWJzKGV4dGVudDFbMV0gLSBleHRlbnQyWzFdKSA8IHRvbGVyYW5jZSAmJlxuICAgICAgICBNYXRoLmFicyhleHRlbnQxWzNdIC0gZXh0ZW50MlszXSkgPCB0b2xlcmFuY2UpO1xufVxuLyoqXG4gKiBNb2RpZnkgYW4gZXh0ZW50IHRvIGluY2x1ZGUgYW5vdGhlciBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBUaGUgZXh0ZW50IHRvIGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgVGhlIGV4dGVudCB0aGF0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGZpcnN0LlxuICogQHJldHVybiB7RXh0ZW50fSBBIHJlZmVyZW5jZSB0byB0aGUgZmlyc3QgKGV4dGVuZGVkKSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIGlmIChleHRlbnQyWzBdIDwgZXh0ZW50MVswXSkge1xuICAgICAgICBleHRlbnQxWzBdID0gZXh0ZW50MlswXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDJbMl0gPiBleHRlbnQxWzJdKSB7XG4gICAgICAgIGV4dGVudDFbMl0gPSBleHRlbnQyWzJdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MlsxXSA8IGV4dGVudDFbMV0pIHtcbiAgICAgICAgZXh0ZW50MVsxXSA9IGV4dGVudDJbMV07XG4gICAgfVxuICAgIGlmIChleHRlbnQyWzNdID4gZXh0ZW50MVszXSkge1xuICAgICAgICBleHRlbnQxWzNdID0gZXh0ZW50MlszXTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDE7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgICBpZiAoY29vcmRpbmF0ZVswXSA8IGV4dGVudFswXSkge1xuICAgICAgICBleHRlbnRbMF0gPSBjb29yZGluYXRlWzBdO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZVswXSA+IGV4dGVudFsyXSkge1xuICAgICAgICBleHRlbnRbMl0gPSBjb29yZGluYXRlWzBdO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZVsxXSA8IGV4dGVudFsxXSkge1xuICAgICAgICBleHRlbnRbMV0gPSBjb29yZGluYXRlWzFdO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZVsxXSA+IGV4dGVudFszXSkge1xuICAgICAgICBleHRlbnRbM10gPSBjb29yZGluYXRlWzFdO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgY29vcmRpbmF0ZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICBleHRlbmRYWShleHRlbnQsIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gcmluZ3MgUmluZ3MuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFJpbmdzKGV4dGVudCwgcmluZ3MpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSByaW5ncy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgcmluZ3NbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kWFkoZXh0ZW50LCB4LCB5KSB7XG4gICAgZXh0ZW50WzBdID0gTWF0aC5taW4oZXh0ZW50WzBdLCB4KTtcbiAgICBleHRlbnRbMV0gPSBNYXRoLm1pbihleHRlbnRbMV0sIHkpO1xuICAgIGV4dGVudFsyXSA9IE1hdGgubWF4KGV4dGVudFsyXSwgeCk7XG4gICAgZXh0ZW50WzNdID0gTWF0aC5tYXgoZXh0ZW50WzNdLCB5KTtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIGNvcm5lciBvZiB0aGUgZXh0ZW50LiBJZiB0aGVcbiAqIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdCB2YWx1ZVxuICogaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogU30gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcmV0dXJuIHtTfGJvb2xlYW59IFZhbHVlLlxuICogQHRlbXBsYXRlIFNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hDb3JuZXIoZXh0ZW50LCBjYWxsYmFjaykge1xuICAgIHZhciB2YWw7XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0Qm90dG9tTGVmdChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbVJpZ2h0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0VG9wUmlnaHQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICB2YWwgPSBjYWxsYmFjayhnZXRUb3BMZWZ0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNpemUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmVhKGV4dGVudCkge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICBpZiAoIWlzRW1wdHkoZXh0ZW50KSkge1xuICAgICAgICBhcmVhID0gZ2V0V2lkdGgoZXh0ZW50KSAqIGdldEhlaWdodChleHRlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8qKlxuICogR2V0IHRoZSBib3R0b20gbGVmdCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEJvdHRvbSBsZWZ0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3R0b21MZWZ0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIGJvdHRvbSByaWdodCBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEJvdHRvbSByaWdodCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMl0sIGV4dGVudFsxXV07XG59XG4vKipcbiAqIEdldCB0aGUgY2VudGVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ2VudGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q2VudGVyKGV4dGVudCkge1xuICAgIHJldHVybiBbKGV4dGVudFswXSArIGV4dGVudFsyXSkgLyAyLCAoZXh0ZW50WzFdICsgZXh0ZW50WzNdKSAvIDJdO1xufVxuLyoqXG4gKiBHZXQgYSBjb3JuZXIgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQvQ29ybmVyLmpzXCIpLmRlZmF1bHR9IGNvcm5lciBDb3JuZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29ybmVyIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JuZXIoZXh0ZW50LCBjb3JuZXIpIHtcbiAgICB2YXIgY29vcmRpbmF0ZTtcbiAgICBpZiAoY29ybmVyID09PSBDb3JuZXIuQk9UVE9NX0xFRlQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldEJvdHRvbUxlZnQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuQk9UVE9NX1JJR0hUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5UT1BfTEVGVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChjb3JuZXIgPT09IENvcm5lci5UT1BfUklHSFQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3NlcnQoZmFsc2UsIDEzKTsgLy8gSW52YWxpZCBjb3JuZXJcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVubGFyZ2VkIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbmxhcmdlZEFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHZhciBtaW5YID0gTWF0aC5taW4oZXh0ZW50MVswXSwgZXh0ZW50MlswXSk7XG4gICAgdmFyIG1pblkgPSBNYXRoLm1pbihleHRlbnQxWzFdLCBleHRlbnQyWzFdKTtcbiAgICB2YXIgbWF4WCA9IE1hdGgubWF4KGV4dGVudDFbMl0sIGV4dGVudDJbMl0pO1xuICAgIHZhciBtYXhZID0gTWF0aC5tYXgoZXh0ZW50MVszXSwgZXh0ZW50MlszXSk7XG4gICAgcmV0dXJuIChtYXhYIC0gbWluWCkgKiAobWF4WSAtIG1pblkpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGR4ID0gKHJlc29sdXRpb24gKiBzaXplWzBdKSAvIDI7XG4gICAgdmFyIGR5ID0gKHJlc29sdXRpb24gKiBzaXplWzFdKSAvIDI7XG4gICAgdmFyIGNvc1JvdGF0aW9uID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgIHZhciBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICB2YXIgeENvcyA9IGR4ICogY29zUm90YXRpb247XG4gICAgdmFyIHhTaW4gPSBkeCAqIHNpblJvdGF0aW9uO1xuICAgIHZhciB5Q29zID0gZHkgKiBjb3NSb3RhdGlvbjtcbiAgICB2YXIgeVNpbiA9IGR5ICogc2luUm90YXRpb247XG4gICAgdmFyIHggPSBjZW50ZXJbMF07XG4gICAgdmFyIHkgPSBjZW50ZXJbMV07XG4gICAgdmFyIHgwID0geCAtIHhDb3MgKyB5U2luO1xuICAgIHZhciB4MSA9IHggLSB4Q29zIC0geVNpbjtcbiAgICB2YXIgeDIgPSB4ICsgeENvcyAtIHlTaW47XG4gICAgdmFyIHgzID0geCArIHhDb3MgKyB5U2luO1xuICAgIHZhciB5MCA9IHkgLSB4U2luIC0geUNvcztcbiAgICB2YXIgeTEgPSB5IC0geFNpbiArIHlDb3M7XG4gICAgdmFyIHkyID0geSArIHhTaW4gKyB5Q29zO1xuICAgIHZhciB5MyA9IHkgKyB4U2luIC0geUNvcztcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoTWF0aC5taW4oeDAsIHgxLCB4MiwgeDMpLCBNYXRoLm1pbih5MCwgeTEsIHkyLCB5MyksIE1hdGgubWF4KHgwLCB4MSwgeDIsIHgzKSwgTWF0aC5tYXgoeTAsIHkxLCB5MiwgeTMpLCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogR2V0IHRoZSBoZWlnaHQgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEhlaWdodChleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzNdIC0gZXh0ZW50WzFdO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnNlY3Rpb24gYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbkFyZWEoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Mik7XG4gICAgcmV0dXJuIGdldEFyZWEoaW50ZXJzZWN0aW9uKTtcbn1cbi8qKlxuICogR2V0IHRoZSBpbnRlcnNlY3Rpb24gb2YgdHdvIGV4dGVudHMuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBPcHRpb25hbCBleHRlbnQgdG8gcG9wdWxhdGUgd2l0aCBpbnRlcnNlY3Rpb24uXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEludGVyc2VjdGluZyBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50MSwgZXh0ZW50Miwgb3B0X2V4dGVudCkge1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBvcHRfZXh0ZW50ID8gb3B0X2V4dGVudCA6IGNyZWF0ZUVtcHR5KCk7XG4gICAgaWYgKGludGVyc2VjdHMoZXh0ZW50MSwgZXh0ZW50MikpIHtcbiAgICAgICAgaWYgKGV4dGVudDFbMF0gPiBleHRlbnQyWzBdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMF0gPSBleHRlbnQxWzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MlswXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50MVsxXSA+IGV4dGVudDJbMV0pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsxXSA9IGV4dGVudDFbMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQyWzFdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnQxWzJdIDwgZXh0ZW50MlsyXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzJdID0gZXh0ZW50MVsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDJbMl07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dGVudDFbM10gPCBleHRlbnQyWzNdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bM10gPSBleHRlbnQxWzNdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MlszXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eShpbnRlcnNlY3Rpb24pO1xuICAgIH1cbiAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWFyZ2luLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFyZ2luKGV4dGVudCkge1xuICAgIHJldHVybiBnZXRXaWR0aChleHRlbnQpICsgZ2V0SGVpZ2h0KGV4dGVudCk7XG59XG4vKipcbiAqIEdldCB0aGUgc2l6ZSAod2lkdGgsIGhlaWdodCkgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFRoZSBleHRlbnQgc2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNpemUoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMl0gLSBleHRlbnRbMF0sIGV4dGVudFszXSAtIGV4dGVudFsxXV07XG59XG4vKipcbiAqIEdldCB0aGUgdG9wIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9wTGVmdChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFswXSwgZXh0ZW50WzNdXTtcbn1cbi8qKlxuICogR2V0IHRoZSB0b3AgcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUb3AgcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcFJpZ2h0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbM11dO1xufVxuLyoqXG4gKiBHZXQgdGhlIHdpZHRoIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpZHRoKGV4dGVudCkge1xuICAgIHJldHVybiBleHRlbnRbMl0gLSBleHRlbnRbMF07XG59XG4vKipcbiAqIERldGVybWluZSBpZiBvbmUgZXh0ZW50IGludGVyc2VjdHMgYW5vdGhlci5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGludGVyc2VjdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHMoZXh0ZW50MSwgZXh0ZW50Mikge1xuICAgIHJldHVybiAoZXh0ZW50MVswXSA8PSBleHRlbnQyWzJdICYmXG4gICAgICAgIGV4dGVudDFbMl0gPj0gZXh0ZW50MlswXSAmJlxuICAgICAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbM10gJiZcbiAgICAgICAgZXh0ZW50MVszXSA+PSBleHRlbnQyWzFdKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIGV4dGVudCBpcyBlbXB0eS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KGV4dGVudCkge1xuICAgIHJldHVybiBleHRlbnRbMl0gPCBleHRlbnRbMF0gfHwgZXh0ZW50WzNdIDwgZXh0ZW50WzFdO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXR1cm5PclVwZGF0ZShleHRlbnQsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBleHRlbnQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlRnJvbUNlbnRlcihleHRlbnQsIHZhbHVlKSB7XG4gICAgdmFyIGRlbHRhWCA9ICgoZXh0ZW50WzJdIC0gZXh0ZW50WzBdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gICAgdmFyIGRlbHRhWSA9ICgoZXh0ZW50WzNdIC0gZXh0ZW50WzFdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gICAgZXh0ZW50WzBdIC09IGRlbHRhWDtcbiAgICBleHRlbnRbMl0gKz0gZGVsdGFYO1xuICAgIGV4dGVudFsxXSAtPSBkZWx0YVk7XG4gICAgZXh0ZW50WzNdICs9IGRlbHRhWTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoZSBzZWdtZW50IGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzIGludGVyc2VjdHMgKGNyb3NzZXMsXG4gKiB0b3VjaGVzLCBvciBpcyBjb250YWluZWQgYnkpIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBzdGFydCBTZWdtZW50IHN0YXJ0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBlbmQgU2VnbWVudCBlbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzZWdtZW50IGludGVyc2VjdHMgdGhlIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgc3RhcnQsIGVuZCkge1xuICAgIHZhciBpbnRlcnNlY3RzID0gZmFsc2U7XG4gICAgdmFyIHN0YXJ0UmVsID0gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIHN0YXJ0KTtcbiAgICB2YXIgZW5kUmVsID0gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIGVuZCk7XG4gICAgaWYgKHN0YXJ0UmVsID09PSBSZWxhdGlvbnNoaXAuSU5URVJTRUNUSU5HIHx8XG4gICAgICAgIGVuZFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORykge1xuICAgICAgICBpbnRlcnNlY3RzID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgICAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICAgICAgdmFyIG1heFggPSBleHRlbnRbMl07XG4gICAgICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgICAgICB2YXIgc3RhcnRYID0gc3RhcnRbMF07XG4gICAgICAgIHZhciBzdGFydFkgPSBzdGFydFsxXTtcbiAgICAgICAgdmFyIGVuZFggPSBlbmRbMF07XG4gICAgICAgIHZhciBlbmRZID0gZW5kWzFdO1xuICAgICAgICB2YXIgc2xvcGUgPSAoZW5kWSAtIHN0YXJ0WSkgLyAoZW5kWCAtIHN0YXJ0WCk7XG4gICAgICAgIHZhciB4ID0gdm9pZCAwLCB5ID0gdm9pZCAwO1xuICAgICAgICBpZiAoISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSAmJiAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkFCT1ZFKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyB0b3BcbiAgICAgICAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtYXhZKSAvIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuUklHSFQpICYmXG4gICAgICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyByaWdodFxuICAgICAgICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1heFgpICogc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdHMgJiZcbiAgICAgICAgICAgICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5CRUxPVykgJiZcbiAgICAgICAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpKSB7XG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBpbnRlcnNlY3RzIGJvdHRvbVxuICAgICAgICAgICAgeCA9IGVuZFggLSAoZW5kWSAtIG1pblkpIC8gc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geCA+PSBtaW5YICYmIHggPD0gbWF4WDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWludGVyc2VjdHMgJiZcbiAgICAgICAgICAgICEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKSAmJlxuICAgICAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5MRUZUKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBsZWZ0XG4gICAgICAgICAgICB5ID0gZW5kWSAtIChlbmRYIC0gbWluWCkgKiBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB5ID49IG1pblkgJiYgeSA8PSBtYXhZO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbnRlcnNlY3RzO1xufVxuLyoqXG4gKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogQ2FsbGVkIHdpdGggYFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXWAgZXh0ZW50IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zdG9wc10gTnVtYmVyIG9mIHN0b3BzIHBlciBzaWRlIHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm0uXG4gKiBCeSBkZWZhdWx0IG9ubHkgdGhlIGNvcm5lcnMgYXJlIHVzZWQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5VHJhbnNmb3JtKGV4dGVudCwgdHJhbnNmb3JtRm4sIG9wdF9leHRlbnQsIG9wdF9zdG9wcykge1xuICAgIHZhciBjb29yZGluYXRlcyA9IFtdO1xuICAgIGlmIChvcHRfc3RvcHMgPiAxKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IGV4dGVudFsyXSAtIGV4dGVudFswXTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGV4dGVudFszXSAtIGV4dGVudFsxXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHRfc3RvcHM7ICsraSkge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMucHVzaChleHRlbnRbMF0gKyAod2lkdGggKiBpKSAvIG9wdF9zdG9wcywgZXh0ZW50WzFdLCBleHRlbnRbMl0sIGV4dGVudFsxXSArIChoZWlnaHQgKiBpKSAvIG9wdF9zdG9wcywgZXh0ZW50WzJdIC0gKHdpZHRoICogaSkgLyBvcHRfc3RvcHMsIGV4dGVudFszXSwgZXh0ZW50WzBdLCBleHRlbnRbM10gLSAoaGVpZ2h0ICogaSkgLyBvcHRfc3RvcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb29yZGluYXRlcyA9IFtcbiAgICAgICAgICAgIGV4dGVudFswXSxcbiAgICAgICAgICAgIGV4dGVudFsxXSxcbiAgICAgICAgICAgIGV4dGVudFsyXSxcbiAgICAgICAgICAgIGV4dGVudFsxXSxcbiAgICAgICAgICAgIGV4dGVudFsyXSxcbiAgICAgICAgICAgIGV4dGVudFszXSxcbiAgICAgICAgICAgIGV4dGVudFswXSxcbiAgICAgICAgICAgIGV4dGVudFszXSxcbiAgICAgICAgXTtcbiAgICB9XG4gICAgdHJhbnNmb3JtRm4oY29vcmRpbmF0ZXMsIGNvb3JkaW5hdGVzLCAyKTtcbiAgICB2YXIgeHMgPSBbXTtcbiAgICB2YXIgeXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICB4cy5wdXNoKGNvb3JkaW5hdGVzW2ldKTtcbiAgICAgICAgeXMucHVzaChjb29yZGluYXRlc1tpICsgMV0pO1xuICAgIH1cbiAgICByZXR1cm4gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIE1vZGlmaWVzIHRoZSBwcm92aWRlZCBleHRlbnQgaW4tcGxhY2UgdG8gYmUgd2l0aGluIHRoZSByZWFsIHdvcmxkXG4gKiBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvblxuICogQHJldHVybiB7RXh0ZW50fSBUaGUgZXh0ZW50IHdpdGhpbiB0aGUgcmVhbCB3b3JsZCBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwWChleHRlbnQsIHByb2plY3Rpb24pIHtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGNlbnRlciA9IGdldENlbnRlcihleHRlbnQpO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgKGNlbnRlclswXSA8IHByb2plY3Rpb25FeHRlbnRbMF0gfHwgY2VudGVyWzBdID49IHByb2plY3Rpb25FeHRlbnRbMl0pKSB7XG4gICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgIHZhciB3b3JsZHNBd2F5ID0gTWF0aC5mbG9vcigoY2VudGVyWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyB3b3JsZFdpZHRoKTtcbiAgICAgICAgdmFyIG9mZnNldCA9IHdvcmxkc0F3YXkgKiB3b3JsZFdpZHRoO1xuICAgICAgICBleHRlbnRbMF0gLT0gb2Zmc2V0O1xuICAgICAgICBleHRlbnRbMl0gLT0gb2Zmc2V0O1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXh0ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnQvUmVsYXRpb25zaGlwXG4gKi9cbi8qKlxuICogUmVsYXRpb25zaGlwIHRvIGFuIGV4dGVudC5cbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBVTktOT1dOOiAwLFxuICAgIElOVEVSU0VDVElORzogMSxcbiAgICBBQk9WRTogMixcbiAgICBSSUdIVDogNCxcbiAgICBCRUxPVzogOCxcbiAgICBMRUZUOiAxNixcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1SZWxhdGlvbnNoaXAuanMubWFwIiwiaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuL2hhcy5qcyc7XG4vKipcbiAqIEBtb2R1bGUgb2wvZG9tXG4gKi9cbi8vRklYTUUgTW92ZSB0aGlzIGZ1bmN0aW9uIHRvIHRoZSBjYW52YXMgbW9kdWxlXG4vKipcbiAqIENyZWF0ZSBhbiBodG1sIGNhbnZhcyBlbGVtZW50IGFuZCByZXR1cm5zIGl0cyAyZCBjb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfd2lkdGhdIENhbnZhcyB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2hlaWdodF0gQ2FudmFzIGhlaWdodC5cbiAqIEBwYXJhbSB7QXJyYXk8SFRNTENhbnZhc0VsZW1lbnQ+fSBbb3B0X2NhbnZhc1Bvb2xdIENhbnZhcyBwb29sIHRvIHRha2UgZXhpc3RpbmcgY2FudmFzIGZyb20uXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRFNldHRpbmdzfSBbb3B0X0NvbnRleHQyRFNldHRpbmdzXSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc1xuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBUaGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0NvbnRleHQyRChvcHRfd2lkdGgsIG9wdF9oZWlnaHQsIG9wdF9jYW52YXNQb29sLCBvcHRfQ29udGV4dDJEU2V0dGluZ3MpIHtcbiAgICB2YXIgY2FudmFzID0gb3B0X2NhbnZhc1Bvb2wgJiYgb3B0X2NhbnZhc1Bvb2wubGVuZ3RoXG4gICAgICAgID8gb3B0X2NhbnZhc1Bvb2wuc2hpZnQoKVxuICAgICAgICA6IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTXG4gICAgICAgICAgICA/IG5ldyBPZmZzY3JlZW5DYW52YXMob3B0X3dpZHRoIHx8IDMwMCwgb3B0X2hlaWdodCB8fCAzMDApXG4gICAgICAgICAgICA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGlmIChvcHRfd2lkdGgpIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gb3B0X3dpZHRoO1xuICAgIH1cbiAgICBpZiAob3B0X2hlaWdodCkge1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0X2hlaWdodDtcbiAgICB9XG4gICAgLy9GSVhNRSBBbGxvdyBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgYXMgcmV0dXJuIHR5cGVcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9ICovIChjYW52YXMuZ2V0Q29udGV4dCgnMmQnLCBvcHRfQ29udGV4dDJEU2V0dGluZ3MpKTtcbn1cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIHdpZHRoIGZvciB0aGUgZ2l2ZW4gZWxlbWVudCBpbmNsdWRpbmcgbWFyZ2luLFxuICogcGFkZGluZyBhbmQgYm9yZGVyLlxuICogRXF1aXZhbGVudCB0byBqUXVlcnkncyBgJChlbCkub3V0ZXJXaWR0aCh0cnVlKWAuXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlcldpZHRoKGVsZW1lbnQpIHtcbiAgICB2YXIgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgd2lkdGggKz0gcGFyc2VJbnQoc3R5bGUubWFyZ2luTGVmdCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luUmlnaHQsIDEwKTtcbiAgICByZXR1cm4gd2lkdGg7XG59XG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBjb21wdXRlZCBoZWlnaHQgZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlckhlaWdodCh0cnVlKWAuXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaGVpZ2h0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0ZXJIZWlnaHQoZWxlbWVudCkge1xuICAgIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgIGhlaWdodCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5Ub3AsIDEwKSArIHBhcnNlSW50KHN0eWxlLm1hcmdpbkJvdHRvbSwgMTApO1xuICAgIHJldHVybiBoZWlnaHQ7XG59XG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZSBOb2RlIHRvIHJlcGxhY2Ugb2xkIG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gb2xkTm9kZSBUaGUgbm9kZSB0byBiZSByZXBsYWNlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZU5vZGUobmV3Tm9kZSwgb2xkTm9kZSkge1xuICAgIHZhciBwYXJlbnQgPSBvbGROb2RlLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIG9sZE5vZGUpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm4ge05vZGV9IFRoZSBub2RlIHRoYXQgd2FzIHJlbW92ZWQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIG5vZGUucGFyZW50Tm9kZSA/IG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKSA6IG51bGw7XG59XG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmUgdGhlIGNoaWxkcmVuIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7XG4gICAgd2hpbGUgKG5vZGUubGFzdENoaWxkKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCBub2RlIHNvIHRoZXkgbWF0Y2ggdGhlXG4gKiBwcm92aWRlZCBsaXN0IG9mIGNoaWxkcmVuLiAgVGhpcyBmdW5jdGlvbiBhaW1zIHRvIGVmZmljaWVudGx5XG4gKiByZW1vdmUsIGFkZCwgYW5kIHJlb3JkZXIgY2hpbGQgbm9kZXMgd2hpbGUgbWFpbnRhaW5pbmcgYSBzaW1wbGVcbiAqIGltcGxlbWVudGF0aW9uIChpdCBpcyBub3QgZ3VhcmFudGVlZCB0byBtaW5pbWl6ZSBET00gb3BlcmF0aW9ucykuXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIHBhcmVudCBub2RlIHdob3NlIGNoaWxkcmVuIG5lZWQgcmV3b3JraW5nLlxuICogQHBhcmFtIHtBcnJheTxOb2RlPn0gY2hpbGRyZW4gVGhlIGRlc2lyZWQgY2hpbGRyZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQ2hpbGRyZW4obm9kZSwgY2hpbGRyZW4pIHtcbiAgICB2YXIgb2xkQ2hpbGRyZW4gPSBub2RlLmNoaWxkTm9kZXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IHRydWU7ICsraSkge1xuICAgICAgICB2YXIgb2xkQ2hpbGQgPSBvbGRDaGlsZHJlbltpXTtcbiAgICAgICAgdmFyIG5ld0NoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIC8vIGNoZWNrIGlmIG91ciB3b3JrIGlzIGRvbmVcbiAgICAgICAgaWYgKCFvbGRDaGlsZCAmJiAhbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGNoaWxkcmVuIG1hdGNoXG4gICAgICAgIGlmIChvbGRDaGlsZCA9PT0gbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGEgbmV3IGNoaWxkIG5lZWRzIHRvIGJlIGFkZGVkXG4gICAgICAgIGlmICghb2xkQ2hpbGQpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgYW4gb2xkIGNoaWxkIG5lZWRzIHRvIGJlIHJlbW92ZWRcbiAgICAgICAgaWYgKCFuZXdDaGlsZCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChvbGRDaGlsZCk7XG4gICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW9yZGVyXG4gICAgICAgIG5vZGUuaW5zZXJ0QmVmb3JlKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyXG4gKi9cbmltcG9ydCBMYXllclJlbmRlcmVyIGZyb20gJy4uL0xheWVyLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudCBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnQuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgZ2V0Qm90dG9tTGVmdCwgZ2V0Qm90dG9tUmlnaHQsIGdldFRvcExlZnQsIGdldFRvcFJpZ2h0LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuLi8uLi9kb20uanMnO1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gTGF5ZXJUeXBlXG4gKiBAZXh0ZW5kcyB7TGF5ZXJSZW5kZXJlcjxMYXllclR5cGU+fVxuICovXG52YXIgQ2FudmFzTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gbGF5ZXIgTGF5ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2FudmFzTGF5ZXJSZW5kZXJlcihsYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBsYXllcikgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGVtcG9yYXJ5IHRyYW5zZm9ybS4gIFRoZSB2YWx1ZXMgaW4gdGhpcyB0cmFuc2Zvcm0gc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiBhXG4gICAgICAgICAqIGZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgdmFsdWVzLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGVtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRyYW5zZm9ybSBmb3IgcmVuZGVyZWQgcGl4ZWxzIHRvIHZpZXdwb3J0IENTUyBwaXhlbHMuICBUaGlzIHRyYW5zZm9ybSBtdXN0XG4gICAgICAgICAqIGJlIHNldCB3aGVuIHJlbmRlcmluZyBhIGZyYW1lIGFuZCBtYXkgYmUgdXNlZCBieSBvdGhlciBmdW5jdGlvbnMgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHZpZXdwb3J0IENTUyBwaXhlbHMgdG8gcmVuZGVyZWQgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAgICAgKiBiZSBzZXQgd2hlbiByZW5kZXJpbmcgYSBmcmFtZSBhbmQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZnVuY3Rpb25zIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250YWluZXJSZXVzZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSByZW5kZXJpbmcgY29udGFpbmVyIGZyb20gYW4gZXhpc3RpbmcgdGFyZ2V0LCBpZiBjb21wYXRpYmxlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBQb3RlbnRpYWwgcmVuZGVyIHRhcmdldC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNmb3JtIENTUyBUcmFuc2Zvcm0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS51c2VDb250YWluZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCB0cmFuc2Zvcm0sIG9wYWNpdHkpIHtcbiAgICAgICAgdmFyIGxheWVyQ2xhc3NOYW1lID0gdGhpcy5nZXRMYXllcigpLmdldENsYXNzTmFtZSgpO1xuICAgICAgICB2YXIgY29udGFpbmVyLCBjb250ZXh0O1xuICAgICAgICBpZiAodGFyZ2V0ICYmXG4gICAgICAgICAgICB0YXJnZXQuc3R5bGUub3BhY2l0eSA9PT0gJycgJiZcbiAgICAgICAgICAgIHRhcmdldC5jbGFzc05hbWUgPT09IGxheWVyQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gdGFyZ2V0LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb250ZXh0ICYmXG4gICAgICAgICAgICAoY29udGV4dC5jYW52YXMud2lkdGggPT09IDAgfHxcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPT09IHRyYW5zZm9ybSkpIHtcbiAgICAgICAgICAgIC8vIENvbnRhaW5lciBvZiB0aGUgcHJldmlvdXMgbGF5ZXIgcmVuZGVyZXIgY2FuIGJlIHVzZWQuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRhcmdldDtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lclJldXNlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5jb250YWluZXJSZXVzZWQpIHtcbiAgICAgICAgICAgIC8vIFByZXZpb3VzbHkgcmV1c2VkIGNvbnRhaW5lciBjYW5ub3QgYmUgdXNlZCBhbnkgbW9yZS5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lclJldXNlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGxheWVyQ2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gY29udGFpbmVyLnN0eWxlO1xuICAgICAgICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgICBzdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKCk7XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICAgICAgICAgIHN0eWxlID0gY2FudmFzLnN0eWxlO1xuICAgICAgICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgc3R5bGUubGVmdCA9ICcwJztcbiAgICAgICAgICAgIHN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICd0b3AgbGVmdCc7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBDbGlwIGV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY2xpcFVucm90YXRlZCA9IGZ1bmN0aW9uIChjb250ZXh0LCBmcmFtZVN0YXRlLCBleHRlbnQpIHtcbiAgICAgICAgdmFyIHRvcExlZnQgPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gICAgICAgIHZhciB0b3BSaWdodCA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gICAgICAgIHZhciBib3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KGV4dGVudCk7XG4gICAgICAgIHZhciBib3R0b21MZWZ0ID0gZ2V0Qm90dG9tTGVmdChleHRlbnQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BMZWZ0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgdG9wUmlnaHQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBib3R0b21SaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbUxlZnQpO1xuICAgICAgICB2YXIgaW52ZXJ0ZWQgPSB0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIHRvcExlZnQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgdG9wUmlnaHQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgYm90dG9tUmlnaHQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgYm90dG9tTGVmdCk7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBjb250ZXh0Lm1vdmVUbyhNYXRoLnJvdW5kKHRvcExlZnRbMF0pLCBNYXRoLnJvdW5kKHRvcExlZnRbMV0pKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oTWF0aC5yb3VuZCh0b3BSaWdodFswXSksIE1hdGgucm91bmQodG9wUmlnaHRbMV0pKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oTWF0aC5yb3VuZChib3R0b21SaWdodFswXSksIE1hdGgucm91bmQoYm90dG9tUmlnaHRbMV0pKTtcbiAgICAgICAgY29udGV4dC5saW5lVG8oTWF0aC5yb3VuZChib3R0b21MZWZ0WzBdKSwgTWF0aC5yb3VuZChib3R0b21MZWZ0WzFdKSk7XG4gICAgICAgIGNvbnRleHQuY2xpcCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9yZW5kZXIvRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5kaXNwYXRjaFJlbmRlckV2ZW50XyA9IGZ1bmN0aW9uICh0eXBlLCBjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgaWYgKGxheWVyLmhhc0xpc3RlbmVyKHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IG5ldyBSZW5kZXJFdmVudCh0eXBlLCB0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgZnJhbWVTdGF0ZSwgY29udGV4dCk7XG4gICAgICAgICAgICBsYXllci5kaXNwYXRjaEV2ZW50KGV2ZW50XzEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLnByZVJlbmRlciA9IGZ1bmN0aW9uIChjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlBSRVJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLnBvc3RSZW5kZXIgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QT1NUUkVOREVSLCBjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0cmFuc2Zvcm0gZm9yIHJlbmRlcmluZyB0byBhbiBlbGVtZW50IHRoYXQgd2lsbCBiZSByb3RhdGVkIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGggV2lkdGggb2YgdGhlIHJlbmRlcmVkIGVsZW1lbnQgKGluIHBpeGVscykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgdGhlIHJlbmRlcmVkIGVsZW1lbnQgKGluIHBpeGVscykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggT2Zmc2V0IG9uIHRoZSB4LWF4aXMgaW4gdmlldyBjb29yZGluYXRlcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRSZW5kZXJUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgcGl4ZWxSYXRpbywgd2lkdGgsIGhlaWdodCwgb2Zmc2V0WCkge1xuICAgICAgICB2YXIgZHgxID0gd2lkdGggLyAyO1xuICAgICAgICB2YXIgZHkxID0gaGVpZ2h0IC8gMjtcbiAgICAgICAgdmFyIHN4ID0gcGl4ZWxSYXRpbyAvIHJlc29sdXRpb247XG4gICAgICAgIHZhciBzeSA9IC1zeDtcbiAgICAgICAgdmFyIGR4MiA9IC1jZW50ZXJbMF0gKyBvZmZzZXRYO1xuICAgICAgICB2YXIgZHkyID0gLWNlbnRlclsxXTtcbiAgICAgICAgcmV0dXJuIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCBkeDEsIGR5MSwgc3gsIHN5LCAtcm90YXRpb24sIGR4MiwgZHkyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEByZXR1cm4ge1VpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXl9IFRoZSByZXN1bHQuICBJZiB0aGVyZSBpcyBubyBkYXRhIGF0IHRoZSBwaXhlbFxuICAgICAqICAgIGxvY2F0aW9uLCBudWxsIHdpbGwgYmUgcmV0dXJuZWQuICBJZiB0aGVyZSBpcyBkYXRhLCBidXQgcGl4ZWwgdmFsdWVzIGNhbm5vdCBiZVxuICAgICAqICAgIHJldHVybmVkLCBhbmQgZW1wdHkgYXJyYXkgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXREYXRhQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciByZW5kZXJQaXhlbCA9IGFwcGx5VHJhbnNmb3JtKHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIGxheWVyRXh0ZW50ID0gbGF5ZXIuZ2V0RXh0ZW50KCk7XG4gICAgICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgICAgICAgdmFyIHJlbmRlckNvb3JkaW5hdGUgPSBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgICAgICAgICAgIC8qKiBnZXQgb25seSBkYXRhIGluc2lkZSBvZiB0aGUgbGF5ZXIgZXh0ZW50ICovXG4gICAgICAgICAgICBpZiAoIWNvbnRhaW5zQ29vcmRpbmF0ZShsYXllckV4dGVudCwgcmVuZGVyQ29vcmRpbmF0ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChyZW5kZXJQaXhlbFswXSk7XG4gICAgICAgICAgICB2YXIgeSA9IE1hdGgucm91bmQocmVuZGVyUGl4ZWxbMV0pO1xuICAgICAgICAgICAgdmFyIG5ld0NhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgdmFyIG5ld0NvbnRleHQgPSBuZXdDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIG5ld0NhbnZhcy53aWR0aCA9IDE7XG4gICAgICAgICAgICBuZXdDYW52YXMuaGVpZ2h0ID0gMTtcbiAgICAgICAgICAgIG5ld0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIDEsIDEpO1xuICAgICAgICAgICAgbmV3Q29udGV4dC5kcmF3SW1hZ2UoY29udGV4dC5jYW52YXMsIHgsIHksIDEsIDEsIDAsIDAsIDEsIDEpO1xuICAgICAgICAgICAgZGF0YSA9IG5ld0NvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIDEsIDEpLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGVyci5uYW1lID09PSAnU2VjdXJpdHlFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAvLyB0YWludGVkIGNhbnZhcywgd2UgYXNzdW1lIHRoZXJlIGlzIGRhdGEgYXQgdGhlIGdpdmVuIHBpeGVsIChhbHRob3VnaCB0aGVyZSBtaWdodCBub3QgYmUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YVszXSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbn0oTGF5ZXJSZW5kZXJlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9UaWxlUmFuZ2VcbiAqL1xuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIGEgY29udGlndW91cyBibG9jayBvZiB0aWxlcy4gIEEgdGlsZSByYW5nZSBpcyBzcGVjaWZpZWRcbiAqIGJ5IGl0cyBtaW4vbWF4IHRpbGUgY29vcmRpbmF0ZXMgYW5kIGlzIGluY2x1c2l2ZSBvZiBjb29yZGluYXRlcy5cbiAqL1xudmFyIFRpbGVSYW5nZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblggPSBtaW5YO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5ZID0gbWluWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFkgPSBtYXhZO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbnNYWSh0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWluc1RpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblggPD0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhYIDw9IHRoaXMubWF4WCAmJlxuICAgICAgICAgICAgdGhpcy5taW5ZIDw9IHRpbGVSYW5nZS5taW5ZICYmXG4gICAgICAgICAgICB0aWxlUmFuZ2UubWF4WSA8PSB0aGlzLm1heFkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgY29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zWFkgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5YIDw9IHggJiYgeCA8PSB0aGlzLm1heFggJiYgdGhpcy5taW5ZIDw9IHkgJiYgeSA8PSB0aGlzLm1heFk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gRXF1YWxzLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluWCA9PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgICAgICAgdGhpcy5taW5ZID09IHRpbGVSYW5nZS5taW5ZICYmXG4gICAgICAgICAgICB0aGlzLm1heFggPT0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgICAgICAgIHRoaXMubWF4WSA9PSB0aWxlUmFuZ2UubWF4WSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWluWCA8IHRoaXMubWluWCkge1xuICAgICAgICAgICAgdGhpcy5taW5YID0gdGlsZVJhbmdlLm1pblg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVSYW5nZS5tYXhYID4gdGhpcy5tYXhYKSB7XG4gICAgICAgICAgICB0aGlzLm1heFggPSB0aWxlUmFuZ2UubWF4WDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZVJhbmdlLm1pblkgPCB0aGlzLm1pblkpIHtcbiAgICAgICAgICAgIHRoaXMubWluWSA9IHRpbGVSYW5nZS5taW5ZO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWF4WSA+IHRoaXMubWF4WSkge1xuICAgICAgICAgICAgdGhpcy5tYXhZID0gdGlsZVJhbmdlLm1heFk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gSGVpZ2h0LlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhZIC0gdGhpcy5taW5ZICsgMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCldO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhYIC0gdGhpcy5taW5YICsgMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJbnRlcnNlY3RzLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuaW50ZXJzZWN0cyA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblggPD0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgICAgICAgIHRoaXMubWF4WCA+PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgICAgICAgdGhpcy5taW5ZIDw9IHRpbGVSYW5nZS5tYXhZICYmXG4gICAgICAgICAgICB0aGlzLm1heFkgPj0gdGlsZVJhbmdlLm1pblkpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVSYW5nZTtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAqIEBwYXJhbSB7VGlsZVJhbmdlfSBbdGlsZVJhbmdlXSBUaWxlUmFuZ2UuXG4gKiBAcmV0dXJuIHtUaWxlUmFuZ2V9IFRpbGUgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZLCB0aWxlUmFuZ2UpIHtcbiAgICBpZiAodGlsZVJhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGlsZVJhbmdlLm1pblggPSBtaW5YO1xuICAgICAgICB0aWxlUmFuZ2UubWF4WCA9IG1heFg7XG4gICAgICAgIHRpbGVSYW5nZS5taW5ZID0gbWluWTtcbiAgICAgICAgdGlsZVJhbmdlLm1heFkgPSBtYXhZO1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgVGlsZVJhbmdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVJhbmdlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL1VuaXRzXG4gKi9cbi8qKlxuICogUHJvamVjdGlvbiB1bml0czogYCdkZWdyZWVzJ2AsIGAnZnQnYCwgYCdtJ2AsIGAncGl4ZWxzJ2AsIGAndGlsZS1waXhlbHMnYCBvclxuICogYCd1cy1mdCdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFVuaXRzID0ge1xuICAgIC8qKlxuICAgICAqIERlZ3JlZXNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgREVHUkVFUzogJ2RlZ3JlZXMnLFxuICAgIC8qKlxuICAgICAqIEZlZXRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRkVFVDogJ2Z0JyxcbiAgICAvKipcbiAgICAgKiBNZXRlcnNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTUVURVJTOiAnbScsXG4gICAgLyoqXG4gICAgICogUGl4ZWxzXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBJWEVMUzogJ3BpeGVscycsXG4gICAgLyoqXG4gICAgICogVGlsZSBQaXhlbHNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRV9QSVhFTFM6ICd0aWxlLXBpeGVscycsXG4gICAgLyoqXG4gICAgICogVVMgRmVldFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVU0ZFRVQ6ICd1cy1mdCcsXG59O1xuLyoqXG4gKiBNZXRlcnMgcGVyIHVuaXQgbG9va3VwIHRhYmxlLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7T2JqZWN0PFVuaXRzLCBudW1iZXI+fVxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIE1FVEVSU19QRVJfVU5JVCA9IHt9O1xuLy8gdXNlIHRoZSByYWRpdXMgb2YgdGhlIE5vcm1hbCBzcGhlcmVcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5ERUdSRUVTXSA9ICgyICogTWF0aC5QSSAqIDYzNzA5OTcpIC8gMzYwO1xuTUVURVJTX1BFUl9VTklUW1VuaXRzLkZFRVRdID0gMC4zMDQ4O1xuTUVURVJTX1BFUl9VTklUW1VuaXRzLk1FVEVSU10gPSAxO1xuTUVURVJTX1BFUl9VTklUW1VuaXRzLlVTRkVFVF0gPSAxMjAwIC8gMzkzNztcbmV4cG9ydCBkZWZhdWx0IFVuaXRzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5pdHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovUHJvamVjdGlvblxuICovXG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQgfSBmcm9tICcuL1VuaXRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvZGUgVGhlIFNSUyBpZGVudGlmaWVyIGNvZGUsIGUuZy4gYEVQU0c6NDMyNmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdHxzdHJpbmd9IFt1bml0c10gVW5pdHMuIFJlcXVpcmVkIHVubGVzcyBhXG4gKiBwcm9qNCBwcm9qZWN0aW9uIGlzIGRlZmluZWQgZm9yIGBjb2RlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhlIFNSUy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYXhpc09yaWVudGF0aW9uPSdlbnUnXSBUaGUgYXhpcyBvcmllbnRhdGlvbiBhcyBzcGVjaWZpZWQgaW4gUHJvajQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtnbG9iYWw9ZmFsc2VdIFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgdmFsaWQgZm9yIHRoZSB3aG9sZSBnbG9iZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWV0ZXJzUGVyVW5pdF0gVGhlIG1ldGVycyBwZXIgdW5pdCBmb3IgdGhlIFNSUy5cbiAqIElmIG5vdCBwcm92aWRlZCwgdGhlIGB1bml0c2AgYXJlIHVzZWQgdG8gZ2V0IHRoZSBtZXRlcnMgcGVyIHVuaXQgZnJvbSB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1VuaXRzfk1FVEVSU19QRVJfVU5JVH1cbiAqIGxvb2t1cCB0YWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW3dvcmxkRXh0ZW50XSBUaGUgd29ybGQgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfSBbZ2V0UG9pbnRSZXNvbHV0aW9uXVxuICogRnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHJlc29sdXRpb24gYXQgYSBwb2ludC4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAqIGBudW1iZXJgIHZpZXcgcmVzb2x1dGlvbiBhbmQgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZSBDb29yZGluYXRlfSBhcyBhcmd1bWVudHMsIGFuZCByZXR1cm5zXG4gKiB0aGUgYG51bWJlcmAgcmVzb2x1dGlvbiBpbiBwcm9qZWN0aW9uIHVuaXRzIGF0IHRoZSBwYXNzZWQgY29vcmRpbmF0ZS4gSWYgdGhpcyBpcyBgdW5kZWZpbmVkYCxcbiAqIHRoZSBkZWZhdWx0IHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXRQb2ludFJlc29sdXRpb24gZ2V0UG9pbnRSZXNvbHV0aW9uKCl9IGZ1bmN0aW9uIHdpbGwgYmUgdXNlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIGRlZmluaXRpb24gY2xhc3MuIE9uZSBvZiB0aGVzZSBpcyBjcmVhdGVkIGZvciBlYWNoIHByb2plY3Rpb25cbiAqIHN1cHBvcnRlZCBpbiB0aGUgYXBwbGljYXRpb24gYW5kIHN0b3JlZCBpbiB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qfSBuYW1lc3BhY2UuXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSBpbiBhcHBsaWNhdGlvbnMsIGJ1dCB0aGlzIGlzIG5vdCByZXF1aXJlZCwgYXMgQVBJIHBhcmFtc1xuICogYW5kIG9wdGlvbnMgdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5Qcm9qZWN0aW9uTGlrZX0gd2hpY2ggbWVhbnMgdGhlIHNpbXBsZSBzdHJpbmdcbiAqIGNvZGUgd2lsbCBzdWZmaWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXR9IHRvIHJldHJpZXZlIHRoZSBvYmplY3QgZm9yIGEgcGFydGljdWxhclxuICogcHJvamVjdGlvbi5cbiAqXG4gKiBUaGUgbGlicmFyeSBpbmNsdWRlcyBkZWZpbml0aW9ucyBmb3IgYEVQU0c6NDMyNmAgYW5kIGBFUFNHOjM4NTdgLCB0b2dldGhlclxuICogd2l0aCB0aGUgZm9sbG93aW5nIGFsaWFzZXM6XG4gKiAqIGBFUFNHOjQzMjZgOiBDUlM6ODQsIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2LFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0LCB1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYsXG4gKiAgICAgdXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XG4gKiAqIGBFUFNHOjM4NTdgOiBFUFNHOjEwMjEwMCwgRVBTRzoxMDIxMTMsIEVQU0c6OTAwOTEzLFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3LFxuICogICAgIGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3XG4gKlxuICogSWYgeW91IHVzZSBbcHJvajRqc10oaHR0cHM6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcyksIGFsaWFzZXMgY2FuXG4gKiBiZSBhZGRlZCB1c2luZyBgcHJvajQuZGVmcygpYC4gQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlXG4gKiBhZGRlZCwgY2FsbCB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL3Byb2o0LnJlZ2lzdGVyfSBmdW5jdGlvbi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBQcm9qZWN0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJvamVjdGlvbihvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb2RlXyA9IG9wdGlvbnMuY29kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuaXRzIG9mIHByb2plY3RlZCBjb29yZGluYXRlcy4gV2hlbiBzZXQgdG8gYFRJTEVfUElYRUxTYCwgYVxuICAgICAgICAgKiBgdGhpcy5leHRlbnRfYCBhbmQgYHRoaXMud29ybGRFeHRlbnRfYCBtdXN0IGJlIGNvbmZpZ3VyZWQgcHJvcGVybHkgZm9yIGVhY2hcbiAgICAgICAgICogdGlsZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW5pdHNfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9ICovIChvcHRpb25zLnVuaXRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbGlkaXR5IGV4dGVudCBvZiB0aGUgcHJvamVjdGlvbiBpbiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIEZvciBwcm9qZWN0aW9uc1xuICAgICAgICAgKiB3aXRoIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgICAgICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmV4dGVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHRlbnQgb2YgdGhlIHdvcmxkIGluIEVQU0c6NDMyNi4gRm9yIHByb2plY3Rpb25zIHdpdGhcbiAgICAgICAgICogYFRJTEVfUElYRUxTYCB1bml0cywgdGhpcyBpcyB0aGUgZXh0ZW50IG9mIHRoZSB0aWxlIGluXG4gICAgICAgICAqIHByb2plY3RlZCBjb29yZGluYXRlIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID1cbiAgICAgICAgICAgIG9wdGlvbnMud29ybGRFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud29ybGRFeHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXhpc09yaWVudGF0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5heGlzT3JpZW50YXRpb24gOiAnZW51JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nbG9iYWxfID0gb3B0aW9ucy5nbG9iYWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZ2xvYmFsIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIHRoaXMuZXh0ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gb3B0aW9ucy5nZXRQb2ludFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWV0ZXJzUGVyVW5pdF8gPSBvcHRpb25zLm1ldGVyc1BlclVuaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBwcm9qZWN0aW9uIGlzIHN1aXRhYmxlIGZvciB3cmFwcGluZyB0aGUgeC1heGlzXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuY2FuV3JhcFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbldyYXBYXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29kZSBmb3IgdGhpcyBwcm9qZWN0aW9uLCBlLmcuICdFUFNHOjQzMjYnLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gQ29kZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0Q29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB1bml0cyBvZiB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fSBVbml0cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0VW5pdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaXRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW1vdW50IG9mIG1ldGVycyBwZXIgdW5pdCBvZiB0aGlzIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBpc1xuICAgICAqIG5vdCBjb25maWd1cmVkIHdpdGggYG1ldGVyc1BlclVuaXRgIG9yIGEgdW5pdHMgaWRlbnRpZmllciwgdGhlIHJldHVybiBpc1xuICAgICAqIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IE1ldGVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0TWV0ZXJzUGVyVW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0ZXJzUGVyVW5pdF8gfHwgTUVURVJTX1BFUl9VTklUW3RoaXMudW5pdHNfXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRXb3JsZEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ybGRFeHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBheGlzIG9yaWVudGF0aW9uIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gICAgICogZW51IC0gdGhlIGRlZmF1bHQgZWFzdGluZywgbm9ydGhpbmcsIGVsZXZhdGlvbi5cbiAgICAgKiBuZXUgLSBub3J0aGluZywgZWFzdGluZywgdXAgLSB1c2VmdWwgZm9yIFwibGF0L2xvbmdcIiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzLFxuICAgICAqICAgICBvciBzb3V0aCBvcmllbnRhdGVkIHRyYW5zdmVyc2UgbWVyY2F0b3IuXG4gICAgICogd251IC0gd2VzdGluZywgbm9ydGhpbmcsIHVwIC0gc29tZSBwbGFuZXRhcnkgY29vcmRpbmF0ZSBzeXN0ZW1zIGhhdmVcbiAgICAgKiAgICAgXCJ3ZXN0IHBvc2l0aXZlXCIgY29vcmRpbmF0ZSBzeXN0ZW1zXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBBeGlzIG9yaWVudGF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRBeGlzT3JpZW50YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF4aXNPcmllbnRhdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB0aGlzIHByb2plY3Rpb24gYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGQ/XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmlzR2xvYmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGlmIHRoZSBwcm9qZWN0aW9uIGlzIGEgZ2xvYmFsIHByb2plY3Rpb24gd2hpY2ggc3BhbnMgdGhlIHdob2xlIHdvcmxkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBnbG9iYWwgV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldEdsb2JhbCA9IGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdGhpcy5nbG9iYWxfID0gZ2xvYmFsO1xuICAgICAgICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFRpbGVHcmlkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICh0aWxlR3JpZCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRUaWxlR3JpZF8gPSB0aWxlR3JpZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IGV4dGVudDtcbiAgICAgICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB3b3JsZEV4dGVudCBXb3JsZCBleHRlbnRcbiAgICAgKiAgICAgW21pbmxvbiwgbWlubGF0LCBtYXhsb24sIG1heGxhdF0uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gKHdvcmxkRXh0ZW50KSB7XG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID0gd29ybGRFeHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGdldFBvaW50UmVzb2x1dGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXRQb2ludFJlc29sdXRpb259XG4gICAgICogZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IGZ1bmMgRnVuY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2V0UG9pbnRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXyA9IGZ1bmM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1c3RvbSBwb2ludCByZXNvbHV0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIHByb2plY3Rpb24gKGlmIHNldCkuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9IFRoZSBjdXN0b20gcG9pbnRcbiAgICAgKiByZXNvbHV0aW9uIGZ1bmN0aW9uIChpZiBzZXQpLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldFBvaW50UmVzb2x1dGlvbkZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2plY3Rpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUHJvamVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb2plY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL2Vwc2czODU3XG4gKi9cbmltcG9ydCBQcm9qZWN0aW9uIGZyb20gJy4vUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9Vbml0cy5qcyc7XG5pbXBvcnQgeyBjb3NoIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIFJhZGl1cyBvZiBXR1M4NCBzcGhlcmVcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIEhBTEZfU0laRSA9IE1hdGguUEkgKiBSQURJVVM7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgRVhURU5UID0gWy1IQUxGX1NJWkUsIC1IQUxGX1NJWkUsIEhBTEZfU0laRSwgSEFMRl9TSVpFXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBXT1JMRF9FWFRFTlQgPSBbLTE4MCwgLTg1LCAxODAsIDg1XTtcbi8qKlxuICogTWF4aW11bSBzYWZlIHZhbHVlIGluIHkgZGlyZWN0aW9uXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgTUFYX1NBRkVfWSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyAyKSk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciB3ZWIvc3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICovXG52YXIgRVBTRzM4NTdQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHMzg1N1Byb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFUFNHMzg1N1Byb2plY3Rpb24oY29kZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29kZTogY29kZSxcbiAgICAgICAgICAgIHVuaXRzOiBVbml0cy5NRVRFUlMsXG4gICAgICAgICAgICBleHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgICAgIHdvcmxkRXh0ZW50OiBXT1JMRF9FWFRFTlQsXG4gICAgICAgICAgICBnZXRQb2ludFJlc29sdXRpb246IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBwb2ludCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uIC8gY29zaChwb2ludFsxXSAvIFJBRElVUyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRVBTRzM4NTdQcm9qZWN0aW9uO1xufShQcm9qZWN0aW9uKSk7XG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6Mzg1Ny5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzozODU3JyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzoxMDIxMDAnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjExMycpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6OTAwOTEzJyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTcnKSxcbl07XG4vKipcbiAqIFRyYW5zZm9ybWF0aW9uIGZyb20gRVBTRzo0MzI2IHRvIEVQU0c6Mzg1Ny5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24gKGRlZmF1bHQgaXMgYDJgKS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FUFNHNDMyNihpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdmFyIGRpbWVuc2lvbiA9IG9wdF9kaW1lbnNpb24gPiAxID8gb3B0X2RpbWVuc2lvbiA6IDI7XG4gICAgdmFyIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChkaW1lbnNpb24gPiAyKSB7XG4gICAgICAgICAgICAvLyBwcmVzZXJ2ZSB2YWx1ZXMgYmV5b25kIHNlY29uZCBkaW1lbnNpb25cbiAgICAgICAgICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgb3V0cHV0W2ldID0gKEhBTEZfU0laRSAqIGlucHV0W2ldKSAvIDE4MDtcbiAgICAgICAgdmFyIHkgPSBSQURJVVMgKiBNYXRoLmxvZyhNYXRoLnRhbigoTWF0aC5QSSAqICgraW5wdXRbaSArIDFdICsgOTApKSAvIDM2MCkpO1xuICAgICAgICBpZiAoeSA+IE1BWF9TQUZFX1kpIHtcbiAgICAgICAgICAgIHkgPSBNQVhfU0FGRV9ZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHkgPCAtTUFYX1NBRkVfWSkge1xuICAgICAgICAgICAgeSA9IC1NQVhfU0FGRV9ZO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dFtpICsgMV0gPSB5O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6Mzg1NyB0byBFUFNHOjQzMjYuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpbWVuc2lvbl0gRGltZW5zaW9uIChkZWZhdWx0IGlzIGAyYCkuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0VQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIgZGltZW5zaW9uID0gb3B0X2RpbWVuc2lvbiA+IDEgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICBpZiAob3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgICAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgICAgICBvdXRwdXRbaV0gPSAoMTgwICogaW5wdXRbaV0pIC8gSEFMRl9TSVpFO1xuICAgICAgICBvdXRwdXRbaSArIDFdID1cbiAgICAgICAgICAgICgzNjAgKiBNYXRoLmF0YW4oTWF0aC5leHAoaW5wdXRbaSArIDFdIC8gUkFESVVTKSkpIC8gTWF0aC5QSSAtIDkwO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXBzZzM4NTcuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL2Vwc2c0MzI2XG4gKi9cbmltcG9ydCBQcm9qZWN0aW9uIGZyb20gJy4vUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9Vbml0cy5qcyc7XG4vKipcbiAqIFNlbWktbWFqb3IgcmFkaXVzIG9mIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIFJBRElVUyA9IDYzNzgxMzc7XG4vKipcbiAqIEV4dGVudCBvZiB0aGUgRVBTRzo0MzI2IHByb2plY3Rpb24gd2hpY2ggaXMgdGhlIHdob2xlIHdvcmxkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgRVhURU5UID0gWy0xODAsIC05MCwgMTgwLCA5MF07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBNRVRFUlNfUEVSX1VOSVQgPSAoTWF0aC5QSSAqIFJBRElVUykgLyAxODA7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciBXR1M4NCBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIChFUFNHOjQzMjYpLlxuICpcbiAqIE5vdGUgdGhhdCBPcGVuTGF5ZXJzIGRvZXMgbm90IHN0cmljdGx5IGNvbXBseSB3aXRoIHRoZSBFUFNHIGRlZmluaXRpb24uXG4gKiBUaGUgRVBTRyByZWdpc3RyeSBkZWZpbmVzIDQzMjYgYXMgYSBDUlMgZm9yIExhdGl0dWRlLExvbmdpdHVkZSAoeSx4KS5cbiAqIE9wZW5MYXllcnMgdHJlYXRzIEVQU0c6NDMyNiBhcyBhIHBzZXVkby1wcm9qZWN0aW9uLCB3aXRoIHgseSBjb29yZGluYXRlcy5cbiAqL1xudmFyIEVQU0c0MzI2UHJvamVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRVBTRzQzMjZQcm9qZWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIENvZGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRfYXhpc09yaWVudGF0aW9uXSBBeGlzIG9yaWVudGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEVQU0c0MzI2UHJvamVjdGlvbihjb2RlLCBvcHRfYXhpc09yaWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgdW5pdHM6IFVuaXRzLkRFR1JFRVMsXG4gICAgICAgICAgICBleHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgICAgIGF4aXNPcmllbnRhdGlvbjogb3B0X2F4aXNPcmllbnRhdGlvbixcbiAgICAgICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1ldGVyc1BlclVuaXQ6IE1FVEVSU19QRVJfVU5JVCxcbiAgICAgICAgICAgIHdvcmxkRXh0ZW50OiBFWFRFTlQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBFUFNHNDMyNlByb2plY3Rpb247XG59KFByb2plY3Rpb24pKTtcbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzo0MzI2LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IHZhciBQUk9KRUNUSU9OUyA9IFtcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdDUlM6ODQnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdFUFNHOjQzMjYnLCAnbmV1JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjNDMyNicsICduZXUnKSxcbl07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcHNnNDMyNi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9wcm9qZWN0aW9uc1xuICovXG4vKipcbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbnZhciBjYWNoZSA9IHt9O1xuLyoqXG4gKiBDbGVhciB0aGUgcHJvamVjdGlvbnMgY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBjYWNoZSA9IHt9O1xufVxuLyoqXG4gKiBHZXQgYSBjYWNoZWQgcHJvamVjdGlvbiBieSBjb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIGNvZGUgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFRoZSBwcm9qZWN0aW9uIChpZiBjYWNoZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KGNvZGUpIHtcbiAgICByZXR1cm4gKGNhY2hlW2NvZGVdIHx8XG4gICAgICAgIGNhY2hlW2NvZGUucmVwbGFjZSgvdXJuOih4LSk/b2djOmRlZjpjcnM6RVBTRzooLio6KT8oXFx3KykkLywgJ0VQU0c6JDMnKV0gfHxcbiAgICAgICAgbnVsbCk7XG59XG4vKipcbiAqIEFkZCBhIHByb2plY3Rpb24gdG8gdGhlIGNhY2hlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIHByb2plY3Rpb24gY29kZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdG8gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoY29kZSwgcHJvamVjdGlvbikge1xuICAgIGNhY2hlW2NvZGVdID0gcHJvamVjdGlvbjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2plY3Rpb25zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL3RyYW5zZm9ybXNcbiAqL1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb24+Pn1cbiAqL1xudmFyIHRyYW5zZm9ybXMgPSB7fTtcbi8qKlxuICogQ2xlYXIgdGhlIHRyYW5zZm9ybSBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIHRyYW5zZm9ybXMgPSB7fTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGEgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChzb3VyY2UsIGRlc3RpbmF0aW9uLCB0cmFuc2Zvcm1Gbikge1xuICAgIHZhciBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgICB2YXIgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb24uZ2V0Q29kZSgpO1xuICAgIGlmICghKHNvdXJjZUNvZGUgaW4gdHJhbnNmb3JtcykpIHtcbiAgICAgICAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSA9IHt9O1xuICAgIH1cbiAgICB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV0gPSB0cmFuc2Zvcm1Gbjtcbn1cbi8qKlxuICogVW5yZWdpc3RlcnMgdGhlIGNvbnZlcnNpb24gZnVuY3Rpb24gdG8gY29udmVydCBjb29yZGluYXRlcyBmcm9tIHRoZSBzb3VyY2VcbiAqIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uICBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNsZWFuIHVwXG4gKiBjYWNoZWQgdHJhbnNmb3JtcyBkdXJpbmcgdGVzdGluZy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVGhlIHVucmVnaXN0ZXJlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgICB2YXIgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb24uZ2V0Q29kZSgpO1xuICAgIHZhciB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgZGVsZXRlIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgICBpZiAoaXNFbXB0eSh0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdKSkge1xuICAgICAgICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbi8qKlxuICogR2V0IGEgdHJhbnNmb3JtIGdpdmVuIGEgc291cmNlIGNvZGUgYW5kIGEgZGVzdGluYXRpb24gY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VDb2RlIFRoZSBjb2RlIGZvciB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25Db2RlIFRoZSBjb2RlIGZvciB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChpZiBmb3VuZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKSB7XG4gICAgdmFyIHRyYW5zZm9ybTtcbiAgICBpZiAoc291cmNlQ29kZSBpbiB0cmFuc2Zvcm1zICYmIGRlc3RpbmF0aW9uQ29kZSBpbiB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdKSB7XG4gICAgICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybXMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NwaGVyZVxuICovXG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IHsgdG9EZWdyZWVzLCB0b1JhZGlhbnMgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBPYmplY3QgbGl0ZXJhbCB3aXRoIG9wdGlvbnMgZm9yIHRoZSB7QGxpbmsgZ2V0TGVuZ3RofSBvciB7QGxpbmsgZ2V0QXJlYX1cbiAqIGZ1bmN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNwaGVyZU1ldHJpY09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbj0nRVBTRzozODU3J11cbiAqIFByb2plY3Rpb24gb2YgdGhlICBnZW9tZXRyeS4gIEJ5IGRlZmF1bHQsIHRoZSBnZW9tZXRyeSBpcyBhc3N1bWVkIHRvIGJlIGluXG4gKiBXZWIgTWVyY2F0b3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JhZGl1cz02MzcxMDA4LjhdIFNwaGVyZSByYWRpdXMuICBCeSBkZWZhdWx0LCB0aGVcbiAqIFttZWFuIEVhcnRoIHJhZGl1c10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRWFydGhfcmFkaXVzI01lYW5fcmFkaXVzKVxuICogZm9yIHRoZSBXR1M4NCBlbGxpcHNvaWQgaXMgdXNlZC5cbiAqL1xuLyoqXG4gKiBUaGUgbWVhbiBFYXJ0aCByYWRpdXMgKDEvMyAqICgyYSArIGIpKSBmb3IgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1c1xuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1JBRElVUyA9IDYzNzEwMDguODtcbi8qKlxuICogR2V0IHRoZSBncmVhdCBjaXJjbGUgZGlzdGFuY2UgKGluIG1ldGVycykgYmV0d2VlbiB0d28gZ2VvZ3JhcGhpYyBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IGMxIFN0YXJ0aW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0FycmF5fSBjMiBFbmRpbmcgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3JhZGl1c10gVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlKGMxLCBjMiwgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbGF0MiA9IHRvUmFkaWFucyhjMlsxXSk7XG4gICAgdmFyIGRlbHRhTGF0QnkyID0gKGxhdDIgLSBsYXQxKSAvIDI7XG4gICAgdmFyIGRlbHRhTG9uQnkyID0gdG9SYWRpYW5zKGMyWzBdIC0gYzFbMF0pIC8gMjtcbiAgICB2YXIgYSA9IE1hdGguc2luKGRlbHRhTGF0QnkyKSAqIE1hdGguc2luKGRlbHRhTGF0QnkyKSArXG4gICAgICAgIE1hdGguc2luKGRlbHRhTG9uQnkyKSAqXG4gICAgICAgICAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0MSkgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0Mik7XG4gICAgcmV0dXJuIDIgKiByYWRpdXMgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG59XG4vKipcbiAqIEdldCB0aGUgY3VtdWxhdGl2ZSBncmVhdCBjaXJjbGUgbGVuZ3RoIG9mIGxpbmVzdHJpbmcgY29vcmRpbmF0ZXMgKGdlb2dyYXBoaWMpLlxuICogQHBhcmFtIHtBcnJheX0gY29vcmRpbmF0ZXMgTGluZXN0cmluZyBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGVuZ3RoIChpbiBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKSB7XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWkgLSAxOyArK2kpIHtcbiAgICAgICAgbGVuZ3RoICs9IGdldERpc3RhbmNlKGNvb3JkaW5hdGVzW2ldLCBjb29yZGluYXRlc1tpICsgMV0sIHJhZGl1cyk7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIEdldCB0aGUgc3BoZXJpY2FsIGxlbmd0aCBvZiBhIGdlb21ldHJ5LiAgVGhpcyBsZW5ndGggaXMgdGhlIHN1bSBvZiB0aGVcbiAqIGdyZWF0IGNpcmNsZSBkaXN0YW5jZXMgYmV0d2VlbiBjb29yZGluYXRlcy4gIEZvciBwb2x5Z29ucywgdGhlIGxlbmd0aCBpc1xuICogdGhlIHN1bSBvZiBhbGwgcmluZ3MuICBGb3IgcG9pbnRzLCB0aGUgbGVuZ3RoIGlzIHplcm8uICBGb3IgbXVsdGktcGFydFxuICogZ2VvbWV0cmllcywgdGhlIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZSBsZW5ndGggb2YgZWFjaCBwYXJ0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zIGZvciB0aGVcbiAqIGxlbmd0aCBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiBZb3UgY2FuIGNoYW5nZSB0aGlzIGJ5IHByb3ZpZGluZyBhIGBwcm9qZWN0aW9uYCBvcHRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBzcGhlcmljYWwgbGVuZ3RoIChpbiBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoKGdlb21ldHJ5LCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uIHx8ICdFUFNHOjM4NTcnO1xuICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICAgIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCkudHJhbnNmb3JtKHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICB9XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgdmFyIGNvb3JkaW5hdGVzLCBjb29yZHMsIGksIGlpLCBqLCBqajtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UOiB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgbGVuZ3RoID0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9MWUdPTjoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXNbaV0sIHJhZGl1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvb3JkcyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gY29vcmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoICs9IGdldExlbmd0aEludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OOiB7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cmllcyA9IFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNwaGVyaWNhbCBhcmVhIGZvciBhIGxpc3Qgb2YgY29vcmRpbmF0ZXMuXG4gKlxuICogW1JlZmVyZW5jZV0oaHR0cHM6Ly90cnMuanBsLm5hc2EuZ292L2hhbmRsZS8yMDE0LzQwNDA5KVxuICogUm9iZXJ0LiBHLiBDaGFtYmVybGFpbiBhbmQgV2lsbGlhbSBILiBEdXF1ZXR0ZSwgXCJTb21lIEFsZ29yaXRobXMgZm9yXG4gKiBQb2x5Z29ucyBvbiBhIFNwaGVyZVwiLCBKUEwgUHVibGljYXRpb24gMDctMDMsIEpldCBQcm9wdWxzaW9uXG4gKiBMYWJvcmF0b3J5LCBQYXNhZGVuYSwgQ0EsIEp1bmUgMjAwN1xuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBMaXN0IG9mIGNvb3JkaW5hdGVzIG9mIGEgbGluZWFyXG4gKiByaW5nLiBJZiB0aGUgcmluZyBpcyBvcmllbnRlZCBjbG9ja3dpc2UsIHRoZSBhcmVhIHdpbGwgYmUgcG9zaXRpdmUsXG4gKiBvdGhlcndpc2UgaXQgd2lsbCBiZSBuZWdhdGl2ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICB2YXIgbGVuID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciB4MSA9IGNvb3JkaW5hdGVzW2xlbiAtIDFdWzBdO1xuICAgIHZhciB5MSA9IGNvb3JkaW5hdGVzW2xlbiAtIDFdWzFdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHgyID0gY29vcmRpbmF0ZXNbaV1bMF07XG4gICAgICAgIHZhciB5MiA9IGNvb3JkaW5hdGVzW2ldWzFdO1xuICAgICAgICBhcmVhICs9XG4gICAgICAgICAgICB0b1JhZGlhbnMoeDIgLSB4MSkgKlxuICAgICAgICAgICAgICAgICgyICsgTWF0aC5zaW4odG9SYWRpYW5zKHkxKSkgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTIpKSk7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiAoYXJlYSAqIHJhZGl1cyAqIHJhZGl1cykgLyAyLjA7XG59XG4vKipcbiAqIEdldCB0aGUgc3BoZXJpY2FsIGFyZWEgb2YgYSBnZW9tZXRyeS4gIFRoaXMgaXMgdGhlIGFyZWEgKGluIG1ldGVycykgYXNzdW1pbmdcbiAqIHRoYXQgcG9seWdvbiBlZGdlcyBhcmUgc2VnbWVudHMgb2YgZ3JlYXQgY2lyY2xlcyBvbiBhIHNwaGVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEEgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge1NwaGVyZU1ldHJpY09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucyBmb3IgdGhlIGFyZWFcbiAqICAgICBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiAgICAgWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciByYWRpdXMgPSBvcHRpb25zLnJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICBpZiAodHlwZSAhPT0gR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT04pIHtcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpLnRyYW5zZm9ybShwcm9qZWN0aW9uLCAnRVBTRzo0MzI2Jyk7XG4gICAgfVxuICAgIHZhciBhcmVhID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBhcmVhID0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDEsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzW2ldLCByYWRpdXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgYXJlYSArPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAxLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTjoge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJpZXMgPSBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEdlb21ldHJpZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXJlYSArPSBnZXRBcmVhKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGF0IHRoZSBnaXZlbiBkaXN0YW5jZSBhbmQgYmVhcmluZyBmcm9tIGBjMWAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYzEgVGhlIG9yaWdpbiBwb2ludCAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIFRoZSBncmVhdC1jaXJjbGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgb3JpZ2luXG4gKiAgICAgcG9pbnQgYW5kIHRoZSB0YXJnZXQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyBUaGUgYmVhcmluZyAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9yYWRpdXNdIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS4gIERlZmF1bHRzIHRvIHRoZSBFYXJ0aCdzXG4gKiAgICAgbWVhbiByYWRpdXMgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgdGFyZ2V0IHBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb2Zmc2V0KGMxLCBkaXN0YW5jZSwgYmVhcmluZywgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbG9uMSA9IHRvUmFkaWFucyhjMVswXSk7XG4gICAgdmFyIGRCeVIgPSBkaXN0YW5jZSAvIHJhZGl1cztcbiAgICB2YXIgbGF0ID0gTWF0aC5hc2luKE1hdGguc2luKGxhdDEpICogTWF0aC5jb3MoZEJ5UikgK1xuICAgICAgICBNYXRoLmNvcyhsYXQxKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MoYmVhcmluZykpO1xuICAgIHZhciBsb24gPSBsb24xICtcbiAgICAgICAgTWF0aC5hdGFuMihNYXRoLnNpbihiZWFyaW5nKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MobGF0MSksIE1hdGguY29zKGRCeVIpIC0gTWF0aC5zaW4obGF0MSkgKiBNYXRoLnNpbihsYXQpKTtcbiAgICByZXR1cm4gW3RvRGVncmVlcyhsb24pLCB0b0RlZ3JlZXMobGF0KV07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGhlcmUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2pcbiAqL1xuLyoqXG4gKiBUaGUgb2wvcHJvaiBtb2R1bGUgc3RvcmVzOlxuICogKiBhIGxpc3Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259XG4gKiBvYmplY3RzLCBvbmUgZm9yIGVhY2ggcHJvamVjdGlvbiBzdXBwb3J0ZWQgYnkgdGhlIGFwcGxpY2F0aW9uXG4gKiAqIGEgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIG5lZWRlZCB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIG9uZSBwcm9qZWN0aW9uXG4gKiBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIHN0YXRpYyBmdW5jdGlvbnMgYXJlIHRoZSBtZXRob2RzIHVzZWQgdG8gbWFpbnRhaW4gdGhlc2UuXG4gKiBFYWNoIHRyYW5zZm9ybSBmdW5jdGlvbiBjYW4gaGFuZGxlIG5vdCBvbmx5IHNpbXBsZSBjb29yZGluYXRlIHBhaXJzLCBidXQgYWxzb1xuICogbGFyZ2UgYXJyYXlzIG9mIGNvb3JkaW5hdGVzIHN1Y2ggYXMgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogV2hlbiBsb2FkZWQsIHRoZSBsaWJyYXJ5IGFkZHMgcHJvamVjdGlvbiBvYmplY3RzIGZvciBFUFNHOjQzMjYgKFdHUzg0XG4gKiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzKSBhbmQgRVBTRzozODU3IChXZWIgb3IgU3BoZXJpY2FsIE1lcmNhdG9yLCBhcyB1c2VkXG4gKiBmb3IgZXhhbXBsZSBieSBCaW5nIE1hcHMgb3IgT3BlblN0cmVldE1hcCksIHRvZ2V0aGVyIHdpdGggdGhlIHJlbGV2YW50XG4gKiB0cmFuc2Zvcm0gZnVuY3Rpb25zLlxuICpcbiAqIEFkZGl0aW9uYWwgdHJhbnNmb3JtcyBtYXkgYmUgYWRkZWQgYnkgdXNpbmcgdGhlIGh0dHA6Ly9wcm9qNGpzLm9yZy9cbiAqIGxpYnJhcnkgKHZlcnNpb24gMi4yIG9yIGxhdGVyKS4gWW91IGNhbiB1c2UgdGhlIGZ1bGwgYnVpbGQgc3VwcGxpZWQgYnlcbiAqIFByb2o0anMsIG9yIGNyZWF0ZSBhIGN1c3RvbSBidWlsZCB0byBzdXBwb3J0IHRob3NlIHByb2plY3Rpb25zIHlvdSBuZWVkOyBzZWVcbiAqIHRoZSBQcm9qNGpzIHdlYnNpdGUgZm9yIGhvdyB0byBkbyB0aGlzLiBZb3UgYWxzbyBuZWVkIHRoZSBQcm9qNGpzIGRlZmluaXRpb25zXG4gKiBmb3IgdGhlIHJlcXVpcmVkIHByb2plY3Rpb25zLiBUaGVzZSBkZWZpbml0aW9ucyBjYW4gYmUgb2J0YWluZWQgZnJvbVxuICogaHR0cHM6Ly9lcHNnLmlvLywgYW5kIGFyZSBhIEpTIGZ1bmN0aW9uLCBzbyBjYW4gYmUgbG9hZGVkIGluIGEgc2NyaXB0XG4gKiB0YWcgKGFzIGluIHRoZSBleGFtcGxlcykgb3IgcGFzdGVkIGludG8geW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmUgYWRkZWQgdG8gcHJvajQncyByZWdpc3RyeSAoYnlcbiAqIHVzaW5nIGBwcm9qNC5kZWZzKClgKSwgc2ltcGx5IGNhbGwgYHJlZ2lzdGVyKHByb2o0KWAgZnJvbSB0aGUgYG9sL3Byb2ovcHJvajRgXG4gKiBwYWNrYWdlLiBFeGlzdGluZyB0cmFuc2Zvcm1zIGFyZSBub3QgY2hhbmdlZCBieSB0aGlzIGZ1bmN0aW9uLiBTZWVcbiAqIGV4YW1wbGVzL3dtcy1pbWFnZS1jdXN0b20tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZiB0aGlzLlxuICpcbiAqIEFkZGl0aW9uYWwgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBjYW4gYmUgcmVnaXN0ZXJlZCB3aXRoIGBwcm9qNC5kZWZzKClgIGFueVxuICogdGltZS4gSnVzdCBtYWtlIHN1cmUgdG8gY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBhZ2FpbjsgZm9yIGV4YW1wbGUsIHdpdGggdXNlci1zdXBwbGllZCBkYXRhIHdoZXJlIHlvdSBkb24ndFxuICoga25vdyBpbiBhZHZhbmNlIHdoYXQgcHJvamVjdGlvbnMgYXJlIG5lZWRlZCwgeW91IGNhbiBpbml0aWFsbHkgbG9hZCBtaW5pbWFsXG4gKiBzdXBwb3J0IGFuZCB0aGVuIGxvYWQgd2hpY2hldmVyIGFyZSByZXF1ZXN0ZWQuXG4gKlxuICogTm90ZSB0aGF0IFByb2o0anMgZG9lcyBub3Qgc3VwcG9ydCBwcm9qZWN0aW9uIGV4dGVudHMuIElmIHlvdSB3YW50IHRvIGFkZFxuICogb25lIGZvciBjcmVhdGluZyBkZWZhdWx0IHRpbGUgZ3JpZHMsIHlvdSBjYW4gYWRkIGl0IGFmdGVyIHRoZSBQcm9qZWN0aW9uXG4gKiBvYmplY3QgaGFzIGJlZW4gY3JlYXRlZCB3aXRoIGBzZXRFeHRlbnRgLCBmb3IgZXhhbXBsZSxcbiAqIGBnZXQoJ0VQU0c6MTIzNCcpLnNldEV4dGVudChleHRlbnQpYC5cbiAqXG4gKiBJbiBhZGRpdGlvbiB0byBQcm9qNGpzIHN1cHBvcnQsIGFueSB0cmFuc2Zvcm0gZnVuY3Rpb25zIGNhbiBiZSBhZGRlZCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXN9LiBUbyB1c2UgdGhpcywgeW91IG11c3QgZmlyc3QgY3JlYXRlXG4gKiBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBvYmplY3QgZm9yIHRoZSBuZXcgcHJvamVjdGlvbiBhbmQgYWRkIGl0IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRQcm9qZWN0aW9ufS4gWW91IGNhbiB0aGVuIGFkZCB0aGUgZm9yd2FyZCBhbmQgaW52ZXJzZVxuICogZnVuY3Rpb25zIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zfS4gU2VlXG4gKiBleGFtcGxlcy93bXMtY3VzdG9tLXByb2ogZm9yIGFuIGV4YW1wbGUgb2YgdGhpcy5cbiAqXG4gKiBOb3RlIHRoYXQgaWYgbm8gdHJhbnNmb3JtcyBhcmUgbmVlZGVkIGFuZCB5b3Ugb25seSBuZWVkIHRvIGRlZmluZSB0aGVcbiAqIHByb2plY3Rpb24sIGp1c3QgYWRkIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRQcm9qZWN0aW9ufS4gU2VlIGV4YW1wbGVzL3dtcy1uby1wcm9qIGZvciBhbiBleGFtcGxlIG9mXG4gKiB0aGlzLlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL3Byb2ovUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMsIHsgTUVURVJTX1BFUl9VTklUIH0gZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0czODU3X1BST0pFQ1RJT05TLCBmcm9tRVBTRzQzMjYsIHRvRVBTRzQzMjYsIH0gZnJvbSAnLi9wcm9qL2Vwc2czODU3LmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0c0MzI2X1BST0pFQ1RJT05TIH0gZnJvbSAnLi9wcm9qL2Vwc2c0MzI2LmpzJztcbmltcG9ydCB7IGFkZCBhcyBhZGRQcm9qLCBjbGVhciBhcyBjbGVhclByb2osIGdldCBhcyBnZXRQcm9qLCB9IGZyb20gJy4vcHJvai9wcm9qZWN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkVHJhbnNmb3JtRnVuYywgY2xlYXIgYXMgY2xlYXJUcmFuc2Zvcm1GdW5jcywgZ2V0IGFzIGdldFRyYW5zZm9ybUZ1bmMsIH0gZnJvbSAnLi9wcm9qL3RyYW5zZm9ybXMuanMnO1xuaW1wb3J0IHsgYXBwbHlUcmFuc2Zvcm0sIGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXREaXN0YW5jZSB9IGZyb20gJy4vc3BoZXJlLmpzJztcbmltcG9ydCB7IGdldFdvcmxkc0F3YXkgfSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259LCBTUlMgaWRlbnRpZmllclxuICogc3RyaW5nIG9yIHVuZGVmaW5lZC5cbiAqIEB0eXBlZGVmIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IFByb2plY3Rpb25MaWtlXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQSB0cmFuc2Zvcm0gZnVuY3Rpb24gYWNjZXB0cyBhbiBhcnJheSBvZiBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgYW4gb3B0aW9uYWxcbiAqIG91dHB1dCBhcnJheSwgYW5kIGFuIG9wdGlvbmFsIGRpbWVuc2lvbiAoZGVmYXVsdCBzaG91bGQgYmUgMikuICBUaGUgZnVuY3Rpb25cbiAqIHRyYW5zZm9ybXMgdGhlIGlucHV0IGNvb3JkaW5hdGUgdmFsdWVzLCBwb3B1bGF0ZXMgdGhlIG91dHB1dCBhcnJheSwgYW5kXG4gKiByZXR1cm5zIHRoZSBvdXRwdXQgYXJyYXkuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEFycmF5PG51bWJlcj4sIEFycmF5PG51bWJlcj49LCBudW1iZXI9KTogQXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHsgTUVURVJTX1BFUl9VTklUIH07XG5leHBvcnQgeyBQcm9qZWN0aW9uIH07XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgY29vcmRpbmF0ZSBhcnJheS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpbWVuc2lvbl0gRGltZW5zaW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGNvb3JkaW5hdGUgYXJyYXkgKG5ldyBhcnJheSwgc2FtZSBjb29yZGluYXRlXG4gKiAgICAgdmFsdWVzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lVHJhbnNmb3JtKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIG91dHB1dDtcbiAgICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9wdF9vdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQgPSBvcHRfb3V0cHV0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnB1dCBjb29yZGluYXRlIGFycmF5IChzYW1lIGFycmF5IGFzIGlucHV0KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5VHJhbnNmb3JtKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgaWYgKG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCAmJiBpbnB1dCAhPT0gb3B0X291dHB1dCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBvcHRfb3V0cHV0W2ldID0gaW5wdXRbaV07XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQgPSBvcHRfb3V0cHV0O1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXQ7XG59XG4vKipcbiAqIEFkZCBhIFByb2plY3Rpb24gb2JqZWN0IHRvIHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBwcm9qZWN0aW9ucyB0aGF0IGNhbiBiZVxuICogbG9va2VkIHVwIGJ5IHRoZWlyIGNvZGUuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uIFByb2plY3Rpb24gaW5zdGFuY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICBhZGRQcm9qKHByb2plY3Rpb24uZ2V0Q29kZSgpLCBwcm9qZWN0aW9uKTtcbiAgICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24sIHByb2plY3Rpb24sIGNsb25lVHJhbnNmb3JtKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICAgIHByb2plY3Rpb25zLmZvckVhY2goYWRkUHJvamVjdGlvbik7XG59XG4vKipcbiAqIEZldGNoZXMgYSBQcm9qZWN0aW9uIG9iamVjdCBmb3IgdGhlIGNvZGUgc3BlY2lmaWVkLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25MaWtlIEVpdGhlciBhIGNvZGUgc3RyaW5nIHdoaWNoIGlzXG4gKiAgICAgYSBjb21iaW5hdGlvbiBvZiBhdXRob3JpdHkgYW5kIGlkZW50aWZpZXIgc3VjaCBhcyBcIkVQU0c6NDMyNlwiLCBvciBhblxuICogICAgIGV4aXN0aW5nIHByb2plY3Rpb24gb2JqZWN0LCBvciB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uIG9iamVjdCwgb3IgbnVsbCBpZiBub3QgaW4gbGlzdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChwcm9qZWN0aW9uTGlrZSkge1xuICAgIHJldHVybiB0eXBlb2YgcHJvamVjdGlvbkxpa2UgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZ2V0UHJvaigvKiogQHR5cGUge3N0cmluZ30gKi8gKHByb2plY3Rpb25MaWtlKSlcbiAgICAgICAgOiAvKiogQHR5cGUge1Byb2plY3Rpb259ICovIChwcm9qZWN0aW9uTGlrZSkgfHwgbnVsbDtcbn1cbi8qKlxuICogR2V0IHRoZSByZXNvbHV0aW9uIG9mIHRoZSBwb2ludCBpbiBkZWdyZWVzIG9yIGRpc3RhbmNlIHVuaXRzLlxuICogRm9yIHByb2plY3Rpb25zIHdpdGggZGVncmVlcyBhcyB0aGUgdW5pdCB0aGlzIHdpbGwgc2ltcGx5IHJldHVybiB0aGVcbiAqIHByb3ZpZGVkIHJlc29sdXRpb24uIEZvciBvdGhlciBwcm9qZWN0aW9ucyB0aGUgcG9pbnQgcmVzb2x1dGlvbiBpc1xuICogYnkgZGVmYXVsdCBlc3RpbWF0ZWQgYnkgdHJhbnNmb3JtaW5nIHRoZSAncG9pbnQnIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAqIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSxcbiAqIGFuZCB0YWtpbmcgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gKiBBIGN1c3RvbSBmdW5jdGlvbiBjYW4gYmUgcHJvdmlkZWQgZm9yIGEgc3BlY2lmaWMgcHJvamVjdGlvbiwgZWl0aGVyXG4gKiBieSBzZXR0aW5nIHRoZSBgZ2V0UG9pbnRSZXNvbHV0aW9uYCBvcHRpb24gaW4gdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBjb25zdHJ1Y3RvciBvciBieSB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbiNzZXRHZXRQb2ludFJlc29sdXRpb259IHRvIGNoYW5nZSBhbiBleGlzdGluZ1xuICogcHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gTm9taW5hbCByZXNvbHV0aW9uIGluIHByb2plY3Rpb24gdW5pdHMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludCB0byBmaW5kIGFkanVzdGVkIHJlc29sdXRpb24gYXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Vbml0cy5qc1wiKS5kZWZhdWx0fSBbb3B0X3VuaXRzXSBVbml0cyB0byBnZXQgdGhlIHBvaW50IHJlc29sdXRpb24gaW4uXG4gKiBEZWZhdWx0IGlzIHRoZSBwcm9qZWN0aW9uJ3MgdW5pdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBvaW50IHJlc29sdXRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludFJlc29sdXRpb24ocHJvamVjdGlvbiwgcmVzb2x1dGlvbiwgcG9pbnQsIG9wdF91bml0cykge1xuICAgIHByb2plY3Rpb24gPSBnZXQocHJvamVjdGlvbik7XG4gICAgdmFyIHBvaW50UmVzb2x1dGlvbjtcbiAgICB2YXIgZ2V0dGVyID0gcHJvamVjdGlvbi5nZXRQb2ludFJlc29sdXRpb25GdW5jKCk7XG4gICAgaWYgKGdldHRlcikge1xuICAgICAgICBwb2ludFJlc29sdXRpb24gPSBnZXR0ZXIocmVzb2x1dGlvbiwgcG9pbnQpO1xuICAgICAgICBpZiAob3B0X3VuaXRzICYmIG9wdF91bml0cyAhPT0gcHJvamVjdGlvbi5nZXRVbml0cygpKSB7XG4gICAgICAgICAgICB2YXIgbWV0ZXJzUGVyVW5pdCA9IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICAgICAgaWYgKG1ldGVyc1BlclVuaXQpIHtcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPVxuICAgICAgICAgICAgICAgICAgICAocG9pbnRSZXNvbHV0aW9uICogbWV0ZXJzUGVyVW5pdCkgLyBNRVRFUlNfUEVSX1VOSVRbb3B0X3VuaXRzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHVuaXRzID0gcHJvamVjdGlvbi5nZXRVbml0cygpO1xuICAgICAgICBpZiAoKHVuaXRzID09IFVuaXRzLkRFR1JFRVMgJiYgIW9wdF91bml0cykgfHwgb3B0X3VuaXRzID09IFVuaXRzLkRFR1JFRVMpIHtcbiAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBFc3RpbWF0ZSBwb2ludCByZXNvbHV0aW9uIGJ5IHRyYW5zZm9ybWluZyB0aGUgY2VudGVyIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAgICAgICAgICAgIC8vIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSwgYW5kIHRha2luZyB0aGVcbiAgICAgICAgICAgIC8vIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICAgICAgICB2YXIgdG9FUFNHNDMyNl8xID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHByb2plY3Rpb24sIGdldCgnRVBTRzo0MzI2JykpO1xuICAgICAgICAgICAgaWYgKHRvRVBTRzQzMjZfMSA9PT0gaWRlbnRpdHlUcmFuc2Zvcm0gJiYgdW5pdHMgIT09IFVuaXRzLkRFR1JFRVMpIHtcbiAgICAgICAgICAgICAgICAvLyBubyB0cmFuc2Zvcm0gaXMgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbiAqIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gW1xuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSAtIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0gKyByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSAtIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0gKyByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHZlcnRpY2VzID0gdG9FUFNHNDMyNl8xKHZlcnRpY2VzLCB2ZXJ0aWNlcywgMik7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gZ2V0RGlzdGFuY2UodmVydGljZXMuc2xpY2UoMCwgMiksIHZlcnRpY2VzLnNsaWNlKDIsIDQpKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZ2V0RGlzdGFuY2UodmVydGljZXMuc2xpY2UoNCwgNiksIHZlcnRpY2VzLnNsaWNlKDYsIDgpKTtcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSAod2lkdGggKyBoZWlnaHQpIC8gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZXRlcnNQZXJVbml0ID0gb3B0X3VuaXRzXG4gICAgICAgICAgICAgICAgPyBNRVRFUlNfUEVSX1VOSVRbb3B0X3VuaXRzXVxuICAgICAgICAgICAgICAgIDogcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgICAgICBpZiAobWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uIC89IG1ldGVyc1BlclVuaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvaW50UmVzb2x1dGlvbjtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0aGF0IGRvbid0IGFsdGVyIGNvb3JkaW5hdGVzLiBUaG9zZSBhbGxvd1xuICogdG8gdHJhbnNmb3JtIGJldHdlZW4gcHJvamVjdGlvbnMgd2l0aCBlcXVhbCBtZWFuaW5nLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zIFByb2plY3Rpb25zLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKHByb2plY3Rpb25zKSB7XG4gICAgYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpO1xuICAgIHByb2plY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZSwgZGVzdGluYXRpb24sIGNsb25lVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBhbnkgcHJvamVjdGlvblxuICogaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMxIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMyIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gZm9yd2FyZFRyYW5zZm9ybSBUcmFuc2Zvcm1hdGlvbiBmcm9tIGFueVxuICogICBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24yLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gaW52ZXJzZVRyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSBhbnkgcHJvamVjdGlvblxuICogICBpbiBwcm9qZWN0aW9uMiB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMS4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50VHJhbnNmb3Jtcyhwcm9qZWN0aW9uczEsIHByb2plY3Rpb25zMiwgZm9yd2FyZFRyYW5zZm9ybSwgaW52ZXJzZVRyYW5zZm9ybSkge1xuICAgIHByb2plY3Rpb25zMS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9qZWN0aW9uMSkge1xuICAgICAgICBwcm9qZWN0aW9uczIuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjIpIHtcbiAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yLCBmb3J3YXJkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjIsIHByb2plY3Rpb24xLCBpbnZlcnNlVHJhbnNmb3JtKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIENsZWFyIGFsbCBjYWNoZWQgcHJvamVjdGlvbnMgYW5kIHRyYW5zZm9ybXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckFsbFByb2plY3Rpb25zKCkge1xuICAgIGNsZWFyUHJvaigpO1xuICAgIGNsZWFyVHJhbnNmb3JtRnVuY3MoKTtcbn1cbi8qKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0Q29kZSBEZWZhdWx0IGNvZGUuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbihwcm9qZWN0aW9uLCBkZWZhdWx0Q29kZSkge1xuICAgIGlmICghcHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZ2V0KGRlZmF1bHRDb2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHByb2plY3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBnZXQocHJvamVjdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtQcm9qZWN0aW9ufSAqLyAocHJvamVjdGlvbik7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qflRyYW5zZm9ybUZ1bmN0aW9ufSBmcm9tIGEgc2ltcGxlIDJEIGNvb3JkaW5hdGUgdHJhbnNmb3JtXG4gKiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRUcmFuc2Zvcm0gQ29vcmRpbmF0ZVxuICogICAgIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShjb29yZFRyYW5zZm9ybSkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICB2YXIgZGltZW5zaW9uID0gb3B0X2RpbWVuc2lvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2RpbWVuc2lvbiA6IDI7XG4gICAgICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQgPyBvcHRfb3V0cHV0IDogbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gY29vcmRUcmFuc2Zvcm0oW2lucHV0W2ldLCBpbnB1dFtpICsgMV1dKTtcbiAgICAgICAgICAgIG91dHB1dFtpXSA9IHBvaW50WzBdO1xuICAgICAgICAgICAgb3V0cHV0W2kgKyAxXSA9IHBvaW50WzFdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDE7IGogPj0gMjsgLS1qKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W2kgKyBqXSA9IGlucHV0W2kgKyBqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0pO1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb25zIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgYmV0d2VlbiB0aGVcbiAqIHNvdXJjZSBwcm9qZWN0aW9uIGFuZCB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIFRoZSBmb3J3YXJkIGFuZCBpbnZlcnNlIGZ1bmN0aW9ucyBjb252ZXJ0IGNvb3JkaW5hdGUgcGFpcnM7IHRoaXMgZnVuY3Rpb25cbiAqIGNvbnZlcnRzIHRoZXNlIGludG8gdGhlIGZ1bmN0aW9ucyB1c2VkIGludGVybmFsbHkgd2hpY2ggYWxzbyBoYW5kbGVcbiAqIGV4dGVudHMgYW5kIGNvb3JkaW5hdGUgYXJyYXlzLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGZvcndhcmQgVGhlIGZvcndhcmQgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvblxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBpbnZlcnNlIFRoZSBpbnZlcnNlIHRyYW5zZm9ybVxuICogICAgIGZ1bmN0aW9uICh0aGF0IGlzLCBmcm9tIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uIHRvIHRoZSBzb3VyY2VcbiAqICAgICBwcm9qZWN0aW9uKSB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zXG4gKiAgICAgdGhlIHRyYW5zZm9ybWVkIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zKHNvdXJjZSwgZGVzdGluYXRpb24sIGZvcndhcmQsIGludmVyc2UpIHtcbiAgICB2YXIgc291cmNlUHJvaiA9IGdldChzb3VyY2UpO1xuICAgIHZhciBkZXN0UHJvaiA9IGdldChkZXN0aW5hdGlvbik7XG4gICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2VQcm9qLCBkZXN0UHJvaiwgY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oZm9yd2FyZCkpO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMoZGVzdFByb2osIHNvdXJjZVByb2osIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGludmVyc2UpKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgZnJvbSBsb25naXR1ZGUvbGF0aXR1ZGUgdG8gYSBkaWZmZXJlbnQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZSBhcyBsb25naXR1ZGUgYW5kIGxhdGl0dWRlLCBpLmUuXG4gKiAgICAgYW4gYXJyYXkgd2l0aCBsb25naXR1ZGUgYXMgMXN0IGFuZCBsYXRpdHVkZSBhcyAybmQgZWxlbWVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IFtvcHRfcHJvamVjdGlvbl0gVGFyZ2V0IHByb2plY3Rpb24uIFRoZVxuICogICAgIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgcHJvamVjdGVkIHRvIHRoZSB0YXJnZXQgcHJvamVjdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Mb25MYXQoY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24pIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsICdFUFNHOjQzMjYnLCBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3Jyk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIHRvIGxvbmdpdHVkZS9sYXRpdHVkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgUHJvamVjdGVkIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBbb3B0X3Byb2plY3Rpb25dIFByb2plY3Rpb24gb2YgdGhlIGNvb3JkaW5hdGUuXG4gKiAgICAgVGhlIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLiBhbiBhcnJheVxuICogICAgIHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0xvbkxhdChjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbikge1xuICAgIHZhciBsb25MYXQgPSB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcbiAgICB2YXIgbG9uID0gbG9uTGF0WzBdO1xuICAgIGlmIChsb24gPCAtMTgwIHx8IGxvbiA+IDE4MCkge1xuICAgICAgICBsb25MYXRbMF0gPSBtb2R1bG8obG9uICsgMTgwLCAzNjApIC0gMTgwO1xuICAgIH1cbiAgICByZXR1cm4gbG9uTGF0O1xufVxuLyoqXG4gKiBDaGVja3MgaWYgdHdvIHByb2plY3Rpb25zIGFyZSB0aGUgc2FtZSwgdGhhdCBpcyBldmVyeSBjb29yZGluYXRlIGluIG9uZVxuICogcHJvamVjdGlvbiBkb2VzIHJlcHJlc2VudCB0aGUgc2FtZSBnZW9ncmFwaGljIHBvaW50IGFzIHRoZSBzYW1lIGNvb3JkaW5hdGUgaW5cbiAqIHRoZSBvdGhlciBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjEgUHJvamVjdGlvbiAxLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uMiBQcm9qZWN0aW9uIDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBFcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1aXZhbGVudChwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpIHtcbiAgICBpZiAocHJvamVjdGlvbjEgPT09IHByb2plY3Rpb24yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgZXF1YWxVbml0cyA9IHByb2plY3Rpb24xLmdldFVuaXRzKCkgPT09IHByb2plY3Rpb24yLmdldFVuaXRzKCk7XG4gICAgaWYgKHByb2plY3Rpb24xLmdldENvZGUoKSA9PT0gcHJvamVjdGlvbjIuZ2V0Q29kZSgpKSB7XG4gICAgICAgIHJldHVybiBlcXVhbFVuaXRzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMgPT09IGNsb25lVHJhbnNmb3JtICYmIGVxdWFsVW5pdHM7XG4gICAgfVxufVxuLyoqXG4gKiBTZWFyY2hlcyBpbiB0aGUgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIGZvciB0aGUgZnVuY3Rpb24gZm9yIGNvbnZlcnRpbmdcbiAqIGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvamVjdGlvbiBTb3VyY2UgUHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBQcm9qZWN0aW9uXG4gKiAgICAgb2JqZWN0LlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZVByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvblByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnVuYyhzb3VyY2VDb2RlLCBkZXN0aW5hdGlvbkNvZGUpO1xuICAgIGlmICghdHJhbnNmb3JtRnVuYykge1xuICAgICAgICB0cmFuc2Zvcm1GdW5jID0gaWRlbnRpdHlUcmFuc2Zvcm07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jO1xufVxuLyoqXG4gKiBHaXZlbiB0aGUgcHJvamVjdGlvbi1saWtlIG9iamVjdHMsIHNlYXJjaGVzIGZvciBhIHRyYW5zZm9ybWF0aW9uXG4gKiBmdW5jdGlvbiB0byBjb252ZXJ0IGEgY29vcmRpbmF0ZXMgYXJyYXkgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlXG4gKiBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gZ2V0KHNvdXJjZSk7XG4gICAgdmFyIGRlc3RpbmF0aW9uUHJvamVjdGlvbiA9IGdldChkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGlzIHJldHVybnMgYSBuZXcgY29vcmRpbmF0ZSAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2oudHJhbnNmb3JtRXh0ZW50fSBmb3IgZXh0ZW50IHRyYW5zZm9ybWF0aW9uLlxuICogU2VlIHRoZSB0cmFuc2Zvcm0gbWV0aG9kIG9mIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeX5HZW9tZXRyeX0gYW5kIGl0c1xuICogc3ViY2xhc3NlcyBmb3IgZ2VvbWV0cnkgdHJhbnNmb3Jtcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyhjb29yZGluYXRlLCB1bmRlZmluZWQsIGNvb3JkaW5hdGUubGVuZ3RoKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleHRlbnQgZnJvbSBzb3VyY2UgcHJvamVjdGlvbiB0byBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpc1xuICogcmV0dXJucyBhIG5ldyBleHRlbnQgKGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zdG9wc10gTnVtYmVyIG9mIHN0b3BzIHBlciBzaWRlIHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm0uXG4gKiBCeSBkZWZhdWx0IG9ubHkgdGhlIGNvcm5lcnMgYXJlIHVzZWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSB0cmFuc2Zvcm1lZCBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2UsIGRlc3RpbmF0aW9uLCBvcHRfc3RvcHMpIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1GdW5jLCB1bmRlZmluZWQsIG9wdF9zdG9wcyk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHBvaW50IHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0aW5hdGlvblByb2plY3Rpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBQb2ludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVdpdGhQcm9qZWN0aW9ucyhwb2ludCwgc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMoc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyhwb2ludCk7XG59XG4vKipcbiAqIEB0eXBlIHs/UHJvamVjdGlvbn1cbiAqL1xudmFyIHVzZXJQcm9qZWN0aW9uID0gbnVsbDtcbi8qKlxuICogU2V0IHRoZSBwcm9qZWN0aW9uIGZvciBjb29yZGluYXRlcyBzdXBwbGllZCBmcm9tIGFuZCByZXR1cm5lZCBieSBBUEkgbWV0aG9kcy5cbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXJcbiAqIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZCBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFVzZXJQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICB1c2VyUHJvamVjdGlvbiA9IGdldChwcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogQ2xlYXIgdGhlIHVzZXIgcHJvamVjdGlvbiBpZiBzZXQuICBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2ZcbiAqIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlciBwcm9qZWN0aW9ucyBpcyBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGRcbiAqIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJVc2VyUHJvamVjdGlvbigpIHtcbiAgICB1c2VyUHJvamVjdGlvbiA9IG51bGw7XG59XG4vKipcbiAqIEdldCB0aGUgcHJvamVjdGlvbiBmb3IgY29vcmRpbmF0ZXMgc3VwcGxpZWQgZnJvbSBhbmQgcmV0dXJuZWQgYnkgQVBJIG1ldGhvZHMuXG4gKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2YgdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyXG4gKiBwcm9qZWN0aW9ucyBpcyBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKiBAcmV0dXJuIHs/UHJvamVjdGlvbn0gVGhlIHVzZXIgcHJvamVjdGlvbiAob3IgbnVsbCBpZiBub3Qgc2V0KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJQcm9qZWN0aW9uKCkge1xuICAgIHJldHVybiB1c2VyUHJvamVjdGlvbjtcbn1cbi8qKlxuICogVXNlIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKFdHUy04NCBkYXR1bSkgaW4gQVBJIG1ldGhvZHMuICBOb3RlIHRoYXQgdGhpc1xuICogbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlciBwcm9qZWN0aW9ucyBpc1xuICogbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlR2VvZ3JhcGhpYygpIHtcbiAgICBzZXRVc2VyUHJvamVjdGlvbignRVBTRzo0MzI2Jyk7XG59XG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2VQcm9qZWN0aW9uIFRoZSBpbnB1dCBjb29yZGluYXRlIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgaW5wdXQgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gY29vcmRpbmF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCBzb3VyY2VQcm9qZWN0aW9uLCB1c2VyUHJvamVjdGlvbik7XG59XG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgZnJvbSB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIGRlc3RQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gY29vcmRpbmF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gYW4gZXh0ZW50IHRyYW5zZm9ybWVkIGludG8gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgZXh0ZW50IGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBJbnB1dCBleHRlbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2VQcm9qZWN0aW9uIFRoZSBpbnB1dCBleHRlbnQgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIGlucHV0IGV4dGVudCBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Vc2VyRXh0ZW50KGV4dGVudCwgc291cmNlUHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHNvdXJjZVByb2plY3Rpb24sIHVzZXJQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIGFuIGV4dGVudCB0cmFuc2Zvcm1lZCBmcm9tIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGV4dGVudCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgSW5wdXQgZXh0ZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSBpbnB1dCBleHRlbnQgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckV4dGVudChleHRlbnQsIGRlc3RQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgdXNlclByb2plY3Rpb24sIGRlc3RQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHNhZmUgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb24gZnJvbSBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogXCJTYWZlXCIgbWVhbnMgdGhhdCBpdCBjYW4gaGFuZGxlIHdyYXBwaW5nIG9mIHgtY29vcmRpbmF0ZXMgZm9yIGdsb2JhbCBwcm9qZWN0aW9ucyxcbiAqIGFuZCB0aGF0IGNvb3JkaW5hdGVzIGV4Y2VlZGluZyB0aGUgc291cmNlIHByb2plY3Rpb24gdmFsaWRpdHkgZXh0ZW50J3MgcmFuZ2Ugd2lsbCBiZVxuICogY2xhbXBlZCB0byB0aGUgdmFsaWRpdHkgcmFuZ2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RQcm9qIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRyYW5zZm9ybSBUcmFuc2Zvcm0gZnVuY3Rpb24gKHNvdXJjZSB0byBkZXN0aWF0aW9uKS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFNhZmUgdHJhbnNmb3JtIGZ1bmN0aW9uIChzb3VyY2UgdG8gZGVzdGlhdGlvbikuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTYWZlQ29vcmRpbmF0ZVRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0UHJvaiwgdHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChjb29yZCkge1xuICAgICAgICB2YXIgc291cmNlWCA9IGNvb3JkWzBdO1xuICAgICAgICB2YXIgc291cmNlWSA9IGNvb3JkWzFdO1xuICAgICAgICB2YXIgdHJhbnNmb3JtZWQsIHdvcmxkc0F3YXk7XG4gICAgICAgIGlmIChzb3VyY2VQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgdmFyIHNvdXJjZUV4dGVudFdpZHRoID0gZ2V0V2lkdGgoc291cmNlRXh0ZW50KTtcbiAgICAgICAgICAgIHdvcmxkc0F3YXkgPSBnZXRXb3JsZHNBd2F5KGNvb3JkLCBzb3VyY2VQcm9qLCBzb3VyY2VFeHRlbnRXaWR0aCk7XG4gICAgICAgICAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgICAgICAgICAgIC8vIE1vdmUgeCB0byB0aGUgcmVhbCB3b3JsZFxuICAgICAgICAgICAgICAgIHNvdXJjZVggPSBzb3VyY2VYIC0gd29ybGRzQXdheSAqIHNvdXJjZUV4dGVudFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc291cmNlWCA9IGNsYW1wKHNvdXJjZVgsIHNvdXJjZUV4dGVudFswXSwgc291cmNlRXh0ZW50WzJdKTtcbiAgICAgICAgICAgIHNvdXJjZVkgPSBjbGFtcChzb3VyY2VZLCBzb3VyY2VFeHRlbnRbMV0sIHNvdXJjZUV4dGVudFszXSk7XG4gICAgICAgICAgICB0cmFuc2Zvcm1lZCA9IHRyYW5zZm9ybShbc291cmNlWCwgc291cmNlWV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oY29vcmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3b3JsZHNBd2F5ICYmIGRlc3RQcm9qLmNhbldyYXBYKCkpIHtcbiAgICAgICAgICAgIC8vIE1vdmUgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZSBiYWNrIHRvIHRoZSBvZmZzZXQgd29ybGRcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkWzBdICs9IHdvcmxkc0F3YXkgKiBnZXRXaWR0aChkZXN0UHJvai5nZXRFeHRlbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xuICAgIH07XG59XG4vKipcbiAqIEFkZCB0cmFuc2Zvcm1zIHRvIGFuZCBmcm9tIEVQU0c6NDMyNiBhbmQgRVBTRzozODU3LiAgVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWRcbiAqIGJ5IHdoZW4gdGhpcyBtb2R1bGUgaXMgZXhlY3V0ZWQgYW5kIHNob3VsZCBvbmx5IG5lZWQgdG8gYmUgY2FsbGVkIGFnYWluIGFmdGVyXG4gKiBgY2xlYXJBbGxQcm9qZWN0aW9ucygpYCBpcyBjYWxsZWQgKGUuZy4gaW4gdGVzdHMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29tbW9uKCkge1xuICAgIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcyB0byBjb252ZXJ0IHdpdGhpbiBzZXQgb2ZcbiAgICAvLyBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gICAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0czODU3X1BST0pFQ1RJT05TKTtcbiAgICBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMoRVBTRzQzMjZfUFJPSkVDVElPTlMpO1xuICAgIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdG8gY29udmVydCBFUFNHOjQzMjYgbGlrZSBjb29yZGluYXRlcyB0byBFUFNHOjM4NTcgbGlrZVxuICAgIC8vIGNvb3JkaW5hdGVzIGFuZCBiYWNrLlxuICAgIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKEVQU0c0MzI2X1BST0pFQ1RJT05TLCBFUFNHMzg1N19QUk9KRUNUSU9OUywgZnJvbUVQU0c0MzI2LCB0b0VQU0c0MzI2KTtcbn1cbmFkZENvbW1vbigpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvai5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXJcbiAqL1xuaW1wb3J0IENhbnZhc0xheWVyUmVuZGVyZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgVGlsZVJhbmdlIGZyb20gJy4uLy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uLy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSwgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBtYWtlSW52ZXJzZSwgfSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi4vLi4vb2JqLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVtcHR5LCBlcXVhbHMsIGdldEludGVyc2VjdGlvbiwgZ2V0VG9wTGVmdCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZnJvbVVzZXJFeHRlbnQgfSBmcm9tICcuLi8uLi9wcm9qLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uLy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbmltcG9ydCB7IHRvU3RyaW5nIGFzIHRvVHJhbnNmb3JtU3RyaW5nIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIHJlbmRlcmVyIGZvciB0aWxlIGxheWVycy5cbiAqIEBhcGlcbiAqL1xudmFyIENhbnZhc1RpbGVMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVMYXllciBUaWxlIGxheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRpbGVMYXllcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0aWxlTGF5ZXIpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXJlZCBleHRlbnQgaGFzIGNoYW5nZWQgc2luY2UgdGhlIHByZXZpb3VzIGByZW5kZXJGcmFtZSgpYCBjYWxsXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRQaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFByb2plY3Rpb24gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRSZXZpc2lvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRUaWxlcyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5uZXdUaWxlc18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG1wVGlsZVJhbmdlXyA9IG5ldyBUaWxlUmFuZ2UoMCwgMCwgMCwgMCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBpcyBkcmF3YWJsZS5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaXNEcmF3YWJsZVRpbGUgPSBmdW5jdGlvbiAodGlsZSkge1xuICAgICAgICB2YXIgdGlsZUxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgdGlsZVN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICB2YXIgdXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IHRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCk7XG4gICAgICAgIHJldHVybiAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5MT0FERUQgfHxcbiAgICAgICAgICAgIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuRU1QVFkgfHxcbiAgICAgICAgICAgICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SICYmICF1c2VJbnRlcmltVGlsZXNPbkVycm9yKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB2YXIgdGlsZUxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgdGlsZVNvdXJjZSA9IHRpbGVMYXllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgdmFyIHRpbGUgPSB0aWxlU291cmNlLmdldFRpbGUoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICBpZiAoIXRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBXaGVuIHVzZUludGVyaW1UaWxlc09uRXJyb3IgaXMgZmFsc2UsIHdlIGNvbnNpZGVyIHRoZSBlcnJvciB0aWxlIGFzIGxvYWRlZC5cbiAgICAgICAgICAgICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5MT0FERUQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGlsZUxheWVyLmdldFByZWxvYWQoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBQcmVsb2FkZWQgdGlsZXMgZm9yIGxvd2VyIHJlc29sdXRpb25zIG1pZ2h0IGhhdmUgZmluaXNoZWQgbG9hZGluZy5cbiAgICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgICB0aWxlID0gdGlsZS5nZXRJbnRlcmltVGlsZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufHZvaWR9IElmIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5sb2FkZWRUaWxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAodGlsZXMsIHpvb20sIHRpbGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmxvYWRlZFRpbGVDYWxsYmFjay5jYWxsKHRoaXMsIHRpbGVzLCB6b29tLCB0aWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciByZW5kZXIgc2hvdWxkIGJlIGNhbGxlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVyIGlzIHJlYWR5IHRvIGJlIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmdldExheWVyKCkuZ2V0U291cmNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIGxheWVyLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFRhcmdldCB0aGF0IG1heSBiZSB1c2VkIHRvIHJlbmRlciBjb250ZW50IHRvLlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5W2ZyYW1lU3RhdGUubGF5ZXJJbmRleF07XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHZpZXdSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgICAgIHZhciB2aWV3Q2VudGVyID0gdmlld1N0YXRlLmNlbnRlcjtcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgICAgICB2YXIgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2UgPSB0aWxlTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciBzb3VyY2VSZXZpc2lvbiA9IHRpbGVTb3VyY2UuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gdGlsZVNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciB6ID0gdGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24odmlld1Jlc29sdXRpb24sIHRpbGVTb3VyY2UuekRpcmVjdGlvbik7XG4gICAgICAgIHZhciB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciBleHRlbnQgPSBmcmFtZVN0YXRlLmV4dGVudDtcbiAgICAgICAgdmFyIGxheWVyRXh0ZW50ID0gbGF5ZXJTdGF0ZS5leHRlbnQgJiYgZnJvbVVzZXJFeHRlbnQobGF5ZXJTdGF0ZS5leHRlbnQsIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIGV4dGVudCA9IGdldEludGVyc2VjdGlvbihleHRlbnQsIGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVQaXhlbFJhdGlvID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAgICAgLy8gZGVzaXJlZCBkaW1lbnNpb25zIG9mIHRoZSBjYW52YXMgaW4gcGl4ZWxzXG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzBdICogdGlsZVBpeGVsUmF0aW8pO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5yb3VuZChmcmFtZVN0YXRlLnNpemVbMV0gKiB0aWxlUGl4ZWxSYXRpbyk7XG4gICAgICAgIGlmIChyb3RhdGlvbikge1xuICAgICAgICAgICAgdmFyIHNpemUgPSBNYXRoLnJvdW5kKE1hdGguc3FydCh3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0KSk7XG4gICAgICAgICAgICB3aWR0aCA9IHNpemU7XG4gICAgICAgICAgICBoZWlnaHQgPSBzaXplO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkeCA9ICh0aWxlUmVzb2x1dGlvbiAqIHdpZHRoKSAvIDIgLyB0aWxlUGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIGR5ID0gKHRpbGVSZXNvbHV0aW9uICogaGVpZ2h0KSAvIDIgLyB0aWxlUGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIGNhbnZhc0V4dGVudCA9IFtcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMF0gLSBkeCxcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMV0gLSBkeSxcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMF0gKyBkeCxcbiAgICAgICAgICAgIHZpZXdDZW50ZXJbMV0gKyBkeSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciB0aWxlc1RvRHJhd0J5WiA9IHt9O1xuICAgICAgICB0aWxlc1RvRHJhd0J5Wlt6XSA9IHt9O1xuICAgICAgICB2YXIgZmluZExvYWRlZFRpbGVzID0gdGhpcy5jcmVhdGVMb2FkZWRUaWxlRmluZGVyKHRpbGVTb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzVG9EcmF3QnlaKTtcbiAgICAgICAgdmFyIHRtcEV4dGVudCA9IHRoaXMudG1wRXh0ZW50O1xuICAgICAgICB2YXIgdG1wVGlsZVJhbmdlID0gdGhpcy50bXBUaWxlUmFuZ2VfO1xuICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciB4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgICAgICAgZm9yICh2YXIgeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZSA9IHRoaXMuZ2V0VGlsZSh6LCB4LCB5LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVzVG9EcmF3QnlaW3pdW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpblRyYW5zaXRpb24gPSB0aWxlLmluVHJhbnNpdGlvbih1aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm5ld1RpbGVzXyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpblRyYW5zaXRpb24gfHwgdGhpcy5yZW5kZXJlZFRpbGVzLmluZGV4T2YodGlsZSkgPT09IC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmV3VGlsZXNfID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRvbid0IGxvb2sgZm9yIGFsdCB0aWxlcyBpZiBhbHBoYSBpcyAxXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY2hpbGRUaWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSh0aWxlLnRpbGVDb29yZCwgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xuICAgICAgICAgICAgICAgIHZhciBjb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkVGlsZVJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdmVyZWQgPSBmaW5kTG9hZGVkVGlsZXMoeiArIDEsIGNoaWxkVGlsZVJhbmdlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFjb3ZlcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVHcmlkLmZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UodGlsZS50aWxlQ29vcmQsIGZpbmRMb2FkZWRUaWxlcywgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgY2FudmFzU2NhbGUgPSB0aWxlUmVzb2x1dGlvbiAvIHZpZXdSZXNvbHV0aW9uO1xuICAgICAgICAvLyBzZXQgZm9yd2FyZCBhbmQgaW52ZXJzZSBwaXhlbCB0cmFuc2Zvcm1zXG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odGhpcy5waXhlbFRyYW5zZm9ybSwgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMiwgMSAvIHRpbGVQaXhlbFJhdGlvLCAxIC8gdGlsZVBpeGVsUmF0aW8sIHJvdGF0aW9uLCAtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMik7XG4gICAgICAgIHZhciBjYW52YXNUcmFuc2Zvcm0gPSB0b1RyYW5zZm9ybVN0cmluZyh0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgdGhpcy51c2VDb250YWluZXIodGFyZ2V0LCBjYW52YXNUcmFuc2Zvcm0sIGxheWVyU3RhdGUub3BhY2l0eSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIG1ha2VJbnZlcnNlKHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCB0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgLy8gc2V0IHNjYWxlIHRyYW5zZm9ybSBmb3IgY2FsY3VsYXRpbmcgdGlsZSBwb3NpdGlvbnMgb24gdGhlIGNhbnZhc1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMudGVtcFRyYW5zZm9ybSwgd2lkdGggLyAyLCBoZWlnaHQgLyAyLCBjYW52YXNTY2FsZSwgY2FudmFzU2NhbGUsIDAsIC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyKTtcbiAgICAgICAgaWYgKGNhbnZhcy53aWR0aCAhPSB3aWR0aCB8fCBjYW52YXMuaGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmNvbnRhaW5lclJldXNlZCkge1xuICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNsaXBVbnJvdGF0ZWQoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbihjb250ZXh0LCB0aWxlU291cmNlLmdldENvbnRleHRPcHRpb25zKCkpO1xuICAgICAgICB0aGlzLnByZVJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICAgICAgdmFyIHpzID0gT2JqZWN0LmtleXModGlsZXNUb0RyYXdCeVopLm1hcChOdW1iZXIpO1xuICAgICAgICB6cy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgICAgICB2YXIgY2xpcHMsIGNsaXBacywgY3VycmVudENsaXA7XG4gICAgICAgIGlmIChsYXllclN0YXRlLm9wYWNpdHkgPT09IDEgJiZcbiAgICAgICAgICAgICghdGhpcy5jb250YWluZXJSZXVzZWQgfHxcbiAgICAgICAgICAgICAgICB0aWxlU291cmNlLmdldE9wYXF1ZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSkpIHtcbiAgICAgICAgICAgIHpzID0genMucmV2ZXJzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpcHMgPSBbXTtcbiAgICAgICAgICAgIGNsaXBacyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSB6cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRaID0genNbaV07XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbGVQaXhlbFNpemUgPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFNpemUoY3VycmVudFosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihjdXJyZW50Wik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFNjYWxlID0gY3VycmVudFJlc29sdXRpb24gLyB0aWxlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBkeF8xID0gY3VycmVudFRpbGVQaXhlbFNpemVbMF0gKiBjdXJyZW50U2NhbGUgKiBjYW52YXNTY2FsZTtcbiAgICAgICAgICAgIHZhciBkeV8xID0gY3VycmVudFRpbGVQaXhlbFNpemVbMV0gKiBjdXJyZW50U2NhbGUgKiBjYW52YXNTY2FsZTtcbiAgICAgICAgICAgIHZhciBvcmlnaW5UaWxlQ29vcmQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFooZ2V0VG9wTGVmdChjYW52YXNFeHRlbnQpLCBjdXJyZW50Wik7XG4gICAgICAgICAgICB2YXIgb3JpZ2luVGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChvcmlnaW5UaWxlQ29vcmQpO1xuICAgICAgICAgICAgdmFyIG9yaWdpbl8xID0gYXBwbHlUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCBbXG4gICAgICAgICAgICAgICAgKHRpbGVQaXhlbFJhdGlvICogKG9yaWdpblRpbGVFeHRlbnRbMF0gLSBjYW52YXNFeHRlbnRbMF0pKSAvXG4gICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICh0aWxlUGl4ZWxSYXRpbyAqIChjYW52YXNFeHRlbnRbM10gLSBvcmlnaW5UaWxlRXh0ZW50WzNdKSkgL1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmVzb2x1dGlvbixcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdmFyIHRpbGVHdXR0ZXIgPSB0aWxlUGl4ZWxSYXRpbyAqIHRpbGVTb3VyY2UuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciB0aWxlc1RvRHJhdyA9IHRpbGVzVG9EcmF3QnlaW2N1cnJlbnRaXTtcbiAgICAgICAgICAgIGZvciAodmFyIHRpbGVDb29yZEtleSBpbiB0aWxlc1RvRHJhdykge1xuICAgICAgICAgICAgICAgIHZhciB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRpbGVzVG9EcmF3W3RpbGVDb29yZEtleV0pO1xuICAgICAgICAgICAgICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZWdlciBwb3NpdGlvbnMgYW5kIHNpemVzIHNvIHRoYXQgdGlsZXMgYWxpZ25cbiAgICAgICAgICAgICAgICB2YXIgeEluZGV4ID0gb3JpZ2luVGlsZUNvb3JkWzFdIC0gdGlsZUNvb3JkWzFdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0WCA9IE1hdGgucm91bmQob3JpZ2luXzFbMF0gLSAoeEluZGV4IC0gMSkgKiBkeF8xKTtcbiAgICAgICAgICAgICAgICB2YXIgeUluZGV4ID0gb3JpZ2luVGlsZUNvb3JkWzJdIC0gdGlsZUNvb3JkWzJdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0WSA9IE1hdGgucm91bmQob3JpZ2luXzFbMV0gLSAoeUluZGV4IC0gMSkgKiBkeV8xKTtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQob3JpZ2luXzFbMF0gLSB4SW5kZXggKiBkeF8xKTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IE1hdGgucm91bmQob3JpZ2luXzFbMV0gLSB5SW5kZXggKiBkeV8xKTtcbiAgICAgICAgICAgICAgICB2YXIgdyA9IG5leHRYIC0geDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IG5leHRZIC0geTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHogPT09IGN1cnJlbnRaO1xuICAgICAgICAgICAgICAgIHZhciBpblRyYW5zaXRpb24gPSB0cmFuc2l0aW9uICYmIHRpbGUuZ2V0QWxwaGEoZ2V0VWlkKHRoaXMpLCBmcmFtZVN0YXRlLnRpbWUpICE9PSAxO1xuICAgICAgICAgICAgICAgIGlmICghaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGlwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgdGlsZSB0aGF0IGFscmVhZHkgZmlsbGVkIGJ5IGEgaGlnaGVyIHogdGlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2xpcCA9IFt4LCB5LCB4ICsgdywgeSwgeCArIHcsIHkgKyBoLCB4LCB5ICsgaF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpXzEgPSAwLCBpaSA9IGNsaXBzLmxlbmd0aDsgaV8xIDwgaWk7ICsraV8xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogIT09IGN1cnJlbnRaICYmIGN1cnJlbnRaIDwgY2xpcFpzW2lfMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaXAgPSBjbGlwc1tpXzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3VudGVyLWNsb2Nrd2lzZSAob3V0ZXIgcmluZykgZm9yIGN1cnJlbnQgdGlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjdXJyZW50Q2xpcFswXSwgY3VycmVudENsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFsyXSwgY3VycmVudENsaXBbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs0XSwgY3VycmVudENsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs2XSwgY3VycmVudENsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9ja3dpc2UgKGlubmVyIHJpbmcpIGZvciBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGNsaXBbNl0sIGNsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzRdLCBjbGlwWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFsyXSwgY2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMF0sIGNsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlwcy5wdXNoKGN1cnJlbnRDbGlwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBacy5wdXNoKGN1cnJlbnRaKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RpbGVJbWFnZSh0aWxlLCBmcmFtZVN0YXRlLCB4LCB5LCB3LCBoLCB0aWxlR3V0dGVyLCB0cmFuc2l0aW9uLCBsYXllclN0YXRlLm9wYWNpdHkpO1xuICAgICAgICAgICAgICAgIGlmIChjbGlwcyAmJiAhaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMudW5zaGlmdCh0aWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVzZWRUaWxlcyhmcmFtZVN0YXRlLnVzZWRUaWxlcywgdGlsZVNvdXJjZSwgdGlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uID0gc291cmNlUmV2aXNpb247XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb247XG4gICAgICAgIHRoaXMuZXh0ZW50Q2hhbmdlZCA9XG4gICAgICAgICAgICAhdGhpcy5yZW5kZXJlZEV4dGVudF8gfHwgIWVxdWFscyh0aGlzLnJlbmRlcmVkRXh0ZW50XywgY2FudmFzRXh0ZW50KTtcbiAgICAgICAgdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBjYW52YXNFeHRlbnQ7XG4gICAgICAgIHRoaXMucmVuZGVyZWRQaXhlbFJhdGlvID0gcGl4ZWxSYXRpbztcbiAgICAgICAgdGhpcy5yZW5kZXJlZFByb2plY3Rpb24gPSBwcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLm1hbmFnZVRpbGVQeXJhbWlkKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBleHRlbnQsIHosIHRpbGVMYXllci5nZXRQcmVsb2FkKCkpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSk7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50KSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FudmFzVHJhbnNmb3JtICE9PSBjYW52YXMuc3R5bGUudHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBjYW52YXMuc3R5bGUudHJhbnNmb3JtID0gY2FudmFzVHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IExlZnQgb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVG9wIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3IFdpZHRoIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoIEhlaWdodCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIFRpbGUgZ3V0dGVyLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdHJhbnNpdGlvbiBBcHBseSBhbiBhbHBoYSB0cmFuc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmRyYXdUaWxlSW1hZ2UgPSBmdW5jdGlvbiAodGlsZSwgZnJhbWVTdGF0ZSwgeCwgeSwgdywgaCwgZ3V0dGVyLCB0cmFuc2l0aW9uLCBvcGFjaXR5KSB7XG4gICAgICAgIHZhciBpbWFnZSA9IHRoaXMuZ2V0VGlsZUltYWdlKHRpbGUpO1xuICAgICAgICBpZiAoIWltYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICAgICAgdmFyIHRpbGVBbHBoYSA9IHRyYW5zaXRpb24gPyB0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA6IDE7XG4gICAgICAgIHZhciBhbHBoYSA9IG9wYWNpdHkgKiB0aWxlQWxwaGE7XG4gICAgICAgIHZhciBhbHBoYUNoYW5nZWQgPSBhbHBoYSAhPT0gdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgICAgICBpZiAoYWxwaGFDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgZ3V0dGVyLCBndXR0ZXIsIGltYWdlLndpZHRoIC0gMiAqIGd1dHRlciwgaW1hZ2UuaGVpZ2h0IC0gMiAqIGd1dHRlciwgeCwgeSwgdywgaCk7XG4gICAgICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVBbHBoYSAhPT0gMSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB0aWxlLmVuZFRyYW5zaXRpb24odWlkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyBjb250ZXh0LmNhbnZhcyA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGltYWdlIGZyb20gYSB0aWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZUltYWdlID0gZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRpbGUuZ2V0SW1hZ2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuc2NoZWR1bGVFeHBpcmVDYWNoZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0aWxlU291cmNlKSB7XG4gICAgICAgIGlmICh0aWxlU291cmNlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBwb3N0UmVuZGVyRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZVNvdXJjZSwgbWFwLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS51c2VkVGlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVNvdXJjZS5leHBpcmVDYWNoZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uLCBmcmFtZVN0YXRlLnVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKG51bGwsIHRpbGVTb3VyY2UpO1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovIChwb3N0UmVuZGVyRnVuY3Rpb24pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9UaWxlLmpzJykuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlVXNlZFRpbGVzID0gZnVuY3Rpb24gKHVzZWRUaWxlcywgdGlsZVNvdXJjZSwgdGlsZSkge1xuICAgICAgICAvLyBGSVhNRSBzaG91bGQgd2UgdXNlIHRpbGVzVG9EcmF3QnlaIGluc3RlYWQ/XG4gICAgICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIHVzZWRUaWxlcykpIHtcbiAgICAgICAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XVt0aWxlLmdldEtleSgpXSA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYW5hZ2UgdGlsZSBweXJhbWlkLlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgYSBudW1iZXIgb2YgZnVuY3Rpb25zIHJlbGF0ZWQgdG8gdGhlIHRpbGVzIGF0IHRoZVxuICAgICAqIGN1cnJlbnQgem9vbSBhbmQgbG93ZXIgem9vbSBsZXZlbHM6XG4gICAgICogLSByZWdpc3RlcnMgaWRsZSB0aWxlcyBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzIHNvIHRoYXQgdGhleSBhcmUgbm90XG4gICAgICogICBkaXNjYXJkZWQgYnkgdGhlIHRpbGUgcXVldWVcbiAgICAgKiAtIGVucXVldWVzIG1pc3NpbmcgdGlsZXNcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50WiBDdXJyZW50IFouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgTG9hZCBsb3cgcmVzb2x1dGlvbiB0aWxlcyB1cCB0byAncHJlbG9hZCcgbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbb3B0X3RpbGVDYWxsYmFja10gVGlsZSBjYWxsYmFjay5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLm1hbmFnZVRpbGVQeXJhbWlkID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBleHRlbnQsIGN1cnJlbnRaLCBwcmVsb2FkLCBvcHRfdGlsZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMpKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdhbnRlZFRpbGVzID0gZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XTtcbiAgICAgICAgdmFyIHRpbGVRdWV1ZSA9IGZyYW1lU3RhdGUudGlsZVF1ZXVlO1xuICAgICAgICB2YXIgbWluWm9vbSA9IHRpbGVHcmlkLmdldE1pblpvb20oKTtcbiAgICAgICAgdmFyIHRpbGVDb3VudCA9IDA7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlUmFuZ2UsIHRpbGVSZXNvbHV0aW9uLCB4LCB5LCB6O1xuICAgICAgICBmb3IgKHogPSBtaW5ab29tOyB6IDw9IGN1cnJlbnRaOyArK3opIHtcbiAgICAgICAgICAgIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6LCB0aWxlUmFuZ2UpO1xuICAgICAgICAgICAgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICAgICAgZm9yICh4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgICAgICAgICAgIGZvciAoeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRaIC0geiA8PSBwcmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK3RpbGVDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUgPSB0aWxlU291cmNlLmdldFRpbGUoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FudGVkVGlsZXNbdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGlsZVF1ZXVlLmlzS2V5UXVldWVkKHRpbGUuZ2V0S2V5KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5lbnF1ZXVlKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGUudGlsZUNvb3JkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0X3RpbGVDYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0X3RpbGVDYWxsYmFjayh0aWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2UudXNlVGlsZSh6LCB4LCB5LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aWxlU291cmNlLnVwZGF0ZUNhY2hlU2l6ZSh0aWxlQ291bnQsIHByb2plY3Rpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xufShDYW52YXNMYXllclJlbmRlcmVyKSk7XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH1cbiAqL1xuQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldExheWVyO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlTGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVTdGF0ZVxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBJRExFOiAwLFxuICAgIExPQURJTkc6IDEsXG4gICAgTE9BREVEOiAyLFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRpbGUgbG9hZGluZyBmYWlsZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIEVSUk9SOiAzLFxuICAgIEVNUFRZOiA0LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVTdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1RpbGVcbiAqL1xuaW1wb3J0IEJhc2VUaWxlTGF5ZXIgZnJvbSAnLi9CYXNlVGlsZS5qcyc7XG5pbXBvcnQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgZnJvbSAnLi4vcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGVTb3VyY2VUeXBlXG4gKiBAZXh0ZW5kcyB7QmFzZVRpbGVMYXllcjxUaWxlU291cmNlVHlwZT59XG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQmFzZVRpbGUuanNcIikuT3B0aW9uczxUaWxlU291cmNlVHlwZT59IFtvcHRfb3B0aW9uc10gVGlsZSBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVMYXllcihvcHRfb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywgb3B0X29wdGlvbnMpIHx8IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHJlbmRlcmVyIGZvciB0aGlzIGxheWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IEEgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVMYXllci5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZUxheWVyO1xufShCYXNlVGlsZUxheWVyKSk7XG5leHBvcnQgZGVmYXVsdCBUaWxlTGF5ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3UHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQ0VOVEVSOiAnY2VudGVyJyxcbiAgICBSRVNPTFVUSU9OOiAncmVzb2x1dGlvbicsXG4gICAgUk9UQVRJT046ICdyb3RhdGlvbicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlld1Byb3BlcnR5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb29yZGluYXRlXG4gKi9cbmltcG9ydCB7IGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IHBhZE51bWJlciB9IGZyb20gJy4vc3RyaW5nLmpzJztcbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4geHkgY29vcmRpbmF0ZS4gRXhhbXBsZTogYFsxNiwgNDhdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBDb29yZGluYXRlXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFuZFxuICogdHJhbnNmb3JtcyBpdCBpbnRvIGEgYHtzdHJpbmd9YC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKENvb3JkaW5hdGV8dW5kZWZpbmVkKSk6IHN0cmluZ30gQ29vcmRpbmF0ZUZvcm1hdFxuICogQGFwaVxuICovXG4vKipcbiAqIEFkZCBgZGVsdGFgIHRvIGBjb29yZGluYXRlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZCByZXR1cm5lZFxuICogYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7YWRkfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgYWRkKGNvb3JkLCBbLTIsIDRdKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzUuODUsIDUxLjk4MzMzM11cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgaW5wdXQgY29vcmRpbmF0ZSBhZGp1c3RlZCBieVxuICogdGhlIGdpdmVuIGRlbHRhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvb3JkaW5hdGUsIGRlbHRhKSB7XG4gICAgY29vcmRpbmF0ZVswXSArPSArZGVsdGFbMF07XG4gICAgY29vcmRpbmF0ZVsxXSArPSArZGVsdGFbMV07XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgY2lyY2xlLlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSBjaXJjbGUgVGhlIGNpcmNsZS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQgb24gdGhlIGNpcmN1bWZlcmVuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25DaXJjbGUoY29vcmRpbmF0ZSwgY2lyY2xlKSB7XG4gICAgdmFyIHIgPSBjaXJjbGUuZ2V0UmFkaXVzKCk7XG4gICAgdmFyIGNlbnRlciA9IGNpcmNsZS5nZXRDZW50ZXIoKTtcbiAgICB2YXIgeDAgPSBjZW50ZXJbMF07XG4gICAgdmFyIHkwID0gY2VudGVyWzFdO1xuICAgIHZhciB4MSA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkxID0gY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgZHggPSB4MSAtIHgwO1xuICAgIHZhciBkeSA9IHkxIC0geTA7XG4gICAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgICAgIGR4ID0gMTtcbiAgICB9XG4gICAgdmFyIGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgIHZhciB4ID0geDAgKyAociAqIGR4KSAvIGQ7XG4gICAgdmFyIHkgPSB5MCArIChyICogZHkpIC8gZDtcbiAgICByZXR1cm4gW3gsIHldO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwb2ludCBjbG9zZXN0IHRvIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBvbiB0aGUgcGFzc2VkIHNlZ21lbnQuXG4gKiBUaGlzIGlzIHRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mIHRoZSBjb29yZGluYXRlIHRvIHRoZSBzZWdtZW50IHdoZW5cbiAqIHRoZSBmb290IGlzIG9uIHRoZSBzZWdtZW50LCBvciB0aGUgY2xvc2VzdCBzZWdtZW50IGNvb3JkaW5hdGUgd2hlbiB0aGUgZm9vdFxuICogaXMgb3V0c2lkZSB0aGUgc2VnbWVudC5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0FycmF5PENvb3JkaW5hdGU+fSBzZWdtZW50IFRoZSB0d28gY29vcmRpbmF0ZXNcbiAqIG9mIHRoZSBzZWdtZW50LlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGZvb3Qgb2YgdGhlIHBlcnBlbmRpY3VsYXIgb2ZcbiAqIHRoZSBjb29yZGluYXRlIHRvIHRoZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdE9uU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSB7XG4gICAgdmFyIHgwID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeTAgPSBjb29yZGluYXRlWzFdO1xuICAgIHZhciBzdGFydCA9IHNlZ21lbnRbMF07XG4gICAgdmFyIGVuZCA9IHNlZ21lbnRbMV07XG4gICAgdmFyIHgxID0gc3RhcnRbMF07XG4gICAgdmFyIHkxID0gc3RhcnRbMV07XG4gICAgdmFyIHgyID0gZW5kWzBdO1xuICAgIHZhciB5MiA9IGVuZFsxXTtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgdmFyIGFsb25nID0gZHggPT09IDAgJiYgZHkgPT09IDBcbiAgICAgICAgPyAwXG4gICAgICAgIDogKGR4ICogKHgwIC0geDEpICsgZHkgKiAoeTAgLSB5MSkpIC8gKGR4ICogZHggKyBkeSAqIGR5IHx8IDApO1xuICAgIHZhciB4LCB5O1xuICAgIGlmIChhbG9uZyA8PSAwKSB7XG4gICAgICAgIHggPSB4MTtcbiAgICAgICAgeSA9IHkxO1xuICAgIH1cbiAgICBlbHNlIGlmIChhbG9uZyA+PSAxKSB7XG4gICAgICAgIHggPSB4MjtcbiAgICAgICAgeSA9IHkyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgeCA9IHgxICsgYWxvbmcgKiBkeDtcbiAgICAgICAgeSA9IHkxICsgYWxvbmcgKiBkeTtcbiAgICB9XG4gICAgcmV0dXJuIFt4LCB5XTtcbn1cbi8qKlxuICogUmV0dXJucyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlRm9ybWF0fSBmdW5jdGlvbiB0aGF0IGNhbiBiZVxuICogdXNlZCB0byBmb3JtYXRcbiAqIGEge0Nvb3JkaW5hdGV9IHRvIGEgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoKTtcbiAqICAgICB2YXIgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSB3aXRoIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAyIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2NyZWF0ZVN0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHN0cmluZ2lmeUZ1bmMgPSBjcmVhdGVTdHJpbmdYWSgyKTtcbiAqICAgICB2YXIgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44NSwgNDcuOTgnXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGVGb3JtYXR9IENvb3JkaW5hdGUgZm9ybWF0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RyaW5nWFkob3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZyBYWS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmdYWShjb29yZGluYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaGVtaXNwaGVyZXMgSGVtaXNwaGVyZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVncmVlcyBEZWdyZWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVncmVlc1RvU3RyaW5nSERNUyhoZW1pc3BoZXJlcywgZGVncmVlcywgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgdmFyIG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gICAgdmFyIHggPSBNYXRoLmFicygzNjAwICogbm9ybWFsaXplZERlZ3JlZXMpO1xuICAgIHZhciBkZmxQcmVjaXNpb24gPSBvcHRfZnJhY3Rpb25EaWdpdHMgfHwgMDtcbiAgICB2YXIgcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIGRmbFByZWNpc2lvbik7XG4gICAgdmFyIGRlZyA9IE1hdGguZmxvb3IoeCAvIDM2MDApO1xuICAgIHZhciBtaW4gPSBNYXRoLmZsb29yKCh4IC0gZGVnICogMzYwMCkgLyA2MCk7XG4gICAgdmFyIHNlYyA9IHggLSBkZWcgKiAzNjAwIC0gbWluICogNjA7XG4gICAgc2VjID0gTWF0aC5jZWlsKHNlYyAqIHByZWNpc2lvbikgLyBwcmVjaXNpb247XG4gICAgaWYgKHNlYyA+PSA2MCkge1xuICAgICAgICBzZWMgPSAwO1xuICAgICAgICBtaW4gKz0gMTtcbiAgICB9XG4gICAgaWYgKG1pbiA+PSA2MCkge1xuICAgICAgICBtaW4gPSAwO1xuICAgICAgICBkZWcgKz0gMTtcbiAgICB9XG4gICAgcmV0dXJuIChkZWcgK1xuICAgICAgICAnXFx1MDBiMCAnICtcbiAgICAgICAgcGFkTnVtYmVyKG1pbiwgMikgK1xuICAgICAgICAnXFx1MjAzMiAnICtcbiAgICAgICAgcGFkTnVtYmVyKHNlYywgMiwgZGZsUHJlY2lzaW9uKSArXG4gICAgICAgICdcXHUyMDMzJyArXG4gICAgICAgIChub3JtYWxpemVkRGVncmVlcyA9PSAwXG4gICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICA6ICcgJyArIGhlbWlzcGhlcmVzLmNoYXJBdChub3JtYWxpemVkRGVncmVlcyA8IDAgPyAxIDogMCkpKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4ge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IHRvIGEgc3RyaW5nXG4gKiB1c2luZyB0aGUgZ2l2ZW4gc3RyaW5nIHRlbXBsYXRlLiBUaGUgc3RyaW5ncyBge3h9YCBhbmQgYHt5fWAgaW4gdGhlIHRlbXBsYXRlXG4gKiB3aWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIGZpcnN0IGFuZCBzZWNvbmQgY29vcmRpbmF0ZSB2YWx1ZXMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoOHw0OCkuJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgdGVtcGxhdGUgPSAnQ29vcmRpbmF0ZSBpcyAoe3h9fHt5fSkuJztcbiAqICAgICB2YXIgb3V0ID0gZm9ybWF0KGNvb3JkLCB0ZW1wbGF0ZSwgMik7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnQ29vcmRpbmF0ZSBpcyAoNy44NXw0Ny45OCkuJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIEEgdGVtcGxhdGUgc3RyaW5nIHdpdGggYHt4fWAgYW5kIGB7eX1gIHBsYWNlaG9sZGVyc1xuICogICAgIHRoYXQgd2lsbCBiZSByZXBsYWNlZCBieSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gRm9ybWF0dGVkIGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoY29vcmRpbmF0ZSwgdGVtcGxhdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIGlmIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3t4fScsIGNvb3JkaW5hdGVbMF0udG9GaXhlZChvcHRfZnJhY3Rpb25EaWdpdHMpKVxuICAgICAgICAgICAgLnJlcGxhY2UoJ3t5fScsIGNvb3JkaW5hdGVbMV0udG9GaXhlZChvcHRfZnJhY3Rpb25EaWdpdHMpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZTEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZTIgU2Vjb25kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdHdvIGNvb3JkaW5hdGVzIGFyZSBlcXVhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhjb29yZGluYXRlMSwgY29vcmRpbmF0ZTIpIHtcbiAgICB2YXIgZXF1YWxzID0gdHJ1ZTtcbiAgICBmb3IgKHZhciBpID0gY29vcmRpbmF0ZTEubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgaWYgKGNvb3JkaW5hdGUxW2ldICE9IGNvb3JkaW5hdGUyW2ldKSB7XG4gICAgICAgICAgICBlcXVhbHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlcXVhbHM7XG59XG4vKipcbiAqIFJvdGF0ZSBgY29vcmRpbmF0ZWAgYnkgYGFuZ2xlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZFxuICogcmV0dXJuZWQgYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7cm90YXRlfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHJvdGF0ZVJhZGlhbnMgPSBNYXRoLlBJIC8gMjsgLy8gOTAgZGVncmVlc1xuICogICAgIHJvdGF0ZShjb29yZCwgcm90YXRlUmFkaWFucyk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFstNDcuOTgzMzMzLCA3Ljg1XVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlIGluIHJhZGlhbi5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUoY29vcmRpbmF0ZSwgYW5nbGUpIHtcbiAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXSAqIGNvc0FuZ2xlIC0gY29vcmRpbmF0ZVsxXSAqIHNpbkFuZ2xlO1xuICAgIHZhciB5ID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICAgIGNvb3JkaW5hdGVbMF0gPSB4O1xuICAgIGNvb3JkaW5hdGVbMV0gPSB5O1xuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBTY2FsZSBgY29vcmRpbmF0ZWAgYnkgYHNjYWxlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZCByZXR1cm5lZFxuICogYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7c2NhbGUgYXMgc2NhbGVDb29yZGluYXRlfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHNjYWxlID0gMS4yO1xuICogICAgIHNjYWxlQ29vcmRpbmF0ZShjb29yZCwgc2NhbGUpO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbOS40MiwgNTcuNTc5OTk5Nl1cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsZSBTY2FsZSBmYWN0b3IuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoY29vcmRpbmF0ZSwgc2NhbGUpIHtcbiAgICBjb29yZGluYXRlWzBdICo9IHNjYWxlO1xuICAgIGNvb3JkaW5hdGVbMV0gKj0gc2NhbGU7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGNvb3JkMSBhbmQgY29vcmQyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gICAgdmFyIGR4ID0gY29vcmQxWzBdIC0gY29vcmQyWzBdO1xuICAgIHZhciBkeSA9IGNvb3JkMVsxXSAtIGNvb3JkMlsxXTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpKTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBzcXVhcmVkIGRpc3RhbmNlIGZyb20gYSBjb29yZGluYXRlIHRvIGEgbGluZSBzZWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIG9mIHRoZSBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8Q29vcmRpbmF0ZT59IHNlZ21lbnQgTGluZSBzZWdtZW50ICgyXG4gKiBjb29yZGluYXRlcykuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGUgcG9pbnQgdG8gdGhlIGxpbmUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZVRvU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSB7XG4gICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZShjb29yZGluYXRlLCBjbG9zZXN0T25TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpKTtcbn1cbi8qKlxuICogRm9ybWF0IGEgZ2VvZ3JhcGhpYyBjb29yZGluYXRlIHdpdGggdGhlIGhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMsIGFuZFxuICogc2Vjb25kcy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdIRE1TKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc0N8KwIDU44oCyIDYw4oCzIE4gN8KwIDUw4oCyIDYw4oCzIEUnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjAuMOKAsyBOIDfCsCA1MOKAsiA2MC4w4oCzIEUnXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBIZW1pc3BoZXJlLCBkZWdyZWVzLCBtaW51dGVzIGFuZCBzZWNvbmRzLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmdIRE1TKGNvb3JkaW5hdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIGlmIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiAoZGVncmVlc1RvU3RyaW5nSERNUygnTlMnLCBjb29yZGluYXRlWzFdLCBvcHRfZnJhY3Rpb25EaWdpdHMpICtcbiAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICBkZWdyZWVzVG9TdHJpbmdIRE1TKCdFVycsIGNvb3JkaW5hdGVbMF0sIG9wdF9mcmFjdGlvbkRpZ2l0cykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogRm9ybWF0IGEgY29vcmRpbmF0ZSBhcyBhIGNvbW1hIGRlbGltaXRlZCBzdHJpbmcuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ1hZKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc4LCA0OCdcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAxIGZyYWN0aW9uYWwgZGlnaXQ6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ1hZKGNvb3JkLCAxKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc3LjgsIDQ4LjAnXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBYWS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgcmV0dXJuIGZvcm1hdChjb29yZGluYXRlLCAne3h9LCB7eX0nLCBvcHRfZnJhY3Rpb25EaWdpdHMpO1xufVxuLyoqXG4gKiBNb2RpZmllcyB0aGUgcHJvdmlkZWQgY29vcmRpbmF0ZSBpbi1wbGFjZSB0byBiZSB3aXRoaW4gdGhlIHJlYWwgd29ybGRcbiAqIGV4dGVudC4gVGhlIGxvd2VyIHByb2plY3Rpb24gZXh0ZW50IGJvdW5kYXJ5IGlzIGluY2x1c2l2ZSwgdGhlIHVwcGVyIG9uZVxuICogZXhjbHVzaXZlLlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSB3aXRoaW4gdGhlIHJlYWwgd29ybGQgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgoY29vcmRpbmF0ZSwgcHJvamVjdGlvbikge1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uLmdldEV4dGVudCgpKTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBnZXRXb3JsZHNBd2F5KGNvb3JkaW5hdGUsIHByb2plY3Rpb24sIHdvcmxkV2lkdGgpO1xuICAgICAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgICAgICAgY29vcmRpbmF0ZVswXSAtPSB3b3JsZHNBd2F5ICogd29ybGRXaWR0aDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3NvdXJjZUV4dGVudFdpZHRoXSBXaWR0aCBvZiB0aGUgc291cmNlIGV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0IGluIHdvcmxkIHdpZHRocy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdvcmxkc0F3YXkoY29vcmRpbmF0ZSwgcHJvamVjdGlvbiwgb3B0X3NvdXJjZUV4dGVudFdpZHRoKSB7XG4gICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHZhciB3b3JsZHNBd2F5ID0gMDtcbiAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpICYmXG4gICAgICAgIChjb29yZGluYXRlWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjb29yZGluYXRlWzBdID4gcHJvamVjdGlvbkV4dGVudFsyXSkpIHtcbiAgICAgICAgdmFyIHNvdXJjZUV4dGVudFdpZHRoID0gb3B0X3NvdXJjZUV4dGVudFdpZHRoIHx8IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICB3b3JsZHNBd2F5ID0gTWF0aC5mbG9vcigoY29vcmRpbmF0ZVswXSAtIHByb2plY3Rpb25FeHRlbnRbMF0pIC8gc291cmNlRXh0ZW50V2lkdGgpO1xuICAgIH1cbiAgICByZXR1cm4gd29ybGRzQXdheTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvb3JkaW5hdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NlbnRlcmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZCksIG51bWJlciwgaW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemUsIGJvb2xlYW49LCBBcnJheTxudW1iZXI+PSk6IChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9ubHlDZW50ZXIgSWYgdHJ1ZSwgdGhlIGNvbnN0cmFpbnQgd2lsbCBvbmx5IGFwcGx5IHRvIHRoZSB2aWV3IGNlbnRlci5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc21vb3RoIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBnbyBzbGlnaHRseSBvdXQgb2YgdGhlIGdpdmVuIGV4dGVudFxuICogKG9ubHkgZHVyaW5nIGludGVyYWN0aW9uIGFuZCBhbmltYXRpb24pLlxuICogQHJldHVybiB7VHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFeHRlbnQoZXh0ZW50LCBvbmx5Q2VudGVyLCBzbW9vdGgpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplOyB1bnVzZWQgaWYgYG9ubHlDZW50ZXJgIHdhcyBzcGVjaWZpZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfY2VudGVyU2hpZnRdIFNoaWZ0IGJldHdlZW4gbWFwIGNlbnRlciBhbmQgdmlld3BvcnQgY2VudGVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjZW50ZXIsIHJlc29sdXRpb24sIHNpemUsIG9wdF9pc01vdmluZywgb3B0X2NlbnRlclNoaWZ0KSB7XG4gICAgICAgIGlmIChjZW50ZXIpIHtcbiAgICAgICAgICAgIHZhciB2aWV3V2lkdGggPSBvbmx5Q2VudGVyID8gMCA6IHNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHZpZXdIZWlnaHQgPSBvbmx5Q2VudGVyID8gMCA6IHNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHNoaWZ0WCA9IG9wdF9jZW50ZXJTaGlmdCA/IG9wdF9jZW50ZXJTaGlmdFswXSA6IDA7XG4gICAgICAgICAgICB2YXIgc2hpZnRZID0gb3B0X2NlbnRlclNoaWZ0ID8gb3B0X2NlbnRlclNoaWZ0WzFdIDogMDtcbiAgICAgICAgICAgIHZhciBtaW5YID0gZXh0ZW50WzBdICsgdmlld1dpZHRoIC8gMiArIHNoaWZ0WDtcbiAgICAgICAgICAgIHZhciBtYXhYID0gZXh0ZW50WzJdIC0gdmlld1dpZHRoIC8gMiArIHNoaWZ0WDtcbiAgICAgICAgICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdICsgdmlld0hlaWdodCAvIDIgKyBzaGlmdFk7XG4gICAgICAgICAgICB2YXIgbWF4WSA9IGV4dGVudFszXSAtIHZpZXdIZWlnaHQgLyAyICsgc2hpZnRZO1xuICAgICAgICAgICAgLy8gbm90ZTogd2hlbiB6b29taW5nIG91dCBvZiBib3VuZHMsIG1pbiBhbmQgbWF4IHZhbHVlcyBmb3IgeCBhbmQgeSBtYXlcbiAgICAgICAgICAgIC8vIGVuZCB1cCBpbnZlcnRlZCAobWluID4gbWF4KTsgdGhpcyBoYXMgdG8gYmUgYWNjb3VudGVkIGZvclxuICAgICAgICAgICAgaWYgKG1pblggPiBtYXhYKSB7XG4gICAgICAgICAgICAgICAgbWluWCA9IChtYXhYICsgbWluWCkgLyAyO1xuICAgICAgICAgICAgICAgIG1heFggPSBtaW5YO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1pblkgPiBtYXhZKSB7XG4gICAgICAgICAgICAgICAgbWluWSA9IChtYXhZICsgbWluWSkgLyAyO1xuICAgICAgICAgICAgICAgIG1heFkgPSBtaW5ZO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHggPSBjbGFtcChjZW50ZXJbMF0sIG1pblgsIG1heFgpO1xuICAgICAgICAgICAgdmFyIHkgPSBjbGFtcChjZW50ZXJbMV0sIG1pblksIG1heFkpO1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gMzAgKiByZXNvbHV0aW9uO1xuICAgICAgICAgICAgLy8gZHVyaW5nIGFuIGludGVyYWN0aW9uLCBhbGxvdyBzb21lIG92ZXJzY3JvbGxcbiAgICAgICAgICAgIGlmIChvcHRfaXNNb3ZpbmcgJiYgc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgeCArPVxuICAgICAgICAgICAgICAgICAgICAtcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgbWluWCAtIGNlbnRlclswXSkgLyByYXRpbykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgY2VudGVyWzBdIC0gbWF4WCkgLyByYXRpbyk7XG4gICAgICAgICAgICAgICAgeSArPVxuICAgICAgICAgICAgICAgICAgICAtcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgbWluWSAtIGNlbnRlclsxXSkgLyByYXRpbykgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgY2VudGVyWzFdIC0gbWF4WSkgLyByYXRpbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW3gsIHldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBDZW50ZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUoY2VudGVyKSB7XG4gICAgcmV0dXJuIGNlbnRlcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNlbnRlcmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Jlc29sdXRpb25jb25zdHJhaW50XG4gKi9cbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGdldEhlaWdodCwgZ2V0V2lkdGggfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4vYXJyYXkuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBudW1iZXIsIGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplLCBib29sZWFuPSk6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCByZXNvbHV0aW9uIHRha2luZyBpbnRvIGFjY291bnQgdGhlIHZpZXdwb3J0IHNpemUgYW5kIG1heGltdW1cbiAqIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvblxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gdmlld3BvcnRTaXplIFZpZXdwb3J0IHNpemUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dGdWxsRXh0ZW50IFdoZXRoZXIgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENhcHBlZCByZXNvbHV0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heEV4dGVudCwgdmlld3BvcnRTaXplLCBzaG93RnVsbEV4dGVudCkge1xuICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMF07XG4gICAgdmFyIHlSZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMV07XG4gICAgaWYgKHNob3dGdWxsRXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1pbihyZXNvbHV0aW9uLCBNYXRoLm1heCh4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pKTtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWluKHJlc29sdXRpb24sIE1hdGgubWluKHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbikpO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgcmVzb2x1dGlvbiB0byBiZSBiZXR3ZWVuIG1heFJlc29sdXRpb24gYW5kIG1pblJlc29sdXRpb24gd2hpbGVcbiAqIHN0aWxsIGFsbG93aW5nIHRoZSB2YWx1ZSB0byBiZSBzbGlnaHRseSBvdXQgb2YgYm91bmRzLlxuICogTm90ZTogdGhlIGNvbXB1dGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBsb2dhcml0aG0gZnVuY3Rpb24gKGxuKTpcbiAqICAtIGF0IDEsIGxuKHgpIGlzIDBcbiAqICAtIGFib3ZlIDEsIGxuKHgpIGtlZXBzIGluY3JlYXNpbmcgYnV0IGF0IGEgbXVjaCBzbG93ZXIgcGFjZSB0aGFuIHhcbiAqIFRoZSBmaW5hbCByZXN1bHQgaXMgY2xhbXBlZCB0byBwcmV2ZW50IGdldHRpbmcgdG9vIGZhciBhd2F5IGZyb20gYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNtb290aGVkIHJlc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24pIHtcbiAgICB2YXIgcmVzdWx0ID0gTWF0aC5taW4ocmVzb2x1dGlvbiwgbWF4UmVzb2x1dGlvbik7XG4gICAgdmFyIHJhdGlvID0gNTA7XG4gICAgcmVzdWx0ICo9XG4gICAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIHJlc29sdXRpb24gLyBtYXhSZXNvbHV0aW9uIC0gMSkpIC8gcmF0aW8gK1xuICAgICAgICAgICAgMTtcbiAgICBpZiAobWluUmVzb2x1dGlvbikge1xuICAgICAgICByZXN1bHQgPSBNYXRoLm1heChyZXN1bHQsIG1pblJlc29sdXRpb24pO1xuICAgICAgICByZXN1bHQgLz1cbiAgICAgICAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIG1pblJlc29sdXRpb24gLyByZXNvbHV0aW9uIC0gMSkpIC9cbiAgICAgICAgICAgICAgICByYXRpbyArXG4gICAgICAgICAgICAgICAgMTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wKHJlc3VsdCwgbWluUmVzb2x1dGlvbiAvIDIsIG1heFJlc29sdXRpb24gKiAyKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSByZXNvbHV0aW9ucyBSZXNvbHV0aW9ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zbW9vdGhdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9tYXhFeHRlbnRdIE1heGltdW0gYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2hvd0Z1bGxFeHRlbnRdIElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMocmVzb2x1dGlvbnMsIG9wdF9zbW9vdGgsIG9wdF9tYXhFeHRlbnQsIG9wdF9zaG93RnVsbEV4dGVudCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1swXTtcbiAgICAgICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB2YXIgY2FwcGVkTWF4UmVzID0gb3B0X21heEV4dGVudFxuICAgICAgICAgICAgICAgID8gZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBvcHRfbWF4RXh0ZW50LCBzaXplLCBvcHRfc2hvd0Z1bGxFeHRlbnQpXG4gICAgICAgICAgICAgICAgOiBtYXhSZXNvbHV0aW9uO1xuICAgICAgICAgICAgLy8gZHVyaW5nIGludGVyYWN0aW5nIG9yIGFuaW1hdGluZywgYWxsb3cgaW50ZXJtZWRpYXJ5IHZhbHVlc1xuICAgICAgICAgICAgaWYgKG9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgICAgIHZhciBzbW9vdGggPSBvcHRfc21vb3RoICE9PSB1bmRlZmluZWQgPyBvcHRfc21vb3RoIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXNtb290aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIGNhcHBlZE1heFJlcywgbWluUmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2FwcGVkID0gTWF0aC5taW4oY2FwcGVkTWF4UmVzLCByZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIHZhciB6ID0gTWF0aC5mbG9vcihsaW5lYXJGaW5kTmVhcmVzdChyZXNvbHV0aW9ucywgY2FwcGVkLCBkaXJlY3Rpb24pKTtcbiAgICAgICAgICAgIGlmIChyZXNvbHV0aW9uc1t6XSA+IGNhcHBlZE1heFJlcyAmJiB6IDwgcmVzb2x1dGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uc1t6ICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x1dGlvbnNbel07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBwb3dlciBQb3dlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heGltdW0gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21pblJlc29sdXRpb25dIE1pbmltdW0gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zbW9vdGhdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9tYXhFeHRlbnRdIE1heGltdW0gYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2hvd0Z1bGxFeHRlbnRdIElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUG93ZXIocG93ZXIsIG1heFJlc29sdXRpb24sIG9wdF9taW5SZXNvbHV0aW9uLCBvcHRfc21vb3RoLCBvcHRfbWF4RXh0ZW50LCBvcHRfc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IG9wdF9taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfbWluUmVzb2x1dGlvbiA6IDA7XG4gICAgICAgICAgICAvLyBkdXJpbmcgaW50ZXJhY3Rpbmcgb3IgYW5pbWF0aW5nLCBhbGxvdyBpbnRlcm1lZGlhcnkgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0b2xlcmFuY2UgPSAxZS05O1xuICAgICAgICAgICAgdmFyIG1pblpvb21MZXZlbCA9IE1hdGguY2VpbChNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkTWF4UmVzKSAvIE1hdGgubG9nKHBvd2VyKSAtIHRvbGVyYW5jZSk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gLWRpcmVjdGlvbiAqICgwLjUgLSB0b2xlcmFuY2UpICsgMC41O1xuICAgICAgICAgICAgdmFyIGNhcHBlZCA9IE1hdGgubWluKGNhcHBlZE1heFJlcywgcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB2YXIgY2FwcGVkWm9vbUxldmVsID0gTWF0aC5mbG9vcihNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkKSAvIE1hdGgubG9nKHBvd2VyKSArIG9mZnNldCk7XG4gICAgICAgICAgICB2YXIgem9vbUxldmVsID0gTWF0aC5tYXgobWluWm9vbUxldmVsLCBjYXBwZWRab29tTGV2ZWwpO1xuICAgICAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHpvb21MZXZlbCk7XG4gICAgICAgICAgICByZXR1cm4gY2xhbXAobmV3UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBNaW4gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zbW9vdGhdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9tYXhFeHRlbnRdIE1heGltdW0gYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2hvd0Z1bGxFeHRlbnRdIElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBvcHRfc21vb3RoLCBvcHRfbWF4RXh0ZW50LCBvcHRfc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgc21vb3RoID0gb3B0X3Ntb290aCAhPT0gdW5kZWZpbmVkID8gb3B0X3Ntb290aCA6IHRydWU7XG4gICAgICAgICAgICBpZiAoIXNtb290aCB8fCAhb3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlc29sdXRpb25jb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yb3RhdGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHsgdG9SYWRpYW5zIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChudW1iZXJ8dW5kZWZpbmVkKSwgYm9vbGVhbj0pOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlKHJvdGF0aW9uKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9uZShyb3RhdGlvbikge1xuICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbiBOLlxuICogQHJldHVybiB7VHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb04obikge1xuICAgIHZhciB0aGV0YSA9ICgyICogTWF0aC5QSSkgLyBuO1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyb3RhdGlvbiwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcm90YXRpb24gPSBNYXRoLmZsb29yKHJvdGF0aW9uIC8gdGhldGEgKyAwLjUpICogdGhldGE7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3RvbGVyYW5jZV0gVG9sZXJhbmNlLlxuICogQHJldHVybiB7VHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1plcm8ob3B0X3RvbGVyYW5jZSkge1xuICAgIHZhciB0b2xlcmFuY2UgPSBvcHRfdG9sZXJhbmNlIHx8IHRvUmFkaWFucyg1KTtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocm90YXRpb24sIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhyb3RhdGlvbikgPD0gdG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yb3RhdGlvbmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Vhc2luZ1xuICovXG4vKipcbiAqIFN0YXJ0IHNsb3cgYW5kIHNwZWVkIHVwLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZUluKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3codCwgMyk7XG59XG4vKipcbiAqIFN0YXJ0IGZhc3QgYW5kIHNsb3cgZG93bi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVhc2VPdXQodCkge1xuICAgIHJldHVybiAxIC0gZWFzZUluKDEgLSB0KTtcbn1cbi8qKlxuICogU3RhcnQgc2xvdywgc3BlZWQgdXAsIGFuZCB0aGVuIHNsb3cgZG93biBhZ2Fpbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluQW5kT3V0KHQpIHtcbiAgICByZXR1cm4gMyAqIHQgKiB0IC0gMiAqIHQgKiB0ICogdDtcbn1cbi8qKlxuICogTWFpbnRhaW4gYSBjb25zdGFudCBzcGVlZCBvdmVyIHRpbWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXIodCkge1xuICAgIHJldHVybiB0O1xufVxuLyoqXG4gKiBTdGFydCBzbG93LCBzcGVlZCB1cCwgYW5kIGF0IHRoZSB2ZXJ5IGVuZCBzbG93IGRvd24gYWdhaW4uICBUaGlzIGhhcyB0aGVcbiAqIHNhbWUgZ2VuZXJhbCBiZWhhdmlvciBhcyB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZy5pbkFuZE91dH0sIGJ1dCB0aGUgZmluYWxcbiAqIHNsb3dkb3duIGlzIGRlbGF5ZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cEFuZERvd24odCkge1xuICAgIGlmICh0IDwgMC41KSB7XG4gICAgICAgIHJldHVybiBpbkFuZE91dCgyICogdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gMSAtIGluQW5kT3V0KDIgKiAodCAtIDAuNSkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVhc2luZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeUxheW91dFxuICovXG4vKipcbiAqIFRoZSBjb29yZGluYXRlIGxheW91dCBmb3IgZ2VvbWV0cmllcywgaW5kaWNhdGluZyB3aGV0aGVyIGEgM3JkIG9yIDR0aCB6ICgnWicpXG4gKiBvciBtZWFzdXJlICgnTScpIGNvb3JkaW5hdGUgaXMgYXZhaWxhYmxlLiBTdXBwb3J0ZWQgdmFsdWVzIGFyZSBgJ1hZJ2AsXG4gKiBgJ1hZWidgLCBgJ1hZTSdgLCBgJ1hZWk0nYC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBYWTogJ1hZJyxcbiAgICBYWVo6ICdYWVonLFxuICAgIFhZTTogJ1hZTScsXG4gICAgWFlaTTogJ1hZWk0nLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5TGF5b3V0LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4uL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgY3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgfSBmcm9tICcuLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgY3JlYXRlRW1wdHksIGNyZWF0ZU9yVXBkYXRlRW1wdHksIGdldEhlaWdodCwgcmV0dXJuT3JVcGRhdGUsIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm0gfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IG1lbW9pemVPbmUgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtMkQgfSBmcm9tICcuL2ZsYXQvdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQHR5cGUge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gKi9cbnZhciB0bXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3IgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogVG8gZ2V0IG5vdGlmaWVkIG9mIGNoYW5nZXMgdG8gdGhlIGdlb21ldHJ5LCByZWdpc3RlciBhIGxpc3RlbmVyIGZvciB0aGVcbiAqIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgb24geW91ciBnZW9tZXRyeSBpbnN0YW5jZS5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIEdlb21ldHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhHZW9tZXRyeSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBHZW9tZXRyeSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50XyA9IGNyZWF0ZUVtcHR5KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50UmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEdldCBhIHRyYW5zZm9ybWVkIGFuZCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIGdlb21ldHJ5LlxuICAgICAgICAgKiBAYWJzdHJhY3RcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHJldmlzaW9uIFRoZSBnZW9tZXRyeSByZXZpc2lvbi5cbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gW29wdF90cmFuc2Zvcm1dIE9wdGlvbmFsIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgICAgICogQHJldHVybiB7R2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaW1wbGlmeVRyYW5zZm9ybWVkSW50ZXJuYWwgPSBtZW1vaXplT25lKGZ1bmN0aW9uIChyZXZpc2lvbiwgc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSkge1xuICAgICAgICAgICAgaWYgKCFvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KHNxdWFyZWRUb2xlcmFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNsb25lID0gdGhpcy5jbG9uZSgpO1xuICAgICAgICAgICAgY2xvbmUuYXBwbHlUcmFuc2Zvcm0ob3B0X3RyYW5zZm9ybSk7XG4gICAgICAgICAgICByZXR1cm4gY2xvbmUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KHNxdWFyZWRUb2xlcmFuY2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgYSB0cmFuc2Zvcm1lZCBhbmQgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFtvcHRfdHJhbnNmb3JtXSBPcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnNpbXBsaWZ5VHJhbnNmb3JtZWQgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaW1wbGlmeVRyYW5zZm9ybWVkSW50ZXJuYWwodGhpcy5nZXRSZXZpc2lvbigpLCBzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHshR2VvbWV0cnl9IENsb25lLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNvbnRhaW5zWFkgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB2YXIgY29vcmQgPSB0aGlzLmdldENsb3Nlc3RQb2ludChbeCwgeV0pO1xuICAgICAgICByZXR1cm4gY29vcmRbMF0gPT09IHggJiYgY29vcmRbMV0gPT09IHk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNsb3Nlc3QgcG9pbnQgb2YgdGhlIGdlb21ldHJ5IHRvIHRoZSBwYXNzZWQgcG9pbnQgYXNcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZSBjb29yZGluYXRlfS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfY2xvc2VzdFBvaW50XSBDbG9zZXN0IHBvaW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldENsb3Nlc3RQb2ludCA9IGZ1bmN0aW9uIChwb2ludCwgb3B0X2Nsb3Nlc3RQb2ludCkge1xuICAgICAgICB2YXIgY2xvc2VzdFBvaW50ID0gb3B0X2Nsb3Nlc3RQb2ludCA/IG9wdF9jbG9zZXN0UG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgICAgICB0aGlzLmNsb3Nlc3RQb2ludFhZKHBvaW50WzBdLCBwb2ludFsxXSwgY2xvc2VzdFBvaW50LCBJbmZpbml0eSk7XG4gICAgICAgIHJldHVybiBjbG9zZXN0UG9pbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBnZW9tZXRyeSBpbmNsdWRlcyB0aGUgc3BlY2lmaWVkIGNvb3JkaW5hdGUuIElmIHRoZVxuICAgICAqIGNvb3JkaW5hdGUgaXMgb24gdGhlIGJvdW5kYXJ5IG9mIHRoZSBnZW9tZXRyeSwgcmV0dXJucyBmYWxzZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zWFkoY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKG9wdF9leHRlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZXh0ZW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdmFyIGV4dGVudCA9IHRoaXMuY29tcHV0ZUV4dGVudCh0aGlzLmV4dGVudF8pO1xuICAgICAgICAgICAgaWYgKGlzTmFOKGV4dGVudFswXSkgfHwgaXNOYU4oZXh0ZW50WzFdKSkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZU9yVXBkYXRlRW1wdHkoZXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZXh0ZW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXR1cm5PclVwZGF0ZSh0aGlzLmV4dGVudF8sIG9wdF9leHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUm90YXRlIHRoZSBnZW9tZXRyeSBhcm91bmQgYSBnaXZlbiBjb29yZGluYXRlLiBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIChhbmdsZSwgYW5jaG9yKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTY2FsZSB0aGUgZ2VvbWV0cnkgKHdpdGggYW4gb3B0aW9uYWwgb3JpZ2luKS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN4IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3ldIFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24gKGRlZmF1bHRzIHRvIHN4KS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICAgKiAgICAgb2YgdGhlIGdlb21ldHJ5IGV4dGVudCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uIChzeCwgb3B0X3N5LCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeS4gIEZvciBsaW5lc3RyaW5ncywgdGhpcyB1c2VzXG4gICAgICogdGhlIFtEb3VnbGFzIFBldWNrZXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JhbWVyLURvdWdsYXMtUGV1Y2tlcl9hbGdvcml0aG0pXG4gICAgICogYWxnb3JpdGhtLiAgRm9yIHBvbHlnb25zLCBhIHF1YW50aXphdGlvbi1iYXNlZFxuICAgICAqIHNpbXBsaWZpY2F0aW9uIGlzIHVzZWQgdG8gcHJlc2VydmUgdG9wb2xvZ3kuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUaGUgdG9sZXJhbmNlIGRpc3RhbmNlIGZvciBzaW1wbGlmaWNhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gQSBuZXcsIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgb3JpZ2luYWwgZ2VvbWV0cnkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5zaW1wbGlmeSA9IGZ1bmN0aW9uICh0b2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KHRvbGVyYW5jZSAqIHRvbGVyYW5jZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeSB1c2luZyB0aGUgRG91Z2xhcyBQZXVja2VyXG4gICAgICogYWxnb3JpdGhtLlxuICAgICAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SYW1lci1Eb3VnbGFzLVBldWNrZXJfYWxnb3JpdGhtLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIENhbGxlZCB3aXRoIGEgZmxhdCBhcnJheSBvZiBnZW9tZXRyeSBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuYXBwbHlUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodHJhbnNmb3JtRm4pIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSB0aGUgZ2VvbWV0cnkuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeSBjb29yZGluYXRlcyBpbiBwbGFjZS4gIElmXG4gICAgICogaW5zdGVhZCB5b3Ugd2FudCBhIG5ldyBnZW9tZXRyeSwgZmlyc3QgYGNsb25lKClgIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIGVhY2ggY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkgZnJvbSBvbmUgY29vcmRpbmF0ZSByZWZlcmVuY2VcbiAgICAgKiBzeXN0ZW0gdG8gYW5vdGhlci4gVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIEZvciBleGFtcGxlLCBhIGxpbmUgd2lsbCBiZSB0cmFuc2Zvcm1lZCB0byBhIGxpbmUgYW5kIGEgY2lyY2xlIHRvIGEgY2lyY2xlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gc291cmNlIFRoZSBjdXJyZW50IHByb2plY3Rpb24uICBDYW4gYmUgYVxuICAgICAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIFRoZSBkZXNpcmVkIHByb2plY3Rpb24uICBDYW4gYmUgYVxuICAgICAqICAgICBzdHJpbmcgaWRlbnRpZmllciBvciBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gVGhpcyBnZW9tZXRyeS4gIE5vdGUgdGhhdCBvcmlnaW5hbCBnZW9tZXRyeSBpc1xuICAgICAqICAgICBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnRyYW5zZm9ybSA9IGZ1bmN0aW9uIChzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovXG4gICAgICAgIHZhciBzb3VyY2VQcm9qID0gZ2V0UHJvamVjdGlvbihzb3VyY2UpO1xuICAgICAgICB2YXIgdHJhbnNmb3JtRm4gPSBzb3VyY2VQcm9qLmdldFVuaXRzKCkgPT0gVW5pdHMuVElMRV9QSVhFTFNcbiAgICAgICAgICAgID8gZnVuY3Rpb24gKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGl4ZWxFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0ZWRFeHRlbnQgPSBzb3VyY2VQcm9qLmdldFdvcmxkRXh0ZW50KCk7XG4gICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZ2V0SGVpZ2h0KHByb2plY3RlZEV4dGVudCkgLyBnZXRIZWlnaHQocGl4ZWxFeHRlbnQpO1xuICAgICAgICAgICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0odG1wVHJhbnNmb3JtLCBwcm9qZWN0ZWRFeHRlbnRbMF0sIHByb2plY3RlZEV4dGVudFszXSwgc2NhbGUsIC1zY2FsZSwgMCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtMkQoaW5Db29yZGluYXRlcywgMCwgaW5Db29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgdG1wVHJhbnNmb3JtLCBvdXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0aW5hdGlvbikoaW5Db29yZGluYXRlcywgb3V0Q29vcmRpbmF0ZXMsIHN0cmlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICA6IGdldFRyYW5zZm9ybShzb3VyY2VQcm9qLCBkZXN0aW5hdGlvbik7XG4gICAgICAgIHRoaXMuYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtRm4pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBHZW9tZXRyeTtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgR2VvbWV0cnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybTJEKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdHJhbnNmb3JtLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeCA9IGZsYXRDb29yZGluYXRlc1tqXTtcbiAgICAgICAgdmFyIHkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdO1xuICAgICAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XTtcbiAgICAgICAgZGVzdFtpKytdID0gdHJhbnNmb3JtWzFdICogeCArIHRyYW5zZm9ybVszXSAqIHkgKyB0cmFuc2Zvcm1bNV07XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBSb3RhdGlvbiBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGFuZ2xlLCBhbmNob3IsIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICAgIHZhciBhbmNob3JZID0gYW5jaG9yWzFdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgZGVsdGFYID0gZmxhdENvb3JkaW5hdGVzW2pdIC0gYW5jaG9yWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gLSBhbmNob3JZO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JYICsgZGVsdGFYICogY29zIC0gZGVsdGFZICogc2luO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JZICsgZGVsdGFYICogc2luICsgZGVsdGFZICogY29zO1xuICAgICAgICBmb3IgKHZhciBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLyoqXG4gKiBTY2FsZSB0aGUgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gc3kgU2NhbGUgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIFNjYWxlIGFuY2hvciBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzeCwgc3ksIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgYW5jaG9yWCA9IGFuY2hvclswXTtcbiAgICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGZsYXRDb29yZGluYXRlc1tqXSAtIGFuY2hvclg7XG4gICAgICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWCArIHN4ICogZGVsdGFYO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JZICsgc3kgKiBkZWx0YVk7XG4gICAgICAgIGZvciAodmFyIGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGRlbHRhWCwgZGVsdGFZLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNbal0gKyBkZWx0YVg7XG4gICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gKyBkZWx0YVk7XG4gICAgICAgIGZvciAodmFyIGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1NpbXBsZUdlb21ldHJ5XG4gKi9cbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuL0dlb21ldHJ5LmpzJztcbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMsIGdldENlbnRlciB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyByb3RhdGUsIHNjYWxlLCB0cmFuc2Zvcm0yRCwgdHJhbnNsYXRlIH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlczsgZG8gbm90IGluc3RhbnRpYXRlXG4gKiBpbiBhcHBzLCBhcyBjYW5ub3QgYmUgcmVuZGVyZWQuXG4gKlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBTaW1wbGVHZW9tZXRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoU2ltcGxlR2VvbWV0cnksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2ltcGxlR2VvbWV0cnkoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0cmlkZSA9IDI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmxhdENvb3JkaW5hdGVzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXModGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheTwqPn0gQ29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgZmlyc3QgY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBGaXJzdCBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Rmlyc3RDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoMCwgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0RmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGxhc3QgY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBMYXN0IHBvaW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0TGFzdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSh0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggLSB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeUxheW91dCBsYXlvdXR9IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldExheW91dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkgdXNpbmcgdGhlIERvdWdsYXMgUGV1Y2tlciBhbGdvcml0aG0uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7U2ltcGxlR2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeSA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIGlmICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uICE9PSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IDA7XG4gICAgICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHNxdWFyZWRUb2xlcmFuY2UgaXMgbmVnYXRpdmUgb3IgaWYgd2Uga25vdyB0aGF0IHNpbXBsaWZpY2F0aW9uIHdpbGwgbm90XG4gICAgICAgIC8vIGhhdmUgYW55IGVmZmVjdCB0aGVuIGp1c3QgcmV0dXJuIHRoaXMuXG4gICAgICAgIGlmIChzcXVhcmVkVG9sZXJhbmNlIDwgMCB8fFxuICAgICAgICAgICAgKHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSAhPT0gMCAmJlxuICAgICAgICAgICAgICAgIHNxdWFyZWRUb2xlcmFuY2UgPD0gdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNpbXBsaWZpZWRHZW9tZXRyeSA9IHRoaXMuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gc2ltcGxpZmllZEdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBzaW1wbGlmaWVkR2VvbWV0cnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBTaW1wbGlmaWNhdGlvbiBkaWQgbm90IGFjdHVhbGx5IHJlbW92ZSBhbnkgY29vcmRpbmF0ZXMuICBXZSBub3cga25vd1xuICAgICAgICAgICAgLy8gdGhhdCBhbnkgY2FsbHMgdG8gZ2V0U2ltcGxpZmllZEdlb21ldHJ5IHdpdGggYSBzcXVhcmVkVG9sZXJhbmNlIGxlc3NcbiAgICAgICAgICAgIC8vIHRoYW4gb3IgZXF1YWwgdG8gdGhlIGN1cnJlbnQgc3F1YXJlZFRvbGVyYW5jZSB3aWxsIGFsc28gbm90IGhhdmUgYW55XG4gICAgICAgICAgICAvLyBlZmZlY3QuICBUaGlzIGFsbG93cyB1cyB0byBzaG9ydCBjaXJjdWl0IHNpbXBsaWZpY2F0aW9uIChzYXZpbmcgQ1BVXG4gICAgICAgICAgICAvLyBjeWNsZXMpIGFuZCBwcmV2ZW50cyB0aGUgY2FjaGUgb2Ygc2ltcGxpZmllZCBnZW9tZXRyaWVzIGZyb20gZmlsbGluZ1xuICAgICAgICAgICAgLy8gdXAgd2l0aCB1c2VsZXNzIGlkZW50aWNhbCBjb3BpZXMgb2YgdGhpcyBnZW9tZXRyeSAoc2F2aW5nIG1lbW9yeSkuXG4gICAgICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSBzcXVhcmVkVG9sZXJhbmNlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1NpbXBsZUdlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gU3RyaWRlLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRTdHJpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmlkZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBsYXlvdXQgTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNldEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChsYXlvdXQsIGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICB0aGlzLnN0cmlkZSA9IGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpO1xuICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0geyFBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IGxheW91dCBMYXlvdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG5lc3RpbmcgTmVzdGluZy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNldExheW91dCA9IGZ1bmN0aW9uIChsYXlvdXQsIGNvb3JkaW5hdGVzLCBuZXN0aW5nKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgICAgICB2YXIgc3RyaWRlO1xuICAgICAgICBpZiAobGF5b3V0KSB7XG4gICAgICAgICAgICBzdHJpZGUgPSBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmVzdGluZzsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0cmlkZSA9IDI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtBcnJheX0gKi8gKGNvb3JkaW5hdGVzWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHJpZGUgPSBjb29yZGluYXRlcy5sZW5ndGg7XG4gICAgICAgICAgICBsYXlvdXQgPSBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICAgICAgdGhpcy5zdHJpZGUgPSBzdHJpZGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICogQ2FsbGVkIHdpdGggYSBmbGF0IGFycmF5IG9mIGdlb21ldHJ5IGNvb3JkaW5hdGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuYXBwbHlUcmFuc2Zvcm0gPSBmdW5jdGlvbiAodHJhbnNmb3JtRm4pIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1Gbih0aGlzLmZsYXRDb29yZGluYXRlcywgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSb3RhdGUgdGhlIGdlb21ldHJ5IGFyb3VuZCBhIGdpdmVuIGNvb3JkaW5hdGUuIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIGFuZ2xlIGluIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKGFuZ2xlLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgcm90YXRlKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBhbmdsZSwgYW5jaG9yLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNjYWxlIHRoZSBnZW9tZXRyeSAod2l0aCBhbiBvcHRpb25hbCBvcmlnaW4pLiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3ggVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9zeV0gVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG8gc3gpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIHNjYWxlIG9yaWdpbiAoZGVmYXVsdHMgdG8gdGhlIGNlbnRlclxuICAgICAqICAgICBvZiB0aGUgZ2VvbWV0cnkgZXh0ZW50KS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHN4LCBvcHRfc3ksIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIHN5ID0gb3B0X3N5O1xuICAgICAgICBpZiAoc3kgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3kgPSBzeDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvcjtcbiAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgIGFuY2hvciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICBzY2FsZShmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgc3gsIHN5LCBhbmNob3IsIGZsYXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIHRoZSBnZW9tZXRyeS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5IGNvb3JkaW5hdGVzIGluIHBsYWNlLiAgSWZcbiAgICAgKiBpbnN0ZWFkIHlvdSB3YW50IGEgbmV3IGdlb21ldHJ5LCBmaXJzdCBgY2xvbmUoKWAgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHRyYW5zbGF0ZShmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgZGVsdGFYLCBkZWx0YVksIGZsYXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFNpbXBsZUdlb21ldHJ5O1xufShHZW9tZXRyeSkpO1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gbGF5b3V0IExheW91dC5cbiAqL1xuZnVuY3Rpb24gZ2V0TGF5b3V0Rm9yU3RyaWRlKHN0cmlkZSkge1xuICAgIHZhciBsYXlvdXQ7XG4gICAgaWYgKHN0cmlkZSA9PSAyKSB7XG4gICAgICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdHJpZGUgPT0gMykge1xuICAgICAgICBsYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWVo7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0cmlkZSA9PSA0KSB7XG4gICAgICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZWk07XG4gICAgfVxuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gKi8gKGxheW91dCk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBsYXlvdXQgTGF5b3V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KSB7XG4gICAgdmFyIHN0cmlkZTtcbiAgICBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZKSB7XG4gICAgICAgIHN0cmlkZSA9IDI7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWVogfHwgbGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZTSkge1xuICAgICAgICBzdHJpZGUgPSAzO1xuICAgIH1cbiAgICBlbHNlIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFlaTSkge1xuICAgICAgICBzdHJpZGUgPSA0O1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChzdHJpZGUpO1xufVxuLyoqXG4gKiBAcGFyYW0ge1NpbXBsZUdlb21ldHJ5fSBzaW1wbGVHZW9tZXRyeSBTaW1wbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBmbGF0IGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtR2VvbTJEKHNpbXBsZUdlb21ldHJ5LCB0cmFuc2Zvcm0sIG9wdF9kZXN0KSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsZUdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIGlmICghZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHN0cmlkZSA9IHNpbXBsZUdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtMkQoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIHRyYW5zZm9ybSwgb3B0X2Rlc3QpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFNpbXBsZUdlb21ldHJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U2ltcGxlR2VvbWV0cnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9jbG9zZXN0XG4gKi9cbmltcG9ydCB7IGxlcnAsIHNxdWFyZWREaXN0YW5jZSBhcyBzcXVhcmVkRHggfSBmcm9tICcuLi8uLi9tYXRoLmpzJztcbi8qKlxuICogUmV0dXJucyB0aGUgcG9pbnQgb24gdGhlIDJEIGxpbmUgc2VnbWVudCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MV0gdG9cbiAqIGZsYXRDb29yZGluYXRlc1tvZmZzZXQyXSB0aGF0IGlzIGNsb3Nlc3QgdG8gdGhlIHBvaW50ICh4LCB5KS4gIEV4dHJhXG4gKiBkaW1lbnNpb25zIGFyZSBsaW5lYXJseSBpbnRlcnBvbGF0ZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldDEgT2Zmc2V0IDEuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0MiBPZmZzZXQgMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICovXG5mdW5jdGlvbiBhc3NpZ25DbG9zZXN0KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0MSwgb2Zmc2V0Miwgc3RyaWRlLCB4LCB5LCBjbG9zZXN0UG9pbnQpIHtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyAxXTtcbiAgICB2YXIgZHggPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0Ml0gLSB4MTtcbiAgICB2YXIgZHkgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIDFdIC0geTE7XG4gICAgdmFyIG9mZnNldDtcbiAgICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0MTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB0ID0gKCh4IC0geDEpICogZHggKyAoeSAtIHkxKSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmICh0ID4gMSkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0MjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0ID4gMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGxlcnAoZmxhdENvb3JkaW5hdGVzW29mZnNldDEgKyBpXSwgZmxhdENvb3JkaW5hdGVzW29mZnNldDIgKyBpXSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0MTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXTtcbiAgICB9XG4gICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbn1cbi8qKlxuICogUmV0dXJuIHRoZSBzcXVhcmVkIG9mIHRoZSBsYXJnZXN0IGRpc3RhbmNlIGJldHdlZW4gYW55IHBhaXIgb2YgY29uc2VjdXRpdmVcbiAqIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4KSB7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIHZhciBzcXVhcmVkRGVsdGEgPSBzcXVhcmVkRHgoeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICBpZiAoc3F1YXJlZERlbHRhID4gbWF4KSB7XG4gICAgICAgICAgICBtYXggPSBzcXVhcmVkRGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlNYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBtYXggPSBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG11bHRpQXJyYXlNYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG1heCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgbWF4ID0gYXJyYXlNYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gbWF4O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heERlbHRhIE1heCBkZWx0YS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSaW5nIElzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF90bXBQb2ludF0gVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdFBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIG9wdF90bXBQb2ludCkge1xuICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgfVxuICAgIHZhciBpLCBzcXVhcmVkRGlzdGFuY2U7XG4gICAgaWYgKG1heERlbHRhID09PSAwKSB7XG4gICAgICAgIC8vIEFsbCBwb2ludHMgYXJlIGlkZW50aWNhbCwgc28ganVzdCB0ZXN0IHRoZSBmaXJzdCBwb2ludC5cbiAgICAgICAgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHRtcFBvaW50ID0gb3B0X3RtcFBvaW50ID8gb3B0X3RtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgICB2YXIgaW5kZXggPSBvZmZzZXQgKyBzdHJpZGU7XG4gICAgd2hpbGUgKGluZGV4IDwgZW5kKSB7XG4gICAgICAgIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBpbmRleCAtIHN0cmlkZSwgaW5kZXgsIHN0cmlkZSwgeCwgeSwgdG1wUG9pbnQpO1xuICAgICAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgdG1wUG9pbnRbMF0sIHRtcFBvaW50WzFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gdG1wUG9pbnRbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgICAgICAgaW5kZXggKz0gc3RyaWRlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU2tpcCBhaGVhZCBtdWx0aXBsZSBwb2ludHMsIGJlY2F1c2Ugd2Uga25vdyB0aGF0IGFsbCB0aGUgc2tpcHBlZFxuICAgICAgICAgICAgLy8gcG9pbnRzIGNhbm5vdCBiZSBhbnkgY2xvc2VyIHRoYW4gdGhlIGNsb3Nlc3QgcG9pbnQgd2UgaGF2ZSBmb3VuZCBzb1xuICAgICAgICAgICAgLy8gZmFyLiAgV2Uga25vdyB0aGlzIGJlY2F1c2Ugd2Uga25vdyBob3cgY2xvc2UgdGhlIGN1cnJlbnQgcG9pbnQgaXMsIGhvd1xuICAgICAgICAgICAgLy8gY2xvc2UgdGhlIGNsb3Nlc3QgcG9pbnQgd2UgaGF2ZSBmb3VuZCBzbyBmYXIgaXMsIGFuZCB0aGUgbWF4aW11bVxuICAgICAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMuICBGb3IgZXhhbXBsZSwgaWYgd2UncmUgY3VycmVudGx5XG4gICAgICAgICAgICAvLyBhdCBkaXN0YW5jZSAxMCwgdGhlIGJlc3Qgd2UndmUgZm91bmQgc28gZmFyIGlzIDMsIGFuZCB0aGF0IHRoZSBtYXhpbXVtXG4gICAgICAgICAgICAvLyBkaXN0YW5jZSBiZXR3ZWVuIGNvbnNlY3V0aXZlIHBvaW50cyBpcyAyLCB0aGVuIHdlJ2xsIG5lZWQgdG8gc2tpcCBhdFxuICAgICAgICAgICAgLy8gbGVhc3QgKDEwIC0gMykgLyAyID09IDMgKHJvdW5kZWQgZG93bikgcG9pbnRzIHRvIGhhdmUgYW55IGNoYW5jZSBvZlxuICAgICAgICAgICAgLy8gZmluZGluZyBhIGNsb3NlciBwb2ludC4gIFdlIHVzZSBNYXRoLm1heCguLi4sIDEpIHRvIGVuc3VyZSB0aGF0IHdlXG4gICAgICAgICAgICAvLyBhbHdheXMgYWR2YW5jZSBhdCBsZWFzdCBvbmUgcG9pbnQsIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3AuXG4gICAgICAgICAgICBpbmRleCArPVxuICAgICAgICAgICAgICAgIHN0cmlkZSAqXG4gICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KCgoTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZSkgLSBNYXRoLnNxcnQobWluU3F1YXJlZERpc3RhbmNlKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF4RGVsdGEpIHxcbiAgICAgICAgICAgICAgICAgICAgICAgIDAsIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc1JpbmcpIHtcbiAgICAgICAgLy8gQ2hlY2sgdGhlIGNsb3Npbmcgc2VnbWVudC5cbiAgICAgICAgYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIGVuZCAtIHN0cmlkZSwgb2Zmc2V0LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICAgICAgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIHRtcFBvaW50WzBdLCB0bXBQb2ludFsxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IHRtcFBvaW50W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heERlbHRhIE1heCBkZWx0YS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSaW5nIElzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF90bXBQb2ludF0gVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIG9wdF90bXBQb2ludCkge1xuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X3RtcFBvaW50XSBUZW1wb3JhcnkgcG9pbnQgb2JqZWN0LlxuICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25DbG9zZXN0TXVsdGlBcnJheVBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgb3B0X3RtcFBvaW50KSB7XG4gICAgdmFyIHRtcFBvaW50ID0gb3B0X3RtcFBvaW50ID8gb3B0X3RtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCB0bXBQb2ludCk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNsb3Nlc3QuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9kZWZsYXRlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGUsIHN0cmlkZSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0KytdID0gY29vcmRpbmF0ZVtpXTtcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlcywgc3RyaWRlKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0cmlkZTsgKytqKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0KytdID0gY29vcmRpbmF0ZVtqXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlc3MgQ29vcmRpbmF0ZXNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZW5kc10gRW5kcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEVuZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzLCBzdHJpZGUsIG9wdF9lbmRzKSB7XG4gICAgdmFyIGVuZHMgPSBvcHRfZW5kcyA/IG9wdF9lbmRzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGNvb3JkaW5hdGVzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmQgPSBkZWZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc1tqXSwgc3RyaWRlKTtcbiAgICAgICAgZW5kc1tpKytdID0gZW5kO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIGVuZHMubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gZW5kcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IGNvb3JkaW5hdGVzc3MgQ29vcmRpbmF0ZXNzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gW29wdF9lbmRzc10gRW5kc3MuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gRW5kc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlTXVsdGlDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3NzLCBzdHJpZGUsIG9wdF9lbmRzcykge1xuICAgIHZhciBlbmRzcyA9IG9wdF9lbmRzcyA/IG9wdF9lbmRzcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBjb29yZGluYXRlc3NzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzc1tqXSwgc3RyaWRlLCBlbmRzc1tpXSk7XG4gICAgICAgIGVuZHNzW2krK10gPSBlbmRzO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIGVuZHNzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGVuZHNzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGVmbGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5XG4gKi9cbi8vIEJhc2VkIG9uIHNpbXBsaWZ5LWpzIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3VybmVyL3NpbXBsaWZ5LWpzXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTIsIFZsYWRpbWlyIEFnYWZvbmtpblxuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbi8vXG4vLyBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbi8vIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuLy9cbi8vICAgIDEuIFJlZGlzdHJpYnV0aW9ucyBvZiBzb3VyY2UgY29kZSBtdXN0IHJldGFpbiB0aGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSxcbi8vICAgICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4vL1xuLy8gICAgMi4gUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHRcbi8vICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGVcbi8vICAgICAgIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZCB3aXRoIHRoZSBkaXN0cmlidXRpb24uXG4vL1xuLy8gVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCJcbi8vIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEVcbi8vIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFXG4vLyBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFXG4vLyBMSUFCTEUgRk9SIEFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SXG4vLyBDT05TRVFVRU5USUFMIERBTUFHRVMgKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRlxuLy8gU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsgTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTXG4vLyBJTlRFUlJVUFRJT04pIEhPV0VWRVIgQ0FVU0VEIEFORCBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTlxuLy8gQ09OVFJBQ1QsIFNUUklDVCBMSUFCSUxJVFksIE9SIFRPUlQgKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSlcbi8vIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFXG4vLyBQT1NTSUJJTElUWSBPRiBTVUNIIERBTUFHRS5cbmltcG9ydCB7IHNxdWFyZWREaXN0YW5jZSwgc3F1YXJlZFNlZ21lbnREaXN0YW5jZSB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGhpZ2hRdWFsaXR5IEhpZ2hlc3QgcXVhbGl0eS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzXSBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFNpbXBsaWZpZWQgbGluZSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaW1wbGlmeUxpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBoaWdoUXVhbGl0eSwgb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1xuICAgICAgICA6IFtdO1xuICAgIGlmICghaGlnaFF1YWxpdHkpIHtcbiAgICAgICAgZW5kID0gcmFkaWFsRGlzdGFuY2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbiAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgc3RyaWRlID0gMjtcbiAgICB9XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkb3VnbGFzUGV1Y2tlcihmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgIHJldHVybiBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlcihmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgICB2YXIgbiA9IChlbmQgLSBvZmZzZXQpIC8gc3RyaWRlO1xuICAgIGlmIChuIDwgMykge1xuICAgICAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgdmFyIG1hcmtlcnMgPSBuZXcgQXJyYXkobik7XG4gICAgbWFya2Vyc1swXSA9IDE7XG4gICAgbWFya2Vyc1tuIC0gMV0gPSAxO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgc3RhY2sgPSBbb2Zmc2V0LCBlbmQgLSBzdHJpZGVdO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGxhc3QgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgdmFyIGZpcnN0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIHZhciBtYXhTcXVhcmVkRGlzdGFuY2UgPSAwO1xuICAgICAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZmlyc3RdO1xuICAgICAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZmlyc3QgKyAxXTtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW2xhc3RdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdCArIDFdO1xuICAgICAgICBmb3IgKHZhciBpID0gZmlyc3QgKyBzdHJpZGU7IGkgPCBsYXN0OyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmFyIHggPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICB2YXIgeSA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICAgICAgICB2YXIgc3F1YXJlZERpc3RhbmNlXzEgPSBzcXVhcmVkU2VnbWVudERpc3RhbmNlKHgsIHksIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2VfMSA+IG1heFNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICBtYXhTcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2VfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4U3F1YXJlZERpc3RhbmNlID4gc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgbWFya2Vyc1soaW5kZXggLSBvZmZzZXQpIC8gc3RyaWRlXSA9IDE7XG4gICAgICAgICAgICBpZiAoZmlyc3QgKyBzdHJpZGUgPCBpbmRleCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goZmlyc3QsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbmRleCArIHN0cmlkZSA8IGxhc3QpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGluZGV4LCBsYXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICBpZiAobWFya2Vyc1tpXSkge1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSAqIHN0cmlkZV07XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpICogc3RyaWRlICsgMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRW5kcyBTaW1wbGlmaWVkIGVuZHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXJBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgc2ltcGxpZmllZE9mZnNldCA9IGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gc2ltcGxpZmllZEVuZHNzIFNpbXBsaWZpZWQgZW5kc3MuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXJNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kc3MpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gZG91Z2xhc1BldWNrZXJBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIHNpbXBsaWZpZWRFbmRzcy5wdXNoKHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFkaWFsRGlzdGFuY2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gICAgaWYgKGVuZCA8PSBvZmZzZXQgKyBzdHJpZGUpIHtcbiAgICAgICAgLy8gemVybyBvciBvbmUgcG9pbnQsIG5vIHNpbXBsaWZpY2F0aW9uIHBvc3NpYmxlLCBzbyBjb3B5IGFuZCByZXR1cm5cbiAgICAgICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIC8vIGNvcHkgZmlyc3QgcG9pbnRcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MTtcbiAgICB2YXIgeDIgPSB4MTtcbiAgICB2YXIgeTIgPSB5MTtcbiAgICBmb3IgKG9mZnNldCArPSBzdHJpZGU7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5MikgPiBzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICAvLyBjb3B5IHBvaW50IGF0IG9mZnNldFxuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgICAgICAgIHgxID0geDI7XG4gICAgICAgICAgICB5MSA9IHkyO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICh4MiAhPSB4MSB8fCB5MiAhPSB5MSkge1xuICAgICAgICAvLyBjb3B5IGxhc3QgcG9pbnRcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJvdW5kZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbmFwKHZhbHVlLCB0b2xlcmFuY2UpIHtcbiAgICByZXR1cm4gdG9sZXJhbmNlICogTWF0aC5yb3VuZCh2YWx1ZSAvIHRvbGVyYW5jZSk7XG59XG4vKipcbiAqIFNpbXBsaWZpZXMgYSBsaW5lIHN0cmluZyB1c2luZyBhbiBhbGdvcml0aG0gZGVzaWduZWQgYnkgVGltIFNjaGF1Yi5cbiAqIENvb3JkaW5hdGVzIGFyZSBzbmFwcGVkIHRvIHRoZSBuZWFyZXN0IHZhbHVlIGluIGEgdmlydHVhbCBncmlkIGFuZFxuICogY29uc2VjdXRpdmUgZHVwbGljYXRlIGNvb3JkaW5hdGVzIGFyZSBkaXNjYXJkZWQuICBUaGlzIGVmZmVjdGl2ZWx5IHByZXNlcnZlc1xuICogdG9wb2xvZ3kgYXMgdGhlIHNpbXBsaWZpY2F0aW9uIG9mIGFueSBzdWJzZWN0aW9uIG9mIGEgbGluZSBzdHJpbmcgaXNcbiAqIGluZGVwZW5kZW50IG9mIHRoZSByZXN0IG9mIHRoZSBsaW5lIHN0cmluZy4gIFRoaXMgbWVhbnMgdGhhdCwgZm9yIGV4YW1wbGVzLFxuICogdGhlIGNvbW1vbiBlZGdlIGJldHdlZW4gdHdvIHBvbHlnb25zIHdpbGwgYmUgc2ltcGxpZmllZCB0byB0aGUgc2FtZSBsaW5lXG4gKiBzdHJpbmcgaW5kZXBlbmRlbnRseSBpbiBib3RoIHBvbHlnb25zLiAgVGhpcyBpbXBsZW1lbnRhdGlvbiB1c2VzIGEgc2luZ2xlXG4gKiBwYXNzIG92ZXIgdGhlIGNvb3JkaW5hdGVzIGFuZCBlbGltaW5hdGVzIGludGVybWVkaWF0ZSBjb2xsaW5lYXIgcG9pbnRzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgICAvLyBkbyBub3RoaW5nIGlmIHRoZSBsaW5lIGlzIGVtcHR5XG4gICAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICAgIC8vIHNuYXAgdGhlIGZpcnN0IGNvb3JkaW5hdGUgKFAxKVxuICAgIHZhciB4MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gICAgdmFyIHkxID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAvLyBhZGQgdGhlIGZpcnN0IGNvb3JkaW5hdGUgdG8gdGhlIG91dHB1dFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgxO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICAgIC8vIGZpbmQgdGhlIG5leHQgY29vcmRpbmF0ZSB0aGF0IGRvZXMgbm90IHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUgYXMgdGhlIGZpcnN0XG4gICAgLy8gY29vcmRpbmF0ZSAoUDIpXG4gICAgdmFyIHgyLCB5MjtcbiAgICBkbyB7XG4gICAgICAgIHgyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICAgICAgeTIgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICAgICAgICAgIC8vIGFsbCBjb29yZGluYXRlcyBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlLCB0aGUgbGluZSBjb2xsYXBzZXMgdG8gYSBwb2ludFxuICAgICAgICAgICAgLy8gcHVzaCB0aGUgbGFzdCBzbmFwcGVkIHZhbHVlIGFueXdheSB0byBlbnN1cmUgdGhhdCB0aGUgb3V0cHV0IGNvbnRhaW5zXG4gICAgICAgICAgICAvLyBhdCBsZWFzdCB0d28gcG9pbnRzXG4gICAgICAgICAgICAvLyBGSVhNRSBzaG91bGQgd2UgcmVhbGx5IHJldHVybiBhdCBsZWFzdCB0d28gcG9pbnRzIGFueXdheT9cbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKHgyID09IHgxICYmIHkyID09IHkxKTtcbiAgICB3aGlsZSAob2Zmc2V0IDwgZW5kKSB7XG4gICAgICAgIC8vIHNuYXAgdGhlIG5leHQgY29vcmRpbmF0ZSAoUDMpXG4gICAgICAgIHZhciB4MyA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gICAgICAgIHZhciB5MyA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICAvLyBza2lwIFAzIGlmIGl0IGlzIGVxdWFsIHRvIFAyXG4gICAgICAgIGlmICh4MyA9PSB4MiAmJiB5MyA9PSB5Mikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIFAxIGFuZCBQMlxuICAgICAgICB2YXIgZHgxID0geDIgLSB4MTtcbiAgICAgICAgdmFyIGR5MSA9IHkyIC0geTE7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiBQMyBhbmQgUDFcbiAgICAgICAgdmFyIGR4MiA9IHgzIC0geDE7XG4gICAgICAgIHZhciBkeTIgPSB5MyAtIHkxO1xuICAgICAgICAvLyBpZiBQMSwgUDIsIGFuZCBQMyBhcmUgY29saW5lYXIgYW5kIFAzIGlzIGZ1cnRoZXIgZnJvbSBQMSB0aGFuIFAyIGlzIGZyb21cbiAgICAgICAgLy8gUDEgaW4gdGhlIHNhbWUgZGlyZWN0aW9uIHRoZW4gUDIgaXMgb24gdGhlIHN0cmFpZ2h0IGxpbmUgYmV0d2VlbiBQMSBhbmRcbiAgICAgICAgLy8gUDNcbiAgICAgICAgaWYgKGR4MSAqIGR5MiA9PSBkeTEgKiBkeDIgJiZcbiAgICAgICAgICAgICgoZHgxIDwgMCAmJiBkeDIgPCBkeDEpIHx8IGR4MSA9PSBkeDIgfHwgKGR4MSA+IDAgJiYgZHgyID4gZHgxKSkgJiZcbiAgICAgICAgICAgICgoZHkxIDwgMCAmJiBkeTIgPCBkeTEpIHx8IGR5MSA9PSBkeTIgfHwgKGR5MSA+IDAgJiYgZHkyID4gZHkxKSkpIHtcbiAgICAgICAgICAgIC8vIGRpc2NhcmQgUDIgYW5kIHNldCBQMiA9IFAzXG4gICAgICAgICAgICB4MiA9IHgzO1xuICAgICAgICAgICAgeTIgPSB5MztcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVpdGhlciBQMSwgUDIsIGFuZCBQMyBhcmUgbm90IGNvbGluZWFyLCBvciB0aGV5IGFyZSBjb2xpbmVhciBidXQgUDMgaXNcbiAgICAgICAgLy8gYmV0d2VlbiBQMyBhbmQgUDEgb3Igb24gdGhlIG9wcG9zaXRlIGhhbGYgb2YgdGhlIGxpbmUgdG8gUDIuICBhZGQgUDIsXG4gICAgICAgIC8vIGFuZCBjb250aW51ZSB3aXRoIFAxID0gUDIgYW5kIFAyID0gUDNcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgICAgICB4MiA9IHgzO1xuICAgICAgICB5MiA9IHkzO1xuICAgIH1cbiAgICAvLyBhZGQgdGhlIGxhc3QgcG9pbnQgKFAyKVxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEVuZHMgU2ltcGxpZmllZCBlbmRzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgc2ltcGxpZmllZE9mZnNldCA9IHF1YW50aXplKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZU11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHNzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZE9mZnNldCA9IHF1YW50aXplQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIHNpbXBsaWZpZWRFbmRzcy5wdXNoKHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNpbXBsaWZ5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW5mbGF0ZVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IFtvcHRfY29vcmRpbmF0ZXNdIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBvcHRfY29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9jb29yZGluYXRlcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICBjb29yZGluYXRlc1tpKytdID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKGosIGogKyBzdHJpZGUpO1xuICAgIH1cbiAgICBjb29yZGluYXRlcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBjb29yZGluYXRlcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IFtvcHRfY29vcmRpbmF0ZXNzXSBDb29yZGluYXRlc3MuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzcykge1xuICAgIHZhciBjb29yZGluYXRlc3MgPSBvcHRfY29vcmRpbmF0ZXNzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGVuZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tqXTtcbiAgICAgICAgY29vcmRpbmF0ZXNzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjb29yZGluYXRlc3NbaV0pO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBjb29yZGluYXRlc3M7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gW29wdF9jb29yZGluYXRlc3NzXVxuICogICAgIENvb3JkaW5hdGVzc3MuXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IENvb3JkaW5hdGVzc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlTXVsdGlDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXNzcykge1xuICAgIHZhciBjb29yZGluYXRlc3NzID0gb3B0X2Nvb3JkaW5hdGVzc3MgIT09IHVuZGVmaW5lZCA/IG9wdF9jb29yZGluYXRlc3NzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGVuZHNzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tqXTtcbiAgICAgICAgY29vcmRpbmF0ZXNzc1tpKytdID0gaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgY29vcmRpbmF0ZXNzc1tpXSk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXNzcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBjb29yZGluYXRlc3NzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5mbGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2FyZWFcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICB2YXIgdHdpY2VBcmVhID0gMDtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB0d2ljZUFyZWEgKz0geTEgKiB4MiAtIHgxICogeTI7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiB0d2ljZUFyZWEgLyAyO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSkge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIGFyZWEgKz0gbGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgYXJlYSArPSBsaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFyZWEuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0xpbmVhclJpbmdcbiAqL1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgeyBhc3NpZ25DbG9zZXN0UG9pbnQsIG1heFNxdWFyZWREZWx0YSB9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBkZWZsYXRlQ29vcmRpbmF0ZXMgfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQgeyBkb3VnbGFzUGV1Y2tlciB9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5pbXBvcnQgeyBpbmZsYXRlQ29vcmRpbmF0ZXMgfSBmcm9tICcuL2ZsYXQvaW5mbGF0ZS5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nIGFzIGxpbmVhclJpbmdBcmVhIH0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBMaW5lYXIgcmluZyBnZW9tZXRyeS4gT25seSB1c2VkIGFzIHBhcnQgb2YgcG9seWdvbjsgY2Fubm90IGJlIHJlbmRlcmVkXG4gKiBvbiBpdHMgb3duLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIExpbmVhclJpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExpbmVhclJpbmcsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fEFycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqICAgICBGb3IgaW50ZXJuYWwgdXNlLCBmbGF0IGNvb3JkaW5hdGVzIGluIGNvbWJpbmF0aW9uIHdpdGggYG9wdF9sYXlvdXRgIGFyZSBhbHNvIGFjY2VwdGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExpbmVhclJpbmcoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuICAgICAgICBpZiAob3B0X2xheW91dCAhPT0gdW5kZWZpbmVkICYmICFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSkge1xuICAgICAgICAgICAgX3RoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqLyAoY29vcmRpbmF0ZXMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVzKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHshTGluZWFyUmluZ30gQ2xvbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IExpbmVhclJpbmcodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1heERlbHRhUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YV8gPSBNYXRoLnNxcnQobWF4U3F1YXJlZERlbHRhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCAwKSk7XG4gICAgICAgICAgICB0aGlzLm1heERlbHRhUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhc3NpZ25DbG9zZXN0UG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIHRoaXMubWF4RGVsdGFfLCB0cnVlLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGFyZWEgb2YgdGhlIGxpbmVhciByaW5nIG9uIHByb2plY3RlZCBwbGFuZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKG9uIHByb2plY3RlZCBwbGFuZSkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsaW5lYXJSaW5nQXJlYSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lYXIgcmluZy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBDb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXModGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7TGluZWFyUmluZ30gU2ltcGxpZmllZCBMaW5lYXJSaW5nLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgICAgICByZXR1cm4gbmV3IExpbmVhclJpbmcoc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5MSU5FQVJfUklORztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lYXIgcmluZy5cbiAgICAgKiBAcGFyYW0geyFBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDEpO1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRlZmxhdGVDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gTGluZWFyUmluZztcbn0oU2ltcGxlR2VvbWV0cnkpKTtcbmV4cG9ydCBkZWZhdWx0IExpbmVhclJpbmc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MaW5lYXJSaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0dlb21ldHJ5VHlwZVxuICovXG4vKipcbiAqIFRoZSBnZW9tZXRyeSB0eXBlLiBPbmUgb2YgYCdQb2ludCdgLCBgJ0xpbmVTdHJpbmcnYCwgYCdMaW5lYXJSaW5nJ2AsXG4gKiBgJ1BvbHlnb24nYCwgYCdNdWx0aVBvaW50J2AsIGAnTXVsdGlMaW5lU3RyaW5nJ2AsIGAnTXVsdGlQb2x5Z29uJ2AsXG4gKiBgJ0dlb21ldHJ5Q29sbGVjdGlvbidgLCBgJ0NpcmNsZSdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFBPSU5UOiAnUG9pbnQnLFxuICAgIExJTkVfU1RSSU5HOiAnTGluZVN0cmluZycsXG4gICAgTElORUFSX1JJTkc6ICdMaW5lYXJSaW5nJyxcbiAgICBQT0xZR09OOiAnUG9seWdvbicsXG4gICAgTVVMVElfUE9JTlQ6ICdNdWx0aVBvaW50JyxcbiAgICBNVUxUSV9MSU5FX1NUUklORzogJ011bHRpTGluZVN0cmluZycsXG4gICAgTVVMVElfUE9MWUdPTjogJ011bHRpUG9seWdvbicsXG4gICAgR0VPTUVUUllfQ09MTEVDVElPTjogJ0dlb21ldHJ5Q29sbGVjdGlvbicsXG4gICAgQ0lSQ0xFOiAnQ2lyY2xlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeVR5cGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvaW50XG4gKi9cbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgY29udGFpbnNYWSwgY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZSB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBkZWZsYXRlQ29vcmRpbmF0ZSB9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7IHNxdWFyZWREaXN0YW5jZSBhcyBzcXVhcmVkRHggfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9pbnQgZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgUG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvaW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2ludChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlcyhjb29yZGluYXRlcywgb3B0X2xheW91dCk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFQb2ludH0gQ2xvbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvaW50ID0gbmV3IFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICAgICAgcG9pbnQuYXBwbHlQcm9wZXJ0aWVzKHRoaXMpO1xuICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIHZhciBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5zdHJpZGU7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmZsYXRDb29yZGluYXRlcyA/IFtdIDogdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5QT0lOVDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCB0aGlzLmZsYXRDb29yZGluYXRlc1swXSwgdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshQXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDApO1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRlZmxhdGVDb29yZGluYXRlKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBQb2ludDtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcbmV4cG9ydCBkZWZhdWx0IFBvaW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9jb250YWluc1xuICovXG5pbXBvcnQgeyBmb3JFYWNoQ29ybmVyIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdDb250YWluc0V4dGVudChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIHZhciBvdXRzaWRlID0gZm9yRWFjaENvcm5lcihleHRlbnQsIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiAhbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgICB9KTtcbiAgICByZXR1cm4gIW91dHNpZGU7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgeCwgeSkge1xuICAgIC8vIGh0dHBzOi8vZ2VvbWFsZ29yaXRobXMuY29tL2EwMy1faW5jbHVzaW9uLmh0bWxcbiAgICAvLyBDb3B5cmlnaHQgMjAwMCBzb2Z0U3VyZmVyLCAyMDEyIERhbiBTdW5kYXlcbiAgICAvLyBUaGlzIGNvZGUgbWF5IGJlIGZyZWVseSB1c2VkIGFuZCBtb2RpZmllZCBmb3IgYW55IHB1cnBvc2VcbiAgICAvLyBwcm92aWRpbmcgdGhhdCB0aGlzIGNvcHlyaWdodCBub3RpY2UgaXMgaW5jbHVkZWQgd2l0aCBpdC5cbiAgICAvLyBTb2Z0U3VyZmVyIG1ha2VzIG5vIHdhcnJhbnR5IGZvciB0aGlzIGNvZGUsIGFuZCBjYW5ub3QgYmUgaGVsZFxuICAgIC8vIGxpYWJsZSBmb3IgYW55IHJlYWwgb3IgaW1hZ2luZWQgZGFtYWdlIHJlc3VsdGluZyBmcm9tIGl0cyB1c2UuXG4gICAgLy8gVXNlcnMgb2YgdGhpcyBjb2RlIG11c3QgdmVyaWZ5IGNvcnJlY3RuZXNzIGZvciB0aGVpciBhcHBsaWNhdGlvbi5cbiAgICB2YXIgd24gPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIGlmICh5MSA8PSB5KSB7XG4gICAgICAgICAgICBpZiAoeTIgPiB5ICYmICh4MiAtIHgxKSAqICh5IC0geTEpIC0gKHggLSB4MSkgKiAoeTIgLSB5MSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgd24rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5MiA8PSB5ICYmICh4MiAtIHgxKSAqICh5IC0geTEpIC0gKHggLSB4MSkgKiAoeTIgLSB5MSkgPCAwKSB7XG4gICAgICAgICAgICB3bi0tO1xuICAgICAgICB9XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiB3biAhPT0gMDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpIHtcbiAgICBpZiAoZW5kcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoIWxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzWzBdLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDEsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIHgsIHkpIHtcbiAgICBpZiAoZW5kc3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRhaW5zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudFxuICovXG5pbXBvcnQgeyBjb250YWluc0V4dGVudCwgY3JlYXRlRW1wdHksIGV4dGVuZEZsYXRDb29yZGluYXRlcywgaW50ZXJzZWN0cywgaW50ZXJzZWN0c1NlZ21lbnQsIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGZvckVhY2ggYXMgZm9yRWFjaFNlZ21lbnQgfSBmcm9tICcuL3NlZ21lbnRzLmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdDb250YWluc0V4dGVudCwgbGluZWFyUmluZ0NvbnRhaW5zWFkgfSBmcm9tICcuL2NvbnRhaW5zLmpzJztcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzRXh0ZW50ID0gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKGNyZWF0ZUVtcHR5KCksIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgaWYgKCFpbnRlcnNlY3RzKGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5zRXh0ZW50KGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNFeHRlbnRbMF0gPj0gZXh0ZW50WzBdICYmIGNvb3JkaW5hdGVzRXh0ZW50WzJdIDw9IGV4dGVudFsyXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzFdID49IGV4dGVudFsxXSAmJiBjb29yZGluYXRlc0V4dGVudFszXSA8PSBleHRlbnRbM10pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmb3JFYWNoU2VnbWVudChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludDEgU3RhcnQgcG9pbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MiBFbmQgcG9pbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBzZWdtZW50IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdCxcbiAgICAgKiAgICAgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICAgIHJldHVybiBpbnRlcnNlY3RzU2VnbWVudChleHRlbnQsIHBvaW50MSwgcG9pbnQyKTtcbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lU3RyaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFswXSwgZXh0ZW50WzFdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbM10pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMl0sIGV4dGVudFsxXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFsyXSwgZXh0ZW50WzNdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBpZiAoIWludGVyc2VjdHNMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzWzBdLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZW5kcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgaWYgKCFpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZ011bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaWYgKGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcnNlY3RzZXh0ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2VnbWVudHNcbiAqL1xuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGNhbGxzIGBjYWxsYmFja2AgZm9yIGVhY2ggc2VnbWVudCBvZiB0aGUgZmxhdCBjb29yZGluYXRlc1xuICogYXJyYXkuIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXRcbiAqIHZhbHVlIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSwgaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogVH0gY2FsbGJhY2sgRnVuY3Rpb25cbiAqICAgICBjYWxsZWQgZm9yIGVhY2ggc2VnbWVudC5cbiAqIEByZXR1cm4ge1R8Ym9vbGVhbn0gVmFsdWUuXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBvaW50MSA9IFtmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdXTtcbiAgICB2YXIgcG9pbnQyID0gW107XG4gICAgdmFyIHJldDtcbiAgICBmb3IgKDsgb2Zmc2V0ICsgc3RyaWRlIDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHBvaW50MlswXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBzdHJpZGVdO1xuICAgICAgICBwb2ludDJbMV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgc3RyaWRlICsgMV07XG4gICAgICAgIHJldCA9IGNhbGxiYWNrKHBvaW50MSwgcG9pbnQyKTtcbiAgICAgICAgaWYgKHJldCkge1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgICAgICBwb2ludDFbMF0gPSBwb2ludDJbMF07XG4gICAgICAgIHBvaW50MVsxXSA9IHBvaW50MlsxXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VnbWVudHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9yZXZlcnNlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQgLSBzdHJpZGUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgdmFyIHRtcCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXTtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyBpXTtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyBpXSA9IHRtcDtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICBlbmQgLT0gc3RyaWRlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJldmVyc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9vcmllbnRcbiAqL1xuaW1wb3J0IHsgY29vcmRpbmF0ZXMgYXMgcmV2ZXJzZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9yZXZlcnNlLmpzJztcbi8qKlxuICogSXMgdGhlIGxpbmVhciByaW5nIG9yaWVudGVkIGNsb2Nrd2lzZSBpbiBhIGNvb3JkaW5hdGUgc3lzdGVtIHdpdGggYSBib3R0b20tbGVmdFxuICogY29vcmRpbmF0ZSBvcmlnaW4/IEZvciBhIGNvb3JkaW5hdGUgc3lzdGVtIHdpdGggYSB0b3AtbGVmdCBjb29yZGluYXRlIG9yaWdpbixcbiAqIHRoZSByaW5nJ3Mgb3JpZW50YXRpb24gaXMgY2xvY2t3aXNlIHdoZW4gdGhpcyBmdW5jdGlvbiByZXR1cm5zIGZhbHNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGNsb2Nrd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvMTE2NTY0Ny9jbG9ja3dpc2UtbWV0aG9kIzExNjU5NDNcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vT1NHZW8vZ2RhbC9ibG9iL21hc3Rlci9nZGFsL29nci9vZ3JsaW5lYXJyaW5nLmNwcFxuICAgIHZhciBlZGdlID0gMDtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICBlZGdlICs9ICh4MiAtIHgxKSAqICh5MiArIHkxKTtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIGVkZ2UgPT09IDAgPyB1bmRlZmluZWQgOiBlZGdlID4gMDtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBsaW5lYXIgcmluZ3MgYXJlIG9yaWVudGVkLiAgQnkgZGVmYXVsdCwgbGVmdC1oYW5kIG9yaWVudGF0aW9uXG4gKiBpcyB0ZXN0ZWQgKGZpcnN0IHJpbmcgbXVzdCBiZSBjbG9ja3dpc2UsIHJlbWFpbmluZyByaW5ncyBjb3VudGVyLWNsb2Nrd2lzZSkuXG4gKiBUbyB0ZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBBcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICB2YXIgcmlnaHQgPSBvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCA/IG9wdF9yaWdodCA6IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgdmFyIGlzQ2xvY2t3aXNlID0gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoKHJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiBpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBsaW5lYXIgcmluZ3MgYXJlIG9yaWVudGVkLiAgQnkgZGVmYXVsdCwgbGVmdC1oYW5kIG9yaWVudGF0aW9uXG4gKiBpcyB0ZXN0ZWQgKGZpcnN0IHJpbmcgbXVzdCBiZSBjbG9ja3dpc2UsIHJlbWFpbmluZyByaW5ncyBjb3VudGVyLWNsb2Nrd2lzZSkuXG4gKiBUbyB0ZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEFycmF5IG9mIGFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIFRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb25cbiAqICAgICAoY291bnRlci1jbG9ja3dpc2UgZXh0ZXJpb3IgcmluZyBhbmQgY2xvY2t3aXNlIGludGVyaW9yIHJpbmdzKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJpbmdzIGFyZSBjb3JyZWN0bHkgb3JpZW50ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpZiAoIWxpbmVhclJpbmdzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X3JpZ2h0KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmRzLmxlbmd0aCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBPcmllbnQgY29vcmRpbmF0ZXMgaW4gYSBmbGF0IGFycmF5IG9mIGxpbmVhciByaW5ncy4gIEJ5IGRlZmF1bHQsIHJpbmdzXG4gKiBhcmUgb3JpZW50ZWQgZm9sbG93aW5nIHRoZSBsZWZ0LWhhbmQgcnVsZSAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmRcbiAqIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuICBUbyBvcmllbnQgYWNjb3JkaW5nIHRvIHRoZVxuICogcmlnaHQtaGFuZCBydWxlLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gICAgdmFyIHJpZ2h0ID0gb3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQgPyBvcHRfcmlnaHQgOiBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHZhciBpc0Nsb2Nrd2lzZSA9IGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICB2YXIgcmV2ZXJzZSA9IGkgPT09IDBcbiAgICAgICAgICAgID8gKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSlcbiAgICAgICAgICAgIDogKHJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiBpc0Nsb2Nrd2lzZSk7XG4gICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgICByZXZlcnNlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gRm9sbG93IHRoZSByaWdodC1oYW5kIHJ1bGUgZm9yIG9yaWVudGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmllbnRMaW5lYXJSaW5nc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIG9mZnNldCA9IG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzc1tpXSwgc3RyaWRlLCBvcHRfcmlnaHQpO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3JpZW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2x5Z29uXG4gKi9cbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IExpbmVhclJpbmcgZnJvbSAnLi9MaW5lYXJSaW5nLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuL1BvaW50LmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGFycmF5TWF4U3F1YXJlZERlbHRhLCBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCB9IGZyb20gJy4vZmxhdC9jbG9zZXN0LmpzJztcbmltcG9ydCB7IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlc0FycmF5IH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgZXh0ZW5kIH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyc7XG5pbXBvcnQgeyBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSB9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7IGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nc0FyZU9yaWVudGVkLCBvcmllbnRMaW5lYXJSaW5ncyB9IGZyb20gJy4vZmxhdC9vcmllbnQuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3MgYXMgbGluZWFyUmluZ3NBcmVhIH0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3NDb250YWluc1hZIH0gZnJvbSAnLi9mbGF0L2NvbnRhaW5zLmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgcXVhbnRpemVBcnJheSB9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5pbXBvcnQgeyBvZmZzZXQgYXMgc3BoZXJlT2Zmc2V0IH0gZnJvbSAnLi4vc3BoZXJlLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9seWdvbiBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQb2x5Z29uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2x5Z29uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fCFBcnJheTxudW1iZXI+fSBjb29yZGluYXRlc1xuICAgICAqICAgICBBcnJheSBvZiBsaW5lYXIgcmluZ3MgdGhhdCBkZWZpbmUgdGhlIHBvbHlnb24uIFRoZSBmaXJzdCBsaW5lYXIgcmluZyBvZiB0aGVcbiAgICAgKiAgICAgYXJyYXkgZGVmaW5lcyB0aGUgb3V0ZXItYm91bmRhcnkgb3Igc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gRWFjaCBzdWJzZXF1ZW50XG4gICAgICogICAgIGxpbmVhciByaW5nIGRlZmluZXMgYSBob2xlIGluIHRoZSBzdXJmYWNlIG9mIHRoZSBwb2x5Z29uLiBBIGxpbmVhciByaW5nIGlzXG4gICAgICogICAgIGFuIGFycmF5IG9mIHZlcnRpY2VzJyBjb29yZGluYXRlcyB3aGVyZSB0aGUgZmlyc3QgY29vcmRpbmF0ZSBhbmQgdGhlIGxhc3QgYXJlXG4gICAgICogICAgIGVxdWl2YWxlbnQuIChGb3IgaW50ZXJuYWwgdXNlLCBmbGF0IGNvb3JkaW5hdGVzIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAgICAgKiAgICAgYG9wdF9sYXlvdXRgIGFuZCBgb3B0X2VuZHNgIGFyZSBhbHNvIGFjY2VwdGVkLilcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZW5kc10gRW5kcyAoZm9yIGludGVybmFsIHVzZSB3aXRoIGZsYXQgY29vcmRpbmF0ZXMpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBvbHlnb24oY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQsIG9wdF9lbmRzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVuZHNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mbGF0SW50ZXJpb3JQb2ludF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhUmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZW50ZWRSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiBvcHRfZW5kcykge1xuICAgICAgICAgICAgX3RoaXMuc2V0RmxhdENvb3JkaW5hdGVzKG9wdF9sYXlvdXQsIFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqLyAoY29vcmRpbmF0ZXMpKTtcbiAgICAgICAgICAgIF90aGlzLmVuZHNfID0gb3B0X2VuZHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlcyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59ICovIChjb29yZGluYXRlcyksIG9wdF9sYXlvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwZW5kIHRoZSBwYXNzZWQgbGluZWFyIHJpbmcgdG8gdGhpcyBwb2x5Z29uLlxuICAgICAqIEBwYXJhbSB7TGluZWFyUmluZ30gbGluZWFyUmluZyBMaW5lYXIgcmluZy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuYXBwZW5kTGluZWFyUmluZyA9IGZ1bmN0aW9uIChsaW5lYXJSaW5nKSB7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gbGluZWFyUmluZy5nZXRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXh0ZW5kKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVuZHNfLnB1c2godGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7IVBvbHlnb259IENsb25lLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBvbHlnb24gPSBuZXcgUG9seWdvbih0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCwgdGhpcy5lbmRzXy5zbGljZSgpKTtcbiAgICAgICAgcG9seWdvbi5hcHBseVByb3BlcnRpZXModGhpcyk7XG4gICAgICAgIHJldHVybiBwb2x5Z29uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5jbG9zZXN0UG9pbnRYWSA9IGZ1bmN0aW9uICh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1heERlbHRhUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YV8gPSBNYXRoLnNxcnQoYXJyYXlNYXhTcXVhcmVkRGVsdGEodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCAwKSk7XG4gICAgICAgICAgICB0aGlzLm1heERlbHRhUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIHRoaXMubWF4RGVsdGFfLCB0cnVlLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmNvbnRhaW5zWFkgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ3NDb250YWluc1hZKHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIHgsIHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBhcmVhIG9mIHRoZSBwb2x5Z29uIG9uIHByb2plY3RlZCBwbGFuZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKG9uIHByb2plY3RlZCBwbGFuZSkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEFyZWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBsaW5lYXJSaW5nc0FyZWEodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgYXJyYXkgZm9yIHRoaXMgZ2VvbWV0cnkuICBUaGlzIGFycmF5IGhhcyB0aGUgc3RydWN0dXJlXG4gICAgICogb2YgYSBHZW9KU09OIGNvb3JkaW5hdGUgYXJyYXkgZm9yIHBvbHlnb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBPcmllbnQgY29vcmRpbmF0ZXMgYWNjb3JkaW5nIHRvIHRoZSByaWdodC1oYW5kXG4gICAgICogICAgIHJ1bGUgKGNvdW50ZXItY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAgICogICAgIElmIGBmYWxzZWAsIGNvb3JkaW5hdGVzIHdpbGwgYmUgb3JpZW50ZWQgYWNjb3JkaW5nIHRvIHRoZSBsZWZ0LWhhbmQgcnVsZVxuICAgICAqICAgICAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICAgKiAgICAgQnkgZGVmYXVsdCwgY29vcmRpbmF0ZSBvcmllbnRhdGlvbiB3aWxsIGRlcGVuZCBvbiBob3cgdGhlIGdlb21ldHJ5IHdhc1xuICAgICAqICAgICBjb25zdHJ1Y3RlZC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKG9wdF9yaWdodCkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICBpZiAob3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKS5zbGljZSgpO1xuICAgICAgICAgICAgb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgb3B0X3JpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEVuZHMuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RW5kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRGbGF0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZmxhdENlbnRlciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICAgICAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgZmxhdENlbnRlciwgMCk7XG4gICAgICAgICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRJbnRlcmlvclBvaW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhbiBpbnRlcmlvciBwb2ludCBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAgICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMuZ2V0RmxhdEludGVyaW9yUG9pbnQoKSwgR2VvbWV0cnlMYXlvdXQuWFlNKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbnVtYmVyIG9mIHJpbmdzIG9mIHRoZSBwb2x5Z29uLCAgdGhpcyBpbmNsdWRlcyB0aGUgZXh0ZXJpb3JcbiAgICAgKiByaW5nIGFuZCBhbnkgaW50ZXJpb3IgcmluZ3MuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiByaW5ncy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZ0NvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmRzXy5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICAgKiBnaXZlbiBpbmRleCBpcyBvdXQgb2YgcmFuZ2UuXG4gICAgICogVGhlIGV4dGVyaW9yIGxpbmVhciByaW5nIGlzIGF2YWlsYWJsZSBhdCBpbmRleCBgMGAgYW5kIHRoZSBpbnRlcmlvciByaW5nc1xuICAgICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IExpbmVhciByaW5nLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgdGhpcy5lbmRzXy5sZW5ndGggPD0gaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGluZWFyUmluZyh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZShpbmRleCA9PT0gMCA/IDAgOiB0aGlzLmVuZHNfW2luZGV4IC0gMV0sIHRoaXMuZW5kc19baW5kZXhdKSwgdGhpcy5sYXlvdXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8TGluZWFyUmluZz59IExpbmVhciByaW5ncy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZ3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXlvdXQgPSB0aGlzLmxheW91dDtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB2YXIgZW5kcyA9IHRoaXMuZW5kc187XG4gICAgICAgIHZhciBsaW5lYXJSaW5ncyA9IFtdO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgICAgIHZhciBsaW5lYXJSaW5nID0gbmV3IExpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLnNsaWNlKG9mZnNldCwgZW5kKSwgbGF5b3V0KTtcbiAgICAgICAgICAgIGxpbmVhclJpbmdzLnB1c2gobGluZWFyUmluZyk7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3JpZW50ZWQgZmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZW50ZWRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgICAgICBpZiAobGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXy5sZW5ndGggPSBvcmllbnRMaW5lYXJSaW5ncyh0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcmllbnRlZFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtQb2x5Z29ufSBTaW1wbGlmaWVkIFBvbHlnb24uXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gcXVhbnRpemVBcnJheSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIE1hdGguc3FydChzcXVhcmVkVG9sZXJhbmNlKSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICByZXR1cm4gbmV3IFBvbHlnb24oc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIHNpbXBsaWZpZWRFbmRzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuUE9MWUdPTjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAyKTtcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZW5kcyA9IGRlZmxhdGVDb29yZGluYXRlc0FycmF5KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUsIHRoaXMuZW5kc18pO1xuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBlbmRzLmxlbmd0aCA9PT0gMCA/IDAgOiBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIFBvbHlnb247XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5leHBvcnQgZGVmYXVsdCBQb2x5Z29uO1xuLyoqXG4gKiBDcmVhdGUgYW4gYXBwcm94aW1hdGlvbiBvZiBhIGNpcmNsZSBvbiB0aGUgc3VyZmFjZSBvZiBhIHNwaGVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyIChgW2xvbiwgbGF0XWAgaW4gZGVncmVlcykuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBncmVhdC1jaXJjbGUgZGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyIHRvXG4gKiAgICAgdGhlIHBvbHlnb24gdmVydGljZXMgaW4gbWV0ZXJzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbl0gT3B0aW9uYWwgbnVtYmVyIG9mIHZlcnRpY2VzIGZvciB0aGUgcmVzdWx0aW5nXG4gKiAgICAgcG9seWdvbi4gRGVmYXVsdCBpcyBgMzJgLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3BoZXJlUmFkaXVzXSBPcHRpb25hbCByYWRpdXMgZm9yIHRoZSBzcGhlcmUgKGRlZmF1bHRzIHRvXG4gKiAgICAgdGhlIEVhcnRoJ3MgbWVhbiByYWRpdXMgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZCkuXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBUaGUgXCJjaXJjdWxhclwiIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjaXJjdWxhcihjZW50ZXIsIHJhZGl1cywgb3B0X24sIG9wdF9zcGhlcmVSYWRpdXMpIHtcbiAgICB2YXIgbiA9IG9wdF9uID8gb3B0X24gOiAzMjtcbiAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGV4dGVuZChmbGF0Q29vcmRpbmF0ZXMsIHNwaGVyZU9mZnNldChjZW50ZXIsIHJhZGl1cywgKDIgKiBNYXRoLlBJICogaSkgLyBuLCBvcHRfc3BoZXJlUmFkaXVzKSk7XG4gICAgfVxuICAgIGZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1swXSwgZmxhdENvb3JkaW5hdGVzWzFdKTtcbiAgICByZXR1cm4gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSwgW1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgIF0pO1xufVxuLyoqXG4gKiBDcmVhdGUgYSBwb2x5Z29uIGZyb20gYW4gZXh0ZW50LiBUaGUgbGF5b3V0IHVzZWQgaXMgYFhZYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBUaGUgcG9seWdvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FeHRlbnQoZXh0ZW50KSB7XG4gICAgdmFyIG1pblggPSBleHRlbnRbMF07XG4gICAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gICAgdmFyIG1heFggPSBleHRlbnRbMl07XG4gICAgdmFyIG1heFkgPSBleHRlbnRbM107XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IFtcbiAgICAgICAgbWluWCxcbiAgICAgICAgbWluWSxcbiAgICAgICAgbWluWCxcbiAgICAgICAgbWF4WSxcbiAgICAgICAgbWF4WCxcbiAgICAgICAgbWF4WSxcbiAgICAgICAgbWF4WCxcbiAgICAgICAgbWluWSxcbiAgICAgICAgbWluWCxcbiAgICAgICAgbWluWSxcbiAgICBdO1xuICAgIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbXG4gICAgICAgIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgXSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHJlZ3VsYXIgcG9seWdvbiBmcm9tIGEgY2lyY2xlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL0NpcmNsZS5qc1wiKS5kZWZhdWx0fSBjaXJjbGUgQ2lyY2xlIGdlb21ldHJ5LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc2lkZXNdIE51bWJlciBvZiBzaWRlcyBvZiB0aGUgcG9seWdvbi4gRGVmYXVsdCBpcyAzMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2FuZ2xlXSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMuIDAgbWVhbnMgRWFzdC4gRGVmYXVsdCBpcyAwLlxuICogQHJldHVybiB7UG9seWdvbn0gUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21DaXJjbGUoY2lyY2xlLCBvcHRfc2lkZXMsIG9wdF9hbmdsZSkge1xuICAgIHZhciBzaWRlcyA9IG9wdF9zaWRlcyA/IG9wdF9zaWRlcyA6IDMyO1xuICAgIHZhciBzdHJpZGUgPSBjaXJjbGUuZ2V0U3RyaWRlKCk7XG4gICAgdmFyIGxheW91dCA9IGNpcmNsZS5nZXRMYXlvdXQoKTtcbiAgICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICAgIHZhciBhcnJheUxlbmd0aCA9IHN0cmlkZSAqIChzaWRlcyArIDEpO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBuZXcgQXJyYXkoYXJyYXlMZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tpXSA9IDA7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tpICsgMV0gPSAwO1xuICAgICAgICBmb3IgKHZhciBqID0gMjsgaiA8IHN0cmlkZTsgaisrKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIGpdID0gY2VudGVyW2pdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICAgIHZhciBwb2x5Z29uID0gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCBsYXlvdXQsIGVuZHMpO1xuICAgIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgY2lyY2xlLmdldFJhZGl1cygpLCBvcHRfYW5nbGUpO1xuICAgIHJldHVybiBwb2x5Z29uO1xufVxuLyoqXG4gKiBNb2RpZnkgdGhlIGNvb3JkaW5hdGVzIG9mIGEgcG9seWdvbiB0byBtYWtlIGl0IGEgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtQb2x5Z29ufSBwb2x5Z29uIFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciBvZiB0aGUgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBSYWRpdXMgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2FuZ2xlXSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMuIDAgbWVhbnMgRWFzdC4gRGVmYXVsdCBpcyAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZVJlZ3VsYXIocG9seWdvbiwgY2VudGVyLCByYWRpdXMsIG9wdF9hbmdsZSkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBwb2x5Z29uLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgIHZhciBzdHJpZGUgPSBwb2x5Z29uLmdldFN0cmlkZSgpO1xuICAgIHZhciBzaWRlcyA9IGZsYXRDb29yZGluYXRlcy5sZW5ndGggLyBzdHJpZGUgLSAxO1xuICAgIHZhciBzdGFydEFuZ2xlID0gb3B0X2FuZ2xlID8gb3B0X2FuZ2xlIDogMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBzaWRlczsgKytpKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSBpICogc3RyaWRlO1xuICAgICAgICB2YXIgYW5nbGUgPSBzdGFydEFuZ2xlICsgKG1vZHVsbyhpLCBzaWRlcykgKiAyICogTWF0aC5QSSkgLyBzaWRlcztcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldF0gPSBjZW50ZXJbMF0gKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSA9IGNlbnRlclsxXSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKTtcbiAgICB9XG4gICAgcG9seWdvbi5jaGFuZ2VkKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2x5Z29uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludFxuICovXG5pbXBvcnQgeyBsaW5lYXJSaW5nc0NvbnRhaW5zWFkgfSBmcm9tICcuL2NvbnRhaW5zLmpzJztcbmltcG9ydCB7IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24gfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG4vKipcbiAqIENhbGN1bGF0ZXMgYSBwb2ludCB0aGF0IGlzIGxpa2VseSB0byBsaWUgaW4gdGhlIGludGVyaW9yIG9mIHRoZSBsaW5lYXIgcmluZ3MuXG4gKiBJbnNwaXJlZCBieSBKVFMncyBjb20udml2aWRzb2x1dGlvbnMuanRzLmdlb20uR2VvbWV0cnkjZ2V0SW50ZXJpb3JQb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDZW50ZXJzIEZsYXQgY2VudGVycy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmbGF0Q2VudGVyc09mZnNldCBGbGF0IGNlbnRlciBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBEZXN0aW5hdGlvbiBwb2ludCBhcyBYWU0gY29vcmRpbmF0ZSwgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGZsYXRDZW50ZXJzLCBmbGF0Q2VudGVyc09mZnNldCwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgaSwgaWksIHgsIHgxLCB4MiwgeTEsIHkyO1xuICAgIHZhciB5ID0gZmxhdENlbnRlcnNbZmxhdENlbnRlcnNPZmZzZXQgKyAxXTtcbiAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgdmFyIGludGVyc2VjdGlvbnMgPSBbXTtcbiAgICAvLyBDYWxjdWxhdGUgaW50ZXJzZWN0aW9ucyB3aXRoIHRoZSBob3Jpem9udGFsIGxpbmVcbiAgICBmb3IgKHZhciByID0gMCwgcnIgPSBlbmRzLmxlbmd0aDsgciA8IHJyOyArK3IpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbcl07XG4gICAgICAgIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgICAgIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgICAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIGlmICgoeSA8PSB5MSAmJiB5MiA8PSB5KSB8fCAoeTEgPD0geSAmJiB5IDw9IHkyKSkge1xuICAgICAgICAgICAgICAgIHggPSAoKHkgLSB5MSkgLyAoeTIgLSB5MSkpICogKHgyIC0geDEpICsgeDE7XG4gICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9ucy5wdXNoKHgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRmluZCB0aGUgbG9uZ2VzdCBzZWdtZW50IG9mIHRoZSBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludFxuICAgIC8vIGluc2lkZSB0aGUgbGluZWFyIHJpbmcuXG4gICAgdmFyIHBvaW50WCA9IE5hTjtcbiAgICB2YXIgbWF4U2VnbWVudExlbmd0aCA9IC1JbmZpbml0eTtcbiAgICBpbnRlcnNlY3Rpb25zLnNvcnQobnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XG4gICAgeDEgPSBpbnRlcnNlY3Rpb25zWzBdO1xuICAgIGZvciAoaSA9IDEsIGlpID0gaW50ZXJzZWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHgyID0gaW50ZXJzZWN0aW9uc1tpXTtcbiAgICAgICAgdmFyIHNlZ21lbnRMZW5ndGggPSBNYXRoLmFicyh4MiAtIHgxKTtcbiAgICAgICAgaWYgKHNlZ21lbnRMZW5ndGggPiBtYXhTZWdtZW50TGVuZ3RoKSB7XG4gICAgICAgICAgICB4ID0gKHgxICsgeDIpIC8gMjtcbiAgICAgICAgICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgICAgICBwb2ludFggPSB4O1xuICAgICAgICAgICAgICAgIG1heFNlZ21lbnRMZW5ndGggPSBzZWdtZW50TGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHgxID0geDI7XG4gICAgfVxuICAgIGlmIChpc05hTihwb2ludFgpKSB7XG4gICAgICAgIC8vIFRoZXJlIGlzIG5vIGhvcml6b250YWwgbGluZSB0aGF0IGhhcyBpdHMgY2VudGVyIHBvaW50IGluc2lkZSB0aGUgbGluZWFyXG4gICAgICAgIC8vIHJpbmcuICBVc2UgdGhlIGNlbnRlciBvZiB0aGUgdGhlIGxpbmVhciByaW5nJ3MgZXh0ZW50LlxuICAgICAgICBwb2ludFggPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldF07XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCkge1xuICAgICAgICBvcHRfZGVzdC5wdXNoKHBvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aCk7XG4gICAgICAgIHJldHVybiBvcHRfZGVzdDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbcG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDZW50ZXJzIEZsYXQgY2VudGVycy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEludGVyaW9yIHBvaW50cyBhcyBYWU0gY29vcmRpbmF0ZXMsIHdoZXJlIE0gaXMgdGhlXG4gKiBsZW5ndGggb2YgdGhlIGhvcml6b250YWwgaW50ZXJzZWN0aW9uIHRoYXQgdGhlIHBvaW50IGJlbG9uZ3MgdG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcmlvclBvaW50c09mTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgZmxhdENlbnRlcnMpIHtcbiAgICB2YXIgaW50ZXJpb3JQb2ludHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGludGVyaW9yUG9pbnRzID0gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZmxhdENlbnRlcnMsIDIgKiBpLCBpbnRlcmlvclBvaW50cyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGludGVyaW9yUG9pbnRzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJpb3Jwb2ludC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4vVmlld0hpbnQuanMnO1xuaW1wb3J0IFZpZXdQcm9wZXJ0eSBmcm9tICcuL1ZpZXdQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgeyBERUZBVUxUX1RJTEVfU0laRSB9IGZyb20gJy4vdGlsZWdyaWQvY29tbW9uLmpzJztcbmltcG9ydCB7IE1FVEVSU19QRVJfVU5JVCwgY3JlYXRlUHJvamVjdGlvbiwgZnJvbVVzZXJDb29yZGluYXRlLCBmcm9tVXNlckV4dGVudCwgZ2V0VXNlclByb2plY3Rpb24sIHRvVXNlckNvb3JkaW5hdGUsIHRvVXNlckV4dGVudCwgfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFkZCBhcyBhZGRDb29yZGluYXRlLCBlcXVhbHMgYXMgY29vcmRpbmF0ZXNFcXVhbCwgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUsIH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBub25lIGFzIGNlbnRlck5vbmUsIGNyZWF0ZUV4dGVudCB9IGZyb20gJy4vY2VudGVyY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjbGFtcCwgbW9kdWxvIH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7IGNyZWF0ZU1pbk1heFJlc29sdXRpb24gfSBmcm9tICcuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZVNuYXBUb04sIGNyZWF0ZVNuYXBUb1plcm8sIGRpc2FibGUsIG5vbmUgYXMgcm90YXRpb25Ob25lLCB9IGZyb20gJy4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZVNuYXBUb1Bvd2VyLCBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucywgfSBmcm9tICcuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBlcXVhbHMgfSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHsgZ2V0Q2VudGVyLCBnZXRGb3JWaWV3QW5kU2l6ZSwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgaXNFbXB0eSwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBpbkFuZE91dCB9IGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCB7IGxpbmVhckZpbmROZWFyZXN0IH0gZnJvbSAnLi9hcnJheS5qcyc7XG5pbXBvcnQgeyBmcm9tRXh0ZW50IGFzIHBvbHlnb25Gcm9tRXh0ZW50IH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuLyoqXG4gKiBBbiBhbmltYXRpb24gY29uZmlndXJhdGlvblxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3NvdXJjZUNlbnRlcl0gU291cmNlIGNlbnRlci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFt0YXJnZXRDZW50ZXJdIFRhcmdldCBjZW50ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJlc29sdXRpb25dIFNvdXJjZSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSZXNvbHV0aW9uXSBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc291cmNlUm90YXRpb25dIFNvdXJjZSByb3RhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0Um90YXRpb25dIFRhcmdldCByb3RhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIEFuY2hvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzdGFydCBTdGFydC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY29tcGxldGUgQ29tcGxldGUuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBlYXNpbmcgRWFzaW5nLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTp2b2lkfSBjYWxsYmFjayBDYWxsYmFjay5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBDb25zdHJhaW50c1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gY2VudGVyIENlbnRlci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9yZXNvbHV0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcm90YXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpdE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtzaXplXSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIGJveCB0byBmaXRcbiAqIHRoZSBleHRlbnQgaW50by4gRGVmYXVsdCBpcyB0aGUgY3VycmVudCBzaXplIG9mIHRoZSBmaXJzdCBtYXAgaW4gdGhlIERPTSB0aGF0XG4gKiB1c2VzIHRoaXMgdmlldywgb3IgYFsxMDAsIDEwMF1gIGlmIG5vIHN1Y2ggbWFwIGlzIGZvdW5kLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gW3BhZGRpbmc9WzAsIDAsIDAsIDBdXSBQYWRkaW5nIChpbiBwaXhlbHMpIHRvIGJlXG4gKiBjbGVhcmVkIGluc2lkZSB0aGUgdmlldy4gVmFsdWVzIGluIHRoZSBhcnJheSBhcmUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0XG4gKiBwYWRkaW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbmVhcmVzdD1mYWxzZV0gSWYgdGhlIHZpZXcgYGNvbnN0cmFpblJlc29sdXRpb25gIG9wdGlvbiBpcyBgdHJ1ZWAsXG4gKiBnZXQgdGhlIG5lYXJlc3QgZXh0ZW50IGluc3RlYWQgb2YgdGhlIGNsb3Nlc3QgdGhhdCBhY3R1YWxseSBmaXRzIHRoZSB2aWV3LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uPTBdIE1pbmltdW0gcmVzb2x1dGlvbiB0aGF0IHdlIHpvb20gdG8uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCB0aGF0IHdlIHpvb20gdG8uIElmXG4gKiBgbWluUmVzb2x1dGlvbmAgaXMgZ2l2ZW4sIHRoaXMgcHJvcGVydHkgaXMgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb25dIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEJ5IGRlZmF1bHQsIHRoZXJlIGlzIG5vIGFuaW1hdGlvbiB0byB0aGUgdGFyZ2V0IGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZCBkdXJpbmdcbiAqIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOnZvaWR9IFtjYWxsYmFja10gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIHZpZXcgaXMgaW5cbiAqIGl0cyBmaW5hbCBwb3NpdGlvbi4gVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb25cbiAqIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVmlld09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIFRoZSBpbml0aWFsIGNlbnRlciBmb3JcbiAqIHRoZSB2aWV3LiBJZiBhIHVzZXIgcHJvamVjdGlvbiBpcyBub3Qgc2V0LCB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gZm9yIHRoZSBjZW50ZXIgaXNcbiAqIHNwZWNpZmllZCB3aXRoIHRoZSBgcHJvamVjdGlvbmAgb3B0aW9uLiBMYXllciBzb3VyY2VzIHdpbGwgbm90IGJlIGZldGNoZWQgaWYgdGhpc1xuICogaXMgbm90IHNldCwgYnV0IHRoZSBjZW50ZXIgY2FuIGJlIHNldCBsYXRlciB3aXRoIHtAbGluayAjc2V0Q2VudGVyfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudW1iZXJ9IFtjb25zdHJhaW5Sb3RhdGlvbj10cnVlXSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICogYGZhbHNlYCBtZWFucyBubyBjb25zdHJhaW50LiBgdHJ1ZWAgbWVhbnMgbm8gY29uc3RyYWludCwgYnV0IHNuYXAgdG8gemVyb1xuICogbmVhciB6ZXJvLiBBIG51bWJlciBjb25zdHJhaW5zIHRoZSByb3RhdGlvbiB0byB0aGF0IG51bWJlciBvZiB2YWx1ZXMuIEZvclxuICogZXhhbXBsZSwgYDRgIHdpbGwgY29uc3RyYWluIHRoZSByb3RhdGlvbiB0byAwLCA5MCwgMTgwLCBhbmQgMjcwIGRlZ3JlZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtlbmFibGVSb3RhdGlvbj10cnVlXSBFbmFibGUgcm90YXRpb24uXG4gKiBJZiBgZmFsc2VgLCBhIHJvdGF0aW9uIGNvbnN0cmFpbnQgdGhhdCBhbHdheXMgc2V0cyB0aGUgcm90YXRpb24gdG8gemVybyBpc1xuICogdXNlZC4gVGhlIGBjb25zdHJhaW5Sb3RhdGlvbmAgb3B0aW9uIGhhcyBubyBlZmZlY3QgaWYgYGVuYWJsZVJvdGF0aW9uYCBpc1xuICogYGZhbHNlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgZXh0ZW50IHRoYXQgY29uc3RyYWlucyB0aGVcbiAqIHZpZXcsIGluIG90aGVyIHdvcmRzLCBub3RoaW5nIG91dHNpZGUgb2YgdGhpcyBleHRlbnQgY2FuIGJlIHZpc2libGUgb24gdGhlIG1hcC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpbk9ubHlDZW50ZXI9ZmFsc2VdIElmIHRydWUsIHRoZSBleHRlbnRcbiAqIGNvbnN0cmFpbnQgd2lsbCBvbmx5IGFwcGx5IHRvIHRoZSB2aWV3IGNlbnRlciBhbmQgbm90IHRoZSB3aG9sZSBleHRlbnQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzbW9vdGhFeHRlbnRDb25zdHJhaW50PXRydWVdIElmIHRydWUsIHRoZSBleHRlbnRcbiAqIGNvbnN0cmFpbnQgd2lsbCBiZSBhcHBsaWVkIHNtb290aGx5LCBpLmUuIGFsbG93IHRoZSB2aWV3IHRvIGdvIHNsaWdodGx5IG91dHNpZGVcbiAqIG9mIHRoZSBnaXZlbiBgZXh0ZW50YC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiB1c2VkIHRvIGRldGVybWluZVxuICogdGhlIHJlc29sdXRpb24gY29uc3RyYWludC4gSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtaW5SZXNvbHV0aW9uYCAob3JcbiAqIGBtYXhab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gSWYgdW5zcGVjaWZpZWQgaXQgaXMgY2FsY3VsYXRlZCBpbiBzdWNoIGEgd2F5XG4gKiB0aGF0IHRoZSBwcm9qZWN0aW9uJ3MgdmFsaWRpdHkgZXh0ZW50IGZpdHMgaW4gYSAyNTZ4MjU2IHB4IHRpbGUuIElmIHRoZVxuICogcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3IgKHRoZSBkZWZhdWx0KSB0aGVuIGBtYXhSZXNvbHV0aW9uYCBkZWZhdWx0c1xuICogdG8gYDQwMDc1MDE2LjY4NTU3ODQ5IC8gMjU2ID0gMTU2NTQzLjAzMzkyODA0MDk3YC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiB1c2VkIHRvIGRldGVybWluZVxuICogdGhlIHJlc29sdXRpb24gY29uc3RyYWludC4gIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4UmVzb2x1dGlvbmAgKG9yXG4gKiBgbWluWm9vbWApIGFuZCBgem9vbUZhY3RvcmAuICBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGFzc3VtaW5nIDI5XG4gKiB6b29tIGxldmVscyAod2l0aCBhIGZhY3RvciBvZiAyKS4gSWYgdGhlIHByb2plY3Rpb24gaXMgU3BoZXJpY2FsIE1lcmNhdG9yXG4gKiAodGhlIGRlZmF1bHQpIHRoZW4gYG1pblJlc29sdXRpb25gIGRlZmF1bHRzIHRvXG4gKiBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgLyBNYXRoLnBvdygyLCAyOCkgPSAwLjAwMDU4MzE2ODI0NTU4MzkyNTNgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tPTI4XSBUaGUgbWF4aW11bSB6b29tIGxldmVsIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblpvb21gIChvclxuICogYG1heFJlc29sdXRpb25gKSBhbmQgYHpvb21GYWN0b3JgLiAgTm90ZSB0aGF0IGlmIGBtaW5SZXNvbHV0aW9uYCBpcyBhbHNvXG4gKiBwcm92aWRlZCwgaXQgaXMgZ2l2ZW4gcHJlY2VkZW5jZSBvdmVyIGBtYXhab29tYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBUaGUgbWluaW11bSB6b29tIGxldmVsIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1heFpvb21gIChvclxuICogYG1pblJlc29sdXRpb25gKSBhbmQgYHpvb21GYWN0b3JgLiAgTm90ZSB0aGF0IGlmIGBtYXhSZXNvbHV0aW9uYCBpcyBhbHNvXG4gKiBwcm92aWRlZCwgaXQgaXMgZ2l2ZW4gcHJlY2VkZW5jZSBvdmVyIGBtaW5ab29tYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW211bHRpV29ybGQ9ZmFsc2VdIElmIGBmYWxzZWAgdGhlIHZpZXcgaXMgY29uc3RyYWluZWQgc29cbiAqIG9ubHkgb25lIHdvcmxkIGlzIHZpc2libGUsIGFuZCB5b3UgY2Fubm90IHBhbiBvZmYgdGhlIGVkZ2UuICBJZiBgdHJ1ZWAgdGhlIG1hcFxuICogbWF5IHNob3cgbXVsdGlwbGUgd29ybGRzIGF0IGxvdyB6b29tIGxldmVscy4gIE9ubHkgdXNlZCBpZiB0aGUgYHByb2plY3Rpb25gIGlzXG4gKiBnbG9iYWwuICBOb3RlIHRoYXQgaWYgYGV4dGVudGAgaXMgYWxzbyBwcm92aWRlZCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBhbHdheXNcbiAqIGFuaW1hdGUgdG8gdGhlIGNsb3Nlc3Qgem9vbSBsZXZlbCBhZnRlciBhbiBpbnRlcmFjdGlvbjsgZmFsc2UgbWVhbnNcbiAqIGludGVybWVkaWFyeSB6b29tIGxldmVscyBhcmUgYWxsb3dlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Ntb290aFJlc29sdXRpb25Db25zdHJhaW50PXRydWVdIElmIHRydWUsIHRoZSByZXNvbHV0aW9uXG4gKiBtaW4vbWF4IHZhbHVlcyB3aWxsIGJlIGFwcGxpZWQgc21vb3RobHksIGkuIGUuIGFsbG93IHRoZSB2aWV3IHRvIGV4Y2VlZCBzbGlnaHRseVxuICogdGhlIGdpdmVuIHJlc29sdXRpb24gb3Igem9vbSBib3VuZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93RnVsbEV4dGVudD1mYWxzZV0gQWxsb3cgdGhlIHZpZXcgdG8gYmUgem9vbWVkIG91dCB0b1xuICogc2hvdyB0aGUgZnVsbCBjb25maWd1cmVkIGV4dGVudC4gQnkgZGVmYXVsdCwgd2hlbiBhIHZpZXcgaXMgY29uZmlndXJlZCB3aXRoIGFuXG4gKiBleHRlbnQsIHVzZXJzIHdpbGwgbm90IGJlIGFibGUgdG8gem9vbSBvdXQgc28gdGhlIHZpZXdwb3J0IGV4Y2VlZHMgdGhlIGV4dGVudCBpblxuICogZWl0aGVyIGRpbWVuc2lvbi4gVGhpcyBtZWFucyB0aGUgZnVsbCBleHRlbnQgbWF5IG5vdCBiZSB2aXNpYmxlIGlmIHRoZSB2aWV3cG9ydFxuICogaXMgdGFsbGVyIG9yIHdpZGVyIHRoYW4gdGhlIGFzcGVjdCByYXRpbyBvZiB0aGUgY29uZmlndXJlZCBleHRlbnQuIElmXG4gKiBzaG93RnVsbEV4dGVudCBpcyB0cnVlLCB0aGUgdXNlciB3aWxsIGJlIGFibGUgdG8gem9vbSBvdXQgc28gdGhhdCB0aGUgdmlld3BvcnRcbiAqIGV4Y2VlZHMgdGhlIGhlaWdodCBvciB3aWR0aCBvZiB0aGUgY29uZmlndXJlZCBleHRlbnQsIGJ1dCBub3QgYm90aCwgYWxsb3dpbmcgdGhlXG4gKiBmdWxsIGV4dGVudCB0byBiZSBzaG93bi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbj0nRVBTRzozODU3J10gVGhlXG4gKiBwcm9qZWN0aW9uLiBUaGUgZGVmYXVsdCBpcyBTcGhlcmljYWwgTWVyY2F0b3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3Jlc29sdXRpb25dIFRoZSBpbml0aWFsIHJlc29sdXRpb24gZm9yIHRoZSB2aWV3LiBUaGVcbiAqIHVuaXRzIGFyZSBgcHJvamVjdGlvbmAgdW5pdHMgcGVyIHBpeGVsIChlLmcuIG1ldGVycyBwZXIgcGl4ZWwpLiBBblxuICogYWx0ZXJuYXRpdmUgdG8gc2V0dGluZyB0aGlzIGlzIHRvIHNldCBgem9vbWAuIExheWVyIHNvdXJjZXMgd2lsbCBub3QgYmVcbiAqIGZldGNoZWQgaWYgbmVpdGhlciB0aGlzIG5vciBgem9vbWAgYXJlIGRlZmluZWQsIGJ1dCB0aGV5IGNhbiBiZSBzZXQgbGF0ZXJcbiAqIHdpdGgge0BsaW5rICNzZXRab29tfSBvciB7QGxpbmsgI3NldFJlc29sdXRpb259LlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbcmVzb2x1dGlvbnNdIFJlc29sdXRpb25zIHRoYXQgZGV0ZXJtaW5lIHRoZVxuICogem9vbSBsZXZlbHMgaWYgc3BlY2lmaWVkLiBUaGUgaW5kZXggaW4gdGhlIGFycmF5IGNvcnJlc3BvbmRzIHRvIHRoZSB6b29tIGxldmVsLFxuICogdGhlcmVmb3JlIHRoZSByZXNvbHV0aW9uIHZhbHVlcyBoYXZlIHRvIGJlIGluIGRlc2NlbmRpbmcgb3JkZXIuIEl0IGFsc28gY29uc3RyYWluc1xuICogdGhlIHJlc29sdXRpb24gYnkgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUuIElmIHNldCB0aGUgYG1heFJlc29sdXRpb25gLFxuICogYG1pblJlc29sdXRpb25gLCBgbWluWm9vbWAsIGBtYXhab29tYCwgYW5kIGB6b29tRmFjdG9yYCBvcHRpb25zIGFyZSBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyb3RhdGlvbj0wXSBUaGUgaW5pdGlhbCByb3RhdGlvbiBmb3IgdGhlIHZpZXcgaW4gcmFkaWFuc1xuICogKHBvc2l0aXZlIHJvdGF0aW9uIGNsb2Nrd2lzZSwgMCBtZWFucyBOb3J0aCkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIE9ubHkgdXNlZCBpZiBgcmVzb2x1dGlvbmAgaXMgbm90IGRlZmluZWQuIFpvb21cbiAqIGxldmVsIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBpbml0aWFsIHJlc29sdXRpb24gZm9yIHRoZSB2aWV3LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRmFjdG9yPTJdIFRoZSB6b29tIGZhY3RvciB1c2VkIHRvIGNvbXB1dGUgdGhlXG4gKiBjb3JyZXNwb25kaW5nIHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSBbcGFkZGluZz1bMCwgMCwgMCwgMF1dIFBhZGRpbmcgKGluIGNzcyBwaXhlbHMpLlxuICogSWYgdGhlIG1hcCB2aWV3cG9ydCBpcyBwYXJ0aWFsbHkgY292ZXJlZCB3aXRoIG90aGVyIGNvbnRlbnQgKG92ZXJsYXlzKSBhbG9uZ1xuICogaXRzIGVkZ2VzLCB0aGlzIHNldHRpbmcgYWxsb3dzIHRvIHNoaWZ0IHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0IGF3YXkgZnJvbVxuICogdGhhdCBjb250ZW50LiBUaGUgb3JkZXIgb2YgdGhlIHZhbHVlcyBpcyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQW5pbWF0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gVGhlIGNlbnRlciBvZiB0aGUgdmlldyBhdCB0aGUgZW5kIG9mXG4gKiB0aGUgYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBUaGUgem9vbSBsZXZlbCBvZiB0aGUgdmlldyBhdCB0aGUgZW5kIG9mIHRoZVxuICogYW5pbWF0aW9uLiBUaGlzIHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgcmVzb2x1dGlvbmAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3Jlc29sdXRpb25dIFRoZSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmRcbiAqIG9mIHRoZSBhbmltYXRpb24uICBJZiBgem9vbWAgaXMgYWxzbyBwcm92aWRlZCwgdGhpcyBvcHRpb24gd2lsbCBiZSBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyb3RhdGlvbl0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2ZcbiAqIHRoZSBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBPcHRpb25hbCBhbmNob3IgdG8gcmVtYWluIGZpeGVkXG4gKiBkdXJpbmcgYSByb3RhdGlvbiBvciByZXNvbHV0aW9uIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MTAwMF0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkXG4gKiBkdXJpbmcgdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmcuaW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6b29tIFpvb20uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtaW4gem9vbSBsZXZlbCBmb3IgdGhlIG1hcCB2aWV3LlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIERFRkFVTFRfTUlOX1pPT00gPSAwO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpjZW50ZXInfCdjaGFuZ2U6cmVzb2x1dGlvbid8J2NoYW5nZTpyb3RhdGlvbid9IFZpZXdPYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8Vmlld09iamVjdEV2ZW50VHlwZXMsIGltcG9ydChcIi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8Vmlld09iamVjdEV2ZW50VHlwZXMsIFJldHVybj59IFZpZXdPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgVmlldyBvYmplY3QgcmVwcmVzZW50cyBhIHNpbXBsZSAyRCB2aWV3IG9mIHRoZSBtYXAuXG4gKlxuICogVGhpcyBpcyB0aGUgb2JqZWN0IHRvIGFjdCB1cG9uIHRvIGNoYW5nZSB0aGUgY2VudGVyLCByZXNvbHV0aW9uLFxuICogYW5kIHJvdGF0aW9uIG9mIHRoZSBtYXAuXG4gKlxuICogQSBWaWV3IGhhcyBhIGBwcm9qZWN0aW9uYC4gVGhlIHByb2plY3Rpb24gZGV0ZXJtaW5lcyB0aGVcbiAqIGNvb3JkaW5hdGUgc3lzdGVtIG9mIHRoZSBjZW50ZXIsIGFuZCBpdHMgdW5pdHMgZGV0ZXJtaW5lIHRoZSB1bml0cyBvZiB0aGVcbiAqIHJlc29sdXRpb24gKHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsKS4gVGhlIGRlZmF1bHQgcHJvamVjdGlvbiBpc1xuICogU3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICpcbiAqICMjIyBUaGUgdmlldyBzdGF0ZXNcbiAqXG4gKiBBIFZpZXcgaXMgZGV0ZXJtaW5lZCBieSB0aHJlZSBzdGF0ZXM6IGBjZW50ZXJgLCBgcmVzb2x1dGlvbmAsXG4gKiBhbmQgYHJvdGF0aW9uYC4gRWFjaCBzdGF0ZSBoYXMgYSBjb3JyZXNwb25kaW5nIGdldHRlciBhbmQgc2V0dGVyLCBlLmcuXG4gKiBgZ2V0Q2VudGVyYCBhbmQgYHNldENlbnRlcmAgZm9yIHRoZSBgY2VudGVyYCBzdGF0ZS5cbiAqXG4gKiBUaGUgYHpvb21gIHN0YXRlIGlzIGFjdHVhbGx5IG5vdCBzYXZlZCBvbiB0aGUgdmlldzogYWxsIGNvbXB1dGF0aW9uc1xuICogaW50ZXJuYWxseSB1c2UgdGhlIGByZXNvbHV0aW9uYCBzdGF0ZS4gU3RpbGwsIHRoZSBgc2V0Wm9vbWAgYW5kIGBnZXRab29tYFxuICogbWV0aG9kcyBhcmUgYXZhaWxhYmxlLCBhcyB3ZWxsIGFzIGBnZXRSZXNvbHV0aW9uRm9yWm9vbWAgYW5kXG4gKiBgZ2V0Wm9vbUZvclJlc29sdXRpb25gIHRvIHN3aXRjaCBmcm9tIG9uZSBzeXN0ZW0gdG8gdGhlIG90aGVyLlxuICpcbiAqICMjIyBUaGUgY29uc3RyYWludHNcbiAqXG4gKiBgc2V0Q2VudGVyYCwgYHNldFJlc29sdXRpb25gIGFuZCBgc2V0Um90YXRpb25gIGNhbiBiZSB1c2VkIHRvIGNoYW5nZSB0aGVcbiAqIHN0YXRlcyBvZiB0aGUgdmlldywgYnV0IGFueSBjb25zdHJhaW50IGRlZmluZWQgaW4gdGhlIGNvbnN0cnVjdG9yIHdpbGxcbiAqIGJlIGFwcGxpZWQgYWxvbmcgdGhlIHdheS5cbiAqXG4gKiBBIFZpZXcgb2JqZWN0IGNhbiBoYXZlIGEgKnJlc29sdXRpb24gY29uc3RyYWludCosIGEgKnJvdGF0aW9uIGNvbnN0cmFpbnQqXG4gKiBhbmQgYSAqY2VudGVyIGNvbnN0cmFpbnQqLlxuICpcbiAqIFRoZSAqcmVzb2x1dGlvbiBjb25zdHJhaW50KiB0eXBpY2FsbHkgcmVzdHJpY3RzIG1pbi9tYXggdmFsdWVzIGFuZFxuICogc25hcHMgdG8gc3BlY2lmaWMgcmVzb2x1dGlvbnMuIEl0IGlzIGRldGVybWluZWQgYnkgdGhlIGZvbGxvd2luZ1xuICogb3B0aW9uczogYHJlc29sdXRpb25zYCwgYG1heFJlc29sdXRpb25gLCBgbWF4Wm9vbWAgYW5kIGB6b29tRmFjdG9yYC5cbiAqIElmIGByZXNvbHV0aW9uc2AgaXMgc2V0LCB0aGUgb3RoZXIgdGhyZWUgb3B0aW9ucyBhcmUgaWdub3JlZC4gU2VlXG4gKiBkb2N1bWVudGF0aW9uIGZvciBlYWNoIG9wdGlvbiBmb3IgbW9yZSBpbmZvcm1hdGlvbi4gQnkgZGVmYXVsdCwgdGhlIHZpZXdcbiAqIG9ubHkgaGFzIGEgbWluL21heCByZXN0cmljdGlvbiBhbmQgYWxsb3cgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIHdoZW5cbiAqIHBpbmNoLXpvb21pbmcgZm9yIGV4YW1wbGUuXG4gKlxuICogVGhlICpyb3RhdGlvbiBjb25zdHJhaW50KiBzbmFwcyB0byBzcGVjaWZpYyBhbmdsZXMuIEl0IGlzIGRldGVybWluZWRcbiAqIGJ5IHRoZSBmb2xsb3dpbmcgb3B0aW9uczogYGVuYWJsZVJvdGF0aW9uYCBhbmQgYGNvbnN0cmFpblJvdGF0aW9uYC5cbiAqIEJ5IGRlZmF1bHQgcm90YXRpb24gaXMgYWxsb3dlZCBhbmQgaXRzIHZhbHVlIGlzIHNuYXBwZWQgdG8gemVybyB3aGVuIGFwcHJvYWNoaW5nIHRoZVxuICogaG9yaXpvbnRhbC5cbiAqXG4gKiBUaGUgKmNlbnRlciBjb25zdHJhaW50KiBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBgZXh0ZW50YCBvcHRpb24uIEJ5XG4gKiBkZWZhdWx0IHRoZSB2aWV3IGNlbnRlciBpcyBub3QgY29uc3RyYWluZWQgYXQgYWxsLlxuICpcbiAqICMjIyBDaGFuZ2luZyB0aGUgdmlldyBzdGF0ZVxuICpcbiAqIEl0IGlzIGltcG9ydGFudCB0byBub3RlIHRoYXQgYHNldFpvb21gLCBgc2V0UmVzb2x1dGlvbmAsIGBzZXRDZW50ZXJgIGFuZFxuICogYHNldFJvdGF0aW9uYCBhcmUgc3ViamVjdCB0byB0aGUgYWJvdmUgbWVudGlvbmVkIGNvbnN0cmFpbnRzLiBBcyBzdWNoLCBpdFxuICogbWF5IHNvbWV0aW1lcyBub3QgYmUgcG9zc2libGUgdG8ga25vdyBpbiBhZHZhbmNlIHRoZSByZXN1bHRpbmcgc3RhdGUgb2YgdGhlXG4gKiBWaWV3LiBGb3IgZXhhbXBsZSwgY2FsbGluZyBgc2V0UmVzb2x1dGlvbigxMClgIGRvZXMgbm90IGd1YXJhbnRlZSB0aGF0XG4gKiBgZ2V0UmVzb2x1dGlvbigpYCB3aWxsIHJldHVybiBgMTBgLlxuICpcbiAqIEEgY29uc2VxdWVuY2Ugb2YgdGhpcyBpcyB0aGF0LCB3aGVuIGFwcGx5aW5nIGEgZGVsdGEgb24gdGhlIHZpZXcgc3RhdGUsIG9uZVxuICogc2hvdWxkIHVzZSBgYWRqdXN0Q2VudGVyYCwgYGFkanVzdFJvdGF0aW9uYCwgYGFkanVzdFpvb21gIGFuZCBgYWRqdXN0UmVzb2x1dGlvbmBcbiAqIHJhdGhlciB0aGFuIHRoZSBjb3JyZXNwb25kaW5nIHNldHRlcnMuIFRoaXMgd2lsbCBsZXQgdmlldyBkbyBpdHMgaW50ZXJuYWxcbiAqIGNvbXB1dGF0aW9ucy4gQmVzaWRlcywgdGhlIGBhZGp1c3QqYCBtZXRob2RzIGFsc28gdGFrZSBhbiBgb3B0X2FuY2hvcmBcbiAqIGFyZ3VtZW50IHdoaWNoIGFsbG93cyBzcGVjaWZ5aW5nIGFuIG9yaWdpbiBmb3IgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqICMjIyBJbnRlcmFjdGluZyB3aXRoIHRoZSB2aWV3XG4gKlxuICogVmlldyBjb25zdHJhaW50cyBhcmUgdXN1YWxseSBvbmx5IGFwcGxpZWQgd2hlbiB0aGUgdmlldyBpcyAqYXQgcmVzdCosIG1lYW5pbmcgdGhhdFxuICogbm8gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIG9uZ29pbmcuIEFzIHN1Y2gsIGlmIHRoZSB1c2VyIHB1dHMgdGhlIHZpZXcgaW4gYVxuICogc3RhdGUgdGhhdCBpcyBub3QgZXF1aXZhbGVudCB0byBhIGNvbnN0cmFpbmVkIG9uZSAoZS5nLiByb3RhdGluZyB0aGUgdmlldyB3aGVuXG4gKiB0aGUgc25hcCBhbmdsZSBpcyAwKSwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGF0IHRoZSBpbnRlcmFjdGlvbiBlbmQgdG9cbiAqIHB1dCBiYWNrIHRoZSB2aWV3IHRvIGEgc3RhYmxlIHN0YXRlO1xuICpcbiAqIEBhcGlcbiAqL1xudmFyIFZpZXcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFZpZXcsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gW29wdF9vcHRpb25zXSBWaWV3IG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmlldyhvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1ZpZXdPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0X29wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oaW50c18gPSBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8QXJyYXk8QW5pbWF0aW9uPj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpb25zXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51cGRhdGVBbmltYXRpb25LZXlfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucHJvamVjdGlvbl8gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld3BvcnRTaXplXyA9IFsxMDAsIDEwMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0Q2VudGVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFJlc29sdXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRSb3RhdGlvbl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FuY2VsQW5jaG9yXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNlbnRlciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRpb25zLmNlbnRlciwgX3RoaXMucHJvamVjdGlvbl8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmV4dGVudCkge1xuICAgICAgICAgICAgb3B0aW9ucy5leHRlbnQgPSBmcm9tVXNlckV4dGVudChvcHRpb25zLmV4dGVudCwgX3RoaXMucHJvamVjdGlvbl8pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmFwcGx5T3B0aW9uc18ob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHVwIHRoZSB2aWV3IHdpdGggdGhlIGdpdmVuIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlPcHRpb25zXyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IHt9O1xuICAgICAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvID0gY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5tYXhSZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluUmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWluUmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpvb21GYWN0b3JfID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLnpvb21GYWN0b3I7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZGRpbmdfID0gb3B0aW9ucy5wYWRkaW5nO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWm9vbV8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWluWm9vbTtcbiAgICAgICAgdmFyIGNlbnRlckNvbnN0cmFpbnQgPSBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uY29uc3RyYWludDtcbiAgICAgICAgdmFyIHJvdGF0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDb25zdHJhaW50c31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29uc3RyYWludHNfID0ge1xuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXJDb25zdHJhaW50LFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb25Db25zdHJhaW50LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJvdGF0aW9uKG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRpb24gOiAwKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChvcHRpb25zLmNlbnRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jZW50ZXIgOiBudWxsKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc29sdXRpb24ob3B0aW9ucy5yZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRab29tKG9wdGlvbnMuem9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1ZpZXdPcHRpb25zfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vcHRpb25zXyA9IG9wdGlvbnM7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVmlldy5wcm90b3R5cGUsIFwicGFkZGluZ1wiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYWRkaW5nIChpbiBjc3MgcGl4ZWxzKS5cbiAgICAgICAgICogSWYgdGhlIG1hcCB2aWV3cG9ydCBpcyBwYXJ0aWFsbHkgY292ZXJlZCB3aXRoIG90aGVyIGNvbnRlbnQgKG92ZXJsYXlzKSBhbG9uZ1xuICAgICAgICAgKiBpdHMgZWRnZXMsIHRoaXMgc2V0dGluZyBhbGxvd3MgdG8gc2hpZnQgdGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnQgYXdheSBmcm9tIHRoYXRcbiAgICAgICAgICogY29udGVudC4gVGhlIG9yZGVyIG9mIHRoZSB2YWx1ZXMgaW4gdGhlIGFycmF5IGlzIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdC5cbiAgICAgICAgICogVGhlIGRlZmF1bHQgaXMgbm8gcGFkZGluZywgd2hpY2ggaXMgZXF1aXZhbGVudCB0byBgWzAsIDAsIDAsIDBdYC5cbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhZGRpbmdfO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChwYWRkaW5nKSB7XG4gICAgICAgICAgICB2YXIgb2xkUGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgICAgICAgICB0aGlzLnBhZGRpbmdfID0gcGFkZGluZztcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlcigpO1xuICAgICAgICAgICAgaWYgKGNlbnRlcikge1xuICAgICAgICAgICAgICAgIHZhciBuZXdQYWRkaW5nID0gcGFkZGluZyB8fCBbMCwgMCwgMCwgMF07XG4gICAgICAgICAgICAgICAgb2xkUGFkZGluZyA9IG9sZFBhZGRpbmcgfHwgWzAsIDAsIDAsIDBdO1xuICAgICAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFggPSAocmVzb2x1dGlvbiAvIDIpICpcbiAgICAgICAgICAgICAgICAgICAgKG5ld1BhZGRpbmdbM10gLSBvbGRQYWRkaW5nWzNdICsgb2xkUGFkZGluZ1sxXSAtIG5ld1BhZGRpbmdbMV0pO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRZID0gKHJlc29sdXRpb24gLyAyKSAqXG4gICAgICAgICAgICAgICAgICAgIChuZXdQYWRkaW5nWzBdIC0gb2xkUGFkZGluZ1swXSArIG9sZFBhZGRpbmdbMl0gLSBuZXdQYWRkaW5nWzJdKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKFtjZW50ZXJbMF0gKyBvZmZzZXRYLCBjZW50ZXJbMV0gLSBvZmZzZXRZXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gdXBkYXRlZCB2ZXJzaW9uIG9mIHRoZSB2aWV3IG9wdGlvbnMgdXNlZCB0byBjb25zdHJ1Y3QgdGhlIHZpZXcuICBUaGVcbiAgICAgKiBjdXJyZW50IHJlc29sdXRpb24gKG9yIHpvb20pLCBjZW50ZXIsIGFuZCByb3RhdGlvbiBhcmUgYXBwbGllZCB0byBhbnkgc3RvcmVkXG4gICAgICogb3B0aW9ucy4gIFRoZSBwcm92aWRlZCBvcHRpb25zIGNhbiBiZSB1c2VkIHRvIGFwcGx5IG5ldyBtaW4vbWF4IHpvb20gb3JcbiAgICAgKiByZXNvbHV0aW9uIGxpbWl0cy5cbiAgICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBuZXdPcHRpb25zIE5ldyBvcHRpb25zIHRvIGJlIGFwcGxpZWQuXG4gICAgICogQHJldHVybiB7Vmlld09wdGlvbnN9IE5ldyBvcHRpb25zIHVwZGF0ZWQgd2l0aCB0aGUgY3VycmVudCB2aWV3IHN0YXRlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFVwZGF0ZWRPcHRpb25zXyA9IGZ1bmN0aW9uIChuZXdPcHRpb25zKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gYXNzaWduKHt9LCB0aGlzLm9wdGlvbnNfKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zLnJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuem9vbSA9IHRoaXMuZ2V0Wm9vbSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByZXNlcnZlIGNlbnRlclxuICAgICAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcm90YXRpb25cbiAgICAgICAgb3B0aW9ucy5yb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgb3B0aW9ucywgbmV3T3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbmltYXRlIHRoZSB2aWV3LiAgVGhlIHZpZXcncyBjZW50ZXIsIHpvb20gKG9yIHJlc29sdXRpb24pLCBhbmQgcm90YXRpb25cbiAgICAgKiBjYW4gYmUgYW5pbWF0ZWQgZm9yIHNtb290aCB0cmFuc2l0aW9ucyBiZXR3ZWVuIHZpZXcgc3RhdGVzLiAgRm9yIGV4YW1wbGUsXG4gICAgICogdG8gYW5pbWF0ZSB0aGUgdmlldyB0byBhIG5ldyB6b29tIGxldmVsOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogdmlldy5nZXRab29tKCkgKyAxfSk7XG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgYW5pbWF0aW9uIGxhc3RzIG9uZSBzZWNvbmQgYW5kIHVzZXMgaW4tYW5kLW91dCBlYXNpbmcuICBZb3VcbiAgICAgKiBjYW4gY3VzdG9taXplIHRoaXMgYmVoYXZpb3IgYnkgaW5jbHVkaW5nIGBkdXJhdGlvbmAgKGluIG1pbGxpc2Vjb25kcykgYW5kXG4gICAgICogYGVhc2luZ2Agb3B0aW9ucyAoc2VlIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSkuXG4gICAgICpcbiAgICAgKiBUbyBjaGFpbiB0b2dldGhlciBtdWx0aXBsZSBhbmltYXRpb25zLCBjYWxsIHRoZSBtZXRob2Qgd2l0aCBtdWx0aXBsZVxuICAgICAqIGFuaW1hdGlvbiBvYmplY3RzLiAgRm9yIGV4YW1wbGUsIHRvIGZpcnN0IHpvb20gYW5kIHRoZW4gcGFuOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogMTB9LCB7Y2VudGVyOiBbMCwgMF19KTtcbiAgICAgKlxuICAgICAqIElmIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gYXMgdGhlIGxhc3QgYXJndW1lbnQgdG8gdGhlIGFuaW1hdGUgbWV0aG9kLCBpdFxuICAgICAqIHdpbGwgZ2V0IGNhbGxlZCBhdCB0aGUgZW5kIG9mIGFuIGFuaW1hdGlvbiBzZXJpZXMuICBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgICAqIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgXG4gICAgICogaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAgICAgKlxuICAgICAqIEFuaW1hdGlvbnMgYXJlIGNhbmNlbGxlZCBieSB1c2VyIGludGVyYWN0aW9ucyAoZS5nLiBkcmFnZ2luZyB0aGUgbWFwKSBvciBieVxuICAgICAqIGNhbGxpbmcgYHZpZXcuc2V0Q2VudGVyKClgLCBgdmlldy5zZXRSZXNvbHV0aW9uKClgLCBvciBgdmlldy5zZXRSb3RhdGlvbigpYFxuICAgICAqIChvciBhbm90aGVyIG1ldGhvZCB0aGF0IGNhbGxzIG9uZSBvZiB0aGVzZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uXG4gICAgICogICAgIG9wdGlvbnMuICBNdWx0aXBsZSBhbmltYXRpb25zIGNhbiBiZSBydW4gaW4gc2VyaWVzIGJ5IHBhc3NpbmcgbXVsdGlwbGVcbiAgICAgKiAgICAgb3B0aW9ucyBvYmplY3RzLiAgVG8gcnVuIG11bHRpcGxlIGFuaW1hdGlvbnMgaW4gcGFyYWxsZWwsIGNhbGwgdGhlIG1ldGhvZFxuICAgICAqICAgICBtdWx0aXBsZSB0aW1lcy4gIEFuIG9wdGlvbmFsIGNhbGxiYWNrIGNhbiBiZSBwcm92aWRlZCBhcyBhIGZpbmFsXG4gICAgICogICAgIGFyZ3VtZW50LiAgVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlclxuICAgICAqICAgICB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlZCB3aXRob3V0IGJlaW5nIGNhbmNlbGxlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICh2YXJfYXJncykge1xuICAgICAgICBpZiAodGhpcy5pc0RlZigpICYmICF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2VudGVyID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdGlvbnMuY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRpb25zLmFuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJnc1tpXSA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZUludGVybmFsID0gZnVuY3Rpb24gKHZhcl9hcmdzKSB7XG4gICAgICAgIHZhciBhbmltYXRpb25Db3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBjYWxsYmFjaztcbiAgICAgICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJlxuICAgICAgICAgICAgdHlwZW9mIGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xuICAgICAgICAgICAgLS1hbmltYXRpb25Db3VudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNEZWYoKSkge1xuICAgICAgICAgICAgLy8gaWYgdmlldyBwcm9wZXJ0aWVzIGFyZSBub3QgeWV0IHNldCwgc2hvcnRjdXQgdG8gdGhlIGZpbmFsIHN0YXRlXG4gICAgICAgICAgICB2YXIgc3RhdGUgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKHN0YXRlLmNlbnRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJvdGF0aW9uKHN0YXRlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfLnNsaWNlKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy50YXJnZXRSb3RhdGlvbl87XG4gICAgICAgIHZhciBzZXJpZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25Db3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IC8qKiBAdHlwZSB7QW5pbWF0aW9uT3B0aW9uc30gKi8gKGFyZ3VtZW50c1tpXSk7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBvcHRpb25zLmFuY2hvcixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDAsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dCxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZUNlbnRlciA9IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0Q2VudGVyID0gb3B0aW9ucy5jZW50ZXIuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBjZW50ZXIgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShvcHRpb25zLnpvb20pO1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb24gPSBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IG9wdGlvbnMucmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uID0gcm90YXRpb247XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gbW9kdWxvKG9wdGlvbnMucm90YXRpb24gLSByb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uID0gcm90YXRpb24gKyBkZWx0YTtcbiAgICAgICAgICAgICAgICByb3RhdGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGFuaW1hdGlvbiBpcyBhIG5vLW9wXG4gICAgICAgICAgICBpZiAoaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikpIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uY29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIHdlIHN0aWxsIHB1c2ggaXQgb250byB0aGUgc2VyaWVzIGZvciBjYWxsYmFjayBoYW5kbGluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgKz0gYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VyaWVzLnB1c2goYW5pbWF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uc18oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0QW5pbWF0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaW50c19bVmlld0hpbnQuQU5JTUFUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlldywgc3VjaCBhcyBwYW5uaW5nIG9yIHpvb21pbmcuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgaW50ZXJhY3RlZCB3aXRoLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRJbnRlcmFjdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LklOVEVSQUNUSU5HXSA+IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYW5jZWwgYW55IG9uZ29pbmcgYW5pbWF0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FuY2VsQW5pbWF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLXRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10pO1xuICAgICAgICB2YXIgYW5jaG9yO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgICAgICAgaWYgKHNlcmllc1swXS5jYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKHNlcmllc1swXS5jYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhbmNob3IpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW5jaG9yID0gYW5pbWF0aW9uLmFuY2hvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gYW5jaG9yO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIGFsbCBhbmltYXRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbnNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51cGRhdGVBbmltYXRpb25LZXlfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBtb3JlID0gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcbiAgICAgICAgICAgIHZhciBzZXJpZXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGVsYXBzZWQgPSBub3cgLSBhbmltYXRpb24uc3RhcnQ7XG4gICAgICAgICAgICAgICAgdmFyIGZyYWN0aW9uID0gYW5pbWF0aW9uLmR1cmF0aW9uID4gMCA/IGVsYXBzZWQgLyBhbmltYXRpb24uZHVyYXRpb24gOiAxO1xuICAgICAgICAgICAgICAgIGlmIChmcmFjdGlvbiA+PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uID0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcmllc0NvbXBsZXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IGFuaW1hdGlvbi5lYXNpbmcoZnJhY3Rpb24pO1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlQ2VudGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5MSA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXJbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0geDAgKyBwcm9ncmVzcyAqICh4MSAtIHgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB5MCArIHByb2dyZXNzICogKHkxIC0geTApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBbeCwgeV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAmJiBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHByb2dyZXNzID09PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCBzaXplLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShjb25zdHJhaW5lZFJlc29sdXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5QSVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBhbmltYXRpb24uc291cmNlUm90YXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHJvdGF0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKGNvbnN0cmFpbmVkUm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gcm90YXRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8odHJ1ZSk7XG4gICAgICAgICAgICAgICAgbW9yZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNlcmllc0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zX1tpXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgLTEpO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHNlcmllc1swXS5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwcnVuZSBjb21wbGV0ZWQgc2VyaWVzXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18gPSB0aGlzLmFuaW1hdGlvbnNfLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgaWYgKG1vcmUgJiYgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBSb3RhdGlvbiBhbmNob3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJvdGF0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyUm90YXRlID0gZnVuY3Rpb24gKHJvdGF0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFpvb20gYW5jaG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyIGZvciByZXNvbHV0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyWm9vbSA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gYW5jaG9yWzBdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB5ID0gYW5jaG9yWzFdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMV0gLSBjdXJyZW50Q2VudGVyWzFdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNlbnRlciA9IFt4LCB5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCB2aWV3cG9ydCBzaXplLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcm90YXRpb25dIFRha2UgaW50byBhY2NvdW50IHRoZSByb3RhdGlvbiBvZiB0aGUgdmlld3BvcnQgd2hlbiBnaXZpbmcgdGhlIHNpemVcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVmlld3BvcnQgc2l6ZSBvciBgWzEwMCwgMTAwXWAgd2hlbiBubyB2aWV3cG9ydCBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRWaWV3cG9ydFNpemVfID0gZnVuY3Rpb24gKG9wdF9yb3RhdGlvbikge1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMudmlld3BvcnRTaXplXztcbiAgICAgICAgaWYgKG9wdF9yb3RhdGlvbikge1xuICAgICAgICAgICAgdmFyIHcgPSBzaXplWzBdO1xuICAgICAgICAgICAgdmFyIGggPSBzaXplWzFdO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5jb3Mob3B0X3JvdGF0aW9uKSkgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhoICogTWF0aC5zaW4ob3B0X3JvdGF0aW9uKSksXG4gICAgICAgICAgICAgICAgTWF0aC5hYnModyAqIE1hdGguc2luKG9wdF9yb3RhdGlvbikpICtcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoaCAqIE1hdGguY29zKG9wdF9yb3RhdGlvbikpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9yZXMgdGhlIHZpZXdwb3J0IHNpemUgb24gdGhlIHZpZXcuIFRoZSB2aWV3cG9ydCBzaXplIGlzIG5vdCByZWFkIGV2ZXJ5IHRpbWUgZnJvbSB0aGUgRE9NXG4gICAgICogdG8gYXZvaWQgcGVyZm9ybWFuY2UgaGl0IGFuZCBsYXlvdXQgcmVmbG93LlxuICAgICAqIFRoaXMgc2hvdWxkIGJlIGRvbmUgb24gbWFwIHNpemUgY2hhbmdlLlxuICAgICAqIE5vdGU6IHRoZSBjb25zdHJhaW50cyBhcmUgbm90IHJlc29sdmVkIGR1cmluZyBhbiBhbmltYXRpb24gdG8gYXZvaWQgc3RvcHBpbmcgaXRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3NpemVdIFZpZXdwb3J0IHNpemU7IGlmIHVuZGVmaW5lZCwgWzEwMCwgMTAwXSBpcyBhc3N1bWVkXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Vmlld3BvcnRTaXplID0gZnVuY3Rpb24gKG9wdF9zaXplKSB7XG4gICAgICAgIHRoaXMudmlld3BvcnRTaXplXyA9IEFycmF5LmlzQXJyYXkob3B0X3NpemUpXG4gICAgICAgICAgICA/IG9wdF9zaXplLnNsaWNlKClcbiAgICAgICAgICAgIDogWzEwMCwgMTAwXTtcbiAgICAgICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGNlbnRlci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICBpZiAoIWNlbnRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9Vc2VyQ29vcmRpbmF0ZShjZW50ZXIsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBjZW50ZXIgd2l0aG91dCB0cmFuc2Zvcm1pbmcgdG8gdXNlciBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Q29uc3RyYWludHN9IENvbnN0cmFpbnRzLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSZXNvbHV0aW9uIGNvbnN0cmFpbnQgaXMgc2V0XG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc18uY29uc3RyYWluUmVzb2x1dGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9oaW50c10gRGVzdGluYXRpb24gYXJyYXkuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSGludC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRIaW50cyA9IGZ1bmN0aW9uIChvcHRfaGludHMpIHtcbiAgICAgICAgaWYgKG9wdF9oaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRfaGludHNbMF0gPSB0aGlzLmhpbnRzX1swXTtcbiAgICAgICAgICAgIG9wdF9oaW50c1sxXSA9IHRoaXMuaGludHNfWzFdO1xuICAgICAgICAgICAgcmV0dXJuIG9wdF9oaW50cztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhpbnRzXy5zbGljZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGV4dGVudCBmb3IgdGhlIGN1cnJlbnQgdmlldyBzdGF0ZSBhbmQgdGhlIHBhc3NlZCBzaXplLlxuICAgICAqIFRoZSBzaXplIGlzIHRoZSBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggaW50byB3aGljaCB0aGUgY2FsY3VsYXRlZCBleHRlbnRcbiAgICAgKiBzaG91bGQgZml0LiBJbiBtb3N0IGNhc2VzIHlvdSB3YW50IHRvIGdldCB0aGUgZXh0ZW50IG9mIHRoZSBlbnRpcmUgbWFwLFxuICAgICAqIHRoYXQgaXMgYG1hcC5nZXRTaXplKClgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCwgdGhlIHNpemVcbiAgICAgKiBvZiB0aGUgbWFwIHRoYXQgdXNlcyB0aGlzIHZpZXcgd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVFeHRlbnQgPSBmdW5jdGlvbiAob3B0X3NpemUpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IHRoaXMuY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwob3B0X3NpemUpO1xuICAgICAgICByZXR1cm4gdG9Vc2VyRXh0ZW50KGV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBCb3ggcGl4ZWwgc2l6ZS4gSWYgbm90IHByb3ZpZGVkLFxuICAgICAqIHRoZSBtYXAncyBsYXN0IGtub3duIHZpZXdwb3J0IHNpemUgd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUV4dGVudEludGVybmFsID0gZnVuY3Rpb24gKG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gKi8gKHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSk7XG4gICAgICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgIGFzc2VydChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQsIDIpOyAvLyBUaGUgdmlldyByZXNvbHV0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHZhciByb3RhdGlvbiA9IC8qKiBAdHlwZSB7IW51bWJlcn0gKi8gKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIGFzc2VydChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkLCAzKTsgLy8gVGhlIHZpZXcgcm90YXRpb24gaXMgbm90IGRlZmluZWRcbiAgICAgICAgcmV0dXJuIGdldEZvclZpZXdBbmRTaXplKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhSZXNvbHV0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG5ldyBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBtYXhab29tOiB6b29tIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGEgbmV3IG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1pbmltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0TWluWm9vbSA9IGZ1bmN0aW9uICh6b29tKSB7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7IG1pblpvb206IHpvb20gfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhlIHZpZXcgc2hvdWxkIGFsbG93IGludGVybWVkaWFyeSB6b29tIGxldmVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgV2hldGhlciB0aGUgcmVzb2x1dGlvbiBpcyBjb25zdHJhaW5lZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q29uc3RyYWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7IGNvbnN0cmFpblJlc29sdXRpb246IGVuYWJsZWQgfSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gVGhlIHByb2plY3Rpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFByb2plY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2plY3Rpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb25zIGZvciB0aGUgdmlldy4gVGhpcyByZXR1cm5zIHRoZSBhcnJheSBvZiByZXNvbHV0aW9uc1xuICAgICAqIHBhc3NlZCB0byB0aGUgY29uc3RydWN0b3Igb2YgdGhlIFZpZXcsIG9yIHVuZGVmaW5lZCBpZiBub25lIHdlcmUgZ2l2ZW4uXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSBwcm92aWRlZCBleHRlbnQgKGluIG1hcCB1bml0cykgYW5kIHNpemUgKGluIHBpeGVscykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICAgKiAgICAgdGhlIGdpdmVuIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3JFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50LCBvcHRfc2l6ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwoZnJvbVVzZXJFeHRlbnQoZXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSksIG9wdF9zaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSBwcm92aWRlZCBleHRlbnQgKGluIG1hcCB1bml0cykgYW5kIHNpemUgKGluIHBpeGVscykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICAgKiAgICAgdGhlIGdpdmVuIHNpemUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsID0gZnVuY3Rpb24gKGV4dGVudCwgb3B0X3NpemUpIHtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRfc2l6ZSB8fCB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oKTtcbiAgICAgICAgdmFyIHhSZXNvbHV0aW9uID0gZ2V0V2lkdGgoZXh0ZW50KSAvIHNpemVbMF07XG4gICAgICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChleHRlbnQpIC8gc2l6ZVsxXTtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgZm9yIGFcbiAgICAgKiByZXNvbHV0aW9uLiBFeHBvbmVudGlhbCBzY2FsaW5nIGlzIGFzc3VtZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcG93ZXJdIFBvd2VyLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvclZhbHVlRnVuY3Rpb24gPSBmdW5jdGlvbiAob3B0X3Bvd2VyKSB7XG4gICAgICAgIHZhciBwb3dlciA9IG9wdF9wb3dlciB8fCAyO1xuICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pO1xuICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyhwb3dlcik7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHZhbHVlICogbWF4KTtcbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyByb3RhdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBpbiByYWRpYW5zLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJvdGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChWaWV3UHJvcGVydHkuUk9UQVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHJlc29sdXRpb24gZm9yIGEgdmFsdWUgYmV0d2VlblxuICAgICAqIDAgYW5kIDEuIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9wb3dlcl0gUG93ZXIuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyKTogbnVtYmVyfSBWYWx1ZSBmb3IgcmVzb2x1dGlvbiBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRWYWx1ZUZvclJlc29sdXRpb25GdW5jdGlvbiA9IGZ1bmN0aW9uIChvcHRfcG93ZXIpIHtcbiAgICAgICAgdmFyIGxvZ1Bvd2VyID0gTWF0aC5sb2cob3B0X3Bvd2VyIHx8IDIpO1xuICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pO1xuICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgICAgIHZhciBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBsb2dQb3dlcjtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gVmFsdWUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIHJlc29sdXRpb24pIC8gbG9nUG93ZXIgLyBtYXg7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdmlld3BvcnQgbWludXMgcGFkZGluZy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3JvdGF0aW9uXSBUYWtlIGludG8gYWNjb3VudCB0aGUgcm90YXRpb24gb2YgdGhlIHZpZXdwb3J0IHdoZW4gZ2l2aW5nIHRoZSBzaXplXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFZpZXdwb3J0IHNpemUgcmVkdWNlZCBieSB0aGUgcGFkZGluZy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfID0gZnVuY3Rpb24gKG9wdF9yb3RhdGlvbikge1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyhvcHRfcm90YXRpb24pO1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgICAgIGlmIChwYWRkaW5nKSB7XG4gICAgICAgICAgICBzaXplID0gW1xuICAgICAgICAgICAgICAgIHNpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSxcbiAgICAgICAgICAgICAgICBzaXplWzFdIC0gcGFkZGluZ1swXSAtIHBhZGRpbmdbMl0sXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7U3RhdGV9IFZpZXcgc3RhdGUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovICh0aGlzLmdldENlbnRlckludGVybmFsKCkpO1xuICAgICAgICB2YXIgcGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgICAgIGlmIChwYWRkaW5nKSB7XG4gICAgICAgICAgICB2YXIgcmVkdWNlZFNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oKTtcbiAgICAgICAgICAgIGNlbnRlciA9IGNhbGN1bGF0ZUNlbnRlck9uKGNlbnRlciwgdGhpcy5nZXRWaWV3cG9ydFNpemVfKCksIFtyZWR1Y2VkU2l6ZVswXSAvIDIgKyBwYWRkaW5nWzNdLCByZWR1Y2VkU2l6ZVsxXSAvIDIgKyBwYWRkaW5nWzBdXSwgcmVzb2x1dGlvbiwgcm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjZW50ZXI6IGNlbnRlci5zbGljZSgwKSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IHByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IHByb2plY3Rpb24gOiBudWxsLFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbixcbiAgICAgICAgICAgIHJvdGF0aW9uOiByb3RhdGlvbixcbiAgICAgICAgICAgIHpvb206IHRoaXMuZ2V0Wm9vbSgpLFxuICAgICAgICB9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IHpvb20gbGV2ZWwuIFRoaXMgbWV0aG9kIG1heSByZXR1cm4gbm9uLWludGVnZXIgem9vbSBsZXZlbHNcbiAgICAgKiBpZiB0aGUgdmlldyBkb2VzIG5vdCBjb25zdHJhaW4gdGhlIHJlc29sdXRpb24sIG9yIGlmIGFuIGludGVyYWN0aW9uIG9yXG4gICAgICogYW5pbWF0aW9uIGlzIHVuZGVyd2F5LlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFpvb20uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB6b29tO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB6b29tID0gdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gem9vbTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgem9vbSBsZXZlbCBmb3IgYSByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFRoZSByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSB6b29tIGxldmVsIGZvciB0aGUgcHJvdmlkZWQgcmVzb2x1dGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Wm9vbUZvclJlc29sdXRpb24gPSBmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5taW5ab29tXyB8fCAwO1xuICAgICAgICB2YXIgbWF4LCB6b29tRmFjdG9yO1xuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgICAgICAgIHZhciBuZWFyZXN0ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIDEpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gbmVhcmVzdDtcbiAgICAgICAgICAgIG1heCA9IHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3RdO1xuICAgICAgICAgICAgaWYgKG5lYXJlc3QgPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IG1heCAvIHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3QgKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1heCA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgICAgICAgICB6b29tRmFjdG9yID0gdGhpcy56b29tRmFjdG9yXztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2Zmc2V0ICsgTWF0aC5sb2cobWF4IC8gcmVzb2x1dGlvbikgLyBNYXRoLmxvZyh6b29tRmFjdG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgdmlldyByZXNvbHV0aW9uIGZvciB0aGUgcHJvdmlkZWQgem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbkZvclpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggPD0gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJhc2VMZXZlbCA9IGNsYW1wKE1hdGguZmxvb3Ioem9vbSksIDAsIHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgdmFyIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWxdIC8gdGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsICsgMV07XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbF0gL1xuICAgICAgICAgICAgICAgIE1hdGgucG93KHpvb21GYWN0b3IsIGNsYW1wKHpvb20gLSBiYXNlTGV2ZWwsIDAsIDEpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gKHRoaXMubWF4UmVzb2x1dGlvbl8gLyBNYXRoLnBvdyh0aGlzLnpvb21GYWN0b3JfLCB6b29tIC0gdGhpcy5taW5ab29tXykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGaXQgdGhlIGdpdmVuIGdlb21ldHJ5IG9yIGV4dGVudCBiYXNlZCBvbiB0aGUgZ2l2ZW4gbWFwIHNpemUgYW5kIGJvcmRlci5cbiAgICAgKiBUaGUgc2l6ZSBpcyBwaXhlbCBkaW1lbnNpb25zIG9mIHRoZSBib3ggdG8gZml0IHRoZSBleHRlbnQgaW50by5cbiAgICAgKiBJbiBtb3N0IGNhc2VzIHlvdSB3aWxsIHdhbnQgdG8gdXNlIHRoZSBtYXAgc2l6ZSwgdGhhdCBpcyBgbWFwLmdldFNpemUoKWAuXG4gICAgICogVGFrZXMgY2FyZSBvZiB0aGUgbWFwIGFuZ2xlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBnZW9tZXRyeU9yRXh0ZW50IFRoZSBnZW9tZXRyeSBvclxuICAgICAqICAgICBleHRlbnQgdG8gZml0IHRoZSB2aWV3IHRvLlxuICAgICAqIEBwYXJhbSB7Rml0T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5maXQgPSBmdW5jdGlvbiAoZ2VvbWV0cnlPckV4dGVudCwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi9cbiAgICAgICAgdmFyIGdlb21ldHJ5O1xuICAgICAgICBhc3NlcnQoQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSB8fFxuICAgICAgICAgICAgdHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhnZW9tZXRyeU9yRXh0ZW50KS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkpID09PVxuICAgICAgICAgICAgICAgICdmdW5jdGlvbicsIDI0KTsgLy8gSW52YWxpZCBleHRlbnQgb3IgZ2VvbWV0cnkgcHJvdmlkZWQgYXMgYGdlb21ldHJ5YFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSkge1xuICAgICAgICAgICAgYXNzZXJ0KCFpc0VtcHR5KGdlb21ldHJ5T3JFeHRlbnQpLCAyNSk7IC8vIENhbm5vdCBmaXQgZW1wdHkgZXh0ZW50IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBmcm9tVXNlckV4dGVudChnZW9tZXRyeU9yRXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnlPckV4dGVudC5nZXRUeXBlKCkgPT09IEdlb21ldHJ5VHlwZS5DSVJDTEUpIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBmcm9tVXNlckV4dGVudChnZW9tZXRyeU9yRXh0ZW50LmdldEV4dGVudCgpLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGV4dGVudCk7XG4gICAgICAgICAgICBnZW9tZXRyeS5yb3RhdGUodGhpcy5nZXRSb3RhdGlvbigpLCBnZXRDZW50ZXIoZXh0ZW50KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgdXNlclByb2plY3Rpb24gPSBnZXRVc2VyUHJvamVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnlPckV4dGVudFxuICAgICAgICAgICAgICAgICAgICAuY2xvbmUoKVxuICAgICAgICAgICAgICAgICAgICAudHJhbnNmb3JtKHVzZXJQcm9qZWN0aW9uLCB0aGlzLmdldFByb2plY3Rpb24oKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeU9yRXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZml0SW50ZXJuYWwoZ2VvbWV0cnksIG9wdF9vcHRpb25zKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSByb3RhdGVkIGV4dGVudFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IFRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudFwiKS5FeHRlbnR9IFRoZSByb3RhdGVkIGV4dGVudCBmb3IgdGhlIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeSA9IGZ1bmN0aW9uIChnZW9tZXRyeSkge1xuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKHJvdGF0aW9uKTtcbiAgICAgICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgICAgICAgdmFyIGNvb3JkcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICB2YXIgc3RyaWRlID0gZ2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHZhciBtaW5Sb3RYID0gK0luZmluaXR5O1xuICAgICAgICB2YXIgbWluUm90WSA9ICtJbmZpbml0eTtcbiAgICAgICAgdmFyIG1heFJvdFggPSAtSW5maW5pdHk7XG4gICAgICAgIHZhciBtYXhSb3RZID0gLUluZmluaXR5O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZHMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB2YXIgcm90WCA9IGNvb3Jkc1tpXSAqIGNvc0FuZ2xlIC0gY29vcmRzW2kgKyAxXSAqIHNpbkFuZ2xlO1xuICAgICAgICAgICAgdmFyIHJvdFkgPSBjb29yZHNbaV0gKiBzaW5BbmdsZSArIGNvb3Jkc1tpICsgMV0gKiBjb3NBbmdsZTtcbiAgICAgICAgICAgIG1pblJvdFggPSBNYXRoLm1pbihtaW5Sb3RYLCByb3RYKTtcbiAgICAgICAgICAgIG1pblJvdFkgPSBNYXRoLm1pbihtaW5Sb3RZLCByb3RZKTtcbiAgICAgICAgICAgIG1heFJvdFggPSBNYXRoLm1heChtYXhSb3RYLCByb3RYKTtcbiAgICAgICAgICAgIG1heFJvdFkgPSBNYXRoLm1heChtYXhSb3RZLCByb3RZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW21pblJvdFgsIG1pblJvdFksIG1heFJvdFgsIG1heFJvdFldO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7Rml0T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmZpdEludGVybmFsID0gZnVuY3Rpb24gKGdlb21ldHJ5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICAgICAgaWYgKCFzaXplKSB7XG4gICAgICAgICAgICBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGFkZGluZyA6IFswLCAwLCAwLCAwXTtcbiAgICAgICAgdmFyIG5lYXJlc3QgPSBvcHRpb25zLm5lYXJlc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubmVhcmVzdCA6IGZhbHNlO1xuICAgICAgICB2YXIgbWluUmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKG9wdGlvbnMubWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gb3B0aW9ucy5taW5SZXNvbHV0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbShvcHRpb25zLm1heFpvb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJvdGF0ZWRFeHRlbnQgPSB0aGlzLnJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeShnZW9tZXRyeSk7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSByZXNvbHV0aW9uXG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwocm90YXRlZEV4dGVudCwgW1xuICAgICAgICAgICAgc2l6ZVswXSAtIHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdLFxuICAgICAgICAgICAgc2l6ZVsxXSAtIHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdLFxuICAgICAgICBdKTtcbiAgICAgICAgcmVzb2x1dGlvbiA9IGlzTmFOKHJlc29sdXRpb24pXG4gICAgICAgICAgICA/IG1pblJlc29sdXRpb25cbiAgICAgICAgICAgIDogTWF0aC5tYXgocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbik7XG4gICAgICAgIHJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBuZWFyZXN0ID8gMCA6IDEpO1xuICAgICAgICAvLyBjYWxjdWxhdGUgY2VudGVyXG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgdmFyIHNpbkFuZ2xlID0gTWF0aC5zaW4ocm90YXRpb24pO1xuICAgICAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gICAgICAgIHZhciBjZW50ZXJSb3QgPSBnZXRDZW50ZXIocm90YXRlZEV4dGVudCk7XG4gICAgICAgIGNlbnRlclJvdFswXSArPSAoKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgY2VudGVyUm90WzFdICs9ICgocGFkZGluZ1swXSAtIHBhZGRpbmdbMl0pIC8gMikgKiByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgY2VudGVyWCA9IGNlbnRlclJvdFswXSAqIGNvc0FuZ2xlIC0gY2VudGVyUm90WzFdICogc2luQW5nbGU7XG4gICAgICAgIHZhciBjZW50ZXJZID0gY2VudGVyUm90WzFdICogY29zQW5nbGUgKyBjZW50ZXJSb3RbMF0gKiBzaW5BbmdsZTtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q29uc3RyYWluZWRDZW50ZXIoW2NlbnRlclgsIGNlbnRlclldLCByZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayA/IG9wdGlvbnMuY2FsbGJhY2sgOiBWT0lEO1xuICAgICAgICBpZiAob3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGNlbnRlcixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nLFxuICAgICAgICAgICAgfSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBjZW50ZXI7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2VudGVyIG9uIGNvb3JkaW5hdGUgYW5kIHZpZXcgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwb3NpdGlvbiBQb3NpdGlvbiBvbiB0aGUgdmlldyB0byBjZW50ZXIgb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNlbnRlck9uID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuY2VudGVyT25JbnRlcm5hbChmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpLCBzaXplLCBwb3NpdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jZW50ZXJPbkludGVybmFsID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoY2FsY3VsYXRlQ2VudGVyT24oY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24sIHRoaXMuZ2V0UmVzb2x1dGlvbigpLCB0aGlzLmdldFJvdGF0aW9uKCkpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgdGhlIHNoaWZ0IGJldHdlZW4gbWFwIGFuZCB2aWV3cG9ydCBjZW50ZXIuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IENlbnRlciBzaGlmdC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVDZW50ZXJTaGlmdCA9IGZ1bmN0aW9uIChjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKSB7XG4gICAgICAgIHZhciBjZW50ZXJTaGlmdDtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICBpZiAocGFkZGluZyAmJiBjZW50ZXIpIHtcbiAgICAgICAgICAgIHZhciByZWR1Y2VkU2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygtcm90YXRpb24pO1xuICAgICAgICAgICAgdmFyIHNoaWZ0ZWRDZW50ZXIgPSBjYWxjdWxhdGVDZW50ZXJPbihjZW50ZXIsIHNpemUsIFtyZWR1Y2VkU2l6ZVswXSAvIDIgKyBwYWRkaW5nWzNdLCByZWR1Y2VkU2l6ZVsxXSAvIDIgKyBwYWRkaW5nWzBdXSwgcmVzb2x1dGlvbiwgcm90YXRpb24pO1xuICAgICAgICAgICAgY2VudGVyU2hpZnQgPSBbXG4gICAgICAgICAgICAgICAgY2VudGVyWzBdIC0gc2hpZnRlZENlbnRlclswXSxcbiAgICAgICAgICAgICAgICBjZW50ZXJbMV0gLSBzaGlmdGVkQ2VudGVyWzFdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyU2hpZnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBkZWZpbmVkLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmlzRGVmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmdldENlbnRlckludGVybmFsKCkgJiYgdGhpcy5nZXRSZXNvbHV0aW9uKCkgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgcmVsYXRpdmUgY29vcmRpbmF0ZXMgdG8gdGhlIGNlbnRlciBvZiB0aGUgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGFDb29yZGluYXRlcyBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdENlbnRlciA9IGZ1bmN0aW9uIChkZWx0YUNvb3JkaW5hdGVzKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0b1VzZXJDb29yZGluYXRlKHRoaXMudGFyZ2V0Q2VudGVyXywgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICB0aGlzLnNldENlbnRlcihbXG4gICAgICAgICAgICBjZW50ZXJbMF0gKyBkZWx0YUNvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgICAgY2VudGVyWzFdICsgZGVsdGFDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdENlbnRlckludGVybmFsID0gZnVuY3Rpb24gKGRlbHRhQ29vcmRpbmF0ZXMpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMudGFyZ2V0Q2VudGVyXztcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChbXG4gICAgICAgICAgICBjZW50ZXJbMF0gKyBkZWx0YUNvb3JkaW5hdGVzWzBdLFxuICAgICAgICAgICAgY2VudGVyWzFdICsgZGVsdGFDb29yZGluYXRlc1sxXSxcbiAgICAgICAgXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGUgdmlldyByZXNvbHV0aW9uIGJ5IGEgcmF0aW8sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcmVzb2x1dGlvblxuICAgICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gVGhlIHJhdGlvIHRvIGFwcGx5IG9uIHRoZSB2aWV3IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJhdGlvLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHJhdGlvLCBhbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwgPSBmdW5jdGlvbiAocmF0aW8sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGlzTW92aW5nID0gdGhpcy5nZXRBbmltYXRpbmcoKSB8fCB0aGlzLmdldEludGVyYWN0aW5nKCk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHZhciBuZXdSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbih0aGlzLnRhcmdldFJlc29sdXRpb25fICogcmF0aW8sIDAsIHNpemUsIGlzTW92aW5nKTtcbiAgICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShuZXdSZXNvbHV0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fICo9IHJhdGlvO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgdmFsdWUgdG8gdGhlIHZpZXcgem9vbSBsZXZlbCwgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3Rab29tID0gZnVuY3Rpb24gKGRlbHRhLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbihNYXRoLnBvdyh0aGlzLnpvb21GYWN0b3JfLCAtZGVsdGEpLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSB2YWx1ZSB0byB0aGUgdmlldyByb3RhdGlvbiwgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByb3RhdGlvblxuICAgICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIHJvdGF0aW9uLCBpbiByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RSb3RhdGlvbiA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgb3B0X2FuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGp1c3RSb3RhdGlvbkludGVybmFsKGRlbHRhLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gcm90YXRpb24sIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Um90YXRpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKTtcbiAgICAgICAgdmFyIG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24odGhpcy50YXJnZXRSb3RhdGlvbl8gKyBkZWx0YSwgaXNNb3ZpbmcpO1xuICAgICAgICBpZiAob3B0X2FuY2hvcikge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUobmV3Um90YXRpb24sIG9wdF9hbmNob3IpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fICs9IGRlbHRhO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNlbnRlciBvZiB0aGUgY3VycmVudCB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Q2VudGVyID0gZnVuY3Rpb24gKGNlbnRlcikge1xuICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKGZyb21Vc2VyQ29vcmRpbmF0ZShjZW50ZXIsIHRoaXMuZ2V0UHJvamVjdGlvbigpKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNlbnRlciB1c2luZyB0aGUgdmlldyBwcm9qZWN0aW9uIChub3QgdGhlIHVzZXIgcHJvamVjdGlvbikuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldENlbnRlckludGVybmFsID0gZnVuY3Rpb24gKGNlbnRlcikge1xuICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBjZW50ZXI7XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9WaWV3SGludC5qc1wiKS5kZWZhdWx0fSBoaW50IEhpbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTmV3IHZhbHVlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldEhpbnQgPSBmdW5jdGlvbiAoaGludCwgZGVsdGEpIHtcbiAgICAgICAgdGhpcy5oaW50c19baGludF0gKz0gZGVsdGE7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5oaW50c19baGludF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoaXMgdmlldy4gQW55IHJlc29sdXRpb24gY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IHJlc29sdXRpb247XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcm90YXRpb24gZm9yIHRoaXMgdmlldy4gQW55IHJvdGF0aW9uIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Um90YXRpb24gPSBmdW5jdGlvbiAocm90YXRpb24pIHtcbiAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogWm9vbSB0byBhIHNwZWNpZmljIHpvb20gbGV2ZWwuIEFueSByZXNvbHV0aW9uIGNvbnN0cmFpbiB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLnNldFJlc29sdXRpb24odGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh6b29tKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGUgcm90YXRpb24vcmVzb2x1dGlvbi9jZW50ZXIgYmFzZWQgb24gdGFyZ2V0IHZhbHVlcy5cbiAgICAgKiBOb3RlOiB3ZSBoYXZlIHRvIGNvbXB1dGUgcm90YXRpb24gZmlyc3QsIHRoZW4gcmVzb2x1dGlvbiBhbmQgY2VudGVyIGNvbnNpZGVyaW5nIHRoYXRcbiAgICAgKiBwYXJhbWV0ZXJzIGNhbiBpbmZsdWVuY2Ugb25lIGFub3RoZXIgaW4gY2FzZSBhIHZpZXcgZXh0ZW50IGNvbnN0cmFpbnQgaXMgcHJlc2VudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfZG9Ob3RDYW5jZWxBbmltc10gRG8gbm90IGNhbmNlbCBhbmltYXRpb25zLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9mb3JjZU1vdmluZ10gQXBwbHkgY29uc3RyYWludHMgYXMgaWYgdGhlIHZpZXcgaXMgbW92aW5nLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYXBwbHlUYXJnZXRTdGF0ZV8gPSBmdW5jdGlvbiAob3B0X2RvTm90Q2FuY2VsQW5pbXMsIG9wdF9mb3JjZU1vdmluZykge1xuICAgICAgICB2YXIgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKSB8fCBvcHRfZm9yY2VNb3Zpbmc7XG4gICAgICAgIC8vIGNvbXB1dGUgcm90YXRpb25cbiAgICAgICAgdmFyIG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24odGhpcy50YXJnZXRSb3RhdGlvbl8sIGlzTW92aW5nKTtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8obmV3Um90YXRpb24pO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXywgMCwgc2l6ZSwgaXNNb3ZpbmcpO1xuICAgICAgICB2YXIgbmV3Q2VudGVyID0gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgc2l6ZSwgaXNNb3ZpbmcsIHRoaXMuY2FsY3VsYXRlQ2VudGVyU2hpZnQodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBuZXdSb3RhdGlvbiwgc2l6ZSkpO1xuICAgICAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OKSAhPT0gbmV3Um90YXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTiwgbmV3Um90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTikgIT09IG5ld1Jlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OLCBuZXdSZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpIHx8XG4gICAgICAgICAgICAhZXF1YWxzKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpLCBuZXdDZW50ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBuZXdDZW50ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpICYmICFvcHRfZG9Ob3RDYW5jZWxBbmltcykge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgYW55IGNvbnN0cmFpbnRzIG5lZWQgdG8gYmUgYXBwbGllZCwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgICAqIFRoaXMgaXMgdHlwaWNhbGx5IGRvbmUgb24gaW50ZXJhY3Rpb24gZW5kLlxuICAgICAqIE5vdGU6IGNhbGxpbmcgdGhpcyB3aXRoIGEgZHVyYXRpb24gb2YgMCB3aWxsIGFwcGx5IHRoZSBjb25zdHJhaW5lZCB2YWx1ZXMgc3RyYWlnaHQgYXdheSxcbiAgICAgKiB3aXRob3V0IGFuaW1hdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gVGhlIGFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUucmVzb2x2ZUNvbnN0cmFpbnRzID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gb3B0X2R1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZHVyYXRpb24gOiAyMDA7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiB8fCAwO1xuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sIGRpcmVjdGlvbiwgc2l6ZSk7XG4gICAgICAgIHZhciBuZXdDZW50ZXIgPSB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBzaXplLCBmYWxzZSwgdGhpcy5jYWxjdWxhdGVDZW50ZXJTaGlmdCh0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIG5ld1JvdGF0aW9uLCBzaXplKSk7XG4gICAgICAgIGlmIChkdXJhdGlvbiA9PT0gMCAmJiAhdGhpcy5jYW5jZWxBbmNob3JfKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gbmV3UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gbmV3Um90YXRpb247XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBuZXdDZW50ZXI7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3IgfHwgKGR1cmF0aW9uID09PSAwID8gdGhpcy5jYW5jZWxBbmNob3JfIDogdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5nZXRSZXNvbHV0aW9uKCkgIT09IG5ld1Jlc29sdXRpb24gfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0Um90YXRpb24oKSAhPT0gbmV3Um90YXRpb24gfHxcbiAgICAgICAgICAgICF0aGlzLmdldENlbnRlckludGVybmFsKCkgfHxcbiAgICAgICAgICAgICFlcXVhbHModGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpLCBuZXdDZW50ZXIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBuZXdSb3RhdGlvbixcbiAgICAgICAgICAgICAgICBjZW50ZXI6IG5ld0NlbnRlcixcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBhbmNob3IsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZCB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkXG4gICAgICogKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5iZWdpbkludGVyYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAxKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5vdGlmeSB0aGUgVmlldyB0aGF0IGFuIGludGVyYWN0aW9uIGhhcyBlbmRlZC4gVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZFxuICAgICAqIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWQgKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbl0gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5lbmRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuZW5kSW50ZXJhY3Rpb25JbnRlcm5hbChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBhbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZW5kSW50ZXJhY3Rpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgLTEpO1xuICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cyhvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHZhbGlkIHBvc2l0aW9uIGZvciB0aGUgdmlldyBjZW50ZXIgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlciBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF90YXJnZXRSZXNvbHV0aW9uXSBUYXJnZXQgcmVzb2x1dGlvbi4gSWYgbm90IHN1cHBsaWVkLCB0aGUgY3VycmVudCBvbmUgd2lsbCBiZSB1c2VkLlxuICAgICAqIFRoaXMgaXMgdXNlZnVsIHRvIGd1ZXNzIGEgdmFsaWQgY2VudGVyIHBvc2l0aW9uIGF0IGEgZGlmZmVyZW50IHpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBWYWxpZCBjZW50ZXIgcG9zaXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRDZW50ZXIgPSBmdW5jdGlvbiAodGFyZ2V0Q2VudGVyLCBvcHRfdGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKHRhcmdldENlbnRlciwgb3B0X3RhcmdldFJlc29sdXRpb24gfHwgdGhpcy5nZXRSZXNvbHV0aW9uKCksIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgem9vbSBsZXZlbCBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdmlldyBjb25zdHJhaW50cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHRhcmdldFpvb20gVGFyZ2V0IHpvb20uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFZhbGlkIHpvb20gbGV2ZWwuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRab29tID0gZnVuY3Rpb24gKHRhcmdldFpvb20sIG9wdF9kaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIHRhcmdldFJlcyA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20odGFyZ2V0Wm9vbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRhcmdldFJlcywgb3B0X2RpcmVjdGlvbikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgcmVzb2x1dGlvbiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdmlldyBjb25zdHJhaW50cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFZhbGlkIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHRhcmdldFJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IG9wdF9kaXJlY3Rpb24gfHwgMDtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGFyZ2V0UmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplKTtcbiAgICB9O1xuICAgIHJldHVybiBWaWV3O1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHBhcmFtIHsqfSByZXR1cm5WYWx1ZSBSZXR1cm4gdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCByZXR1cm5WYWx1ZSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayhyZXR1cm5WYWx1ZSk7XG4gICAgfSwgMCk7XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jZW50ZXJjb25zdHJhaW50LmpzXCIpLlR5cGV9IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2VudGVyQ29uc3RyYWludChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHNtb290aCA9IG9wdGlvbnMuc21vb3RoRXh0ZW50Q29uc3RyYWludCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuc21vb3RoRXh0ZW50Q29uc3RyYWludFxuICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICByZXR1cm4gY3JlYXRlRXh0ZW50KG9wdGlvbnMuZXh0ZW50LCBvcHRpb25zLmNvbnN0cmFpbk9ubHlDZW50ZXIsIHNtb290aCk7XG4gICAgfVxuICAgIHZhciBwcm9qZWN0aW9uID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICBpZiAob3B0aW9ucy5tdWx0aVdvcmxkICE9PSB0cnVlICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKS5zbGljZSgpO1xuICAgICAgICBleHRlbnRbMF0gPSAtSW5maW5pdHk7XG4gICAgICAgIGV4dGVudFsyXSA9IEluZmluaXR5O1xuICAgICAgICByZXR1cm4gY3JlYXRlRXh0ZW50KGV4dGVudCwgZmFsc2UsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlck5vbmU7XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7e2NvbnN0cmFpbnQ6IGltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZSwgbWF4UmVzb2x1dGlvbjogbnVtYmVyLFxuICogICAgIG1pblJlc29sdXRpb246IG51bWJlciwgbWluWm9vbTogbnVtYmVyLCB6b29tRmFjdG9yOiBudW1iZXJ9fSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50KG9wdGlvbnMpIHtcbiAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQ7XG4gICAgdmFyIG1heFJlc29sdXRpb247XG4gICAgdmFyIG1pblJlc29sdXRpb247XG4gICAgLy8gVE9ETzogbW92ZSB0aGVzZSB0byBiZSBvbCBjb25zdGFudHNcbiAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycy9pc3N1ZXMvMjA3NlxuICAgIHZhciBkZWZhdWx0TWF4Wm9vbSA9IDI4O1xuICAgIHZhciBkZWZhdWx0Wm9vbUZhY3RvciA9IDI7XG4gICAgdmFyIG1pblpvb20gPSBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IERFRkFVTFRfTUlOX1pPT007XG4gICAgdmFyIG1heFpvb20gPSBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IGRlZmF1bHRNYXhab29tO1xuICAgIHZhciB6b29tRmFjdG9yID0gb3B0aW9ucy56b29tRmFjdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21GYWN0b3IgOiBkZWZhdWx0Wm9vbUZhY3RvcjtcbiAgICB2YXIgbXVsdGlXb3JsZCA9IG9wdGlvbnMubXVsdGlXb3JsZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tdWx0aVdvcmxkIDogZmFsc2U7XG4gICAgdmFyIHNtb290aCA9IG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnRcbiAgICAgICAgOiB0cnVlO1xuICAgIHZhciBzaG93RnVsbEV4dGVudCA9IG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgOiBmYWxzZTtcbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgdmFyIHByb2pFeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHZhciBjb25zdHJhaW5Pbmx5Q2VudGVyID0gb3B0aW9ucy5jb25zdHJhaW5Pbmx5Q2VudGVyO1xuICAgIHZhciBleHRlbnQgPSBvcHRpb25zLmV4dGVudDtcbiAgICBpZiAoIW11bHRpV29ybGQgJiYgIWV4dGVudCAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgY29uc3RyYWluT25seUNlbnRlciA9IGZhbHNlO1xuICAgICAgICBleHRlbnQgPSBwcm9qRXh0ZW50O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciByZXNvbHV0aW9ucyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1ttaW5ab29tXTtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9XG4gICAgICAgICAgICByZXNvbHV0aW9uc1ttYXhab29tXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyByZXNvbHV0aW9uc1ttYXhab29tXVxuICAgICAgICAgICAgICAgIDogcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMocmVzb2x1dGlvbnMsIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkZWZhdWx0IG1pbiBhbmQgbWF4IHJlc29sdXRpb25cbiAgICAgICAgdmFyIHNpemUgPSAhcHJvakV4dGVudFxuICAgICAgICAgICAgPyAvLyB1c2UgYW4gZXh0ZW50IHRoYXQgY2FuIGZpdCB0aGUgd2hvbGUgd29ybGQgaWYgbmVlZCBiZVxuICAgICAgICAgICAgICAgICgzNjAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10pIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KClcbiAgICAgICAgICAgIDogTWF0aC5tYXgoZ2V0V2lkdGgocHJvakV4dGVudCksIGdldEhlaWdodChwcm9qRXh0ZW50KSk7XG4gICAgICAgIHZhciBkZWZhdWx0TWF4UmVzb2x1dGlvbiA9IHNpemUgLyBERUZBVUxUX1RJTEVfU0laRSAvIE1hdGgucG93KGRlZmF1bHRab29tRmFjdG9yLCBERUZBVUxUX01JTl9aT09NKTtcbiAgICAgICAgdmFyIGRlZmF1bHRNaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gL1xuICAgICAgICAgICAgTWF0aC5wb3coZGVmYXVsdFpvb21GYWN0b3IsIGRlZmF1bHRNYXhab29tIC0gREVGQVVMVF9NSU5fWk9PTSk7XG4gICAgICAgIC8vIHVzZXIgcHJvdmlkZWQgbWF4UmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgIG1heFJlc29sdXRpb24gPSBvcHRpb25zLm1heFJlc29sdXRpb247XG4gICAgICAgIGlmIChtYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1pblpvb20gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF4UmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWluWm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXNlciBwcm92aWRlZCBtaW5SZXNvbHV0aW9uIHRha2VzIHByZWNlZGVuY2VcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKG1pblJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1pblJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2l2ZW4gZGlzY3JldGUgem9vbSBsZXZlbHMsIG1pblJlc29sdXRpb24gbWF5IGJlIGRpZmZlcmVudCB0aGFuIHByb3ZpZGVkXG4gICAgICAgIG1heFpvb20gPVxuICAgICAgICAgICAgbWluWm9vbSArXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyh6b29tRmFjdG9yKSk7XG4gICAgICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSAtIG1pblpvb20pO1xuICAgICAgICBpZiAob3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVNuYXBUb1Bvd2VyKHpvb21GYWN0b3IsIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb25zdHJhaW50OiByZXNvbHV0aW9uQ29uc3RyYWludCxcbiAgICAgICAgbWF4UmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICAgICAgbWluUmVzb2x1dGlvbjogbWluUmVzb2x1dGlvbixcbiAgICAgICAgbWluWm9vbTogbWluWm9vbSxcbiAgICAgICAgem9vbUZhY3Rvcjogem9vbUZhY3RvcixcbiAgICB9O1xufVxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vcm90YXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICAgIHZhciBlbmFibGVSb3RhdGlvbiA9IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gOiB0cnVlO1xuICAgIGlmIChlbmFibGVSb3RhdGlvbikge1xuICAgICAgICB2YXIgY29uc3RyYWluUm90YXRpb24gPSBvcHRpb25zLmNvbnN0cmFpblJvdGF0aW9uO1xuICAgICAgICBpZiAoY29uc3RyYWluUm90YXRpb24gPT09IHVuZGVmaW5lZCB8fCBjb25zdHJhaW5Sb3RhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVNuYXBUb1plcm8oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNvbnN0cmFpblJvdGF0aW9uID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVNuYXBUb04oY29uc3RyYWluUm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uTm9uZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRpc2FibGU7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICogQHBhcmFtIHtBbmltYXRpb259IGFuaW1hdGlvbiBUaGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pIHtcbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlciAmJiBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSB7XG4gICAgICAgIGlmICghY29vcmRpbmF0ZXNFcXVhbChhbmltYXRpb24uc291cmNlQ2VudGVyLCBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAhPT0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSBhbmltYXRpb24udGFyZ2V0Um90YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBTaGlmdGVkIGNlbnRlci5cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQ2VudGVyT24oY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24sIHJlc29sdXRpb24sIHJvdGF0aW9uKSB7XG4gICAgLy8gY2FsY3VsYXRlIHJvdGF0ZWQgcG9zaXRpb25cbiAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcygtcm90YXRpb24pO1xuICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gICAgdmFyIHJvdFggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHJvdFkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgcm90WCArPSAoc2l6ZVswXSAvIDIgLSBwb3NpdGlvblswXSkgKiByZXNvbHV0aW9uO1xuICAgIHJvdFkgKz0gKHBvc2l0aW9uWzFdIC0gc2l6ZVsxXSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIGFuZ2xlXG4gICAgc2luQW5nbGUgPSAtc2luQW5nbGU7IC8vIGdvIGJhY2sgdG8gb3JpZ2luYWwgcm90YXRpb25cbiAgICB2YXIgY2VudGVyWCA9IHJvdFggKiBjb3NBbmdsZSAtIHJvdFkgKiBzaW5BbmdsZTtcbiAgICB2YXIgY2VudGVyWSA9IHJvdFkgKiBjb3NBbmdsZSArIHJvdFggKiBzaW5BbmdsZTtcbiAgICByZXR1cm4gW2NlbnRlclgsIGNlbnRlclldO1xufVxuZXhwb3J0IGRlZmF1bHQgVmlldztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkL2NvbW1vblxuICovXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSB6b29tIGZvciBkZWZhdWx0IHRpbGUgZ3JpZHMuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfTUFYX1pPT00gPSA0Mjtcbi8qKlxuICogRGVmYXVsdCB0aWxlIHNpemUuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfVElMRV9TSVpFID0gMjU2O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3SGludFxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBTklNQVRJTkc6IDAsXG4gICAgSU5URVJBQ1RJTkc6IDEsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlld0hpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ljb25JbWFnZUNhY2hlXG4gKi9cbmltcG9ydCB7IGFzU3RyaW5nIH0gZnJvbSAnLi4vY29sb3IuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTaW5nbGV0b24gY2xhc3MuIEF2YWlsYWJsZSB0aHJvdWdoIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+c2hhcmVkfS5cbiAqL1xudmFyIEljb25JbWFnZUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEljb25JbWFnZUNhY2hlKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZVNpemVfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSAzMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNhY2hlXyA9IHt9O1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZV8gPSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlU2l6ZV8gPiB0aGlzLm1heENhY2hlU2l6ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuZXhwaXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZV8pIHtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkltYWdlID0gdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoKGkrKyAmIDMpID09PSAwICYmICFpY29uSW1hZ2UuaGFzTGlzdGVuZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgLS10aGlzLmNhY2hlU2l6ZV87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBJY29uIGltYWdlLlxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgICAgICAgdmFyIGtleSA9IGdldEtleShzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcik7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5jYWNoZV8gPyB0aGlzLmNhY2hlX1trZXldIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdH0gaWNvbkltYWdlIEljb24gaW1hZ2UuXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKSB7XG4gICAgICAgIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICAgICAgICB0aGlzLmNhY2hlX1trZXldID0gaWNvbkltYWdlO1xuICAgICAgICArK3RoaXMuY2FjaGVTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FjaGUgc2l6ZSBvZiB0aGUgaWNvbiBjYWNoZS4gRGVmYXVsdCBpcyBgMzJgLiBDaGFuZ2UgdGhpcyB2YWx1ZSB3aGVuXG4gICAgICogeW91ciBtYXAgdXNlcyBtb3JlIHRoYW4gMzIgZGlmZmVyZW50IGljb24gaW1hZ2VzIGFuZCB5b3UgYXJlIG5vdCBjYWNoaW5nIGljb25cbiAgICAgKiBzdHlsZXMgb24gdGhlIGFwcGxpY2F0aW9uIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhDYWNoZVNpemUgQ2FjaGUgbWF4IHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKG1heENhY2hlU2l6ZSkge1xuICAgICAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSBtYXhDYWNoZVNpemU7XG4gICAgICAgIHRoaXMuZXhwaXJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gSWNvbkltYWdlQ2FjaGU7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENhY2hlIGtleS5cbiAqL1xuZnVuY3Rpb24gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gICAgdmFyIGNvbG9yU3RyaW5nID0gY29sb3IgPyBhc1N0cmluZyhjb2xvcikgOiAnbnVsbCc7XG4gICAgcmV0dXJuIGNyb3NzT3JpZ2luICsgJzonICsgc3JjICsgJzonICsgY29sb3JTdHJpbmc7XG59XG5leHBvcnQgZGVmYXVsdCBJY29uSW1hZ2VDYWNoZTtcbi8qKlxuICogVGhlIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+SWNvbkltYWdlQ2FjaGV9IGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29ufkljb259IGltYWdlcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGFyZWQgPSBuZXcgSWNvbkltYWdlQ2FjaGUoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUljb25JbWFnZUNhY2hlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb2xvclxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBBIGNvbG9yIHJlcHJlc2VudGVkIGFzIGEgc2hvcnQgYXJyYXkgW3JlZCwgZ3JlZW4sIGJsdWUsIGFscGhhXS5cbiAqIHJlZCwgZ3JlZW4sIGFuZCBibHVlIHNob3VsZCBiZSBpbnRlZ2VycyBpbiB0aGUgcmFuZ2UgMC4uMjU1IGluY2x1c2l2ZS5cbiAqIGFscGhhIHNob3VsZCBiZSBhIGZsb2F0IGluIHRoZSByYW5nZSAwLi4xIGluY2x1c2l2ZS4gSWYgbm8gYWxwaGEgdmFsdWUgaXNcbiAqIGdpdmVuIHRoZW4gYDFgIHdpbGwgYmUgdXNlZC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBDb2xvclxuICogQGFwaVxuICovXG4vKipcbiAqIFRoaXMgUmVnRXhwIG1hdGNoZXMgIyBmb2xsb3dlZCBieSAzLCA0LCA2LCBvciA4IGhleCBkaWdpdHMuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgSEVYX0NPTE9SX1JFXyA9IC9eIyhbYS1mMC05XXszfXxbYS1mMC05XXs0fSg/OlthLWYwLTldezJ9KXswLDJ9KSQvaTtcbi8qKlxuICogUmVndWxhciBleHByZXNzaW9uIGZvciBtYXRjaGluZyBwb3RlbnRpYWwgbmFtZWQgY29sb3Igc3R5bGUgc3RyaW5ncy5cbiAqIEBjb25zdFxuICogQHR5cGUge1JlZ0V4cH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBOQU1FRF9DT0xPUl9SRV8gPSAvXihbYS16XSopJHxeaHNsYT9cXCguKlxcKSQvaTtcbi8qKlxuICogUmV0dXJuIHRoZSBjb2xvciBhcyBhbiByZ2JhIHN0cmluZy5cbiAqIEBwYXJhbSB7Q29sb3J8c3RyaW5nfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gUmdiYSBzdHJpbmcuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc1N0cmluZyhjb2xvcikge1xuICAgIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZyhjb2xvcik7XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm4gbmFtZWQgY29sb3IgYXMgYW4gcmdiYSBzdHJpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3IgTmFtZWQgY29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJnYiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGZyb21OYW1lZChjb2xvcikge1xuICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsLnN0eWxlLmNvbG9yID0gY29sb3I7XG4gICAgaWYgKGVsLnN0eWxlLmNvbG9yICE9PSAnJykge1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgdmFyIHJnYiA9IGdldENvbXB1dGVkU3R5bGUoZWwpLmNvbG9yO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTtcbiAgICAgICAgcmV0dXJuIHJnYjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqL1xuZXhwb3J0IHZhciBmcm9tU3RyaW5nID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBXZSBtYWludGFpbiBhIHNtYWxsIGNhY2hlIG9mIHBhcnNlZCBzdHJpbmdzLiAgVG8gcHJvdmlkZSBjaGVhcCBMUlUtbGlrZVxuICAgIC8vIHNlbWFudGljcywgd2hlbmV2ZXIgdGhlIGNhY2hlIGdyb3dzIHRvbyBsYXJnZSB3ZSBzaW1wbHkgZGVsZXRlIGFuXG4gICAgLy8gYXJiaXRyYXJ5IDI1JSBvZiB0aGUgZW50cmllcy5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHZhciBNQVhfQ0FDSEVfU0laRSA9IDEwMjQ7XG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIENvbG9yPn1cbiAgICAgKi9cbiAgICB2YXIgY2FjaGUgPSB7fTtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHZhciBjYWNoZVNpemUgPSAwO1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICAgICAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocykge1xuICAgICAgICB2YXIgY29sb3I7XG4gICAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShzKSkge1xuICAgICAgICAgICAgY29sb3IgPSBjYWNoZVtzXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjYWNoZVNpemUgPj0gTUFYX0NBQ0hFX1NJWkUpIHtcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaSsrICYgMykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBjYWNoZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgLS1jYWNoZVNpemU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xvciA9IGZyb21TdHJpbmdJbnRlcm5hbF8ocyk7XG4gICAgICAgICAgICBjYWNoZVtzXSA9IGNvbG9yO1xuICAgICAgICAgICAgKytjYWNoZVNpemU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH0pO1xufSkoKTtcbi8qKlxuICogUmV0dXJuIHRoZSBjb2xvciBhcyBhbiBhcnJheS4gVGhpcyBmdW5jdGlvbiBtYWludGFpbnMgYSBjYWNoZSBvZiBjYWxjdWxhdGVkXG4gKiBhcnJheXMgd2hpY2ggbWVhbnMgdGhlIHJlc3VsdCBzaG91bGQgbm90IGJlIG1vZGlmaWVkLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNBcnJheShjb2xvcikge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZnJvbVN0cmluZyhjb2xvcik7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICovXG5mdW5jdGlvbiBmcm9tU3RyaW5nSW50ZXJuYWxfKHMpIHtcbiAgICB2YXIgciwgZywgYiwgYSwgY29sb3I7XG4gICAgaWYgKE5BTUVEX0NPTE9SX1JFXy5leGVjKHMpKSB7XG4gICAgICAgIHMgPSBmcm9tTmFtZWQocyk7XG4gICAgfVxuICAgIGlmIChIRVhfQ09MT1JfUkVfLmV4ZWMocykpIHtcbiAgICAgICAgLy8gaGV4XG4gICAgICAgIHZhciBuID0gcy5sZW5ndGggLSAxOyAvLyBudW1iZXIgb2YgaGV4IGRpZ2l0c1xuICAgICAgICB2YXIgZCA9IC8vIG51bWJlciBvZiBkaWdpdHMgcGVyIGNoYW5uZWxcbiAgICAgICAgIHZvaWQgMDsgLy8gbnVtYmVyIG9mIGRpZ2l0cyBwZXIgY2hhbm5lbFxuICAgICAgICBpZiAobiA8PSA0KSB7XG4gICAgICAgICAgICBkID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGQgPSAyO1xuICAgICAgICB9XG4gICAgICAgIHZhciBoYXNBbHBoYSA9IG4gPT09IDQgfHwgbiA9PT0gODtcbiAgICAgICAgciA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAwICogZCwgZCksIDE2KTtcbiAgICAgICAgZyA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAxICogZCwgZCksIDE2KTtcbiAgICAgICAgYiA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAyICogZCwgZCksIDE2KTtcbiAgICAgICAgaWYgKGhhc0FscGhhKSB7XG4gICAgICAgICAgICBhID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDMgKiBkLCBkKSwgMTYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYSA9IDI1NTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZCA9PSAxKSB7XG4gICAgICAgICAgICByID0gKHIgPDwgNCkgKyByO1xuICAgICAgICAgICAgZyA9IChnIDw8IDQpICsgZztcbiAgICAgICAgICAgIGIgPSAoYiA8PCA0KSArIGI7XG4gICAgICAgICAgICBpZiAoaGFzQWxwaGEpIHtcbiAgICAgICAgICAgICAgICBhID0gKGEgPDwgNCkgKyBhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbG9yID0gW3IsIGcsIGIsIGEgLyAyNTVdO1xuICAgIH1cbiAgICBlbHNlIGlmIChzLmluZGV4T2YoJ3JnYmEoJykgPT0gMCkge1xuICAgICAgICAvLyByZ2JhKClcbiAgICAgICAgY29sb3IgPSBzLnNsaWNlKDUsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgICAgICBub3JtYWxpemUoY29sb3IpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzLmluZGV4T2YoJ3JnYignKSA9PSAwKSB7XG4gICAgICAgIC8vIHJnYigpXG4gICAgICAgIGNvbG9yID0gcy5zbGljZSg0LCAtMSkuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgY29sb3IucHVzaCgxKTtcbiAgICAgICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFzc2VydChmYWxzZSwgMTQpOyAvLyBJbnZhbGlkIGNvbG9yXG4gICAgfVxuICAgIHJldHVybiBjb2xvcjtcbn1cbi8qKlxuICogVE9ETyB0aGlzIGZ1bmN0aW9uIGlzIG9ubHkgdXNlZCBpbiB0aGUgdGVzdCwgd2UgcHJvYmFibHkgc2hvdWxkbid0IGV4cG9ydCBpdFxuICogQHBhcmFtIHtDb2xvcn0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ2xhbXBlZCBjb2xvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vcm1hbGl6ZShjb2xvcikge1xuICAgIGNvbG9yWzBdID0gY2xhbXAoKGNvbG9yWzBdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gICAgY29sb3JbMV0gPSBjbGFtcCgoY29sb3JbMV0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgICBjb2xvclsyXSA9IGNsYW1wKChjb2xvclsyXSArIDAuNSkgfCAwLCAwLCAyNTUpO1xuICAgIGNvbG9yWzNdID0gY2xhbXAoY29sb3JbM10sIDAsIDEpO1xuICAgIHJldHVybiBjb2xvcjtcbn1cbi8qKlxuICogQHBhcmFtIHtDb2xvcn0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nKGNvbG9yKSB7XG4gICAgdmFyIHIgPSBjb2xvclswXTtcbiAgICBpZiAociAhPSAociB8IDApKSB7XG4gICAgICAgIHIgPSAociArIDAuNSkgfCAwO1xuICAgIH1cbiAgICB2YXIgZyA9IGNvbG9yWzFdO1xuICAgIGlmIChnICE9IChnIHwgMCkpIHtcbiAgICAgICAgZyA9IChnICsgMC41KSB8IDA7XG4gICAgfVxuICAgIHZhciBiID0gY29sb3JbMl07XG4gICAgaWYgKGIgIT0gKGIgfCAwKSkge1xuICAgICAgICBiID0gKGIgKyAwLjUpIHwgMDtcbiAgICB9XG4gICAgdmFyIGEgPSBjb2xvclszXSA9PT0gdW5kZWZpbmVkID8gMSA6IGNvbG9yWzNdO1xuICAgIHJldHVybiAncmdiYSgnICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJywnICsgYSArICcpJztcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgc3RyaW5nIGlzIGFjdHVhbGx5IGEgdmFsaWQgY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nQ29sb3Iocykge1xuICAgIGlmIChOQU1FRF9DT0xPUl9SRV8udGVzdChzKSkge1xuICAgICAgICBzID0gZnJvbU5hbWVkKHMpO1xuICAgIH1cbiAgICByZXR1cm4gKEhFWF9DT0xPUl9SRV8udGVzdChzKSB8fCBzLmluZGV4T2YoJ3JnYmEoJykgPT09IDAgfHwgcy5pbmRleE9mKCdyZ2IoJykgPT09IDApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29sb3IuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9NYXBcbiAqL1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIG1ha2VJbnZlcnNlIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGdldFdpZHRoIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHNoYXJlZCBhcyBpY29uSW1hZ2VDYWNoZSB9IGZyb20gJy4uL3N0eWxlL0ljb25JbWFnZUNhY2hlLmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IHdyYXBYIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIEhpdE1hdGNoXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZGlzdGFuY2VTcSBTcXVhcmVkIGRpc3RhbmNlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIE1hcFJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcFJlbmRlcmVyKG1hcCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnQgPSBmdW5jdGlvbiAodHlwZSwgZnJhbWVTdGF0ZSkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuY2FsY3VsYXRlTWF0cmljZXMyRCA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTtcbiAgICAgICAgdmFyIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTtcbiAgICAgICAgY29tcG9zZVRyYW5zZm9ybShjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgZnJhbWVTdGF0ZS5zaXplWzBdIC8gMiwgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMiwgMSAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCAtMSAvIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCAtdmlld1N0YXRlLnJvdGF0aW9uLCAtdmlld1N0YXRlLmNlbnRlclswXSwgLXZpZXdTdGF0ZS5jZW50ZXJbMV0pO1xuICAgICAgICBtYWtlSW52ZXJzZShwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrV3JhcHBlZCBDaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7U30gdGhpc0FyZyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBjYWxsYmFja2AuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBVLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEBwYXJhbSB7VX0gdGhpc0FyZzIgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFMsVCxVXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBjYWxsYmFjaywgdGhpc0FyZywgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcyKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gbWFuYWdlZCBNYW5hZ2VkIGxheWVyLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2V9IGZlYXR1cmUgRmVhdHVyZS5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICAgICAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUobWFuYWdlZCwgZmVhdHVyZSwgbGF5ZXIsIGdlb21ldHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBmZWF0dXJlLCBtYW5hZ2VkID8gbGF5ZXIgOiBudWxsLCBnZW9tZXRyeSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHRyYW5zbGF0ZWRDb29yZGluYXRlID0gd3JhcFgoY29vcmRpbmF0ZS5zbGljZSgpLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIG9mZnNldHMgPSBbWzAsIDBdXTtcbiAgICAgICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJiBjaGVja1dyYXBwZWQpIHtcbiAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgICAgICBvZmZzZXRzLnB1c2goWy13b3JsZFdpZHRoLCAwXSwgW3dvcmxkV2lkdGgsIDBdKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIHZhciBudW1MYXllcnMgPSBsYXllclN0YXRlcy5sZW5ndGg7XG4gICAgICAgIHZhciBtYXRjaGVzID0gLyoqIEB0eXBlIHtBcnJheTxIaXRNYXRjaDxUPj59ICovIChbXSk7XG4gICAgICAgIHZhciB0bXBDb29yZCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBudW1MYXllcnMgLSAxOyBqID49IDA7IC0taikge1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNbal07XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSAmJlxuICAgICAgICAgICAgICAgICAgICBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSAmJlxuICAgICAgICAgICAgICAgICAgICBsYXllckZpbHRlci5jYWxsKHRoaXNBcmcyLCBsYXllcikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSBsYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXllclJlbmRlcmVyICYmIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gc291cmNlLmdldFdyYXBYKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRyYW5zbGF0ZWRDb29yZGluYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBjb29yZGluYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrXzEgPSBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZS5iaW5kKG51bGwsIGxheWVyU3RhdGUubWFuYWdlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBDb29yZFswXSA9IGNvb3JkaW5hdGVzWzBdICsgb2Zmc2V0c1tpXVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcENvb3JkWzFdID0gY29vcmRpbmF0ZXNbMV0gKyBvZmZzZXRzW2ldWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbGF5ZXJSZW5kZXJlci5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSh0bXBDb29yZCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFja18xLCBtYXRjaGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3JkZXIgPSAxIC8gbWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgIG1hdGNoZXMuZm9yRWFjaChmdW5jdGlvbiAobSwgaSkgeyByZXR1cm4gKG0uZGlzdGFuY2VTcSArPSBpICogb3JkZXIpOyB9KTtcbiAgICAgICAgbWF0Y2hlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhLmRpc3RhbmNlU3EgLSBiLmRpc3RhbmNlU3E7IH0pO1xuICAgICAgICBtYXRjaGVzLnNvbWUoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID0gbS5jYWxsYmFjayhtLmZlYXR1cmUsIG0ubGF5ZXIsIG0uZ2VvbWV0cnkpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrIExheWVyXG4gICAgICogICAgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNoZWNrV3JhcHBlZCBDaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHRoZXJlIGEgZmVhdHVyZSBhdCB0aGUgZ2l2ZW4gY29vcmRpbmF0ZT9cbiAgICAgKiBAdGVtcGxhdGUgVVxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBsYXllckZpbHRlciwgdGhpc0FyZykge1xuICAgICAgICB2YXIgaGFzRmVhdHVyZSA9IHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIFRSVUUsIHRoaXMsIGxheWVyRmlsdGVyLCB0aGlzQXJnKTtcbiAgICAgICAgcmV0dXJuIGhhc0ZlYXR1cmUgIT09IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlci5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUucmVuZGVyRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgaWYgKGljb25JbWFnZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKGV4cGlyZUljb25DYWNoZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNYXBSZW5kZXJlcjtcbn0oRGlzcG9zYWJsZSkpO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqL1xuZnVuY3Rpb24gZXhwaXJlSWNvbkNhY2hlKG1hcCwgZnJhbWVTdGF0ZSkge1xuICAgIGljb25JbWFnZUNhY2hlLmV4cGlyZSgpO1xufVxuZXhwb3J0IGRlZmF1bHQgTWFwUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Nzc1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZvbnRQYXJhbWV0ZXJzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc3R5bGUgU3R5bGUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdmFyaWFudCBWYXJpYW50LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHdlaWdodCBXZWlnaHQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gc2l6ZSBTaXplLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGxpbmVIZWlnaHQgTGluZUhlaWdodC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmYW1pbHkgRmFtaWx5LlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBmYW1pbGllcyBGYW1pbGllcy5cbiAqL1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciBoaWRkZW4gZmVhdHVyZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfSElEREVOID0gJ29sLWhpZGRlbic7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdG8gaGF2ZSB0aGVtIHNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1NFTEVDVEFCTEUgPSAnb2wtc2VsZWN0YWJsZSc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdG8gaGF2ZSB0aGVtIHVuc2VsZWN0YWJsZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfVU5TRUxFQ1RBQkxFID0gJ29sLXVuc2VsZWN0YWJsZSc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIHVuc3VwcG9ydGVkIGZlYXR1cmUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1VOU1VQUE9SVEVEID0gJ29sLXVuc3VwcG9ydGVkJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgY29udHJvbHMuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0NPTlRST0wgPSAnb2wtY29udHJvbCc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgdGhhdCB3ZSdsbCBnaXZlIHRoZSBET00gZWxlbWVudHMgdGhhdCBhcmUgY29sbGFwc2VkLCBpLmUuXG4gKiB0byB0aG9zZSBlbGVtZW50cyB3aGljaCB1c3VhbGx5IGNhbiBiZSBleHBhbmRlZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfQ09MTEFQU0VEID0gJ29sLWNvbGxhcHNlZCc7XG4vKipcbiAqIEZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAxMzU2OTcvcmVnZXgtdG8tcGFyc2UtYW55LWNzcy1mb250XG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG52YXIgZm9udFJlZ0V4ID0gbmV3IFJlZ0V4cChbXG4gICAgJ15cXFxccyooPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KGl0YWxpY3xvYmxpcXVlKSk/KScsXG4gICAgJyg/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oc21hbGwtY2FwcykpPyknLFxuICAgICcoPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KGJvbGQoPzplcik/fGxpZ2h0ZXJ8WzEtOV0wMCApKT8pJyxcbiAgICAnKD86KD86bm9ybWFsfFxcXFwxfFxcXFwyfFxcXFwzKVxcXFxzKil7MCwzfSgoPzp4eD8tKT8nLFxuICAgICcoPzpzbWFsbHxsYXJnZSl8bWVkaXVtfHNtYWxsZXJ8bGFyZ2VyfFtcXFxcLlxcXFxkXSsoPzpcXFxcJXxpbnxbY2VtXW18ZXh8cFtjdHhdKSknLFxuICAgICcoPzpcXFxccypcXFxcL1xcXFxzKihub3JtYWx8W1xcXFwuXFxcXGRdKyg/OlxcXFwlfGlufFtjZW1dbXxleHxwW2N0eF0pPykpJyxcbiAgICAnP1xcXFxzKihbLSxcXFxcXCJcXFxcXFwnXFxcXHNhLXpdKz8pXFxcXHMqJCcsXG5dLmpvaW4oJycpLCAnaScpO1xudmFyIGZvbnRSZWdFeE1hdGNoSW5kZXggPSBbXG4gICAgJ3N0eWxlJyxcbiAgICAndmFyaWFudCcsXG4gICAgJ3dlaWdodCcsXG4gICAgJ3NpemUnLFxuICAgICdsaW5lSGVpZ2h0JyxcbiAgICAnZmFtaWx5Jyxcbl07XG4vKipcbiAqIEdldCB0aGUgbGlzdCBvZiBmb250IGZhbWlsaWVzIGZyb20gYSBmb250IHNwZWMuICBOb3RlIHRoYXQgdGhpcyBkb2Vzbid0IHdvcmtcbiAqIGZvciBmb250IGZhbWlsaWVzIHRoYXQgaGF2ZSBjb21tYXMgaW4gdGhlbS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBUaGUgQ1NTIGZvbnQgcHJvcGVydHkuXG4gKiBAcmV0dXJuIHtGb250UGFyYW1ldGVyc30gVGhlIGZvbnQgcGFyYW1ldGVycyAob3IgbnVsbCBpZiB0aGUgaW5wdXQgc3BlYyBpcyBpbnZhbGlkKS5cbiAqL1xuZXhwb3J0IHZhciBnZXRGb250UGFyYW1ldGVycyA9IGZ1bmN0aW9uIChmb250U3BlYykge1xuICAgIHZhciBtYXRjaCA9IGZvbnRTcGVjLm1hdGNoKGZvbnRSZWdFeCk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIHN0eWxlID0gLyoqIEB0eXBlIHtGb250UGFyYW1ldGVyc30gKi8gKHtcbiAgICAgICAgbGluZUhlaWdodDogJ25vcm1hbCcsXG4gICAgICAgIHNpemU6ICcxLjJlbScsXG4gICAgICAgIHN0eWxlOiAnbm9ybWFsJyxcbiAgICAgICAgd2VpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgdmFyaWFudDogJ25vcm1hbCcsXG4gICAgfSk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZm9udFJlZ0V4TWF0Y2hJbmRleC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IG1hdGNoW2kgKyAxXTtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0eWxlW2ZvbnRSZWdFeE1hdGNoSW5kZXhbaV1dID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3R5bGUuZmFtaWxpZXMgPSBzdHlsZS5mYW1pbHkuc3BsaXQoLyxcXHM/Lyk7XG4gICAgcmV0dXJuIHN0eWxlO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzcy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhc1xuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4uL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7IGdldEZvbnRQYXJhbWV0ZXJzIH0gZnJvbSAnLi4vY3NzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmlsbFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IGZpbGxTdHlsZSBGaWxsU3R5bGUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYgTGFiZWxcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWR0aCBXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0LlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmd8bnVtYmVyPn0gY29udGV4dEluc3RydWN0aW9ucyBDb250ZXh0SW5zdHJ1Y3Rpb25zLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpbGxTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY3VycmVudEZpbGxTdHlsZV0gQ3VycmVudCBGaWxsU3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtjdXJyZW50U3Ryb2tlU3R5bGVdIEN1cnJlbnQgU3Ryb2tlU3R5bGUuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtjdXJyZW50TGluZUNhcF0gQ3VycmVudCBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBjdXJyZW50TGluZURhc2ggQ3VycmVudCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVEYXNoT2Zmc2V0XSBDdXJyZW50IExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gW2N1cnJlbnRMaW5lSm9pbl0gQ3VycmVudCBMaW5lSm9pbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVXaWR0aF0gQ3VycmVudCBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRNaXRlckxpbWl0XSBDdXJyZW50IE1pdGVyTGltaXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xhc3RTdHJva2VdIExhc3Qgc3Ryb2tlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbZmlsbFN0eWxlXSBGaWxsU3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtzdHJva2VTdHlsZV0gU3Ryb2tlU3R5bGUuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtsaW5lQ2FwXSBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZURhc2hPZmZzZXRdIExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gW2xpbmVKb2luXSBMaW5lSm9pbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZVdpZHRoXSBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pdGVyTGltaXRdIE1pdGVyTGltaXQuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3Ryb2tlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUNhcH0gbGluZUNhcCBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lRGFzaE9mZnNldCBMaW5lRGFzaE9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IGxpbmVKb2luIExpbmVKb2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVXaWR0aCBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWl0ZXJMaW1pdCBNaXRlckxpbWl0LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBzdHJva2VTdHlsZSBTdHJva2VTdHlsZS5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0U3RhdGVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RleHRBbGlnbl0gVGV4dEFsaWduLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHRleHRCYXNlbGluZSBUZXh0QmFzZWxpbmUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3BsYWNlbWVudF0gUGxhY2VtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhBbmdsZV0gTWF4QW5nbGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVyZmxvd10gT3ZlcmZsb3cuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL0ZpbGwuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRGaWxsXSBCYWNrZ3JvdW5kRmlsbC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFtiYWNrZ3JvdW5kU3Ryb2tlXSBCYWNrZ3JvdW5kU3Ryb2tlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFtzY2FsZV0gU2NhbGUuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtwYWRkaW5nXSBQYWRkaW5nLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNlcmlhbGl6YWJsZUluc3RydWN0aW9uc1xuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaW5zdHJ1Y3Rpb25zLlxuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaGl0IGRldGVjdGlvbiBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIFRoZSBhcnJheSBvZiBhbGwgY29vcmRpbmF0ZXMuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBUZXh0U3RhdGU+fSBbdGV4dFN0YXRlc10gVGhlIHRleHQgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgRmlsbFN0YXRlPn0gW2ZpbGxTdGF0ZXNdIFRoZSBmaWxsIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIFN0cm9rZVN0YXRlPn0gW3N0cm9rZVN0YXRlc10gVGhlIHN0cm9rZSBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdDxudW1iZXIsIGltcG9ydChcIi4vY2FudmFzL0V4ZWN1dG9yLmpzXCIpLlJlcGxheUltYWdlT3JMYWJlbEFyZ3M+fSBEZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XG4gKi9cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRGb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdEZpbGxTdHlsZSA9ICcjMDAwJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Q2FudmFzTGluZUNhcH1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUNhcCA9ICdyb3VuZCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoID0gW107XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZURhc2hPZmZzZXQgPSAwO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUpvaW4gPSAncm91bmQnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdE1pdGVyTGltaXQgPSAxMDtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0U3Ryb2tlU3R5bGUgPSAnIzAwMCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEFsaWduID0gJ2NlbnRlcic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZVdpZHRoID0gMTtcbi8qKlxuICogQHR5cGUge0Jhc2VPYmplY3R9XG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tlZEZvbnRzID0gbmV3IEJhc2VPYmplY3QoKTtcbi8qKlxuICogVGhlIGxhYmVsIGNhY2hlIGZvciB0ZXh0IHJlbmRlcmluZy4gVG8gY2hhbmdlIHRoZSBkZWZhdWx0IGNhY2hlIHNpemUgb2YgMjA0OFxuICogZW50cmllcywgdXNlIHtAbGluayBtb2R1bGU6b2wvc3RydWN0cy9MUlVDYWNoZX5MUlVDYWNoZSNzZXRTaXplIGNhY2hlLnNldFNpemUoKX0uXG4gKiBEZXByZWNhdGVkIC0gdGhlcmUgaXMgbm8gbGFiZWwgY2FjaGUgYW55IG1vcmUuXG4gKiBAdHlwZSB7P31cbiAqIEBhcGlcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbGFiZWxDYWNoZSA9IG5ldyBFdmVudFRhcmdldCgpO1xubGFiZWxDYWNoZS5zZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUud2FybignbGFiZWxDYWNoZSBpcyBkZXByZWNhdGVkLicpOyAvL2VzbGludC1kaXNhYmxlLWxpbmVcbn07XG4vKipcbiAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gKi9cbnZhciBtZWFzdXJlQ29udGV4dCA9IG51bGw7XG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciBtZWFzdXJlRm9udDtcbi8qKlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICovXG5leHBvcnQgdmFyIHRleHRIZWlnaHRzID0ge307XG4vKipcbiAqIENsZWFycyB0aGUgbGFiZWwgY2FjaGUgd2hlbiBhIGZvbnQgYmVjb21lcyBhdmFpbGFibGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udFNwZWMgQ1NTIGZvbnQgc3BlYy5cbiAqL1xuZXhwb3J0IHZhciByZWdpc3RlckZvbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXRyaWVzID0gMTAwO1xuICAgIHZhciBzaXplID0gJzMycHggJztcbiAgICB2YXIgcmVmZXJlbmNlRm9udHMgPSBbJ21vbm9zcGFjZScsICdzZXJpZiddO1xuICAgIHZhciBsZW4gPSByZWZlcmVuY2VGb250cy5sZW5ndGg7XG4gICAgdmFyIHRleHQgPSAnd215dHppbFdNWVRaSUxAIy8mPyQlMTBcXHVGMDEzJztcbiAgICB2YXIgaW50ZXJ2YWwsIHJlZmVyZW5jZVdpZHRoO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3R5bGUgQ3NzIGZvbnQtc3R5bGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9udFdlaWdodCBDc3MgZm9udC13ZWlnaHRcbiAgICAgKiBAcGFyYW0geyp9IGZvbnRGYW1pbHkgQ3NzIGZvbnQtZmFtaWx5XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gRm9udCB3aXRoIHN0eWxlIGFuZCB3ZWlnaHQgaXMgYXZhaWxhYmxlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBdmFpbGFibGUoZm9udFN0eWxlLCBmb250V2VpZ2h0LCBmb250RmFtaWx5KSB7XG4gICAgICAgIHZhciBhdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIgcmVmZXJlbmNlRm9udCA9IHJlZmVyZW5jZUZvbnRzW2ldO1xuICAgICAgICAgICAgcmVmZXJlbmNlV2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnRTdHlsZSArICcgJyArIGZvbnRXZWlnaHQgKyAnICcgKyBzaXplICsgcmVmZXJlbmNlRm9udCwgdGV4dCk7XG4gICAgICAgICAgICBpZiAoZm9udEZhbWlseSAhPSByZWZlcmVuY2VGb250KSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250U3R5bGUgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0ICtcbiAgICAgICAgICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSArXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHkgK1xuICAgICAgICAgICAgICAgICAgICAnLCcgK1xuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VGb250LCB0ZXh0KTtcbiAgICAgICAgICAgICAgICAvLyBJZiB3aWR0aCBhbmQgcmVmZXJlbmNlV2lkdGggYXJlIHRoZSBzYW1lLCB0aGVuIHRoZSBmYWxsYmFjayB3YXMgdXNlZFxuICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgb2YgdGhlIGZvbnQgd2Ugd2FudGVkLCBzbyB0aGUgZm9udCBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZSA9IGF2YWlsYWJsZSAmJiB3aWR0aCAhPSByZWZlcmVuY2VXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXZhaWxhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoZWNrKCkge1xuICAgICAgICB2YXIgZG9uZSA9IHRydWU7XG4gICAgICAgIHZhciBmb250cyA9IGNoZWNrZWRGb250cy5nZXRLZXlzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZvbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmb250ID0gZm9udHNbaV07XG4gICAgICAgICAgICBpZiAoY2hlY2tlZEZvbnRzLmdldChmb250KSA8IHJldHJpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBdmFpbGFibGUuYXBwbHkodGhpcywgZm9udC5zcGxpdCgnXFxuJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyKHRleHRIZWlnaHRzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgbG9hZGVkIGZvbnRzIGFyZSBwaWNrZWQgdXAgYnkgU2FmYXJpXG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUZvbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgcmV0cmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkRm9udHMuc2V0KGZvbnQsIGNoZWNrZWRGb250cy5nZXQoZm9udCkgKyAxLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICBpbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgICAgIHZhciBmb250ID0gZ2V0Rm9udFBhcmFtZXRlcnMoZm9udFNwZWMpO1xuICAgICAgICBpZiAoIWZvbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmFtaWxpZXMgPSBmb250LmZhbWlsaWVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmYW1pbGllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZmFtaWx5ID0gZmFtaWxpZXNbaV07XG4gICAgICAgICAgICB2YXIga2V5ID0gZm9udC5zdHlsZSArICdcXG4nICsgZm9udC53ZWlnaHQgKyAnXFxuJyArIGZhbWlseTtcbiAgICAgICAgICAgIGlmIChjaGVja2VkRm9udHMuZ2V0KGtleSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCByZXRyaWVzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXZhaWxhYmxlKGZvbnQuc3R5bGUsIGZvbnQud2VpZ2h0LCBmYW1pbHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVydmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoY2hlY2ssIDMyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250IHRvIHVzZSBmb3IgbWVhc3VyaW5nLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBNZWFzdXJlbWVudC5cbiAqL1xuZXhwb3J0IHZhciBtZWFzdXJlVGV4dEhlaWdodCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAqL1xuICAgIHZhciBtZWFzdXJlRWxlbWVudDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgICAgIHZhciBoZWlnaHQgPSB0ZXh0SGVpZ2h0c1tmb250U3BlY107XG4gICAgICAgIGlmIChoZWlnaHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9udCA9IGdldEZvbnRQYXJhbWV0ZXJzKGZvbnRTcGVjKTtcbiAgICAgICAgICAgICAgICB2YXIgbWV0cmljcyA9IG1lYXN1cmVUZXh0KGZvbnRTcGVjLCAnxb1nJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSBpc05hTihOdW1iZXIoZm9udC5saW5lSGVpZ2h0KSlcbiAgICAgICAgICAgICAgICAgICAgPyAxLjJcbiAgICAgICAgICAgICAgICAgICAgOiBOdW1iZXIoZm9udC5saW5lSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPVxuICAgICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0ICpcbiAgICAgICAgICAgICAgICAgICAgICAgIChtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50ICsgbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtZWFzdXJlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5pbm5lckhUTUwgPSAnTSc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMCc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubGVmdCA9ICctOTk5OTlweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnQgPSBmb250U3BlYztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lYXN1cmVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBtZWFzdXJlRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtZWFzdXJlRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0SGVpZ2h0c1tmb250U3BlY10gPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRleHQuXG4gKiBAcmV0dXJuIHtUZXh0TWV0cmljc30gVGV4dCBtZXRyaWNzLlxuICovXG5mdW5jdGlvbiBtZWFzdXJlVGV4dChmb250LCB0ZXh0KSB7XG4gICAgaWYgKCFtZWFzdXJlQ29udGV4dCkge1xuICAgICAgICBtZWFzdXJlQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgICB9XG4gICAgaWYgKGZvbnQgIT0gbWVhc3VyZUZvbnQpIHtcbiAgICAgICAgbWVhc3VyZUNvbnRleHQuZm9udCA9IGZvbnQ7XG4gICAgICAgIG1lYXN1cmVGb250ID0gbWVhc3VyZUNvbnRleHQuZm9udDtcbiAgICB9XG4gICAgcmV0dXJuIG1lYXN1cmVDb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dC5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIHRleHQpIHtcbiAgICByZXR1cm4gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkud2lkdGg7XG59XG4vKipcbiAqIE1lYXN1cmUgdGV4dCB3aWR0aCB1c2luZyBhIGNhY2hlLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgVGhlIGZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBtZWFzdXJlLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fSBjYWNoZSBBIGxvb2t1cCBvZiBjYWNoZWQgd2lkdGhzIGJ5IHRleHQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB0ZXh0IHdpZHRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZUFuZENhY2hlVGV4dFdpZHRoKGZvbnQsIHRleHQsIGNhY2hlKSB7XG4gICAgaWYgKHRleHQgaW4gY2FjaGUpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlW3RleHRdO1xuICAgIH1cbiAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIHRleHQpO1xuICAgIGNhY2hlW3RleHRdID0gd2lkdGg7XG4gICAgcmV0dXJuIHdpZHRoO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250IHRvIHVzZSBmb3IgbWVhc3VyaW5nLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBsaW5lcyBMaW5lcyB0byBtZWFzdXJlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB3aWR0aHMgQXJyYXkgd2lsbCBiZSBwb3B1bGF0ZWQgd2l0aCB0aGUgd2lkdGhzIG9mXG4gKiBlYWNoIGxpbmUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoIG9mIHRoZSB3aG9sZSB0ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZVRleHRXaWR0aHMoZm9udCwgbGluZXMsIHdpZHRocykge1xuICAgIHZhciBudW1MaW5lcyA9IGxpbmVzLmxlbmd0aDtcbiAgICB2YXIgd2lkdGggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtTGluZXM7ICsraSkge1xuICAgICAgICB2YXIgY3VycmVudFdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250LCBsaW5lc1tpXSk7XG4gICAgICAgIHdpZHRoID0gTWF0aC5tYXgod2lkdGgsIGN1cnJlbnRXaWR0aCk7XG4gICAgICAgIHdpZHRocy5wdXNoKGN1cnJlbnRXaWR0aCk7XG4gICAgfVxuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIFggb2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFkgWSBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVBdE9mZnNldChjb250ZXh0LCByb3RhdGlvbiwgb2Zmc2V0WCwgb2Zmc2V0WSkge1xuICAgIGlmIChyb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICAgICAgY29udGV4dC5yb3RhdGUocm90YXRpb24pO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgtb2Zmc2V0WCwgLW9mZnNldFkpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybXxudWxsfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAqIEBwYXJhbSB7TGFiZWx8SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBsYWJlbE9ySW1hZ2UgTGFiZWwuXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5ZIE9yaWdpbiBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBzY2FsZSBTY2FsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdJbWFnZU9yTGFiZWwoY29udGV4dCwgdHJhbnNmb3JtLCBvcGFjaXR5LCBsYWJlbE9ySW1hZ2UsIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHNjYWxlKSB7XG4gICAgY29udGV4dC5zYXZlKCk7XG4gICAgaWYgKG9wYWNpdHkgIT09IDEpIHtcbiAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSAqPSBvcGFjaXR5O1xuICAgIH1cbiAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIHRyYW5zZm9ybSk7XG4gICAgfVxuICAgIGlmICggLyoqIEB0eXBlIHsqfSAqLyhsYWJlbE9ySW1hZ2UpLmNvbnRleHRJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgLy8gbGFiZWxcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGVbMF0sIHNjYWxlWzFdKTtcbiAgICAgICAgZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zKC8qKiBAdHlwZSB7TGFiZWx9ICovIChsYWJlbE9ySW1hZ2UpLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NhbGVbMF0gPCAwIHx8IHNjYWxlWzFdIDwgMCkge1xuICAgICAgICAvLyBmbGlwcGVkIGltYWdlXG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgICBjb250ZXh0LnNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGxhYmVsT3JJbWFnZSksIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIDAsIDAsIHcsIGgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaWYgaW1hZ2Ugbm90IGZsaXBwZWQgdHJhbnNsYXRlIGFuZCBzY2FsZSBjYW4gYmUgYXZvaWRlZFxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChsYWJlbE9ySW1hZ2UpLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCB3ICogc2NhbGVbMF0sIGggKiBzY2FsZVsxXSk7XG4gICAgfVxuICAgIGNvbnRleHQucmVzdG9yZSgpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0xhYmVsfSBsYWJlbCBMYWJlbC5cbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVMYWJlbEluc3RydWN0aW9ucyhsYWJlbCwgY29udGV4dCkge1xuICAgIHZhciBjb250ZXh0SW5zdHJ1Y3Rpb25zID0gbGFiZWwuY29udGV4dEluc3RydWN0aW9ucztcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb250ZXh0SW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29udGV4dEluc3RydWN0aW9uc1tpICsgMV0pKSB7XG4gICAgICAgICAgICBjb250ZXh0W2NvbnRleHRJbnN0cnVjdGlvbnNbaV1dLmFwcGx5KGNvbnRleHQsIGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHRbY29udGV4dEluc3RydWN0aW9uc1tpXV0gPSBjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbnZhcy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL0NvbXBvc2l0ZVxuICovXG5pbXBvcnQgTWFwUmVuZGVyZXIgZnJvbSAnLi9NYXAuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50IGZyb20gJy4uL3JlbmRlci9FdmVudC5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgY2hlY2tlZEZvbnRzIH0gZnJvbSAnLi4vcmVuZGVyL2NhbnZhcy5qcyc7XG5pbXBvcnQgeyBpblZpZXcgfSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgcmVwbGFjZUNoaWxkcmVuIH0gZnJvbSAnLi4vZG9tLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIG1hcCByZW5kZXJlci5cbiAqIEBhcGlcbiAqL1xudmFyIENvbXBvc2l0ZU1hcFJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb21wb3NpdGVNYXBSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbXBvc2l0ZU1hcFJlbmRlcmVyKG1hcCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtYXApIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZvbnRDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4oY2hlY2tlZEZvbnRzLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIG1hcC5yZWRyYXdUZXh0LmJpbmQobWFwKSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgc3R5bGUgPSBfdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBzdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBzdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9IENMQVNTX1VOU0VMRUNUQUJMRSArICcgb2wtbGF5ZXJzJztcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG1hcC5nZXRWaWV3cG9ydCgpO1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKF90aGlzLmVsZW1lbnRfLCBjb250YWluZXIuZmlyc3RDaGlsZCB8fCBudWxsKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxIVE1MRWxlbWVudD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jaGlsZHJlbl8gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwYXRjaFJlbmRlckV2ZW50ID0gZnVuY3Rpb24gKHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIGlmIChtYXAuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBldmVudF8xID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHVuZGVmaW5lZCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgICAgICBtYXAuZGlzcGF0Y2hFdmVudChldmVudF8xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmZvbnRDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgICAgICB0aGlzLmVsZW1lbnRfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIuXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Xy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlTWF0cmljZXMyRChmcmFtZVN0YXRlKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5QUkVDT01QT1NFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuekluZGV4IC0gYi56SW5kZXg7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5fLmxlbmd0aCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vbGF5ZXIvQmFzZVZlY3Rvci5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBkZWNsdXR0ZXJMYXllcnMgPSBbXTtcbiAgICAgICAgdmFyIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5sYXllckluZGV4ID0gaTtcbiAgICAgICAgICAgIGlmICghaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXJTdGF0ZS5zb3VyY2VTdGF0ZSAhPSBTb3VyY2VTdGF0ZS5SRUFEWSAmJlxuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlLnNvdXJjZVN0YXRlICE9IFNvdXJjZVN0YXRlLlVOREVGSU5FRCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGxheWVyLnJlbmRlcihmcmFtZVN0YXRlLCBwcmV2aW91c0VsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gcHJldmlvdXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbl8ucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdnZXREZWNsdXR0ZXInIGluIGxheWVyKSB7XG4gICAgICAgICAgICAgICAgZGVjbHV0dGVyTGF5ZXJzLnB1c2goXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9CYXNlVmVjdG9yLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSBkZWNsdXR0ZXJMYXllcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIGRlY2x1dHRlckxheWVyc1tpXS5yZW5kZXJEZWNsdXR0ZXIoZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZUNoaWxkcmVuKHRoaXMuZWxlbWVudF8sIHRoaXMuY2hpbGRyZW5fKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5QT1NUQ09NUE9TRSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZUV4cGlyZUljb25DYWNoZShmcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2sgTGF5ZXJcbiAgICAgKiAgICAgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbGF5ZXJGaWx0ZXIpIHtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXk7XG4gICAgICAgIHZhciBudW1MYXllcnMgPSBsYXllclN0YXRlcy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSBudW1MYXllcnMgLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc1tpXTtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSAmJlxuICAgICAgICAgICAgICAgIGluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpICYmXG4gICAgICAgICAgICAgICAgbGF5ZXJGaWx0ZXIobGF5ZXIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSBsYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbGF5ZXJSZW5kZXJlci5nZXREYXRhQXRQaXhlbChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2sobGF5ZXIsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tcG9zaXRlTWFwUmVuZGVyZXI7XG59KE1hcFJlbmRlcmVyKSk7XG5leHBvcnQgZGVmYXVsdCBDb21wb3NpdGVNYXBSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbXBvc2l0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvbkV2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjYWRkXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEFERDogJ2FkZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9Db2xsZWN0aW9uLkNvbGxlY3Rpb25FdmVudCNyZW1vdmVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUkVNT1ZFOiAncmVtb3ZlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db2xsZWN0aW9uRXZlbnRUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvQ29sbGVjdGlvblxuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBMRU5HVEg6ICdsZW5ndGgnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXNcbiAqIHR5cGUuXG4gKi9cbnZhciBDb2xsZWN0aW9uRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbGxlY3Rpb25FdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHsqfSBbb3B0X2VsZW1lbnRdIEVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfaW5kZXhdIFRoZSBpbmRleCBvZiB0aGUgYWRkZWQgb3IgcmVtb3ZlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb25FdmVudCh0eXBlLCBvcHRfZWxlbWVudCwgb3B0X2luZGV4KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZWxlbWVudCB0aGF0IGlzIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnQgPSBvcHRfZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgYWRkZWQgb3IgcmVtb3ZlZCBlbGVtZW50LlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbmRleCA9IG9wdF9pbmRleDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQ29sbGVjdGlvbkV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgQ29sbGVjdGlvbkV2ZW50IH07XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6bGVuZ3RoJywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8J2FkZCd8J3JlbW92ZScsIENvbGxlY3Rpb25FdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6bGVuZ3RoJ3wnYWRkJ3wncmVtb3ZlJyxSZXR1cm4+fSBDb2xsZWN0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1bmlxdWU9ZmFsc2VdIERpc2FsbG93IHRoZSBzYW1lIGl0ZW0gZnJvbSBiZWluZyBhZGRlZCB0b1xuICogdGhlIGNvbGxlY3Rpb24gdHdpY2UuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQW4gZXhwYW5kZWQgdmVyc2lvbiBvZiBzdGFuZGFyZCBKUyBBcnJheSwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yXG4gKiBtYW5pcHVsYXRpb24uIEFkZCBhbmQgcmVtb3ZlIGNoYW5nZXMgdG8gdGhlIENvbGxlY3Rpb24gdHJpZ2dlciBhIENvbGxlY3Rpb25cbiAqIGV2ZW50LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjb3ZlciBjaGFuZ2VzIHRvIHRoZSBvYmplY3RzIF93aXRoaW5fIHRoZVxuICogQ29sbGVjdGlvbjsgdGhleSB0cmlnZ2VyIGV2ZW50cyBvbiB0aGUgYXBwcm9wcmlhdGUgb2JqZWN0LCBub3Qgb24gdGhlXG4gKiBDb2xsZWN0aW9uIGFzIGEgd2hvbGUuXG4gKlxuICogQGZpcmVzIENvbGxlY3Rpb25FdmVudFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAYXBpXG4gKi9cbnZhciBDb2xsZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb2xsZWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8VD59IFtvcHRfYXJyYXldIEFycmF5LlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBDb2xsZWN0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29sbGVjdGlvbihvcHRfYXJyYXksIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuaXF1ZV8gPSAhIW9wdGlvbnMudW5pcXVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxUPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFycmF5XyA9IG9wdF9hcnJheSA/IG9wdF9hcnJheSA6IFtdO1xuICAgICAgICBpZiAoX3RoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gX3RoaXMuYXJyYXlfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5hc3NlcnRVbmlxdWVfKF90aGlzLmFycmF5X1tpXSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgZWxlbWVudHMgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmdldExlbmd0aCgpID4gMCkge1xuICAgICAgICAgICAgdGhpcy5wb3AoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIGVsZW1lbnRzIHRvIHRoZSBjb2xsZWN0aW9uLiAgVGhpcyBwdXNoZXMgZWFjaCBpdGVtIGluIHRoZSBwcm92aWRlZCBhcnJheVxuICAgICAqIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHshQXJyYXk8VD59IGFyciBBcnJheS5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPFQ+fSBUaGlzIGNvbGxlY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHRoaXMucHVzaChhcnJbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZSBvdmVyIGVhY2ggZWxlbWVudCwgY2FsbGluZyB0aGUgcHJvdmlkZWQgY2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIsIEFycmF5PFQ+KTogKn0gZiBUaGUgZnVuY3Rpb24gdG8gY2FsbFxuICAgICAqICAgICBmb3IgZXZlcnkgZWxlbWVudC4gVGhpcyBmdW5jdGlvbiB0YWtlcyAzIGFyZ3VtZW50cyAodGhlIGVsZW1lbnQsIHRoZVxuICAgICAqICAgICBpbmRleCBhbmQgdGhlIGFycmF5KS4gVGhlIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gdGhpcy5hcnJheV87XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGYoYXJyYXlbaV0sIGksIGFycmF5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSB1bmRlcmx5aW5nIEFycmF5IG9iamVjdC4gV2FybmluZzogaWYgdGhlIGFycmF5XG4gICAgICogaXMgbXV0YXRlZCwgbm8gZXZlbnRzIHdpbGwgYmUgZGlzcGF0Y2hlZCBieSB0aGUgY29sbGVjdGlvbiwgYW5kIHRoZVxuICAgICAqIGNvbGxlY3Rpb24ncyBcImxlbmd0aFwiIHByb3BlcnR5IHdvbid0IGJlIGluIHN5bmMgd2l0aCB0aGUgYWN0dWFsIGxlbmd0aFxuICAgICAqIG9mIHRoZSBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8VD59IEFycmF5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXRBcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHJldHVybiB7VH0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuaXRlbSA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxlbmd0aCBvZiB0aGUgYXJyYXkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0TGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoUHJvcGVydHkuTEVOR1RIKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluc2VydCBhbiBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmluc2VydEF0ID0gZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDAsIGVsZW0pO1xuICAgICAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0sIGluZGV4KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgY29sbGVjdGlvbiBhbmQgcmV0dXJuIGl0LlxuICAgICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmdldExlbmd0aCgpIC0gMSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnNlcnQgdGhlIHByb3ZpZGVkIGVsZW1lbnQgYXQgdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyBsZW5ndGggb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG4gPSB0aGlzLmdldExlbmd0aCgpO1xuICAgICAgICB0aGlzLmluc2VydEF0KG4sIGVsZW0pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbiBlbGVtZW50IGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGVsZW1lbnQgb3IgdW5kZWZpbmVkIGlmIG5vbmUgZm91bmQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgICAgIHZhciBhcnIgPSB0aGlzLmFycmF5XztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXJyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIGlmIChhcnJbaV0gPT09IGVsZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVBdChpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleCBhbmQgcmV0dXJuIGl0LlxuICAgICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBkb2VzIG5vdCBjb250YWluIHRoaXMgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBWYWx1ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUucmVtb3ZlQXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdmFyIHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgICAgIHRoaXMuYXJyYXlfLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgcHJldiwgaW5kZXgpKTtcbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuc2V0QXQgPSBmdW5jdGlvbiAoaW5kZXgsIGVsZW0pIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLmdldExlbmd0aCgpO1xuICAgICAgICBpZiAoaW5kZXggPCBuKSB7XG4gICAgICAgICAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0sIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgICAgICAgICAgdGhpcy5hcnJheV9baW5kZXhdID0gZWxlbTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2LCBpbmRleCkpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0sIGluZGV4KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gbjsgaiA8IGluZGV4OyArK2opIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydEF0KGosIHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluc2VydEF0KGluZGV4LCBlbGVtKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGVMZW5ndGhfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5MRU5HVEgsIHRoaXMuYXJyYXlfLmxlbmd0aCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2V4Y2VwdF0gT3B0aW9uYWwgaW5kZXggdG8gaWdub3JlLlxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmFzc2VydFVuaXF1ZV8gPSBmdW5jdGlvbiAoZWxlbSwgb3B0X2V4Y2VwdCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcnJheV9baV0gPT09IGVsZW0gJiYgaSAhPT0gb3B0X2V4Y2VwdCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcig1OCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDb2xsZWN0aW9uO1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBDb2xsZWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29sbGVjdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0dyb3VwXG4gKi9cbmltcG9ydCBCYXNlTGF5ZXIgZnJvbSAnLi9CYXNlLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiwgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0PnxpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBbbGF5ZXJzXSBDaGlsZCBsYXllcnMuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsICo+fSBbcHJvcGVydGllc10gQXJiaXRyYXJ5IG9ic2VydmFibGUgcHJvcGVydGllcy4gQ2FuIGJlIGFjY2Vzc2VkIHdpdGggYCNnZXQoKWAgYW5kIGAjc2V0KClgLlxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gICAgTEFZRVJTOiAnbGF5ZXJzJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IG9mIGxheWVycyB0aGF0IGFyZSBoYW5kbGVkIHRvZ2V0aGVyLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyB0cmlnZ2VyZWQgd2hlbiB0aGUgZ3JvdXAvQ29sbGVjdGlvbiBjaGFuZ2VzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIExheWVyR3JvdXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExheWVyR3JvdXAsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIExheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGF5ZXJHcm91cChvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgYmFzZU9wdGlvbnMgPSAvKiogQHR5cGUge09wdGlvbnN9ICovIChhc3NpZ24oe30sIG9wdGlvbnMpKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLmxheWVycztcbiAgICAgICAgdmFyIGxheWVycyA9IG9wdGlvbnMubGF5ZXJzO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGJhc2VPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyS2V5c18gPSB7fTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoUHJvcGVydHkuTEFZRVJTLCBfdGhpcy5oYW5kbGVMYXllcnNDaGFuZ2VkXyk7XG4gICAgICAgIGlmIChsYXllcnMpIHtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxheWVycykpIHtcbiAgICAgICAgICAgICAgICBsYXllcnMgPSBuZXcgQ29sbGVjdGlvbihsYXllcnMuc2xpY2UoKSwgeyB1bmlxdWU6IHRydWUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhsYXllcnMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJywgNDMpOyAvLyBFeHBlY3RlZCBgbGF5ZXJzYCB0byBiZSBhbiBhcnJheSBvciBhIGBDb2xsZWN0aW9uYFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGF5ZXJzID0gbmV3IENvbGxlY3Rpb24odW5kZWZpbmVkLCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5zZXRMYXllcnMobGF5ZXJzKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc0NoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVycygpO1xuICAgICAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgdGhpcy5oYW5kbGVMYXllcnNBZGRfLCB0aGlzKSwgbGlzdGVuKGxheWVycywgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHRoaXMuaGFuZGxlTGF5ZXJzUmVtb3ZlXywgdGhpcykpO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLmxpc3RlbmVyS2V5c18pIHtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tpZF0uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhcih0aGlzLmxpc3RlbmVyS2V5c18pO1xuICAgICAgICB2YXIgbGF5ZXJzQXJyYXkgPSBsYXllcnMuZ2V0QXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJzQXJyYXkubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJzQXJyYXlbaV07XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19bZ2V0VWlkKGxheWVyKV0gPSBbXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBjb2xsZWN0aW9uRXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzQWRkXyA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdH0gKi8gKGNvbGxlY3Rpb25FdmVudC5lbGVtZW50KTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2dldFVpZChsYXllcildID0gW1xuICAgICAgICAgICAgbGlzdGVuKGxheWVyLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGNvbGxlY3Rpb25FdmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNSZW1vdmVfID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25FdmVudCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgICAgICB2YXIga2V5ID0gZ2V0VWlkKGxheWVyKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2tleV0uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJLZXlzX1trZXldO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbiBjb2xsZWN0aW9ufSBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyc31cbiAgICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBDb2xsZWN0aW9uIG9mXG4gICAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2UgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkxBWUVSUykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAgICogaW4gdGhpcyBncm91cC5cbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBsYXllcnMgQ29sbGVjdGlvbiBvZlxuICAgICAqICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLnNldExheWVycyA9IGZ1bmN0aW9uIChsYXllcnMpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuTEFZRVJTLCBsYXllcnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBbb3B0X2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJzQXJyYXkgPSBmdW5jdGlvbiAob3B0X2FycmF5KSB7XG4gICAgICAgIHZhciBhcnJheSA9IG9wdF9hcnJheSAhPT0gdW5kZWZpbmVkID8gb3B0X2FycmF5IDogW107XG4gICAgICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmdldExheWVyc0FycmF5KGFycmF5KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGF5ZXIgc3RhdGVzIGxpc3QgYW5kIHVzZSB0aGlzIGdyb3VwcyB6LWluZGV4IGFzIHRoZSBkZWZhdWx0XG4gICAgICogZm9yIGFsbCBsYXllcnMgaW4gdGhpcyBhbmQgbmVzdGVkIGdyb3VwcywgaWYgaXQgaXMgdW5zZXQgYXQgdGhpcyBwb2ludC5cbiAgICAgKiBJZiBvcHRfc3RhdGVzIGlzIG5vdCBwcm92aWRlZCBhbmQgdGhpcyBncm91cCdzIHotaW5kZXggaXMgdW5kZWZpbmVkXG4gICAgICogMCBpcyB1c2VkIGEgdGhlIGRlZmF1bHQgei1pbmRleC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbb3B0X3N0YXRlc10gT3B0aW9uYWwgbGlzdFxuICAgICAqIG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgdmFyIHN0YXRlcyA9IG9wdF9zdGF0ZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9zdGF0ZXMgOiBbXTtcbiAgICAgICAgdmFyIHBvcyA9IHN0YXRlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyLmdldExheWVyU3RhdGVzQXJyYXkoc3RhdGVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBvd25MYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKCk7XG4gICAgICAgIHZhciBkZWZhdWx0WkluZGV4ID0gb3duTGF5ZXJTdGF0ZS56SW5kZXg7XG4gICAgICAgIGlmICghb3B0X3N0YXRlcyAmJiBvd25MYXllclN0YXRlLnpJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBkZWZhdWx0WkluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gcG9zLCBpaSA9IHN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IHN0YXRlc1tpXTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUub3BhY2l0eSAqPSBvd25MYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICAgICAgICBsYXllclN0YXRlLnZpc2libGUgPSBsYXllclN0YXRlLnZpc2libGUgJiYgb3duTGF5ZXJTdGF0ZS52aXNpYmxlO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uID0gTWF0aC5taW4obGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uLCBvd25MYXllclN0YXRlLm1heFJlc29sdXRpb24pO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgobGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uLCBvd25MYXllclN0YXRlLm1pblJlc29sdXRpb24pO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5taW5ab29tID0gTWF0aC5tYXgobGF5ZXJTdGF0ZS5taW5ab29tLCBvd25MYXllclN0YXRlLm1pblpvb20pO1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS5tYXhab29tID0gTWF0aC5taW4obGF5ZXJTdGF0ZS5tYXhab29tLCBvd25MYXllclN0YXRlLm1heFpvb20pO1xuICAgICAgICAgICAgaWYgKG93bkxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IGdldEludGVyc2VjdGlvbihsYXllclN0YXRlLmV4dGVudCwgb3duTGF5ZXJTdGF0ZS5leHRlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQgPSBvd25MYXllclN0YXRlLmV4dGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGF5ZXJTdGF0ZS56SW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuekluZGV4ID0gZGVmYXVsdFpJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3RhdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFNvdXJjZVN0YXRlLlJFQURZO1xuICAgIH07XG4gICAgcmV0dXJuIExheWVyR3JvdXA7XG59KEJhc2VMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgTGF5ZXJHcm91cDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdyb3VwLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvTWFwRXZlbnRcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5QbHVnZ2FibGVNYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBldmVudC5cbiAqL1xudmFyIE1hcEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBbb3B0X2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEV2ZW50KHR5cGUsIG1hcCwgb3B0X2ZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgd2hlcmUgdGhlIGV2ZW50IG9jY3VycmVkLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwID0gbWFwO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZyYW1lIHN0YXRlIGF0IHRoZSB0aW1lIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdF9mcmFtZVN0YXRlIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gTWFwRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEV2ZW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50XG4gKi9cbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYXMgbWFwIGJyb3dzZXIgZXZlbnRzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvUGx1Z2dhYmxlTWFwflBsdWdnYWJsZU1hcH0gZm9yIHdoaWNoIGV2ZW50cyB0cmlnZ2VyIGEgbWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAdGVtcGxhdGUge1VJRXZlbnR9IEVWRU5UXG4gKi9cbnZhciBNYXBCcm93c2VyRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcEJyb3dzZXJFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAcGFyYW0ge0VWRU5UfSBvcmlnaW5hbEV2ZW50IE9yaWdpbmFsIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9kcmFnZ2luZ10gSXMgdGhlIG1hcCBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZD9cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBbb3B0X2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEJyb3dzZXJFdmVudCh0eXBlLCBtYXAsIG9yaWdpbmFsRXZlbnQsIG9wdF9kcmFnZ2luZywgb3B0X2ZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSwgbWFwLCBvcHRfZnJhbWVTdGF0ZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge0VWRU5UfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmlnaW5hbEV2ZW50ID0gb3JpZ2luYWxFdmVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgaWYgdGhlIG1hcCBpcyBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZC4gT25seSBzZXQgZm9yXG4gICAgICAgICAqIGBQT0lOVEVSRFJBR2AgYW5kIGBQT0lOVEVSTU9WRWAgZXZlbnRzLiBEZWZhdWx0IGlzIGBmYWxzZWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kcmFnZ2luZyA9IG9wdF9kcmFnZ2luZyAhPT0gdW5kZWZpbmVkID8gb3B0X2RyYWdnaW5nIDogZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUsIFwicGl4ZWxcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1hcCBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5waXhlbF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBpeGVsXyA9IHRoaXMubWFwLmdldEV2ZW50UGl4ZWwodGhpcy5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBpeGVsXztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucGl4ZWxfID0gcGl4ZWw7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZSwgXCJjb29yZGluYXRlXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuICBUaGlzIHdpbGwgYmUgaW4gdGhlIHVzZXJcbiAgICAgICAgICogcHJvamVjdGlvbiBpZiBvbmUgaXMgc2V0LiAgT3RoZXJ3aXNlIGl0IHdpbGwgYmUgaW4gdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb29yZGluYXRlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZV8gPSB0aGlzLm1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMucGl4ZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29vcmRpbmF0ZV87XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY29vcmRpbmF0ZV8gPSBjb29yZGluYXRlO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBhY3Rpb24uXG4gICAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5wcmV2ZW50RGVmYXVsdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdC5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoJ3ByZXZlbnREZWZhdWx0JyBpbiB0aGlzLm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7VUlFdmVudH0gKi8gKHRoaXMub3JpZ2luYWxFdmVudCkucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUHJldmVudHMgZnVydGhlciBwcm9wYWdhdGlvbiBvZiB0aGUgY3VycmVudCBldmVudC5cbiAgICAgKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL2V2ZW50LnN0b3BQcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uLmNhbGwodGhpcyk7XG4gICAgICAgIGlmICgnc3RvcFByb3BhZ2F0aW9uJyBpbiB0aGlzLm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7VUlFdmVudH0gKi8gKHRoaXMub3JpZ2luYWxFdmVudCkuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNYXBCcm93c2VyRXZlbnQ7XG59KE1hcEV2ZW50KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFR5cGVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuLyoqXG4gKiBDb25zdGFudHMgZm9yIGV2ZW50IG5hbWVzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIEEgdHJ1ZSBzaW5nbGUgY2xpY2sgd2l0aCBubyBkcmFnZ2luZyBhbmQgbm8gZG91YmxlIGNsaWNrLiBOb3RlIHRoYXQgdGhpc1xuICAgICAqIGV2ZW50IGlzIGRlbGF5ZWQgYnkgMjUwIG1zIHRvIGVuc3VyZSB0aGF0IGl0IGlzIG5vdCBhIGRvdWJsZSBjbGljay5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjc2luZ2xlY2xpY2tcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU0lOR0xFQ0xJQ0s6ICdzaW5nbGVjbGljaycsXG4gICAgLyoqXG4gICAgICogQSBjbGljayB3aXRoIG5vIGRyYWdnaW5nLiBBIGRvdWJsZSBjbGljayB3aWxsIGZpcmUgdHdvIG9mIHRoaXMuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2NsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENMSUNLOiBFdmVudFR5cGUuQ0xJQ0ssXG4gICAgLyoqXG4gICAgICogQSB0cnVlIGRvdWJsZSBjbGljaywgd2l0aCBubyBkcmFnZ2luZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjZGJsY2xpY2tcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgREJMQ0xJQ0s6IEV2ZW50VHlwZS5EQkxDTElDSyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHBvaW50ZXIgaXMgZHJhZ2dlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcmRyYWdcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9JTlRFUkRSQUc6ICdwb2ludGVyZHJhZycsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIG1vdmVkLiBOb3RlIHRoYXQgb24gdG91Y2ggZGV2aWNlcyB0aGlzIGlzXG4gICAgICogdHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBpcyBwYW5uZWQsIHNvIGlzIG5vdCB0aGUgc2FtZSBhcyBtb3VzZW1vdmUuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJtb3ZlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICAgIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICAgIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gICAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gICAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICAgIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gICAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuLyoqKlxuICogQHR5cGVkZWYgeydzaW5nbGVjbGljayd8J2NsaWNrJ3wnZGJsY2xpY2snfCdwb2ludGVyZHJhZyd8J3BvaW50ZXJtb3ZlJ30gVHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBDb25zdGFudHMgZm9yIGV2ZW50IG5hbWVzLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICAgIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICAgIFBPSU5URVJVUDogJ3BvaW50ZXJ1cCcsXG4gICAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gICAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICAgIFBPSU5URVJFTlRFUjogJ3BvaW50ZXJlbnRlcicsXG4gICAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRIYW5kbGVyXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCB7IFBBU1NJVkVfRVZFTlRfTElTVEVORVJTIH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbnZhciBNYXBCcm93c2VyRXZlbnRIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBCcm93c2VyRXZlbnRIYW5kbGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIFRoZSBtYXAgd2l0aCB0aGUgdmlld3BvcnQgdG8gbGlzdGVuIHRvIGV2ZW50cyBvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW21vdmVUb2xlcmFuY2VdIFRoZSBtaW5pbWFsIGRpc3RhbmNlIHRoZSBwb2ludGVyIG11c3QgdHJhdmVsIHRvIHRyaWdnZXIgYSBtb3ZlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIobWFwLCBtb3ZlVG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1hcCkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgaXMgdGhlIGVsZW1lbnQgdGhhdCB3ZSB3aWxsIGxpc3RlbiB0byB0aGUgcmVhbCBldmVudHMgb24uXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHthbnl9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jbGlja1RpbWVvdXRJZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbXVsYXRlIGRibGNsaWNrIGFuZCBzaW5nbGVjbGljay4gV2lsbCBiZSB0cnVlIHdoZW4gb25seSBvbmUgcG9pbnRlciBpcyBhY3RpdmUuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZW11bGF0ZUNsaWNrc18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kcmFnTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1vdmVUb2xlcmFuY2VfID0gbW92ZVRvbGVyYW5jZSA9PT0gdW5kZWZpbmVkID8gMSA6IG1vdmVUb2xlcmFuY2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbW9zdCByZWNlbnQgXCJkb3duXCIgdHlwZSBldmVudCAob3IgbnVsbCBpZiBub25lIGhhdmUgb2NjdXJyZWQpLlxuICAgICAgICAgKiBTZXQgb24gcG9pbnRlcmRvd24uXG4gICAgICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kb3duXyA9IG51bGw7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMubWFwXy5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxudW1iZXIsIGJvb2xlYW4+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2tlZFRvdWNoZXNfID0ge307XG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBsaXN0ZW4oZWxlbWVudCwgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgX3RoaXMuaGFuZGxlUG9pbnRlckRvd25fLCBfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVsYXllZExpc3RlbmVyS2V5XyA9IGxpc3RlbihlbGVtZW50LCBQb2ludGVyRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCBfdGhpcy5yZWxheUV2ZW50XywgX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXyA9IF90aGlzLmhhbmRsZVRvdWNoTW92ZV8uYmluZChfdGhpcyk7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlRPVUNITU9WRSwgX3RoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmVtdWxhdGVDbGlja18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5jbGlja1RpbWVvdXRJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gZG91YmxlLWNsaWNrXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXRJZF8pO1xuICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGNsaWNrXG4gICAgICAgICAgICB0aGlzLmNsaWNrVGltZW91dElkXyA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAvKiogQHRoaXMge01hcEJyb3dzZXJFdmVudEhhbmRsZXJ9ICovXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMjUwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogS2VlcHMgdHJhY2sgb24gaG93IG1hbnkgcG9pbnRlcnMgYXJlIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gcG9pbnRlckV2ZW50O1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCB8fFxuICAgICAgICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUwpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRUb3VjaGVzX1tldmVudC5wb2ludGVySWRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgICAgICAgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hY3RpdmVQb2ludGVyc18gPSBPYmplY3Qua2V5cyh0aGlzLnRyYWNrZWRUb3VjaGVzXykubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyVXBfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIC8vIFdlIGVtdWxhdGUgY2xpY2sgZXZlbnRzIG9uIGxlZnQgbW91c2UgYnV0dG9uIGNsaWNrLCB0b3VjaCBjb250YWN0LCBhbmQgcGVuXG4gICAgICAgIC8vIGNvbnRhY3QuIGlzTW91c2VBY3Rpb25CdXR0b24gcmV0dXJucyB0cnVlIGluIHRoZXNlIGNhc2VzIChldnQuYnV0dG9uIGlzIHNldFxuICAgICAgICAvLyB0byAwKS5cbiAgICAgICAgLy8gU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXNcbiAgICAgICAgLy8gV2Ugb25seSBmaXJlIGNsaWNrLCBzaW5nbGVjbGljaywgYW5kIGRvdWJsZWNsaWNrIGlmIG5vYm9keSBoYXMgY2FsbGVkXG4gICAgICAgIC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KCkuXG4gICAgICAgIGlmICh0aGlzLmVtdWxhdGVDbGlja3NfICYmXG4gICAgICAgICAgICAhbmV3RXZlbnQuZGVmYXVsdFByZXZlbnRlZCAmJlxuICAgICAgICAgICAgIXRoaXMuZHJhZ2dpbmdfICYmXG4gICAgICAgICAgICB0aGlzLmlzTW91c2VBY3Rpb25CdXR0b25fKHBvaW50ZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZW11bGF0ZUNsaWNrXyh0aGlzLmRvd25fKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hY3RpdmVQb2ludGVyc18gPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRvd25fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGxlZnQgbW91c2UgYnV0dG9uIHdhcyBwcmVzc2VkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaXNNb3VzZUFjdGlvbkJ1dHRvbl8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiBwb2ludGVyRXZlbnQuYnV0dG9uID09PSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyRG93bl8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuZW11bGF0ZUNsaWNrc18gPSB0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9PT0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIC8vIFN0b3JlIGEgY29weSBvZiB0aGUgZG93biBldmVudFxuICAgICAgICB0aGlzLmRvd25fID0gLyoqIEB0eXBlIHtQb2ludGVyRXZlbnR9ICovICh7fSk7XG4gICAgICAgIGZvciAodmFyIHByb3BlcnR5IGluIHBvaW50ZXJFdmVudCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gcG9pbnRlckV2ZW50W3Byb3BlcnR5XTtcbiAgICAgICAgICAgIHRoaXMuZG93bl9bcHJvcGVydHldID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nID8gVk9JRCA6IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIGRvYyA9IHRoaXMubWFwXy5nZXRPd25lckRvY3VtZW50KCk7XG4gICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKGRvYywgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSwgdGhpcy5oYW5kbGVQb2ludGVyTW92ZV8sIHRoaXMpLCBsaXN0ZW4oZG9jLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSwgXG4gICAgICAgICAgICAvKiBOb3RlIHRoYXQgdGhlIGxpc3RlbmVyIGZvciBgcG9pbnRlcmNhbmNlbCBpcyBzZXQgdXAgb25cbiAgICAgICAgICAgICAqIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AgYW5kIG5vdCBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgbGlrZVxuICAgICAgICAgICAgICogdGhlIGBwb2ludGVydXBgIGFuZCBgcG9pbnRlcm1vdmVgIGxpc3RlbmVycy5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBUaGUgcmVhc29uIGZvciB0aGlzIGlzIHRoZSBmb2xsb3dpbmc6IGBUb3VjaFNvdXJjZS52YWN1dW1Ub3VjaGVzXygpYFxuICAgICAgICAgICAgICogaXNzdWVzIGBwb2ludGVyY2FuY2VsYCBldmVudHMsIHdoZW4gdGhlcmUgd2FzIG5vIGB0b3VjaGVuZGAgZm9yIGFcbiAgICAgICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gTm93LCBsZXQncyBzYXkgYSBmaXJzdCBgdG91Y2hzdGFydGAgaXMgcmVnaXN0ZXJlZCBvblxuICAgICAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYC4gVGhlIGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBpcyBzZXQgdXAuXG4gICAgICAgICAgICAgKiBCdXQgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGRvZXNuJ3Qga25vdyBhYm91dCB0aGUgZmlyc3RcbiAgICAgICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gSWYgdGhlcmUgaXMgbm8gYHRvdWNoZW5kYCBmb3IgdGhlIGB0b3VjaHN0YXJ0YCwgd2UgY2FuXG4gICAgICAgICAgICAgKiBvbmx5IHJlY2VpdmUgYSBgdG91Y2hjYW5jZWxgIGZyb20gYHBvaW50ZXJFdmVudEhhbmRsZXJfYCwgYmVjYXVzZSBpdCBpc1xuICAgICAgICAgICAgICogb25seSByZWdpc3RlcmVkIHRoZXJlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsaXN0ZW4odGhpcy5lbGVtZW50XywgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnRfLmdldFJvb3ROb2RlICYmIHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUoKSAhPT0gZG9jKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbih0aGlzLmVsZW1lbnRfLmdldFJvb3ROb2RlKCksIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQb2ludGVyTW92ZV8gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIC8vIEJldHdlZW4gcG9pbnRlcmRvd24gYW5kIHBvaW50ZXJ1cCwgcG9pbnRlcm1vdmUgZXZlbnRzIGFyZSB0cmlnZ2VyZWQuXG4gICAgICAgIC8vIFRvIGF2b2lkIGEgJ2ZhbHNlJyB0b3VjaG1vdmUgZXZlbnQgdG8gYmUgZGlzcGF0Y2hlZCwgd2UgdGVzdCBpZiB0aGUgcG9pbnRlclxuICAgICAgICAvLyBtb3ZlZCBhIHNpZ25pZmljYW50IGRpc3RhbmNlLlxuICAgICAgICBpZiAodGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5kcmFnZ2luZ18gPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCwgdGhpcy5kcmFnZ2luZ18pO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogV3JhcCBhbmQgcmVsYXkgYSBwb2ludGVyIGV2ZW50LiAgTm90ZSB0aGF0IHRoaXMgcmVxdWlyZXMgdGhhdCB0aGUgdHlwZVxuICAgICAqIHN0cmluZyBmb3IgdGhlIE1hcEJyb3dzZXJFdmVudCBtYXRjaGVzIHRoZSBQb2ludGVyRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLnJlbGF5RXZlbnRfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB0aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF8gPSBwb2ludGVyRXZlbnQ7XG4gICAgICAgIHZhciBkcmFnZ2luZyA9ICEhKHRoaXMuZG93bl8gJiYgdGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwQnJvd3NlckV2ZW50KHBvaW50ZXJFdmVudC50eXBlLCB0aGlzLm1hcF8sIHBvaW50ZXJFdmVudCwgZHJhZ2dpbmcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZsZXhpYmxlIGhhbmRsaW5nIG9mIGEgYHRvdWNoLWFjdGlvbjogbm9uZWAgY3NzIGVxdWl2YWxlbnQ6IGJlY2F1c2UgY2FsbGluZ1xuICAgICAqIGBwcmV2ZW50RGVmYXVsdCgpYCBvbiBhIGBwb2ludGVybW92ZWAgZXZlbnQgZG9lcyBub3Qgc3RvcCBuYXRpdmUgcGFnZSBzY3JvbGxpbmdcbiAgICAgKiBhbmQgem9vbWluZywgd2UgYWxzbyBsaXN0ZW4gZm9yIGB0b3VjaG1vdmVgIGFuZCBjYWxsIGBwcmV2ZW50RGVmYXVsdCgpYCBvbiBpdFxuICAgICAqIHdoZW4gYW4gaW50ZXJhY3Rpb24gKGN1cnJlbnRseSBgRHJhZ1BhbmAgaGFuZGxlcyB0aGUgZXZlbnQuXG4gICAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVRvdWNoTW92ZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gRHVlIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9tcGl6ZW5iZXJnL2VsbS1wZXAvaXNzdWVzLzIsIGB0aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF9gXG4gICAgICAgIC8vIG1heSBub3QgYmUgaW5pdGlhbGl6ZWQgeWV0IHdoZW4gd2UgZ2V0IGhlcmUgb24gYSBwbGF0Zm9ybSB3aXRob3V0IG5hdGl2ZSBwb2ludGVyIGV2ZW50cy5cbiAgICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSB0aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF87XG4gICAgICAgIGlmICgoIW9yaWdpbmFsRXZlbnQgfHwgb3JpZ2luYWxFdmVudC5kZWZhdWx0UHJldmVudGVkKSAmJlxuICAgICAgICAgICAgKHR5cGVvZiBldmVudC5jYW5jZWxhYmxlICE9PSAnYm9vbGVhbicgfHwgZXZlbnQuY2FuY2VsYWJsZSA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIG1vdmluZy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmlzTW92aW5nXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmRyYWdnaW5nXyB8fFxuICAgICAgICAgICAgTWF0aC5hYnMocG9pbnRlckV2ZW50LmNsaWVudFggLSB0aGlzLmRvd25fLmNsaWVudFgpID5cbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVUb2xlcmFuY2VfIHx8XG4gICAgICAgICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WSAtIHRoaXMuZG93bl8uY2xpZW50WSkgPiB0aGlzLm1vdmVUb2xlcmFuY2VfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlRPVUNITU9WRSwgdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8pO1xuICAgICAgICBpZiAodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmVsZW1lbnRfID0gbnVsbDtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xufShUYXJnZXQpKTtcbmV4cG9ydCBkZWZhdWx0IE1hcEJyb3dzZXJFdmVudEhhbmRsZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBCcm93c2VyRXZlbnRIYW5kbGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbWFwIGZyYW1lIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjcG9zdHJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBzdGFydHMgbW92aW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjbW92ZXN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1PVkVTVEFSVDogJ21vdmVzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIHRoZSBtYXAgaXMgbW92ZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3ZlZW5kXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1PVkVFTkQ6ICdtb3ZlZW5kJyxcbn07XG4vKioqXG4gKiBAdHlwZWRlZiB7J3Bvc3RyZW5kZXInfCdtb3Zlc3RhcnQnfCdtb3ZlZW5kJ30gVHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwRXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBQcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBMQVlFUkdST1VQOiAnbGF5ZXJncm91cCcsXG4gICAgU0laRTogJ3NpemUnLFxuICAgIFRBUkdFVDogJ3RhcmdldCcsXG4gICAgVklFVzogJ3ZpZXcnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcFByb3BlcnR5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHJ1Y3RzL1ByaW9yaXR5UXVldWVcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjbGVhciB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgRFJPUCA9IEluZmluaXR5O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcmlvcml0eSBxdWV1ZS5cbiAqXG4gKiBUaGUgaW1wbGVtZW50YXRpb24gaXMgaW5zcGlyZWQgZnJvbSB0aGUgQ2xvc3VyZSBMaWJyYXJ5J3MgSGVhcCBjbGFzcyBhbmRcbiAqIFB5dGhvbidzIGhlYXBxIG1vZHVsZS5cbiAqXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL3N0cnVjdHMvaGVhcC5qc1xuICogYW5kIGh0dHBzOi8vaGcucHl0aG9uLm9yZy9jcHl0aG9uL2ZpbGUvMi43L0xpYi9oZWFwcS5weS5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgUHJpb3JpdHlRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiBudW1iZXJ9IHByaW9yaXR5RnVuY3Rpb24gUHJpb3JpdHkgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogc3RyaW5nfSBrZXlGdW5jdGlvbiBLZXkgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJpb3JpdHlRdWV1ZShwcmlvcml0eUZ1bmN0aW9uLCBrZXlGdW5jdGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKFQpOiBudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByaW9yaXR5RnVuY3Rpb25fID0gcHJpb3JpdHlGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihUKTogc3RyaW5nfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rZXlGdW5jdGlvbl8gPSBrZXlGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxUPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZWxlbWVudHNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJpb3JpdGllc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnF1ZXVlZEVsZW1lbnRzXyA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5wcmlvcml0aWVzXy5sZW5ndGggPSAwO1xuICAgICAgICBjbGVhcih0aGlzLnF1ZXVlZEVsZW1lbnRzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW5kIHJldHVybiB0aGUgaGlnaGVzdC1wcmlvcml0eSBlbGVtZW50LiBPKGxvZyBOKS5cbiAgICAgKiBAcmV0dXJuIHtUfSBFbGVtZW50LlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbMF07XG4gICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgZWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHByaW9yaXRpZXMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnRzWzBdID0gZWxlbWVudHMucG9wKCk7XG4gICAgICAgICAgICBwcmlvcml0aWVzWzBdID0gcHJpb3JpdGllcy5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuc2lmdFVwXygwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZWxlbWVudEtleSA9IHRoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICAgICAgICBkZWxldGUgdGhpcy5xdWV1ZWRFbGVtZW50c19bZWxlbWVudEtleV07XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRW5xdWV1ZSBhbiBlbGVtZW50LiBPKGxvZyBOKS5cbiAgICAgKiBAcGFyYW0ge1R9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmVucXVldWUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBhc3NlcnQoISh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXyksIDMxKTsgLy8gVHJpZWQgdG8gZW5xdWV1ZSBhbiBgZWxlbWVudGAgdGhhdCB3YXMgYWxyZWFkeSBhZGRlZCB0byB0aGUgcXVldWVcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uXyhlbGVtZW50KTtcbiAgICAgICAgaWYgKHByaW9yaXR5ICE9IERST1ApIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNfLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLnByaW9yaXRpZXNfLnB1c2gocHJpb3JpdHkpO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2lmdERvd25fKDAsIHRoaXMuZWxlbWVudHNfLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNfLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBsZWZ0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgbGVmdCBjaGlsZCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRMZWZ0Q2hpbGRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ICogMiArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgcmlnaHQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSByaWdodCBjaGlsZCBmb3IuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0UmlnaHRDaGlsZEluZGV4XyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gaW5kZXggKiAyICsgMjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBwYXJlbnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gZ2V0IHRoZSBwYXJlbnQgZm9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBwYXJlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRQYXJlbnRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIChpbmRleCAtIDEpID4+IDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYWtlIHRoaXMgYSBoZWFwLiBPKE4pLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaGVhcGlmeV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBmb3IgKGkgPSAodGhpcy5lbGVtZW50c18ubGVuZ3RoID4+IDEpIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHRoaXMuc2lmdFVwXyhpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudHNfLmxlbmd0aCA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGtleSBxdWV1ZWQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNLZXlRdWV1ZWQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1R9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBxdWV1ZWQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaXNRdWV1ZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0tleVF1ZXVlZCh0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIG1vdmUgZG93bi5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnNpZnRVcF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGNvdW50ID0gZWxlbWVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdGllc1tpbmRleF07XG4gICAgICAgIHZhciBzdGFydEluZGV4ID0gaW5kZXg7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IGNvdW50ID4+IDEpIHtcbiAgICAgICAgICAgIHZhciBsSW5kZXggPSB0aGlzLmdldExlZnRDaGlsZEluZGV4XyhpbmRleCk7XG4gICAgICAgICAgICB2YXIgckluZGV4ID0gdGhpcy5nZXRSaWdodENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICAgICAgICAgIHZhciBzbWFsbGVyQ2hpbGRJbmRleCA9IHJJbmRleCA8IGNvdW50ICYmIHByaW9yaXRpZXNbckluZGV4XSA8IHByaW9yaXRpZXNbbEluZGV4XVxuICAgICAgICAgICAgICAgID8gckluZGV4XG4gICAgICAgICAgICAgICAgOiBsSW5kZXg7XG4gICAgICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1tzbWFsbGVyQ2hpbGRJbmRleF07XG4gICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXRpZXNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgICAgICAgICAgaW5kZXggPSBzbWFsbGVyQ2hpbGRJbmRleDtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50O1xuICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLnNpZnREb3duXyhzdGFydEluZGV4LCBpbmRleCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCBUaGUgaW5kZXggb2YgdGhlIHJvb3QuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBtb3ZlIHVwLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuc2lmdERvd25fID0gZnVuY3Rpb24gKHN0YXJ0SW5kZXgsIGluZGV4KSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaW5kZXhdO1xuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0aWVzW2luZGV4XTtcbiAgICAgICAgd2hpbGUgKGluZGV4ID4gc3RhcnRJbmRleCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudEluZGV4ID0gdGhpcy5nZXRQYXJlbnRJbmRleF8oaW5kZXgpO1xuICAgICAgICAgICAgaWYgKHByaW9yaXRpZXNbcGFyZW50SW5kZXhdID4gcHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1twYXJlbnRJbmRleF07XG4gICAgICAgICAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3BhcmVudEluZGV4XTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcmVudEluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnJlcHJpb3JpdGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByaW9yaXR5RnVuY3Rpb24gPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fO1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuICAgICAgICB2YXIgbiA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVsZW1lbnQsIGksIHByaW9yaXR5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudHNbaV07XG4gICAgICAgICAgICBwcmlvcml0eSA9IHByaW9yaXR5RnVuY3Rpb24oZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAocHJpb3JpdHkgPT0gRFJPUCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2luZGV4KytdID0gZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50cy5sZW5ndGggPSBpbmRleDtcbiAgICAgICAgcHJpb3JpdGllcy5sZW5ndGggPSBpbmRleDtcbiAgICAgICAgdGhpcy5oZWFwaWZ5XygpO1xuICAgIH07XG4gICAgcmV0dXJuIFByaW9yaXR5UXVldWU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUHJpb3JpdHlRdWV1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByaW9yaXR5UXVldWUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlUXVldWVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFByaW9yaXR5UXVldWUsIHsgRFJPUCB9IGZyb20gJy4vc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHQsIHN0cmluZywgaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIG51bWJlcik6IG51bWJlcn0gUHJpb3JpdHlGdW5jdGlvblxuICovXG52YXIgVGlsZVF1ZXVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlUXVldWUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQcmlvcml0eUZ1bmN0aW9ufSB0aWxlUHJpb3JpdHlGdW5jdGlvbiBUaWxlIHByaW9yaXR5IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogP30gdGlsZUNoYW5nZUNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIHRpbGUgY2hhbmdlIGV2ZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVRdWV1ZSh0aWxlUHJpb3JpdHlGdW5jdGlvbiwgdGlsZUNoYW5nZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFByaW9yaXR5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aWxlUHJpb3JpdHlGdW5jdGlvbi5hcHBseShudWxsLCBlbGVtZW50KTtcbiAgICAgICAgfSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZWxlbWVudFswXSkuZ2V0S2V5KCk7XG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfID0gX3RoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbigpOiA/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNoYW5nZUNhbGxiYWNrXyA9IHRpbGVDaGFuZ2VDYWxsYmFjaztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlc0xvYWRpbmdfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZyxib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVzTG9hZGluZ0tleXNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbGVtZW50IHdhcyBhZGRlZCB0byB0aGUgcXVldWUuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGFkZGVkID0gX3N1cGVyLnByb3RvdHlwZS5lbnF1ZXVlLmNhbGwodGhpcywgZWxlbWVudCk7XG4gICAgICAgIGlmIChhZGRlZCkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSBlbGVtZW50WzBdO1xuICAgICAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkZGVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgdGlsZXMgbG9hZGluZy5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmdldFRpbGVzTG9hZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNMb2FkaW5nXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmIChzdGF0ZSA9PT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgdGlsZS5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICAgICAgICB2YXIgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV07XG4gICAgICAgICAgICAgICAgLS10aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFRvdGFsTG9hZGluZyBNYXhpbXVtIG51bWJlciB0aWxlcyB0byBsb2FkIHNpbXVsdGFuZW91c2x5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhOZXdMb2FkcyBNYXhpbXVtIG51bWJlciBvZiBuZXcgdGlsZXMgdG8gbG9hZC5cbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmxvYWRNb3JlVGlsZXMgPSBmdW5jdGlvbiAobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcykge1xuICAgICAgICB2YXIgbmV3TG9hZHMgPSAwO1xuICAgICAgICB2YXIgc3RhdGUsIHRpbGUsIHRpbGVLZXk7XG4gICAgICAgIHdoaWxlICh0aGlzLnRpbGVzTG9hZGluZ18gPCBtYXhUb3RhbExvYWRpbmcgJiZcbiAgICAgICAgICAgIG5ld0xvYWRzIDwgbWF4TmV3TG9hZHMgJiZcbiAgICAgICAgICAgIHRoaXMuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgICAgICAgIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGhpcy5kZXF1ZXVlKClbMF0pO1xuICAgICAgICAgICAgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XG4gICAgICAgICAgICBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gVGlsZVN0YXRlLklETEUgJiYgISh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlc0xvYWRpbmdLZXlzX1t0aWxlS2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgKyt0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICAgICAgKytuZXdMb2FkcztcbiAgICAgICAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVRdWV1ZTtcbn0oUHJpb3JpdHlRdWV1ZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZVF1ZXVlO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydCgnLi9QbHVnZ2FibGVNYXAuanMnKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlUmVzb2x1dGlvbiBUaWxlIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUaWxlUHJpb3JpdHkoZnJhbWVTdGF0ZSwgdGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAvLyBGaWx0ZXIgb3V0IHRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyB0aGFuIHRoZSBjdXJyZW50IHpvb20gbGV2ZWwsIG9yIHRoYXRcbiAgICAvLyBhcmUgb3V0c2lkZSB0aGUgdmlzaWJsZSBleHRlbnQuXG4gICAgaWYgKCFmcmFtZVN0YXRlIHx8ICEodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzKSkge1xuICAgICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgaWYgKCFmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldW3RpbGUuZ2V0S2V5KCldKSB7XG4gICAgICAgIHJldHVybiBEUk9QO1xuICAgIH1cbiAgICAvLyBQcmlvcml0aXplIHRoZSBoaWdoZXN0IHpvb20gbGV2ZWwgdGlsZXMgY2xvc2VzdCB0byB0aGUgZm9jdXMuXG4gICAgLy8gVGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIGFyZSBwcmlvcml0aXplZCB1c2luZyBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikuXG4gICAgLy8gV2l0aGluIGEgem9vbSBsZXZlbCwgdGlsZXMgYXJlIHByaW9yaXRpemVkIGJ5IHRoZSBkaXN0YW5jZSBpbiBwaXhlbHMgYmV0d2VlblxuICAgIC8vIHRoZSBjZW50ZXIgb2YgdGhlIHRpbGUgYW5kIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0LiAgVGhlIGZhY3RvciBvZiA2NTUzNlxuICAgIC8vIG1lYW5zIHRoYXQgdGhlIHByaW9yaXRpemF0aW9uIHNob3VsZCBiZWhhdmUgYXMgZGVzaXJlZCBmb3IgdGlsZXMgdXAgdG9cbiAgICAvLyA2NTUzNiAqIE1hdGgubG9nKDIpID0gNDU0MjYgcGl4ZWxzIGZyb20gdGhlIGZvY3VzLlxuICAgIHZhciBjZW50ZXIgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgdmFyIGRlbHRhWCA9IHRpbGVDZW50ZXJbMF0gLSBjZW50ZXJbMF07XG4gICAgdmFyIGRlbHRhWSA9IHRpbGVDZW50ZXJbMV0gLSBjZW50ZXJbMV07XG4gICAgcmV0dXJuICg2NTUzNiAqIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKSArXG4gICAgICAgIE1hdGguc3FydChkZWx0YVggKiBkZWx0YVggKyBkZWx0YVkgKiBkZWx0YVkpIC8gdGlsZVJlc29sdXRpb24pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVF1ZXVlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zaXplXG4gKi9cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYSBzaXplOiBgW3dpZHRoLCBoZWlnaHRdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBTaXplXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIGJ1ZmZlcmVkIHNpemUuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBudW0gVGhlIGFtb3VudCBieSB3aGljaCB0byBidWZmZXIuXG4gKiBAcGFyYW0ge1NpemV9IFtvcHRfc2l6ZV0gT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFRoZSBidWZmZXJlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyKHNpemUsIG51bSwgb3B0X3NpemUpIHtcbiAgICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvcHRfc2l6ZSA9IFswLCAwXTtcbiAgICB9XG4gICAgb3B0X3NpemVbMF0gPSBzaXplWzBdICsgMiAqIG51bTtcbiAgICBvcHRfc2l6ZVsxXSA9IHNpemVbMV0gKyAyICogbnVtO1xuICAgIHJldHVybiBvcHRfc2l6ZTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBhIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBUaGUgc2l6ZSB0byB0ZXN0LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHNpemUgaGFzIGEgcG9zaXRpdmUgYXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc0FyZWEoc2l6ZSkge1xuICAgIHJldHVybiBzaXplWzBdID4gMCAmJiBzaXplWzFdID4gMDtcbn1cbi8qKlxuICogUmV0dXJucyBhIHNpemUgc2NhbGVkIGJ5IGEgcmF0aW8uIFRoZSByZXN1bHQgd2lsbCBiZSBhbiBhcnJheSBvZiBpbnRlZ2Vycy5cbiAqIEBwYXJhbSB7U2l6ZX0gc2l6ZSBTaXplLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFJhdGlvLlxuICogQHBhcmFtIHtTaXplfSBbb3B0X3NpemVdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBUaGUgc2NhbGVkIHNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShzaXplLCByYXRpbywgb3B0X3NpemUpIHtcbiAgICBpZiAob3B0X3NpemUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBvcHRfc2l6ZSA9IFswLCAwXTtcbiAgICB9XG4gICAgb3B0X3NpemVbMF0gPSAoc2l6ZVswXSAqIHJhdGlvICsgMC41KSB8IDA7XG4gICAgb3B0X3NpemVbMV0gPSAoc2l6ZVsxXSAqIHJhdGlvICsgMC41KSB8IDA7XG4gICAgcmV0dXJuIG9wdF9zaXplO1xufVxuLyoqXG4gKiBSZXR1cm5zIGFuIGBTaXplYCBhcnJheSBmb3IgdGhlIHBhc3NlZCBpbiBudW1iZXIgKG1lYW5pbmc6IHNxdWFyZSkgb3JcbiAqIGBTaXplYCBhcnJheS5cbiAqIChtZWFuaW5nOiBub24tc3F1YXJlKSxcbiAqIEBwYXJhbSB7bnVtYmVyfFNpemV9IHNpemUgV2lkdGggYW5kIGhlaWdodC5cbiAqIEBwYXJhbSB7U2l6ZX0gW29wdF9zaXplXSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gU2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU2l6ZShzaXplLCBvcHRfc2l6ZSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHNpemUpKSB7XG4gICAgICAgIHJldHVybiBzaXplO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9wdF9zaXplID0gW3NpemUsIHNpemVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0X3NpemVbMF0gPSBzaXplO1xuICAgICAgICAgICAgb3B0X3NpemVbMV0gPSBzaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRfc2l6ZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaXplLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvUGx1Z2dhYmxlTWFwXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IExheWVyR3JvdXAgZnJvbSAnLi9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRIYW5kbGVyIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEV2ZW50IGZyb20gJy4vTWFwRXZlbnQuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuL01hcEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwUHJvcGVydHkgZnJvbSAnLi9NYXBQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBQb2ludGVyRXZlbnRUeXBlIGZyb20gJy4vcG9pbnRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVRdWV1ZSwgeyBnZXRUaWxlUHJpb3JpdHkgfSBmcm9tICcuL1RpbGVRdWV1ZS5qcyc7XG5pbXBvcnQgVmlldyBmcm9tICcuL1ZpZXcuanMnO1xuaW1wb3J0IFZpZXdIaW50IGZyb20gJy4vVmlld0hpbnQuanMnO1xuaW1wb3J0IHsgREVWSUNFX1BJWEVMX1JBVElPLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IFRSVUUgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSwgY3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSwgfSBmcm9tICcuL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xvbmUsIGNyZWF0ZU9yVXBkYXRlRW1wdHksIGVxdWFscywgZ2V0Rm9yVmlld0FuZFNpemUsIGlzRW1wdHksIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZnJvbVVzZXJDb29yZGluYXRlLCB0b1VzZXJDb29yZGluYXRlIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IGhhc0FyZWEgfSBmcm9tICcuL3NpemUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZSB9IGZyb20gJy4vZG9tLmpzJztcbi8qKlxuICogU3RhdGUgb2YgdGhlIGN1cnJlbnQgZnJhbWUuIE9ubHkgYHBpeGVsUmF0aW9gLCBgdGltZWAgYW5kIGB2aWV3U3RhdGVgIHNob3VsZFxuICogYmUgdXNlZCBpbiBhcHBsaWNhdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGcmFtZVN0YXRlXG4gKiBAcHJvcGVydHkge251bWJlcn0gcGl4ZWxSYXRpbyBUaGUgcGl4ZWwgcmF0aW8gb2YgdGhlIGZyYW1lLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWUgVGhlIHRpbWUgd2hlbiByZW5kZXJpbmcgb2YgdGhlIGZyYW1lIHdhcyByZXF1ZXN0ZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVmlldy5qc1wiKS5TdGF0ZX0gdmlld1N0YXRlIFRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3LlxuICogQHByb3BlcnR5IHtib29sZWFufSBhbmltYXRlIEFuaW1hdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gQ29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcInJidXNoXCIpLmRlZmF1bHR9IGRlY2x1dHRlclRyZWUgRGVjbHV0dGVyVHJlZS5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gaW5kZXggSW5kZXguXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuU3RhdGU+fSBsYXllclN0YXRlc0FycmF5IExheWVyU3RhdGVzQXJyYXkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGF5ZXJJbmRleCBMYXllckluZGV4LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtIFBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLlxuICogQHByb3BlcnR5IHtBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fSBwb3N0UmVuZGVyRnVuY3Rpb25zIFBvc3RSZW5kZXJGdW5jdGlvbnMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcHJvcGVydHkge1RpbGVRdWV1ZX0gdGlsZVF1ZXVlIFRpbGVRdWV1ZS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gdXNlZFRpbGVzIFVzZWRUaWxlcy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gdmlld0hpbnRzIFZpZXdIaW50cy5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gd2FudGVkVGlsZXMgV2FudGVkVGlsZXMuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKFBsdWdnYWJsZU1hcCwgP0ZyYW1lU3RhdGUpOiBhbnl9IFBvc3RSZW5kZXJGdW5jdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEF0UGl4ZWxPcHRpb25zXG4gKiBAcHJvcGVydHkge3VuZGVmaW5lZHxmdW5jdGlvbihpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBbbGF5ZXJGaWx0ZXJdIExheWVyIGZpbHRlclxuICogZnVuY3Rpb24uIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2lsbCByZWNlaXZlIG9uZSBhcmd1bWVudCwgdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyLWNhbmRpZGF0ZX0gYW5kIGl0IHNob3VsZCByZXR1cm4gYSBib29sZWFuIHZhbHVlLlxuICogT25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgXG4gKiB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaGl0VG9sZXJhbmNlPTBdIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlIGluIGNzcyBwaXhlbHMuIFBpeGVsc1xuICogaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY2hlY2tXcmFwcGVkPXRydWVdIENoZWNrLVdyYXBwZWQgV2lsbCBjaGVjayBmb3IgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcyBpbnNpZGUgdGhlIHJhbmdlIG9mXG4gKiAgICsvLSAxIHdvcmxkIHdpZHRoLiBXb3JrcyBvbmx5IGlmIGEgcHJvamVjdGlvbiBpcyB1c2VkIHRoYXQgY2FuIGJlIHdyYXBwZWQuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gTWFwT3B0aW9uc0ludGVybmFsXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc10gQ29udHJvbHMuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc10gSW50ZXJhY3Rpb25zLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxEb2N1bWVudH0ga2V5Ym9hcmRFdmVudFRhcmdldCBLZXlib2FyZEV2ZW50VGFyZ2V0LlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gb3ZlcmxheXMgT3ZlcmxheXMuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsICo+fSB2YWx1ZXMgVmFsdWVzLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmxheWVyZ3JvdXAnfCdjaGFuZ2U6c2l6ZSd8J2NoYW5nZTp0YXJnZXQnfCdjaGFuZ2U6dmlldyd9IE1hcE9iamVjdEV2ZW50VHlwZXNcbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8TWFwT2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50VHlwZVwiKS5UeXBlcywgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9NYXBFdmVudFR5cGVcIikuVHlwZXMsIGltcG9ydChcIi4vTWFwRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9yZW5kZXIvRXZlbnRUeXBlXCIpLk1hcFJlbmRlckV2ZW50VHlwZXMsIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8TWFwT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAgaW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnRUeXBlXCIpLlR5cGVzfGltcG9ydChcIi4vTWFwRXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICBpbXBvcnQoXCIuL3JlbmRlci9FdmVudFR5cGVcIikuTWFwUmVuZGVyRXZlbnRUeXBlcywgUmV0dXJuPn0gUGx1Z2dhYmxlTWFwT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBPYmplY3QgbGl0ZXJhbCB3aXRoIGNvbmZpZyBvcHRpb25zIGZvciB0aGUgbWFwLlxuICogQHR5cGVkZWYge09iamVjdH0gTWFwT3B0aW9uc1xuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBbY29udHJvbHNdXG4gKiBDb250cm9scyBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC5kZWZhdWx0c30gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxSYXRpbz13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb10gVGhlIHJhdGlvIGJldHdlZW5cbiAqIHBoeXNpY2FsIHBpeGVscyBhbmQgZGV2aWNlLWluZGVwZW5kZW50IHBpeGVscyAoZGlwcykgb24gdGhlIGRldmljZS5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IFtpbnRlcmFjdGlvbnNdXG4gKiBJbnRlcmFjdGlvbnMgdGhhdCBhcmUgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIElmIG5vdCBzcGVjaWZpZWQsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uLmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxEb2N1bWVudHxzdHJpbmd9IFtrZXlib2FyZEV2ZW50VGFyZ2V0XSBUaGUgZWxlbWVudCB0b1xuICogbGlzdGVuIHRvIGtleWJvYXJkIGV2ZW50cyBvbi4gVGhpcyBkZXRlcm1pbmVzIHdoZW4gdGhlIGBLZXlib2FyZFBhbmAgYW5kXG4gKiBgS2V5Ym9hcmRab29tYCBpbnRlcmFjdGlvbnMgdHJpZ2dlci4gRm9yIGV4YW1wbGUsIGlmIHRoaXMgb3B0aW9uIGlzIHNldCB0b1xuICogYGRvY3VtZW50YCB0aGUga2V5Ym9hcmQgaW50ZXJhY3Rpb25zIHdpbGwgYWx3YXlzIHRyaWdnZXIuIElmIHRoaXMgb3B0aW9uIGlzXG4gKiBub3Qgc3BlY2lmaWVkLCB0aGUgZWxlbWVudCB0aGUgbGlicmFyeSBsaXN0ZW5zIHRvIGtleWJvYXJkIGV2ZW50cyBvbiBpcyB0aGVcbiAqIG1hcCB0YXJnZXQgKGkuZS4gdGhlIHVzZXItcHJvdmlkZWQgZGl2IGZvciB0aGUgbWFwKS4gSWYgdGhpcyBpcyBub3RcbiAqIGBkb2N1bWVudGAsIHRoZSB0YXJnZXQgZWxlbWVudCBuZWVkcyB0byBiZSBmb2N1c2VkIGZvciBrZXkgZXZlbnRzIHRvIGJlXG4gKiBlbWl0dGVkLCByZXF1aXJpbmcgdGhhdCB0aGUgdGFyZ2V0IGVsZW1lbnQgaGFzIGEgYHRhYmluZGV4YCBhdHRyaWJ1dGUuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0PnxDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0PnxMYXllckdyb3VwfSBbbGF5ZXJzXVxuICogTGF5ZXJzLiBJZiB0aGlzIGlzIG5vdCBkZWZpbmVkLCBhIG1hcCB3aXRoIG5vIGxheWVycyB3aWxsIGJlIHJlbmRlcmVkLiBOb3RlXG4gKiB0aGF0IGxheWVycyBhcmUgcmVuZGVyZWQgaW4gdGhlIG9yZGVyIHN1cHBsaWVkLCBzbyBpZiB5b3Ugd2FudCwgZm9yIGV4YW1wbGUsXG4gKiBhIHZlY3RvciBsYXllciB0byBhcHBlYXIgb24gdG9wIG9mIGEgdGlsZSBsYXllciwgaXQgbXVzdCBjb21lIGFmdGVyIHRoZSB0aWxlXG4gKiBsYXllci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4VGlsZXNMb2FkaW5nPTE2XSBNYXhpbXVtIG51bWJlciB0aWxlcyB0byBsb2FkXG4gKiBzaW11bHRhbmVvdXNseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbW92ZVRvbGVyYW5jZT0xXSBUaGUgbWluaW11bSBkaXN0YW5jZSBpbiBwaXhlbHMgdGhlXG4gKiBjdXJzb3IgbXVzdCBtb3ZlIHRvIGJlIGRldGVjdGVkIGFzIGEgbWFwIG1vdmUgZXZlbnQgaW5zdGVhZCBvZiBhIGNsaWNrLlxuICogSW5jcmVhc2luZyB0aGlzIHZhbHVlIGNhbiBtYWtlIGl0IGVhc2llciB0byBjbGljayBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IFtvdmVybGF5c11cbiAqIE92ZXJsYXlzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBCeSBkZWZhdWx0LCBubyBvdmVybGF5cyBhcmUgYWRkZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gVGhlIGNvbnRhaW5lciBmb3IgdGhlIG1hcCwgZWl0aGVyIHRoZVxuICogZWxlbWVudCBpdHNlbGYgb3IgdGhlIGBpZGAgb2YgdGhlIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQgYXQgY29uc3RydWN0aW9uXG4gKiB0aW1lLCB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0VGFyZ2V0fSBtdXN0IGJlIGNhbGxlZCBmb3IgdGhlIG1hcCB0byBiZVxuICogcmVuZGVyZWQuIElmIHBhc3NlZCBieSBlbGVtZW50LCB0aGUgY29udGFpbmVyIGNhbiBiZSBpbiBhIHNlY29uZGFyeSBkb2N1bWVudC5cbiAqIEBwcm9wZXJ0eSB7Vmlld30gW3ZpZXddIFRoZSBtYXAncyB2aWV3LiAgTm8gbGF5ZXIgc291cmNlcyB3aWxsIGJlXG4gKiBmZXRjaGVkIHVubGVzcyB0aGlzIGlzIHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0Vmlld30uXG4gKi9cbi8qKlxuICogQGFwaVxuICovXG52YXIgUGx1Z2dhYmxlTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQbHVnZ2FibGVNYXAsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBsdWdnYWJsZU1hcChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1BsdWdnYWJsZU1hcE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7UGx1Z2dhYmxlTWFwT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1BsdWdnYWJsZU1hcE9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIHZhciBvcHRpb25zSW50ZXJuYWwgPSBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucyk7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8gPSBfdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQuYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4VGlsZXNMb2FkaW5nXyA9XG4gICAgICAgICAgICBvcHRpb25zLm1heFRpbGVzTG9hZGluZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhUaWxlc0xvYWRpbmcgOiAxNjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFJhdGlvXyA9XG4gICAgICAgICAgICBvcHRpb25zLnBpeGVsUmF0aW8gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5waXhlbFJhdGlvXG4gICAgICAgICAgICAgICAgOiBERVZJQ0VfUElYRUxfUkFUSU87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uRGVsYXlLZXlfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuaW1hdGlvbkRlbGF5XyA9IC8qKiBAdGhpcyB7UGx1Z2dhYmxlTWFwfSAqLyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRnJhbWVfKERhdGUubm93KCkpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZyYW1lSW5kZXhfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/RnJhbWVTdGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZyYW1lU3RhdGVfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBleHRlbnQgYXQgdGhlIHByZXZpb3VzICdtb3ZlZW5kJyBldmVudC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByZXZpb3VzRXh0ZW50XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld3BvcnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5jbGFzc05hbWUgPVxuICAgICAgICAgICAgJ29sLXZpZXdwb3J0JyArICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgPyAnIG9sLXRvdWNoJyA6ICcnKTtcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLnpJbmRleCA9ICcwJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uY2xhc3NOYW1lID0gJ29sLW92ZXJsYXljb250YWluZXInO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uYXBwZW5kQ2hpbGQoX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnQnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uYXBwZW5kQ2hpbGQoX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge01hcEJyb3dzZXJFdmVudEhhbmRsZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubW92ZVRvbGVyYW5jZV8gPSBvcHRpb25zLm1vdmVUb2xlcmFuY2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0XyA9IG9wdGlvbnNJbnRlcm5hbC5rZXlib2FyZEV2ZW50VGFyZ2V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5SGFuZGxlcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250cm9scyA9IG9wdGlvbnNJbnRlcm5hbC5jb250cm9scyB8fCBuZXcgQ29sbGVjdGlvbigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zID0gb3B0aW9uc0ludGVybmFsLmludGVyYWN0aW9ucyB8fCBuZXcgQ29sbGVjdGlvbigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheXNfID0gb3B0aW9uc0ludGVybmFsLm92ZXJsYXlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsb29rdXAgb2Ygb3ZlcmxheXMgYnkgaWQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5SWRJbmRleF8gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3JlbmRlcmVyL01hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHt1bmRlZmluZWR8ZnVuY3Rpb24oRXZlbnQpOiB2b2lkfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGFuZGxlUmVzaXplXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8UG9zdFJlbmRlckZ1bmN0aW9uPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7VGlsZVF1ZXVlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZVF1ZXVlXyA9IG5ldyBUaWxlUXVldWUoX3RoaXMuZ2V0VGlsZVByaW9yaXR5LmJpbmQoX3RoaXMpLCBfdGhpcy5oYW5kbGVUaWxlQ2hhbmdlXy5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LkxBWUVSR1JPVVAsIF90aGlzLmhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlZJRVcsIF90aGlzLmhhbmRsZVZpZXdDaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlNJWkUsIF90aGlzLmhhbmRsZVNpemVDaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlRBUkdFVCwgX3RoaXMuaGFuZGxlVGFyZ2V0Q2hhbmdlZF8pO1xuICAgICAgICAvLyBzZXRQcm9wZXJ0aWVzIHdpbGwgdHJpZ2dlciB0aGUgcmVuZGVyaW5nIG9mIHRoZSBtYXAgaWYgdGhlIG1hcFxuICAgICAgICAvLyBpcyBcImRlZmluZWRcIiBhbHJlYWR5LlxuICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdGlvbnNJbnRlcm5hbC52YWx1ZXMpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5mb3JFYWNoKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICAgICAgY29udHJvbC5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmNvbnRyb2xzLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuaW50ZXJhY3Rpb25zLmZvckVhY2goXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24uXG4gICAgICAgICAqIEB0aGlzIHtQbHVnZ2FibGVNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uLnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5mb3JFYWNoKF90aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5vdmVybGF5c18uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdGhpcy5hZGRPdmVybGF5SW50ZXJuYWxfKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LmVsZW1lbnQpKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgb3ZlcmxheSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9ICovIChldmVudC5lbGVtZW50KTtcbiAgICAgICAgICAgIHZhciBpZCA9IG92ZXJsYXkuZ2V0SWQoKTtcbiAgICAgICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9IFRoZSBtYXAgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZSBhIG1hcCB0eXBlIHRoYXQgaGFzIGEgY3JlYXRlUmVuZGVyZXIgbWV0aG9kJyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGNvbnRyb2wgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRDb250cm9sID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgdGhpcy5nZXRDb250cm9scygpLnB1c2goY29udHJvbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIGludGVyYWN0aW9uIHRvIHRoZSBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhbiBpbnRlcmFjdGlvblxuICAgICAqIGF0IGFub3RoZXIgcG9pbnQgb2YgdGhlIGNvbGxlY3Rpb24gdXNlIGBnZXRJbnRlcmFjdGlvbigpYCBhbmQgdGhlIG1ldGhvZHNcbiAgICAgKiBhdmFpbGFibGUgb24ge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAgICogc3RvcCB0aGUgZXZlbnQgcHJvcGFnYXRpb24gZnJvbSB0aGUgaGFuZGxlRXZlbnQgZnVuY3Rpb24uIFRoZSBpbnRlcmFjdGlvbnNcbiAgICAgKiBnZXQgdG8gaGFuZGxlIHRoZSBldmVudHMgaW4gdGhlIHJldmVyc2Ugb3JkZXIgb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byBhZGQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5wdXNoKGludGVyYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIGdpdmVuIGxheWVyIHRvIHRoZSB0b3Agb2YgdGhpcyBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhIGxheWVyXG4gICAgICogZWxzZXdoZXJlIGluIHRoZSBzdGFjaywgdXNlIGBnZXRMYXllcnMoKWAgYW5kIHRoZSBtZXRob2RzIGF2YWlsYWJsZSBvblxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRMYXllciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCB0aGUgZ2l2ZW4gb3ZlcmxheSB0byB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRPdmVybGF5ID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5nZXRPdmVybGF5cygpLnB1c2gob3ZlcmxheSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGRlYWxzIHdpdGggbWFwJ3Mgb3ZlcmxheSBjb2xsZWN0aW9uIGNoYW5nZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5hZGRPdmVybGF5SW50ZXJuYWxfID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgdmFyIGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV0gPSBvdmVybGF5O1xuICAgICAgICB9XG4gICAgICAgIG92ZXJsYXkuc2V0TWFwKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRUYXJnZXQobnVsbCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgZmVhdHVyZXMgdGhhdCBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQsIGFuZCBleGVjdXRlIGFcbiAgICAgKiBjYWxsYmFjayB3aXRoIGVhY2ggaW50ZXJzZWN0aW5nIGZlYXR1cmUuIExheWVycyBpbmNsdWRlZCBpbiB0aGUgZGV0ZWN0aW9uIGNhblxuICAgICAqIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCB0aGUgYGxheWVyRmlsdGVyYCBvcHRpb24gaW4gYG9wdF9vcHRpb25zYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlLCBpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIGltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggdHdvIGFyZ3VtZW50cy4gVGhlIGZpcnN0IGFyZ3VtZW50IGlzIG9uZVxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmUgZmVhdHVyZX0gb3JcbiAgICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvRmVhdHVyZSByZW5kZXIgZmVhdHVyZX0gYXQgdGhlIHBpeGVsLCB0aGUgc2Vjb25kIGlzXG4gICAgICogICAgIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSBvZiB0aGUgZmVhdHVyZSBhbmQgd2lsbCBiZSBudWxsIGZvclxuICAgICAqICAgICB1bm1hbmFnZWQgbGF5ZXJzLiBUbyBzdG9wIGRldGVjdGlvbiwgY2FsbGJhY2sgZnVuY3Rpb25zIGNhbiByZXR1cm4gYVxuICAgICAqICAgICB0cnV0aHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQsIGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZiBsYXN0XG4gICAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICAgKiBAdGVtcGxhdGUgUyxUXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBjYWxsYmFjaywgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvb3JkaW5hdGUgPSB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCk7XG4gICAgICAgIG9wdF9vcHRpb25zID0gb3B0X29wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5sYXllckZpbHRlciA6IFRSVUU7XG4gICAgICAgIHZhciBjaGVja1dyYXBwZWQgPSBvcHRfb3B0aW9ucy5jaGVja1dyYXBwZWQgIT09IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGNhbGxiYWNrLCBudWxsLCBsYXllckZpbHRlciwgbnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IFRoZSBkZXRlY3RlZCBmZWF0dXJlcyBvclxuICAgICAqIGFuIGVtcHR5IGFycmF5IGlmIG5vbmUgd2VyZSBmb3VuZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRGZWF0dXJlc0F0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICB0aGlzLmZvckVhY2hGZWF0dXJlQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICAgIH0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGxheWVycyB0aGF0IGhhdmUgYSBjb2xvciB2YWx1ZSBhdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kXG4gICAgICogZXhlY3V0ZSBhIGNhbGxiYWNrIHdpdGggZWFjaCBtYXRjaGluZyBsYXllci4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZVxuICAgICAqIGRldGVjdGlvbiBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIGBvcHRfbGF5ZXJGaWx0ZXJgLlxuICAgICAqXG4gICAgICogTm90ZTogdGhpcyBtYXkgZ2l2ZSBmYWxzZSBwb3NpdGl2ZXMgdW5sZXNzIHRoZSBtYXAgbGF5ZXJzIGhhdmUgaGFkIGRpZmZlcmVudCBgY2xhc3NOYW1lYFxuICAgICAqIHByb3BlcnRpZXMgYXNzaWduZWQgdG8gdGhlbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBTLCBpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrXG4gICAgICogICAgIExheWVyIGNhbGxiYWNrLiBUaGlzIGNhbGxiYWNrIHdpbGwgcmVjZWl2ZSB0d28gYXJndW1lbnRzOiBmaXJzdCBpcyB0aGVcbiAgICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllcn0sIHNlY29uZCBhcmd1bWVudCBpcyBhbiBhcnJheSByZXByZXNlbnRpbmdcbiAgICAgKiAgICAgW1IsIEcsIEIsIEFdIHBpeGVsIHZhbHVlcyAoMCAtIDI1NSkgYW5kIHdpbGwgYmUgYG51bGxgIGZvciBsYXllciB0eXBlc1xuICAgICAqICAgICB0aGF0IGRvIG5vdCBjdXJyZW50bHkgc3VwcG9ydCB0aGlzIGFyZ3VtZW50LiBUbyBzdG9wIGRldGVjdGlvbiwgY2FsbGJhY2tcbiAgICAgKiAgICAgZnVuY3Rpb25zIGNhbiByZXR1cm4gYSB0cnV0aHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdF9vcHRpb25zXSBDb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICAgKiBjYWxsYmFjayBleGVjdXRpb24sIG9yIHRoZSBmaXJzdCB0cnV0aHkgY2FsbGJhY2sgcmV0dXJuIHZhbHVlLlxuICAgICAqIEB0ZW1wbGF0ZSBTLFRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBjYWxsYmFjaywgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGhpdFRvbGVyYW5jZSA9IG9wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdGlvbnMubGF5ZXJGaWx0ZXIgfHwgVFJVRTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmZvckVhY2hMYXllckF0UGl4ZWwocGl4ZWwsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdCBpZiBmZWF0dXJlcyBpbnRlcnNlY3QgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQuIExheWVycyBpbmNsdWRlZCBpbiB0aGVcbiAgICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCBgb3B0X2xheWVyRmlsdGVyYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIHBpeGVsP1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhc0ZlYXR1cmVBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBvcHRfb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKTtcbiAgICAgICAgb3B0X29wdGlvbnMgPSBvcHRfb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGxheWVyRmlsdGVyID0gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyIDogVFJVRTtcbiAgICAgICAgdmFyIGhpdFRvbGVyYW5jZSA9IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcbiAgICAgICAgdmFyIGNoZWNrV3JhcHBlZCA9IG9wdF9vcHRpb25zLmNoZWNrV3JhcHBlZCAhPT0gZmFsc2U7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5oYXNGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBsYXllckZpbHRlciwgbnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGluIHVzZXIgcHJvamVjdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRDb29yZGluYXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwodGhpcy5nZXRFdmVudFBpeGVsKGV2ZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGluIHZpZXcgcHJvamVjdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRFdmVudENvb3JkaW5hdGVJbnRlcm5hbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwodGhpcy5nZXRFdmVudFBpeGVsKGV2ZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgcGl4ZWwgcG9zaXRpb24gZm9yIGEgYnJvd3NlciBldmVudCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQuXG4gICAgICogQHBhcmFtIHtVSUV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBQaXhlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRFdmVudFBpeGVsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciB2aWV3cG9ydFBvc2l0aW9uID0gdGhpcy52aWV3cG9ydF8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBldmVudFBvc2l0aW9uID0gXG4gICAgICAgIC8vRklYTUUgQXJlIHdlIHJlYWxseSBjYWxsaW5nIHRoaXMgd2l0aCBhIFRvdWNoRXZlbnQgYW55d2hlcmU/XG4gICAgICAgICdjaGFuZ2VkVG91Y2hlcycgaW4gZXZlbnRcbiAgICAgICAgICAgID8gLyoqIEB0eXBlIHtUb3VjaEV2ZW50fSAqLyAoZXZlbnQpLmNoYW5nZWRUb3VjaGVzWzBdXG4gICAgICAgICAgICA6IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKGV2ZW50KTtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGV2ZW50UG9zaXRpb24uY2xpZW50WCAtIHZpZXdwb3J0UG9zaXRpb24ubGVmdCxcbiAgICAgICAgICAgIGV2ZW50UG9zaXRpb24uY2xpZW50WSAtIHZpZXdwb3J0UG9zaXRpb24udG9wLFxuICAgICAgICBdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0YXJnZXQgaW4gd2hpY2ggdGhpcyBtYXAgaXMgcmVuZGVyZWQuXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmV0dXJucyB3aGF0IGlzIGVudGVyZWQgYXMgYW4gb3B0aW9uIG9yIGluIHNldFRhcmdldDpcbiAgICAgKiBpZiB0aGF0IHdhcyBhbiBlbGVtZW50LCBpdCByZXR1cm5zIGFuIGVsZW1lbnQ7IGlmIGEgc3RyaW5nLCBpdCByZXR1cm5zIHRoYXQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gVGhlIEVsZW1lbnQgb3IgaWQgb2YgdGhlIEVsZW1lbnQgdGhhdCB0aGVcbiAgICAgKiAgICAgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuVEFSR0VUKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIERPTSBlbGVtZW50IGludG8gd2hpY2ggdGhpcyBtYXAgaXMgcmVuZGVyZWQuIEluIGNvbnRyYXN0IHRvXG4gICAgICogYGdldFRhcmdldGAgdGhpcyBtZXRob2QgYWx3YXlzIHJldHVybiBhbiBgRWxlbWVudGAsIG9yIGBudWxsYCBpZiB0aGVcbiAgICAgKiBtYXAgaGFzIG5vIHRhcmdldC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIGVsZW1lbnQgdGhhdCB0aGUgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRhcmdldEVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLmdldFRhcmdldCgpO1xuICAgICAgICBpZiAodGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KVxuICAgICAgICAgICAgICAgIDogdGFyZ2V0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBwaXhlbC4gIFRoaXMgcmV0dXJucyBhIGNvb3JkaW5hdGUgaW4gdGhlXG4gICAgICogdXNlciBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgZm9yIHRoZSBwaXhlbCBwb3NpdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRDb29yZGluYXRlRnJvbVBpeGVsID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHJldHVybiB0b1VzZXJDb29yZGluYXRlKHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKSwgdGhpcy5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBwaXhlbC4gIFRoaXMgcmV0dXJucyBhIGNvb3JkaW5hdGUgaW4gdGhlXG4gICAgICogbWFwIHZpZXcgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIGZvciB0aGUgcGl4ZWwgcG9zaXRpb24uXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0sIHBpeGVsLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBjb250cm9scy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBjb250cm9sc1xuICAgICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IENvbnRyb2xzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvbnRyb2xzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9scztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIG92ZXJsYXlzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIG92ZXJsYXlzXG4gICAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IE92ZXJsYXlzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5c187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gb3ZlcmxheSBieSBpdHMgaWRlbnRpZmllciAodGhlIHZhbHVlIHJldHVybmVkIGJ5IG92ZXJsYXkuZ2V0SWQoKSkuXG4gICAgICogTm90ZSB0aGF0IHRoZSBpbmRleCB0cmVhdHMgc3RyaW5nIGFuZCBudW1lcmljIGlkZW50aWZpZXJzIGFzIHRoZSBzYW1lLiBTb1xuICAgICAqIGBtYXAuZ2V0T3ZlcmxheUJ5SWQoMilgIHdpbGwgcmV0dXJuIGFuIG92ZXJsYXkgd2l0aCBpZCBgJzInYCBvciBgMmAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZCBPdmVybGF5IGlkZW50aWZpZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IE92ZXJsYXkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUJ5SWQgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgdmFyIG92ZXJsYXkgPSB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICAgICAgcmV0dXJuIG92ZXJsYXkgIT09IHVuZGVmaW5lZCA/IG92ZXJsYXkgOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgaW50ZXJhY3Rpb25zLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGludGVyYWN0aW9uc1xuICAgICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgICAqXG4gICAgICogSW50ZXJhY3Rpb25zIGFyZSB1c2VkIGZvciBlLmcuIHBhbiwgem9vbSBhbmQgcm90YXRlLlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gSW50ZXJhY3Rpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEludGVyYWN0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJhY3Rpb25zO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsYXllcmdyb3VwIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtMYXllckdyb3VwfSBBIGxheWVyIGdyb3VwIGNvbnRhaW5pbmcgdGhlIGxheWVycyBpbiB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldExheWVyR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0xheWVyR3JvdXB9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5MQVlFUkdST1VQKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvbGxlY3Rpb24gb2YgbGF5ZXJzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC5cbiAgICAgKiBAcmV0dXJuIHshQ29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD59IExheWVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICAgICAgcmV0dXJuIGxheWVycztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IExheWVycyBoYXZlIHNvdXJjZXMgdGhhdCBhcmUgc3RpbGwgbG9hZGluZy5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldExvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJTdGF0ZXNBcnJheSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGVzQXJyYXlbaV0ubGF5ZXI7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikuZ2V0U291cmNlKCk7XG4gICAgICAgICAgICBpZiAoc291cmNlICYmIHNvdXJjZS5sb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwaXhlbCBmb3IgYSBjb29yZGluYXRlLiAgVGhpcyB0YWtlcyBhIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXJcbiAgICAgKiBwcm9qZWN0aW9uIGFuZCByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBBIHBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHZhciB2aWV3Q29vcmRpbmF0ZSA9IGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwodmlld0Nvb3JkaW5hdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwaXhlbCBmb3IgYSBjb29yZGluYXRlLiAgVGhpcyB0YWtlcyBhIGNvb3JkaW5hdGUgaW4gdGhlIG1hcCB2aWV3XG4gICAgICogcHJvamVjdGlvbiBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIEEgbWFwIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGNvb3JkaW5hdGUuc2xpY2UoMCwgMikpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCByZW5kZXJlci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JlbmRlcmVyL01hcC5qc1wiKS5kZWZhdWx0fSBSZW5kZXJlclxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0UmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc2l6ZSBvZiB0aGlzIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9IFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgbWFwIGluIHRoZSBET00uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5TSVpFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLiBBIHZpZXcgbWFuYWdlcyBwcm9wZXJ0aWVzIHN1Y2ggYXNcbiAgICAgKiBjZW50ZXIgYW5kIHJlc29sdXRpb24uXG4gICAgICogQHJldHVybiB7Vmlld30gVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge1ZpZXd9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5WSUVXKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVmlld3BvcnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Vmlld3BvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdwb3J0XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgY29udGFpbmVyIGZvciBvdmVybGF5cy4gIEVsZW1lbnRzIGFkZGVkIHRvXG4gICAgICogdGhpcyBjb250YWluZXIgd2lsbCBsZXQgbW91c2Vkb3duIGFuZCB0b3VjaHN0YXJ0IGV2ZW50cyB0aHJvdWdoIHRvIHRoZSBtYXAsXG4gICAgICogc28gY2xpY2tzIGFuZCBnZXN0dXJlcyBvbiBhbiBvdmVybGF5IHdpbGwgdHJpZ2dlciB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9XG4gICAgICogZXZlbnRzLlxuICAgICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgYSBjb250YWluZXIgZm9yIG92ZXJsYXlzIHRoYXQgZG9uJ3QgYWxsb3dcbiAgICAgKiBldmVudCBwcm9wYWdhdGlvbi4gRWxlbWVudHMgYWRkZWQgdG8gdGhpcyBjb250YWluZXIgd29uJ3QgbGV0IG1vdXNlZG93biBhbmRcbiAgICAgKiB0b3VjaHN0YXJ0IGV2ZW50cyB0aHJvdWdoIHRvIHRoZSBtYXAsIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheVxuICAgICAqIGRvbid0IHRyaWdnZXIgYW55IHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0uXG4gICAgICogQHJldHVybiB7IUhUTUxFbGVtZW50fSBUaGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIgdGhhdCBzdG9wcyBldmVudHMuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4geyFEb2N1bWVudH0gVGhlIGRvY3VtZW50IHdoZXJlIHRoZSBtYXAgaXMgZGlzcGxheWVkLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3duZXJEb2N1bWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldEVsZW1lbnQgPyB0YXJnZXRFbGVtZW50Lm93bmVyRG9jdW1lbnQgOiBkb2N1bWVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGlsZVNvdXJjZUtleSBUaWxlIHNvdXJjZSBrZXkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gdGlsZUNlbnRlciBUaWxlIGNlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwcmlvcml0eS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRpbGVQcmlvcml0eSA9IGZ1bmN0aW9uICh0aWxlLCB0aWxlU291cmNlS2V5LCB0aWxlQ2VudGVyLCB0aWxlUmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZ2V0VGlsZVByaW9yaXR5KHRoaXMuZnJhbWVTdGF0ZV8sIHRpbGUsIHRpbGVTb3VyY2VLZXksIHRpbGVDZW50ZXIsIHRpbGVSZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VUlFdmVudH0gYnJvd3NlckV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRfdHlwZV0gVHlwZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZUJyb3dzZXJFdmVudCA9IGZ1bmN0aW9uIChicm93c2VyRXZlbnQsIG9wdF90eXBlKSB7XG4gICAgICAgIHZhciB0eXBlID0gb3B0X3R5cGUgfHwgYnJvd3NlckV2ZW50LnR5cGU7XG4gICAgICAgIHZhciBtYXBCcm93c2VyRXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KHR5cGUsIHRoaXMsIGJyb3dzZXJFdmVudCk7XG4gICAgICAgIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01hcEJyb3dzZXJFdmVudH0gbWFwQnJvd3NlckV2ZW50IFRoZSBldmVudCB0byBoYW5kbGUuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVNYXBCcm93c2VyRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgLy8gV2l0aCBubyB2aWV3IGRlZmluZWQsIHdlIGNhbm5vdCB0cmFuc2xhdGUgcGl4ZWxzIGludG8gZ2VvZ3JhcGhpY2FsXG4gICAgICAgICAgICAvLyBjb29yZGluYXRlcyBzbyBpbnRlcmFjdGlvbnMgY2Fubm90IGJlIHVzZWQuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgdmFyIGV2ZW50VHlwZSA9IG9yaWdpbmFsRXZlbnQudHlwZTtcbiAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiB8fFxuICAgICAgICAgICAgZXZlbnRUeXBlID09PSBFdmVudFR5cGUuV0hFRUwgfHxcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLktFWURPV04pIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLmdldE93bmVyRG9jdW1lbnQoKTtcbiAgICAgICAgICAgIHZhciByb290Tm9kZSA9IHRoaXMudmlld3BvcnRfLmdldFJvb3ROb2RlXG4gICAgICAgICAgICAgICAgPyB0aGlzLnZpZXdwb3J0Xy5nZXRSb290Tm9kZSgpXG4gICAgICAgICAgICAgICAgOiBkb2M7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gLyoqIEB0eXBlIHtOb2RlfSAqLyAob3JpZ2luYWxFdmVudC50YXJnZXQpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhlIHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIgZm9yIGVsZW1lbnRzIHdob3NlIGV2ZW50cyBhcmUgbm90IG1lYW50XG4gICAgICAgICAgICAvLyB0byBiZSBoYW5kbGVkIGJ5IG1hcCBpbnRlcmFjdGlvbnMuXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNvbnRhaW5zKHRhcmdldCkgfHxcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCBpZiB0aGUgZXZlbnQgdGFyZ2V0IGlzIGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lciB0aGF0IGlzIG5vIGxvbmdlciBpbiB0aGUgcGFnZS5cbiAgICAgICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIGZvciB0aGUgdGFyZ2V0IHRvIG5vIGxvbmdlciBiZSBpbiB0aGUgcGFnZSBpZiBpdCBoYXMgYmVlbiByZW1vdmVkIGluIGFuXG4gICAgICAgICAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXIsIHRoaXMgbWlnaHQgaGFwcGVuIGluIGEgQ29udHJvbCB0aGF0IHJlY3JlYXRlcyBpdCdzIGNvbnRlbnQgYmFzZWQgb25cbiAgICAgICAgICAgICAgICAvLyB1c2VyIGludGVyYWN0aW9uIGVpdGhlciBtYW51YWxseSBvciB2aWEgYSByZW5kZXIgaW4gc29tZXRoaW5nIGxpa2UgaHR0cHM6Ly9yZWFjdGpzLm9yZy9cbiAgICAgICAgICAgICAgICAhKHJvb3ROb2RlID09PSBkb2MgPyBkb2MuZG9jdW1lbnRFbGVtZW50IDogcm9vdE5vZGUpLmNvbnRhaW5zKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaEV2ZW50KG1hcEJyb3dzZXJFdmVudCkgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICB2YXIgaW50ZXJhY3Rpb25zQXJyYXkgPSB0aGlzLmdldEludGVyYWN0aW9ucygpLmdldEFycmF5KCkuc2xpY2UoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBpbnRlcmFjdGlvbnNBcnJheS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgIHZhciBpbnRlcmFjdGlvbiA9IGludGVyYWN0aW9uc0FycmF5W2ldO1xuICAgICAgICAgICAgICAgIGlmIChpbnRlcmFjdGlvbi5nZXRNYXAoKSAhPT0gdGhpcyB8fFxuICAgICAgICAgICAgICAgICAgICAhaW50ZXJhY3Rpb24uZ2V0QWN0aXZlKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY29udCA9IGludGVyYWN0aW9uLmhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250IHx8IG1hcEJyb3dzZXJFdmVudC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVQb3N0UmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIC8vIE1hbmFnZSB0aGUgdGlsZSBxdWV1ZVxuICAgICAgICAvLyBJbWFnZSBsb2FkcyBhcmUgZXhwZW5zaXZlIGFuZCBhIGxpbWl0ZWQgcmVzb3VyY2UsIHNvIHRyeSB0byB1c2UgdGhlbVxuICAgICAgICAvLyBlZmZpY2llbnRseTpcbiAgICAgICAgLy8gKiBXaGVuIHRoZSB2aWV3IGlzIHN0YXRpYyB3ZSBhbGxvdyBhIGxhcmdlIG51bWJlciBvZiBwYXJhbGxlbCB0aWxlIGxvYWRzXG4gICAgICAgIC8vICAgdG8gY29tcGxldGUgdGhlIGZyYW1lIGFzIHF1aWNrbHkgYXMgcG9zc2libGUuXG4gICAgICAgIC8vICogV2hlbiBhbmltYXRpbmcgb3IgaW50ZXJhY3RpbmcsIGltYWdlIGxvYWRzIGNhbiBjYXVzZSBqYW5rcywgc28gd2UgcmVkdWNlXG4gICAgICAgIC8vICAgdGhlIG1heGltdW0gbnVtYmVyIG9mIGxvYWRzIHBlciBmcmFtZSBhbmQgbGltaXQgdGhlIG51bWJlciBvZiBwYXJhbGxlbFxuICAgICAgICAvLyAgIHRpbGUgbG9hZHMgdG8gcmVtYWluIHJlYWN0aXZlIHRvIHZpZXcgY2hhbmdlcyBhbmQgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2ZcbiAgICAgICAgLy8gICBsb2FkaW5nIHRpbGVzIHRoYXQgd2lsbCBxdWlja2x5IGRpc2FwcGVhciBmcm9tIHZpZXcuXG4gICAgICAgIHZhciB0aWxlUXVldWUgPSB0aGlzLnRpbGVRdWV1ZV87XG4gICAgICAgIGlmICghdGlsZVF1ZXVlLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgdmFyIG1heFRvdGFsTG9hZGluZyA9IHRoaXMubWF4VGlsZXNMb2FkaW5nXztcbiAgICAgICAgICAgIHZhciBtYXhOZXdMb2FkcyA9IG1heFRvdGFsTG9hZGluZztcbiAgICAgICAgICAgIGlmIChmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhpbnRzID0gZnJhbWVTdGF0ZS52aWV3SGludHM7XG4gICAgICAgICAgICAgICAgaWYgKGhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gfHwgaGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsb3dPbkZyYW1lQnVkZ2V0ID0gRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDg7XG4gICAgICAgICAgICAgICAgICAgIG1heFRvdGFsTG9hZGluZyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogODtcbiAgICAgICAgICAgICAgICAgICAgbWF4TmV3TG9hZHMgPSBsb3dPbkZyYW1lQnVkZ2V0ID8gMCA6IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpbGVRdWV1ZS5nZXRUaWxlc0xvYWRpbmcoKSA8IG1heFRvdGFsTG9hZGluZykge1xuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5yZXByaW9yaXRpemUoKTsgLy8gRklYTUUgb25seSBjYWxsIGlmIHZpZXcgaGFzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICB0aWxlUXVldWUubG9hZE1vcmVUaWxlcyhtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZnJhbWVTdGF0ZSAmJlxuICAgICAgICAgICAgdGhpcy5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUpICYmXG4gICAgICAgICAgICAhZnJhbWVTdGF0ZS5hbmltYXRlICYmXG4gICAgICAgICAgICAhdGhpcy50aWxlUXVldWVfLmdldFRpbGVzTG9hZGluZygpICYmXG4gICAgICAgICAgICAhdGhpcy5nZXRMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlJFTkRFUkNPTVBMRVRFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcG9zdFJlbmRlckZ1bmN0aW9ucyA9IHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc187XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uc1tpXSh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlU2l6ZUNoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRWaWV3KCkgJiYgIXRoaXMuZ2V0VmlldygpLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLmdldFZpZXcoKS5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVUYXJnZXRDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gdGFyZ2V0IG1heSBiZSB1bmRlZmluZWQsIG51bGwsIGEgc3RyaW5nIG9yIGFuIEVsZW1lbnQuXG4gICAgICAgIC8vIElmIGl0J3MgYSBzdHJpbmcgd2UgY29udmVydCBpdCB0byBhbiBFbGVtZW50IGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICAvLyBJZiBpdCdzIG5vdCBub3cgYW4gRWxlbWVudCB3ZSByZW1vdmUgdGhlIHZpZXdwb3J0IGZyb20gdGhlIERPTS5cbiAgICAgICAgLy8gSWYgaXQncyBhbiBFbGVtZW50IHdlIGFwcGVuZCB0aGUgdmlld3BvcnQgZWxlbWVudCB0byBpdC5cbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQ7XG4gICAgICAgIGlmICh0aGlzLmdldFRhcmdldCgpKSB7XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMua2V5SGFuZGxlcktleXNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMua2V5SGFuZGxlcktleXNfW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMua2V5SGFuZGxlcktleXNfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8pO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFuZGxlUmVzaXplXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUkVTSVpFLCB0aGlzLmhhbmRsZVJlc2l6ZV8sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuICAgICAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8pO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyXy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheUtleV8pO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbmV3IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIodGhpcywgdGhpcy5tb3ZlVG9sZXJhbmNlXyk7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gTWFwQnJvd3NlckV2ZW50VHlwZSkge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8uYWRkRXZlbnRMaXN0ZW5lcihNYXBCcm93c2VyRXZlbnRUeXBlW2tleV0sIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ09OVEVYVE1FTlUsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8sIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2UpO1xuICAgICAgICAgICAgdmFyIGtleWJvYXJkRXZlbnRUYXJnZXQgPSAhdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0X1xuICAgICAgICAgICAgICAgID8gdGFyZ2V0RWxlbWVudFxuICAgICAgICAgICAgICAgIDogdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0XztcbiAgICAgICAgICAgIHRoaXMua2V5SGFuZGxlcktleXNfID0gW1xuICAgICAgICAgICAgICAgIGxpc3RlbihrZXlib2FyZEV2ZW50VGFyZ2V0LCBFdmVudFR5cGUuS0VZRE9XTiwgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihrZXlib2FyZEV2ZW50VGFyZ2V0LCBFdmVudFR5cGUuS0VZUFJFU1MsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlUmVzaXplXykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmVzaXplXyA9IHRoaXMudXBkYXRlU2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5SRVNJWkUsIHRoaXMuaGFuZGxlUmVzaXplXywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgICAvLyB1cGRhdGVTaXplIGNhbGxzIHNldFNpemUsIHNvIG5vIG5lZWQgdG8gY2FsbCB0aGlzLnJlbmRlclxuICAgICAgICAvLyBvdXJzZWx2ZXMgaGVyZS5cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3Q2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydFNpemVfKCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IGxpc3Rlbih2aWV3LCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbGlzdGVuKHZpZXcsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgICAgICAgICAgdmlldy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18pIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGF5ZXJHcm91cCA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpO1xuICAgICAgICBpZiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gW1xuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllckdyb3VwLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMucmVuZGVyLCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5yZW5kZXIsIHRoaXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgcmVuZGVyZWQuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5pc1JlbmRlcmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmZyYW1lU3RhdGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVxdWVzdHMgYW4gaW1tZWRpYXRlIHJlbmRlciBpbiBhIHN5bmNocm9ub3VzIG1hbm5lci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXJTeW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5XygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVkcmF3cyBhbGwgdGV4dCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlZHJhd1RleHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllclN0YXRlcyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyID0gbGF5ZXJTdGF0ZXNbaV0ubGF5ZXI7XG4gICAgICAgICAgICBpZiAobGF5ZXIuaGFzUmVuZGVyZXIoKSkge1xuICAgICAgICAgICAgICAgIGxheWVyLmdldFJlbmRlcmVyKCkuaGFuZGxlRm9udHNDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcXVlc3QgYSBtYXAgcmVuZGVyaW5nIChhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZXJfICYmIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBnaXZlbiBjb250cm9sIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgY29udHJvbCAob3IgdW5kZWZpbmVkXG4gICAgICogICAgIGlmIHRoZSBjb250cm9sIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUNvbnRyb2wgPSBmdW5jdGlvbiAoY29udHJvbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb250cm9scygpLnJlbW92ZShjb250cm9sKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gZnJvbSB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fSBpbnRlcmFjdGlvbiBJbnRlcmFjdGlvbiB0byByZW1vdmUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgaW50ZXJhY3Rpb24gKG9yXG4gICAgICogICAgIHVuZGVmaW5lZCBpZiB0aGUgaW50ZXJhY3Rpb24gd2FzIG5vdCBmb3VuZCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAoaW50ZXJhY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkucmVtb3ZlKGludGVyYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIGxheWVyIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGxheWVyIChvciB1bmRlZmluZWQgaWYgdGhlXG4gICAgICogICAgIGxheWVyIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUxheWVyID0gZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICAgICAgcmV0dXJuIGxheWVycy5yZW1vdmUobGF5ZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBnaXZlbiBvdmVybGF5IGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBvdmVybGF5IChvciB1bmRlZmluZWRcbiAgICAgKiAgICAgaWYgdGhlIG92ZXJsYXkgd2FzIG5vdCBmb3VuZCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVtb3ZlT3ZlcmxheSA9IGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE92ZXJsYXlzKCkucmVtb3ZlKG92ZXJsYXkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgVGltZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyRnJhbWVfID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFNpemUoKTtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICAgICAgdmFyIHByZXZpb3VzRnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIC8qKiBAdHlwZSB7P0ZyYW1lU3RhdGV9ICovXG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gbnVsbDtcbiAgICAgICAgaWYgKHNpemUgIT09IHVuZGVmaW5lZCAmJiBoYXNBcmVhKHNpemUpICYmIHZpZXcgJiYgdmlldy5pc0RlZigpKSB7XG4gICAgICAgICAgICB2YXIgdmlld0hpbnRzID0gdmlldy5nZXRIaW50cyh0aGlzLmZyYW1lU3RhdGVfID8gdGhpcy5mcmFtZVN0YXRlXy52aWV3SGludHMgOiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUgPSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm06IHRoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fLFxuICAgICAgICAgICAgICAgIGRlY2x1dHRlclRyZWU6IG51bGwsXG4gICAgICAgICAgICAgICAgZXh0ZW50OiBnZXRGb3JWaWV3QW5kU2l6ZSh2aWV3U3RhdGUuY2VudGVyLCB2aWV3U3RhdGUucmVzb2x1dGlvbiwgdmlld1N0YXRlLnJvdGF0aW9uLCBzaXplKSxcbiAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5mcmFtZUluZGV4XysrLFxuICAgICAgICAgICAgICAgIGxheWVySW5kZXg6IDAsXG4gICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZXNBcnJheTogdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJTdGF0ZXNBcnJheSgpLFxuICAgICAgICAgICAgICAgIHBpeGVsUmF0aW86IHRoaXMucGl4ZWxSYXRpb18sXG4gICAgICAgICAgICAgICAgcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm06IHRoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fLFxuICAgICAgICAgICAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnM6IFtdLFxuICAgICAgICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgICAgICAgdGlsZVF1ZXVlOiB0aGlzLnRpbGVRdWV1ZV8sXG4gICAgICAgICAgICAgICAgdGltZTogdGltZSxcbiAgICAgICAgICAgICAgICB1c2VkVGlsZXM6IHt9LFxuICAgICAgICAgICAgICAgIHZpZXdTdGF0ZTogdmlld1N0YXRlLFxuICAgICAgICAgICAgICAgIHZpZXdIaW50czogdmlld0hpbnRzLFxuICAgICAgICAgICAgICAgIHdhbnRlZFRpbGVzOiB7fSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmFtZVN0YXRlXyA9IGZyYW1lU3RhdGU7XG4gICAgICAgIHRoaXMucmVuZGVyZXJfLnJlbmRlckZyYW1lKGZyYW1lU3RhdGUpO1xuICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKGZyYW1lU3RhdGUuYW5pbWF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLCBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzRnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBtb3ZlU3RhcnQgPSAhdGhpcy5wcmV2aW91c0V4dGVudF8gfHxcbiAgICAgICAgICAgICAgICAgICAgKCFpc0VtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIWVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pKTtcbiAgICAgICAgICAgICAgICBpZiAobW92ZVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLk1PVkVTVEFSVCwgdGhpcywgcHJldmlvdXNGcmFtZVN0YXRlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNFeHRlbnRfID0gY3JlYXRlT3JVcGRhdGVFbXB0eSh0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlkbGUgPSB0aGlzLnByZXZpb3VzRXh0ZW50XyAmJlxuICAgICAgICAgICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5BTklNQVRJTkddICYmXG4gICAgICAgICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSAmJlxuICAgICAgICAgICAgICAgICFlcXVhbHMoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgIGlmIChpZGxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRUVORCwgdGhpcywgZnJhbWVTdGF0ZSkpO1xuICAgICAgICAgICAgICAgIGNsb25lKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuUE9TVFJFTkRFUiwgdGhpcywgZnJhbWVTdGF0ZSkpO1xuICAgICAgICBpZiAoIXRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfKSB7XG4gICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVQb3N0UmVuZGVyKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbGF5ZXJncm91cCBvZiB0aGlzIG1hcC5cbiAgICAgKiBAcGFyYW0ge0xheWVyR3JvdXB9IGxheWVyR3JvdXAgQSBsYXllciBncm91cCBjb250YWluaW5nIHRoZSBsYXllcnMgaW4gdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRMYXllckdyb3VwID0gZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCwgbGF5ZXJHcm91cCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9IHNpemUgVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBtYXAgaW4gdGhlIERPTS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5TSVpFLCBzaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGFyZ2V0IGVsZW1lbnQgdG8gcmVuZGVyIHRoaXMgbWFwIGludG8uXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFRoZSBFbGVtZW50IG9yIGlkIG9mIHRoZSBFbGVtZW50XG4gICAgICogICAgIHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuVEFSR0VULCB0YXJnZXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2aWV3IGZvciB0aGlzIG1hcC5cbiAgICAgKiBAcGFyYW0ge1ZpZXd9IHZpZXcgVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnNldFZpZXcgPSBmdW5jdGlvbiAodmlldykge1xuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5WSUVXLCB2aWV3KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvcmNlIGEgcmVjYWxjdWxhdGlvbiBvZiB0aGUgbWFwIHZpZXdwb3J0IHNpemUuICBUaGlzIHNob3VsZCBiZSBjYWxsZWQgd2hlblxuICAgICAqIHRoaXJkLXBhcnR5IGNvZGUgY2hhbmdlcyB0aGUgc2l6ZSBvZiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnVwZGF0ZVNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgICAgIHZhciBzaXplID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRhcmdldEVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGFyZ2V0RWxlbWVudC5vZmZzZXRXaWR0aCAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJMZWZ0V2lkdGgnXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ0xlZnQnXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ1JpZ2h0J10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlclJpZ2h0V2lkdGgnXSk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGFyZ2V0RWxlbWVudC5vZmZzZXRIZWlnaHQgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyVG9wV2lkdGgnXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ1RvcCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nQm90dG9tJ10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckJvdHRvbVdpZHRoJ10pO1xuICAgICAgICAgICAgaWYgKCFpc05hTih3aWR0aCkgJiYgIWlzTmFOKGhlaWdodCkpIHtcbiAgICAgICAgICAgICAgICBzaXplID0gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgICAgICAgICAgIGlmICghaGFzQXJlYShzaXplKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gbWFwIHZpc2libGUgYmVjYXVzZSB0aGUgbWFwIGNvbnRhaW5lcidzIHdpZHRoIG9yIGhlaWdodCBhcmUgMC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U2l6ZShzaXplKTtcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydFNpemVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGVzIHRoZSB2aWV3cG9ydCBzaXplIGFuZCBzYXZlIGl0IG9uIHRoZSB2aWV3IG9iamVjdCAoaWYgYW55KVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51cGRhdGVWaWV3cG9ydFNpemVfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdmFyIHNpemUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICAgICAgaWYgKGNvbXB1dGVkU3R5bGUud2lkdGggJiYgY29tcHV0ZWRTdHlsZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzaXplID0gW1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChjb21wdXRlZFN0eWxlLndpZHRoLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuaGVpZ2h0LCAxMCksXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpZXcuc2V0Vmlld3BvcnRTaXplKHNpemUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGx1Z2dhYmxlTWFwO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7TWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAqIEByZXR1cm4ge01hcE9wdGlvbnNJbnRlcm5hbH0gSW50ZXJuYWwgbWFwIG9wdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fERvY3VtZW50fVxuICAgICAqL1xuICAgIHZhciBrZXlib2FyZEV2ZW50VGFyZ2V0ID0gbnVsbDtcbiAgICBpZiAob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5Ym9hcmRFdmVudFRhcmdldCA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0KVxuICAgICAgICAgICAgICAgIDogb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgdmFyIHZhbHVlcyA9IHt9O1xuICAgIHZhciBsYXllckdyb3VwID0gb3B0aW9ucy5sYXllcnMgJiZcbiAgICAgICAgdHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLmxheWVycykuZ2V0TGF5ZXJzKSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IC8qKiBAdHlwZSB7TGF5ZXJHcm91cH0gKi8gKG9wdGlvbnMubGF5ZXJzKVxuICAgICAgICA6IG5ldyBMYXllckdyb3VwKHsgbGF5ZXJzOiAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmxheWVycykgfSk7XG4gICAgdmFsdWVzW01hcFByb3BlcnR5LkxBWUVSR1JPVVBdID0gbGF5ZXJHcm91cDtcbiAgICB2YWx1ZXNbTWFwUHJvcGVydHkuVEFSR0VUXSA9IG9wdGlvbnMudGFyZ2V0O1xuICAgIHZhbHVlc1tNYXBQcm9wZXJ0eS5WSUVXXSA9XG4gICAgICAgIG9wdGlvbnMudmlldyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy52aWV3IDogbmV3IFZpZXcoKTtcbiAgICB2YXIgY29udHJvbHM7XG4gICAgaWYgKG9wdGlvbnMuY29udHJvbHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmNvbnRyb2xzKSkge1xuICAgICAgICAgICAgY29udHJvbHMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmNvbnRyb2xzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5jb250cm9scykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0Nyk7IC8vIEV4cGVjdGVkIGBjb250cm9sc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgICAgICAgY29udHJvbHMgPSAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmNvbnRyb2xzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgaW50ZXJhY3Rpb25zO1xuICAgIGlmIChvcHRpb25zLmludGVyYWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuaW50ZXJhY3Rpb25zKSkge1xuICAgICAgICAgICAgaW50ZXJhY3Rpb25zID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5pbnRlcmFjdGlvbnMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLmludGVyYWN0aW9ucykuZ2V0QXJyYXkpID09PVxuICAgICAgICAgICAgICAgICdmdW5jdGlvbicsIDQ4KTsgLy8gRXhwZWN0ZWQgYGludGVyYWN0aW9uc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgICAgICAgaW50ZXJhY3Rpb25zID0gLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5pbnRlcmFjdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBvdmVybGF5cztcbiAgICBpZiAob3B0aW9ucy5vdmVybGF5cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMub3ZlcmxheXMpKSB7XG4gICAgICAgICAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMub3ZlcmxheXMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLm92ZXJsYXlzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsIDQ5KTsgLy8gRXhwZWN0ZWQgYG92ZXJsYXlzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICAgICAgICBvdmVybGF5cyA9IG9wdGlvbnMub3ZlcmxheXM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG92ZXJsYXlzID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29udHJvbHM6IGNvbnRyb2xzLFxuICAgICAgICBpbnRlcmFjdGlvbnM6IGludGVyYWN0aW9ucyxcbiAgICAgICAga2V5Ym9hcmRFdmVudFRhcmdldDoga2V5Ym9hcmRFdmVudFRhcmdldCxcbiAgICAgICAgb3ZlcmxheXM6IG92ZXJsYXlzLFxuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgUGx1Z2dhYmxlTWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGx1Z2dhYmxlTWFwLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9Db250cm9sXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgTWFwRXZlbnRUeXBlIGZyb20gJy4uL01hcEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQgeyByZW1vdmVOb2RlIH0gZnJvbSAnLi4vZG9tLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gW2VsZW1lbnRdIFRoZSBlbGVtZW50IGlzIHRoZSBjb250cm9sJ3NcbiAqIGNvbnRhaW5lciBlbGVtZW50LiBUaGlzIG9ubHkgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIGlmIHlvdSdyZSBkZXZlbG9waW5nXG4gKiBhIGN1c3RvbSBjb250cm9sLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50XG4gKiB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbnRyb2wgaXMgYSB2aXNpYmxlIHdpZGdldCB3aXRoIGEgRE9NIGVsZW1lbnQgaW4gYSBmaXhlZCBwb3NpdGlvbiBvbiB0aGVcbiAqIHNjcmVlbi4gVGhleSBjYW4gaW52b2x2ZSB1c2VyIGlucHV0IChidXR0b25zKSwgb3IgYmUgaW5mb3JtYXRpb25hbCBvbmx5O1xuICogdGhlIHBvc2l0aW9uIGlzIGRldGVybWluZWQgdXNpbmcgQ1NTLiBCeSBkZWZhdWx0IHRoZXNlIGFyZSBwbGFjZWQgaW4gdGhlXG4gKiBjb250YWluZXIgd2l0aCBDU1MgY2xhc3MgbmFtZSBgb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRgLCBidXQgY2FuIHVzZVxuICogYW55IG91dHNpZGUgRE9NIGVsZW1lbnQuXG4gKlxuICogVGhpcyBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgY29udHJvbHMuIFlvdSBjYW4gdXNlIGl0IGZvciBzaW1wbGUgY3VzdG9tXG4gKiBjb250cm9scyBieSBjcmVhdGluZyB0aGUgZWxlbWVudCB3aXRoIGxpc3RlbmVycywgY3JlYXRpbmcgYW4gaW5zdGFuY2U6XG4gKiBgYGBqc1xuICogdmFyIG15Q29udHJvbCA9IG5ldyBDb250cm9sKHtlbGVtZW50OiBteUVsZW1lbnR9KTtcbiAqIGBgYFxuICogYW5kIHRoZW4gYWRkaW5nIHRoaXMgdG8gdGhlIG1hcC5cbiAqXG4gKiBUaGUgbWFpbiBhZHZhbnRhZ2Ugb2YgaGF2aW5nIHRoaXMgYXMgYSBjb250cm9sIHJhdGhlciB0aGFuIGEgc2ltcGxlIHNlcGFyYXRlXG4gKiBET00gZWxlbWVudCBpcyB0aGF0IHByZXZlbnRpbmcgcHJvcGFnYXRpb24gaXMgaGFuZGxlZCBmb3IgeW91LiBDb250cm9sc1xuICogd2lsbCBhbHNvIGJlIG9iamVjdHMgaW4gYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0sIHNvIHlvdSBjYW4gdXNlIHRoZWlyIG1ldGhvZHMuXG4gKlxuICogWW91IGNhbiBhbHNvIGV4dGVuZCB0aGlzIGJhc2UgZm9yIHlvdXIgb3duIGNvbnRyb2wgY2xhc3MuIFNlZVxuICogZXhhbXBsZXMvY3VzdG9tLWNvbnRyb2xzIGZvciBhbiBleGFtcGxlIG9mIGhvdyB0byBkbyB0aGlzLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIENvbnRyb2wgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvbnRyb2wsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIENvbnRyb2wgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb250cm9sKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XG4gICAgICAgIGlmIChlbGVtZW50ICYmICFvcHRpb25zLnRhcmdldCAmJiAhZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzKSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudCA9IGVsZW1lbnQgPyBlbGVtZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcktleXMgPSBbXTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFRhcmdldChvcHRpb25zLnRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGNvbnRyb2wuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBjb250cm9sIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAgICogdGhlIG1hcCBoZXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5saXN0ZW5lcktleXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0X1xuICAgICAgICAgICAgICAgID8gdGhpcy50YXJnZXRfXG4gICAgICAgICAgICAgICAgOiBtYXAuZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCgpO1xuICAgICAgICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXIgIT09IFZPSUQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3RlbihtYXAsIE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLnJlbmRlciwgdGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFwLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXJzIHRoZSBjb250cm9sLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHsgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gc2V0IGEgdGFyZ2V0IGVsZW1lbnQgZm9yIHRoZSBjb250cm9sLiBJdCBoYXMgbm9cbiAgICAgKiBlZmZlY3QgaWYgaXQgaXMgY2FsbGVkIGFmdGVyIHRoZSBjb250cm9sIGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBtYXAgKGkuZS5cbiAgICAgKiBhZnRlciBgc2V0TWFwYCBpcyBjYWxsZWQgb24gdGhlIGNvbnRyb2wpLiBJZiBubyBgdGFyZ2V0YCBpcyBzZXQgaW4gdGhlXG4gICAgICogb3B0aW9ucyBwYXNzZWQgdG8gdGhlIGNvbnRyb2wgY29uc3RydWN0b3IgYW5kIGlmIGBzZXRUYXJnZXRgIGlzIG5vdCBjYWxsZWRcbiAgICAgKiB0aGVuIHRoZSBjb250cm9sIGlzIGFkZGVkIHRvIHRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gdGFyZ2V0IFRhcmdldC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuc2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldF8gPVxuICAgICAgICAgICAgdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpIDogdGFyZ2V0O1xuICAgIH07XG4gICAgcmV0dXJuIENvbnRyb2w7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IENvbnRyb2w7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db250cm9sLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9BdHRyaWJ1dGlvblxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IENMQVNTX0NPTExBUFNFRCwgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGluVmlldyB9IGZyb20gJy4uL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCB7IHJlbW92ZUNoaWxkcmVuLCByZXBsYWNlTm9kZSB9IGZyb20gJy4uL2RvbS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1hdHRyaWJ1dGlvbiddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91XG4gKiB3YW50IHRoZSBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzXG4gKiB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNpYmxlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBjYW5cbiAqIGJlIGNvbGxhcHNlZC4gSWYgbm90IHNwZWNpZmllZCwgc291cmNlcyBjb250cm9sIHRoaXMgYmVoYXZpb3Igd2l0aCB0aGVpclxuICogYGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlYCBzZXR0aW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29sbGFwc2VkPXRydWVdIFNwZWNpZnkgaWYgYXR0cmlidXRpb25zIHNob3VsZFxuICogYmUgY29sbGFwc2VkIGF0IHN0YXJ0dXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RpcExhYmVsPSdBdHRyaWJ1dGlvbnMnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xhYmVsPSdpJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZVxuICogY29sbGFwc2VkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZXhwYW5kQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctZXhwYW5kJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZVxuICogY29sbGFwc2VkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2NvbGxhcHNlTGFiZWw9J8K7J10gVGV4dCBsYWJlbCB0byB1c2VcbiAqIGZvciB0aGUgZXhwYW5kZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb2xsYXBzZUNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWNvbGxhcHNlJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZVxuICogZXhwYW5kZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW5cbiAqIHRoZSBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ29udHJvbCB0byBzaG93IGFsbCB0aGUgYXR0cmlidXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgbGF5ZXIgc291cmNlc1xuICogaW4gdGhlIG1hcC4gVGhpcyBjb250cm9sIGlzIG9uZSBvZiB0aGUgZGVmYXVsdCBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzLlxuICogQnkgZGVmYXVsdCBpdCB3aWxsIHNob3cgaW4gdGhlIGJvdHRvbSByaWdodCBwb3J0aW9uIG9mIHRoZSBtYXAsIGJ1dCB0aGlzIGNhblxuICogYmUgY2hhbmdlZCBieSB1c2luZyBhIGNzcyBzZWxlY3RvciBmb3IgYC5vbC1hdHRyaWJ1dGlvbmAuXG4gKlxuICogQGFwaVxuICovXG52YXIgQXR0cmlidXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF0dHJpYnV0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBBdHRyaWJ1dGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEF0dHJpYnV0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bEVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29sbGFwc2VkXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbGxhcHNlZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzZWQgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51c2VyQ29sbGFwc2VkXyA9IF90aGlzLmNvbGxhcHNlZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfID0gb3B0aW9ucy5jb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2xsYXBzaWJsZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzaWJsZSA6IHRydWU7XG4gICAgICAgIGlmICghX3RoaXMuY29sbGFwc2libGVfKSB7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZWRfID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1hdHRyaWJ1dGlvbic7XG4gICAgICAgIHZhciB0aXBMYWJlbCA9IG9wdGlvbnMudGlwTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnQXR0cmlidXRpb25zJztcbiAgICAgICAgdmFyIGV4cGFuZENsYXNzTmFtZSA9IG9wdGlvbnMuZXhwYW5kQ2xhc3NOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5leHBhbmRDbGFzc05hbWVcbiAgICAgICAgICAgIDogY2xhc3NOYW1lICsgJy1leHBhbmQnO1xuICAgICAgICB2YXIgY29sbGFwc2VMYWJlbCA9IG9wdGlvbnMuY29sbGFwc2VMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzZUxhYmVsIDogJ1xcdTAwQkInO1xuICAgICAgICB2YXIgY29sbGFwc2VDbGFzc05hbWUgPSBvcHRpb25zLmNvbGxhcHNlQ2xhc3NOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5jb2xsYXBzZUNsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWNvbGxwYXNlJztcbiAgICAgICAgaWYgKHR5cGVvZiBjb2xsYXBzZUxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfLnRleHRDb250ZW50ID0gY29sbGFwc2VMYWJlbDtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfLmNsYXNzTmFtZSA9IGNvbGxhcHNlQ2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8gPSBjb2xsYXBzZUxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYWJlbCA9IG9wdGlvbnMubGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGFiZWwgOiAnaSc7XG4gICAgICAgIGlmICh0eXBlb2YgbGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLmNsYXNzTmFtZSA9IGV4cGFuZENsYXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhY3RpdmVMYWJlbCA9IF90aGlzLmNvbGxhcHNpYmxlXyAmJiAhX3RoaXMuY29sbGFwc2VkXyA/IF90aGlzLmNvbGxhcHNlTGFiZWxfIDogX3RoaXMubGFiZWxfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIV90aGlzLmNvbGxhcHNlZF8pKTtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy50aXRsZSA9IHRpcExhYmVsO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLmFwcGVuZENoaWxkKGFjdGl2ZUxhYmVsKTtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICtcbiAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICBDTEFTU19VTlNFTEVDVEFCTEUgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIENMQVNTX0NPTlRST0wgK1xuICAgICAgICAgICAgKF90aGlzLmNvbGxhcHNlZF8gJiYgX3RoaXMuY29sbGFwc2libGVfID8gJyAnICsgQ0xBU1NfQ09MTEFQU0VEIDogJycpICtcbiAgICAgICAgICAgIChfdGhpcy5jb2xsYXBzaWJsZV8gPyAnJyA6ICcgb2wtdW5jb2xsYXBzaWJsZScpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChfdGhpcy50b2dnbGVCdXR0b25fKTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChfdGhpcy51bEVsZW1lbnRfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiBjdXJyZW50bHkgcmVuZGVyZWQgcmVzb2x1dGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbGxlY3QgYSBsaXN0IG9mIHZpc2libGUgYXR0cmlidXRpb25zIGFuZCBzZXQgdGhlIGNvbGxhcHNpYmxlIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gQXR0cmlidXRpb25zLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIGFuIGF0dHJpYnV0aW9uIGFscmVhZHkgZXhpc3RzLlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGxvb2t1cCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHZpc2libGUgYXR0cmlidXRpb25zLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciB2aXNpYmxlQXR0cmlidXRpb25zID0gW107XG4gICAgICAgIHZhciBjb2xsYXBzaWJsZSA9IHRydWU7XG4gICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcbiAgICAgICAgICAgIGlmICghaW5WaWV3KGxheWVyU3RhdGUsIGZyYW1lU3RhdGUudmlld1N0YXRlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyU3RhdGUubGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGlvbkdldHRlciA9IHNvdXJjZS5nZXRBdHRyaWJ1dGlvbnMoKTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRpb25HZXR0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGlvbnMgPSBhdHRyaWJ1dGlvbkdldHRlcihmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xsYXBzaWJsZSA9XG4gICAgICAgICAgICAgICAgY29sbGFwc2libGUgJiYgc291cmNlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlKCkgIT09IGZhbHNlO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25zKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGF0dHJpYnV0aW9ucy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGF0dHJpYnV0aW9uc1tqXSBpbiBsb29rdXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlQXR0cmlidXRpb25zLnB1c2goYXR0cmlidXRpb25zW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cFthdHRyaWJ1dGlvbnNbal1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghKGF0dHJpYnV0aW9ucyBpbiBsb29rdXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBsb29rdXBbYXR0cmlidXRpb25zXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5vdmVycmlkZUNvbGxhcHNpYmxlXykge1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xsYXBzaWJsZShjb2xsYXBzaWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpc2libGVBdHRyaWJ1dGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS51cGRhdGVFbGVtZW50XyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdHRyaWJ1dGlvbnMgPSB0aGlzLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgdmlzaWJsZSA9IGF0dHJpYnV0aW9ucy5sZW5ndGggPiAwO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfICE9IHZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdmlzaWJsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXF1YWxzKGF0dHJpYnV0aW9ucywgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy51bEVsZW1lbnRfKTtcbiAgICAgICAgLy8gYXBwZW5kIHRoZSBhdHRyaWJ1dGlvbnNcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYXR0cmlidXRpb25zW2ldO1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnRfLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gYXR0cmlidXRpb25zO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgICAgICB0aGlzLnVzZXJDb2xsYXBzZWRfID0gdGhpcy5jb2xsYXBzZWRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuaGFuZGxlVG9nZ2xlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoQ0xBU1NfQ09MTEFQU0VEKTtcbiAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VkXykge1xuICAgICAgICAgICAgcmVwbGFjZU5vZGUodGhpcy5jb2xsYXBzZUxhYmVsXywgdGhpcy5sYWJlbF8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVwbGFjZU5vZGUodGhpcy5sYWJlbF8sIHRoaXMuY29sbGFwc2VMYWJlbF8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sbGFwc2VkXyA9ICF0aGlzLmNvbGxhcHNlZF87XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIXRoaXMuY29sbGFwc2VkXykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRpb24gaXMgY29sbGFwc2libGUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzaWJsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmdldENvbGxhcHNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzaWJsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGUgYXR0cmlidXRpb24gc2hvdWxkIGJlIGNvbGxhcHNpYmxlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29sbGFwc2libGUgVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuc2V0Q29sbGFwc2libGUgPSBmdW5jdGlvbiAoY29sbGFwc2libGUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sbGFwc2libGVfID09PSBjb2xsYXBzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sbGFwc2libGVfID0gY29sbGFwc2libGU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgICAgIGlmICh0aGlzLnVzZXJDb2xsYXBzZWRfKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZV8oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29sbGFwc2Ugb3IgZXhwYW5kIHRoZSBhdHRyaWJ1dGlvbiBhY2NvcmRpbmcgdG8gdGhlIHBhc3NlZCBwYXJhbWV0ZXIuIFdpbGxcbiAgICAgKiBub3QgZG8gYW55dGhpbmcgaWYgdGhlIGF0dHJpYnV0aW9uIGlzbid0IGNvbGxhcHNpYmxlIG9yIGlmIHRoZSBjdXJyZW50XG4gICAgICogY29sbGFwc2VkIHN0YXRlIGlzIGFscmVhZHkgdGhlIG9uZSByZXF1ZXN0ZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzZWQgVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnNldENvbGxhcHNlZCA9IGZ1bmN0aW9uIChjb2xsYXBzZWQpIHtcbiAgICAgICAgdGhpcy51c2VyQ29sbGFwc2VkXyA9IGNvbGxhcHNlZDtcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxhcHNpYmxlXyB8fCB0aGlzLmNvbGxhcHNlZF8gPT09IGNvbGxhcHNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGB0cnVlYCB3aGVuIHRoZSBhdHRyaWJ1dGlvbiBpcyBjdXJyZW50bHkgY29sbGFwc2VkIG9yIGBmYWxzZWBcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmdldENvbGxhcHNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgYXR0cmlidXRpb24gZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlRWxlbWVudF8obWFwRXZlbnQuZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gQXR0cmlidXRpb247XG59KENvbnRyb2wpKTtcbmV4cG9ydCBkZWZhdWx0IEF0dHJpYnV0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXR0cmlidXRpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1JvdGF0ZVxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IENMQVNTX0NPTlRST0wsIENMQVNTX0hJRERFTiwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtcm90YXRlJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2xhYmVsPSfih6cnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J1Jlc2V0IHJvdGF0aW9uJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb21wYXNzQ2xhc3NOYW1lPSdvbC1jb21wYXNzJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSBjb21wYXNzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvSGlkZT10cnVlXSBIaWRlIHRoZSBjb250cm9sIHdoZW4gcm90YXRpb24gaXMgMC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgc2hvdWxkXG4gKiBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTp2b2lkfSBbcmVzZXROb3J0aF0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgaXMgY2xpY2tlZC5cbiAqIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBgcmVzZXROb3J0aGAuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBidXR0b24gY29udHJvbCB0byByZXNldCByb3RhdGlvbiB0byAwLlxuICogVG8gc3R5bGUgdGhpcyBjb250cm9sIHVzZSBjc3Mgc2VsZWN0b3IgYC5vbC1yb3RhdGVgLiBBIGAub2wtaGlkZGVuYCBjc3NcbiAqIHNlbGVjdG9yIGlzIGFkZGVkIHRvIHRoZSBidXR0b24gd2hlbiB0aGUgcm90YXRpb24gaXMgMC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gUm90YXRlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtcm90YXRlJztcbiAgICAgICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdcXHUyMUU3JztcbiAgICAgICAgdmFyIGNvbXBhc3NDbGFzc05hbWUgPSBvcHRpb25zLmNvbXBhc3NDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbXBhc3NDbGFzc05hbWVcbiAgICAgICAgICAgIDogJ29sLWNvbXBhc3MnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFiZWxfID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc05hbWUgPSBjb21wYXNzQ2xhc3NOYW1lO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8gPSBsYWJlbDtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc0xpc3QuYWRkKGNvbXBhc3NDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aXBMYWJlbCA9IG9wdGlvbnMudGlwTGFiZWwgPyBvcHRpb25zLnRpcExhYmVsIDogJ1Jlc2V0IHJvdGF0aW9uJztcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJy1yZXNldCc7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50aXRsZSA9IHRpcExhYmVsO1xuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoX3RoaXMubGFiZWxfKTtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcyksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgKyAnICcgKyBDTEFTU19VTlNFTEVDVEFCTEUgKyAnICcgKyBDTEFTU19DT05UUk9MO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICBfdGhpcy5jYWxsUmVzZXROb3J0aF8gPSBvcHRpb25zLnJlc2V0Tm9ydGggPyBvcHRpb25zLnJlc2V0Tm9ydGggOiB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXV0b0hpZGVfID0gb3B0aW9ucy5hdXRvSGlkZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRvSGlkZSA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW9uXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKF90aGlzLmF1dG9IaWRlXykge1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX0hJRERFTik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLmNhbGxSZXNldE5vcnRoXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxSZXNldE5vcnRoXygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNldE5vcnRoXygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUucmVzZXROb3J0aF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgLy8gdGhlIG1hcCBkb2VzIG5vdCBoYXZlIGEgdmlldywgc28gd2UgY2FuJ3QgYWN0XG4gICAgICAgICAgICAvLyB1cG9uIGl0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdmlldy5nZXRSb3RhdGlvbigpO1xuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID4gMCAmJiByb3RhdGlvbiAlICgyICogTWF0aC5QSSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3LnNldFJvdGF0aW9uKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHJvdGF0ZSBjb250cm9sIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgUm90YXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgaWYgKHJvdGF0aW9uICE9IHRoaXMucm90YXRpb25fKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gJ3JvdGF0ZSgnICsgcm90YXRpb24gKyAncmFkKSc7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbnMgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250YWlucyAmJiByb3RhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250YWlucyAmJiByb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFiZWxfLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIFJvdGF0ZTtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgUm90YXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Um90YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9ab29tXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC16b29tJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JbkNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWluJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSB6b29tLWluIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLW91dCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tSW5MYWJlbD0nKyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1pblxuICogYnV0dG9uLiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbU91dExhYmVsPSctJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSB6b29tLW91dCBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbUluVGlwTGFiZWw9J1pvb20gaW4nXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21PdXRUaXBMYWJlbD0nWm9vbSBvdXQnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIGJ1dHRvbiB0aXAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGRlbHRhIGFwcGxpZWQgb24gZWFjaCBjbGljay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZSBjb250cm9sIHRvIGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbnRyb2wgd2l0aCAyIGJ1dHRvbnMsIG9uZSBmb3Igem9vbSBpbiBhbmQgb25lIGZvciB6b29tIG91dC5cbiAqIFRoaXMgY29udHJvbCBpcyBvbmUgb2YgdGhlIGRlZmF1bHQgY29udHJvbHMgb2YgYSBtYXAuIFRvIHN0eWxlIHRoaXMgY29udHJvbFxuICogdXNlIGNzcyBzZWxlY3RvcnMgYC5vbC16b29tLWluYCBhbmQgYC5vbC16b29tLW91dGAuXG4gKlxuICogQGFwaVxuICovXG52YXIgWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gWm9vbSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLXpvb20nO1xuICAgICAgICB2YXIgZGVsdGEgPSBvcHRpb25zLmRlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgdmFyIHpvb21JbkNsYXNzTmFtZSA9IG9wdGlvbnMuem9vbUluQ2xhc3NOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy56b29tSW5DbGFzc05hbWVcbiAgICAgICAgICAgIDogY2xhc3NOYW1lICsgJy1pbic7XG4gICAgICAgIHZhciB6b29tT3V0Q2xhc3NOYW1lID0gb3B0aW9ucy56b29tT3V0Q2xhc3NOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy56b29tT3V0Q2xhc3NOYW1lXG4gICAgICAgICAgICA6IGNsYXNzTmFtZSArICctb3V0JztcbiAgICAgICAgdmFyIHpvb21JbkxhYmVsID0gb3B0aW9ucy56b29tSW5MYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5MYWJlbCA6ICcrJztcbiAgICAgICAgdmFyIHpvb21PdXRMYWJlbCA9IG9wdGlvbnMuem9vbU91dExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21PdXRMYWJlbCA6ICdcXHUyMjEyJztcbiAgICAgICAgdmFyIHpvb21JblRpcExhYmVsID0gb3B0aW9ucy56b29tSW5UaXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5UaXBMYWJlbCA6ICdab29tIGluJztcbiAgICAgICAgdmFyIHpvb21PdXRUaXBMYWJlbCA9IG9wdGlvbnMuem9vbU91dFRpcExhYmVsICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy56b29tT3V0VGlwTGFiZWxcbiAgICAgICAgICAgIDogJ1pvb20gb3V0JztcbiAgICAgICAgdmFyIGluRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBpbkVsZW1lbnQuY2xhc3NOYW1lID0gem9vbUluQ2xhc3NOYW1lO1xuICAgICAgICBpbkVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBpbkVsZW1lbnQudGl0bGUgPSB6b29tSW5UaXBMYWJlbDtcbiAgICAgICAgaW5FbGVtZW50LmFwcGVuZENoaWxkKHR5cGVvZiB6b29tSW5MYWJlbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoem9vbUluTGFiZWwpXG4gICAgICAgICAgICA6IHpvb21JbkxhYmVsKTtcbiAgICAgICAgaW5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcywgZGVsdGEpLCBmYWxzZSk7XG4gICAgICAgIHZhciBvdXRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIG91dEVsZW1lbnQuY2xhc3NOYW1lID0gem9vbU91dENsYXNzTmFtZTtcbiAgICAgICAgb3V0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIG91dEVsZW1lbnQudGl0bGUgPSB6b29tT3V0VGlwTGFiZWw7XG4gICAgICAgIG91dEVsZW1lbnQuYXBwZW5kQ2hpbGQodHlwZW9mIHpvb21PdXRMYWJlbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoem9vbU91dExhYmVsKVxuICAgICAgICAgICAgOiB6b29tT3V0TGFiZWwpO1xuICAgICAgICBvdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcywgLWRlbHRhKSwgZmFsc2UpO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IGNsYXNzTmFtZSArICcgJyArIENMQVNTX1VOU0VMRUNUQUJMRSArICcgJyArIENMQVNTX0NPTlRST0w7XG4gICAgICAgIHZhciBlbGVtZW50ID0gX3RoaXMuZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjc3NDbGFzc2VzO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGluRWxlbWVudCk7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3V0RWxlbWVudCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgWm9vbSBkZWx0YS5cbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFpvb20ucHJvdG90eXBlLmhhbmRsZUNsaWNrXyA9IGZ1bmN0aW9uIChkZWx0YSwgZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy56b29tQnlEZWx0YV8oZGVsdGEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFpvb20gZGVsdGEuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBab29tLnByb3RvdHlwZS56b29tQnlEZWx0YV8gPSBmdW5jdGlvbiAoZGVsdGEpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKCF2aWV3KSB7XG4gICAgICAgICAgICAvLyB0aGUgbWFwIGRvZXMgbm90IGhhdmUgYSB2aWV3LCBzbyB3ZSBjYW4ndCBhY3RcbiAgICAgICAgICAgIC8vIHVwb24gaXRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3VycmVudFpvb20gPSB2aWV3LmdldFpvb20oKTtcbiAgICAgICAgaWYgKGN1cnJlbnRab29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBuZXdab29tID0gdmlldy5nZXRDb25zdHJhaW5lZFpvb20oY3VycmVudFpvb20gKyBkZWx0YSk7XG4gICAgICAgICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHpvb206IG5ld1pvb20sXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRab29tKG5ld1pvb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gWm9vbTtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVpvb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1Byb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIEFDVElWRTogJ2FjdGl2ZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvcGVydHkuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvblxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0LCBsaW5lYXIgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6YWN0aXZlJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBSZXR1cm4+fSBJbnRlcmFjdGlvbk9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBjb25maWcgb3B0aW9ucyBmb3IgaW50ZXJhY3Rpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gSW50ZXJhY3Rpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBoYW5kbGVFdmVudFxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGEgZmFsc3kgdmFsdWUsIHByb3BhZ2F0aW9uIG9mXG4gKiB0aGUgZXZlbnQgdG8gb3RoZXIgaW50ZXJhY3Rpb25zIGluIHRoZSBtYXAncyBpbnRlcmFjdGlvbnMgY2hhaW4gd2lsbCBiZVxuICogcHJldmVudGVkICh0aGlzIGluY2x1ZGVzIGZ1bmN0aW9ucyB3aXRoIG5vIGV4cGxpY2l0IHJldHVybikuIFRoZSBpbnRlcmFjdGlvbnNcbiAqIGFyZSB0cmF2ZXJzZWQgaW4gcmV2ZXJzZSBvcmRlciBvZiB0aGUgaW50ZXJhY3Rpb25zIGNvbGxlY3Rpb24gb2YgdGhlIG1hcC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBVc2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBtYXAuIFNvbWUgYXJlIHNpbWlsYXIgdG8gY29udHJvbHMsXG4gKiBidXQgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYSBET00gZWxlbWVudC5cbiAqIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219IGlzXG4gKiBmdW5jdGlvbmFsbHkgdGhlIHNhbWUgYXMge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0sIGJ1dCB0cmlnZ2VyZWRcbiAqIGJ5IGEga2V5Ym9hcmQgZXZlbnQgbm90IGEgYnV0dG9uIGVsZW1lbnQgZXZlbnQuXG4gKiBBbHRob3VnaCBpbnRlcmFjdGlvbnMgZG8gbm90IGhhdmUgYSBET00gZWxlbWVudCwgc29tZSBvZiB0aGVtIGRvIHJlbmRlclxuICogdmVjdG9ycyBhbmQgc28gYXJlIHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIEludGVyYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbnRlcmFjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0ludGVyYWN0aW9uT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEludGVyYWN0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0ludGVyYWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7SW50ZXJhY3Rpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0ludGVyYWN0aW9uT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgaWYgKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLmhhbmRsZUV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVFdmVudCA9IG9wdF9vcHRpb25zLmhhbmRsZUV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgX3RoaXMuc2V0QWN0aXZlKHRydWUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB3aGV0aGVyIHRoZSBpbnRlcmFjdGlvbiBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgaW50ZXJhY3Rpb24gaXMgYWN0aXZlLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuZ2V0QWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoSW50ZXJhY3Rpb25Qcm9wZXJ0eS5BQ1RJVkUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGludGVyYWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlIG9yIGRlYWN0aXZhdGUgdGhlIGludGVyYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYWN0aXZlIEFjdGl2ZS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0QWN0aXZlID0gZnVuY3Rpb24gKGFjdGl2ZSkge1xuICAgICAgICB0aGlzLnNldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSwgYWN0aXZlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgaW50ZXJhY3Rpb24gZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICAgKiB0aGUgbWFwIGhlcmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgfTtcbiAgICByZXR1cm4gSW50ZXJhY3Rpb247XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YSBEZWx0YS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhbih2aWV3LCBkZWx0YSwgb3B0X2R1cmF0aW9uKSB7XG4gICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gICAgaWYgKGN1cnJlbnRDZW50ZXIpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdICsgZGVsdGFbMF0sIGN1cnJlbnRDZW50ZXJbMV0gKyBkZWx0YVsxXV07XG4gICAgICAgIHZpZXcuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDI1MCxcbiAgICAgICAgICAgIGVhc2luZzogbGluZWFyLFxuICAgICAgICAgICAgY2VudGVyOiB2aWV3LmdldENvbnN0cmFpbmVkQ2VudGVyKGNlbnRlciksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9IHZpZXcgVmlldy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YSBmcm9tIHByZXZpb3VzIHpvb20gbGV2ZWwuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIEFuY2hvciBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gRHVyYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB6b29tQnlEZWx0YSh2aWV3LCBkZWx0YSwgb3B0X2FuY2hvciwgb3B0X2R1cmF0aW9uKSB7XG4gICAgdmFyIGN1cnJlbnRab29tID0gdmlldy5nZXRab29tKCk7XG4gICAgaWYgKGN1cnJlbnRab29tID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgbmV3Wm9vbSA9IHZpZXcuZ2V0Q29uc3RyYWluZWRab29tKGN1cnJlbnRab29tICsgZGVsdGEpO1xuICAgIHZhciBuZXdSZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uRm9yWm9vbShuZXdab29tKTtcbiAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICB9XG4gICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgcmVzb2x1dGlvbjogbmV3UmVzb2x1dGlvbixcbiAgICAgICAgYW5jaG9yOiBvcHRfYW5jaG9yLFxuICAgICAgICBkdXJhdGlvbjogb3B0X2R1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZHVyYXRpb24gOiAyNTAsXG4gICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICB9KTtcbn1cbmV4cG9ydCBkZWZhdWx0IEludGVyYWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW50ZXJhY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21cbiAqL1xuaW1wb3J0IEludGVyYWN0aW9uLCB7IHpvb21CeURlbHRhIH0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGRlbHRhIGFwcGxpZWQgb24gZWFjaCBkb3VibGUgY2xpY2suXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gYnkgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbnZhciBEb3VibGVDbGlja1pvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERvdWJsZUNsaWNrWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEb3VibGVDbGlja1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVsdGFfID0gb3B0aW9ucy5kZWx0YSA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYVxuICAgICAqIGRvdWJsZWNsaWNrKSBhbmQgZXZlbnR1YWxseSB6b29tcyB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICovXG4gICAgRG91YmxlQ2xpY2tab29tLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHN0b3BFdmVudCA9IGZhbHNlO1xuICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSykge1xuICAgICAgICAgICAgdmFyIGJyb3dzZXJFdmVudCA9IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdmFyIGFuY2hvciA9IG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlO1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gYnJvd3NlckV2ZW50LnNoaWZ0S2V5ID8gLXRoaXMuZGVsdGFfIDogdGhpcy5kZWx0YV87XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB6b29tQnlEZWx0YSh2aWV3LCBkZWx0YSwgYW5jaG9yLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICBicm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHN0b3BFdmVudCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gRG91YmxlQ2xpY2tab29tO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRG91YmxlQ2xpY2tab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RG91YmxlQ2xpY2tab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUG9pbnRlclxuICovXG5pbXBvcnQgSW50ZXJhY3Rpb24gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGdldFZhbHVlcyB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVEb3duRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcImRvd25cIiBldmVudHMuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCB0aGVuIGEgZHJhZ1xuICogc2VxdWVuY2UgaXMgc3RhcnRlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtoYW5kbGVEcmFnRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcImRyYWdcIiBldmVudHMuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIFwibW92ZVwiIGV2ZW50c1xuICogZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVFdmVudF1cbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBUaGUgZnVuY3Rpb24gbWF5IHJldHVybiBgZmFsc2VgIHRvIHByZXZlbnQgdGhlXG4gKiBwcm9wYWdhdGlvbiBvZiB0aGUgZXZlbnQgdG8gb3RoZXIgaW50ZXJhY3Rpb25zIGluIHRoZSBtYXAncyBpbnRlcmFjdGlvbnNcbiAqIGNoYWluLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW2hhbmRsZU1vdmVFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwibW92ZVwiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzLlxuICogVGhpcyBmdW5jdGlvbnMgaXMgYWxzbyBjYWxsZWQgZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSwgc28gZHVyaW5nIGEgZHJhZ1xuICogc2VxdWVuY2UgYm90aCB0aGUgYGhhbmRsZURyYWdFdmVudGAgZnVuY3Rpb24gYW5kIHRoaXMgZnVuY3Rpb24gYXJlIGNhbGxlZC5cbiAqIElmIGBoYW5kbGVEb3duRXZlbnRgIGlzIGRlZmluZWQgYW5kIGl0IHJldHVybnMgdHJ1ZSB0aGlzIGZ1bmN0aW9uIHdpbGwgbm90XG4gKiBiZSBjYWxsZWQgZHVyaW5nIGEgZHJhZyBzZXF1ZW5jZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IFtoYW5kbGVVcEV2ZW50XVxuICogIEZ1bmN0aW9uIGhhbmRsaW5nIFwidXBcIiBldmVudHMuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAgdGhlbiB0aGVcbiAqIGN1cnJlbnQgZHJhZyBzZXF1ZW5jZSBpcyBzdG9wcGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTpib29sZWFufSBbc3RvcERvd25dXG4gKiBTaG91bGQgdGhlIGRvd24gZXZlbnQgYmUgcHJvcGFnYXRlZCB0byBvdGhlciBpbnRlcmFjdGlvbnMsIG9yIHNob3VsZCBiZVxuICogc3RvcHBlZD9cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIHRoYXQgY2FsbHMgdXNlci1kZWZpbmVkIGZ1bmN0aW9ucyBvbiBgZG93bmAsIGBtb3ZlYCBhbmQgYHVwYFxuICogZXZlbnRzLiBUaGlzIGNsYXNzIGFsc28gbWFuYWdlcyBcImRyYWcgc2VxdWVuY2VzXCIuXG4gKlxuICogV2hlbiB0aGUgYGhhbmRsZURvd25FdmVudGAgdXNlciBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYCBhIGRyYWcgc2VxdWVuY2UgaXNcbiAqIHN0YXJ0ZWQuIER1cmluZyBhIGRyYWcgc2VxdWVuY2UgdGhlIGBoYW5kbGVEcmFnRXZlbnRgIHVzZXIgZnVuY3Rpb24gaXNcbiAqIGNhbGxlZCBvbiBgbW92ZWAgZXZlbnRzLiBUaGUgZHJhZyBzZXF1ZW5jZSBlbmRzIHdoZW4gdGhlIGBoYW5kbGVVcEV2ZW50YFxuICogdXNlciBmdW5jdGlvbiBpcyBjYWxsZWQgYW5kIHJldHVybnMgYGZhbHNlYC5cbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ZXJJbnRlcmFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9pbnRlckludGVyYWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBvaW50ZXJJbnRlcmFjdGlvbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0ludGVyYWN0aW9uLmpzXCIpLkludGVyYWN0aW9uT3B0aW9uc30gKi8gKG9wdGlvbnMpKSB8fCB0aGlzO1xuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVEb3duRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZURvd25FdmVudCA9IG9wdGlvbnMuaGFuZGxlRG93bkV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZURyYWdFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRHJhZ0V2ZW50ID0gb3B0aW9ucy5oYW5kbGVEcmFnRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlTW92ZUV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVNb3ZlRXZlbnQgPSBvcHRpb25zLmhhbmRsZU1vdmVFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVVcEV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVVcEV2ZW50ID0gb3B0aW9ucy5oYW5kbGVVcEV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnN0b3BEb3duKSB7XG4gICAgICAgICAgICBfdGhpcy5zdG9wRG93biA9IG9wdGlvbnMuc3RvcERvd247XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIFBvaW50ZXJFdmVudD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFja2VkUG9pbnRlcnNfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8UG9pbnRlckV2ZW50Pn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0UG9pbnRlcnMgPSBbXTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IG51bWJlciBvZiBwb2ludGVycyBpbnZvbHZlZCBpbiB0aGUgaW50ZXJhY3Rpb24sXG4gICAgICogZS5nLiBgMmAgd2hlbiB0d28gZmluZ2VycyBhcmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgcG9pbnRlcnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuZ2V0UG9pbnRlckNvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7IH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGFuZCBtYXkgY2FsbCBpbnRvXG4gICAgICogb3RoZXIgZnVuY3Rpb25zLCBpZiBldmVudCBzZXF1ZW5jZXMgbGlrZSBlLmcuICdkcmFnJyBvciAnZG93bi11cCcgZXRjLiBhcmVcbiAgICAgKiBkZXRlY3RlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMudXBkYXRlVHJhY2tlZFBvaW50ZXJzXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICBpZiAodGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRykge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRHJhZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgLy8gcHJldmVudCBwYWdlIHNjcm9sbGluZyBkdXJpbmcgZHJhZ2dpbmdcbiAgICAgICAgICAgICAgICBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlZFVwID0gdGhpcy5oYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlID1cbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlZFVwICYmIHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZWQgPSB0aGlzLmhhbmRsZURvd25FdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9IGhhbmRsZWQ7XG4gICAgICAgICAgICAgICAgc3RvcEV2ZW50ID0gdGhpcy5zdG9wRG93bihoYW5kbGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vdmVFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgbW92ZSBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZU1vdmVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHsgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGRldGVybWluZSBpZiBcImRvd25cIiBldmVudHMgc2hvdWxkIGJlIHByb3BhZ2F0ZWRcbiAgICAgKiB0byBvdGhlciBpbnRlcmFjdGlvbnMgb3Igc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBoYW5kbGVkIFdhcyB0aGUgZXZlbnQgaGFuZGxlZCBieSB0aGUgaW50ZXJhY3Rpb24/XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gU2hvdWxkIHRoZSBgZG93bmAgZXZlbnQgYmUgc3RvcHBlZD9cbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnN0b3BEb3duID0gZnVuY3Rpb24gKGhhbmRsZWQpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmIChpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHZhciBldmVudF8xID0gbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQ7XG4gICAgICAgICAgICB2YXIgaWQgPSBldmVudF8xLnBvaW50ZXJJZC50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXSA9IGV2ZW50XzE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpZCBpbiB0aGlzLnRyYWNrZWRQb2ludGVyc18pIHtcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgb25seSB3aGVuIHRoZXJlIHdhcyBhIHBvaW50ZXJkb3duIGV2ZW50IGZvciB0aGlzIHBvaW50ZXJcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnRfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UG9pbnRlcnMgPSBnZXRWYWx1ZXModGhpcy50cmFja2VkUG9pbnRlcnNfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBvaW50ZXJJbnRlcmFjdGlvbjtcbn0oSW50ZXJhY3Rpb24pKTtcbi8qKlxuICogQHBhcmFtIHtBcnJheTxQb2ludGVyRXZlbnQ+fSBwb2ludGVyRXZlbnRzIExpc3Qgb2YgZXZlbnRzLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IENlbnRyb2lkIHBpeGVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2VudHJvaWQocG9pbnRlckV2ZW50cykge1xuICAgIHZhciBsZW5ndGggPSBwb2ludGVyRXZlbnRzLmxlbmd0aDtcbiAgICB2YXIgY2xpZW50WCA9IDA7XG4gICAgdmFyIGNsaWVudFkgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2xpZW50WCArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFg7XG4gICAgICAgIGNsaWVudFkgKz0gcG9pbnRlckV2ZW50c1tpXS5jbGllbnRZO1xuICAgIH1cbiAgICByZXR1cm4gW2NsaWVudFggLyBsZW5ndGgsIGNsaWVudFkgLyBsZW5ndGhdO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBldmVudCBpcyBhIHBvaW50ZXJkb3duLCBwb2ludGVyZHJhZ1xuICogICAgIG9yIHBvaW50ZXJ1cCBldmVudC5cbiAqL1xuZnVuY3Rpb24gaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgdHlwZSA9IG1hcEJyb3dzZXJFdmVudC50eXBlO1xuICAgIHJldHVybiAodHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiB8fFxuICAgICAgICB0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHIHx8XG4gICAgICAgIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQKTtcbn1cbmV4cG9ydCBkZWZhdWx0IFBvaW50ZXJJbnRlcmFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvaW50ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9jb25kaXRpb25cbiAqL1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBGQUxTRSwgVFJVRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBNQUMsIFdFQktJVCB9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsIHRydWUgc2hvdWxkIGJlIHJldHVybmVkLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IENvbmRpdGlvblxuICovXG4vKipcbiAqIENyZWF0ZXMgYSBjb25kaXRpb24gZnVuY3Rpb24gdGhhdCBwYXNzZXMgd2hlbiBhbGwgcHJvdmlkZWQgY29uZGl0aW9ucyBwYXNzLlxuICogQHBhcmFtIHsuLi5Db25kaXRpb259IHZhcl9hcmdzIENvbmRpdGlvbnMgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtDb25kaXRpb259IENvbmRpdGlvbiBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbCh2YXJfYXJncykge1xuICAgIHZhciBjb25kaXRpb25zID0gYXJndW1lbnRzO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEFsbCBjb25kaXRpb25zIHBhc3NlZC5cbiAgICAgKi9cbiAgICByZXR1cm4gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBwYXNzID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29uZGl0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBwYXNzID0gcGFzcyAmJiBjb25kaXRpb25zW2ldKGV2ZW50KTtcbiAgICAgICAgICAgIGlmICghcGFzcykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXNzO1xuICAgIH07XG59XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuXG4gKiBhZGRpdGlvbmFsbHkgdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBhbHQta2V5IGFuZCBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2VcbiAqIChlLmcuIHdoZW4gYWRkaXRpb25hbGx5IHRoZSBwbGF0Zm9ybS1tb2RpZmllci1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBhbHQgYW5kIHNoaWZ0IGtleXMgYXJlIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgYWx0U2hpZnRLZXlzT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuIChvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgIG9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuIFRoaXMgY29uZGl0aW9uIHJlcXVpcmVzIGEgbWFwIHRhcmdldFxuICogZWxlbWVudCB3aXRoIGEgYHRhYmluZGV4YCBhdHRyaWJ1dGUsIGUuZy4gYDxkaXYgaWQ9XCJtYXBcIiB0YWJpbmRleD1cIjFcIj5gLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG1hcCBoYXMgdGhlIGZvY3VzLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGZvY3VzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnRhcmdldC5nZXRUYXJnZXRFbGVtZW50KCkuY29udGFpbnMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cyBvciBubyAndGFiaW5kZXgnIGF0dHJpYnV0ZSBzZXQuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGNvbnRhaW5lciBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlLlxuICovXG5leHBvcnQgdmFyIGZvY3VzV2l0aFRhYmluZGV4ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50Lm1hcC5nZXRUYXJnZXRFbGVtZW50KCkuaGFzQXR0cmlidXRlKCd0YWJpbmRleCcpXG4gICAgICAgID8gZm9jdXMoZXZlbnQpXG4gICAgICAgIDogdHJ1ZTtcbn07XG4vKipcbiAqIFJldHVybiBhbHdheXMgdHJ1ZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsd2F5cyA9IFRSVUU7XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgYGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBjbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhcyBhbiBcImFjdGlvblwiLXByb2R1Y2luZyBtb3VzZSBidXR0b24uXG4gKlxuICogQnkgZGVmaW5pdGlvbiwgdGhpcyBpbmNsdWRlcyBsZWZ0LWNsaWNrIG9uIHdpbmRvd3MvbGludXgsIGFuZCBsZWZ0LWNsaWNrXG4gKiB3aXRob3V0IHRoZSBjdHJsIGtleSBvbiBNYWNzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCB2YXIgbW91c2VBY3Rpb25CdXR0b24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuIG9yaWdpbmFsRXZlbnQuYnV0dG9uID09IDAgJiYgIShXRUJLSVQgJiYgTUFDICYmIG9yaWdpbmFsRXZlbnQuY3RybEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEZhbHNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5ldmVyID0gRkFMU0U7XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LCBgZmFsc2VgXG4gKiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgcG9pbnRlck1vdmUgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09ICdwb2ludGVybW92ZSc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgc2luZ2xlY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgc2luZ2xlY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHNpbmdsZUNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBkb3VibGVDbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgbm8gbW9kaWZpZXIga2V5IChhbHQtLCBzaGlmdC0gb3IgcGxhdGZvcm0tbW9kaWZpZXIta2V5KSBpc1xuICogcHJlc3NlZC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlcmUgbm8gbW9kaWZpZXIga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBub01vZGlmaWVyS2V5cyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuICghb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIHBsYXRmb3JtLW1vZGlmaWVyLWtleSAodGhlIG1ldGEta2V5IG9uIE1hYyxcbiAqIGN0cmwta2V5IG90aGVyd2lzZSkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlbiBhZGRpdGlvbmFsbHlcbiAqIHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBwbGF0Zm9ybSBtb2RpZmllciBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwbGF0Zm9ybU1vZGlmaWVyS2V5T25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuICghb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgKE1BQyA/IG9yaWdpbmFsRXZlbnQubWV0YUtleSA6IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgc2hpZnQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2hpZnRLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgIG9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLCBpLmUuIG5vdCBhIGA8aW5wdXQ+YC0sXG4gKiBgPHNlbGVjdD5gLSBvciBgPHRleHRhcmVhPmAtZWxlbWVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBvbmx5IGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBub3QgZWRpdGFibGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgdGFyZ2V0Tm90RWRpdGFibGUgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciB0YWdOYW1lID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAob3JpZ2luYWxFdmVudC50YXJnZXQpLnRhZ05hbWU7XG4gICAgcmV0dXJuIHRhZ05hbWUgIT09ICdJTlBVVCcgJiYgdGFnTmFtZSAhPT0gJ1NFTEVDVCcgJiYgdGFnTmFtZSAhPT0gJ1RFWFRBUkVBJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIG1vdXNlIGRldmljZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBtb3VzZSBkZXZpY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbW91c2VPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZlbnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gICAgcmV0dXJuIHBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PSAnbW91c2UnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgdG91Y2hhYmxlIGRldmljZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSB0b3VjaGFibGUgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHRvdWNoT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlckV2dCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gICAgcmV0dXJuIHBvaW50ZXJFdnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBkaWdpdGFsIHBlbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBkaWdpdGFsIHBlbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwZW5Pbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZ0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2dC5wb2ludGVyVHlwZSA9PT0gJ3Blbic7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBwcmltYXJ5IHBvaW50ZXIgaW5cbiAqIGNvbnRhY3Qgd2l0aCB0aGUgc3VyZmFjZSBvciBpZiB0aGUgbGVmdCBtb3VzZSBidXR0b24gaXMgcHJlc3NlZC5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jYnV0dG9uLXN0YXRlcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBwcmltYXJ5IHBvaW50ZXIuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgcHJpbWFyeUFjdGlvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2ZW50ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gICAgcmV0dXJuIHBvaW50ZXJFdmVudC5pc1ByaW1hcnkgJiYgcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25kaXRpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUGFuXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFsbCwgZm9jdXNXaXRoVGFiaW5kZXgsIG5vTW9kaWZpZXJLZXlzLCBwcmltYXJ5QWN0aW9uLCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSwgc2NhbGUgYXMgc2NhbGVDb29yZGluYXRlLCB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLm5vTW9kaWZpZXJLZXlzfSBhbmQge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnByaW1hcnlBY3Rpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0tpbmV0aWMuanNcIikuZGVmYXVsdH0gW2tpbmV0aWNdIEtpbmV0aWMgaW5lcnRpYSB0byBhcHBseSB0byB0aGUgcGFuLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCBieSBkcmFnZ2luZyB0aGUgbWFwLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1BhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ1BhbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnUGFuKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIHN0b3BEb3duOiBGQUxTRSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vS2luZXRpYy5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtpbmV0aWNfID0gb3B0aW9ucy5raW5ldGljO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0UG9pbnRlcnNDb3VudF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBhbm5pbmdfID0gZmFsc2U7XG4gICAgICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvblxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbmRpdGlvblxuICAgICAgICAgICAgOiBhbGwobm9Nb2RpZmllcktleXMsIHByaW1hcnlBY3Rpb24pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMub25Gb2N1c09ubHlcbiAgICAgICAgICAgID8gYWxsKGZvY3VzV2l0aFRhYmluZGV4LCBjb25kaXRpb24pXG4gICAgICAgICAgICA6IGNvbmRpdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubm9LaW5ldGljXyA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnUGFuLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5wYW5uaW5nXykge1xuICAgICAgICAgICAgdGhpcy5wYW5uaW5nXyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmdldE1hcCgpLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldFBvaW50ZXJzID0gdGhpcy50YXJnZXRQb2ludGVycztcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGFyZ2V0UG9pbnRlcnMpO1xuICAgICAgICBpZiAodGFyZ2V0UG9pbnRlcnMubGVuZ3RoID09IHRoaXMubGFzdFBvaW50ZXJzQ291bnRfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgICAgIHRoaXMua2luZXRpY18udXBkYXRlKGNlbnRyb2lkWzBdLCBjZW50cm9pZFsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0Q2VudHJvaWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdENlbnRyb2lkWzBdIC0gY2VudHJvaWRbMF0sXG4gICAgICAgICAgICAgICAgICAgIGNlbnRyb2lkWzFdIC0gdGhpcy5sYXN0Q2VudHJvaWRbMV0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICAgICAgc2NhbGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgICAgICAgICAgcm90YXRlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgICAgICAgICB2aWV3LmFkanVzdENlbnRlckludGVybmFsKGRlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAvLyByZXNldCBzbyB3ZSBkb24ndCBvdmVyZXN0aW1hdGUgdGhlIGtpbmV0aWMgZW5lcmd5IGFmdGVyXG4gICAgICAgICAgICAvLyBhZnRlciBvbmUgZmluZ2VyIGRvd24sIHRpbnkgZHJhZywgc2Vjb25kIGZpbmdlciBkb3duXG4gICAgICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBjZW50cm9pZDtcbiAgICAgICAgdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8gPSB0YXJnZXRQb2ludGVycy5sZW5ndGg7XG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubm9LaW5ldGljXyAmJiB0aGlzLmtpbmV0aWNfICYmIHRoaXMua2luZXRpY18uZW5kKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSB0aGlzLmtpbmV0aWNfLmdldERpc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gdGhpcy5raW5ldGljXy5nZXRBbmdsZSgpO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlcnB4ID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbChjZW50ZXIpO1xuICAgICAgICAgICAgICAgIHZhciBkZXN0ID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChbXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcnB4WzBdIC0gZGlzdGFuY2UgKiBNYXRoLmNvcyhhbmdsZSksXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcnB4WzFdIC0gZGlzdGFuY2UgKiBNYXRoLnNpbihhbmdsZSksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgdmlldy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoZGVzdCksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5uaW5nXyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgICAgICAgICAgIC8vIGFmdGVyIG9uZSBmaW5nZXIgdXAsIHRpbnkgZHJhZywgc2Vjb25kIGZpbmdlciB1cFxuICAgICAgICAgICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUGFuLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDAgJiYgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAgICAgLy8gc3RvcCBhbnkgY3VycmVudCBhbmltYXRpb25cbiAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vIGtpbmV0aWMgYXMgc29vbiBhcyBtb3JlIHRoYW4gb25lIHBvaW50ZXIgb24gdGhlIHNjcmVlbiBpc1xuICAgICAgICAgICAgLy8gZGV0ZWN0ZWQuIFRoaXMgaXMgdG8gcHJldmVudCBuYXN0eSBwYW5zIGFmdGVyIHBpbmNoLlxuICAgICAgICAgICAgdGhpcy5ub0tpbmV0aWNfID0gdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAxO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEcmFnUGFuO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdQYW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnUGFuLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhbHRTaGlmdEtleXNPbmx5LCBtb3VzZUFjdGlvbkJ1dHRvbiwgbW91c2VPbmx5LCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgZGlzYWJsZSB9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLmFsdFNoaWZ0S2V5c09ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIHRoZSBhbHQgYW5kIHNoaWZ0IGtleXMgYXJlIGhlbGQgZG93bi5cbiAqXG4gKiBUaGlzIGludGVyYWN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBtb3VzZSBkZXZpY2VzLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1JvdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ1JvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIHN0b3BEb3duOiBGQUxTRSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx0U2hpZnRLZXlzT25seTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgICAgICB2YXIgdGhldGEgPSBNYXRoLmF0YW4yKHNpemVbMV0gLyAyIC0gb2Zmc2V0WzFdLCBvZmZzZXRbMF0gLSBzaXplWzBdIC8gMik7XG4gICAgICAgIGlmICh0aGlzLmxhc3RBbmdsZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gdGhldGEgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICAgICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwoLWRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB0aGV0YTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vdXNlQWN0aW9uQnV0dG9uKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEcmFnUm90YXRlO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnUm90YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvQm94XG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4uL2dlb20vUG9seWdvbi5qcyc7XG52YXIgUmVuZGVyQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZW5kZXJCb3gsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBDU1MgY2xhc3MgbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJCb3goY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW9tZXRyeV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5jbGFzc05hbWUgPSAnb2wtYm94ICcgKyBjbGFzc05hbWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVuZFBpeGVsXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0TWFwKG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLnJlbmRlcl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBweCA9ICdweCc7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICAgIHN0eWxlLmxlZnQgPSBNYXRoLm1pbihzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFswXSkgKyBweDtcbiAgICAgICAgc3R5bGUudG9wID0gTWF0aC5taW4oc3RhcnRQaXhlbFsxXSwgZW5kUGl4ZWxbMV0pICsgcHg7XG4gICAgICAgIHN0eWxlLndpZHRoID0gTWF0aC5hYnMoZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdKSArIHB4O1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSBNYXRoLmFicyhlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV0pICsgcHg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS50b3AgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgU3RhcnQgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0UGl4ZWxzID0gZnVuY3Rpb24gKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBzdGFydFBpeGVsO1xuICAgICAgICB0aGlzLmVuZFBpeGVsXyA9IGVuZFBpeGVsO1xuICAgICAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9yIHVwZGF0ZXMgdGhlIGNhY2hlZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBwaXhlbHMgPSBbXG4gICAgICAgICAgICBzdGFydFBpeGVsLFxuICAgICAgICAgICAgW3N0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzFdXSxcbiAgICAgICAgICAgIGVuZFBpeGVsLFxuICAgICAgICAgICAgW2VuZFBpeGVsWzBdLCBzdGFydFBpeGVsWzFdXSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcGl4ZWxzLm1hcCh0aGlzLm1hcF8uZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsLCB0aGlzLm1hcF8pO1xuICAgICAgICAvLyBjbG9zZSB0aGUgcG9seWdvblxuICAgICAgICBjb29yZGluYXRlc1s0XSA9IGNvb3JkaW5hdGVzWzBdLnNsaWNlKCk7XG4gICAgICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5Xy5zZXRDb29yZGluYXRlcyhbY29vcmRpbmF0ZXNdKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlb21ldHJ5XztcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJCb3g7XG59KERpc3Bvc2FibGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJveC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdCb3hcbiAqL1xuLy8gRklYTUUgZHJhdyBkcmFnIGJveFxuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgUmVuZGVyQm94IGZyb20gJy4uL3JlbmRlci9Cb3guanMnO1xuaW1wb3J0IHsgbW91c2VBY3Rpb25CdXR0b24gfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyBhbmQgcmV0dXJucyBhIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCxcbiAqIHRydWUgc2hvdWxkIGJlIHJldHVybmVkLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwpOmJvb2xlYW59IEVuZENvbmRpdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1kcmFnYm94J10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgb2wvZXZlbnRzL2NvbmRpdGlvbn5tb3VzZUFjdGlvbkJ1dHRvbn0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RW5kQ29uZGl0aW9ufSBbYm94RW5kQ29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgYGJveGVuZGAgZXZlbnQgc2hvdWxkIGJlIGZpcmVkLlxuICogRGVmYXVsdCBpcyBgdHJ1ZWAgaWYgdGhlIGFyZWEgb2YgdGhlIGJveCBpcyBiaWdnZXIgdGhhbiB0aGUgYG1pbkFyZWFgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24odGhpczpEcmFnQm94LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW29uQm94RW5kXSBDb2RlIHRvIGV4ZWN1dGUganVzdFxuICogYmVmb3JlIGBib3hlbmRgIGlzIGZpcmVkLlxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBEcmFnQm94RXZlbnRUeXBlID0ge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IHN0YXJ0LlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94c3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YU1RBUlQ6ICdib3hzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIG9uIGRyYWcgd2hlbiBib3ggaXMgYWN0aXZlLlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZHJhZ1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hEUkFHOiAnYm94ZHJhZycsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggZW5kLlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZW5kXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWEVORDogJ2JveGVuZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggY2FuY2VsZWQuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hjYW5jZWxcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YQ0FOQ0VMOiAnYm94Y2FuY2VsJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ0JveH5EcmFnQm94fSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZlxuICogdGhpcyB0eXBlLlxuICovXG52YXIgRHJhZ0JveEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnQm94RXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGV2ZW50IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE9yaWdpbmF0aW5nIGV2ZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdCb3hFdmVudCh0eXBlLCBjb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIG9mIHRoZSBkcmFnIGV2ZW50LlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBCcm93c2VyRXZlbnQgPSBtYXBCcm93c2VyRXZlbnQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIERyYWdCb3hFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IERyYWdCb3hFdmVudCB9O1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6YWN0aXZlJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTwnYm94Y2FuY2VsJ3wnYm94ZHJhZyd8J2JveGVuZCcsIERyYWdCb3hFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6YWN0aXZlJ3wnYm94Y2FuY2VsJ3wnYm94ZHJhZyd8J2JveGVuZCcsIFJldHVybj59IERyYWdCb3hPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBkcmF3IGEgdmVjdG9yIGJveCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgc2hpZnQgb3Igb3RoZXIga2V5IGlzIGhlbGQgZG93bi4gVGhpcyBpcyB1c2VkLCBmb3IgZXhhbXBsZSxcbiAqIGZvciB6b29taW5nIHRvIGEgc3BlY2lmaWMgYXJlYSBvZiB0aGUgbWFwXG4gKiAoc2VlIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbX0pLlxuICpcbiAqIEBmaXJlcyBEcmFnQm94RXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIERyYWdCb3ggPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdCb3gsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ0JveChvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtEcmFnQm94T25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7RHJhZ0JveE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7RHJhZ0JveE9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9Cb3guanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJveF8gPSBuZXcgUmVuZGVyQm94KG9wdGlvbnMuY2xhc3NOYW1lIHx8ICdvbC1kcmFnYm94Jyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWluQXJlYV8gPSBvcHRpb25zLm1pbkFyZWEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluQXJlYSA6IDY0O1xuICAgICAgICBpZiAob3B0aW9ucy5vbkJveEVuZCkge1xuICAgICAgICAgICAgX3RoaXMub25Cb3hFbmQgPSBvcHRpb25zLm9uQm94RW5kO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGFydFBpeGVsXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IG1vdXNlQWN0aW9uQnV0dG9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0VuZENvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJveEVuZENvbmRpdGlvbl8gPSBvcHRpb25zLmJveEVuZENvbmRpdGlvblxuICAgICAgICAgICAgPyBvcHRpb25zLmJveEVuZENvbmRpdGlvblxuICAgICAgICAgICAgOiBfdGhpcy5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IGNvbmRpdGlvbiBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgYm94ZW5kIGV2ZW50XG4gICAgICogc2hvdWxkIGZpcmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IFRoZSBvcmlnaW5hdGluZyBNYXBCcm93c2VyRXZlbnRcbiAgICAgKiAgICAgbGVhZGluZyB0byB0aGUgYm94IGVuZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBzdGFydFBpeGVsIFRoZSBzdGFydGluZyBwaXhlbCBvZiB0aGUgYm94LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IGVuZFBpeGVsIFRoZSBlbmQgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIG9yIG5vdCB0aGUgYm94ZW5kIGNvbmRpdGlvbiBzaG91bGQgYmUgZmlyZWQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuZGVmYXVsdEJveEVuZENvbmRpdGlvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQsIHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGVuZFBpeGVsWzFdIC0gc3RhcnRQaXhlbFsxXTtcbiAgICAgICAgcmV0dXJuIHdpZHRoICogd2lkdGggKyBoZWlnaHQgKiBoZWlnaHQgPj0gdGhpcy5taW5BcmVhXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgZ2VvbWV0cnkgb2YgbGFzdCBkcmF3biBib3guXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5nZXRHZW9tZXRyeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm94Xy5nZXRHZW9tZXRyeSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCBtYXBCcm93c2VyRXZlbnQucGl4ZWwpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChEcmFnQm94RXZlbnRUeXBlLkJPWERSQUcsIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB0aGlzLmJveF8uc2V0TWFwKG51bGwpO1xuICAgICAgICB2YXIgY29tcGxldGVCb3ggPSB0aGlzLmJveEVuZENvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50LCB0aGlzLnN0YXJ0UGl4ZWxfLCBtYXBCcm93c2VyRXZlbnQucGl4ZWwpO1xuICAgICAgICBpZiAoY29tcGxldGVCb3gpIHtcbiAgICAgICAgICAgIHRoaXMub25Cb3hFbmQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChjb21wbGV0ZUJveCA/IERyYWdCb3hFdmVudFR5cGUuQk9YRU5EIDogRHJhZ0JveEV2ZW50VHlwZS5CT1hDQU5DRUwsIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICAgICAgICB0aGlzLmJveF8uc2V0TWFwKG1hcEJyb3dzZXJFdmVudC5tYXApO1xuICAgICAgICAgICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCB0aGlzLnN0YXJ0UGl4ZWxfKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YU1RBUlQsIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIGp1c3QgYmVmb3JlIGBvbmJveGVuZGAgaXMgZmlyZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5vbkJveEVuZCA9IGZ1bmN0aW9uIChldmVudCkgeyB9O1xuICAgIHJldHVybiBEcmFnQm94O1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdCb3g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnQm94LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21cbiAqL1xuaW1wb3J0IERyYWdCb3ggZnJvbSAnLi9EcmFnQm94LmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgc2hpZnRLZXlPbmx5IH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1kcmFnem9vbSddIENTUyBjbGFzcyBuYW1lIGZvciBzdHlsaW5nIHRoZVxuICogYm94LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24uc2hpZnRLZXlPbmx5fS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3V0PWZhbHNlXSBVc2UgaW50ZXJhY3Rpb24gZm9yIHpvb21pbmcgb3V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5BcmVhPTY0XSBUaGUgbWluaW11bSBhcmVhIG9mIHRoZSBib3ggaW4gcGl4ZWwsIHRoaXMgdmFsdWUgaXMgdXNlZCBieSB0aGUgcGFyZW50IGRlZmF1bHRcbiAqIGBib3hFbmRDb25kaXRpb25gIGZ1bmN0aW9uLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gYSBrZXksIHNoaWZ0IGJ5IGRlZmF1bHQsIGlzIGhlbGQgZG93bi5cbiAqXG4gKiBUbyBjaGFuZ2UgdGhlIHN0eWxlIG9mIHRoZSBib3gsIHVzZSBDU1MgYW5kIHRoZSBgLm9sLWRyYWd6b29tYCBzZWxlY3Rvciwgb3JcbiAqIHlvdXIgY3VzdG9tIG9uZSBjb25maWd1cmVkIHdpdGggYGNsYXNzTmFtZWAuXG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ1pvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ1pvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGNvbmRpdGlvbjogY29uZGl0aW9uLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ3pvb20nLFxuICAgICAgICAgICAgbWluQXJlYTogb3B0aW9ucy5taW5BcmVhLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm91dF8gPSBvcHRpb25zLm91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vdXQgOiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIGp1c3QgYmVmb3JlIGBvbmJveGVuZGAgaXMgZmlyZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnWm9vbS5wcm90b3R5cGUub25Cb3hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHZhciB2aWV3ID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSAqLyAobWFwLmdldFZpZXcoKSk7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoKTtcbiAgICAgICAgaWYgKHRoaXMub3V0Xykge1xuICAgICAgICAgICAgdmFyIHJvdGF0ZWRFeHRlbnQgPSB2aWV3LnJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeShnZW9tZXRyeSk7XG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKHJvdGF0ZWRFeHRlbnQpO1xuICAgICAgICAgICAgdmFyIGZhY3RvciA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKTtcbiAgICAgICAgICAgIGdlb21ldHJ5LnNjYWxlKGZhY3RvciAqIGZhY3Rvcik7XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5maXRJbnRlcm5hbChnZW9tZXRyeSwge1xuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBEcmFnWm9vbTtcbn0oRHJhZ0JveCkpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ1pvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgcGFuIH0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tICcuLi9ldmVudHMvS2V5Q29kZS5qcyc7XG5pbXBvcnQgeyBub01vZGlmaWVyS2V5cywgdGFyZ2V0Tm90RWRpdGFibGUgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7IHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlIH0gZnJvbSAnLi4vY29vcmRpbmF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLm5vTW9kaWZpZXJLZXlzfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcGl4ZWxEZWx0YT0xMjhdIFRoZSBhbW91bnQgb2YgcGl4ZWxzIHRvIHBhbiBvbiBlYWNoIGtleVxuICogcHJlc3MuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIHVzaW5nIGtleWJvYXJkIGFycm93cy5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219LlxuICogQGFwaVxuICovXG52YXIgS2V5Ym9hcmRQYW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEtleWJvYXJkUGFuLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEtleWJvYXJkUGFuKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29tYmluZWQgY29uZGl0aW9uIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlZmF1bHRDb25kaXRpb25fID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIChub01vZGlmaWVyS2V5cyhtYXBCcm93c2VyRXZlbnQpICYmIHRhcmdldE5vdEVkaXRhYmxlKG1hcEJyb3dzZXJFdmVudCkpO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbmRpdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbmRpdGlvblxuICAgICAgICAgICAgICAgIDogX3RoaXMuZGVmYXVsdENvbmRpdGlvbl87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbERlbHRhXyA9XG4gICAgICAgICAgICBvcHRpb25zLnBpeGVsRGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGl4ZWxEZWx0YSA6IDEyODtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAgICAgKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB0aGUgZGlyZWN0aW9uIHRvIHBhbiB0byAoaWYgYW4gYXJyb3cga2V5IHdhc1xuICAgICAqIHByZXNzZWQpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQHRoaXMge0tleWJvYXJkUGFufVxuICAgICAqL1xuICAgIEtleWJvYXJkUGFuLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHN0b3BFdmVudCA9IGZhbHNlO1xuICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWURPV04pIHtcbiAgICAgICAgICAgIHZhciBrZXlFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIHZhciBrZXlDb2RlID0ga2V5RXZlbnQua2V5Q29kZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAgICAgICAgIChrZXlDb2RlID09IEtleUNvZGUuRE9XTiB8fFxuICAgICAgICAgICAgICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuTEVGVCB8fFxuICAgICAgICAgICAgICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuUklHSFQgfHxcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLlVQKSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgICAgICB2YXIgbWFwVW5pdHNEZWx0YSA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpICogdGhpcy5waXhlbERlbHRhXztcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGFYID0gMCwgZGVsdGFZID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLkRPV04pIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFZID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWCA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09IEtleUNvZGUuUklHSFQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFYID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWSA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IFtkZWx0YVgsIGRlbHRhWV07XG4gICAgICAgICAgICAgICAgcm90YXRlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgICAgICAgICBwYW4odmlldywgZGVsdGEsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgICAgICBrZXlFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHN0b3BFdmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gS2V5Ym9hcmRQYW47XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBLZXlib2FyZFBhbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkUGFuLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvS2V5Q29kZVxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKiBAY29uc3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIExFRlQ6IDM3LFxuICAgIFVQOiAzOCxcbiAgICBSSUdIVDogMzksXG4gICAgRE9XTjogNDAsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Q29kZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7IHpvb21CeURlbHRhIH0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgeyB0YXJnZXROb3RFZGl0YWJsZSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnRhcmdldE5vdEVkaXRhYmxlfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gbGV2ZWwgZGVsdGEgb24gZWFjaCBrZXkgcHJlc3MuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCB1c2luZyBrZXlib2FyZCArIGFuZCAtLlxuICogTm90ZSB0aGF0LCBhbHRob3VnaCB0aGlzIGludGVyYWN0aW9uIGlzIGJ5IGRlZmF1bHQgaW5jbHVkZWQgaW4gbWFwcyxcbiAqIHRoZSBrZXlzIGNhbiBvbmx5IGJlIHVzZWQgd2hlbiBicm93c2VyIGZvY3VzIGlzIG9uIHRoZSBlbGVtZW50IHRvIHdoaWNoXG4gKiB0aGUga2V5Ym9hcmQgZXZlbnRzIGFyZSBhdHRhY2hlZC4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgbWFwIGRpdixcbiAqIHRob3VnaCB5b3UgY2FuIGNoYW5nZSB0aGlzIHdpdGggdGhlIGBrZXlib2FyZEV2ZW50VGFyZ2V0YCBpblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfS4gYGRvY3VtZW50YCBuZXZlciBsb3NlcyBmb2N1cyBidXQsIGZvciBhbnkgb3RoZXJcbiAqIGVsZW1lbnQsIGZvY3VzIHdpbGwgaGF2ZSB0byBiZSBvbiwgYW5kIHJldHVybmVkIHRvLCB0aGlzIGVsZW1lbnQgaWYgdGhlIGtleXNcbiAqIGFyZSB0byBmdW5jdGlvbi5cbiAqIFNlZSBhbHNvIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5+S2V5Ym9hcmRQYW59LlxuICogQGFwaVxuICovXG52YXIgS2V5Ym9hcmRab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhLZXlib2FyZFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2V5Ym9hcmRab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiB0YXJnZXROb3RFZGl0YWJsZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAgICAgKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHpvb20gaW4gb3Igb3V0IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGVcbiAgICAgKiBrZXkgcHJlc3NlZCB3YXMgJysnIG9yICctJykuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAdGhpcyB7S2V5Ym9hcmRab29tfVxuICAgICAqL1xuICAgIEtleWJvYXJkWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOIHx8XG4gICAgICAgICAgICBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZUFJFU1MpIHtcbiAgICAgICAgICAgIHZhciBrZXlFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGtleUV2ZW50LmNoYXJDb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICAgICAgKGNoYXJDb2RlID09ICcrJy5jaGFyQ29kZUF0KDApIHx8IGNoYXJDb2RlID09ICctJy5jaGFyQ29kZUF0KDApKSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGNoYXJDb2RlID09ICcrJy5jaGFyQ29kZUF0KDApID8gdGhpcy5kZWx0YV8gOiAtdGhpcy5kZWx0YV87XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgICAgICBrZXlFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHN0b3BFdmVudCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICByZXR1cm4gS2V5Ym9hcmRab29tO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmRab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9LaW5ldGljXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogSW1wbGVtZW50YXRpb24gb2YgaW5lcnRpYWwgZGVjZWxlcmF0aW9uIGZvciBtYXAgbW92ZW1lbnQuXG4gKlxuICogQGFwaVxuICovXG52YXIgS2luZXRpYyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVjYXkgUmF0ZSBvZiBkZWNheSAobXVzdCBiZSBuZWdhdGl2ZSkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblZlbG9jaXR5IE1pbmltdW0gdmVsb2NpdHkgKHBpeGVscy9taWxsaXNlY29uZCkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5IERlbGF5IHRvIGNvbnNpZGVyIHRvIGNhbGN1bGF0ZSB0aGUga2luZXRpY1xuICAgICAqICAgICBpbml0aWFsIHZhbHVlcyAobWlsbGlzZWNvbmRzKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBLaW5ldGljKGRlY2F5LCBtaW5WZWxvY2l0eSwgZGVsYXkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlY2F5XyA9IGRlY2F5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluVmVsb2NpdHlfID0gbWluVmVsb2NpdHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWxheV8gPSBkZWxheTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb2ludHNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbmdsZV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmJlZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBvaW50c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5hbmdsZV8gPSAwO1xuICAgICAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMucG9pbnRzXy5wdXNoKHgsIHksIERhdGUubm93KCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZSBzaG91bGQgZG8ga2luZXRpYyBhbmltYXRpb24uXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5wb2ludHNfLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgICAgIC8vIGF0IGxlYXN0IDIgcG9pbnRzIGFyZSByZXF1aXJlZCAoaS5lLiB0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IDYgZWxlbWVudHNcbiAgICAgICAgICAgIC8vIGluIHRoZSBhcnJheSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsYXkgPSBEYXRlLm5vdygpIC0gdGhpcy5kZWxheV87XG4gICAgICAgIHZhciBsYXN0SW5kZXggPSB0aGlzLnBvaW50c18ubGVuZ3RoIC0gMztcbiAgICAgICAgaWYgKHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSA8IGRlbGF5KSB7XG4gICAgICAgICAgICAvLyB0aGUgbGFzdCB0cmFja2VkIHBvaW50IGlzIHRvbyBvbGQsIHdoaWNoIG1lYW5zIHRoYXQgdGhlIHVzZXIgc3RvcHBlZFxuICAgICAgICAgICAgLy8gcGFubmluZyBiZWZvcmUgcmVsZWFzaW5nIHRoZSBtYXBcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBnZXQgdGhlIGZpcnN0IHBvaW50IHdoaWNoIHN0aWxsIGZhbGxzIGludG8gdGhlIGRlbGF5IHRpbWVcbiAgICAgICAgdmFyIGZpcnN0SW5kZXggPSBsYXN0SW5kZXggLSAzO1xuICAgICAgICB3aGlsZSAoZmlyc3RJbmRleCA+IDAgJiYgdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXggKyAyXSA+IGRlbGF5KSB7XG4gICAgICAgICAgICBmaXJzdEluZGV4IC09IDM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDJdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXggKyAyXTtcbiAgICAgICAgLy8gd2UgZG9uJ3Qgd2FudCBhIGR1cmF0aW9uIG9mIDAgKGRpdmlkZSBieSB6ZXJvKVxuICAgICAgICAvLyB3ZSBhbHNvIG1ha2Ugc3VyZSB0aGUgdXNlciBwYW5uZWQgZm9yIGEgZHVyYXRpb24gb2YgYXQgbGVhc3Qgb25lIGZyYW1lXG4gICAgICAgIC8vICgxLzYwcykgdG8gY29tcHV0ZSBzYW5lIGRpc3BsYWNlbWVudCB2YWx1ZXNcbiAgICAgICAgaWYgKGR1cmF0aW9uIDwgMTAwMCAvIDYwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGR4ID0gdGhpcy5wb2ludHNfW2xhc3RJbmRleF0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleF07XG4gICAgICAgIHZhciBkeSA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAxXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMV07XG4gICAgICAgIHRoaXMuYW5nbGVfID0gTWF0aC5hdGFuMihkeSwgZHgpO1xuICAgICAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpIC8gZHVyYXRpb247XG4gICAgICAgIHJldHVybiB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPiB0aGlzLm1pblZlbG9jaXR5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgZGlzdGFuY2UgdHJhdmVsbGVkIChwaXhlbHMpLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmdldERpc3RhbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluVmVsb2NpdHlfIC0gdGhpcy5pbml0aWFsVmVsb2NpdHlfKSAvIHRoaXMuZGVjYXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBvZiB0aGUga2luZXRpYyBwYW5uaW5nIGFuaW1hdGlvbiAocmFkaWFucykuXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuZ2V0QW5nbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuZ2xlXztcbiAgICB9O1xuICAgIHJldHVybiBLaW5ldGljO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IEtpbmV0aWM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LaW5ldGljLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IHsgREVWSUNFX1BJWEVMX1JBVElPLCBGSVJFRk9YIH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7IGFsbCwgYWx3YXlzLCBmb2N1c1dpdGhUYWJpbmRleCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBNb2RlID0ge1xuICAgIFRSQUNLUEFEOiAndHJhY2twYWQnLFxuICAgIFdIRUVMOiAnd2hlZWwnLFxufTtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24uYWx3YXlzfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBXaGVuIHRoZSBtYXAncyB0YXJnZXQgaGFzIGEgYHRhYmluZGV4YCBhdHRyaWJ1dGUgc2V0LFxuICogdGhlIGludGVyYWN0aW9uIHdpbGwgb25seSBoYW5kbGUgZXZlbnRzIHdoZW4gdGhlIG1hcCBoYXMgdGhlIGZvY3VzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhEZWx0YT0xXSBNYXhpbXVtIG1vdXNlIHdoZWVsIGRlbHRhLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbWVvdXQ9ODBdIE1vdXNlIHdoZWVsIHRpbWVvdXQgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlQW5jaG9yPXRydWVdIEVuYWJsZSB6b29taW5nIHVzaW5nIHRoZSBtb3VzZSdzXG4gKiBsb2NhdGlvbiBhcyB0aGUgYW5jaG9yLiBXaGVuIHNldCB0byBgZmFsc2VgLCB6b29taW5nIGluIGFuZCBvdXQgd2lsbCB6b29tIHRvXG4gKiB0aGUgY2VudGVyIG9mIHRoZSBzY3JlZW4gaW5zdGVhZCBvZiB6b29taW5nIG9uIHRoZSBtb3VzZSdzIGxvY2F0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIG1vdXNlIHdoZWVsIHpvb21cbiAqIGV2ZW50IHdpbGwgYWx3YXlzIGFuaW1hdGUgdG8gdGhlIGNsb3Nlc3Qgem9vbSBsZXZlbCBhZnRlciBhbiBpbnRlcmFjdGlvbjtcbiAqIGZhbHNlIG1lYW5zIGludGVybWVkaWFyeSB6b29tIGxldmVscyBhcmUgYWxsb3dlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IHNjcm9sbGluZyB0aGUgbW91c2Ugd2hlZWwuXG4gKiBAYXBpXG4gKi9cbnZhciBNb3VzZVdoZWVsWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTW91c2VXaGVlbFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTW91c2VXaGVlbFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIChvcHRpb25zKSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50b3RhbERlbHRhXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdERlbHRhXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFfID0gb3B0aW9ucy5tYXhEZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhEZWx0YSA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aW1lb3V0XyA9IG9wdGlvbnMudGltZW91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aW1lb3V0IDogODA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVzZUFuY2hvcl8gPVxuICAgICAgICAgICAgb3B0aW9ucy51c2VBbmNob3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXNlQW5jaG9yIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvblxuICAgICAgICAgICAgICAgIDogZmFsc2U7XG4gICAgICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx3YXlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMub25Gb2N1c09ubHlcbiAgICAgICAgICAgID8gYWxsKGZvY3VzV2l0aFRhYmluZGV4LCBjb25kaXRpb24pXG4gICAgICAgICAgICA6IGNvbmRpdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez99XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aW1lb3V0SWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge01vZGV8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFja3BhZCBldmVudHMgc2VwYXJhdGVkIGJ5IHRoaXMgZGVsYXkgd2lsbCBiZSBjb25zaWRlcmVkIHNlcGFyYXRlXG4gICAgICAgICAqIGludGVyYWN0aW9ucy5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrcGFkRXZlbnRHYXBfID0gNDAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgez99XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFja3BhZFRpbWVvdXRJZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIGRlbHRhIHZhbHVlcyBwZXIgem9vbSBsZXZlbFxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVsdGFQZXJab29tXyA9IDMwMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5lbmRJbnRlcmFjdGlvbl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0TWFwKCkuZ2V0VmlldygpO1xuICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHVuZGVmaW5lZCwgdGhpcy5sYXN0RGVsdGFfID8gKHRoaXMubGFzdERlbHRhXyA+IDAgPyAxIDogLTEpIDogMCwgdGhpcy5sYXN0QW5jaG9yXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gKGlmIGl0IHdhcyBhIG1vdXNld2hlZWwtZXZlbnQpIGFuZCBldmVudHVhbGx5XG4gICAgICogem9vbXMgdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgICAgICAgaWYgKHR5cGUgIT09IEV2ZW50VHlwZS5XSEVFTCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB3aGVlbEV2ZW50ID0gLyoqIEB0eXBlIHtXaGVlbEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICB3aGVlbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLnVzZUFuY2hvcl8pIHtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEZWx0YSBub3JtYWxpc2F0aW9uIGluc3BpcmVkIGJ5XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwYm94LWdsLWpzL2Jsb2IvMDAxYzdiOS9qcy91aS9oYW5kbGVyL3Njcm9sbF96b29tLmpzXG4gICAgICAgIHZhciBkZWx0YTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5XSEVFTCkge1xuICAgICAgICAgICAgZGVsdGEgPSB3aGVlbEV2ZW50LmRlbHRhWTtcbiAgICAgICAgICAgIGlmIChGSVJFRk9YICYmIHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9QSVhFTCkge1xuICAgICAgICAgICAgICAgIGRlbHRhIC89IERFVklDRV9QSVhFTF9SQVRJTztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfTElORSkge1xuICAgICAgICAgICAgICAgIGRlbHRhICo9IDQwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWx0YSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sYXN0RGVsdGFfID0gZGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIGlmICh0aGlzLnN0YXJ0VGltZV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gbm93O1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5tb2RlXyB8fCBub3cgLSB0aGlzLnN0YXJ0VGltZV8gPiB0aGlzLnRyYWNrcGFkRXZlbnRHYXBfKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVfID0gTWF0aC5hYnMoZGVsdGEpIDwgNCA/IE1vZGUuVFJBQ0tQQUQgOiBNb2RlLldIRUVMO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHRoaXMubW9kZV8gPT09IE1vZGUuVFJBQ0tQQUQgJiZcbiAgICAgICAgICAgICEodmlldy5nZXRDb25zdHJhaW5SZXNvbHV0aW9uKCkgfHwgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXykpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRyYWNrcGFkVGltZW91dElkXykge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRyYWNrcGFkVGltZW91dElkXyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlldy5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyYWNrcGFkVGltZW91dElkXyA9IHNldFRpbWVvdXQodGhpcy5lbmRJbnRlcmFjdGlvbl8uYmluZCh0aGlzKSwgdGhpcy50aW1lb3V0Xyk7XG4gICAgICAgICAgICB2aWV3LmFkanVzdFpvb20oLWRlbHRhIC8gdGhpcy5kZWx0YVBlclpvb21fLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRvdGFsRGVsdGFfICs9IGRlbHRhO1xuICAgICAgICB2YXIgdGltZUxlZnQgPSBNYXRoLm1heCh0aGlzLnRpbWVvdXRfIC0gKG5vdyAtIHRoaXMuc3RhcnRUaW1lXyksIDApO1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWRfKTtcbiAgICAgICAgdGhpcy50aW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmhhbmRsZVdoZWVsWm9vbV8uYmluZCh0aGlzLCBtYXApLCB0aW1lTGVmdCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlV2hlZWxab29tXyA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbHRhID0gLWNsYW1wKHRoaXMudG90YWxEZWx0YV8sIC10aGlzLm1heERlbHRhXyAqIHRoaXMuZGVsdGFQZXJab29tXywgdGhpcy5tYXhEZWx0YV8gKiB0aGlzLmRlbHRhUGVyWm9vbV8pIC8gdGhpcy5kZWx0YVBlclpvb21fO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW5SZXNvbHV0aW9uKCkgfHwgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXykge1xuICAgICAgICAgICAgLy8gdmlldyBoYXMgYSB6b29tIGNvbnN0cmFpbnQsIHpvb20gYnkgMVxuICAgICAgICAgICAgZGVsdGEgPSBkZWx0YSA/IChkZWx0YSA+IDAgPyAxIDogLTEpIDogMDtcbiAgICAgICAgfVxuICAgICAgICB6b29tQnlEZWx0YSh2aWV3LCBkZWx0YSwgdGhpcy5sYXN0QW5jaG9yXywgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICB0aGlzLm1vZGVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRvdGFsRGVsdGFfID0gMDtcbiAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50aW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRW5hYmxlIG9yIGRpc2FibGUgdXNpbmcgdGhlIG1vdXNlJ3MgbG9jYXRpb24gYXMgYW4gYW5jaG9yIHdoZW4gem9vbWluZ1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlQW5jaG9yIHRydWUgdG8gem9vbSB0byB0aGUgbW91c2UncyBsb2NhdGlvbiwgZmFsc2VcbiAgICAgKiB0byB6b29tIHRvIHRoZSBjZW50ZXIgb2YgdGhlIG1hcFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuc2V0TW91c2VBbmNob3IgPSBmdW5jdGlvbiAodXNlQW5jaG9yKSB7XG4gICAgICAgIHRoaXMudXNlQW5jaG9yXyA9IHVzZUFuY2hvcjtcbiAgICAgICAgaWYgKCF1c2VBbmNob3IpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTW91c2VXaGVlbFpvb207XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBNb3VzZVdoZWVsWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1vdXNlV2hlZWxab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGVcbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgZGlzYWJsZSB9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aHJlc2hvbGQ9MC4zXSBNaW5pbWFsIGFuZ2xlIGluIHJhZGlhbnMgdG8gc3RhcnQgYSByb3RhdGlvbi5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcm90YXRlIHRoZSBtYXAgYnkgdHdpc3Rpbmcgd2l0aCB0d28gZmluZ2Vyc1xuICogb24gYSB0b3VjaCBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBQaW5jaFJvdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGluY2hSb3RhdGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGluY2hSb3RhdGUob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcbiAgICAgICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBvaW50ZXJPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yb3RhdGluZ18gPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yb3RhdGlvbkRlbHRhXyA9IDAuMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aHJlc2hvbGRfID0gb3B0aW9ucy50aHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGhyZXNob2xkIDogMC4zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciByb3RhdGlvbkRlbHRhID0gMC4wO1xuICAgICAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICAgICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgICAgIC8vIGFuZ2xlIGJldHdlZW4gdG91Y2hlc1xuICAgICAgICB2YXIgYW5nbGUgPSBNYXRoLmF0YW4yKHRvdWNoMS5jbGllbnRZIC0gdG91Y2gwLmNsaWVudFksIHRvdWNoMS5jbGllbnRYIC0gdG91Y2gwLmNsaWVudFgpO1xuICAgICAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGFuZ2xlIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyArPSBkZWx0YTtcbiAgICAgICAgICAgIGlmICghdGhpcy5yb3RhdGluZ18gJiYgTWF0aC5hYnModGhpcy5yb3RhdGlvbkRlbHRhXykgPiB0aGlzLnRocmVzaG9sZF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3RhdGlvbkRlbHRhID0gZGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gYW5nbGU7XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyByb3RhdGUgYW5jaG9yIHBvaW50LlxuICAgICAgICAvLyBGSVhNRTogc2hvdWxkIGJlIHRoZSBpbnRlcnNlY3Rpb24gcG9pbnQgYmV0d2VlbiB0aGUgbGluZXM6XG4gICAgICAgIC8vICAgICB0b3VjaDAsdG91Y2gxIGFuZCBwcmV2aW91c1RvdWNoMCxwcmV2aW91c1RvdWNoMVxuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICAgICAgY2VudHJvaWRbMF0gLT0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0O1xuICAgICAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICAgICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChjZW50cm9pZCk7XG4gICAgICAgIC8vIHJvdGF0ZVxuICAgICAgICBpZiAodGhpcy5yb3RhdGluZ18pIHtcbiAgICAgICAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Um90YXRpb25JbnRlcm5hbChyb3RhdGlvbkRlbHRhLCB0aGlzLmFuY2hvcl8pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGluY2hSb3RhdGU7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgUGluY2hSb3RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaW5jaFJvdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BpbmNoWm9vbVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7IGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLCB9IGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249NDAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgcGluY2hpbmcgd2l0aCB0d28gZmluZ2Vyc1xuICogb24gYSB0b3VjaCBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBQaW5jaFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBpbmNoWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQaW5jaFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChvcHRpb25zKTtcbiAgICAgICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBvaW50ZXJPcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiA0MDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdFNjYWxlRGVsdGFfID0gMTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzY2FsZURlbHRhID0gMS4wO1xuICAgICAgICB2YXIgdG91Y2gwID0gdGhpcy50YXJnZXRQb2ludGVyc1swXTtcbiAgICAgICAgdmFyIHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG4gICAgICAgIHZhciBkeCA9IHRvdWNoMC5jbGllbnRYIC0gdG91Y2gxLmNsaWVudFg7XG4gICAgICAgIHZhciBkeSA9IHRvdWNoMC5jbGllbnRZIC0gdG91Y2gxLmNsaWVudFk7XG4gICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gdG91Y2hlc1xuICAgICAgICB2YXIgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBpZiAodGhpcy5sYXN0RGlzdGFuY2VfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNjYWxlRGVsdGEgPSB0aGlzLmxhc3REaXN0YW5jZV8gLyBkaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSBkaXN0YW5jZTtcbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHNjYWxlRGVsdGEgIT0gMS4wKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IHNjYWxlRGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gc2NhbGUgYW5jaG9yIHBvaW50LlxuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IG1hcC5nZXRWaWV3cG9ydCgpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgY2VudHJvaWQgPSBjZW50cm9pZEZyb21Qb2ludGVycyh0aGlzLnRhcmdldFBvaW50ZXJzKTtcbiAgICAgICAgY2VudHJvaWRbMF0gLT0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0O1xuICAgICAgICBjZW50cm9pZFsxXSAtPSB2aWV3cG9ydFBvc2l0aW9uLnRvcDtcbiAgICAgICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChjZW50cm9pZCk7XG4gICAgICAgIC8vIHNjYWxlLCBieXBhc3MgdGhlIHJlc29sdXRpb24gY29uc3RyYWludFxuICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgIHZpZXcuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsKHNjYWxlRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLmxhc3RTY2FsZURlbHRhXyA+IDEgPyAxIDogLTE7XG4gICAgICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sYXN0RGlzdGFuY2VfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGluY2hab29tO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IFBpbmNoWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBpbmNoWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcFxuICovXG5pbXBvcnQgQ29tcG9zaXRlTWFwUmVuZGVyZXIgZnJvbSAnLi9yZW5kZXJlci9Db21wb3NpdGUuanMnO1xuaW1wb3J0IFBsdWdnYWJsZU1hcCBmcm9tICcuL1BsdWdnYWJsZU1hcC5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyBhcyBkZWZhdWx0Q29udHJvbHMgfSBmcm9tICcuL2NvbnRyb2wuanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMgYXMgZGVmYXVsdEludGVyYWN0aW9ucyB9IGZyb20gJy4vaW50ZXJhY3Rpb24uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBUaGUgbWFwIGlzIHRoZSBjb3JlIGNvbXBvbmVudCBvZiBPcGVuTGF5ZXJzLiBGb3IgYSBtYXAgdG8gcmVuZGVyLCBhIHZpZXcsXG4gKiBvbmUgb3IgbW9yZSBsYXllcnMsIGFuZCBhIHRhcmdldCBjb250YWluZXIgYXJlIG5lZWRlZDpcbiAqXG4gKiAgICAgaW1wb3J0IE1hcCBmcm9tICdvbC9NYXAnO1xuICogICAgIGltcG9ydCBWaWV3IGZyb20gJ29sL1ZpZXcnO1xuICogICAgIGltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZSc7XG4gKiAgICAgaW1wb3J0IE9TTSBmcm9tICdvbC9zb3VyY2UvT1NNJztcbiAqXG4gKiAgICAgdmFyIG1hcCA9IG5ldyBNYXAoe1xuICogICAgICAgdmlldzogbmV3IFZpZXcoe1xuICogICAgICAgICBjZW50ZXI6IFswLCAwXSxcbiAqICAgICAgICAgem9vbTogMVxuICogICAgICAgfSksXG4gKiAgICAgICBsYXllcnM6IFtcbiAqICAgICAgICAgbmV3IFRpbGVMYXllcih7XG4gKiAgICAgICAgICAgc291cmNlOiBuZXcgT1NNKClcbiAqICAgICAgICAgfSlcbiAqICAgICAgIF0sXG4gKiAgICAgICB0YXJnZXQ6ICdtYXAnXG4gKiAgICAgfSk7XG4gKlxuICogVGhlIGFib3ZlIHNuaXBwZXQgY3JlYXRlcyBhIG1hcCB1c2luZyBhIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvVGlsZX0gdG9cbiAqIGRpc3BsYXkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvT1NNfk9TTX0gT1NNIGRhdGEgYW5kIHJlbmRlciBpdCB0byBhIERPTVxuICogZWxlbWVudCB3aXRoIHRoZSBpZCBgbWFwYC5cbiAqXG4gKiBUaGUgY29uc3RydWN0b3IgcGxhY2VzIGEgdmlld3BvcnQgY29udGFpbmVyICh3aXRoIENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtdmlld3BvcnRgKSBpbiB0aGUgdGFyZ2V0IGVsZW1lbnQgKHNlZSBgZ2V0Vmlld3BvcnQoKWApLCBhbmQgdGhlbiB0d29cbiAqIGZ1cnRoZXIgZWxlbWVudHMgd2l0aGluIHRoZSB2aWV3cG9ydDogb25lIHdpdGggQ1NTIGNsYXNzIG5hbWVcbiAqIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAgZm9yIGNvbnRyb2xzIGFuZCBzb21lIG92ZXJsYXlzLCBhbmQgb25lIHdpdGhcbiAqIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyYCBmb3Igb3RoZXIgb3ZlcmxheXMgKHNlZSB0aGUgYHN0b3BFdmVudGBcbiAqIG9wdGlvbiBvZiB7QGxpbmsgbW9kdWxlOm9sL092ZXJsYXl+T3ZlcmxheX0gZm9yIHRoZSBkaWZmZXJlbmNlKS4gVGhlIG1hcFxuICogaXRzZWxmIGlzIHBsYWNlZCBpbiBhIGZ1cnRoZXIgZWxlbWVudCB3aXRoaW4gdGhlIHZpZXdwb3J0LlxuICpcbiAqIExheWVycyBhcmUgc3RvcmVkIGFzIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259IGluXG4gKiBsYXllckdyb3Vwcy4gQSB0b3AtbGV2ZWwgZ3JvdXAgaXMgcHJvdmlkZWQgYnkgdGhlIGxpYnJhcnkuIFRoaXMgaXMgd2hhdCBpc1xuICogYWNjZXNzZWQgYnkgYGdldExheWVyR3JvdXBgIGFuZCBgc2V0TGF5ZXJHcm91cGAuIExheWVycyBlbnRlcmVkIGluIHRoZVxuICogb3B0aW9ucyBhcmUgYWRkZWQgdG8gdGhpcyBncm91cCwgYW5kIGBhZGRMYXllcmAgYW5kIGByZW1vdmVMYXllcmAgY2hhbmdlIHRoZVxuICogbGF5ZXIgY29sbGVjdGlvbiBpbiB0aGUgZ3JvdXAuIGBnZXRMYXllcnNgIGlzIGEgY29udmVuaWVuY2UgZnVuY3Rpb24gZm9yXG4gKiBgZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpYC4gTm90ZSB0aGF0IHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvR3JvdXB+R3JvdXB9XG4gKiBpcyBhIHN1YmNsYXNzIG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX0sIHNvIGxheWVycyBlbnRlcmVkIGluIHRoZVxuICogb3B0aW9ucyBvciBhZGRlZCB3aXRoIGBhZGRMYXllcmAgY2FuIGJlIGdyb3Vwcywgd2hpY2ggY2FuIGNvbnRhaW4gZnVydGhlclxuICogZ3JvdXBzLCBhbmQgc28gb24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXAsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1BsdWdnYWJsZU1hcC5qc1wiKS5NYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hcChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIW9wdGlvbnMuY29udHJvbHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuY29udHJvbHMgPSBkZWZhdWx0Q29udHJvbHMoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuaW50ZXJhY3Rpb25zKSB7XG4gICAgICAgICAgICBvcHRpb25zLmludGVyYWN0aW9ucyA9IGRlZmF1bHRJbnRlcmFjdGlvbnMoe1xuICAgICAgICAgICAgICAgIG9uRm9jdXNPbmx5OiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBvcHRpb25zKSB8fCB0aGlzO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE1hcC5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRlTWFwUmVuZGVyZXIodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwO1xufShQbHVnZ2FibGVNYXApKTtcbmV4cG9ydCBkZWZhdWx0IE1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbFxuICovXG5pbXBvcnQgQXR0cmlidXRpb24gZnJvbSAnLi9jb250cm9sL0F0dHJpYnV0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgUm90YXRlIGZyb20gJy4vY29udHJvbC9Sb3RhdGUuanMnO1xuaW1wb3J0IFpvb20gZnJvbSAnLi9jb250cm9sL1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBBdHRyaWJ1dGlvbiB9IGZyb20gJy4vY29udHJvbC9BdHRyaWJ1dGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIENvbnRyb2wgfSBmcm9tICcuL2NvbnRyb2wvQ29udHJvbC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEZ1bGxTY3JlZW4gfSBmcm9tICcuL2NvbnRyb2wvRnVsbFNjcmVlbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdXNlUG9zaXRpb24gfSBmcm9tICcuL2NvbnRyb2wvTW91c2VQb3NpdGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE92ZXJ2aWV3TWFwIH0gZnJvbSAnLi9jb250cm9sL092ZXJ2aWV3TWFwLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUm90YXRlIH0gZnJvbSAnLi9jb250cm9sL1JvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNjYWxlTGluZSB9IGZyb20gJy4vY29udHJvbC9TY2FsZUxpbmUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tIH0gZnJvbSAnLi9jb250cm9sL1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tU2xpZGVyIH0gZnJvbSAnLi9jb250cm9sL1pvb21TbGlkZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBab29tVG9FeHRlbnQgfSBmcm9tICcuL2NvbnRyb2wvWm9vbVRvRXh0ZW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbj10cnVlXSBJbmNsdWRlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NvbnRyb2wvQXR0cmlidXRpb24uanNcIikuT3B0aW9uc30gW2F0dHJpYnV0aW9uT3B0aW9uc11cbiAqIE9wdGlvbnMgZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyb3RhdGU9dHJ1ZV0gSW5jbHVkZVxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NvbnRyb2wvUm90YXRlLmpzXCIpLk9wdGlvbnN9IFtyb3RhdGVPcHRpb25zXSBPcHRpb25zXG4gKiBmb3Ige0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbem9vbV0gSW5jbHVkZSB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL1pvb20uanNcIikuT3B0aW9uc30gW3pvb21PcHRpb25zXSBPcHRpb25zIGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogU2V0IG9mIGNvbnRyb2xzIGluY2x1ZGVkIGluIG1hcHMgYnkgZGVmYXVsdC4gVW5sZXNzIGNvbmZpZ3VyZWQgb3RoZXJ3aXNlLFxuICogdGhpcyByZXR1cm5zIGEgY29sbGVjdGlvbiBjb250YWluaW5nIGFuIGluc3RhbmNlIG9mIGVhY2ggb2YgdGhlIGZvbGxvd2luZ1xuICogY29udHJvbHM6XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnN9IFtvcHRfb3B0aW9uc11cbiAqIERlZmF1bHRzIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fVxuICogQ29udHJvbHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgIHZhciBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgdmFyIHpvb21Db250cm9sID0gb3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb20gOiB0cnVlO1xuICAgIGlmICh6b29tQ29udHJvbCkge1xuICAgICAgICBjb250cm9scy5wdXNoKG5ldyBab29tKG9wdGlvbnMuem9vbU9wdGlvbnMpKTtcbiAgICB9XG4gICAgdmFyIHJvdGF0ZUNvbnRyb2wgPSBvcHRpb25zLnJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGUgOiB0cnVlO1xuICAgIGlmIChyb3RhdGVDb250cm9sKSB7XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobmV3IFJvdGF0ZShvcHRpb25zLnJvdGF0ZU9wdGlvbnMpKTtcbiAgICB9XG4gICAgdmFyIGF0dHJpYnV0aW9uQ29udHJvbCA9IG9wdGlvbnMuYXR0cmlidXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXR0cmlidXRpb24gOiB0cnVlO1xuICAgIGlmIChhdHRyaWJ1dGlvbkNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbHMucHVzaChuZXcgQXR0cmlidXRpb24ob3B0aW9ucy5hdHRyaWJ1dGlvbk9wdGlvbnMpKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRyb2xzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udHJvbC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBEb3VibGVDbGlja1pvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMnO1xuaW1wb3J0IERyYWdQYW4gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzJztcbmltcG9ydCBEcmFnUm90YXRlIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyc7XG5pbXBvcnQgRHJhZ1pvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnWm9vbS5qcyc7XG5pbXBvcnQgS2V5Ym9hcmRQYW4gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyc7XG5pbXBvcnQgS2V5Ym9hcmRab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzJztcbmltcG9ydCBLaW5ldGljIGZyb20gJy4vS2luZXRpYy5qcyc7XG5pbXBvcnQgTW91c2VXaGVlbFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyc7XG5pbXBvcnQgUGluY2hSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyc7XG5pbXBvcnQgUGluY2hab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRG91YmxlQ2xpY2tab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnQW5kRHJvcCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ0FuZERyb3AuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnQm94IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQm94LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1BhbiB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdSb3RhdGUgfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnUm90YXRlQW5kWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmF3IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmF3LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRXh0ZW50IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9FeHRlbnQuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBJbnRlcmFjdGlvbiB9IGZyb20gJy4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBLZXlib2FyZFBhbiB9IGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBLZXlib2FyZFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vZGlmeSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vTW9kaWZ5LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW91c2VXaGVlbFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGluY2hSb3RhdGUgfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUGluY2hab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQb2ludGVyIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Qb2ludGVyLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgU2VsZWN0IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9TZWxlY3QuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTbmFwIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9TbmFwLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgVHJhbnNsYXRlIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9UcmFuc2xhdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZWZhdWx0c09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsdFNoaWZ0RHJhZ1JvdGF0ZT10cnVlXSBXaGV0aGVyIEFsdC1TaGlmdC1kcmFnIHJvdGF0ZSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBJbnRlcmFjdCBvbmx5IHdoZW4gdGhlIG1hcCBoYXMgdGhlXG4gKiBmb2N1cy4gVGhpcyBhZmZlY3RzIHRoZSBgTW91c2VXaGVlbFpvb21gIGFuZCBgRHJhZ1BhbmAgaW50ZXJhY3Rpb25zIGFuZCBpc1xuICogdXNlZnVsIHdoZW4gcGFnZSBzY3JvbGwgaXMgZGVzaXJlZCBmb3IgbWFwcyB0aGF0IGRvIG5vdCBoYXZlIHRoZSBicm93c2VyJ3NcbiAqIGZvY3VzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZG91YmxlQ2xpY2tab29tPXRydWVdIFdoZXRoZXIgZG91YmxlIGNsaWNrIHpvb20gaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtrZXlib2FyZD10cnVlXSBXaGV0aGVyIGtleWJvYXJkIGludGVyYWN0aW9uIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFttb3VzZVdoZWVsWm9vbT10cnVlXSBXaGV0aGVyIG1vdXNld2hlZWwgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2hpZnREcmFnWm9vbT10cnVlXSBXaGV0aGVyIFNoaWZ0LWRyYWcgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZHJhZ1Bhbj10cnVlXSBXaGV0aGVyIGRyYWcgcGFuIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFJvdGF0ZT10cnVlXSBXaGV0aGVyIHBpbmNoIHJvdGF0ZSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcGluY2hab29tPXRydWVdIFdoZXRoZXIgcGluY2ggem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRGVsdGFdIFpvb20gbGV2ZWwgZGVsdGEgd2hlbiB1c2luZyBrZXlib2FyZCBvciBkb3VibGUgY2xpY2sgem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbUR1cmF0aW9uXSBEdXJhdGlvbiBvZiB0aGUgem9vbSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBTZXQgb2YgaW50ZXJhY3Rpb25zIGluY2x1ZGVkIGluIG1hcHMgYnkgZGVmYXVsdC4gU3BlY2lmaWMgaW50ZXJhY3Rpb25zIGNhbiBiZVxuICogZXhjbHVkZWQgYnkgc2V0dGluZyB0aGUgYXBwcm9wcmlhdGUgb3B0aW9uIHRvIGZhbHNlIGluIHRoZSBjb25zdHJ1Y3RvclxuICogb3B0aW9ucywgYnV0IHRoZSBvcmRlciBvZiB0aGUgaW50ZXJhY3Rpb25zIGlzIGZpeGVkLiAgSWYgeW91IHdhbnQgdG8gc3BlY2lmeVxuICogYSBkaWZmZXJlbnQgb3JkZXIgZm9yIGludGVyYWN0aW9ucywgeW91IHdpbGwgbmVlZCB0byBjcmVhdGUgeW91ciBvd25cbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb259IGluc3RhbmNlcyBhbmQgaW5zZXJ0XG4gKiB0aGVtIGludG8gYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb259IGluIHRoZSBvcmRlciB5b3Ugd2FudFxuICogYmVmb3JlIGNyZWF0aW5nIHlvdXIge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBpbnN0YW5jZS4gQ2hhbmdpbmcgdGhlIG9yZGVyIGNhblxuICogYmUgb2YgaW50ZXJlc3QgaWYgdGhlIGV2ZW50IHByb3BhZ2F0aW9uIG5lZWRzIHRvIGJlIHN0b3BwZWQgYXQgYSBwb2ludC5cbiAqIFRoZSBkZWZhdWx0IHNldCBvZiBpbnRlcmFjdGlvbnMsIGluIHNlcXVlbmNlLCBpczpcbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlfkRyYWdSb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tfkRvdWJsZUNsaWNrWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnUGFufkRyYWdQYW59XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGV+UGluY2hSb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vUGluY2hab29tflBpbmNoWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tfk1vdXNlV2hlZWxab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdab29tfkRyYWdab29tfVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zfSBbb3B0X29wdGlvbnNdIERlZmF1bHRzIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICogQSBjb2xsZWN0aW9uIG9mIGludGVyYWN0aW9ucyB0byBiZSB1c2VkIHdpdGggdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH1cbiAqIGNvbnN0cnVjdG9yJ3MgYGludGVyYWN0aW9uc2Agb3B0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICB2YXIgaW50ZXJhY3Rpb25zID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICB2YXIga2luZXRpYyA9IG5ldyBLaW5ldGljKC0wLjAwNSwgMC4wNSwgMTAwKTtcbiAgICB2YXIgYWx0U2hpZnREcmFnUm90YXRlID0gb3B0aW9ucy5hbHRTaGlmdERyYWdSb3RhdGUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlXG4gICAgICAgIDogdHJ1ZTtcbiAgICBpZiAoYWx0U2hpZnREcmFnUm90YXRlKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnUm90YXRlKCkpO1xuICAgIH1cbiAgICB2YXIgZG91YmxlQ2xpY2tab29tID0gb3B0aW9ucy5kb3VibGVDbGlja1pvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZG91YmxlQ2xpY2tab29tIDogdHJ1ZTtcbiAgICBpZiAoZG91YmxlQ2xpY2tab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEb3VibGVDbGlja1pvb20oe1xuICAgICAgICAgICAgZGVsdGE6IG9wdGlvbnMuem9vbURlbHRhLFxuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBkcmFnUGFuID0gb3B0aW9ucy5kcmFnUGFuICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRyYWdQYW4gOiB0cnVlO1xuICAgIGlmIChkcmFnUGFuKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnUGFuKHtcbiAgICAgICAgICAgIG9uRm9jdXNPbmx5OiBvcHRpb25zLm9uRm9jdXNPbmx5LFxuICAgICAgICAgICAga2luZXRpYzoga2luZXRpYyxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgcGluY2hSb3RhdGUgPSBvcHRpb25zLnBpbmNoUm90YXRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpbmNoUm90YXRlIDogdHJ1ZTtcbiAgICBpZiAocGluY2hSb3RhdGUpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IFBpbmNoUm90YXRlKCkpO1xuICAgIH1cbiAgICB2YXIgcGluY2hab29tID0gb3B0aW9ucy5waW5jaFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGluY2hab29tIDogdHJ1ZTtcbiAgICBpZiAocGluY2hab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBQaW5jaFpvb20oe1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBrZXlib2FyZCA9IG9wdGlvbnMua2V5Ym9hcmQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5Ym9hcmQgOiB0cnVlO1xuICAgIGlmIChrZXlib2FyZCkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgS2V5Ym9hcmRQYW4oKSk7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBLZXlib2FyZFpvb20oe1xuICAgICAgICAgICAgZGVsdGE6IG9wdGlvbnMuem9vbURlbHRhLFxuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBtb3VzZVdoZWVsWm9vbSA9IG9wdGlvbnMubW91c2VXaGVlbFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubW91c2VXaGVlbFpvb20gOiB0cnVlO1xuICAgIGlmIChtb3VzZVdoZWVsWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgTW91c2VXaGVlbFpvb20oe1xuICAgICAgICAgICAgb25Gb2N1c09ubHk6IG9wdGlvbnMub25Gb2N1c09ubHksXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIHNoaWZ0RHJhZ1pvb20gPSBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2hpZnREcmFnWm9vbSA6IHRydWU7XG4gICAgaWYgKHNoaWZ0RHJhZ1pvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdab29tKHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gaW50ZXJhY3Rpb25zO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJhY3Rpb24uanMubWFwIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0NvbnRyb2wnO1xyXG5pbXBvcnQgUGx1Z2dhYmxlTWFwIGZyb20gXCJvbC9QbHVnZ2FibGVNYXBcIjtcclxuXHJcbi8qKlxyXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBDb250cm9scyB3aXRoIGNoaWxkIGNvbnRyb2xzXHJcbiAqXHJcbiAqIFRoZSBlbGVtZW50IHByb3BlcnR5IG9mIHRoZSBDb21wb3NpdGVDb250cm9sIHdpbGwgYmVjb21lIHRoZSB0YXJnZXQgZWxlbWVudCBvZiBldmVyeSBjaGlsZCBjb250cm9sXHJcbiAqIGFuZCBhbHNvIHRoZSBjdXJyZW50IG1hcCB3aWxsIGJlIHNldCBmb3IgZWFjaCBjaGlsZCBjb250cm9sXHJcbiAqXHJcbiAqIFRoaXMgaXMgdXNlZCBlLmcuIGZvciB0aGUgKGxheW91dCkgY29udGFpbmVyIGNvbnRyb2xzXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9zaXRlQ29udHJvbCBleHRlbmRzIENvbnRyb2wge1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgY2hpbGQgY29udHJvbHNcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGNoaWxkQ29udHJvbHM6IENvbnRyb2xbXTtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2hpbGRDb250cm9scyBBIHNpbmdsZSBjaGlsZCBjb250cm9sIG9yIGEgY29sbGVjdGlvbiBvZiBjaGlsZCBjb250cm9sc1xyXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgY29udHJvbCBvcHRpb25zXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGNoaWxkQ29udHJvbHM6IENvbnRyb2wgfCBDb250cm9sW10sIG9wdGlvbnM/OiBPcHRpb25zKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcblxyXG4gICAgaWYoIW9wdHMuZWxlbWVudCkge1xyXG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtY29tcG9zaXRlJztcclxuICAgICAgb3B0cy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgY2hpbGRyZW47XHJcbiAgICBpZiAoY2hpbGRDb250cm9scyBpbnN0YW5jZW9mIENvbnRyb2wpIHtcclxuICAgICAgY2hpbGRyZW4gPSBbY2hpbGRDb250cm9sc107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjaGlsZHJlbiA9IGNoaWxkQ29udHJvbHM7XHJcbiAgICB9XHJcblxyXG4gICAgY2hpbGRyZW4uZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgY29udHJvbC5zZXRUYXJnZXQob3B0cy5lbGVtZW50IGFzIEhUTUxFbGVtZW50KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN1cGVyKG9wdHMpO1xyXG5cclxuICAgIHRoaXMuY2hpbGRDb250cm9scyA9IGNoaWxkcmVuO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIG92ZXJyaWRlbiBzZXRNYXAgbWV0aG9kXHJcbiAgICpcclxuICAgKiBIZXJlIHdlIHNldCB0aGUgbWFwIGZvciBhbGwgY2hpbGQgY29udHJvbHNcclxuICAgKiBAcGFyYW0gbWFwIHRoZSBjdXJyZW50IG1hcFxyXG4gICAqL1xyXG4gIHNldE1hcChtYXA6IFBsdWdnYWJsZU1hcCk6IHZvaWQge1xyXG4gICAgc3VwZXIuc2V0TWFwKG1hcCk7XHJcbiAgICBpZihtYXApIHtcclxuICAgICAgdGhpcy5jaGlsZENvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgY29udHJvbC5zZXRNYXAobWFwKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIGdldHRlciBmb3IgdGhlIGNoaWxkIGNvbnRyb2xzXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRDaGlsZENvbnRyb2xzKCk6IENvbnRyb2xbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5jaGlsZENvbnRyb2xzO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gXCJvbC9jb250cm9sL0NvbnRyb2xcIjtcclxuaW1wb3J0IHtDb21wb3NpdGVDb250cm9sfSBmcm9tIFwiLi4vYmFzZVwiO1xyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIGEge0BsaW5rY29kZSBDb250YWluZXJ9XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbnRhaW5lck9wdGlvbnMgZXh0ZW5kcyBPcHRpb25zIHtcclxuICAvKiogVGhlIHN0eWxlIGNsYXNzIG9mIHRoZSBjb250YWluZXIgKiovXHJcbiAgc3R5bGVDbGFzczogc3RyaW5nXHJcbiAgLyoqIEEgY2hpbGQgY29udHJvbCBvciBhbiBhcnJheSBvZiBjaGlsZCBjb250cm9scyAqKi9cclxuICBjaGlsZENvbnRyb2xzOiBDb250cm9sIHwgQ29udHJvbFtdLFxyXG59XHJcblxyXG4vKipcclxuICogQSBiYXNlIGNsYXNzIGZvciBhIGNvbnRhaW5lciBvZiBjb250cm9scyBpbiB0aGUgc2FtZSBIVE1MIGRpdiBlbGVtZW50XHJcbiAqXHJcbiAqIFRoaXMgY29udHJvbCBjcmVhdGVzIGEgcGFyZW50IGRpdiwgYW5kIHB1dHMgdGhlIGNoaWxkIGNvbnRyb2xzIGluIGl0LlxyXG4gKiBUYXJnZXQgYW5kIG1hcCBhcmUgc2V0IGF1dG9tYXRpY2FsbHkgLSBzZWUge0BsaW5rY29kZSBDb21wb3NpdGVDb250cm9sfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbnRhaW5lciBleHRlbmRzIENvbXBvc2l0ZUNvbnRyb2wge1xyXG5cclxuICAvKiogVGhlIHN0eWxlIGNsYXNzIG9mIHRoZSBjb250YWluZXIgKiovXHJcbiAgcHJpdmF0ZSByZWFkb25seSBzdHlsZUNsYXNzOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNvbnRhaW5lciBvcHRpb25zXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IENvbnRhaW5lck9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQgPyBvcHRpb25zLmVsZW1lbnQgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKG9wdGlvbnMuc3R5bGVDbGFzcyk7XHJcbiAgICBvcHRpb25zLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgc3VwZXIob3B0aW9ucy5jaGlsZENvbnRyb2xzLCBvcHRpb25zKTtcclxuICAgIHRoaXMuc3R5bGVDbGFzcyA9IG9wdGlvbnMuc3R5bGVDbGFzcztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgZ2V0dGVyIGZvciB0aGUgc3R5bGUgY2xhc3NcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0U3R5bGVDbGFzcygpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuc3R5bGVDbGFzcztcclxuICB9XHJcblxyXG59XHJcbiIsIi8qKlxyXG4gKiBBIHNpbXBsZSBoZWxwZXIgbWV0aG9kIGZvciBzaW1wbGVyIGhhbmRsaW5nIG9mIGFycmF5cy5cclxuICogUmVnYXJkbGVzcyBpZiB5b3UgZ2l2ZSBhIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdzIHlvdSB3aWxsIHJlY2VpdmUgYW4gYXJyYXlcclxuICpcclxuICogQHBhcmFtIHZhbHVlIGEgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ1xyXG4gKi9cclxuY29uc3QgdG9BcnJheSA9ICh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pID0+IHtcclxuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgIHJldHVybiB2YWx1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIFt2YWx1ZV07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBjaGlsZCBIVE1MIGVsZW1lbnQgaWYgaXQgZG9lcyBub3QgZXhpc3QgYW5kIGFkZHMgaXQgYXMgY2hpbGQgdG8gdGhlIGdpdmVuIGVsZW1lbnRcclxuICpcclxuICogQHBhcmFtIGVsZW1lbnQgdGhlIHBhcmVudCBlbGVtZW50XHJcbiAqIEBwYXJhbSB0YWdOYW1lIHRoZSB0YWcgbmFtZSBmb3IgdGhlIG5ldyBjaGlsZCAtIGUuZy4gZGl2XHJcbiAqIEBwYXJhbSBjbGFzc05hbWUgYSBjc3MgY2xhc3MgbmFtZSBmb3IgdGhlIG5ldyBjaGlsZFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNoaWxkSWZOb3RFeGlzdCA9IChlbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwsIHRhZ05hbWU6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgIGlmIChlbGVtZW50ICE9IG51bGwpIHtcclxuICAgICAgaWYgKCFlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NsYXNzTmFtZX1gKSkge1xyXG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudCh0YWdOYW1lLCBjbGFzc05hbWUpKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coXCJFbmNsb3NpbmcgZWxlbWVudCBpcyBudWxsXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuO1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgYSBjaGlsZCBlbGVtZW50IHdpdGggZ2l2ZW4gY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGdpdmVuIGVsZW1lbnRcclxuICogQHBhcmFtIGVsZW1lbnQgdGhlIHBhcmVudCBlbGVtZW50XHJcbiAqIEBwYXJhbSBjbGFzc05hbWUgdGhlIGNzcyBjbGFzcyBuYW1lIG9mIHRoZSBjaGlsZCBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgcmVtb3ZlQ2hpbGRJZkV4aXN0ID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgY2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICBjb25zdCBjaGlsZCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y2xhc3NOYW1lfWApO1xyXG4gICAgaWYgKGNoaWxkICE9IG51bGwgJiYgZWxlbWVudC5jb250YWlucyhjaGlsZCkpIHtcclxuICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZCk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVtb3ZlIGFsbCBjaGlsZHJlbiBlbGVtZW50cyB3aXRoIGdpdmVuIGNzcyBjbGFzcyBuYW1lIG9mIHRoZSBnaXZlbiBwYXJlbnQgZWxlbWVudC5cclxuICogVGhlIGNoaWxkcmVuIGRvbid0IGhhdmUgdG8gYmUgYSBkaXJlY3QgY2hpbGQgb2YgdGhlIHBhcmVudCBlbGVtZW50LlxyXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnRcclxuICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGNoaWxkIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBjb25zdCByZW1vdmVDaGlsZHJlbklmRXhpc3QgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsLCBjbGFzc05hbWU6IHN0cmluZyk6IHZvaWQgPT4ge1xyXG4gIGlmIChlbGVtZW50ICE9IG51bGwpIHtcclxuICAgIGNvbnN0IGNoaWxkcmVuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtjbGFzc05hbWV9YCk7XHJcbiAgICBpZiAoY2hpbGRyZW4gIT0gbnVsbCAmJiBjaGlsZHJlbi5sZW5ndGg+MCkge1xyXG4gICAgICBjaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IGNoaWxkLnBhcmVudEVsZW1lbnQhLnJlbW92ZUNoaWxkKGNoaWxkKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIEhUTUwgZWxlbWVudFxyXG4gKiBAcGFyYW0gdGFnTmFtZSB0aGUgdGFnIG5hbWUgZm9yIHRoZSBuZXcgZWxlbWVudCAtIGUuZy4gZGl2XHJcbiAqIEBwYXJhbSBjbGFzc05hbWUgYSBjc3MgY2xhc3MgbmFtZSBmb3IgdGhlIG5ldyBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudCA9ICh0YWdOYW1lOiBzdHJpbmcsIGNsYXNzTmFtZTogc3RyaW5nKTogSFRNTEVsZW1lbnQgPT4ge1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xyXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gIHJldHVybiBlbGVtZW50O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRvZ2dsZXMgY3NzIGNsYXNzIG5hbWVzIG9mIGVsZW1lbnRzIGZvdW5kIGJ5IHRoZSBnaXZlbiBzZWxlY3RvcihzKVxyXG4gKiBAcGFyYW0gc2VsZWN0b3JzMnRvZ2dsZSBvbmUgb3IgbW9yZSBjc3Mgc2VsZWN0b3JzXHJcbiAqIEBwYXJhbSB0b2dnbGVDbGFzc05hbWVzIG9uZSBvciBtb3JlIGNsYXNzIG5hbWVzIHRvIHRvZ2dsZVxyXG4gKiBAcGFyYW0gYW5jZXN0b3IgYW4gYW5jZXN0b3IgZWxlbWVudCBmb3IgdGhlIHF1ZXJ5IHNlbGVjdGlvbiAoZGVmYXVsdCBpcyBkb2N1bWVudClcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVDbGFzcyA9IChzZWxlY3RvcnMydG9nZ2xlOiBzdHJpbmcgfCBzdHJpbmdbXSwgdG9nZ2xlQ2xhc3NOYW1lczogc3RyaW5nIHwgc3RyaW5nW10sIGFuY2VzdG9yOiBEb2N1bWVudCB8IEVsZW1lbnQgPSBkb2N1bWVudCk6IHZvaWQgPT4ge1xyXG4gIHRvQXJyYXkoc2VsZWN0b3JzMnRvZ2dsZSkuZm9yRWFjaChzZWxlY3RvcjJ0b2dnbGUgPT4ge1xyXG4gICAgY29uc3QgdG9nZ2xlRWxlbWVudCA9IGFuY2VzdG9yLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IydG9nZ2xlKTtcclxuICAgIGlmICh0b2dnbGVFbGVtZW50KSB7XHJcbiAgICAgIHRvQXJyYXkodG9nZ2xlQ2xhc3NOYW1lcykuZm9yRWFjaChcclxuICAgICAgICB0b2dnbGVDbGFzc05hbWUgPT4gdG9nZ2xlRWxlbWVudD8uY2xhc3NMaXN0LnRvZ2dsZSh0b2dnbGVDbGFzc05hbWUpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBZGRzIGEgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gZWxlbWVudHMgd2hpY2ggdHJpZ2dlcnMgY3NzIGNsYXNzIHRvZ2dsaW5nXHJcbiAqIEBwYXJhbSBjbGlja1NlbGVjdG9ycyBvbmUgb3IgbW9yZSBjc3Mgc2VsZWN0b3JzIGZvciB0aGUgZWxlbWVudHMgd2hpY2ggc2hhbGwgbGlzdGVuIHRvIGNsaWNrIGV2ZW50c1xyXG4gKiBAcGFyYW0gc2VsZWN0b3JzMnRvZ2dsZSBvbmUgb3IgbW9yZSBjc3MgY2xhc3Mgc2VsZWN0b3JzIGZvciB0aGUgZWxlbWVudHMgd2l0aCB0aGUgY3NzIGNsYXNzZXMgdG8gdG9nZ2xlXHJcbiAqIEBwYXJhbSB0b2dnbGVDbGFzc05hbWVzIG9uZSBvciBtb3JlIGNzcyBjbGFzcyBuYW1lcyB3aGljaCBzaGFsbCB0b2dnbGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVDbGFzc09uQ2xpY2sgPSAoY2xpY2tTZWxlY3RvcnM6IHN0cmluZyB8IHN0cmluZ1tdLCBzZWxlY3RvcnMydG9nZ2xlOiBzdHJpbmcgfCBzdHJpbmdbXSwgdG9nZ2xlQ2xhc3NOYW1lczogc3RyaW5nIHwgc3RyaW5nW10pOiB2b2lkID0+IHtcclxuICB0b0FycmF5KGNsaWNrU2VsZWN0b3JzKS5mb3JFYWNoKGNsaWNrU2VsZWN0b3IgPT4ge1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGlja1NlbGVjdG9yKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgdG9nZ2xlQ2xhc3Moc2VsZWN0b3JzMnRvZ2dsZSwgdG9nZ2xlQ2xhc3NOYW1lcyk7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiIsImltcG9ydCBDb250cm9sLCB7T3B0aW9uc30gZnJvbSBcIm9sL2NvbnRyb2wvQ29udHJvbFwiO1xyXG5pbXBvcnQge0NvbXBvc2l0ZUNvbnRyb2x9IGZyb20gXCIuL0NvbXBvc2l0ZUNvbnRyb2xcIjtcclxuaW1wb3J0IEJhc2VFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcbmltcG9ydCBFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcbmltcG9ydCB7T2JqZWN0T25TaWduYXR1cmV9IGZyb20gXCJvbC9PYmplY3RcIjtcclxuaW1wb3J0IHtPblJldHVybn0gZnJvbSBcIm9sL09ic2VydmFibGVcIjtcclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciB7QGxpbmtjb2RlIEJ1dHRvbn1cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQnV0dG9uT3B0aW9ucyBleHRlbmRzIE9wdGlvbnMge1xyXG5cclxuICAvKiogVGhlIHVuaWNvZGUgbnVtYmVyIG9mIHRoZSBmb250IGljb24sIGUuZy4gMHhlOTAzICoqL1xyXG4gIHVuaWNvZGU/OiBudW1iZXIgfCBudWxsLFxyXG5cclxuICAvKiogVGhlIHRleHQgdXNlZCBmb3IgdGhlIHRpdGxlIGFuZCBhcmlhIGF0dHJpYnV0ZXMgb2YgdGhlIGJ1dHRvbiBjb250YWluZXIgYW5kIHRoZSBidXR0b24gaXRzZWxmLiAqKi9cclxuICB0b29sdGlwPzogc3RyaW5nLFxyXG5cclxuICAvKiogU3R5bGUgY2xhc3MgbmFtZSBmb3IgdGhlIGNvbnRhaW5lciAgKiovXHJcbiAgY29udGFpbmVyQ2xhc3NOYW1lPzogc3RyaW5nLFxyXG5cclxuICAvKiogU3R5bGUgY2xhc3MgbmFtZSBmb3IgdGhlIGJ1dHRvbiBlbGVtZW50ICoqL1xyXG4gIGljb25DbGFzc05hbWU/OiBzdHJpbmcgfCBudWxsLFxyXG5cclxuICAvKiogSWYgJ3RydWUnIHRoZSB0b29sdGlwIHRleHQgd2lsbCBiZSByZW5kZXJlZCBhcyB2aXNpYmxlIHRleHQgZWxlbWVudCAgKiovXHJcbiAgdG9vbHRpcEFzVGV4dEVsZW1lbnQ/OiBib29sZWFuLFxyXG5cclxuICAvKiogSWYgJ3RydWUnIHRoZSBkZWZhdWx0IGJ1dHRvbiBjbGljayBoYW5kbGVyIHdpbGwgbm90IGJlIGV4ZWN1dGVkICoqL1xyXG4gIHByZXZlbnREZWZhdWx0PzogYm9vbGVhblxyXG59XHJcblxyXG4vKipcclxuICogVGhlIGV4dGVuZGVkIHNpZ25hdHVyZSBmb3IgdGhlIG9uIG1ldGhvZFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuZXhwb3J0IHR5cGUgQnV0dG9uT25TaWduYXR1cmU8UmV0dXJuPiA9ICgodHlwZTogXCJjbGlja1wiIHwgXCJjbGlja1wiW10sIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50KSA9PiBhbnkpID0+IFJldHVybikgJiBPYmplY3RPblNpZ25hdHVyZTxSZXR1cm4+O1xyXG5cclxuLyoqXHJcbiAqICoqQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgYnV0dG9ucyoqXHJcbiAqXHJcbiAqIEEgYnV0dG9uIGlzIGFuIE9wZW5MYXllciBjb250cm9sIHdpdGggYSBkZWZhdWx0IGxheW91dC4gWW91IGNhbiBjaGFuZ2Ugc29tZSBzdHlsZSBjbGFzc2VzLCB0b29sdGlwcyBldGNcclxuICogd2l0aCB0aGUge0BsaW5rY29kZSBCdXR0b25PcHRpb25zfVxyXG4gKlxyXG4gKiBTb21lIGJ1dHRvbnMgZXh0ZW50IGZyb20gT3BlbkxheWVyIGNvbnRyb2xzIHdpdGggaXRzIGZlYXR1cmVzLCBidXQgbW9zdCBvZiB0aGVtIGFyZSBqdXN0IGEgc2hlbGwgZm9yIGZ1cnRoZXIgaW1wbGVtZW50YXRpb25zXHJcbiAqXHJcbiAqIFlvdSBjYW4gc2V0IHRoZSBpY29uIGZvbnQgb2YgdGhlIGJ1dHRvbiB3aXRoIHRoZSB1bmljb2RlIG51bWJlciBvciB0aGUgaWNvbkNsYXNzTmFtZSBvcHRpb24uXHJcbiAqXHJcbiAqIEBldmVudCBjbGljayBBIEJ1dHRvbiBkaXNwYXRjaGVzIHRoZSBDTElDSyBldmVudCBzbyB0aGF0IHlvdSBjYW4gbGlzdGVuIHRvIGl0IHdpdGggdGhlICpvbiogT3BlbkxheWVyIG1ldGhvZFxyXG4gKiBFeGFtcGxlOlxyXG4gKiBgYGB0eXBlc2NyaXB0XHJcbiAqIGNvbnN0IHByaW50Q3RybCA9IG5ldyBQcmludCh7IHByZXZlbnREZWZhdWx0OiB0cnVlIH0pO1xyXG4gKiBwcmludEN0cmwub24oRXZlbnRUeXBlLkNMSUNLLCB0aGlzLmhhbmRsZVByaW50KTtcclxuICogYGBgXHJcbiAqIEFsdGVybmF0aXZseSB5b3UgY2FuIG92ZXJyaWRlIHRoZSB7QGxpbmtjb2RlIGhhbmRsZUV2ZW50fSBtZXRob2RcclxuICpcclxuICogQHJlbWFyayBBcyBhIGJ1dHRvbiBpcyBhbHNvIGEgQ29tcG9zaXRlQ29udHJvbCBpdCBjYW4gaGF2ZSBjaGlsZCBjb250cm9scy4gRS5nLiBpdCdzIHVzZWQgd2l0aCB0aGUge0BsaW5rY29kZSBUb2dnbGVCdXR0b259XHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQnV0dG9uIGV4dGVuZHMgQ29tcG9zaXRlQ29udHJvbCB7XHJcblxyXG4gIC8qKiBUaGUgSFRNTCBlbGVtZW50IG9mIHRoZSBidXR0b24gKiovXHJcbiAgcHJvdGVjdGVkIGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG4gIC8qKiBUaGUgdW5pY29kZSBmb3IgdGhlIGZvbnQgaWNvbiAqKi9cclxuICBwcm90ZWN0ZWQgdW5pY29kZTogbnVtYmVyIHwgbnVsbDtcclxuXHJcbiAgLyoqIFRoZSBpY29ucyBjc3MgY2xhc3MgbmFtZSAqKi9cclxuICBwcm90ZWN0ZWQgaWNvbkNsYXNzTmFtZTogc3RyaW5nIHwgbnVsbDtcclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICoqL1xyXG4gIHB1YmxpYyBvbiE6IEJ1dHRvbk9uU2lnbmF0dXJlPE9uUmV0dXJuPjtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBCdXR0b24gb3B0aW9uc1xyXG4gICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIE9wdGlvbmFsIGNoaWxkIGNvbnRyb2xzXHJcbiAgICogQGV2ZW50IGNsaWNrIFRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihvcHRpb25zOiBCdXR0b25PcHRpb25zLCBjaGlsZENvbnRyb2xzPzogQ29udHJvbCB8IENvbnRyb2xbXSkge1xyXG5cclxuICAgIG9wdGlvbnMudG9vbHRpcEFzVGV4dEVsZW1lbnQgPSBvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50ID8gb3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCA6IGZhbHNlO1xyXG5cclxuICAgIG9wdGlvbnMudW5pY29kZSA9IG9wdGlvbnMudW5pY29kZSB8fCBudWxsO1xyXG4gICAgb3B0aW9ucy5pY29uQ2xhc3NOYW1lID0gb3B0aW9ucy5pY29uQ2xhc3NOYW1lIHx8IG51bGw7XHJcbiAgICBpZihvcHRpb25zLnVuaWNvZGU9PT1udWxsICYmIG9wdGlvbnMuaWNvbkNsYXNzTmFtZT09PW51bGwpIHtcclxuICAgICAgb3B0aW9ucy51bmljb2RlID0gMHhlOTAzO1xyXG4gICAgfVxyXG4gICAgb3B0aW9ucy50b29sdGlwID0gb3B0aW9ucy50b29sdGlwIHx8ICcnO1xyXG5cclxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQgPyBvcHRpb25zLmVsZW1lbnQgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQuY2xhc3NOYW1lID0gb3B0aW9ucy5jb250YWluZXJDbGFzc05hbWUgPyBvcHRpb25zLmNvbnRhaW5lckNsYXNzTmFtZSA6ICdvbC1jb250cm9sIGJnaXMtY29udHJvbCc7XHJcbiAgICBidXR0b25Db250YWluZXJFbGVtZW50LnRpdGxlID0gb3B0aW9ucy50b29sdGlwO1xyXG5cclxuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtaWNvbi1idXR0b24nO1xyXG5cclxuICAgIGlmKG9wdGlvbnMudW5pY29kZSAhPT0gbnVsbCkge1xyXG4gICAgICBidXR0b25FbGVtZW50LnRleHRDb250ZW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQob3B0aW9ucy51bmljb2RlKTtcclxuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5pY29uQ2xhc3NOYW1lICE9PSBudWxsKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoQnV0dG9uLmdldEljb25FbGVtZW50Rm9ySWNvbkNsYXNzTmFtZShvcHRpb25zLmljb25DbGFzc05hbWUpKTtcclxuICAgIH1cclxuXHJcbiAgICBidXR0b25FbGVtZW50LnRpdGxlID0gb3B0aW9ucy50b29sdGlwO1xyXG4gICAgaWYob3B0aW9ucy50b29sdGlwLmxlbmd0aCA+IDApIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBvcHRpb25zLnRvb2x0aXApO1xyXG4gICAgfVxyXG4gICAgYnV0dG9uQ29udGFpbmVyRWxlbWVudC5hcHBlbmQoYnV0dG9uRWxlbWVudCk7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMudG9vbHRpcEFzVGV4dEVsZW1lbnQpIHtcclxuICAgICAgY29uc3QgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICBkaXZFbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWNvbnRyb2wtYnV0dG9uLXRleHQtY29udGFpbmVyJztcclxuICAgICAgY29uc3Qgc3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJykgYXMgSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgICBzcGFuRWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbnMudG9vbHRpcDtcclxuICAgICAgc3BhbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtY29udHJvbC1idXR0b24tdGV4dCc7XHJcbiAgICAgIGRpdkVsZW1lbnQuYXBwZW5kQ2hpbGQoc3BhbkVsZW1lbnQpO1xyXG4gICAgICBidXR0b25Db250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN1cGVyKGNoaWxkQ29udHJvbHMgPyBjaGlsZENvbnRyb2xzIDogW10sIHtcclxuICAgICAgLi4ub3B0aW9ucyxcclxuICAgICAgZWxlbWVudDogYnV0dG9uQ29udGFpbmVyRWxlbWVudFxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy51bmljb2RlID0gb3B0aW9ucy51bmljb2RlO1xyXG4gICAgdGhpcy5pY29uQ2xhc3NOYW1lID0gb3B0aW9ucy5pY29uQ2xhc3NOYW1lO1xyXG4gICAgdGhpcy5idXR0b24gPSBidXR0b25FbGVtZW50O1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KFwiY2xpY2tcIiksIGZhbHNlKTtcclxuXHJcbiAgICBpZighb3B0aW9ucy5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVFdmVudCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBpcyB0aGUgZGVmYXVsdCBjbGljayBoYW5kbGVyIG9mIGEgYnV0dG9uXHJcbiAgICpcclxuICAgKiBPdmVycmlkZSBpdCBmb3IgeW91ciBiZW5lZml0IG9yIGRpc2FibGUgZXhlY3V0aW9uIHdpdGggb3B0aW9ucy5wcmV2ZW50RGVmYXVsdFxyXG4gICAqIEBwYXJhbSBldmVudFxyXG4gICAqL1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcclxuICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEJhc2VFdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgZ2V0dGVyIGZvciB0aGUgYnV0dG9uXHJcbiAgICovXHJcbiAgcHVibGljIGdldEJ1dHRvbigpOiBIVE1MQnV0dG9uRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5idXR0b247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIHNldHRlciB0byBjaGFuZ2UgdGhlIHVuaWNvZGUgZm9yIHRoZSBidXR0b24gZm9udCBpY29uLlxyXG4gICAqIFJlbW92ZXMgdGhlIGljb24gdGFnIGZvciB0aGUgYnV0dG9uLlxyXG4gICAqIEBwYXJhbSB1bmljb2RlXHJcbiAgICovXHJcbiAgcHVibGljIHNldEJ1dHRvblVuaWNvZGUodW5pY29kZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLmdldEJ1dHRvbigpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgdGhpcy5nZXRCdXR0b24oKS50ZXh0Q29udGVudCA9IFN0cmluZy5mcm9tQ29kZVBvaW50KHVuaWNvZGUpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBzZXR0ZXIgdG8gY2hhbmdlIHRoZSBpY29uIGNsYXNzIG5hbWUgZm9yIHRoZSBidXR0b24uXHJcbiAgICogUmVzZXRzIHRoZSB1bmljb2RlIGZvciB0aGUgYnV0dG9uIGljb24uXHJcbiAgICogQHBhcmFtIGljb25DbGFzc05hbWVcclxuICAgKi9cclxuICBwdWJsaWMgc2V0QnV0dG9uSWNvbkNsYXNzTmFtZShpY29uQ2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgIHRoaXMuZ2V0QnV0dG9uKCkudGV4dENvbnRlbnQgPSAnJztcclxuICAgIHRoaXMuZ2V0QnV0dG9uKCkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB0aGlzLmdldEJ1dHRvbigpLmFwcGVuZENoaWxkKEJ1dHRvbi5nZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUoaWNvbkNsYXNzTmFtZSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IGFuIGljb24gZWxlbWVudCBmb3IgdGhlIGdpdmVuIGNzcyBjbGFzcyBuYW1lXHJcbiAgICpcclxuICAgKiBAcGFyYW0gaWNvbkNsYXNzTmFtZVxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBzdGF0aWMgZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKGljb25DbGFzc05hbWU6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xyXG4gICAgaWNvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtaWNvbiAnICsgaWNvbkNsYXNzTmFtZTtcclxuICAgIHJldHVybiBpY29uRWxlbWVudDtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCBFdmVudFR5cGUgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFR5cGVcIjtcclxuaW1wb3J0IHtjcmVhdGVDaGlsZElmTm90RXhpc3QsIHJlbW92ZUNoaWxkcmVuSWZFeGlzdCwgdG9nZ2xlQ2xhc3N9IGZyb20gXCIuLi8uLi8uLi91dGlsL2RvbVwiO1xyXG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSBcIi4uL2NvbnRhaW5lclwiO1xyXG5pbXBvcnQge0J1dHRvbiwgQnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vQnV0dG9uXCI7XHJcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xyXG5cclxuLyoqXHJcbiAqIFRoZSB0b2dnbGUgZXZlbnQgd2hpY2ggaXMgZGlzcGF0Y2hlZCB3aGVuIHRoZSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn0gaXMgY2xpY2tlZFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRvZ2dsZUV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcclxuXHJcbiAgLyoqIEEgZmxhZyB0byBzaG93IHRoZSBzdGF0dXMgb2YgYSB0b2dnbGUgZXZlbnQgKiovXHJcbiAgaXNUb2dnbGVkOiBib29sZWFuO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB0eXBlIFRoZSBldmVudCB0eXBlLiBVc3VhbGx5IGEge0BsaW5rY29kZSBUb2dnbGVFdmVudFR5cGV9XHJcbiAgICogQHBhcmFtIGlzVG9nZ2xlZCBUaGUgZmxhZyB0byBzaG93IHRoZSBzdGF0ZSBvZiB0aGUgdG9nZ2xlXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodHlwZTogc3RyaW5nLCBpc1RvZ2dsZWQ6IGJvb2xlYW4pIHtcclxuICAgIHN1cGVyKHR5cGUpO1xyXG5cclxuICAgIHRoaXMuaXNUb2dnbGVkID0gaXNUb2dnbGVkO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBvcHRpb24gZm9yIHRoZSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn1cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVG9nZ2xlQnV0dG9uT3B0aW9ucyBleHRlbmRzIEJ1dHRvbk9wdGlvbnMge1xyXG4gIC8qKiBUaGUgdW5pY29kZSBvZiB0aGUgZm9udCBpY29uIHZpc2libGUgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQgKiovXHJcbiAgdW5pY29kZVRvZ2dsZWQ/OiBudW1iZXIsXHJcblxyXG4gIC8qKiBUaGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGZvbnQgaWNvbiB2aXNpYmxlIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkICoqL1xyXG4gIGljb25DbGFzc05hbWVUb2dnbGVkPzogc3RyaW5nLFxyXG5cclxuICAvKiogVGhlIHtAbGlua2NvZGUgQ29udGFpbmVyfSB3aGljaCB2aXNpYmlsaXR5IGdldCB0b2dnbGVkICoqL1xyXG4gIGNvbnRhaW5lclRvVG9nZ2xlOiBDb250YWluZXJcclxufVxyXG5cclxuLyoqXHJcbiAqIEEge0BsaW5rQ29kZSBCdXR0b259IHRvIHRvZ2dsZSB0aGUgdmlzaWJpbGl0eSBvZiBhIHtAbGlua2NvZGUgQ29udGFpbmVyfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFRvZ2dsZUJ1dHRvbiBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIC8qKiBUaGUge0BsaW5rY29kZSBDb250YWluZXJ9IHdoaWNoIHZpc2liaWxpdHkgZ2V0IHRvZ2dsZWQgKiovXHJcbiAgcHJvdGVjdGVkIGNvbnRhaW5lclRvVG9nZ2xlOiBDb250YWluZXI7XHJcblxyXG4gIC8qKiBUaGUgdW5pY29kZSBvZiB0aGUgZm9udCBpY29uIHZpc2libGUgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQgKiovXHJcbiAgcHJvdGVjdGVkIHVuaWNvZGVUb2dnbGVkOiBudW1iZXIgfCBudWxsO1xyXG5cclxuICAvKiogVGhlIGNzcyBjbGFzcyBuYW1lIG9mIHRoZSBmb250IGljb24gdmlzaWJsZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCAqKi9cclxuICBwcm90ZWN0ZWQgaWNvbkNsYXNzTmFtZVRvZ2dsZWQ6IHN0cmluZyB8IG51bGw7XHJcblxyXG4gIC8qKiBUaGUgZmxhZyBvZiB0aGUgdG9nZ2xlIHN0YXR1cyAqKi9cclxuICBwcm90ZWN0ZWQgX2lzVG9nZ2xlZDogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zOiBUb2dnbGVCdXR0b25PcHRpb25zKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcblxyXG4gICAgc3VwZXIob3B0cyBhcyBCdXR0b25PcHRpb25zLCBvcHRpb25zLmNvbnRhaW5lclRvVG9nZ2xlKTtcclxuXHJcbiAgICB0aGlzLl9pc1RvZ2dsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuY29udGFpbmVyVG9Ub2dnbGUgPSBvcHRpb25zLmNvbnRhaW5lclRvVG9nZ2xlO1xyXG4gICAgdGhpcy51bmljb2RlVG9nZ2xlZCA9IG9wdGlvbnMudW5pY29kZVRvZ2dsZWQgfHwgbnVsbDtcclxuICAgIHRoaXMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQgPSBvcHRpb25zLmljb25DbGFzc05hbWVUb2dnbGVkIHx8IG51bGw7XHJcblxyXG4gICAgaWYodGhpcy51bmljb2RlVG9nZ2xlZCA9PT0gbnVsbCAmJiB0aGlzLmljb25DbGFzc05hbWVUb2dnbGVkID09PSBudWxsKSB7XHJcbiAgICAgIHRoaXMudW5pY29kZVRvZ2dsZWQgPSAweGU5MDM7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIG92ZXJyaWRlbiBoYW5kbGVFdmVudCBtZXRob2RcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcGFyYW0gZXZlbnRcclxuICAgKi9cclxuICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEJhc2VFdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgaWYoZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNMSUNLKSB7XHJcbiAgICAgIHRoaXMuaXNUb2dnbGVkID0gIXRoaXMuaXNUb2dnbGVkO1xyXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFRvZ2dsZUV2ZW50KFwidG9nZ2xlXCIsIHRoaXMuaXNUb2dnbGVkKSk7XHJcblxyXG4gICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gdGhpcy5nZXRQYXJlbnRFbGVtZW50KCk7XHJcblxyXG4gICAgICBpZihwYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVPdmVybGF5Rm9yRWxlbWVudChwYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCcpKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGhpcy5oYW5kbGVPdmVybGF5T3V0ZXIoKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmlzVG9nZ2xlZCkge1xyXG4gICAgICAgIGlmKHRoaXMudW5pY29kZVRvZ2dsZWQhPT1udWxsKSB7XHJcbiAgICAgICAgICB0aGlzLnNldEJ1dHRvblVuaWNvZGUodGhpcy51bmljb2RlVG9nZ2xlZCk7XHJcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQhPT1udWxsKSB7XHJcbiAgICAgICAgICB0aGlzLnNldEJ1dHRvbkljb25DbGFzc05hbWUodGhpcy5pY29uQ2xhc3NOYW1lVG9nZ2xlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmKHRoaXMudW5pY29kZSE9PW51bGwpIHtcclxuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uVW5pY29kZSh0aGlzLnVuaWNvZGUpO1xyXG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmljb25DbGFzc05hbWUgIT09IG51bGwpIHtcclxuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uSWNvbkNsYXNzTmFtZSh0aGlzLmljb25DbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0b2dnbGVDbGFzcygnLicgKyB0aGlzLmNvbnRhaW5lclRvVG9nZ2xlLmdldFN0eWxlQ2xhc3MoKSwgJ3Nob3cnLCBwYXJlbnRFbGVtZW50IHx8IGRvY3VtZW50KTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBzZXR0ZXIgZm9yIHRoZSB0b2dnbGVkIHN0YXRlIG9mIHRoZSBidXR0b25cclxuICAgKiBAcGFyYW0gaXNUb2dnbGVkXHJcbiAgICovXHJcbiAgcHVibGljIHNldCBpc1RvZ2dsZWQoaXNUb2dnbGVkOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9pc1RvZ2dsZWQgPSBpc1RvZ2dsZWQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIGdldHRlciBmb3IgdGhlIHRvZ2dsZWQgc3RhdGUgb2YgdGhlIGJ1dHRvblxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXQgaXNUb2dnbGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzVG9nZ2xlZDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYW5kIHJlbW92ZXMgYSBvdmVybGF5IGxheWVyIChmb3IgZ3JheSBvdXQpIG9uIGFuIGVsZW1lbnRcclxuICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgcGFyZW50IGVsZW1lbnQgZm9yIHRoZSBvdmVybGF5IGxheWVyXHJcbiAgICogQHBhcmFtIGNsYXNzTmFtZSBUaGUgc3R5bGUgY2xhc3MgbmFtZSBmb3IgdGhlIG92ZXJsYXkgbGF5ZXJcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGhhbmRsZU92ZXJsYXlGb3JFbGVtZW50KGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgY2xhc3NOYW1lID0gJ2JnaXMtb3ZlcmxheS1iZycpOiB2b2lkIHtcclxuICAgIGlmKHRoaXMuZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgIGlmKHRoaXMuaXNUb2dnbGVkKSB7XHJcbiAgICAgICAgZWxlbWVudD8uY2xhc3NMaXN0LmFkZCgnYmdpcy1vdmVybGF5LXRvZ2dsZWQtdHJ1ZScpO1xyXG4gICAgICAgIGNyZWF0ZUNoaWxkSWZOb3RFeGlzdChlbGVtZW50LCAnZGl2JywgY2xhc3NOYW1lKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBlbGVtZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdiZ2lzLW92ZXJsYXktdG9nZ2xlZC10cnVlJyk7XHJcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW5JZkV4aXN0KGVsZW1lbnQsIGNsYXNzTmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEZpbmRzIGFsbCBlbGVtZW50cyBpbiB0aGUgRE9NIHdpdGggKi5iZ2lzLXRvZ2dsZWQtb3ZlcmxheWFibGUqIHN0eWxlIGNsYXNzIHRvIGdyYXkgdGhlbSBvdXRcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGhhbmRsZU92ZXJsYXlPdXRlcigpOiB2b2lkIHtcclxuICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSB0aGlzLmdldFBhcmVudEVsZW1lbnQoKTtcclxuICAgIGlmKHBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgY29uc3Qgb3ZlcmxheWFibGVQYXJlbnRzID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmdpcy10b2dnbGVkLW92ZXJsYXlhYmxlJyk7XHJcbiAgICAgIGlmKG92ZXJsYXlhYmxlUGFyZW50cyAmJiBvdmVybGF5YWJsZVBhcmVudHMubGVuZ3RoPjApIHtcclxuICAgICAgICBvdmVybGF5YWJsZVBhcmVudHMuZm9yRWFjaCgocGFyZW50KSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmhhbmRsZU92ZXJsYXlGb3JFbGVtZW50KHBhcmVudCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgY2xvc2VzdCBwYXJlbnQgZWxlbWVudCBmb3IgdG9nZ2xlLlxyXG4gICAqIEZvciB0aGUgY29yZSBmZWF0dXJlIHZlcnNpb24gaXQncyB0aGUgLmJnaXMtbWFwXHJcbiAgICogRm9yIHRoZSBmdWxsIGZlYXR1cmUgdmVyc2lvbiBpdCdzIHRoZSAuYmdpcy1ib2R5XHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBnZXRQYXJlbnRFbGVtZW50KCk6IEVsZW1lbnQgfCBudWxsIHtcclxuICAgIGxldCBjbG9zZXN0UGFyZW50ID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoJy5iZ2lzJyk7XHJcbiAgICBpZighY2xvc2VzdFBhcmVudCkge1xyXG4gICAgICBjbG9zZXN0UGFyZW50ID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoJy5iZ2lzLW1hcCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNsb3Nlc3RQYXJlbnQ7XHJcbiAgfVxyXG59XHJcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL01vdXNlUG9zaXRpb25cbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsIGdldFVzZXJQcm9qZWN0aW9uLCBpZGVudGl0eVRyYW5zZm9ybSwgfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciBQUk9KRUNUSU9OID0gJ3Byb2plY3Rpb24nO1xuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgQ09PUkRJTkFURV9GT1JNQVQgPSAnY29vcmRpbmF0ZUZvcm1hdCc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpjb29yZGluYXRlRm9ybWF0J3wnY2hhbmdlOnByb2plY3Rpb24nLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmNvb3JkaW5hdGVGb3JtYXQnfCdjaGFuZ2U6cHJvamVjdGlvbicsIFJldHVybj59IE1vdXNlUG9zaXRpb25PblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1tb3VzZS1wb3NpdGlvbiddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR9IFtjb29yZGluYXRlRm9ybWF0XSBDb29yZGluYXRlIGZvcm1hdC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlXG4gKiBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGVcbiAqIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xib29sZWFufSBbcGxhY2Vob2xkZXJdIE1hcmt1cCB0byBzaG93IHdoZW4gdGhlIG1vdXNlIHBvc2l0aW9uIGlzIG5vdFxuICogYXZhaWxhYmxlIChlLmcuIHdoZW4gdGhlIHBvaW50ZXIgbGVhdmVzIHRoZSBtYXAgdmlld3BvcnQpLiAgQnkgZGVmYXVsdCwgYSBub24tYnJlYWtpbmcgc3BhY2VcbiAqIGlzIHJlbmRlcmVkIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgdmlld3BvcnQuICBUbyByZW5kZXIgc29tZXRoaW5nIGVsc2UsIHByb3ZpZGUgYSBzdHJpbmdcbiAqIHRvIGJlIHVzZWQgYXMgdGhlIHRleHQgY29udGVudCAoZS5nLiAnbm8gcG9zaXRpb24nIG9yICcnIGZvciBhbiBlbXB0eSBzdHJpbmcpLiAgU2V0IHRoZSBwbGFjZWhvbGRlclxuICogdG8gYGZhbHNlYCB0byByZXRhaW4gdGhlIGxhc3QgcG9zaXRpb24gd2hlbiB0aGUgbW91c2UgbGVhdmVzIHRoZSB2aWV3cG9ydC4gIEluIGEgZnV0dXJlIHJlbGVhc2UsIHRoaXNcbiAqIHdpbGwgYmUgdGhlIGRlZmF1bHQgYmVoYXZpb3IuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VuZGVmaW5lZEhUTUw9JyYjMTYwOyddIFRoaXMgb3B0aW9uIGlzIGRlcHJlY2F0ZWQuICBVc2UgdGhlIGBwbGFjZWhvbGRlcmAgb3B0aW9uIGluc3RlYWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHRvIHNob3cgdGhlIDJEIGNvb3JkaW5hdGVzIG9mIHRoZSBtb3VzZSBjdXJzb3IuIEJ5IGRlZmF1bHQsIHRoZXNlXG4gKiBhcmUgaW4gdGhlIHZpZXcgcHJvamVjdGlvbiwgYnV0IGNhbiBiZSBpbiBhbnkgc3VwcG9ydGVkIHByb2plY3Rpb24uXG4gKiBCeSBkZWZhdWx0IHRoZSBjb250cm9sIGlzIHNob3duIGluIHRoZSB0b3AgcmlnaHQgY29ybmVyIG9mIHRoZSBtYXAsIGJ1dCB0aGlzXG4gKiBjYW4gYmUgY2hhbmdlZCBieSB1c2luZyB0aGUgY3NzIHNlbGVjdG9yIGAub2wtbW91c2UtcG9zaXRpb25gLlxuICpcbiAqIE9uIHRvdWNoIGRldmljZXMsIHdoaWNoIHVzdWFsbHkgZG8gbm90IGhhdmUgYSBtb3VzZSBjdXJzb3IsIHRoZSBjb29yZGluYXRlc1xuICogb2YgdGhlIGN1cnJlbnRseSB0b3VjaGVkIHBvc2l0aW9uIGFyZSBzaG93bi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBNb3VzZVBvc2l0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNb3VzZVBvc2l0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBNb3VzZSBwb3NpdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1vdXNlUG9zaXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID1cbiAgICAgICAgICAgIG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1tb3VzZS1wb3NpdGlvbic7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtNb3VzZVBvc2l0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFBST0pFQ1RJT04sIF90aGlzLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvb3JkaW5hdGVGb3JtYXQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVGb3JtYXQob3B0aW9ucy5jb29yZGluYXRlRm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBDaGFuZ2UgdGhpcyB0byBgZmFsc2VgIHdoZW4gcmVtb3ZpbmcgdGhlIGRlcHJlY2F0ZWQgYHVuZGVmaW5lZEhUTUxgIG9wdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHZhciByZW5kZXJPbk1vdXNlT3V0ID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAnJiMxNjA7JztcbiAgICAgICAgaWYgKCd1bmRlZmluZWRIVE1MJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAvLyBkZXByZWNhdGVkIGJlaGF2aW9yXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51bmRlZmluZWRIVE1MICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9IG9wdGlvbnMudW5kZWZpbmVkSFRNTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlck9uTW91c2VPdXQgPSAhIXBsYWNlaG9sZGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdwbGFjZWhvbGRlcicgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyT25Nb3VzZU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBTdHJpbmcob3B0aW9ucy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wbGFjZWhvbGRlcl8gPSBwbGFjZWhvbGRlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyT25Nb3VzZU91dF8gPSByZW5kZXJPbk1vdXNlT3V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkSFRNTF8gPSBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBQcm9qZWN0aW9uXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2Zvcm1fID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBmb3JtYXQgdHlwZSB1c2VkIHRvIHJlbmRlciB0aGUgY3VycmVudCBwb3NpdGlvbiBvclxuICAgICAqIHVuZGVmaW5lZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSBUaGUgZm9ybWF0IHRvIHJlbmRlciB0aGUgY3VycmVudFxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlRm9ybWF0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoQ09PUkRJTkFURV9GT1JNQVQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgcHJvamVjdGlvbiB0aGF0IGlzIHVzZWQgdG8gcmVwb3J0IHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSBwcm9qZWN0aW9uIHRvIHJlcG9ydCBtb3VzZVxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9ICovICh0aGlzLmdldChQUk9KRUNUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZU1vdXNlTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdGhpcy51cGRhdGVIVE1MXyhtYXAuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuaGFuZGxlTW91c2VPdXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVIVE1MXyhudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgY29udHJvbCBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgICAqIHRoZSBtYXAgaGVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgICAgICAgaWYgKG1hcCkge1xuICAgICAgICAgICAgdmFyIHZpZXdwb3J0ID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbih2aWV3cG9ydCwgRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSwgdGhpcykpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyT25Nb3VzZU91dF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbih2aWV3cG9ydCwgRXZlbnRUeXBlLlBPSU5URVJPVVQsIHRoaXMuaGFuZGxlTW91c2VPdXQsIHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlSFRNTF8obnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29vcmRpbmF0ZSBmb3JtYXQgdHlwZSB1c2VkIHRvIHJlbmRlciB0aGUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZUZvcm1hdH0gZm9ybWF0IFRoZSBmb3JtYXQgdG8gcmVuZGVyIHRoZSBjdXJyZW50XG4gICAgICogICAgIHBvc2l0aW9uIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnNldENvb3JkaW5hdGVGb3JtYXQgPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIHRoaXMuc2V0KENPT1JESU5BVEVfRk9STUFULCBmb3JtYXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwcm9qZWN0aW9uIHRoYXQgaXMgdXNlZCB0byByZXBvcnQgdGhlIG1vdXNlIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbiB0byByZXBvcnQgbW91c2VcbiAgICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuc2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KFBST0pFQ1RJT04sIGdldFByb2plY3Rpb24ocHJvamVjdGlvbikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUudXBkYXRlSFRNTF8gPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnBsYWNlaG9sZGVyXztcbiAgICAgICAgaWYgKHBpeGVsICYmIHRoaXMubWFwUHJvamVjdGlvbl8pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50cmFuc2Zvcm1fKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnModGhpcy5tYXBQcm9qZWN0aW9uXywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgICAgIHZhciBjb29yZGluYXRlID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCk7XG4gICAgICAgICAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB1c2VyUHJvamVjdGlvbiA9IGdldFVzZXJQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyh0aGlzLm1hcFByb2plY3Rpb25fLCB1c2VyUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyhjb29yZGluYXRlLCBjb29yZGluYXRlKTtcbiAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZUZvcm1hdCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZvcm1hdCgpO1xuICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgPSBjb29yZGluYXRlRm9ybWF0KGNvb3JkaW5hdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGNvb3JkaW5hdGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkSFRNTF8gfHwgaHRtbCAhPT0gdGhpcy5yZW5kZXJlZEhUTUxfKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRIVE1MXyA9IGh0bWw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvamVjdGlvbi4gUmVuZGVyaW5nIG9mIHRoZSBjb29yZGluYXRlcyBpcyBkb25lIGluXG4gICAgICogYGhhbmRsZU1vdXNlTW92ZWAgYW5kIGBoYW5kbGVNb3VzZVVwYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMubWFwUHJvamVjdGlvbl8gIT0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNb3VzZVBvc2l0aW9uO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBNb3VzZVBvc2l0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VQb3NpdGlvbi5qcy5tYXAiLCJpbXBvcnQge01hcEV2ZW50fSBmcm9tIFwib2xcIjtcclxuaW1wb3J0IHtTdGF0ZX0gZnJvbSBcIm9sL1ZpZXdcIjtcclxuaW1wb3J0IHtDb250cm9sfSBmcm9tIFwib2wvY29udHJvbFwiO1xyXG5pbXBvcnQgVW5pdHMgZnJvbSBcIm9sL3Byb2ovVW5pdHNcIjtcclxuaW1wb3J0IHtnZXRQb2ludFJlc29sdXRpb259IGZyb20gXCJvbC9wcm9qXCI7XHJcblxyXG4vKipcclxuICogMjUuNG1tID0gMSBpbmNoXHJcbiAqIDAuMjhtbSA9IHBpeGVsIHNpemUgYWNjb3JkaW5nIHRvIHRoZSBPR0MgV01UUyBzcGVjaWZpY2F0aW9uXHJcbiAqXHJcbiAqIEBjb25zdFxyXG4gKiBAdHlwZSB7bnVtYmVyfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERJU1BMQVlfRFBJID0gMjUuNCAvIDAuMjg7IC8vIH45MC43MTRcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RcclxuICogQHR5cGUge0FycmF5PG51bWJlcj59XHJcbiAqL1xyXG5jb25zdCBMRUFESU5HX0RJR0lUUyA9IFsxLCAyLCA1XTtcclxuXHJcbi8qKlxyXG4gKiBTY2FsZUxpbmUgb3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTY2FsZUxpbmVPcHRpb25zIHtcclxuXHJcbiAgLyoqIEEgY3NzIGNsYXNzIG5hbWUgKiovXHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG5cclxuICAvKiogU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydCAqKi9cclxuICB0YXJnZXQ/OiBIVE1MRWxlbWVudCB8IHN0cmluZztcclxuXHJcbiAgLyoqIGRwaSBvZiB0aGUgb3V0cHV0IGRldmljZSAqKi9cclxuICBkcGk/OiBudW1iZXI7XHJcblxyXG4gIC8qKiBNaW5pbXVtIHdpZHRoIGluIHBpeGVscyBhdCB0aGUgT0dDIGRlZmF1bHQgZHBpLiBUaGUgd2lkdGggd2lsbCBiZSBhZGp1c3RlZCB0byBtYXRjaCB0aGUgZHBpIHVzZWQuICoqL1xyXG4gIG1pbldpZHRoPzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogRGlzcGxheXMgYSBzY2FsZSBsaW5lIGluIHRoZSBtYXAuXHJcbiAqXHJcbiAqIFRoaXMgY29udHJvbCBpcyBhbiBjdXN0b21pemVkIHZlcnNpb24gb2YgdGhlIE9wZW5MYXllcnMgU2NhbGVsaW5lIGNvbnRyb2wuXHJcbiAqIEhlcmUgdGhlIHNjYWxlbGluZSBpcyBhIHN2ZyBpbWFnZSwgYmVjYXVzZSBub3cgdGhlIGNsaWVudCBjYW4gZXhwb3J0IGl0XHJcbiAqIHdpdGhvdXQgM3JkIHBhcnR5IGRlcGVuZGVuY3kgKHNlZSBvdXIgZXhwb3J0IGV4YW1wbGUpXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2NhbGVMaW5lIGV4dGVuZHMgQ29udHJvbCB7XHJcblxyXG4gIHByb3RlY3RlZCB2aWV3U3RhdGU6IFN0YXRlIHwgbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSBfbWluV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgcHJvdGVjdGVkIHJlbmRlcmVkVmlzaWJsZTogYm9vbGVhbjtcclxuXHJcbiAgcHJvdGVjdGVkIHJlbmRlcmVkV2lkdGg6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgcHJvdGVjdGVkIHJlbmRlcmVkU1ZHOiBTVkdFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuICBwcm90ZWN0ZWQgZHBpOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgc2NhbGVsaW5lIGNvbnRyb2wuXHJcbiAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAqIC8vIEV4YW1wbGU6IGNyZWF0ZSBhIG5ldyBTY2FsZUxpbmUgY29udHJvbCB3aXRoIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXHJcbiAgICogY29uc3Qgc2NhbGVMaW5lQ29udHJvbCA9IG5ldyBTY2FsZUxpbmUoKTtcclxuICAgKiBgYGBcclxuICAgKiBAcGFyYW0gb3B0X29wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRfb3B0aW9ucz86IFNjYWxlTGluZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XHJcblxyXG4gICAgY29uc3QgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdiZ2lzLXNjYWxlbGluZSc7XHJcblxyXG4gICAgc3VwZXIoe1xyXG4gICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudmlld1N0YXRlID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLl9taW5XaWR0aCA9IG9wdGlvbnMubWluV2lkdGggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluV2lkdGggOiA2NDtcclxuICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLnJlbmRlcmVkV2lkdGggPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnJlbmRlcmVkU1ZHID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5kcGkgPSBvcHRpb25zLmRwaSB8fCB1bmRlZmluZWQ7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdGhlIHNjYWxlIGxpbmUgZWxlbWVudFxyXG4gICAqIEBwYXJhbSBtYXBFdmVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyByZW5kZXIobWFwRXZlbnQ6IE1hcEV2ZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcclxuICAgIGlmICghZnJhbWVTdGF0ZSkge1xyXG4gICAgICB0aGlzLnZpZXdTdGF0ZSA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVFbGVtZW50KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgY29kZSBpcyBtYWlubHkgY29waWVkIGZyb20gdGhlIE9wZW5MYXllcnMgU2NhbGVsaW5lIGNvbnRyb2xcclxuICAgKiBhbmQgY3VzdG9taXplZCBmb3Igb3VyIHN2ZyBlbGVtZW50XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBwcml2YXRlIHVwZGF0ZUVsZW1lbnQoKTogdm9pZCB7XHJcblxyXG4gICAgY29uc3Qgdmlld1N0YXRlID0gdGhpcy52aWV3U3RhdGU7XHJcblxyXG4gICAgaWYgKCF2aWV3U3RhdGUpIHtcclxuICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2VudGVyID0gdmlld1N0YXRlLmNlbnRlcjtcclxuICAgIGNvbnN0IHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcclxuICAgIGNvbnN0IHBvaW50UmVzb2x1dGlvblVuaXRzID0gVW5pdHMuTUVURVJTO1xyXG4gICAgbGV0IHBvaW50UmVzb2x1dGlvbiA9IGdldFBvaW50UmVzb2x1dGlvbihcclxuICAgICAgcHJvamVjdGlvbixcclxuICAgICAgdmlld1N0YXRlLnJlc29sdXRpb24sXHJcbiAgICAgIGNlbnRlcixcclxuICAgICAgcG9pbnRSZXNvbHV0aW9uVW5pdHNcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgbWluV2lkdGggPSAodGhpcy5fbWluV2lkdGggKiAodGhpcy5kcGkgfHwgRElTUExBWV9EUEkpKSAvIERJU1BMQVlfRFBJO1xyXG5cclxuICAgIGNvbnN0IG5vbWluYWxDb3VudCA9IG1pbldpZHRoICogcG9pbnRSZXNvbHV0aW9uO1xyXG4gICAgbGV0IHN1ZmZpeCA9ICcnO1xyXG4gICAgaWYgKG5vbWluYWxDb3VudCA8IDAuMDAxKSB7XHJcbiAgICAgIHN1ZmZpeCA9ICfOvG0nO1xyXG4gICAgICBwb2ludFJlc29sdXRpb24gKj0gMTAwMDAwMDtcclxuICAgIH0gZWxzZSBpZiAobm9taW5hbENvdW50IDwgMSkge1xyXG4gICAgICBzdWZmaXggPSAnbW0nO1xyXG4gICAgICBwb2ludFJlc29sdXRpb24gKj0gMTAwMDtcclxuICAgIH0gZWxzZSBpZiAobm9taW5hbENvdW50IDwgMTAwMCkge1xyXG4gICAgICBzdWZmaXggPSAnbSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWZmaXggPSAna20nO1xyXG4gICAgICBwb2ludFJlc29sdXRpb24gLz0gMTAwMDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaSA9IDMgKiBNYXRoLmZsb29yKE1hdGgubG9nKG1pbldpZHRoICogcG9pbnRSZXNvbHV0aW9uKSAvIE1hdGgubG9nKDEwKSk7XHJcbiAgICBsZXQgY291bnQsIHdpZHRoLCBkZWNpbWFsQ291bnQ6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBkZWNpbWFsQ291bnQgPSBNYXRoLmZsb29yKGkgLyAzKTtcclxuICAgICAgY29uc3QgZGVjaW1hbCA9IE1hdGgucG93KDEwLCBkZWNpbWFsQ291bnQpO1xyXG4gICAgICBjb3VudCA9IExFQURJTkdfRElHSVRTWygoaSAlIDMpICsgMykgJSAzXSAqIGRlY2ltYWw7XHJcbiAgICAgIHdpZHRoID0gTWF0aC5yb3VuZChjb3VudCAvIHBvaW50UmVzb2x1dGlvbik7XHJcbiAgICAgIGlmIChpc05hTih3aWR0aCkpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIGlmICh3aWR0aCA+PSBtaW5XaWR0aCkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgICsraTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ2VuZXJhdGVkU1ZHID0gbnVsbDtcclxuICAgIGlmIChjb3VudCAmJiBkZWNpbWFsQ291bnQ+PTApIHtcclxuICAgICAgZ2VuZXJhdGVkU1ZHID0gdGhpcy5nZXRHZW5lcmF0ZWRTVkcoY291bnQudG9GaXhlZChkZWNpbWFsQ291bnQgPCAwID8gLWRlY2ltYWxDb3VudCA6IDApICsgJyAnICsgc3VmZml4LCB3aWR0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGdlbmVyYXRlZFNWRyAmJiB0aGlzLnJlbmRlcmVkU1ZHICE9IGdlbmVyYXRlZFNWRykge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChnZW5lcmF0ZWRTVkcpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVkU1ZHID0gZ2VuZXJhdGVkU1ZHO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnJlbmRlcmVkV2lkdGggIT0gd2lkdGgpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xyXG4gICAgICBpZihnZW5lcmF0ZWRTVkcpIHtcclxuICAgICAgICBnZW5lcmF0ZWRTVkcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyh3aWR0aCkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVuZGVyZWRXaWR0aCA9IHdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5yZW5kZXJlZFZpc2libGUpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgZ2VuZXJhdGVkIHN2ZyBlbGVtZW50XHJcbiAgICpcclxuICAgKiBAcGFyYW0gdHh0IHRoZSBjYWxjdWxhdGVkIHRleHQgY29udGVudCBvZiB0aGUgZWxlbWVudFxyXG4gICAqIEBwYXJhbSB3aWR0aCB0aGUgY2FsY3VsYXRlZCBvdXRwdXQgd2lkdGhcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBnZXRHZW5lcmF0ZWRTVkcodHh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBTVkdFbGVtZW50IHtcclxuXHJcbiAgICBjb25zdCBzdmdIZWlnaHQgPSAxODtcclxuXHJcbiAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcclxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2JnaXMtc2NhbGVsaW5lLXN2ZycpO1xyXG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgc3ZnSGVpZ2h0KTtcclxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgU3RyaW5nKHdpZHRoKSk7XHJcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMTAwJScpO1xyXG5cclxuICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdiZ2lzLXNjYWxlbGluZS1zdmctYmFja2dyb3VuZCcpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gnLCBTdHJpbmcoMCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoMCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzEwMCUnIC8qU3RyaW5nKHdpZHRoKSovKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMTAwJScgLypTdHJpbmcoc3ZnSGVpZ2h0KSovKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsJywgJyNlNWVjZjAnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCAnLjUnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnYmxhY2snKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMScpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCAnMCAnICsgd2lkdGggKyAnICcgKyAod2lkdGggKyAyICogc3ZnSGVpZ2h0KSk7XHJcbiAgICBzdmcuYXBwZW5kQ2hpbGQocmVjdCk7XHJcblxyXG4gICAgY29uc3QgdGV4dDogU1ZHVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcclxuICAgIHRleHQudGV4dENvbnRlbnQgPSB0eHQ7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgneCcsIFN0cmluZyh3aWR0aCAvIDIpKTtcclxuICAgIHRleHQuc2V0QXR0cmlidXRlKCd5JywgU3RyaW5nKDEyKSk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC1zaXplJywgJzFlbScpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC1mYW1pbHk6IFwiU291cmNlIFNhbnMgUHJvXCIsIHNhbnMtc2VyaWYnKTtcclxuICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LWZhbWlseScsICdcIlNvdXJjZSBTYW5zIFByb1wiLCBzYW5zLXNlcmlmJyk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZmlsbCcsICdibGFjaycpO1xyXG4gICAgc3ZnLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgIHJldHVybiBzdmc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdGhlIG1pbiB3aWR0aFxyXG4gICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRNaW5XaWR0aCh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLl9taW5XaWR0aCA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBtaW4gd2lkdGhcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0TWluV2lkdGgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9taW5XaWR0aDtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7TWFwRXZlbnQsIFBsdWdnYWJsZU1hcH0gZnJvbSBcIm9sXCI7XHJcbmltcG9ydCBDb250cm9sLCB7T3B0aW9uc30gZnJvbSAnb2wvY29udHJvbC9Db250cm9sJztcclxuaW1wb3J0IHtDb29yZGluYXRlfSBmcm9tIFwib2wvY29vcmRpbmF0ZVwiO1xyXG5pbXBvcnQge2JvdW5kaW5nRXh0ZW50LCBFeHRlbnR9IGZyb20gXCJvbC9leHRlbnRcIjtcclxuaW1wb3J0IHtPblJldHVybn0gZnJvbSBcIm9sL09ic2VydmFibGVcIjtcclxuaW1wb3J0IHtPYmplY3RPblNpZ25hdHVyZX0gZnJvbSBcIm9sL09iamVjdFwiO1xyXG5pbXBvcnQgQmFzZUV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuXHJcbi8qKlxyXG4gKiBUaGUgb3ZlcnZpZXcgb3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPdmVydmlld09wdGlvbnMgZXh0ZW5kcyBPcHRpb25zIHtcclxuICBwcmV2ZW50RGVmYXVsdD86IGJvb2xlYW5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGV2ZW50IGNsYXNzIHRvIGhhbmRsZSBtb3VzZSBldmVudHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBPdmVydmlld01hcEV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcclxuICBvcmlnaW5hbEV2ZW50OiBNb3VzZUV2ZW50O1xyXG4gIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZywgb3JpZ2luYWxFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgc3VwZXIodHlwZSk7XHJcbiAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBleHRlbmRlZCBzaWduYXR1cmUgZm9yIHRoZSBvbiBtZXRob2RcclxuICovXHJcbmV4cG9ydCB0eXBlIE92ZXJ2aWV3T25TaWduYXR1cmU8UmV0dXJuPiA9ICgodHlwZTogXCJjbGlja1wiIHwgXCJjbGlja1wiW10sIGxpc3RlbmVyOiAoZXZlbnQ6IE92ZXJ2aWV3TWFwRXZlbnQpID0+IGFueSkgPT4gUmV0dXJuKSAmIE9iamVjdE9uU2lnbmF0dXJlPFJldHVybj47XHJcblxyXG4vKipcclxuICogRGlzcGxheXMgYW4gb3ZlcnZpZXcgbWFwIG9mIEF1c3RyaWEgYW5kIGEgY3Jvc3NoYWlyIG1hcmtlciBmb3IgdGhlIGN1cnJlbnRcclxuICogY2VudGVyIGluIHRoZSBtYWluIG1hcC4gWW91IGNhbiBjbGljayBvbiB0aGUgb3ZlcnZpZXcgbWFwIHRvIHJlY2VudGVyIHRoZVxyXG4gKiBtYWluIG1hcC5cclxuICpcclxuICogSGludDogdGhlIGRlZmF1bHQgc2l6ZSBvZiB0aGUgb3ZlcnZpZXcgbWFwIGRlcGVuZHMgb24gdGhlIHdpZHRoIG9mIHRoZSB2aWV3cG9ydCAoYXBwcm9wcmlhdGUgZm9yIGZ1bGxzY3JlZW4gbWFwcykuXHJcbiAqIFRvIGxpbWl0IHRoZSBzaXplIGFkZCBhIG1heC13aWR0aCBhbmQgbWF4LWhlaWdodCAobWF4LXdpZHRoID0gMS43NSptYXgtaGVpZ2h0KSB0byB0aGUgLmJnaXMtb3ZlcnZpZXctaW1hZ2UgY3NzIGNsYXNzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3IGV4dGVuZHMgQ29udHJvbCB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIEJBQ0tHUk9VTkRfQ09MT1IgPSAnI2U1ZWNmMCc7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIFNWR19IRUlHSFQgPSAyMTY7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIFNWR19XSURUSCA9IDM4MDtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKi9cclxuICBzdGF0aWMgU1ZHX0NPREUgPSBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyBjbGFzcz0nYmdpcy1vdmVydmlld21hcC1zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgXCIgKyBPdmVydmlldy5TVkdfV0lEVEggKyBcIiBcIiArIE92ZXJ2aWV3LlNWR19IRUlHSFQgKyBcIicgcHJlc2VydmVBc3BlY3RSYXRpbz0neE1pZFlNaWQgbWVldCcgaGVpZ2h0PScxMDAlJyB3aWR0aD0nMTAwJScgY29sb3ItaW50ZXJwb2xhdGlvbj0nYXV0bycgZmlsbD0nYmxhY2snIGZpbGwtb3BhY2l0eT0nMScgIHN0cm9rZT0nYmxhY2snIHN0cm9rZS1kYXNoYXJyYXk9J25vbmUnIHN0cm9rZS1kYXNob2Zmc2V0PScwJyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J21pdGVyJyBzdHJva2UtbWl0ZXJsaW1pdD0nMTAnIHN0cm9rZS1vcGFjaXR5PScxJyBzdHJva2Utd2lkdGg9JzEnIHhtbG5zOnY9J2h0dHBzOi8vdmVjdGEuaW8vbmFubyc+PHN0eWxlPjwhW0NEQVRBWy5Ce2NsaXAtcGF0aDp1cmwoI0EpfS5De2ZpbGwtcnVsZTpldmVub2RkfS5Ee3N0cm9rZTpub25lfS5Fe2ZpbGw6Izk5OX0uRntmaWxsOm5vbmV9Lkd7c3Ryb2tlLW1pdGVybGltaXQ6MX0uSHtzdHJva2Utd2lkdGg6Mi41fV1dPjwvc3R5bGU+PGRlZnM+PGNsaXBQYXRoIGlkPSdBJz48cGF0aCBkPSdNMCAwaDM4MHYyMTZIMFYweicvPjwvY2xpcFBhdGg+PHBhdGggaWQ9J0InIGQ9J00zNTYgODJsLS40IDUuMiA0LjQgMS42LTMuMiAyLjR2Ni40bC0zLjYuOCAyLjggMy42LjggNi44LTkuNiAxLjItLjQtMi0xLjYgMi40aC0zLjZsLTEuNi0zLjYtNC44LTEuNi04IDYuNCA2LjQgMy4yIDMuMi0uOCAxLjIgNC44IDIgLjgtMi44IDIuOC40IDMuMi0zLjYgMy4yLTIuOC0uNC0uOCAxLjYtMi40LTEuNi0uNCA0IDIuNCA0LjgtMi40IDEuNi0uOCA0IDIgLjgtLjQgMi40IDIuOC0uNC44IDEuNi0zLjIgMS42IDIuOCAyLjgtNCAyIDMuNiAxLjYtMTAtLjgtLjQgMy4yLTQgMS42LTIuNCA0LjQtNi40IDIuOC44LTMuNiA2LjQtNi44LTMuMi01LjIgMS42LTQuOC00LjgtMTQuOCAxMy4yLTYuOHYtNmwyLjgtNC0uOC0zLjYtMi40LTEuMi0xLjItNy42IDMuMi44IDItMi44LTItMS42IDIuOC0uOCAyLTQgMy4yLS40IDIuNCA0IDUuNi01LjZ2LTIuOGw1LjYtMS4yIDIuNC0zLjJMMzUyIDg4bDEuNi0zLjYtMi0yIDIuOCAxLjYgMS42LTJ6Jy8+PHBhdGggaWQ9J0MnIGQ9J00xNjIuNCAxNDYuOGwuNCAyIDguNCAxLjIgMS42IDIuOCA0LjQgMS42IDgtMiAuNC0yLjggNC44LS44IDIgMiAxMC44LjggOC40IDkuNiA1LjYtMiAyLjQtNCA4LjQtNC44IDEuNiAzLjJoNmwuOCAzLjIgNC44LTMuMiA1LjYgMiAxMC0zLjYgOCA4LjgtMiA4LjggMi40LjgtLjQgNi40IDIgMS4yLTMuNiAzLjItMS4yLTItMS42IDItMi40LS40LTIuNCA2LjQtNC44LjgtLjQgMi40LTQuOCAxLjYtLjggNC0yLjQtMy42LTIgMS4yLTItMi40LTEyLjQuOC0xLjItMi44aC01LjJsLTQtMi44LTUuNiAxLjItMTgtNC44LTYuOCAxLjYtNi40LTMuMkgxNjhsLTIuNC0yLjgtNC44LS40di0zLjJoMS42VjE3Mmw5LjItMS4yIDEuNi0yLjQtNS42LTR2LTMuMmwtNC40LTMuMi0uOC0yLjQgMi0zLjJoLTIuOGwtMi40LTMuNiAzLjItMnonLz48cGF0aCBpZD0nRCcgZD0nTTI2NC44IDIwLjhsNS42IDEuNi40IDQgNC40LS44IDEuNi0yLjggOC44IDMuMi44IDIgOCA0IDYuOC0xLjZWMzJsNS4yIDIgLjQgMi40IDUuNiAzLjIgMTIuOCAxLjIgMy42LTUuNiAzLjYtLjQgMi40IDIuNCAyLjgtLjQgMS4yIDQgMTAuNCAxLjYgMS42IDEwLjgtNC44IDYtLjggNC44IDUuNiA3LjYuOCA2LjQgNC40IDMuMi0xLjYgMi44LTIuOC0xLjYgMiAyTDM1MiA4OGwtNC40LTMuNi0yLjQgMy4yLTUuNiAxLjJ2Mi44bC01LjYgNS42LTIuNC00LTMuMi40LTEuNiAzLjYtMy4yIDEuMiAyIDEuMi0yIDMuMi0zLjItLjggMS4yIDcuNiAyLjQgMS4yLjggMy42LTIuOCA0IDEuMiA0LTUuMiA1LjJoLTIuOGwtMi02LjgtMi40IDIuOC0xLjItMi00LjgtLjgtMS4yLTIuOC0yIC40LjQtNC01LjItLjQtMS4yLTUuNi0xLjYgMS4yLTMuMi0zLjYtNC40LjR2LTEuNkgyODRsLTQuNC00LTIuNC40LS40IDItMy4yLS40LS44IDMuMi0xMC40LjQtMiAyLjQtNC0yLjQtMy4yIDEuMi0yLjQtNHYtNC40bDIuOC0xLjYtLjQtMS42LTEuNi0yLjQtMS42LjgtOC40LTQuNC0yLTMuMnYtMy42bDEuNi0uOC0uOC02LjQgMi0yLjQgNi44IDUuMiA3LjItMkwyNTggNzRoMy4ybDEuMiAyLjQuOC04LjRoLTJsLjgtNC44LTIgLjQgMS42LTEuNi00LTQuOCAyLjgtMS42LTEwLjQtNS4yIDEuNi03LjIgMy42LTIuOC40LTMuNiA3LjIgMS4yVjIzLjJsMi0yLjR6bTYyIDQ3LjJsLTcuMiA1LjYtMi40LTEuNi0uOCA2IDEuNiAzLjIgOS42LjQgMi0yLjggNC40IDEuNi0yLTIuNC44LTYtMi0yLTEuNiAxLjItMi40LTMuMnonLz48cGF0aCBpZD0nRScgZD0nTTIxMi40IDM4bDkuNiA2LjQtMi40IDIgMi40IDMuMmg2bDYuNCAyLjggMi0yLjhoMi40TDI0MCA0Nmw0IDMuMiAyLjQtMiA1LjYgNS4yIDcuMiAyIDEuMiAxLjItMi44IDEuNi40IDIgMy42IDIuOC0xLjYgMS42IDItLjQtLjggNC44aDJ2NC40bC0uOCA0LTEuMi0yLjRIMjU4bC0xLjYgMi44LTYgMi02LjgtNS4yLTMuMiAyLjQuOCA2LjQtMS42Ljh2My42bDYuNCA2IDUuNi44IDIgMy4yLTIuOCAyLjQgMS42IDYuOC0yLjQtLjgtMiAyLjQtNS4yLjgtLjggMi40LTguNCA0LjgtMy4yLS40LTItMi44LTYuOCAyLjR2LTMuNmwtMi0yLTEwLjQtMS4yLTMuNiA1LjYgMi44IDguNC0xLjYgMy4yaC0yLjRsLTguNC00IDItNi40LTEuNi0yIDIuOC00LjQtNS4yLTIgMS4yLTIuOCAzLjIuOHYtMS42bC02LjQuNC00LjQtMi0uNC04LjggMy42IDEuMi40LTIuOC00LTItNiAyLjh2LTJsLTMuMi0uNC0xLjItMi40aC00LjRsLTMuMiAzLjItNS4yLTUuMi0uNC0zLjIgMTItOS42IDE0LTQgNC44LTcuMi0uNC04LjggMiAuNCAxLjItMi40IDEwIDUuMiA0LjQtNy4yLjQtNS42LTItLjggMi40LTMuNnonLz48cGF0aCBpZD0nRicgZD0nTTE3Ni40IDg2LjhsMS42IDIuNCAzLjIuNHYybDYtMi44IDQgMi0uNCAyLjgtMy42LTEuMi40IDguOCAxMS4yIDIuNGgtMy42bC0xLjIgMy4yIDUuMiAxLjYtMi44IDQuNCAxLjYgMi0yIDYuNCA1LjIgMy4yLTEuNiAzLjIgMS42IDguOCA1LjIgMiA1LjItMi40LjggNC40IDYuOCA2LjQtNS4yIDEuMiAxLjIgMi44LTQuNCA4LTUuMi0zLjZ2LTIuNGwtMTAuNC0yLjgtMi44LjgtMS42LTItNS4yLjgtLjQgMi44LTcuMiAyLTUuMi0xLjYtMS42LTIuOC04LjQtMS4ydi0ybC00IDItNi0zLjZIMTQ4bC02LjQgNS42LTYtMS4yLTItMTIuOCAxLjYtMS42IDYuOC40IDEuMi0yIDguNC40di0zLjZsNC40LS44IDIuNC00LjggMi44LS44LTMuMi00LjggMi0yLTQuNC0xLjYgMS4yLTQuNGg4LjRsLTEuMiAxLjYgMi44IDIuNC0yIDIgLjggMiA3LjYgNS4yIDMuNi0xLjItLjQtNS42IDIuOC0zLjYtLjgtNC0yLjQtMmgtNS42bDQuNC05LjItNi40LTguNCA0LTMuNmg0eicvPjxwYXRoIGlkPSdHJyBkPSdNMjc5LjIgMTAxLjJsNy4yIDMuNnYxLjZsNC40LS40IDMuMiAzLjYgMS42LTEuMiAxLjIgNS42IDUuMi40LS44IDMuMiAyLjQuNCAxLjIgMi44IDQuOC44IDEuMiAyIDEuNi0yLjggMS4yLjgtLjQgMi44IDIuOCAzLjItNy4yIDMuNiA0LjggMTQuOC0xLjYgNC44IDMuMiA0LjgtNy42IDEwLjh2NmwyLjQgNS4yLTYuOC00aC0zLjZsLTkuNiAyLTIgMS4ydjIuOGwtMy4yIDEuMi0yLjgtMy4yLTE0LjguOC0yLjQtMS42LjQtNi40LTIuNC0uOCAyLTguOC04LTguOC0xMCAzLjYtNS42LTItNC44IDMuMi0uOC0zLjJoLTZsLTEuNi0zLjItOC40IDQuOC0yLjQgNC00LjQgMi0zLjItMS42IDUuNi04LjgtMS4yLTIuOCA1LjItMS4yLTYuOC02LjQtLjgtNC40LTUuMiAyLjQtNC44LTEuNi0yLTguNCAxLjYtNC40IDUuNiAxLjIgMS42LTMuMi0yLjgtOC40IDMuNi01LjYgMTAuNCAxLjIgMiAydjMuNmw2LjgtMi40IDIgMi44IDMuMi40IDE2LjQtMTAuNCAzLjIgMi40IDMuMi0xLjIgNCAyLjQgMi0yLjQgMTAuNC0uNC44LTMuMiAzLjIuNC40LTJoMnonLz48cGF0aCBpZD0nSCcgZD0nTTE1MS42IDE0NS4ybDYuNCAyLjQgMy42IDQuOGgyLjhsLTIgMy4yLjggMi40IDQuNCAzLjJ2My4ybDUuNiA0LTEuNiAyLjQtOS4yIDEuMi0xLjYgNS42LTUuNi40LTgtNC0xLjItNC0zLjItLjQtLjQtNi44LTIuOC44LTMuMi0yLjggMS4yLTEuNi0yLTQuOCAzLjYtLjggNy4yLTcuNiA1LjItLjh6Jy8+PHBhdGggaWQ9J0knIGQ9J002MS4yIDExOC44bDUuNiAxLjYgMi0yLjQgNi44IDMuNiA1LjItMS42IDEuMiAxLjYtMi40IDJoMy4ybDIgNmg2bDQtMi44IDIgLjQtLjggMi40IDIuNC0uNCAyLTMuMiA0IC40LTEuNi0yLjQgMi40LTIuOCA2IC40IDIuNC01LjIgOS42LjggNi44LTIuOCA5LjIgMS4yLTItNi40IDQuNC0yLjh2NC40bDgtMS4yIDIuOCA0LjggMy4yLS44djJsNCAxLjItMS42IDIuNCAzLjIgNC44LTIuOC44LTIuNCA0LjgtNC40Ljh2My42bC04LjQtLjQtMS4yIDItNi44LS40LTEuNiAxLjYgMi40IDEzLjYtOCAyLTkuMiA1LjItNS4yLTMuMi0zLjYgMi0zLjItMS42LTIuNCAyLjgtMi40LTEuNi05LjIgMS42LjQgMS42LTMuMiAxLjYtMy4yIDEwaC03LjJsLTYtMS42IDEuNi0yLjQtNC0zLjJMNjYgMTY2bC00LTEuMi44LTUuNi0yLjgtLjgtMS42LTMuMi0zLjYgMy4yLjQgMi0zLjYtLjR2NGwtNCAxLjItMS42LTIuOC0uNC0yLjQgMi44LTMuNi0yLTIuNCAxLjYtMS4yLTEuMi0yLjggNC00IC40LTcuMi0yLjQtMS4yIDYuOC0yIDQuOC01LjIgMi0zLjItMi00IC44LTQuNHonLz48cGF0aCBpZD0nSicgZD0nTTMxLjIgMTE2LjRsMiAuNC0uNCAyLjhoNi44bDEuMiA0IDQuNCAxLjYuNCAyLjQtMS42LjggMS42IDMuNiA2LTItLjggNS4yLTIgMS4yIDIuNCAyLjQtLjQgNy4yLTQgNCAxLjIgMi44LTEuNiAxLjIgMiAyLjQtMi44IDMuNiAyIDMuNi0xLjIgMi0zLjItMS4yLTEuMi0yLjgtNi40LTJWMTU0bC0xMi0yLjQgMS4yLTQuOC0zLjItMi40LjQtNC44LTItMiA2LjQtOC0uNC00LTIuOC0uNC0xLjYtMi44IDcuNi0yIDItNHonLz48cGF0aCBpZD0nSycgZD0nTTMyNy42IDY4LjRsLjQgMiAyLjgtLjQgMiAyLS44IDYgMiAyLjQtNC40LTEuNi0yIDIuOC05LjYtLjQtMS42LTMuMi44LTYgMi40IDEuNiAxLjYtMi40IDMuNi0uNC40LTIuOCAyLjQuNHonLz48L2RlZnM+PGcgdGV4dC1yZW5kZXJpbmc9J29wdGltaXplTGVnaWJpbGl0eSc+PHVzZSB4bGluazpocmVmPScjQicgY2xhc3M9J0IgQyBEIEUnLz48ZyBzdHJva2U9J3NpbHZlcic+PHVzZSB4bGluazpocmVmPScjQicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNDJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0MnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRCcgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNEJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0UnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRScgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNGJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0YnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRycgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNHJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0gnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSCcgY2xhc3M9J0IgRiBHIEgnLz48cGF0aCBkPSdNNjEuMiAxMTguOGwtMS4yLTEuMiAyLjQtLjgtMS4yIDJ6JyBjbGFzcz0nQiBDIEQgRScvPjxwYXRoIGQ9J002MS4yIDExOC44bC0xLjItMS4yIDIuNC0uOC0xLjIgMnonIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjSScgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNJJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0onIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNLJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0snIGNsYXNzPSdCIEYgRyBIJy8+PC9nPjwvZz48L3N2Zz5cIjtcclxuXHJcbiAgLyoqXHJcbiAgICogQVBJUHJvcGVydHk6IGV4dGVudFxyXG4gICAqIEV4dGVudCBvZiBvdmVydmlldyAtIFttaW54LCBtaW55LCBtYXh4LCBtYXh5XSBvciBbbGVmdCwgYm90dG9tLCByaWdodCwgdG9wXVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBleHRlbnQ6IEV4dGVudDtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN2Z0VsZW1lbnQ6IFNWR0VsZW1lbnQ7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50OiBTVkdSZWN0RWxlbWVudDtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBwcmV2ZW50RGVmYXVsdDogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgcHVibGljIG9uITogT3ZlcnZpZXdPblNpZ25hdHVyZTxPblJldHVybj47XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG92ZXJ2aWV3IG9wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogT3ZlcnZpZXdPcHRpb25zKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge30gYXMgT3ZlcnZpZXdPcHRpb25zO1xyXG5cclxuICAgIGNvbnN0IG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLW92ZXJ2aWV3LWltYWdlJztcclxuXHJcbiAgICBjb25zdCBmaWd1cmVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlndXJlJyk7XHJcbiAgICBmaWd1cmVFbGVtZW50LmlubmVySFRNTCA9IE92ZXJ2aWV3LlNWR19DT0RFO1xyXG5cclxuICAgIG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChmaWd1cmVFbGVtZW50KTtcclxuXHJcbiAgICBvcHRzLmVsZW1lbnQgPSBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcblxyXG4gICAgc3VwZXIob3B0cyk7XHJcblxyXG4gICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IG9wdHMucHJldmVudERlZmF1bHQgfHwgZmFsc2U7XHJcblxyXG4gICAgdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQgPSBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcblxyXG4gICAgLy8gZXh0ZW50OiBbbWlueCwgbWlueSwgbWF4eCwgbWF4eV0gLS0gY29vcmRpbmF0ZXM6IFtbbGVmdCwgYm90dG9tXSwgW3JpZ2h0LCB0b3BdXVxyXG4gICAgdGhpcy5leHRlbnQgPSBib3VuZGluZ0V4dGVudChbWzEwMTAwMDAsIDU3OTAwMDBdLCBbMTk2MDAwMCwgNjMzMDAwMF1dKTtcclxuXHJcbiAgICB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT3ZlcnZpZXdNYXBFdmVudCgnY2xpY2snLCBlKSksIGZhbHNlKTtcclxuXHJcbiAgICBpZighdGhpcy5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgdGhpcy5vbk92ZXJ2aWV3SW1hZ2VDbGljayk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdmdFbGVtZW50ID0gZmlndXJlRWxlbWVudC5maXJzdENoaWxkIGFzIFNWR0VsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnYmdpcy1vdmVydmlld21hcC1zdmctYmFja2dyb3VuZCcpO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKDApKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgneScsIFN0cmluZygwKSk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3J4JywgU3RyaW5nKDgpKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgncnknLCBTdHJpbmcoOCkpO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyhPdmVydmlldy5TVkdfV0lEVEgpKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgU3RyaW5nKE92ZXJ2aWV3LlNWR19IRUlHSFQpKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnc3Ryb2tlLXdpZHRoOjAnKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnZmlsbCcsIE92ZXJ2aWV3LkJBQ0tHUk9VTkRfQ09MT1IpO1xyXG5cclxuICAgIHRoaXMuc3ZnRWxlbWVudC5wcmVwZW5kKHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG1hcFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRNYXAobWFwOiBQbHVnZ2FibGVNYXApOiB2b2lkIHtcclxuICAgIHN1cGVyLnNldE1hcChtYXApO1xyXG4gICAgaWYgKG1hcCkge1xyXG4gICAgICAvLyBpZih0aGlzLnN2Z0VsZW1lbnQpIHtcclxuICAgICAgLy8gICB0aGlzLnN2Z0VsZW1lbnQucHJlcGVuZCh0aGlzLnN2Z0JhY2tncm91bmRSZWN0KTtcclxuICAgICAgLy8gfVxyXG4gICAgICBpZighdGhpcy5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgIG1hcC5vbignbW92ZWVuZCcsIChldmVudDogTWFwRXZlbnQpID0+IHRoaXMudXBkYXRlQ3Jvc3NoYWlyKGV2ZW50KSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHVwZGF0ZUNyb3NzaGFpcihldmVudDogTWFwRXZlbnQpOiB2b2lkIHtcclxuXHJcbiAgICBjb25zdCBzaXplID0gW092ZXJ2aWV3LlNWR19XSURUSCwgT3ZlcnZpZXcuU1ZHX0hFSUdIVF07XHJcblxyXG4gICAgY29uc3QgY2VudGVyID0gdGhpcy5nZXRPdmVydmlld1B4RnJvbUxvbkxhdChldmVudC5tYXAuZ2V0VmlldygpPy5nZXRDZW50ZXIoKSk7XHJcblxyXG4gICAgLy8ganVzdCB0byBiZSBzdXJlIG1ha2Ugc29tZSBsaW1pdHNcclxuICAgIGlmIChjZW50ZXJbMF0gPiBzaXplWzBdKVxyXG4gICAgICBjZW50ZXJbMF0gPSBzaXplWzBdO1xyXG4gICAgZWxzZSBpZiAoY2VudGVyWzBdIDwgMClcclxuICAgICAgY2VudGVyWzBdID0gMDtcclxuXHJcbiAgICBpZiAoY2VudGVyWzFdID4gc2l6ZVsxXSlcclxuICAgICAgY2VudGVyWzFdID0gc2l6ZVsxXTtcclxuICAgIGVsc2UgaWYgKGNlbnRlclsxXSA8IDApXHJcbiAgICAgIGNlbnRlclsxXSA9IDA7XHJcblxyXG4gICAgLy8gdXBkYXRlIGNyb3NzaGFpclxyXG4gICAgaWYgKHRoaXMuc3ZnRWxlbWVudCkge1xyXG4gICAgICBjb25zdCBleGlzdGluZ0VsbXMgPSB0aGlzLnN2Z0VsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmdpcy1vdmVydmlld21hcC1zdmctY3Jvc3NoYWlyJykgYXMgSFRNTENvbGxlY3Rpb25PZjxTVkdMaW5lRWxlbWVudD47XHJcbiAgICAgIGlmIChleGlzdGluZ0VsbXMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGV4aXN0aW5nRWxtIG9mIEFycmF5LmZyb20oZXhpc3RpbmdFbG1zKSkge1xyXG4gICAgICAgICAgdGhpcy5zdmdFbGVtZW50LnJlbW92ZUNoaWxkKGV4aXN0aW5nRWxtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zdmdFbGVtZW50LmFwcGVuZENoaWxkKE92ZXJ2aWV3LmdldENyb3NzaGFpcihjZW50ZXJbMF0sIDAsIGNlbnRlclswXSwgT3ZlcnZpZXcuU1ZHX0hFSUdIVCwgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpci14JykpO1xyXG4gICAgICB0aGlzLnN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoT3ZlcnZpZXcuZ2V0Q3Jvc3NoYWlyKDAsIGNlbnRlclsxXSwgT3ZlcnZpZXcuU1ZHX1dJRFRILCBjZW50ZXJbMV0sICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXIteScpKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB4MVxyXG4gICAqIEBwYXJhbSB5MVxyXG4gICAqIEBwYXJhbSB4MlxyXG4gICAqIEBwYXJhbSB5MlxyXG4gICAqIEBwYXJhbSBjc3NDbGFzc1xyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRDcm9zc2hhaXIoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlciwgY3NzQ2xhc3M6IHN0cmluZyk6IFNWR0xpbmVFbGVtZW50IHtcclxuICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcclxuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd4MScsIFN0cmluZyh4MSkpO1xyXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgU3RyaW5nKHkxKSk7XHJcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDInLCBTdHJpbmcoeDIpKTtcclxuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MicsIFN0cmluZyh5MikpO1xyXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZpbGw6IG5vbmU7IHN0cm9rZTogYmxhY2s7IHN0cm9rZS13aWR0aDogMXB4OycpO1xyXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpciAnICsgY3NzQ2xhc3MpO1xyXG4gICAgcmV0dXJuIGxpbmU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBsZWZ0XHJcbiAgICogQHBhcmFtIHJpZ2h0XHJcbiAgICogQHBhcmFtIHdpZHRoXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgobGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmFicygobGVmdCAtIHJpZ2h0KSkgLyB3aWR0aDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNlbnRlclxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0KGNlbnRlcjogQ29vcmRpbmF0ZSB8IHVuZGVmaW5lZCk6IG51bWJlcltdIHtcclxuICAgIGlmIChjZW50ZXIpIHtcclxuICAgICAgY29uc3Qgc2l6ZSA9IFtPdmVydmlldy5TVkdfV0lEVEgsIE92ZXJ2aWV3LlNWR19IRUlHSFRdO1xyXG4gICAgICBjb25zdCByZXNvbHV0aW9uID0gW1xyXG4gICAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMF0sIHRoaXMuZXh0ZW50WzJdLCBzaXplWzBdKSxcclxuICAgICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzFdLCB0aGlzLmV4dGVudFszXSwgc2l6ZVsxXSlcclxuICAgICAgXTtcclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBNYXRoLnJvdW5kKDEgLyByZXNvbHV0aW9uWzBdICogKGNlbnRlclswXSAtIHRoaXMuZXh0ZW50WzBdKSksXHJcbiAgICAgICAgTWF0aC5yb3VuZCgxIC8gcmVzb2x1dGlvblsxXSAqICh0aGlzLmV4dGVudFszXSAtIGNlbnRlclsxXSkpXHJcbiAgICAgIF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gWzAsIDBdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kOiBvbk92ZXJ2aWV3SW1hZ2VDbGlja1xyXG4gICAqIEhhbmRsZSBjbGljayBpbiBvdmVydmlldyBpbWFnZVxyXG4gICAqXHJcbiAgICogUGFyYW1ldGVyczpcclxuICAgKiBlIC0gTW91c2VFdmVudCBvYmplY3RcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgb25PdmVydmlld0ltYWdlQ2xpY2soZTogT3ZlcnZpZXdNYXBFdmVudCk6IHZvaWQge1xyXG5cclxuICAgIGNvbnN0IG92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0ID0gdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCB4ID0gZS5vcmlnaW5hbEV2ZW50LmNsaWVudFggLSBvdmVydmlld0NvbnRhaW5lckNsaWVudEJvdW5kaW5nUmVjdC5sZWZ0OyAvLyBYLXBvcyBpbiBvdmVydmlldyBpbWFnZVxyXG4gICAgY29uc3QgeSA9IGUub3JpZ2luYWxFdmVudC5jbGllbnRZIC0gb3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QudG9wOyAvLyBZLXBvcyBpbiBvdmVydmlldyBpbWFnZVxyXG5cclxuICAgIC8vIGdldCBMb25MYXRcclxuICAgIGNvbnN0IGNsaWNrTG9uTGF0ID0gdGhpcy5nZXRMb25MYXRGcm9tT3ZlcnZpZXdQeChbeCwgeV0pO1xyXG5cclxuICAgIC8vIHVwZGF0ZSBjZW50ZXIgb2YgdGhlIG1hcFxyXG4gICAgdGhpcy5nZXRNYXAoKT8uZ2V0VmlldygpPy5hbmltYXRlKHtcclxuICAgICAgY2VudGVyOiBjbGlja0xvbkxhdCxcclxuICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZDogZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHhcclxuICAgKiBHZXQgbWFwIGxvY2F0aW9uIGZyb20gcGl4ZWwgbG9jYXRpb25cclxuICAgKlxyXG4gICAqIFBhcmFtZXRlcnM6XHJcbiAgICogb1B4IC0gQ29vcmRpbmF0ZVxyXG4gICAqXHJcbiAgICogUmV0dXJuczpcclxuICAgKiBbeCx5XSBMb2NhdGlvbiBpbiBsb24vbGF0IHRyYW5zbGF0ZWQgZnJvbVxyXG4gICAqIHBhc3NlZCBpbiBwaXhlbC1sb2NhdGlvbiBpbiBvdmVydmlldyBtYXBcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHgob1B4OiBDb29yZGluYXRlKTogbnVtYmVyW10ge1xyXG5cclxuICAgIGNvbnN0IHNpemUgPSBbdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuY2xpZW50V2lkdGgsIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsaWVudEhlaWdodF07XHJcbiAgICBjb25zdCByZXNvbHV0aW9uID0gW1xyXG4gICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzBdLCB0aGlzLmV4dGVudFsyXSwgc2l6ZVswXSksXHJcbiAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMV0sIHRoaXMuZXh0ZW50WzNdLCBzaXplWzFdKVxyXG4gICAgXTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBvUHhbMF0gKiByZXNvbHV0aW9uWzBdICsgdGhpcy5leHRlbnRbMF0sXHJcbiAgICAgIHRoaXMuZXh0ZW50WzNdIC0gb1B4WzFdICogcmVzb2x1dGlvblsxXVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgb3ZlcnZpZXcgcGFyZW50IGNvbnRhaW5lciBlbGVtZW50XHJcbiAgICovXHJcbiAgcHVibGljIGdldE92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCgpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIG92ZXJ2aWV3IHN2ZyBlbGVtZW50XHJcbiAgICovXHJcbiAgcHVibGljIGdldFNWR0VsZW1lbnQoKTogU1ZHRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5zdmdFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBzdmcgYmFja2dyb3VuZCByZWN0IGVsZW1lbnRcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0QmFja2dyb3VuZFJlY3RFbGVtZW50KCk6IFNWR1JlY3RFbGVtZW50IHtcclxuICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudDtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7QnV0dG9ufSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCB7QnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vYmFzZS9CdXR0b25cIjtcclxuXHJcbi8qKlxyXG4gKiBBIGRlZmF1bHQgYnV0dG9uIHdpdGggYSBcInNoYXJlXCIgaWNvblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNoYXJlIGV4dGVuZHMgQnV0dG9uIHtcclxuXHJcbiAgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfVE9PTFRJUF9URVhUID0gJ0Fuc2ljaHQgdGVpbGVuJztcclxuICBzdGF0aWMgcmVhZG9ubHkgREVGQVVMVF9VTklDT0RFID0gMHhlOTJjO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBidXR0b24gb3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zPzogQnV0dG9uT3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgc3VwZXIoeyB1bmljb2RlOiBTaGFyZS5ERUZBVUxUX1VOSUNPREUsIHRvb2x0aXA6IFNoYXJlLkRFRkFVTFRfVE9PTFRJUF9URVhULCB0b29sdGlwQXNUZXh0RWxlbWVudDogdHJ1ZSwgLi4ub3B0cyB9KTtcclxuXHJcbiAgfVxyXG5cclxufVxyXG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7IGVhc2VJbiB9IGZyb20gJy4vZWFzaW5nLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvVGlsZX0gZm9yIHRoZSB0aWxlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgdXJsIGFzIGFyZ3VtZW50cy4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH0pO1xuICogYGBgXG4gKiBGb3IgbW9yZSBmaW5lIGdyYWluZWQgY29udHJvbCwgdGhlIGxvYWQgZnVuY3Rpb24gY2FuIHVzZSBmZXRjaCBvciBYTUxIdHRwUmVxdWVzdCBhbmQgaW52b2x2ZVxuICogZXJyb3IgaGFuZGxpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBUaWxlU3RhdGUgZnJvbSAnb2wvVGlsZVN0YXRlJztcbiAqXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAqICAgICB2YXIgZGF0YSA9IHRoaXMucmVzcG9uc2U7XG4gKiAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICogICAgICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YSk7XG4gKiAgICAgfSBlbHNlIHtcbiAqICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuRVJST1IpO1xuICogICB9KTtcbiAqICAgeGhyLm9wZW4oJ0dFVCcsIHNyYyk7XG4gKiAgIHhoci5zZW5kKCk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihUaWxlLCBzdHJpbmcpOiB2b2lkfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGV9IHNvdXJjZXMgdXNlIGEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIHRvIGdldFxuICogdGhlIHVybCB0aGF0IHByb3ZpZGVzIGEgdGlsZSBmb3IgYSBnaXZlbiB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVjb29yZH5UaWxlQ29vcmR9IGZvciB0aGUgdGlsZVxuICogY29vcmRpbmF0ZSwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcGl4ZWwgcmF0aW8gYW5kIGFcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzIGFyZ3VtZW50c1xuICogYW5kIHJldHVybnMgYSBge3N0cmluZ31gIHJlcHJlc2VudGluZyB0aGUgdGlsZSBVUkwsIG9yIHVuZGVmaW5lZCBpZiBubyB0aWxlXG4gKiBzaG91bGQgYmUgcmVxdWVzdGVkIGZvciB0aGUgcGFzc2VkIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkLCBudW1iZXIsXG4gKiAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IChzdHJpbmd8dW5kZWZpbmVkKX0gVXJsRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb249MjUwXSBBIGR1cmF0aW9uIGZvciB0aWxlIG9wYWNpdHlcbiAqIHRyYW5zaXRpb25zIGluIG1pbGxpc2Vjb25kcy4gQSBkdXJhdGlvbiBvZiAwIGRpc2FibGVzIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3IgdGlsZXMuXG4gKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlKHRpbGVDb29yZCwgc3RhdGUsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDb29yZCA9IHRpbGVDb29yZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gXCJpbnRlcmltXCIgdGlsZSBmb3IgdGhpcyB0aWxlLiBUaGUgaW50ZXJpbSB0aWxlIG1heSBiZSB1c2VkIHdoaWxlIHRoaXNcbiAgICAgICAgICogb25lIGlzIGxvYWRpbmcsIGZvciBcInNtb290aFwiIHRyYW5zaXRpb25zIHdoZW4gY2hhbmdpbmcgcGFyYW1zL2RpbWVuc2lvbnNcbiAgICAgICAgICogb24gdGhlIHNvdXJjZS5cbiAgICAgICAgICogQHR5cGUge1RpbGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmltVGlsZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGtleSBhc3NpZ25lZCB0byB0aGUgdGlsZS4gVGhpcyBpcyB1c2VkIGJ5IHRoZSB0aWxlIHNvdXJjZSB0byBkZXRlcm1pbmVcbiAgICAgICAgICogaWYgdGhpcyB0aWxlIGNhbiBlZmZlY3RpdmVseSBiZSB1c2VkLCBvciBpZiBhIG5ldyB0aWxlIHNob3VsZCBiZSBjcmVhdGVkXG4gICAgICAgICAqIGFuZCB0aGlzIG9uZSBiZSB1c2VkIGFzIGFuIGludGVyaW0gdGlsZSBmb3IgdGhpcyBuZXcgdGlsZS5cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleSA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGR1cmF0aW9uIGZvciB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNpdGlvbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy50cmFuc2l0aW9uID09PSB1bmRlZmluZWQgPyAyNTAgOiBvcHRpb25zLnRyYW5zaXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb29rdXAgb2Ygc3RhcnQgdGltZXMgZm9yIHJlbmRlcmluZyB0cmFuc2l0aW9ucy4gIElmIHRoZSBzdGFydCB0aW1lIGlzXG4gICAgICAgICAqIGVxdWFsIHRvIC0xLCB0aGUgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2l0aW9uU3RhcnRzXyA9IHt9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgdGhlIHRpbGUgY2FjaGUgd2hlbiB0aGUgdGlsZSBpcyByZW1vdmVkIGZyb20gdGhlIGNhY2hlIGR1ZSB0byBleHBpcnlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ICsgJy8nICsgdGhpcy50aWxlQ29vcmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGludGVyaW0gdGlsZSBtb3N0IHN1aXRhYmxlIGZvciByZW5kZXJpbmcgdXNpbmcgdGhlIGNoYWluIG9mIGludGVyaW1cbiAgICAgKiB0aWxlcy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgIG1vc3QgcmVjZW50IHRpbGUgdGhhdCBoYXMgYmVlbiBsb2FkZWQsIGlmIG5vXG4gICAgICogc3VjaCB0aWxlIGV4aXN0cywgdGhlIG9yaWdpbmFsIHRpbGUgaXMgcmV0dXJuZWQuXG4gICAgICogQHJldHVybiB7IVRpbGV9IEJlc3QgdGlsZSBmb3IgcmVuZGVyaW5nLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEludGVyaW1UaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgICAgICAgIC8vZW1wdHkgY2hhaW5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcbiAgICAgICAgLy8gZmluZCB0aGUgZmlyc3QgbG9hZGVkIHRpbGUgYW5kIHJldHVybiBpdC4gU2luY2UgdGhlIGNoYWluIGlzIHNvcnRlZCBpblxuICAgICAgICAvLyBkZWNyZWFzaW5nIG9yZGVyIG9mIGNyZWF0aW9uIHRpbWUsIHRoZXJlIGlzIG5vIG5lZWQgdG8gc2VhcmNoIHRoZSByZW1haW5kZXJcbiAgICAgICAgLy8gb2YgdGhlIGxpc3QgKGFsbCB0aG9zZSB0aWxlcyBjb3JyZXNwb25kIHRvIG9sZGVyIHJlcXVlc3RzIGFuZCB3aWxsIGJlXG4gICAgICAgIC8vIGNsZWFuZWQgdXAgYnkgcmVmcmVzaEludGVyaW1DaGFpbilcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyB0aWxlIGltbWVkaWF0ZWx5IGluc3RlYWQgb2YgZmFkaW5nIGl0IGluIGFmdGVyIGxvYWRpbmcsIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW50ZXJpbSB0aWxlIGlzIGluIHBsYWNlIGFscmVhZHlcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25fID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgICB9IHdoaWxlICh0aWxlKTtcbiAgICAgICAgLy8gd2UgY2FuIG5vdCBmaW5kIGEgYmV0dGVyIHRpbGVcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHb2VzIHRocm91Z2ggdGhlIGNoYWluIG9mIGludGVyaW0gdGlsZXMgYW5kIGRpc2NhcmRzIHNlY3Rpb25zIG9mIHRoZSBjaGFpblxuICAgICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWxldmFudC5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5yZWZyZXNoSW50ZXJpbUNoYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG4gICAgICAgIHZhciBwcmV2ID0gLyoqIEB0eXBlIHtUaWxlfSAqLyAodGhpcyk7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgIC8vd2UgaGF2ZSBhIGxvYWRlZCB0aWxlLCB3ZSBjYW4gZGlzY2FyZCB0aGUgcmVzdCBvZiB0aGUgbGlzdFxuICAgICAgICAgICAgICAgIC8vd2Ugd291bGQgY291bGQgYWJvcnQgYW55IExPQURJTkcgdGlsZSByZXF1ZXN0XG4gICAgICAgICAgICAgICAgLy9vbGRlciB0aGFuIHRoaXMgdGlsZSAoaS5lLiBhbnkgTE9BRElORyB0aWxlIGZvbGxvd2luZyB0aGlzIGVudHJ5IGluIHRoZSBjaGFpbilcbiAgICAgICAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgICAgIC8va2VlcCB0aGlzIExPQURJTkcgdGlsZSBhbnkgbG9hZGVkIHRpbGVzIGxhdGVyIGluIHRoZSBjaGFpbiBhcmVcbiAgICAgICAgICAgICAgICAvL29sZGVyIHRoYW4gdGhpcyB0aWxlLCBzbyB3ZSdyZSBzdGlsbCBpbnRlcmVzdGVkIGluIHRoZSByZXF1ZXN0XG4gICAgICAgICAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAvL3RoZSBoZWFkIG9mIHRoZSBsaXN0IGlzIHRoZSBtb3N0IGN1cnJlbnQgdGlsZSwgd2UgZG9uJ3QgbmVlZFxuICAgICAgICAgICAgICAgIC8vdG8gc3RhcnQgYW55IG90aGVyIHJlcXVlc3RzIGZvciB0aGlzIGNoYWluXG4gICAgICAgICAgICAgICAgcHJldi5pbnRlcmltVGlsZSA9IHRpbGUuaW50ZXJpbVRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2ID0gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbGUgPSBwcmV2LmludGVyaW1UaWxlO1xuICAgICAgICB9IHdoaWxlICh0aWxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBjb29yZGluYXRlIGZvciB0aGlzIHRpbGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaGUgdGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRUaWxlQ29vcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVDb29yZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoaXMgdGlsZS4gSWYgeW91IHdyaXRlIHlvdXIgb3duIHtAbGluayBtb2R1bGU6b2wvVGlsZX5Mb2FkRnVuY3Rpb24gdGlsZUxvYWRGdW5jdGlvbn0gLFxuICAgICAqIGl0IGlzIGltcG9ydGFudCB0byBzZXQgdGhlIHN0YXRlIGNvcnJlY3RseSB0byB7QGxpbmsgbW9kdWxlOm9sL1RpbGVTdGF0ZX5FUlJPUn1cbiAgICAgKiB3aGVuIHRoZSB0aWxlIGNhbm5vdCBiZSBsb2FkZWQuIE90aGVyd2lzZSB0aGUgdGlsZSBjYW5ub3QgYmUgcmVtb3ZlZCBmcm9tXG4gICAgICogdGhlIHRpbGUgcXVldWUgYW5kIHdpbGwgYmxvY2sgb3RoZXIgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFRpbGVTdGF0ZS5FUlJPUiAmJiB0aGlzLnN0YXRlID4gc3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGlsZSBsb2FkIHNlcXVlbmNlIHZpb2xhdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgICAqIExvYWRpbmcgaXMgdGFrZW4gY2FyZSBvZiBieSB0aGUgdGlsZSBxdWV1ZSwgYW5kIGNhbGxpbmcgdGhpcyBtZXRob2QgaXNcbiAgICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFscGhhIHZhbHVlIGZvciByZW5kZXJpbmcuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgVGhlIHJlbmRlciBmcmFtZSB0aW1lLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEFscGhhID0gZnVuY3Rpb24gKGlkLCB0aW1lKSB7XG4gICAgICAgIGlmICghdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF07XG4gICAgICAgIGlmICghc3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gdGltZTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsdGEgPSB0aW1lIC0gc3RhcnQgKyAxMDAwIC8gNjA7IC8vIGF2b2lkIHJlbmRlcmluZyBhdCAwXG4gICAgICAgIGlmIChkZWx0YSA+PSB0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWFzZUluKGRlbHRhIC8gdGhpcy50cmFuc2l0aW9uXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgYSB0aWxlIGlzIGluIGFuIGFscGhhIHRyYW5zaXRpb24uICBBIHRpbGUgaXMgY29uc2lkZXJlZCBpblxuICAgICAqIHRyYW5zaXRpb24gaWYgdGlsZS5nZXRBbHBoYSgpIGhhcyBub3QgeWV0IGJlZW4gY2FsbGVkIG9yIGhhcyBiZWVuIGNhbGxlZFxuICAgICAqIGFuZCByZXR1cm5lZCAxLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIGlzIGluIHRyYW5zaXRpb24uXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuaW5UcmFuc2l0aW9uID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGlmICghdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSAhPT0gLTE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYXJrIGEgdHJhbnNpdGlvbiBhcyBjb21wbGV0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5lbmRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSA9IC0xO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZTtcbn0oRXZlbnRUYXJnZXQpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VCYXNlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIEltYWdlQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VCYXNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlQmFzZShleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHN0YXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnQgPSBleHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBQaXhlbFJhdGlvLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGl4ZWxSYXRpb187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgcmV0dXJuIEltYWdlQmFzZTtcbn0oRXZlbnRUYXJnZXQpKTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlQmFzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlQmFzZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZUJhc2UgZnJvbSAnLi9JbWFnZUJhc2UuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCB7IElNQUdFX0RFQ09ERSB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IGdldEhlaWdodCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3Rlbk9uY2UsIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlfkltYWdlfSBmb3IgdGhlIGltYWdlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgc3JjIGFzIGFyZ3VtZW50cy4gSXQgaXMgc3VwcG9zZWQgdG8gbWFrZSBpdCBzbyB0aGVcbiAqIHVuZGVybHlpbmcgaW1hZ2Uge0BsaW5rIG1vZHVsZTpvbC9JbWFnZX5JbWFnZSNnZXRJbWFnZX0gaXMgYXNzaWduZWQgdGhlXG4gKiBjb250ZW50IHNwZWNpZmllZCBieSB0aGUgc3JjLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgZGVmYXVsdCBpc1xuICpcbiAqICAgICBmdW5jdGlvbihpbWFnZSwgc3JjKSB7XG4gKiAgICAgICBpbWFnZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqICAgICB9XG4gKlxuICogUHJvdmlkaW5nIGEgY3VzdG9tIGBpbWFnZUxvYWRGdW5jdGlvbmAgY2FuIGJlIHVzZWZ1bCB0byBsb2FkIGltYWdlcyB3aXRoXG4gKiBwb3N0IHJlcXVlc3RzIG9yIC0gaW4gZ2VuZXJhbCAtIHRocm91Z2ggWEhSIHJlcXVlc3RzLCB3aGVyZSB0aGUgc3JjIG9mIHRoZVxuICogaW1hZ2UgZWxlbWVudCB3b3VsZCBiZSBzZXQgdG8gYSBkYXRhIFVSSSB3aGVuIHRoZSBjb250ZW50IGlzIGxvYWRlZC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oSW1hZ2VXcmFwcGVyLCBzdHJpbmcpOiB2b2lkfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xudmFyIEltYWdlV3JhcHBlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VXcmFwcGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgSW1hZ2Ugc291cmNlIFVSSS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge0xvYWRGdW5jdGlvbn0gaW1hZ2VMb2FkRnVuY3Rpb24gSW1hZ2UgbG9hZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVdyYXBwZXIoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzcmMsIGNyb3NzT3JpZ2luLCBpbWFnZUxvYWRGdW5jdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIEltYWdlU3RhdGUuSURMRSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zcmNfID0gc3JjO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2Z1bmN0aW9uKCk6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5JRExFO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0xvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyA9IGltYWdlTG9hZEZ1bmN0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBsb2FkaW5nIG9yIHJlYWQgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5FUlJPUjtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBzdWNjZXNzZnVsIGltYWdlIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdXRpb24gPSBnZXRIZWlnaHQodGhpcy5leHRlbnQpIC8gdGhpcy5pbWFnZV8uaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIG9yIHJldHJ5IGlmIGxvYWRpbmcgcHJldmlvdXNseSBmYWlsZWQuXG4gICAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUgfHwgdGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgICAgICB0aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBsaXN0ZW5JbWFnZSh0aGlzLmltYWdlXywgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLnNldEltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2U7XG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IGdldEhlaWdodCh0aGlzLmV4dGVudCkgLyB0aGlzLmltYWdlXy5oZWlnaHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUudW5saXN0ZW5JbWFnZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVubGlzdGVuXykge1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEltYWdlV3JhcHBlcjtcbn0oSW1hZ2VCYXNlKSk7XG4vKipcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZSBlbGVtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbigpOmFueX0gbG9hZEhhbmRsZXIgTG9hZCBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTphbnl9IGVycm9ySGFuZGxlciBFcnJvciBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCk6dm9pZH0gQ2FsbGJhY2sgdG8gc3RvcCBsaXN0ZW5pbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5JbWFnZShpbWFnZSwgbG9hZEhhbmRsZXIsIGVycm9ySGFuZGxlcikge1xuICAgIHZhciBpbWcgPSAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovIChpbWFnZSk7XG4gICAgaWYgKGltZy5zcmMgJiYgSU1BR0VfREVDT0RFKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gaW1nLmRlY29kZSgpO1xuICAgICAgICB2YXIgbGlzdGVuaW5nXzEgPSB0cnVlO1xuICAgICAgICB2YXIgdW5saXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsaXN0ZW5pbmdfMSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuaW5nXzEpIHtcbiAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmluZ18xKSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IFVuY29uZGl0aW9uYWxseSBjYWxsIGVycm9ySGFuZGxlcigpIHdoZW4gdGhpcyBidWcgaXMgZml4ZWQgdXBzdHJlYW06XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTg1MjdcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0VuY29kaW5nRXJyb3InICYmXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIGltYWdlIHR5cGUuJykge1xuICAgICAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVubGlzdGVuO1xuICAgIH1cbiAgICB2YXIgbGlzdGVuZXJLZXlzID0gW1xuICAgICAgICBsaXN0ZW5PbmNlKGltZywgRXZlbnRUeXBlLkxPQUQsIGxvYWRIYW5kbGVyKSxcbiAgICAgICAgbGlzdGVuT25jZShpbWcsIEV2ZW50VHlwZS5FUlJPUiwgZXJyb3JIYW5kbGVyKSxcbiAgICBdO1xuICAgIHJldHVybiBmdW5jdGlvbiB1bmxpc3RlbigpIHtcbiAgICAgICAgbGlzdGVuZXJLZXlzLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IEltYWdlV3JhcHBlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VUaWxlXG4gKi9cbmltcG9ydCBUaWxlIGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGxpc3RlbkltYWdlIH0gZnJvbSAnLi9JbWFnZS5qcyc7XG52YXIgSW1hZ2VUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbWFnZVRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGUgbG9hZCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5PcHRpb25zfSBbb3B0X29wdGlvbnNdIFRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVRpbGUodGlsZUNvb3JkLCBzdGF0ZSwgc3JjLCBjcm9zc09yaWdpbiwgdGlsZUxvYWRGdW5jdGlvbiwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUNvb3JkLCBzdGF0ZSwgb3B0X29wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNyb3NzT3JpZ2luXyA9IGNyb3NzT3JpZ2luO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW1hZ2UgVVJJXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zcmNfID0gc3JjO1xuICAgICAgICBfdGhpcy5rZXkgPSBzcmM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2Z1bmN0aW9uKCk6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVMb2FkRnVuY3Rpb25fID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEhUTUwgaW1hZ2UgZWxlbWVudCBmb3IgdGhpcyB0aWxlIChtYXkgYmUgYSBDYW52YXMsIEltYWdlLCBvciBWaWRlbykuXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhbiBIVE1MIGltYWdlIGVsZW1lbnQgZm9yIHRoaXMgdGlsZSAobWF5IGJlIGEgQ2FudmFzIG9yIHByZWxvYWRlZCBJbWFnZSkuXG4gICAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmltYWdlXyA9IGdldEJsYW5rSW1hZ2UoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKHRoaXMuaW1hZ2VfKTtcbiAgICAgICAgaWYgKGltYWdlLm5hdHVyYWxXaWR0aCAmJiBpbWFnZS5uYXR1cmFsSGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5JRExFO1xuICAgICAgICAgICAgdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luXyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gdGhpcy5jcm9zc09yaWdpbl87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBsaXN0ZW5JbWFnZSh0aGlzLmltYWdlXywgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc2NhcmRzIGV2ZW50IGhhbmRsZXJzIHdoaWNoIGxpc3RlbiBmb3IgbG9hZCBjb21wbGV0aW9uIG9yIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS51bmxpc3RlbkltYWdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudW5saXN0ZW5fKSB7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXygpO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSW1hZ2VUaWxlO1xufShUaWxlKSk7XG4vKipcbiAqIEdldCBhIDEtcGl4ZWwgYmxhbmsgaW1hZ2UuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQmxhbmsgaW1hZ2UuXG4gKi9cbmZ1bmN0aW9uIGdldEJsYW5rSW1hZ2UoKSB7XG4gICAgdmFyIGN0eCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMCknO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICByZXR1cm4gY3R4LmNhbnZhcztcbn1cbmV4cG9ydCBkZWZhdWx0IEltYWdlVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb25cbiAqL1xuaW1wb3J0IHsgYm91bmRpbmdFeHRlbnQsIGNyZWF0ZUVtcHR5LCBleHRlbmRDb29yZGluYXRlLCBnZXRBcmVhLCBnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCwgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHQsIGdldFdpZHRoLCBpbnRlcnNlY3RzLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBnZXRUcmFuc2Zvcm0gfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGxvZzIsIG1vZHVsbyB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBTaW5nbGUgdHJpYW5nbGU7IGNvbnNpc3RzIG9mIDMgc291cmNlIHBvaW50cyBhbmQgMyB0YXJnZXQgcG9pbnRzLlxuICogQHR5cGVkZWYge09iamVjdH0gVHJpYW5nbGVcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gc291cmNlIFNvdXJjZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gdGFyZ2V0IFRhcmdldC5cbiAqL1xuLyoqXG4gKiBNYXhpbXVtIG51bWJlciBvZiBzdWJkaXZpc2lvbiBzdGVwcyBkdXJpbmcgcmFzdGVyIHJlcHJvamVjdGlvbiB0cmlhbmd1bGF0aW9uLlxuICogUHJldmVudHMgaGlnaCBtZW1vcnkgdXNhZ2UgYW5kIGxhcmdlIG51bWJlciBvZiBwcm9qNCBjYWxscyAoZm9yIGNlcnRhaW5cbiAqIHRyYW5zZm9ybWF0aW9ucyBhbmQgYXJlYXMpLiBBdCBtb3N0IGAyKigyXnRoaXMpYCB0cmlhbmdsZXMgYXJlIGNyZWF0ZWQgZm9yXG4gKiBlYWNoIHRyaWFuZ3VsYXRlZCBleHRlbnQgKHRpbGUvaW1hZ2UpLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIE1BWF9TVUJESVZJU0lPTiA9IDEwO1xuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZiB0cmlhbmdsZSByZWxhdGl2ZSB0byB3b3JsZCB3aWR0aC4gV2hlbiB0cmFuc2Zvcm1pbmdcbiAqIGNvcm5lcnMgb2Ygd29ybGQgZXh0ZW50IGJldHdlZW4gY2VydGFpbiBwcm9qZWN0aW9ucywgdGhlIHJlc3VsdGluZ1xuICogdHJpYW5ndWxhdGlvbiBzZWVtcyB0byBoYXZlIHplcm8gZXJyb3IgYW5kIG5vIHN1YmRpdmlzaW9uIGlzIHBlcmZvcm1lZC4gSWZcbiAqIHRoZSB0cmlhbmdsZSB3aWR0aCBpcyBtb3JlIHRoYW4gdGhpcyAocmVsYXRpdmUgdG8gd29ybGQgd2lkdGg7IDAtMSksXG4gKiBzdWJkaXZpc29uIGlzIGZvcmNlZCAodXAgdG8gYE1BWF9TVUJESVZJU0lPTmApLiBEZWZhdWx0IGlzIGAwLjI1YC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfVFJJQU5HTEVfV0lEVEggPSAwLjI1O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBjb250YWluaW5nIHRyaWFuZ3VsYXRpb24gb2YgdGhlIGdpdmVuIHRhcmdldCBleHRlbnQuXG4gKiBVc2VkIGZvciBkZXRlcm1pbmluZyBzb3VyY2UgZGF0YSBhbmQgdGhlIHJlcHJvamVjdGlvbiBpdHNlbGYuXG4gKi9cbnZhciBUcmlhbmd1bGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50IHRvIHRyaWFuZ3VsYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4U291cmNlRXh0ZW50IE1heGltYWwgc291cmNlIGV4dGVudCB0aGF0IGNhbiBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvclRocmVzaG9sZCBBY2NlcHRhYmxlIGVycm9yIChpbiBzb3VyY2UgdW5pdHMpLlxuICAgICAqIEBwYXJhbSB7P251bWJlcn0gb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiBUaGUgKG9wdGlvbmFsKSByZXNvbHV0aW9uIG9mIHRoZSBkZXN0aW5hdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldEV4dGVudCwgbWF4U291cmNlRXh0ZW50LCBlcnJvclRocmVzaG9sZCwgb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VQcm9qXyA9IHNvdXJjZVByb2o7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldFByb2pfID0gdGFyZ2V0UHJvajtcbiAgICAgICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi9cbiAgICAgICAgdmFyIHRyYW5zZm9ybUludkNhY2hlID0ge307XG4gICAgICAgIHZhciB0cmFuc2Zvcm1JbnYgPSBnZXRUcmFuc2Zvcm0odGhpcy50YXJnZXRQcm9qXywgdGhpcy5zb3VyY2VQcm9qXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBBIGNvb3JkaW5hdGUuXG4gICAgICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhbnNmb3JtSW52XyA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gY1swXSArICcvJyArIGNbMV07XG4gICAgICAgICAgICBpZiAoIXRyYW5zZm9ybUludkNhY2hlW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1JbnZDYWNoZVtrZXldID0gdHJhbnNmb3JtSW52KGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUludkNhY2hlW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4U291cmNlRXh0ZW50XyA9IG1heFNvdXJjZUV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF8gPSBlcnJvclRocmVzaG9sZCAqIGVycm9yVGhyZXNob2xkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFRyaWFuZ2xlPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpYW5nbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHRyaWFuZ3VsYXRpb24gY3Jvc3NlcyBlZGdlIG9mIHRoZSBzb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhbldyYXBYSW5Tb3VyY2VfID1cbiAgICAgICAgICAgIHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgICAgICEhbWF4U291cmNlRXh0ZW50ICYmXG4gICAgICAgICAgICAgICAgISF0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpICYmXG4gICAgICAgICAgICAgICAgZ2V0V2lkdGgobWF4U291cmNlRXh0ZW50KSA9PSBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA9IHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXRXb3JsZFdpZHRoXyA9IHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wUmlnaHQgPSBnZXRUb3BSaWdodCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Cb3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbkJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BMZWZ0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wTGVmdCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BSaWdodCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcFJpZ2h0KTtcbiAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tUmlnaHQpO1xuICAgICAgICB2YXIgc291cmNlQm90dG9tTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvbkJvdHRvbUxlZnQpO1xuICAgICAgICAvKlxuICAgICAgICAgKiBUaGUgbWF4U3ViZGl2aXNpb24gY29udHJvbHMgaG93IG1hbnkgc3BsaXR0aW5ncyBvZiB0aGUgdGFyZ2V0IGFyZWEgY2FuXG4gICAgICAgICAqIGJlIGRvbmUuIFRoZSBpZGVhIGhlcmUgaXMgdG8gZG8gYSBsaW5lYXIgbWFwcGluZyBvZiB0aGUgdGFyZ2V0IGFyZWFzXG4gICAgICAgICAqIGJ1dCB0aGUgYWN0dWFsIG92ZXJhbCByZXByb2plY3Rpb24gKGNhbiBiZSkgZXh0cmVtZWx5IG5vbi1saW5lYXIuIFRoZVxuICAgICAgICAgKiBkZWZhdWx0IHZhbHVlIG9mIE1BWF9TVUJESVZJU0lPTiB3YXMgY2hvc2VuIGJhc2VkIG9uIG1hcHBpbmcgYSAyNTZ4MjU2XG4gICAgICAgICAqIHRpbGUgc2l6ZS4gSG93ZXZlciB0aGlzIGZ1bmN0aW9uIGlzIGFsc28gY2FsbGVkIHRvIHJlbWFwIGNhbnZhcyByZW5kZXJlZFxuICAgICAgICAgKiBsYXllcnMgd2hpY2ggY2FuIGJlIG11Y2ggbGFyZ2VyLiBUaGlzIGNhbGN1bGF0aW9uIGluY3JlYXNlcyB0aGUgbWF4U3ViZGl2aXNpb25cbiAgICAgICAgICogdmFsdWUgYnkgdGhlIHJpZ2h0IGZhY3RvciBzbyB0aGF0IGVhY2ggMjU2eDI1NiBwaXhlbCBhcmVhIGhhc1xuICAgICAgICAgKiBNQVhfU1VCRElWSVNJT04gZGl2aXNpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIG1heFN1YmRpdmlzaW9uID0gTUFYX1NVQkRJVklTSU9OICtcbiAgICAgICAgICAgIChvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgPyBNYXRoLm1heCgwLCBNYXRoLmNlaWwobG9nMihnZXRBcmVhKHRhcmdldEV4dGVudCkgL1xuICAgICAgICAgICAgICAgICAgICAob3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiAqXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uICpcbiAgICAgICAgICAgICAgICAgICAgICAgIDI1NiAqXG4gICAgICAgICAgICAgICAgICAgICAgICAyNTYpKSkpXG4gICAgICAgICAgICAgICAgOiAwKTtcbiAgICAgICAgdGhpcy5hZGRRdWFkXyhkZXN0aW5hdGlvblRvcExlZnQsIGRlc3RpbmF0aW9uVG9wUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tTGVmdCwgc291cmNlVG9wTGVmdCwgc291cmNlVG9wUmlnaHQsIHNvdXJjZUJvdHRvbVJpZ2h0LCBzb3VyY2VCb3R0b21MZWZ0LCBtYXhTdWJkaXZpc2lvbik7XG4gICAgICAgIGlmICh0aGlzLndyYXBzWEluU291cmNlXykge1xuICAgICAgICAgICAgdmFyIGxlZnRCb3VuZF8xID0gSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID0gTWF0aC5taW4obGVmdEJvdW5kXzEsIHRyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTaGlmdCB0cmlhbmdsZXMgdG8gYmUgYXMgY2xvc2UgdG8gYGxlZnRCb3VuZGAgYXMgcG9zc2libGVcbiAgICAgICAgICAgIC8vIChpZiB0aGUgZGlzdGFuY2UgaXMgbW9yZSB0aGFuIGB3b3JsZFdpZHRoIC8gMmAgaXQgY2FuIGJlIGNsb3Nlci5cbiAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLm1heCh0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzBdKSAtXG4gICAgICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RyaWFuZ2xlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzBdWzFdXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVsxXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzJdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMV1dLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMF1bMF0gLSBsZWZ0Qm91bmRfMSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVsxXVswXSAtIGxlZnRCb3VuZF8xID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzFdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzJdWzBdIC0gbGVmdEJvdW5kXzEgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVbMl1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBSYXJlbHkgKGlmIHRoZSBleHRlbnQgY29udGFpbnMgYm90aCB0aGUgZGF0ZWxpbmUgYW5kIHByaW1lIG1lcmlkaWFuKVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2hpZnQgY2FuIGluIHR1cm4gYnJlYWsgc29tZSB0cmlhbmdsZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIERldGVjdCB0aGlzIGhlcmUgYW5kIGRvbid0IHNoaWZ0IGluIHN1Y2ggY2FzZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW5YID0gTWF0aC5taW4obmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhYID0gTWF0aC5tYXgobmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhYIC0gbWluWCA8IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2UgPSBuZXdUcmlhbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0cmlhbmdsZSB0byB0aGUgdHJpYW5ndWxhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFRyaWFuZ2xlXyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBhU3JjLCBiU3JjLCBjU3JjKSB7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzXy5wdXNoKHtcbiAgICAgICAgICAgIHNvdXJjZTogW2FTcmMsIGJTcmMsIGNTcmNdLFxuICAgICAgICAgICAgdGFyZ2V0OiBbYSwgYiwgY10sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBxdWFkIChwb2ludHMgaW4gY2xvY2std2lzZSBvcmRlcikgdG8gdGhlIHRyaWFuZ3VsYXRpb25cbiAgICAgKiAoYW5kIHJlcHJvamVjdHMgdGhlIHZlcnRpY2VzKSBpZiB2YWxpZC5cbiAgICAgKiBQZXJmb3JtcyBxdWFkIHN1YmRpdmlzaW9uIGlmIG5lZWRlZCB0byBpbmNyZWFzZSBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZCBUaGUgdGFyZ2V0IGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZFNyYyBUaGUgc291cmNlIGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3ViZGl2aXNpb24gTWF4aW1hbCBhbGxvd2VkIHN1YmRpdmlzaW9uIG9mIHRoZSBxdWFkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuYWRkUXVhZF8gPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgYVNyYywgYlNyYywgY1NyYywgZFNyYywgbWF4U3ViZGl2aXNpb24pIHtcbiAgICAgICAgdmFyIHNvdXJjZVF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYVNyYywgYlNyYywgY1NyYywgZFNyY10pO1xuICAgICAgICB2YXIgc291cmNlQ292ZXJhZ2VYID0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoX1xuICAgICAgICAgICAgPyBnZXRXaWR0aChzb3VyY2VRdWFkRXh0ZW50KSAvIHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIHNvdXJjZVdvcmxkV2lkdGggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuc291cmNlV29ybGRXaWR0aF8pO1xuICAgICAgICAvLyB3aGVuIHRoZSBxdWFkIGlzIHdyYXBwZWQgaW4gdGhlIHNvdXJjZSBwcm9qZWN0aW9uXG4gICAgICAgIC8vIGl0IGNvdmVycyBtb3N0IG9mIHRoZSBwcm9qZWN0aW9uIGV4dGVudCwgYnV0IG5vdCBmdWxseVxuICAgICAgICB2YXIgd3JhcHNYID0gdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPiAwLjUgJiZcbiAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA8IDE7XG4gICAgICAgIHZhciBuZWVkc1N1YmRpdmlzaW9uID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldFByb2pfLmlzR2xvYmFsKCkgJiYgdGhpcy50YXJnZXRXb3JsZFdpZHRoXykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2EsIGIsIGMsIGRdKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Q292ZXJhZ2VYID0gZ2V0V2lkdGgodGFyZ2V0UXVhZEV4dGVudCkgLyB0aGlzLnRhcmdldFdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHwgbmVlZHNTdWJkaXZpc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghd3JhcHNYICYmIHRoaXMuc291cmNlUHJval8uaXNHbG9iYWwoKSAmJiBzb3VyY2VDb3ZlcmFnZVgpIHtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID1cbiAgICAgICAgICAgICAgICAgICAgc291cmNlQ292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8IG5lZWRzU3ViZGl2aXNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uICYmIHRoaXMubWF4U291cmNlRXh0ZW50Xykge1xuICAgICAgICAgICAgaWYgKGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMF0pICYmXG4gICAgICAgICAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsxXSkgJiZcbiAgICAgICAgICAgICAgICBpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzJdKSAmJlxuICAgICAgICAgICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbM10pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHNvdXJjZVF1YWRFeHRlbnQsIHRoaXMubWF4U291cmNlRXh0ZW50XykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hvbGUgcXVhZCBvdXRzaWRlIHNvdXJjZSBwcm9qZWN0aW9uIGV4dGVudCAtPiBpZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNOb3RGaW5pdGUgPSAwO1xuICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgIGlmICghaXNGaW5pdGUoYVNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYVNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1sxXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQgbWlnaHQgYmUgdGhlIGNhc2UgdGhhdCBvbmx5IDEgb2YgdGhlIHBvaW50cyBpcyBpbmZpbml0ZS4gSW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGNhbiBkcmF3IGEgc2luZ2xlIHRyaWFuZ2xlIHdpdGggdGhlIG90aGVyIHRocmVlIHBvaW50c1xuICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGFTcmNbMF0pIHx8ICFpc0Zpbml0ZShhU3JjWzFdKSA/IDggOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShiU3JjWzBdKSB8fCAhaXNGaW5pdGUoYlNyY1sxXSkgPyA0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoY1NyY1swXSkgfHwgIWlzRmluaXRlKGNTcmNbMV0pID8gMiA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGRTcmNbMF0pIHx8ICFpc0Zpbml0ZShkU3JjWzFdKSA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm90RmluaXRlICE9IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gWyhhWzBdICsgY1swXSkgLyAyLCAoYVsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZW50ZXIpO1xuICAgICAgICAgICAgICAgIHZhciBkeCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFc3RpbVggPSAobW9kdWxvKGFTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsbyhjU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgMjtcbiAgICAgICAgICAgICAgICAgICAgZHggPSBjZW50ZXJTcmNFc3RpbVggLSBtb2R1bG8oY2VudGVyU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGR4ID0gKGFTcmNbMF0gKyBjU3JjWzBdKSAvIDIgLSBjZW50ZXJTcmNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkeSA9IChhU3JjWzFdICsgY1NyY1sxXSkgLyAyIC0gY2VudGVyU3JjWzFdO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gY2VudGVyU3JjRXJyb3JTcXVhcmVkID4gdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoYVswXSAtIGNbMF0pIDw9IE1hdGguYWJzKGFbMV0gLSBjWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzcGxpdCBob3Jpem9udGFsbHkgKHRvcCAmIGJvdHRvbSlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJjID0gWyhiWzBdICsgY1swXSkgLyAyLCAoYlsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBiY1NyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhiYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IFsoZFswXSArIGFbMF0pIC8gMiwgKGRbMV0gKyBhWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGFTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oZGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGEsIGIsIGJjLCBkYSwgYVNyYywgYlNyYywgYmNTcmMsIGRhU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGRhLCBiYywgYywgZCwgZGFTcmMsIGJjU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQgdmVydGljYWxseSAobGVmdCAmIHJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICB2YXIgYWIgPSBbKGFbMF0gKyBiWzBdKSAvIDIsIChhWzFdICsgYlsxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFiU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGFiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNkID0gWyhjWzBdICsgZFswXSkgLyAyLCAoY1sxXSArIGRbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZFNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYSwgYWIsIGNkLCBkLCBhU3JjLCBhYlNyYywgY2RTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYWIsIGIsIGMsIGNkLCBhYlNyYywgYlNyYywgY1NyYywgY2RTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuV3JhcFhJblNvdXJjZV8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhhY3RseSB6ZXJvIG9yIG9uZSBvZiAqU3JjIGlzIG5vdCBmaW5pdGVcbiAgICAgICAgLy8gVGhlIHRyaWFuZ2xlcyBtdXN0IGhhdmUgdGhlIGRpYWdvbmFsIGxpbmUgYXMgdGhlIGZpcnN0IHNpZGVcbiAgICAgICAgLy8gVGhpcyBpcyB0byBhbGxvdyBlYXN5IGNvZGUgaW4gcmVwcm9qLnMgdG8gbWFrZSBpdCBzdHJhaWdodCBmb3IgYnJva2VuXG4gICAgICAgIC8vIGJyb3dzZXJzIHRoYXQgY2FuJ3QgaGFuZGxlIGRpYWdvbmFsIGNsaXBwaW5nXG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGIpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGQsIGFTcmMsIGNTcmMsIGRTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGUpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGIsIGFTcmMsIGNTcmMsIGJTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05vdEZpbml0ZSkge1xuICAgICAgICAgICAgLy8gVHJ5IHRoZSBvdGhlciB0d28gdHJpYW5nbGVzXG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhkKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYSwgYlNyYywgZFNyYywgYVNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHg3KSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYywgYlNyYywgZFNyYywgY1NyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgZXh0ZW50IG9mIHRoZSAnc291cmNlJyBjb29yZGluYXRlcyBmcm9tIGFsbCB0aGUgdHJpYW5nbGVzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gQ2FsY3VsYXRlZCBleHRlbnQuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuY2FsY3VsYXRlU291cmNlRXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzBdKTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMV0pO1xuICAgICAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1syXSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8VHJpYW5nbGU+fSBBcnJheSBvZiB0aGUgY2FsY3VsYXRlZCB0cmlhbmdsZXMuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuZ2V0VHJpYW5nbGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmlhbmdsZXNfO1xuICAgIH07XG4gICAgcmV0dXJuIFRyaWFuZ3VsYXRpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgVHJpYW5ndWxhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyaWFuZ3VsYXRpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9jb21tb25cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IFdNUyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1dNU19WRVJTSU9OID0gJzEuMy4wJztcbi8qKlxuICogQ29udGV4dCBvcHRpb25zIHRvIGRpc2FibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgPSB7XG4gICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkOiBmYWxzZSxcbiAgICBtc0ltYWdlU21vb3RoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2pcbiAqL1xuaW1wb3J0IHsgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIH0gZnJvbSAnLi9zb3VyY2UvY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlRW1wdHksIGV4dGVuZCwgZm9yRWFjaENvcm5lciwgZ2V0Q2VudGVyLCBnZXRIZWlnaHQsIGdldFRvcExlZnQsIGdldFdpZHRoLCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGdldFBvaW50UmVzb2x1dGlvbiwgdHJhbnNmb3JtIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IHNvbHZlTGluZWFyU3lzdGVtIH0gZnJvbSAnLi9tYXRoLmpzJztcbnZhciBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG4vKipcbiAqIFRoaXMgZHJhd3MgYSBzbWFsbCB0cmlhbmdsZSBpbnRvIGEgY2FudmFzIGJ5IHNldHRpbmcgdGhlIHRyaWFuZ2xlIGFzIHRoZSBjbGlwIHJlZ2lvblxuICogYW5kIHRoZW4gZHJhd2luZyBhICh0b28gbGFyZ2UpIHJlY3RhbmdsZVxuICpcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHggVGhlIGNvbnRleHQgaW4gd2hpY2ggdG8gZHJhdyB0aGUgdHJpYW5nbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSB1MSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBzZWNvbmQgcG9pbnQuIFRoZSBmaXJzdCBwb2ludCBpcyAwLDAuXG4gKiBAcGFyYW0ge251bWJlcn0gdjEgVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHUyIFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIHRoaXJkIHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHYyIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHRoaXJkIHBvaW50LlxuICovXG5mdW5jdGlvbiBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgdTEsIHYxLCB1MiwgdjIpIHtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbygwLCAwKTtcbiAgICBjdHgubGluZVRvKHUxLCB2MSk7XG4gICAgY3R4LmxpbmVUbyh1MiwgdjIpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5jbGlwKCk7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIE1hdGgubWF4KHUxLCB1MikgKyAxLCBNYXRoLm1heCh2MSwgdjIpKTtcbiAgICBjdHgucmVzdG9yZSgpO1xufVxuLyoqXG4gKiBHaXZlbiB0aGUgZGF0YSBmcm9tIGdldEltYWdlRGF0YSwgc2VlIGlmIHRoZSByaWdodCB2YWx1ZXMgYXBwZWFyIGF0IHRoZSBwcm92aWRlZCBvZmZzZXQuXG4gKiBSZXR1cm5zIHRydWUgaWYgZWl0aGVyIHRoZSBjb2xvciBvciB0cmFuc3BhcmVuY3kgaXMgb2ZmXG4gKlxuICogQHBhcmFtIHtVaW50OENsYW1wZWRBcnJheX0gZGF0YSBUaGUgZGF0YSByZXR1cm5lZCBmcm9tIGdldEltYWdlRGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBUaGUgcGl4ZWwgb2Zmc2V0IGZyb20gdGhlIHN0YXJ0IG9mIGRhdGEuXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBkaWFnb25hbCByZW5kZXJpbmcgaXMgYnJva2VuXG4gKi9cbmZ1bmN0aW9uIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIG9mZnNldCkge1xuICAgIC8vIHRoZSB2YWx1ZXMgb3VnaHQgdG8gYmUgY2xvc2UgdG8gdGhlIHJnYmEoMjEwLCAwLCAwLCAwLjc1KVxuICAgIHJldHVybiAoTWF0aC5hYnMoZGF0YVtvZmZzZXQgKiA0XSAtIDIxMCkgPiAyIHx8XG4gICAgICAgIE1hdGguYWJzKGRhdGFbb2Zmc2V0ICogNCArIDNdIC0gMC43NSAqIDI1NSkgPiAyKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgY3VycmVudCBicm93c2VyIGNvbmZpZ3VyYXRpb24gY2FuIHJlbmRlciB0cmlhbmd1bGFyIGNsaXAgcmVnaW9ucyBjb3JyZWN0bHkuXG4gKiBUaGlzIHZhbHVlIGlzIGNhY2hlZCBzbyB0aGUgZnVuY3Rpb24gaXMgb25seSBleHBlbnNpdmUgdGhlIGZpcnN0IHRpbWUgY2FsbGVkLlxuICogRmlyZWZveCBvbiBXaW5kb3dzIChhcyBvZiBub3cpIGRvZXMgbm90IGlmIEhXQSBpcyBlbmFibGVkLiBTZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTYwNjk3NlxuICogSUUgYWxzbyBkb2Vzbid0LiBDaHJvbWUgd29ya3MsIGFuZCBldmVyeXRoaW5nIHNlZW1zIHRvIHdvcmsgb24gT1NYIGFuZCBBbmRyb2lkLiBUaGlzIGZ1bmN0aW9uIGNhY2hlcyB0aGVcbiAqIHJlc3VsdC4gSSBzdXBwb3NlIHRoYXQgaXQgaXMgY29uY2VpdmFibHkgcG9zc2libGUgdGhhdCBhIGJyb3dzZXIgbWlnaHQgZmxpcCBtb2RlcyB3aGlsZSB0aGUgYXBwIGlzXG4gKiBydW5uaW5nLCBidXQgbGV0cyBob3BlIG5vdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBEaWFnb25hbCBSZW5kZXJpbmcgaXMgYnJva2VuLlxuICovXG5mdW5jdGlvbiBpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKCkge1xuICAgIGlmIChicm9rZW5EaWFnb25hbFJlbmRlcmluZ18gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdsaWdodGVyJztcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDIxMCwgMCwgMCwgMC43NSknO1xuICAgICAgICBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgNCwgNSwgNCwgMCk7XG4gICAgICAgIGRyYXdUZXN0VHJpYW5nbGUoY3R4LCA0LCA1LCAwLCA1KTtcbiAgICAgICAgdmFyIGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDMsIDMpLmRhdGE7XG4gICAgICAgIGJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyA9XG4gICAgICAgICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCAwKSB8fFxuICAgICAgICAgICAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDQpIHx8XG4gICAgICAgICAgICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgOCk7XG4gICAgfVxuICAgIHJldHVybiBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgaWRlYWwgcmVzb2x1dGlvbiB0byB1c2UgZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGFjaGlldmVcbiAqIHBpeGVsIG1hcHBpbmcgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gMToxIGR1cmluZyByZXByb2plY3Rpb24uXG4gKiBUaGUgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCByZXNvbHV0aW9uc1xuICogYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBpbiB0aGUgZGF0YXNldCAoVGlsZUdyaWQsIEltYWdlLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiZXN0IHJlc29sdXRpb24gdG8gdXNlLiBDYW4gYmUgKy1JbmZpbml0eSwgTmFOIG9yIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbikge1xuICAgIHZhciBzb3VyY2VDZW50ZXIgPSB0cmFuc2Zvcm0odGFyZ2V0Q2VudGVyLCB0YXJnZXRQcm9qLCBzb3VyY2VQcm9qKTtcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGlkZWFsIHJlc29sdXRpb24gb2YgdGhlIHNvdXJjZSBkYXRhXG4gICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBnZXRQb2ludFJlc29sdXRpb24odGFyZ2V0UHJvaiwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0Q2VudGVyKTtcbiAgICB2YXIgdGFyZ2V0TWV0ZXJzUGVyVW5pdCA9IHRhcmdldFByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGlmICh0YXJnZXRNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbiAqPSB0YXJnZXRNZXRlcnNQZXJVbml0O1xuICAgIH1cbiAgICB2YXIgc291cmNlTWV0ZXJzUGVyVW5pdCA9IHNvdXJjZVByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGlmIChzb3VyY2VNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbiAvPSBzb3VyY2VNZXRlcnNQZXJVbml0O1xuICAgIH1cbiAgICAvLyBCYXNlZCBvbiB0aGUgcHJvamVjdGlvbiBwcm9wZXJ0aWVzLCB0aGUgcG9pbnQgcmVzb2x1dGlvbiBhdCB0aGUgc3BlY2lmaWVkXG4gICAgLy8gY29vcmRpbmF0ZXMgbWF5IGJlIHNsaWdodGx5IGRpZmZlcmVudC4gV2UgbmVlZCB0byByZXZlcnNlLWNvbXBlbnNhdGUgdGhpc1xuICAgIC8vIGluIG9yZGVyIHRvIGFjaGlldmUgb3B0aW1hbCByZXN1bHRzLlxuICAgIHZhciBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgIGlmICghc291cmNlRXh0ZW50IHx8IGNvbnRhaW5zQ29vcmRpbmF0ZShzb3VyY2VFeHRlbnQsIHNvdXJjZUNlbnRlcikpIHtcbiAgICAgICAgdmFyIGNvbXBlbnNhdGlvbkZhY3RvciA9IGdldFBvaW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCBzb3VyY2VSZXNvbHV0aW9uLCBzb3VyY2VDZW50ZXIpIC9cbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb247XG4gICAgICAgIGlmIChpc0Zpbml0ZShjb21wZW5zYXRpb25GYWN0b3IpICYmIGNvbXBlbnNhdGlvbkZhY3RvciA+IDApIHtcbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb24gLz0gY29tcGVuc2F0aW9uRmFjdG9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2VSZXNvbHV0aW9uO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRFeHRlbnQsIHRhcmdldFJlc29sdXRpb24pIHtcbiAgICB2YXIgdGFyZ2V0Q2VudGVyID0gZ2V0Q2VudGVyKHRhcmdldEV4dGVudCk7XG4gICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgaWYgKCFpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSB8fCBzb3VyY2VSZXNvbHV0aW9uIDw9IDApIHtcbiAgICAgICAgZm9yRWFjaENvcm5lcih0YXJnZXRFeHRlbnQsIGZ1bmN0aW9uIChjb3JuZXIpIHtcbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGNvcm5lciwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgJiYgc291cmNlUmVzb2x1dGlvbiA+IDA7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gSW1hZ2VFeHRlbnRcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHByb3BlcnR5IHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICovXG4vKipcbiAqIFJlbmRlcnMgdGhlIHNvdXJjZSBkYXRhIGludG8gbmV3IGNhbnZhcyBiYXNlZCBvbiB0aGUgdHJpYW5ndWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggV2lkdGggb2YgdGhlIGNhbnZhcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzb3VyY2VSZXNvbHV0aW9uIFNvdXJjZSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHNvdXJjZUV4dGVudCBFeHRlbnQgb2YgdGhlIGRhdGEgc291cmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcmVwcm9qL1RyaWFuZ3VsYXRpb24uanNcIikuZGVmYXVsdH0gdHJpYW5ndWxhdGlvbiBDYWxjdWxhdGVkIHRyaWFuZ3VsYXRpb24uXG4gKiBAcGFyYW0ge0FycmF5PEltYWdlRXh0ZW50Pn0gc291cmNlcyBBcnJheSBvZiBzb3VyY2VzLlxuICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmVuZGVyRWRnZXNdIFJlbmRlciByZXByb2plY3Rpb24gZWRnZXMuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdF9jb250ZXh0T3B0aW9uc10gUHJvcGVydGllcyB0byBzZXQgb24gdGhlIGNhbnZhcyBjb250ZXh0LlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IENhbnZhcyB3aXRoIHJlcHJvamVjdGVkIGRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIod2lkdGgsIGhlaWdodCwgcGl4ZWxSYXRpbywgc291cmNlUmVzb2x1dGlvbiwgc291cmNlRXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRFeHRlbnQsIHRyaWFuZ3VsYXRpb24sIHNvdXJjZXMsIGd1dHRlciwgb3B0X3JlbmRlckVkZ2VzLCBvcHRfY29udGV4dE9wdGlvbnMpIHtcbiAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiB3aWR0aCksIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIGhlaWdodCkpO1xuICAgIGFzc2lnbihjb250ZXh0LCBvcHRfY29udGV4dE9wdGlvbnMpO1xuICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG4gICAgfVxuICAgIGNvbnRleHQuc2NhbGUocGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG4gICAgZnVuY3Rpb24gcGl4ZWxSb3VuZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHBpeGVsUmF0aW8pIC8gcGl4ZWxSYXRpbztcbiAgICB9XG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG4gICAgdmFyIHNvdXJjZURhdGFFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc3JjLCBpLCBhcnIpIHtcbiAgICAgICAgZXh0ZW5kKHNvdXJjZURhdGFFeHRlbnQsIHNyYy5leHRlbnQpO1xuICAgIH0pO1xuICAgIHZhciBjYW52YXNXaWR0aEluVW5pdHMgPSBnZXRXaWR0aChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgY2FudmFzSGVpZ2h0SW5Vbml0cyA9IGdldEhlaWdodChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgc3RpdGNoQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzV2lkdGhJblVuaXRzKSAvIHNvdXJjZVJlc29sdXRpb24pLCBNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzSGVpZ2h0SW5Vbml0cykgLyBzb3VyY2VSZXNvbHV0aW9uKSk7XG4gICAgYXNzaWduKHN0aXRjaENvbnRleHQsIG9wdF9jb250ZXh0T3B0aW9ucyk7XG4gICAgdmFyIHN0aXRjaFNjYWxlID0gcGl4ZWxSYXRpbyAvIHNvdXJjZVJlc29sdXRpb247XG4gICAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzcmMsIGksIGFycikge1xuICAgICAgICB2YXIgeFBvcyA9IHNyYy5leHRlbnRbMF0gLSBzb3VyY2VEYXRhRXh0ZW50WzBdO1xuICAgICAgICB2YXIgeVBvcyA9IC0oc3JjLmV4dGVudFszXSAtIHNvdXJjZURhdGFFeHRlbnRbM10pO1xuICAgICAgICB2YXIgc3JjV2lkdGggPSBnZXRXaWR0aChzcmMuZXh0ZW50KTtcbiAgICAgICAgdmFyIHNyY0hlaWdodCA9IGdldEhlaWdodChzcmMuZXh0ZW50KTtcbiAgICAgICAgLy8gVGhpcyB0ZXN0IHNob3VsZCBuZXZlciBmYWlsIC0tIGJ1dCBpdCBkb2VzLiBOZWVkIHRvIGZpbmQgYSBmaXggdGhlIHVwc3RyZWFtIGNvbmRpdGlvblxuICAgICAgICBpZiAoc3JjLmltYWdlLndpZHRoID4gMCAmJiBzcmMuaW1hZ2UuaGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgc3RpdGNoQ29udGV4dC5kcmF3SW1hZ2Uoc3JjLmltYWdlLCBndXR0ZXIsIGd1dHRlciwgc3JjLmltYWdlLndpZHRoIC0gMiAqIGd1dHRlciwgc3JjLmltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHhQb3MgKiBzdGl0Y2hTY2FsZSwgeVBvcyAqIHN0aXRjaFNjYWxlLCBzcmNXaWR0aCAqIHN0aXRjaFNjYWxlLCBzcmNIZWlnaHQgKiBzdGl0Y2hTY2FsZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgdGFyZ2V0VG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICB0cmlhbmd1bGF0aW9uLmdldFRyaWFuZ2xlcygpLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgLyogQ2FsY3VsYXRlIGFmZmluZSB0cmFuc2Zvcm0gKHNyYyAtPiBkc3QpXG4gICAgICAgICAqIFJlc3VsdGluZyBtYXRyaXggY2FuIGJlIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkaW5hdGVcbiAgICAgICAgICogZnJvbSBgc291cmNlUHJvamVjdGlvbmAgdG8gZGVzdGluYXRpb24gcGl4ZWxzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUbyBvcHRpbWl6ZSBudW1iZXIgb2YgY29udGV4dCBjYWxscyBhbmQgaW5jcmVhc2UgbnVtZXJpY2FsIHN0YWJpbGl0eSxcbiAgICAgICAgICogd2UgYWxzbyBkbyB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6XG4gICAgICAgICAqIHRyYW5zKC10b3BMZWZ0RXh0ZW50Q29ybmVyKSwgc2NhbGUoMSAvIHRhcmdldFJlc29sdXRpb24pLCBzY2FsZSgxLCAtMSlcbiAgICAgICAgICogaGVyZSBiZWZvcmUgc29sdmluZyB0aGUgbGluZWFyIHN5c3RlbSBzbyBbdWksIHZpXSBhcmUgcGl4ZWwgY29vcmRpbmF0ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNyYyBwb2ludHM6IHhpLCB5aVxuICAgICAgICAgKiBEc3QgcG9pbnRzOiB1aSwgdmlcbiAgICAgICAgICogQWZmaW5lIGNvZWZmaWNpZW50czogYWlqXG4gICAgICAgICAqXG4gICAgICAgICAqIHwgeDAgeTAgMSAgMCAgMCAwIHwgICB8YTAwfCAgIHx1MHxcbiAgICAgICAgICogfCB4MSB5MSAxICAwICAwIDAgfCAgIHxhMDF8ICAgfHUxfFxuICAgICAgICAgKiB8IHgyIHkyIDEgIDAgIDAgMCB8IHggfGEwMnwgPSB8dTJ8XG4gICAgICAgICAqIHwgIDAgIDAgMCB4MCB5MCAxIHwgICB8YTEwfCAgIHx2MHxcbiAgICAgICAgICogfCAgMCAgMCAwIHgxIHkxIDEgfCAgIHxhMTF8ICAgfHYxfFxuICAgICAgICAgKiB8ICAwICAwIDAgeDIgeTIgMSB8ICAgfGExMnwgICB8djJ8XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgc291cmNlID0gdHJpYW5nbGUuc291cmNlO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgICAgICB2YXIgeDAgPSBzb3VyY2VbMF1bMF0sIHkwID0gc291cmNlWzBdWzFdO1xuICAgICAgICB2YXIgeDEgPSBzb3VyY2VbMV1bMF0sIHkxID0gc291cmNlWzFdWzFdO1xuICAgICAgICB2YXIgeDIgPSBzb3VyY2VbMl1bMF0sIHkyID0gc291cmNlWzJdWzFdO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBldmVyeXRoaW5nIGlzIG9uIHBpeGVsIGJvdW5kYXJpZXNcbiAgICAgICAgdmFyIHUwID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzBdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHYwID0gcGl4ZWxSb3VuZCgtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB1MSA9IHBpeGVsUm91bmQoKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2MSA9IHBpeGVsUm91bmQoLSh0YXJnZXRbMV1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdTIgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdjIgPSBwaXhlbFJvdW5kKC0odGFyZ2V0WzJdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgLy8gU2hpZnQgYWxsIHRoZSBzb3VyY2UgcG9pbnRzIHRvIGltcHJvdmUgbnVtZXJpY2FsIHN0YWJpbGl0eVxuICAgICAgICAvLyBvZiBhbGwgdGhlIHN1YnNlcXVlbnQgY2FsY3VsYXRpb25zLiBUaGUgW3gwLCB5MF0gaXMgdXNlZCBoZXJlLlxuICAgICAgICAvLyBUaGlzIGlzIGFsc28gdXNlZCB0byBzaW1wbGlmeSB0aGUgbGluZWFyIHN5c3RlbS5cbiAgICAgICAgdmFyIHNvdXJjZU51bWVyaWNhbFNoaWZ0WCA9IHgwO1xuICAgICAgICB2YXIgc291cmNlTnVtZXJpY2FsU2hpZnRZID0geTA7XG4gICAgICAgIHgwID0gMDtcbiAgICAgICAgeTAgPSAwO1xuICAgICAgICB4MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFg7XG4gICAgICAgIHkxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcbiAgICAgICAgeDIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgICAgICB5MiAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG4gICAgICAgIHZhciBhdWdtZW50ZWRNYXRyaXggPSBbXG4gICAgICAgICAgICBbeDEsIHkxLCAwLCAwLCB1MSAtIHUwXSxcbiAgICAgICAgICAgIFt4MiwgeTIsIDAsIDAsIHUyIC0gdTBdLFxuICAgICAgICAgICAgWzAsIDAsIHgxLCB5MSwgdjEgLSB2MF0sXG4gICAgICAgICAgICBbMCwgMCwgeDIsIHkyLCB2MiAtIHYwXSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGFmZmluZUNvZWZzID0gc29sdmVMaW5lYXJTeXN0ZW0oYXVnbWVudGVkTWF0cml4KTtcbiAgICAgICAgaWYgKCFhZmZpbmVDb2Vmcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBpZiAoaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZygpIHx8XG4gICAgICAgICAgICBvcHRfY29udGV4dE9wdGlvbnMgPT09IElNQUdFX1NNT09USElOR19ESVNBQkxFRCkge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgYWxsIGxpbmVzIGFyZSBob3Jpem9udGFsIG9yIHZlcnRpY2FsXG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZGlhZ29uYWwgbGluZS4gRG8gaXQgaW4gNCBzdGVwc1xuICAgICAgICAgICAgdmFyIHN0ZXBzID0gNDtcbiAgICAgICAgICAgIHZhciB1ZCA9IHUwIC0gdTE7XG4gICAgICAgICAgICB2YXIgdmQgPSB2MCAtIHYxO1xuICAgICAgICAgICAgZm9yICh2YXIgc3RlcCA9IDA7IHN0ZXAgPCBzdGVwczsgc3RlcCsrKSB7XG4gICAgICAgICAgICAgICAgLy8gR28gaG9yaXpvbnRhbGx5XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKHN0ZXAgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIC8vIEdvIHZlcnRpY2FsbHlcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCAhPSBzdGVwcyAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGFyZSBhbG1vc3QgYXQgdTByLCB2MHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNmb3JtKGFmZmluZUNvZWZzWzBdLCBhZmZpbmVDb2Vmc1syXSwgYWZmaW5lQ29lZnNbMV0sIGFmZmluZUNvZWZzWzNdLCB1MCwgdjApO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShzb3VyY2VEYXRhRXh0ZW50WzBdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRYLCBzb3VyY2VEYXRhRXh0ZW50WzNdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRZKTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzb3VyY2VSZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbywgLXNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2Uoc3RpdGNoQ29udGV4dC5jYW52YXMsIDAsIDApO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9KTtcbiAgICBpZiAob3B0X3JlbmRlckVkZ2VzKSB7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciB1MCA9ICh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjAgPSAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MSA9ICh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjEgPSAtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MiA9ICh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjIgPSAtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXByb2ouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovVGlsZVxuICovXG5pbXBvcnQgeyBFUlJPUl9USFJFU0hPTEQgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGUgZnJvbSAnLi4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVHJpYW5ndWxhdGlvbiBmcm9tICcuL1RyaWFuZ3VsYXRpb24uanMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiwgcmVuZGVyIGFzIHJlbmRlclJlcHJvamVjdGVkLCB9IGZyb20gJy4uL3JlcHJvai5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0QXJlYSwgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIpIDogaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBGdW5jdGlvblR5cGVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBlbmNhcHN1bGF0aW5nIHNpbmdsZSByZXByb2plY3RlZCB0aWxlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGVJbWFnZX5UaWxlSW1hZ2V9LlxuICpcbiAqL1xudmFyIFJlcHJvalRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlcHJvalRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVRpbGVHcmlkIFNvdXJjZSB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRhcmdldFRpbGVHcmlkIFRhcmdldCB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHdyYXBwZWRUaWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZSB3cmFwcGVkIGluIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZSB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uVHlwZX0gZ2V0VGlsZUZ1bmN0aW9uXG4gICAgICogICAgIEZ1bmN0aW9uIHJldHVybmluZyBzb3VyY2UgdGlsZXMgKHosIHgsIHksIHBpeGVsUmF0aW8pLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2Vycm9yVGhyZXNob2xkXSBBY2NlcHRhYmxlIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcHgpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yZW5kZXJFZGdlc10gUmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcy5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdF9jb250ZXh0T3B0aW9uc10gUHJvcGVydGllcyB0byBzZXQgb24gdGhlIGNhbnZhcyBjb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlcHJvalRpbGUoc291cmNlUHJvaiwgc291cmNlVGlsZUdyaWQsIHRhcmdldFByb2osIHRhcmdldFRpbGVHcmlkLCB0aWxlQ29vcmQsIHdyYXBwZWRUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIGd1dHRlciwgZ2V0VGlsZUZ1bmN0aW9uLCBvcHRfZXJyb3JUaHJlc2hvbGQsIG9wdF9yZW5kZXJFZGdlcywgb3B0X2NvbnRleHRPcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVDb29yZCwgVGlsZVN0YXRlLklETEUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlckVkZ2VzXyA9IG9wdF9yZW5kZXJFZGdlcyAhPT0gdW5kZWZpbmVkID8gb3B0X3JlbmRlckVkZ2VzIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dE9wdGlvbnNfID0gb3B0X2NvbnRleHRPcHRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ndXR0ZXJfID0gZ3V0dGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FudmFzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVHcmlkXyA9IHNvdXJjZVRpbGVHcmlkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRUaWxlR3JpZF8gPSB0YXJnZXRUaWxlR3JpZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcHBlZFRpbGVDb29yZF8gPSB3cmFwcGVkVGlsZUNvb3JkID8gd3JhcHBlZFRpbGVDb29yZCA6IHRpbGVDb29yZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VaXyA9IDA7XG4gICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0YXJnZXRUaWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQoX3RoaXMud3JhcHBlZFRpbGVDb29yZF8pO1xuICAgICAgICB2YXIgbWF4VGFyZ2V0RXh0ZW50ID0gX3RoaXMudGFyZ2V0VGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbWF4U291cmNlRXh0ZW50ID0gX3RoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbGltaXRlZFRhcmdldEV4dGVudCA9IG1heFRhcmdldEV4dGVudFxuICAgICAgICAgICAgPyBnZXRJbnRlcnNlY3Rpb24odGFyZ2V0RXh0ZW50LCBtYXhUYXJnZXRFeHRlbnQpXG4gICAgICAgICAgICA6IHRhcmdldEV4dGVudDtcbiAgICAgICAgaWYgKGdldEFyZWEobGltaXRlZFRhcmdldEV4dGVudCkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFRpbGUgaXMgY29tcGxldGVseSBvdXRzaWRlIHJhbmdlIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBUT0RPOiBpcyBpdCBhY3R1YWxseSBjb3JyZWN0IHRoYXQgdGhlIHNvdXJjZSBldmVuIGNyZWF0ZXMgdGhlIHRpbGUgP1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZVByb2pFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICBpZiAoc291cmNlUHJvakV4dGVudCkge1xuICAgICAgICAgICAgaWYgKCFtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgICAgICAgICBtYXhTb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qRXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKG1heFNvdXJjZUV4dGVudCwgc291cmNlUHJvakV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldFJlc29sdXRpb24gPSB0YXJnZXRUaWxlR3JpZC5nZXRSZXNvbHV0aW9uKF90aGlzLndyYXBwZWRUaWxlQ29vcmRfWzBdKTtcbiAgICAgICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoIWlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pIHx8IHNvdXJjZVJlc29sdXRpb24gPD0gMCkge1xuICAgICAgICAgICAgLy8gaW52YWxpZCBzb3VyY2VSZXNvbHV0aW9uIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBwcm9iYWJseSBlZGdlcyBvZiB0aGUgcHJvamVjdGlvbnMgd2hlbiBubyBleHRlbnQgaXMgZGVmaW5lZFxuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVycm9yVGhyZXNob2xkSW5QaXhlbHMgPSBvcHRfZXJyb3JUaHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdF9lcnJvclRocmVzaG9sZCA6IEVSUk9SX1RIUkVTSE9MRDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshaW1wb3J0KFwiLi9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmlhbmd1bGF0aW9uXyA9IG5ldyBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgc291cmNlUmVzb2x1dGlvbiAqIGVycm9yVGhyZXNob2xkSW5QaXhlbHMsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoX3RoaXMudHJpYW5ndWxhdGlvbl8uZ2V0VHJpYW5nbGVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBubyB2YWxpZCB0cmlhbmdsZXMgLT4gRU1QVFlcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNvdXJjZVpfID0gc291cmNlVGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24oc291cmNlUmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzb3VyY2VFeHRlbnQgPSBfdGhpcy50cmlhbmd1bGF0aW9uXy5jYWxjdWxhdGVTb3VyY2VFeHRlbnQoKTtcbiAgICAgICAgaWYgKG1heFNvdXJjZUV4dGVudCkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFsxXSA9IGNsYW1wKHNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFszXSA9IGNsYW1wKHNvdXJjZUV4dGVudFszXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKHNvdXJjZUV4dGVudCwgbWF4U291cmNlRXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdldEFyZWEoc291cmNlRXh0ZW50KSkge1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc291cmNlUmFuZ2UgPSBzb3VyY2VUaWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHNvdXJjZUV4dGVudCwgX3RoaXMuc291cmNlWl8pO1xuICAgICAgICAgICAgZm9yICh2YXIgc3JjWCA9IHNvdXJjZVJhbmdlLm1pblg7IHNyY1ggPD0gc291cmNlUmFuZ2UubWF4WDsgc3JjWCsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3JjWSA9IHNvdXJjZVJhbmdlLm1pblk7IHNyY1kgPD0gc291cmNlUmFuZ2UubWF4WTsgc3JjWSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWxlID0gZ2V0VGlsZUZ1bmN0aW9uKF90aGlzLnNvdXJjZVpfLCBzcmNYLCBzcmNZLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgSFRNTCBDYW52YXMgZWxlbWVudCBmb3IgdGhpcyB0aWxlLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMuXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLnJlcHJvamVjdF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgaWYgKHRpbGUgJiYgdGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBleHRlbnQ6IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFRpbGVDb29yZEV4dGVudCh0aWxlLnRpbGVDb29yZCksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB0aWxlLmdldEltYWdlKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB6ID0gdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXTtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZVNpemUoeik7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVswXTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVsxXTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRSZXNvbHV0aW9uID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih0aGlzLnNvdXJjZVpfKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGhpcy53cmFwcGVkVGlsZUNvb3JkXyk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhc18gPSByZW5kZXJSZXByb2plY3RlZCh3aWR0aCwgaGVpZ2h0LCB0aGlzLnBpeGVsUmF0aW9fLCBzb3VyY2VSZXNvbHV0aW9uLCB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRFeHRlbnQoKSwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0RXh0ZW50LCB0aGlzLnRyaWFuZ3VsYXRpb25fLCBzb3VyY2VzLCB0aGlzLmd1dHRlcl8sIHRoaXMucmVuZGVyRWRnZXNfLCB0aGlzLmNvbnRleHRPcHRpb25zXyk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgICAgIHZhciBsZWZ0VG9Mb2FkXzEgPSAwO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSB8fCBzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0VG9Mb2FkXzErKztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZUxpc3RlbktleV8xID0gbGlzdGVuKHRpbGUsIEV2ZW50VHlwZS5DSEFOR0UsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoc291cmNlTGlzdGVuS2V5XzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRUb0xvYWRfMS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmxpc3RlblNvdXJjZXNfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0XygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18ucHVzaChzb3VyY2VMaXN0ZW5LZXlfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMucmVwcm9qZWN0Xy5iaW5kKHRoaXMpLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS51bmxpc3RlblNvdXJjZXNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcHJvalRpbGU7XG59KFRpbGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlcHJvalRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtYXhpbXVtIGFsbG93ZWQgdGhyZXNob2xkICAoaW4gcGl4ZWxzKSBmb3IgcmVwcm9qZWN0aW9uXG4gKiB0cmlhbmd1bGF0aW9uLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBFUlJPUl9USFJFU0hPTEQgPSAwLjU7XG4vKipcbiAqIEVuYWJsZSBhdXRvbWF0aWMgcmVwcm9qZWN0aW9uIG9mIHJhc3RlciBzb3VyY2VzLiBEZWZhdWx0IGlzIGB0cnVlYC5cbiAqIFRPRE86IGRlY2lkZSBpZiB3ZSB3YW50IHRvIGV4cG9zZSB0aGlzIGFzIGEgYnVpbGQgZmxhZyBvciByZW1vdmUgaXRcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9MUlVDYWNoZVxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRW50cnlcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBrZXlfIEtleS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBuZXdlciBOZXdlci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvbGRlciBPbGRlci5cbiAqIEBwcm9wZXJ0eSB7Kn0gdmFsdWVfIFZhbHVlLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudHMgYSBMZWFzdC1SZWNlbnRseS1Vc2VkIGNhY2hlIHdoZXJlIHRoZSBrZXlzIGRvIG5vdCBjb25mbGljdCB3aXRoXG4gKiBPYmplY3QncyBwcm9wZXJ0aWVzIChlLmcuICdoYXNPd25Qcm9wZXJ0eScgaXMgbm90IGFsbG93ZWQgYXMgYSBrZXkpLiBFeHBpcmluZ1xuICogaXRlbXMgZnJvbSB0aGUgY2FjaGUgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSB1c2VyLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIExSVUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2hpZ2hXYXRlck1hcmtdIEhpZ2ggd2F0ZXIgbWFyay5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMUlVDYWNoZShvcHRfaGlnaFdhdGVyTWFyaykge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVzaXJlZCBtYXggY2FjaGUgc2l6ZSBhZnRlciBleHBpcmVDYWNoZSgpLiBJZiBzZXQgdG8gMCwgbm8gY2FjaGUgZW50cmllc1xuICAgICAgICAgKiB3aWxsIGJlIHBydW5lZCBhdCBhbGwuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPVxuICAgICAgICAgICAgb3B0X2hpZ2hXYXRlck1hcmsgIT09IHVuZGVmaW5lZCA/IG9wdF9oaWdoV2F0ZXJNYXJrIDogMjA0ODtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEVudHJ5Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW50cmllc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/RW50cnl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoV2F0ZXJNYXJrID4gMCAmJiB0aGlzLmdldENvdW50KCkgPiB0aGlzLmhpZ2hXYXRlck1hcms7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY291bnRfID0gMDtcbiAgICAgICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgICAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50cmllc18uaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgc3RyaW5nLCBMUlVDYWNoZTxUPik6ID99IGYgVGhlIGZ1bmN0aW9uXG4gICAgICogICAgIHRvIGNhbGwgZm9yIGV2ZXJ5IGVudHJ5IGZyb20gdGhlIG9sZGVzdCB0byB0aGUgbmV3ZXIuIFRoaXMgZnVuY3Rpb24gdGFrZXNcbiAgICAgKiAgICAgMyBhcmd1bWVudHMgKHRoZSBlbnRyeSB2YWx1ZSwgdGhlIGVudHJ5IGtleSBhbmQgdGhlIExSVUNhY2hlIG9iamVjdCkuXG4gICAgICogICAgIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICAgICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICAgICAgICBmKGVudHJ5LnZhbHVlXywgZW50cnkua2V5XywgdGhpcyk7XG4gICAgICAgICAgICBlbnRyeSA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRfb3B0aW9uc10gT3B0aW9ucyAocmVzZXJ2ZWQgZm9yIHN1YmNsYXNzZXMpLlxuICAgICAqIEByZXR1cm4ge1R9IFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgICAgIGFzc2VydChlbnRyeSAhPT0gdW5kZWZpbmVkLCAxNSk7IC8vIFRyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZVxuICAgICAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAodGhpcy5vbGRlc3RfLm5ld2VyKTtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5uZXdlciA9IG51bGw7XG4gICAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy5uZXdlc3RfO1xuICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBlbnRyeTtcbiAgICAgICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW4gZW50cnkgZnJvbSB0aGUgY2FjaGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgZW50cnkga2V5LlxuICAgICAqIEByZXR1cm4ge1R9IFRoZSByZW1vdmVkIGVudHJ5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgYXNzZXJ0KGVudHJ5ICE9PSB1bmRlZmluZWQsIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgICAgIGlmIChlbnRyeSA9PT0gdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkub2xkZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm5ld2VyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjtcbiAgICAgICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgLS10aGlzLmNvdW50XztcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQ291bnQuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3VudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBLZXlzLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5cyA9IG5ldyBBcnJheSh0aGlzLmNvdW50Xyk7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGVudHJ5O1xuICAgICAgICBmb3IgKGVudHJ5ID0gdGhpcy5uZXdlc3RfOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5vbGRlcikge1xuICAgICAgICAgICAga2V5c1tpKytdID0gZW50cnkua2V5XztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PFQ+fSBWYWx1ZXMuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheSh0aGlzLmNvdW50Xyk7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGVudHJ5O1xuICAgICAgICBmb3IgKGVudHJ5ID0gdGhpcy5uZXdlc3RfOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5vbGRlcikge1xuICAgICAgICAgICAgdmFsdWVzW2krK10gPSBlbnRyeS52YWx1ZV87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1R9IExhc3QgdmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRlc3RfLnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gTGFzdCBrZXkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRlc3RfLmtleV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGtleSBvZiB0aGUgbmV3ZXN0IGl0ZW0gaW4gdGhlIGNhY2hlLiAgVGhyb3dzIGlmIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuZXdlc3Qga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wZWVrRmlyc3RLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld2VzdF8ua2V5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICAgICAgZGVsZXRlIHRoaXMuZW50cmllc19bZW50cnkua2V5X107XG4gICAgICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5uZXdlcik7XG4gICAgICAgIGlmICghdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC0tdGhpcy5jb3VudF87XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5nZXQoa2V5KTsgLy8gdXBkYXRlIGBuZXdlc3RfYFxuICAgICAgICB0aGlzLmVudHJpZXNfW2tleV0udmFsdWVfID0gdmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBhc3NlcnQoIShrZXkgaW4gdGhpcy5lbnRyaWVzXyksIDE2KTsgLy8gVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5XG4gICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgIGtleV86IGtleSxcbiAgICAgICAgICAgIG5ld2VyOiBudWxsLFxuICAgICAgICAgICAgb2xkZXI6IHRoaXMubmV3ZXN0XyxcbiAgICAgICAgICAgIHZhbHVlXzogdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IGVudHJ5O1xuICAgICAgICB0aGlzLmVudHJpZXNfW2tleV0gPSBlbnRyeTtcbiAgICAgICAgKyt0aGlzLmNvdW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG1heGltdW0gbnVtYmVyIG9mIGVudHJpZXMgZm9yIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBDYWNoZSBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9IHNpemU7XG4gICAgfTtcbiAgICByZXR1cm4gTFJVQ2FjaGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgTFJVQ2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MUlVDYWNoZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWNvb3JkXG4gKi9cbi8qKlxuICogQW4gYXJyYXkgb2YgdGhyZWUgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIGxvY2F0aW9uIG9mIGEgdGlsZSBpbiBhIHRpbGVcbiAqIGdyaWQuIFRoZSBvcmRlciBpcyBgemAgKHpvb20gbGV2ZWwpLCBgeGAgKGNvbHVtbiksIGFuZCBgeWAgKHJvdykuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gVGlsZUNvb3JkXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKHosIHgsIHksIG9wdF90aWxlQ29vcmQpIHtcbiAgICBpZiAob3B0X3RpbGVDb29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF90aWxlQ29vcmRbMF0gPSB6O1xuICAgICAgICBvcHRfdGlsZUNvb3JkWzFdID0geDtcbiAgICAgICAgb3B0X3RpbGVDb29yZFsyXSA9IHk7XG4gICAgICAgIHJldHVybiBvcHRfdGlsZUNvb3JkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFt6LCB4LCB5XTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5WlhZKHosIHgsIHkpIHtcbiAgICByZXR1cm4geiArICcvJyArIHggKyAnLycgKyB5O1xufVxuLyoqXG4gKiBHZXQgdGhlIGtleSBmb3IgYSB0aWxlIGNvb3JkLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaGUgdGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5KHRpbGVDb29yZCkge1xuICAgIHJldHVybiBnZXRLZXlaWFkodGlsZUNvb3JkWzBdLCB0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG59XG4vKipcbiAqIEdldCB0aGUgdGlsZSBjYWNoZSBrZXkgZm9yIGEgdGlsZSBrZXkgb2J0YWluZWQgdGhyb3VnaCBgdGlsZS5nZXRLZXkoKWAuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGlsZUtleSBUaGUgdGlsZSBrZXkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjYWNoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZUtleUZvclRpbGVLZXkodGlsZUtleSkge1xuICAgIHZhciBfYSA9IHRpbGVLZXlcbiAgICAgICAgLnN1YnN0cmluZyh0aWxlS2V5Lmxhc3RJbmRleE9mKCcvJykgKyAxLCB0aWxlS2V5Lmxlbmd0aClcbiAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgLm1hcChOdW1iZXIpLCB6ID0gX2FbMF0sIHggPSBfYVsxXSwgeSA9IF9hWzJdO1xuICAgIHJldHVybiBnZXRLZXlaWFkoeiwgeCwgeSk7XG59XG4vKipcbiAqIEdldCBhIHRpbGUgY29vcmQgZ2l2ZW4gYSBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSB0aWxlIGNvb3JkIGtleS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGhlIHRpbGUgY29vcmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tS2V5KGtleSkge1xuICAgIHJldHVybiBrZXkuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkLlxuICogQHJldHVybiB7bnVtYmVyfSBIYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzaCh0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gKHRpbGVDb29yZFsxXSA8PCB0aWxlQ29vcmRbMF0pICsgdGlsZUNvb3JkWzJdO1xufVxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7IWltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBjb29yZGluYXRlIGlzIHdpdGhpbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpIHtcbiAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICB2YXIgeCA9IHRpbGVDb29yZFsxXTtcbiAgICB2YXIgeSA9IHRpbGVDb29yZFsyXTtcbiAgICBpZiAodGlsZUdyaWQuZ2V0TWluWm9vbSgpID4geiB8fCB6ID4gdGlsZUdyaWQuZ2V0TWF4Wm9vbSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgaWYgKCF0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlLmNvbnRhaW5zWFkoeCwgeSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWNvb3JkLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVGlsZUNhY2hlXG4gKi9cbmltcG9ydCBMUlVDYWNoZSBmcm9tICcuL3N0cnVjdHMvTFJVQ2FjaGUuanMnO1xuaW1wb3J0IHsgZnJvbUtleSwgZ2V0S2V5IH0gZnJvbSAnLi90aWxlY29vcmQuanMnO1xudmFyIFRpbGVDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUNhY2hlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZUNhY2hlLnByb3RvdHlwZS5leHBpcmVDYWNoZSA9IGZ1bmN0aW9uICh1c2VkVGlsZXMpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLnBlZWtMYXN0KCk7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRLZXkoKSBpbiB1c2VkVGlsZXMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wKCkucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQcnVuZSBhbGwgdGlsZXMgZnJvbSB0aGUgY2FjaGUgdGhhdCBkb24ndCBoYXZlIHRoZSBzYW1lIHogYXMgdGhlIG5ld2VzdCB0aWxlLlxuICAgICAqL1xuICAgIFRpbGVDYWNoZS5wcm90b3R5cGUucHJ1bmVFeGNlcHROZXdlc3RaID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRDb3VudCgpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleSA9IHRoaXMucGVla0ZpcnN0S2V5KCk7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBmcm9tS2V5KGtleSk7XG4gICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgICAgIGlmICh0aWxlLnRpbGVDb29yZFswXSAhPT0geikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGdldEtleSh0aWxlLnRpbGVDb29yZCkpO1xuICAgICAgICAgICAgICAgIHRpbGUucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVDYWNoZTtcbn0oTFJVQ2FjaGUpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVDYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVDYWNoZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9Tb3VyY2VcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuL1N0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJy4uL3Byb2ouanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5GcmFtZVN0YXRlfSBhbmQgcmV0dXJucyBhIHN0cmluZyBvclxuICogYW4gYXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgc291cmNlIGF0dHJpYnV0aW9ucy5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGUpOiAoc3RyaW5nfEFycmF5PHN0cmluZz4pfSBBdHRyaWJ1dGlvblxuICovXG4vKipcbiAqIEEgdHlwZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYXR0cmlidXRpb24gaW5mb3JtYXRpb24gZm9yIGRhdGEgc291cmNlcy5cbiAqXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlclxuICogKiBhIHNpbXBsZSBzdHJpbmcgKGUuZy4gYCfCqSBBY21lIEluYy4nYClcbiAqICogYW4gYXJyYXkgb2Ygc2ltcGxlIHN0cmluZ3MgKGUuZy4gYFsnwqkgQWNtZSBJbmMuJywgJ8KpIEJhY21lIEluYy4nXWApXG4gKiAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgKHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0pXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ3xBcnJheTxzdHJpbmc+fEF0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbkxpa2VcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0F0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGU9J3JlYWR5J10gU3RhdGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV0gV3JhcFguXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Ige0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllcn0gc291cmNlcy5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0F0dHJpYnV0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zXyA9IGFkYXB0QXR0cmlidXRpb25zKG9wdGlvbnMuYXR0cmlidXRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZVxuICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuIFNvdXJjZXMgdGhhdCBkZWZlciBsb2FkaW5nIHRvIHRoZVxuICAgICAgICAgKiBtYXAncyB0aWxlIHF1ZXVlIG5ldmVyIHNldCB0aGlzIHRvIGB0cnVlYC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuc3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3RhdGUgOiBTb3VyY2VTdGF0ZS5SRUFEWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcFhfID0gb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYXR0cmlidXRpb24gZnVuY3Rpb24gZm9yIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbiBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBSZXNvbHV0aW9ucy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSwgc2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1N0YXRlflN0YXRlfSBmb3IgcG9zc2libGUgc3RhdGVzLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBXcmFwIFguXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRXcmFwWCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcFhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH0gQ29udGV4dCBvcHRpb25zLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0Q29udGV4dE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgdGhlIHNvdXJjZS4gVGhlIHNvdXJjZSB3aWxsIGJlIGNsZWFyZWQsIGFuZCBkYXRhIGZyb20gdGhlIHNlcnZlciB3aWxsIGJlIHJlbG9hZGVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBhdHRyaWJ1dGlvbnMgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9ucyBBdHRyaWJ1dGlvbnMuXG4gICAgICogICAgIENhbiBiZSBwYXNzZWQgYXMgYHN0cmluZ2AsIGBBcnJheTxzdHJpbmc+YCwge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufSxcbiAgICAgKiAgICAgb3IgYHVuZGVmaW5lZGAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuc2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gKGF0dHJpYnV0aW9ucykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbnMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBTb3VyY2U7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogVHVybnMgdGhlIGF0dHJpYnV0aW9ucyBvcHRpb24gaW50byBhbiBhdHRyaWJ1dGlvbnMgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9uTGlrZSBUaGUgYXR0cmlidXRpb24gb3B0aW9uLlxuICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBbiBhdHRyaWJ1dGlvbiBmdW5jdGlvbiAob3IgbnVsbCkuXG4gKi9cbmZ1bmN0aW9uIGFkYXB0QXR0cmlidXRpb25zKGF0dHJpYnV0aW9uTGlrZSkge1xuICAgIGlmICghYXR0cmlidXRpb25MaWtlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbkxpa2UpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGlvbkxpa2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBbYXR0cmlidXRpb25MaWtlXTtcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgU291cmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U291cmNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9UaWxlR3JpZFxuICovXG5pbXBvcnQgVGlsZVJhbmdlLCB7IGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlLCB9IGZyb20gJy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgeyBERUZBVUxUX1RJTEVfU0laRSB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlLCBnZXRUb3BMZWZ0IH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGlzU29ydGVkLCBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IHRvU2l6ZSB9IGZyb20gJy4uL3NpemUuanMnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gKi9cbnZhciB0bXBUaWxlQ29vcmQgPSBbMCwgMCwgMF07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBObyB0aWxlcyBvdXRzaWRlIHRoaXNcbiAqIGV4dGVudCB3aWxsIGJlIHJlcXVlc3RlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlfSBzb3VyY2VzLiBXaGVuIG5vIGBvcmlnaW5gIG9yXG4gKiBgb3JpZ2luc2AgYXJlIGNvbmZpZ3VyZWQsIHRoZSBgb3JpZ2luYCB3aWxsIGJlIHNldCB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcmlnaW5dIFRoZSB0aWxlIGdyaWQgb3JpZ2luLCBpLmUuIHdoZXJlIHRoZSBgeGBcbiAqIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCkuIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3RcbiAqIHNwZWNpZmllZCwgYGV4dGVudGAgb3IgYG9yaWdpbnNgIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IFtvcmlnaW5zXSBUaWxlIGdyaWQgb3JpZ2lucywgaS5lLiB3aGVyZVxuICogdGhlIGB4YCBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiBvcmlnaW4uIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3Qgc3BlY2lmaWVkLCBgZXh0ZW50YCBvclxuICogYG9yaWdpbmAgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IHJlc29sdXRpb25zIFJlc29sdXRpb25zLiBUaGUgYXJyYXkgaW5kZXggb2YgZWFjaCByZXNvbHV0aW9uIG5lZWRzXG4gKiB0byBtYXRjaCB0aGUgem9vbSBsZXZlbC4gVGhpcyBtZWFucyB0aGF0IGV2ZW4gaWYgYSBgbWluWm9vbWAgaXMgY29uZmlndXJlZCwgdGhlIHJlc29sdXRpb25zXG4gKiBhcnJheSB3aWxsIGhhdmUgYSBsZW5ndGggb2YgYG1heFpvb20gKyAxYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3NpemVzXSBOdW1iZXIgb2YgdGlsZSByb3dzIGFuZCBjb2x1bW5zXG4gKiBvZiB0aGUgZ3JpZCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBzcGVjaWZpZWQgdGhlIHZhbHVlc1xuICogZGVmaW5lIGVhY2ggem9vbSBsZXZlbCdzIGV4dGVudCB0b2dldGhlciB3aXRoIHRoZSBgb3JpZ2luYCBvciBgb3JpZ2luc2AuXG4gKiBBIGdyaWQgYGV4dGVudGAgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gYWRkaXRpb24sIGFuZCB3aWxsIGZ1cnRoZXIgbGltaXQgdGhlIGV4dGVudFxuICogZm9yIHdoaWNoIHRpbGUgcmVxdWVzdHMgYXJlIG1hZGUgYnkgc291cmNlcy4gSWYgdGhlIGJvdHRvbS1sZWZ0IGNvcm5lciBvZlxuICogYW4gZXh0ZW50IGlzIHVzZWQgYXMgYG9yaWdpbmAgb3IgYG9yaWdpbnNgLCB0aGVuIHRoZSBgeWAgdmFsdWUgbXVzdCBiZVxuICogbmVnYXRpdmUgYmVjYXVzZSBPcGVuTGF5ZXJzIHRpbGUgY29vcmRpbmF0ZXMgdXNlIHRoZSB0b3AgbGVmdCBhcyB0aGUgb3JpZ2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemVdIFRpbGUgc2l6ZS5cbiAqIERlZmF1bHQgaXMgYFsyNTYsIDI1Nl1gLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbdGlsZVNpemVzXSBUaWxlIHNpemVzLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiB0aWxlIHNpemUuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc2V0dGluZyB0aGUgZ3JpZCBwYXR0ZXJuIGZvciBzb3VyY2VzIGFjY2Vzc2luZyB0aWxlZC1pbWFnZVxuICogc2VydmVycy5cbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVHcmlkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBUaWxlIGdyaWQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlR3JpZChvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblpvb20gPSBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIGFzc2VydChpc1NvcnRlZCh0aGlzLnJlc29sdXRpb25zXywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiIC0gYTtcbiAgICAgICAgfSwgdHJ1ZSksIDE3KTsgLy8gYHJlc29sdXRpb25zYCBtdXN0IGJlIHNvcnRlZCBpbiBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlJ3ZlIGdvdCBhIGNvbnNpc3RlbnQgem9vbSBmYWN0b3IgYW5kIG9yaWdpblxuICAgICAgICB2YXIgem9vbUZhY3RvcjtcbiAgICAgICAgaWYgKCFvcHRpb25zLm9yaWdpbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF6b29tRmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXSAhPT0gem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuem9vbUZhY3Rvcl8gPSB6b29tRmFjdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhab29tID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbl8gPSBvcHRpb25zLm9yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcmlnaW4gOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbnNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMub3JpZ2lucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbnNfID0gb3B0aW9ucy5vcmlnaW5zO1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub3JpZ2luc18ubGVuZ3RoID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCwgMjApOyAvLyBOdW1iZXIgb2YgYG9yaWdpbnNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG4gICAgICAgIGlmIChleHRlbnQgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbl8gPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KCghdGhpcy5vcmlnaW5fICYmIHRoaXMub3JpZ2luc18pIHx8ICh0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pLCAxOCk7IC8vIEVpdGhlciBgb3JpZ2luYCBvciBgb3JpZ2luc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplc18gPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy50aWxlU2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy50aWxlU2l6ZXNfID0gb3B0aW9ucy50aWxlU2l6ZXM7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy50aWxlU2l6ZXNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDE5KTsgLy8gTnVtYmVyIG9mIGB0aWxlU2l6ZXNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVTaXplICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMudGlsZVNpemVcbiAgICAgICAgICAgICAgICA6ICF0aGlzLnRpbGVTaXplc19cbiAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX1RJTEVfU0laRVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGFzc2VydCgoIXRoaXMudGlsZVNpemVfICYmIHRoaXMudGlsZVNpemVzXykgfHxcbiAgICAgICAgICAgICh0aGlzLnRpbGVTaXplXyAmJiAhdGhpcy50aWxlU2l6ZXNfKSwgMjIpOyAvLyBFaXRoZXIgYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGhcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHRlbnRfID0gZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBleHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRtcFNpemVfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRtcEV4dGVudF8gPSBbMCwgMCwgMCwgMF07XG4gICAgICAgIGlmIChvcHRpb25zLnNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gb3B0aW9ucy5zaXplcy5tYXAoZnVuY3Rpb24gKHNpemUsIHopIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZVJhbmdlID0gbmV3IFRpbGVSYW5nZShNYXRoLm1pbigwLCBzaXplWzBdKSwgTWF0aC5tYXgoc2l6ZVswXSAtIDEsIC0xKSwgTWF0aC5taW4oMCwgc2l6ZVsxXSksIE1hdGgubWF4KHNpemVbMV0gLSAxLCAtMSkpO1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3RyaWN0ZWRUaWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1pblggPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblgsIHRpbGVSYW5nZS5taW5YKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1heFggPSBNYXRoLm1pbihyZXN0cmljdGVkVGlsZVJhbmdlLm1heFgsIHRpbGVSYW5nZS5tYXhYKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1pblkgPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblksIHRpbGVSYW5nZS5taW5ZKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1heFkgPSBNYXRoLm1pbihyZXN0cmljdGVkVGlsZVJhbmdlLm1heFksIHRpbGVSYW5nZS5tYXhZKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbGVSYW5nZTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dGVudCkge1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVUaWxlUmFuZ2VzXyhleHRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgYSBmdW5jdGlvbiB3aXRoIGVhY2ggdGlsZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIGV4dGVudCBhbmQgem9vbSBsZXZlbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkKTogdm9pZH0gY2FsbGJhY2sgRnVuY3Rpb24gY2FsbGVkIHdpdGggZWFjaCB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5mb3JFYWNoVGlsZUNvb3JkID0gZnVuY3Rpb24gKGV4dGVudCwgem9vbSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVSYW5nZSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHpvb20pO1xuICAgICAgICBmb3IgKHZhciBpID0gdGlsZVJhbmdlLm1pblgsIGlpID0gdGlsZVJhbmdlLm1heFg7IGkgPD0gaWk7ICsraSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IHRpbGVSYW5nZS5taW5ZLCBqaiA9IHRpbGVSYW5nZS5tYXhZOyBqIDw9IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhbem9vbSwgaSwgal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gW29wdF90aWxlUmFuZ2VdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIGNhbGxiYWNrLCBvcHRfdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UsIHgsIHk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXSAtIDE7XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfID09PSAyKSB7XG4gICAgICAgICAgICB4ID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICAgICAgeSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHogPj0gdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHggPSBNYXRoLmZsb29yKHggLyAyKTtcbiAgICAgICAgICAgICAgICB5ID0gTWF0aC5mbG9vcih5IC8gMik7XG4gICAgICAgICAgICAgICAgdGlsZVJhbmdlID0gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoeCwgeCwgeSwgeSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjayh6LCB0aWxlUmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLXo7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLCBpZiBpdCB3YXMgY29uZmlndXJlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNYXggem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW4gem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gT3JpZ2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbnNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3pdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIHJlc29sdXRpb25zIGZvciB0aGUgdGlsZSBncmlkLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbb3B0X3RpbGVSYW5nZV0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfZXh0ZW50XSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgb3B0X3RpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICBpZiAodGlsZUNvb3JkWzBdIDwgdGhpcy5tYXhab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdICogMjtcbiAgICAgICAgICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXSAqIDI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1pblggKyAxLCBtaW5ZLCBtaW5ZICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGlsZUNvb3JkRXh0ZW50ID0gdGhpcy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCBvcHRfZXh0ZW50IHx8IHRoaXMudG1wRXh0ZW50Xyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRpbGVDb29yZEV4dGVudCwgdGlsZUNvb3JkWzBdICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlUmFuZ2VGb3JUaWxlQ29vcmRBbmRaID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgeiwgb3B0X3RpbGVSYW5nZSkge1xuICAgICAgICBpZiAoeiA+IHRoaXMubWF4Wm9vbSB8fCB6IDwgdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZUNvb3JkWiA9IHRpbGVDb29yZFswXTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFggPSB0aWxlQ29vcmRbMV07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gdGlsZUNvb3JkWzJdO1xuICAgICAgICBpZiAoeiA9PT0gdGlsZUNvb3JkWikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHRpbGVDb29yZFgsIHRpbGVDb29yZFksIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfKSB7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgeiAtIHRpbGVDb29yZFopO1xuICAgICAgICAgICAgdmFyIG1pblggPSBNYXRoLmZsb29yKHRpbGVDb29yZFggKiBmYWN0b3IpO1xuICAgICAgICAgICAgdmFyIG1pblkgPSBNYXRoLmZsb29yKHRpbGVDb29yZFkgKiBmYWN0b3IpO1xuICAgICAgICAgICAgaWYgKHogPCB0aWxlQ29vcmRaKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1pblgsIG1pblksIG1pblksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1heFggPSBNYXRoLmZsb29yKGZhY3RvciAqICh0aWxlQ29vcmRYICsgMSkpIC0gMTtcbiAgICAgICAgICAgIHZhciBtYXhZID0gTWF0aC5mbG9vcihmYWN0b3IgKiAodGlsZUNvb3JkWSArIDEpKSAtIDE7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGhpcy50bXBFeHRlbnRfKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHosIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIGEgdGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZVJhbmdlRXh0ZW50ID0gZnVuY3Rpb24gKHosIHRpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG4gICAgICAgIHZhciBtaW5YID0gb3JpZ2luWzBdICsgdGlsZVJhbmdlLm1pblggKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhYID0gb3JpZ2luWzBdICsgKHRpbGVSYW5nZS5tYXhYICsgMSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtaW5ZID0gb3JpZ2luWzFdICsgdGlsZVJhbmdlLm1pblkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhZID0gb3JpZ2luWzFdICsgKHRpbGVSYW5nZS5tYXhZICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHRpbGUgcmFuZ2UgZm9yIHRoZSBnaXZlbiBleHRlbnQgYW5kIGludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgdGlsZSByYW5nZSBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFogPSBmdW5jdGlvbiAoZXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSB0bXBUaWxlQ29vcmQ7XG4gICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMF0sIGV4dGVudFszXSwgeiwgZmFsc2UsIHRpbGVDb29yZCk7XG4gICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFsyXSwgZXh0ZW50WzFdLCB6LCB0cnVlLCB0aWxlQ29vcmQpO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgdGlsZUNvb3JkWzFdLCBtaW5ZLCB0aWxlQ29vcmRbMl0sIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGlsZSBjZW50ZXIuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENlbnRlciA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb3JpZ2luWzBdICsgKHRpbGVDb29yZFsxXSArIDAuNSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb24sXG4gICAgICAgICAgICBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMC41KSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbixcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIGEgdGlsZSBjb29yZGluYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIFRlbXBvcmFyeSBleHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEV4dGVudCA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgbWluWCA9IG9yaWdpblswXSArIHRpbGVDb29yZFsxXSAqIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1pblkgPSBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhYID0gbWluWCArIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1heFkgPSBtaW5ZICsgdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhlIGdpdmVuIG1hcCBjb29yZGluYXRlIGFuZCByZXNvbHV0aW9uLiAgVGhpc1xuICAgICAqIG1ldGhvZCBjb25zaWRlcnMgdGhhdCBjb29yZGluYXRlcyB0aGF0IGludGVyc2VjdCB0aWxlIGJvdW5kYXJpZXMgc2hvdWxkIGJlXG4gICAgICogYXNzaWduZWQgdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyhjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCByZXNvbHV0aW9uLCBmYWxzZSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZm9yIHJlc29sdXRpb25zIHRoYXQgY29ycmVzcG9uZFxuICAgICAqIHRvIGFuIGludGVnZXIgem9vbSBsZXZlbC4gIEluc3RlYWQgY2FsbCB0aGUgYGdldFRpbGVDb29yZEZvclhZQW5kWl9gIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiAoZm9yIGEgbm9uLWludGVnZXIgem9vbSBsZXZlbCkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8gPSBmdW5jdGlvbiAoeCwgeSwgcmVzb2x1dGlvbiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICB2YXIgeiA9IHRoaXMuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzY2FsZSA9IHJlc29sdXRpb24gLyB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgYWRqdXN0WCA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgYWRqdXN0WSA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgeEZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RYKTtcbiAgICAgICAgdmFyIHlGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigob3JpZ2luWzFdIC0geSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WSk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRYID0gKHNjYWxlICogeEZyb21PcmlnaW4pIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gKHNjYWxlICogeUZyb21PcmlnaW4pIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5jZWlsKHRpbGVDb29yZFgpIC0gMTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbHRob3VnaCB0aGVyZSBpcyByZXBldGl0aW9uIGJldHdlZW4gdGhpcyBtZXRob2QgYW5kIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fYCxcbiAgICAgKiB0aGV5IHNob3VsZCBoYXZlIHNlcGFyYXRlIGltcGxlbWVudGF0aW9ucy4gIFRoaXMgbWV0aG9kIGlzIGZvciBpbnRlZ2VyIHpvb21cbiAgICAgKiBsZXZlbHMuICBUaGUgb3RoZXIgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgY29ycmVzcG9uZGluZ1xuICAgICAqIHRvIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IE1hcCB4IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgTWFwIHkgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kWl8gPSBmdW5jdGlvbiAoeCwgeSwgeiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG4gICAgICAgIHZhciBhZGp1c3RYID0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSA/IDAuNSA6IDA7XG4gICAgICAgIHZhciBhZGp1c3RZID0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSA/IDAuNSA6IDA7XG4gICAgICAgIHZhciB4RnJvbU9yaWdpbiA9IE1hdGguZmxvb3IoKHggLSBvcmlnaW5bMF0pIC8gcmVzb2x1dGlvbiArIGFkanVzdFgpO1xuICAgICAgICB2YXIgeUZyb21PcmlnaW4gPSBNYXRoLmZsb29yKChvcmlnaW5bMV0gLSB5KSAvIHJlc29sdXRpb24gKyBhZGp1c3RZKTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFggPSB4RnJvbU9yaWdpbiAvIHRpbGVTaXplWzBdO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWSA9IHlGcm9tT3JpZ2luIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5jZWlsKHRpbGVDb29yZFgpIC0gMTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB0aWxlIGNvb3JkaW5hdGUgZ2l2ZW4gYSBtYXAgY29vcmRpbmF0ZSBhbmQgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHosIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCB6LCBmYWxzZSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZFJlc29sdXRpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t0aWxlQ29vcmRbMF1dO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIHNpemUgZm9yIGEgem9vbSBsZXZlbC4gVGhlIHR5cGUgb2YgdGhlIHJldHVybiB2YWx1ZSBtYXRjaGVzIHRoZVxuICAgICAqIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgdGhhdCB0aGUgdGlsZSBncmlkIHdhcyBjb25maWd1cmVkIHdpdGguIFRvIGFsd2F5c1xuICAgICAqIGdldCBhbiBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplYCwgcnVuIHRoZSByZXN1bHQgdGhyb3VnaCBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplLnRvU2l6ZSgpYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgICAqIEByZXR1cm4ge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVTaXplID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMudGlsZVNpemVfKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZXNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBFeHRlbnQgdGlsZSByYW5nZSBmb3IgdGhlIHNwZWNpZmllZCB6b29tIGxldmVsLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRGdWxsVGlsZVJhbmdlID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKCF0aGlzLmZ1bGxUaWxlUmFuZ2VzXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50X1xuICAgICAgICAgICAgICAgID8gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRoaXMuZXh0ZW50XywgeilcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mdWxsVGlsZVJhbmdlc19bel07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbb3B0X2RpcmVjdGlvbl1cbiAgICAgKiAgICAgSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogICAgIElmIDEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIChsb3dlciBaKSB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGVcbiAgICAgKiAgICAgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uIChoaWdoZXIgWikgd2lsbCBiZSB1c2VkLiBEZWZhdWx0IGlzIDAuXG4gICAgICogICAgIFVzZSBhIHtAbGluayBtb2R1bGU6b2wvYXJyYXl+TmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBmb3IgbW9yZSBwcmVjaXNlIGNvbnRyb2wuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSB0byBjaGFuZ2UgdGlsZSBaIGF0IHRoZSBtaWRwb2ludCBvZiB6b29tIGxldmVsc1xuICAgICAqIGBgYGpzXG4gICAgICogZnVuY3Rpb24odmFsdWUsIGhpZ2gsIGxvdykge1xuICAgICAqICAgcmV0dXJuIHZhbHVlIC0gbG93ICogTWF0aC5zcXJ0KGhpZ2ggLyBsb3cpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFouXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRaRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciB6ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24gfHwgMCk7XG4gICAgICAgIHJldHVybiBjbGFtcCh6LCB0aGlzLm1pblpvb20sIHRoaXMubWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5jYWxjdWxhdGVUaWxlUmFuZ2VzXyA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aDtcbiAgICAgICAgdmFyIGZ1bGxUaWxlUmFuZ2VzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIHogPSB0aGlzLm1pblpvb207IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgICAgICAgZnVsbFRpbGVSYW5nZXNbel0gPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IGZ1bGxUaWxlUmFuZ2VzO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVHcmlkO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVHcmlkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUdyaWQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkXG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBUaWxlR3JpZCBmcm9tICcuL3RpbGVncmlkL1RpbGVHcmlkLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9NQVhfWk9PTSwgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlT3JVcGRhdGUsIGdldENvcm5lciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuL3NpemUuanMnO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gRGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZVxuICogcGFzc2VkIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGlsZUdyaWQgPSBwcm9qZWN0aW9uLmdldERlZmF1bHRUaWxlR3JpZCgpO1xuICAgIGlmICghdGlsZUdyaWQpIHtcbiAgICAgICAgdGlsZUdyaWQgPSBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBwcm9qZWN0aW9uLnNldERlZmF1bHRUaWxlR3JpZCh0aWxlR3JpZCk7XG4gICAgfVxuICAgIHJldHVybiB0aWxlR3JpZDtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlR3JpZH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbikge1xuICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgIHZhciBjZW50ZXIgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZUNvb3JkKTtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGlmICghY29udGFpbnNDb29yZGluYXRlKHByb2plY3Rpb25FeHRlbnQsIGNlbnRlcikpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmNlaWwoKHByb2plY3Rpb25FeHRlbnRbMF0gLSBjZW50ZXJbMF0pIC8gd29ybGRXaWR0aCk7XG4gICAgICAgIGNlbnRlclswXSArPSB3b3JsZFdpZHRoICogd29ybGRzQXdheTtcbiAgICAgICAgcmV0dXJuIHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjZW50ZXIsIHopO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRpbGVDb29yZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF90aWxlU2l6ZV0gVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBbb3B0X2Nvcm5lcl0gRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgY29ybmVyID0gb3B0X2Nvcm5lciAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvcm5lciA6IENvcm5lci5UT1BfTEVGVDtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplKTtcbiAgICByZXR1cm4gbmV3IFRpbGVHcmlkKHtcbiAgICAgICAgZXh0ZW50OiBleHRlbnQsXG4gICAgICAgIG9yaWdpbjogZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zLFxuICAgICAgICB0aWxlU2l6ZTogb3B0X3RpbGVTaXplLFxuICAgIH0pO1xufVxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBYWVpPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBUaGUgb3JpZ2luIGZvciBhbiBYWVogdGlsZSBncmlkIGlzIHRoZVxuICogdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuIElmIGBtYXhSZXNvbHV0aW9uYCBpcyBub3QgcHJvdmlkZWQgdGhlIHplcm8gbGV2ZWwgb2YgdGhlIGdyaWQgaXMgZGVmaW5lZCBieSB0aGUgcmVzb2x1dGlvblxuICogYXQgd2hpY2ggb25lIHRpbGUgZml0cyBpbiB0aGUgcHJvdmlkZWQgZXh0ZW50LiBJZiBub3QgcHJvdmlkZWQsIHRoZSBleHRlbnQgb2YgdGhlIEVQU0c6Mzg1NyBwcm9qZWN0aW9uIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tLiBUaGUgZGVmYXVsdCBpcyBgNDJgLiBUaGlzIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBsZXZlbHNcbiAqIGluIHRoZSBncmlkIHNldC4gRm9yIGV4YW1wbGUsIGEgYG1heFpvb21gIG9mIDIxIG1lYW5zIHRoZXJlIGFyZSAyMiBsZXZlbHMgaW4gdGhlIGdyaWQgc2V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGlsZSBzaXplIGluIHBpeGVscy5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdGlsZSBncmlkIHdpdGggYSBzdGFuZGFyZCBYWVogdGlsaW5nIHNjaGVtZS5cbiAqIEBwYXJhbSB7WFlaT3B0aW9uc30gW29wdF9vcHRpb25zXSBUaWxlIGdyaWQgb3B0aW9ucy5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZSBncmlkIGluc3RhbmNlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWFlaKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIHh5ek9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZXh0ZW50ID0geHl6T3B0aW9ucy5leHRlbnQgfHwgZ2V0UHJvamVjdGlvbignRVBTRzozODU3JykuZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGdyaWRPcHRpb25zID0ge1xuICAgICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgICAgbWluWm9vbTogeHl6T3B0aW9ucy5taW5ab29tLFxuICAgICAgICB0aWxlU2l6ZTogeHl6T3B0aW9ucy50aWxlU2l6ZSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIHh5ek9wdGlvbnMubWF4Wm9vbSwgeHl6T3B0aW9ucy50aWxlU2l6ZSwgeHl6T3B0aW9ucy5tYXhSZXNvbHV0aW9uKSxcbiAgICB9O1xuICAgIHJldHVybiBuZXcgVGlsZUdyaWQoZ3JpZE9wdGlvbnMpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSByZXNvbHV0aW9ucyBhcnJheSBmcm9tIGFuIGV4dGVudC4gIEEgem9vbSBmYWN0b3Igb2YgMiBpcyBhc3N1bWVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9tYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEByZXR1cm4geyFBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucyBhcnJheS5cbiAqL1xuZnVuY3Rpb24gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X21heFJlc29sdXRpb24pIHtcbiAgICB2YXIgbWF4Wm9vbSA9IG9wdF9tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRfbWF4Wm9vbSA6IERFRkFVTFRfTUFYX1pPT007XG4gICAgdmFyIGhlaWdodCA9IGdldEhlaWdodChleHRlbnQpO1xuICAgIHZhciB3aWR0aCA9IGdldFdpZHRoKGV4dGVudCk7XG4gICAgdmFyIHRpbGVTaXplID0gdG9TaXplKG9wdF90aWxlU2l6ZSAhPT0gdW5kZWZpbmVkID8gb3B0X3RpbGVTaXplIDogREVGQVVMVF9USUxFX1NJWkUpO1xuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gb3B0X21heFJlc29sdXRpb24gPiAwXG4gICAgICAgID8gb3B0X21heFJlc29sdXRpb25cbiAgICAgICAgOiBNYXRoLm1heCh3aWR0aCAvIHRpbGVTaXplWzBdLCBoZWlnaHQgLyB0aWxlU2l6ZVsxXSk7XG4gICAgdmFyIGxlbmd0aCA9IG1heFpvb20gKyAxO1xuICAgIHZhciByZXNvbHV0aW9ucyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIHogPSAwOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICAgICAgcmVzb2x1dGlvbnNbel0gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coMiwgeik7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHV0aW9ucztcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfdGlsZVNpemVdIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC9Db3JuZXIuanNcIikuZGVmYXVsdH0gW29wdF9jb3JuZXJdIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24sIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgZXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgcmV0dXJuIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHRpbGUgZ3JpZCBleHRlbnQgZnJvbSBhIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBoYXMgYW5cbiAqIGV4dGVudCwgaXQgaXMgdXNlZC4gIElmIG5vdCwgYSBnbG9iYWwgZXh0ZW50IGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgcHJvamVjdGlvbiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgaWYgKCFleHRlbnQpIHtcbiAgICAgICAgdmFyIGhhbGYgPSAoMTgwICogTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdKSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZSgtaGFsZiwgLWhhbGYsIGhhbGYsIGhhbGYpO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWdyaWQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZVxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBTb3VyY2UgZnJvbSAnLi9Tb3VyY2UuanMnO1xuaW1wb3J0IFRpbGVDYWNoZSBmcm9tICcuLi9UaWxlQ2FjaGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgZXF1aXZhbGVudCB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0S2V5WlhZLCB3aXRoaW5FeHRlbnRBbmRaIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLCB3cmFwWCwgfSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5pbXBvcnQgeyBzY2FsZSBhcyBzY2FsZVNpemUsIHRvU2l6ZSB9IGZyb20gJy4uL3NpemUuanMnO1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vVGlsZUV2ZW50VHlwZVwiKS5UaWxlU291cmNlRXZlbnRUeXBlcywgVGlsZVNvdXJjZUV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgaW1wb3J0KFwiLi9UaWxlRXZlbnRUeXBlXCIpLlRpbGVTb3VyY2VFdmVudFR5cGVzLCBSZXR1cm4+fSBUaWxlU291cmNlT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBDYWNoZVNpemUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW9dIFRpbGVQaXhlbFJhdGlvLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFN0YXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGVHcmlkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIFRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gS2V5LlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXSBaRGlyZWN0aW9uLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZVRpbGUgc291cmNlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1RpbGVTb3VyY2VPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3BhcXVlXyA9IG9wdGlvbnMub3BhcXVlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYXF1ZSA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVQaXhlbFJhdGlvXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVQaXhlbFJhdGlvICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVQaXhlbFJhdGlvIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlR3JpZCA9IG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUdyaWQgOiBudWxsO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSBbMjU2LCAyNTZdO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkO1xuICAgICAgICBpZiAodGlsZUdyaWQpIHtcbiAgICAgICAgICAgIHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh0aWxlR3JpZC5nZXRNaW5ab29tKCkpLCB0aWxlU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNhY2hlID0gbmV3IFRpbGVDYWNoZShvcHRpb25zLmNhY2hlU2l6ZSB8fCAwKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcFNpemUgPSBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5XyA9IG9wdGlvbnMua2V5IHx8ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5PcHRpb25zfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZU9wdGlvbnMgPSB7IHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogekRpcmVjdGlvbiBoaW50LCByZWFkIGJ5IHRoZSByZW5kZXJlci4gSW5kaWNhdGVzIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgICAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlld3MgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICAgICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy56RGlyZWN0aW9uID0gb3B0aW9ucy56RGlyZWN0aW9uID8gb3B0aW9ucy56RGlyZWN0aW9uIDogMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh1c2VkVGlsZXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk6KGJvb2xlYW58dm9pZCl9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2hcbiAgICAgKiAgICAgbG9hZGVkIHRpbGUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZVxuICAgICAqICAgICBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBjb3ZlcmVkIHdpdGggbG9hZGVkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmZvckVhY2hMb2FkZWRUaWxlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHosIHRpbGVSYW5nZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKCF0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY292ZXJlZCA9IHRydWU7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlQ29vcmRLZXksIGxvYWRlZDtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICAgICAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gdGlsZS5nZXRTdGF0ZSgpID09PSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSBjYWxsYmFjayh0aWxlKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY292ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBrZXkgZm9yIGFsbCB0aWxlcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSB0byBiZSB1c2VkIGFzIHRoZSBrZXkgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBmb3IgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnNldEtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMua2V5XyAhPT0ga2V5KSB7XG4gICAgICAgICAgICB0aGlzLmtleV8gPSBrZXk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGFxdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkLmdldFJlc29sdXRpb25zKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgZ3JpZCBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMudGlsZUdyaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgYXNzZXJ0KGVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pLCA2OCAvLyBBIFZlY3RvclRpbGUgc291cmNlIGNhbiBvbmx5IGJlIHJlbmRlcmVkIGlmIGl0IGhhcyBhIHByb2plY3Rpb24gY29tcGF0aWJsZSB3aXRoIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBwaXhlbCByYXRpbyBmb3IgdGhpcyBzb3VyY2UuIFN1YmNsYXNzZXMgbWF5IG92ZXJyaWRlIHRoaXNcbiAgICAgKiBtZXRob2QsIHdoaWNoIGlzIG1lYW50IHRvIHJldHVybiBhIHN1cHBvcnRlZCBwaXhlbCByYXRpbyB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcHJvdmlkZWQgYHBpeGVsUmF0aW9gIGFzIGNsb3NlIGFzIHBvc3NpYmxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlUGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVQaXhlbFJhdGlvXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gVGlsZSBzaXplLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVQaXhlbFNpemUgPSBmdW5jdGlvbiAoeiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVQaXhlbFJhdGlvID0gdGhpcy5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRpbGVHcmlkLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemUpO1xuICAgICAgICBpZiAodGlsZVBpeGVsUmF0aW8gPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRpbGVTaXplO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNjYWxlU2l6ZSh0aWxlU2l6ZSwgdGlsZVBpeGVsUmF0aW8sIHRoaXMudG1wU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB0aWxlIGNvb3JkaW5hdGUgd3JhcHBlZCBhcm91bmQgdGhlIHgtYXhpcy4gV2hlbiB0aGUgdGlsZSBjb29yZGluYXRlXG4gICAgICogaXMgb3V0c2lkZSB0aGUgcmVzb2x1dGlvbiBhbmQgZXh0ZW50IHJhbmdlIG9mIHRoZSB0aWxlIGdyaWQsIGBudWxsYCB3aWxsIGJlXG4gICAgICogcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFtvcHRfcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUgdG8gYmUgcGFzc2VkIHRvIHRoZSB0aWxlVXJsRnVuY3Rpb24gb3JcbiAgICAgKiAgICAgbnVsbCBpZiBubyB0aWxlIFVSTCBzaG91bGQgYmUgY3JlYXRlZCBmb3IgdGhlIHBhc3NlZCBgdGlsZUNvb3JkYC5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBvcHRfcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IG9wdF9wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfcHJvamVjdGlvbiA6IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0V3JhcFgoKSAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgICAgIHRpbGVDb29yZCA9IHdyYXBYKHRpbGVHcmlkLCB0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpID8gdGlsZUNvb3JkIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgY2FjaGVkIHRpbGVzIGZyb20gdGhlIHNvdXJjZS4gVGhlIG5leHQgcmVuZGVyIGN5Y2xlIHdpbGwgZmV0Y2ggbmV3IHRpbGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICB9O1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbmNyZWFzZXMgdGhlIGNhY2hlIHNpemUgaWYgbmVlZGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVDb3VudCBNaW5pbXVtIG51bWJlciBvZiB0aWxlcyBuZWVkZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnVwZGF0ZUNhY2hlU2l6ZSA9IGZ1bmN0aW9uICh0aWxlQ291bnQsIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRpbGVDb3VudCA+IHRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgICAgICAgICB0aWxlQ2FjaGUuaGlnaFdhdGVyTWFyayA9IHRpbGVDb3VudDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFya3MgYSB0aWxlIGNvb3JkIGFzIGJlaW5nIHVzZWQsIHdpdGhvdXQgdHJpZ2dlcmluZyBhIGxvYWQuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcHJvamVjdGlvbikgeyB9O1xuICAgIHJldHVybiBUaWxlU291cmNlO1xufShTb3VyY2UpKTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlU291cmNlfSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG52YXIgVGlsZVNvdXJjZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlU291cmNlRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaGUgdGlsZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbGUgcmVsYXRlZCB0byB0aGUgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGUgPSB0aWxlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBUaWxlU291cmNlRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBUaWxlU291cmNlRXZlbnQgfTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVTb3VyY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxldXJsZnVuY3Rpb25cbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBoYXNoIGFzIHRpbGVDb29yZEhhc2ggfSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBUZW1wbGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCB0aWxlR3JpZCkge1xuICAgIHZhciB6UmVnRXggPSAvXFx7elxcfS9nO1xuICAgIHZhciB4UmVnRXggPSAvXFx7eFxcfS9nO1xuICAgIHZhciB5UmVnRXggPSAvXFx7eVxcfS9nO1xuICAgIHZhciBkYXNoWVJlZ0V4ID0gL1xcey15XFx9L2c7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoelJlZ0V4LCB0aWxlQ29vcmRbMF0udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSh4UmVnRXgsIHRpbGVDb29yZFsxXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHlSZWdFeCwgdGlsZUNvb3JkWzJdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoZGFzaFlSZWdFeCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHJhbmdlLCA1NSk7IC8vIFRoZSB7LXl9IHBsYWNlaG9sZGVyIHJlcXVpcmVzIGEgdGlsZSBncmlkIHdpdGggZXh0ZW50XG4gICAgICAgICAgICAgICAgdmFyIHkgPSByYW5nZS5nZXRIZWlnaHQoKSAtIHRpbGVDb29yZFsyXSAtIDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdGVtcGxhdGVzIFRlbXBsYXRlcy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlcyh0ZW1wbGF0ZXMsIHRpbGVHcmlkKSB7XG4gICAgdmFyIGxlbiA9IHRlbXBsYXRlcy5sZW5ndGg7XG4gICAgdmFyIHRpbGVVcmxGdW5jdGlvbnMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHRpbGVVcmxGdW5jdGlvbnNbaV0gPSBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGVzW2ldLCB0aWxlR3JpZCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb24+fSB0aWxlVXJsRnVuY3Rpb25zIFRpbGUgVVJMIEZ1bmN0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKSB7XG4gICAgaWYgKHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aWxlQ29vcmQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaCA9IHRpbGVDb29yZEhhc2godGlsZUNvb3JkKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IG1vZHVsbyhoLCB0aWxlVXJsRnVuY3Rpb25zLmxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gdGlsZVVybEZ1bmN0aW9uc1tpbmRleF0odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bGxUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBcnJheSBvZiB1cmxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVXJsKHVybCkge1xuICAgIHZhciB1cmxzID0gW107XG4gICAgdmFyIG1hdGNoID0gL1xceyhbYS16XSktKFthLXpdKVxcfS8uZXhlYyh1cmwpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgICAvLyBjaGFyIHJhbmdlXG4gICAgICAgIHZhciBzdGFydENoYXJDb2RlID0gbWF0Y2hbMV0uY2hhckNvZGVBdCgwKTtcbiAgICAgICAgdmFyIHN0b3BDaGFyQ29kZSA9IG1hdGNoWzJdLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHZhciBjaGFyQ29kZSA9IHZvaWQgMDtcbiAgICAgICAgZm9yIChjaGFyQ29kZSA9IHN0YXJ0Q2hhckNvZGU7IGNoYXJDb2RlIDw9IHN0b3BDaGFyQ29kZTsgKytjaGFyQ29kZSkge1xuICAgICAgICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKG1hdGNoWzBdLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmxzO1xuICAgIH1cbiAgICBtYXRjaCA9IC9cXHsoXFxkKyktKFxcZCspXFx9Ly5leGVjKHVybCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIC8vIG51bWJlciByYW5nZVxuICAgICAgICB2YXIgc3RvcF8xID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7IGkgPD0gc3RvcF8xOyBpKyspIHtcbiAgICAgICAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgaS50b1N0cmluZygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybHM7XG4gICAgfVxuICAgIHVybHMucHVzaCh1cmwpO1xuICAgIHJldHVybiB1cmxzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZXVybGZ1bmN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1VybFRpbGVcbiAqL1xuaW1wb3J0IFRpbGVFdmVudFR5cGUgZnJvbSAnLi9UaWxlRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlU291cmNlLCB7IFRpbGVTb3VyY2VFdmVudCB9IGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVGcm9tVGVtcGxhdGVzLCBleHBhbmRVcmwgfSBmcm9tICcuLi90aWxldXJsZnVuY3Rpb24uanMnO1xuaW1wb3J0IHsgZ2V0S2V5WlhZIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBDYWNoZSBzaXplLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV0gU3RhdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZUdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGVMb2FkRnVuY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvXSBUaWxlUGl4ZWxSYXRpby5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gVGlsZVVybEZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVybC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIFVybHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXcmFwWC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gVHJhbnNpdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBLZXkuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdIFpEaXJlY3Rpb24uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgdGlsZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkIG92ZXIgaHR0cC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICovXG52YXIgVXJsVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVXJsVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFVybFRpbGUob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgICAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fID1cbiAgICAgICAgICAgIF90aGlzLnRpbGVVcmxGdW5jdGlvbiA9PT0gVXJsVGlsZS5wcm90b3R5cGUudGlsZVVybEZ1bmN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uO1xuICAgICAgICBpZiAob3B0aW9ucy50aWxlVXJsRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIF90aGlzLnRpbGVVcmxGdW5jdGlvbiA9IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8c3RyaW5nPnxudWxsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXJscyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLnVybHMpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFVybHMob3B0aW9ucy51cmxzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnVybCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0VXJsKG9wdGlvbnMudXJsKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVMb2FkaW5nS2V5c18gPSB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBUaWxlTG9hZEZ1bmN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVMb2FkRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVMb2FkRnVuY3Rpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZVVybEZ1bmN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS50aWxlVXJsRnVuY3Rpb24gPT09IHRoaXMudGlsZVVybEZ1bmN0aW9uXG4gICAgICAgICAgICA/IHRoaXMudGlsZVVybEZ1bmN0aW9uLmJpbmQodGhpcylcbiAgICAgICAgICAgIDogdGhpcy50aWxlVXJsRnVuY3Rpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIFVSTHMgdXNlZCBmb3IgdGhpcyBzb3VyY2UuXG4gICAgICogV2hlbiBhIHRpbGVVcmxGdW5jdGlvbiBpcyB1c2VkIGluc3RlYWQgb2YgdXJsIG9yIHVybHMsXG4gICAgICogbnVsbCB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fG51bGx9IFVSTHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFVybHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVybHM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGlsZSBjaGFuZ2UgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRpbGUpO1xuICAgICAgICB2YXIgdGlsZVN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgaWYgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgdGhpcy50aWxlTG9hZGluZ0tleXNfW3VpZF0gPSB0cnVlO1xuICAgICAgICAgICAgdHlwZSA9IFRpbGVFdmVudFR5cGUuVElMRUxPQURTVEFSVDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1aWQgaW4gdGhpcy50aWxlTG9hZGluZ0tleXNfKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50aWxlTG9hZGluZ0tleXNfW3VpZF07XG4gICAgICAgICAgICB0eXBlID1cbiAgICAgICAgICAgICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SXG4gICAgICAgICAgICAgICAgICAgID8gVGlsZUV2ZW50VHlwZS5USUxFTE9BREVSUk9SXG4gICAgICAgICAgICAgICAgICAgIDogdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5MT0FERURcbiAgICAgICAgICAgICAgICAgICAgICAgID8gVGlsZUV2ZW50VHlwZS5USUxFTE9BREVORFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFRpbGVTb3VyY2VFdmVudCh0eXBlLCB0aWxlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGlsZSBsb2FkIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvbiBUaWxlIGxvYWQgZnVuY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnNldFRpbGVMb2FkRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUxvYWRGdW5jdGlvbikge1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5jbGVhcigpO1xuICAgICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb24gPSB0aWxlTG9hZEZ1bmN0aW9uO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGlsZSBVUkwgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IHRpbGVVcmxGdW5jdGlvbiBUaWxlIFVSTCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2tleV0gT3B0aW9uYWwgbmV3IHRpbGUga2V5IGZvciB0aGUgc291cmNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZVVybEZ1bmN0aW9uLCBrZXkpIHtcbiAgICAgICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSB0aWxlVXJsRnVuY3Rpb247XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLnBydW5lRXhjZXB0TmV3ZXN0WigpO1xuICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0S2V5KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBVUkwgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJsID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgdXJscyA9IGV4cGFuZFVybCh1cmwpO1xuICAgICAgICB0aGlzLnVybHMgPSB1cmxzO1xuICAgICAgICB0aGlzLnNldFVybHModXJscyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIFVSTHMgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHVybHMgVVJMcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJscyA9IGZ1bmN0aW9uICh1cmxzKSB7XG4gICAgICAgIHRoaXMudXJscyA9IHVybHM7XG4gICAgICAgIHZhciBrZXkgPSB1cmxzLmpvaW4oJ1xcbicpO1xuICAgICAgICBpZiAodGhpcy5nZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VGlsZVVybEZ1bmN0aW9uKGNyZWF0ZUZyb21UZW1wbGF0ZXModXJscywgdGhpcy50aWxlR3JpZCksIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBVcmxUaWxlO1xufShUaWxlU291cmNlKSk7XG5leHBvcnQgZGVmYXVsdCBVcmxUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VXJsVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSB0aWxlIHN0YXJ0cyBsb2FkaW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2Fkc3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURTVEFSVDogJ3RpbGVsb2Fkc3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBmaW5pc2hlcyBsb2FkaW5nLCBlaXRoZXIgd2hlbiBpdHMgZGF0YSBpcyBsb2FkZWQsXG4gICAgICogb3Igd2hlbiBsb2FkaW5nIHdhcyBhYm9ydGVkIGJlY2F1c2UgdGhlIHRpbGUgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVORDogJ3RpbGVsb2FkZW5kJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgaWYgdGlsZSBsb2FkaW5nIHJlc3VsdHMgaW4gYW4gZXJyb3IuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlcnJvclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVSUk9SOiAndGlsZWxvYWRlcnJvcicsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7J3RpbGVsb2Fkc3RhcnQnfCd0aWxlbG9hZGVuZCd8J3RpbGVsb2FkZXJyb3InfSBUaWxlU291cmNlRXZlbnRUeXBlc1xuICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlRXZlbnRUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVJbWFnZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEltYWdlVGlsZSBmcm9tICcuLi9JbWFnZVRpbGUuanMnO1xuaW1wb3J0IFJlcHJvalRpbGUgZnJvbSAnLi4vcmVwcm9qL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVDYWNoZSBmcm9tICcuLi9UaWxlQ2FjaGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IFVybFRpbGUgZnJvbSAnLi9VcmxUaWxlLmpzJztcbmltcG9ydCB7IEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIH0gZnJvbSAnLi4vcmVwcm9qL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBlcXVpdmFsZW50LCBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0S2V5LCBnZXRLZXlaWFkgfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgZ2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24gfSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi91dGlsLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIEVuYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ9MC41XSBNYXhpbXVtIGFsbG93ZWQgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBwaXhlbHMpLlxuICogSGlnaGVyIHZhbHVlcyBjYW4gaW5jcmVhc2UgcmVwcm9qZWN0aW9uIHBlcmZvcm1hbmNlLCBidXQgZGVjcmVhc2UgcHJlY2lzaW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV0gU291cmNlIHN0YXRlLlxuICogQHByb3BlcnR5IHt0eXBlb2YgaW1wb3J0KFwiLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IFt0aWxlQ2xhc3NdIENsYXNzIHVzZWQgdG8gaW5zdGFudGlhdGUgaW1hZ2UgdGlsZXMuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvSW1hZ2VUaWxlfkltYWdlVGlsZX0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW89MV0gVGhlIHBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS4gRm9yIGV4YW1wbGUsIGlmIHRoZSB0aWxlXG4gKiBzZXJ2aWNlIGFkdmVydGl6ZXMgMjU2cHggYnkgMjU2cHggdGlsZXMgYnV0IGFjdHVhbGx5IHNlbmRzIDUxMnB4XG4gKiBieSA1MTJweCBpbWFnZXMgKGZvciByZXRpbmEvaGlkcGkgZGV2aWNlcykgdGhlbiBgdGlsZVBpeGVsUmF0aW9gXG4gKiBzaG91bGQgYmUgc2V0IHRvIGAyYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0IHRpbGUgVVJMIGdpdmVuIGEgdGlsZSBjb29yZGluYXRlIGFuZCB0aGUgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLCBhbmQgYHt6fWAgcGxhY2Vob2xkZXJzLlxuICogQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCwgbWF5IGJlXG4gKiB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWF0gV2hldGhlciB0byB3cmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuIFRoZSBkZWZhdWx0LCBpcyB0b1xuICogcmVxdWVzdCBvdXQtb2YtYm91bmRzIHRpbGVzIGZyb20gdGhlIHNlcnZlci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgb25seSBvbmVcbiAqIHdvcmxkIHdpbGwgYmUgcmVuZGVyZWQuIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGlsZXMgd2lsbCBiZSByZXF1ZXN0ZWQgZm9yIG9uZVxuICogd29ybGQgb25seSwgYnV0IHRoZXkgd2lsbCBiZSB3cmFwcGVkIGhvcml6b250YWxseSB0byByZW5kZXIgbXVsdGlwbGUgd29ybGRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXSBEdXJhdGlvbiBvZiB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uIGZvciByZW5kZXJpbmcuXG4gKiBUbyBkaXNhYmxlIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24sIHBhc3MgYHRyYW5zaXRpb246IDBgLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXldIE9wdGlvbmFsIHRpbGUga2V5IGZvciBwcm9wZXIgY2FjaGUgZmV0Y2hpbmdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW3pEaXJlY3Rpb249MF1cbiAqIENob29zZSB3aGV0aGVyIHRvIHVzZSB0aWxlcyB3aXRoIGEgaGlnaGVyIG9yIGxvd2VyIHpvb20gbGV2ZWwgd2hlbiBiZXR3ZWVuIGludGVnZXJcbiAqIHpvb20gbGV2ZWxzLiBTZWUge0BsaW5rIG1vZHVsZTpvbC90aWxlZ3JpZC9UaWxlR3JpZH5UaWxlR3JpZCNnZXRaRm9yUmVzb2x1dGlvbn0uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgaW1hZ2VzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICogQGFwaVxuICovXG52YXIgVGlsZUltYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlSW1hZ2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT3B0aW9uc30gb3B0aW9ucyBJbWFnZSB0aWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUltYWdlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICAgICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgICAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvblxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbixcbiAgICAgICAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbiA9XG4gICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNyb3NzT3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge3R5cGVvZiBJbWFnZVRpbGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2xhc3MgPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlQ2xhc3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUNsYXNzIDogSW1hZ2VUaWxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIFRpbGVDYWNoZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfID0gb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dE9wdGlvbnNfID1cbiAgICAgICAgICAgIG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcgPT09IGZhbHNlID8gSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIDogdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25ba2V5XS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXhwaXJlQ2FjaGUuY2FsbCh0aGlzLCBwcm9qZWN0aW9uLCB1c2VkVGlsZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VkVGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aGlzLnRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdO1xuICAgICAgICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfSBDb250ZXh0IG9wdGlvbnMuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRDb250ZXh0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dE9wdGlvbnNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRHdXR0ZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRHdXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBrZXkgdG8gYmUgdXNlZCBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKF9zdXBlci5wcm90b3R5cGUuZ2V0S2V5LmNhbGwodGhpcykgK1xuICAgICAgICAgICAgKHRoaXMuY29udGV4dE9wdGlvbnNfID8gJ1xcbicgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHRPcHRpb25zXykgOiAnJykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldE9wYXF1ZSA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0T3BhcXVlLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLnRpbGVHcmlkICYmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9XG4gICAgICAgICAgICAgICAgICAgIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24uY2FsbCh0aGlzLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKCF0aGlzUHJvaiB8fCBlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV0gPSBuZXcgVGlsZUNhY2hlKHRoaXMudGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBzZXQgb24gdGhlIHRpbGUuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY3JlYXRlVGlsZV8gPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgICAgIHZhciB1cmxUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVVybCA9IHVybFRpbGVDb29yZFxuICAgICAgICAgICAgPyB0aGlzLnRpbGVVcmxGdW5jdGlvbih1cmxUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHRpbGUgPSBuZXcgdGhpcy50aWxlQ2xhc3ModGlsZUNvb3JkLCB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyBUaWxlU3RhdGUuSURMRSA6IFRpbGVTdGF0ZS5FTVBUWSwgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gdGlsZVVybCA6ICcnLCB0aGlzLmNyb3NzT3JpZ2luLCB0aGlzLnRpbGVMb2FkRnVuY3Rpb24sIHRoaXMudGlsZU9wdGlvbnMpO1xuICAgICAgICB0aWxlLmtleSA9IGtleTtcbiAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgc291cmNlUHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICAgICAhc291cmNlUHJvamVjdGlvbiB8fFxuICAgICAgICAgICAgIXByb2plY3Rpb24gfHxcbiAgICAgICAgICAgIGVxdWl2YWxlbnQoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uIHx8IHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICAgICAgICAgIHZhciB0aWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleSh0aWxlQ29vcmQpO1xuICAgICAgICAgICAgaWYgKGNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgICAgICB0aWxlID0gY2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRpbGUua2V5ID09IGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciBuZXdUaWxlID0gbmV3IFJlcHJvalRpbGUoc291cmNlUHJvamVjdGlvbiwgc291cmNlVGlsZUdyaWQsIHByb2plY3Rpb24sIHRhcmdldFRpbGVHcmlkLCB0aWxlQ29vcmQsIHdyYXBwZWRUaWxlQ29vcmQsIHRoaXMuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyksIHRoaXMuZ2V0R3V0dGVyKCksIGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIHRoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfLCB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXywgdGhpcy5jb250ZXh0T3B0aW9uc18pO1xuICAgICAgICAgICAgICAgIG5ld1RpbGUua2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIGlmICh0aWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RpbGUuaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgICAgICAgICAgICAgICBuZXdUaWxlLnJlZnJlc2hJbnRlcmltQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KHRpbGVDb29yZEtleSwgbmV3VGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdUaWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUludGVybmFsID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGUgPSBudWxsO1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgaWYgKCF0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy5jcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpO1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuc2V0KHRpbGVDb29yZEtleSwgdGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICBpZiAodGlsZS5rZXkgIT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHNvdXJjZSdzIHBhcmFtcyBjaGFuZ2VkLiBJZiB0aGUgdGlsZSBoYXMgYW4gaW50ZXJpbSB0aWxlIGFuZCBpZiB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiB1c2UgaXQgdGhlbiB3ZSB1c2UgaXQuIE90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgdGlsZS4gIEluIGJvdGhcbiAgICAgICAgICAgICAgICAvLyBjYXNlcyB3ZSBhdHRlbXB0IHRvIGFzc2lnbiBhbiBpbnRlcmltIHRpbGUgdG8gdGhlIG5ldyB0aWxlLlxuICAgICAgICAgICAgICAgIHZhciBpbnRlcmltVGlsZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgICAgICAgICAgICAvL21ha2UgdGhlIG5ldyB0aWxlIHRoZSBoZWFkIG9mIHRoZSBsaXN0LFxuICAgICAgICAgICAgICAgIGlmIChpbnRlcmltVGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIG9sZCB0aWxlIGhhc24ndCBiZWd1biBsb2FkaW5nIHlldCwgYW5kIGlzIG5vdyBvdXRkYXRlZCwgc28gd2UgY2FuIHNpbXBseSBkaXNjYXJkIGl0XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIHRvIHJlbmRlciByZXByb2plY3Rpb24gZWRnZXMgb3Igbm90ICh1c3VhbGx5IGZvciBkZWJ1Z2dpbmcpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVuZGVyIFJlbmRlciB0aGUgZWRnZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMgPSBmdW5jdGlvbiAocmVuZGVyKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfHxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID09IHJlbmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gcmVuZGVyO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltpZF0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRpbGUgZ3JpZCB0byB1c2Ugd2hlbiByZXByb2plY3RpbmcgdGhlIHRpbGVzIHRvIHRoZSBnaXZlblxuICAgICAqIHByb2plY3Rpb24gaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gdGhlIGRlZmF1bHQgdGlsZSBncmlkIGNhbm5vdCBiZSBjcmVhdGVkXG4gICAgICogKGUuZy4gcHJvamVjdGlvbiBoYXMgbm8gZXh0ZW50IGRlZmluZWQpIG9yXG4gICAgICogZm9yIG9wdGltaXphdGlvbiByZWFzb25zIChjdXN0b20gdGlsZSBzaXplLCByZXNvbHV0aW9ucywgLi4uKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZWdyaWQgVGlsZSBncmlkIHRvIHVzZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHRpbGVncmlkKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgdmFyIHByb2ogPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHByb2opIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qKTtcbiAgICAgICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IHRpbGVncmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVJbWFnZTtcbn0oVXJsVGlsZSkpO1xuLyoqXG4gKiBAcGFyYW0ge0ltYWdlVGlsZX0gaW1hZ2VUaWxlIEltYWdlIHRpbGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNvdXJjZS5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGltYWdlVGlsZS5nZXRJbWFnZSgpKS5zcmMgPVxuICAgICAgICBzcmM7XG59XG5leHBvcnQgZGVmYXVsdCBUaWxlSW1hZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlSW1hZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9YWVpcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBUaWxlSW1hZ2UgZnJvbSAnLi9UaWxlSW1hZ2UuanMnO1xuaW1wb3J0IHsgY3JlYXRlWFlaLCBleHRlbnRGcm9tUHJvamVjdGlvbiB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIEVuYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT00Ml0gT3B0aW9uYWwgbWF4IHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gT3B0aW9uYWwgbWluIHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIE9wdGlvbmFsIHRpbGUgZ3JpZCByZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW89MV0gVGhlIHBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZSBzZXJ2aWNlIGFkdmVydGl6ZXMgMjU2cHggYnkgMjU2cHggdGlsZXMgYnV0IGFjdHVhbGx5IHNlbmRzIDUxMnB4XG4gKiBieSA1MTJweCBpbWFnZXMgKGZvciByZXRpbmEvaGlkcGkgZGV2aWNlcykgdGhlbiBgdGlsZVBpeGVsUmF0aW9gXG4gKiBzaG91bGQgYmUgc2V0IHRvIGAyYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRoZSB0aWxlIHNpemUgdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLlxuICogTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiBgdXJsYCBvciBgdXJsc2AgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExheWVyIHNvdXJjZSBmb3IgdGlsZSBkYXRhIHdpdGggVVJMcyBpbiBhIHNldCBYWVogZm9ybWF0IHRoYXQgYXJlXG4gKiBkZWZpbmVkIGluIGEgVVJMIHRlbXBsYXRlLiBCeSBkZWZhdWx0LCB0aGlzIGZvbGxvd3MgdGhlIHdpZGVseS11c2VkXG4gKiBHb29nbGUgZ3JpZCB3aGVyZSBgeGAgMCBhbmQgYHlgIDAgYXJlIGluIHRoZSB0b3AgbGVmdC4gR3JpZHMgbGlrZVxuICogVE1TIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIGJvdHRvbSBsZWZ0IGNhbiBiZSB1c2VkIGJ5XG4gKiB1c2luZyB0aGUgYHsteX1gIHBsYWNlaG9sZGVyIGluIHRoZSBVUkwgdGVtcGxhdGUsIHNvIGxvbmcgYXMgdGhlXG4gKiBzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIGN1c3RvbSB0aWxlIGdyaWQuIEluIHRoaXMgY2FzZVxuICogYSBgdGlsZVVybEZ1bmN0aW9uYCBjYW4gYmUgdXNlZCwgc3VjaCBhczpcbiAqIGBgYGpzXG4gKiAgdGlsZVVybEZ1bmN0aW9uOiBmdW5jdGlvbihjb29yZGluYXRlKSB7XG4gKiAgICByZXR1cm4gJ2h0dHA6Ly9tYXBzZXJ2ZXIuY29tLycgKyBjb29yZGluYXRlWzBdICsgJy8nICtcbiAqICAgICAgY29vcmRpbmF0ZVsxXSArICcvJyArICgtY29vcmRpbmF0ZVsyXSAtIDEpICsgJy5wbmcnO1xuICogIH1cbiAqIGBgYFxuICogQGFwaVxuICovXG52YXIgWFlaID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhYWVosIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFhZWiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFhZWihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1Nyc7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnRpbGVHcmlkXG4gICAgICAgICAgICA6IGNyZWF0ZVhZWih7XG4gICAgICAgICAgICAgICAgZXh0ZW50OiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSxcbiAgICAgICAgICAgICAgICBtYXhSZXNvbHV0aW9uOiBvcHRpb25zLm1heFJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgbWF4Wm9vbTogb3B0aW9ucy5tYXhab29tLFxuICAgICAgICAgICAgICAgIG1pblpvb206IG9wdGlvbnMubWluWm9vbSxcbiAgICAgICAgICAgICAgICB0aWxlU2l6ZTogb3B0aW9ucy50aWxlU2l6ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgICAgICAgY3Jvc3NPcmlnaW46IG9wdGlvbnMuY3Jvc3NPcmlnaW4sXG4gICAgICAgICAgICBpbWFnZVNtb290aGluZzogb3B0aW9ucy5pbWFnZVNtb290aGluZyxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgICAgICAgcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsXG4gICAgICAgICAgICB0aWxlR3JpZDogdGlsZUdyaWQsXG4gICAgICAgICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiB0cnVlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFhZWjtcbn0oVGlsZUltYWdlKSk7XG5leHBvcnQgZGVmYXVsdCBYWVo7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1YWVouanMubWFwIiwiaW1wb3J0IFhZWlNvdXJjZSBmcm9tICdvbC9zb3VyY2UvWFlaLmpzJztcclxuXHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBWYXJpYW50cyB7XHJcbiAgW3ZhcmlhbnQ6IHN0cmluZ106IHN0cmluZ1xyXG59XHJcblxyXG4vKipcclxuICogQXZhaWxhYmxlIEJhc2VtYXAgdmFyaWFudHNcclxuICogQHByaXZhdGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBWQVJJQU5UUzogVmFyaWFudHMgPSB7XHJcbiAgZ2VvbGFuZGJhc2VtYXA6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvZ2VvbGFuZGJhc2VtYXAvbm9ybWFsL2dvb2dsZTM4NTcve3p9L3t5fS97eH0ucG5nJyxcclxuICBibWFwZ3JhdTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwZ3JhdS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG4gIGJtYXBvcnRob2ZvdG8zMGNtOiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBvcnRob2ZvdG8zMGNtL25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gIGJtYXBnZWxhZW5kZTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwZ2VsYWVuZGUvZ3JhdS9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gIGJtYXBvYmVyZmxhZWNoZTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb2JlcmZsYWVjaGUvZ3JhdS9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gIGJtYXBvdmVybGF5OiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBvdmVybGF5L25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LnBuZycsXHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFzZW1hcFNvdXJjZU9wdGlvbnMge1xyXG4gIHZhcmlhbnQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZW5pZW5jZSBzb3VyY2UgZm9yIGJhc2VtYXAuYXQgcmFzdGVyIG1hcHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZW1hcFNvdXJjZSBleHRlbmRzIFhZWlNvdXJjZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9uc1xyXG4gICAqIEBwYXJhbSB7a2V5b2YgdmFyaWFudHN9IFtvcHRpb25zLnZhcmlhbnQ9XCJnZW9sYW5kYmFzZW1hcFwiXSBCYXNlbWFwIHZhcmlhbnRcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogQmFzZW1hcFNvdXJjZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHZhcmlhbnQgPSBvcHRpb25zPy52YXJpYW50IHx8ICdnZW9sYW5kYmFzZW1hcCc7XHJcbiAgICBzdXBlcih7XHJcbiAgICAgIHVybDogVkFSSUFOVFNbdmFyaWFudF0sXHJcbiAgICAgIGF0dHJpYnV0aW9uczogJ0dydW5ka2FydGU6IDxhIGhyZWY9XCJodHRwczovL2Jhc2VtYXAuYXQvXCI+YmFzZW1hcC5hdDwvYT4nLFxyXG4gICAgICBjcm9zc09yaWdpbjogXCJBbm9ueW1vdXNcIlxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAnLi4vLi4vLi4vc3JjL2luZGV4Q29yZS5zY3NzJztcclxuaW1wb3J0IFRpbGVMYXllciBmcm9tIFwib2wvbGF5ZXIvVGlsZVwiO1xyXG5pbXBvcnQgVmlldyBmcm9tIFwib2wvVmlld1wiO1xyXG5pbXBvcnQgTWFwIGZyb20gXCJvbC9NYXBcIjtcclxuaW1wb3J0IHtBdHRyaWJ1dGlvbiwgQmFzZW1hcFNvdXJjZSwgQm90dG9tUmlnaHQsIEZvb3RlciwgTW91c2VQb3NpdGlvbiwgU2NhbGVMaW5lfSBmcm9tIFwiLi4vLi4vLi4vc3JjXCI7XHJcbmltcG9ydCB7Z2V0Q2VudGVyfSBmcm9tIFwib2wvZXh0ZW50XCI7XHJcbmltcG9ydCB7QnV0dG9uLCBCdXR0b25PcHRpb25zfSBmcm9tIFwiLi4vLi4vLi4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL0J1dHRvblwiO1xyXG5cclxuY29uc3Qgb3V0cHV0VGV4dGFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRleHRhcmVhLW91dHB1dFwiKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5cclxuLyoqXHJcbiAqIEN1c3RvbUJ1dHRvbjFcclxuICovXHJcbmNsYXNzIEN1c3RvbUJ1dHRvbjEgZXh0ZW5kcyBCdXR0b24ge1xyXG5cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBCdXR0b25PcHRpb25zKSB7XHJcbiAgICBzdXBlcihvcHRpb25zKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUV2ZW50KCk6IGJvb2xlYW4ge1xyXG4gICAgb3V0cHV0VGV4dGFyZWEudmFsdWUgPSAnQ3VzdG9tQnV0dG9uMSBjbGlja2VkXFxuJyArIG91dHB1dFRleHRhcmVhLnZhbHVlO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3VzdG9tQnV0dG9uMlxyXG4gKi9cclxuY2xhc3MgQ3VzdG9tQnV0dG9uMiBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgc3VwZXIoeyB1bmljb2RlOiAweGU5NDUsIHRvb2x0aXA6ICdDdXN0b21CdXR0b24yIFRvb2x0aXAnLCB0b29sdGlwQXNUZXh0RWxlbWVudDogdHJ1ZSB9KTtcclxuICB9XHJcblxyXG4gIGhhbmRsZUV2ZW50KCk6IGJvb2xlYW4ge1xyXG4gICAgb3V0cHV0VGV4dGFyZWEudmFsdWUgPSAnQ3VzdG9tQnV0dG9uMiBjbGlja2VkXFxuJyArIG91dHB1dFRleHRhcmVhLnZhbHVlO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBjdXN0b21CdXR0b24xQ3RybCA9IG5ldyBDdXN0b21CdXR0b24xKHsgaWNvbkNsYXNzTmFtZTogJ2JnaXMtaWNvbi10b3JuYWRvJywgdG9vbHRpcDogJ0N1c3RvbUJ1dHRvbjEgVG9vbHRpcCd9KTtcclxuXHJcbmNvbnN0IGN1c3RvbUJ1dHRvbjJDdHJsID0gbmV3IEN1c3RvbUJ1dHRvbjIoKTtcclxuXHJcbm5ldyBNYXAoe1xyXG4gIHRhcmdldDogJ2JnaXMtbWFwJyxcclxuICBsYXllcnM6IFtuZXcgVGlsZUxheWVyKHtcclxuICAgIHNvdXJjZTogbmV3IEJhc2VtYXBTb3VyY2UoKVxyXG4gIH0pXSxcclxuICBjb250cm9sczogW1xyXG4gICAgbmV3IEZvb3RlcihbXHJcbiAgICAgIG5ldyBTY2FsZUxpbmUoKSxcclxuICAgICAgbmV3IE1vdXNlUG9zaXRpb24oKSxcclxuICAgICAgbmV3IEF0dHJpYnV0aW9uKCksXHJcbiAgICBdKSxcclxuICAgIG5ldyBCb3R0b21SaWdodCh7XHJcbiAgICAgIGhvcml6b250YWxDb250cm9sczogW2N1c3RvbUJ1dHRvbjFDdHJsXSxcclxuICAgICAgdmVydGljYWxDb250cm9sczogW2N1c3RvbUJ1dHRvbjJDdHJsXSxcclxuICAgIH0pXHJcbiAgXSxcclxuICB2aWV3OiBuZXcgVmlldyh7XHJcbiAgICBjZW50ZXI6IGdldENlbnRlcihbMTA2MDAwMCwgNTgzODAzMCwgMTkxMzUzMCwgNjI4MTI5MF0pLFxyXG4gICAgY29uc3RyYWluT25seUNlbnRlcjogdHJ1ZSxcclxuICAgIGNvbnN0cmFpblJlc29sdXRpb246IGZhbHNlLCAvLyBkaXNjcmV0ZSB6b29vbWxldmVsc1xyXG4gICAgZXh0ZW50OiBbMTA2MDAwMCwgNTgzODAzMCwgMTkxMzUzMCwgNjI4MTI5MF0sXHJcbiAgICBtYXhab29tOiAxNSxcclxuICAgIG1pblpvb206IDYsXHJcbiAgICB6b29tOiA3LFxyXG4gIH0pXHJcbn0pO1xyXG4iLCJpbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XHJcbmltcG9ydCB7Q29udGFpbmVyfSBmcm9tIFwiLi9Db250YWluZXJcIjtcclxuXHJcbi8qKlxyXG4gKiBBIHNpbXBsZSBmb290ZXIge0BsaW5rY29kZSBDb250YWluZXJ9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRm9vdGVyIGV4dGVuZHMgQ29udGFpbmVyIHtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gY2hpbGRDb250cm9scyBUaGUgY2hpbGQgY29udHJvbHMgZm9yIHRoZSBmb290ZXIgY29udGFpbmVyXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5MYXllciBjb250cm9sIG9wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihjaGlsZENvbnRyb2xzOiBDb250cm9sIHwgQ29udHJvbFtdLCBvcHRpb25zPzpPcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOnt9O1xyXG4gICAgc3VwZXIoey4uLm9wdHMgLCBzdHlsZUNsYXNzOiAnYmdpcy1mb290ZXInLCBjaGlsZENvbnRyb2xzfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7ZGVmYXVsdCBhcyBPbE1vdXNlUG9zaXRpb24sIE9wdGlvbnMgYXMgT2xNb3VzZVBvc2l0aW9uT3B0aW9uc30gZnJvbSAnb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uJztcclxuaW1wb3J0IHtDb29yZGluYXRlLCBmb3JtYXR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xyXG5cclxuLyoqXHJcbiAqIERpc3BsYXlzIHRoZSBtb3VzZSBwb3NpdGlvbiBpbiB0aGUgbWFwLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vdXNlUG9zaXRpb24gZXh0ZW5kcyBPbE1vdXNlUG9zaXRpb24ge1xyXG5cclxuLyoqXHJcbiAgICogQ3JlYXRlcyBhIG5ldyBtb3VzZSBwb3NpdGlvbiBjb250cm9sIHdpdGggdGhlIGRmYXVsdCB2YWx1ZXMuLlxyXG4gICAqIGBgYHR5cGVzY3JpcHRcclxuICAgKiAvLyBFeGFtcGxlOiBjcmVhdGUgYSBuZXcgTW91c2VQb3NpdGlvbiBjb250cm9sIHdpdGggdGhlIGRlZmF1bHQgcGFyYW1ldGVycy5cclxuICAgKiBjb25zdCBtb3VzZVBvc2l0aW9uQ29udHJvbCA9IG5ldyBNb3VzZVBvc2l0aW9uKCk7XHJcbiAgICogYGBgXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgQWxsIG9wdGlvbnMgb2YgdGhlIG9yaWdpbmFsIE9wZW5MYXllcnMgTW91c2VQb3NpdGlvbiBjb250cm9sIGFyZSBhbG93ZWQuXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE9sTW91c2VQb3NpdGlvbk9wdGlvbnMpIHtcclxuXHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuXHJcbiAgICBvcHRzLnByb2plY3Rpb24gPSBvcHRzLnByb2plY3Rpb24gPyBvcHRzLnByb2plY3Rpb24gOiAnRVBTRzo0MzI2JztcclxuICAgIG9wdHMuY29vcmRpbmF0ZUZvcm1hdCA9IG9wdHMuY29vcmRpbmF0ZUZvcm1hdCA/IG9wdHMuY29vcmRpbmF0ZUZvcm1hdCA6IChjb29yZGluYXRlOiBDb29yZGluYXRlIHwgdW5kZWZpbmVkKSA9PiBjb29yZGluYXRlID8gZm9ybWF0KGNvb3JkaW5hdGUsICd7eH3CsE4ve3l9wrBFJywgNCkgOiAnJztcclxuICAgIG9wdHMudW5kZWZpbmVkSFRNTCA9IG9wdHMudW5kZWZpbmVkSFRNTCA/IG9wdHMudW5kZWZpbmVkSFRNTCA6ICcmbmJzcDstJm5ic3A7wrBOLyZuYnNwOy0mbmJzcDvCsEUnO1xyXG4gICAgb3B0cy5jbGFzc05hbWUgPSBvcHRzLmNsYXNzTmFtZSA/IG9wdHMuY2xhc3NOYW1lIDogJ29sLWNvbnRyb2wgb2wtbW91c2UtcG9zaXRpb24gYmdpcy1tb3VzZXBvc2l0aW9uJztcclxuXHJcbiAgICBzdXBlcihvcHRzKTtcclxuICB9XHJcblxyXG5cclxufVxyXG5cclxuXHJcbiIsImltcG9ydCB7ZGVmYXVsdCBhcyBPbEF0dHJpYnV0aW9uLCBPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0F0dHJpYnV0aW9uJztcclxuXHJcbi8qKlxyXG4gKiBBIHNpbXBsZSB3cmFwcGVyIGNvbnRyb2wgb2YgdGhlIE9wZW5MYXllciBBdHRyaWJ1dGlvbiBjb250cm9sXHJcbiAqXHJcbiAqIEl0IGlzIGNvbGxhcHNlZCBhbmQgd2UgYWRkIGEgYmdpcyBzdHlsZSBjbGFzcyAoKmJnaXMtY29weXJpZ2h0KikuXHJcbiAqIFNvbWUgdmlzaWJsZSBjaGFuZ2VzIGFyZSBtYWRlIHZpYSBjc3MuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQXR0cmlidXRpb24gZXh0ZW5kcyBPbEF0dHJpYnV0aW9uIHtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgT3BlbmxheWVyIEF0dHJpYnV0aW9uIG9wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogT3B0aW9ucykge1xyXG5cclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHtcclxuICAgICAgY29sbGFwc2VkOiBmYWxzZVxyXG4gICAgfTtcclxuICAgIHN1cGVyKG9wdHMpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgKz0gJyBiZ2lzLWNvcHlyaWdodCc7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgQ29udHJvbCBmcm9tIFwib2wvY29udHJvbC9Db250cm9sXCI7XHJcbmltcG9ydCB7Q29udGFpbmVyfSBmcm9tIFwiLi9Db250YWluZXJcIjtcclxuaW1wb3J0IHtUb2dnbGVCdXR0b24sIFRvZ2dsZUV2ZW50fSBmcm9tIFwiLi4vYmFzZVwiO1xyXG5pbXBvcnQgQmFzZUV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuaW1wb3J0IHtPYmplY3RPblNpZ25hdHVyZX0gZnJvbSBcIm9sL09iamVjdFwiO1xyXG5pbXBvcnQge09uUmV0dXJufSBmcm9tIFwib2wvT2JzZXJ2YWJsZVwiO1xyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIHRoZSB7QGxpbmtjb2RlIEJvdHRvbVJpZ2h0fSBjb250YWluZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyB7XHJcbiAgLyoqIEFuIGFycmF5IG9mIGhvcml6b250YWwgY2hpbGQgY29udHJvbHMgKiovXHJcbiAgaG9yaXpvbnRhbENvbnRyb2xzOiBDb250cm9sW10sXHJcbiAgLyoqIEFuIGFycmF5IG9mIHZlcnRpY2FsIGNoaWxkIGNvbnRyb2xzICoqL1xyXG4gIHZlcnRpY2FsQ29udHJvbHM/OiBDb250cm9sW11cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBleHRlbmRlZCBzaWduYXR1cmUgZm9yIHRoZSBvbiBtZXRob2RcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmV4cG9ydCB0eXBlIEJvdHRvbVJpZ2h0T25TaWduYXR1cmU8UmV0dXJuPiA9ICgodHlwZTogXCJ0b2dnbGVcIiB8IFwidG9nZ2xlXCJbXSwgbGlzdGVuZXI6IChldmVudDogVG9nZ2xlRXZlbnQpID0+IGFueSkgPT4gUmV0dXJuKSAmIE9iamVjdE9uU2lnbmF0dXJlPFJldHVybj47XHJcblxyXG4vKipcclxuICogQSB7QGxpbmtjb2RlIENvbnRhaW5lcn0gZm9yIGRpcGxheSBvbiB0aGUgYm90dG9tIHJpZ2h0IGNvcm5lci5cclxuICogV2UgaGF2ZSBob3Jpem9uYXRsIGNvbnRyb2xzIGFuZCB2ZXJ0aWNhbCBjb250cm9scy4gVGhlIHZpc2liaWxpdHkgb2YgdmVydGljYWxcclxuICogY29udHJvbHMgaXMgY29udHJvbGxlZCBieSBhIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJvdHRvbVJpZ2h0IGV4dGVuZHMgQ29udGFpbmVyIHtcclxuXHJcbiAgLyoqIFRoZSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn0gd2hpY2ggdG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgdmVydGljYWwgY29udHJvbHMgKiovXHJcbiAgcHJpdmF0ZSByZWFkb25seSB0b2dnbGVCdXR0b246IFRvZ2dsZUJ1dHRvbiB8IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbiE6IEJvdHRvbVJpZ2h0T25TaWduYXR1cmU8T25SZXR1cm4+O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zXHJcbiAgICogQGV2ZW50IFRvZ2dsZUV2ZW50IFRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn0gaXMgY2xpY2tlZFxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IE9wdGlvbnMpIHtcclxuXHJcbiAgICBsZXQgdG9nZ2xlQnV0dG9uID0gbnVsbDtcclxuICAgIGlmKG9wdGlvbnMudmVydGljYWxDb250cm9scyAmJiBvcHRpb25zLnZlcnRpY2FsQ29udHJvbHMubGVuZ3RoPjApIHtcclxuICAgICAgY29uc3QgY29udGFpbmVyVG9Ub2dnbGUgPSBuZXcgQ29udGFpbmVyKHsgc3R5bGVDbGFzczogJ2JnaXMtYm90dG9tLXJpZ2h0LXZlcnRpY2FsJywgY2hpbGRDb250cm9sczogb3B0aW9ucy52ZXJ0aWNhbENvbnRyb2xzfSk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvbiA9IG5ldyBUb2dnbGVCdXR0b24oeyBjb250YWluZXJUb1RvZ2dsZSwgY29udGFpbmVyQ2xhc3NOYW1lOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgYmdpcy1ib3R0b20tcmlnaHQtb3ZlcmxheScsIHVuaWNvZGU6IDB4ZTkwNywgdW5pY29kZVRvZ2dsZWQ6IDB4ZTkyNCwgdG9vbHRpcDogJ21laHIuLi4nIH0pO1xyXG4gICAgICBvcHRpb25zLmhvcml6b250YWxDb250cm9scy5wdXNoKHRvZ2dsZUJ1dHRvbik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOnt9O1xyXG4gICAgc3VwZXIoey4uLm9wdHMgLCBzdHlsZUNsYXNzOiAnYmdpcy1ib3R0b20tcmlnaHQtaG9yaXpvbnRhbCcsIGNoaWxkQ29udHJvbHM6IG9wdGlvbnMuaG9yaXpvbnRhbENvbnRyb2xzIH0pO1xyXG5cclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uID0gdG9nZ2xlQnV0dG9uO1xyXG4gICAgaWYodGhpcy50b2dnbGVCdXR0b24hPW51bGwpIHtcclxuICAgICAgdGhpcy50b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvZ2dsZVwiLCAoZXZlbnQpOiBib29sZWFuID0+IHtcclxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZlbnQgYXMgQmFzZUV2ZW50KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBnZXR0ZXIgZm9yIHRoZSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn1cclxuICAgKi9cclxuICBwdWJsaWMgZ2V0VG9nZ2xlQnV0dG9uKCk6IFRvZ2dsZUJ1dHRvbiB8IG51bGwge1xyXG4gICAgcmV0dXJuIHRoaXMudG9nZ2xlQnV0dG9uO1xyXG4gIH1cclxuXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==