!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["bgis-core"]=e():t["bgis-core"]=e()}(self,(()=>(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},i="propertychange",n=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function s(t,e){return t>e?1:t<e?-1:0}function o(t,e,i){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if("function"==typeof i){for(let s=1;s<n;++s){const n=t[s];if(n===e)return s;if(n<e)return i(e,t[s-1],n)>0?s-1:s}return n-1}if(i>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(i<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function r(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let e=0;e<n;e++)t[t.length]=i[e]}function a(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function l(){return!0}function h(){return!1}function c(){}function u(t){for(const e in t)delete t[e]}const d=class extends n{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const i="string"==typeof t,n=i?t:t.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const o=i?new e(t):t;o.target||(o.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});let l;n in r||(r[n]=0,a[n]=0),++r[n];for(let t=0,e=s.length;t<e;++t)if(l="handleEvent"in s[t]?s[t].handleEvent(o):s[t].call(this,o),!1===l||o.propagationStopped){l=!1;break}if(0==--r[n]){let t=a[n];for(delete a[n];t--;)this.removeEventListener(n,c);delete r[n]}return l}disposeInternal(){this.listeners_&&u(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=c,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}},g="change",p="contextmenu",m="click",_="keydown",f="keypress",v="touchmove",y="wheel";function C(t,e,i,n,s){if(n&&n!==t&&(i=i.bind(n)),s){const n=i;i=function(){t.removeEventListener(e,i),n.apply(this,arguments)}}const o={target:t,type:e,listener:i};return t.addEventListener(e,i),o}function x(t,e,i,n){return C(t,e,i,n,!0)}function E(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),u(t))}class w extends d{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(g)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=C(this,t[s],e);return n}return C(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=x(this,t[s],e)}else i=x(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)E(t[e]);else E(t)}(i);else if(Array.isArray(t))for(let i=0,n=t.length;i<n;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}w.prototype.on,w.prototype.once,w.prototype.un;const T=w;function b(){throw new Error("Unimplemented abstract method.")}let R=0;function S(t){return t.ol_uid||(t.ol_uid=String(++R))}class P extends e{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}const M=class extends T{constructor(t){super(),this.on,this.once,this.un,S(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new P(n,t,e)),n=i,this.hasListener(n)&&this.dispatchEvent(new P(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],function(t){let e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,i)}}},I="opacity",L="visible",F="extent",A="zIndex",O="maxResolution",k="minResolution",z="maxZoom",N="minZoom",D="source",j={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class G extends Error{constructor(t){const e=j[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const K=G;function V(t,e){if(!t)throw new K(e)}function Z(t,e,i){return Math.min(Math.max(t,e),i)}function B(t,e,i,n,s,o){const r=s-i,a=o-n;if(0!==r||0!==a){const l=((t-i)*r+(e-n)*a)/(r*r+a*a);l>1?(i=s,n=o):l>0&&(i+=r*l,n+=a*l)}return U(t,e,i,n)}function U(t,e,i,n){const s=i-t,o=n-e;return s*s+o*o}function X(t){return 180*t/Math.PI}function H(t){return t*Math.PI/180}function W(t,e){const i=t%e;return i*e<0?i+e:i}function Y(t,e,i){return t+i*(e-t)}function q(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function Q(t,e){return Math.floor(q(t,e))}function $(t,e){return Math.ceil(q(t,e))}const J=class extends M{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[I]=void 0!==t.opacity?t.opacity:1,V("number"==typeof e[I],64),e[L]=void 0===t.visible||t.visible,e[A]=t.zIndex,e[O]=void 0!==t.maxResolution?t.maxResolution:1/0,e[k]=void 0!==t.minResolution?t.minResolution:0,e[N]=void 0!==t.minZoom?t.minZoom:-1/0,e[z]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=Z(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return b()}getLayerStatesArray(t){return b()}getExtent(){return this.get(F)}getMaxResolution(){return this.get(O)}getMinResolution(){return this.get(k)}getMinZoom(){return this.get(N)}getMaxZoom(){return this.get(z)}getOpacity(){return this.get(I)}getSourceState(){return b()}getVisible(){return this.get(L)}getZIndex(){return this.get(A)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(F,t)}setMaxResolution(t){this.set(O,t)}setMinResolution(t){this.set(k,t)}setMaxZoom(t){this.set(z,t)}setMinZoom(t){this.set(N,t)}setOpacity(t){V("number"==typeof t,64),this.set(I,t)}setVisible(t){this.set(L,t)}setZIndex(t){this.set(A,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},tt="precompose",et="rendercomplete",it={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},nt=42,st=256,ot={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},rt=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ot[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}},at=6378137,lt=Math.PI*at,ht=[-lt,-lt,lt,lt],ct=[-180,-85,180,85],ut=at*Math.log(Math.tan(Math.PI/2));class dt extends rt{constructor(t){super({code:t,units:"m",extent:ht,global:!0,worldExtent:ct,getPointResolution:function(t,e){return t/Math.cosh(e[1]/at)}})}}const gt=[new dt("EPSG:3857"),new dt("EPSG:102100"),new dt("EPSG:102113"),new dt("EPSG:900913"),new dt("http://www.opengis.net/def/crs/EPSG/0/3857"),new dt("http://www.opengis.net/gml/srs/epsg.xml#3857")];const pt=[-180,-90,180,90],mt=6378137*Math.PI/180;class _t extends rt{constructor(t,e){super({code:t,units:"degrees",extent:pt,axisOrientation:e,global:!0,metersPerUnit:mt,worldExtent:pt})}}const ft=[new _t("CRS:84"),new _t("EPSG:4326","neu"),new _t("urn:ogc:def:crs:OGC:1.3:CRS84"),new _t("urn:ogc:def:crs:OGC:2:84"),new _t("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new _t("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new _t("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let vt={},yt={};function Ct(t,e,i){const n=t.getCode(),s=e.getCode();n in yt||(yt[n]={}),yt[n][s]=i}const xt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Et(t){const e=[1/0,1/0,-1/0,-1/0];for(let i=0,n=t.length;i<n;++i)It(e,t[i]);return e}function wt(t,e,i){let n,s;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,s=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+s*s}function Tt(t,e){return bt(t,e[0],e[1])}function bt(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function Rt(t,e){const i=t[0],n=t[1],s=t[2],o=t[3],r=e[0],a=e[1];let l=xt.UNKNOWN;return r<i?l|=xt.LEFT:r>s&&(l|=xt.RIGHT),a<n?l|=xt.BELOW:a>o&&(l|=xt.ABOVE),l===xt.UNKNOWN&&(l=xt.INTERSECTING),l}function St(t,e,i,n,s){return s?(s[0]=t,s[1]=e,s[2]=i,s[3]=n,s):[t,e,i,n]}function Pt(t){return St(1/0,1/0,-1/0,-1/0,t)}function Mt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function It(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Lt(t,e,i,n,s){for(;i<n;i+=s)Ft(t,e[i],e[i+1]);return t}function Ft(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function At(t,e){let i;return i=e(kt(t)),i||(i=e(zt(t)),i||(i=e(Bt(t)),i||(i=e(Zt(t)),i||!1)))}function Ot(t){let e=0;return Ht(t)||(e=Ut(t)*Kt(t)),e}function kt(t){return[t[0],t[1]]}function zt(t){return[t[2],t[1]]}function Nt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Dt(t,e){let i;return"bottom-left"===e?i=kt(t):"bottom-right"===e?i=zt(t):"top-left"===e?i=Zt(t):"top-right"===e?i=Bt(t):V(!1,13),i}function jt(t,e,i,n,s){const[o,r,a,l,h,c,u,d]=Gt(t,e,i,n);return St(Math.min(o,a,h,u),Math.min(r,l,c,d),Math.max(o,a,h,u),Math.max(r,l,c,d),s)}function Gt(t,e,i,n){const s=e*n[0]/2,o=e*n[1]/2,r=Math.cos(i),a=Math.sin(i),l=s*r,h=s*a,c=o*r,u=o*a,d=t[0],g=t[1];return[d-l+u,g-h-c,d-l-u,g-h+c,d+l-u,g+h+c,d+l+u,g+h-c,d-l+u,g-h-c]}function Kt(t){return t[3]-t[1]}function Vt(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return Xt(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):Pt(n),n}function Zt(t){return[t[0],t[3]]}function Bt(t){return[t[2],t[3]]}function Ut(t){return t[2]-t[0]}function Xt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ht(t){return t[2]<t[0]||t[3]<t[1]}function Wt(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function Yt(t,e){const i=Math.cos(e),n=Math.sin(e),s=t[0]*i-t[1]*n,o=t[1]*i+t[0]*n;return t[0]=s,t[1]=o,t}function qt(t,e){if(e.canWrapX()){const i=Ut(e.getExtent()),n=function(t,e,i){const n=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(i=i||Ut(n),s=Math.floor((t[0]-n[0])/i)),s}(t,e,i);n&&(t[0]-=n*i)}return t}const Qt=6371008.8;function $t(t,e,i){i=i||Qt;const n=H(t[1]),s=H(e[1]),o=(s-n)/2,r=H(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(r)*Math.sin(r)*Math.cos(n)*Math.cos(s);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Jt(t,e,i,n){n=n||Qt;const s=H(t[1]),o=H(t[0]),r=e/n,a=Math.asin(Math.sin(s)*Math.cos(r)+Math.cos(s)*Math.sin(r)*Math.cos(i));return[X(o+Math.atan2(Math.sin(i)*Math.sin(r)*Math.cos(s),Math.cos(r)-Math.sin(s)*Math.sin(a))),X(a)]}const te={info:1,warn:2,error:3,none:4};let ee=te.info;function ie(...t){ee>te.warn||console.warn(...t)}let ne=!0;function se(t){ne=!(void 0===t||t)}function oe(t,e){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function re(t,e){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function ae(t){!function(t,e){vt[t]=e}(t.getCode(),t),Ct(t,t,oe)}function le(t){return"string"==typeof t?vt[e=t]||vt[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function he(t,e,i,n){let s;const o=(t=le(t)).getPointResolutionFunc();if(o){if(s=o(e,i),n&&n!==t.getUnits()){const e=t.getMetersPerUnit();e&&(s=s*e/ot[n])}}else{const o=t.getUnits();if("degrees"==o&&!n||"degrees"==n)s=e;else{const r=ge(t,le("EPSG:4326"));if(r===re&&"degrees"!==o)s=e*t.getMetersPerUnit();else{let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];t=r(t,t,2),s=($t(t.slice(0,2),t.slice(2,4))+$t(t.slice(4,6),t.slice(6,8)))/2}const a=n?ot[n]:t.getMetersPerUnit();void 0!==a&&(s/=a)}}return s}function ce(t){!function(t){t.forEach(ae)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Ct(e,t,oe)}))}))}function ue(t,e){return t?"string"==typeof t?le(t):t:le(e)}function de(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||ge(t,e)===oe)&&i}function ge(t,e){let i=function(t,e){let i;return t in yt&&e in yt[t]&&(i=yt[t][e]),i}(t.getCode(),e.getCode());return i||(i=re),i}function pe(t,e){return ge(le(t),le(e))}function me(t,e,i){return pe(e,i)(t,void 0,t.length)}let _e=null;function fe(){return _e}function ve(t,e){return t}function ye(t,e){return ne&&!Wt(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(ne=!1,ie("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function Ce(t,e){return t}var xe,Ee,we;function Te(t,e,i){return function(n,s,o,r,a){if(!n)return;if(!s&&!e)return n;const l=e?0:o[0]*s,h=e?0:o[1]*s,c=a?a[0]:0,u=a?a[1]:0;let d=t[0]+l/2+c,g=t[2]-l/2+c,p=t[1]+h/2+u,m=t[3]-h/2+u;d>g&&(d=(g+d)/2,g=d),p>m&&(p=(m+p)/2,m=p);let _=Z(n[0],d,g),f=Z(n[1],p,m);if(r&&i&&s){const t=30*s;_+=-t*Math.log(1+Math.max(0,d-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-g)/t),f+=-t*Math.log(1+Math.max(0,p-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-m)/t)}return[_,f]}}function be(t){return t}function Re(t,e,i,n){const s=Ut(e)/i[0],o=Kt(e)/i[1];return n?Math.min(t,Math.max(s,o)):Math.min(t,Math.min(s,o))}function Se(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),Z(n,i/2,2*e)}function Pe(t,e,i,n,s){return i=void 0===i||i,function(o,r,a,l){if(void 0!==o){const r=n?Re(t,n,a,s):t;return i&&l?Se(o,r,e):Z(o,e,r)}}}function Me(t){if(void 0!==t)return 0}function Ie(t){if(void 0!==t)return t}function Le(t){return Math.pow(t,3)}function Fe(t){return 1-Le(1-t)}function Ae(t){return 3*t*t-2*t*t*t}function Oe(t){return t}ce(gt),ce(ft),xe=gt,Ee=function(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let s=0;s<n;s+=i){e[s]=lt*t[s]/180;let i=at*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));i>ut?i=ut:i<-ut&&(i=-ut),e[s+1]=i}return e},we=function(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let s=0;s<n;s+=i)e[s]=180*t[s]/lt,e[s+1]=360*Math.atan(Math.exp(t[s+1]/at))/Math.PI-90;return e},ft.forEach((function(t){xe.forEach((function(e){Ct(t,e,Ee),Ct(e,t,we)}))}));const ke="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",ze=ke.includes("firefox"),Ne=(ke.includes("safari")&&!ke.includes("chrom")&&(ke.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ke)),ke.includes("webkit")&&!ke.includes("edge")),De=ke.includes("macintosh"),je="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Ge="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Ke="undefined"!=typeof Image&&Image.prototype.decode,Ve=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function Ze(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function Be(t,e,i,n,s,o,r,a){const l=Math.sin(o),h=Math.cos(o);return t[0]=n*h,t[1]=s*l,t[2]=-n*l,t[3]=s*h,t[4]=r*n*h-a*n*l+e,t[5]=r*s*l+a*s*h+i,t}function Ue(t,e){const i=(n=e)[0]*n[3]-n[1]*n[2];var n;V(0!==i,32);const s=e[0],o=e[1],r=e[2],a=e[3],l=e[4],h=e[5];return t[0]=a/i,t[1]=-o/i,t[2]=-r/i,t[3]=s/i,t[4]=(r*h-a*l)/i,t[5]=-(s*h-o*l)/i,t}let Xe;new Array(6);const He=[1,0,0,1,0,0],We=class extends M{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function(t){let e,i,n,s=!1;return function(){const o=Array.prototype.slice.call(arguments);return s&&this===n&&a(o,i)||(s=!0,n=this,i=o,e=t.apply(this,arguments)),e}}((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return b()}closestPointXY(t,e,i,n){return b()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return b()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Pt(t),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)}rotate(t,e){b()}scale(t,e,i){b()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return b()}getType(){return b()}applyTransform(t){b()}intersectsExtent(t){return b()}translate(t,e){b()}transform(t,e){const i=le(t),n="tile-pixels"==i.getUnits()?function(t,n,s){const o=i.getExtent(),r=i.getWorldExtent(),a=Kt(r)/Kt(o);return Be(He,r[0],r[3],a,-a,0,0,0),function(t,e,i,n,s,o){o=o||[];let r=0;for(let e=0;e<i;e+=n){const i=t[e],n=t[e+1];o[r++]=s[0]*i+s[2]*n+s[4],o[r++]=s[1]*i+s[3]*n+s[5]}o&&o.length!=r&&(o.length=r)}(t,0,t.length,s,He,n),pe(i,e)(t,n,s)}:pe(i,e);return this.applyTransform(n),this}};function Ye(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}const qe=class extends We{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return e=this.flatCoordinates,i=this.flatCoordinates.length,n=this.stride,Lt(Pt(t),e,0,i,n);var e,i,n}getCoordinates(){return b()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Ye(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){b()}setLayout(t,e,i){let n;if(t)n=Ye(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}n=e.length,t=function(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();!function(t,e,i,n,s,o,r){r=r||[];const a=Math.cos(s),l=Math.sin(s),h=o[0],c=o[1];let u=0;for(let e=0;e<i;e+=n){const i=t[e]-h,s=t[e+1]-c;r[u++]=h+i*a-s*l,r[u++]=c+i*l+s*a;for(let i=e+2;i<e+n;++i)r[u++]=t[i]}r&&r.length!=u&&(r.length=u)}(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=Nt(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();!function(t,e,i,n,s,o,r,a){a=a||[];const l=r[0],h=r[1];let c=0;for(let e=0;e<i;e+=n){const i=t[e]-l,r=t[e+1]-h;a[c++]=l+s*i,a[c++]=h+o*r;for(let i=e+2;i<e+n;++i)a[c++]=t[i]}a&&a.length!=c&&(a.length=c)}(n,0,n.length,s,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();!function(t,e,i,n,s,o,r){r=r||[];let a=0;for(let e=0;e<i;e+=n){r[a++]=t[e]+s,r[a++]=t[e+1]+o;for(let i=e+2;i<e+n;++i)r[a++]=t[i]}r&&r.length!=a&&(r.length=a)}(i,0,i.length,n,t,e,i),this.changed()}}};function Qe(t,e,i,n,s,o,r){const a=t[e],l=t[e+1],h=t[i]-a,c=t[i+1]-l;let u;if(0===h&&0===c)u=e;else{const d=((s-a)*h+(o-l)*c)/(h*h+c*c);if(d>1)u=i;else{if(d>0){for(let s=0;s<n;++s)r[s]=Y(t[e+s],t[i+s],d);return void(r.length=n)}u=e}}for(let e=0;e<n;++e)r[e]=t[u+e];r.length=n}function $e(t,e,i,n,s){let o=t[e],r=t[e+1];for(e+=n;e<i;e+=n){const i=t[e],n=t[e+1],a=U(o,r,i,n);a>s&&(s=a),o=i,r=n}return s}function Je(t,e,i,n,s,o,r,a,l,h,c){if(e==i)return h;let u,d;if(0===s){if(d=U(r,a,t[e],t[e+1]),d<h){for(u=0;u<n;++u)l[u]=t[e+u];return l.length=n,d}return h}c=c||[NaN,NaN];let g=e+n;for(;g<i;)if(Qe(t,g-n,g,n,r,a,c),d=U(r,a,c[0],c[1]),d<h){for(h=d,u=0;u<n;++u)l[u]=c[u];l.length=n,g+=n}else g+=n*Math.max((Math.sqrt(d)-Math.sqrt(h))/s|0,1);if(o&&(Qe(t,i-n,e,n,r,a,c),d=U(r,a,c[0],c[1]),d<h)){for(h=d,u=0;u<n;++u)l[u]=c[u];l.length=n}return h}function ti(t,e,i,n){for(let s=0,o=i.length;s<o;++s){const o=i[s];for(let i=0;i<n;++i)t[e++]=o[i]}return e}function ei(t,e){return e*Math.round(t/e)}function ii(t,e,i,n,s,o,r){if(e==i)return r;let a,l,h=ei(t[e],s),c=ei(t[e+1],s);e+=n,o[r++]=h,o[r++]=c;do{if(a=ei(t[e],s),l=ei(t[e+1],s),(e+=n)==i)return o[r++]=a,o[r++]=l,r}while(a==h&&l==c);for(;e<i;){const i=ei(t[e],s),u=ei(t[e+1],s);if(e+=n,i==a&&u==l)continue;const d=a-h,g=l-c,p=i-h,m=u-c;d*m==g*p&&(d<0&&p<d||d==p||d>0&&p>d)&&(g<0&&m<g||g==m||g>0&&m>g)?(a=i,l=u):(o[r++]=a,o[r++]=l,h=a,c=l,a=i,l=u)}return o[r++]=a,o[r++]=l,r}function ni(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let r=e;r<i;r+=n)s[o++]=t.slice(r,r+n);return s.length=o,s}function si(t,e,i,n){let s=0,o=t[i-n],r=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];s+=r*i-o*n,o=i,r=n}return s/2}class oi extends qe{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new oi(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<wt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Je(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return si(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ni(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=function(t,e,i,n,s,o,r){const a=(i-e)/n;if(a<3){for(;e<i;e+=n)o[r++]=t[e],o[r++]=t[e+1];return r}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[e,i-n];let c=0;for(;h.length>0;){const i=h.pop(),o=h.pop();let r=0;const a=t[o],u=t[o+1],d=t[i],g=t[i+1];for(let e=o+n;e<i;e+=n){const i=B(t[e],t[e+1],a,u,d,g);i>r&&(c=e,r=i)}r>s&&(l[(c-e)/n]=1,o+n<c&&h.push(o,c),c+n<i&&h.push(c,i))}for(let i=0;i<a;++i)l[i]&&(o[r++]=t[e+i*n],o[r++]=t[e+i*n+1]);return r}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new oi(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ti(this.flatCoordinates,0,t,this.stride),this.changed()}}const ri=oi;class ai extends qe{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new ai(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,o=U(t,e,s[0],s[1]);if(o<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=s[e];return i.length=t,o}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return function(t,e){const i=t[0],n=t[1];return St(i,n,i,n,e)}(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return bt(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,i,n){for(let n=0,s=i.length;n<s;++n)t[e++]=i[n];return e}(this.flatCoordinates,0,t,this.stride),this.changed()}}const li=ai;function hi(t,e,i,n,s){return!At(s,(function(s){return!ci(t,e,i,n,s[0],s[1])}))}function ci(t,e,i,n,s,o){let r=0,a=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];l<=o?n>o&&(i-a)*(o-l)-(s-a)*(n-l)>0&&r++:n<=o&&(i-a)*(o-l)-(s-a)*(n-l)<0&&r--,a=i,l=n}return 0!==r}function ui(t,e,i,n,s,o){if(0===i.length)return!1;if(!ci(t,e,i[0],n,s,o))return!1;for(let e=1,r=i.length;e<r;++e)if(ci(t,i[e-1],i[e],n,s,o))return!1;return!0}function di(t,e,i,n,s){const o=Lt([1/0,1/0,-1/0,-1/0],t,e,i,n);return!!Xt(s,o)&&(a=o,(r=s)[0]<=a[0]&&a[2]<=r[2]&&r[1]<=a[1]&&a[3]<=r[3]||o[0]>=s[0]&&o[2]<=s[2]||o[1]>=s[1]&&o[3]<=s[3]||function(t,e,i,n,o){let r;for(e+=n;e<i;e+=n)if(a=t.slice(e-n,e),l=t.slice(e,e+n),r=function(t,e,i){let n=!1;const s=Rt(t,e),o=Rt(t,i);if(s===xt.INTERSECTING||o===xt.INTERSECTING)n=!0;else{const r=t[0],a=t[1],l=t[2],h=t[3],c=e[0],u=e[1],d=i[0],g=i[1],p=(g-u)/(d-c);let m,_;o&xt.ABOVE&&!(s&xt.ABOVE)&&(m=d-(g-h)/p,n=m>=r&&m<=l),n||!(o&xt.RIGHT)||s&xt.RIGHT||(_=g-(d-l)*p,n=_>=a&&_<=h),n||!(o&xt.BELOW)||s&xt.BELOW||(m=d-(g-a)/p,n=m>=r&&m<=l),n||!(o&xt.LEFT)||s&xt.LEFT||(_=g-(d-r)*p,n=_>=a&&_<=h)}return n}(s,a,l),r)return r;var a,l;return!1}(t,e,i,n));var r,a}function gi(t,e,i,n,s){return!!(di(t,e,i,n,s)||ci(t,e,i,n,s[0],s[1])||ci(t,e,i,n,s[0],s[3])||ci(t,e,i,n,s[2],s[1])||ci(t,e,i,n,s[2],s[3]))}function pi(t,e,i,n){for(;e<i-n;){for(let s=0;s<n;++s){const o=t[e+s];t[e+s]=t[i-n+s],t[i-n+s]=o}e+=n,i-=n}}function mi(t,e,i,n){let s=0,o=t[i-n],r=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];s+=(i-o)*(n+r),o=i,r=n}return 0===s?void 0:s>0}function _i(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,r=i.length;o<r;++o){const r=i[o],a=mi(t,e,r,n);(0===o?s&&a||!s&&!a:s&&!a||!s&&a)&&pi(t,e,r,n),e=r}return e}class fi extends qe{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?r(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new fi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<wt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,i,n,s){for(let o=0,r=i.length;o<r;++o){const r=i[o];s=$e(t,e,r,n,s),e=r}return s}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,i,n,s,o,r,a,l,h,c){c=c||[NaN,NaN];for(let u=0,d=i.length;u<d;++u){const d=i[u];h=Je(t,e,d,n,s,o,r,a,l,h,c),e=d}return h}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return ui(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return function(t,e,i,n){let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o];s+=si(t,e,r,n),e=r}return s}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),_i(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,function(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let r=0,a=i.length;r<a;++r){const a=i[r];s[o++]=ni(t,e,a,n,s[o]),e=a}return s.length=o,s}(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Nt(this.getExtent());this.flatInteriorPoint_=function(t,e,i,n,o,r,a){let l,h,c,u,d,g,p;const m=o[r+1],_=[];for(let s=0,o=i.length;s<o;++s){const o=i[s];for(u=t[o-n],g=t[o-n+1],l=e;l<o;l+=n)d=t[l],p=t[l+1],(m<=g&&p<=m||g<=m&&m<=p)&&(c=(m-g)/(p-g)*(d-u)+u,_.push(c)),u=d,g=p}let f=NaN,v=-1/0;for(_.sort(s),u=_[0],l=1,h=_.length;l<h;++l){d=_[l];const s=Math.abs(d-u);s>v&&(c=(u+d)/2,ui(t,e,i,n,c,m)&&(f=c,v=s)),u=d}return isNaN(f)&&(f=o[r]),a?(a.push(f,m,v),a):[f,m,v]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new li(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new ri(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let o=0,r=i.length;o<r;++o){const r=i[o],a=new ri(e.slice(s,r),t);n.push(a),s=r}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;!function(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,r=i.length;o<r;++o){const r=i[o],a=mi(t,e,r,n);if(0===o){if(s&&a||!s&&!a)return!1}else if(s&&!a||!s&&a)return!1;e=r}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=_i(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=function(t,e,i,n,s,o,r,a){for(let l=0,h=i.length;l<h;++l){const h=i[l];r=ii(t,e,h,n,s,o,r),a.push(r),e=h}return r}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new fi(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return function(t,e,i,n,s){if(!gi(t,e,i[0],n,s))return!1;if(1===i.length)return!0;for(let e=1,o=i.length;e<o;++e)if(hi(t,i[e-1],i[e],n,s)&&!di(t,i[e-1],i[e],n,s))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=function(t,e,i,n,s){s=s||[];let o=0;for(let r=0,a=i.length;r<a;++r){const a=ti(t,e,i[r],n);s[o++]=a,e=a}return s.length=o,s}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const vi=fi;function yi(t){if(Ht(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],i=t[1],n=t[2],s=t[3],o=[e,i,e,s,n,s,n,i,e,i];return new fi(o,"XY",[o.length])}function Ci(t,e){setTimeout((function(){t(e)}),0)}function xi(t){return!(t.sourceCenter&&t.targetCenter&&!Wt(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Ei(t,e,i,n,s){const o=Math.cos(-s);let r=Math.sin(-s),a=t[0]*o-t[1]*r,l=t[1]*o+t[0]*r;return a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,r=-r,[a*o-l*r,l*o+a*r]}const wi=class extends M{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=ue(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&se(),t.center&&(t.center=ye(t.center,this.projection_)),t.extent&&(t.extent=Ce(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in it)delete e[t];this.setProperties(e,!0);const i=function(t){let e,i,n;let s=void 0!==t.minZoom?t.minZoom:0,r=void 0!==t.maxZoom?t.maxZoom:28;const a=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,h=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,u=ue(t.projection,"EPSG:3857"),d=u.getExtent();let g=t.constrainOnlyCenter,p=t.extent;if(l||p||!u.isGlobal()||(g=!1,p=d),void 0!==t.resolutions){const a=t.resolutions;i=a[s],n=void 0!==a[r]?a[r]:a[a.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(s,r,a,l){if(void 0!==s){const h=t[0],c=t[t.length-1],u=i?Re(h,i,a,n):h;if(l)return e?Se(s,u,c):Z(s,c,u);const d=Math.min(u,s),g=Math.floor(o(t,d,r));return t[g]>u&&g<t.length-1?t[g+1]:t[g]}}}(a,h,!g&&p,c):Pe(i,n,h,!g&&p,c)}else{const o=(d?Math.max(Ut(d),Kt(d)):360*ot.degrees/u.getMetersPerUnit())/st/Math.pow(2,0),l=o/Math.pow(2,28);i=t.maxResolution,void 0!==i?s=0:i=o/Math.pow(a,s),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(a,r):o/Math.pow(a,r):l),r=s+Math.floor(Math.log(i/n)/Math.log(a)),n=i/Math.pow(a,r-s),e=t.constrainResolution?function(t,e,i,n,s,o){return n=void 0===n||n,i=void 0!==i?i:0,function(r,a,l,h){if(void 0!==r){const c=s?Re(e,s,l,o):e;if(h)return n?Se(r,c,i):Z(r,i,c);const u=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(t)-u),g=-a*(.5-u)+.5,p=Math.min(c,r),m=Math.floor(Math.log(e/p)/Math.log(t)+g),_=Math.max(d,m);return Z(e/Math.pow(t,_),i,c)}}}(a,i,n,h,!g&&p,c):Pe(i,n,h,!g&&p,c)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:s,zoomFactor:a}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Te(t.extent,t.constrainOnlyCenter,e)}const e=ue(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,Te(t,!1,!1)}return be}(t),s=i.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){const i=t.constrainRotation;return void 0===i||!0===i?(e=e||H(5),function(t,i){return i?t:void 0!==t?Math.abs(t)<=e?0:t:void 0}):!1===i?Ie:"number"==typeof i?function(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}(i):Ie}var e;return Me}(t);this.constraints_={center:n,resolution:s,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-e[3]+e[1]-n[1]),r=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-r])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let i=arguments[t];i.center&&(i=Object.assign({},i),i.center=ye(i.center,this.getProjection())),i.anchor&&(i=Object.assign({},i),i.anchor=ye(i.anchor,this.getProjection())),e[t]=i}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&Ci(e,!0));let s=Date.now(),o=this.targetCenter_.slice(),r=this.targetResolution_,a=this.targetRotation_;const l=[];for(;n<i;++n){const t=arguments[n],i={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||Ae,callback:e};if(t.center&&(i.sourceCenter=o,i.targetCenter=t.center.slice(),o=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=r,i.targetResolution=this.getResolutionForZoom(t.zoom),r=i.targetResolution):t.resolution&&(i.sourceResolution=r,i.targetResolution=t.resolution,r=i.targetResolution),void 0!==t.rotation){i.sourceRotation=a;const e=W(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=a+e,a=i.targetRotation}xi(i)?i.complete=!0:s+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let t;this.setHint(0,-this.hints_[0]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&Ci(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let i=0,o=n.length;i<o;++i){const o=n[i];if(o.complete)continue;const r=t-o.start;let a=o.duration>0?r/o.duration:1;a>=1?(o.complete=!0,a=1):s=!1;const l=o.easing(a);if(o.sourceCenter){const t=o.sourceCenter[0],e=o.sourceCenter[1],i=o.targetCenter[0],n=o.targetCenter[1];this.nextCenter_=o.targetCenter;const s=t+l*(i-t),r=e+l*(n-e);this.targetCenter_=[s,r]}if(o.sourceResolution&&o.targetResolution){const t=1===l?o.targetResolution:o.sourceResolution+l*(o.targetResolution-o.sourceResolution);if(o.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,o.anchor)}this.nextResolution_=o.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==o.sourceRotation&&void 0!==o.targetRotation){const t=1===l?W(o.targetRotation+Math.PI,2*Math.PI)-Math.PI:o.sourceRotation+l*(o.targetRotation-o.sourceRotation);if(o.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,o.anchor)}this.nextRotation_=o.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!o.complete)break}if(s){this.animations_[i]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&Ci(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();var s,o;return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],Yt(i,t-this.getRotation()),o=e,(s=i)[0]+=+o[0],s[1]+=+o[1]),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();return void 0!==n&&void 0!==s&&(i=[e[0]-t*(e[0]-n[0])/s,e[1]-t*(e[1]-n[1])/s]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?ve(t,this.getProjection()):t}getCenterInternal(){return this.get(it.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();V(e,1);const i=this.getResolution();V(void 0!==i,2);const n=this.getRotation();return V(void 0!==n,3),jt(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(it.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Ce(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=Ut(t)/e[0],n=Kt(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(it.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const t=this.getViewportSizeMinusPadding_();n=Ei(n,this.getViewportSize_(),[t[0]/2+s[3],t[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const s=o(this.resolutions_,t,1);n=s,e=this.resolutions_[s],i=s==this.resolutions_.length-1?2:e/this.resolutions_[s+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Z(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Z(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(V(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))V(!Ht(t),25),i=yi(Ce(t,this.getProjection()));else if("Circle"===t.getType()){const e=Ce(t.getExtent(),this.getProjection());i=yi(e),i.rotate(this.getRotation(),Nt(e))}else{const e=fe();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let r=1/0,a=1/0,l=-1/0,h=-1/0;for(let t=0,e=s.length;t<e;t+=o){const e=s[t]*i-s[t+1]*n,o=s[t]*n+s[t+1]*i;r=Math.min(r,e),a=Math.min(a,o),l=Math.max(l,e),h=Math.max(h,o)}return[r,a,l,h]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],s=void 0!==e.nearest&&e.nearest;let o;o=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const r=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(r,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?o:Math.max(a,o),a=this.getConstrainedResolution(a,s?0:1);const l=this.getRotation(),h=Math.sin(l),u=Math.cos(l),d=Nt(r);d[0]+=(n[1]-n[3])/2*a,d[1]+=(n[0]-n[2])/2*a;const g=d[0]*u-d[1]*h,p=d[1]*u+d[0]*h,m=this.getConstrainedCenter([g,p],a),_=e.callback?e.callback:c;void 0!==e.duration?this.animateInternal({resolution:a,center:m,duration:e.duration,easing:e.easing},_):(this.targetResolution_=a,this.targetCenter_=m,this.applyTargetState_(!1,!0),Ci(_,!0))}centerOn(t,e,i){this.centerOnInternal(ye(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Ei(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const o=this.padding_;if(o&&t){const r=this.getViewportSizeMinusPadding_(-i),a=Ei(t,n,[r[0]/2+o[3],r[1]/2+o[0]],e,i);s=[t[0]-a[0],t[1]-a[1]]}return s}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=ve(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ye(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ye(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?ye(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,s,i),r=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,n,s));this.get(it.ROTATION)!==n&&this.set(it.ROTATION,n),this.get(it.RESOLUTION)!==o&&(this.set(it.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),r&&this.get(it.CENTER)&&Wt(this.get(it.CENTER),r)||this.set(it.CENTER,r),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),r=this.constraints_.resolution(this.targetResolution_,n,o),a=this.constraints_.center(this.targetCenter_,r,o,!1,this.calculateCenterShift(this.targetCenter_,r,s,o));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=r,this.targetRotation_=s,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===r&&this.getRotation()===s&&this.getCenterInternal()&&Wt(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:a,resolution:r,duration:t,easing:Fe,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(t,e,i){i=i&&ye(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(1,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}};function Ti(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const bi=class extends J{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(D,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(D)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(E(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=C(t,g,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const i=this.getMapInternal();let n;!t&&i&&(t=i.getView()),e=t instanceof wi?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),n=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const s=this.getExtent();return Ti(n,e.viewState)&&(!s||Xt(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let n=e(t instanceof wi?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set("map",t)}getMapInternal(){return this.get("map")}setMap(t){this.mapPrecomposeKey_&&(E(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(E(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=C(t,tt,(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);V(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=C(this,g,t.render,t),this.changed())}setSource(t){this.set(D,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}},Ri="preload",Si="useInterimTilesOnError",Pi=class extends bi{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(Ri)}setPreload(t){this.set(Ri,t)}getUseInterimTilesOnError(){return this.get(Si)}setUseInterimTilesOnError(t){this.set(Si,t)}getData(t){return super.getData(t)}},Mi=class extends T{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return b()}getData(t){return null}prepareFrame(t){return b()}renderFrame(t,e){return b()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(n,s)=>{const o=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,s,o)}}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;2!==e.getState()&&3!==e.getState()||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return 2!=e&&3!=e&&t.addEventListener(g,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},Ii=class extends e{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}},Li=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Fi=/^([a-z]*)$|^hsla?\(.*\)$/i;const Ai=function(){const t={};let e=0;return function(i){let n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){let i=0;for(const n in t)0==(3&i++)&&(delete t[n],--e)}n=function(t){let e,i,n,s,o;if(Fi.exec(t)&&(t=function(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}(t)),Li.exec(t)){const r=t.length-1;let a;a=r<=4?1:2;const l=4===r||8===r;e=parseInt(t.substr(1+0*a,a),16),i=parseInt(t.substr(1+1*a,a),16),n=parseInt(t.substr(1+2*a,a),16),s=l?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,l&&(s=(s<<4)+s)),o=[e,i,n,s/255]}else t.startsWith("rgba(")?(o=t.slice(5,-1).split(",").map(Number),ki(o)):t.startsWith("rgb(")?(o=t.slice(4,-1).split(",").map(Number),o.push(1),ki(o)):V(!1,14);return o}(i),t[i]=n,++e}return n}}();function Oi(t){return Array.isArray(t)?t:Ai(t)}function ki(t){return t[0]=Z(t[0]+.5|0,0,255),t[1]=Z(t[1]+.5|0,0,255),t[2]=Z(t[2]+.5|0,0,255),t[3]=Z(t[3],0,1),t}function zi(t,e,i,n){let s;return s=i&&i.length?i.shift():Ge?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",n)}function Ni(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function Di(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function ji(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}let Gi=null;const Ki=class extends Mi{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n;Gi||(Gi=zi(1,1,void 0,{willReadFrequently:!0})),Gi.clearRect(0,0,1,1);try{Gi.drawImage(t,e,i,1,1,0,0,1,1),n=Gi.getImageData(0,0,1,1).data}catch(t){return Gi=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let s,o;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&a(Oi(t.style.backgroundColor),Oi(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=n;let t=s.style;t.position="absolute",t.width="100%",t.height="100%",o=zi();const e=o.canvas;s.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=s,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=Zt(i),s=Bt(i),o=zt(i),r=kt(i);Ze(e.coordinateToPixelTransform,n),Ze(e.coordinateToPixelTransform,s),Ze(e.coordinateToPixelTransform,o),Ze(e.coordinateToPixelTransform,r);const a=this.inversePixelTransform;Ze(a,n),Ze(a,s),Ze(a,o),Ze(a,r),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const s=new Ii(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_("prerender",t,e)}postRender(t,e){this.dispatchRenderEvent_("postrender",t,e)}getRenderTransform(t,e,i,n,s,o,r){const a=s/2,l=o/2,h=n/e,c=-h,u=-t[0]+r,d=-t[1];return Be(this.tempTransform,a,l,h,c,-i,u,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Vi=class extends d{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(g)}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){b()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:Le(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}};const Zi=class extends Vi{constructor(t,e,i,n,s,o){super(t,e,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function(){const t=zi(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=function(t,e,i){const n=t;let s=!0,o=!1,r=!1;const a=[x(n,"load",(function(){r=!0,o||e()}))];return n.src&&Ke?(o=!0,n.decode().then((function(){s&&e()})).catch((function(t){s&&(r?e():i())}))):a.push(x(n,"error",i)),function(){s=!1,a.forEach(E)}}(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},Bi=class{constructor(t,e,i,n,s,o){this.sourceProj_=t,this.targetProj_=e;let r={};const a=pe(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return r[e]||(r[e]=a(t)),r[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Ut(n)>=Ut(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ut(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ut(this.targetProj_.getExtent()):null;const l=Zt(i),h=Bt(i),c=zt(i),u=kt(i),d=this.transformInv_(l),g=this.transformInv_(h),p=this.transformInv_(c),m=this.transformInv_(u),_=10+(o?Math.max(0,Math.ceil(Math.log2(Ot(i)/(o*o*256*256)))):0);if(this.addQuad_(l,h,c,u,d,g,p,m,_),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}))}r={}}addTriangle_(t,e,i,n,s,o){this.triangles_.push({source:[n,s,o],target:[t,e,i]})}addQuad_(t,e,i,n,s,o,r,a,l){const h=Et([s,o,r,a]),c=this.sourceWorldWidth_?Ut(h)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1;let g=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(g=Ut(Et([t,e,i,n]))/this.targetWorldWidth_>.25||g),!d&&this.sourceProj_.isGlobal()&&c&&(g=c>.25||g)),!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3])&&!Xt(h,this.maxSourceExtent_))return;let p=0;if(!(g||isFinite(s[0])&&isFinite(s[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)g=!0;else if(p=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(r[0])&&isFinite(r[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=p&&2!=p&&4!=p&&8!=p)return;if(l>0){if(!g){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e);let o;o=d?(W(s[0],u)+W(r[0],u))/2-W(n[0],u):(s[0]+r[0])/2-n[0];const a=(s[1]+r[1])/2-n[1];g=o*o+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const h=[(e[0]+i[0])/2,(e[1]+i[1])/2],c=this.transformInv_(h),u=[(n[0]+t[0])/2,(n[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,e,h,u,s,o,c,d,l-1),this.addQuad_(u,h,i,n,d,c,r,a,l-1)}else{const h=[(t[0]+e[0])/2,(t[1]+e[1])/2],c=this.transformInv_(h),u=[(i[0]+n[0])/2,(i[1]+n[1])/2],d=this.transformInv_(u);this.addQuad_(t,h,u,n,s,c,d,a,l-1),this.addQuad_(h,e,i,u,c,o,r,d,l-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&p)&&this.addTriangle_(t,i,n,s,r,a),0==(14&p)&&this.addTriangle_(t,i,e,s,r,o),p&&(0==(13&p)&&this.addTriangle_(e,n,t,o,a,s),0==(7&p)&&this.addTriangle_(e,n,i,o,a,r))}calculateSourceExtent(){const t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,i,n){const s=e.source;It(t,s[0]),It(t,s[1]),It(t,s[2])})),t}getTriangles(){return this.triangles_}};let Ui;const Xi=[];function Hi(t,e,i,n,s){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,s)),t.restore()}function Wi(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function Yi(t,e,i,n){const s=me(i,e,t);let o=he(e,n,i);const r=e.getMetersPerUnit();void 0!==r&&(o*=r);const a=t.getMetersPerUnit();void 0!==a&&(o/=a);const l=t.getExtent();if(!l||Tt(l,s)){const e=he(t,o,s)/o;isFinite(e)&&e>0&&(o/=e)}return o}const qi=class extends Vi{constructor(t,e,i,n,s,o,r,a,l,h,c,u){super(s,0,{interpolate:!!u}),this.renderEdges_=void 0!==c&&c,this.pixelRatio_=r,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const d=n.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const m=g?Vt(d,g):d;if(0===Ot(m))return void(this.state=4);const _=t.getExtent();_&&(p=p?Vt(p,_):_);const f=n.getResolution(this.wrappedTileCoord_[0]),v=function(t,e,i,n){const s=Nt(i);let o=Yi(t,e,s,n);return(!isFinite(o)||o<=0)&&At(i,(function(i){return o=Yi(t,e,i,n),isFinite(o)&&o>0})),o}(t,i,m,f);if(!isFinite(v)||v<=0)return void(this.state=4);const y=void 0!==h?h:.5;if(this.triangulation_=new Bi(t,i,m,p,v*y,f),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=e.getZForResolution(v);let C=this.triangulation_.calculateSourceExtent();if(p&&(t.canWrapX()?(C[1]=Z(C[1],p[1],p[3]),C[3]=Z(C[3],p[1],p[3])):C=Vt(C,p)),Ot(C)){const t=e.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=l(this.sourceZ_,e,i,r);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=3;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],s="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),r=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,i,n,s,o,r,a,l,h,c,u){const d=zi(Math.round(i*t),Math.round(i*e),Xi);if(u||(d.imageSmoothingEnabled=!1),0===l.length)return d.canvas;function g(t){return Math.round(t*i)/i}d.scale(i,i),d.globalCompositeOperation="lighter";const p=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,i){var n,s;n=p,(s=t.extent)[0]<n[0]&&(n[0]=s[0]),s[2]>n[2]&&(n[2]=s[2]),s[1]<n[1]&&(n[1]=s[1]),s[3]>n[3]&&(n[3]=s[3])}));const m=Ut(p),_=Kt(p),f=zi(Math.round(i*m/n),Math.round(i*_/n),Xi);u||(f.imageSmoothingEnabled=!1);const v=i/n;l.forEach((function(t,e,i){const n=t.extent[0]-p[0],s=-(t.extent[3]-p[3]),o=Ut(t.extent),r=Kt(t.extent);t.image.width>0&&t.image.height>0&&f.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,n*v,s*v,o*v,r*v)}));const y=Zt(r);return a.getTriangles().forEach((function(t,e,s){const r=t.source,a=t.target;let l=r[0][0],h=r[0][1],c=r[1][0],m=r[1][1],_=r[2][0],v=r[2][1];const C=g((a[0][0]-y[0])/o),x=g(-(a[0][1]-y[1])/o),E=g((a[1][0]-y[0])/o),w=g(-(a[1][1]-y[1])/o),T=g((a[2][0]-y[0])/o),b=g(-(a[2][1]-y[1])/o),R=l,S=h;l=0,h=0,c-=R,m-=S,_-=R,v-=S;const P=function(t){const e=t.length;for(let i=0;i<e;i++){let n=i,s=Math.abs(t[i][i]);for(let o=i+1;o<e;o++){const e=Math.abs(t[o][i]);e>s&&(s=e,n=o)}if(0===s)return null;const o=t[n];t[n]=t[i],t[i]=o;for(let n=i+1;n<e;n++){const s=-t[n][i]/t[i][i];for(let o=i;o<e+1;o++)i==o?t[n][o]=0:t[n][o]+=s*t[i][o]}}const i=new Array(e);for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n];for(let s=n-1;s>=0;s--)t[s][e]-=t[s][n]*i[n]}return i}([[c,m,0,0,E-C],[_,v,0,0,T-C],[0,0,c,m,w-x],[0,0,_,v,b-x]]);if(P){if(d.save(),d.beginPath(),function(){if(void 0===Ui){const t=zi(6,6,Xi);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Hi(t,4,5,4,0),Hi(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;Ui=Wi(e,0)||Wi(e,4)||Wi(e,8),Ni(t),Xi.push(t.canvas)}return Ui}()||!u){d.moveTo(E,w);const t=4,e=C-E,i=x-w;for(let n=0;n<t;n++)d.lineTo(E+g((n+1)*e/t),w+g(n*i/(t-1))),n!=t-1&&d.lineTo(E+g((n+1)*e/t),w+g((n+1)*i/(t-1)));d.lineTo(T,b)}else d.moveTo(E,w),d.lineTo(C,x),d.lineTo(T,b);d.clip(),d.transform(P[0],P[2],P[1],P[3],C,x),d.translate(p[0]-R,p[3]-S),d.scale(n/i,-n/i),d.drawImage(f.canvas,0,0),d.restore()}})),Ni(f),Xi.push(f.canvas),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,i){const n=t.target,s=(n[0][0]-y[0])/o,r=-(n[0][1]-y[1])/o,a=(n[1][0]-y[0])/o,l=-(n[1][1]-y[1])/o,h=(n[2][0]-y[0])/o,c=-(n[2][1]-y[1])/o;d.beginPath(),d.moveTo(a,l),d.lineTo(s,r),d.lineTo(h,c),d.closePath(),d.stroke()})),d.restore()),d.canvas}(n,s,this.pixelRatio_,r,this.sourceTileGrid_.getExtent(),o,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState();if(0==i||1==i){t++;const i=C(e,g,(function(n){const s=e.getState();2!=s&&3!=s&&4!=s||(E(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){0==t.getState()&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(E),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ni(this.canvas_.getContext("2d")),Xi.push(this.canvas_),this.canvas_=null),super.release()}};class Qi{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function $i(t,e,i,n,s){return void 0!==s?(s.minX=t,s.maxX=e,s.minY=i,s.maxY=n,s):new Qi(t,e,i,n)}const Ji=Qi;function tn(t){return t[0]>0&&t[1]>0}function en(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}const nn=class extends Ki{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new Ji(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return 2==i||4==i||3==i&&!n}getTile(t,e,i,n){const s=n.pixelRatio,o=n.viewState.projection,r=this.getLayer();let a=r.getSource().getTile(t,e,i,s,o);return 3==a.getState()&&r.getUseInterimTilesOnError()&&r.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(a)||(a=a.getInterimTile()),a}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=Ze(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!Tt(s,n))return null;const o=e.pixelRatio,r=e.viewState.projection,a=e.viewState,l=i.getRenderSource(),h=l.getTileGridForProjection(a.projection),c=l.getTilePixelRatio(e.pixelRatio);for(let t=h.getZForResolution(a.resolution);t>=h.getMinZoom();--t){const e=h.getTileCoordForCoordAndZ(n,t),i=l.getTile(t,e[1],e[2],o,r);if(!(i instanceof Zi||i instanceof qi)||i instanceof qi&&4===i.getState())return null;if(2!==i.getState())continue;const s=h.getOrigin(t),u=en(h.getTileSize(t)),d=h.getResolution(t),g=Math.floor(c*((n[0]-s[0])/d-e[1]*u[0])),p=Math.floor(c*((s[1]-n[1])/d-e[2]*u[1])),m=Math.round(c*l.getGutterForProjection(a.projection));return this.getImageData(i.getImage(),g+m,p+m)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,o=n.projection,r=n.resolution,a=n.center,l=n.rotation,h=t.pixelRatio,c=this.getLayer(),u=c.getSource(),d=u.getRevision(),g=u.getTileGridForProjection(o),p=g.getZForResolution(r,u.zDirection),m=g.getResolution(p);let _=t.extent;const f=t.viewState.resolution,v=u.getTilePixelRatio(h),y=Math.round(Ut(_)/f*h),C=Math.round(Kt(_)/f*h),x=i.extent&&Ce(i.extent);x&&(_=Vt(_,Ce(i.extent)));const E=m*y/2/v,w=m*C/2/v,T=[a[0]-E,a[1]-w,a[0]+E,a[1]+w],b=g.getTileRangeForExtentAndZ(_,p),R={};R[p]={};const P=this.createLoadedTileFinder(u,o,R),M=this.tmpExtent,I=this.tmpTileRange_;this.newTiles_=!1;const L=l?Gt(n.center,f,l,t.size):void 0;for(let e=b.minX;e<=b.maxX;++e)for(let n=b.minY;n<=b.maxY;++n){if(l&&!g.tileCoordIntersectsViewport([p,e,n],L))continue;const s=this.getTile(p,e,n,t);if(this.isDrawableTile(s)){const e=S(this);if(2==s.getState()){R[p][s.tileCoord.toString()]=s;let t=s.inTransition(e);t&&1!==i.opacity&&(s.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(s)||(this.newTiles_=!0)}if(1===s.getAlpha(e,t.time))continue}const o=g.getTileCoordChildTileRange(s.tileCoord,I,M);let r=!1;o&&(r=P(p+1,o)),r||g.forEachTileCoordParentTileRange(s.tileCoord,P,I,M)}const F=m/r*h/v;Be(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/h,1/h,l,-y/2,-C/2);const A=function(t){const e="matrix("+t.join(", ")+")";if(Ge)return e;const i=Xe||(Xe=document.createElement("div"));return i.style.transform=e,i.style.transform}(this.pixelTransform);this.useContainer(e,A,this.getBackground(t));const O=this.context,k=O.canvas;Ue(this.inversePixelTransform,this.pixelTransform),Be(this.tempTransform,y/2,C/2,F,F,0,-y/2,-C/2),k.width!=y||k.height!=C?(k.width=y,k.height=C):this.containerReused||O.clearRect(0,0,y,C),x&&this.clipUnrotated(O,t,x),u.getInterpolate()||(O.imageSmoothingEnabled=!1),this.preRender(O,t),this.renderedTiles.length=0;let z,N,D,j=Object.keys(R).map(Number);j.sort(s),1!==i.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(z=[],N=[]):j=j.reverse();for(let e=j.length-1;e>=0;--e){const i=j[e],n=u.getTilePixelSize(i,h,o),s=g.getResolution(i)/m,r=n[0]*s*F,a=n[1]*s*F,l=g.getTileCoordForCoordAndZ(Zt(T),i),c=g.getTileCoordExtent(l),d=Ze(this.tempTransform,[v*(c[0]-T[0])/m,v*(T[3]-c[3])/m]),_=v*u.getGutterForProjection(o),f=R[i];for(const e in f){const n=f[e],s=n.tileCoord,o=l[1]-s[1],h=Math.round(d[0]-(o-1)*r),c=l[2]-s[2],g=Math.round(d[1]-(c-1)*a),m=Math.round(d[0]-o*r),v=Math.round(d[1]-c*a),y=h-m,C=g-v,x=p===i,E=x&&1!==n.getAlpha(S(this),t.time);let w=!1;if(!E)if(z){D=[m,v,m+y,v,m+y,v+C,m,v+C];for(let t=0,e=z.length;t<e;++t)if(p!==i&&i<N[t]){const e=z[t];Xt([m,v,m+y,v+C],[e[0],e[3],e[4],e[7]])&&(w||(O.save(),w=!0),O.beginPath(),O.moveTo(D[0],D[1]),O.lineTo(D[2],D[3]),O.lineTo(D[4],D[5]),O.lineTo(D[6],D[7]),O.moveTo(e[6],e[7]),O.lineTo(e[4],e[5]),O.lineTo(e[2],e[3]),O.lineTo(e[0],e[1]),O.clip())}z.push(D),N.push(i)}else O.clearRect(m,v,y,C);this.drawTileImage(n,t,m,v,y,C,_,x),z&&!E?(w&&O.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(t.usedTiles,u,n)}}return this.renderedRevision=d,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Mt(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=h,this.renderedProjection=o,this.manageTilePyramid(t,u,g,h,o,_,p,c.getPreload()),this.scheduleExpireCache(t,u),this.postRender(O,t),i.extent&&O.restore(),O.imageSmoothingEnabled=!0,A!==k.style.transform&&(k.style.transform=A),this.container}drawTileImage(t,e,i,n,s,o,r,a){const l=this.getTileImage(t);if(!l)return;const h=S(this),c=e.layerStatesArray[e.layerIndex],u=c.opacity*(a?t.getAlpha(h,e.time):1),d=u!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,r,r,l.width-2*r,l.height-2*r,i,n,s,o),d&&this.context.restore(),u!==c.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const n=S(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=S(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,s,o,r,a,l){const h=S(e);h in t.wantedTiles||(t.wantedTiles[h]={});const c=t.wantedTiles[h],u=t.tileQueue,d=i.getMinZoom(),g=t.viewState.rotation,p=g?Gt(t.viewState.center,t.viewState.resolution,g,t.size):void 0;let m,_,f,v,y,C,x=0;for(C=d;C<=r;++C)for(_=i.getTileRangeForExtentAndZ(o,C,_),f=i.getResolution(C),v=_.minX;v<=_.maxX;++v)for(y=_.minY;y<=_.maxY;++y)g&&!i.tileCoordIntersectsViewport([C,v,y],p)||(r-C<=a?(++x,m=e.getTile(C,v,y,n,s),0==m.getState()&&(c[m.getKey()]=!0,u.isKeyQueued(m.getKey())||u.enqueue([m,h,i.getTileCoordCenter(m.tileCoord),f])),void 0!==l&&l(m)):e.useTile(C,v,y,s));e.updateCacheSize(x,s)}},sn=class extends Pi{constructor(t){super(t)}createRenderer(){return new nn(this)}},on="add",rn="remove",an="length";class ln extends e{constructor(t,e,i){super(t),this.element=e,this.index=i}}const hn=class extends M{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(an)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new ln(on,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new ln(rn,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new ln(rn,i,t)),this.dispatchEvent(new ln(on,e,t))}updateLength_(){this.set(an,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new K(58)}};function cn(t,e,i){return e+":"+t+":"+(i?function(t){return"string"==typeof t?t:function(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}(t)}(i):"null")}const un=new class{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=cn(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const s=cn(t,e,i);this.cache_[s]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}};function dn(t,e){un.expire()}const gn=class extends n{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){b()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Be(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ue(n,i)}forEachFeatureAtCoordinate(t,e,i,n,s,o,r,a){let l;const h=e.viewState;function c(t,e,i,n){return s.call(o,e,t?i:null,n)}const u=h.projection,d=qt(t.slice(),u),g=[[0,0]];if(u.canWrapX()&&n){const t=Ut(u.getExtent());g.push([-t,0],[t,0])}const p=e.layerStatesArray,m=p.length,_=[],f=[];for(let n=0;n<g.length;n++)for(let s=m-1;s>=0;--s){const o=p[s],u=o.layer;if(u.hasRenderer()&&Ti(o,h)&&r.call(a,u)){const s=u.getRenderer(),r=u.getSource();if(s&&r){const a=r.getWrapX()?d:t,h=c.bind(null,o.managed);f[0]=a[0]+g[n][0],f[1]=a[1]+g[n][1],l=s.forEachFeatureAtCoordinate(f,e,i,h,_)}if(l)return l}}if(0===_.length)return;const v=1/_.length;return _.forEach(((t,e)=>t.distanceSq+=e*v)),_.sort(((t,e)=>t.distanceSq-e.distanceSq)),_.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,i,n,s,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,l,this,s,o)}getMap(){return this.map_}renderFrame(t){b()}flushDeclutterItems(t){}scheduleExpireIconCache(t){un.canExpireCache()&&t.postRenderFunctions.push(dn)}},pn="ol-hidden",mn="ol-unselectable",_n="ol-control",fn="ol-collapsed",vn=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),new M);!function(){const t=["monospace","serif"];t.length}();const yn=class extends gn{constructor(t){super(t),this.fontChangeListenerKey_=C(vn,i,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=mn+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new Ii(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){E(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(tt,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=t.viewState;this.children_.length=0;const n=this.declutterLayers_;n.length=0;let s=null;for(let o=0,r=e.length;o<r;++o){const r=e[o];t.layerIndex=o;const a=r.layer,l=a.getSourceState();if(!Ti(r,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(t,s);h&&(h!==s&&(this.children_.push(h),s=h),"getDeclutter"in a&&n.push(a))}this.flushDeclutterItems(t),function(t,e){const i=t.childNodes;for(let n=0;;++n){const s=i[n],o=e[n];if(!s&&!o)break;s!==o&&(s?o?t.insertBefore(o,s):(t.removeChild(s),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}flushDeclutterItems(t){const e=this.declutterLayers_;for(let i=e.length-1;i>=0;--i)e[i].renderDeclutter(t);e.length=0}};class Cn extends e{constructor(t,e){super(t),this.layer=e}}const xn="layers";class En extends J{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(xn,this.handleLayersChanged_),i?Array.isArray(i)?i=new hn(i.slice(),{unique:!0}):V("function"==typeof i.getArray,43):i=new hn(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(E),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(C(t,on,this.handleLayersAdd_,this),C(t,rn,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(E);u(this.listenerKeys_);const e=t.getArray();for(let t=0,i=e.length;t<i;t++){const i=e[t];this.registerLayerListeners_(i),this.dispatchEvent(new Cn("addlayer",i))}this.changed()}registerLayerListeners_(t){const e=[C(t,i,this.handleLayerChange_,this),C(t,g,this.handleLayerChange_,this)];t instanceof En&&e.push(C(t,"addlayer",this.handleLayerGroupAdd_,this),C(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[S(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Cn("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Cn("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Cn("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=S(e);this.listenerKeys_[i].forEach(E),delete this.listenerKeys_[i],this.dispatchEvent(new Cn("removelayer",e)),this.changed()}getLayers(){return this.get(xn)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new Cn("removelayer",t[e]))}this.set(xn,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const n=this.getLayerState();let s=n.zIndex;t||void 0!==n.zIndex||(s=0);for(let t=i,o=e.length;t<o;t++){const i=e[t];i.opacity*=n.opacity,i.visible=i.visible&&n.visible,i.maxResolution=Math.min(i.maxResolution,n.maxResolution),i.minResolution=Math.max(i.minResolution,n.minResolution),i.minZoom=Math.max(i.minZoom,n.minZoom),i.maxZoom=Math.min(i.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==i.extent?i.extent=Vt(i.extent,n.extent):i.extent=n.extent),void 0===i.zIndex&&(i.zIndex=s)}return e}getSourceState(){return"ready"}}const wn=En,Tn=class extends e{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}},bn=class extends Tn{constructor(t,e,i,n,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Rn={SINGLECLICK:"singleclick",CLICK:m,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Sn="pointermove",Pn="pointerdown",Mn=class extends d{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=C(i,Pn,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=C(i,Sn,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(v,this.boundHandleTouchMove_,!!Ve&&{passive:!1})}emulateClick_(t){let e=new bn(Rn.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new bn(Rn.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new bn(Rn.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Rn.POINTERUP||e.type==Rn.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=Rn.POINTERDOWN&&e.type!=Rn.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new bn(Rn.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new bn(Rn.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(C(t,Rn.POINTERMOVE,this.handlePointerMove_,this),C(t,Rn.POINTERUP,this.handlePointerUp_,this),C(this.element_,Rn.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(C(this.element_.getRootNode(),Rn.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new bn(Rn.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new bn(Rn.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(E(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(v,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(E(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},In="postrender",Ln="loadstart",Fn="loadend",An="layergroup",On="size",kn="target",zn="view",Nn=1/0,Dn=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,u(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){V(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=Nn&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,s=e[t],o=i[t],r=t;for(;t<n>>1;){const s=this.getLeftChildIndex_(t),o=this.getRightChildIndex_(t),r=o<n&&i[o]<i[s]?o:s;e[t]=e[r],i[t]=i[r],t=r}e[t]=s,i[t]=o,this.siftDown_(r,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,s=i[e],o=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>o))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=s,n[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const s=e.length;let o,r,a;for(r=0;r<s;++r)o=e[r],a=t(o),a==Nn?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=a,e[n++]=o);e.length=n,i.length=n,this.heapify_()}},jn=class extends Dn{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(g,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(2===i||3===i||4===i){3!==i&&e.removeEventListener(g,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,s,o=0;for(;this.tilesLoading_<t&&o<e&&this.getCount()>0;)n=this.dequeue()[0],s=n.getKey(),i=n.getState(),0!==i||s in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++o,n.load())}},Gn=class extends M{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){ji(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&ji(this.element);for(let t=0,e=this.listenerKeys.length;t<e;++t)E(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==c&&this.listenerKeys.push(C(t,In,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}},Kn=class extends Gn{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.expandClassName?t.expandClassName:e+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"",o=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const r=void 0!==t.label?t.label:"i";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r,this.label_.className=n):this.label_=r;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(m,this.handleClick_.bind(this),!1);const l=e+" "+mn+" "+_n+(this.collapsed_&&this.collapsible_?" "+fn:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),i=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!a(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fn),this.collapsed_?Di(this.collapseLabel_,this.label_):Di(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}},Vn=class extends Gn{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"",n=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(m,this.handleClick_.bind(this),!1);const r=e+" "+mn+" "+_n,a=this.element;a.className=r,a.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(pn)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Fe}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(pn);t||0!==i?t&&0!==i&&this.element.classList.remove(pn):this.element.classList.add(pn)}this.label_.style.transform=t}this.rotation_=i}},Zn=class extends Gn{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",s=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",r=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof o?document.createTextNode(o):o),h.addEventListener(m,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof r?document.createTextNode(r):r),c.addEventListener(m,this.handleClick_.bind(this,-i),!1);const u=e+" "+mn+" "+_n,d=this.element;d.className=u,d.appendChild(h),d.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Fe})):e.setZoom(n)}}},Bn="active";function Un(t,e,i,n){const s=t.getZoom();if(void 0===s)return;const o=t.getConstrainedZoom(s+e),r=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:r,anchor:i,duration:void 0!==n?n:250,easing:Fe})}const Xn=class extends M{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Bn)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Bn,t)}setMap(t){this.map_=t}},Hn=class extends Xn{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==Rn.DBLCLICK){const i=t.originalEvent,n=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_;Un(n.getView(),o,s,this.duration_),i.preventDefault(),e=!0}return!e}};function Wn(t){const e=t.length;let i=0,n=0;for(let s=0;s<e;s++)i+=t[s].clientX,n+=t[s].clientY;return{clientX:i/e,clientY:n/e}}const Yn=class extends Xn{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Rn.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Rn.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Rn.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Rn.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}};function qn(t){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),i);++n);return i}}const Qn=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$n=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)}(t)},Jn=l,ts=function(t){const e=t.originalEvent;return 0==e.button&&!(Ne&&De&&e.ctrlKey)},es=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},is=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ns=function(t){const e=t.originalEvent,i=e.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},ss=function(t){const e=t.originalEvent;return V(void 0!==e,56),"mouse"==e.pointerType},os=function(t){const e=t.originalEvent;return V(void 0!==e,56),e.isPrimary&&0===e.button},rs=class extends Yn{constructor(t){super({stopDown:h}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:qn(es,os);this.condition_=t.onFocusOnly?qn($n,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,n=e.getEventPixel(Wn(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();s=e,o=i.getResolution(),s[0]*=o,s[1]*=o,Yt(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();var s,o;this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),s=i.getCenterInternal(),o=e.getPixelFromCoordinateInternal(s),r=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(n),o[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(r),duration:500,easing:Fe})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},as=class extends Yn{constructor(t){t=t||{},super({stopDown:h}),this.condition_=t.condition?t.condition:Qn,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!ss(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===Me)return;const n=e.getSize(),s=t.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=o}handleUpEvent(t){return!ss(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!ss(t)&&(!(!ts(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}},ls=class extends n{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new vi([i])}getGeometry(){return this.geometry_}};class hs extends e{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}const cs=class extends Yn{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new ls(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:ts,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],s=i[1]-e[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new hs("boxdrag",t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new hs(e?"boxend":"boxcancel",t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new hs("boxstart",t.coordinate,t)),!0)}onBoxEnd(t){}},us=class extends cs{constructor(t){super({condition:(t=t||{}).condition?t.condition:is,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),s=e.getResolution()/n;i=i.clone(),i.scale(s*s)}e.fitInternal(i,{duration:this.duration_,easing:Fe})}},ds="ArrowLeft",gs="ArrowRight",ps="ArrowDown",ms=class extends Xn{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return es(t)&&ns(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==_){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&(n==ps||n==ds||n==gs||"ArrowUp"==n)){const s=t.map.getView(),o=s.getResolution()*this.pixelDelta_;let r=0,a=0;n==ps?a=-o:n==ds?r=-o:n==gs?r=o:a=o;const l=[r,a];Yt(l,s.getRotation()),function(t,e,i){const n=t.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:Oe,center:t.getConstrainedCenter(s)})}}(s,l,this.duration_),i.preventDefault(),e=!0}}return!e}},_s=class extends Xn{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!function(t){const e=t.originalEvent;return De?e.metaKey:e.ctrlKey}(t)&&ns(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==_||t.type==f){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&("+"===n||"-"===n)){const s=t.map,o="+"===n?this.delta_:-this.delta_;Un(s.getView(),o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}},fs=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},vs=class extends Xn{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Jn;this.condition_=t.onFocusOnly?qn($n,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==y)return!0;const e=t.map,i=t.originalEvent;let n;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==y&&(n=i.deltaY,ze&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=je),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=n;const r=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),r),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-Z(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Un(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}},ys=class extends Yn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=h),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=s;const o=t.map,r=o.getView();r.getConstraints().rotation!==Me&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(Wn(this.targetPointers))),this.rotating_&&(o.render(),r.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}},Cs=class extends Yn{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=h),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,o=i.clientY-n.clientY,r=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/r),this.lastDistance_=r;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Wn(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}};function xs(t){t instanceof bi?t.setMapInternal(null):t instanceof wn&&t.getLayers().forEach(xs)}function Es(t,e){if(t instanceof bi)t.setMapInternal(e);else if(t instanceof wn){const i=t.getLayers().getArray();for(let t=0,n=i.length;t<n;++t)Es(i[t],e)}}const ws=class extends M{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new wn({layers:t.layers});let s,o,r;return i[An]=n,i[kn]=t.target,i[zn]=t.view instanceof wi?t.view:new wi,void 0!==t.controls&&(Array.isArray(t.controls)?s=new hn(t.controls.slice()):(V("function"==typeof t.controls.getArray,47),s=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new hn(t.interactions.slice()):(V("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?r=new hn(t.overlays.slice()):(V("function"==typeof t.overlays.getArray,49),r=t.overlays):r=new hn,{controls:s,interactions:o,keyboardEventTarget:e,overlays:r,values:i}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:je,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||function(t){t=t||{};const e=new hn;return(void 0===t.zoom||t.zoom)&&e.push(new Zn(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new Vn(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new Kn(t.attributionOptions)),e}(),this.interactions=e.interactions||function(t){t=t||{};const e=new hn,i=new fs(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new as),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new Hn({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new rs({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new ys),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new Cs({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new ms),e.push(new _s({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new vs({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new us({duration:t.zoomDuration})),e}({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jn(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(An,this.handleLayerGroupChanged_),this.addChangeListener(zn,this.handleViewChanged_),this.addChangeListener(On,this.handleSizeChanged_),this.addChangeListener(kn,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof wi||t.view.then((function(t){i.setView(new wi(t))})),this.controls.addEventListener(on,(t=>{t.element.setMap(this)})),this.controls.addEventListener(rn,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(on,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(rn,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(on,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(rn,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Es(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),s=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,o=void 0!==i.layerFilter?i.layerFilter:l,r=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,r,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];return function e(i){i.forEach((function(i){i instanceof wn?e(i.getLayers()):t.push(i)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,s=void 0!==e.hitTolerance?e.hitTolerance:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],s=e.height/i[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-e.left)/n,(o.clientY-e.top)/s]}getTarget(){return this.get(kn)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return ve(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Ze(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(An)}setLayers(t){const e=this.getLayerGroup();if(t instanceof hn)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const s=i.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(t){const e=ye(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Ze(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(On)}getView(){return this.get(zn)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return function(t,e,i,n,s){if(!t||!(i in t.wantedTiles))return Nn;if(!t.wantedTiles[i][e.getKey()])return Nn;const o=t.viewState.center,r=n[0]-o[0],a=n[1]-o[1];return 65536*Math.log(s)+Math.sqrt(r*r+a*a)/s}(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new bn(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Pn||i===y||i===_){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getMap()===this&&n.getActive()&&this.getTargetElement()&&(!n.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[0]||e[1]){const e=Date.now()-t.time>8;i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(et)&&this.renderer_.dispatchRenderEvent(et,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Tn(Fn,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Tn(Ln,this,t))));const i=this.postRenderFunctions_;for(let e=0,n=i.length;e<n;++e)i[e](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)E(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(p,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(y,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ji(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new yn(this)),this.mapBrowserEventHandler_=new Mn(this,this.moveTolerance_);for(const t in Rn)this.mapBrowserEventHandler_.addEventListener(Rn[t],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(p,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(y,this.boundHandleBrowserEvent_,!!Ve&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[C(t,_,this.handleBrowserEvent,this),C(t,f,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(E(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(E(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=C(t,i,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=C(t,g,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Cn("addlayer",t)),this.layerGroupPropertyListenerKeys_=[C(t,i,this.render,this),C(t,g,this.render,this),C(t,"addlayer",this.handleLayerAdd_,this),C(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const t=this.frameState_;t&&this.renderer_.flushDeclutterItems(t)}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){xs(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(void 0!==e&&tn(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),o=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:jt(o.center,o.resolution,o.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:o,viewHints:n,wantedTiles:{},mapId:S(this),renderTargets:{}},o.nextCenter&&o.nextResolution){const t=isNaN(o.nextRotation)?o.rotation:o.nextRotation;s.nextExtent=jt(o.nextCenter,o.nextResolution,t,e)}}var o,r;this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!Ht(this.previousExtent_)&&!Mt(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Tn("movestart",this,n)),this.previousExtent_=Pt(this.previousExtent_)),this.previousExtent_&&!s.viewHints[0]&&!s.viewHints[1]&&!Mt(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Tn("moveend",this,s)),o=s.extent,(r=this.previousExtent_)?(r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3]):o.slice())),this.dispatchEvent(new Tn(In,this,s)),this.renderComplete_=this.hasListener(Ln)||this.hasListener(Fn)||this.hasListener(et)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Cn("removelayer",e)),this.set(An,t)}setSize(t){this.set(On,t)}setTarget(t){this.set(kn,t)}setView(t){if(!t||t instanceof wi)return void this.set(zn,t);this.set(zn,new wi);const e=this;t.then((function(t){e.setView(new wi(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),s=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(n)||isNaN(s)||(e=[n,s],!tn(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&ie("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&a(e,i)||(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}};class Ts extends Gn{constructor(t,e){const i=e||{};if(!i.element){const t=document.createElement("div");t.className="bgis-composite",i.element=t}let n;n=t instanceof Gn?[t]:t,n.forEach((t=>{t.setTarget(i.element)})),super(i),this.childControls=n}setMap(t){super.setMap(t),t&&this.childControls.forEach((e=>{e.setMap(t)}))}getChildControls(){return this.childControls}setChildControls(t){this.childControls=t}getElement(){return this.element}}class bs extends Ts{constructor(t){const e=t.element?t.element:document.createElement("div");e.classList.add(t.styleClass),t.element=e,super(t.childControls,t),this.styleClass=t.styleClass}getStyleClass(){return this.styleClass}}class Rs extends bs{constructor(t,e){const i=e||{};super(Object.assign(Object.assign({},i),{styleClass:"bgis-footer",childControls:t}))}}const Ss=t=>Array.isArray(t)?t:[t];class Ps extends Ts{constructor(t,e){var i;t.tooltipAsTextElement=null===(i=t.tooltipAsTextElement)||void 0===i||i,t.unicode=t.unicode||null,t.iconClassName=t.iconClassName||null,null===t.unicode&&null===t.iconClassName&&(t.unicode=59651),t.tooltip=t.tooltip||"";const n=t.element?t.element:document.createElement("div");n.className=t.containerClassName?t.containerClassName:"ol-control bgis-control",n.title=t.tooltip;const s=document.createElement("button");if(s.className="bgis-icon-button",null!==t.unicode?s.appendChild(Ps.getIconElementForUnicode(t.unicode)):null!==t.iconClassName&&s.appendChild(Ps.getIconElementForIconClassName(t.iconClassName)),s.title=t.tooltip,t.tooltip.length>0&&s.setAttribute("aria-label",t.tooltip),n.append(s),t.tooltipAsTextElement){const e=document.createElement("div");e.className="bgis-control-button-text-container";const i=document.createElement("span");i.textContent=t.tooltip,i.className="bgis-control-button-text",e.appendChild(i),n.appendChild(e)}super(e||[],Object.assign(Object.assign({},t),{element:n})),this.unicode=t.unicode,this.iconClassName=t.iconClassName,this.button=s,this.element.addEventListener("click",(()=>this.dispatchEvent("click")),!1),t.preventDefault||this.on("click",this.handleEvent)}handleEvent(t){return!0}getButton(){return this.button}setButtonUnicode(t){this.getButton().textContent="",this.getButton().innerHTML="",this.getButton().appendChild(Ps.getIconElementForUnicode(t))}setButtonIconClassName(t){this.getButton().textContent="",this.getButton().innerHTML="",this.getButton().appendChild(Ps.getIconElementForIconClassName(t))}static getIconElementForIconClassName(t){const e=document.createElement("i");return e.className="bgis-icon "+t,e}static getIconElementForUnicode(t){const e=document.createElement("i");return e.className="bgis-icon",e.textContent=String.fromCodePoint(t),e}}class Ms extends e{constructor(t,e){super(t),this.isToggled=e}}class Is extends Ps{constructor(t){super(t||{},t.containerToToggle),this._isToggled=!1,this.containerToToggle=t.containerToToggle,this.unicodeToggled=t.unicodeToggled||null,this.iconClassNameToggled=t.iconClassNameToggled||null,null===this.unicodeToggled&&null===this.iconClassNameToggled&&(this.unicodeToggled=59651)}handleEvent(t){if(t.type===m){this.isToggled=!this.isToggled,this.dispatchEvent(new Ms("toggle",this.isToggled));const t=this.getParentElement();if(t){const n=t.querySelector(".ol-overlaycontainer-stopevent");this.isToggled?(n.style.zIndex="unset","div",i="bgis-overlay-bg",null!=(e=n)?e.querySelector(`.${i}`)||e.appendChild(((t,e)=>{const i=document.createElement(t);return i.className=e,i})("div",i)):console.log("Enclosing element is null")):(n.style.zIndex="0",((t,e)=>{if(null!=t){const e=t.querySelectorAll(".bgis-overlay-bg");null!=e&&e.length>0&&e.forEach((t=>t.parentElement&&t.parentElement.removeChild(t)))}})(n))}this.isToggled?null!==this.unicodeToggled?this.setButtonUnicode(this.unicodeToggled):null!==this.iconClassNameToggled&&this.setButtonIconClassName(this.iconClassNameToggled):null!==this.unicode?this.setButtonUnicode(this.unicode):null!==this.iconClassName&&this.setButtonIconClassName(this.iconClassName),((t,e,i=document)=>{Ss(t).forEach((t=>{const n=i.querySelector(t);n&&Ss(e).forEach((t=>null==n?void 0:n.classList.toggle(t)))}))})("."+this.containerToToggle.getStyleClass(),"show",t||document)}var e,i;return!0}set isToggled(t){this._isToggled=t}get isToggled(){return this._isToggled}getContainerToToggle(){return this.containerToToggle}getParentElement(){let t=this.element.closest(".bgis");return t||(t=this.element.closest(".bgis-map")),t}}const Ls='"Source Sans 3",sans-serif';class Fs extends bs{constructor(t){let e=null;t.verticalControls&&t.verticalControls.length>0&&(e=Fs.createToggle(t.verticalControls),t.horizontalControls.push(e));const i=t||{};super(Object.assign(Object.assign({},i),{styleClass:"bgis-bottom-right-horizontal",childControls:t.horizontalControls})),this.horizontalControls=[],this.horizontalControls=t.horizontalControls,this.toggleButton=e,null!=this.toggleButton&&this.toggleButton.addEventListener("toggle",(t=>(this.dispatchEvent(t),!0)))}getToggleButton(){return this.toggleButton}setMap(t){const e=t.getOwnerDocument().defaultView;e&&C(e,"resize",(()=>{this.handleHorizontalControlsForSize()}),this),super.setMap(t),this.handleHorizontalControlsForSize()}handleHorizontalControlsForSize(){var t,i,n,s,o;const r=this.getMap();if(r)if(r.getOwnerDocument().documentElement.clientWidth>="768"){if(null===(t=this.toggleButton)||void 0===t?void 0:t.getContainerToToggle()){const t=this.toggleButton.getContainerToToggle().getChildControls().filter((t=>!0===t.get(Fs.MOVED_FROM_HORIZONTAL_KEY)));if(t.length>0)if(this.getElement().innerHTML="",t.forEach((t=>{t.unset(Fs.MOVED_FROM_HORIZONTAL_KEY),t.setTarget(this.getElement()),t.setMap(r)})),this.horizontalControls=t,this.toggleButton.getContainerToToggle().setChildControls(this.toggleButton.getContainerToToggle().getChildControls().filter((e=>!t.includes(e)))),this.toggleButton.getContainerToToggle().getChildControls().length>0){const t=this.toggleButton.isToggled,i=Fs.createToggle(this.toggleButton.getContainerToToggle().getChildControls());i.setTarget(this.getElement()),i.setMap(r),this.toggleButton=i,this.horizontalControls.push(i),t&&this.toggleButton.handleEvent(new e(m))}else this.toggleButton=null}}else{const t=this.horizontalControls.filter((t=>!(t instanceof Is)&&!0!==t.get(Fs.MOVED_FROM_HORIZONTAL_KEY)));((null===(i=this.toggleButton)||void 0===i?void 0:i.getContainerToToggle().getChildControls())&&(null===(n=this.toggleButton)||void 0===n?void 0:n.getContainerToToggle().getChildControls().length)>0||t.length>1)&&((null===(s=this.toggleButton)||void 0===s?void 0:s.getContainerToToggle())||(this.toggleButton=Fs.createToggle([]),this.toggleButton.setTarget(this.getElement()),this.toggleButton.setMap(r)),t.forEach((t=>{t.set(Fs.MOVED_FROM_HORIZONTAL_KEY,!0),this.toggleButton&&t.setTarget(this.toggleButton.getContainerToToggle().getElement()),t.setMap(r)})),null===(o=this.toggleButton)||void 0===o||o.getContainerToToggle().getChildControls().push(...t),this.horizontalControls=this.horizontalControls.filter((e=>!t.includes(e))))}}static createToggle(t){const e=new bs({styleClass:"bgis-bottom-right-vertical",childControls:t});return new Is({containerToToggle:e,containerClassName:"ol-control bgis-control bgis-bottom-right-overlay",iconClassName:"bgis-icon-more-four",iconClassNameToggled:"bgis-icon-times",tooltip:"mehr..."})}}Fs.MOVED_FROM_HORIZONTAL_KEY="bgis-moved-from-horizontal";class As extends bs{constructor(t,e){const i=e||{};super(Object.assign(Object.assign({},i),{styleClass:"bgis-top-right",childControls:t}))}}const Os="accuracy",ks="accuracyGeometry",zs="altitude",Ns="altitudeAccuracy",Ds="heading",js="position",Gs="projection",Ks="speed",Vs="tracking",Zs="trackingOptions";class Bs extends e{constructor(t){super("error"),this.code=t.code,this.message=t.message}}const Us=class extends M{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=re,this.watchId_=void 0,this.addChangeListener(Gs,this.handleProjectionChanged_),this.addChangeListener(Vs,this.handleTrackingChanged_),void 0!==t.projection&&this.setProjection(t.projection),void 0!==t.trackingOptions&&this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&&t.tracking)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&&(this.transform_=ge(le("EPSG:4326"),t),this.position_&&this.set(js,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(Os,e.accuracy),this.set(zs,null===e.altitude?void 0:e.altitude),this.set(Ns,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Ds,null===e.heading?void 0:H(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const i=this.transform_(this.position_);this.set(js,i.slice()),this.set(Ks,null===e.speed?void 0:e.speed);const n=function(t,e,i,n){i=i||32;const s=[];for(let n=0;n<i;++n)r(s,Jt(t,e,2*Math.PI*n/i,undefined));return s.push(s[0],s[1]),new fi(s,"XY",[s.length])}(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(ks,n),this.changed()}positionError_(t){this.dispatchEvent(new Bs(t))}getAccuracy(){return this.get(Os)}getAccuracyGeometry(){return this.get(ks)||null}getAltitude(){return this.get(zs)}getAltitudeAccuracy(){return this.get(Ns)}getHeading(){return this.get(Ds)}getPosition(){return this.get(js)}getProjection(){return this.get(Gs)}getSpeed(){return this.get(Ks)}getTracking(){return this.get(Vs)}getTrackingOptions(){return this.get(Zs)}setProjection(t){this.set(Gs,le(t))}setTracking(t){this.set(Vs,t)}setTrackingOptions(t){this.set(Zs,t)}};class Xs extends e{constructor(t,e){super(t),this.position=e}}class Hs extends Ps{constructor(t){const e=t||{};super(Object.assign({unicode:59702,containerClassName:"ol-control bgis-control ol-geolocate",tooltip:"Standort zentrieren"},e));const i=t||{};this._geoLocation=new Us(i)}handleEvent(t){var e,i;return t.type===m&&this.geoLocation&&(null===(i=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===i?void 0:i.getProjection())&&(this.geoLocation.once("change",(()=>{var t,e;this.geoLocation.setTracking(!1),null===(t=this.getMap())||void 0===t||t.getView().animate({center:(e=this.geoLocation.getPosition(),se(),me(e,"EPSG:4326","EPSG:3857")),duration:300});const i=this.geoLocation.getPosition();i&&this.dispatchEvent(new Xs("location_retrieved",i))})),this.geoLocation.setTracking(!0)),!0}get geoLocation(){return this._geoLocation}}class Ws extends Kn{constructor(t){super(t||{collapsed:!1,collapsible:!1}),this.element.className+=" bgis-copyright"}}const Ys="projection",qs="coordinateFormat",Qs=class extends Gn{constructor(t){t=t||{};const e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(Ys,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==t.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(qs)}getProjection(){return this.get(Ys)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push(C(e,Sn,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(C(e,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(qs,t)}setProjection(t){this.set(Ys,le(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?ge(this.mapProjection_,t):re}const i=this.getMap().getCoordinateFromPixelInternal(t);if(i){const t=fe();t&&(this.transform_=ge(this.mapProjection_,t)),this.transform_(i,i),this.wrapX_&&qt(i,t||this.getProjection()||this.mapProjection_);const n=this.getCoordinateFormat();e=n?n(i):i.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}};class $s extends Qs{constructor(t){const e=t||{};e.projection=e.projection?e.projection:"EPSG:4326",e.coordinateFormat=e.coordinateFormat?e.coordinateFormat:t=>t?function(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}(t,"{y}N/{x}E",5):"",e.placeholder=e.placeholder?e.placeholder:"&nbsp;-&nbsp;N/&nbsp;-&nbsp;E",e.className=e.className?e.className:"ol-control ol-mouse-position bgis-mouseposition",super(e)}}class Js extends Zn{constructor(t){const e=t||{};super(Object.assign(Object.assign({},e),{zoomInLabel:String.fromCodePoint(59700),zoomOutLabel:String.fromCodePoint(59701)})),this.element.className="ol-control bgis-control zoom-container"}}const to=25.4/.28,eo=[1,2,5];class io extends Gn{constructor(t){const e=t||{},i=e.className?e.className:"bgis-scaleline";super({element:document.createElement("div"),target:e.target}),this.viewState=null,this._minWidth=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible=!1,this.renderedWidth=void 0,this.renderedSVG=void 0,this.dpi=e.dpi||void 0,this.element.className=i}render(t){const e=t.frameState;this.viewState=e?e.viewState:null,this.updateElement()}updateElement(){const t=this.viewState;if(!t)return void(this.renderedVisible&&(this.element.style.display="none",this.renderedVisible=!1));const e=t.center,i=t.projection,n="degrees"==this.getUnits()?"degrees":"m";let s=he(i,t.resolution,e,n);const o=this._minWidth*(this.dpi||to)/to,r=o*s;let a;r<.001?(a="m",s*=1e6):r<1?(a="mm",s*=1e3):r<1e3?a="m":(a="km",s/=1e3);let l,h,c,u=3*Math.floor(Math.log(o*s)/Math.log(10));for(;;){c=Math.floor(u/3);const t=Math.pow(10,c);if(l=eo[(u%3+3)%3]*t,h=Math.round(l/s),isNaN(h))return this.element.style.display="none",void(this.renderedVisible=!1);if(h>=o)break;++u}let d=null;l&&c>=0&&(d=this.getGeneratedSVG(l.toFixed(c<0?-c:0)+" "+a,h)),d&&this.renderedSVG!=d&&(this.element.innerHTML="",this.element.appendChild(d),this.renderedSVG=d),this.renderedWidth!=h&&(this.element.style.width=h+"px",d&&d.setAttribute("width",String(h)),this.renderedWidth=h),this.renderedVisible||(this.element.style.display="",this.renderedVisible=!0)}getUnits(){return this.get("units")}getGeneratedSVG(t,e){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("id","bgis-scaleline-svg"),i.setAttribute("viewBox","0 0 "+e+" 18"),i.setAttribute("width",String(e)),i.setAttribute("height","100%");const n=document.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("id","bgis-scaleline-svg-background"),n.setAttribute("x",String(0)),n.setAttribute("y",String(0)),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("fill","#e5ecf0"),n.setAttribute("fill-opacity",".5"),n.setAttribute("stroke","black"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-dasharray","0 "+e+" "+(e+36)),i.appendChild(n);const s=document.createElementNS("http://www.w3.org/2000/svg","text");return s.textContent=t,s.setAttribute("x",String(e/2)),s.setAttribute("y",String(12)),s.setAttribute("text-anchor","middle"),s.setAttribute("font-size","1em"),s.setAttribute("style","font-size: 0.75rem; font-family: "+Ls),s.setAttribute("font-family",Ls),s.setAttribute("fill","black"),i.appendChild(s),i}setMinWidth(t){this._minWidth=t}getMinWidth(){return this._minWidth}}class no extends e{constructor(t,e){super(t),this.originalEvent=e}}class so extends Gn{constructor(t){const e=t||{},i=document.createElement("div");i.className="bgis-overview-image";const n=document.createElement("figure");n.innerHTML=so.SVG_CODE,i.appendChild(n),e.element=i,super(e),this.preventDefault=e.preventDefault||!1,this.overviewContainerElement=i,this.extent=Et([[101e4,579e4],[196e4,633e4]]),this.overviewContainerElement.addEventListener("click",(t=>this.dispatchEvent(new no("click",t))),!1),this.preventDefault||this.on("click",this.onOverviewImageClick),this.svgElement=n.firstChild,this.backgroundSVGRectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.backgroundSVGRectElement.setAttribute("class","bgis-overviewmap-svg-background"),this.backgroundSVGRectElement.setAttribute("x",String(0)),this.backgroundSVGRectElement.setAttribute("y",String(0)),this.backgroundSVGRectElement.setAttribute("rx",String(8)),this.backgroundSVGRectElement.setAttribute("ry",String(8)),this.backgroundSVGRectElement.setAttribute("width",String(so.SVG_WIDTH)),this.backgroundSVGRectElement.setAttribute("height",String(so.SVG_HEIGHT)),this.backgroundSVGRectElement.setAttribute("style","stroke-width:0"),this.backgroundSVGRectElement.setAttribute("fill",so.BACKGROUND_COLOR),this.svgElement.prepend(this.backgroundSVGRectElement)}setMap(t){super.setMap(t),t&&(this.preventDefault||t.on("moveend",(t=>this.updateCrosshair(t))))}updateCrosshair(t){var e;const i=[so.SVG_WIDTH,so.SVG_HEIGHT],n=this.getOverviewPxFromLonLat(null===(e=t.map.getView())||void 0===e?void 0:e.getCenter());if(n[0]>i[0]?n[0]=i[0]:n[0]<0&&(n[0]=0),n[1]>i[1]?n[1]=i[1]:n[1]<0&&(n[1]=0),this.svgElement){const t=this.svgElement.getElementsByClassName("bgis-overviewmap-svg-crosshair");if(t)for(const e of Array.from(t))this.svgElement.removeChild(e);this.svgElement.appendChild(so.getCrosshair(n[0],0,n[0],so.SVG_HEIGHT,"bgis-overviewmap-svg-crosshair-x")),this.svgElement.appendChild(so.getCrosshair(0,n[1],so.SVG_WIDTH,n[1],"bgis-overviewmap-svg-crosshair-y"))}}static getCrosshair(t,e,i,n,s){const o=document.createElementNS("http://www.w3.org/2000/svg","line");return o.setAttribute("x1",String(t)),o.setAttribute("y1",String(e)),o.setAttribute("x2",String(i)),o.setAttribute("y2",String(n)),o.setAttribute("style","fill: none; stroke: black; stroke-width: 1px;"),o.setAttribute("class","bgis-overviewmap-svg-crosshair "+s),o}static calculateResolutionFromWidth(t,e,i){return Math.abs(t-e)/i}getOverviewPxFromLonLat(t){if(t){const e=[so.SVG_WIDTH,so.SVG_HEIGHT],i=[so.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),so.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[Math.round(1/i[0]*(t[0]-this.extent[0])),Math.round(1/i[1]*(this.extent[3]-t[1]))]}return[0,0]}onOverviewImageClick(t){var e,i;const n=this.overviewContainerElement.getBoundingClientRect(),s=t.originalEvent.clientX-n.left,o=t.originalEvent.clientY-n.top,r=this.getLonLatFromOverviewPx([s,o]);null===(i=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===i||i.animate({center:r,duration:300})}getLonLatFromOverviewPx(t){const e=[this.overviewContainerElement.clientWidth,this.overviewContainerElement.clientHeight],i=[so.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),so.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[t[0]*i[0]+this.extent[0],this.extent[3]-t[1]*i[1]]}getOverviewContainerElement(){return this.overviewContainerElement}getSVGElement(){return this.svgElement}getBackgroundRectElement(){return this.backgroundSVGRectElement}}so.BACKGROUND_COLOR="#e5ecf0",so.SVG_HEIGHT=216,so.SVG_WIDTH=380,so.SVG_CODE="<svg xmlns='http://www.w3.org/2000/svg' class='bgis-overviewmap-svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 "+so.SVG_WIDTH+" "+so.SVG_HEIGHT+"' preserveAspectRatio='xMidYMid meet' height='100%' width='100%' color-interpolation='auto' fill='black' fill-opacity='1'  stroke='black' stroke-dasharray='none' stroke-dashoffset='0' stroke-linecap='square' stroke-linejoin='miter' stroke-miterlimit='10' stroke-opacity='1' stroke-width='1' xmlns:v='https://vecta.io/nano'><style><![CDATA[.B{clip-path:url(#A)}.C{fill-rule:evenodd}.D{stroke:none}.E{fill:#999}.F{fill:none}.G{stroke-miterlimit:1}.H{stroke-width:2.5}]]></style><defs><clipPath id='A'><path d='M0 0h380v216H0V0z'/></clipPath><path id='B' d='M356 82l-.4 5.2 4.4 1.6-3.2 2.4v6.4l-3.6.8 2.8 3.6.8 6.8-9.6 1.2-.4-2-1.6 2.4h-3.6l-1.6-3.6-4.8-1.6-8 6.4 6.4 3.2 3.2-.8 1.2 4.8 2 .8-2.8 2.8.4 3.2-3.6 3.2-2.8-.4-.8 1.6-2.4-1.6-.4 4 2.4 4.8-2.4 1.6-.8 4 2 .8-.4 2.4 2.8-.4.8 1.6-3.2 1.6 2.8 2.8-4 2 3.6 1.6-10-.8-.4 3.2-4 1.6-2.4 4.4-6.4 2.8.8-3.6 6.4-6.8-3.2-5.2 1.6-4.8-4.8-14.8 13.2-6.8v-6l2.8-4-.8-3.6-2.4-1.2-1.2-7.6 3.2.8 2-2.8-2-1.6 2.8-.8 2-4 3.2-.4 2.4 4 5.6-5.6v-2.8l5.6-1.2 2.4-3.2L352 88l1.6-3.6-2-2 2.8 1.6 1.6-2z'/><path id='C' d='M162.4 146.8l.4 2 8.4 1.2 1.6 2.8 4.4 1.6 8-2 .4-2.8 4.8-.8 2 2 10.8.8 8.4 9.6 5.6-2 2.4-4 8.4-4.8 1.6 3.2h6l.8 3.2 4.8-3.2 5.6 2 10-3.6 8 8.8-2 8.8 2.4.8-.4 6.4 2 1.2-3.6 3.2-1.2-2-1.6 2-2.4-.4-2.4 6.4-4.8.8-.4 2.4-4.8 1.6-.8 4-2.4-3.6-2 1.2-2-2.4-12.4.8-1.2-2.8h-5.2l-4-2.8-5.6 1.2-18-4.8-6.8 1.6-6.4-3.2H168l-2.4-2.8-4.8-.4v-3.2h1.6V172l9.2-1.2 1.6-2.4-5.6-4v-3.2l-4.4-3.2-.8-2.4 2-3.2h-2.8l-2.4-3.6 3.2-2z'/><path id='D' d='M264.8 20.8l5.6 1.6.4 4 4.4-.8 1.6-2.8 8.8 3.2.8 2 8 4 6.8-1.6V32l5.2 2 .4 2.4 5.6 3.2 12.8 1.2 3.6-5.6 3.6-.4 2.4 2.4 2.8-.4 1.2 4 10.4 1.6 1.6 10.8-4.8 6-.8 4.8 5.6 7.6.8 6.4 4.4 3.2-1.6 2.8-2.8-1.6 2 2L352 88l-4.4-3.6-2.4 3.2-5.6 1.2v2.8l-5.6 5.6-2.4-4-3.2.4-1.6 3.6-3.2 1.2 2 1.2-2 3.2-3.2-.8 1.2 7.6 2.4 1.2.8 3.6-2.8 4 1.2 4-5.2 5.2h-2.8l-2-6.8-2.4 2.8-1.2-2-4.8-.8-1.2-2.8-2 .4.4-4-5.2-.4-1.2-5.6-1.6 1.2-3.2-3.6-4.4.4v-1.6H284l-4.4-4-2.4.4-.4 2-3.2-.4-.8 3.2-10.4.4-2 2.4-4-2.4-3.2 1.2-2.4-4v-4.4l2.8-1.6-.4-1.6-1.6-2.4-1.6.8-8.4-4.4-2-3.2v-3.6l1.6-.8-.8-6.4 2-2.4 6.8 5.2 7.2-2L258 74h3.2l1.2 2.4.8-8.4h-2l.8-4.8-2 .4 1.6-1.6-4-4.8 2.8-1.6-10.4-5.2 1.6-7.2 3.6-2.8.4-3.6 7.2 1.2V23.2l2-2.4zm62 47.2l-7.2 5.6-2.4-1.6-.8 6 1.6 3.2 9.6.4 2-2.8 4.4 1.6-2-2.4.8-6-2-2-1.6 1.2-2.4-3.2z'/><path id='E' d='M212.4 38l9.6 6.4-2.4 2 2.4 3.2h6l6.4 2.8 2-2.8h2.4L240 46l4 3.2 2.4-2 5.6 5.2 7.2 2 1.2 1.2-2.8 1.6.4 2 3.6 2.8-1.6 1.6 2-.4-.8 4.8h2v4.4l-.8 4-1.2-2.4H258l-1.6 2.8-6 2-6.8-5.2-3.2 2.4.8 6.4-1.6.8v3.6l6.4 6 5.6.8 2 3.2-2.8 2.4 1.6 6.8-2.4-.8-2 2.4-5.2.8-.8 2.4-8.4 4.8-3.2-.4-2-2.8-6.8 2.4v-3.6l-2-2-10.4-1.2-3.6 5.6 2.8 8.4-1.6 3.2h-2.4l-8.4-4 2-6.4-1.6-2 2.8-4.4-5.2-2 1.2-2.8 3.2.8v-1.6l-6.4.4-4.4-2-.4-8.8 3.6 1.2.4-2.8-4-2-6 2.8v-2l-3.2-.4-1.2-2.4h-4.4l-3.2 3.2-5.2-5.2-.4-3.2 12-9.6 14-4 4.8-7.2-.4-8.8 2 .4 1.2-2.4 10 5.2 4.4-7.2.4-5.6-2-.8 2.4-3.6z'/><path id='F' d='M176.4 86.8l1.6 2.4 3.2.4v2l6-2.8 4 2-.4 2.8-3.6-1.2.4 8.8 11.2 2.4h-3.6l-1.2 3.2 5.2 1.6-2.8 4.4 1.6 2-2 6.4 5.2 3.2-1.6 3.2 1.6 8.8 5.2 2 5.2-2.4.8 4.4 6.8 6.4-5.2 1.2 1.2 2.8-4.4 8-5.2-3.6v-2.4l-10.4-2.8-2.8.8-1.6-2-5.2.8-.4 2.8-7.2 2-5.2-1.6-1.6-2.8-8.4-1.2v-2l-4 2-6-3.6H148l-6.4 5.6-6-1.2-2-12.8 1.6-1.6 6.8.4 1.2-2 8.4.4v-3.6l4.4-.8 2.4-4.8 2.8-.8-3.2-4.8 2-2-4.4-1.6 1.2-4.4h8.4l-1.2 1.6 2.8 2.4-2 2 .8 2 7.6 5.2 3.6-1.2-.4-5.6 2.8-3.6-.8-4-2.4-2h-5.6l4.4-9.2-6.4-8.4 4-3.6h4z'/><path id='G' d='M279.2 101.2l7.2 3.6v1.6l4.4-.4 3.2 3.6 1.6-1.2 1.2 5.6 5.2.4-.8 3.2 2.4.4 1.2 2.8 4.8.8 1.2 2 1.6-2.8 1.2.8-.4 2.8 2.8 3.2-7.2 3.6 4.8 14.8-1.6 4.8 3.2 4.8-7.6 10.8v6l2.4 5.2-6.8-4h-3.6l-9.6 2-2 1.2v2.8l-3.2 1.2-2.8-3.2-14.8.8-2.4-1.6.4-6.4-2.4-.8 2-8.8-8-8.8-10 3.6-5.6-2-4.8 3.2-.8-3.2h-6l-1.6-3.2-8.4 4.8-2.4 4-4.4 2-3.2-1.6 5.6-8.8-1.2-2.8 5.2-1.2-6.8-6.4-.8-4.4-5.2 2.4-4.8-1.6-2-8.4 1.6-4.4 5.6 1.2 1.6-3.2-2.8-8.4 3.6-5.6 10.4 1.2 2 2v3.6l6.8-2.4 2 2.8 3.2.4 16.4-10.4 3.2 2.4 3.2-1.2 4 2.4 2-2.4 10.4-.4.8-3.2 3.2.4.4-2h2z'/><path id='H' d='M151.6 145.2l6.4 2.4 3.6 4.8h2.8l-2 3.2.8 2.4 4.4 3.2v3.2l5.6 4-1.6 2.4-9.2 1.2-1.6 5.6-5.6.4-8-4-1.2-4-3.2-.4-.4-6.8-2.8.8-3.2-2.8 1.2-1.6-2-4.8 3.6-.8 7.2-7.6 5.2-.8z'/><path id='I' d='M61.2 118.8l5.6 1.6 2-2.4 6.8 3.6 5.2-1.6 1.2 1.6-2.4 2h3.2l2 6h6l4-2.8 2 .4-.8 2.4 2.4-.4 2-3.2 4 .4-1.6-2.4 2.4-2.8 6 .4 2.4-5.2 9.6.8 6.8-2.8 9.2 1.2-2-6.4 4.4-2.8v4.4l8-1.2 2.8 4.8 3.2-.8v2l4 1.2-1.6 2.4 3.2 4.8-2.8.8-2.4 4.8-4.4.8v3.6l-8.4-.4-1.2 2-6.8-.4-1.6 1.6 2.4 13.6-8 2-9.2 5.2-5.2-3.2-3.6 2-3.2-1.6-2.4 2.8-2.4-1.6-9.2 1.6.4 1.6-3.2 1.6-3.2 10h-7.2l-6-1.6 1.6-2.4-4-3.2L66 166l-4-1.2.8-5.6-2.8-.8-1.6-3.2-3.6 3.2.4 2-3.6-.4v4l-4 1.2-1.6-2.8-.4-2.4 2.8-3.6-2-2.4 1.6-1.2-1.2-2.8 4-4 .4-7.2-2.4-1.2 6.8-2 4.8-5.2 2-3.2-2-4 .8-4.4z'/><path id='J' d='M31.2 116.4l2 .4-.4 2.8h6.8l1.2 4 4.4 1.6.4 2.4-1.6.8 1.6 3.6 6-2-.8 5.2-2 1.2 2.4 2.4-.4 7.2-4 4 1.2 2.8-1.6 1.2 2 2.4-2.8 3.6 2 3.6-1.2 2-3.2-1.2-1.2-2.8-6.4-2V154l-12-2.4 1.2-4.8-3.2-2.4.4-4.8-2-2 6.4-8-.4-4-2.8-.4-1.6-2.8 7.6-2 2-4z'/><path id='K' d='M327.6 68.4l.4 2 2.8-.4 2 2-.8 6 2 2.4-4.4-1.6-2 2.8-9.6-.4-1.6-3.2.8-6 2.4 1.6 1.6-2.4 3.6-.4.4-2.8 2.4.4z'/></defs><g text-rendering='optimizeLegibility'><use xlink:href='#B' class='B C D E'/><g stroke='silver'><use xlink:href='#B' class='B F G H'/><use xlink:href='#C' class='B C D E'/><use xlink:href='#C' class='B F G H'/><use xlink:href='#D' class='B C D E'/><use xlink:href='#D' class='B F G H'/><use xlink:href='#E' class='B C D E'/><use xlink:href='#E' class='B F G H'/><use xlink:href='#F' class='B C D E'/><use xlink:href='#F' class='B F G H'/><use xlink:href='#G' class='B C D E'/><use xlink:href='#G' class='B F G H'/><use xlink:href='#H' class='B C D E'/><use xlink:href='#H' class='B F G H'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B C D E'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B F G H'/><use xlink:href='#I' class='B C D E'/><use xlink:href='#I' class='B F G H'/><use xlink:href='#J' class='B C D E'/><use xlink:href='#J' class='B F G H'/><use xlink:href='#K' class='B C D E'/><use xlink:href='#K' class='B F G H'/></g></g></svg>";class oo extends Ps{constructor(t){const e=t||{};super(Object.assign({iconClassName:"bgis-icon-print",tooltip:"Ansicht drucken"},e))}}class ro extends Ps{constructor(t){const e=t||{};super(Object.assign({iconClassName:"bgis-icon-share",tooltip:ro.DEFAULT_TOOLTIP_TEXT},e))}}ro.DEFAULT_TOOLTIP_TEXT="Ansicht teilen",ro.DEFAULT_UNICODE=59692;class ao extends Ps{constructor(t){const e=t||{};super(Object.assign({iconClassName:"bgis-icon-tools",tooltip:"Toolbox einblenden"},e))}}class lo extends Ps{constructor(t){const e=t||{};super(Object.assign({iconClassName:"bgis-icon-list",tooltip:"Liste anzeigen"},e))}}class ho extends Ps{constructor(t){const e=t||{};super(Object.assign({iconClassName:"bgis-icon-layer-group",tooltip:"Begleitkarten verwalten"},e))}}const co=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return V(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return V(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){V(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}};function uo(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function go(t,e,i){return t+"/"+e+"/"+i}function po(t){return go(t[0],t[1],t[2])}const mo=class extends co{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey().split("/").map(Number)[0];this.forEach((e=>{e.tileCoord[0]!==t&&(this.remove(po(e.tileCoord)),e.release())}))}};function _o(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const fo=class extends M{constructor(t){super(),this.projection=le(t.projection),this.attributions_=_o(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=_o(t),this.changed()}setState(t){this.state_=t,this.changed()}},vo=[0,0,0],yo=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,V(function(t,e,i){const n=function(t,e){return e-t}||s;return t.every((function(e,i){if(0===i)return!0;const s=n(t[i-1],e);return!(s>0||0===s)}))}(this.resolutions_),17),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,V(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=Zt(i)),V(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,V(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:st,V(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const n=new Ji(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);n.minX=Math.max(t.minX,n.minX),n.maxX=Math.min(t.maxX,n.maxX),n.minY=Math.max(t.minY,n.minY),n.maxY=Math.min(t.maxY,n.maxY)}return n}),this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let t=n.minX,s=n.maxX;t<=s;++t)for(let s=n.minY,o=n.maxY;s<=o;++s)i([e,t,s])}forEachTileCoordParentTileRange(t,e,i,n){let s,o,r,a=null,l=t[0]-1;for(2===this.zoomFactor_?(o=t[1],r=t[2]):a=this.getTileCoordExtent(t,n);l>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),r=Math.floor(r/2),s=$i(o,o,r,r,i)):s=this.getTileRangeForExtentAndZ(a,l,i),e(l,s))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],n=2*t[2];return $i(i,i+1,n,n+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],s=t[1],o=t[2];if(e===n)return $i(s,o,s,o,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-n),r=Math.floor(s*t),a=Math.floor(o*t);return e<n?$i(r,r,a,a,i):$i(r,Math.floor(t*(s+1))-1,a,Math.floor(t*(o+1))-1,i)}const r=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,vo);const n=vo[1],s=vo[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,vo),$i(n,vo[1],s,vo[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=en(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=en(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*n,r=i[1]-(t[2]+1)*s[1]*n;return St(o,r,o+s[0]*n,r+s[1]*n,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,s){const o=this.getZForResolution(i),r=i/this.getResolution(o),a=this.getOrigin(o),l=en(this.getTileSize(o),this.tmpSize_);let h=r*(t-a[0])/i/l[0],c=r*(a[1]-e)/i/l[1];return n?(h=$(h,5)-1,c=$(c,5)-1):(h=Q(h,5),c=Q(c,5)),uo(o,h,c,s)}getTileCoordForXYAndZ_(t,e,i,n,s){const o=this.getOrigin(i),r=this.getResolution(i),a=en(this.getTileSize(i),this.tmpSize_);let l=(t-o[0])/r/a[0],h=(o[1]-e)/r/a[1];return n?(l=$(l,5)-1,h=$(h,5)-1):(l=Q(l,5),h=Q(h,5)),uo(i,l,h,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){return Z(o(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return gi(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}};function Co(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,n){return function(t,e,i,n){n=void 0!==n?n:"top-left";const s=xo(t,undefined,i);return new yo({extent:t,origin:Dt(t,n),resolutions:s,tileSize:i})}(Eo(t),0,void 0,void 0)}(t),t.setDefaultTileGrid(e)),e}function xo(t,e,i,n){e=void 0!==e?e:nt,i=en(void 0!==i?i:st);const s=Kt(t),o=Ut(t);n=n>0?n:Math.max(o/i[0],s/i[1]);const r=e+1,a=new Array(r);for(let t=0;t<r;++t)a[t]=n/Math.pow(2,t);return a}function Eo(t){let e=(t=le(t)).getExtent();if(!e){const i=180*ot.degrees/t.getMetersPerUnit();e=St(-i,-i,i,i)}return e}class wo extends e{constructor(t,e){super(t),this.tile=e}}const To=class extends fo{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;this.tileGrid&&en(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new mo(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const s=this.getTileCacheForProjection(t);if(!s)return!1;let o,r,a,l=!0;for(let t=i.minX;t<=i.maxX;++t)for(let h=i.minY;h<=i.maxY;++h)r=go(e,t,h),a=!1,s.containsKey(r)&&(o=s.get(r),a=2===o.getState(),a&&(a=!1!==n(o))),a||(l=!1);return l}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,n,s){return b()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Co(t)}getTileCacheForProjection(t){const e=this.getProjection();return V(null===e||de(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),o=en(n.getTileSize(t),this.tmpSize);return 1==s?o:(r=o,a=s,void 0===(l=this.tmpSize)&&(l=[0,0]),l[0]=r[0]*a+.5|0,l[1]=r[1]*a+.5|0,l);var r,a,l}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=function(t,e,i){const n=e[0],s=t.getTileCoordCenter(e),o=Eo(i);if(!Tt(o,s)){const e=Ut(o),i=Math.ceil((o[0]-s[0])/e);return s[0]+=e*i,t.getTileCoordForCoordAndZ(s,n)}return e}(i,t,e)),function(t,e){const i=t[0],n=t[1],s=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const o=e.getFullTileRange(i);return!o||o.containsXY(n,s)}(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}};function bo(t,e){const i=/\{z\}/g,n=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(r,a,l){if(r)return t.replace(i,r[0].toString()).replace(n,r[1].toString()).replace(s,r[2].toString()).replace(o,(function(){const t=r[0],i=e.getFullTileRange(t);return V(i,55),(i.getHeight()-r[2]-1).toString()}))}}class Ro extends To{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ro.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=S(e),n=e.getState();let s;1==n?(this.tileLoadingKeys_[i]=!0,s="tileloadstart"):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=3==n?"tileloaderror":2==n?"tileloadend":void 0),null!=s&&this.dispatchEvent(new wo(s,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=function(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),s=i[2].charCodeAt(0);let o;for(o=n;o<=s;++o)e.push(t.replace(i[0],String.fromCharCode(o)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let s=parseInt(i[1],10);s<=n;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=bo(t[s],e);return function(t){return 1===t.length?t[0]:function(e,i,n){if(!e)return;const s=function(t){return(t[1]<<t[0])+t[2]}(e),o=W(s,t.length);return t[o](e,i,n)}}(n)}(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=go(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const So=Ro;function Po(t,e){t.getImage().src=e}const Mo=class extends So{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Po,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:Zi,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const t in this.tileCacheForProjection){const n=this.tileCacheForProjection[t];n.expireCache(n==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!de(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!de(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||de(e,t)))return this.tileGrid;const i=S(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Co(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||de(e,t))return this.tileCache;const i=S(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new mo(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,n,s,o){const r=[t,e,i],a=this.getTileCoordForTileUrlFunction(r,s),l=a?this.tileUrlFunction(a,n,s):void 0,h=new this.tileClass(r,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(g,this.handleTileChange.bind(this)),h}getTile(t,e,i,n,s){const o=this.getProjection();if(!o||!s||de(o,s))return this.getTileInternal(t,e,i,n,o||s);const r=this.getTileCacheForProjection(s),a=[t,e,i];let l;const h=po(a);r.containsKey(h)&&(l=r.get(h));const c=this.getKey();if(l&&l.key==c)return l;const u=this.getTileGridForProjection(o),d=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(a,s),p=new qi(o,u,s,d,a,g,this.getTilePixelRatio(n),this.getGutter(),((t,e,i,n)=>this.getTileInternal(t,e,i,n,o)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return p.key=c,l?(p.interimTile=l,p.refreshInterimChain(),r.replace(h,p)):r.set(h,p),p}getTileInternal(t,e,i,n,s){let o=null;const r=go(t,e,i),a=this.getKey();if(this.tileCache.containsKey(r)){if(o=this.tileCache.get(r),o.key!=a){const l=o;o=this.createTile_(t,e,i,n,s,a),0==l.getState()?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(r,o)}}else o=this.createTile_(t,e,i,n,s,a),this.tileCache.set(r,o);return o}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=le(t);if(i){const t=S(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}},Io=class extends Mo{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:function(t){const e=t||{},i=e.extent||le("EPSG:3857").getExtent(),n={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:xo(i,e.maxZoom,e.tileSize,e.maxResolution)};return new yo(n)}({extent:Eo(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}},Lo={geolandbasemap:"https://mapsneu.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",bmapgrau:"https://mapsneu.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png",bmaporthofoto30cm:"https://mapsneu.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg",bmapgelaende:"https://mapsneu.wien.gv.at/basemap/bmapgelaende/grau/google3857/{z}/{y}/{x}.jpeg",bmapoberflaeche:"https://mapsneu.wien.gv.at/basemap/bmapoberflaeche/grau/google3857/{z}/{y}/{x}.jpeg",bmapoverlay:"https://mapsneu.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png"};class Fo extends Io{constructor(t){var e;const i=(null==t?void 0:t.variant)||"geolandbasemap";super({url:Lo[i],attributions:null!==(e=null==t?void 0:t.attributions)&&void 0!==e?e:'Grundkarte: <a href="https://basemap.at/">basemap.at</a>',crossOrigin:"Anonymous"})}}return new ws({target:"bgis-map",layers:[new sn({source:new Fo})],controls:[new Rs([new io,new $s,new Ws]),new Fs({horizontalControls:[new ho,new lo],verticalControls:[new oo,new ro,new ao]}),new As([new Hs,new Js]),new so],view:new wi({center:Nt([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),new ws({target:"bgis-map-2",layers:[new sn({source:new Fo})],controls:[new Rs([new io,new $s,new Ws]),new Fs({horizontalControls:[new ho,new lo],verticalControls:[new oo,new ro,new ao]}),new As([new Hs,new Js]),new so],view:new wi({center:Nt([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),t})()));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSUcsTUFFckIsSUFBSS9ILEdBQVMsQ0FDWCxJQUFJcUMsR0FDSixJQUFJNkIsS0FFTixJQUFJNkIsSUFFTjNsQyxLQUFNLElBQUlzeEMsR0FBSyxDQUNidHlELE9BQVFKLEdBQVUsQ0FBQyxNQUFTLFFBQVMsUUFBUyxVQUM5Q2dXLHFCQUFxQixFQUNyQkUscUJBQXFCLEVBQ3JCdGQsT0FBUSxDQUFDLE1BQVMsUUFBUyxRQUFTLFNBQ3BDYixRQUFTLEdBQ1RELFFBQVMsRUFDVHVnQixLQUFNLE1BSVYsSUFBSW1tQixHQUFJLENBQ05yd0MsT0FBUSxhQUNSeXhDLE9BQVEsQ0FBQyxJQUFJNnlCLEdBQVUsQ0FDckJ2OUQsT0FBUSxJQUFJbzlELE1BRWRsZSxTQUFVLENBQ1IsSUFBSTZJLEdBQU8sQ0FDVCxJQUFJcUksR0FDSixJQUFJVCxHQUNKLElBQUluQixLQUVOLElBQUkxRCxHQUFZLENBQUNJLG1CQUNiLENBQUMsSUFBSTZJLEdBQ0gsSUFBSUQsSUFDUjlJLGlCQUFrQixDQUFDLElBQUl5SSxHQUNyQixJQUFJQyxHQUFTLElBQUlHLE1BRXJCLElBQUkvSCxHQUFTLENBQ1gsSUFBSXFDLEdBQ0osSUFBSTZCLEtBRU4sSUFBSTZCLElBRU4zbEMsS0FBTSxJQUFJc3hDLEdBQUssQ0FDYnR5RCxPQUFRSixHQUFVLENBQUMsTUFBUyxRQUFTLFFBQVMsVUFDOUNnVyxxQkFBcUIsRUFDckJFLHFCQUFxQixFQUNyQnRkLE9BQVEsQ0FBQyxNQUFTLFFBQVMsUUFBUyxTQUNwQ2IsUUFBUyxHQUNURCxRQUFTLEVBQ1R1Z0IsS0FBTSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmdpcy1jb3JlL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9FdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvT2JqZWN0RXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9EaXNwb3NhYmxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9hcnJheS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZnVuY3Rpb25zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9vYmouanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9UYXJnZXQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdXRpbC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvT2JqZWN0LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Qcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvQXNzZXJ0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Fzc2VydHMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL21hdGguanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0Jhc2UuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1VuaXRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzM4NTcuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzQzMjYuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovcHJvamVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovdHJhbnNmb3Jtcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb29yZGluYXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zcGhlcmUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnNvbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ouanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NlbnRlcmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Jlc29sdXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yb3RhdGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Vhc2luZy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaGFzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vR2VvbWV0cnkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vU2ltcGxlR2VvbWV0cnkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9jbG9zZXN0LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvZGVmbGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NpbXBsaWZ5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW5mbGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2FyZWEuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vTGluZWFyUmluZy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2NvbnRhaW5zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NlZ21lbnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvcmV2ZXJzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L29yaWVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2x5Z29uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVmlldy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVmlld0hpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0xheWVyLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0Jhc2VUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9MYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VTdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb2xvci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZG9tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVTdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9jb21tb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc2l6ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvQ29sbGVjdGlvbkV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvQ29sbGVjdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlcmVyL01hcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY3NzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9Db21wb3NpdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0dyb3VwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBFdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wb2ludGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlUXVldWUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvQ29udHJvbC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Sb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9jb25kaXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdQYW4uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9Cb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdCb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvS2V5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9LaW5ldGljLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL2RlZmF1bHRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2Jhc2UvQ29tcG9zaXRlQ29udHJvbC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Db250YWluZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvRm9vdGVyLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL3V0aWwvZG9tLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvYmFzZS9CdXR0b24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL1RvZ2dsZUJ1dHRvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9faW5kZXguc2NzcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Cb3R0b21SaWdodC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Ub3BSaWdodC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvR2VvbG9jYXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9HZW9Mb2NhdGUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvTW91c2VQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1pvb20udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9TY2FsZUxpbmUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9PdmVydmlldy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1ByaW50LnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvU2hhcmUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9Ub29scy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1ZpZXdMaXN0LnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvTFJVQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVjb29yZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZUNhY2hlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU291cmNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC9UaWxlR3JpZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxldXJsZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9VcmxUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGVJbWFnZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1hZWi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9zb3VyY2UvQmFzZW1hcFNvdXJjZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zaXRlL2V4YW1wbGVzL2RhdGEvY29yZS1mZWF0dXJlcy1kb3VibGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYmdpcy1jb3JlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImJnaXMtY29yZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsICgpID0+IHtcbnJldHVybiAiLCIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9FdmVudFxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU3RyaXBwZWQgZG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1pbnRlcmZhY2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHByb3ZpZGVzIGB0eXBlYCBhbmQgYHRhcmdldGAgcHJvcGVydGllcywgYW5kXG4gKiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBtZXRob2RzLiBJdCBpcyBtZWFudCBhcyBiYXNlIGNsYXNzXG4gKiBmb3IgaGlnaGVyIGxldmVsIGV2ZW50cyBkZWZpbmVkIGluIHRoZSBsaWJyYXJ5LCBhbmQgd29ya3Mgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvVGFyZ2V0flRhcmdldH0uXG4gKi9cbmNsYXNzIEJhc2VFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucHJvcGFnYXRpb25TdG9wcGVkO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy50eXBlID0gdHlwZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBldmVudCB0YXJnZXQuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXZlbnQgZGVmYXVsdC4gVGhpcyBtZWFucyB0aGF0IG5vIGVtdWxhdGVkIGBjbGlja2AsIGBzaW5nbGVjbGlja2Agb3IgYGRvdWJsZWNsaWNrYCBldmVudHNcbiAgICogd2lsbCBiZSBmaXJlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uKGV2dCkge1xuICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFdmVudHxpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2dCBFdmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlRXZlbnQ7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvT2JqZWN0RXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHByb3BlcnR5IGlzIGNoYW5nZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvT2JqZWN0Lk9iamVjdEV2ZW50I3Byb3BlcnR5Y2hhbmdlXG4gICAqIEBhcGlcbiAgICovXG4gIFBST1BFUlRZQ0hBTkdFOiAncHJvcGVydHljaGFuZ2UnLFxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7J3Byb3BlcnR5Y2hhbmdlJ30gVHlwZXNcbiAqL1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0Rpc3Bvc2FibGVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIE9iamVjdHMgdGhhdCBuZWVkIHRvIGNsZWFuIHVwIGFmdGVyIHRoZW1zZWx2ZXMuXG4gKi9cbmNsYXNzIERpc3Bvc2FibGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKipcbiAgICAgKiBUaGUgb2JqZWN0IGhhcyBhbHJlYWR5IGJlZW4gZGlzcG9zZWQuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHRoaXMuZGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2UoKSB7XG4gICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZGlzcG9zZUludGVybmFsKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuc2lvbiBwb2ludCBmb3IgZGlzcG9zYWJsZSBvYmplY3RzLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBkaXNwb3NlSW50ZXJuYWwoKSB7fVxufVxuXG5leHBvcnQgZGVmYXVsdCBEaXNwb3NhYmxlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2FycmF5XG4gKi9cblxuLyoqXG4gKiBQZXJmb3JtcyBhIGJpbmFyeSBzZWFyY2ggb24gdGhlIHByb3ZpZGVkIHNvcnRlZCBsaXN0IGFuZCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgaXRlbSBpZiBmb3VuZC4gSWYgaXQgY2FuJ3QgYmUgZm91bmQgaXQnbGwgcmV0dXJuIC0xLlxuICogaHR0cHM6Ly9naXRodWIuY29tL2Rhcmtza3lhcHAvYmluYXJ5LXNlYXJjaFxuICpcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGhheXN0YWNrIEl0ZW1zIHRvIHNlYXJjaCB0aHJvdWdoLlxuICogQHBhcmFtIHsqfSBuZWVkbGUgVGhlIGl0ZW0gdG8gbG9vayBmb3IuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyYXRvcl0gQ29tcGFyYXRvciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBpdGVtIGlmIGZvdW5kLCAtMSBpZiBub3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5hcnlTZWFyY2goaGF5c3RhY2ssIG5lZWRsZSwgY29tcGFyYXRvcikge1xuICBsZXQgbWlkLCBjbXA7XG4gIGNvbXBhcmF0b3IgPSBjb21wYXJhdG9yIHx8IGFzY2VuZGluZztcbiAgbGV0IGxvdyA9IDA7XG4gIGxldCBoaWdoID0gaGF5c3RhY2subGVuZ3RoO1xuICBsZXQgZm91bmQgPSBmYWxzZTtcblxuICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgIC8qIE5vdGUgdGhhdCBcIihsb3cgKyBoaWdoKSA+Pj4gMVwiIG1heSBvdmVyZmxvdywgYW5kIHJlc3VsdHMgaW4gYSB0eXBlY2FzdFxuICAgICAqIHRvIGRvdWJsZSAod2hpY2ggZ2l2ZXMgdGhlIHdyb25nIHJlc3VsdHMpLiAqL1xuICAgIG1pZCA9IGxvdyArICgoaGlnaCAtIGxvdykgPj4gMSk7XG4gICAgY21wID0gK2NvbXBhcmF0b3IoaGF5c3RhY2tbbWlkXSwgbmVlZGxlKTtcblxuICAgIGlmIChjbXAgPCAwLjApIHtcbiAgICAgIC8qIFRvbyBsb3cuICovXG4gICAgICBsb3cgPSBtaWQgKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKiBLZXkgZm91bmQgb3IgdG9vIGhpZ2ggKi9cbiAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICBmb3VuZCA9ICFjbXA7XG4gICAgfVxuICB9XG5cbiAgLyogS2V5IG5vdCBmb3VuZC4gKi9cbiAgcmV0dXJuIGZvdW5kID8gbG93IDogfmxvdztcbn1cblxuLyoqXG4gKiBDb21wYXJlIGZ1bmN0aW9uIHNvcnRpbmcgYXJyYXlzIGluIGFzY2VuZGluZyBvcmRlci4gIFNhZmUgdG8gdXNlIGZvciBudW1lcmljIHZhbHVlcy5cbiAqIEBwYXJhbSB7Kn0gYSBUaGUgZmlyc3Qgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHBhcmFtIHsqfSBiIFRoZSBzZWNvbmQgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHJldHVybiB7bnVtYmVyfSBBIG5lZ2F0aXZlIG51bWJlciwgemVybywgb3IgYSBwb3NpdGl2ZSBudW1iZXIgYXMgdGhlIGZpcnN0XG4gKiAgICAgYXJndW1lbnQgaXMgbGVzcyB0aGFuLCBlcXVhbCB0bywgb3IgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG59XG5cbi8qKlxuICogQ29tcGFyZSBmdW5jdGlvbiBzb3J0aW5nIGFycmF5cyBpbiBkZXNjZW5kaW5nIG9yZGVyLiAgU2FmZSB0byB1c2UgZm9yIG51bWVyaWMgdmFsdWVzLlxuICogQHBhcmFtIHsqfSBhIFRoZSBmaXJzdCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcGFyYW0geyp9IGIgVGhlIHNlY29uZCBvYmplY3QgdG8gYmUgY29tcGFyZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEEgbmVnYXRpdmUgbnVtYmVyLCB6ZXJvLCBvciBhIHBvc2l0aXZlIG51bWJlciBhcyB0aGUgZmlyc3RcbiAqICAgICBhcmd1bWVudCBpcyBncmVhdGVyIHRoYW4sIGVxdWFsIHRvLCBvciBsZXNzIHRoYW4gdGhlIHNlY29uZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA8IGIgPyAxIDogYSA+IGIgPyAtMSA6IDA7XG59XG5cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC90aWxlZ3JpZC9UaWxlR3JpZH5UaWxlR3JpZCNnZXRaRm9yUmVzb2x1dGlvbn0gY2FuIHVzZSBhIGZ1bmN0aW9uXG4gKiBvZiB0aGlzIHR5cGUgdG8gZGV0ZXJtaW5lIHdoaWNoIG5lYXJlc3QgcmVzb2x1dGlvbiB0byB1c2UuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIGEgdmFsdWUgYmV0d2VlbiB0d28gYXJyYXkgZW50cmllcyxcbiAqIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoZSBuZWFyZXN0IGhpZ2hlciBlbnRyeSBhbmRcbiAqIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoZSBuZWFyZXN0IGxvd2VyIGVudHJ5XG4gKiBhcyBhcmd1bWVudHMgYW5kIHJldHVybnMgYSBge251bWJlcn1gLiBJZiBhIG5lZ2F0aXZlIG51bWJlciBvciB6ZXJvIGlzIHJldHVybmVkXG4gKiB0aGUgbG93ZXIgdmFsdWUgd2lsbCBiZSB1c2VkLCBpZiBhIHBvc2l0aXZlIG51bWJlciBpcyByZXR1cm5lZCB0aGUgaGlnaGVyIHZhbHVlXG4gKiB3aWxsIGJlIHVzZWQuXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24obnVtYmVyLCBudW1iZXIsIG51bWJlcik6IG51bWJlcn0gTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFyciBBcnJheSBpbiBkZXNjZW5kaW5nIG9yZGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldCBUYXJnZXQuXG4gKiBAcGFyYW0ge251bWJlcnxOZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IGRpcmVjdGlvblxuICogICAgMCBtZWFucyByZXR1cm4gdGhlIG5lYXJlc3QsXG4gKiAgICA+IDAgbWVhbnMgcmV0dXJuIHRoZSBsYXJnZXN0IG5lYXJlc3QsXG4gKiAgICA8IDAgbWVhbnMgcmV0dXJuIHRoZSBzbWFsbGVzdCBuZWFyZXN0LlxuICogQHJldHVybiB7bnVtYmVyfSBJbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhckZpbmROZWFyZXN0KGFyciwgdGFyZ2V0LCBkaXJlY3Rpb24pIHtcbiAgaWYgKGFyclswXSA8PSB0YXJnZXQpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGNvbnN0IG4gPSBhcnIubGVuZ3RoO1xuICBpZiAodGFyZ2V0IDw9IGFycltuIC0gMV0pIHtcbiAgICByZXR1cm4gbiAtIDE7XG4gIH1cblxuICBpZiAodHlwZW9mIGRpcmVjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBhcnJbaV07XG4gICAgICBpZiAoY2FuZGlkYXRlID09PSB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgICB9XG4gICAgICBpZiAoY2FuZGlkYXRlIDwgdGFyZ2V0KSB7XG4gICAgICAgIGlmIChkaXJlY3Rpb24odGFyZ2V0LCBhcnJbaSAtIDFdLCBjYW5kaWRhdGUpID4gMCkge1xuICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG4gLSAxO1xuICB9XG5cbiAgaWYgKGRpcmVjdGlvbiA+IDApIHtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgaWYgKGFycltpXSA8IHRhcmdldCkge1xuICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuIC0gMTtcbiAgfVxuXG4gIGlmIChkaXJlY3Rpb24gPCAwKSB7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgIGlmIChhcnJbaV0gPD0gdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbiAtIDE7XG4gIH1cblxuICBmb3IgKGxldCBpID0gMTsgaSA8IG47ICsraSkge1xuICAgIGlmIChhcnJbaV0gPT0gdGFyZ2V0KSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgaWYgKGFycltpXSA8IHRhcmdldCkge1xuICAgICAgaWYgKGFycltpIC0gMV0gLSB0YXJnZXQgPCB0YXJnZXQgLSBhcnJbaV0pIHtcbiAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiBuIC0gMTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgQXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4gaW5kZXguXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZCBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VTdWJBcnJheShhcnIsIGJlZ2luLCBlbmQpIHtcbiAgd2hpbGUgKGJlZ2luIDwgZW5kKSB7XG4gICAgY29uc3QgdG1wID0gYXJyW2JlZ2luXTtcbiAgICBhcnJbYmVnaW5dID0gYXJyW2VuZF07XG4gICAgYXJyW2VuZF0gPSB0bXA7XG4gICAgKytiZWdpbjtcbiAgICAtLWVuZDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7IUFycmF5PFZBTFVFPnxWQUxVRX0gZGF0YSBUaGUgZWxlbWVudHMgb3IgYXJyYXlzIG9mIGVsZW1lbnRzIHRvIGFkZCB0byBhcnIuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChhcnIsIGRhdGEpIHtcbiAgY29uc3QgZXh0ZW5zaW9uID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV07XG4gIGNvbnN0IGxlbmd0aCA9IGV4dGVuc2lvbi5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBhcnJbYXJyLmxlbmd0aF0gPSBleHRlbnNpb25baV07XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge1ZBTFVFfSBvYmogVGhlIGVsZW1lbnQgdG8gcmVtb3ZlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZWxlbWVudCB3YXMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShhcnIsIG9iaikge1xuICBjb25zdCBpID0gYXJyLmluZGV4T2Yob2JqKTtcbiAgY29uc3QgZm91bmQgPSBpID4gLTE7XG4gIGlmIChmb3VuZCkge1xuICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gIH1cbiAgcmV0dXJuIGZvdW5kO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjEgVGhlIGZpcnN0IGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIyIFRoZSBzZWNvbmQgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHR3byBhcnJheXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGFycjEsIGFycjIpIHtcbiAgY29uc3QgbGVuMSA9IGFycjEubGVuZ3RoO1xuICBpZiAobGVuMSAhPT0gYXJyMi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW4xOyBpKyspIHtcbiAgICBpZiAoYXJyMVtpXSAhPT0gYXJyMltpXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBTb3J0IHRoZSBwYXNzZWQgYXJyYXkgc3VjaCB0aGF0IHRoZSByZWxhdGl2ZSBvcmRlciBvZiBlcXVhbCBlbGVtZW50cyBpcyBwcmVzZXJ2ZWQuXG4gKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU29ydGluZ19hbGdvcml0aG0jU3RhYmlsaXR5IGZvciBkZXRhaWxzLlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzb3J0IChtb2RpZmllcyBvcmlnaW5hbCkuXG4gKiBAcGFyYW0geyFmdW5jdGlvbigqLCAqKTogbnVtYmVyfSBjb21wYXJlRm5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFibGVTb3J0KGFyciwgY29tcGFyZUZuYykge1xuICBjb25zdCBsZW5ndGggPSBhcnIubGVuZ3RoO1xuICBjb25zdCB0bXAgPSBBcnJheShhcnIubGVuZ3RoKTtcbiAgbGV0IGk7XG4gIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRtcFtpXSA9IHtpbmRleDogaSwgdmFsdWU6IGFycltpXX07XG4gIH1cbiAgdG1wLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gY29tcGFyZUZuYyhhLnZhbHVlLCBiLnZhbHVlKSB8fCBhLmluZGV4IC0gYi5pbmRleDtcbiAgfSk7XG4gIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICBhcnJbaV0gPSB0bXBbaV0udmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHRlc3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZnVuY10gQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3N0cmljdF0gU3RyaWN0bHkgc29ydGVkIChkZWZhdWx0IGZhbHNlKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU29ydGVkKGFyciwgZnVuYywgc3RyaWN0KSB7XG4gIGNvbnN0IGNvbXBhcmUgPSBmdW5jIHx8IGFzY2VuZGluZztcbiAgcmV0dXJuIGFyci5ldmVyeShmdW5jdGlvbiAoY3VycmVudFZhbCwgaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zdCByZXMgPSBjb21wYXJlKGFycltpbmRleCAtIDFdLCBjdXJyZW50VmFsKTtcbiAgICByZXR1cm4gIShyZXMgPiAwIHx8IChzdHJpY3QgJiYgcmVzID09PSAwKSk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Z1bmN0aW9uc1xuICovXG5cbmltcG9ydCB7ZXF1YWxzIGFzIGFycmF5RXF1YWxzfSBmcm9tICcuL2FycmF5LmpzJztcblxuLyoqXG4gKiBBbHdheXMgcmV0dXJucyB0cnVlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRSVUUoKSB7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEFsd2F5cyByZXR1cm5zIGZhbHNlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGQUxTRSgpIHtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIEEgcmV1c2FibGUgZnVuY3Rpb24sIHVzZWQgZS5nLiBhcyBhIGRlZmF1bHQgZm9yIGNhbGxiYWNrcy5cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfSBOb3RoaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVk9JRCgpIHt9XG5cbi8qKlxuICogV3JhcCBhIGZ1bmN0aW9uIGluIGFub3RoZXIgZnVuY3Rpb24gdGhhdCByZW1lbWJlcnMgdGhlIGxhc3QgcmV0dXJuLiAgSWYgdGhlXG4gKiByZXR1cm5lZCBmdW5jdGlvbiBpcyBjYWxsZWQgdHdpY2UgaW4gYSByb3cgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMgYW5kIHRoZSBzYW1lXG4gKiB0aGlzIG9iamVjdCwgaXQgd2lsbCByZXR1cm4gdGhlIHZhbHVlIGZyb20gdGhlIGZpcnN0IGNhbGwgaW4gdGhlIHNlY29uZCBjYWxsLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYW55KTogUmV0dXJuVHlwZX0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1lbW9pemUuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5hbnkpOiBSZXR1cm5UeXBlfSBUaGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKiBAdGVtcGxhdGUgUmV0dXJuVHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVtb2l6ZU9uZShmbikge1xuICBsZXQgY2FsbGVkID0gZmFsc2U7XG5cbiAgLyoqIEB0eXBlIHtSZXR1cm5UeXBlfSAqL1xuICBsZXQgbGFzdFJlc3VsdDtcblxuICAvKiogQHR5cGUge0FycmF5PGFueT59ICovXG4gIGxldCBsYXN0QXJncztcblxuICBsZXQgbGFzdFRoaXM7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBuZXh0QXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgaWYgKCFjYWxsZWQgfHwgdGhpcyAhPT0gbGFzdFRoaXMgfHwgIWFycmF5RXF1YWxzKG5leHRBcmdzLCBsYXN0QXJncykpIHtcbiAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgICBsYXN0QXJncyA9IG5leHRBcmdzO1xuICAgICAgbGFzdFJlc3VsdCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICB9O1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6IChUIHwgUHJvbWlzZTxUPil9IGdldHRlciBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHZhbHVlIG9yIGEgcHJvbWlzZSBmb3IgYSB2YWx1ZS5cbiAqIEByZXR1cm4ge1Byb21pc2U8VD59IEEgcHJvbWlzZSBmb3IgdGhlIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Qcm9taXNlKGdldHRlcikge1xuICBmdW5jdGlvbiBwcm9taXNlR2V0dGVyKCkge1xuICAgIGxldCB2YWx1ZTtcbiAgICB0cnkge1xuICAgICAgdmFsdWUgPSBnZXR0ZXIoKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgIH1cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodmFsdWUpO1xuICB9XG4gIHJldHVybiBwcm9taXNlR2V0dGVyKCk7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvb2JqXG4gKi9cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBwcm9wZXJ0aWVzIGZyb20gYW4gb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNsZWFyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIob2JqZWN0KSB7XG4gIGZvciAoY29uc3QgcHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XG4gIH1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGhhcyBhbnkgcHJvcGVydGllcy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBvYmplY3QgaXMgZW1wdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5KG9iamVjdCkge1xuICBsZXQgcHJvcGVydHk7XG4gIGZvciAocHJvcGVydHkgaW4gb2JqZWN0KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiAhcHJvcGVydHk7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL1RhcmdldFxuICovXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL0V2ZW50LmpzJztcbmltcG9ydCB7Vk9JRH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7Y2xlYXJ9IGZyb20gJy4uL29iai5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge0V2ZW50VGFyZ2V0fFRhcmdldH0gRXZlbnRUYXJnZXRMaWtlXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFczQyBET00gTGV2ZWwgMiBFdmVudFRhcmdldCBpbnRlcmZhY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDAvUkVDLURPTS1MZXZlbC0yLUV2ZW50cy0yMDAwMTExMy9ldmVudHMuaHRtbCNFdmVudHMtRXZlbnRUYXJnZXQuXG4gKlxuICogVGhlcmUgYXJlIHR3byBpbXBvcnRhbnQgc2ltcGxpZmljYXRpb25zIGNvbXBhcmVkIHRvIHRoZSBzcGVjaWZpY2F0aW9uOlxuICpcbiAqIDEuIFRoZSBoYW5kbGluZyBvZiBgdXNlQ2FwdHVyZWAgaW4gYGFkZEV2ZW50TGlzdGVuZXJgIGFuZFxuICogICAgYHJlbW92ZUV2ZW50TGlzdGVuZXJgLiBUaGVyZSBpcyBubyByZWFsIGNhcHR1cmUgbW9kZWwuXG4gKiAyLiBUaGUgaGFuZGxpbmcgb2YgYHN0b3BQcm9wYWdhdGlvbmAgYW5kIGBwcmV2ZW50RGVmYXVsdGAgb24gYGRpc3BhdGNoRXZlbnRgLlxuICogICAgVGhlcmUgaXMgbm8gZXZlbnQgdGFyZ2V0IGhpZXJhcmNoeS4gV2hlbiBhIGxpc3RlbmVyIGNhbGxzXG4gKiAgICBgc3RvcFByb3BhZ2F0aW9uYCBvciBgcHJldmVudERlZmF1bHRgIG9uIGFuIGV2ZW50IG9iamVjdCwgaXQgbWVhbnMgdGhhdCBub1xuICogICAgbW9yZSBsaXN0ZW5lcnMgYWZ0ZXIgdGhpcyBvbmUgd2lsbCBiZSBjYWxsZWQuIFNhbWUgYXMgd2hlbiB0aGUgbGlzdGVuZXJcbiAqICAgIHJldHVybnMgZmFsc2UuXG4gKi9cbmNsYXNzIFRhcmdldCBleHRlbmRzIERpc3Bvc2FibGUge1xuICAvKipcbiAgICogQHBhcmFtIHsqfSBbdGFyZ2V0XSBEZWZhdWx0IGV2ZW50IHRhcmdldCBmb3IgZGlzcGF0Y2hlZCBldmVudHMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0YXJnZXQpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKi9cbiAgICB0aGlzLmV2ZW50VGFyZ2V0XyA9IHRhcmdldDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5kaXNwYXRjaGluZ18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyPj59XG4gICAgICovXG4gICAgdGhpcy5saXN0ZW5lcnNfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKCF0eXBlIHx8ICFsaXN0ZW5lcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gfHwgKHRoaXMubGlzdGVuZXJzXyA9IHt9KTtcbiAgICBjb25zdCBsaXN0ZW5lcnNGb3JUeXBlID0gbGlzdGVuZXJzW3R5cGVdIHx8IChsaXN0ZW5lcnNbdHlwZV0gPSBbXSk7XG4gICAgaWYgKCFsaXN0ZW5lcnNGb3JUeXBlLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgbGlzdGVuZXJzRm9yVHlwZS5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhbiBldmVudCBhbmQgY2FsbHMgYWxsIGxpc3RlbmVycyBsaXN0ZW5pbmcgZm9yIGV2ZW50c1xuICAgKiBvZiB0aGlzIHR5cGUuIFRoZSBldmVudCBwYXJhbWV0ZXIgY2FuIGVpdGhlciBiZSBhIHN0cmluZyBvciBhblxuICAgKiBPYmplY3Qgd2l0aCBhIGB0eXBlYCBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0V2ZW50LmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBldmVudCBFdmVudCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBgZmFsc2VgIGlmIGFueW9uZSBjYWxsZWQgcHJldmVudERlZmF1bHQgb24gdGhlXG4gICAqICAgICBldmVudCBvYmplY3Qgb3IgaWYgYW55IG9mIHRoZSBsaXN0ZW5lcnMgcmV0dXJuZWQgZmFsc2UuXG4gICAqIEBhcGlcbiAgICovXG4gIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHtcbiAgICBjb25zdCBpc1N0cmluZyA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgY29uc3QgdHlwZSA9IGlzU3RyaW5nID8gZXZlbnQgOiBldmVudC50eXBlO1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgaWYgKCFsaXN0ZW5lcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBldnQgPSBpc1N0cmluZyA/IG5ldyBFdmVudChldmVudCkgOiAvKiogQHR5cGUge0V2ZW50fSAqLyAoZXZlbnQpO1xuICAgIGlmICghZXZ0LnRhcmdldCkge1xuICAgICAgZXZ0LnRhcmdldCA9IHRoaXMuZXZlbnRUYXJnZXRfIHx8IHRoaXM7XG4gICAgfVxuICAgIGNvbnN0IGRpc3BhdGNoaW5nID0gdGhpcy5kaXNwYXRjaGluZ18gfHwgKHRoaXMuZGlzcGF0Y2hpbmdfID0ge30pO1xuICAgIGNvbnN0IHBlbmRpbmdSZW1vdmFscyA9XG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsc18gfHwgKHRoaXMucGVuZGluZ1JlbW92YWxzXyA9IHt9KTtcbiAgICBpZiAoISh0eXBlIGluIGRpc3BhdGNoaW5nKSkge1xuICAgICAgZGlzcGF0Y2hpbmdbdHlwZV0gPSAwO1xuICAgICAgcGVuZGluZ1JlbW92YWxzW3R5cGVdID0gMDtcbiAgICB9XG4gICAgKytkaXNwYXRjaGluZ1t0eXBlXTtcbiAgICBsZXQgcHJvcGFnYXRlO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBpZiAoJ2hhbmRsZUV2ZW50JyBpbiBsaXN0ZW5lcnNbaV0pIHtcbiAgICAgICAgcHJvcGFnYXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJPYmplY3R9ICovIChcbiAgICAgICAgICBsaXN0ZW5lcnNbaV1cbiAgICAgICAgKS5oYW5kbGVFdmVudChldnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcGFnYXRlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXJGdW5jdGlvbn0gKi8gKFxuICAgICAgICAgIGxpc3RlbmVyc1tpXVxuICAgICAgICApLmNhbGwodGhpcywgZXZ0KTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9wYWdhdGUgPT09IGZhbHNlIHx8IGV2dC5wcm9wYWdhdGlvblN0b3BwZWQpIHtcbiAgICAgICAgcHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoLS1kaXNwYXRjaGluZ1t0eXBlXSA9PT0gMCkge1xuICAgICAgbGV0IHByID0gcGVuZGluZ1JlbW92YWxzW3R5cGVdO1xuICAgICAgZGVsZXRlIHBlbmRpbmdSZW1vdmFsc1t0eXBlXTtcbiAgICAgIHdoaWxlIChwci0tKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBWT0lEKTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBkaXNwYXRjaGluZ1t0eXBlXTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3BhZ2F0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHtcbiAgICB0aGlzLmxpc3RlbmVyc18gJiYgY2xlYXIodGhpcy5saXN0ZW5lcnNfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3RlbmVycyBmb3IgYSBzcGVjaWZpZWQgZXZlbnQgdHlwZS4gTGlzdGVuZXJzIGFyZSByZXR1cm5lZCBpbiB0aGVcbiAgICogb3JkZXIgdGhhdCB0aGV5IHdpbGwgYmUgY2FsbGVkIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXI+fHVuZGVmaW5lZH0gTGlzdGVuZXJzLlxuICAgKi9cbiAgZ2V0TGlzdGVuZXJzKHR5cGUpIHtcbiAgICByZXR1cm4gKHRoaXMubGlzdGVuZXJzXyAmJiB0aGlzLmxpc3RlbmVyc19bdHlwZV0pIHx8IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVdIFR5cGUuIElmIG5vdCBwcm92aWRlZCxcbiAgICogICAgIGB0cnVlYCB3aWxsIGJlIHJldHVybmVkIGlmIHRoaXMgZXZlbnQgdGFyZ2V0IGhhcyBhbnkgbGlzdGVuZXJzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBIYXMgbGlzdGVuZXJzLlxuICAgKi9cbiAgaGFzTGlzdGVuZXIodHlwZSkge1xuICAgIGlmICghdGhpcy5saXN0ZW5lcnNfKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0eXBlXG4gICAgICA/IHR5cGUgaW4gdGhpcy5saXN0ZW5lcnNfXG4gICAgICA6IE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzXykubGVuZ3RoID4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqL1xuICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1JlbW92YWxzXyAmJiB0eXBlIGluIHRoaXMucGVuZGluZ1JlbW92YWxzXykge1xuICAgICAgICAgIC8vIG1ha2UgbGlzdGVuZXIgYSBuby1vcCwgYW5kIHJlbW92ZSBsYXRlciBpbiAjZGlzcGF0Y2hFdmVudCgpXG4gICAgICAgICAgbGlzdGVuZXJzW2luZGV4XSA9IFZPSUQ7XG4gICAgICAgICAgKyt0aGlzLnBlbmRpbmdSZW1vdmFsc19bdHlwZV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRhcmdldDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIEdlbmVyaWMgY2hhbmdlIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiB0aGUgcmV2aXNpb24gY291bnRlciBpcyBpbmNyZWFzZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvZXZlbnRzL0V2ZW50fkJhc2VFdmVudCNjaGFuZ2VcbiAgICogQGFwaVxuICAgKi9cbiAgQ0hBTkdFOiAnY2hhbmdlJyxcblxuICAvKipcbiAgICogR2VuZXJpYyBlcnJvciBldmVudC4gVHJpZ2dlcmVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjZXJyb3JcbiAgICogQGFwaVxuICAgKi9cbiAgRVJST1I6ICdlcnJvcicsXG5cbiAgQkxVUjogJ2JsdXInLFxuICBDTEVBUjogJ2NsZWFyJyxcbiAgQ09OVEVYVE1FTlU6ICdjb250ZXh0bWVudScsXG4gIENMSUNLOiAnY2xpY2snLFxuICBEQkxDTElDSzogJ2RibGNsaWNrJyxcbiAgRFJBR0VOVEVSOiAnZHJhZ2VudGVyJyxcbiAgRFJBR09WRVI6ICdkcmFnb3ZlcicsXG4gIERST1A6ICdkcm9wJyxcbiAgRk9DVVM6ICdmb2N1cycsXG4gIEtFWURPV046ICdrZXlkb3duJyxcbiAgS0VZUFJFU1M6ICdrZXlwcmVzcycsXG4gIExPQUQ6ICdsb2FkJyxcbiAgUkVTSVpFOiAncmVzaXplJyxcbiAgVE9VQ0hNT1ZFOiAndG91Y2htb3ZlJyxcbiAgV0hFRUw6ICd3aGVlbCcsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50c1xuICovXG5pbXBvcnQge2NsZWFyfSBmcm9tICcuL29iai5qcyc7XG5cbi8qKlxuICogS2V5IHRvIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZS51bkJ5S2V5fS5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEV2ZW50c0tleVxuICogQHByb3BlcnR5IHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBMaXN0ZW5lciBmdW5jdGlvbi4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhbiBldmVudCBvYmplY3QgYXMgYXJndW1lbnQuXG4gKiBXaGVuIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAsIGV2ZW50IHByb3BhZ2F0aW9uIHdpbGwgc3RvcC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQpKTogKHZvaWR8Ym9vbGVhbil9IExpc3RlbmVyRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExpc3RlbmVyT2JqZWN0XG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IGhhbmRsZUV2ZW50IEhhbmRsZUV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge0xpc3RlbmVyRnVuY3Rpb258TGlzdGVuZXJPYmplY3R9IExpc3RlbmVyXG4gKi9cblxuLyoqXG4gKiBSZWdpc3RlcnMgYW4gZXZlbnQgbGlzdGVuZXIgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhpcyBmdW5jdGlvbiBlZmZpY2llbnRseSBiaW5kcyBhIGBsaXN0ZW5lcmAgdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJuc1xuICogYSBrZXkgZm9yIHVzZSB3aXRoIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLnVubGlzdGVuQnlLZXl9LlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFt0aGlzQXJnXSBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHBhcmFtIHtib29sZWFufSBbb25jZV0gSWYgdHJ1ZSwgYWRkIHRoZSBsaXN0ZW5lciBhcyBvbmUtb2ZmIGxpc3RlbmVyLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4odGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgdGhpc0FyZywgb25jZSkge1xuICBpZiAodGhpc0FyZyAmJiB0aGlzQXJnICE9PSB0YXJnZXQpIHtcbiAgICBsaXN0ZW5lciA9IGxpc3RlbmVyLmJpbmQodGhpc0FyZyk7XG4gIH1cbiAgaWYgKG9uY2UpIHtcbiAgICBjb25zdCBvcmlnaW5hbExpc3RlbmVyID0gbGlzdGVuZXI7XG4gICAgbGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICBvcmlnaW5hbExpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxuICBjb25zdCBldmVudHNLZXkgPSB7XG4gICAgdGFyZ2V0OiB0YXJnZXQsXG4gICAgdHlwZTogdHlwZSxcbiAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gIH07XG4gIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgcmV0dXJuIGV2ZW50c0tleTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBvbmUtb2ZmIGV2ZW50IGxpc3RlbmVyIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoaXMgZnVuY3Rpb24gZWZmaWNpZW50bHkgYmluZHMgYSBgbGlzdGVuZXJgIGFzIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lclxuICogdG8gYSBgdGhpc2Agb2JqZWN0LCBhbmQgcmV0dXJucyBhIGtleSBmb3IgdXNlIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLnVubGlzdGVuQnlLZXl9IGluIGNhc2UgdGhlIGxpc3RlbmVyIG5lZWRzIHRvIGJlXG4gKiB1bnJlZ2lzdGVyZWQgYmVmb3JlIGl0IGlzIGNhbGxlZC5cbiAqXG4gKiBXaGVuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLmxpc3Rlbn0gaXMgY2FsbGVkIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFmdGVyIHRoaXNcbiAqIGZ1bmN0aW9uLCB0aGUgc2VsZi11bnJlZ2lzdGVyaW5nIGxpc3RlbmVyIHdpbGwgYmUgdHVybmVkIGludG8gYSBwZXJtYW5lbnRcbiAqIGxpc3RlbmVyLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMvVGFyZ2V0LmpzXCIpLkV2ZW50VGFyZ2V0TGlrZX0gdGFyZ2V0IEV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gKiBAcGFyYW0ge0xpc3RlbmVyRnVuY3Rpb259IGxpc3RlbmVyIExpc3RlbmVyLlxuICogQHBhcmFtIHtPYmplY3R9IFt0aGlzQXJnXSBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHJldHVybiB7RXZlbnRzS2V5fSBLZXkgZm9yIHVubGlzdGVuQnlLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGxpc3Rlbih0YXJnZXQsIHR5cGUsIGxpc3RlbmVyLCB0aGlzQXJnLCB0cnVlKTtcbn1cblxuLyoqXG4gKiBVbnJlZ2lzdGVycyBldmVudCBsaXN0ZW5lcnMgb24gYW4gZXZlbnQgdGFyZ2V0LiBJbnNwaXJlZCBieVxuICogaHR0cHM6Ly9nb29nbGUuZ2l0aHViLmlvL2Nsb3N1cmUtbGlicmFyeS9hcGkvc291cmNlL2Nsb3N1cmUvZ29vZy9ldmVudHMvZXZlbnRzLmpzLnNyYy5odG1sXG4gKlxuICogVGhlIGFyZ3VtZW50IHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uIGlzIHRoZSBrZXkgcmV0dXJuZWQgZnJvbVxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMubGlzdGVufSBvciB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy5saXN0ZW5PbmNlfS5cbiAqXG4gKiBAcGFyYW0ge0V2ZW50c0tleX0ga2V5IFRoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmxpc3RlbkJ5S2V5KGtleSkge1xuICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICBrZXkudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoa2V5LnR5cGUsIGtleS5saXN0ZW5lcik7XG4gICAgY2xlYXIoa2V5KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL09ic2VydmFibGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgbGlzdGVuT25jZSwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi9ldmVudHMuanMnO1xuXG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIHtFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBFdmVudENsYXNzXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7KHR5cGU6IFR5cGUsIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50Q2xhc3MpID0+ID8pID0+IFJldHVybn0gT25TaWduYXR1cmVcbiAqL1xuXG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYgeyh0eXBlOiBUeXBlW10sIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpID0+ID8pID0+IFJldHVybiBleHRlbmRzIHZvaWQgPyB2b2lkIDogUmV0dXJuW119IENvbWJpbmVkT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnY2hhbmdlJ3wnZXJyb3InfSBFdmVudFR5cGVzXG4gKi9cblxuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge09uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJiBDb21iaW5lZE9uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIFJldHVybj59IE9ic2VydmFibGVPblNpZ25hdHVyZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQW4gZXZlbnQgdGFyZ2V0IHByb3ZpZGluZyBjb252ZW5pZW50IG1ldGhvZHMgZm9yIGxpc3RlbmVyIHJlZ2lzdHJhdGlvblxuICogYW5kIHVucmVnaXN0cmF0aW9uLiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgYWx3YXlzIGF2YWlsYWJsZSB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV+T2JzZXJ2YWJsZSNjaGFuZ2VkfS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQGFwaVxuICovXG5jbGFzcyBPYnNlcnZhYmxlIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5vbiA9XG4gICAgICAvKiogQHR5cGUge09ic2VydmFibGVPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fSAqLyAoXG4gICAgICAgIHRoaXMub25JbnRlcm5hbFxuICAgICAgKTtcblxuICAgIHRoaXMub25jZSA9XG4gICAgICAvKiogQHR5cGUge09ic2VydmFibGVPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fSAqLyAoXG4gICAgICAgIHRoaXMub25jZUludGVybmFsXG4gICAgICApO1xuXG4gICAgdGhpcy51biA9IC8qKiBAdHlwZSB7T2JzZXJ2YWJsZU9uU2lnbmF0dXJlPHZvaWQ+fSAqLyAodGhpcy51bkludGVybmFsKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJldmlzaW9uXyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogSW5jcmVhc2VzIHRoZSByZXZpc2lvbiBjb3VudGVyIGFuZCBkaXNwYXRjaGVzIGEgJ2NoYW5nZScgZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGNoYW5nZWQoKSB7XG4gICAgKyt0aGlzLnJldmlzaW9uXztcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhpcyBvYmplY3QuICBFYWNoIHRpbWUgdGhlIG9iamVjdCBpcyBtb2RpZmllZCxcbiAgICogaXRzIHZlcnNpb24gbnVtYmVyIHdpbGwgYmUgaW5jcmVtZW50ZWQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gUmV2aXNpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJldmlzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJldmlzaW9uXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFR5cGUuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBFdmVudCBrZXkuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIG9uSW50ZXJuYWwodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgY29uc3QgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICBjb25zdCBrZXlzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIGtleXNbaV0gPSBsaXN0ZW4odGhpcywgdHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGtleXM7XG4gICAgfVxuICAgIHJldHVybiBsaXN0ZW4odGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IEV2ZW50IGtleS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgb25jZUludGVybmFsKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgbGV0IGtleTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgY29uc3QgbGVuID0gdHlwZS5sZW5ndGg7XG4gICAgICBrZXkgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAga2V5W2ldID0gbGlzdGVuT25jZSh0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IGxpc3Rlbk9uY2UodGhpcywgLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0eXBlKSwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICAvKiogQHR5cGUge09iamVjdH0gKi8gKGxpc3RlbmVyKS5vbF9rZXkgPSBrZXk7XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgdW5JbnRlcm5hbCh0eXBlLCBsaXN0ZW5lcikge1xuICAgIGNvbnN0IGtleSA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICB1bkJ5S2V5KGtleSk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHR5cGUpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0eXBlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUub247XG5cbi8qKlxuICogTGlzdGVuIG9uY2UgZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUub25jZTtcblxuLyoqXG4gKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUudW47XG5cbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciB1c2luZyB0aGUga2V5IHJldHVybmVkIGJ5IGBvbigpYCBvciBgb25jZSgpYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IGtleSBUaGUga2V5IHJldHVybmVkIGJ5IGBvbigpYFxuICogICAgIG9yIGBvbmNlKClgIChvciBhbiBhcnJheSBvZiBrZXlzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuQnlLZXkoa2V5KSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBrZXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdW5saXN0ZW5CeUtleShrZXlbaV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB1bmxpc3RlbkJ5S2V5KC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fSAqLyAoa2V5KSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgT2JzZXJ2YWJsZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC91dGlsXG4gKi9cblxuLyoqXG4gKiBAcmV0dXJuIHtuZXZlcn0gQW55IHJldHVybi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFic3RyYWN0KCkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1VuaW1wbGVtZW50ZWQgYWJzdHJhY3QgbWV0aG9kLicpO1xufVxuXG4vKipcbiAqIENvdW50ZXIgZm9yIGdldFVpZC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG5sZXQgdWlkQ291bnRlcl8gPSAwO1xuXG4vKipcbiAqIEdldHMgYSB1bmlxdWUgSUQgZm9yIGFuIG9iamVjdC4gVGhpcyBtdXRhdGVzIHRoZSBvYmplY3Qgc28gdGhhdCBmdXJ0aGVyIGNhbGxzXG4gKiB3aXRoIHRoZSBzYW1lIG9iamVjdCBhcyBhIHBhcmFtZXRlciByZXR1cm5zIHRoZSBzYW1lIHZhbHVlLiBVbmlxdWUgSURzIGFyZSBnZW5lcmF0ZWRcbiAqIGFzIGEgc3RyaWN0bHkgaW5jcmVhc2luZyBzZXF1ZW5jZS4gQWRhcHRlZCBmcm9tIGdvb2cuZ2V0VWlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBnZXQgdGhlIHVuaXF1ZSBJRCBmb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB1bmlxdWUgSUQgZm9yIHRoZSBvYmplY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVaWQob2JqKSB7XG4gIHJldHVybiBvYmoub2xfdWlkIHx8IChvYmoub2xfdWlkID0gU3RyaW5nKCsrdWlkQ291bnRlcl8pKTtcbn1cblxuLyoqXG4gKiBPcGVuTGF5ZXJzIHZlcnNpb24uXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgVkVSU0lPTiA9ICc3LjUuMic7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvT2JqZWN0XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4vT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7aXNFbXB0eX0gZnJvbSAnLi9vYmouanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqL1xuZXhwb3J0IGNsYXNzIE9iamVjdEV2ZW50IGV4dGVuZHMgRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHByb3BlcnR5IG5hbWUuXG4gICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgVGhlIG9sZCB2YWx1ZSBmb3IgYGtleWAuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBrZXksIG9sZFZhbHVlKSB7XG4gICAgc3VwZXIodHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgY2hhbmdpbmcuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5rZXkgPSBrZXk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb2xkIHZhbHVlLiBUbyBnZXQgdGhlIG5ldyB2YWx1ZSB1c2UgYGUudGFyZ2V0LmdldChlLmtleSlgIHdoZXJlXG4gICAgICogYGVgIGlzIHRoZSBldmVudCBvYmplY3QuXG4gICAgICogQHR5cGUgeyp9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMub2xkVmFsdWUgPSBvbGRWYWx1ZTtcbiAgfVxufVxuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXMsIFJldHVybj59IE9iamVjdE9uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBNb3N0IG5vbi10cml2aWFsIGNsYXNzZXMgaW5oZXJpdCBmcm9tIHRoaXMuXG4gKlxuICogVGhpcyBleHRlbmRzIHtAbGluayBtb2R1bGU6b2wvT2JzZXJ2YWJsZX5PYnNlcnZhYmxlfSB3aXRoIG9ic2VydmFibGVcbiAqIHByb3BlcnRpZXMsIHdoZXJlIGVhY2ggcHJvcGVydHkgaXMgb2JzZXJ2YWJsZSBhcyB3ZWxsIGFzIHRoZSBvYmplY3QgYXMgYVxuICogd2hvbGUuXG4gKlxuICogQ2xhc3NlcyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIGhhdmUgcHJlLWRlZmluZWQgcHJvcGVydGllcywgdG8gd2hpY2ggeW91IGNhblxuICogYWRkIHlvdXIgb3ducy4gVGhlIHByZS1kZWZpbmVkIHByb3BlcnRpZXMgYXJlIGxpc3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24gYXNcbiAqICdPYnNlcnZhYmxlIFByb3BlcnRpZXMnLCBhbmQgaGF2ZSB0aGVpciBvd24gYWNjZXNzb3JzOyBmb3IgZXhhbXBsZSxcbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gaGFzIGEgYHRhcmdldGAgcHJvcGVydHksIGFjY2Vzc2VkIHdpdGhcbiAqIGBnZXRUYXJnZXQoKWAgYW5kIGNoYW5nZWQgd2l0aCBgc2V0VGFyZ2V0KClgLiBOb3QgYWxsIHByb3BlcnRpZXMgYXJlIGhvd2V2ZXJcbiAqIHNldHRhYmxlLiBUaGVyZSBhcmUgYWxzbyBnZW5lcmFsLXB1cnBvc2UgYWNjZXNzb3JzIGBnZXQoKWAgYW5kIGBzZXQoKWAuIEZvclxuICogZXhhbXBsZSwgYGdldCgndGFyZ2V0JylgIGlzIGVxdWl2YWxlbnQgdG8gYGdldFRhcmdldCgpYC5cbiAqXG4gKiBUaGUgYHNldGAgYWNjZXNzb3JzIHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQsIGFuZCB5b3UgY2FuIG1vbml0b3IgdGhpcyBieVxuICogcmVnaXN0ZXJpbmcgYSBsaXN0ZW5lci4gRm9yIGV4YW1wbGUsIHtAbGluayBtb2R1bGU6b2wvVmlld35WaWV3fSBoYXMgYVxuICogYGNlbnRlcmAgcHJvcGVydHksIHNvIGB2aWV3Lm9uKCdjaGFuZ2U6Y2VudGVyJywgZnVuY3Rpb24oZXZ0KSB7Li4ufSk7YCB3b3VsZFxuICogY2FsbCB0aGUgZnVuY3Rpb24gd2hlbmV2ZXIgdGhlIHZhbHVlIG9mIHRoZSBjZW50ZXIgcHJvcGVydHkgY2hhbmdlcy4gV2l0aGluXG4gKiB0aGUgZnVuY3Rpb24sIGBldnQudGFyZ2V0YCB3b3VsZCBiZSB0aGUgdmlldywgc28gYGV2dC50YXJnZXQuZ2V0Q2VudGVyKClgXG4gKiB3b3VsZCByZXR1cm4gdGhlIG5ldyBjZW50ZXIuXG4gKlxuICogWW91IGNhbiBhZGQgeW91ciBvd24gb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIHdpdGhcbiAqIGBvYmplY3Quc2V0KCdwcm9wJywgJ3ZhbHVlJylgLCBhbmQgcmV0cmlldmUgdGhhdCB3aXRoIGBvYmplY3QuZ2V0KCdwcm9wJylgLlxuICogWW91IGNhbiBsaXN0ZW4gZm9yIGNoYW5nZXMgb24gdGhhdCBwcm9wZXJ0eSB2YWx1ZSB3aXRoXG4gKiBgb2JqZWN0Lm9uKCdjaGFuZ2U6cHJvcCcsIGxpc3RlbmVyKWAuIFlvdSBjYW4gZ2V0IGEgbGlzdCBvZiBhbGxcbiAqIHByb3BlcnRpZXMgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0I2dldFByb3BlcnRpZXN9LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIGFyZSBzZXBhcmF0ZSBmcm9tIHN0YW5kYXJkIEpTIHByb3BlcnRpZXMuXG4gKiBZb3UgY2FuLCBmb3IgZXhhbXBsZSwgZ2l2ZSB5b3VyIG1hcCBvYmplY3QgYSB0aXRsZSB3aXRoXG4gKiBgbWFwLnRpdGxlPSdOZXcgdGl0bGUnYCBhbmQgd2l0aCBgbWFwLnNldCgndGl0bGUnLCAnQW5vdGhlciB0aXRsZScpYC4gVGhlXG4gKiBmaXJzdCB3aWxsIGJlIGEgYGhhc093blByb3BlcnR5YDsgdGhlIHNlY29uZCB3aWxsIGFwcGVhciBpblxuICogYGdldFByb3BlcnRpZXMoKWAuIE9ubHkgdGhlIHNlY29uZCBpcyBvYnNlcnZhYmxlLlxuICpcbiAqIFByb3BlcnRpZXMgY2FuIGJlIGRlbGV0ZWQgYnkgdXNpbmcgdGhlIHVuc2V0IG1ldGhvZC4gRS5nLlxuICogb2JqZWN0LnVuc2V0KCdmb28nKS5cbiAqXG4gKiBAZmlyZXMgT2JqZWN0RXZlbnRcbiAqIEBhcGlcbiAqL1xuY2xhc3MgQmFzZU9iamVjdCBleHRlbmRzIE9ic2VydmFibGUge1xuICAvKipcbiAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPn0gW3ZhbHVlc10gQW4gb2JqZWN0IHdpdGgga2V5LXZhbHVlIHBhaXJzLlxuICAgKi9cbiAgY29uc3RydWN0b3IodmFsdWVzKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub25jZTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0T25TaWduYXR1cmU8dm9pZD59XG4gICAgICovXG4gICAgdGhpcy51bjtcblxuICAgIC8vIENhbGwge0BsaW5rIG1vZHVsZTpvbC91dGlsLmdldFVpZH0gdG8gZW5zdXJlIHRoYXQgdGhlIG9yZGVyIG9mIG9iamVjdHMnIGlkcyBpc1xuICAgIC8vIHRoZSBzYW1lIGFzIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IHdlcmUgY3JlYXRlZC4gIFRoaXMgYWxzbyBoZWxwcyB0b1xuICAgIC8vIGVuc3VyZSB0aGF0IG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBhbHdheXMgYWRkZWQgaW4gdGhlIHNhbWUgb3JkZXIsIHdoaWNoXG4gICAgLy8gaGVscHMgbWFueSBKYXZhU2NyaXB0IGVuZ2luZXMgZ2VuZXJhdGUgZmFzdGVyIGNvZGUuXG4gICAgZ2V0VWlkKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgdGhpcy52YWx1ZXNfID0gbnVsbDtcblxuICAgIGlmICh2YWx1ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHZhbHVlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYSB2YWx1ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICogQHJldHVybiB7Kn0gVmFsdWUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldChrZXkpIHtcbiAgICBsZXQgdmFsdWU7XG4gICAgaWYgKHRoaXMudmFsdWVzXyAmJiB0aGlzLnZhbHVlc18uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2Ygb2JqZWN0IHByb3BlcnR5IG5hbWVzLlxuICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBMaXN0IG9mIHByb3BlcnR5IG5hbWVzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRLZXlzKCkge1xuICAgIHJldHVybiAodGhpcy52YWx1ZXNfICYmIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzXykpIHx8IFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBvYmplY3Qgb2YgYWxsIHByb3BlcnR5IG5hbWVzIGFuZCB2YWx1ZXMuXG4gICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsICo+fSBPYmplY3QuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFByb3BlcnRpZXMoKSB7XG4gICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy52YWx1ZXNfKSkgfHwge307XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBoYXMgcHJvcGVydGllcy5cbiAgICovXG4gIGhhc1Byb3BlcnRpZXMoKSB7XG4gICAgcmV0dXJuICEhdGhpcy52YWx1ZXNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgT2xkIHZhbHVlLlxuICAgKi9cbiAgbm90aWZ5KGtleSwgb2xkVmFsdWUpIHtcbiAgICBsZXQgZXZlbnRUeXBlO1xuICAgIGV2ZW50VHlwZSA9IGBjaGFuZ2U6JHtrZXl9YDtcbiAgICBpZiAodGhpcy5oYXNMaXN0ZW5lcihldmVudFR5cGUpKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgIH1cbiAgICBldmVudFR5cGUgPSBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0U7XG4gICAgaWYgKHRoaXMuaGFzTGlzdGVuZXIoZXZlbnRUeXBlKSkge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAqL1xuICBhZGRDaGFuZ2VMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKGBjaGFuZ2U6JHtrZXl9YCwgbGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgKi9cbiAgcmVtb3ZlQ2hhbmdlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihgY2hhbmdlOiR7a2V5fWAsIGxpc3RlbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NpbGVudF0gVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0KGtleSwgdmFsdWUsIHNpbGVudCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMudmFsdWVzXyB8fCAodGhpcy52YWx1ZXNfID0ge30pO1xuICAgIGlmIChzaWxlbnQpIHtcbiAgICAgIHZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG9sZFZhbHVlID0gdmFsdWVzW2tleV07XG4gICAgICB2YWx1ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgaWYgKG9sZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLm5vdGlmeShrZXksIG9sZFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhIGNvbGxlY3Rpb24gb2Yga2V5LXZhbHVlIHBhaXJzLiAgTm90ZSB0aGF0IHRoaXMgY2hhbmdlcyBhbnkgZXhpc3RpbmdcbiAgICogcHJvcGVydGllcyBhbmQgYWRkcyBuZXcgb25lcyAoaXQgZG9lcyBub3QgcmVtb3ZlIGFueSBleGlzdGluZyBwcm9wZXJ0aWVzKS5cbiAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAgICogQHBhcmFtIHtib29sZWFufSBbc2lsZW50XSBVcGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRQcm9wZXJ0aWVzKHZhbHVlcywgc2lsZW50KSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdmFsdWVzKSB7XG4gICAgICB0aGlzLnNldChrZXksIHZhbHVlc1trZXldLCBzaWxlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBhbnkgcHJvcGVydGllcyBmcm9tIGFub3RoZXIgb2JqZWN0IHdpdGhvdXQgdHJpZ2dlcmluZyBldmVudHMuXG4gICAqIEBwYXJhbSB7QmFzZU9iamVjdH0gc291cmNlIFRoZSBzb3VyY2Ugb2JqZWN0LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBhcHBseVByb3BlcnRpZXMoc291cmNlKSB7XG4gICAgaWYgKCFzb3VyY2UudmFsdWVzXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBPYmplY3QuYXNzaWduKHRoaXMudmFsdWVzXyB8fCAodGhpcy52YWx1ZXNfID0ge30pLCBzb3VyY2UudmFsdWVzXyk7XG4gIH1cblxuICAvKipcbiAgICogVW5zZXRzIGEgcHJvcGVydHkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3NpbGVudF0gVW5zZXQgd2l0aG91dCB0cmlnZ2VyaW5nIGFuIGV2ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICB1bnNldChrZXksIHNpbGVudCkge1xuICAgIGlmICh0aGlzLnZhbHVlc18gJiYga2V5IGluIHRoaXMudmFsdWVzXykge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlc19ba2V5XTtcbiAgICAgIGlmIChpc0VtcHR5KHRoaXMudmFsdWVzXykpIHtcbiAgICAgICAgdGhpcy52YWx1ZXNfID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlT2JqZWN0O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIE9QQUNJVFk6ICdvcGFjaXR5JyxcbiAgVklTSUJMRTogJ3Zpc2libGUnLFxuICBFWFRFTlQ6ICdleHRlbnQnLFxuICBaX0lOREVYOiAnekluZGV4JyxcbiAgTUFYX1JFU09MVVRJT046ICdtYXhSZXNvbHV0aW9uJyxcbiAgTUlOX1JFU09MVVRJT046ICdtaW5SZXNvbHV0aW9uJyxcbiAgTUFYX1pPT006ICdtYXhab29tJyxcbiAgTUlOX1pPT006ICdtaW5ab29tJyxcbiAgU09VUkNFOiAnc291cmNlJyxcbiAgTUFQOiAnbWFwJyxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvQXNzZXJ0aW9uRXJyb3JcbiAqL1xuXG4vKiogQHR5cGUge09iamVjdDxudW1iZXIsIHN0cmluZz59ICovXG5jb25zdCBtZXNzYWdlcyA9IHtcbiAgMTogJ1RoZSB2aWV3IGNlbnRlciBpcyBub3QgZGVmaW5lZCcsXG4gIDI6ICdUaGUgdmlldyByZXNvbHV0aW9uIGlzIG5vdCBkZWZpbmVkJyxcbiAgMzogJ1RoZSB2aWV3IHJvdGF0aW9uIGlzIG5vdCBkZWZpbmVkJyxcbiAgNDogJ2BpbWFnZWAgYW5kIGBzcmNgIGNhbm5vdCBiZSBwcm92aWRlZCBhdCB0aGUgc2FtZSB0aW1lJyxcbiAgNTogJ2BpbWdTaXplYCBtdXN0IGJlIHNldCB3aGVuIGBpbWFnZWAgaXMgcHJvdmlkZWQnLFxuICA3OiAnYGZvcm1hdGAgbXVzdCBiZSBzZXQgd2hlbiBgdXJsYCBpcyBzZXQnLFxuICA4OiAnVW5rbm93biBgc2VydmVyVHlwZWAgY29uZmlndXJlZCcsXG4gIDk6ICdgdXJsYCBtdXN0IGJlIGNvbmZpZ3VyZWQgb3Igc2V0IHVzaW5nIGAjc2V0VXJsKClgJyxcbiAgMTA6ICdUaGUgZGVmYXVsdCBgZ2VvbWV0cnlGdW5jdGlvbmAgY2FuIG9ubHkgaGFuZGxlIGBQb2ludGAgZ2VvbWV0cmllcycsXG4gIDExOiAnYG9wdGlvbnMuZmVhdHVyZVR5cGVzYCBtdXN0IGJlIGFuIEFycmF5JyxcbiAgMTI6ICdgb3B0aW9ucy5nZW9tZXRyeU5hbWVgIG11c3QgYWxzbyBiZSBwcm92aWRlZCB3aGVuIGBvcHRpb25zLmJib3hgIGlzIHNldCcsXG4gIDEzOiAnSW52YWxpZCBjb3JuZXInLFxuICAxNDogJ0ludmFsaWQgY29sb3InLFxuICAxNTogJ1RyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZScsXG4gIDE2OiAnVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5JyxcbiAgMTc6ICdgcmVzb2x1dGlvbnNgIG11c3QgYmUgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXInLFxuICAxODogJ0VpdGhlciBgb3JpZ2luYCBvciBgb3JpZ2luc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoJyxcbiAgMTk6ICdOdW1iZXIgb2YgYHRpbGVTaXplc2AgYW5kIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBlcXVhbCcsXG4gIDIwOiAnTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsJyxcbiAgMjI6ICdFaXRoZXIgYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGgnLFxuICAyNDogJ0ludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWAnLFxuICAyNTogJ0Nhbm5vdCBmaXQgZW1wdHkgZXh0ZW50IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWAnLFxuICAyNjogJ0ZlYXR1cmVzIG11c3QgaGF2ZSBhbiBpZCBzZXQnLFxuICAyNzogJ0ZlYXR1cmVzIG11c3QgaGF2ZSBhbiBpZCBzZXQnLFxuICAyODogJ2ByZW5kZXJNb2RlYCBtdXN0IGJlIGBcImh5YnJpZFwiYCBvciBgXCJ2ZWN0b3JcImAnLFxuICAzMDogJ1RoZSBwYXNzZWQgYGZlYXR1cmVgIHdhcyBhbHJlYWR5IGFkZGVkIHRvIHRoZSBzb3VyY2UnLFxuICAzMTogJ1RyaWVkIHRvIGVucXVldWUgYW4gYGVsZW1lbnRgIHRoYXQgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHF1ZXVlJyxcbiAgMzI6ICdUcmFuc2Zvcm1hdGlvbiBtYXRyaXggY2Fubm90IGJlIGludmVydGVkJyxcbiAgMzM6ICdJbnZhbGlkIHVuaXRzJyxcbiAgMzQ6ICdJbnZhbGlkIGdlb21ldHJ5IGxheW91dCcsXG4gIDM2OiAnVW5rbm93biBTUlMgdHlwZScsXG4gIDM3OiAnVW5rbm93biBnZW9tZXRyeSB0eXBlIGZvdW5kJyxcbiAgMzg6ICdgc3R5bGVNYXBWYWx1ZWAgaGFzIGFuIHVua25vd24gdHlwZScsXG4gIDM5OiAnVW5rbm93biBnZW9tZXRyeSB0eXBlJyxcbiAgNDA6ICdFeHBlY3RlZCBgZmVhdHVyZWAgdG8gaGF2ZSBhIGdlb21ldHJ5JyxcbiAgNDE6ICdFeHBlY3RlZCBhbiBgb2wvc3R5bGUvU3R5bGVgIG9yIGFuIGFycmF5IG9mIGBvbC9zdHlsZS9TdHlsZS5qc2AnLFxuICA0MjogJ1F1ZXN0aW9uIHVua25vd24sIHRoZSBhbnN3ZXIgaXMgNDInLFxuICA0MzogJ0V4cGVjdGVkIGBsYXllcnNgIHRvIGJlIGFuIGFycmF5IG9yIGEgYENvbGxlY3Rpb25gJyxcbiAgNDc6ICdFeHBlY3RlZCBgY29udHJvbHNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBvbC9Db2xsZWN0aW9uYCcsXG4gIDQ4OiAnRXhwZWN0ZWQgYGludGVyYWN0aW9uc2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYG9sL0NvbGxlY3Rpb25gJyxcbiAgNDk6ICdFeHBlY3RlZCBgb3ZlcmxheXNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBvbC9Db2xsZWN0aW9uYCcsXG4gIDUwOiAnYG9wdGlvbnMuZmVhdHVyZVR5cGVzYCBzaG91bGQgYmUgYW4gQXJyYXknLFxuICA1MTogJ0VpdGhlciBgdXJsYCBvciBgdGlsZUpTT05gIG9wdGlvbnMgbXVzdCBiZSBwcm92aWRlZCcsXG4gIDUyOiAnVW5rbm93biBgc2VydmVyVHlwZWAgY29uZmlndXJlZCcsXG4gIDUzOiAnVW5rbm93biBgdGllclNpemVDYWxjdWxhdGlvbmAgY29uZmlndXJlZCcsXG4gIDU1OiAnVGhlIHsteX0gcGxhY2Vob2xkZXIgcmVxdWlyZXMgYSB0aWxlIGdyaWQgd2l0aCBleHRlbnQnLFxuICA1NjogJ21hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudCcsXG4gIDU3OiAnQXQgbGVhc3QgMiBjb25kaXRpb25zIGFyZSByZXF1aXJlZCcsXG4gIDU5OiAnSW52YWxpZCBjb21tYW5kIGZvdW5kIGluIHRoZSBQQkYnLFxuICA2MDogJ01pc3Npbmcgb3IgaW52YWxpZCBgc2l6ZWAnLFxuICA2MTogJ0Nhbm5vdCBkZXRlcm1pbmUgSUlJRiBJbWFnZSBBUEkgdmVyc2lvbiBmcm9tIHByb3ZpZGVkIGltYWdlIGluZm9ybWF0aW9uIEpTT04nLFxuICA2MjogJ0EgYFdlYkdMQXJyYXlCdWZmZXJgIG11c3QgZWl0aGVyIGJlIG9mIHR5cGUgYEVMRU1FTlRfQVJSQVlfQlVGRkVSYCBvciBgQVJSQVlfQlVGRkVSYCcsXG4gIDY0OiAnTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyJyxcbiAgNjY6ICdgZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVgIGNhbm5vdCBiZSB1c2VkIG9uIGEgV2ViR0wgbGF5ZXIgaWYgdGhlIGhpdCBkZXRlY3Rpb24gbG9naWMgaGFzIG5vdCBiZWVuIGVuYWJsZWQuIFRoaXMgaXMgZG9uZSBieSBwcm92aWRpbmcgYWRlcXVhdGUgc2hhZGVycyB1c2luZyB0aGUgYGhpdFZlcnRleFNoYWRlcmAgYW5kIGBoaXRGcmFnbWVudFNoYWRlcmAgcHJvcGVydGllcyBvZiBgV2ViR0xQb2ludHNMYXllclJlbmRlcmVyYCcsXG4gIDY3OiAnQSBsYXllciBjYW4gb25seSBiZSBhZGRlZCB0byB0aGUgbWFwIG9uY2UuIFVzZSBlaXRoZXIgYGxheWVyLnNldE1hcCgpYCBvciBgbWFwLmFkZExheWVyKClgLCBub3QgYm90aCcsXG4gIDY4OiAnQSBWZWN0b3JUaWxlIHNvdXJjZSBjYW4gb25seSBiZSByZW5kZXJlZCBpZiBpdCBoYXMgYSBwcm9qZWN0aW9uIGNvbXBhdGlibGUgd2l0aCB0aGUgdmlldyBwcm9qZWN0aW9uJyxcbiAgNjk6ICdgd2lkdGhgIG9yIGBoZWlnaHRgIGNhbm5vdCBiZSBwcm92aWRlZCB0b2dldGhlciB3aXRoIGBzY2FsZWAnLFxufTtcblxuLyoqXG4gKiBFcnJvciBvYmplY3QgdGhyb3duIHdoZW4gYW4gYXNzZXJ0aW9uIGZhaWxlZC4gVGhpcyBpcyBhbiBFQ01BLTI2MiBFcnJvcixcbiAqIGV4dGVuZGVkIHdpdGggYSBgY29kZWAgcHJvcGVydHkuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRXJyb3IuXG4gKi9cbmNsYXNzIEFzc2VydGlvbkVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgRXJyb3IgY29kZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvZGUpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gbWVzc2FnZXNbY29kZV07XG5cbiAgICBzdXBlcihtZXNzYWdlKTtcblxuICAgIC8qKlxuICAgICAqIEVycm9yIGNvZGUuIFRoZSBtZWFuaW5nIG9mIHRoZSBjb2RlIGNhbiBiZSBmb3VuZCBvblxuICAgICAqIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvIChyZXBsYWNlIGBsYXRlc3RgIHdpdGhcbiAgICAgKiB0aGUgdmVyc2lvbiBmb3VuZCBpbiB0aGUgT3BlbkxheWVycyBzY3JpcHQncyBoZWFkZXIgY29tbWVudCBpZiBhIHZlcnNpb25cbiAgICAgKiBvdGhlciB0aGFuIHRoZSBsYXRlc3QgaXMgdXNlZCkuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAZGVwcmVjYXRlZCBvbC9Bc3NlcnRpb25FcnJvciBhbmQgZXJyb3IgY29kZXMgd2lsbCBiZSByZW1vdmVkIGluIHY4LjBcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5jb2RlID0gY29kZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5uYW1lID0gJ0Fzc2VydGlvbkVycm9yJztcblxuICAgIC8vIFJlLWFzc2lnbiBtZXNzYWdlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy80MFxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXNzZXJ0aW9uRXJyb3I7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvYXNzZXJ0c1xuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHsqfSBhc3NlcnRpb24gQXNzZXJ0aW9uIHdlIGV4cGVjdGVkIHRvIGJlIHRydXRoeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvckNvZGUgRXJyb3IgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIGVycm9yQ29kZSkge1xuICBpZiAoIWFzc2VydGlvbikge1xuICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihlcnJvckNvZGUpO1xuICB9XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvbWF0aFxuICovXG5cbi8qKlxuICogVGFrZXMgYSBudW1iZXIgYW5kIGNsYW1wcyBpdCB0byB3aXRoaW4gdGhlIHByb3ZpZGVkIGJvdW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSB2YWx1ZSB0byByZXR1cm4uXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGlucHV0IG51bWJlciBpZiBpdCBpcyB3aXRoaW4gYm91bmRzLCBvciB0aGUgbmVhcmVzdFxuICogICAgIG51bWJlciB3aXRoaW4gdGhlIGJvdW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodmFsdWUsIG1pbiksIG1heCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc3F1YXJlIG9mIHRoZSBjbG9zZXN0IGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50ICh4LCB5KSBhbmQgdGhlXG4gKiBsaW5lIHNlZ21lbnQgKHgxLCB5MSkgdG8gKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgY29uc3QgZHggPSB4MiAtIHgxO1xuICBjb25zdCBkeSA9IHkyIC0geTE7XG4gIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgIGNvbnN0IHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICBpZiAodCA+IDEpIHtcbiAgICAgIHgxID0geDI7XG4gICAgICB5MSA9IHkyO1xuICAgIH0gZWxzZSBpZiAodCA+IDApIHtcbiAgICAgIHgxICs9IGR4ICogdDtcbiAgICAgIHkxICs9IGR5ICogdDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZSh4LCB5LCB4MSwgeTEpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzICh4MSwgeTEpIGFuZCAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5Mikge1xuICBjb25zdCBkeCA9IHgyIC0geDE7XG4gIGNvbnN0IGR5ID0geTIgLSB5MTtcbiAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuXG4vKipcbiAqIFNvbHZlcyBzeXN0ZW0gb2YgbGluZWFyIGVxdWF0aW9ucyB1c2luZyBHYXVzc2lhbiBlbGltaW5hdGlvbiBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0IEF1Z21lbnRlZCBtYXRyaXggKG4geCBuICsgMSBjb2x1bW4pXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiByb3ctbWFqb3Igb3JkZXIuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgcmVzdWx0aW5nIHZlY3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbHZlTGluZWFyU3lzdGVtKG1hdCkge1xuICBjb25zdCBuID0gbWF0Lmxlbmd0aDtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgIC8vIEZpbmQgbWF4IGluIHRoZSBpLXRoIGNvbHVtbiAoaWdub3JpbmcgaSAtIDEgZmlyc3Qgcm93cylcbiAgICBsZXQgbWF4Um93ID0gaTtcbiAgICBsZXQgbWF4RWwgPSBNYXRoLmFicyhtYXRbaV1baV0pO1xuICAgIGZvciAobGV0IHIgPSBpICsgMTsgciA8IG47IHIrKykge1xuICAgICAgY29uc3QgYWJzVmFsdWUgPSBNYXRoLmFicyhtYXRbcl1baV0pO1xuICAgICAgaWYgKGFic1ZhbHVlID4gbWF4RWwpIHtcbiAgICAgICAgbWF4RWwgPSBhYnNWYWx1ZTtcbiAgICAgICAgbWF4Um93ID0gcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF4RWwgPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsOyAvLyBtYXRyaXggaXMgc2luZ3VsYXJcbiAgICB9XG5cbiAgICAvLyBTd2FwIG1heCByb3cgd2l0aCBpLXRoIChjdXJyZW50KSByb3dcbiAgICBjb25zdCB0bXAgPSBtYXRbbWF4Um93XTtcbiAgICBtYXRbbWF4Um93XSA9IG1hdFtpXTtcbiAgICBtYXRbaV0gPSB0bXA7XG5cbiAgICAvLyBTdWJ0cmFjdCB0aGUgaS10aCByb3cgdG8gbWFrZSBhbGwgdGhlIHJlbWFpbmluZyByb3dzIDAgaW4gdGhlIGktdGggY29sdW1uXG4gICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbjsgaisrKSB7XG4gICAgICBjb25zdCBjb2VmID0gLW1hdFtqXVtpXSAvIG1hdFtpXVtpXTtcbiAgICAgIGZvciAobGV0IGsgPSBpOyBrIDwgbiArIDE7IGsrKykge1xuICAgICAgICBpZiAoaSA9PSBrKSB7XG4gICAgICAgICAgbWF0W2pdW2tdID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtYXRbal1ba10gKz0gY29lZiAqIG1hdFtpXVtrXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIFNvbHZlIEF4PWIgZm9yIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4IEEgKG1hdClcbiAgY29uc3QgeCA9IG5ldyBBcnJheShuKTtcbiAgZm9yIChsZXQgbCA9IG4gLSAxOyBsID49IDA7IGwtLSkge1xuICAgIHhbbF0gPSBtYXRbbF1bbl0gLyBtYXRbbF1bbF07XG4gICAgZm9yIChsZXQgbSA9IGwgLSAxOyBtID49IDA7IG0tLSkge1xuICAgICAgbWF0W21dW25dIC09IG1hdFttXVtsXSAqIHhbbF07XG4gICAgfVxuICB9XG4gIHJldHVybiB4O1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHJhZGlhbnMgdG8gdG8gZGVncmVlcy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJblJhZGlhbnMgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gZGVncmVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRGVncmVlcyhhbmdsZUluUmFkaWFucykge1xuICByZXR1cm4gKGFuZ2xlSW5SYWRpYW5zICogMTgwKSAvIE1hdGguUEk7XG59XG5cbi8qKlxuICogQ29udmVydHMgZGVncmVlcyB0byByYWRpYW5zLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluRGVncmVlcyBBbmdsZSBpbiBkZWdyZWVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBpbiByYWRpYW5zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9SYWRpYW5zKGFuZ2xlSW5EZWdyZWVzKSB7XG4gIHJldHVybiAoYW5nbGVJbkRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtb2R1bG8gb2YgYSAvIGIsIGRlcGVuZGluZyBvbiB0aGUgc2lnbiBvZiBiLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIERpdmlkZW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IGIgRGl2aXNvci5cbiAqIEByZXR1cm4ge251bWJlcn0gTW9kdWxvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kdWxvKGEsIGIpIHtcbiAgY29uc3QgciA9IGEgJSBiO1xuICByZXR1cm4gciAqIGIgPCAwID8gciArIGIgOiByO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxpbmVhcmx5IGludGVycG9sYXRlZCB2YWx1ZSBvZiB4IGJldHdlZW4gYSBhbmQgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSBiIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IHggVmFsdWUgdG8gYmUgaW50ZXJwb2xhdGVkLlxuICogQHJldHVybiB7bnVtYmVyfSBJbnRlcnBvbGF0ZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKGEsIGIsIHgpIHtcbiAgcmV0dXJuIGEgKyB4ICogKGIgLSBhKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIHdpdGggYSBsaW1pdGVkIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbHMgVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5wdXQgbnVtYmVyIHdpdGggYSBsaW1pdGVkIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvRml4ZWQobiwgZGVjaW1hbHMpIHtcbiAgY29uc3QgZmFjdG9yID0gTWF0aC5wb3coMTAsIGRlY2ltYWxzKTtcbiAgcmV0dXJuIE1hdGgucm91bmQobiAqIGZhY3RvcikgLyBmYWN0b3I7XG59XG5cbi8qKlxuICogUm91bmRzIGEgbnVtYmVyIHRvIHRoZSBuZWFyZXN0IGludGVnZXIgdmFsdWUgY29uc2lkZXJpbmcgb25seSB0aGUgZ2l2ZW4gbnVtYmVyXG4gKiBvZiBkZWNpbWFsIGRpZ2l0cyAod2l0aCByb3VuZGluZyBvbiB0aGUgZmluYWwgZGlnaXQpLlxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGlucHV0IG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWNpbWFscyBUaGUgbWF4aW11bSBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBuZWFyZXN0IGludGVnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3VuZChuLCBkZWNpbWFscykge1xuICByZXR1cm4gTWF0aC5yb3VuZCh0b0ZpeGVkKG4sIGRlY2ltYWxzKSk7XG59XG5cbi8qKlxuICogUm91bmRzIGEgbnVtYmVyIHRvIHRoZSBuZXh0IHNtYWxsZXIgaW50ZWdlciBjb25zaWRlcmluZyBvbmx5IHRoZSBnaXZlbiBudW1iZXJcbiAqIG9mIGRlY2ltYWwgZGlnaXRzICh3aXRoIHJvdW5kaW5nIG9uIHRoZSBmaW5hbCBkaWdpdCkuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG5leHQgc21hbGxlciBpbnRlZ2VyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmxvb3IobiwgZGVjaW1hbHMpIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IodG9GaXhlZChuLCBkZWNpbWFscykpO1xufVxuXG4vKipcbiAqIFJvdW5kcyBhIG51bWJlciB0byB0aGUgbmV4dCBiaWdnZXIgaW50ZWdlciBjb25zaWRlcmluZyBvbmx5IHRoZSBnaXZlbiBudW1iZXJcbiAqIG9mIGRlY2ltYWwgZGlnaXRzICh3aXRoIHJvdW5kaW5nIG9uIHRoZSBmaW5hbCBkaWdpdCkuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG5leHQgYmlnZ2VyIGludGVnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjZWlsKG4sIGRlY2ltYWxzKSB7XG4gIHJldHVybiBNYXRoLmNlaWwodG9GaXhlZChuLCBkZWNpbWFscykpO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL0Jhc2VcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBMYXllclByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuLyoqXG4gKiBBIGNzcyBjb2xvciwgb3IgYSBmdW5jdGlvbiBjYWxsZWQgd2l0aCBhIHZpZXcgcmVzb2x1dGlvbiByZXR1cm5pbmcgYSBjc3MgY29sb3IuXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ3xmdW5jdGlvbihudW1iZXIpOnN0cmluZ30gQmFja2dyb3VuZENvbG9yXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6ZXh0ZW50J3wnY2hhbmdlOm1heFJlc29sdXRpb24nfCdjaGFuZ2U6bWF4Wm9vbSd8XG4gKiAgICAnY2hhbmdlOm1pblJlc29sdXRpb24nfCdjaGFuZ2U6bWluWm9vbSd8J2NoYW5nZTpvcGFjaXR5J3wnY2hhbmdlOnZpc2libGUnfCdjaGFuZ2U6ekluZGV4J30gQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc1xuICovXG5cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPEJhc2VMYXllck9iamVjdEV2ZW50VHlwZXMsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8QmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlcywgUmV0dXJuPn0gQmFzZUxheWVyT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge0JhY2tncm91bmRDb2xvcn0gW2JhY2tncm91bmRdIEJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBsYXllci4gSWYgbm90IHNwZWNpZmllZCwgbm8gYmFja2dyb3VuZFxuICogd2lsbCBiZSByZW5kZXJlZC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBOb3RlIHRoYXQgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V+QmFzZUxheWVyfSBhbmQgYWxsIGl0cyBzdWJjbGFzc2VzLCBhbnkgcHJvcGVydHkgc2V0IGluXG4gKiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fSBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0LCBzb1xuICogaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIEJhc2VMYXllciBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIExheWVyIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbjtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0JhY2tncm91bmRDb2xvcnxmYWxzZX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYmFja2dyb3VuZF8gPSBvcHRpb25zLmJhY2tncm91bmQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgY29uc3QgcHJvcGVydGllcyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5wcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgZGVsZXRlIHByb3BlcnRpZXMucHJvcGVydGllcztcbiAgICAgIE9iamVjdC5hc3NpZ24ocHJvcGVydGllcywgb3B0aW9ucy5wcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPVxuICAgICAgb3B0aW9ucy5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYWNpdHkgOiAxO1xuICAgIGFzc2VydCh0eXBlb2YgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk9QQUNJVFldID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcblxuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFXSA9XG4gICAgICBvcHRpb25zLnZpc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlzaWJsZSA6IHRydWU7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5LlpfSU5ERVhdID0gb3B0aW9ucy56SW5kZXg7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OXSA9XG4gICAgICBvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4UmVzb2x1dGlvbiA6IEluZmluaXR5O1xuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTl0gPVxuICAgICAgb3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblJlc29sdXRpb24gOiAwO1xuICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTV0gPVxuICAgICAgb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAtSW5maW5pdHk7XG4gICAgcHJvcGVydGllc1tMYXllclByb3BlcnR5Lk1BWF9aT09NXSA9XG4gICAgICBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IEluZmluaXR5O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuY2xhc3NOYW1lXyA9XG4gICAgICBwcm9wZXJ0aWVzLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gcHJvcGVydGllcy5jbGFzc05hbWUgOiAnb2wtbGF5ZXInO1xuICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLmNsYXNzTmFtZTtcblxuICAgIHRoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zdGF0ZV8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYmFja2dyb3VuZCBmb3IgdGhpcyBsYXllci5cbiAgICogQHJldHVybiB7QmFja2dyb3VuZENvbG9yfGZhbHNlfSBMYXllciBiYWNrZ3JvdW5kLlxuICAgKi9cbiAgZ2V0QmFja2dyb3VuZCgpIHtcbiAgICByZXR1cm4gdGhpcy5iYWNrZ3JvdW5kXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IENTUyBjbGFzcyBuYW1lLlxuICAgKi9cbiAgZ2V0Q2xhc3NOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLmNsYXNzTmFtZV87XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2QgaXMgbm90IG1lYW50IHRvIGJlIGNhbGxlZCBieSBsYXllcnMgb3IgbGF5ZXIgcmVuZGVyZXJzIGJlY2F1c2UgdGhlIHN0YXRlXG4gICAqIGlzIGluY29ycmVjdCBpZiB0aGUgbGF5ZXIgaXMgaW5jbHVkZWQgaW4gYSBsYXllciBncm91cC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBbbWFuYWdlZF0gTGF5ZXIgaXMgbWFuYWdlZC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX0gTGF5ZXIgc3RhdGUuXG4gICAqL1xuICBnZXRMYXllclN0YXRlKG1hbmFnZWQpIHtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9ICovXG4gICAgY29uc3Qgc3RhdGUgPVxuICAgICAgdGhpcy5zdGF0ZV8gfHxcbiAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHtcbiAgICAgICAgbGF5ZXI6IHRoaXMsXG4gICAgICAgIG1hbmFnZWQ6IG1hbmFnZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBtYW5hZ2VkLFxuICAgICAgfSk7XG4gICAgY29uc3QgekluZGV4ID0gdGhpcy5nZXRaSW5kZXgoKTtcbiAgICBzdGF0ZS5vcGFjaXR5ID0gY2xhbXAoTWF0aC5yb3VuZCh0aGlzLmdldE9wYWNpdHkoKSAqIDEwMCkgLyAxMDAsIDAsIDEpO1xuICAgIHN0YXRlLnZpc2libGUgPSB0aGlzLmdldFZpc2libGUoKTtcbiAgICBzdGF0ZS5leHRlbnQgPSB0aGlzLmdldEV4dGVudCgpO1xuICAgIHN0YXRlLnpJbmRleCA9IHpJbmRleCA9PT0gdW5kZWZpbmVkICYmICFzdGF0ZS5tYW5hZ2VkID8gSW5maW5pdHkgOiB6SW5kZXg7XG4gICAgc3RhdGUubWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgIHN0YXRlLm1pblJlc29sdXRpb24gPSBNYXRoLm1heCh0aGlzLmdldE1pblJlc29sdXRpb24oKSwgMCk7XG4gICAgc3RhdGUubWluWm9vbSA9IHRoaXMuZ2V0TWluWm9vbSgpO1xuICAgIHN0YXRlLm1heFpvb20gPSB0aGlzLmdldE1heFpvb20oKTtcbiAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuXG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdD59IFthcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZVxuICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAqL1xuICBnZXRMYXllcnNBcnJheShhcnJheSkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyXG4gICAqICAgICBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IExpc3Qgb2YgbGF5ZXIgc3RhdGVzLlxuICAgKi9cbiAgZ2V0TGF5ZXJTdGF0ZXNBcnJheShzdGF0ZXMpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudCBleHRlbnR9IG9mIHRoZSBsYXllciBvciBgdW5kZWZpbmVkYCBpZiBpdFxuICAgKiB3aWxsIGJlIHZpc2libGUgcmVnYXJkbGVzcyBvZiBleHRlbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBUaGUgbGF5ZXIgZXh0ZW50LlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRFeHRlbnQoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9ICovIChcbiAgICAgIHRoaXMuZ2V0KExheWVyUHJvcGVydHkuRVhURU5UKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXhSZXNvbHV0aW9uKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1pblJlc29sdXRpb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TWluWm9vbSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1JTl9aT09NKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXhab29tKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFYX1pPT00pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyIChiZXR3ZWVuIDAgYW5kIDEpLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0T3BhY2l0eSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk9QQUNJVFkpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5TdGF0ZX0gU291cmNlIHN0YXRlLlxuICAgKi9cbiAgZ2V0U291cmNlU3RhdGUoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGlzIGxheWVyJ3MgYHZpc2libGVgIHByb3BlcnR5LiBUbyBmaW5kIG91dCB3aGV0aGVyIHRoZSBsYXllclxuICAgKiBpcyB2aXNpYmxlIG9uIGEgbWFwLCB1c2UgYGlzVmlzaWJsZSgpYCBpbnN0ZWFkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmFsdWUgb2YgdGhlIGB2aXNpYmxlYCBwcm9wZXJ0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFZpc2libGUoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuVklTSUJMRSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZVxuICAgKiByZW5kZXJpbmcuIFRoZSBkZWZhdWx0IFotaW5kZXggaXMgMC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFpJbmRleCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlpfSU5ERVgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBiYWNrZ3JvdW5kIGNvbG9yLlxuICAgKiBAcGFyYW0ge0JhY2tncm91bmRDb2xvcn0gW2JhY2tncm91bmRdIEJhY2tncm91bmQgY29sb3IuXG4gICAqL1xuICBzZXRCYWNrZ3JvdW5kKGJhY2tncm91bmQpIHtcbiAgICB0aGlzLmJhY2tncm91bmRfID0gYmFja2dyb3VuZDtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGV4dGVudCBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS4gIElmIGB1bmRlZmluZWRgLCB0aGUgbGF5ZXJcbiAgICogd2lsbCBiZSB2aXNpYmxlIGF0IGFsbCBleHRlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBleHRlbnQgVGhlIGV4dGVudCBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldEV4dGVudChleHRlbnQpIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5LkVYVEVOVCwgZXh0ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbikge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04sIG1heFJlc29sdXRpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0TWluUmVzb2x1dGlvbihtaW5SZXNvbHV0aW9uKSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTiwgbWluUmVzb2x1dGlvbik7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBtYXhpbXVtIHpvb20gKGV4Y2x1c2l2ZSkgYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhab29tIFRoZSBtYXhpbXVtIHpvb20gb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRNYXhab29tKG1heFpvb20pIHtcbiAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BWF9aT09NLCBtYXhab29tKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1pbmltdW0gem9vbSAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICogTm90ZSB0aGF0IHRoZSB6b29tIGxldmVscyBmb3IgbGF5ZXIgdmlzaWJpbGl0eSBhcmUgYmFzZWQgb24gdGhlXG4gICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblpvb20gVGhlIG1pbmltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1pblpvb20obWluWm9vbSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUlOX1pPT00sIG1pblpvb20pO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIsIGFsbG93ZWQgdmFsdWVzIHJhbmdlIGZyb20gMCB0byAxLlxuICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE9wYWNpdHkob3BhY2l0eSkge1xuICAgIGFzc2VydCh0eXBlb2Ygb3BhY2l0eSA9PT0gJ251bWJlcicsIDY0KTsgLy8gTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyXG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZLCBvcGFjaXR5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyIChgdHJ1ZWAgb3IgYGZhbHNlYCkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFZpc2libGUodmlzaWJsZSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuVklTSUJMRSwgdmlzaWJsZSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IFotaW5kZXggb2YgdGhlIGxheWVyLCB3aGljaCBpcyB1c2VkIHRvIG9yZGVyIGxheWVycyBiZWZvcmUgcmVuZGVyaW5nLlxuICAgKiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6aW5kZXggVGhlIHotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRaSW5kZXgoemluZGV4KSB7XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5aX0lOREVYLCB6aW5kZXgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIGlmICh0aGlzLnN0YXRlXykge1xuICAgICAgdGhpcy5zdGF0ZV8ubGF5ZXIgPSBudWxsO1xuICAgICAgdGhpcy5zdGF0ZV8gPSBudWxsO1xuICAgIH1cbiAgICBzdXBlci5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlTGF5ZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIGJlZm9yZSBhIGxheWVyIGlzIHJlbmRlcmVkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwcmVyZW5kZXJcbiAgICogQGFwaVxuICAgKi9cbiAgUFJFUkVOREVSOiAncHJlcmVuZGVyJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3RyZW5kZXJcbiAgICogQGFwaVxuICAgKi9cbiAgUE9TVFJFTkRFUjogJ3Bvc3RyZW5kZXInLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYmVmb3JlIGxheWVycyBhcmUgY29tcG9zZWQuICBXaGVuIGRpc3BhdGNoZWQgYnkgdGhlIG1hcCwgdGhlIGV2ZW50IG9iamVjdCB3aWxsIG5vdCBoYXZlXG4gICAqIGEgYGNvbnRleHRgIHNldC4gIFdoZW4gZGlzcGF0Y2hlZCBieSBhIGxheWVyLCB0aGUgZXZlbnQgb2JqZWN0IHdpbGwgaGF2ZSBhIGBjb250ZXh0YCBzZXQuICBPbmx5XG4gICAqIFdlYkdMIGxheWVycyBjdXJyZW50bHkgZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlY29tcG9zZVxuICAgKiBAYXBpXG4gICAqL1xuICBQUkVDT01QT1NFOiAncHJlY29tcG9zZScsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBhZnRlciBsYXllcnMgYXJlIGNvbXBvc2VkLiAgV2hlbiBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAsIHRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZVxuICAgKiBhIGBjb250ZXh0YCBzZXQuICBXaGVuIGRpc3BhdGNoZWQgYnkgYSBsYXllciwgdGhlIGV2ZW50IG9iamVjdCB3aWxsIGhhdmUgYSBgY29udGV4dGAgc2V0LiAgT25seVxuICAgKiBXZWJHTCBsYXllcnMgY3VycmVudGx5IGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3Rjb21wb3NlXG4gICAqIEBhcGlcbiAgICovXG4gIFBPU1RDT01QT1NFOiAncG9zdGNvbXBvc2UnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiByZW5kZXJpbmcgaXMgY29tcGxldGUsIGkuZS4gYWxsIHNvdXJjZXMgYW5kIHRpbGVzIGhhdmVcbiAgICogZmluaXNoZWQgbG9hZGluZyBmb3IgdGhlIGN1cnJlbnQgdmlld3BvcnQsIGFuZCBhbGwgdGlsZXMgYXJlIGZhZGVkIGluLlxuICAgKiBUaGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmUgYSBgY29udGV4dGAgc2V0LlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNyZW5kZXJjb21wbGV0ZVxuICAgKiBAYXBpXG4gICAqL1xuICBSRU5ERVJDT01QTEVURTogJ3JlbmRlcmNvbXBsZXRlJyxcbn07XG5cbi8qKlxuICogQHR5cGVkZWYgeydwb3N0cmVuZGVyJ3wncHJlY29tcG9zZSd8J3Bvc3Rjb21wb3NlJ3wncmVuZGVyY29tcGxldGUnfSBNYXBSZW5kZXJFdmVudFR5cGVzXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7J3Bvc3RyZW5kZXInfCdwcmVyZW5kZXInfSBMYXllclJlbmRlckV2ZW50VHlwZXNcbiAqL1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdQcm9wZXJ0eVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBDRU5URVI6ICdjZW50ZXInLFxuICBSRVNPTFVUSU9OOiAncmVzb2x1dGlvbicsXG4gIFJPVEFUSU9OOiAncm90YXRpb24nLFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9jb21tb25cbiAqL1xuXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSB6b29tIGZvciBkZWZhdWx0IHRpbGUgZ3JpZHMuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgREVGQVVMVF9NQVhfWk9PTSA9IDQyO1xuXG4vKipcbiAqIERlZmF1bHQgdGlsZSBzaXplLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfVElMRV9TSVpFID0gMjU2O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovVW5pdHNcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsncmFkaWFucycgfCAnZGVncmVlcycgfCAnZnQnIHwgJ20nIHwgJ3BpeGVscycgfCAndGlsZS1waXhlbHMnIHwgJ3VzLWZ0J30gVW5pdHNcbiAqIFByb2plY3Rpb24gdW5pdHMuXG4gKi9cblxuLyoqXG4gKiBTZWUgaHR0cDovL2R1ZmYuZXNzLndhc2hpbmd0b24uZWR1L2RhdGEvcmFzdGVyL2RyZy9kb2NzL2dlb3RpZmYudHh0XG4gKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgVW5pdHM+fVxuICovXG5jb25zdCB1bml0QnlDb2RlID0ge1xuICAnOTAwMSc6ICdtJyxcbiAgJzkwMDInOiAnZnQnLFxuICAnOTAwMyc6ICd1cy1mdCcsXG4gICc5MTAxJzogJ3JhZGlhbnMnLFxuICAnOTEwMic6ICdkZWdyZWVzJyxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGNvZGUgVW5pdCBjb2RlLlxuICogQHJldHVybiB7VW5pdHN9IFVuaXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUNvZGUoY29kZSkge1xuICByZXR1cm4gdW5pdEJ5Q29kZVtjb2RlXTtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNZXRlcnNQZXJVbml0TG9va3VwXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmFkaWFucyBSYWRpYW5zXG4gKiBAcHJvcGVydHkge251bWJlcn0gZGVncmVlcyBEZWdyZWVzXG4gKiBAcHJvcGVydHkge251bWJlcn0gZnQgIEZlZXRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtIE1ldGVyc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IHVzLWZ0IFVTIGZlZXRcbiAqL1xuXG4vKipcbiAqIE1ldGVycyBwZXIgdW5pdCBsb29rdXAgdGFibGUuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtNZXRlcnNQZXJVbml0TG9va3VwfVxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgTUVURVJTX1BFUl9VTklUID0ge1xuICAvLyB1c2UgdGhlIHJhZGl1cyBvZiB0aGUgTm9ybWFsIHNwaGVyZVxuICAncmFkaWFucyc6IDYzNzA5OTcgLyAoMiAqIE1hdGguUEkpLFxuICAnZGVncmVlcyc6ICgyICogTWF0aC5QSSAqIDYzNzA5OTcpIC8gMzYwLFxuICAnZnQnOiAwLjMwNDgsXG4gICdtJzogMSxcbiAgJ3VzLWZ0JzogMTIwMCAvIDM5MzcsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovUHJvamVjdGlvblxuICovXG5pbXBvcnQge01FVEVSU19QRVJfVU5JVH0gZnJvbSAnLi9Vbml0cy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvZGUgVGhlIFNSUyBpZGVudGlmaWVyIGNvZGUsIGUuZy4gYEVQU0c6NDMyNmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVW5pdHMuanNcIikuVW5pdHN9IFt1bml0c10gVW5pdHMuIFJlcXVpcmVkIHVubGVzcyBhXG4gKiBwcm9qNCBwcm9qZWN0aW9uIGlzIGRlZmluZWQgZm9yIGBjb2RlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhlIFNSUy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYXhpc09yaWVudGF0aW9uPSdlbnUnXSBUaGUgYXhpcyBvcmllbnRhdGlvbiBhcyBzcGVjaWZpZWQgaW4gUHJvajQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtnbG9iYWw9ZmFsc2VdIFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgdmFsaWQgZm9yIHRoZSB3aG9sZSBnbG9iZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWV0ZXJzUGVyVW5pdF0gVGhlIG1ldGVycyBwZXIgdW5pdCBmb3IgdGhlIFNSUy5cbiAqIElmIG5vdCBwcm92aWRlZCwgdGhlIGB1bml0c2AgYXJlIHVzZWQgdG8gZ2V0IHRoZSBtZXRlcnMgcGVyIHVuaXQgZnJvbSB0aGUge0BsaW5rIE1FVEVSU19QRVJfVU5JVH1cbiAqIGxvb2t1cCB0YWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW3dvcmxkRXh0ZW50XSBUaGUgd29ybGQgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfSBbZ2V0UG9pbnRSZXNvbHV0aW9uXVxuICogRnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHJlc29sdXRpb24gYXQgYSBwb2ludC4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAqIGBudW1iZXJgIHZpZXcgcmVzb2x1dGlvbiBhbmQgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnRzLCBhbmQgcmV0dXJuc1xuICogdGhlIGBudW1iZXJgIHJlc29sdXRpb24gaW4gcHJvamVjdGlvbiB1bml0cyBhdCB0aGUgcGFzc2VkIGNvb3JkaW5hdGUuIElmIHRoaXMgaXMgYHVuZGVmaW5lZGAsXG4gKiB0aGUgZGVmYXVsdCB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouZ2V0UG9pbnRSZXNvbHV0aW9ufSBmdW5jdGlvbiB3aWxsIGJlIHVzZWQuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIGRlZmluaXRpb24gY2xhc3MuIE9uZSBvZiB0aGVzZSBpcyBjcmVhdGVkIGZvciBlYWNoIHByb2plY3Rpb25cbiAqIHN1cHBvcnRlZCBpbiB0aGUgYXBwbGljYXRpb24gYW5kIHN0b3JlZCBpbiB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qfSBuYW1lc3BhY2UuXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSBpbiBhcHBsaWNhdGlvbnMsIGJ1dCB0aGlzIGlzIG5vdCByZXF1aXJlZCwgYXMgQVBJIHBhcmFtc1xuICogYW5kIG9wdGlvbnMgdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5Qcm9qZWN0aW9uTGlrZX0gd2hpY2ggbWVhbnMgdGhlIHNpbXBsZSBzdHJpbmdcbiAqIGNvZGUgd2lsbCBzdWZmaWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXR9IHRvIHJldHJpZXZlIHRoZSBvYmplY3QgZm9yIGEgcGFydGljdWxhclxuICogcHJvamVjdGlvbi5cbiAqXG4gKiBUaGUgbGlicmFyeSBpbmNsdWRlcyBkZWZpbml0aW9ucyBmb3IgYEVQU0c6NDMyNmAgYW5kIGBFUFNHOjM4NTdgLCB0b2dldGhlclxuICogd2l0aCB0aGUgZm9sbG93aW5nIGFsaWFzZXM6XG4gKiAqIGBFUFNHOjQzMjZgOiBDUlM6ODQsIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2LFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0LCB1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYsXG4gKiAgICAgdXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XG4gKiAqIGBFUFNHOjM4NTdgOiBFUFNHOjEwMjEwMCwgRVBTRzoxMDIxMTMsIEVQU0c6OTAwOTEzLFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3LFxuICogICAgIGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3XG4gKlxuICogSWYgeW91IHVzZSBbcHJvajRqc10oaHR0cHM6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcyksIGFsaWFzZXMgY2FuXG4gKiBiZSBhZGRlZCB1c2luZyBgcHJvajQuZGVmcygpYC4gQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlXG4gKiBhZGRlZCwgY2FsbCB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL3Byb2o0LnJlZ2lzdGVyfSBmdW5jdGlvbi5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFByb2plY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFByb2plY3Rpb24gb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5jb2RlXyA9IG9wdGlvbnMuY29kZTtcblxuICAgIC8qKlxuICAgICAqIFVuaXRzIG9mIHByb2plY3RlZCBjb29yZGluYXRlcy4gV2hlbiBzZXQgdG8gYFRJTEVfUElYRUxTYCwgYVxuICAgICAqIGB0aGlzLmV4dGVudF9gIGFuZCBgdGhpcy53b3JsZEV4dGVudF9gIG11c3QgYmUgY29uZmlndXJlZCBwcm9wZXJseSBmb3IgZWFjaFxuICAgICAqIHRpbGUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5Vbml0c31cbiAgICAgKi9cbiAgICB0aGlzLnVuaXRzXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5Vbml0c30gKi8gKG9wdGlvbnMudW5pdHMpO1xuXG4gICAgLyoqXG4gICAgICogVmFsaWRpdHkgZXh0ZW50IG9mIHRoZSBwcm9qZWN0aW9uIGluIHByb2plY3RlZCBjb29yZGluYXRlcy4gRm9yIHByb2plY3Rpb25zXG4gICAgICogd2l0aCBgVElMRV9QSVhFTFNgIHVuaXRzLCB0aGlzIGlzIHRoZSBleHRlbnQgb2YgdGhlIHRpbGUgaW5cbiAgICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy5leHRlbnRfID0gb3B0aW9ucy5leHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZXh0ZW50IDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEV4dGVudCBvZiB0aGUgd29ybGQgaW4gRVBTRzo0MzI2LiBGb3IgcHJvamVjdGlvbnMgd2l0aFxuICAgICAqIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgICAqIHByb2plY3RlZCBjb29yZGluYXRlIHNwYWNlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICovXG4gICAgdGhpcy53b3JsZEV4dGVudF8gPVxuICAgICAgb3B0aW9ucy53b3JsZEV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53b3JsZEV4dGVudCA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5heGlzT3JpZW50YXRpb25fID1cbiAgICAgIG9wdGlvbnMuYXhpc09yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiA6ICdlbnUnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmdsb2JhbF8gPSBvcHRpb25zLmdsb2JhbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5nbG9iYWwgOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgdGhpcy5leHRlbnRfKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18gPSBvcHRpb25zLmdldFBvaW50UmVzb2x1dGlvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5tZXRlcnNQZXJVbml0XyA9IG9wdGlvbnMubWV0ZXJzUGVyVW5pdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcHJvamVjdGlvbiBpcyBzdWl0YWJsZSBmb3Igd3JhcHBpbmcgdGhlIHgtYXhpc1xuICAgKi9cbiAgY2FuV3JhcFgoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FuV3JhcFhfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY29kZSBmb3IgdGhpcyBwcm9qZWN0aW9uLCBlLmcuICdFUFNHOjQzMjYnLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IENvZGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuY29kZV87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRFeHRlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHVuaXRzIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5Vbml0c30gVW5pdHMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFVuaXRzKCkge1xuICAgIHJldHVybiB0aGlzLnVuaXRzXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFtb3VudCBvZiBtZXRlcnMgcGVyIHVuaXQgb2YgdGhpcyBwcm9qZWN0aW9uLiAgSWYgdGhlIHByb2plY3Rpb24gaXNcbiAgICogbm90IGNvbmZpZ3VyZWQgd2l0aCBgbWV0ZXJzUGVyVW5pdGAgb3IgYSB1bml0cyBpZGVudGlmaWVyLCB0aGUgcmV0dXJuIGlzXG4gICAqIGB1bmRlZmluZWRgLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBNZXRlcnMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1ldGVyc1BlclVuaXQoKSB7XG4gICAgcmV0dXJuIHRoaXMubWV0ZXJzUGVyVW5pdF8gfHwgTUVURVJTX1BFUl9VTklUW3RoaXMudW5pdHNfXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFdvcmxkRXh0ZW50KCkge1xuICAgIHJldHVybiB0aGlzLndvcmxkRXh0ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGF4aXMgb3JpZW50YXRpb24gb2YgdGhpcyBwcm9qZWN0aW9uLlxuICAgKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gICAqIGVudSAtIHRoZSBkZWZhdWx0IGVhc3RpbmcsIG5vcnRoaW5nLCBlbGV2YXRpb24uXG4gICAqIG5ldSAtIG5vcnRoaW5nLCBlYXN0aW5nLCB1cCAtIHVzZWZ1bCBmb3IgXCJsYXQvbG9uZ1wiIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMsXG4gICAqICAgICBvciBzb3V0aCBvcmllbnRhdGVkIHRyYW5zdmVyc2UgbWVyY2F0b3IuXG4gICAqIHdudSAtIHdlc3RpbmcsIG5vcnRoaW5nLCB1cCAtIHNvbWUgcGxhbmV0YXJ5IGNvb3JkaW5hdGUgc3lzdGVtcyBoYXZlXG4gICAqICAgICBcIndlc3QgcG9zaXRpdmVcIiBjb29yZGluYXRlIHN5c3RlbXNcbiAgICogQHJldHVybiB7c3RyaW5nfSBBeGlzIG9yaWVudGF0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBeGlzT3JpZW50YXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuYXhpc09yaWVudGF0aW9uXztcbiAgfVxuXG4gIC8qKlxuICAgKiBJcyB0aGlzIHByb2plY3Rpb24gYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGQ/XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgZ2xvYmFsLlxuICAgKiBAYXBpXG4gICAqL1xuICBpc0dsb2JhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5nbG9iYWxfO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBpZiB0aGUgcHJvamVjdGlvbiBpcyBhIGdsb2JhbCBwcm9qZWN0aW9uIHdoaWNoIHNwYW5zIHRoZSB3aG9sZSB3b3JsZFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGdsb2JhbCBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIGdsb2JhbC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0R2xvYmFsKGdsb2JhbCkge1xuICAgIHRoaXMuZ2xvYmFsXyA9IGdsb2JhbDtcbiAgICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRoZSBkZWZhdWx0IHRpbGUgZ3JpZC5cbiAgICovXG4gIGdldERlZmF1bHRUaWxlR3JpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5kZWZhdWx0VGlsZUdyaWRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgKi9cbiAgc2V0RGVmYXVsdFRpbGVHcmlkKHRpbGVHcmlkKSB7XG4gICAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gdGlsZUdyaWQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRFeHRlbnQoZXh0ZW50KSB7XG4gICAgdGhpcy5leHRlbnRfID0gZXh0ZW50O1xuICAgIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIGV4dGVudCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB3b3JsZCBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB3b3JsZEV4dGVudCBXb3JsZCBleHRlbnRcbiAgICogICAgIFttaW5sb24sIG1pbmxhdCwgbWF4bG9uLCBtYXhsYXRdLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRXb3JsZEV4dGVudCh3b3JsZEV4dGVudCkge1xuICAgIHRoaXMud29ybGRFeHRlbnRfID0gd29ybGRFeHRlbnQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBnZXRQb2ludFJlc29sdXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouZ2V0UG9pbnRSZXNvbHV0aW9ufVxuICAgKiBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IGZ1bmMgRnVuY3Rpb25cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0R2V0UG9pbnRSZXNvbHV0aW9uKGZ1bmMpIHtcbiAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gZnVuYztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1c3RvbSBwb2ludCByZXNvbHV0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIHByb2plY3Rpb24gKGlmIHNldCkuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfSBUaGUgY3VzdG9tIHBvaW50XG4gICAqIHJlc29sdXRpb24gZnVuY3Rpb24gKGlmIHNldCkuXG4gICAqL1xuICBnZXRQb2ludFJlc29sdXRpb25GdW5jKCkge1xuICAgIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2plY3Rpb247XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnMzg1N1xuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL1Byb2plY3Rpb24uanMnO1xuXG4vKipcbiAqIFJhZGl1cyBvZiBXR1M4NCBzcGhlcmVcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBSQURJVVMgPSA2Mzc4MTM3O1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IEhBTEZfU0laRSA9IE1hdGguUEkgKiBSQURJVVM7XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IGNvbnN0IEVYVEVOVCA9IFstSEFMRl9TSVpFLCAtSEFMRl9TSVpFLCBIQUxGX1NJWkUsIEhBTEZfU0laRV07XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IGNvbnN0IFdPUkxEX0VYVEVOVCA9IFstMTgwLCAtODUsIDE4MCwgODVdO1xuXG4vKipcbiAqIE1heGltdW0gc2FmZSB2YWx1ZSBpbiB5IGRpcmVjdGlvblxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgTUFYX1NBRkVfWSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyAyKSk7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBvYmplY3QgZm9yIHdlYi9zcGhlcmljYWwgTWVyY2F0b3IgKEVQU0c6Mzg1NykuXG4gKi9cbmNsYXNzIEVQU0czODU3UHJvamVjdGlvbiBleHRlbmRzIFByb2plY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvZGUpIHtcbiAgICBzdXBlcih7XG4gICAgICBjb2RlOiBjb2RlLFxuICAgICAgdW5pdHM6ICdtJyxcbiAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgZ2xvYmFsOiB0cnVlLFxuICAgICAgd29ybGRFeHRlbnQ6IFdPUkxEX0VYVEVOVCxcbiAgICAgIGdldFBvaW50UmVzb2x1dGlvbjogZnVuY3Rpb24gKHJlc29sdXRpb24sIHBvaW50KSB7XG4gICAgICAgIHJldHVybiByZXNvbHV0aW9uIC8gTWF0aC5jb3NoKHBvaW50WzFdIC8gUkFESVVTKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBQcm9qZWN0aW9ucyBlcXVhbCB0byBFUFNHOjM4NTcuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICovXG5leHBvcnQgY29uc3QgUFJPSkVDVElPTlMgPSBbXG4gIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6Mzg1NycpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjEwMCcpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjExMycpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjkwMDkxMycpLFxuICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdodHRwOi8vd3d3Lm9wZW5naXMubmV0L2RlZi9jcnMvRVBTRy8wLzM4NTcnKSxcbiAgbmV3IEVQU0czODU3UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTcnKSxcbl07XG5cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gZnJvbSBFUFNHOjQzMjYgdG8gRVBTRzozODU3LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZGltZW5zaW9uXSBEaW1lbnNpb24gKGRlZmF1bHQgaXMgYDJgKS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FUFNHNDMyNihpbnB1dCwgb3V0cHV0LCBkaW1lbnNpb24pIHtcbiAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICBkaW1lbnNpb24gPSBkaW1lbnNpb24gPiAxID8gZGltZW5zaW9uIDogMjtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgIG91dHB1dFtpXSA9IChIQUxGX1NJWkUgKiBpbnB1dFtpXSkgLyAxODA7XG4gICAgbGV0IHkgPSBSQURJVVMgKiBNYXRoLmxvZyhNYXRoLnRhbigoTWF0aC5QSSAqICgraW5wdXRbaSArIDFdICsgOTApKSAvIDM2MCkpO1xuICAgIGlmICh5ID4gTUFYX1NBRkVfWSkge1xuICAgICAgeSA9IE1BWF9TQUZFX1k7XG4gICAgfSBlbHNlIGlmICh5IDwgLU1BWF9TQUZFX1kpIHtcbiAgICAgIHkgPSAtTUFYX1NBRkVfWTtcbiAgICB9XG4gICAgb3V0cHV0W2kgKyAxXSA9IHk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6Mzg1NyB0byBFUFNHOjQzMjYuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtkaW1lbnNpb25dIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9FUFNHNDMyNihpbnB1dCwgb3V0cHV0LCBkaW1lbnNpb24pIHtcbiAgY29uc3QgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICBkaW1lbnNpb24gPSBkaW1lbnNpb24gPiAxID8gZGltZW5zaW9uIDogMjtcbiAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgIG91dHB1dFtpXSA9ICgxODAgKiBpbnB1dFtpXSkgLyBIQUxGX1NJWkU7XG4gICAgb3V0cHV0W2kgKyAxXSA9XG4gICAgICAoMzYwICogTWF0aC5hdGFuKE1hdGguZXhwKGlucHV0W2kgKyAxXSAvIFJBRElVUykpKSAvIE1hdGguUEkgLSA5MDtcbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovZXBzZzQzMjZcbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9Qcm9qZWN0aW9uLmpzJztcblxuLyoqXG4gKiBTZW1pLW1ham9yIHJhZGl1cyBvZiB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IFJBRElVUyA9IDYzNzgxMzc7XG5cbi8qKlxuICogRXh0ZW50IG9mIHRoZSBFUFNHOjQzMjYgcHJvamVjdGlvbiB3aGljaCBpcyB0aGUgd2hvbGUgd29ybGQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IGNvbnN0IEVYVEVOVCA9IFstMTgwLCAtOTAsIDE4MCwgOTBdO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IE1FVEVSU19QRVJfVU5JVCA9IChNYXRoLlBJICogUkFESVVTKSAvIDE4MDtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIG9iamVjdCBmb3IgV0dTODQgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyAoRVBTRzo0MzI2KS5cbiAqXG4gKiBOb3RlIHRoYXQgT3BlbkxheWVycyBkb2VzIG5vdCBzdHJpY3RseSBjb21wbHkgd2l0aCB0aGUgRVBTRyBkZWZpbml0aW9uLlxuICogVGhlIEVQU0cgcmVnaXN0cnkgZGVmaW5lcyA0MzI2IGFzIGEgQ1JTIGZvciBMYXRpdHVkZSxMb25naXR1ZGUgKHkseCkuXG4gKiBPcGVuTGF5ZXJzIHRyZWF0cyBFUFNHOjQzMjYgYXMgYSBwc2V1ZG8tcHJvamVjdGlvbiwgd2l0aCB4LHkgY29vcmRpbmF0ZXMuXG4gKi9cbmNsYXNzIEVQU0c0MzI2UHJvamVjdGlvbiBleHRlbmRzIFByb2plY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtheGlzT3JpZW50YXRpb25dIEF4aXMgb3JpZW50YXRpb24uXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb2RlLCBheGlzT3JpZW50YXRpb24pIHtcbiAgICBzdXBlcih7XG4gICAgICBjb2RlOiBjb2RlLFxuICAgICAgdW5pdHM6ICdkZWdyZWVzJyxcbiAgICAgIGV4dGVudDogRVhURU5ULFxuICAgICAgYXhpc09yaWVudGF0aW9uOiBheGlzT3JpZW50YXRpb24sXG4gICAgICBnbG9iYWw6IHRydWUsXG4gICAgICBtZXRlcnNQZXJVbml0OiBNRVRFUlNfUEVSX1VOSVQsXG4gICAgICB3b3JsZEV4dGVudDogRVhURU5ULFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzo0MzI2LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBST0pFQ1RJT05TID0gW1xuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdDUlM6ODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignRVBTRzo0MzI2JywgJ25ldScpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCcpLFxuICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9kZWYvY3JzL09HQy8xLjMvQ1JTODQnKSxcbiAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYnLCAnbmV1JyksXG4gIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZGVmL2Nycy9FUFNHLzAvNDMyNicsICduZXUnKSxcbl07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9wcm9qZWN0aW9uc1xuICovXG5cbi8qKlxuICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xubGV0IGNhY2hlID0ge307XG5cbi8qKlxuICogQ2xlYXIgdGhlIHByb2plY3Rpb25zIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gIGNhY2hlID0ge307XG59XG5cbi8qKlxuICogR2V0IGEgY2FjaGVkIHByb2plY3Rpb24gYnkgY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBjb2RlIGZvciB0aGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiAoaWYgY2FjaGVkKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChjb2RlKSB7XG4gIHJldHVybiAoXG4gICAgY2FjaGVbY29kZV0gfHxcbiAgICBjYWNoZVtjb2RlLnJlcGxhY2UoL3VybjooeC0pP29nYzpkZWY6Y3JzOkVQU0c6KC4qOik/KFxcdyspJC8sICdFUFNHOiQzJyldIHx8XG4gICAgbnVsbFxuICApO1xufVxuXG4vKipcbiAqIEFkZCBhIHByb2plY3Rpb24gdG8gdGhlIGNhY2hlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIHByb2plY3Rpb24gY29kZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdG8gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoY29kZSwgcHJvamVjdGlvbikge1xuICBjYWNoZVtjb2RlXSA9IHByb2plY3Rpb247XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai90cmFuc2Zvcm1zXG4gKi9cbmltcG9ydCB7aXNFbXB0eX0gZnJvbSAnLi4vb2JqLmpzJztcblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPj59XG4gKi9cbmxldCB0cmFuc2Zvcm1zID0ge307XG5cbi8qKlxuICogQ2xlYXIgdGhlIHRyYW5zZm9ybSBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICB0cmFuc2Zvcm1zID0ge307XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChzb3VyY2UsIGRlc3RpbmF0aW9uLCB0cmFuc2Zvcm1Gbikge1xuICBjb25zdCBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgY29uc3QgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb24uZ2V0Q29kZSgpO1xuICBpZiAoIShzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMpKSB7XG4gICAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSA9IHt9O1xuICB9XG4gIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXSA9IHRyYW5zZm9ybUZuO1xufVxuXG4vKipcbiAqIFVucmVnaXN0ZXJzIHRoZSBjb252ZXJzaW9uIGZ1bmN0aW9uIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjbGVhbiB1cFxuICogY2FjaGVkIHRyYW5zZm9ybXMgZHVyaW5nIHRlc3RpbmcuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRoZSB1bnJlZ2lzdGVyZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgY29uc3Qgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gIGNvbnN0IGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgY29uc3QgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICBpZiAoaXNFbXB0eSh0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdKSkge1xuICAgIGRlbGV0ZSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cbi8qKlxuICogR2V0IGEgdHJhbnNmb3JtIGdpdmVuIGEgc291cmNlIGNvZGUgYW5kIGEgZGVzdGluYXRpb24gY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VDb2RlIFRoZSBjb2RlIGZvciB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25Db2RlIFRoZSBjb2RlIGZvciB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChpZiBmb3VuZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKSB7XG4gIGxldCB0cmFuc2Zvcm07XG4gIGlmIChzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMgJiYgZGVzdGluYXRpb25Db2RlIGluIHRyYW5zZm9ybXNbc291cmNlQ29kZV0pIHtcbiAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnQvUmVsYXRpb25zaGlwXG4gKi9cblxuLyoqXG4gKiBSZWxhdGlvbnNoaXAgdG8gYW4gZXh0ZW50LlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICBVTktOT1dOOiAwLFxuICBJTlRFUlNFQ1RJTkc6IDEsXG4gIEFCT1ZFOiAyLFxuICBSSUdIVDogNCxcbiAgQkVMT1c6IDgsXG4gIExFRlQ6IDE2LFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9leHRlbnRcbiAqL1xuaW1wb3J0IFJlbGF0aW9uc2hpcCBmcm9tICcuL2V4dGVudC9SZWxhdGlvbnNoaXAuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5cbi8qKlxuICogQW4gYXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgYW4gZXh0ZW50OiBgW21pbngsIG1pbnksIG1heHgsIG1heHldYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBFeHRlbnRcbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEV4dGVudCBjb3JuZXIuXG4gKiBAdHlwZWRlZiB7J2JvdHRvbS1sZWZ0JyB8ICdib3R0b20tcmlnaHQnIHwgJ3RvcC1sZWZ0JyB8ICd0b3AtcmlnaHQnfSBDb3JuZXJcbiAqL1xuXG4vKipcbiAqIEJ1aWxkIGFuIGV4dGVudCB0aGF0IGluY2x1ZGVzIGFsbCBnaXZlbiBjb29yZGluYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEJvdW5kaW5nIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJvdW5kaW5nRXh0ZW50KGNvb3JkaW5hdGVzKSB7XG4gIGNvbnN0IGV4dGVudCA9IGNyZWF0ZUVtcHR5KCk7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZXNbaV0pO1xuICB9XG4gIHJldHVybiBleHRlbnQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB4cyBYcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geXMgWXMuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZnVuY3Rpb24gX2JvdW5kaW5nRXh0ZW50WFlzKHhzLCB5cywgZGVzdCkge1xuICBjb25zdCBtaW5YID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeHMpO1xuICBjb25zdCBtaW5ZID0gTWF0aC5taW4uYXBwbHkobnVsbCwgeXMpO1xuICBjb25zdCBtYXhYID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeHMpO1xuICBjb25zdCBtYXhZID0gTWF0aC5tYXguYXBwbHkobnVsbCwgeXMpO1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgZGVzdCk7XG59XG5cbi8qKlxuICogUmV0dXJuIGV4dGVudCBpbmNyZWFzZWQgYnkgdGhlIHByb3ZpZGVkIHZhbHVlLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVGhlIGFtb3VudCBieSB3aGljaCB0aGUgZXh0ZW50IHNob3VsZCBiZSBidWZmZXJlZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXIoZXh0ZW50LCB2YWx1ZSwgZGVzdCkge1xuICBpZiAoZGVzdCkge1xuICAgIGRlc3RbMF0gPSBleHRlbnRbMF0gLSB2YWx1ZTtcbiAgICBkZXN0WzFdID0gZXh0ZW50WzFdIC0gdmFsdWU7XG4gICAgZGVzdFsyXSA9IGV4dGVudFsyXSArIHZhbHVlO1xuICAgIGRlc3RbM10gPSBleHRlbnRbM10gKyB2YWx1ZTtcbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuICByZXR1cm4gW1xuICAgIGV4dGVudFswXSAtIHZhbHVlLFxuICAgIGV4dGVudFsxXSAtIHZhbHVlLFxuICAgIGV4dGVudFsyXSArIHZhbHVlLFxuICAgIGV4dGVudFszXSArIHZhbHVlLFxuICBdO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjbG9uZSBvZiBhbiBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQgdG8gY2xvbmUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gVGhlIGNsb25lLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmUoZXh0ZW50LCBkZXN0KSB7XG4gIGlmIChkZXN0KSB7XG4gICAgZGVzdFswXSA9IGV4dGVudFswXTtcbiAgICBkZXN0WzFdID0gZXh0ZW50WzFdO1xuICAgIGRlc3RbMl0gPSBleHRlbnRbMl07XG4gICAgZGVzdFszXSA9IGV4dGVudFszXTtcbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuICByZXR1cm4gZXh0ZW50LnNsaWNlKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge251bWJlcn0gQ2xvc2VzdCBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKGV4dGVudCwgeCwgeSkge1xuICBsZXQgZHgsIGR5O1xuICBpZiAoeCA8IGV4dGVudFswXSkge1xuICAgIGR4ID0gZXh0ZW50WzBdIC0geDtcbiAgfSBlbHNlIGlmIChleHRlbnRbMl0gPCB4KSB7XG4gICAgZHggPSB4IC0gZXh0ZW50WzJdO1xuICB9IGVsc2Uge1xuICAgIGR4ID0gMDtcbiAgfVxuICBpZiAoeSA8IGV4dGVudFsxXSkge1xuICAgIGR5ID0gZXh0ZW50WzFdIC0geTtcbiAgfSBlbHNlIGlmIChleHRlbnRbM10gPCB5KSB7XG4gICAgZHkgPSB5IC0gZXh0ZW50WzNdO1xuICB9IGVsc2Uge1xuICAgIGR5ID0gMDtcbiAgfVxuICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIGluIHRoZSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0Nvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gIHJldHVybiBjb250YWluc1hZKGV4dGVudCwgY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgb25lIGV4dGVudCBjb250YWlucyBhbm90aGVyLlxuICpcbiAqIEFuIGV4dGVudCBpcyBkZWVtZWQgY29udGFpbmVkIGlmIGl0IGxpZXMgY29tcGxldGVseSB3aXRoaW4gdGhlIG90aGVyIGV4dGVudCxcbiAqIGluY2x1ZGluZyBpZiB0aGV5IHNoYXJlIG9uZSBvciBtb3JlIGVkZ2VzLlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2Vjb25kIGV4dGVudCBpcyBjb250YWluZWQgYnkgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlXG4gKiAgICAgZmlyc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0V4dGVudChleHRlbnQxLCBleHRlbnQyKSB7XG4gIHJldHVybiAoXG4gICAgZXh0ZW50MVswXSA8PSBleHRlbnQyWzBdICYmXG4gICAgZXh0ZW50MlsyXSA8PSBleHRlbnQxWzJdICYmXG4gICAgZXh0ZW50MVsxXSA8PSBleHRlbnQyWzFdICYmXG4gICAgZXh0ZW50MlszXSA8PSBleHRlbnQxWzNdXG4gICk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWSBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHgsIHkgdmFsdWVzIGFyZSBjb250YWluZWQgaW4gdGhlIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnRhaW5zWFkoZXh0ZW50LCB4LCB5KSB7XG4gIHJldHVybiBleHRlbnRbMF0gPD0geCAmJiB4IDw9IGV4dGVudFsyXSAmJiBleHRlbnRbMV0gPD0geSAmJiB5IDw9IGV4dGVudFszXTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGEgY29vcmRpbmF0ZSBhbmQgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qc1wiKS5kZWZhdWx0fSBUaGUgcmVsYXRpb25zaGlwIChiaXR3aXNlIGNvbXBhcmUgd2l0aFxuICogICAgIGltcG9ydChcIi4vZXh0ZW50L1JlbGF0aW9uc2hpcC5qc1wiKS5SZWxhdGlvbnNoaXApLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZVJlbGF0aW9uc2hpcChleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgY29uc3QgbWluWCA9IGV4dGVudFswXTtcbiAgY29uc3QgbWluWSA9IGV4dGVudFsxXTtcbiAgY29uc3QgbWF4WCA9IGV4dGVudFsyXTtcbiAgY29uc3QgbWF4WSA9IGV4dGVudFszXTtcbiAgY29uc3QgeCA9IGNvb3JkaW5hdGVbMF07XG4gIGNvbnN0IHkgPSBjb29yZGluYXRlWzFdO1xuICBsZXQgcmVsYXRpb25zaGlwID0gUmVsYXRpb25zaGlwLlVOS05PV047XG4gIGlmICh4IDwgbWluWCkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5MRUZUO1xuICB9IGVsc2UgaWYgKHggPiBtYXhYKSB7XG4gICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLlJJR0hUO1xuICB9XG4gIGlmICh5IDwgbWluWSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5CRUxPVztcbiAgfSBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgIHJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcCB8IFJlbGF0aW9uc2hpcC5BQk9WRTtcbiAgfVxuICBpZiAocmVsYXRpb25zaGlwID09PSBSZWxhdGlvbnNoaXAuVU5LTk9XTikge1xuICAgIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkc7XG4gIH1cbiAgcmV0dXJuIHJlbGF0aW9uc2hpcDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gZW1wdHkgZXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFbXB0eSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbXB0eSgpIHtcbiAgcmV0dXJuIFtJbmZpbml0eSwgSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5XTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZXh0ZW50IG9yIHVwZGF0ZSB0aGUgcHJvdmlkZWQgZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1pblksIG1heFgsIG1heFksIGRlc3QpIHtcbiAgaWYgKGRlc3QpIHtcbiAgICBkZXN0WzBdID0gbWluWDtcbiAgICBkZXN0WzFdID0gbWluWTtcbiAgICBkZXN0WzJdID0gbWF4WDtcbiAgICBkZXN0WzNdID0gbWF4WTtcbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuICByZXR1cm4gW21pblgsIG1pblksIG1heFgsIG1heFldO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBlbXB0eSBleHRlbnQgb3IgbWFrZSB0aGUgcHJvdmlkZWQgb25lIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRW1wdHkoZGVzdCkge1xuICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eSwgZGVzdCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZGVzdCkge1xuICBjb25zdCB4ID0gY29vcmRpbmF0ZVswXTtcbiAgY29uc3QgeSA9IGNvb3JkaW5hdGVbMV07XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZSh4LCB5LCB4LCB5LCBkZXN0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIGRlc3QpIHtcbiAgY29uc3QgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShkZXN0KTtcbiAgcmV0dXJuIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgY29vcmRpbmF0ZXMpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIGRlc3Rcbikge1xuICBjb25zdCBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KGRlc3QpO1xuICByZXR1cm4gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbVJpbmdzKHJpbmdzLCBkZXN0KSB7XG4gIGNvbnN0IGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkoZGVzdCk7XG4gIHJldHVybiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGVxdWl2YWxlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgcmV0dXJuIChcbiAgICBleHRlbnQxWzBdID09IGV4dGVudDJbMF0gJiZcbiAgICBleHRlbnQxWzJdID09IGV4dGVudDJbMl0gJiZcbiAgICBleHRlbnQxWzFdID09IGV4dGVudDJbMV0gJiZcbiAgICBleHRlbnQxWzNdID09IGV4dGVudDJbM11cbiAgKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGFwcHJveGltYXRlbHkgZXF1aXZhbGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZSBpbiBleHRlbnQgY29vcmRpbmF0ZSB1bml0cy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBkaWZmZXIgYnkgbGVzcyB0aGFuIHRoZSB0b2xlcmFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHByb3hpbWF0ZWx5RXF1YWxzKGV4dGVudDEsIGV4dGVudDIsIHRvbGVyYW5jZSkge1xuICByZXR1cm4gKFxuICAgIE1hdGguYWJzKGV4dGVudDFbMF0gLSBleHRlbnQyWzBdKSA8IHRvbGVyYW5jZSAmJlxuICAgIE1hdGguYWJzKGV4dGVudDFbMl0gLSBleHRlbnQyWzJdKSA8IHRvbGVyYW5jZSAmJlxuICAgIE1hdGguYWJzKGV4dGVudDFbMV0gLSBleHRlbnQyWzFdKSA8IHRvbGVyYW5jZSAmJlxuICAgIE1hdGguYWJzKGV4dGVudDFbM10gLSBleHRlbnQyWzNdKSA8IHRvbGVyYW5jZVxuICApO1xufVxuXG4vKipcbiAqIE1vZGlmeSBhbiBleHRlbnQgdG8gaW5jbHVkZSBhbm90aGVyIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIFRoZSBleHRlbnQgdG8gYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBUaGUgZXh0ZW50IHRoYXQgd2lsbCBiZSBpbmNsdWRlZCBpbiB0aGUgZmlyc3QuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEEgcmVmZXJlbmNlIHRvIHRoZSBmaXJzdCAoZXh0ZW5kZWQpIGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChleHRlbnQxLCBleHRlbnQyKSB7XG4gIGlmIChleHRlbnQyWzBdIDwgZXh0ZW50MVswXSkge1xuICAgIGV4dGVudDFbMF0gPSBleHRlbnQyWzBdO1xuICB9XG4gIGlmIChleHRlbnQyWzJdID4gZXh0ZW50MVsyXSkge1xuICAgIGV4dGVudDFbMl0gPSBleHRlbnQyWzJdO1xuICB9XG4gIGlmIChleHRlbnQyWzFdIDwgZXh0ZW50MVsxXSkge1xuICAgIGV4dGVudDFbMV0gPSBleHRlbnQyWzFdO1xuICB9XG4gIGlmIChleHRlbnQyWzNdID4gZXh0ZW50MVszXSkge1xuICAgIGV4dGVudDFbM10gPSBleHRlbnQyWzNdO1xuICB9XG4gIHJldHVybiBleHRlbnQxO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIGNvb3JkaW5hdGUpIHtcbiAgaWYgKGNvb3JkaW5hdGVbMF0gPCBleHRlbnRbMF0pIHtcbiAgICBleHRlbnRbMF0gPSBjb29yZGluYXRlWzBdO1xuICB9XG4gIGlmIChjb29yZGluYXRlWzBdID4gZXh0ZW50WzJdKSB7XG4gICAgZXh0ZW50WzJdID0gY29vcmRpbmF0ZVswXTtcbiAgfVxuICBpZiAoY29vcmRpbmF0ZVsxXSA8IGV4dGVudFsxXSkge1xuICAgIGV4dGVudFsxXSA9IGNvb3JkaW5hdGVbMV07XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVbMV0gPiBleHRlbnRbM10pIHtcbiAgICBleHRlbnRbM10gPSBjb29yZGluYXRlWzFdO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgY29vcmRpbmF0ZXMpIHtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZEZsYXRDb29yZGluYXRlcyhcbiAgZXh0ZW50LFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGVcbikge1xuICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgZXh0ZW5kWFkoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kUmluZ3MoZXh0ZW50LCByaW5ncykge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSByaW5ncy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgZXh0ZW5kQ29vcmRpbmF0ZXMoZXh0ZW50LCByaW5nc1tpXSk7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kWFkoZXh0ZW50LCB4LCB5KSB7XG4gIGV4dGVudFswXSA9IE1hdGgubWluKGV4dGVudFswXSwgeCk7XG4gIGV4dGVudFsxXSA9IE1hdGgubWluKGV4dGVudFsxXSwgeSk7XG4gIGV4dGVudFsyXSA9IE1hdGgubWF4KGV4dGVudFsyXSwgeCk7XG4gIGV4dGVudFszXSA9IE1hdGgubWF4KGV4dGVudFszXSwgeSk7XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIGNvcm5lciBvZiB0aGUgZXh0ZW50LiBJZiB0aGVcbiAqIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdCB2YWx1ZVxuICogaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogU30gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcmV0dXJuIHtTfGJvb2xlYW59IFZhbHVlLlxuICogQHRlbXBsYXRlIFNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2hDb3JuZXIoZXh0ZW50LCBjYWxsYmFjaykge1xuICBsZXQgdmFsO1xuICB2YWwgPSBjYWxsYmFjayhnZXRCb3R0b21MZWZ0KGV4dGVudCkpO1xuICBpZiAodmFsKSB7XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxuICB2YWwgPSBjYWxsYmFjayhnZXRCb3R0b21SaWdodChleHRlbnQpKTtcbiAgaWYgKHZhbCkge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbiAgdmFsID0gY2FsbGJhY2soZ2V0VG9wUmlnaHQoZXh0ZW50KSk7XG4gIGlmICh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHZhbCA9IGNhbGxiYWNrKGdldFRvcExlZnQoZXh0ZW50KSk7XG4gIGlmICh2YWwpIHtcbiAgICByZXR1cm4gdmFsO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHNpemUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBcmVhKGV4dGVudCkge1xuICBsZXQgYXJlYSA9IDA7XG4gIGlmICghaXNFbXB0eShleHRlbnQpKSB7XG4gICAgYXJlYSA9IGdldFdpZHRoKGV4dGVudCkgKiBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgfVxuICByZXR1cm4gYXJlYTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGJvdHRvbSBsZWZ0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQm90dG9tIGxlZnQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdHRvbUxlZnQoZXh0ZW50KSB7XG4gIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbMV1dO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYm90dG9tIHJpZ2h0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQm90dG9tIHJpZ2h0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCb3R0b21SaWdodChleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMl0sIGV4dGVudFsxXV07XG59XG5cbi8qKlxuICogR2V0IHRoZSBjZW50ZXIgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDZW50ZXIuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDZW50ZXIoZXh0ZW50KSB7XG4gIHJldHVybiBbKGV4dGVudFswXSArIGV4dGVudFsyXSkgLyAyLCAoZXh0ZW50WzFdICsgZXh0ZW50WzNdKSAvIDJdO1xufVxuXG4vKipcbiAqIEdldCBhIGNvcm5lciBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtDb3JuZXJ9IGNvcm5lciBDb3JuZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29ybmVyIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb3JuZXIoZXh0ZW50LCBjb3JuZXIpIHtcbiAgbGV0IGNvb3JkaW5hdGU7XG4gIGlmIChjb3JuZXIgPT09ICdib3R0b20tbGVmdCcpIHtcbiAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tTGVmdChleHRlbnQpO1xuICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ2JvdHRvbS1yaWdodCcpIHtcbiAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgfSBlbHNlIGlmIChjb3JuZXIgPT09ICd0b3AtbGVmdCcpIHtcbiAgICBjb29yZGluYXRlID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICB9IGVsc2UgaWYgKGNvcm5lciA9PT0gJ3RvcC1yaWdodCcpIHtcbiAgICBjb29yZGluYXRlID0gZ2V0VG9wUmlnaHQoZXh0ZW50KTtcbiAgfSBlbHNlIHtcbiAgICBhc3NlcnQoZmFsc2UsIDEzKTsgLy8gSW52YWxpZCBjb3JuZXJcbiAgfVxuICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmxhcmdlZCBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5sYXJnZWRBcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgY29uc3QgbWluWCA9IE1hdGgubWluKGV4dGVudDFbMF0sIGV4dGVudDJbMF0pO1xuICBjb25zdCBtaW5ZID0gTWF0aC5taW4oZXh0ZW50MVsxXSwgZXh0ZW50MlsxXSk7XG4gIGNvbnN0IG1heFggPSBNYXRoLm1heChleHRlbnQxWzJdLCBleHRlbnQyWzJdKTtcbiAgY29uc3QgbWF4WSA9IE1hdGgubWF4KGV4dGVudDFbM10sIGV4dGVudDJbM10pO1xuICByZXR1cm4gKG1heFggLSBtaW5YKSAqIChtYXhZIC0gbWluWSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW2Rlc3RdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yVmlld0FuZFNpemUoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSwgZGVzdCkge1xuICBjb25zdCBbeDAsIHkwLCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzXSA9IGdldFJvdGF0ZWRWaWV3cG9ydChcbiAgICBjZW50ZXIsXG4gICAgcmVzb2x1dGlvbixcbiAgICByb3RhdGlvbixcbiAgICBzaXplXG4gICk7XG4gIHJldHVybiBjcmVhdGVPclVwZGF0ZShcbiAgICBNYXRoLm1pbih4MCwgeDEsIHgyLCB4MyksXG4gICAgTWF0aC5taW4oeTAsIHkxLCB5MiwgeTMpLFxuICAgIE1hdGgubWF4KHgwLCB4MSwgeDIsIHgzKSxcbiAgICBNYXRoLm1heCh5MCwgeTEsIHkyLCB5MyksXG4gICAgZGVzdFxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gTGluZWFyIHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2aWV3cG9ydC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJvdGF0ZWRWaWV3cG9ydChjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKSB7XG4gIGNvbnN0IGR4ID0gKHJlc29sdXRpb24gKiBzaXplWzBdKSAvIDI7XG4gIGNvbnN0IGR5ID0gKHJlc29sdXRpb24gKiBzaXplWzFdKSAvIDI7XG4gIGNvbnN0IGNvc1JvdGF0aW9uID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICBjb25zdCBzaW5Sb3RhdGlvbiA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgY29uc3QgeENvcyA9IGR4ICogY29zUm90YXRpb247XG4gIGNvbnN0IHhTaW4gPSBkeCAqIHNpblJvdGF0aW9uO1xuICBjb25zdCB5Q29zID0gZHkgKiBjb3NSb3RhdGlvbjtcbiAgY29uc3QgeVNpbiA9IGR5ICogc2luUm90YXRpb247XG4gIGNvbnN0IHggPSBjZW50ZXJbMF07XG4gIGNvbnN0IHkgPSBjZW50ZXJbMV07XG4gIHJldHVybiBbXG4gICAgeCAtIHhDb3MgKyB5U2luLFxuICAgIHkgLSB4U2luIC0geUNvcyxcbiAgICB4IC0geENvcyAtIHlTaW4sXG4gICAgeSAtIHhTaW4gKyB5Q29zLFxuICAgIHggKyB4Q29zIC0geVNpbixcbiAgICB5ICsgeFNpbiArIHlDb3MsXG4gICAgeCArIHhDb3MgKyB5U2luLFxuICAgIHkgKyB4U2luIC0geUNvcyxcbiAgICB4IC0geENvcyArIHlTaW4sXG4gICAgeSAtIHhTaW4gLSB5Q29zLFxuICBdO1xufVxuXG4vKipcbiAqIEdldCB0aGUgaGVpZ2h0IG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWlnaHQoZXh0ZW50KSB7XG4gIHJldHVybiBleHRlbnRbM10gLSBleHRlbnRbMV07XG59XG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJzZWN0aW9uIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb25BcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgY29uc3QgaW50ZXJzZWN0aW9uID0gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudDEsIGV4dGVudDIpO1xuICByZXR1cm4gZ2V0QXJlYShpbnRlcnNlY3Rpb24pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgaW50ZXJzZWN0aW9uIG9mIHR3byBleHRlbnRzLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gT3B0aW9uYWwgZXh0ZW50IHRvIHBvcHVsYXRlIHdpdGggaW50ZXJzZWN0aW9uLlxuICogQHJldHVybiB7RXh0ZW50fSBJbnRlcnNlY3RpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudDEsIGV4dGVudDIsIGRlc3QpIHtcbiAgY29uc3QgaW50ZXJzZWN0aW9uID0gZGVzdCA/IGRlc3QgOiBjcmVhdGVFbXB0eSgpO1xuICBpZiAoaW50ZXJzZWN0cyhleHRlbnQxLCBleHRlbnQyKSkge1xuICAgIGlmIChleHRlbnQxWzBdID4gZXh0ZW50MlswXSkge1xuICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MVswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MlswXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDFbMV0gPiBleHRlbnQyWzFdKSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQxWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQyWzFdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MVsyXSA8IGV4dGVudDJbMl0pIHtcbiAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDFbMl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDJbMl07XG4gICAgfVxuICAgIGlmIChleHRlbnQxWzNdIDwgZXh0ZW50MlszXSkge1xuICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MVszXTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MlszXTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY3JlYXRlT3JVcGRhdGVFbXB0eShpbnRlcnNlY3Rpb24pO1xuICB9XG4gIHJldHVybiBpbnRlcnNlY3Rpb247XG59XG5cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1hcmdpbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmdpbihleHRlbnQpIHtcbiAgcmV0dXJuIGdldFdpZHRoKGV4dGVudCkgKyBnZXRIZWlnaHQoZXh0ZW50KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHNpemUgKHdpZHRoLCBoZWlnaHQpIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBUaGUgZXh0ZW50IHNpemUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaXplKGV4dGVudCkge1xuICByZXR1cm4gW2V4dGVudFsyXSAtIGV4dGVudFswXSwgZXh0ZW50WzNdIC0gZXh0ZW50WzFdXTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRvcCBsZWZ0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIGxlZnQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcExlZnQoZXh0ZW50KSB7XG4gIHJldHVybiBbZXh0ZW50WzBdLCBleHRlbnRbM11dO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdG9wIHJpZ2h0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIHJpZ2h0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BSaWdodChleHRlbnQpIHtcbiAgcmV0dXJuIFtleHRlbnRbMl0sIGV4dGVudFszXV07XG59XG5cbi8qKlxuICogR2V0IHRoZSB3aWR0aCBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaWR0aChleHRlbnQpIHtcbiAgcmV0dXJuIGV4dGVudFsyXSAtIGV4dGVudFswXTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgb25lIGV4dGVudCBpbnRlcnNlY3RzIGFub3RoZXIuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBpbnRlcnNlY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgcmV0dXJuIChcbiAgICBleHRlbnQxWzBdIDw9IGV4dGVudDJbMl0gJiZcbiAgICBleHRlbnQxWzJdID49IGV4dGVudDJbMF0gJiZcbiAgICBleHRlbnQxWzFdIDw9IGV4dGVudDJbM10gJiZcbiAgICBleHRlbnQxWzNdID49IGV4dGVudDJbMV1cbiAgKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gZXh0ZW50IGlzIGVtcHR5LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBlbXB0eS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkoZXh0ZW50KSB7XG4gIHJldHVybiBleHRlbnRbMl0gPCBleHRlbnRbMF0gfHwgZXh0ZW50WzNdIDwgZXh0ZW50WzFdO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IFtkZXN0XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldHVybk9yVXBkYXRlKGV4dGVudCwgZGVzdCkge1xuICBpZiAoZGVzdCkge1xuICAgIGRlc3RbMF0gPSBleHRlbnRbMF07XG4gICAgZGVzdFsxXSA9IGV4dGVudFsxXTtcbiAgICBkZXN0WzJdID0gZXh0ZW50WzJdO1xuICAgIGRlc3RbM10gPSBleHRlbnRbM107XG4gICAgcmV0dXJuIGRlc3Q7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlRnJvbUNlbnRlcihleHRlbnQsIHZhbHVlKSB7XG4gIGNvbnN0IGRlbHRhWCA9ICgoZXh0ZW50WzJdIC0gZXh0ZW50WzBdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gIGNvbnN0IGRlbHRhWSA9ICgoZXh0ZW50WzNdIC0gZXh0ZW50WzFdKSAvIDIpICogKHZhbHVlIC0gMSk7XG4gIGV4dGVudFswXSAtPSBkZWx0YVg7XG4gIGV4dGVudFsyXSArPSBkZWx0YVg7XG4gIGV4dGVudFsxXSAtPSBkZWx0YVk7XG4gIGV4dGVudFszXSArPSBkZWx0YVk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHRoZSBzZWdtZW50IGJldHdlZW4gdHdvIGNvb3JkaW5hdGVzIGludGVyc2VjdHMgKGNyb3NzZXMsXG4gKiB0b3VjaGVzLCBvciBpcyBjb250YWluZWQgYnkpIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBzdGFydCBTZWdtZW50IHN0YXJ0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBlbmQgU2VnbWVudCBlbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzZWdtZW50IGludGVyc2VjdHMgdGhlIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgc3RhcnQsIGVuZCkge1xuICBsZXQgaW50ZXJzZWN0cyA9IGZhbHNlO1xuICBjb25zdCBzdGFydFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBzdGFydCk7XG4gIGNvbnN0IGVuZFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBlbmQpO1xuICBpZiAoXG4gICAgc3RhcnRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcgfHxcbiAgICBlbmRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkdcbiAgKSB7XG4gICAgaW50ZXJzZWN0cyA9IHRydWU7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbWluWCA9IGV4dGVudFswXTtcbiAgICBjb25zdCBtaW5ZID0gZXh0ZW50WzFdO1xuICAgIGNvbnN0IG1heFggPSBleHRlbnRbMl07XG4gICAgY29uc3QgbWF4WSA9IGV4dGVudFszXTtcbiAgICBjb25zdCBzdGFydFggPSBzdGFydFswXTtcbiAgICBjb25zdCBzdGFydFkgPSBzdGFydFsxXTtcbiAgICBjb25zdCBlbmRYID0gZW5kWzBdO1xuICAgIGNvbnN0IGVuZFkgPSBlbmRbMV07XG4gICAgY29uc3Qgc2xvcGUgPSAoZW5kWSAtIHN0YXJ0WSkgLyAoZW5kWCAtIHN0YXJ0WCk7XG4gICAgbGV0IHgsIHk7XG4gICAgaWYgKCEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkgJiYgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkpIHtcbiAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgdG9wXG4gICAgICB4ID0gZW5kWCAtIChlbmRZIC0gbWF4WSkgLyBzbG9wZTtcbiAgICAgIGludGVyc2VjdHMgPSB4ID49IG1pblggJiYgeCA8PSBtYXhYO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAhaW50ZXJzZWN0cyAmJlxuICAgICAgISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKSAmJlxuICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVClcbiAgICApIHtcbiAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgcmlnaHRcbiAgICAgIHkgPSBlbmRZIC0gKGVuZFggLSBtYXhYKSAqIHNsb3BlO1xuICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgICFpbnRlcnNlY3RzICYmXG4gICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpICYmXG4gICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkJFTE9XKVxuICAgICkge1xuICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBib3R0b21cbiAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtaW5ZKSAvIHNsb3BlO1xuICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgfVxuICAgIGlmIChcbiAgICAgICFpbnRlcnNlY3RzICYmXG4gICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkgJiZcbiAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVClcbiAgICApIHtcbiAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgbGVmdFxuICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1pblgpICogc2xvcGU7XG4gICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGludGVyc2VjdHM7XG59XG5cbi8qKlxuICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIENhbGxlZCB3aXRoIGBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV1gIGV4dGVudCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbZGVzdF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtzdG9wc10gTnVtYmVyIG9mIHN0b3BzIHBlciBzaWRlIHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm0uXG4gKiBCeSBkZWZhdWx0IG9ubHkgdGhlIGNvcm5lcnMgYXJlIHVzZWQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5VHJhbnNmb3JtKGV4dGVudCwgdHJhbnNmb3JtRm4sIGRlc3QsIHN0b3BzKSB7XG4gIGlmIChpc0VtcHR5KGV4dGVudCkpIHtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVFbXB0eShkZXN0KTtcbiAgfVxuICBsZXQgY29vcmRpbmF0ZXMgPSBbXTtcbiAgaWYgKHN0b3BzID4gMSkge1xuICAgIGNvbnN0IHdpZHRoID0gZXh0ZW50WzJdIC0gZXh0ZW50WzBdO1xuICAgIGNvbnN0IGhlaWdodCA9IGV4dGVudFszXSAtIGV4dGVudFsxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0b3BzOyArK2kpIHtcbiAgICAgIGNvb3JkaW5hdGVzLnB1c2goXG4gICAgICAgIGV4dGVudFswXSArICh3aWR0aCAqIGkpIC8gc3RvcHMsXG4gICAgICAgIGV4dGVudFsxXSxcbiAgICAgICAgZXh0ZW50WzJdLFxuICAgICAgICBleHRlbnRbMV0gKyAoaGVpZ2h0ICogaSkgLyBzdG9wcyxcbiAgICAgICAgZXh0ZW50WzJdIC0gKHdpZHRoICogaSkgLyBzdG9wcyxcbiAgICAgICAgZXh0ZW50WzNdLFxuICAgICAgICBleHRlbnRbMF0sXG4gICAgICAgIGV4dGVudFszXSAtIChoZWlnaHQgKiBpKSAvIHN0b3BzXG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb29yZGluYXRlcyA9IFtcbiAgICAgIGV4dGVudFswXSxcbiAgICAgIGV4dGVudFsxXSxcbiAgICAgIGV4dGVudFsyXSxcbiAgICAgIGV4dGVudFsxXSxcbiAgICAgIGV4dGVudFsyXSxcbiAgICAgIGV4dGVudFszXSxcbiAgICAgIGV4dGVudFswXSxcbiAgICAgIGV4dGVudFszXSxcbiAgICBdO1xuICB9XG4gIHRyYW5zZm9ybUZuKGNvb3JkaW5hdGVzLCBjb29yZGluYXRlcywgMik7XG4gIGNvbnN0IHhzID0gW107XG4gIGNvbnN0IHlzID0gW107XG4gIGZvciAobGV0IGkgPSAwLCBsID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgeHMucHVzaChjb29yZGluYXRlc1tpXSk7XG4gICAgeXMucHVzaChjb29yZGluYXRlc1tpICsgMV0pO1xuICB9XG4gIHJldHVybiBfYm91bmRpbmdFeHRlbnRYWXMoeHMsIHlzLCBkZXN0KTtcbn1cblxuLyoqXG4gKiBNb2RpZmllcyB0aGUgcHJvdmlkZWQgZXh0ZW50IGluLXBsYWNlIHRvIGJlIHdpdGhpbiB0aGUgcmVhbCB3b3JsZFxuICogZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb25cbiAqIEByZXR1cm4ge0V4dGVudH0gVGhlIGV4dGVudCB3aXRoaW4gdGhlIHJlYWwgd29ybGQgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgoZXh0ZW50LCBwcm9qZWN0aW9uKSB7XG4gIGNvbnN0IHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICBjb25zdCBjZW50ZXIgPSBnZXRDZW50ZXIoZXh0ZW50KTtcbiAgaWYgKFxuICAgIHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgIChjZW50ZXJbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdIHx8IGNlbnRlclswXSA+PSBwcm9qZWN0aW9uRXh0ZW50WzJdKVxuICApIHtcbiAgICBjb25zdCB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgY29uc3Qgd29ybGRzQXdheSA9IE1hdGguZmxvb3IoXG4gICAgICAoY2VudGVyWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyB3b3JsZFdpZHRoXG4gICAgKTtcbiAgICBjb25zdCBvZmZzZXQgPSB3b3JsZHNBd2F5ICogd29ybGRXaWR0aDtcbiAgICBleHRlbnRbMF0gLT0gb2Zmc2V0O1xuICAgIGV4dGVudFsyXSAtPSBvZmZzZXQ7XG4gIH1cbiAgcmV0dXJuIGV4dGVudDtcbn1cblxuLyoqXG4gKiBGaXRzIHRoZSBleHRlbnQgdG8gdGhlIHJlYWwgd29ybGRcbiAqXG4gKiBJZiB0aGUgZXh0ZW50IGRvZXMgbm90IGNyb3NzIHRoZSBhbnRpIG1lcmlkaWFuLCB0aGlzIHdpbGwgcmV0dXJuIHRoZSBleHRlbnQgaW4gYW4gYXJyYXlcbiAqIElmIHRoZSBleHRlbnQgY3Jvc3NlcyB0aGUgYW50aSBtZXJpZGlhbiwgdGhlIGV4dGVudCB3aWxsIGJlIHNsaWNlZCwgc28gZWFjaCBwYXJ0IGZpdHMgd2l0aGluIHRoZVxuICogcmVhbCB3b3JsZFxuICpcbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uXG4gKiBAcmV0dXJuIHtBcnJheTxFeHRlbnQ+fSBUaGUgZXh0ZW50IHdpdGhpbiB0aGUgcmVhbCB3b3JsZCBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwQW5kU2xpY2VYKGV4dGVudCwgcHJvamVjdGlvbikge1xuICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpKSB7XG4gICAgY29uc3QgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG5cbiAgICBpZiAoIWlzRmluaXRlKGV4dGVudFswXSkgfHwgIWlzRmluaXRlKGV4dGVudFsyXSkpIHtcbiAgICAgIHJldHVybiBbW3Byb2plY3Rpb25FeHRlbnRbMF0sIGV4dGVudFsxXSwgcHJvamVjdGlvbkV4dGVudFsyXSwgZXh0ZW50WzNdXV07XG4gICAgfVxuXG4gICAgd3JhcFgoZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICBjb25zdCB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG5cbiAgICBpZiAoZ2V0V2lkdGgoZXh0ZW50KSA+IHdvcmxkV2lkdGgpIHtcbiAgICAgIC8vIHRoZSBleHRlbnQgd3JhcHMgYXJvdW5kIG9uIGl0c2VsZlxuICAgICAgcmV0dXJuIFtbcHJvamVjdGlvbkV4dGVudFswXSwgZXh0ZW50WzFdLCBwcm9qZWN0aW9uRXh0ZW50WzJdLCBleHRlbnRbM11dXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudFswXSA8IHByb2plY3Rpb25FeHRlbnRbMF0pIHtcbiAgICAgIC8vIHRoZSBleHRlbnQgY3Jvc3NlcyB0aGUgYW50aSBtZXJpZGlhbiwgc28gaXQgbmVlZHMgdG8gYmUgc2xpY2VkXG4gICAgICByZXR1cm4gW1xuICAgICAgICBbZXh0ZW50WzBdICsgd29ybGRXaWR0aCwgZXh0ZW50WzFdLCBwcm9qZWN0aW9uRXh0ZW50WzJdLCBleHRlbnRbM11dLFxuICAgICAgICBbcHJvamVjdGlvbkV4dGVudFswXSwgZXh0ZW50WzFdLCBleHRlbnRbMl0sIGV4dGVudFszXV0sXG4gICAgICBdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50WzJdID4gcHJvamVjdGlvbkV4dGVudFsyXSkge1xuICAgICAgLy8gdGhlIGV4dGVudCBjcm9zc2VzIHRoZSBhbnRpIG1lcmlkaWFuLCBzbyBpdCBuZWVkcyB0byBiZSBzbGljZWRcbiAgICAgIHJldHVybiBbXG4gICAgICAgIFtleHRlbnRbMF0sIGV4dGVudFsxXSwgcHJvamVjdGlvbkV4dGVudFsyXSwgZXh0ZW50WzNdXSxcbiAgICAgICAgW3Byb2plY3Rpb25FeHRlbnRbMF0sIGV4dGVudFsxXSwgZXh0ZW50WzJdIC0gd29ybGRXaWR0aCwgZXh0ZW50WzNdXSxcbiAgICAgIF07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIFtleHRlbnRdO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Nvb3JkaW5hdGVcbiAqL1xuaW1wb3J0IHtnZXRXaWR0aH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHttb2R1bG8sIHRvRml4ZWR9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQge3BhZE51bWJlcn0gZnJvbSAnLi9zdHJpbmcuanMnO1xuXG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGFuIGB4eWAsIGB4eXpgIG9yIGB4eXptYCBjb29yZGluYXRlLlxuICogRXhhbXBsZTogYFsxNiwgNDhdYC5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBDb29yZGluYXRlXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYW5kXG4gKiB0cmFuc2Zvcm1zIGl0IGludG8gYSBge3N0cmluZ31gLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoQ29vcmRpbmF0ZXx1bmRlZmluZWQpKTogc3RyaW5nfSBDb29yZGluYXRlRm9ybWF0XG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiBBZGQgYGRlbHRhYCB0byBgY29vcmRpbmF0ZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge2FkZH0gZnJvbSAnb2wvY29vcmRpbmF0ZS5qcyc7XG4gKlxuICogICAgIGNvbnN0IGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgYWRkKGNvb3JkLCBbLTIsIDRdKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzUuODUsIDUxLjk4MzMzM11cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgaW5wdXQgY29vcmRpbmF0ZSBhZGp1c3RlZCBieVxuICogdGhlIGdpdmVuIGRlbHRhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvb3JkaW5hdGUsIGRlbHRhKSB7XG4gIGNvb3JkaW5hdGVbMF0gKz0gK2RlbHRhWzBdO1xuICBjb29yZGluYXRlWzFdICs9ICtkZWx0YVsxXTtcbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBjaXJjbGUuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBUaGUgY2lyY2xlLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludCBvbiB0aGUgY2lyY3VtZmVyZW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPbkNpcmNsZShjb29yZGluYXRlLCBjaXJjbGUpIHtcbiAgY29uc3QgciA9IGNpcmNsZS5nZXRSYWRpdXMoKTtcbiAgY29uc3QgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICBjb25zdCB4MCA9IGNlbnRlclswXTtcbiAgY29uc3QgeTAgPSBjZW50ZXJbMV07XG4gIGNvbnN0IHgxID0gY29vcmRpbmF0ZVswXTtcbiAgY29uc3QgeTEgPSBjb29yZGluYXRlWzFdO1xuXG4gIGxldCBkeCA9IHgxIC0geDA7XG4gIGNvbnN0IGR5ID0geTEgLSB5MDtcbiAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgZHggPSAxO1xuICB9XG4gIGNvbnN0IGQgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gIGNvbnN0IHggPSB4MCArIChyICogZHgpIC8gZDtcbiAgY29uc3QgeSA9IHkwICsgKHIgKiBkeSkgLyBkO1xuXG4gIHJldHVybiBbeCwgeV07XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBzZWdtZW50LlxuICogVGhpcyBpcyB0aGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudCB3aGVuXG4gKiB0aGUgZm9vdCBpcyBvbiB0aGUgc2VnbWVudCwgb3IgdGhlIGNsb3Nlc3Qgc2VnbWVudCBjb29yZGluYXRlIHdoZW4gdGhlIGZvb3RcbiAqIGlzIG91dHNpZGUgdGhlIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBUaGUgdHdvIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgc2VnbWVudC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mXG4gKiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICBjb25zdCB4MCA9IGNvb3JkaW5hdGVbMF07XG4gIGNvbnN0IHkwID0gY29vcmRpbmF0ZVsxXTtcbiAgY29uc3Qgc3RhcnQgPSBzZWdtZW50WzBdO1xuICBjb25zdCBlbmQgPSBzZWdtZW50WzFdO1xuICBjb25zdCB4MSA9IHN0YXJ0WzBdO1xuICBjb25zdCB5MSA9IHN0YXJ0WzFdO1xuICBjb25zdCB4MiA9IGVuZFswXTtcbiAgY29uc3QgeTIgPSBlbmRbMV07XG4gIGNvbnN0IGR4ID0geDIgLSB4MTtcbiAgY29uc3QgZHkgPSB5MiAtIHkxO1xuICBjb25zdCBhbG9uZyA9XG4gICAgZHggPT09IDAgJiYgZHkgPT09IDBcbiAgICAgID8gMFxuICAgICAgOiAoZHggKiAoeDAgLSB4MSkgKyBkeSAqICh5MCAtIHkxKSkgLyAoZHggKiBkeCArIGR5ICogZHkgfHwgMCk7XG4gIGxldCB4LCB5O1xuICBpZiAoYWxvbmcgPD0gMCkge1xuICAgIHggPSB4MTtcbiAgICB5ID0geTE7XG4gIH0gZWxzZSBpZiAoYWxvbmcgPj0gMSkge1xuICAgIHggPSB4MjtcbiAgICB5ID0geTI7XG4gIH0gZWxzZSB7XG4gICAgeCA9IHgxICsgYWxvbmcgKiBkeDtcbiAgICB5ID0geTEgKyBhbG9uZyAqIGR5O1xuICB9XG4gIHJldHVybiBbeCwgeV07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlRm9ybWF0fSBmdW5jdGlvbiB0aGF0IGNhbiBiZVxuICogdXNlZCB0byBmb3JtYXRcbiAqIGEge0Nvb3JkaW5hdGV9IHRvIGEgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIHRoZSBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZS5qcyc7XG4gKlxuICogICAgIGNvbnN0IGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgY29uc3Qgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKCk7XG4gKiAgICAgY29uc3Qgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSB3aXRoIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAyIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2NyZWF0ZVN0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoMik7XG4gKiAgICAgY29uc3Qgb3V0ID0gc3RyaW5naWZ5RnVuYyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44NSwgNDcuOTgnXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZUZvcm1hdH0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHJpbmdYWShmcmFjdGlvbkRpZ2l0cykge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nIFhZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICByZXR1cm4gdG9TdHJpbmdYWShjb29yZGluYXRlLCBmcmFjdGlvbkRpZ2l0cyk7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBoZW1pc3BoZXJlcyBIZW1pc3BoZXJlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIERlZ3JlZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZ3JlZXNUb1N0cmluZ0hETVMoaGVtaXNwaGVyZXMsIGRlZ3JlZXMsIGZyYWN0aW9uRGlnaXRzKSB7XG4gIGNvbnN0IG5vcm1hbGl6ZWREZWdyZWVzID0gbW9kdWxvKGRlZ3JlZXMgKyAxODAsIDM2MCkgLSAxODA7XG4gIGNvbnN0IHggPSBNYXRoLmFicygzNjAwICogbm9ybWFsaXplZERlZ3JlZXMpO1xuICBjb25zdCBkZWNpbWFscyA9IGZyYWN0aW9uRGlnaXRzIHx8IDA7XG5cbiAgbGV0IGRlZyA9IE1hdGguZmxvb3IoeCAvIDM2MDApO1xuICBsZXQgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICBsZXQgc2VjID0gdG9GaXhlZCh4IC0gZGVnICogMzYwMCAtIG1pbiAqIDYwLCBkZWNpbWFscyk7XG5cbiAgaWYgKHNlYyA+PSA2MCkge1xuICAgIHNlYyA9IDA7XG4gICAgbWluICs9IDE7XG4gIH1cblxuICBpZiAobWluID49IDYwKSB7XG4gICAgbWluID0gMDtcbiAgICBkZWcgKz0gMTtcbiAgfVxuXG4gIGxldCBoZG1zID0gZGVnICsgJ1xcdTAwYjAnO1xuICBpZiAobWluICE9PSAwIHx8IHNlYyAhPT0gMCkge1xuICAgIGhkbXMgKz0gJyAnICsgcGFkTnVtYmVyKG1pbiwgMikgKyAnXFx1MjAzMic7XG4gIH1cbiAgaWYgKHNlYyAhPT0gMCkge1xuICAgIGhkbXMgKz0gJyAnICsgcGFkTnVtYmVyKHNlYywgMiwgZGVjaW1hbHMpICsgJ1xcdTIwMzMnO1xuICB9XG4gIGlmIChub3JtYWxpemVkRGVncmVlcyAhPT0gMCkge1xuICAgIGhkbXMgKz0gJyAnICsgaGVtaXNwaGVyZXMuY2hhckF0KG5vcm1hbGl6ZWREZWdyZWVzIDwgMCA/IDEgOiAwKTtcbiAgfVxuXG4gIHJldHVybiBoZG1zO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSB0byBhIHN0cmluZ1xuICogdXNpbmcgdGhlIGdpdmVuIHN0cmluZyB0ZW1wbGF0ZS4gVGhlIHN0cmluZ3MgYHt4fWAgYW5kIGB7eX1gIGluIHRoZSB0ZW1wbGF0ZVxuICogd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIGNvbnN0IG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDh8NDgpLidcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIGNvbnN0IG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUsIDIpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDcuODV8NDcuOTgpLidcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBBIHRlbXBsYXRlIHN0cmluZyB3aXRoIGB7eH1gIGFuZCBge3l9YCBwbGFjZWhvbGRlcnNcbiAqICAgICB0aGF0IHdpbGwgYmUgcmVwbGFjZWQgYnkgZmlyc3QgYW5kIHNlY29uZCBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gRm9ybWF0dGVkIGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXQoY29vcmRpbmF0ZSwgdGVtcGxhdGUsIGZyYWN0aW9uRGlnaXRzKSB7XG4gIGlmIChjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKGZyYWN0aW9uRGlnaXRzKSlcbiAgICAgIC5yZXBsYWNlKCd7eX0nLCBjb29yZGluYXRlWzFdLnRvRml4ZWQoZnJhY3Rpb25EaWdpdHMpKTtcbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICBsZXQgZXF1YWxzID0gdHJ1ZTtcbiAgZm9yIChsZXQgaSA9IGNvb3JkaW5hdGUxLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUxW2ldICE9IGNvb3JkaW5hdGUyW2ldKSB7XG4gICAgICBlcXVhbHMgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZXF1YWxzO1xufVxuXG4vKipcbiAqIFJvdGF0ZSBgY29vcmRpbmF0ZWAgYnkgYGFuZ2xlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZFxuICogcmV0dXJuZWQgYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7cm90YXRlfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCByb3RhdGVSYWRpYW5zID0gTWF0aC5QSSAvIDI7IC8vIDkwIGRlZ3JlZXNcbiAqICAgICByb3RhdGUoY29vcmQsIHJvdGF0ZVJhZGlhbnMpO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbLTQ3Ljk4MzMzMywgNy44NV1cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZSBpbiByYWRpYW4uXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGNvb3JkaW5hdGUsIGFuZ2xlKSB7XG4gIGNvbnN0IGNvc0FuZ2xlID0gTWF0aC5jb3MoYW5nbGUpO1xuICBjb25zdCBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgY29uc3QgeCA9IGNvb3JkaW5hdGVbMF0gKiBjb3NBbmdsZSAtIGNvb3JkaW5hdGVbMV0gKiBzaW5BbmdsZTtcbiAgY29uc3QgeSA9IGNvb3JkaW5hdGVbMV0gKiBjb3NBbmdsZSArIGNvb3JkaW5hdGVbMF0gKiBzaW5BbmdsZTtcbiAgY29vcmRpbmF0ZVswXSA9IHg7XG4gIGNvb3JkaW5hdGVbMV0gPSB5O1xuICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cblxuLyoqXG4gKiBTY2FsZSBgY29vcmRpbmF0ZWAgYnkgYHNjYWxlYC4gYGNvb3JkaW5hdGVgIGlzIG1vZGlmaWVkIGluIHBsYWNlIGFuZCByZXR1cm5lZFxuICogYnkgdGhlIGZ1bmN0aW9uLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIGltcG9ydCB7c2NhbGUgYXMgc2NhbGVDb29yZGluYXRlfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCBzY2FsZSA9IDEuMjtcbiAqICAgICBzY2FsZUNvb3JkaW5hdGUoY29vcmQsIHNjYWxlKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzkuNDIsIDU3LjU3OTk5OTZdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgZmFjdG9yLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGNvb3JkaW5hdGUsIHNjYWxlKSB7XG4gIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gIGNvb3JkaW5hdGVbMV0gKj0gc2NhbGU7XG4gIHJldHVybiBjb29yZGluYXRlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGNvb3JkMSBhbmQgY29vcmQyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gIGNvbnN0IGR4ID0gY29vcmQxWzBdIC0gY29vcmQyWzBdO1xuICBjb25zdCBkeSA9IGNvb3JkMVsxXSAtIGNvb3JkMlsxXTtcbiAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge251bWJlcn0gRGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSB7XG4gIHJldHVybiBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIHRoZSBzcXVhcmVkIGRpc3RhbmNlIGZyb20gYSBjb29yZGluYXRlIHRvIGEgbGluZSBzZWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlIG9mIHRoZSBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8Q29vcmRpbmF0ZT59IHNlZ21lbnQgTGluZSBzZWdtZW50ICgyXG4gKiBjb29yZGluYXRlcykuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGUgcG9pbnQgdG8gdGhlIGxpbmUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZVRvU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSB7XG4gIHJldHVybiBzcXVhcmVkRGlzdGFuY2UoY29vcmRpbmF0ZSwgY2xvc2VzdE9uU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSk7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgZ2VvZ3JhcGhpYyBjb29yZGluYXRlIHdpdGggdGhlIGhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMsIGFuZFxuICogc2Vjb25kcy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUuanMnO1xuICpcbiAqICAgICBjb25zdCBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGNvbnN0IG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MOKAsyBOIDfCsCA1MOKAsiA2MOKAsyBFJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIDEgZnJhY3Rpb25hbCBkaWdpdDpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUuanMnO1xuICpcbiAqICAgICBjb25zdCBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGNvbnN0IG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MC4w4oCzIE4gN8KwIDUw4oCyIDYwLjDigLMgRSdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcyBhbmQgc2Vjb25kcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nSERNUyhjb29yZGluYXRlLCBmcmFjdGlvbkRpZ2l0cykge1xuICBpZiAoY29vcmRpbmF0ZSkge1xuICAgIHJldHVybiAoXG4gICAgICBkZWdyZWVzVG9TdHJpbmdIRE1TKCdOUycsIGNvb3JkaW5hdGVbMV0sIGZyYWN0aW9uRGlnaXRzKSArXG4gICAgICAnICcgK1xuICAgICAgZGVncmVlc1RvU3RyaW5nSERNUygnRVcnLCBjb29yZGluYXRlWzBdLCBmcmFjdGlvbkRpZ2l0cylcbiAgICApO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBjb29yZGluYXRlIGFzIGEgY29tbWEgZGVsaW1pdGVkIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlLmpzJztcbiAqXG4gKiAgICAgY29uc3QgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBjb25zdCBvdXQgPSB0b1N0cmluZ1hZKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc4LCA0OCdcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAxIGZyYWN0aW9uYWwgZGlnaXQ6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZS5qcyc7XG4gKlxuICogICAgIGNvbnN0IGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgY29uc3Qgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtmcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBYWS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgZnJhY3Rpb25EaWdpdHMpIHtcbiAgcmV0dXJuIGZvcm1hdChjb29yZGluYXRlLCAne3h9LCB7eX0nLCBmcmFjdGlvbkRpZ2l0cyk7XG59XG5cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUgaW4tcGxhY2UgdG8gYmUgd2l0aGluIHRoZSByZWFsIHdvcmxkXG4gKiBleHRlbnQuIFRoZSBsb3dlciBwcm9qZWN0aW9uIGV4dGVudCBib3VuZGFyeSBpcyBpbmNsdXNpdmUsIHRoZSB1cHBlciBvbmVcbiAqIGV4Y2x1c2l2ZS5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGNvb3JkaW5hdGUsIHByb2plY3Rpb24pIHtcbiAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSkge1xuICAgIGNvbnN0IHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uLmdldEV4dGVudCgpKTtcbiAgICBjb25zdCB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCB3b3JsZFdpZHRoKTtcbiAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgY29vcmRpbmF0ZVswXSAtPSB3b3JsZHNBd2F5ICogd29ybGRXaWR0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW3NvdXJjZUV4dGVudFdpZHRoXSBXaWR0aCBvZiB0aGUgc291cmNlIGV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gT2Zmc2V0IGluIHdvcmxkIHdpZHRocy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdvcmxkc0F3YXkoY29vcmRpbmF0ZSwgcHJvamVjdGlvbiwgc291cmNlRXh0ZW50V2lkdGgpIHtcbiAgY29uc3QgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gIGxldCB3b3JsZHNBd2F5ID0gMDtcbiAgaWYgKFxuICAgIHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgIChjb29yZGluYXRlWzBdIDwgcHJvamVjdGlvbkV4dGVudFswXSB8fCBjb29yZGluYXRlWzBdID4gcHJvamVjdGlvbkV4dGVudFsyXSlcbiAgKSB7XG4gICAgc291cmNlRXh0ZW50V2lkdGggPSBzb3VyY2VFeHRlbnRXaWR0aCB8fCBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICB3b3JsZHNBd2F5ID0gTWF0aC5mbG9vcihcbiAgICAgIChjb29yZGluYXRlWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyBzb3VyY2VFeHRlbnRXaWR0aFxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHdvcmxkc0F3YXk7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvc3BoZXJlXG4gKi9cbmltcG9ydCB7dG9EZWdyZWVzLCB0b1JhZGlhbnN9IGZyb20gJy4vbWF0aC5qcyc7XG5cbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBvcHRpb25zIGZvciB0aGUge0BsaW5rIGdldExlbmd0aH0gb3Ige0BsaW5rIGdldEFyZWF9XG4gKiBmdW5jdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTcGhlcmVNZXRyaWNPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddXG4gKiBQcm9qZWN0aW9uIG9mIHRoZSAgZ2VvbWV0cnkuICBCeSBkZWZhdWx0LCB0aGUgZ2VvbWV0cnkgaXMgYXNzdW1lZCB0byBiZSBpblxuICogV2ViIE1lcmNhdG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYWRpdXM9NjM3MTAwOC44XSBTcGhlcmUgcmFkaXVzLiAgQnkgZGVmYXVsdCwgdGhlXG4gKiBbbWVhbiBFYXJ0aCByYWRpdXNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1cylcbiAqIGZvciB0aGUgV0dTODQgZWxsaXBzb2lkIGlzIHVzZWQuXG4gKi9cblxuLyoqXG4gKiBUaGUgbWVhbiBFYXJ0aCByYWRpdXMgKDEvMyAqICgyYSArIGIpKSBmb3IgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1c1xuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUkFESVVTID0gNjM3MTAwOC44O1xuXG4vKipcbiAqIEdldCB0aGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIChpbiBtZXRlcnMpIGJldHdlZW4gdHdvIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5fSBjMSBTdGFydGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheX0gYzIgRW5kaW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW3JhZGl1c10gVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlKGMxLCBjMiwgcmFkaXVzKSB7XG4gIHJhZGl1cyA9IHJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgY29uc3QgbGF0MSA9IHRvUmFkaWFucyhjMVsxXSk7XG4gIGNvbnN0IGxhdDIgPSB0b1JhZGlhbnMoYzJbMV0pO1xuICBjb25zdCBkZWx0YUxhdEJ5MiA9IChsYXQyIC0gbGF0MSkgLyAyO1xuICBjb25zdCBkZWx0YUxvbkJ5MiA9IHRvUmFkaWFucyhjMlswXSAtIGMxWzBdKSAvIDI7XG4gIGNvbnN0IGEgPVxuICAgIE1hdGguc2luKGRlbHRhTGF0QnkyKSAqIE1hdGguc2luKGRlbHRhTGF0QnkyKSArXG4gICAgTWF0aC5zaW4oZGVsdGFMb25CeTIpICpcbiAgICAgIE1hdGguc2luKGRlbHRhTG9uQnkyKSAqXG4gICAgICBNYXRoLmNvcyhsYXQxKSAqXG4gICAgICBNYXRoLmNvcyhsYXQyKTtcbiAgcmV0dXJuIDIgKiByYWRpdXMgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdW11bGF0aXZlIGdyZWF0IGNpcmNsZSBsZW5ndGggb2YgbGluZXN0cmluZyBjb29yZGluYXRlcyAoZ2VvZ3JhcGhpYykuXG4gKiBAcGFyYW0ge0FycmF5fSBjb29yZGluYXRlcyBMaW5lc3RyaW5nIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggKGluIG1ldGVycykuXG4gKi9cbmZ1bmN0aW9uIGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpIHtcbiAgbGV0IGxlbmd0aCA9IDA7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpIC0gMTsgKytpKSB7XG4gICAgbGVuZ3RoICs9IGdldERpc3RhbmNlKGNvb3JkaW5hdGVzW2ldLCBjb29yZGluYXRlc1tpICsgMV0sIHJhZGl1cyk7XG4gIH1cbiAgcmV0dXJuIGxlbmd0aDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBsZW5ndGggb2YgYSBnZW9tZXRyeS4gIFRoaXMgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlXG4gKiBncmVhdCBjaXJjbGUgZGlzdGFuY2VzIGJldHdlZW4gY29vcmRpbmF0ZXMuICBGb3IgcG9seWdvbnMsIHRoZSBsZW5ndGggaXNcbiAqIHRoZSBzdW0gb2YgYWxsIHJpbmdzLiAgRm9yIHBvaW50cywgdGhlIGxlbmd0aCBpcyB6ZXJvLiAgRm9yIG11bHRpLXBhcnRcbiAqIGdlb21ldHJpZXMsIHRoZSBsZW5ndGggaXMgdGhlIHN1bSBvZiB0aGUgbGVuZ3RoIG9mIGVhY2ggcGFydC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEEgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge1NwaGVyZU1ldHJpY09wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zIGZvciB0aGVcbiAqIGxlbmd0aCBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiBZb3UgY2FuIGNoYW5nZSB0aGlzIGJ5IHByb3ZpZGluZyBhIGBwcm9qZWN0aW9uYCBvcHRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBzcGhlcmljYWwgbGVuZ3RoIChpbiBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoKGdlb21ldHJ5LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCByYWRpdXMgPSBvcHRpb25zLnJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgY29uc3QgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgY29uc3QgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgaWYgKHR5cGUgIT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nKSB7XG4gICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpLnRyYW5zZm9ybShwcm9qZWN0aW9uLCAnRVBTRzo0MzI2Jyk7XG4gIH1cbiAgbGV0IGxlbmd0aCA9IDA7XG4gIGxldCBjb29yZGluYXRlcywgY29vcmRzLCBpLCBpaSwgaiwgamo7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ1BvaW50JzpcbiAgICBjYXNlICdNdWx0aVBvaW50Jzoge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ0xpbmVTdHJpbmcnOlxuICAgIGNhc2UgJ0xpbmVhclJpbmcnOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgZ2VvbWV0cnlcbiAgICAgICkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGxlbmd0aCA9IGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XG4gICAgY2FzZSAnUG9seWdvbic6IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKFxuICAgICAgICBnZW9tZXRyeVxuICAgICAgKS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdNdWx0aVBvbHlnb24nOiB7XG4gICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgZ2VvbWV0cnlcbiAgICAgICkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBjb29yZHMgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgZm9yIChqID0gMCwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZHNbal0sIHJhZGl1cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBjYXNlICdHZW9tZXRyeUNvbGxlY3Rpb24nOiB7XG4gICAgICBjb25zdCBnZW9tZXRyaWVzID1cbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgICBnZW9tZXRyeVxuICAgICAgICApLmdldEdlb21ldHJpZXMoKTtcbiAgICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGgoZ2VvbWV0cmllc1tpXSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAnICsgdHlwZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBsZW5ndGg7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc3BoZXJpY2FsIGFyZWEgZm9yIGEgbGlzdCBvZiBjb29yZGluYXRlcy5cbiAqXG4gKiBbUmVmZXJlbmNlXShodHRwczovL3Rycy5qcGwubmFzYS5nb3YvaGFuZGxlLzIwMTQvNDA0MDkpXG4gKiBSb2JlcnQuIEcuIENoYW1iZXJsYWluIGFuZCBXaWxsaWFtIEguIER1cXVldHRlLCBcIlNvbWUgQWxnb3JpdGhtcyBmb3JcbiAqIFBvbHlnb25zIG9uIGEgU3BoZXJlXCIsIEpQTCBQdWJsaWNhdGlvbiAwNy0wMywgSmV0IFByb3B1bHNpb25cbiAqIExhYm9yYXRvcnksIFBhc2FkZW5hLCBDQSwgSnVuZSAyMDA3XG4gKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIExpc3Qgb2YgY29vcmRpbmF0ZXMgb2YgYSBsaW5lYXJcbiAqIHJpbmcuIElmIHRoZSByaW5nIGlzIG9yaWVudGVkIGNsb2Nrd2lzZSwgdGhlIGFyZWEgd2lsbCBiZSBwb3NpdGl2ZSxcbiAqIG90aGVyd2lzZSBpdCB3aWxsIGJlIG5lZ2F0aXZlLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgc3BoZXJlIHJhZGl1cy5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAoaW4gc3F1YXJlIG1ldGVycykuXG4gKi9cbmZ1bmN0aW9uIGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKSB7XG4gIGxldCBhcmVhID0gMDtcbiAgY29uc3QgbGVuID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICBsZXQgeDEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVswXTtcbiAgbGV0IHkxID0gY29vcmRpbmF0ZXNbbGVuIC0gMV1bMV07XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjb25zdCB4MiA9IGNvb3JkaW5hdGVzW2ldWzBdO1xuICAgIGNvbnN0IHkyID0gY29vcmRpbmF0ZXNbaV1bMV07XG4gICAgYXJlYSArPVxuICAgICAgdG9SYWRpYW5zKHgyIC0geDEpICpcbiAgICAgICgyICsgTWF0aC5zaW4odG9SYWRpYW5zKHkxKSkgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTIpKSk7XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICB9XG4gIHJldHVybiAoYXJlYSAqIHJhZGl1cyAqIHJhZGl1cykgLyAyLjA7XG59XG5cbi8qKlxuICogR2V0IHRoZSBzcGhlcmljYWwgYXJlYSBvZiBhIGdlb21ldHJ5LiAgVGhpcyBpcyB0aGUgYXJlYSAoaW4gbWV0ZXJzKSBhc3N1bWluZ1xuICogdGhhdCBwb2x5Z29uIGVkZ2VzIGFyZSBzZWdtZW50cyBvZiBncmVhdCBjaXJjbGVzIG9uIGEgc3BoZXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMgZm9yIHRoZSBhcmVhXG4gKiAgICAgY2FsY3VsYXRpb24uICBCeSBkZWZhdWx0LCBnZW9tZXRyaWVzIGFyZSBhc3N1bWVkIHRvIGJlIGluICdFUFNHOjM4NTcnLlxuICogICAgIFlvdSBjYW4gY2hhbmdlIHRoaXMgYnkgcHJvdmlkaW5nIGEgYHByb2plY3Rpb25gIG9wdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNwaGVyaWNhbCBhcmVhIChpbiBzcXVhcmUgbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFyZWEoZ2VvbWV0cnksIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIGNvbnN0IHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICBjb25zdCBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uIHx8ICdFUFNHOjM4NTcnO1xuICBjb25zdCB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICBpZiAodHlwZSAhPT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcbiAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCkudHJhbnNmb3JtKHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgfVxuICBsZXQgYXJlYSA9IDA7XG4gIGxldCBjb29yZGluYXRlcywgY29vcmRzLCBpLCBpaSwgaiwgamo7XG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ1BvaW50JzpcbiAgICBjYXNlICdNdWx0aVBvaW50JzpcbiAgICBjYXNlICdMaW5lU3RyaW5nJzpcbiAgICBjYXNlICdNdWx0aUxpbmVTdHJpbmcnOlxuICAgIGNhc2UgJ0xpbmVhclJpbmcnOiB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnUG9seWdvbic6IHtcbiAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoXG4gICAgICAgIGdlb21ldHJ5XG4gICAgICApLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICBhcmVhID0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzWzBdLCByYWRpdXMpKTtcbiAgICAgIGZvciAoaSA9IDEsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBhcmVhIC09IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKSk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnTXVsdGlQb2x5Z29uJzoge1xuICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoXG4gICAgICAgIGdlb21ldHJ5XG4gICAgICApLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGFyZWEgKz0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3Jkc1swXSwgcmFkaXVzKSk7XG4gICAgICAgIGZvciAoaiA9IDEsIGpqID0gY29vcmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICBhcmVhIC09IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZHNbal0sIHJhZGl1cykpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgY2FzZSAnR2VvbWV0cnlDb2xsZWN0aW9uJzoge1xuICAgICAgY29uc3QgZ2VvbWV0cmllcyA9XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoXG4gICAgICAgICAgZ2VvbWV0cnlcbiAgICAgICAgKS5nZXRHZW9tZXRyaWVzKCk7XG4gICAgICBmb3IgKGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBhcmVhICs9IGdldEFyZWEoZ2VvbWV0cmllc1tpXSwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiAnICsgdHlwZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBhcmVhO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgYXQgdGhlIGdpdmVuIGRpc3RhbmNlIGFuZCBiZWFyaW5nIGZyb20gYGMxYC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjMSBUaGUgb3JpZ2luIHBvaW50IChgW2xvbiwgbGF0XWAgaW4gZGVncmVlcykuXG4gKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgVGhlIGdyZWF0LWNpcmNsZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBvcmlnaW5cbiAqICAgICBwb2ludCBhbmQgdGhlIHRhcmdldCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiZWFyaW5nIFRoZSBiZWFyaW5nIChpbiByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcmFkaXVzXSBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuICBEZWZhdWx0cyB0byB0aGUgRWFydGgnc1xuICogICAgIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIHRhcmdldCBwb2ludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9mZnNldChjMSwgZGlzdGFuY2UsIGJlYXJpbmcsIHJhZGl1cykge1xuICByYWRpdXMgPSByYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gIGNvbnN0IGxhdDEgPSB0b1JhZGlhbnMoYzFbMV0pO1xuICBjb25zdCBsb24xID0gdG9SYWRpYW5zKGMxWzBdKTtcbiAgY29uc3QgZEJ5UiA9IGRpc3RhbmNlIC8gcmFkaXVzO1xuICBjb25zdCBsYXQgPSBNYXRoLmFzaW4oXG4gICAgTWF0aC5zaW4obGF0MSkgKiBNYXRoLmNvcyhkQnlSKSArXG4gICAgICBNYXRoLmNvcyhsYXQxKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MoYmVhcmluZylcbiAgKTtcbiAgY29uc3QgbG9uID1cbiAgICBsb24xICtcbiAgICBNYXRoLmF0YW4yKFxuICAgICAgTWF0aC5zaW4oYmVhcmluZykgKiBNYXRoLnNpbihkQnlSKSAqIE1hdGguY29zKGxhdDEpLFxuICAgICAgTWF0aC5jb3MoZEJ5UikgLSBNYXRoLnNpbihsYXQxKSAqIE1hdGguc2luKGxhdClcbiAgICApO1xuICByZXR1cm4gW3RvRGVncmVlcyhsb24pLCB0b0RlZ3JlZXMobGF0KV07XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvY29uc29sZVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYgeydpbmZvJ3wnd2Fybid8J2Vycm9yJ3wnbm9uZSd9IExldmVsXG4gKi9cblxuLyoqXG4gKiBAdHlwZSB7T2JqZWN0PExldmVsLCBudW1iZXI+fVxuICovXG5jb25zdCBsZXZlbHMgPSB7XG4gIGluZm86IDEsXG4gIHdhcm46IDIsXG4gIGVycm9yOiAzLFxuICBub25lOiA0LFxufTtcblxuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5sZXQgbGV2ZWwgPSBsZXZlbHMuaW5mbztcblxuLyoqXG4gKiBTZXQgdGhlIGxvZ2dpbmcgbGV2ZWwuICBCeSBkZWZhdWx0LCB0aGUgbGV2ZWwgaXMgc2V0IHRvICdpbmZvJyBhbmQgYWxsXG4gKiBtZXNzYWdlcyB3aWxsIGJlIGxvZ2dlZC4gIFNldCB0byAnd2FybicgdG8gb25seSBkaXNwbGF5IHdhcm5pbmdzIGFuZCBlcnJvcnMuXG4gKiBTZXQgdG8gJ2Vycm9yJyB0byBvbmx5IGRpc3BsYXkgZXJyb3JzLiAgU2V0IHRvICdub25lJyB0byBzaWxlbmNlIGFsbCBtZXNzYWdlcy5cbiAqXG4gKiBAcGFyYW0ge0xldmVsfSBsIFRoZSBuZXcgbGV2ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRMZXZlbChsKSB7XG4gIGxldmVsID0gbGV2ZWxzW2xdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nKC4uLmFyZ3MpIHtcbiAgaWYgKGxldmVsID4gbGV2ZWxzLmluZm8pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc29sZS5sb2coLi4uYXJncyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gd2FybiguLi5hcmdzKSB7XG4gIGlmIChsZXZlbCA+IGxldmVscy53YXJuKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUud2FybiguLi5hcmdzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlcnJvciguLi5hcmdzKSB7XG4gIGlmIChsZXZlbCA+IGxldmVscy5lcnJvcikge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLmVycm9yKC4uLmFyZ3MpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qXG4gKi9cblxuLyoqXG4gKiBUaGUgb2wvcHJvaiBtb2R1bGUgc3RvcmVzOlxuICogKiBhIGxpc3Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn1cbiAqIG9iamVjdHMsIG9uZSBmb3IgZWFjaCBwcm9qZWN0aW9uIHN1cHBvcnRlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqICogYSBsaXN0IG9mIHRyYW5zZm9ybSBmdW5jdGlvbnMgbmVlZGVkIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgaW4gb25lIHByb2plY3Rpb25cbiAqIGludG8gYW5vdGhlci5cbiAqXG4gKiBUaGUgc3RhdGljIGZ1bmN0aW9ucyBhcmUgdGhlIG1ldGhvZHMgdXNlZCB0byBtYWludGFpbiB0aGVzZS5cbiAqIEVhY2ggdHJhbnNmb3JtIGZ1bmN0aW9uIGNhbiBoYW5kbGUgbm90IG9ubHkgc2ltcGxlIGNvb3JkaW5hdGUgcGFpcnMsIGJ1dCBhbHNvXG4gKiBsYXJnZSBhcnJheXMgb2YgY29vcmRpbmF0ZXMgc3VjaCBhcyB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBXaGVuIGxvYWRlZCwgdGhlIGxpYnJhcnkgYWRkcyBwcm9qZWN0aW9uIG9iamVjdHMgZm9yIEVQU0c6NDMyNiAoV0dTODRcbiAqIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMpIGFuZCBFUFNHOjM4NTcgKFdlYiBvciBTcGhlcmljYWwgTWVyY2F0b3IsIGFzIHVzZWRcbiAqIGZvciBleGFtcGxlIGJ5IEJpbmcgTWFwcyBvciBPcGVuU3RyZWV0TWFwKSwgdG9nZXRoZXIgd2l0aCB0aGUgcmVsZXZhbnRcbiAqIHRyYW5zZm9ybSBmdW5jdGlvbnMuXG4gKlxuICogQWRkaXRpb25hbCB0cmFuc2Zvcm1zIG1heSBiZSBhZGRlZCBieSB1c2luZyB0aGUgaHR0cDovL3Byb2o0anMub3JnL1xuICogbGlicmFyeSAodmVyc2lvbiAyLjIgb3IgbGF0ZXIpLiBZb3UgY2FuIHVzZSB0aGUgZnVsbCBidWlsZCBzdXBwbGllZCBieVxuICogUHJvajRqcywgb3IgY3JlYXRlIGEgY3VzdG9tIGJ1aWxkIHRvIHN1cHBvcnQgdGhvc2UgcHJvamVjdGlvbnMgeW91IG5lZWQ7IHNlZVxuICogdGhlIFByb2o0anMgd2Vic2l0ZSBmb3IgaG93IHRvIGRvIHRoaXMuIFlvdSBhbHNvIG5lZWQgdGhlIFByb2o0anMgZGVmaW5pdGlvbnNcbiAqIGZvciB0aGUgcmVxdWlyZWQgcHJvamVjdGlvbnMuIFRoZXNlIGRlZmluaXRpb25zIGNhbiBiZSBvYnRhaW5lZCBmcm9tXG4gKiBodHRwczovL2Vwc2cuaW8vLCBhbmQgYXJlIGEgSlMgZnVuY3Rpb24sIHNvIGNhbiBiZSBsb2FkZWQgaW4gYSBzY3JpcHRcbiAqIHRhZyAoYXMgaW4gdGhlIGV4YW1wbGVzKSBvciBwYXN0ZWQgaW50byB5b3VyIGFwcGxpY2F0aW9uLlxuICpcbiAqIEFmdGVyIGFsbCByZXF1aXJlZCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGFyZSBhZGRlZCB0byBwcm9qNCdzIHJlZ2lzdHJ5IChieVxuICogdXNpbmcgYHByb2o0LmRlZnMoKWApLCBzaW1wbHkgY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBmcm9tIHRoZSBgb2wvcHJvai9wcm9qNGBcbiAqIHBhY2thZ2UuIEV4aXN0aW5nIHRyYW5zZm9ybXMgYXJlIG5vdCBjaGFuZ2VkIGJ5IHRoaXMgZnVuY3Rpb24uIFNlZVxuICogZXhhbXBsZXMvd21zLWltYWdlLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogQWRkaXRpb25hbCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGNhbiBiZSByZWdpc3RlcmVkIHdpdGggYHByb2o0LmRlZnMoKWAgYW55XG4gKiB0aW1lLiBKdXN0IG1ha2Ugc3VyZSB0byBjYWxsIGByZWdpc3Rlcihwcm9qNClgIGFnYWluOyBmb3IgZXhhbXBsZSwgd2l0aCB1c2VyLXN1cHBsaWVkIGRhdGEgd2hlcmUgeW91IGRvbid0XG4gKiBrbm93IGluIGFkdmFuY2Ugd2hhdCBwcm9qZWN0aW9ucyBhcmUgbmVlZGVkLCB5b3UgY2FuIGluaXRpYWxseSBsb2FkIG1pbmltYWxcbiAqIHN1cHBvcnQgYW5kIHRoZW4gbG9hZCB3aGljaGV2ZXIgYXJlIHJlcXVlc3RlZC5cbiAqXG4gKiBOb3RlIHRoYXQgUHJvajRqcyBkb2VzIG5vdCBzdXBwb3J0IHByb2plY3Rpb24gZXh0ZW50cy4gSWYgeW91IHdhbnQgdG8gYWRkXG4gKiBvbmUgZm9yIGNyZWF0aW5nIGRlZmF1bHQgdGlsZSBncmlkcywgeW91IGNhbiBhZGQgaXQgYWZ0ZXIgdGhlIFByb2plY3Rpb25cbiAqIG9iamVjdCBoYXMgYmVlbiBjcmVhdGVkIHdpdGggYHNldEV4dGVudGAsIGZvciBleGFtcGxlLFxuICogYGdldCgnRVBTRzoxMjM0Jykuc2V0RXh0ZW50KGV4dGVudClgLlxuICpcbiAqIEluIGFkZGl0aW9uIHRvIFByb2o0anMgc3VwcG9ydCwgYW55IHRyYW5zZm9ybSBmdW5jdGlvbnMgY2FuIGJlIGFkZGVkIHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFRvIHVzZSB0aGlzLCB5b3UgbXVzdCBmaXJzdCBjcmVhdGVcbiAqIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0IGZvciB0aGUgbmV3IHByb2plY3Rpb24gYW5kIGFkZCBpdCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkUHJvamVjdGlvbn0uIFlvdSBjYW4gdGhlbiBhZGQgdGhlIGZvcndhcmQgYW5kIGludmVyc2VcbiAqIGZ1bmN0aW9ucyB3aXRoIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFNlZVxuICogZXhhbXBsZXMvd21zLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogTm90ZSB0aGF0IGlmIG5vIHRyYW5zZm9ybXMgYXJlIG5lZWRlZCBhbmQgeW91IG9ubHkgbmVlZCB0byBkZWZpbmUgdGhlXG4gKiBwcm9qZWN0aW9uLCBqdXN0IGFkZCBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRQcm9qZWN0aW9ufS4gU2VlIGV4YW1wbGVzL3dtcy1uby1wcm9qIGZvciBhbiBleGFtcGxlIG9mXG4gKiB0aGlzLlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL3Byb2ovUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQge1xuICBQUk9KRUNUSU9OUyBhcyBFUFNHMzg1N19QUk9KRUNUSU9OUyxcbiAgZnJvbUVQU0c0MzI2LFxuICB0b0VQU0c0MzI2LFxufSBmcm9tICcuL3Byb2ovZXBzZzM4NTcuanMnO1xuaW1wb3J0IHtQUk9KRUNUSU9OUyBhcyBFUFNHNDMyNl9QUk9KRUNUSU9OU30gZnJvbSAnLi9wcm9qL2Vwc2c0MzI2LmpzJztcbmltcG9ydCB7TUVURVJTX1BFUl9VTklUfSBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHtcbiAgYWRkIGFzIGFkZFByb2osXG4gIGNsZWFyIGFzIGNsZWFyUHJvaixcbiAgZ2V0IGFzIGdldFByb2osXG59IGZyb20gJy4vcHJvai9wcm9qZWN0aW9ucy5qcyc7XG5pbXBvcnQge1xuICBhZGQgYXMgYWRkVHJhbnNmb3JtRnVuYyxcbiAgY2xlYXIgYXMgY2xlYXJUcmFuc2Zvcm1GdW5jcyxcbiAgZ2V0IGFzIGdldFRyYW5zZm9ybUZ1bmMsXG59IGZyb20gJy4vcHJvai90cmFuc2Zvcm1zLmpzJztcbmltcG9ydCB7YXBwbHlUcmFuc2Zvcm0sIGdldFdpZHRofSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQge2NsYW1wLCBtb2R1bG99IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQge2VxdWFscywgZ2V0V29ybGRzQXdheX0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7Z2V0RGlzdGFuY2V9IGZyb20gJy4vc3BoZXJlLmpzJztcbmltcG9ydCB7d2Fybn0gZnJvbSAnLi9jb25zb2xlLmpzJztcblxuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0sIFNSUyBpZGVudGlmaWVyXG4gKiBzdHJpbmcgb3IgdW5kZWZpbmVkLlxuICogQHR5cGVkZWYge1Byb2plY3Rpb258c3RyaW5nfHVuZGVmaW5lZH0gUHJvamVjdGlvbkxpa2VcbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJyYXkgb2YgaW5wdXQgY29vcmRpbmF0ZSB2YWx1ZXMsIGFuIG9wdGlvbmFsXG4gKiBvdXRwdXQgYXJyYXksIGFuZCBhbiBvcHRpb25hbCBkaW1lbnNpb24gKGRlZmF1bHQgc2hvdWxkIGJlIDIpLiAgVGhlIGZ1bmN0aW9uXG4gKiB0cmFuc2Zvcm1zIHRoZSBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgcG9wdWxhdGVzIHRoZSBvdXRwdXQgYXJyYXksIGFuZFxuICogcmV0dXJucyB0aGUgb3V0cHV0IGFycmF5LlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihBcnJheTxudW1iZXI+LCBBcnJheTxudW1iZXI+PSwgbnVtYmVyPSk6IEFycmF5PG51bWJlcj59IFRyYW5zZm9ybUZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuZXhwb3J0IHtNRVRFUlNfUEVSX1VOSVR9O1xuXG5leHBvcnQge1Byb2plY3Rpb259O1xuXG5sZXQgc2hvd0Nvb3JkaW5hdGVXYXJuaW5nID0gdHJ1ZTtcblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtkaXNhYmxlID0gdHJ1ZV0gRGlzYWJsZSBjb25zb2xlIGluZm8gYWJvdXQgYHVzZUdlb2dyYXBoaWMoKWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGVDb29yZGluYXRlV2FybmluZyhkaXNhYmxlKSB7XG4gIGNvbnN0IGhpZGUgPSBkaXNhYmxlID09PSB1bmRlZmluZWQgPyB0cnVlIDogZGlzYWJsZTtcbiAgc2hvd0Nvb3JkaW5hdGVXYXJuaW5nID0gIWhpZGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgY29vcmRpbmF0ZSBhcnJheSAobmV3IGFycmF5LCBzYW1lIGNvb3JkaW5hdGVcbiAqICAgICB2YWx1ZXMpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVUcmFuc2Zvcm0oaW5wdXQsIG91dHB1dCkge1xuICBpZiAob3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBvdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICB9XG4gICAgb3V0cHV0ID0gb3V0cHV0O1xuICB9IGVsc2Uge1xuICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gIH1cbiAgcmV0dXJuIG91dHB1dDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGNvb3JkaW5hdGUgYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IElucHV0IGNvb3JkaW5hdGUgYXJyYXkgKHNhbWUgYXJyYXkgYXMgaW5wdXQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHlUcmFuc2Zvcm0oaW5wdXQsIG91dHB1dCkge1xuICBpZiAob3V0cHV0ICE9PSB1bmRlZmluZWQgJiYgaW5wdXQgIT09IG91dHB1dCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIG91dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgIH1cbiAgICBpbnB1dCA9IG91dHB1dDtcbiAgfVxuICByZXR1cm4gaW5wdXQ7XG59XG5cbi8qKlxuICogQWRkIGEgUHJvamVjdGlvbiBvYmplY3QgdG8gdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIHByb2plY3Rpb25zIHRoYXQgY2FuIGJlXG4gKiBsb29rZWQgdXAgYnkgdGhlaXIgY29kZS5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24gUHJvamVjdGlvbiBpbnN0YW5jZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICBhZGRQcm9qKHByb2plY3Rpb24uZ2V0Q29kZSgpLCBwcm9qZWN0aW9uKTtcbiAgYWRkVHJhbnNmb3JtRnVuYyhwcm9qZWN0aW9uLCBwcm9qZWN0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICBwcm9qZWN0aW9ucy5mb3JFYWNoKGFkZFByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIEZldGNoZXMgYSBQcm9qZWN0aW9uIG9iamVjdCBmb3IgdGhlIGNvZGUgc3BlY2lmaWVkLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25MaWtlIEVpdGhlciBhIGNvZGUgc3RyaW5nIHdoaWNoIGlzXG4gKiAgICAgYSBjb21iaW5hdGlvbiBvZiBhdXRob3JpdHkgYW5kIGlkZW50aWZpZXIgc3VjaCBhcyBcIkVQU0c6NDMyNlwiLCBvciBhblxuICogICAgIGV4aXN0aW5nIHByb2plY3Rpb24gb2JqZWN0LCBvciB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufG51bGx9IFByb2plY3Rpb24gb2JqZWN0LCBvciBudWxsIGlmIG5vdCBpbiBsaXN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHByb2plY3Rpb25MaWtlKSB7XG4gIHJldHVybiB0eXBlb2YgcHJvamVjdGlvbkxpa2UgPT09ICdzdHJpbmcnXG4gICAgPyBnZXRQcm9qKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAocHJvamVjdGlvbkxpa2UpKVxuICAgIDogLyoqIEB0eXBlIHtQcm9qZWN0aW9ufSAqLyAocHJvamVjdGlvbkxpa2UpIHx8IG51bGw7XG59XG5cbi8qKlxuICogR2V0IHRoZSByZXNvbHV0aW9uIG9mIHRoZSBwb2ludCBpbiBkZWdyZWVzIG9yIGRpc3RhbmNlIHVuaXRzLlxuICogRm9yIHByb2plY3Rpb25zIHdpdGggZGVncmVlcyBhcyB0aGUgdW5pdCB0aGlzIHdpbGwgc2ltcGx5IHJldHVybiB0aGVcbiAqIHByb3ZpZGVkIHJlc29sdXRpb24uIEZvciBvdGhlciBwcm9qZWN0aW9ucyB0aGUgcG9pbnQgcmVzb2x1dGlvbiBpc1xuICogYnkgZGVmYXVsdCBlc3RpbWF0ZWQgYnkgdHJhbnNmb3JtaW5nIHRoZSBgcG9pbnRgIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAqIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSxcbiAqIGFuZCB0YWtpbmcgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gKiBBIGN1c3RvbSBmdW5jdGlvbiBjYW4gYmUgcHJvdmlkZWQgZm9yIGEgc3BlY2lmaWMgcHJvamVjdGlvbiwgZWl0aGVyXG4gKiBieSBzZXR0aW5nIHRoZSBgZ2V0UG9pbnRSZXNvbHV0aW9uYCBvcHRpb24gaW4gdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBjb25zdHJ1Y3RvciBvciBieSB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbiNzZXRHZXRQb2ludFJlc29sdXRpb259IHRvIGNoYW5nZSBhbiBleGlzdGluZ1xuICogcHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gTm9taW5hbCByZXNvbHV0aW9uIGluIHByb2plY3Rpb24gdW5pdHMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludCB0byBmaW5kIGFkanVzdGVkIHJlc29sdXRpb24gYXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Vbml0cy5qc1wiKS5Vbml0c30gW3VuaXRzXSBVbml0cyB0byBnZXQgdGhlIHBvaW50IHJlc29sdXRpb24gaW4uXG4gKiBEZWZhdWx0IGlzIHRoZSBwcm9qZWN0aW9uJ3MgdW5pdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBvaW50IHJlc29sdXRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludFJlc29sdXRpb24ocHJvamVjdGlvbiwgcmVzb2x1dGlvbiwgcG9pbnQsIHVuaXRzKSB7XG4gIHByb2plY3Rpb24gPSBnZXQocHJvamVjdGlvbik7XG4gIGxldCBwb2ludFJlc29sdXRpb247XG4gIGNvbnN0IGdldHRlciA9IHByb2plY3Rpb24uZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYygpO1xuICBpZiAoZ2V0dGVyKSB7XG4gICAgcG9pbnRSZXNvbHV0aW9uID0gZ2V0dGVyKHJlc29sdXRpb24sIHBvaW50KTtcbiAgICBpZiAodW5pdHMgJiYgdW5pdHMgIT09IHByb2plY3Rpb24uZ2V0VW5pdHMoKSkge1xuICAgICAgY29uc3QgbWV0ZXJzUGVyVW5pdCA9IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgaWYgKG1ldGVyc1BlclVuaXQpIHtcbiAgICAgICAgcG9pbnRSZXNvbHV0aW9uID1cbiAgICAgICAgICAocG9pbnRSZXNvbHV0aW9uICogbWV0ZXJzUGVyVW5pdCkgLyBNRVRFUlNfUEVSX1VOSVRbdW5pdHNdO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcm9qVW5pdHMgPSBwcm9qZWN0aW9uLmdldFVuaXRzKCk7XG4gICAgaWYgKChwcm9qVW5pdHMgPT0gJ2RlZ3JlZXMnICYmICF1bml0cykgfHwgdW5pdHMgPT0gJ2RlZ3JlZXMnKSB7XG4gICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFc3RpbWF0ZSBwb2ludCByZXNvbHV0aW9uIGJ5IHRyYW5zZm9ybWluZyB0aGUgY2VudGVyIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAgICAgIC8vIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSwgYW5kIHRha2luZyB0aGVcbiAgICAgIC8vIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICBjb25zdCB0b0VQU0c0MzI2ID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKFxuICAgICAgICBwcm9qZWN0aW9uLFxuICAgICAgICBnZXQoJ0VQU0c6NDMyNicpXG4gICAgICApO1xuICAgICAgaWYgKHRvRVBTRzQzMjYgPT09IGlkZW50aXR5VHJhbnNmb3JtICYmIHByb2pVbml0cyAhPT0gJ2RlZ3JlZXMnKSB7XG4gICAgICAgIC8vIG5vIHRyYW5zZm9ybSBpcyBhdmFpbGFibGVcbiAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbiAqIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHZlcnRpY2VzID0gW1xuICAgICAgICAgIHBvaW50WzBdIC0gcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgcG9pbnRbMV0sXG4gICAgICAgICAgcG9pbnRbMF0gKyByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICBwb2ludFsxXSxcbiAgICAgICAgICBwb2ludFswXSxcbiAgICAgICAgICBwb2ludFsxXSAtIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgIHBvaW50WzBdLFxuICAgICAgICAgIHBvaW50WzFdICsgcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgIF07XG4gICAgICAgIHZlcnRpY2VzID0gdG9FUFNHNDMyNih2ZXJ0aWNlcywgdmVydGljZXMsIDIpO1xuICAgICAgICBjb25zdCB3aWR0aCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDAsIDIpLCB2ZXJ0aWNlcy5zbGljZSgyLCA0KSk7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDQsIDYpLCB2ZXJ0aWNlcy5zbGljZSg2LCA4KSk7XG4gICAgICAgIHBvaW50UmVzb2x1dGlvbiA9ICh3aWR0aCArIGhlaWdodCkgLyAyO1xuICAgICAgfVxuICAgICAgY29uc3QgbWV0ZXJzUGVyVW5pdCA9IHVuaXRzXG4gICAgICAgID8gTUVURVJTX1BFUl9VTklUW3VuaXRzXVxuICAgICAgICA6IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgaWYgKG1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwb2ludFJlc29sdXRpb24gLz0gbWV0ZXJzUGVyVW5pdDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50UmVzb2x1dGlvbjtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMuIFRob3NlIGFsbG93XG4gKiB0byB0cmFuc2Zvcm0gYmV0d2VlbiBwcm9qZWN0aW9ucyB3aXRoIGVxdWFsIG1lYW5pbmcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMocHJvamVjdGlvbnMpIHtcbiAgYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpO1xuICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgaWYgKHNvdXJjZSAhPT0gZGVzdGluYXRpb24pIHtcbiAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBhbnkgcHJvamVjdGlvblxuICogaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMxIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMyIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gZm9yd2FyZFRyYW5zZm9ybSBUcmFuc2Zvcm1hdGlvbiBmcm9tIGFueVxuICogICBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24yLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gaW52ZXJzZVRyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSBhbnkgcHJvamVjdGlvblxuICogICBpbiBwcm9qZWN0aW9uMiB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMS4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50VHJhbnNmb3JtcyhcbiAgcHJvamVjdGlvbnMxLFxuICBwcm9qZWN0aW9uczIsXG4gIGZvcndhcmRUcmFuc2Zvcm0sXG4gIGludmVyc2VUcmFuc2Zvcm1cbikge1xuICBwcm9qZWN0aW9uczEuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjEpIHtcbiAgICBwcm9qZWN0aW9uczIuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjIpIHtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yLCBmb3J3YXJkVHJhbnNmb3JtKTtcbiAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjIsIHByb2plY3Rpb24xLCBpbnZlcnNlVHJhbnNmb3JtKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogQ2xlYXIgYWxsIGNhY2hlZCBwcm9qZWN0aW9ucyBhbmQgdHJhbnNmb3Jtcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyQWxsUHJvamVjdGlvbnMoKSB7XG4gIGNsZWFyUHJvaigpO1xuICBjbGVhclRyYW5zZm9ybUZ1bmNzKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0Q29kZSBEZWZhdWx0IGNvZGUuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbihwcm9qZWN0aW9uLCBkZWZhdWx0Q29kZSkge1xuICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZ2V0KGRlZmF1bHRDb2RlKTtcbiAgfVxuICBpZiAodHlwZW9mIHByb2plY3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGdldChwcm9qZWN0aW9uKTtcbiAgfVxuICByZXR1cm4gLyoqIEB0eXBlIHtQcm9qZWN0aW9ufSAqLyAocHJvamVjdGlvbik7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBtb2R1bGU6b2wvcHJvan5UcmFuc2Zvcm1GdW5jdGlvbn0gZnJvbSBhIHNpbXBsZSAyRCBjb29yZGluYXRlIHRyYW5zZm9ybVxuICogZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkVHJhbnNmb3JtIENvb3JkaW5hdGVcbiAqICAgICB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oY29vcmRUcmFuc2Zvcm0pIHtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW291dHB1dF0gT3V0cHV0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGltZW5zaW9uXSBEaW1lbnNpb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChpbnB1dCwgb3V0cHV0LCBkaW1lbnNpb24pIHtcbiAgICAgIGNvbnN0IGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgIGRpbWVuc2lvbiA9IGRpbWVuc2lvbiAhPT0gdW5kZWZpbmVkID8gZGltZW5zaW9uIDogMjtcbiAgICAgIG91dHB1dCA9IG91dHB1dCAhPT0gdW5kZWZpbmVkID8gb3V0cHV0IDogbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgY29uc3QgcG9pbnQgPSBjb29yZFRyYW5zZm9ybShpbnB1dC5zbGljZShpLCBpICsgZGltZW5zaW9uKSk7XG4gICAgICAgIGNvbnN0IHBvaW50TGVuZ3RoID0gcG9pbnQubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBqID0gMCwgamogPSBkaW1lbnNpb247IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgb3V0cHV0W2kgKyBqXSA9IGogPj0gcG9pbnRMZW5ndGggPyBpbnB1dFtpICsgal0gOiBwb2ludFtqXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGJldHdlZW4gdGhlXG4gKiBzb3VyY2UgcHJvamVjdGlvbiBhbmQgdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGUgZm9yd2FyZCBhbmQgaW52ZXJzZSBmdW5jdGlvbnMgY29udmVydCBjb29yZGluYXRlIHBhaXJzOyB0aGlzIGZ1bmN0aW9uXG4gKiBjb252ZXJ0cyB0aGVzZSBpbnRvIHRoZSBmdW5jdGlvbnMgdXNlZCBpbnRlcm5hbGx5IHdoaWNoIGFsc28gaGFuZGxlXG4gKiBleHRlbnRzIGFuZCBjb29yZGluYXRlIGFycmF5cy5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBmb3J3YXJkIFRoZSBmb3J3YXJkIHRyYW5zZm9ybVxuICogICAgIGZ1bmN0aW9uICh0aGF0IGlzLCBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb25cbiAqICAgICBwcm9qZWN0aW9uKSB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zXG4gKiAgICAgdGhlIHRyYW5zZm9ybWVkIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gaW52ZXJzZSBUaGUgaW52ZXJzZSB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbiB0byB0aGUgc291cmNlXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uIElmIHRoZSB0cmFuc2Zvcm0gZnVuY3Rpb24gY2FuIG9ubHlcbiAqICAgICB0cmFuc2Zvcm0gbGVzcyBkaW1lbnNpb25zIHRoYW4gdGhlIGlucHV0IGNvb3JkaW5hdGUsIGl0IGlzIHN1cHBvc2VlZCB0byByZXR1cm4gYSBjb29yZGluYXRlXG4gKiAgICAgd2l0aCBvbmx5IHRoZSBsZW5ndGggaXQgY2FuIHRyYW5zZm9ybS4gVGhlIG90aGVyIGRpbWVuc2lvbnMgd2lsbCBiZSB0YWtlbiB1bmNoYW5nZWQgZnJvbSB0aGVcbiAqICAgICBzb3VyY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb29yZGluYXRlVHJhbnNmb3Jtcyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBmb3J3YXJkLCBpbnZlcnNlKSB7XG4gIGNvbnN0IHNvdXJjZVByb2ogPSBnZXQoc291cmNlKTtcbiAgY29uc3QgZGVzdFByb2ogPSBnZXQoZGVzdGluYXRpb24pO1xuICBhZGRUcmFuc2Zvcm1GdW5jKFxuICAgIHNvdXJjZVByb2osXG4gICAgZGVzdFByb2osXG4gICAgY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oZm9yd2FyZClcbiAgKTtcbiAgYWRkVHJhbnNmb3JtRnVuYyhcbiAgICBkZXN0UHJvaixcbiAgICBzb3VyY2VQcm9qLFxuICAgIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGludmVyc2UpXG4gICk7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgZnJvbSBsb25naXR1ZGUvbGF0aXR1ZGUgdG8gYSBkaWZmZXJlbnQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZSBhcyBsb25naXR1ZGUgYW5kIGxhdGl0dWRlLCBpLmUuXG4gKiAgICAgYW4gYXJyYXkgd2l0aCBsb25naXR1ZGUgYXMgMXN0IGFuZCBsYXRpdHVkZSBhcyAybmQgZWxlbWVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBUYXJnZXQgcHJvamVjdGlvbi4gVGhlXG4gKiAgICAgZGVmYXVsdCBpcyBXZWIgTWVyY2F0b3IsIGkuZS4gJ0VQU0c6Mzg1NycuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZSBwcm9qZWN0ZWQgdG8gdGhlIHRhcmdldCBwcm9qZWN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUxvbkxhdChjb29yZGluYXRlLCBwcm9qZWN0aW9uKSB7XG4gIGRpc2FibGVDb29yZGluYXRlV2FybmluZygpO1xuICByZXR1cm4gdHJhbnNmb3JtKFxuICAgIGNvb3JkaW5hdGUsXG4gICAgJ0VQU0c6NDMyNicsXG4gICAgcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnXG4gICk7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgdG8gbG9uZ2l0dWRlL2xhdGl0dWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBQcm9qZWN0ZWQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uIG9mIHRoZSBjb29yZGluYXRlLlxuICogICAgIFRoZSBkZWZhdWx0IGlzIFdlYiBNZXJjYXRvciwgaS5lLiAnRVBTRzozODU3Jy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlIGFzIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUsIGkuZS4gYW4gYXJyYXlcbiAqICAgICB3aXRoIGxvbmdpdHVkZSBhcyAxc3QgYW5kIGxhdGl0dWRlIGFzIDJuZCBlbGVtZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Mb25MYXQoY29vcmRpbmF0ZSwgcHJvamVjdGlvbikge1xuICBjb25zdCBsb25MYXQgPSB0cmFuc2Zvcm0oXG4gICAgY29vcmRpbmF0ZSxcbiAgICBwcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBwcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycsXG4gICAgJ0VQU0c6NDMyNidcbiAgKTtcbiAgY29uc3QgbG9uID0gbG9uTGF0WzBdO1xuICBpZiAobG9uIDwgLTE4MCB8fCBsb24gPiAxODApIHtcbiAgICBsb25MYXRbMF0gPSBtb2R1bG8obG9uICsgMTgwLCAzNjApIC0gMTgwO1xuICB9XG4gIHJldHVybiBsb25MYXQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHR3byBwcm9qZWN0aW9ucyBhcmUgdGhlIHNhbWUsIHRoYXQgaXMgZXZlcnkgY29vcmRpbmF0ZSBpbiBvbmVcbiAqIHByb2plY3Rpb24gZG9lcyByZXByZXNlbnQgdGhlIHNhbWUgZ2VvZ3JhcGhpYyBwb2ludCBhcyB0aGUgc2FtZSBjb29yZGluYXRlIGluXG4gKiB0aGUgb3RoZXIgcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24xIFByb2plY3Rpb24gMS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjIgUHJvamVjdGlvbiAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gRXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWl2YWxlbnQocHJvamVjdGlvbjEsIHByb2plY3Rpb24yKSB7XG4gIGlmIChwcm9qZWN0aW9uMSA9PT0gcHJvamVjdGlvbjIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBjb25zdCBlcXVhbFVuaXRzID0gcHJvamVjdGlvbjEuZ2V0VW5pdHMoKSA9PT0gcHJvamVjdGlvbjIuZ2V0VW5pdHMoKTtcbiAgaWYgKHByb2plY3Rpb24xLmdldENvZGUoKSA9PT0gcHJvamVjdGlvbjIuZ2V0Q29kZSgpKSB7XG4gICAgcmV0dXJuIGVxdWFsVW5pdHM7XG4gIH1cbiAgY29uc3QgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpO1xuICByZXR1cm4gdHJhbnNmb3JtRnVuYyA9PT0gY2xvbmVUcmFuc2Zvcm0gJiYgZXF1YWxVbml0cztcbn1cblxuLyoqXG4gKiBTZWFyY2hlcyBpbiB0aGUgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIGZvciB0aGUgZnVuY3Rpb24gZm9yIGNvbnZlcnRpbmdcbiAqIGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvamVjdGlvbiBTb3VyY2UgUHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBQcm9qZWN0aW9uXG4gKiAgICAgb2JqZWN0LlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhcbiAgc291cmNlUHJvamVjdGlvbixcbiAgZGVzdGluYXRpb25Qcm9qZWN0aW9uXG4pIHtcbiAgY29uc3Qgc291cmNlQ29kZSA9IHNvdXJjZVByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICBjb25zdCBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvblByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICBsZXQgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZ1bmMoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKTtcbiAgaWYgKCF0cmFuc2Zvcm1GdW5jKSB7XG4gICAgdHJhbnNmb3JtRnVuYyA9IGlkZW50aXR5VHJhbnNmb3JtO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1GdW5jO1xufVxuXG4vKipcbiAqIEdpdmVuIHRoZSBwcm9qZWN0aW9uLWxpa2Ugb2JqZWN0cywgc2VhcmNoZXMgZm9yIGEgdHJhbnNmb3JtYXRpb25cbiAqIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBjb29yZGluYXRlcyBhcnJheSBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGVcbiAqIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gIGNvbnN0IHNvdXJjZVByb2plY3Rpb24gPSBnZXQoc291cmNlKTtcbiAgY29uc3QgZGVzdGluYXRpb25Qcm9qZWN0aW9uID0gZ2V0KGRlc3RpbmF0aW9uKTtcbiAgcmV0dXJuIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gc291cmNlIHByb2plY3Rpb24gdG8gZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIFRoaXMgcmV0dXJucyBhIG5ldyBjb29yZGluYXRlIChhbmQgZG9lcyBub3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCkuXG4gKlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvcHJvai50cmFuc2Zvcm1FeHRlbnR9IGZvciBleHRlbnQgdHJhbnNmb3JtYXRpb24uXG4gKiBTZWUgdGhlIHRyYW5zZm9ybSBtZXRob2Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5fkdlb21ldHJ5fSBhbmQgaXRzXG4gKiBzdWJjbGFzc2VzIGZvciBnZW9tZXRyeSB0cmFuc2Zvcm1zLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi1saWtlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlLCBkZXN0aW5hdGlvbikge1xuICBjb25zdCB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pO1xuICByZXR1cm4gdHJhbnNmb3JtRnVuYyhjb29yZGluYXRlLCB1bmRlZmluZWQsIGNvb3JkaW5hdGUubGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGV4dGVudCBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uICBUaGlzXG4gKiByZXR1cm5zIGEgbmV3IGV4dGVudCAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudCB0byB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RvcHNdIE51bWJlciBvZiBzdG9wcyBwZXIgc2lkZSB1c2VkIGZvciB0aGUgdHJhbnNmb3JtLlxuICogQnkgZGVmYXVsdCBvbmx5IHRoZSBjb3JuZXJzIGFyZSB1c2VkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgdHJhbnNmb3JtZWQgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgc291cmNlLCBkZXN0aW5hdGlvbiwgc3RvcHMpIHtcbiAgY29uc3QgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgcmV0dXJuIGFwcGx5VHJhbnNmb3JtKGV4dGVudCwgdHJhbnNmb3JtRnVuYywgdW5kZWZpbmVkLCBzdG9wcyk7XG59XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgZ2l2ZW4gcG9pbnQgdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2plY3Rpb24gU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtV2l0aFByb2plY3Rpb25zKFxuICBwb2ludCxcbiAgc291cmNlUHJvamVjdGlvbixcbiAgZGVzdGluYXRpb25Qcm9qZWN0aW9uXG4pIHtcbiAgY29uc3QgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhcbiAgICBzb3VyY2VQcm9qZWN0aW9uLFxuICAgIGRlc3RpbmF0aW9uUHJvamVjdGlvblxuICApO1xuICByZXR1cm4gdHJhbnNmb3JtRnVuYyhwb2ludCk7XG59XG5cbi8qKlxuICogQHR5cGUge1Byb2plY3Rpb258bnVsbH1cbiAqL1xubGV0IHVzZXJQcm9qZWN0aW9uID0gbnVsbDtcblxuLyoqXG4gKiBTZXQgdGhlIHByb2plY3Rpb24gZm9yIGNvb3JkaW5hdGVzIHN1cHBsaWVkIGZyb20gYW5kIHJldHVybmVkIGJ5IEFQSSBtZXRob2RzLlxuICogVGhpcyBpbmNsdWRlcyBhbGwgQVBJIG1ldGhvZHMgZXhjZXB0IGZvciB0aG9zZSBpbnRlcmFjdGluZyB3aXRoIHRpbGUgZ3JpZHMsXG4gKiBwbHVzIHtAbGluayBpbXBvcnQoXCIuL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBhbmQge0BsaW5rIGltcG9ydChcIi4vVmlldy5qc1wiKS5TdGF0ZX0uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSB1c2VyIHByb2plY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRVc2VyUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gIHVzZXJQcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIENsZWFyIHRoZSB1c2VyIHByb2plY3Rpb24gaWYgc2V0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJVc2VyUHJvamVjdGlvbigpIHtcbiAgdXNlclByb2plY3Rpb24gPSBudWxsO1xufVxuXG4vKipcbiAqIEdldCB0aGUgcHJvamVjdGlvbiBmb3IgY29vcmRpbmF0ZXMgc3VwcGxpZWQgZnJvbSBhbmQgcmV0dXJuZWQgYnkgQVBJIG1ldGhvZHMuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufG51bGx9IFRoZSB1c2VyIHByb2plY3Rpb24gKG9yIG51bGwgaWYgbm90IHNldCkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyUHJvamVjdGlvbigpIHtcbiAgcmV0dXJuIHVzZXJQcm9qZWN0aW9uO1xufVxuXG4vKipcbiAqIFVzZSBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIChXR1MtODQgZGF0dW0pIGluIEFQSSBtZXRob2RzLlxuICogVGhpcyBpbmNsdWRlcyBhbGwgQVBJIG1ldGhvZHMgZXhjZXB0IGZvciB0aG9zZSBpbnRlcmFjdGluZyB3aXRoIHRpbGUgZ3JpZHMsXG4gKiBwbHVzIHtAbGluayBpbXBvcnQoXCIuL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBhbmQge0BsaW5rIGltcG9ydChcIi4vVmlldy5qc1wiKS5TdGF0ZX0uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VHZW9ncmFwaGljKCkge1xuICBzZXRVc2VyUHJvamVjdGlvbignRVBTRzo0MzI2Jyk7XG59XG5cbi8qKlxuICogUmV0dXJuIGEgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBpbnRvIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGNvb3JkaW5hdGUgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGUgSW5wdXQgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGNvb3JkaW5hdGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHNvdXJjZVByb2plY3Rpb24pIHtcbiAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgIHJldHVybiBjb29yZGluYXRlO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlUHJvamVjdGlvbiwgdXNlclByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgZnJvbSB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIGRlc3RQcm9qZWN0aW9uKSB7XG4gIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICBpZiAoXG4gICAgICBzaG93Q29vcmRpbmF0ZVdhcm5pbmcgJiZcbiAgICAgICFlcXVhbHMoY29vcmRpbmF0ZSwgWzAsIDBdKSAmJlxuICAgICAgY29vcmRpbmF0ZVswXSA+PSAtMTgwICYmXG4gICAgICBjb29yZGluYXRlWzBdIDw9IDE4MCAmJlxuICAgICAgY29vcmRpbmF0ZVsxXSA+PSAtOTAgJiZcbiAgICAgIGNvb3JkaW5hdGVbMV0gPD0gOTBcbiAgICApIHtcbiAgICAgIHNob3dDb29yZGluYXRlV2FybmluZyA9IGZhbHNlO1xuICAgICAgd2FybihcbiAgICAgICAgJ0NhbGwgdXNlR2VvZ3JhcGhpYygpIGZyb20gb2wvcHJvaiBvbmNlIHRvIHdvcmsgd2l0aCBbbG9uZ2l0dWRlLCBsYXRpdHVkZV0gY29vcmRpbmF0ZXMuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIFJldHVybiBhbiBleHRlbnQgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBleHRlbnQgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IElucHV0IGV4dGVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IGV4dGVudCBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgaW5wdXQgZXh0ZW50IGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1VzZXJFeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZXh0ZW50O1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uLCB1c2VyUHJvamVjdGlvbik7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGV4dGVudCB0cmFuc2Zvcm1lZCBmcm9tIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGV4dGVudCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgSW5wdXQgZXh0ZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSBpbnB1dCBleHRlbnQgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckV4dGVudChleHRlbnQsIGRlc3RQcm9qZWN0aW9uKSB7XG4gIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gZXh0ZW50O1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLiBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgb3Igc291cmNlIG9yIHVzZXIgcHJvamVjdGlvbiBhcmUgbWlzc2luZyB1bml0cywgdGhlIG9yaWdpbmFsIHJlc29sdXRpb25cbiAqIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiBpbiBpbnB1dCBwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZVByb2plY3Rpb24gVGhlIGlucHV0IHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24gaW4gdXNlciBwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvVXNlclJlc29sdXRpb24ocmVzb2x1dGlvbiwgc291cmNlUHJvamVjdGlvbikge1xuICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHJlc29sdXRpb247XG4gIH1cbiAgY29uc3Qgc291cmNlVW5pdHMgPSBnZXQoc291cmNlUHJvamVjdGlvbikuZ2V0VW5pdHMoKTtcbiAgY29uc3QgdXNlclVuaXRzID0gdXNlclByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgcmV0dXJuIHNvdXJjZVVuaXRzICYmIHVzZXJVbml0c1xuICAgID8gKHJlc29sdXRpb24gKiBNRVRFUlNfUEVSX1VOSVRbc291cmNlVW5pdHNdKSAvIE1FVEVSU19QRVJfVU5JVFt1c2VyVW5pdHNdXG4gICAgOiByZXNvbHV0aW9uO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgcmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLiBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgb3Igc291cmNlIG9yIHVzZXIgcHJvamVjdGlvbiBhcmUgbWlzc2luZyB1bml0cywgdGhlIG9yaWdpbmFsIHJlc29sdXRpb25cbiAqIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24gaW4gZGVzdGluYXRpb24gcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlclJlc29sdXRpb24ocmVzb2x1dGlvbiwgZGVzdFByb2plY3Rpb24pIHtcbiAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgIHJldHVybiByZXNvbHV0aW9uO1xuICB9XG4gIGNvbnN0IHNvdXJjZVVuaXRzID0gZ2V0KGRlc3RQcm9qZWN0aW9uKS5nZXRVbml0cygpO1xuICBjb25zdCB1c2VyVW5pdHMgPSB1c2VyUHJvamVjdGlvbi5nZXRVbml0cygpO1xuICByZXR1cm4gc291cmNlVW5pdHMgJiYgdXNlclVuaXRzXG4gICAgPyAocmVzb2x1dGlvbiAqIE1FVEVSU19QRVJfVU5JVFt1c2VyVW5pdHNdKSAvIE1FVEVSU19QRVJfVU5JVFtzb3VyY2VVbml0c11cbiAgICA6IHJlc29sdXRpb247XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHNhZmUgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb24gZnJvbSBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogXCJTYWZlXCIgbWVhbnMgdGhhdCBpdCBjYW4gaGFuZGxlIHdyYXBwaW5nIG9mIHgtY29vcmRpbmF0ZXMgZm9yIGdsb2JhbCBwcm9qZWN0aW9ucyxcbiAqIGFuZCB0aGF0IGNvb3JkaW5hdGVzIGV4Y2VlZGluZyB0aGUgc291cmNlIHByb2plY3Rpb24gdmFsaWRpdHkgZXh0ZW50J3MgcmFuZ2Ugd2lsbCBiZVxuICogY2xhbXBlZCB0byB0aGUgdmFsaWRpdHkgcmFuZ2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RQcm9qIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRyYW5zZm9ybSBUcmFuc2Zvcm0gZnVuY3Rpb24gKHNvdXJjZSB0byBkZXN0aW5hdGlvbikuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBTYWZlIHRyYW5zZm9ybSBmdW5jdGlvbiAoc291cmNlIHRvIGRlc3RpbmF0aW9uKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNhZmVDb29yZGluYXRlVHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RQcm9qLCB0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChjb29yZCkge1xuICAgIGxldCB0cmFuc2Zvcm1lZCwgd29ybGRzQXdheTtcbiAgICBpZiAoc291cmNlUHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICBjb25zdCBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgY29uc3Qgc291cmNlRXh0ZW50V2lkdGggPSBnZXRXaWR0aChzb3VyY2VFeHRlbnQpO1xuICAgICAgY29vcmQgPSBjb29yZC5zbGljZSgwKTtcbiAgICAgIHdvcmxkc0F3YXkgPSBnZXRXb3JsZHNBd2F5KGNvb3JkLCBzb3VyY2VQcm9qLCBzb3VyY2VFeHRlbnRXaWR0aCk7XG4gICAgICBpZiAod29ybGRzQXdheSkge1xuICAgICAgICAvLyBNb3ZlIHggdG8gdGhlIHJlYWwgd29ybGRcbiAgICAgICAgY29vcmRbMF0gPSBjb29yZFswXSAtIHdvcmxkc0F3YXkgKiBzb3VyY2VFeHRlbnRXaWR0aDtcbiAgICAgIH1cbiAgICAgIGNvb3JkWzBdID0gY2xhbXAoY29vcmRbMF0sIHNvdXJjZUV4dGVudFswXSwgc291cmNlRXh0ZW50WzJdKTtcbiAgICAgIGNvb3JkWzFdID0gY2xhbXAoY29vcmRbMV0sIHNvdXJjZUV4dGVudFsxXSwgc291cmNlRXh0ZW50WzNdKTtcbiAgICAgIHRyYW5zZm9ybWVkID0gdHJhbnNmb3JtKGNvb3JkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oY29vcmQpO1xuICAgIH1cbiAgICBpZiAod29ybGRzQXdheSAmJiBkZXN0UHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAvLyBNb3ZlIHRyYW5zZm9ybWVkIGNvb3JkaW5hdGUgYmFjayB0byB0aGUgb2Zmc2V0IHdvcmxkXG4gICAgICB0cmFuc2Zvcm1lZFswXSArPSB3b3JsZHNBd2F5ICogZ2V0V2lkdGgoZGVzdFByb2ouZ2V0RXh0ZW50KCkpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtZWQ7XG4gIH07XG59XG5cbi8qKlxuICogQWRkIHRyYW5zZm9ybXMgdG8gYW5kIGZyb20gRVBTRzo0MzI2IGFuZCBFUFNHOjM4NTcuICBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZFxuICogYnkgd2hlbiB0aGlzIG1vZHVsZSBpcyBleGVjdXRlZCBhbmQgc2hvdWxkIG9ubHkgbmVlZCB0byBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXJcbiAqIGBjbGVhckFsbFByb2plY3Rpb25zKClgIGlzIGNhbGxlZCAoZS5nLiBpbiB0ZXN0cykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb21tb24oKSB7XG4gIC8vIEFkZCB0cmFuc2Zvcm1hdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcyB0byBjb252ZXJ0IHdpdGhpbiBzZXQgb2ZcbiAgLy8gcHJvamVjdGlvbnMgd2l0aCBlcXVhbCBtZWFuaW5nLlxuICBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMoRVBTRzM4NTdfUFJPSkVDVElPTlMpO1xuICBhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMoRVBTRzQzMjZfUFJPSkVDVElPTlMpO1xuICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRvIGNvbnZlcnQgRVBTRzo0MzI2IGxpa2UgY29vcmRpbmF0ZXMgdG8gRVBTRzozODU3IGxpa2VcbiAgLy8gY29vcmRpbmF0ZXMgYW5kIGJhY2suXG4gIGFkZEVxdWl2YWxlbnRUcmFuc2Zvcm1zKFxuICAgIEVQU0c0MzI2X1BST0pFQ1RJT05TLFxuICAgIEVQU0czODU3X1BST0pFQ1RJT05TLFxuICAgIGZyb21FUFNHNDMyNixcbiAgICB0b0VQU0c0MzI2XG4gICk7XG59XG5cbmFkZENvbW1vbigpO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NlbnRlcmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi9tYXRoLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZCksIG51bWJlciwgaW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemUsIGJvb2xlYW49LCBBcnJheTxudW1iZXI+PSk6IChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpfSBUeXBlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb25seUNlbnRlciBJZiB0cnVlLCB0aGUgY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyLlxuICogQHBhcmFtIHtib29sZWFufSBzbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIGdvIHNsaWdodGx5IG91dCBvZiB0aGUgZ2l2ZW4gZXh0ZW50XG4gKiAob25seSBkdXJpbmcgaW50ZXJhY3Rpb24gYW5kIGFuaW1hdGlvbikuXG4gKiBAcmV0dXJuIHtUeXBlfSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV4dGVudChleHRlbnQsIG9ubHlDZW50ZXIsIHNtb290aCkge1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZTsgdW51c2VkIGlmIGBvbmx5Q2VudGVyYCB3YXMgc3BlY2lmaWVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtjZW50ZXJTaGlmdF0gU2hpZnQgYmV0d2VlbiBtYXAgY2VudGVyIGFuZCB2aWV3cG9ydCBjZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgc2l6ZSwgaXNNb3ZpbmcsIGNlbnRlclNoaWZ0KSB7XG4gICAgICBpZiAoIWNlbnRlcikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKCFyZXNvbHV0aW9uICYmICFvbmx5Q2VudGVyKSB7XG4gICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgICB9XG4gICAgICBjb25zdCB2aWV3V2lkdGggPSBvbmx5Q2VudGVyID8gMCA6IHNpemVbMF0gKiByZXNvbHV0aW9uO1xuICAgICAgY29uc3Qgdmlld0hlaWdodCA9IG9ubHlDZW50ZXIgPyAwIDogc2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICBjb25zdCBzaGlmdFggPSBjZW50ZXJTaGlmdCA/IGNlbnRlclNoaWZ0WzBdIDogMDtcbiAgICAgIGNvbnN0IHNoaWZ0WSA9IGNlbnRlclNoaWZ0ID8gY2VudGVyU2hpZnRbMV0gOiAwO1xuICAgICAgbGV0IG1pblggPSBleHRlbnRbMF0gKyB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgbGV0IG1heFggPSBleHRlbnRbMl0gLSB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgbGV0IG1pblkgPSBleHRlbnRbMV0gKyB2aWV3SGVpZ2h0IC8gMiArIHNoaWZ0WTtcbiAgICAgIGxldCBtYXhZID0gZXh0ZW50WzNdIC0gdmlld0hlaWdodCAvIDIgKyBzaGlmdFk7XG5cbiAgICAgIC8vIG5vdGU6IHdoZW4gem9vbWluZyBvdXQgb2YgYm91bmRzLCBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHggYW5kIHkgbWF5XG4gICAgICAvLyBlbmQgdXAgaW52ZXJ0ZWQgKG1pbiA+IG1heCk7IHRoaXMgaGFzIHRvIGJlIGFjY291bnRlZCBmb3JcbiAgICAgIGlmIChtaW5YID4gbWF4WCkge1xuICAgICAgICBtaW5YID0gKG1heFggKyBtaW5YKSAvIDI7XG4gICAgICAgIG1heFggPSBtaW5YO1xuICAgICAgfVxuICAgICAgaWYgKG1pblkgPiBtYXhZKSB7XG4gICAgICAgIG1pblkgPSAobWF4WSArIG1pblkpIC8gMjtcbiAgICAgICAgbWF4WSA9IG1pblk7XG4gICAgICB9XG5cbiAgICAgIGxldCB4ID0gY2xhbXAoY2VudGVyWzBdLCBtaW5YLCBtYXhYKTtcbiAgICAgIGxldCB5ID0gY2xhbXAoY2VudGVyWzFdLCBtaW5ZLCBtYXhZKTtcblxuICAgICAgLy8gZHVyaW5nIGFuIGludGVyYWN0aW9uLCBhbGxvdyBzb21lIG92ZXJzY3JvbGxcbiAgICAgIGlmIChpc01vdmluZyAmJiBzbW9vdGggJiYgcmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCByYXRpbyA9IDMwICogcmVzb2x1dGlvbjtcbiAgICAgICAgeCArPVxuICAgICAgICAgIC1yYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBtaW5YIC0gY2VudGVyWzBdKSAvIHJhdGlvKSArXG4gICAgICAgICAgcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgY2VudGVyWzBdIC0gbWF4WCkgLyByYXRpbyk7XG4gICAgICAgIHkgKz1cbiAgICAgICAgICAtcmF0aW8gKiBNYXRoLmxvZygxICsgTWF0aC5tYXgoMCwgbWluWSAtIGNlbnRlclsxXSkgLyByYXRpbykgK1xuICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclsxXSAtIG1heFkpIC8gcmF0aW8pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3gsIHldO1xuICAgIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBDZW50ZXIuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUoY2VudGVyKSB7XG4gIHJldHVybiBjZW50ZXI7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHtjbGFtcH0gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7Z2V0SGVpZ2h0LCBnZXRXaWR0aH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi9hcnJheS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChudW1iZXJ8dW5kZWZpbmVkKSwgbnVtYmVyLCBpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZSwgYm9vbGVhbj0pOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuXG4vKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCByZXNvbHV0aW9uIHRha2luZyBpbnRvIGFjY291bnQgdGhlIHZpZXdwb3J0IHNpemUgYW5kIG1heGltdW1cbiAqIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvblxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IG1heEV4dGVudCBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gdmlld3BvcnRTaXplIFZpZXdwb3J0IHNpemUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dGdWxsRXh0ZW50IFdoZXRoZXIgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENhcHBlZCByZXNvbHV0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKFxuICByZXNvbHV0aW9uLFxuICBtYXhFeHRlbnQsXG4gIHZpZXdwb3J0U2l6ZSxcbiAgc2hvd0Z1bGxFeHRlbnRcbikge1xuICBjb25zdCB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMF07XG4gIGNvbnN0IHlSZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KG1heEV4dGVudCkgLyB2aWV3cG9ydFNpemVbMV07XG5cbiAgaWYgKHNob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKHJlc29sdXRpb24sIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbikpO1xuICB9XG4gIHJldHVybiBNYXRoLm1pbihyZXNvbHV0aW9uLCBNYXRoLm1pbih4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgcmVzb2x1dGlvbiB0byBiZSBiZXR3ZWVuIG1heFJlc29sdXRpb24gYW5kIG1pblJlc29sdXRpb24gd2hpbGVcbiAqIHN0aWxsIGFsbG93aW5nIHRoZSB2YWx1ZSB0byBiZSBzbGlnaHRseSBvdXQgb2YgYm91bmRzLlxuICogTm90ZTogdGhlIGNvbXB1dGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBsb2dhcml0aG0gZnVuY3Rpb24gKGxuKTpcbiAqICAtIGF0IDEsIGxuKHgpIGlzIDBcbiAqICAtIGFib3ZlIDEsIGxuKHgpIGtlZXBzIGluY3JlYXNpbmcgYnV0IGF0IGEgbXVjaCBzbG93ZXIgcGFjZSB0aGFuIHhcbiAqIFRoZSBmaW5hbCByZXN1bHQgaXMgY2xhbXBlZCB0byBwcmV2ZW50IGdldHRpbmcgdG9vIGZhciBhd2F5IGZyb20gYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNtb290aGVkIHJlc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24pIHtcbiAgbGV0IHJlc3VsdCA9IE1hdGgubWluKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24pO1xuICBjb25zdCByYXRpbyA9IDUwO1xuXG4gIHJlc3VsdCAqPVxuICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIHJlc29sdXRpb24gLyBtYXhSZXNvbHV0aW9uIC0gMSkpIC8gcmF0aW8gK1xuICAgIDE7XG4gIGlmIChtaW5SZXNvbHV0aW9uKSB7XG4gICAgcmVzdWx0ID0gTWF0aC5tYXgocmVzdWx0LCBtaW5SZXNvbHV0aW9uKTtcbiAgICByZXN1bHQgLz1cbiAgICAgIE1hdGgubG9nKDEgKyByYXRpbyAqIE1hdGgubWF4KDAsIG1pblJlc29sdXRpb24gLyByZXNvbHV0aW9uIC0gMSkpIC9cbiAgICAgICAgcmF0aW8gK1xuICAgICAgMTtcbiAgfVxuICByZXR1cm4gY2xhbXAocmVzdWx0LCBtaW5SZXNvbHV0aW9uIC8gMiwgbWF4UmVzb2x1dGlvbiAqIDIpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtzbW9vdGhdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zKFxuICByZXNvbHV0aW9ucyxcbiAgc21vb3RoLFxuICBtYXhFeHRlbnQsXG4gIHNob3dGdWxsRXh0ZW50XG4pIHtcbiAgc21vb3RoID0gc21vb3RoICE9PSB1bmRlZmluZWQgPyBzbW9vdGggOiB0cnVlO1xuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBpc01vdmluZykge1xuICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBtYXhSZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbMF07XG4gICAgICAgIGNvbnN0IG1pblJlc29sdXRpb24gPSByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgY2FwcGVkTWF4UmVzID0gbWF4RXh0ZW50XG4gICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKFxuICAgICAgICAgICAgICBtYXhSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICBtYXhFeHRlbnQsXG4gICAgICAgICAgICAgIHNpemUsXG4gICAgICAgICAgICAgIHNob3dGdWxsRXh0ZW50XG4gICAgICAgICAgICApXG4gICAgICAgICAgOiBtYXhSZXNvbHV0aW9uO1xuXG4gICAgICAgIC8vIGR1cmluZyBpbnRlcmFjdGluZyBvciBhbmltYXRpbmcsIGFsbG93IGludGVybWVkaWFyeSB2YWx1ZXNcbiAgICAgICAgaWYgKGlzTW92aW5nKSB7XG4gICAgICAgICAgaWYgKCFzbW9vdGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24oXG4gICAgICAgICAgICByZXNvbHV0aW9uLFxuICAgICAgICAgICAgY2FwcGVkTWF4UmVzLFxuICAgICAgICAgICAgbWluUmVzb2x1dGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICBjb25zdCB6ID0gTWF0aC5mbG9vcihsaW5lYXJGaW5kTmVhcmVzdChyZXNvbHV0aW9ucywgY2FwcGVkLCBkaXJlY3Rpb24pKTtcbiAgICAgICAgaWYgKHJlc29sdXRpb25zW3pdID4gY2FwcGVkTWF4UmVzICYmIHogPCByZXNvbHV0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3ogKyAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbnNbel07XG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcG93ZXIgUG93ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXhpbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW21pblJlc29sdXRpb25dIE1pbmltdW0gcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbc2hvd0Z1bGxFeHRlbnRdIElmIHRydWUsIGFsbG93cyB1cyB0byBzaG93IHRoZSBmdWxsIGV4dGVudC4gRGVmYXVsdDogZmFsc2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBab29tIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvUG93ZXIoXG4gIHBvd2VyLFxuICBtYXhSZXNvbHV0aW9uLFxuICBtaW5SZXNvbHV0aW9uLFxuICBzbW9vdGgsXG4gIG1heEV4dGVudCxcbiAgc2hvd0Z1bGxFeHRlbnRcbikge1xuICBzbW9vdGggPSBzbW9vdGggIT09IHVuZGVmaW5lZCA/IHNtb290aCA6IHRydWU7XG4gIG1pblJlc29sdXRpb24gPSBtaW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBtaW5SZXNvbHV0aW9uIDogMDtcblxuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBpc01vdmluZykge1xuICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjYXBwZWRNYXhSZXMgPSBtYXhFeHRlbnRcbiAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24oXG4gICAgICAgICAgICAgIG1heFJlc29sdXRpb24sXG4gICAgICAgICAgICAgIG1heEV4dGVudCxcbiAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgc2hvd0Z1bGxFeHRlbnRcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IG1heFJlc29sdXRpb247XG5cbiAgICAgICAgLy8gZHVyaW5nIGludGVyYWN0aW5nIG9yIGFuaW1hdGluZywgYWxsb3cgaW50ZXJtZWRpYXJ5IHZhbHVlc1xuICAgICAgICBpZiAoaXNNb3ZpbmcpIHtcbiAgICAgICAgICBpZiAoIXNtb290aCkge1xuICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihcbiAgICAgICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgICAgICBjYXBwZWRNYXhSZXMsXG4gICAgICAgICAgICBtaW5SZXNvbHV0aW9uXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRvbGVyYW5jZSA9IDFlLTk7XG4gICAgICAgIGNvbnN0IG1pblpvb21MZXZlbCA9IE1hdGguY2VpbChcbiAgICAgICAgICBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gY2FwcGVkTWF4UmVzKSAvIE1hdGgubG9nKHBvd2VyKSAtIHRvbGVyYW5jZVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBvZmZzZXQgPSAtZGlyZWN0aW9uICogKDAuNSAtIHRvbGVyYW5jZSkgKyAwLjU7XG4gICAgICAgIGNvbnN0IGNhcHBlZCA9IE1hdGgubWluKGNhcHBlZE1heFJlcywgcmVzb2x1dGlvbik7XG4gICAgICAgIGNvbnN0IGNhcHBlZFpvb21MZXZlbCA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIGNhcHBlZCkgLyBNYXRoLmxvZyhwb3dlcikgKyBvZmZzZXRcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgem9vbUxldmVsID0gTWF0aC5tYXgobWluWm9vbUxldmVsLCBjYXBwZWRab29tTGV2ZWwpO1xuICAgICAgICBjb25zdCBuZXdSZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHBvd2VyLCB6b29tTGV2ZWwpO1xuICAgICAgICByZXR1cm4gY2xhbXAobmV3UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtzbW9vdGhdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYmUgYWJsZSB0byBzbGlnaHRseSBleGNlZWQgcmVzb2x1dGlvbiBsaW1pdHMuIERlZmF1bHQ6IHRydWUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1pbk1heFJlc29sdXRpb24oXG4gIG1heFJlc29sdXRpb24sXG4gIG1pblJlc29sdXRpb24sXG4gIHNtb290aCxcbiAgbWF4RXh0ZW50LFxuICBzaG93RnVsbEV4dGVudFxuKSB7XG4gIHNtb290aCA9IHNtb290aCAhPT0gdW5kZWZpbmVkID8gc21vb3RoIDogdHJ1ZTtcblxuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBpc01vdmluZykge1xuICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBjYXBwZWRNYXhSZXMgPSBtYXhFeHRlbnRcbiAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24oXG4gICAgICAgICAgICAgIG1heFJlc29sdXRpb24sXG4gICAgICAgICAgICAgIG1heEV4dGVudCxcbiAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgc2hvd0Z1bGxFeHRlbnRcbiAgICAgICAgICAgIClcbiAgICAgICAgICA6IG1heFJlc29sdXRpb247XG5cbiAgICAgICAgaWYgKCFzbW9vdGggfHwgIWlzTW92aW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKFxuICAgICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgICAgY2FwcGVkTWF4UmVzLFxuICAgICAgICAgIG1pblJlc29sdXRpb25cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICApO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JvdGF0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQge3RvUmFkaWFuc30gZnJvbSAnLi9tYXRoLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBib29sZWFuPSk6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZShyb3RhdGlvbikge1xuICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9uZShyb3RhdGlvbikge1xuICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiByb3RhdGlvbjtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIE4uXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvTihuKSB7XG4gIGNvbnN0IHRoZXRhID0gKDIgKiBNYXRoLlBJKSAvIG47XG4gIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJvdGF0aW9uLCBpc01vdmluZykge1xuICAgICAgaWYgKGlzTW92aW5nKSB7XG4gICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcm90YXRpb24gPSBNYXRoLmZsb29yKHJvdGF0aW9uIC8gdGhldGEgKyAwLjUpICogdGhldGE7XG4gICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBbdG9sZXJhbmNlXSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvWmVybyh0b2xlcmFuY2UpIHtcbiAgdG9sZXJhbmNlID0gdG9sZXJhbmNlIHx8IHRvUmFkaWFucyg1KTtcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocm90YXRpb24sIGlzTW92aW5nKSB7XG4gICAgICBpZiAoaXNNb3ZpbmcpIHtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRpb24pIDw9IHRvbGVyYW5jZSkge1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICApO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Vhc2luZ1xuICovXG5cbi8qKlxuICogU3RhcnQgc2xvdyBhbmQgc3BlZWQgdXAuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW4odCkge1xuICByZXR1cm4gTWF0aC5wb3codCwgMyk7XG59XG5cbi8qKlxuICogU3RhcnQgZmFzdCBhbmQgc2xvdyBkb3duLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dCh0KSB7XG4gIHJldHVybiAxIC0gZWFzZUluKDEgLSB0KTtcbn1cblxuLyoqXG4gKiBTdGFydCBzbG93LCBzcGVlZCB1cCwgYW5kIHRoZW4gc2xvdyBkb3duIGFnYWluLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5BbmRPdXQodCkge1xuICByZXR1cm4gMyAqIHQgKiB0IC0gMiAqIHQgKiB0ICogdDtcbn1cblxuLyoqXG4gKiBNYWludGFpbiBhIGNvbnN0YW50IHNwZWVkIG92ZXIgdGltZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhcih0KSB7XG4gIHJldHVybiB0O1xufVxuXG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgYXQgdGhlIHZlcnkgZW5kIHNsb3cgZG93biBhZ2Fpbi4gIFRoaXMgaGFzIHRoZVxuICogc2FtZSBnZW5lcmFsIGJlaGF2aW9yIGFzIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSwgYnV0IHRoZSBmaW5hbFxuICogc2xvd2Rvd24gaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwQW5kRG93bih0KSB7XG4gIGlmICh0IDwgMC41KSB7XG4gICAgcmV0dXJuIGluQW5kT3V0KDIgKiB0KTtcbiAgfVxuICByZXR1cm4gMSAtIGluQW5kT3V0KDIgKiAodCAtIDAuNSkpO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2hhc1xuICovXG5cbmNvbnN0IHVhID1cbiAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG5hdmlnYXRvci51c2VyQWdlbnQgIT09ICd1bmRlZmluZWQnXG4gICAgPyBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKClcbiAgICA6ICcnO1xuXG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBGaXJlZm94IGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IEZJUkVGT1ggPSB1YS5pbmNsdWRlcygnZmlyZWZveCcpO1xuXG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBTYWZhcmkgYXMgYnJvd3Nlci5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgU0FGQVJJID0gdWEuaW5jbHVkZXMoJ3NhZmFyaScpICYmICF1YS5pbmNsdWRlcygnY2hyb20nKTtcblxuLyoqXG4gKiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjM3OTA2XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IFNBRkFSSV9CVUdfMjM3OTA2ID1cbiAgU0FGQVJJICYmXG4gICh1YS5pbmNsdWRlcygndmVyc2lvbi8xNS40JykgfHxcbiAgICAvY3B1IChvc3xpcGhvbmUgb3MpIDE1XzQgbGlrZSBtYWMgb3MgeC8udGVzdCh1YSkpO1xuXG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIFdlYktpdCBlbmdpbmUuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IFdFQktJVCA9IHVhLmluY2x1ZGVzKCd3ZWJraXQnKSAmJiAhdWEuaW5jbHVkZXMoJ2VkZ2UnKTtcblxuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBNYWMgYXMgcGxhdGZvcm0uXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IE1BQyA9IHVhLmluY2x1ZGVzKCdtYWNpbnRvc2gnKTtcblxuLyoqXG4gKiBUaGUgcmF0aW8gYmV0d2VlbiBwaHlzaWNhbCBwaXhlbHMgYW5kIGRldmljZS1pbmRlcGVuZGVudCBwaXhlbHNcbiAqIChkaXBzKSBvbiB0aGUgZGV2aWNlIChgd2luZG93LmRldmljZVBpeGVsUmF0aW9gKS5cbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IERFVklDRV9QSVhFTF9SQVRJTyA9XG4gIHR5cGVvZiBkZXZpY2VQaXhlbFJhdGlvICE9PSAndW5kZWZpbmVkJyA/IGRldmljZVBpeGVsUmF0aW8gOiAxO1xuXG4vKipcbiAqIFRoZSBleGVjdXRpb24gY29udGV4dCBpcyBhIHdvcmtlciB3aXRoIE9mZnNjcmVlbkNhbnZhcyBhdmFpbGFibGUuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgPVxuICB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmXG4gIHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09ICd1bmRlZmluZWQnICYmXG4gIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG5cbi8qKlxuICogSW1hZ2UucHJvdG90eXBlLmRlY29kZSgpIGlzIHN1cHBvcnRlZC5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgSU1BR0VfREVDT0RFID1cbiAgdHlwZW9mIEltYWdlICE9PSAndW5kZWZpbmVkJyAmJiBJbWFnZS5wcm90b3R5cGUuZGVjb2RlO1xuXG4vKipcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgY29uc3QgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgPSAoZnVuY3Rpb24gKCkge1xuICBsZXQgcGFzc2l2ZSA9IGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBhc3NpdmUgPSB0cnVlO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ18nLCBudWxsLCBvcHRpb25zKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyBwYXNzaXZlIG5vdCBzdXBwb3J0ZWRcbiAgfVxuICByZXR1cm4gcGFzc2l2ZTtcbn0pKCk7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvdHJhbnNmb3JtXG4gKi9cbmltcG9ydCB7V09SS0VSX09GRlNDUkVFTl9DQU5WQVN9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuXG4vKipcbiAqIEFuIGFycmF5IHJlcHJlc2VudGluZyBhbiBhZmZpbmUgMmQgdHJhbnNmb3JtYXRpb24gZm9yIHVzZSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3RyYW5zZm9ybX0gZnVuY3Rpb25zLiBUaGUgYXJyYXkgaGFzIDYgZWxlbWVudHMuXG4gKiBAdHlwZWRlZiB7IUFycmF5PG51bWJlcj59IFRyYW5zZm9ybVxuICogQGFwaVxuICovXG5cbi8qKlxuICogQ29sbGVjdGlvbiBvZiBhZmZpbmUgMmQgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zLiBUaGUgZnVuY3Rpb25zIHdvcmsgb24gYW5cbiAqIGFycmF5IG9mIDYgZWxlbWVudHMuIFRoZSBlbGVtZW50IG9yZGVyIGlzIGNvbXBhdGlibGUgd2l0aCB0aGUgW1NWR01hdHJpeFxuICogaW50ZXJmYWNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU1ZHTWF0cml4KSBhbmQgaXNcbiAqIGEgc3Vic2V0IChlbGVtZW50cyBhIHRvIGYpIG9mIGEgM8OXMyBtYXRyaXg6XG4gKiBgYGBcbiAqIFsgYSBjIGUgXVxuICogWyBiIGQgZiBdXG4gKiBbIDAgMCAxIF1cbiAqIGBgYFxuICovXG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtUcmFuc2Zvcm19XG4gKi9cbmNvbnN0IHRtcF8gPSBuZXcgQXJyYXkoNik7XG5cbi8qKlxuICogQ3JlYXRlIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IElkZW50aXR5IHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cblxuLyoqXG4gKiBSZXNldHMgdGhlIGdpdmVuIHRyYW5zZm9ybSB0byBhbiBpZGVudGl0eSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUcmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldCh0cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIHNldCh0cmFuc2Zvcm0sIDEsIDAsIDAsIDEsIDAsIDApO1xufVxuXG4vKipcbiAqIE11bHRpcGx5IHRoZSB1bmRlcmx5aW5nIG1hdHJpY2VzIG9mIHR3byB0cmFuc2Zvcm1zIGFuZCByZXR1cm4gdGhlIHJlc3VsdCBpblxuICogdGhlIGZpcnN0IHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBUcmFuc2Zvcm0gcGFyYW1ldGVycyBvZiBtYXRyaXggMS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBUcmFuc2Zvcm0gcGFyYW1ldGVycyBvZiBtYXRyaXggMi5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgbXVsdGlwbGllZCB3aXRoIHRyYW5zZm9ybTIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gIGNvbnN0IGExID0gdHJhbnNmb3JtMVswXTtcbiAgY29uc3QgYjEgPSB0cmFuc2Zvcm0xWzFdO1xuICBjb25zdCBjMSA9IHRyYW5zZm9ybTFbMl07XG4gIGNvbnN0IGQxID0gdHJhbnNmb3JtMVszXTtcbiAgY29uc3QgZTEgPSB0cmFuc2Zvcm0xWzRdO1xuICBjb25zdCBmMSA9IHRyYW5zZm9ybTFbNV07XG4gIGNvbnN0IGEyID0gdHJhbnNmb3JtMlswXTtcbiAgY29uc3QgYjIgPSB0cmFuc2Zvcm0yWzFdO1xuICBjb25zdCBjMiA9IHRyYW5zZm9ybTJbMl07XG4gIGNvbnN0IGQyID0gdHJhbnNmb3JtMlszXTtcbiAgY29uc3QgZTIgPSB0cmFuc2Zvcm0yWzRdO1xuICBjb25zdCBmMiA9IHRyYW5zZm9ybTJbNV07XG5cbiAgdHJhbnNmb3JtMVswXSA9IGExICogYTIgKyBjMSAqIGIyO1xuICB0cmFuc2Zvcm0xWzFdID0gYjEgKiBhMiArIGQxICogYjI7XG4gIHRyYW5zZm9ybTFbMl0gPSBhMSAqIGMyICsgYzEgKiBkMjtcbiAgdHJhbnNmb3JtMVszXSA9IGIxICogYzIgKyBkMSAqIGQyO1xuICB0cmFuc2Zvcm0xWzRdID0gYTEgKiBlMiArIGMxICogZjIgKyBlMTtcbiAgdHJhbnNmb3JtMVs1XSA9IGIxICogZTIgKyBkMSAqIGYyICsgZjE7XG5cbiAgcmV0dXJuIHRyYW5zZm9ybTE7XG59XG5cbi8qKlxuICogU2V0IHRoZSB0cmFuc2Zvcm0gY29tcG9uZW50cyBhLWYgb24gYSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgYSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBiIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGMgVGhlIGMgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZCBUaGUgZCBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlIFRoZSBlIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGYgVGhlIGYgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBNYXRyaXggd2l0aCB0cmFuc2Zvcm0gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh0cmFuc2Zvcm0sIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgdHJhbnNmb3JtWzBdID0gYTtcbiAgdHJhbnNmb3JtWzFdID0gYjtcbiAgdHJhbnNmb3JtWzJdID0gYztcbiAgdHJhbnNmb3JtWzNdID0gZDtcbiAgdHJhbnNmb3JtWzRdID0gZTtcbiAgdHJhbnNmb3JtWzVdID0gZjtcbiAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cblxuLyoqXG4gKiBTZXQgdHJhbnNmb3JtIG9uIG9uZSBtYXRyaXggZnJvbSBhbm90aGVyIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSB0by5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSBmcm9tLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSB3aXRoIHRyYW5zZm9ybSBmcm9tIHRyYW5zZm9ybTIgYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21BcnJheSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gIHRyYW5zZm9ybTFbMF0gPSB0cmFuc2Zvcm0yWzBdO1xuICB0cmFuc2Zvcm0xWzFdID0gdHJhbnNmb3JtMlsxXTtcbiAgdHJhbnNmb3JtMVsyXSA9IHRyYW5zZm9ybTJbMl07XG4gIHRyYW5zZm9ybTFbM10gPSB0cmFuc2Zvcm0yWzNdO1xuICB0cmFuc2Zvcm0xWzRdID0gdHJhbnNmb3JtMls0XTtcbiAgdHJhbnNmb3JtMVs1XSA9IHRyYW5zZm9ybTJbNV07XG4gIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIGNvb3JkaW5hdGUgd2l0aCB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHJldHVybmluZyB0aGVcbiAqIHJlc3VsdGluZywgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZS4gVGhlIGNvb3JkaW5hdGUgd2lsbCBiZSBtb2RpZmllZCBpbi1wbGFjZS5cbiAqXG4gKiBAcGFyYW0ge1RyYW5zZm9ybX0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSByZXR1cm4gY29vcmRpbmF0ZSBzbyB0aGF0IG9wZXJhdGlvbnMgY2FuIGJlXG4gKiAgICAgY2hhaW5lZCB0b2dldGhlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5KHRyYW5zZm9ybSwgY29vcmRpbmF0ZSkge1xuICBjb25zdCB4ID0gY29vcmRpbmF0ZVswXTtcbiAgY29uc3QgeSA9IGNvb3JkaW5hdGVbMV07XG4gIGNvb3JkaW5hdGVbMF0gPSB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XTtcbiAgY29vcmRpbmF0ZVsxXSA9IHRyYW5zZm9ybVsxXSAqIHggKyB0cmFuc2Zvcm1bM10gKiB5ICsgdHJhbnNmb3JtWzVdO1xuICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHJvdGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSByb3RhdGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZSh0cmFuc2Zvcm0sIGFuZ2xlKSB7XG4gIGNvbnN0IGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgY29uc3Qgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgY29zLCBzaW4sIC1zaW4sIGNvcywgMCwgMCkpO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgc2NhbGUgdG8gYSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0geCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFNjYWxlIGZhY3RvciB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHNjYWxlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZSh0cmFuc2Zvcm0sIHgsIHkpIHtcbiAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIHgsIDAsIDAsIHksIDAsIDApKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc2NhbGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0YXJnZXQgVHJhbnNmb3JtIHRvIG92ZXJ3cml0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHkgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgc2NhbGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZVNjYWxlKHRhcmdldCwgeCwgeSkge1xuICByZXR1cm4gc2V0KHRhcmdldCwgeCwgMCwgMCwgeSwgMCwgMCk7XG59XG5cbi8qKlxuICogQXBwbGllcyB0cmFuc2xhdGlvbiB0byB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4IFRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkgVHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSB0cmFuc2xhdGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZSh0cmFuc2Zvcm0sIGR4LCBkeSkge1xuICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgMSwgMCwgMCwgMSwgZHgsIGR5KSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSB0cmFuc2Zvcm0gZ2l2ZW4gYW4gaW5pdGlhbCB0cmFuc2xhdGlvbiwgc2NhbGUsIHJvdGF0aW9uLCBhbmRcbiAqIGZpbmFsIHRyYW5zbGF0aW9uIChpbiB0aGF0IG9yZGVyIG9ubHksIG5vdCBjb21tdXRhdGl2ZSkuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUaGUgdHJhbnNmb3JtICh3aWxsIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDEgSW5pdGlhbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MSBJbml0aWFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0gc3kgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gKGluIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MiBGaW5hbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MiBGaW5hbCB0cmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGNvbXBvc2l0ZSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlKHRyYW5zZm9ybSwgZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSB7XG4gIGNvbnN0IHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgY29uc3QgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICB0cmFuc2Zvcm1bMF0gPSBzeCAqIGNvcztcbiAgdHJhbnNmb3JtWzFdID0gc3kgKiBzaW47XG4gIHRyYW5zZm9ybVsyXSA9IC1zeCAqIHNpbjtcbiAgdHJhbnNmb3JtWzNdID0gc3kgKiBjb3M7XG4gIHRyYW5zZm9ybVs0XSA9IGR4MiAqIHN4ICogY29zIC0gZHkyICogc3ggKiBzaW4gKyBkeDE7XG4gIHRyYW5zZm9ybVs1XSA9IGR4MiAqIHN5ICogc2luICsgZHkyICogc3kgKiBjb3MgKyBkeTE7XG4gIHJldHVybiB0cmFuc2Zvcm07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvbXBvc2l0ZSB0cmFuc2Zvcm0gZ2l2ZW4gYW4gaW5pdGlhbCB0cmFuc2xhdGlvbiwgc2NhbGUsIHJvdGF0aW9uLCBhbmRcbiAqIGZpbmFsIHRyYW5zbGF0aW9uIChpbiB0aGF0IG9yZGVyIG9ubHksIG5vdCBjb21tdXRhdGl2ZSkuIFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtXG4gKiBzdHJpbmcgY2FuIGJlIGFwcGxpZWQgYXMgYHRyYW5zZm9ybWAgcHJvcGVydHkgb2YgYW4gSFRNTEVsZW1lbnQncyBzdHlsZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDEgSW5pdGlhbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MSBJbml0aWFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0gc3kgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gKGluIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MiBGaW5hbCB0cmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5MiBGaW5hbCB0cmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY29tcG9zaXRlIGNzcyB0cmFuc2Zvcm0uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wb3NlQ3NzVHJhbnNmb3JtKGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICByZXR1cm4gdG9TdHJpbmcoY29tcG9zZShjcmVhdGUoKSwgZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSk7XG59XG5cbi8qKlxuICogSW52ZXJ0IHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHNvdXJjZSBUaGUgc291cmNlIHRyYW5zZm9ybSB0byBpbnZlcnQuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgaW52ZXJ0ZWQgKHNvdXJjZSkgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52ZXJ0KHNvdXJjZSkge1xuICByZXR1cm4gbWFrZUludmVyc2Uoc291cmNlLCBzb3VyY2UpO1xufVxuXG4vKipcbiAqIEludmVydCB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0YXJnZXQgVHJhbnNmb3JtIHRvIGJlIHNldCBhcyB0aGUgaW52ZXJzZSBvZlxuICogICAgIHRoZSBzb3VyY2UgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBzb3VyY2UgVGhlIHNvdXJjZSB0cmFuc2Zvcm0gdG8gaW52ZXJ0LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGludmVydGVkICh0YXJnZXQpIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VJbnZlcnNlKHRhcmdldCwgc291cmNlKSB7XG4gIGNvbnN0IGRldCA9IGRldGVybWluYW50KHNvdXJjZSk7XG4gIGFzc2VydChkZXQgIT09IDAsIDMyKTsgLy8gVHJhbnNmb3JtYXRpb24gbWF0cml4IGNhbm5vdCBiZSBpbnZlcnRlZFxuXG4gIGNvbnN0IGEgPSBzb3VyY2VbMF07XG4gIGNvbnN0IGIgPSBzb3VyY2VbMV07XG4gIGNvbnN0IGMgPSBzb3VyY2VbMl07XG4gIGNvbnN0IGQgPSBzb3VyY2VbM107XG4gIGNvbnN0IGUgPSBzb3VyY2VbNF07XG4gIGNvbnN0IGYgPSBzb3VyY2VbNV07XG5cbiAgdGFyZ2V0WzBdID0gZCAvIGRldDtcbiAgdGFyZ2V0WzFdID0gLWIgLyBkZXQ7XG4gIHRhcmdldFsyXSA9IC1jIC8gZGV0O1xuICB0YXJnZXRbM10gPSBhIC8gZGV0O1xuICB0YXJnZXRbNF0gPSAoYyAqIGYgLSBkICogZSkgLyBkZXQ7XG4gIHRhcmdldFs1XSA9IC0oYSAqIGYgLSBiICogZSkgLyBkZXQ7XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZXRlcm1pbmFudCBvZiB0aGUgZ2l2ZW4gbWF0cml4LlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7bnVtYmVyfSBEZXRlcm1pbmFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KG1hdCkge1xuICByZXR1cm4gbWF0WzBdICogbWF0WzNdIC0gbWF0WzFdICogbWF0WzJdO1xufVxuXG4vKipcbiAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbmxldCB0cmFuc2Zvcm1TdHJpbmdEaXY7XG5cbi8qKlxuICogQSByb3VuZGVkIHN0cmluZyB2ZXJzaW9uIG9mIHRoZSB0cmFuc2Zvcm0uICBUaGlzIGNhbiBiZSB1c2VkXG4gKiBmb3IgQ1NTIHRyYW5zZm9ybXMuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IG1hdCBNYXRyaXguXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSB0cmFuc2Zvcm0gYXMgYSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhtYXQpIHtcbiAgY29uc3QgdHJhbnNmb3JtU3RyaW5nID0gJ21hdHJpeCgnICsgbWF0LmpvaW4oJywgJykgKyAnKSc7XG4gIGlmIChXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUykge1xuICAgIHJldHVybiB0cmFuc2Zvcm1TdHJpbmc7XG4gIH1cbiAgY29uc3Qgbm9kZSA9XG4gICAgdHJhbnNmb3JtU3RyaW5nRGl2IHx8ICh0cmFuc2Zvcm1TdHJpbmdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtU3RyaW5nO1xuICByZXR1cm4gbm9kZS5zdHlsZS50cmFuc2Zvcm07XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQge1xuICBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sXG4gIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sXG59IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge1xuICBjcmVhdGVFbXB0eSxcbiAgY3JlYXRlT3JVcGRhdGVFbXB0eSxcbiAgZ2V0SGVpZ2h0LFxuICByZXR1cm5PclVwZGF0ZSxcbn0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7Z2V0IGFzIGdldFByb2plY3Rpb24sIGdldFRyYW5zZm9ybX0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQge21lbW9pemVPbmV9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge3RyYW5zZm9ybTJEfSBmcm9tICcuL2ZsYXQvdHJhbnNmb3JtLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7J1hZJyB8ICdYWVonIHwgJ1hZTScgfCAnWFlaTSd9IEdlb21ldHJ5TGF5b3V0XG4gKiBUaGUgY29vcmRpbmF0ZSBsYXlvdXQgZm9yIGdlb21ldHJpZXMsIGluZGljYXRpbmcgd2hldGhlciBhIDNyZCBvciA0dGggeiAoJ1onKVxuICogb3IgbWVhc3VyZSAoJ00nKSBjb29yZGluYXRlIGlzIGF2YWlsYWJsZS5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnUG9pbnQnIHwgJ0xpbmVTdHJpbmcnIHwgJ0xpbmVhclJpbmcnIHwgJ1BvbHlnb24nIHwgJ011bHRpUG9pbnQnIHwgJ011bHRpTGluZVN0cmluZycgfCAnTXVsdGlQb2x5Z29uJyB8ICdHZW9tZXRyeUNvbGxlY3Rpb24nIHwgJ0NpcmNsZSd9IFR5cGVcbiAqIFRoZSBnZW9tZXRyeSB0eXBlLiAgT25lIG9mIGAnUG9pbnQnYCwgYCdMaW5lU3RyaW5nJ2AsIGAnTGluZWFyUmluZydgLFxuICogYCdQb2x5Z29uJ2AsIGAnTXVsdGlQb2ludCdgLCBgJ011bHRpTGluZVN0cmluZydgLCBgJ011bHRpUG9seWdvbidgLFxuICogYCdHZW9tZXRyeUNvbGxlY3Rpb24nYCwgb3IgYCdDaXJjbGUnYC5cbiAqL1xuXG4vKipcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICovXG5jb25zdCB0bXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBUbyBnZXQgbm90aWZpZWQgb2YgY2hhbmdlcyB0byB0aGUgZ2VvbWV0cnksIHJlZ2lzdGVyIGEgbGlzdGVuZXIgZm9yIHRoZVxuICogZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBvbiB5b3VyIGdlb21ldHJ5IGluc3RhbmNlLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG5jbGFzcyBHZW9tZXRyeSBleHRlbmRzIEJhc2VPYmplY3Qge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudF8gPSBjcmVhdGVFbXB0eSgpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZXh0ZW50UmV2aXNpb25fID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSB0cmFuc2Zvcm1lZCBhbmQgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmV2aXNpb24gVGhlIGdlb21ldHJ5IHJldmlzaW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gW3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIHRoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAoXG4gICAgICByZXZpc2lvbixcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgICB0cmFuc2Zvcm1cbiAgICApIHtcbiAgICAgIGlmICghdHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsb25lID0gdGhpcy5jbG9uZSgpO1xuICAgICAgY2xvbmUuYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtKTtcbiAgICAgIHJldHVybiBjbG9uZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSBbdHJhbnNmb3JtXSBPcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgKi9cbiAgc2ltcGxpZnlUcmFuc2Zvcm1lZChzcXVhcmVkVG9sZXJhbmNlLCB0cmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gdGhpcy5zaW1wbGlmeVRyYW5zZm9ybWVkSW50ZXJuYWwoXG4gICAgICB0aGlzLmdldFJldmlzaW9uKCksXG4gICAgICBzcXVhcmVkVG9sZXJhbmNlLFxuICAgICAgdHJhbnNmb3JtXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHshR2VvbWV0cnl9IENsb25lLlxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgKi9cbiAgY2xvc2VzdFBvaW50WFkoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAqL1xuICBjb250YWluc1hZKHgsIHkpIHtcbiAgICBjb25zdCBjb29yZCA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50KFt4LCB5XSk7XG4gICAgcmV0dXJuIGNvb3JkWzBdID09PSB4ICYmIGNvb3JkWzFdID09PSB5O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY2xvc2VzdCBwb2ludCBvZiB0aGUgZ2VvbWV0cnkgdG8gdGhlIHBhc3NlZCBwb2ludCBhc1xuICAgKiB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZSBjb29yZGluYXRlfS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2Nsb3Nlc3RQb2ludF0gQ2xvc2VzdCBwb2ludC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDbG9zZXN0IHBvaW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRDbG9zZXN0UG9pbnQocG9pbnQsIGNsb3Nlc3RQb2ludCkge1xuICAgIGNsb3Nlc3RQb2ludCA9IGNsb3Nlc3RQb2ludCA/IGNsb3Nlc3RQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgdGhpcy5jbG9zZXN0UG9pbnRYWShwb2ludFswXSwgcG9pbnRbMV0sIGNsb3Nlc3RQb2ludCwgSW5maW5pdHkpO1xuICAgIHJldHVybiBjbG9zZXN0UG9pbnQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZ2VvbWV0cnkgaW5jbHVkZXMgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlLiBJZiB0aGVcbiAgICogY29vcmRpbmF0ZSBpcyBvbiB0aGUgYm91bmRhcnkgb2YgdGhlIGdlb21ldHJ5LCByZXR1cm5zIGZhbHNlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBjb29yZGluYXRlLlxuICAgKiBAYXBpXG4gICAqL1xuICBpbnRlcnNlY3RzQ29vcmRpbmF0ZShjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnNYWShjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqL1xuICBjb21wdXRlRXh0ZW50KGV4dGVudCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZXh0ZW50IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBFeHRlbnQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEV4dGVudChleHRlbnQpIHtcbiAgICBpZiAodGhpcy5leHRlbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICBjb25zdCBleHRlbnQgPSB0aGlzLmNvbXB1dGVFeHRlbnQodGhpcy5leHRlbnRfKTtcbiAgICAgIGlmIChpc05hTihleHRlbnRbMF0pIHx8IGlzTmFOKGV4dGVudFsxXSkpIHtcbiAgICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eShleHRlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5leHRlbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIHJldHVybiByZXR1cm5PclVwZGF0ZSh0aGlzLmV4dGVudF8sIGV4dGVudCk7XG4gIH1cblxuICAvKipcbiAgICogUm90YXRlIHRoZSBnZW9tZXRyeSBhcm91bmQgYSBnaXZlbiBjb29yZGluYXRlLiBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIHJvdGF0ZShhbmdsZSwgYW5jaG9yKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTY2FsZSB0aGUgZ2VvbWV0cnkgKHdpdGggYW4gb3B0aW9uYWwgb3JpZ2luKS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN4IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbc3ldIFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24gKGRlZmF1bHRzIHRvIHN4KS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgKiBAYXBpXG4gICAqL1xuICBzY2FsZShzeCwgc3ksIGFuY2hvcikge1xuICAgIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkuICBGb3IgbGluZXN0cmluZ3MsIHRoaXMgdXNlc1xuICAgKiB0aGUgW0RvdWdsYXMgUGV1Y2tlcl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobSlcbiAgICogYWxnb3JpdGhtLiAgRm9yIHBvbHlnb25zLCBhIHF1YW50aXphdGlvbi1iYXNlZFxuICAgKiBzaW1wbGlmaWNhdGlvbiBpcyB1c2VkIHRvIHByZXNlcnZlIHRvcG9sb2d5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRoZSB0b2xlcmFuY2UgZGlzdGFuY2UgZm9yIHNpbXBsaWZpY2F0aW9uLlxuICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gQSBuZXcsIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgb3JpZ2luYWwgZ2VvbWV0cnkuXG4gICAqIEBhcGlcbiAgICovXG4gIHNpbXBsaWZ5KHRvbGVyYW5jZSkge1xuICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeSh0b2xlcmFuY2UgKiB0b2xlcmFuY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXJcbiAgICogYWxnb3JpdGhtLlxuICAgKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobS5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICovXG4gIGdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtUeXBlfSBHZW9tZXRyeSB0eXBlLlxuICAgKi9cbiAgZ2V0VHlwZSgpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICogQ2FsbGVkIHdpdGggYSBmbGF0IGFycmF5IG9mIGdlb21ldHJ5IGNvb3JkaW5hdGVzLlxuICAgKi9cbiAgYXBwbHlUcmFuc2Zvcm0odHJhbnNmb3JtRm4pIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgcGFzc2VkIGV4dGVudCBpbnRlcnNlY3QuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgKi9cbiAgaW50ZXJzZWN0c0V4dGVudChleHRlbnQpIHtcbiAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgKiBpbnN0ZWFkIHlvdSB3YW50IGEgbmV3IGdlb21ldHJ5LCBmaXJzdCBgY2xvbmUoKWAgdGhpcyBnZW9tZXRyeS5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICAgKiBAYXBpXG4gICAqL1xuICB0cmFuc2xhdGUoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybSBlYWNoIGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5IGZyb20gb25lIGNvb3JkaW5hdGUgcmVmZXJlbmNlXG4gICAqIHN5c3RlbSB0byBhbm90aGVyLiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAqIEZvciBleGFtcGxlLCBhIGxpbmUgd2lsbCBiZSB0cmFuc2Zvcm1lZCB0byBhIGxpbmUgYW5kIGEgY2lyY2xlIHRvIGEgY2lyY2xlLlxuICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHNvdXJjZSBUaGUgY3VycmVudCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICogICAgIHN0cmluZyBpZGVudGlmaWVyIG9yIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIFRoZSBkZXNpcmVkIHByb2plY3Rpb24uICBDYW4gYmUgYVxuICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAqIEByZXR1cm4ge0dlb21ldHJ5fSBUaGlzIGdlb21ldHJ5LiAgTm90ZSB0aGF0IG9yaWdpbmFsIGdlb21ldHJ5IGlzXG4gICAqICAgICBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICogQGFwaVxuICAgKi9cbiAgdHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqL1xuICAgIGNvbnN0IHNvdXJjZVByb2ogPSBnZXRQcm9qZWN0aW9uKHNvdXJjZSk7XG4gICAgY29uc3QgdHJhbnNmb3JtRm4gPVxuICAgICAgc291cmNlUHJvai5nZXRVbml0cygpID09ICd0aWxlLXBpeGVscydcbiAgICAgICAgPyBmdW5jdGlvbiAoaW5Db29yZGluYXRlcywgb3V0Q29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgICAgICAgICAgY29uc3QgcGl4ZWxFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdGVkRXh0ZW50ID0gc291cmNlUHJvai5nZXRXb3JsZEV4dGVudCgpO1xuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSBnZXRIZWlnaHQocHJvamVjdGVkRXh0ZW50KSAvIGdldEhlaWdodChwaXhlbEV4dGVudCk7XG4gICAgICAgICAgICBjb21wb3NlVHJhbnNmb3JtKFxuICAgICAgICAgICAgICB0bXBUcmFuc2Zvcm0sXG4gICAgICAgICAgICAgIHByb2plY3RlZEV4dGVudFswXSxcbiAgICAgICAgICAgICAgcHJvamVjdGVkRXh0ZW50WzNdLFxuICAgICAgICAgICAgICBzY2FsZSxcbiAgICAgICAgICAgICAgLXNjYWxlLFxuICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAwXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdHJhbnNmb3JtMkQoXG4gICAgICAgICAgICAgIGluQ29vcmRpbmF0ZXMsXG4gICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgIGluQ29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICAgICAgICBzdHJpZGUsXG4gICAgICAgICAgICAgIHRtcFRyYW5zZm9ybSxcbiAgICAgICAgICAgICAgb3V0Q29vcmRpbmF0ZXNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RpbmF0aW9uKShcbiAgICAgICAgICAgICAgaW5Db29yZGluYXRlcyxcbiAgICAgICAgICAgICAgb3V0Q29vcmRpbmF0ZXMsXG4gICAgICAgICAgICAgIHN0cmlkZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIDogZ2V0VHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RpbmF0aW9uKTtcbiAgICB0aGlzLmFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybUZuKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHZW9tZXRyeTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybTJEKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIHRyYW5zZm9ybSxcbiAgZGVzdFxuKSB7XG4gIGRlc3QgPSBkZXN0ID8gZGVzdCA6IFtdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgY29uc3QgeCA9IGZsYXRDb29yZGluYXRlc1tqXTtcbiAgICBjb25zdCB5ID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXTtcbiAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XTtcbiAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgfVxuICBpZiAoZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgZGVzdC5sZW5ndGggPSBpO1xuICB9XG4gIHJldHVybiBkZXN0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBSb3RhdGlvbiBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtkZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIGFuZ2xlLFxuICBhbmNob3IsXG4gIGRlc3Rcbikge1xuICBkZXN0ID0gZGVzdCA/IGRlc3QgOiBbXTtcbiAgY29uc3QgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICBjb25zdCBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gIGNvbnN0IGFuY2hvclggPSBhbmNob3JbMF07XG4gIGNvbnN0IGFuY2hvclkgPSBhbmNob3JbMV07XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICBjb25zdCBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgIGNvbnN0IGRlbHRhWSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gLSBhbmNob3JZO1xuICAgIGRlc3RbaSsrXSA9IGFuY2hvclggKyBkZWx0YVggKiBjb3MgLSBkZWx0YVkgKiBzaW47XG4gICAgZGVzdFtpKytdID0gYW5jaG9yWSArIGRlbHRhWCAqIHNpbiArIGRlbHRhWSAqIGNvcztcbiAgICBmb3IgKGxldCBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICB9XG4gIH1cbiAgaWYgKGRlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cblxuLyoqXG4gKiBTY2FsZSB0aGUgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gc3kgU2NhbGUgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIFNjYWxlIGFuY2hvciBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZCxcbiAgc3RyaWRlLFxuICBzeCxcbiAgc3ksXG4gIGFuY2hvcixcbiAgZGVzdFxuKSB7XG4gIGRlc3QgPSBkZXN0ID8gZGVzdCA6IFtdO1xuICBjb25zdCBhbmNob3JYID0gYW5jaG9yWzBdO1xuICBjb25zdCBhbmNob3JZID0gYW5jaG9yWzFdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgY29uc3QgZGVsdGFYID0gZmxhdENvb3JkaW5hdGVzW2pdIC0gYW5jaG9yWDtcbiAgICBjb25zdCBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICBkZXN0W2krK10gPSBhbmNob3JYICsgc3ggKiBkZWx0YVg7XG4gICAgZGVzdFtpKytdID0gYW5jaG9yWSArIHN5ICogZGVsdGFZO1xuICAgIGZvciAobGV0IGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgIH1cbiAgfVxuICBpZiAoZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgZGVzdC5sZW5ndGggPSBpO1xuICB9XG4gIHJldHVybiBkZXN0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtkZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIGRlbHRhWCxcbiAgZGVsdGFZLFxuICBkZXN0XG4pIHtcbiAgZGVzdCA9IGRlc3QgPyBkZXN0IDogW107XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNbal0gKyBkZWx0YVg7XG4gICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSArIGRlbHRhWTtcbiAgICBmb3IgKGxldCBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICB9XG4gIH1cbiAgaWYgKGRlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgfVxuICByZXR1cm4gZGVzdDtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1NpbXBsZUdlb21ldHJ5XG4gKi9cbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuL0dlb21ldHJ5LmpzJztcbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHtjcmVhdGVPclVwZGF0ZUZyb21GbGF0Q29vcmRpbmF0ZXMsIGdldENlbnRlcn0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7cm90YXRlLCBzY2FsZSwgdHJhbnNmb3JtMkQsIHRyYW5zbGF0ZX0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzOyBkbyBub3QgaW5zdGFudGlhdGVcbiAqIGluIGFwcHMsIGFzIGNhbm5vdCBiZSByZW5kZXJlZC5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xuY2xhc3MgU2ltcGxlR2VvbWV0cnkgZXh0ZW5kcyBHZW9tZXRyeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9XG4gICAgICovXG4gICAgdGhpcy5sYXlvdXQgPSAnWFknO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5zdHJpZGUgPSAyO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICovXG4gIGNvbXB1dGVFeHRlbnQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyhcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICAgIHRoaXMuc3RyaWRlLFxuICAgICAgZXh0ZW50XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAYWJzdHJhY3RcbiAgICogQHJldHVybiB7QXJyYXk8Kj4gfCBudWxsfSBDb29yZGluYXRlcy5cbiAgICovXG4gIGdldENvb3JkaW5hdGVzKCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgZmlyc3QgY29vcmRpbmF0ZSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gRmlyc3QgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Rmlyc3RDb29yZGluYXRlKCkge1xuICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgwLCB0aGlzLnN0cmlkZSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRmxhdCBjb29yZGluYXRlcy5cbiAgICovXG4gIGdldEZsYXRDb29yZGluYXRlcygpIHtcbiAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsYXN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IExhc3QgcG9pbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExhc3RDb29yZGluYXRlKCkge1xuICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAtIHRoaXMuc3RyaWRlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHtAbGluayBpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0IGxheW91dH0gb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fSBMYXlvdXQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExheW91dCgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXlvdXQ7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkgdXNpbmcgdGhlIERvdWdsYXMgUGV1Y2tlciBhbGdvcml0aG0uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICovXG4gIGdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgaWYgKHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gIT09IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcbiAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgfVxuICAgIC8vIElmIHNxdWFyZWRUb2xlcmFuY2UgaXMgbmVnYXRpdmUgb3IgaWYgd2Uga25vdyB0aGF0IHNpbXBsaWZpY2F0aW9uIHdpbGwgbm90XG4gICAgLy8gaGF2ZSBhbnkgZWZmZWN0IHRoZW4ganVzdCByZXR1cm4gdGhpcy5cbiAgICBpZiAoXG4gICAgICBzcXVhcmVkVG9sZXJhbmNlIDwgMCB8fFxuICAgICAgKHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSAhPT0gMCAmJlxuICAgICAgICBzcXVhcmVkVG9sZXJhbmNlIDw9IHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGNvbnN0IHNpbXBsaWZpZWRHZW9tZXRyeSA9XG4gICAgICB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsKHNxdWFyZWRUb2xlcmFuY2UpO1xuICAgIGNvbnN0IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGlmaWVkR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIDwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gc2ltcGxpZmllZEdlb21ldHJ5O1xuICAgIH1cbiAgICAvLyBTaW1wbGlmaWNhdGlvbiBkaWQgbm90IGFjdHVhbGx5IHJlbW92ZSBhbnkgY29vcmRpbmF0ZXMuICBXZSBub3cga25vd1xuICAgIC8vIHRoYXQgYW55IGNhbGxzIHRvIGdldFNpbXBsaWZpZWRHZW9tZXRyeSB3aXRoIGEgc3F1YXJlZFRvbGVyYW5jZSBsZXNzXG4gICAgLy8gdGhhbiBvciBlcXVhbCB0byB0aGUgY3VycmVudCBzcXVhcmVkVG9sZXJhbmNlIHdpbGwgYWxzbyBub3QgaGF2ZSBhbnlcbiAgICAvLyBlZmZlY3QuICBUaGlzIGFsbG93cyB1cyB0byBzaG9ydCBjaXJjdWl0IHNpbXBsaWZpY2F0aW9uIChzYXZpbmcgQ1BVXG4gICAgLy8gY3ljbGVzKSBhbmQgcHJldmVudHMgdGhlIGNhY2hlIG9mIHNpbXBsaWZpZWQgZ2VvbWV0cmllcyBmcm9tIGZpbGxpbmdcbiAgICAvLyB1cCB3aXRoIHVzZWxlc3MgaWRlbnRpY2FsIGNvcGllcyBvZiB0aGlzIGdlb21ldHJ5IChzYXZpbmcgbWVtb3J5KS5cbiAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSBzcXVhcmVkVG9sZXJhbmNlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gU3RyaWRlLlxuICAgKi9cbiAgZ2V0U3RyaWRlKCkge1xuICAgIHJldHVybiB0aGlzLnN0cmlkZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IGxheW91dCBMYXlvdXQuXG4gICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gICAqL1xuICBzZXRGbGF0Q29vcmRpbmF0ZXMobGF5b3V0LCBmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICB0aGlzLnN0cmlkZSA9IGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpO1xuICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gZmxhdENvb3JkaW5hdGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0geyFBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dH0gW2xheW91dF0gTGF5b3V0LlxuICAgKi9cbiAgc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIGxheW91dCkge1xuICAgIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fHVuZGVmaW5lZH0gbGF5b3V0IExheW91dC5cbiAgICogQHBhcmFtIHtBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuZXN0aW5nIE5lc3RpbmcuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHNldExheW91dChsYXlvdXQsIGNvb3JkaW5hdGVzLCBuZXN0aW5nKSB7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgbGV0IHN0cmlkZTtcbiAgICBpZiAobGF5b3V0KSB7XG4gICAgICBzdHJpZGUgPSBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXN0aW5nOyArK2kpIHtcbiAgICAgICAgaWYgKGNvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMubGF5b3V0ID0gJ1hZJztcbiAgICAgICAgICB0aGlzLnN0cmlkZSA9IDI7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtBcnJheX0gKi8gKGNvb3JkaW5hdGVzWzBdKTtcbiAgICAgIH1cbiAgICAgIHN0cmlkZSA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgIGxheW91dCA9IGdldExheW91dEZvclN0cmlkZShzdHJpZGUpO1xuICAgIH1cbiAgICB0aGlzLmxheW91dCA9IGxheW91dDtcbiAgICB0aGlzLnN0cmlkZSA9IHN0cmlkZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGdlb21ldHJ5LlxuICAgKiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgKiBDYWxsZWQgd2l0aCBhIGZsYXQgYXJyYXkgb2YgZ2VvbWV0cnkgY29vcmRpbmF0ZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybUZuKSB7XG4gICAgaWYgKHRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICB0cmFuc2Zvcm1Gbih0aGlzLmZsYXRDb29yZGluYXRlcywgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSb3RhdGUgdGhlIGdlb21ldHJ5IGFyb3VuZCBhIGdpdmVuIGNvb3JkaW5hdGUuIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gYW5nbGUgaW4gY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgKiBAYXBpXG4gICAqL1xuICByb3RhdGUoYW5nbGUsIGFuY2hvcikge1xuICAgIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgY29uc3Qgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgIHJvdGF0ZShcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgICAwLFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICBzdHJpZGUsXG4gICAgICAgIGFuZ2xlLFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIGZsYXRDb29yZGluYXRlc1xuICAgICAgKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTY2FsZSB0aGUgZ2VvbWV0cnkgKHdpdGggYW4gb3B0aW9uYWwgb3JpZ2luKS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3ggVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtzeV0gVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG8gc3gpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gVGhlIHNjYWxlIG9yaWdpbiAoZGVmYXVsdHMgdG8gdGhlIGNlbnRlclxuICAgKiAgICAgb2YgdGhlIGdlb21ldHJ5IGV4dGVudCkuXG4gICAqIEBhcGlcbiAgICovXG4gIHNjYWxlKHN4LCBzeSwgYW5jaG9yKSB7XG4gICAgaWYgKHN5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHN5ID0gc3g7XG4gICAgfVxuICAgIGlmICghYW5jaG9yKSB7XG4gICAgICBhbmNob3IgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgfVxuICAgIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgY29uc3Qgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgIHNjYWxlKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAgIDAsXG4gICAgICAgIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICAgIHN0cmlkZSxcbiAgICAgICAgc3gsXG4gICAgICAgIHN5LFxuICAgICAgICBhbmNob3IsXG4gICAgICAgIGZsYXRDb29yZGluYXRlc1xuICAgICAgKTtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgKiBpbnN0ZWFkIHlvdSB3YW50IGEgbmV3IGdlb21ldHJ5LCBmaXJzdCBgY2xvbmUoKWAgdGhpcyBnZW9tZXRyeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAqIEBhcGlcbiAgICovXG4gIHRyYW5zbGF0ZShkZWx0YVgsIGRlbHRhWSkge1xuICAgIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgY29uc3Qgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgIHRyYW5zbGF0ZShcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgICAwLFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgICBzdHJpZGUsXG4gICAgICAgIGRlbHRhWCxcbiAgICAgICAgZGVsdGFZLFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNcbiAgICAgICk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IGxheW91dCBMYXlvdXQuXG4gKi9cbmZ1bmN0aW9uIGdldExheW91dEZvclN0cmlkZShzdHJpZGUpIHtcbiAgbGV0IGxheW91dDtcbiAgaWYgKHN0cmlkZSA9PSAyKSB7XG4gICAgbGF5b3V0ID0gJ1hZJztcbiAgfSBlbHNlIGlmIChzdHJpZGUgPT0gMykge1xuICAgIGxheW91dCA9ICdYWVonO1xuICB9IGVsc2UgaWYgKHN0cmlkZSA9PSA0KSB7XG4gICAgbGF5b3V0ID0gJ1hZWk0nO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9ICovIChsYXlvdXQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dH0gbGF5b3V0IExheW91dC5cbiAqIEByZXR1cm4ge251bWJlcn0gU3RyaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCkge1xuICBsZXQgc3RyaWRlO1xuICBpZiAobGF5b3V0ID09ICdYWScpIHtcbiAgICBzdHJpZGUgPSAyO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSAnWFlaJyB8fCBsYXlvdXQgPT0gJ1hZTScpIHtcbiAgICBzdHJpZGUgPSAzO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSAnWFlaTScpIHtcbiAgICBzdHJpZGUgPSA0O1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHN0cmlkZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtTaW1wbGVHZW9tZXRyeX0gc2ltcGxlR2VvbWV0cnkgU2ltcGxlIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBmbGF0IGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtR2VvbTJEKHNpbXBsZUdlb21ldHJ5LCB0cmFuc2Zvcm0sIGRlc3QpIHtcbiAgY29uc3QgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxlR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gIGlmICghZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3Qgc3RyaWRlID0gc2ltcGxlR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gIHJldHVybiB0cmFuc2Zvcm0yRChcbiAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgMCxcbiAgICBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgIHN0cmlkZSxcbiAgICB0cmFuc2Zvcm0sXG4gICAgZGVzdFxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTaW1wbGVHZW9tZXRyeTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY2xvc2VzdFxuICovXG5pbXBvcnQge2xlcnAsIHNxdWFyZWREaXN0YW5jZSBhcyBzcXVhcmVkRHh9IGZyb20gJy4uLy4uL21hdGguanMnO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IG9uIHRoZSAyRCBsaW5lIHNlZ21lbnQgZmxhdENvb3JkaW5hdGVzW29mZnNldDFdIHRvXG4gKiBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0Ml0gdGhhdCBpcyBjbG9zZXN0IHRvIHRoZSBwb2ludCAoeCwgeSkuICBFeHRyYVxuICogZGltZW5zaW9ucyBhcmUgbGluZWFybHkgaW50ZXJwb2xhdGVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQxIE9mZnNldCAxLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldDIgT2Zmc2V0IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduQ2xvc2VzdChcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQxLFxuICBvZmZzZXQyLFxuICBzdHJpZGUsXG4gIHgsXG4gIHksXG4gIGNsb3Nlc3RQb2ludFxuKSB7XG4gIGNvbnN0IHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDFdO1xuICBjb25zdCB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxICsgMV07XG4gIGNvbnN0IGR4ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIC0geDE7XG4gIGNvbnN0IGR5ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDIgKyAxXSAtIHkxO1xuICBsZXQgb2Zmc2V0O1xuICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICBpZiAodCA+IDEpIHtcbiAgICAgIG9mZnNldCA9IG9mZnNldDI7XG4gICAgfSBlbHNlIGlmICh0ID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBsZXJwKFxuICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQxICsgaV0sXG4gICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldDIgKyBpXSxcbiAgICAgICAgICB0XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgIH1cbiAgfVxuICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICB9XG4gIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSBzcXVhcmVkIG9mIHRoZSBsYXJnZXN0IGRpc3RhbmNlIGJldHdlZW4gYW55IHBhaXIgb2YgY29uc2VjdXRpdmVcbiAqIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4KSB7XG4gIGxldCB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICBsZXQgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgY29uc3QgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICBjb25zdCB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBjb25zdCBzcXVhcmVkRGVsdGEgPSBzcXVhcmVkRHgoeDEsIHkxLCB4MiwgeTIpO1xuICAgIGlmIChzcXVhcmVkRGVsdGEgPiBtYXgpIHtcbiAgICAgIG1heCA9IHNxdWFyZWREZWx0YTtcbiAgICB9XG4gICAgeDEgPSB4MjtcbiAgICB5MSA9IHkyO1xuICB9XG4gIHJldHVybiBtYXg7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXJyYXlNYXhTcXVhcmVkRGVsdGEoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzLFxuICBzdHJpZGUsXG4gIG1heFxuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZCA9IGVuZHNbaV07XG4gICAgbWF4ID0gbWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4KTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIG1heDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUFycmF5TWF4U3F1YXJlZERlbHRhKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgbWF4XG4pIHtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBtYXggPSBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWF4O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RQb2ludChcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZCxcbiAgc3RyaWRlLFxuICBtYXhEZWx0YSxcbiAgaXNSaW5nLFxuICB4LFxuICB5LFxuICBjbG9zZXN0UG9pbnQsXG4gIG1pblNxdWFyZWREaXN0YW5jZSxcbiAgdG1wUG9pbnRcbikge1xuICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gIH1cbiAgbGV0IGksIHNxdWFyZWREaXN0YW5jZTtcbiAgaWYgKG1heERlbHRhID09PSAwKSB7XG4gICAgLy8gQWxsIHBvaW50cyBhcmUgaWRlbnRpY2FsLCBzbyBqdXN0IHRlc3QgdGhlIGZpcnN0IHBvaW50LlxuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeChcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldF0sXG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV1cbiAgICApO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICB9XG4gICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgfVxuICB0bXBQb2ludCA9IHRtcFBvaW50ID8gdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICBsZXQgaW5kZXggPSBvZmZzZXQgKyBzdHJpZGU7XG4gIHdoaWxlIChpbmRleCA8IGVuZCkge1xuICAgIGFzc2lnbkNsb3Nlc3QoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBpbmRleCAtIHN0cmlkZSxcbiAgICAgIGluZGV4LFxuICAgICAgc3RyaWRlLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICB0bXBQb2ludFxuICAgICk7XG4gICAgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIHRtcFBvaW50WzBdLCB0bXBQb2ludFsxXSk7XG4gICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IHRtcFBvaW50W2ldO1xuICAgICAgfVxuICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgIGluZGV4ICs9IHN0cmlkZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2tpcCBhaGVhZCBtdWx0aXBsZSBwb2ludHMsIGJlY2F1c2Ugd2Uga25vdyB0aGF0IGFsbCB0aGUgc2tpcHBlZFxuICAgICAgLy8gcG9pbnRzIGNhbm5vdCBiZSBhbnkgY2xvc2VyIHRoYW4gdGhlIGNsb3Nlc3QgcG9pbnQgd2UgaGF2ZSBmb3VuZCBzb1xuICAgICAgLy8gZmFyLiAgV2Uga25vdyB0aGlzIGJlY2F1c2Ugd2Uga25vdyBob3cgY2xvc2UgdGhlIGN1cnJlbnQgcG9pbnQgaXMsIGhvd1xuICAgICAgLy8gY2xvc2UgdGhlIGNsb3Nlc3QgcG9pbnQgd2UgaGF2ZSBmb3VuZCBzbyBmYXIgaXMsIGFuZCB0aGUgbWF4aW11bVxuICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMuICBGb3IgZXhhbXBsZSwgaWYgd2UncmUgY3VycmVudGx5XG4gICAgICAvLyBhdCBkaXN0YW5jZSAxMCwgdGhlIGJlc3Qgd2UndmUgZm91bmQgc28gZmFyIGlzIDMsIGFuZCB0aGF0IHRoZSBtYXhpbXVtXG4gICAgICAvLyBkaXN0YW5jZSBiZXR3ZWVuIGNvbnNlY3V0aXZlIHBvaW50cyBpcyAyLCB0aGVuIHdlJ2xsIG5lZWQgdG8gc2tpcCBhdFxuICAgICAgLy8gbGVhc3QgKDEwIC0gMykgLyAyID09IDMgKHJvdW5kZWQgZG93bikgcG9pbnRzIHRvIGhhdmUgYW55IGNoYW5jZSBvZlxuICAgICAgLy8gZmluZGluZyBhIGNsb3NlciBwb2ludC4gIFdlIHVzZSBNYXRoLm1heCguLi4sIDEpIHRvIGVuc3VyZSB0aGF0IHdlXG4gICAgICAvLyBhbHdheXMgYWR2YW5jZSBhdCBsZWFzdCBvbmUgcG9pbnQsIHRvIGF2b2lkIGFuIGluZmluaXRlIGxvb3AuXG4gICAgICBpbmRleCArPVxuICAgICAgICBzdHJpZGUgKlxuICAgICAgICBNYXRoLm1heChcbiAgICAgICAgICAoKE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UpIC0gTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC9cbiAgICAgICAgICAgIG1heERlbHRhKSB8XG4gICAgICAgICAgICAwLFxuICAgICAgICAgIDFcbiAgICAgICAgKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzUmluZykge1xuICAgIC8vIENoZWNrIHRoZSBjbG9zaW5nIHNlZ21lbnQuXG4gICAgYXNzaWduQ2xvc2VzdChcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIGVuZCAtIHN0cmlkZSxcbiAgICAgIG9mZnNldCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgdG1wUG9pbnRcbiAgICApO1xuICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgIH1cbiAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFt0bXBQb2ludF0gVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzLFxuICBzdHJpZGUsXG4gIG1heERlbHRhLFxuICBpc1JpbmcsXG4gIHgsXG4gIHksXG4gIGNsb3Nlc3RQb2ludCxcbiAgbWluU3F1YXJlZERpc3RhbmNlLFxuICB0bXBQb2ludFxuKSB7XG4gIHRtcFBvaW50ID0gdG1wUG9pbnQgPyB0bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZCA9IGVuZHNbaV07XG4gICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdFBvaW50KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kLFxuICAgICAgc3RyaWRlLFxuICAgICAgbWF4RGVsdGEsXG4gICAgICBpc1JpbmcsXG4gICAgICB4LFxuICAgICAgeSxcbiAgICAgIGNsb3Nlc3RQb2ludCxcbiAgICAgIG1pblNxdWFyZWREaXN0YW5jZSxcbiAgICAgIHRtcFBvaW50XG4gICAgKTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heERlbHRhIE1heCBkZWx0YS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSaW5nIElzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW3RtcFBvaW50XSBUZW1wb3JhcnkgcG9pbnQgb2JqZWN0LlxuICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25DbG9zZXN0TXVsdGlBcnJheVBvaW50KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgbWF4RGVsdGEsXG4gIGlzUmluZyxcbiAgeCxcbiAgeSxcbiAgY2xvc2VzdFBvaW50LFxuICBtaW5TcXVhcmVkRGlzdGFuY2UsXG4gIHRtcFBvaW50XG4pIHtcbiAgdG1wUG9pbnQgPSB0bXBQb2ludCA/IHRtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZHMsXG4gICAgICBzdHJpZGUsXG4gICAgICBtYXhEZWx0YSxcbiAgICAgIGlzUmluZyxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgY2xvc2VzdFBvaW50LFxuICAgICAgbWluU3F1YXJlZERpc3RhbmNlLFxuICAgICAgdG1wUG9pbnRcbiAgICApO1xuICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgfVxuICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9kZWZsYXRlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZSwgc3RyaWRlKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGNvb3JkaW5hdGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2ldO1xuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGVzKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgY29vcmRpbmF0ZXMsXG4gIHN0cmlkZVxuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBjb29yZGluYXRlID0gY29vcmRpbmF0ZXNbaV07XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBzdHJpZGU7ICsraikge1xuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbal07XG4gICAgfVxuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZW5kc10gRW5kcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEVuZHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGNvb3JkaW5hdGVzcyxcbiAgc3RyaWRlLFxuICBlbmRzXG4pIHtcbiAgZW5kcyA9IGVuZHMgPyBlbmRzIDogW107XG4gIGxldCBpID0gMDtcbiAgZm9yIChsZXQgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICBjb25zdCBlbmQgPSBkZWZsYXRlQ29vcmRpbmF0ZXMoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBjb29yZGluYXRlc3Nbal0sXG4gICAgICBzdHJpZGVcbiAgICApO1xuICAgIGVuZHNbaSsrXSA9IGVuZDtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgZW5kcy5sZW5ndGggPSBpO1xuICByZXR1cm4gZW5kcztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gY29vcmRpbmF0ZXNzcyBDb29yZGluYXRlc3NzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBbZW5kc3NdIEVuZHNzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IEVuZHNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGNvb3JkaW5hdGVzc3MsXG4gIHN0cmlkZSxcbiAgZW5kc3Ncbikge1xuICBlbmRzcyA9IGVuZHNzID8gZW5kc3MgOiBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGxldCBqID0gMCwgamogPSBjb29yZGluYXRlc3NzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICBjb25zdCBlbmRzID0gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBjb29yZGluYXRlc3NzW2pdLFxuICAgICAgc3RyaWRlLFxuICAgICAgZW5kc3NbaV1cbiAgICApO1xuICAgIGlmIChlbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZW5kc1swXSA9IG9mZnNldDtcbiAgICB9XG4gICAgZW5kc3NbaSsrXSA9IGVuZHM7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIGVuZHNzLmxlbmd0aCA9IGk7XG4gIHJldHVybiBlbmRzcztcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2ltcGxpZnlcbiAqL1xuLy8gQmFzZWQgb24gc2ltcGxpZnktanMgaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvc2ltcGxpZnktanNcbi8vIENvcHlyaWdodCAoYykgMjAxMiwgVmxhZGltaXIgQWdhZm9ua2luXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4vL1xuLy8gICAgMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuLy8gICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vXG4vLyAgICAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuLy8gICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuLy8gSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0Vcbi8vIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkVcbi8vIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1Jcbi8vIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4vLyBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1Ncbi8vIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOXG4vLyBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuLy8gQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbi8vIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuXG5pbXBvcnQge3NxdWFyZWREaXN0YW5jZSwgc3F1YXJlZFNlZ21lbnREaXN0YW5jZX0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtib29sZWFufSBoaWdoUXVhbGl0eSBIaWdoZXN0IHF1YWxpdHkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzXSBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFNpbXBsaWZpZWQgbGluZSBzdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaW1wbGlmeUxpbmVTdHJpbmcoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgaGlnaFF1YWxpdHksXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNcbikge1xuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID1cbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIDogW107XG4gIGlmICghaGlnaFF1YWxpdHkpIHtcbiAgICBlbmQgPSByYWRpYWxEaXN0YW5jZShcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgMFxuICAgICk7XG4gICAgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbiAgICBvZmZzZXQgPSAwO1xuICAgIHN0cmlkZSA9IDI7XG4gIH1cbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkb3VnbGFzUGV1Y2tlcihcbiAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgb2Zmc2V0LFxuICAgIGVuZCxcbiAgICBzdHJpZGUsXG4gICAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgIDBcbiAgKTtcbiAgcmV0dXJuIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXIoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgc2ltcGxpZmllZE9mZnNldFxuKSB7XG4gIGNvbnN0IG4gPSAoZW5kIC0gb2Zmc2V0KSAvIHN0cmlkZTtcbiAgaWYgKG4gPCAzKSB7XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICB9XG4gIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgY29uc3QgbWFya2VycyA9IG5ldyBBcnJheShuKTtcbiAgbWFya2Vyc1swXSA9IDE7XG4gIG1hcmtlcnNbbiAtIDFdID0gMTtcbiAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICBjb25zdCBzdGFjayA9IFtvZmZzZXQsIGVuZCAtIHN0cmlkZV07XG4gIGxldCBpbmRleCA9IDA7XG4gIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgbGFzdCA9IHN0YWNrLnBvcCgpO1xuICAgIGNvbnN0IGZpcnN0ID0gc3RhY2sucG9wKCk7XG4gICAgbGV0IG1heFNxdWFyZWREaXN0YW5jZSA9IDA7XG4gICAgY29uc3QgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZmlyc3RdO1xuICAgIGNvbnN0IHkxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0ICsgMV07XG4gICAgY29uc3QgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdF07XG4gICAgY29uc3QgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdCArIDFdO1xuICAgIGZvciAobGV0IGkgPSBmaXJzdCArIHN0cmlkZTsgaSA8IGxhc3Q7IGkgKz0gc3RyaWRlKSB7XG4gICAgICBjb25zdCB4ID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgY29uc3QgeSA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICBjb25zdCBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkU2VnbWVudERpc3RhbmNlKHgsIHksIHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPiBtYXhTcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBtYXhTcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChtYXhTcXVhcmVkRGlzdGFuY2UgPiBzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICBtYXJrZXJzWyhpbmRleCAtIG9mZnNldCkgLyBzdHJpZGVdID0gMTtcbiAgICAgIGlmIChmaXJzdCArIHN0cmlkZSA8IGluZGV4KSB7XG4gICAgICAgIHN0YWNrLnB1c2goZmlyc3QsIGluZGV4KTtcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCArIHN0cmlkZSA8IGxhc3QpIHtcbiAgICAgICAgc3RhY2sucHVzaChpbmRleCwgbGFzdCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgaWYgKG1hcmtlcnNbaV0pIHtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpICogc3RyaWRlXTtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpICogc3RyaWRlICsgMV07XG4gICAgfVxuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRW5kcyBTaW1wbGlmaWVkIGVuZHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXJBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHMsXG4gIHN0cmlkZSxcbiAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgc2ltcGxpZmllZE9mZnNldCxcbiAgc2ltcGxpZmllZEVuZHNcbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlcihcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgc2ltcGxpZmllZE9mZnNldFxuICAgICk7XG4gICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlck11bHRpQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzcyxcbiAgc3RyaWRlLFxuICBzcXVhcmVkVG9sZXJhbmNlLFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICBzaW1wbGlmaWVkT2Zmc2V0LFxuICBzaW1wbGlmaWVkRW5kc3Ncbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGNvbnN0IHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgc2ltcGxpZmllZE9mZnNldCA9IGRvdWdsYXNQZXVja2VyQXJyYXkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmRzLFxuICAgICAgc3RyaWRlLFxuICAgICAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBzaW1wbGlmaWVkT2Zmc2V0LFxuICAgICAgc2ltcGxpZmllZEVuZHNcbiAgICApO1xuICAgIHNpbXBsaWZpZWRFbmRzcy5wdXNoKHNpbXBsaWZpZWRFbmRzKTtcbiAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmFkaWFsRGlzdGFuY2UoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgc3F1YXJlZFRvbGVyYW5jZSxcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyxcbiAgc2ltcGxpZmllZE9mZnNldFxuKSB7XG4gIGlmIChlbmQgPD0gb2Zmc2V0ICsgc3RyaWRlKSB7XG4gICAgLy8gemVybyBvciBvbmUgcG9pbnQsIG5vIHNpbXBsaWZpY2F0aW9uIHBvc3NpYmxlLCBzbyBjb3B5IGFuZCByZXR1cm5cbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gIH1cbiAgbGV0IHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gIGxldCB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgLy8gY29weSBmaXJzdCBwb2ludFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MTtcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gIGxldCB4MiA9IHgxO1xuICBsZXQgeTIgPSB5MTtcbiAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIGlmIChzcXVhcmVkRGlzdGFuY2UoeDEsIHkxLCB4MiwgeTIpID4gc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgLy8gY29weSBwb2ludCBhdCBvZmZzZXRcbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICB4MSA9IHgyO1xuICAgICAgeTEgPSB5MjtcbiAgICB9XG4gIH1cbiAgaWYgKHgyICE9IHgxIHx8IHkyICE9IHkxKSB7XG4gICAgLy8gY29weSBsYXN0IHBvaW50XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJvdW5kZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzbmFwKHZhbHVlLCB0b2xlcmFuY2UpIHtcbiAgcmV0dXJuIHRvbGVyYW5jZSAqIE1hdGgucm91bmQodmFsdWUgLyB0b2xlcmFuY2UpO1xufVxuXG4vKipcbiAqIFNpbXBsaWZpZXMgYSBsaW5lIHN0cmluZyB1c2luZyBhbiBhbGdvcml0aG0gZGVzaWduZWQgYnkgVGltIFNjaGF1Yi5cbiAqIENvb3JkaW5hdGVzIGFyZSBzbmFwcGVkIHRvIHRoZSBuZWFyZXN0IHZhbHVlIGluIGEgdmlydHVhbCBncmlkIGFuZFxuICogY29uc2VjdXRpdmUgZHVwbGljYXRlIGNvb3JkaW5hdGVzIGFyZSBkaXNjYXJkZWQuICBUaGlzIGVmZmVjdGl2ZWx5IHByZXNlcnZlc1xuICogdG9wb2xvZ3kgYXMgdGhlIHNpbXBsaWZpY2F0aW9uIG9mIGFueSBzdWJzZWN0aW9uIG9mIGEgbGluZSBzdHJpbmcgaXNcbiAqIGluZGVwZW5kZW50IG9mIHRoZSByZXN0IG9mIHRoZSBsaW5lIHN0cmluZy4gIFRoaXMgbWVhbnMgdGhhdCwgZm9yIGV4YW1wbGVzLFxuICogdGhlIGNvbW1vbiBlZGdlIGJldHdlZW4gdHdvIHBvbHlnb25zIHdpbGwgYmUgc2ltcGxpZmllZCB0byB0aGUgc2FtZSBsaW5lXG4gKiBzdHJpbmcgaW5kZXBlbmRlbnRseSBpbiBib3RoIHBvbHlnb25zLiAgVGhpcyBpbXBsZW1lbnRhdGlvbiB1c2VzIGEgc2luZ2xlXG4gKiBwYXNzIG92ZXIgdGhlIGNvb3JkaW5hdGVzIGFuZCBlbGltaW5hdGVzIGludGVybWVkaWF0ZSBjb2xsaW5lYXIgcG9pbnRzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemUoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgdG9sZXJhbmNlLFxuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICBzaW1wbGlmaWVkT2Zmc2V0XG4pIHtcbiAgLy8gZG8gbm90aGluZyBpZiB0aGUgbGluZSBpcyBlbXB0eVxuICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICB9XG4gIC8vIHNuYXAgdGhlIGZpcnN0IGNvb3JkaW5hdGUgKFAxKVxuICBsZXQgeDEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICBsZXQgeTEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgLy8gYWRkIHRoZSBmaXJzdCBjb29yZGluYXRlIHRvIHRoZSBvdXRwdXRcbiAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICAvLyBmaW5kIHRoZSBuZXh0IGNvb3JkaW5hdGUgdGhhdCBkb2VzIG5vdCBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlIGFzIHRoZSBmaXJzdFxuICAvLyBjb29yZGluYXRlIChQMilcbiAgbGV0IHgyLCB5MjtcbiAgZG8ge1xuICAgIHgyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICB5MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICAgIC8vIGFsbCBjb29yZGluYXRlcyBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlLCB0aGUgbGluZSBjb2xsYXBzZXMgdG8gYSBwb2ludFxuICAgICAgLy8gcHVzaCB0aGUgbGFzdCBzbmFwcGVkIHZhbHVlIGFueXdheSB0byBlbnN1cmUgdGhhdCB0aGUgb3V0cHV0IGNvbnRhaW5zXG4gICAgICAvLyBhdCBsZWFzdCB0d28gcG9pbnRzXG4gICAgICAvLyBGSVhNRSBzaG91bGQgd2UgcmVhbGx5IHJldHVybiBhdCBsZWFzdCB0d28gcG9pbnRzIGFueXdheT9cbiAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gIH0gd2hpbGUgKHgyID09IHgxICYmIHkyID09IHkxKTtcbiAgd2hpbGUgKG9mZnNldCA8IGVuZCkge1xuICAgIC8vIHNuYXAgdGhlIG5leHQgY29vcmRpbmF0ZSAoUDMpXG4gICAgY29uc3QgeDMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIGNvbnN0IHkzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAvLyBza2lwIFAzIGlmIGl0IGlzIGVxdWFsIHRvIFAyXG4gICAgaWYgKHgzID09IHgyICYmIHkzID09IHkyKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIFAxIGFuZCBQMlxuICAgIGNvbnN0IGR4MSA9IHgyIC0geDE7XG4gICAgY29uc3QgZHkxID0geTIgLSB5MTtcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDMgYW5kIFAxXG4gICAgY29uc3QgZHgyID0geDMgLSB4MTtcbiAgICBjb25zdCBkeTIgPSB5MyAtIHkxO1xuICAgIC8vIGlmIFAxLCBQMiwgYW5kIFAzIGFyZSBjb2xpbmVhciBhbmQgUDMgaXMgZnVydGhlciBmcm9tIFAxIHRoYW4gUDIgaXMgZnJvbVxuICAgIC8vIFAxIGluIHRoZSBzYW1lIGRpcmVjdGlvbiB0aGVuIFAyIGlzIG9uIHRoZSBzdHJhaWdodCBsaW5lIGJldHdlZW4gUDEgYW5kXG4gICAgLy8gUDNcbiAgICBpZiAoXG4gICAgICBkeDEgKiBkeTIgPT0gZHkxICogZHgyICYmXG4gICAgICAoKGR4MSA8IDAgJiYgZHgyIDwgZHgxKSB8fCBkeDEgPT0gZHgyIHx8IChkeDEgPiAwICYmIGR4MiA+IGR4MSkpICYmXG4gICAgICAoKGR5MSA8IDAgJiYgZHkyIDwgZHkxKSB8fCBkeTEgPT0gZHkyIHx8IChkeTEgPiAwICYmIGR5MiA+IGR5MSkpXG4gICAgKSB7XG4gICAgICAvLyBkaXNjYXJkIFAyIGFuZCBzZXQgUDIgPSBQM1xuICAgICAgeDIgPSB4MztcbiAgICAgIHkyID0geTM7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gZWl0aGVyIFAxLCBQMiwgYW5kIFAzIGFyZSBub3QgY29saW5lYXIsIG9yIHRoZXkgYXJlIGNvbGluZWFyIGJ1dCBQMyBpc1xuICAgIC8vIGJldHdlZW4gUDMgYW5kIFAxIG9yIG9uIHRoZSBvcHBvc2l0ZSBoYWxmIG9mIHRoZSBsaW5lIHRvIFAyLiAgYWRkIFAyLFxuICAgIC8vIGFuZCBjb250aW51ZSB3aXRoIFAxID0gUDIgYW5kIFAyID0gUDNcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICB4MSA9IHgyO1xuICAgIHkxID0geTI7XG4gICAgeDIgPSB4MztcbiAgICB5MiA9IHkzO1xuICB9XG4gIC8vIGFkZCB0aGUgbGFzdCBwb2ludCAoUDIpXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZUFycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICB0b2xlcmFuY2UsXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gIHNpbXBsaWZpZWRPZmZzZXQsXG4gIHNpbXBsaWZpZWRFbmRzXG4pIHtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kID0gZW5kc1tpXTtcbiAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemUoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGUsXG4gICAgICB0b2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgc2ltcGxpZmllZE9mZnNldFxuICAgICk7XG4gICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZU11bHRpQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzcyxcbiAgc3RyaWRlLFxuICB0b2xlcmFuY2UsXG4gIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsXG4gIHNpbXBsaWZpZWRPZmZzZXQsXG4gIHNpbXBsaWZpZWRFbmRzc1xuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmRzID0gZW5kc3NbaV07XG4gICAgY29uc3Qgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemVBcnJheShcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZHMsXG4gICAgICBzdHJpZGUsXG4gICAgICB0b2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgc2ltcGxpZmllZE9mZnNldCxcbiAgICAgIHNpbXBsaWZpZWRFbmRzXG4gICAgKTtcbiAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbmZsYXRlXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBbY29vcmRpbmF0ZXNdIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXMoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgY29vcmRpbmF0ZXNcbikge1xuICBjb29yZGluYXRlcyA9IGNvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBjb29yZGluYXRlcyA6IFtdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgY29vcmRpbmF0ZXNbaSsrXSA9IGZsYXRDb29yZGluYXRlcy5zbGljZShqLCBqICsgc3RyaWRlKTtcbiAgfVxuICBjb29yZGluYXRlcy5sZW5ndGggPSBpO1xuICByZXR1cm4gY29vcmRpbmF0ZXM7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IFtjb29yZGluYXRlc3NdIENvb3JkaW5hdGVzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHMsXG4gIHN0cmlkZSxcbiAgY29vcmRpbmF0ZXNzXG4pIHtcbiAgY29vcmRpbmF0ZXNzID0gY29vcmRpbmF0ZXNzICE9PSB1bmRlZmluZWQgPyBjb29yZGluYXRlc3MgOiBbXTtcbiAgbGV0IGkgPSAwO1xuICBmb3IgKGxldCBqID0gMCwgamogPSBlbmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICBjb25zdCBlbmQgPSBlbmRzW2pdO1xuICAgIGNvb3JkaW5hdGVzc1tpKytdID0gaW5mbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kLFxuICAgICAgc3RyaWRlLFxuICAgICAgY29vcmRpbmF0ZXNzW2ldXG4gICAgKTtcbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgY29vcmRpbmF0ZXNzLmxlbmd0aCA9IGk7XG4gIHJldHVybiBjb29yZGluYXRlc3M7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBbY29vcmRpbmF0ZXNzc11cbiAqICAgICBDb29yZGluYXRlc3NzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBDb29yZGluYXRlc3NzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHNzLFxuICBzdHJpZGUsXG4gIGNvb3JkaW5hdGVzc3Ncbikge1xuICBjb29yZGluYXRlc3NzID0gY29vcmRpbmF0ZXNzcyAhPT0gdW5kZWZpbmVkID8gY29vcmRpbmF0ZXNzcyA6IFtdO1xuICBsZXQgaSA9IDA7XG4gIGZvciAobGV0IGogPSAwLCBqaiA9IGVuZHNzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICBjb25zdCBlbmRzID0gZW5kc3Nbal07XG4gICAgY29vcmRpbmF0ZXNzc1tpKytdID1cbiAgICAgIGVuZHMubGVuZ3RoID09PSAxICYmIGVuZHNbMF0gPT09IG9mZnNldFxuICAgICAgICA/IFtdXG4gICAgICAgIDogaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoXG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAgICAgICBvZmZzZXQsXG4gICAgICAgICAgICBlbmRzLFxuICAgICAgICAgICAgc3RyaWRlLFxuICAgICAgICAgICAgY29vcmRpbmF0ZXNzc1tpXVxuICAgICAgICAgICk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIGNvb3JkaW5hdGVzc3MubGVuZ3RoID0gaTtcbiAgcmV0dXJuIGNvb3JkaW5hdGVzc3M7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2FyZWFcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICBsZXQgdHdpY2VBcmVhID0gMDtcbiAgbGV0IHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gIGxldCB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIGNvbnN0IHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgY29uc3QgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgdHdpY2VBcmVhICs9IHkxICogeDIgLSB4MSAqIHkyO1xuICAgIHgxID0geDI7XG4gICAgeTEgPSB5MjtcbiAgfVxuICByZXR1cm4gdHdpY2VBcmVhIC8gMjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSkge1xuICBsZXQgYXJlYSA9IDA7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZCA9IGVuZHNbaV07XG4gICAgYXJlYSArPSBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBhcmVhO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUpIHtcbiAgbGV0IGFyZWEgPSAwO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kcyA9IGVuZHNzW2ldO1xuICAgIGFyZWEgKz0gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBhcmVhO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vTGluZWFyUmluZ1xuICovXG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQge2Fzc2lnbkNsb3Nlc3RQb2ludCwgbWF4U3F1YXJlZERlbHRhfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQge2Nsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWX0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGVzfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQge2RvdWdsYXNQZXVja2VyfSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHtpbmZsYXRlQ29vcmRpbmF0ZXN9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7bGluZWFyUmluZyBhcyBsaW5lYXJSaW5nQXJlYX0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExpbmVhciByaW5nIGdlb21ldHJ5LiBPbmx5IHVzZWQgYXMgcGFydCBvZiBwb2x5Z29uOyBjYW5ub3QgYmUgcmVuZGVyZWRcbiAqIG9uIGl0cyBvd24uXG4gKlxuICogQGFwaVxuICovXG5jbGFzcyBMaW5lYXJSaW5nIGV4dGVuZHMgU2ltcGxlR2VvbWV0cnkge1xuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fEFycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiAgICAgRm9yIGludGVybmFsIHVzZSwgZmxhdCBjb29yZGluYXRlcyBpbiBjb21iaW5hdGlvbiB3aXRoIGBsYXlvdXRgIGFyZSBhbHNvIGFjY2VwdGVkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvb3JkaW5hdGVzLCBsYXlvdXQpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFfID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuXG4gICAgaWYgKGxheW91dCAhPT0gdW5kZWZpbmVkICYmICFBcnJheS5pc0FycmF5KGNvb3JkaW5hdGVzWzBdKSkge1xuICAgICAgdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMoXG4gICAgICAgIGxheW91dCxcbiAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqLyAoY29vcmRpbmF0ZXMpXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldENvb3JkaW5hdGVzKFxuICAgICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59ICovIChcbiAgICAgICAgICBjb29yZGluYXRlc1xuICAgICAgICApLFxuICAgICAgICBsYXlvdXRcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IUxpbmVhclJpbmd9IENsb25lLlxuICAgKiBAYXBpXG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IExpbmVhclJpbmcodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgKi9cbiAgY2xvc2VzdFBvaW50WFkoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KFxuICAgICAgICBtYXhTcXVhcmVkRGVsdGEoXG4gICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAgICAgMCxcbiAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICAgICAgMFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RQb2ludChcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICAgIHRoaXMuc3RyaWRlLFxuICAgICAgdGhpcy5tYXhEZWx0YV8sXG4gICAgICB0cnVlLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICBjbG9zZXN0UG9pbnQsXG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgbGluZWFyIHJpbmcgb24gcHJvamVjdGVkIHBsYW5lLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKG9uIHByb2plY3RlZCBwbGFuZSkuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEFyZWEoKSB7XG4gICAgcmV0dXJuIGxpbmVhclJpbmdBcmVhKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAwLFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgICAgdGhpcy5zdHJpZGVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxpbmVhciByaW5nLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBDb29yZGluYXRlcy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Q29vcmRpbmF0ZXMoKSB7XG4gICAgcmV0dXJuIGluZmxhdGVDb29yZGluYXRlcyhcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICAgIHRoaXMuc3RyaWRlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICogQHJldHVybiB7TGluZWFyUmluZ30gU2ltcGxpZmllZCBMaW5lYXJSaW5nLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBnZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgY29uc3Qgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgICB0aGlzLnN0cmlkZSxcbiAgICAgIHNxdWFyZWRUb2xlcmFuY2UsXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgMFxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsICdYWScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLlR5cGV9IEdlb21ldHJ5IHR5cGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuICdMaW5lYXJSaW5nJztcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAYXBpXG4gICAqL1xuICBpbnRlcnNlY3RzRXh0ZW50KGV4dGVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBsaW5lYXIgcmluZy5cbiAgICogQHBhcmFtIHshQXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dH0gW2xheW91dF0gTGF5b3V0LlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRDb29yZGluYXRlcyhjb29yZGluYXRlcywgbGF5b3V0KSB7XG4gICAgdGhpcy5zZXRMYXlvdXQobGF5b3V0LCBjb29yZGluYXRlcywgMSk7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGVzKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAwLFxuICAgICAgY29vcmRpbmF0ZXMsXG4gICAgICB0aGlzLnN0cmlkZVxuICAgICk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGluZWFyUmluZztcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvaW50XG4gKi9cbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7Y29udGFpbnNYWSwgY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZX0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7ZGVmbGF0ZUNvb3JkaW5hdGV9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7c3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9pbnQgZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG5jbGFzcyBQb2ludCBleHRlbmRzIFNpbXBsZUdlb21ldHJ5IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLkdlb21ldHJ5TGF5b3V0fSBbbGF5b3V0XSBMYXlvdXQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihjb29yZGluYXRlcywgbGF5b3V0KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBsYXlvdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IVBvaW50fSBDbG9uZS5cbiAgICogQGFwaVxuICAgKi9cbiAgY2xvbmUoKSB7XG4gICAgY29uc3QgcG9pbnQgPSBuZXcgUG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICAgIHBvaW50LmFwcGx5UHJvcGVydGllcyh0aGlzKTtcbiAgICByZXR1cm4gcG9pbnQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqL1xuICBjbG9zZXN0UG9pbnRYWSh4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIGNvbnN0IHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeChcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgZmxhdENvb3JkaW5hdGVzWzBdLFxuICAgICAgZmxhdENvb3JkaW5hdGVzWzFdXG4gICAgKTtcbiAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICBjb25zdCBzdHJpZGUgPSB0aGlzLnN0cmlkZTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgfVxuICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlIG9mIHRoZSBwb2ludC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlcy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Q29vcmRpbmF0ZXMoKSB7XG4gICAgcmV0dXJuICF0aGlzLmZsYXRDb29yZGluYXRlcyA/IFtdIDogdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICovXG4gIGNvbXB1dGVFeHRlbnQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGV4dGVudCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuVHlwZX0gR2VvbWV0cnkgdHlwZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VHlwZSgpIHtcbiAgICByZXR1cm4gJ1BvaW50JztcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAYXBpXG4gICAqL1xuICBpbnRlcnNlY3RzRXh0ZW50KGV4dGVudCkge1xuICAgIHJldHVybiBjb250YWluc1hZKGV4dGVudCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMF0sIHRoaXMuZmxhdENvb3JkaW5hdGVzWzFdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeS5qc1wiKS5HZW9tZXRyeUxheW91dH0gW2xheW91dF0gTGF5b3V0LlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRDb29yZGluYXRlcyhjb29yZGluYXRlcywgbGF5b3V0KSB7XG4gICAgdGhpcy5zZXRMYXlvdXQobGF5b3V0LCBjb29yZGluYXRlcywgMCk7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGUoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsXG4gICAgICBjb29yZGluYXRlcyxcbiAgICAgIHRoaXMuc3RyaWRlXG4gICAgKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb2ludDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY29udGFpbnNcbiAqL1xuaW1wb3J0IHtmb3JFYWNoQ29ybmVyfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgZXh0ZW50XG4pIHtcbiAgY29uc3Qgb3V0c2lkZSA9IGZvckVhY2hDb3JuZXIoXG4gICAgZXh0ZW50LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICByZXR1cm4gIWxpbmVhclJpbmdDb250YWluc1hZKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAgIG9mZnNldCxcbiAgICAgICAgZW5kLFxuICAgICAgICBzdHJpZGUsXG4gICAgICAgIGNvb3JkaW5hdGVbMF0sXG4gICAgICAgIGNvb3JkaW5hdGVbMV1cbiAgICAgICk7XG4gICAgfVxuICApO1xuICByZXR1cm4gIW91dHNpZGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zWFkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgeCxcbiAgeVxuKSB7XG4gIC8vIGh0dHBzOi8vZ2VvbWFsZ29yaXRobXMuY29tL2EwMy1faW5jbHVzaW9uLmh0bWxcbiAgLy8gQ29weXJpZ2h0IDIwMDAgc29mdFN1cmZlciwgMjAxMiBEYW4gU3VuZGF5XG4gIC8vIFRoaXMgY29kZSBtYXkgYmUgZnJlZWx5IHVzZWQgYW5kIG1vZGlmaWVkIGZvciBhbnkgcHVycG9zZVxuICAvLyBwcm92aWRpbmcgdGhhdCB0aGlzIGNvcHlyaWdodCBub3RpY2UgaXMgaW5jbHVkZWQgd2l0aCBpdC5cbiAgLy8gU29mdFN1cmZlciBtYWtlcyBubyB3YXJyYW50eSBmb3IgdGhpcyBjb2RlLCBhbmQgY2Fubm90IGJlIGhlbGRcbiAgLy8gbGlhYmxlIGZvciBhbnkgcmVhbCBvciBpbWFnaW5lZCBkYW1hZ2UgcmVzdWx0aW5nIGZyb20gaXRzIHVzZS5cbiAgLy8gVXNlcnMgb2YgdGhpcyBjb2RlIG11c3QgdmVyaWZ5IGNvcnJlY3RuZXNzIGZvciB0aGVpciBhcHBsaWNhdGlvbi5cbiAgbGV0IHduID0gMDtcbiAgbGV0IHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gIGxldCB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIGNvbnN0IHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgY29uc3QgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgaWYgKHkxIDw9IHkpIHtcbiAgICAgIGlmICh5MiA+IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA+IDApIHtcbiAgICAgICAgd24rKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHkyIDw9IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA8IDApIHtcbiAgICAgIHduLS07XG4gICAgfVxuICAgIHgxID0geDI7XG4gICAgeTEgPSB5MjtcbiAgfVxuICByZXR1cm4gd24gIT09IDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NDb250YWluc1hZKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICB4LFxuICB5XG4pIHtcbiAgaWYgKGVuZHMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICghbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDEsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgaWYgKFxuICAgICAgbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCB4LCB5KVxuICAgICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3NDb250YWluc1hZKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgeCxcbiAgeVxuKSB7XG4gIGlmIChlbmRzcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudFxuICovXG5pbXBvcnQge1xuICBjb250YWluc0V4dGVudCxcbiAgY3JlYXRlRW1wdHksXG4gIGV4dGVuZEZsYXRDb29yZGluYXRlcyxcbiAgaW50ZXJzZWN0cyxcbiAgaW50ZXJzZWN0c1NlZ21lbnQsXG59IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQge2ZvckVhY2ggYXMgZm9yRWFjaFNlZ21lbnR9IGZyb20gJy4vc2VnbWVudHMuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQsIGxpbmVhclJpbmdDb250YWluc1hZfSBmcm9tICcuL2NvbnRhaW5zLmpzJztcblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmcoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmQsXG4gIHN0cmlkZSxcbiAgZXh0ZW50XG4pIHtcbiAgY29uc3QgY29vcmRpbmF0ZXNFeHRlbnQgPSBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoXG4gICAgY3JlYXRlRW1wdHkoKSxcbiAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgb2Zmc2V0LFxuICAgIGVuZCxcbiAgICBzdHJpZGVcbiAgKTtcbiAgaWYgKCFpbnRlcnNlY3RzKGV4dGVudCwgY29vcmRpbmF0ZXNFeHRlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChjb250YWluc0V4dGVudChleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChjb29yZGluYXRlc0V4dGVudFswXSA+PSBleHRlbnRbMF0gJiYgY29vcmRpbmF0ZXNFeHRlbnRbMl0gPD0gZXh0ZW50WzJdKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzFdID49IGV4dGVudFsxXSAmJiBjb29yZGluYXRlc0V4dGVudFszXSA8PSBleHRlbnRbM10pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZm9yRWFjaFNlZ21lbnQoXG4gICAgZmxhdENvb3JkaW5hdGVzLFxuICAgIG9mZnNldCxcbiAgICBlbmQsXG4gICAgc3RyaWRlLFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludDEgU3RhcnQgcG9pbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MiBFbmQgcG9pbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBzZWdtZW50IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdCxcbiAgICAgKiAgICAgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHBvaW50MSwgcG9pbnQyKSB7XG4gICAgICByZXR1cm4gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBwb2ludDEsIHBvaW50Mik7XG4gICAgfVxuICApO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZ0FycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICBleHRlbnRcbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBpZiAoXG4gICAgICBpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kc1tpXTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kLFxuICBzdHJpZGUsXG4gIGV4dGVudFxuKSB7XG4gIGlmIChpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoXG4gICAgbGluZWFyUmluZ0NvbnRhaW5zWFkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGUsXG4gICAgICBleHRlbnRbMF0sXG4gICAgICBleHRlbnRbMV1cbiAgICApXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChcbiAgICBsaW5lYXJSaW5nQ29udGFpbnNYWShcbiAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgIG9mZnNldCxcbiAgICAgIGVuZCxcbiAgICAgIHN0cmlkZSxcbiAgICAgIGV4dGVudFswXSxcbiAgICAgIGV4dGVudFszXVxuICAgIClcbiAgKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKFxuICAgIGxpbmVhclJpbmdDb250YWluc1hZKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kLFxuICAgICAgc3RyaWRlLFxuICAgICAgZXh0ZW50WzJdLFxuICAgICAgZXh0ZW50WzFdXG4gICAgKVxuICApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAoXG4gICAgbGluZWFyUmluZ0NvbnRhaW5zWFkoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGUsXG4gICAgICBleHRlbnRbMl0sXG4gICAgICBleHRlbnRbM11cbiAgICApXG4gICkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHMsXG4gIHN0cmlkZSxcbiAgZXh0ZW50XG4pIHtcbiAgaWYgKCFpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChlbmRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGZvciAobGV0IGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGlmIChcbiAgICAgIGxpbmVhclJpbmdDb250YWluc0V4dGVudChcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgICBlbmRzW2kgLSAxXSxcbiAgICAgICAgZW5kc1tpXSxcbiAgICAgICAgc3RyaWRlLFxuICAgICAgICBleHRlbnRcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWludGVyc2VjdHNMaW5lU3RyaW5nKFxuICAgICAgICAgIGZsYXRDb29yZGluYXRlcyxcbiAgICAgICAgICBlbmRzW2kgLSAxXSxcbiAgICAgICAgICBlbmRzW2ldLFxuICAgICAgICAgIHN0cmlkZSxcbiAgICAgICAgICBleHRlbnRcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nTXVsdGlBcnJheShcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHNzLFxuICBzdHJpZGUsXG4gIGV4dGVudFxuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmRzID0gZW5kc3NbaV07XG4gICAgaWYgKFxuICAgICAgaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2VnbWVudHNcbiAqL1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBzZWdtZW50IG9mIHRoZSBmbGF0IGNvb3JkaW5hdGVzXG4gKiBhcnJheS4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdFxuICogdmFsdWUgaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBUfSBjYWxsYmFjayBGdW5jdGlvblxuICogICAgIGNhbGxlZCBmb3IgZWFjaCBzZWdtZW50LlxuICogQHJldHVybiB7VHxib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2spIHtcbiAgbGV0IHJldDtcbiAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgIHJldCA9IGNhbGxiYWNrKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLnNsaWNlKG9mZnNldCAtIHN0cmlkZSwgb2Zmc2V0KSxcbiAgICAgIGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIG9mZnNldCArIHN0cmlkZSlcbiAgICApO1xuICAgIGlmIChyZXQpIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvcmV2ZXJzZVxuICovXG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICB3aGlsZSAob2Zmc2V0IDwgZW5kIC0gc3RyaWRlKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgY29uc3QgdG1wID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldO1xuICAgICAgZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldID0gdG1wO1xuICAgIH1cbiAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgIGVuZCAtPSBzdHJpZGU7XG4gIH1cbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvb3JpZW50XG4gKi9cbmltcG9ydCB7Y29vcmRpbmF0ZXMgYXMgcmV2ZXJzZUNvb3JkaW5hdGVzfSBmcm9tICcuL3JldmVyc2UuanMnO1xuXG4vKipcbiAqIElzIHRoZSBsaW5lYXIgcmluZyBvcmllbnRlZCBjbG9ja3dpc2UgaW4gYSBjb29yZGluYXRlIHN5c3RlbSB3aXRoIGEgYm90dG9tLWxlZnRcbiAqIGNvb3JkaW5hdGUgb3JpZ2luPyBGb3IgYSBjb29yZGluYXRlIHN5c3RlbSB3aXRoIGEgdG9wLWxlZnQgY29vcmRpbmF0ZSBvcmlnaW4sXG4gKiB0aGUgcmluZydzIG9yaWVudGF0aW9uIGlzIGNsb2Nrd2lzZSB3aGVuIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBmYWxzZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBjbG9ja3dpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xMTY1NjQ3L2Nsb2Nrd2lzZS1tZXRob2QjMTE2NTk0M1xuICAvLyBodHRwczovL2dpdGh1Yi5jb20vT1NHZW8vZ2RhbC9ibG9iL21hc3Rlci9nZGFsL29nci9vZ3JsaW5lYXJyaW5nLmNwcFxuICBsZXQgZWRnZSA9IDA7XG4gIGxldCB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICBsZXQgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICBjb25zdCB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIGNvbnN0IHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgIGVkZ2UgKz0gKHgyIC0geDEpICogKHkyICsgeTEpO1xuICAgIHgxID0geDI7XG4gICAgeTEgPSB5MjtcbiAgfVxuICByZXR1cm4gZWRnZSA9PT0gMCA/IHVuZGVmaW5lZCA6IGVkZ2UgPiAwO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBBcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbcmlnaHRdIFRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb25cbiAqICAgICAoY291bnRlci1jbG9ja3dpc2UgZXh0ZXJpb3IgcmluZyBhbmQgY2xvY2t3aXNlIGludGVyaW9yIHJpbmdzKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJpbmdzIGFyZSBjb3JyZWN0bHkgb3JpZW50ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0FyZU9yaWVudGVkKFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kcyxcbiAgc3RyaWRlLFxuICByaWdodFxuKSB7XG4gIHJpZ2h0ID0gcmlnaHQgIT09IHVuZGVmaW5lZCA/IHJpZ2h0IDogZmFsc2U7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZCA9IGVuZHNbaV07XG4gICAgY29uc3QgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmQsXG4gICAgICBzdHJpZGVcbiAgICApO1xuICAgIGlmIChpID09PSAwKSB7XG4gICAgICBpZiAoKHJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKHJpZ2h0ICYmICFpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiBpc0Nsb2Nrd2lzZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICBvZmZzZXQgPSBlbmQ7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiBsaW5lYXIgcmluZ3MgYXJlIG9yaWVudGVkLiAgQnkgZGVmYXVsdCwgbGVmdC1oYW5kIG9yaWVudGF0aW9uXG4gKiBpcyB0ZXN0ZWQgKGZpcnN0IHJpbmcgbXVzdCBiZSBjbG9ja3dpc2UsIHJlbWFpbmluZyByaW5ncyBjb3VudGVyLWNsb2Nrd2lzZSkuXG4gKiBUbyB0ZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uLCB1c2UgdGhlIGByaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JpZ2h0XSBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQXJlT3JpZW50ZWQoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzcyxcbiAgc3RyaWRlLFxuICByaWdodFxuKSB7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmRzID0gZW5kc3NbaV07XG4gICAgaWYgKCFsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHJpZ2h0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoZW5kcy5sZW5ndGgpIHtcbiAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtyaWdodF0gRm9sbG93IHRoZSByaWdodC1oYW5kIHJ1bGUgZm9yIG9yaWVudGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmllbnRMaW5lYXJSaW5ncyhcbiAgZmxhdENvb3JkaW5hdGVzLFxuICBvZmZzZXQsXG4gIGVuZHMsXG4gIHN0cmlkZSxcbiAgcmlnaHRcbikge1xuICByaWdodCA9IHJpZ2h0ICE9PSB1bmRlZmluZWQgPyByaWdodCA6IGZhbHNlO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgIGNvbnN0IGlzQ2xvY2t3aXNlID0gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kLFxuICAgICAgc3RyaWRlXG4gICAgKTtcbiAgICBjb25zdCByZXZlcnNlID1cbiAgICAgIGkgPT09IDBcbiAgICAgICAgPyAocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKVxuICAgICAgICA6IChyaWdodCAmJiAhaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgaXNDbG9ja3dpc2UpO1xuICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICByZXZlcnNlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICB9XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBvZmZzZXQ7XG59XG5cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEFycmF5IG9mIGFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtyaWdodF0gRm9sbG93IHRoZSByaWdodC1oYW5kIHJ1bGUgZm9yIG9yaWVudGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmllbnRMaW5lYXJSaW5nc0FycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgcmlnaHRcbikge1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgb2Zmc2V0ID0gb3JpZW50TGluZWFyUmluZ3MoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBvZmZzZXQsXG4gICAgICBlbmRzc1tpXSxcbiAgICAgIHN0cmlkZSxcbiAgICAgIHJpZ2h0XG4gICAgKTtcbiAgfVxuICByZXR1cm4gb2Zmc2V0O1xufVxuXG4vKipcbiAqIFJldHVybiBhIHR3by1kaW1lbnNpb25hbCBlbmRzc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlc1xuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIExpbmVhciByaW5nIGVuZCBpbmRleGVzXG4gKiBAcmV0dXJuIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gVHdvIGRpbWVuc2lvbmFsIGVuZHNzIGFycmF5IHRoYXQgY2FuXG4gKiBiZSB1c2VkIHRvIGNvbnN0cnVjdCBhIE11bHRpUG9seWdvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUVuZHMoZmxhdENvb3JkaW5hdGVzLCBlbmRzKSB7XG4gIGNvbnN0IGVuZHNzID0gW107XG4gIGxldCBvZmZzZXQgPSAwO1xuICBsZXQgcHJldkVuZEluZGV4ID0gMDtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgY29uc3QgZW5kID0gZW5kc1tpXTtcbiAgICAvLyBjbGFzc2lmaWVzIGFuIGFycmF5IG9mIHJpbmdzIGludG8gcG9seWdvbnMgd2l0aCBvdXRlciByaW5ncyBhbmQgaG9sZXNcbiAgICBpZiAoIWxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCAyKSkge1xuICAgICAgZW5kc3MucHVzaChlbmRzLnNsaWNlKHByZXZFbmRJbmRleCwgaSArIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVuZHNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGVuZHNzW2VuZHNzLmxlbmd0aCAtIDFdLnB1c2goZW5kc1twcmV2RW5kSW5kZXhdKTtcbiAgICB9XG4gICAgcHJldkVuZEluZGV4ID0gaSArIDE7XG4gICAgb2Zmc2V0ID0gZW5kO1xuICB9XG4gIHJldHVybiBlbmRzcztcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvbHlnb25cbiAqL1xuaW1wb3J0IExpbmVhclJpbmcgZnJvbSAnLi9MaW5lYXJSaW5nLmpzJztcbmltcG9ydCBQb2ludCBmcm9tICcuL1BvaW50LmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7YXJyYXlNYXhTcXVhcmVkRGVsdGEsIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50fSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQge2Nsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSwgZ2V0Q2VudGVyLCBpc0VtcHR5fSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheX0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHtleHRlbmR9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7Z2V0SW50ZXJpb3JQb2ludE9mQXJyYXl9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7aW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXl9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7aW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheX0gZnJvbSAnLi9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc0FyZU9yaWVudGVkLCBvcmllbnRMaW5lYXJSaW5nc30gZnJvbSAnLi9mbGF0L29yaWVudC5qcyc7XG5pbXBvcnQge2xpbmVhclJpbmdzIGFzIGxpbmVhclJpbmdzQXJlYX0gZnJvbSAnLi9mbGF0L2FyZWEuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc0NvbnRhaW5zWFl9IGZyb20gJy4vZmxhdC9jb250YWlucy5qcyc7XG5pbXBvcnQge21vZHVsb30gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQge3F1YW50aXplQXJyYXl9IGZyb20gJy4vZmxhdC9zaW1wbGlmeS5qcyc7XG5pbXBvcnQge29mZnNldCBhcyBzcGhlcmVPZmZzZXR9IGZyb20gJy4uL3NwaGVyZS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUG9seWdvbiBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFBvbHlnb24gZXh0ZW5kcyBTaW1wbGVHZW9tZXRyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PnwhQXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXNcbiAgICogICAgIEFycmF5IG9mIGxpbmVhciByaW5ncyB0aGF0IGRlZmluZSB0aGUgcG9seWdvbi4gVGhlIGZpcnN0IGxpbmVhciByaW5nIG9mIHRoZVxuICAgKiAgICAgYXJyYXkgZGVmaW5lcyB0aGUgb3V0ZXItYm91bmRhcnkgb3Igc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gRWFjaCBzdWJzZXF1ZW50XG4gICAqICAgICBsaW5lYXIgcmluZyBkZWZpbmVzIGEgaG9sZSBpbiB0aGUgc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gQSBsaW5lYXIgcmluZyBpc1xuICAgKiAgICAgYW4gYXJyYXkgb2YgdmVydGljZXMnIGNvb3JkaW5hdGVzIHdoZXJlIHRoZSBmaXJzdCBjb29yZGluYXRlIGFuZCB0aGUgbGFzdCBhcmVcbiAgICogICAgIGVxdWl2YWxlbnQuIChGb3IgaW50ZXJuYWwgdXNlLCBmbGF0IGNvb3JkaW5hdGVzIGluIGNvbWJpbmF0aW9uIHdpdGhcbiAgICogICAgIGBsYXlvdXRgIGFuZCBgZW5kc2AgYXJlIGFsc28gYWNjZXB0ZWQuKVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbZW5kc10gRW5kcyAoZm9yIGludGVybmFsIHVzZSB3aXRoIGZsYXQgY29vcmRpbmF0ZXMpLlxuICAgKi9cbiAgY29uc3RydWN0b3IoY29vcmRpbmF0ZXMsIGxheW91dCwgZW5kcykge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZW5kc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFfID0gLTE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMub3JpZW50ZWRSZXZpc2lvbl8gPSAtMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBudWxsO1xuXG4gICAgaWYgKGxheW91dCAhPT0gdW5kZWZpbmVkICYmIGVuZHMpIHtcbiAgICAgIHRoaXMuc2V0RmxhdENvb3JkaW5hdGVzKFxuICAgICAgICBsYXlvdXQsXG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKVxuICAgICAgKTtcbiAgICAgIHRoaXMuZW5kc18gPSBlbmRzO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldENvb3JkaW5hdGVzKFxuICAgICAgICAvKiogQHR5cGUge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSAqLyAoXG4gICAgICAgICAgY29vcmRpbmF0ZXNcbiAgICAgICAgKSxcbiAgICAgICAgbGF5b3V0XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmQgdGhlIHBhc3NlZCBsaW5lYXIgcmluZyB0byB0aGlzIHBvbHlnb24uXG4gICAqIEBwYXJhbSB7TGluZWFyUmluZ30gbGluZWFyUmluZyBMaW5lYXIgcmluZy5cbiAgICogQGFwaVxuICAgKi9cbiAgYXBwZW5kTGluZWFyUmluZyhsaW5lYXJSaW5nKSB7XG4gICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4dGVuZCh0aGlzLmZsYXRDb29yZGluYXRlcywgbGluZWFyUmluZy5nZXRGbGF0Q29vcmRpbmF0ZXMoKSk7XG4gICAgfVxuICAgIHRoaXMuZW5kc18ucHVzaCh0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7IVBvbHlnb259IENsb25lLlxuICAgKiBAYXBpXG4gICAqL1xuICBjbG9uZSgpIHtcbiAgICBjb25zdCBwb2x5Z29uID0gbmV3IFBvbHlnb24oXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLFxuICAgICAgdGhpcy5sYXlvdXQsXG4gICAgICB0aGlzLmVuZHNfLnNsaWNlKClcbiAgICApO1xuICAgIHBvbHlnb24uYXBwbHlQcm9wZXJ0aWVzKHRoaXMpO1xuICAgIHJldHVybiBwb2x5Z29uO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgKi9cbiAgY2xvc2VzdFBvaW50WFkoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICBpZiAobWluU3F1YXJlZERpc3RhbmNlIDwgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZKHRoaXMuZ2V0RXh0ZW50KCksIHgsIHkpKSB7XG4gICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KFxuICAgICAgICBhcnJheU1heFNxdWFyZWREZWx0YShcbiAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgICAgICAwLFxuICAgICAgICAgIHRoaXMuZW5kc18sXG4gICAgICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICAgICAgMFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMsXG4gICAgICAwLFxuICAgICAgdGhpcy5lbmRzXyxcbiAgICAgIHRoaXMuc3RyaWRlLFxuICAgICAgdGhpcy5tYXhEZWx0YV8sXG4gICAgICB0cnVlLFxuICAgICAgeCxcbiAgICAgIHksXG4gICAgICBjbG9zZXN0UG9pbnQsXG4gICAgICBtaW5TcXVhcmVkRGlzdGFuY2VcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICovXG4gIGNvbnRhaW5zWFkoeCwgeSkge1xuICAgIHJldHVybiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkoXG4gICAgICB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksXG4gICAgICAwLFxuICAgICAgdGhpcy5lbmRzXyxcbiAgICAgIHRoaXMuc3RyaWRlLFxuICAgICAgeCxcbiAgICAgIHlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0QXJlYSgpIHtcbiAgICByZXR1cm4gbGluZWFyUmluZ3NBcmVhKFxuICAgICAgdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZW5kc18sXG4gICAgICB0aGlzLnN0cmlkZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb29yZGluYXRlIGFycmF5IGZvciB0aGlzIGdlb21ldHJ5LiAgVGhpcyBhcnJheSBoYXMgdGhlIHN0cnVjdHVyZVxuICAgKiBvZiBhIEdlb0pTT04gY29vcmRpbmF0ZSBhcnJheSBmb3IgcG9seWdvbnMuXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JpZ2h0XSBPcmllbnQgY29vcmRpbmF0ZXMgYWNjb3JkaW5nIHRvIHRoZSByaWdodC1oYW5kXG4gICAqICAgICBydWxlIChjb3VudGVyLWNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLlxuICAgKiAgICAgSWYgYGZhbHNlYCwgY29vcmRpbmF0ZXMgd2lsbCBiZSBvcmllbnRlZCBhY2NvcmRpbmcgdG8gdGhlIGxlZnQtaGFuZCBydWxlXG4gICAqICAgICAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmQgY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICogICAgIEJ5IGRlZmF1bHQsIGNvb3JkaW5hdGUgb3JpZW50YXRpb24gd2lsbCBkZXBlbmQgb24gaG93IHRoZSBnZW9tZXRyeSB3YXNcbiAgICogICAgIGNvbnN0cnVjdGVkLlxuICAgKiBAcmV0dXJuIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gQ29vcmRpbmF0ZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvb3JkaW5hdGVzKHJpZ2h0KSB7XG4gICAgbGV0IGZsYXRDb29yZGluYXRlcztcbiAgICBpZiAocmlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgICBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCByaWdodCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIH1cblxuICAgIHJldHVybiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgKi9cbiAgZ2V0RW5kcygpIHtcbiAgICByZXR1cm4gdGhpcy5lbmRzXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludC5cbiAgICovXG4gIGdldEZsYXRJbnRlcmlvclBvaW50KCkge1xuICAgIGlmICh0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgY29uc3QgZmxhdENlbnRlciA9IGdldENlbnRlcih0aGlzLmdldEV4dGVudCgpKTtcbiAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoXG4gICAgICAgIHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSxcbiAgICAgICAgMCxcbiAgICAgICAgdGhpcy5lbmRzXyxcbiAgICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICAgIGZsYXRDZW50ZXIsXG4gICAgICAgIDBcbiAgICAgICk7XG4gICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mbGF0SW50ZXJpb3JQb2ludF87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGludGVyaW9yIHBvaW50IG9mIHRoZSBwb2x5Z29uLlxuICAgKiBAcmV0dXJuIHtQb2ludH0gSW50ZXJpb3IgcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gICAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0SW50ZXJpb3JQb2ludCgpIHtcbiAgICByZXR1cm4gbmV3IFBvaW50KHRoaXMuZ2V0RmxhdEludGVyaW9yUG9pbnQoKSwgJ1hZTScpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgbnVtYmVyIG9mIHJpbmdzIG9mIHRoZSBwb2x5Z29uLCAgdGhpcyBpbmNsdWRlcyB0aGUgZXh0ZXJpb3JcbiAgICogcmluZyBhbmQgYW55IGludGVyaW9yIHJpbmdzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiByaW5ncy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TGluZWFyUmluZ0NvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmVuZHNfLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIE50aCBsaW5lYXIgcmluZyBvZiB0aGUgcG9seWdvbiBnZW9tZXRyeS4gUmV0dXJuIGBudWxsYCBpZiB0aGVcbiAgICogZ2l2ZW4gaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgKiBUaGUgZXh0ZXJpb3IgbGluZWFyIHJpbmcgaXMgYXZhaWxhYmxlIGF0IGluZGV4IGAwYCBhbmQgdGhlIGludGVyaW9yIHJpbmdzXG4gICAqIGF0IGluZGV4IGAxYCBhbmQgYmV5b25kLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge0xpbmVhclJpbmd8bnVsbH0gTGluZWFyIHJpbmcuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExpbmVhclJpbmcoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuZW5kc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKFxuICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoXG4gICAgICAgIGluZGV4ID09PSAwID8gMCA6IHRoaXMuZW5kc19baW5kZXggLSAxXSxcbiAgICAgICAgdGhpcy5lbmRzX1tpbmRleF1cbiAgICAgICksXG4gICAgICB0aGlzLmxheW91dFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsaW5lYXIgcmluZ3Mgb2YgdGhlIHBvbHlnb24uXG4gICAqIEByZXR1cm4ge0FycmF5PExpbmVhclJpbmc+fSBMaW5lYXIgcmluZ3MuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldExpbmVhclJpbmdzKCkge1xuICAgIGNvbnN0IGxheW91dCA9IHRoaXMubGF5b3V0O1xuICAgIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIGNvbnN0IGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgIGNvbnN0IGxpbmVhclJpbmdzID0gW107XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBjb25zdCBlbmQgPSBlbmRzW2ldO1xuICAgICAgY29uc3QgbGluZWFyUmluZyA9IG5ldyBMaW5lYXJSaW5nKFxuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0LCBlbmQpLFxuICAgICAgICBsYXlvdXRcbiAgICAgICk7XG4gICAgICBsaW5lYXJSaW5ncy5wdXNoKGxpbmVhclJpbmcpO1xuICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbGluZWFyUmluZ3M7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3JpZW50ZWQgZmxhdCBjb29yZGluYXRlcy5cbiAgICovXG4gIGdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCkge1xuICAgIGlmICh0aGlzLm9yaWVudGVkUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgY29uc3QgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICBpZiAobGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKSkge1xuICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKCk7XG4gICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLmxlbmd0aCA9IG9yaWVudExpbmVhclJpbmdzKFxuICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLFxuICAgICAgICAgIDAsXG4gICAgICAgICAgdGhpcy5lbmRzXyxcbiAgICAgICAgICB0aGlzLnN0cmlkZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy5vcmllbnRlZFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtQb2x5Z29ufSBTaW1wbGlmaWVkIFBvbHlnb24uXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICBjb25zdCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgY29uc3Qgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplQXJyYXkoXG4gICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyxcbiAgICAgIDAsXG4gICAgICB0aGlzLmVuZHNfLFxuICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksXG4gICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIHNpbXBsaWZpZWRFbmRzXG4gICAgKTtcbiAgICByZXR1cm4gbmV3IFBvbHlnb24oc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgJ1hZJywgc2ltcGxpZmllZEVuZHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5LmpzXCIpLlR5cGV9IEdlb21ldHJ5IHR5cGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuICdQb2x5Z29uJztcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICAgKiBAYXBpXG4gICAqL1xuICBpbnRlcnNlY3RzRXh0ZW50KGV4dGVudCkge1xuICAgIHJldHVybiBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KFxuICAgICAgdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLFxuICAgICAgMCxcbiAgICAgIHRoaXMuZW5kc18sXG4gICAgICB0aGlzLnN0cmlkZSxcbiAgICAgIGV4dGVudFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgcG9seWdvbi5cbiAgICogQHBhcmFtIHshQXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnkuanNcIikuR2VvbWV0cnlMYXlvdXR9IFtsYXlvdXRdIExheW91dC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIGxheW91dCkge1xuICAgIHRoaXMuc2V0TGF5b3V0KGxheW91dCwgY29vcmRpbmF0ZXMsIDIpO1xuICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgfVxuICAgIGNvbnN0IGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheShcbiAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLFxuICAgICAgMCxcbiAgICAgIGNvb3JkaW5hdGVzLFxuICAgICAgdGhpcy5zdHJpZGUsXG4gICAgICB0aGlzLmVuZHNfXG4gICAgKTtcbiAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBlbmRzLmxlbmd0aCA9PT0gMCA/IDAgOiBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9seWdvbjtcblxuLyoqXG4gKiBDcmVhdGUgYW4gYXBwcm94aW1hdGlvbiBvZiBhIGNpcmNsZSBvbiB0aGUgc3VyZmFjZSBvZiBhIHNwaGVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyIChgW2xvbiwgbGF0XWAgaW4gZGVncmVlcykuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBncmVhdC1jaXJjbGUgZGlzdGFuY2UgZnJvbSB0aGUgY2VudGVyIHRvXG4gKiAgICAgdGhlIHBvbHlnb24gdmVydGljZXMgaW4gbWV0ZXJzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtuXSBPcHRpb25hbCBudW1iZXIgb2YgdmVydGljZXMgZm9yIHRoZSByZXN1bHRpbmdcbiAqICAgICBwb2x5Z29uLiBEZWZhdWx0IGlzIGAzMmAuXG4gKiBAcGFyYW0ge251bWJlcn0gW3NwaGVyZVJhZGl1c10gT3B0aW9uYWwgcmFkaXVzIGZvciB0aGUgc3BoZXJlIChkZWZhdWx0cyB0b1xuICogICAgIHRoZSBFYXJ0aCdzIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQpLlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIFwiY2lyY3VsYXJcIiBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2lyY3VsYXIoY2VudGVyLCByYWRpdXMsIG4sIHNwaGVyZVJhZGl1cykge1xuICBuID0gbiA/IG4gOiAzMjtcbiAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICBjb25zdCBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICBleHRlbmQoXG4gICAgICBmbGF0Q29vcmRpbmF0ZXMsXG4gICAgICBzcGhlcmVPZmZzZXQoY2VudGVyLCByYWRpdXMsICgyICogTWF0aC5QSSAqIGkpIC8gbiwgc3BoZXJlUmFkaXVzKVxuICAgICk7XG4gIH1cbiAgZmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICByZXR1cm4gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCAnWFknLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0pO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHBvbHlnb24gZnJvbSBhbiBleHRlbnQuIFRoZSBsYXlvdXQgdXNlZCBpcyBgWFlgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV4dGVudChleHRlbnQpIHtcbiAgaWYgKGlzRW1wdHkoZXh0ZW50KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNyZWF0ZSBwb2x5Z29uIGZyb20gZW1wdHkgZXh0ZW50Jyk7XG4gIH1cbiAgY29uc3QgbWluWCA9IGV4dGVudFswXTtcbiAgY29uc3QgbWluWSA9IGV4dGVudFsxXTtcbiAgY29uc3QgbWF4WCA9IGV4dGVudFsyXTtcbiAgY29uc3QgbWF4WSA9IGV4dGVudFszXTtcbiAgY29uc3QgZmxhdENvb3JkaW5hdGVzID0gW1xuICAgIG1pblgsXG4gICAgbWluWSxcbiAgICBtaW5YLFxuICAgIG1heFksXG4gICAgbWF4WCxcbiAgICBtYXhZLFxuICAgIG1heFgsXG4gICAgbWluWSxcbiAgICBtaW5YLFxuICAgIG1pblksXG4gIF07XG4gIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsICdYWScsIFtmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoXSk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcn0gW3NpZGVzXSBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcn0gW2FuZ2xlXSBTdGFydCBhbmdsZSBmb3IgdGhlIGZpcnN0IHZlcnRleCBvZiB0aGUgcG9seWdvbiBpblxuICogICAgIGNvdW50ZXItY2xvY2t3aXNlIHJhZGlhbnMuIDAgbWVhbnMgRWFzdC4gRGVmYXVsdCBpcyAwLlxuICogQHJldHVybiB7UG9seWdvbn0gUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21DaXJjbGUoY2lyY2xlLCBzaWRlcywgYW5nbGUpIHtcbiAgc2lkZXMgPSBzaWRlcyA/IHNpZGVzIDogMzI7XG4gIGNvbnN0IHN0cmlkZSA9IGNpcmNsZS5nZXRTdHJpZGUoKTtcbiAgY29uc3QgbGF5b3V0ID0gY2lyY2xlLmdldExheW91dCgpO1xuICBjb25zdCBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gIGNvbnN0IGFycmF5TGVuZ3RoID0gc3RyaWRlICogKHNpZGVzICsgMSk7XG4gIGNvbnN0IGZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheShhcnJheUxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlMZW5ndGg7IGkgKz0gc3RyaWRlKSB7XG4gICAgZmxhdENvb3JkaW5hdGVzW2ldID0gMDtcbiAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdID0gMDtcbiAgICBmb3IgKGxldCBqID0gMjsgaiA8IHN0cmlkZTsgaisrKSB7XG4gICAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIGpdID0gY2VudGVyW2pdO1xuICAgIH1cbiAgfVxuICBjb25zdCBlbmRzID0gW2ZsYXRDb29yZGluYXRlcy5sZW5ndGhdO1xuICBjb25zdCBwb2x5Z29uID0gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCBsYXlvdXQsIGVuZHMpO1xuICBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIGNpcmNsZS5nZXRSYWRpdXMoKSwgYW5nbGUpO1xuICByZXR1cm4gcG9seWdvbjtcbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhlIGNvb3JkaW5hdGVzIG9mIGEgcG9seWdvbiB0byBtYWtlIGl0IGEgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtQb2x5Z29ufSBwb2x5Z29uIFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciBvZiB0aGUgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBSYWRpdXMgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbYW5nbGVdIFN0YXJ0IGFuZ2xlIGZvciB0aGUgZmlyc3QgdmVydGV4IG9mIHRoZSBwb2x5Z29uIGluXG4gKiAgICAgY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy4gMCBtZWFucyBFYXN0LiBEZWZhdWx0IGlzIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIHJhZGl1cywgYW5nbGUpIHtcbiAgY29uc3QgZmxhdENvb3JkaW5hdGVzID0gcG9seWdvbi5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgY29uc3Qgc3RyaWRlID0gcG9seWdvbi5nZXRTdHJpZGUoKTtcbiAgY29uc3Qgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgY29uc3Qgc3RhcnRBbmdsZSA9IGFuZ2xlID8gYW5nbGUgOiAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8PSBzaWRlczsgKytpKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gaSAqIHN0cmlkZTtcbiAgICBjb25zdCBhbmdsZSA9IHN0YXJ0QW5nbGUgKyAobW9kdWxvKGksIHNpZGVzKSAqIDIgKiBNYXRoLlBJKSAvIHNpZGVzO1xuICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdID0gY2VudGVyWzBdICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpO1xuICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSA9IGNlbnRlclsxXSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKTtcbiAgfVxuICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludFxuICovXG5pbXBvcnQge2FzY2VuZGluZ30gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuaW1wb3J0IHtsaW5lYXJSaW5nc0NvbnRhaW5zWFl9IGZyb20gJy4vY29udGFpbnMuanMnO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgYSBwb2ludCB0aGF0IGlzIGxpa2VseSB0byBsaWUgaW4gdGhlIGludGVyaW9yIG9mIHRoZSBsaW5lYXIgcmluZ3MuXG4gKiBJbnNwaXJlZCBieSBKVFMncyBjb20udml2aWRzb2x1dGlvbnMuanRzLmdlb20uR2VvbWV0cnkjZ2V0SW50ZXJpb3JQb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDZW50ZXJzIEZsYXQgY2VudGVycy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmbGF0Q2VudGVyc09mZnNldCBGbGF0IGNlbnRlciBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtkZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IERlc3RpbmF0aW9uIHBvaW50IGFzIFhZTSBjb29yZGluYXRlLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoXG4gIGZsYXRDb29yZGluYXRlcyxcbiAgb2Zmc2V0LFxuICBlbmRzLFxuICBzdHJpZGUsXG4gIGZsYXRDZW50ZXJzLFxuICBmbGF0Q2VudGVyc09mZnNldCxcbiAgZGVzdFxuKSB7XG4gIGxldCBpLCBpaSwgeCwgeDEsIHgyLCB5MSwgeTI7XG4gIGNvbnN0IHkgPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldCArIDFdO1xuICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gIGNvbnN0IGludGVyc2VjdGlvbnMgPSBbXTtcbiAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbnMgd2l0aCB0aGUgaG9yaXpvbnRhbCBsaW5lXG4gIGZvciAobGV0IHIgPSAwLCByciA9IGVuZHMubGVuZ3RoOyByIDwgcnI7ICsrcikge1xuICAgIGNvbnN0IGVuZCA9IGVuZHNbcl07XG4gICAgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKGkgPSBvZmZzZXQ7IGkgPCBlbmQ7IGkgKz0gc3RyaWRlKSB7XG4gICAgICB4MiA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgIGlmICgoeSA8PSB5MSAmJiB5MiA8PSB5KSB8fCAoeTEgPD0geSAmJiB5IDw9IHkyKSkge1xuICAgICAgICB4ID0gKCh5IC0geTEpIC8gKHkyIC0geTEpKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICBpbnRlcnNlY3Rpb25zLnB1c2goeCk7XG4gICAgICB9XG4gICAgICB4MSA9IHgyO1xuICAgICAgeTEgPSB5MjtcbiAgICB9XG4gIH1cbiAgLy8gRmluZCB0aGUgbG9uZ2VzdCBzZWdtZW50IG9mIHRoZSBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludFxuICAvLyBpbnNpZGUgdGhlIGxpbmVhciByaW5nLlxuICBsZXQgcG9pbnRYID0gTmFOO1xuICBsZXQgbWF4U2VnbWVudExlbmd0aCA9IC1JbmZpbml0eTtcbiAgaW50ZXJzZWN0aW9ucy5zb3J0KGFzY2VuZGluZyk7XG4gIHgxID0gaW50ZXJzZWN0aW9uc1swXTtcbiAgZm9yIChpID0gMSwgaWkgPSBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICB4MiA9IGludGVyc2VjdGlvbnNbaV07XG4gICAgY29uc3Qgc2VnbWVudExlbmd0aCA9IE1hdGguYWJzKHgyIC0geDEpO1xuICAgIGlmIChzZWdtZW50TGVuZ3RoID4gbWF4U2VnbWVudExlbmd0aCkge1xuICAgICAgeCA9ICh4MSArIHgyKSAvIDI7XG4gICAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgIHBvaW50WCA9IHg7XG4gICAgICAgIG1heFNlZ21lbnRMZW5ndGggPSBzZWdtZW50TGVuZ3RoO1xuICAgICAgfVxuICAgIH1cbiAgICB4MSA9IHgyO1xuICB9XG4gIGlmIChpc05hTihwb2ludFgpKSB7XG4gICAgLy8gVGhlcmUgaXMgbm8gaG9yaXpvbnRhbCBsaW5lIHRoYXQgaGFzIGl0cyBjZW50ZXIgcG9pbnQgaW5zaWRlIHRoZSBsaW5lYXJcbiAgICAvLyByaW5nLiAgVXNlIHRoZSBjZW50ZXIgb2YgdGhlIHRoZSBsaW5lYXIgcmluZydzIGV4dGVudC5cbiAgICBwb2ludFggPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldF07XG4gIH1cbiAgaWYgKGRlc3QpIHtcbiAgICBkZXN0LnB1c2gocG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoKTtcbiAgICByZXR1cm4gZGVzdDtcbiAgfVxuICByZXR1cm4gW3BvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aF07XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnRzIGFzIFhZTSBjb29yZGluYXRlcywgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRzT2ZNdWx0aUFycmF5KFxuICBmbGF0Q29vcmRpbmF0ZXMsXG4gIG9mZnNldCxcbiAgZW5kc3MsXG4gIHN0cmlkZSxcbiAgZmxhdENlbnRlcnNcbikge1xuICBsZXQgaW50ZXJpb3JQb2ludHMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IGVuZHMgPSBlbmRzc1tpXTtcbiAgICBpbnRlcmlvclBvaW50cyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KFxuICAgICAgZmxhdENvb3JkaW5hdGVzLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZW5kcyxcbiAgICAgIHN0cmlkZSxcbiAgICAgIGZsYXRDZW50ZXJzLFxuICAgICAgMiAqIGksXG4gICAgICBpbnRlcmlvclBvaW50c1xuICAgICk7XG4gICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICB9XG4gIHJldHVybiBpbnRlcmlvclBvaW50cztcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHtERUZBVUxUX1RJTEVfU0laRX0gZnJvbSAnLi90aWxlZ3JpZC9jb21tb24uanMnO1xuaW1wb3J0IHtcbiAgTUVURVJTX1BFUl9VTklULFxuICBjcmVhdGVQcm9qZWN0aW9uLFxuICBkaXNhYmxlQ29vcmRpbmF0ZVdhcm5pbmcsXG4gIGZyb21Vc2VyQ29vcmRpbmF0ZSxcbiAgZnJvbVVzZXJFeHRlbnQsXG4gIGdldFVzZXJQcm9qZWN0aW9uLFxuICB0b1VzZXJDb29yZGluYXRlLFxuICB0b1VzZXJFeHRlbnQsXG59IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQge1ZPSUR9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7XG4gIGFkZCBhcyBhZGRDb29yZGluYXRlLFxuICBlcXVhbHMgYXMgY29vcmRpbmF0ZXNFcXVhbCxcbiAgZXF1YWxzLFxuICByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSxcbn0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtub25lIGFzIGNlbnRlck5vbmUsIGNyZWF0ZUV4dGVudH0gZnJvbSAnLi9jZW50ZXJjb25zdHJhaW50LmpzJztcbmltcG9ydCB7Y2xhbXAsIG1vZHVsb30gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7XG4gIGNyZWF0ZU1pbk1heFJlc29sdXRpb24sXG4gIGNyZWF0ZVNuYXBUb1Bvd2VyLFxuICBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyxcbn0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQge1xuICBjcmVhdGVTbmFwVG9OLFxuICBjcmVhdGVTbmFwVG9aZXJvLFxuICBkaXNhYmxlLFxuICBub25lIGFzIHJvdGF0aW9uTm9uZSxcbn0gZnJvbSAnLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHtlYXNlT3V0LCBpbkFuZE91dH0gZnJvbSAnLi9lYXNpbmcuanMnO1xuaW1wb3J0IHtcbiAgZ2V0Q2VudGVyLFxuICBnZXRGb3JWaWV3QW5kU2l6ZSxcbiAgZ2V0SGVpZ2h0LFxuICBnZXRXaWR0aCxcbiAgaXNFbXB0eSxcbn0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHtsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi9hcnJheS5qcyc7XG5pbXBvcnQge2Zyb21FeHRlbnQgYXMgcG9seWdvbkZyb21FeHRlbnR9IGZyb20gJy4vZ2VvbS9Qb2x5Z29uLmpzJztcblxuLyoqXG4gKiBBbiBhbmltYXRpb24gY29uZmlndXJhdGlvblxuICpcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvblxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3NvdXJjZUNlbnRlcl0gU291cmNlIGNlbnRlci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFt0YXJnZXRDZW50ZXJdIFRhcmdldCBjZW50ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJlc29sdXRpb25dIFNvdXJjZSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSZXNvbHV0aW9uXSBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc291cmNlUm90YXRpb25dIFNvdXJjZSByb3RhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0Um90YXRpb25dIFRhcmdldCByb3RhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIEFuY2hvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzdGFydCBTdGFydC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gY29tcGxldGUgQ29tcGxldGUuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBlYXNpbmcgRWFzaW5nLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTp2b2lkfSBjYWxsYmFjayBDYWxsYmFjay5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENvbnN0cmFpbnRzXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBjZW50ZXIgQ2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcm90YXRpb24gUm90YXRpb24uXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaXRPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBib3ggdG8gZml0XG4gKiB0aGUgZXh0ZW50IGludG8uIERlZmF1bHQgaXMgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgZmlyc3QgbWFwIGluIHRoZSBET00gdGhhdFxuICogdXNlcyB0aGlzIHZpZXcsIG9yIGBbMTAwLCAxMDBdYCBpZiBubyBzdWNoIG1hcCBpcyBmb3VuZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gcGl4ZWxzKSB0byBiZVxuICogY2xlYXJlZCBpbnNpZGUgdGhlIHZpZXcuIFZhbHVlcyBpbiB0aGUgYXJyYXkgYXJlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxuICogcGFkZGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW25lYXJlc3Q9ZmFsc2VdIElmIHRoZSB2aWV3IGBjb25zdHJhaW5SZXNvbHV0aW9uYCBvcHRpb24gaXMgYHRydWVgLFxuICogZ2V0IHRoZSBuZWFyZXN0IGV4dGVudCBpbnN0ZWFkIG9mIHRoZSBjbG9zZXN0IHRoYXQgYWN0dWFsbHkgZml0cyB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbj0wXSBNaW5pbXVtIHJlc29sdXRpb24gdGhhdCB3ZSB6b29tIHRvLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgdGhhdCB3ZSB6b29tIHRvLiBJZlxuICogYG1pblJlc29sdXRpb25gIGlzIGdpdmVuLCB0aGlzIHByb3BlcnR5IGlzIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBCeSBkZWZhdWx0LCB0aGVyZSBpcyBubyBhbmltYXRpb24gdG8gdGhlIHRhcmdldCBleHRlbnQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBbZWFzaW5nXSBUaGUgZWFzaW5nIGZ1bmN0aW9uIHVzZWQgZHVyaW5nXG4gKiB0aGUgYW5pbWF0aW9uIChkZWZhdWx0cyB0byB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZy5pbkFuZE91dH0pLlxuICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIGZyYW1lIHdpdGggYSBudW1iZXIgcmVwcmVzZW50aW5nIGFcbiAqIGZyYWN0aW9uIG9mIHRoZSBhbmltYXRpb24ncyBkdXJhdGlvbi4gIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyXG4gKiBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0b3dhcmQgdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTp2b2lkfSBbY2FsbGJhY2tdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSB2aWV3IGlzIGluXG4gKiBpdHMgZmluYWwgcG9zaXRpb24uIFRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uXG4gKiBzZXJpZXMgY29tcGxldGVkIG9uIGl0cyBvd24gb3IgYGZhbHNlYCBpZiBpdCB3YXMgY2FuY2VsbGVkLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVmlld09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIFRoZSBpbml0aWFsIGNlbnRlciBmb3JcbiAqIHRoZSB2aWV3LiBJZiBhIHVzZXIgcHJvamVjdGlvbiBpcyBub3Qgc2V0LCB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gZm9yIHRoZSBjZW50ZXIgaXNcbiAqIHNwZWNpZmllZCB3aXRoIHRoZSBgcHJvamVjdGlvbmAgb3B0aW9uLiBMYXllciBzb3VyY2VzIHdpbGwgbm90IGJlIGZldGNoZWQgaWYgdGhpc1xuICogaXMgbm90IHNldCwgYnV0IHRoZSBjZW50ZXIgY2FuIGJlIHNldCBsYXRlciB3aXRoIHtAbGluayAjc2V0Q2VudGVyfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbnxudW1iZXJ9IFtjb25zdHJhaW5Sb3RhdGlvbj10cnVlXSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICogYGZhbHNlYCBtZWFucyBubyBjb25zdHJhaW50LiBgdHJ1ZWAgbWVhbnMgbm8gY29uc3RyYWludCwgYnV0IHNuYXAgdG8gemVyb1xuICogbmVhciB6ZXJvLiBBIG51bWJlciBjb25zdHJhaW5zIHRoZSByb3RhdGlvbiB0byB0aGF0IG51bWJlciBvZiB2YWx1ZXMuIEZvclxuICogZXhhbXBsZSwgYDRgIHdpbGwgY29uc3RyYWluIHRoZSByb3RhdGlvbiB0byAwLCA5MCwgMTgwLCBhbmQgMjcwIGRlZ3JlZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtlbmFibGVSb3RhdGlvbj10cnVlXSBFbmFibGUgcm90YXRpb24uXG4gKiBJZiBgZmFsc2VgLCBhIHJvdGF0aW9uIGNvbnN0cmFpbnQgdGhhdCBhbHdheXMgc2V0cyB0aGUgcm90YXRpb24gdG8gemVybyBpc1xuICogdXNlZC4gVGhlIGBjb25zdHJhaW5Sb3RhdGlvbmAgb3B0aW9uIGhhcyBubyBlZmZlY3QgaWYgYGVuYWJsZVJvdGF0aW9uYCBpc1xuICogYGZhbHNlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgZXh0ZW50IHRoYXQgY29uc3RyYWlucyB0aGVcbiAqIHZpZXcsIGluIG90aGVyIHdvcmRzLCBub3RoaW5nIG91dHNpZGUgb2YgdGhpcyBleHRlbnQgY2FuIGJlIHZpc2libGUgb24gdGhlIG1hcC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpbk9ubHlDZW50ZXI9ZmFsc2VdIElmIHRydWUsIHRoZSBleHRlbnRcbiAqIGNvbnN0cmFpbnQgd2lsbCBvbmx5IGFwcGx5IHRvIHRoZSB2aWV3IGNlbnRlciBhbmQgbm90IHRoZSB3aG9sZSBleHRlbnQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzbW9vdGhFeHRlbnRDb25zdHJhaW50PXRydWVdIElmIHRydWUsIHRoZSBleHRlbnRcbiAqIGNvbnN0cmFpbnQgd2lsbCBiZSBhcHBsaWVkIHNtb290aGx5LCBpLmUuIGFsbG93IHRoZSB2aWV3IHRvIGdvIHNsaWdodGx5IG91dHNpZGVcbiAqIG9mIHRoZSBnaXZlbiBgZXh0ZW50YC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiB1c2VkIHRvIGRldGVybWluZVxuICogdGhlIHJlc29sdXRpb24gY29uc3RyYWludC4gSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtaW5SZXNvbHV0aW9uYCAob3JcbiAqIGBtYXhab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gSWYgdW5zcGVjaWZpZWQgaXQgaXMgY2FsY3VsYXRlZCBpbiBzdWNoIGEgd2F5XG4gKiB0aGF0IHRoZSBwcm9qZWN0aW9uJ3MgdmFsaWRpdHkgZXh0ZW50IGZpdHMgaW4gYSAyNTZ4MjU2IHB4IHRpbGUuIElmIHRoZVxuICogcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3IgKHRoZSBkZWZhdWx0KSB0aGVuIGBtYXhSZXNvbHV0aW9uYCBkZWZhdWx0c1xuICogdG8gYDQwMDc1MDE2LjY4NTU3ODQ5IC8gMjU2ID0gMTU2NTQzLjAzMzkyODA0MDk3YC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiB1c2VkIHRvIGRldGVybWluZVxuICogdGhlIHJlc29sdXRpb24gY29uc3RyYWludC4gIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4UmVzb2x1dGlvbmAgKG9yXG4gKiBgbWluWm9vbWApIGFuZCBgem9vbUZhY3RvcmAuICBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGFzc3VtaW5nIDI5XG4gKiB6b29tIGxldmVscyAod2l0aCBhIGZhY3RvciBvZiAyKS4gSWYgdGhlIHByb2plY3Rpb24gaXMgU3BoZXJpY2FsIE1lcmNhdG9yXG4gKiAodGhlIGRlZmF1bHQpIHRoZW4gYG1pblJlc29sdXRpb25gIGRlZmF1bHRzIHRvXG4gKiBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgLyBNYXRoLnBvdygyLCAyOCkgPSAwLjAwMDU4MzE2ODI0NTU4MzkyNTNgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tPTI4XSBUaGUgbWF4aW11bSB6b29tIGxldmVsIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblpvb21gIChvclxuICogYG1heFJlc29sdXRpb25gKSBhbmQgYHpvb21GYWN0b3JgLiAgTm90ZSB0aGF0IGlmIGBtaW5SZXNvbHV0aW9uYCBpcyBhbHNvXG4gKiBwcm92aWRlZCwgaXQgaXMgZ2l2ZW4gcHJlY2VkZW5jZSBvdmVyIGBtYXhab29tYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBUaGUgbWluaW11bSB6b29tIGxldmVsIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZVxuICogcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1heFpvb21gIChvclxuICogYG1pblJlc29sdXRpb25gKSBhbmQgYHpvb21GYWN0b3JgLiAgTm90ZSB0aGF0IGlmIGBtYXhSZXNvbHV0aW9uYCBpcyBhbHNvXG4gKiBwcm92aWRlZCwgaXQgaXMgZ2l2ZW4gcHJlY2VkZW5jZSBvdmVyIGBtaW5ab29tYC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW211bHRpV29ybGQ9ZmFsc2VdIElmIGBmYWxzZWAgdGhlIHZpZXcgaXMgY29uc3RyYWluZWQgc29cbiAqIG9ubHkgb25lIHdvcmxkIGlzIHZpc2libGUsIGFuZCB5b3UgY2Fubm90IHBhbiBvZmYgdGhlIGVkZ2UuICBJZiBgdHJ1ZWAgdGhlIG1hcFxuICogbWF5IHNob3cgbXVsdGlwbGUgd29ybGRzIGF0IGxvdyB6b29tIGxldmVscy4gIE9ubHkgdXNlZCBpZiB0aGUgYHByb2plY3Rpb25gIGlzXG4gKiBnbG9iYWwuICBOb3RlIHRoYXQgaWYgYGV4dGVudGAgaXMgYWxzbyBwcm92aWRlZCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluUmVzb2x1dGlvbj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBhbHdheXNcbiAqIGFuaW1hdGUgdG8gdGhlIGNsb3Nlc3Qgem9vbSBsZXZlbCBhZnRlciBhbiBpbnRlcmFjdGlvbjsgZmFsc2UgbWVhbnNcbiAqIGludGVybWVkaWFyeSB6b29tIGxldmVscyBhcmUgYWxsb3dlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Ntb290aFJlc29sdXRpb25Db25zdHJhaW50PXRydWVdIElmIHRydWUsIHRoZSByZXNvbHV0aW9uXG4gKiBtaW4vbWF4IHZhbHVlcyB3aWxsIGJlIGFwcGxpZWQgc21vb3RobHksIGkuIGUuIGFsbG93IHRoZSB2aWV3IHRvIGV4Y2VlZCBzbGlnaHRseVxuICogdGhlIGdpdmVuIHJlc29sdXRpb24gb3Igem9vbSBib3VuZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaG93RnVsbEV4dGVudD1mYWxzZV0gQWxsb3cgdGhlIHZpZXcgdG8gYmUgem9vbWVkIG91dCB0b1xuICogc2hvdyB0aGUgZnVsbCBjb25maWd1cmVkIGV4dGVudC4gQnkgZGVmYXVsdCwgd2hlbiBhIHZpZXcgaXMgY29uZmlndXJlZCB3aXRoIGFuXG4gKiBleHRlbnQsIHVzZXJzIHdpbGwgbm90IGJlIGFibGUgdG8gem9vbSBvdXQgc28gdGhlIHZpZXdwb3J0IGV4Y2VlZHMgdGhlIGV4dGVudCBpblxuICogZWl0aGVyIGRpbWVuc2lvbi4gVGhpcyBtZWFucyB0aGUgZnVsbCBleHRlbnQgbWF5IG5vdCBiZSB2aXNpYmxlIGlmIHRoZSB2aWV3cG9ydFxuICogaXMgdGFsbGVyIG9yIHdpZGVyIHRoYW4gdGhlIGFzcGVjdCByYXRpbyBvZiB0aGUgY29uZmlndXJlZCBleHRlbnQuIElmXG4gKiBzaG93RnVsbEV4dGVudCBpcyB0cnVlLCB0aGUgdXNlciB3aWxsIGJlIGFibGUgdG8gem9vbSBvdXQgc28gdGhhdCB0aGUgdmlld3BvcnRcbiAqIGV4Y2VlZHMgdGhlIGhlaWdodCBvciB3aWR0aCBvZiB0aGUgY29uZmlndXJlZCBleHRlbnQsIGJ1dCBub3QgYm90aCwgYWxsb3dpbmcgdGhlXG4gKiBmdWxsIGV4dGVudCB0byBiZSBzaG93bi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbj0nRVBTRzozODU3J10gVGhlXG4gKiBwcm9qZWN0aW9uLiBUaGUgZGVmYXVsdCBpcyBTcGhlcmljYWwgTWVyY2F0b3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3Jlc29sdXRpb25dIFRoZSBpbml0aWFsIHJlc29sdXRpb24gZm9yIHRoZSB2aWV3LiBUaGVcbiAqIHVuaXRzIGFyZSBgcHJvamVjdGlvbmAgdW5pdHMgcGVyIHBpeGVsIChlLmcuIG1ldGVycyBwZXIgcGl4ZWwpLiBBblxuICogYWx0ZXJuYXRpdmUgdG8gc2V0dGluZyB0aGlzIGlzIHRvIHNldCBgem9vbWAuIExheWVyIHNvdXJjZXMgd2lsbCBub3QgYmVcbiAqIGZldGNoZWQgaWYgbmVpdGhlciB0aGlzIG5vciBgem9vbWAgYXJlIGRlZmluZWQsIGJ1dCB0aGV5IGNhbiBiZSBzZXQgbGF0ZXJcbiAqIHdpdGgge0BsaW5rICNzZXRab29tfSBvciB7QGxpbmsgI3NldFJlc29sdXRpb259LlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbcmVzb2x1dGlvbnNdIFJlc29sdXRpb25zIHRoYXQgZGV0ZXJtaW5lIHRoZVxuICogem9vbSBsZXZlbHMgaWYgc3BlY2lmaWVkLiBUaGUgaW5kZXggaW4gdGhlIGFycmF5IGNvcnJlc3BvbmRzIHRvIHRoZSB6b29tIGxldmVsLFxuICogdGhlcmVmb3JlIHRoZSByZXNvbHV0aW9uIHZhbHVlcyBoYXZlIHRvIGJlIGluIGRlc2NlbmRpbmcgb3JkZXIuIEl0IGFsc28gY29uc3RyYWluc1xuICogdGhlIHJlc29sdXRpb24gYnkgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUuIElmIHNldCB0aGUgYG1heFJlc29sdXRpb25gLFxuICogYG1pblJlc29sdXRpb25gLCBgbWluWm9vbWAsIGBtYXhab29tYCwgYW5kIGB6b29tRmFjdG9yYCBvcHRpb25zIGFyZSBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyb3RhdGlvbj0wXSBUaGUgaW5pdGlhbCByb3RhdGlvbiBmb3IgdGhlIHZpZXcgaW4gcmFkaWFuc1xuICogKHBvc2l0aXZlIHJvdGF0aW9uIGNsb2Nrd2lzZSwgMCBtZWFucyBOb3J0aCkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIE9ubHkgdXNlZCBpZiBgcmVzb2x1dGlvbmAgaXMgbm90IGRlZmluZWQuIFpvb21cbiAqIGxldmVsIHVzZWQgdG8gY2FsY3VsYXRlIHRoZSBpbml0aWFsIHJlc29sdXRpb24gZm9yIHRoZSB2aWV3LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRmFjdG9yPTJdIFRoZSB6b29tIGZhY3RvciB1c2VkIHRvIGNvbXB1dGUgdGhlXG4gKiBjb3JyZXNwb25kaW5nIHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSBbcGFkZGluZz1bMCwgMCwgMCwgMF1dIFBhZGRpbmcgKGluIGNzcyBwaXhlbHMpLlxuICogSWYgdGhlIG1hcCB2aWV3cG9ydCBpcyBwYXJ0aWFsbHkgY292ZXJlZCB3aXRoIG90aGVyIGNvbnRlbnQgKG92ZXJsYXlzKSBhbG9uZ1xuICogaXRzIGVkZ2VzLCB0aGlzIHNldHRpbmcgYWxsb3dzIHRvIHNoaWZ0IHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0IGF3YXkgZnJvbVxuICogdGhhdCBjb250ZW50LiBUaGUgb3JkZXIgb2YgdGhlIHZhbHVlcyBpcyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2ZcbiAqIHRoZSBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIFRoZSB6b29tIGxldmVsIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2YgdGhlXG4gKiBhbmltYXRpb24uIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGByZXNvbHV0aW9uYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZFxuICogb2YgdGhlIGFuaW1hdGlvbi4gIElmIGB6b29tYCBpcyBhbHNvIHByb3ZpZGVkLCB0aGlzIG9wdGlvbiB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIE9wdGlvbmFsIGFuY2hvciB0byByZW1haW4gZml4ZWRcbiAqIGR1cmluZyBhIHJvdGF0aW9uIG9yIHJlc29sdXRpb24gYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDAwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBbZWFzaW5nXSBUaGUgZWFzaW5nIGZ1bmN0aW9uIHVzZWRcbiAqIGR1cmluZyB0aGUgYW5pbWF0aW9uIChkZWZhdWx0cyB0byB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZy5pbkFuZE91dH0pLlxuICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIGZyYW1lIHdpdGggYSBudW1iZXIgcmVwcmVzZW50aW5nIGFcbiAqIGZyYWN0aW9uIG9mIHRoZSBhbmltYXRpb24ncyBkdXJhdGlvbi4gIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyXG4gKiBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0b3dhcmQgdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgKGluIHZpZXcgcHJvamVjdGlvbiBjb29yZGluYXRlcykuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbbmV4dENlbnRlcl0gVGhlIG5leHQgY2VudGVyIGR1cmluZyBhbiBhbmltYXRpb24gc2VyaWVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtuZXh0UmVzb2x1dGlvbl0gVGhlIG5leHQgcmVzb2x1dGlvbiBkdXJpbmcgYW4gYW5pbWF0aW9uIHNlcmllcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbmV4dFJvdGF0aW9uXSBUaGUgbmV4dCByb3RhdGlvbiBkdXJpbmcgYW4gYW5pbWF0aW9uIHNlcmllcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6b29tIFpvb20uXG4gKi9cblxuLyoqXG4gKiBMaWtlIHtAbGluayBpbXBvcnQoXCIuL01hcC5qc1wiKS5GcmFtZVN0YXRlfSwgYnV0IGp1c3QgYHZpZXdTdGF0ZWAgYW5kIGBleHRlbnRgLlxuICogQHR5cGVkZWYge09iamVjdH0gVmlld1N0YXRlTGF5ZXJTdGF0ZUV4dGVudFxuICogQHByb3BlcnR5IHtTdGF0ZX0gdmlld1N0YXRlIFZpZXcgc3RhdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudCAoaW4gdXNlciBwcm9qZWN0aW9uIGNvb3JkaW5hdGVzKS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5TdGF0ZT59IFtsYXllclN0YXRlc0FycmF5XSBMYXllciBzdGF0ZXMuXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IG1pbiB6b29tIGxldmVsIGZvciB0aGUgbWFwIHZpZXcuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5jb25zdCBERUZBVUxUX01JTl9aT09NID0gMDtcblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpjZW50ZXInfCdjaGFuZ2U6cmVzb2x1dGlvbid8J2NoYW5nZTpyb3RhdGlvbid9IFZpZXdPYmplY3RFdmVudFR5cGVzXG4gKi9cblxuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxWaWV3T2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xWaWV3T2JqZWN0RXZlbnRUeXBlcywgUmV0dXJuPn0gVmlld09uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIFZpZXcgb2JqZWN0IHJlcHJlc2VudHMgYSBzaW1wbGUgMkQgdmlldyBvZiB0aGUgbWFwLlxuICpcbiAqIFRoaXMgaXMgdGhlIG9iamVjdCB0byBhY3QgdXBvbiB0byBjaGFuZ2UgdGhlIGNlbnRlciwgcmVzb2x1dGlvbixcbiAqIGFuZCByb3RhdGlvbiBvZiB0aGUgbWFwLlxuICpcbiAqIEEgVmlldyBoYXMgYSBgcHJvamVjdGlvbmAuIFRoZSBwcm9qZWN0aW9uIGRldGVybWluZXMgdGhlXG4gKiBjb29yZGluYXRlIHN5c3RlbSBvZiB0aGUgY2VudGVyLCBhbmQgaXRzIHVuaXRzIGRldGVybWluZSB0aGUgdW5pdHMgb2YgdGhlXG4gKiByZXNvbHV0aW9uIChwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbCkuIFRoZSBkZWZhdWx0IHByb2plY3Rpb24gaXNcbiAqIFdlYiBNZXJjYXRvciAoRVBTRzozODU3KS5cbiAqXG4gKiAjIyMgVGhlIHZpZXcgc3RhdGVzXG4gKlxuICogQSBWaWV3IGlzIGRldGVybWluZWQgYnkgdGhyZWUgc3RhdGVzOiBgY2VudGVyYCwgYHJlc29sdXRpb25gLFxuICogYW5kIGByb3RhdGlvbmAuIEVhY2ggc3RhdGUgaGFzIGEgY29ycmVzcG9uZGluZyBnZXR0ZXIgYW5kIHNldHRlciwgZS5nLlxuICogYGdldENlbnRlcmAgYW5kIGBzZXRDZW50ZXJgIGZvciB0aGUgYGNlbnRlcmAgc3RhdGUuXG4gKlxuICogVGhlIGB6b29tYCBzdGF0ZSBpcyBhY3R1YWxseSBub3Qgc2F2ZWQgb24gdGhlIHZpZXc6IGFsbCBjb21wdXRhdGlvbnNcbiAqIGludGVybmFsbHkgdXNlIHRoZSBgcmVzb2x1dGlvbmAgc3RhdGUuIFN0aWxsLCB0aGUgYHNldFpvb21gIGFuZCBgZ2V0Wm9vbWBcbiAqIG1ldGhvZHMgYXJlIGF2YWlsYWJsZSwgYXMgd2VsbCBhcyBgZ2V0UmVzb2x1dGlvbkZvclpvb21gIGFuZFxuICogYGdldFpvb21Gb3JSZXNvbHV0aW9uYCB0byBzd2l0Y2ggZnJvbSBvbmUgc3lzdGVtIHRvIHRoZSBvdGhlci5cbiAqXG4gKiAjIyMgVGhlIGNvbnN0cmFpbnRzXG4gKlxuICogYHNldENlbnRlcmAsIGBzZXRSZXNvbHV0aW9uYCBhbmQgYHNldFJvdGF0aW9uYCBjYW4gYmUgdXNlZCB0byBjaGFuZ2UgdGhlXG4gKiBzdGF0ZXMgb2YgdGhlIHZpZXcsIGJ1dCBhbnkgY29uc3RyYWludCBkZWZpbmVkIGluIHRoZSBjb25zdHJ1Y3RvciB3aWxsXG4gKiBiZSBhcHBsaWVkIGFsb25nIHRoZSB3YXkuXG4gKlxuICogQSBWaWV3IG9iamVjdCBjYW4gaGF2ZSBhICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqLCBhICpyb3RhdGlvbiBjb25zdHJhaW50KlxuICogYW5kIGEgKmNlbnRlciBjb25zdHJhaW50Ki5cbiAqXG4gKiBUaGUgKnJlc29sdXRpb24gY29uc3RyYWludCogdHlwaWNhbGx5IHJlc3RyaWN0cyBtaW4vbWF4IHZhbHVlcyBhbmRcbiAqIHNuYXBzIHRvIHNwZWNpZmljIHJlc29sdXRpb25zLiBJdCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBmb2xsb3dpbmdcbiAqIG9wdGlvbnM6IGByZXNvbHV0aW9uc2AsIGBtYXhSZXNvbHV0aW9uYCwgYG1heFpvb21gIGFuZCBgem9vbUZhY3RvcmAuXG4gKiBJZiBgcmVzb2x1dGlvbnNgIGlzIHNldCwgdGhlIG90aGVyIHRocmVlIG9wdGlvbnMgYXJlIGlnbm9yZWQuIFNlZVxuICogZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvcHRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uIEJ5IGRlZmF1bHQsIHRoZSB2aWV3XG4gKiBvbmx5IGhhcyBhIG1pbi9tYXggcmVzdHJpY3Rpb24gYW5kIGFsbG93IGludGVybWVkaWFyeSB6b29tIGxldmVscyB3aGVuXG4gKiBwaW5jaC16b29taW5nIGZvciBleGFtcGxlLlxuICpcbiAqIFRoZSAqcm90YXRpb24gY29uc3RyYWludCogc25hcHMgdG8gc3BlY2lmaWMgYW5nbGVzLiBJdCBpcyBkZXRlcm1pbmVkXG4gKiBieSB0aGUgZm9sbG93aW5nIG9wdGlvbnM6IGBlbmFibGVSb3RhdGlvbmAgYW5kIGBjb25zdHJhaW5Sb3RhdGlvbmAuXG4gKiBCeSBkZWZhdWx0IHJvdGF0aW9uIGlzIGFsbG93ZWQgYW5kIGl0cyB2YWx1ZSBpcyBzbmFwcGVkIHRvIHplcm8gd2hlbiBhcHByb2FjaGluZyB0aGVcbiAqIGhvcml6b250YWwuXG4gKlxuICogVGhlICpjZW50ZXIgY29uc3RyYWludCogaXMgZGV0ZXJtaW5lZCBieSB0aGUgYGV4dGVudGAgb3B0aW9uLiBCeVxuICogZGVmYXVsdCB0aGUgdmlldyBjZW50ZXIgaXMgbm90IGNvbnN0cmFpbmVkIGF0IGFsbC5cbiAqXG4gKiAjIyMgQ2hhbmdpbmcgdGhlIHZpZXcgc3RhdGVcbiAqXG4gKiBJdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IGBzZXRab29tYCwgYHNldFJlc29sdXRpb25gLCBgc2V0Q2VudGVyYCBhbmRcbiAqIGBzZXRSb3RhdGlvbmAgYXJlIHN1YmplY3QgdG8gdGhlIGFib3ZlIG1lbnRpb25lZCBjb25zdHJhaW50cy4gQXMgc3VjaCwgaXRcbiAqIG1heSBzb21ldGltZXMgbm90IGJlIHBvc3NpYmxlIHRvIGtub3cgaW4gYWR2YW5jZSB0aGUgcmVzdWx0aW5nIHN0YXRlIG9mIHRoZVxuICogVmlldy4gRm9yIGV4YW1wbGUsIGNhbGxpbmcgYHNldFJlc29sdXRpb24oMTApYCBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdFxuICogYGdldFJlc29sdXRpb24oKWAgd2lsbCByZXR1cm4gYDEwYC5cbiAqXG4gKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCwgd2hlbiBhcHBseWluZyBhIGRlbHRhIG9uIHRoZSB2aWV3IHN0YXRlLCBvbmVcbiAqIHNob3VsZCB1c2UgYGFkanVzdENlbnRlcmAsIGBhZGp1c3RSb3RhdGlvbmAsIGBhZGp1c3Rab29tYCBhbmQgYGFkanVzdFJlc29sdXRpb25gXG4gKiByYXRoZXIgdGhhbiB0aGUgY29ycmVzcG9uZGluZyBzZXR0ZXJzLiBUaGlzIHdpbGwgbGV0IHZpZXcgZG8gaXRzIGludGVybmFsXG4gKiBjb21wdXRhdGlvbnMuIEJlc2lkZXMsIHRoZSBgYWRqdXN0KmAgbWV0aG9kcyBhbHNvIHRha2UgYW4gYGFuY2hvcmBcbiAqIGFyZ3VtZW50IHdoaWNoIGFsbG93cyBzcGVjaWZ5aW5nIGFuIG9yaWdpbiBmb3IgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICpcbiAqICMjIyBJbnRlcmFjdGluZyB3aXRoIHRoZSB2aWV3XG4gKlxuICogVmlldyBjb25zdHJhaW50cyBhcmUgdXN1YWxseSBvbmx5IGFwcGxpZWQgd2hlbiB0aGUgdmlldyBpcyAqYXQgcmVzdCosIG1lYW5pbmcgdGhhdFxuICogbm8gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIG9uZ29pbmcuIEFzIHN1Y2gsIGlmIHRoZSB1c2VyIHB1dHMgdGhlIHZpZXcgaW4gYVxuICogc3RhdGUgdGhhdCBpcyBub3QgZXF1aXZhbGVudCB0byBhIGNvbnN0cmFpbmVkIG9uZSAoZS5nLiByb3RhdGluZyB0aGUgdmlldyB3aGVuXG4gKiB0aGUgc25hcCBhbmdsZSBpcyAwKSwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGF0IHRoZSBpbnRlcmFjdGlvbiBlbmQgdG9cbiAqIHB1dCBiYWNrIHRoZSB2aWV3IHRvIGEgc3RhYmxlIHN0YXRlO1xuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgVmlldyBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gW29wdGlvbnNdIFZpZXcgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uY2U7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge1ZpZXdPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgKi9cbiAgICB0aGlzLmhpbnRzXyA9IFswLCAwXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PEFycmF5PEFuaW1hdGlvbj4+fVxuICAgICAqL1xuICAgIHRoaXMuYW5pbWF0aW9uc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudmlld3BvcnRTaXplXyA9IFsxMDAsIDEwMF07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRDZW50ZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRSb3RhdGlvbl87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLm5leHRDZW50ZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm5leHRSZXNvbHV0aW9uXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm5leHRSb3RhdGlvbl87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbikge1xuICAgICAgZGlzYWJsZUNvb3JkaW5hdGVXYXJuaW5nKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIHRoaXMucHJvamVjdGlvbl8pO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5leHRlbnQpIHtcbiAgICAgIG9wdGlvbnMuZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQob3B0aW9ucy5leHRlbnQsIHRoaXMucHJvamVjdGlvbl8pO1xuICAgIH1cblxuICAgIHRoaXMuYXBwbHlPcHRpb25zXyhvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdXAgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gb3B0aW9ucy5cbiAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gICAqL1xuICBhcHBseU9wdGlvbnNfKG9wdGlvbnMpIHtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gVmlld1Byb3BlcnR5KSB7XG4gICAgICBkZWxldGUgcHJvcGVydGllc1trZXldO1xuICAgIH1cbiAgICB0aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcywgdHJ1ZSk7XG5cbiAgICBjb25zdCByZXNvbHV0aW9uQ29uc3RyYWludEluZm8gPSBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1heFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5SZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5SZXNvbHV0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuem9vbUZhY3Rvcl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uem9vbUZhY3RvcjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucmVzb2x1dGlvbnNfID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucGFkZGluZ18gPSBvcHRpb25zLnBhZGRpbmc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5ab29tXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5taW5ab29tO1xuXG4gICAgY29uc3QgY2VudGVyQ29uc3RyYWludCA9IGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgY29uc3QgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uY29uc3RyYWludDtcbiAgICBjb25zdCByb3RhdGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQob3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtDb25zdHJhaW50c31cbiAgICAgKi9cbiAgICB0aGlzLmNvbnN0cmFpbnRzXyA9IHtcbiAgICAgIGNlbnRlcjogY2VudGVyQ29uc3RyYWludCxcbiAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb25Db25zdHJhaW50LFxuICAgICAgcm90YXRpb246IHJvdGF0aW9uQ29uc3RyYWludCxcbiAgICB9O1xuXG4gICAgdGhpcy5zZXRSb3RhdGlvbihvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJvdGF0aW9uIDogMCk7XG4gICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChcbiAgICAgIG9wdGlvbnMuY2VudGVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNlbnRlciA6IG51bGxcbiAgICApO1xuICAgIGlmIChvcHRpb25zLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRSZXNvbHV0aW9uKG9wdGlvbnMucmVzb2x1dGlvbik7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zZXRab29tKG9wdGlvbnMuem9vbSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhZGRpbmcgKGluIGNzcyBwaXhlbHMpLlxuICAgKiBJZiB0aGUgbWFwIHZpZXdwb3J0IGlzIHBhcnRpYWxseSBjb3ZlcmVkIHdpdGggb3RoZXIgY29udGVudCAob3ZlcmxheXMpIGFsb25nXG4gICAqIGl0cyBlZGdlcywgdGhpcyBzZXR0aW5nIGFsbG93cyB0byBzaGlmdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydCBhd2F5IGZyb20gdGhhdFxuICAgKiBjb250ZW50LiBUaGUgb3JkZXIgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgaXMgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LlxuICAgKiBUaGUgZGVmYXVsdCBpcyBubyBwYWRkaW5nLCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIGBbMCwgMCwgMCwgMF1gLlxuICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAqIEBhcGlcbiAgICovXG4gIGdldCBwYWRkaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnBhZGRpbmdfO1xuICB9XG4gIHNldCBwYWRkaW5nKHBhZGRpbmcpIHtcbiAgICBsZXQgb2xkUGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgdGhpcy5wYWRkaW5nXyA9IHBhZGRpbmc7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgIGlmIChjZW50ZXIpIHtcbiAgICAgIGNvbnN0IG5ld1BhZGRpbmcgPSBwYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgIG9sZFBhZGRpbmcgPSBvbGRQYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgIGNvbnN0IHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgIGNvbnN0IG9mZnNldFggPVxuICAgICAgICAocmVzb2x1dGlvbiAvIDIpICpcbiAgICAgICAgKG5ld1BhZGRpbmdbM10gLSBvbGRQYWRkaW5nWzNdICsgb2xkUGFkZGluZ1sxXSAtIG5ld1BhZGRpbmdbMV0pO1xuICAgICAgY29uc3Qgb2Zmc2V0WSA9XG4gICAgICAgIChyZXNvbHV0aW9uIC8gMikgKlxuICAgICAgICAobmV3UGFkZGluZ1swXSAtIG9sZFBhZGRpbmdbMF0gKyBvbGRQYWRkaW5nWzJdIC0gbmV3UGFkZGluZ1syXSk7XG4gICAgICB0aGlzLnNldENlbnRlckludGVybmFsKFtjZW50ZXJbMF0gKyBvZmZzZXRYLCBjZW50ZXJbMV0gLSBvZmZzZXRZXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiB1cGRhdGVkIHZlcnNpb24gb2YgdGhlIHZpZXcgb3B0aW9ucyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmlldy4gIFRoZVxuICAgKiBjdXJyZW50IHJlc29sdXRpb24gKG9yIHpvb20pLCBjZW50ZXIsIGFuZCByb3RhdGlvbiBhcmUgYXBwbGllZCB0byBhbnkgc3RvcmVkXG4gICAqIG9wdGlvbnMuICBUaGUgcHJvdmlkZWQgb3B0aW9ucyBjYW4gYmUgdXNlZCB0byBhcHBseSBuZXcgbWluL21heCB6b29tIG9yXG4gICAqIHJlc29sdXRpb24gbGltaXRzLlxuICAgKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBuZXdPcHRpb25zIE5ldyBvcHRpb25zIHRvIGJlIGFwcGxpZWQuXG4gICAqIEByZXR1cm4ge1ZpZXdPcHRpb25zfSBOZXcgb3B0aW9ucyB1cGRhdGVkIHdpdGggdGhlIGN1cnJlbnQgdmlldyBzdGF0ZS5cbiAgICovXG4gIGdldFVwZGF0ZWRPcHRpb25zXyhuZXdPcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuZ2V0UHJvcGVydGllcygpO1xuXG4gICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG9wdGlvbnMucmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLnpvb20gPSB0aGlzLmdldFpvb20oKTtcbiAgICB9XG5cbiAgICAvLyBwcmVzZXJ2ZSBjZW50ZXJcbiAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcblxuICAgIC8vIHByZXNlcnZlIHJvdGF0aW9uXG4gICAgb3B0aW9ucy5yb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zLCBuZXdPcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbmltYXRlIHRoZSB2aWV3LiAgVGhlIHZpZXcncyBjZW50ZXIsIHpvb20gKG9yIHJlc29sdXRpb24pLCBhbmQgcm90YXRpb25cbiAgICogY2FuIGJlIGFuaW1hdGVkIGZvciBzbW9vdGggdHJhbnNpdGlvbnMgYmV0d2VlbiB2aWV3IHN0YXRlcy4gIEZvciBleGFtcGxlLFxuICAgKiB0byBhbmltYXRlIHRoZSB2aWV3IHRvIGEgbmV3IHpvb20gbGV2ZWw6XG4gICAqXG4gICAqICAgICB2aWV3LmFuaW1hdGUoe3pvb206IHZpZXcuZ2V0Wm9vbSgpICsgMX0pO1xuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGUgYW5pbWF0aW9uIGxhc3RzIG9uZSBzZWNvbmQgYW5kIHVzZXMgaW4tYW5kLW91dCBlYXNpbmcuICBZb3VcbiAgICogY2FuIGN1c3RvbWl6ZSB0aGlzIGJlaGF2aW9yIGJ5IGluY2x1ZGluZyBgZHVyYXRpb25gIChpbiBtaWxsaXNlY29uZHMpIGFuZFxuICAgKiBgZWFzaW5nYCBvcHRpb25zIChzZWUge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmd9KS5cbiAgICpcbiAgICogVG8gY2hhaW4gdG9nZXRoZXIgbXVsdGlwbGUgYW5pbWF0aW9ucywgY2FsbCB0aGUgbWV0aG9kIHdpdGggbXVsdGlwbGVcbiAgICogYW5pbWF0aW9uIG9iamVjdHMuICBGb3IgZXhhbXBsZSwgdG8gZmlyc3Qgem9vbSBhbmQgdGhlbiBwYW46XG4gICAqXG4gICAqICAgICB2aWV3LmFuaW1hdGUoe3pvb206IDEwfSwge2NlbnRlcjogWzAsIDBdfSk7XG4gICAqXG4gICAqIElmIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gYXMgdGhlIGxhc3QgYXJndW1lbnQgdG8gdGhlIGFuaW1hdGUgbWV0aG9kLCBpdFxuICAgKiB3aWxsIGdldCBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbiBhbmltYXRpb24gc2VyaWVzLiAgVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICogY2FsbGVkIHdpdGggYHRydWVgIGlmIHRoZSBhbmltYXRpb24gc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWBcbiAgICogaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAgICpcbiAgICogQW5pbWF0aW9ucyBhcmUgY2FuY2VsbGVkIGJ5IHVzZXIgaW50ZXJhY3Rpb25zIChlLmcuIGRyYWdnaW5nIHRoZSBtYXApIG9yIGJ5XG4gICAqIGNhbGxpbmcgYHZpZXcuc2V0Q2VudGVyKClgLCBgdmlldy5zZXRSZXNvbHV0aW9uKClgLCBvciBgdmlldy5zZXRSb3RhdGlvbigpYFxuICAgKiAob3IgYW5vdGhlciBtZXRob2QgdGhhdCBjYWxscyBvbmUgb2YgdGhlc2UpLlxuICAgKlxuICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uXG4gICAqICAgICBvcHRpb25zLiAgTXVsdGlwbGUgYW5pbWF0aW9ucyBjYW4gYmUgcnVuIGluIHNlcmllcyBieSBwYXNzaW5nIG11bHRpcGxlXG4gICAqICAgICBvcHRpb25zIG9iamVjdHMuICBUbyBydW4gbXVsdGlwbGUgYW5pbWF0aW9ucyBpbiBwYXJhbGxlbCwgY2FsbCB0aGUgbWV0aG9kXG4gICAqICAgICBtdWx0aXBsZSB0aW1lcy4gIEFuIG9wdGlvbmFsIGNhbGxiYWNrIGNhbiBiZSBwcm92aWRlZCBhcyBhIGZpbmFsXG4gICAqICAgICBhcmd1bWVudC4gIFRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXJcbiAgICogICAgIHRoZSBhbmltYXRpb24gY29tcGxldGVkIHdpdGhvdXQgYmVpbmcgY2FuY2VsbGVkLlxuICAgKiBAYXBpXG4gICAqL1xuICBhbmltYXRlKHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMuaXNEZWYoKSAmJiAhdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgfVxuICAgIGNvbnN0IGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICBsZXQgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIG9wdGlvbnMuY2VudGVyID0gZnJvbVVzZXJDb29yZGluYXRlKFxuICAgICAgICAgIG9wdGlvbnMuY2VudGVyLFxuICAgICAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy5hbmNob3IpIHtcbiAgICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBvcHRpb25zLmFuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShcbiAgICAgICAgICBvcHRpb25zLmFuY2hvcixcbiAgICAgICAgICB0aGlzLmdldFByb2plY3Rpb24oKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgYXJnc1tpXSA9IG9wdGlvbnM7XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0ZUludGVybmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Li4uKEFuaW1hdGlvbk9wdGlvbnN8ZnVuY3Rpb24oYm9vbGVhbik6IHZvaWQpfSB2YXJfYXJncyBBbmltYXRpb24gb3B0aW9ucy5cbiAgICovXG4gIGFuaW1hdGVJbnRlcm5hbCh2YXJfYXJncykge1xuICAgIGxldCBhbmltYXRpb25Db3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgbGV0IGNhbGxiYWNrO1xuICAgIGlmIChcbiAgICAgIGFuaW1hdGlvbkNvdW50ID4gMSAmJlxuICAgICAgdHlwZW9mIGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdID09PSAnZnVuY3Rpb24nXG4gICAgKSB7XG4gICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xuICAgICAgLS1hbmltYXRpb25Db3VudDtcbiAgICB9XG5cbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yICg7IGkgPCBhbmltYXRpb25Db3VudCAmJiAhdGhpcy5pc0RlZigpOyArK2kpIHtcbiAgICAgIC8vIGlmIHZpZXcgcHJvcGVydGllcyBhcmUgbm90IHlldCBzZXQsIHNob3J0Y3V0IHRvIHRoZSBmaW5hbCBzdGF0ZVxuICAgICAgY29uc3Qgc3RhdGUgPSBhcmd1bWVudHNbaV07XG4gICAgICBpZiAoc3RhdGUuY2VudGVyKSB7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoc3RhdGUuY2VudGVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5yZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihzdGF0ZS5yZXNvbHV0aW9uKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuc2V0Um90YXRpb24oc3RhdGUucm90YXRpb24pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA9PT0gYW5pbWF0aW9uQ291bnQpIHtcbiAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICBsZXQgY2VudGVyID0gdGhpcy50YXJnZXRDZW50ZXJfLnNsaWNlKCk7XG4gICAgbGV0IHJlc29sdXRpb24gPSB0aGlzLnRhcmdldFJlc29sdXRpb25fO1xuICAgIGxldCByb3RhdGlvbiA9IHRoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgIGNvbnN0IHNlcmllcyA9IFtdO1xuICAgIGZvciAoOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IC8qKiBAdHlwZSB7QW5pbWF0aW9uT3B0aW9uc30gKi8gKGFyZ3VtZW50c1tpXSk7XG5cbiAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICBjb21wbGV0ZTogZmFsc2UsXG4gICAgICAgIGFuY2hvcjogb3B0aW9ucy5hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMCxcbiAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBpbkFuZE91dCxcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgfTtcblxuICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XG4gICAgICAgIGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgPSBjZW50ZXI7XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIgPSBvcHRpb25zLmNlbnRlci5zbGljZSgpO1xuICAgICAgICBjZW50ZXIgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy56b29tKTtcbiAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlc29sdXRpb24pIHtcbiAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IG9wdGlvbnMucmVzb2x1dGlvbjtcbiAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgICAgICBjb25zdCBkZWx0YSA9XG4gICAgICAgICAgbW9kdWxvKG9wdGlvbnMucm90YXRpb24gLSByb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XG4gICAgICAgIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiA9IHJvdGF0aW9uICsgZGVsdGE7XG4gICAgICAgIHJvdGF0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uO1xuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBpZiBhbmltYXRpb24gaXMgYSBuby1vcFxuICAgICAgaWYgKGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pKSB7XG4gICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgIC8vIHdlIHN0aWxsIHB1c2ggaXQgb250byB0aGUgc2VyaWVzIGZvciBjYWxsYmFjayBoYW5kbGluZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhcnQgKz0gYW5pbWF0aW9uLmR1cmF0aW9uO1xuICAgICAgfVxuICAgICAgc2VyaWVzLnB1c2goYW5pbWF0aW9uKTtcbiAgICB9XG4gICAgdGhpcy5hbmltYXRpb25zXy5wdXNoKHNlcmllcyk7XG4gICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LkFOSU1BVElORywgMSk7XG4gICAgdGhpcy51cGRhdGVBbmltYXRpb25zXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGUgdmlldyBpcyBiZWluZyBhbmltYXRlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEFuaW1hdGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5oaW50c19bVmlld0hpbnQuQU5JTUFUSU5HXSA+IDA7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggdGhlIHZpZXcsIHN1Y2ggYXMgcGFubmluZyBvciB6b29taW5nLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdmlldyBpcyBiZWluZyBpbnRlcmFjdGVkIHdpdGguXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEludGVyYWN0aW5nKCkge1xuICAgIHJldHVybiB0aGlzLmhpbnRzX1tWaWV3SGludC5JTlRFUkFDVElOR10gPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbmNlbCBhbnkgb25nb2luZyBhbmltYXRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBjYW5jZWxBbmltYXRpb25zKCkge1xuICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIC10aGlzLmhpbnRzX1tWaWV3SGludC5BTklNQVRJTkddKTtcbiAgICBsZXQgYW5jaG9yO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3Qgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcbiAgICAgIGlmIChzZXJpZXNbMF0uY2FsbGJhY2spIHtcbiAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soc2VyaWVzWzBdLmNhbGxiYWNrLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBmb3IgKGxldCBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IHNlcmllc1tqXTtcbiAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgYW5jaG9yID0gYW5pbWF0aW9uLmFuY2hvcjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5jYW5jZWxBbmNob3JfID0gYW5jaG9yO1xuICAgIHRoaXMubmV4dENlbnRlcl8gPSBudWxsO1xuICAgIHRoaXMubmV4dFJlc29sdXRpb25fID0gTmFOO1xuICAgIHRoaXMubmV4dFJvdGF0aW9uXyA9IE5hTjtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgYWxsIGFuaW1hdGlvbnMuXG4gICAqL1xuICB1cGRhdGVBbmltYXRpb25zXygpIHtcbiAgICBpZiAodGhpcy51cGRhdGVBbmltYXRpb25LZXlfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5Xyk7XG4gICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGxldCBtb3JlID0gZmFsc2U7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgIGNvbnN0IHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICBsZXQgc2VyaWVzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgZm9yIChsZXQgaiA9IDAsIGpqID0gc2VyaWVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgY29uc3QgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICBpZiAoYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZWxhcHNlZCA9IG5vdyAtIGFuaW1hdGlvbi5zdGFydDtcbiAgICAgICAgbGV0IGZyYWN0aW9uID1cbiAgICAgICAgICBhbmltYXRpb24uZHVyYXRpb24gPiAwID8gZWxhcHNlZCAvIGFuaW1hdGlvbi5kdXJhdGlvbiA6IDE7XG4gICAgICAgIGlmIChmcmFjdGlvbiA+PSAxKSB7XG4gICAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICBmcmFjdGlvbiA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VyaWVzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9ncmVzcyA9IGFuaW1hdGlvbi5lYXNpbmcoZnJhY3Rpb24pO1xuICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlcikge1xuICAgICAgICAgIGNvbnN0IHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcbiAgICAgICAgICBjb25zdCB5MCA9IGFuaW1hdGlvbi5zb3VyY2VDZW50ZXJbMV07XG4gICAgICAgICAgY29uc3QgeDEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzBdO1xuICAgICAgICAgIGNvbnN0IHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcbiAgICAgICAgICB0aGlzLm5leHRDZW50ZXJfID0gYW5pbWF0aW9uLnRhcmdldENlbnRlcjtcbiAgICAgICAgICBjb25zdCB4ID0geDAgKyBwcm9ncmVzcyAqICh4MSAtIHgwKTtcbiAgICAgICAgICBjb25zdCB5ID0geTAgKyBwcm9ncmVzcyAqICh5MSAtIHkwKTtcbiAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBbeCwgeV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICYmIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgY29uc3QgcmVzb2x1dGlvbiA9XG4gICAgICAgICAgICBwcm9ncmVzcyA9PT0gMVxuICAgICAgICAgICAgICA/IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uXG4gICAgICAgICAgICAgIDogYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gK1xuICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgIChhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgY29uc3QgY29uc3RyYWluZWRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihcbiAgICAgICAgICAgICAgcmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgc2l6ZSxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShcbiAgICAgICAgICAgICAgY29uc3RyYWluZWRSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICBhbmltYXRpb24uYW5jaG9yXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm5leHRSZXNvbHV0aW9uXyA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8odHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3Qgcm90YXRpb24gPVxuICAgICAgICAgICAgcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgPyBtb2R1bG8oYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICsgTWF0aC5QSSwgMiAqIE1hdGguUEkpIC1cbiAgICAgICAgICAgICAgICBNYXRoLlBJXG4gICAgICAgICAgICAgIDogYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcyAqXG4gICAgICAgICAgICAgICAgICAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcbiAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgY29uc3QgY29uc3RyYWluZWRSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKFxuICAgICAgICAgICAgICByb3RhdGlvbixcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKFxuICAgICAgICAgICAgICBjb25zdHJhaW5lZFJvdGF0aW9uLFxuICAgICAgICAgICAgICBhbmltYXRpb24uYW5jaG9yXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm5leHRSb3RhdGlvbl8gPSBhbmltYXRpb24udGFyZ2V0Um90YXRpb247XG4gICAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICBtb3JlID0gdHJ1ZTtcbiAgICAgICAgaWYgKCFhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHNlcmllc0NvbXBsZXRlKSB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc19baV0gPSBudWxsO1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAtMSk7XG4gICAgICAgIHRoaXMubmV4dENlbnRlcl8gPSBudWxsO1xuICAgICAgICB0aGlzLm5leHRSZXNvbHV0aW9uXyA9IE5hTjtcbiAgICAgICAgdGhpcy5uZXh0Um90YXRpb25fID0gTmFOO1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHNlcmllc1swXS5jYWxsYmFjaztcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHBydW5lIGNvbXBsZXRlZCBzZXJpZXNcbiAgICB0aGlzLmFuaW1hdGlvbnNfID0gdGhpcy5hbmltYXRpb25zXy5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKG1vcmUgJiYgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShcbiAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25zXy5iaW5kKHRoaXMpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgUm90YXRpb24gYW5jaG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3Igcm90YXRpb24gYW5kIGFuY2hvci5cbiAgICovXG4gIGNhbGN1bGF0ZUNlbnRlclJvdGF0ZShyb3RhdGlvbiwgYW5jaG9yKSB7XG4gICAgbGV0IGNlbnRlcjtcbiAgICBjb25zdCBjdXJyZW50Q2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFpvb20gYW5jaG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3IgcmVzb2x1dGlvbiBhbmQgYW5jaG9yLlxuICAgKi9cbiAgY2FsY3VsYXRlQ2VudGVyWm9vbShyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICBsZXQgY2VudGVyO1xuICAgIGNvbnN0IGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgY29uc3QgY3VycmVudFJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHggPVxuICAgICAgICBhbmNob3JbMF0gLVxuICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgIGNvbnN0IHkgPVxuICAgICAgICBhbmNob3JbMV0gLVxuICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMV0gLSBjdXJyZW50Q2VudGVyWzFdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgIGNlbnRlciA9IFt4LCB5XTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IHZpZXdwb3J0IHNpemUuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcm90YXRpb25dIFRha2UgaW50byBhY2NvdW50IHRoZSByb3RhdGlvbiBvZiB0aGUgdmlld3BvcnQgd2hlbiBnaXZpbmcgdGhlIHNpemVcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFZpZXdwb3J0IHNpemUgb3IgYFsxMDAsIDEwMF1gIHdoZW4gbm8gdmlld3BvcnQgaXMgZm91bmQuXG4gICAqL1xuICBnZXRWaWV3cG9ydFNpemVfKHJvdGF0aW9uKSB7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMudmlld3BvcnRTaXplXztcbiAgICBpZiAocm90YXRpb24pIHtcbiAgICAgIGNvbnN0IHcgPSBzaXplWzBdO1xuICAgICAgY29uc3QgaCA9IHNpemVbMV07XG4gICAgICByZXR1cm4gW1xuICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5jb3Mocm90YXRpb24pKSArIE1hdGguYWJzKGggKiBNYXRoLnNpbihyb3RhdGlvbikpLFxuICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5zaW4ocm90YXRpb24pKSArIE1hdGguYWJzKGggKiBNYXRoLmNvcyhyb3RhdGlvbikpLFxuICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpemU7XG4gIH1cblxuICAvKipcbiAgICogU3RvcmVzIHRoZSB2aWV3cG9ydCBzaXplIG9uIHRoZSB2aWV3LiBUaGUgdmlld3BvcnQgc2l6ZSBpcyBub3QgcmVhZCBldmVyeSB0aW1lIGZyb20gdGhlIERPTVxuICAgKiB0byBhdm9pZCBwZXJmb3JtYW5jZSBoaXQgYW5kIGxheW91dCByZWZsb3cuXG4gICAqIFRoaXMgc2hvdWxkIGJlIGRvbmUgb24gbWFwIHNpemUgY2hhbmdlLlxuICAgKiBOb3RlOiB0aGUgY29uc3RyYWludHMgYXJlIG5vdCByZXNvbHZlZCBkdXJpbmcgYW4gYW5pbWF0aW9uIHRvIGF2b2lkIHN0b3BwaW5nIGl0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtzaXplXSBWaWV3cG9ydCBzaXplOyBpZiB1bmRlZmluZWQsIFsxMDAsIDEwMF0gaXMgYXNzdW1lZFxuICAgKi9cbiAgc2V0Vmlld3BvcnRTaXplKHNpemUpIHtcbiAgICB0aGlzLnZpZXdwb3J0U2l6ZV8gPSBBcnJheS5pc0FycmF5KHNpemUpID8gc2l6ZS5zbGljZSgpIDogWzEwMCwgMTAwXTtcbiAgICBpZiAoIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENlbnRlcigpIHtcbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgfVxuICAgIHJldHVybiB0b1VzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmlldyBjZW50ZXIgd2l0aG91dCB0cmFuc2Zvcm1pbmcgdG8gdXNlciBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqL1xuICBnZXRDZW50ZXJJbnRlcm5hbCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9ICovIChcbiAgICAgIHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtDb25zdHJhaW50c30gQ29uc3RyYWludHMuXG4gICAqL1xuICBnZXRDb25zdHJhaW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c187XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gUmVzb2x1dGlvbiBjb25zdHJhaW50IGlzIHNldFxuICAgKi9cbiAgZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQoJ2NvbnN0cmFpblJlc29sdXRpb24nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtoaW50c10gRGVzdGluYXRpb24gYXJyYXkuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEhpbnQuXG4gICAqL1xuICBnZXRIaW50cyhoaW50cykge1xuICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBoaW50c1swXSA9IHRoaXMuaGludHNfWzBdO1xuICAgICAgaGludHNbMV0gPSB0aGlzLmhpbnRzX1sxXTtcbiAgICAgIHJldHVybiBoaW50cztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGludHNfLnNsaWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHRoZSBleHRlbnQgZm9yIHRoZSBjdXJyZW50IHZpZXcgc3RhdGUgYW5kIHRoZSBwYXNzZWQgc2l6ZS5cbiAgICogVGhlIHNpemUgaXMgdGhlIHBpeGVsIGRpbWVuc2lvbnMgb2YgdGhlIGJveCBpbnRvIHdoaWNoIHRoZSBjYWxjdWxhdGVkIGV4dGVudFxuICAgKiBzaG91bGQgZml0LiBJbiBtb3N0IGNhc2VzIHlvdSB3YW50IHRvIGdldCB0aGUgZXh0ZW50IG9mIHRoZSBlbnRpcmUgbWFwLFxuICAgKiB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIEJveCBwaXhlbCBzaXplLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBzaXplXG4gICAqIG9mIHRoZSBtYXAgdGhhdCB1c2VzIHRoaXMgdmlldyB3aWxsIGJlIHVzZWQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBjYWxjdWxhdGVFeHRlbnQoc2l6ZSkge1xuICAgIGNvbnN0IGV4dGVudCA9IHRoaXMuY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwoc2l6ZSk7XG4gICAgcmV0dXJuIHRvVXNlckV4dGVudChleHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCxcbiAgICogdGhlIG1hcCdzIGxhc3Qga25vd24gdmlld3BvcnQgc2l6ZSB3aWxsIGJlIHVzZWQuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKi9cbiAgY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwoc2l6ZSkge1xuICAgIHNpemUgPSBzaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgIGNvbnN0IGNlbnRlciA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAoXG4gICAgICB0aGlzLmdldENlbnRlckludGVybmFsKClcbiAgICApO1xuICAgIGFzc2VydChjZW50ZXIsIDEpOyAvLyBUaGUgdmlldyBjZW50ZXIgaXMgbm90IGRlZmluZWRcbiAgICBjb25zdCByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHshbnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgIGFzc2VydChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQsIDIpOyAvLyBUaGUgdmlldyByZXNvbHV0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgY29uc3Qgcm90YXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgIGFzc2VydChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkLCAzKTsgLy8gVGhlIHZpZXcgcm90YXRpb24gaXMgbm90IGRlZmluZWRcblxuICAgIHJldHVybiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXhSZXNvbHV0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm1heFJlc29sdXRpb25fO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1pblJlc29sdXRpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubWluUmVzb2x1dGlvbl87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1heFpvb20oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoXG4gICAgICB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWluUmVzb2x1dGlvbl8pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBuZXcgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gVGhlIG1heGltdW0gem9vbSBsZXZlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0TWF4Wm9vbSh6b29tKSB7XG4gICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHttYXhab29tOiB6b29tfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWluaW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNaW5ab29tKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKFxuICAgICAgdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgbmV3IG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1pblpvb20oem9vbSkge1xuICAgIHRoaXMuYXBwbHlPcHRpb25zXyh0aGlzLmdldFVwZGF0ZWRPcHRpb25zXyh7bWluWm9vbTogem9vbX0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgd2hldGhlciB0aGUgdmlldyBzaG91bGQgYWxsb3cgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVuYWJsZWQgV2hldGhlciB0aGUgcmVzb2x1dGlvbiBpcyBjb25zdHJhaW5lZC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0Q29uc3RyYWluUmVzb2x1dGlvbihlbmFibGVkKSB7XG4gICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHtjb25zdHJhaW5SZXNvbHV0aW9uOiBlbmFibGVkfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UHJvamVjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJlc29sdXRpb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9ucyBmb3IgdGhlIHZpZXcuIFRoaXMgcmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzb2x1dGlvbnNcbiAgICogcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgVmlldywgb3IgdW5kZWZpbmVkIGlmIG5vbmUgd2VyZSBnaXZlbi5cbiAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9ucyBvZiB0aGUgdmlldy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UmVzb2x1dGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVzb2x1dGlvbiBmb3IgYSBwcm92aWRlZCBleHRlbnQgKGluIG1hcCB1bml0cykgYW5kIHNpemUgKGluIHBpeGVscykuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gQm94IHBpeGVsIHNpemUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIHByb3ZpZGVkIGV4dGVudCB3aWxsIHJlbmRlciBhdFxuICAgKiAgICAgdGhlIGdpdmVuIHNpemUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJlc29sdXRpb25Gb3JFeHRlbnQoZXh0ZW50LCBzaXplKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKFxuICAgICAgZnJvbVVzZXJFeHRlbnQoZXh0ZW50LCB0aGlzLmdldFByb2plY3Rpb24oKSksXG4gICAgICBzaXplXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBwcm92aWRlZCBleHRlbnQgd2lsbCByZW5kZXIgYXRcbiAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgKi9cbiAgZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKGV4dGVudCwgc2l6ZSkge1xuICAgIHNpemUgPSBzaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgIGNvbnN0IHhSZXNvbHV0aW9uID0gZ2V0V2lkdGgoZXh0ZW50KSAvIHNpemVbMF07XG4gICAgY29uc3QgeVJlc29sdXRpb24gPSBnZXRIZWlnaHQoZXh0ZW50KSAvIHNpemVbMV07XG4gICAgcmV0dXJuIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbik7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAqIHJlc29sdXRpb24uIEV4cG9uZW50aWFsIHNjYWxpbmcgaXMgYXNzdW1lZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtwb3dlcl0gUG93ZXIuXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gUmVzb2x1dGlvbiBmb3IgdmFsdWUgZnVuY3Rpb24uXG4gICAqL1xuICBnZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbihwb3dlcikge1xuICAgIHBvd2VyID0gcG93ZXIgfHwgMjtcbiAgICBjb25zdCBtYXhSZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24odGhpcy5tYXhSZXNvbHV0aW9uXyk7XG4gICAgY29uc3QgbWluUmVzb2x1dGlvbiA9IHRoaXMubWluUmVzb2x1dGlvbl87XG4gICAgY29uc3QgbWF4ID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpO1xuICAgIHJldHVybiAoXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAgICAgICAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbi5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3cocG93ZXIsIHZhbHVlICogbWF4KTtcbiAgICAgICAgcmV0dXJuIHJlc29sdXRpb247XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgcm90YXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJvdGF0aW9uKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHJlc29sdXRpb24gZm9yIGEgdmFsdWUgYmV0d2VlblxuICAgKiAwIGFuZCAxLiBFeHBvbmVudGlhbCBzY2FsaW5nIGlzIGFzc3VtZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcG93ZXJdIFBvd2VyLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIpOiBudW1iZXJ9IFZhbHVlIGZvciByZXNvbHV0aW9uIGZ1bmN0aW9uLlxuICAgKi9cbiAgZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24ocG93ZXIpIHtcbiAgICBjb25zdCBsb2dQb3dlciA9IE1hdGgubG9nKHBvd2VyIHx8IDIpO1xuICAgIGNvbnN0IG1heFJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICBjb25zdCBtaW5SZXNvbHV0aW9uID0gdGhpcy5taW5SZXNvbHV0aW9uXztcbiAgICBjb25zdCBtYXggPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBsb2dQb3dlcjtcbiAgICByZXR1cm4gKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICogQHJldHVybiB7bnVtYmVyfSBWYWx1ZS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gcmVzb2x1dGlvbikgLyBsb2dQb3dlciAvIG1heDtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiB0aGUgdmlld3BvcnQgbWludXMgcGFkZGluZy5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtyb3RhdGlvbl0gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVmlld3BvcnQgc2l6ZSByZWR1Y2VkIGJ5IHRoZSBwYWRkaW5nLlxuICAgKi9cbiAgZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyhyb3RhdGlvbikge1xuICAgIGxldCBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHJvdGF0aW9uKTtcbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICBpZiAocGFkZGluZykge1xuICAgICAgc2l6ZSA9IFtcbiAgICAgICAgc2l6ZVswXSAtIHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdLFxuICAgICAgICBzaXplWzFdIC0gcGFkZGluZ1swXSAtIHBhZGRpbmdbMl0sXG4gICAgICBdO1xuICAgIH1cbiAgICByZXR1cm4gc2l6ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtTdGF0ZX0gVmlldyBzdGF0ZS5cbiAgICovXG4gIGdldFN0YXRlKCkge1xuICAgIGNvbnN0IHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICBjb25zdCByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgbGV0IGNlbnRlciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovIChcbiAgICAgIHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKVxuICAgICk7XG4gICAgY29uc3QgcGFkZGluZyA9IHRoaXMucGFkZGluZ187XG4gICAgaWYgKHBhZGRpbmcpIHtcbiAgICAgIGNvbnN0IHJlZHVjZWRTaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICBjZW50ZXIgPSBjYWxjdWxhdGVDZW50ZXJPbihcbiAgICAgICAgY2VudGVyLFxuICAgICAgICB0aGlzLmdldFZpZXdwb3J0U2l6ZV8oKSxcbiAgICAgICAgW3JlZHVjZWRTaXplWzBdIC8gMiArIHBhZGRpbmdbM10sIHJlZHVjZWRTaXplWzFdIC8gMiArIHBhZGRpbmdbMF1dLFxuICAgICAgICByZXNvbHV0aW9uLFxuICAgICAgICByb3RhdGlvblxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGNlbnRlcjogY2VudGVyLnNsaWNlKDApLFxuICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IG51bGwsXG4gICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgbmV4dENlbnRlcjogdGhpcy5uZXh0Q2VudGVyXyxcbiAgICAgIG5leHRSZXNvbHV0aW9uOiB0aGlzLm5leHRSZXNvbHV0aW9uXyxcbiAgICAgIG5leHRSb3RhdGlvbjogdGhpcy5uZXh0Um90YXRpb25fLFxuICAgICAgcm90YXRpb246IHJvdGF0aW9uLFxuICAgICAgem9vbTogdGhpcy5nZXRab29tKCksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtWaWV3U3RhdGVMYXllclN0YXRlRXh0ZW50fSBMaWtlIGBGcmFtZVN0YXRlYCwgYnV0IGp1c3QgYHZpZXdTdGF0ZWAgYW5kIGBleHRlbnRgLlxuICAgKi9cbiAgZ2V0Vmlld1N0YXRlQW5kRXh0ZW50KCkge1xuICAgIHJldHVybiB7XG4gICAgICB2aWV3U3RhdGU6IHRoaXMuZ2V0U3RhdGUoKSxcbiAgICAgIGV4dGVudDogdGhpcy5jYWxjdWxhdGVFeHRlbnQoKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY3VycmVudCB6b29tIGxldmVsLiBUaGlzIG1ldGhvZCBtYXkgcmV0dXJuIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzXG4gICAqIGlmIHRoZSB2aWV3IGRvZXMgbm90IGNvbnN0cmFpbiB0aGUgcmVzb2x1dGlvbiwgb3IgaWYgYW4gaW50ZXJhY3Rpb24gb3JcbiAgICogYW5pbWF0aW9uIGlzIHVuZGVyd2F5LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBab29tLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRab29tKCkge1xuICAgIGxldCB6b29tO1xuICAgIGNvbnN0IHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB6b29tID0gdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHpvb207XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB6b29tIGxldmVsIGZvciBhIHJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFRoZSByZXNvbHV0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgem9vbSBsZXZlbCBmb3IgdGhlIHByb3ZpZGVkIHJlc29sdXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFpvb21Gb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pIHtcbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5taW5ab29tXyB8fCAwO1xuICAgIGxldCBtYXgsIHpvb21GYWN0b3I7XG4gICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfKSB7XG4gICAgICBjb25zdCBuZWFyZXN0ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIDEpO1xuICAgICAgb2Zmc2V0ID0gbmVhcmVzdDtcbiAgICAgIG1heCA9IHRoaXMucmVzb2x1dGlvbnNfW25lYXJlc3RdO1xuICAgICAgaWYgKG5lYXJlc3QgPT0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMSkge1xuICAgICAgICB6b29tRmFjdG9yID0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHpvb21GYWN0b3IgPSBtYXggLyB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0ICsgMV07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1heCA9IHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgICB6b29tRmFjdG9yID0gdGhpcy56b29tRmFjdG9yXztcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldCArIE1hdGgubG9nKG1heCAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3Rvcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciBhIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHZpZXcgcmVzb2x1dGlvbiBmb3IgdGhlIHByb3ZpZGVkIHpvb20gbGV2ZWwuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJlc29sdXRpb25Gb3Jab29tKHpvb20pIHtcbiAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18pIHtcbiAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggPD0gMSkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJhc2VMZXZlbCA9IGNsYW1wKFxuICAgICAgICBNYXRoLmZsb29yKHpvb20pLFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAyXG4gICAgICApO1xuICAgICAgY29uc3Qgem9vbUZhY3RvciA9XG4gICAgICAgIHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbF0gLyB0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWwgKyAxXTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbF0gL1xuICAgICAgICBNYXRoLnBvdyh6b29tRmFjdG9yLCBjbGFtcCh6b29tIC0gYmFzZUxldmVsLCAwLCAxKSlcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm1heFJlc29sdXRpb25fIC8gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgem9vbSAtIHRoaXMubWluWm9vbV8pXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaXQgdGhlIGdpdmVuIGdlb21ldHJ5IG9yIGV4dGVudCBiYXNlZCBvbiB0aGUgZ2l2ZW4gbWFwIHNpemUgYW5kIGJvcmRlci5cbiAgICogVGhlIHNpemUgaXMgcGl4ZWwgZGltZW5zaW9ucyBvZiB0aGUgYm94IHRvIGZpdCB0aGUgZXh0ZW50IGludG8uXG4gICAqIEluIG1vc3QgY2FzZXMgeW91IHdpbGwgd2FudCB0byB1c2UgdGhlIG1hcCBzaXplLCB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICogVGFrZXMgY2FyZSBvZiB0aGUgbWFwIGFuZ2xlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZ2VvbWV0cnlPckV4dGVudCBUaGUgZ2VvbWV0cnkgb3JcbiAgICogICAgIGV4dGVudCB0byBmaXQgdGhlIHZpZXcgdG8uXG4gICAqIEBwYXJhbSB7Rml0T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqIEBhcGlcbiAgICovXG4gIGZpdChnZW9tZXRyeU9yRXh0ZW50LCBvcHRpb25zKSB7XG4gICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi9cbiAgICBsZXQgZ2VvbWV0cnk7XG4gICAgYXNzZXJ0KFxuICAgICAgQXJyYXkuaXNBcnJheShnZW9tZXRyeU9yRXh0ZW50KSB8fFxuICAgICAgICB0eXBlb2YgKC8qKiBAdHlwZSB7P30gKi8gKGdlb21ldHJ5T3JFeHRlbnQpLmdldFNpbXBsaWZpZWRHZW9tZXRyeSkgPT09XG4gICAgICAgICAgJ2Z1bmN0aW9uJyxcbiAgICAgIDI0XG4gICAgKTsgLy8gSW52YWxpZCBleHRlbnQgb3IgZ2VvbWV0cnkgcHJvdmlkZWQgYXMgYGdlb21ldHJ5YFxuICAgIGlmIChBcnJheS5pc0FycmF5KGdlb21ldHJ5T3JFeHRlbnQpKSB7XG4gICAgICBhc3NlcnQoIWlzRW1wdHkoZ2VvbWV0cnlPckV4dGVudCksIDI1KTsgLy8gQ2Fubm90IGZpdCBlbXB0eSBleHRlbnQgcHJvdmlkZWQgYXMgYGdlb21ldHJ5YFxuICAgICAgY29uc3QgZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQoZ2VvbWV0cnlPckV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgZ2VvbWV0cnkgPSBwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpO1xuICAgIH0gZWxzZSBpZiAoZ2VvbWV0cnlPckV4dGVudC5nZXRUeXBlKCkgPT09ICdDaXJjbGUnKSB7XG4gICAgICBjb25zdCBleHRlbnQgPSBmcm9tVXNlckV4dGVudChcbiAgICAgICAgZ2VvbWV0cnlPckV4dGVudC5nZXRFeHRlbnQoKSxcbiAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKClcbiAgICAgICk7XG4gICAgICBnZW9tZXRyeSA9IHBvbHlnb25Gcm9tRXh0ZW50KGV4dGVudCk7XG4gICAgICBnZW9tZXRyeS5yb3RhdGUodGhpcy5nZXRSb3RhdGlvbigpLCBnZXRDZW50ZXIoZXh0ZW50KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVzZXJQcm9qZWN0aW9uID0gZ2V0VXNlclByb2plY3Rpb24oKTtcbiAgICAgIGlmICh1c2VyUHJvamVjdGlvbikge1xuICAgICAgICBnZW9tZXRyeSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgICAgICBnZW9tZXRyeU9yRXh0ZW50XG4gICAgICAgICAgICAuY2xvbmUoKVxuICAgICAgICAgICAgLnRyYW5zZm9ybSh1c2VyUHJvamVjdGlvbiwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5T3JFeHRlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5maXRJbnRlcm5hbChnZW9tZXRyeSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlIHJvdGF0ZWQgZXh0ZW50XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IFRoZSBnZW9tZXRyeS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnRcIikuRXh0ZW50fSBUaGUgcm90YXRlZCBleHRlbnQgZm9yIHRoZSBnZW9tZXRyeS5cbiAgICovXG4gIHJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeShnZW9tZXRyeSkge1xuICAgIGNvbnN0IHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgIGNvbnN0IGNvc0FuZ2xlID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgIGNvbnN0IHNpbkFuZ2xlID0gTWF0aC5zaW4oLXJvdGF0aW9uKTtcbiAgICBjb25zdCBjb29yZHMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICBjb25zdCBzdHJpZGUgPSBnZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICBsZXQgbWluUm90WCA9ICtJbmZpbml0eTtcbiAgICBsZXQgbWluUm90WSA9ICtJbmZpbml0eTtcbiAgICBsZXQgbWF4Um90WCA9IC1JbmZpbml0eTtcbiAgICBsZXQgbWF4Um90WSA9IC1JbmZpbml0eTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb29yZHMubGVuZ3RoOyBpIDwgaWk7IGkgKz0gc3RyaWRlKSB7XG4gICAgICBjb25zdCByb3RYID0gY29vcmRzW2ldICogY29zQW5nbGUgLSBjb29yZHNbaSArIDFdICogc2luQW5nbGU7XG4gICAgICBjb25zdCByb3RZID0gY29vcmRzW2ldICogc2luQW5nbGUgKyBjb29yZHNbaSArIDFdICogY29zQW5nbGU7XG4gICAgICBtaW5Sb3RYID0gTWF0aC5taW4obWluUm90WCwgcm90WCk7XG4gICAgICBtaW5Sb3RZID0gTWF0aC5taW4obWluUm90WSwgcm90WSk7XG4gICAgICBtYXhSb3RYID0gTWF0aC5tYXgobWF4Um90WCwgcm90WCk7XG4gICAgICBtYXhSb3RZID0gTWF0aC5tYXgobWF4Um90WSwgcm90WSk7XG4gICAgfVxuICAgIHJldHVybiBbbWluUm90WCwgbWluUm90WSwgbWF4Um90WCwgbWF4Um90WV07XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgVGhlIGdlb21ldHJ5LlxuICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zLlxuICAgKi9cbiAgZml0SW50ZXJuYWwoZ2VvbWV0cnksIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBsZXQgc2l6ZSA9IG9wdGlvbnMuc2l6ZTtcbiAgICBpZiAoIXNpemUpIHtcbiAgICAgIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oKTtcbiAgICB9XG4gICAgY29uc3QgcGFkZGluZyA9XG4gICAgICBvcHRpb25zLnBhZGRpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGFkZGluZyA6IFswLCAwLCAwLCAwXTtcbiAgICBjb25zdCBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICBsZXQgbWluUmVzb2x1dGlvbjtcbiAgICBpZiAob3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy5tYXhab29tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWluUmVzb2x1dGlvbiA9IDA7XG4gICAgfVxuXG4gICAgY29uc3Qgcm90YXRlZEV4dGVudCA9IHRoaXMucm90YXRlZEV4dGVudEZvckdlb21ldHJ5KGdlb21ldHJ5KTtcblxuICAgIC8vIGNhbGN1bGF0ZSByZXNvbHV0aW9uXG4gICAgbGV0IHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChyb3RhdGVkRXh0ZW50LCBbXG4gICAgICBzaXplWzBdIC0gcGFkZGluZ1sxXSAtIHBhZGRpbmdbM10sXG4gICAgICBzaXplWzFdIC0gcGFkZGluZ1swXSAtIHBhZGRpbmdbMl0sXG4gICAgXSk7XG4gICAgcmVzb2x1dGlvbiA9IGlzTmFOKHJlc29sdXRpb24pXG4gICAgICA/IG1pblJlc29sdXRpb25cbiAgICAgIDogTWF0aC5tYXgocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbik7XG4gICAgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIG5lYXJlc3QgPyAwIDogMSk7XG5cbiAgICAvLyBjYWxjdWxhdGUgY2VudGVyXG4gICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgY29uc3Qgc2luQW5nbGUgPSBNYXRoLnNpbihyb3RhdGlvbik7XG4gICAgY29uc3QgY29zQW5nbGUgPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gICAgY29uc3QgY2VudGVyUm90ID0gZ2V0Q2VudGVyKHJvdGF0ZWRFeHRlbnQpO1xuICAgIGNlbnRlclJvdFswXSArPSAoKHBhZGRpbmdbMV0gLSBwYWRkaW5nWzNdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICBjZW50ZXJSb3RbMV0gKz0gKChwYWRkaW5nWzBdIC0gcGFkZGluZ1syXSkgLyAyKSAqIHJlc29sdXRpb247XG4gICAgY29uc3QgY2VudGVyWCA9IGNlbnRlclJvdFswXSAqIGNvc0FuZ2xlIC0gY2VudGVyUm90WzFdICogc2luQW5nbGU7XG4gICAgY29uc3QgY2VudGVyWSA9IGNlbnRlclJvdFsxXSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WzBdICogc2luQW5nbGU7XG4gICAgY29uc3QgY2VudGVyID0gdGhpcy5nZXRDb25zdHJhaW5lZENlbnRlcihbY2VudGVyWCwgY2VudGVyWV0sIHJlc29sdXRpb24pO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayA/IG9wdGlvbnMuY2FsbGJhY2sgOiBWT0lEO1xuXG4gICAgaWYgKG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwoXG4gICAgICAgIHtcbiAgICAgICAgICByZXNvbHV0aW9uOiByZXNvbHV0aW9uLFxuICAgICAgICAgIGNlbnRlcjogY2VudGVyLFxuICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcsXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oZmFsc2UsIHRydWUpO1xuICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDZW50ZXIgb24gY29vcmRpbmF0ZSBhbmQgdmlldyBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgY2VudGVyT24oY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24pIHtcbiAgICB0aGlzLmNlbnRlck9uSW50ZXJuYWwoXG4gICAgICBmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpLFxuICAgICAgc2l6ZSxcbiAgICAgIHBvc2l0aW9uXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICAgKi9cbiAgY2VudGVyT25JbnRlcm5hbChjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbikge1xuICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoXG4gICAgICBjYWxjdWxhdGVDZW50ZXJPbihcbiAgICAgICAgY29vcmRpbmF0ZSxcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgcG9zaXRpb24sXG4gICAgICAgIHRoaXMuZ2V0UmVzb2x1dGlvbigpLFxuICAgICAgICB0aGlzLmdldFJvdGF0aW9uKClcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgdGhlIHNoaWZ0IGJldHdlZW4gbWFwIGFuZCB2aWV3cG9ydCBjZW50ZXIuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH0gQ2VudGVyIHNoaWZ0LlxuICAgKi9cbiAgY2FsY3VsYXRlQ2VudGVyU2hpZnQoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSkge1xuICAgIGxldCBjZW50ZXJTaGlmdDtcbiAgICBjb25zdCBwYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICBpZiAocGFkZGluZyAmJiBjZW50ZXIpIHtcbiAgICAgIGNvbnN0IHJlZHVjZWRTaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKC1yb3RhdGlvbik7XG4gICAgICBjb25zdCBzaGlmdGVkQ2VudGVyID0gY2FsY3VsYXRlQ2VudGVyT24oXG4gICAgICAgIGNlbnRlcixcbiAgICAgICAgc2l6ZSxcbiAgICAgICAgW3JlZHVjZWRTaXplWzBdIC8gMiArIHBhZGRpbmdbM10sIHJlZHVjZWRTaXplWzFdIC8gMiArIHBhZGRpbmdbMF1dLFxuICAgICAgICByZXNvbHV0aW9uLFxuICAgICAgICByb3RhdGlvblxuICAgICAgKTtcbiAgICAgIGNlbnRlclNoaWZ0ID0gW1xuICAgICAgICBjZW50ZXJbMF0gLSBzaGlmdGVkQ2VudGVyWzBdLFxuICAgICAgICBjZW50ZXJbMV0gLSBzaGlmdGVkQ2VudGVyWzFdLFxuICAgICAgXTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlclNoaWZ0O1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGRlZmluZWQuXG4gICAqL1xuICBpc0RlZigpIHtcbiAgICByZXR1cm4gISF0aGlzLmdldENlbnRlckludGVybmFsKCkgJiYgdGhpcy5nZXRSZXNvbHV0aW9uKCkgIT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YUNvb3JkaW5hdGVzIFJlbGF0aXZlIHZhbHVlIHRvIGFkZC5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRqdXN0Q2VudGVyKGRlbHRhQ29vcmRpbmF0ZXMpIHtcbiAgICBjb25zdCBjZW50ZXIgPSB0b1VzZXJDb29yZGluYXRlKHRoaXMudGFyZ2V0Q2VudGVyXywgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIHRoaXMuc2V0Q2VudGVyKFtcbiAgICAgIGNlbnRlclswXSArIGRlbHRhQ29vcmRpbmF0ZXNbMF0sXG4gICAgICBjZW50ZXJbMV0gKyBkZWx0YUNvb3JkaW5hdGVzWzFdLFxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgcmVsYXRpdmUgY29vcmRpbmF0ZXMgdG8gdGhlIGNlbnRlciBvZiB0aGUgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgKi9cbiAgYWRqdXN0Q2VudGVySW50ZXJuYWwoZGVsdGFDb29yZGluYXRlcykge1xuICAgIGNvbnN0IGNlbnRlciA9IHRoaXMudGFyZ2V0Q2VudGVyXztcbiAgICB0aGlzLnNldENlbnRlckludGVybmFsKFtcbiAgICAgIGNlbnRlclswXSArIGRlbHRhQ29vcmRpbmF0ZXNbMF0sXG4gICAgICBjZW50ZXJbMV0gKyBkZWx0YUNvb3JkaW5hdGVzWzFdLFxuICAgIF0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE11bHRpcGx5IHRoZSB2aWV3IHJlc29sdXRpb24gYnkgYSByYXRpbywgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRqdXN0UmVzb2x1dGlvbihyYXRpbywgYW5jaG9yKSB7XG4gICAgYW5jaG9yID0gYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShhbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB0aGlzLmFkanVzdFJlc29sdXRpb25JbnRlcm5hbChyYXRpbywgYW5jaG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgdmlldyByZXNvbHV0aW9uIGJ5IGEgcmF0aW8sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcmVzb2x1dGlvblxuICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyBUaGUgcmF0aW8gdG8gYXBwbHkgb24gdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAqL1xuICBhZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwocmF0aW8sIGFuY2hvcikge1xuICAgIGNvbnN0IGlzTW92aW5nID0gdGhpcy5nZXRBbmltYXRpbmcoKSB8fCB0aGlzLmdldEludGVyYWN0aW5nKCk7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgIGNvbnN0IG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKFxuICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyAqIHJhdGlvLFxuICAgICAgMCxcbiAgICAgIHNpemUsXG4gICAgICBpc01vdmluZ1xuICAgICk7XG5cbiAgICBpZiAoYW5jaG9yKSB7XG4gICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20obmV3UmVzb2x1dGlvbiwgYW5jaG9yKTtcbiAgICB9XG5cbiAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fICo9IHJhdGlvO1xuICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgdmFsdWUgdG8gdGhlIHZpZXcgem9vbSBsZXZlbCwgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGFkanVzdFpvb20oZGVsdGEsIGFuY2hvcikge1xuICAgIHRoaXMuYWRqdXN0UmVzb2x1dGlvbihNYXRoLnBvdyh0aGlzLnpvb21GYWN0b3JfLCAtZGVsdGEpLCBhbmNob3IpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSB2YWx1ZSB0byB0aGUgdmlldyByb3RhdGlvbiwgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByb3RhdGlvblxuICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBSZWxhdGl2ZSB2YWx1ZSB0byBhZGQgdG8gdGhlIHpvb20gcm90YXRpb24sIGluIHJhZGlhbnMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAqIEBhcGlcbiAgICovXG4gIGFkanVzdFJvdGF0aW9uKGRlbHRhLCBhbmNob3IpIHtcbiAgICBpZiAoYW5jaG9yKSB7XG4gICAgICBhbmNob3IgPSBmcm9tVXNlckNvb3JkaW5hdGUoYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgfVxuICAgIHRoaXMuYWRqdXN0Um90YXRpb25JbnRlcm5hbChkZWx0YSwgYW5jaG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIHJvdGF0aW9uLCBpbiByYWRpYW5zLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgKi9cbiAgYWRqdXN0Um90YXRpb25JbnRlcm5hbChkZWx0YSwgYW5jaG9yKSB7XG4gICAgY29uc3QgaXNNb3ZpbmcgPSB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKTtcbiAgICBjb25zdCBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKFxuICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gKyBkZWx0YSxcbiAgICAgIGlzTW92aW5nXG4gICAgKTtcbiAgICBpZiAoYW5jaG9yKSB7XG4gICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZShuZXdSb3RhdGlvbiwgYW5jaG9yKTtcbiAgICB9XG4gICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gKz0gZGVsdGE7XG4gICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2VudGVyIG9mIHRoZSBjdXJyZW50IHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldENlbnRlcihjZW50ZXIpIHtcbiAgICB0aGlzLnNldENlbnRlckludGVybmFsKFxuICAgICAgY2VudGVyID8gZnJvbVVzZXJDb29yZGluYXRlKGNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpIDogY2VudGVyXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGNlbnRlciB1c2luZyB0aGUgdmlldyBwcm9qZWN0aW9uIChub3QgdGhlIHVzZXIgcHJvamVjdGlvbikuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICovXG4gIHNldENlbnRlckludGVybmFsKGNlbnRlcikge1xuICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IGNlbnRlcjtcbiAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1ZpZXdIaW50LmpzXCIpLmRlZmF1bHR9IGhpbnQgSGludC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyB2YWx1ZS5cbiAgICovXG4gIHNldEhpbnQoaGludCwgZGVsdGEpIHtcbiAgICB0aGlzLmhpbnRzX1toaW50XSArPSBkZWx0YTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICByZXR1cm4gdGhpcy5oaW50c19baGludF07XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGlzIHZpZXcuIEFueSByZXNvbHV0aW9uIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFRoZSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRSZXNvbHV0aW9uKHJlc29sdXRpb24pIHtcbiAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSByb3RhdGlvbiBmb3IgdGhpcyB2aWV3LiBBbnkgcm90YXRpb24gY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3IGluIHJhZGlhbnMuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFJvdGF0aW9uKHJvdGF0aW9uKSB7XG4gICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gIH1cblxuICAvKipcbiAgICogWm9vbSB0byBhIHNwZWNpZmljIHpvb20gbGV2ZWwuIEFueSByZXNvbHV0aW9uIGNvbnN0cmFpbiB3aWxsIGFwcGx5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRab29tKHpvb20pIHtcbiAgICB0aGlzLnNldFJlc29sdXRpb24odGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh6b29tKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVjb21wdXRlIHJvdGF0aW9uL3Jlc29sdXRpb24vY2VudGVyIGJhc2VkIG9uIHRhcmdldCB2YWx1ZXMuXG4gICAqIE5vdGU6IHdlIGhhdmUgdG8gY29tcHV0ZSByb3RhdGlvbiBmaXJzdCwgdGhlbiByZXNvbHV0aW9uIGFuZCBjZW50ZXIgY29uc2lkZXJpbmcgdGhhdFxuICAgKiBwYXJhbWV0ZXJzIGNhbiBpbmZsdWVuY2Ugb25lIGFub3RoZXIgaW4gY2FzZSBhIHZpZXcgZXh0ZW50IGNvbnN0cmFpbnQgaXMgcHJlc2VudC5cbiAgICogQHBhcmFtIHtib29sZWFufSBbZG9Ob3RDYW5jZWxBbmltc10gRG8gbm90IGNhbmNlbCBhbmltYXRpb25zLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtmb3JjZU1vdmluZ10gQXBwbHkgY29uc3RyYWludHMgYXMgaWYgdGhlIHZpZXcgaXMgbW92aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXBwbHlUYXJnZXRTdGF0ZV8oZG9Ob3RDYW5jZWxBbmltcywgZm9yY2VNb3ZpbmcpIHtcbiAgICBjb25zdCBpc01vdmluZyA9XG4gICAgICB0aGlzLmdldEFuaW1hdGluZygpIHx8IHRoaXMuZ2V0SW50ZXJhY3RpbmcoKSB8fCBmb3JjZU1vdmluZztcblxuICAgIC8vIGNvbXB1dGUgcm90YXRpb25cbiAgICBjb25zdCBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKFxuICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8sXG4gICAgICBpc01vdmluZ1xuICAgICk7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyhuZXdSb3RhdGlvbik7XG4gICAgY29uc3QgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24oXG4gICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fLFxuICAgICAgMCxcbiAgICAgIHNpemUsXG4gICAgICBpc01vdmluZ1xuICAgICk7XG4gICAgY29uc3QgbmV3Q2VudGVyID0gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKFxuICAgICAgdGhpcy50YXJnZXRDZW50ZXJfLFxuICAgICAgbmV3UmVzb2x1dGlvbixcbiAgICAgIHNpemUsXG4gICAgICBpc01vdmluZyxcbiAgICAgIHRoaXMuY2FsY3VsYXRlQ2VudGVyU2hpZnQoXG4gICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyxcbiAgICAgICAgbmV3UmVzb2x1dGlvbixcbiAgICAgICAgbmV3Um90YXRpb24sXG4gICAgICAgIHNpemVcbiAgICAgIClcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikgIT09IG5ld1JvdGF0aW9uKSB7XG4gICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUk9UQVRJT04sIG5ld1JvdGF0aW9uKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5SRVNPTFVUSU9OKSAhPT0gbmV3UmVzb2x1dGlvbikge1xuICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04sIG5ld1Jlc29sdXRpb24pO1xuICAgICAgdGhpcy5zZXQoJ3pvb20nLCB0aGlzLmdldFpvb20oKSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChcbiAgICAgICFuZXdDZW50ZXIgfHxcbiAgICAgICF0aGlzLmdldChWaWV3UHJvcGVydHkuQ0VOVEVSKSB8fFxuICAgICAgIWVxdWFscyh0aGlzLmdldChWaWV3UHJvcGVydHkuQ0VOVEVSKSwgbmV3Q2VudGVyKVxuICAgICkge1xuICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LkNFTlRFUiwgbmV3Q2VudGVyKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5nZXRBbmltYXRpbmcoKSAmJiAhZG9Ob3RDYW5jZWxBbmltcykge1xuICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHRoaXMuY2FuY2VsQW5jaG9yXyA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiBhbnkgY29uc3RyYWludHMgbmVlZCB0byBiZSBhcHBsaWVkLCBhbiBhbmltYXRpb24gd2lsbCBiZSB0cmlnZ2VyZWQuXG4gICAqIFRoaXMgaXMgdHlwaWNhbGx5IGRvbmUgb24gaW50ZXJhY3Rpb24gZW5kLlxuICAgKiBOb3RlOiBjYWxsaW5nIHRoaXMgd2l0aCBhIGR1cmF0aW9uIG9mIDAgd2lsbCBhcHBseSB0aGUgY29uc3RyYWluZWQgdmFsdWVzIHN0cmFpZ2h0IGF3YXksXG4gICAqIHdpdGhvdXQgYW5pbWF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2R1cmF0aW9uXSBUaGUgYW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW3Jlc29sdXRpb25EaXJlY3Rpb25dIFdoaWNoIGRpcmVjdGlvbiB0byB6b29tLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICovXG4gIHJlc29sdmVDb25zdHJhaW50cyhkdXJhdGlvbiwgcmVzb2x1dGlvbkRpcmVjdGlvbiwgYW5jaG9yKSB7XG4gICAgZHVyYXRpb24gPSBkdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gZHVyYXRpb24gOiAyMDA7XG4gICAgY29uc3QgZGlyZWN0aW9uID0gcmVzb2x1dGlvbkRpcmVjdGlvbiB8fCAwO1xuXG4gICAgY29uc3QgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyk7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyhuZXdSb3RhdGlvbik7XG4gICAgY29uc3QgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24oXG4gICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fLFxuICAgICAgZGlyZWN0aW9uLFxuICAgICAgc2l6ZVxuICAgICk7XG4gICAgY29uc3QgbmV3Q2VudGVyID0gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKFxuICAgICAgdGhpcy50YXJnZXRDZW50ZXJfLFxuICAgICAgbmV3UmVzb2x1dGlvbixcbiAgICAgIHNpemUsXG4gICAgICBmYWxzZSxcbiAgICAgIHRoaXMuY2FsY3VsYXRlQ2VudGVyU2hpZnQoXG4gICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyxcbiAgICAgICAgbmV3UmVzb2x1dGlvbixcbiAgICAgICAgbmV3Um90YXRpb24sXG4gICAgICAgIHNpemVcbiAgICAgIClcbiAgICApO1xuXG4gICAgaWYgKGR1cmF0aW9uID09PSAwICYmICF0aGlzLmNhbmNlbEFuY2hvcl8pIHtcbiAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSBuZXdSZXNvbHV0aW9uO1xuICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSBuZXdSb3RhdGlvbjtcbiAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IG5ld0NlbnRlcjtcbiAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhbmNob3IgPSBhbmNob3IgfHwgKGR1cmF0aW9uID09PSAwID8gdGhpcy5jYW5jZWxBbmNob3JfIDogdW5kZWZpbmVkKTtcbiAgICB0aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmdldFJlc29sdXRpb24oKSAhPT0gbmV3UmVzb2x1dGlvbiB8fFxuICAgICAgdGhpcy5nZXRSb3RhdGlvbigpICE9PSBuZXdSb3RhdGlvbiB8fFxuICAgICAgIXRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSB8fFxuICAgICAgIWVxdWFscyh0aGlzLmdldENlbnRlckludGVybmFsKCksIG5ld0NlbnRlcilcbiAgICApIHtcbiAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgIHJvdGF0aW9uOiBuZXdSb3RhdGlvbixcbiAgICAgICAgY2VudGVyOiBuZXdDZW50ZXIsXG4gICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICBhbmNob3I6IGFuY2hvcixcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgc3RhcnRlZC5cbiAgICogVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZCB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkXG4gICAqIChkZXBlbmRpbmcgb24gaXRzIGNvbnN0cmFpbnRzKS5cbiAgICogQGFwaVxuICAgKi9cbiAgYmVnaW5JbnRlcmFjdGlvbigpIHtcbiAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcblxuICAgIHRoaXMuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gIH1cblxuICAvKipcbiAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAqIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWQgKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2R1cmF0aW9uXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVzb2x1dGlvbkRpcmVjdGlvbl0gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBlbmRJbnRlcmFjdGlvbihkdXJhdGlvbiwgcmVzb2x1dGlvbkRpcmVjdGlvbiwgYW5jaG9yKSB7XG4gICAgYW5jaG9yID0gYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShhbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB0aGlzLmVuZEludGVyYWN0aW9uSW50ZXJuYWwoZHVyYXRpb24sIHJlc29sdXRpb25EaXJlY3Rpb24sIGFuY2hvcik7XG4gIH1cblxuICAvKipcbiAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAqIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWQgKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2R1cmF0aW9uXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbcmVzb2x1dGlvbkRpcmVjdGlvbl0gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgKi9cbiAgZW5kSW50ZXJhY3Rpb25JbnRlcm5hbChkdXJhdGlvbiwgcmVzb2x1dGlvbkRpcmVjdGlvbiwgYW5jaG9yKSB7XG4gICAgaWYgKCF0aGlzLmdldEludGVyYWN0aW5nKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAtMSk7XG4gICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoZHVyYXRpb24sIHJlc29sdXRpb25EaXJlY3Rpb24sIGFuY2hvcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdmFsaWQgcG9zaXRpb24gZm9yIHRoZSB2aWV3IGNlbnRlciBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgY29uc3RyYWludHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlciBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt0YXJnZXRSZXNvbHV0aW9uXSBUYXJnZXQgcmVzb2x1dGlvbi4gSWYgbm90IHN1cHBsaWVkLCB0aGUgY3VycmVudCBvbmUgd2lsbCBiZSB1c2VkLlxuICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBndWVzcyBhIHZhbGlkIGNlbnRlciBwb3NpdGlvbiBhdCBhIGRpZmZlcmVudCB6b29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFZhbGlkIGNlbnRlciBwb3NpdGlvbi5cbiAgICovXG4gIGdldENvbnN0cmFpbmVkQ2VudGVyKHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbikge1xuICAgIGNvbnN0IHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKFxuICAgICAgdGFyZ2V0Q2VudGVyLFxuICAgICAgdGFyZ2V0UmVzb2x1dGlvbiB8fCB0aGlzLmdldFJlc29sdXRpb24oKSxcbiAgICAgIHNpemVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHZhbGlkIHpvb20gbGV2ZWwgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHZpZXcgY29uc3RyYWludHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gdGFyZ2V0Wm9vbSBUYXJnZXQgem9vbS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtkaXJlY3Rpb249MF0gSW5kaWNhdGUgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFZhbGlkIHpvb20gbGV2ZWwuXG4gICAqL1xuICBnZXRDb25zdHJhaW5lZFpvb20odGFyZ2V0Wm9vbSwgZGlyZWN0aW9uKSB7XG4gICAgY29uc3QgdGFyZ2V0UmVzID0gdGhpcy5nZXRSZXNvbHV0aW9uRm9yWm9vbSh0YXJnZXRab29tKTtcbiAgICByZXR1cm4gdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbihcbiAgICAgIHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRhcmdldFJlcywgZGlyZWN0aW9uKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgdmFsaWQgcmVzb2x1dGlvbiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdmlldyBjb25zdHJhaW50cy5cbiAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2RpcmVjdGlvbj0wXSBJbmRpY2F0ZSB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAqIGJ5IGEgcmVuZGVyZXIgaWYgdGhlIHZpZXcgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVmFsaWQgcmVzb2x1dGlvbi5cbiAgICovXG4gIGdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0YXJnZXRSZXNvbHV0aW9uLCBkaXJlY3Rpb24pIHtcbiAgICBkaXJlY3Rpb24gPSBkaXJlY3Rpb24gfHwgMDtcbiAgICBjb25zdCBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG5cbiAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbih0YXJnZXRSZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKiBAcGFyYW0geyp9IHJldHVyblZhbHVlIFJldHVybiB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHJldHVyblZhbHVlKSB7XG4gIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIGNhbGxiYWNrKHJldHVyblZhbHVlKTtcbiAgfSwgMCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2NlbnRlcmNvbnN0cmFpbnQuanNcIikuVHlwZX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBzbW9vdGggPVxuICAgICAgb3B0aW9ucy5zbW9vdGhFeHRlbnRDb25zdHJhaW50ICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLnNtb290aEV4dGVudENvbnN0cmFpbnRcbiAgICAgICAgOiB0cnVlO1xuICAgIHJldHVybiBjcmVhdGVFeHRlbnQob3B0aW9ucy5leHRlbnQsIG9wdGlvbnMuY29uc3RyYWluT25seUNlbnRlciwgc21vb3RoKTtcbiAgfVxuXG4gIGNvbnN0IHByb2plY3Rpb24gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICBpZiAob3B0aW9ucy5tdWx0aVdvcmxkICE9PSB0cnVlICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgIGNvbnN0IGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCkuc2xpY2UoKTtcbiAgICBleHRlbnRbMF0gPSAtSW5maW5pdHk7XG4gICAgZXh0ZW50WzJdID0gSW5maW5pdHk7XG4gICAgcmV0dXJuIGNyZWF0ZUV4dGVudChleHRlbnQsIGZhbHNlLCBmYWxzZSk7XG4gIH1cblxuICByZXR1cm4gY2VudGVyTm9uZTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge3tjb25zdHJhaW50OiBpbXBvcnQoXCIuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGUsIG1heFJlc29sdXRpb246IG51bWJlcixcbiAqICAgICBtaW5SZXNvbHV0aW9uOiBudW1iZXIsIG1pblpvb206IG51bWJlciwgem9vbUZhY3RvcjogbnVtYmVyfX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gIGxldCByZXNvbHV0aW9uQ29uc3RyYWludDtcbiAgbGV0IG1heFJlc29sdXRpb247XG4gIGxldCBtaW5SZXNvbHV0aW9uO1xuXG4gIC8vIFRPRE86IG1vdmUgdGhlc2UgdG8gYmUgb2wgY29uc3RhbnRzXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vb3BlbmxheWVycy9vcGVubGF5ZXJzL2lzc3Vlcy8yMDc2XG4gIGNvbnN0IGRlZmF1bHRNYXhab29tID0gMjg7XG4gIGNvbnN0IGRlZmF1bHRab29tRmFjdG9yID0gMjtcblxuICBsZXQgbWluWm9vbSA9XG4gICAgb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiBERUZBVUxUX01JTl9aT09NO1xuXG4gIGxldCBtYXhab29tID1cbiAgICBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IGRlZmF1bHRNYXhab29tO1xuXG4gIGNvbnN0IHpvb21GYWN0b3IgPVxuICAgIG9wdGlvbnMuem9vbUZhY3RvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tRmFjdG9yIDogZGVmYXVsdFpvb21GYWN0b3I7XG5cbiAgY29uc3QgbXVsdGlXb3JsZCA9XG4gICAgb3B0aW9ucy5tdWx0aVdvcmxkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm11bHRpV29ybGQgOiBmYWxzZTtcblxuICBjb25zdCBzbW9vdGggPVxuICAgIG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQgIT09IHVuZGVmaW5lZFxuICAgICAgPyBvcHRpb25zLnNtb290aFJlc29sdXRpb25Db25zdHJhaW50XG4gICAgICA6IHRydWU7XG5cbiAgY29uc3Qgc2hvd0Z1bGxFeHRlbnQgPVxuICAgIG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgOiBmYWxzZTtcblxuICBjb25zdCBwcm9qZWN0aW9uID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgY29uc3QgcHJvakV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gIGxldCBjb25zdHJhaW5Pbmx5Q2VudGVyID0gb3B0aW9ucy5jb25zdHJhaW5Pbmx5Q2VudGVyO1xuICBsZXQgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG4gIGlmICghbXVsdGlXb3JsZCAmJiAhZXh0ZW50ICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgIGNvbnN0cmFpbk9ubHlDZW50ZXIgPSBmYWxzZTtcbiAgICBleHRlbnQgPSBwcm9qRXh0ZW50O1xuICB9XG5cbiAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHJlc29sdXRpb25zID0gb3B0aW9ucy5yZXNvbHV0aW9ucztcbiAgICBtYXhSZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbbWluWm9vbV07XG4gICAgbWluUmVzb2x1dGlvbiA9XG4gICAgICByZXNvbHV0aW9uc1ttYXhab29tXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gcmVzb2x1dGlvbnNbbWF4Wm9vbV1cbiAgICAgICAgOiByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcblxuICAgIGlmIChvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24pIHtcbiAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMoXG4gICAgICAgIHJlc29sdXRpb25zLFxuICAgICAgICBzbW9vdGgsXG4gICAgICAgICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCxcbiAgICAgICAgc2hvd0Z1bGxFeHRlbnRcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlTWluTWF4UmVzb2x1dGlvbihcbiAgICAgICAgbWF4UmVzb2x1dGlvbixcbiAgICAgICAgbWluUmVzb2x1dGlvbixcbiAgICAgICAgc21vb3RoLFxuICAgICAgICAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsXG4gICAgICAgIHNob3dGdWxsRXh0ZW50XG4gICAgICApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGRlZmF1bHQgbWluIGFuZCBtYXggcmVzb2x1dGlvblxuICAgIGNvbnN0IHNpemUgPSAhcHJvakV4dGVudFxuICAgICAgPyAvLyB1c2UgYW4gZXh0ZW50IHRoYXQgY2FuIGZpdCB0aGUgd2hvbGUgd29ybGQgaWYgbmVlZCBiZVxuICAgICAgICAoMzYwICogTUVURVJTX1BFUl9VTklULmRlZ3JlZXMpIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KClcbiAgICAgIDogTWF0aC5tYXgoZ2V0V2lkdGgocHJvakV4dGVudCksIGdldEhlaWdodChwcm9qRXh0ZW50KSk7XG5cbiAgICBjb25zdCBkZWZhdWx0TWF4UmVzb2x1dGlvbiA9XG4gICAgICBzaXplIC8gREVGQVVMVF9USUxFX1NJWkUgLyBNYXRoLnBvdyhkZWZhdWx0Wm9vbUZhY3RvciwgREVGQVVMVF9NSU5fWk9PTSk7XG5cbiAgICBjb25zdCBkZWZhdWx0TWluUmVzb2x1dGlvbiA9XG4gICAgICBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvXG4gICAgICBNYXRoLnBvdyhkZWZhdWx0Wm9vbUZhY3RvciwgZGVmYXVsdE1heFpvb20gLSBERUZBVUxUX01JTl9aT09NKTtcblxuICAgIC8vIHVzZXIgcHJvdmlkZWQgbWF4UmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgbWF4UmVzb2x1dGlvbiA9IG9wdGlvbnMubWF4UmVzb2x1dGlvbjtcbiAgICBpZiAobWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBtaW5ab29tID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbWF4UmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWluWm9vbSk7XG4gICAgfVxuXG4gICAgLy8gdXNlciBwcm92aWRlZCBtaW5SZXNvbHV0aW9uIHRha2VzIHByZWNlZGVuY2VcbiAgICBtaW5SZXNvbHV0aW9uID0gb3B0aW9ucy5taW5SZXNvbHV0aW9uO1xuICAgIGlmIChtaW5SZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAob3B0aW9ucy5tYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pblJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1pblJlc29sdXRpb247XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gZ2l2ZW4gZGlzY3JldGUgem9vbSBsZXZlbHMsIG1pblJlc29sdXRpb24gbWF5IGJlIGRpZmZlcmVudCB0aGFuIHByb3ZpZGVkXG4gICAgbWF4Wm9vbSA9XG4gICAgICBtaW5ab29tICtcbiAgICAgIE1hdGguZmxvb3IoXG4gICAgICAgIE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBtaW5SZXNvbHV0aW9uKSAvIE1hdGgubG9nKHpvb21GYWN0b3IpXG4gICAgICApO1xuICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSAtIG1pblpvb20pO1xuXG4gICAgaWYgKG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVTbmFwVG9Qb3dlcihcbiAgICAgICAgem9vbUZhY3RvcixcbiAgICAgICAgbWF4UmVzb2x1dGlvbixcbiAgICAgICAgbWluUmVzb2x1dGlvbixcbiAgICAgICAgc21vb3RoLFxuICAgICAgICAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsXG4gICAgICAgIHNob3dGdWxsRXh0ZW50XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZU1pbk1heFJlc29sdXRpb24oXG4gICAgICAgIG1heFJlc29sdXRpb24sXG4gICAgICAgIG1pblJlc29sdXRpb24sXG4gICAgICAgIHNtb290aCxcbiAgICAgICAgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LFxuICAgICAgICBzaG93RnVsbEV4dGVudFxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjb25zdHJhaW50OiByZXNvbHV0aW9uQ29uc3RyYWludCxcbiAgICBtYXhSZXNvbHV0aW9uOiBtYXhSZXNvbHV0aW9uLFxuICAgIG1pblJlc29sdXRpb246IG1pblJlc29sdXRpb24sXG4gICAgbWluWm9vbTogbWluWm9vbSxcbiAgICB6b29tRmFjdG9yOiB6b29tRmFjdG9yLFxuICB9O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gUm90YXRpb24gY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gIGNvbnN0IGVuYWJsZVJvdGF0aW9uID1cbiAgICBvcHRpb25zLmVuYWJsZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmVuYWJsZVJvdGF0aW9uIDogdHJ1ZTtcbiAgaWYgKGVuYWJsZVJvdGF0aW9uKSB7XG4gICAgY29uc3QgY29uc3RyYWluUm90YXRpb24gPSBvcHRpb25zLmNvbnN0cmFpblJvdGF0aW9uO1xuICAgIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGNvbnN0cmFpblJvdGF0aW9uID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gY3JlYXRlU25hcFRvWmVybygpO1xuICAgIH1cbiAgICBpZiAoY29uc3RyYWluUm90YXRpb24gPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gcm90YXRpb25Ob25lO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNvbnN0cmFpblJvdGF0aW9uID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIGNyZWF0ZVNuYXBUb04oY29uc3RyYWluUm90YXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gcm90YXRpb25Ob25lO1xuICB9XG4gIHJldHVybiBkaXNhYmxlO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhbiBhbmltYXRpb24gaW52b2x2ZXMgbm8gdmlldyBjaGFuZ2UuXG4gKiBAcGFyYW0ge0FuaW1hdGlvbn0gYW5pbWF0aW9uIFRoZSBhbmltYXRpb24uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOb29wQW5pbWF0aW9uKGFuaW1hdGlvbikge1xuICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlciAmJiBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSB7XG4gICAgaWYgKCFjb29yZGluYXRlc0VxdWFsKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIsIGFuaW1hdGlvbi50YXJnZXRDZW50ZXIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAhPT0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gU2hpZnRlZCBjZW50ZXIuXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNlbnRlck9uKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uLCByZXNvbHV0aW9uLCByb3RhdGlvbikge1xuICAvLyBjYWxjdWxhdGUgcm90YXRlZCBwb3NpdGlvblxuICBjb25zdCBjb3NBbmdsZSA9IE1hdGguY29zKC1yb3RhdGlvbik7XG4gIGxldCBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gIGxldCByb3RYID0gY29vcmRpbmF0ZVswXSAqIGNvc0FuZ2xlIC0gY29vcmRpbmF0ZVsxXSAqIHNpbkFuZ2xlO1xuICBsZXQgcm90WSA9IGNvb3JkaW5hdGVbMV0gKiBjb3NBbmdsZSArIGNvb3JkaW5hdGVbMF0gKiBzaW5BbmdsZTtcbiAgcm90WCArPSAoc2l6ZVswXSAvIDIgLSBwb3NpdGlvblswXSkgKiByZXNvbHV0aW9uO1xuICByb3RZICs9IChwb3NpdGlvblsxXSAtIHNpemVbMV0gLyAyKSAqIHJlc29sdXRpb247XG5cbiAgLy8gZ28gYmFjayB0byBvcmlnaW5hbCBhbmdsZVxuICBzaW5BbmdsZSA9IC1zaW5BbmdsZTsgLy8gZ28gYmFjayB0byBvcmlnaW5hbCByb3RhdGlvblxuICBjb25zdCBjZW50ZXJYID0gcm90WCAqIGNvc0FuZ2xlIC0gcm90WSAqIHNpbkFuZ2xlO1xuICBjb25zdCBjZW50ZXJZID0gcm90WSAqIGNvc0FuZ2xlICsgcm90WCAqIHNpbkFuZ2xlO1xuXG4gIHJldHVybiBbY2VudGVyWCwgY2VudGVyWV07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFZpZXc7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld0hpbnRcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgQU5JTUFUSU5HOiAwLFxuICBJTlRFUkFDVElORzogMSxcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBMYXllclByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBWaWV3IGZyb20gJy4uL1ZpZXcuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtpbnRlcnNlY3RzfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlKTpIVE1MRWxlbWVudH0gUmVuZGVyRnVuY3Rpb25cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHsnc291cmNlcmVhZHknfCdjaGFuZ2U6c291cmNlJ30gTGF5ZXJFdmVudFR5cGVcbiAqL1xuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICBMYXllckV2ZW50VHlwZSwgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfExheWVyRXZlbnRUeXBlfFxuICogICAgIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBMYXllck9uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW1NvdXJjZVR5cGU9aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0XVxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7U291cmNlVHlwZX0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfSBbbWFwXSBNYXAuXG4gKiBAcHJvcGVydHkge1JlbmRlckZ1bmN0aW9ufSBbcmVuZGVyXSBSZW5kZXIgZnVuY3Rpb24uIFRha2VzIHRoZSBmcmFtZSBzdGF0ZSBhcyBpbnB1dCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGFuXG4gKiBIVE1MIGVsZW1lbnQuIFdpbGwgb3ZlcndyaXRlIHRoZSBkZWZhdWx0IHJlbmRlcmluZyBmb3IgdGhlIGxheWVyLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LCB0aGUgdmFsdWUgaXMgcm91bmRlZCB0byB0d28gZGlnaXRzIHRvIGFwcGVhciBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gdmlzaWJsZSBWaXNpYmxlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBtYW5hZ2VkIE1hbmFnZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB6SW5kZXggWkluZGV4LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluaW11bSByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pblpvb20gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1heFpvb20gTWF4aW11bSB6b29tLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmcm9tIHdoaWNoIGFsbCBsYXllciB0eXBlcyBhcmUgZGVyaXZlZC4gVGhpcyBzaG91bGQgb25seSBiZSBpbnN0YW50aWF0ZWRcbiAqIGluIHRoZSBjYXNlIHdoZXJlIGEgY3VzdG9tIGxheWVyIGlzIGFkZGVkIHRvIHRoZSBtYXAgd2l0aCBhIGN1c3RvbSBgcmVuZGVyYCBmdW5jdGlvbi5cbiAqIFN1Y2ggYSBmdW5jdGlvbiBjYW4gYmUgc3BlY2lmaWVkIGluIHRoZSBgb3B0aW9uc2Agb2JqZWN0LCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGFuIEhUTUwgZWxlbWVudC5cbiAqXG4gKiBBIHZpc3VhbCByZXByZXNlbnRhdGlvbiBvZiByYXN0ZXIgb3IgdmVjdG9yIG1hcCBkYXRhLlxuICogTGF5ZXJzIGdyb3VwIHRvZ2V0aGVyIHRob3NlIHByb3BlcnRpZXMgdGhhdCBwZXJ0YWluIHRvIGhvdyB0aGUgZGF0YSBpcyB0byBiZVxuICogZGlzcGxheWVkLCBpcnJlc3BlY3RpdmUgb2YgdGhlIHNvdXJjZSBvZiB0aGF0IGRhdGEuXG4gKlxuICogTGF5ZXJzIGFyZSB1c3VhbGx5IGFkZGVkIHRvIGEgbWFwIHdpdGggW21hcC5hZGRMYXllcigpXXtAbGluayBpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdCNhZGRMYXllcn0uXG4gKiBDb21wb25lbnRzIGxpa2Uge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmF3fkRyYXd9IHVzZSB1bm1hbmFnZWQgbGF5ZXJzXG4gKiBpbnRlcm5hbGx5LiBUaGVzZSB1bm1hbmFnZWQgbGF5ZXJzIGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcCB1c2luZ1xuICogW2xheWVyLnNldE1hcCgpXXtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0TWFwfSBpbnN0ZWFkLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBBIGBzb3VyY2VyZWFkeWAgZXZlbnQgaXMgZmlyZWQgd2hlbiB0aGUgbGF5ZXIncyBzb3VyY2UgaXMgcmVhZHkuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5SZW5kZXJFdmVudCNwcmVyZW5kZXJcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuUmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICogQGZpcmVzIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5CYXNlRXZlbnQjc291cmNlcmVhZHlcbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gW1NvdXJjZVR5cGU9aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0XVxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBbUmVuZGVyZXJUeXBlPWltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHRdXG4gKiBAYXBpXG4gKi9cbmNsYXNzIExheWVyIGV4dGVuZHMgQmFzZUxheWVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uczxTb3VyY2VUeXBlPn0gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIGNvbnN0IGJhc2VPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgZGVsZXRlIGJhc2VPcHRpb25zLnNvdXJjZTtcblxuICAgIHN1cGVyKGJhc2VPcHRpb25zKTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub25jZTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy5tYXBQcmVjb21wb3NlS2V5XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1JlbmRlcmVyVHlwZX1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVyXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlUmVhZHlfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZCA9IGZhbHNlO1xuXG4gICAgLy8gT3ZlcndyaXRlIGRlZmF1bHQgcmVuZGVyIG1ldGhvZCB3aXRoIGEgY3VzdG9tIG9uZVxuICAgIGlmIChvcHRpb25zLnJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5tYXApIHtcbiAgICAgIHRoaXMuc2V0TWFwKG9wdGlvbnMubWFwKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKFxuICAgICAgTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsXG4gICAgICB0aGlzLmhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlX1xuICAgICk7XG5cbiAgICBjb25zdCBzb3VyY2UgPSBvcHRpb25zLnNvdXJjZVxuICAgICAgPyAvKiogQHR5cGUge1NvdXJjZVR5cGV9ICovIChvcHRpb25zLnNvdXJjZSlcbiAgICAgIDogbnVsbDtcbiAgICB0aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gW2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgKi9cbiAgZ2V0TGF5ZXJzQXJyYXkoYXJyYXkpIHtcbiAgICBhcnJheSA9IGFycmF5ID8gYXJyYXkgOiBbXTtcbiAgICBhcnJheS5wdXNoKHRoaXMpO1xuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAqL1xuICBnZXRMYXllclN0YXRlc0FycmF5KHN0YXRlcykge1xuICAgIHN0YXRlcyA9IHN0YXRlcyA/IHN0YXRlcyA6IFtdO1xuICAgIHN0YXRlcy5wdXNoKHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpKTtcbiAgICByZXR1cm4gc3RhdGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbGF5ZXIgc291cmNlLlxuICAgKiBAcmV0dXJuIHtTb3VyY2VUeXBlfG51bGx9IFRoZSBsYXllciBzb3VyY2UgKG9yIGBudWxsYCBpZiBub3QgeWV0IHNldCkuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFNvdXJjZSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UpKSB8fCBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1NvdXJjZVR5cGV8bnVsbH0gVGhlIHNvdXJjZSBiZWluZyByZW5kZXJlZC5cbiAgICovXG4gIGdldFJlbmRlclNvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRTb3VyY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLlN0YXRlfSBTb3VyY2Ugc3RhdGUuXG4gICAqL1xuICBnZXRTb3VyY2VTdGF0ZSgpIHtcbiAgICBjb25zdCBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgIHJldHVybiAhc291cmNlID8gJ3VuZGVmaW5lZCcgOiBzb3VyY2UuZ2V0U3RhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlU291cmNlQ2hhbmdlXygpIHtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICBpZiAodGhpcy5zb3VyY2VSZWFkeV8gfHwgdGhpcy5nZXRTb3VyY2UoKS5nZXRTdGF0ZSgpICE9PSAncmVhZHknKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc291cmNlUmVhZHlfID0gdHJ1ZTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoJ3NvdXJjZXJlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXygpIHtcbiAgICBpZiAodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuc291cmNlQ2hhbmdlS2V5Xyk7XG4gICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnNvdXJjZVJlYWR5XyA9IGZhbHNlO1xuICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbGlzdGVuKFxuICAgICAgICBzb3VyY2UsXG4gICAgICAgIEV2ZW50VHlwZS5DSEFOR0UsXG4gICAgICAgIHRoaXMuaGFuZGxlU291cmNlQ2hhbmdlXyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICAgIGlmIChzb3VyY2UuZ2V0U3RhdGUoKSA9PT0gJ3JlYWR5Jykge1xuICAgICAgICB0aGlzLnNvdXJjZVJlYWR5XyA9IHRydWU7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCgnc291cmNlcmVhZHknKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWxcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuRmVhdHVyZUxpa2U+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGhcbiAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAqL1xuICBnZXRGZWF0dXJlcyhwaXhlbCkge1xuICAgIGlmICghdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZ2V0RmVhdHVyZXMocGl4ZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWxcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fEZsb2F0MzJBcnJheXxEYXRhVmlld3xudWxsfSBQaXhlbCBkYXRhLlxuICAgKi9cbiAgZ2V0RGF0YShwaXhlbCkge1xuICAgIGlmICghdGhpcy5yZW5kZXJlcl8gfHwgIXRoaXMucmVuZGVyZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZ2V0RGF0YShwaXhlbCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGxheWVyIGlzIHZpc2libGUgb24gdGhlIG1hcCB2aWV3LCBpLmUuIHdpdGhpbiBpdHMgbWluL21heCByZXNvbHV0aW9uIG9yIHpvb20gYW5kXG4gICAqIGV4dGVudCwgbm90IHNldCB0byBgdmlzaWJsZTogZmFsc2VgLCBhbmQgbm90IGluc2lkZSBhIGxheWVyIGdyb3VwIHRoYXQgaXMgc2V0XG4gICAqIHRvIGB2aXNpYmxlOiBmYWxzZWAuXG4gICAqIEBwYXJhbSB7Vmlld3xpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdTdGF0ZUxheWVyU3RhdGVFeHRlbnR9IFt2aWV3XSBWaWV3IG9yIHtAbGluayBpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0uXG4gICAqIE9ubHkgcmVxdWlyZWQgd2hlbiB0aGUgbGF5ZXIgaXMgbm90IGFkZGVkIHRvIGEgbWFwLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaXMgdmlzaWJsZSBpbiB0aGUgbWFwIHZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIGlzVmlzaWJsZSh2aWV3KSB7XG4gICAgbGV0IGZyYW1lU3RhdGU7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXBJbnRlcm5hbCgpO1xuICAgIGlmICghdmlldyAmJiBtYXApIHtcbiAgICAgIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIH1cbiAgICBpZiAodmlldyBpbnN0YW5jZW9mIFZpZXcpIHtcbiAgICAgIGZyYW1lU3RhdGUgPSB7XG4gICAgICAgIHZpZXdTdGF0ZTogdmlldy5nZXRTdGF0ZSgpLFxuICAgICAgICBleHRlbnQ6IHZpZXcuY2FsY3VsYXRlRXh0ZW50KCksXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFtZVN0YXRlID0gdmlldztcbiAgICB9XG4gICAgaWYgKCFmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXkgJiYgbWFwKSB7XG4gICAgICBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXkgPSBtYXAuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICB9XG4gICAgbGV0IGxheWVyU3RhdGU7XG4gICAgaWYgKGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheSkge1xuICAgICAgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5maW5kKFxuICAgICAgICAobGF5ZXJTdGF0ZSkgPT4gbGF5ZXJTdGF0ZS5sYXllciA9PT0gdGhpc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGxheWVyRXh0ZW50ID0gdGhpcy5nZXRFeHRlbnQoKTtcblxuICAgIHJldHVybiAoXG4gICAgICBpblZpZXcobGF5ZXJTdGF0ZSwgZnJhbWVTdGF0ZS52aWV3U3RhdGUpICYmXG4gICAgICAoIWxheWVyRXh0ZW50IHx8IGludGVyc2VjdHMobGF5ZXJFeHRlbnQsIGZyYW1lU3RhdGUuZXh0ZW50KSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYXR0cmlidXRpb25zIG9mIHRoZSBzb3VyY2Ugb2YgdGhpcyBsYXllciBmb3IgdGhlIGdpdmVuIHZpZXcuXG4gICAqIEBwYXJhbSB7Vmlld3xpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdTdGF0ZUxheWVyU3RhdGVFeHRlbnR9IFt2aWV3XSBWaWV3IG9yIHtAbGluayBpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0uXG4gICAqIE9ubHkgcmVxdWlyZWQgd2hlbiB0aGUgbGF5ZXIgaXMgbm90IGFkZGVkIHRvIGEgbWFwLlxuICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBdHRyaWJ1dGlvbnMgZm9yIHRoaXMgbGF5ZXIgYXQgdGhlIGdpdmVuIHZpZXcuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEF0dHJpYnV0aW9ucyh2aWV3KSB7XG4gICAgaWYgKCF0aGlzLmlzVmlzaWJsZSh2aWV3KSkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBsZXQgZ2V0QXR0cmlidXRpb25zO1xuICAgIGNvbnN0IHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgZ2V0QXR0cmlidXRpb25zID0gc291cmNlLmdldEF0dHJpYnV0aW9ucygpO1xuICAgIH1cbiAgICBpZiAoIWdldEF0dHJpYnV0aW9ucykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCBmcmFtZVN0YXRlID1cbiAgICAgIHZpZXcgaW5zdGFuY2VvZiBWaWV3ID8gdmlldy5nZXRWaWV3U3RhdGVBbmRFeHRlbnQoKSA6IHZpZXc7XG4gICAgbGV0IGF0dHJpYnV0aW9ucyA9IGdldEF0dHJpYnV0aW9ucyhmcmFtZVN0YXRlKTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25zKSkge1xuICAgICAgYXR0cmlidXRpb25zID0gW2F0dHJpYnV0aW9uc107XG4gICAgfVxuICAgIHJldHVybiBhdHRyaWJ1dGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogSW4gY2hhcmdlIHRvIG1hbmFnZSB0aGUgcmVuZGVyaW5nIG9mIHRoZSBsYXllci4gT25lIGxheWVyIHR5cGUgaXNcbiAgICogYm91bmRlZCB3aXRoIG9uZSBsYXllciByZW5kZXJlci5cbiAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgd2hpY2ggdGhlIHJlbmRlcmVyIG1heSAoYnV0IG5lZWQgbm90KSB1c2VcbiAgICogZm9yIHJlbmRlcmluZyBpdHMgY29udGVudC5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR8bnVsbH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAqL1xuICByZW5kZXIoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgbGF5ZXJSZW5kZXJlciA9IHRoaXMuZ2V0UmVuZGVyZXIoKTtcblxuICAgIGlmIChsYXllclJlbmRlcmVyLnByZXBhcmVGcmFtZShmcmFtZVN0YXRlKSkge1xuICAgICAgdGhpcy5yZW5kZXJlZCA9IHRydWU7XG4gICAgICByZXR1cm4gbGF5ZXJSZW5kZXJlci5yZW5kZXJGcmFtZShmcmFtZVN0YXRlLCB0YXJnZXQpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGxheWVyIGlzIG5vdCB2aXNpYmxlIGR1cmluZyBhIG1hcCByZW5kZXIuXG4gICAqL1xuICB1bnJlbmRlcigpIHtcbiAgICB0aGlzLnJlbmRlcmVkID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRm9yIHVzZSBpbnNpZGUgdGhlIGxpYnJhcnkgb25seS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfSBtYXAgTWFwLlxuICAgKi9cbiAgc2V0TWFwSW50ZXJuYWwobWFwKSB7XG4gICAgaWYgKCFtYXApIHtcbiAgICAgIHRoaXMudW5yZW5kZXIoKTtcbiAgICB9XG4gICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVAsIG1hcCk7XG4gIH1cblxuICAvKipcbiAgICogRm9yIHVzZSBpbnNpZGUgdGhlIGxpYnJhcnkgb25seS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gTWFwLlxuICAgKi9cbiAgZ2V0TWFwSW50ZXJuYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFQKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBsYXllciB0byBiZSByZW5kZXJlZCBvbiB0b3Agb2Ygb3RoZXIgbGF5ZXJzIG9uIGEgbWFwLiBUaGUgbWFwIHdpbGxcbiAgICogbm90IG1hbmFnZSB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbi4gVGhpc1xuICAgKiBpcyB1c2VmdWwgZm9yIHRlbXBvcmFyeSBsYXllcnMuIFRvIHJlbW92ZSBhbiB1bm1hbmFnZWQgbGF5ZXIgZnJvbSB0aGUgbWFwLFxuICAgKiB1c2UgYCNzZXRNYXAobnVsbClgLlxuICAgKlxuICAgKiBUbyBhZGQgdGhlIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCwgdXNlXG4gICAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNhZGRMYXllcn0gaW5zdGVhZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfSBtYXAgTWFwLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRNYXAobWFwKSB7XG4gICAgaWYgKHRoaXMubWFwUHJlY29tcG9zZUtleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBQcmVjb21wb3NlS2V5Xyk7XG4gICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKCFtYXApIHtcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tYXBSZW5kZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubWFwUmVuZGVyS2V5Xyk7XG4gICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgIH1cbiAgICBpZiAobWFwKSB7XG4gICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbGlzdGVuKFxuICAgICAgICBtYXAsXG4gICAgICAgIFJlbmRlckV2ZW50VHlwZS5QUkVDT01QT1NFLFxuICAgICAgICBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgY29uc3QgcmVuZGVyRXZlbnQgPVxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuZGVmYXVsdH0gKi8gKGV2dCk7XG4gICAgICAgICAgY29uc3QgbGF5ZXJTdGF0ZXNBcnJheSA9IHJlbmRlckV2ZW50LmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgICBjb25zdCBsYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKGZhbHNlKTtcbiAgICAgICAgICAvLyBBIGxheWVyIGNhbiBvbmx5IGJlIGFkZGVkIHRvIHRoZSBtYXAgb25jZS4gVXNlIGVpdGhlciBgbGF5ZXIuc2V0TWFwKClgIG9yIGBtYXAuYWRkTGF5ZXIoKWAsIG5vdCBib3RoLlxuICAgICAgICAgIGFzc2VydChcbiAgICAgICAgICAgICFsYXllclN0YXRlc0FycmF5LnNvbWUoZnVuY3Rpb24gKGFycmF5TGF5ZXJTdGF0ZSkge1xuICAgICAgICAgICAgICByZXR1cm4gYXJyYXlMYXllclN0YXRlLmxheWVyID09PSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICA2N1xuICAgICAgICAgICk7XG4gICAgICAgICAgbGF5ZXJTdGF0ZXNBcnJheS5wdXNoKGxheWVyU3RhdGUpO1xuICAgICAgICB9LFxuICAgICAgICB0aGlzXG4gICAgICApO1xuICAgICAgdGhpcy5tYXBSZW5kZXJLZXlfID0gbGlzdGVuKHRoaXMsIEV2ZW50VHlwZS5DSEFOR0UsIG1hcC5yZW5kZXIsIG1hcCk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAqIEBwYXJhbSB7U291cmNlVHlwZXxudWxsfSBzb3VyY2UgVGhlIGxheWVyIHNvdXJjZS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0U291cmNlKHNvdXJjZSkge1xuICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuU09VUkNFLCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAqIEByZXR1cm4ge1JlbmRlcmVyVHlwZXxudWxsfSBUaGUgbGF5ZXIgcmVuZGVyZXIuXG4gICAqL1xuICBnZXRSZW5kZXJlcigpIHtcbiAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyXyA9IHRoaXMuY3JlYXRlUmVuZGVyZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBsYXllciBoYXMgYSByZW5kZXJlci5cbiAgICovXG4gIGhhc1JlbmRlcmVyKCkge1xuICAgIHJldHVybiAhIXRoaXMucmVuZGVyZXJfO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHJlbmRlcmVyIGZvciB0aGlzIGxheWVyLlxuICAgKiBAcmV0dXJuIHtSZW5kZXJlclR5cGV9IEEgbGF5ZXIgcmVuZGVyZXIuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNyZWF0ZVJlbmRlcmVyKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIGlmICh0aGlzLnJlbmRlcmVyXykge1xuICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcG9zZSgpO1xuICAgICAgZGVsZXRlIHRoaXMucmVuZGVyZXJfO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U291cmNlKG51bGwpO1xuICAgIHN1cGVyLmRpc3Bvc2VJbnRlcm5hbCgpO1xuICB9XG59XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgbGF5ZXIgaXMgdmlzaWJsZSBhbmQgaWYgdGhlIHByb3ZpZGVkIHZpZXcgc3RhdGVcbiAqIGhhcyByZXNvbHV0aW9uIGFuZCB6b29tIGxldmVscyB0aGF0IGFyZSBpbiByYW5nZSBvZiB0aGUgbGF5ZXIncyBtaW4vbWF4LlxuICogQHBhcmFtIHtTdGF0ZX0gbGF5ZXJTdGF0ZSBMYXllciBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5TdGF0ZX0gdmlld1N0YXRlIFZpZXcgc3RhdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbGF5ZXIgaXMgdmlzaWJsZSBhdCB0aGUgZ2l2ZW4gdmlldyBzdGF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpIHtcbiAgaWYgKCFsYXllclN0YXRlLnZpc2libGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgcmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICBpZiAoXG4gICAgcmVzb2x1dGlvbiA8IGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiB8fFxuICAgIHJlc29sdXRpb24gPj0gbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uXG4gICkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCB6b29tID0gdmlld1N0YXRlLnpvb207XG4gIHJldHVybiB6b29tID4gbGF5ZXJTdGF0ZS5taW5ab29tICYmIHpvb20gPD0gbGF5ZXJTdGF0ZS5tYXhab29tO1xufVxuXG5leHBvcnQgZGVmYXVsdCBMYXllcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlUHJvcGVydHlcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgUFJFTE9BRDogJ3ByZWxvYWQnLFxuICBVU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUjogJ3VzZUludGVyaW1UaWxlc09uRXJyb3InLFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9CYXNlVGlsZVxuICovXG5pbXBvcnQgTGF5ZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgVGlsZVByb3BlcnR5IGZyb20gJy4vVGlsZVByb3BlcnR5LmpzJztcblxuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICAgaW1wb3J0KFwiLi9MYXllci5qc1wiKS5MYXllckV2ZW50VHlwZXwnY2hhbmdlOnByZWxvYWQnfCdjaGFuZ2U6dXNlSW50ZXJpbVRpbGVzT25FcnJvcicsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgaW1wb3J0KFwiLi9MYXllci5qc1wiKS5MYXllckV2ZW50VHlwZXwnY2hhbmdlOnByZWxvYWQnfCdjaGFuZ2U6dXNlSW50ZXJpbVRpbGVzT25FcnJvcid8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIFJldHVybj59IEJhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZVxuICovXG5cbi8qKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcHJlbG9hZD0wXSBQcmVsb2FkLiBMb2FkIGxvdy1yZXNvbHV0aW9uIHRpbGVzIHVwIHRvIGBwcmVsb2FkYCBsZXZlbHMuIGAwYFxuICogbWVhbnMgbm8gcHJlbG9hZGluZy5cbiAqIEBwcm9wZXJ0eSB7VGlsZVNvdXJjZVR5cGV9IFtzb3VyY2VdIFNvdXJjZSBmb3IgdGhpcyBsYXllci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIFNldHMgdGhlIGxheWVyIGFzIG92ZXJsYXkgb24gYSBtYXAuIFRoZSBtYXAgd2lsbCBub3QgbWFuYWdlXG4gKiB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbiwgYW5kIHRoZSBsYXllciB3aWxsIGJlIHJlbmRlcmVkIG9uIHRvcC4gVGhpcyBpcyB1c2VmdWwgZm9yXG4gKiB0ZW1wb3JhcnkgbGF5ZXJzLiBUaGUgc3RhbmRhcmQgd2F5IHRvIGFkZCBhIGxheWVyIHRvIGEgbWFwIGFuZCBoYXZlIGl0IG1hbmFnZWQgYnkgdGhlIG1hcCBpcyB0b1xuICogdXNlIHtAbGluayBpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdCNhZGRMYXllciBtYXAuYWRkTGF5ZXIoKX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VJbnRlcmltVGlsZXNPbkVycm9yPXRydWVdIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGVTb3VyY2VUeXBlXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IFJlbmRlcmVyVHlwZVxuICogQGV4dGVuZHMge0xheWVyPFRpbGVTb3VyY2VUeXBlLCBSZW5kZXJlclR5cGU+fVxuICogQGFwaVxuICovXG5jbGFzcyBCYXNlVGlsZUxheWVyIGV4dGVuZHMgTGF5ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zPFRpbGVTb3VyY2VUeXBlPn0gW29wdGlvbnNdIFRpbGUgbGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIGNvbnN0IGJhc2VPcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XG5cbiAgICBkZWxldGUgYmFzZU9wdGlvbnMucHJlbG9hZDtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvcjtcbiAgICBzdXBlcihiYXNlT3B0aW9ucyk7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0Jhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtCYXNlVGlsZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtCYXNlVGlsZUxheWVyT25TaWduYXR1cmU8dm9pZD59XG4gICAgICovXG4gICAgdGhpcy51bjtcblxuICAgIHRoaXMuc2V0UHJlbG9hZChvcHRpb25zLnByZWxvYWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJlbG9hZCA6IDApO1xuICAgIHRoaXMuc2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcihcbiAgICAgIG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvciAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yXG4gICAgICAgIDogdHJ1ZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRQcmVsb2FkKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FEKSk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcHJlbG9hZCBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0UHJlbG9hZChwcmVsb2FkKSB7XG4gICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlBSRUxPQUQsIHByZWxvYWQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovIChcbiAgICAgIHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB3aGV0aGVyIHdlIHVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUludGVyaW1UaWxlc09uRXJyb3IgVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFVzZUludGVyaW1UaWxlc09uRXJyb3IodXNlSW50ZXJpbVRpbGVzT25FcnJvcikge1xuICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUiwgdXNlSW50ZXJpbVRpbGVzT25FcnJvcik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGRhdGEgZm9yIGEgcGl4ZWwgbG9jYXRpb24uICBUaGUgcmV0dXJuIHR5cGUgZGVwZW5kcyBvbiB0aGUgc291cmNlIGRhdGEuICBGb3IgaW1hZ2UgdGlsZXMsXG4gICAqIGEgZm91ciBlbGVtZW50IFJHQkEgYXJyYXkgd2lsbCBiZSByZXR1cm5lZC4gIEZvciBkYXRhIHRpbGVzLCB0aGUgYXJyYXkgbGVuZ3RoIHdpbGwgbWF0Y2ggdGhlXG4gICAqIG51bWJlciBvZiBiYW5kcyBpbiB0aGUgZGF0YXNldC4gIEZvciByZXF1ZXN0cyBvdXRzaWRlIHRoZSBsYXllciBleHRlbnQsIGBudWxsYCB3aWxsIGJlIHJldHVybmVkLlxuICAgKiBEYXRhIGZvciBhIGltYWdlIHRpbGVzIGNhbiBvbmx5IGJlIHJldHJpZXZlZCBpZiB0aGUgc291cmNlJ3MgYGNyb3NzT3JpZ2luYCBwcm9wZXJ0eSBpcyBzZXQuXG4gICAqXG4gICAqIGBgYGpzXG4gICAqIC8vIGRpc3BsYXkgbGF5ZXIgZGF0YSBvbiBldmVyeSBwb2ludGVyIG1vdmVcbiAgICogbWFwLm9uKCdwb2ludGVybW92ZScsIChldmVudCkgPT4ge1xuICAgKiAgIGNvbnNvbGUubG9nKGxheWVyLmdldERhdGEoZXZlbnQucGl4ZWwpKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheXxGbG9hdDMyQXJyYXl8RGF0YVZpZXd8bnVsbH0gUGl4ZWwgZGF0YS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0RGF0YShwaXhlbCkge1xuICAgIHJldHVybiBzdXBlci5nZXREYXRhKHBpeGVsKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlVGlsZUxheWVyO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL0xheWVyXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VTdGF0ZSBmcm9tICcuLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCBPYnNlcnZhYmxlIGZyb20gJy4uL09ic2VydmFibGUuanMnO1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5cbi8qKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllclR5cGVcbiAqL1xuY2xhc3MgTGF5ZXJSZW5kZXJlciBleHRlbmRzIE9ic2VydmFibGUge1xuICAvKipcbiAgICogQHBhcmFtIHtMYXllclR5cGV9IGxheWVyIExheWVyLlxuICAgKi9cbiAgY29uc3RydWN0b3IobGF5ZXIpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHJlbmRlcmVyIGlzIGluaXRpYWxpemVkIGFuZCByZWFkeSB0byByZW5kZXIuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5yZWFkeSA9IHRydWU7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLmJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfID0gdGhpcy5oYW5kbGVJbWFnZUNoYW5nZV8uYmluZCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7TGF5ZXJUeXBlfVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJfID0gbGF5ZXI7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9FeGVjdXRvckdyb3VwXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJFeGVjdXRvckdyb3VwID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBc3luY2hyb25vdXMgbGF5ZXIgbGV2ZWwgaGl0IGRldGVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5GZWF0dXJlTGlrZT4+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aFxuICAgKiBhbiBhcnJheSBvZiBmZWF0dXJlcy5cbiAgICovXG4gIGdldEZlYXR1cmVzKHBpeGVsKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEByZXR1cm4ge1VpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXl8RmxvYXQzMkFycmF5fERhdGFWaWV3fG51bGx9IFBpeGVsIGRhdGEuXG4gICAqL1xuICBnZXREYXRhKHBpeGVsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICovXG4gIHByZXBhcmVGcmFtZShmcmFtZVN0YXRlKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8bnVsbH0gdGFyZ2V0IFRhcmdldCB0aGF0IG1heSBiZSB1c2VkIHRvIHJlbmRlciBjb250ZW50IHRvLlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudHxudWxsfSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIHJlbmRlckZyYW1lKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICovXG4gIGxvYWRlZFRpbGVDYWxsYmFjayh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgIGlmICghdGlsZXNbem9vbV0pIHtcbiAgICAgIHRpbGVzW3pvb21dID0ge307XG4gICAgfVxuICAgIHRpbGVzW3pvb21dW3RpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCldID0gdGlsZTtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgYWRkcyBsb2FkZWQgdGlsZXMgdG8gdGhlIHRpbGUgbG9va3VwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uIG9mIHRoZSB0aWxlcy5cbiAgICogQHBhcmFtIHtPYmplY3Q8bnVtYmVyLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHQ+Pn0gdGlsZXMgTG9va3VwIG9mIGxvYWRlZCB0aWxlcyBieSB6b29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAqICAgICBjYWxsZWQgd2l0aCBhIHpvb20gbGV2ZWwgYW5kIGEgdGlsZSByYW5nZSB0byBhZGQgbG9hZGVkIHRpbGVzIHRvIHRoZSBsb29rdXAuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIoc291cmNlLCBwcm9qZWN0aW9uLCB0aWxlcykge1xuICAgIHJldHVybiAoXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIHJhbmdlIGlzIGZ1bGx5IGxvYWRlZC5cbiAgICAgICAqL1xuICAgICAgKHpvb20sIHRpbGVSYW5nZSkgPT4ge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMubG9hZGVkVGlsZUNhbGxiYWNrLmJpbmQodGhpcywgdGlsZXMsIHpvb20pO1xuICAgICAgICByZXR1cm4gc291cmNlLmZvckVhY2hMb2FkZWRUaWxlKHByb2plY3Rpb24sIHpvb20sIHRpbGVSYW5nZSwgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICk7XG4gIH1cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL01hcC5qc1wiKS5IaXRNYXRjaDxUPj59IG1hdGNoZXMgVGhlIGhpdCBkZXRlY3RlZCBtYXRjaGVzIHdpdGggdG9sZXJhbmNlLlxuICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKi9cbiAgZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoXG4gICAgY29vcmRpbmF0ZSxcbiAgICBmcmFtZVN0YXRlLFxuICAgIGhpdFRvbGVyYW5jZSxcbiAgICBjYWxsYmFjayxcbiAgICBtYXRjaGVzXG4gICkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7TGF5ZXJUeXBlfSBMYXllci5cbiAgICovXG4gIGdldExheWVyKCkge1xuICAgIHJldHVybiB0aGlzLmxheWVyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtIGFjdGlvbiBuZWNlc3NhcnkgdG8gZ2V0IHRoZSBsYXllciByZW5kZXJlZCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICogQGFic3RyYWN0XG4gICAqL1xuICBoYW5kbGVGb250c0NoYW5nZWQoKSB7fVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgY2hhbmdlcyBpbiBpbWFnZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgSW1hZ2UgY2hhbmdlIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlSW1hZ2VDaGFuZ2VfKGV2ZW50KSB7XG4gICAgY29uc3QgaW1hZ2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgIGlmIChcbiAgICAgIGltYWdlLmdldFN0YXRlKCkgPT09IEltYWdlU3RhdGUuTE9BREVEIHx8XG4gICAgICBpbWFnZS5nZXRTdGF0ZSgpID09PSBJbWFnZVN0YXRlLkVSUk9SXG4gICAgKSB7XG4gICAgICB0aGlzLnJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdGhlIGltYWdlIGlmIG5vdCBhbHJlYWR5IGxvYWRlZCwgYW5kIHJlZ2lzdGVyIHRoZSBpbWFnZSBjaGFuZ2VcbiAgICogbGlzdGVuZXIgaWYgbmVlZGVkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ltYWdlQmFzZS5qc1wiKS5kZWZhdWx0fSBpbWFnZSBJbWFnZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbWFnZSBpcyBhbHJlYWR5IGxvYWRlZCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGxvYWRJbWFnZShpbWFnZSkge1xuICAgIGxldCBpbWFnZVN0YXRlID0gaW1hZ2UuZ2V0U3RhdGUoKTtcbiAgICBpZiAoaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkxPQURFRCAmJiBpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5ib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyk7XG4gICAgfVxuICAgIGlmIChpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuSURMRSkge1xuICAgICAgaW1hZ2UubG9hZCgpO1xuICAgICAgaW1hZ2VTdGF0ZSA9IGltYWdlLmdldFN0YXRlKCk7XG4gICAgfVxuICAgIHJldHVybiBpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHJlbmRlcklmUmVhZHlBbmRWaXNpYmxlKCkge1xuICAgIGNvbnN0IGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGlmIChsYXllciAmJiBsYXllci5nZXRWaXNpYmxlKCkgJiYgbGF5ZXIuZ2V0U291cmNlU3RhdGUoKSA9PT0gJ3JlYWR5Jykge1xuICAgICAgbGF5ZXIuY2hhbmdlZCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHtcbiAgICBkZWxldGUgdGhpcy5sYXllcl87XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGF5ZXJSZW5kZXJlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVN0YXRlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIElETEU6IDAsXG4gIExPQURJTkc6IDEsXG4gIExPQURFRDogMixcbiAgRVJST1I6IDMsXG4gIEVNUFRZOiA0LFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvRXZlbnRcbiAqL1xuXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcblxuY2xhc3MgUmVuZGVyRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgVHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBbaW52ZXJzZVBpeGVsVHJhbnNmb3JtXSBUcmFuc2Zvcm0gZm9yXG4gICAqICAgICBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gW2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgKiBAcGFyYW0gez8oQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfFdlYkdMUmVuZGVyaW5nQ29udGV4dCl9IFtjb250ZXh0XSBDb250ZXh0LlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLCBjb250ZXh0KSB7XG4gICAgc3VwZXIodHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gZnJvbSBDU1MgcGl4ZWxzIChyZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBtYXAgdmlld3BvcnQpXG4gICAgICogdG8gcmVuZGVyZWQgcGl4ZWxzIG9uIHRoaXMgZXZlbnQncyBgY29udGV4dGAuIE9ubHkgYXZhaWxhYmxlIHdoZW4gYSBDYW52YXMgcmVuZGVyZXIgaXMgdXNlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18dW5kZWZpbmVkfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSA9IGludmVyc2VQaXhlbFRyYW5zZm9ybTtcblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcmVuZGVyIGZyYW1lIHN0YXRlLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZXx1bmRlZmluZWR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVTdGF0ZSA9IGZyYW1lU3RhdGU7XG5cbiAgICAvKipcbiAgICAgKiBDYW52YXMgY29udGV4dC4gTm90IGF2YWlsYWJsZSB3aGVuIHRoZSBldmVudCBpcyBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAuIEZvciBDYW52YXMgMkQgbGF5ZXJzLFxuICAgICAqIHRoZSBjb250ZXh0IHdpbGwgYmUgdGhlIDJEIHJlbmRlcmluZyBjb250ZXh0LiAgRm9yIFdlYkdMIGxheWVycywgdGhlIGNvbnRleHQgd2lsbCBiZSB0aGUgV2ViR0xcbiAgICAgKiBjb250ZXh0LlxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8V2ViR0xSZW5kZXJpbmdDb250ZXh0fHVuZGVmaW5lZH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJFdmVudDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb2xvclxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7Y2xhbXB9IGZyb20gJy4vbWF0aC5qcyc7XG5cbi8qKlxuICogQSBjb2xvciByZXByZXNlbnRlZCBhcyBhIHNob3J0IGFycmF5IFtyZWQsIGdyZWVuLCBibHVlLCBhbHBoYV0uXG4gKiByZWQsIGdyZWVuLCBhbmQgYmx1ZSBzaG91bGQgYmUgaW50ZWdlcnMgaW4gdGhlIHJhbmdlIDAuLjI1NSBpbmNsdXNpdmUuXG4gKiBhbHBoYSBzaG91bGQgYmUgYSBmbG9hdCBpbiB0aGUgcmFuZ2UgMC4uMSBpbmNsdXNpdmUuIElmIG5vIGFscGhhIHZhbHVlIGlzXG4gKiBnaXZlbiB0aGVuIGAxYCB3aWxsIGJlIHVzZWQuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gQ29sb3JcbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIFRoaXMgUmVnRXhwIG1hdGNoZXMgIyBmb2xsb3dlZCBieSAzLCA0LCA2LCBvciA4IGhleCBkaWdpdHMuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBIRVhfQ09MT1JfUkVfID0gL14jKFthLWYwLTldezN9fFthLWYwLTldezR9KD86W2EtZjAtOV17Mn0pezAsMn0pJC9pO1xuXG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgbWF0Y2hpbmcgcG90ZW50aWFsIG5hbWVkIGNvbG9yIHN0eWxlIHN0cmluZ3MuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBOQU1FRF9DT0xPUl9SRV8gPSAvXihbYS16XSopJHxeaHNsYT9cXCguKlxcKSQvaTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2JhIHN0cmluZy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzU3RyaW5nKGNvbG9yKSB7XG4gIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGNvbG9yO1xuICB9XG4gIHJldHVybiB0b1N0cmluZyhjb2xvcik7XG59XG5cbi8qKlxuICogUmV0dXJuIG5hbWVkIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yIE5hbWVkIGNvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2Igc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmcm9tTmFtZWQoY29sb3IpIHtcbiAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZWwuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgaWYgKGVsLnN0eWxlLmNvbG9yICE9PSAnJykge1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIGNvbnN0IHJnYiA9IGdldENvbXB1dGVkU3R5bGUoZWwpLmNvbG9yO1xuICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuICAgIHJldHVybiByZ2I7XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqL1xuZXhwb3J0IGNvbnN0IGZyb21TdHJpbmcgPSAoZnVuY3Rpb24gKCkge1xuICAvLyBXZSBtYWludGFpbiBhIHNtYWxsIGNhY2hlIG9mIHBhcnNlZCBzdHJpbmdzLiAgVG8gcHJvdmlkZSBjaGVhcCBMUlUtbGlrZVxuICAvLyBzZW1hbnRpY3MsIHdoZW5ldmVyIHRoZSBjYWNoZSBncm93cyB0b28gbGFyZ2Ugd2Ugc2ltcGx5IGRlbGV0ZSBhblxuICAvLyBhcmJpdHJhcnkgMjUlIG9mIHRoZSBlbnRyaWVzLlxuXG4gIC8qKlxuICAgKiBAY29uc3RcbiAgICogQHR5cGUge251bWJlcn1cbiAgICovXG4gIGNvbnN0IE1BWF9DQUNIRV9TSVpFID0gMTAyNDtcblxuICAvKipcbiAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIENvbG9yPn1cbiAgICovXG4gIGNvbnN0IGNhY2hlID0ge307XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtudW1iZXJ9XG4gICAqL1xuICBsZXQgY2FjaGVTaXplID0gMDtcblxuICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAgICAgKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHMpIHtcbiAgICAgIGxldCBjb2xvcjtcbiAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShzKSkge1xuICAgICAgICBjb2xvciA9IGNhY2hlW3NdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGNhY2hlU2l6ZSA+PSBNQVhfQ0FDSEVfU0laRSkge1xuICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjYWNoZSkge1xuICAgICAgICAgICAgaWYgKChpKysgJiAzKSA9PT0gMCkge1xuICAgICAgICAgICAgICBkZWxldGUgY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgLS1jYWNoZVNpemU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbG9yID0gZnJvbVN0cmluZ0ludGVybmFsXyhzKTtcbiAgICAgICAgY2FjaGVbc10gPSBjb2xvcjtcbiAgICAgICAgKytjYWNoZVNpemU7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxuICApO1xufSkoKTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIGFycmF5LiBUaGlzIGZ1bmN0aW9uIG1haW50YWlucyBhIGNhY2hlIG9mIGNhbGN1bGF0ZWRcbiAqIGFycmF5cyB3aGljaCBtZWFucyB0aGUgcmVzdWx0IHNob3VsZCBub3QgYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0ge0NvbG9yfHN0cmluZ30gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0FycmF5KGNvbG9yKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGNvbG9yKSkge1xuICAgIHJldHVybiBjb2xvcjtcbiAgfVxuICByZXR1cm4gZnJvbVN0cmluZyhjb2xvcik7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqL1xuZnVuY3Rpb24gZnJvbVN0cmluZ0ludGVybmFsXyhzKSB7XG4gIGxldCByLCBnLCBiLCBhLCBjb2xvcjtcblxuICBpZiAoTkFNRURfQ09MT1JfUkVfLmV4ZWMocykpIHtcbiAgICBzID0gZnJvbU5hbWVkKHMpO1xuICB9XG5cbiAgaWYgKEhFWF9DT0xPUl9SRV8uZXhlYyhzKSkge1xuICAgIC8vIGhleFxuICAgIGNvbnN0IG4gPSBzLmxlbmd0aCAtIDE7IC8vIG51bWJlciBvZiBoZXggZGlnaXRzXG4gICAgbGV0IGQ7IC8vIG51bWJlciBvZiBkaWdpdHMgcGVyIGNoYW5uZWxcbiAgICBpZiAobiA8PSA0KSB7XG4gICAgICBkID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgZCA9IDI7XG4gICAgfVxuICAgIGNvbnN0IGhhc0FscGhhID0gbiA9PT0gNCB8fCBuID09PSA4O1xuICAgIHIgPSBwYXJzZUludChzLnN1YnN0cigxICsgMCAqIGQsIGQpLCAxNik7XG4gICAgZyA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAxICogZCwgZCksIDE2KTtcbiAgICBiID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDIgKiBkLCBkKSwgMTYpO1xuICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgYSA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAzICogZCwgZCksIDE2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYSA9IDI1NTtcbiAgICB9XG4gICAgaWYgKGQgPT0gMSkge1xuICAgICAgciA9IChyIDw8IDQpICsgcjtcbiAgICAgIGcgPSAoZyA8PCA0KSArIGc7XG4gICAgICBiID0gKGIgPDwgNCkgKyBiO1xuICAgICAgaWYgKGhhc0FscGhhKSB7XG4gICAgICAgIGEgPSAoYSA8PCA0KSArIGE7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbG9yID0gW3IsIGcsIGIsIGEgLyAyNTVdO1xuICB9IGVsc2UgaWYgKHMuc3RhcnRzV2l0aCgncmdiYSgnKSkge1xuICAgIC8vIHJnYmEoKVxuICAgIGNvbG9yID0gcy5zbGljZSg1LCAtMSkuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcbiAgICBub3JtYWxpemUoY29sb3IpO1xuICB9IGVsc2UgaWYgKHMuc3RhcnRzV2l0aCgncmdiKCcpKSB7XG4gICAgLy8gcmdiKClcbiAgICBjb2xvciA9IHMuc2xpY2UoNCwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgY29sb3IucHVzaCgxKTtcbiAgICBub3JtYWxpemUoY29sb3IpO1xuICB9IGVsc2Uge1xuICAgIGFzc2VydChmYWxzZSwgMTQpOyAvLyBJbnZhbGlkIGNvbG9yXG4gIH1cbiAgcmV0dXJuIGNvbG9yO1xufVxuXG4vKipcbiAqIFRPRE8gdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgaW4gdGhlIHRlc3QsIHdlIHByb2JhYmx5IHNob3VsZG4ndCBleHBvcnQgaXRcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENsYW1wZWQgY29sb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoY29sb3IpIHtcbiAgY29sb3JbMF0gPSBjbGFtcCgoY29sb3JbMF0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbMV0gPSBjbGFtcCgoY29sb3JbMV0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbMl0gPSBjbGFtcCgoY29sb3JbMl0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgY29sb3JbM10gPSBjbGFtcChjb2xvclszXSwgMCwgMSk7XG4gIHJldHVybiBjb2xvcjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcoY29sb3IpIHtcbiAgbGV0IHIgPSBjb2xvclswXTtcbiAgaWYgKHIgIT0gKHIgfCAwKSkge1xuICAgIHIgPSAociArIDAuNSkgfCAwO1xuICB9XG4gIGxldCBnID0gY29sb3JbMV07XG4gIGlmIChnICE9IChnIHwgMCkpIHtcbiAgICBnID0gKGcgKyAwLjUpIHwgMDtcbiAgfVxuICBsZXQgYiA9IGNvbG9yWzJdO1xuICBpZiAoYiAhPSAoYiB8IDApKSB7XG4gICAgYiA9IChiICsgMC41KSB8IDA7XG4gIH1cbiAgY29uc3QgYSA9IGNvbG9yWzNdID09PSB1bmRlZmluZWQgPyAxIDogTWF0aC5yb3VuZChjb2xvclszXSAqIDEwMCkgLyAxMDA7XG4gIHJldHVybiAncmdiYSgnICsgciArICcsJyArIGcgKyAnLCcgKyBiICsgJywnICsgYSArICcpJztcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBzdHJpbmcgaXMgYWN0dWFsbHkgYSB2YWxpZCBjb2xvclxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmdDb2xvcihzKSB7XG4gIGlmIChOQU1FRF9DT0xPUl9SRV8udGVzdChzKSkge1xuICAgIHMgPSBmcm9tTmFtZWQocyk7XG4gIH1cbiAgcmV0dXJuIEhFWF9DT0xPUl9SRV8udGVzdChzKSB8fCBzLnN0YXJ0c1dpdGgoJ3JnYmEoJykgfHwgcy5zdGFydHNXaXRoKCdyZ2IoJyk7XG59XG4iLCJpbXBvcnQge1dPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTfSBmcm9tICcuL2hhcy5qcyc7XG5cbi8qKlxuICogQG1vZHVsZSBvbC9kb21cbiAqL1xuXG4vL0ZJWE1FIE1vdmUgdGhpcyBmdW5jdGlvbiB0byB0aGUgY2FudmFzIG1vZHVsZVxuLyoqXG4gKiBDcmVhdGUgYW4gaHRtbCBjYW52YXMgZWxlbWVudCBhbmQgcmV0dXJucyBpdHMgMmQgY29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhdIENhbnZhcyB3aWR0aC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0XSBDYW52YXMgaGVpZ2h0LlxuICogQHBhcmFtIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD59IFtjYW52YXNQb29sXSBDYW52YXMgcG9vbCB0byB0YWtlIGV4aXN0aW5nIGNhbnZhcyBmcm9tLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc30gW3NldHRpbmdzXSBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc1xuICogQHJldHVybiB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBUaGUgY29udGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhbnZhc0NvbnRleHQyRCh3aWR0aCwgaGVpZ2h0LCBjYW52YXNQb29sLCBzZXR0aW5ncykge1xuICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fE9mZnNjcmVlbkNhbnZhc30gKi9cbiAgbGV0IGNhbnZhcztcbiAgaWYgKGNhbnZhc1Bvb2wgJiYgY2FudmFzUG9vbC5sZW5ndGgpIHtcbiAgICBjYW52YXMgPSBjYW52YXNQb29sLnNoaWZ0KCk7XG4gIH0gZWxzZSBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICBjYW52YXMgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoIHx8IDMwMCwgaGVpZ2h0IHx8IDMwMCk7XG4gIH0gZWxzZSB7XG4gICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gIH1cbiAgaWYgKHdpZHRoKSB7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gIH1cbiAgaWYgKGhlaWdodCkge1xuICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cbiAgLy9GSVhNRSBBbGxvdyBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgYXMgcmV0dXJuIHR5cGVcbiAgcmV0dXJuIC8qKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAqLyAoXG4gICAgY2FudmFzLmdldENvbnRleHQoJzJkJywgc2V0dGluZ3MpXG4gICk7XG59XG5cbi8qKlxuICogUmVsZWFzZXMgY2FudmFzIG1lbW9yeSB0byBhdm9pZCBleGNlZWRpbmcgbWVtb3J5IGxpbWl0cyBpbiBTYWZhcmkuXG4gKiBTZWUgaHR0cHM6Ly9wcWluYS5ubC9ibG9nL3RvdGFsLWNhbnZhcy1tZW1vcnktdXNlLWV4Y2VlZHMtdGhlLW1heGltdW0tbGltaXQvXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVsZWFzZUNhbnZhcyhjb250ZXh0KSB7XG4gIGNvbnN0IGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICBjYW52YXMud2lkdGggPSAxO1xuICBjYW52YXMuaGVpZ2h0ID0gMTtcbiAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgMSwgMSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIHdpZHRoIGZvciB0aGUgZ2l2ZW4gZWxlbWVudCBpbmNsdWRpbmcgbWFyZ2luLFxuICogcGFkZGluZyBhbmQgYm9yZGVyLlxuICogRXF1aXZhbGVudCB0byBqUXVlcnkncyBgJChlbCkub3V0ZXJXaWR0aCh0cnVlKWAuXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlcldpZHRoKGVsZW1lbnQpIHtcbiAgbGV0IHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgY29uc3Qgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICB3aWR0aCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5MZWZ0LCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5SaWdodCwgMTApO1xuXG4gIHJldHVybiB3aWR0aDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgaGVpZ2h0IGZvciB0aGUgZ2l2ZW4gZWxlbWVudCBpbmNsdWRpbmcgbWFyZ2luLFxuICogcGFkZGluZyBhbmQgYm9yZGVyLlxuICogRXF1aXZhbGVudCB0byBqUXVlcnkncyBgJChlbCkub3V0ZXJIZWlnaHQodHJ1ZSlgLlxuICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGhlaWdodC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVySGVpZ2h0KGVsZW1lbnQpIHtcbiAgbGV0IGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICBjb25zdCBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gIGhlaWdodCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5Ub3AsIDEwKSArIHBhcnNlSW50KHN0eWxlLm1hcmdpbkJvdHRvbSwgMTApO1xuXG4gIHJldHVybiBoZWlnaHQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBuZXdOb2RlIE5vZGUgdG8gcmVwbGFjZSBvbGQgbm9kZVxuICogQHBhcmFtIHtOb2RlfSBvbGROb2RlIFRoZSBub2RlIHRvIGJlIHJlcGxhY2VkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlTm9kZShuZXdOb2RlLCBvbGROb2RlKSB7XG4gIGNvbnN0IHBhcmVudCA9IG9sZE5vZGUucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgb2xkTm9kZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlLlxuICogQHJldHVybiB7Tm9kZXxudWxsfSBUaGUgbm9kZSB0aGF0IHdhcyByZW1vdmVkIG9yIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlID8gbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlIHRoZSBjaGlsZHJlbiBmcm9tLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkge1xuICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgfVxufVxuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgY2hpbGRyZW4gb2YgYSBwYXJlbnQgbm9kZSBzbyB0aGV5IG1hdGNoIHRoZVxuICogcHJvdmlkZWQgbGlzdCBvZiBjaGlsZHJlbi4gIFRoaXMgZnVuY3Rpb24gYWltcyB0byBlZmZpY2llbnRseVxuICogcmVtb3ZlLCBhZGQsIGFuZCByZW9yZGVyIGNoaWxkIG5vZGVzIHdoaWxlIG1haW50YWluaW5nIGEgc2ltcGxlXG4gKiBpbXBsZW1lbnRhdGlvbiAoaXQgaXMgbm90IGd1YXJhbnRlZWQgdG8gbWluaW1pemUgRE9NIG9wZXJhdGlvbnMpLlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBwYXJlbnQgbm9kZSB3aG9zZSBjaGlsZHJlbiBuZWVkIHJld29ya2luZy5cbiAqIEBwYXJhbSB7QXJyYXk8Tm9kZT59IGNoaWxkcmVuIFRoZSBkZXNpcmVkIGNoaWxkcmVuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUNoaWxkcmVuKG5vZGUsIGNoaWxkcmVuKSB7XG4gIGNvbnN0IG9sZENoaWxkcmVuID0gbm9kZS5jaGlsZE5vZGVzO1xuXG4gIGZvciAobGV0IGkgPSAwOyB0cnVlOyArK2kpIHtcbiAgICBjb25zdCBvbGRDaGlsZCA9IG9sZENoaWxkcmVuW2ldO1xuICAgIGNvbnN0IG5ld0NoaWxkID0gY2hpbGRyZW5baV07XG5cbiAgICAvLyBjaGVjayBpZiBvdXIgd29yayBpcyBkb25lXG4gICAgaWYgKCFvbGRDaGlsZCAmJiAhbmV3Q2hpbGQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGNoaWxkcmVuIG1hdGNoXG4gICAgaWYgKG9sZENoaWxkID09PSBuZXdDaGlsZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gY2hlY2sgaWYgYSBuZXcgY2hpbGQgbmVlZHMgdG8gYmUgYWRkZWRcbiAgICBpZiAoIW9sZENoaWxkKSB7XG4gICAgICBub2RlLmFwcGVuZENoaWxkKG5ld0NoaWxkKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIGNoZWNrIGlmIGFuIG9sZCBjaGlsZCBuZWVkcyB0byBiZSByZW1vdmVkXG4gICAgaWYgKCFuZXdDaGlsZCkge1xuICAgICAgbm9kZS5yZW1vdmVDaGlsZChvbGRDaGlsZCk7XG4gICAgICAtLWk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyByZW9yZGVyXG4gICAgbm9kZS5pbnNlcnRCZWZvcmUobmV3Q2hpbGQsIG9sZENoaWxkKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9MYXllclxuICovXG5pbXBvcnQgTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9MYXllci5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge1xuICBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSxcbiAgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLFxuICBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLFxufSBmcm9tICcuLi8uLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHthc0FycmF5fSBmcm9tICcuLi8uLi9jb2xvci5qcyc7XG5pbXBvcnQge2NyZWF0ZUNhbnZhc0NvbnRleHQyRH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7ZXF1YWxzfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge1xuICBnZXRCb3R0b21MZWZ0LFxuICBnZXRCb3R0b21SaWdodCxcbiAgZ2V0VG9wTGVmdCxcbiAgZ2V0VG9wUmlnaHQsXG59IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5cbi8qKlxuICogQHR5cGUge0FycmF5PEhUTUxDYW52YXNFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGNvbnN0IGNhbnZhc1Bvb2wgPSBbXTtcblxuLyoqXG4gKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICovXG5sZXQgcGl4ZWxDb250ZXh0ID0gbnVsbDtcblxuZnVuY3Rpb24gY3JlYXRlUGl4ZWxDb250ZXh0KCkge1xuICBwaXhlbENvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSwgdW5kZWZpbmVkLCB7XG4gICAgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlLFxuICB9KTtcbn1cblxuLyoqXG4gKiBAYWJzdHJhY3RcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gTGF5ZXJUeXBlXG4gKiBAZXh0ZW5kcyB7TGF5ZXJSZW5kZXJlcjxMYXllclR5cGU+fVxuICovXG5jbGFzcyBDYW52YXNMYXllclJlbmRlcmVyIGV4dGVuZHMgTGF5ZXJSZW5kZXJlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0xheWVyVHlwZX0gbGF5ZXIgTGF5ZXIuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihsYXllcikge1xuICAgIHN1cGVyKGxheWVyKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb247XG5cbiAgICAvKipcbiAgICAgKiBBIHRlbXBvcmFyeSB0cmFuc2Zvcm0uICBUaGUgdmFsdWVzIGluIHRoaXMgdHJhbnNmb3JtIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gYVxuICAgICAqIGZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgdmFsdWVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLnRlbXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHJlbmRlcmVkIHBpeGVscyB0byB2aWV3cG9ydCBDU1MgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAqIGJlIHNldCB3aGVuIHJlbmRlcmluZyBhIGZyYW1lIGFuZCBtYXkgYmUgdXNlZCBieSBvdGhlciBmdW5jdGlvbnMgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHJhbnNmb3JtIGZvciB2aWV3cG9ydCBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy4gIFRoaXMgdHJhbnNmb3JtIG11c3RcbiAgICAgKiBiZSBzZXQgd2hlbiByZW5kZXJpbmcgYSBmcmFtZSBhbmQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZnVuY3Rpb25zIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICovXG4gICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuY29udGFpbmVyUmV1c2VkID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICovXG4gICAgdGhpcy5waXhlbENvbnRleHRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV8bnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLmZyYW1lU3RhdGUgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbCBUaGUgY29sdW1uIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm93IFRoZSByb3cgaW5kZXguXG4gICAqIEByZXR1cm4ge1VpbnQ4Q2xhbXBlZEFycmF5fG51bGx9IFRoZSBpbWFnZSBkYXRhLlxuICAgKi9cbiAgZ2V0SW1hZ2VEYXRhKGltYWdlLCBjb2wsIHJvdykge1xuICAgIGlmICghcGl4ZWxDb250ZXh0KSB7XG4gICAgICBjcmVhdGVQaXhlbENvbnRleHQoKTtcbiAgICB9XG4gICAgcGl4ZWxDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCAxLCAxKTtcblxuICAgIGxldCBkYXRhO1xuICAgIHRyeSB7XG4gICAgICBwaXhlbENvbnRleHQuZHJhd0ltYWdlKGltYWdlLCBjb2wsIHJvdywgMSwgMSwgMCwgMCwgMSwgMSk7XG4gICAgICBkYXRhID0gcGl4ZWxDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcGl4ZWxDb250ZXh0ID0gbnVsbDtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vTWFwLmpzJykuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBCYWNrZ3JvdW5kIGNvbG9yLlxuICAgKi9cbiAgZ2V0QmFja2dyb3VuZChmcmFtZVN0YXRlKSB7XG4gICAgY29uc3QgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgbGV0IGJhY2tncm91bmQgPSBsYXllci5nZXRCYWNrZ3JvdW5kKCk7XG4gICAgaWYgKHR5cGVvZiBiYWNrZ3JvdW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBiYWNrZ3JvdW5kID0gYmFja2dyb3VuZChmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yZXNvbHV0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIGJhY2tncm91bmQgfHwgdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHJlbmRlcmluZyBjb250YWluZXIgZnJvbSBhbiBleGlzdGluZyB0YXJnZXQsIGlmIGNvbXBhdGlibGUuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBQb3RlbnRpYWwgcmVuZGVyIHRhcmdldC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zZm9ybSBDU1MgVHJhbnNmb3JtLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2JhY2tncm91bmRDb2xvcl0gQmFja2dyb3VuZCBjb2xvci5cbiAgICovXG4gIHVzZUNvbnRhaW5lcih0YXJnZXQsIHRyYW5zZm9ybSwgYmFja2dyb3VuZENvbG9yKSB7XG4gICAgY29uc3QgbGF5ZXJDbGFzc05hbWUgPSB0aGlzLmdldExheWVyKCkuZ2V0Q2xhc3NOYW1lKCk7XG4gICAgbGV0IGNvbnRhaW5lciwgY29udGV4dDtcbiAgICBpZiAoXG4gICAgICB0YXJnZXQgJiZcbiAgICAgIHRhcmdldC5jbGFzc05hbWUgPT09IGxheWVyQ2xhc3NOYW1lICYmXG4gICAgICAoIWJhY2tncm91bmRDb2xvciB8fFxuICAgICAgICAodGFyZ2V0ICYmXG4gICAgICAgICAgdGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciAmJlxuICAgICAgICAgIGVxdWFscyhcbiAgICAgICAgICAgIGFzQXJyYXkodGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciksXG4gICAgICAgICAgICBhc0FycmF5KGJhY2tncm91bmRDb2xvcilcbiAgICAgICAgICApKSlcbiAgICApIHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IHRhcmdldC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgIGlmIChjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHQuY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9PT0gdHJhbnNmb3JtKSB7XG4gICAgICAvLyBDb250YWluZXIgb2YgdGhlIHByZXZpb3VzIGxheWVyIHJlbmRlcmVyIGNhbiBiZSB1c2VkLlxuICAgICAgdGhpcy5jb250YWluZXIgPSB0YXJnZXQ7XG4gICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb250YWluZXJSZXVzZWQpIHtcbiAgICAgIC8vIFByZXZpb3VzbHkgcmV1c2VkIGNvbnRhaW5lciBjYW5ub3QgYmUgdXNlZCBhbnkgbW9yZS5cbiAgICAgIHRoaXMuY29udGFpbmVyID0gbnVsbDtcbiAgICAgIHRoaXMuY29udGV4dCA9IG51bGw7XG4gICAgICB0aGlzLmNvbnRhaW5lclJldXNlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG51bGw7XG4gICAgfVxuICAgIGlmICghdGhpcy5jb250YWluZXIpIHtcbiAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGxheWVyQ2xhc3NOYW1lO1xuICAgICAgbGV0IHN0eWxlID0gY29udGFpbmVyLnN0eWxlO1xuICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICBzdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKCk7XG4gICAgICBjb25zdCBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG4gICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICBzdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gJ3RvcCBsZWZ0JztcbiAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIXRoaXMuY29udGFpbmVyUmV1c2VkICYmXG4gICAgICBiYWNrZ3JvdW5kQ29sb3IgJiZcbiAgICAgICF0aGlzLmNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3JcbiAgICApIHtcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvcjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgQ2xpcCBleHRlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNsaXBVbnJvdGF0ZWQoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgY29uc3QgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICBjb25zdCB0b3BSaWdodCA9IGdldFRvcFJpZ2h0KGV4dGVudCk7XG4gICAgY29uc3QgYm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICAgIGNvbnN0IGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG5cbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BMZWZ0KTtcbiAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tUmlnaHQpO1xuICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbUxlZnQpO1xuXG4gICAgY29uc3QgaW52ZXJ0ZWQgPSB0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybTtcbiAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgdG9wTGVmdCk7XG4gICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIHRvcFJpZ2h0KTtcbiAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgYm90dG9tUmlnaHQpO1xuICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21MZWZ0KTtcblxuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5tb3ZlVG8oTWF0aC5yb3VuZCh0b3BMZWZ0WzBdKSwgTWF0aC5yb3VuZCh0b3BMZWZ0WzFdKSk7XG4gICAgY29udGV4dC5saW5lVG8oTWF0aC5yb3VuZCh0b3BSaWdodFswXSksIE1hdGgucm91bmQodG9wUmlnaHRbMV0pKTtcbiAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzBdKSwgTWF0aC5yb3VuZChib3R0b21SaWdodFsxXSkpO1xuICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tTGVmdFswXSksIE1hdGgucm91bmQoYm90dG9tTGVmdFsxXSkpO1xuICAgIGNvbnRleHQuY2xpcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkaXNwYXRjaFJlbmRlckV2ZW50Xyh0eXBlLCBjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgY29uc3QgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgaWYgKGxheWVyLmhhc0xpc3RlbmVyKHR5cGUpKSB7XG4gICAgICBjb25zdCBldmVudCA9IG5ldyBSZW5kZXJFdmVudChcbiAgICAgICAgdHlwZSxcbiAgICAgICAgdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sXG4gICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgIGNvbnRleHRcbiAgICAgICk7XG4gICAgICBsYXllci5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICB0aGlzLmZyYW1lU3RhdGUgPSBmcmFtZVN0YXRlO1xuICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlBSRVJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcG9zdFJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUE9TVFJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nIHRvIGFuIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHJvdGF0ZWQgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggT2Zmc2V0IG9uIHRoZSB4LWF4aXMgaW4gdmlldyBjb29yZGluYXRlcy5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICAgKi9cbiAgZ2V0UmVuZGVyVHJhbnNmb3JtKFxuICAgIGNlbnRlcixcbiAgICByZXNvbHV0aW9uLFxuICAgIHJvdGF0aW9uLFxuICAgIHBpeGVsUmF0aW8sXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIG9mZnNldFhcbiAgKSB7XG4gICAgY29uc3QgZHgxID0gd2lkdGggLyAyO1xuICAgIGNvbnN0IGR5MSA9IGhlaWdodCAvIDI7XG4gICAgY29uc3Qgc3ggPSBwaXhlbFJhdGlvIC8gcmVzb2x1dGlvbjtcbiAgICBjb25zdCBzeSA9IC1zeDtcbiAgICBjb25zdCBkeDIgPSAtY2VudGVyWzBdICsgb2Zmc2V0WDtcbiAgICBjb25zdCBkeTIgPSAtY2VudGVyWzFdO1xuICAgIHJldHVybiBjb21wb3NlVHJhbnNmb3JtKFxuICAgICAgdGhpcy50ZW1wVHJhbnNmb3JtLFxuICAgICAgZHgxLFxuICAgICAgZHkxLFxuICAgICAgc3gsXG4gICAgICBzeSxcbiAgICAgIC1yb3RhdGlvbixcbiAgICAgIGR4MixcbiAgICAgIGR5MlxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAuXG4gICAqL1xuICBkaXNwb3NlSW50ZXJuYWwoKSB7XG4gICAgZGVsZXRlIHRoaXMuZnJhbWVTdGF0ZTtcbiAgICBzdXBlci5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNMYXllclJlbmRlcmVyO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7YWJzdHJhY3R9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQge2Vhc2VJbn0gZnJvbSAnLi9lYXNpbmcuanMnO1xuXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL1RpbGV+VGlsZX0gZm9yIHRoZSB0aWxlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgdXJsIGFzIGFyZ3VtZW50cy4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH0pO1xuICogYGBgXG4gKiBGb3IgbW9yZSBmaW5lIGdyYWluZWQgY29udHJvbCwgdGhlIGxvYWQgZnVuY3Rpb24gY2FuIHVzZSBmZXRjaCBvciBYTUxIdHRwUmVxdWVzdCBhbmQgaW52b2x2ZVxuICogZXJyb3IgaGFuZGxpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBUaWxlU3RhdGUgZnJvbSAnb2wvVGlsZVN0YXRlLmpzJztcbiAqXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gKiAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XG4gKiAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkZW5kJywgZnVuY3Rpb24gKGV2dCkge1xuICogICAgIGNvbnN0IGRhdGEgPSB0aGlzLnJlc3BvbnNlO1xuICogICAgIGlmIChkYXRhICE9PSB1bmRlZmluZWQpIHtcbiAqICAgICAgIHRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xuICogICAgIH0gZWxzZSB7XG4gKiAgICAgICB0aWxlLnNldFN0YXRlKFRpbGVTdGF0ZS5FUlJPUik7XG4gKiAgICAgfVxuICogICB9KTtcbiAqICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICogICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgfSk7XG4gKiAgIHhoci5vcGVuKCdHRVQnLCBzcmMpO1xuICogICB4aHIuc2VuZCgpO1xuICogfSk7XG4gKiBgYGBcbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oVGlsZSwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGVTb3VyY2V9IHNvdXJjZXMgdXNlIGEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIHRvIGdldFxuICogdGhlIHVybCB0aGF0IHByb3ZpZGVzIGEgdGlsZSBmb3IgYSBnaXZlbiB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVjb29yZH5UaWxlQ29vcmR9IGZvciB0aGUgdGlsZVxuICogY29vcmRpbmF0ZSwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcGl4ZWwgcmF0aW8gYW5kIGFcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb259IGZvciB0aGUgcHJvamVjdGlvbiAgYXMgYXJndW1lbnRzXG4gKiBhbmQgcmV0dXJucyBhIGB7c3RyaW5nfWAgcmVwcmVzZW50aW5nIHRoZSB0aWxlIFVSTCwgb3IgdW5kZWZpbmVkIGlmIG5vIHRpbGVcbiAqIHNob3VsZCBiZSByZXF1ZXN0ZWQgZm9yIHRoZSBwYXNzZWQgdGlsZSBjb29yZGluYXRlLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQsIG51bWJlcixcbiAqICAgICAgICAgICBpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0KTogKHN0cmluZ3x1bmRlZmluZWQpfSBVcmxGdW5jdGlvblxuICogQGFwaVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uPTI1MF0gQSBkdXJhdGlvbiBmb3IgdGlsZSBvcGFjaXR5XG4gKiB0cmFuc2l0aW9ucyBpbiBtaWxsaXNlY29uZHMuIEEgZHVyYXRpb24gb2YgMCBkaXNhYmxlcyB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9ZmFsc2VdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiB0aGUgbmVhcmVzdCBuZWlnaGJvciBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy5cbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHRpbGVzLlxuICpcbiAqIEBhYnN0cmFjdFxuICovXG5jbGFzcyBUaWxlIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIFRpbGUgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHRpbGVDb29yZCwgc3RhdGUsIG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNvb3JkID0gdGlsZUNvb3JkO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcblxuICAgIC8qKlxuICAgICAqIEFuIFwiaW50ZXJpbVwiIHRpbGUgZm9yIHRoaXMgdGlsZS4gVGhlIGludGVyaW0gdGlsZSBtYXkgYmUgdXNlZCB3aGlsZSB0aGlzXG4gICAgICogb25lIGlzIGxvYWRpbmcsIGZvciBcInNtb290aFwiIHRyYW5zaXRpb25zIHdoZW4gY2hhbmdpbmcgcGFyYW1zL2RpbWVuc2lvbnNcbiAgICAgKiBvbiB0aGUgc291cmNlLlxuICAgICAqIEB0eXBlIHtUaWxlfVxuICAgICAqL1xuICAgIHRoaXMuaW50ZXJpbVRpbGUgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQSBrZXkgYXNzaWduZWQgdG8gdGhlIHRpbGUuIFRoaXMgaXMgdXNlZCBieSB0aGUgdGlsZSBzb3VyY2UgdG8gZGV0ZXJtaW5lXG4gICAgICogaWYgdGhpcyB0aWxlIGNhbiBlZmZlY3RpdmVseSBiZSB1c2VkLCBvciBpZiBhIG5ldyB0aWxlIHNob3VsZCBiZSBjcmVhdGVkXG4gICAgICogYW5kIHRoaXMgb25lIGJlIHVzZWQgYXMgYW4gaW50ZXJpbSB0aWxlIGZvciB0aGlzIG5ldyB0aWxlLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5rZXkgPSAnJztcblxuICAgIC8qKlxuICAgICAqIFRoZSBkdXJhdGlvbiBmb3IgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbi5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNpdGlvbl8gPVxuICAgICAgb3B0aW9ucy50cmFuc2l0aW9uID09PSB1bmRlZmluZWQgPyAyNTAgOiBvcHRpb25zLnRyYW5zaXRpb247XG5cbiAgICAvKipcbiAgICAgKiBMb29rdXAgb2Ygc3RhcnQgdGltZXMgZm9yIHJlbmRlcmluZyB0cmFuc2l0aW9ucy4gIElmIHRoZSBzdGFydCB0aW1lIGlzXG4gICAgICogZXF1YWwgdG8gLTEsIHRoZSB0cmFuc2l0aW9uIGlzIGNvbXBsZXRlLlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuaW50ZXJwb2xhdGUgPSAhIW9wdGlvbnMuaW50ZXJwb2xhdGU7XG4gIH1cblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgY2hhbmdlZCgpIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGJ5IHRoZSB0aWxlIGNhY2hlIHdoZW4gdGhlIHRpbGUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBjYWNoZSBkdWUgdG8gZXhwaXJ5XG4gICAqL1xuICByZWxlYXNlKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09PSBUaWxlU3RhdGUuRVJST1IpIHtcbiAgICAgIC8vIHRvIHJlbW92ZSB0aGUgYGNoYW5nZWAgbGlzdGVuZXIgb24gdGhpcyB0aWxlIGluIGBvbC9UaWxlUXVldWUjaGFuZGxlVGlsZUNoYW5nZWBcbiAgICAgIHRoaXMuc2V0U3RhdGUoVGlsZVN0YXRlLkVNUFRZKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gICAqL1xuICBnZXRLZXkoKSB7XG4gICAgcmV0dXJuIHRoaXMua2V5ICsgJy8nICsgdGhpcy50aWxlQ29vcmQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBpbnRlcmltIHRpbGUgbW9zdCBzdWl0YWJsZSBmb3IgcmVuZGVyaW5nIHVzaW5nIHRoZSBjaGFpbiBvZiBpbnRlcmltXG4gICAqIHRpbGVzLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSAgbW9zdCByZWNlbnQgdGlsZSB0aGF0IGhhcyBiZWVuIGxvYWRlZCwgaWYgbm9cbiAgICogc3VjaCB0aWxlIGV4aXN0cywgdGhlIG9yaWdpbmFsIHRpbGUgaXMgcmV0dXJuZWQuXG4gICAqIEByZXR1cm4geyFUaWxlfSBCZXN0IHRpbGUgZm9yIHJlbmRlcmluZy5cbiAgICovXG4gIGdldEludGVyaW1UaWxlKCkge1xuICAgIGlmICghdGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgLy9lbXB0eSBjaGFpblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGxldCB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcblxuICAgIC8vIGZpbmQgdGhlIGZpcnN0IGxvYWRlZCB0aWxlIGFuZCByZXR1cm4gaXQuIFNpbmNlIHRoZSBjaGFpbiBpcyBzb3J0ZWQgaW5cbiAgICAvLyBkZWNyZWFzaW5nIG9yZGVyIG9mIGNyZWF0aW9uIHRpbWUsIHRoZXJlIGlzIG5vIG5lZWQgdG8gc2VhcmNoIHRoZSByZW1haW5kZXJcbiAgICAvLyBvZiB0aGUgbGlzdCAoYWxsIHRob3NlIHRpbGVzIGNvcnJlc3BvbmQgdG8gb2xkZXIgcmVxdWVzdHMgYW5kIHdpbGwgYmVcbiAgICAvLyBjbGVhbmVkIHVwIGJ5IHJlZnJlc2hJbnRlcmltQ2hhaW4pXG4gICAgZG8ge1xuICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgIC8vIFNob3cgdGlsZSBpbW1lZGlhdGVseSBpbnN0ZWFkIG9mIGZhZGluZyBpdCBpbiBhZnRlciBsb2FkaW5nLCBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBpbnRlcmltIHRpbGUgaXMgaW4gcGxhY2UgYWxyZWFkeVxuICAgICAgICB0aGlzLnRyYW5zaXRpb25fID0gMDtcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgICB9XG4gICAgICB0aWxlID0gdGlsZS5pbnRlcmltVGlsZTtcbiAgICB9IHdoaWxlICh0aWxlKTtcblxuICAgIC8vIHdlIGNhbiBub3QgZmluZCBhIGJldHRlciB0aWxlXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogR29lcyB0aHJvdWdoIHRoZSBjaGFpbiBvZiBpbnRlcmltIHRpbGVzIGFuZCBkaXNjYXJkcyBzZWN0aW9ucyBvZiB0aGUgY2hhaW5cbiAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlbGV2YW50LlxuICAgKi9cbiAgcmVmcmVzaEludGVyaW1DaGFpbigpIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7VGlsZX1cbiAgICAgKi9cbiAgICBsZXQgcHJldiA9IHRoaXM7XG5cbiAgICBkbyB7XG4gICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgLy93ZSBoYXZlIGEgbG9hZGVkIHRpbGUsIHdlIGNhbiBkaXNjYXJkIHRoZSByZXN0IG9mIHRoZSBsaXN0XG4gICAgICAgIC8vd2Ugd291bGQgY291bGQgYWJvcnQgYW55IExPQURJTkcgdGlsZSByZXF1ZXN0XG4gICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUgKGkuZS4gYW55IExPQURJTkcgdGlsZSBmb2xsb3dpbmcgdGhpcyBlbnRyeSBpbiB0aGUgY2hhaW4pXG4gICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgIC8va2VlcCB0aGlzIExPQURJTkcgdGlsZSBhbnkgbG9hZGVkIHRpbGVzIGxhdGVyIGluIHRoZSBjaGFpbiBhcmVcbiAgICAgICAgLy9vbGRlciB0aGFuIHRoaXMgdGlsZSwgc28gd2UncmUgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGUgcmVxdWVzdFxuICAgICAgICBwcmV2ID0gdGlsZTtcbiAgICAgIH0gZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgIC8vdGhlIGhlYWQgb2YgdGhlIGxpc3QgaXMgdGhlIG1vc3QgY3VycmVudCB0aWxlLCB3ZSBkb24ndCBuZWVkXG4gICAgICAgIC8vdG8gc3RhcnQgYW55IG90aGVyIHJlcXVlc3RzIGZvciB0aGlzIGNoYWluXG4gICAgICAgIHByZXYuaW50ZXJpbVRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICB9XG4gICAgICB0aWxlID0gcHJldi5pbnRlcmltVGlsZTtcbiAgICB9IHdoaWxlICh0aWxlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhpcyB0aWxlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRoZSB0aWxlIGNvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbGVDb29yZCgpIHtcbiAgICByZXR1cm4gdGhpcy50aWxlQ29vcmQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAqL1xuICBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGlzIHRpbGUuIElmIHlvdSB3cml0ZSB5b3VyIG93biB7QGxpbmsgbW9kdWxlOm9sL1RpbGV+TG9hZEZ1bmN0aW9uIHRpbGVMb2FkRnVuY3Rpb259ICxcbiAgICogaXQgaXMgaW1wb3J0YW50IHRvIHNldCB0aGUgc3RhdGUgY29ycmVjdGx5IHRvIHtAbGluayBtb2R1bGU6b2wvVGlsZVN0YXRlfkVSUk9SfVxuICAgKiB3aGVuIHRoZSB0aWxlIGNhbm5vdCBiZSBsb2FkZWQuIE90aGVyd2lzZSB0aGUgdGlsZSBjYW5ub3QgYmUgcmVtb3ZlZCBmcm9tXG4gICAqIHRoZSB0aWxlIHF1ZXVlIGFuZCB3aWxsIGJsb2NrIG90aGVyIHJlcXVlc3RzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgIGlmICh0aGlzLnN0YXRlICE9PSBUaWxlU3RhdGUuRVJST1IgJiYgdGhpcy5zdGF0ZSA+IHN0YXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbGUgbG9hZCBzZXF1ZW5jZSB2aW9sYXRpb24nKTtcbiAgICB9XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExvYWQgdGhlIGltYWdlIG9yIHJldHJ5IGlmIGxvYWRpbmcgcHJldmlvdXNseSBmYWlsZWQuXG4gICAqIExvYWRpbmcgaXMgdGFrZW4gY2FyZSBvZiBieSB0aGUgdGlsZSBxdWV1ZSwgYW5kIGNhbGxpbmcgdGhpcyBtZXRob2QgaXNcbiAgICogb25seSBuZWVkZWQgZm9yIHByZWxvYWRpbmcgb3IgZm9yIHJlbG9hZGluZyBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgKiBAYWJzdHJhY3RcbiAgICogQGFwaVxuICAgKi9cbiAgbG9hZCgpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYWxwaGEgdmFsdWUgZm9yIHJlbmRlcmluZy5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRoZSByZW5kZXIgZnJhbWUgdGltZS5cbiAgICogQHJldHVybiB7bnVtYmVyfSBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEuXG4gICAqL1xuICBnZXRBbHBoYShpZCwgdGltZSkge1xuICAgIGlmICghdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0ID0gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF07XG4gICAgaWYgKCFzdGFydCkge1xuICAgICAgc3RhcnQgPSB0aW1lO1xuICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSBzdGFydDtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuXG4gICAgY29uc3QgZGVsdGEgPSB0aW1lIC0gc3RhcnQgKyAxMDAwIC8gNjA7IC8vIGF2b2lkIHJlbmRlcmluZyBhdCAwXG4gICAgaWYgKGRlbHRhID49IHRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gZWFzZUluKGRlbHRhIC8gdGhpcy50cmFuc2l0aW9uXyk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lIGlmIGEgdGlsZSBpcyBpbiBhbiBhbHBoYSB0cmFuc2l0aW9uLiAgQSB0aWxlIGlzIGNvbnNpZGVyZWQgaW5cbiAgICogdHJhbnNpdGlvbiBpZiB0aWxlLmdldEFscGhhKCkgaGFzIG5vdCB5ZXQgYmVlbiBjYWxsZWQgb3IgaGFzIGJlZW4gY2FsbGVkXG4gICAqIGFuZCByZXR1cm5lZCAxLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgaXMgaW4gdHJhbnNpdGlvbi5cbiAgICovXG4gIGluVHJhbnNpdGlvbihpZCkge1xuICAgIGlmICghdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gIT09IC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmsgYSB0cmFuc2l0aW9uIGFzIGNvbXBsZXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICovXG4gIGVuZFRyYW5zaXRpb24oaWQpIHtcbiAgICBpZiAodGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSAtMTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlsZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9UaWxlU3RhdGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgSURMRTogMCxcbiAgTE9BRElORzogMSxcbiAgTE9BREVEOiAyLFxuICAvKipcbiAgICogSW5kaWNhdGVzIHRoYXQgdGlsZSBsb2FkaW5nIGZhaWxlZFxuICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgKi9cbiAgRVJST1I6IDMsXG4gIEVNUFRZOiA0LFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVRpbGVcbiAqL1xuaW1wb3J0IFRpbGUgZnJvbSAnLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkR9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7bGlzdGVuSW1hZ2V9IGZyb20gJy4vSW1hZ2UuanMnO1xuXG5jbGFzcyBJbWFnZVRpbGUgZXh0ZW5kcyBUaWxlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5PcHRpb25zfSBbb3B0aW9uc10gVGlsZSBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3IodGlsZUNvb3JkLCBzdGF0ZSwgc3JjLCBjcm9zc09yaWdpbiwgdGlsZUxvYWRGdW5jdGlvbiwgb3B0aW9ucykge1xuICAgIHN1cGVyKHRpbGVDb29yZCwgc3RhdGUsIG9wdGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLmNyb3NzT3JpZ2luXyA9IGNyb3NzT3JpZ2luO1xuXG4gICAgLyoqXG4gICAgICogSW1hZ2UgVVJJXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5zcmNfID0gc3JjO1xuXG4gICAgdGhpcy5rZXkgPSBzcmM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICovXG4gICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb25fID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIEhUTUwgaW1hZ2UgZWxlbWVudCBmb3IgdGhpcyB0aWxlIChtYXkgYmUgYSBDYW52YXMsIEltYWdlLCBvciBWaWRlbykuXG4gICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEltYWdlKCkge1xuICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFuIEhUTUwgaW1hZ2UgZWxlbWVudCBmb3IgdGhpcyB0aWxlIChtYXkgYmUgYSBDYW52YXMgb3IgcHJlbG9hZGVkIEltYWdlKS5cbiAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gICAqL1xuICBzZXRJbWFnZShlbGVtZW50KSB7XG4gICAgdGhpcy5pbWFnZV8gPSBlbGVtZW50O1xuICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUltYWdlRXJyb3JfKCkge1xuICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRVJST1I7XG4gICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgIHRoaXMuaW1hZ2VfID0gZ2V0QmxhbmtJbWFnZSgpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYWNrcyBzdWNjZXNzZnVsIGltYWdlIGxvYWQuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVJbWFnZUxvYWRfKCkge1xuICAgIGNvbnN0IGltYWdlID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAodGhpcy5pbWFnZV8pO1xuICAgIGlmIChpbWFnZS5uYXR1cmFsV2lkdGggJiYgaW1hZ2UubmF0dXJhbEhlaWdodCkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgfVxuICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgKiBMb2FkaW5nIGlzIHRha2VuIGNhcmUgb2YgYnkgdGhlIHRpbGUgcXVldWUsIGFuZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzXG4gICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICpcbiAgICogVG8gcmV0cnkgbG9hZGluZyB0aWxlcyBvbiBmYWlsZWQgcmVxdWVzdHMsIHVzZSBhIGN1c3RvbSBgdGlsZUxvYWRGdW5jdGlvbmBcbiAgICogdGhhdCBjaGVja3MgZm9yIGVycm9yIHN0YXR1cyBjb2RlcyBhbmQgcmVsb2FkcyBvbmx5IHdoZW4gdGhlIHN0YXR1cyBjb2RlIGlzXG4gICAqIDQwOCwgNDI5LCA1MDAsIDUwMiwgNTAzIGFuZCA1MDQsIGFuZCBvbmx5IHdoZW4gbm90IHRvbyBtYW55IHJldHJpZXMgaGF2ZSBiZWVuXG4gICAqIG1hZGUgYWxyZWFkeTpcbiAgICpcbiAgICogYGBganNcbiAgICogY29uc3QgcmV0cnlDb2RlcyA9IFs0MDgsIDQyOSwgNTAwLCA1MDIsIDUwMywgNTA0XTtcbiAgICogY29uc3QgcmV0cmllcyA9IHt9O1xuICAgKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbigodGlsZSwgc3JjKSA9PiB7XG4gICAqICAgY29uc3QgaW1hZ2UgPSB0aWxlLmdldEltYWdlKCk7XG4gICAqICAgZmV0Y2goc3JjKVxuICAgKiAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAqICAgICAgIGlmIChyZXRyeUNvZGVzLmluY2x1ZGVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICogICAgICAgICByZXRyaWVzW3NyY10gPSAocmV0cmllc1tzcmNdIHx8IDApICsgMTtcbiAgICogICAgICAgICBpZiAocmV0cmllc1tzcmNdIDw9IDMpIHtcbiAgICogICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGlsZS5sb2FkKCksIHJldHJpZXNbc3JjXSAqIDEwMDApO1xuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgICogICAgICAgfVxuICAgKiAgICAgICByZXR1cm4gcmVzcG9uc2UuYmxvYigpO1xuICAgKiAgICAgfSlcbiAgICogICAgIC50aGVuKChibG9iKSA9PiB7XG4gICAqICAgICAgIGNvbnN0IGltYWdlVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICogICAgICAgaW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XG4gICAqICAgICAgIHNldFRpbWVvdXQoKCkgPT4gVVJMLnJldm9rZU9iamVjdFVSTChpbWFnZVVybCksIDUwMDApO1xuICAgKiAgICAgfSlcbiAgICogICAgIC5jYXRjaCgoKSA9PiB0aWxlLnNldFN0YXRlKDMpKTsgLy8gZXJyb3JcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAYXBpXG4gICAqL1xuICBsb2FkKCkge1xuICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5JRExFO1xuICAgICAgdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luXyAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IHRoaXMuY3Jvc3NPcmlnaW5fO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb25fKHRoaXMsIHRoaXMuc3JjXyk7XG4gICAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkltYWdlKFxuICAgICAgICB0aGlzLmltYWdlXyxcbiAgICAgICAgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksXG4gICAgICAgIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5saXN0ZW5JbWFnZV8oKSB7XG4gICAgaWYgKHRoaXMudW5saXN0ZW5fKSB7XG4gICAgICB0aGlzLnVubGlzdGVuXygpO1xuICAgICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIDEtcGl4ZWwgYmxhbmsgaW1hZ2UuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQmxhbmsgaW1hZ2UuXG4gKi9cbmZ1bmN0aW9uIGdldEJsYW5rSW1hZ2UoKSB7XG4gIGNvbnN0IGN0eCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsMCwwLDApJztcbiAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICByZXR1cm4gY3R4LmNhbnZhcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VUaWxlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZUJhc2UgZnJvbSAnLi9JbWFnZUJhc2UuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCB7SU1BR0VfREVDT0RFfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQge2dldEhlaWdodH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHtsaXN0ZW5PbmNlLCB1bmxpc3RlbkJ5S2V5fSBmcm9tICcuL2V2ZW50cy5qcyc7XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvSW1hZ2V+SW1hZ2VXcmFwcGVyfSBmb3IgdGhlIGltYWdlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgc3JjIGFzIGFyZ3VtZW50cy4gSXQgaXMgc3VwcG9zZWQgdG8gbWFrZSBpdCBzbyB0aGVcbiAqIHVuZGVybHlpbmcgaW1hZ2Uge0BsaW5rIG1vZHVsZTpvbC9JbWFnZX5JbWFnZVdyYXBwZXIjZ2V0SW1hZ2V9IGlzIGFzc2lnbmVkIHRoZVxuICogY29udGVudCBzcGVjaWZpZWQgYnkgdGhlIHNyYy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgaXNcbiAqXG4gKiAgICAgZnVuY3Rpb24oaW1hZ2UsIHNyYykge1xuICogICAgICAgaW1hZ2UuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiAgICAgfVxuICpcbiAqIFByb3ZpZGluZyBhIGN1c3RvbSBgaW1hZ2VMb2FkRnVuY3Rpb25gIGNhbiBiZSB1c2VmdWwgdG8gbG9hZCBpbWFnZXMgd2l0aFxuICogcG9zdCByZXF1ZXN0cyBvciAtIGluIGdlbmVyYWwgLSB0aHJvdWdoIFhIUiByZXF1ZXN0cywgd2hlcmUgdGhlIHNyYyBvZiB0aGVcbiAqIGltYWdlIGVsZW1lbnQgd291bGQgYmUgc2V0IHRvIGEgZGF0YSBVUkkgd2hlbiB0aGUgY29udGVudCBpcyBsb2FkZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEltYWdlV3JhcHBlciwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cblxuY2xhc3MgSW1hZ2VXcmFwcGVyIGV4dGVuZHMgSW1hZ2VCYXNlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgSW1hZ2Ugc291cmNlIFVSSS5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAqIEBwYXJhbSB7TG9hZEZ1bmN0aW9ufSBpbWFnZUxvYWRGdW5jdGlvbiBJbWFnZSBsb2FkIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gW2NvbnRleHRdIENhbnZhcyBjb250ZXh0LiBXaGVuIHByb3ZpZGVkLCB0aGUgaW1hZ2Ugd2lsbCBiZVxuICAgKiAgICBkcmF3biBpbnRvIHRoZSBjb250ZXh0J3MgY2FudmFzLCBhbmQgYGdldEltYWdlKClgIHdpbGwgcmV0dXJuIHRoZSBjYW52YXMgb25jZSB0aGUgaW1hZ2VcbiAgICogICAgaGFzIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihcbiAgICBleHRlbnQsXG4gICAgcmVzb2x1dGlvbixcbiAgICBwaXhlbFJhdGlvLFxuICAgIHNyYyxcbiAgICBjcm9zc09yaWdpbixcbiAgICBpbWFnZUxvYWRGdW5jdGlvbixcbiAgICBjb250ZXh0XG4gICkge1xuICAgIHN1cGVyKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgSW1hZ2VTdGF0ZS5JRExFKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnNyY18gPSBzcmM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgIHRoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAqL1xuICAgIHRoaXMuY29udGV4dF8gPSBjb250ZXh0O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2Z1bmN0aW9uKCk6dm9pZH1cbiAgICAgKi9cbiAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLklETEU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtMb2FkRnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8gPSBpbWFnZUxvYWRGdW5jdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRJbWFnZSgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlID09IEltYWdlU3RhdGUuTE9BREVEICYmXG4gICAgICB0aGlzLmNvbnRleHRfICYmXG4gICAgICAhKHRoaXMuaW1hZ2VfIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpXG4gICAgKSB7XG4gICAgICBjb25zdCBjYW52YXMgPSB0aGlzLmNvbnRleHRfLmNhbnZhcztcbiAgICAgIGNhbnZhcy53aWR0aCA9IHRoaXMuaW1hZ2VfLndpZHRoO1xuICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMuaW1hZ2VfLmhlaWdodDtcbiAgICAgIHRoaXMuY29udGV4dF8uZHJhd0ltYWdlKHRoaXMuaW1hZ2VfLCAwLCAwKTtcbiAgICAgIHRoaXMuaW1hZ2VfID0gdGhpcy5jb250ZXh0Xy5jYW52YXM7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUltYWdlRXJyb3JfKCkge1xuICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkVSUk9SO1xuICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlSW1hZ2VMb2FkXygpIHtcbiAgICBpZiAodGhpcy5yZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMucmVzb2x1dGlvbiA9IGdldEhlaWdodCh0aGlzLmV4dGVudCkgLyB0aGlzLmltYWdlXy5oZWlnaHQ7XG4gICAgfVxuICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogTG9hZCB0aGUgaW1hZ2Ugb3IgcmV0cnkgaWYgbG9hZGluZyBwcmV2aW91c2x5IGZhaWxlZC5cbiAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAqIEBhcGlcbiAgICovXG4gIGxvYWQoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFIHx8IHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuTE9BRElORztcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8odGhpcywgdGhpcy5zcmNfKTtcbiAgICAgIHRoaXMudW5saXN0ZW5fID0gbGlzdGVuSW1hZ2UoXG4gICAgICAgIHRoaXMuaW1hZ2VfLFxuICAgICAgICB0aGlzLmhhbmRsZUltYWdlTG9hZF8uYmluZCh0aGlzKSxcbiAgICAgICAgdGhpcy5oYW5kbGVJbWFnZUVycm9yXy5iaW5kKHRoaXMpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gICAqL1xuICBzZXRJbWFnZShpbWFnZSkge1xuICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2U7XG4gICAgdGhpcy5yZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KHRoaXMuZXh0ZW50KSAvIHRoaXMuaW1hZ2VfLmhlaWdodDtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB1bmxpc3RlbkltYWdlXygpIHtcbiAgICBpZiAodGhpcy51bmxpc3Rlbl8pIHtcbiAgICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlIGVsZW1lbnQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6YW55fSBsb2FkSGFuZGxlciBMb2FkIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbigpOmFueX0gZXJyb3JIYW5kbGVyIEVycm9yIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICogQHJldHVybiB7ZnVuY3Rpb24oKTp2b2lkfSBDYWxsYmFjayB0byBzdG9wIGxpc3RlbmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbkltYWdlKGltYWdlLCBsb2FkSGFuZGxlciwgZXJyb3JIYW5kbGVyKSB7XG4gIGNvbnN0IGltZyA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKGltYWdlKTtcbiAgbGV0IGxpc3RlbmluZyA9IHRydWU7XG4gIGxldCBkZWNvZGluZyA9IGZhbHNlO1xuICBsZXQgbG9hZGVkID0gZmFsc2U7XG5cbiAgY29uc3QgbGlzdGVuZXJLZXlzID0gW1xuICAgIGxpc3Rlbk9uY2UoaW1nLCBFdmVudFR5cGUuTE9BRCwgZnVuY3Rpb24gKCkge1xuICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgIGlmICghZGVjb2RpbmcpIHtcbiAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgIH1cbiAgICB9KSxcbiAgXTtcblxuICBpZiAoaW1nLnNyYyAmJiBJTUFHRV9ERUNPREUpIHtcbiAgICBkZWNvZGluZyA9IHRydWU7XG4gICAgaW1nXG4gICAgICAuZGVjb2RlKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGxpc3RlbmluZykge1xuICAgICAgICAgIGxvYWRIYW5kbGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGlmIChsaXN0ZW5pbmcpIHtcbiAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlcnJvckhhbmRsZXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIGxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbk9uY2UoaW1nLCBFdmVudFR5cGUuRVJST1IsIGVycm9ySGFuZGxlcikpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHVubGlzdGVuKCkge1xuICAgIGxpc3RlbmluZyA9IGZhbHNlO1xuICAgIGxpc3RlbmVyS2V5cy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBJbWFnZVdyYXBwZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb25cbiAqL1xuaW1wb3J0IHtcbiAgYm91bmRpbmdFeHRlbnQsXG4gIGNyZWF0ZUVtcHR5LFxuICBleHRlbmRDb29yZGluYXRlLFxuICBnZXRBcmVhLFxuICBnZXRCb3R0b21MZWZ0LFxuICBnZXRCb3R0b21SaWdodCxcbiAgZ2V0VG9wTGVmdCxcbiAgZ2V0VG9wUmlnaHQsXG4gIGdldFdpZHRoLFxuICBpbnRlcnNlY3RzLFxufSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtnZXRUcmFuc2Zvcm19IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHttb2R1bG99IGZyb20gJy4uL21hdGguanMnO1xuXG4vKipcbiAqIFNpbmdsZSB0cmlhbmdsZTsgY29uc2lzdHMgb2YgMyBzb3VyY2UgcG9pbnRzIGFuZCAzIHRhcmdldCBwb2ludHMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmlhbmdsZVxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBzb3VyY2UgU291cmNlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSB0YXJnZXQgVGFyZ2V0LlxuICovXG5cbi8qKlxuICogTWF4aW11bSBudW1iZXIgb2Ygc3ViZGl2aXNpb24gc3RlcHMgZHVyaW5nIHJhc3RlciByZXByb2plY3Rpb24gdHJpYW5ndWxhdGlvbi5cbiAqIFByZXZlbnRzIGhpZ2ggbWVtb3J5IHVzYWdlIGFuZCBsYXJnZSBudW1iZXIgb2YgcHJvajQgY2FsbHMgKGZvciBjZXJ0YWluXG4gKiB0cmFuc2Zvcm1hdGlvbnMgYW5kIGFyZWFzKS4gQXQgbW9zdCBgMiooMl50aGlzKWAgdHJpYW5nbGVzIGFyZSBjcmVhdGVkIGZvclxuICogZWFjaCB0cmlhbmd1bGF0ZWQgZXh0ZW50ICh0aWxlL2ltYWdlKS5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmNvbnN0IE1BWF9TVUJESVZJU0lPTiA9IDEwO1xuXG4vKipcbiAqIE1heGltdW0gYWxsb3dlZCBzaXplIG9mIHRyaWFuZ2xlIHJlbGF0aXZlIHRvIHdvcmxkIHdpZHRoLiBXaGVuIHRyYW5zZm9ybWluZ1xuICogY29ybmVycyBvZiB3b3JsZCBleHRlbnQgYmV0d2VlbiBjZXJ0YWluIHByb2plY3Rpb25zLCB0aGUgcmVzdWx0aW5nXG4gKiB0cmlhbmd1bGF0aW9uIHNlZW1zIHRvIGhhdmUgemVybyBlcnJvciBhbmQgbm8gc3ViZGl2aXNpb24gaXMgcGVyZm9ybWVkLiBJZlxuICogdGhlIHRyaWFuZ2xlIHdpZHRoIGlzIG1vcmUgdGhhbiB0aGlzIChyZWxhdGl2ZSB0byB3b3JsZCB3aWR0aDsgMC0xKSxcbiAqIHN1YmRpdmlzb24gaXMgZm9yY2VkICh1cCB0byBgTUFYX1NVQkRJVklTSU9OYCkuIERlZmF1bHQgaXMgYDAuMjVgLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuY29uc3QgTUFYX1RSSUFOR0xFX1dJRFRIID0gMC4yNTtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBjb250YWluaW5nIHRyaWFuZ3VsYXRpb24gb2YgdGhlIGdpdmVuIHRhcmdldCBleHRlbnQuXG4gKiBVc2VkIGZvciBkZXRlcm1pbmluZyBzb3VyY2UgZGF0YSBhbmQgdGhlIHJlcHJvamVjdGlvbiBpdHNlbGYuXG4gKi9cbmNsYXNzIFRyaWFuZ3VsYXRpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudCB0byB0cmlhbmd1bGF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhTb3VyY2VFeHRlbnQgTWF4aW1hbCBzb3VyY2UgZXh0ZW50IHRoYXQgY2FuIGJlIHVzZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvclRocmVzaG9sZCBBY2NlcHRhYmxlIGVycm9yIChpbiBzb3VyY2UgdW5pdHMpLlxuICAgKiBAcGFyYW0gez9udW1iZXJ9IGRlc3RpbmF0aW9uUmVzb2x1dGlvbiBUaGUgKG9wdGlvbmFsKSByZXNvbHV0aW9uIG9mIHRoZSBkZXN0aW5hdGlvbi5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNvdXJjZVByb2osXG4gICAgdGFyZ2V0UHJvaixcbiAgICB0YXJnZXRFeHRlbnQsXG4gICAgbWF4U291cmNlRXh0ZW50LFxuICAgIGVycm9yVGhyZXNob2xkLFxuICAgIGRlc3RpbmF0aW9uUmVzb2x1dGlvblxuICApIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZVByb2pfID0gc291cmNlUHJvajtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0UHJval8gPSB0YXJnZXRQcm9qO1xuXG4gICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi9cbiAgICBsZXQgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgICBjb25zdCB0cmFuc2Zvcm1JbnYgPSBnZXRUcmFuc2Zvcm0odGhpcy50YXJnZXRQcm9qXywgdGhpcy5zb3VyY2VQcm9qXyk7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBBIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1JbnZfID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgIGNvbnN0IGtleSA9IGNbMF0gKyAnLycgKyBjWzFdO1xuICAgICAgaWYgKCF0cmFuc2Zvcm1JbnZDYWNoZVtrZXldKSB7XG4gICAgICAgIHRyYW5zZm9ybUludkNhY2hlW2tleV0gPSB0cmFuc2Zvcm1JbnYoYyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJhbnNmb3JtSW52Q2FjaGVba2V5XTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1heFNvdXJjZUV4dGVudF8gPSBtYXhTb3VyY2VFeHRlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfID0gZXJyb3JUaHJlc2hvbGQgKiBlcnJvclRocmVzaG9sZDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxUcmlhbmdsZT59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyaWFuZ2xlc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRoZSB0cmlhbmd1bGF0aW9uIGNyb3NzZXMgZWRnZSBvZiB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNhbldyYXBYSW5Tb3VyY2VfID1cbiAgICAgIHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgISFtYXhTb3VyY2VFeHRlbnQgJiZcbiAgICAgICEhdGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSAmJlxuICAgICAgZ2V0V2lkdGgobWF4U291cmNlRXh0ZW50KSA+PSBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA9IHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KClcbiAgICAgID8gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50YXJnZXRXb3JsZFdpZHRoXyA9IHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KClcbiAgICAgID8gZ2V0V2lkdGgodGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgIDogbnVsbDtcblxuICAgIGNvbnN0IGRlc3RpbmF0aW9uVG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICBjb25zdCBkZXN0aW5hdGlvblRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgICBjb25zdCBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgICBjb25zdCBkZXN0aW5hdGlvbkJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgY29uc3Qgc291cmNlVG9wTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcExlZnQpO1xuICAgIGNvbnN0IHNvdXJjZVRvcFJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wUmlnaHQpO1xuICAgIGNvbnN0IHNvdXJjZUJvdHRvbVJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tUmlnaHQpO1xuICAgIGNvbnN0IHNvdXJjZUJvdHRvbUxlZnQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Cb3R0b21MZWZ0KTtcblxuICAgIC8qXG4gICAgICogVGhlIG1heFN1YmRpdmlzaW9uIGNvbnRyb2xzIGhvdyBtYW55IHNwbGl0dGluZ3Mgb2YgdGhlIHRhcmdldCBhcmVhIGNhblxuICAgICAqIGJlIGRvbmUuIFRoZSBpZGVhIGhlcmUgaXMgdG8gZG8gYSBsaW5lYXIgbWFwcGluZyBvZiB0aGUgdGFyZ2V0IGFyZWFzXG4gICAgICogYnV0IHRoZSBhY3R1YWwgb3ZlcmFsbCByZXByb2plY3Rpb24gKGNhbiBiZSkgZXh0cmVtZWx5IG5vbi1saW5lYXIuIFRoZVxuICAgICAqIGRlZmF1bHQgdmFsdWUgb2YgTUFYX1NVQkRJVklTSU9OIHdhcyBjaG9zZW4gYmFzZWQgb24gbWFwcGluZyBhIDI1NngyNTZcbiAgICAgKiB0aWxlIHNpemUuIEhvd2V2ZXIgdGhpcyBmdW5jdGlvbiBpcyBhbHNvIGNhbGxlZCB0byByZW1hcCBjYW52YXMgcmVuZGVyZWRcbiAgICAgKiBsYXllcnMgd2hpY2ggY2FuIGJlIG11Y2ggbGFyZ2VyLiBUaGlzIGNhbGN1bGF0aW9uIGluY3JlYXNlcyB0aGUgbWF4U3ViZGl2aXNpb25cbiAgICAgKiB2YWx1ZSBieSB0aGUgcmlnaHQgZmFjdG9yIHNvIHRoYXQgZWFjaCAyNTZ4MjU2IHBpeGVsIGFyZWEgaGFzXG4gICAgICogTUFYX1NVQkRJVklTSU9OIGRpdmlzaW9ucy5cbiAgICAgKi9cbiAgICBjb25zdCBtYXhTdWJkaXZpc2lvbiA9XG4gICAgICBNQVhfU1VCRElWSVNJT04gK1xuICAgICAgKGRlc3RpbmF0aW9uUmVzb2x1dGlvblxuICAgICAgICA/IE1hdGgubWF4KFxuICAgICAgICAgICAgMCxcbiAgICAgICAgICAgIE1hdGguY2VpbChcbiAgICAgICAgICAgICAgTWF0aC5sb2cyKFxuICAgICAgICAgICAgICAgIGdldEFyZWEodGFyZ2V0RXh0ZW50KSAvXG4gICAgICAgICAgICAgICAgICAoZGVzdGluYXRpb25SZXNvbHV0aW9uICogZGVzdGluYXRpb25SZXNvbHV0aW9uICogMjU2ICogMjU2KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApXG4gICAgICAgICAgKVxuICAgICAgICA6IDApO1xuXG4gICAgdGhpcy5hZGRRdWFkXyhcbiAgICAgIGRlc3RpbmF0aW9uVG9wTGVmdCxcbiAgICAgIGRlc3RpbmF0aW9uVG9wUmlnaHQsXG4gICAgICBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0LFxuICAgICAgZGVzdGluYXRpb25Cb3R0b21MZWZ0LFxuICAgICAgc291cmNlVG9wTGVmdCxcbiAgICAgIHNvdXJjZVRvcFJpZ2h0LFxuICAgICAgc291cmNlQm90dG9tUmlnaHQsXG4gICAgICBzb3VyY2VCb3R0b21MZWZ0LFxuICAgICAgbWF4U3ViZGl2aXNpb25cbiAgICApO1xuXG4gICAgaWYgKHRoaXMud3JhcHNYSW5Tb3VyY2VfKSB7XG4gICAgICBsZXQgbGVmdEJvdW5kID0gSW5maW5pdHk7XG4gICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICBsZWZ0Qm91bmQgPSBNYXRoLm1pbihcbiAgICAgICAgICBsZWZ0Qm91bmQsXG4gICAgICAgICAgdHJpYW5nbGUuc291cmNlWzBdWzBdLFxuICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSxcbiAgICAgICAgICB0cmlhbmdsZS5zb3VyY2VbMl1bMF1cbiAgICAgICAgKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTaGlmdCB0cmlhbmdsZXMgdG8gYmUgYXMgY2xvc2UgdG8gYGxlZnRCb3VuZGAgYXMgcG9zc2libGVcbiAgICAgIC8vIChpZiB0aGUgZGlzdGFuY2UgaXMgbW9yZSB0aGFuIGB3b3JsZFdpZHRoIC8gMmAgaXQgY2FuIGJlIGNsb3Nlci5cbiAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKCh0cmlhbmdsZSkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgTWF0aC5tYXgoXG4gICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2VbMF1bMF0sXG4gICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2VbMV1bMF0sXG4gICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2VbMl1bMF1cbiAgICAgICAgICApIC1cbiAgICAgICAgICAgIGxlZnRCb3VuZCA+XG4gICAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDJcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgbmV3VHJpYW5nbGUgPSBbXG4gICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMF1bMV1dLFxuICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzFdXSxcbiAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMl1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsyXVsxXV0sXG4gICAgICAgICAgXTtcbiAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMF1bMF0gLSBsZWZ0Qm91bmQgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgbmV3VHJpYW5nbGVbMF1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzFdWzBdIC0gbGVmdEJvdW5kID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzFdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVsyXVswXSAtIGxlZnRCb3VuZCA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICBuZXdUcmlhbmdsZVsyXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJhcmVseSAoaWYgdGhlIGV4dGVudCBjb250YWlucyBib3RoIHRoZSBkYXRlbGluZSBhbmQgcHJpbWUgbWVyaWRpYW4pXG4gICAgICAgICAgLy8gdGhlIHNoaWZ0IGNhbiBpbiB0dXJuIGJyZWFrIHNvbWUgdHJpYW5nbGVzLlxuICAgICAgICAgIC8vIERldGVjdCB0aGlzIGhlcmUgYW5kIGRvbid0IHNoaWZ0IGluIHN1Y2ggY2FzZXMuXG4gICAgICAgICAgY29uc3QgbWluWCA9IE1hdGgubWluKFxuICAgICAgICAgICAgbmV3VHJpYW5nbGVbMF1bMF0sXG4gICAgICAgICAgICBuZXdUcmlhbmdsZVsxXVswXSxcbiAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzJdWzBdXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBtYXhYID0gTWF0aC5tYXgoXG4gICAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSxcbiAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzFdWzBdLFxuICAgICAgICAgICAgbmV3VHJpYW5nbGVbMl1bMF1cbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChtYXhYIC0gbWluWCA8IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2UgPSBuZXdUcmlhbmdsZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRyYW5zZm9ybUludkNhY2hlID0ge307XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0cmlhbmdsZSB0byB0aGUgdHJpYW5ndWxhdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGEgVGhlIHRhcmdldCBhIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiIFRoZSB0YXJnZXQgYiBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFTcmMgVGhlIHNvdXJjZSBhIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiU3JjIFRoZSBzb3VyY2UgYiBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZFRyaWFuZ2xlXyhhLCBiLCBjLCBhU3JjLCBiU3JjLCBjU3JjKSB7XG4gICAgdGhpcy50cmlhbmdsZXNfLnB1c2goe1xuICAgICAgc291cmNlOiBbYVNyYywgYlNyYywgY1NyY10sXG4gICAgICB0YXJnZXQ6IFthLCBiLCBjXSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHF1YWQgKHBvaW50cyBpbiBjbG9jay13aXNlIG9yZGVyKSB0byB0aGUgdHJpYW5ndWxhdGlvblxuICAgKiAoYW5kIHJlcHJvamVjdHMgdGhlIHZlcnRpY2VzKSBpZiB2YWxpZC5cbiAgICogUGVyZm9ybXMgcXVhZCBzdWJkaXZpc2lvbiBpZiBuZWVkZWQgdG8gaW5jcmVhc2UgcHJlY2lzaW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGIgVGhlIHRhcmdldCBiIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjIFRoZSB0YXJnZXQgYyBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZCBUaGUgdGFyZ2V0IGQgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFTcmMgVGhlIHNvdXJjZSBhIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiU3JjIFRoZSBzb3VyY2UgYiBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRTcmMgVGhlIHNvdXJjZSBkIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTdWJkaXZpc2lvbiBNYXhpbWFsIGFsbG93ZWQgc3ViZGl2aXNpb24gb2YgdGhlIHF1YWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhZGRRdWFkXyhhLCBiLCBjLCBkLCBhU3JjLCBiU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbikge1xuICAgIGNvbnN0IHNvdXJjZVF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYVNyYywgYlNyYywgY1NyYywgZFNyY10pO1xuICAgIGNvbnN0IHNvdXJjZUNvdmVyYWdlWCA9IHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgID8gZ2V0V2lkdGgoc291cmNlUXVhZEV4dGVudCkgLyB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfXG4gICAgICA6IG51bGw7XG4gICAgY29uc3Qgc291cmNlV29ybGRXaWR0aCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5zb3VyY2VXb3JsZFdpZHRoXyk7XG5cbiAgICAvLyB3aGVuIHRoZSBxdWFkIGlzIHdyYXBwZWQgaW4gdGhlIHNvdXJjZSBwcm9qZWN0aW9uXG4gICAgLy8gaXQgY292ZXJzIG1vc3Qgb2YgdGhlIHByb2plY3Rpb24gZXh0ZW50LCBidXQgbm90IGZ1bGx5XG4gICAgY29uc3Qgd3JhcHNYID1cbiAgICAgIHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgc291cmNlQ292ZXJhZ2VYID4gMC41ICYmXG4gICAgICBzb3VyY2VDb3ZlcmFnZVggPCAxO1xuXG4gICAgbGV0IG5lZWRzU3ViZGl2aXNpb24gPSBmYWxzZTtcblxuICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgIGlmICh0aGlzLnRhcmdldFByb2pfLmlzR2xvYmFsKCkgJiYgdGhpcy50YXJnZXRXb3JsZFdpZHRoXykge1xuICAgICAgICBjb25zdCB0YXJnZXRRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2EsIGIsIGMsIGRdKTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Q292ZXJhZ2VYID1cbiAgICAgICAgICBnZXRXaWR0aCh0YXJnZXRRdWFkRXh0ZW50KSAvIHRoaXMudGFyZ2V0V29ybGRXaWR0aF87XG4gICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPVxuICAgICAgICAgIHRhcmdldENvdmVyYWdlWCA+IE1BWF9UUklBTkdMRV9XSURUSCB8fCBuZWVkc1N1YmRpdmlzaW9uO1xuICAgICAgfVxuICAgICAgaWYgKCF3cmFwc1ggJiYgdGhpcy5zb3VyY2VQcm9qXy5pc0dsb2JhbCgpICYmIHNvdXJjZUNvdmVyYWdlWCkge1xuICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID1cbiAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHwgbmVlZHNTdWJkaXZpc2lvbjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24gJiYgdGhpcy5tYXhTb3VyY2VFeHRlbnRfKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMF0pICYmXG4gICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMV0pICYmXG4gICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMl0pICYmXG4gICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbM10pXG4gICAgICApIHtcbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHNvdXJjZVF1YWRFeHRlbnQsIHRoaXMubWF4U291cmNlRXh0ZW50XykpIHtcbiAgICAgICAgICAvLyB3aG9sZSBxdWFkIG91dHNpZGUgc291cmNlIHByb2plY3Rpb24gZXh0ZW50IC0+IGlnbm9yZVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBpc05vdEZpbml0ZSA9IDA7XG5cbiAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWlzRmluaXRlKGFTcmNbMF0pIHx8XG4gICAgICAgICFpc0Zpbml0ZShhU3JjWzFdKSB8fFxuICAgICAgICAhaXNGaW5pdGUoYlNyY1swXSkgfHxcbiAgICAgICAgIWlzRmluaXRlKGJTcmNbMV0pIHx8XG4gICAgICAgICFpc0Zpbml0ZShjU3JjWzBdKSB8fFxuICAgICAgICAhaXNGaW5pdGUoY1NyY1sxXSkgfHxcbiAgICAgICAgIWlzRmluaXRlKGRTcmNbMF0pIHx8XG4gICAgICAgICFpc0Zpbml0ZShkU3JjWzFdKVxuICAgICAgKSB7XG4gICAgICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJdCBtaWdodCBiZSB0aGUgY2FzZSB0aGF0IG9ubHkgMSBvZiB0aGUgcG9pbnRzIGlzIGluZmluaXRlLiBJbiB0aGlzIGNhc2VcbiAgICAgICAgICAvLyB3ZSBjYW4gZHJhdyBhIHNpbmdsZSB0cmlhbmdsZSB3aXRoIHRoZSBvdGhlciB0aHJlZSBwb2ludHNcbiAgICAgICAgICBpc05vdEZpbml0ZSA9XG4gICAgICAgICAgICAoIWlzRmluaXRlKGFTcmNbMF0pIHx8ICFpc0Zpbml0ZShhU3JjWzFdKSA/IDggOiAwKSArXG4gICAgICAgICAgICAoIWlzRmluaXRlKGJTcmNbMF0pIHx8ICFpc0Zpbml0ZShiU3JjWzFdKSA/IDQgOiAwKSArXG4gICAgICAgICAgICAoIWlzRmluaXRlKGNTcmNbMF0pIHx8ICFpc0Zpbml0ZShjU3JjWzFdKSA/IDIgOiAwKSArXG4gICAgICAgICAgICAoIWlzRmluaXRlKGRTcmNbMF0pIHx8ICFpc0Zpbml0ZShkU3JjWzFdKSA/IDEgOiAwKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc05vdEZpbml0ZSAhPSAxICYmXG4gICAgICAgICAgICBpc05vdEZpbml0ZSAhPSAyICYmXG4gICAgICAgICAgICBpc05vdEZpbml0ZSAhPSA0ICYmXG4gICAgICAgICAgICBpc05vdEZpbml0ZSAhPSA4XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uKSB7XG4gICAgICAgIGNvbnN0IGNlbnRlciA9IFsoYVswXSArIGNbMF0pIC8gMiwgKGFbMV0gKyBjWzFdKSAvIDJdO1xuICAgICAgICBjb25zdCBjZW50ZXJTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oY2VudGVyKTtcblxuICAgICAgICBsZXQgZHg7XG4gICAgICAgIGlmICh3cmFwc1gpIHtcbiAgICAgICAgICBjb25zdCBjZW50ZXJTcmNFc3RpbVggPVxuICAgICAgICAgICAgKG1vZHVsbyhhU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSArXG4gICAgICAgICAgICAgIG1vZHVsbyhjU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSkgL1xuICAgICAgICAgICAgMjtcbiAgICAgICAgICBkeCA9IGNlbnRlclNyY0VzdGltWCAtIG1vZHVsbyhjZW50ZXJTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGR4ID0gKGFTcmNbMF0gKyBjU3JjWzBdKSAvIDIgLSBjZW50ZXJTcmNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZHkgPSAoYVNyY1sxXSArIGNTcmNbMV0pIC8gMiAtIGNlbnRlclNyY1sxXTtcbiAgICAgICAgY29uc3QgY2VudGVyU3JjRXJyb3JTcXVhcmVkID0gZHggKiBkeCArIGR5ICogZHk7XG4gICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPiB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF87XG4gICAgICB9XG4gICAgICBpZiAobmVlZHNTdWJkaXZpc2lvbikge1xuICAgICAgICBpZiAoTWF0aC5hYnMoYVswXSAtIGNbMF0pIDw9IE1hdGguYWJzKGFbMV0gLSBjWzFdKSkge1xuICAgICAgICAgIC8vIHNwbGl0IGhvcml6b250YWxseSAodG9wICYgYm90dG9tKVxuICAgICAgICAgIGNvbnN0IGJjID0gWyhiWzBdICsgY1swXSkgLyAyLCAoYlsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgY29uc3QgYmNTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oYmMpO1xuICAgICAgICAgIGNvbnN0IGRhID0gWyhkWzBdICsgYVswXSkgLyAyLCAoZFsxXSArIGFbMV0pIC8gMl07XG4gICAgICAgICAgY29uc3QgZGFTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oZGEpO1xuXG4gICAgICAgICAgdGhpcy5hZGRRdWFkXyhcbiAgICAgICAgICAgIGEsXG4gICAgICAgICAgICBiLFxuICAgICAgICAgICAgYmMsXG4gICAgICAgICAgICBkYSxcbiAgICAgICAgICAgIGFTcmMsXG4gICAgICAgICAgICBiU3JjLFxuICAgICAgICAgICAgYmNTcmMsXG4gICAgICAgICAgICBkYVNyYyxcbiAgICAgICAgICAgIG1heFN1YmRpdmlzaW9uIC0gMVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5hZGRRdWFkXyhcbiAgICAgICAgICAgIGRhLFxuICAgICAgICAgICAgYmMsXG4gICAgICAgICAgICBjLFxuICAgICAgICAgICAgZCxcbiAgICAgICAgICAgIGRhU3JjLFxuICAgICAgICAgICAgYmNTcmMsXG4gICAgICAgICAgICBjU3JjLFxuICAgICAgICAgICAgZFNyYyxcbiAgICAgICAgICAgIG1heFN1YmRpdmlzaW9uIC0gMVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gc3BsaXQgdmVydGljYWxseSAobGVmdCAmIHJpZ2h0KVxuICAgICAgICAgIGNvbnN0IGFiID0gWyhhWzBdICsgYlswXSkgLyAyLCAoYVsxXSArIGJbMV0pIC8gMl07XG4gICAgICAgICAgY29uc3QgYWJTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oYWIpO1xuICAgICAgICAgIGNvbnN0IGNkID0gWyhjWzBdICsgZFswXSkgLyAyLCAoY1sxXSArIGRbMV0pIC8gMl07XG4gICAgICAgICAgY29uc3QgY2RTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oY2QpO1xuXG4gICAgICAgICAgdGhpcy5hZGRRdWFkXyhcbiAgICAgICAgICAgIGEsXG4gICAgICAgICAgICBhYixcbiAgICAgICAgICAgIGNkLFxuICAgICAgICAgICAgZCxcbiAgICAgICAgICAgIGFTcmMsXG4gICAgICAgICAgICBhYlNyYyxcbiAgICAgICAgICAgIGNkU3JjLFxuICAgICAgICAgICAgZFNyYyxcbiAgICAgICAgICAgIG1heFN1YmRpdmlzaW9uIC0gMVxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5hZGRRdWFkXyhcbiAgICAgICAgICAgIGFiLFxuICAgICAgICAgICAgYixcbiAgICAgICAgICAgIGMsXG4gICAgICAgICAgICBjZCxcbiAgICAgICAgICAgIGFiU3JjLFxuICAgICAgICAgICAgYlNyYyxcbiAgICAgICAgICAgIGNTcmMsXG4gICAgICAgICAgICBjZFNyYyxcbiAgICAgICAgICAgIG1heFN1YmRpdmlzaW9uIC0gMVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh3cmFwc1gpIHtcbiAgICAgIGlmICghdGhpcy5jYW5XcmFwWEluU291cmNlXykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gRXhhY3RseSB6ZXJvIG9yIG9uZSBvZiAqU3JjIGlzIG5vdCBmaW5pdGVcbiAgICAvLyBUaGUgdHJpYW5nbGVzIG11c3QgaGF2ZSB0aGUgZGlhZ29uYWwgbGluZSBhcyB0aGUgZmlyc3Qgc2lkZVxuICAgIC8vIFRoaXMgaXMgdG8gYWxsb3cgZWFzeSBjb2RlIGluIHJlcHJvai5zIHRvIG1ha2UgaXQgc3RyYWlnaHQgZm9yIGJyb2tlblxuICAgIC8vIGJyb3dzZXJzIHRoYXQgY2FuJ3QgaGFuZGxlIGRpYWdvbmFsIGNsaXBwaW5nXG4gICAgaWYgKChpc05vdEZpbml0ZSAmIDB4YikgPT0gMCkge1xuICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYSwgYywgZCwgYVNyYywgY1NyYywgZFNyYyk7XG4gICAgfVxuICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGUpID09IDApIHtcbiAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGIsIGFTcmMsIGNTcmMsIGJTcmMpO1xuICAgIH1cbiAgICBpZiAoaXNOb3RGaW5pdGUpIHtcbiAgICAgIC8vIFRyeSB0aGUgb3RoZXIgdHdvIHRyaWFuZ2xlc1xuICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4ZCkgPT0gMCkge1xuICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhiLCBkLCBhLCBiU3JjLCBkU3JjLCBhU3JjKTtcbiAgICAgIH1cbiAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweDcpID09IDApIHtcbiAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYywgYlNyYywgZFNyYywgY1NyYyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgZXh0ZW50IG9mIHRoZSBgc291cmNlYCBjb29yZGluYXRlcyBmcm9tIGFsbCB0aGUgdHJpYW5nbGVzLlxuICAgKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBDYWxjdWxhdGVkIGV4dGVudC5cbiAgICovXG4gIGNhbGN1bGF0ZVNvdXJjZUV4dGVudCgpIHtcbiAgICBjb25zdCBleHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuXG4gICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgIGNvbnN0IHNyYyA9IHRyaWFuZ2xlLnNvdXJjZTtcbiAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMF0pO1xuICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1sxXSk7XG4gICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzJdKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBleHRlbnQ7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8VHJpYW5nbGU+fSBBcnJheSBvZiB0aGUgY2FsY3VsYXRlZCB0cmlhbmdsZXMuXG4gICAqL1xuICBnZXRUcmlhbmdsZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJpYW5nbGVzXztcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmlhbmd1bGF0aW9uO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvalxuICovXG5pbXBvcnQge1xuICBjb250YWluc0Nvb3JkaW5hdGUsXG4gIGNyZWF0ZUVtcHR5LFxuICBleHRlbmQsXG4gIGZvckVhY2hDb3JuZXIsXG4gIGdldENlbnRlcixcbiAgZ2V0SGVpZ2h0LFxuICBnZXRUb3BMZWZ0LFxuICBnZXRXaWR0aCxcbn0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHtjcmVhdGVDYW52YXNDb250ZXh0MkQsIHJlbGVhc2VDYW52YXN9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7Z2V0UG9pbnRSZXNvbHV0aW9uLCB0cmFuc2Zvcm19IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQge3NvbHZlTGluZWFyU3lzdGVtfSBmcm9tICcuL21hdGguanMnO1xuXG5sZXQgYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xuXG4vKipcbiAqIEB0eXBlIHtBcnJheTxIVE1MQ2FudmFzRWxlbWVudD59XG4gKi9cbmV4cG9ydCBjb25zdCBjYW52YXNQb29sID0gW107XG5cbi8qKlxuICogVGhpcyBkcmF3cyBhIHNtYWxsIHRyaWFuZ2xlIGludG8gYSBjYW52YXMgYnkgc2V0dGluZyB0aGUgdHJpYW5nbGUgYXMgdGhlIGNsaXAgcmVnaW9uXG4gKiBhbmQgdGhlbiBkcmF3aW5nIGEgKHRvbyBsYXJnZSkgcmVjdGFuZ2xlXG4gKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGN0eCBUaGUgY29udGV4dCBpbiB3aGljaCB0byBkcmF3IHRoZSB0cmlhbmdsZVxuICogQHBhcmFtIHtudW1iZXJ9IHUxIFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIHNlY29uZCBwb2ludC4gVGhlIGZpcnN0IHBvaW50IGlzIDAsMC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2MSBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSBzZWNvbmQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdTIgVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgdGhpcmQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdjIgVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgdGhpcmQgcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGRyYXdUZXN0VHJpYW5nbGUoY3R4LCB1MSwgdjEsIHUyLCB2Mikge1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oMCwgMCk7XG4gIGN0eC5saW5lVG8odTEsIHYxKTtcbiAgY3R4LmxpbmVUbyh1MiwgdjIpO1xuICBjdHguY2xvc2VQYXRoKCk7XG4gIGN0eC5zYXZlKCk7XG4gIGN0eC5jbGlwKCk7XG4gIGN0eC5maWxsUmVjdCgwLCAwLCBNYXRoLm1heCh1MSwgdTIpICsgMSwgTWF0aC5tYXgodjEsIHYyKSk7XG4gIGN0eC5yZXN0b3JlKCk7XG59XG5cbi8qKlxuICogR2l2ZW4gdGhlIGRhdGEgZnJvbSBnZXRJbWFnZURhdGEsIHNlZSBpZiB0aGUgcmlnaHQgdmFsdWVzIGFwcGVhciBhdCB0aGUgcHJvdmlkZWQgb2Zmc2V0LlxuICogUmV0dXJucyB0cnVlIGlmIGVpdGhlciB0aGUgY29sb3Igb3IgdHJhbnNwYXJlbmN5IGlzIG9mZlxuICpcbiAqIEBwYXJhbSB7VWludDhDbGFtcGVkQXJyYXl9IGRhdGEgVGhlIGRhdGEgcmV0dXJuZWQgZnJvbSBnZXRJbWFnZURhdGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgVGhlIHBpeGVsIG9mZnNldCBmcm9tIHRoZSBzdGFydCBvZiBkYXRhLlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgZGlhZ29uYWwgcmVuZGVyaW5nIGlzIGJyb2tlblxuICovXG5mdW5jdGlvbiB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCBvZmZzZXQpIHtcbiAgLy8gdGhlIHZhbHVlcyBvdWdodCB0byBiZSBjbG9zZSB0byB0aGUgcmdiYSgyMTAsIDAsIDAsIDAuNzUpXG4gIHJldHVybiAoXG4gICAgTWF0aC5hYnMoZGF0YVtvZmZzZXQgKiA0XSAtIDIxMCkgPiAyIHx8XG4gICAgTWF0aC5hYnMoZGF0YVtvZmZzZXQgKiA0ICsgM10gLSAwLjc1ICogMjU1KSA+IDJcbiAgKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoZSBjdXJyZW50IGJyb3dzZXIgY29uZmlndXJhdGlvbiBjYW4gcmVuZGVyIHRyaWFuZ3VsYXIgY2xpcCByZWdpb25zIGNvcnJlY3RseS5cbiAqIFRoaXMgdmFsdWUgaXMgY2FjaGVkIHNvIHRoZSBmdW5jdGlvbiBpcyBvbmx5IGV4cGVuc2l2ZSB0aGUgZmlyc3QgdGltZSBjYWxsZWQuXG4gKiBGaXJlZm94IG9uIFdpbmRvd3MgKGFzIG9mIG5vdykgZG9lcyBub3QgaWYgSFdBIGlzIGVuYWJsZWQuIFNlZSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD0xNjA2OTc2XG4gKiBDaHJvbWUgd29ya3MsIGFuZCBldmVyeXRoaW5nIHNlZW1zIHRvIHdvcmsgb24gT1NYIGFuZCBBbmRyb2lkLiBUaGlzIGZ1bmN0aW9uIGNhY2hlcyB0aGVcbiAqIHJlc3VsdC4gSSBzdXBwb3NlIHRoYXQgaXQgaXMgY29uY2VpdmFibHkgcG9zc2libGUgdGhhdCBhIGJyb3dzZXIgbWlnaHQgZmxpcCBtb2RlcyB3aGlsZSB0aGUgYXBwIGlzXG4gKiBydW5uaW5nLCBidXQgbGV0cyBob3BlIG5vdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBEaWFnb25hbCBSZW5kZXJpbmcgaXMgYnJva2VuLlxuICovXG5mdW5jdGlvbiBpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKCkge1xuICBpZiAoYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfID09PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBjdHggPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoNiwgNiwgY2FudmFzUG9vbCk7XG4gICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdsaWdodGVyJztcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMjEwLCAwLCAwLCAwLjc1KSc7XG4gICAgZHJhd1Rlc3RUcmlhbmdsZShjdHgsIDQsIDUsIDQsIDApO1xuICAgIGRyYXdUZXN0VHJpYW5nbGUoY3R4LCA0LCA1LCAwLCA1KTtcbiAgICBjb25zdCBkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCAzLCAzKS5kYXRhO1xuICAgIGJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyA9XG4gICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCAwKSB8fFxuICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgNCkgfHxcbiAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDgpO1xuICAgIHJlbGVhc2VDYW52YXMoY3R4KTtcbiAgICBjYW52YXNQb29sLnB1c2goY3R4LmNhbnZhcyk7XG4gIH1cblxuICByZXR1cm4gYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgaWRlYWwgcmVzb2x1dGlvbiB0byB1c2UgZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGFjaGlldmVcbiAqIHBpeGVsIG1hcHBpbmcgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gMToxIGR1cmluZyByZXByb2plY3Rpb24uXG4gKiBUaGUgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCByZXNvbHV0aW9uc1xuICogYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBpbiB0aGUgZGF0YXNldCAoVGlsZUdyaWQsIEltYWdlLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiZXN0IHJlc29sdXRpb24gdG8gdXNlLiBDYW4gYmUgKy1JbmZpbml0eSwgTmFOIG9yIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKFxuICBzb3VyY2VQcm9qLFxuICB0YXJnZXRQcm9qLFxuICB0YXJnZXRDZW50ZXIsXG4gIHRhcmdldFJlc29sdXRpb25cbikge1xuICBjb25zdCBzb3VyY2VDZW50ZXIgPSB0cmFuc2Zvcm0odGFyZ2V0Q2VudGVyLCB0YXJnZXRQcm9qLCBzb3VyY2VQcm9qKTtcblxuICAvLyBjYWxjdWxhdGUgdGhlIGlkZWFsIHJlc29sdXRpb24gb2YgdGhlIHNvdXJjZSBkYXRhXG4gIGxldCBzb3VyY2VSZXNvbHV0aW9uID0gZ2V0UG9pbnRSZXNvbHV0aW9uKFxuICAgIHRhcmdldFByb2osXG4gICAgdGFyZ2V0UmVzb2x1dGlvbixcbiAgICB0YXJnZXRDZW50ZXJcbiAgKTtcblxuICBjb25zdCB0YXJnZXRNZXRlcnNQZXJVbml0ID0gdGFyZ2V0UHJvai5nZXRNZXRlcnNQZXJVbml0KCk7XG4gIGlmICh0YXJnZXRNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICBzb3VyY2VSZXNvbHV0aW9uICo9IHRhcmdldE1ldGVyc1BlclVuaXQ7XG4gIH1cbiAgY29uc3Qgc291cmNlTWV0ZXJzUGVyVW5pdCA9IHNvdXJjZVByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICBpZiAoc291cmNlTWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgc291cmNlUmVzb2x1dGlvbiAvPSBzb3VyY2VNZXRlcnNQZXJVbml0O1xuICB9XG5cbiAgLy8gQmFzZWQgb24gdGhlIHByb2plY3Rpb24gcHJvcGVydGllcywgdGhlIHBvaW50IHJlc29sdXRpb24gYXQgdGhlIHNwZWNpZmllZFxuICAvLyBjb29yZGluYXRlcyBtYXkgYmUgc2xpZ2h0bHkgZGlmZmVyZW50LiBXZSBuZWVkIHRvIHJldmVyc2UtY29tcGVuc2F0ZSB0aGlzXG4gIC8vIGluIG9yZGVyIHRvIGFjaGlldmUgb3B0aW1hbCByZXN1bHRzLlxuXG4gIGNvbnN0IHNvdXJjZUV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gIGlmICghc291cmNlRXh0ZW50IHx8IGNvbnRhaW5zQ29vcmRpbmF0ZShzb3VyY2VFeHRlbnQsIHNvdXJjZUNlbnRlcikpIHtcbiAgICBjb25zdCBjb21wZW5zYXRpb25GYWN0b3IgPVxuICAgICAgZ2V0UG9pbnRSZXNvbHV0aW9uKHNvdXJjZVByb2osIHNvdXJjZVJlc29sdXRpb24sIHNvdXJjZUNlbnRlcikgL1xuICAgICAgc291cmNlUmVzb2x1dGlvbjtcbiAgICBpZiAoaXNGaW5pdGUoY29tcGVuc2F0aW9uRmFjdG9yKSAmJiBjb21wZW5zYXRpb25GYWN0b3IgPiAwKSB7XG4gICAgICBzb3VyY2VSZXNvbHV0aW9uIC89IGNvbXBlbnNhdGlvbkZhY3RvcjtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbihcbiAgc291cmNlUHJvaixcbiAgdGFyZ2V0UHJvaixcbiAgdGFyZ2V0RXh0ZW50LFxuICB0YXJnZXRSZXNvbHV0aW9uXG4pIHtcbiAgY29uc3QgdGFyZ2V0Q2VudGVyID0gZ2V0Q2VudGVyKHRhcmdldEV4dGVudCk7XG4gIGxldCBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihcbiAgICBzb3VyY2VQcm9qLFxuICAgIHRhcmdldFByb2osXG4gICAgdGFyZ2V0Q2VudGVyLFxuICAgIHRhcmdldFJlc29sdXRpb25cbiAgKTtcblxuICBpZiAoIWlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pIHx8IHNvdXJjZVJlc29sdXRpb24gPD0gMCkge1xuICAgIGZvckVhY2hDb3JuZXIodGFyZ2V0RXh0ZW50LCBmdW5jdGlvbiAoY29ybmVyKSB7XG4gICAgICBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihcbiAgICAgICAgc291cmNlUHJvaixcbiAgICAgICAgdGFyZ2V0UHJvaixcbiAgICAgICAgY29ybmVyLFxuICAgICAgICB0YXJnZXRSZXNvbHV0aW9uXG4gICAgICApO1xuICAgICAgcmV0dXJuIGlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pICYmIHNvdXJjZVJlc29sdXRpb24gPiAwO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHNvdXJjZVJlc29sdXRpb247XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gSW1hZ2VFeHRlbnRcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHByb3BlcnR5IHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICovXG5cbi8qKlxuICogUmVuZGVycyB0aGUgc291cmNlIGRhdGEgaW50byBuZXcgY2FudmFzIGJhc2VkIG9uIHRoZSB0cmlhbmd1bGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCBIZWlnaHQgb2YgdGhlIGNhbnZhcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICogQHBhcmFtIHtudW1iZXJ9IHNvdXJjZVJlc29sdXRpb24gU291cmNlIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gc291cmNlRXh0ZW50IEV4dGVudCBvZiB0aGUgZGF0YSBzb3VyY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSB0YXJnZXRFeHRlbnQgVGFyZ2V0IGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9yZXByb2ovVHJpYW5ndWxhdGlvbi5qc1wiKS5kZWZhdWx0fSB0cmlhbmd1bGF0aW9uIENhbGN1bGF0ZWQgdHJpYW5ndWxhdGlvbi5cbiAqIEBwYXJhbSB7QXJyYXk8SW1hZ2VFeHRlbnQ+fSBzb3VyY2VzIEFycmF5IG9mIHNvdXJjZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIEd1dHRlciBvZiB0aGUgc291cmNlcy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlbmRlckVkZ2VzXSBSZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzLlxuICogQHBhcmFtIHtib29sZWFufSBbaW50ZXJwb2xhdGVdIFVzZSBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aGVuIHJlc2FtcGxpbmcuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzIHdpdGggcmVwcm9qZWN0ZWQgZGF0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihcbiAgd2lkdGgsXG4gIGhlaWdodCxcbiAgcGl4ZWxSYXRpbyxcbiAgc291cmNlUmVzb2x1dGlvbixcbiAgc291cmNlRXh0ZW50LFxuICB0YXJnZXRSZXNvbHV0aW9uLFxuICB0YXJnZXRFeHRlbnQsXG4gIHRyaWFuZ3VsYXRpb24sXG4gIHNvdXJjZXMsXG4gIGd1dHRlcixcbiAgcmVuZGVyRWRnZXMsXG4gIGludGVycG9sYXRlXG4pIHtcbiAgY29uc3QgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChcbiAgICBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiB3aWR0aCksXG4gICAgTWF0aC5yb3VuZChwaXhlbFJhdGlvICogaGVpZ2h0KSxcbiAgICBjYW52YXNQb29sXG4gICk7XG5cbiAgaWYgKCFpbnRlcnBvbGF0ZSkge1xuICAgIGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gZmFsc2U7XG4gIH1cblxuICBpZiAoc291cmNlcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG4gIH1cblxuICBjb250ZXh0LnNjYWxlKHBpeGVsUmF0aW8sIHBpeGVsUmF0aW8pO1xuXG4gIGZ1bmN0aW9uIHBpeGVsUm91bmQodmFsdWUpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHBpeGVsUmF0aW8pIC8gcGl4ZWxSYXRpbztcbiAgfVxuXG4gIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2xpZ2h0ZXInO1xuXG4gIGNvbnN0IHNvdXJjZURhdGFFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24gKHNyYywgaSwgYXJyKSB7XG4gICAgZXh0ZW5kKHNvdXJjZURhdGFFeHRlbnQsIHNyYy5leHRlbnQpO1xuICB9KTtcblxuICBjb25zdCBjYW52YXNXaWR0aEluVW5pdHMgPSBnZXRXaWR0aChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgY29uc3QgY2FudmFzSGVpZ2h0SW5Vbml0cyA9IGdldEhlaWdodChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgY29uc3Qgc3RpdGNoQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChcbiAgICBNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzV2lkdGhJblVuaXRzKSAvIHNvdXJjZVJlc29sdXRpb24pLFxuICAgIE1hdGgucm91bmQoKHBpeGVsUmF0aW8gKiBjYW52YXNIZWlnaHRJblVuaXRzKSAvIHNvdXJjZVJlc29sdXRpb24pLFxuICAgIGNhbnZhc1Bvb2xcbiAgKTtcblxuICBpZiAoIWludGVycG9sYXRlKSB7XG4gICAgc3RpdGNoQ29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbnN0IHN0aXRjaFNjYWxlID0gcGl4ZWxSYXRpbyAvIHNvdXJjZVJlc29sdXRpb247XG5cbiAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzcmMsIGksIGFycikge1xuICAgIGNvbnN0IHhQb3MgPSBzcmMuZXh0ZW50WzBdIC0gc291cmNlRGF0YUV4dGVudFswXTtcbiAgICBjb25zdCB5UG9zID0gLShzcmMuZXh0ZW50WzNdIC0gc291cmNlRGF0YUV4dGVudFszXSk7XG4gICAgY29uc3Qgc3JjV2lkdGggPSBnZXRXaWR0aChzcmMuZXh0ZW50KTtcbiAgICBjb25zdCBzcmNIZWlnaHQgPSBnZXRIZWlnaHQoc3JjLmV4dGVudCk7XG5cbiAgICAvLyBUaGlzIHRlc3Qgc2hvdWxkIG5ldmVyIGZhaWwgLS0gYnV0IGl0IGRvZXMuIE5lZWQgdG8gZmluZCBhIGZpeCB0aGUgdXBzdHJlYW0gY29uZGl0aW9uXG4gICAgaWYgKHNyYy5pbWFnZS53aWR0aCA+IDAgJiYgc3JjLmltYWdlLmhlaWdodCA+IDApIHtcbiAgICAgIHN0aXRjaENvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICBzcmMuaW1hZ2UsXG4gICAgICAgIGd1dHRlcixcbiAgICAgICAgZ3V0dGVyLFxuICAgICAgICBzcmMuaW1hZ2Uud2lkdGggLSAyICogZ3V0dGVyLFxuICAgICAgICBzcmMuaW1hZ2UuaGVpZ2h0IC0gMiAqIGd1dHRlcixcbiAgICAgICAgeFBvcyAqIHN0aXRjaFNjYWxlLFxuICAgICAgICB5UG9zICogc3RpdGNoU2NhbGUsXG4gICAgICAgIHNyY1dpZHRoICogc3RpdGNoU2NhbGUsXG4gICAgICAgIHNyY0hlaWdodCAqIHN0aXRjaFNjYWxlXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3QgdGFyZ2V0VG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcblxuICB0cmlhbmd1bGF0aW9uLmdldFRyaWFuZ2xlcygpLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAvKiBDYWxjdWxhdGUgYWZmaW5lIHRyYW5zZm9ybSAoc3JjIC0+IGRzdClcbiAgICAgKiBSZXN1bHRpbmcgbWF0cml4IGNhbiBiZSB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZGluYXRlXG4gICAgICogZnJvbSBgc291cmNlUHJvamVjdGlvbmAgdG8gZGVzdGluYXRpb24gcGl4ZWxzLlxuICAgICAqXG4gICAgICogVG8gb3B0aW1pemUgbnVtYmVyIG9mIGNvbnRleHQgY2FsbHMgYW5kIGluY3JlYXNlIG51bWVyaWNhbCBzdGFiaWxpdHksXG4gICAgICogd2UgYWxzbyBkbyB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6XG4gICAgICogdHJhbnMoLXRvcExlZnRFeHRlbnRDb3JuZXIpLCBzY2FsZSgxIC8gdGFyZ2V0UmVzb2x1dGlvbiksIHNjYWxlKDEsIC0xKVxuICAgICAqIGhlcmUgYmVmb3JlIHNvbHZpbmcgdGhlIGxpbmVhciBzeXN0ZW0gc28gW3VpLCB2aV0gYXJlIHBpeGVsIGNvb3JkaW5hdGVzLlxuICAgICAqXG4gICAgICogU3JjIHBvaW50czogeGksIHlpXG4gICAgICogRHN0IHBvaW50czogdWksIHZpXG4gICAgICogQWZmaW5lIGNvZWZmaWNpZW50czogYWlqXG4gICAgICpcbiAgICAgKiB8IHgwIHkwIDEgIDAgIDAgMCB8ICAgfGEwMHwgICB8dTB8XG4gICAgICogfCB4MSB5MSAxICAwICAwIDAgfCAgIHxhMDF8ICAgfHUxfFxuICAgICAqIHwgeDIgeTIgMSAgMCAgMCAwIHwgeCB8YTAyfCA9IHx1MnxcbiAgICAgKiB8ICAwICAwIDAgeDAgeTAgMSB8ICAgfGExMHwgICB8djB8XG4gICAgICogfCAgMCAgMCAwIHgxIHkxIDEgfCAgIHxhMTF8ICAgfHYxfFxuICAgICAqIHwgIDAgIDAgMCB4MiB5MiAxIHwgICB8YTEyfCAgIHx2MnxcbiAgICAgKi9cbiAgICBjb25zdCBzb3VyY2UgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgY29uc3QgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgIGxldCB4MCA9IHNvdXJjZVswXVswXSxcbiAgICAgIHkwID0gc291cmNlWzBdWzFdO1xuICAgIGxldCB4MSA9IHNvdXJjZVsxXVswXSxcbiAgICAgIHkxID0gc291cmNlWzFdWzFdO1xuICAgIGxldCB4MiA9IHNvdXJjZVsyXVswXSxcbiAgICAgIHkyID0gc291cmNlWzJdWzFdO1xuICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgaXMgb24gcGl4ZWwgYm91bmRhcmllc1xuICAgIGNvbnN0IHUwID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzBdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICBjb25zdCB2MCA9IHBpeGVsUm91bmQoXG4gICAgICAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvblxuICAgICk7XG4gICAgY29uc3QgdTEgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgIGNvbnN0IHYxID0gcGl4ZWxSb3VuZChcbiAgICAgIC0odGFyZ2V0WzFdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uXG4gICAgKTtcbiAgICBjb25zdCB1MiA9IHBpeGVsUm91bmQoKHRhcmdldFsyXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgY29uc3QgdjIgPSBwaXhlbFJvdW5kKFxuICAgICAgLSh0YXJnZXRbMl1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb25cbiAgICApO1xuXG4gICAgLy8gU2hpZnQgYWxsIHRoZSBzb3VyY2UgcG9pbnRzIHRvIGltcHJvdmUgbnVtZXJpY2FsIHN0YWJpbGl0eVxuICAgIC8vIG9mIGFsbCB0aGUgc3Vic2VxdWVudCBjYWxjdWxhdGlvbnMuIFRoZSBbeDAsIHkwXSBpcyB1c2VkIGhlcmUuXG4gICAgLy8gVGhpcyBpcyBhbHNvIHVzZWQgdG8gc2ltcGxpZnkgdGhlIGxpbmVhciBzeXN0ZW0uXG4gICAgY29uc3Qgc291cmNlTnVtZXJpY2FsU2hpZnRYID0geDA7XG4gICAgY29uc3Qgc291cmNlTnVtZXJpY2FsU2hpZnRZID0geTA7XG4gICAgeDAgPSAwO1xuICAgIHkwID0gMDtcbiAgICB4MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFg7XG4gICAgeTEgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRZO1xuICAgIHgyIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WDtcbiAgICB5MiAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG5cbiAgICBjb25zdCBhdWdtZW50ZWRNYXRyaXggPSBbXG4gICAgICBbeDEsIHkxLCAwLCAwLCB1MSAtIHUwXSxcbiAgICAgIFt4MiwgeTIsIDAsIDAsIHUyIC0gdTBdLFxuICAgICAgWzAsIDAsIHgxLCB5MSwgdjEgLSB2MF0sXG4gICAgICBbMCwgMCwgeDIsIHkyLCB2MiAtIHYwXSxcbiAgICBdO1xuICAgIGNvbnN0IGFmZmluZUNvZWZzID0gc29sdmVMaW5lYXJTeXN0ZW0oYXVnbWVudGVkTWF0cml4KTtcbiAgICBpZiAoIWFmZmluZUNvZWZzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29udGV4dC5zYXZlKCk7XG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcblxuICAgIGlmIChpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKCkgfHwgIWludGVycG9sYXRlKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgdGhhdCBhbGwgbGluZXMgYXJlIGhvcml6b250YWwgb3IgdmVydGljYWxcbiAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICAvLyBUaGlzIGlzIHRoZSBkaWFnb25hbCBsaW5lLiBEbyBpdCBpbiA0IHN0ZXBzXG4gICAgICBjb25zdCBzdGVwcyA9IDQ7XG4gICAgICBjb25zdCB1ZCA9IHUwIC0gdTE7XG4gICAgICBjb25zdCB2ZCA9IHYwIC0gdjE7XG4gICAgICBmb3IgKGxldCBzdGVwID0gMDsgc3RlcCA8IHN0ZXBzOyBzdGVwKyspIHtcbiAgICAgICAgLy8gR28gaG9yaXpvbnRhbGx5XG4gICAgICAgIGNvbnRleHQubGluZVRvKFxuICAgICAgICAgIHUxICsgcGl4ZWxSb3VuZCgoKHN0ZXAgKyAxKSAqIHVkKSAvIHN0ZXBzKSxcbiAgICAgICAgICB2MSArIHBpeGVsUm91bmQoKHN0ZXAgKiB2ZCkgLyAoc3RlcHMgLSAxKSlcbiAgICAgICAgKTtcbiAgICAgICAgLy8gR28gdmVydGljYWxseVxuICAgICAgICBpZiAoc3RlcCAhPSBzdGVwcyAtIDEpIHtcbiAgICAgICAgICBjb250ZXh0LmxpbmVUbyhcbiAgICAgICAgICAgIHUxICsgcGl4ZWxSb3VuZCgoKHN0ZXAgKyAxKSAqIHVkKSAvIHN0ZXBzKSxcbiAgICAgICAgICAgIHYxICsgcGl4ZWxSb3VuZCgoKHN0ZXAgKyAxKSAqIHZkKSAvIChzdGVwcyAtIDEpKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFdlIGFyZSBhbG1vc3QgYXQgdTByLCB2MHJcbiAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICBjb250ZXh0LmxpbmVUbyh1MCwgdjApO1xuICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICB9XG5cbiAgICBjb250ZXh0LmNsaXAoKTtcblxuICAgIGNvbnRleHQudHJhbnNmb3JtKFxuICAgICAgYWZmaW5lQ29lZnNbMF0sXG4gICAgICBhZmZpbmVDb2Vmc1syXSxcbiAgICAgIGFmZmluZUNvZWZzWzFdLFxuICAgICAgYWZmaW5lQ29lZnNbM10sXG4gICAgICB1MCxcbiAgICAgIHYwXG4gICAgKTtcblxuICAgIGNvbnRleHQudHJhbnNsYXRlKFxuICAgICAgc291cmNlRGF0YUV4dGVudFswXSAtIHNvdXJjZU51bWVyaWNhbFNoaWZ0WCxcbiAgICAgIHNvdXJjZURhdGFFeHRlbnRbM10gLSBzb3VyY2VOdW1lcmljYWxTaGlmdFlcbiAgICApO1xuXG4gICAgY29udGV4dC5zY2FsZShcbiAgICAgIHNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvLFxuICAgICAgLXNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvXG4gICAgKTtcblxuICAgIGNvbnRleHQuZHJhd0ltYWdlKHN0aXRjaENvbnRleHQuY2FudmFzLCAwLCAwKTtcbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgfSk7XG5cbiAgcmVsZWFzZUNhbnZhcyhzdGl0Y2hDb250ZXh0KTtcbiAgY2FudmFzUG9vbC5wdXNoKHN0aXRjaENvbnRleHQuY2FudmFzKTtcblxuICBpZiAocmVuZGVyRWRnZXMpIHtcbiAgICBjb250ZXh0LnNhdmUoKTtcblxuICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDE7XG5cbiAgICB0cmlhbmd1bGF0aW9uLmdldFRyaWFuZ2xlcygpLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgIGNvbnN0IHUwID0gKHRhcmdldFswXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgIGNvbnN0IHYwID0gLSh0YXJnZXRbMF1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICBjb25zdCB1MSA9ICh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICBjb25zdCB2MSA9IC0odGFyZ2V0WzFdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgY29uc3QgdTIgPSAodGFyZ2V0WzJdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgY29uc3QgdjIgPSAtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcblxuICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICBjb250ZXh0LmxpbmVUbyh1MCwgdjApO1xuICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgIH0pO1xuXG4gICAgY29udGV4dC5yZXN0b3JlKCk7XG4gIH1cbiAgcmV0dXJuIGNvbnRleHQuY2FudmFzO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9UaWxlXG4gKi9cbmltcG9ydCB7RVJST1JfVEhSRVNIT0xEfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZSBmcm9tICcuLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBUcmlhbmd1bGF0aW9uIGZyb20gJy4vVHJpYW5ndWxhdGlvbi5qcyc7XG5pbXBvcnQge1xuICBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uLFxuICBjYW52YXNQb29sLFxuICByZW5kZXIgYXMgcmVuZGVyUmVwcm9qZWN0ZWQsXG59IGZyb20gJy4uL3JlcHJvai5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7Z2V0QXJlYSwgZ2V0SW50ZXJzZWN0aW9ufSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQge3JlbGVhc2VDYW52YXN9IGZyb20gJy4uL2RvbS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcikgOiAoaW1wb3J0KFwiLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHQpfSBGdW5jdGlvblR5cGVcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENsYXNzIGVuY2Fwc3VsYXRpbmcgc2luZ2xlIHJlcHJvamVjdGVkIHRpbGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZUltYWdlflRpbGVJbWFnZX0uXG4gKlxuICovXG5jbGFzcyBSZXByb2pUaWxlIGV4dGVuZHMgVGlsZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVRpbGVHcmlkIFNvdXJjZSB0aWxlIGdyaWQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGFyZ2V0VGlsZUdyaWQgVGFyZ2V0IHRpbGUgZ3JpZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB3cmFwcGVkVGlsZUNvb3JkIENvb3JkaW5hdGUgb2YgdGhlIHRpbGUgd3JhcHBlZCBpbiBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZSB0aWxlcy5cbiAgICogQHBhcmFtIHtGdW5jdGlvblR5cGV9IGdldFRpbGVGdW5jdGlvblxuICAgKiAgICAgRnVuY3Rpb24gcmV0dXJuaW5nIHNvdXJjZSB0aWxlcyAoeiwgeCwgeSwgcGl4ZWxSYXRpbykuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZXJyb3JUaHJlc2hvbGRdIEFjY2VwdGFibGUgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBweCkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlbmRlckVkZ2VzXSBSZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZV0gVXNlIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdoZW4gcmVzYW1wbGluZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHNvdXJjZVByb2osXG4gICAgc291cmNlVGlsZUdyaWQsXG4gICAgdGFyZ2V0UHJvaixcbiAgICB0YXJnZXRUaWxlR3JpZCxcbiAgICB0aWxlQ29vcmQsXG4gICAgd3JhcHBlZFRpbGVDb29yZCxcbiAgICBwaXhlbFJhdGlvLFxuICAgIGd1dHRlcixcbiAgICBnZXRUaWxlRnVuY3Rpb24sXG4gICAgZXJyb3JUaHJlc2hvbGQsXG4gICAgcmVuZGVyRWRnZXMsXG4gICAgaW50ZXJwb2xhdGVcbiAgKSB7XG4gICAgc3VwZXIodGlsZUNvb3JkLCBUaWxlU3RhdGUuSURMRSwge2ludGVycG9sYXRlOiAhIWludGVycG9sYXRlfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyRWRnZXNfID0gcmVuZGVyRWRnZXMgIT09IHVuZGVmaW5lZCA/IHJlbmRlckVkZ2VzIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9IHBpeGVsUmF0aW87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5ndXR0ZXJfID0gZ3V0dGVyO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5jYW52YXNfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5zb3VyY2VUaWxlR3JpZF8gPSBzb3VyY2VUaWxlR3JpZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXRUaWxlR3JpZF8gPSB0YXJnZXRUaWxlR3JpZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gICAgICovXG4gICAgdGhpcy53cmFwcGVkVGlsZUNvb3JkXyA9IHdyYXBwZWRUaWxlQ29vcmQgPyB3cmFwcGVkVGlsZUNvb3JkIDogdGlsZUNvb3JkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLnNvdXJjZVRpbGVzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlWl8gPSAwO1xuXG4gICAgY29uc3QgdGFyZ2V0RXh0ZW50ID0gdGFyZ2V0VGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KFxuICAgICAgdGhpcy53cmFwcGVkVGlsZUNvb3JkX1xuICAgICk7XG4gICAgY29uc3QgbWF4VGFyZ2V0RXh0ZW50ID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0RXh0ZW50KCk7XG4gICAgbGV0IG1heFNvdXJjZUV4dGVudCA9IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpO1xuXG4gICAgY29uc3QgbGltaXRlZFRhcmdldEV4dGVudCA9IG1heFRhcmdldEV4dGVudFxuICAgICAgPyBnZXRJbnRlcnNlY3Rpb24odGFyZ2V0RXh0ZW50LCBtYXhUYXJnZXRFeHRlbnQpXG4gICAgICA6IHRhcmdldEV4dGVudDtcblxuICAgIGlmIChnZXRBcmVhKGxpbWl0ZWRUYXJnZXRFeHRlbnQpID09PSAwKSB7XG4gICAgICAvLyBUaWxlIGlzIGNvbXBsZXRlbHkgb3V0c2lkZSByYW5nZSAtPiBFTVBUWVxuICAgICAgLy8gVE9ETzogaXMgaXQgYWN0dWFsbHkgY29ycmVjdCB0aGF0IHRoZSBzb3VyY2UgZXZlbiBjcmVhdGVzIHRoZSB0aWxlID9cbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc291cmNlUHJvakV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gICAgaWYgKHNvdXJjZVByb2pFeHRlbnQpIHtcbiAgICAgIGlmICghbWF4U291cmNlRXh0ZW50KSB7XG4gICAgICAgIG1heFNvdXJjZUV4dGVudCA9IHNvdXJjZVByb2pFeHRlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXhTb3VyY2VFeHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24obWF4U291cmNlRXh0ZW50LCBzb3VyY2VQcm9qRXh0ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRSZXNvbHV0aW9uID0gdGFyZ2V0VGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihcbiAgICAgIHRoaXMud3JhcHBlZFRpbGVDb29yZF9bMF1cbiAgICApO1xuXG4gICAgY29uc3Qgc291cmNlUmVzb2x1dGlvbiA9IGNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24oXG4gICAgICBzb3VyY2VQcm9qLFxuICAgICAgdGFyZ2V0UHJvaixcbiAgICAgIGxpbWl0ZWRUYXJnZXRFeHRlbnQsXG4gICAgICB0YXJnZXRSZXNvbHV0aW9uXG4gICAgKTtcblxuICAgIGlmICghaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgfHwgc291cmNlUmVzb2x1dGlvbiA8PSAwKSB7XG4gICAgICAvLyBpbnZhbGlkIHNvdXJjZVJlc29sdXRpb24gLT4gRU1QVFlcbiAgICAgIC8vIHByb2JhYmx5IGVkZ2VzIG9mIHRoZSBwcm9qZWN0aW9ucyB3aGVuIG5vIGV4dGVudCBpcyBkZWZpbmVkXG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yVGhyZXNob2xkSW5QaXhlbHMgPVxuICAgICAgZXJyb3JUaHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IGVycm9yVGhyZXNob2xkIDogRVJST1JfVEhSRVNIT0xEO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IWltcG9ydChcIi4vVHJpYW5ndWxhdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMudHJpYW5ndWxhdGlvbl8gPSBuZXcgVHJpYW5ndWxhdGlvbihcbiAgICAgIHNvdXJjZVByb2osXG4gICAgICB0YXJnZXRQcm9qLFxuICAgICAgbGltaXRlZFRhcmdldEV4dGVudCxcbiAgICAgIG1heFNvdXJjZUV4dGVudCxcbiAgICAgIHNvdXJjZVJlc29sdXRpb24gKiBlcnJvclRocmVzaG9sZEluUGl4ZWxzLFxuICAgICAgdGFyZ2V0UmVzb2x1dGlvblxuICAgICk7XG5cbiAgICBpZiAodGhpcy50cmlhbmd1bGF0aW9uXy5nZXRUcmlhbmdsZXMoKS5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIG5vIHZhbGlkIHRyaWFuZ2xlcyAtPiBFTVBUWVxuICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnNvdXJjZVpfID0gc291cmNlVGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24oc291cmNlUmVzb2x1dGlvbik7XG4gICAgbGV0IHNvdXJjZUV4dGVudCA9IHRoaXMudHJpYW5ndWxhdGlvbl8uY2FsY3VsYXRlU291cmNlRXh0ZW50KCk7XG5cbiAgICBpZiAobWF4U291cmNlRXh0ZW50KSB7XG4gICAgICBpZiAoc291cmNlUHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgIHNvdXJjZUV4dGVudFsxXSA9IGNsYW1wKFxuICAgICAgICAgIHNvdXJjZUV4dGVudFsxXSxcbiAgICAgICAgICBtYXhTb3VyY2VFeHRlbnRbMV0sXG4gICAgICAgICAgbWF4U291cmNlRXh0ZW50WzNdXG4gICAgICAgICk7XG4gICAgICAgIHNvdXJjZUV4dGVudFszXSA9IGNsYW1wKFxuICAgICAgICAgIHNvdXJjZUV4dGVudFszXSxcbiAgICAgICAgICBtYXhTb3VyY2VFeHRlbnRbMV0sXG4gICAgICAgICAgbWF4U291cmNlRXh0ZW50WzNdXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzb3VyY2VFeHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oc291cmNlRXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZ2V0QXJlYShzb3VyY2VFeHRlbnQpKSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzb3VyY2VSYW5nZSA9IHNvdXJjZVRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooXG4gICAgICAgIHNvdXJjZUV4dGVudCxcbiAgICAgICAgdGhpcy5zb3VyY2VaX1xuICAgICAgKTtcblxuICAgICAgZm9yIChsZXQgc3JjWCA9IHNvdXJjZVJhbmdlLm1pblg7IHNyY1ggPD0gc291cmNlUmFuZ2UubWF4WDsgc3JjWCsrKSB7XG4gICAgICAgIGZvciAobGV0IHNyY1kgPSBzb3VyY2VSYW5nZS5taW5ZOyBzcmNZIDw9IHNvdXJjZVJhbmdlLm1heFk7IHNyY1krKykge1xuICAgICAgICAgIGNvbnN0IHRpbGUgPSBnZXRUaWxlRnVuY3Rpb24odGhpcy5zb3VyY2VaXywgc3JjWCwgc3JjWSwgcGl4ZWxSYXRpbyk7XG4gICAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfLnB1c2godGlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBIVE1MIENhbnZhcyBlbGVtZW50IGZvciB0aGlzIHRpbGUuXG4gICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMuXG4gICAqL1xuICBnZXRJbWFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jYW52YXNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXByb2plY3RfKCkge1xuICAgIGNvbnN0IHNvdXJjZXMgPSBbXTtcbiAgICB0aGlzLnNvdXJjZVRpbGVzXy5mb3JFYWNoKCh0aWxlKSA9PiB7XG4gICAgICBpZiAodGlsZSAmJiB0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICBzb3VyY2VzLnB1c2goe1xuICAgICAgICAgIGV4dGVudDogdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUudGlsZUNvb3JkKSxcbiAgICAgICAgICBpbWFnZTogdGlsZS5nZXRJbWFnZSgpLFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKHNvdXJjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB6ID0gdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXTtcbiAgICAgIGNvbnN0IHNpemUgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlU2l6ZSh6KTtcbiAgICAgIGNvbnN0IHdpZHRoID0gdHlwZW9mIHNpemUgPT09ICdudW1iZXInID8gc2l6ZSA6IHNpemVbMF07XG4gICAgICBjb25zdCBoZWlnaHQgPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVsxXTtcbiAgICAgIGNvbnN0IHRhcmdldFJlc29sdXRpb24gPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgY29uc3Qgc291cmNlUmVzb2x1dGlvbiA9IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFJlc29sdXRpb24oXG4gICAgICAgIHRoaXMuc291cmNlWl9cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHRhcmdldEV4dGVudCA9IHRoaXMudGFyZ2V0VGlsZUdyaWRfLmdldFRpbGVDb29yZEV4dGVudChcbiAgICAgICAgdGhpcy53cmFwcGVkVGlsZUNvb3JkX1xuICAgICAgKTtcblxuICAgICAgdGhpcy5jYW52YXNfID0gcmVuZGVyUmVwcm9qZWN0ZWQoXG4gICAgICAgIHdpZHRoLFxuICAgICAgICBoZWlnaHQsXG4gICAgICAgIHRoaXMucGl4ZWxSYXRpb18sXG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24sXG4gICAgICAgIHRoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpLFxuICAgICAgICB0YXJnZXRSZXNvbHV0aW9uLFxuICAgICAgICB0YXJnZXRFeHRlbnQsXG4gICAgICAgIHRoaXMudHJpYW5ndWxhdGlvbl8sXG4gICAgICAgIHNvdXJjZXMsXG4gICAgICAgIHRoaXMuZ3V0dGVyXyxcbiAgICAgICAgdGhpcy5yZW5kZXJFZGdlc18sXG4gICAgICAgIHRoaXMuaW50ZXJwb2xhdGVcbiAgICAgICk7XG5cbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgIH1cbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIG5vdCB5ZXQgbG9hZGVkIFVSSS5cbiAgICovXG4gIGxvYWQoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgIHRoaXMuY2hhbmdlZCgpO1xuXG4gICAgICBsZXQgbGVmdFRvTG9hZCA9IDA7XG5cbiAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goKHRpbGUpID0+IHtcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSB8fCBzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgIGxlZnRUb0xvYWQrKztcblxuICAgICAgICAgIGNvbnN0IHNvdXJjZUxpc3RlbktleSA9IGxpc3RlbihcbiAgICAgICAgICAgIHRpbGUsXG4gICAgICAgICAgICBFdmVudFR5cGUuQ0hBTkdFLFxuICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICAgICAgc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SIHx8XG4gICAgICAgICAgICAgICAgc3RhdGUgPT0gVGlsZVN0YXRlLkVNUFRZXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoc291cmNlTGlzdGVuS2V5KTtcbiAgICAgICAgICAgICAgICBsZWZ0VG9Mb2FkLS07XG4gICAgICAgICAgICAgICAgaWYgKGxlZnRUb0xvYWQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMudW5saXN0ZW5Tb3VyY2VzXygpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5yZXByb2plY3RfKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5wdXNoKHNvdXJjZUxpc3RlbktleSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAobGVmdFRvTG9hZCA9PT0gMCkge1xuICAgICAgICBzZXRUaW1lb3V0KHRoaXMucmVwcm9qZWN0Xy5iaW5kKHRoaXMpLCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVubGlzdGVuU291cmNlc18oKSB7XG4gICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBmcm9tIHRoZSBjYWNoZSBkdWUgdG8gZXhwaXJ5XG4gICAqL1xuICByZWxlYXNlKCkge1xuICAgIGlmICh0aGlzLmNhbnZhc18pIHtcbiAgICAgIHJlbGVhc2VDYW52YXModGhpcy5jYW52YXNfLmdldENvbnRleHQoJzJkJykpO1xuICAgICAgY2FudmFzUG9vbC5wdXNoKHRoaXMuY2FudmFzXyk7XG4gICAgICB0aGlzLmNhbnZhc18gPSBudWxsO1xuICAgIH1cbiAgICBzdXBlci5yZWxlYXNlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVwcm9qVGlsZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovY29tbW9uXG4gKi9cblxuLyoqXG4gKiBEZWZhdWx0IG1heGltdW0gYWxsb3dlZCB0aHJlc2hvbGQgIChpbiBwaXhlbHMpIGZvciByZXByb2plY3Rpb25cbiAqIHRyaWFuZ3VsYXRpb24uXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgRVJST1JfVEhSRVNIT0xEID0gMC41O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVSYW5nZVxuICovXG5cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbnRpZ3VvdXMgYmxvY2sgb2YgdGlsZXMuICBBIHRpbGUgcmFuZ2UgaXMgc3BlY2lmaWVkXG4gKiBieSBpdHMgbWluL21heCB0aWxlIGNvb3JkaW5hdGVzIGFuZCBpcyBpbmNsdXNpdmUgb2YgY29vcmRpbmF0ZXMuXG4gKi9cbmNsYXNzIFRpbGVSYW5nZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1pblggPSBtaW5YO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFggPSBtYXhYO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1pblkgPSBtaW5ZO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1heFkgPSBtYXhZO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyB0aWxlIGNvb3JkaW5hdGUuXG4gICAqL1xuICBjb250YWlucyh0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluc1hZKHRpbGVDb29yZFsxXSwgdGlsZUNvb3JkWzJdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICAgKi9cbiAgY29udGFpbnNUaWxlUmFuZ2UodGlsZVJhbmdlKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubWluWCA8PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgdGlsZVJhbmdlLm1heFggPD0gdGhpcy5tYXhYICYmXG4gICAgICB0aGlzLm1pblkgPD0gdGlsZVJhbmdlLm1pblkgJiZcbiAgICAgIHRpbGVSYW5nZS5tYXhZIDw9IHRoaXMubWF4WVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBjb29yZGluYXRlLlxuICAgKi9cbiAgY29udGFpbnNYWSh4LCB5KSB7XG4gICAgcmV0dXJuIHRoaXMubWluWCA8PSB4ICYmIHggPD0gdGhpcy5tYXhYICYmIHRoaXMubWluWSA8PSB5ICYmIHkgPD0gdGhpcy5tYXhZO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gRXF1YWxzLlxuICAgKi9cbiAgZXF1YWxzKHRpbGVSYW5nZSkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm1pblggPT0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgIHRoaXMubWluWSA9PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgdGhpcy5tYXhYID09IHRpbGVSYW5nZS5tYXhYICYmXG4gICAgICB0aGlzLm1heFkgPT0gdGlsZVJhbmdlLm1heFlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICovXG4gIGV4dGVuZCh0aWxlUmFuZ2UpIHtcbiAgICBpZiAodGlsZVJhbmdlLm1pblggPCB0aGlzLm1pblgpIHtcbiAgICAgIHRoaXMubWluWCA9IHRpbGVSYW5nZS5taW5YO1xuICAgIH1cbiAgICBpZiAodGlsZVJhbmdlLm1heFggPiB0aGlzLm1heFgpIHtcbiAgICAgIHRoaXMubWF4WCA9IHRpbGVSYW5nZS5tYXhYO1xuICAgIH1cbiAgICBpZiAodGlsZVJhbmdlLm1pblkgPCB0aGlzLm1pblkpIHtcbiAgICAgIHRoaXMubWluWSA9IHRpbGVSYW5nZS5taW5ZO1xuICAgIH1cbiAgICBpZiAodGlsZVJhbmdlLm1heFkgPiB0aGlzLm1heFkpIHtcbiAgICAgIHRoaXMubWF4WSA9IHRpbGVSYW5nZS5tYXhZO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAgICovXG4gIGdldEhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXhZIC0gdGhpcy5taW5ZICsgMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gU2l6ZS5cbiAgICovXG4gIGdldFNpemUoKSB7XG4gICAgcmV0dXJuIFt0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCldO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gICAqL1xuICBnZXRXaWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXhYIC0gdGhpcy5taW5YICsgMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IEludGVyc2VjdHMuXG4gICAqL1xuICBpbnRlcnNlY3RzKHRpbGVSYW5nZSkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm1pblggPD0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgIHRoaXMubWF4WCA+PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgdGhpcy5taW5ZIDw9IHRpbGVSYW5nZS5tYXhZICYmXG4gICAgICB0aGlzLm1heFkgPj0gdGlsZVJhbmdlLm1pbllcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblkgTWluaW11bSBZLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICogQHBhcmFtIHtUaWxlUmFuZ2V9IFt0aWxlUmFuZ2VdIFRpbGVSYW5nZS5cbiAqIEByZXR1cm4ge1RpbGVSYW5nZX0gVGlsZSByYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKG1pblgsIG1heFgsIG1pblksIG1heFksIHRpbGVSYW5nZSkge1xuICBpZiAodGlsZVJhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aWxlUmFuZ2UubWluWCA9IG1pblg7XG4gICAgdGlsZVJhbmdlLm1heFggPSBtYXhYO1xuICAgIHRpbGVSYW5nZS5taW5ZID0gbWluWTtcbiAgICB0aWxlUmFuZ2UubWF4WSA9IG1heFk7XG4gICAgcmV0dXJuIHRpbGVSYW5nZTtcbiAgfVxuICByZXR1cm4gbmV3IFRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlsZVJhbmdlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NpemVcbiAqL1xuXG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGEgc2l6ZTogYFt3aWR0aCwgaGVpZ2h0XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gU2l6ZVxuICogQGFwaVxuICovXG5cbi8qKlxuICogUmV0dXJucyBhIGJ1ZmZlcmVkIHNpemUuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBudW0gVGhlIGFtb3VudCBieSB3aGljaCB0byBidWZmZXIuXG4gKiBAcGFyYW0ge1NpemV9IFtkZXN0XSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIGJ1ZmZlcmVkIHNpemUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWZmZXIoc2l6ZSwgbnVtLCBkZXN0KSB7XG4gIGlmIChkZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICBkZXN0ID0gWzAsIDBdO1xuICB9XG4gIGRlc3RbMF0gPSBzaXplWzBdICsgMiAqIG51bTtcbiAgZGVzdFsxXSA9IHNpemVbMV0gKyAyICogbnVtO1xuICByZXR1cm4gZGVzdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGEgc2l6ZSBoYXMgYSBwb3NpdGl2ZSBhcmVhLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFRoZSBzaXplIHRvIHRlc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2l6ZSBoYXMgYSBwb3NpdGl2ZSBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzQXJlYShzaXplKSB7XG4gIHJldHVybiBzaXplWzBdID4gMCAmJiBzaXplWzFdID4gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2l6ZSBzY2FsZWQgYnkgYSByYXRpby4gVGhlIHJlc3VsdCB3aWxsIGJlIGFuIGFycmF5IG9mIGludGVnZXJzLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmF0aW8gUmF0aW8uXG4gKiBAcGFyYW0ge1NpemV9IFtkZXN0XSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIHNjYWxlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoc2l6ZSwgcmF0aW8sIGRlc3QpIHtcbiAgaWYgKGRlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgIGRlc3QgPSBbMCwgMF07XG4gIH1cbiAgZGVzdFswXSA9IChzaXplWzBdICogcmF0aW8gKyAwLjUpIHwgMDtcbiAgZGVzdFsxXSA9IChzaXplWzFdICogcmF0aW8gKyAwLjUpIHwgMDtcbiAgcmV0dXJuIGRlc3Q7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBgU2l6ZWAgYXJyYXkgZm9yIHRoZSBwYXNzZWQgaW4gbnVtYmVyIChtZWFuaW5nOiBzcXVhcmUpIG9yXG4gKiBgU2l6ZWAgYXJyYXkuXG4gKiAobWVhbmluZzogbm9uLXNxdWFyZSksXG4gKiBAcGFyYW0ge251bWJlcnxTaXplfSBzaXplIFdpZHRoIGFuZCBoZWlnaHQuXG4gKiBAcGFyYW0ge1NpemV9IFtkZXN0XSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gU2l6ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU2l6ZShzaXplLCBkZXN0KSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHNpemUpKSB7XG4gICAgcmV0dXJuIHNpemU7XG4gIH1cbiAgaWYgKGRlc3QgPT09IHVuZGVmaW5lZCkge1xuICAgIGRlc3QgPSBbc2l6ZSwgc2l6ZV07XG4gIH0gZWxzZSB7XG4gICAgZGVzdFswXSA9IHNpemU7XG4gICAgZGVzdFsxXSA9IHNpemU7XG4gIH1cbiAgcmV0dXJuIGRlc3Q7XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllclxuICovXG5pbXBvcnQgQ2FudmFzTGF5ZXJSZW5kZXJlciBmcm9tICcuL0xheWVyLmpzJztcbmltcG9ydCBJbWFnZVRpbGUgZnJvbSAnLi4vLi4vSW1hZ2VUaWxlLmpzJztcbmltcG9ydCBSZXByb2pUaWxlIGZyb20gJy4uLy4uL3JlcHJvai9UaWxlLmpzJztcbmltcG9ydCBUaWxlUmFuZ2UgZnJvbSAnLi4vLi4vVGlsZVJhbmdlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7XG4gIGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLFxuICBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sXG4gIG1ha2VJbnZlcnNlLFxuICB0b1N0cmluZyBhcyB0b1RyYW5zZm9ybVN0cmluZyxcbn0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7YXNjZW5kaW5nfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQge1xuICBjb250YWluc0Nvb3JkaW5hdGUsXG4gIGNyZWF0ZUVtcHR5LFxuICBlcXVhbHMsXG4gIGdldEhlaWdodCxcbiAgZ2V0SW50ZXJzZWN0aW9uLFxuICBnZXRSb3RhdGVkVmlld3BvcnQsXG4gIGdldFRvcExlZnQsXG4gIGdldFdpZHRoLFxuICBpbnRlcnNlY3RzLFxufSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHtmcm9tVXNlckV4dGVudH0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQge2dldFVpZH0gZnJvbSAnLi4vLi4vdXRpbC5qcyc7XG5pbXBvcnQge3RvU2l6ZX0gZnJvbSAnLi4vLi4vc2l6ZS5qcyc7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIHJlbmRlcmVyIGZvciB0aWxlIGxheWVycy5cbiAqIEBhcGlcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHQ+fGltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH0gW0xheWVyVHlwZT1pbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdD58aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0XVxuICogQGV4dGVuZHMge0NhbnZhc0xheWVyUmVuZGVyZXI8TGF5ZXJUeXBlPn1cbiAqL1xuY2xhc3MgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgZXh0ZW5kcyBDYW52YXNMYXllclJlbmRlcmVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7TGF5ZXJUeXBlfSB0aWxlTGF5ZXIgVGlsZSBsYXllci5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHRpbGVMYXllcikge1xuICAgIHN1cGVyKHRpbGVMYXllcik7XG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXJlZCBleHRlbnQgaGFzIGNoYW5nZWQgc2luY2UgdGhlIHByZXZpb3VzIGByZW5kZXJGcmFtZSgpYCBjYWxsXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5leHRlbnRDaGFuZ2VkID0gdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRQaXhlbFJhdGlvO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkUHJvamVjdGlvbiA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb247XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRUaWxlcyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm5ld1RpbGVzXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMudG1wRXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMudG1wVGlsZVJhbmdlXyA9IG5ldyBUaWxlUmFuZ2UoMCwgMCwgMCwgMCk7XG4gIH1cblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaWxlIGlzIGRyYXdhYmxlLlxuICAgKi9cbiAgaXNEcmF3YWJsZVRpbGUodGlsZSkge1xuICAgIGNvbnN0IHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICBjb25zdCB0aWxlU3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgY29uc3QgdXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IHRpbGVMYXllci5nZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKCk7XG4gICAgcmV0dXJuIChcbiAgICAgIHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVNUFRZIHx8XG4gICAgICAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiAmJiAhdXNlSW50ZXJpbVRpbGVzT25FcnJvcilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAqL1xuICBnZXRUaWxlKHosIHgsIHksIGZyYW1lU3RhdGUpIHtcbiAgICBjb25zdCBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xuICAgIGNvbnN0IHByb2plY3Rpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgIGNvbnN0IHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICBjb25zdCB0aWxlU291cmNlID0gdGlsZUxheWVyLmdldFNvdXJjZSgpO1xuICAgIGxldCB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICBpZiAodGlsZUxheWVyLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IoKSAmJiB0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpID4gMCkge1xuICAgICAgICAvLyBQcmVsb2FkZWQgdGlsZXMgZm9yIGxvd2VyIHJlc29sdXRpb25zIG1pZ2h0IGhhdmUgZmluaXNoZWQgbG9hZGluZy5cbiAgICAgICAgdGhpcy5uZXdUaWxlc18gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgIHRpbGUgPSB0aWxlLmdldEludGVyaW1UaWxlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheX0gRGF0YSBhdCB0aGUgcGl4ZWwgbG9jYXRpb24uXG4gICAqL1xuICBnZXREYXRhKHBpeGVsKSB7XG4gICAgY29uc3QgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZTtcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgIGNvbnN0IGNvb3JkaW5hdGUgPSBhcHBseVRyYW5zZm9ybShcbiAgICAgIGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0sXG4gICAgICBwaXhlbC5zbGljZSgpXG4gICAgKTtcblxuICAgIGNvbnN0IGxheWVyRXh0ZW50ID0gbGF5ZXIuZ2V0RXh0ZW50KCk7XG4gICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICBpZiAoIWNvbnRhaW5zQ29vcmRpbmF0ZShsYXllckV4dGVudCwgY29vcmRpbmF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcbiAgICBjb25zdCBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICBjb25zdCB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICBjb25zdCBzb3VyY2UgPSBsYXllci5nZXRSZW5kZXJTb3VyY2UoKTtcbiAgICBjb25zdCB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24odmlld1N0YXRlLnByb2plY3Rpb24pO1xuICAgIGNvbnN0IHRpbGVQaXhlbFJhdGlvID0gc291cmNlLmdldFRpbGVQaXhlbFJhdGlvKGZyYW1lU3RhdGUucGl4ZWxSYXRpbyk7XG5cbiAgICBmb3IgKFxuICAgICAgbGV0IHogPSB0aWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbih2aWV3U3RhdGUucmVzb2x1dGlvbik7XG4gICAgICB6ID49IHRpbGVHcmlkLmdldE1pblpvb20oKTtcbiAgICAgIC0telxuICAgICkge1xuICAgICAgY29uc3QgdGlsZUNvb3JkID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKGNvb3JkaW5hdGUsIHopO1xuICAgICAgY29uc3QgdGlsZSA9IHNvdXJjZS5nZXRUaWxlKFxuICAgICAgICB6LFxuICAgICAgICB0aWxlQ29vcmRbMV0sXG4gICAgICAgIHRpbGVDb29yZFsyXSxcbiAgICAgICAgcGl4ZWxSYXRpbyxcbiAgICAgICAgcHJvamVjdGlvblxuICAgICAgKTtcbiAgICAgIGlmIChcbiAgICAgICAgISh0aWxlIGluc3RhbmNlb2YgSW1hZ2VUaWxlIHx8IHRpbGUgaW5zdGFuY2VvZiBSZXByb2pUaWxlKSB8fFxuICAgICAgICAodGlsZSBpbnN0YW5jZW9mIFJlcHJvalRpbGUgJiYgdGlsZS5nZXRTdGF0ZSgpID09PSBUaWxlU3RhdGUuRU1QVFkpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgIT09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRpbGVPcmlnaW4gPSB0aWxlR3JpZC5nZXRPcmlnaW4oeik7XG4gICAgICBjb25zdCB0aWxlU2l6ZSA9IHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh6KSk7XG4gICAgICBjb25zdCB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG5cbiAgICAgIGNvbnN0IGNvbCA9IE1hdGguZmxvb3IoXG4gICAgICAgIHRpbGVQaXhlbFJhdGlvICpcbiAgICAgICAgICAoKGNvb3JkaW5hdGVbMF0gLSB0aWxlT3JpZ2luWzBdKSAvIHRpbGVSZXNvbHV0aW9uIC1cbiAgICAgICAgICAgIHRpbGVDb29yZFsxXSAqIHRpbGVTaXplWzBdKVxuICAgICAgKTtcblxuICAgICAgY29uc3Qgcm93ID0gTWF0aC5mbG9vcihcbiAgICAgICAgdGlsZVBpeGVsUmF0aW8gKlxuICAgICAgICAgICgodGlsZU9yaWdpblsxXSAtIGNvb3JkaW5hdGVbMV0pIC8gdGlsZVJlc29sdXRpb24gLVxuICAgICAgICAgICAgdGlsZUNvb3JkWzJdICogdGlsZVNpemVbMV0pXG4gICAgICApO1xuXG4gICAgICBjb25zdCBndXR0ZXIgPSBNYXRoLnJvdW5kKFxuICAgICAgICB0aWxlUGl4ZWxSYXRpbyAqIHNvdXJjZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uKHZpZXdTdGF0ZS5wcm9qZWN0aW9uKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZ2V0SW1hZ2VEYXRhKHRpbGUuZ2V0SW1hZ2UoKSwgY29sICsgZ3V0dGVyLCByb3cgKyBndXR0ZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICovXG4gIGxvYWRlZFRpbGVDYWxsYmFjayh0aWxlcywgem9vbSwgdGlsZSkge1xuICAgIGlmICh0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICByZXR1cm4gc3VwZXIubG9hZGVkVGlsZUNhbGxiYWNrKHRpbGVzLCB6b29tLCB0aWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSB3aGV0aGVyIHJlbmRlciBzaG91bGQgYmUgY2FsbGVkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICovXG4gIHByZXBhcmVGcmFtZShmcmFtZVN0YXRlKSB7XG4gICAgcmV0dXJuICEhdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbmRlciB0aGUgbGF5ZXIuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSByZW5kZXJlZCBlbGVtZW50LlxuICAgKi9cbiAgcmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgIGNvbnN0IHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIGNvbnN0IHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICBjb25zdCB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgIGNvbnN0IHZpZXdDZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgIGNvbnN0IHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIGNvbnN0IHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG5cbiAgICBjb25zdCB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgY29uc3QgdGlsZVNvdXJjZSA9IHRpbGVMYXllci5nZXRTb3VyY2UoKTtcbiAgICBjb25zdCBzb3VyY2VSZXZpc2lvbiA9IHRpbGVTb3VyY2UuZ2V0UmV2aXNpb24oKTtcbiAgICBjb25zdCB0aWxlR3JpZCA9IHRpbGVTb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGNvbnN0IHogPSB0aWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbih2aWV3UmVzb2x1dGlvbiwgdGlsZVNvdXJjZS56RGlyZWN0aW9uKTtcbiAgICBjb25zdCB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG5cbiAgICBsZXQgZXh0ZW50ID0gZnJhbWVTdGF0ZS5leHRlbnQ7XG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJlc29sdXRpb247XG4gICAgY29uc3QgdGlsZVBpeGVsUmF0aW8gPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pO1xuICAgIC8vIGRlc2lyZWQgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIGluIHBpeGVsc1xuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5yb3VuZCgoZ2V0V2lkdGgoZXh0ZW50KSAvIHJlc29sdXRpb24pICogcGl4ZWxSYXRpbyk7XG4gICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5yb3VuZCgoZ2V0SGVpZ2h0KGV4dGVudCkgLyByZXNvbHV0aW9uKSAqIHBpeGVsUmF0aW8pO1xuXG4gICAgY29uc3QgbGF5ZXJFeHRlbnQgPVxuICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQgJiYgZnJvbVVzZXJFeHRlbnQobGF5ZXJTdGF0ZS5leHRlbnQsIHByb2plY3Rpb24pO1xuICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgZXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKFxuICAgICAgICBleHRlbnQsXG4gICAgICAgIGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBkeCA9ICh0aWxlUmVzb2x1dGlvbiAqIHdpZHRoKSAvIDIgLyB0aWxlUGl4ZWxSYXRpbztcbiAgICBjb25zdCBkeSA9ICh0aWxlUmVzb2x1dGlvbiAqIGhlaWdodCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgY29uc3QgY2FudmFzRXh0ZW50ID0gW1xuICAgICAgdmlld0NlbnRlclswXSAtIGR4LFxuICAgICAgdmlld0NlbnRlclsxXSAtIGR5LFxuICAgICAgdmlld0NlbnRlclswXSArIGR4LFxuICAgICAgdmlld0NlbnRlclsxXSArIGR5LFxuICAgIF07XG5cbiAgICBjb25zdCB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59XG4gICAgICovXG4gICAgY29uc3QgdGlsZXNUb0RyYXdCeVogPSB7fTtcbiAgICB0aWxlc1RvRHJhd0J5Wlt6XSA9IHt9O1xuXG4gICAgY29uc3QgZmluZExvYWRlZFRpbGVzID0gdGhpcy5jcmVhdGVMb2FkZWRUaWxlRmluZGVyKFxuICAgICAgdGlsZVNvdXJjZSxcbiAgICAgIHByb2plY3Rpb24sXG4gICAgICB0aWxlc1RvRHJhd0J5WlxuICAgICk7XG5cbiAgICBjb25zdCB0bXBFeHRlbnQgPSB0aGlzLnRtcEV4dGVudDtcbiAgICBjb25zdCB0bXBUaWxlUmFuZ2UgPSB0aGlzLnRtcFRpbGVSYW5nZV87XG4gICAgdGhpcy5uZXdUaWxlc18gPSBmYWxzZTtcbiAgICBjb25zdCB2aWV3cG9ydCA9IHJvdGF0aW9uXG4gICAgICA/IGdldFJvdGF0ZWRWaWV3cG9ydChcbiAgICAgICAgICB2aWV3U3RhdGUuY2VudGVyLFxuICAgICAgICAgIHJlc29sdXRpb24sXG4gICAgICAgICAgcm90YXRpb24sXG4gICAgICAgICAgZnJhbWVTdGF0ZS5zaXplXG4gICAgICAgIClcbiAgICAgIDogdW5kZWZpbmVkO1xuICAgIGZvciAobGV0IHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICBmb3IgKGxldCB5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgcm90YXRpb24gJiZcbiAgICAgICAgICAhdGlsZUdyaWQudGlsZUNvb3JkSW50ZXJzZWN0c1ZpZXdwb3J0KFt6LCB4LCB5XSwgdmlld3BvcnQpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRpbGUgPSB0aGlzLmdldFRpbGUoeiwgeCwgeSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgY29uc3QgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgdGlsZXNUb0RyYXdCeVpbel1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICAgICAgbGV0IGluVHJhbnNpdGlvbiA9IHRpbGUuaW5UcmFuc2l0aW9uKHVpZCk7XG4gICAgICAgICAgICBpZiAoaW5UcmFuc2l0aW9uICYmIGxheWVyU3RhdGUub3BhY2l0eSAhPT0gMSkge1xuICAgICAgICAgICAgICAvLyBTa2lwcGluZyB0cmFuc2l0aW9uIHdoZW4gbGF5ZXIgaXMgbm90IGZ1bGx5IG9wYXF1ZSBhdm9pZHMgdmlzdWFsIGFydGlmYWN0cy5cbiAgICAgICAgICAgICAgdGlsZS5lbmRUcmFuc2l0aW9uKHVpZCk7XG4gICAgICAgICAgICAgIGluVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhdGhpcy5uZXdUaWxlc18gJiZcbiAgICAgICAgICAgICAgKGluVHJhbnNpdGlvbiB8fCAhdGhpcy5yZW5kZXJlZFRpbGVzLmluY2x1ZGVzKHRpbGUpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRoaXMubmV3VGlsZXNfID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpID09PSAxKSB7XG4gICAgICAgICAgICAvLyBkb24ndCBsb29rIGZvciBhbHQgdGlsZXMgaWYgYWxwaGEgaXMgMVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2hpbGRUaWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZShcbiAgICAgICAgICB0aWxlLnRpbGVDb29yZCxcbiAgICAgICAgICB0bXBUaWxlUmFuZ2UsXG4gICAgICAgICAgdG1wRXh0ZW50XG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGNvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKGNoaWxkVGlsZVJhbmdlKSB7XG4gICAgICAgICAgY292ZXJlZCA9IGZpbmRMb2FkZWRUaWxlcyh6ICsgMSwgY2hpbGRUaWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY292ZXJlZCkge1xuICAgICAgICAgIHRpbGVHcmlkLmZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UoXG4gICAgICAgICAgICB0aWxlLnRpbGVDb29yZCxcbiAgICAgICAgICAgIGZpbmRMb2FkZWRUaWxlcyxcbiAgICAgICAgICAgIHRtcFRpbGVSYW5nZSxcbiAgICAgICAgICAgIHRtcEV4dGVudFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjYW52YXNTY2FsZSA9XG4gICAgICAoKHRpbGVSZXNvbHV0aW9uIC8gdmlld1Jlc29sdXRpb24pICogcGl4ZWxSYXRpbykgLyB0aWxlUGl4ZWxSYXRpbztcblxuICAgIC8vIHNldCBmb3J3YXJkIGFuZCBpbnZlcnNlIHBpeGVsIHRyYW5zZm9ybXNcbiAgICBjb21wb3NlVHJhbnNmb3JtKFxuICAgICAgdGhpcy5waXhlbFRyYW5zZm9ybSxcbiAgICAgIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDIsXG4gICAgICBmcmFtZVN0YXRlLnNpemVbMV0gLyAyLFxuICAgICAgMSAvIHBpeGVsUmF0aW8sXG4gICAgICAxIC8gcGl4ZWxSYXRpbyxcbiAgICAgIHJvdGF0aW9uLFxuICAgICAgLXdpZHRoIC8gMixcbiAgICAgIC1oZWlnaHQgLyAyXG4gICAgKTtcblxuICAgIGNvbnN0IGNhbnZhc1RyYW5zZm9ybSA9IHRvVHJhbnNmb3JtU3RyaW5nKHRoaXMucGl4ZWxUcmFuc2Zvcm0pO1xuXG4gICAgdGhpcy51c2VDb250YWluZXIodGFyZ2V0LCBjYW52YXNUcmFuc2Zvcm0sIHRoaXMuZ2V0QmFja2dyb3VuZChmcmFtZVN0YXRlKSk7XG4gICAgY29uc3QgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICBjb25zdCBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcblxuICAgIG1ha2VJbnZlcnNlKHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCB0aGlzLnBpeGVsVHJhbnNmb3JtKTtcblxuICAgIC8vIHNldCBzY2FsZSB0cmFuc2Zvcm0gZm9yIGNhbGN1bGF0aW5nIHRpbGUgcG9zaXRpb25zIG9uIHRoZSBjYW52YXNcbiAgICBjb21wb3NlVHJhbnNmb3JtKFxuICAgICAgdGhpcy50ZW1wVHJhbnNmb3JtLFxuICAgICAgd2lkdGggLyAyLFxuICAgICAgaGVpZ2h0IC8gMixcbiAgICAgIGNhbnZhc1NjYWxlLFxuICAgICAgY2FudmFzU2NhbGUsXG4gICAgICAwLFxuICAgICAgLXdpZHRoIC8gMixcbiAgICAgIC1oZWlnaHQgLyAyXG4gICAgKTtcblxuICAgIGlmIChjYW52YXMud2lkdGggIT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmNvbnRhaW5lclJldXNlZCkge1xuICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgfVxuXG4gICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICB0aGlzLmNsaXBVbnJvdGF0ZWQoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJFeHRlbnQpO1xuICAgIH1cblxuICAgIGlmICghdGlsZVNvdXJjZS5nZXRJbnRlcnBvbGF0ZSgpKSB7XG4gICAgICBjb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMucHJlUmVuZGVyKGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuXG4gICAgdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA9IDA7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIGxldCB6cyA9IE9iamVjdC5rZXlzKHRpbGVzVG9EcmF3QnlaKS5tYXAoTnVtYmVyKTtcbiAgICB6cy5zb3J0KGFzY2VuZGluZyk7XG5cbiAgICBsZXQgY2xpcHMsIGNsaXBacywgY3VycmVudENsaXA7XG4gICAgaWYgKFxuICAgICAgbGF5ZXJTdGF0ZS5vcGFjaXR5ID09PSAxICYmXG4gICAgICAoIXRoaXMuY29udGFpbmVyUmV1c2VkIHx8XG4gICAgICAgIHRpbGVTb3VyY2UuZ2V0T3BhcXVlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pKVxuICAgICkge1xuICAgICAgenMgPSB6cy5yZXZlcnNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsaXBzID0gW107XG4gICAgICBjbGlwWnMgPSBbXTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IHpzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBjb25zdCBjdXJyZW50WiA9IHpzW2ldO1xuICAgICAgY29uc3QgY3VycmVudFRpbGVQaXhlbFNpemUgPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFNpemUoXG4gICAgICAgIGN1cnJlbnRaLFxuICAgICAgICBwaXhlbFJhdGlvLFxuICAgICAgICBwcm9qZWN0aW9uXG4gICAgICApO1xuICAgICAgY29uc3QgY3VycmVudFJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKGN1cnJlbnRaKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRTY2FsZSA9IGN1cnJlbnRSZXNvbHV0aW9uIC8gdGlsZVJlc29sdXRpb247XG4gICAgICBjb25zdCBkeCA9IGN1cnJlbnRUaWxlUGl4ZWxTaXplWzBdICogY3VycmVudFNjYWxlICogY2FudmFzU2NhbGU7XG4gICAgICBjb25zdCBkeSA9IGN1cnJlbnRUaWxlUGl4ZWxTaXplWzFdICogY3VycmVudFNjYWxlICogY2FudmFzU2NhbGU7XG4gICAgICBjb25zdCBvcmlnaW5UaWxlQ29vcmQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFooXG4gICAgICAgIGdldFRvcExlZnQoY2FudmFzRXh0ZW50KSxcbiAgICAgICAgY3VycmVudFpcbiAgICAgICk7XG4gICAgICBjb25zdCBvcmlnaW5UaWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KG9yaWdpblRpbGVDb29yZCk7XG4gICAgICBjb25zdCBvcmlnaW4gPSBhcHBseVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIFtcbiAgICAgICAgKHRpbGVQaXhlbFJhdGlvICogKG9yaWdpblRpbGVFeHRlbnRbMF0gLSBjYW52YXNFeHRlbnRbMF0pKSAvXG4gICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICh0aWxlUGl4ZWxSYXRpbyAqIChjYW52YXNFeHRlbnRbM10gLSBvcmlnaW5UaWxlRXh0ZW50WzNdKSkgL1xuICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgXSk7XG4gICAgICBjb25zdCB0aWxlR3V0dGVyID1cbiAgICAgICAgdGlsZVBpeGVsUmF0aW8gKiB0aWxlU291cmNlLmdldEd1dHRlckZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICBjb25zdCB0aWxlc1RvRHJhdyA9IHRpbGVzVG9EcmF3QnlaW2N1cnJlbnRaXTtcbiAgICAgIGZvciAoY29uc3QgdGlsZUNvb3JkS2V5IGluIHRpbGVzVG9EcmF3KSB7XG4gICAgICAgIGNvbnN0IHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoXG4gICAgICAgICAgdGlsZXNUb0RyYXdbdGlsZUNvb3JkS2V5XVxuICAgICAgICApO1xuICAgICAgICBjb25zdCB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZWdlciBwb3NpdGlvbnMgYW5kIHNpemVzIHNvIHRoYXQgdGlsZXMgYWxpZ25cbiAgICAgICAgY29uc3QgeEluZGV4ID0gb3JpZ2luVGlsZUNvb3JkWzFdIC0gdGlsZUNvb3JkWzFdO1xuICAgICAgICBjb25zdCBuZXh0WCA9IE1hdGgucm91bmQob3JpZ2luWzBdIC0gKHhJbmRleCAtIDEpICogZHgpO1xuICAgICAgICBjb25zdCB5SW5kZXggPSBvcmlnaW5UaWxlQ29vcmRbMl0gLSB0aWxlQ29vcmRbMl07XG4gICAgICAgIGNvbnN0IG5leHRZID0gTWF0aC5yb3VuZChvcmlnaW5bMV0gLSAoeUluZGV4IC0gMSkgKiBkeSk7XG4gICAgICAgIGNvbnN0IHggPSBNYXRoLnJvdW5kKG9yaWdpblswXSAtIHhJbmRleCAqIGR4KTtcbiAgICAgICAgY29uc3QgeSA9IE1hdGgucm91bmQob3JpZ2luWzFdIC0geUluZGV4ICogZHkpO1xuICAgICAgICBjb25zdCB3ID0gbmV4dFggLSB4O1xuICAgICAgICBjb25zdCBoID0gbmV4dFkgLSB5O1xuICAgICAgICBjb25zdCB0cmFuc2l0aW9uID0geiA9PT0gY3VycmVudFo7XG5cbiAgICAgICAgY29uc3QgaW5UcmFuc2l0aW9uID1cbiAgICAgICAgICB0cmFuc2l0aW9uICYmIHRpbGUuZ2V0QWxwaGEoZ2V0VWlkKHRoaXMpLCBmcmFtZVN0YXRlLnRpbWUpICE9PSAxO1xuICAgICAgICBsZXQgY29udGV4dFNhdmVkID0gZmFsc2U7XG4gICAgICAgIGlmICghaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgaWYgKGNsaXBzKSB7XG4gICAgICAgICAgICAvLyBDbGlwIG1hc2sgZm9yIHJlZ2lvbnMgaW4gdGhpcyB0aWxlIHRoYXQgYWxyZWFkeSBmaWxsZWQgYnkgYSBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICBjdXJyZW50Q2xpcCA9IFt4LCB5LCB4ICsgdywgeSwgeCArIHcsIHkgKyBoLCB4LCB5ICsgaF07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBjbGlwcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgIGlmICh6ICE9PSBjdXJyZW50WiAmJiBjdXJyZW50WiA8IGNsaXBac1tpXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsaXAgPSBjbGlwc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBpbnRlcnNlY3RzKFxuICAgICAgICAgICAgICAgICAgICBbeCwgeSwgeCArIHcsIHkgKyBoXSxcbiAgICAgICAgICAgICAgICAgICAgW2NsaXBbMF0sIGNsaXBbM10sIGNsaXBbNF0sIGNsaXBbN11dXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHRTYXZlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dFNhdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAvLyBjb3VudGVyLWNsb2Nrd2lzZSAob3V0ZXIgcmluZykgZm9yIGN1cnJlbnQgdGlsZVxuICAgICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oY3VycmVudENsaXBbMF0sIGN1cnJlbnRDbGlwWzFdKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGN1cnJlbnRDbGlwWzJdLCBjdXJyZW50Q2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs0XSwgY3VycmVudENsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbNl0sIGN1cnJlbnRDbGlwWzddKTtcbiAgICAgICAgICAgICAgICAgIC8vIGNsb2Nrd2lzZSAoaW5uZXIgcmluZykgZm9yIGhpZ2hlciB6IHRpbGVcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGNsaXBbNl0sIGNsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFs0XSwgY2xpcFs1XSk7XG4gICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzJdLCBjbGlwWzNdKTtcbiAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMF0sIGNsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGlwcy5wdXNoKGN1cnJlbnRDbGlwKTtcbiAgICAgICAgICAgIGNsaXBacy5wdXNoKGN1cnJlbnRaKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoeCwgeSwgdywgaCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhd1RpbGVJbWFnZShcbiAgICAgICAgICB0aWxlLFxuICAgICAgICAgIGZyYW1lU3RhdGUsXG4gICAgICAgICAgeCxcbiAgICAgICAgICB5LFxuICAgICAgICAgIHcsXG4gICAgICAgICAgaCxcbiAgICAgICAgICB0aWxlR3V0dGVyLFxuICAgICAgICAgIHRyYW5zaXRpb25cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNsaXBzICYmICFpblRyYW5zaXRpb24pIHtcbiAgICAgICAgICBpZiAoY29udGV4dFNhdmVkKSB7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLnVuc2hpZnQodGlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLnB1c2godGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVVc2VkVGlsZXMoZnJhbWVTdGF0ZS51c2VkVGlsZXMsIHRpbGVTb3VyY2UsIHRpbGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbiA9IHNvdXJjZVJldmlzaW9uO1xuICAgIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uID0gdGlsZVJlc29sdXRpb247XG4gICAgdGhpcy5leHRlbnRDaGFuZ2VkID1cbiAgICAgICF0aGlzLnJlbmRlcmVkRXh0ZW50XyB8fCAhZXF1YWxzKHRoaXMucmVuZGVyZWRFeHRlbnRfLCBjYW52YXNFeHRlbnQpO1xuICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gY2FudmFzRXh0ZW50O1xuICAgIHRoaXMucmVuZGVyZWRQaXhlbFJhdGlvID0gcGl4ZWxSYXRpbztcbiAgICB0aGlzLnJlbmRlcmVkUHJvamVjdGlvbiA9IHByb2plY3Rpb247XG5cbiAgICB0aGlzLm1hbmFnZVRpbGVQeXJhbWlkKFxuICAgICAgZnJhbWVTdGF0ZSxcbiAgICAgIHRpbGVTb3VyY2UsXG4gICAgICB0aWxlR3JpZCxcbiAgICAgIHBpeGVsUmF0aW8sXG4gICAgICBwcm9qZWN0aW9uLFxuICAgICAgZXh0ZW50LFxuICAgICAgeixcbiAgICAgIHRpbGVMYXllci5nZXRQcmVsb2FkKClcbiAgICApO1xuICAgIHRoaXMuc2NoZWR1bGVFeHBpcmVDYWNoZShmcmFtZVN0YXRlLCB0aWxlU291cmNlKTtcblxuICAgIHRoaXMucG9zdFJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcblxuICAgIGlmIChsYXllclN0YXRlLmV4dGVudCkge1xuICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIGNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gdHJ1ZTtcblxuICAgIGlmIChjYW52YXNUcmFuc2Zvcm0gIT09IGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0pIHtcbiAgICAgIGNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPSBjYW52YXNUcmFuc2Zvcm07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggTGVmdCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVG9wIG9mIHRoZSB0aWxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdyBXaWR0aCBvZiB0aGUgdGlsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGggSGVpZ2h0IG9mIHRoZSB0aWxlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIFRpbGUgZ3V0dGVyLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHRyYW5zaXRpb24gQXBwbHkgYW4gYWxwaGEgdHJhbnNpdGlvbi5cbiAgICovXG4gIGRyYXdUaWxlSW1hZ2UodGlsZSwgZnJhbWVTdGF0ZSwgeCwgeSwgdywgaCwgZ3V0dGVyLCB0cmFuc2l0aW9uKSB7XG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLmdldFRpbGVJbWFnZSh0aWxlKTtcbiAgICBpZiAoIWltYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICBjb25zdCBsYXllclN0YXRlID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5W2ZyYW1lU3RhdGUubGF5ZXJJbmRleF07XG4gICAgY29uc3QgYWxwaGEgPVxuICAgICAgbGF5ZXJTdGF0ZS5vcGFjaXR5ICpcbiAgICAgICh0cmFuc2l0aW9uID8gdGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgOiAxKTtcbiAgICBjb25zdCBhbHBoYUNoYW5nZWQgPSBhbHBoYSAhPT0gdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhO1xuICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcbiAgICAgIHRoaXMuY29udGV4dC5zYXZlKCk7XG4gICAgICB0aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGEgPSBhbHBoYTtcbiAgICB9XG4gICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShcbiAgICAgIGltYWdlLFxuICAgICAgZ3V0dGVyLFxuICAgICAgZ3V0dGVyLFxuICAgICAgaW1hZ2Uud2lkdGggLSAyICogZ3V0dGVyLFxuICAgICAgaW1hZ2UuaGVpZ2h0IC0gMiAqIGd1dHRlcixcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgdyxcbiAgICAgIGhcbiAgICApO1xuXG4gICAgaWYgKGFscGhhQ2hhbmdlZCkge1xuICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgaWYgKGFscGhhICE9PSBsYXllclN0YXRlLm9wYWNpdHkpIHtcbiAgICAgIGZyYW1lU3RhdGUuYW5pbWF0ZSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICB0aWxlLmVuZFRyYW5zaXRpb24odWlkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlXG4gICAqL1xuICBnZXRJbWFnZSgpIHtcbiAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgIHJldHVybiBjb250ZXh0ID8gY29udGV4dC5jYW52YXMgOiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaW1hZ2UgZnJvbSBhIHRpbGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0VGlsZUltYWdlKHRpbGUpIHtcbiAgICByZXR1cm4gdGlsZS5nZXRJbWFnZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgc2NoZWR1bGVFeHBpcmVDYWNoZShmcmFtZVN0YXRlLCB0aWxlU291cmNlKSB7XG4gICAgaWYgKHRpbGVTb3VyY2UuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL01hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgICAqL1xuICAgICAgY29uc3QgcG9zdFJlbmRlckZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVTb3VyY2UsIG1hcCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICBjb25zdCB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICBpZiAodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLnVzZWRUaWxlcykge1xuICAgICAgICAgIHRpbGVTb3VyY2UuZXhwaXJlQ2FjaGUoXG4gICAgICAgICAgICBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgZnJhbWVTdGF0ZS51c2VkVGlsZXNbdGlsZVNvdXJjZUtleV1cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9LmJpbmQobnVsbCwgdGlsZVNvdXJjZSk7XG5cbiAgICAgIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKFxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL01hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovIChcbiAgICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25cbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL1RpbGUuanMnKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHVwZGF0ZVVzZWRUaWxlcyh1c2VkVGlsZXMsIHRpbGVTb3VyY2UsIHRpbGUpIHtcbiAgICAvLyBGSVhNRSBzaG91bGQgd2UgdXNlIHRpbGVzVG9EcmF3QnlaIGluc3RlYWQ/XG4gICAgY29uc3QgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIHVzZWRUaWxlcykpIHtcbiAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSA9IHt9O1xuICAgIH1cbiAgICB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV1bdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hbmFnZSB0aWxlIHB5cmFtaWQuXG4gICAqIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgYSBudW1iZXIgb2YgZnVuY3Rpb25zIHJlbGF0ZWQgdG8gdGhlIHRpbGVzIGF0IHRoZVxuICAgKiBjdXJyZW50IHpvb20gYW5kIGxvd2VyIHpvb20gbGV2ZWxzOlxuICAgKiAtIHJlZ2lzdGVycyBpZGxlIHRpbGVzIGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMgc28gdGhhdCB0aGV5IGFyZSBub3RcbiAgICogICBkaXNjYXJkZWQgYnkgdGhlIHRpbGUgcXVldWVcbiAgICogLSBlbnF1ZXVlcyBtaXNzaW5nIHRpbGVzXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRaIEN1cnJlbnQgWi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgTG9hZCBsb3cgcmVzb2x1dGlvbiB0aWxlcyB1cCB0byBgcHJlbG9hZGAgbGV2ZWxzLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdCk6dm9pZH0gW3RpbGVDYWxsYmFja10gVGlsZSBjYWxsYmFjay5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgbWFuYWdlVGlsZVB5cmFtaWQoXG4gICAgZnJhbWVTdGF0ZSxcbiAgICB0aWxlU291cmNlLFxuICAgIHRpbGVHcmlkLFxuICAgIHBpeGVsUmF0aW8sXG4gICAgcHJvamVjdGlvbixcbiAgICBleHRlbnQsXG4gICAgY3VycmVudFosXG4gICAgcHJlbG9hZCxcbiAgICB0aWxlQ2FsbGJhY2tcbiAgKSB7XG4gICAgY29uc3QgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMpKSB7XG4gICAgICBmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldID0ge307XG4gICAgfVxuICAgIGNvbnN0IHdhbnRlZFRpbGVzID0gZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XTtcbiAgICBjb25zdCB0aWxlUXVldWUgPSBmcmFtZVN0YXRlLnRpbGVRdWV1ZTtcbiAgICBjb25zdCBtaW5ab29tID0gdGlsZUdyaWQuZ2V0TWluWm9vbSgpO1xuICAgIGNvbnN0IHJvdGF0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb247XG4gICAgY29uc3Qgdmlld3BvcnQgPSByb3RhdGlvblxuICAgICAgPyBnZXRSb3RhdGVkVmlld3BvcnQoXG4gICAgICAgICAgZnJhbWVTdGF0ZS52aWV3U3RhdGUuY2VudGVyLFxuICAgICAgICAgIGZyYW1lU3RhdGUudmlld1N0YXRlLnJlc29sdXRpb24sXG4gICAgICAgICAgcm90YXRpb24sXG4gICAgICAgICAgZnJhbWVTdGF0ZS5zaXplXG4gICAgICAgIClcbiAgICAgIDogdW5kZWZpbmVkO1xuICAgIGxldCB0aWxlQ291bnQgPSAwO1xuICAgIGxldCB0aWxlLCB0aWxlUmFuZ2UsIHRpbGVSZXNvbHV0aW9uLCB4LCB5LCB6O1xuICAgIGZvciAoeiA9IG1pblpvb207IHogPD0gY3VycmVudFo7ICsreikge1xuICAgICAgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHosIHRpbGVSYW5nZSk7XG4gICAgICB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XG4gICAgICBmb3IgKHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XG4gICAgICAgIGZvciAoeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICByb3RhdGlvbiAmJlxuICAgICAgICAgICAgIXRpbGVHcmlkLnRpbGVDb29yZEludGVyc2VjdHNWaWV3cG9ydChbeiwgeCwgeV0sIHZpZXdwb3J0KVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjdXJyZW50WiAtIHogPD0gcHJlbG9hZCkge1xuICAgICAgICAgICAgKyt0aWxlQ291bnQ7XG4gICAgICAgICAgICB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICB3YW50ZWRUaWxlc1t0aWxlLmdldEtleSgpXSA9IHRydWU7XG4gICAgICAgICAgICAgIGlmICghdGlsZVF1ZXVlLmlzS2V5UXVldWVkKHRpbGUuZ2V0S2V5KCkpKSB7XG4gICAgICAgICAgICAgICAgdGlsZVF1ZXVlLmVucXVldWUoW1xuICAgICAgICAgICAgICAgICAgdGlsZSxcbiAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2VLZXksXG4gICAgICAgICAgICAgICAgICB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZS50aWxlQ29vcmQpLFxuICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aWxlQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB0aWxlQ2FsbGJhY2sodGlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVTb3VyY2UudXNlVGlsZSh6LCB4LCB5LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGlsZVNvdXJjZS51cGRhdGVDYWNoZVNpemUodGlsZUNvdW50LCBwcm9qZWN0aW9uKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlXG4gKi9cbmltcG9ydCBCYXNlVGlsZUxheWVyIGZyb20gJy4vQmFzZVRpbGUuanMnO1xuaW1wb3J0IENhbnZhc1RpbGVMYXllclJlbmRlcmVyIGZyb20gJy4uL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXIuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGVTb3VyY2VUeXBlXG4gKiBAZXh0ZW5kcyBCYXNlVGlsZUxheWVyPFRpbGVTb3VyY2VUeXBlLCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcj5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgVGlsZUxheWVyIGV4dGVuZHMgQmFzZVRpbGVMYXllciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQmFzZVRpbGUuanNcIikuT3B0aW9uczxUaWxlU291cmNlVHlwZT59IFtvcHRpb25zXSBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG4gIH1cblxuICBjcmVhdGVSZW5kZXJlcigpIHtcbiAgICByZXR1cm4gbmV3IENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRoaXMpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVMYXllcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9Db2xsZWN0aW9uRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhbiBpdGVtIGlzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL0NvbGxlY3Rpb24uQ29sbGVjdGlvbkV2ZW50I2FkZFxuICAgKiBAYXBpXG4gICAqL1xuICBBREQ6ICdhZGQnLFxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjcmVtb3ZlXG4gICAqIEBhcGlcbiAgICovXG4gIFJFTU9WRTogJ3JlbW92ZScsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0NvbGxlY3Rpb25cbiAqL1xuaW1wb3J0IEFzc2VydGlvbkVycm9yIGZyb20gJy4vQXNzZXJ0aW9uRXJyb3IuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IFByb3BlcnR5ID0ge1xuICBMRU5HVEg6ICdsZW5ndGgnLFxufTtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBjbGFzcyBDb2xsZWN0aW9uRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbkV2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIFR5cGUuXG4gICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBhZGRlZCBvciByZW1vdmVkIGVsZW1lbnQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBlbGVtZW50LCBpbmRleCkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGVsZW1lbnQgdGhhdCBpcyBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHR5cGUge1R9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gIH1cbn1cblxuLyoqKlxuICogQHRlbXBsYXRlIFRcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpsZW5ndGgnLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTwnYWRkJ3wncmVtb3ZlJywgQ29sbGVjdGlvbkV2ZW50PFQ+LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpsZW5ndGgnfCdhZGQnfCdyZW1vdmUnLFJldHVybj59IENvbGxlY3Rpb25PblNpZ25hdHVyZVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdW5pcXVlPWZhbHNlXSBEaXNhbGxvdyB0aGUgc2FtZSBpdGVtIGZyb20gYmVpbmcgYWRkZWQgdG9cbiAqIHRoZSBjb2xsZWN0aW9uIHR3aWNlLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQW4gZXhwYW5kZWQgdmVyc2lvbiBvZiBzdGFuZGFyZCBKUyBBcnJheSwgYWRkaW5nIGNvbnZlbmllbmNlIG1ldGhvZHMgZm9yXG4gKiBtYW5pcHVsYXRpb24uIEFkZCBhbmQgcmVtb3ZlIGNoYW5nZXMgdG8gdGhlIENvbGxlY3Rpb24gdHJpZ2dlciBhIENvbGxlY3Rpb25cbiAqIGV2ZW50LiBOb3RlIHRoYXQgdGhpcyBkb2VzIG5vdCBjb3ZlciBjaGFuZ2VzIHRvIHRoZSBvYmplY3RzIF93aXRoaW5fIHRoZVxuICogQ29sbGVjdGlvbjsgdGhleSB0cmlnZ2VyIGV2ZW50cyBvbiB0aGUgYXBwcm9wcmlhdGUgb2JqZWN0LCBub3Qgb24gdGhlXG4gKiBDb2xsZWN0aW9uIGFzIGEgd2hvbGUuXG4gKlxuICogQGZpcmVzIENvbGxlY3Rpb25FdmVudFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAYXBpXG4gKi9cbmNsYXNzIENvbGxlY3Rpb24gZXh0ZW5kcyBCYXNlT2JqZWN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8VD59IFthcnJheV0gQXJyYXkuXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIENvbGxlY3Rpb24gb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGFycmF5LCBvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbk9uU2lnbmF0dXJlPFQsIGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbjtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbk9uU2lnbmF0dXJlPFQsIGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8VCwgdm9pZD59XG4gICAgICovXG4gICAgdGhpcy51bjtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnVuaXF1ZV8gPSAhIW9wdGlvbnMudW5pcXVlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUFycmF5PFQ+fVxuICAgICAqL1xuICAgIHRoaXMuYXJyYXlfID0gYXJyYXkgPyBhcnJheSA6IFtdO1xuXG4gICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy5hcnJheV8ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8odGhpcy5hcnJheV9baV0sIGkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXBkYXRlTGVuZ3RoXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgZWxlbWVudHMgZnJvbSB0aGUgY29sbGVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgY2xlYXIoKSB7XG4gICAgd2hpbGUgKHRoaXMuZ2V0TGVuZ3RoKCkgPiAwKSB7XG4gICAgICB0aGlzLnBvcCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgZWxlbWVudHMgdG8gdGhlIGNvbGxlY3Rpb24uICBUaGlzIHB1c2hlcyBlYWNoIGl0ZW0gaW4gdGhlIHByb3ZpZGVkIGFycmF5XG4gICAqIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnIgQXJyYXkuXG4gICAqIEByZXR1cm4ge0NvbGxlY3Rpb248VD59IFRoaXMgY29sbGVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgZXh0ZW5kKGFycikge1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICB0aGlzLnB1c2goYXJyW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0ZSBvdmVyIGVhY2ggZWxlbWVudCwgY2FsbGluZyB0aGUgcHJvdmlkZWQgY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCBBcnJheTxUPik6ICp9IGYgVGhlIGZ1bmN0aW9uIHRvIGNhbGxcbiAgICogICAgIGZvciBldmVyeSBlbGVtZW50LiBUaGlzIGZ1bmN0aW9uIHRha2VzIDMgYXJndW1lbnRzICh0aGUgZWxlbWVudCwgdGhlXG4gICAqICAgICBpbmRleCBhbmQgdGhlIGFycmF5KS4gVGhlIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgKiBAYXBpXG4gICAqL1xuICBmb3JFYWNoKGYpIHtcbiAgICBjb25zdCBhcnJheSA9IHRoaXMuYXJyYXlfO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGFycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGYoYXJyYXlbaV0sIGksIGFycmF5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSB1bmRlcmx5aW5nIEFycmF5IG9iamVjdC4gV2FybmluZzogaWYgdGhlIGFycmF5XG4gICAqIGlzIG11dGF0ZWQsIG5vIGV2ZW50cyB3aWxsIGJlIGRpc3BhdGNoZWQgYnkgdGhlIGNvbGxlY3Rpb24sIGFuZCB0aGVcbiAgICogY29sbGVjdGlvbidzIFwibGVuZ3RoXCIgcHJvcGVydHkgd29uJ3QgYmUgaW4gc3luYyB3aXRoIHRoZSBhY3R1YWwgbGVuZ3RoXG4gICAqIG9mIHRoZSBhcnJheS5cbiAgICogQHJldHVybiB7IUFycmF5PFQ+fSBBcnJheS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0QXJyYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHJldHVybiB7VH0gRWxlbWVudC5cbiAgICogQGFwaVxuICAgKi9cbiAgaXRlbShpbmRleCkge1xuICAgIHJldHVybiB0aGlzLmFycmF5X1tpbmRleF07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhpcyBjb2xsZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRMZW5ndGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KFByb3BlcnR5LkxFTkdUSCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IGFuIGVsZW1lbnQgYXQgdGhlIHByb3ZpZGVkIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBpbnNlcnRBdChpbmRleCwgZWxlbSkge1xuICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiB0aGlzLmdldExlbmd0aCgpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZGV4IG91dCBvZiBib3VuZHM6ICcgKyBpbmRleCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICB9XG4gICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAwLCBlbGVtKTtcbiAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICBuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtLCBpbmRleClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBjb2xsZWN0aW9uIGFuZCByZXR1cm4gaXQuXG4gICAqIFJldHVybiBgdW5kZWZpbmVkYCBpZiB0aGUgY29sbGVjdGlvbiBpcyBlbXB0eS5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIHBvcCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmdldExlbmd0aCgpIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IHRoZSBwcm92aWRlZCBlbGVtZW50IGF0IHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyBsZW5ndGggb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIHB1c2goZWxlbSkge1xuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtKTtcbiAgICB9XG4gICAgY29uc3QgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgdGhpcy5pbnNlcnRBdChuLCBlbGVtKTtcbiAgICByZXR1cm4gdGhpcy5nZXRMZW5ndGgoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGVsZW1lbnQgb3IgdW5kZWZpbmVkIGlmIG5vbmUgZm91bmQuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbW92ZShlbGVtKSB7XG4gICAgY29uc3QgYXJyID0gdGhpcy5hcnJheV87XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gYXJyLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGlmIChhcnJbaV0gPT09IGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQoaSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleCBhbmQgcmV0dXJuIGl0LlxuICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gZG9lcyBub3QgY29udGFpbiB0aGlzIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBWYWx1ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgcmVtb3ZlQXQoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHRoaXMuZ2V0TGVuZ3RoKCkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAvKiogQHR5cGUge0NvbGxlY3Rpb25FdmVudDxUPn0gKi8gKFxuICAgICAgICBuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2LCBpbmRleClcbiAgICAgIClcbiAgICApO1xuICAgIHJldHVybiBwcmV2O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldEF0KGluZGV4LCBlbGVtKSB7XG4gICAgY29uc3QgbiA9IHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgaWYgKGluZGV4ID49IG4pIHtcbiAgICAgIHRoaXMuaW5zZXJ0QXQoaW5kZXgsIGVsZW0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZGV4IG91dCBvZiBib3VuZHM6ICcgKyBpbmRleCk7XG4gICAgfVxuICAgIGlmICh0aGlzLnVuaXF1ZV8pIHtcbiAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtLCBpbmRleCk7XG4gICAgfVxuICAgIGNvbnN0IHByZXYgPSB0aGlzLmFycmF5X1tpbmRleF07XG4gICAgdGhpcy5hcnJheV9baW5kZXhdID0gZWxlbTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAvKiogQHR5cGUge0NvbGxlY3Rpb25FdmVudDxUPn0gKi8gKFxuICAgICAgICBuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBwcmV2LCBpbmRleClcbiAgICAgIClcbiAgICApO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgIC8qKiBAdHlwZSB7Q29sbGVjdGlvbkV2ZW50PFQ+fSAqLyAoXG4gICAgICAgIG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIGVsZW0sIGluZGV4KVxuICAgICAgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZUxlbmd0aF8oKSB7XG4gICAgdGhpcy5zZXQoUHJvcGVydHkuTEVOR1RILCB0aGlzLmFycmF5Xy5sZW5ndGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0gW2V4Y2VwdF0gT3B0aW9uYWwgaW5kZXggdG8gaWdub3JlLlxuICAgKi9cbiAgYXNzZXJ0VW5pcXVlXyhlbGVtLCBleGNlcHQpIHtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSB0aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBpZiAodGhpcy5hcnJheV9baV0gPT09IGVsZW0gJiYgaSAhPT0gZXhjZXB0KSB7XG4gICAgICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcig1OCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbGxlY3Rpb247XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGVcbiAqL1xuaW1wb3J0IHthc1N0cmluZ30gZnJvbSAnLi4vY29sb3IuanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFNpbmdsZXRvbiBjbGFzcy4gQXZhaWxhYmxlIHRocm91Z2gge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZS5zaGFyZWR9LlxuICovXG5jbGFzcyBJY29uSW1hZ2VDYWNoZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmNhY2hlXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuY2FjaGVTaXplXyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tYXhDYWNoZVNpemVfID0gMzI7XG4gIH1cblxuICAvKipcbiAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmNhY2hlXyA9IHt9O1xuICAgIHRoaXMuY2FjaGVTaXplXyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICovXG4gIGNhbkV4cGlyZUNhY2hlKCkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlU2l6ZV8gPiB0aGlzLm1heENhY2hlU2l6ZV87XG4gIH1cblxuICAvKipcbiAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAqL1xuICBleHBpcmUoKSB7XG4gICAgaWYgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgbGV0IGkgPSAwO1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5jYWNoZV8pIHtcbiAgICAgICAgY29uc3QgaWNvbkltYWdlID0gdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgaWYgKChpKysgJiAzKSA9PT0gMCAmJiAhaWNvbkltYWdlLmhhc0xpc3RlbmVyKCkpIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgICAtLXRoaXMuY2FjaGVTaXplXztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBJY29uIGltYWdlLlxuICAgKi9cbiAgZ2V0KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICByZXR1cm4ga2V5IGluIHRoaXMuY2FjaGVfID8gdGhpcy5jYWNoZV9ba2V5XSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBpY29uSW1hZ2UgSWNvbiBpbWFnZS5cbiAgICovXG4gIHNldChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKSB7XG4gICAgY29uc3Qga2V5ID0gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICB0aGlzLmNhY2hlX1trZXldID0gaWNvbkltYWdlO1xuICAgICsrdGhpcy5jYWNoZVNpemVfO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY2FjaGUgc2l6ZSBvZiB0aGUgaWNvbiBjYWNoZS4gRGVmYXVsdCBpcyBgMzJgLiBDaGFuZ2UgdGhpcyB2YWx1ZSB3aGVuXG4gICAqIHlvdXIgbWFwIHVzZXMgbW9yZSB0aGFuIDMyIGRpZmZlcmVudCBpY29uIGltYWdlcyBhbmQgeW91IGFyZSBub3QgY2FjaGluZyBpY29uXG4gICAqIHN0eWxlcyBvbiB0aGUgYXBwbGljYXRpb24gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhDYWNoZVNpemUgQ2FjaGUgbWF4IHNpemUuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFNpemUobWF4Q2FjaGVTaXplKSB7XG4gICAgdGhpcy5tYXhDYWNoZVNpemVfID0gbWF4Q2FjaGVTaXplO1xuICAgIHRoaXMuZXhwaXJlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENhY2hlIGtleS5cbiAqL1xuZnVuY3Rpb24gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gIGNvbnN0IGNvbG9yU3RyaW5nID0gY29sb3IgPyBhc1N0cmluZyhjb2xvcikgOiAnbnVsbCc7XG4gIHJldHVybiBjcm9zc09yaWdpbiArICc6JyArIHNyYyArICc6JyArIGNvbG9yU3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBJY29uSW1hZ2VDYWNoZTtcblxuLyoqXG4gKiBUaGUge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZX5JY29uSW1hZ2VDYWNoZX0gZm9yXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25+SWNvbn0gaW1hZ2VzLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3Qgc2hhcmVkID0gbmV3IEljb25JbWFnZUNhY2hlKCk7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvTWFwXG4gKi9cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IHtUUlVFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHthYnN0cmFjdH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQge2NvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgbWFrZUludmVyc2V9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQge2dldFdpZHRofSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtzaGFyZWQgYXMgaWNvbkltYWdlQ2FjaGV9IGZyb20gJy4uL3N0eWxlL0ljb25JbWFnZUNhY2hlLmpzJztcbmltcG9ydCB7aW5WaWV3fSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQge3dyYXBYfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcblxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHR5cGVkZWYgSGl0TWF0Y2hcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZX0gZmVhdHVyZSBGZWF0dXJlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBkaXN0YW5jZVNxIFNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKi9cblxuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xuY2xhc3MgTWFwUmVuZGVyZXIgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtYXApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICovXG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKi9cbiAgZGlzcGF0Y2hSZW5kZXJFdmVudCh0eXBlLCBmcmFtZVN0YXRlKSB7XG4gICAgYWJzdHJhY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGNhbGN1bGF0ZU1hdHJpY2VzMkQoZnJhbWVTdGF0ZSkge1xuICAgIGNvbnN0IHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTtcbiAgICBjb25zdCBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSA9IGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm07XG5cbiAgICBjb21wb3NlVHJhbnNmb3JtKFxuICAgICAgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sXG4gICAgICBmcmFtZVN0YXRlLnNpemVbMF0gLyAyLFxuICAgICAgZnJhbWVTdGF0ZS5zaXplWzFdIC8gMixcbiAgICAgIDEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbixcbiAgICAgIC0xIC8gdmlld1N0YXRlLnJlc29sdXRpb24sXG4gICAgICAtdmlld1N0YXRlLnJvdGF0aW9uLFxuICAgICAgLXZpZXdTdGF0ZS5jZW50ZXJbMF0sXG4gICAgICAtdmlld1N0YXRlLmNlbnRlclsxXVxuICAgICk7XG5cbiAgICBtYWtlSW52ZXJzZShwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICogQHBhcmFtIHtib29sZWFufSBjaGVja1dyYXBwZWQgQ2hlY2sgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3ZlY3Rvci5qc1wiKS5GZWF0dXJlQ2FsbGJhY2s8VD59IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suXG4gICAqIEBwYXJhbSB7U30gdGhpc0FyZyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBjYWxsYmFja2AuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICogQHBhcmFtIHtVfSB0aGlzQXJnMiBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBsYXllckZpbHRlcmAuXG4gICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAqIEB0ZW1wbGF0ZSBTLFQsVVxuICAgKi9cbiAgZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoXG4gICAgY29vcmRpbmF0ZSxcbiAgICBmcmFtZVN0YXRlLFxuICAgIGhpdFRvbGVyYW5jZSxcbiAgICBjaGVja1dyYXBwZWQsXG4gICAgY2FsbGJhY2ssXG4gICAgdGhpc0FyZyxcbiAgICBsYXllckZpbHRlcixcbiAgICB0aGlzQXJnMlxuICApIHtcbiAgICBsZXQgcmVzdWx0O1xuICAgIGNvbnN0IHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtib29sZWFufSBtYW5hZ2VkIE1hbmFnZWQgbGF5ZXIuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgR2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShtYW5hZ2VkLCBmZWF0dXJlLCBsYXllciwgZ2VvbWV0cnkpIHtcbiAgICAgIHJldHVybiBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIGZlYXR1cmUsIG1hbmFnZWQgPyBsYXllciA6IG51bGwsIGdlb21ldHJ5KTtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG5cbiAgICBjb25zdCB0cmFuc2xhdGVkQ29vcmRpbmF0ZSA9IHdyYXBYKGNvb3JkaW5hdGUuc2xpY2UoKSwgcHJvamVjdGlvbik7XG4gICAgY29uc3Qgb2Zmc2V0cyA9IFtbMCwgMF1dO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiYgY2hlY2tXcmFwcGVkKSB7XG4gICAgICBjb25zdCBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICAgIGNvbnN0IHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgIG9mZnNldHMucHVzaChbLXdvcmxkV2lkdGgsIDBdLCBbd29ybGRXaWR0aCwgMF0pO1xuICAgIH1cblxuICAgIGNvbnN0IGxheWVyU3RhdGVzID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgIGNvbnN0IG51bUxheWVycyA9IGxheWVyU3RhdGVzLmxlbmd0aDtcblxuICAgIGNvbnN0IG1hdGNoZXMgPSAvKiogQHR5cGUge0FycmF5PEhpdE1hdGNoPFQ+Pn0gKi8gKFtdKTtcbiAgICBjb25zdCB0bXBDb29yZCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2Zmc2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IG51bUxheWVycyAtIDE7IGogPj0gMDsgLS1qKSB7XG4gICAgICAgIGNvbnN0IGxheWVyU3RhdGUgPSBsYXllclN0YXRlc1tqXTtcbiAgICAgICAgY29uc3QgbGF5ZXIgPSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbGF5ZXIuaGFzUmVuZGVyZXIoKSAmJlxuICAgICAgICAgIGluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpICYmXG4gICAgICAgICAgbGF5ZXJGaWx0ZXIuY2FsbCh0aGlzQXJnMiwgbGF5ZXIpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGxheWVyUmVuZGVyZXIgPSBsYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICAgIGlmIChsYXllclJlbmRlcmVyICYmIHNvdXJjZSkge1xuICAgICAgICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSBzb3VyY2UuZ2V0V3JhcFgoKVxuICAgICAgICAgICAgICA/IHRyYW5zbGF0ZWRDb29yZGluYXRlXG4gICAgICAgICAgICAgIDogY29vcmRpbmF0ZTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxiYWNrID0gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUuYmluZChcbiAgICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICAgbGF5ZXJTdGF0ZS5tYW5hZ2VkXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdG1wQ29vcmRbMF0gPSBjb29yZGluYXRlc1swXSArIG9mZnNldHNbaV1bMF07XG4gICAgICAgICAgICB0bXBDb29yZFsxXSA9IGNvb3JkaW5hdGVzWzFdICsgb2Zmc2V0c1tpXVsxXTtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxheWVyUmVuZGVyZXIuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoXG4gICAgICAgICAgICAgIHRtcENvb3JkLFxuICAgICAgICAgICAgICBmcmFtZVN0YXRlLFxuICAgICAgICAgICAgICBoaXRUb2xlcmFuY2UsXG4gICAgICAgICAgICAgIGNhbGxiYWNrLFxuICAgICAgICAgICAgICBtYXRjaGVzXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNvbnN0IG9yZGVyID0gMSAvIG1hdGNoZXMubGVuZ3RoO1xuICAgIG1hdGNoZXMuZm9yRWFjaCgobSwgaSkgPT4gKG0uZGlzdGFuY2VTcSArPSBpICogb3JkZXIpKTtcbiAgICBtYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEuZGlzdGFuY2VTcSAtIGIuZGlzdGFuY2VTcSk7XG4gICAgbWF0Y2hlcy5zb21lKChtKSA9PiB7XG4gICAgICByZXR1cm4gKHJlc3VsdCA9IG0uY2FsbGJhY2sobS5mZWF0dXJlLCBtLmxheWVyLCBtLmdlb21ldHJ5KSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2hlY2tXcmFwcGVkIENoZWNrIGZvciB3cmFwcGVkIGdlb21ldHJpZXMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICogQHBhcmFtIHtVfSB0aGlzQXJnIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBjb29yZGluYXRlP1xuICAgKiBAdGVtcGxhdGUgVVxuICAgKi9cbiAgaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICBjb29yZGluYXRlLFxuICAgIGZyYW1lU3RhdGUsXG4gICAgaGl0VG9sZXJhbmNlLFxuICAgIGNoZWNrV3JhcHBlZCxcbiAgICBsYXllckZpbHRlcixcbiAgICB0aGlzQXJnXG4gICkge1xuICAgIGNvbnN0IGhhc0ZlYXR1cmUgPSB0aGlzLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKFxuICAgICAgY29vcmRpbmF0ZSxcbiAgICAgIGZyYW1lU3RhdGUsXG4gICAgICBoaXRUb2xlcmFuY2UsXG4gICAgICBjaGVja1dyYXBwZWQsXG4gICAgICBUUlVFLFxuICAgICAgdGhpcyxcbiAgICAgIGxheWVyRmlsdGVyLFxuICAgICAgdGhpc0FyZ1xuICAgICk7XG5cbiAgICByZXR1cm4gaGFzRmVhdHVyZSAhPT0gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAqL1xuICBnZXRNYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIuXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICovXG4gIHJlbmRlckZyYW1lKGZyYW1lU3RhdGUpIHtcbiAgICBhYnN0cmFjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICBmbHVzaERlY2x1dHRlckl0ZW1zKGZyYW1lU3RhdGUpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlKGZyYW1lU3RhdGUpIHtcbiAgICBpZiAoaWNvbkltYWdlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goZXhwaXJlSWNvbkNhY2hlKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqL1xuZnVuY3Rpb24gZXhwaXJlSWNvbkNhY2hlKG1hcCwgZnJhbWVTdGF0ZSkge1xuICBpY29uSW1hZ2VDYWNoZS5leHBpcmUoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTWFwUmVuZGVyZXI7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvY3NzXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGb250UGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IHN0eWxlIFN0eWxlLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHZhcmlhbnQgVmFyaWFudC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB3ZWlnaHQgV2VpZ2h0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNpemUgU2l6ZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBsaW5lSGVpZ2h0IExpbmVIZWlnaHQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZmFtaWx5IEZhbWlseS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gZmFtaWxpZXMgRmFtaWxpZXMuXG4gKi9cblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciBoaWRkZW4gZmVhdHVyZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBDTEFTU19ISURERU4gPSAnb2wtaGlkZGVuJztcblxuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSBzZWxlY3RhYmxlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENMQVNTX1NFTEVDVEFCTEUgPSAnb2wtc2VsZWN0YWJsZSc7XG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0byBoYXZlIHRoZW0gdW5zZWxlY3RhYmxlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENMQVNTX1VOU0VMRUNUQUJMRSA9ICdvbC11bnNlbGVjdGFibGUnO1xuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIHVuc3VwcG9ydGVkIGZlYXR1cmUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgQ0xBU1NfVU5TVVBQT1JURUQgPSAnb2wtdW5zdXBwb3J0ZWQnO1xuXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGNvbnRyb2xzLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENMQVNTX0NPTlRST0wgPSAnb2wtY29udHJvbCc7XG5cbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0aGF0IGFyZSBjb2xsYXBzZWQsIGkuZS5cbiAqIHRvIHRob3NlIGVsZW1lbnRzIHdoaWNoIHVzdWFsbHkgY2FuIGJlIGV4cGFuZGVkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IENMQVNTX0NPTExBUFNFRCA9ICdvbC1jb2xsYXBzZWQnO1xuXG4vKipcbiAqIEZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTAxMzU2OTcvcmVnZXgtdG8tcGFyc2UtYW55LWNzcy1mb250XG4gKiBAdHlwZSB7UmVnRXhwfVxuICovXG5jb25zdCBmb250UmVnRXggPSBuZXcgUmVnRXhwKFxuICBbXG4gICAgJ15cXFxccyooPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KGl0YWxpY3xvYmxpcXVlKSk/KScsXG4gICAgJyg/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oc21hbGwtY2FwcykpPyknLFxuICAgICcoPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KGJvbGQoPzplcik/fGxpZ2h0ZXJ8WzEtOV0wMCApKT8pJyxcbiAgICAnKD86KD86bm9ybWFsfFxcXFwxfFxcXFwyfFxcXFwzKVxcXFxzKil7MCwzfSgoPzp4eD8tKT8nLFxuICAgICcoPzpzbWFsbHxsYXJnZSl8bWVkaXVtfHNtYWxsZXJ8bGFyZ2VyfFtcXFxcLlxcXFxkXSsoPzpcXFxcJXxpbnxbY2VtXW18ZXh8cFtjdHhdKSknLFxuICAgICcoPzpcXFxccypcXFxcL1xcXFxzKihub3JtYWx8W1xcXFwuXFxcXGRdKyg/OlxcXFwlfGlufFtjZW1dbXxleHxwW2N0eF0pPykpJyxcbiAgICAnP1xcXFxzKihbLSxcXFxcXCJcXFxcXFwnXFxcXHNhLXpdKz8pXFxcXHMqJCcsXG4gIF0uam9pbignJyksXG4gICdpJ1xuKTtcbmNvbnN0IGZvbnRSZWdFeE1hdGNoSW5kZXggPSBbXG4gICdzdHlsZScsXG4gICd2YXJpYW50JyxcbiAgJ3dlaWdodCcsXG4gICdzaXplJyxcbiAgJ2xpbmVIZWlnaHQnLFxuICAnZmFtaWx5Jyxcbl07XG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIGZvbnQgZmFtaWxpZXMgZnJvbSBhIGZvbnQgc3BlYy4gIE5vdGUgdGhhdCB0aGlzIGRvZXNuJ3Qgd29ya1xuICogZm9yIGZvbnQgZmFtaWxpZXMgdGhhdCBoYXZlIGNvbW1hcyBpbiB0aGVtLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTcGVjIFRoZSBDU1MgZm9udCBwcm9wZXJ0eS5cbiAqIEByZXR1cm4ge0ZvbnRQYXJhbWV0ZXJzfG51bGx9IFRoZSBmb250IHBhcmFtZXRlcnMgKG9yIG51bGwgaWYgdGhlIGlucHV0IHNwZWMgaXMgaW52YWxpZCkuXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRGb250UGFyYW1ldGVycyA9IGZ1bmN0aW9uIChmb250U3BlYykge1xuICBjb25zdCBtYXRjaCA9IGZvbnRTcGVjLm1hdGNoKGZvbnRSZWdFeCk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBzdHlsZSA9IC8qKiBAdHlwZSB7Rm9udFBhcmFtZXRlcnN9ICovICh7XG4gICAgbGluZUhlaWdodDogJ25vcm1hbCcsXG4gICAgc2l6ZTogJzEuMmVtJyxcbiAgICBzdHlsZTogJ25vcm1hbCcsXG4gICAgd2VpZ2h0OiAnbm9ybWFsJyxcbiAgICB2YXJpYW50OiAnbm9ybWFsJyxcbiAgfSk7XG4gIGZvciAobGV0IGkgPSAwLCBpaSA9IGZvbnRSZWdFeE1hdGNoSW5kZXgubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgIGNvbnN0IHZhbHVlID0gbWF0Y2hbaSArIDFdO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzdHlsZVtmb250UmVnRXhNYXRjaEluZGV4W2ldXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICBzdHlsZS5mYW1pbGllcyA9IHN0eWxlLmZhbWlseS5zcGxpdCgvLFxccz8vKTtcbiAgcmV0dXJuIHN0eWxlO1xufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvY2FudmFzXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge1dPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7Y3JlYXRlQ2FudmFzQ29udGV4dDJEfSBmcm9tICcuLi9kb20uanMnO1xuaW1wb3J0IHtnZXRGb250UGFyYW1ldGVyc30gZnJvbSAnLi4vY3NzLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7J0NpcmNsZScgfCAnSW1hZ2UnIHwgJ0xpbmVTdHJpbmcnIHwgJ1BvbHlnb24nIHwgJ1RleHQnIHwgJ0RlZmF1bHQnfSBCdWlsZGVyVHlwZVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmlsbFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IGZpbGxTdHlsZSBGaWxsU3R5bGUuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiBMYWJlbFxuICogQHByb3BlcnR5IHtudW1iZXJ9IHdpZHRoIFdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGhlaWdodCBIZWlnaHQuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZ3xudW1iZXI+fSBjb250ZXh0SW5zdHJ1Y3Rpb25zIENvbnRleHRJbnN0cnVjdGlvbnMuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3Ryb2tlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRGaWxsU3R5bGVdIEN1cnJlbnQgRmlsbFN0eWxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY3VycmVudFN0cm9rZVN0eWxlXSBDdXJyZW50IFN0cm9rZVN0eWxlLlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBbY3VycmVudExpbmVDYXBdIEN1cnJlbnQgTGluZUNhcC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY3VycmVudExpbmVEYXNoIEN1cnJlbnQgTGluZURhc2guXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lRGFzaE9mZnNldF0gQ3VycmVudCBMaW5lRGFzaE9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtjdXJyZW50TGluZUpvaW5dIEN1cnJlbnQgTGluZUpvaW4uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lV2lkdGhdIEN1cnJlbnQgTGluZVdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TWl0ZXJMaW1pdF0gQ3VycmVudCBNaXRlckxpbWl0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsYXN0U3Ryb2tlXSBMYXN0IHN0cm9rZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2ZpbGxTdHlsZV0gRmlsbFN0eWxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbc3Ryb2tlU3R5bGVdIFN0cm9rZVN0eWxlLlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBbbGluZUNhcF0gTGluZUNhcC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2ggTGluZURhc2guXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xpbmVEYXNoT2Zmc2V0XSBMaW5lRGFzaE9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtsaW5lSm9pbl0gTGluZUpvaW4uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xpbmVXaWR0aF0gTGluZVdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaXRlckxpbWl0XSBNaXRlckxpbWl0LlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3Ryb2tlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUNhcH0gbGluZUNhcCBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lRGFzaE9mZnNldCBMaW5lRGFzaE9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IGxpbmVKb2luIExpbmVKb2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVXaWR0aCBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWl0ZXJMaW1pdCBNaXRlckxpbWl0LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBzdHJva2VTdHlsZSBTdHJva2VTdHlsZS5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFRleHRTdGF0ZVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzVGV4dEFsaWdufSBbdGV4dEFsaWduXSBUZXh0QWxpZ24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcGVhdF0gUmVwZWF0LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9UZXh0LmpzXCIpLlRleHRKdXN0aWZ5fSBbanVzdGlmeV0gSnVzdGlmeS5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzVGV4dEJhc2VsaW5lfSB0ZXh0QmFzZWxpbmUgVGV4dEJhc2VsaW5lLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9UZXh0LmpzXCIpLlRleHRQbGFjZW1lbnR9IFtwbGFjZW1lbnRdIFBsYWNlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4QW5nbGVdIE1heEFuZ2xlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3ZlcmZsb3ddIE92ZXJmbG93LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9GaWxsLmpzXCIpLmRlZmF1bHR9IFtiYWNrZ3JvdW5kRmlsbF0gQmFja2dyb3VuZEZpbGwuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZFN0cm9rZV0gQmFja2dyb3VuZFN0cm9rZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbc2NhbGVdIFNjYWxlLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbcGFkZGluZ10gUGFkZGluZy5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNlcmlhbGl6YWJsZUluc3RydWN0aW9uc1xuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaW5zdHJ1Y3Rpb25zLlxuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaGl0IGRldGVjdGlvbiBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIFRoZSBhcnJheSBvZiBhbGwgY29vcmRpbmF0ZXMuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBUZXh0U3RhdGU+fSBbdGV4dFN0YXRlc10gVGhlIHRleHQgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgRmlsbFN0YXRlPn0gW2ZpbGxTdGF0ZXNdIFRoZSBmaWxsIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIFN0cm9rZVN0YXRlPn0gW3N0cm9rZVN0YXRlc10gVGhlIHN0cm9rZSBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0PG51bWJlciwgaW1wb3J0KFwiLi9jYW52YXMvRXhlY3V0b3IuanNcIikuUmVwbGF5SW1hZ2VPckxhYmVsQXJncz59IERlY2x1dHRlckltYWdlV2l0aFRleHRcbiAqL1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRGb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdEZpbGxTdHlsZSA9ICcjMDAwJztcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lQ2FwfVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExpbmVDYXAgPSAncm91bmQnO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0TGluZURhc2ggPSBbXTtcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0TGluZURhc2hPZmZzZXQgPSAwO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0NhbnZhc0xpbmVKb2lufVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExpbmVKb2luID0gJ3JvdW5kJztcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0TWl0ZXJMaW1pdCA9IDEwO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0U3Ryb2tlU3R5bGUgPSAnIzAwMCc7XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Q2FudmFzVGV4dEFsaWdufVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFRleHRBbGlnbiA9ICdjZW50ZXInO1xuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0NhbnZhc1RleHRCYXNlbGluZX1cbiAqL1xuZXhwb3J0IGNvbnN0IGRlZmF1bHRUZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcblxuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG5cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgZGVmYXVsdExpbmVXaWR0aCA9IDE7XG5cbi8qKlxuICogQHR5cGUge0Jhc2VPYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBjaGVja2VkRm9udHMgPSBuZXcgQmFzZU9iamVjdCgpO1xuXG4vKipcbiAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gKi9cbmxldCBtZWFzdXJlQ29udGV4dCA9IG51bGw7XG5cbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xubGV0IG1lYXN1cmVGb250O1xuXG4vKipcbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAqL1xuZXhwb3J0IGNvbnN0IHRleHRIZWlnaHRzID0ge307XG5cbi8qKlxuICogQ2xlYXJzIHRoZSBsYWJlbCBjYWNoZSB3aGVuIGEgZm9udCBiZWNvbWVzIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3BlYyBDU1MgZm9udCBzcGVjLlxuICovXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJGb250ID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgcmV0cmllcyA9IDEwMDtcbiAgY29uc3Qgc2l6ZSA9ICczMnB4ICc7XG4gIGNvbnN0IHJlZmVyZW5jZUZvbnRzID0gWydtb25vc3BhY2UnLCAnc2VyaWYnXTtcbiAgY29uc3QgbGVuID0gcmVmZXJlbmNlRm9udHMubGVuZ3RoO1xuICBjb25zdCB0ZXh0ID0gJ3dteXR6aWxXTVlUWklMQCMvJj8kJTEwXFx1RjAxMyc7XG4gIGxldCBpbnRlcnZhbCwgcmVmZXJlbmNlV2lkdGg7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3R5bGUgQ3NzIGZvbnQtc3R5bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRXZWlnaHQgQ3NzIGZvbnQtd2VpZ2h0XG4gICAqIEBwYXJhbSB7Kn0gZm9udEZhbWlseSBDc3MgZm9udC1mYW1pbHlcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gRm9udCB3aXRoIHN0eWxlIGFuZCB3ZWlnaHQgaXMgYXZhaWxhYmxlXG4gICAqL1xuICBmdW5jdGlvbiBpc0F2YWlsYWJsZShmb250U3R5bGUsIGZvbnRXZWlnaHQsIGZvbnRGYW1pbHkpIHtcbiAgICBsZXQgYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjb25zdCByZWZlcmVuY2VGb250ID0gcmVmZXJlbmNlRm9udHNbaV07XG4gICAgICByZWZlcmVuY2VXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoXG4gICAgICAgIGZvbnRTdHlsZSArICcgJyArIGZvbnRXZWlnaHQgKyAnICcgKyBzaXplICsgcmVmZXJlbmNlRm9udCxcbiAgICAgICAgdGV4dFxuICAgICAgKTtcbiAgICAgIGlmIChmb250RmFtaWx5ICE9IHJlZmVyZW5jZUZvbnQpIHtcbiAgICAgICAgY29uc3Qgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKFxuICAgICAgICAgIGZvbnRTdHlsZSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgZm9udFdlaWdodCArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgc2l6ZSArXG4gICAgICAgICAgICBmb250RmFtaWx5ICtcbiAgICAgICAgICAgICcsJyArXG4gICAgICAgICAgICByZWZlcmVuY2VGb250LFxuICAgICAgICAgIHRleHRcbiAgICAgICAgKTtcbiAgICAgICAgLy8gSWYgd2lkdGggYW5kIHJlZmVyZW5jZVdpZHRoIGFyZSB0aGUgc2FtZSwgdGhlbiB0aGUgZmFsbGJhY2sgd2FzIHVzZWRcbiAgICAgICAgLy8gaW5zdGVhZCBvZiB0aGUgZm9udCB3ZSB3YW50ZWQsIHNvIHRoZSBmb250IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICAgIGF2YWlsYWJsZSA9IGF2YWlsYWJsZSAmJiB3aWR0aCAhPSByZWZlcmVuY2VXaWR0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrKCkge1xuICAgIGxldCBkb25lID0gdHJ1ZTtcbiAgICBjb25zdCBmb250cyA9IGNoZWNrZWRGb250cy5nZXRLZXlzKCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZm9udHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgZm9udCA9IGZvbnRzW2ldO1xuICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoZm9udCkgPCByZXRyaWVzKSB7XG4gICAgICAgIGlmIChpc0F2YWlsYWJsZS5hcHBseSh0aGlzLCBmb250LnNwbGl0KCdcXG4nKSkpIHtcbiAgICAgICAgICBjbGVhcih0ZXh0SGVpZ2h0cyk7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgbG9hZGVkIGZvbnRzIGFyZSBwaWNrZWQgdXAgYnkgU2FmYXJpXG4gICAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuICAgICAgICAgIG1lYXN1cmVGb250ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgcmV0cmllcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChmb250LCBjaGVja2VkRm9udHMuZ2V0KGZvbnQpICsgMSwgdHJ1ZSk7XG4gICAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChkb25lKSB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgIGludGVydmFsID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICBjb25zdCBmb250ID0gZ2V0Rm9udFBhcmFtZXRlcnMoZm9udFNwZWMpO1xuICAgIGlmICghZm9udCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmYW1pbGllcyA9IGZvbnQuZmFtaWxpZXM7XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gZmFtaWxpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgZmFtaWx5ID0gZmFtaWxpZXNbaV07XG4gICAgICBjb25zdCBrZXkgPSBmb250LnN0eWxlICsgJ1xcbicgKyBmb250LndlaWdodCArICdcXG4nICsgZmFtaWx5O1xuICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoa2V5KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCByZXRyaWVzLCB0cnVlKTtcbiAgICAgICAgaWYgKCFpc0F2YWlsYWJsZShmb250LnN0eWxlLCBmb250LndlaWdodCwgZmFtaWx5KSkge1xuICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCAwLCB0cnVlKTtcbiAgICAgICAgICBpZiAoaW50ZXJ2YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjaGVjaywgMzIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn0pKCk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gTWVhc3VyZW1lbnQuXG4gKi9cbmV4cG9ydCBjb25zdCBtZWFzdXJlVGV4dEhlaWdodCA9IChmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAqL1xuICBsZXQgbWVhc3VyZUVsZW1lbnQ7XG4gIHJldHVybiBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICBsZXQgaGVpZ2h0ID0gdGV4dEhlaWdodHNbZm9udFNwZWNdO1xuICAgIGlmIChoZWlnaHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgY29uc3QgZm9udCA9IGdldEZvbnRQYXJhbWV0ZXJzKGZvbnRTcGVjKTtcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IG1lYXN1cmVUZXh0KGZvbnRTcGVjLCAnxb1nJyk7XG4gICAgICAgIGNvbnN0IGxpbmVIZWlnaHQgPSBpc05hTihOdW1iZXIoZm9udC5saW5lSGVpZ2h0KSlcbiAgICAgICAgICA/IDEuMlxuICAgICAgICAgIDogTnVtYmVyKGZvbnQubGluZUhlaWdodCk7XG4gICAgICAgIGhlaWdodCA9XG4gICAgICAgICAgbGluZUhlaWdodCAqXG4gICAgICAgICAgKG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hBc2NlbnQgKyBtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIW1lYXN1cmVFbGVtZW50KSB7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBtZWFzdXJlRWxlbWVudC5pbm5lckhUTUwgPSAnTSc7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubWluSGVpZ2h0ID0gJzAnO1xuICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICdub25lJztcbiAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmxlZnQgPSAnLTk5OTk5cHgnO1xuICAgICAgICB9XG4gICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnQgPSBmb250U3BlYztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZWFzdXJlRWxlbWVudCk7XG4gICAgICAgIGhlaWdodCA9IG1lYXN1cmVFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtZWFzdXJlRWxlbWVudCk7XG4gICAgICB9XG4gICAgICB0ZXh0SGVpZ2h0c1tmb250U3BlY10gPSBoZWlnaHQ7XG4gICAgfVxuICAgIHJldHVybiBoZWlnaHQ7XG4gIH07XG59KSgpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7VGV4dE1ldHJpY3N9IFRleHQgbWV0cmljcy5cbiAqL1xuZnVuY3Rpb24gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkge1xuICBpZiAoIW1lYXN1cmVDb250ZXh0KSB7XG4gICAgbWVhc3VyZUNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gIH1cbiAgaWYgKGZvbnQgIT0gbWVhc3VyZUZvbnQpIHtcbiAgICBtZWFzdXJlQ29udGV4dC5mb250ID0gZm9udDtcbiAgICBtZWFzdXJlRm9udCA9IG1lYXN1cmVDb250ZXh0LmZvbnQ7XG4gIH1cbiAgcmV0dXJuIG1lYXN1cmVDb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCkge1xuICByZXR1cm4gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkud2lkdGg7XG59XG5cbi8qKlxuICogTWVhc3VyZSB0ZXh0IHdpZHRoIHVzaW5nIGEgY2FjaGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBUaGUgZm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRoZSB0ZXh0IHRvIG1lYXN1cmUuXG4gKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsIG51bWJlcj59IGNhY2hlIEEgbG9va3VwIG9mIGNhY2hlZCB3aWR0aHMgYnkgdGV4dC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHRleHQgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlQW5kQ2FjaGVUZXh0V2lkdGgoZm9udCwgdGV4dCwgY2FjaGUpIHtcbiAgaWYgKHRleHQgaW4gY2FjaGUpIHtcbiAgICByZXR1cm4gY2FjaGVbdGV4dF07XG4gIH1cbiAgY29uc3Qgd2lkdGggPSB0ZXh0XG4gICAgLnNwbGl0KCdcXG4nKVxuICAgIC5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IE1hdGgubWF4KHByZXYsIG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgY3VycikpLCAwKTtcbiAgY2FjaGVbdGV4dF0gPSB3aWR0aDtcbiAgcmV0dXJuIHdpZHRoO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7VGV4dFN0YXRlfSBiYXNlU3R5bGUgQmFzZSBzdHlsZS5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gY2h1bmtzIFRleHQgY2h1bmtzIHRvIG1lYXN1cmUuXG4gKiBAcmV0dXJuIHt7d2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHdpZHRoczogQXJyYXk8bnVtYmVyPiwgaGVpZ2h0czogQXJyYXk8bnVtYmVyPiwgbGluZVdpZHRoczogQXJyYXk8bnVtYmVyPn19fSBUZXh0IG1ldHJpY3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUZXh0RGltZW5zaW9ucyhiYXNlU3R5bGUsIGNodW5rcykge1xuICBjb25zdCB3aWR0aHMgPSBbXTtcbiAgY29uc3QgaGVpZ2h0cyA9IFtdO1xuICBjb25zdCBsaW5lV2lkdGhzID0gW107XG4gIGxldCB3aWR0aCA9IDA7XG4gIGxldCBsaW5lV2lkdGggPSAwO1xuICBsZXQgaGVpZ2h0ID0gMDtcbiAgbGV0IGxpbmVIZWlnaHQgPSAwO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBjaHVua3MubGVuZ3RoOyBpIDw9IGlpOyBpICs9IDIpIHtcbiAgICBjb25zdCB0ZXh0ID0gY2h1bmtzW2ldO1xuICAgIGlmICh0ZXh0ID09PSAnXFxuJyB8fCBpID09PSBpaSkge1xuICAgICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgbGluZVdpZHRoKTtcbiAgICAgIGxpbmVXaWR0aHMucHVzaChsaW5lV2lkdGgpO1xuICAgICAgbGluZVdpZHRoID0gMDtcbiAgICAgIGhlaWdodCArPSBsaW5lSGVpZ2h0O1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGZvbnQgPSBjaHVua3NbaSArIDFdIHx8IGJhc2VTdHlsZS5mb250O1xuICAgIGNvbnN0IGN1cnJlbnRXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgdGV4dCk7XG4gICAgd2lkdGhzLnB1c2goY3VycmVudFdpZHRoKTtcbiAgICBsaW5lV2lkdGggKz0gY3VycmVudFdpZHRoO1xuICAgIGNvbnN0IGN1cnJlbnRIZWlnaHQgPSBtZWFzdXJlVGV4dEhlaWdodChmb250KTtcbiAgICBoZWlnaHRzLnB1c2goY3VycmVudEhlaWdodCk7XG4gICAgbGluZUhlaWdodCA9IE1hdGgubWF4KGxpbmVIZWlnaHQsIGN1cnJlbnRIZWlnaHQpO1xuICB9XG4gIHJldHVybiB7d2lkdGgsIGhlaWdodCwgd2lkdGhzLCBoZWlnaHRzLCBsaW5lV2lkdGhzfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFggWCBvZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WSBZIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIHJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKSB7XG4gIGlmIChyb3RhdGlvbiAhPT0gMCkge1xuICAgIGNvbnRleHQudHJhbnNsYXRlKG9mZnNldFgsIG9mZnNldFkpO1xuICAgIGNvbnRleHQucm90YXRlKHJvdGF0aW9uKTtcbiAgICBjb250ZXh0LnRyYW5zbGF0ZSgtb2Zmc2V0WCwgLW9mZnNldFkpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybXxudWxsfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAqIEBwYXJhbSB7TGFiZWx8SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBsYWJlbE9ySW1hZ2UgTGFiZWwuXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5ZIE9yaWdpbiBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBzY2FsZSBTY2FsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdJbWFnZU9yTGFiZWwoXG4gIGNvbnRleHQsXG4gIHRyYW5zZm9ybSxcbiAgb3BhY2l0eSxcbiAgbGFiZWxPckltYWdlLFxuICBvcmlnaW5YLFxuICBvcmlnaW5ZLFxuICB3LFxuICBoLFxuICB4LFxuICB5LFxuICBzY2FsZVxuKSB7XG4gIGNvbnRleHQuc2F2ZSgpO1xuXG4gIGlmIChvcGFjaXR5ICE9PSAxKSB7XG4gICAgY29udGV4dC5nbG9iYWxBbHBoYSAqPSBvcGFjaXR5O1xuICB9XG4gIGlmICh0cmFuc2Zvcm0pIHtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCB0cmFuc2Zvcm0pO1xuICB9XG5cbiAgaWYgKC8qKiBAdHlwZSB7Kn0gKi8gKGxhYmVsT3JJbWFnZSkuY29udGV4dEluc3RydWN0aW9ucykge1xuICAgIC8vIGxhYmVsXG4gICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgY29udGV4dC5zY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pO1xuICAgIGV4ZWN1dGVMYWJlbEluc3RydWN0aW9ucygvKiogQHR5cGUge0xhYmVsfSAqLyAobGFiZWxPckltYWdlKSwgY29udGV4dCk7XG4gIH0gZWxzZSBpZiAoc2NhbGVbMF0gPCAwIHx8IHNjYWxlWzFdIDwgMCkge1xuICAgIC8vIGZsaXBwZWQgaW1hZ2VcbiAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICBjb250ZXh0LnNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKFxuICAgICAgICBsYWJlbE9ySW1hZ2VcbiAgICAgICksXG4gICAgICBvcmlnaW5YLFxuICAgICAgb3JpZ2luWSxcbiAgICAgIHcsXG4gICAgICBoLFxuICAgICAgMCxcbiAgICAgIDAsXG4gICAgICB3LFxuICAgICAgaFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgLy8gaWYgaW1hZ2Ugbm90IGZsaXBwZWQgdHJhbnNsYXRlIGFuZCBzY2FsZSBjYW4gYmUgYXZvaWRlZFxuICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChcbiAgICAgICAgbGFiZWxPckltYWdlXG4gICAgICApLFxuICAgICAgb3JpZ2luWCxcbiAgICAgIG9yaWdpblksXG4gICAgICB3LFxuICAgICAgaCxcbiAgICAgIHgsXG4gICAgICB5LFxuICAgICAgdyAqIHNjYWxlWzBdLFxuICAgICAgaCAqIHNjYWxlWzFdXG4gICAgKTtcbiAgfVxuXG4gIGNvbnRleHQucmVzdG9yZSgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TGFiZWx9IGxhYmVsIExhYmVsLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqL1xuZnVuY3Rpb24gZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zKGxhYmVsLCBjb250ZXh0KSB7XG4gIGNvbnN0IGNvbnRleHRJbnN0cnVjdGlvbnMgPSBsYWJlbC5jb250ZXh0SW5zdHJ1Y3Rpb25zO1xuICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb250ZXh0SW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXSkpIHtcbiAgICAgIGNvbnRleHRbY29udGV4dEluc3RydWN0aW9uc1tpXV0uYXBwbHkoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0W2NvbnRleHRJbnN0cnVjdGlvbnNbaV1dID0gY29udGV4dEluc3RydWN0aW9uc1tpICsgMV07XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvQ29tcG9zaXRlXG4gKi9cbmltcG9ydCBNYXBSZW5kZXJlciBmcm9tICcuL01hcC5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4uL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge0NMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7Y2hlY2tlZEZvbnRzfSBmcm9tICcuLi9yZW5kZXIvY2FudmFzLmpzJztcbmltcG9ydCB7aW5WaWV3fSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7cmVwbGFjZUNoaWxkcmVufSBmcm9tICcuLi9kb20uanMnO1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyBtYXAgcmVuZGVyZXIuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIENvbXBvc2l0ZU1hcFJlbmRlcmVyIGV4dGVuZHMgTWFwUmVuZGVyZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hcCkge1xuICAgIHN1cGVyKG1hcCk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKi9cbiAgICB0aGlzLmZvbnRDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICBjaGVja2VkRm9udHMsXG4gICAgICBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsXG4gICAgICBtYXAucmVkcmF3VGV4dC5iaW5kKG1hcClcbiAgICApO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHN0eWxlLnpJbmRleCA9ICcwJztcblxuICAgIHRoaXMuZWxlbWVudF8uY2xhc3NOYW1lID0gQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyBvbC1sYXllcnMnO1xuXG4gICAgY29uc3QgY29udGFpbmVyID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgY29udGFpbmVyLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnRfLCBjb250YWluZXIuZmlyc3RDaGlsZCB8fCBudWxsKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0FycmF5PEhUTUxFbGVtZW50Pn1cbiAgICAgKi9cbiAgICB0aGlzLmNoaWxkcmVuXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2xheWVyL0Jhc2VWZWN0b3IuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5kZWNsdXR0ZXJMYXllcnNfID0gW107XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICovXG4gIGRpc3BhdGNoUmVuZGVyRXZlbnQodHlwZSwgZnJhbWVTdGF0ZSkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgaWYgKG1hcC5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgUmVuZGVyRXZlbnQodHlwZSwgdW5kZWZpbmVkLCBmcmFtZVN0YXRlKTtcbiAgICAgIG1hcC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBkaXNwb3NlSW50ZXJuYWwoKSB7XG4gICAgdW5saXN0ZW5CeUtleSh0aGlzLmZvbnRDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgIHRoaXMuZWxlbWVudF8ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICBzdXBlci5kaXNwb3NlSW50ZXJuYWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIuXG4gICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgKi9cbiAgcmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSkge1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuY2FsY3VsYXRlTWF0cmljZXMyRChmcmFtZVN0YXRlKTtcbiAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsIGZyYW1lU3RhdGUpO1xuXG4gICAgY29uc3QgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYS56SW5kZXggLSBiLnpJbmRleDtcbiAgICB9KTtcbiAgICBjb25zdCB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcblxuICAgIHRoaXMuY2hpbGRyZW5fLmxlbmd0aCA9IDA7XG5cbiAgICBjb25zdCBkZWNsdXR0ZXJMYXllcnMgPSB0aGlzLmRlY2x1dHRlckxheWVyc187XG4gICAgZGVjbHV0dGVyTGF5ZXJzLmxlbmd0aCA9IDA7XG5cbiAgICBsZXQgcHJldmlvdXNFbGVtZW50ID0gbnVsbDtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIGNvbnN0IGxheWVyU3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgZnJhbWVTdGF0ZS5sYXllckluZGV4ID0gaTtcblxuICAgICAgY29uc3QgbGF5ZXIgPSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgY29uc3Qgc291cmNlU3RhdGUgPSBsYXllci5nZXRTb3VyY2VTdGF0ZSgpO1xuICAgICAgaWYgKFxuICAgICAgICAhaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgfHxcbiAgICAgICAgKHNvdXJjZVN0YXRlICE9ICdyZWFkeScgJiYgc291cmNlU3RhdGUgIT0gJ3VuZGVmaW5lZCcpXG4gICAgICApIHtcbiAgICAgICAgbGF5ZXIudW5yZW5kZXIoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBsYXllci5yZW5kZXIoZnJhbWVTdGF0ZSwgcHJldmlvdXNFbGVtZW50KTtcbiAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50ICE9PSBwcmV2aW91c0VsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl8ucHVzaChlbGVtZW50KTtcbiAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgIH1cbiAgICAgIGlmICgnZ2V0RGVjbHV0dGVyJyBpbiBsYXllcikge1xuICAgICAgICBkZWNsdXR0ZXJMYXllcnMucHVzaChcbiAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL2xheWVyL0Jhc2VWZWN0b3IuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyKVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmZsdXNoRGVjbHV0dGVySXRlbXMoZnJhbWVTdGF0ZSk7XG5cbiAgICByZXBsYWNlQ2hpbGRyZW4odGhpcy5lbGVtZW50XywgdGhpcy5jaGlsZHJlbl8pO1xuXG4gICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5QT1NUQ09NUE9TRSwgZnJhbWVTdGF0ZSk7XG5cbiAgICBpZiAoIXRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgdGhpcy5lbGVtZW50Xy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUoZnJhbWVTdGF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICovXG4gIGZsdXNoRGVjbHV0dGVySXRlbXMoZnJhbWVTdGF0ZSkge1xuICAgIGNvbnN0IGxheWVycyA9IHRoaXMuZGVjbHV0dGVyTGF5ZXJzXztcbiAgICBmb3IgKGxldCBpID0gbGF5ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBsYXllcnNbaV0ucmVuZGVyRGVjbHV0dGVyKGZyYW1lU3RhdGUpO1xuICAgIH1cbiAgICBsYXllcnMubGVuZ3RoID0gMDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb21wb3NpdGVNYXBSZW5kZXJlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9Hcm91cFxuICovXG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4uL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtjbGVhcn0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7Z2V0SW50ZXJzZWN0aW9ufSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYgeydhZGRsYXllcid8J3JlbW92ZWxheWVyJ30gRXZlbnRUeXBlXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGxheWVyIGdyb3VwIHRyaWdnZXJzICdhZGRsYXllcicgYW5kICdyZW1vdmVsYXllcicgZXZlbnRzIHdoZW4gbGF5ZXJzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBncm91cCBvciBvbmUgb2YgaXRzIGNoaWxkIGdyb3Vwcy4gIFdoZW4gYSBsYXllciBncm91cCBpcyBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gYW5vdGhlciBsYXllciBncm91cCxcbiAqIGEgc2luZ2xlIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIChpbnN0ZWFkIG9mIG9uZSBwZXIgbGF5ZXIgaW4gdGhlIGdyb3VwIGFkZGVkIG9yIHJlbW92ZWQpLlxuICovXG5leHBvcnQgY2xhc3MgR3JvdXBFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnRUeXBlfSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICAgKiBAcGFyYW0ge0Jhc2VMYXllcn0gbGF5ZXIgVGhlIGxheWVyLlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgbGF5ZXIpIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBhZGRlZCBvciByZW1vdmVkIGxheWVyLlxuICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJ9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXIgPSBsYXllcjtcbiAgfVxufVxuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAnY2hhbmdlOmxheWVycycsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8J2NoYW5nZTpsYXllcnMnLCBSZXR1cm4+fSBHcm91cE9uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBbbGF5ZXJzXSBDaGlsZCBsYXllcnMuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsICo+fSBbcHJvcGVydGllc10gQXJiaXRyYXJ5IG9ic2VydmFibGUgcHJvcGVydGllcy4gQ2FuIGJlIGFjY2Vzc2VkIHdpdGggYCNnZXQoKWAgYW5kIGAjc2V0KClgLlxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IFByb3BlcnR5ID0ge1xuICBMQVlFUlM6ICdsYXllcnMnLFxufTtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBvZiBsYXllcnMgdGhhdCBhcmUgaGFuZGxlZCB0b2dldGhlci5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIGdyb3VwL0NvbGxlY3Rpb24gY2hhbmdlcy5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIExheWVyR3JvdXAgZXh0ZW5kcyBCYXNlTGF5ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gTGF5ZXIgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICBjb25zdCBiYXNlT3B0aW9ucyA9IC8qKiBAdHlwZSB7T3B0aW9uc30gKi8gKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpKTtcbiAgICBkZWxldGUgYmFzZU9wdGlvbnMubGF5ZXJzO1xuXG4gICAgbGV0IGxheWVycyA9IG9wdGlvbnMubGF5ZXJzO1xuXG4gICAgc3VwZXIoYmFzZU9wdGlvbnMpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtHcm91cE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub247XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0dyb3VwT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtHcm91cE9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAqL1xuICAgIHRoaXMudW47XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxheWVyc0xpc3RlbmVyS2V5c18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIEFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxpc3RlbmVyS2V5c18gPSB7fTtcblxuICAgIHRoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoUHJvcGVydHkuTEFZRVJTLCB0aGlzLmhhbmRsZUxheWVyc0NoYW5nZWRfKTtcblxuICAgIGlmIChsYXllcnMpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGxheWVycykpIHtcbiAgICAgICAgbGF5ZXJzID0gbmV3IENvbGxlY3Rpb24obGF5ZXJzLnNsaWNlKCksIHt1bmlxdWU6IHRydWV9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFzc2VydCh0eXBlb2YgKC8qKiBAdHlwZSB7P30gKi8gKGxheWVycykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0Myk7IC8vIEV4cGVjdGVkIGBsYXllcnNgIHRvIGJlIGFuIGFycmF5IG9yIGEgYENvbGxlY3Rpb25gXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKHVuZGVmaW5lZCwge3VuaXF1ZTogdHJ1ZX0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0TGF5ZXJzKGxheWVycyk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUxheWVyQ2hhbmdlXygpIHtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlTGF5ZXJzQ2hhbmdlZF8oKSB7XG4gICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG5cbiAgICBjb25zdCBsYXllcnMgPSB0aGlzLmdldExheWVycygpO1xuICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5wdXNoKFxuICAgICAgbGlzdGVuKGxheWVycywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIHRoaXMuaGFuZGxlTGF5ZXJzQWRkXywgdGhpcyksXG4gICAgICBsaXN0ZW4obGF5ZXJzLCBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgdGhpcy5oYW5kbGVMYXllcnNSZW1vdmVfLCB0aGlzKVxuICAgICk7XG5cbiAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMubGlzdGVuZXJLZXlzXykge1xuICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2lkXS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgIH1cbiAgICBjbGVhcih0aGlzLmxpc3RlbmVyS2V5c18pO1xuXG4gICAgY29uc3QgbGF5ZXJzQXJyYXkgPSBsYXllcnMuZ2V0QXJyYXkoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBsYXllcnNBcnJheS5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICBjb25zdCBsYXllciA9IGxheWVyc0FycmF5W2ldO1xuICAgICAgdGhpcy5yZWdpc3RlckxheWVyTGlzdGVuZXJzXyhsYXllcik7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ2FkZGxheWVyJywgbGF5ZXIpKTtcbiAgICB9XG4gICAgdGhpcy5jaGFuZ2VkKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtCYXNlTGF5ZXJ9IGxheWVyIFRoZSBsYXllci5cbiAgICovXG4gIHJlZ2lzdGVyTGF5ZXJMaXN0ZW5lcnNfKGxheWVyKSB7XG4gICAgY29uc3QgbGlzdGVuZXJLZXlzID0gW1xuICAgICAgbGlzdGVuKFxuICAgICAgICBsYXllcixcbiAgICAgICAgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLFxuICAgICAgICB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXyxcbiAgICAgICAgdGhpc1xuICAgICAgKSxcbiAgICAgIGxpc3RlbihsYXllciwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVMYXllckNoYW5nZV8sIHRoaXMpLFxuICAgIF07XG5cbiAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllckdyb3VwKSB7XG4gICAgICBsaXN0ZW5lcktleXMucHVzaChcbiAgICAgICAgbGlzdGVuKGxheWVyLCAnYWRkbGF5ZXInLCB0aGlzLmhhbmRsZUxheWVyR3JvdXBBZGRfLCB0aGlzKSxcbiAgICAgICAgbGlzdGVuKGxheWVyLCAncmVtb3ZlbGF5ZXInLCB0aGlzLmhhbmRsZUxheWVyR3JvdXBSZW1vdmVfLCB0aGlzKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyS2V5c19bZ2V0VWlkKGxheWVyKV0gPSBsaXN0ZW5lcktleXM7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtHcm91cEV2ZW50fSBldmVudCBUaGUgbGF5ZXIgZ3JvdXAgZXZlbnQuXG4gICAqL1xuICBoYW5kbGVMYXllckdyb3VwQWRkXyhldmVudCkge1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgnYWRkbGF5ZXInLCBldmVudC5sYXllcikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7R3JvdXBFdmVudH0gZXZlbnQgVGhlIGxheWVyIGdyb3VwIGV2ZW50LlxuICAgKi9cbiAgaGFuZGxlTGF5ZXJHcm91cFJlbW92ZV8oZXZlbnQpIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ3JlbW92ZWxheWVyJywgZXZlbnQubGF5ZXIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUxheWVyc0FkZF8oY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgY29uc3QgbGF5ZXIgPSBjb2xsZWN0aW9uRXZlbnQuZWxlbWVudDtcbiAgICB0aGlzLnJlZ2lzdGVyTGF5ZXJMaXN0ZW5lcnNfKGxheWVyKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ2FkZGxheWVyJywgbGF5ZXIpKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUxheWVyc1JlbW92ZV8oY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgY29uc3QgbGF5ZXIgPSBjb2xsZWN0aW9uRXZlbnQuZWxlbWVudDtcbiAgICBjb25zdCBrZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgIHRoaXMubGlzdGVuZXJLZXlzX1trZXldLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgZGVsZXRlIHRoaXMubGlzdGVuZXJLZXlzX1trZXldO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgncmVtb3ZlbGF5ZXInLCBsYXllcikpO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgKiBAcmV0dXJuIHshQ29sbGVjdGlvbjxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IENvbGxlY3Rpb24gb2ZcbiAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V+QmFzZUxheWVyIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRMYXllcnMoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSAqLyAoXG4gICAgICB0aGlzLmdldChQcm9wZXJ0eS5MQVlFUlMpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgKiBAcGFyYW0geyFDb2xsZWN0aW9uPGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gbGF5ZXJzIENvbGxlY3Rpb24gb2ZcbiAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V+QmFzZUxheWVyIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRMYXllcnMobGF5ZXJzKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuZ2V0TGF5ZXJzKCk7XG4gICAgaWYgKGNvbGxlY3Rpb24pIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRMYXllcnMgPSBjb2xsZWN0aW9uLmdldEFycmF5KCk7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBHcm91cEV2ZW50KCdyZW1vdmVsYXllcicsIGN1cnJlbnRMYXllcnNbaV0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldChQcm9wZXJ0eS5MQVlFUlMsIGxheWVycyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBbYXJyYXldIEFycmF5IG9mIGxheWVycyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAqL1xuICBnZXRMYXllcnNBcnJheShhcnJheSkge1xuICAgIGFycmF5ID0gYXJyYXkgIT09IHVuZGVmaW5lZCA/IGFycmF5IDogW107XG4gICAgdGhpcy5nZXRMYXllcnMoKS5mb3JFYWNoKGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgbGF5ZXIuZ2V0TGF5ZXJzQXJyYXkoYXJyYXkpO1xuICAgIH0pO1xuICAgIHJldHVybiBhcnJheTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxheWVyIHN0YXRlcyBsaXN0IGFuZCB1c2UgdGhpcyBncm91cHMgei1pbmRleCBhcyB0aGUgZGVmYXVsdFxuICAgKiBmb3IgYWxsIGxheWVycyBpbiB0aGlzIGFuZCBuZXN0ZWQgZ3JvdXBzLCBpZiBpdCBpcyB1bnNldCBhdCB0aGlzIHBvaW50LlxuICAgKiBJZiBkZXN0IGlzIG5vdCBwcm92aWRlZCBhbmQgdGhpcyBncm91cCdzIHotaW5kZXggaXMgdW5kZWZpbmVkXG4gICAqIDAgaXMgdXNlZCBhIHRoZSBkZWZhdWx0IHotaW5kZXguXG4gICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IFtkZXN0XSBPcHRpb25hbCBsaXN0XG4gICAqIG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAqL1xuICBnZXRMYXllclN0YXRlc0FycmF5KGRlc3QpIHtcbiAgICBjb25zdCBzdGF0ZXMgPSBkZXN0ICE9PSB1bmRlZmluZWQgPyBkZXN0IDogW107XG4gICAgY29uc3QgcG9zID0gc3RhdGVzLmxlbmd0aDtcblxuICAgIHRoaXMuZ2V0TGF5ZXJzKCkuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgIGxheWVyLmdldExheWVyU3RhdGVzQXJyYXkoc3RhdGVzKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG93bkxheWVyU3RhdGUgPSB0aGlzLmdldExheWVyU3RhdGUoKTtcbiAgICBsZXQgZGVmYXVsdFpJbmRleCA9IG93bkxheWVyU3RhdGUuekluZGV4O1xuICAgIGlmICghZGVzdCAmJiBvd25MYXllclN0YXRlLnpJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWZhdWx0WkluZGV4ID0gMDtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IHBvcywgaWkgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgY29uc3QgbGF5ZXJTdGF0ZSA9IHN0YXRlc1tpXTtcbiAgICAgIGxheWVyU3RhdGUub3BhY2l0eSAqPSBvd25MYXllclN0YXRlLm9wYWNpdHk7XG4gICAgICBsYXllclN0YXRlLnZpc2libGUgPSBsYXllclN0YXRlLnZpc2libGUgJiYgb3duTGF5ZXJTdGF0ZS52aXNpYmxlO1xuICAgICAgbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uID0gTWF0aC5taW4oXG4gICAgICAgIGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbixcbiAgICAgICAgb3duTGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uXG4gICAgICApO1xuICAgICAgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgoXG4gICAgICAgIGxheWVyU3RhdGUubWluUmVzb2x1dGlvbixcbiAgICAgICAgb3duTGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uXG4gICAgICApO1xuICAgICAgbGF5ZXJTdGF0ZS5taW5ab29tID0gTWF0aC5tYXgobGF5ZXJTdGF0ZS5taW5ab29tLCBvd25MYXllclN0YXRlLm1pblpvb20pO1xuICAgICAgbGF5ZXJTdGF0ZS5tYXhab29tID0gTWF0aC5taW4obGF5ZXJTdGF0ZS5tYXhab29tLCBvd25MYXllclN0YXRlLm1heFpvb20pO1xuICAgICAgaWYgKG93bkxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBsYXllclN0YXRlLmV4dGVudCA9IGdldEludGVyc2VjdGlvbihcbiAgICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50LFxuICAgICAgICAgICAgb3duTGF5ZXJTdGF0ZS5leHRlbnRcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gb3duTGF5ZXJTdGF0ZS5leHRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsYXllclN0YXRlLnpJbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxheWVyU3RhdGUuekluZGV4ID0gZGVmYXVsdFpJbmRleDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3RhdGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuU3RhdGV9IFNvdXJjZSBzdGF0ZS5cbiAgICovXG4gIGdldFNvdXJjZVN0YXRlKCkge1xuICAgIHJldHVybiAncmVhZHknO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExheWVyR3JvdXA7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwRXZlbnRcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBhcyBtYXAgZXZlbnRzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gZm9yIHdoaWNoIGV2ZW50cyB0cmlnZ2VyIGEgbWFwIGV2ZW50LlxuICovXG5jbGFzcyBNYXBFdmVudCBleHRlbmRzIEV2ZW50IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi9NYXAuanNcIikuRnJhbWVTdGF0ZX0gW2ZyYW1lU3RhdGVdIEZyYW1lIHN0YXRlLlxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZSwgbWFwLCBmcmFtZVN0YXRlKSB7XG4gICAgc3VwZXIodHlwZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwIHdoZXJlIHRoZSBldmVudCBvY2N1cnJlZC5cbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9NYXAuanNcIikuZGVmYXVsdH1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5tYXAgPSBtYXA7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZnJhbWUgc3RhdGUgYXQgdGhlIHRpbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9NYXAuanNcIikuRnJhbWVTdGF0ZX1cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgdGhpcy5mcmFtZVN0YXRlID0gZnJhbWVTdGF0ZSAhPT0gdW5kZWZpbmVkID8gZnJhbWVTdGF0ZSA6IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWFwRXZlbnQ7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50XG4gKi9cbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBhcyBtYXAgYnJvd3NlciBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgYnJvd3NlciBldmVudC5cbiAqIEB0ZW1wbGF0ZSB7VUlFdmVudH0gRVZFTlRcbiAqL1xuY2xhc3MgTWFwQnJvd3NlckV2ZW50IGV4dGVuZHMgTWFwRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL01hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKiBAcGFyYW0ge0VWRU5UfSBvcmlnaW5hbEV2ZW50IE9yaWdpbmFsIGV2ZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkcmFnZ2luZ10gSXMgdGhlIG1hcCBjdXJyZW50bHkgYmVpbmcgZHJhZ2dlZD9cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL01hcC5qc1wiKS5GcmFtZVN0YXRlfSBbZnJhbWVTdGF0ZV0gRnJhbWUgc3RhdGUuXG4gICAqIEBwYXJhbSB7QXJyYXk8UG9pbnRlckV2ZW50Pn0gW2FjdGl2ZVBvaW50ZXJzXSBBY3RpdmUgcG9pbnRlcnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBtYXAsIG9yaWdpbmFsRXZlbnQsIGRyYWdnaW5nLCBmcmFtZVN0YXRlLCBhY3RpdmVQb2ludGVycykge1xuICAgIHN1cGVyKHR5cGUsIG1hcCwgZnJhbWVTdGF0ZSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7RVZFTlR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luYWxFdmVudCA9IG9yaWdpbmFsRXZlbnQ7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwIHBpeGVsIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLmNvb3JkaW5hdGVfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyBpZiB0aGUgbWFwIGlzIGN1cnJlbnRseSBiZWluZyBkcmFnZ2VkLiBPbmx5IHNldCBmb3JcbiAgICAgKiBgUE9JTlRFUkRSQUdgIGFuZCBgUE9JTlRFUk1PVkVgIGV2ZW50cy4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuZHJhZ2dpbmcgPSBkcmFnZ2luZyAhPT0gdW5kZWZpbmVkID8gZHJhZ2dpbmcgOiBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxQb2ludGVyRXZlbnQ+fHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzID0gYWN0aXZlUG9pbnRlcnM7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1hcCBwaXhlbCByZWxhdGl2ZSB0byB0aGUgdmlld3BvcnQgY29ycmVzcG9uZGluZyB0byB0aGUgb3JpZ2luYWwgZXZlbnQuXG4gICAqIEB0eXBlIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXQgcGl4ZWwoKSB7XG4gICAgaWYgKCF0aGlzLnBpeGVsXykge1xuICAgICAgdGhpcy5waXhlbF8gPSB0aGlzLm1hcC5nZXRFdmVudFBpeGVsKHRoaXMub3JpZ2luYWxFdmVudCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBpeGVsXztcbiAgfVxuICBzZXQgcGl4ZWwocGl4ZWwpIHtcbiAgICB0aGlzLnBpeGVsXyA9IHBpeGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBjb29yZGluYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGJyb3dzZXIgZXZlbnQuICBUaGlzIHdpbGwgYmUgaW4gdGhlIHVzZXJcbiAgICogcHJvamVjdGlvbiBpZiBvbmUgaXMgc2V0LiAgT3RoZXJ3aXNlIGl0IHdpbGwgYmUgaW4gdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXQgY29vcmRpbmF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuY29vcmRpbmF0ZV8pIHtcbiAgICAgIHRoaXMuY29vcmRpbmF0ZV8gPSB0aGlzLm1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMucGl4ZWwpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jb29yZGluYXRlXztcbiAgfVxuICBzZXQgY29vcmRpbmF0ZShjb29yZGluYXRlKSB7XG4gICAgdGhpcy5jb29yZGluYXRlXyA9IGNvb3JkaW5hdGU7XG4gIH1cblxuICAvKipcbiAgICogUHJldmVudHMgdGhlIGRlZmF1bHQgYnJvd3NlciBhY3Rpb24uXG4gICAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvZXZlbnQucHJldmVudERlZmF1bHQuXG4gICAqIEBhcGlcbiAgICovXG4gIHByZXZlbnREZWZhdWx0KCkge1xuICAgIHN1cGVyLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCdwcmV2ZW50RGVmYXVsdCcgaW4gdGhpcy5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAvKiogQHR5cGUge1VJRXZlbnR9ICovICh0aGlzLm9yaWdpbmFsRXZlbnQpLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByZXZlbnRzIGZ1cnRoZXIgcHJvcGFnYXRpb24gb2YgdGhlIGN1cnJlbnQgZXZlbnQuXG4gICAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvZXZlbnQuc3RvcFByb3BhZ2F0aW9uLlxuICAgKiBAYXBpXG4gICAqL1xuICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgc3VwZXIuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgaWYgKCdzdG9wUHJvcGFnYXRpb24nIGluIHRoaXMub3JpZ2luYWxFdmVudCkge1xuICAgICAgLyoqIEB0eXBlIHtVSUV2ZW50fSAqLyAodGhpcy5vcmlnaW5hbEV2ZW50KS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFR5cGVcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZXZlbnQgbmFtZXMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIC8qKlxuICAgKiBBIHRydWUgc2luZ2xlIGNsaWNrIHdpdGggbm8gZHJhZ2dpbmcgYW5kIG5vIGRvdWJsZSBjbGljay4gTm90ZSB0aGF0IHRoaXNcbiAgICogZXZlbnQgaXMgZGVsYXllZCBieSAyNTAgbXMgdG8gZW5zdXJlIHRoYXQgaXQgaXMgbm90IGEgZG91YmxlIGNsaWNrLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjc2luZ2xlY2xpY2tcbiAgICogQGFwaVxuICAgKi9cbiAgU0lOR0xFQ0xJQ0s6ICdzaW5nbGVjbGljaycsXG5cbiAgLyoqXG4gICAqIEEgY2xpY2sgd2l0aCBubyBkcmFnZ2luZy4gQSBkb3VibGUgY2xpY2sgd2lsbCBmaXJlIHR3byBvZiB0aGlzLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjY2xpY2tcbiAgICogQGFwaVxuICAgKi9cbiAgQ0xJQ0s6IEV2ZW50VHlwZS5DTElDSyxcblxuICAvKipcbiAgICogQSB0cnVlIGRvdWJsZSBjbGljaywgd2l0aCBubyBkcmFnZ2luZy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2RibGNsaWNrXG4gICAqIEBhcGlcbiAgICovXG4gIERCTENMSUNLOiBFdmVudFR5cGUuREJMQ0xJQ0ssXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBkcmFnZ2VkLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQjcG9pbnRlcmRyYWdcbiAgICogQGFwaVxuICAgKi9cbiAgUE9JTlRFUkRSQUc6ICdwb2ludGVyZHJhZycsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBtb3ZlZC4gTm90ZSB0aGF0IG9uIHRvdWNoIGRldmljZXMgdGhpcyBpc1xuICAgKiB0cmlnZ2VyZWQgd2hlbiB0aGUgbWFwIGlzIHBhbm5lZCwgc28gaXMgbm90IHRoZSBzYW1lIGFzIG1vdXNlbW92ZS5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJtb3ZlXG4gICAqIEBhcGlcbiAgICovXG4gIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuXG4gIFBPSU5URVJET1dOOiAncG9pbnRlcmRvd24nLFxuICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICBQT0lOVEVST1ZFUjogJ3BvaW50ZXJvdmVyJyxcbiAgUE9JTlRFUk9VVDogJ3BvaW50ZXJvdXQnLFxuICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICBQT0lOVEVSTEVBVkU6ICdwb2ludGVybGVhdmUnLFxuICBQT0lOVEVSQ0FOQ0VMOiAncG9pbnRlcmNhbmNlbCcsXG59O1xuXG4vKioqXG4gKiBAdHlwZWRlZiB7J3NpbmdsZWNsaWNrJ3wnY2xpY2snfCdkYmxjbGljayd8J3BvaW50ZXJkcmFnJ3wncG9pbnRlcm1vdmUnfSBUeXBlc1xuICovXG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvcG9pbnRlci9FdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIENvbnN0YW50cyBmb3IgZXZlbnQgbmFtZXMuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIFBPSU5URVJNT1ZFOiAncG9pbnRlcm1vdmUnLFxuICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgUE9JTlRFUlVQOiAncG9pbnRlcnVwJyxcbiAgUE9JTlRFUk9WRVI6ICdwb2ludGVyb3ZlcicsXG4gIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgUE9JTlRFUkVOVEVSOiAncG9pbnRlcmVudGVyJyxcbiAgUE9JTlRFUkxFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnLFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRIYW5kbGVyXG4gKi9cblxuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQge1BBU1NJVkVfRVZFTlRfTElTVEVORVJTfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi9ldmVudHMuanMnO1xuXG5jbGFzcyBNYXBCcm93c2VyRXZlbnRIYW5kbGVyIGV4dGVuZHMgVGFyZ2V0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9NYXAuanNcIikuZGVmYXVsdH0gbWFwIFRoZSBtYXAgd2l0aCB0aGUgdmlld3BvcnQgdG8gbGlzdGVuIHRvIGV2ZW50cyBvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlXSBUaGUgbWluaW1hbCBkaXN0YW5jZSB0aGUgcG9pbnRlciBtdXN0IHRyYXZlbCB0byB0cmlnZ2VyIGEgbW92ZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hcCwgbW92ZVRvbGVyYW5jZSkge1xuICAgIHN1cGVyKG1hcCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHRoZSBlbGVtZW50IHRoYXQgd2Ugd2lsbCBsaXN0ZW4gdG8gdGhlIHJlYWwgZXZlbnRzIG9uLlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL01hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5tYXBfID0gbWFwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge1JldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5jbGlja1RpbWVvdXRJZF87XG5cbiAgICAvKipcbiAgICAgKiBFbXVsYXRlIGRibGNsaWNrIGFuZCBzaW5nbGVjbGljay4gV2lsbCBiZSB0cnVlIHdoZW4gb25seSBvbmUgcG9pbnRlciBpcyBhY3RpdmUuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5lbXVsYXRlQ2xpY2tzXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubW92ZVRvbGVyYW5jZV8gPSBtb3ZlVG9sZXJhbmNlID09PSB1bmRlZmluZWQgPyAxIDogbW92ZVRvbGVyYW5jZTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBtb3N0IHJlY2VudCBcImRvd25cIiB0eXBlIGV2ZW50IChvciBudWxsIGlmIG5vbmUgaGF2ZSBvY2N1cnJlZCkuXG4gICAgICogU2V0IG9uIHBvaW50ZXJkb3duLlxuICAgICAqIEB0eXBlIHtQb2ludGVyRXZlbnR8bnVsbH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZG93bl8gPSBudWxsO1xuXG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMubWFwXy5nZXRWaWV3cG9ydCgpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PFBvaW50ZXJFdmVudD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8bnVtYmVyLCBFdmVudD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrZWRUb3VjaGVzXyA9IHt9O1xuXG4gICAgdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICBlbGVtZW50LFxuICAgICAgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSRE9XTixcbiAgICAgIHRoaXMuaGFuZGxlUG9pbnRlckRvd25fLFxuICAgICAgdGhpc1xuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICBlbGVtZW50LFxuICAgICAgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSxcbiAgICAgIHRoaXMucmVsYXlNb3ZlRXZlbnRfLFxuICAgICAgdGhpc1xuICAgICk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfID0gdGhpcy5oYW5kbGVUb3VjaE1vdmVfLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmVsZW1lbnRfLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBFdmVudFR5cGUuVE9VQ0hNT1ZFLFxuICAgICAgdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8sXG4gICAgICBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHtwYXNzaXZlOiBmYWxzZX0gOiBmYWxzZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZW11bGF0ZUNsaWNrXyhwb2ludGVyRXZlbnQpIHtcbiAgICBsZXQgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KFxuICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSyxcbiAgICAgIHRoaXMubWFwXyxcbiAgICAgIHBvaW50ZXJFdmVudFxuICAgICk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICBpZiAodGhpcy5jbGlja1RpbWVvdXRJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gZG91YmxlLWNsaWNrXG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXRJZF8pO1xuICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoXG4gICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0ssXG4gICAgICAgIHRoaXMubWFwXyxcbiAgICAgICAgcG9pbnRlckV2ZW50XG4gICAgICApO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2xpY2tcbiAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICBjb25zdCBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoXG4gICAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5TSU5HTEVDTElDSyxcbiAgICAgICAgICB0aGlzLm1hcF8sXG4gICAgICAgICAgcG9pbnRlckV2ZW50XG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICB9LCAyNTApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBLZWVwcyB0cmFjayBvbiBob3cgbWFueSBwb2ludGVycyBhcmUgY3VycmVudGx5IGFjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCkge1xuICAgIGNvbnN0IGV2ZW50ID0gcG9pbnRlckV2ZW50O1xuICAgIGNvbnN0IGlkID0gZXZlbnQucG9pbnRlcklkO1xuXG4gICAgaWYgKFxuICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCB8fFxuICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJDQU5DRUxcbiAgICApIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRUb3VjaGVzX1tpZF07XG4gICAgICBmb3IgKGNvbnN0IHBvaW50ZXJJZCBpbiB0aGlzLnRyYWNrZWRUb3VjaGVzXykge1xuICAgICAgICBpZiAodGhpcy50cmFja2VkVG91Y2hlc19bcG9pbnRlcklkXS50YXJnZXQgIT09IGV2ZW50LnRhcmdldCkge1xuICAgICAgICAgIC8vIFNvbWUgcGxhdGZvcm1zIGFzc2lnbiBhIG5ldyBwb2ludGVySWQgd2hlbiB0aGUgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgLy8gSWYgdGhpcyBoYXBwZW5zLCBkZWxldGUgb25lIHRyYWNrZWQgcG9pbnRlci4gSWYgdGhlcmUgaXMgbW9yZVxuICAgICAgICAgIC8vIHRoYW4gb25lIHRyYWNrZWQgcG9pbnRlciBmb3IgdGhlIG9sZCB0YXJnZXQsIGl0IHdpbGwgYmUgY2xlYXJlZFxuICAgICAgICAgIC8vIGJ5IHN1YnNlcXVlbnQgUE9JTlRFUlVQIGV2ZW50cyBmcm9tIG90aGVyIHBvaW50ZXJzLlxuICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRUb3VjaGVzX1twb2ludGVySWRdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiB8fFxuICAgICAgZXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFXG4gICAgKSB7XG4gICAgICB0aGlzLnRyYWNrZWRUb3VjaGVzX1tpZF0gPSBldmVudDtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmVQb2ludGVyc18gPSBPYmplY3QudmFsdWVzKHRoaXMudHJhY2tlZFRvdWNoZXNfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVQb2ludGVyVXBfKHBvaW50ZXJFdmVudCkge1xuICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgY29uc3QgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KFxuICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsXG4gICAgICB0aGlzLm1hcF8sXG4gICAgICBwb2ludGVyRXZlbnQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzX1xuICAgICk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcblxuICAgIC8vIFdlIGVtdWxhdGUgY2xpY2sgZXZlbnRzIG9uIGxlZnQgbW91c2UgYnV0dG9uIGNsaWNrLCB0b3VjaCBjb250YWN0LCBhbmQgcGVuXG4gICAgLy8gY29udGFjdC4gaXNNb3VzZUFjdGlvbkJ1dHRvbiByZXR1cm5zIHRydWUgaW4gdGhlc2UgY2FzZXMgKGV2dC5idXR0b24gaXMgc2V0XG4gICAgLy8gdG8gMCkuXG4gICAgLy8gU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXNcbiAgICAvLyBXZSBvbmx5IGZpcmUgY2xpY2ssIHNpbmdsZWNsaWNrLCBhbmQgZG91YmxlY2xpY2sgaWYgbm9ib2R5IGhhcyBjYWxsZWRcbiAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLlxuICAgIGlmIChcbiAgICAgIHRoaXMuZW11bGF0ZUNsaWNrc18gJiZcbiAgICAgICFuZXdFdmVudC5kZWZhdWx0UHJldmVudGVkICYmXG4gICAgICAhdGhpcy5kcmFnZ2luZ18gJiZcbiAgICAgIHRoaXMuaXNNb3VzZUFjdGlvbkJ1dHRvbl8ocG9pbnRlckV2ZW50KVxuICAgICkge1xuICAgICAgdGhpcy5lbXVsYXRlQ2xpY2tfKHRoaXMuZG93bl8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFjdGl2ZVBvaW50ZXJzXy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMuZHJhZ2dpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLmRvd25fID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgbGVmdCBtb3VzZSBidXR0b24gd2FzIHByZXNzZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc01vdXNlQWN0aW9uQnV0dG9uXyhwb2ludGVyRXZlbnQpIHtcbiAgICByZXR1cm4gcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICogZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVQb2ludGVyRG93bl8ocG9pbnRlckV2ZW50KSB7XG4gICAgdGhpcy5lbXVsYXRlQ2xpY2tzXyA9IHRoaXMuYWN0aXZlUG9pbnRlcnNfLmxlbmd0aCA9PT0gMDtcbiAgICB0aGlzLnVwZGF0ZUFjdGl2ZVBvaW50ZXJzXyhwb2ludGVyRXZlbnQpO1xuICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChcbiAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sXG4gICAgICB0aGlzLm1hcF8sXG4gICAgICBwb2ludGVyRXZlbnQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLmFjdGl2ZVBvaW50ZXJzX1xuICAgICk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcblxuICAgIHRoaXMuZG93bl8gPSBuZXcgUG9pbnRlckV2ZW50KHBvaW50ZXJFdmVudC50eXBlLCBwb2ludGVyRXZlbnQpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmRvd25fLCAndGFyZ2V0Jywge1xuICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgdmFsdWU6IHBvaW50ZXJFdmVudC50YXJnZXQsXG4gICAgfSk7XG5cbiAgICBpZiAodGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGRvYyA9IHRoaXMubWFwXy5nZXRPd25lckRvY3VtZW50KCk7XG4gICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLnB1c2goXG4gICAgICAgIGxpc3RlbihcbiAgICAgICAgICBkb2MsXG4gICAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSxcbiAgICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJNb3ZlXyxcbiAgICAgICAgICB0aGlzXG4gICAgICAgICksXG4gICAgICAgIGxpc3Rlbihkb2MsIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLCB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sIHRoaXMpLFxuICAgICAgICAvKiBOb3RlIHRoYXQgdGhlIGxpc3RlbmVyIGZvciBgcG9pbnRlcmNhbmNlbCBpcyBzZXQgdXAgb25cbiAgICAgICAgICogYHBvaW50ZXJFdmVudEhhbmRsZXJfYCBhbmQgbm90IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBsaWtlXG4gICAgICAgICAqIHRoZSBgcG9pbnRlcnVwYCBhbmQgYHBvaW50ZXJtb3ZlYCBsaXN0ZW5lcnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSByZWFzb24gZm9yIHRoaXMgaXMgdGhlIGZvbGxvd2luZzogYFRvdWNoU291cmNlLnZhY3V1bVRvdWNoZXNfKClgXG4gICAgICAgICAqIGlzc3VlcyBgcG9pbnRlcmNhbmNlbGAgZXZlbnRzLCB3aGVuIHRoZXJlIHdhcyBubyBgdG91Y2hlbmRgIGZvciBhXG4gICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gTm93LCBsZXQncyBzYXkgYSBmaXJzdCBgdG91Y2hzdGFydGAgaXMgcmVnaXN0ZXJlZCBvblxuICAgICAgICAgKiBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLiBUaGUgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGlzIHNldCB1cC5cbiAgICAgICAgICogQnV0IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBkb2Vzbid0IGtub3cgYWJvdXQgdGhlIGZpcnN0XG4gICAgICAgICAqIGB0b3VjaHN0YXJ0YC4gSWYgdGhlcmUgaXMgbm8gYHRvdWNoZW5kYCBmb3IgdGhlIGB0b3VjaHN0YXJ0YCwgd2UgY2FuXG4gICAgICAgICAqIG9ubHkgcmVjZWl2ZSBhIGB0b3VjaGNhbmNlbGAgZnJvbSBgcG9pbnRlckV2ZW50SGFuZGxlcl9gLCBiZWNhdXNlIGl0IGlzXG4gICAgICAgICAqIG9ubHkgcmVnaXN0ZXJlZCB0aGVyZS5cbiAgICAgICAgICovXG4gICAgICAgIGxpc3RlbihcbiAgICAgICAgICB0aGlzLmVsZW1lbnRfLFxuICAgICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCxcbiAgICAgICAgICB0aGlzLmhhbmRsZVBvaW50ZXJVcF8sXG4gICAgICAgICAgdGhpc1xuICAgICAgICApXG4gICAgICApO1xuICAgICAgaWYgKHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUgJiYgdGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpICE9PSBkb2MpIHtcbiAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5wdXNoKFxuICAgICAgICAgIGxpc3RlbihcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uZ2V0Um9vdE5vZGUoKSxcbiAgICAgICAgICAgIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQLFxuICAgICAgICAgICAgdGhpcy5oYW5kbGVQb2ludGVyVXBfLFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlUG9pbnRlck1vdmVfKHBvaW50ZXJFdmVudCkge1xuICAgIC8vIEJldHdlZW4gcG9pbnRlcmRvd24gYW5kIHBvaW50ZXJ1cCwgcG9pbnRlcm1vdmUgZXZlbnRzIGFyZSB0cmlnZ2VyZWQuXG4gICAgLy8gVG8gYXZvaWQgYSAnZmFsc2UnIHRvdWNobW92ZSBldmVudCB0byBiZSBkaXNwYXRjaGVkLCB3ZSB0ZXN0IGlmIHRoZSBwb2ludGVyXG4gICAgLy8gbW92ZWQgYSBzaWduaWZpY2FudCBkaXN0YW5jZS5cbiAgICBpZiAodGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSkge1xuICAgICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICAgIHRoaXMuZHJhZ2dpbmdfID0gdHJ1ZTtcbiAgICAgIGNvbnN0IG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChcbiAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRyxcbiAgICAgICAgdGhpcy5tYXBfLFxuICAgICAgICBwb2ludGVyRXZlbnQsXG4gICAgICAgIHRoaXMuZHJhZ2dpbmdfLFxuICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgIHRoaXMuYWN0aXZlUG9pbnRlcnNfXG4gICAgICApO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogV3JhcCBhbmQgcmVsYXkgYSBwb2ludGVybW92ZSBldmVudC5cbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVsYXlNb3ZlRXZlbnRfKHBvaW50ZXJFdmVudCkge1xuICAgIHRoaXMub3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyA9IHBvaW50ZXJFdmVudDtcbiAgICBjb25zdCBkcmFnZ2luZyA9ICEhKHRoaXMuZG93bl8gJiYgdGhpcy5pc01vdmluZ18ocG9pbnRlckV2ZW50KSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IE1hcEJyb3dzZXJFdmVudChcbiAgICAgICAgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSxcbiAgICAgICAgdGhpcy5tYXBfLFxuICAgICAgICBwb2ludGVyRXZlbnQsXG4gICAgICAgIGRyYWdnaW5nXG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbGV4aWJsZSBoYW5kbGluZyBvZiBhIGB0b3VjaC1hY3Rpb246IG5vbmVgIGNzcyBlcXVpdmFsZW50OiBiZWNhdXNlIGNhbGxpbmdcbiAgICogYHByZXZlbnREZWZhdWx0KClgIG9uIGEgYHBvaW50ZXJtb3ZlYCBldmVudCBkb2VzIG5vdCBzdG9wIG5hdGl2ZSBwYWdlIHNjcm9sbGluZ1xuICAgKiBhbmQgem9vbWluZywgd2UgYWxzbyBsaXN0ZW4gZm9yIGB0b3VjaG1vdmVgIGFuZCBjYWxsIGBwcmV2ZW50RGVmYXVsdCgpYCBvbiBpdFxuICAgKiB3aGVuIGFuIGludGVyYWN0aW9uIChjdXJyZW50bHkgYERyYWdQYW5gIGhhbmRsZXMgdGhlIGV2ZW50LlxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVG91Y2hNb3ZlXyhldmVudCkge1xuICAgIC8vIER1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbXBpemVuYmVyZy9lbG0tcGVwL2lzc3Vlcy8yLCBgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfYFxuICAgIC8vIG1heSBub3QgYmUgaW5pdGlhbGl6ZWQgeWV0IHdoZW4gd2UgZ2V0IGhlcmUgb24gYSBwbGF0Zm9ybSB3aXRob3V0IG5hdGl2ZSBwb2ludGVyIGV2ZW50cyxcbiAgICAvLyB3aGVuIGVsbS1wZXAgaXMgdXNlZCBhcyBwb2ludGVyIGV2ZW50cyBwb2x5ZmlsbC5cbiAgICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfO1xuICAgIGlmIChcbiAgICAgICghb3JpZ2luYWxFdmVudCB8fCBvcmlnaW5hbEV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpICYmXG4gICAgICAodHlwZW9mIGV2ZW50LmNhbmNlbGFibGUgIT09ICdib29sZWFuJyB8fCBldmVudC5jYW5jZWxhYmxlID09PSB0cnVlKVxuICAgICkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAqIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBtb3ZpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc01vdmluZ18ocG9pbnRlckV2ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZHJhZ2dpbmdfIHx8XG4gICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WCAtIHRoaXMuZG93bl8uY2xpZW50WCkgPlxuICAgICAgICB0aGlzLm1vdmVUb2xlcmFuY2VfIHx8XG4gICAgICBNYXRoLmFicyhwb2ludGVyRXZlbnQuY2xpZW50WSAtIHRoaXMuZG93bl8uY2xpZW50WSkgPiB0aGlzLm1vdmVUb2xlcmFuY2VfXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHtcbiAgICBpZiAodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMucmVsYXllZExpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmVsZW1lbnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICBFdmVudFR5cGUuVE9VQ0hNT1ZFLFxuICAgICAgdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV9cbiAgICApO1xuXG4gICAgaWYgKHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8pIHtcbiAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xyk7XG4gICAgICB0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuXG4gICAgdGhpcy5lbGVtZW50XyA9IG51bGw7XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBFdmVudFR5cGVcbiAqL1xuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBhZnRlciBhIG1hcCBmcmFtZSBpcyByZW5kZXJlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNwb3N0cmVuZGVyXG4gICAqIEBhcGlcbiAgICovXG4gIFBPU1RSRU5ERVI6ICdwb3N0cmVuZGVyJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gdGhlIG1hcCBzdGFydHMgbW92aW5nLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I21vdmVzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBNT1ZFU1RBUlQ6ICdtb3Zlc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgdGhlIG1hcCBpcyBtb3ZlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNtb3ZlZW5kXG4gICAqIEBhcGlcbiAgICovXG4gIE1PVkVFTkQ6ICdtb3ZlZW5kJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gbG9hZGluZyBvZiBhZGRpdGlvbmFsIG1hcCBkYXRhICh0aWxlcywgaW1hZ2VzLCBmZWF0dXJlcykgc3RhcnRzLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I2xvYWRzdGFydFxuICAgKiBAYXBpXG4gICAqL1xuICBMT0FEU1RBUlQ6ICdsb2Fkc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBsb2FkaW5nIG9mIGFkZGl0aW9uYWwgbWFwIGRhdGEgaGFzIGNvbXBsZXRlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBFdmVudH5NYXBFdmVudCNsb2FkZW5kXG4gICAqIEBhcGlcbiAgICovXG4gIExPQURFTkQ6ICdsb2FkZW5kJyxcbn07XG5cbi8qKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J21vdmVzdGFydCd8J21vdmVlbmQnfCdsb2Fkc3RhcnQnfCdsb2FkZW5kJ30gVHlwZXNcbiAqL1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL01hcFByb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIExBWUVSR1JPVVA6ICdsYXllcmdyb3VwJyxcbiAgU0laRTogJ3NpemUnLFxuICBUQVJHRVQ6ICd0YXJnZXQnLFxuICBWSUVXOiAndmlldycsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZVxuICovXG5pbXBvcnQge2Fzc2VydH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge2NsZWFyfSBmcm9tICcuLi9vYmouanMnO1xuXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBEUk9QID0gSW5maW5pdHk7XG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJpb3JpdHkgcXVldWUuXG4gKlxuICogVGhlIGltcGxlbWVudGF0aW9uIGlzIGluc3BpcmVkIGZyb20gdGhlIENsb3N1cmUgTGlicmFyeSdzIEhlYXAgY2xhc3MgYW5kXG4gKiBQeXRob24ncyBoZWFwcSBtb2R1bGUuXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9zdHJ1Y3RzL2hlYXAuanNcbiAqIGFuZCBodHRwczovL2hnLnB5dGhvbi5vcmcvY3B5dGhvbi9maWxlLzIuNy9MaWIvaGVhcHEucHkuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqL1xuY2xhc3MgUHJpb3JpdHlRdWV1ZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFQpOiBudW1iZXJ9IHByaW9yaXR5RnVuY3Rpb24gUHJpb3JpdHkgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6IHN0cmluZ30ga2V5RnVuY3Rpb24gS2V5IGZ1bmN0aW9uLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpb3JpdHlGdW5jdGlvbiwga2V5RnVuY3Rpb24pIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IG51bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucHJpb3JpdHlGdW5jdGlvbl8gPSBwcmlvcml0eUZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Z1bmN0aW9uKFQpOiBzdHJpbmd9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmtleUZ1bmN0aW9uXyA9IGtleUZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0FycmF5PFQ+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50c18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5wcmlvcml0aWVzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucXVldWVkRWxlbWVudHNfID0ge307XG4gIH1cblxuICAvKipcbiAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAqL1xuICBjbGVhcigpIHtcbiAgICB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPSAwO1xuICAgIHRoaXMucHJpb3JpdGllc18ubGVuZ3RoID0gMDtcbiAgICBjbGVhcih0aGlzLnF1ZXVlZEVsZW1lbnRzXyk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuZCByZXR1cm4gdGhlIGhpZ2hlc3QtcHJpb3JpdHkgZWxlbWVudC4gTyhsb2cgTikuXG4gICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAqL1xuICBkZXF1ZXVlKCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzWzBdO1xuICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgZWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICAgIHByaW9yaXRpZXMubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudHNbMF0gPSBlbGVtZW50cy5wb3AoKTtcbiAgICAgIHByaW9yaXRpZXNbMF0gPSBwcmlvcml0aWVzLnBvcCgpO1xuICAgICAgdGhpcy5zaWZ0VXBfKDApO1xuICAgIH1cbiAgICBjb25zdCBlbGVtZW50S2V5ID0gdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCk7XG4gICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW2VsZW1lbnRLZXldO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEVucXVldWUgYW4gZWxlbWVudC4gTyhsb2cgTikuXG4gICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICAgKi9cbiAgZW5xdWV1ZShlbGVtZW50KSB7XG4gICAgYXNzZXJ0KCEodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c18pLCAzMSk7IC8vIFRyaWVkIHRvIGVucXVldWUgYW4gYGVsZW1lbnRgIHRoYXQgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHF1ZXVlXG4gICAgY29uc3QgcHJpb3JpdHkgPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fKGVsZW1lbnQpO1xuICAgIGlmIChwcmlvcml0eSAhPSBEUk9QKSB7XG4gICAgICB0aGlzLmVsZW1lbnRzXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgdGhpcy5wcmlvcml0aWVzXy5wdXNoKHByaW9yaXR5KTtcbiAgICAgIHRoaXMucXVldWVkRWxlbWVudHNfW3RoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpXSA9IHRydWU7XG4gICAgICB0aGlzLnNpZnREb3duXygwLCB0aGlzLmVsZW1lbnRzXy5sZW5ndGggLSAxKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICovXG4gIGdldENvdW50KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGxlZnQgY2hpbGQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgbGVmdCBjaGlsZCBmb3IuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBsZWZ0IGNoaWxkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TGVmdENoaWxkSW5kZXhfKGluZGV4KSB7XG4gICAgcmV0dXJuIGluZGV4ICogMiArIDE7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIHJpZ2h0IGNoaWxkIGZvci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0UmlnaHRDaGlsZEluZGV4XyhpbmRleCkge1xuICAgIHJldHVybiBpbmRleCAqIDIgKyAyO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGluZGV4IG9mIHRoZSBwYXJlbnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcGFyZW50IGZvci5cbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHBhcmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBhcmVudEluZGV4XyhpbmRleCkge1xuICAgIHJldHVybiAoaW5kZXggLSAxKSA+PiAxO1xuICB9XG5cbiAgLyoqXG4gICAqIE1ha2UgdGhpcyBhIGhlYXAuIE8oTikuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoZWFwaWZ5XygpIHtcbiAgICBsZXQgaTtcbiAgICBmb3IgKGkgPSAodGhpcy5lbGVtZW50c18ubGVuZ3RoID4+IDEpIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMuc2lmdFVwXyhpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZW1wdHkuXG4gICAqL1xuICBpc0VtcHR5KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPT09IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGtleSBxdWV1ZWQuXG4gICAqL1xuICBpc0tleVF1ZXVlZChrZXkpIHtcbiAgICByZXR1cm4ga2V5IGluIHRoaXMucXVldWVkRWxlbWVudHNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VH0gZWxlbWVudCBFbGVtZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBxdWV1ZWQuXG4gICAqL1xuICBpc1F1ZXVlZChlbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuaXNLZXlRdWV1ZWQodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSBkb3duLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2lmdFVwXyhpbmRleCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgY29uc3QgY291bnQgPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICBjb25zdCBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSBpbmRleDtcblxuICAgIHdoaWxlIChpbmRleCA8IGNvdW50ID4+IDEpIHtcbiAgICAgIGNvbnN0IGxJbmRleCA9IHRoaXMuZ2V0TGVmdENoaWxkSW5kZXhfKGluZGV4KTtcbiAgICAgIGNvbnN0IHJJbmRleCA9IHRoaXMuZ2V0UmlnaHRDaGlsZEluZGV4XyhpbmRleCk7XG5cbiAgICAgIGNvbnN0IHNtYWxsZXJDaGlsZEluZGV4ID1cbiAgICAgICAgckluZGV4IDwgY291bnQgJiYgcHJpb3JpdGllc1tySW5kZXhdIDwgcHJpb3JpdGllc1tsSW5kZXhdXG4gICAgICAgICAgPyBySW5kZXhcbiAgICAgICAgICA6IGxJbmRleDtcblxuICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudHNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3NtYWxsZXJDaGlsZEluZGV4XTtcbiAgICAgIGluZGV4ID0gc21hbGxlckNoaWxkSW5kZXg7XG4gICAgfVxuXG4gICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICAgIHRoaXMuc2lmdERvd25fKHN0YXJ0SW5kZXgsIGluZGV4KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleCBUaGUgaW5kZXggb2YgdGhlIHJvb3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSB1cC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNpZnREb3duXyhzdGFydEluZGV4LCBpbmRleCkge1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICBjb25zdCBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuXG4gICAgd2hpbGUgKGluZGV4ID4gc3RhcnRJbmRleCkge1xuICAgICAgY29uc3QgcGFyZW50SW5kZXggPSB0aGlzLmdldFBhcmVudEluZGV4XyhpbmRleCk7XG4gICAgICBpZiAocHJpb3JpdGllc1twYXJlbnRJbmRleF0gPiBwcmlvcml0eSkge1xuICAgICAgICBlbGVtZW50c1tpbmRleF0gPSBlbGVtZW50c1twYXJlbnRJbmRleF07XG4gICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1twYXJlbnRJbmRleF07XG4gICAgICAgIGluZGV4ID0gcGFyZW50SW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICBwcmlvcml0aWVzW2luZGV4XSA9IHByaW9yaXR5O1xuICB9XG5cbiAgLyoqXG4gICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgKi9cbiAgcmVwcmlvcml0aXplKCkge1xuICAgIGNvbnN0IHByaW9yaXR5RnVuY3Rpb24gPSB0aGlzLnByaW9yaXR5RnVuY3Rpb25fO1xuICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgY29uc3QgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBjb25zdCBuID0gZWxlbWVudHMubGVuZ3RoO1xuICAgIGxldCBlbGVtZW50LCBpLCBwcmlvcml0eTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICBlbGVtZW50ID0gZWxlbWVudHNbaV07XG4gICAgICBwcmlvcml0eSA9IHByaW9yaXR5RnVuY3Rpb24oZWxlbWVudCk7XG4gICAgICBpZiAocHJpb3JpdHkgPT0gRFJPUCkge1xuICAgICAgICBkZWxldGUgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICAgICAgZWxlbWVudHNbaW5kZXgrK10gPSBlbGVtZW50O1xuICAgICAgfVxuICAgIH1cbiAgICBlbGVtZW50cy5sZW5ndGggPSBpbmRleDtcbiAgICBwcmlvcml0aWVzLmxlbmd0aCA9IGluZGV4O1xuICAgIHRoaXMuaGVhcGlmeV8oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQcmlvcml0eVF1ZXVlO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVRdWV1ZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUHJpb3JpdHlRdWV1ZSwge0RST1B9IGZyb20gJy4vc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdCwgc3RyaW5nLCBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSwgbnVtYmVyKTogbnVtYmVyfSBQcmlvcml0eUZ1bmN0aW9uXG4gKi9cblxuY2xhc3MgVGlsZVF1ZXVlIGV4dGVuZHMgUHJpb3JpdHlRdWV1ZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1ByaW9yaXR5RnVuY3Rpb259IHRpbGVQcmlvcml0eUZ1bmN0aW9uIFRpbGUgcHJpb3JpdHkgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogP30gdGlsZUNoYW5nZUNhbGxiYWNrIEZ1bmN0aW9uIGNhbGxlZCBvbiBlYWNoIHRpbGUgY2hhbmdlIGV2ZW50LlxuICAgKi9cbiAgY29uc3RydWN0b3IodGlsZVByaW9yaXR5RnVuY3Rpb24sIHRpbGVDaGFuZ2VDYWxsYmFjaykge1xuICAgIHN1cGVyKFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFByaW9yaXR5LlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gdGlsZVByaW9yaXR5RnVuY3Rpb24uYXBwbHkobnVsbCwgZWxlbWVudCk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge0FycmF5fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChlbGVtZW50WzBdKS5nZXRLZXkoKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgdGhpcy5ib3VuZEhhbmRsZVRpbGVDaGFuZ2VfID0gdGhpcy5oYW5kbGVUaWxlQ2hhbmdlLmJpbmQodGhpcyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtmdW5jdGlvbigpOiA/fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNoYW5nZUNhbGxiYWNrXyA9IHRpbGVDaGFuZ2VDYWxsYmFjaztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVzTG9hZGluZ18gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsYm9vbGVhbj59XG4gICAgICovXG4gICAgdGhpcy50aWxlc0xvYWRpbmdLZXlzXyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAgICovXG4gIGVucXVldWUoZWxlbWVudCkge1xuICAgIGNvbnN0IGFkZGVkID0gc3VwZXIuZW5xdWV1ZShlbGVtZW50KTtcbiAgICBpZiAoYWRkZWQpIHtcbiAgICAgIGNvbnN0IHRpbGUgPSBlbGVtZW50WzBdO1xuICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgfVxuICAgIHJldHVybiBhZGRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE51bWJlciBvZiB0aWxlcyBsb2FkaW5nLlxuICAgKi9cbiAgZ2V0VGlsZXNMb2FkaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRpbGVzTG9hZGluZ187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgaGFuZGxlVGlsZUNoYW5nZShldmVudCkge1xuICAgIGNvbnN0IHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICBjb25zdCBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICBpZiAoXG4gICAgICBzdGF0ZSA9PT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgc3RhdGUgPT09IFRpbGVTdGF0ZS5FTVBUWVxuICAgICkge1xuICAgICAgaWYgKHN0YXRlICE9PSBUaWxlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgdGlsZS5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyk7XG4gICAgICB9XG4gICAgICBjb25zdCB0aWxlS2V5ID0gdGlsZS5nZXRLZXkoKTtcbiAgICAgIGlmICh0aWxlS2V5IGluIHRoaXMudGlsZXNMb2FkaW5nS2V5c18pIHtcbiAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV07XG4gICAgICAgIC0tdGhpcy50aWxlc0xvYWRpbmdfO1xuICAgICAgfVxuICAgICAgdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUb3RhbExvYWRpbmcgTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZCBzaW11bHRhbmVvdXNseS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heE5ld0xvYWRzIE1heGltdW0gbnVtYmVyIG9mIG5ldyB0aWxlcyB0byBsb2FkLlxuICAgKi9cbiAgbG9hZE1vcmVUaWxlcyhtYXhUb3RhbExvYWRpbmcsIG1heE5ld0xvYWRzKSB7XG4gICAgbGV0IG5ld0xvYWRzID0gMDtcbiAgICBsZXQgc3RhdGUsIHRpbGUsIHRpbGVLZXk7XG4gICAgd2hpbGUgKFxuICAgICAgdGhpcy50aWxlc0xvYWRpbmdfIDwgbWF4VG90YWxMb2FkaW5nICYmXG4gICAgICBuZXdMb2FkcyA8IG1heE5ld0xvYWRzICYmXG4gICAgICB0aGlzLmdldENvdW50KCkgPiAwXG4gICAgKSB7XG4gICAgICB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZGVxdWV1ZSgpWzBdKTtcbiAgICAgIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5JRExFICYmICEodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSkge1xuICAgICAgICB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldID0gdHJ1ZTtcbiAgICAgICAgKyt0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgICAgICsrbmV3TG9hZHM7XG4gICAgICAgIHRpbGUubG9hZCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUaWxlUXVldWU7XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoJy4vTWFwLmpzJykuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlU291cmNlS2V5IFRpbGUgc291cmNlIGtleS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRpbGVDZW50ZXIgVGlsZSBjZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHByaW9yaXR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGlsZVByaW9yaXR5KFxuICBmcmFtZVN0YXRlLFxuICB0aWxlLFxuICB0aWxlU291cmNlS2V5LFxuICB0aWxlQ2VudGVyLFxuICB0aWxlUmVzb2x1dGlvblxuKSB7XG4gIC8vIEZpbHRlciBvdXQgdGlsZXMgYXQgaGlnaGVyIHpvb20gbGV2ZWxzIHRoYW4gdGhlIGN1cnJlbnQgem9vbSBsZXZlbCwgb3IgdGhhdFxuICAvLyBhcmUgb3V0c2lkZSB0aGUgdmlzaWJsZSBleHRlbnQuXG4gIGlmICghZnJhbWVTdGF0ZSB8fCAhKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICByZXR1cm4gRFJPUDtcbiAgfVxuICBpZiAoIWZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV1bdGlsZS5nZXRLZXkoKV0pIHtcbiAgICByZXR1cm4gRFJPUDtcbiAgfVxuICAvLyBQcmlvcml0aXplIHRoZSBoaWdoZXN0IHpvb20gbGV2ZWwgdGlsZXMgY2xvc2VzdCB0byB0aGUgZm9jdXMuXG4gIC8vIFRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyBhcmUgcHJpb3JpdGl6ZWQgdXNpbmcgTWF0aC5sb2codGlsZVJlc29sdXRpb24pLlxuICAvLyBXaXRoaW4gYSB6b29tIGxldmVsLCB0aWxlcyBhcmUgcHJpb3JpdGl6ZWQgYnkgdGhlIGRpc3RhbmNlIGluIHBpeGVscyBiZXR3ZWVuXG4gIC8vIHRoZSBjZW50ZXIgb2YgdGhlIHRpbGUgYW5kIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0LiAgVGhlIGZhY3RvciBvZiA2NTUzNlxuICAvLyBtZWFucyB0aGF0IHRoZSBwcmlvcml0aXphdGlvbiBzaG91bGQgYmVoYXZlIGFzIGRlc2lyZWQgZm9yIHRpbGVzIHVwIHRvXG4gIC8vIDY1NTM2ICogTWF0aC5sb2coMikgPSA0NTQyNiBwaXhlbHMgZnJvbSB0aGUgZm9jdXMuXG4gIGNvbnN0IGNlbnRlciA9IGZyYW1lU3RhdGUudmlld1N0YXRlLmNlbnRlcjtcbiAgY29uc3QgZGVsdGFYID0gdGlsZUNlbnRlclswXSAtIGNlbnRlclswXTtcbiAgY29uc3QgZGVsdGFZID0gdGlsZUNlbnRlclsxXSAtIGNlbnRlclsxXTtcbiAgcmV0dXJuIChcbiAgICA2NTUzNiAqIE1hdGgubG9nKHRpbGVSZXNvbHV0aW9uKSArXG4gICAgTWF0aC5zcXJ0KGRlbHRhWCAqIGRlbHRhWCArIGRlbHRhWSAqIGRlbHRhWSkgLyB0aWxlUmVzb2x1dGlvblxuICApO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQ29udHJvbFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IHtWT0lEfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtsaXN0ZW4sIHVubGlzdGVuQnlLZXl9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQge3JlbW92ZU5vZGV9IGZyb20gJy4uL2RvbS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudH0gW2VsZW1lbnRdIFRoZSBlbGVtZW50IGlzIHRoZSBjb250cm9sJ3NcbiAqIGNvbnRhaW5lciBlbGVtZW50LiBUaGlzIG9ubHkgbmVlZHMgdG8gYmUgc3BlY2lmaWVkIGlmIHlvdSdyZSBkZXZlbG9waW5nXG4gKiBhIGN1c3RvbSBjb250cm9sLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50XG4gKiB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCBpcyBhIHZpc2libGUgd2lkZ2V0IHdpdGggYSBET00gZWxlbWVudCBpbiBhIGZpeGVkIHBvc2l0aW9uIG9uIHRoZVxuICogc2NyZWVuLiBUaGV5IGNhbiBpbnZvbHZlIHVzZXIgaW5wdXQgKGJ1dHRvbnMpLCBvciBiZSBpbmZvcm1hdGlvbmFsIG9ubHk7XG4gKiB0aGUgcG9zaXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyBDU1MuIEJ5IGRlZmF1bHQgdGhlc2UgYXJlIHBsYWNlZCBpbiB0aGVcbiAqIGNvbnRhaW5lciB3aXRoIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAsIGJ1dCBjYW4gdXNlXG4gKiBhbnkgb3V0c2lkZSBET00gZWxlbWVudC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBjb250cm9scy4gWW91IGNhbiB1c2UgaXQgZm9yIHNpbXBsZSBjdXN0b21cbiAqIGNvbnRyb2xzIGJ5IGNyZWF0aW5nIHRoZSBlbGVtZW50IHdpdGggbGlzdGVuZXJzLCBjcmVhdGluZyBhbiBpbnN0YW5jZTpcbiAqIGBgYGpzXG4gKiBjb25zdCBteUNvbnRyb2wgPSBuZXcgQ29udHJvbCh7ZWxlbWVudDogbXlFbGVtZW50fSk7XG4gKiBgYGBcbiAqIGFuZCB0aGVuIGFkZGluZyB0aGlzIHRvIHRoZSBtYXAuXG4gKlxuICogVGhlIG1haW4gYWR2YW50YWdlIG9mIGhhdmluZyB0aGlzIGFzIGEgY29udHJvbCByYXRoZXIgdGhhbiBhIHNpbXBsZSBzZXBhcmF0ZVxuICogRE9NIGVsZW1lbnQgaXMgdGhhdCBwcmV2ZW50aW5nIHByb3BhZ2F0aW9uIGlzIGhhbmRsZWQgZm9yIHlvdS4gQ29udHJvbHNcbiAqIHdpbGwgYWxzbyBiZSBvYmplY3RzIGluIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LCBzbyB5b3UgY2FuIHVzZSB0aGVpciBtZXRob2RzLlxuICpcbiAqIFlvdSBjYW4gYWxzbyBleHRlbmQgdGhpcyBiYXNlIGZvciB5b3VyIG93biBjb250cm9sIGNsYXNzLiBTZWVcbiAqIGV4YW1wbGVzL2N1c3RvbS1jb250cm9scyBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdG8gZG8gdGhpcy5cbiAqXG4gKiBAYXBpXG4gKi9cbmNsYXNzIENvbnRyb2wgZXh0ZW5kcyBCYXNlT2JqZWN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBDb250cm9sIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IGVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XG4gICAgaWYgKGVsZW1lbnQgJiYgIW9wdGlvbnMudGFyZ2V0ICYmICFlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQgPyBlbGVtZW50IDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLmxpc3RlbmVyS2V5cyA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgdGhpcy5zZXRUYXJnZXQob3B0aW9ucy50YXJnZXQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cC5cbiAgICovXG4gIGRpc3Bvc2VJbnRlcm5hbCgpIHtcbiAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY29udHJvbC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gTWFwLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRNYXAoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICogUGFzcyBgbnVsbGAgdG8ganVzdCByZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSB0aGUgY3VycmVudCBtYXAuXG4gICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgKiB0aGUgbWFwIGhlcmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gbWFwIE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0TWFwKG1hcCkge1xuICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmxpc3RlbmVyS2V5c1tpXSk7XG4gICAgfVxuICAgIHRoaXMubGlzdGVuZXJLZXlzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5tYXBfID0gbWFwO1xuICAgIGlmIChtYXApIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMudGFyZ2V0X1xuICAgICAgICA/IHRoaXMudGFyZ2V0X1xuICAgICAgICA6IG1hcC5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50KCk7XG4gICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgIGlmICh0aGlzLnJlbmRlciAhPT0gVk9JRCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKFxuICAgICAgICAgIGxpc3RlbihtYXAsIE1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLnJlbmRlciwgdGhpcylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVycyB0aGUgY29udHJvbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbmRlcihtYXBFdmVudCkge31cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHNldCBhIHRhcmdldCBlbGVtZW50IGZvciB0aGUgY29udHJvbC4gSXQgaGFzIG5vXG4gICAqIGVmZmVjdCBpZiBpdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGNvbnRyb2wgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIG1hcCAoaS5lLlxuICAgKiBhZnRlciBgc2V0TWFwYCBpcyBjYWxsZWQgb24gdGhlIGNvbnRyb2wpLiBJZiBubyBgdGFyZ2V0YCBpcyBzZXQgaW4gdGhlXG4gICAqIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSBjb250cm9sIGNvbnN0cnVjdG9yIGFuZCBpZiBgc2V0VGFyZ2V0YCBpcyBub3QgY2FsbGVkXG4gICAqIHRoZW4gdGhlIGNvbnRyb2wgaXMgYWRkZWQgdG8gdGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gdGFyZ2V0IFRhcmdldC5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGFyZ2V0KHRhcmdldCkge1xuICAgIHRoaXMudGFyZ2V0XyA9XG4gICAgICB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkgOiB0YXJnZXQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udHJvbDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0F0dHJpYnV0aW9uXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtDTEFTU19DT0xMQVBTRUQsIENMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7ZXF1YWxzfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQge3JlbW92ZUNoaWxkcmVuLCByZXBsYWNlTm9kZX0gZnJvbSAnLi4vZG9tLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtYXR0cmlidXRpb24nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdVxuICogd2FudCB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAnc1xuICogdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb2xsYXBzaWJsZV0gU3BlY2lmeSBpZiBhdHRyaWJ1dGlvbnMgY2FuXG4gKiBiZSBjb2xsYXBzZWQuIElmIG5vdCBzcGVjaWZpZWQsIHNvdXJjZXMgY29udHJvbCB0aGlzIGJlaGF2aW9yIHdpdGggdGhlaXJcbiAqIGBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZWAgc2V0dGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNlZD10cnVlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBzaG91bGRcbiAqIGJlIGNvbGxhcHNlZCBhdCBzdGFydHVwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXBMYWJlbD0nQXR0cmlidXRpb25zJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtsYWJlbD0naSddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2V4cGFuZENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWV4cGFuZCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtjb2xsYXBzZUxhYmVsPSfigLonXSBUZXh0IGxhYmVsIHRvIHVzZVxuICogZm9yIHRoZSBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NvbGxhcHNlQ2xhc3NOYW1lPWNsYXNzTmFtZSArICctY29sbGFwc2UnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlXG4gKiBleHBhbmRlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlblxuICogdGhlIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRyb2wgdG8gc2hvdyBhbGwgdGhlIGF0dHJpYnV0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGxheWVyIHNvdXJjZXNcbiAqIGluIHRoZSBtYXAuIFRoaXMgY29udHJvbCBpcyBvbmUgb2YgdGhlIGRlZmF1bHQgY29udHJvbHMgaW5jbHVkZWQgaW4gbWFwcy5cbiAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBzaG93IGluIHRoZSBib3R0b20gcmlnaHQgcG9ydGlvbiBvZiB0aGUgbWFwLCBidXQgdGhpcyBjYW5cbiAqIGJlIGNoYW5nZWQgYnkgdXNpbmcgYSBjc3Mgc2VsZWN0b3IgZm9yIGAub2wtYXR0cmlidXRpb25gLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgQXR0cmlidXRpb24gZXh0ZW5kcyBDb250cm9sIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIEF0dHJpYnV0aW9uIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBzdXBlcih7XG4gICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy51bEVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb2xsYXBzZWRfID1cbiAgICAgIG9wdGlvbnMuY29sbGFwc2VkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxhcHNlZCA6IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMudXNlckNvbGxhcHNlZF8gPSB0aGlzLmNvbGxhcHNlZF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMub3ZlcnJpZGVDb2xsYXBzaWJsZV8gPSBvcHRpb25zLmNvbGxhcHNpYmxlICE9PSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuY29sbGFwc2libGVfID1cbiAgICAgIG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2libGUgOiB0cnVlO1xuXG4gICAgaWYgKCF0aGlzLmNvbGxhcHNpYmxlXykge1xuICAgICAgdGhpcy5jb2xsYXBzZWRfID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgY2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1hdHRyaWJ1dGlvbic7XG5cbiAgICBjb25zdCB0aXBMYWJlbCA9XG4gICAgICBvcHRpb25zLnRpcExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpcExhYmVsIDogJ0F0dHJpYnV0aW9ucyc7XG5cbiAgICBjb25zdCBleHBhbmRDbGFzc05hbWUgPVxuICAgICAgb3B0aW9ucy5leHBhbmRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuZXhwYW5kQ2xhc3NOYW1lXG4gICAgICAgIDogY2xhc3NOYW1lICsgJy1leHBhbmQnO1xuXG4gICAgY29uc3QgY29sbGFwc2VMYWJlbCA9XG4gICAgICBvcHRpb25zLmNvbGxhcHNlTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2VMYWJlbCA6ICdcXHUyMDNBJztcblxuICAgIGNvbnN0IGNvbGxhcHNlQ2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWVcbiAgICAgICAgOiBjbGFzc05hbWUgKyAnLWNvbGxhcHNlJztcblxuICAgIGlmICh0eXBlb2YgY29sbGFwc2VMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAqL1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgIHRoaXMuY29sbGFwc2VMYWJlbF8udGV4dENvbnRlbnQgPSBjb2xsYXBzZUxhYmVsO1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXy5jbGFzc05hbWUgPSBjb2xsYXBzZUNsYXNzTmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGNvbGxhcHNlTGFiZWw7XG4gICAgfVxuXG4gICAgY29uc3QgbGFiZWwgPSBvcHRpb25zLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxhYmVsIDogJ2knO1xuXG4gICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8qKlxuICAgICAgICogQHByaXZhdGVcbiAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAqL1xuICAgICAgdGhpcy5sYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICB0aGlzLmxhYmVsXy50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gZXhwYW5kQ2xhc3NOYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGl2ZUxhYmVsID1cbiAgICAgIHRoaXMuY29sbGFwc2libGVfICYmICF0aGlzLmNvbGxhcHNlZF8gPyB0aGlzLmNvbGxhcHNlTGFiZWxfIDogdGhpcy5sYWJlbF87XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgKi9cbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbl8uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIXRoaXMuY29sbGFwc2VkXykpO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy50aXRsZSA9IHRpcExhYmVsO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5hcHBlbmRDaGlsZChhY3RpdmVMYWJlbCk7XG5cbiAgICB0aGlzLnRvZ2dsZUJ1dHRvbl8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIEV2ZW50VHlwZS5DTElDSyxcbiAgICAgIHRoaXMuaGFuZGxlQ2xpY2tfLmJpbmQodGhpcyksXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICBjb25zdCBjc3NDbGFzc2VzID1cbiAgICAgIGNsYXNzTmFtZSArXG4gICAgICAnICcgK1xuICAgICAgQ0xBU1NfVU5TRUxFQ1RBQkxFICtcbiAgICAgICcgJyArXG4gICAgICBDTEFTU19DT05UUk9MICtcbiAgICAgICh0aGlzLmNvbGxhcHNlZF8gJiYgdGhpcy5jb2xsYXBzaWJsZV8gPyAnICcgKyBDTEFTU19DT0xMQVBTRUQgOiAnJykgK1xuICAgICAgKHRoaXMuY29sbGFwc2libGVfID8gJycgOiAnIG9sLXVuY29sbGFwc2libGUnKTtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMudG9nZ2xlQnV0dG9uXyk7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnVsRWxlbWVudF8pO1xuXG4gICAgLyoqXG4gICAgICogQSBsaXN0IG9mIGN1cnJlbnRseSByZW5kZXJlZCByZXNvbHV0aW9ucy5cbiAgICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gW107XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ29sbGVjdCBhIGxpc3Qgb2YgdmlzaWJsZSBhdHRyaWJ1dGlvbnMgYW5kIHNldCB0aGUgY29sbGFwc2libGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEF0dHJpYnV0aW9ucy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpIHtcbiAgICBjb25zdCB2aXNpYmxlQXR0cmlidXRpb25zID0gQXJyYXkuZnJvbShcbiAgICAgIG5ldyBTZXQoXG4gICAgICAgIHRoaXMuZ2V0TWFwKClcbiAgICAgICAgICAuZ2V0QWxsTGF5ZXJzKClcbiAgICAgICAgICAuZmxhdE1hcCgobGF5ZXIpID0+IGxheWVyLmdldEF0dHJpYnV0aW9ucyhmcmFtZVN0YXRlKSlcbiAgICAgIClcbiAgICApO1xuXG4gICAgY29uc3QgY29sbGFwc2libGUgPSAhdGhpcy5nZXRNYXAoKVxuICAgICAgLmdldEFsbExheWVycygpXG4gICAgICAuc29tZShcbiAgICAgICAgKGxheWVyKSA9PlxuICAgICAgICAgIGxheWVyLmdldFNvdXJjZSgpICYmXG4gICAgICAgICAgbGF5ZXIuZ2V0U291cmNlKCkuZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUoKSA9PT0gZmFsc2VcbiAgICAgICk7XG4gICAgaWYgKCF0aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfKSB7XG4gICAgICB0aGlzLnNldENvbGxhcHNpYmxlKGNvbGxhcHNpYmxlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZpc2libGVBdHRyaWJ1dGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAqL1xuICB1cGRhdGVFbGVtZW50XyhmcmFtZVN0YXRlKSB7XG4gICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhdHRyaWJ1dGlvbnMgPSB0aGlzLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpO1xuXG4gICAgY29uc3QgdmlzaWJsZSA9IGF0dHJpYnV0aW9ucy5sZW5ndGggPiAwO1xuICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8gIT0gdmlzaWJsZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB2aXNpYmxlID8gJycgOiAnbm9uZSc7XG4gICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB2aXNpYmxlO1xuICAgIH1cblxuICAgIGlmIChlcXVhbHMoYXR0cmlidXRpb25zLCB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLnVsRWxlbWVudF8pO1xuXG4gICAgLy8gYXBwZW5kIHRoZSBhdHRyaWJ1dGlvbnNcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICBlbGVtZW50LmlubmVySFRNTCA9IGF0dHJpYnV0aW9uc1tpXTtcbiAgICAgIHRoaXMudWxFbGVtZW50Xy5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXyA9IGF0dHJpYnV0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNsaWNrXyhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgdGhpcy51c2VyQ29sbGFwc2VkXyA9IHRoaXMuY29sbGFwc2VkXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVG9nZ2xlXygpIHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShDTEFTU19DT0xMQVBTRUQpO1xuICAgIGlmICh0aGlzLmNvbGxhcHNlZF8pIHtcbiAgICAgIHJlcGxhY2VOb2RlKHRoaXMuY29sbGFwc2VMYWJlbF8sIHRoaXMubGFiZWxfKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVwbGFjZU5vZGUodGhpcy5sYWJlbF8sIHRoaXMuY29sbGFwc2VMYWJlbF8pO1xuICAgIH1cbiAgICB0aGlzLmNvbGxhcHNlZF8gPSAhdGhpcy5jb2xsYXBzZWRfO1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIXRoaXMuY29sbGFwc2VkXykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGF0dHJpYnV0aW9uIGlzIGNvbGxhcHNpYmxlLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRDb2xsYXBzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2xsYXBzaWJsZV87XG4gIH1cblxuICAvKipcbiAgICogU2V0IHdoZXRoZXIgdGhlIGF0dHJpYnV0aW9uIHNob3VsZCBiZSBjb2xsYXBzaWJsZS5cbiAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzaWJsZSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldENvbGxhcHNpYmxlKGNvbGxhcHNpYmxlKSB7XG4gICAgaWYgKHRoaXMuY29sbGFwc2libGVfID09PSBjb2xsYXBzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNvbGxhcHNpYmxlXyA9IGNvbGxhcHNpYmxlO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgaWYgKHRoaXMudXNlckNvbGxhcHNlZF8pIHtcbiAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xsYXBzZSBvciBleHBhbmQgdGhlIGF0dHJpYnV0aW9uIGFjY29yZGluZyB0byB0aGUgcGFzc2VkIHBhcmFtZXRlci4gV2lsbFxuICAgKiBub3QgZG8gYW55dGhpbmcgaWYgdGhlIGF0dHJpYnV0aW9uIGlzbid0IGNvbGxhcHNpYmxlIG9yIGlmIHRoZSBjdXJyZW50XG4gICAqIGNvbGxhcHNlZCBzdGF0ZSBpcyBhbHJlYWR5IHRoZSBvbmUgcmVxdWVzdGVkLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNlZCBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2VkLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRDb2xsYXBzZWQoY29sbGFwc2VkKSB7XG4gICAgdGhpcy51c2VyQ29sbGFwc2VkXyA9IGNvbGxhcHNlZDtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2libGVfIHx8IHRoaXMuY29sbGFwc2VkXyA9PT0gY29sbGFwc2VkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiBgdHJ1ZWAgd2hlbiB0aGUgYXR0cmlidXRpb24gaXMgY3VycmVudGx5IGNvbGxhcHNlZCBvciBgZmFsc2VgXG4gICAqIG90aGVyd2lzZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNlZC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Q29sbGFwc2VkKCkge1xuICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZF87XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBhdHRyaWJ1dGlvbiBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICByZW5kZXIobWFwRXZlbnQpIHtcbiAgICB0aGlzLnVwZGF0ZUVsZW1lbnRfKG1hcEV2ZW50LmZyYW1lU3RhdGUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF0dHJpYnV0aW9uO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvUm90YXRlXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHtDTEFTU19DT05UUk9MLCBDTEFTU19ISURERU4sIENMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtcm90YXRlJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2xhYmVsPSfih6cnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J1Jlc2V0IHJvdGF0aW9uJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb21wYXNzQ2xhc3NOYW1lPSdvbC1jb21wYXNzJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSBjb21wYXNzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvSGlkZT10cnVlXSBIaWRlIHRoZSBjb250cm9sIHdoZW4gcm90YXRpb24gaXMgMC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgc2hvdWxkXG4gKiBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTp2b2lkfSBbcmVzZXROb3J0aF0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgaXMgY2xpY2tlZC5cbiAqIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBgcmVzZXROb3J0aGAuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGJ1dHRvbiBjb250cm9sIHRvIHJlc2V0IHJvdGF0aW9uIHRvIDAuXG4gKiBUbyBzdHlsZSB0aGlzIGNvbnRyb2wgdXNlIGNzcyBzZWxlY3RvciBgLm9sLXJvdGF0ZWAuIEEgYC5vbC1oaWRkZW5gIGNzc1xuICogc2VsZWN0b3IgaXMgYWRkZWQgdG8gdGhlIGJ1dHRvbiB3aGVuIHRoZSByb3RhdGlvbiBpcyAwLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgUm90YXRlIGV4dGVuZHMgQ29udHJvbCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBSb3RhdGUgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIHN1cGVyKHtcbiAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgfSk7XG5cbiAgICBjb25zdCBjbGFzc05hbWUgPVxuICAgICAgb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLXJvdGF0ZSc7XG5cbiAgICBjb25zdCBsYWJlbCA9IG9wdGlvbnMubGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGFiZWwgOiAnXFx1MjFFNyc7XG5cbiAgICBjb25zdCBjb21wYXNzQ2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY29tcGFzc0NsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5jb21wYXNzQ2xhc3NOYW1lXG4gICAgICAgIDogJ29sLWNvbXBhc3MnO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5sYWJlbF8gPSBudWxsO1xuXG4gICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMubGFiZWxfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gY29tcGFzc0NsYXNzTmFtZTtcbiAgICAgIHRoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgICB0aGlzLmxhYmVsXy5jbGFzc0xpc3QuYWRkKGNvbXBhc3NDbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGNvbnN0IHRpcExhYmVsID0gb3B0aW9ucy50aXBMYWJlbCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnUmVzZXQgcm90YXRpb24nO1xuXG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgYnV0dG9uLmNsYXNzTmFtZSA9IGNsYXNzTmFtZSArICctcmVzZXQnO1xuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgYnV0dG9uLnRpdGxlID0gdGlwTGFiZWw7XG4gICAgYnV0dG9uLmFwcGVuZENoaWxkKHRoaXMubGFiZWxfKTtcblxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgRXZlbnRUeXBlLkNMSUNLLFxuICAgICAgdGhpcy5oYW5kbGVDbGlja18uYmluZCh0aGlzKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGNvbnN0IGNzc0NsYXNzZXMgPVxuICAgICAgY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGJ1dHRvbik7XG5cbiAgICB0aGlzLmNhbGxSZXNldE5vcnRoXyA9IG9wdGlvbnMucmVzZXROb3J0aCA/IG9wdGlvbnMucmVzZXROb3J0aCA6IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuYXV0b0hpZGVfID0gb3B0aW9ucy5hdXRvSGlkZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRvSGlkZSA6IHRydWU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpb25fID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRoaXMuYXV0b0hpZGVfKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUNsaWNrXyhldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKHRoaXMuY2FsbFJlc2V0Tm9ydGhfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuY2FsbFJlc2V0Tm9ydGhfKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzZXROb3J0aF8oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2V0Tm9ydGhfKCkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgaWYgKCF2aWV3KSB7XG4gICAgICAvLyB0aGUgbWFwIGRvZXMgbm90IGhhdmUgYSB2aWV3LCBzbyB3ZSBjYW4ndCBhY3RcbiAgICAgIC8vIHVwb24gaXRcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgcm90YXRpb24gPSB2aWV3LmdldFJvdGF0aW9uKCk7XG4gICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDAgJiYgcm90YXRpb24gJSAoMiAqIE1hdGguUEkpICE9PSAwKSB7XG4gICAgICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2aWV3LnNldFJvdGF0aW9uKDApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHJvdGF0ZSBjb250cm9sIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHJlbmRlcihtYXBFdmVudCkge1xuICAgIGNvbnN0IGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xuICAgIGlmIChyb3RhdGlvbiAhPSB0aGlzLnJvdGF0aW9uXykge1xuICAgICAgY29uc3QgdHJhbnNmb3JtID0gJ3JvdGF0ZSgnICsgcm90YXRpb24gKyAncmFkKSc7XG4gICAgICBpZiAodGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgICAgY29uc3QgY29udGFpbnMgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX0hJRERFTik7XG4gICAgICAgIGlmICghY29udGFpbnMgJiYgcm90YXRpb24gPT09IDApIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgICB9IGVsc2UgaWYgKGNvbnRhaW5zICYmIHJvdGF0aW9uICE9PSAwKSB7XG4gICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5sYWJlbF8uc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuICAgIH1cbiAgICB0aGlzLnJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJvdGF0ZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1pvb21cbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge0NMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRX0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC16b29tJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JbkNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWluJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSB6b29tLWluIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLW91dCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tSW5MYWJlbD0nKyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1pblxuICogYnV0dG9uLiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbU91dExhYmVsPSfigJMnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHpvb20tb3V0IGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tSW5UaXBMYWJlbD0nWm9vbSBpbiddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dFRpcExhYmVsPSdab29tIG91dCddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGNsaWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHdpdGggMiBidXR0b25zLCBvbmUgZm9yIHpvb20gaW4gYW5kIG9uZSBmb3Igem9vbSBvdXQuXG4gKiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIG9mIGEgbWFwLiBUbyBzdHlsZSB0aGlzIGNvbnRyb2xcbiAqIHVzZSBjc3Mgc2VsZWN0b3JzIGAub2wtem9vbS1pbmAgYW5kIGAub2wtem9vbS1vdXRgLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgWm9vbSBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gWm9vbSBvcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgc3VwZXIoe1xuICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXG4gICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgIH0pO1xuXG4gICAgY29uc3QgY2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC16b29tJztcblxuICAgIGNvbnN0IGRlbHRhID0gb3B0aW9ucy5kZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kZWx0YSA6IDE7XG5cbiAgICBjb25zdCB6b29tSW5DbGFzc05hbWUgPVxuICAgICAgb3B0aW9ucy56b29tSW5DbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuem9vbUluQ2xhc3NOYW1lXG4gICAgICAgIDogY2xhc3NOYW1lICsgJy1pbic7XG5cbiAgICBjb25zdCB6b29tT3V0Q2xhc3NOYW1lID1cbiAgICAgIG9wdGlvbnMuem9vbU91dENsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy56b29tT3V0Q2xhc3NOYW1lXG4gICAgICAgIDogY2xhc3NOYW1lICsgJy1vdXQnO1xuXG4gICAgY29uc3Qgem9vbUluTGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tSW5MYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5MYWJlbCA6ICcrJztcbiAgICBjb25zdCB6b29tT3V0TGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tT3V0TGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbU91dExhYmVsIDogJ1xcdTIwMTMnO1xuXG4gICAgY29uc3Qgem9vbUluVGlwTGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tSW5UaXBMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tSW5UaXBMYWJlbCA6ICdab29tIGluJztcbiAgICBjb25zdCB6b29tT3V0VGlwTGFiZWwgPVxuICAgICAgb3B0aW9ucy56b29tT3V0VGlwTGFiZWwgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuem9vbU91dFRpcExhYmVsXG4gICAgICAgIDogJ1pvb20gb3V0JztcblxuICAgIGNvbnN0IGluRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGluRWxlbWVudC5jbGFzc05hbWUgPSB6b29tSW5DbGFzc05hbWU7XG4gICAgaW5FbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICBpbkVsZW1lbnQudGl0bGUgPSB6b29tSW5UaXBMYWJlbDtcbiAgICBpbkVsZW1lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICB0eXBlb2Ygem9vbUluTGFiZWwgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoem9vbUluTGFiZWwpXG4gICAgICAgIDogem9vbUluTGFiZWxcbiAgICApO1xuXG4gICAgaW5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBFdmVudFR5cGUuQ0xJQ0ssXG4gICAgICB0aGlzLmhhbmRsZUNsaWNrXy5iaW5kKHRoaXMsIGRlbHRhKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGNvbnN0IG91dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBvdXRFbGVtZW50LmNsYXNzTmFtZSA9IHpvb21PdXRDbGFzc05hbWU7XG4gICAgb3V0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgb3V0RWxlbWVudC50aXRsZSA9IHpvb21PdXRUaXBMYWJlbDtcbiAgICBvdXRFbGVtZW50LmFwcGVuZENoaWxkKFxuICAgICAgdHlwZW9mIHpvb21PdXRMYWJlbCA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tT3V0TGFiZWwpXG4gICAgICAgIDogem9vbU91dExhYmVsXG4gICAgKTtcblxuICAgIG91dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIEV2ZW50VHlwZS5DTElDSyxcbiAgICAgIHRoaXMuaGFuZGxlQ2xpY2tfLmJpbmQodGhpcywgLWRlbHRhKSxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGNvbnN0IGNzc0NsYXNzZXMgPVxuICAgICAgY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICBjb25zdCBlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKGluRWxlbWVudCk7XG4gICAgZWxlbWVudC5hcHBlbmRDaGlsZChvdXRFbGVtZW50KTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFpvb20gZGVsdGEuXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlQ2xpY2tfKGRlbHRhLCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy56b29tQnlEZWx0YV8oZGVsdGEpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgem9vbUJ5RGVsdGFfKGRlbHRhKSB7XG4gICAgY29uc3QgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAoIXZpZXcpIHtcbiAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgLy8gdXBvbiBpdFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgIGlmIChjdXJyZW50Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCBuZXdab29tID0gdmlldy5nZXRDb25zdHJhaW5lZFpvb20oY3VycmVudFpvb20gKyBkZWx0YSk7XG4gICAgICBpZiAodGhpcy5kdXJhdGlvbl8gPiAwKSB7XG4gICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICB6b29tOiBuZXdab29tLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmlldy5zZXRab29tKG5ld1pvb20pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBab29tO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1Byb3BlcnR5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gIEFDVElWRTogJ2FjdGl2ZScsXG59O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb25Qcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7ZWFzZU91dCwgbGluZWFyfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIFJldHVybj59IEludGVyYWN0aW9uT25TaWduYXR1cmVcbiAqL1xuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLiBUaGUgaW50ZXJhY3Rpb25zXG4gKiBhcmUgdHJhdmVyc2VkIGluIHJldmVyc2Ugb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBjb2xsZWN0aW9uIG9mIHRoZSBtYXAuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBVc2VyIGFjdGlvbnMgdGhhdCBjaGFuZ2UgdGhlIHN0YXRlIG9mIHRoZSBtYXAuIFNvbWUgYXJlIHNpbWlsYXIgdG8gY29udHJvbHMsXG4gKiBidXQgYXJlIG5vdCBhc3NvY2lhdGVkIHdpdGggYSBET00gZWxlbWVudC5cbiAqIEZvciBleGFtcGxlLCB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219IGlzXG4gKiBmdW5jdGlvbmFsbHkgdGhlIHNhbWUgYXMge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0sIGJ1dCB0cmlnZ2VyZWRcbiAqIGJ5IGEga2V5Ym9hcmQgZXZlbnQgbm90IGEgYnV0dG9uIGVsZW1lbnQgZXZlbnQuXG4gKiBBbHRob3VnaCBpbnRlcmFjdGlvbnMgZG8gbm90IGhhdmUgYSBET00gZWxlbWVudCwgc29tZSBvZiB0aGVtIGRvIHJlbmRlclxuICogdmVjdG9ycyBhbmQgc28gYXJlIHZpc2libGUgb24gdGhlIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgSW50ZXJhY3Rpb24gZXh0ZW5kcyBCYXNlT2JqZWN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7SW50ZXJhY3Rpb25PcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub247XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0ludGVyYWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAqL1xuICAgIHRoaXMudW47XG5cbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmhhbmRsZUV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZUV2ZW50ID0gb3B0aW9ucy5oYW5kbGVFdmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXAuanNcIikuZGVmYXVsdHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMubWFwXyA9IG51bGw7XG5cbiAgICB0aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gd2hldGhlciB0aGUgaW50ZXJhY3Rpb24gaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbnRlcmFjdGlvbiBpcyBhY3RpdmUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBY3RpdmUoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW50ZXJhY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fG51bGx9IE1hcC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TWFwKCkge1xuICAgIHJldHVybiB0aGlzLm1hcF87XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIG9yIGRlYWN0aXZhdGUgdGhlIGludGVyYWN0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFjdGl2ZSBBY3RpdmUuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldEFjdGl2ZShhY3RpdmUpIHtcbiAgICB0aGlzLnNldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSwgYWN0aXZlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGludGVyYWN0aW9uIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgKiB0aGUgbWFwIGhlcmUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gbWFwIE1hcC5cbiAgICovXG4gIHNldE1hcChtYXApIHtcbiAgICB0aGlzLm1hcF8gPSBtYXA7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHBhcmFtIHtudW1iZXJ9IFtkdXJhdGlvbl0gRHVyYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYW4odmlldywgZGVsdGEsIGR1cmF0aW9uKSB7XG4gIGNvbnN0IGN1cnJlbnRDZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gIGlmIChjdXJyZW50Q2VudGVyKSB7XG4gICAgY29uc3QgY2VudGVyID0gW2N1cnJlbnRDZW50ZXJbMF0gKyBkZWx0YVswXSwgY3VycmVudENlbnRlclsxXSArIGRlbHRhWzFdXTtcbiAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICBkdXJhdGlvbjogZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IGR1cmF0aW9uIDogMjUwLFxuICAgICAgZWFzaW5nOiBsaW5lYXIsXG4gICAgICBjZW50ZXI6IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoY2VudGVyKSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEgZnJvbSBwcmV2aW91cyB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIEFuY2hvciBjb29yZGluYXRlIGluIHRoZSB1c2VyIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW2R1cmF0aW9uXSBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBhbmNob3IsIGR1cmF0aW9uKSB7XG4gIGNvbnN0IGN1cnJlbnRab29tID0gdmlldy5nZXRab29tKCk7XG5cbiAgaWYgKGN1cnJlbnRab29tID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBuZXdab29tID0gdmlldy5nZXRDb25zdHJhaW5lZFpvb20oY3VycmVudFpvb20gKyBkZWx0YSk7XG4gIGNvbnN0IG5ld1Jlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3Jab29tKG5ld1pvb20pO1xuXG4gIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gIH1cbiAgdmlldy5hbmltYXRlKHtcbiAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgIGFuY2hvcjogYW5jaG9yLFxuICAgIGR1cmF0aW9uOiBkdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gZHVyYXRpb24gOiAyNTAsXG4gICAgZWFzaW5nOiBlYXNlT3V0LFxuICB9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3Rpb247XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tXG4gKi9cbmltcG9ydCBJbnRlcmFjdGlvbiwge3pvb21CeURlbHRhfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBkZWx0YSBhcHBsaWVkIG9uIGVhY2ggZG91YmxlIGNsaWNrLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gYnkgZG91YmxlLWNsaWNraW5nIG9uIHRoZSBtYXAuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIERvdWJsZUNsaWNrWm9vbSBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGVsdGFfID0gb3B0aW9ucy5kZWx0YSA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYVxuICAgKiBkb3VibGVjbGljaykgYW5kIGV2ZW50dWFsbHkgem9vbXMgdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAqL1xuICBoYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBsZXQgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICAgIGNvbnN0IGJyb3dzZXJFdmVudCA9IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKFxuICAgICAgICBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudFxuICAgICAgKTtcbiAgICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICBjb25zdCBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgIGNvbnN0IGRlbHRhID0gYnJvd3NlckV2ZW50LnNoaWZ0S2V5ID8gLXRoaXMuZGVsdGFfIDogdGhpcy5kZWx0YV87XG4gICAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBhbmNob3IsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgIGJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRG91YmxlQ2xpY2tab29tO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BvaW50ZXJcbiAqL1xuaW1wb3J0IEludGVyYWN0aW9uIGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZURvd25FdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZG93blwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIHRoZW4gYSBkcmFnXG4gKiBzZXF1ZW5jZSBpcyBzdGFydGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbaGFuZGxlTW92ZUV2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJtb3ZlXCIgZXZlbnRzLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBcIm1vdmVcIiBldmVudHMuXG4gKiBUaGlzIGZ1bmN0aW9ucyBpcyBhbHNvIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLCBzbyBkdXJpbmcgYSBkcmFnXG4gKiBzZXF1ZW5jZSBib3RoIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCBmdW5jdGlvbiBhbmQgdGhpcyBmdW5jdGlvbiBhcmUgY2FsbGVkLlxuICogSWYgYGhhbmRsZURvd25FdmVudGAgaXMgZGVmaW5lZCBhbmQgaXQgcmV0dXJucyB0cnVlIHRoaXMgZnVuY3Rpb24gd2lsbCBub3RcbiAqIGJlIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyB0aGF0IGNhbGxzIHVzZXItZGVmaW5lZCBmdW5jdGlvbnMgb24gYGRvd25gLCBgbW92ZWAgYW5kIGB1cGBcbiAqIGV2ZW50cy4gVGhpcyBjbGFzcyBhbHNvIG1hbmFnZXMgXCJkcmFnIHNlcXVlbmNlc1wiLlxuICpcbiAqIFdoZW4gdGhlIGBoYW5kbGVEb3duRXZlbnRgIHVzZXIgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgYSBkcmFnIHNlcXVlbmNlIGlzXG4gKiBzdGFydGVkLiBEdXJpbmcgYSBkcmFnIHNlcXVlbmNlIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCB1c2VyIGZ1bmN0aW9uIGlzXG4gKiBjYWxsZWQgb24gYG1vdmVgIGV2ZW50cy4gVGhlIGRyYWcgc2VxdWVuY2UgZW5kcyB3aGVuIHRoZSBgaGFuZGxlVXBFdmVudGBcbiAqIHVzZXIgZnVuY3Rpb24gaXMgY2FsbGVkIGFuZCByZXR1cm5zIGBmYWxzZWAuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFBvaW50ZXJJbnRlcmFjdGlvbiBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBzdXBlcihcbiAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIChvcHRpb25zKVxuICAgICk7XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVEb3duRXZlbnQpIHtcbiAgICAgIHRoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgdGhpcy5oYW5kbGVNb3ZlRXZlbnQgPSBvcHRpb25zLmhhbmRsZU1vdmVFdmVudDtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5oYW5kbGVVcEV2ZW50KSB7XG4gICAgICB0aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgIHRoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheTxQb2ludGVyRXZlbnQ+fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldFBvaW50ZXJzID0gW107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY3VycmVudCBudW1iZXIgb2YgcG9pbnRlcnMgaW52b2x2ZWQgaW4gdGhlIGludGVyYWN0aW9uLFxuICAgKiBlLmcuIGAyYCB3aGVuIHR3byBmaW5nZXJzIGFyZSB1c2VkLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgb2YgcG9pbnRlcnMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFBvaW50ZXJDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBoYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7fVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGFuZCBtYXkgY2FsbCBpbnRvXG4gICAqIG90aGVyIGZ1bmN0aW9ucywgaWYgZXZlbnQgc2VxdWVuY2VzIGxpa2UgZS5nLiAnZHJhZycgb3IgJ2Rvd24tdXAnIGV0Yy4gYXJlXG4gICAqIGRldGVjdGVkLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgbGV0IHN0b3BFdmVudCA9IGZhbHNlO1xuICAgIHRoaXMudXBkYXRlVHJhY2tlZFBvaW50ZXJzXyhtYXBCcm93c2VyRXZlbnQpO1xuICAgIGlmICh0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlRHJhZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIC8vIHByZXZlbnQgcGFnZSBzY3JvbGxpbmcgZHVyaW5nIGRyYWdnaW5nXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9IGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZWRVcCA9IHRoaXMuaGFuZGxlVXBFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPVxuICAgICAgICAgIGhhbmRsZWRVcCAmJiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDA7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOKSB7XG4gICAgICAgIGNvbnN0IGhhbmRsZWQgPSB0aGlzLmhhbmRsZURvd25FdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBoYW5kbGVkO1xuICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgfSBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIG1vdmUgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGhhbmRsZU1vdmVFdmVudChtYXBCcm93c2VyRXZlbnQpIHt9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBoYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgKiB0byBvdGhlciBpbnRlcmFjdGlvbnMgb3Igc2hvdWxkIGJlIHN0b3BwZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFuZGxlZCBXYXMgdGhlIGV2ZW50IGhhbmRsZWQgYnkgdGhlIGludGVyYWN0aW9uP1xuICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgKi9cbiAgc3RvcERvd24oaGFuZGxlZCkge1xuICAgIHJldHVybiBoYW5kbGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKG1hcEJyb3dzZXJFdmVudC5hY3RpdmVQb2ludGVycykge1xuICAgICAgdGhpcy50YXJnZXRQb2ludGVycyA9IG1hcEJyb3dzZXJFdmVudC5hY3RpdmVQb2ludGVycztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFBvaW50ZXJFdmVudD59IHBvaW50ZXJFdmVudHMgTGlzdCBvZiBldmVudHMuXG4gKiBAcmV0dXJuIHt7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9fSBDZW50cm9pZCBwaXhlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNlbnRyb2lkKHBvaW50ZXJFdmVudHMpIHtcbiAgY29uc3QgbGVuZ3RoID0gcG9pbnRlckV2ZW50cy5sZW5ndGg7XG4gIGxldCBjbGllbnRYID0gMDtcbiAgbGV0IGNsaWVudFkgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgY2xpZW50WCArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFg7XG4gICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gIH1cbiAgcmV0dXJuIHtjbGllbnRYOiBjbGllbnRYIC8gbGVuZ3RoLCBjbGllbnRZOiBjbGllbnRZIC8gbGVuZ3RofTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9jb25kaXRpb25cbiAqL1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQge0ZBTFNFLCBUUlVFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtNQUMsIFdFQktJVH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsIHRydWUgc2hvdWxkIGJlIHJldHVybmVkLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IENvbmRpdGlvblxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvbmRpdGlvbiBmdW5jdGlvbiB0aGF0IHBhc3NlcyB3aGVuIGFsbCBwcm92aWRlZCBjb25kaXRpb25zIHBhc3MuXG4gKiBAcGFyYW0gey4uLkNvbmRpdGlvbn0gdmFyX2FyZ3MgQ29uZGl0aW9ucyB0byBjaGVjay5cbiAqIEByZXR1cm4ge0NvbmRpdGlvbn0gQ29uZGl0aW9uIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsKHZhcl9hcmdzKSB7XG4gIGNvbnN0IGNvbmRpdGlvbnMgPSBhcmd1bWVudHM7XG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQWxsIGNvbmRpdGlvbnMgcGFzc2VkLlxuICAgKi9cbiAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGxldCBwYXNzID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBjb25kaXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHBhc3MgPSBwYXNzICYmIGNvbmRpdGlvbnNbaV0oZXZlbnQpO1xuICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFzcztcbiAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBhbHQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBhbHRLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIHJldHVybiAoXG4gICAgb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXlcbiAgKTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBhbHQta2V5IGFuZCBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2VcbiAqIChlLmcuIHdoZW4gYWRkaXRpb25hbGx5IHRoZSBwbGF0Zm9ybS1tb2RpZmllci1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBhbHQgYW5kIHNoaWZ0IGtleXMgYXJlIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBhbHRTaGlmdEtleXNPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIHJldHVybiAoXG4gICAgb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleVxuICApO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBmb2N1cyA9IGZ1bmN0aW9uIChldmVudCkge1xuICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgY29uc3QgYWN0aXZlRWxlbWVudCA9IGV2ZW50Lm1hcC5nZXRPd25lckRvY3VtZW50KCkuYWN0aXZlRWxlbWVudDtcbiAgcmV0dXJuIHRhcmdldEVsZW1lbnQuY29udGFpbnMoYWN0aXZlRWxlbWVudCk7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlIHNldC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgY29udGFpbmVyIGhhcyB0aGUgZm9jdXMgb3Igbm8gJ3RhYmluZGV4JyBhdHRyaWJ1dGUuXG4gKi9cbmV4cG9ydCBjb25zdCBmb2N1c1dpdGhUYWJpbmRleCA9IGZ1bmN0aW9uIChldmVudCkge1xuICByZXR1cm4gZXZlbnQubWFwLmdldFRhcmdldEVsZW1lbnQoKS5oYXNBdHRyaWJ1dGUoJ3RhYmluZGV4JylcbiAgICA/IGZvY3VzKGV2ZW50KVxuICAgIDogdHJ1ZTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGFsd2F5cyB0cnVlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBhbHdheXMgPSBUUlVFO1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgYGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IGNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSztcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFzIGFuIFwiYWN0aW9uXCItcHJvZHVjaW5nIG1vdXNlIGJ1dHRvbi5cbiAqXG4gKiBCeSBkZWZpbml0aW9uLCB0aGlzIGluY2x1ZGVzIGxlZnQtY2xpY2sgb24gd2luZG93cy9saW51eCwgYW5kIGxlZnQtY2xpY2tcbiAqIHdpdGhvdXQgdGhlIGN0cmwga2V5IG9uIE1hY3MuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGNvbnN0IG1vdXNlQWN0aW9uQnV0dG9uID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgKTtcbiAgcmV0dXJuIG9yaWdpbmFsRXZlbnQuYnV0dG9uID09IDAgJiYgIShXRUJLSVQgJiYgTUFDICYmIG9yaWdpbmFsRXZlbnQuY3RybEtleSk7XG59O1xuXG4vKipcbiAqIFJldHVybiBhbHdheXMgZmFsc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gRmFsc2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBuZXZlciA9IEZBTFNFO1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LCBgZmFsc2VgXG4gKiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBwb2ludGVyTW92ZSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09ICdwb2ludGVybW92ZSc7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBzaW5nbGVjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBzaW5nbGVDbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuU0lOR0xFQ0xJQ0s7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBkYmxjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBkYmxjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBkb3VibGVDbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0s7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgbm8gbW9kaWZpZXIga2V5IChhbHQtLCBzaGlmdC0gb3IgcGxhdGZvcm0tbW9kaWZpZXIta2V5KSBpc1xuICogcHJlc3NlZC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlcmUgbm8gbW9kaWZpZXIga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IG5vTW9kaWZpZXJLZXlzID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50XG4gICk7XG4gIHJldHVybiAoXG4gICAgIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5XG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5ICh0aGUgbWV0YS1rZXkgb24gTWFjLFxuICogY3RybC1rZXkgb3RoZXJ3aXNlKSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZSAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseVxuICogdGhlIHNoaWZ0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHBsYXRmb3JtIG1vZGlmaWVyIGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgcGxhdGZvcm1Nb2RpZmllcktleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgKTtcbiAgcmV0dXJuIChcbiAgICAhb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAoTUFDID8gb3JpZ2luYWxFdmVudC5tZXRhS2V5IDogb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5XG4gICk7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIHBsYXRmb3JtLW1vZGlmaWVyLWtleSAodGhlIG1ldGEta2V5IG9uIE1hYyxcbiAqIGN0cmwta2V5IG90aGVyd2lzZSkgaXMgcHJlc3NlZC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBwbGF0Zm9ybSBtb2RpZmllciBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGNvbnN0IHBsYXRmb3JtTW9kaWZpZXJLZXkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgKTtcbiAgcmV0dXJuIE1BQyA/IG9yaWdpbmFsRXZlbnQubWV0YUtleSA6IG9yaWdpbmFsRXZlbnQuY3RybEtleTtcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgc2hpZnQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBjb25zdCBzaGlmdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgKTtcbiAgcmV0dXJuIChcbiAgICAhb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleVxuICApO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBub3QgZWRpdGFibGUsIGkuZS4gbm90IGFuIGBpbnB1dGAsXG4gKiBgc2VsZWN0YCwgb3IgYHRleHRhcmVhYCBlbGVtZW50IGFuZCBubyBgY29udGVudGVkaXRhYmxlYCBhdHRyaWJ1dGUgaXNcbiAqIHNldCBvciBpbmhlcml0ZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgdGFyZ2V0Tm90RWRpdGFibGUgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgKTtcbiAgY29uc3QgdGFnTmFtZSA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG9yaWdpbmFsRXZlbnQudGFyZ2V0KS50YWdOYW1lO1xuICByZXR1cm4gKFxuICAgIHRhZ05hbWUgIT09ICdJTlBVVCcgJiZcbiAgICB0YWdOYW1lICE9PSAnU0VMRUNUJyAmJlxuICAgIHRhZ05hbWUgIT09ICdURVhUQVJFQScgJiZcbiAgICAvLyBgaXNDb250ZW50RWRpdGFibGVgIGlzIG9ubHkgYXZhaWxhYmxlIG9uIGBIVE1MRWxlbWVudGAsIGJ1dCBpdCBtYXkgYWxzbyBiZSBhXG4gICAgLy8gZGlmZmVyZW50IHR5cGUgbGlrZSBgU1ZHRWxlbWVudGAuXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgICFvcmlnaW5hbEV2ZW50LnRhcmdldC5pc0NvbnRlbnRFZGl0YWJsZVxuICApO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBtb3VzZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgbW91c2VPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBwb2ludGVyRXZlbnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAoXG4gICAgbWFwQnJvd3NlckV2ZW50XG4gICkub3JpZ2luYWxFdmVudDtcbiAgYXNzZXJ0KHBvaW50ZXJFdmVudCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gIHJldHVybiBwb2ludGVyRXZlbnQucG9pbnRlclR5cGUgPT0gJ21vdXNlJztcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgdG91Y2hhYmxlIGRldmljZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSB0b3VjaGFibGUgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgdG91Y2hPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICBjb25zdCBwb2ludGVyRXZ0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudFxuICApLm9yaWdpbmFsRXZlbnQ7XG4gIGFzc2VydChwb2ludGVyRXZ0ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gIC8vIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgcmV0dXJuIHBvaW50ZXJFdnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCc7XG59O1xuXG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIGRpZ2l0YWwgcGVuLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgcGVuT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgY29uc3QgcG9pbnRlckV2dCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChcbiAgICBtYXBCcm93c2VyRXZlbnRcbiAgKS5vcmlnaW5hbEV2ZW50O1xuICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gIHJldHVybiBwb2ludGVyRXZ0LnBvaW50ZXJUeXBlID09PSAncGVuJztcbn07XG5cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyIGluXG4gKiBjb250YWN0IHdpdGggdGhlIHN1cmZhY2Ugb3IgaWYgdGhlIGxlZnQgbW91c2UgYnV0dG9uIGlzIHByZXNzZWQuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgY29uc3QgcHJpbWFyeUFjdGlvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgY29uc3QgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKFxuICAgIG1hcEJyb3dzZXJFdmVudFxuICApLm9yaWdpbmFsRXZlbnQ7XG4gIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgcmV0dXJuIHBvaW50ZXJFdmVudC5pc1ByaW1hcnkgJiYgcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbn07XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1BhblxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7XG4gIGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLFxufSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHtGQUxTRX0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7XG4gIGFsbCxcbiAgZm9jdXNXaXRoVGFiaW5kZXgsXG4gIG5vTW9kaWZpZXJLZXlzLFxuICBwcmltYXJ5QWN0aW9uLFxufSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7ZWFzZU91dH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7XG4gIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLFxuICBzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGUsXG59IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ubm9Nb2RpZmllcktleXN9IGFuZCB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ucHJpbWFyeUFjdGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gV2hlbiB0aGUgbWFwJ3MgdGFyZ2V0IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlIHNldCxcbiAqIHRoZSBpbnRlcmFjdGlvbiB3aWxsIG9ubHkgaGFuZGxlIGV2ZW50cyB3aGVuIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vS2luZXRpYy5qc1wiKS5kZWZhdWx0fSBba2luZXRpY10gS2luZXRpYyBpbmVydGlhIHRvIGFwcGx5IHRvIHRoZSBwYW4uXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcGFuIHRoZSBtYXAgYnkgZHJhZ2dpbmcgdGhlIG1hcC5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgRHJhZ1BhbiBleHRlbmRzIFBvaW50ZXJJbnRlcmFjdGlvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25zLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHN1cGVyKHtcbiAgICAgIHN0b3BEb3duOiBGQUxTRSxcbiAgICB9KTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vS2luZXRpYy5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmtpbmV0aWNfID0gb3B0aW9ucy5raW5ldGljO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAqL1xuICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5sYXN0UG9pbnRlcnNDb3VudF87XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnBhbm5pbmdfID0gZmFsc2U7XG5cbiAgICBjb25zdCBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvblxuICAgICAgPyBvcHRpb25zLmNvbmRpdGlvblxuICAgICAgOiBhbGwobm9Nb2RpZmllcktleXMsIHByaW1hcnlBY3Rpb24pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICovXG4gICAgdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5vbkZvY3VzT25seVxuICAgICAgPyBhbGwoZm9jdXNXaXRoVGFiaW5kZXgsIGNvbmRpdGlvbilcbiAgICAgIDogY29uZGl0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm5vS2luZXRpY18gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKi9cbiAgaGFuZGxlRHJhZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgaWYgKCF0aGlzLnBhbm5pbmdfKSB7XG4gICAgICB0aGlzLnBhbm5pbmdfID0gdHJ1ZTtcbiAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRQb2ludGVycyA9IHRoaXMudGFyZ2V0UG9pbnRlcnM7XG4gICAgY29uc3QgY2VudHJvaWQgPSBtYXAuZ2V0RXZlbnRQaXhlbChjZW50cm9pZEZyb21Qb2ludGVycyh0YXJnZXRQb2ludGVycykpO1xuICAgIGlmICh0YXJnZXRQb2ludGVycy5sZW5ndGggPT0gdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8pIHtcbiAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgIHRoaXMua2luZXRpY18udXBkYXRlKGNlbnRyb2lkWzBdLCBjZW50cm9pZFsxXSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5sYXN0Q2VudHJvaWQpIHtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBbXG4gICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWRbMF0gLSBjZW50cm9pZFswXSxcbiAgICAgICAgICBjZW50cm9pZFsxXSAtIHRoaXMubGFzdENlbnRyb2lkWzFdLFxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgc2NhbGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHZpZXcuYWRqdXN0Q2VudGVySW50ZXJuYWwoZGVsdGEpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciBkb3duLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgZG93blxuICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RDZW50cm9pZCA9IGNlbnRyb2lkO1xuICAgIHRoaXMubGFzdFBvaW50ZXJzQ291bnRfID0gdGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAqL1xuICBoYW5kbGVVcEV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAoIXRoaXMubm9LaW5ldGljXyAmJiB0aGlzLmtpbmV0aWNfICYmIHRoaXMua2luZXRpY18uZW5kKCkpIHtcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB0aGlzLmtpbmV0aWNfLmdldERpc3RhbmNlKCk7XG4gICAgICAgIGNvbnN0IGFuZ2xlID0gdGhpcy5raW5ldGljXy5nZXRBbmdsZSgpO1xuICAgICAgICBjb25zdCBjZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIGNvbnN0IGNlbnRlcnB4ID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbChjZW50ZXIpO1xuICAgICAgICBjb25zdCBkZXN0ID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChbXG4gICAgICAgICAgY2VudGVycHhbMF0gLSBkaXN0YW5jZSAqIE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgICBjZW50ZXJweFsxXSAtIGRpc3RhbmNlICogTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICBdKTtcbiAgICAgICAgdmlldy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgIGNlbnRlcjogdmlldy5nZXRDb25zdHJhaW5lZENlbnRlcihkZXN0KSxcbiAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wYW5uaW5nXykge1xuICAgICAgICB0aGlzLnBhbm5pbmdfID0gZmFsc2U7XG4gICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgIC8vIGFmdGVyIG9uZSBmaW5nZXIgdXAsIHRpbnkgZHJhZywgc2Vjb25kIGZpbmdlciB1cFxuICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZURvd25FdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAwICYmIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAvLyBzdG9wIGFueSBjdXJyZW50IGFuaW1hdGlvblxuICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICB9XG4gICAgICAvLyBObyBraW5ldGljIGFzIHNvb24gYXMgbW9yZSB0aGFuIG9uZSBwb2ludGVyIG9uIHRoZSBzY3JlZW4gaXNcbiAgICAgIC8vIGRldGVjdGVkLiBUaGlzIGlzIHRvIHByZXZlbnQgbmFzdHkgcGFucyBhZnRlciBwaW5jaC5cbiAgICAgIHRoaXMubm9LaW5ldGljXyA9IHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRHJhZ1BhbjtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUm90YXRlXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7RkFMU0V9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge1xuICBhbHRTaGlmdEtleXNPbmx5LFxuICBtb3VzZUFjdGlvbkJ1dHRvbixcbiAgbW91c2VPbmx5LFxufSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7ZGlzYWJsZX0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5hbHRTaGlmdEtleXNPbmx5fS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIHRoZSBhbHQgYW5kIHNoaWZ0IGtleXMgYXJlIGhlbGQgZG93bi5cbiAqXG4gKiBUaGlzIGludGVyYWN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBtb3VzZSBkZXZpY2VzLlxuICogQGFwaVxuICovXG5jbGFzcyBEcmFnUm90YXRlIGV4dGVuZHMgUG9pbnRlckludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBzdXBlcih7XG4gICAgICBzdG9wRG93bjogRkFMU0UsXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx0U2hpZnRLZXlzT25seTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKi9cbiAgaGFuZGxlRHJhZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgIGNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIGlmICh2aWV3LmdldENvbnN0cmFpbnRzKCkucm90YXRpb24gPT09IGRpc2FibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hdGFuMihzaXplWzFdIC8gMiAtIG9mZnNldFsxXSwgb2Zmc2V0WzBdIC0gc2l6ZVswXSAvIDIpO1xuICAgIGlmICh0aGlzLmxhc3RBbmdsZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgZGVsdGEgPSB0aGV0YSAtIHRoaXMubGFzdEFuZ2xlXztcbiAgICAgIHZpZXcuYWRqdXN0Um90YXRpb25JbnRlcm5hbCgtZGVsdGEpO1xuICAgIH1cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB0aGV0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZURvd25FdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgbW91c2VBY3Rpb25CdXR0b24obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudClcbiAgICApIHtcbiAgICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRHJhZ1JvdGF0ZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvQm94XG4gKi9cblxuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQgUG9seWdvbiBmcm9tICcuLi9nZW9tL1BvbHlnb24uanMnO1xuXG5jbGFzcyBSZW5kZXJCb3ggZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgQ1NTIGNsYXNzIG5hbWUuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjbGFzc05hbWUpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5nZW9tZXRyeV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMuZWxlbWVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuZWxlbWVudF8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICB0aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9ICdvbC1ib3ggJyArIGNsYXNzTmFtZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fG51bGx9XG4gICAgICovXG4gICAgdGhpcy5tYXBfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAqL1xuICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICovXG4gICAgdGhpcy5lbmRQaXhlbF8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIHRoaXMuc2V0TWFwKG51bGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZW5kZXJfKCkge1xuICAgIGNvbnN0IHN0YXJ0UGl4ZWwgPSB0aGlzLnN0YXJ0UGl4ZWxfO1xuICAgIGNvbnN0IGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgY29uc3QgcHggPSAncHgnO1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICBzdHlsZS5sZWZ0ID0gTWF0aC5taW4oc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMF0pICsgcHg7XG4gICAgc3R5bGUudG9wID0gTWF0aC5taW4oc3RhcnRQaXhlbFsxXSwgZW5kUGl4ZWxbMV0pICsgcHg7XG4gICAgc3R5bGUud2lkdGggPSBNYXRoLmFicyhlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF0pICsgcHg7XG4gICAgc3R5bGUuaGVpZ2h0ID0gTWF0aC5hYnMoZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdKSArIHB4O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gbWFwIE1hcC5cbiAgICovXG4gIHNldE1hcChtYXApIHtcbiAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgY29uc3Qgc3R5bGUgPSB0aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgICAgc3R5bGUubGVmdCA9ICdpbmhlcml0JztcbiAgICAgIHN0eWxlLnRvcCA9ICdpbmhlcml0JztcbiAgICAgIHN0eWxlLndpZHRoID0gJ2luaGVyaXQnO1xuICAgICAgc3R5bGUuaGVpZ2h0ID0gJ2luaGVyaXQnO1xuICAgIH1cbiAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBTdGFydCBwaXhlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgKi9cbiAgc2V0UGl4ZWxzKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgdGhpcy5zdGFydFBpeGVsXyA9IHN0YXJ0UGl4ZWw7XG4gICAgdGhpcy5lbmRQaXhlbF8gPSBlbmRQaXhlbDtcbiAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICB0aGlzLnJlbmRlcl8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG9yIHVwZGF0ZXMgdGhlIGNhY2hlZCBnZW9tZXRyeS5cbiAgICovXG4gIGNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKSB7XG4gICAgY29uc3Qgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgY29uc3QgZW5kUGl4ZWwgPSB0aGlzLmVuZFBpeGVsXztcbiAgICBjb25zdCBwaXhlbHMgPSBbXG4gICAgICBzdGFydFBpeGVsLFxuICAgICAgW3N0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzFdXSxcbiAgICAgIGVuZFBpeGVsLFxuICAgICAgW2VuZFBpeGVsWzBdLCBzdGFydFBpeGVsWzFdXSxcbiAgICBdO1xuICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gcGl4ZWxzLm1hcChcbiAgICAgIHRoaXMubWFwXy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwsXG4gICAgICB0aGlzLm1hcF9cbiAgICApO1xuICAgIC8vIGNsb3NlIHRoZSBwb2x5Z29uXG4gICAgY29vcmRpbmF0ZXNbNF0gPSBjb29yZGluYXRlc1swXS5zbGljZSgpO1xuICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZ2VvbWV0cnlfLnNldENvb3JkaW5hdGVzKFtjb29yZGluYXRlc10pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICAqL1xuICBnZXRHZW9tZXRyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZW9tZXRyeV87XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyQm94O1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdCb3hcbiAqL1xuLy8gRklYTUUgZHJhdyBkcmFnIGJveFxuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgUmVuZGVyQm94IGZyb20gJy4uL3JlbmRlci9Cb3guanMnO1xuaW1wb3J0IHttb3VzZUFjdGlvbkJ1dHRvbn0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgYW5kIHJldHVybnMgYSBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsXG4gKiB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsKTpib29sZWFufSBFbmRDb25kaXRpb25cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1kcmFnYm94J10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgb2wvZXZlbnRzL2NvbmRpdGlvbn5tb3VzZUFjdGlvbkJ1dHRvbn0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RW5kQ29uZGl0aW9ufSBbYm94RW5kQ29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgYGJveGVuZGAgZXZlbnQgc2hvdWxkIGJlIGZpcmVkLlxuICogRGVmYXVsdCBpcyBgdHJ1ZWAgaWYgdGhlIGFyZWEgb2YgdGhlIGJveCBpcyBiaWdnZXIgdGhhbiB0aGUgYG1pbkFyZWFgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24odGhpczpEcmFnQm94LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW29uQm94RW5kXSBDb2RlIHRvIGV4ZWN1dGUganVzdFxuICogYmVmb3JlIGBib3hlbmRgIGlzIGZpcmVkLlxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuY29uc3QgRHJhZ0JveEV2ZW50VHlwZSA9IHtcbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IHN0YXJ0LlxuICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveHN0YXJ0XG4gICAqIEBhcGlcbiAgICovXG4gIEJPWFNUQVJUOiAnYm94c3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgb24gZHJhZyB3aGVuIGJveCBpcyBhY3RpdmUuXG4gICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZHJhZ1xuICAgKiBAYXBpXG4gICAqL1xuICBCT1hEUkFHOiAnYm94ZHJhZycsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IGVuZC5cbiAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hlbmRcbiAgICogQGFwaVxuICAgKi9cbiAgQk9YRU5EOiAnYm94ZW5kJyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggY2FuY2VsZWQuXG4gICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94Y2FuY2VsXG4gICAqIEBhcGlcbiAgICovXG4gIEJPWENBTkNFTDogJ2JveGNhbmNlbCcsXG59O1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ0JveH5EcmFnQm94fSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZlxuICogdGhpcyB0eXBlLlxuICovXG5leHBvcnQgY2xhc3MgRHJhZ0JveEV2ZW50IGV4dGVuZHMgRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBldmVudCBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgT3JpZ2luYXRpbmcgZXZlbnQuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBjb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBjb29yZGluYXRlIG9mIHRoZSBkcmFnIGV2ZW50LlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGU7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50ID0gbWFwQnJvd3NlckV2ZW50O1xuICB9XG59XG5cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8J2JveGNhbmNlbCd8J2JveGRyYWcnfCdib3hlbmQnfCdib3hzdGFydCcsIERyYWdCb3hFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6YWN0aXZlJ3wnYm94Y2FuY2VsJ3wnYm94ZHJhZyd8J2JveGVuZCcsIFJldHVybj59IERyYWdCb3hPblNpZ25hdHVyZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIGRyYXcgYSB2ZWN0b3IgYm94IGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIHRoZSBzaGlmdCBvciBvdGhlciBrZXkgaXMgaGVsZCBkb3duLiBUaGlzIGlzIHVzZWQsIGZvciBleGFtcGxlLFxuICogZm9yIHpvb21pbmcgdG8gYSBzcGVjaWZpYyBhcmVhIG9mIHRoZSBtYXBcbiAqIChzZWUge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbX5EcmFnWm9vbX0gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVBbmRab29tfkRyYWdSb3RhdGVBbmRab29tfSkuXG4gKlxuICogQGZpcmVzIERyYWdCb3hFdmVudFxuICogQGFwaVxuICovXG5jbGFzcyBEcmFnQm94IGV4dGVuZHMgUG9pbnRlckludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7RHJhZ0JveE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub247XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uY2U7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0JveC5qc1wiKS5kZWZhdWx0fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5ib3hfID0gbmV3IFJlbmRlckJveChvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ2JveCcpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMubWluQXJlYV8gPSBvcHRpb25zLm1pbkFyZWEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluQXJlYSA6IDY0O1xuXG4gICAgaWYgKG9wdGlvbnMub25Cb3hFbmQpIHtcbiAgICAgIHRoaXMub25Cb3hFbmQgPSBvcHRpb25zLm9uQm94RW5kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICovXG4gICAgdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IG1vdXNlQWN0aW9uQnV0dG9uO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7RW5kQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuYm94RW5kQ29uZGl0aW9uXyA9IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uXG4gICAgICA/IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uXG4gICAgICA6IHRoaXMuZGVmYXVsdEJveEVuZENvbmRpdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBjb25kaXRpb24gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIGJveGVuZCBldmVudFxuICAgKiBzaG91bGQgZmlyZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IFRoZSBvcmlnaW5hdGluZyBNYXBCcm93c2VyRXZlbnRcbiAgICogICAgIGxlYWRpbmcgdG8gdGhlIGJveCBlbmQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgVGhlIHN0YXJ0aW5nIHBpeGVsIG9mIHRoZSBib3guXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IGVuZFBpeGVsIFRoZSBlbmQgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIGJveGVuZCBjb25kaXRpb24gc2hvdWxkIGJlIGZpcmVkLlxuICAgKi9cbiAgZGVmYXVsdEJveEVuZENvbmRpdGlvbihtYXBCcm93c2VyRXZlbnQsIHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgY29uc3Qgd2lkdGggPSBlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF07XG4gICAgY29uc3QgaGVpZ2h0ID0gZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdO1xuICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBnZW9tZXRyeSBvZiBsYXN0IGRyYXduIGJveC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRHZW9tZXRyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hfLmdldEdlb21ldHJ5KCk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICovXG4gIGhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG5cbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICBuZXcgRHJhZ0JveEV2ZW50KFxuICAgICAgICBEcmFnQm94RXZlbnRUeXBlLkJPWERSQUcsXG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLFxuICAgICAgICBtYXBCcm93c2VyRXZlbnRcbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKi9cbiAgaGFuZGxlVXBFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB0aGlzLmJveF8uc2V0TWFwKG51bGwpO1xuXG4gICAgY29uc3QgY29tcGxldGVCb3ggPSB0aGlzLmJveEVuZENvbmRpdGlvbl8oXG4gICAgICBtYXBCcm93c2VyRXZlbnQsXG4gICAgICB0aGlzLnN0YXJ0UGl4ZWxfLFxuICAgICAgbWFwQnJvd3NlckV2ZW50LnBpeGVsXG4gICAgKTtcbiAgICBpZiAoY29tcGxldGVCb3gpIHtcbiAgICAgIHRoaXMub25Cb3hFbmQobWFwQnJvd3NlckV2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IERyYWdCb3hFdmVudChcbiAgICAgICAgY29tcGxldGVCb3ggPyBEcmFnQm94RXZlbnRUeXBlLkJPWEVORCA6IERyYWdCb3hFdmVudFR5cGUuQk9YQ0FOQ0VMLFxuICAgICAgICBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSxcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50XG4gICAgICApXG4gICAgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZURvd25FdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBtYXBCcm93c2VyRXZlbnQucGl4ZWw7XG4gICAgICB0aGlzLmJveF8uc2V0TWFwKG1hcEJyb3dzZXJFdmVudC5tYXApO1xuICAgICAgdGhpcy5ib3hfLnNldFBpeGVscyh0aGlzLnN0YXJ0UGl4ZWxfLCB0aGlzLnN0YXJ0UGl4ZWxfKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IERyYWdCb3hFdmVudChcbiAgICAgICAgICBEcmFnQm94RXZlbnRUeXBlLkJPWFNUQVJULFxuICAgICAgICAgIG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlLFxuICAgICAgICAgIG1hcEJyb3dzZXJFdmVudFxuICAgICAgICApXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIGp1c3QgYmVmb3JlIGBvbmJveGVuZGAgaXMgZmlyZWRcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqL1xuICBvbkJveEVuZChldmVudCkge31cbn1cblxuZXhwb3J0IGRlZmF1bHQgRHJhZ0JveDtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbVxuICovXG5pbXBvcnQgRHJhZ0JveCBmcm9tICcuL0RyYWdCb3guanMnO1xuaW1wb3J0IHtlYXNlT3V0fSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IHtzaGlmdEtleU9ubHl9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1kcmFnem9vbSddIENTUyBjbGFzcyBuYW1lIGZvciBzdHlsaW5nIHRoZVxuICogYm94LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24uc2hpZnRLZXlPbmx5fS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3V0PWZhbHNlXSBVc2UgaW50ZXJhY3Rpb24gZm9yIHpvb21pbmcgb3V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5BcmVhPTY0XSBUaGUgbWluaW11bSBhcmVhIG9mIHRoZSBib3ggaW4gcGl4ZWwsIHRoaXMgdmFsdWUgaXMgdXNlZCBieSB0aGUgcGFyZW50IGRlZmF1bHRcbiAqIGBib3hFbmRDb25kaXRpb25gIGZ1bmN0aW9uLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiBhIGtleSwgc2hpZnQgYnkgZGVmYXVsdCwgaXMgaGVsZCBkb3duLlxuICpcbiAqIFRvIGNoYW5nZSB0aGUgc3R5bGUgb2YgdGhlIGJveCwgdXNlIENTUyBhbmQgdGhlIGAub2wtZHJhZ3pvb21gIHNlbGVjdG9yLCBvclxuICogeW91ciBjdXN0b20gb25lIGNvbmZpZ3VyZWQgd2l0aCBgY2xhc3NOYW1lYC5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgRHJhZ1pvb20gZXh0ZW5kcyBEcmFnQm94IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBjb25zdCBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogc2hpZnRLZXlPbmx5O1xuXG4gICAgc3VwZXIoe1xuICAgICAgY29uZGl0aW9uOiBjb25kaXRpb24sXG4gICAgICBjbGFzc05hbWU6IG9wdGlvbnMuY2xhc3NOYW1lIHx8ICdvbC1kcmFnem9vbScsXG4gICAgICBtaW5BcmVhOiBvcHRpb25zLm1pbkFyZWEsXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLm91dF8gPSBvcHRpb25zLm91dCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vdXQgOiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0byBleGVjdXRlIGp1c3QgYmVmb3JlIGBvbmJveGVuZGAgaXMgZmlyZWRcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqL1xuICBvbkJveEVuZChldmVudCkge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgY29uc3QgdmlldyA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gKi8gKG1hcC5nZXRWaWV3KCkpO1xuICAgIGxldCBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoKTtcblxuICAgIGlmICh0aGlzLm91dF8pIHtcbiAgICAgIGNvbnN0IHJvdGF0ZWRFeHRlbnQgPSB2aWV3LnJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeShnZW9tZXRyeSk7XG4gICAgICBjb25zdCByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwocm90YXRlZEV4dGVudCk7XG4gICAgICBjb25zdCBmYWN0b3IgPSB2aWV3LmdldFJlc29sdXRpb24oKSAvIHJlc29sdXRpb247XG4gICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCk7XG4gICAgICBnZW9tZXRyeS5zY2FsZShmYWN0b3IgKiBmYWN0b3IpO1xuICAgIH1cblxuICAgIHZpZXcuZml0SW50ZXJuYWwoZ2VvbWV0cnksIHtcbiAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvS2V5XG4gKi9cblxuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgTEVGVDogJ0Fycm93TGVmdCcsXG4gIFVQOiAnQXJyb3dVcCcsXG4gIFJJR0hUOiAnQXJyb3dSaWdodCcsXG4gIERPV046ICdBcnJvd0Rvd24nLFxufTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhblxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7cGFufSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBLZXkgZnJvbSAnLi4vZXZlbnRzL0tleS5qcyc7XG5pbXBvcnQge25vTW9kaWZpZXJLZXlzLCB0YXJnZXROb3RFZGl0YWJsZX0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge3JvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5ub01vZGlmaWVyS2V5c30gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24udGFyZ2V0Tm90RWRpdGFibGV9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsRGVsdGE9MTI4XSBUaGUgYW1vdW50IG9mIHBpeGVscyB0byBwYW4gb24gZWFjaCBrZXlcbiAqIHByZXNzLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHBhbiB0aGUgbWFwIHVzaW5nIGtleWJvYXJkIGFycm93cy5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219LlxuICogQGFwaVxuICovXG5jbGFzcyBLZXlib2FyZFBhbiBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAqL1xuICAgIHRoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBub01vZGlmaWVyS2V5cyhtYXBCcm93c2VyRXZlbnQpICYmIHRhcmdldE5vdEVkaXRhYmxlKG1hcEJyb3dzZXJFdmVudClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9XG4gICAgICBvcHRpb25zLmNvbmRpdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgOiB0aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnBpeGVsRGVsdGFfID1cbiAgICAgIG9wdGlvbnMucGl4ZWxEZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gaWYgaXQgd2FzIGFcbiAgICogYEtleUV2ZW50YCwgYW5kIGRlY2lkZXMgdGhlIGRpcmVjdGlvbiB0byBwYW4gdG8gKGlmIGFuIGFycm93IGtleSB3YXNcbiAgICogcHJlc3NlZCkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgaGFuZGxlRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgbGV0IHN0b3BFdmVudCA9IGZhbHNlO1xuICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTikge1xuICAgICAgY29uc3Qga2V5RXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR9ICovIChcbiAgICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgICAgICk7XG4gICAgICBjb25zdCBrZXkgPSBrZXlFdmVudC5rZXk7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgIChrZXkgPT0gS2V5LkRPV04gfHxcbiAgICAgICAgICBrZXkgPT0gS2V5LkxFRlQgfHxcbiAgICAgICAgICBrZXkgPT0gS2V5LlJJR0hUIHx8XG4gICAgICAgICAga2V5ID09IEtleS5VUClcbiAgICAgICkge1xuICAgICAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgY29uc3QgbWFwVW5pdHNEZWx0YSA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpICogdGhpcy5waXhlbERlbHRhXztcbiAgICAgICAgbGV0IGRlbHRhWCA9IDAsXG4gICAgICAgICAgZGVsdGFZID0gMDtcbiAgICAgICAgaWYgKGtleSA9PSBLZXkuRE9XTikge1xuICAgICAgICAgIGRlbHRhWSA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PSBLZXkuTEVGVCkge1xuICAgICAgICAgIGRlbHRhWCA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PSBLZXkuUklHSFQpIHtcbiAgICAgICAgICBkZWx0YVggPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbHRhWSA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGVsdGEgPSBbZGVsdGFYLCBkZWx0YVldO1xuICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICBwYW4odmlldywgZGVsdGEsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAga2V5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRQYW47XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHt6b29tQnlEZWx0YX0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQge3BsYXRmb3JtTW9kaWZpZXJLZXksIHRhcmdldE5vdEVkaXRhYmxlfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gVGhlIGRlZmF1bHQgY29uZGl0aW9uIGlzXG4gKiB0aGF0IHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi50YXJnZXROb3RFZGl0YWJsZX0gaXMgZnVsZmlsbGVkIGFuZCB0aGF0XG4gKiB0aGUgcGxhdGZvcm0gbW9kaWZpZXIga2V5IGlzbid0IHByZXNzZWRcbiAqICghe0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnBsYXRmb3JtTW9kaWZpZXJLZXl9KS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gbGV2ZWwgZGVsdGEgb24gZWFjaCBrZXkgcHJlc3MuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIHVzaW5nIGtleWJvYXJkICsgYW5kIC0uXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn0uXG4gKiBAYXBpXG4gKi9cbmNsYXNzIEtleWJvYXJkWm9vbSBleHRlbmRzIEludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICovXG4gICAgdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgIDogZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAhcGxhdGZvcm1Nb2RpZmllcktleShtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICB0YXJnZXROb3RFZGl0YWJsZShtYXBCcm93c2VyRXZlbnQpXG4gICAgICAgICAgKTtcbiAgICAgICAgfTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBpZiBpdCB3YXMgYVxuICAgKiBgS2V5RXZlbnRgLCBhbmQgZGVjaWRlcyB3aGV0aGVyIHRvIHpvb20gaW4gb3Igb3V0IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGVcbiAgICoga2V5IHByZXNzZWQgd2FzICcrJyBvciAnLScpLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICovXG4gIGhhbmRsZUV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGxldCBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICBpZiAoXG4gICAgICBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTiB8fFxuICAgICAgbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWVBSRVNTXG4gICAgKSB7XG4gICAgICBjb25zdCBrZXlFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudH0gKi8gKFxuICAgICAgICBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGtleSA9IGtleUV2ZW50LmtleTtcbiAgICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSAmJiAoa2V5ID09PSAnKycgfHwga2V5ID09PSAnLScpKSB7XG4gICAgICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIGNvbnN0IGRlbHRhID0ga2V5ID09PSAnKycgPyB0aGlzLmRlbHRhXyA6IC10aGlzLmRlbHRhXztcbiAgICAgICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB1bmRlZmluZWQsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAga2V5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRab29tO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0tpbmV0aWNcbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgS2luZXRpYyB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVjYXkgUmF0ZSBvZiBkZWNheSAobXVzdCBiZSBuZWdhdGl2ZSkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5WZWxvY2l0eSBNaW5pbXVtIHZlbG9jaXR5IChwaXhlbHMvbWlsbGlzZWNvbmQpLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgRGVsYXkgdG8gY29uc2lkZXIgdG8gY2FsY3VsYXRlIHRoZSBraW5ldGljXG4gICAqICAgICBpbml0aWFsIHZhbHVlcyAobWlsbGlzZWNvbmRzKS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGRlY2F5LCBtaW5WZWxvY2l0eSwgZGVsYXkpIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kZWNheV8gPSBkZWNheTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGVsYXlfID0gZGVsYXk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAqL1xuICAgIHRoaXMucG9pbnRzXyA9IFtdO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuYW5nbGVfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgKi9cbiAgYmVnaW4oKSB7XG4gICAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5hbmdsZV8gPSAwO1xuICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICovXG4gIHVwZGF0ZSh4LCB5KSB7XG4gICAgdGhpcy5wb2ludHNfLnB1c2goeCwgeSwgRGF0ZS5ub3coKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB3ZSBzaG91bGQgZG8ga2luZXRpYyBhbmltYXRpb24uXG4gICAqL1xuICBlbmQoKSB7XG4gICAgaWYgKHRoaXMucG9pbnRzXy5sZW5ndGggPCA2KSB7XG4gICAgICAvLyBhdCBsZWFzdCAyIHBvaW50cyBhcmUgcmVxdWlyZWQgKGkuZS4gdGhlcmUgbXVzdCBiZSBhdCBsZWFzdCA2IGVsZW1lbnRzXG4gICAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGRlbGF5ID0gRGF0ZS5ub3coKSAtIHRoaXMuZGVsYXlfO1xuICAgIGNvbnN0IGxhc3RJbmRleCA9IHRoaXMucG9pbnRzXy5sZW5ndGggLSAzO1xuICAgIGlmICh0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMl0gPCBkZWxheSkge1xuICAgICAgLy8gdGhlIGxhc3QgdHJhY2tlZCBwb2ludCBpcyB0b28gb2xkLCB3aGljaCBtZWFucyB0aGF0IHRoZSB1c2VyIHN0b3BwZWRcbiAgICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gICAgbGV0IGZpcnN0SW5kZXggPSBsYXN0SW5kZXggLSAzO1xuICAgIHdoaWxlIChmaXJzdEluZGV4ID4gMCAmJiB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDJdID4gZGVsYXkpIHtcbiAgICAgIGZpcnN0SW5kZXggLT0gMztcbiAgICB9XG5cbiAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gICAgLy8gd2UgZG9uJ3Qgd2FudCBhIGR1cmF0aW9uIG9mIDAgKGRpdmlkZSBieSB6ZXJvKVxuICAgIC8vIHdlIGFsc28gbWFrZSBzdXJlIHRoZSB1c2VyIHBhbm5lZCBmb3IgYSBkdXJhdGlvbiBvZiBhdCBsZWFzdCBvbmUgZnJhbWVcbiAgICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gICAgaWYgKGR1cmF0aW9uIDwgMTAwMCAvIDYwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgZHggPSB0aGlzLnBvaW50c19bbGFzdEluZGV4XSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4XTtcbiAgICBjb25zdCBkeSA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAxXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMV07XG4gICAgdGhpcy5hbmdsZV8gPSBNYXRoLmF0YW4yKGR5LCBkeCk7XG4gICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICAgIHJldHVybiB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPiB0aGlzLm1pblZlbG9jaXR5XztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRvdGFsIGRpc3RhbmNlIHRyYXZlbGxlZCAocGl4ZWxzKS5cbiAgICovXG4gIGdldERpc3RhbmNlKCkge1xuICAgIHJldHVybiAodGhpcy5taW5WZWxvY2l0eV8gLSB0aGlzLmluaXRpYWxWZWxvY2l0eV8pIC8gdGhpcy5kZWNheV87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBvZiB0aGUga2luZXRpYyBwYW5uaW5nIGFuaW1hdGlvbiAocmFkaWFucykuXG4gICAqL1xuICBnZXRBbmdsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5hbmdsZV87XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgS2luZXRpYztcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7em9vbUJ5RGVsdGF9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IHtERVZJQ0VfUElYRUxfUkFUSU8sIEZJUkVGT1h9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQge2FsbCwgYWx3YXlzLCBmb2N1c1dpdGhUYWJpbmRleH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQge2NsYW1wfSBmcm9tICcuLi9tYXRoLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7J3RyYWNrcGFkJyB8ICd3aGVlbCd9IE1vZGVcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLmFsd2F5c30uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gV2hlbiB0aGUgbWFwJ3MgdGFyZ2V0IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlIHNldCxcbiAqIHRoZSBpbnRlcmFjdGlvbiB3aWxsIG9ubHkgaGFuZGxlIGV2ZW50cyB3aGVuIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4RGVsdGE9MV0gTWF4aW11bSBtb3VzZSB3aGVlbCBkZWx0YS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aW1lb3V0PTgwXSBNb3VzZSB3aGVlbCB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUFuY2hvcj10cnVlXSBFbmFibGUgem9vbWluZyB1c2luZyB0aGUgbW91c2Unc1xuICogbG9jYXRpb24gYXMgdGhlIGFuY2hvci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgem9vbWluZyBpbiBhbmQgb3V0IHdpbGwgem9vbSB0b1xuICogdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuIGluc3RlYWQgb2Ygem9vbWluZyBvbiB0aGUgbW91c2UncyBsb2NhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIElmIHRydWUsIHRoZSBtb3VzZSB3aGVlbCB6b29tXG4gKiBldmVudCB3aWxsIGFsd2F5cyBhbmltYXRlIHRvIHRoZSBjbG9zZXN0IHpvb20gbGV2ZWwgYWZ0ZXIgYW4gaW50ZXJhY3Rpb247XG4gKiBmYWxzZSBtZWFucyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgYXJlIGFsbG93ZWQuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IHNjcm9sbGluZyB0aGUgbW91c2Ugd2hlZWwuXG4gKiBAYXBpXG4gKi9cbmNsYXNzIE1vdXNlV2hlZWxab29tIGV4dGVuZHMgSW50ZXJhY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIHN1cGVyKFxuICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0ludGVyYWN0aW9uLmpzXCIpLkludGVyYWN0aW9uT3B0aW9uc30gKi8gKG9wdGlvbnMpXG4gICAgKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRvdGFsRGVsdGFfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3REZWx0YV8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubWF4RGVsdGFfID0gb3B0aW9ucy5tYXhEZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhEZWx0YSA6IDE7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMudGltZW91dF8gPSBvcHRpb25zLnRpbWVvdXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGltZW91dCA6IDgwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnVzZUFuY2hvcl8gPVxuICAgICAgb3B0aW9ucy51c2VBbmNob3IgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudXNlQW5jaG9yIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXyA9XG4gICAgICBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvblxuICAgICAgICA6IGZhbHNlO1xuXG4gICAgY29uc3QgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IGFsd2F5cztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAqL1xuICAgIHRoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMub25Gb2N1c09ubHlcbiAgICAgID8gYWxsKGZvY3VzV2l0aFRhYmluZGV4LCBjb25kaXRpb24pXG4gICAgICA6IGNvbmRpdGlvbjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuc3RhcnRUaW1lXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1JldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+fVxuICAgICAqL1xuICAgIHRoaXMudGltZW91dElkXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge01vZGV8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBUcmFja3BhZCBldmVudHMgc2VwYXJhdGVkIGJ5IHRoaXMgZGVsYXkgd2lsbCBiZSBjb25zaWRlcmVkIHNlcGFyYXRlXG4gICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrcGFkRXZlbnRHYXBfID0gNDAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD59XG4gICAgICovXG4gICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF87XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGRlbHRhIHZhbHVlcyBwZXIgem9vbSBsZXZlbFxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRlbHRhUGVyWm9vbV8gPSAzMDA7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVuZEludGVyYWN0aW9uXygpIHtcbiAgICB0aGlzLnRyYWNrcGFkVGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIGlmICghbWFwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24oXG4gICAgICB1bmRlZmluZWQsXG4gICAgICB0aGlzLmxhc3REZWx0YV8gPyAodGhpcy5sYXN0RGVsdGFfID4gMCA/IDEgOiAtMSkgOiAwLFxuICAgICAgdGhpcy5sYXN0QW5jaG9yX1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGEgbW91c2V3aGVlbC1ldmVudCkgYW5kIGV2ZW50dWFsbHlcbiAgICogem9vbXMgdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAqL1xuICBoYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IG1hcEJyb3dzZXJFdmVudC50eXBlO1xuICAgIGlmICh0eXBlICE9PSBFdmVudFR5cGUuV0hFRUwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgY29uc3Qgd2hlZWxFdmVudCA9IC8qKiBAdHlwZSB7V2hlZWxFdmVudH0gKi8gKFxuICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgICApO1xuICAgIHdoZWVsRXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICh0aGlzLnVzZUFuY2hvcl8pIHtcbiAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICB9XG5cbiAgICAvLyBEZWx0YSBub3JtYWxpc2F0aW9uIGluc3BpcmVkIGJ5XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvYmxvYi8wMDFjN2I5L2pzL3VpL2hhbmRsZXIvc2Nyb2xsX3pvb20uanNcbiAgICBsZXQgZGVsdGE7XG4gICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5XSEVFTCkge1xuICAgICAgZGVsdGEgPSB3aGVlbEV2ZW50LmRlbHRhWTtcbiAgICAgIGlmIChGSVJFRk9YICYmIHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9QSVhFTCkge1xuICAgICAgICBkZWx0YSAvPSBERVZJQ0VfUElYRUxfUkFUSU87XG4gICAgICB9XG4gICAgICBpZiAod2hlZWxFdmVudC5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkUpIHtcbiAgICAgICAgZGVsdGEgKj0gNDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMubGFzdERlbHRhXyA9IGRlbHRhO1xuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIGlmICh0aGlzLnN0YXJ0VGltZV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5zdGFydFRpbWVfID0gbm93O1xuICAgIH1cblxuICAgIGlmICghdGhpcy5tb2RlXyB8fCBub3cgLSB0aGlzLnN0YXJ0VGltZV8gPiB0aGlzLnRyYWNrcGFkRXZlbnRHYXBfKSB7XG4gICAgICB0aGlzLm1vZGVfID0gTWF0aC5hYnMoZGVsdGEpIDwgNCA/ICd0cmFja3BhZCcgOiAnd2hlZWwnO1xuICAgIH1cblxuICAgIGNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgIGlmIChcbiAgICAgIHRoaXMubW9kZV8gPT09ICd0cmFja3BhZCcgJiZcbiAgICAgICEodmlldy5nZXRDb25zdHJhaW5SZXNvbHV0aW9uKCkgfHwgdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXylcbiAgICApIHtcbiAgICAgIGlmICh0aGlzLnRyYWNrcGFkVGltZW91dElkXykge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50cmFja3BhZFRpbWVvdXRJZF8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3LmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfID0gc2V0VGltZW91dChcbiAgICAgICAgdGhpcy5lbmRJbnRlcmFjdGlvbl8uYmluZCh0aGlzKSxcbiAgICAgICAgdGhpcy50aW1lb3V0X1xuICAgICAgKTtcbiAgICAgIHZpZXcuYWRqdXN0Wm9vbSgtZGVsdGEgLyB0aGlzLmRlbHRhUGVyWm9vbV8sIHRoaXMubGFzdEFuY2hvcl8pO1xuICAgICAgdGhpcy5zdGFydFRpbWVfID0gbm93O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHRoaXMudG90YWxEZWx0YV8gKz0gZGVsdGE7XG5cbiAgICBjb25zdCB0aW1lTGVmdCA9IE1hdGgubWF4KHRoaXMudGltZW91dF8gLSAobm93IC0gdGhpcy5zdGFydFRpbWVfKSwgMCk7XG5cbiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWRfKTtcbiAgICB0aGlzLnRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KFxuICAgICAgdGhpcy5oYW5kbGVXaGVlbFpvb21fLmJpbmQodGhpcywgbWFwKSxcbiAgICAgIHRpbWVMZWZ0XG4gICAgKTtcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgKi9cbiAgaGFuZGxlV2hlZWxab29tXyhtYXApIHtcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIGxldCBkZWx0YSA9XG4gICAgICAtY2xhbXAoXG4gICAgICAgIHRoaXMudG90YWxEZWx0YV8sXG4gICAgICAgIC10aGlzLm1heERlbHRhXyAqIHRoaXMuZGVsdGFQZXJab29tXyxcbiAgICAgICAgdGhpcy5tYXhEZWx0YV8gKiB0aGlzLmRlbHRhUGVyWm9vbV9cbiAgICAgICkgLyB0aGlzLmRlbHRhUGVyWm9vbV87XG4gICAgaWYgKHZpZXcuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHx8IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pIHtcbiAgICAgIC8vIHZpZXcgaGFzIGEgem9vbSBjb25zdHJhaW50LCB6b29tIGJ5IDFcbiAgICAgIGRlbHRhID0gZGVsdGEgPyAoZGVsdGEgPiAwID8gMSA6IC0xKSA6IDA7XG4gICAgfVxuICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB0aGlzLmxhc3RBbmNob3JfLCB0aGlzLmR1cmF0aW9uXyk7XG5cbiAgICB0aGlzLm1vZGVfID0gdW5kZWZpbmVkO1xuICAgIHRoaXMudG90YWxEZWx0YV8gPSAwO1xuICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgIHRoaXMuc3RhcnRUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIG9yIGRpc2FibGUgdXNpbmcgdGhlIG1vdXNlJ3MgbG9jYXRpb24gYXMgYW4gYW5jaG9yIHdoZW4gem9vbWluZ1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUFuY2hvciB0cnVlIHRvIHpvb20gdG8gdGhlIG1vdXNlJ3MgbG9jYXRpb24sIGZhbHNlXG4gICAqIHRvIHpvb20gdG8gdGhlIGNlbnRlciBvZiB0aGUgbWFwXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1vdXNlQW5jaG9yKHVzZUFuY2hvcikge1xuICAgIHRoaXMudXNlQW5jaG9yXyA9IHVzZUFuY2hvcjtcbiAgICBpZiAoIXVzZUFuY2hvcikge1xuICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vdXNlV2hlZWxab29tO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtcbiAgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsXG59IGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQge0ZBTFNFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHtkaXNhYmxlfSBmcm9tICcuLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aHJlc2hvbGQ9MC4zXSBNaW5pbWFsIGFuZ2xlIGluIHJhZGlhbnMgdG8gc3RhcnQgYSByb3RhdGlvbi5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSB0d2lzdGluZyB3aXRoIHR3byBmaW5nZXJzXG4gKiBvbiBhIHRvdWNoIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgUGluY2hSb3RhdGUgZXh0ZW5kcyBQb2ludGVySW50ZXJhY3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIGNvbnN0IHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKFxuICAgICAgb3B0aW9uc1xuICAgICk7XG5cbiAgICBpZiAoIXBvaW50ZXJPcHRpb25zLnN0b3BEb3duKSB7XG4gICAgICBwb2ludGVyT3B0aW9ucy5zdG9wRG93biA9IEZBTFNFO1xuICAgIH1cblxuICAgIHN1cGVyKHBvaW50ZXJPcHRpb25zKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLmFuY2hvcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpbmdfID0gZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5yb3RhdGlvbkRlbHRhXyA9IDAuMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnRocmVzaG9sZF8gPSBvcHRpb25zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aHJlc2hvbGQgOiAwLjM7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqL1xuICBoYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgbGV0IHJvdGF0aW9uRGVsdGEgPSAwLjA7XG5cbiAgICBjb25zdCB0b3VjaDAgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzBdO1xuICAgIGNvbnN0IHRvdWNoMSA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMV07XG5cbiAgICAvLyBhbmdsZSBiZXR3ZWVuIHRvdWNoZXNcbiAgICBjb25zdCBhbmdsZSA9IE1hdGguYXRhbjIoXG4gICAgICB0b3VjaDEuY2xpZW50WSAtIHRvdWNoMC5jbGllbnRZLFxuICAgICAgdG91Y2gxLmNsaWVudFggLSB0b3VjaDAuY2xpZW50WFxuICAgICk7XG5cbiAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGRlbHRhID0gYW5nbGUgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfICs9IGRlbHRhO1xuICAgICAgaWYgKCF0aGlzLnJvdGF0aW5nXyAmJiBNYXRoLmFicyh0aGlzLnJvdGF0aW9uRGVsdGFfKSA+IHRoaXMudGhyZXNob2xkXykge1xuICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IHRydWU7XG4gICAgICB9XG4gICAgICByb3RhdGlvbkRlbHRhID0gZGVsdGE7XG4gICAgfVxuICAgIHRoaXMubGFzdEFuZ2xlXyA9IGFuZ2xlO1xuXG4gICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcm90YXRlIGFuY2hvciBwb2ludC5cbiAgICAvLyBGSVhNRTogc2hvdWxkIGJlIHRoZSBpbnRlcnNlY3Rpb24gcG9pbnQgYmV0d2VlbiB0aGUgbGluZXM6XG4gICAgLy8gICAgIHRvdWNoMCx0b3VjaDEgYW5kIHByZXZpb3VzVG91Y2gwLHByZXZpb3VzVG91Y2gxXG4gICAgdGhpcy5hbmNob3JfID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChcbiAgICAgIG1hcC5nZXRFdmVudFBpeGVsKGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpKVxuICAgICk7XG5cbiAgICAvLyByb3RhdGVcbiAgICBpZiAodGhpcy5yb3RhdGluZ18pIHtcbiAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgIHZpZXcuYWRqdXN0Um90YXRpb25JbnRlcm5hbChyb3RhdGlvbkRlbHRhLCB0aGlzLmFuY2hvcl8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICovXG4gIGhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoIDwgMikge1xuICAgICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgIGNvbnN0IHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAqL1xuICBoYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgIGNvbnN0IG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICB0aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgdGhpcy5yb3RhdGluZ18gPSBmYWxzZTtcbiAgICAgIHRoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG4gICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGluY2hSb3RhdGU7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hab29tXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHtcbiAgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsXG59IGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQge0ZBTFNFfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249NDAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBwaW5jaGluZyB3aXRoIHR3byBmaW5nZXJzXG4gKiBvbiBhIHRvdWNoIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xuY2xhc3MgUGluY2hab29tIGV4dGVuZHMgUG9pbnRlckludGVyYWN0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgICBjb25zdCBwb2ludGVyT3B0aW9ucyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Qb2ludGVyLmpzXCIpLk9wdGlvbnN9ICovIChcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuXG4gICAgaWYgKCFwb2ludGVyT3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgcG9pbnRlck9wdGlvbnMuc3RvcERvd24gPSBGQUxTRTtcbiAgICB9XG5cbiAgICBzdXBlcihwb2ludGVyT3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICovXG4gICAgdGhpcy5hbmNob3JfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiA0MDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMubGFzdERpc3RhbmNlXyA9IHVuZGVmaW5lZDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICovXG4gIGhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBsZXQgc2NhbGVEZWx0YSA9IDEuMDtcblxuICAgIGNvbnN0IHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgY29uc3QgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcbiAgICBjb25zdCBkeCA9IHRvdWNoMC5jbGllbnRYIC0gdG91Y2gxLmNsaWVudFg7XG4gICAgY29uc3QgZHkgPSB0b3VjaDAuY2xpZW50WSAtIHRvdWNoMS5jbGllbnRZO1xuXG4gICAgLy8gZGlzdGFuY2UgYmV0d2VlbiB0b3VjaGVzXG4gICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuXG4gICAgaWYgKHRoaXMubGFzdERpc3RhbmNlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzY2FsZURlbHRhID0gdGhpcy5sYXN0RGlzdGFuY2VfIC8gZGlzdGFuY2U7XG4gICAgfVxuICAgIHRoaXMubGFzdERpc3RhbmNlXyA9IGRpc3RhbmNlO1xuXG4gICAgY29uc3QgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICBjb25zdCB2aWV3ID0gbWFwLmdldFZpZXcoKTtcblxuICAgIGlmIChzY2FsZURlbHRhICE9IDEuMCkge1xuICAgICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSBzY2FsZURlbHRhO1xuICAgIH1cblxuICAgIC8vIHNjYWxlIGFuY2hvciBwb2ludC5cbiAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKFxuICAgICAgbWFwLmdldEV2ZW50UGl4ZWwoY2VudHJvaWRGcm9tUG9pbnRlcnModGhpcy50YXJnZXRQb2ludGVycykpXG4gICAgKTtcblxuICAgIC8vIHNjYWxlLCBieXBhc3MgdGhlIHJlc29sdXRpb24gY29uc3RyYWludFxuICAgIG1hcC5yZW5kZXIoKTtcbiAgICB2aWV3LmFkanVzdFJlc29sdXRpb25JbnRlcm5hbChzY2FsZURlbHRhLCB0aGlzLmFuY2hvcl8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKi9cbiAgaGFuZGxlVXBFdmVudChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgY29uc3QgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmxhc3RTY2FsZURlbHRhXyA+IDEgPyAxIDogLTE7XG4gICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fLCBkaXJlY3Rpb24pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgKi9cbiAgaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICBjb25zdCBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgIHRoaXMubGFzdERpc3RhbmNlXyA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gMTtcbiAgICAgIGlmICghdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQaW5jaFpvb207XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbkV2ZW50VHlwZSBmcm9tICcuL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IENvbXBvc2l0ZU1hcFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvQ29tcG9zaXRlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBMYXllciBmcm9tICcuL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCBMYXllckdyb3VwLCB7R3JvdXBFdmVudH0gZnJvbSAnLi9sYXllci9Hcm91cC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50IGZyb20gJy4vTWFwQnJvd3NlckV2ZW50LmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRIYW5kbGVyIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEV2ZW50IGZyb20gJy4vTWFwRXZlbnQuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuL01hcEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwUHJvcGVydHkgZnJvbSAnLi9NYXBQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgT2JqZWN0RXZlbnRUeXBlIGZyb20gJy4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBQb2ludGVyRXZlbnRUeXBlIGZyb20gJy4vcG9pbnRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVRdWV1ZSwge2dldFRpbGVQcmlvcml0eX0gZnJvbSAnLi9UaWxlUXVldWUuanMnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi9WaWV3LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7REVWSUNFX1BJWEVMX1JBVElPLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSU30gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHtUUlVFfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQge1xuICBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSxcbiAgY3JlYXRlIGFzIGNyZWF0ZVRyYW5zZm9ybSxcbn0gZnJvbSAnLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge1xuICBjbG9uZSxcbiAgY3JlYXRlT3JVcGRhdGVFbXB0eSxcbiAgZXF1YWxzIGFzIGVxdWFsc0V4dGVudCxcbiAgZ2V0Rm9yVmlld0FuZFNpemUsXG4gIGlzRW1wdHksXG59IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7ZGVmYXVsdHMgYXMgZGVmYXVsdENvbnRyb2xzfSBmcm9tICcuL2NvbnRyb2wvZGVmYXVsdHMuanMnO1xuaW1wb3J0IHtkZWZhdWx0cyBhcyBkZWZhdWx0SW50ZXJhY3Rpb25zfSBmcm9tICcuL2ludGVyYWN0aW9uL2RlZmF1bHRzLmpzJztcbmltcG9ydCB7ZXF1YWxzfSBmcm9tICcuL2FycmF5LmpzJztcbmltcG9ydCB7ZnJvbVVzZXJDb29yZGluYXRlLCB0b1VzZXJDb29yZGluYXRlfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4vdXRpbC5qcyc7XG5pbXBvcnQge2hhc0FyZWF9IGZyb20gJy4vc2l6ZS5qcyc7XG5pbXBvcnQge2xpc3RlbiwgdW5saXN0ZW5CeUtleX0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHtyZW1vdmVOb2RlfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQge3dhcm59IGZyb20gJy4vY29uc29sZS5qcyc7XG5cbi8qKlxuICogU3RhdGUgb2YgdGhlIGN1cnJlbnQgZnJhbWUuIE9ubHkgYHBpeGVsUmF0aW9gLCBgdGltZWAgYW5kIGB2aWV3U3RhdGVgIHNob3VsZFxuICogYmUgdXNlZCBpbiBhcHBsaWNhdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGcmFtZVN0YXRlXG4gKiBAcHJvcGVydHkge251bWJlcn0gcGl4ZWxSYXRpbyBUaGUgcGl4ZWwgcmF0aW8gb2YgdGhlIGZyYW1lLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWUgVGhlIHRpbWUgd2hlbiByZW5kZXJpbmcgb2YgdGhlIGZyYW1lIHdhcyByZXF1ZXN0ZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVmlldy5qc1wiKS5TdGF0ZX0gdmlld1N0YXRlIFRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3LlxuICogQHByb3BlcnR5IHtib29sZWFufSBhbmltYXRlIEFuaW1hdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gQ29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcInJidXNoXCIpLmRlZmF1bHR9IGRlY2x1dHRlclRyZWUgRGVjbHV0dGVyVHJlZS5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQgKGluIHZpZXcgcHJvamVjdGlvbiBjb29yZGluYXRlcykuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW25leHRFeHRlbnRdIE5leHQgZXh0ZW50IGR1cmluZyBhbiBhbmltYXRpb24gc2VyaWVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlPn0gbGF5ZXJTdGF0ZXNBcnJheSBMYXllclN0YXRlc0FycmF5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxheWVySW5kZXggTGF5ZXJJbmRleC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSBQaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8UG9zdFJlbmRlckZ1bmN0aW9uPn0gcG9zdFJlbmRlckZ1bmN0aW9ucyBQb3N0UmVuZGVyRnVuY3Rpb25zLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICogQHByb3BlcnR5IHtUaWxlUXVldWV9IHRpbGVRdWV1ZSBUaWxlUXVldWUuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHVzZWRUaWxlcyBVc2VkVGlsZXMuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IHZpZXdIaW50cyBWaWV3SGludHMuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHdhbnRlZFRpbGVzIFdhbnRlZFRpbGVzLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IG1hcElkIFRoZSBpZCBvZiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gcmVuZGVyVGFyZ2V0cyBJZGVudGlmaWVycyBvZiBwcmV2aW91c2x5IHJlbmRlcmVkIGVsZW1lbnRzLlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKE1hcCwgP0ZyYW1lU3RhdGUpOiBhbnl9IFBvc3RSZW5kZXJGdW5jdGlvblxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQXRQaXhlbE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7dW5kZWZpbmVkfGZ1bmN0aW9uKGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL3NvdXJjZS9Tb3VyY2VcIikuZGVmYXVsdD4pOiBib29sZWFufSBbbGF5ZXJGaWx0ZXJdIExheWVyIGZpbHRlclxuICogZnVuY3Rpb24uIFRoZSBmaWx0ZXIgZnVuY3Rpb24gd2lsbCByZWNlaXZlIG9uZSBhcmd1bWVudCwgdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyLWNhbmRpZGF0ZX0gYW5kIGl0IHNob3VsZCByZXR1cm4gYSBib29sZWFuIHZhbHVlLlxuICogT25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgXG4gKiB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaGl0VG9sZXJhbmNlPTBdIEhpdC1kZXRlY3Rpb24gdG9sZXJhbmNlIGluIGNzcyBwaXhlbHMuIFBpeGVsc1xuICogaW5zaWRlIHRoZSByYWRpdXMgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aWxsIGJlIGNoZWNrZWQgZm9yIGZlYXR1cmVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY2hlY2tXcmFwcGVkPXRydWVdIENoZWNrLVdyYXBwZWQgV2lsbCBjaGVjayBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzIGluc2lkZSB0aGUgcmFuZ2Ugb2ZcbiAqICAgKy8tIDEgd29ybGQgd2lkdGguIFdvcmtzIG9ubHkgaWYgYSBwcm9qZWN0aW9uIGlzIHVzZWQgdGhhdCBjYW4gYmUgd3JhcHBlZC5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1hcE9wdGlvbnNJbnRlcm5hbFxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBbY29udHJvbHNdIENvbnRyb2xzLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IFtpbnRlcmFjdGlvbnNdIEludGVyYWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9IGtleWJvYXJkRXZlbnRUYXJnZXQgS2V5Ym9hcmRFdmVudFRhcmdldC5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IG92ZXJsYXlzIE92ZXJsYXlzLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmxheWVyZ3JvdXAnfCdjaGFuZ2U6c2l6ZSd8J2NoYW5nZTp0YXJnZXQnfCdjaGFuZ2U6dmlldyd9IE1hcE9iamVjdEV2ZW50VHlwZXNcbiAqL1xuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxNYXBPYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL01hcEV2ZW50VHlwZVwiKS5UeXBlcywgaW1wb3J0KFwiLi9NYXBFdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL3JlbmRlci9FdmVudFR5cGVcIikuTWFwUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xNYXBPYmplY3RFdmVudFR5cGVzfFxuICogICAgICBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFR5cGVcIikuVHlwZXN8aW1wb3J0KFwiLi9NYXBFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5NYXBSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBNYXBFdmVudEhhbmRsZXJcbiAqL1xuXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIHRoZSBtYXAuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIENvbnRyb2xzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL2RlZmF1bHRzLmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXSBUaGUgcmF0aW8gYmV0d2VlblxuICogcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzIChkaXBzKSBvbiB0aGUgZGV2aWNlLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc11cbiAqIEludGVyYWN0aW9ucyB0aGF0IGFyZSBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vZGVmYXVsdHMuZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fHN0cmluZ30gW2tleWJvYXJkRXZlbnRUYXJnZXRdIFRoZSBlbGVtZW50IHRvXG4gKiBsaXN0ZW4gdG8ga2V5Ym9hcmQgZXZlbnRzIG9uLiBUaGlzIGRldGVybWluZXMgd2hlbiB0aGUgYEtleWJvYXJkUGFuYCBhbmRcbiAqIGBLZXlib2FyZFpvb21gIGludGVyYWN0aW9ucyB0cmlnZ2VyLiBGb3IgZXhhbXBsZSwgaWYgdGhpcyBvcHRpb24gaXMgc2V0IHRvXG4gKiBgZG9jdW1lbnRgIHRoZSBrZXlib2FyZCBpbnRlcmFjdGlvbnMgd2lsbCBhbHdheXMgdHJpZ2dlci4gSWYgdGhpcyBvcHRpb24gaXNcbiAqIG5vdCBzcGVjaWZpZWQsIHRoZSBlbGVtZW50IHRoZSBsaWJyYXJ5IGxpc3RlbnMgdG8ga2V5Ym9hcmQgZXZlbnRzIG9uIGlzIHRoZVxuICogbWFwIHRhcmdldCAoaS5lLiB0aGUgdXNlci1wcm92aWRlZCBkaXYgZm9yIHRoZSBtYXApLiBJZiB0aGlzIGlzIG5vdFxuICogYGRvY3VtZW50YCwgdGhlIHRhcmdldCBlbGVtZW50IG5lZWRzIHRvIGJlIGZvY3VzZWQgZm9yIGtleSBldmVudHMgdG8gYmVcbiAqIGVtaXR0ZWQsIHJlcXVpcmluZyB0aGF0IHRoZSB0YXJnZXQgZWxlbWVudCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fExheWVyR3JvdXB9IFtsYXllcnNdXG4gKiBMYXllcnMuIElmIHRoaXMgaXMgbm90IGRlZmluZWQsIGEgbWFwIHdpdGggbm8gbGF5ZXJzIHdpbGwgYmUgcmVuZGVyZWQuIE5vdGVcbiAqIHRoYXQgbGF5ZXJzIGFyZSByZW5kZXJlZCBpbiB0aGUgb3JkZXIgc3VwcGxpZWQsIHNvIGlmIHlvdSB3YW50LCBmb3IgZXhhbXBsZSxcbiAqIGEgdmVjdG9yIGxheWVyIHRvIGFwcGVhciBvbiB0b3Agb2YgYSB0aWxlIGxheWVyLCBpdCBtdXN0IGNvbWUgYWZ0ZXIgdGhlIHRpbGVcbiAqIGxheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhUaWxlc0xvYWRpbmc9MTZdIE1heGltdW0gbnVtYmVyIHRpbGVzIHRvIGxvYWRcbiAqIHNpbXVsdGFuZW91c2x5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlPTFdIFRoZSBtaW5pbXVtIGRpc3RhbmNlIGluIHBpeGVscyB0aGVcbiAqIGN1cnNvciBtdXN0IG1vdmUgdG8gYmUgZGV0ZWN0ZWQgYXMgYSBtYXAgbW92ZSBldmVudCBpbnN0ZWFkIG9mIGEgY2xpY2suXG4gKiBJbmNyZWFzaW5nIHRoaXMgdmFsdWUgY2FuIG1ha2UgaXQgZWFzaWVyIHRvIGNsaWNrIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gW292ZXJsYXlzXVxuICogT3ZlcmxheXMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIEJ5IGRlZmF1bHQsIG5vIG92ZXJsYXlzIGFyZSBhZGRlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgY29udGFpbmVyIGZvciB0aGUgbWFwLCBlaXRoZXIgdGhlXG4gKiBlbGVtZW50IGl0c2VsZiBvciB0aGUgYGlkYCBvZiB0aGUgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb25cbiAqIHRpbWUsIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRUYXJnZXR9IG11c3QgYmUgY2FsbGVkIGZvciB0aGUgbWFwIHRvIGJlXG4gKiByZW5kZXJlZC4gSWYgcGFzc2VkIGJ5IGVsZW1lbnQsIHRoZSBjb250YWluZXIgY2FuIGJlIGluIGEgc2Vjb25kYXJ5IGRvY3VtZW50LlxuICogKipOb3RlOioqIENTUyBgdHJhbnNmb3JtYCBzdXBwb3J0IGZvciB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbGltaXRlZCB0byBgc2NhbGVgLlxuICogQHByb3BlcnR5IHtWaWV3fFByb21pc2U8aW1wb3J0KFwiLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zPn0gW3ZpZXddIFRoZSBtYXAncyB2aWV3LiAgTm8gbGF5ZXIgc291cmNlcyB3aWxsIGJlXG4gKiBmZXRjaGVkIHVubGVzcyB0aGlzIGlzIHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0Vmlld30uXG4gKi9cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eShsYXllcikge1xuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllcikge1xuICAgIGxheWVyLnNldE1hcEludGVybmFsKG51bGwpO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllckdyb3VwKSB7XG4gICAgbGF5ZXIuZ2V0TGF5ZXJzKCkuZm9yRWFjaChyZW1vdmVMYXllck1hcFByb3BlcnR5KTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICogQHBhcmFtIHtNYXB9IG1hcCBNYXAuXG4gKi9cbmZ1bmN0aW9uIHNldExheWVyTWFwUHJvcGVydHkobGF5ZXIsIG1hcCkge1xuICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllcikge1xuICAgIGxheWVyLnNldE1hcEludGVybmFsKG1hcCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyR3JvdXApIHtcbiAgICBjb25zdCBsYXllcnMgPSBsYXllci5nZXRMYXllcnMoKS5nZXRBcnJheSgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGxheWVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBzZXRMYXllck1hcFByb3BlcnR5KGxheWVyc1tpXSwgbWFwKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBUaGUgbWFwIGlzIHRoZSBjb3JlIGNvbXBvbmVudCBvZiBPcGVuTGF5ZXJzLiBGb3IgYSBtYXAgdG8gcmVuZGVyLCBhIHZpZXcsXG4gKiBvbmUgb3IgbW9yZSBsYXllcnMsIGFuZCBhIHRhcmdldCBjb250YWluZXIgYXJlIG5lZWRlZDpcbiAqXG4gKiAgICAgaW1wb3J0IE1hcCBmcm9tICdvbC9NYXAuanMnO1xuICogICAgIGltcG9ydCBWaWV3IGZyb20gJ29sL1ZpZXcuanMnO1xuICogICAgIGltcG9ydCBUaWxlTGF5ZXIgZnJvbSAnb2wvbGF5ZXIvVGlsZS5qcyc7XG4gKiAgICAgaW1wb3J0IE9TTSBmcm9tICdvbC9zb3VyY2UvT1NNLmpzJztcbiAqXG4gKiAgICAgY29uc3QgbWFwID0gbmV3IE1hcCh7XG4gKiAgICAgICB2aWV3OiBuZXcgVmlldyh7XG4gKiAgICAgICAgIGNlbnRlcjogWzAsIDBdLFxuICogICAgICAgICB6b29tOiAxLFxuICogICAgICAgfSksXG4gKiAgICAgICBsYXllcnM6IFtcbiAqICAgICAgICAgbmV3IFRpbGVMYXllcih7XG4gKiAgICAgICAgICAgc291cmNlOiBuZXcgT1NNKCksXG4gKiAgICAgICAgIH0pLFxuICogICAgICAgXSxcbiAqICAgICAgIHRhcmdldDogJ21hcCcsXG4gKiAgICAgfSk7XG4gKlxuICogVGhlIGFib3ZlIHNuaXBwZXQgY3JlYXRlcyBhIG1hcCB1c2luZyBhIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvVGlsZX5UaWxlTGF5ZXJ9IHRvXG4gKiBkaXNwbGF5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL09TTX5PU019IE9TTSBkYXRhIGFuZCByZW5kZXIgaXQgdG8gYSBET01cbiAqIGVsZW1lbnQgd2l0aCB0aGUgaWQgYG1hcGAuXG4gKlxuICogVGhlIGNvbnN0cnVjdG9yIHBsYWNlcyBhIHZpZXdwb3J0IGNvbnRhaW5lciAod2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLXZpZXdwb3J0YCkgaW4gdGhlIHRhcmdldCBlbGVtZW50IChzZWUgYGdldFZpZXdwb3J0KClgKSwgYW5kIHRoZW4gdHdvXG4gKiBmdXJ0aGVyIGVsZW1lbnRzIHdpdGhpbiB0aGUgdmlld3BvcnQ6IG9uZSB3aXRoIENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRgIGZvciBjb250cm9scyBhbmQgc29tZSBvdmVybGF5cywgYW5kIG9uZSB3aXRoXG4gKiBDU1MgY2xhc3MgbmFtZSBgb2wtb3ZlcmxheWNvbnRhaW5lcmAgZm9yIG90aGVyIG92ZXJsYXlzIChzZWUgdGhlIGBzdG9wRXZlbnRgXG4gKiBvcHRpb24gb2Yge0BsaW5rIG1vZHVsZTpvbC9PdmVybGF5fk92ZXJsYXl9IGZvciB0aGUgZGlmZmVyZW5jZSkuIFRoZSBtYXBcbiAqIGl0c2VsZiBpcyBwbGFjZWQgaW4gYSBmdXJ0aGVyIGVsZW1lbnQgd2l0aGluIHRoZSB2aWV3cG9ydC5cbiAqXG4gKiBMYXllcnMgYXJlIHN0b3JlZCBhcyBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpblxuICogbGF5ZXJHcm91cHMuIEEgdG9wLWxldmVsIGdyb3VwIGlzIHByb3ZpZGVkIGJ5IHRoZSBsaWJyYXJ5LiBUaGlzIGlzIHdoYXQgaXNcbiAqIGFjY2Vzc2VkIGJ5IGBnZXRMYXllckdyb3VwYCBhbmQgYHNldExheWVyR3JvdXBgLiBMYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgYXJlIGFkZGVkIHRvIHRoaXMgZ3JvdXAsIGFuZCBgYWRkTGF5ZXJgIGFuZCBgcmVtb3ZlTGF5ZXJgIGNoYW5nZSB0aGVcbiAqIGxheWVyIGNvbGxlY3Rpb24gaW4gdGhlIGdyb3VwLiBgZ2V0TGF5ZXJzYCBpcyBhIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvclxuICogYGdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKWAuIE5vdGUgdGhhdCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0dyb3VwfkxheWVyR3JvdXB9XG4gKiBpcyBhIHN1YmNsYXNzIG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZX5CYXNlTGF5ZXJ9LCBzbyBsYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgb3IgYWRkZWQgd2l0aCBgYWRkTGF5ZXJgIGNhbiBiZSBncm91cHMsIHdoaWNoIGNhbiBjb250YWluIGZ1cnRoZXJcbiAqIGdyb3VwcywgYW5kIHNvIG9uLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudC5qc1wiKS5NYXBCcm93c2VyRXZlbnRcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL01hcEV2ZW50LmpzXCIpLk1hcEV2ZW50XG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnQuanNcIikuZGVmYXVsdCNwcmVjb21wb3NlXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnQuanNcIikuZGVmYXVsdCNwb3N0Y29tcG9zZVxuICogQGZpcmVzIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHQjcmVuZGVyY29tcGxldGVcbiAqIEBhcGlcbiAqL1xuY2xhc3MgTWFwIGV4dGVuZHMgQmFzZU9iamVjdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge01hcE9wdGlvbnN9IFtvcHRpb25zXSBNYXAgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge01hcEV2ZW50SGFuZGxlcjxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub247XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge01hcEV2ZW50SGFuZGxlcjxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub25jZTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7TWFwRXZlbnRIYW5kbGVyPHZvaWQ+fVxuICAgICAqL1xuICAgIHRoaXMudW47XG5cbiAgICBjb25zdCBvcHRpb25zSW50ZXJuYWwgPSBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlckNvbXBsZXRlXztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5sb2FkZWRfID0gdHJ1ZTtcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfID0gdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQuYmluZCh0aGlzKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm1heFRpbGVzTG9hZGluZ18gPVxuICAgICAgb3B0aW9ucy5tYXhUaWxlc0xvYWRpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nIDogMTY7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5waXhlbFJhdGlvXyA9XG4gICAgICBvcHRpb25zLnBpeGVsUmF0aW8gIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMucGl4ZWxSYXRpb1xuICAgICAgICA6IERFVklDRV9QSVhFTF9SQVRJTztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1JldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+fVxuICAgICAqL1xuICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5hbmltYXRpb25EZWxheV8gPSB0aGlzLmFuaW1hdGlvbkRlbGF5Xy5iaW5kKHRoaXMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAqL1xuICAgIHRoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICovXG4gICAgdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmZyYW1lSW5kZXhfID0gMDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9GcmFtZVN0YXRlfVxuICAgICAqL1xuICAgIHRoaXMuZnJhbWVTdGF0ZV8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGV4dGVudCBhdCB0aGUgcHJldmlvdXMgJ21vdmVlbmQnIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLnByZXZpb3VzRXh0ZW50XyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAqL1xuICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICovXG4gICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy52aWV3cG9ydF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnZpZXdwb3J0Xy5jbGFzc05hbWUgPVxuICAgICAgJ29sLXZpZXdwb3J0JyArICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgPyAnIG9sLXRvdWNoJyA6ICcnKTtcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgdGhpcy52aWV3cG9ydF8uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICB0aGlzLnZpZXdwb3J0Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICovXG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuekluZGV4ID0gJzAnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lcl8uY2xhc3NOYW1lID0gJ29sLW92ZXJsYXljb250YWluZXInO1xuICAgIHRoaXMudmlld3BvcnRfLmFwcGVuZENoaWxkKHRoaXMub3ZlcmxheUNvbnRhaW5lcl8pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAqL1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnpJbmRleCA9ICcwJztcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCc7XG4gICAgdGhpcy52aWV3cG9ydF8uYXBwZW5kQ2hpbGQodGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xyk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtNYXBCcm93c2VyRXZlbnRIYW5kbGVyfVxuICAgICAqL1xuICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubW92ZVRvbGVyYW5jZV8gPSBvcHRpb25zLm1vdmVUb2xlcmFuY2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgKi9cbiAgICB0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID0gb3B0aW9uc0ludGVybmFsLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLnRhcmdldENoYW5nZUhhbmRsZXJLZXlzXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0RWxlbWVudF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge1Jlc2l6ZU9ic2VydmVyfVxuICAgICAqL1xuICAgIHRoaXMucmVzaXplT2JzZXJ2ZXJfID0gbmV3IFJlc2l6ZU9ic2VydmVyKCgpID0+IHRoaXMudXBkYXRlU2l6ZSgpKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICB0aGlzLmNvbnRyb2xzID0gb3B0aW9uc0ludGVybmFsLmNvbnRyb2xzIHx8IGRlZmF1bHRDb250cm9scygpO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgdGhpcy5pbnRlcmFjdGlvbnMgPVxuICAgICAgb3B0aW9uc0ludGVybmFsLmludGVyYWN0aW9ucyB8fFxuICAgICAgZGVmYXVsdEludGVyYWN0aW9ucyh7XG4gICAgICAgIG9uRm9jdXNPbmx5OiB0cnVlLFxuICAgICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlzXyA9IG9wdGlvbnNJbnRlcm5hbC5vdmVybGF5cztcblxuICAgIC8qKlxuICAgICAqIEEgbG9va3VwIG9mIG92ZXJsYXlzIGJ5IGlkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgKi9cbiAgICB0aGlzLm92ZXJsYXlJZEluZGV4XyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZXJfID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgeyFBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fVxuICAgICAqL1xuICAgIHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18gPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge1RpbGVRdWV1ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVRdWV1ZV8gPSBuZXcgVGlsZVF1ZXVlKFxuICAgICAgdGhpcy5nZXRUaWxlUHJpb3JpdHkuYmluZCh0aGlzKSxcbiAgICAgIHRoaXMuaGFuZGxlVGlsZUNoYW5nZV8uYmluZCh0aGlzKVxuICAgICk7XG5cbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKFxuICAgICAgTWFwUHJvcGVydHkuTEFZRVJHUk9VUCxcbiAgICAgIHRoaXMuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfXG4gICAgKTtcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlZJRVcsIHRoaXMuaGFuZGxlVmlld0NoYW5nZWRfKTtcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlNJWkUsIHRoaXMuaGFuZGxlU2l6ZUNoYW5nZWRfKTtcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKE1hcFByb3BlcnR5LlRBUkdFVCwgdGhpcy5oYW5kbGVUYXJnZXRDaGFuZ2VkXyk7XG5cbiAgICAvLyBzZXRQcm9wZXJ0aWVzIHdpbGwgdHJpZ2dlciB0aGUgcmVuZGVyaW5nIG9mIHRoZSBtYXAgaWYgdGhlIG1hcFxuICAgIC8vIGlzIFwiZGVmaW5lZFwiIGFscmVhZHkuXG4gICAgdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdGlvbnNJbnRlcm5hbC52YWx1ZXMpO1xuXG4gICAgY29uc3QgbWFwID0gdGhpcztcbiAgICBpZiAob3B0aW9ucy52aWV3ICYmICEob3B0aW9ucy52aWV3IGluc3RhbmNlb2YgVmlldykpIHtcbiAgICAgIG9wdGlvbnMudmlldy50aGVuKGZ1bmN0aW9uICh2aWV3T3B0aW9ucykge1xuICAgICAgICBtYXAuc2V0VmlldyhuZXcgVmlldyh2aWV3T3B0aW9ucykpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudDxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50XG4gICAgICAgKi9cbiAgICAgIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudDxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHRoaXMuaW50ZXJhY3Rpb25zLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAqL1xuICAgICAgKGV2ZW50KSA9PiB7XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKHRoaXMpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudDxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIChldmVudCkgPT4ge1xuICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5vdmVybGF5c18uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIENvbGxlY3Rpb25FdmVudFR5cGUuQURELFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnQ8aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgKi9cbiAgICAgIChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8oZXZlbnQuZWxlbWVudCk7XG4gICAgICB9XG4gICAgKTtcblxuICAgIHRoaXMub3ZlcmxheXNfLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSxcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICovXG4gICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBldmVudC5lbGVtZW50LmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRyb2xzLmZvckVhY2goXG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgICAgICovXG4gICAgICAoY29udHJvbCkgPT4ge1xuICAgICAgICBjb250cm9sLnNldE1hcCh0aGlzKTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgdGhpcy5pbnRlcmFjdGlvbnMuZm9yRWFjaChcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uLlxuICAgICAgICovXG4gICAgICAoaW50ZXJhY3Rpb24pID0+IHtcbiAgICAgICAgaW50ZXJhY3Rpb24uc2V0TWFwKHRoaXMpO1xuICAgICAgfVxuICAgICk7XG5cbiAgICB0aGlzLm92ZXJsYXlzXy5mb3JFYWNoKHRoaXMuYWRkT3ZlcmxheUludGVybmFsXy5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGdpdmVuIGNvbnRyb2wgdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAqIEBhcGlcbiAgICovXG4gIGFkZENvbnRyb2woY29udHJvbCkge1xuICAgIHRoaXMuZ2V0Q29udHJvbHMoKS5wdXNoKGNvbnRyb2wpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gdG8gdGhlIG1hcC4gSWYgeW91IHdhbnQgdG8gYWRkIGFuIGludGVyYWN0aW9uXG4gICAqIGF0IGFub3RoZXIgcG9pbnQgb2YgdGhlIGNvbGxlY3Rpb24gdXNlIGBnZXRJbnRlcmFjdGlvbnMoKWAgYW5kIHRoZSBtZXRob2RzXG4gICAqIGF2YWlsYWJsZSBvbiB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0uIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogc3RvcCB0aGUgZXZlbnQgcHJvcGFnYXRpb24gZnJvbSB0aGUgaGFuZGxlRXZlbnQgZnVuY3Rpb24uIFRoZSBpbnRlcmFjdGlvbnNcbiAgICogZ2V0IHRvIGhhbmRsZSB0aGUgZXZlbnRzIGluIHRoZSByZXZlcnNlIG9yZGVyIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uIHRvIGFkZC5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pIHtcbiAgICB0aGlzLmdldEludGVyYWN0aW9ucygpLnB1c2goaW50ZXJhY3Rpb24pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGdpdmVuIGxheWVyIHRvIHRoZSB0b3Agb2YgdGhpcyBtYXAuIElmIHlvdSB3YW50IHRvIGFkZCBhIGxheWVyXG4gICAqIGVsc2V3aGVyZSBpbiB0aGUgc3RhY2ssIHVzZSBgZ2V0TGF5ZXJzKClgIGFuZCB0aGUgbWV0aG9kcyBhdmFpbGFibGUgb25cbiAgICoge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAgICogQGFwaVxuICAgKi9cbiAgYWRkTGF5ZXIobGF5ZXIpIHtcbiAgICBjb25zdCBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICBsYXllcnMucHVzaChsYXllcik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0dyb3VwLmpzXCIpLkdyb3VwRXZlbnR9IGV2ZW50IFRoZSBsYXllciBhZGQgZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMYXllckFkZF8oZXZlbnQpIHtcbiAgICBzZXRMYXllck1hcFByb3BlcnR5KGV2ZW50LmxheWVyLCB0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgdGhlIGdpdmVuIG92ZXJsYXkgdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBhZGRPdmVybGF5KG92ZXJsYXkpIHtcbiAgICB0aGlzLmdldE92ZXJsYXlzKCkucHVzaChvdmVybGF5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGRlYWxzIHdpdGggbWFwJ3Mgb3ZlcmxheSBjb2xsZWN0aW9uIGNoYW5nZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZE92ZXJsYXlJbnRlcm5hbF8ob3ZlcmxheSkge1xuICAgIGNvbnN0IGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXSA9IG92ZXJsYXk7XG4gICAgfVxuICAgIG92ZXJsYXkuc2V0TWFwKHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIENsZWFuIHVwLlxuICAgKi9cbiAgZGlzcG9zZUludGVybmFsKCkge1xuICAgIHRoaXMuY29udHJvbHMuY2xlYXIoKTtcbiAgICB0aGlzLmludGVyYWN0aW9ucy5jbGVhcigpO1xuICAgIHRoaXMub3ZlcmxheXNfLmNsZWFyKCk7XG4gICAgdGhpcy5yZXNpemVPYnNlcnZlcl8uZGlzY29ubmVjdCgpO1xuICAgIHRoaXMuc2V0VGFyZ2V0KG51bGwpO1xuICAgIHN1cGVyLmRpc3Bvc2VJbnRlcm5hbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVjdCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kIGV4ZWN1dGUgYVxuICAgKiBjYWxsYmFjayB3aXRoIGVhY2ggaW50ZXJzZWN0aW5nIGZlYXR1cmUuIExheWVycyBpbmNsdWRlZCBpbiB0aGUgZGV0ZWN0aW9uIGNhblxuICAgKiBiZSBjb25maWd1cmVkIHRocm91Z2ggdGhlIGBsYXllckZpbHRlcmAgb3B0aW9uIGluIGBvcHRpb25zYC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL3NvdXJjZS9Tb3VyY2VcIikuZGVmYXVsdD4sIGltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICogICAgIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHMuIFRoZSBmaXJzdCBhcmd1bWVudCBpcyBvbmVcbiAgICogICAgIHtAbGluayBtb2R1bGU6b2wvRmVhdHVyZX5GZWF0dXJlIGZlYXR1cmV9IG9yXG4gICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL3JlbmRlci9GZWF0dXJlflJlbmRlckZlYXR1cmUgcmVuZGVyIGZlYXR1cmV9IGF0IHRoZSBwaXhlbCwgdGhlIHNlY29uZCBpc1xuICAgKiAgICAgdGhlIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJ9IG9mIHRoZSBmZWF0dXJlIGFuZCB3aWxsIGJlIG51bGwgZm9yXG4gICAqICAgICB1bm1hbmFnZWQgbGF5ZXJzLiBUbyBzdG9wIGRldGVjdGlvbiwgY2FsbGJhY2sgZnVuY3Rpb25zIGNhbiByZXR1cm4gYVxuICAgKiAgICAgdHJ1dGh5IHZhbHVlLlxuICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9uYWwgb3B0aW9ucy5cbiAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdCwgaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGxhc3RcbiAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICogQHRlbXBsYXRlIFRcbiAgICogQGFwaVxuICAgKi9cbiAgZm9yRWFjaEZlYXR1cmVBdFBpeGVsKHBpeGVsLCBjYWxsYmFjaywgb3B0aW9ucykge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXyB8fCAhdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucyA6IHt9O1xuICAgIGNvbnN0IGhpdFRvbGVyYW5jZSA9XG4gICAgICBvcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgIGNvbnN0IGxheWVyRmlsdGVyID1cbiAgICAgIG9wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgIGNvbnN0IGNoZWNrV3JhcHBlZCA9IG9wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUoXG4gICAgICBjb29yZGluYXRlLFxuICAgICAgdGhpcy5mcmFtZVN0YXRlXyxcbiAgICAgIGhpdFRvbGVyYW5jZSxcbiAgICAgIGNoZWNrV3JhcHBlZCxcbiAgICAgIGNhbGxiYWNrLFxuICAgICAgbnVsbCxcbiAgICAgIGxheWVyRmlsdGVyLFxuICAgICAgbnVsbFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZT59IFRoZSBkZXRlY3RlZCBmZWF0dXJlcyBvclxuICAgKiBhbiBlbXB0eSBhcnJheSBpZiBub25lIHdlcmUgZm91bmQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEZlYXR1cmVzQXRQaXhlbChwaXhlbCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGZlYXR1cmVzID0gW107XG4gICAgdGhpcy5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoXG4gICAgICBwaXhlbCxcbiAgICAgIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICB9LFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIGZlYXR1cmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgbGF5ZXJzIGZyb20gYWxsIGxheWVyIGdyb3Vwcy5cbiAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0Pn0gTGF5ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRBbGxMYXllcnMoKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gW107XG4gICAgZnVuY3Rpb24gYWRkTGF5ZXJzRnJvbShsYXllckdyb3VwKSB7XG4gICAgICBsYXllckdyb3VwLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyR3JvdXApIHtcbiAgICAgICAgICBhZGRMYXllcnNGcm9tKGxheWVyLmdldExheWVycygpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRMYXllcnNGcm9tKHRoaXMuZ2V0TGF5ZXJzKCkpO1xuICAgIHJldHVybiBsYXllcnM7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IGlmIGZlYXR1cmVzIGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZVxuICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCB0aGUgYGxheWVyRmlsdGVyYCBvcHRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIHBpeGVsP1xuICAgKiBAYXBpXG4gICAqL1xuICBoYXNGZWF0dXJlQXRQaXhlbChwaXhlbCwgb3B0aW9ucykge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXyB8fCAhdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3QgY29vcmRpbmF0ZSA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKTtcbiAgICBvcHRpb25zID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucyA6IHt9O1xuICAgIGNvbnN0IGxheWVyRmlsdGVyID1cbiAgICAgIG9wdGlvbnMubGF5ZXJGaWx0ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgIGNvbnN0IGhpdFRvbGVyYW5jZSA9XG4gICAgICBvcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgIGNvbnN0IGNoZWNrV3JhcHBlZCA9IG9wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZShcbiAgICAgIGNvb3JkaW5hdGUsXG4gICAgICB0aGlzLmZyYW1lU3RhdGVfLFxuICAgICAgaGl0VG9sZXJhbmNlLFxuICAgICAgY2hlY2tXcmFwcGVkLFxuICAgICAgbGF5ZXJGaWx0ZXIsXG4gICAgICBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGluIHVzZXIgcHJvamVjdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0RXZlbnRDb29yZGluYXRlKGV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGluIHZpZXcgcHJvamVjdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICovXG4gIGdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsKGV2ZW50KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1hcCBwaXhlbCBwb3NpdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHtVSUV2ZW50fHtjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcn19IGV2ZW50IEV2ZW50LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBQaXhlbC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0RXZlbnRQaXhlbChldmVudCkge1xuICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy52aWV3cG9ydF87XG4gICAgY29uc3Qgdmlld3BvcnRQb3NpdGlvbiA9IHZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHZpZXdwb3J0U2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgIGNvbnN0IHNjYWxlWCA9IHZpZXdwb3J0UG9zaXRpb24ud2lkdGggLyB2aWV3cG9ydFNpemVbMF07XG4gICAgY29uc3Qgc2NhbGVZID0gdmlld3BvcnRQb3NpdGlvbi5oZWlnaHQgLyB2aWV3cG9ydFNpemVbMV07XG4gICAgY29uc3QgZXZlbnRQb3NpdGlvbiA9XG4gICAgICAvL0ZJWE1FIEFyZSB3ZSByZWFsbHkgY2FsbGluZyB0aGlzIHdpdGggYSBUb3VjaEV2ZW50IGFueXdoZXJlP1xuICAgICAgJ2NoYW5nZWRUb3VjaGVzJyBpbiBldmVudFxuICAgICAgICA/IC8qKiBAdHlwZSB7VG91Y2hFdmVudH0gKi8gKGV2ZW50KS5jaGFuZ2VkVG91Y2hlc1swXVxuICAgICAgICA6IC8qKiBAdHlwZSB7TW91c2VFdmVudH0gKi8gKGV2ZW50KTtcblxuICAgIHJldHVybiBbXG4gICAgICAoZXZlbnRQb3NpdGlvbi5jbGllbnRYIC0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0KSAvIHNjYWxlWCxcbiAgICAgIChldmVudFBvc2l0aW9uLmNsaWVudFkgLSB2aWV3cG9ydFBvc2l0aW9uLnRvcCkgLyBzY2FsZVksXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRhcmdldCBpbiB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC5cbiAgICogTm90ZSB0aGF0IHRoaXMgcmV0dXJucyB3aGF0IGlzIGVudGVyZWQgYXMgYW4gb3B0aW9uIG9yIGluIHNldFRhcmdldDpcbiAgICogaWYgdGhhdCB3YXMgYW4gZWxlbWVudCwgaXQgcmV0dXJucyBhbiBlbGVtZW50OyBpZiBhIHN0cmluZywgaXQgcmV0dXJucyB0aGF0LlxuICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudCB0aGF0IHRoZVxuICAgKiAgICAgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUYXJnZXQoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gKi8gKFxuICAgICAgdGhpcy5nZXQoTWFwUHJvcGVydHkuVEFSR0VUKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBET00gZWxlbWVudCBpbnRvIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLiBJbiBjb250cmFzdCB0b1xuICAgKiBgZ2V0VGFyZ2V0YCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJuIGFuIGBFbGVtZW50YCwgb3IgYG51bGxgIGlmIHRoZVxuICAgKiBtYXAgaGFzIG5vIHRhcmdldC5cbiAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSBlbGVtZW50IHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VGFyZ2V0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy50YXJnZXRFbGVtZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgKiB1c2VyIHByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIGZvciB0aGUgcGl4ZWwgcG9zaXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvb3JkaW5hdGVGcm9tUGl4ZWwocGl4ZWwpIHtcbiAgICByZXR1cm4gdG9Vc2VyQ29vcmRpbmF0ZShcbiAgICAgIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHBpeGVsKSxcbiAgICAgIHRoaXMuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICogbWFwIHZpZXcgcHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgZm9yIHRoZSBwaXhlbCBwb3NpdGlvbi5cbiAgICovXG4gIGdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCkge1xuICAgIGNvbnN0IGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1hcCBjb250cm9scy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBjb250cm9sc1xuICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gQ29udHJvbHMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldENvbnRyb2xzKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRyb2xzO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgbWFwIG92ZXJsYXlzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIG92ZXJsYXlzXG4gICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gT3ZlcmxheXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE92ZXJsYXlzKCkge1xuICAgIHJldHVybiB0aGlzLm92ZXJsYXlzXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gb3ZlcmxheSBieSBpdHMgaWRlbnRpZmllciAodGhlIHZhbHVlIHJldHVybmVkIGJ5IG92ZXJsYXkuZ2V0SWQoKSkuXG4gICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gU29cbiAgICogYG1hcC5nZXRPdmVybGF5QnlJZCgyKWAgd2lsbCByZXR1cm4gYW4gb3ZlcmxheSB3aXRoIGlkIGAnMidgIG9yIGAyYC5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBpZCBPdmVybGF5IGlkZW50aWZpZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBPdmVybGF5LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRPdmVybGF5QnlJZChpZCkge1xuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICByZXR1cm4gb3ZlcmxheSAhPT0gdW5kZWZpbmVkID8gb3ZlcmxheSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgaW50ZXJhY3Rpb25zLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGludGVyYWN0aW9uc1xuICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICpcbiAgICogSW50ZXJhY3Rpb25zIGFyZSB1c2VkIGZvciBlLmcuIHBhbiwgem9vbSBhbmQgcm90YXRlLlxuICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IEludGVyYWN0aW9ucy5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0SW50ZXJhY3Rpb25zKCkge1xuICAgIHJldHVybiB0aGlzLmludGVyYWN0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxheWVyZ3JvdXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLlxuICAgKiBAcmV0dXJuIHtMYXllckdyb3VwfSBBIGxheWVyIGdyb3VwIGNvbnRhaW5pbmcgdGhlIGxheWVycyBpbiB0aGlzIG1hcC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0TGF5ZXJHcm91cCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFueSBleGlzdGluZyBsYXllcnMgYW5kIGFkZCBsYXllcnMgdG8gdGhlIG1hcC5cbiAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD59IGxheWVycyBUaGUgbGF5ZXJzIHRvIGJlIGFkZGVkIHRvIHRoZSBtYXAuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldExheWVycyhsYXllcnMpIHtcbiAgICBjb25zdCBncm91cCA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpO1xuICAgIGlmIChsYXllcnMgaW5zdGFuY2VvZiBDb2xsZWN0aW9uKSB7XG4gICAgICBncm91cC5zZXRMYXllcnMobGF5ZXJzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xsZWN0aW9uID0gZ3JvdXAuZ2V0TGF5ZXJzKCk7XG4gICAgY29sbGVjdGlvbi5jbGVhcigpO1xuICAgIGNvbGxlY3Rpb24uZXh0ZW5kKGxheWVycyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGxheWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAqIEByZXR1cm4geyFDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0Pn0gTGF5ZXJzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRMYXllcnMoKSB7XG4gICAgY29uc3QgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgcmV0dXJuIGxheWVycztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllcnMgaGF2ZSBzb3VyY2VzIHRoYXQgYXJlIHN0aWxsIGxvYWRpbmcuXG4gICAqL1xuICBnZXRMb2FkaW5nT3JOb3RSZWFkeSgpIHtcbiAgICBjb25zdCBsYXllclN0YXRlc0FycmF5ID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJTdGF0ZXNBcnJheSgpO1xuICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgY29uc3Qgc3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgaWYgKCFzdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVuZGVyZXIgPSBzdGF0ZS5sYXllci5nZXRSZW5kZXJlcigpO1xuICAgICAgaWYgKHJlbmRlcmVyICYmICFyZW5kZXJlci5yZWFkeSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNvdXJjZSA9IHN0YXRlLmxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2UubG9hZGluZykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSB1c2VyXG4gICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRQaXhlbEZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUpIHtcbiAgICBjb25zdCB2aWV3Q29vcmRpbmF0ZSA9IGZyb21Vc2VyQ29vcmRpbmF0ZShcbiAgICAgIGNvb3JkaW5hdGUsXG4gICAgICB0aGlzLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKClcbiAgICApO1xuICAgIHJldHVybiB0aGlzLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCh2aWV3Q29vcmRpbmF0ZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBwaXhlbCBmb3IgYSBjb29yZGluYXRlLiAgVGhpcyB0YWtlcyBhIGNvb3JkaW5hdGUgaW4gdGhlIG1hcCB2aWV3XG4gICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQSBtYXAgY29vcmRpbmF0ZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgKi9cbiAgZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKGNvb3JkaW5hdGUpIHtcbiAgICBjb25zdCBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oXG4gICAgICBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLFxuICAgICAgY29vcmRpbmF0ZS5zbGljZSgwLCAyKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXAgcmVuZGVyZXIuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR8bnVsbH0gUmVuZGVyZXJcbiAgICovXG4gIGdldFJlbmRlcmVyKCkge1xuICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBtYXAgaW4gdGhlIERPTS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0U2l6ZSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZXx1bmRlZmluZWR9ICovIChcbiAgICAgIHRoaXMuZ2V0KE1hcFByb3BlcnR5LlNJWkUpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHZpZXcgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLiBBIHZpZXcgbWFuYWdlcyBwcm9wZXJ0aWVzIHN1Y2ggYXNcbiAgICogY2VudGVyIGFuZCByZXNvbHV0aW9uLlxuICAgKiBAcmV0dXJuIHtWaWV3fSBUaGUgdmlldyB0aGF0IGNvbnRyb2xzIHRoaXMgbWFwLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRWaWV3KCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge1ZpZXd9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5WSUVXKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBtYXAgdmlld3BvcnQuXG4gICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBWaWV3cG9ydC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0Vmlld3BvcnQoKSB7XG4gICAgcmV0dXJuIHRoaXMudmlld3BvcnRfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZWxlbWVudCB0aGF0IHNlcnZlcyBhcyB0aGUgY29udGFpbmVyIGZvciBvdmVybGF5cy4gIEVsZW1lbnRzIGFkZGVkIHRvXG4gICAqIHRoaXMgY29udGFpbmVyIHdpbGwgbGV0IG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLFxuICAgKiBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXkgd2lsbCB0cmlnZ2VyIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH1cbiAgICogZXZlbnRzLlxuICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICovXG4gIGdldE92ZXJsYXlDb250YWluZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lcl87XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cyB0aGF0IGRvbid0IGFsbG93XG4gICAqIGV2ZW50IHByb3BhZ2F0aW9uLiBFbGVtZW50cyBhZGRlZCB0byB0aGlzIGNvbnRhaW5lciB3b24ndCBsZXQgbW91c2Vkb3duIGFuZFxuICAgKiB0b3VjaHN0YXJ0IGV2ZW50cyB0aHJvdWdoIHRvIHRoZSBtYXAsIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheVxuICAgKiBkb24ndCB0cmlnZ2VyIGFueSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9LlxuICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lciB0aGF0IHN0b3BzIGV2ZW50cy5cbiAgICovXG4gIGdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IURvY3VtZW50fSBUaGUgZG9jdW1lbnQgd2hlcmUgdGhlIG1hcCBpcyBkaXNwbGF5ZWQuXG4gICAqL1xuICBnZXRPd25lckRvY3VtZW50KCkge1xuICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICByZXR1cm4gdGFyZ2V0RWxlbWVudCA/IHRhcmdldEVsZW1lbnQub3duZXJEb2N1bWVudCA6IGRvY3VtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0aWxlQ2VudGVyIFRpbGUgY2VudGVyLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gICAqL1xuICBnZXRUaWxlUHJpb3JpdHkodGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICByZXR1cm4gZ2V0VGlsZVByaW9yaXR5KFxuICAgICAgdGhpcy5mcmFtZVN0YXRlXyxcbiAgICAgIHRpbGUsXG4gICAgICB0aWxlU291cmNlS2V5LFxuICAgICAgdGlsZUNlbnRlcixcbiAgICAgIHRpbGVSZXNvbHV0aW9uXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge1VJRXZlbnR9IGJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGVdIFR5cGUuXG4gICAqL1xuICBoYW5kbGVCcm93c2VyRXZlbnQoYnJvd3NlckV2ZW50LCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgfHwgYnJvd3NlckV2ZW50LnR5cGU7XG4gICAgY29uc3QgbWFwQnJvd3NlckV2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudCh0eXBlLCB0aGlzLCBicm93c2VyRXZlbnQpO1xuICAgIHRoaXMuaGFuZGxlTWFwQnJvd3NlckV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtNYXBCcm93c2VyRXZlbnR9IG1hcEJyb3dzZXJFdmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlLlxuICAgKi9cbiAgaGFuZGxlTWFwQnJvd3NlckV2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgLy8gV2l0aCBubyB2aWV3IGRlZmluZWQsIHdlIGNhbm5vdCB0cmFuc2xhdGUgcGl4ZWxzIGludG8gZ2VvZ3JhcGhpY2FsXG4gICAgICAvLyBjb29yZGluYXRlcyBzbyBpbnRlcmFjdGlvbnMgY2Fubm90IGJlIHVzZWQuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge1BvaW50ZXJFdmVudH0gKi8gKFxuICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnRcbiAgICApO1xuICAgIGNvbnN0IGV2ZW50VHlwZSA9IG9yaWdpbmFsRXZlbnQudHlwZTtcbiAgICBpZiAoXG4gICAgICBldmVudFR5cGUgPT09IFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICAgIGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLldIRUVMIHx8XG4gICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5LRVlET1dOXG4gICAgKSB7XG4gICAgICBjb25zdCBkb2MgPSB0aGlzLmdldE93bmVyRG9jdW1lbnQoKTtcbiAgICAgIGNvbnN0IHJvb3ROb2RlID0gdGhpcy52aWV3cG9ydF8uZ2V0Um9vdE5vZGVcbiAgICAgICAgPyB0aGlzLnZpZXdwb3J0Xy5nZXRSb290Tm9kZSgpXG4gICAgICAgIDogZG9jO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gLyoqIEB0eXBlIHtOb2RlfSAqLyAob3JpZ2luYWxFdmVudC50YXJnZXQpO1xuICAgICAgaWYgKFxuICAgICAgICAvLyBBYm9ydCBpZiB0aGUgdGFyZ2V0IGlzIGEgY2hpbGQgb2YgdGhlIGNvbnRhaW5lciBmb3IgZWxlbWVudHMgd2hvc2UgZXZlbnRzIGFyZSBub3QgbWVhbnRcbiAgICAgICAgLy8gdG8gYmUgaGFuZGxlZCBieSBtYXAgaW50ZXJhY3Rpb25zLlxuICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNvbnRhaW5zKHRhcmdldCkgfHxcbiAgICAgICAgLy8gQWJvcnQgaWYgdGhlIGV2ZW50IHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIgdGhhdCBpcyBubyBsb25nZXIgaW4gdGhlIHBhZ2UuXG4gICAgICAgIC8vIEl0J3MgcG9zc2libGUgZm9yIHRoZSB0YXJnZXQgdG8gbm8gbG9uZ2VyIGJlIGluIHRoZSBwYWdlIGlmIGl0IGhhcyBiZWVuIHJlbW92ZWQgaW4gYW5cbiAgICAgICAgLy8gZXZlbnQgbGlzdGVuZXIsIHRoaXMgbWlnaHQgaGFwcGVuIGluIGEgQ29udHJvbCB0aGF0IHJlY3JlYXRlcyBpdCdzIGNvbnRlbnQgYmFzZWQgb25cbiAgICAgICAgLy8gdXNlciBpbnRlcmFjdGlvbiBlaXRoZXIgbWFudWFsbHkgb3IgdmlhIGEgcmVuZGVyIGluIHNvbWV0aGluZyBsaWtlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvXG4gICAgICAgICEocm9vdE5vZGUgPT09IGRvYyA/IGRvYy5kb2N1bWVudEVsZW1lbnQgOiByb290Tm9kZSkuY29udGFpbnModGFyZ2V0KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgbWFwQnJvd3NlckV2ZW50LmZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIGlmICh0aGlzLmRpc3BhdGNoRXZlbnQobWFwQnJvd3NlckV2ZW50KSAhPT0gZmFsc2UpIHtcbiAgICAgIGNvbnN0IGludGVyYWN0aW9uc0FycmF5ID0gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5nZXRBcnJheSgpLnNsaWNlKCk7XG4gICAgICBmb3IgKGxldCBpID0gaW50ZXJhY3Rpb25zQXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbnNBcnJheVtpXTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGludGVyYWN0aW9uLmdldE1hcCgpICE9PSB0aGlzIHx8XG4gICAgICAgICAgIWludGVyYWN0aW9uLmdldEFjdGl2ZSgpIHx8XG4gICAgICAgICAgIXRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvbnQgPSBpbnRlcmFjdGlvbi5oYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICBpZiAoIWNvbnQgfHwgbWFwQnJvd3NlckV2ZW50LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGhhbmRsZVBvc3RSZW5kZXIoKSB7XG4gICAgY29uc3QgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG5cbiAgICAvLyBNYW5hZ2UgdGhlIHRpbGUgcXVldWVcbiAgICAvLyBJbWFnZSBsb2FkcyBhcmUgZXhwZW5zaXZlIGFuZCBhIGxpbWl0ZWQgcmVzb3VyY2UsIHNvIHRyeSB0byB1c2UgdGhlbVxuICAgIC8vIGVmZmljaWVudGx5OlxuICAgIC8vICogV2hlbiB0aGUgdmlldyBpcyBzdGF0aWMgd2UgYWxsb3cgYSBsYXJnZSBudW1iZXIgb2YgcGFyYWxsZWwgdGlsZSBsb2Fkc1xuICAgIC8vICAgdG8gY29tcGxldGUgdGhlIGZyYW1lIGFzIHF1aWNrbHkgYXMgcG9zc2libGUuXG4gICAgLy8gKiBXaGVuIGFuaW1hdGluZyBvciBpbnRlcmFjdGluZywgaW1hZ2UgbG9hZHMgY2FuIGNhdXNlIGphbmtzLCBzbyB3ZSByZWR1Y2VcbiAgICAvLyAgIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsb2FkcyBwZXIgZnJhbWUgYW5kIGxpbWl0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWxcbiAgICAvLyAgIHRpbGUgbG9hZHMgdG8gcmVtYWluIHJlYWN0aXZlIHRvIHZpZXcgY2hhbmdlcyBhbmQgdG8gcmVkdWNlIHRoZSBjaGFuY2Ugb2ZcbiAgICAvLyAgIGxvYWRpbmcgdGlsZXMgdGhhdCB3aWxsIHF1aWNrbHkgZGlzYXBwZWFyIGZyb20gdmlldy5cbiAgICBjb25zdCB0aWxlUXVldWUgPSB0aGlzLnRpbGVRdWV1ZV87XG4gICAgaWYgKCF0aWxlUXVldWUuaXNFbXB0eSgpKSB7XG4gICAgICBsZXQgbWF4VG90YWxMb2FkaW5nID0gdGhpcy5tYXhUaWxlc0xvYWRpbmdfO1xuICAgICAgbGV0IG1heE5ld0xvYWRzID0gbWF4VG90YWxMb2FkaW5nO1xuICAgICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgY29uc3QgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcbiAgICAgICAgaWYgKGhpbnRzW1ZpZXdIaW50LkFOSU1BVElOR10gfHwgaGludHNbVmlld0hpbnQuSU5URVJBQ1RJTkddKSB7XG4gICAgICAgICAgY29uc3QgbG93T25GcmFtZUJ1ZGdldCA9IERhdGUubm93KCkgLSBmcmFtZVN0YXRlLnRpbWUgPiA4O1xuICAgICAgICAgIG1heFRvdGFsTG9hZGluZyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogODtcbiAgICAgICAgICBtYXhOZXdMb2FkcyA9IGxvd09uRnJhbWVCdWRnZXQgPyAwIDogMjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRpbGVRdWV1ZS5nZXRUaWxlc0xvYWRpbmcoKSA8IG1heFRvdGFsTG9hZGluZykge1xuICAgICAgICB0aWxlUXVldWUucmVwcmlvcml0aXplKCk7IC8vIEZJWE1FIG9ubHkgY2FsbCBpZiB2aWV3IGhhcyBjaGFuZ2VkXG4gICAgICAgIHRpbGVRdWV1ZS5sb2FkTW9yZVRpbGVzKG1heFRvdGFsTG9hZGluZywgbWF4TmV3TG9hZHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChmcmFtZVN0YXRlICYmIHRoaXMucmVuZGVyZXJfICYmICFmcmFtZVN0YXRlLmFuaW1hdGUpIHtcbiAgICAgIGlmICh0aGlzLnJlbmRlckNvbXBsZXRlXyA9PT0gdHJ1ZSkge1xuICAgICAgICBpZiAodGhpcy5oYXNMaXN0ZW5lcihSZW5kZXJFdmVudFR5cGUuUkVOREVSQ09NUExFVEUpKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcGF0Y2hSZW5kZXJFdmVudChcbiAgICAgICAgICAgIFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSxcbiAgICAgICAgICAgIGZyYW1lU3RhdGVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxvYWRlZF8gPT09IGZhbHNlKSB7XG4gICAgICAgICAgdGhpcy5sb2FkZWRfID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICBuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLkxPQURFTkQsIHRoaXMsIGZyYW1lU3RhdGUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmxvYWRlZF8gPT09IHRydWUpIHtcbiAgICAgICAgdGhpcy5sb2FkZWRfID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICBuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLkxPQURTVEFSVCwgdGhpcywgZnJhbWVTdGF0ZSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwb3N0UmVuZGVyRnVuY3Rpb25zID0gdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXztcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnNbaV0odGhpcywgZnJhbWVTdGF0ZSk7XG4gICAgfVxuICAgIHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlU2l6ZUNoYW5nZWRfKCkge1xuICAgIGlmICh0aGlzLmdldFZpZXcoKSAmJiAhdGhpcy5nZXRWaWV3KCkuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgIHRoaXMuZ2V0VmlldygpLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVUYXJnZXRDaGFuZ2VkXygpIHtcbiAgICBpZiAodGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXykge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfW2ldKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfID0gbnVsbDtcbiAgICAgIHRoaXMudmlld3BvcnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIEV2ZW50VHlwZS5DT05URVhUTUVOVSxcbiAgICAgICAgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF9cbiAgICAgICk7XG4gICAgICB0aGlzLnZpZXdwb3J0Xy5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICBFdmVudFR5cGUuV0hFRUwsXG4gICAgICAgIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfXG4gICAgICApO1xuICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgIHJlbW92ZU5vZGUodGhpcy52aWV3cG9ydF8pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRhcmdldEVsZW1lbnRfKSB7XG4gICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyXy51bm9ic2VydmUodGhpcy50YXJnZXRFbGVtZW50Xyk7XG4gICAgICBjb25zdCByb290Tm9kZSA9IHRoaXMudGFyZ2V0RWxlbWVudF8uZ2V0Um9vdE5vZGUoKTtcbiAgICAgIGlmIChyb290Tm9kZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QpIHtcbiAgICAgICAgdGhpcy5yZXNpemVPYnNlcnZlcl8udW5vYnNlcnZlKHJvb3ROb2RlLmhvc3QpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTaXplKHVuZGVmaW5lZCk7XG4gICAgfVxuXG4gICAgLy8gdGFyZ2V0IG1heSBiZSB1bmRlZmluZWQsIG51bGwsIGEgc3RyaW5nIG9yIGFuIEVsZW1lbnQuXG4gICAgLy8gSWYgaXQncyBhIHN0cmluZyB3ZSBjb252ZXJ0IGl0IHRvIGFuIEVsZW1lbnQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgLy8gSWYgaXQncyBub3Qgbm93IGFuIEVsZW1lbnQgd2UgcmVtb3ZlIHRoZSB2aWV3cG9ydCBmcm9tIHRoZSBET00uXG4gICAgLy8gSWYgaXQncyBhbiBFbGVtZW50IHdlIGFwcGVuZCB0aGUgdmlld3BvcnQgZWxlbWVudCB0byBpdC5cblxuICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9XG4gICAgICB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgdGhpcy50YXJnZXRFbGVtZW50XyA9IHRhcmdldEVsZW1lbnQ7XG4gICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICBpZiAodGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfKTtcbiAgICAgICAgdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheUtleV8pO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnZpZXdwb3J0Xyk7XG4gICAgICBpZiAoIXRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXJfID0gbmV3IENvbXBvc2l0ZU1hcFJlbmRlcmVyKHRoaXMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbmV3IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHRoaXMubW92ZVRvbGVyYW5jZV9cbiAgICAgICk7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBNYXBCcm93c2VyRXZlbnRUeXBlKSB7XG4gICAgICAgIHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBNYXBCcm93c2VyRXZlbnRUeXBlW2tleV0sXG4gICAgICAgICAgdGhpcy5oYW5kbGVNYXBCcm93c2VyRXZlbnQuYmluZCh0aGlzKVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgRXZlbnRUeXBlLkNPTlRFWFRNRU5VLFxuICAgICAgICB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XyxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgICB0aGlzLnZpZXdwb3J0Xy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBFdmVudFR5cGUuV0hFRUwsXG4gICAgICAgIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfLFxuICAgICAgICBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHtwYXNzaXZlOiBmYWxzZX0gOiBmYWxzZVxuICAgICAgKTtcblxuICAgICAgY29uc3Qga2V5Ym9hcmRFdmVudFRhcmdldCA9ICF0aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfXG4gICAgICAgID8gdGFyZ2V0RWxlbWVudFxuICAgICAgICA6IHRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF87XG4gICAgICB0aGlzLnRhcmdldENoYW5nZUhhbmRsZXJLZXlzXyA9IFtcbiAgICAgICAgbGlzdGVuKFxuICAgICAgICAgIGtleWJvYXJkRXZlbnRUYXJnZXQsXG4gICAgICAgICAgRXZlbnRUeXBlLktFWURPV04sXG4gICAgICAgICAgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsXG4gICAgICAgICAgdGhpc1xuICAgICAgICApLFxuICAgICAgICBsaXN0ZW4oXG4gICAgICAgICAga2V5Ym9hcmRFdmVudFRhcmdldCxcbiAgICAgICAgICBFdmVudFR5cGUuS0VZUFJFU1MsXG4gICAgICAgICAgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsXG4gICAgICAgICAgdGhpc1xuICAgICAgICApLFxuICAgICAgXTtcbiAgICAgIGNvbnN0IHJvb3ROb2RlID0gdGFyZ2V0RWxlbWVudC5nZXRSb290Tm9kZSgpO1xuICAgICAgaWYgKHJvb3ROb2RlIGluc3RhbmNlb2YgU2hhZG93Um9vdCkge1xuICAgICAgICB0aGlzLnJlc2l6ZU9ic2VydmVyXy5vYnNlcnZlKHJvb3ROb2RlLmhvc3QpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZXNpemVPYnNlcnZlcl8ub2JzZXJ2ZSh0YXJnZXRFbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICAvLyB1cGRhdGVTaXplIGNhbGxzIHNldFNpemUsIHNvIG5vIG5lZWQgdG8gY2FsbCB0aGlzLnJlbmRlclxuICAgIC8vIG91cnNlbHZlcyBoZXJlLlxuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVUaWxlQ2hhbmdlXygpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXygpIHtcbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVWaWV3Q2hhbmdlZF8oKSB7XG4gICAgaWYgKHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKSB7XG4gICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfKTtcbiAgICAgIHRoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5Xykge1xuICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgIGlmICh2aWV3KSB7XG4gICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0U2l6ZV8oKTtcblxuICAgICAgdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBsaXN0ZW4oXG4gICAgICAgIHZpZXcsXG4gICAgICAgIE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRSxcbiAgICAgICAgdGhpcy5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcbiAgICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IGxpc3RlbihcbiAgICAgICAgdmlldyxcbiAgICAgICAgRXZlbnRUeXBlLkNIQU5HRSxcbiAgICAgICAgdGhpcy5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcblxuICAgICAgdmlldy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXygpIHtcbiAgICBpZiAodGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfKSB7XG4gICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGxheWVyR3JvdXAgPSB0aGlzLmdldExheWVyR3JvdXAoKTtcbiAgICBpZiAobGF5ZXJHcm91cCkge1xuICAgICAgdGhpcy5oYW5kbGVMYXllckFkZF8obmV3IEdyb3VwRXZlbnQoJ2FkZGxheWVyJywgbGF5ZXJHcm91cCkpO1xuICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gW1xuICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLnJlbmRlciwgdGhpcyksXG4gICAgICAgIGxpc3RlbihsYXllckdyb3VwLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLnJlbmRlciwgdGhpcyksXG4gICAgICAgIGxpc3RlbihsYXllckdyb3VwLCAnYWRkbGF5ZXInLCB0aGlzLmhhbmRsZUxheWVyQWRkXywgdGhpcyksXG4gICAgICAgIGxpc3RlbihsYXllckdyb3VwLCAncmVtb3ZlbGF5ZXInLCB0aGlzLmhhbmRsZUxheWVyUmVtb3ZlXywgdGhpcyksXG4gICAgICBdO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHJlbmRlcmVkLlxuICAgKi9cbiAgaXNSZW5kZXJlZCgpIHtcbiAgICByZXR1cm4gISF0aGlzLmZyYW1lU3RhdGVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhbmltYXRpb25EZWxheV8oKSB7XG4gICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5yZW5kZXJGcmFtZV8oRGF0ZS5ub3coKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdHMgYW4gaW1tZWRpYXRlIHJlbmRlciBpbiBhIHN5bmNocm9ub3VzIG1hbm5lci5cbiAgICogQGFwaVxuICAgKi9cbiAgcmVuZGVyU3luYygpIHtcbiAgICBpZiAodGhpcy5hbmltYXRpb25EZWxheUtleV8pIHtcbiAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICB9XG4gICAgdGhpcy5hbmltYXRpb25EZWxheV8oKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWRyYXdzIGFsbCB0ZXh0IGFmdGVyIG5ldyBmb250cyBoYXZlIGxvYWRlZFxuICAgKi9cbiAgcmVkcmF3VGV4dCgpIHtcbiAgICBjb25zdCBsYXllclN0YXRlcyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBsYXllclN0YXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICBjb25zdCBsYXllciA9IGxheWVyU3RhdGVzW2ldLmxheWVyO1xuICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkpIHtcbiAgICAgICAgbGF5ZXIuZ2V0UmVuZGVyZXIoKS5oYW5kbGVGb250c0NoYW5nZWQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBhIG1hcCByZW5kZXJpbmcgKGF0IHRoZSBuZXh0IGFuaW1hdGlvbiBmcmFtZSkuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbmRlcigpIHtcbiAgICBpZiAodGhpcy5yZW5kZXJlcl8gJiYgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hbmltYXRpb25EZWxheV8pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBtZWFudCB0byBiZSBjYWxsZWQgaW4gYSBsYXllcidzIGBwcmVyZW5kZXJgIGxpc3RlbmVyLiBJdCBjYXVzZXMgYWxsIGNvbGxlY3RlZFxuICAgKiBkZWNsdXR0ZXIgaXRlbXMgdG8gYmUgZGVjbHV0dGVyZWQgYW5kIHJlbmRlcmVkIG9uIHRoZSBtYXAgaW1tZWRpYXRlbHkuIFRoaXMgaXMgdXNlZnVsIGZvclxuICAgKiBsYXllcnMgdGhhdCBuZWVkIHRvIGFwcGVhciBlbnRpcmVseSBhYm92ZSB0aGUgZGVjbHV0dGVyZWQgaXRlbXMgb2YgbGF5ZXJzIGxvd2VyIGluIHRoZSBsYXllclxuICAgKiBzdGFjay5cbiAgICogQGFwaVxuICAgKi9cbiAgZmx1c2hEZWNsdXR0ZXJJdGVtcygpIHtcbiAgICBjb25zdCBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJlcl8uZmx1c2hEZWNsdXR0ZXJJdGVtcyhmcmFtZVN0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNvbnRyb2wgZnJvbSB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGNvbnRyb2wgKG9yIHVuZGVmaW5lZFxuICAgKiAgICAgaWYgdGhlIGNvbnRyb2wgd2FzIG5vdCBmb3VuZCkuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbW92ZUNvbnRyb2woY29udHJvbCkge1xuICAgIHJldHVybiB0aGlzLmdldENvbnRyb2xzKCkucmVtb3ZlKGNvbnRyb2wpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZ2l2ZW4gaW50ZXJhY3Rpb24gZnJvbSB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24gdG8gcmVtb3ZlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBpbnRlcmFjdGlvbiAob3JcbiAgICogICAgIHVuZGVmaW5lZCBpZiB0aGUgaW50ZXJhY3Rpb24gd2FzIG5vdCBmb3VuZCkuXG4gICAqIEBhcGlcbiAgICovXG4gIHJlbW92ZUludGVyYWN0aW9uKGludGVyYWN0aW9uKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkucmVtb3ZlKGludGVyYWN0aW9uKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBsYXllciBmcm9tIHRoZSBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGxheWVyIChvciB1bmRlZmluZWQgaWYgdGhlXG4gICAqICAgICBsYXllciB3YXMgbm90IGZvdW5kKS5cbiAgICogQGFwaVxuICAgKi9cbiAgcmVtb3ZlTGF5ZXIobGF5ZXIpIHtcbiAgICBjb25zdCBsYXllcnMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKTtcbiAgICByZXR1cm4gbGF5ZXJzLnJlbW92ZShsYXllcik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0dyb3VwLmpzXCIpLkdyb3VwRXZlbnR9IGV2ZW50IFRoZSBsYXllciByZW1vdmUgZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVMYXllclJlbW92ZV8oZXZlbnQpIHtcbiAgICByZW1vdmVMYXllck1hcFByb3BlcnR5KGV2ZW50LmxheWVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIG92ZXJsYXkgZnJvbSB0aGUgbWFwLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgb3ZlcmxheSAob3IgdW5kZWZpbmVkXG4gICAqICAgICBpZiB0aGUgb3ZlcmxheSB3YXMgbm90IGZvdW5kKS5cbiAgICogQGFwaVxuICAgKi9cbiAgcmVtb3ZlT3ZlcmxheShvdmVybGF5KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0T3ZlcmxheXMoKS5yZW1vdmUob3ZlcmxheSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgVGltZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlbmRlckZyYW1lXyh0aW1lKSB7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgIGNvbnN0IHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICBjb25zdCBwcmV2aW91c0ZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgIC8qKiBAdHlwZSB7P0ZyYW1lU3RhdGV9ICovXG4gICAgbGV0IGZyYW1lU3RhdGUgPSBudWxsO1xuICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQgJiYgaGFzQXJlYShzaXplKSAmJiB2aWV3ICYmIHZpZXcuaXNEZWYoKSkge1xuICAgICAgY29uc3Qgdmlld0hpbnRzID0gdmlldy5nZXRIaW50cyhcbiAgICAgICAgdGhpcy5mcmFtZVN0YXRlXyA/IHRoaXMuZnJhbWVTdGF0ZV8udmlld0hpbnRzIDogdW5kZWZpbmVkXG4gICAgICApO1xuICAgICAgY29uc3Qgdmlld1N0YXRlID0gdmlldy5nZXRTdGF0ZSgpO1xuICAgICAgZnJhbWVTdGF0ZSA9IHtcbiAgICAgICAgYW5pbWF0ZTogZmFsc2UsXG4gICAgICAgIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtOiB0aGlzLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyxcbiAgICAgICAgZGVjbHV0dGVyVHJlZTogbnVsbCxcbiAgICAgICAgZXh0ZW50OiBnZXRGb3JWaWV3QW5kU2l6ZShcbiAgICAgICAgICB2aWV3U3RhdGUuY2VudGVyLFxuICAgICAgICAgIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLFxuICAgICAgICAgIHZpZXdTdGF0ZS5yb3RhdGlvbixcbiAgICAgICAgICBzaXplXG4gICAgICAgICksXG4gICAgICAgIGluZGV4OiB0aGlzLmZyYW1lSW5kZXhfKyssXG4gICAgICAgIGxheWVySW5kZXg6IDAsXG4gICAgICAgIGxheWVyU3RhdGVzQXJyYXk6IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKSxcbiAgICAgICAgcGl4ZWxSYXRpbzogdGhpcy5waXhlbFJhdGlvXyxcbiAgICAgICAgcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm06IHRoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fLFxuICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zOiBbXSxcbiAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgdGlsZVF1ZXVlOiB0aGlzLnRpbGVRdWV1ZV8sXG4gICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgIHVzZWRUaWxlczoge30sXG4gICAgICAgIHZpZXdTdGF0ZTogdmlld1N0YXRlLFxuICAgICAgICB2aWV3SGludHM6IHZpZXdIaW50cyxcbiAgICAgICAgd2FudGVkVGlsZXM6IHt9LFxuICAgICAgICBtYXBJZDogZ2V0VWlkKHRoaXMpLFxuICAgICAgICByZW5kZXJUYXJnZXRzOiB7fSxcbiAgICAgIH07XG4gICAgICBpZiAodmlld1N0YXRlLm5leHRDZW50ZXIgJiYgdmlld1N0YXRlLm5leHRSZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJvdGF0aW9uID0gaXNOYU4odmlld1N0YXRlLm5leHRSb3RhdGlvbilcbiAgICAgICAgICA/IHZpZXdTdGF0ZS5yb3RhdGlvblxuICAgICAgICAgIDogdmlld1N0YXRlLm5leHRSb3RhdGlvbjtcblxuICAgICAgICBmcmFtZVN0YXRlLm5leHRFeHRlbnQgPSBnZXRGb3JWaWV3QW5kU2l6ZShcbiAgICAgICAgICB2aWV3U3RhdGUubmV4dENlbnRlcixcbiAgICAgICAgICB2aWV3U3RhdGUubmV4dFJlc29sdXRpb24sXG4gICAgICAgICAgcm90YXRpb24sXG4gICAgICAgICAgc2l6ZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZnJhbWVTdGF0ZV8gPSBmcmFtZVN0YXRlO1xuICAgIHRoaXMucmVuZGVyZXJfLnJlbmRlckZyYW1lKGZyYW1lU3RhdGUpO1xuXG4gICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgIGlmIChmcmFtZVN0YXRlLmFuaW1hdGUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgIH1cbiAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KFxuICAgICAgICB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLFxuICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnNcbiAgICAgICk7XG5cbiAgICAgIGlmIChwcmV2aW91c0ZyYW1lU3RhdGUpIHtcbiAgICAgICAgY29uc3QgbW92ZVN0YXJ0ID1cbiAgICAgICAgICAhdGhpcy5wcmV2aW91c0V4dGVudF8gfHxcbiAgICAgICAgICAoIWlzRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pICYmXG4gICAgICAgICAgICAhZXF1YWxzRXh0ZW50KGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50XykpO1xuICAgICAgICBpZiAobW92ZVN0YXJ0KSB7XG4gICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgbmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFU1RBUlQsIHRoaXMsIHByZXZpb3VzRnJhbWVTdGF0ZSlcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMucHJldmlvdXNFeHRlbnRfID0gY3JlYXRlT3JVcGRhdGVFbXB0eSh0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgaWRsZSA9XG4gICAgICAgIHRoaXMucHJldmlvdXNFeHRlbnRfICYmXG4gICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5BTklNQVRJTkddICYmXG4gICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5JTlRFUkFDVElOR10gJiZcbiAgICAgICAgIWVxdWFsc0V4dGVudChmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuXG4gICAgICBpZiAoaWRsZSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgbmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFRU5ELCB0aGlzLCBmcmFtZVN0YXRlKVxuICAgICAgICApO1xuICAgICAgICBjbG9uZShmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMsIGZyYW1lU3RhdGUpKTtcblxuICAgIHRoaXMucmVuZGVyQ29tcGxldGVfID1cbiAgICAgIHRoaXMuaGFzTGlzdGVuZXIoTWFwRXZlbnRUeXBlLkxPQURTVEFSVCkgfHxcbiAgICAgIHRoaXMuaGFzTGlzdGVuZXIoTWFwRXZlbnRUeXBlLkxPQURFTkQpIHx8XG4gICAgICB0aGlzLmhhc0xpc3RlbmVyKFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSlcbiAgICAgICAgPyAhdGhpcy50aWxlUXVldWVfLmdldFRpbGVzTG9hZGluZygpICYmXG4gICAgICAgICAgIXRoaXMudGlsZVF1ZXVlXy5nZXRDb3VudCgpICYmXG4gICAgICAgICAgIXRoaXMuZ2V0TG9hZGluZ09yTm90UmVhZHkoKVxuICAgICAgICA6IHVuZGVmaW5lZDtcblxuICAgIGlmICghdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8pIHtcbiAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmhhbmRsZVBvc3RSZW5kZXIoKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBsYXllcmdyb3VwIG9mIHRoaXMgbWFwLlxuICAgKiBAcGFyYW0ge0xheWVyR3JvdXB9IGxheWVyR3JvdXAgQSBsYXllciBncm91cCBjb250YWluaW5nIHRoZSBsYXllcnMgaW4gdGhpcyBtYXAuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldExheWVyR3JvdXAobGF5ZXJHcm91cCkge1xuICAgIGNvbnN0IG9sZExheWVyR3JvdXAgPSB0aGlzLmdldExheWVyR3JvdXAoKTtcbiAgICBpZiAob2xkTGF5ZXJHcm91cCkge1xuICAgICAgdGhpcy5oYW5kbGVMYXllclJlbW92ZV8obmV3IEdyb3VwRXZlbnQoJ3JlbW92ZWxheWVyJywgb2xkTGF5ZXJHcm91cCkpO1xuICAgIH1cbiAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5MQVlFUkdST1VQLCBsYXllckdyb3VwKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBzaXplIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgbWFwIGluIHRoZSBET00uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFNpemUoc2l6ZSkge1xuICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlNJWkUsIHNpemUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdGFyZ2V0IGVsZW1lbnQgdG8gcmVuZGVyIHRoaXMgbWFwIGludG8uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudFxuICAgKiAgICAgdGhhdCB0aGUgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRUYXJnZXQodGFyZ2V0KSB7XG4gICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuVEFSR0VULCB0YXJnZXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmlldyBmb3IgdGhpcyBtYXAuXG4gICAqIEBwYXJhbSB7Vmlld3xQcm9taXNlPGltcG9ydChcIi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucz59IHZpZXcgVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBwYXNzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIG9wdGlvbnMgZm9yIGNvbnN0cnVjdGluZyBhIHZpZXcuICBUaGlzXG4gICAqIGFsdGVybmF0aXZlIGFsbG93cyB2aWV3IHByb3BlcnRpZXMgdG8gYmUgcmVzb2x2ZWQgYnkgc291cmNlcyBvciBvdGhlciBjb21wb25lbnRzIHRoYXQgbG9hZFxuICAgKiB2aWV3LXJlbGF0ZWQgbWV0YWRhdGEuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFZpZXcodmlldykge1xuICAgIGlmICghdmlldyB8fCB2aWV3IGluc3RhbmNlb2YgVmlldykge1xuICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuVklFVywgdmlldyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlZJRVcsIG5ldyBWaWV3KCkpO1xuXG4gICAgY29uc3QgbWFwID0gdGhpcztcbiAgICB2aWV3LnRoZW4oZnVuY3Rpb24gKHZpZXdPcHRpb25zKSB7XG4gICAgICBtYXAuc2V0VmlldyhuZXcgVmlldyh2aWV3T3B0aW9ucykpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcmNlIGEgcmVjYWxjdWxhdGlvbiBvZiB0aGUgbWFwIHZpZXdwb3J0IHNpemUuICBUaGlzIHNob3VsZCBiZSBjYWxsZWQgd2hlblxuICAgKiB0aGlyZC1wYXJ0eSBjb2RlIGNoYW5nZXMgdGhlIHNpemUgb2YgdGhlIG1hcCB2aWV3cG9ydC5cbiAgICogQGFwaVxuICAgKi9cbiAgdXBkYXRlU2l6ZSgpIHtcbiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG5cbiAgICBsZXQgc2l6ZSA9IHVuZGVmaW5lZDtcbiAgICBpZiAodGFyZ2V0RWxlbWVudCkge1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0RWxlbWVudCk7XG4gICAgICBjb25zdCB3aWR0aCA9XG4gICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggLVxuICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckxlZnRXaWR0aCddKSAtXG4gICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ0xlZnQnXSkgLVxuICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdSaWdodCddKSAtXG4gICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyUmlnaHRXaWR0aCddKTtcbiAgICAgIGNvbnN0IGhlaWdodCA9XG4gICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC1cbiAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJUb3BXaWR0aCddKSAtXG4gICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ1RvcCddKSAtXG4gICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ0JvdHRvbSddKSAtXG4gICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyQm90dG9tV2lkdGgnXSk7XG4gICAgICBpZiAoIWlzTmFOKHdpZHRoKSAmJiAhaXNOYU4oaGVpZ2h0KSkge1xuICAgICAgICBzaXplID0gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIWhhc0FyZWEoc2l6ZSkgJiZcbiAgICAgICAgICAhIShcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggfHxcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8XG4gICAgICAgICAgICB0YXJnZXRFbGVtZW50LmdldENsaWVudFJlY3RzKCkubGVuZ3RoXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICB3YXJuKFxuICAgICAgICAgICAgXCJObyBtYXAgdmlzaWJsZSBiZWNhdXNlIHRoZSBtYXAgY29udGFpbmVyJ3Mgd2lkdGggb3IgaGVpZ2h0IGFyZSAwLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG9sZFNpemUgPSB0aGlzLmdldFNpemUoKTtcbiAgICBpZiAoc2l6ZSAmJiAoIW9sZFNpemUgfHwgIWVxdWFscyhzaXplLCBvbGRTaXplKSkpIHtcbiAgICAgIHRoaXMuc2V0U2l6ZShzaXplKTtcbiAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRTaXplXygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvbXB1dGVzIHRoZSB2aWV3cG9ydCBzaXplIGFuZCBzYXZlIGl0IG9uIHRoZSB2aWV3IG9iamVjdCAoaWYgYW55KVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlVmlld3BvcnRTaXplXygpIHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgaWYgKHZpZXcpIHtcbiAgICAgIGxldCBzaXplID0gdW5kZWZpbmVkO1xuICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgaWYgKGNvbXB1dGVkU3R5bGUud2lkdGggJiYgY29tcHV0ZWRTdHlsZS5oZWlnaHQpIHtcbiAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICBwYXJzZUludChjb21wdXRlZFN0eWxlLndpZHRoLCAxMCksXG4gICAgICAgICAgcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5oZWlnaHQsIDEwKSxcbiAgICAgICAgXTtcbiAgICAgIH1cbiAgICAgIHZpZXcuc2V0Vmlld3BvcnRTaXplKHNpemUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7TWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAqIEByZXR1cm4ge01hcE9wdGlvbnNJbnRlcm5hbH0gSW50ZXJuYWwgbWFwIG9wdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKSB7XG4gIC8qKlxuICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9XG4gICAqL1xuICBsZXQga2V5Ym9hcmRFdmVudFRhcmdldCA9IG51bGw7XG4gIGlmIChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgIGtleWJvYXJkRXZlbnRUYXJnZXQgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldCA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmtleWJvYXJkRXZlbnRUYXJnZXQpXG4gICAgICAgIDogb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICovXG4gIGNvbnN0IHZhbHVlcyA9IHt9O1xuXG4gIGNvbnN0IGxheWVyR3JvdXAgPVxuICAgIG9wdGlvbnMubGF5ZXJzICYmXG4gICAgdHlwZW9mICgvKiogQHR5cGUgez99ICovIChvcHRpb25zLmxheWVycykuZ2V0TGF5ZXJzKSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgPyAvKiogQHR5cGUge0xheWVyR3JvdXB9ICovIChvcHRpb25zLmxheWVycylcbiAgICAgIDogbmV3IExheWVyR3JvdXAoe1xuICAgICAgICAgIGxheWVyczpcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fSAqLyAoXG4gICAgICAgICAgICAgIG9wdGlvbnMubGF5ZXJzXG4gICAgICAgICAgICApLFxuICAgICAgICB9KTtcbiAgdmFsdWVzW01hcFByb3BlcnR5LkxBWUVSR1JPVVBdID0gbGF5ZXJHcm91cDtcblxuICB2YWx1ZXNbTWFwUHJvcGVydHkuVEFSR0VUXSA9IG9wdGlvbnMudGFyZ2V0O1xuXG4gIHZhbHVlc1tNYXBQcm9wZXJ0eS5WSUVXXSA9XG4gICAgb3B0aW9ucy52aWV3IGluc3RhbmNlb2YgVmlldyA/IG9wdGlvbnMudmlldyA6IG5ldyBWaWV3KCk7XG5cbiAgLyoqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSAqL1xuICBsZXQgY29udHJvbHM7XG4gIGlmIChvcHRpb25zLmNvbnRyb2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmNvbnRyb2xzKSkge1xuICAgICAgY29udHJvbHMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmNvbnRyb2xzLnNsaWNlKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhc3NlcnQoXG4gICAgICAgIHR5cGVvZiAoLyoqIEB0eXBlIHs/fSAqLyAob3B0aW9ucy5jb250cm9scykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLFxuICAgICAgICA0N1xuICAgICAgKTsgLy8gRXhwZWN0ZWQgYGNvbnRyb2xzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICBjb250cm9scyA9IG9wdGlvbnMuY29udHJvbHM7XG4gICAgfVxuICB9XG5cbiAgLyoqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb25cIikuZGVmYXVsdD59ICovXG4gIGxldCBpbnRlcmFjdGlvbnM7XG4gIGlmIChvcHRpb25zLmludGVyYWN0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5pbnRlcmFjdGlvbnMpKSB7XG4gICAgICBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmludGVyYWN0aW9ucy5zbGljZSgpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXNzZXJ0KFxuICAgICAgICB0eXBlb2YgKC8qKiBAdHlwZSB7P30gKi8gKG9wdGlvbnMuaW50ZXJhY3Rpb25zKS5nZXRBcnJheSkgPT09XG4gICAgICAgICAgJ2Z1bmN0aW9uJyxcbiAgICAgICAgNDhcbiAgICAgICk7IC8vIEV4cGVjdGVkIGBpbnRlcmFjdGlvbnNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgIGludGVyYWN0aW9ucyA9IG9wdGlvbnMuaW50ZXJhY3Rpb25zO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59ICovXG4gIGxldCBvdmVybGF5cztcbiAgaWYgKG9wdGlvbnMub3ZlcmxheXMgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMub3ZlcmxheXMpKSB7XG4gICAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMub3ZlcmxheXMuc2xpY2UoKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFzc2VydChcbiAgICAgICAgdHlwZW9mICgvKiogQHR5cGUgez99ICovIChvcHRpb25zLm92ZXJsYXlzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsXG4gICAgICAgIDQ5XG4gICAgICApOyAvLyBFeHBlY3RlZCBgb3ZlcmxheXNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgIG92ZXJsYXlzID0gb3B0aW9ucy5vdmVybGF5cztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBjb250cm9sczogY29udHJvbHMsXG4gICAgaW50ZXJhY3Rpb25zOiBpbnRlcmFjdGlvbnMsXG4gICAga2V5Ym9hcmRFdmVudFRhcmdldDoga2V5Ym9hcmRFdmVudFRhcmdldCxcbiAgICBvdmVybGF5czogb3ZlcmxheXMsXG4gICAgdmFsdWVzOiB2YWx1ZXMsXG4gIH07XG59XG5leHBvcnQgZGVmYXVsdCBNYXA7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9kZWZhdWx0c1xuICovXG5pbXBvcnQgQXR0cmlidXRpb24gZnJvbSAnLi9BdHRyaWJ1dGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBSb3RhdGUgZnJvbSAnLi9Sb3RhdGUuanMnO1xuaW1wb3J0IFpvb20gZnJvbSAnLi9ab29tLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZWZhdWx0c09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vQXR0cmlidXRpb24uanNcIikuT3B0aW9uc30gW2F0dHJpYnV0aW9uT3B0aW9uc11cbiAqIE9wdGlvbnMgZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtyb3RhdGU9dHJ1ZV0gSW5jbHVkZVxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1JvdGF0ZS5qc1wiKS5PcHRpb25zfSBbcm90YXRlT3B0aW9uc10gT3B0aW9uc1xuICogZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3pvb21dIEluY2x1ZGUge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vWm9vbS5qc1wiKS5PcHRpb25zfSBbem9vbU9wdGlvbnNdIE9wdGlvbnMgZm9yXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfS5cbiAqL1xuXG4vKipcbiAqIFNldCBvZiBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFVubGVzcyBjb25maWd1cmVkIG90aGVyd2lzZSxcbiAqIHRoaXMgcmV0dXJucyBhIGNvbGxlY3Rpb24gY29udGFpbmluZyBhbiBpbnN0YW5jZSBvZiBlYWNoIG9mIHRoZSBmb2xsb3dpbmdcbiAqIGNvbnRyb2xzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucyBmb3IgdGhlIGRlZmF1bHQgY29udHJvbHMuXG4gKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gQSBjb2xsZWN0aW9uIG9mIGNvbnRyb2xzXG4gKiB0byBiZSB1c2VkIHdpdGggdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gY29uc3RydWN0b3IncyBgY29udHJvbHNgIG9wdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XG5cbiAgLyoqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gKi9cbiAgY29uc3QgY29udHJvbHMgPSBuZXcgQ29sbGVjdGlvbigpO1xuXG4gIGNvbnN0IHpvb21Db250cm9sID0gb3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb20gOiB0cnVlO1xuICBpZiAoem9vbUNvbnRyb2wpIHtcbiAgICBjb250cm9scy5wdXNoKG5ldyBab29tKG9wdGlvbnMuem9vbU9wdGlvbnMpKTtcbiAgfVxuXG4gIGNvbnN0IHJvdGF0ZUNvbnRyb2wgPSBvcHRpb25zLnJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5yb3RhdGUgOiB0cnVlO1xuICBpZiAocm90YXRlQ29udHJvbCkge1xuICAgIGNvbnRyb2xzLnB1c2gobmV3IFJvdGF0ZShvcHRpb25zLnJvdGF0ZU9wdGlvbnMpKTtcbiAgfVxuXG4gIGNvbnN0IGF0dHJpYnV0aW9uQ29udHJvbCA9XG4gICAgb3B0aW9ucy5hdHRyaWJ1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdHRyaWJ1dGlvbiA6IHRydWU7XG4gIGlmIChhdHRyaWJ1dGlvbkNvbnRyb2wpIHtcbiAgICBjb250cm9scy5wdXNoKG5ldyBBdHRyaWJ1dGlvbihvcHRpb25zLmF0dHJpYnV0aW9uT3B0aW9ucykpO1xuICB9XG5cbiAgcmV0dXJuIGNvbnRyb2xzO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL2RlZmF1bHRzXG4gKi9cbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4uL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IERvdWJsZUNsaWNrWm9vbSBmcm9tICcuL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5pbXBvcnQgRHJhZ1BhbiBmcm9tICcuL0RyYWdQYW4uanMnO1xuaW1wb3J0IERyYWdSb3RhdGUgZnJvbSAnLi9EcmFnUm90YXRlLmpzJztcbmltcG9ydCBEcmFnWm9vbSBmcm9tICcuL0RyYWdab29tLmpzJztcbmltcG9ydCBLZXlib2FyZFBhbiBmcm9tICcuL0tleWJvYXJkUGFuLmpzJztcbmltcG9ydCBLZXlib2FyZFpvb20gZnJvbSAnLi9LZXlib2FyZFpvb20uanMnO1xuaW1wb3J0IEtpbmV0aWMgZnJvbSAnLi4vS2luZXRpYy5qcyc7XG5pbXBvcnQgTW91c2VXaGVlbFpvb20gZnJvbSAnLi9Nb3VzZVdoZWVsWm9vbS5qcyc7XG5pbXBvcnQgUGluY2hSb3RhdGUgZnJvbSAnLi9QaW5jaFJvdGF0ZS5qcyc7XG5pbXBvcnQgUGluY2hab29tIGZyb20gJy4vUGluY2hab29tLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZWZhdWx0c09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2FsdFNoaWZ0RHJhZ1JvdGF0ZT10cnVlXSBXaGV0aGVyIEFsdC1TaGlmdC1kcmFnIHJvdGF0ZSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBJbnRlcmFjdCBvbmx5IHdoZW4gdGhlIG1hcCBoYXMgdGhlXG4gKiBmb2N1cy4gVGhpcyBhZmZlY3RzIHRoZSBgTW91c2VXaGVlbFpvb21gIGFuZCBgRHJhZ1BhbmAgaW50ZXJhY3Rpb25zIGFuZCBpc1xuICogdXNlZnVsIHdoZW4gcGFnZSBzY3JvbGwgaXMgZGVzaXJlZCBmb3IgbWFwcyB0aGF0IGRvIG5vdCBoYXZlIHRoZSBicm93c2VyJ3NcbiAqIGZvY3VzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZG91YmxlQ2xpY2tab29tPXRydWVdIFdoZXRoZXIgZG91YmxlIGNsaWNrIHpvb20gaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtrZXlib2FyZD10cnVlXSBXaGV0aGVyIGtleWJvYXJkIGludGVyYWN0aW9uIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFttb3VzZVdoZWVsWm9vbT10cnVlXSBXaGV0aGVyIG1vdXNld2hlZWwgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2hpZnREcmFnWm9vbT10cnVlXSBXaGV0aGVyIFNoaWZ0LWRyYWcgem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZHJhZ1Bhbj10cnVlXSBXaGV0aGVyIGRyYWcgcGFuIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFJvdGF0ZT10cnVlXSBXaGV0aGVyIHBpbmNoIHJvdGF0ZSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcGluY2hab29tPXRydWVdIFdoZXRoZXIgcGluY2ggem9vbSBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRGVsdGFdIFpvb20gbGV2ZWwgZGVsdGEgd2hlbiB1c2luZyBrZXlib2FyZCBvciBkb3VibGUgY2xpY2sgem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbUR1cmF0aW9uXSBEdXJhdGlvbiBvZiB0aGUgem9vbSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqL1xuXG4vKipcbiAqIFNldCBvZiBpbnRlcmFjdGlvbnMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBTcGVjaWZpYyBpbnRlcmFjdGlvbnMgY2FuIGJlXG4gKiBleGNsdWRlZCBieSBzZXR0aW5nIHRoZSBhcHByb3ByaWF0ZSBvcHRpb24gdG8gZmFsc2UgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKiBvcHRpb25zLCBidXQgdGhlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgaXMgZml4ZWQuICBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5XG4gKiBhIGRpZmZlcmVudCBvcmRlciBmb3IgaW50ZXJhY3Rpb25zLCB5b3Ugd2lsbCBuZWVkIHRvIGNyZWF0ZSB5b3VyIG93blxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbn5JbnRlcmFjdGlvbn0gaW5zdGFuY2VzIGFuZCBpbnNlcnRcbiAqIHRoZW0gaW50byBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpbiB0aGUgb3JkZXIgeW91IHdhbnRcbiAqIGJlZm9yZSBjcmVhdGluZyB5b3VyIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gaW5zdGFuY2UuIENoYW5naW5nIHRoZSBvcmRlciBjYW5cbiAqIGJlIG9mIGludGVyZXN0IGlmIHRoZSBldmVudCBwcm9wYWdhdGlvbiBuZWVkcyB0byBiZSBzdG9wcGVkIGF0IGEgcG9pbnQuXG4gKiBUaGUgZGVmYXVsdCBzZXQgb2YgaW50ZXJhY3Rpb25zLCBpbiBzZXF1ZW5jZSwgaXM6XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZX5EcmFnUm90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbX5Eb3VibGVDbGlja1pvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1Bhbn5EcmFnUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlflBpbmNoUm90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1BpbmNoWm9vbX5QaW5jaFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5+S2V5Ym9hcmRQYW59XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbX5Nb3VzZVdoZWVsWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbX5EcmFnWm9vbX1cbiAqXG4gKiBAcGFyYW0ge0RlZmF1bHRzT3B0aW9uc30gW29wdGlvbnNdIERlZmF1bHRzIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKiBBIGNvbGxlY3Rpb24gb2YgaW50ZXJhY3Rpb25zIHRvIGJlIHVzZWQgd2l0aCB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfVxuICogY29uc3RydWN0b3IncyBgaW50ZXJhY3Rpb25zYCBvcHRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuXG4gIC8qKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSAqL1xuICBjb25zdCBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbigpO1xuXG4gIGNvbnN0IGtpbmV0aWMgPSBuZXcgS2luZXRpYygtMC4wMDUsIDAuMDUsIDEwMCk7XG5cbiAgY29uc3QgYWx0U2hpZnREcmFnUm90YXRlID1cbiAgICBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICA/IG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlXG4gICAgICA6IHRydWU7XG4gIGlmIChhbHRTaGlmdERyYWdSb3RhdGUpIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1JvdGF0ZSgpKTtcbiAgfVxuXG4gIGNvbnN0IGRvdWJsZUNsaWNrWm9vbSA9XG4gICAgb3B0aW9ucy5kb3VibGVDbGlja1pvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZG91YmxlQ2xpY2tab29tIDogdHJ1ZTtcbiAgaWYgKGRvdWJsZUNsaWNrWm9vbSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKFxuICAgICAgbmV3IERvdWJsZUNsaWNrWm9vbSh7XG4gICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY29uc3QgZHJhZ1BhbiA9IG9wdGlvbnMuZHJhZ1BhbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kcmFnUGFuIDogdHJ1ZTtcbiAgaWYgKGRyYWdQYW4pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChcbiAgICAgIG5ldyBEcmFnUGFuKHtcbiAgICAgICAgb25Gb2N1c09ubHk6IG9wdGlvbnMub25Gb2N1c09ubHksXG4gICAgICAgIGtpbmV0aWM6IGtpbmV0aWMsXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBjb25zdCBwaW5jaFJvdGF0ZSA9XG4gICAgb3B0aW9ucy5waW5jaFJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFJvdGF0ZSA6IHRydWU7XG4gIGlmIChwaW5jaFJvdGF0ZSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBQaW5jaFJvdGF0ZSgpKTtcbiAgfVxuXG4gIGNvbnN0IHBpbmNoWm9vbSA9IG9wdGlvbnMucGluY2hab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpbmNoWm9vbSA6IHRydWU7XG4gIGlmIChwaW5jaFpvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChcbiAgICAgIG5ldyBQaW5jaFpvb20oe1xuICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBjb25zdCBrZXlib2FyZCA9IG9wdGlvbnMua2V5Ym9hcmQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMua2V5Ym9hcmQgOiB0cnVlO1xuICBpZiAoa2V5Ym9hcmQpIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgS2V5Ym9hcmRQYW4oKSk7XG4gICAgaW50ZXJhY3Rpb25zLnB1c2goXG4gICAgICBuZXcgS2V5Ym9hcmRab29tKHtcbiAgICAgICAgZGVsdGE6IG9wdGlvbnMuem9vbURlbHRhLFxuICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBjb25zdCBtb3VzZVdoZWVsWm9vbSA9XG4gICAgb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSA6IHRydWU7XG4gIGlmIChtb3VzZVdoZWVsWm9vbSkge1xuICAgIGludGVyYWN0aW9ucy5wdXNoKFxuICAgICAgbmV3IE1vdXNlV2hlZWxab29tKHtcbiAgICAgICAgb25Gb2N1c09ubHk6IG9wdGlvbnMub25Gb2N1c09ubHksXG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHNoaWZ0RHJhZ1pvb20gPVxuICAgIG9wdGlvbnMuc2hpZnREcmFnWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaGlmdERyYWdab29tIDogdHJ1ZTtcbiAgaWYgKHNoaWZ0RHJhZ1pvb20pIHtcbiAgICBpbnRlcmFjdGlvbnMucHVzaChcbiAgICAgIG5ldyBEcmFnWm9vbSh7XG4gICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBpbnRlcmFjdGlvbnM7XG59XG4iLCJpbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XG5pbXBvcnQge01hcH0gZnJvbSBcIm9sXCI7XG5cbi8qKlxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgQ29udHJvbHMgd2l0aCBjaGlsZCBjb250cm9sc1xuICpcbiAqIFRoZSBlbGVtZW50IHByb3BlcnR5IG9mIHRoZSBDb21wb3NpdGVDb250cm9sIHdpbGwgYmVjb21lIHRoZSB0YXJnZXQgZWxlbWVudCBvZiBldmVyeSBjaGlsZCBjb250cm9sXG4gKiBhbmQgYWxzbyB0aGUgY3VycmVudCBtYXAgd2lsbCBiZSBzZXQgZm9yIGVhY2ggY2hpbGQgY29udHJvbFxuICpcbiAqIFRoaXMgaXMgdXNlZCBlLmcuIGZvciB0aGUgKGxheW91dCkgY29udGFpbmVyIGNvbnRyb2xzXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb3NpdGVDb250cm9sIGV4dGVuZHMgQ29udHJvbCB7XG5cbiAgLyoqXG4gICAqIFRoZSBjaGlsZCBjb250cm9sc1xuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgY2hpbGRDb250cm9sczogQ29udHJvbFtdO1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gY2hpbGRDb250cm9scyBBIHNpbmdsZSBjaGlsZCBjb250cm9sIG9yIGEgY29sbGVjdGlvbiBvZiBjaGlsZCBjb250cm9sc1xuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgT3BlbkxheWVyIGNvbnRyb2wgb3B0aW9uc1xuICAgKi9cbiAgcHJvdGVjdGVkIGNvbnN0cnVjdG9yKGNoaWxkQ29udHJvbHM6IENvbnRyb2wgfCBDb250cm9sW10sIG9wdGlvbnM/OiBPcHRpb25zKSB7XG5cbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIGlmKCFvcHRzLmVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtY29tcG9zaXRlJztcbiAgICAgIG9wdHMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgbGV0IGNoaWxkcmVuO1xuICAgIGlmIChjaGlsZENvbnRyb2xzIGluc3RhbmNlb2YgQ29udHJvbCkge1xuICAgICAgY2hpbGRyZW4gPSBbY2hpbGRDb250cm9sc107XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkcmVuID0gY2hpbGRDb250cm9scztcbiAgICB9XG5cbiAgICBjaGlsZHJlbi5mb3JFYWNoKGNvbnRyb2wgPT4ge1xuICAgICAgY29udHJvbC5zZXRUYXJnZXQob3B0cy5lbGVtZW50IGFzIEhUTUxFbGVtZW50KTtcbiAgICB9KTtcblxuICAgIHN1cGVyKG9wdHMpO1xuXG4gICAgdGhpcy5jaGlsZENvbnRyb2xzID0gY2hpbGRyZW47XG4gIH1cblxuICAvKipcbiAgICogVGhlIG92ZXJyaWRkZW4gc2V0TWFwIG1ldGhvZFxuICAgKlxuICAgKiBIZXJlIHdlIHNldCB0aGUgbWFwIGZvciBhbGwgY2hpbGQgY29udHJvbHNcbiAgICogQHBhcmFtIG1hcCB0aGUgY3VycmVudCBtYXBcbiAgICovXG4gIHB1YmxpYyBzZXRNYXAobWFwOiBNYXApOiB2b2lkIHtcbiAgICBzdXBlci5zZXRNYXAobWFwKTtcbiAgICBpZihtYXApIHtcbiAgICAgIHRoaXMuY2hpbGRDb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4ge1xuICAgICAgICBjb250cm9sLnNldE1hcChtYXApO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEEgZ2V0dGVyIGZvciB0aGUgY2hpbGQgY29udHJvbHNcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHVibGljIGdldENoaWxkQ29udHJvbHMoKTogQ29udHJvbFtdIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZENvbnRyb2xzO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc2V0dGVyIGZvciB0aGUgY2hpbGQgY29udHJvbHNcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHNcbiAgICovXG4gIHB1YmxpYyBzZXRDaGlsZENvbnRyb2xzKGNoaWxkQ29udHJvbHM6IENvbnRyb2xbXSk6IHZvaWQge1xuICAgIHRoaXMuY2hpbGRDb250cm9scyA9IGNoaWxkQ29udHJvbHM7XG4gIH1cblxuICAvKipcbiAgICogQSBnZXR0ZXIgZm9yIHRoZSBlbGVtZW50XG4gICAqL1xuICBwdWJsaWMgZ2V0RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcbiAgfVxufVxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tIFwib2wvY29udHJvbC9Db250cm9sXCI7XG5pbXBvcnQge0NvbXBvc2l0ZUNvbnRyb2x9IGZyb20gXCIuLi9iYXNlXCI7XG5cbi8qKlxuICogT3B0aW9ucyBmb3IgYSB7QGxpbmsgQ29udGFpbmVyfVxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbnRhaW5lck9wdGlvbnMgZXh0ZW5kcyBPcHRpb25zIHtcbiAgLyoqIFRoZSBzdHlsZSBjbGFzcyBvZiB0aGUgY29udGFpbmVyICoqL1xuICBzdHlsZUNsYXNzOiBzdHJpbmdcbiAgLyoqIEEgY2hpbGQgY29udHJvbCBvciBhbiBhcnJheSBvZiBjaGlsZCBjb250cm9scyAqKi9cbiAgY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSxcbn1cblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgZm9yIGEgY29udGFpbmVyIG9mIGNvbnRyb2xzIGluIHRoZSBzYW1lIEhUTUwgZGl2IGVsZW1lbnRcbiAqXG4gKiBUaGlzIGNvbnRyb2wgY3JlYXRlcyBhIHBhcmVudCBkaXYsIGFuZCBwdXRzIHRoZSBjaGlsZCBjb250cm9scyBpbiBpdC5cbiAqIFRhcmdldCBhbmQgbWFwIGFyZSBzZXQgYXV0b21hdGljYWxseSAtIHNlZSB7QGxpbmsgQ29tcG9zaXRlQ29udHJvbH1cbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRhaW5lciBleHRlbmRzIENvbXBvc2l0ZUNvbnRyb2wge1xuXG4gIC8qKiBUaGUgc3R5bGUgY2xhc3Mgb2YgdGhlIGNvbnRhaW5lciAqKi9cbiAgcHJpdmF0ZSByZWFkb25seSBzdHlsZUNsYXNzOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjb250YWluZXIgb3B0aW9uc1xuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBDb250YWluZXJPcHRpb25zKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCA/IG9wdGlvbnMuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKG9wdGlvbnMuc3R5bGVDbGFzcyk7XG4gICAgb3B0aW9ucy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICBzdXBlcihvcHRpb25zLmNoaWxkQ29udHJvbHMsIG9wdGlvbnMpO1xuICAgIHRoaXMuc3R5bGVDbGFzcyA9IG9wdGlvbnMuc3R5bGVDbGFzcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGdldHRlciBmb3IgdGhlIHN0eWxlIGNsYXNzXG4gICAqL1xuICBwdWJsaWMgZ2V0U3R5bGVDbGFzcygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnN0eWxlQ2xhc3M7XG4gIH1cblxufVxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0NvbnRyb2wnO1xuaW1wb3J0IHtDb250YWluZXJ9IGZyb20gXCIuL0NvbnRhaW5lclwiO1xuXG4vKipcbiAqIEEgc2ltcGxlIGZvb3RlciB7QGxpbmsgQ29udGFpbmVyfVxuICovXG5leHBvcnQgY2xhc3MgRm9vdGVyIGV4dGVuZHMgQ29udGFpbmVyIHtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgVGhlIGNoaWxkIGNvbnRyb2xzIGZvciB0aGUgZm9vdGVyIGNvbnRhaW5lclxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgT3BlbkxheWVyIGNvbnRyb2wgb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3IoY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSwgb3B0aW9ucz86T3B0aW9ucykge1xuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6e307XG4gICAgc3VwZXIoey4uLm9wdHMgLCBzdHlsZUNsYXNzOiAnYmdpcy1mb290ZXInLCBjaGlsZENvbnRyb2xzfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQSBzaW1wbGUgaGVscGVyIG1ldGhvZCBmb3Igc2ltcGxlciBoYW5kbGluZyBvZiBhcnJheXMuXG4gKiBSZWdhcmRsZXNzIGlmIHlvdSBnaXZlIGEgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ3MgeW91IHdpbGwgcmVjZWl2ZSBhbiBhcnJheVxuICpcbiAqIEBwYXJhbSB2YWx1ZSBhIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdcbiAqL1xuY29uc3QgdG9BcnJheSA9ICh2YWx1ZTogc3RyaW5nIHwgc3RyaW5nW10pID0+IHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBbdmFsdWVdO1xuICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjaGlsZCBIVE1MIGVsZW1lbnQgaWYgaXQgZG9lcyBub3QgZXhpc3QgYW5kIGFkZHMgaXQgYXMgY2hpbGQgdG8gdGhlIGdpdmVuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnRcbiAqIEBwYXJhbSB0YWdOYW1lIHRoZSB0YWcgbmFtZSBmb3IgdGhlIG5ldyBjaGlsZCAtIGUuZy4gZGl2XG4gKiBAcGFyYW0gY2xhc3NOYW1lIGEgY3NzIGNsYXNzIG5hbWUgZm9yIHRoZSBuZXcgY2hpbGRcbiAqL1xuZXhwb3J0IGNvbnN0IGNyZWF0ZUNoaWxkSWZOb3RFeGlzdCA9IChlbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwsIHRhZ05hbWU6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XG4gICAgICBpZiAoIWVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y2xhc3NOYW1lfWApKSB7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY3JlYXRlRWxlbWVudCh0YWdOYW1lLCBjbGFzc05hbWUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJFbmNsb3NpbmcgZWxlbWVudCBpcyBudWxsXCIpO1xuICAgIH1cbiAgfVxuO1xuXG4vKipcbiAqIFJlbW92ZXMgYSBjaGlsZCBlbGVtZW50IHdpdGggZ2l2ZW4gY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGdpdmVuIGVsZW1lbnRcbiAqIEBwYXJhbSBlbGVtZW50IHRoZSBwYXJlbnQgZWxlbWVudFxuICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGNoaWxkIGVsZW1lbnRcbiAqL1xuZXhwb3J0IGNvbnN0IHJlbW92ZUNoaWxkSWZFeGlzdCA9IChlbGVtZW50OiBIVE1MRWxlbWVudCB8IG51bGwsIGNsYXNzTmFtZTogc3RyaW5nKTogdm9pZCA9PiB7XG4gIGlmIChlbGVtZW50ICE9IG51bGwpIHtcbiAgICBjb25zdCBjaGlsZCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y2xhc3NOYW1lfWApO1xuICAgIGlmIChjaGlsZCAhPSBudWxsICYmIGVsZW1lbnQuY29udGFpbnMoY2hpbGQpKSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgYWxsIGNoaWxkcmVuIGVsZW1lbnRzIHdpdGggZ2l2ZW4gY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGdpdmVuIHBhcmVudCBlbGVtZW50LlxuICogVGhlIGNoaWxkcmVuIGRvbid0IGhhdmUgdG8gYmUgYSBkaXJlY3QgY2hpbGQgb2YgdGhlIHBhcmVudCBlbGVtZW50LlxuICogQHBhcmFtIGVsZW1lbnQgdGhlIHBhcmVudCBlbGVtZW50XG4gKiBAcGFyYW0gY2xhc3NOYW1lIHRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgY2hpbGQgZWxlbWVudFxuICovXG5leHBvcnQgY29uc3QgcmVtb3ZlQ2hpbGRyZW5JZkV4aXN0ID0gKGVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCwgY2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgaWYgKGVsZW1lbnQgIT0gbnVsbCkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtjbGFzc05hbWV9YCk7XG4gICAgaWYgKGNoaWxkcmVuICE9IG51bGwgJiYgY2hpbGRyZW4ubGVuZ3RoPjApIHtcbiAgICAgIGNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gY2hpbGQucGFyZW50RWxlbWVudCYmY2hpbGQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBIVE1MIGVsZW1lbnRcbiAqIEBwYXJhbSB0YWdOYW1lIHRoZSB0YWcgbmFtZSBmb3IgdGhlIG5ldyBlbGVtZW50IC0gZS5nLiBkaXZcbiAqIEBwYXJhbSBjbGFzc05hbWUgYSBjc3MgY2xhc3MgbmFtZSBmb3IgdGhlIG5ldyBlbGVtZW50XG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVFbGVtZW50ID0gKHRhZ05hbWU6IHN0cmluZywgY2xhc3NOYW1lOiBzdHJpbmcpOiBIVE1MRWxlbWVudCA9PiB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgcmV0dXJuIGVsZW1lbnQ7XG59O1xuXG4vKipcbiAqIFRvZ2dsZXMgY3NzIGNsYXNzIG5hbWVzIG9mIGVsZW1lbnRzIGZvdW5kIGJ5IHRoZSBnaXZlbiBzZWxlY3RvcihzKVxuICogQHBhcmFtIHNlbGVjdG9yczJ0b2dnbGUgb25lIG9yIG1vcmUgY3NzIHNlbGVjdG9yc1xuICogQHBhcmFtIHRvZ2dsZUNsYXNzTmFtZXMgb25lIG9yIG1vcmUgY2xhc3MgbmFtZXMgdG8gdG9nZ2xlXG4gKiBAcGFyYW0gYW5jZXN0b3IgYW4gYW5jZXN0b3IgZWxlbWVudCBmb3IgdGhlIHF1ZXJ5IHNlbGVjdGlvbiAoZGVmYXVsdCBpcyBkb2N1bWVudClcbiAqL1xuZXhwb3J0IGNvbnN0IHRvZ2dsZUNsYXNzID0gKHNlbGVjdG9yczJ0b2dnbGU6IHN0cmluZyB8IHN0cmluZ1tdLCB0b2dnbGVDbGFzc05hbWVzOiBzdHJpbmcgfCBzdHJpbmdbXSwgYW5jZXN0b3I6IERvY3VtZW50IHwgRWxlbWVudCA9IGRvY3VtZW50KTogdm9pZCA9PiB7XG4gIHRvQXJyYXkoc2VsZWN0b3JzMnRvZ2dsZSkuZm9yRWFjaChzZWxlY3RvcjJ0b2dnbGUgPT4ge1xuICAgIGNvbnN0IHRvZ2dsZUVsZW1lbnQgPSBhbmNlc3Rvci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yMnRvZ2dsZSk7XG4gICAgaWYgKHRvZ2dsZUVsZW1lbnQpIHtcbiAgICAgIHRvQXJyYXkodG9nZ2xlQ2xhc3NOYW1lcykuZm9yRWFjaChcbiAgICAgICAgdG9nZ2xlQ2xhc3NOYW1lID0+IHRvZ2dsZUVsZW1lbnQ/LmNsYXNzTGlzdC50b2dnbGUodG9nZ2xlQ2xhc3NOYW1lKVxuICAgICAgKTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIEFkZHMgYSBjbGljayBldmVudCBsaXN0ZW5lciB0byBlbGVtZW50cyB3aGljaCB0cmlnZ2VycyBjc3MgY2xhc3MgdG9nZ2xpbmdcbiAqIEBwYXJhbSBjbGlja1NlbGVjdG9ycyBvbmUgb3IgbW9yZSBjc3Mgc2VsZWN0b3JzIGZvciB0aGUgZWxlbWVudHMgd2hpY2ggc2hhbGwgbGlzdGVuIHRvIGNsaWNrIGV2ZW50c1xuICogQHBhcmFtIHNlbGVjdG9yczJ0b2dnbGUgb25lIG9yIG1vcmUgY3NzIGNsYXNzIHNlbGVjdG9ycyBmb3IgdGhlIGVsZW1lbnRzIHdpdGggdGhlIGNzcyBjbGFzc2VzIHRvIHRvZ2dsZVxuICogQHBhcmFtIHRvZ2dsZUNsYXNzTmFtZXMgb25lIG9yIG1vcmUgY3NzIGNsYXNzIG5hbWVzIHdoaWNoIHNoYWxsIHRvZ2dsZVxuICovXG5leHBvcnQgY29uc3QgdG9nZ2xlQ2xhc3NPbkNsaWNrID0gKGNsaWNrU2VsZWN0b3JzOiBzdHJpbmcgfCBzdHJpbmdbXSwgc2VsZWN0b3JzMnRvZ2dsZTogc3RyaW5nIHwgc3RyaW5nW10sIHRvZ2dsZUNsYXNzTmFtZXM6IHN0cmluZyB8IHN0cmluZ1tdKTogdm9pZCA9PiB7XG4gIHRvQXJyYXkoY2xpY2tTZWxlY3RvcnMpLmZvckVhY2goY2xpY2tTZWxlY3RvciA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbGlja1NlbGVjdG9yKT8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgIHRvZ2dsZUNsYXNzKHNlbGVjdG9yczJ0b2dnbGUsIHRvZ2dsZUNsYXNzTmFtZXMpO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5cbi8qKlxuICogUmVtb3ZlcyhzKSBjbGFzcyBuYW1lcy5cbiAqIEBwYXJhbSBzZWxlY3RvcnMycmVtb3ZlIFRoZSBzZWxlY3RvciBvZiB0aGUgZWxlbWVudCB3aGVyZSB0byByZW1vdmUgZnJvbS5cbiAqIEBwYXJhbSByZW1vdmVDbGFzc05hbWVzIFRoZSBjbGFzcyBuYW1lKHMpIHRvIHJlbW92ZS5cbiAqIEBwYXJhbSBhbmNlc3RvciBUaGUgYW5jZXN0b3IgdG8gdXNlLlxuICovXG5leHBvcnQgY29uc3QgcmVtb3ZlQ2xhc3MgPSAoc2VsZWN0b3JzMnJlbW92ZTogc3RyaW5nIHwgc3RyaW5nW10sIHJlbW92ZUNsYXNzTmFtZXM6IHN0cmluZyB8IHN0cmluZ1tdLCBhbmNlc3RvcjogRG9jdW1lbnQgfCBFbGVtZW50ID0gZG9jdW1lbnQpOiB2b2lkID0+IHtcbiAgdG9BcnJheShzZWxlY3RvcnMycmVtb3ZlKS5mb3JFYWNoKHNlbGVjdG9yMnRvZ2dsZSA9PiB7XG4gICAgY29uc3QgdG9nZ2xlRWxlbWVudCA9IGFuY2VzdG9yLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IydG9nZ2xlKTtcbiAgICBpZiAodG9nZ2xlRWxlbWVudCkge1xuICAgICAgdG9BcnJheShyZW1vdmVDbGFzc05hbWVzKS5mb3JFYWNoKFxuICAgICAgICB0b2dnbGVDbGFzc05hbWUgPT4gdG9nZ2xlRWxlbWVudD8uY2xhc3NMaXN0LnJlbW92ZSh0b2dnbGVDbGFzc05hbWUpXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQWRkcyBjbGFzcyBuYW1lcyhzKS5cbiAqIEBwYXJhbSBzZWxlY3RvcnMyYWRkIFRoZSBzZWxlY3RvciBvZiB0aGUgZWxlbWVudCB3aGVyZSB0byBhZGQgdG8uXG4gKiBAcGFyYW0gYWRkQ2xhc3NOYW1lcyBUaGUgY2xhc3MgbmFtZXMocykgdG8gYWRkLlxuICogQHBhcmFtIGFuY2VzdG9yIFRoZSBhbmNlc3RvciB0byB1c2UuXG4gKi9cbmV4cG9ydCBjb25zdCBhZGRDbGFzcyA9IChzZWxlY3RvcnMyYWRkOiBzdHJpbmcgfCBzdHJpbmdbXSwgYWRkQ2xhc3NOYW1lczogc3RyaW5nIHwgc3RyaW5nW10sIGFuY2VzdG9yOiBEb2N1bWVudCB8IEVsZW1lbnQgPSBkb2N1bWVudCk6IHZvaWQgPT4ge1xuICB0b0FycmF5KHNlbGVjdG9yczJhZGQpLmZvckVhY2goc2VsZWN0b3IydG9nZ2xlID0+IHtcbiAgICBjb25zdCB0b2dnbGVFbGVtZW50ID0gYW5jZXN0b3IucXVlcnlTZWxlY3RvcihzZWxlY3RvcjJ0b2dnbGUpO1xuICAgIGlmICh0b2dnbGVFbGVtZW50KSB7XG4gICAgICB0b0FycmF5KGFkZENsYXNzTmFtZXMpLmZvckVhY2goXG4gICAgICAgIHRvZ2dsZUNsYXNzTmFtZSA9PiB0b2dnbGVFbGVtZW50Py5jbGFzc0xpc3QuYWRkKHRvZ2dsZUNsYXNzTmFtZSlcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn1cblxuXG5cblxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tIFwib2wvY29udHJvbC9Db250cm9sXCI7XG5pbXBvcnQge0NvbXBvc2l0ZUNvbnRyb2x9IGZyb20gXCIuL0NvbXBvc2l0ZUNvbnRyb2xcIjtcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xuaW1wb3J0IEV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcbmltcG9ydCB7T2JqZWN0T25TaWduYXR1cmV9IGZyb20gXCJvbC9PYmplY3RcIjtcbmltcG9ydCB7RXZlbnRzS2V5fSBmcm9tIFwib2wvZXZlbnRzXCI7XG5cbi8qKlxuICogT3B0aW9ucyBmb3Ige0BsaW5rIEJ1dHRvbn1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCdXR0b25PcHRpb25zIGV4dGVuZHMgT3B0aW9ucyB7XG5cbiAgLyoqIFRoZSB1bmljb2RlIG51bWJlciBvZiB0aGUgZm9udCBpY29uLCBlLmcuIDB4ZTkwMyAqKi9cbiAgdW5pY29kZT86IG51bWJlciB8IG51bGwsXG5cbiAgLyoqIFRoZSB0ZXh0IHVzZWQgZm9yIHRoZSB0aXRsZSBhbmQgYXJpYSBhdHRyaWJ1dGVzIG9mIHRoZSBidXR0b24gY29udGFpbmVyIGFuZCB0aGUgYnV0dG9uIGl0c2VsZi4gKiovXG4gIHRvb2x0aXA/OiBzdHJpbmcsXG5cbiAgLyoqIFN0eWxlIGNsYXNzIG5hbWUgZm9yIHRoZSBjb250YWluZXIgICoqL1xuICBjb250YWluZXJDbGFzc05hbWU/OiBzdHJpbmcsXG5cbiAgLyoqIFN0eWxlIGNsYXNzIG5hbWUgZm9yIHRoZSBidXR0b24gZWxlbWVudCAqKi9cbiAgaWNvbkNsYXNzTmFtZT86IHN0cmluZyB8IG51bGwsXG5cbiAgLyoqIElmICd0cnVlJyB0aGUgdG9vbHRpcCB0ZXh0IHdpbGwgYmUgcmVuZGVyZWQgYXMgdmlzaWJsZSB0ZXh0IGVsZW1lbnQgICoqL1xuICB0b29sdGlwQXNUZXh0RWxlbWVudD86IGJvb2xlYW4sXG5cbiAgLyoqIElmICd0cnVlJyB0aGUgZGVmYXVsdCBidXR0b24gY2xpY2sgaGFuZGxlciB3aWxsIG5vdCBiZSBleGVjdXRlZCAqKi9cbiAgcHJldmVudERlZmF1bHQ/OiBib29sZWFuXG59XG5cbi8qKlxuICogVGhlIGV4dGVuZGVkIHNpZ25hdHVyZSBmb3IgdGhlIG9uIG1ldGhvZCBvZiB0aGUge0BsaW5rIEJ1dHRvbn1cbiAqL1xuZXhwb3J0IHR5cGUgQnV0dG9uT25TaWduYXR1cmU8UmV0dXJuPiA9ICgodHlwZTogXCJjbGlja1wiIHwgXCJjbGlja1wiW10sIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50KSA9PiB1bmtub3duKSA9PiBSZXR1cm4pICYgT2JqZWN0T25TaWduYXR1cmU8UmV0dXJuPjtcblxuLyoqXG4gKiAqKkJhc2UgY2xhc3MgZm9yIGJ1dHRvbnMqKlxuICpcbiAqIFVzZSB0aGUgQnV0dG9uIGNsYXNzIGFzIGJhc2UgY2xhc3Mgb3IgY3JlYXRlIGEgZnVsbHkgY29uZmlndXJhYmxlIGluc3RhbmNlIGRpcmVjdGx5LlxuICpcbiAqIEEgYnV0dG9uIGlzIGFuIE9wZW5MYXllciBjb250cm9sIHdpdGggYSBkZWZhdWx0IGxheW91dC4gWW91IGNhbiBjaGFuZ2Ugc29tZSBzdHlsZSBjbGFzc2VzLCB0b29sdGlwcyBldGMuXG4gKiB3aXRoIHRoZSB7QGxpbmsgQnV0dG9uT3B0aW9uc31cbiAqXG4gKiBTb21lIGJ1dHRvbnMgZXh0ZW5kIE9wZW5MYXllciBjb250cm9scyB3aXRoIGl0cyBmZWF0dXJlcywgYnV0IG1vc3Qgb2YgdGhlbSBhcmUganVzdCBhIHNoZWxsIGZvciBmdXJ0aGVyIGltcGxlbWVudGF0aW9uc1xuICpcbiAqIFlvdSBjYW4gc2V0IHRoZSBpY29uIGZvbnQgb2YgdGhlIGJ1dHRvbiB3aXRoIHRoZSB1bmljb2RlIG51bWJlciBvciB0aGUgaWNvbkNsYXNzTmFtZSBvcHRpb24uXG4gKlxuICogQSBCdXR0b24gZGlzcGF0Y2hlcyB0aGUgQ0xJQ0sgZXZlbnQgc28gdGhhdCB5b3UgY2FuIGxpc3RlbiB0byBpdCB3aXRoIHRoZSAqb24qIE9wZW5MYXllciBtZXRob2RcbiAqIEV4YW1wbGU6XG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcmludEN0cmwgPSBuZXcgUHJpbnQoeyBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9KTtcbiAqIHByaW50Q3RybC5vbihFdmVudFR5cGUuQ0xJQ0ssIHRoaXMuaGFuZGxlUHJpbnQpO1xuICogYGBgXG4gKiBBbHRlcm5hdGl2ZWx5IHlvdSBjYW4gb3ZlcnJpZGUgdGhlIHtAbGluayBoYW5kbGVFdmVudH0gbWV0aG9kXG4gKlxuICogQHJlbWFyayBBcyBhIGJ1dHRvbiBpcyBhbHNvIGEgQ29tcG9zaXRlQ29udHJvbCBpdCBjYW4gaGF2ZSBjaGlsZCBjb250cm9scy4gRS5nLiBpdCdzIHVzZWQgd2l0aCB0aGUge0BsaW5rIFRvZ2dsZUJ1dHRvbn1cbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBDb21wb3NpdGVDb250cm9sIHtcbiAgLyoqIFRoZSBIVE1MIGVsZW1lbnQgb2YgdGhlIGJ1dHRvbiAqKi9cbiAgcHJvdGVjdGVkIGJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgLyoqIFRoZSB1bmljb2RlIGZvciB0aGUgZm9udCBpY29uICoqL1xuICBwcm90ZWN0ZWQgdW5pY29kZTogbnVtYmVyIHwgbnVsbDtcblxuICAvKiogVGhlIGljb25zIGNzcyBjbGFzcyBuYW1lICoqL1xuICBwcm90ZWN0ZWQgaWNvbkNsYXNzTmFtZTogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqKi9cbiAgcHVibGljIG9uITogQnV0dG9uT25TaWduYXR1cmU8RXZlbnRzS2V5PjtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgQnV0dG9uIG9wdGlvbnNcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgT3B0aW9uYWwgY2hpbGQgY29udHJvbHNcbiAgICogQGV2ZW50IGNsaWNrIFRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZFxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEJ1dHRvbk9wdGlvbnMsIGNoaWxkQ29udHJvbHM/OiBDb250cm9sIHwgQ29udHJvbFtdKSB7XG5cbiAgICBvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50ID0gb3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCA/PyB0cnVlO1xuXG4gICAgb3B0aW9ucy51bmljb2RlID0gb3B0aW9ucy51bmljb2RlIHx8IG51bGw7XG4gICAgb3B0aW9ucy5pY29uQ2xhc3NOYW1lID0gb3B0aW9ucy5pY29uQ2xhc3NOYW1lIHx8IG51bGw7XG4gICAgaWYob3B0aW9ucy51bmljb2RlPT09bnVsbCAmJiBvcHRpb25zLmljb25DbGFzc05hbWU9PT1udWxsKSB7XG4gICAgICBvcHRpb25zLnVuaWNvZGUgPSAweGU5MDM7XG4gICAgfVxuICAgIG9wdGlvbnMudG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcCB8fCAnJztcblxuICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQgPyBvcHRpb25zLmVsZW1lbnQgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICBidXR0b25Db250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9IG9wdGlvbnMuY29udGFpbmVyQ2xhc3NOYW1lID8gb3B0aW9ucy5jb250YWluZXJDbGFzc05hbWUgOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wnO1xuICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQudGl0bGUgPSBvcHRpb25zLnRvb2x0aXA7XG5cbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1pY29uLWJ1dHRvbic7XG5cbiAgICBpZihvcHRpb25zLnVuaWNvZGUgIT09IG51bGwpIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQoQnV0dG9uLmdldEljb25FbGVtZW50Rm9yVW5pY29kZShvcHRpb25zLnVuaWNvZGUpKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaWNvbkNsYXNzTmFtZSAhPT0gbnVsbCkge1xuICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZChCdXR0b24uZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKG9wdGlvbnMuaWNvbkNsYXNzTmFtZSkpO1xuICAgIH1cblxuICAgIGJ1dHRvbkVsZW1lbnQudGl0bGUgPSBvcHRpb25zLnRvb2x0aXA7XG4gICAgaWYob3B0aW9ucy50b29sdGlwLmxlbmd0aCA+IDApIHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgb3B0aW9ucy50b29sdGlwKTtcbiAgICB9XG4gICAgYnV0dG9uQ29udGFpbmVyRWxlbWVudC5hcHBlbmQoYnV0dG9uRWxlbWVudCk7XG5cbiAgICBpZiAob3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCkge1xuICAgICAgY29uc3QgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgZGl2RWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1jb250cm9sLWJ1dHRvbi10ZXh0LWNvbnRhaW5lcic7XG4gICAgICBjb25zdCBzcGFuRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSBhcyBIVE1MU3BhbkVsZW1lbnQ7XG4gICAgICBzcGFuRWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbnMudG9vbHRpcDtcbiAgICAgIHNwYW5FbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWNvbnRyb2wtYnV0dG9uLXRleHQnO1xuICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChzcGFuRWxlbWVudCk7XG4gICAgICBidXR0b25Db250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGRpdkVsZW1lbnQpO1xuICAgIH1cblxuICAgIHN1cGVyKGNoaWxkQ29udHJvbHMgPyBjaGlsZENvbnRyb2xzIDogW10sIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBlbGVtZW50OiBidXR0b25Db250YWluZXJFbGVtZW50XG4gICAgfSk7XG5cbiAgICB0aGlzLnVuaWNvZGUgPSBvcHRpb25zLnVuaWNvZGU7XG4gICAgdGhpcy5pY29uQ2xhc3NOYW1lID0gb3B0aW9ucy5pY29uQ2xhc3NOYW1lO1xuICAgIHRoaXMuYnV0dG9uID0gYnV0dG9uRWxlbWVudDtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5kaXNwYXRjaEV2ZW50KFwiY2xpY2tcIiksIGZhbHNlKTtcblxuICAgIGlmKCFvcHRpb25zLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVFdmVudCk7XG4gICAgfVxuXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgZGVmYXVsdCBjbGljayBoYW5kbGVyIG9mIGEgYnV0dG9uXG4gICAqXG4gICAqIE92ZXJyaWRlIGl0IGZvciB5b3VyIGJlbmVmaXQgb3IgZGlzYWJsZSBleGVjdXRpb24gd2l0aCBvcHRpb25zLnByZXZlbnREZWZhdWx0XG4gICAqIEBwYXJhbSBldmVudFxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEJhc2VFdmVudCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBnZXR0ZXIgZm9yIHRoZSBidXR0b25cbiAgICovXG4gIHB1YmxpYyBnZXRCdXR0b24oKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmJ1dHRvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNldHRlciB0byBjaGFuZ2UgdGhlIHVuaWNvZGUgZm9yIHRoZSBidXR0b24gZm9udCBpY29uLlxuICAgKiBSZW1vdmVzIHRoZSBpY29uIHRhZyBmb3IgdGhlIGJ1dHRvbiBpY29uLlxuICAgKiBAcGFyYW0gdW5pY29kZVxuICAgKi9cbiAgcHVibGljIHNldEJ1dHRvblVuaWNvZGUodW5pY29kZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5nZXRCdXR0b24oKS50ZXh0Q29udGVudCA9ICcnO1xuICAgIHRoaXMuZ2V0QnV0dG9uKCkuaW5uZXJIVE1MID0gJyc7XG4gICAgdGhpcy5nZXRCdXR0b24oKS5hcHBlbmRDaGlsZChCdXR0b24uZ2V0SWNvbkVsZW1lbnRGb3JVbmljb2RlKHVuaWNvZGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHNldHRlciB0byBjaGFuZ2UgdGhlIGljb24gY2xhc3MgbmFtZSBmb3IgdGhlIGJ1dHRvbi5cbiAgICogUmVzZXRzIHRoZSB1bmljb2RlIGZvciB0aGUgYnV0dG9uIGljb24uXG4gICAqIEBwYXJhbSBpY29uQ2xhc3NOYW1lXG4gICAqL1xuICBwdWJsaWMgc2V0QnV0dG9uSWNvbkNsYXNzTmFtZShpY29uQ2xhc3NOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLmdldEJ1dHRvbigpLnRleHRDb250ZW50ID0gJyc7XG4gICAgdGhpcy5nZXRCdXR0b24oKS5pbm5lckhUTUwgPSAnJztcbiAgICB0aGlzLmdldEJ1dHRvbigpLmFwcGVuZENoaWxkKEJ1dHRvbi5nZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUoaWNvbkNsYXNzTmFtZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbiBpY29uIGVsZW1lbnQgZm9yIHRoZSBnaXZlbiBjc3MgY2xhc3MgbmFtZVxuICAgKlxuICAgKiBAcGFyYW0gaWNvbkNsYXNzTmFtZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBzdGF0aWMgZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKGljb25DbGFzc05hbWU6IHN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICBpY29uRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1pY29uICcgKyBpY29uQ2xhc3NOYW1lO1xuICAgIHJldHVybiBpY29uRWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYW4gaWNvbiBlbGVtZW50IGZvciB0aGUgZ2l2ZW4gdW5pY29kZSBmb250XG4gICAqXG4gICAqIEBwYXJhbSB1bmljb2RlXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHN0YXRpYyBnZXRJY29uRWxlbWVudEZvclVuaWNvZGUodW5pY29kZTogbnVtYmVyKTogSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0IGljb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgIGljb25FbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWljb24nO1xuICAgIGljb25FbGVtZW50LnRleHRDb250ZW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQodW5pY29kZSk7XG4gICAgcmV0dXJuIGljb25FbGVtZW50O1xuICB9XG5cbn1cbiIsImltcG9ydCBFdmVudFR5cGUgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFR5cGVcIjtcbmltcG9ydCB7Y3JlYXRlQ2hpbGRJZk5vdEV4aXN0LCByZW1vdmVDaGlsZHJlbklmRXhpc3QsIHRvZ2dsZUNsYXNzfSBmcm9tIFwiLi4vLi4vLi4vdXRpbFwiO1xuaW1wb3J0IHtDb250YWluZXJ9IGZyb20gXCIuLi9jb250YWluZXJcIjtcbmltcG9ydCB7QnV0dG9uLCBCdXR0b25PcHRpb25zfSBmcm9tIFwiLi9CdXR0b25cIjtcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xuXG4vKipcbiAqIFRoZSB0b2dnbGUgZXZlbnQgd2hpY2ggaXMgZGlzcGF0Y2hlZCB3aGVuIHRoZSB7QGxpbmsgVG9nZ2xlQnV0dG9ufSBpcyBjbGlja2VkXG4gKi9cbmV4cG9ydCBjbGFzcyBUb2dnbGVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XG5cbiAgLyoqIEEgZmxhZyB0byBzaG93IHRoZSBzdGF0dXMgb2YgYSB0b2dnbGUgZXZlbnQgKiovXG4gIGlzVG9nZ2xlZDogYm9vbGVhbjtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGVcbiAgICogQHBhcmFtIGlzVG9nZ2xlZCBUaGUgZmxhZyB0byBzaG93IHRoZSBzdGF0ZSBvZiB0aGUgdG9nZ2xlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIGlzVG9nZ2xlZDogYm9vbGVhbikge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpcy5pc1RvZ2dsZWQgPSBpc1RvZ2dsZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgb3B0aW9uIGZvciB0aGUge0BsaW5rIFRvZ2dsZUJ1dHRvbn1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb2dnbGVCdXR0b25PcHRpb25zIGV4dGVuZHMgQnV0dG9uT3B0aW9ucyB7XG4gIC8qKiBUaGUgdW5pY29kZSBvZiB0aGUgZm9udCBpY29uIHZpc2libGUgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWQgKiovXG4gIHVuaWNvZGVUb2dnbGVkPzogbnVtYmVyLFxuXG4gIC8qKiBUaGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGZvbnQgaWNvbiB2aXNpYmxlIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkICoqL1xuICBpY29uQ2xhc3NOYW1lVG9nZ2xlZD86IHN0cmluZyxcblxuICAvKiogVGhlIHtAbGluayBDb250YWluZXJ9IHdoaWNoIHZpc2liaWxpdHkgZ2V0IHRvZ2dsZWQgKiovXG4gIGNvbnRhaW5lclRvVG9nZ2xlOiBDb250YWluZXJcbn1cblxuLyoqXG4gKiBBIHtAbGluayBCdXR0b259IHRvIHRvZ2dsZSB0aGUgdmlzaWJpbGl0eSBvZiBhIHtAbGluayBDb250YWluZXJ9XG4gKi9cbmV4cG9ydCBjbGFzcyBUb2dnbGVCdXR0b24gZXh0ZW5kcyBCdXR0b24ge1xuXG4gIC8qKiBUaGUge0BsaW5rIENvbnRhaW5lcn0gd2hpY2ggdmlzaWJpbGl0eSBnZXQgdG9nZ2xlZCAqKi9cbiAgcHJvdGVjdGVkIGNvbnRhaW5lclRvVG9nZ2xlOiBDb250YWluZXI7XG5cbiAgLyoqIFRoZSB1bmljb2RlIG9mIHRoZSBmb250IGljb24gdmlzaWJsZSB3aGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCAqKi9cbiAgcHJvdGVjdGVkIHVuaWNvZGVUb2dnbGVkOiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKiBUaGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGZvbnQgaWNvbiB2aXNpYmxlIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkICoqL1xuICBwcm90ZWN0ZWQgaWNvbkNsYXNzTmFtZVRvZ2dsZWQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqIFRoZSBmbGFnIG9mIHRoZSB0b2dnbGUgc3RhdHVzICoqL1xuICBwcm90ZWN0ZWQgX2lzVG9nZ2xlZDogYm9vbGVhbjtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnNcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zOiBUb2dnbGVCdXR0b25PcHRpb25zKSB7XG5cbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIHN1cGVyKG9wdHMgYXMgQnV0dG9uT3B0aW9ucywgb3B0aW9ucy5jb250YWluZXJUb1RvZ2dsZSk7XG5cbiAgICB0aGlzLl9pc1RvZ2dsZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNvbnRhaW5lclRvVG9nZ2xlID0gb3B0aW9ucy5jb250YWluZXJUb1RvZ2dsZTtcbiAgICB0aGlzLnVuaWNvZGVUb2dnbGVkID0gb3B0aW9ucy51bmljb2RlVG9nZ2xlZCB8fCBudWxsO1xuICAgIHRoaXMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQgPSBvcHRpb25zLmljb25DbGFzc05hbWVUb2dnbGVkIHx8IG51bGw7XG5cbiAgICBpZih0aGlzLnVuaWNvZGVUb2dnbGVkID09PSBudWxsICYmIHRoaXMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMudW5pY29kZVRvZ2dsZWQgPSAweGU5MDM7XG4gICAgfVxuXG4gIH1cblxuICAvKipcbiAgICogVGhlIG92ZXJyaWRkZW4gaGFuZGxlRXZlbnQgbWV0aG9kXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcGFyYW0gZXZlbnRcbiAgICovXG4gIHB1YmxpYyBoYW5kbGVFdmVudChldmVudDogQmFzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgaWYoZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNMSUNLKSB7XG4gICAgICB0aGlzLmlzVG9nZ2xlZCA9ICF0aGlzLmlzVG9nZ2xlZDtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgVG9nZ2xlRXZlbnQoXCJ0b2dnbGVcIiwgdGhpcy5pc1RvZ2dsZWQpKTtcblxuICAgICAgY29uc3QgcGFyZW50RWxlbWVudCA9IHRoaXMuZ2V0UGFyZW50RWxlbWVudCgpO1xuXG4gICAgICBpZihwYXJlbnRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG92ZXJsYXlDb250YWluZXJTdG9wRXZlbnREaXYgPSBwYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCcpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBpZih0aGlzLmlzVG9nZ2xlZCkge1xuICAgICAgICAgIG92ZXJsYXlDb250YWluZXJTdG9wRXZlbnREaXYuc3R5bGUuekluZGV4PSd1bnNldCc7XG4gICAgICAgICAgY3JlYXRlQ2hpbGRJZk5vdEV4aXN0KG92ZXJsYXlDb250YWluZXJTdG9wRXZlbnREaXYsICdkaXYnLCAnYmdpcy1vdmVybGF5LWJnJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudERpdi5zdHlsZS56SW5kZXg9JzAnO1xuICAgICAgICAgIHJlbW92ZUNoaWxkcmVuSWZFeGlzdChvdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50RGl2LCAnYmdpcy1vdmVybGF5LWJnJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYodGhpcy5pc1RvZ2dsZWQpIHtcbiAgICAgICAgaWYodGhpcy51bmljb2RlVG9nZ2xlZCE9PW51bGwpIHtcbiAgICAgICAgICB0aGlzLnNldEJ1dHRvblVuaWNvZGUodGhpcy51bmljb2RlVG9nZ2xlZCk7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmljb25DbGFzc05hbWVUb2dnbGVkIT09bnVsbCkge1xuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uSWNvbkNsYXNzTmFtZSh0aGlzLmljb25DbGFzc05hbWVUb2dnbGVkKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYodGhpcy51bmljb2RlIT09bnVsbCkge1xuICAgICAgICAgIHRoaXMuc2V0QnV0dG9uVW5pY29kZSh0aGlzLnVuaWNvZGUpO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy5pY29uQ2xhc3NOYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5zZXRCdXR0b25JY29uQ2xhc3NOYW1lKHRoaXMuaWNvbkNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdG9nZ2xlQ2xhc3MoJy4nICsgdGhpcy5jb250YWluZXJUb1RvZ2dsZS5nZXRTdHlsZUNsYXNzKCksICdzaG93JywgcGFyZW50RWxlbWVudCB8fCBkb2N1bWVudCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgc2V0dGVyIGZvciB0aGUgdG9nZ2xlZCBzdGF0ZSBvZiB0aGUgYnV0dG9uXG4gICAqIEBwYXJhbSBpc1RvZ2dsZWRcbiAgICovXG4gIHB1YmxpYyBzZXQgaXNUb2dnbGVkKGlzVG9nZ2xlZDogYm9vbGVhbikge1xuICAgIHRoaXMuX2lzVG9nZ2xlZCA9IGlzVG9nZ2xlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGdldHRlciBmb3IgdGhlIHRvZ2dsZWQgc3RhdGUgb2YgdGhlIGJ1dHRvblxuICAgKi9cbiAgcHVibGljIGdldCBpc1RvZ2dsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2lzVG9nZ2xlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGdldHRlciBmb3IgdGhlIGNvbnRhaW5lciB0byB0b2dnbGVcbiAgICovXG4gIHB1YmxpYyBnZXRDb250YWluZXJUb1RvZ2dsZSgpOiBDb250YWluZXIge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lclRvVG9nZ2xlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgY2xvc2VzdCBwYXJlbnQgZWxlbWVudCBmb3IgdG9nZ2xlLlxuICAgKiBGb3IgdGhlIGNvcmUgZmVhdHVyZSB2ZXJzaW9uIGl0J3MgdGhlIC5iZ2lzLW1hcFxuICAgKiBGb3IgdGhlIGZ1bGwgZmVhdHVyZSB2ZXJzaW9uIGl0J3MgdGhlIC5iZ2lzXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBnZXRQYXJlbnRFbGVtZW50KCk6IEVsZW1lbnQgfCBudWxsIHtcbiAgICBsZXQgY2xvc2VzdFBhcmVudCA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCcuYmdpcycpO1xuICAgIGlmKCFjbG9zZXN0UGFyZW50KSB7XG4gICAgICBjbG9zZXN0UGFyZW50ID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoJy5iZ2lzLW1hcCcpO1xuICAgIH1cbiAgICByZXR1cm4gY2xvc2VzdFBhcmVudDtcbiAgfVxufVxuIiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQgZGVmYXVsdCB7XCJkZXNrdG9wTWluV2lkdGhcIjpcIjc2OFwiLFwiZm9udEZhbWlseVwiOlwiXFxcIlNvdXJjZSBTYW5zIDNcXFwiLHNhbnMtc2VyaWZcIn07IiwiaW1wb3J0IENvbnRyb2wgZnJvbSBcIm9sL2NvbnRyb2wvQ29udHJvbFwiO1xuaW1wb3J0IHtDb250YWluZXJ9IGZyb20gXCIuL0NvbnRhaW5lclwiO1xuaW1wb3J0IHtUb2dnbGVCdXR0b24sIFRvZ2dsZUV2ZW50fSBmcm9tIFwiLi4vYmFzZVwiO1xuaW1wb3J0IEJhc2VFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XG5pbXBvcnQge09iamVjdE9uU2lnbmF0dXJlfSBmcm9tIFwib2wvT2JqZWN0XCI7XG5pbXBvcnQge0V2ZW50c0tleSwgbGlzdGVufSBmcm9tIFwib2wvZXZlbnRzXCI7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gXCJvbC9ldmVudHMvRXZlbnRUeXBlXCI7XG5pbXBvcnQge01hcH0gZnJvbSBcIm9sXCI7XG5pbXBvcnQgY3NzVmFyaWFibGVzIGZyb20gXCIuLi8uLi9faW5kZXguc2Nzc1wiO1xuXG4vKipcbiAqIE9wdGlvbnMgZm9yIHRoZSB7QGxpbmsgQm90dG9tUmlnaHR9IGNvbnRhaW5lclxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJvdHRvbVJpZ2h0T3B0aW9ucyB7XG4gIC8qKiBBbiBhcnJheSBvZiBob3Jpem9udGFsIGNoaWxkIGNvbnRyb2xzICoqL1xuICBob3Jpem9udGFsQ29udHJvbHM6IENvbnRyb2xbXSxcbiAgLyoqIEFuIGFycmF5IG9mIHZlcnRpY2FsIGNoaWxkIGNvbnRyb2xzICoqL1xuICB2ZXJ0aWNhbENvbnRyb2xzPzogQ29udHJvbFtdXG59XG5cbi8qKlxuICogVGhlIGV4dGVuZGVkIHNpZ25hdHVyZSBmb3IgdGhlIG9uIG1ldGhvZCBvZiB0aGUge0BsaW5rIEJvdHRvbVJpZ2h0fSBjb250YWluZXJcbiAqL1xuZXhwb3J0IHR5cGUgQm90dG9tUmlnaHRPblNpZ25hdHVyZTxSZXR1cm4+ID1cbiAgKCh0eXBlOiBcInRvZ2dsZVwiIHwgXCJ0b2dnbGVcIltdLCBsaXN0ZW5lcjogKGV2ZW50OiBUb2dnbGVFdmVudCkgPT4gdW5rbm93bikgPT4gUmV0dXJuKVxuICAmIE9iamVjdE9uU2lnbmF0dXJlPFJldHVybj47XG5cbi8qKlxuICogQSB7QGxpbmsgQ29udGFpbmVyfSBmb3IgZGlzcGxheSBpbiB0aGUgYm90dG9tIHJpZ2h0IGNvcm5lci5cbiAqIFdlIGhhdmUgaG9yaXpvbnRhbCBjb250cm9scyBhbmQgdmVydGljYWwgY29udHJvbHMuIFRoZSB2aXNpYmlsaXR5IG9mIHZlcnRpY2FsXG4gKiBjb250cm9scyBpcyBjb250cm9sbGVkIGJ5IGEge0BsaW5rIFRvZ2dsZUJ1dHRvbn1cbiAqL1xuZXhwb3J0IGNsYXNzIEJvdHRvbVJpZ2h0IGV4dGVuZHMgQ29udGFpbmVyIHtcblxuICAvKiogVGhlIGtleSBmb3IgdGhlIFwibW92ZWQgZnJvbSBob3Jpem9udGFsXCIgZmxhZyBwcm9wZXJ0eSAqKi9cbiAgc3RhdGljIE1PVkVEX0ZST01fSE9SSVpPTlRBTF9LRVkgPSAnYmdpcy1tb3ZlZC1mcm9tLWhvcml6b250YWwnO1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHB1YmxpYyBvbiE6IEJvdHRvbVJpZ2h0T25TaWduYXR1cmU8RXZlbnRzS2V5PjtcblxuICAvKiogVGhlIHtAbGluayBUb2dnbGVCdXR0b259IHdoaWNoIHRvZ2dsZXMgdGhlIHZpc2liaWxpdHkgb2YgdGhlIHZlcnRpY2FsIGNvbnRyb2xzICoqL1xuICBwcm90ZWN0ZWQgdG9nZ2xlQnV0dG9uOiBUb2dnbGVCdXR0b24gfCBudWxsO1xuXG4gIC8qKiBUaGUgaG9yaXpvbnRhbCBjb250cm9scyAqKi9cbiAgcHJvdGVjdGVkIGhvcml6b250YWxDb250cm9sczogQ29udHJvbFtdID0gW107XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zXG4gICAqIEBldmVudCBUb2dnbGVFdmVudCBUaGUgZXZlbnQgZmlyZWQgd2hlbiB0aGUge0BsaW5rIFRvZ2dsZUJ1dHRvbn0gaXMgY2xpY2tlZFxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9uczogQm90dG9tUmlnaHRPcHRpb25zKSB7XG5cbiAgICBsZXQgdG9nZ2xlQnV0dG9uID0gbnVsbDtcblxuICAgIGlmIChvcHRpb25zLnZlcnRpY2FsQ29udHJvbHMgJiYgb3B0aW9ucy52ZXJ0aWNhbENvbnRyb2xzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRvZ2dsZUJ1dHRvbiA9IEJvdHRvbVJpZ2h0LmNyZWF0ZVRvZ2dsZShvcHRpb25zLnZlcnRpY2FsQ29udHJvbHMpO1xuICAgICAgb3B0aW9ucy5ob3Jpem9udGFsQ29udHJvbHMucHVzaCh0b2dnbGVCdXR0b24pO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xuICAgIHN1cGVyKHsuLi5vcHRzLCBzdHlsZUNsYXNzOiAnYmdpcy1ib3R0b20tcmlnaHQtaG9yaXpvbnRhbCcsIGNoaWxkQ29udHJvbHM6IG9wdGlvbnMuaG9yaXpvbnRhbENvbnRyb2xzfSk7XG5cbiAgICB0aGlzLmhvcml6b250YWxDb250cm9scyA9IG9wdGlvbnMuaG9yaXpvbnRhbENvbnRyb2xzO1xuXG4gICAgdGhpcy50b2dnbGVCdXR0b24gPSB0b2dnbGVCdXR0b247XG4gICAgaWYgKHRoaXMudG9nZ2xlQnV0dG9uICE9IG51bGwpIHtcbiAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b2dnbGVcIiwgKGV2ZW50KTogYm9vbGVhbiA9PiB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCBhcyBCYXNlRXZlbnQpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICAqIEEgZ2V0dGVyIGZvciB0aGUge0BsaW5rIFRvZ2dsZUJ1dHRvbn1cbiAgICovXG4gIHB1YmxpYyBnZXRUb2dnbGVCdXR0b24oKTogVG9nZ2xlQnV0dG9uIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMudG9nZ2xlQnV0dG9uO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBtYXBcbiAgICovXG4gIHB1YmxpYyBzZXRNYXAobWFwOiBNYXApOiB2b2lkIHtcbiAgICBjb25zdCBkZWZhdWx0VmlldyA9IG1hcC5nZXRPd25lckRvY3VtZW50KCkuZGVmYXVsdFZpZXc7XG4gICAgaWYoZGVmYXVsdFZpZXcpIHtcbiAgICAgIGxpc3RlbihkZWZhdWx0VmlldywgRXZlbnRUeXBlLlJFU0laRSwgKCkgPT4ge1xuICAgICAgICB0aGlzLmhhbmRsZUhvcml6b250YWxDb250cm9sc0ZvclNpemUoKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICBzdXBlci5zZXRNYXAobWFwKTtcbiAgICB0aGlzLmhhbmRsZUhvcml6b250YWxDb250cm9sc0ZvclNpemUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgaGFuZGxlciBmb3IgbW92aW5nIHRoZSBob3Jpem9udGFsIGNvbnRyb2xzIGRlcGVuZGluZyBvbiB0aGUgY2xpZW50IHdpZHRoXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBoYW5kbGVIb3Jpem9udGFsQ29udHJvbHNGb3JTaXplKCk6IHZvaWQge1xuICAgIGNvbnN0IG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgaWYobWFwKSB7XG4gICAgICBjb25zdCBkb2N1bWVudFdpZHRoOiBudW1iZXIgPSBtYXAuZ2V0T3duZXJEb2N1bWVudCgpLmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgIGlmKGRvY3VtZW50V2lkdGggPj0gY3NzVmFyaWFibGVzLmRlc2t0b3BNaW5XaWR0aCkgeyAvLyBkZXNrdG9wXG4gICAgICAgIGlmKHRoaXMudG9nZ2xlQnV0dG9uPy5nZXRDb250YWluZXJUb1RvZ2dsZSgpKSB7XG4gICAgICAgICAgY29uc3QgY3Rsc1RvTW92ZSA9IHRoaXMudG9nZ2xlQnV0dG9uLmdldENvbnRhaW5lclRvVG9nZ2xlKCkuZ2V0Q2hpbGRDb250cm9scygpLmZpbHRlcihjdGwgPT4gY3RsLmdldChCb3R0b21SaWdodC5NT1ZFRF9GUk9NX0hPUklaT05UQUxfS0VZKT09PXRydWUpO1xuICAgICAgICAgIGlmKGN0bHNUb01vdmUubGVuZ3RoPjApIHtcbiAgICAgICAgICAgIHRoaXMuZ2V0RWxlbWVudCgpLmlubmVySFRNTCA9ICcnO1xuICAgICAgICAgICAgY3Rsc1RvTW92ZS5mb3JFYWNoKGN0bCA9PiB7XG4gICAgICAgICAgICAgIGN0bC51bnNldChCb3R0b21SaWdodC5NT1ZFRF9GUk9NX0hPUklaT05UQUxfS0VZKTtcbiAgICAgICAgICAgICAgY3RsLnNldFRhcmdldCh0aGlzLmdldEVsZW1lbnQoKSk7XG4gICAgICAgICAgICAgIGN0bC5zZXRNYXAobWFwKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsQ29udHJvbHMgPSBjdGxzVG9Nb3ZlO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uZ2V0Q29udGFpbmVyVG9Ub2dnbGUoKS5zZXRDaGlsZENvbnRyb2xzKHRoaXMudG9nZ2xlQnV0dG9uLmdldENvbnRhaW5lclRvVG9nZ2xlKCkuZ2V0Q2hpbGRDb250cm9scygpLmZpbHRlcihjdGwgPT4gIWN0bHNUb01vdmUuaW5jbHVkZXMoY3RsKSkpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgY29udHJvbHMgbGVmdCBpbiB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgICAgLy8gdGhlbiByZWNyZWF0ZSB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgICAgaWYodGhpcy50b2dnbGVCdXR0b24uZ2V0Q29udGFpbmVyVG9Ub2dnbGUoKS5nZXRDaGlsZENvbnRyb2xzKCkubGVuZ3RoPjApIHtcbiAgICAgICAgICAgICAgY29uc3QgaXNUb2dnbGVkID0gdGhpcy50b2dnbGVCdXR0b24uaXNUb2dnbGVkO1xuICAgICAgICAgICAgICBjb25zdCB0b2dnbGVCdXR0b24gPSBCb3R0b21SaWdodC5jcmVhdGVUb2dnbGUodGhpcy50b2dnbGVCdXR0b24uZ2V0Q29udGFpbmVyVG9Ub2dnbGUoKS5nZXRDaGlsZENvbnRyb2xzKCkpO1xuICAgICAgICAgICAgICB0b2dnbGVCdXR0b24uc2V0VGFyZ2V0KHRoaXMuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLnNldE1hcChtYXApO1xuICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IHRvZ2dsZUJ1dHRvbjtcbiAgICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsQ29udHJvbHMucHVzaCh0b2dnbGVCdXR0b24pO1xuICAgICAgICAgICAgICBpZihpc1RvZ2dsZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5oYW5kbGVFdmVudChuZXcgQmFzZUV2ZW50KEV2ZW50VHlwZS5DTElDSykpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7IC8vIG1vYmlsZVxuICAgICAgICBjb25zdCBjdGxzVG9Nb3ZlID0gdGhpcy5ob3Jpem9udGFsQ29udHJvbHMuZmlsdGVyKGN0bCA9PiAhKGN0bCBpbnN0YW5jZW9mIFRvZ2dsZUJ1dHRvbikgJiYgY3RsLmdldChCb3R0b21SaWdodC5NT1ZFRF9GUk9NX0hPUklaT05UQUxfS0VZKSE9PXRydWUpO1xuICAgICAgICBpZih0aGlzLnRvZ2dsZUJ1dHRvbj8uZ2V0Q29udGFpbmVyVG9Ub2dnbGUoKS5nZXRDaGlsZENvbnRyb2xzKClcbiAgICAgICAgICAmJiB0aGlzLnRvZ2dsZUJ1dHRvbj8uZ2V0Q29udGFpbmVyVG9Ub2dnbGUoKS5nZXRDaGlsZENvbnRyb2xzKCkubGVuZ3RoPjAgfHwgY3Rsc1RvTW92ZS5sZW5ndGg+MSkge1xuICAgICAgICAgIGlmKCF0aGlzLnRvZ2dsZUJ1dHRvbj8uZ2V0Q29udGFpbmVyVG9Ub2dnbGUoKSkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSBCb3R0b21SaWdodC5jcmVhdGVUb2dnbGUoW10pO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uc2V0VGFyZ2V0KHRoaXMuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnNldE1hcChtYXApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdGxzVG9Nb3ZlLmZvckVhY2goY3RsID0+IHtcbiAgICAgICAgICAgIGN0bC5zZXQoQm90dG9tUmlnaHQuTU9WRURfRlJPTV9IT1JJWk9OVEFMX0tFWSwgdHJ1ZSk7XG4gICAgICAgICAgICBpZih0aGlzLnRvZ2dsZUJ1dHRvbikge1xuICAgICAgICAgICAgICBjdGwuc2V0VGFyZ2V0KHRoaXMudG9nZ2xlQnV0dG9uLmdldENvbnRhaW5lclRvVG9nZ2xlKCkuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0bC5zZXRNYXAobWFwKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbj8uZ2V0Q29udGFpbmVyVG9Ub2dnbGUoKS5nZXRDaGlsZENvbnRyb2xzKCkucHVzaCguLi5jdGxzVG9Nb3ZlKTtcbiAgICAgICAgICB0aGlzLmhvcml6b250YWxDb250cm9scyA9IHRoaXMuaG9yaXpvbnRhbENvbnRyb2xzLmZpbHRlcihjdGwgPT4gIWN0bHNUb01vdmUuaW5jbHVkZXMoY3RsKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUge0BsaW5rIFRvZ2dsZUJ1dHRvbn0gdG8gdG9nZ2xlIGEge0BsaW5rIENvbnRhaW5lcn1cbiAgICogd2l0aCB0aGUgZ2l2ZSBjb250cm9scyBpbnNpZGVcbiAgICogQHBhcmFtIHZlcnRpY2FsQ29udHJvbHNcbiAgICovXG4gIHByb3RlY3RlZCBzdGF0aWMgY3JlYXRlVG9nZ2xlKHZlcnRpY2FsQ29udHJvbHM6IENvbnRyb2xbXSk6IFRvZ2dsZUJ1dHRvbiB7XG4gICAgY29uc3QgY29udGFpbmVyVG9Ub2dnbGUgPSBuZXcgQ29udGFpbmVyKHtcbiAgICAgIHN0eWxlQ2xhc3M6ICdiZ2lzLWJvdHRvbS1yaWdodC12ZXJ0aWNhbCcsXG4gICAgICBjaGlsZENvbnRyb2xzOiB2ZXJ0aWNhbENvbnRyb2xzXG4gICAgfSlcbiAgICByZXR1cm4gbmV3IFRvZ2dsZUJ1dHRvbih7XG4gICAgICBjb250YWluZXJUb1RvZ2dsZSxcbiAgICAgIGNvbnRhaW5lckNsYXNzTmFtZTogJ29sLWNvbnRyb2wgYmdpcy1jb250cm9sIGJnaXMtYm90dG9tLXJpZ2h0LW92ZXJsYXknLFxuICAgICAgIGljb25DbGFzc05hbWUgOiAnYmdpcy1pY29uLW1vcmUtZm91cicsXG4gICAgICAgaWNvbkNsYXNzTmFtZVRvZ2dsZWQ6J2JnaXMtaWNvbi10aW1lcycsXG4gICAgICB0b29sdGlwOiAnbWVoci4uLidcbiAgICB9KTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XG5cbi8qKlxuICogQSBzaW1wbGUge0BsaW5rIENvbnRhaW5lcn0gZm9yIGNvbnRyb2xzIG9uIHRoZSB1cHBlciByaWdodCBjb3JuZXJcbiAqL1xuZXhwb3J0IGNsYXNzIFRvcFJpZ2h0IGV4dGVuZHMgQ29udGFpbmVyIHtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgVGhlIGNoaWxkIGNvbnRyb2wgb3IgYW4gYXJyYXkgb2YgY2hpbGQgY29udHJvbHNcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5MYXllciBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihjaGlsZENvbnRyb2xzOiBDb250cm9sIHwgQ29udHJvbFtdLCBvcHRpb25zPzpPcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDp7fTtcbiAgICBzdXBlcih7Li4ub3B0cyAsIHN0eWxlQ2xhc3M6ICdiZ2lzLXRvcC1yaWdodCcsIGNoaWxkQ29udHJvbHN9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0dlb2xvY2F0aW9uXG4gKi9cbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IHtjaXJjdWxhciBhcyBjaXJjdWxhclBvbHlnb259IGZyb20gJy4vZ2VvbS9Qb2x5Z29uLmpzJztcbmltcG9ydCB7XG4gIGdldCBhcyBnZXRQcm9qZWN0aW9uLFxuICBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsXG4gIGlkZW50aXR5VHJhbnNmb3JtLFxufSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IHt0b1JhZGlhbnN9IGZyb20gJy4vbWF0aC5qcyc7XG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuY29uc3QgUHJvcGVydHkgPSB7XG4gIEFDQ1VSQUNZOiAnYWNjdXJhY3knLFxuICBBQ0NVUkFDWV9HRU9NRVRSWTogJ2FjY3VyYWN5R2VvbWV0cnknLFxuICBBTFRJVFVERTogJ2FsdGl0dWRlJyxcbiAgQUxUSVRVREVfQUNDVVJBQ1k6ICdhbHRpdHVkZUFjY3VyYWN5JyxcbiAgSEVBRElORzogJ2hlYWRpbmcnLFxuICBQT1NJVElPTjogJ3Bvc2l0aW9uJyxcbiAgUFJPSkVDVElPTjogJ3Byb2plY3Rpb24nLFxuICBTUEVFRDogJ3NwZWVkJyxcbiAgVFJBQ0tJTkc6ICd0cmFja2luZycsXG4gIFRSQUNLSU5HX09QVElPTlM6ICd0cmFja2luZ09wdGlvbnMnLFxufTtcblxuLyoqXG4gKiBAZW51bSBzdHJpbmdcbiAqL1xuY29uc3QgR2VvbG9jYXRpb25FcnJvclR5cGUgPSB7XG4gIC8qKlxuICAgKiBUcmlnZ2VyZWQgd2hlbiBhIGBHZW9sb2NhdGlvblBvc2l0aW9uRXJyb3JgIG9jY3Vycy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9HZW9sb2NhdGlvbi5HZW9sb2NhdGlvbkVycm9yI2Vycm9yXG4gICAqIEBhcGlcbiAgICovXG4gIEVSUk9SOiAnZXJyb3InLFxufTtcblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBvbiBbR2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yKS5cbiAqL1xuZXhwb3J0IGNsYXNzIEdlb2xvY2F0aW9uRXJyb3IgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICAvKipcbiAgICogQHBhcmFtIHtHZW9sb2NhdGlvblBvc2l0aW9uRXJyb3J9IGVycm9yIGVycm9yIG9iamVjdC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGVycm9yKSB7XG4gICAgc3VwZXIoR2VvbG9jYXRpb25FcnJvclR5cGUuRVJST1IpO1xuXG4gICAgLyoqXG4gICAgICogQ29kZSBvZiB0aGUgdW5kZXJseWluZyBgR2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yYC5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLmNvZGUgPSBlcnJvci5jb2RlO1xuXG4gICAgLyoqXG4gICAgICogTWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZyBgR2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yYC5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdHJhY2tpbmc9ZmFsc2VdIFN0YXJ0IFRyYWNraW5nIHJpZ2h0IGFmdGVyXG4gKiBpbnN0YW50aWF0aW9uLlxuICogQHByb3BlcnR5IHtQb3NpdGlvbk9wdGlvbnN9IFt0cmFja2luZ09wdGlvbnNdIFRyYWNraW5nIG9wdGlvbnMuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFRoZSBwcm9qZWN0aW9uIHRoZSBwb3NpdGlvblxuICogaXMgcmVwb3J0ZWQgaW4uXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTphY2N1cmFjeSd8J2NoYW5nZTphY2N1cmFjeUdlb21ldHJ5J3wnY2hhbmdlOmFsdGl0dWRlJ3xcbiAqICAgICdjaGFuZ2U6YWx0aXR1ZGVBY2N1cmFjeSd8J2NoYW5nZTpoZWFkaW5nJ3wnY2hhbmdlOnBvc2l0aW9uJ3wnY2hhbmdlOnByb2plY3Rpb24nfCdjaGFuZ2U6c3BlZWQnfCdjaGFuZ2U6dHJhY2tpbmcnfFxuICogICAgJ2NoYW5nZTp0cmFja2luZ09wdGlvbnMnfSBHZW9sb2NhdGlvbk9iamVjdEV2ZW50VHlwZXNcbiAqL1xuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPEdlb2xvY2F0aW9uT2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8J2Vycm9yJywgR2VvbG9jYXRpb25FcnJvciwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfEdlb2xvY2F0aW9uT2JqZWN0RXZlbnRUeXBlcywgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPn0gR2VvbG9jYXRpb25PblNpZ25hdHVyZVxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogSGVscGVyIGNsYXNzIGZvciBwcm92aWRpbmcgSFRNTDUgR2VvbG9jYXRpb24gY2FwYWJpbGl0aWVzLlxuICogVGhlIFtHZW9sb2NhdGlvbiBBUEldKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9nZW9sb2NhdGlvbi1BUEkvKVxuICogaXMgdXNlZCB0byBsb2NhdGUgYSB1c2VyJ3MgcG9zaXRpb24uXG4gKlxuICogVG8gZ2V0IG5vdGlmaWVkIG9mIHBvc2l0aW9uIGNoYW5nZXMgYW5kIGVycm9ycywgcmVnaXN0ZXIgbGlzdGVuZXJzIGZvciB0aGUgZ2VuZXJpY1xuICogYGNoYW5nZWAgZXZlbnQgYW5kIHRoZSBgZXJyb3JgIGV2ZW50IG9uIHlvdXIgaW5zdGFuY2Ugb2Yge0BsaW5rIG1vZHVsZTpvbC9HZW9sb2NhdGlvbn5HZW9sb2NhdGlvbn0uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgY29uc3QgZ2VvbG9jYXRpb24gPSBuZXcgR2VvbG9jYXRpb24oe1xuICogICAgICAgLy8gdGFrZSB0aGUgcHJvamVjdGlvbiB0byB1c2UgZnJvbSB0aGUgbWFwJ3Mgdmlld1xuICogICAgICAgcHJvamVjdGlvbjogdmlldy5nZXRQcm9qZWN0aW9uKClcbiAqICAgICB9KTtcbiAqICAgICAvLyBsaXN0ZW4gdG8gY2hhbmdlcyBpbiBwb3NpdGlvblxuICogICAgIGdlb2xvY2F0aW9uLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihldnQpIHtcbiAqICAgICAgIGNvbnNvbGUubG9nKGdlb2xvY2F0aW9uLmdldFBvc2l0aW9uKCkpO1xuICogICAgIH0pO1xuICogICAgIC8vIGxpc3RlbiB0byBlcnJvclxuICogICAgIGdlb2xvY2F0aW9uLm9uKCdlcnJvcicsIGZ1bmN0aW9uKGV2dCkge1xuICogICAgICAgd2luZG93LmNvbnNvbGUubG9nKGV2dC5tZXNzYWdlKTtcbiAqICAgICB9KTtcbiAqXG4gKiBAZmlyZXMgR2VvbG9jYXRpb25FcnJvclxuICogQGFwaVxuICovXG5jbGFzcyBHZW9sb2NhdGlvbiBleHRlbmRzIEJhc2VPYmplY3Qge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gT3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtHZW9sb2NhdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbjtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7R2VvbG9jYXRpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub25jZTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7R2VvbG9jYXRpb25PblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgKi9cbiAgICB0aGlzLnVuO1xuXG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdW5wcm9qZWN0ZWQgKEVQU0c6NDMyNikgZGV2aWNlIHBvc2l0aW9uLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgKi9cbiAgICB0aGlzLnBvc2l0aW9uXyA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1fID0gaWRlbnRpdHlUcmFuc2Zvcm07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMud2F0Y2hJZF8gPSB1bmRlZmluZWQ7XG5cbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlBST0pFQ1RJT04sIHRoaXMuaGFuZGxlUHJvamVjdGlvbkNoYW5nZWRfKTtcbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlRSQUNLSU5HLCB0aGlzLmhhbmRsZVRyYWNraW5nQ2hhbmdlZF8pO1xuXG4gICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLnNldFByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudHJhY2tpbmdPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuc2V0VHJhY2tpbmdPcHRpb25zKG9wdGlvbnMudHJhY2tpbmdPcHRpb25zKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldFRyYWNraW5nKG9wdGlvbnMudHJhY2tpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudHJhY2tpbmcgOiBmYWxzZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdXAuXG4gICAqL1xuICBkaXNwb3NlSW50ZXJuYWwoKSB7XG4gICAgdGhpcy5zZXRUcmFja2luZyhmYWxzZSk7XG4gICAgc3VwZXIuZGlzcG9zZUludGVybmFsKCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXygpIHtcbiAgICBjb25zdCBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgaWYgKHByb2plY3Rpb24pIHtcbiAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhcbiAgICAgICAgZ2V0UHJvamVjdGlvbignRVBTRzo0MzI2JyksXG4gICAgICAgIHByb2plY3Rpb25cbiAgICAgICk7XG4gICAgICBpZiAodGhpcy5wb3NpdGlvbl8pIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUE9TSVRJT04sIHRoaXMudHJhbnNmb3JtXyh0aGlzLnBvc2l0aW9uXykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlVHJhY2tpbmdDaGFuZ2VkXygpIHtcbiAgICBpZiAoJ2dlb2xvY2F0aW9uJyBpbiBuYXZpZ2F0b3IpIHtcbiAgICAgIGNvbnN0IHRyYWNraW5nID0gdGhpcy5nZXRUcmFja2luZygpO1xuICAgICAgaWYgKHRyYWNraW5nICYmIHRoaXMud2F0Y2hJZF8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLndhdGNoSWRfID0gbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oXG4gICAgICAgICAgdGhpcy5wb3NpdGlvbkNoYW5nZV8uYmluZCh0aGlzKSxcbiAgICAgICAgICB0aGlzLnBvc2l0aW9uRXJyb3JfLmJpbmQodGhpcyksXG4gICAgICAgICAgdGhpcy5nZXRUcmFja2luZ09wdGlvbnMoKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmICghdHJhY2tpbmcgJiYgdGhpcy53YXRjaElkXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMud2F0Y2hJZF8pO1xuICAgICAgICB0aGlzLndhdGNoSWRfID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0dlb2xvY2F0aW9uUG9zaXRpb259IHBvc2l0aW9uIHBvc2l0aW9uIGV2ZW50LlxuICAgKi9cbiAgcG9zaXRpb25DaGFuZ2VfKHBvc2l0aW9uKSB7XG4gICAgY29uc3QgY29vcmRzID0gcG9zaXRpb24uY29vcmRzO1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LkFDQ1VSQUNZLCBjb29yZHMuYWNjdXJhY3kpO1xuICAgIHRoaXMuc2V0KFxuICAgICAgUHJvcGVydHkuQUxUSVRVREUsXG4gICAgICBjb29yZHMuYWx0aXR1ZGUgPT09IG51bGwgPyB1bmRlZmluZWQgOiBjb29yZHMuYWx0aXR1ZGVcbiAgICApO1xuICAgIHRoaXMuc2V0KFxuICAgICAgUHJvcGVydHkuQUxUSVRVREVfQUNDVVJBQ1ksXG4gICAgICBjb29yZHMuYWx0aXR1ZGVBY2N1cmFjeSA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvb3Jkcy5hbHRpdHVkZUFjY3VyYWN5XG4gICAgKTtcbiAgICB0aGlzLnNldChcbiAgICAgIFByb3BlcnR5LkhFQURJTkcsXG4gICAgICBjb29yZHMuaGVhZGluZyA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRvUmFkaWFucyhjb29yZHMuaGVhZGluZylcbiAgICApO1xuICAgIGlmICghdGhpcy5wb3NpdGlvbl8pIHtcbiAgICAgIHRoaXMucG9zaXRpb25fID0gW2Nvb3Jkcy5sb25naXR1ZGUsIGNvb3Jkcy5sYXRpdHVkZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucG9zaXRpb25fWzBdID0gY29vcmRzLmxvbmdpdHVkZTtcbiAgICAgIHRoaXMucG9zaXRpb25fWzFdID0gY29vcmRzLmxhdGl0dWRlO1xuICAgIH1cbiAgICBjb25zdCBwcm9qZWN0ZWRQb3NpdGlvbiA9IHRoaXMudHJhbnNmb3JtXyh0aGlzLnBvc2l0aW9uXyk7XG4gICAgdGhpcy5zZXQoUHJvcGVydHkuUE9TSVRJT04sIHByb2plY3RlZFBvc2l0aW9uLnNsaWNlKCkpO1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LlNQRUVELCBjb29yZHMuc3BlZWQgPT09IG51bGwgPyB1bmRlZmluZWQgOiBjb29yZHMuc3BlZWQpO1xuICAgIGNvbnN0IGdlb21ldHJ5ID0gY2lyY3VsYXJQb2x5Z29uKHRoaXMucG9zaXRpb25fLCBjb29yZHMuYWNjdXJhY3kpO1xuICAgIGdlb21ldHJ5LmFwcGx5VHJhbnNmb3JtKHRoaXMudHJhbnNmb3JtXyk7XG4gICAgdGhpcy5zZXQoUHJvcGVydHkuQUNDVVJBQ1lfR0VPTUVUUlksIGdlb21ldHJ5KTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0dlb2xvY2F0aW9uUG9zaXRpb25FcnJvcn0gZXJyb3IgZXJyb3Igb2JqZWN0LlxuICAgKi9cbiAgcG9zaXRpb25FcnJvcl8oZXJyb3IpIHtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFjY3VyYWN5IG9mIHRoZSBwb3NpdGlvbiBpbiBtZXRlcnMuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24gbWVhc3VyZW1lbnQgaW5cbiAgICogICAgIG1ldGVycy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0QWNjdXJhY3koKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgZ2VvbWV0cnkgb2YgdGhlIHBvc2l0aW9uIGFjY3VyYWN5LlxuICAgKiBAcmV0dXJuIHs/aW1wb3J0KFwiLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gQSBnZW9tZXRyeSBvZiB0aGUgcG9zaXRpb24gYWNjdXJhY3kuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEFjY3VyYWN5R2VvbWV0cnkoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7P2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9ICovIChcbiAgICAgIHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZX0dFT01FVFJZKSB8fCBudWxsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGFsdGl0dWRlIGFzc29jaWF0ZWQgd2l0aCB0aGUgcG9zaXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBhbHRpdHVkZSBvZiB0aGUgcG9zaXRpb24gaW4gbWV0ZXJzIGFib3ZlIG1lYW5cbiAgICogICAgIHNlYSBsZXZlbC5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0QWx0aXR1ZGUoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFMVElUVURFKSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBhbHRpdHVkZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24uXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBhY2N1cmFjeSBvZiB0aGUgYWx0aXR1ZGUgbWVhc3VyZW1lbnQgaW5cbiAgICogICAgIG1ldGVycy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0QWx0aXR1ZGVBY2N1cmFjeSgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAoXG4gICAgICB0aGlzLmdldChQcm9wZXJ0eS5BTFRJVFVERV9BQ0NVUkFDWSlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgaGVhZGluZyBhcyByYWRpYW5zIGNsb2Nrd2lzZSBmcm9tIE5vcnRoLlxuICAgKiBOb3RlOiBkZXBlbmRpbmcgb24gdGhlIGJyb3dzZXIsIHRoZSBoZWFkaW5nIGlzIG9ubHkgZGVmaW5lZCBpZiB0aGUgYGVuYWJsZUhpZ2hBY2N1cmFjeWBcbiAgICogaXMgc2V0IHRvIGB0cnVlYCBpbiB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGhlYWRpbmcgb2YgdGhlIGRldmljZSBpbiByYWRpYW5zIGZyb20gbm9ydGguXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEhlYWRpbmcoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkhFQURJTkcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHBvc2l0aW9uIG9mIHRoZSBkZXZpY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVGhlIGN1cnJlbnQgcG9zaXRpb24gb2YgdGhlIGRldmljZSByZXBvcnRlZFxuICAgKiAgICAgaW4gdGhlIGN1cnJlbnQgcHJvamVjdGlvbi5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UG9zaXRpb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSAqLyAoXG4gICAgICB0aGlzLmdldChQcm9wZXJ0eS5QT1NJVElPTilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcHJvamVjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIHBvc2l0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHByb2plY3Rpb24gdGhlIHBvc2l0aW9uIGlzXG4gICAqICAgICByZXBvcnRlZCBpbi5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UHJvamVjdGlvbigpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gKi8gKFxuICAgICAgdGhpcy5nZXQoUHJvcGVydHkuUFJPSkVDVElPTilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgc3BlZWQgaW4gbWV0ZXJzIHBlciBzZWNvbmQuXG4gICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBpbnN0YW50YW5lb3VzIHNwZWVkIG9mIHRoZSBkZXZpY2UgaW4gbWV0ZXJzXG4gICAqICAgICBwZXIgc2Vjb25kLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRTcGVlZCgpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUHJvcGVydHkuU1BFRUQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgaWYgdGhlIGRldmljZSBsb2NhdGlvbiBpcyBiZWluZyB0cmFja2VkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZGV2aWNlIGxvY2F0aW9uIGlzIGJlaW5nIHRyYWNrZWQuXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRyYWNraW5nKCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChQcm9wZXJ0eS5UUkFDS0lORykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICogU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9nZW9sb2NhdGlvbi1BUEkvI3Bvc2l0aW9uLW9wdGlvbnMuXG4gICAqIEByZXR1cm4ge1Bvc2l0aW9uT3B0aW9uc3x1bmRlZmluZWR9IFBvc2l0aW9uT3B0aW9ucyBhcyBkZWZpbmVkIGJ5XG4gICAqICAgICB0aGUgW0hUTUw1IEdlb2xvY2F0aW9uIHNwZWNcbiAgICogICAgIF0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UpLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUcmFja2luZ09wdGlvbnMoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7UG9zaXRpb25PcHRpb25zfHVuZGVmaW5lZH0gKi8gKFxuICAgICAgdGhpcy5nZXQoUHJvcGVydHkuVFJBQ0tJTkdfT1BUSU9OUylcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgcHJvamVjdGlvbiB0byB1c2UgZm9yIHRyYW5zZm9ybWluZyB0aGUgY29vcmRpbmF0ZXMuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRoZSBwb3NpdGlvbiBpc1xuICAgKiAgICAgcmVwb3J0ZWQgaW4uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIHRoaXMuc2V0KFByb3BlcnR5LlBST0pFQ1RJT04sIGdldFByb2plY3Rpb24ocHJvamVjdGlvbikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVuYWJsZSBvciBkaXNhYmxlIHRyYWNraW5nLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHRyYWNraW5nIEVuYWJsZSB0cmFja2luZy5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VHJhY2tpbmcodHJhY2tpbmcpIHtcbiAgICB0aGlzLnNldChQcm9wZXJ0eS5UUkFDS0lORywgdHJhY2tpbmcpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICogU2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb24tb3B0aW9ucy5cbiAgICogQHBhcmFtIHtQb3NpdGlvbk9wdGlvbnN9IG9wdGlvbnMgUG9zaXRpb25PcHRpb25zIGFzIGRlZmluZWQgYnkgdGhlXG4gICAqICAgICBbSFRNTDUgR2VvbG9jYXRpb24gc3BlY1xuICAgKiAgICAgXShodHRwOi8vd3d3LnczLm9yZy9UUi9nZW9sb2NhdGlvbi1BUEkvI3Bvc2l0aW9uX29wdGlvbnNfaW50ZXJmYWNlKS5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VHJhY2tpbmdPcHRpb25zKG9wdGlvbnMpIHtcbiAgICB0aGlzLnNldChQcm9wZXJ0eS5UUkFDS0lOR19PUFRJT05TLCBvcHRpb25zKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBHZW9sb2NhdGlvbjtcbiIsImltcG9ydCBHZW9sb2NhdGlvbiwge09wdGlvbnMgYXMgT2xHZW9Mb2NhdGlvbk9wdGlvbnN9IGZyb20gJ29sL0dlb2xvY2F0aW9uJztcbmltcG9ydCB7QnV0dG9uLCBCdXR0b25PblNpZ25hdHVyZSwgQnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vYmFzZVwiO1xuaW1wb3J0IEJhc2VFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XG5pbXBvcnQgRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tIFwib2wvZXZlbnRzL0V2ZW50VHlwZVwiO1xuaW1wb3J0IHtmcm9tTG9uTGF0fSBmcm9tIFwib2wvcHJvalwiO1xuaW1wb3J0IHtDb29yZGluYXRlfSBmcm9tIFwib2wvY29vcmRpbmF0ZVwiO1xuaW1wb3J0IHtFdmVudHNLZXl9IGZyb20gXCJvbC9ldmVudHNcIjtcblxuLyoqXG4gKiBUaGUgZXh0ZW5kZWQgc2lnbmF0dXJlIGZvciB0aGUgb24gbWV0aG9kIG9mIHRoZSB7QGxpbmsgR2VvTG9jYXRlfSBidXR0b25cbiAqL1xuZXhwb3J0IHR5cGUgR2VvbG9jYXRlT25TaWduYXR1cmU8UmV0dXJuPiA9ICgodHlwZTogXCJsb2NhdGlvbl9yZXRyaWV2ZWRcIiB8IFwibG9jYXRpb25fcmV0cmlldmVkXCJbXSwgbGlzdGVuZXI6IChldmVudDogTG9jYXRpb25SZXRyaWV2ZWRFdmVudCkgPT4gdW5rbm93bikgPT4gUmV0dXJuKSAmIEJ1dHRvbk9uU2lnbmF0dXJlPFJldHVybj47XG5cbi8qKlxuICogVGhlIGxvY2F0aW9uIHJldHJpZXZlZCBldmVudCB3aGljaCBpcyBkaXNwYXRjaGVkIHdoZW4gd2UgcmV0cmlldmUgYSBwb3NpdGlvbiB2aWEgdGhlIHtAbGluayBHZW9Mb2NhdGV9IGJ1dHRvblxuICpcbiAqIEBUT0RPIGV4dGVuZCB0byByZXRyaWV2ZSBtb3JlIGluZm9ybWF0aW9uIGZyb20gdGhlIE9wZW5sYXllcnMgR2VvbG9jYXRlIG9iamVjdFxuICovXG5leHBvcnQgY2xhc3MgTG9jYXRpb25SZXRyaWV2ZWRFdmVudCBleHRlbmRzIEV2ZW50IHtcblxuICAvKiogeW91ciBjdXJyZW50IHBvc2l0aW9uICoqL1xuICBwb3NpdGlvbjogQ29vcmRpbmF0ZTtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGVcbiAgICogQHBhcmFtIHBvc2l0aW9uIFlvdXIgY3VycmVudCBwb3NpdGlvblxuICAgKi9cbiAgY29uc3RydWN0b3IodHlwZTogc3RyaW5nLCBwb3NpdGlvbjogQ29vcmRpbmF0ZSkge1xuICAgIHN1cGVyKHR5cGUpO1xuXG4gICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICB9XG59XG5cblxuLyoqXG4gKiBBIHtAbGluayBCdXR0b259IHRvIHJldHJpZXZlIHlvdXIgY3VycmVudCBwb3NpdGlvblxuICpcbiAqIFRoaXMgY2xhc3MgdXNlcyB0aGUgT3BlbkxheWVycyBHZW9sb2NhdGlvbiBvYmplY3QgdG8gZmV0Y2ggdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gKiBXaGVuIHdlIHJldHJpZXZlIHRoZSBjdXJyZW50IHBvc2l0aW9uLCBhIExvY2F0aW9uUmV0cmlldmVkRXZlbnQgaXMgZmlyZWRcbiAqXG4gKi9cbmV4cG9ydCBjbGFzcyBHZW9Mb2NhdGUgZXh0ZW5kcyBCdXR0b24ge1xuXG4gIC8qKiBUaGUgT3BlbkxheWVycyBHZW9sb2NhdGlvbiBvYmplY3QgKiovXG4gIHByb3RlY3RlZCBfZ2VvTG9jYXRpb246IEdlb2xvY2F0aW9uO1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHB1YmxpYyBvbiE6IEdlb2xvY2F0ZU9uU2lnbmF0dXJlPEV2ZW50c0tleT47XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogQnV0dG9uT3B0aW9ucyB8IE9sR2VvTG9jYXRpb25PcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XG4gICAgc3VwZXIoe3VuaWNvZGU6IDB4ZTkzNiwgY29udGFpbmVyQ2xhc3NOYW1lOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgb2wtZ2VvbG9jYXRlJywgdG9vbHRpcDogJ1N0YW5kb3J0IHplbnRyaWVyZW4nLCAuLi5vcHRzIH0pO1xuXG4gICAgY29uc3QgZ2VvTG9jYXRpb25PcHRpb25zID0gKG9wdGlvbnMgfHwge30pIGFzIE9sR2VvTG9jYXRpb25PcHRpb25zO1xuICAgIHRoaXMuX2dlb0xvY2F0aW9uID0gbmV3IEdlb2xvY2F0aW9uKGdlb0xvY2F0aW9uT3B0aW9ucyk7XG5cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHBhcmFtIGV2ZW50XG4gICAqL1xuICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEV2ZW50IHwgQmFzZUV2ZW50KTogYm9vbGVhbiB7XG4gICAgaWYoZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNMSUNLKSB7XG5cbiAgICAgIGlmKHRoaXMuZ2VvTG9jYXRpb24gJiYgdGhpcy5nZXRNYXAoKT8uZ2V0VmlldygpPy5nZXRQcm9qZWN0aW9uKCkpIHtcbiAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5vbmNlKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5zZXRUcmFja2luZyhmYWxzZSk7XG4gICAgICAgICAgdGhpcy5nZXRNYXAoKT8uZ2V0VmlldygpLmFuaW1hdGUoe1xuICAgICAgICAgICAgY2VudGVyOiBmcm9tTG9uTGF0KHRoaXMuZ2VvTG9jYXRpb24uZ2V0UG9zaXRpb24oKSBhcyBudW1iZXJbXSksXG4gICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5nZW9Mb2NhdGlvbi5nZXRQb3NpdGlvbigpO1xuICAgICAgICAgIGlmKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IExvY2F0aW9uUmV0cmlldmVkRXZlbnQoXCJsb2NhdGlvbl9yZXRyaWV2ZWRcIiwgcG9zaXRpb24pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmdlb0xvY2F0aW9uLnNldFRyYWNraW5nKHRydWUpO1xuICAgICAgfVxuXG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuXG4gIH1cblxuICAvKipcbiAgICogQSBnZXR0ZXIgZm9yIHRoZSBPcGVuTGF5ZXJzIEdlb2xvY2F0aW9uIG9iamVjdFxuICAgKi9cbiAgZ2V0IGdlb0xvY2F0aW9uKCk6IEdlb2xvY2F0aW9uIHtcbiAgICByZXR1cm4gdGhpcy5fZ2VvTG9jYXRpb247XG4gIH1cbn1cbiIsImltcG9ydCB7ZGVmYXVsdCBhcyBPbEF0dHJpYnV0aW9uLCBPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0F0dHJpYnV0aW9uJztcblxuLyoqXG4gKiBBIHNpbXBsZSB3cmFwcGVyIGNvbnRyb2wgb2YgdGhlIE9wZW5MYXllciBBdHRyaWJ1dGlvbiBjb250cm9sXG4gKlxuICogSXQgaXMgY29sbGFwc2VkLCBhbmQgd2UgYWRkIGEgYmdpcyBzdHlsZSBjbGFzcyAoKmJnaXMtY29weXJpZ2h0KikuXG4gKiBTb21lIHZpc2libGUgY2hhbmdlcyBhcmUgbWFkZSB2aWEgY3NzLlxuICovXG5leHBvcnQgY2xhc3MgQXR0cmlidXRpb24gZXh0ZW5kcyBPbEF0dHJpYnV0aW9uIHtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5sYXllciBBdHRyaWJ1dGlvbiBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogT3B0aW9ucykge1xuXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge1xuICAgICAgY29sbGFwc2VkOiBmYWxzZSxcbiAgICAgIGNvbGxhcHNpYmxlOiBmYWxzZVxuICAgIH07XG4gICAgc3VwZXIob3B0cyk7XG5cbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lICs9ICcgYmdpcy1jb3B5cmlnaHQnO1xuICB9XG5cbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL01vdXNlUG9zaXRpb25cbiAqL1xuXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQge1xuICBnZXQgYXMgZ2V0UHJvamVjdGlvbixcbiAgZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zLFxuICBnZXRVc2VyUHJvamVjdGlvbixcbiAgaWRlbnRpdHlUcmFuc2Zvcm0sXG59IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHtsaXN0ZW59IGZyb20gJy4uL2V2ZW50cy5qcyc7XG5pbXBvcnQge3dyYXBYfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcblxuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBQUk9KRUNUSU9OID0gJ3Byb2plY3Rpb24nO1xuXG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IENPT1JESU5BVEVfRk9STUFUID0gJ2Nvb3JkaW5hdGVGb3JtYXQnO1xuXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpjb29yZGluYXRlRm9ybWF0J3wnY2hhbmdlOnByb2plY3Rpb24nLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmNvb3JkaW5hdGVGb3JtYXQnfCdjaGFuZ2U6cHJvamVjdGlvbicsIFJldHVybj59IE1vdXNlUG9zaXRpb25PblNpZ25hdHVyZVxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLW1vdXNlLXBvc2l0aW9uJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZUZvcm1hdH0gW2Nvb3JkaW5hdGVGb3JtYXRdIENvb3JkaW5hdGUgZm9ybWF0LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbcmVuZGVyXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGVcbiAqIGNvbnRyb2wgc2hvdWxkIGJlIHJlLXJlbmRlcmVkLiBUaGlzIGlzIGNhbGxlZCBpbiBhIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgXG4gKiBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSB3YW50IHRoZVxuICogY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGxhY2Vob2xkZXJdIE1hcmt1cCB0byBzaG93IHdoZW4gdGhlIG1vdXNlIHBvc2l0aW9uIGlzIG5vdFxuICogYXZhaWxhYmxlIChlLmcuIHdoZW4gdGhlIHBvaW50ZXIgbGVhdmVzIHRoZSBtYXAgdmlld3BvcnQpLiAgQnkgZGVmYXVsdCwgYSBub24tYnJlYWtpbmcgc3BhY2UgaXMgcmVuZGVyZWRcbiAqIGluaXRpYWxseSBhbmQgdGhlIGxhc3QgcG9zaXRpb24gaXMgcmV0YWluZWQgd2hlbiB0aGUgbW91c2UgbGVhdmVzIHRoZSB2aWV3cG9ydC5cbiAqIFdoZW4gYSBzdHJpbmcgaXMgcHJvdmlkZWQgKGUuZy4gYCdubyBwb3NpdGlvbidgIG9yIGAnJ2AgZm9yIGFuIGVtcHR5IHN0cmluZykgaXQgaXMgdXNlZCBhcyBhXG4gKiBwbGFjZWhvbGRlci5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseSBvbiB0aGUgcHJvamVjdGlvbidzIGFudGltZXJpZGlhbiwgaWYgaXRcbiAqIGlzIGEgZ2xvYmFsIHByb2plY3Rpb24uXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIGNvbnRyb2wgdG8gc2hvdyB0aGUgMkQgY29vcmRpbmF0ZXMgb2YgdGhlIG1vdXNlIGN1cnNvci4gQnkgZGVmYXVsdCwgdGhlc2VcbiAqIGFyZSBpbiB0aGUgdmlldyBwcm9qZWN0aW9uLCBidXQgY2FuIGJlIGluIGFueSBzdXBwb3J0ZWQgcHJvamVjdGlvbi5cbiAqIEJ5IGRlZmF1bHQgdGhlIGNvbnRyb2wgaXMgc2hvd24gaW4gdGhlIHRvcCByaWdodCBjb3JuZXIgb2YgdGhlIG1hcCwgYnV0IHRoaXNcbiAqIGNhbiBiZSBjaGFuZ2VkIGJ5IHVzaW5nIHRoZSBjc3Mgc2VsZWN0b3IgYC5vbC1tb3VzZS1wb3NpdGlvbmAuXG4gKlxuICogT24gdG91Y2ggZGV2aWNlcywgd2hpY2ggdXN1YWxseSBkbyBub3QgaGF2ZSBhIG1vdXNlIGN1cnNvciwgdGhlIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgY3VycmVudGx5IHRvdWNoZWQgcG9zaXRpb24gYXJlIHNob3duLlxuICpcbiAqIEBhcGlcbiAqL1xuY2xhc3MgTW91c2VQb3NpdGlvbiBleHRlbmRzIENvbnRyb2wge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0aW9uc10gTW91c2UgcG9zaXRpb24gb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcblxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50LmNsYXNzTmFtZSA9XG4gICAgICBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtbW91c2UtcG9zaXRpb24nO1xuXG4gICAgc3VwZXIoe1xuICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgIH0pO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtNb3VzZVBvc2l0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbjtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAqL1xuICAgIHRoaXMub25jZTtcblxuICAgIC8qKipcbiAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAqL1xuICAgIHRoaXMudW47XG5cbiAgICB0aGlzLmFkZENoYW5nZUxpc3RlbmVyKFBST0pFQ1RJT04sIHRoaXMuaGFuZGxlUHJvamVjdGlvbkNoYW5nZWRfKTtcblxuICAgIGlmIChvcHRpb25zLmNvb3JkaW5hdGVGb3JtYXQpIHtcbiAgICAgIHRoaXMuc2V0Q29vcmRpbmF0ZUZvcm1hdChvcHRpb25zLmNvb3JkaW5hdGVGb3JtYXQpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5wcm9qZWN0aW9uKSB7XG4gICAgICB0aGlzLnNldFByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyT25Nb3VzZU91dF8gPSBvcHRpb25zLnBsYWNlaG9sZGVyICE9PSB1bmRlZmluZWQ7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5wbGFjZWhvbGRlcl8gPSB0aGlzLnJlbmRlck9uTW91c2VPdXRfID8gb3B0aW9ucy5wbGFjZWhvbGRlciA6ICcmIzE2MDsnO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRoaXMucmVuZGVyZWRIVE1MXyA9IGVsZW1lbnQuaW5uZXJIVE1MO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAqL1xuICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy50cmFuc2Zvcm1fID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy53cmFwWF8gPSBvcHRpb25zLndyYXBYID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaGFuZGxlUHJvamVjdGlvbkNoYW5nZWRfKCkge1xuICAgIHRoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlIGZvcm1hdCB0eXBlIHVzZWQgdG8gcmVuZGVyIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9yXG4gICAqIHVuZGVmaW5lZC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fHVuZGVmaW5lZH0gVGhlIGZvcm1hdCB0byByZW5kZXIgdGhlIGN1cnJlbnRcbiAgICogICAgIHBvc2l0aW9uIGluLlxuICAgKiBAb2JzZXJ2YWJsZVxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRDb29yZGluYXRlRm9ybWF0KCkge1xuICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZUZvcm1hdHx1bmRlZmluZWR9ICovIChcbiAgICAgIHRoaXMuZ2V0KENPT1JESU5BVEVfRk9STUFUKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBwcm9qZWN0aW9uIHRoYXQgaXMgdXNlZCB0byByZXBvcnQgdGhlIG1vdXNlIHBvc2l0aW9uLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSBwcm9qZWN0aW9uIHRvIHJlcG9ydCBtb3VzZVxuICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFByb2plY3Rpb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSAqLyAoXG4gICAgICB0aGlzLmdldChQUk9KRUNUSU9OKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBCcm93c2VyIGV2ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBoYW5kbGVNb3VzZU1vdmUoZXZlbnQpIHtcbiAgICBjb25zdCBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgIHRoaXMudXBkYXRlSFRNTF8obWFwLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCBCcm93c2VyIGV2ZW50LlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBoYW5kbGVNb3VzZU91dChldmVudCkge1xuICAgIHRoaXMudXBkYXRlSFRNTF8obnVsbCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBjb250cm9sIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAqIFBhc3MgYG51bGxgIHRvIGp1c3QgcmVtb3ZlIHRoZSBjb250cm9sIGZyb20gdGhlIGN1cnJlbnQgbWFwLlxuICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICogdGhlIG1hcCBoZXJlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcC5qc1wiKS5kZWZhdWx0fG51bGx9IG1hcCBNYXAuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldE1hcChtYXApIHtcbiAgICBzdXBlci5zZXRNYXAobWFwKTtcbiAgICBpZiAobWFwKSB7XG4gICAgICBjb25zdCB2aWV3cG9ydCA9IG1hcC5nZXRWaWV3cG9ydCgpO1xuICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChcbiAgICAgICAgbGlzdGVuKHZpZXdwb3J0LCBFdmVudFR5cGUuUE9JTlRFUk1PVkUsIHRoaXMuaGFuZGxlTW91c2VNb3ZlLCB0aGlzKVxuICAgICAgKTtcbiAgICAgIGlmICh0aGlzLnJlbmRlck9uTW91c2VPdXRfKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzLnB1c2goXG4gICAgICAgICAgbGlzdGVuKHZpZXdwb3J0LCBFdmVudFR5cGUuUE9JTlRFUk9VVCwgdGhpcy5oYW5kbGVNb3VzZU91dCwgdGhpcylcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlSFRNTF8obnVsbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgY29vcmRpbmF0ZSBmb3JtYXQgdHlwZSB1c2VkIHRvIHJlbmRlciB0aGUgY3VycmVudCBwb3NpdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR9IGZvcm1hdCBUaGUgZm9ybWF0IHRvIHJlbmRlciB0aGUgY3VycmVudFxuICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAqIEBvYnNlcnZhYmxlXG4gICAqIEBhcGlcbiAgICovXG4gIHNldENvb3JkaW5hdGVGb3JtYXQoZm9ybWF0KSB7XG4gICAgdGhpcy5zZXQoQ09PUkRJTkFURV9GT1JNQVQsIGZvcm1hdCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBwcm9qZWN0aW9uIHRoYXQgaXMgdXNlZCB0byByZXBvcnQgdGhlIG1vdXNlIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdG8gcmVwb3J0IG1vdXNlXG4gICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICogQG9ic2VydmFibGVcbiAgICogQGFwaVxuICAgKi9cbiAgc2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgdGhpcy5zZXQoUFJPSkVDVElPTiwgZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdXBkYXRlSFRNTF8ocGl4ZWwpIHtcbiAgICBsZXQgaHRtbCA9IHRoaXMucGxhY2Vob2xkZXJfO1xuICAgIGlmIChwaXhlbCAmJiB0aGlzLm1hcFByb2plY3Rpb25fKSB7XG4gICAgICBpZiAoIXRoaXMudHJhbnNmb3JtXykge1xuICAgICAgICBjb25zdCBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmIChwcm9qZWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKFxuICAgICAgICAgICAgdGhpcy5tYXBQcm9qZWN0aW9uXyxcbiAgICAgICAgICAgIHByb2plY3Rpb25cbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGlkZW50aXR5VHJhbnNmb3JtO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgY29uc3QgdXNlclByb2plY3Rpb24gPSBnZXRVc2VyUHJvamVjdGlvbigpO1xuICAgICAgICBpZiAodXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMoXG4gICAgICAgICAgICB0aGlzLm1hcFByb2plY3Rpb25fLFxuICAgICAgICAgICAgdXNlclByb2plY3Rpb25cbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJhbnNmb3JtXyhjb29yZGluYXRlLCBjb29yZGluYXRlKTtcbiAgICAgICAgaWYgKHRoaXMud3JhcFhfKSB7XG4gICAgICAgICAgY29uc3QgcHJvamVjdGlvbiA9XG4gICAgICAgICAgICB1c2VyUHJvamVjdGlvbiB8fCB0aGlzLmdldFByb2plY3Rpb24oKSB8fCB0aGlzLm1hcFByb2plY3Rpb25fO1xuICAgICAgICAgIHdyYXBYKGNvb3JkaW5hdGUsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNvb3JkaW5hdGVGb3JtYXQgPSB0aGlzLmdldENvb3JkaW5hdGVGb3JtYXQoKTtcbiAgICAgICAgaWYgKGNvb3JkaW5hdGVGb3JtYXQpIHtcbiAgICAgICAgICBodG1sID0gY29vcmRpbmF0ZUZvcm1hdChjb29yZGluYXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBodG1sID0gY29vcmRpbmF0ZS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGhpcy5yZW5kZXJlZEhUTUxfIHx8IGh0bWwgIT09IHRoaXMucmVuZGVyZWRIVE1MXykge1xuICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgICB0aGlzLnJlbmRlcmVkSFRNTF8gPSBodG1sO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHByb2plY3Rpb24uIFJlbmRlcmluZyBvZiB0aGUgY29vcmRpbmF0ZXMgaXMgZG9uZSBpblxuICAgKiBgaGFuZGxlTW91c2VNb3ZlYCBhbmQgYGhhbmRsZU1vdXNlVXBgLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICByZW5kZXIobWFwRXZlbnQpIHtcbiAgICBjb25zdCBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5tYXBQcm9qZWN0aW9uXyAhPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSB7XG4gICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBNb3VzZVBvc2l0aW9uO1xuIiwiaW1wb3J0IHtkZWZhdWx0IGFzIE9sTW91c2VQb3NpdGlvbiwgT3B0aW9ucyBhcyBPbE1vdXNlUG9zaXRpb25PcHRpb25zfSBmcm9tICdvbC9jb250cm9sL01vdXNlUG9zaXRpb24nO1xyXG5pbXBvcnQge0Nvb3JkaW5hdGUsIGZvcm1hdH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XHJcblxyXG4vKipcclxuICogRGlzcGxheXMgdGhlIG1vdXNlIHBvc2l0aW9uIGluIHRoZSBtYXAuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTW91c2VQb3NpdGlvbiBleHRlbmRzIE9sTW91c2VQb3NpdGlvbiB7XHJcblxyXG4vKipcclxuICAgKiBDcmVhdGVzIGEgbmV3IG1vdXNlIHBvc2l0aW9uIGNvbnRyb2wgd2l0aCB0aGUgZGZhdWx0IHZhbHVlcy4uXHJcbiAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAqIC8vIEV4YW1wbGU6IGNyZWF0ZSBhIG5ldyBNb3VzZVBvc2l0aW9uIGNvbnRyb2wgd2l0aCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxyXG4gICAqIGNvbnN0IG1vdXNlUG9zaXRpb25Db250cm9sID0gbmV3IE1vdXNlUG9zaXRpb24oKTtcclxuICAgKiBgYGBcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBBbGwgb3B0aW9ucyBvZiB0aGUgb3JpZ2luYWwgT3BlbkxheWVycyBNb3VzZVBvc2l0aW9uIGNvbnRyb2wgYXJlIGFsb3dlZC5cclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogT2xNb3VzZVBvc2l0aW9uT3B0aW9ucykge1xyXG5cclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xyXG5cclxuICAgIG9wdHMucHJvamVjdGlvbiA9IG9wdHMucHJvamVjdGlvbiA/IG9wdHMucHJvamVjdGlvbiA6ICdFUFNHOjQzMjYnO1xyXG4gICAgb3B0cy5jb29yZGluYXRlRm9ybWF0ID0gb3B0cy5jb29yZGluYXRlRm9ybWF0ID8gb3B0cy5jb29yZGluYXRlRm9ybWF0IDogKGNvb3JkaW5hdGU6IENvb3JkaW5hdGUgfCB1bmRlZmluZWQpID0+IGNvb3JkaW5hdGUgPyBmb3JtYXQoY29vcmRpbmF0ZSwgJ3t5fcKwTi97eH3CsEUnLCA1KSA6ICcnO1xyXG4gICAgb3B0cy5wbGFjZWhvbGRlciA9IG9wdHMucGxhY2Vob2xkZXIgPyBvcHRzLnBsYWNlaG9sZGVyIDogJyZuYnNwOy0mbmJzcDvCsE4vJm5ic3A7LSZuYnNwO8KwRSc7XHJcbiAgICBvcHRzLmNsYXNzTmFtZSA9IG9wdHMuY2xhc3NOYW1lID8gb3B0cy5jbGFzc05hbWUgOiAnb2wtY29udHJvbCBvbC1tb3VzZS1wb3NpdGlvbiBiZ2lzLW1vdXNlcG9zaXRpb24nO1xyXG5cclxuICAgIHN1cGVyKG9wdHMpO1xyXG4gIH1cclxuXHJcblxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IHtkZWZhdWx0IGFzIE9sWm9vbSwgT3B0aW9uc30gZnJvbSAnb2wvY29udHJvbC9ab29tJztcclxuXHJcbi8qKlxyXG4gKiBab29tIGJ1dHRvbnMgY29udHJvbFxyXG4gKiBUaGUgT3BlbkxheWVycyBab29tIGNvbnRyb2wgaXMgdGhlIGJhc2UgY2xhc3NcclxuICovXHJcbmV4cG9ydCBjbGFzcyBab29tIGV4dGVuZHMgT2xab29tIHtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29uc3RydWN0b3JcclxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgT3BlbkxheWVycyBab29tIGNvbnRyb2wgb3B0aW9uc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBPcHRpb25zKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcblxyXG4gICAgc3VwZXIoey4uLm9wdHMsXHJcbiAgICAgIHpvb21JbkxhYmVsOiAgU3RyaW5nLmZyb21Db2RlUG9pbnQoMHhlOTM0KSxcclxuICAgICAgem9vbU91dExhYmVsOiBTdHJpbmcuZnJvbUNvZGVQb2ludCgweGU5MzUpIH0pO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgem9vbS1jb250YWluZXInO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge01hcEV2ZW50fSBmcm9tIFwib2xcIjtcbmltcG9ydCB7U3RhdGV9IGZyb20gXCJvbC9WaWV3XCI7XG5pbXBvcnQge0NvbnRyb2x9IGZyb20gXCJvbC9jb250cm9sXCI7XG5pbXBvcnQge2dldFBvaW50UmVzb2x1dGlvbn0gZnJvbSBcIm9sL3Byb2pcIjtcbmltcG9ydCB7VW5pdHN9IGZyb20gXCJvbC9jb250cm9sL1NjYWxlTGluZVwiO1xuaW1wb3J0IGNzc1ZhcmlhYmxlcyBmcm9tIFwiLi4vX2luZGV4LnNjc3NcIjtcblxuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBVTklUU19QUk9QID0gJ3VuaXRzJztcblxuLyoqXG4gKiAyNS40bW0gPSAxIGluY2hcbiAqIDAuMjhtbSA9IHBpeGVsIHNpemUgYWNjb3JkaW5nIHRvIHRoZSBPR0MgV01UUyBzcGVjaWZpY2F0aW9uXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgRElTUExBWV9EUEkgPSAyNS40IC8gMC4yODsgLy8gfjkwLjcxNFxuXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmNvbnN0IExFQURJTkdfRElHSVRTID0gWzEsIDIsIDVdO1xuXG4vKipcbiAqIFNjYWxlTGluZSBvcHRpb25zXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgU2NhbGVMaW5lT3B0aW9ucyB7XG5cbiAgLyoqIEEgY3NzIGNsYXNzIG5hbWUgKiovXG4gIGNsYXNzTmFtZT86IHN0cmluZztcblxuICAvKiogU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydCAqKi9cbiAgdGFyZ2V0PzogSFRNTEVsZW1lbnQgfCBzdHJpbmc7XG5cbiAgLyoqIGRwaSBvZiB0aGUgb3V0cHV0IGRldmljZSAqKi9cbiAgZHBpPzogbnVtYmVyO1xuXG4gIC8qKiBNaW5pbXVtIHdpZHRoIGluIHBpeGVscyBhdCB0aGUgT0dDIGRlZmF1bHQgZHBpLiBUaGUgd2lkdGggd2lsbCBiZSBhZGp1c3RlZCB0byBtYXRjaCB0aGUgZHBpIHVzZWQuICoqL1xuICBtaW5XaWR0aD86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBEaXNwbGF5cyBhIHNjYWxlIGxpbmUgaW4gdGhlIG1hcC5cbiAqXG4gKiBUaGlzIGNvbnRyb2wgaXMgYW4gY3VzdG9taXplZCB2ZXJzaW9uIG9mIHRoZSBPcGVuTGF5ZXJzIFNjYWxlbGluZSBjb250cm9sLlxuICogSGVyZSB0aGUgc2NhbGVsaW5lIGlzIGEgc3ZnIGltYWdlLCBiZWNhdXNlIG5vdyB0aGUgY2xpZW50IGNhbiBleHBvcnQgaXRcbiAqIHdpdGhvdXQgM3JkIHBhcnR5IGRlcGVuZGVuY3kgKHNlZSBvdXIgZXhwb3J0IGV4YW1wbGUpXG4gKi9cbmV4cG9ydCBjbGFzcyBTY2FsZUxpbmUgZXh0ZW5kcyBDb250cm9sIHtcblxuICBwcm90ZWN0ZWQgdmlld1N0YXRlOiBTdGF0ZSB8IG51bGw7XG5cbiAgcHJpdmF0ZSBfbWluV2lkdGg6IG51bWJlcjtcblxuICBwcm90ZWN0ZWQgcmVuZGVyZWRWaXNpYmxlOiBib29sZWFuO1xuXG4gIHByb3RlY3RlZCByZW5kZXJlZFdpZHRoOiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgcHJvdGVjdGVkIHJlbmRlcmVkU1ZHOiBTVkdFbGVtZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByb3RlY3RlZCBkcGk6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBzY2FsZWxpbmUgY29udHJvbC5cbiAgICogYGBgdHlwZXNjcmlwdFxuICAgKiAvLyBFeGFtcGxlOiBjcmVhdGUgYSBuZXcgU2NhbGVMaW5lIGNvbnRyb2wgd2l0aCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxuICAgKiBjb25zdCBzY2FsZUxpbmVDb250cm9sID0gbmV3IFNjYWxlTGluZSgpO1xuICAgKiBgYGBcbiAgICogQHBhcmFtIG9wdF9vcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRfb3B0aW9ucz86IFNjYWxlTGluZU9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuXG4gICAgY29uc3QgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdiZ2lzLXNjYWxlbGluZSc7XG5cbiAgICBzdXBlcih7XG4gICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgfSk7XG5cbiAgICB0aGlzLnZpZXdTdGF0ZSA9IG51bGw7XG5cbiAgICB0aGlzLl9taW5XaWR0aCA9IG9wdGlvbnMubWluV2lkdGggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluV2lkdGggOiA2NDtcbiAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZSA9IGZhbHNlO1xuICAgIHRoaXMucmVuZGVyZWRXaWR0aCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnJlbmRlcmVkU1ZHID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuZHBpID0gb3B0aW9ucy5kcGkgfHwgdW5kZWZpbmVkO1xuXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcblxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgc2NhbGUgbGluZSBlbGVtZW50XG4gICAqIEBwYXJhbSBtYXBFdmVudFxuICAgKi9cbiAgcHVibGljIHJlbmRlcihtYXBFdmVudDogTWFwRXZlbnQpOiB2b2lkIHtcbiAgICBjb25zdCBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcbiAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgIHRoaXMudmlld1N0YXRlID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVFbGVtZW50KCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGNvZGUgaXMgbWFpbmx5IGNvcGllZCBmcm9tIHRoZSBPcGVuTGF5ZXJzIFNjYWxlbGluZSBjb250cm9sXG4gICAqIGFuZCBjdXN0b21pemVkIGZvciBvdXIgc3ZnIGVsZW1lbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRWxlbWVudCgpOiB2b2lkIHtcblxuICAgIGNvbnN0IHZpZXdTdGF0ZSA9IHRoaXMudmlld1N0YXRlO1xuXG4gICAgaWYgKCF2aWV3U3RhdGUpIHtcbiAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xuICAgIGNvbnN0IHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICBjb25zdCB1bml0cyA9IHRoaXMuZ2V0VW5pdHMoKTtcbiAgICBjb25zdCBwb2ludFJlc29sdXRpb25Vbml0cyA9IHVuaXRzID09ICdkZWdyZWVzJyA/ICdkZWdyZWVzJyA6ICdtJztcbiAgICBsZXQgcG9pbnRSZXNvbHV0aW9uID0gZ2V0UG9pbnRSZXNvbHV0aW9uKFxuICAgICAgcHJvamVjdGlvbixcbiAgICAgIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLFxuICAgICAgY2VudGVyLFxuICAgICAgcG9pbnRSZXNvbHV0aW9uVW5pdHNcbiAgICApO1xuXG4gICAgY29uc3QgbWluV2lkdGggPSAodGhpcy5fbWluV2lkdGggKiAodGhpcy5kcGkgfHwgRElTUExBWV9EUEkpKSAvIERJU1BMQVlfRFBJO1xuXG4gICAgY29uc3Qgbm9taW5hbENvdW50ID0gbWluV2lkdGggKiBwb2ludFJlc29sdXRpb247XG4gICAgbGV0IHN1ZmZpeDtcbiAgICBpZiAobm9taW5hbENvdW50IDwgMC4wMDEpIHtcbiAgICAgIHN1ZmZpeCA9ICfOvG0nO1xuICAgICAgcG9pbnRSZXNvbHV0aW9uICo9IDEwMDAwMDA7XG4gICAgfSBlbHNlIGlmIChub21pbmFsQ291bnQgPCAxKSB7XG4gICAgICBzdWZmaXggPSAnbW0nO1xuICAgICAgcG9pbnRSZXNvbHV0aW9uICo9IDEwMDA7XG4gICAgfSBlbHNlIGlmIChub21pbmFsQ291bnQgPCAxMDAwKSB7XG4gICAgICBzdWZmaXggPSAnbSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1ZmZpeCA9ICdrbSc7XG4gICAgICBwb2ludFJlc29sdXRpb24gLz0gMTAwMDtcbiAgICB9XG5cbiAgICBsZXQgaSA9IDMgKiBNYXRoLmZsb29yKE1hdGgubG9nKG1pbldpZHRoICogcG9pbnRSZXNvbHV0aW9uKSAvIE1hdGgubG9nKDEwKSk7XG4gICAgbGV0IGNvdW50LCB3aWR0aCwgZGVjaW1hbENvdW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgIGRlY2ltYWxDb3VudCA9IE1hdGguZmxvb3IoaSAvIDMpO1xuICAgICAgY29uc3QgZGVjaW1hbCA9IE1hdGgucG93KDEwLCBkZWNpbWFsQ291bnQpO1xuICAgICAgY291bnQgPSBMRUFESU5HX0RJR0lUU1soKGkgJSAzKSArIDMpICUgM10gKiBkZWNpbWFsO1xuICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKGNvdW50IC8gcG9pbnRSZXNvbHV0aW9uKTtcbiAgICAgIGlmIChpc05hTih3aWR0aCkpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSBpZiAod2lkdGggPj0gbWluV2lkdGgpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICArK2k7XG4gICAgfVxuXG4gICAgbGV0IGdlbmVyYXRlZFNWRyA9IG51bGw7XG4gICAgaWYgKGNvdW50ICYmIGRlY2ltYWxDb3VudD49MCkge1xuICAgICAgZ2VuZXJhdGVkU1ZHID0gdGhpcy5nZXRHZW5lcmF0ZWRTVkcoY291bnQudG9GaXhlZChkZWNpbWFsQ291bnQgPCAwID8gLWRlY2ltYWxDb3VudCA6IDApICsgJyAnICsgc3VmZml4LCB3aWR0aCk7XG4gICAgfVxuXG4gICAgaWYgKGdlbmVyYXRlZFNWRyAmJiB0aGlzLnJlbmRlcmVkU1ZHICE9IGdlbmVyYXRlZFNWRykge1xuICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGdlbmVyYXRlZFNWRyk7XG4gICAgICB0aGlzLnJlbmRlcmVkU1ZHID0gZ2VuZXJhdGVkU1ZHO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlbmRlcmVkV2lkdGggIT0gd2lkdGgpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICAgIGlmKGdlbmVyYXRlZFNWRykge1xuICAgICAgICBnZW5lcmF0ZWRTVkcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyh3aWR0aCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXJlZFdpZHRoID0gd2lkdGg7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZSkge1xuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gdHJ1ZTtcbiAgICB9XG5cbiAgfVxuXG4gIGdldFVuaXRzKCkge1xuICAgIHJldHVybiB0aGlzLmdldChVTklUU19QUk9QKSBhcyBVbml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGdlbmVyYXRlZCBzdmcgZWxlbWVudFxuICAgKlxuICAgKiBAcGFyYW0gdHh0IHRoZSBjYWxjdWxhdGVkIHRleHQgY29udGVudCBvZiB0aGUgZWxlbWVudFxuICAgKiBAcGFyYW0gd2lkdGggdGhlIGNhbGN1bGF0ZWQgb3V0cHV0IHdpZHRoXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0R2VuZXJhdGVkU1ZHKHR4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogU1ZHRWxlbWVudCB7XG5cbiAgICBjb25zdCBzdmdIZWlnaHQgPSAxODtcblxuICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2JnaXMtc2NhbGVsaW5lLXN2ZycpO1xuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIHN2Z0hlaWdodCk7XG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBTdHJpbmcod2lkdGgpKTtcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMTAwJScpO1xuXG4gICAgY29uc3QgcmVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncmVjdCcpO1xuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdiZ2lzLXNjYWxlbGluZS1zdmctYmFja2dyb3VuZCcpO1xuICAgIHJlY3Quc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKDApKTtcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgneScsIFN0cmluZygwKSk7XG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzEwMCUnIC8qU3RyaW5nKHdpZHRoKSovKTtcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJzEwMCUnIC8qU3RyaW5nKHN2Z0hlaWdodCkqLyk7XG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnI2U1ZWNmMCcpO1xuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCAnLjUnKTtcbiAgICByZWN0LnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcxJyk7XG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCAnMCAnICsgd2lkdGggKyAnICcgKyAod2lkdGggKyAyICogc3ZnSGVpZ2h0KSk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHJlY3QpO1xuXG4gICAgY29uc3QgdGV4dDogU1ZHVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcbiAgICB0ZXh0LnRleHRDb250ZW50ID0gdHh0O1xuICAgIHRleHQuc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKHdpZHRoIC8gMikpO1xuICAgIHRleHQuc2V0QXR0cmlidXRlKCd5JywgU3RyaW5nKDEyKSk7XG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xuICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LXNpemUnLCAnMWVtJyk7XG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC1mYW1pbHk6ICcgKyBjc3NWYXJpYWJsZXMuZm9udEZhbWlseSk7XG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtZmFtaWx5JywgY3NzVmFyaWFibGVzLmZvbnRGYW1pbHkpO1xuICAgIHRleHQuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2JsYWNrJyk7XG4gICAgc3ZnLmFwcGVuZENoaWxkKHRleHQpO1xuXG4gICAgcmV0dXJuIHN2ZztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1pbiB3aWR0aFxuICAgKiBAcGFyYW0gdmFsdWVcbiAgICovXG4gIHB1YmxpYyBzZXRNaW5XaWR0aCh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5fbWluV2lkdGggPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbiB3aWR0aFxuICAgKi9cbiAgcHVibGljIGdldE1pbldpZHRoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21pbldpZHRoO1xuICB9XG5cbn1cbiIsImltcG9ydCB7TWFwLCBNYXBFdmVudH0gZnJvbSBcIm9sXCI7XG5pbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XG5pbXBvcnQge0Nvb3JkaW5hdGV9IGZyb20gXCJvbC9jb29yZGluYXRlXCI7XG5pbXBvcnQge2JvdW5kaW5nRXh0ZW50LCBFeHRlbnR9IGZyb20gXCJvbC9leHRlbnRcIjtcbmltcG9ydCB7T2JqZWN0T25TaWduYXR1cmV9IGZyb20gXCJvbC9PYmplY3RcIjtcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xuaW1wb3J0IHtFdmVudHNLZXl9IGZyb20gXCJvbC9ldmVudHNcIjtcblxuLyoqXG4gKiBUaGUgb3ZlcnZpZXcgb3B0aW9ucyBmb3IgdGhlIHtAbGluayBPdmVydmlld30gY29udHJvbFxuICovXG5leHBvcnQgaW50ZXJmYWNlIE92ZXJ2aWV3T3B0aW9ucyBleHRlbmRzIE9wdGlvbnMge1xuICBwcmV2ZW50RGVmYXVsdD86IGJvb2xlYW5cbn1cblxuLyoqXG4gKiBBbiBldmVudCBjbGFzcyB0byBoYW5kbGUgbW91c2UgZXZlbnRzIG9mIHRoZSB7QGxpbmsgT3ZlcnZpZXd9IGNvbnRyb2xcbiAqL1xuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3TWFwRXZlbnQgZXh0ZW5kcyBCYXNlRXZlbnQge1xuICBvcmlnaW5hbEV2ZW50OiBNb3VzZUV2ZW50O1xuICBjb25zdHJ1Y3Rvcih0eXBlOiBzdHJpbmcsIG9yaWdpbmFsRXZlbnQ6IE1vdXNlRXZlbnQpIHtcbiAgICBzdXBlcih0eXBlKTtcbiAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xuICB9XG59XG5cbi8qKlxuICogVGhlIGV4dGVuZGVkIHNpZ25hdHVyZSBmb3IgdGhlIG9uIG1ldGhvZCBvZiB0aGUge0BsaW5rIE92ZXJ2aWV3fSBjb250cm9sXG4gKi9cbmV4cG9ydCB0eXBlIE92ZXJ2aWV3T25TaWduYXR1cmU8UmV0dXJuPiA9ICgodHlwZTogXCJjbGlja1wiIHwgXCJjbGlja1wiW10sIGxpc3RlbmVyOiAoZXZlbnQ6IE92ZXJ2aWV3TWFwRXZlbnQpID0+IHVua25vd24pID0+IFJldHVybikgJiBPYmplY3RPblNpZ25hdHVyZTxSZXR1cm4+O1xuXG4vKipcbiAqIERpc3BsYXlzIGFuIG92ZXJ2aWV3IG1hcCBvZiBBdXN0cmlhIGFuZCBhIGNyb3NzaGFpciBtYXJrZXIgZm9yIHRoZSBjdXJyZW50XG4gKiBjZW50ZXIgaW4gdGhlIG1haW4gbWFwLiBZb3UgY2FuIGNsaWNrIG9uIHRoZSBvdmVydmlldyBtYXAgdG8gcmVjZW50ZXIgdGhlXG4gKiBtYWluIG1hcC5cbiAqXG4gKiBIaW50OiB0aGUgZGVmYXVsdCBzaXplIG9mIHRoZSBvdmVydmlldyBtYXAgZGVwZW5kcyBvbiB0aGUgd2lkdGggb2YgdGhlIHZpZXdwb3J0IChhcHByb3ByaWF0ZSBmb3IgZnVsbHNjcmVlbiBtYXBzKS5cbiAqIFRvIGxpbWl0IHRoZSBzaXplIGFkZCBhIG1heC13aWR0aCBhbmQgbWF4LWhlaWdodCAobWF4LXdpZHRoID0gMS43NSptYXgtaGVpZ2h0KSB0byB0aGUgLmJnaXMtb3ZlcnZpZXctaW1hZ2UgY3NzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgT3ZlcnZpZXcgZXh0ZW5kcyBDb250cm9sIHtcblxuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBCQUNLR1JPVU5EX0NPTE9SID0gJyNlNWVjZjAnO1xuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIFNWR19IRUlHSFQgPSAyMTY7XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgU1ZHX1dJRFRIID0gMzgwO1xuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIFNWR19DT0RFID0gXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgY2xhc3M9J2JnaXMtb3ZlcnZpZXdtYXAtc3ZnJyB4bWxuczp4bGluaz0naHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluaycgdmlld0JveD0nMCAwIFwiICsgT3ZlcnZpZXcuU1ZHX1dJRFRIICsgXCIgXCIgKyBPdmVydmlldy5TVkdfSEVJR0hUICsgXCInIHByZXNlcnZlQXNwZWN0UmF0aW89J3hNaWRZTWlkIG1lZXQnIGhlaWdodD0nMTAwJScgd2lkdGg9JzEwMCUnIGNvbG9yLWludGVycG9sYXRpb249J2F1dG8nIGZpbGw9J2JsYWNrJyBmaWxsLW9wYWNpdHk9JzEnICBzdHJva2U9J2JsYWNrJyBzdHJva2UtZGFzaGFycmF5PSdub25lJyBzdHJva2UtZGFzaG9mZnNldD0nMCcgc3Ryb2tlLWxpbmVjYXA9J3NxdWFyZScgc3Ryb2tlLWxpbmVqb2luPSdtaXRlcicgc3Ryb2tlLW1pdGVybGltaXQ9JzEwJyBzdHJva2Utb3BhY2l0eT0nMScgc3Ryb2tlLXdpZHRoPScxJyB4bWxuczp2PSdodHRwczovL3ZlY3RhLmlvL25hbm8nPjxzdHlsZT48IVtDREFUQVsuQntjbGlwLXBhdGg6dXJsKCNBKX0uQ3tmaWxsLXJ1bGU6ZXZlbm9kZH0uRHtzdHJva2U6bm9uZX0uRXtmaWxsOiM5OTl9LkZ7ZmlsbDpub25lfS5He3N0cm9rZS1taXRlcmxpbWl0OjF9Lkh7c3Ryb2tlLXdpZHRoOjIuNX1dXT48L3N0eWxlPjxkZWZzPjxjbGlwUGF0aCBpZD0nQSc+PHBhdGggZD0nTTAgMGgzODB2MjE2SDBWMHonLz48L2NsaXBQYXRoPjxwYXRoIGlkPSdCJyBkPSdNMzU2IDgybC0uNCA1LjIgNC40IDEuNi0zLjIgMi40djYuNGwtMy42LjggMi44IDMuNi44IDYuOC05LjYgMS4yLS40LTItMS42IDIuNGgtMy42bC0xLjYtMy42LTQuOC0xLjYtOCA2LjQgNi40IDMuMiAzLjItLjggMS4yIDQuOCAyIC44LTIuOCAyLjguNCAzLjItMy42IDMuMi0yLjgtLjQtLjggMS42LTIuNC0xLjYtLjQgNCAyLjQgNC44LTIuNCAxLjYtLjggNCAyIC44LS40IDIuNCAyLjgtLjQuOCAxLjYtMy4yIDEuNiAyLjggMi44LTQgMiAzLjYgMS42LTEwLS44LS40IDMuMi00IDEuNi0yLjQgNC40LTYuNCAyLjguOC0zLjYgNi40LTYuOC0zLjItNS4yIDEuNi00LjgtNC44LTE0LjggMTMuMi02Ljh2LTZsMi44LTQtLjgtMy42LTIuNC0xLjItMS4yLTcuNiAzLjIuOCAyLTIuOC0yLTEuNiAyLjgtLjggMi00IDMuMi0uNCAyLjQgNCA1LjYtNS42di0yLjhsNS42LTEuMiAyLjQtMy4yTDM1MiA4OGwxLjYtMy42LTItMiAyLjggMS42IDEuNi0yeicvPjxwYXRoIGlkPSdDJyBkPSdNMTYyLjQgMTQ2LjhsLjQgMiA4LjQgMS4yIDEuNiAyLjggNC40IDEuNiA4LTIgLjQtMi44IDQuOC0uOCAyIDIgMTAuOC44IDguNCA5LjYgNS42LTIgMi40LTQgOC40LTQuOCAxLjYgMy4yaDZsLjggMy4yIDQuOC0zLjIgNS42IDIgMTAtMy42IDggOC44LTIgOC44IDIuNC44LS40IDYuNCAyIDEuMi0zLjYgMy4yLTEuMi0yLTEuNiAyLTIuNC0uNC0yLjQgNi40LTQuOC44LS40IDIuNC00LjggMS42LS44IDQtMi40LTMuNi0yIDEuMi0yLTIuNC0xMi40LjgtMS4yLTIuOGgtNS4ybC00LTIuOC01LjYgMS4yLTE4LTQuOC02LjggMS42LTYuNC0zLjJIMTY4bC0yLjQtMi44LTQuOC0uNHYtMy4yaDEuNlYxNzJsOS4yLTEuMiAxLjYtMi40LTUuNi00di0zLjJsLTQuNC0zLjItLjgtMi40IDItMy4yaC0yLjhsLTIuNC0zLjYgMy4yLTJ6Jy8+PHBhdGggaWQ9J0QnIGQ9J00yNjQuOCAyMC44bDUuNiAxLjYuNCA0IDQuNC0uOCAxLjYtMi44IDguOCAzLjIuOCAyIDggNCA2LjgtMS42VjMybDUuMiAyIC40IDIuNCA1LjYgMy4yIDEyLjggMS4yIDMuNi01LjYgMy42LS40IDIuNCAyLjQgMi44LS40IDEuMiA0IDEwLjQgMS42IDEuNiAxMC44LTQuOCA2LS44IDQuOCA1LjYgNy42LjggNi40IDQuNCAzLjItMS42IDIuOC0yLjgtMS42IDIgMkwzNTIgODhsLTQuNC0zLjYtMi40IDMuMi01LjYgMS4ydjIuOGwtNS42IDUuNi0yLjQtNC0zLjIuNC0xLjYgMy42LTMuMiAxLjIgMiAxLjItMiAzLjItMy4yLS44IDEuMiA3LjYgMi40IDEuMi44IDMuNi0yLjggNCAxLjIgNC01LjIgNS4yaC0yLjhsLTItNi44LTIuNCAyLjgtMS4yLTItNC44LS44LTEuMi0yLjgtMiAuNC40LTQtNS4yLS40LTEuMi01LjYtMS42IDEuMi0zLjItMy42LTQuNC40di0xLjZIMjg0bC00LjQtNC0yLjQuNC0uNCAyLTMuMi0uNC0uOCAzLjItMTAuNC40LTIgMi40LTQtMi40LTMuMiAxLjItMi40LTR2LTQuNGwyLjgtMS42LS40LTEuNi0xLjYtMi40LTEuNi44LTguNC00LjQtMi0zLjJ2LTMuNmwxLjYtLjgtLjgtNi40IDItMi40IDYuOCA1LjIgNy4yLTJMMjU4IDc0aDMuMmwxLjIgMi40LjgtOC40aC0ybC44LTQuOC0yIC40IDEuNi0xLjYtNC00LjggMi44LTEuNi0xMC40LTUuMiAxLjYtNy4yIDMuNi0yLjguNC0zLjYgNy4yIDEuMlYyMy4ybDItMi40em02MiA0Ny4ybC03LjIgNS42LTIuNC0xLjYtLjggNiAxLjYgMy4yIDkuNi40IDItMi44IDQuNCAxLjYtMi0yLjQuOC02LTItMi0xLjYgMS4yLTIuNC0zLjJ6Jy8+PHBhdGggaWQ9J0UnIGQ9J00yMTIuNCAzOGw5LjYgNi40LTIuNCAyIDIuNCAzLjJoNmw2LjQgMi44IDItMi44aDIuNEwyNDAgNDZsNCAzLjIgMi40LTIgNS42IDUuMiA3LjIgMiAxLjIgMS4yLTIuOCAxLjYuNCAyIDMuNiAyLjgtMS42IDEuNiAyLS40LS44IDQuOGgydjQuNGwtLjggNC0xLjItMi40SDI1OGwtMS42IDIuOC02IDItNi44LTUuMi0zLjIgMi40LjggNi40LTEuNi44djMuNmw2LjQgNiA1LjYuOCAyIDMuMi0yLjggMi40IDEuNiA2LjgtMi40LS44LTIgMi40LTUuMi44LS44IDIuNC04LjQgNC44LTMuMi0uNC0yLTIuOC02LjggMi40di0zLjZsLTItMi0xMC40LTEuMi0zLjYgNS42IDIuOCA4LjQtMS42IDMuMmgtMi40bC04LjQtNCAyLTYuNC0xLjYtMiAyLjgtNC40LTUuMi0yIDEuMi0yLjggMy4yLjh2LTEuNmwtNi40LjQtNC40LTItLjQtOC44IDMuNiAxLjIuNC0yLjgtNC0yLTYgMi44di0ybC0zLjItLjQtMS4yLTIuNGgtNC40bC0zLjIgMy4yLTUuMi01LjItLjQtMy4yIDEyLTkuNiAxNC00IDQuOC03LjItLjQtOC44IDIgLjQgMS4yLTIuNCAxMCA1LjIgNC40LTcuMi40LTUuNi0yLS44IDIuNC0zLjZ6Jy8+PHBhdGggaWQ9J0YnIGQ9J00xNzYuNCA4Ni44bDEuNiAyLjQgMy4yLjR2Mmw2LTIuOCA0IDItLjQgMi44LTMuNi0xLjIuNCA4LjggMTEuMiAyLjRoLTMuNmwtMS4yIDMuMiA1LjIgMS42LTIuOCA0LjQgMS42IDItMiA2LjQgNS4yIDMuMi0xLjYgMy4yIDEuNiA4LjggNS4yIDIgNS4yLTIuNC44IDQuNCA2LjggNi40LTUuMiAxLjIgMS4yIDIuOC00LjQgOC01LjItMy42di0yLjRsLTEwLjQtMi44LTIuOC44LTEuNi0yLTUuMi44LS40IDIuOC03LjIgMi01LjItMS42LTEuNi0yLjgtOC40LTEuMnYtMmwtNCAyLTYtMy42SDE0OGwtNi40IDUuNi02LTEuMi0yLTEyLjggMS42LTEuNiA2LjguNCAxLjItMiA4LjQuNHYtMy42bDQuNC0uOCAyLjQtNC44IDIuOC0uOC0zLjItNC44IDItMi00LjQtMS42IDEuMi00LjRoOC40bC0xLjIgMS42IDIuOCAyLjQtMiAyIC44IDIgNy42IDUuMiAzLjYtMS4yLS40LTUuNiAyLjgtMy42LS44LTQtMi40LTJoLTUuNmw0LjQtOS4yLTYuNC04LjQgNC0zLjZoNHonLz48cGF0aCBpZD0nRycgZD0nTTI3OS4yIDEwMS4ybDcuMiAzLjZ2MS42bDQuNC0uNCAzLjIgMy42IDEuNi0xLjIgMS4yIDUuNiA1LjIuNC0uOCAzLjIgMi40LjQgMS4yIDIuOCA0LjguOCAxLjIgMiAxLjYtMi44IDEuMi44LS40IDIuOCAyLjggMy4yLTcuMiAzLjYgNC44IDE0LjgtMS42IDQuOCAzLjIgNC44LTcuNiAxMC44djZsMi40IDUuMi02LjgtNGgtMy42bC05LjYgMi0yIDEuMnYyLjhsLTMuMiAxLjItMi44LTMuMi0xNC44LjgtMi40LTEuNi40LTYuNC0yLjQtLjggMi04LjgtOC04LjgtMTAgMy42LTUuNi0yLTQuOCAzLjItLjgtMy4yaC02bC0xLjYtMy4yLTguNCA0LjgtMi40IDQtNC40IDItMy4yLTEuNiA1LjYtOC44LTEuMi0yLjggNS4yLTEuMi02LjgtNi40LS44LTQuNC01LjIgMi40LTQuOC0xLjYtMi04LjQgMS42LTQuNCA1LjYgMS4yIDEuNi0zLjItMi44LTguNCAzLjYtNS42IDEwLjQgMS4yIDIgMnYzLjZsNi44LTIuNCAyIDIuOCAzLjIuNCAxNi40LTEwLjQgMy4yIDIuNCAzLjItMS4yIDQgMi40IDItMi40IDEwLjQtLjQuOC0zLjIgMy4yLjQuNC0yaDJ6Jy8+PHBhdGggaWQ9J0gnIGQ9J00xNTEuNiAxNDUuMmw2LjQgMi40IDMuNiA0LjhoMi44bC0yIDMuMi44IDIuNCA0LjQgMy4ydjMuMmw1LjYgNC0xLjYgMi40LTkuMiAxLjItMS42IDUuNi01LjYuNC04LTQtMS4yLTQtMy4yLS40LS40LTYuOC0yLjguOC0zLjItMi44IDEuMi0xLjYtMi00LjggMy42LS44IDcuMi03LjYgNS4yLS44eicvPjxwYXRoIGlkPSdJJyBkPSdNNjEuMiAxMTguOGw1LjYgMS42IDItMi40IDYuOCAzLjYgNS4yLTEuNiAxLjIgMS42LTIuNCAyaDMuMmwyIDZoNmw0LTIuOCAyIC40LS44IDIuNCAyLjQtLjQgMi0zLjIgNCAuNC0xLjYtMi40IDIuNC0yLjggNiAuNCAyLjQtNS4yIDkuNi44IDYuOC0yLjggOS4yIDEuMi0yLTYuNCA0LjQtMi44djQuNGw4LTEuMiAyLjggNC44IDMuMi0uOHYybDQgMS4yLTEuNiAyLjQgMy4yIDQuOC0yLjguOC0yLjQgNC44LTQuNC44djMuNmwtOC40LS40LTEuMiAyLTYuOC0uNC0xLjYgMS42IDIuNCAxMy42LTggMi05LjIgNS4yLTUuMi0zLjItMy42IDItMy4yLTEuNi0yLjQgMi44LTIuNC0xLjYtOS4yIDEuNi40IDEuNi0zLjIgMS42LTMuMiAxMGgtNy4ybC02LTEuNiAxLjYtMi40LTQtMy4yTDY2IDE2NmwtNC0xLjIuOC01LjYtMi44LS44LTEuNi0zLjItMy42IDMuMi40IDItMy42LS40djRsLTQgMS4yLTEuNi0yLjgtLjQtMi40IDIuOC0zLjYtMi0yLjQgMS42LTEuMi0xLjItMi44IDQtNCAuNC03LjItMi40LTEuMiA2LjgtMiA0LjgtNS4yIDItMy4yLTItNCAuOC00LjR6Jy8+PHBhdGggaWQ9J0onIGQ9J00zMS4yIDExNi40bDIgLjQtLjQgMi44aDYuOGwxLjIgNCA0LjQgMS42LjQgMi40LTEuNi44IDEuNiAzLjYgNi0yLS44IDUuMi0yIDEuMiAyLjQgMi40LS40IDcuMi00IDQgMS4yIDIuOC0xLjYgMS4yIDIgMi40LTIuOCAzLjYgMiAzLjYtMS4yIDItMy4yLTEuMi0xLjItMi44LTYuNC0yVjE1NGwtMTItMi40IDEuMi00LjgtMy4yLTIuNC40LTQuOC0yLTIgNi40LTgtLjQtNC0yLjgtLjQtMS42LTIuOCA3LjYtMiAyLTR6Jy8+PHBhdGggaWQ9J0snIGQ9J00zMjcuNiA2OC40bC40IDIgMi44LS40IDIgMi0uOCA2IDIgMi40LTQuNC0xLjYtMiAyLjgtOS42LS40LTEuNi0zLjIuOC02IDIuNCAxLjYgMS42LTIuNCAzLjYtLjQuNC0yLjggMi40LjR6Jy8+PC9kZWZzPjxnIHRleHQtcmVuZGVyaW5nPSdvcHRpbWl6ZUxlZ2liaWxpdHknPjx1c2UgeGxpbms6aHJlZj0nI0InIGNsYXNzPSdCIEMgRCBFJy8+PGcgc3Ryb2tlPSdzaWx2ZXInPjx1c2UgeGxpbms6aHJlZj0nI0InIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjQycgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNDJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0QnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRCcgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNFJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0UnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRicgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNGJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0cnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRycgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNIJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0gnIGNsYXNzPSdCIEYgRyBIJy8+PHBhdGggZD0nTTYxLjIgMTE4LjhsLTEuMi0xLjIgMi40LS44LTEuMiAyeicgY2xhc3M9J0IgQyBEIEUnLz48cGF0aCBkPSdNNjEuMiAxMTguOGwtMS4yLTEuMiAyLjQtLjgtMS4yIDJ6JyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0knIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSScgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNKJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0onIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjSycgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNLJyBjbGFzcz0nQiBGIEcgSCcvPjwvZz48L2c+PC9zdmc+XCI7XG5cbiAgLyoqXG4gICAqIEFQSVByb3BlcnR5OiBleHRlbnRcbiAgICogRXh0ZW50IG9mIG92ZXJ2aWV3IC0gW21pbngsIG1pbnksIG1heHgsIG1heHldIG9yIFtsZWZ0LCBib3R0b20sIHJpZ2h0LCB0b3BdXG4gICAqL1xuICBwcm90ZWN0ZWQgZXh0ZW50OiBFeHRlbnQ7XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIHByb3RlY3RlZCBzdmdFbGVtZW50OiBTVkdFbGVtZW50O1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBwcm90ZWN0ZWQgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50OiBIVE1MRGl2RWxlbWVudDtcblxuICAvKipcbiAgICpcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgcHJvdGVjdGVkIGJhY2tncm91bmRTVkdSZWN0RWxlbWVudDogU1ZHUmVjdEVsZW1lbnQ7XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcm90ZWN0ZWQgcHJldmVudERlZmF1bHQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgcHVibGljIG9uITogT3ZlcnZpZXdPblNpZ25hdHVyZTxFdmVudHNLZXk+O1xuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgb3ZlcnZpZXcgb3B0aW9uc1xuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE92ZXJ2aWV3T3B0aW9ucykge1xuXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge30gYXMgT3ZlcnZpZXdPcHRpb25zO1xuXG4gICAgY29uc3Qgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLW92ZXJ2aWV3LWltYWdlJztcblxuICAgIGNvbnN0IGZpZ3VyZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWd1cmUnKTtcbiAgICBmaWd1cmVFbGVtZW50LmlubmVySFRNTCA9IE92ZXJ2aWV3LlNWR19DT0RFO1xuXG4gICAgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmFwcGVuZENoaWxkKGZpZ3VyZUVsZW1lbnQpO1xuXG4gICAgb3B0cy5lbGVtZW50ID0gb3ZlcnZpZXdDb250YWluZXJFbGVtZW50O1xuXG4gICAgc3VwZXIob3B0cyk7XG5cbiAgICB0aGlzLnByZXZlbnREZWZhdWx0ID0gb3B0cy5wcmV2ZW50RGVmYXVsdCB8fCBmYWxzZTtcblxuICAgIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50ID0gb3ZlcnZpZXdDb250YWluZXJFbGVtZW50O1xuXG4gICAgLy8gZXh0ZW50OiBbbWlueCwgbWlueSwgbWF4eCwgbWF4eV0gLS0gY29vcmRpbmF0ZXM6IFtbbGVmdCwgYm90dG9tXSwgW3JpZ2h0LCB0b3BdXVxuICAgIHRoaXMuZXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW1sxMDEwMDAwLCA1NzkwMDAwXSwgWzE5NjAwMDAsIDYzMzAwMDBdXSk7XG5cbiAgICB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT3ZlcnZpZXdNYXBFdmVudCgnY2xpY2snLCBlKSksIGZhbHNlKTtcblxuICAgIGlmKCF0aGlzLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgdGhpcy5vbk92ZXJ2aWV3SW1hZ2VDbGljayk7XG4gICAgfVxuXG4gICAgdGhpcy5zdmdFbGVtZW50ID0gZmlndXJlRWxlbWVudC5maXJzdENoaWxkIGFzIFNWR0VsZW1lbnQ7XG5cbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncmVjdCcpO1xuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnYmdpcy1vdmVydmlld21hcC1zdmctYmFja2dyb3VuZCcpO1xuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgneCcsIFN0cmluZygwKSk7XG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd5JywgU3RyaW5nKDApKTtcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3J4JywgU3RyaW5nKDgpKTtcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3J5JywgU3RyaW5nKDgpKTtcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgU3RyaW5nKE92ZXJ2aWV3LlNWR19XSURUSCkpO1xuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgU3RyaW5nKE92ZXJ2aWV3LlNWR19IRUlHSFQpKTtcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ3N0cm9rZS13aWR0aDowJyk7XG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdmaWxsJywgT3ZlcnZpZXcuQkFDS0dST1VORF9DT0xPUik7XG5cbiAgICB0aGlzLnN2Z0VsZW1lbnQucHJlcGVuZCh0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIG1hcFxuICAgKi9cbiAgcHVibGljIHNldE1hcChtYXA6IE1hcCk6IHZvaWQge1xuICAgIHN1cGVyLnNldE1hcChtYXApO1xuICAgIGlmIChtYXApIHtcbiAgICAgIC8vIGlmKHRoaXMuc3ZnRWxlbWVudCkge1xuICAgICAgLy8gICB0aGlzLnN2Z0VsZW1lbnQucHJlcGVuZCh0aGlzLnN2Z0JhY2tncm91bmRSZWN0KTtcbiAgICAgIC8vIH1cbiAgICAgIGlmKCF0aGlzLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgIG1hcC5vbignbW92ZWVuZCcsIChldmVudDogTWFwRXZlbnQpID0+IHRoaXMudXBkYXRlQ3Jvc3NoYWlyKGV2ZW50KSk7XG4gICAgICB9XG5cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByb3RlY3RlZCB1cGRhdGVDcm9zc2hhaXIoZXZlbnQ6IE1hcEV2ZW50KTogdm9pZCB7XG5cbiAgICBjb25zdCBzaXplID0gW092ZXJ2aWV3LlNWR19XSURUSCwgT3ZlcnZpZXcuU1ZHX0hFSUdIVF07XG5cbiAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0KGV2ZW50Lm1hcC5nZXRWaWV3KCk/LmdldENlbnRlcigpKTtcblxuICAgIC8vIGp1c3QgdG8gYmUgc3VyZSBtYWtlIHNvbWUgbGltaXRzXG4gICAgaWYgKGNlbnRlclswXSA+IHNpemVbMF0pXG4gICAgICBjZW50ZXJbMF0gPSBzaXplWzBdO1xuICAgIGVsc2UgaWYgKGNlbnRlclswXSA8IDApXG4gICAgICBjZW50ZXJbMF0gPSAwO1xuXG4gICAgaWYgKGNlbnRlclsxXSA+IHNpemVbMV0pXG4gICAgICBjZW50ZXJbMV0gPSBzaXplWzFdO1xuICAgIGVsc2UgaWYgKGNlbnRlclsxXSA8IDApXG4gICAgICBjZW50ZXJbMV0gPSAwO1xuXG4gICAgLy8gdXBkYXRlIGNyb3NzaGFpclxuICAgIGlmICh0aGlzLnN2Z0VsZW1lbnQpIHtcbiAgICAgIGNvbnN0IGV4aXN0aW5nRWxtcyA9IHRoaXMuc3ZnRWxlbWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXInKSBhcyBIVE1MQ29sbGVjdGlvbk9mPFNWR0xpbmVFbGVtZW50PjtcbiAgICAgIGlmIChleGlzdGluZ0VsbXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBleGlzdGluZ0VsbSBvZiBBcnJheS5mcm9tKGV4aXN0aW5nRWxtcykpIHtcbiAgICAgICAgICB0aGlzLnN2Z0VsZW1lbnQucmVtb3ZlQ2hpbGQoZXhpc3RpbmdFbG0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLnN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoT3ZlcnZpZXcuZ2V0Q3Jvc3NoYWlyKGNlbnRlclswXSwgMCwgY2VudGVyWzBdLCBPdmVydmlldy5TVkdfSEVJR0hULCAnYmdpcy1vdmVydmlld21hcC1zdmctY3Jvc3NoYWlyLXgnKSk7XG4gICAgICB0aGlzLnN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoT3ZlcnZpZXcuZ2V0Q3Jvc3NoYWlyKDAsIGNlbnRlclsxXSwgT3ZlcnZpZXcuU1ZHX1dJRFRILCBjZW50ZXJbMV0sICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXIteScpKTtcbiAgICB9XG5cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geDFcbiAgICogQHBhcmFtIHkxXG4gICAqIEBwYXJhbSB4MlxuICAgKiBAcGFyYW0geTJcbiAgICogQHBhcmFtIGNzc0NsYXNzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGdldENyb3NzaGFpcih4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyLCBjc3NDbGFzczogc3RyaW5nKTogU1ZHTGluZUVsZW1lbnQge1xuICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDEnLCBTdHJpbmcoeDEpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTEnLCBTdHJpbmcoeTEpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDInLCBTdHJpbmcoeDIpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneTInLCBTdHJpbmcoeTIpKTtcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZmlsbDogbm9uZTsgc3Ryb2tlOiBibGFjazsgc3Ryb2tlLXdpZHRoOiAxcHg7Jyk7XG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpciAnICsgY3NzQ2xhc3MpO1xuICAgIHJldHVybiBsaW5lO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBsZWZ0XG4gICAqIEBwYXJhbSByaWdodFxuICAgKiBAcGFyYW0gd2lkdGhcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aChsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIsIHdpZHRoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmFicygobGVmdCAtIHJpZ2h0KSkgLyB3aWR0aDtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gY2VudGVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcm90ZWN0ZWQgZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQoY2VudGVyOiBDb29yZGluYXRlIHwgdW5kZWZpbmVkKTogbnVtYmVyW10ge1xuICAgIGlmIChjZW50ZXIpIHtcbiAgICAgIGNvbnN0IHNpemUgPSBbT3ZlcnZpZXcuU1ZHX1dJRFRILCBPdmVydmlldy5TVkdfSEVJR0hUXTtcbiAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBbXG4gICAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMF0sIHRoaXMuZXh0ZW50WzJdLCBzaXplWzBdKSxcbiAgICAgICAgT3ZlcnZpZXcuY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aCh0aGlzLmV4dGVudFsxXSwgdGhpcy5leHRlbnRbM10sIHNpemVbMV0pXG4gICAgICBdO1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgTWF0aC5yb3VuZCgxIC8gcmVzb2x1dGlvblswXSAqIChjZW50ZXJbMF0gLSB0aGlzLmV4dGVudFswXSkpLFxuICAgICAgICBNYXRoLnJvdW5kKDEgLyByZXNvbHV0aW9uWzFdICogKHRoaXMuZXh0ZW50WzNdIC0gY2VudGVyWzFdKSlcbiAgICAgIF07XG4gICAgfVxuICAgIHJldHVybiBbMCwgMF07XG4gIH1cblxuICAvKipcbiAgICogTWV0aG9kOiBvbk92ZXJ2aWV3SW1hZ2VDbGlja1xuICAgKiBIYW5kbGUgY2xpY2sgaW4gb3ZlcnZpZXcgaW1hZ2VcbiAgICpcbiAgICogUGFyYW1ldGVyczpcbiAgICogZSAtIE1vdXNlRXZlbnQgb2JqZWN0XG4gICAqL1xuICBwcm90ZWN0ZWQgb25PdmVydmlld0ltYWdlQ2xpY2soZTogT3ZlcnZpZXdNYXBFdmVudCk6IHZvaWQge1xuXG4gICAgY29uc3Qgb3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QgPSB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCB4ID0gZS5vcmlnaW5hbEV2ZW50LmNsaWVudFggLSBvdmVydmlld0NvbnRhaW5lckNsaWVudEJvdW5kaW5nUmVjdC5sZWZ0OyAvLyBYLXBvcyBpbiBvdmVydmlldyBpbWFnZVxuICAgIGNvbnN0IHkgPSBlLm9yaWdpbmFsRXZlbnQuY2xpZW50WSAtIG92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0LnRvcDsgLy8gWS1wb3MgaW4gb3ZlcnZpZXcgaW1hZ2VcblxuICAgIC8vIGdldCBMb25MYXRcbiAgICBjb25zdCBjbGlja0xvbkxhdCA9IHRoaXMuZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHgoW3gsIHldKTtcblxuICAgIC8vIHVwZGF0ZSBjZW50ZXIgb2YgdGhlIG1hcFxuICAgIHRoaXMuZ2V0TWFwKCk/LmdldFZpZXcoKT8uYW5pbWF0ZSh7XG4gICAgICBjZW50ZXI6IGNsaWNrTG9uTGF0LFxuICAgICAgZHVyYXRpb246IDMwMCxcbiAgICB9KTtcblxuICB9XG5cbiAgLyoqXG4gICAqIE1ldGhvZDogZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHhcbiAgICogR2V0IG1hcCBsb2NhdGlvbiBmcm9tIHBpeGVsIGxvY2F0aW9uXG4gICAqXG4gICAqIFBhcmFtZXRlcnM6XG4gICAqIG9QeCAtIENvb3JkaW5hdGVcbiAgICpcbiAgICogUmV0dXJuczpcbiAgICogW3gseV0gTG9jYXRpb24gaW4gbG9uL2xhdCB0cmFuc2xhdGVkIGZyb21cbiAgICogcGFzc2VkIGluIHBpeGVsLWxvY2F0aW9uIGluIG92ZXJ2aWV3IG1hcFxuICAgKi9cbiAgcHJvdGVjdGVkIGdldExvbkxhdEZyb21PdmVydmlld1B4KG9QeDogQ29vcmRpbmF0ZSk6IG51bWJlcltdIHtcblxuICAgIGNvbnN0IHNpemUgPSBbdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuY2xpZW50V2lkdGgsIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsaWVudEhlaWdodF07XG4gICAgY29uc3QgcmVzb2x1dGlvbiA9IFtcbiAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMF0sIHRoaXMuZXh0ZW50WzJdLCBzaXplWzBdKSxcbiAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMV0sIHRoaXMuZXh0ZW50WzNdLCBzaXplWzFdKVxuICAgIF07XG5cbiAgICByZXR1cm4gW1xuICAgICAgb1B4WzBdICogcmVzb2x1dGlvblswXSArIHRoaXMuZXh0ZW50WzBdLFxuICAgICAgdGhpcy5leHRlbnRbM10gLSBvUHhbMV0gKiByZXNvbHV0aW9uWzFdXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG92ZXJ2aWV3IHBhcmVudCBjb250YWluZXIgZWxlbWVudFxuICAgKi9cbiAgcHVibGljIGdldE92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCgpOiBIVE1MRGl2RWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgb3ZlcnZpZXcgc3ZnIGVsZW1lbnRcbiAgICovXG4gIHB1YmxpYyBnZXRTVkdFbGVtZW50KCk6IFNWR0VsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLnN2Z0VsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzdmcgYmFja2dyb3VuZCByZWN0IGVsZW1lbnRcbiAgICovXG4gIHB1YmxpYyBnZXRCYWNrZ3JvdW5kUmVjdEVsZW1lbnQoKTogU1ZHUmVjdEVsZW1lbnQge1xuICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudDtcbiAgfVxuXG59XG4iLCJpbXBvcnQge0J1dHRvbiwgQnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vYmFzZVwiO1xyXG5cclxuLyoqXHJcbiAqIEEgZGVmYXVsdCBidXR0b24gd2l0aCBhIFwicHJpbnRcIiBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJpbnQgZXh0ZW5kcyBCdXR0b24ge1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBidXR0b24gb3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zPzogQnV0dG9uT3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgc3VwZXIoe2ljb25DbGFzc05hbWU6ICdiZ2lzLWljb24tcHJpbnQnLCB0b29sdGlwOiAnQW5zaWNodCBkcnVja2VuJywgLi4ub3B0c30pO1xyXG5cclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7QnV0dG9uLCBCdXR0b25PcHRpb25zfSBmcm9tIFwiLi9iYXNlXCI7XHJcblxyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJzaGFyZVwiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTaGFyZSBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIHN0YXRpYyByZWFkb25seSBERUZBVUxUX1RPT0xUSVBfVEVYVCA9ICdBbnNpY2h0IHRlaWxlbic7XHJcbiAgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfVU5JQ09ERSA9IDB4ZTkyYztcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgYnV0dG9uIG9wdGlvbnNcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9ucz86IEJ1dHRvbk9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgIHN1cGVyKHsgaWNvbkNsYXNzTmFtZTogJ2JnaXMtaWNvbi1zaGFyZScsIHRvb2x0aXA6IFNoYXJlLkRFRkFVTFRfVE9PTFRJUF9URVhULCAuLi5vcHRzIH0pO1xyXG5cclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7QnV0dG9uLCBCdXR0b25PcHRpb25zfSBmcm9tIFwiLi9iYXNlXCI7XHJcblxyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJ0b29sc1wiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb29scyBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICovXHJcbiAgcHVibGljIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBCdXR0b25PcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBzdXBlcih7IGljb25DbGFzc05hbWU6ICdiZ2lzLWljb24tdG9vbHMnLCB0b29sdGlwOiAnVG9vbGJveCBlaW5ibGVuZGVuJywgLi4ub3B0cyB9KTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7QnV0dG9ufSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCB7QnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vYmFzZS9CdXR0b25cIjtcclxuXHJcblxyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJ2aWV3IGxpc3RcIiBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVmlld0xpc3QgZXh0ZW5kcyBCdXR0b24ge1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBidXR0b24gb3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zPzogQnV0dG9uT3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgc3VwZXIoeyBpY29uQ2xhc3NOYW1lOidiZ2lzLWljb24tbGlzdCcsIHRvb2x0aXA6ICdMaXN0ZSBhbnplaWdlbicsIC4uLm9wdHMgfSk7XHJcblxyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtCdXR0b259IGZyb20gXCIuL2Jhc2VcIjtcclxuaW1wb3J0IHtCdXR0b25PcHRpb25zfSBmcm9tIFwiLi9iYXNlL0J1dHRvblwiO1xyXG5cclxuLyoqXHJcbiAqIEEgZGVmYXVsdCBidXR0b24gd2l0aCBMYXllcnMgaWNvblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIExheWVyIGV4dGVuZHMgQnV0dG9uIHtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgYnV0dG9uIG9wdGlvbnNcclxuICAgKi9cclxuICBwdWJsaWMgY29uc3RydWN0b3Iob3B0aW9ucz86IEJ1dHRvbk9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG5cclxuICAgIHN1cGVyKHsgaWNvbkNsYXNzTmFtZTonYmdpcy1pY29uLWxheWVyLWdyb3VwJywgdG9vbHRpcDogJ0JlZ2xlaXRrYXJ0ZW4gdmVyd2FsdGVuJywgLi4ub3B0cyB9KTtcclxuXHJcbiAgfVxyXG5cclxufVxyXG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9MUlVDYWNoZVxuICovXG5cbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFbnRyeVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGtleV8gS2V5LlxuICogQHByb3BlcnR5IHtPYmplY3R9IG5ld2VyIE5ld2VyLlxuICogQHByb3BlcnR5IHtPYmplY3R9IG9sZGVyIE9sZGVyLlxuICogQHByb3BlcnR5IHsqfSB2YWx1ZV8gVmFsdWUuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbXBsZW1lbnRzIGEgTGVhc3QtUmVjZW50bHktVXNlZCBjYWNoZSB3aGVyZSB0aGUga2V5cyBkbyBub3QgY29uZmxpY3Qgd2l0aFxuICogT2JqZWN0J3MgcHJvcGVydGllcyAoZS5nLiAnaGFzT3duUHJvcGVydHknIGlzIG5vdCBhbGxvd2VkIGFzIGEga2V5KS4gRXhwaXJpbmdcbiAqIGl0ZW1zIGZyb20gdGhlIGNhY2hlIGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgdXNlci5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHRcbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmNsYXNzIExSVUNhY2hlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbaGlnaFdhdGVyTWFya10gSGlnaCB3YXRlciBtYXJrLlxuICAgKi9cbiAgY29uc3RydWN0b3IoaGlnaFdhdGVyTWFyaykge1xuICAgIC8qKlxuICAgICAqIERlc2lyZWQgbWF4IGNhY2hlIHNpemUgYWZ0ZXIgZXhwaXJlQ2FjaGUoKS4gSWYgc2V0IHRvIDAsIG5vIGNhY2hlIGVudHJpZXNcbiAgICAgKiB3aWxsIGJlIHBydW5lZCBhdCBhbGwuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPSBoaWdoV2F0ZXJNYXJrICE9PSB1bmRlZmluZWQgPyBoaWdoV2F0ZXJNYXJrIDogMjA0ODtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNvdW50XyA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRW50cnk+fVxuICAgICAqL1xuICAgIHRoaXMuZW50cmllc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7P0VudHJ5fVxuICAgICAqL1xuICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICovXG4gIGNhbkV4cGlyZUNhY2hlKCkge1xuICAgIHJldHVybiB0aGlzLmhpZ2hXYXRlck1hcmsgPiAwICYmIHRoaXMuZ2V0Q291bnQoKSA+IHRoaXMuaGlnaFdhdGVyTWFyaztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBpcmUgdGhlIGNhY2hlLlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gW2tlZXBdIEtleXMgdG8ga2VlcC4gVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3Nlcy5cbiAgICovXG4gIGV4cGlyZUNhY2hlKGtlZXApIHtcbiAgICB3aGlsZSAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICB0aGlzLnBvcCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuY291bnRfID0gMDtcbiAgICB0aGlzLmVudHJpZXNfID0ge307XG4gICAgdGhpcy5vbGRlc3RfID0gbnVsbDtcbiAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBrZXkuXG4gICAqL1xuICBjb250YWluc0tleShrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzXy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgc3RyaW5nLCBMUlVDYWNoZTxUPik6ID99IGYgVGhlIGZ1bmN0aW9uXG4gICAqICAgICB0byBjYWxsIGZvciBldmVyeSBlbnRyeSBmcm9tIHRoZSBvbGRlc3QgdG8gdGhlIG5ld2VyLiBUaGlzIGZ1bmN0aW9uIHRha2VzXG4gICAqICAgICAzIGFyZ3VtZW50cyAodGhlIGVudHJ5IHZhbHVlLCB0aGUgZW50cnkga2V5IGFuZCB0aGUgTFJVQ2FjaGUgb2JqZWN0KS5cbiAgICogICAgIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICovXG4gIGZvckVhY2goZikge1xuICAgIGxldCBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIGYoZW50cnkudmFsdWVfLCBlbnRyeS5rZXlfLCB0aGlzKTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcGFyYW0geyp9IFtvcHRpb25zXSBPcHRpb25zIChyZXNlcnZlZCBmb3Igc3ViY2xhc3NlcykuXG4gICAqIEByZXR1cm4ge1R9IFZhbHVlLlxuICAgKi9cbiAgZ2V0KGtleSwgb3B0aW9ucykge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5lbnRyaWVzX1trZXldO1xuICAgIGFzc2VydChlbnRyeSAhPT0gdW5kZWZpbmVkLCAxNSk7IC8vIFRyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZVxuICAgIGlmIChlbnRyeSA9PT0gdGhpcy5uZXdlc3RfKSB7XG4gICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgIH1cbiAgICBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0Xykge1xuICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKHRoaXMub2xkZXN0Xy5uZXdlcik7XG4gICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICB9XG4gICAgZW50cnkubmV3ZXIgPSBudWxsO1xuICAgIGVudHJ5Lm9sZGVyID0gdGhpcy5uZXdlc3RfO1xuICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgIHRoaXMubmV3ZXN0XyA9IGVudHJ5O1xuICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFuIGVudHJ5IGZyb20gdGhlIGNhY2hlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBlbnRyeSBrZXkuXG4gICAqIEByZXR1cm4ge1R9IFRoZSByZW1vdmVkIGVudHJ5LlxuICAgKi9cbiAgcmVtb3ZlKGtleSkge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5lbnRyaWVzX1trZXldO1xuICAgIGFzc2VydChlbnRyeSAhPT0gdW5kZWZpbmVkLCAxNSk7IC8vIFRyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZVxuICAgIGlmIChlbnRyeSA9PT0gdGhpcy5uZXdlc3RfKSB7XG4gICAgICB0aGlzLm5ld2VzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkub2xkZXIpO1xuICAgICAgaWYgKHRoaXMubmV3ZXN0Xykge1xuICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0Xykge1xuICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm5ld2VyKTtcbiAgICAgIGlmICh0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgdGhpcy5vbGRlc3RfLm9sZGVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjtcbiAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgLS10aGlzLmNvdW50XztcbiAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gQ291bnQuXG4gICAqL1xuICBnZXRDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5jb3VudF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gS2V5cy5cbiAgICovXG4gIGdldEtleXMoKSB7XG4gICAgY29uc3Qga2V5cyA9IG5ldyBBcnJheSh0aGlzLmNvdW50Xyk7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBlbnRyeTtcbiAgICBmb3IgKGVudHJ5ID0gdGhpcy5uZXdlc3RfOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5vbGRlcikge1xuICAgICAga2V5c1tpKytdID0gZW50cnkua2V5XztcbiAgICB9XG4gICAgcmV0dXJuIGtleXM7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7QXJyYXk8VD59IFZhbHVlcy5cbiAgICovXG4gIGdldFZhbHVlcygpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSBuZXcgQXJyYXkodGhpcy5jb3VudF8pO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgZW50cnk7XG4gICAgZm9yIChlbnRyeSA9IHRoaXMubmV3ZXN0XzsgZW50cnk7IGVudHJ5ID0gZW50cnkub2xkZXIpIHtcbiAgICAgIHZhbHVlc1tpKytdID0gZW50cnkudmFsdWVfO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1R9IExhc3QgdmFsdWUuXG4gICAqL1xuICBwZWVrTGFzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5vbGRlc3RfLnZhbHVlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IExhc3Qga2V5LlxuICAgKi9cbiAgcGVla0xhc3RLZXkoKSB7XG4gICAgcmV0dXJuIHRoaXMub2xkZXN0Xy5rZXlfO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUga2V5IG9mIHRoZSBuZXdlc3QgaXRlbSBpbiB0aGUgY2FjaGUuICBUaHJvd3MgaWYgdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuZXdlc3Qga2V5LlxuICAgKi9cbiAgcGVla0ZpcnN0S2V5KCkge1xuICAgIHJldHVybiB0aGlzLm5ld2VzdF8ua2V5XztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYW4gZW50cnkgd2l0aG91dCB1cGRhdGluZyBsZWFzdCByZWNlbnRseSB1c2VkIHRpbWUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcmV0dXJuIHtUfSBWYWx1ZS5cbiAgICovXG4gIHBlZWsoa2V5KSB7XG4gICAgaWYgKCF0aGlzLmNvbnRhaW5zS2V5KGtleSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmVudHJpZXNfW2tleV0udmFsdWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1R9IHZhbHVlIFZhbHVlLlxuICAgKi9cbiAgcG9wKCkge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5vbGRlc3RfO1xuICAgIGRlbGV0ZSB0aGlzLmVudHJpZXNfW2VudHJ5LmtleV9dO1xuICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgIGlmICghdGhpcy5vbGRlc3RfKSB7XG4gICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH1cbiAgICAtLXRoaXMuY291bnRfO1xuICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAqL1xuICByZXBsYWNlKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLmdldChrZXkpOyAvLyB1cGRhdGUgYG5ld2VzdF9gXG4gICAgdGhpcy5lbnRyaWVzX1trZXldLnZhbHVlXyA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgKi9cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICBhc3NlcnQoIShrZXkgaW4gdGhpcy5lbnRyaWVzXyksIDE2KTsgLy8gVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5XG4gICAgY29uc3QgZW50cnkgPSB7XG4gICAgICBrZXlfOiBrZXksXG4gICAgICBuZXdlcjogbnVsbCxcbiAgICAgIG9sZGVyOiB0aGlzLm5ld2VzdF8sXG4gICAgICB2YWx1ZV86IHZhbHVlLFxuICAgIH07XG4gICAgaWYgKCF0aGlzLm5ld2VzdF8pIHtcbiAgICAgIHRoaXMub2xkZXN0XyA9IGVudHJ5O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBlbnRyeTtcbiAgICB9XG4gICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgdGhpcy5lbnRyaWVzX1trZXldID0gZW50cnk7XG4gICAgKyt0aGlzLmNvdW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBtYXhpbXVtIG51bWJlciBvZiBlbnRyaWVzIGZvciB0aGUgY2FjaGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIENhY2hlIHNpemUuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFNpemUoc2l6ZSkge1xuICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9IHNpemU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTFJVQ2FjaGU7XG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWNvb3JkXG4gKi9cblxuLyoqXG4gKiBBbiBhcnJheSBvZiB0aHJlZSBudW1iZXJzIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24gb2YgYSB0aWxlIGluIGEgdGlsZVxuICogZ3JpZC4gVGhlIG9yZGVyIGlzIGB6YCAoem9vbSBsZXZlbCksIGB4YCAoY29sdW1uKSwgYW5kIGB5YCAocm93KS5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBUaWxlQ29vcmRcbiAqIEBhcGlcbiAqL1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSBbdGlsZUNvb3JkXSBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKHosIHgsIHksIHRpbGVDb29yZCkge1xuICBpZiAodGlsZUNvb3JkICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aWxlQ29vcmRbMF0gPSB6O1xuICAgIHRpbGVDb29yZFsxXSA9IHg7XG4gICAgdGlsZUNvb3JkWzJdID0geTtcbiAgICByZXR1cm4gdGlsZUNvb3JkO1xuICB9XG4gIHJldHVybiBbeiwgeCwgeV07XG59XG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlaWFkoeiwgeCwgeSkge1xuICByZXR1cm4geiArICcvJyArIHggKyAnLycgKyB5O1xufVxuXG4vKipcbiAqIEdldCB0aGUga2V5IGZvciBhIHRpbGUgY29vcmQuXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRoZSB0aWxlIGNvb3JkLlxuICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXkodGlsZUNvb3JkKSB7XG4gIHJldHVybiBnZXRLZXlaWFkodGlsZUNvb3JkWzBdLCB0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSB0aWxlIGNhY2hlIGtleSBmb3IgYSB0aWxlIGtleSBvYnRhaW5lZCB0aHJvdWdoIGB0aWxlLmdldEtleSgpYC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlS2V5IFRoZSB0aWxlIGtleS5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNhY2hlIGtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENhY2hlS2V5Rm9yVGlsZUtleSh0aWxlS2V5KSB7XG4gIGNvbnN0IFt6LCB4LCB5XSA9IHRpbGVLZXlcbiAgICAuc3Vic3RyaW5nKHRpbGVLZXkubGFzdEluZGV4T2YoJy8nKSArIDEsIHRpbGVLZXkubGVuZ3RoKVxuICAgIC5zcGxpdCgnLCcpXG4gICAgLm1hcChOdW1iZXIpO1xuICByZXR1cm4gZ2V0S2V5WlhZKHosIHgsIHkpO1xufVxuXG4vKipcbiAqIEdldCBhIHRpbGUgY29vcmQgZ2l2ZW4gYSBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSB0aWxlIGNvb3JkIGtleS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGhlIHRpbGUgY29vcmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tS2V5KGtleSkge1xuICByZXR1cm4ga2V5LnNwbGl0KCcvJykubWFwKE51bWJlcik7XG59XG5cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkLlxuICogQHJldHVybiB7bnVtYmVyfSBIYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzaCh0aWxlQ29vcmQpIHtcbiAgcmV0dXJuICh0aWxlQ29vcmRbMV0gPDwgdGlsZUNvb3JkWzBdKSArIHRpbGVDb29yZFsyXTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7IWltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBjb29yZGluYXRlIGlzIHdpdGhpbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpIHtcbiAgY29uc3QgeiA9IHRpbGVDb29yZFswXTtcbiAgY29uc3QgeCA9IHRpbGVDb29yZFsxXTtcbiAgY29uc3QgeSA9IHRpbGVDb29yZFsyXTtcblxuICBpZiAodGlsZUdyaWQuZ2V0TWluWm9vbSgpID4geiB8fCB6ID4gdGlsZUdyaWQuZ2V0TWF4Wm9vbSgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gIGlmICghdGlsZVJhbmdlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIHRpbGVSYW5nZS5jb250YWluc1hZKHgsIHkpO1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVDYWNoZVxuICovXG5pbXBvcnQgTFJVQ2FjaGUgZnJvbSAnLi9zdHJ1Y3RzL0xSVUNhY2hlLmpzJztcbmltcG9ydCB7ZnJvbUtleSwgZ2V0S2V5fSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG5cbmNsYXNzIFRpbGVDYWNoZSBleHRlbmRzIExSVUNhY2hlIHtcbiAgY2xlYXIoKSB7XG4gICAgd2hpbGUgKHRoaXMuZ2V0Q291bnQoKSA+IDApIHtcbiAgICAgIHRoaXMucG9wKCkucmVsZWFzZSgpO1xuICAgIH1cbiAgICBzdXBlci5jbGVhcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICovXG4gIGV4cGlyZUNhY2hlKHVzZWRUaWxlcykge1xuICAgIHdoaWxlICh0aGlzLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgIGNvbnN0IHRpbGUgPSB0aGlzLnBlZWtMYXN0KCk7XG4gICAgICBpZiAodGlsZS5nZXRLZXkoKSBpbiB1c2VkVGlsZXMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBvcCgpLnJlbGVhc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJ1bmUgYWxsIHRpbGVzIGZyb20gdGhlIGNhY2hlIHRoYXQgZG9uJ3QgaGF2ZSB0aGUgc2FtZSB6IGFzIHRoZSBuZXdlc3QgdGlsZS5cbiAgICovXG4gIHBydW5lRXhjZXB0TmV3ZXN0WigpIHtcbiAgICBpZiAodGhpcy5nZXRDb3VudCgpID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGtleSA9IHRoaXMucGVla0ZpcnN0S2V5KCk7XG4gICAgY29uc3QgdGlsZUNvb3JkID0gZnJvbUtleShrZXkpO1xuICAgIGNvbnN0IHogPSB0aWxlQ29vcmRbMF07XG4gICAgdGhpcy5mb3JFYWNoKCh0aWxlKSA9PiB7XG4gICAgICBpZiAodGlsZS50aWxlQ29vcmRbMF0gIT09IHopIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoZ2V0S2V5KHRpbGUudGlsZUNvb3JkKSk7XG4gICAgICAgIHRpbGUucmVsZWFzZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVDYWNoZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU291cmNlXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQge2dldCBhcyBnZXRQcm9qZWN0aW9ufSBmcm9tICcuLi9wcm9qLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7J3VuZGVmaW5lZCcgfCAnbG9hZGluZycgfCAncmVhZHknIHwgJ2Vycm9yJ30gU3RhdGVcbiAqIFN0YXRlIG9mIHRoZSBzb3VyY2UsIG9uZSBvZiAndW5kZWZpbmVkJywgJ2xvYWRpbmcnLCAncmVhZHknIG9yICdlcnJvcicuXG4gKi9cblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3U3RhdGVMYXllclN0YXRlRXh0ZW50fSBhbmQgcmV0dXJucyBhIHN0cmluZyBvclxuICogYW4gYXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgc291cmNlIGF0dHJpYnV0aW9ucy5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3U3RhdGVMYXllclN0YXRlRXh0ZW50KTogKHN0cmluZ3xBcnJheTxzdHJpbmc+KX0gQXR0cmlidXRpb25cbiAqL1xuXG4vKipcbiAqIEEgdHlwZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYXR0cmlidXRpb24gaW5mb3JtYXRpb24gZm9yIGRhdGEgc291cmNlcy5cbiAqXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlclxuICogKiBhIHNpbXBsZSBzdHJpbmcgKGUuZy4gYCfCqSBBY21lIEluYy4nYClcbiAqICogYW4gYXJyYXkgb2Ygc2ltcGxlIHN0cmluZ3MgKGUuZy4gYFsnwqkgQWNtZSBJbmMuJywgJ8KpIEJhY21lIEluYy4nXWApXG4gKiAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgKHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0pXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ3xBcnJheTxzdHJpbmc+fEF0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbkxpa2VcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7QXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5TdGF0ZX0gW3N0YXRlPSdyZWFkeSddIFN0YXRlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9ZmFsc2VdIFdyYXBYLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9ZmFsc2VdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiB0aGUgbmVhcmVzdCBuZWlnaGJvciBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXJ9IHNvdXJjZXMuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xuY2xhc3MgU291cmNlIGV4dGVuZHMgQmFzZU9iamVjdCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgU291cmNlIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8bnVsbH1cbiAgICAgKi9cbiAgICB0aGlzLnByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHs/QXR0cmlidXRpb259XG4gICAgICovXG4gICAgdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMob3B0aW9ucy5hdHRyaWJ1dGlvbnMpO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXyA9XG4gICAgICBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXG4gICAgICAgIDogdHJ1ZTtcblxuICAgIC8qKlxuICAgICAqIFRoaXMgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuIFNvdXJjZXMgdGhhdCBkZWZlciBsb2FkaW5nIHRvIHRoZVxuICAgICAqIG1hcCdzIHRpbGUgcXVldWUgbmV2ZXIgc2V0IHRoaXMgdG8gYHRydWVgLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuU3RhdGV9XG4gICAgICovXG4gICAgdGhpcy5zdGF0ZV8gPSBvcHRpb25zLnN0YXRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnN0YXRlIDogJ3JlYWR5JztcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy53cmFwWF8gPSBvcHRpb25zLndyYXBYICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndyYXBYIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMuaW50ZXJwb2xhdGVfID0gISFvcHRpb25zLmludGVycG9sYXRlO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zKTp2b2lkfVxuICAgICAqL1xuICAgIHRoaXMudmlld1Jlc29sdmVyID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oRXJyb3IpOnZvaWR9XG4gICAgICovXG4gICAgdGhpcy52aWV3UmVqZWN0b3IgPSBudWxsO1xuXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7UHJvbWlzZTxpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zPn1cbiAgICAgKi9cbiAgICB0aGlzLnZpZXdQcm9taXNlXyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHNlbGYudmlld1Jlc29sdmVyID0gcmVzb2x2ZTtcbiAgICAgIHNlbGYudmlld1JlamVjdG9yID0gcmVqZWN0O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgYXR0cmlidXRpb24gZnVuY3Rpb24gZm9yIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4gez9BdHRyaWJ1dGlvbn0gQXR0cmlidXRpb24gZnVuY3Rpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEF0dHJpYnV0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGlvbnNfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlKCkge1xuICAgIHJldHVybiB0aGlzLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHByb2plY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8bnVsbH0gUHJvamVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0UHJvamVjdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uXCIpLmRlZmF1bHR9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fG51bGx9IFJlc29sdXRpb25zLlxuICAgKi9cbiAgZ2V0UmVzb2x1dGlvbnMocHJvamVjdGlvbikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1Byb21pc2U8aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucz59IEEgcHJvbWlzZSBmb3Igdmlldy1yZWxhdGVkIHByb3BlcnRpZXMuXG4gICAqL1xuICBnZXRWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLnZpZXdQcm9taXNlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UsIHNlZSB7QGxpbmsgaW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuU3RhdGV9IGZvciBwb3NzaWJsZSBzdGF0ZXMuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLlN0YXRlfSBTdGF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0U3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBXcmFwIFguXG4gICAqL1xuICBnZXRXcmFwWCgpIHtcbiAgICByZXR1cm4gdGhpcy53cmFwWF87XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVXNlIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdoZW4gcmVzYW1wbGluZy5cbiAgICovXG4gIGdldEludGVycG9sYXRlKCkge1xuICAgIHJldHVybiB0aGlzLmludGVycG9sYXRlXztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWZyZXNoZXMgdGhlIHNvdXJjZS4gVGhlIHNvdXJjZSB3aWxsIGJlIGNsZWFyZWQsIGFuZCBkYXRhIGZyb20gdGhlIHNlcnZlciB3aWxsIGJlIHJlbG9hZGVkLlxuICAgKiBAYXBpXG4gICAqL1xuICByZWZyZXNoKCkge1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYXR0cmlidXRpb25zIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7QXR0cmlidXRpb25MaWtlfHVuZGVmaW5lZH0gYXR0cmlidXRpb25zIEF0dHJpYnV0aW9ucy5cbiAgICogICAgIENhbiBiZSBwYXNzZWQgYXMgYHN0cmluZ2AsIGBBcnJheTxzdHJpbmc+YCwge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufSxcbiAgICogICAgIG9yIGB1bmRlZmluZWRgLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25zKSB7XG4gICAgdGhpcy5hdHRyaWJ1dGlvbnNfID0gYWRhcHRBdHRyaWJ1dGlvbnMoYXR0cmlidXRpb25zKTtcbiAgICB0aGlzLmNoYW5nZWQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuU3RhdGV9IHN0YXRlIFN0YXRlLlxuICAgKi9cbiAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG59XG5cbi8qKlxuICogVHVybnMgdGhlIGF0dHJpYnV0aW9ucyBvcHRpb24gaW50byBhbiBhdHRyaWJ1dGlvbnMgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9uTGlrZSBUaGUgYXR0cmlidXRpb24gb3B0aW9uLlxuICogQHJldHVybiB7QXR0cmlidXRpb258bnVsbH0gQW4gYXR0cmlidXRpb24gZnVuY3Rpb24gKG9yIG51bGwpLlxuICovXG5mdW5jdGlvbiBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbkxpa2UpIHtcbiAgaWYgKCFhdHRyaWJ1dGlvbkxpa2UpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbkxpa2UpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICByZXR1cm4gYXR0cmlidXRpb25MaWtlO1xuICAgIH07XG4gIH1cblxuICBpZiAodHlwZW9mIGF0dHJpYnV0aW9uTGlrZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBhdHRyaWJ1dGlvbkxpa2U7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICByZXR1cm4gW2F0dHJpYnV0aW9uTGlrZV07XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNvdXJjZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9UaWxlR3JpZFxuICovXG5pbXBvcnQgVGlsZVJhbmdlLCB7XG4gIGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlLFxufSBmcm9tICcuLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IHtERUZBVUxUX1RJTEVfU0laRX0gZnJvbSAnLi9jb21tb24uanMnO1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHtjZWlsLCBjbGFtcCwgZmxvb3J9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHtjcmVhdGVPclVwZGF0ZSwgZ2V0VG9wTGVmdH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7Y3JlYXRlT3JVcGRhdGUgYXMgY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmR9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQge2ludGVyc2VjdHNMaW5lYXJSaW5nfSBmcm9tICcuLi9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyc7XG5pbXBvcnQge2lzU29ydGVkLCBsaW5lYXJGaW5kTmVhcmVzdH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHt0b1NpemV9IGZyb20gJy4uL3NpemUuanMnO1xuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAqL1xuY29uc3QgdG1wVGlsZUNvb3JkID0gWzAsIDAsIDBdO1xuXG4vKipcbiAqIE51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cyB0byBjb25zaWRlciBpbiBpbnRlZ2VyIHZhbHVlcyB3aGVuIHJvdW5kaW5nLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuY29uc3QgREVDSU1BTFMgPSA1O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBObyB0aWxlcyBvdXRzaWRlIHRoaXNcbiAqIGV4dGVudCB3aWxsIGJlIHJlcXVlc3RlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGVTb3VyY2V9IHNvdXJjZXMuIFdoZW4gbm8gYG9yaWdpbmAgb3JcbiAqIGBvcmlnaW5zYCBhcmUgY29uZmlndXJlZCwgdGhlIGBvcmlnaW5gIHdpbGwgYmUgc2V0IHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBNaW5pbXVtIHpvb20uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29yaWdpbl0gVGhlIHRpbGUgZ3JpZCBvcmlnaW4sIGkuZS4gd2hlcmUgdGhlIGB4YFxuICogYW5kIGB5YCBheGVzIG1lZXQgKGBbeiwgMCwgMF1gKS4gVGlsZSBjb29yZGluYXRlcyBpbmNyZWFzZSBsZWZ0IHRvIHJpZ2h0IGFuZCBkb3dud2FyZHMuIElmIG5vdFxuICogc3BlY2lmaWVkLCBgZXh0ZW50YCBvciBgb3JpZ2luc2AgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gW29yaWdpbnNdIFRpbGUgZ3JpZCBvcmlnaW5zLCBpLmUuIHdoZXJlXG4gKiB0aGUgYHhgIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCksIGZvciBlYWNoIHpvb20gbGV2ZWwuIElmIGdpdmVuLCB0aGUgYXJyYXkgbGVuZ3RoXG4gKiBzaG91bGQgbWF0Y2ggdGhlIGxlbmd0aCBvZiB0aGUgYHJlc29sdXRpb25zYCBhcnJheSwgaS5lLiBlYWNoIHJlc29sdXRpb24gY2FuIGhhdmUgYSBkaWZmZXJlbnRcbiAqIG9yaWdpbi4gVGlsZSBjb29yZGluYXRlcyBpbmNyZWFzZSBsZWZ0IHRvIHJpZ2h0IGFuZCBkb3dud2FyZHMuIElmIG5vdCBzcGVjaWZpZWQsIGBleHRlbnRgIG9yXG4gKiBgb3JpZ2luYCBtdXN0IGJlIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuIFRoZSBhcnJheSBpbmRleCBvZiBlYWNoIHJlc29sdXRpb24gbmVlZHNcbiAqIHRvIG1hdGNoIHRoZSB6b29tIGxldmVsLiBUaGlzIG1lYW5zIHRoYXQgZXZlbiBpZiBhIGBtaW5ab29tYCBpcyBjb25maWd1cmVkLCB0aGUgcmVzb2x1dGlvbnNcbiAqIGFycmF5IHdpbGwgaGF2ZSBhIGxlbmd0aCBvZiBgbWF4Wm9vbSArIDFgLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbc2l6ZXNdIE51bWJlciBvZiB0aWxlIHJvd3MgYW5kIGNvbHVtbnNcbiAqIG9mIHRoZSBncmlkIGZvciBlYWNoIHpvb20gbGV2ZWwuIElmIHNwZWNpZmllZCB0aGUgdmFsdWVzXG4gKiBkZWZpbmUgZWFjaCB6b29tIGxldmVsJ3MgZXh0ZW50IHRvZ2V0aGVyIHdpdGggdGhlIGBvcmlnaW5gIG9yIGBvcmlnaW5zYC5cbiAqIEEgZ3JpZCBgZXh0ZW50YCBjYW4gYmUgY29uZmlndXJlZCBpbiBhZGRpdGlvbiwgYW5kIHdpbGwgZnVydGhlciBsaW1pdCB0aGUgZXh0ZW50XG4gKiBmb3Igd2hpY2ggdGlsZSByZXF1ZXN0cyBhcmUgbWFkZSBieSBzb3VyY2VzLiBJZiB0aGUgYm90dG9tLWxlZnQgY29ybmVyIG9mXG4gKiBhbiBleHRlbnQgaXMgdXNlZCBhcyBgb3JpZ2luYCBvciBgb3JpZ2luc2AsIHRoZW4gdGhlIGB5YCB2YWx1ZSBtdXN0IGJlXG4gKiBuZWdhdGl2ZSBiZWNhdXNlIE9wZW5MYXllcnMgdGlsZSBjb29yZGluYXRlcyB1c2UgdGhlIHRvcCBsZWZ0IGFzIHRoZSBvcmlnaW4uXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZV0gVGlsZSBzaXplLlxuICogRGVmYXVsdCBpcyBgWzI1NiwgMjU2XWAuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbdGlsZVNpemVzXSBUaWxlIHNpemVzLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiB0aWxlIHNpemUuXG4gKi9cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciBzZXR0aW5nIHRoZSBncmlkIHBhdHRlcm4gZm9yIHNvdXJjZXMgYWNjZXNzaW5nIHRpbGVkLWltYWdlXG4gKiBzZXJ2ZXJzLlxuICogQGFwaVxuICovXG5jbGFzcyBUaWxlR3JpZCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgVGlsZSBncmlkIG9wdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5taW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiAwO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgIGFzc2VydChcbiAgICAgIGlzU29ydGVkKFxuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyxcbiAgICAgICAgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICByZXR1cm4gYiAtIGE7XG4gICAgICAgIH0sXG4gICAgICAgIHRydWVcbiAgICAgICksXG4gICAgICAxN1xuICAgICk7IC8vIGByZXNvbHV0aW9uc2AgbXVzdCBiZSBzb3J0ZWQgaW4gZGVzY2VuZGluZyBvcmRlclxuXG4gICAgLy8gY2hlY2sgaWYgd2UndmUgZ290IGEgY29uc2lzdGVudCB6b29tIGZhY3RvciBhbmQgb3JpZ2luXG4gICAgbGV0IHpvb21GYWN0b3I7XG4gICAgaWYgKCFvcHRpb25zLm9yaWdpbnMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmICghem9vbUZhY3Rvcikge1xuICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc19baV0gLyB0aGlzLnJlc29sdXRpb25zX1tpICsgMV0gIT09IHpvb21GYWN0b3IpIHtcbiAgICAgICAgICAgIHpvb21GYWN0b3IgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIHRoaXMuem9vbUZhY3Rvcl8gPSB6b29tRmFjdG9yO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5tYXhab29tID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxudWxsfVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luXyA9IG9wdGlvbnMub3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9yaWdpbiA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luc18gPSBudWxsO1xuICAgIGlmIChvcHRpb25zLm9yaWdpbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5vcmlnaW5zXyA9IG9wdGlvbnMub3JpZ2lucztcbiAgICAgIGFzc2VydCh0aGlzLm9yaWdpbnNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDIwKTsgLy8gTnVtYmVyIG9mIGBvcmlnaW5zYCBhbmQgYHJlc29sdXRpb25zYCBtdXN0IGJlIGVxdWFsXG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG5cbiAgICBpZiAoZXh0ZW50ICE9PSB1bmRlZmluZWQgJiYgIXRoaXMub3JpZ2luXyAmJiAhdGhpcy5vcmlnaW5zXykge1xuICAgICAgdGhpcy5vcmlnaW5fID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgIH1cblxuICAgIGFzc2VydChcbiAgICAgICghdGhpcy5vcmlnaW5fICYmIHRoaXMub3JpZ2luc18pIHx8ICh0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pLFxuICAgICAgMThcbiAgICApOyAvLyBFaXRoZXIgYG9yaWdpbmAgb3IgYG9yaWdpbnNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59XG4gICAgICovXG4gICAgdGhpcy50aWxlU2l6ZXNfID0gbnVsbDtcbiAgICBpZiAob3B0aW9ucy50aWxlU2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy50aWxlU2l6ZXNfID0gb3B0aW9ucy50aWxlU2l6ZXM7XG4gICAgICBhc3NlcnQodGhpcy50aWxlU2l6ZXNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDE5KTsgLy8gTnVtYmVyIG9mIGB0aWxlU2l6ZXNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudGlsZVNpemVfID1cbiAgICAgIG9wdGlvbnMudGlsZVNpemUgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMudGlsZVNpemVcbiAgICAgICAgOiAhdGhpcy50aWxlU2l6ZXNfXG4gICAgICAgID8gREVGQVVMVF9USUxFX1NJWkVcbiAgICAgICAgOiBudWxsO1xuICAgIGFzc2VydChcbiAgICAgICghdGhpcy50aWxlU2l6ZV8gJiYgdGhpcy50aWxlU2l6ZXNfKSB8fFxuICAgICAgICAodGhpcy50aWxlU2l6ZV8gJiYgIXRoaXMudGlsZVNpemVzXyksXG4gICAgICAyMlxuICAgICk7IC8vIEVpdGhlciBgdGlsZVNpemVgIG9yIGB0aWxlU2l6ZXNgIG11c3QgYmUgY29uZmlndXJlZCwgbmV2ZXIgYm90aFxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgKi9cbiAgICB0aGlzLmV4dGVudF8gPSBleHRlbnQgIT09IHVuZGVmaW5lZCA/IGV4dGVudCA6IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy5mdWxsVGlsZVJhbmdlc18gPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfVxuICAgICAqL1xuICAgIHRoaXMudG1wU2l6ZV8gPSBbMCwgMF07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAqL1xuICAgIHRoaXMudG1wRXh0ZW50XyA9IFswLCAwLCAwLCAwXTtcblxuICAgIGlmIChvcHRpb25zLnNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gb3B0aW9ucy5zaXplcy5tYXAoZnVuY3Rpb24gKHNpemUsIHopIHtcbiAgICAgICAgY29uc3QgdGlsZVJhbmdlID0gbmV3IFRpbGVSYW5nZShcbiAgICAgICAgICBNYXRoLm1pbigwLCBzaXplWzBdKSxcbiAgICAgICAgICBNYXRoLm1heChzaXplWzBdIC0gMSwgLTEpLFxuICAgICAgICAgIE1hdGgubWluKDAsIHNpemVbMV0pLFxuICAgICAgICAgIE1hdGgubWF4KHNpemVbMV0gLSAxLCAtMSlcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGV4dGVudCkge1xuICAgICAgICAgIGNvbnN0IHJlc3RyaWN0ZWRUaWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgICB0aWxlUmFuZ2UubWluWCA9IE1hdGgubWF4KHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWluWCwgdGlsZVJhbmdlLm1pblgpO1xuICAgICAgICAgIHRpbGVSYW5nZS5tYXhYID0gTWF0aC5taW4ocmVzdHJpY3RlZFRpbGVSYW5nZS5tYXhYLCB0aWxlUmFuZ2UubWF4WCk7XG4gICAgICAgICAgdGlsZVJhbmdlLm1pblkgPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblksIHRpbGVSYW5nZS5taW5ZKTtcbiAgICAgICAgICB0aWxlUmFuZ2UubWF4WSA9IE1hdGgubWluKHJlc3RyaWN0ZWRUaWxlUmFuZ2UubWF4WSwgdGlsZVJhbmdlLm1heFkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlUmFuZ2U7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9IGVsc2UgaWYgKGV4dGVudCkge1xuICAgICAgdGhpcy5jYWxjdWxhdGVUaWxlUmFuZ2VzXyhleHRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGEgZnVuY3Rpb24gd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZSBmb3IgYSBnaXZlbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gSW50ZWdlciB6b29tIGxldmVsLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQpOiB2b2lkfSBjYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgd2l0aCBlYWNoIHRpbGUgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZm9yRWFjaFRpbGVDb29yZChleHRlbnQsIHpvb20sIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgem9vbSk7XG4gICAgZm9yIChsZXQgaSA9IHRpbGVSYW5nZS5taW5YLCBpaSA9IHRpbGVSYW5nZS5tYXhYOyBpIDw9IGlpOyArK2kpIHtcbiAgICAgIGZvciAobGV0IGogPSB0aWxlUmFuZ2UubWluWSwgamogPSB0aWxlUmFuZ2UubWF4WTsgaiA8PSBqajsgKytqKSB7XG4gICAgICAgIGNhbGxiYWNrKFt6b29tLCBpLCBqXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFt0ZW1wVGlsZVJhbmdlXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFt0ZW1wRXh0ZW50XSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAgICovXG4gIGZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UoXG4gICAgdGlsZUNvb3JkLFxuICAgIGNhbGxiYWNrLFxuICAgIHRlbXBUaWxlUmFuZ2UsXG4gICAgdGVtcEV4dGVudFxuICApIHtcbiAgICBsZXQgdGlsZVJhbmdlLCB4LCB5O1xuICAgIGxldCB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICAgIGxldCB6ID0gdGlsZUNvb3JkWzBdIC0gMTtcbiAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgeCA9IHRpbGVDb29yZFsxXTtcbiAgICAgIHkgPSB0aWxlQ29vcmRbMl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGVtcEV4dGVudCk7XG4gICAgfVxuICAgIHdoaWxlICh6ID49IHRoaXMubWluWm9vbSkge1xuICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgeCA9IE1hdGguZmxvb3IoeCAvIDIpO1xuICAgICAgICB5ID0gTWF0aC5mbG9vcih5IC8gMik7XG4gICAgICAgIHRpbGVSYW5nZSA9IGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHgsIHgsIHksIHksIHRlbXBUaWxlUmFuZ2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKFxuICAgICAgICAgIHRpbGVDb29yZEV4dGVudCxcbiAgICAgICAgICB6LFxuICAgICAgICAgIHRlbXBUaWxlUmFuZ2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChjYWxsYmFjayh6LCB0aWxlUmFuZ2UpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgLS16O1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBleHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLCBpZiBpdCB3YXMgY29uZmlndXJlZC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRFeHRlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXh0ZW50XztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWF4IHpvb20uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1heFpvb20oKSB7XG4gICAgcmV0dXJuIHRoaXMubWF4Wm9vbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAqIEByZXR1cm4ge251bWJlcn0gTWluIHpvb20uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE1pblpvb20oKSB7XG4gICAgcmV0dXJuIHRoaXMubWluWm9vbTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBPcmlnaW4uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldE9yaWdpbih6KSB7XG4gICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub3JpZ2luc19bel07XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGUgZ2l2ZW4gem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFJlc29sdXRpb24oeikge1xuICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t6XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIGxpc3Qgb2YgcmVzb2x1dGlvbnMgZm9yIHRoZSB0aWxlIGdyaWQuXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRSZXNvbHV0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbdGVtcFRpbGVSYW5nZV0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0IG9iamVjdC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbdGVtcEV4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdHxudWxsfSBUaWxlIHJhbmdlLlxuICAgKi9cbiAgZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UodGlsZUNvb3JkLCB0ZW1wVGlsZVJhbmdlLCB0ZW1wRXh0ZW50KSB7XG4gICAgaWYgKHRpbGVDb29yZFswXSA8IHRoaXMubWF4Wm9vbSkge1xuICAgICAgaWYgKHRoaXMuem9vbUZhY3Rvcl8gPT09IDIpIHtcbiAgICAgICAgY29uc3QgbWluWCA9IHRpbGVDb29yZFsxXSAqIDI7XG4gICAgICAgIGNvbnN0IG1pblkgPSB0aWxlQ29vcmRbMl0gKiAyO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoXG4gICAgICAgICAgbWluWCxcbiAgICAgICAgICBtaW5YICsgMSxcbiAgICAgICAgICBtaW5ZLFxuICAgICAgICAgIG1pblkgKyAxLFxuICAgICAgICAgIHRlbXBUaWxlUmFuZ2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KFxuICAgICAgICB0aWxlQ29vcmQsXG4gICAgICAgIHRlbXBFeHRlbnQgfHwgdGhpcy50bXBFeHRlbnRfXG4gICAgICApO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihcbiAgICAgICAgdGlsZUNvb3JkRXh0ZW50LFxuICAgICAgICB0aWxlQ29vcmRbMF0gKyAxLFxuICAgICAgICB0ZW1wVGlsZVJhbmdlXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gW3RlbXBUaWxlUmFuZ2VdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fG51bGx9IFRpbGUgcmFuZ2UuXG4gICAqL1xuICBnZXRUaWxlUmFuZ2VGb3JUaWxlQ29vcmRBbmRaKHRpbGVDb29yZCwgeiwgdGVtcFRpbGVSYW5nZSkge1xuICAgIGlmICh6ID4gdGhpcy5tYXhab29tIHx8IHogPCB0aGlzLm1pblpvb20pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHRpbGVDb29yZFogPSB0aWxlQ29vcmRbMF07XG4gICAgY29uc3QgdGlsZUNvb3JkWCA9IHRpbGVDb29yZFsxXTtcbiAgICBjb25zdCB0aWxlQ29vcmRZID0gdGlsZUNvb3JkWzJdO1xuXG4gICAgaWYgKHogPT09IHRpbGVDb29yZFopIHtcbiAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShcbiAgICAgICAgdGlsZUNvb3JkWCxcbiAgICAgICAgdGlsZUNvb3JkWSxcbiAgICAgICAgdGlsZUNvb3JkWCxcbiAgICAgICAgdGlsZUNvb3JkWSxcbiAgICAgICAgdGVtcFRpbGVSYW5nZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy56b29tRmFjdG9yXykge1xuICAgICAgY29uc3QgZmFjdG9yID0gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgeiAtIHRpbGVDb29yZFopO1xuICAgICAgY29uc3QgbWluWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCAqIGZhY3Rvcik7XG4gICAgICBjb25zdCBtaW5ZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZICogZmFjdG9yKTtcbiAgICAgIGlmICh6IDwgdGlsZUNvb3JkWikge1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgbWluWCwgbWluWSwgbWluWSwgdGVtcFRpbGVSYW5nZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1heFggPSBNYXRoLmZsb29yKGZhY3RvciAqICh0aWxlQ29vcmRYICsgMSkpIC0gMTtcbiAgICAgIGNvbnN0IG1heFkgPSBNYXRoLmZsb29yKGZhY3RvciAqICh0aWxlQ29vcmRZICsgMSkpIC0gMTtcbiAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZLCB0ZW1wVGlsZVJhbmdlKTtcbiAgICB9XG5cbiAgICBjb25zdCB0aWxlQ29vcmRFeHRlbnQgPSB0aGlzLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIHRoaXMudG1wRXh0ZW50Xyk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHosIHRlbXBUaWxlUmFuZ2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIHRpbGUgcmFuZ2UgZm9yIHRoZSBnaXZlbiBleHRlbnQgYW5kIGludGVnZXIgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFt0ZW1wVGlsZVJhbmdlXSBUZW1wb3JhcnkgdGlsZSByYW5nZSBvYmplY3QuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgKi9cbiAgZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHosIHRlbXBUaWxlUmFuZ2UpIHtcbiAgICB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oZXh0ZW50WzBdLCBleHRlbnRbM10sIHosIGZhbHNlLCB0bXBUaWxlQ29vcmQpO1xuICAgIGNvbnN0IG1pblggPSB0bXBUaWxlQ29vcmRbMV07XG4gICAgY29uc3QgbWluWSA9IHRtcFRpbGVDb29yZFsyXTtcbiAgICB0aGlzLmdldFRpbGVDb29yZEZvclhZQW5kWl8oZXh0ZW50WzJdLCBleHRlbnRbMV0sIHosIHRydWUsIHRtcFRpbGVDb29yZCk7XG4gICAgY29uc3QgbWF4WCA9IHRtcFRpbGVDb29yZFsxXTtcbiAgICBjb25zdCBtYXhZID0gdG1wVGlsZUNvb3JkWzJdO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZLCB0ZW1wVGlsZVJhbmdlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGlsZSBjZW50ZXIuXG4gICAqL1xuICBnZXRUaWxlQ29vcmRDZW50ZXIodGlsZUNvb3JkKSB7XG4gICAgY29uc3Qgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4odGlsZUNvb3JkWzBdKTtcbiAgICBjb25zdCByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgY29uc3QgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh0aWxlQ29vcmRbMF0pLCB0aGlzLnRtcFNpemVfKTtcbiAgICByZXR1cm4gW1xuICAgICAgb3JpZ2luWzBdICsgKHRpbGVDb29yZFsxXSArIDAuNSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb24sXG4gICAgICBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMC41KSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbixcbiAgICBdO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgZXh0ZW50IG9mIGEgdGlsZSBjb29yZGluYXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW3RlbXBFeHRlbnRdIFRlbXBvcmFyeSBleHRlbnQgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQsIHRlbXBFeHRlbnQpIHtcbiAgICBjb25zdCBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih0aWxlQ29vcmRbMF0pO1xuICAgIGNvbnN0IHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24odGlsZUNvb3JkWzBdKTtcbiAgICBjb25zdCB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgIGNvbnN0IG1pblggPSBvcmlnaW5bMF0gKyB0aWxlQ29vcmRbMV0gKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgY29uc3QgbWluWSA9IG9yaWdpblsxXSAtICh0aWxlQ29vcmRbMl0gKyAxKSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICBjb25zdCBtYXhYID0gbWluWCArIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICBjb25zdCBtYXhZID0gbWluWSArIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgdGVtcEV4dGVudCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0aWxlIGNvb3JkaW5hdGUgZm9yIHRoZSBnaXZlbiBtYXAgY29vcmRpbmF0ZSBhbmQgcmVzb2x1dGlvbi4gIFRoaXNcbiAgICogbWV0aG9kIGNvbnNpZGVycyB0aGF0IGNvb3JkaW5hdGVzIHRoYXQgaW50ZXJzZWN0IHRpbGUgYm91bmRhcmllcyBzaG91bGQgYmVcbiAgICogYXNzaWduZWQgdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIERlc3RpbmF0aW9uIGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbGVDb29yZEZvckNvb3JkQW5kUmVzb2x1dGlvbihjb29yZGluYXRlLCByZXNvbHV0aW9uLCBvcHRfdGlsZUNvb3JkKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyhcbiAgICAgIGNvb3JkaW5hdGVbMF0sXG4gICAgICBjb29yZGluYXRlWzFdLFxuICAgICAgcmVzb2x1dGlvbixcbiAgICAgIGZhbHNlLFxuICAgICAgb3B0X3RpbGVDb29yZFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyB0aGF0IGNvcnJlc3BvbmRcbiAgICogdG8gYW4gaW50ZWdlciB6b29tIGxldmVsLiAgSW5zdGVhZCBjYWxsIHRoZSBgZ2V0VGlsZUNvb3JkRm9yWFlBbmRaX2AgbWV0aG9kLlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uIChmb3IgYSBub24taW50ZWdlciB6b29tIGxldmVsKS5cbiAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAqICAgICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gICAqICAgICBnbyB0byB0aGUgbG93ZXIgdGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8oXG4gICAgeCxcbiAgICB5LFxuICAgIHJlc29sdXRpb24sXG4gICAgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSxcbiAgICBvcHRfdGlsZUNvb3JkXG4gICkge1xuICAgIGNvbnN0IHogPSB0aGlzLmdldFpGb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xuICAgIGNvbnN0IHNjYWxlID0gcmVzb2x1dGlvbiAvIHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICBjb25zdCBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICBjb25zdCB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemVfKTtcblxuICAgIGxldCB0aWxlQ29vcmRYID0gKHNjYWxlICogKHggLSBvcmlnaW5bMF0pKSAvIHJlc29sdXRpb24gLyB0aWxlU2l6ZVswXTtcbiAgICBsZXQgdGlsZUNvb3JkWSA9IChzY2FsZSAqIChvcmlnaW5bMV0gLSB5KSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMV07XG5cbiAgICBpZiAocmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSkge1xuICAgICAgdGlsZUNvb3JkWCA9IGNlaWwodGlsZUNvb3JkWCwgREVDSU1BTFMpIC0gMTtcbiAgICAgIHRpbGVDb29yZFkgPSBjZWlsKHRpbGVDb29yZFksIERFQ0lNQUxTKSAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbGVDb29yZFggPSBmbG9vcih0aWxlQ29vcmRYLCBERUNJTUFMUyk7XG4gICAgICB0aWxlQ29vcmRZID0gZmxvb3IodGlsZUNvb3JkWSwgREVDSU1BTFMpO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCh6LCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZUNvb3JkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbHRob3VnaCB0aGVyZSBpcyByZXBldGl0aW9uIGJldHdlZW4gdGhpcyBtZXRob2QgYW5kIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fYCxcbiAgICogdGhleSBzaG91bGQgaGF2ZSBzZXBhcmF0ZSBpbXBsZW1lbnRhdGlvbnMuICBUaGlzIG1ldGhvZCBpcyBmb3IgaW50ZWdlciB6b29tXG4gICAqIGxldmVscy4gIFRoZSBvdGhlciBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZvciByZXNvbHV0aW9ucyBjb3JyZXNwb25kaW5nXG4gICAqIHRvIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzLlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBNYXAgeCBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBNYXAgeSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgKiAgICAgaW50ZXJzZWN0aW9ucyBnbyB0byB0aGUgaGlnaGVyIHRpbGUgY29vcmRpbmF0ZSwgbGV0IGVkZ2UgaW50ZXJzZWN0aW9uc1xuICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRUaWxlQ29vcmRGb3JYWUFuZFpfKHgsIHksIHosIHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3ksIG9wdF90aWxlQ29vcmQpIHtcbiAgICBjb25zdCBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICBjb25zdCByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgIGNvbnN0IHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuXG4gICAgbGV0IHRpbGVDb29yZFggPSAoeCAtIG9yaWdpblswXSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMF07XG4gICAgbGV0IHRpbGVDb29yZFkgPSAob3JpZ2luWzFdIC0geSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMV07XG5cbiAgICBpZiAocmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSkge1xuICAgICAgdGlsZUNvb3JkWCA9IGNlaWwodGlsZUNvb3JkWCwgREVDSU1BTFMpIC0gMTtcbiAgICAgIHRpbGVDb29yZFkgPSBjZWlsKHRpbGVDb29yZFksIERFQ0lNQUxTKSAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRpbGVDb29yZFggPSBmbG9vcih0aWxlQ29vcmRYLCBERUNJTUFMUyk7XG4gICAgICB0aWxlQ29vcmRZID0gZmxvb3IodGlsZUNvb3JkWSwgREVDSU1BTFMpO1xuICAgIH1cblxuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCh6LCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZUNvb3JkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSB0aWxlIGNvb3JkaW5hdGUgZ2l2ZW4gYSBtYXAgY29vcmRpbmF0ZSBhbmQgem9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKGNvb3JkaW5hdGUsIHosIG9wdF90aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKFxuICAgICAgY29vcmRpbmF0ZVswXSxcbiAgICAgIGNvb3JkaW5hdGVbMV0sXG4gICAgICB6LFxuICAgICAgZmFsc2UsXG4gICAgICBvcHRfdGlsZUNvb3JkXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSByZXNvbHV0aW9uLlxuICAgKi9cbiAgZ2V0VGlsZUNvb3JkUmVzb2x1dGlvbih0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc19bdGlsZUNvb3JkWzBdXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHRpbGUgc2l6ZSBmb3IgYSB6b29tIGxldmVsLiBUaGUgdHlwZSBvZiB0aGUgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhlXG4gICAqIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgdGhhdCB0aGUgdGlsZSBncmlkIHdhcyBjb25maWd1cmVkIHdpdGguIFRvIGFsd2F5c1xuICAgKiBnZXQgYW4ge0BsaW5rIGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0sIHJ1biB0aGUgcmVzdWx0IHRocm91Z2gge0BsaW5rIG1vZHVsZTpvbC9zaXplLnRvU2l6ZX0uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gICAqIEByZXR1cm4ge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VGlsZVNpemUoeikge1xuICAgIGlmICh0aGlzLnRpbGVTaXplXykge1xuICAgICAgcmV0dXJuIHRoaXMudGlsZVNpemVfO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aWxlU2l6ZXNfW3pdO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBFeHRlbnQgdGlsZSByYW5nZSBmb3IgdGhlIHNwZWNpZmllZCB6b29tIGxldmVsLlxuICAgKi9cbiAgZ2V0RnVsbFRpbGVSYW5nZSh6KSB7XG4gICAgaWYgKCF0aGlzLmZ1bGxUaWxlUmFuZ2VzXykge1xuICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50X1xuICAgICAgICA/IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aGlzLmV4dGVudF8sIHopXG4gICAgICAgIDogbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZnVsbFRpbGVSYW5nZXNfW3pdO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW29wdF9kaXJlY3Rpb25dXG4gICAqICAgICBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICogICAgIElmIDEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIChsb3dlciBaKSB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGVcbiAgICogICAgIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvbiAoaGlnaGVyIFopIHdpbGwgYmUgdXNlZC4gRGVmYXVsdCBpcyAwLlxuICAgKiAgICAgVXNlIGEge0BsaW5rIG1vZHVsZTpvbC9hcnJheX5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IGZvciBtb3JlIHByZWNpc2UgY29udHJvbC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUgdG8gY2hhbmdlIHRpbGUgWiBhdCB0aGUgbWlkcG9pbnQgb2Ygem9vbSBsZXZlbHNcbiAgICogYGBganNcbiAgICogZnVuY3Rpb24odmFsdWUsIGhpZ2gsIGxvdykge1xuICAgKiAgIHJldHVybiB2YWx1ZSAtIGxvdyAqIE1hdGguc3FydChoaWdoIC8gbG93KTtcbiAgICogfVxuICAgKiBgYGBcbiAgICogQHJldHVybiB7bnVtYmVyfSBaLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRaRm9yUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgY29uc3QgeiA9IGxpbmVhckZpbmROZWFyZXN0KFxuICAgICAgdGhpcy5yZXNvbHV0aW9uc18sXG4gICAgICByZXNvbHV0aW9uLFxuICAgICAgb3B0X2RpcmVjdGlvbiB8fCAwXG4gICAgKTtcbiAgICByZXR1cm4gY2xhbXAoeiwgdGhpcy5taW5ab29tLCB0aGlzLm1heFpvb20pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSB0aWxlIHdpdGggdGhlIHByb3ZpZGVkIHRpbGUgY29vcmRpbmF0ZSBpbnRlcnNlY3RzIHRoZSBnaXZlbiB2aWV3cG9ydC5cbiAgICogQHBhcmFtIHtpbXBvcnQoJy4uL3RpbGVjb29yZC5qcycpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB2aWV3cG9ydCBWaWV3cG9ydCBhcyByZXR1cm5lZCBmcm9tIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50LmdldFJvdGF0ZWRWaWV3cG9ydH0uXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIHdpdGggdGhlIHByb3ZpZGVkIHRpbGUgY29vcmRpbmF0ZSBpbnRlcnNlY3RzIHRoZSBnaXZlbiB2aWV3cG9ydC5cbiAgICovXG4gIHRpbGVDb29yZEludGVyc2VjdHNWaWV3cG9ydCh0aWxlQ29vcmQsIHZpZXdwb3J0KSB7XG4gICAgcmV0dXJuIGludGVyc2VjdHNMaW5lYXJSaW5nKFxuICAgICAgdmlld3BvcnQsXG4gICAgICAwLFxuICAgICAgdmlld3BvcnQubGVuZ3RoLFxuICAgICAgMixcbiAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FsY3VsYXRlVGlsZVJhbmdlc18oZXh0ZW50KSB7XG4gICAgY29uc3QgbGVuZ3RoID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoO1xuICAgIGNvbnN0IGZ1bGxUaWxlUmFuZ2VzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yIChsZXQgeiA9IHRoaXMubWluWm9vbTsgeiA8IGxlbmd0aDsgKyt6KSB7XG4gICAgICBmdWxsVGlsZVJhbmdlc1t6XSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuICAgIH1cbiAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IGZ1bGxUaWxlUmFuZ2VzO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVHcmlkO1xuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkXG4gKi9cbmltcG9ydCBUaWxlR3JpZCBmcm9tICcuL3RpbGVncmlkL1RpbGVHcmlkLmpzJztcbmltcG9ydCB7REVGQVVMVF9NQVhfWk9PTSwgREVGQVVMVF9USUxFX1NJWkV9IGZyb20gJy4vdGlsZWdyaWQvY29tbW9uLmpzJztcbmltcG9ydCB7TUVURVJTX1BFUl9VTklULCBnZXQgYXMgZ2V0UHJvamVjdGlvbn0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7XG4gIGNvbnRhaW5zQ29vcmRpbmF0ZSxcbiAgY3JlYXRlT3JVcGRhdGUsXG4gIGdldENvcm5lcixcbiAgZ2V0SGVpZ2h0LFxuICBnZXRXaWR0aCxcbn0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHt0b1NpemV9IGZyb20gJy4vc2l6ZS5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IERlZmF1bHQgdGlsZSBncmlkIGZvciB0aGVcbiAqIHBhc3NlZCBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gIGxldCB0aWxlR3JpZCA9IHByb2plY3Rpb24uZ2V0RGVmYXVsdFRpbGVHcmlkKCk7XG4gIGlmICghdGlsZUdyaWQpIHtcbiAgICB0aWxlR3JpZCA9IGNyZWF0ZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgcHJvamVjdGlvbi5zZXREZWZhdWx0VGlsZUdyaWQodGlsZUdyaWQpO1xuICB9XG4gIHJldHVybiB0aWxlR3JpZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1RpbGVHcmlkfSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwWCh0aWxlR3JpZCwgdGlsZUNvb3JkLCBwcm9qZWN0aW9uKSB7XG4gIGNvbnN0IHogPSB0aWxlQ29vcmRbMF07XG4gIGNvbnN0IGNlbnRlciA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENlbnRlcih0aWxlQ29vcmQpO1xuICBjb25zdCBwcm9qZWN0aW9uRXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gIGlmICghY29udGFpbnNDb29yZGluYXRlKHByb2plY3Rpb25FeHRlbnQsIGNlbnRlcikpIHtcbiAgICBjb25zdCB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgY29uc3Qgd29ybGRzQXdheSA9IE1hdGguY2VpbChcbiAgICAgIChwcm9qZWN0aW9uRXh0ZW50WzBdIC0gY2VudGVyWzBdKSAvIHdvcmxkV2lkdGhcbiAgICApO1xuICAgIGNlbnRlclswXSArPSB3b3JsZFdpZHRoICogd29ybGRzQXdheTtcbiAgICByZXR1cm4gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKGNlbnRlciwgeik7XG4gIH1cbiAgcmV0dXJuIHRpbGVDb29yZDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuQ29ybmVyfSBbY29ybmVyXSBFeHRlbnQgY29ybmVyIChkZWZhdWx0IGlzIGAndG9wLWxlZnQnYCkuXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IFRpbGVHcmlkIGluc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRm9yRXh0ZW50KGV4dGVudCwgbWF4Wm9vbSwgdGlsZVNpemUsIGNvcm5lcikge1xuICBjb3JuZXIgPSBjb3JuZXIgIT09IHVuZGVmaW5lZCA/IGNvcm5lciA6ICd0b3AtbGVmdCc7XG5cbiAgY29uc3QgcmVzb2x1dGlvbnMgPSByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBtYXhab29tLCB0aWxlU2l6ZSk7XG5cbiAgcmV0dXJuIG5ldyBUaWxlR3JpZCh7XG4gICAgZXh0ZW50OiBleHRlbnQsXG4gICAgb3JpZ2luOiBnZXRDb3JuZXIoZXh0ZW50LCBjb3JuZXIpLFxuICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9ucyxcbiAgICB0aWxlU2l6ZTogdGlsZVNpemUsXG4gIH0pO1xufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFhZWk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBFeHRlbnQgZm9yIHRoZSB0aWxlIGdyaWQuIFRoZSBvcmlnaW4gZm9yIGFuIFhZWiB0aWxlIGdyaWQgaXMgdGhlXG4gKiB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgYG1heFJlc29sdXRpb25gIGlzIG5vdCBwcm92aWRlZCB0aGUgemVybyBsZXZlbCBvZiB0aGUgZ3JpZCBpcyBkZWZpbmVkIGJ5IHRoZSByZXNvbHV0aW9uXG4gKiBhdCB3aGljaCBvbmUgdGlsZSBmaXRzIGluIHRoZSBwcm92aWRlZCBleHRlbnQuIElmIG5vdCBwcm92aWRlZCwgdGhlIGV4dGVudCBvZiB0aGUgRVBTRzozODU3IHByb2plY3Rpb24gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gUmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBNYXhpbXVtIHpvb20uIFRoZSBkZWZhdWx0IGlzIGA0MmAuIFRoaXMgZGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIGxldmVsc1xuICogaW4gdGhlIGdyaWQgc2V0LiBGb3IgZXhhbXBsZSwgYSBgbWF4Wm9vbWAgb2YgMjEgbWVhbnMgdGhlcmUgYXJlIDIyIGxldmVscyBpbiB0aGUgZ3JpZCBzZXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZT1bMjU2LCAyNTZdXSBUaWxlIHNpemUgaW4gcGl4ZWxzLlxuICovXG5cbi8qKlxuICogQ3JlYXRlcyBhIHRpbGUgZ3JpZCB3aXRoIGEgc3RhbmRhcmQgWFlaIHRpbGluZyBzY2hlbWUuXG4gKiBAcGFyYW0ge1hZWk9wdGlvbnN9IFtvcHRpb25zXSBUaWxlIGdyaWQgb3B0aW9ucy5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZSBncmlkIGluc3RhbmNlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWFlaKG9wdGlvbnMpIHtcbiAgY29uc3QgeHl6T3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgY29uc3QgZXh0ZW50ID0geHl6T3B0aW9ucy5leHRlbnQgfHwgZ2V0UHJvamVjdGlvbignRVBTRzozODU3JykuZ2V0RXh0ZW50KCk7XG5cbiAgY29uc3QgZ3JpZE9wdGlvbnMgPSB7XG4gICAgZXh0ZW50OiBleHRlbnQsXG4gICAgbWluWm9vbTogeHl6T3B0aW9ucy5taW5ab29tLFxuICAgIHRpbGVTaXplOiB4eXpPcHRpb25zLnRpbGVTaXplLFxuICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9uc0Zyb21FeHRlbnQoXG4gICAgICBleHRlbnQsXG4gICAgICB4eXpPcHRpb25zLm1heFpvb20sXG4gICAgICB4eXpPcHRpb25zLnRpbGVTaXplLFxuICAgICAgeHl6T3B0aW9ucy5tYXhSZXNvbHV0aW9uXG4gICAgKSxcbiAgfTtcbiAgcmV0dXJuIG5ldyBUaWxlR3JpZChncmlkT3B0aW9ucyk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgcmVzb2x1dGlvbnMgYXJyYXkgZnJvbSBhbiBleHRlbnQuICBBIHpvb20gZmFjdG9yIG9mIDIgaXMgYXNzdW1lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFttYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemVdIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBSZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uXG4gKiBAcmV0dXJuIHshQXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMgYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIG1heFpvb20sIHRpbGVTaXplLCBtYXhSZXNvbHV0aW9uKSB7XG4gIG1heFpvb20gPSBtYXhab29tICE9PSB1bmRlZmluZWQgPyBtYXhab29tIDogREVGQVVMVF9NQVhfWk9PTTtcbiAgdGlsZVNpemUgPSB0b1NpemUodGlsZVNpemUgIT09IHVuZGVmaW5lZCA/IHRpbGVTaXplIDogREVGQVVMVF9USUxFX1NJWkUpO1xuXG4gIGNvbnN0IGhlaWdodCA9IGdldEhlaWdodChleHRlbnQpO1xuICBjb25zdCB3aWR0aCA9IGdldFdpZHRoKGV4dGVudCk7XG5cbiAgbWF4UmVzb2x1dGlvbiA9XG4gICAgbWF4UmVzb2x1dGlvbiA+IDBcbiAgICAgID8gbWF4UmVzb2x1dGlvblxuICAgICAgOiBNYXRoLm1heCh3aWR0aCAvIHRpbGVTaXplWzBdLCBoZWlnaHQgLyB0aWxlU2l6ZVsxXSk7XG5cbiAgY29uc3QgbGVuZ3RoID0gbWF4Wm9vbSArIDE7XG4gIGNvbnN0IHJlc29sdXRpb25zID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gIGZvciAobGV0IHogPSAwOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICByZXNvbHV0aW9uc1t6XSA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdygyLCB6KTtcbiAgfVxuICByZXR1cm4gcmVzb2x1dGlvbnM7XG59XG5cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuQ29ybmVyfSBbY29ybmVyXSBFeHRlbnQgY29ybmVyIChkZWZhdWx0IGlzIGAndG9wLWxlZnQnYCkuXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IFRpbGVHcmlkIGluc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uLCBtYXhab29tLCB0aWxlU2l6ZSwgY29ybmVyKSB7XG4gIGNvbnN0IGV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICByZXR1cm4gY3JlYXRlRm9yRXh0ZW50KGV4dGVudCwgbWF4Wm9vbSwgdGlsZVNpemUsIGNvcm5lcik7XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSB0aWxlIGdyaWQgZXh0ZW50IGZyb20gYSBwcm9qZWN0aW9uLiAgSWYgdGhlIHByb2plY3Rpb24gaGFzIGFuXG4gKiBleHRlbnQsIGl0IGlzIHVzZWQuICBJZiBub3QsIGEgZ2xvYmFsIGV4dGVudCBpcyBhc3N1bWVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICBwcm9qZWN0aW9uID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgbGV0IGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gIGlmICghZXh0ZW50KSB7XG4gICAgY29uc3QgaGFsZiA9XG4gICAgICAoMTgwICogTUVURVJTX1BFUl9VTklULmRlZ3JlZXMpIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGUoLWhhbGYsIC1oYWxmLCBoYWxmLCBoYWxmKTtcbiAgfVxuICByZXR1cm4gZXh0ZW50O1xufVxuIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlXG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IFNvdXJjZSBmcm9tICcuL1NvdXJjZS5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge2Fic3RyYWN0fSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7ZXF1aXZhbGVudH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQge2dldEtleVpYWSwgd2l0aGluRXh0ZW50QW5kWn0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7XG4gIGdldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLFxuICB3cmFwWCxcbn0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuaW1wb3J0IHtzY2FsZSBhcyBzY2FsZVNpemUsIHRvU2l6ZX0gZnJvbSAnLi4vc2l6ZS5qcyc7XG5cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL1RpbGVFdmVudFR5cGVcIikuVGlsZVNvdXJjZUV2ZW50VHlwZXMsIFRpbGVTb3VyY2VFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgIGltcG9ydChcIi4vVGlsZUV2ZW50VHlwZVwiKS5UaWxlU291cmNlRXZlbnRUeXBlcywgUmV0dXJuPn0gVGlsZVNvdXJjZU9uU2lnbmF0dXJlXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBDYWNoZVNpemUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW9dIFRpbGVQaXhlbFJhdGlvLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuU3RhdGV9IFtzdGF0ZV0gU3RhdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZUdyaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIFRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gS2V5LlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXSBaRGlyZWN0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9ZmFsc2VdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiB0aGUgbmVhcmVzdCBuZWlnaGJvciBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xuY2xhc3MgVGlsZVNvdXJjZSBleHRlbmRzIFNvdXJjZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgU291cmNlVGlsZSBzb3VyY2Ugb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgaW50ZXJwb2xhdGU6IG9wdGlvbnMuaW50ZXJwb2xhdGUsXG4gICAgfSk7XG5cbiAgICAvKioqXG4gICAgICogQHR5cGUge1RpbGVTb3VyY2VPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgKi9cbiAgICB0aGlzLm9uO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICovXG4gICAgdGhpcy5vbmNlO1xuXG4gICAgLyoqKlxuICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8dm9pZD59XG4gICAgICovXG4gICAgdGhpcy51bjtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5vcGFxdWVfID0gb3B0aW9ucy5vcGFxdWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3BhcXVlIDogZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy50aWxlUGl4ZWxSYXRpb18gPVxuICAgICAgb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyA6IDE7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdHxudWxsfVxuICAgICAqL1xuICAgIHRoaXMudGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVHcmlkIDogbnVsbDtcblxuICAgIGNvbnN0IHRpbGVTaXplID0gWzI1NiwgMjU2XTtcbiAgICBpZiAodGhpcy50aWxlR3JpZCkge1xuICAgICAgdG9TaXplKHRoaXMudGlsZUdyaWQuZ2V0VGlsZVNpemUodGhpcy50aWxlR3JpZC5nZXRNaW5ab29tKCkpLCB0aWxlU2l6ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVDYWNoZSA9IG5ldyBUaWxlQ2FjaGUob3B0aW9ucy5jYWNoZVNpemUgfHwgMCk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgKi9cbiAgICB0aGlzLnRtcFNpemUgPSBbMCwgMF07XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5rZXlfID0gb3B0aW9ucy5rZXkgfHwgJyc7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuT3B0aW9uc31cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVPcHRpb25zID0ge1xuICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgaW50ZXJwb2xhdGU6IG9wdGlvbnMuaW50ZXJwb2xhdGUsXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIHpEaXJlY3Rpb24gaGludCwgcmVhZCBieSB0aGUgcmVuZGVyZXIuIEluZGljYXRlcyB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlld3MgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICAgKiB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGUgbmVhcmVzdCBoaWdoZXIgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy56RGlyZWN0aW9uID0gb3B0aW9ucy56RGlyZWN0aW9uID8gb3B0aW9ucy56RGlyZWN0aW9uIDogMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgKi9cbiAgY2FuRXhwaXJlQ2FjaGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAqL1xuICBleHBpcmVDYWNoZShwcm9qZWN0aW9uLCB1c2VkVGlsZXMpIHtcbiAgICBjb25zdCB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKHRpbGVDYWNoZSkge1xuICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHVzZWRUaWxlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0KTooYm9vbGVhbnx2b2lkKX0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggZWFjaFxuICAgKiAgICAgbG9hZGVkIHRpbGUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZVxuICAgKiAgICAgY29uc2lkZXJlZCBsb2FkZWQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIHJhbmdlIGlzIGZ1bGx5IGNvdmVyZWQgd2l0aCBsb2FkZWQgdGlsZXMuXG4gICAqL1xuICBmb3JFYWNoTG9hZGVkVGlsZShwcm9qZWN0aW9uLCB6LCB0aWxlUmFuZ2UsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgdGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGlmICghdGlsZUNhY2hlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNvdmVyZWQgPSB0cnVlO1xuICAgIGxldCB0aWxlLCB0aWxlQ29vcmRLZXksIGxvYWRlZDtcbiAgICBmb3IgKGxldCB4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgZm9yIChsZXQgeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICBsb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgdGlsZSA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKFxuICAgICAgICAgICAgdGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBsb2FkZWQgPSB0aWxlLmdldFN0YXRlKCkgPT09IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgICAgaWYgKGxvYWRlZCkge1xuICAgICAgICAgICAgbG9hZGVkID0gY2FsbGJhY2sodGlsZSkgIT09IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICAgIGNvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY292ZXJlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgKi9cbiAgZ2V0R3V0dGVyRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBrZXkgdG8gYmUgdXNlZCBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGtleSBmb3IgYWxsIHRpbGVzLlxuICAgKi9cbiAgZ2V0S2V5KCkge1xuICAgIHJldHVybiB0aGlzLmtleV87XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSB0byBiZSB1c2VkIGFzIHRoZSBrZXkgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgZm9yIHRpbGVzLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICBzZXRLZXkoa2V5KSB7XG4gICAgaWYgKHRoaXMua2V5XyAhPT0ga2V5KSB7XG4gICAgICB0aGlzLmtleV8gPSBrZXk7XG4gICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBPcGFxdWUuXG4gICAqL1xuICBnZXRPcGFxdWUocHJvamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLm9wYXF1ZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb25cIikuZGVmYXVsdH0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58bnVsbH0gUmVzb2x1dGlvbnMuXG4gICAqL1xuICBnZXRSZXNvbHV0aW9ucyhwcm9qZWN0aW9uKSB7XG4gICAgY29uc3QgdGlsZUdyaWQgPSBwcm9qZWN0aW9uXG4gICAgICA/IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pXG4gICAgICA6IHRoaXMudGlsZUdyaWQ7XG4gICAgaWYgKCF0aWxlR3JpZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aWxlR3JpZC5nZXRSZXNvbHV0aW9ucygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgKi9cbiAgZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSB0aWxlIGdyaWQgb2YgdGhlIHRpbGUgc291cmNlLlxuICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fG51bGx9IFRpbGUgZ3JpZC5cbiAgICogQGFwaVxuICAgKi9cbiAgZ2V0VGlsZUdyaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgKi9cbiAgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICBpZiAoIXRoaXMudGlsZUdyaWQpIHtcbiAgICAgIHJldHVybiBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRpbGVHcmlkO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZUNhY2hlLmpzXCIpLmRlZmF1bHR9IFRpbGUgY2FjaGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGNvbnN0IHNvdXJjZVByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICBhc3NlcnQoXG4gICAgICBzb3VyY2VQcm9qZWN0aW9uID09PSBudWxsIHx8IGVxdWl2YWxlbnQoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbiksXG4gICAgICA2OCAvLyBBIFZlY3RvclRpbGUgc291cmNlIGNhbiBvbmx5IGJlIHJlbmRlcmVkIGlmIGl0IGhhcyBhIHByb2plY3Rpb24gY29tcGF0aWJsZSB3aXRoIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgKTtcbiAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGU7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSB0aWxlIHBpeGVsIHJhdGlvIGZvciB0aGlzIHNvdXJjZS4gU3ViY2xhc3NlcyBtYXkgb3ZlcnJpZGUgdGhpc1xuICAgKiBtZXRob2QsIHdoaWNoIGlzIG1lYW50IHRvIHJldHVybiBhIHN1cHBvcnRlZCBwaXhlbCByYXRpbyB0aGF0IG1hdGNoZXMgdGhlXG4gICAqIHByb3ZpZGVkIGBwaXhlbFJhdGlvYCBhcyBjbG9zZSBhcyBwb3NzaWJsZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwaXhlbCByYXRpby5cbiAgICovXG4gIGdldFRpbGVQaXhlbFJhdGlvKHBpeGVsUmF0aW8pIHtcbiAgICByZXR1cm4gdGhpcy50aWxlUGl4ZWxSYXRpb187XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBUaWxlIHNpemUuXG4gICAqL1xuICBnZXRUaWxlUGl4ZWxTaXplKHosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICBjb25zdCB0aWxlR3JpZCA9IHRoaXMuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGNvbnN0IHRpbGVQaXhlbFJhdGlvID0gdGhpcy5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICBjb25zdCB0aWxlU2l6ZSA9IHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplKTtcbiAgICBpZiAodGlsZVBpeGVsUmF0aW8gPT0gMSkge1xuICAgICAgcmV0dXJuIHRpbGVTaXplO1xuICAgIH1cbiAgICByZXR1cm4gc2NhbGVTaXplKHRpbGVTaXplLCB0aWxlUGl4ZWxSYXRpbywgdGhpcy50bXBTaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdGlsZSBjb29yZGluYXRlIHdyYXBwZWQgYXJvdW5kIHRoZSB4LWF4aXMuIFdoZW4gdGhlIHRpbGUgY29vcmRpbmF0ZVxuICAgKiBpcyBvdXRzaWRlIHRoZSByZXNvbHV0aW9uIGFuZCBleHRlbnQgcmFuZ2Ugb2YgdGhlIHRpbGUgZ3JpZCwgYG51bGxgIHdpbGwgYmVcbiAgICogcmV0dXJuZWQuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZSB0byBiZSBwYXNzZWQgdG8gdGhlIHRpbGVVcmxGdW5jdGlvbiBvclxuICAgKiAgICAgbnVsbCBpZiBubyB0aWxlIFVSTCBzaG91bGQgYmUgY3JlYXRlZCBmb3IgdGhlIHBhc3NlZCBgdGlsZUNvb3JkYC5cbiAgICovXG4gIGdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pIHtcbiAgICBwcm9qZWN0aW9uID0gcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gcHJvamVjdGlvbiA6IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgIGNvbnN0IHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKHRoaXMuZ2V0V3JhcFgoKSAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgIHRpbGVDb29yZCA9IHdyYXBYKHRpbGVHcmlkLCB0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgIH1cbiAgICByZXR1cm4gd2l0aGluRXh0ZW50QW5kWih0aWxlQ29vcmQsIHRpbGVHcmlkKSA/IHRpbGVDb29yZCA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIGFsbCBjYWNoZWQgdGlsZXMgZnJvbSB0aGUgc291cmNlLiBUaGUgbmV4dCByZW5kZXIgY3ljbGUgd2lsbCBmZXRjaCBuZXcgdGlsZXMuXG4gICAqIEBhcGlcbiAgICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMudGlsZUNhY2hlLmNsZWFyKCk7XG4gIH1cblxuICByZWZyZXNoKCkge1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgICBzdXBlci5yZWZyZXNoKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5jcmVhc2VzIHRoZSBjYWNoZSBzaXplIGlmIG5lZWRlZFxuICAgKiBAcGFyYW0ge251bWJlcn0gdGlsZUNvdW50IE1pbmltdW0gbnVtYmVyIG9mIHRpbGVzIG5lZWRlZC5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKi9cbiAgdXBkYXRlQ2FjaGVTaXplKHRpbGVDb3VudCwgcHJvamVjdGlvbikge1xuICAgIGNvbnN0IHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBpZiAodGlsZUNvdW50ID4gdGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspIHtcbiAgICAgIHRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrID0gdGlsZUNvdW50O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrcyBhIHRpbGUgY29vcmQgYXMgYmVpbmcgdXNlZCwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgbG9hZC5cbiAgICogQGFic3RyYWN0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICovXG4gIHVzZVRpbGUoeiwgeCwgeSwgcHJvamVjdGlvbikge31cbn1cblxuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGVTb3VyY2V9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXNcbiAqIHR5cGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBUaWxlU291cmNlRXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaGUgdGlsZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIHRpbGUpIHtcbiAgICBzdXBlcih0eXBlKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSB0aWxlIHJlbGF0ZWQgdG8gdGhlIGV2ZW50LlxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIHRoaXMudGlsZSA9IHRpbGU7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVGlsZVNvdXJjZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxldXJsZnVuY3Rpb25cbiAqL1xuaW1wb3J0IHthc3NlcnR9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQge21vZHVsb30gZnJvbSAnLi9tYXRoLmpzJztcbmltcG9ydCB7aGFzaCBhcyB0aWxlQ29vcmRIYXNofSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRlbXBsYXRlIFRlbXBsYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGUsIHRpbGVHcmlkKSB7XG4gIGNvbnN0IHpSZWdFeCA9IC9cXHt6XFx9L2c7XG4gIGNvbnN0IHhSZWdFeCA9IC9cXHt4XFx9L2c7XG4gIGNvbnN0IHlSZWdFeCA9IC9cXHt5XFx9L2c7XG4gIGNvbnN0IGRhc2hZUmVnRXggPSAvXFx7LXlcXH0vZztcbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAgIC5yZXBsYWNlKHpSZWdFeCwgdGlsZUNvb3JkWzBdLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKHhSZWdFeCwgdGlsZUNvb3JkWzFdLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKHlSZWdFeCwgdGlsZUNvb3JkWzJdLnRvU3RyaW5nKCkpXG4gICAgICAgIC5yZXBsYWNlKGRhc2hZUmVnRXgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICAgIGNvbnN0IHJhbmdlID0gdGlsZUdyaWQuZ2V0RnVsbFRpbGVSYW5nZSh6KTtcbiAgICAgICAgICBhc3NlcnQocmFuZ2UsIDU1KTsgLy8gVGhlIHsteX0gcGxhY2Vob2xkZXIgcmVxdWlyZXMgYSB0aWxlIGdyaWQgd2l0aCBleHRlbnRcbiAgICAgICAgICBjb25zdCB5ID0gcmFuZ2UuZ2V0SGVpZ2h0KCkgLSB0aWxlQ29vcmRbMl0gLSAxO1xuICAgICAgICAgIHJldHVybiB5LnRvU3RyaW5nKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHRlbXBsYXRlcyBUZW1wbGF0ZXMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZXModGVtcGxhdGVzLCB0aWxlR3JpZCkge1xuICBjb25zdCBsZW4gPSB0ZW1wbGF0ZXMubGVuZ3RoO1xuICBjb25zdCB0aWxlVXJsRnVuY3Rpb25zID0gbmV3IEFycmF5KGxlbik7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICB0aWxlVXJsRnVuY3Rpb25zW2ldID0gY3JlYXRlRnJvbVRlbXBsYXRlKHRlbXBsYXRlc1tpXSwgdGlsZUdyaWQpO1xuICB9XG4gIHJldHVybiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbj59IHRpbGVVcmxGdW5jdGlvbnMgVGlsZSBVUkwgRnVuY3Rpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zKHRpbGVVcmxGdW5jdGlvbnMpIHtcbiAgaWYgKHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbMF07XG4gIH1cbiAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgY29uc3QgaCA9IHRpbGVDb29yZEhhc2godGlsZUNvb3JkKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gbW9kdWxvKGgsIHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoKTtcbiAgICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zW2luZGV4XSh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgIH1cbiAgKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bGxUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBcnJheSBvZiB1cmxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVXJsKHVybCkge1xuICBjb25zdCB1cmxzID0gW107XG4gIGxldCBtYXRjaCA9IC9cXHsoW2Etel0pLShbYS16XSlcXH0vLmV4ZWModXJsKTtcbiAgaWYgKG1hdGNoKSB7XG4gICAgLy8gY2hhciByYW5nZVxuICAgIGNvbnN0IHN0YXJ0Q2hhckNvZGUgPSBtYXRjaFsxXS5jaGFyQ29kZUF0KDApO1xuICAgIGNvbnN0IHN0b3BDaGFyQ29kZSA9IG1hdGNoWzJdLmNoYXJDb2RlQXQoMCk7XG4gICAgbGV0IGNoYXJDb2RlO1xuICAgIGZvciAoY2hhckNvZGUgPSBzdGFydENoYXJDb2RlOyBjaGFyQ29kZSA8PSBzdG9wQ2hhckNvZGU7ICsrY2hhckNvZGUpIHtcbiAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHVybHM7XG4gIH1cbiAgbWF0Y2ggPSAvXFx7KFxcZCspLShcXGQrKVxcfS8uZXhlYyh1cmwpO1xuICBpZiAobWF0Y2gpIHtcbiAgICAvLyBudW1iZXIgcmFuZ2VcbiAgICBjb25zdCBzdG9wID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICBmb3IgKGxldCBpID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTsgaSA8PSBzdG9wOyBpKyspIHtcbiAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgaS50b1N0cmluZygpKSk7XG4gICAgfVxuICAgIHJldHVybiB1cmxzO1xuICB9XG4gIHVybHMucHVzaCh1cmwpO1xuICByZXR1cm4gdXJscztcbn1cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVXJsVGlsZVxuICovXG5pbXBvcnQgVGlsZUV2ZW50VHlwZSBmcm9tICcuL1RpbGVFdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGVTb3VyY2UsIHtUaWxlU291cmNlRXZlbnR9IGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQge2NyZWF0ZUZyb21UZW1wbGF0ZXMsIGV4cGFuZFVybH0gZnJvbSAnLi4vdGlsZXVybGZ1bmN0aW9uLmpzJztcbmltcG9ydCB7Z2V0S2V5WlhZfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIENhY2hlIHNpemUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLlN0YXRlfSBbc3RhdGVdIFN0YXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGVHcmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvbiBUaWxlTG9hZEZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb10gVGlsZVBpeGVsUmF0aW8uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIFRpbGVVcmxGdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVcmwuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBVcmxzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIFRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gS2V5LlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXSBaRGlyZWN0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9ZmFsc2VdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiB0aGUgbmVhcmVzdCBuZWlnaGJvciBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIHRpbGVzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZCBvdmVyIGh0dHAuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqL1xuY2xhc3MgVXJsVGlsZSBleHRlbmRzIFRpbGVTb3VyY2Uge1xuICAvKipcbiAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIEltYWdlIHRpbGUgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgIGludGVycG9sYXRlOiBvcHRpb25zLmludGVycG9sYXRlLFxuICAgICAga2V5OiBvcHRpb25zLmtleSxcbiAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgekRpcmVjdGlvbjogb3B0aW9ucy56RGlyZWN0aW9uLFxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLmdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyA9XG4gICAgICB0aGlzLnRpbGVVcmxGdW5jdGlvbiA9PT0gVXJsVGlsZS5wcm90b3R5cGUudGlsZVVybEZ1bmN0aW9uO1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb247XG5cbiAgICBpZiAob3B0aW9ucy50aWxlVXJsRnVuY3Rpb24pIHtcbiAgICAgIHRoaXMudGlsZVVybEZ1bmN0aW9uID0gb3B0aW9ucy50aWxlVXJsRnVuY3Rpb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHshQXJyYXk8c3RyaW5nPnxudWxsfVxuICAgICAqL1xuICAgIHRoaXMudXJscyA9IG51bGw7XG5cbiAgICBpZiAob3B0aW9ucy51cmxzKSB7XG4gICAgICB0aGlzLnNldFVybHMob3B0aW9ucy51cmxzKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMudXJsKSB7XG4gICAgICB0aGlzLnNldFVybChvcHRpb25zLnVybCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUxvYWRpbmdLZXlzXyA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgdGlsZSBsb2FkIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBUaWxlTG9hZEZ1bmN0aW9uXG4gICAqIEBhcGlcbiAgICovXG4gIGdldFRpbGVMb2FkRnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudGlsZUxvYWRGdW5jdGlvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGVVcmxGdW5jdGlvblxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRUaWxlVXJsRnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS50aWxlVXJsRnVuY3Rpb24gPT09IHRoaXMudGlsZVVybEZ1bmN0aW9uXG4gICAgICA/IHRoaXMudGlsZVVybEZ1bmN0aW9uLmJpbmQodGhpcylcbiAgICAgIDogdGhpcy50aWxlVXJsRnVuY3Rpb247XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBVUkxzIHVzZWQgZm9yIHRoaXMgc291cmNlLlxuICAgKiBXaGVuIGEgdGlsZVVybEZ1bmN0aW9uIGlzIHVzZWQgaW5zdGVhZCBvZiB1cmwgb3IgdXJscyxcbiAgICogbnVsbCB3aWxsIGJlIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPnxudWxsfSBVUkxzLlxuICAgKiBAYXBpXG4gICAqL1xuICBnZXRVcmxzKCkge1xuICAgIHJldHVybiB0aGlzLnVybHM7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRpbGUgY2hhbmdlIGV2ZW50cy5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGhhbmRsZVRpbGVDaGFuZ2UoZXZlbnQpIHtcbiAgICBjb25zdCB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgIGNvbnN0IHVpZCA9IGdldFVpZCh0aWxlKTtcbiAgICBjb25zdCB0aWxlU3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgbGV0IHR5cGU7XG4gICAgaWYgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgdGhpcy50aWxlTG9hZGluZ0tleXNfW3VpZF0gPSB0cnVlO1xuICAgICAgdHlwZSA9IFRpbGVFdmVudFR5cGUuVElMRUxPQURTVEFSVDtcbiAgICB9IGVsc2UgaWYgKHVpZCBpbiB0aGlzLnRpbGVMb2FkaW5nS2V5c18pIHtcbiAgICAgIGRlbGV0ZSB0aGlzLnRpbGVMb2FkaW5nS2V5c19bdWlkXTtcbiAgICAgIHR5cGUgPVxuICAgICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SXG4gICAgICAgICAgPyBUaWxlRXZlbnRUeXBlLlRJTEVMT0FERVJST1JcbiAgICAgICAgICA6IHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEXG4gICAgICAgICAgPyBUaWxlRXZlbnRUeXBlLlRJTEVMT0FERU5EXG4gICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0eXBlICE9IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGUgbG9hZCBmdW5jdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGlsZUxvYWRGdW5jdGlvbih0aWxlTG9hZEZ1bmN0aW9uKSB7XG4gICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb24gPSB0aWxlTG9hZEZ1bmN0aW9uO1xuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdGlsZSBVUkwgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSB0aWxlVXJsRnVuY3Rpb24gVGlsZSBVUkwgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBba2V5XSBPcHRpb25hbCBuZXcgdGlsZSBrZXkgZm9yIHRoZSBzb3VyY2UuXG4gICAqIEBhcGlcbiAgICovXG4gIHNldFRpbGVVcmxGdW5jdGlvbih0aWxlVXJsRnVuY3Rpb24sIGtleSkge1xuICAgIHRoaXMudGlsZVVybEZ1bmN0aW9uID0gdGlsZVVybEZ1bmN0aW9uO1xuICAgIHRoaXMudGlsZUNhY2hlLnBydW5lRXhjZXB0TmV3ZXN0WigpO1xuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5zZXRLZXkoa2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgVVJMIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRVcmwodXJsKSB7XG4gICAgY29uc3QgdXJscyA9IGV4cGFuZFVybCh1cmwpO1xuICAgIHRoaXMudXJscyA9IHVybHM7XG4gICAgdGhpcy5zZXRVcmxzKHVybHMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgVVJMcyB0byB1c2UgZm9yIHJlcXVlc3RzLlxuICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHVybHMgVVJMcy5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VXJscyh1cmxzKSB7XG4gICAgdGhpcy51cmxzID0gdXJscztcbiAgICBjb25zdCBrZXkgPSB1cmxzLmpvaW4oJ1xcbicpO1xuICAgIGlmICh0aGlzLmdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXykge1xuICAgICAgdGhpcy5zZXRUaWxlVXJsRnVuY3Rpb24oY3JlYXRlRnJvbVRlbXBsYXRlcyh1cmxzLCB0aGlzLnRpbGVHcmlkKSwga2V5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRLZXkoa2V5KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICovXG4gIHRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgKi9cbiAgdXNlVGlsZSh6LCB4LCB5KSB7XG4gICAgY29uc3QgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgIGlmICh0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICB0aGlzLnRpbGVDYWNoZS5nZXQodGlsZUNvb3JkS2V5KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXJsVGlsZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZUV2ZW50VHlwZVxuICovXG5cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSB0aWxlIHN0YXJ0cyBsb2FkaW5nLlxuICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZHN0YXJ0XG4gICAqIEBhcGlcbiAgICovXG4gIFRJTEVMT0FEU1RBUlQ6ICd0aWxlbG9hZHN0YXJ0JyxcblxuICAvKipcbiAgICogVHJpZ2dlcmVkIHdoZW4gYSB0aWxlIGZpbmlzaGVzIGxvYWRpbmcsIGVpdGhlciB3aGVuIGl0cyBkYXRhIGlzIGxvYWRlZCxcbiAgICogb3Igd2hlbiBsb2FkaW5nIHdhcyBhYm9ydGVkIGJlY2F1c2UgdGhlIHRpbGUgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlbmRcbiAgICogQGFwaVxuICAgKi9cbiAgVElMRUxPQURFTkQ6ICd0aWxlbG9hZGVuZCcsXG5cbiAgLyoqXG4gICAqIFRyaWdnZXJlZCBpZiB0aWxlIGxvYWRpbmcgcmVzdWx0cyBpbiBhbiBlcnJvci4gTm90ZSB0aGF0IHRoaXMgaXMgbm90IHRoZVxuICAgKiByaWdodCBwbGFjZSB0byByZS1mZXRjaCB0aWxlcy4gU2VlIHtAbGluayBtb2R1bGU6b2wvSW1hZ2VUaWxlfkltYWdlVGlsZSNsb2FkfVxuICAgKiBmb3IgZGV0YWlscy5cbiAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlcnJvclxuICAgKiBAYXBpXG4gICAqL1xuICBUSUxFTE9BREVSUk9SOiAndGlsZWxvYWRlcnJvcicsXG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHsndGlsZWxvYWRzdGFydCd8J3RpbGVsb2FkZW5kJ3wndGlsZWxvYWRlcnJvcid9IFRpbGVTb3VyY2VFdmVudFR5cGVzXG4gKi9cbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZUltYWdlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VUaWxlIGZyb20gJy4uL0ltYWdlVGlsZS5qcyc7XG5pbXBvcnQgUmVwcm9qVGlsZSBmcm9tICcuLi9yZXByb2ovVGlsZS5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVXJsVGlsZSBmcm9tICcuL1VybFRpbGUuanMnO1xuaW1wb3J0IHtlcXVpdmFsZW50LCBnZXQgYXMgZ2V0UHJvamVjdGlvbn0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQge2dldEtleSwgZ2V0S2V5WlhZfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHtnZXRGb3JQcm9qZWN0aW9uIGFzIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbn0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuaW1wb3J0IHtnZXRVaWR9IGZyb20gJy4uL3V0aWwuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIEluaXRpYWwgdGlsZSBjYWNoZSBzaXplLiBXaWxsIGF1dG8tZ3JvdyB0byBob2xkIGF0IGxlYXN0IHRoZSBudW1iZXIgb2YgdGlsZXMgaW4gdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZT10cnVlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogbGluZWFyIGludGVycG9sYXRpb24gaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuICBTZXQgdG8gZmFsc2UgdG8gdXNlIHRoZSBuZWFyZXN0IG5laWdoYm9yIGluc3RlYWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ9MC41XSBNYXhpbXVtIGFsbG93ZWQgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBwaXhlbHMpLlxuICogSGlnaGVyIHZhbHVlcyBjYW4gaW5jcmVhc2UgcmVwcm9qZWN0aW9uIHBlcmZvcm1hbmNlLCBidXQgZGVjcmVhc2UgcHJlY2lzaW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5TdGF0ZX0gW3N0YXRlXSBTb3VyY2Ugc3RhdGUuXG4gKiBAcHJvcGVydHkge3R5cGVvZiBpbXBvcnQoXCIuLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gW3RpbGVDbGFzc10gQ2xhc3MgdXNlZCB0byBpbnN0YW50aWF0ZSBpbWFnZSB0aWxlcy5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9JbWFnZVRpbGV+SW1hZ2VUaWxlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlIGdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBbdGlsZUxvYWRGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9hZCBhIHRpbGUgZ2l2ZW4gYSBVUkwuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAqICAgaW1hZ2VUaWxlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogfTtcbiAqIGBgYFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpbz0xXSBUaGUgcGl4ZWwgcmF0aW8gdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGVcbiAqIHNlcnZpY2UgYWR2ZXJ0aXplcyAyNTZweCBieSAyNTZweCB0aWxlcyBidXQgYWN0dWFsbHkgc2VuZHMgNTEycHhcbiAqIGJ5IDUxMnB4IGltYWdlcyAoZm9yIHJldGluYS9oaWRwaSBkZXZpY2VzKSB0aGVuIGB0aWxlUGl4ZWxSYXRpb2BcbiAqIHNob3VsZCBiZSBzZXQgdG8gYDJgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBbdGlsZVVybEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBnZXQgdGlsZSBVUkwgZ2l2ZW4gYSB0aWxlIGNvb3JkaW5hdGUgYW5kIHRoZSBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVSTCB0ZW1wbGF0ZS4gTXVzdCBpbmNsdWRlIGB7eH1gLCBge3l9YCBvciBgey15fWAsIGFuZCBge3p9YCBwbGFjZWhvbGRlcnMuXG4gKiBBIGB7Py0/fWAgdGVtcGxhdGUgcGF0dGVybiwgZm9yIGV4YW1wbGUgYHN1YmRvbWFpbnthLWZ9LmRvbWFpbi5jb21gLCBtYXkgYmVcbiAqIHVzZWQgaW5zdGVhZCBvZiBkZWZpbmluZyBlYWNoIG9uZSBzZXBhcmF0ZWx5IGluIHRoZSBgdXJsc2Agb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc10gQW4gYXJyYXkgb2YgVVJMIHRlbXBsYXRlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS4gVGhlIGRlZmF1bHQsIGlzIHRvXG4gKiByZXF1ZXN0IG91dC1vZi1ib3VuZHMgdGlsZXMgZnJvbSB0aGUgc2VydmVyLiBXaGVuIHNldCB0byBgZmFsc2VgLCBvbmx5IG9uZVxuICogd29ybGQgd2lsbCBiZSByZW5kZXJlZC4gV2hlbiBzZXQgdG8gYHRydWVgLCB0aWxlcyB3aWxsIGJlIHJlcXVlc3RlZCBmb3Igb25lXG4gKiB3b3JsZCBvbmx5LCBidXQgdGhleSB3aWxsIGJlIHdyYXBwZWQgaG9yaXpvbnRhbGx5IHRvIHJlbmRlciBtdWx0aXBsZSB3b3JsZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gT3B0aW9uYWwgdGlsZSBrZXkgZm9yIHByb3BlciBjYWNoZSBmZXRjaGluZ1xuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXVxuICogQ2hvb3NlIHdoZXRoZXIgdG8gdXNlIHRpbGVzIHdpdGggYSBoaWdoZXIgb3IgbG93ZXIgem9vbSBsZXZlbCB3aGVuIGJldHdlZW4gaW50ZWdlclxuICogem9vbSBsZXZlbHMuIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3RpbGVncmlkL1RpbGVHcmlkflRpbGVHcmlkI2dldFpGb3JSZXNvbHV0aW9ufS5cbiAqL1xuXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqIEBhcGlcbiAqL1xuY2xhc3MgVGlsZUltYWdlIGV4dGVuZHMgVXJsVGlsZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFPcHRpb25zfSBvcHRpb25zIEltYWdlIHRpbGUgb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcih7XG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uXG4gICAgICAgID8gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uXG4gICAgICAgIDogZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICBpbnRlcnBvbGF0ZTpcbiAgICAgICAgb3B0aW9ucy5pbnRlcnBvbGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5pbnRlcnBvbGF0ZSA6IHRydWUsXG4gICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICovXG4gICAgdGhpcy5jcm9zc09yaWdpbiA9XG4gICAgICBvcHRpb25zLmNyb3NzT3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNyb3NzT3JpZ2luIDogbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAdHlwZSB7dHlwZW9mIEltYWdlVGlsZX1cbiAgICAgKi9cbiAgICB0aGlzLnRpbGVDbGFzcyA9XG4gICAgICBvcHRpb25zLnRpbGVDbGFzcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlQ2xhc3MgOiBJbWFnZVRpbGU7XG5cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBUaWxlQ2FjaGU+fVxuICAgICAqL1xuICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdD59XG4gICAgICovXG4gICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICovXG4gICAgdGhpcy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZF8gPSBvcHRpb25zLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkO1xuXG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAqL1xuICBjYW5FeHBpcmVDYWNoZSgpIHtcbiAgICBpZiAodGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgaWYgKHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltrZXldLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgKi9cbiAgZXhwaXJlQ2FjaGUocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgY29uc3QgdXNlZFRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcblxuICAgIHRoaXMudGlsZUNhY2hlLmV4cGlyZUNhY2hlKFxuICAgICAgdGhpcy50aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9XG4gICAgKTtcbiAgICBmb3IgKGNvbnN0IGlkIGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgY29uc3QgdGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXTtcbiAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aWxlQ2FjaGUgPT0gdXNlZFRpbGVDYWNoZSA/IHVzZWRUaWxlcyA6IHt9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICovXG4gIGdldEd1dHRlckZvclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ2V0UHJvamVjdGlvbigpICYmXG4gICAgICBwcm9qZWN0aW9uICYmXG4gICAgICAhZXF1aXZhbGVudCh0aGlzLmdldFByb2plY3Rpb24oKSwgcHJvamVjdGlvbilcbiAgICApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRHdXR0ZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICovXG4gIGdldEd1dHRlcigpIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAqL1xuICBnZXRLZXkoKSB7XG4gICAgbGV0IGtleSA9IHN1cGVyLmdldEtleSgpO1xuICAgIGlmICghdGhpcy5nZXRJbnRlcnBvbGF0ZSgpKSB7XG4gICAgICBrZXkgKz0gJzpkaXNhYmxlLWludGVycG9sYXRpb24nO1xuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gT3BhcXVlLlxuICAgKi9cbiAgZ2V0T3BhcXVlKHByb2plY3Rpb24pIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmdldFByb2plY3Rpb24oKSAmJlxuICAgICAgcHJvamVjdGlvbiAmJlxuICAgICAgIWVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5nZXRPcGFxdWUocHJvamVjdGlvbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgKi9cbiAgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICBjb25zdCB0aGlzUHJvaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgIGlmICh0aGlzLnRpbGVHcmlkICYmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpKSB7XG4gICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICB9XG4gICAgY29uc3QgcHJvaktleSA9IGdldFVpZChwcm9qZWN0aW9uKTtcbiAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb25bcHJvaktleV0gPVxuICAgICAgICBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgKi9cbiAgZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgY29uc3QgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICBpZiAoIXRoaXNQcm9qIHx8IGVxdWl2YWxlbnQodGhpc1Byb2osIHByb2plY3Rpb24pKSB7XG4gICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGU7XG4gICAgfVxuICAgIGNvbnN0IHByb2pLZXkgPSBnZXRVaWQocHJvamVjdGlvbik7XG4gICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pKSB7XG4gICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV0gPSBuZXcgVGlsZUNhY2hlKFxuICAgICAgICB0aGlzLnRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW3Byb2pLZXldO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBzZXQgb24gdGhlIHRpbGUuXG4gICAqIEByZXR1cm4geyFJbWFnZVRpbGV9IFRpbGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpIHtcbiAgICBjb25zdCB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgY29uc3QgdXJsVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24oXG4gICAgICB0aWxlQ29vcmQsXG4gICAgICBwcm9qZWN0aW9uXG4gICAgKTtcbiAgICBjb25zdCB0aWxlVXJsID0gdXJsVGlsZUNvb3JkXG4gICAgICA/IHRoaXMudGlsZVVybEZ1bmN0aW9uKHVybFRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbilcbiAgICAgIDogdW5kZWZpbmVkO1xuICAgIGNvbnN0IHRpbGUgPSBuZXcgdGhpcy50aWxlQ2xhc3MoXG4gICAgICB0aWxlQ29vcmQsXG4gICAgICB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyBUaWxlU3RhdGUuSURMRSA6IFRpbGVTdGF0ZS5FTVBUWSxcbiAgICAgIHRpbGVVcmwgIT09IHVuZGVmaW5lZCA/IHRpbGVVcmwgOiAnJyxcbiAgICAgIHRoaXMuY3Jvc3NPcmlnaW4sXG4gICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICB0aGlzLnRpbGVPcHRpb25zXG4gICAgKTtcbiAgICB0aWxlLmtleSA9IGtleTtcbiAgICB0aWxlLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVUaWxlQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgIHJldHVybiB0aWxlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4geyEoSW1hZ2VUaWxlfFJlcHJvalRpbGUpfSBUaWxlLlxuICAgKi9cbiAgZ2V0VGlsZSh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgY29uc3Qgc291cmNlUHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgIGlmIChcbiAgICAgICFzb3VyY2VQcm9qZWN0aW9uIHx8XG4gICAgICAhcHJvamVjdGlvbiB8fFxuICAgICAgZXF1aXZhbGVudChzb3VyY2VQcm9qZWN0aW9uLCBwcm9qZWN0aW9uKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUludGVybmFsKFxuICAgICAgICB6LFxuICAgICAgICB4LFxuICAgICAgICB5LFxuICAgICAgICBwaXhlbFJhdGlvLFxuICAgICAgICBzb3VyY2VQcm9qZWN0aW9uIHx8IHByb2plY3Rpb25cbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGNvbnN0IHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICBsZXQgdGlsZTtcbiAgICBjb25zdCB0aWxlQ29vcmRLZXkgPSBnZXRLZXkodGlsZUNvb3JkKTtcbiAgICBpZiAoY2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgdGlsZSA9IGNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgIH1cbiAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleSgpO1xuICAgIGlmICh0aWxlICYmIHRpbGUua2V5ID09IGtleSkge1xuICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfVxuICAgIGNvbnN0IHNvdXJjZVRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oc291cmNlUHJvamVjdGlvbik7XG4gICAgY29uc3QgdGFyZ2V0VGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICBjb25zdCB3cmFwcGVkVGlsZUNvb3JkID0gdGhpcy5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24oXG4gICAgICB0aWxlQ29vcmQsXG4gICAgICBwcm9qZWN0aW9uXG4gICAgKTtcbiAgICBjb25zdCBuZXdUaWxlID0gbmV3IFJlcHJvalRpbGUoXG4gICAgICBzb3VyY2VQcm9qZWN0aW9uLFxuICAgICAgc291cmNlVGlsZUdyaWQsXG4gICAgICBwcm9qZWN0aW9uLFxuICAgICAgdGFyZ2V0VGlsZUdyaWQsXG4gICAgICB0aWxlQ29vcmQsXG4gICAgICB3cmFwcGVkVGlsZUNvb3JkLFxuICAgICAgdGhpcy5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKSxcbiAgICAgIHRoaXMuZ2V0R3V0dGVyKCksXG4gICAgICAoeiwgeCwgeSwgcGl4ZWxSYXRpbykgPT5cbiAgICAgICAgdGhpcy5nZXRUaWxlSW50ZXJuYWwoeiwgeCwgeSwgcGl4ZWxSYXRpbywgc291cmNlUHJvamVjdGlvbiksXG4gICAgICB0aGlzLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkXyxcbiAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfLFxuICAgICAgdGhpcy5nZXRJbnRlcnBvbGF0ZSgpXG4gICAgKTtcbiAgICBuZXdUaWxlLmtleSA9IGtleTtcblxuICAgIGlmICh0aWxlKSB7XG4gICAgICBuZXdUaWxlLmludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgIG5ld1RpbGUucmVmcmVzaEludGVyaW1DaGFpbigpO1xuICAgICAgY2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWNoZS5zZXQodGlsZUNvb3JkS2V5LCBuZXdUaWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1RpbGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAqIEByZXR1cm4geyFJbWFnZVRpbGV9IFRpbGUuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgbGV0IHRpbGUgPSBudWxsO1xuICAgIGNvbnN0IHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleSgpO1xuICAgIGlmICghdGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgIHRoaXMudGlsZUNhY2hlLnNldCh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aWxlID0gdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICBpZiAodGlsZS5rZXkgIT0ga2V5KSB7XG4gICAgICAgIC8vIFRoZSBzb3VyY2UncyBwYXJhbXMgY2hhbmdlZC4gSWYgdGhlIHRpbGUgaGFzIGFuIGludGVyaW0gdGlsZSBhbmQgaWYgd2VcbiAgICAgICAgLy8gY2FuIHVzZSBpdCB0aGVuIHdlIHVzZSBpdC4gT3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyB0aWxlLiAgSW4gYm90aFxuICAgICAgICAvLyBjYXNlcyB3ZSBhdHRlbXB0IHRvIGFzc2lnbiBhbiBpbnRlcmltIHRpbGUgdG8gdGhlIG5ldyB0aWxlLlxuICAgICAgICBjb25zdCBpbnRlcmltVGlsZSA9IHRpbGU7XG4gICAgICAgIHRpbGUgPSB0aGlzLmNyZWF0ZVRpbGVfKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSk7XG5cbiAgICAgICAgLy9tYWtlIHRoZSBuZXcgdGlsZSB0aGUgaGVhZCBvZiB0aGUgbGlzdCxcbiAgICAgICAgaWYgKGludGVyaW1UaWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAvL3RoZSBvbGQgdGlsZSBoYXNuJ3QgYmVndW4gbG9hZGluZyB5ZXQsIGFuZCBpcyBub3cgb3V0ZGF0ZWQsIHNvIHdlIGNhbiBzaW1wbHkgZGlzY2FyZCBpdFxuICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gaW50ZXJpbVRpbGU7XG4gICAgICAgIH1cbiAgICAgICAgdGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLnJlcGxhY2UodGlsZUNvb3JkS2V5LCB0aWxlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRpbGU7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIHRvIHJlbmRlciByZXByb2plY3Rpb24gZWRnZXMgb3Igbm90ICh1c3VhbGx5IGZvciBkZWJ1Z2dpbmcpLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHJlbmRlciBSZW5kZXIgdGhlIGVkZ2VzLlxuICAgKiBAYXBpXG4gICAqL1xuICBzZXRSZW5kZXJSZXByb2plY3Rpb25FZGdlcyhyZW5kZXIpIHtcbiAgICBpZiAodGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPT0gcmVuZGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gcmVuZGVyO1xuICAgIGZvciAoY29uc3QgaWQgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSB7XG4gICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMuY2hhbmdlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRpbGUgZ3JpZCB0byB1c2Ugd2hlbiByZXByb2plY3RpbmcgdGhlIHRpbGVzIHRvIHRoZSBnaXZlblxuICAgKiBwcm9qZWN0aW9uIGluc3RlYWQgb2YgdGhlIGRlZmF1bHQgdGlsZSBncmlkIGZvciB0aGUgcHJvamVjdGlvbi5cbiAgICpcbiAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gdGhlIGRlZmF1bHQgdGlsZSBncmlkIGNhbm5vdCBiZSBjcmVhdGVkXG4gICAqIChlLmcuIHByb2plY3Rpb24gaGFzIG5vIGV4dGVudCBkZWZpbmVkKSBvclxuICAgKiBmb3Igb3B0aW1pemF0aW9uIHJlYXNvbnMgKGN1c3RvbSB0aWxlIHNpemUsIHJlc29sdXRpb25zLCAuLi4pLlxuICAgKlxuICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlZ3JpZCBUaWxlIGdyaWQgdG8gdXNlIGZvciB0aGUgcHJvamVjdGlvbi5cbiAgICogQGFwaVxuICAgKi9cbiAgc2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24sIHRpbGVncmlkKSB7XG4gICAgY29uc3QgcHJvaiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKHByb2opIHtcbiAgICAgIGNvbnN0IHByb2pLZXkgPSBnZXRVaWQocHJvaik7XG4gICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IHRpbGVncmlkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHN1cGVyLmNsZWFyKCk7XG4gICAgZm9yIChjb25zdCBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltpZF0uY2xlYXIoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0ltYWdlVGlsZX0gaW1hZ2VUaWxlIEltYWdlIHRpbGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNvdXJjZS5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAgLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChpbWFnZVRpbGUuZ2V0SW1hZ2UoKSkuc3JjID1cbiAgICBzcmM7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRpbGVJbWFnZTtcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvWFlaXG4gKi9cblxuaW1wb3J0IFRpbGVJbWFnZSBmcm9tICcuL1RpbGVJbWFnZS5qcyc7XG5pbXBvcnQge2NyZWF0ZVhZWiwgZXh0ZW50RnJvbVByb2plY3Rpb259IGZyb20gJy4uL3RpbGVncmlkLmpzJztcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBJbml0aWFsIHRpbGUgY2FjaGUgc2l6ZS4gV2lsbCBhdXRvLWdyb3cgdG8gaG9sZCBhdCBsZWFzdCB0aGUgbnVtYmVyIG9mIHRpbGVzIGluIHRoZSB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9dHJ1ZV0gVXNlIGludGVycG9sYXRlZCB2YWx1ZXMgd2hlbiByZXNhbXBsaW5nLiAgQnkgZGVmYXVsdCxcbiAqIGxpbmVhciBpbnRlcnBvbGF0aW9uIGlzIHVzZWQgd2hlbiByZXNhbXBsaW5nLiAgU2V0IHRvIGZhbHNlIHRvIHVzZSB0aGUgbmVhcmVzdCBuZWlnaGJvciBpbnN0ZWFkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZD0wLjVdIE1heGltdW0gYWxsb3dlZCByZXByb2plY3Rpb24gZXJyb3IgKGluIHBpeGVscykuXG4gKiBIaWdoZXIgdmFsdWVzIGNhbiBpbmNyZWFzZSByZXByb2plY3Rpb24gcGVyZm9ybWFuY2UsIGJ1dCBkZWNyZWFzZSBwcmVjaXNpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209NDJdIE9wdGlvbmFsIG1heCB6b29tIGxldmVsLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE9wdGlvbmFsIG1pbiB6b29tIGxldmVsLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBPcHRpb25hbCB0aWxlIGdyaWQgcmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuXG4gKiBGb3IgZXhhbXBsZSwgaWYgdGhlIHRpbGUgc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZT1bMjU2LCAyNTZdXSBUaGUgdGlsZSBzaXplIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2d1dHRlcj0wXSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIGd1dHRlciBhcm91bmQgaW1hZ2UgdGlsZXMgdG8gaWdub3JlLlxuICogVGhpcyBhbGxvd3MgYXJ0aWZhY3RzIG9mIHJlbmRlcmluZyBhdCB0aWxlIGVkZ2VzIHRvIGJlIGlnbm9yZWQuXG4gKiBTdXBwb3J0ZWQgaW1hZ2VzIHNob3VsZCBiZSB3aWRlciBhbmQgdGFsbGVyIHRoYW4gdGhlIHRpbGUgc2l6ZSBieSBhIHZhbHVlIG9mIGAyIHggZ3V0dGVyYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiBgdXJsYCBvciBgdXJsc2AgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG5cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGF5ZXIgc291cmNlIGZvciB0aWxlIGRhdGEgd2l0aCBVUkxzIGluIGEgc2V0IFhZWiBmb3JtYXQgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gYSBVUkwgdGVtcGxhdGUuIEJ5IGRlZmF1bHQsIHRoaXMgZm9sbG93cyB0aGUgd2lkZWx5LXVzZWRcbiAqIEdvb2dsZSBncmlkIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIHRvcCBsZWZ0LiBHcmlkcyBsaWtlXG4gKiBUTVMgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgYm90dG9tIGxlZnQgY2FuIGJlIHVzZWQgYnlcbiAqIHVzaW5nIHRoZSBgey15fWAgcGxhY2Vob2xkZXIgaW4gdGhlIFVSTCB0ZW1wbGF0ZSwgc28gbG9uZyBhcyB0aGVcbiAqIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgY3VzdG9tIHRpbGUgZ3JpZC4gSW4gdGhpcyBjYXNlXG4gKiBhIGB0aWxlVXJsRnVuY3Rpb25gIGNhbiBiZSB1c2VkLCBzdWNoIGFzOlxuICogYGBganNcbiAqICB0aWxlVXJsRnVuY3Rpb246IGZ1bmN0aW9uKGNvb3JkaW5hdGUpIHtcbiAqICAgIHJldHVybiAnaHR0cDovL21hcHNlcnZlci5jb20vJyArIGNvb3JkaW5hdGVbMF0gKyAnLycgK1xuICogICAgICBjb29yZGluYXRlWzFdICsgJy8nICsgKC1jb29yZGluYXRlWzJdIC0gMSkgKyAnLnBuZyc7XG4gKiAgfVxuICogYGBgXG4gKiBAYXBpXG4gKi9cbmNsYXNzIFhZWiBleHRlbmRzIFRpbGVJbWFnZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRpb25zXSBYWVogb3B0aW9ucy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIGNvbnN0IHByb2plY3Rpb24gPVxuICAgICAgb3B0aW9ucy5wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnByb2plY3Rpb24gOiAnRVBTRzozODU3JztcblxuICAgIGNvbnN0IHRpbGVHcmlkID1cbiAgICAgIG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMudGlsZUdyaWRcbiAgICAgICAgOiBjcmVhdGVYWVooe1xuICAgICAgICAgICAgZXh0ZW50OiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSxcbiAgICAgICAgICAgIG1heFJlc29sdXRpb246IG9wdGlvbnMubWF4UmVzb2x1dGlvbixcbiAgICAgICAgICAgIG1heFpvb206IG9wdGlvbnMubWF4Wm9vbSxcbiAgICAgICAgICAgIG1pblpvb206IG9wdGlvbnMubWluWm9vbSxcbiAgICAgICAgICAgIHRpbGVTaXplOiBvcHRpb25zLnRpbGVTaXplLFxuICAgICAgICAgIH0pO1xuXG4gICAgc3VwZXIoe1xuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICBjcm9zc09yaWdpbjogb3B0aW9ucy5jcm9zc09yaWdpbixcbiAgICAgIGludGVycG9sYXRlOiBvcHRpb25zLmludGVycG9sYXRlLFxuICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgIHByb2plY3Rpb246IHByb2plY3Rpb24sXG4gICAgICByZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDogb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCxcbiAgICAgIHRpbGVHcmlkOiB0aWxlR3JpZCxcbiAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbixcbiAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IHRydWUsXG4gICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmd1dHRlcl8gPSBvcHRpb25zLmd1dHRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5ndXR0ZXIgOiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgKi9cbiAgZ2V0R3V0dGVyKCkge1xuICAgIHJldHVybiB0aGlzLmd1dHRlcl87XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgWFlaO1xuIiwiaW1wb3J0IFhZWlNvdXJjZSBmcm9tICdvbC9zb3VyY2UvWFlaLmpzJztcclxuaW1wb3J0IHtBdHRyaWJ1dGlvbkxpa2V9IGZyb20gXCJvbC9zb3VyY2UvU291cmNlXCI7XHJcblxyXG4vKipcclxuICogTWFwcGVkIHR5cGUgZm9yIHRoZSBWQVJJQU5UUyBjb25zdGFudCBtYXBcclxuICovXHJcbmV4cG9ydCB0eXBlIFZhcmlhbnRzID0ge1xyXG4gIFt2YXJpYW50OiBzdHJpbmddOiBzdHJpbmdcclxufVxyXG5cclxuLyoqXHJcbiAqIEF2YWlsYWJsZSBCYXNlbWFwIHZhcmlhbnRzXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVkFSSUFOVFM6IFZhcmlhbnRzID0ge1xyXG4gIGdlb2xhbmRiYXNlbWFwOiAnaHR0cHM6Ly9tYXBzbmV1LndpZW4uZ3YuYXQvYmFzZW1hcC9nZW9sYW5kYmFzZW1hcC9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG4gIGJtYXBncmF1OiAnaHR0cHM6Ly9tYXBzbmV1LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwZ3JhdS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG4gIGJtYXBvcnRob2ZvdG8zMGNtOiAnaHR0cHM6Ly9tYXBzbmV1LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb3J0aG9mb3RvMzBjbS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5qcGVnJyxcclxuICBibWFwZ2VsYWVuZGU6ICdodHRwczovL21hcHNuZXUud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBnZWxhZW5kZS9ncmF1L2dvb2dsZTM4NTcve3p9L3t5fS97eH0uanBlZycsXHJcbiAgYm1hcG9iZXJmbGFlY2hlOiAnaHR0cHM6Ly9tYXBzbmV1LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb2JlcmZsYWVjaGUvZ3JhdS9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gIGJtYXBvdmVybGF5OiAnaHR0cHM6Ly9tYXBzbmV1LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb3ZlcmxheS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIHRoZSB7QGxpbmtjb2RlIEJhc2VtYXBTb3VyY2V9IHNvdXJjZVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYXNlbWFwU291cmNlT3B0aW9ucyB7XHJcbiAgdmFyaWFudD86IHN0cmluZztcclxuICBhdHRyaWJ1dGlvbnM/OiBBdHRyaWJ1dGlvbkxpa2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZW5pZW5jZSBzb3VyY2UgZm9yIGJhc2VtYXAuYXQgcmFzdGVyIG1hcHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZW1hcFNvdXJjZSBleHRlbmRzIFhZWlNvdXJjZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9uc1xyXG4gICAqIEBwYXJhbSB7a2V5b2YgVkFSSUFOVFN9IFtvcHRpb25zLnZhcmlhbnQ9XCJnZW9sYW5kYmFzZW1hcFwiXSBCYXNlbWFwIHZhcmlhbnRcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogQmFzZW1hcFNvdXJjZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHZhcmlhbnQgPSBvcHRpb25zPy52YXJpYW50IHx8ICdnZW9sYW5kYmFzZW1hcCc7XHJcbiAgICBzdXBlcih7XHJcbiAgICAgIHVybDogVkFSSUFOVFNbdmFyaWFudF0sXHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucz8uYXR0cmlidXRpb25zID8/ICdHcnVuZGthcnRlOiA8YSBocmVmPVwiaHR0cHM6Ly9iYXNlbWFwLmF0L1wiPmJhc2VtYXAuYXQ8L2E+JyxcclxuICAgICAgY3Jvc3NPcmlnaW46IFwiQW5vbnltb3VzXCJcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgJy4uLy4uLy4uL3NyYy9pbmRleENvcmUuc2Nzcyc7XHJcbmltcG9ydCBUaWxlTGF5ZXIgZnJvbSBcIm9sL2xheWVyL1RpbGVcIjtcclxuaW1wb3J0IFZpZXcgZnJvbSBcIm9sL1ZpZXdcIjtcclxuaW1wb3J0IE1hcCBmcm9tIFwib2wvTWFwXCI7XHJcbmltcG9ydCB7XHJcbiAgQXR0cmlidXRpb24sXHJcbiAgQmFzZW1hcFNvdXJjZSxcclxuICBCb3R0b21SaWdodCxcclxuICBGb290ZXIsXHJcbiAgR2VvTG9jYXRlLFxyXG4gIExheWVyLFxyXG4gIE1vdXNlUG9zaXRpb24sXHJcbiAgT3ZlcnZpZXcsXHJcbiAgUHJpbnQsXHJcbiAgU2NhbGVMaW5lLFxyXG4gIFNoYXJlLFxyXG4gIFRvb2xzLFxyXG4gIFRvcFJpZ2h0LFxyXG4gIFZpZXdMaXN0LFxyXG4gIFpvb21cclxufSBmcm9tIFwiLi4vLi4vLi4vc3JjXCI7XHJcbmltcG9ydCB7Z2V0Q2VudGVyfSBmcm9tIFwib2wvZXh0ZW50XCI7XHJcblxyXG5uZXcgTWFwKHtcclxuICB0YXJnZXQ6ICdiZ2lzLW1hcCcsXHJcbiAgbGF5ZXJzOiBbbmV3IFRpbGVMYXllcih7XHJcbiAgICBzb3VyY2U6IG5ldyBCYXNlbWFwU291cmNlKClcclxuICB9KV0sXHJcbiAgY29udHJvbHM6IFtcclxuICAgIG5ldyBGb290ZXIoW1xyXG4gICAgICBuZXcgU2NhbGVMaW5lKCksXHJcbiAgICAgIG5ldyBNb3VzZVBvc2l0aW9uKCksXHJcbiAgICAgIG5ldyBBdHRyaWJ1dGlvbigpLFxyXG4gICAgXSksXHJcbiAgICBuZXcgQm90dG9tUmlnaHQoe2hvcml6b250YWxDb250cm9sczpcclxuICAgICAgICBbbmV3IExheWVyKCksXHJcbiAgICAgICAgICBuZXcgVmlld0xpc3QoKV0sXHJcbiAgICAgIHZlcnRpY2FsQ29udHJvbHM6IFtuZXcgUHJpbnQoKSxcclxuICAgICAgICBuZXcgU2hhcmUoKSwgbmV3IFRvb2xzKCldXHJcbiAgICB9KSxcclxuICAgIG5ldyBUb3BSaWdodChbXHJcbiAgICAgIG5ldyBHZW9Mb2NhdGUoKSxcclxuICAgICAgbmV3IFpvb20oKSxcclxuICAgIF0pLFxyXG4gICAgbmV3IE92ZXJ2aWV3KClcclxuICBdLFxyXG4gIHZpZXc6IG5ldyBWaWV3KHtcclxuICAgIGNlbnRlcjogZ2V0Q2VudGVyKFsxMDYwMDAwLCA1ODM4MDMwLCAxOTEzNTMwLCA2MjgxMjkwXSksXHJcbiAgICBjb25zdHJhaW5Pbmx5Q2VudGVyOiB0cnVlLFxyXG4gICAgY29uc3RyYWluUmVzb2x1dGlvbjogZmFsc2UsIC8vIGRpc2NyZXRlIHpvb29tbGV2ZWxzXHJcbiAgICBleHRlbnQ6IFsxMDYwMDAwLCA1ODM4MDMwLCAxOTEzNTMwLCA2MjgxMjkwXSxcclxuICAgIG1heFpvb206IDE1LFxyXG4gICAgbWluWm9vbTogNixcclxuICAgIHpvb206IDcsXHJcbiAgfSlcclxufSk7XHJcblxyXG5uZXcgTWFwKHtcclxuICB0YXJnZXQ6ICdiZ2lzLW1hcC0yJyxcclxuICBsYXllcnM6IFtuZXcgVGlsZUxheWVyKHtcclxuICAgIHNvdXJjZTogbmV3IEJhc2VtYXBTb3VyY2UoKVxyXG4gIH0pXSxcclxuICBjb250cm9sczogW1xyXG4gICAgbmV3IEZvb3RlcihbXHJcbiAgICAgIG5ldyBTY2FsZUxpbmUoKSxcclxuICAgICAgbmV3IE1vdXNlUG9zaXRpb24oKSxcclxuICAgICAgbmV3IEF0dHJpYnV0aW9uKCksXHJcbiAgICBdKSxcclxuICAgIG5ldyBCb3R0b21SaWdodCh7aG9yaXpvbnRhbENvbnRyb2xzOlxyXG4gICAgICAgIFtuZXcgTGF5ZXIoKSxcclxuICAgICAgICAgIG5ldyBWaWV3TGlzdCgpXSxcclxuICAgICAgdmVydGljYWxDb250cm9sczogW25ldyBQcmludCgpLFxyXG4gICAgICAgIG5ldyBTaGFyZSgpLCBuZXcgVG9vbHMoKV1cclxuICAgIH0pLFxyXG4gICAgbmV3IFRvcFJpZ2h0KFtcclxuICAgICAgbmV3IEdlb0xvY2F0ZSgpLFxyXG4gICAgICBuZXcgWm9vbSgpLFxyXG4gICAgXSksXHJcbiAgICBuZXcgT3ZlcnZpZXcoKVxyXG4gIF0sXHJcbiAgdmlldzogbmV3IFZpZXcoe1xyXG4gICAgY2VudGVyOiBnZXRDZW50ZXIoWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdKSxcclxuICAgIGNvbnN0cmFpbk9ubHlDZW50ZXI6IHRydWUsXHJcbiAgICBjb25zdHJhaW5SZXNvbHV0aW9uOiBmYWxzZSwgLy8gZGlzY3JldGUgem9vb21sZXZlbHNcclxuICAgIGV4dGVudDogWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdLFxyXG4gICAgbWF4Wm9vbTogMTUsXHJcbiAgICBtaW5ab29tOiA2LFxyXG4gICAgem9vbTogNyxcclxuICB9KVxyXG59KTtcclxuIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJjb25zdHJ1Y3RvciIsInR5cGUiLCJ0aGlzIiwicHJvcGFnYXRpb25TdG9wcGVkIiwiZGVmYXVsdFByZXZlbnRlZCIsInRhcmdldCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiZGlzcG9zZWQiLCJkaXNwb3NlIiwiZGlzcG9zZUludGVybmFsIiwiYXNjZW5kaW5nIiwiYSIsImIiLCJsaW5lYXJGaW5kTmVhcmVzdCIsImFyciIsImRpcmVjdGlvbiIsIm4iLCJsZW5ndGgiLCJpIiwiY2FuZGlkYXRlIiwiZXh0ZW5kIiwiZGF0YSIsImV4dGVuc2lvbiIsIkFycmF5IiwiaXNBcnJheSIsImVxdWFscyIsImFycjEiLCJhcnIyIiwibGVuMSIsIlRSVUUiLCJWT0lEIiwiY2xlYXIiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInN1cGVyIiwiZXZlbnRUYXJnZXRfIiwicGVuZGluZ1JlbW92YWxzXyIsImRpc3BhdGNoaW5nXyIsImxpc3RlbmVyc18iLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiaW5jbHVkZXMiLCJwdXNoIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50IiwiaXNTdHJpbmciLCJldnQiLCJFdmVudCIsImRpc3BhdGNoaW5nIiwicGVuZGluZ1JlbW92YWxzIiwicHJvcGFnYXRlIiwiaWkiLCJoYW5kbGVFdmVudCIsImNhbGwiLCJwciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJnZXRMaXN0ZW5lcnMiLCJ1bmRlZmluZWQiLCJoYXNMaXN0ZW5lciIsImtleXMiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJsaXN0ZW4iLCJ0aGlzQXJnIiwib25jZSIsImJpbmQiLCJvcmlnaW5hbExpc3RlbmVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJldmVudHNLZXkiLCJsaXN0ZW5PbmNlIiwidW5saXN0ZW5CeUtleSIsImtleSIsIk9ic2VydmFibGUiLCJvbiIsInVuIiwicmV2aXNpb25fIiwiY2hhbmdlZCIsIkV2ZW50VHlwZSIsImdldFJldmlzaW9uIiwib25JbnRlcm5hbCIsImxlbiIsIm9uY2VJbnRlcm5hbCIsIm9sX2tleSIsInVuSW50ZXJuYWwiLCJ1bkJ5S2V5IiwicHJvdG90eXBlIiwiRXJyb3IiLCJ1aWRDb3VudGVyXyIsImdldFVpZCIsIm9iaiIsIm9sX3VpZCIsIlN0cmluZyIsIk9iamVjdEV2ZW50Iiwib2xkVmFsdWUiLCJ2YWx1ZXMiLCJ2YWx1ZXNfIiwic2V0UHJvcGVydGllcyIsImdldCIsImhhc093blByb3BlcnR5IiwiZ2V0S2V5cyIsImdldFByb3BlcnRpZXMiLCJhc3NpZ24iLCJoYXNQcm9wZXJ0aWVzIiwibm90aWZ5IiwiZXZlbnRUeXBlIiwiT2JqZWN0RXZlbnRUeXBlIiwiYWRkQ2hhbmdlTGlzdGVuZXIiLCJyZW1vdmVDaGFuZ2VMaXN0ZW5lciIsInNldCIsInNpbGVudCIsImFwcGx5UHJvcGVydGllcyIsInNvdXJjZSIsInVuc2V0IiwibWVzc2FnZXMiLCJBc3NlcnRpb25FcnJvciIsImNvZGUiLCJtZXNzYWdlIiwibmFtZSIsImFzc2VydGlvbiIsImVycm9yQ29kZSIsIm1pbiIsIm1heCIsIk1hdGgiLCJzcXVhcmVkU2VnbWVudERpc3RhbmNlIiwieCIsInkiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImR4IiwiZHkiLCJ0IiwidG9EZWdyZWVzIiwiYW5nbGVJblJhZGlhbnMiLCJQSSIsImFuZ2xlSW5EZWdyZWVzIiwiciIsImxlcnAiLCJkZWNpbWFscyIsImZhY3RvciIsInBvdyIsInJvdW5kIiwiZmxvb3IiLCJjZWlsIiwib3B0aW9ucyIsImJhY2tncm91bmRfIiwiYmFja2dyb3VuZCIsInByb3BlcnRpZXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsInpJbmRleCIsIm1heFJlc29sdXRpb24iLCJJbmZpbml0eSIsIm1pblJlc29sdXRpb24iLCJtaW5ab29tIiwibWF4Wm9vbSIsImNsYXNzTmFtZV8iLCJjbGFzc05hbWUiLCJzdGF0ZV8iLCJnZXRCYWNrZ3JvdW5kIiwiZ2V0Q2xhc3NOYW1lIiwiZ2V0TGF5ZXJTdGF0ZSIsIm1hbmFnZWQiLCJzdGF0ZSIsImxheWVyIiwiZ2V0WkluZGV4IiwiZ2V0T3BhY2l0eSIsImdldFZpc2libGUiLCJleHRlbnQiLCJnZXRFeHRlbnQiLCJnZXRNYXhSZXNvbHV0aW9uIiwiZ2V0TWluUmVzb2x1dGlvbiIsImdldE1pblpvb20iLCJnZXRNYXhab29tIiwiZ2V0TGF5ZXJzQXJyYXkiLCJhcnJheSIsImdldExheWVyU3RhdGVzQXJyYXkiLCJzdGF0ZXMiLCJnZXRTb3VyY2VTdGF0ZSIsInNldEJhY2tncm91bmQiLCJzZXRFeHRlbnQiLCJzZXRNYXhSZXNvbHV0aW9uIiwic2V0TWluUmVzb2x1dGlvbiIsInNldE1heFpvb20iLCJzZXRNaW5ab29tIiwic2V0T3BhY2l0eSIsInNldFZpc2libGUiLCJzZXRaSW5kZXgiLCJ6aW5kZXgiLCJDRU5URVIiLCJSRVNPTFVUSU9OIiwiUk9UQVRJT04iLCJERUZBVUxUX01BWF9aT09NIiwiREVGQVVMVF9USUxFX1NJWkUiLCJjb2RlXyIsInVuaXRzXyIsImV4dGVudF8iLCJ3b3JsZEV4dGVudF8iLCJ3b3JsZEV4dGVudCIsImF4aXNPcmllbnRhdGlvbl8iLCJheGlzT3JpZW50YXRpb24iLCJnbG9iYWxfIiwiZ2xvYmFsIiwiY2FuV3JhcFhfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18iLCJnZXRQb2ludFJlc29sdXRpb24iLCJkZWZhdWx0VGlsZUdyaWRfIiwibWV0ZXJzUGVyVW5pdF8iLCJtZXRlcnNQZXJVbml0IiwiY2FuV3JhcFgiLCJnZXRDb2RlIiwiZ2V0VW5pdHMiLCJnZXRNZXRlcnNQZXJVbml0IiwiZ2V0V29ybGRFeHRlbnQiLCJnZXRBeGlzT3JpZW50YXRpb24iLCJpc0dsb2JhbCIsInNldEdsb2JhbCIsImdldERlZmF1bHRUaWxlR3JpZCIsInNldERlZmF1bHRUaWxlR3JpZCIsInRpbGVHcmlkIiwic2V0V29ybGRFeHRlbnQiLCJzZXRHZXRQb2ludFJlc29sdXRpb24iLCJmdW5jIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyIsIlJBRElVUyIsIkhBTEZfU0laRSIsIkVYVEVOVCIsIldPUkxEX0VYVEVOVCIsIk1BWF9TQUZFX1kiLCJsb2ciLCJ0YW4iLCJFUFNHMzg1N1Byb2plY3Rpb24iLCJ1bml0cyIsInJlc29sdXRpb24iLCJwb2ludCIsImNvc2giLCJQUk9KRUNUSU9OUyIsIkVQU0c0MzI2UHJvamVjdGlvbiIsImNhY2hlIiwidHJhbnNmb3JtcyIsImRlc3RpbmF0aW9uIiwidHJhbnNmb3JtRm4iLCJzb3VyY2VDb2RlIiwiZGVzdGluYXRpb25Db2RlIiwiVU5LTk9XTiIsIklOVEVSU0VDVElORyIsIkFCT1ZFIiwiUklHSFQiLCJCRUxPVyIsIkxFRlQiLCJib3VuZGluZ0V4dGVudCIsImNvb3JkaW5hdGVzIiwiZXh0ZW5kQ29vcmRpbmF0ZSIsImNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSIsImNvbnRhaW5zQ29vcmRpbmF0ZSIsImNvb3JkaW5hdGUiLCJjb250YWluc1hZIiwiY29vcmRpbmF0ZVJlbGF0aW9uc2hpcCIsIm1pblgiLCJtaW5ZIiwibWF4WCIsIm1heFkiLCJyZWxhdGlvbnNoaXAiLCJSZWxhdGlvbnNoaXAiLCJjcmVhdGVPclVwZGF0ZSIsImRlc3QiLCJjcmVhdGVPclVwZGF0ZUVtcHR5IiwiZXh0ZW50MSIsImV4dGVudDIiLCJleHRlbmRGbGF0Q29vcmRpbmF0ZXMiLCJmbGF0Q29vcmRpbmF0ZXMiLCJvZmZzZXQiLCJlbmQiLCJzdHJpZGUiLCJleHRlbmRYWSIsImZvckVhY2hDb3JuZXIiLCJjYWxsYmFjayIsInZhbCIsImdldEJvdHRvbUxlZnQiLCJnZXRCb3R0b21SaWdodCIsImdldFRvcFJpZ2h0IiwiZ2V0VG9wTGVmdCIsImdldEFyZWEiLCJhcmVhIiwiZ2V0Q2VudGVyIiwiZ2V0Q29ybmVyIiwiY29ybmVyIiwiZ2V0Rm9yVmlld0FuZFNpemUiLCJjZW50ZXIiLCJyb3RhdGlvbiIsInNpemUiLCJ4MCIsInkwIiwieDMiLCJ5MyIsImdldFJvdGF0ZWRWaWV3cG9ydCIsImNvc1JvdGF0aW9uIiwiY29zIiwic2luUm90YXRpb24iLCJzaW4iLCJ4Q29zIiwieFNpbiIsInlDb3MiLCJ5U2luIiwiZ2V0SW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0cyIsImNvb3JkaW5hdGUxIiwiY29vcmRpbmF0ZTIiLCJyb3RhdGUiLCJhbmdsZSIsImNvc0FuZ2xlIiwic2luQW5nbGUiLCJwcm9qZWN0aW9uIiwid29ybGRXaWR0aCIsIndvcmxkc0F3YXkiLCJzb3VyY2VFeHRlbnRXaWR0aCIsInByb2plY3Rpb25FeHRlbnQiLCJERUZBVUxUX1JBRElVUyIsImdldERpc3RhbmNlIiwiYzEiLCJjMiIsInJhZGl1cyIsImxhdDEiLCJsYXQyIiwiZGVsdGFMYXRCeTIiLCJkZWx0YUxvbkJ5MiIsImF0YW4yIiwic3FydCIsImRpc3RhbmNlIiwiYmVhcmluZyIsImxvbjEiLCJkQnlSIiwibGF0IiwiYXNpbiIsImxldmVscyIsImluZm8iLCJ3YXJuIiwiZXJyb3IiLCJub25lIiwibGV2ZWwiLCJhcmdzIiwiY29uc29sZSIsInNob3dDb29yZGluYXRlV2FybmluZyIsImRpc2FibGVDb29yZGluYXRlV2FybmluZyIsImRpc2FibGUiLCJjbG9uZVRyYW5zZm9ybSIsImlucHV0Iiwib3V0cHV0Iiwic2xpY2UiLCJpZGVudGl0eVRyYW5zZm9ybSIsImFkZFByb2plY3Rpb24iLCJhZGQiLCJwcm9qZWN0aW9uTGlrZSIsInJlcGxhY2UiLCJwb2ludFJlc29sdXRpb24iLCJnZXR0ZXIiLCJwcm9qVW5pdHMiLCJ0b0VQU0c0MzI2IiwiZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zIiwidmVydGljZXMiLCJhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMiLCJwcm9qZWN0aW9ucyIsImZvckVhY2giLCJhZGRQcm9qZWN0aW9ucyIsImNyZWF0ZVByb2plY3Rpb24iLCJkZWZhdWx0Q29kZSIsImVxdWl2YWxlbnQiLCJwcm9qZWN0aW9uMSIsInByb2plY3Rpb24yIiwiZXF1YWxVbml0cyIsInNvdXJjZVByb2plY3Rpb24iLCJkZXN0aW5hdGlvblByb2plY3Rpb24iLCJ0cmFuc2Zvcm1GdW5jIiwidHJhbnNmb3JtIiwiZ2V0VHJhbnNmb3JtIiwidXNlclByb2plY3Rpb24iLCJnZXRVc2VyUHJvamVjdGlvbiIsInRvVXNlckNvb3JkaW5hdGUiLCJmcm9tVXNlckNvb3JkaW5hdGUiLCJkZXN0UHJvamVjdGlvbiIsImZyb21Vc2VyRXh0ZW50IiwicHJvamVjdGlvbnMyIiwiZm9yd2FyZFRyYW5zZm9ybSIsImludmVyc2VUcmFuc2Zvcm0iLCJjcmVhdGVFeHRlbnQiLCJvbmx5Q2VudGVyIiwic21vb3RoIiwiaXNNb3ZpbmciLCJjZW50ZXJTaGlmdCIsInZpZXdXaWR0aCIsInZpZXdIZWlnaHQiLCJzaGlmdFgiLCJzaGlmdFkiLCJyYXRpbyIsImdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24iLCJtYXhFeHRlbnQiLCJ2aWV3cG9ydFNpemUiLCJzaG93RnVsbEV4dGVudCIsInhSZXNvbHV0aW9uIiwieVJlc29sdXRpb24iLCJnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbiIsInJlc3VsdCIsImNyZWF0ZU1pbk1heFJlc29sdXRpb24iLCJjYXBwZWRNYXhSZXMiLCJlYXNlSW4iLCJlYXNlT3V0IiwiaW5BbmRPdXQiLCJsaW5lYXIiLCJkaW1lbnNpb24iLCJhdGFuIiwiZXhwIiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsIkZJUkVGT1giLCJXRUJLSVQiLCJ0ZXN0IiwiREVWSUNFX1BJWEVMX1JBVElPIiwiZGV2aWNlUGl4ZWxSYXRpbyIsIldPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIiwiV29ya2VyR2xvYmFsU2NvcGUiLCJPZmZzY3JlZW5DYW52YXMiLCJJTUFHRV9ERUNPREUiLCJJbWFnZSIsImRlY29kZSIsIlBBU1NJVkVfRVZFTlRfTElTVEVORVJTIiwicGFzc2l2ZSIsIndpbmRvdyIsImNvbXBvc2UiLCJkeDEiLCJkeTEiLCJzeCIsInN5IiwiZHgyIiwiZHkyIiwibWFrZUludmVyc2UiLCJkZXQiLCJtYXQiLCJjIiwiZCIsImUiLCJmIiwidHJhbnNmb3JtU3RyaW5nRGl2IiwidG1wVHJhbnNmb3JtIiwiZXh0ZW50UmV2aXNpb25fIiwic2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSIsInNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uIiwic2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsIiwiZm4iLCJsYXN0UmVzdWx0IiwibGFzdEFyZ3MiLCJsYXN0VGhpcyIsImNhbGxlZCIsIm5leHRBcmdzIiwibWVtb2l6ZU9uZSIsInJldmlzaW9uIiwic3F1YXJlZFRvbGVyYW5jZSIsImdldFNpbXBsaWZpZWRHZW9tZXRyeSIsImNsb25lIiwiYXBwbHlUcmFuc2Zvcm0iLCJzaW1wbGlmeVRyYW5zZm9ybWVkIiwiY2xvc2VzdFBvaW50WFkiLCJjbG9zZXN0UG9pbnQiLCJtaW5TcXVhcmVkRGlzdGFuY2UiLCJjb29yZCIsImdldENsb3Nlc3RQb2ludCIsIk5hTiIsImludGVyc2VjdHNDb29yZGluYXRlIiwiY29tcHV0ZUV4dGVudCIsImlzTmFOIiwicmV0dXJuT3JVcGRhdGUiLCJhbmNob3IiLCJzY2FsZSIsInNpbXBsaWZ5IiwidG9sZXJhbmNlIiwiZ2V0VHlwZSIsImludGVyc2VjdHNFeHRlbnQiLCJ0cmFuc2xhdGUiLCJkZWx0YVgiLCJkZWx0YVkiLCJzb3VyY2VQcm9qIiwiaW5Db29yZGluYXRlcyIsIm91dENvb3JkaW5hdGVzIiwicGl4ZWxFeHRlbnQiLCJwcm9qZWN0ZWRFeHRlbnQiLCJqIiwiZ2V0U3RyaWRlRm9yTGF5b3V0IiwibGF5b3V0IiwiZ2V0Q29vcmRpbmF0ZXMiLCJnZXRGaXJzdENvb3JkaW5hdGUiLCJnZXRGbGF0Q29vcmRpbmF0ZXMiLCJnZXRMYXN0Q29vcmRpbmF0ZSIsImdldExheW91dCIsInNpbXBsaWZpZWRHZW9tZXRyeSIsImdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsIiwiZ2V0U3RyaWRlIiwic2V0RmxhdENvb3JkaW5hdGVzIiwic2V0Q29vcmRpbmF0ZXMiLCJzZXRMYXlvdXQiLCJuZXN0aW5nIiwiZ2V0TGF5b3V0Rm9yU3RyaWRlIiwiYW5jaG9yWCIsImFuY2hvclkiLCJrIiwiYXNzaWduQ2xvc2VzdCIsIm9mZnNldDEiLCJvZmZzZXQyIiwibWF4U3F1YXJlZERlbHRhIiwic3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdFBvaW50IiwibWF4RGVsdGEiLCJpc1JpbmciLCJ0bXBQb2ludCIsInNxdWFyZWREaXN0YW5jZSIsImRlZmxhdGVDb29yZGluYXRlcyIsInNuYXAiLCJxdWFudGl6ZSIsInNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMiLCJzaW1wbGlmaWVkT2Zmc2V0IiwiaW5mbGF0ZUNvb3JkaW5hdGVzIiwibGluZWFyUmluZyIsInR3aWNlQXJlYSIsIkxpbmVhclJpbmciLCJtYXhEZWx0YV8iLCJtYXhEZWx0YVJldmlzaW9uXyIsIm1hcmtlcnMiLCJzdGFjayIsImxhc3QiLCJwb3AiLCJmaXJzdCIsIm1heFNxdWFyZWREaXN0YW5jZSIsImRvdWdsYXNQZXVja2VyIiwiUG9pbnQiLCJjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlIiwiZGVmbGF0ZUNvb3JkaW5hdGUiLCJsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQiLCJsaW5lYXJSaW5nQ29udGFpbnNYWSIsInduIiwibGluZWFyUmluZ3NDb250YWluc1hZIiwiZW5kcyIsImludGVyc2VjdHNMaW5lU3RyaW5nIiwiY29vcmRpbmF0ZXNFeHRlbnQiLCJyZXQiLCJwb2ludDEiLCJwb2ludDIiLCJzdGFydCIsInN0YXJ0UmVsIiwiZW5kUmVsIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJzbG9wZSIsImludGVyc2VjdHNTZWdtZW50IiwiaW50ZXJzZWN0c0xpbmVhclJpbmciLCJ0bXAiLCJsaW5lYXJSaW5nSXNDbG9ja3dpc2UiLCJlZGdlIiwib3JpZW50TGluZWFyUmluZ3MiLCJyaWdodCIsImlzQ2xvY2t3aXNlIiwiUG9seWdvbiIsImVuZHNfIiwiZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8iLCJmbGF0SW50ZXJpb3JQb2ludF8iLCJvcmllbnRlZFJldmlzaW9uXyIsIm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyIsImFwcGVuZExpbmVhclJpbmciLCJwb2x5Z29uIiwiYXJyYXlNYXhTcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCIsImdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzIiwibGluZWFyUmluZ3MiLCJjb29yZGluYXRlc3MiLCJqaiIsImluZmxhdGVDb29yZGluYXRlc0FycmF5IiwiZ2V0RW5kcyIsImdldEZsYXRJbnRlcmlvclBvaW50IiwiZmxhdENlbnRlciIsImZsYXRDZW50ZXJzIiwiZmxhdENlbnRlcnNPZmZzZXQiLCJpbnRlcnNlY3Rpb25zIiwicnIiLCJwb2ludFgiLCJtYXhTZWdtZW50TGVuZ3RoIiwic29ydCIsInNlZ21lbnRMZW5ndGgiLCJhYnMiLCJnZXRJbnRlcmlvclBvaW50T2ZBcnJheSIsImdldEludGVyaW9yUG9pbnQiLCJnZXRMaW5lYXJSaW5nQ291bnQiLCJnZXRMaW5lYXJSaW5nIiwiZ2V0TGluZWFyUmluZ3MiLCJsaW5lYXJSaW5nc0FyZU9yaWVudGVkIiwic2ltcGxpZmllZEVuZHMiLCJxdWFudGl6ZUFycmF5IiwiaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSIsImRlZmxhdGVDb29yZGluYXRlc0FycmF5IiwiZnJvbUV4dGVudCIsImFuaW1hdGlvbkNhbGxiYWNrIiwicmV0dXJuVmFsdWUiLCJzZXRUaW1lb3V0IiwiaXNOb29wQW5pbWF0aW9uIiwiYW5pbWF0aW9uIiwic291cmNlQ2VudGVyIiwidGFyZ2V0Q2VudGVyIiwic291cmNlUmVzb2x1dGlvbiIsInRhcmdldFJlc29sdXRpb24iLCJzb3VyY2VSb3RhdGlvbiIsInRhcmdldFJvdGF0aW9uIiwiY2FsY3VsYXRlQ2VudGVyT24iLCJwb3NpdGlvbiIsInJvdFgiLCJyb3RZIiwiaGludHNfIiwiYW5pbWF0aW9uc18iLCJ1cGRhdGVBbmltYXRpb25LZXlfIiwicHJvamVjdGlvbl8iLCJ2aWV3cG9ydFNpemVfIiwidGFyZ2V0Q2VudGVyXyIsInRhcmdldFJlc29sdXRpb25fIiwidGFyZ2V0Um90YXRpb25fIiwibmV4dENlbnRlcl8iLCJuZXh0UmVzb2x1dGlvbl8iLCJuZXh0Um90YXRpb25fIiwiY2FuY2VsQW5jaG9yXyIsImFwcGx5T3B0aW9uc18iLCJWaWV3UHJvcGVydHkiLCJyZXNvbHV0aW9uQ29uc3RyYWludEluZm8iLCJyZXNvbHV0aW9uQ29uc3RyYWludCIsInpvb21GYWN0b3IiLCJtdWx0aVdvcmxkIiwic21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJwcm9qRXh0ZW50IiwiY29uc3RyYWluT25seUNlbnRlciIsInJlc29sdXRpb25zIiwiY29uc3RyYWluUmVzb2x1dGlvbiIsImNhcHBlZCIsInoiLCJjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyIsImRlZmF1bHRNYXhSZXNvbHV0aW9uIiwiZGVncmVlcyIsImRlZmF1bHRNaW5SZXNvbHV0aW9uIiwiZGVmYXVsdE1heFpvb20iLCJwb3dlciIsIm1pblpvb21MZXZlbCIsImNhcHBlZFpvb21MZXZlbCIsInpvb21MZXZlbCIsImNyZWF0ZVNuYXBUb1Bvd2VyIiwiY29uc3RyYWludCIsImNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50IiwibWF4UmVzb2x1dGlvbl8iLCJtaW5SZXNvbHV0aW9uXyIsInpvb21GYWN0b3JfIiwicmVzb2x1dGlvbnNfIiwicGFkZGluZ18iLCJwYWRkaW5nIiwibWluWm9vbV8iLCJjZW50ZXJDb25zdHJhaW50Iiwic21vb3RoRXh0ZW50Q29uc3RyYWludCIsImNyZWF0ZUNlbnRlckNvbnN0cmFpbnQiLCJyb3RhdGlvbkNvbnN0cmFpbnQiLCJlbmFibGVSb3RhdGlvbiIsImNvbnN0cmFpblJvdGF0aW9uIiwidGhldGEiLCJjcmVhdGVTbmFwVG9OIiwiY3JlYXRlUm90YXRpb25Db25zdHJhaW50IiwiY29uc3RyYWludHNfIiwic2V0Um90YXRpb24iLCJzZXRDZW50ZXJJbnRlcm5hbCIsInNldFJlc29sdXRpb24iLCJ6b29tIiwic2V0Wm9vbSIsIm9sZFBhZGRpbmciLCJnZXRDZW50ZXJJbnRlcm5hbCIsIm5ld1BhZGRpbmciLCJnZXRSZXNvbHV0aW9uIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJnZXRVcGRhdGVkT3B0aW9uc18iLCJuZXdPcHRpb25zIiwiZ2V0Wm9vbSIsImdldFJvdGF0aW9uIiwiYW5pbWF0ZSIsInZhcl9hcmdzIiwiaXNEZWYiLCJnZXRBbmltYXRpbmciLCJyZXNvbHZlQ29uc3RyYWludHMiLCJnZXRQcm9qZWN0aW9uIiwiYW5pbWF0ZUludGVybmFsIiwiYW5pbWF0aW9uQ291bnQiLCJEYXRlIiwibm93Iiwic2VyaWVzIiwiY29tcGxldGUiLCJkdXJhdGlvbiIsImVhc2luZyIsImdldFJlc29sdXRpb25Gb3Jab29tIiwiZGVsdGEiLCJzZXRIaW50IiwidXBkYXRlQW5pbWF0aW9uc18iLCJnZXRJbnRlcmFjdGluZyIsImNhbmNlbEFuaW1hdGlvbnMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIm1vcmUiLCJzZXJpZXNDb21wbGV0ZSIsImVsYXBzZWQiLCJmcmFjdGlvbiIsInByb2dyZXNzIiwiZ2V0Vmlld3BvcnRTaXplXyIsImNvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImNhbGN1bGF0ZUNlbnRlclpvb20iLCJhcHBseVRhcmdldFN0YXRlXyIsImNvbnN0cmFpbmVkUm90YXRpb24iLCJjYWxjdWxhdGVDZW50ZXJSb3RhdGUiLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY3VycmVudENlbnRlciIsImN1cnJlbnRSZXNvbHV0aW9uIiwidyIsImgiLCJzZXRWaWV3cG9ydFNpemUiLCJnZXRDb25zdHJhaW50cyIsImdldENvbnN0cmFpblJlc29sdXRpb24iLCJnZXRIaW50cyIsImhpbnRzIiwiY2FsY3VsYXRlRXh0ZW50IiwiY2FsY3VsYXRlRXh0ZW50SW50ZXJuYWwiLCJnZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfIiwiZ2V0Wm9vbUZvclJlc29sdXRpb24iLCJzZXRDb25zdHJhaW5SZXNvbHV0aW9uIiwiZW5hYmxlZCIsImdldFJlc29sdXRpb25zIiwiZ2V0UmVzb2x1dGlvbkZvckV4dGVudCIsImdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbCIsImdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uIiwiZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uIiwiZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24iLCJsb2dQb3dlciIsImdldFN0YXRlIiwicmVkdWNlZFNpemUiLCJuZXh0Q2VudGVyIiwibmV4dFJlc29sdXRpb24iLCJuZXh0Um90YXRpb24iLCJnZXRWaWV3U3RhdGVBbmRFeHRlbnQiLCJ2aWV3U3RhdGUiLCJuZWFyZXN0IiwiYmFzZUxldmVsIiwiZml0IiwiZ2VvbWV0cnlPckV4dGVudCIsImdlb21ldHJ5IiwiZml0SW50ZXJuYWwiLCJyb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkiLCJjb29yZHMiLCJtaW5Sb3RYIiwibWluUm90WSIsIm1heFJvdFgiLCJtYXhSb3RZIiwicm90YXRlZEV4dGVudCIsImNlbnRlclJvdCIsImNlbnRlclgiLCJjZW50ZXJZIiwiZ2V0Q29uc3RyYWluZWRDZW50ZXIiLCJjZW50ZXJPbiIsImNlbnRlck9uSW50ZXJuYWwiLCJjYWxjdWxhdGVDZW50ZXJTaGlmdCIsInNoaWZ0ZWRDZW50ZXIiLCJhZGp1c3RDZW50ZXIiLCJkZWx0YUNvb3JkaW5hdGVzIiwic2V0Q2VudGVyIiwiYWRqdXN0Q2VudGVySW50ZXJuYWwiLCJhZGp1c3RSZXNvbHV0aW9uIiwiYWRqdXN0UmVzb2x1dGlvbkludGVybmFsIiwibmV3UmVzb2x1dGlvbiIsImFkanVzdFpvb20iLCJhZGp1c3RSb3RhdGlvbiIsImFkanVzdFJvdGF0aW9uSW50ZXJuYWwiLCJuZXdSb3RhdGlvbiIsImhpbnQiLCJkb05vdENhbmNlbEFuaW1zIiwiZm9yY2VNb3ZpbmciLCJuZXdDZW50ZXIiLCJyZXNvbHV0aW9uRGlyZWN0aW9uIiwiYmVnaW5JbnRlcmFjdGlvbiIsImVuZEludGVyYWN0aW9uIiwiZW5kSW50ZXJhY3Rpb25JbnRlcm5hbCIsImdldENvbnN0cmFpbmVkWm9vbSIsInRhcmdldFpvb20iLCJ0YXJnZXRSZXMiLCJpblZpZXciLCJsYXllclN0YXRlIiwiQmFzZSIsImJhc2VPcHRpb25zIiwibWFwUHJlY29tcG9zZUtleV8iLCJtYXBSZW5kZXJLZXlfIiwic291cmNlQ2hhbmdlS2V5XyIsInJlbmRlcmVyXyIsInNvdXJjZVJlYWR5XyIsInJlbmRlcmVkIiwicmVuZGVyIiwibWFwIiwic2V0TWFwIiwiaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfIiwic2V0U291cmNlIiwiZ2V0U291cmNlIiwiZ2V0UmVuZGVyU291cmNlIiwiaGFuZGxlU291cmNlQ2hhbmdlXyIsImdldEZlYXR1cmVzIiwicGl4ZWwiLCJQcm9taXNlIiwicmVzb2x2ZSIsImdldERhdGEiLCJpc1Zpc2libGUiLCJ2aWV3IiwiZnJhbWVTdGF0ZSIsImdldE1hcEludGVybmFsIiwiZ2V0VmlldyIsImxheWVyU3RhdGVzQXJyYXkiLCJnZXRMYXllckdyb3VwIiwiZmluZCIsImxheWVyRXh0ZW50IiwiZ2V0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25zIiwibGF5ZXJSZW5kZXJlciIsImdldFJlbmRlcmVyIiwicHJlcGFyZUZyYW1lIiwicmVuZGVyRnJhbWUiLCJ1bnJlbmRlciIsInNldE1hcEludGVybmFsIiwic29tZSIsImFycmF5TGF5ZXJTdGF0ZSIsImNyZWF0ZVJlbmRlcmVyIiwiaGFzUmVuZGVyZXIiLCJwcmVsb2FkIiwidXNlSW50ZXJpbVRpbGVzT25FcnJvciIsInNldFByZWxvYWQiLCJzZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yIiwiZ2V0UHJlbG9hZCIsIlRpbGVQcm9wZXJ0eSIsImdldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJyZWFkeSIsImJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfIiwiaGFuZGxlSW1hZ2VDaGFuZ2VfIiwibGF5ZXJfIiwiZGVjbHV0dGVyRXhlY3V0b3JHcm91cCIsImxvYWRlZFRpbGVDYWxsYmFjayIsInRpbGVzIiwidGlsZSIsInRpbGVDb29yZCIsInRvU3RyaW5nIiwiY3JlYXRlTG9hZGVkVGlsZUZpbmRlciIsInRpbGVSYW5nZSIsImZvckVhY2hMb2FkZWRUaWxlIiwiZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUiLCJoaXRUb2xlcmFuY2UiLCJtYXRjaGVzIiwiZ2V0TGF5ZXIiLCJoYW5kbGVGb250c0NoYW5nZWQiLCJpbWFnZSIsInJlbmRlcklmUmVhZHlBbmRWaXNpYmxlIiwibG9hZEltYWdlIiwiaW1hZ2VTdGF0ZSIsImxvYWQiLCJpbnZlcnNlUGl4ZWxUcmFuc2Zvcm0iLCJjb250ZXh0IiwiSEVYX0NPTE9SX1JFXyIsIk5BTUVEX0NPTE9SX1JFXyIsImZyb21TdHJpbmciLCJjYWNoZVNpemUiLCJzIiwiY29sb3IiLCJnIiwiZXhlYyIsImVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJyZ2IiLCJnZXRDb21wdXRlZFN0eWxlIiwicmVtb3ZlQ2hpbGQiLCJmcm9tTmFtZWQiLCJoYXNBbHBoYSIsInBhcnNlSW50Iiwic3Vic3RyIiwic3RhcnRzV2l0aCIsInNwbGl0IiwiTnVtYmVyIiwibm9ybWFsaXplIiwiZnJvbVN0cmluZ0ludGVybmFsXyIsImFzQXJyYXkiLCJjcmVhdGVDYW52YXNDb250ZXh0MkQiLCJ3aWR0aCIsImhlaWdodCIsImNhbnZhc1Bvb2wiLCJzZXR0aW5ncyIsImNhbnZhcyIsInNoaWZ0IiwiZ2V0Q29udGV4dCIsInJlbGVhc2VDYW52YXMiLCJjbGVhclJlY3QiLCJyZXBsYWNlTm9kZSIsIm5ld05vZGUiLCJvbGROb2RlIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsInJlbW92ZU5vZGUiLCJub2RlIiwicGl4ZWxDb250ZXh0IiwiY29udGFpbmVyIiwicmVuZGVyZWRSZXNvbHV0aW9uIiwidGVtcFRyYW5zZm9ybSIsInBpeGVsVHJhbnNmb3JtIiwiY29udGFpbmVyUmV1c2VkIiwicGl4ZWxDb250ZXh0XyIsImdldEltYWdlRGF0YSIsImNvbCIsInJvdyIsIndpbGxSZWFkRnJlcXVlbnRseSIsImRyYXdJbWFnZSIsImVyciIsInVzZUNvbnRhaW5lciIsImJhY2tncm91bmRDb2xvciIsImxheWVyQ2xhc3NOYW1lIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJIVE1MQ2FudmFzRWxlbWVudCIsImxlZnQiLCJ0cmFuc2Zvcm1PcmlnaW4iLCJjbGlwVW5yb3RhdGVkIiwidG9wTGVmdCIsInRvcFJpZ2h0IiwiYm90dG9tUmlnaHQiLCJib3R0b21MZWZ0IiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0iLCJpbnZlcnRlZCIsInNhdmUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbGlwIiwiZGlzcGF0Y2hSZW5kZXJFdmVudF8iLCJwcmVSZW5kZXIiLCJwb3N0UmVuZGVyIiwiZ2V0UmVuZGVyVHJhbnNmb3JtIiwicGl4ZWxSYXRpbyIsImludGVyaW1UaWxlIiwidHJhbnNpdGlvbl8iLCJ0cmFuc2l0aW9uIiwidHJhbnNpdGlvblN0YXJ0c18iLCJpbnRlcnBvbGF0ZSIsInJlbGVhc2UiLCJzZXRTdGF0ZSIsImdldEtleSIsImdldEludGVyaW1UaWxlIiwicmVmcmVzaEludGVyaW1DaGFpbiIsInByZXYiLCJnZXRUaWxlQ29vcmQiLCJnZXRBbHBoYSIsImlkIiwidGltZSIsImluVHJhbnNpdGlvbiIsImVuZFRyYW5zaXRpb24iLCJzcmMiLCJjcm9zc09yaWdpbiIsInRpbGVMb2FkRnVuY3Rpb24iLCJjcm9zc09yaWdpbl8iLCJzcmNfIiwiaW1hZ2VfIiwidW5saXN0ZW5fIiwidGlsZUxvYWRGdW5jdGlvbl8iLCJnZXRJbWFnZSIsInNldEltYWdlIiwiZWxlbWVudCIsInVubGlzdGVuSW1hZ2VfIiwiaGFuZGxlSW1hZ2VFcnJvcl8iLCJjdHgiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImdldEJsYW5rSW1hZ2UiLCJoYW5kbGVJbWFnZUxvYWRfIiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsImxvYWRIYW5kbGVyIiwiZXJyb3JIYW5kbGVyIiwiaW1nIiwibGlzdGVuaW5nIiwiZGVjb2RpbmciLCJsb2FkZWQiLCJsaXN0ZW5lcktleXMiLCJ0aGVuIiwiY2F0Y2giLCJsaXN0ZW5JbWFnZSIsInRhcmdldFByb2oiLCJ0YXJnZXRFeHRlbnQiLCJtYXhTb3VyY2VFeHRlbnQiLCJlcnJvclRocmVzaG9sZCIsImRlc3RpbmF0aW9uUmVzb2x1dGlvbiIsInNvdXJjZVByb2pfIiwidGFyZ2V0UHJval8iLCJ0cmFuc2Zvcm1JbnZDYWNoZSIsInRyYW5zZm9ybUludiIsInRyYW5zZm9ybUludl8iLCJtYXhTb3VyY2VFeHRlbnRfIiwiZXJyb3JUaHJlc2hvbGRTcXVhcmVkXyIsInRyaWFuZ2xlc18iLCJ3cmFwc1hJblNvdXJjZV8iLCJjYW5XcmFwWEluU291cmNlXyIsInNvdXJjZVdvcmxkV2lkdGhfIiwidGFyZ2V0V29ybGRXaWR0aF8iLCJkZXN0aW5hdGlvblRvcExlZnQiLCJkZXN0aW5hdGlvblRvcFJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21SaWdodCIsImRlc3RpbmF0aW9uQm90dG9tTGVmdCIsInNvdXJjZVRvcExlZnQiLCJzb3VyY2VUb3BSaWdodCIsInNvdXJjZUJvdHRvbVJpZ2h0Iiwic291cmNlQm90dG9tTGVmdCIsIm1heFN1YmRpdmlzaW9uIiwibG9nMiIsImFkZFF1YWRfIiwibGVmdEJvdW5kIiwidHJpYW5nbGUiLCJuZXdUcmlhbmdsZSIsImFkZFRyaWFuZ2xlXyIsImFTcmMiLCJiU3JjIiwiY1NyYyIsImRTcmMiLCJzb3VyY2VRdWFkRXh0ZW50Iiwic291cmNlQ292ZXJhZ2VYIiwic291cmNlV29ybGRXaWR0aCIsIndyYXBzWCIsIm5lZWRzU3ViZGl2aXNpb24iLCJpc0Zpbml0ZSIsImlzTm90RmluaXRlIiwiY2VudGVyU3JjIiwiYmMiLCJiY1NyYyIsImRhIiwiZGFTcmMiLCJhYiIsImFiU3JjIiwiY2QiLCJjZFNyYyIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudCIsImdldFRyaWFuZ2xlcyIsImJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyIsImRyYXdUZXN0VHJpYW5nbGUiLCJ1MSIsInYxIiwidTIiLCJ2MiIsImNsb3NlUGF0aCIsInJlc3RvcmUiLCJ2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyIsImNhbGN1bGF0ZVNvdXJjZVJlc29sdXRpb24iLCJ0YXJnZXRNZXRlcnNQZXJVbml0Iiwic291cmNlTWV0ZXJzUGVyVW5pdCIsInNvdXJjZUV4dGVudCIsImNvbXBlbnNhdGlvbkZhY3RvciIsInNvdXJjZVRpbGVHcmlkIiwidGFyZ2V0VGlsZUdyaWQiLCJ3cmFwcGVkVGlsZUNvb3JkIiwiZ3V0dGVyIiwiZ2V0VGlsZUZ1bmN0aW9uIiwicmVuZGVyRWRnZXMiLCJyZW5kZXJFZGdlc18iLCJwaXhlbFJhdGlvXyIsImd1dHRlcl8iLCJjYW52YXNfIiwic291cmNlVGlsZUdyaWRfIiwidGFyZ2V0VGlsZUdyaWRfIiwid3JhcHBlZFRpbGVDb29yZF8iLCJzb3VyY2VUaWxlc18iLCJzb3VyY2VzTGlzdGVuZXJLZXlzXyIsInNvdXJjZVpfIiwiZ2V0VGlsZUNvb3JkRXh0ZW50IiwibWF4VGFyZ2V0RXh0ZW50IiwibGltaXRlZFRhcmdldEV4dGVudCIsInNvdXJjZVByb2pFeHRlbnQiLCJjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uIiwiZXJyb3JUaHJlc2hvbGRJblBpeGVscyIsInRyaWFuZ3VsYXRpb25fIiwiZ2V0WkZvclJlc29sdXRpb24iLCJzb3VyY2VSYW5nZSIsImdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoiLCJzcmNYIiwic3JjWSIsInJlcHJvamVjdF8iLCJzb3VyY2VzIiwiZ2V0VGlsZVNpemUiLCJ0cmlhbmd1bGF0aW9uIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwicGl4ZWxSb3VuZCIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsInNvdXJjZURhdGFFeHRlbnQiLCJjYW52YXNXaWR0aEluVW5pdHMiLCJjYW52YXNIZWlnaHRJblVuaXRzIiwic3RpdGNoQ29udGV4dCIsInN0aXRjaFNjYWxlIiwieFBvcyIsInlQb3MiLCJzcmNXaWR0aCIsInNyY0hlaWdodCIsInRhcmdldFRvcExlZnQiLCJ1MCIsInYwIiwic291cmNlTnVtZXJpY2FsU2hpZnRYIiwic291cmNlTnVtZXJpY2FsU2hpZnRZIiwiYWZmaW5lQ29lZnMiLCJtYXhSb3ciLCJtYXhFbCIsImFic1ZhbHVlIiwiY29lZiIsImwiLCJtIiwic29sdmVMaW5lYXJTeXN0ZW0iLCJpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nIiwic3RlcHMiLCJ1ZCIsInZkIiwic3RlcCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwibGVmdFRvTG9hZCIsInNvdXJjZUxpc3RlbktleSIsInVubGlzdGVuU291cmNlc18iLCJUaWxlUmFuZ2UiLCJjb250YWlucyIsImNvbnRhaW5zVGlsZVJhbmdlIiwiZ2V0SGVpZ2h0IiwiZ2V0U2l6ZSIsImdldFdpZHRoIiwiaGFzQXJlYSIsInRvU2l6ZSIsInRpbGVMYXllciIsImV4dGVudENoYW5nZWQiLCJyZW5kZXJlZEV4dGVudF8iLCJyZW5kZXJlZFBpeGVsUmF0aW8iLCJyZW5kZXJlZFByb2plY3Rpb24iLCJyZW5kZXJlZFJldmlzaW9uIiwicmVuZGVyZWRUaWxlcyIsIm5ld1RpbGVzXyIsInRtcEV4dGVudCIsInRtcFRpbGVSYW5nZV8iLCJpc0RyYXdhYmxlVGlsZSIsInRpbGVTdGF0ZSIsImdldFRpbGUiLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSIsImdldFRpbGVHcmlkRm9yUHJvamVjdGlvbiIsInRpbGVQaXhlbFJhdGlvIiwiZ2V0VGlsZVBpeGVsUmF0aW8iLCJnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFoiLCJ0aWxlT3JpZ2luIiwiZ2V0T3JpZ2luIiwidGlsZVNpemUiLCJ0aWxlUmVzb2x1dGlvbiIsImdldEd1dHRlckZvclByb2plY3Rpb24iLCJsYXllckluZGV4Iiwidmlld1Jlc29sdXRpb24iLCJ2aWV3Q2VudGVyIiwidGlsZVNvdXJjZSIsInNvdXJjZVJldmlzaW9uIiwiekRpcmVjdGlvbiIsImNhbnZhc0V4dGVudCIsInRpbGVzVG9EcmF3QnlaIiwiZmluZExvYWRlZFRpbGVzIiwidG1wVGlsZVJhbmdlIiwidmlld3BvcnQiLCJ0aWxlQ29vcmRJbnRlcnNlY3RzVmlld3BvcnQiLCJ1aWQiLCJjaGlsZFRpbGVSYW5nZSIsImdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlIiwiY292ZXJlZCIsImZvckVhY2hUaWxlQ29vcmRQYXJlbnRUaWxlUmFuZ2UiLCJjYW52YXNTY2FsZSIsImNhbnZhc1RyYW5zZm9ybSIsInRyYW5zZm9ybVN0cmluZyIsImpvaW4iLCJnZXRJbnRlcnBvbGF0ZSIsImNsaXBzIiwiY2xpcFpzIiwiY3VycmVudENsaXAiLCJ6cyIsImdldE9wYXF1ZSIsInJldmVyc2UiLCJjdXJyZW50WiIsImN1cnJlbnRUaWxlUGl4ZWxTaXplIiwiZ2V0VGlsZVBpeGVsU2l6ZSIsImN1cnJlbnRTY2FsZSIsIm9yaWdpblRpbGVDb29yZCIsIm9yaWdpblRpbGVFeHRlbnQiLCJvcmlnaW4iLCJ0aWxlR3V0dGVyIiwidGlsZXNUb0RyYXciLCJ0aWxlQ29vcmRLZXkiLCJ4SW5kZXgiLCJuZXh0WCIsInlJbmRleCIsIm5leHRZIiwiY29udGV4dFNhdmVkIiwiZHJhd1RpbGVJbWFnZSIsInVuc2hpZnQiLCJ1cGRhdGVVc2VkVGlsZXMiLCJ1c2VkVGlsZXMiLCJtYW5hZ2VUaWxlUHlyYW1pZCIsInNjaGVkdWxlRXhwaXJlQ2FjaGUiLCJnZXRUaWxlSW1hZ2UiLCJhbHBoYSIsImFscGhhQ2hhbmdlZCIsImdsb2JhbEFscGhhIiwiY2FuRXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb24iLCJ0aWxlU291cmNlS2V5IiwiZXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb25zIiwidGlsZUNhbGxiYWNrIiwid2FudGVkVGlsZXMiLCJ0aWxlUXVldWUiLCJ0aWxlQ291bnQiLCJpc0tleVF1ZXVlZCIsImVucXVldWUiLCJnZXRUaWxlQ29vcmRDZW50ZXIiLCJ1c2VUaWxlIiwidXBkYXRlQ2FjaGVTaXplIiwiQmFzZVRpbGUiLCJDb2xsZWN0aW9uRXZlbnQiLCJ1bmlxdWVfIiwidW5pcXVlIiwiYXJyYXlfIiwiYXNzZXJ0VW5pcXVlXyIsInVwZGF0ZUxlbmd0aF8iLCJnZXRMZW5ndGgiLCJnZXRBcnJheSIsIml0ZW0iLCJpbnNlcnRBdCIsImVsZW0iLCJDb2xsZWN0aW9uRXZlbnRUeXBlIiwicmVtb3ZlQXQiLCJyZW1vdmUiLCJzZXRBdCIsImV4Y2VwdCIsImFzU3RyaW5nIiwic2hhcmVkIiwiY2FjaGVfIiwiY2FjaGVTaXplXyIsIm1heENhY2hlU2l6ZV8iLCJleHBpcmUiLCJpY29uSW1hZ2UiLCJzZXRTaXplIiwibWF4Q2FjaGVTaXplIiwiZXhwaXJlSWNvbkNhY2hlIiwibWFwXyIsImRpc3BhdGNoUmVuZGVyRXZlbnQiLCJjYWxjdWxhdGVNYXRyaWNlczJEIiwiY2hlY2tXcmFwcGVkIiwibGF5ZXJGaWx0ZXIiLCJ0aGlzQXJnMiIsImZlYXR1cmUiLCJ0cmFuc2xhdGVkQ29vcmRpbmF0ZSIsIm9mZnNldHMiLCJsYXllclN0YXRlcyIsIm51bUxheWVycyIsInRtcENvb3JkIiwiZ2V0V3JhcFgiLCJvcmRlciIsImRpc3RhbmNlU3EiLCJoYXNGZWF0dXJlQXRDb29yZGluYXRlIiwiZ2V0TWFwIiwiZmx1c2hEZWNsdXR0ZXJJdGVtcyIsInNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlIiwiQ0xBU1NfSElEREVOIiwiQ0xBU1NfVU5TRUxFQ1RBQkxFIiwiQ0xBU1NfQ09OVFJPTCIsIkNMQVNTX0NPTExBUFNFRCIsImNoZWNrZWRGb250cyIsIlJlZ0V4cCIsInJlZmVyZW5jZUZvbnRzIiwiTWFwIiwiZm9udENoYW5nZUxpc3RlbmVyS2V5XyIsInJlZHJhd1RleHQiLCJlbGVtZW50XyIsImdldFZpZXdwb3J0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNoaWxkcmVuXyIsInJlbmRlcmVkVmlzaWJsZV8iLCJkZWNsdXR0ZXJMYXllcnNfIiwiZGlzcGxheSIsImRlY2x1dHRlckxheWVycyIsInByZXZpb3VzRWxlbWVudCIsInNvdXJjZVN0YXRlIiwiY2hpbGRyZW4iLCJvbGRDaGlsZHJlbiIsImNoaWxkTm9kZXMiLCJvbGRDaGlsZCIsIm5ld0NoaWxkIiwicmVwbGFjZUNoaWxkcmVuIiwibGF5ZXJzIiwicmVuZGVyRGVjbHV0dGVyIiwiR3JvdXBFdmVudCIsIkxheWVyR3JvdXAiLCJsYXllcnNMaXN0ZW5lcktleXNfIiwibGlzdGVuZXJLZXlzXyIsImhhbmRsZUxheWVyc0NoYW5nZWRfIiwic2V0TGF5ZXJzIiwiaGFuZGxlTGF5ZXJDaGFuZ2VfIiwiZ2V0TGF5ZXJzIiwiaGFuZGxlTGF5ZXJzQWRkXyIsImhhbmRsZUxheWVyc1JlbW92ZV8iLCJsYXllcnNBcnJheSIsInJlZ2lzdGVyTGF5ZXJMaXN0ZW5lcnNfIiwiaGFuZGxlTGF5ZXJHcm91cEFkZF8iLCJoYW5kbGVMYXllckdyb3VwUmVtb3ZlXyIsImNvbGxlY3Rpb25FdmVudCIsImNvbGxlY3Rpb24iLCJjdXJyZW50TGF5ZXJzIiwicG9zIiwib3duTGF5ZXJTdGF0ZSIsImRlZmF1bHRaSW5kZXgiLCJvcmlnaW5hbEV2ZW50IiwiZHJhZ2dpbmciLCJhY3RpdmVQb2ludGVycyIsInBpeGVsXyIsImNvb3JkaW5hdGVfIiwiZ2V0RXZlbnRQaXhlbCIsImdldENvb3JkaW5hdGVGcm9tUGl4ZWwiLCJTSU5HTEVDTElDSyIsIkNMSUNLIiwiREJMQ0xJQ0siLCJQT0lOVEVSRFJBRyIsIlBPSU5URVJNT1ZFIiwiUE9JTlRFUkRPV04iLCJQT0lOVEVSVVAiLCJQT0lOVEVST1ZFUiIsIlBPSU5URVJPVVQiLCJQT0lOVEVSRU5URVIiLCJQT0lOVEVSTEVBVkUiLCJQT0lOVEVSQ0FOQ0VMIiwibW92ZVRvbGVyYW5jZSIsImNsaWNrVGltZW91dElkXyIsImVtdWxhdGVDbGlja3NfIiwiZHJhZ2dpbmdfIiwiZHJhZ0xpc3RlbmVyS2V5c18iLCJtb3ZlVG9sZXJhbmNlXyIsImRvd25fIiwiYWN0aXZlUG9pbnRlcnNfIiwidHJhY2tlZFRvdWNoZXNfIiwicG9pbnRlcmRvd25MaXN0ZW5lcktleV8iLCJoYW5kbGVQb2ludGVyRG93bl8iLCJvcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfIiwicmVsYXllZExpc3RlbmVyS2V5XyIsInJlbGF5TW92ZUV2ZW50XyIsImJvdW5kSGFuZGxlVG91Y2hNb3ZlXyIsImhhbmRsZVRvdWNoTW92ZV8iLCJlbXVsYXRlQ2xpY2tfIiwicG9pbnRlckV2ZW50IiwibmV3RXZlbnQiLCJjbGVhclRpbWVvdXQiLCJ1cGRhdGVBY3RpdmVQb2ludGVyc18iLCJwb2ludGVySWQiLCJoYW5kbGVQb2ludGVyVXBfIiwiaXNNb3VzZUFjdGlvbkJ1dHRvbl8iLCJidXR0b24iLCJQb2ludGVyRXZlbnQiLCJ3cml0YWJsZSIsImRvYyIsImdldE93bmVyRG9jdW1lbnQiLCJoYW5kbGVQb2ludGVyTW92ZV8iLCJnZXRSb290Tm9kZSIsImlzTW92aW5nXyIsImNhbmNlbGFibGUiLCJjbGllbnRYIiwiY2xpZW50WSIsIkRST1AiLCJwcmlvcml0eUZ1bmN0aW9uIiwia2V5RnVuY3Rpb24iLCJwcmlvcml0eUZ1bmN0aW9uXyIsImtleUZ1bmN0aW9uXyIsImVsZW1lbnRzXyIsInByaW9yaXRpZXNfIiwicXVldWVkRWxlbWVudHNfIiwiZGVxdWV1ZSIsImVsZW1lbnRzIiwicHJpb3JpdGllcyIsInNpZnRVcF8iLCJlbGVtZW50S2V5IiwicHJpb3JpdHkiLCJzaWZ0RG93bl8iLCJnZXRDb3VudCIsImdldExlZnRDaGlsZEluZGV4XyIsImdldFJpZ2h0Q2hpbGRJbmRleF8iLCJnZXRQYXJlbnRJbmRleF8iLCJoZWFwaWZ5XyIsImlzRW1wdHkiLCJpc1F1ZXVlZCIsImNvdW50Iiwic3RhcnRJbmRleCIsImxJbmRleCIsInJJbmRleCIsInNtYWxsZXJDaGlsZEluZGV4IiwicGFyZW50SW5kZXgiLCJyZXByaW9yaXRpemUiLCJ0aWxlUHJpb3JpdHlGdW5jdGlvbiIsInRpbGVDaGFuZ2VDYWxsYmFjayIsImJvdW5kSGFuZGxlVGlsZUNoYW5nZV8iLCJoYW5kbGVUaWxlQ2hhbmdlIiwidGlsZUNoYW5nZUNhbGxiYWNrXyIsInRpbGVzTG9hZGluZ18iLCJ0aWxlc0xvYWRpbmdLZXlzXyIsImFkZGVkIiwiZ2V0VGlsZXNMb2FkaW5nIiwidGlsZUtleSIsImxvYWRNb3JlVGlsZXMiLCJtYXhUb3RhbExvYWRpbmciLCJtYXhOZXdMb2FkcyIsIm5ld0xvYWRzIiwicG9pbnRlckV2ZW50cyIsInRhcmdldF8iLCJzZXRUYXJnZXQiLCJnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50IiwiTWFwRXZlbnRUeXBlIiwibWFwRXZlbnQiLCJnZXRFbGVtZW50QnlJZCIsInVsRWxlbWVudF8iLCJjb2xsYXBzZWRfIiwiY29sbGFwc2VkIiwidXNlckNvbGxhcHNlZF8iLCJvdmVycmlkZUNvbGxhcHNpYmxlXyIsImNvbGxhcHNpYmxlIiwiY29sbGFwc2libGVfIiwidGlwTGFiZWwiLCJleHBhbmRDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsIiwiY29sbGFwc2VDbGFzc05hbWUiLCJjb2xsYXBzZUxhYmVsXyIsInRleHRDb250ZW50IiwibGFiZWwiLCJsYWJlbF8iLCJhY3RpdmVMYWJlbCIsInRvZ2dsZUJ1dHRvbl8iLCJzZXRBdHRyaWJ1dGUiLCJ0aXRsZSIsImhhbmRsZUNsaWNrXyIsImNzc0NsYXNzZXMiLCJyZW5kZXJlZEF0dHJpYnV0aW9uc18iLCJjb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyIsInZpc2libGVBdHRyaWJ1dGlvbnMiLCJmcm9tIiwiU2V0IiwiZ2V0QWxsTGF5ZXJzIiwiZmxhdE1hcCIsImdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlIiwic2V0Q29sbGFwc2libGUiLCJ1cGRhdGVFbGVtZW50XyIsImxhc3RDaGlsZCIsInJlbW92ZUNoaWxkcmVuIiwiaW5uZXJIVE1MIiwiaGFuZGxlVG9nZ2xlXyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldENvbGxhcHNpYmxlIiwic2V0Q29sbGFwc2VkIiwiZ2V0Q29sbGFwc2VkIiwiY29tcGFzc0NsYXNzTmFtZSIsImNhbGxSZXNldE5vcnRoXyIsInJlc2V0Tm9ydGgiLCJkdXJhdGlvbl8iLCJhdXRvSGlkZV8iLCJhdXRvSGlkZSIsInJvdGF0aW9uXyIsInJlc2V0Tm9ydGhfIiwiem9vbUluQ2xhc3NOYW1lIiwiem9vbU91dENsYXNzTmFtZSIsInpvb21JbkxhYmVsIiwiem9vbU91dExhYmVsIiwiem9vbUluVGlwTGFiZWwiLCJ6b29tT3V0VGlwTGFiZWwiLCJpbkVsZW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsIm91dEVsZW1lbnQiLCJ6b29tQnlEZWx0YV8iLCJjdXJyZW50Wm9vbSIsIm5ld1pvb20iLCJ6b29tQnlEZWx0YSIsInNldEFjdGl2ZSIsImdldEFjdGl2ZSIsIm1hcEJyb3dzZXJFdmVudCIsImFjdGl2ZSIsImRlbHRhXyIsInN0b3BFdmVudCIsImJyb3dzZXJFdmVudCIsInNoaWZ0S2V5IiwiaGFuZGxlRG93bkV2ZW50IiwiaGFuZGxlRHJhZ0V2ZW50IiwiaGFuZGxlTW92ZUV2ZW50IiwiaGFuZGxlVXBFdmVudCIsInN0b3BEb3duIiwiaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSIsInRhcmdldFBvaW50ZXJzIiwiZ2V0UG9pbnRlckNvdW50IiwidXBkYXRlVHJhY2tlZFBvaW50ZXJzXyIsImhhbmRsZWRVcCIsImhhbmRsZWQiLCJjb25kaXRpb25zIiwicGFzcyIsImFsdFNoaWZ0S2V5c09ubHkiLCJhbHRLZXkiLCJtZXRhS2V5IiwiY3RybEtleSIsImZvY3VzV2l0aFRhYmluZGV4IiwiZ2V0VGFyZ2V0RWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsInRhcmdldEVsZW1lbnQiLCJhY3RpdmVFbGVtZW50IiwiYWx3YXlzIiwibW91c2VBY3Rpb25CdXR0b24iLCJub01vZGlmaWVyS2V5cyIsInNoaWZ0S2V5T25seSIsInRhcmdldE5vdEVkaXRhYmxlIiwidGFnTmFtZSIsImlzQ29udGVudEVkaXRhYmxlIiwibW91c2VPbmx5IiwicG9pbnRlclR5cGUiLCJwcmltYXJ5QWN0aW9uIiwiaXNQcmltYXJ5IiwiUG9pbnRlciIsImtpbmV0aWNfIiwia2luZXRpYyIsImxhc3RDZW50cm9pZCIsImxhc3RQb2ludGVyc0NvdW50XyIsInBhbm5pbmdfIiwiY29uZGl0aW9uIiwiY29uZGl0aW9uXyIsIm9uRm9jdXNPbmx5Iiwibm9LaW5ldGljXyIsImNlbnRyb2lkIiwidXBkYXRlIiwiYmVnaW4iLCJnZXRBbmdsZSIsImNlbnRlcnB4IiwiZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsIiwiZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsIiwibGFzdEFuZ2xlXyIsImdlb21ldHJ5XyIsInN0YXJ0UGl4ZWxfIiwiZW5kUGl4ZWxfIiwicmVuZGVyXyIsInN0YXJ0UGl4ZWwiLCJlbmRQaXhlbCIsInB4IiwidG9wIiwiZ2V0T3ZlcmxheUNvbnRhaW5lciIsInNldFBpeGVscyIsImNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkiLCJnZXRHZW9tZXRyeSIsIkRyYWdCb3hFdmVudCIsImJveF8iLCJtaW5BcmVhXyIsIm1pbkFyZWEiLCJvbkJveEVuZCIsImJveEVuZENvbmRpdGlvbl8iLCJib3hFbmRDb25kaXRpb24iLCJkZWZhdWx0Qm94RW5kQ29uZGl0aW9uIiwiY29tcGxldGVCb3giLCJvdXRfIiwib3V0IiwiZGVmYXVsdENvbmRpdGlvbl8iLCJwaXhlbERlbHRhXyIsInBpeGVsRGVsdGEiLCJrZXlFdmVudCIsIktleSIsIm1hcFVuaXRzRGVsdGEiLCJwYW4iLCJwbGF0Zm9ybU1vZGlmaWVyS2V5IiwiZGVjYXkiLCJtaW5WZWxvY2l0eSIsImRlbGF5IiwiZGVjYXlfIiwibWluVmVsb2NpdHlfIiwiZGVsYXlfIiwicG9pbnRzXyIsImFuZ2xlXyIsImluaXRpYWxWZWxvY2l0eV8iLCJsYXN0SW5kZXgiLCJmaXJzdEluZGV4IiwidG90YWxEZWx0YV8iLCJsYXN0RGVsdGFfIiwidGltZW91dF8iLCJ0aW1lb3V0IiwidXNlQW5jaG9yXyIsInVzZUFuY2hvciIsImNvbnN0cmFpblJlc29sdXRpb25fIiwibGFzdEFuY2hvcl8iLCJzdGFydFRpbWVfIiwidGltZW91dElkXyIsIm1vZGVfIiwidHJhY2twYWRFdmVudEdhcF8iLCJ0cmFja3BhZFRpbWVvdXRJZF8iLCJkZWx0YVBlclpvb21fIiwiZW5kSW50ZXJhY3Rpb25fIiwid2hlZWxFdmVudCIsImRlbHRhTW9kZSIsIldoZWVsRXZlbnQiLCJET01fREVMVEFfUElYRUwiLCJET01fREVMVEFfTElORSIsInRpbWVMZWZ0IiwiaGFuZGxlV2hlZWxab29tXyIsInNldE1vdXNlQW5jaG9yIiwicG9pbnRlck9wdGlvbnMiLCJhbmNob3JfIiwicm90YXRpbmdfIiwicm90YXRpb25EZWx0YV8iLCJ0aHJlc2hvbGRfIiwidGhyZXNob2xkIiwicm90YXRpb25EZWx0YSIsInRvdWNoMCIsInRvdWNoMSIsImxhc3REaXN0YW5jZV8iLCJsYXN0U2NhbGVEZWx0YV8iLCJzY2FsZURlbHRhIiwicmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eSIsInNldExheWVyTWFwUHJvcGVydHkiLCJvcHRpb25zSW50ZXJuYWwiLCJrZXlib2FyZEV2ZW50VGFyZ2V0IiwibGF5ZXJHcm91cCIsImNvbnRyb2xzIiwiaW50ZXJhY3Rpb25zIiwib3ZlcmxheXMiLCJNYXBQcm9wZXJ0eSIsImNyZWF0ZU9wdGlvbnNJbnRlcm5hbCIsInJlbmRlckNvbXBsZXRlXyIsImxvYWRlZF8iLCJib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8iLCJoYW5kbGVCcm93c2VyRXZlbnQiLCJtYXhUaWxlc0xvYWRpbmdfIiwibWF4VGlsZXNMb2FkaW5nIiwicG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfIiwiYW5pbWF0aW9uRGVsYXlLZXlfIiwiYW5pbWF0aW9uRGVsYXlfIiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fIiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fIiwiZnJhbWVJbmRleF8iLCJmcmFtZVN0YXRlXyIsInByZXZpb3VzRXh0ZW50XyIsInZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyIsInZpZXdDaGFuZ2VMaXN0ZW5lcktleV8iLCJsYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfIiwidmlld3BvcnRfIiwib3ZlcmZsb3ciLCJvdmVybGF5Q29udGFpbmVyXyIsIm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfIiwibWFwQnJvd3NlckV2ZW50SGFuZGxlcl8iLCJrZXlib2FyZEV2ZW50VGFyZ2V0XyIsInRhcmdldENoYW5nZUhhbmRsZXJLZXlzXyIsInRhcmdldEVsZW1lbnRfIiwicmVzaXplT2JzZXJ2ZXJfIiwiUmVzaXplT2JzZXJ2ZXIiLCJ1cGRhdGVTaXplIiwiem9vbU9wdGlvbnMiLCJyb3RhdGVPcHRpb25zIiwiYXR0cmlidXRpb24iLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJhbHRTaGlmdERyYWdSb3RhdGUiLCJkb3VibGVDbGlja1pvb20iLCJ6b29tRGVsdGEiLCJ6b29tRHVyYXRpb24iLCJkcmFnUGFuIiwicGluY2hSb3RhdGUiLCJwaW5jaFpvb20iLCJrZXlib2FyZCIsIm1vdXNlV2hlZWxab29tIiwic2hpZnREcmFnWm9vbSIsIm92ZXJsYXlzXyIsIm92ZXJsYXlJZEluZGV4XyIsInBvc3RSZW5kZXJGdW5jdGlvbnNfIiwidGlsZVF1ZXVlXyIsImdldFRpbGVQcmlvcml0eSIsImhhbmRsZVRpbGVDaGFuZ2VfIiwiaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfIiwiaGFuZGxlVmlld0NoYW5nZWRfIiwiaGFuZGxlU2l6ZUNoYW5nZWRfIiwiaGFuZGxlVGFyZ2V0Q2hhbmdlZF8iLCJ2aWV3T3B0aW9ucyIsInNldFZpZXciLCJhZGRPdmVybGF5SW50ZXJuYWxfIiwiZ2V0SWQiLCJjb250cm9sIiwiaW50ZXJhY3Rpb24iLCJhZGRDb250cm9sIiwiZ2V0Q29udHJvbHMiLCJhZGRJbnRlcmFjdGlvbiIsImdldEludGVyYWN0aW9ucyIsImFkZExheWVyIiwiaGFuZGxlTGF5ZXJBZGRfIiwiYWRkT3ZlcmxheSIsIm92ZXJsYXkiLCJnZXRPdmVybGF5cyIsImRpc2Nvbm5lY3QiLCJmb3JFYWNoRmVhdHVyZUF0UGl4ZWwiLCJnZXRGZWF0dXJlc0F0UGl4ZWwiLCJmZWF0dXJlcyIsImFkZExheWVyc0Zyb20iLCJoYXNGZWF0dXJlQXRQaXhlbCIsImdldEV2ZW50Q29vcmRpbmF0ZSIsImdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsIiwidmlld3BvcnRQb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInNjYWxlWCIsInNjYWxlWSIsImV2ZW50UG9zaXRpb24iLCJjaGFuZ2VkVG91Y2hlcyIsImdldFRhcmdldCIsImdldE92ZXJsYXlCeUlkIiwiZ3JvdXAiLCJnZXRMb2FkaW5nT3JOb3RSZWFkeSIsInJlbmRlcmVyIiwibG9hZGluZyIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGUiLCJ2aWV3Q29vcmRpbmF0ZSIsIm93bmVyRG9jdW1lbnQiLCJ0aWxlQ2VudGVyIiwiaGFuZGxlTWFwQnJvd3NlckV2ZW50Iiwicm9vdE5vZGUiLCJkb2N1bWVudEVsZW1lbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsImhhbmRsZVBvc3RSZW5kZXIiLCJ2aWV3SGludHMiLCJsb3dPbkZyYW1lQnVkZ2V0IiwidW5vYnNlcnZlIiwiU2hhZG93Um9vdCIsImhvc3QiLCJDb21wb3NpdGUiLCJvYnNlcnZlIiwiaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8iLCJ1cGRhdGVWaWV3cG9ydFNpemVfIiwiaGFuZGxlTGF5ZXJSZW1vdmVfIiwiaXNSZW5kZXJlZCIsInJlbmRlckZyYW1lXyIsInJlbmRlclN5bmMiLCJyZW1vdmVDb250cm9sIiwicmVtb3ZlSW50ZXJhY3Rpb24iLCJyZW1vdmVMYXllciIsInJlbW92ZU92ZXJsYXkiLCJwcmV2aW91c0ZyYW1lU3RhdGUiLCJkZWNsdXR0ZXJUcmVlIiwibWFwSWQiLCJyZW5kZXJUYXJnZXRzIiwibmV4dEV4dGVudCIsInNldExheWVyR3JvdXAiLCJvbGRMYXllckdyb3VwIiwiY29tcHV0ZWRTdHlsZSIsIm9mZnNldFdpZHRoIiwicGFyc2VGbG9hdCIsIm9mZnNldEhlaWdodCIsImdldENsaWVudFJlY3RzIiwib2xkU2l6ZSIsIkNvbXBvc2l0ZUNvbnRyb2wiLCJDb250cm9sIiwiY2hpbGRDb250cm9scyIsIm9wdHMiLCJnZXRDaGlsZENvbnRyb2xzIiwic2V0Q2hpbGRDb250cm9scyIsImdldEVsZW1lbnQiLCJDb250YWluZXIiLCJzdHlsZUNsYXNzIiwiZ2V0U3R5bGVDbGFzcyIsIkZvb3RlciIsInRvQXJyYXkiLCJCdXR0b24iLCJ0b29sdGlwQXNUZXh0RWxlbWVudCIsIl9hIiwidW5pY29kZSIsImljb25DbGFzc05hbWUiLCJ0b29sdGlwIiwiYnV0dG9uQ29udGFpbmVyRWxlbWVudCIsImNvbnRhaW5lckNsYXNzTmFtZSIsImJ1dHRvbkVsZW1lbnQiLCJnZXRJY29uRWxlbWVudEZvclVuaWNvZGUiLCJnZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUiLCJhcHBlbmQiLCJkaXZFbGVtZW50Iiwic3BhbkVsZW1lbnQiLCJnZXRCdXR0b24iLCJzZXRCdXR0b25Vbmljb2RlIiwic2V0QnV0dG9uSWNvbkNsYXNzTmFtZSIsImljb25FbGVtZW50IiwiZnJvbUNvZGVQb2ludCIsIlRvZ2dsZUV2ZW50IiwiQmFzZUV2ZW50IiwiaXNUb2dnbGVkIiwiVG9nZ2xlQnV0dG9uIiwiY29udGFpbmVyVG9Ub2dnbGUiLCJfaXNUb2dnbGVkIiwidW5pY29kZVRvZ2dsZWQiLCJpY29uQ2xhc3NOYW1lVG9nZ2xlZCIsInBhcmVudEVsZW1lbnQiLCJnZXRQYXJlbnRFbGVtZW50Iiwib3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudERpdiIsInF1ZXJ5U2VsZWN0b3IiLCJyZW1vdmVDaGlsZHJlbklmRXhpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hpbGQiLCJ0b2dnbGVDbGFzcyIsInNlbGVjdG9yczJ0b2dnbGUiLCJ0b2dnbGVDbGFzc05hbWVzIiwiYW5jZXN0b3IiLCJzZWxlY3RvcjJ0b2dnbGUiLCJ0b2dnbGVFbGVtZW50IiwidG9nZ2xlQ2xhc3NOYW1lIiwiY3JlYXRlQ2hpbGRJZk5vdEV4aXN0IiwiZ2V0Q29udGFpbmVyVG9Ub2dnbGUiLCJjbG9zZXN0UGFyZW50IiwiY2xvc2VzdCIsIkJvdHRvbVJpZ2h0IiwidG9nZ2xlQnV0dG9uIiwidmVydGljYWxDb250cm9scyIsImNyZWF0ZVRvZ2dsZSIsImhvcml6b250YWxDb250cm9scyIsImdldFRvZ2dsZUJ1dHRvbiIsImRlZmF1bHRWaWV3IiwiaGFuZGxlSG9yaXpvbnRhbENvbnRyb2xzRm9yU2l6ZSIsImNsaWVudFdpZHRoIiwiY3Rsc1RvTW92ZSIsImN0bCIsIk1PVkVEX0ZST01fSE9SSVpPTlRBTF9LRVkiLCJfYiIsIl9jIiwiX2QiLCJfZSIsIlRvcFJpZ2h0IiwiR2VvbG9jYXRpb25FcnJvciIsInBvc2l0aW9uXyIsInRyYW5zZm9ybV8iLCJ3YXRjaElkXyIsImhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyIsImhhbmRsZVRyYWNraW5nQ2hhbmdlZF8iLCJzZXRQcm9qZWN0aW9uIiwidHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmciLCJ0cmFja2luZyIsImdldFRyYWNraW5nIiwiZ2VvbG9jYXRpb24iLCJ3YXRjaFBvc2l0aW9uIiwicG9zaXRpb25DaGFuZ2VfIiwicG9zaXRpb25FcnJvcl8iLCJnZXRUcmFja2luZ09wdGlvbnMiLCJjbGVhcldhdGNoIiwiYWNjdXJhY3kiLCJhbHRpdHVkZSIsImFsdGl0dWRlQWNjdXJhY3kiLCJoZWFkaW5nIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJwcm9qZWN0ZWRQb3NpdGlvbiIsInNwZWVkIiwic3BoZXJlUmFkaXVzIiwiY2lyY3VsYXIiLCJnZXRBY2N1cmFjeSIsImdldEFjY3VyYWN5R2VvbWV0cnkiLCJnZXRBbHRpdHVkZSIsImdldEFsdGl0dWRlQWNjdXJhY3kiLCJnZXRIZWFkaW5nIiwiZ2V0UG9zaXRpb24iLCJnZXRTcGVlZCIsIkxvY2F0aW9uUmV0cmlldmVkRXZlbnQiLCJHZW9Mb2NhdGUiLCJnZW9Mb2NhdGlvbk9wdGlvbnMiLCJfZ2VvTG9jYXRpb24iLCJHZW9sb2NhdGlvbiIsImdlb0xvY2F0aW9uIiwiQXR0cmlidXRpb24iLCJPbEF0dHJpYnV0aW9uIiwiUFJPSkVDVElPTiIsIkNPT1JESU5BVEVfRk9STUFUIiwiY29vcmRpbmF0ZUZvcm1hdCIsInNldENvb3JkaW5hdGVGb3JtYXQiLCJyZW5kZXJPbk1vdXNlT3V0XyIsInBsYWNlaG9sZGVyIiwicGxhY2Vob2xkZXJfIiwicmVuZGVyZWRIVE1MXyIsIm1hcFByb2plY3Rpb25fIiwid3JhcFhfIiwid3JhcFgiLCJnZXRDb29yZGluYXRlRm9ybWF0IiwiaGFuZGxlTW91c2VNb3ZlIiwidXBkYXRlSFRNTF8iLCJoYW5kbGVNb3VzZU91dCIsImZvcm1hdCIsImh0bWwiLCJNb3VzZVBvc2l0aW9uIiwiT2xNb3VzZVBvc2l0aW9uIiwidGVtcGxhdGUiLCJmcmFjdGlvbkRpZ2l0cyIsInRvRml4ZWQiLCJab29tIiwiT2xab29tIiwiRElTUExBWV9EUEkiLCJMRUFESU5HX0RJR0lUUyIsIlNjYWxlTGluZSIsIm9wdF9vcHRpb25zIiwiX21pbldpZHRoIiwibWluV2lkdGgiLCJyZW5kZXJlZFZpc2libGUiLCJyZW5kZXJlZFdpZHRoIiwicmVuZGVyZWRTVkciLCJkcGkiLCJ1cGRhdGVFbGVtZW50IiwicG9pbnRSZXNvbHV0aW9uVW5pdHMiLCJub21pbmFsQ291bnQiLCJzdWZmaXgiLCJkZWNpbWFsQ291bnQiLCJkZWNpbWFsIiwiZ2VuZXJhdGVkU1ZHIiwiZ2V0R2VuZXJhdGVkU1ZHIiwidHh0Iiwic3ZnIiwiY3JlYXRlRWxlbWVudE5TIiwicmVjdCIsInRleHQiLCJjc3NWYXJpYWJsZXMiLCJzZXRNaW5XaWR0aCIsImdldE1pbldpZHRoIiwiT3ZlcnZpZXdNYXBFdmVudCIsIk92ZXJ2aWV3Iiwib3ZlcnZpZXdDb250YWluZXJFbGVtZW50IiwiZmlndXJlRWxlbWVudCIsIlNWR19DT0RFIiwib25PdmVydmlld0ltYWdlQ2xpY2siLCJzdmdFbGVtZW50IiwiYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50IiwiU1ZHX1dJRFRIIiwiU1ZHX0hFSUdIVCIsIkJBQ0tHUk9VTkRfQ09MT1IiLCJwcmVwZW5kIiwidXBkYXRlQ3Jvc3NoYWlyIiwiZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQiLCJleGlzdGluZ0VsbXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZXhpc3RpbmdFbG0iLCJnZXRDcm9zc2hhaXIiLCJjc3NDbGFzcyIsImxpbmUiLCJjYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoIiwib3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QiLCJjbGlja0xvbkxhdCIsImdldExvbkxhdEZyb21PdmVydmlld1B4Iiwib1B4IiwiY2xpZW50SGVpZ2h0IiwiZ2V0T3ZlcnZpZXdDb250YWluZXJFbGVtZW50IiwiZ2V0U1ZHRWxlbWVudCIsImdldEJhY2tncm91bmRSZWN0RWxlbWVudCIsIlByaW50IiwiU2hhcmUiLCJERUZBVUxUX1RPT0xUSVBfVEVYVCIsIkRFRkFVTFRfVU5JQ09ERSIsIlRvb2xzIiwiVmlld0xpc3QiLCJMYXllciIsImhpZ2hXYXRlck1hcmsiLCJjb3VudF8iLCJlbnRyaWVzXyIsIm9sZGVzdF8iLCJuZXdlc3RfIiwia2VlcCIsImNvbnRhaW5zS2V5IiwiZW50cnkiLCJ2YWx1ZV8iLCJrZXlfIiwibmV3ZXIiLCJvbGRlciIsImdldFZhbHVlcyIsInBlZWtMYXN0IiwicGVla0xhc3RLZXkiLCJwZWVrRmlyc3RLZXkiLCJwZWVrIiwiZ2V0S2V5WlhZIiwicHJ1bmVFeGNlcHROZXdlc3RaIiwiYWRhcHRBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkxpa2UiLCJhdHRyaWJ1dGlvbnNfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGVfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJpbnRlcnBvbGF0ZV8iLCJ2aWV3UmVzb2x2ZXIiLCJ2aWV3UmVqZWN0b3IiLCJ2aWV3UHJvbWlzZV8iLCJyZWplY3QiLCJyZWZyZXNoIiwic2V0QXR0cmlidXRpb25zIiwidG1wVGlsZUNvb3JkIiwic3RyaWN0IiwiY29tcGFyZSIsImV2ZXJ5IiwiY3VycmVudFZhbCIsInJlcyIsImlzU29ydGVkIiwib3JpZ2lucyIsIm9yaWdpbl8iLCJvcmlnaW5zXyIsInRpbGVTaXplc18iLCJ0aWxlU2l6ZXMiLCJ0aWxlU2l6ZV8iLCJmdWxsVGlsZVJhbmdlc18iLCJ0bXBTaXplXyIsInRtcEV4dGVudF8iLCJzaXplcyIsInJlc3RyaWN0ZWRUaWxlUmFuZ2UiLCJjYWxjdWxhdGVUaWxlUmFuZ2VzXyIsImZvckVhY2hUaWxlQ29vcmQiLCJ0ZW1wVGlsZVJhbmdlIiwidGVtcEV4dGVudCIsInRpbGVDb29yZEV4dGVudCIsImdldFRpbGVSYW5nZUZvclRpbGVDb29yZEFuZFoiLCJ0aWxlQ29vcmRaIiwidGlsZUNvb3JkWCIsInRpbGVDb29yZFkiLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFpfIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uIiwib3B0X3RpbGVDb29yZCIsImdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8iLCJyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IiwiZ2V0VGlsZUNvb3JkUmVzb2x1dGlvbiIsImdldEZ1bGxUaWxlUmFuZ2UiLCJvcHRfZGlyZWN0aW9uIiwiZnVsbFRpbGVSYW5nZXMiLCJnZXRGb3JQcm9qZWN0aW9uIiwicmVzb2x1dGlvbnNGcm9tRXh0ZW50IiwiY3JlYXRlRm9yRXh0ZW50IiwiZXh0ZW50RnJvbVByb2plY3Rpb24iLCJjcmVhdGVGb3JQcm9qZWN0aW9uIiwiaGFsZiIsIlRpbGVTb3VyY2VFdmVudCIsIm9wYXF1ZV8iLCJvcGFxdWUiLCJ0aWxlUGl4ZWxSYXRpb18iLCJ0aWxlQ2FjaGUiLCJ0bXBTaXplIiwidGlsZU9wdGlvbnMiLCJnZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwic2V0S2V5IiwiZ2V0VGlsZUdyaWQiLCJnZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24iLCJ3aXRoaW5FeHRlbnRBbmRaIiwiY3JlYXRlRnJvbVRlbXBsYXRlIiwielJlZ0V4IiwieFJlZ0V4IiwieVJlZ0V4IiwiZGFzaFlSZWdFeCIsInJhbmdlIiwiVXJsVGlsZSIsImdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyIsInRpbGVVcmxGdW5jdGlvbiIsInVybHMiLCJzZXRVcmxzIiwidXJsIiwic2V0VXJsIiwidGlsZUxvYWRpbmdLZXlzXyIsImdldFRpbGVMb2FkRnVuY3Rpb24iLCJnZXRUaWxlVXJsRnVuY3Rpb24iLCJnZXRQcm90b3R5cGVPZiIsImdldFVybHMiLCJzZXRUaWxlTG9hZEZ1bmN0aW9uIiwic2V0VGlsZVVybEZ1bmN0aW9uIiwibWF0Y2giLCJzdGFydENoYXJDb2RlIiwiY2hhckNvZGVBdCIsInN0b3BDaGFyQ29kZSIsImNoYXJDb2RlIiwiZnJvbUNoYXJDb2RlIiwic3RvcCIsImV4cGFuZFVybCIsInRlbXBsYXRlcyIsInRpbGVVcmxGdW5jdGlvbnMiLCJjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyIsImNyZWF0ZUZyb21UZW1wbGF0ZXMiLCJkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbiIsImltYWdlVGlsZSIsInRpbGVDbGFzcyIsInRpbGVDYWNoZUZvclByb2plY3Rpb24iLCJ0aWxlR3JpZEZvclByb2plY3Rpb24iLCJyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZF8iLCJyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCIsInJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyIsInVzZWRUaWxlQ2FjaGUiLCJnZXRHdXR0ZXIiLCJ0aGlzUHJvaiIsInByb2pLZXkiLCJjcmVhdGVUaWxlXyIsInVybFRpbGVDb29yZCIsInRpbGVVcmwiLCJnZXRUaWxlSW50ZXJuYWwiLCJuZXdUaWxlIiwic2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMiLCJzZXRUaWxlR3JpZEZvclByb2plY3Rpb24iLCJ0aWxlZ3JpZCIsInByb2oiLCJ4eXpPcHRpb25zIiwiZ3JpZE9wdGlvbnMiLCJjcmVhdGVYWVoiLCJWQVJJQU5UUyIsImdlb2xhbmRiYXNlbWFwIiwiYm1hcGdyYXUiLCJibWFwb3J0aG9mb3RvMzBjbSIsImJtYXBnZWxhZW5kZSIsImJtYXBvYmVyZmxhZWNoZSIsImJtYXBvdmVybGF5IiwiQmFzZW1hcFNvdXJjZSIsIlhZWlNvdXJjZSIsInZhcmlhbnQiLCJUaWxlTGF5ZXIiLCJWaWV3Il0sInNvdXJjZVJvb3QiOiIifQ==