!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["bgis-core"]=e():t["bgis-core"]=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),n="propertychange",o=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){var o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;var i=void 0;if(n>0){for(i=1;i<o;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<o;++i)if(t[i]<=e)return i}else for(i=1;i<o;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return o-1}function s(t,e){for(var n=Array.isArray(e)?e:[e],o=n.length,i=0;i<o;i++)t[t.length]=n[i]}function a(t,e){var n=t.length;if(n!==e.length)return!1;for(var o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function l(){return!0}function u(){return!1}function c(){}var h="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,i=arguments.length;o<i;++o){var r=arguments[o];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n};function p(t){for(var e in t)delete t[e]}var d,f="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e},g=(d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},d(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const v=function(t){function n(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return g(n,t),n.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),o=n[t]||(n[t]=[]);-1===o.indexOf(e)&&o.push(e)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new e(t):t,o=n.type;n.target||(n.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[o];if(r){var s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});o in s||(s[o]=0,a[o]=0),++s[o];for(var l=0,u=r.length;l<u;++l)if(!1===(i="handleEvent"in r[l]?r[l].handleEvent(n):r[l].call(this,n))||n.propagationStopped){i=!1;break}if(--s[o],0===s[o]){var h=a[o];for(delete a[o];h--;)this.removeEventListener(o,c);delete s[o]}return i}},n.prototype.disposeInternal=function(){this.listeners_&&p(this.listeners_)},n.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},n.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},n.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var o=n.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[o]=c,++this.pendingRemovals_[t]):(n.splice(o,1),0===n.length&&delete this.listeners_[t]))}},n}(o),_="change",y="error",m="contextmenu",w="click",C="keydown",x="keypress",E="touchmove",b="wheel";function T(t,e,n,o,i){if(o&&o!==t&&(n=n.bind(o)),i){var r=n;n=function(){t.removeEventListener(e,n),r.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function P(t,e,n,o){return T(t,e,n,o,!0)}function O(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),p(t))}var R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),S=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return R(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(_)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=T(this,t[i],e);return o}return T(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var o=t.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=P(this,t[i],e)}else n=P(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)O(t[e]);else O(t)}(n);else if(Array.isArray(t))for(var o=0,i=t.length;o<i;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},e}(v);S.prototype.on,S.prototype.once,S.prototype.un;const M=S;function A(){return function(){throw new Error("Unimplemented abstract method.")}()}var I=0;function j(t){return t.ol_uid||(t.ol_uid=String(++I))}var L=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.key=n,i.oldValue=o,i}return L(e,t),e}(e);const k=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,j(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return L(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&h({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var o;o="change:"+t,this.dispatchEvent(new F(o,t,e)),o=n,this.dispatchEvent(new F(o,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var o=this.values_||(this.values_={});if(n)o[t]=e;else{var i=o[t];o[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&h(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(M),D="opacity",z="visible",N="extent",G="zIndex",K="maxResolution",Z="minResolution",V="maxZoom",U="minZoom",X="source";var H=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(t){function e(e){var n=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.12.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,o)||this).code=e,n.name="AssertionError",n.message=o,n}return H(e,t),e}(Error);function W(t,e){if(!t)throw new B(e)}function Y(t,e,n){return Math.min(Math.max(t,e),n)}var q="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},Q="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function $(t,e,n,o,i,r){var s=i-n,a=r-o;if(0!==s||0!==a){var l=((t-n)*s+(e-o)*a)/(s*s+a*a);l>1?(n=i,o=r):l>0&&(n+=s*l,o+=a*l)}return J(t,e,n,o)}function J(t,e,n,o){var i=n-t,r=o-e;return i*i+r*r}function tt(t){return 180*t/Math.PI}function et(t){return t*Math.PI/180}function nt(t,e){var n=t%e;return n*e<0?n+e:n}function ot(t,e,n){return t+n*(e-t)}function it(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function rt(t,e){return Math.floor(it(t,e))}function st(t,e){return Math.ceil(it(t,e))}var at=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const lt=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.background_=e.background;var o=h({},e);return"object"==typeof e.properties&&(delete o.properties,h(o,e.properties)),o.opacity=void 0!==e.opacity?e.opacity:1,W("number"==typeof o.opacity,64),o.visible=void 0===e.visible||e.visible,o.zIndex=e.zIndex,o.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,o.minResolution=void 0!==e.minResolution?e.minResolution:0,o.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,o.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return at(e,t),e.prototype.getBackground=function(){return this.background_},e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Y(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return A()},e.prototype.getLayerStatesArray=function(t){return A()},e.prototype.getExtent=function(){return this.get(N)},e.prototype.getMaxResolution=function(){return this.get(K)},e.prototype.getMinResolution=function(){return this.get(Z)},e.prototype.getMinZoom=function(){return this.get(U)},e.prototype.getMaxZoom=function(){return this.get(V)},e.prototype.getOpacity=function(){return this.get(D)},e.prototype.getSourceState=function(){return A()},e.prototype.getVisible=function(){return this.get(z)},e.prototype.getZIndex=function(){return this.get(G)},e.prototype.setBackground=function(t){this.background_=t,this.changed()},e.prototype.setExtent=function(t){this.set(N,t)},e.prototype.setMaxResolution=function(t){this.set(K,t)},e.prototype.setMinResolution=function(t){this.set(Z,t)},e.prototype.setMaxZoom=function(t){this.set(V,t)},e.prototype.setMinZoom=function(t){this.set(U,t)},e.prototype.setOpacity=function(t){W("number"==typeof t,64),this.set(D,t)},e.prototype.setVisible=function(t){this.set(z,t)},e.prototype.setZIndex=function(t){this.set(G,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(k),ut="precompose",ct="rendercomplete",ht="undefined",pt="ready";var dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ft(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var o=e.zoom;return o>t.minZoom&&o<=t.maxZoom}const gt=function(t){function e(e){var n=this,o=h({},e);delete o.source,(n=t.call(this,o)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(X,n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return dt(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(X)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ht},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(O(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=T(t,_,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMapInternal=function(t){this.set("map",t)},e.prototype.getMapInternal=function(){return this.get("map")},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(O(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(O(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=T(t,ut,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);W(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=T(this,_,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(X,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),t.prototype.disposeInternal.call(this)},e}(lt),vt="preload",_t="useInterimTilesOnError";var yt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mt=function(t){function e(e){var n=this,o=e||{},i=h({},o);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==o.preload?o.preload:0),n.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),n}return yt(e,t),e.prototype.getPreload=function(){return this.get(vt)},e.prototype.setPreload=function(t){this.set(vt,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(_t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(_t,t)},e}(gt);var wt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ct=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return wt(e,t),e.prototype.getFeatures=function(t){return A()},e.prototype.prepareFrame=function(t){return A()},e.prototype.renderFrame=function(t,e){return A()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(o,i){var r=this.loadedTileCallback.bind(this,n,o);return t.forEachLoadedTile(e,o,i,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i){},e.prototype.getDataAtPixel=function(t,e,n){return null},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(_,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==pt&&t.changed()},e}(M);var xt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Et=function(t){function e(e,n,o,i){var r=t.call(this,e)||this;return r.inversePixelTransform=n,r.frameState=o,r.context=i,r}return xt(e,t),e}(e);var bt,Tt="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",Pt=-1!==Tt.indexOf("firefox"),Ot=(-1!==Tt.indexOf("safari")&&Tt.indexOf("chrom"),-1!==Tt.indexOf("webkit")&&-1==Tt.indexOf("edge")),Rt=-1!==Tt.indexOf("macintosh"),St="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Mt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,At="undefined"!=typeof Image&&Image.prototype.decode,It=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function jt(t,e){var n=e[0],o=e[1];return e[0]=t[0]*n+t[2]*o+t[4],e[1]=t[1]*n+t[3]*o+t[5],e}function Lt(t,e,n,o,i,r,s,a){var l=Math.sin(r),u=Math.cos(r);return t[0]=o*u,t[1]=i*l,t[2]=-o*l,t[3]=i*u,t[4]=s*o*u-a*o*l+e,t[5]=s*i*l+a*i*u+n,t}function Ft(t,e){var n,o=(n=e)[0]*n[3]-n[1]*n[2];W(0!==o,32);var i=e[0],r=e[1],s=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/o,t[1]=-r/o,t[2]=-s/o,t[3]=i/o,t[4]=(s*u-a*l)/o,t[5]=-(i*u-r*l)/o,t}new Array(6);var kt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Dt=/^([a-z]*)$|^hsla?\(.*\)$/i;var zt=function(){var t={},e=0;return function(n){var o;if(t.hasOwnProperty(n))o=t[n];else{if(e>=1024){var i=0;for(var r in t)0==(3&i++)&&(delete t[r],--e)}o=function(t){var e,n,o,i,r;if(Dt.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return""}(t)),kt.exec(t)){var s,a=t.length-1;s=a<=4?1:2;var l=4===a||8===a;e=parseInt(t.substr(1+0*s,s),16),n=parseInt(t.substr(1+1*s,s),16),o=parseInt(t.substr(1+2*s,s),16),i=l?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,n=(n<<4)+n,o=(o<<4)+o,l&&(i=(i<<4)+i)),r=[e,n,o,i/255]}else 0==t.indexOf("rgba(")?Gt(r=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((r=t.slice(4,-1).split(",").map(Number)).push(1),Gt(r)):W(!1,14);return r}(n),t[n]=o,++e}return o}}();function Nt(t){return Array.isArray(t)?t:zt(t)}function Gt(t){return t[0]=Y(t[0]+.5|0,0,255),t[1]=Y(t[1]+.5|0,0,255),t[2]=Y(t[2]+.5|0,0,255),t[3]=Y(t[3],0,1),t}const Kt="top-left";function Zt(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,o=t.length;n<o;++n)qt(e,t[n]);return e}function Vt(t,e,n){var o,i;return(o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*o+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function Ut(t,e){return Xt(t,e[0],e[1])}function Xt(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Ht(t,e){var n=t[0],o=t[1],i=t[2],r=t[3],s=e[0],a=e[1],l=0;return s<n?l|=16:s>i&&(l|=4),a<o?l|=8:a>r&&(l|=2),0===l&&(l=1),l}function Bt(t,e,n,o,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=o,i):[t,e,n,o]}function Wt(t){return Bt(1/0,1/0,-1/0,-1/0,t)}function Yt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function qt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Qt(t,e,n,o,i){for(;n<o;n+=i)$t(t,e[n],e[n+1]);return t}function $t(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Jt(t,e){var n;return(n=e(ee(t)))||(n=e(ne(t)))||(n=e(ue(t)))?n:(n=e(le(t)))||!1}function te(t){var e=0;return pe(t)||(e=ce(t)*se(t)),e}function ee(t){return[t[0],t[1]]}function ne(t){return[t[2],t[1]]}function oe(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ie(t,e){var n;return"bottom-left"===e?n=ee(t):"bottom-right"===e?n=ne(t):e===Kt?n=le(t):"top-right"===e?n=ue(t):W(!1,13),n}function re(t,e,n,o,i){var r=e*o[0]/2,s=e*o[1]/2,a=Math.cos(n),l=Math.sin(n),u=r*a,c=r*l,h=s*a,p=s*l,d=t[0],f=t[1],g=d-u+p,v=d-u-p,_=d+u-p,y=d+u+p,m=f-c-h,w=f-c+h,C=f+c+h,x=f+c-h;return Bt(Math.min(g,v,_,y),Math.min(m,w,C,x),Math.max(g,v,_,y),Math.max(m,w,C,x),i)}function se(t){return t[3]-t[1]}function ae(t,e,n){var o=n||[1/0,1/0,-1/0,-1/0];return he(t,e)?(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]):Wt(o),o}function le(t){return[t[0],t[3]]}function ue(t){return[t[2],t[3]]}function ce(t){return t[2]-t[0]}function he(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function pe(t){return t[2]<t[0]||t[3]<t[1]}function de(t,e,n,o){var i;return i=n&&n.length?n.shift():Mt?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(i.width=t),e&&(i.height=e),i.getContext("2d",o)}function fe(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function ge(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var ve=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n.pixelContext_=null,n}return ve(e,t),e.prototype.getBackground=function(t){var e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0},e.prototype.useContainer=function(t,e,n,o){var i,r,s=this.getLayer().getClassName();if(t&&t.className===s&&""===t.style.opacity&&1===n&&(!o||t.style.backgroundColor&&a(Nt(t.style.backgroundColor),Nt(o)))&&(u=t.firstElementChild)instanceof HTMLCanvasElement&&(r=u.getContext("2d")),r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(i=document.createElement("div")).className=s;var l=i.style;l.position="absolute",l.width="100%",l.height="100%",o&&(l.backgroundColor=o);var u=(r=de()).canvas;i.appendChild(u),(l=u.style).position="absolute",l.left="0",l.transformOrigin="top left",this.container=i,this.context=r}},e.prototype.clipUnrotated=function(t,e,n){var o=le(n),i=ue(n),r=ne(n),s=ee(n);jt(e.coordinateToPixelTransform,o),jt(e.coordinateToPixelTransform,i),jt(e.coordinateToPixelTransform,r),jt(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;jt(a,o),jt(a,i),jt(a,r),jt(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var o=this.getLayer();if(o.hasListener(t)){var i=new Et(t,this.inversePixelTransform,n,e);o.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,n,o,i,r,s){var a=i/2,l=r/2,u=o/e,c=-u,h=-t[0]+s,p=-t[1];return Lt(this.tempTransform,a,l,u,c,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var o=jt(this.inversePixelTransform,t.slice()),i=this.context,r=this.getLayer().getExtent();if(r&&!Ut(r,jt(e.pixelToCoordinateTransform,t.slice())))return null;var s,a=Math.round(o[0]),l=Math.round(o[1]),u=this.pixelContext_;if(!u){var c=document.createElement("canvas");c.width=1,c.height=1,u=c.getContext("2d"),this.pixelContext_=u}u.clearRect(0,0,1,1);try{u.drawImage(i.canvas,a,l,1,1,0,0,1,1),s=u.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?(this.pixelContext_=null,new Uint8Array):s}return 0===s[3]?null:s},e}(Ct);const ye=_e;var me=function(){function t(t,e,n,o){this.minX=t,this.maxX=e,this.minY=n,this.maxY=o}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function we(t,e,n,o,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=o,i):new me(t,e,n,o)}const Ce=me;var xe={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1},Ee={imageSmoothingEnabled:!0,msImageSmoothingEnabled:!0},be="ol-hidden",Te="ol-control",Pe=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),{RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"}),Oe={};Oe[Pe.RADIANS]=6370997/(2*Math.PI),Oe[Pe.DEGREES]=2*Math.PI*6370997/360,Oe[Pe.FEET]=.3048,Oe[Pe.METERS]=1,Oe[Pe.USFEET]=1200/3937;const Re=Pe,Se=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Oe[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var Me=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ae=6378137,Ie=Math.PI*Ae,je=[-Ie,-Ie,Ie,Ie],Le=[-180,-85,180,85],Fe=Ae*Math.log(Math.tan(Math.PI/2)),ke=function(t){function e(e){return t.call(this,{code:e,units:Re.METERS,extent:je,global:!0,worldExtent:Le,getPointResolution:function(t,e){return t/q(e[1]/Ae)}})||this}return Me(e,t),e}(Se),De=[new ke("EPSG:3857"),new ke("EPSG:102100"),new ke("EPSG:102113"),new ke("EPSG:900913"),new ke("http://www.opengis.net/def/crs/EPSG/0/3857"),new ke("http://www.opengis.net/gml/srs/epsg.xml#3857")];var ze=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ne=[-180,-90,180,90],Ge=6378137*Math.PI/180,Ke=function(t){function e(e,n){return t.call(this,{code:e,units:Re.DEGREES,extent:Ne,axisOrientation:n,global:!0,metersPerUnit:Ge,worldExtent:Ne})||this}return ze(e,t),e}(Se),Ze=[new Ke("CRS:84"),new Ke("EPSG:4326","neu"),new Ke("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ke("urn:ogc:def:crs:OGC:2:84"),new Ke("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ke("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ke("http://www.opengis.net/def/crs/EPSG/0/4326","neu")],Ve={},Ue={};function Xe(t,e,n){var o=t.getCode(),i=e.getCode();o in Ue||(Ue[o]={}),Ue[o][i]=n}var He=6371008.8;function Be(t,e,n){var o=n||He,i=et(t[1]),r=et(e[1]),s=(r-i)/2,a=et(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*o*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function We(t,e,n,o){var i=o||He,r=et(t[1]),s=et(t[0]),a=e/i,l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(n));return[tt(s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l))),tt(l)]}function Ye(t,e,n){var o;if(void 0!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];o=e}else o=t.slice();return o}function qe(t,e,n){if(void 0!==e&&t!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}return t}function Qe(t){!function(t,e){Ve[t]=e}(t.getCode(),t),Xe(t,t,Ye)}function $e(t){return"string"==typeof t?Ve[e=t]||Ve[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Je(t,e,n,o){var i,r=(t=$e(t)).getPointResolutionFunc();if(r)i=r(e,n),o&&o!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/Oe[o]);else{var s=t.getUnits();if(s==Re.DEGREES&&!o||o==Re.DEGREES)i=e;else{var a,l=on(t,$e("EPSG:4326"));if(l===qe&&s!==Re.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(Be((u=l(u,u,2)).slice(0,2),u.slice(2,4))+Be(u.slice(4,6),u.slice(6,8)))/2}void 0!==(a=o?Oe[o]:t.getMetersPerUnit())&&(i/=a)}}return i}function tn(t){!function(t){t.forEach(Qe)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Xe(e,t,Ye)}))}))}function en(t,e){return t?"string"==typeof t?$e(t):t:$e(e)}function nn(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||on(t,e)===Ye)&&n}function on(t,e){var n=function(t,e){var n;return t in Ue&&e in Ue[t]&&(n=Ue[t][e]),n}(t.getCode(),e.getCode());return n||(n=qe),n}function rn(t,e){return on($e(t),$e(e))}function sn(t,e,n){return rn(e,n)(t,void 0,t.length)}var an,ln,un,cn=null;function hn(){return cn}function pn(t,e){return t}function dn(t,e){return t}function fn(t,e){return t}tn(De),tn(Ze),an=De,ln=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i){r[s]=Ie*t[s]/180;var a=Ae*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>Fe?a=Fe:a<-Fe&&(a=-Fe),r[s+1]=a}return r},un=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i)r[s]=180*t[s]/Ie,r[s+1]=360*Math.atan(Math.exp(t[s+1]/Ae))/Math.PI-90;return r},Ze.forEach((function(t){an.forEach((function(e){Xe(t,e,ln),Xe(e,t,un)}))}));var gn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vn=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new Ce(0,0,0,0),n}return gn(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),o=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!o},e.prototype.getTile=function(t,e,n,o){var i=o.pixelRatio,r=o.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,n,i,r);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,n,o){return!!this.isDrawableTile(o)&&t.prototype.loadedTileCallback.call(this,e,n,o)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],o=t.viewState,r=o.projection,s=o.resolution,a=o.center,l=o.rotation,u=t.pixelRatio,c=this.getLayer(),p=c.getSource(),d=p.getRevision(),f=p.getTileGridForProjection(r),g=f.getZForResolution(s,p.zDirection),v=f.getResolution(g),_=t.extent,y=n.extent&&fn(n.extent);y&&(_=ae(_,fn(n.extent)));var m=p.getTilePixelRatio(u),w=Math.round(t.size[0]*m),C=Math.round(t.size[1]*m);if(l){var x=Math.round(Math.sqrt(w*w+C*C));w=x,C=x}var E=v*w/2/m,b=v*C/2/m,T=[a[0]-E,a[1]-b,a[0]+E,a[1]+b],P=f.getTileRangeForExtentAndZ(_,g),O={};O[g]={};var R=this.createLoadedTileFinder(p,r,O),S=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var A=P.minX;A<=P.maxX;++A)for(var I=P.minY;I<=P.maxY;++I){var L=this.getTile(g,A,I,t);if(this.isDrawableTile(L)){var F=j(this);if(2==L.getState()){O[g][L.tileCoord.toString()]=L;var k=L.inTransition(F);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(L)||(this.newTiles_=!0)}if(1===L.getAlpha(F,t.time))continue}var D=f.getTileCoordChildTileRange(L.tileCoord,M,S),z=!1;D&&(z=R(g+1,D)),z||f.forEachTileCoordParentTileRange(L.tileCoord,R,M,S)}var N=v/s;Lt(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,l,-w/2,-C/2);var G=function(t){var e="matrix("+t.join(", ")+")";if(Mt)return e;var n=bt||(bt=document.createElement("div"));return n.style.transform=e,n.style.transform}(this.pixelTransform);this.useContainer(e,G,n.opacity,this.getBackground(t));var K=this.context,Z=K.canvas;Ft(this.inversePixelTransform,this.pixelTransform),Lt(this.tempTransform,w/2,C/2,N,N,0,-w/2,-C/2),Z.width!=w||Z.height!=C?(Z.width=w,Z.height=C):this.containerReused||K.clearRect(0,0,w,C),y&&this.clipUnrotated(K,t,y),p.getInterpolate()||h(K,xe),this.preRender(K,t),this.renderedTiles.length=0;var V,U,X,H=Object.keys(O).map(Number);H.sort(i),1!==n.opacity||this.containerReused&&!p.getOpaque(t.viewState.projection)?(V=[],U=[]):H=H.reverse();for(var B=H.length-1;B>=0;--B){var W=H[B],Y=p.getTilePixelSize(W,u,r),q=f.getResolution(W)/v,Q=Y[0]*q*N,$=Y[1]*q*N,J=f.getTileCoordForCoordAndZ(le(T),W),tt=f.getTileCoordExtent(J),et=jt(this.tempTransform,[m*(tt[0]-T[0])/v,m*(T[3]-tt[3])/v]),nt=m*p.getGutterForProjection(r),ot=O[W];for(var it in ot){var rt=(L=ot[it]).tileCoord,st=J[1]-rt[1],at=Math.round(et[0]-(st-1)*Q),lt=J[2]-rt[2],ut=Math.round(et[1]-(lt-1)*$),ct=at-(A=Math.round(et[0]-st*Q)),ht=ut-(I=Math.round(et[1]-lt*$)),pt=g===W;if(!(k=pt&&1!==L.getAlpha(j(this),t.time)))if(V){K.save(),X=[A,I,A+ct,I,A+ct,I+ht,A,I+ht];for(var dt=0,ft=V.length;dt<ft;++dt)if(g!==W&&W<U[dt]){var gt=V[dt];K.beginPath(),K.moveTo(X[0],X[1]),K.lineTo(X[2],X[3]),K.lineTo(X[4],X[5]),K.lineTo(X[6],X[7]),K.moveTo(gt[6],gt[7]),K.lineTo(gt[4],gt[5]),K.lineTo(gt[2],gt[3]),K.lineTo(gt[0],gt[1]),K.clip()}V.push(X),U.push(W)}else K.clearRect(A,I,ct,ht);this.drawTileImage(L,t,A,I,ct,ht,nt,pt),V&&!k?(K.restore(),this.renderedTiles.unshift(L)):this.renderedTiles.push(L),this.updateUsedTiles(t.usedTiles,p,L)}}this.renderedRevision=d,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!Yt(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,p,f,u,r,_,g,c.getPreload()),this.scheduleExpireCache(t,p),this.postRender(K,t),n.extent&&K.restore(),h(K,Ee),G!==Z.style.transform&&(Z.style.transform=G);var vt=function(t){return 1===t?"":String(Math.round(100*t)/100)}(n.opacity),_t=this.container;return vt!==_t.style.opacity&&(_t.style.opacity=vt),this.container},e.prototype.drawTileImage=function(t,e,n,o,i,r,s,a){var l=this.getTileImage(t);if(l){var u=j(this),c=a?t.getAlpha(u,e.time):1,h=c!==this.context.globalAlpha;h&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(l,s,s,l.width-2*s,l.height-2*s,n,o,i,r),h&&this.context.restore(),1!==c?e.animate=!0:a&&t.endTransition(u)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var o=j(t);o in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var o=j(e);o in t||(t[o]={}),t[o][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,o,i,r,s,a,l){var u=j(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,p,d,f,g,v=t.wantedTiles[u],_=t.tileQueue,y=0;for(g=n.getMinZoom();g<=s;++g)for(h=n.getTileRangeForExtentAndZ(r,g,h),p=n.getResolution(g),d=h.minX;d<=h.maxX;++d)for(f=h.minY;f<=h.maxY;++f)s-g<=a?(++y,0==(c=e.getTile(g,d,f,o,i)).getState()&&(v[c.getKey()]=!0,_.isKeyQueued(c.getKey())||_.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),p])),void 0!==l&&l(c)):e.useTile(g,d,f,i);e.updateCacheSize(y,i)},e}(ye);vn.prototype.getLayer;const _n=vn;var yn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mn=function(t){function e(e){return t.call(this,e)||this}return yn(e,t),e.prototype.createRenderer=function(){return new _n(this)},e}(mt),wn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function Cn(t,e){for(var n=!0,o=t.length-1;o>=0;--o)if(t[o]!=e[o]){n=!1;break}return n}function xn(t,e){var n=Math.cos(e),o=Math.sin(e),i=t[0]*n-t[1]*o,r=t[1]*n+t[0]*o;return t[0]=i,t[1]=r,t}function En(t,e,n){return function(o,i,r,s,a){if(o){var l=e?0:r[0]*i,u=e?0:r[1]*i,c=a?a[0]:0,h=a?a[1]:0,p=t[0]+l/2+c,d=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;p>d&&(d=p=(d+p)/2),f>g&&(g=f=(g+f)/2);var v=Y(o[0],p,d),_=Y(o[1],f,g),y=30*i;return s&&n&&(v+=-y*Math.log(1+Math.max(0,p-o[0])/y)+y*Math.log(1+Math.max(0,o[0]-d)/y),_+=-y*Math.log(1+Math.max(0,f-o[1])/y)+y*Math.log(1+Math.max(0,o[1]-g)/y)),[v,_]}}}function bn(t){return t}function Tn(t,e,n,o){var i=ce(e)/n[0],r=se(e)/n[1];return o?Math.min(t,Math.max(i,r)):Math.min(t,Math.min(i,r))}function Pn(t,e,n){var o=Math.min(t,e);return o*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(o=Math.max(o,n),o/=Math.log(1+50*Math.max(0,n/t-1))/50+1),Y(o,n/2,2*e)}function On(t,e,n,o,i){return function(r,s,a,l){if(void 0!==r){var u=o?Tn(t,o,a,i):t;return(void 0===n||n)&&l?Pn(r,u,e):Y(r,e,u)}}}function Rn(t){return void 0!==t?0:void 0}function Sn(t){return void 0!==t?t:void 0}function Mn(t){return Math.pow(t,3)}function An(t){return 1-Mn(1-t)}function In(t){return 3*t*t-2*t*t*t}function jn(t){return t}const Ln="XY",Fn="XYZM";var kn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dn=[1,0,0,1,0,0],zn=function(t){function e(){var e,n,o,i,r,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(e)},r=!1,function(){var t=Array.prototype.slice.call(arguments);return r&&this===i&&a(t,o)||(r=!0,i=this,o=t,n=e.apply(this,arguments)),n}),s}return kn(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return A()},e.prototype.closestPointXY=function(t,e,n,o){return A()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return A()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Wt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){A()},e.prototype.scale=function(t,e,n){A()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return A()},e.prototype.getType=function(){return A()},e.prototype.applyTransform=function(t){A()},e.prototype.intersectsExtent=function(t){return A()},e.prototype.translate=function(t,e){A()},e.prototype.transform=function(t,e){var n=$e(t),o=n.getUnits()==Re.TILE_PIXELS?function(t,o,i){var r=n.getExtent(),s=n.getWorldExtent(),a=se(s)/se(r);return Lt(Dn,s[0],s[3],a,-a,0,0,0),function(t,e,n,o,i,r){for(var s=r||[],a=0,l=0;l<n;l+=o){var u=t[l],c=t[l+1];s[a++]=i[0]*u+i[2]*c+i[4],s[a++]=i[1]*u+i[3]*c+i[5]}r&&s.length!=a&&(s.length=a)}(t,0,t.length,i,Dn,o),rn(n,e)(t,o,i)}:rn(n,e);return this.applyTransform(o),this},e}(k);const Nn=zn;var Gn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kn=function(t){function e(){var e=t.call(this)||this;return e.layout=Ln,e.stride=2,e.flatCoordinates=null,e}return Gn(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=this.flatCoordinates.length,o=this.stride,Qt(Wt(t),e,0,n,o);var e,n,o},e.prototype.getCoordinates=function(){return A()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Zn(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){A()},e.prototype.setLayout=function(t,e,n){var o;if(t)o=Zn(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=Ln,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=Ln:3==t?e="XYZ":4==t&&(e=Fn),e}(o=e.length)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=Math.cos(i),u=Math.sin(i),c=r[0],h=r[1],p=0,d=0;d<n;d+=o){var f=t[d]-c,g=t[d+1]-h;a[p++]=c+f*l-g*u,a[p++]=h+f*u+g*l;for(var v=d+2;v<d+o;++v)a[p++]=t[v]}s&&a.length!=p&&(a.length=p)}(n,0,n.length,o,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var o=e;void 0===o&&(o=t);var i=n;i||(i=oe(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,e,n,o,i,r,s,a){for(var l=a||[],u=s[0],c=s[1],h=0,p=0;p<n;p+=o){var d=t[p]-u,f=t[p+1]-c;l[h++]=u+i*d,l[h++]=c+r*f;for(var g=p+2;g<p+o;++g)l[h++]=t[g]}a&&l.length!=h&&(l.length=h)}(r,0,r.length,s,t,o,i,r),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=0,u=0;u<n;u+=o){a[l++]=t[u]+i,a[l++]=t[u+1]+r;for(var c=u+2;c<u+o;++c)a[l++]=t[c]}s&&a.length!=l&&(a.length=l)}(n,0,n.length,o,t,e,n),this.changed()}},e}(Nn);function Zn(t){var e;return t==Ln?e=2:"XYZ"==t||"XYM"==t?e=3:t==Fn&&(e=4),e}const Vn=Kn;function Un(t,e,n,o,i,r,s){var a,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)a=e;else{var p=((i-l)*c+(r-u)*h)/(c*c+h*h);if(p>1)a=n;else{if(p>0){for(var d=0;d<o;++d)s[d]=ot(t[e+d],t[n+d],p);return void(s.length=o)}a=e}}for(d=0;d<o;++d)s[d]=t[a+d];s.length=o}function Xn(t,e,n,o,i){var r=t[e],s=t[e+1];for(e+=o;e<n;e+=o){var a=t[e],l=t[e+1],u=J(r,s,a,l);u>i&&(i=u),r=a,s=l}return i}function Hn(t,e,n,o,i,r,s,a,l,u,c){if(e==n)return u;var h,p;if(0===i){if((p=J(s,a,t[e],t[e+1]))<u){for(h=0;h<o;++h)l[h]=t[e+h];return l.length=o,p}return u}for(var d=c||[NaN,NaN],f=e+o;f<n;)if(Un(t,f-o,f,o,s,a,d),(p=J(s,a,d[0],d[1]))<u){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o,f+=o}else f+=o*Math.max((Math.sqrt(p)-Math.sqrt(u))/i|0,1);if(r&&(Un(t,n-o,e,o,s,a,d),(p=J(s,a,d[0],d[1]))<u)){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o}return u}function Bn(t,e,n,o){for(var i=0,r=n.length;i<r;++i)for(var s=n[i],a=0;a<o;++a)t[e++]=s[a];return e}function Wn(t,e){return e*Math.round(t/e)}function Yn(t,e,n,o,i,r,s){if(e==n)return s;var a,l,u=Wn(t[e],i),c=Wn(t[e+1],i);e+=o,r[s++]=u,r[s++]=c;do{if(a=Wn(t[e],i),l=Wn(t[e+1],i),(e+=o)==n)return r[s++]=a,r[s++]=l,s}while(a==u&&l==c);for(;e<n;){var h=Wn(t[e],i),p=Wn(t[e+1],i);if(e+=o,h!=a||p!=l){var d=a-u,f=l-c,g=h-u,v=p-c;d*v==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&v<f||f==v||f>0&&v>f)?(a=h,l=p):(r[s++]=a,r[s++]=l,u=a,c=l,a=h,l=p)}}return r[s++]=a,r[s++]=l,s}function qn(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=e;a<n;a+=o)r[s++]=t.slice(a,a+o);return r.length=s,r}function Qn(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=s*a-r*l,r=a,s=l}return i/2}var $n=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jn=function(t){function e(e,n){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?o.setCoordinates(e,n):o.setFlatCoordinates(n,e),o}return $n(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,o){return o<Vt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Hn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.getArea=function(){return Qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=function(t,e,n,o,i,r,s){var a=(n-e)/o;if(a<3){for(;e<n;e+=o)r[s++]=t[e],r[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,n-o],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),d=0,f=t[p],g=t[p+1],v=t[h],_=t[h+1],y=p+o;y<h;y+=o){var m=$(t[y],t[y+1],f,g,v,_);m>d&&(c=y,d=m)}d>i&&(l[(c-e)/o]=1,p+o<c&&u.push(p,c),c+o<h&&u.push(c,h))}for(y=0;y<a;++y)l[y]&&(r[s++]=t[e+y*o],r[s++]=t[e+y*o+1]);return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,Ln)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Bn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Vn);const to=Jn;var eo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),no=function(t){function e(e,n){var o=t.call(this)||this;return o.setCoordinates(e,n),o}return eo(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){var i=this.flatCoordinates,r=J(t,e,i[0],i[1]);if(r<o){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,r}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return n=t,Bt(o=(e=this.flatCoordinates)[0],i=e[1],o,i,n);var e,n,o,i},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return Xt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,o){for(var i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(Vn);const oo=no;function io(t,e,n,o,i){return!Jt(i,(function(i){return!ro(t,e,n,o,i[0],i[1])}))}function ro(t,e,n,o,i,r){for(var s=0,a=t[n-o],l=t[n-o+1];e<n;e+=o){var u=t[e],c=t[e+1];l<=r?c>r&&(u-a)*(r-l)-(i-a)*(c-l)>0&&s++:c<=r&&(u-a)*(r-l)-(i-a)*(c-l)<0&&s--,a=u,l=c}return 0!==s}function so(t,e,n,o,i,r){if(0===n.length)return!1;if(!ro(t,e,n[0],o,i,r))return!1;for(var s=1,a=n.length;s<a;++s)if(ro(t,n[s-1],n[s],o,i,r))return!1;return!0}function ao(t,e,n,o,i){var r,s,a=Qt([1/0,1/0,-1/0,-1/0],t,e,n,o);return!!he(i,a)&&(s=a,(r=i)[0]<=s[0]&&s[2]<=r[2]&&r[1]<=s[1]&&s[3]<=r[3]||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]||function(t,e,n,o,r){var s,a,l;for(e+=o;e<n;e+=o)if(a=t.slice(e-o,e),l=t.slice(e,e+o),s=function(t,e,n){var o=!1,i=Ht(t,e),r=Ht(t,n);if(1===i||1===r)o=!0;else{var s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],p=n[0],d=n[1],f=(d-h)/(p-c),g=void 0,v=void 0;2&r&&!(2&i)&&(o=(g=p-(d-u)/f)>=s&&g<=l),o||!(4&r)||4&i||(o=(v=d-(p-l)*f)>=a&&v<=u),o||!(8&r)||8&i||(o=(g=p-(d-a)/f)>=s&&g<=l),o||!(16&r)||16&i||(o=(v=d-(p-s)*f)>=a&&v<=u)}return o}(i,a,l))return s;return!1}(t,e,n,o))}function lo(t,e,n,o){for(;e<n-o;){for(var i=0;i<o;++i){var r=t[e+i];t[e+i]=t[n-o+i],t[n-o+i]=r}e+=o,n-=o}}function uo(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=(a-r)*(l+s),r=a,s=l}return 0===i?void 0:i>0}function co(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=uo(t,e,l,o);(0===s?r&&u||!r&&!u:r&&!u||!r&&u)&&lo(t,e,l,o),e=l}return e}var ho=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),po=function(t){function e(e,n,o){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&o?(i.setFlatCoordinates(n,e),i.ends_=o):i.setCoordinates(e,n),i}return ho(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?s(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){return o<Vt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,o,i){for(var r=0,s=n.length;r<s;++r){var a=n[r];i=Xn(t,e,a,o,i),e=a}return i}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,o,i,r,s,a,l,u,c){for(var h=c||[NaN,NaN],p=0,d=n.length;p<d;++p){var f=n[p];u=Hn(t,e,f,o,i,r,s,a,l,u,h),e=f}return u}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.containsXY=function(t,e){return so(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,o){for(var i=0,r=0,s=n.length;r<s;++r){var a=n[r];i+=Qn(t,e,a,o),e=a}return i}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?co(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];r[s++]=qn(t,e,u,o,r[s]),e=u}return r.length=s,r}(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=oe(this.getExtent());this.flatInteriorPoint_=function(t,e,n,o,r,s,a){for(var l,u,c,h,p,d,f,g=r[s+1],v=[],_=0,y=n.length;_<y;++_){var m=n[_];for(h=t[m-o],d=t[m-o+1],l=e;l<m;l+=o)p=t[l],f=t[l+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(p-h)+h,v.push(c)),h=p,d=f}var w=NaN,C=-1/0;for(v.sort(i),h=v[0],l=1,u=v.length;l<u;++l){p=v[l];var x=Math.abs(p-h);x>C&&so(t,e,n,o,c=(h+p)/2,g)&&(w=c,C=x),h=p}return isNaN(w)&&(w=r[s]),a?(a.push(w,g,C),a):[w,g,C]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new oo(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new to(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,o=[],i=0,r=0,s=n.length;r<s;++r){var a=n[r],l=new to(e.slice(i,a),t);o.push(l),i=a}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=uo(t,e,l,o);if(0===s){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;e=l}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=co(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],o=[];return n.length=function(t,e,n,o,i,r,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=Yn(t,e,c,o,i,r,s),a.push(s),e=c}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,o),new e(n,Ln,o)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,o,i){if(!function(t,e,n,o,i){return!!(ao(t,e,n,o,i)||ro(t,e,n,o,i[0],i[1])||ro(t,e,n,o,i[0],i[3])||ro(t,e,n,o,i[2],i[1])||ro(t,e,n,o,i[2],i[3]))}(t,e,n[0],o,i))return!1;if(1===n.length)return!0;for(var r=1,s=n.length;r<s;++r)if(io(t,n[r-1],n[r],o,i)&&!ao(t,n[r-1],n[r],o,i))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,o,i){for(var r=i||[],s=0,a=0,l=n.length;a<l;++a){var u=Bn(t,e,n[a],o);r[s++]=u,e=u}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(Vn);const fo=po;function go(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=[e,n,e,i,o,i,o,n,e,n];return new po(r,Ln,[r.length])}var vo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_o=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=h({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=en(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,o.center&&(o.center=dn(o.center,n.projection_)),o.extent&&(o.extent=fn(o.extent,n.projection_)),n.applyOptions_(o),n}return vo(e,t),e.prototype.applyOptions_=function(t){var e=h({},t);for(var n in wn)delete e[n];this.setProperties(e,!0);var o=function(t){var e,n,o,i=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,h=en(t.projection,"EPSG:3857"),p=h.getExtent(),d=t.constrainOnlyCenter,f=t.extent;if(l||f||!h.isGlobal()||(d=!1,f=p),void 0!==t.resolutions){var g=t.resolutions;n=g[i],o=void 0!==g[s]?g[s]:g[g.length-1],e=t.constrainResolution?function(t,e,n,o){return function(i,s,a,l){if(void 0!==i){var u=t[0],c=t[t.length-1],h=n?Tn(u,n,a,o):u;if(l)return void 0===e||e?Pn(i,h,c):Y(i,c,h);var p=Math.min(h,i),d=Math.floor(r(t,p,s));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}(g,u,!d&&f,c):On(n,o,u,!d&&f,c)}else{var v=(p?Math.max(ce(p),se(p)):360*Oe[Re.DEGREES]/h.getMetersPerUnit())/256/Math.pow(2,0),_=v/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=v/Math.pow(a,i),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,s):v/Math.pow(a,s):_),s=i+Math.floor(Math.log(n/o)/Math.log(a)),o=n/Math.pow(a,s-i),e=t.constrainResolution?function(t,e,n,o,i,r){return function(s,a,l,u){if(void 0!==s){var c=i?Tn(e,i,l,r):e,h=void 0!==n?n:0;if(u)return void 0===o||o?Pn(s,c,h):Y(s,h,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),d=-a*(.5-1e-9)+.5,f=Math.min(c,s),g=Math.floor(Math.log(e/f)/Math.log(t)+d),v=Math.max(p,g);return Y(e/Math.pow(t,v),h,c)}}}(a,n,o,u,!d&&f,c):On(n,o,u,!d&&f,c)}return{constraint:e,maxResolution:n,minResolution:o,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=o.minZoom;var i=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return En(t.extent,t.constrainOnlyCenter,e)}var n=en(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,En(o,!1,!1)}return bn}(t),s=o.constraint,a=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=et(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?Sn:"number"==typeof e?(n=e,o=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/o+.5)*o:void 0}):Sn}return Rn;var n,o,i}(t);this.constraints_={center:i,resolution:s,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),s=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-s])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),h({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=h({},o)).center=dn(o.center,this.getProjection())),o.anchor&&((o=h({},o)).anchor=dn(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);for(var o=0;o<n&&!this.isDef();++o){var i=arguments[o];i.center&&this.setCenterInternal(i.center),void 0!==i.zoom?this.setZoom(i.zoom):i.resolution&&this.setResolution(i.resolution),void 0!==i.rotation&&this.setRotation(i.rotation)}if(o!==n){for(var r=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,u=[];o<n;++o){var c=arguments[o],h={start:r,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||In,callback:e};if(c.center&&(h.sourceCenter=s,h.targetCenter=c.center.slice(),s=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=l;var p=nt(c.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+p,l=h.targetRotation}mo(h)?h.complete=!0:r+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(0,1),this.updateAnimations_()}else e&&yo(e,!0)},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var o=this.animations_[e];if(o[0].callback&&yo(o[0].callback,!1),!t)for(var i=0,r=o.length;i<r;++i){var s=o[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var o=this.animations_[n],i=!0,r=0,s=o.length;r<s;++r){var a=o[r];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):i=!1;var c=a.easing(u);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],d=a.targetCenter[0],f=a.targetCenter[1];this.nextCenter_=a.targetCenter;var g=h+c*(d-h),v=p+c*(f-p);this.targetCenter_=[g,v]}if(a.sourceResolution&&a.targetResolution){var _=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){var y=this.getViewportSize_(this.getRotation()),m=this.constraints_.resolution(_,0,y,!0);this.targetCenter_=this.calculateCenterZoom(m,a.anchor)}this.nextResolution_=a.targetResolution,this.targetResolution_=_,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var w=1===c?nt(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){var C=this.constraints_.rotation(w,!0);this.targetCenter_=this.calculateCenterRotate(C,a.anchor)}this.nextRotation_=a.targetRotation,this.targetRotation_=w}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(i){this.animations_[n]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var x=o[0].callback;x&&yo(x,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,o,i,r=this.getCenterInternal();return void 0!==r&&(xn(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),i=e,(o=n)[0]+=+i[0],o[1]+=+i[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();return void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?pn(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(wn.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();W(n,1);var o=this.getResolution();W(void 0!==o,2);var i=this.getRotation();return W(void 0!==i,3),re(n,o,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(wn.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(fn(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),o=ce(t)/n[0],i=se(t)/n[1];return Math.max(o,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(wn.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=wo(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=r(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=Y(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Y(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(W(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))W(!pe(t),25),n=go(o=fn(t,this.getProjection()));else if("Circle"===t.getType()){var o;(n=go(o=fn(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),oe(o))}else{var i=hn();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),s=1/0,a=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=r){var p=i[c]*n-i[c+1]*o,d=i[c]*o+i[c+1]*n;s=Math.min(s,p),a=Math.min(a,d),l=Math.max(l,p),u=Math.max(u,d)}return[s,a,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},o=n.size;o||(o=this.getViewportSizeMinusPadding_());var i,r=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,s?0:1);var u=this.getRotation(),h=Math.sin(u),p=Math.cos(u),d=oe(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;var f=d[0]*p-d[1]*h,g=d[1]*p+d[0]*h,v=this.getConstrainedCenter([f,g],l),_=n.callback?n.callback:c;void 0!==n.duration?this.animateInternal({resolution:l,center:v,duration:n.duration,easing:n.easing},_):(this.targetResolution_=l,this.targetCenter_=v,this.applyTargetState_(!1,!0),yo(_,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(dn(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(wo(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,o){var i,r=this.padding_;if(r&&t){var s=this.getViewportSizeMinusPadding_(-n),a=wo(t,o,[s[0]/2+r[3],s[1]/2+r[0]],e,n);i=[t[0]-a[0],t[1]-a[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=pn(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&dn(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=dn(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(dn(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,0,i,n),s=this.constraints_.center(this.targetCenter_,r,i,n,this.calculateCenterShift(this.targetCenter_,r,o,i));this.get(wn.ROTATION)!==o&&this.set(wn.ROTATION,o),this.get(wn.RESOLUTION)!==r&&(this.set(wn.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),s&&this.get(wn.CENTER)&&Cn(this.get(wn.CENTER),s)||this.set(wn.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var o=void 0!==t?t:200,i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,r,s));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var u=n||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&Cn(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:o,easing:An,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var o=n&&dn(n,this.getProjection());this.endInteractionInternal(t,e,o)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,o)},e}(k);function yo(t,e){setTimeout((function(){t(e)}),0)}function mo(t){return!(t.sourceCenter&&t.targetCenter&&!Cn(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function wo(t,e,n,o,i){var r=Math.cos(-i),s=Math.sin(-i),a=t[0]*r-t[1]*s,l=t[1]*r+t[0]*s;return[(a+=(e[0]/2-n[0])*o)*r-(l+=(n[1]-e[1]/2)*o)*(s=-s),l*r+a*s]}const Co=_o;function xo(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+e+","+n+","+o+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}(t)}(n):"null")}var Eo=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var o=xo(t,e,n);return o in this.cache_?this.cache_[o]:null},t.prototype.set=function(t,e,n,o){var i=xo(t,e,n);this.cache_[i]=o,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),bo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),To=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return bo(e,t),e.prototype.dispatchRenderEvent=function(t,e){A()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;Lt(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Ft(o,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i,r,s,a){var l,u=e.viewState;function c(t,e,n,o){return i.call(r,e,t?n:null,o)}var h=u.projection,p=function(t,e){if(e.canWrapX()){var n=ce(e.getExtent()),o=function(t,e,n){var o=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<o[0]||t[0]>o[2])){var r=n||ce(o);i=Math.floor((t[0]-o[0])/r)}return i}(t,e,n);o&&(t[0]-=o*n)}return t}(t.slice(),h),d=[[0,0]];if(h.canWrapX()&&o){var f=ce(h.getExtent());d.push([-f,0],[f,0])}for(var g=e.layerStatesArray,v=g.length,_=[],y=[],m=0;m<d.length;m++)for(var w=v-1;w>=0;--w){var C=g[w],x=C.layer;if(x.hasRenderer()&&ft(C,u)&&s.call(a,x)){var E=x.getRenderer(),b=x.getSource();if(E&&b){var T=b.getWrapX()?p:t,P=c.bind(null,C.managed);y[0]=T[0]+d[m][0],y[1]=T[1]+d[m][1],l=E.forEachFeatureAtCoordinate(y,e,n,P,_)}if(l)return l}}if(0!==_.length){var O=1/_.length;return _.forEach((function(t,e){return t.distanceSq+=e*O})),_.sort((function(t,e){return t.distanceSq-e.distanceSq})),_.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){return A()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,o,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,o,l,this,i,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){A()},e.prototype.scheduleExpireIconCache=function(t){Eo.canExpireCache()&&t.postRenderFunctions.push(Po)},e}(o);function Po(t,e){Eo.expire()}const Oo=To;var Ro=new k;(new v).setSize=function(){console.warn("labelCache is deprecated.")};var So=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Mo=function(t){function e(e){var o=t.call(this,e)||this;o.fontChangeListenerKey_=T(Ro,n,e.redrawText.bind(e)),o.element_=document.createElement("div");var i=o.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",o.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(o.element_,r.firstChild||null),o.children_=[],o.renderedVisible_=!0,o}return So(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var o=new Et(t,void 0,e);n.dispatchEvent(o)}},e.prototype.disposeInternal=function(){O(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(ut,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var o=[],i=null,r=0,s=e.length;r<s;++r){var a=e[r];if(t.layerIndex=r,ft(a,n)&&(a.sourceState==pt||a.sourceState==ht)){var l=a.layer,u=l.render(t,i);u&&(u!==i&&(this.children_.push(u),i=u),"getDeclutter"in l&&o.push(l))}}for(r=o.length-1;r>=0;--r)o[r].renderDeclutter(t);!function(t,e){for(var n=t.childNodes,o=0;;++o){var i=n[o],r=e[o];if(!i&&!r)break;i!==r&&(i?r?t.insertBefore(r,i):(t.removeChild(i),--o):t.appendChild(r))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){for(var r=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],u=l.layer;if(u.hasRenderer()&&ft(l,r)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=o(u,c);if(h)return h}}}},e}(Oo),Ao="add",Io="remove";var jo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lo="length",Fo=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.element=n,i.index=o,i}return jo(e,t),e}(e);const ko=function(t){function e(e,n){var o=t.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=e||[],o.unique_)for(var r=0,s=o.array_.length;r<s;++r)o.assertUnique_(o.array_[r],r);return o.updateLength_(),o}return jo(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(Lo)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Fo(Ao,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Fo(Io,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Fo(Io,o,t)),this.dispatchEvent(new Fo(Ao,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(Lo,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===t&&n!==e)throw new B(58)},e}(k);var Do=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zo=function(t){function e(e,n){var o=t.call(this,e)||this;return o.layer=n,o}return Do(e,t),e}(e),No="layers";const Go=function(t){function e(e){var n=this,o=e||{},i=h({},o);delete i.layers;var r=o.layers;return(n=t.call(this,i)||this).on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(No,n.handleLayersChanged_),r?Array.isArray(r)?r=new ko(r.slice(),{unique:!0}):W("function"==typeof r.getArray,43):r=new ko(void 0,{unique:!0}),n.setLayers(r),n}return Do(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(O),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(T(t,Ao,this.handleLayersAdd_,this),T(t,Io,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(O);p(this.listenerKeys_);for(var n=t.getArray(),o=0,i=n.length;o<i;o++){var r=n[o];this.registerLayerListeners_(r),this.dispatchEvent(new zo("addlayer",r))}this.changed()},e.prototype.registerLayerListeners_=function(t){var o=[T(t,n,this.handleLayerChange_,this),T(t,_,this.handleLayerChange_,this)];t instanceof e&&o.push(T(t,"addlayer",this.handleLayerGroupAdd_,this),T(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[j(t)]=o},e.prototype.handleLayerGroupAdd_=function(t){this.dispatchEvent(new zo("addlayer",t.layer))},e.prototype.handleLayerGroupRemove_=function(t){this.dispatchEvent(new zo("removelayer",t.layer))},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new zo("addlayer",e)),this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,n=j(e);this.listenerKeys_[n].forEach(O),delete this.listenerKeys_[n],this.dispatchEvent(new zo("removelayer",e)),this.changed()},e.prototype.getLayers=function(){return this.get(No)},e.prototype.setLayers=function(t){var e=this.getLayers();if(e)for(var n=e.getArray(),o=0,i=n.length;o<i;++o)this.dispatchEvent(new zo("removelayer",n[o]));this.set(No,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var o=this.getLayerState(),i=o.zIndex;t||void 0!==o.zIndex||(i=0);for(var r=n,s=e.length;r<s;r++){var a=e[r];a.opacity*=o.opacity,a.visible=a.visible&&o.visible,a.maxResolution=Math.min(a.maxResolution,o.maxResolution),a.minResolution=Math.max(a.minResolution,o.minResolution),a.minZoom=Math.max(a.minZoom,o.minZoom),a.maxZoom=Math.min(a.maxZoom,o.maxZoom),void 0!==o.extent&&(void 0!==a.extent?a.extent=ae(a.extent,o.extent):a.extent=o.extent),void 0===a.zIndex&&(a.zIndex=i)}return e},e.prototype.getSourceState=function(){return pt},e}(lt);var Ko=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Zo=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==o?o:null,i}return Ko(e,t),e}(e);var Vo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Uo=function(t){function e(e,n,o,i,r){var s=t.call(this,e,n,r)||this;return s.originalEvent=o,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s}return Vo(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Zo),Xo={SINGLECLICK:"singleclick",CLICK:w,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Ho="pointermove",Bo="pointerdown";var Wo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Yo=function(t){function e(e,n){var o=t.call(this,e)||this;o.map_=e,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=void 0===n?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=0,o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=T(i,Bo,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=T(i,Ho,o.relayEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(E,o.boundHandleTouchMove_,!!It&&{passive:!1}),o}return Wo(e,t),e.prototype.emulateClick_=function(t){var e=new Uo(Xo.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Uo(Xo.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Uo(Xo.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Xo.POINTERUP||e.type==Xo.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Xo.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Uo(Xo.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(O),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new Uo(Xo.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var o=t[n];this.down_[n]="function"==typeof o?c:o}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(T(i,Xo.POINTERMOVE,this.handlePointerMove_,this),T(i,Xo.POINTERUP,this.handlePointerUp_,this),T(this.element_,Xo.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(T(this.element_.getRootNode(),Xo.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Uo(Xo.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Uo(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(O(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(E,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(O(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(O),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(v),qo="postrender",Qo="layergroup",$o="size",Jo="target",ti="view";var ei=1/0;const ni=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,p(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},t.prototype.enqueue=function(t){W(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=ei&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,o=e.length,i=e[t],r=n[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<o&&n[l]<n[a]?l:a;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=r,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,o=this.priorities_,i=n[e],r=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>r))break;n[e]=n[s],o[e]=o[s],e=s}n[e]=i,o[e]=r},t.prototype.reprioritize=function(){var t,e,n,o=this.priorityFunction_,i=this.elements_,r=this.priorities_,s=0,a=i.length;for(e=0;e<a;++e)(n=o(t=i[e]))==ei?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=n,i[s++]=t);i.length=s,r.length=s,this.heapify_()},t}();var oi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ii=function(t){function e(e,n){var o=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return oi(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(_,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(_,this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,o,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),0!==n.getState()||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())},e}(ni);function ri(t){return t[0]>0&&t[1]>0}function si(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var ai=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function li(t){t instanceof gt?t.setMapInternal(null):t instanceof Go&&t.getLayers().forEach(li)}function ui(t,e){if(t instanceof gt)t.setMapInternal(e);else if(t instanceof Go)for(var n=t.getLayers().getArray(),o=0,i=n.length;o<i;++o)ui(n[o],e)}const ci=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,o,i,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new Go({layers:t.layers});return r.layergroup=s,r.target=t.target,r.view=t.view instanceof Co?t.view:new Co,void 0!==t.controls&&(Array.isArray(t.controls)?n=new ko(t.controls.slice()):(W("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new ko(t.interactions.slice()):(W("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new ko(t.overlays.slice()):(W("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new ko,{controls:n,interactions:o,keyboardEventTarget:e,overlays:i,values:r}}(e);n.renderComplete_,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:St,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=o.controls||new ko,n.interactions=o.interactions||new ko,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new ii(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Qo,n.handleLayerGroupChanged_),n.addChangeListener(ti,n.handleViewChanged_),n.addChangeListener($o,n.handleSizeChanged_),n.addChangeListener(Jo,n.handleTargetChanged_),n.setProperties(o.values);var i=n;return!e.view||e.view instanceof Co||e.view.then((function(t){i.setView(new Co(t))})),n.controls.addEventListener(Ao,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(Io,function(t){t.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Ao,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Io,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Ao,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(Io,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return ai(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.handleLayerAdd_=function(t){ui(t.layer,this)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,r=void 0!==n.layerFilter?n.layerFilter:l,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,i,s,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.getAllLayers=function(){var t=[];return function e(n){n.forEach((function(n){n instanceof Go?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var o=n||{},i=void 0!==o.hitTolerance?o.hitTolerance:0,r=o.layerFilter||l;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,i=void 0!==e.hitTolerance?e.hitTolerance:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,r,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(Jo)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return pn(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?jt(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Qo)},e.prototype.setLayers=function(t){var e=this.getLayerGroup();if(t instanceof ko)e.setLayers(t);else{var n=e.getLayers();n.clear(),n.extend(t)}},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=dn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?jt(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get($o)},e.prototype.getView=function(){return this.get(ti)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,o){return function(t,e,n,o,i){if(!t||!(n in t.wantedTiles))return ei;if(!t.wantedTiles[n][e.getKey()])return ei;var r=t.viewState.center,s=o[0]-r[0],a=o[1]-r[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}(this.frameState_,t,e,n,o)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,o=new Uo(n,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===Bo||n===b||n===C){var o=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():o,r=e.target;if(this.overlayContainerStopEvent_.contains(r)||!(i===o?o.documentElement:i).contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),a=s.length-1;a>=0;a--){var l=s[a];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,o=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var r=Date.now()-t.time>8;n=r?0:8,o=r?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}t&&this.hasListener(ct)&&!t.animate&&this.renderComplete_&&this.renderer_.dispatchRenderEvent(ct,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)O(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(m,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(b,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ge(this.viewport_)}var n=this.getTargetElement();if(n){for(var o in n.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Yo(this,this.moveTolerance_),Xo)this.mapBrowserEventHandler_.addEventListener(Xo[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(m,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(b,this.boundHandleBrowserEvent_,!!It&&{passive:!1});var i=this.getOwnerDocument().defaultView,r=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[T(r,C,this.handleBrowserEvent,this),T(r,x,this.handleBrowserEvent,this),T(i,"resize",this.updateSize,this)]}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(O(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(O(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=T(t,n,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=T(t,_,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(O),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.handleLayerAdd_(new zo("addlayer",t)),this.layerGroupPropertyListenerKeys_=[T(t,n,this.render,this),T(t,_,this.render,this),T(t,"addlayer",this.handleLayerAdd_,this),T(t,"removelayer",this.handleLayerRemove_,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.handleLayerRemove_=function(t){li(t.layer)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n,o=this,i=this.getSize(),r=this.getView(),s=this.frameState_,a=null;if(void 0!==i&&ri(i)&&r&&r.isDef()){var l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=r.getState();if(a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:re(u.center,u.resolution,u.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{},mapId:j(this),renderTargets:{}},u.nextCenter&&u.nextResolution){var c=isNaN(u.nextRotation)?u.rotation:u.nextRotation;a.nextExtent=re(u.nextCenter,u.nextResolution,c,i)}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!pe(this.previousExtent_)&&!Yt(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Zo("movestart",this,s)),this.previousExtent_=Wt(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!Yt(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Zo("moveend",this,a)),e=a.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice())),this.dispatchEvent(new Zo(qo,this,a)),this.renderComplete_=!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoading(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){o.postRenderTimeoutHandle_=void 0,o.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){var e=this.getLayerGroup();e&&this.handleLayerRemove_(new zo("removelayer",e)),this.set(Qo,t)},e.prototype.setSize=function(t){this.set($o,t)},e.prototype.setTarget=function(t){this.set(Jo,t)},e.prototype.setView=function(t){if(!t||t instanceof Co)this.set(ti,t);else{this.set(ti,new Co);var e=this;t.then((function(t){e.setView(new Co(t))}))}},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),o=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(o)||isNaN(i)||!ri(e=[o,i])&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(k);var hi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const pi=function(t){function e(e){var n=t.call(this)||this,o=e.element;return!o||e.target||o.style.pointerEvents||(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return hi(e,t),e.prototype.disposeInternal=function(){ge(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&ge(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)O(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==c&&this.listenerKeys.push(T(t,qo,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(k);var di=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const fi=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===o.collapsed||o.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==o.collapsible,n.collapsible_=void 0===o.collapsible||o.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==o.className?o.className:"ol-attribution",r=void 0!==o.tipLabel?o.tipLabel:"Attributions",s=void 0!==o.expandClassName?o.expandClassName:i+"-expand",a=void 0!==o.collapseLabel?o.collapseLabel:"",l=void 0!==o.collapseClassName?o.collapseClassName:i+"-collpase";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a,n.collapseLabel_.className=l):n.collapseLabel_=a;var u=void 0!==o.label?o.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=s):n.label_=u;var c=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=r,n.toggleButton_.appendChild(c),n.toggleButton_.addEventListener(w,n.handleClick_.bind(n),!1);var h=i+" ol-unselectable "+Te+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),p=n.element;return p.className=h,p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return di(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],o=!0,i=t.layerStatesArray,r=0,s=i.length;r<s;++r){var a=i[r];if(ft(a,t.viewState)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(o=o&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!a(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var o=0,i=e.length;o<i;++o){var r=document.createElement("li");r.innerHTML=e[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?fe(this.collapseLabel_,this.label_):fe(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(pi);var gi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vi=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=void 0!==o.className?o.className:"ol-rotate",r=void 0!==o.label?o.label:"",s=void 0!==o.compassClassName?o.compassClassName:"ol-compass";n.label_=null,"string"==typeof r?(n.label_=document.createElement("span"),n.label_.className=s,n.label_.textContent=r):(n.label_=r,n.label_.classList.add(s));var a=o.tipLabel?o.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(n.label_),l.addEventListener(w,n.handleClick_.bind(n),!1);var u=i+" ol-unselectable "+Te,c=n.element;return c.className=u,c.appendChild(l),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=void 0!==o.duration?o.duration:250,n.autoHide_=void 0===o.autoHide||o.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(be),n}return gi(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:An}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var o="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(be);i||0!==n?i&&0!==n&&this.element.classList.remove(be):this.element.classList.add(be)}this.label_.style.transform=o}this.rotation_=n}},e}(pi);const _i=vi;var yi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mi=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),target:o.target})||this;var i=void 0!==o.className?o.className:"ol-zoom",r=void 0!==o.delta?o.delta:1,s=void 0!==o.zoomInClassName?o.zoomInClassName:i+"-in",a=void 0!==o.zoomOutClassName?o.zoomOutClassName:i+"-out",l=void 0!==o.zoomInLabel?o.zoomInLabel:"+",u=void 0!==o.zoomOutLabel?o.zoomOutLabel:"",c=void 0!==o.zoomInTipLabel?o.zoomInTipLabel:"Zoom in",h=void 0!==o.zoomOutTipLabel?o.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(w,n.handleClick_.bind(n,r),!1);var d=document.createElement("button");d.className=a,d.setAttribute("type","button"),d.title=h,d.appendChild("string"==typeof u?document.createTextNode(u):u),d.addEventListener(w,n.handleClick_.bind(n,-r),!1);var f=i+" ol-unselectable "+Te,g=n.element;return g.className=f,g.appendChild(p),g.appendChild(d),n.duration_=void 0!==o.duration?o.duration:250,n}return yi(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var o=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:o,duration:this.duration_,easing:An})):e.setZoom(o)}}},e}(pi),wi="active";var Ci=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function xi(t,e,n,o){var i=t.getZoom();if(void 0!==i){var r=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==o?o:250,easing:An})}}const Ei=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return Ci(e,t),e.prototype.getActive=function(){return this.get(wi)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(wi,t)},e.prototype.setMap=function(t){this.map_=t},e}(k);var bi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ti=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:250,n}return bi(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Xo.DBLCLICK){var n=t.originalEvent,o=t.map,i=t.coordinate,r=n.shiftKey?-this.delta_:this.delta_;xi(o.getView(),r,i,this.duration_),n.preventDefault(),e=!0}return!e},e}(Ei);var Pi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Oi(t){for(var e=t.length,n=0,o=0,i=0;i<e;i++)n+=t[i].clientX,o+=t[i].clientY;return[n/e,o/e]}const Ri=function(t){function e(e){var n=this,o=e||{};return n=t.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return Pi(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Xo.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Xo.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Xo.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==Xo.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Xo.POINTERDOWN||e===Xo.POINTERDRAG||e===Xo.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==Xo.POINTERUP?delete this.trackedPointers_[n]:(t.type==Xo.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=f(this.trackedPointers_)}},e}(Ei);function Si(t){var e=arguments;return function(t){for(var n=!0,o=0,i=e.length;o<i&&(n=n&&e[o](t));++o);return n}}var Mi=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ai=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){var e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)}(t)},Ii=l,ji=function(t){var e=t.originalEvent;return 0==e.button&&!(Ot&&Rt&&e.ctrlKey)},Li=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Fi=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ki=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},Di=function(t){var e=t.originalEvent;return W(void 0!==e,56),"mouse"==e.pointerType},zi=function(t){var e=t.originalEvent;return W(void 0!==e,56),e.isPrimary&&0===e.button},Ni=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Gi=function(t){function e(e){var n=t.call(this,{stopDown:u})||this,o=e||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:Si(Li,zi);return n.condition_=o.onFocusOnly?Si(Ai,i):i,n.noKinetic_=!1,n}return Ni(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,o=this.targetPointers,i=Oi(o);if(o.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();e=r,n=s.getResolution(),e[0]*=n,e[1]*=n,xn(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=o.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-o*Math.cos(i),s[1]-o*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:An})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Ri);var Ki=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zi=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,{stopDown:u})||this).condition_=o.condition?o.condition:Mi,n.lastAngle_=void 0,n.duration_=void 0!==o.duration?o.duration:250,n}return Ki(e,t),e.prototype.handleDragEvent=function(t){if(Di(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Rn){var o=e.getSize(),i=t.pixel,r=Math.atan2(o[1]/2-i[1],i[0]-o[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!Di(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!Di(t)||!ji(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(Ri);const Vi=Zi;var Ui=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xi=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Ui(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+n,o.top=Math.min(t[1],e[1])+n,o.width=Math.abs(e[0]-t[0])+n,o.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new fo([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(o);const Hi=Xi;var Bi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wi=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return Bi(e,t),e}(e);const Yi=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.box_=new Hi(o.className||"ol-dragbox"),n.minArea_=void 0!==o.minArea?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:ji,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return Bi(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var o=n[0]-e[0],i=n[1]-e[1];return o*o+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Wi("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Wi(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Wi("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(Ri);var qi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Qi=function(t){function e(e){var n=this,o=e||{},i=o.condition?o.condition:Fi;return(n=t.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this).duration_=void 0!==o.duration?o.duration:200,n.out_=void 0!==o.out&&o.out,n}return qi(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var o=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(o),r=e.getResolution()/i;(n=n.clone()).scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:An})},e}(Yi);var $i=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ji=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.defaultCondition_=function(t){return Li(t)&&ki(t)},n.condition_=void 0!==o.condition?o.condition:n.defaultCondition_,n.duration_=void 0!==o.duration?o.duration:100,n.pixelDelta_=void 0!==o.pixelDelta?o.pixelDelta:128,n}return $i(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C){var n=t.originalEvent,o=n.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,s=0,a=0;40==o?a=-r:37==o?s=-r:39==o?s=r:a=r;var l=[s,a];xn(l,i.getRotation()),function(t,e,n){var o=t.getCenterInternal();if(o){var i=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:jn,center:t.getConstrainedCenter(i)})}}(i,l,this.duration_),n.preventDefault(),e=!0}}return!e},e}(Ei);var tr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const er=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.condition_=o.condition?o.condition:ki,n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:100,n}return tr(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C||t.type==x){var n=t.originalEvent,o=n.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=t.map,r=o=="+".charCodeAt(0)?this.delta_:-this.delta_;xi(i.getView(),r,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(Ei),nr=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;var i=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,i),this.initialVelocity_=Math.sqrt(i*i+r*r)/o,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var or=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ir="trackpad";const rr=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,o)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,n.duration_=void 0!==o.duration?o.duration:250,n.timeout_=void 0!==o.timeout?o.timeout:80,n.useAnchor_=void 0===o.useAnchor||o.useAnchor,n.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var i=o.condition?o.condition:Ii;return n.condition_=o.onFocusOnly?Si(Ai,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return or(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==b)return!0;var e,n=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==b&&(e=o.deltaY,Pt&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=St),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?ir:"wheel");var r=n.getView();if(this.mode_===ir&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-Y(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),xi(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Ei);var sr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ar=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return sr(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],o=this.targetPointers[1],i=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=i-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=i;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==Rn){var l=s.getViewport().getBoundingClientRect(),u=Oi(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ri);var lr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ur=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==o.duration?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return lr(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],o=this.targetPointers[1],i=n.clientX-o.clientX,r=n.clientY-o.clientY,s=Math.sqrt(i*i+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var u=a.getViewport().getBoundingClientRect(),c=Oi(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),a.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Ri);var cr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hr=function(t){function e(e){return(e=h({},e)).controls||(e.controls=function(t){var e={},n=new ko;return(void 0===e.zoom||e.zoom)&&n.push(new mi(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new _i(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new fi(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},n=new ko,o=new nr(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new Vi),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Ti({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Gi({onFocusOnly:e.onFocusOnly,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new ar),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new ur({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Ji),n.push(new er({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new rr({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new Qi({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return cr(e,t),e.prototype.createRenderer=function(){return new Mo(this)},e}(ci);const pr=hr;class dr extends pi{constructor(t,e){const n=e||{};if(!n.element){const t=document.createElement("div");t.className="bgis-composite",n.element=t}let o;o=t instanceof pi?[t]:t,o.forEach((t=>{t.setTarget(n.element)})),super(n),this.childControls=o}setMap(t){super.setMap(t),t&&this.childControls.forEach((e=>{e.setMap(t)}))}getChildControls(){return this.childControls}}class fr extends dr{constructor(t){const e=t.element?t.element:document.createElement("div");e.classList.add(t.styleClass),t.element=e,super(t.childControls,t),this.styleClass=t.styleClass}getStyleClass(){return this.styleClass}}class gr extends fr{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-footer",childControls:t}))}}const vr=t=>Array.isArray(t)?t:[t];class _r extends dr{constructor(t,e){t.tooltipAsTextElement=!!t.tooltipAsTextElement&&t.tooltipAsTextElement,t.unicode=t.unicode||null,t.iconClassName=t.iconClassName||null,null===t.unicode&&null===t.iconClassName&&(t.unicode=59651),t.tooltip=t.tooltip||"";const n=t.element?t.element:document.createElement("div");n.className=t.containerClassName?t.containerClassName:"ol-control bgis-control",n.title=t.tooltip;const o=document.createElement("button");if(o.className="bgis-icon-button",null!==t.unicode?o.textContent=String.fromCodePoint(t.unicode):null!==t.iconClassName&&o.appendChild(_r.getIconElementForIconClassName(t.iconClassName)),o.title=t.tooltip,t.tooltip.length>0&&o.setAttribute("aria-label",t.tooltip),n.append(o),t.tooltipAsTextElement){const e=document.createElement("div");e.className="bgis-control-button-text-container";const o=document.createElement("span");o.textContent=t.tooltip,o.className="bgis-control-button-text",e.appendChild(o),n.appendChild(e)}super(e||[],Object.assign(Object.assign({},t),{element:n})),this.unicode=t.unicode,this.iconClassName=t.iconClassName,this.button=o,this.element.addEventListener("click",(()=>this.dispatchEvent("click")),!1),t.preventDefault||this.on("click",this.handleEvent)}handleEvent(t){return!0}getButton(){return this.button}setButtonUnicode(t){this.getButton().innerHTML="",this.getButton().textContent=String.fromCodePoint(t)}setButtonIconClassName(t){this.getButton().textContent="",this.getButton().innerHTML="",this.getButton().appendChild(_r.getIconElementForIconClassName(t))}static getIconElementForIconClassName(t){const e=document.createElement("i");return e.className="bgis-icon "+t,e}}class yr extends e{constructor(t,e){super(t),this.isToggled=e}}class mr extends _r{constructor(t){super(t||{},t.containerToToggle),this._isToggled=!1,this.containerToToggle=t.containerToToggle,this.unicodeToggled=t.unicodeToggled||null,this.iconClassNameToggled=t.iconClassNameToggled||null,null===this.unicodeToggled&&null===this.iconClassNameToggled&&(this.unicodeToggled=59651)}handleEvent(t){if(t.type===w){this.isToggled=!this.isToggled,this.dispatchEvent(new yr("toggle",this.isToggled));const t=this.getParentElement();t&&this.handleOverlayForElement(t.querySelector(".ol-overlaycontainer-stopevent")),this.handleOverlayOuter(),this.isToggled?null!==this.unicodeToggled?this.setButtonUnicode(this.unicodeToggled):null!==this.iconClassNameToggled&&this.setButtonIconClassName(this.iconClassNameToggled):null!==this.unicode?this.setButtonUnicode(this.unicode):null!==this.iconClassName&&this.setButtonIconClassName(this.iconClassName),((t,e,n=document)=>{vr(t).forEach((t=>{const o=n.querySelector(t);o&&vr(e).forEach((t=>null==o?void 0:o.classList.toggle(t)))}))})("."+this.containerToToggle.getStyleClass(),"show",t||document)}return!0}set isToggled(t){this._isToggled=t}get isToggled(){return this._isToggled}handleOverlayForElement(t,e="bgis-overlay-bg"){null!=this.element&&(this.isToggled?(null==t||t.classList.add("bgis-overlay-toggled-true"),((t,e,n)=>{null!=t?t.querySelector(`.${n}`)||t.appendChild(((t,e)=>{const n=document.createElement(t);return n.className=e,n})("div",n)):console.log("Enclosing element is null")})(t,0,e)):(null==t||t.classList.remove("bgis-overlay-toggled-true"),((t,e)=>{if(null!=t){const n=t.querySelectorAll(`.${e}`);null!=n&&n.length>0&&n.forEach((t=>t.parentElement.removeChild(t)))}})(t,e)))}handleOverlayOuter(){const t=this.getParentElement();if(t){const e=t.querySelectorAll(".bgis-toggled-overlayable");e&&e.length>0&&e.forEach((t=>{this.handleOverlayForElement(t)}))}}getParentElement(){let t=this.element.closest(".bgis");return t||(t=this.element.closest(".bgis-map")),t}}class wr extends fr{constructor(t){let e=null;if(t.verticalControls&&t.verticalControls.length>0){const n=new fr({styleClass:"bgis-bottom-right-vertical",childControls:t.verticalControls});e=new mr({containerToToggle:n,containerClassName:"ol-control bgis-control bgis-bottom-right-overlay",unicode:59655,unicodeToggled:59684,tooltip:"mehr..."}),t.horizontalControls.push(e)}const n=t||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-bottom-right-horizontal",childControls:t.horizontalControls})),this.toggleButton=e,null!=this.toggleButton&&this.toggleButton.addEventListener("toggle",(t=>(this.dispatchEvent(t),!0)))}getToggleButton(){return this.toggleButton}}class Cr extends fr{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-top-right",childControls:t}))}}var xr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Er="accuracy",br="accuracyGeometry",Tr="altitude",Pr="altitudeAccuracy",Or="heading",Rr="position",Sr="projection",Mr="speed",Ar="tracking",Ir="trackingOptions",jr=function(t){function e(e){var n=t.call(this,y)||this;return n.code=e.code,n.message=e.message,n}return xr(e,t),e}(e);const Lr=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.position_=null,n.transform_=qe,n.watchId_=void 0,n.addChangeListener(Sr,n.handleProjectionChanged_),n.addChangeListener(Ar,n.handleTrackingChanged_),void 0!==o.projection&&n.setProjection(o.projection),void 0!==o.trackingOptions&&n.setTrackingOptions(o.trackingOptions),n.setTracking(void 0!==o.tracking&&o.tracking),n}return xr(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=on($e("EPSG:4326"),t),this.position_&&this.set(Rr,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(Er,e.accuracy),this.set(Tr,null===e.altitude?void 0:e.altitude),this.set(Pr,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Or,null===e.heading?void 0:et(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var n=this.transform_(this.position_);this.set(Rr,n),this.set(Mr,null===e.speed?void 0:e.speed);var o=function(t,e,n,o){for(var i=[],r=0;r<32;++r)s(i,We(t,e,2*Math.PI*r/32,undefined));return i.push(i[0],i[1]),new po(i,Ln,[i.length])}(this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(br,o),this.changed()},e.prototype.positionError_=function(t){this.dispatchEvent(new jr(t))},e.prototype.getAccuracy=function(){return this.get(Er)},e.prototype.getAccuracyGeometry=function(){return this.get(br)||null},e.prototype.getAltitude=function(){return this.get(Tr)},e.prototype.getAltitudeAccuracy=function(){return this.get(Pr)},e.prototype.getHeading=function(){return this.get(Or)},e.prototype.getPosition=function(){return this.get(Rr)},e.prototype.getProjection=function(){return this.get(Sr)},e.prototype.getSpeed=function(){return this.get(Mr)},e.prototype.getTracking=function(){return this.get(Ar)},e.prototype.getTrackingOptions=function(){return this.get(Ir)},e.prototype.setProjection=function(t){this.set(Sr,$e(t))},e.prototype.setTracking=function(t){this.set(Ar,t)},e.prototype.setTrackingOptions=function(t){this.set(Ir,t)},e}(k);class Fr extends e{constructor(t,e){super(t),this.position=e}}class kr extends _r{constructor(t){const e=t||{};super(Object.assign({unicode:59702,containerClassName:"ol-control bgis-control ol-geolocate",tooltip:"Standort zentrieren"},e));const n=t||{};this._geoLocation=new Lr(n)}handleEvent(t){var e,n;return t.type===w&&this.geoLocation&&(null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n?void 0:n.getProjection())&&(this.geoLocation.once("change",(()=>{var t,e;this.geoLocation.setTracking(!1),null===(t=this.getMap())||void 0===t||t.getView().animate({center:(e=this.geoLocation.getPosition(),sn(e,"EPSG:4326","EPSG:3857")),duration:300}),this.geoLocation.getPosition()&&this.dispatchEvent(new Fr("location_retrieved",this.geoLocation.getPosition()))})),this.geoLocation.setTracking(!0)),!0}get geoLocation(){return this._geoLocation}}class Dr extends fi{constructor(t){super(t||{collapsed:!1}),this.element.className+=" bgis-copyright"}}var zr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nr="projection",Gr="coordinateFormat",Kr=function(t){function e(e){var n=this,o=e||{},i=document.createElement("div");i.className=void 0!==o.className?o.className:"ol-mouse-position",(n=t.call(this,{element:i,render:o.render,target:o.target})||this).on,n.once,n.un,n.addChangeListener(Nr,n.handleProjectionChanged_),o.coordinateFormat&&n.setCoordinateFormat(o.coordinateFormat),o.projection&&n.setProjection(o.projection);var r=!0,s="&#160;";return"undefinedHTML"in o?(void 0!==o.undefinedHTML&&(s=o.undefinedHTML),r=!!s):"placeholder"in o&&(!1===o.placeholder?r=!1:s=String(o.placeholder)),n.placeholder_=s,n.renderOnMouseOut_=r,n.renderedHTML_=i.innerHTML,n.mapProjection_=null,n.transform_=null,n}return zr(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(Gr)},e.prototype.getProjection=function(){return this.get(Nr)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(T(n,Ho,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(T(n,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(Gr,t)},e.prototype.setProjection=function(t){this.set(Nr,$e(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();this.transform_=n?on(this.mapProjection_,n):qe}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var i=hn();i&&(this.transform_=on(this.mapProjection_,i)),this.transform_(o,o);var r=this.getCoordinateFormat();e=r?r(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(pi);const Zr=Kr;class Vr extends Zr{constructor(t){const e=t||{};e.projection=e.projection?e.projection:"EPSG:4326",e.coordinateFormat=e.coordinateFormat?e.coordinateFormat:t=>t?function(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}(t,"{x}N/{y}E",4):"",e.undefinedHTML=e.undefinedHTML?e.undefinedHTML:"&nbsp;-&nbsp;N/&nbsp;-&nbsp;E",e.className=e.className?e.className:"ol-control ol-mouse-position bgis-mouseposition",super(e)}}class Ur extends mi{constructor(t){const e=t||{};super(Object.assign(Object.assign({},e),{zoomInLabel:String.fromCodePoint(59700),zoomOutLabel:String.fromCodePoint(59701)})),this.element.className="ol-control bgis-control zoom-container"}}const Xr=25.4/.28,Hr=[1,2,5];class Br extends pi{constructor(t){const e=t||{},n=e.className?e.className:"bgis-scaleline";super({element:document.createElement("div"),target:e.target}),this.viewState=null,this._minWidth=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible=!1,this.renderedWidth=void 0,this.renderedSVG=void 0,this.dpi=e.dpi||void 0,this.element.className=n}render(t){const e=t.frameState;this.viewState=e?e.viewState:null,this.updateElement()}updateElement(){const t=this.viewState;if(!t)return void(this.renderedVisible&&(this.element.style.display="none",this.renderedVisible=!1));const e=t.center,n=t.projection,o=Re.METERS;let i=Je(n,t.resolution,e,o);const r=this._minWidth*(this.dpi||Xr)/Xr,s=r*i;let a="";s<.001?(a="m",i*=1e6):s<1?(a="mm",i*=1e3):s<1e3?a="m":(a="km",i/=1e3);let l,u,c,h=3*Math.floor(Math.log(r*i)/Math.log(10));for(;;){c=Math.floor(h/3);const t=Math.pow(10,c);if(l=Hr[(h%3+3)%3]*t,u=Math.round(l/i),isNaN(u))return this.element.style.display="none",void(this.renderedVisible=!1);if(u>=r)break;++h}let p=null;l&&c>=0&&(p=this.getGeneratedSVG(l.toFixed(c<0?-c:0)+" "+a,u)),p&&this.renderedSVG!=p&&(this.element.innerHTML="",this.element.appendChild(p),this.renderedSVG=p),this.renderedWidth!=u&&(this.element.style.width=u+"px",p&&p.setAttribute("width",String(u)),this.renderedWidth=u),this.renderedVisible||(this.element.style.display="",this.renderedVisible=!0)}getGeneratedSVG(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id","bgis-scaleline-svg"),n.setAttribute("viewBox","0 0 "+e+" 18"),n.setAttribute("width",String(e)),n.setAttribute("height","100%");const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("id","bgis-scaleline-svg-background"),o.setAttribute("x",String(0)),o.setAttribute("y",String(0)),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","#e5ecf0"),o.setAttribute("fill-opacity",".5"),o.setAttribute("stroke","black"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","0 "+e+" "+(e+36)),n.appendChild(o);const i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.textContent=t,i.setAttribute("x",String(e/2)),i.setAttribute("y",String(12)),i.setAttribute("text-anchor","middle"),i.setAttribute("font-size","1em"),i.setAttribute("style",'font-size: 0.75rem; font-family: "Source Sans Pro", sans-serif'),i.setAttribute("font-family",'"Source Sans Pro", sans-serif'),i.setAttribute("fill","black"),n.appendChild(i),n}setMinWidth(t){this._minWidth=t}getMinWidth(){return this._minWidth}}class Wr extends e{constructor(t,e){super(t),this.originalEvent=e}}class Yr extends pi{constructor(t){const e=t||{},n=document.createElement("div");n.className="bgis-overview-image";const o=document.createElement("figure");o.innerHTML=Yr.SVG_CODE,n.appendChild(o),e.element=n,super(e),this.preventDefault=e.preventDefault||!1,this.overviewContainerElement=n,this.extent=Zt([[101e4,579e4],[196e4,633e4]]),this.overviewContainerElement.addEventListener("click",(t=>this.dispatchEvent(new Wr("click",t))),!1),this.preventDefault||this.on("click",this.onOverviewImageClick),this.svgElement=o.firstChild,this.backgroundSVGRectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.backgroundSVGRectElement.setAttribute("class","bgis-overviewmap-svg-background"),this.backgroundSVGRectElement.setAttribute("x",String(0)),this.backgroundSVGRectElement.setAttribute("y",String(0)),this.backgroundSVGRectElement.setAttribute("rx",String(8)),this.backgroundSVGRectElement.setAttribute("ry",String(8)),this.backgroundSVGRectElement.setAttribute("width",String(Yr.SVG_WIDTH)),this.backgroundSVGRectElement.setAttribute("height",String(Yr.SVG_HEIGHT)),this.backgroundSVGRectElement.setAttribute("style","stroke-width:0"),this.backgroundSVGRectElement.setAttribute("fill",Yr.BACKGROUND_COLOR),this.svgElement.prepend(this.backgroundSVGRectElement)}setMap(t){super.setMap(t),t&&(this.preventDefault||t.on("moveend",(t=>this.updateCrosshair(t))))}updateCrosshair(t){var e;const n=[Yr.SVG_WIDTH,Yr.SVG_HEIGHT],o=this.getOverviewPxFromLonLat(null===(e=t.map.getView())||void 0===e?void 0:e.getCenter());if(o[0]>n[0]?o[0]=n[0]:o[0]<0&&(o[0]=0),o[1]>n[1]?o[1]=n[1]:o[1]<0&&(o[1]=0),this.svgElement){const t=this.svgElement.getElementsByClassName("bgis-overviewmap-svg-crosshair");if(t)for(const e of Array.from(t))this.svgElement.removeChild(e);this.svgElement.appendChild(Yr.getCrosshair(o[0],0,o[0],Yr.SVG_HEIGHT,"bgis-overviewmap-svg-crosshair-x")),this.svgElement.appendChild(Yr.getCrosshair(0,o[1],Yr.SVG_WIDTH,o[1],"bgis-overviewmap-svg-crosshair-y"))}}static getCrosshair(t,e,n,o,i){const r=document.createElementNS("http://www.w3.org/2000/svg","line");return r.setAttribute("x1",String(t)),r.setAttribute("y1",String(e)),r.setAttribute("x2",String(n)),r.setAttribute("y2",String(o)),r.setAttribute("style","fill: none; stroke: black; stroke-width: 1px;"),r.setAttribute("class","bgis-overviewmap-svg-crosshair "+i),r}static calculateResolutionFromWidth(t,e,n){return Math.abs(t-e)/n}getOverviewPxFromLonLat(t){if(t){const e=[Yr.SVG_WIDTH,Yr.SVG_HEIGHT],n=[Yr.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),Yr.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[Math.round(1/n[0]*(t[0]-this.extent[0])),Math.round(1/n[1]*(this.extent[3]-t[1]))]}return[0,0]}onOverviewImageClick(t){var e,n;const o=this.overviewContainerElement.getBoundingClientRect(),i=t.originalEvent.clientX-o.left,r=t.originalEvent.clientY-o.top,s=this.getLonLatFromOverviewPx([i,r]);null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n||n.animate({center:s,duration:300})}getLonLatFromOverviewPx(t){const e=[this.overviewContainerElement.clientWidth,this.overviewContainerElement.clientHeight],n=[Yr.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),Yr.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[t[0]*n[0]+this.extent[0],this.extent[3]-t[1]*n[1]]}getOverviewContainerElement(){return this.overviewContainerElement}getSVGElement(){return this.svgElement}getBackgroundRectElement(){return this.backgroundSVGRectElement}}Yr.BACKGROUND_COLOR="#e5ecf0",Yr.SVG_HEIGHT=216,Yr.SVG_WIDTH=380,Yr.SVG_CODE="<svg xmlns='http://www.w3.org/2000/svg' class='bgis-overviewmap-svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 "+Yr.SVG_WIDTH+" "+Yr.SVG_HEIGHT+"' preserveAspectRatio='xMidYMid meet' height='100%' width='100%' color-interpolation='auto' fill='black' fill-opacity='1'  stroke='black' stroke-dasharray='none' stroke-dashoffset='0' stroke-linecap='square' stroke-linejoin='miter' stroke-miterlimit='10' stroke-opacity='1' stroke-width='1' xmlns:v='https://vecta.io/nano'><style><![CDATA[.B{clip-path:url(#A)}.C{fill-rule:evenodd}.D{stroke:none}.E{fill:#999}.F{fill:none}.G{stroke-miterlimit:1}.H{stroke-width:2.5}]]></style><defs><clipPath id='A'><path d='M0 0h380v216H0V0z'/></clipPath><path id='B' d='M356 82l-.4 5.2 4.4 1.6-3.2 2.4v6.4l-3.6.8 2.8 3.6.8 6.8-9.6 1.2-.4-2-1.6 2.4h-3.6l-1.6-3.6-4.8-1.6-8 6.4 6.4 3.2 3.2-.8 1.2 4.8 2 .8-2.8 2.8.4 3.2-3.6 3.2-2.8-.4-.8 1.6-2.4-1.6-.4 4 2.4 4.8-2.4 1.6-.8 4 2 .8-.4 2.4 2.8-.4.8 1.6-3.2 1.6 2.8 2.8-4 2 3.6 1.6-10-.8-.4 3.2-4 1.6-2.4 4.4-6.4 2.8.8-3.6 6.4-6.8-3.2-5.2 1.6-4.8-4.8-14.8 13.2-6.8v-6l2.8-4-.8-3.6-2.4-1.2-1.2-7.6 3.2.8 2-2.8-2-1.6 2.8-.8 2-4 3.2-.4 2.4 4 5.6-5.6v-2.8l5.6-1.2 2.4-3.2L352 88l1.6-3.6-2-2 2.8 1.6 1.6-2z'/><path id='C' d='M162.4 146.8l.4 2 8.4 1.2 1.6 2.8 4.4 1.6 8-2 .4-2.8 4.8-.8 2 2 10.8.8 8.4 9.6 5.6-2 2.4-4 8.4-4.8 1.6 3.2h6l.8 3.2 4.8-3.2 5.6 2 10-3.6 8 8.8-2 8.8 2.4.8-.4 6.4 2 1.2-3.6 3.2-1.2-2-1.6 2-2.4-.4-2.4 6.4-4.8.8-.4 2.4-4.8 1.6-.8 4-2.4-3.6-2 1.2-2-2.4-12.4.8-1.2-2.8h-5.2l-4-2.8-5.6 1.2-18-4.8-6.8 1.6-6.4-3.2H168l-2.4-2.8-4.8-.4v-3.2h1.6V172l9.2-1.2 1.6-2.4-5.6-4v-3.2l-4.4-3.2-.8-2.4 2-3.2h-2.8l-2.4-3.6 3.2-2z'/><path id='D' d='M264.8 20.8l5.6 1.6.4 4 4.4-.8 1.6-2.8 8.8 3.2.8 2 8 4 6.8-1.6V32l5.2 2 .4 2.4 5.6 3.2 12.8 1.2 3.6-5.6 3.6-.4 2.4 2.4 2.8-.4 1.2 4 10.4 1.6 1.6 10.8-4.8 6-.8 4.8 5.6 7.6.8 6.4 4.4 3.2-1.6 2.8-2.8-1.6 2 2L352 88l-4.4-3.6-2.4 3.2-5.6 1.2v2.8l-5.6 5.6-2.4-4-3.2.4-1.6 3.6-3.2 1.2 2 1.2-2 3.2-3.2-.8 1.2 7.6 2.4 1.2.8 3.6-2.8 4 1.2 4-5.2 5.2h-2.8l-2-6.8-2.4 2.8-1.2-2-4.8-.8-1.2-2.8-2 .4.4-4-5.2-.4-1.2-5.6-1.6 1.2-3.2-3.6-4.4.4v-1.6H284l-4.4-4-2.4.4-.4 2-3.2-.4-.8 3.2-10.4.4-2 2.4-4-2.4-3.2 1.2-2.4-4v-4.4l2.8-1.6-.4-1.6-1.6-2.4-1.6.8-8.4-4.4-2-3.2v-3.6l1.6-.8-.8-6.4 2-2.4 6.8 5.2 7.2-2L258 74h3.2l1.2 2.4.8-8.4h-2l.8-4.8-2 .4 1.6-1.6-4-4.8 2.8-1.6-10.4-5.2 1.6-7.2 3.6-2.8.4-3.6 7.2 1.2V23.2l2-2.4zm62 47.2l-7.2 5.6-2.4-1.6-.8 6 1.6 3.2 9.6.4 2-2.8 4.4 1.6-2-2.4.8-6-2-2-1.6 1.2-2.4-3.2z'/><path id='E' d='M212.4 38l9.6 6.4-2.4 2 2.4 3.2h6l6.4 2.8 2-2.8h2.4L240 46l4 3.2 2.4-2 5.6 5.2 7.2 2 1.2 1.2-2.8 1.6.4 2 3.6 2.8-1.6 1.6 2-.4-.8 4.8h2v4.4l-.8 4-1.2-2.4H258l-1.6 2.8-6 2-6.8-5.2-3.2 2.4.8 6.4-1.6.8v3.6l6.4 6 5.6.8 2 3.2-2.8 2.4 1.6 6.8-2.4-.8-2 2.4-5.2.8-.8 2.4-8.4 4.8-3.2-.4-2-2.8-6.8 2.4v-3.6l-2-2-10.4-1.2-3.6 5.6 2.8 8.4-1.6 3.2h-2.4l-8.4-4 2-6.4-1.6-2 2.8-4.4-5.2-2 1.2-2.8 3.2.8v-1.6l-6.4.4-4.4-2-.4-8.8 3.6 1.2.4-2.8-4-2-6 2.8v-2l-3.2-.4-1.2-2.4h-4.4l-3.2 3.2-5.2-5.2-.4-3.2 12-9.6 14-4 4.8-7.2-.4-8.8 2 .4 1.2-2.4 10 5.2 4.4-7.2.4-5.6-2-.8 2.4-3.6z'/><path id='F' d='M176.4 86.8l1.6 2.4 3.2.4v2l6-2.8 4 2-.4 2.8-3.6-1.2.4 8.8 11.2 2.4h-3.6l-1.2 3.2 5.2 1.6-2.8 4.4 1.6 2-2 6.4 5.2 3.2-1.6 3.2 1.6 8.8 5.2 2 5.2-2.4.8 4.4 6.8 6.4-5.2 1.2 1.2 2.8-4.4 8-5.2-3.6v-2.4l-10.4-2.8-2.8.8-1.6-2-5.2.8-.4 2.8-7.2 2-5.2-1.6-1.6-2.8-8.4-1.2v-2l-4 2-6-3.6H148l-6.4 5.6-6-1.2-2-12.8 1.6-1.6 6.8.4 1.2-2 8.4.4v-3.6l4.4-.8 2.4-4.8 2.8-.8-3.2-4.8 2-2-4.4-1.6 1.2-4.4h8.4l-1.2 1.6 2.8 2.4-2 2 .8 2 7.6 5.2 3.6-1.2-.4-5.6 2.8-3.6-.8-4-2.4-2h-5.6l4.4-9.2-6.4-8.4 4-3.6h4z'/><path id='G' d='M279.2 101.2l7.2 3.6v1.6l4.4-.4 3.2 3.6 1.6-1.2 1.2 5.6 5.2.4-.8 3.2 2.4.4 1.2 2.8 4.8.8 1.2 2 1.6-2.8 1.2.8-.4 2.8 2.8 3.2-7.2 3.6 4.8 14.8-1.6 4.8 3.2 4.8-7.6 10.8v6l2.4 5.2-6.8-4h-3.6l-9.6 2-2 1.2v2.8l-3.2 1.2-2.8-3.2-14.8.8-2.4-1.6.4-6.4-2.4-.8 2-8.8-8-8.8-10 3.6-5.6-2-4.8 3.2-.8-3.2h-6l-1.6-3.2-8.4 4.8-2.4 4-4.4 2-3.2-1.6 5.6-8.8-1.2-2.8 5.2-1.2-6.8-6.4-.8-4.4-5.2 2.4-4.8-1.6-2-8.4 1.6-4.4 5.6 1.2 1.6-3.2-2.8-8.4 3.6-5.6 10.4 1.2 2 2v3.6l6.8-2.4 2 2.8 3.2.4 16.4-10.4 3.2 2.4 3.2-1.2 4 2.4 2-2.4 10.4-.4.8-3.2 3.2.4.4-2h2z'/><path id='H' d='M151.6 145.2l6.4 2.4 3.6 4.8h2.8l-2 3.2.8 2.4 4.4 3.2v3.2l5.6 4-1.6 2.4-9.2 1.2-1.6 5.6-5.6.4-8-4-1.2-4-3.2-.4-.4-6.8-2.8.8-3.2-2.8 1.2-1.6-2-4.8 3.6-.8 7.2-7.6 5.2-.8z'/><path id='I' d='M61.2 118.8l5.6 1.6 2-2.4 6.8 3.6 5.2-1.6 1.2 1.6-2.4 2h3.2l2 6h6l4-2.8 2 .4-.8 2.4 2.4-.4 2-3.2 4 .4-1.6-2.4 2.4-2.8 6 .4 2.4-5.2 9.6.8 6.8-2.8 9.2 1.2-2-6.4 4.4-2.8v4.4l8-1.2 2.8 4.8 3.2-.8v2l4 1.2-1.6 2.4 3.2 4.8-2.8.8-2.4 4.8-4.4.8v3.6l-8.4-.4-1.2 2-6.8-.4-1.6 1.6 2.4 13.6-8 2-9.2 5.2-5.2-3.2-3.6 2-3.2-1.6-2.4 2.8-2.4-1.6-9.2 1.6.4 1.6-3.2 1.6-3.2 10h-7.2l-6-1.6 1.6-2.4-4-3.2L66 166l-4-1.2.8-5.6-2.8-.8-1.6-3.2-3.6 3.2.4 2-3.6-.4v4l-4 1.2-1.6-2.8-.4-2.4 2.8-3.6-2-2.4 1.6-1.2-1.2-2.8 4-4 .4-7.2-2.4-1.2 6.8-2 4.8-5.2 2-3.2-2-4 .8-4.4z'/><path id='J' d='M31.2 116.4l2 .4-.4 2.8h6.8l1.2 4 4.4 1.6.4 2.4-1.6.8 1.6 3.6 6-2-.8 5.2-2 1.2 2.4 2.4-.4 7.2-4 4 1.2 2.8-1.6 1.2 2 2.4-2.8 3.6 2 3.6-1.2 2-3.2-1.2-1.2-2.8-6.4-2V154l-12-2.4 1.2-4.8-3.2-2.4.4-4.8-2-2 6.4-8-.4-4-2.8-.4-1.6-2.8 7.6-2 2-4z'/><path id='K' d='M327.6 68.4l.4 2 2.8-.4 2 2-.8 6 2 2.4-4.4-1.6-2 2.8-9.6-.4-1.6-3.2.8-6 2.4 1.6 1.6-2.4 3.6-.4.4-2.8 2.4.4z'/></defs><g text-rendering='optimizeLegibility'><use xlink:href='#B' class='B C D E'/><g stroke='silver'><use xlink:href='#B' class='B F G H'/><use xlink:href='#C' class='B C D E'/><use xlink:href='#C' class='B F G H'/><use xlink:href='#D' class='B C D E'/><use xlink:href='#D' class='B F G H'/><use xlink:href='#E' class='B C D E'/><use xlink:href='#E' class='B F G H'/><use xlink:href='#F' class='B C D E'/><use xlink:href='#F' class='B F G H'/><use xlink:href='#G' class='B C D E'/><use xlink:href='#G' class='B F G H'/><use xlink:href='#H' class='B C D E'/><use xlink:href='#H' class='B F G H'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B C D E'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B F G H'/><use xlink:href='#I' class='B C D E'/><use xlink:href='#I' class='B F G H'/><use xlink:href='#J' class='B C D E'/><use xlink:href='#J' class='B F G H'/><use xlink:href='#K' class='B C D E'/><use xlink:href='#K' class='B F G H'/></g></g></svg>";class qr extends _r{constructor(t){const e=t||{};super(Object.assign({unicode:59666,tooltip:"Ansicht drucken",tooltipAsTextElement:!0},e))}}class Qr extends _r{constructor(t){const e=t||{};super(Object.assign({unicode:Qr.DEFAULT_UNICODE,tooltip:Qr.DEFAULT_TOOLTIP_TEXT,tooltipAsTextElement:!0},e))}}Qr.DEFAULT_TOOLTIP_TEXT="Ansicht teilen",Qr.DEFAULT_UNICODE=59692;class $r extends _r{constructor(t){const e=t||{};super(Object.assign({unicode:59707,tooltip:"Toolbox einblenden",tooltipAsTextElement:!0},e))}}class Jr extends _r{constructor(t){const e=t||{};super(Object.assign({unicode:59703,tooltip:"Liste anzeigen"},e))}}class ts extends _r{constructor(t){const e=t||{};super(Object.assign({unicode:59704,tooltip:"Begleitkarten verwalten"},e))}}var es=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ns=function(t){function e(e,n,o){var i=t.call(this)||this,r=o||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.transition_=void 0===r.transition?250:r.transition,i.transitionStarts_={},i.interpolate=!!r.interpolate,i}return es(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){A()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var o=e-n+1e3/60;return o>=this.transition_?1:Mn(o/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(v);const os=ns;var is=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const rs=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=o,r.resolution=n,r.state=i,r}return is(e,t),e.prototype.changed=function(){this.dispatchEvent(_)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return A()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){A()},e}(v);var ss=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function as(t,e,n){var o=t,i=!0,r=!1,s=!1,a=[P(o,"load",(function(){s=!0,r||e()}))];return o.src&&At?(r=!0,o.decode().then((function(){i&&e()})).catch((function(t){i&&(s?e():n())}))):a.push(P(o,y,n)),function(){i=!1,a.forEach(O)}}!function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,o,0)||this;return a.src_=i,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}ss(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=se(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=as(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=se(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(rs);var ls=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const us=function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,s)||this;return a.crossOrigin_=i,a.src_=o,a.key=o,a.image_=new Image,null!==i&&(a.image_.crossOrigin=i),a.unlisten_=null,a.tileLoadFunction_=r,a}return ls(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=de(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=as(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(os),cs=function(){function t(t,e,n,o,i,r){this.sourceProj_=t,this.targetProj_=e;var s={},a=rn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&ce(o)==ce(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ce(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ce(this.targetProj_.getExtent()):null;var l=le(n),u=ue(n),c=ne(n),h=ee(n),p=this.transformInv_(l),d=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),v=10+(r?Math.max(0,Math.ceil(Q(te(n)/(r*r*256*256)))):0);if(this.addQuad_(l,u,c,h,p,d,f,g,v),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach((function(t,e,n){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,n,o,i,r){this.triangles_.push({source:[o,i,r],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,o,i,r,s,a,l){var u=Zt([i,r,s,a]),c=this.sourceWorldWidth_?ce(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=ce(Zt([t,e,n,o]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)),!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||he(u,this.maxSourceExtent_)){var f=0;if(!(d||isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)d=!0;else if(1!=(f=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!d){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(g),_=void 0;_=p?(nt(i[0],h)+nt(s[0],h))/2-nt(v[0],h):(i[0]+s[0])/2-v[0];var y=(i[1]+s[1])/2-v[1];d=_*_+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],w=this.transformInv_(m),C=[(o[0]+t[0])/2,(o[1]+t[1])/2],x=this.transformInv_(C);this.addQuad_(t,e,m,C,i,r,w,x,l-1),this.addQuad_(C,m,n,o,x,w,s,a,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(E),T=[(n[0]+o[0])/2,(n[1]+o[1])/2],P=this.transformInv_(T);this.addQuad_(t,E,T,o,i,b,P,a,l-1),this.addQuad_(E,e,n,T,b,r,s,P,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&f)&&this.addTriangle_(t,n,o,i,s,a),0==(14&f)&&this.addTriangle_(t,n,e,i,s,r),f&&(0==(13&f)&&this.addTriangle_(e,o,t,r,a,i),0==(7&f)&&this.addTriangle_(e,o,n,r,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,o){var i=e.source;qt(t,i[0]),qt(t,i[1]),qt(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var hs;function ps(t,e,n,o,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(o,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,o)+1,Math.max(n,i)),t.restore()}function ds(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function fs(t,e,n,o){var i=sn(n,e,t),r=Je(e,o,n),s=e.getMetersPerUnit();void 0!==s&&(r*=s);var a=t.getMetersPerUnit();void 0!==a&&(r/=a);var l=t.getExtent();if(!l||Ut(l,i)){var u=Je(t,r,i)/r;isFinite(u)&&u>0&&(r/=u)}return r}var gs=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const vs=function(t){function e(e,n,o,i,r,s,a,l,u,c,h,p){var d=t.call(this,r,0,{interpolate:!!p})||this;d.renderEdges_=void 0!==h&&h,d.pixelRatio_=a,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=n,d.targetTileGrid_=i,d.wrappedTileCoord_=s||r,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var f=i.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),v=d.sourceTileGrid_.getExtent(),_=g?ae(f,g):f;if(0===te(_))return d.state=4,d;var y=e.getExtent();y&&(v=v?ae(v,y):y);var m=i.getResolution(d.wrappedTileCoord_[0]),w=function(t,e,n,o){var i=oe(n),r=fs(t,e,i,o);return(!isFinite(r)||r<=0)&&Jt(n,(function(n){return r=fs(t,e,n,o),isFinite(r)&&r>0})),r}(e,o,_,m);if(!isFinite(w)||w<=0)return d.state=4,d;var C=void 0!==c?c:.5;if(d.triangulation_=new cs(e,o,_,v,w*C,m),0===d.triangulation_.getTriangles().length)return d.state=4,d;d.sourceZ_=n.getZForResolution(w);var x=d.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(x[1]=Y(x[1],v[1],v[3]),x[3]=Y(x[3],v[1],v[3])):x=ae(x,v)),te(x)){for(var E=n.getTileRangeForExtentAndZ(x,d.sourceZ_),b=E.minX;b<=E.maxX;b++)for(var T=E.minY;T<=E.maxY;T++){var P=u(d.sourceZ_,b,T,a);P&&d.sourceTiles_.push(P)}0===d.sourceTiles_.length&&(d.state=4)}else d.state=4;return d}return gs(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,o){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),o="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,o,i,r,s,a,l,u,c,p){var d=de(Math.round(n*t),Math.round(n*e));if(p||h(d,xe),0===l.length)return d.canvas;function f(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";var g=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){var o,i;o=g,(i=t.extent)[0]<o[0]&&(o[0]=i[0]),i[2]>o[2]&&(o[2]=i[2]),i[1]<o[1]&&(o[1]=i[1]),i[3]>o[3]&&(o[3]=i[3])}));var v=ce(g),_=se(g),y=de(Math.round(n*v/o),Math.round(n*_/o));p||h(y,xe);var m=n/o;l.forEach((function(t,e,n){var o=t.extent[0]-g[0],i=-(t.extent[3]-g[3]),r=ce(t.extent),s=se(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,o*m,i*m,r*m,s*m)}));var w=le(s);return a.getTriangles().forEach((function(t,e,i){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],c=s[1][0],h=s[1][1],v=s[2][0],_=s[2][1],m=f((a[0][0]-w[0])/r),C=f(-(a[0][1]-w[1])/r),x=f((a[1][0]-w[0])/r),E=f(-(a[1][1]-w[1])/r),b=f((a[2][0]-w[0])/r),T=f(-(a[2][1]-w[1])/r),P=l,O=u;l=0,u=0;var R=function(t){for(var e=t.length,n=0;n<e;n++){for(var o=n,i=Math.abs(t[n][n]),r=n+1;r<e;r++){var s=Math.abs(t[r][n]);s>i&&(i=s,o=r)}if(0===i)return null;var a=t[o];t[o]=t[n],t[n]=a;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*h[p]}return h}([[c-=P,h-=O,0,0,x-m],[v-=P,_-=O,0,0,b-m],[0,0,c,h,E-C],[0,0,v,_,T-C]]);if(R){if(d.save(),d.beginPath(),function(){if(void 0===hs){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",ps(t,4,5,4,0),ps(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;hs=ds(e,0)||ds(e,4)||ds(e,8)}return hs}()||!p){d.moveTo(x,E);for(var S=m-x,M=C-E,A=0;A<4;A++)d.lineTo(x+f((A+1)*S/4),E+f(A*M/3)),3!=A&&d.lineTo(x+f((A+1)*S/4),E+f((A+1)*M/3));d.lineTo(b,T)}else d.moveTo(x,E),d.lineTo(m,C),d.lineTo(b,T);d.clip(),d.transform(R[0],R[2],R[1],R[3],m,C),d.translate(g[0]-P,g[3]-O),d.scale(o/n,-o/n),d.drawImage(y.canvas,0,0),d.restore()}})),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,n){var o=t.target,i=(o[0][0]-w[0])/r,s=-(o[0][1]-w[1])/r,a=(o[1][0]-w[0])/r,l=-(o[1][1]-w[1])/r,u=(o[2][0]-w[0])/r,c=-(o[2][1]-w[1])/r;d.beginPath(),d.moveTo(a,l),d.lineTo(i,s),d.lineTo(u,c),d.closePath(),d.stroke()})),d.restore()),d.canvas}(o,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,o){var i=e.getState();if(0==i||1==i){t++;var r=T(e,_,(function(n){var o=e.getState();2!=o&&3!=o&&4!=o||(O(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(O),this.sourcesListenerKeys_=null},e}(os),_s=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return W(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return W(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){W(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function ys(t,e,n,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=n,o):[t,e,n]}function ms(t,e,n){return t+"/"+e+"/"+n}function ws(t){return ms(t[0],t[1],t[2])}var Cs=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cs(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey().split("/").map(Number)[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(ws(e.tileCoord)),e.release())}.bind(this))}},e}(_s);const Es=xs;var bs=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Ts(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Ps=function(t){function e(e){var n=t.call(this)||this;n.projection=$e(e.projection),n.attributions_=Ts(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:pt,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n.interpolate_=!!e.interpolate,n.viewResolver=null,n.viewRejector=null;var o=n;return n.viewPromise_=new Promise((function(t,e){o.viewResolver=t,o.viewRejector=e})),n}return bs(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return A()},e.prototype.getView=function(){return this.viewPromise_},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getInterpolate=function(){return this.interpolate_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Ts(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(k);var Os=[0,0,0];const Rs=function(){function t(t){var e,n,o;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,W((e=this.resolutions_,!0,n=function(t,e){return e-t}||i,e.every((function(t,o){if(0===o)return!0;var i=n(e[o-1],t);return!(i>0||0===i)}))),17),!t.origins)for(var r=0,s=this.resolutions_.length-1;r<s;++r)if(o){if(this.resolutions_[r]/this.resolutions_[r+1]!==o){o=void 0;break}}else o=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,W(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=le(a)),W(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,W(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,W(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new Ce(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var o=this.getTileRangeForExtentAndZ(a,e);n.minX=Math.max(o.minX,n.minX),n.maxX=Math.min(o.maxX,n.maxX),n.minY=Math.max(o.minY,n.minY),n.maxY=Math.min(o.maxY,n.maxY)}return n}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,n){for(var o=this.getTileRangeForExtentAndZ(t,e),i=o.minX,r=o.maxX;i<=r;++i)for(var s=o.minY,a=o.maxY;s<=a;++s)n([e,i,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,o){var i,r,s=null,a=t[0]-1;for(2===this.zoomFactor_?(i=t[1],r=t[2]):s=this.getTileCoordExtent(t,o);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?we(i=Math.floor(i/2),i,r=Math.floor(r/2),r,n):this.getTileRangeForExtentAndZ(s,a,n)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],i=2*t[2];return we(o,o+1,i,i+1,e)}var r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var o=t[0],i=t[1],r=t[2];if(e===o)return we(i,r,i,r,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-o),a=Math.floor(i*s),l=Math.floor(r*s);return e<o?we(a,a,l,l,n):we(a,Math.floor(s*(i+1))-1,l,Math.floor(s*(r+1))-1,n)}var u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var o=this.getOrigin(t),i=this.getResolution(t),r=si(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*r[0]*i,a=o[0]+(e.maxX+1)*r[0]*i;return Bt(s,o[1]+e.minY*r[1]*i,a,o[1]+(e.maxY+1)*r[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var o=Os;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,o);var i=o[1],r=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,o),we(i,o[1],r,o[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=si(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*n,e[1]-(t[2]+.5)*o[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=si(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*i[0]*o,s=n[1]-(t[2]+1)*i[1]*o;return Bt(r,s,r+i[0]*o,s+i[1]*o,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,o,i){var r=this.getZForResolution(n),s=n/this.getResolution(r),a=this.getOrigin(r),l=si(this.getTileSize(r),this.tmpSize_),u=s*(t-a[0])/n/l[0],c=s*(a[1]-e)/n/l[1];return o?(u=st(u,5)-1,c=st(c,5)-1):(u=rt(u,5),c=rt(c,5)),ys(r,u,c,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,o,i){var r=this.getOrigin(n),s=this.getResolution(n),a=si(this.getTileSize(n),this.tmpSize_),l=(t-r[0])/s/a[0],u=(r[1]-e)/s/a[1];return o?(l=st(l,5)-1,u=st(u,5)-1):(l=rt(l,5),u=rt(u,5)),ys(n,l,u,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return Y(r(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),o=this.minZoom;o<e;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},t}();function Ss(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,o){return function(t,e,n,o){var i=Ms(t,undefined,n);return new Rs({extent:t,origin:ie(t,"top-left"),resolutions:i,tileSize:n})}(As(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function Ms(t,e,n,o){for(var i=void 0!==e?e:42,r=se(t),s=ce(t),a=si(void 0!==n?n:256),l=o>0?o:Math.max(s/a[0],r/a[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function As(t){var e=(t=$e(t)).getExtent();if(!e){var n=180*Oe[Re.DEGREES]/t.getMetersPerUnit();e=Bt(-n,-n,n,n)}return e}var Is=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),js=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&si(o.getTileSize(o.getMinZoom()),[256,256]),n.tileCache=new Es(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition,interpolate:e.interpolate},n.zDirection=e.zDirection?e.zDirection:0,n}return Is(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,o){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var r,s,a,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)s=ms(e,u,c),a=!1,i.containsKey(s)&&(a=2===(r=i.get(s)).getState())&&(a=!1!==o(r)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,o,i){return A()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Ss(t)},e.prototype.getTileCacheForProjection=function(t){return W(nn(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var o,i,r,s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),l=si(s.getTileSize(t),this.tmpSize);return 1==a?l:(o=l,i=a,void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=o[0]*i+.5|0,r[1]=o[1]*i+.5|0,r)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var o=e[0],i=t.getTileCoordCenter(e),r=As(n);if(Ut(r,i))return e;var s=ce(r),a=Math.ceil((r[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,o)}(o,t,n)),function(t,e){var n=t[0],o=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var r=e.getFullTileRange(n);return!r||r.containsXY(o,i)}(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,o){},e}(Ps),Ls=function(t){function e(e,n){var o=t.call(this,e)||this;return o.tile=n,o}return Is(e,t),e}(e);const Fs=js;function ks(t,e){var n=/\{z\}/g,o=/\{x\}/g,i=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(o,s[1].toString()).replace(i,s[2].toString()).replace(r,(function(){var t=s[0],n=e.getFullTileRange(t);return W(n,55),(n.getHeight()-s[2]-1).toString()})):void 0}}var Ds=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const zs=function(t){function e(n){var o=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,interpolate:n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return o.generateTileUrlFunction_=o.tileUrlFunction===e.prototype.tileUrlFunction,o.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(o.tileUrlFunction=n.tileUrlFunction),o.urls=null,n.urls?o.setUrls(n.urls):n.url&&o.setUrl(n.url),o.tileLoadingKeys_={},o}return Ds(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,o=j(n),i=n.getState();1==i?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=3==i?"tileloaderror":2==i?"tileloadend":void 0),null!=e&&this.dispatchEvent(new Ls(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var o=n[1].charCodeAt(0),i=n[2].charCodeAt(0),r=void 0;for(r=o;r<=i;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=ks(t[i],e);return function(t){return 1===t.length?t[0]:function(e,n,o){if(e){var i=function(t){return(t[1]<<t[0])+t[2]}(e),r=nt(i,t.length);return t[r](e,n,o)}}}(o)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var o=ms(t,e,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(Fs);var Ns=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gs=function(t){function e(e){var n=this,o=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(o=e.interpolate),(n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Ks,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:o,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:us,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return Ns(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[o];i.expireCache(i==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!nn(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var e=t.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!nn(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!nn(e,t)){var n=j(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Ss(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||nn(e,t))return this.tileCache;var n=j(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Es(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,o,i,r){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),l=a?this.tileUrlFunction(a,o,i):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(_,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,o,i){var r=this.getProjection();if(r&&i&&!nn(r,i)){var s=this.getTileCacheForProjection(i),a=[t,e,n],l=void 0,u=ws(a);s.containsKey(u)&&(l=s.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(r),p=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(a,i),f=new vs(r,h,i,p,a,d,this.getTilePixelRatio(o),this.getGutter(),function(t,e,n,o){return this.getTileInternal(t,e,n,o,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return f.key=c,l?(f.interimTile=l,f.refreshInterimChain(),s.replace(u,f)):s.set(u,f),f}return this.getTileInternal(t,e,n,o,r||i)},e.prototype.getTileInternal=function(t,e,n,o,i){var r=null,s=ms(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var l=r;r=this.createTile_(t,e,n,o,i,a),0==l.getState()?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,n,o,i,a),this.tileCache.set(s,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=$e(t);if(n){var o=j(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},e}(zs);function Ks(t,e){t.getImage().src=e}const Zs=Gs;var Vs=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Us=function(t){function e(e){var n=e||{},o=void 0===n.imageSmoothing||n.imageSmoothing;void 0!==n.interpolate&&(o=n.interpolate);var i=void 0!==n.projection?n.projection:"EPSG:3857",r=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||$e("EPSG:3857").getExtent(),o={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Ms(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Rs(o)}({extent:As(i),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:o,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return Vs(e,t),e}(Zs),Xs={geolandbasemap:"https://maps{1-4}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",bmapgrau:"https://maps{1-4}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png",bmaporthofoto30cm:"https://maps{1-4}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg",bmapgelaende:"https://maps{1-4}.wien.gv.at/basemap/bmapgelaende/grau/google3857/{z}/{y}/{x}.jpeg",bmapoberflaeche:"https://maps{1-4}.wien.gv.at/basemap/bmapoberflaeche/grau/google3857/{z}/{y}/{x}.jpeg",bmapoverlay:"https://maps{1-4}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png"};class Hs extends Us{constructor(t){const e=(null==t?void 0:t.variant)||"geolandbasemap";super({url:Xs[e],attributions:'Grundkarte: <a href="https://basemap.at/">basemap.at</a>',crossOrigin:"Anonymous"})}}return new pr({target:"bgis-map",layers:[new mn({source:new Hs})],controls:[new gr([new Br,new Vr,new Dr]),new wr({horizontalControls:[new ts,new Jr],verticalControls:[new qr,new Qr,new $r]}),new Cr([new kr,new Ur]),new Yr],view:new Co({center:oe([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),new pr({target:"bgis-map-2",layers:[new mn({source:new Hs})],controls:[new gr([new Br,new Vr,new Dr]),new wr({horizontalControls:[new ts,new Jr],verticalControls:[new qr,new Qr,new $r]}),new Cr([new kr,new Ur]),new Yr],view:new Co({center:oe([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),t})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQ1JwSSxpQkFBa0IsQ0FBQyxJQUFJK0gsR0FDbkIsSUFBSUMsR0FBUyxJQUFJRyxNQUV6QixJQUFJaEksR0FBUyxDQUNULElBQUl1QyxHQUNKLElBQUk5USxLQUVSLElBQUlxVSxJQUVSbmYsS0FBTSxJQUFJNVosR0FBSyxDQUNYemdCLE9BQVFMLEdBQVUsQ0FBQyxNQUFTLFFBQVMsUUFBUyxVQUM5Q21pQixxQkFBcUIsRUFDckJFLHFCQUFxQixFQUNyQnp1QixPQUFRLENBQUMsTUFBUyxRQUFTLFFBQVMsU0FDcENoQixRQUFTLEdBQ1RELFFBQVMsRUFDVDBDLEtBQU0sTSIsInNvdXJjZXMiOlsid2VicGFjazovL2JnaXMtY29yZS93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2JnaXMtY29yZS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvRGlzcG9zYWJsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvYXJyYXkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvb2JqLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvVGFyZ2V0LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL09ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3V0aWwuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL09iamVjdC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0Fzc2VydGlvbkVycm9yLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9hc3NlcnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9tYXRoLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0xheWVyLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0Jhc2VUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9MYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2VTdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9oYXMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29sb3IuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9Db3JuZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZG9tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY3NzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1VuaXRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL1Byb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzM4NTcuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovZXBzZzQzMjYuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovcHJvamVjdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Byb2ovdHJhbnNmb3Jtcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3BoZXJlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29vcmRpbmF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY2VudGVyY29uc3RyYWludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JvdGF0aW9uY29uc3RyYWludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZWFzaW5nLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5TGF5b3V0LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvdHJhbnNmb3JtLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvY2xvc2VzdC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2RlZmxhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9zaW1wbGlmeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2luZmxhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9hcmVhLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0xpbmVhclJpbmcuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vR2VvbWV0cnlUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvY29udGFpbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc2VnbWVudHMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9yZXZlcnNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvb3JpZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL1BvbHlnb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbnRlcmlvcnBvaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC9jb21tb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1ZpZXdIaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zdHlsZS9JY29uSW1hZ2VDYWNoZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTWFwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXIvY2FudmFzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9Db21wb3NpdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb25FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0NvbGxlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL0dyb3VwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBFdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBCcm93c2VyRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wb2ludGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9NYXBQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3RydWN0cy9Qcmlvcml0eVF1ZXVlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlUXVldWUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NpemUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1BsdWdnYWJsZU1hcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Db250cm9sLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL0F0dHJpYnV0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9ab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUG9pbnRlci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL2NvbmRpdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0JveC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ0JveC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9ldmVudHMvS2V5Q29kZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9LaW5ldGljLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2Jhc2UvQ29tcG9zaXRlQ29udHJvbC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Db250YWluZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvRm9vdGVyLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL3V0aWwvZG9tLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvYmFzZS9CdXR0b24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL1RvZ2dsZUJ1dHRvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Cb3R0b21SaWdodC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Ub3BSaWdodC50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvR2VvbG9jYXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9HZW9Mb2NhdGUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvTW91c2VQb3NpdGlvbi50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1pvb20udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9TY2FsZUxpbmUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9PdmVydmlldy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1ByaW50LnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvU2hhcmUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9Ub29scy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1ZpZXdMaXN0LnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvTGF5ZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlQmFzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVwcm9qL1RpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9jb21tb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvTFJVQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVjb29yZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZUNhY2hlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvU291cmNlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlZ3JpZC9UaWxlR3JpZC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxldXJsZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9VcmxUaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZUV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGVJbWFnZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1hZWi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9zb3VyY2UvQmFzZW1hcFNvdXJjZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zaXRlL2V4YW1wbGVzL2RhdGEvY29yZS1mZWF0dXJlcy1kb3VibGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYmdpcy1jb3JlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImJnaXMtY29yZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0V2ZW50XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU3RyaXBwZWQgZG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1pbnRlcmZhY2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHByb3ZpZGVzIGB0eXBlYCBhbmQgYHRhcmdldGAgcHJvcGVydGllcywgYW5kXG4gKiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBtZXRob2RzLiBJdCBpcyBtZWFudCBhcyBiYXNlIGNsYXNzXG4gKiBmb3IgaGlnaGVyIGxldmVsIGV2ZW50cyBkZWZpbmVkIGluIHRoZSBsaWJyYXJ5LCBhbmQgd29ya3Mgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvVGFyZ2V0flRhcmdldH0uXG4gKi9cbnZhciBCYXNlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlRXZlbnQodHlwZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0UHJldmVudGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV2ZW50IHR5cGUuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXZlbnQgdGFyZ2V0LlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgZGVmYXVsdC4gVGhpcyBtZWFucyB0aGF0IG5vIGVtdWxhdGVkIGBjbGlja2AsIGBzaW5nbGVjbGlja2Agb3IgYGRvdWJsZWNsaWNrYCBldmVudHNcbiAgICAgKiB3aWxsIGJlIGZpcmVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlRXZlbnQ7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge0V2ZW50fGltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdH0gZXZ0IEV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24oZXZ0KSB7XG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V2ZW50fGltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdH0gZXZ0IEV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbn1cbmV4cG9ydCBkZWZhdWx0IEJhc2VFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9PYmplY3RFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwcm9wZXJ0eSBpcyBjaGFuZ2VkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvT2JqZWN0Lk9iamVjdEV2ZW50I3Byb3BlcnR5Y2hhbmdlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBST1BFUlRZQ0hBTkdFOiAncHJvcGVydHljaGFuZ2UnLFxufTtcbi8qKlxuICogQHR5cGVkZWYgeydwcm9wZXJ0eWNoYW5nZSd9IFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdEV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvRGlzcG9zYWJsZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIE9iamVjdHMgdGhhdCBuZWVkIHRvIGNsZWFuIHVwIGFmdGVyIHRoZW1zZWx2ZXMuXG4gKi9cbnZhciBEaXNwb3NhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERpc3Bvc2FibGUoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb2JqZWN0IGhhcyBhbHJlYWR5IGJlZW4gZGlzcG9zZWQuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VJbnRlcm5hbCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeHRlbnNpb24gcG9pbnQgZm9yIGRpc3Bvc2FibGUgb2JqZWN0cy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIHJldHVybiBEaXNwb3NhYmxlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IERpc3Bvc2FibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaXNwb3NhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9hcnJheVxuICovXG4vKipcbiAqIFBlcmZvcm1zIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgcHJvdmlkZWQgc29ydGVkIGxpc3QgYW5kIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBpdGVtIGlmIGZvdW5kLiBJZiBpdCBjYW4ndCBiZSBmb3VuZCBpdCdsbCByZXR1cm4gLTEuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9iaW5hcnktc2VhcmNoXG4gKlxuICogQHBhcmFtIHtBcnJheTwqPn0gaGF5c3RhY2sgSXRlbXMgdG8gc2VhcmNoIHRocm91Z2guXG4gKiBAcGFyYW0geyp9IG5lZWRsZSBUaGUgaXRlbSB0byBsb29rIGZvci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRfY29tcGFyYXRvcl0gQ29tcGFyYXRvciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBpdGVtIGlmIGZvdW5kLCAtMSBpZiBub3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5hcnlTZWFyY2goaGF5c3RhY2ssIG5lZWRsZSwgb3B0X2NvbXBhcmF0b3IpIHtcbiAgICB2YXIgbWlkLCBjbXA7XG4gICAgdmFyIGNvbXBhcmF0b3IgPSBvcHRfY29tcGFyYXRvciB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICAgIHZhciBsb3cgPSAwO1xuICAgIHZhciBoaWdoID0gaGF5c3RhY2subGVuZ3RoO1xuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIC8qIE5vdGUgdGhhdCBcIihsb3cgKyBoaWdoKSA+Pj4gMVwiIG1heSBvdmVyZmxvdywgYW5kIHJlc3VsdHMgaW4gYSB0eXBlY2FzdFxuICAgICAgICAgKiB0byBkb3VibGUgKHdoaWNoIGdpdmVzIHRoZSB3cm9uZyByZXN1bHRzKS4gKi9cbiAgICAgICAgbWlkID0gbG93ICsgKChoaWdoIC0gbG93KSA+PiAxKTtcbiAgICAgICAgY21wID0gK2NvbXBhcmF0b3IoaGF5c3RhY2tbbWlkXSwgbmVlZGxlKTtcbiAgICAgICAgaWYgKGNtcCA8IDAuMCkge1xuICAgICAgICAgICAgLyogVG9vIGxvdy4gKi9cbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvKiBLZXkgZm91bmQgb3IgdG9vIGhpZ2ggKi9cbiAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgICAgICBmb3VuZCA9ICFjbXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogS2V5IG5vdCBmb3VuZC4gKi9cbiAgICByZXR1cm4gZm91bmQgPyBsb3cgOiB+bG93O1xufVxuLyoqXG4gKiBDb21wYXJlIGZ1bmN0aW9uIGZvciBhcnJheSBzb3J0IHRoYXQgaXMgc2FmZSBmb3IgbnVtYmVycy5cbiAqIEBwYXJhbSB7Kn0gYSBUaGUgZmlyc3Qgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHBhcmFtIHsqfSBiIFRoZSBzZWNvbmQgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHJldHVybiB7bnVtYmVyfSBBIG5lZ2F0aXZlIG51bWJlciwgemVybywgb3IgYSBwb3NpdGl2ZSBudW1iZXIgYXMgdGhlIGZpcnN0XG4gKiAgICAgYXJndW1lbnQgaXMgbGVzcyB0aGFuLCBlcXVhbCB0bywgb3IgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG59XG4vKipcbiAqIFdoZXRoZXIgdGhlIGFycmF5IGNvbnRhaW5zIHRoZSBnaXZlbiBvYmplY3QuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7Kn0gb2JqIFRoZSBvYmplY3QgZm9yIHdoaWNoIHRvIHRlc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGlzIGluIHRoZSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluY2x1ZGVzKGFyciwgb2JqKSB7XG4gICAgcmV0dXJuIGFyci5pbmRleE9mKG9iaikgPj0gMDtcbn1cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC90aWxlZ3JpZC9UaWxlR3JpZH5UaWxlR3JpZCNnZXRaRm9yUmVzb2x1dGlvbn0gY2FuIHVzZSBhIGZ1bmN0aW9uXG4gKiBvZiB0aGlzIHR5cGUgdG8gZGV0ZXJtaW5lIHdoaWNoIG5lYXJlc3QgcmVzb2x1dGlvbiB0byB1c2UuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIGEgdmFsdWUgYmV0d2VlbiB0d28gYXJyYXkgZW50cmllcyxcbiAqIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoZSBuZWFyZXN0IGhpZ2hlciBlbnRyeSBhbmRcbiAqIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoZSBuZWFyZXN0IGxvd2VyIGVudHJ5XG4gKiBhcyBhcmd1bWVudHMgYW5kIHJldHVybnMgYSBge251bWJlcn1gLiBJZiBhIG5lZ2F0aXZlIG51bWJlciBvciB6ZXJvIGlzIHJldHVybmVkXG4gKiB0aGUgbG93ZXIgdmFsdWUgd2lsbCBiZSB1c2VkLCBpZiBhIHBvc2l0aXZlIG51bWJlciBpcyByZXR1cm5lZCB0aGUgaGlnaGVyIHZhbHVlXG4gKiB3aWxsIGJlIHVzZWQuXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24obnVtYmVyLCBudW1iZXIsIG51bWJlcik6IG51bWJlcn0gTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhcnIgQXJyYXkgaW4gZGVzY2VuZGluZyBvcmRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXQgVGFyZ2V0LlxuICogQHBhcmFtIHtudW1iZXJ8TmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBkaXJlY3Rpb25cbiAqICAgIDAgbWVhbnMgcmV0dXJuIHRoZSBuZWFyZXN0LFxuICogICAgPiAwIG1lYW5zIHJldHVybiB0aGUgbGFyZ2VzdCBuZWFyZXN0LFxuICogICAgPCAwIG1lYW5zIHJldHVybiB0aGUgc21hbGxlc3QgbmVhcmVzdC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJGaW5kTmVhcmVzdChhcnIsIHRhcmdldCwgZGlyZWN0aW9uKSB7XG4gICAgdmFyIG4gPSBhcnIubGVuZ3RoO1xuICAgIGlmIChhcnJbMF0gPD0gdGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YXJnZXQgPD0gYXJyW24gLSAxXSkge1xuICAgICAgICByZXR1cm4gbiAtIDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgaSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA+IDApIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpIC0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uIDwgMCkge1xuICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPD0gdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJyW2ldIDwgdGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGlyZWN0aW9uID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uKHRhcmdldCwgYXJyW2kgLSAxXSwgYXJyW2ldKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcnJbaSAtIDFdIC0gdGFyZ2V0IDwgdGFyZ2V0IC0gYXJyW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbiAtIDE7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgQXJyYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVnaW4gQmVnaW4gaW5kZXguXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZCBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2VTdWJBcnJheShhcnIsIGJlZ2luLCBlbmQpIHtcbiAgICB3aGlsZSAoYmVnaW4gPCBlbmQpIHtcbiAgICAgICAgdmFyIHRtcCA9IGFycltiZWdpbl07XG4gICAgICAgIGFycltiZWdpbl0gPSBhcnJbZW5kXTtcbiAgICAgICAgYXJyW2VuZF0gPSB0bXA7XG4gICAgICAgICsrYmVnaW47XG4gICAgICAgIC0tZW5kO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHshQXJyYXk8VkFMVUU+fFZBTFVFfSBkYXRhIFRoZSBlbGVtZW50cyBvciBhcnJheXMgb2YgZWxlbWVudHMgdG8gYWRkIHRvIGFyci5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGFyciwgZGF0YSkge1xuICAgIHZhciBleHRlbnNpb24gPSBBcnJheS5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXTtcbiAgICB2YXIgbGVuZ3RoID0gZXh0ZW5zaW9uLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyclthcnIubGVuZ3RoXSA9IGV4dGVuc2lvbltpXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7VkFMVUV9IG9iaiBUaGUgZWxlbWVudCB0byByZW1vdmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBlbGVtZW50IHdhcyByZW1vdmVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKGFyciwgb2JqKSB7XG4gICAgdmFyIGkgPSBhcnIuaW5kZXhPZihvYmopO1xuICAgIHZhciBmb3VuZCA9IGkgPiAtMTtcbiAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgYXJyLnNwbGljZShpLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvdW5kO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFZBTFVFLCBudW1iZXIsID8pIDogYm9vbGVhbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY29tcGFyZS5cbiAqIEB0ZW1wbGF0ZSBWQUxVRVxuICogQHJldHVybiB7VkFMVUV8bnVsbH0gVGhlIGVsZW1lbnQgZm91bmQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmQoYXJyLCBmdW5jKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGggPj4+IDA7XG4gICAgdmFyIHZhbHVlO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBhcnJbaV07XG4gICAgICAgIGlmIChmdW5jKHZhbHVlLCBpLCBhcnIpKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXl8VWludDhDbGFtcGVkQXJyYXl9IGFycjEgVGhlIGZpcnN0IGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIyIFRoZSBzZWNvbmQgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHR3byBhcnJheXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGFycjEsIGFycjIpIHtcbiAgICB2YXIgbGVuMSA9IGFycjEubGVuZ3RoO1xuICAgIGlmIChsZW4xICE9PSBhcnIyLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuMTsgaSsrKSB7XG4gICAgICAgIGlmIChhcnIxW2ldICE9PSBhcnIyW2ldKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFNvcnQgdGhlIHBhc3NlZCBhcnJheSBzdWNoIHRoYXQgdGhlIHJlbGF0aXZlIG9yZGVyIG9mIGVxdWFsIGVsZW1lbnRzIGlzIHByZXNlcnZlZC5cbiAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Tb3J0aW5nX2FsZ29yaXRobSNTdGFiaWxpdHkgZm9yIGRldGFpbHMuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHNvcnQgKG1vZGlmaWVzIG9yaWdpbmFsKS5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCosICopOiBudW1iZXJ9IGNvbXBhcmVGbmMgQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0YWJsZVNvcnQoYXJyLCBjb21wYXJlRm5jKSB7XG4gICAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGg7XG4gICAgdmFyIHRtcCA9IEFycmF5KGFyci5sZW5ndGgpO1xuICAgIHZhciBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0bXBbaV0gPSB7IGluZGV4OiBpLCB2YWx1ZTogYXJyW2ldIH07XG4gICAgfVxuICAgIHRtcC5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBjb21wYXJlRm5jKGEudmFsdWUsIGIudmFsdWUpIHx8IGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gdG1wW2ldLnZhbHVlO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRJbmRleChhcnIsIGZ1bmMpIHtcbiAgICB2YXIgaW5kZXg7XG4gICAgdmFyIGZvdW5kID0gIWFyci5ldmVyeShmdW5jdGlvbiAoZWwsIGlkeCkge1xuICAgICAgICBpbmRleCA9IGlkeDtcbiAgICAgICAgcmV0dXJuICFmdW5jKGVsLCBpZHgsIGFycik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvdW5kID8gaW5kZXggOiAtMTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byB0ZXN0LlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdF9mdW5jXSBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3N0cmljdF0gU3RyaWN0bHkgc29ydGVkIChkZWZhdWx0IGZhbHNlKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybiBpbmRleC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU29ydGVkKGFyciwgb3B0X2Z1bmMsIG9wdF9zdHJpY3QpIHtcbiAgICB2YXIgY29tcGFyZSA9IG9wdF9mdW5jIHx8IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb247XG4gICAgcmV0dXJuIGFyci5ldmVyeShmdW5jdGlvbiAoY3VycmVudFZhbCwgaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcmVzID0gY29tcGFyZShhcnJbaW5kZXggLSAxXSwgY3VycmVudFZhbCk7XG4gICAgICAgIHJldHVybiAhKHJlcyA+IDAgfHwgKG9wdF9zdHJpY3QgJiYgcmVzID09PSAwKSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcnJheS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZnVuY3Rpb25zXG4gKi9cbmltcG9ydCB7IGVxdWFscyBhcyBhcnJheUVxdWFscyB9IGZyb20gJy4vYXJyYXkuanMnO1xuLyoqXG4gKiBBbHdheXMgcmV0dXJucyB0cnVlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFRSVUUoKSB7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEFsd2F5cyByZXR1cm5zIGZhbHNlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gZmFsc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBGQUxTRSgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEEgcmV1c2FibGUgZnVuY3Rpb24sIHVzZWQgZS5nLiBhcyBhIGRlZmF1bHQgZm9yIGNhbGxiYWNrcy5cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfSBOb3RoaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gVk9JRCgpIHsgfVxuLyoqXG4gKiBXcmFwIGEgZnVuY3Rpb24gaW4gYW5vdGhlciBmdW5jdGlvbiB0aGF0IHJlbWVtYmVycyB0aGUgbGFzdCByZXR1cm4uICBJZiB0aGVcbiAqIHJldHVybmVkIGZ1bmN0aW9uIGlzIGNhbGxlZCB0d2ljZSBpbiBhIHJvdyB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyBhbmQgdGhlIHNhbWVcbiAqIHRoaXMgb2JqZWN0LCBpdCB3aWxsIHJldHVybiB0aGUgdmFsdWUgZnJvbSB0aGUgZmlyc3QgY2FsbCBpbiB0aGUgc2Vjb25kIGNhbGwuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbiguLi5hbnkpOiBSZXR1cm5UeXBlfSBmbiBUaGUgZnVuY3Rpb24gdG8gbWVtb2l6ZS5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKC4uLmFueSk6IFJldHVyblR5cGV9IFRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAqIEB0ZW1wbGF0ZSBSZXR1cm5UeXBlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZW1vaXplT25lKGZuKSB7XG4gICAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICAgIC8qKiBAdHlwZSB7UmV0dXJuVHlwZX0gKi9cbiAgICB2YXIgbGFzdFJlc3VsdDtcbiAgICAvKiogQHR5cGUge0FycmF5PGFueT59ICovXG4gICAgdmFyIGxhc3RBcmdzO1xuICAgIHZhciBsYXN0VGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbmV4dEFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICBpZiAoIWNhbGxlZCB8fCB0aGlzICE9PSBsYXN0VGhpcyB8fCAhYXJyYXlFcXVhbHMobmV4dEFyZ3MsIGxhc3RBcmdzKSkge1xuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGxhc3RUaGlzID0gdGhpcztcbiAgICAgICAgICAgIGxhc3RBcmdzID0gbmV4dEFyZ3M7XG4gICAgICAgICAgICBsYXN0UmVzdWx0ID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgICB9O1xufVxuLyoqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtmdW5jdGlvbigpOiAoVCB8IFByb21pc2U8VD4pfSBnZXR0ZXIgQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSB2YWx1ZSBvciBhIHByb21pc2UgZm9yIGEgdmFsdWUuXG4gKiBAcmV0dXJuIHtQcm9taXNlPFQ+fSBBIHByb21pc2UgZm9yIHRoZSB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUHJvbWlzZShnZXR0ZXIpIHtcbiAgICBmdW5jdGlvbiBwcm9taXNlR2V0dGVyKCkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YWx1ZSA9IGdldHRlcigpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2VHZXR0ZXIoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bmN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvb2JqXG4gKi9cbi8qKlxuICogUG9seWZpbGwgZm9yIE9iamVjdC5hc3NpZ24oKS4gIEFzc2lnbnMgZW51bWVyYWJsZSBhbmQgb3duIHByb3BlcnRpZXMgZnJvbVxuICogb25lIG9yIG1vcmUgc291cmNlIG9iamVjdHMgdG8gYSB0YXJnZXQgb2JqZWN0LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24uXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX3NvdXJjZXMgVGhlIHNvdXJjZSBvYmplY3QocykuXG4gKiBAcmV0dXJuIHshT2JqZWN0fSBUaGUgbW9kaWZpZWQgdGFyZ2V0IG9iamVjdC5cbiAqL1xuZXhwb3J0IHZhciBhc3NpZ24gPSB0eXBlb2YgT2JqZWN0LmFzc2lnbiA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gT2JqZWN0LmFzc2lnblxuICAgIDogZnVuY3Rpb24gKHRhcmdldCwgdmFyX3NvdXJjZXMpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG4vKipcbiAqIFJlbW92ZXMgYWxsIHByb3BlcnRpZXMgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2xlYXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcihvYmplY3QpIHtcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XG4gICAgfVxufVxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgT2JqZWN0LnZhbHVlcygpLiAgR2V0IGFuIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcyBmcm9tIGFuIG9iamVjdC5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvdmFsdWVzXG4gKlxuICogQHBhcmFtIHshT2JqZWN0PEssVj59IG9iamVjdCBUaGUgb2JqZWN0IGZyb20gd2hpY2ggdG8gZ2V0IHRoZSB2YWx1ZXMuXG4gKiBAcmV0dXJuIHshQXJyYXk8Vj59IFRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiBAdGVtcGxhdGUgSyxWXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VmFsdWVzID0gdHlwZW9mIE9iamVjdC52YWx1ZXMgPT09ICdmdW5jdGlvbidcbiAgICA/IE9iamVjdC52YWx1ZXNcbiAgICA6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKG9iamVjdFtwcm9wZXJ0eV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfTtcbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBoYXMgYW55IHByb3BlcnRpZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGlzIGVtcHR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShvYmplY3QpIHtcbiAgICB2YXIgcHJvcGVydHk7XG4gICAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gIXByb3BlcnR5O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL1RhcmdldFxuICovXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL0V2ZW50LmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7RXZlbnRUYXJnZXR8VGFyZ2V0fSBFdmVudFRhcmdldExpa2VcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFczQyBET00gTGV2ZWwgMiBFdmVudFRhcmdldCBpbnRlcmZhY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDAvUkVDLURPTS1MZXZlbC0yLUV2ZW50cy0yMDAwMTExMy9ldmVudHMuaHRtbCNFdmVudHMtRXZlbnRUYXJnZXQuXG4gKlxuICogVGhlcmUgYXJlIHR3byBpbXBvcnRhbnQgc2ltcGxpZmljYXRpb25zIGNvbXBhcmVkIHRvIHRoZSBzcGVjaWZpY2F0aW9uOlxuICpcbiAqIDEuIFRoZSBoYW5kbGluZyBvZiBgdXNlQ2FwdHVyZWAgaW4gYGFkZEV2ZW50TGlzdGVuZXJgIGFuZFxuICogICAgYHJlbW92ZUV2ZW50TGlzdGVuZXJgLiBUaGVyZSBpcyBubyByZWFsIGNhcHR1cmUgbW9kZWwuXG4gKiAyLiBUaGUgaGFuZGxpbmcgb2YgYHN0b3BQcm9wYWdhdGlvbmAgYW5kIGBwcmV2ZW50RGVmYXVsdGAgb24gYGRpc3BhdGNoRXZlbnRgLlxuICogICAgVGhlcmUgaXMgbm8gZXZlbnQgdGFyZ2V0IGhpZXJhcmNoeS4gV2hlbiBhIGxpc3RlbmVyIGNhbGxzXG4gKiAgICBgc3RvcFByb3BhZ2F0aW9uYCBvciBgcHJldmVudERlZmF1bHRgIG9uIGFuIGV2ZW50IG9iamVjdCwgaXQgbWVhbnMgdGhhdCBub1xuICogICAgbW9yZSBsaXN0ZW5lcnMgYWZ0ZXIgdGhpcyBvbmUgd2lsbCBiZSBjYWxsZWQuIFNhbWUgYXMgd2hlbiB0aGUgbGlzdGVuZXJcbiAqICAgIHJldHVybnMgZmFsc2UuXG4gKi9cbnZhciBUYXJnZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRhcmdldCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRfdGFyZ2V0XSBEZWZhdWx0IGV2ZW50IHRhcmdldCBmb3IgZGlzcGF0Y2hlZCBldmVudHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGFyZ2V0KG9wdF90YXJnZXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXZlbnRUYXJnZXRfID0gb3B0X3RhcmdldDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGVuZGluZ1JlbW92YWxzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRpc3BhdGNoaW5nXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyPj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcnNfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKCF0eXBlIHx8ICFsaXN0ZW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gfHwgKHRoaXMubGlzdGVuZXJzXyA9IHt9KTtcbiAgICAgICAgdmFyIGxpc3RlbmVyc0ZvclR5cGUgPSBsaXN0ZW5lcnNbdHlwZV0gfHwgKGxpc3RlbmVyc1t0eXBlXSA9IFtdKTtcbiAgICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGUuaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGFuZCBjYWxscyBhbGwgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgZXZlbnRzXG4gICAgICogb2YgdGhpcyB0eXBlLiBUaGUgZXZlbnQgcGFyYW1ldGVyIGNhbiBlaXRoZXIgYmUgYSBzdHJpbmcgb3IgYW5cbiAgICAgKiBPYmplY3Qgd2l0aCBhIGB0eXBlYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fHN0cmluZ30gZXZlbnQgRXZlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBgZmFsc2VgIGlmIGFueW9uZSBjYWxsZWQgcHJldmVudERlZmF1bHQgb24gdGhlXG4gICAgICogICAgIGV2ZW50IG9iamVjdCBvciBpZiBhbnkgb2YgdGhlIGxpc3RlbmVycyByZXR1cm5lZCBmYWxzZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fEV2ZW50fSAqL1xuICAgICAgICB2YXIgZXZ0ID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJyA/IG5ldyBFdmVudChldmVudCkgOiBldmVudDtcbiAgICAgICAgdmFyIHR5cGUgPSBldnQudHlwZTtcbiAgICAgICAgaWYgKCFldnQudGFyZ2V0KSB7XG4gICAgICAgICAgICBldnQudGFyZ2V0ID0gdGhpcy5ldmVudFRhcmdldF8gfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgdmFyIHByb3BhZ2F0ZTtcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgICAgdmFyIGRpc3BhdGNoaW5nID0gdGhpcy5kaXNwYXRjaGluZ18gfHwgKHRoaXMuZGlzcGF0Y2hpbmdfID0ge30pO1xuICAgICAgICAgICAgdmFyIHBlbmRpbmdSZW1vdmFscyA9IHRoaXMucGVuZGluZ1JlbW92YWxzXyB8fCAodGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0ge30pO1xuICAgICAgICAgICAgaWYgKCEodHlwZSBpbiBkaXNwYXRjaGluZykpIHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaGluZ1t0eXBlXSA9IDA7XG4gICAgICAgICAgICAgICAgcGVuZGluZ1JlbW92YWxzW3R5cGVdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsrZGlzcGF0Y2hpbmdbdHlwZV07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICgnaGFuZGxlRXZlbnQnIGluIGxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lck9iamVjdH0gKi8gKGxpc3RlbmVyc1tpXSkuaGFuZGxlRXZlbnQoZXZ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyRnVuY3Rpb259ICovIChsaXN0ZW5lcnNbaV0pLmNhbGwodGhpcywgZXZ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByb3BhZ2F0ZSA9PT0gZmFsc2UgfHwgZXZ0LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLS1kaXNwYXRjaGluZ1t0eXBlXTtcbiAgICAgICAgICAgIGlmIChkaXNwYXRjaGluZ1t0eXBlXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBwciA9IHBlbmRpbmdSZW1vdmFsc1t0eXBlXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcGVuZGluZ1JlbW92YWxzW3R5cGVdO1xuICAgICAgICAgICAgICAgIHdoaWxlIChwci0tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBWT0lEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIGRpc3BhdGNoaW5nW3R5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb3BhZ2F0ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzXyAmJiBjbGVhcih0aGlzLmxpc3RlbmVyc18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0ZW5lcnMgZm9yIGEgc3BlY2lmaWVkIGV2ZW50IHR5cGUuIExpc3RlbmVycyBhcmUgcmV0dXJuZWQgaW4gdGhlXG4gICAgICogb3JkZXIgdGhhdCB0aGV5IHdpbGwgYmUgY2FsbGVkIGluLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXI+fHVuZGVmaW5lZH0gTGlzdGVuZXJzLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuZ2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdKSB8fCB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdF90eXBlXSBUeXBlLiBJZiBub3QgcHJvdmlkZWQsXG4gICAgICogICAgIGB0cnVlYCB3aWxsIGJlIHJldHVybmVkIGlmIHRoaXMgZXZlbnQgdGFyZ2V0IGhhcyBhbnkgbGlzdGVuZXJzLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyBsaXN0ZW5lcnMuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5oYXNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvcHRfdHlwZSkge1xuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRfdHlwZVxuICAgICAgICAgICAgPyBvcHRfdHlwZSBpbiB0aGlzLmxpc3RlbmVyc19cbiAgICAgICAgICAgIDogT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnNfKS5sZW5ndGggPiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZ1JlbW92YWxzXyAmJiB0eXBlIGluIHRoaXMucGVuZGluZ1JlbW92YWxzXykge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGxpc3RlbmVyIGEgbm8tb3AsIGFuZCByZW1vdmUgbGF0ZXIgaW4gI2Rpc3BhdGNoRXZlbnQoKVxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaW5kZXhdID0gVk9JRDtcbiAgICAgICAgICAgICAgICAgICAgKyt0aGlzLnBlbmRpbmdSZW1vdmFsc19bdHlwZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUYXJnZXQ7XG59KERpc3Bvc2FibGUpKTtcbmV4cG9ydCBkZWZhdWx0IFRhcmdldDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRhcmdldC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0V2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAY29uc3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIEdlbmVyaWMgY2hhbmdlIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiB0aGUgcmV2aXNpb24gY291bnRlciBpcyBpbmNyZWFzZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2NoYW5nZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDSEFOR0U6ICdjaGFuZ2UnLFxuICAgIC8qKlxuICAgICAqIEdlbmVyaWMgZXJyb3IgZXZlbnQuIFRyaWdnZXJlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjZXJyb3JcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRVJST1I6ICdlcnJvcicsXG4gICAgQkxVUjogJ2JsdXInLFxuICAgIENMRUFSOiAnY2xlYXInLFxuICAgIENPTlRFWFRNRU5VOiAnY29udGV4dG1lbnUnLFxuICAgIENMSUNLOiAnY2xpY2snLFxuICAgIERCTENMSUNLOiAnZGJsY2xpY2snLFxuICAgIERSQUdFTlRFUjogJ2RyYWdlbnRlcicsXG4gICAgRFJBR09WRVI6ICdkcmFnb3ZlcicsXG4gICAgRFJPUDogJ2Ryb3AnLFxuICAgIEZPQ1VTOiAnZm9jdXMnLFxuICAgIEtFWURPV046ICdrZXlkb3duJyxcbiAgICBLRVlQUkVTUzogJ2tleXByZXNzJyxcbiAgICBMT0FEOiAnbG9hZCcsXG4gICAgUkVTSVpFOiAncmVzaXplJyxcbiAgICBUT1VDSE1PVkU6ICd0b3VjaG1vdmUnLFxuICAgIFdIRUVMOiAnd2hlZWwnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzXG4gKi9cbmltcG9ydCB7IGNsZWFyIH0gZnJvbSAnLi9vYmouanMnO1xuLyoqXG4gKiBLZXkgdG8gdXNlIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfk9ic2VydmFibGUjdW5CeUtleX0uXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFdmVudHNLZXlcbiAqIEBwcm9wZXJ0eSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBUYXJnZXQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUeXBlLlxuICogQGFwaVxuICovXG4vKipcbiAqIExpc3RlbmVyIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFuIGV2ZW50IG9iamVjdCBhcyBhcmd1bWVudC5cbiAqIFdoZW4gdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCwgZXZlbnQgcHJvcGFnYXRpb24gd2lsbCBzdG9wLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCkpOiAodm9pZHxib29sZWFuKX0gTGlzdGVuZXJGdW5jdGlvblxuICogQGFwaVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExpc3RlbmVyT2JqZWN0XG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IGhhbmRsZUV2ZW50IEhhbmRsZUV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtMaXN0ZW5lckZ1bmN0aW9ufExpc3RlbmVyT2JqZWN0fSBMaXN0ZW5lclxuICovXG4vKipcbiAqIFJlZ2lzdGVycyBhbiBldmVudCBsaXN0ZW5lciBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGVmZmljaWVudGx5IGJpbmRzIGEgYGxpc3RlbmVyYCB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zXG4gKiBhIGtleSBmb3IgdXNlIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMudW5saXN0ZW5CeUtleX0uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdF90aGlzXSBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X29uY2VdIElmIHRydWUsIGFkZCB0aGUgbGlzdGVuZXIgYXMgb25lLW9mZiBsaXN0ZW5lci5cbiAqIEByZXR1cm4ge0V2ZW50c0tleX0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCBvcHRfb25jZSkge1xuICAgIGlmIChvcHRfdGhpcyAmJiBvcHRfdGhpcyAhPT0gdGFyZ2V0KSB7XG4gICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXIuYmluZChvcHRfdGhpcyk7XG4gICAgfVxuICAgIGlmIChvcHRfb25jZSkge1xuICAgICAgICB2YXIgb3JpZ2luYWxMaXN0ZW5lcl8xID0gbGlzdGVuZXI7XG4gICAgICAgIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lcl8xLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciBldmVudHNLZXkgPSB7XG4gICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgfTtcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGV2ZW50c0tleTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGEgb25lLW9mZiBldmVudCBsaXN0ZW5lciBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGVmZmljaWVudGx5IGJpbmRzIGEgYGxpc3RlbmVyYCBhcyBzZWxmLXVucmVnaXN0ZXJpbmcgbGlzdGVuZXJcbiAqIHRvIGEgYHRoaXNgIG9iamVjdCwgYW5kIHJldHVybnMgYSBrZXkgZm9yIHVzZSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy51bmxpc3RlbkJ5S2V5fSBpbiBjYXNlIHRoZSBsaXN0ZW5lciBuZWVkcyB0byBiZVxuICogdW5yZWdpc3RlcmVkIGJlZm9yZSBpdCBpcyBjYWxsZWQuXG4gKlxuICogV2hlbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy5saXN0ZW59IGlzIGNhbGxlZCB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyBhZnRlciB0aGlzXG4gKiBmdW5jdGlvbiwgdGhlIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lciB3aWxsIGJlIHR1cm5lZCBpbnRvIGEgcGVybWFuZW50XG4gKiBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBFdmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICogQHBhcmFtIHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0X3RoaXNdIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IEtleSBmb3IgdW5saXN0ZW5CeUtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2UodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMpIHtcbiAgICByZXR1cm4gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCB0cnVlKTtcbn1cbi8qKlxuICogVW5yZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoZSBhcmd1bWVudCBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBpcyB0aGUga2V5IHJldHVybmVkIGZyb21cbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLmxpc3Rlbn0gb3Ige0BsaW5rIG1vZHVsZTpvbC9ldmVudHMubGlzdGVuT25jZX0uXG4gKlxuICogQHBhcmFtIHtFdmVudHNLZXl9IGtleSBUaGUga2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5CeUtleShrZXkpIHtcbiAgICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICAgICAga2V5LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGtleS50eXBlLCBrZXkubGlzdGVuZXIpO1xuICAgICAgICBjbGVhcihrZXkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL09ic2VydmFibGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIGxpc3Rlbk9uY2UsIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIHtFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBFdmVudENsYXNzXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7KHR5cGU6IFR5cGUsIGxpc3RlbmVyOiAoZXZlbnQ6IEV2ZW50Q2xhc3MpID0+ID8pID0+IFJldHVybn0gT25TaWduYXR1cmVcbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIHtzdHJpbmd9IFR5cGVcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHsodHlwZTogVHlwZVtdLCBsaXN0ZW5lcjogKGV2ZW50OiBFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSA9PiA/KSA9PiBSZXR1cm4gZXh0ZW5kcyB2b2lkID8gdm9pZCA6IFJldHVybltdfSBDb21iaW5lZE9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYgeydjaGFuZ2UnfCdlcnJvcid9IEV2ZW50VHlwZXNcbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge09uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJiBDb21iaW5lZE9uU2lnbmF0dXJlPEV2ZW50VHlwZXMsIFJldHVybj59IE9ic2VydmFibGVPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEFuIGV2ZW50IHRhcmdldCBwcm92aWRpbmcgY29udmVuaWVudCBtZXRob2RzIGZvciBsaXN0ZW5lciByZWdpc3RyYXRpb25cbiAqIGFuZCB1bnJlZ2lzdHJhdGlvbi4gQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIGFsd2F5cyBhdmFpbGFibGUgdGhyb3VnaFxuICoge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfk9ic2VydmFibGUjY2hhbmdlZH0uXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHRcbiAqIEBhcGlcbiAqL1xudmFyIE9ic2VydmFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub24gPVxuICAgICAgICAgICAgLyoqIEB0eXBlIHtPYnNlcnZhYmxlT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn0gKi8gKF90aGlzLm9uSW50ZXJuYWwpO1xuICAgICAgICBfdGhpcy5vbmNlID1cbiAgICAgICAgICAgIC8qKiBAdHlwZSB7T2JzZXJ2YWJsZU9uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59ICovIChfdGhpcy5vbmNlSW50ZXJuYWwpO1xuICAgICAgICBfdGhpcy51biA9IC8qKiBAdHlwZSB7T2JzZXJ2YWJsZU9uU2lnbmF0dXJlPHZvaWQ+fSAqLyAoX3RoaXMudW5JbnRlcm5hbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmV2aXNpb25fID0gMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZWFzZXMgdGhlIHJldmlzaW9uIGNvdW50ZXIgYW5kIGRpc3BhdGNoZXMgYSAnY2hhbmdlJyBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuY2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKyt0aGlzLnJldmlzaW9uXztcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEV2ZW50VHlwZS5DSEFOR0UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2ZXJzaW9uIG51bWJlciBmb3IgdGhpcyBvYmplY3QuICBFYWNoIHRpbWUgdGhlIG9iamVjdCBpcyBtb2RpZmllZCxcbiAgICAgKiBpdHMgdmVyc2lvbiBudW1iZXIgd2lsbCBiZSBpbmNyZW1lbnRlZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJldmlzaW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5nZXRSZXZpc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV2aXNpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IEV2ZW50IGtleS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25JbnRlcm5hbCA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBrZXlzW2ldID0gbGlzdGVuKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3Rlbih0aGlzLCAvKiogQHR5cGUge3N0cmluZ30gKi8gKHR5cGUpLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBFdmVudCBrZXkuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLm9uY2VJbnRlcm5hbCA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgICAgICAga2V5ID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICAgICAga2V5W2ldID0gbGlzdGVuT25jZSh0aGlzLCB0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBrZXkgPSBsaXN0ZW5PbmNlKHRoaXMsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodHlwZSksIGxpc3RlbmVyKTtcbiAgICAgICAgfVxuICAgICAgICAvKiogQHR5cGUge09iamVjdH0gKi8gKGxpc3RlbmVyKS5vbF9rZXkgPSBrZXk7XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnVuSW50ZXJuYWwgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGtleSA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyAobGlzdGVuZXIpLm9sX2tleTtcbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgdW5CeUtleShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHR5cGUubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlW2ldLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oRXZlbnRUYXJnZXQpKTtcbi8qKlxuICogTGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAqICAgICBjYWxsZWQgd2l0aCBhbiBhcnJheSBvZiBldmVudCB0eXBlcyBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSByZXR1cm5cbiAqICAgICB3aWxsIGJlIGFuIGFycmF5IG9mIGtleXMuXG4gKiBAYXBpXG4gKi9cbk9ic2VydmFibGUucHJvdG90eXBlLm9uO1xuLyoqXG4gKiBMaXN0ZW4gb25jZSBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBVbmlxdWUga2V5IGZvciB0aGUgbGlzdGVuZXIuIElmXG4gKiAgICAgY2FsbGVkIHdpdGggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYXMgdGhlIGZpcnN0IGFyZ3VtZW50LCB0aGUgcmV0dXJuXG4gKiAgICAgd2lsbCBiZSBhbiBhcnJheSBvZiBrZXlzLlxuICogQGFwaVxuICovXG5PYnNlcnZhYmxlLnByb3RvdHlwZS5vbmNlO1xuLyoqXG4gKiBVbmxpc3RlbiBmb3IgYSBjZXJ0YWluIHR5cGUgb2YgZXZlbnQuXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVGhlIGV2ZW50IHR5cGUgb3IgYXJyYXkgb2YgZXZlbnQgdHlwZXMuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKChFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudFwiKS5kZWZhdWx0KSk6ID99IGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUudW47XG4vKipcbiAqIFJlbW92ZXMgYW4gZXZlbnQgbGlzdGVuZXIgdXNpbmcgdGhlIGtleSByZXR1cm5lZCBieSBgb24oKWAgb3IgYG9uY2UoKWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleXxBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fSBrZXkgVGhlIGtleSByZXR1cm5lZCBieSBgb24oKWBcbiAqICAgICBvciBgb25jZSgpYCAob3IgYW4gYXJyYXkgb2Yga2V5cykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bkJ5S2V5KGtleSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0ga2V5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoa2V5W2ldKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdW5saXN0ZW5CeUtleSgvKiogQHR5cGUge2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX0gKi8gKGtleSkpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IE9ic2VydmFibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC91dGlsXG4gKi9cbi8qKlxuICogQHJldHVybiB7P30gQW55IHJldHVybi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFic3RyYWN0KCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgez99ICovICgoZnVuY3Rpb24gKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuaW1wbGVtZW50ZWQgYWJzdHJhY3QgbWV0aG9kLicpO1xuICAgIH0pKCkpO1xufVxuLyoqXG4gKiBDb3VudGVyIGZvciBnZXRVaWQuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQHByaXZhdGVcbiAqL1xudmFyIHVpZENvdW50ZXJfID0gMDtcbi8qKlxuICogR2V0cyBhIHVuaXF1ZSBJRCBmb3IgYW4gb2JqZWN0LiBUaGlzIG11dGF0ZXMgdGhlIG9iamVjdCBzbyB0aGF0IGZ1cnRoZXIgY2FsbHNcbiAqIHdpdGggdGhlIHNhbWUgb2JqZWN0IGFzIGEgcGFyYW1ldGVyIHJldHVybnMgdGhlIHNhbWUgdmFsdWUuIFVuaXF1ZSBJRHMgYXJlIGdlbmVyYXRlZFxuICogYXMgYSBzdHJpY3RseSBpbmNyZWFzaW5nIHNlcXVlbmNlLiBBZGFwdGVkIGZyb20gZ29vZy5nZXRVaWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGdldCB0aGUgdW5pcXVlIElEIGZvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHVuaXF1ZSBJRCBmb3IgdGhlIG9iamVjdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVpZChvYmopIHtcbiAgICByZXR1cm4gb2JqLm9sX3VpZCB8fCAob2JqLm9sX3VpZCA9IFN0cmluZygrK3VpZENvdW50ZXJfKSk7XG59XG4vKipcbiAqIE9wZW5MYXllcnMgdmVyc2lvbi5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgVkVSU0lPTiA9ICc2LjEyLjAnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL09iamVjdFxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuL09ic2VydmFibGUuanMnO1xuaW1wb3J0IHsgYXNzaWduLCBpc0VtcHR5IH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpcyB0eXBlLlxuICovXG52YXIgT2JqZWN0RXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9iamVjdEV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHByb3BlcnR5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBUaGUgb2xkIHZhbHVlIGZvciBga2V5YC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBPYmplY3RFdmVudCh0eXBlLCBrZXksIG9sZFZhbHVlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgY2hhbmdpbmcuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleSA9IGtleTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvbGQgdmFsdWUuIFRvIGdldCB0aGUgbmV3IHZhbHVlIHVzZSBgZS50YXJnZXQuZ2V0KGUua2V5KWAgd2hlcmVcbiAgICAgICAgICogYGVgIGlzIHRoZSBldmVudCBvYmplY3QuXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbGRWYWx1ZSA9IG9sZFZhbHVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3RFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IE9iamVjdEV2ZW50IH07XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlcywgT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXMsIFJldHVybj59IE9iamVjdE9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTW9zdCBub24tdHJpdmlhbCBjbGFzc2VzIGluaGVyaXQgZnJvbSB0aGlzLlxuICpcbiAqIFRoaXMgZXh0ZW5kcyB7QGxpbmsgbW9kdWxlOm9sL09ic2VydmFibGV9IHdpdGggb2JzZXJ2YWJsZVxuICogcHJvcGVydGllcywgd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBvYnNlcnZhYmxlIGFzIHdlbGwgYXMgdGhlIG9iamVjdCBhcyBhXG4gKiB3aG9sZS5cbiAqXG4gKiBDbGFzc2VzIHRoYXQgaW5oZXJpdCBmcm9tIHRoaXMgaGF2ZSBwcmUtZGVmaW5lZCBwcm9wZXJ0aWVzLCB0byB3aGljaCB5b3UgY2FuXG4gKiBhZGQgeW91ciBvd25zLiBUaGUgcHJlLWRlZmluZWQgcHJvcGVydGllcyBhcmUgbGlzdGVkIGluIHRoaXMgZG9jdW1lbnRhdGlvbiBhc1xuICogJ09ic2VydmFibGUgUHJvcGVydGllcycsIGFuZCBoYXZlIHRoZWlyIG93biBhY2Nlc3NvcnM7IGZvciBleGFtcGxlLFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfSBoYXMgYSBgdGFyZ2V0YCBwcm9wZXJ0eSwgYWNjZXNzZWQgd2l0aFxuICogYGdldFRhcmdldCgpYCBhbmQgY2hhbmdlZCB3aXRoIGBzZXRUYXJnZXQoKWAuIE5vdCBhbGwgcHJvcGVydGllcyBhcmUgaG93ZXZlclxuICogc2V0dGFibGUuIFRoZXJlIGFyZSBhbHNvIGdlbmVyYWwtcHVycG9zZSBhY2Nlc3NvcnMgYGdldCgpYCBhbmQgYHNldCgpYC4gRm9yXG4gKiBleGFtcGxlLCBgZ2V0KCd0YXJnZXQnKWAgaXMgZXF1aXZhbGVudCB0byBgZ2V0VGFyZ2V0KClgLlxuICpcbiAqIFRoZSBgc2V0YCBhY2Nlc3NvcnMgdHJpZ2dlciBhIGNoYW5nZSBldmVudCwgYW5kIHlvdSBjYW4gbW9uaXRvciB0aGlzIGJ5XG4gKiByZWdpc3RlcmluZyBhIGxpc3RlbmVyLiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9WaWV3flZpZXd9IGhhcyBhXG4gKiBgY2VudGVyYCBwcm9wZXJ0eSwgc28gYHZpZXcub24oJ2NoYW5nZTpjZW50ZXInLCBmdW5jdGlvbihldnQpIHsuLi59KTtgIHdvdWxkXG4gKiBjYWxsIHRoZSBmdW5jdGlvbiB3aGVuZXZlciB0aGUgdmFsdWUgb2YgdGhlIGNlbnRlciBwcm9wZXJ0eSBjaGFuZ2VzLiBXaXRoaW5cbiAqIHRoZSBmdW5jdGlvbiwgYGV2dC50YXJnZXRgIHdvdWxkIGJlIHRoZSB2aWV3LCBzbyBgZXZ0LnRhcmdldC5nZXRDZW50ZXIoKWBcbiAqIHdvdWxkIHJldHVybiB0aGUgbmV3IGNlbnRlci5cbiAqXG4gKiBZb3UgY2FuIGFkZCB5b3VyIG93biBvYnNlcnZhYmxlIHByb3BlcnRpZXMgd2l0aFxuICogYG9iamVjdC5zZXQoJ3Byb3AnLCAndmFsdWUnKWAsIGFuZCByZXRyaWV2ZSB0aGF0IHdpdGggYG9iamVjdC5nZXQoJ3Byb3AnKWAuXG4gKiBZb3UgY2FuIGxpc3RlbiBmb3IgY2hhbmdlcyBvbiB0aGF0IHByb3BlcnR5IHZhbHVlIHdpdGhcbiAqIGBvYmplY3Qub24oJ2NoYW5nZTpwcm9wJywgbGlzdGVuZXIpYC4gWW91IGNhbiBnZXQgYSBsaXN0IG9mIGFsbFxuICogcHJvcGVydGllcyB3aXRoIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3QjZ2V0UHJvcGVydGllc30uXG4gKlxuICogTm90ZSB0aGF0IHRoZSBvYnNlcnZhYmxlIHByb3BlcnRpZXMgYXJlIHNlcGFyYXRlIGZyb20gc3RhbmRhcmQgSlMgcHJvcGVydGllcy5cbiAqIFlvdSBjYW4sIGZvciBleGFtcGxlLCBnaXZlIHlvdXIgbWFwIG9iamVjdCBhIHRpdGxlIHdpdGhcbiAqIGBtYXAudGl0bGU9J05ldyB0aXRsZSdgIGFuZCB3aXRoIGBtYXAuc2V0KCd0aXRsZScsICdBbm90aGVyIHRpdGxlJylgLiBUaGVcbiAqIGZpcnN0IHdpbGwgYmUgYSBgaGFzT3duUHJvcGVydHlgOyB0aGUgc2Vjb25kIHdpbGwgYXBwZWFyIGluXG4gKiBgZ2V0UHJvcGVydGllcygpYC4gT25seSB0aGUgc2Vjb25kIGlzIG9ic2VydmFibGUuXG4gKlxuICogUHJvcGVydGllcyBjYW4gYmUgZGVsZXRlZCBieSB1c2luZyB0aGUgdW5zZXQgbWV0aG9kLiBFLmcuXG4gKiBvYmplY3QudW5zZXQoJ2ZvbycpLlxuICpcbiAqIEBmaXJlcyBPYmplY3RFdmVudFxuICogQGFwaVxuICovXG52YXIgQmFzZU9iamVjdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZU9iamVjdCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSBbb3B0X3ZhbHVlc10gQW4gb2JqZWN0IHdpdGgga2V5LXZhbHVlIHBhaXJzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VPYmplY3Qob3B0X3ZhbHVlcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge09iamVjdE9uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICAvLyBDYWxsIHtAbGluayBtb2R1bGU6b2wvdXRpbC5nZXRVaWR9IHRvIGVuc3VyZSB0aGF0IHRoZSBvcmRlciBvZiBvYmplY3RzJyBpZHMgaXNcbiAgICAgICAgLy8gdGhlIHNhbWUgYXMgdGhlIG9yZGVyIGluIHdoaWNoIHRoZXkgd2VyZSBjcmVhdGVkLiAgVGhpcyBhbHNvIGhlbHBzIHRvXG4gICAgICAgIC8vIGVuc3VyZSB0aGF0IG9iamVjdCBwcm9wZXJ0aWVzIGFyZSBhbHdheXMgYWRkZWQgaW4gdGhlIHNhbWUgb3JkZXIsIHdoaWNoXG4gICAgICAgIC8vIGhlbHBzIG1hbnkgSmF2YVNjcmlwdCBlbmdpbmVzIGdlbmVyYXRlIGZhc3RlciBjb2RlLlxuICAgICAgICBnZXRVaWQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmFsdWVzXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRfdmFsdWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMob3B0X3ZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgdmFsdWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHsqfSBWYWx1ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlc18gJiYgdGhpcy52YWx1ZXNfLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgbGlzdCBvZiBvYmplY3QgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gTGlzdCBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuZ2V0S2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlc18gJiYgT2JqZWN0LmtleXModGhpcy52YWx1ZXNfKSkgfHwgW107XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYW4gb2JqZWN0IG9mIGFsbCBwcm9wZXJ0eSBuYW1lcyBhbmQgdmFsdWVzLlxuICAgICAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsICo+fSBPYmplY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmdldFByb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy52YWx1ZXNfICYmIGFzc2lnbih7fSwgdGhpcy52YWx1ZXNfKSkgfHwge307XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGhhcyBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmhhc1Byb3BlcnRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMudmFsdWVzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHsqfSBvbGRWYWx1ZSBPbGQgdmFsdWUuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKGtleSwgb2xkVmFsdWUpIHtcbiAgICAgICAgdmFyIGV2ZW50VHlwZTtcbiAgICAgICAgZXZlbnRUeXBlID0gXCJjaGFuZ2U6XCIgKyBrZXk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT2JqZWN0RXZlbnQoZXZlbnRUeXBlLCBrZXksIG9sZFZhbHVlKSk7XG4gICAgICAgIGV2ZW50VHlwZSA9IE9iamVjdEV2ZW50VHlwZS5QUk9QRVJUWUNIQU5HRTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBPYmplY3RFdmVudChldmVudFR5cGUsIGtleSwgb2xkVmFsdWUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuYWRkQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoa2V5LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2U6XCIgKyBrZXksIGxpc3RlbmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUucmVtb3ZlQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbiAoa2V5LCBsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2U6XCIgKyBrZXksIGxpc3RlbmVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgYSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3NpbGVudF0gVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdF9zaWxlbnQpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IHRoaXMudmFsdWVzXyB8fCAodGhpcy52YWx1ZXNfID0ge30pO1xuICAgICAgICBpZiAob3B0X3NpbGVudCkge1xuICAgICAgICAgICAgdmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHZhbHVlc1trZXldO1xuICAgICAgICAgICAgdmFsdWVzW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChvbGRWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShrZXksIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhIGNvbGxlY3Rpb24gb2Yga2V5LXZhbHVlIHBhaXJzLiAgTm90ZSB0aGF0IHRoaXMgY2hhbmdlcyBhbnkgZXhpc3RpbmdcbiAgICAgKiBwcm9wZXJ0aWVzIGFuZCBhZGRzIG5ldyBvbmVzIChpdCBkb2VzIG5vdCByZW1vdmUgYW55IGV4aXN0aW5nIHByb3BlcnRpZXMpLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgKj59IHZhbHVlcyBWYWx1ZXMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3NpbGVudF0gVXBkYXRlIHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuc2V0UHJvcGVydGllcyA9IGZ1bmN0aW9uICh2YWx1ZXMsIG9wdF9zaWxlbnQpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgdGhpcy5zZXQoa2V5LCB2YWx1ZXNba2V5XSwgb3B0X3NpbGVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGFueSBwcm9wZXJ0aWVzIGZyb20gYW5vdGhlciBvYmplY3Qgd2l0aG91dCB0cmlnZ2VyaW5nIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge0Jhc2VPYmplY3R9IHNvdXJjZSBUaGUgc291cmNlIG9iamVjdC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUuYXBwbHlQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBpZiAoIXNvdXJjZS52YWx1ZXNfKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKHRoaXMudmFsdWVzXyB8fCAodGhpcy52YWx1ZXNfID0ge30pLCBzb3VyY2UudmFsdWVzXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVbnNldHMgYSBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaWxlbnRdIFVuc2V0IHdpdGhvdXQgdHJpZ2dlcmluZyBhbiBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZU9iamVjdC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoa2V5LCBvcHRfc2lsZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnZhbHVlc18gJiYga2V5IGluIHRoaXMudmFsdWVzXykge1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZXNfW2tleV07XG4gICAgICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLnZhbHVlc18pKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXNfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghb3B0X3NpbGVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KGtleSwgb2xkVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZU9iamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IGRlZmF1bHQgQmFzZU9iamVjdDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgT1BBQ0lUWTogJ29wYWNpdHknLFxuICAgIFZJU0lCTEU6ICd2aXNpYmxlJyxcbiAgICBFWFRFTlQ6ICdleHRlbnQnLFxuICAgIFpfSU5ERVg6ICd6SW5kZXgnLFxuICAgIE1BWF9SRVNPTFVUSU9OOiAnbWF4UmVzb2x1dGlvbicsXG4gICAgTUlOX1JFU09MVVRJT046ICdtaW5SZXNvbHV0aW9uJyxcbiAgICBNQVhfWk9PTTogJ21heFpvb20nLFxuICAgIE1JTl9aT09NOiAnbWluWm9vbScsXG4gICAgU09VUkNFOiAnc291cmNlJyxcbiAgICBNQVA6ICdtYXAnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvQXNzZXJ0aW9uRXJyb3JcbiAqL1xuaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gJy4vdXRpbC5qcyc7XG4vKipcbiAqIEVycm9yIG9iamVjdCB0aHJvd24gd2hlbiBhbiBhc3NlcnRpb24gZmFpbGVkLiBUaGlzIGlzIGFuIEVDTUEtMjYyIEVycm9yLFxuICogZXh0ZW5kZWQgd2l0aCBhIGBjb2RlYCBwcm9wZXJ0eS5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvci5cbiAqL1xudmFyIEFzc2VydGlvbkVycm9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBc3NlcnRpb25FcnJvciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY29kZSBFcnJvciBjb2RlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzc2VydGlvbkVycm9yKGNvZGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHBhdGggPSBWRVJTSU9OID09PSAnbGF0ZXN0JyA/IFZFUlNJT04gOiAndicgKyBWRVJTSU9OLnNwbGl0KCctJylbMF07XG4gICAgICAgIHZhciBtZXNzYWdlID0gJ0Fzc2VydGlvbiBmYWlsZWQuIFNlZSBodHRwczovL29wZW5sYXllcnMub3JnL2VuLycgK1xuICAgICAgICAgICAgcGF0aCArXG4gICAgICAgICAgICAnL2RvYy9lcnJvcnMvIycgK1xuICAgICAgICAgICAgY29kZSArXG4gICAgICAgICAgICAnIGZvciBkZXRhaWxzLic7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWVzc2FnZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVycm9yIGNvZGUuIFRoZSBtZWFuaW5nIG9mIHRoZSBjb2RlIGNhbiBiZSBmb3VuZCBvblxuICAgICAgICAgKiBodHRwczovL29wZW5sYXllcnMub3JnL2VuL2xhdGVzdC9kb2MvZXJyb3JzLyAocmVwbGFjZSBgbGF0ZXN0YCB3aXRoXG4gICAgICAgICAqIHRoZSB2ZXJzaW9uIGZvdW5kIGluIHRoZSBPcGVuTGF5ZXJzIHNjcmlwdCdzIGhlYWRlciBjb21tZW50IGlmIGEgdmVyc2lvblxuICAgICAgICAgKiBvdGhlciB0aGFuIHRoZSBsYXRlc3QgaXMgdXNlZCkuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5hbWUgPSAnQXNzZXJ0aW9uRXJyb3InO1xuICAgICAgICAvLyBSZS1hc3NpZ24gbWVzc2FnZSwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9SaWNoLUhhcnJpcy9idWJsZS9pc3N1ZXMvNDBcbiAgICAgICAgX3RoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEFzc2VydGlvbkVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IGRlZmF1bHQgQXNzZXJ0aW9uRXJyb3I7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Bc3NlcnRpb25FcnJvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvYXNzZXJ0c1xuICovXG5pbXBvcnQgQXNzZXJ0aW9uRXJyb3IgZnJvbSAnLi9Bc3NlcnRpb25FcnJvci5qcyc7XG4vKipcbiAqIEBwYXJhbSB7Kn0gYXNzZXJ0aW9uIEFzc2VydGlvbiB3ZSBleHBlY3RlZCB0byBiZSB0cnV0aHkuXG4gKiBAcGFyYW0ge251bWJlcn0gZXJyb3JDb2RlIEVycm9yIGNvZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnQoYXNzZXJ0aW9uLCBlcnJvckNvZGUpIHtcbiAgICBpZiAoIWFzc2VydGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoZXJyb3JDb2RlKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hc3NlcnRzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9tYXRoXG4gKi9cbi8qKlxuICogVGFrZXMgYSBudW1iZXIgYW5kIGNsYW1wcyBpdCB0byB3aXRoaW4gdGhlIHByb3ZpZGVkIGJvdW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pbiBUaGUgbWluaW11bSB2YWx1ZSB0byByZXR1cm4uXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IFRoZSBtYXhpbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGlucHV0IG51bWJlciBpZiBpdCBpcyB3aXRoaW4gYm91bmRzLCBvciB0aGUgbmVhcmVzdFxuICogICAgIG51bWJlciB3aXRoaW4gdGhlIGJvdW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsYW1wKHZhbHVlLCBtaW4sIG1heCkge1xuICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1heCh2YWx1ZSwgbWluKSwgbWF4KTtcbn1cbi8qKlxuICogUmV0dXJuIHRoZSBoeXBlcmJvbGljIGNvc2luZSBvZiBhIGdpdmVuIG51bWJlci4gVGhlIG1ldGhvZCB3aWxsIHVzZSB0aGVcbiAqIG5hdGl2ZSBgTWF0aC5jb3NoYCBmdW5jdGlvbiBpZiBpdCBpcyBhdmFpbGFibGUsIG90aGVyd2lzZSB0aGUgaHlwZXJib2xpY1xuICogY29zaW5lIHdpbGwgYmUgY2FsY3VsYXRlZCB2aWEgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTW96aWxsYVxuICogZGV2ZWxvcGVyIG5ldHdvcmsuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEByZXR1cm4ge251bWJlcn0gSHlwZXJib2xpYyBjb3NpbmUgb2YgeC5cbiAqL1xuZXhwb3J0IHZhciBjb3NoID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBXcmFwcGVkIGluIGEgaWlmZSwgdG8gc2F2ZSB0aGUgb3ZlcmhlYWQgb2YgY2hlY2tpbmcgZm9yIHRoZSBuYXRpdmVcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiBvbiBldmVyeSBpbnZvY2F0aW9uLlxuICAgIHZhciBjb3NoO1xuICAgIGlmICgnY29zaCcgaW4gTWF0aCkge1xuICAgICAgICAvLyBUaGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgdGhlIG5hdGl2ZSBNYXRoLmNvc2ggZnVuY3Rpb24sIHVzZSBpdOKAplxuICAgICAgICBjb3NoID0gTWF0aC5jb3NoO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8g4oCmIGVsc2UsIHVzZSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIE1ETjpcbiAgICAgICAgY29zaCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB2YXIgeSA9IC8qKiBAdHlwZSB7TWF0aH0gKi8gKE1hdGgpLmV4cCh4KTtcbiAgICAgICAgICAgIHJldHVybiAoeSArIDEgLyB5KSAvIDI7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBjb3NoO1xufSkoKTtcbi8qKlxuICogUmV0dXJuIHRoZSBiYXNlIDIgbG9nYXJpdGhtIG9mIGEgZ2l2ZW4gbnVtYmVyLiBUaGUgbWV0aG9kIHdpbGwgdXNlIHRoZVxuICogbmF0aXZlIGBNYXRoLmxvZzJgIGZ1bmN0aW9uIGlmIGl0IGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBiYXNlIDJcbiAqIGxvZ2FyaXRobSB3aWxsIGJlIGNhbGN1bGF0ZWQgdmlhIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgdGhlXG4gKiBNb3ppbGxhIGRldmVsb3BlciBuZXR3b3JrLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEJhc2UgMiBsb2dhcml0aG0gb2YgeC5cbiAqL1xuZXhwb3J0IHZhciBsb2cyID0gKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBXcmFwcGVkIGluIGEgaWlmZSwgdG8gc2F2ZSB0aGUgb3ZlcmhlYWQgb2YgY2hlY2tpbmcgZm9yIHRoZSBuYXRpdmVcbiAgICAvLyBpbXBsZW1lbnRhdGlvbiBvbiBldmVyeSBpbnZvY2F0aW9uLlxuICAgIHZhciBsb2cyO1xuICAgIGlmICgnbG9nMicgaW4gTWF0aCkge1xuICAgICAgICAvLyBUaGUgZW52aXJvbm1lbnQgc3VwcG9ydHMgdGhlIG5hdGl2ZSBNYXRoLmxvZzIgZnVuY3Rpb24sIHVzZSBpdOKAplxuICAgICAgICBsb2cyID0gTWF0aC5sb2cyO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8g4oCmIGVsc2UsIHVzZSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIE1ETjpcbiAgICAgICAgbG9nMiA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5sb2coeCkgKiBNYXRoLkxPRzJFO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gbG9nMjtcbn0pKCk7XG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgY2xvc2VzdCBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb2ludCAoeCwgeSkgYW5kIHRoZVxuICogbGluZSBzZWdtZW50ICh4MSwgeTEpIHRvICh4MiwgeTIpLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge251bWJlcn0geDEgWDEuXG4gKiBAcGFyYW0ge251bWJlcn0geTEgWTEuXG4gKiBAcGFyYW0ge251bWJlcn0geDIgWDIuXG4gKiBAcGFyYW0ge251bWJlcn0geTIgWTIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkU2VnbWVudERpc3RhbmNlKHgsIHksIHgxLCB5MSwgeDIsIHkyKSB7XG4gICAgdmFyIGR4ID0geDIgLSB4MTtcbiAgICB2YXIgZHkgPSB5MiAtIHkxO1xuICAgIGlmIChkeCAhPT0gMCB8fCBkeSAhPT0gMCkge1xuICAgICAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBpZiAodCA+IDEpIHtcbiAgICAgICAgICAgIHgxID0geDI7XG4gICAgICAgICAgICB5MSA9IHkyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICAgICAgICB4MSArPSBkeCAqIHQ7XG4gICAgICAgICAgICB5MSArPSBkeSAqIHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZSh4LCB5LCB4MSwgeTEpO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoeDEsIHkxKSBhbmQgKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geDEgWDEuXG4gKiBAcGFyYW0ge251bWJlcn0geTEgWTEuXG4gKiBAcGFyYW0ge251bWJlcn0geDIgWDIuXG4gKiBAcGFyYW0ge251bWJlcn0geTIgWTIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBTb2x2ZXMgc3lzdGVtIG9mIGxpbmVhciBlcXVhdGlvbnMgdXNpbmcgR2F1c3NpYW4gZWxpbWluYXRpb24gbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IG1hdCBBdWdtZW50ZWQgbWF0cml4IChuIHggbiArIDEgY29sdW1uKVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gcm93LW1ham9yIG9yZGVyLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIHJlc3VsdGluZyB2ZWN0b3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb2x2ZUxpbmVhclN5c3RlbShtYXQpIHtcbiAgICB2YXIgbiA9IG1hdC5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgLy8gRmluZCBtYXggaW4gdGhlIGktdGggY29sdW1uIChpZ25vcmluZyBpIC0gMSBmaXJzdCByb3dzKVxuICAgICAgICB2YXIgbWF4Um93ID0gaTtcbiAgICAgICAgdmFyIG1heEVsID0gTWF0aC5hYnMobWF0W2ldW2ldKTtcbiAgICAgICAgZm9yICh2YXIgciA9IGkgKyAxOyByIDwgbjsgcisrKSB7XG4gICAgICAgICAgICB2YXIgYWJzVmFsdWUgPSBNYXRoLmFicyhtYXRbcl1baV0pO1xuICAgICAgICAgICAgaWYgKGFic1ZhbHVlID4gbWF4RWwpIHtcbiAgICAgICAgICAgICAgICBtYXhFbCA9IGFic1ZhbHVlO1xuICAgICAgICAgICAgICAgIG1heFJvdyA9IHI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heEVsID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy8gbWF0cml4IGlzIHNpbmd1bGFyXG4gICAgICAgIH1cbiAgICAgICAgLy8gU3dhcCBtYXggcm93IHdpdGggaS10aCAoY3VycmVudCkgcm93XG4gICAgICAgIHZhciB0bXAgPSBtYXRbbWF4Um93XTtcbiAgICAgICAgbWF0W21heFJvd10gPSBtYXRbaV07XG4gICAgICAgIG1hdFtpXSA9IHRtcDtcbiAgICAgICAgLy8gU3VidHJhY3QgdGhlIGktdGggcm93IHRvIG1ha2UgYWxsIHRoZSByZW1haW5pbmcgcm93cyAwIGluIHRoZSBpLXRoIGNvbHVtblxuICAgICAgICBmb3IgKHZhciBqID0gaSArIDE7IGogPCBuOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBjb2VmID0gLW1hdFtqXVtpXSAvIG1hdFtpXVtpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSBpOyBrIDwgbiArIDE7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmIChpID09IGspIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0W2pdW2tdID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdFtqXVtrXSArPSBjb2VmICogbWF0W2ldW2tdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBTb2x2ZSBBeD1iIGZvciB1cHBlciB0cmlhbmd1bGFyIG1hdHJpeCBBIChtYXQpXG4gICAgdmFyIHggPSBuZXcgQXJyYXkobik7XG4gICAgZm9yICh2YXIgbCA9IG4gLSAxOyBsID49IDA7IGwtLSkge1xuICAgICAgICB4W2xdID0gbWF0W2xdW25dIC8gbWF0W2xdW2xdO1xuICAgICAgICBmb3IgKHZhciBtID0gbCAtIDE7IG0gPj0gMDsgbS0tKSB7XG4gICAgICAgICAgICBtYXRbbV1bbl0gLT0gbWF0W21dW2xdICogeFtsXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4geDtcbn1cbi8qKlxuICogQ29udmVydHMgcmFkaWFucyB0byB0byBkZWdyZWVzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZUluUmFkaWFucyBBbmdsZSBpbiByYWRpYW5zLlxuICogQHJldHVybiB7bnVtYmVyfSBBbmdsZSBpbiBkZWdyZWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9EZWdyZWVzKGFuZ2xlSW5SYWRpYW5zKSB7XG4gICAgcmV0dXJuIChhbmdsZUluUmFkaWFucyAqIDE4MCkgLyBNYXRoLlBJO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBkZWdyZWVzIHRvIHJhZGlhbnMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5EZWdyZWVzIEFuZ2xlIGluIGRlZ3JlZXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIHJhZGlhbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbnMoYW5nbGVJbkRlZ3JlZXMpIHtcbiAgICByZXR1cm4gKGFuZ2xlSW5EZWdyZWVzICogTWF0aC5QSSkgLyAxODA7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIG1vZHVsbyBvZiBhIC8gYiwgZGVwZW5kaW5nIG9uIHRoZSBzaWduIG9mIGIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGEgRGl2aWRlbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gYiBEaXZpc29yLlxuICogQHJldHVybiB7bnVtYmVyfSBNb2R1bG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb2R1bG8oYSwgYikge1xuICAgIHZhciByID0gYSAlIGI7XG4gICAgcmV0dXJuIHIgKiBiIDwgMCA/IHIgKyBiIDogcjtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGluZWFybHkgaW50ZXJwb2xhdGVkIHZhbHVlIG9mIHggYmV0d2VlbiBhIGFuZCBiLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBhIE51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGIgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0geCBWYWx1ZSB0byBiZSBpbnRlcnBvbGF0ZWQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEludGVycG9sYXRlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxlcnAoYSwgYiwgeCkge1xuICAgIHJldHVybiBhICsgeCAqIChiIC0gYSk7XG59XG4vKipcbiAqIFJldHVybnMgYSBudW1iZXIgd2l0aCBhIGxpbWl0ZWQgbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIGlucHV0IG51bWJlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWNpbWFscyBUaGUgbWF4aW11bSBudW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbnB1dCBudW1iZXIgd2l0aCBhIGxpbWl0ZWQgbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9GaXhlZChuLCBkZWNpbWFscykge1xuICAgIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgZGVjaW1hbHMpO1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG4gKiBmYWN0b3IpIC8gZmFjdG9yO1xufVxuLyoqXG4gKiBSb3VuZHMgYSBudW1iZXIgdG8gdGhlIG5lYXJlc3QgaW50ZWdlciB2YWx1ZSBjb25zaWRlcmluZyBvbmx5IHRoZSBnaXZlbiBudW1iZXJcbiAqIG9mIGRlY2ltYWwgZGlnaXRzICh3aXRoIHJvdW5kaW5nIG9uIHRoZSBmaW5hbCBkaWdpdCkuXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgaW5wdXQgbnVtYmVyLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlY2ltYWxzIFRoZSBtYXhpbXVtIG51bWJlciBvZiBkZWNpbWFsIGRpZ2l0cy5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG5lYXJlc3QgaW50ZWdlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdW5kKG4sIGRlY2ltYWxzKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQodG9GaXhlZChuLCBkZWNpbWFscykpO1xufVxuLyoqXG4gKiBSb3VuZHMgYSBudW1iZXIgdG8gdGhlIG5leHQgc21hbGxlciBpbnRlZ2VyIGNvbnNpZGVyaW5nIG9ubHkgdGhlIGdpdmVuIG51bWJlclxuICogb2YgZGVjaW1hbCBkaWdpdHMgKHdpdGggcm91bmRpbmcgb24gdGhlIGZpbmFsIGRpZ2l0KS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbHMgVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbmV4dCBzbWFsbGVyIGludGVnZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmbG9vcihuLCBkZWNpbWFscykge1xuICAgIHJldHVybiBNYXRoLmZsb29yKHRvRml4ZWQobiwgZGVjaW1hbHMpKTtcbn1cbi8qKlxuICogUm91bmRzIGEgbnVtYmVyIHRvIHRoZSBuZXh0IGJpZ2dlciBpbnRlZ2VyIGNvbnNpZGVyaW5nIG9ubHkgdGhlIGdpdmVuIG51bWJlclxuICogb2YgZGVjaW1hbCBkaWdpdHMgKHdpdGggcm91bmRpbmcgb24gdGhlIGZpbmFsIGRpZ2l0KS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbHMgVGhlIG1heGltdW0gbnVtYmVyIG9mIGRlY2ltYWwgZGlnaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbmV4dCBiaWdnZXIgaW50ZWdlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNlaWwobiwgZGVjaW1hbHMpIHtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRvRml4ZWQobiwgZGVjaW1hbHMpKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGguanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9CYXNlXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBBIGNzcyBjb2xvciwgb3IgYSBmdW5jdGlvbiBjYWxsZWQgd2l0aCBhIHZpZXcgcmVzb2x1dGlvbiByZXR1cm5pbmcgYSBjc3MgY29sb3IuXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ3xmdW5jdGlvbihudW1iZXIpOnN0cmluZ30gQmFja2dyb3VuZENvbG9yXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmV4dGVudCd8J2NoYW5nZTptYXhSZXNvbHV0aW9uJ3wnY2hhbmdlOm1heFpvb20nfFxuICogICAgJ2NoYW5nZTptaW5SZXNvbHV0aW9uJ3wnY2hhbmdlOm1pblpvb20nfCdjaGFuZ2U6b3BhY2l0eSd8J2NoYW5nZTp2aXNpYmxlJ3wnY2hhbmdlOnpJbmRleCd9IEJhc2VMYXllck9iamVjdEV2ZW50VHlwZXNcbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8QmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xCYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzLCBSZXR1cm4+fSBCYXNlTGF5ZXJPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge0JhY2tncm91bmRDb2xvcn0gW2JhY2tncm91bmRdIEJhY2tncm91bmQgY29sb3IgZm9yIHRoZSBsYXllci4gSWYgbm90IHNwZWNpZmllZCwgbm8gYmFja2dyb3VuZFxuICogd2lsbCBiZSByZW5kZXJlZC5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTm90ZSB0aGF0IHdpdGgge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlfSBhbmQgYWxsIGl0cyBzdWJjbGFzc2VzLCBhbnkgcHJvcGVydHkgc2V0IGluXG4gKiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH0gcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdCwgc29cbiAqIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQmFzZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIExheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZUxheWVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0JhY2tncm91bmRDb2xvcnxmYWxzZX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmJhY2tncm91bmRfID0gb3B0aW9ucy5iYWNrZ3JvdW5kO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBhc3NpZ24ocHJvcGVydGllcywgb3B0aW9ucy5wcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYWNpdHkgOiAxO1xuICAgICAgICBhc3NlcnQodHlwZW9mIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZXSA9PT0gJ251bWJlcicsIDY0KTsgLy8gTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyXG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFXSA9XG4gICAgICAgICAgICBvcHRpb25zLnZpc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlzaWJsZSA6IHRydWU7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5aX0lOREVYXSA9IG9wdGlvbnMuekluZGV4O1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT05dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhSZXNvbHV0aW9uIDogSW5maW5pdHk7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTl0gPVxuICAgICAgICAgICAgb3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblJlc29sdXRpb24gOiAwO1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUlOX1pPT01dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5ab29tIDogLUluZmluaXR5O1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1pPT01dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhab29tIDogSW5maW5pdHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xhc3NOYW1lXyA9XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtbGF5ZXInO1xuICAgICAgICBkZWxldGUgcHJvcGVydGllcy5jbGFzc05hbWU7XG4gICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBiYWNrZ3JvdW5kIGZvciB0aGlzIGxheWVyLlxuICAgICAqIEByZXR1cm4ge0JhY2tncm91bmRDb2xvcnxmYWxzZX0gTGF5ZXIgYmFja2dyb3VuZC5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldEJhY2tncm91bmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBDU1MgY2xhc3MgbmFtZS5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldENsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3NOYW1lXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBtZWFudCB0byBiZSBjYWxsZWQgYnkgbGF5ZXJzIG9yIGxheWVyIHJlbmRlcmVycyBiZWNhdXNlIHRoZSBzdGF0ZVxuICAgICAqIGlzIGluY29ycmVjdCBpZiB0aGUgbGF5ZXIgaXMgaW5jbHVkZWQgaW4gYSBsYXllciBncm91cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9tYW5hZ2VkXSBMYXllciBpcyBtYW5hZ2VkLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9IExheWVyIHN0YXRlLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZSA9IGZ1bmN0aW9uIChvcHRfbWFuYWdlZCkge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9ICovXG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGVfIHx8XG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovICh7XG4gICAgICAgICAgICAgICAgbGF5ZXI6IHRoaXMsXG4gICAgICAgICAgICAgICAgbWFuYWdlZDogb3B0X21hbmFnZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRfbWFuYWdlZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB2YXIgekluZGV4ID0gdGhpcy5nZXRaSW5kZXgoKTtcbiAgICAgICAgc3RhdGUub3BhY2l0eSA9IGNsYW1wKE1hdGgucm91bmQodGhpcy5nZXRPcGFjaXR5KCkgKiAxMDApIC8gMTAwLCAwLCAxKTtcbiAgICAgICAgc3RhdGUuc291cmNlU3RhdGUgPSB0aGlzLmdldFNvdXJjZVN0YXRlKCk7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0aGlzLmdldFZpc2libGUoKTtcbiAgICAgICAgc3RhdGUuZXh0ZW50ID0gdGhpcy5nZXRFeHRlbnQoKTtcbiAgICAgICAgc3RhdGUuekluZGV4ID0gekluZGV4ID09PSB1bmRlZmluZWQgJiYgIXN0YXRlLm1hbmFnZWQgPyBJbmZpbml0eSA6IHpJbmRleDtcbiAgICAgICAgc3RhdGUubWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgICAgICBzdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgodGhpcy5nZXRNaW5SZXNvbHV0aW9uKCksIDApO1xuICAgICAgICBzdGF0ZS5taW5ab29tID0gdGhpcy5nZXRNaW5ab29tKCk7XG4gICAgICAgIHN0YXRlLm1heFpvb20gPSB0aGlzLmdldE1heFpvb20oKTtcbiAgICAgICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBbb3B0X2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlXG4gICAgICogICAgIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllcnNBcnJheSA9IGZ1bmN0aW9uIChvcHRfYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbb3B0X3N0YXRlc10gT3B0aW9uYWwgbGlzdCBvZiBsYXllclxuICAgICAqICAgICBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudCBleHRlbnR9IG9mIHRoZSBsYXllciBvciBgdW5kZWZpbmVkYCBpZiBpdFxuICAgICAqIHdpbGwgYmUgdmlzaWJsZSByZWdhcmRsZXNzIG9mIGV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gVGhlIGxheWVyIGV4dGVudC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LkVYVEVOVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1BWF9aT09NKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyIChiZXR3ZWVuIDAgYW5kIDEpLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0T3BhY2l0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gU291cmNlIHN0YXRlLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllciAoYHRydWVgIG9yIGBmYWxzZWApLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlZJU0lCTEUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZVxuICAgICAqIHJlbmRlcmluZy4gVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIFotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlpfSU5ERVgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGJhY2tncmxvdW5kIGNvbG9yLlxuICAgICAqIEBwYXJhbSB7QmFja2dyb3VuZENvbG9yfSBbb3B0X2JhY2tncm91bmRdIEJhY2tncm91bmQgY29sb3IuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKG9wdF9iYWNrZ3JvdW5kKSB7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZF8gPSBvcHRfYmFja2dyb3VuZDtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGV4dGVudCBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS4gIElmIGB1bmRlZmluZWRgLCB0aGUgbGF5ZXJcbiAgICAgKiB3aWxsIGJlIHZpc2libGUgYXQgYWxsIGV4dGVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gZXh0ZW50IFRoZSBleHRlbnQgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0RXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LkVYVEVOVCwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChtYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT04sIG1heFJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtaW5pbXVtIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNaW5SZXNvbHV0aW9uID0gZnVuY3Rpb24gKG1pblJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTiwgbWluUmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1heGltdW0gem9vbSAoZXhjbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIHpvb20gbGV2ZWxzIGZvciBsYXllciB2aXNpYmlsaXR5IGFyZSBiYXNlZCBvbiB0aGVcbiAgICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFpvb20gVGhlIG1heGltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24gKG1heFpvb20pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfWk9PTSwgbWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1pbmltdW0gem9vbSAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIHpvb20gbGV2ZWxzIGZvciBsYXllciB2aXNpYmlsaXR5IGFyZSBiYXNlZCBvbiB0aGVcbiAgICAgKiB2aWV3IHpvb20gbGV2ZWwsIHdoaWNoIG1heSBiZSBkaWZmZXJlbnQgZnJvbSBhIHRpbGUgc291cmNlIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblpvb20gVGhlIG1pbmltdW0gem9vbSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNaW5ab29tID0gZnVuY3Rpb24gKG1pblpvb20pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTSwgbWluWm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLCBhbGxvd2VkIHZhbHVlcyByYW5nZSBmcm9tIDAgdG8gMS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBUaGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRPcGFjaXR5ID0gZnVuY3Rpb24gKG9wYWNpdHkpIHtcbiAgICAgICAgYXNzZXJ0KHR5cGVvZiBvcGFjaXR5ID09PSAnbnVtYmVyJywgNjQpOyAvLyBMYXllciBvcGFjaXR5IG11c3QgYmUgYSBudW1iZXJcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZLCBvcGFjaXR5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIgKGB0cnVlYCBvciBgZmFsc2VgKS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2libGUgVGhlIHZpc2liaWxpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0VmlzaWJsZSA9IGZ1bmN0aW9uICh2aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuVklTSUJMRSwgdmlzaWJsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZSByZW5kZXJpbmcuXG4gICAgICogVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6aW5kZXggVGhlIHotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuc2V0WkluZGV4ID0gZnVuY3Rpb24gKHppbmRleCkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlpfSU5ERVgsIHppbmRleCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGVfKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlXy5sYXllciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnN0YXRlXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlTGF5ZXI7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGJlZm9yZSBhIGxheWVyIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3ByZXJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQUkVSRU5ERVI6ICdwcmVyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBhIGxheWVyIGlzIHJlbmRlcmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvcmVuZGVyL0V2ZW50flJlbmRlckV2ZW50I3Bvc3RyZW5kZXJcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9TVFJFTkRFUjogJ3Bvc3RyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBiZWZvcmUgbGF5ZXJzIGFyZSBjb21wb3NlZC4gIFdoZW4gZGlzcGF0Y2hlZCBieSB0aGUgbWFwLCB0aGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmVcbiAgICAgKiBhIGBjb250ZXh0YCBzZXQuICBXaGVuIGRpc3BhdGNoZWQgYnkgYSBsYXllciwgdGhlIGV2ZW50IG9iamVjdCB3aWxsIGhhdmUgYSBgY29udGV4dGAgc2V0LiAgT25seVxuICAgICAqIFdlYkdMIGxheWVycyBjdXJyZW50bHkgZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwcmVjb21wb3NlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBSRUNPTVBPU0U6ICdwcmVjb21wb3NlJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYWZ0ZXIgbGF5ZXJzIGFyZSBjb21wb3NlZC4gIFdoZW4gZGlzcGF0Y2hlZCBieSB0aGUgbWFwLCB0aGUgZXZlbnQgb2JqZWN0IHdpbGwgbm90IGhhdmVcbiAgICAgKiBhIGBjb250ZXh0YCBzZXQuICBXaGVuIGRpc3BhdGNoZWQgYnkgYSBsYXllciwgdGhlIGV2ZW50IG9iamVjdCB3aWxsIGhhdmUgYSBgY29udGV4dGAgc2V0LiAgT25seVxuICAgICAqIFdlYkdMIGxheWVycyBjdXJyZW50bHkgZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNwb3N0Y29tcG9zZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUQ09NUE9TRTogJ3Bvc3Rjb21wb3NlJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiByZW5kZXJpbmcgaXMgY29tcGxldGUsIGkuZS4gYWxsIHNvdXJjZXMgYW5kIHRpbGVzIGhhdmVcbiAgICAgKiBmaW5pc2hlZCBsb2FkaW5nIGZvciB0aGUgY3VycmVudCB2aWV3cG9ydCwgYW5kIGFsbCB0aWxlcyBhcmUgZmFkZWQgaW4uXG4gICAgICogVGhlIGV2ZW50IG9iamVjdCB3aWxsIG5vdCBoYXZlIGEgYGNvbnRleHRgIHNldC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3JlbmRlci9FdmVudH5SZW5kZXJFdmVudCNyZW5kZXJjb21wbGV0ZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBSRU5ERVJDT01QTEVURTogJ3JlbmRlcmNvbXBsZXRlJyxcbn07XG4vKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J3ByZWNvbXBvc2UnfCdwb3N0Y29tcG9zZSd8J3JlbmRlcmNvbXBsZXRlJ30gTWFwUmVuZGVyRXZlbnRUeXBlc1xuICovXG4vKipcbiAqIEB0eXBlZGVmIHsncG9zdHJlbmRlcid8J3ByZXJlbmRlcid9IExheWVyUmVuZGVyRXZlbnRUeXBlc1xuICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9TdGF0ZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBTdGF0ZSBvZiB0aGUgc291cmNlLCBvbmUgb2YgJ3VuZGVmaW5lZCcsICdsb2FkaW5nJywgJ3JlYWR5JyBvciAnZXJyb3InLlxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgVU5ERUZJTkVEOiAndW5kZWZpbmVkJyxcbiAgICBMT0FESU5HOiAnbG9hZGluZycsXG4gICAgUkVBRFk6ICdyZWFkeScsXG4gICAgRVJST1I6ICdlcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9MYXllclxuICovXG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IExheWVyUHJvcGVydHkgZnJvbSAnLi9Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGUpOkhUTUxFbGVtZW50fSBSZW5kZXJGdW5jdGlvblxuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAnY2hhbmdlOnNvdXJjZScsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3wnY2hhbmdlOnNvdXJjZSd8XG4gKiAgICAgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIFJldHVybj59IExheWVyT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2UuanNcIikuZGVmYXVsdH0gU291cmNlVHlwZVxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7U291cmNlVHlwZX0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLiAgSWYgbm90IHByb3ZpZGVkIHRvIHRoZSBjb25zdHJ1Y3RvcixcbiAqIHRoZSBzb3VyY2UgY2FuIGJlIHNldCBieSBjYWxsaW5nIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0U291cmNlIGxheWVyLnNldFNvdXJjZShzb3VyY2UpfSBhZnRlclxuICogY29uc3RydWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gTWFwLlxuICogQHByb3BlcnR5IHtSZW5kZXJGdW5jdGlvbn0gW3JlbmRlcl0gUmVuZGVyIGZ1bmN0aW9uLiBUYWtlcyB0aGUgZnJhbWUgc3RhdGUgYXMgaW5wdXQgYW5kIGlzIGV4cGVjdGVkIHRvIHJldHVybiBhblxuICogSFRNTCBlbGVtZW50LiBXaWxsIG92ZXJ3cml0ZSB0aGUgZGVmYXVsdCByZW5kZXJpbmcgZm9yIHRoZSBsYXllci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHksIHRoZSB2YWx1ZSBpcyByb3VuZGVkIHRvIHR3byBkaWdpdHMgdG8gYXBwZWFyIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gc291cmNlU3RhdGUgU291cmNlU3RhdGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IHZpc2libGUgVmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gbWFuYWdlZCBNYW5hZ2VkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBFeHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gekluZGV4IFpJbmRleC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heGltdW0gcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIE1pbmltdW0gcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtaW5ab29tIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBtYXhab29tIE1heGltdW0gem9vbS5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZyb20gd2hpY2ggYWxsIGxheWVyIHR5cGVzIGFyZSBkZXJpdmVkLiBUaGlzIHNob3VsZCBvbmx5IGJlIGluc3RhbnRpYXRlZFxuICogaW4gdGhlIGNhc2Ugd2hlcmUgYSBjdXN0b20gbGF5ZXIgaXMgYmUgYWRkZWQgdG8gdGhlIG1hcCB3aXRoIGEgY3VzdG9tIGByZW5kZXJgIGZ1bmN0aW9uLlxuICogU3VjaCBhIGZ1bmN0aW9uIGNhbiBiZSBzcGVjaWZpZWQgaW4gdGhlIGBvcHRpb25zYCBvYmplY3QsIGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYW4gSFRNTCBlbGVtZW50LlxuICpcbiAqIEEgdmlzdWFsIHJlcHJlc2VudGF0aW9uIG9mIHJhc3RlciBvciB2ZWN0b3IgbWFwIGRhdGEuXG4gKiBMYXllcnMgZ3JvdXAgdG9nZXRoZXIgdGhvc2UgcHJvcGVydGllcyB0aGF0IHBlcnRhaW4gdG8gaG93IHRoZSBkYXRhIGlzIHRvIGJlXG4gKiBkaXNwbGF5ZWQsIGlycmVzcGVjdGl2ZSBvZiB0aGUgc291cmNlIG9mIHRoYXQgZGF0YS5cbiAqXG4gKiBMYXllcnMgYXJlIHVzdWFsbHkgYWRkZWQgdG8gYSBtYXAgd2l0aCB7QGxpbmsgaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHQjYWRkTGF5ZXIgbWFwLmFkZExheWVyKCl9LiBDb21wb25lbnRzXG4gKiBsaWtlIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhd35EcmF3fSB1c2UgdW5tYW5hZ2VkIGxheWVyc1xuICogaW50ZXJuYWxseS4gVGhlc2UgdW5tYW5hZ2VkIGxheWVycyBhcmUgYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIjc2V0TWFwfSBpbnN0ZWFkLlxuICpcbiAqIEEgZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBpcyBmaXJlZCB3aGVuIHRoZSBzdGF0ZSBvZiB0aGUgc291cmNlIGNoYW5nZXMuXG4gKlxuICogUGxlYXNlIG5vdGUgdGhhdCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucyBzZXZlcmFsIGxheWVycyBtaWdodCBnZXQgcmVuZGVyZWQgdG9cbiAqIHRoZSBzYW1lIEhUTUwgZWxlbWVudCwgd2hpY2ggd2lsbCBjYXVzZSB7QGxpbmsgaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHQjZm9yRWFjaExheWVyQXRQaXhlbCBtYXAuZm9yRWFjaExheWVyQXRQaXhlbCgpfSB0b1xuICogZ2l2ZSBmYWxzZSBwb3NpdGl2ZXMuIFRvIGF2b2lkIHRoaXMsIGFwcGx5IGRpZmZlcmVudCBgY2xhc3NOYW1lYCBwcm9wZXJ0aWVzIHRvIHRoZVxuICogbGF5ZXJzIGF0IGNyZWF0aW9uIHRpbWUuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5SZW5kZXJFdmVudCNwcmVyZW5kZXJcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnQuanNcIikuUmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICpcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2VUeXBlXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3JlbmRlcmVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IFJlbmRlcmVyVHlwZVxuICogQGFwaVxuICovXG52YXIgTGF5ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uczxTb3VyY2VUeXBlPn0gb3B0aW9ucyBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnNvdXJjZTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwUmVuZGVyS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtSZW5kZXJlclR5cGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAvLyBPdmVyd3JpdGUgZGVmYXVsdCByZW5kZXIgbWV0aG9kIHdpdGggYSBjdXN0b20gb25lXG4gICAgICAgIGlmIChvcHRpb25zLnJlbmRlcikge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyID0gb3B0aW9ucy5yZW5kZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubWFwKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRNYXAob3B0aW9ucy5tYXApO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKExheWVyUHJvcGVydHkuU09VUkNFLCBfdGhpcy5oYW5kbGVTb3VyY2VQcm9wZXJ0eUNoYW5nZV8pO1xuICAgICAgICB2YXIgc291cmNlID0gb3B0aW9ucy5zb3VyY2VcbiAgICAgICAgICAgID8gLyoqIEB0eXBlIHtTb3VyY2VUeXBlfSAqLyAob3B0aW9ucy5zb3VyY2UpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIF90aGlzLnNldFNvdXJjZShzb3VyY2UpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gW29wdF9hcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRMYXllcnNBcnJheSA9IGZ1bmN0aW9uIChvcHRfYXJyYXkpIHtcbiAgICAgICAgdmFyIGFycmF5ID0gb3B0X2FycmF5ID8gb3B0X2FycmF5IDogW107XG4gICAgICAgIGFycmF5LnB1c2godGhpcyk7XG4gICAgICAgIHJldHVybiBhcnJheTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IFtvcHRfc3RhdGVzXSBPcHRpb25hbCBsaXN0IG9mIGxheWVyIHN0YXRlcyAodG8gYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBMaXN0IG9mIGxheWVyIHN0YXRlcy5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIChvcHRfc3RhdGVzKSB7XG4gICAgICAgIHZhciBzdGF0ZXMgPSBvcHRfc3RhdGVzID8gb3B0X3N0YXRlcyA6IFtdO1xuICAgICAgICBzdGF0ZXMucHVzaCh0aGlzLmdldExheWVyU3RhdGUoKSk7XG4gICAgICAgIHJldHVybiBzdGF0ZXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtTb3VyY2VUeXBlfSBUaGUgbGF5ZXIgc291cmNlIChvciBgbnVsbGAgaWYgbm90IHlldCBzZXQpLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRTb3VyY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge1NvdXJjZVR5cGV9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlNPVVJDRSkpIHx8IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gU291cmNlIHN0YXRlLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRTb3VyY2VTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgICAgIHJldHVybiAhc291cmNlID8gU291cmNlU3RhdGUuVU5ERUZJTkVEIDogc291cmNlLmdldFN0YXRlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYW5kbGVTb3VyY2VDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlQ2hhbmdlS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnNvdXJjZUNoYW5nZUtleV8pO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5nZXRTb3VyY2UoKTtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VDaGFuZ2VLZXlfID0gbGlzdGVuKHNvdXJjZSwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVTb3VyY2VDaGFuZ2VfLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWxcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2U8QXJyYXk8aW1wb3J0KFwiLi4vRmVhdHVyZVwiKS5kZWZhdWx0Pj59IFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoXG4gICAgICogYW4gYXJyYXkgb2YgZmVhdHVyZXMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldEZlYXR1cmVzID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXR1cm4gcmVzb2x2ZShbXSk7IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5nZXRGZWF0dXJlcyhwaXhlbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbiBjaGFyZ2UgdG8gbWFuYWdlIHRoZSByZW5kZXJpbmcgb2YgdGhlIGxheWVyLiBPbmUgbGF5ZXIgdHlwZSBpc1xuICAgICAqIGJvdW5kZWQgd2l0aCBvbmUgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFRhcmdldCB3aGljaCB0aGUgcmVuZGVyZXIgbWF5IChidXQgbmVlZCBub3QpIHVzZVxuICAgICAqIGZvciByZW5kZXJpbmcgaXRzIGNvbnRlbnQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSByZW5kZXJlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGFyZ2V0KSB7XG4gICAgICAgIHZhciBsYXllclJlbmRlcmVyID0gdGhpcy5nZXRSZW5kZXJlcigpO1xuICAgICAgICBpZiAobGF5ZXJSZW5kZXJlci5wcmVwYXJlRnJhbWUoZnJhbWVTdGF0ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXllclJlbmRlcmVyLnJlbmRlckZyYW1lKGZyYW1lU3RhdGUsIHRhcmdldCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZvciB1c2UgaW5zaWRlIHRoZSBsaWJyYXJ5IG9ubHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0TWFwSW50ZXJuYWwgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuTUFQLCBtYXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRm9yIHVzZSBpbnNpZGUgdGhlIGxpYnJhcnkgb25seS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRNYXBJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUFQKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGxheWVyIHRvIGJlIHJlbmRlcmVkIG9uIHRvcCBvZiBvdGhlciBsYXllcnMgb24gYSBtYXAuIFRoZSBtYXAgd2lsbFxuICAgICAqIG5vdCBtYW5hZ2UgdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgY2FsbGJhY2sgaW5cbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjZm9yRWFjaExheWVyQXRQaXhlbH0gd2lsbCByZWNlaXZlIGBudWxsYCBhcyBsYXllci4gVGhpc1xuICAgICAqIGlzIHVzZWZ1bCBmb3IgdGVtcG9yYXJ5IGxheWVycy4gVG8gcmVtb3ZlIGFuIHVubWFuYWdlZCBsYXllciBmcm9tIHRoZSBtYXAsXG4gICAgICogdXNlIGAjc2V0TWFwKG51bGwpYC5cbiAgICAgKlxuICAgICAqIFRvIGFkZCB0aGUgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwLCB1c2VcbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjYWRkTGF5ZXJ9IGluc3RlYWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgaWYgKHRoaXMubWFwUHJlY29tcG9zZUtleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5tYXBQcmVjb21wb3NlS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW1hcCkge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWFwUmVuZGVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFJlbmRlcktleV8pO1xuICAgICAgICAgICAgdGhpcy5tYXBSZW5kZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWFwKSB7XG4gICAgICAgICAgICB0aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbGlzdGVuKG1hcCwgUmVuZGVyRXZlbnRUeXBlLlBSRUNPTVBPU0UsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyRXZlbnQgPSBcbiAgICAgICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0fSAqLyAoZXZ0KTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IHJlbmRlckV2ZW50LmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZShmYWxzZSk7XG4gICAgICAgICAgICAgICAgLy8gQSBsYXllciBjYW4gb25seSBiZSBhZGRlZCB0byB0aGUgbWFwIG9uY2UuIFVzZSBlaXRoZXIgYGxheWVyLnNldE1hcCgpYCBvciBgbWFwLmFkZExheWVyKClgLCBub3QgYm90aC5cbiAgICAgICAgICAgICAgICBhc3NlcnQoIWxheWVyU3RhdGVzQXJyYXkuc29tZShmdW5jdGlvbiAoYXJyYXlMYXllclN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcnJheUxheWVyU3RhdGUubGF5ZXIgPT09IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICAgICAgfSksIDY3KTtcbiAgICAgICAgICAgICAgICBsYXllclN0YXRlc0FycmF5LnB1c2gobGF5ZXJTdGF0ZSk7XG4gICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMubWFwUmVuZGVyS2V5XyA9IGxpc3Rlbih0aGlzLCBFdmVudFR5cGUuQ0hBTkdFLCBtYXAucmVuZGVyLCBtYXApO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbGF5ZXIgc291cmNlLlxuICAgICAqIEBwYXJhbSB7U291cmNlVHlwZX0gc291cmNlIFRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLnNldFNvdXJjZSA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsIHNvdXJjZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlbmRlcmVyIGZvciB0aGlzIGxheWVyLlxuICAgICAqIEByZXR1cm4ge1JlbmRlcmVyVHlwZX0gVGhlIGxheWVyIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGhhcyBhIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYXNSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtSZW5kZXJlclR5cGV9IEEgbGF5ZXIgcmVuZGVyZXIuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlcl8pIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlbmRlcmVyXztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFNvdXJjZShudWxsKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBMYXllcjtcbn0oQmFzZUxheWVyKSk7XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGxheWVyIGlzIHZpc2libGUgYW5kIGlmIHRoZSBwcm92aWRlZCB2aWV3IHN0YXRlXG4gKiBoYXMgcmVzb2x1dGlvbiBhbmQgem9vbSBsZXZlbHMgdGhhdCBhcmUgaW4gcmFuZ2Ugb2YgdGhlIGxheWVyJ3MgbWluL21heC5cbiAqIEBwYXJhbSB7U3RhdGV9IGxheWVyU3RhdGUgTGF5ZXIgc3RhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuU3RhdGV9IHZpZXdTdGF0ZSBWaWV3IHN0YXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGlzIHZpc2libGUgYXQgdGhlIGdpdmVuIHZpZXcgc3RhdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSB7XG4gICAgaWYgKCFsYXllclN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgIGlmIChyZXNvbHV0aW9uIDwgbGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uIHx8XG4gICAgICAgIHJlc29sdXRpb24gPj0gbGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHpvb20gPSB2aWV3U3RhdGUuem9vbTtcbiAgICByZXR1cm4gem9vbSA+IGxheWVyU3RhdGUubWluWm9vbSAmJiB6b29tIDw9IGxheWVyU3RhdGUubWF4Wm9vbTtcbn1cbmV4cG9ydCBkZWZhdWx0IExheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1RpbGVQcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQUkVMT0FEOiAncHJlbG9hZCcsXG4gICAgVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1I6ICd1c2VJbnRlcmltVGlsZXNPbkVycm9yJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlUHJvcGVydHkuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9CYXNlVGlsZVxuICovXG5pbXBvcnQgTGF5ZXIgZnJvbSAnLi9MYXllci5qcyc7XG5pbXBvcnQgVGlsZVByb3BlcnR5IGZyb20gJy4vVGlsZVByb3BlcnR5LmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3xcbiAqICAgICAnY2hhbmdlOnNvdXJjZSd8J2NoYW5nZTpwcmVsb2FkJ3wnY2hhbmdlOnVzZUludGVyaW1UaWxlc09uRXJyb3InLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICdjaGFuZ2U6c291cmNlJ3wnY2hhbmdlOnByZWxvYWQnfCdjaGFuZ2U6dXNlSW50ZXJpbVRpbGVzT25FcnJvcid8aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5MYXllclJlbmRlckV2ZW50VHlwZXMsIFJldHVybj59IEJhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZVNvdXJjZVR5cGVcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3ByZWxvYWQ9MF0gUHJlbG9hZC4gTG9hZCBsb3ctcmVzb2x1dGlvbiB0aWxlcyB1cCB0byBgcHJlbG9hZGAgbGV2ZWxzLiBgMGBcbiAqIG1lYW5zIG5vIHByZWxvYWRpbmcuXG4gKiBAcHJvcGVydHkge1RpbGVTb3VyY2VUeXBlfSBbc291cmNlXSBTb3VyY2UgZm9yIHRoaXMgbGF5ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBbbWFwXSBTZXRzIHRoZSBsYXllciBhcyBvdmVybGF5IG9uIGEgbWFwLiBUaGUgbWFwIHdpbGwgbm90IG1hbmFnZVxuICogdGhpcyBsYXllciBpbiBpdHMgbGF5ZXJzIGNvbGxlY3Rpb24sIGFuZCB0aGUgbGF5ZXIgd2lsbCBiZSByZW5kZXJlZCBvbiB0b3AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICogdGVtcG9yYXJ5IGxheWVycy4gVGhlIHN0YW5kYXJkIHdheSB0byBhZGQgYSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAgaXMgdG9cbiAqIHVzZSB7QGxpbmsgaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHQjYWRkTGF5ZXIgbWFwLmFkZExheWVyKCl9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdXNlSW50ZXJpbVRpbGVzT25FcnJvcj10cnVlXSBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogRm9yIGxheWVyIHNvdXJjZXMgdGhhdCBwcm92aWRlIHByZS1yZW5kZXJlZCwgdGlsZWQgaW1hZ2VzIGluIGdyaWRzIHRoYXQgYXJlXG4gKiBvcmdhbml6ZWQgYnkgem9vbSBsZXZlbHMgZm9yIHNwZWNpZmljIHJlc29sdXRpb25zLlxuICogTm90ZSB0aGF0IGFueSBwcm9wZXJ0eSBzZXQgaW4gdGhlIG9wdGlvbnMgaXMgc2V0IGFzIGEge0BsaW5rIG1vZHVsZTpvbC9PYmplY3R+QmFzZU9iamVjdH1cbiAqIHByb3BlcnR5IG9uIHRoZSBsYXllciBvYmplY3Q7IGZvciBleGFtcGxlLCBzZXR0aW5nIGB0aXRsZTogJ015IFRpdGxlJ2AgaW4gdGhlXG4gKiBvcHRpb25zIG1lYW5zIHRoYXQgYHRpdGxlYCBpcyBvYnNlcnZhYmxlLCBhbmQgaGFzIGdldC9zZXQgYWNjZXNzb3JzLlxuICpcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZVNvdXJjZVR5cGVcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gUmVuZGVyZXJUeXBlXG4gKiBAZXh0ZW5kcyB7TGF5ZXI8VGlsZVNvdXJjZVR5cGUsIFJlbmRlcmVyVHlwZT59XG4gKiBAYXBpXG4gKi9cbnZhciBCYXNlVGlsZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlVGlsZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uczxUaWxlU291cmNlVHlwZT59IFtvcHRfb3B0aW9uc10gVGlsZSBsYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEJhc2VUaWxlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBiYXNlT3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5wcmVsb2FkO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvcjtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZVRpbGVMYXllck9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICBfdGhpcy5zZXRQcmVsb2FkKG9wdGlvbnMucHJlbG9hZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcmVsb2FkIDogMCk7XG4gICAgICAgIF90aGlzLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3Iob3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy51c2VJbnRlcmltVGlsZXNPbkVycm9yXG4gICAgICAgICAgICA6IHRydWUpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGV2ZWwgYXMgbnVtYmVyIHRvIHdoaWNoIHdlIHdpbGwgcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLmdldFByZWxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FEKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGxldmVsIGFzIG51bWJlciB0byB3aGljaCB3ZSB3aWxsIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgVGhlIGxldmVsIHRvIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuc2V0UHJlbG9hZCA9IGZ1bmN0aW9uIChwcmVsb2FkKSB7XG4gICAgICAgIHRoaXMuc2V0KFRpbGVQcm9wZXJ0eS5QUkVMT0FELCBwcmVsb2FkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZVRpbGVMYXllci5wcm90b3R5cGUuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KFRpbGVQcm9wZXJ0eS5VU0VfSU5URVJJTV9USUxFU19PTl9FUlJPUikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgd2UgdXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1c2VJbnRlcmltVGlsZXNPbkVycm9yIFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLnNldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiAodXNlSW50ZXJpbVRpbGVzT25FcnJvcikge1xuICAgICAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IsIHVzZUludGVyaW1UaWxlc09uRXJyb3IpO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VUaWxlTGF5ZXI7XG59KExheWVyKSk7XG5leHBvcnQgZGVmYXVsdCBCYXNlVGlsZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZVRpbGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9MYXllclxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICcuLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbi8qKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSBMYXllclR5cGVcbiAqL1xudmFyIExheWVyUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKExheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllclR5cGV9IGxheWVyIExheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyUmVuZGVyZXIobGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlSW1hZ2VDaGFuZ2VfID0gX3RoaXMuaGFuZGxlSW1hZ2VDaGFuZ2VfLmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7TGF5ZXJUeXBlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5ZXJfID0gbGF5ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL2NhbnZhcy9FeGVjdXRvckdyb3VwXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWNsdXR0ZXJFeGVjdXRvckdyb3VwID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgbGF5ZXIgbGV2ZWwgaGl0IGRldGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlPEFycmF5PGltcG9ydChcIi4uL0ZlYXR1cmVcIikuZGVmYXVsdD4+fSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aFxuICAgICAqIGFuIGFycmF5IG9mIGZlYXR1cmVzLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEZlYXR1cmVzID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVwYXJlRnJhbWUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlciB0aGUgbGF5ZXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHRoYXQgbWF5IGJlIHVzZWQgdG8gcmVuZGVyIGNvbnRlbnQgdG8uXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSByZW5kZXJlZCBlbGVtZW50LlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5sb2FkZWRUaWxlQ2FsbGJhY2sgPSBmdW5jdGlvbiAodGlsZXMsIHpvb20sIHRpbGUpIHtcbiAgICAgICAgaWYgKCF0aWxlc1t6b29tXSkge1xuICAgICAgICAgICAgdGlsZXNbem9vbV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB0aWxlc1t6b29tXVt0aWxlLnRpbGVDb29yZC50b1N0cmluZygpXSA9IHRpbGU7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBmdW5jdGlvbiB0aGF0IGFkZHMgbG9hZGVkIHRpbGVzIHRvIHRoZSB0aWxlIGxvb2t1cC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24gb2YgdGhlIHRpbGVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAgICogICAgIGNhbGxlZCB3aXRoIGEgem9vbSBsZXZlbCBhbmQgYSB0aWxlIHJhbmdlIHRvIGFkZCBsb2FkZWQgdGlsZXMgdG8gdGhlIGxvb2t1cC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlTG9hZGVkVGlsZUZpbmRlciA9IGZ1bmN0aW9uIChzb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzKSB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgcmFuZ2UgaXMgZnVsbHkgbG9hZGVkLlxuICAgICAgICAgKiBAdGhpcyB7TGF5ZXJSZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uICh6b29tLCB0aWxlUmFuZ2UpIHtcbiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHRoaXMubG9hZGVkVGlsZUNhbGxiYWNrLmJpbmQodGhpcywgdGlsZXMsIHpvb20pO1xuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5mb3JFYWNoTG9hZGVkVGlsZShwcm9qZWN0aW9uLCB6b29tLCB0aWxlUmFuZ2UsIGNhbGxiYWNrKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFjayBGZWF0dXJlIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9NYXAuanNcIikuSGl0TWF0Y2g8VD4+fSBtYXRjaGVzIFRoZSBoaXQgZGV0ZWN0ZWQgbWF0Y2hlcyB3aXRoIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbWF0Y2hlcykge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheX0gVGhlIHJlc3VsdC4gIElmIHRoZXJlIGlzIG5vIGRhdGEgYXQgdGhlIHBpeGVsXG4gICAgICogICAgbG9jYXRpb24sIG51bGwgd2lsbCBiZSByZXR1cm5lZC4gIElmIHRoZXJlIGlzIGRhdGEsIGJ1dCBwaXhlbCB2YWx1ZXMgY2Fubm90IGJlXG4gICAgICogICAgcmV0dXJuZWQsIGFuZCBlbXB0eSBhcnJheSB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldERhdGFBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtMYXllclR5cGV9IExheWVyLlxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldExheWVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXllcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFjdGlvbiBuZWNlc3NhcnkgdG8gZ2V0IHRoZSBsYXllciByZW5kZXJlZCBhZnRlciBuZXcgZm9udHMgaGF2ZSBsb2FkZWRcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5oYW5kbGVGb250c0NoYW5nZWQgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNoYW5nZXMgaW4gaW1hZ2Ugc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgSW1hZ2UgY2hhbmdlIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VDaGFuZ2VfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vSW1hZ2UuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGlmIChpbWFnZS5nZXRTdGF0ZSgpID09PSBJbWFnZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBpbWFnZSBpZiBub3QgYWxyZWFkeSBsb2FkZWQsIGFuZCByZWdpc3RlciB0aGUgaW1hZ2UgY2hhbmdlXG4gICAgICogbGlzdGVuZXIgaWYgbmVlZGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vSW1hZ2VCYXNlLmpzXCIpLmRlZmF1bHR9IGltYWdlIEltYWdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgaW1hZ2UgaXMgYWxyZWFkeSBsb2FkZWQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5sb2FkSW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2UpIHtcbiAgICAgICAgdmFyIGltYWdlU3RhdGUgPSBpbWFnZS5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkxPQURFRCAmJiBpbWFnZVN0YXRlICE9IEltYWdlU3RhdGUuRVJST1IpIHtcbiAgICAgICAgICAgIGltYWdlLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5ib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICBpbWFnZS5sb2FkKCk7XG4gICAgICAgICAgICBpbWFnZVN0YXRlID0gaW1hZ2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW1hZ2VTdGF0ZSA9PSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJJZlJlYWR5QW5kVmlzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICBpZiAobGF5ZXIuZ2V0VmlzaWJsZSgpICYmIGxheWVyLmdldFNvdXJjZVN0YXRlKCkgPT0gU291cmNlU3RhdGUuUkVBRFkpIHtcbiAgICAgICAgICAgIGxheWVyLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIExheWVyUmVuZGVyZXI7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCBkZWZhdWx0IExheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VTdGF0ZVxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBJRExFOiAwLFxuICAgIExPQURJTkc6IDEsXG4gICAgTE9BREVEOiAyLFxuICAgIEVSUk9SOiAzLFxuICAgIEVNUFRZOiA0LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlU3RhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9FdmVudFxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG52YXIgUmVuZGVyRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlbmRlckV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gW29wdF9pbnZlcnNlUGl4ZWxUcmFuc2Zvcm1dIFRyYW5zZm9ybSBmb3JcbiAgICAgKiAgICAgQ1NTIHBpeGVscyB0byByZW5kZXJlZCBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gW29wdF9mcmFtZVN0YXRlXSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0gez8oQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfFdlYkdMUmVuZGVyaW5nQ29udGV4dCl9IFtvcHRfY29udGV4dF0gQ29udGV4dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJFdmVudCh0eXBlLCBvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBvcHRfZnJhbWVTdGF0ZSwgb3B0X2NvbnRleHQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYW5zZm9ybSBmcm9tIENTUyBwaXhlbHMgKHJlbGF0aXZlIHRvIHRoZSB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIG1hcCB2aWV3cG9ydClcbiAgICAgICAgICogdG8gcmVuZGVyZWQgcGl4ZWxzIG9uIHRoaXMgZXZlbnQncyBgY29udGV4dGAuIE9ubHkgYXZhaWxhYmxlIHdoZW4gYSBDYW52YXMgcmVuZGVyZXIgaXMgdXNlZCwgbnVsbCBvdGhlcndpc2UuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtID0gb3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgcmVuZGVyIGZyYW1lIHN0YXRlLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV8dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlID0gb3B0X2ZyYW1lU3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW52YXMgY29udGV4dC4gTm90IGF2YWlsYWJsZSB3aGVuIHRoZSBldmVudCBpcyBkaXNwYXRjaGVkIGJ5IHRoZSBtYXAuIEZvciBDYW52YXMgMkQgbGF5ZXJzLFxuICAgICAgICAgKiB0aGUgY29udGV4dCB3aWxsIGJlIHRoZSAyRCByZW5kZXJpbmcgY29udGV4dC4gIEZvciBXZWJHTCBsYXllcnMsIHRoZSBjb250ZXh0IHdpbGwgYmUgdGhlIFdlYkdMXG4gICAgICAgICAqIGNvbnRleHQuXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8V2ViR0xSZW5kZXJpbmdDb250ZXh0fHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dCA9IG9wdF9jb250ZXh0O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBSZW5kZXJFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlckV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2hhc1xuICovXG52YXIgdWEgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbmF2aWdhdG9yLnVzZXJBZ2VudCAhPT0gJ3VuZGVmaW5lZCdcbiAgICA/IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKVxuICAgIDogJyc7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBGaXJlZm94IGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBGSVJFRk9YID0gdWEuaW5kZXhPZignZmlyZWZveCcpICE9PSAtMTtcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIFNhZmFyaSBhcyBicm93c2VyLlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgU0FGQVJJID0gdWEuaW5kZXhPZignc2FmYXJpJykgIT09IC0xICYmIHVhLmluZGV4T2YoJ2Nocm9tJykgPT0gLTE7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIFdlYktpdCBlbmdpbmUuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBXRUJLSVQgPSB1YS5pbmRleE9mKCd3ZWJraXQnKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignZWRnZScpID09IC0xO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggYSBNYWMgYXMgcGxhdGZvcm0uXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBNQUMgPSB1YS5pbmRleE9mKCdtYWNpbnRvc2gnKSAhPT0gLTE7XG4vKipcbiAqIFRoZSByYXRpbyBiZXR3ZWVuIHBoeXNpY2FsIHBpeGVscyBhbmQgZGV2aWNlLWluZGVwZW5kZW50IHBpeGVsc1xuICogKGRpcHMpIG9uIHRoZSBkZXZpY2UgKGB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb2ApLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIERFVklDRV9QSVhFTF9SQVRJTyA9IHR5cGVvZiBkZXZpY2VQaXhlbFJhdGlvICE9PSAndW5kZWZpbmVkJyA/IGRldmljZVBpeGVsUmF0aW8gOiAxO1xuLyoqXG4gKiBUaGUgZXhlY3V0aW9uIGNvbnRleHQgaXMgYSB3b3JrZXIgd2l0aCBPZmZzY3JlZW5DYW52YXMgYXZhaWxhYmxlLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyA9IHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgT2Zmc2NyZWVuQ2FudmFzICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG4vKipcbiAqIEltYWdlLnByb3RvdHlwZS5kZWNvZGUoKSBpcyBzdXBwb3J0ZWQuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9ERUNPREUgPSB0eXBlb2YgSW1hZ2UgIT09ICd1bmRlZmluZWQnICYmIEltYWdlLnByb3RvdHlwZS5kZWNvZGU7XG4vKipcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcGFzc2l2ZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBvcHRpb25zID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHBhc3NpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdfJywgbnVsbCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBwYXNzaXZlIG5vdCBzdXBwb3J0ZWRcbiAgICB9XG4gICAgcmV0dXJuIHBhc3NpdmU7XG59KSgpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aGFzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90cmFuc2Zvcm1cbiAqL1xuaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBbiBhcnJheSByZXByZXNlbnRpbmcgYW4gYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZvciB1c2Ugd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC90cmFuc2Zvcm19IGZ1bmN0aW9ucy4gVGhlIGFycmF5IGhhcyA2IGVsZW1lbnRzLlxuICogQHR5cGVkZWYgeyFBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBDb2xsZWN0aW9uIG9mIGFmZmluZSAyZCB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMuIFRoZSBmdW5jdGlvbnMgd29yayBvbiBhblxuICogYXJyYXkgb2YgNiBlbGVtZW50cy4gVGhlIGVsZW1lbnQgb3JkZXIgaXMgY29tcGF0aWJsZSB3aXRoIHRoZSBbU1ZHTWF0cml4XG4gKiBpbnRlcmZhY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TVkdNYXRyaXgpIGFuZCBpc1xuICogYSBzdWJzZXQgKGVsZW1lbnRzIGEgdG8gZikgb2YgYSAzw5czIG1hdHJpeDpcbiAqIGBgYFxuICogWyBhIGMgZSBdXG4gKiBbIGIgZCBmIF1cbiAqIFsgMCAwIDEgXVxuICogYGBgXG4gKi9cbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtUcmFuc2Zvcm19XG4gKi9cbnZhciB0bXBfID0gbmV3IEFycmF5KDYpO1xuLyoqXG4gKiBDcmVhdGUgYW4gaWRlbnRpdHkgdHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gSWRlbnRpdHkgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKCkge1xuICAgIHJldHVybiBbMSwgMCwgMCwgMSwgMCwgMF07XG59XG4vKipcbiAqIFJlc2V0cyB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHRvIGFuIGlkZW50aXR5IHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0KHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBzZXQodHJhbnNmb3JtLCAxLCAwLCAwLCAxLCAwLCAwKTtcbn1cbi8qKlxuICogTXVsdGlwbHkgdGhlIHVuZGVybHlpbmcgbWF0cmljZXMgb2YgdHdvIHRyYW5zZm9ybXMgYW5kIHJldHVybiB0aGUgcmVzdWx0IGluXG4gKiB0aGUgZmlyc3QgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIFRyYW5zZm9ybSBwYXJhbWV0ZXJzIG9mIG1hdHJpeCAxLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0yIFRyYW5zZm9ybSBwYXJhbWV0ZXJzIG9mIG1hdHJpeCAyLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBtdWx0aXBsaWVkIHdpdGggdHJhbnNmb3JtMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG11bHRpcGx5KHRyYW5zZm9ybTEsIHRyYW5zZm9ybTIpIHtcbiAgICB2YXIgYTEgPSB0cmFuc2Zvcm0xWzBdO1xuICAgIHZhciBiMSA9IHRyYW5zZm9ybTFbMV07XG4gICAgdmFyIGMxID0gdHJhbnNmb3JtMVsyXTtcbiAgICB2YXIgZDEgPSB0cmFuc2Zvcm0xWzNdO1xuICAgIHZhciBlMSA9IHRyYW5zZm9ybTFbNF07XG4gICAgdmFyIGYxID0gdHJhbnNmb3JtMVs1XTtcbiAgICB2YXIgYTIgPSB0cmFuc2Zvcm0yWzBdO1xuICAgIHZhciBiMiA9IHRyYW5zZm9ybTJbMV07XG4gICAgdmFyIGMyID0gdHJhbnNmb3JtMlsyXTtcbiAgICB2YXIgZDIgPSB0cmFuc2Zvcm0yWzNdO1xuICAgIHZhciBlMiA9IHRyYW5zZm9ybTJbNF07XG4gICAgdmFyIGYyID0gdHJhbnNmb3JtMls1XTtcbiAgICB0cmFuc2Zvcm0xWzBdID0gYTEgKiBhMiArIGMxICogYjI7XG4gICAgdHJhbnNmb3JtMVsxXSA9IGIxICogYTIgKyBkMSAqIGIyO1xuICAgIHRyYW5zZm9ybTFbMl0gPSBhMSAqIGMyICsgYzEgKiBkMjtcbiAgICB0cmFuc2Zvcm0xWzNdID0gYjEgKiBjMiArIGQxICogZDI7XG4gICAgdHJhbnNmb3JtMVs0XSA9IGExICogZTIgKyBjMSAqIGYyICsgZTE7XG4gICAgdHJhbnNmb3JtMVs1XSA9IGIxICogZTIgKyBkMSAqIGYyICsgZjE7XG4gICAgcmV0dXJuIHRyYW5zZm9ybTE7XG59XG4vKipcbiAqIFNldCB0aGUgdHJhbnNmb3JtIGNvbXBvbmVudHMgYS1mIG9uIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGEgVGhlIGEgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYiBUaGUgYiBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjIFRoZSBjIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGQgVGhlIGQgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZSBUaGUgZSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmIFRoZSBmIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gTWF0cml4IHdpdGggdHJhbnNmb3JtIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQodHJhbnNmb3JtLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgdHJhbnNmb3JtWzBdID0gYTtcbiAgICB0cmFuc2Zvcm1bMV0gPSBiO1xuICAgIHRyYW5zZm9ybVsyXSA9IGM7XG4gICAgdHJhbnNmb3JtWzNdID0gZDtcbiAgICB0cmFuc2Zvcm1bNF0gPSBlO1xuICAgIHRyYW5zZm9ybVs1XSA9IGY7XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbi8qKlxuICogU2V0IHRyYW5zZm9ybSBvbiBvbmUgbWF0cml4IGZyb20gYW5vdGhlciBtYXRyaXguXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgTWF0cml4IHRvIHNldCB0cmFuc2Zvcm0gdG8uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgTWF0cml4IHRvIHNldCB0cmFuc2Zvcm0gZnJvbS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgd2l0aCB0cmFuc2Zvcm0gZnJvbSB0cmFuc2Zvcm0yIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRGcm9tQXJyYXkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICAgIHRyYW5zZm9ybTFbMF0gPSB0cmFuc2Zvcm0yWzBdO1xuICAgIHRyYW5zZm9ybTFbMV0gPSB0cmFuc2Zvcm0yWzFdO1xuICAgIHRyYW5zZm9ybTFbMl0gPSB0cmFuc2Zvcm0yWzJdO1xuICAgIHRyYW5zZm9ybTFbM10gPSB0cmFuc2Zvcm0yWzNdO1xuICAgIHRyYW5zZm9ybTFbNF0gPSB0cmFuc2Zvcm0yWzRdO1xuICAgIHRyYW5zZm9ybTFbNV0gPSB0cmFuc2Zvcm0yWzVdO1xuICAgIHJldHVybiB0cmFuc2Zvcm0xO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBjb29yZGluYXRlIHdpdGggdGhlIGdpdmVuIHRyYW5zZm9ybSByZXR1cm5pbmcgdGhlXG4gKiByZXN1bHRpbmcsIHRyYW5zZm9ybWVkIGNvb3JkaW5hdGUuIFRoZSBjb29yZGluYXRlIHdpbGwgYmUgbW9kaWZpZWQgaW4tcGxhY2UuXG4gKlxuICogQHBhcmFtIHtUcmFuc2Zvcm19IHRyYW5zZm9ybSBUaGUgdHJhbnNmb3JtYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfGltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUgdG8gdHJhbnNmb3JtLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcmV0dXJuIGNvb3JkaW5hdGUgc28gdGhhdCBvcGVyYXRpb25zIGNhbiBiZVxuICogICAgIGNoYWluZWQgdG9nZXRoZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseSh0cmFuc2Zvcm0sIGNvb3JkaW5hdGUpIHtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICAgIGNvb3JkaW5hdGVbMF0gPSB0cmFuc2Zvcm1bMF0gKiB4ICsgdHJhbnNmb3JtWzJdICogeSArIHRyYW5zZm9ybVs0XTtcbiAgICBjb29yZGluYXRlWzFdID0gdHJhbnNmb3JtWzFdICogeCArIHRyYW5zZm9ybVszXSAqIHkgKyB0cmFuc2Zvcm1bNV07XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEFwcGxpZXMgcm90YXRpb24gdG8gdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZSBpbiByYWRpYW5zLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHJvdGF0ZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKHRyYW5zZm9ybSwgYW5nbGUpIHtcbiAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIGNvcywgc2luLCAtc2luLCBjb3MsIDAsIDApKTtcbn1cbi8qKlxuICogQXBwbGllcyBzY2FsZSB0byBhIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHkgU2NhbGUgZmFjdG9yIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgc2NhbGVkIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHRyYW5zZm9ybSwgeCwgeSkge1xuICAgIHJldHVybiBtdWx0aXBseSh0cmFuc2Zvcm0sIHNldCh0bXBfLCB4LCAwLCAwLCB5LCAwLCAwKSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBzY2FsZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRhcmdldCBUcmFuc2Zvcm0gdG8gb3ZlcndyaXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlU2NhbGUodGFyZ2V0LCB4LCB5KSB7XG4gICAgcmV0dXJuIHNldCh0YXJnZXQsIHgsIDAsIDAsIHksIDAsIDApO1xufVxuLyoqXG4gKiBBcHBsaWVzIHRyYW5zbGF0aW9uIHRvIHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZHggVHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeSBUcmFuc2xhdGlvbiB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHRyYW5zbGF0ZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKHRyYW5zZm9ybSwgZHgsIGR5KSB7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIDEsIDAsIDAsIDEsIGR4LCBkeSkpO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY29tcG9zaXRlIHRyYW5zZm9ybSBnaXZlbiBhbiBpbml0aWFsIHRyYW5zbGF0aW9uLCBzY2FsZSwgcm90YXRpb24sIGFuZFxuICogZmluYWwgdHJhbnNsYXRpb24gKGluIHRoYXQgb3JkZXIgb25seSwgbm90IGNvbW11dGF0aXZlKS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm0gKHdpbGwgYmUgbW9kaWZpZWQgaW4gcGxhY2UpLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MSBJbml0aWFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkxIEluaXRpYWwgdHJhbnNsYXRpb24geS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeSBTY2FsZSBmYWN0b3IgeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiAoaW4gY291bnRlci1jbG9ja3dpc2UgcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgyIEZpbmFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkyIEZpbmFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgY29tcG9zaXRlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2UodHJhbnNmb3JtLCBkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpIHtcbiAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGUpO1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdHJhbnNmb3JtWzBdID0gc3ggKiBjb3M7XG4gICAgdHJhbnNmb3JtWzFdID0gc3kgKiBzaW47XG4gICAgdHJhbnNmb3JtWzJdID0gLXN4ICogc2luO1xuICAgIHRyYW5zZm9ybVszXSA9IHN5ICogY29zO1xuICAgIHRyYW5zZm9ybVs0XSA9IGR4MiAqIHN4ICogY29zIC0gZHkyICogc3ggKiBzaW4gKyBkeDE7XG4gICAgdHJhbnNmb3JtWzVdID0gZHgyICogc3kgKiBzaW4gKyBkeTIgKiBzeSAqIGNvcyArIGR5MTtcbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgY29tcG9zaXRlIHRyYW5zZm9ybSBnaXZlbiBhbiBpbml0aWFsIHRyYW5zbGF0aW9uLCBzY2FsZSwgcm90YXRpb24sIGFuZFxuICogZmluYWwgdHJhbnNsYXRpb24gKGluIHRoYXQgb3JkZXIgb25seSwgbm90IGNvbW11dGF0aXZlKS4gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1cbiAqIHN0cmluZyBjYW4gYmUgYXBwbGllZCBhcyBgdHJhbnNmb3JtYCBwcm9wZXJ0eSBvZiBhbiBIVE1MRWxlbWVudCdzIHN0eWxlLlxuICogQHBhcmFtIHtudW1iZXJ9IGR4MSBJbml0aWFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkxIEluaXRpYWwgdHJhbnNsYXRpb24geS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeSBTY2FsZSBmYWN0b3IgeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiAoaW4gY291bnRlci1jbG9ja3dpc2UgcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgyIEZpbmFsIHRyYW5zbGF0aW9uIHguXG4gKiBAcGFyYW0ge251bWJlcn0gZHkyIEZpbmFsIHRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjb21wb3NpdGUgY3NzIHRyYW5zZm9ybS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2VDc3NUcmFuc2Zvcm0oZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSB7XG4gICAgcmV0dXJuIHRvU3RyaW5nKGNvbXBvc2UoY3JlYXRlKCksIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5MikpO1xufVxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gc291cmNlIFRoZSBzb3VyY2UgdHJhbnNmb3JtIHRvIGludmVydC5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBpbnZlcnRlZCAoc291cmNlKSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnZlcnQoc291cmNlKSB7XG4gICAgcmV0dXJuIG1ha2VJbnZlcnNlKHNvdXJjZSwgc291cmNlKTtcbn1cbi8qKlxuICogSW52ZXJ0IHRoZSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRhcmdldCBUcmFuc2Zvcm0gdG8gYmUgc2V0IGFzIHRoZSBpbnZlcnNlIG9mXG4gKiAgICAgdGhlIHNvdXJjZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHNvdXJjZSBUaGUgc291cmNlIHRyYW5zZm9ybSB0byBpbnZlcnQuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgaW52ZXJ0ZWQgKHRhcmdldCkgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFrZUludmVyc2UodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICB2YXIgZGV0ID0gZGV0ZXJtaW5hbnQoc291cmNlKTtcbiAgICBhc3NlcnQoZGV0ICE9PSAwLCAzMik7IC8vIFRyYW5zZm9ybWF0aW9uIG1hdHJpeCBjYW5ub3QgYmUgaW52ZXJ0ZWRcbiAgICB2YXIgYSA9IHNvdXJjZVswXTtcbiAgICB2YXIgYiA9IHNvdXJjZVsxXTtcbiAgICB2YXIgYyA9IHNvdXJjZVsyXTtcbiAgICB2YXIgZCA9IHNvdXJjZVszXTtcbiAgICB2YXIgZSA9IHNvdXJjZVs0XTtcbiAgICB2YXIgZiA9IHNvdXJjZVs1XTtcbiAgICB0YXJnZXRbMF0gPSBkIC8gZGV0O1xuICAgIHRhcmdldFsxXSA9IC1iIC8gZGV0O1xuICAgIHRhcmdldFsyXSA9IC1jIC8gZGV0O1xuICAgIHRhcmdldFszXSA9IGEgLyBkZXQ7XG4gICAgdGFyZ2V0WzRdID0gKGMgKiBmIC0gZCAqIGUpIC8gZGV0O1xuICAgIHRhcmdldFs1XSA9IC0oYSAqIGYgLSBiICogZSkgLyBkZXQ7XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgZGV0ZXJtaW5hbnQgb2YgdGhlIGdpdmVuIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gbWF0IE1hdHJpeC5cbiAqIEByZXR1cm4ge251bWJlcn0gRGV0ZXJtaW5hbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudChtYXQpIHtcbiAgICByZXR1cm4gbWF0WzBdICogbWF0WzNdIC0gbWF0WzFdICogbWF0WzJdO1xufVxuLyoqXG4gKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdHJhbnNmb3JtU3RyaW5nRGl2O1xuLyoqXG4gKiBBIHJvdW5kZWQgc3RyaW5nIHZlcnNpb24gb2YgdGhlIHRyYW5zZm9ybS4gIFRoaXMgY2FuIGJlIHVzZWRcbiAqIGZvciBDU1MgdHJhbnNmb3Jtcy5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gbWF0IE1hdHJpeC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHRyYW5zZm9ybSBhcyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nKG1hdCkge1xuICAgIHZhciB0cmFuc2Zvcm1TdHJpbmcgPSAnbWF0cml4KCcgKyBtYXQuam9pbignLCAnKSArICcpJztcbiAgICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybVN0cmluZztcbiAgICB9XG4gICAgdmFyIG5vZGUgPSB0cmFuc2Zvcm1TdHJpbmdEaXYgfHwgKHRyYW5zZm9ybVN0cmluZ0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICBub2RlLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0cmluZztcbiAgICByZXR1cm4gbm9kZS5zdHlsZS50cmFuc2Zvcm07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm0uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbG9yXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEEgY29sb3IgcmVwcmVzZW50ZWQgYXMgYSBzaG9ydCBhcnJheSBbcmVkLCBncmVlbiwgYmx1ZSwgYWxwaGFdLlxuICogcmVkLCBncmVlbiwgYW5kIGJsdWUgc2hvdWxkIGJlIGludGVnZXJzIGluIHRoZSByYW5nZSAwLi4yNTUgaW5jbHVzaXZlLlxuICogYWxwaGEgc2hvdWxkIGJlIGEgZmxvYXQgaW4gdGhlIHJhbmdlIDAuLjEgaW5jbHVzaXZlLiBJZiBubyBhbHBoYSB2YWx1ZSBpc1xuICogZ2l2ZW4gdGhlbiBgMWAgd2lsbCBiZSB1c2VkLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvbG9yXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogVGhpcyBSZWdFeHAgbWF0Y2hlcyAjIGZvbGxvd2VkIGJ5IDMsIDQsIDYsIG9yIDggaGV4IGRpZ2l0cy5cbiAqIEBjb25zdFxuICogQHR5cGUge1JlZ0V4cH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBIRVhfQ09MT1JfUkVfID0gL14jKFthLWYwLTldezN9fFthLWYwLTldezR9KD86W2EtZjAtOV17Mn0pezAsMn0pJC9pO1xuLyoqXG4gKiBSZWd1bGFyIGV4cHJlc3Npb24gZm9yIG1hdGNoaW5nIHBvdGVudGlhbCBuYW1lZCBjb2xvciBzdHlsZSBzdHJpbmdzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIE5BTUVEX0NPTE9SX1JFXyA9IC9eKFthLXpdKikkfF5oc2xhP1xcKC4qXFwpJC9pO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtDb2xvcnxzdHJpbmd9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2JhIHN0cmluZy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzU3RyaW5nKGNvbG9yKSB7XG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nKGNvbG9yKTtcbiAgICB9XG59XG4vKipcbiAqIFJldHVybiBuYW1lZCBjb2xvciBhcyBhbiByZ2JhIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvciBOYW1lZCBjb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gUmdiIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gZnJvbU5hbWVkKGNvbG9yKSB7XG4gICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZWwuc3R5bGUuY29sb3IgPSBjb2xvcjtcbiAgICBpZiAoZWwuc3R5bGUuY29sb3IgIT09ICcnKSB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICB2YXIgcmdiID0gZ2V0Q29tcHV0ZWRTdHlsZShlbCkuY29sb3I7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICByZXR1cm4gcmdiO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICovXG5leHBvcnQgdmFyIGZyb21TdHJpbmcgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdlIG1haW50YWluIGEgc21hbGwgY2FjaGUgb2YgcGFyc2VkIHN0cmluZ3MuICBUbyBwcm92aWRlIGNoZWFwIExSVS1saWtlXG4gICAgLy8gc2VtYW50aWNzLCB3aGVuZXZlciB0aGUgY2FjaGUgZ3Jvd3MgdG9vIGxhcmdlIHdlIHNpbXBseSBkZWxldGUgYW5cbiAgICAvLyBhcmJpdHJhcnkgMjUlIG9mIHRoZSBlbnRyaWVzLlxuICAgIC8qKlxuICAgICAqIEBjb25zdFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdmFyIE1BWF9DQUNIRV9TSVpFID0gMTAyNDtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQ29sb3I+fVxuICAgICAqL1xuICAgIHZhciBjYWNoZSA9IHt9O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdmFyIGNhY2hlU2l6ZSA9IDA7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gICAgICogQHJldHVybiB7Q29sb3J9IENvbG9yLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChzKSB7XG4gICAgICAgIHZhciBjb2xvcjtcbiAgICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KHMpKSB7XG4gICAgICAgICAgICBjb2xvciA9IGNhY2hlW3NdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGNhY2hlU2l6ZSA+PSBNQVhfQ0FDSEVfU0laRSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKChpKysgJiAzKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhY2hlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAtLWNhY2hlU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbG9yID0gZnJvbVN0cmluZ0ludGVybmFsXyhzKTtcbiAgICAgICAgICAgIGNhY2hlW3NdID0gY29sb3I7XG4gICAgICAgICAgICArK2NhY2hlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfSk7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGNvbG9yIGFzIGFuIGFycmF5LiBUaGlzIGZ1bmN0aW9uIG1haW50YWlucyBhIGNhY2hlIG9mIGNhbGN1bGF0ZWRcbiAqIGFycmF5cyB3aGljaCBtZWFucyB0aGUgcmVzdWx0IHNob3VsZCBub3QgYmUgbW9kaWZpZWQuXG4gKiBAcGFyYW0ge0NvbG9yfHN0cmluZ30gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc0FycmF5KGNvbG9yKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoY29sb3IpKSB7XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBmcm9tU3RyaW5nKGNvbG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmZ1bmN0aW9uIGZyb21TdHJpbmdJbnRlcm5hbF8ocykge1xuICAgIHZhciByLCBnLCBiLCBhLCBjb2xvcjtcbiAgICBpZiAoTkFNRURfQ09MT1JfUkVfLmV4ZWMocykpIHtcbiAgICAgICAgcyA9IGZyb21OYW1lZChzKTtcbiAgICB9XG4gICAgaWYgKEhFWF9DT0xPUl9SRV8uZXhlYyhzKSkge1xuICAgICAgICAvLyBoZXhcbiAgICAgICAgdmFyIG4gPSBzLmxlbmd0aCAtIDE7IC8vIG51bWJlciBvZiBoZXggZGlnaXRzXG4gICAgICAgIHZhciBkID0gLy8gbnVtYmVyIG9mIGRpZ2l0cyBwZXIgY2hhbm5lbFxuICAgICAgICAgdm9pZCAwOyAvLyBudW1iZXIgb2YgZGlnaXRzIHBlciBjaGFubmVsXG4gICAgICAgIGlmIChuIDw9IDQpIHtcbiAgICAgICAgICAgIGQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZCA9IDI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhc0FscGhhID0gbiA9PT0gNCB8fCBuID09PSA4O1xuICAgICAgICByID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDAgKiBkLCBkKSwgMTYpO1xuICAgICAgICBnID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDEgKiBkLCBkKSwgMTYpO1xuICAgICAgICBiID0gcGFyc2VJbnQocy5zdWJzdHIoMSArIDIgKiBkLCBkKSwgMTYpO1xuICAgICAgICBpZiAoaGFzQWxwaGEpIHtcbiAgICAgICAgICAgIGEgPSBwYXJzZUludChzLnN1YnN0cigxICsgMyAqIGQsIGQpLCAxNik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhID0gMjU1O1xuICAgICAgICB9XG4gICAgICAgIGlmIChkID09IDEpIHtcbiAgICAgICAgICAgIHIgPSAociA8PCA0KSArIHI7XG4gICAgICAgICAgICBnID0gKGcgPDwgNCkgKyBnO1xuICAgICAgICAgICAgYiA9IChiIDw8IDQpICsgYjtcbiAgICAgICAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICAgICAgICAgIGEgPSAoYSA8PCA0KSArIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29sb3IgPSBbciwgZywgYiwgYSAvIDI1NV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHMuaW5kZXhPZigncmdiYSgnKSA9PSAwKSB7XG4gICAgICAgIC8vIHJnYmEoKVxuICAgICAgICBjb2xvciA9IHMuc2xpY2UoNSwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgICAgIG5vcm1hbGl6ZShjb2xvcik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHMuaW5kZXhPZigncmdiKCcpID09IDApIHtcbiAgICAgICAgLy8gcmdiKClcbiAgICAgICAgY29sb3IgPSBzLnNsaWNlKDQsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgICAgICBjb2xvci5wdXNoKDEpO1xuICAgICAgICBub3JtYWxpemUoY29sb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAxNCk7IC8vIEludmFsaWQgY29sb3JcbiAgICB9XG4gICAgcmV0dXJuIGNvbG9yO1xufVxuLyoqXG4gKiBUT0RPIHRoaXMgZnVuY3Rpb24gaXMgb25seSB1c2VkIGluIHRoZSB0ZXN0LCB3ZSBwcm9iYWJseSBzaG91bGRuJ3QgZXhwb3J0IGl0XG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDbGFtcGVkIGNvbG9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKGNvbG9yKSB7XG4gICAgY29sb3JbMF0gPSBjbGFtcCgoY29sb3JbMF0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgICBjb2xvclsxXSA9IGNsYW1wKChjb2xvclsxXSArIDAuNSkgfCAwLCAwLCAyNTUpO1xuICAgIGNvbG9yWzJdID0gY2xhbXAoKGNvbG9yWzJdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gICAgY29sb3JbM10gPSBjbGFtcChjb2xvclszXSwgMCwgMSk7XG4gICAgcmV0dXJuIGNvbG9yO1xufVxuLyoqXG4gKiBAcGFyYW0ge0NvbG9yfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcoY29sb3IpIHtcbiAgICB2YXIgciA9IGNvbG9yWzBdO1xuICAgIGlmIChyICE9IChyIHwgMCkpIHtcbiAgICAgICAgciA9IChyICsgMC41KSB8IDA7XG4gICAgfVxuICAgIHZhciBnID0gY29sb3JbMV07XG4gICAgaWYgKGcgIT0gKGcgfCAwKSkge1xuICAgICAgICBnID0gKGcgKyAwLjUpIHwgMDtcbiAgICB9XG4gICAgdmFyIGIgPSBjb2xvclsyXTtcbiAgICBpZiAoYiAhPSAoYiB8IDApKSB7XG4gICAgICAgIGIgPSAoYiArIDAuNSkgfCAwO1xuICAgIH1cbiAgICB2YXIgYSA9IGNvbG9yWzNdID09PSB1bmRlZmluZWQgPyAxIDogTWF0aC5yb3VuZChjb2xvclszXSAqIDEwMCkgLyAxMDA7XG4gICAgcmV0dXJuICdyZ2JhKCcgKyByICsgJywnICsgZyArICcsJyArIGIgKyAnLCcgKyBhICsgJyknO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBzdHJpbmcgaXMgYWN0dWFsbHkgYSB2YWxpZCBjb2xvclxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmdDb2xvcihzKSB7XG4gICAgaWYgKE5BTUVEX0NPTE9SX1JFXy50ZXN0KHMpKSB7XG4gICAgICAgIHMgPSBmcm9tTmFtZWQocyk7XG4gICAgfVxuICAgIHJldHVybiAoSEVYX0NPTE9SX1JFXy50ZXN0KHMpIHx8IHMuaW5kZXhPZigncmdiYSgnKSA9PT0gMCB8fCBzLmluZGV4T2YoJ3JnYignKSA9PT0gMCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb2xvci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50L0Nvcm5lclxuICovXG4vKipcbiAqIEV4dGVudCBjb3JuZXIuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQk9UVE9NX0xFRlQ6ICdib3R0b20tbGVmdCcsXG4gICAgQk9UVE9NX1JJR0hUOiAnYm90dG9tLXJpZ2h0JyxcbiAgICBUT1BfTEVGVDogJ3RvcC1sZWZ0JyxcbiAgICBUT1BfUklHSFQ6ICd0b3AtcmlnaHQnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvcm5lci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50XG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBSZWxhdGlvbnNoaXAgZnJvbSAnLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGFuIGV4dGVudDogYFttaW54LCBtaW55LCBtYXh4LCBtYXh5XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gRXh0ZW50XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQnVpbGQgYW4gZXh0ZW50IHRoYXQgaW5jbHVkZXMgYWxsIGdpdmVuIGNvb3JkaW5hdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gQm91bmRpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYm91bmRpbmdFeHRlbnQoY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geHMgWHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHlzIFlzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmZ1bmN0aW9uIF9ib3VuZGluZ0V4dGVudFhZcyh4cywgeXMsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWluLmFwcGx5KG51bGwsIHhzKTtcbiAgICB2YXIgbWluWSA9IE1hdGgubWluLmFwcGx5KG51bGwsIHlzKTtcbiAgICB2YXIgbWF4WCA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHhzKTtcbiAgICB2YXIgbWF4WSA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHlzKTtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIFJldHVybiBleHRlbnQgaW5jcmVhc2VkIGJ5IHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBhbW91bnQgYnkgd2hpY2ggdGhlIGV4dGVudCBzaG91bGQgYmUgYnVmZmVyZWQuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyKGV4dGVudCwgdmFsdWUsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdIC0gdmFsdWU7XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBleHRlbnRbMV0gLSB2YWx1ZTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IGV4dGVudFsyXSArIHZhbHVlO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdICsgdmFsdWU7XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGV4dGVudFswXSAtIHZhbHVlLFxuICAgICAgICAgICAgZXh0ZW50WzFdIC0gdmFsdWUsXG4gICAgICAgICAgICBleHRlbnRbMl0gKyB2YWx1ZSxcbiAgICAgICAgICAgIGV4dGVudFszXSArIHZhbHVlLFxuICAgICAgICBdO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIGFuIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudCB0byBjbG9uZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBUaGUgY2xvbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShleHRlbnQsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBleHRlbnQuc2xpY2UoKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENsb3Nlc3Qgc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWShleHRlbnQsIHgsIHkpIHtcbiAgICB2YXIgZHgsIGR5O1xuICAgIGlmICh4IDwgZXh0ZW50WzBdKSB7XG4gICAgICAgIGR4ID0gZXh0ZW50WzBdIC0geDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzJdIDwgeCkge1xuICAgICAgICBkeCA9IHggLSBleHRlbnRbMl07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeCA9IDA7XG4gICAgfVxuICAgIGlmICh5IDwgZXh0ZW50WzFdKSB7XG4gICAgICAgIGR5ID0gZXh0ZW50WzFdIC0geTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzNdIDwgeSkge1xuICAgICAgICBkeSA9IHkgLSBleHRlbnRbM107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIGluIHRoZSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0Nvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgb25lIGV4dGVudCBjb250YWlucyBhbm90aGVyLlxuICpcbiAqIEFuIGV4dGVudCBpcyBkZWVtZWQgY29udGFpbmVkIGlmIGl0IGxpZXMgY29tcGxldGVseSB3aXRoaW4gdGhlIG90aGVyIGV4dGVudCxcbiAqIGluY2x1ZGluZyBpZiB0aGV5IHNoYXJlIG9uZSBvciBtb3JlIGVkZ2VzLlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2Vjb25kIGV4dGVudCBpcyBjb250YWluZWQgYnkgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlXG4gKiAgICAgZmlyc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0V4dGVudChleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdIDw9IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MlsyXSA8PSBleHRlbnQxWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQyWzNdIDw9IGV4dGVudDFbM10pO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geSBZIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgeCwgeSB2YWx1ZXMgYXJlIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNYWShleHRlbnQsIHgsIHkpIHtcbiAgICByZXR1cm4gZXh0ZW50WzBdIDw9IHggJiYgeCA8PSBleHRlbnRbMl0gJiYgZXh0ZW50WzFdIDw9IHkgJiYgeSA8PSBleHRlbnRbM107XG59XG4vKipcbiAqIEdldCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYSBjb29yZGluYXRlIGFuZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLmRlZmF1bHR9IFRoZSByZWxhdGlvbnNoaXAgKGJpdHdpc2UgY29tcGFyZSB3aXRoXG4gKiAgICAgaW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLlJlbGF0aW9uc2hpcCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5VTktOT1dOO1xuICAgIGlmICh4IDwgbWluWCkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuTEVGVDtcbiAgICB9XG4gICAgZWxzZSBpZiAoeCA+IG1heFgpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLlJJR0hUO1xuICAgIH1cbiAgICBpZiAoeSA8IG1pblkpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkJFTE9XO1xuICAgIH1cbiAgICBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuQUJPVkU7XG4gICAgfVxuICAgIGlmIChyZWxhdGlvbnNoaXAgPT09IFJlbGF0aW9uc2hpcC5VTktOT1dOKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkc7XG4gICAgfVxuICAgIHJldHVybiByZWxhdGlvbnNoaXA7XG59XG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEVtcHR5IGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtcHR5KCkge1xuICAgIHJldHVybiBbSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eV07XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBleHRlbnQgb3IgdXBkYXRlIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCkge1xuICAgIGlmIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIG9wdF9leHRlbnRbMF0gPSBtaW5YO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gbWluWTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IG1heFg7XG4gICAgICAgIG9wdF9leHRlbnRbM10gPSBtYXhZO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV07XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZW1wdHkgZXh0ZW50IG9yIG1ha2UgdGhlIHByb3ZpZGVkIG9uZSBlbXB0eS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpIHtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eSwgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZSh4LCB5LCB4LCB5LCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCk7XG4gICAgcmV0dXJuIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgY29vcmRpbmF0ZXMpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21SaW5ncyhyaW5ncywgb3B0X2V4dGVudCkge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICAgIHJldHVybiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBhcmUgZXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdID09IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MVsyXSA9PSBleHRlbnQyWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPT0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQxWzNdID09IGV4dGVudDJbM10pO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGFwcHJveGltYXRlbHkgZXF1aXZhbGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZSBpbiBleHRlbnQgY29vcmRpbmF0ZSB1bml0cy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBkaWZmZXIgYnkgbGVzcyB0aGFuIHRoZSB0b2xlcmFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHByb3hpbWF0ZWx5RXF1YWxzKGV4dGVudDEsIGV4dGVudDIsIHRvbGVyYW5jZSkge1xuICAgIHJldHVybiAoTWF0aC5hYnMoZXh0ZW50MVswXSAtIGV4dGVudDJbMF0pIDwgdG9sZXJhbmNlICYmXG4gICAgICAgIE1hdGguYWJzKGV4dGVudDFbMl0gLSBleHRlbnQyWzJdKSA8IHRvbGVyYW5jZSAmJlxuICAgICAgICBNYXRoLmFicyhleHRlbnQxWzFdIC0gZXh0ZW50MlsxXSkgPCB0b2xlcmFuY2UgJiZcbiAgICAgICAgTWF0aC5hYnMoZXh0ZW50MVszXSAtIGV4dGVudDJbM10pIDwgdG9sZXJhbmNlKTtcbn1cbi8qKlxuICogTW9kaWZ5IGFuIGV4dGVudCB0byBpbmNsdWRlIGFub3RoZXIgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgVGhlIGV4dGVudCB0byBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIFRoZSBleHRlbnQgdGhhdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBmaXJzdC5cbiAqIEByZXR1cm4ge0V4dGVudH0gQSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IChleHRlbmRlZCkgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICBpZiAoZXh0ZW50MlswXSA8IGV4dGVudDFbMF0pIHtcbiAgICAgICAgZXh0ZW50MVswXSA9IGV4dGVudDJbMF07XG4gICAgfVxuICAgIGlmIChleHRlbnQyWzJdID4gZXh0ZW50MVsyXSkge1xuICAgICAgICBleHRlbnQxWzJdID0gZXh0ZW50MlsyXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDJbMV0gPCBleHRlbnQxWzFdKSB7XG4gICAgICAgIGV4dGVudDFbMV0gPSBleHRlbnQyWzFdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MlszXSA+IGV4dGVudDFbM10pIHtcbiAgICAgICAgZXh0ZW50MVszXSA9IGV4dGVudDJbM107XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQxO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPCBleHRlbnRbMF0pIHtcbiAgICAgICAgZXh0ZW50WzBdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPiBleHRlbnRbMl0pIHtcbiAgICAgICAgZXh0ZW50WzJdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPCBleHRlbnRbMV0pIHtcbiAgICAgICAgZXh0ZW50WzFdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPiBleHRlbnRbM10pIHtcbiAgICAgICAgZXh0ZW50WzNdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIGNvb3JkaW5hdGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgZXh0ZW5kWFkoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmluZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIHJpbmdzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFhZKGV4dGVudCwgeCwgeSkge1xuICAgIGV4dGVudFswXSA9IE1hdGgubWluKGV4dGVudFswXSwgeCk7XG4gICAgZXh0ZW50WzFdID0gTWF0aC5taW4oZXh0ZW50WzFdLCB5KTtcbiAgICBleHRlbnRbMl0gPSBNYXRoLm1heChleHRlbnRbMl0sIHgpO1xuICAgIGV4dGVudFszXSA9IE1hdGgubWF4KGV4dGVudFszXSwgeSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXQgdmFsdWVcbiAqIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFN9IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHJldHVybiB7U3xib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBTXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoQ29ybmVyKGV4dGVudCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdmFsO1xuICAgIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbUxlZnQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICB2YWwgPSBjYWxsYmFjayhnZXRCb3R0b21SaWdodChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHZhbCA9IGNhbGxiYWNrKGdldFRvcFJpZ2h0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0VG9wTGVmdChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogR2V0IHRoZSBzaXplIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShleHRlbnQpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgaWYgKCFpc0VtcHR5KGV4dGVudCkpIHtcbiAgICAgICAgYXJlYSA9IGdldFdpZHRoKGV4dGVudCkgKiBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIEdldCB0aGUgYm90dG9tIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tTGVmdChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFswXSwgZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSBib3R0b20gcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdHRvbVJpZ2h0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIGNlbnRlciBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENlbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcihleHRlbnQpIHtcbiAgICByZXR1cm4gWyhleHRlbnRbMF0gKyBleHRlbnRbMl0pIC8gMiwgKGV4dGVudFsxXSArIGV4dGVudFszXSkgLyAyXTtcbn1cbi8qKlxuICogR2V0IGEgY29ybmVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBjb3JuZXIgQ29ybmVyLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvcm5lciBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSB7XG4gICAgdmFyIGNvb3JkaW5hdGU7XG4gICAgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9MRUZUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9SSUdIVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX0xFRlQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX1JJR0hUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAxMyk7IC8vIEludmFsaWQgY29ybmVyXG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmxhcmdlZCBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5sYXJnZWRBcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWluKGV4dGVudDFbMF0sIGV4dGVudDJbMF0pO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4oZXh0ZW50MVsxXSwgZXh0ZW50MlsxXSk7XG4gICAgdmFyIG1heFggPSBNYXRoLm1heChleHRlbnQxWzJdLCBleHRlbnQyWzJdKTtcbiAgICB2YXIgbWF4WSA9IE1hdGgubWF4KGV4dGVudDFbM10sIGV4dGVudDJbM10pO1xuICAgIHJldHVybiAobWF4WCAtIG1pblgpICogKG1heFkgLSBtaW5ZKTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yVmlld0FuZFNpemUoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSwgb3B0X2V4dGVudCkge1xuICAgIHZhciBkeCA9IChyZXNvbHV0aW9uICogc2l6ZVswXSkgLyAyO1xuICAgIHZhciBkeSA9IChyZXNvbHV0aW9uICogc2l6ZVsxXSkgLyAyO1xuICAgIHZhciBjb3NSb3RhdGlvbiA9IE1hdGguY29zKHJvdGF0aW9uKTtcbiAgICB2YXIgc2luUm90YXRpb24gPSBNYXRoLnNpbihyb3RhdGlvbik7XG4gICAgdmFyIHhDb3MgPSBkeCAqIGNvc1JvdGF0aW9uO1xuICAgIHZhciB4U2luID0gZHggKiBzaW5Sb3RhdGlvbjtcbiAgICB2YXIgeUNvcyA9IGR5ICogY29zUm90YXRpb247XG4gICAgdmFyIHlTaW4gPSBkeSAqIHNpblJvdGF0aW9uO1xuICAgIHZhciB4ID0gY2VudGVyWzBdO1xuICAgIHZhciB5ID0gY2VudGVyWzFdO1xuICAgIHZhciB4MCA9IHggLSB4Q29zICsgeVNpbjtcbiAgICB2YXIgeDEgPSB4IC0geENvcyAtIHlTaW47XG4gICAgdmFyIHgyID0geCArIHhDb3MgLSB5U2luO1xuICAgIHZhciB4MyA9IHggKyB4Q29zICsgeVNpbjtcbiAgICB2YXIgeTAgPSB5IC0geFNpbiAtIHlDb3M7XG4gICAgdmFyIHkxID0geSAtIHhTaW4gKyB5Q29zO1xuICAgIHZhciB5MiA9IHkgKyB4U2luICsgeUNvcztcbiAgICB2YXIgeTMgPSB5ICsgeFNpbiAtIHlDb3M7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKE1hdGgubWluKHgwLCB4MSwgeDIsIHgzKSwgTWF0aC5taW4oeTAsIHkxLCB5MiwgeTMpLCBNYXRoLm1heCh4MCwgeDEsIHgyLCB4MyksIE1hdGgubWF4KHkwLCB5MSwgeTIsIHkzKSwgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIEdldCB0aGUgaGVpZ2h0IG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWlnaHQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFszXSAtIGV4dGVudFsxXTtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJzZWN0aW9uIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb25BcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudDEsIGV4dGVudDIpO1xuICAgIHJldHVybiBnZXRBcmVhKGludGVyc2VjdGlvbik7XG59XG4vKipcbiAqIEdldCB0aGUgaW50ZXJzZWN0aW9uIG9mIHR3byBleHRlbnRzLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gT3B0aW9uYWwgZXh0ZW50IHRvIHBvcHVsYXRlIHdpdGggaW50ZXJzZWN0aW9uLlxuICogQHJldHVybiB7RXh0ZW50fSBJbnRlcnNlY3RpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudDEsIGV4dGVudDIsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gb3B0X2V4dGVudCA/IG9wdF9leHRlbnQgOiBjcmVhdGVFbXB0eSgpO1xuICAgIGlmIChpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpKSB7XG4gICAgICAgIGlmIChleHRlbnQxWzBdID4gZXh0ZW50MlswXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MVswXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblswXSA9IGV4dGVudDJbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dGVudDFbMV0gPiBleHRlbnQyWzFdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQxWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzFdID0gZXh0ZW50MlsxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50MVsyXSA8IGV4dGVudDJbMl0pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDFbMl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMl0gPSBleHRlbnQyWzJdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnQxWzNdIDwgZXh0ZW50MlszXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MVszXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblszXSA9IGV4dGVudDJbM107XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNyZWF0ZU9yVXBkYXRlRW1wdHkoaW50ZXJzZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1hcmdpbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmdpbihleHRlbnQpIHtcbiAgICByZXR1cm4gZ2V0V2lkdGgoZXh0ZW50KSArIGdldEhlaWdodChleHRlbnQpO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNpemUgKHdpZHRoLCBoZWlnaHQpIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBUaGUgZXh0ZW50IHNpemUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaXplKGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdIC0gZXh0ZW50WzBdLCBleHRlbnRbM10gLSBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIHRvcCBsZWZ0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIGxlZnQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcExlZnQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMF0sIGV4dGVudFszXV07XG59XG4vKipcbiAqIEdldCB0aGUgdG9wIHJpZ2h0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIHJpZ2h0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BSaWdodChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFsyXSwgZXh0ZW50WzNdXTtcbn1cbi8qKlxuICogR2V0IHRoZSB3aWR0aCBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaWR0aChleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzJdIC0gZXh0ZW50WzBdO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgb25lIGV4dGVudCBpbnRlcnNlY3RzIGFub3RoZXIuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBpbnRlcnNlY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICByZXR1cm4gKGV4dGVudDFbMF0gPD0gZXh0ZW50MlsyXSAmJlxuICAgICAgICBleHRlbnQxWzJdID49IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MVsxXSA8PSBleHRlbnQyWzNdICYmXG4gICAgICAgIGV4dGVudDFbM10gPj0gZXh0ZW50MlsxXSk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiBhbiBleHRlbnQgaXMgZW1wdHkuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzJdIDwgZXh0ZW50WzBdIHx8IGV4dGVudFszXSA8IGV4dGVudFsxXTtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuT3JVcGRhdGUoZXh0ZW50LCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXTtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IGV4dGVudFsyXTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUZyb21DZW50ZXIoZXh0ZW50LCB2YWx1ZSkge1xuICAgIHZhciBkZWx0YVggPSAoKGV4dGVudFsyXSAtIGV4dGVudFswXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIHZhciBkZWx0YVkgPSAoKGV4dGVudFszXSAtIGV4dGVudFsxXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIGV4dGVudFswXSAtPSBkZWx0YVg7XG4gICAgZXh0ZW50WzJdICs9IGRlbHRhWDtcbiAgICBleHRlbnRbMV0gLT0gZGVsdGFZO1xuICAgIGV4dGVudFszXSArPSBkZWx0YVk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgc2VnbWVudCBiZXR3ZWVuIHR3byBjb29yZGluYXRlcyBpbnRlcnNlY3RzIChjcm9zc2VzLFxuICogdG91Y2hlcywgb3IgaXMgY29udGFpbmVkIGJ5KSB0aGUgcHJvdmlkZWQgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gc3RhcnQgU2VnbWVudCBzdGFydCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZW5kIFNlZ21lbnQgZW5kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2VnbWVudCBpbnRlcnNlY3RzIHRoZSBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzU2VnbWVudChleHRlbnQsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaW50ZXJzZWN0cyA9IGZhbHNlO1xuICAgIHZhciBzdGFydFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBzdGFydCk7XG4gICAgdmFyIGVuZFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBlbmQpO1xuICAgIGlmIChzdGFydFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORyB8fFxuICAgICAgICBlbmRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcpIHtcbiAgICAgICAgaW50ZXJzZWN0cyA9IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICAgICAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gICAgICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgICAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHN0YXJ0WzBdO1xuICAgICAgICB2YXIgc3RhcnRZID0gc3RhcnRbMV07XG4gICAgICAgIHZhciBlbmRYID0gZW5kWzBdO1xuICAgICAgICB2YXIgZW5kWSA9IGVuZFsxXTtcbiAgICAgICAgdmFyIHNsb3BlID0gKGVuZFkgLSBzdGFydFkpIC8gKGVuZFggLSBzdGFydFgpO1xuICAgICAgICB2YXIgeCA9IHZvaWQgMCwgeSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKCEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkgJiYgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgdG9wXG4gICAgICAgICAgICB4ID0gZW5kWCAtIChlbmRZIC0gbWF4WSkgLyBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB4ID49IG1pblggJiYgeCA8PSBtYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyAmJlxuICAgICAgICAgICAgISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKSAmJlxuICAgICAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgcmlnaHRcbiAgICAgICAgICAgIHkgPSBlbmRZIC0gKGVuZFggLSBtYXhYKSAqIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpICYmXG4gICAgICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkJFTE9XKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBib3R0b21cbiAgICAgICAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtaW5ZKSAvIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkgJiZcbiAgICAgICAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgbGVmdFxuICAgICAgICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1pblgpICogc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW50ZXJzZWN0cztcbn1cbi8qKlxuICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIENhbGxlZCB3aXRoIGBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV1gIGV4dGVudCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3RvcHNdIE51bWJlciBvZiBzdG9wcyBwZXIgc2lkZSB1c2VkIGZvciB0aGUgdHJhbnNmb3JtLlxuICogQnkgZGVmYXVsdCBvbmx5IHRoZSBjb3JuZXJzIGFyZSB1c2VkLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVRyYW5zZm9ybShleHRlbnQsIHRyYW5zZm9ybUZuLCBvcHRfZXh0ZW50LCBvcHRfc3RvcHMpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBbXTtcbiAgICBpZiAob3B0X3N0b3BzID4gMSkge1xuICAgICAgICB2YXIgd2lkdGggPSBleHRlbnRbMl0gLSBleHRlbnRbMF07XG4gICAgICAgIHZhciBoZWlnaHQgPSBleHRlbnRbM10gLSBleHRlbnRbMV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0X3N0b3BzOyArK2kpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLnB1c2goZXh0ZW50WzBdICsgKHdpZHRoICogaSkgLyBvcHRfc3RvcHMsIGV4dGVudFsxXSwgZXh0ZW50WzJdLCBleHRlbnRbMV0gKyAoaGVpZ2h0ICogaSkgLyBvcHRfc3RvcHMsIGV4dGVudFsyXSAtICh3aWR0aCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbM10sIGV4dGVudFswXSwgZXh0ZW50WzNdIC0gKGhlaWdodCAqIGkpIC8gb3B0X3N0b3BzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBbXG4gICAgICAgICAgICBleHRlbnRbMF0sXG4gICAgICAgICAgICBleHRlbnRbMV0sXG4gICAgICAgICAgICBleHRlbnRbMl0sXG4gICAgICAgICAgICBleHRlbnRbMV0sXG4gICAgICAgICAgICBleHRlbnRbMl0sXG4gICAgICAgICAgICBleHRlbnRbM10sXG4gICAgICAgICAgICBleHRlbnRbMF0sXG4gICAgICAgICAgICBleHRlbnRbM10sXG4gICAgICAgIF07XG4gICAgfVxuICAgIHRyYW5zZm9ybUZuKGNvb3JkaW5hdGVzLCBjb29yZGluYXRlcywgMik7XG4gICAgdmFyIHhzID0gW107XG4gICAgdmFyIHlzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgeHMucHVzaChjb29yZGluYXRlc1tpXSk7XG4gICAgICAgIHlzLnB1c2goY29vcmRpbmF0ZXNbaSArIDFdKTtcbiAgICB9XG4gICAgcmV0dXJuIF9ib3VuZGluZ0V4dGVudFhZcyh4cywgeXMsIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBNb2RpZmllcyB0aGUgcHJvdmlkZWQgZXh0ZW50IGluLXBsYWNlIHRvIGJlIHdpdGhpbiB0aGUgcmVhbCB3b3JsZFxuICogZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb25cbiAqIEByZXR1cm4ge0V4dGVudH0gVGhlIGV4dGVudCB3aXRoaW4gdGhlIHJlYWwgd29ybGQgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgoZXh0ZW50LCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHZhciBjZW50ZXIgPSBnZXRDZW50ZXIoZXh0ZW50KTtcbiAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpICYmXG4gICAgICAgIChjZW50ZXJbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdIHx8IGNlbnRlclswXSA+PSBwcm9qZWN0aW9uRXh0ZW50WzJdKSkge1xuICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICB2YXIgd29ybGRzQXdheSA9IE1hdGguZmxvb3IoKGNlbnRlclswXSAtIHByb2plY3Rpb25FeHRlbnRbMF0pIC8gd29ybGRXaWR0aCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSB3b3JsZHNBd2F5ICogd29ybGRXaWR0aDtcbiAgICAgICAgZXh0ZW50WzBdIC09IG9mZnNldDtcbiAgICAgICAgZXh0ZW50WzJdIC09IG9mZnNldDtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4dGVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50L1JlbGF0aW9uc2hpcFxuICovXG4vKipcbiAqIFJlbGF0aW9uc2hpcCB0byBhbiBleHRlbnQuXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgVU5LTk9XTjogMCxcbiAgICBJTlRFUlNFQ1RJTkc6IDEsXG4gICAgQUJPVkU6IDIsXG4gICAgUklHSFQ6IDQsXG4gICAgQkVMT1c6IDgsXG4gICAgTEVGVDogMTYsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVsYXRpb25zaGlwLmpzLm1hcCIsImltcG9ydCB7IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIH0gZnJvbSAnLi9oYXMuanMnO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2RvbVxuICovXG4vL0ZJWE1FIE1vdmUgdGhpcyBmdW5jdGlvbiB0byB0aGUgY2FudmFzIG1vZHVsZVxuLyoqXG4gKiBDcmVhdGUgYW4gaHRtbCBjYW52YXMgZWxlbWVudCBhbmQgcmV0dXJucyBpdHMgMmQgY29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3dpZHRoXSBDYW52YXMgd2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9oZWlnaHRdIENhbnZhcyBoZWlnaHQuXG4gKiBAcGFyYW0ge0FycmF5PEhUTUxDYW52YXNFbGVtZW50Pn0gW29wdF9jYW52YXNQb29sXSBDYW52YXMgcG9vbCB0byB0YWtlIGV4aXN0aW5nIGNhbnZhcyBmcm9tLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc30gW29wdF9Db250ZXh0MkRTZXR0aW5nc10gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEU2V0dGluZ3NcbiAqIEByZXR1cm4ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gVGhlIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXNDb250ZXh0MkQob3B0X3dpZHRoLCBvcHRfaGVpZ2h0LCBvcHRfY2FudmFzUG9vbCwgb3B0X0NvbnRleHQyRFNldHRpbmdzKSB7XG4gICAgLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxPZmZzY3JlZW5DYW52YXN9ICovXG4gICAgdmFyIGNhbnZhcztcbiAgICBpZiAob3B0X2NhbnZhc1Bvb2wgJiYgb3B0X2NhbnZhc1Bvb2wubGVuZ3RoKSB7XG4gICAgICAgIGNhbnZhcyA9IG9wdF9jYW52YXNQb29sLnNoaWZ0KCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTKSB7XG4gICAgICAgIGNhbnZhcyA9IG5ldyBPZmZzY3JlZW5DYW52YXMob3B0X3dpZHRoIHx8IDMwMCwgb3B0X2hlaWdodCB8fCAzMDApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgfVxuICAgIGlmIChvcHRfd2lkdGgpIHtcbiAgICAgICAgY2FudmFzLndpZHRoID0gb3B0X3dpZHRoO1xuICAgIH1cbiAgICBpZiAob3B0X2hlaWdodCkge1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gb3B0X2hlaWdodDtcbiAgICB9XG4gICAgLy9GSVhNRSBBbGxvdyBPZmZzY3JlZW5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgYXMgcmV0dXJuIHR5cGVcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9ICovIChjYW52YXMuZ2V0Q29udGV4dCgnMmQnLCBvcHRfQ29udGV4dDJEU2V0dGluZ3MpKTtcbn1cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIHdpZHRoIGZvciB0aGUgZ2l2ZW4gZWxlbWVudCBpbmNsdWRpbmcgbWFyZ2luLFxuICogcGFkZGluZyBhbmQgYm9yZGVyLlxuICogRXF1aXZhbGVudCB0byBqUXVlcnkncyBgJChlbCkub3V0ZXJXaWR0aCh0cnVlKWAuXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgd2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRlcldpZHRoKGVsZW1lbnQpIHtcbiAgICB2YXIgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG4gICAgd2lkdGggKz0gcGFyc2VJbnQoc3R5bGUubWFyZ2luTGVmdCwgMTApICsgcGFyc2VJbnQoc3R5bGUubWFyZ2luUmlnaHQsIDEwKTtcbiAgICByZXR1cm4gd2lkdGg7XG59XG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBjb21wdXRlZCBoZWlnaHQgZm9yIHRoZSBnaXZlbiBlbGVtZW50IGluY2x1ZGluZyBtYXJnaW4sXG4gKiBwYWRkaW5nIGFuZCBib3JkZXIuXG4gKiBFcXVpdmFsZW50IHRvIGpRdWVyeSdzIGAkKGVsKS5vdXRlckhlaWdodCh0cnVlKWAuXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudCBFbGVtZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaGVpZ2h0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0ZXJIZWlnaHQoZWxlbWVudCkge1xuICAgIHZhciBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgIGhlaWdodCArPSBwYXJzZUludChzdHlsZS5tYXJnaW5Ub3AsIDEwKSArIHBhcnNlSW50KHN0eWxlLm1hcmdpbkJvdHRvbSwgMTApO1xuICAgIHJldHVybiBoZWlnaHQ7XG59XG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbmV3Tm9kZSBOb2RlIHRvIHJlcGxhY2Ugb2xkIG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gb2xkTm9kZSBUaGUgbm9kZSB0byBiZSByZXBsYWNlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZU5vZGUobmV3Tm9kZSwgb2xkTm9kZSkge1xuICAgIHZhciBwYXJlbnQgPSBvbGROb2RlLnBhcmVudE5vZGU7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKG5ld05vZGUsIG9sZE5vZGUpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBub2RlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm4ge05vZGV9IFRoZSBub2RlIHRoYXQgd2FzIHJlbW92ZWQgb3IgbnVsbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICAgIHJldHVybiBub2RlICYmIG5vZGUucGFyZW50Tm9kZSA/IG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKSA6IG51bGw7XG59XG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmUgdGhlIGNoaWxkcmVuIGZyb20uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbihub2RlKSB7XG4gICAgd2hpbGUgKG5vZGUubGFzdENoaWxkKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5sYXN0Q2hpbGQpO1xuICAgIH1cbn1cbi8qKlxuICogVHJhbnNmb3JtIHRoZSBjaGlsZHJlbiBvZiBhIHBhcmVudCBub2RlIHNvIHRoZXkgbWF0Y2ggdGhlXG4gKiBwcm92aWRlZCBsaXN0IG9mIGNoaWxkcmVuLiAgVGhpcyBmdW5jdGlvbiBhaW1zIHRvIGVmZmljaWVudGx5XG4gKiByZW1vdmUsIGFkZCwgYW5kIHJlb3JkZXIgY2hpbGQgbm9kZXMgd2hpbGUgbWFpbnRhaW5pbmcgYSBzaW1wbGVcbiAqIGltcGxlbWVudGF0aW9uIChpdCBpcyBub3QgZ3VhcmFudGVlZCB0byBtaW5pbWl6ZSBET00gb3BlcmF0aW9ucykuXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIHBhcmVudCBub2RlIHdob3NlIGNoaWxkcmVuIG5lZWQgcmV3b3JraW5nLlxuICogQHBhcmFtIHtBcnJheTxOb2RlPn0gY2hpbGRyZW4gVGhlIGRlc2lyZWQgY2hpbGRyZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXBsYWNlQ2hpbGRyZW4obm9kZSwgY2hpbGRyZW4pIHtcbiAgICB2YXIgb2xkQ2hpbGRyZW4gPSBub2RlLmNoaWxkTm9kZXM7XG4gICAgZm9yICh2YXIgaSA9IDA7IHRydWU7ICsraSkge1xuICAgICAgICB2YXIgb2xkQ2hpbGQgPSBvbGRDaGlsZHJlbltpXTtcbiAgICAgICAgdmFyIG5ld0NoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIC8vIGNoZWNrIGlmIG91ciB3b3JrIGlzIGRvbmVcbiAgICAgICAgaWYgKCFvbGRDaGlsZCAmJiAhbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGNoaWxkcmVuIG1hdGNoXG4gICAgICAgIGlmIChvbGRDaGlsZCA9PT0gbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGEgbmV3IGNoaWxkIG5lZWRzIHRvIGJlIGFkZGVkXG4gICAgICAgIGlmICghb2xkQ2hpbGQpIHtcbiAgICAgICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQobmV3Q2hpbGQpO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hlY2sgaWYgYW4gb2xkIGNoaWxkIG5lZWRzIHRvIGJlIHJlbW92ZWRcbiAgICAgICAgaWYgKCFuZXdDaGlsZCkge1xuICAgICAgICAgICAgbm9kZS5yZW1vdmVDaGlsZChvbGRDaGlsZCk7XG4gICAgICAgICAgICAtLWk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW9yZGVyXG4gICAgICAgIG5vZGUuaW5zZXJ0QmVmb3JlKG5ld0NoaWxkLCBvbGRDaGlsZCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZG9tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvY2FudmFzL0xheWVyXG4gKi9cbmltcG9ydCBMYXllclJlbmRlcmVyIGZyb20gJy4uL0xheWVyLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudCBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnQuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi8uLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGFzQXJyYXkgfSBmcm9tICcuLi8uLi9jb2xvci5qcyc7XG5pbXBvcnQgeyBjb250YWluc0Nvb3JkaW5hdGUsIGdldEJvdHRvbUxlZnQsIGdldEJvdHRvbVJpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRUb3BSaWdodCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbi8qKlxuICogQGFic3RyYWN0XG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyVHlwZVxuICogQGV4dGVuZHMge0xheWVyUmVuZGVyZXI8TGF5ZXJUeXBlPn1cbiAqL1xudmFyIENhbnZhc0xheWVyUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc0xheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllclR5cGV9IGxheWVyIExheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0xheWVyUmVuZGVyZXIobGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbGF5ZXIpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRlbXBvcmFyeSB0cmFuc2Zvcm0uICBUaGUgdmFsdWVzIGluIHRoaXMgdHJhbnNmb3JtIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gYVxuICAgICAgICAgKiBmdW5jdGlvbiB0aGF0IHNldHMgdGhlIHZhbHVlcy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRlbXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHJlbmRlcmVkIHBpeGVscyB0byB2aWV3cG9ydCBDU1MgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAgICAgKiBiZSBzZXQgd2hlbiByZW5kZXJpbmcgYSBmcmFtZSBhbmQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZnVuY3Rpb25zIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHJhbnNmb3JtIGZvciB2aWV3cG9ydCBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy4gIFRoaXMgdHJhbnNmb3JtIG11c3RcbiAgICAgICAgICogYmUgc2V0IHdoZW4gcmVuZGVyaW5nIGEgZnJhbWUgYW5kIG1heSBiZSB1c2VkIGJ5IG90aGVyIGZ1bmN0aW9ucyBhZnRlciByZW5kZXJpbmcuXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGFpbmVyUmV1c2VkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxDb250ZXh0XyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoJy4uLy4uL1BsdWdnYWJsZU1hcC5qcycpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBCYWNrZ3JvdW5kIGNvbG9yLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEJhY2tncm91bmQgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciBiYWNrZ3JvdW5kID0gbGF5ZXIuZ2V0QmFja2dyb3VuZCgpO1xuICAgICAgICBpZiAodHlwZW9mIGJhY2tncm91bmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQgPSBiYWNrZ3JvdW5kKGZyYW1lU3RhdGUudmlld1N0YXRlLnJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYWNrZ3JvdW5kIHx8IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHJlbmRlcmluZyBjb250YWluZXIgZnJvbSBhbiBleGlzdGluZyB0YXJnZXQsIGlmIGNvbXBhdGlibGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFBvdGVudGlhbCByZW5kZXIgdGFyZ2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0cmFuc2Zvcm0gQ1NTIFRyYW5zZm9ybS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0X2JhY2tncm91bmRDb2xvcl0gQmFja2dyb3VuZCBjb2xvci5cbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS51c2VDb250YWluZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCB0cmFuc2Zvcm0sIG9wYWNpdHksIG9wdF9iYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgdmFyIGxheWVyQ2xhc3NOYW1lID0gdGhpcy5nZXRMYXllcigpLmdldENsYXNzTmFtZSgpO1xuICAgICAgICB2YXIgY29udGFpbmVyLCBjb250ZXh0O1xuICAgICAgICBpZiAodGFyZ2V0ICYmXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NOYW1lID09PSBsYXllckNsYXNzTmFtZSAmJlxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLm9wYWNpdHkgPT09ICcnICYmXG4gICAgICAgICAgICBvcGFjaXR5ID09PSAxICYmXG4gICAgICAgICAgICAoIW9wdF9iYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgICAgICAgICAodGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciAmJlxuICAgICAgICAgICAgICAgICAgICBlcXVhbHMoYXNBcnJheSh0YXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yKSwgYXNBcnJheShvcHRfYmFja2dyb3VuZENvbG9yKSkpKSkge1xuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IHRhcmdldC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmIChjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0LmNhbnZhcy5zdHlsZS50cmFuc2Zvcm0gPT09IHRyYW5zZm9ybSkge1xuICAgICAgICAgICAgLy8gQ29udGFpbmVyIG9mIHRoZSBwcmV2aW91cyBsYXllciByZW5kZXJlciBjYW4gYmUgdXNlZC5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gdGFyZ2V0O1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmV1c2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmNvbnRhaW5lclJldXNlZCkge1xuICAgICAgICAgICAgLy8gUHJldmlvdXNseSByZXVzZWQgY29udGFpbmVyIGNhbm5vdCBiZSB1c2VkIGFueSBtb3JlLlxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyUmV1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gbGF5ZXJDbGFzc05hbWU7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBjb250YWluZXIuc3R5bGU7XG4gICAgICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgICAgIGlmIChvcHRfYmFja2dyb3VuZENvbG9yKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuYmFja2dyb3VuZENvbG9yID0gb3B0X2JhY2tncm91bmRDb2xvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoKTtcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSBjb250ZXh0LmNhbnZhcztcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgICAgICAgc3R5bGUgPSBjYW52YXMuc3R5bGU7XG4gICAgICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICAgICAgc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gJ3RvcCBsZWZ0JztcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IENsaXAgZXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5jbGlwVW5yb3RhdGVkID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUsIGV4dGVudCkge1xuICAgICAgICB2YXIgdG9wTGVmdCA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICAgICAgdmFyIHRvcFJpZ2h0ID0gZ2V0VG9wUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICAgICAgdmFyIGJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIHRvcExlZnQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0b3BSaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGJvdHRvbVJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tTGVmdCk7XG4gICAgICAgIHZhciBpbnZlcnRlZCA9IHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShpbnZlcnRlZCwgdG9wTGVmdCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCB0b3BSaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21SaWdodCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCBib3R0b21MZWZ0KTtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgIGNvbnRleHQubW92ZVRvKE1hdGgucm91bmQodG9wTGVmdFswXSksIE1hdGgucm91bmQodG9wTGVmdFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKHRvcFJpZ2h0WzBdKSwgTWF0aC5yb3VuZCh0b3BSaWdodFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzBdKSwgTWF0aC5yb3VuZChib3R0b21SaWdodFsxXSkpO1xuICAgICAgICBjb250ZXh0LmxpbmVUbyhNYXRoLnJvdW5kKGJvdHRvbUxlZnRbMF0pLCBNYXRoLnJvdW5kKGJvdHRvbUxlZnRbMV0pKTtcbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3JlbmRlci9FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBFdmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmRpc3BhdGNoUmVuZGVyRXZlbnRfID0gZnVuY3Rpb24gKHR5cGUsIGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICBpZiAobGF5ZXIuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBldmVudF8xID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCBmcmFtZVN0YXRlLCBjb250ZXh0KTtcbiAgICAgICAgICAgIGxheWVyLmRpc3BhdGNoRXZlbnQoZXZlbnRfMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlUmVuZGVyID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUFJFUkVOREVSLCBjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucG9zdFJlbmRlciA9IGZ1bmN0aW9uIChjb250ZXh0LCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudF8oUmVuZGVyRXZlbnRUeXBlLlBPU1RSRU5ERVIsIGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRyYW5zZm9ybSBmb3IgcmVuZGVyaW5nIHRvIGFuIGVsZW1lbnQgdGhhdCB3aWxsIGJlIHJvdGF0ZWQgYWZ0ZXIgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aCBXaWR0aCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgcmVuZGVyZWQgZWxlbWVudCAoaW4gcGl4ZWxzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCBPZmZzZXQgb24gdGhlIHgtYXhpcyBpbiB2aWV3IGNvb3JkaW5hdGVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFJlbmRlclRyYW5zZm9ybSA9IGZ1bmN0aW9uIChjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBwaXhlbFJhdGlvLCB3aWR0aCwgaGVpZ2h0LCBvZmZzZXRYKSB7XG4gICAgICAgIHZhciBkeDEgPSB3aWR0aCAvIDI7XG4gICAgICAgIHZhciBkeTEgPSBoZWlnaHQgLyAyO1xuICAgICAgICB2YXIgc3ggPSBwaXhlbFJhdGlvIC8gcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIHN5ID0gLXN4O1xuICAgICAgICB2YXIgZHgyID0gLWNlbnRlclswXSArIG9mZnNldFg7XG4gICAgICAgIHZhciBkeTIgPSAtY2VudGVyWzFdO1xuICAgICAgICByZXR1cm4gY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIC1yb3RhdGlvbiwgZHgyLCBkeTIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHJldHVybiB7VWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheX0gVGhlIHJlc3VsdC4gIElmIHRoZXJlIGlzIG5vIGRhdGEgYXQgdGhlIHBpeGVsXG4gICAgICogICAgbG9jYXRpb24sIG51bGwgd2lsbCBiZSByZXR1cm5lZC4gIElmIHRoZXJlIGlzIGRhdGEsIGJ1dCBwaXhlbCB2YWx1ZXMgY2Fubm90IGJlXG4gICAgICogICAgcmV0dXJuZWQsIGFuZCBlbXB0eSBhcnJheSB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldERhdGFBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHJlbmRlclBpeGVsID0gYXBwbHlUcmFuc2Zvcm0odGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIHBpeGVsLnNsaWNlKCkpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xuICAgICAgICB2YXIgbGF5ZXJFeHRlbnQgPSBsYXllci5nZXRFeHRlbnQoKTtcbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyQ29vcmRpbmF0ZSA9IGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0sIHBpeGVsLnNsaWNlKCkpO1xuICAgICAgICAgICAgLyoqIGdldCBvbmx5IGRhdGEgaW5zaWRlIG9mIHRoZSBsYXllciBleHRlbnQgKi9cbiAgICAgICAgICAgIGlmICghY29udGFpbnNDb29yZGluYXRlKGxheWVyRXh0ZW50LCByZW5kZXJDb29yZGluYXRlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChyZW5kZXJQaXhlbFswXSk7XG4gICAgICAgIHZhciB5ID0gTWF0aC5yb3VuZChyZW5kZXJQaXhlbFsxXSk7XG4gICAgICAgIHZhciBwaXhlbENvbnRleHQgPSB0aGlzLnBpeGVsQ29udGV4dF87XG4gICAgICAgIGlmICghcGl4ZWxDb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgcGl4ZWxDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIHBpeGVsQ2FudmFzLndpZHRoID0gMTtcbiAgICAgICAgICAgIHBpeGVsQ2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgICAgICBwaXhlbENvbnRleHQgPSBwaXhlbENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgdGhpcy5waXhlbENvbnRleHRfID0gcGl4ZWxDb250ZXh0O1xuICAgICAgICB9XG4gICAgICAgIHBpeGVsQ29udGV4dC5jbGVhclJlY3QoMCwgMCwgMSwgMSk7XG4gICAgICAgIHZhciBkYXRhO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGl4ZWxDb250ZXh0LmRyYXdJbWFnZShjb250ZXh0LmNhbnZhcywgeCwgeSwgMSwgMSwgMCwgMCwgMSwgMSk7XG4gICAgICAgICAgICBkYXRhID0gcGl4ZWxDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gJ1NlY3VyaXR5RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgLy8gdGFpbnRlZCBjYW52YXMsIHdlIGFzc3VtZSB0aGVyZSBpcyBkYXRhIGF0IHRoZSBnaXZlbiBwaXhlbCAoYWx0aG91Z2ggdGhlcmUgbWlnaHQgbm90IGJlKVxuICAgICAgICAgICAgICAgIHRoaXMucGl4ZWxDb250ZXh0XyA9IG51bGw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YVszXSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfTtcbiAgICByZXR1cm4gQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbn0oTGF5ZXJSZW5kZXJlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzTGF5ZXJSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9UaWxlUmFuZ2VcbiAqL1xuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIGEgY29udGlndW91cyBibG9jayBvZiB0aWxlcy4gIEEgdGlsZSByYW5nZSBpcyBzcGVjaWZpZWRcbiAqIGJ5IGl0cyBtaW4vbWF4IHRpbGUgY29vcmRpbmF0ZXMgYW5kIGlzIGluY2x1c2l2ZSBvZiBjb29yZGluYXRlcy5cbiAqL1xudmFyIFRpbGVSYW5nZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFggTWF4aW11bSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFkpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblggPSBtaW5YO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5ZID0gbWluWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFkgPSBtYXhZO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbnNYWSh0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWluc1RpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblggPD0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRpbGVSYW5nZS5tYXhYIDw9IHRoaXMubWF4WCAmJlxuICAgICAgICAgICAgdGhpcy5taW5ZIDw9IHRpbGVSYW5nZS5taW5ZICYmXG4gICAgICAgICAgICB0aWxlUmFuZ2UubWF4WSA8PSB0aGlzLm1heFkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgY29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmNvbnRhaW5zWFkgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW5YIDw9IHggJiYgeCA8PSB0aGlzLm1heFggJiYgdGhpcy5taW5ZIDw9IHkgJiYgeSA8PSB0aGlzLm1heFk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gRXF1YWxzLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICByZXR1cm4gKHRoaXMubWluWCA9PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgICAgICAgdGhpcy5taW5ZID09IHRpbGVSYW5nZS5taW5ZICYmXG4gICAgICAgICAgICB0aGlzLm1heFggPT0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgICAgICAgIHRoaXMubWF4WSA9PSB0aWxlUmFuZ2UubWF4WSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWluWCA8IHRoaXMubWluWCkge1xuICAgICAgICAgICAgdGhpcy5taW5YID0gdGlsZVJhbmdlLm1pblg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVSYW5nZS5tYXhYID4gdGhpcy5tYXhYKSB7XG4gICAgICAgICAgICB0aGlzLm1heFggPSB0aWxlUmFuZ2UubWF4WDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZVJhbmdlLm1pblkgPCB0aGlzLm1pblkpIHtcbiAgICAgICAgICAgIHRoaXMubWluWSA9IHRpbGVSYW5nZS5taW5ZO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWF4WSA+IHRoaXMubWF4WSkge1xuICAgICAgICAgICAgdGhpcy5tYXhZID0gdGlsZVJhbmdlLm1heFk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gSGVpZ2h0LlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhZIC0gdGhpcy5taW5ZICsgMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBTaXplLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCldO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBXaWR0aC5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhYIC0gdGhpcy5taW5YICsgMTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7VGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJbnRlcnNlY3RzLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuaW50ZXJzZWN0cyA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblggPD0gdGlsZVJhbmdlLm1heFggJiZcbiAgICAgICAgICAgIHRoaXMubWF4WCA+PSB0aWxlUmFuZ2UubWluWCAmJlxuICAgICAgICAgICAgdGhpcy5taW5ZIDw9IHRpbGVSYW5nZS5tYXhZICYmXG4gICAgICAgICAgICB0aGlzLm1heFkgPj0gdGlsZVJhbmdlLm1pblkpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVSYW5nZTtcbn0oKSk7XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YIE1pbmltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZIE1pbmltdW0gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZIE1heGltdW0gWS5cbiAqIEBwYXJhbSB7VGlsZVJhbmdlfSBbdGlsZVJhbmdlXSBUaWxlUmFuZ2UuXG4gKiBAcmV0dXJuIHtUaWxlUmFuZ2V9IFRpbGUgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZLCB0aWxlUmFuZ2UpIHtcbiAgICBpZiAodGlsZVJhbmdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGlsZVJhbmdlLm1pblggPSBtaW5YO1xuICAgICAgICB0aWxlUmFuZ2UubWF4WCA9IG1heFg7XG4gICAgICAgIHRpbGVSYW5nZS5taW5ZID0gbWluWTtcbiAgICAgICAgdGlsZVJhbmdlLm1heFkgPSBtYXhZO1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgVGlsZVJhbmdlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVJhbmdlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvY29tbW9uXG4gKi9cbi8qKlxuICogQ29udGV4dCBvcHRpb25zIHRvIGRpc2FibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgPSB7XG4gICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkOiBmYWxzZSxcbiAgICBtc0ltYWdlU21vb3RoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuLyoqXG4gKiBDb250ZXh0IG9wdGlvbnMgdG8gZW5hYmxlIGltYWdlIHNtb290aGluZy5cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbmV4cG9ydCB2YXIgSU1BR0VfU01PT1RISU5HX0VOQUJMRUQgPSB7XG4gICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkOiB0cnVlLFxuICAgIG1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkOiB0cnVlLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY3NzXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRm9udFBhcmFtZXRlcnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzdHlsZSBTdHlsZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB2YXJpYW50IFZhcmlhbnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gd2VpZ2h0IFdlaWdodC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzaXplIFNpemUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbGluZUhlaWdodCBMaW5lSGVpZ2h0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGZhbWlseSBGYW1pbHkuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IGZhbWlsaWVzIEZhbWlsaWVzLlxuICovXG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGhpZGRlbiBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19ISURERU4gPSAnb2wtaGlkZGVuJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0byBoYXZlIHRoZW0gc2VsZWN0YWJsZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfU0VMRUNUQUJMRSA9ICdvbC1zZWxlY3RhYmxlJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0byBoYXZlIHRoZW0gdW5zZWxlY3RhYmxlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19VTlNFTEVDVEFCTEUgPSAnb2wtdW5zZWxlY3RhYmxlJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgdW5zdXBwb3J0ZWQgZmVhdHVyZS5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfVU5TVVBQT1JURUQgPSAnb2wtdW5zdXBwb3J0ZWQnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciBjb250cm9scy5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgQ0xBU1NfQ09OVFJPTCA9ICdvbC1jb250cm9sJztcbi8qKlxuICogVGhlIENTUyBjbGFzcyB0aGF0IHdlJ2xsIGdpdmUgdGhlIERPTSBlbGVtZW50cyB0aGF0IGFyZSBjb2xsYXBzZWQsIGkuZS5cbiAqIHRvIHRob3NlIGVsZW1lbnRzIHdoaWNoIHVzdWFsbHkgY2FuIGJlIGV4cGFuZGVkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19DT0xMQVBTRUQgPSAnb2wtY29sbGFwc2VkJztcbi8qKlxuICogRnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDEzNTY5Ny9yZWdleC10by1wYXJzZS1hbnktY3NzLWZvbnRcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKi9cbnZhciBmb250UmVnRXggPSBuZXcgUmVnRXhwKFtcbiAgICAnXlxcXFxzKig/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oaXRhbGljfG9ibGlxdWUpKT8pJyxcbiAgICAnKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShzbWFsbC1jYXBzKSk/KScsXG4gICAgJyg/PSg/Oig/OlstYS16XStcXFxccyopezAsMn0oYm9sZCg/OmVyKT98bGlnaHRlcnxbMS05XTAwICkpPyknLFxuICAgICcoPzooPzpub3JtYWx8XFxcXDF8XFxcXDJ8XFxcXDMpXFxcXHMqKXswLDN9KCg/Onh4Py0pPycsXG4gICAgJyg/OnNtYWxsfGxhcmdlKXxtZWRpdW18c21hbGxlcnxsYXJnZXJ8W1xcXFwuXFxcXGRdKyg/OlxcXFwlfGlufFtjZW1dbXxleHxwW2N0eF0pKScsXG4gICAgJyg/OlxcXFxzKlxcXFwvXFxcXHMqKG5vcm1hbHxbXFxcXC5cXFxcZF0rKD86XFxcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSk/KSknLFxuICAgICc/XFxcXHMqKFstLFxcXFxcIlxcXFxcXCdcXFxcc2Etel0rPylcXFxccyokJyxcbl0uam9pbignJyksICdpJyk7XG52YXIgZm9udFJlZ0V4TWF0Y2hJbmRleCA9IFtcbiAgICAnc3R5bGUnLFxuICAgICd2YXJpYW50JyxcbiAgICAnd2VpZ2h0JyxcbiAgICAnc2l6ZScsXG4gICAgJ2xpbmVIZWlnaHQnLFxuICAgICdmYW1pbHknLFxuXTtcbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIGZvbnQgZmFtaWxpZXMgZnJvbSBhIGZvbnQgc3BlYy4gIE5vdGUgdGhhdCB0aGlzIGRvZXNuJ3Qgd29ya1xuICogZm9yIGZvbnQgZmFtaWxpZXMgdGhhdCBoYXZlIGNvbW1hcyBpbiB0aGVtLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTcGVjIFRoZSBDU1MgZm9udCBwcm9wZXJ0eS5cbiAqIEByZXR1cm4ge0ZvbnRQYXJhbWV0ZXJzfSBUaGUgZm9udCBwYXJhbWV0ZXJzIChvciBudWxsIGlmIHRoZSBpbnB1dCBzcGVjIGlzIGludmFsaWQpLlxuICovXG5leHBvcnQgdmFyIGdldEZvbnRQYXJhbWV0ZXJzID0gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgdmFyIG1hdGNoID0gZm9udFNwZWMubWF0Y2goZm9udFJlZ0V4KTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgc3R5bGUgPSAvKiogQHR5cGUge0ZvbnRQYXJhbWV0ZXJzfSAqLyAoe1xuICAgICAgICBsaW5lSGVpZ2h0OiAnbm9ybWFsJyxcbiAgICAgICAgc2l6ZTogJzEuMmVtJyxcbiAgICAgICAgc3R5bGU6ICdub3JtYWwnLFxuICAgICAgICB3ZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICB2YXJpYW50OiAnbm9ybWFsJyxcbiAgICB9KTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmb250UmVnRXhNYXRjaEluZGV4Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbaSArIDFdO1xuICAgICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3R5bGVbZm9udFJlZ0V4TWF0Y2hJbmRleFtpXV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdHlsZS5mYW1pbGllcyA9IHN0eWxlLmZhbWlseS5zcGxpdCgvLFxccz8vKTtcbiAgICByZXR1cm4gc3R5bGU7XG59O1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5ICgwLi4xKS5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ1NTIG9wYWNpdHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjc3NPcGFjaXR5KG9wYWNpdHkpIHtcbiAgICByZXR1cm4gb3BhY2l0eSA9PT0gMSA/ICcnIDogU3RyaW5nKE1hdGgucm91bmQob3BhY2l0eSAqIDEwMCkgLyAxMDApO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y3NzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL1VuaXRzXG4gKi9cbi8qKlxuICogUHJvamVjdGlvbiB1bml0czogYCdkZWdyZWVzJ2AsIGAnZnQnYCwgYCdtJ2AsIGAncGl4ZWxzJ2AsIGAndGlsZS1waXhlbHMnYCBvclxuICogYCd1cy1mdCdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xudmFyIFVuaXRzID0ge1xuICAgIC8qKlxuICAgICAqIFJhZGlhbnNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUkFESUFOUzogJ3JhZGlhbnMnLFxuICAgIC8qKlxuICAgICAqIERlZ3JlZXNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgREVHUkVFUzogJ2RlZ3JlZXMnLFxuICAgIC8qKlxuICAgICAqIEZlZXRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRkVFVDogJ2Z0JyxcbiAgICAvKipcbiAgICAgKiBNZXRlcnNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTUVURVJTOiAnbScsXG4gICAgLyoqXG4gICAgICogUGl4ZWxzXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBJWEVMUzogJ3BpeGVscycsXG4gICAgLyoqXG4gICAgICogVGlsZSBQaXhlbHNcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRV9QSVhFTFM6ICd0aWxlLXBpeGVscycsXG4gICAgLyoqXG4gICAgICogVVMgRmVldFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVU0ZFRVQ6ICd1cy1mdCcsXG59O1xuLyoqXG4gKiBTZWUgaHR0cDovL2R1ZmYuZXNzLndhc2hpbmd0b24uZWR1L2RhdGEvcmFzdGVyL2RyZy9kb2NzL2dlb3RpZmYudHh0XG4gKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgVW5pdHM+fVxuICovXG52YXIgdW5pdEJ5Q29kZSA9IHtcbiAgICAnOTAwMSc6IFVuaXRzLk1FVEVSUyxcbiAgICAnOTAwMic6IFVuaXRzLkZFRVQsXG4gICAgJzkwMDMnOiBVbml0cy5VU0ZFRVQsXG4gICAgJzkxMDEnOiBVbml0cy5SQURJQU5TLFxuICAgICc5MTAyJzogVW5pdHMuREVHUkVFUyxcbn07XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlIFVuaXQgY29kZS5cbiAqIEByZXR1cm4ge1VuaXRzfSBVbml0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Db2RlKGNvZGUpIHtcbiAgICByZXR1cm4gdW5pdEJ5Q29kZVtjb2RlXTtcbn1cbi8qKlxuICogTWV0ZXJzIHBlciB1bml0IGxvb2t1cCB0YWJsZS5cbiAqIEBjb25zdFxuICogQHR5cGUge09iamVjdDxVbml0cywgbnVtYmVyPn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBNRVRFUlNfUEVSX1VOSVQgPSB7fTtcbi8vIHVzZSB0aGUgcmFkaXVzIG9mIHRoZSBOb3JtYWwgc3BoZXJlXG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuUkFESUFOU10gPSA2MzcwOTk3IC8gKDIgKiBNYXRoLlBJKTtcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5ERUdSRUVTXSA9ICgyICogTWF0aC5QSSAqIDYzNzA5OTcpIC8gMzYwO1xuTUVURVJTX1BFUl9VTklUW1VuaXRzLkZFRVRdID0gMC4zMDQ4O1xuTUVURVJTX1BFUl9VTklUW1VuaXRzLk1FVEVSU10gPSAxO1xuTUVURVJTX1BFUl9VTklUW1VuaXRzLlVTRkVFVF0gPSAxMjAwIC8gMzkzNztcbmV4cG9ydCBkZWZhdWx0IFVuaXRzO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5pdHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovUHJvamVjdGlvblxuICovXG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQgfSBmcm9tICcuL1VuaXRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvZGUgVGhlIFNSUyBpZGVudGlmaWVyIGNvZGUsIGUuZy4gYEVQU0c6NDMyNmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdHxzdHJpbmd9IFt1bml0c10gVW5pdHMuIFJlcXVpcmVkIHVubGVzcyBhXG4gKiBwcm9qNCBwcm9qZWN0aW9uIGlzIGRlZmluZWQgZm9yIGBjb2RlYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhlIFNSUy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbYXhpc09yaWVudGF0aW9uPSdlbnUnXSBUaGUgYXhpcyBvcmllbnRhdGlvbiBhcyBzcGVjaWZpZWQgaW4gUHJvajQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtnbG9iYWw9ZmFsc2VdIFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgdmFsaWQgZm9yIHRoZSB3aG9sZSBnbG9iZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWV0ZXJzUGVyVW5pdF0gVGhlIG1ldGVycyBwZXIgdW5pdCBmb3IgdGhlIFNSUy5cbiAqIElmIG5vdCBwcm92aWRlZCwgdGhlIGB1bml0c2AgYXJlIHVzZWQgdG8gZ2V0IHRoZSBtZXRlcnMgcGVyIHVuaXQgZnJvbSB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1VuaXRzfk1FVEVSU19QRVJfVU5JVH1cbiAqIGxvb2t1cCB0YWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW3dvcmxkRXh0ZW50XSBUaGUgd29ybGQgZXh0ZW50IGZvciB0aGUgU1JTLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfSBbZ2V0UG9pbnRSZXNvbHV0aW9uXVxuICogRnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHJlc29sdXRpb24gYXQgYSBwb2ludC4gVGhlIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFcbiAqIGBudW1iZXJgIHZpZXcgcmVzb2x1dGlvbiBhbmQgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZSBDb29yZGluYXRlfSBhcyBhcmd1bWVudHMsIGFuZCByZXR1cm5zXG4gKiB0aGUgYG51bWJlcmAgcmVzb2x1dGlvbiBpbiBwcm9qZWN0aW9uIHVuaXRzIGF0IHRoZSBwYXNzZWQgY29vcmRpbmF0ZS4gSWYgdGhpcyBpcyBgdW5kZWZpbmVkYCxcbiAqIHRoZSBkZWZhdWx0IHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXRQb2ludFJlc29sdXRpb24gZ2V0UG9pbnRSZXNvbHV0aW9uKCl9IGZ1bmN0aW9uIHdpbGwgYmUgdXNlZC5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIGRlZmluaXRpb24gY2xhc3MuIE9uZSBvZiB0aGVzZSBpcyBjcmVhdGVkIGZvciBlYWNoIHByb2plY3Rpb25cbiAqIHN1cHBvcnRlZCBpbiB0aGUgYXBwbGljYXRpb24gYW5kIHN0b3JlZCBpbiB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qfSBuYW1lc3BhY2UuXG4gKiBZb3UgY2FuIHVzZSB0aGVzZSBpbiBhcHBsaWNhdGlvbnMsIGJ1dCB0aGlzIGlzIG5vdCByZXF1aXJlZCwgYXMgQVBJIHBhcmFtc1xuICogYW5kIG9wdGlvbnMgdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvan5Qcm9qZWN0aW9uTGlrZX0gd2hpY2ggbWVhbnMgdGhlIHNpbXBsZSBzdHJpbmdcbiAqIGNvZGUgd2lsbCBzdWZmaWNlLlxuICpcbiAqIFlvdSBjYW4gdXNlIHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXR9IHRvIHJldHJpZXZlIHRoZSBvYmplY3QgZm9yIGEgcGFydGljdWxhclxuICogcHJvamVjdGlvbi5cbiAqXG4gKiBUaGUgbGlicmFyeSBpbmNsdWRlcyBkZWZpbml0aW9ucyBmb3IgYEVQU0c6NDMyNmAgYW5kIGBFUFNHOjM4NTdgLCB0b2dldGhlclxuICogd2l0aCB0aGUgZm9sbG93aW5nIGFsaWFzZXM6XG4gKiAqIGBFUFNHOjQzMjZgOiBDUlM6ODQsIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2LFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0LCB1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQsXG4gKiAgICAgaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYsXG4gKiAgICAgdXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XG4gKiAqIGBFUFNHOjM4NTdgOiBFUFNHOjEwMjEwMCwgRVBTRzoxMDIxMTMsIEVQU0c6OTAwOTEzLFxuICogICAgIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3LFxuICogICAgIGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3XG4gKlxuICogSWYgeW91IHVzZSBbcHJvajRqc10oaHR0cHM6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcyksIGFsaWFzZXMgY2FuXG4gKiBiZSBhZGRlZCB1c2luZyBgcHJvajQuZGVmcygpYC4gQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlXG4gKiBhZGRlZCwgY2FsbCB0aGUge0BsaW5rIG1vZHVsZTpvbC9wcm9qL3Byb2o0LnJlZ2lzdGVyfSBmdW5jdGlvbi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBQcm9qZWN0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHJvamVjdGlvbihvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb2RlXyA9IG9wdGlvbnMuY29kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVuaXRzIG9mIHByb2plY3RlZCBjb29yZGluYXRlcy4gV2hlbiBzZXQgdG8gYFRJTEVfUElYRUxTYCwgYVxuICAgICAgICAgKiBgdGhpcy5leHRlbnRfYCBhbmQgYHRoaXMud29ybGRFeHRlbnRfYCBtdXN0IGJlIGNvbmZpZ3VyZWQgcHJvcGVybHkgZm9yIGVhY2hcbiAgICAgICAgICogdGlsZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudW5pdHNfID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9ICovIChvcHRpb25zLnVuaXRzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZhbGlkaXR5IGV4dGVudCBvZiB0aGUgcHJvamVjdGlvbiBpbiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIEZvciBwcm9qZWN0aW9uc1xuICAgICAgICAgKiB3aXRoIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgICAgICAgKiB0aWxlIHBpeGVsIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmV4dGVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFeHRlbnQgb2YgdGhlIHdvcmxkIGluIEVQU0c6NDMyNi4gRm9yIHByb2plY3Rpb25zIHdpdGhcbiAgICAgICAgICogYFRJTEVfUElYRUxTYCB1bml0cywgdGhpcyBpcyB0aGUgZXh0ZW50IG9mIHRoZSB0aWxlIGluXG4gICAgICAgICAqIHByb2plY3RlZCBjb29yZGluYXRlIHNwYWNlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID1cbiAgICAgICAgICAgIG9wdGlvbnMud29ybGRFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud29ybGRFeHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXhpc09yaWVudGF0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmF4aXNPcmllbnRhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5heGlzT3JpZW50YXRpb24gOiAnZW51JztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nbG9iYWxfID0gb3B0aW9ucy5nbG9iYWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZ2xvYmFsIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIHRoaXMuZXh0ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfID0gb3B0aW9ucy5nZXRQb2ludFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVmYXVsdFRpbGVHcmlkXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWV0ZXJzUGVyVW5pdF8gPSBvcHRpb25zLm1ldGVyc1BlclVuaXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBwcm9qZWN0aW9uIGlzIHN1aXRhYmxlIGZvciB3cmFwcGluZyB0aGUgeC1heGlzXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuY2FuV3JhcFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbldyYXBYXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29kZSBmb3IgdGhpcyBwcm9qZWN0aW9uLCBlLmcuICdFUFNHOjQzMjYnLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gQ29kZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0Q29kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29kZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB1bml0cyBvZiB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fSBVbml0cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0VW5pdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVuaXRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW1vdW50IG9mIG1ldGVycyBwZXIgdW5pdCBvZiB0aGlzIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBpc1xuICAgICAqIG5vdCBjb25maWd1cmVkIHdpdGggYG1ldGVyc1BlclVuaXRgIG9yIGEgdW5pdHMgaWRlbnRpZmllciwgdGhlIHJldHVybiBpc1xuICAgICAqIGB1bmRlZmluZWRgLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IE1ldGVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0TWV0ZXJzUGVyVW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0ZXJzUGVyVW5pdF8gfHwgTUVURVJTX1BFUl9VTklUW3RoaXMudW5pdHNfXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRXb3JsZEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud29ybGRFeHRlbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBheGlzIG9yaWVudGF0aW9uIG9mIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBFeGFtcGxlIHZhbHVlcyBhcmU6XG4gICAgICogZW51IC0gdGhlIGRlZmF1bHQgZWFzdGluZywgbm9ydGhpbmcsIGVsZXZhdGlvbi5cbiAgICAgKiBuZXUgLSBub3J0aGluZywgZWFzdGluZywgdXAgLSB1c2VmdWwgZm9yIFwibGF0L2xvbmdcIiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzLFxuICAgICAqICAgICBvciBzb3V0aCBvcmllbnRhdGVkIHRyYW5zdmVyc2UgbWVyY2F0b3IuXG4gICAgICogd251IC0gd2VzdGluZywgbm9ydGhpbmcsIHVwIC0gc29tZSBwbGFuZXRhcnkgY29vcmRpbmF0ZSBzeXN0ZW1zIGhhdmVcbiAgICAgKiAgICAgXCJ3ZXN0IHBvc2l0aXZlXCIgY29vcmRpbmF0ZSBzeXN0ZW1zXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBBeGlzIG9yaWVudGF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRBeGlzT3JpZW50YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF4aXNPcmllbnRhdGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJcyB0aGlzIHByb2plY3Rpb24gYSBnbG9iYWwgcHJvamVjdGlvbiB3aGljaCBzcGFucyB0aGUgd2hvbGUgd29ybGQ/XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmlzR2xvYmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nbG9iYWxfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGlmIHRoZSBwcm9qZWN0aW9uIGlzIGEgZ2xvYmFsIHByb2plY3Rpb24gd2hpY2ggc3BhbnMgdGhlIHdob2xlIHdvcmxkXG4gICAgICogQHBhcmFtIHtib29sZWFufSBnbG9iYWwgV2hldGhlciB0aGUgcHJvamVjdGlvbiBpcyBnbG9iYWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldEdsb2JhbCA9IGZ1bmN0aW9uIChnbG9iYWwpIHtcbiAgICAgICAgdGhpcy5nbG9iYWxfID0gZ2xvYmFsO1xuICAgICAgICB0aGlzLmNhbldyYXBYXyA9ICEhKGdsb2JhbCAmJiB0aGlzLmV4dGVudF8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFRpbGVHcmlkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGhlIGRlZmF1bHQgdGlsZSBncmlkLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldERlZmF1bHRUaWxlR3JpZCA9IGZ1bmN0aW9uICh0aWxlR3JpZCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRUaWxlR3JpZF8gPSB0aWxlR3JpZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsaWRpdHkgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuZXh0ZW50XyA9IGV4dGVudDtcbiAgICAgICAgdGhpcy5jYW5XcmFwWF8gPSAhISh0aGlzLmdsb2JhbF8gJiYgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgd29ybGQgZXh0ZW50IGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSB3b3JsZEV4dGVudCBXb3JsZCBleHRlbnRcbiAgICAgKiAgICAgW21pbmxvbiwgbWlubGF0LCBtYXhsb24sIG1heGxhdF0uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldFdvcmxkRXh0ZW50ID0gZnVuY3Rpb24gKHdvcmxkRXh0ZW50KSB7XG4gICAgICAgIHRoaXMud29ybGRFeHRlbnRfID0gd29ybGRFeHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGdldFBvaW50UmVzb2x1dGlvbiBmdW5jdGlvbiAoc2VlIHtAbGluayBtb2R1bGU6b2wvcHJvai5nZXRQb2ludFJlc29sdXRpb259XG4gICAgICogZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ9IGZ1bmMgRnVuY3Rpb25cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0R2V0UG9pbnRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXyA9IGZ1bmM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1c3RvbSBwb2ludCByZXNvbHV0aW9uIGZ1bmN0aW9uIGZvciB0aGlzIHByb2plY3Rpb24gKGlmIHNldCkuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcnx1bmRlZmluZWR9IFRoZSBjdXN0b20gcG9pbnRcbiAgICAgKiByZXNvbHV0aW9uIGZ1bmN0aW9uIChpZiBzZXQpLlxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldFBvaW50UmVzb2x1dGlvbkZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBvaW50UmVzb2x1dGlvbkZ1bmNfO1xuICAgIH07XG4gICAgcmV0dXJuIFByb2plY3Rpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgUHJvamVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb2plY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL2Vwc2czODU3XG4gKi9cbmltcG9ydCBQcm9qZWN0aW9uIGZyb20gJy4vUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9Vbml0cy5qcyc7XG5pbXBvcnQgeyBjb3NoIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIFJhZGl1cyBvZiBXR1M4NCBzcGhlcmVcbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgUkFESVVTID0gNjM3ODEzNztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIEhBTEZfU0laRSA9IE1hdGguUEkgKiBSQURJVVM7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgRVhURU5UID0gWy1IQUxGX1NJWkUsIC1IQUxGX1NJWkUsIEhBTEZfU0laRSwgSEFMRl9TSVpFXTtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAqL1xuZXhwb3J0IHZhciBXT1JMRF9FWFRFTlQgPSBbLTE4MCwgLTg1LCAxODAsIDg1XTtcbi8qKlxuICogTWF4aW11bSBzYWZlIHZhbHVlIGluIHkgZGlyZWN0aW9uXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgTUFYX1NBRkVfWSA9IFJBRElVUyAqIE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyAyKSk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciB3ZWIvc3BoZXJpY2FsIE1lcmNhdG9yIChFUFNHOjM4NTcpLlxuICovXG52YXIgRVBTRzM4NTdQcm9qZWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhFUFNHMzg1N1Byb2plY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgQ29kZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFUFNHMzg1N1Byb2plY3Rpb24oY29kZSkge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29kZTogY29kZSxcbiAgICAgICAgICAgIHVuaXRzOiBVbml0cy5NRVRFUlMsXG4gICAgICAgICAgICBleHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgICAgIHdvcmxkRXh0ZW50OiBXT1JMRF9FWFRFTlQsXG4gICAgICAgICAgICBnZXRQb2ludFJlc29sdXRpb246IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBwb2ludCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uIC8gY29zaChwb2ludFsxXSAvIFJBRElVUyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRVBTRzM4NTdQcm9qZWN0aW9uO1xufShQcm9qZWN0aW9uKSk7XG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6Mzg1Ny5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzozODU3JyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzoxMDIxMDAnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjEwMjExMycpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6OTAwOTEzJyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9kZWYvY3JzL0VQU0cvMC8zODU3JyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzM4NTcnKSxcbl07XG4vKipcbiAqIFRyYW5zZm9ybWF0aW9uIGZyb20gRVBTRzo0MzI2IHRvIEVQU0c6Mzg1Ny5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24gKGRlZmF1bHQgaXMgYDJgKS5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21FUFNHNDMyNihpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdmFyIGRpbWVuc2lvbiA9IG9wdF9kaW1lbnNpb24gPiAxID8gb3B0X2RpbWVuc2lvbiA6IDI7XG4gICAgdmFyIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChkaW1lbnNpb24gPiAyKSB7XG4gICAgICAgICAgICAvLyBwcmVzZXJ2ZSB2YWx1ZXMgYmV5b25kIHNlY29uZCBkaW1lbnNpb25cbiAgICAgICAgICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgb3V0cHV0W2ldID0gKEhBTEZfU0laRSAqIGlucHV0W2ldKSAvIDE4MDtcbiAgICAgICAgdmFyIHkgPSBSQURJVVMgKiBNYXRoLmxvZyhNYXRoLnRhbigoTWF0aC5QSSAqICgraW5wdXRbaSArIDFdICsgOTApKSAvIDM2MCkpO1xuICAgICAgICBpZiAoeSA+IE1BWF9TQUZFX1kpIHtcbiAgICAgICAgICAgIHkgPSBNQVhfU0FGRV9ZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHkgPCAtTUFYX1NBRkVfWSkge1xuICAgICAgICAgICAgeSA9IC1NQVhfU0FGRV9ZO1xuICAgICAgICB9XG4gICAgICAgIG91dHB1dFtpICsgMV0gPSB5O1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6Mzg1NyB0byBFUFNHOjQzMjYuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpbWVuc2lvbl0gRGltZW5zaW9uIChkZWZhdWx0IGlzIGAyYCkuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0VQU0c0MzI2KGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICB2YXIgZGltZW5zaW9uID0gb3B0X2RpbWVuc2lvbiA+IDEgPyBvcHRfZGltZW5zaW9uIDogMjtcbiAgICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICBpZiAob3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGRpbWVuc2lvbiA+IDIpIHtcbiAgICAgICAgICAgIC8vIHByZXNlcnZlIHZhbHVlcyBiZXlvbmQgc2Vjb25kIGRpbWVuc2lvblxuICAgICAgICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dCA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgICAgICBvdXRwdXRbaV0gPSAoMTgwICogaW5wdXRbaV0pIC8gSEFMRl9TSVpFO1xuICAgICAgICBvdXRwdXRbaSArIDFdID1cbiAgICAgICAgICAgICgzNjAgKiBNYXRoLmF0YW4oTWF0aC5leHAoaW5wdXRbaSArIDFdIC8gUkFESVVTKSkpIC8gTWF0aC5QSSAtIDkwO1xuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXBzZzM4NTcuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL2Vwc2c0MzI2XG4gKi9cbmltcG9ydCBQcm9qZWN0aW9uIGZyb20gJy4vUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9Vbml0cy5qcyc7XG4vKipcbiAqIFNlbWktbWFqb3IgcmFkaXVzIG9mIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIFJBRElVUyA9IDYzNzgxMzc7XG4vKipcbiAqIEV4dGVudCBvZiB0aGUgRVBTRzo0MzI2IHByb2plY3Rpb24gd2hpY2ggaXMgdGhlIHdob2xlIHdvcmxkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgRVhURU5UID0gWy0xODAsIC05MCwgMTgwLCA5MF07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBNRVRFUlNfUEVSX1VOSVQgPSAoTWF0aC5QSSAqIFJBRElVUykgLyAxODA7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFByb2plY3Rpb24gb2JqZWN0IGZvciBXR1M4NCBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIChFUFNHOjQzMjYpLlxuICpcbiAqIE5vdGUgdGhhdCBPcGVuTGF5ZXJzIGRvZXMgbm90IHN0cmljdGx5IGNvbXBseSB3aXRoIHRoZSBFUFNHIGRlZmluaXRpb24uXG4gKiBUaGUgRVBTRyByZWdpc3RyeSBkZWZpbmVzIDQzMjYgYXMgYSBDUlMgZm9yIExhdGl0dWRlLExvbmdpdHVkZSAoeSx4KS5cbiAqIE9wZW5MYXllcnMgdHJlYXRzIEVQU0c6NDMyNiBhcyBhIHBzZXVkby1wcm9qZWN0aW9uLCB3aXRoIHgseSBjb29yZGluYXRlcy5cbiAqL1xudmFyIEVQU0c0MzI2UHJvamVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRVBTRzQzMjZQcm9qZWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIENvZGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtvcHRfYXhpc09yaWVudGF0aW9uXSBBeGlzIG9yaWVudGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEVQU0c0MzI2UHJvamVjdGlvbihjb2RlLCBvcHRfYXhpc09yaWVudGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgdW5pdHM6IFVuaXRzLkRFR1JFRVMsXG4gICAgICAgICAgICBleHRlbnQ6IEVYVEVOVCxcbiAgICAgICAgICAgIGF4aXNPcmllbnRhdGlvbjogb3B0X2F4aXNPcmllbnRhdGlvbixcbiAgICAgICAgICAgIGdsb2JhbDogdHJ1ZSxcbiAgICAgICAgICAgIG1ldGVyc1BlclVuaXQ6IE1FVEVSU19QRVJfVU5JVCxcbiAgICAgICAgICAgIHdvcmxkRXh0ZW50OiBFWFRFTlQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgfVxuICAgIHJldHVybiBFUFNHNDMyNlByb2plY3Rpb247XG59KFByb2plY3Rpb24pKTtcbi8qKlxuICogUHJvamVjdGlvbnMgZXF1YWwgdG8gRVBTRzo0MzI2LlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PGltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqL1xuZXhwb3J0IHZhciBQUk9KRUNUSU9OUyA9IFtcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdDUlM6ODQnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdFUFNHOjQzMjYnLCAnbmV1JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODQnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCd1cm46b2djOmRlZjpjcnM6T0dDOjI6ODQnKSxcbiAgICBuZXcgRVBTRzQzMjZQcm9qZWN0aW9uKCdodHRwOi8vd3d3Lm9wZW5naXMubmV0L2RlZi9jcnMvT0dDLzEuMy9DUlM4NCcpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCM0MzI2JywgJ25ldScpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZGVmL2Nycy9FUFNHLzAvNDMyNicsICduZXUnKSxcbl07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcHNnNDMyNi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9wcm9qZWN0aW9uc1xuICovXG4vKipcbiAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbnZhciBjYWNoZSA9IHt9O1xuLyoqXG4gKiBDbGVhciB0aGUgcHJvamVjdGlvbnMgY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBjYWNoZSA9IHt9O1xufVxuLyoqXG4gKiBHZXQgYSBjYWNoZWQgcHJvamVjdGlvbiBieSBjb2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIGNvZGUgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFRoZSBwcm9qZWN0aW9uIChpZiBjYWNoZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KGNvZGUpIHtcbiAgICByZXR1cm4gKGNhY2hlW2NvZGVdIHx8XG4gICAgICAgIGNhY2hlW2NvZGUucmVwbGFjZSgvdXJuOih4LSk/b2djOmRlZjpjcnM6RVBTRzooLio6KT8oXFx3KykkLywgJ0VQU0c6JDMnKV0gfHxcbiAgICAgICAgbnVsbCk7XG59XG4vKipcbiAqIEFkZCBhIHByb2plY3Rpb24gdG8gdGhlIGNhY2hlLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvZGUgVGhlIHByb2plY3Rpb24gY29kZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdG8gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoY29kZSwgcHJvamVjdGlvbikge1xuICAgIGNhY2hlW2NvZGVdID0gcHJvamVjdGlvbjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2plY3Rpb25zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL3RyYW5zZm9ybXNcbiAqL1xuaW1wb3J0IHsgaXNFbXB0eSB9IGZyb20gJy4uL29iai5qcyc7XG4vKipcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb24+Pn1cbiAqL1xudmFyIHRyYW5zZm9ybXMgPSB7fTtcbi8qKlxuICogQ2xlYXIgdGhlIHRyYW5zZm9ybSBjYWNoZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIHRyYW5zZm9ybXMgPSB7fTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGEgY29udmVyc2lvbiBmdW5jdGlvbiB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZVxuICogcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChzb3VyY2UsIGRlc3RpbmF0aW9uLCB0cmFuc2Zvcm1Gbikge1xuICAgIHZhciBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgICB2YXIgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb24uZ2V0Q29kZSgpO1xuICAgIGlmICghKHNvdXJjZUNvZGUgaW4gdHJhbnNmb3JtcykpIHtcbiAgICAgICAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSA9IHt9O1xuICAgIH1cbiAgICB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV0gPSB0cmFuc2Zvcm1Gbjtcbn1cbi8qKlxuICogVW5yZWdpc3RlcnMgdGhlIGNvbnZlcnNpb24gZnVuY3Rpb24gdG8gY29udmVydCBjb29yZGluYXRlcyBmcm9tIHRoZSBzb3VyY2VcbiAqIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uICBUaGlzIG1ldGhvZCBpcyB1c2VkIHRvIGNsZWFuIHVwXG4gKiBjYWNoZWQgdHJhbnNmb3JtcyBkdXJpbmcgdGVzdGluZy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVGhlIHVucmVnaXN0ZXJlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciBzb3VyY2VDb2RlID0gc291cmNlLmdldENvZGUoKTtcbiAgICB2YXIgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb24uZ2V0Q29kZSgpO1xuICAgIHZhciB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgZGVsZXRlIHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgICBpZiAoaXNFbXB0eSh0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdKSkge1xuICAgICAgICBkZWxldGUgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbi8qKlxuICogR2V0IGEgdHJhbnNmb3JtIGdpdmVuIGEgc291cmNlIGNvZGUgYW5kIGEgZGVzdGluYXRpb24gY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VDb2RlIFRoZSBjb2RlIGZvciB0aGUgc291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzdGluYXRpb25Db2RlIFRoZSBjb2RlIGZvciB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb258dW5kZWZpbmVkfSBUaGUgdHJhbnNmb3JtIGZ1bmN0aW9uIChpZiBmb3VuZCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKSB7XG4gICAgdmFyIHRyYW5zZm9ybTtcbiAgICBpZiAoc291cmNlQ29kZSBpbiB0cmFuc2Zvcm1zICYmIGRlc3RpbmF0aW9uQ29kZSBpbiB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdKSB7XG4gICAgICAgIHRyYW5zZm9ybSA9IHRyYW5zZm9ybXNbc291cmNlQ29kZV1bZGVzdGluYXRpb25Db2RlXTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybXMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NwaGVyZVxuICovXG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IHsgdG9EZWdyZWVzLCB0b1JhZGlhbnMgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBPYmplY3QgbGl0ZXJhbCB3aXRoIG9wdGlvbnMgZm9yIHRoZSB7QGxpbmsgZ2V0TGVuZ3RofSBvciB7QGxpbmsgZ2V0QXJlYX1cbiAqIGZ1bmN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNwaGVyZU1ldHJpY09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbj0nRVBTRzozODU3J11cbiAqIFByb2plY3Rpb24gb2YgdGhlICBnZW9tZXRyeS4gIEJ5IGRlZmF1bHQsIHRoZSBnZW9tZXRyeSBpcyBhc3N1bWVkIHRvIGJlIGluXG4gKiBXZWIgTWVyY2F0b3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JhZGl1cz02MzcxMDA4LjhdIFNwaGVyZSByYWRpdXMuICBCeSBkZWZhdWx0LCB0aGVcbiAqIFttZWFuIEVhcnRoIHJhZGl1c10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRWFydGhfcmFkaXVzI01lYW5fcmFkaXVzKVxuICogZm9yIHRoZSBXR1M4NCBlbGxpcHNvaWQgaXMgdXNlZC5cbiAqL1xuLyoqXG4gKiBUaGUgbWVhbiBFYXJ0aCByYWRpdXMgKDEvMyAqICgyYSArIGIpKSBmb3IgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1c1xuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1JBRElVUyA9IDYzNzEwMDguODtcbi8qKlxuICogR2V0IHRoZSBncmVhdCBjaXJjbGUgZGlzdGFuY2UgKGluIG1ldGVycykgYmV0d2VlbiB0d28gZ2VvZ3JhcGhpYyBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXl9IGMxIFN0YXJ0aW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0FycmF5fSBjMiBFbmRpbmcgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3JhZGl1c10gVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLiAgRGVmYXVsdHMgdG8gdGhlIEVhcnRoJ3NcbiAqICAgICBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50cyAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldERpc3RhbmNlKGMxLCBjMiwgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbGF0MiA9IHRvUmFkaWFucyhjMlsxXSk7XG4gICAgdmFyIGRlbHRhTGF0QnkyID0gKGxhdDIgLSBsYXQxKSAvIDI7XG4gICAgdmFyIGRlbHRhTG9uQnkyID0gdG9SYWRpYW5zKGMyWzBdIC0gYzFbMF0pIC8gMjtcbiAgICB2YXIgYSA9IE1hdGguc2luKGRlbHRhTGF0QnkyKSAqIE1hdGguc2luKGRlbHRhTGF0QnkyKSArXG4gICAgICAgIE1hdGguc2luKGRlbHRhTG9uQnkyKSAqXG4gICAgICAgICAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0MSkgKlxuICAgICAgICAgICAgTWF0aC5jb3MobGF0Mik7XG4gICAgcmV0dXJuIDIgKiByYWRpdXMgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG59XG4vKipcbiAqIEdldCB0aGUgY3VtdWxhdGl2ZSBncmVhdCBjaXJjbGUgbGVuZ3RoIG9mIGxpbmVzdHJpbmcgY29vcmRpbmF0ZXMgKGdlb2dyYXBoaWMpLlxuICogQHBhcmFtIHtBcnJheX0gY29vcmRpbmF0ZXMgTGluZXN0cmluZyBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMgdG8gdXNlLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGVuZ3RoIChpbiBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRMZW5ndGhJbnRlcm5hbChjb29yZGluYXRlcywgcmFkaXVzKSB7XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWkgLSAxOyArK2kpIHtcbiAgICAgICAgbGVuZ3RoICs9IGdldERpc3RhbmNlKGNvb3JkaW5hdGVzW2ldLCBjb29yZGluYXRlc1tpICsgMV0sIHJhZGl1cyk7XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIEdldCB0aGUgc3BoZXJpY2FsIGxlbmd0aCBvZiBhIGdlb21ldHJ5LiAgVGhpcyBsZW5ndGggaXMgdGhlIHN1bSBvZiB0aGVcbiAqIGdyZWF0IGNpcmNsZSBkaXN0YW5jZXMgYmV0d2VlbiBjb29yZGluYXRlcy4gIEZvciBwb2x5Z29ucywgdGhlIGxlbmd0aCBpc1xuICogdGhlIHN1bSBvZiBhbGwgcmluZ3MuICBGb3IgcG9pbnRzLCB0aGUgbGVuZ3RoIGlzIHplcm8uICBGb3IgbXVsdGktcGFydFxuICogZ2VvbWV0cmllcywgdGhlIGxlbmd0aCBpcyB0aGUgc3VtIG9mIHRoZSBsZW5ndGggb2YgZWFjaCBwYXJ0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gZ2VvbWV0cnkgQSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7U3BoZXJlTWV0cmljT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zIGZvciB0aGVcbiAqIGxlbmd0aCBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiBZb3UgY2FuIGNoYW5nZSB0aGlzIGJ5IHByb3ZpZGluZyBhIGBwcm9qZWN0aW9uYCBvcHRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBzcGhlcmljYWwgbGVuZ3RoIChpbiBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGVuZ3RoKGdlb21ldHJ5LCBvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgdmFyIHJhZGl1cyA9IG9wdGlvbnMucmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBwcm9qZWN0aW9uID0gb3B0aW9ucy5wcm9qZWN0aW9uIHx8ICdFUFNHOjM4NTcnO1xuICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xuICAgIGlmICh0eXBlICE9PSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTikge1xuICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCkudHJhbnNmb3JtKHByb2plY3Rpb24sICdFUFNHOjQzMjYnKTtcbiAgICB9XG4gICAgdmFyIGxlbmd0aCA9IDA7XG4gICAgdmFyIGNvb3JkaW5hdGVzLCBjb29yZHMsIGksIGlpLCBqLCBqajtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UOiB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgbGVuZ3RoID0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9MWUdPTjoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXNbaV0sIHJhZGl1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvb3JkcyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGpqID0gY29vcmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgbGVuZ3RoICs9IGdldExlbmd0aEludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OOiB7XG4gICAgICAgICAgICB2YXIgZ2VvbWV0cmllcyA9IFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vR2VvbWV0cnlDb2xsZWN0aW9uLmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0R2VvbWV0cmllcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBnZW9tZXRyaWVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gZ2V0TGVuZ3RoKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW5ndGg7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNwaGVyaWNhbCBhcmVhIGZvciBhIGxpc3Qgb2YgY29vcmRpbmF0ZXMuXG4gKlxuICogW1JlZmVyZW5jZV0oaHR0cHM6Ly90cnMuanBsLm5hc2EuZ292L2hhbmRsZS8yMDE0LzQwNDA5KVxuICogUm9iZXJ0LiBHLiBDaGFtYmVybGFpbiBhbmQgV2lsbGlhbSBILiBEdXF1ZXR0ZSwgXCJTb21lIEFsZ29yaXRobXMgZm9yXG4gKiBQb2x5Z29ucyBvbiBhIFNwaGVyZVwiLCBKUEwgUHVibGljYXRpb24gMDctMDMsIEpldCBQcm9wdWxzaW9uXG4gKiBMYWJvcmF0b3J5LCBQYXNhZGVuYSwgQ0EsIEp1bmUgMjAwN1xuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBMaXN0IG9mIGNvb3JkaW5hdGVzIG9mIGEgbGluZWFyXG4gKiByaW5nLiBJZiB0aGUgcmluZyBpcyBvcmllbnRlZCBjbG9ja3dpc2UsIHRoZSBhcmVhIHdpbGwgYmUgcG9zaXRpdmUsXG4gKiBvdGhlcndpc2UgaXQgd2lsbCBiZSBuZWdhdGl2ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIHNwaGVyZSByYWRpdXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICovXG5mdW5jdGlvbiBnZXRBcmVhSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICB2YXIgbGVuID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgIHZhciB4MSA9IGNvb3JkaW5hdGVzW2xlbiAtIDFdWzBdO1xuICAgIHZhciB5MSA9IGNvb3JkaW5hdGVzW2xlbiAtIDFdWzFdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHgyID0gY29vcmRpbmF0ZXNbaV1bMF07XG4gICAgICAgIHZhciB5MiA9IGNvb3JkaW5hdGVzW2ldWzFdO1xuICAgICAgICBhcmVhICs9XG4gICAgICAgICAgICB0b1JhZGlhbnMoeDIgLSB4MSkgKlxuICAgICAgICAgICAgICAgICgyICsgTWF0aC5zaW4odG9SYWRpYW5zKHkxKSkgKyBNYXRoLnNpbih0b1JhZGlhbnMoeTIpKSk7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiAoYXJlYSAqIHJhZGl1cyAqIHJhZGl1cykgLyAyLjA7XG59XG4vKipcbiAqIEdldCB0aGUgc3BoZXJpY2FsIGFyZWEgb2YgYSBnZW9tZXRyeS4gIFRoaXMgaXMgdGhlIGFyZWEgKGluIG1ldGVycykgYXNzdW1pbmdcbiAqIHRoYXQgcG9seWdvbiBlZGdlcyBhcmUgc2VnbWVudHMgb2YgZ3JlYXQgY2lyY2xlcyBvbiBhIHNwaGVyZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEEgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge1NwaGVyZU1ldHJpY09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucyBmb3IgdGhlIGFyZWFcbiAqICAgICBjYWxjdWxhdGlvbi4gIEJ5IGRlZmF1bHQsIGdlb21ldHJpZXMgYXJlIGFzc3VtZWQgdG8gYmUgaW4gJ0VQU0c6Mzg1NycuXG4gKiAgICAgWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGFyZWEgKGluIHNxdWFyZSBtZXRlcnMpLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciByYWRpdXMgPSBvcHRpb25zLnJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICBpZiAodHlwZSAhPT0gR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT04pIHtcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpLnRyYW5zZm9ybShwcm9qZWN0aW9uLCAnRVBTRzo0MzI2Jyk7XG4gICAgfVxuICAgIHZhciBhcmVhID0gMDtcbiAgICB2YXIgY29vcmRpbmF0ZXMsIGNvb3JkcywgaSwgaWksIGosIGpqO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0lOVDpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc6IHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBhcmVhID0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDEsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzW2ldLCByYWRpdXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29vcmRzID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICAgICAgYXJlYSArPSBNYXRoLmFicyhnZXRBcmVhSW50ZXJuYWwoY29vcmRzWzBdLCByYWRpdXMpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAxLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZWEgLT0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3Jkc1tqXSwgcmFkaXVzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTjoge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJpZXMgPSBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEdlb21ldHJpZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgYXJlYSArPSBnZXRBcmVhKGdlb21ldHJpZXNbaV0sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZTogJyArIHR5cGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb29yZGluYXRlIGF0IHRoZSBnaXZlbiBkaXN0YW5jZSBhbmQgYmVhcmluZyBmcm9tIGBjMWAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYzEgVGhlIG9yaWdpbiBwb2ludCAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIFRoZSBncmVhdC1jaXJjbGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgb3JpZ2luXG4gKiAgICAgcG9pbnQgYW5kIHRoZSB0YXJnZXQgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gYmVhcmluZyBUaGUgYmVhcmluZyAoaW4gcmFkaWFucykuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9yYWRpdXNdIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS4gIERlZmF1bHRzIHRvIHRoZSBFYXJ0aCdzXG4gKiAgICAgbWVhbiByYWRpdXMgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgdGFyZ2V0IHBvaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gb2Zmc2V0KGMxLCBkaXN0YW5jZSwgYmVhcmluZywgb3B0X3JhZGl1cykge1xuICAgIHZhciByYWRpdXMgPSBvcHRfcmFkaXVzIHx8IERFRkFVTFRfUkFESVVTO1xuICAgIHZhciBsYXQxID0gdG9SYWRpYW5zKGMxWzFdKTtcbiAgICB2YXIgbG9uMSA9IHRvUmFkaWFucyhjMVswXSk7XG4gICAgdmFyIGRCeVIgPSBkaXN0YW5jZSAvIHJhZGl1cztcbiAgICB2YXIgbGF0ID0gTWF0aC5hc2luKE1hdGguc2luKGxhdDEpICogTWF0aC5jb3MoZEJ5UikgK1xuICAgICAgICBNYXRoLmNvcyhsYXQxKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MoYmVhcmluZykpO1xuICAgIHZhciBsb24gPSBsb24xICtcbiAgICAgICAgTWF0aC5hdGFuMihNYXRoLnNpbihiZWFyaW5nKSAqIE1hdGguc2luKGRCeVIpICogTWF0aC5jb3MobGF0MSksIE1hdGguY29zKGRCeVIpIC0gTWF0aC5zaW4obGF0MSkgKiBNYXRoLnNpbihsYXQpKTtcbiAgICByZXR1cm4gW3RvRGVncmVlcyhsb24pLCB0b0RlZ3JlZXMobGF0KV07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zcGhlcmUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2pcbiAqL1xuLyoqXG4gKiBUaGUgb2wvcHJvaiBtb2R1bGUgc3RvcmVzOlxuICogKiBhIGxpc3Qgb2Yge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259XG4gKiBvYmplY3RzLCBvbmUgZm9yIGVhY2ggcHJvamVjdGlvbiBzdXBwb3J0ZWQgYnkgdGhlIGFwcGxpY2F0aW9uXG4gKiAqIGEgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIG5lZWRlZCB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGluIG9uZSBwcm9qZWN0aW9uXG4gKiBpbnRvIGFub3RoZXIuXG4gKlxuICogVGhlIHN0YXRpYyBmdW5jdGlvbnMgYXJlIHRoZSBtZXRob2RzIHVzZWQgdG8gbWFpbnRhaW4gdGhlc2UuXG4gKiBFYWNoIHRyYW5zZm9ybSBmdW5jdGlvbiBjYW4gaGFuZGxlIG5vdCBvbmx5IHNpbXBsZSBjb29yZGluYXRlIHBhaXJzLCBidXQgYWxzb1xuICogbGFyZ2UgYXJyYXlzIG9mIGNvb3JkaW5hdGVzIHN1Y2ggYXMgdmVjdG9yIGdlb21ldHJpZXMuXG4gKlxuICogV2hlbiBsb2FkZWQsIHRoZSBsaWJyYXJ5IGFkZHMgcHJvamVjdGlvbiBvYmplY3RzIGZvciBFUFNHOjQzMjYgKFdHUzg0XG4gKiBnZW9ncmFwaGljIGNvb3JkaW5hdGVzKSBhbmQgRVBTRzozODU3IChXZWIgb3IgU3BoZXJpY2FsIE1lcmNhdG9yLCBhcyB1c2VkXG4gKiBmb3IgZXhhbXBsZSBieSBCaW5nIE1hcHMgb3IgT3BlblN0cmVldE1hcCksIHRvZ2V0aGVyIHdpdGggdGhlIHJlbGV2YW50XG4gKiB0cmFuc2Zvcm0gZnVuY3Rpb25zLlxuICpcbiAqIEFkZGl0aW9uYWwgdHJhbnNmb3JtcyBtYXkgYmUgYWRkZWQgYnkgdXNpbmcgdGhlIGh0dHA6Ly9wcm9qNGpzLm9yZy9cbiAqIGxpYnJhcnkgKHZlcnNpb24gMi4yIG9yIGxhdGVyKS4gWW91IGNhbiB1c2UgdGhlIGZ1bGwgYnVpbGQgc3VwcGxpZWQgYnlcbiAqIFByb2o0anMsIG9yIGNyZWF0ZSBhIGN1c3RvbSBidWlsZCB0byBzdXBwb3J0IHRob3NlIHByb2plY3Rpb25zIHlvdSBuZWVkOyBzZWVcbiAqIHRoZSBQcm9qNGpzIHdlYnNpdGUgZm9yIGhvdyB0byBkbyB0aGlzLiBZb3UgYWxzbyBuZWVkIHRoZSBQcm9qNGpzIGRlZmluaXRpb25zXG4gKiBmb3IgdGhlIHJlcXVpcmVkIHByb2plY3Rpb25zLiBUaGVzZSBkZWZpbml0aW9ucyBjYW4gYmUgb2J0YWluZWQgZnJvbVxuICogaHR0cHM6Ly9lcHNnLmlvLywgYW5kIGFyZSBhIEpTIGZ1bmN0aW9uLCBzbyBjYW4gYmUgbG9hZGVkIGluIGEgc2NyaXB0XG4gKiB0YWcgKGFzIGluIHRoZSBleGFtcGxlcykgb3IgcGFzdGVkIGludG8geW91ciBhcHBsaWNhdGlvbi5cbiAqXG4gKiBBZnRlciBhbGwgcmVxdWlyZWQgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBhcmUgYWRkZWQgdG8gcHJvajQncyByZWdpc3RyeSAoYnlcbiAqIHVzaW5nIGBwcm9qNC5kZWZzKClgKSwgc2ltcGx5IGNhbGwgYHJlZ2lzdGVyKHByb2o0KWAgZnJvbSB0aGUgYG9sL3Byb2ovcHJvajRgXG4gKiBwYWNrYWdlLiBFeGlzdGluZyB0cmFuc2Zvcm1zIGFyZSBub3QgY2hhbmdlZCBieSB0aGlzIGZ1bmN0aW9uLiBTZWVcbiAqIGV4YW1wbGVzL3dtcy1pbWFnZS1jdXN0b20tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZiB0aGlzLlxuICpcbiAqIEFkZGl0aW9uYWwgcHJvamVjdGlvbiBkZWZpbml0aW9ucyBjYW4gYmUgcmVnaXN0ZXJlZCB3aXRoIGBwcm9qNC5kZWZzKClgIGFueVxuICogdGltZS4gSnVzdCBtYWtlIHN1cmUgdG8gY2FsbCBgcmVnaXN0ZXIocHJvajQpYCBhZ2FpbjsgZm9yIGV4YW1wbGUsIHdpdGggdXNlci1zdXBwbGllZCBkYXRhIHdoZXJlIHlvdSBkb24ndFxuICoga25vdyBpbiBhZHZhbmNlIHdoYXQgcHJvamVjdGlvbnMgYXJlIG5lZWRlZCwgeW91IGNhbiBpbml0aWFsbHkgbG9hZCBtaW5pbWFsXG4gKiBzdXBwb3J0IGFuZCB0aGVuIGxvYWQgd2hpY2hldmVyIGFyZSByZXF1ZXN0ZWQuXG4gKlxuICogTm90ZSB0aGF0IFByb2o0anMgZG9lcyBub3Qgc3VwcG9ydCBwcm9qZWN0aW9uIGV4dGVudHMuIElmIHlvdSB3YW50IHRvIGFkZFxuICogb25lIGZvciBjcmVhdGluZyBkZWZhdWx0IHRpbGUgZ3JpZHMsIHlvdSBjYW4gYWRkIGl0IGFmdGVyIHRoZSBQcm9qZWN0aW9uXG4gKiBvYmplY3QgaGFzIGJlZW4gY3JlYXRlZCB3aXRoIGBzZXRFeHRlbnRgLCBmb3IgZXhhbXBsZSxcbiAqIGBnZXQoJ0VQU0c6MTIzNCcpLnNldEV4dGVudChleHRlbnQpYC5cbiAqXG4gKiBJbiBhZGRpdGlvbiB0byBQcm9qNGpzIHN1cHBvcnQsIGFueSB0cmFuc2Zvcm0gZnVuY3Rpb25zIGNhbiBiZSBhZGRlZCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkQ29vcmRpbmF0ZVRyYW5zZm9ybXN9LiBUbyB1c2UgdGhpcywgeW91IG11c3QgZmlyc3QgY3JlYXRlXG4gKiBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBvYmplY3QgZm9yIHRoZSBuZXcgcHJvamVjdGlvbiBhbmQgYWRkIGl0IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRQcm9qZWN0aW9ufS4gWW91IGNhbiB0aGVuIGFkZCB0aGUgZm9yd2FyZCBhbmQgaW52ZXJzZVxuICogZnVuY3Rpb25zIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zfS4gU2VlXG4gKiBleGFtcGxlcy93bXMtY3VzdG9tLXByb2ogZm9yIGFuIGV4YW1wbGUgb2YgdGhpcy5cbiAqXG4gKiBOb3RlIHRoYXQgaWYgbm8gdHJhbnNmb3JtcyBhcmUgbmVlZGVkIGFuZCB5b3Ugb25seSBuZWVkIHRvIGRlZmluZSB0aGVcbiAqIHByb2plY3Rpb24sIGp1c3QgYWRkIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259IHdpdGhcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRQcm9qZWN0aW9ufS4gU2VlIGV4YW1wbGVzL3dtcy1uby1wcm9qIGZvciBhbiBleGFtcGxlIG9mXG4gKiB0aGlzLlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL3Byb2ovUHJvamVjdGlvbi5qcyc7XG5pbXBvcnQgVW5pdHMsIHsgTUVURVJTX1BFUl9VTklUIH0gZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0czODU3X1BST0pFQ1RJT05TLCBmcm9tRVBTRzQzMjYsIHRvRVBTRzQzMjYsIH0gZnJvbSAnLi9wcm9qL2Vwc2czODU3LmpzJztcbmltcG9ydCB7IFBST0pFQ1RJT05TIGFzIEVQU0c0MzI2X1BST0pFQ1RJT05TIH0gZnJvbSAnLi9wcm9qL2Vwc2c0MzI2LmpzJztcbmltcG9ydCB7IGFkZCBhcyBhZGRQcm9qLCBjbGVhciBhcyBjbGVhclByb2osIGdldCBhcyBnZXRQcm9qLCB9IGZyb20gJy4vcHJvai9wcm9qZWN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkVHJhbnNmb3JtRnVuYywgY2xlYXIgYXMgY2xlYXJUcmFuc2Zvcm1GdW5jcywgZ2V0IGFzIGdldFRyYW5zZm9ybUZ1bmMsIH0gZnJvbSAnLi9wcm9qL3RyYW5zZm9ybXMuanMnO1xuaW1wb3J0IHsgYXBwbHlUcmFuc2Zvcm0sIGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXREaXN0YW5jZSB9IGZyb20gJy4vc3BoZXJlLmpzJztcbmltcG9ydCB7IGdldFdvcmxkc0F3YXkgfSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBBIHByb2plY3Rpb24gYXMge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb259LCBTUlMgaWRlbnRpZmllclxuICogc3RyaW5nIG9yIHVuZGVmaW5lZC5cbiAqIEB0eXBlZGVmIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IFByb2plY3Rpb25MaWtlXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQSB0cmFuc2Zvcm0gZnVuY3Rpb24gYWNjZXB0cyBhbiBhcnJheSBvZiBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgYW4gb3B0aW9uYWxcbiAqIG91dHB1dCBhcnJheSwgYW5kIGFuIG9wdGlvbmFsIGRpbWVuc2lvbiAoZGVmYXVsdCBzaG91bGQgYmUgMikuICBUaGUgZnVuY3Rpb25cbiAqIHRyYW5zZm9ybXMgdGhlIGlucHV0IGNvb3JkaW5hdGUgdmFsdWVzLCBwb3B1bGF0ZXMgdGhlIG91dHB1dCBhcnJheSwgYW5kXG4gKiByZXR1cm5zIHRoZSBvdXRwdXQgYXJyYXkuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEFycmF5PG51bWJlcj4sIEFycmF5PG51bWJlcj49LCBudW1iZXI9KTogQXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHsgTUVURVJTX1BFUl9VTklUIH07XG5leHBvcnQgeyBQcm9qZWN0aW9uIH07XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgY29vcmRpbmF0ZSBhcnJheS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpbWVuc2lvbl0gRGltZW5zaW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGNvb3JkaW5hdGUgYXJyYXkgKG5ldyBhcnJheSwgc2FtZSBjb29yZGluYXRlXG4gKiAgICAgdmFsdWVzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb25lVHJhbnNmb3JtKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgdmFyIG91dHB1dDtcbiAgICBpZiAob3B0X291dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGlucHV0Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIG9wdF9vdXRwdXRbaV0gPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXQgPSBvcHRfb3V0cHV0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb3V0cHV0ID0gaW5wdXQuc2xpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBjb29yZGluYXRlIGFycmF5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnB1dCBjb29yZGluYXRlIGFycmF5IChzYW1lIGFycmF5IGFzIGlucHV0KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlkZW50aXR5VHJhbnNmb3JtKGlucHV0LCBvcHRfb3V0cHV0LCBvcHRfZGltZW5zaW9uKSB7XG4gICAgaWYgKG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCAmJiBpbnB1dCAhPT0gb3B0X291dHB1dCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBvcHRfb3V0cHV0W2ldID0gaW5wdXRbaV07XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQgPSBvcHRfb3V0cHV0O1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXQ7XG59XG4vKipcbiAqIEFkZCBhIFByb2plY3Rpb24gb2JqZWN0IHRvIHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBwcm9qZWN0aW9ucyB0aGF0IGNhbiBiZVxuICogbG9va2VkIHVwIGJ5IHRoZWlyIGNvZGUuXG4gKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uIFByb2plY3Rpb24gaW5zdGFuY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICBhZGRQcm9qKHByb2plY3Rpb24uZ2V0Q29kZSgpLCBwcm9qZWN0aW9uKTtcbiAgICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24sIHByb2plY3Rpb24sIGNsb25lVHJhbnNmb3JtKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMgUHJvamVjdGlvbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICAgIHByb2plY3Rpb25zLmZvckVhY2goYWRkUHJvamVjdGlvbik7XG59XG4vKipcbiAqIEZldGNoZXMgYSBQcm9qZWN0aW9uIG9iamVjdCBmb3IgdGhlIGNvZGUgc3BlY2lmaWVkLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb25MaWtlIEVpdGhlciBhIGNvZGUgc3RyaW5nIHdoaWNoIGlzXG4gKiAgICAgYSBjb21iaW5hdGlvbiBvZiBhdXRob3JpdHkgYW5kIGlkZW50aWZpZXIgc3VjaCBhcyBcIkVQU0c6NDMyNlwiLCBvciBhblxuICogICAgIGV4aXN0aW5nIHByb2plY3Rpb24gb2JqZWN0LCBvciB1bmRlZmluZWQuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uIG9iamVjdCwgb3IgbnVsbCBpZiBub3QgaW4gbGlzdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChwcm9qZWN0aW9uTGlrZSkge1xuICAgIHJldHVybiB0eXBlb2YgcHJvamVjdGlvbkxpa2UgPT09ICdzdHJpbmcnXG4gICAgICAgID8gZ2V0UHJvaigvKiogQHR5cGUge3N0cmluZ30gKi8gKHByb2plY3Rpb25MaWtlKSlcbiAgICAgICAgOiAvKiogQHR5cGUge1Byb2plY3Rpb259ICovIChwcm9qZWN0aW9uTGlrZSkgfHwgbnVsbDtcbn1cbi8qKlxuICogR2V0IHRoZSByZXNvbHV0aW9uIG9mIHRoZSBwb2ludCBpbiBkZWdyZWVzIG9yIGRpc3RhbmNlIHVuaXRzLlxuICogRm9yIHByb2plY3Rpb25zIHdpdGggZGVncmVlcyBhcyB0aGUgdW5pdCB0aGlzIHdpbGwgc2ltcGx5IHJldHVybiB0aGVcbiAqIHByb3ZpZGVkIHJlc29sdXRpb24uIEZvciBvdGhlciBwcm9qZWN0aW9ucyB0aGUgcG9pbnQgcmVzb2x1dGlvbiBpc1xuICogYnkgZGVmYXVsdCBlc3RpbWF0ZWQgYnkgdHJhbnNmb3JtaW5nIHRoZSAncG9pbnQnIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAqIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSxcbiAqIGFuZCB0YWtpbmcgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gKiBBIGN1c3RvbSBmdW5jdGlvbiBjYW4gYmUgcHJvdmlkZWQgZm9yIGEgc3BlY2lmaWMgcHJvamVjdGlvbiwgZWl0aGVyXG4gKiBieSBzZXR0aW5nIHRoZSBgZ2V0UG9pbnRSZXNvbHV0aW9uYCBvcHRpb24gaW4gdGhlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBjb25zdHJ1Y3RvciBvciBieSB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbiNzZXRHZXRQb2ludFJlc29sdXRpb259IHRvIGNoYW5nZSBhbiBleGlzdGluZ1xuICogcHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gTm9taW5hbCByZXNvbHV0aW9uIGluIHByb2plY3Rpb24gdW5pdHMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludCB0byBmaW5kIGFkanVzdGVkIHJlc29sdXRpb24gYXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Vbml0cy5qc1wiKS5kZWZhdWx0fSBbb3B0X3VuaXRzXSBVbml0cyB0byBnZXQgdGhlIHBvaW50IHJlc29sdXRpb24gaW4uXG4gKiBEZWZhdWx0IGlzIHRoZSBwcm9qZWN0aW9uJ3MgdW5pdHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFBvaW50IHJlc29sdXRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2ludFJlc29sdXRpb24ocHJvamVjdGlvbiwgcmVzb2x1dGlvbiwgcG9pbnQsIG9wdF91bml0cykge1xuICAgIHByb2plY3Rpb24gPSBnZXQocHJvamVjdGlvbik7XG4gICAgdmFyIHBvaW50UmVzb2x1dGlvbjtcbiAgICB2YXIgZ2V0dGVyID0gcHJvamVjdGlvbi5nZXRQb2ludFJlc29sdXRpb25GdW5jKCk7XG4gICAgaWYgKGdldHRlcikge1xuICAgICAgICBwb2ludFJlc29sdXRpb24gPSBnZXR0ZXIocmVzb2x1dGlvbiwgcG9pbnQpO1xuICAgICAgICBpZiAob3B0X3VuaXRzICYmIG9wdF91bml0cyAhPT0gcHJvamVjdGlvbi5nZXRVbml0cygpKSB7XG4gICAgICAgICAgICB2YXIgbWV0ZXJzUGVyVW5pdCA9IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICAgICAgaWYgKG1ldGVyc1BlclVuaXQpIHtcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPVxuICAgICAgICAgICAgICAgICAgICAocG9pbnRSZXNvbHV0aW9uICogbWV0ZXJzUGVyVW5pdCkgLyBNRVRFUlNfUEVSX1VOSVRbb3B0X3VuaXRzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHVuaXRzID0gcHJvamVjdGlvbi5nZXRVbml0cygpO1xuICAgICAgICBpZiAoKHVuaXRzID09IFVuaXRzLkRFR1JFRVMgJiYgIW9wdF91bml0cykgfHwgb3B0X3VuaXRzID09IFVuaXRzLkRFR1JFRVMpIHtcbiAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBFc3RpbWF0ZSBwb2ludCByZXNvbHV0aW9uIGJ5IHRyYW5zZm9ybWluZyB0aGUgY2VudGVyIHBpeGVsIHRvIEVQU0c6NDMyNixcbiAgICAgICAgICAgIC8vIG1lYXN1cmluZyBpdHMgd2lkdGggYW5kIGhlaWdodCBvbiB0aGUgbm9ybWFsIHNwaGVyZSwgYW5kIHRha2luZyB0aGVcbiAgICAgICAgICAgIC8vIGF2ZXJhZ2Ugb2YgdGhlIHdpZHRoIGFuZCBoZWlnaHQuXG4gICAgICAgICAgICB2YXIgdG9FUFNHNDMyNl8xID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHByb2plY3Rpb24sIGdldCgnRVBTRzo0MzI2JykpO1xuICAgICAgICAgICAgaWYgKHRvRVBTRzQzMjZfMSA9PT0gaWRlbnRpdHlUcmFuc2Zvcm0gJiYgdW5pdHMgIT09IFVuaXRzLkRFR1JFRVMpIHtcbiAgICAgICAgICAgICAgICAvLyBubyB0cmFuc2Zvcm0gaXMgYXZhaWxhYmxlXG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gcmVzb2x1dGlvbiAqIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHZlcnRpY2VzID0gW1xuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSAtIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0gKyByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFsxXSAtIHJlc29sdXRpb24gLyAyLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0gKyByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIHZlcnRpY2VzID0gdG9FUFNHNDMyNl8xKHZlcnRpY2VzLCB2ZXJ0aWNlcywgMik7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gZ2V0RGlzdGFuY2UodmVydGljZXMuc2xpY2UoMCwgMiksIHZlcnRpY2VzLnNsaWNlKDIsIDQpKTtcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gZ2V0RGlzdGFuY2UodmVydGljZXMuc2xpY2UoNCwgNiksIHZlcnRpY2VzLnNsaWNlKDYsIDgpKTtcbiAgICAgICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSAod2lkdGggKyBoZWlnaHQpIC8gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtZXRlcnNQZXJVbml0ID0gb3B0X3VuaXRzXG4gICAgICAgICAgICAgICAgPyBNRVRFUlNfUEVSX1VOSVRbb3B0X3VuaXRzXVxuICAgICAgICAgICAgICAgIDogcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgICAgICBpZiAobWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uIC89IG1ldGVyc1BlclVuaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvaW50UmVzb2x1dGlvbjtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0aGF0IGRvbid0IGFsdGVyIGNvb3JkaW5hdGVzLiBUaG9zZSBhbGxvd1xuICogdG8gdHJhbnNmb3JtIGJldHdlZW4gcHJvamVjdGlvbnMgd2l0aCBlcXVhbCBtZWFuaW5nLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zIFByb2plY3Rpb25zLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKHByb2plY3Rpb25zKSB7XG4gICAgYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpO1xuICAgIHByb2plY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChkZXN0aW5hdGlvbikge1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPT0gZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgICAgICBhZGRUcmFuc2Zvcm1GdW5jKHNvdXJjZSwgZGVzdGluYXRpb24sIGNsb25lVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBhbnkgcHJvamVjdGlvblxuICogaW4gcHJvamVjdGlvbjEgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjIuXG4gKlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMxIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtBcnJheTxQcm9qZWN0aW9uPn0gcHJvamVjdGlvbnMyIFByb2plY3Rpb25zIHdpdGggZXF1YWxcbiAqICAgICBtZWFuaW5nLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gZm9yd2FyZFRyYW5zZm9ybSBUcmFuc2Zvcm1hdGlvbiBmcm9tIGFueVxuICogICBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24xIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24yLlxuICogQHBhcmFtIHtUcmFuc2Zvcm1GdW5jdGlvbn0gaW52ZXJzZVRyYW5zZm9ybSBUcmFuc2Zvcm0gZnJvbSBhbnkgcHJvamVjdGlvblxuICogICBpbiBwcm9qZWN0aW9uMiB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMS4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRFcXVpdmFsZW50VHJhbnNmb3Jtcyhwcm9qZWN0aW9uczEsIHByb2plY3Rpb25zMiwgZm9yd2FyZFRyYW5zZm9ybSwgaW52ZXJzZVRyYW5zZm9ybSkge1xuICAgIHByb2plY3Rpb25zMS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9qZWN0aW9uMSkge1xuICAgICAgICBwcm9qZWN0aW9uczIuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjIpIHtcbiAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yLCBmb3J3YXJkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGFkZFRyYW5zZm9ybUZ1bmMocHJvamVjdGlvbjIsIHByb2plY3Rpb24xLCBpbnZlcnNlVHJhbnNmb3JtKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vKipcbiAqIENsZWFyIGFsbCBjYWNoZWQgcHJvamVjdGlvbnMgYW5kIHRyYW5zZm9ybXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckFsbFByb2plY3Rpb25zKCkge1xuICAgIGNsZWFyUHJvaigpO1xuICAgIGNsZWFyVHJhbnNmb3JtRnVuY3MoKTtcbn1cbi8qKlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufHN0cmluZ3x1bmRlZmluZWR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZWZhdWx0Q29kZSBEZWZhdWx0IGNvZGUuXG4gKiBAcmV0dXJuIHtQcm9qZWN0aW9ufSBQcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvamVjdGlvbihwcm9qZWN0aW9uLCBkZWZhdWx0Q29kZSkge1xuICAgIGlmICghcHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZ2V0KGRlZmF1bHRDb2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHByb2plY3Rpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBnZXQocHJvamVjdGlvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtQcm9qZWN0aW9ufSAqLyAocHJvamVjdGlvbik7XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qflRyYW5zZm9ybUZ1bmN0aW9ufSBmcm9tIGEgc2ltcGxlIDJEIGNvb3JkaW5hdGUgdHJhbnNmb3JtXG4gKiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRUcmFuc2Zvcm0gQ29vcmRpbmF0ZVxuICogICAgIHRyYW5zZm9ybS5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShjb29yZFRyYW5zZm9ybSkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGltZW5zaW9uXSBEaW1lbnNpb24uXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICB2YXIgZGltZW5zaW9uID0gb3B0X2RpbWVuc2lvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2RpbWVuc2lvbiA6IDI7XG4gICAgICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQgPyBvcHRfb3V0cHV0IDogbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IGRpbWVuc2lvbikge1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gY29vcmRUcmFuc2Zvcm0oW2lucHV0W2ldLCBpbnB1dFtpICsgMV1dKTtcbiAgICAgICAgICAgIG91dHB1dFtpXSA9IHBvaW50WzBdO1xuICAgICAgICAgICAgb3V0cHV0W2kgKyAxXSA9IHBvaW50WzFdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDE7IGogPj0gMjsgLS1qKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W2kgKyBqXSA9IGlucHV0W2kgKyBqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0pO1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgY29vcmRpbmF0ZSB0cmFuc2Zvcm0gZnVuY3Rpb25zIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgYmV0d2VlbiB0aGVcbiAqIHNvdXJjZSBwcm9qZWN0aW9uIGFuZCB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIFRoZSBmb3J3YXJkIGFuZCBpbnZlcnNlIGZ1bmN0aW9ucyBjb252ZXJ0IGNvb3JkaW5hdGUgcGFpcnM7IHRoaXMgZnVuY3Rpb25cbiAqIGNvbnZlcnRzIHRoZXNlIGludG8gdGhlIGZ1bmN0aW9ucyB1c2VkIGludGVybmFsbHkgd2hpY2ggYWxzbyBoYW5kbGVcbiAqIGV4dGVudHMgYW5kIGNvb3JkaW5hdGUgYXJyYXlzLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGZvcndhcmQgVGhlIGZvcndhcmQgdHJhbnNmb3JtXG4gKiAgICAgZnVuY3Rpb24gKHRoYXQgaXMsIGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvblxuICogICAgIHByb2plY3Rpb24pIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYXMgYXJndW1lbnQgYW5kIHJldHVybnNcbiAqICAgICB0aGUgdHJhbnNmb3JtZWQge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9LlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBpbnZlcnNlIFRoZSBpbnZlcnNlIHRyYW5zZm9ybVxuICogICAgIGZ1bmN0aW9uICh0aGF0IGlzLCBmcm9tIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uIHRvIHRoZSBzb3VyY2VcbiAqICAgICBwcm9qZWN0aW9uKSB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zXG4gKiAgICAgdGhlIHRyYW5zZm9ybWVkIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zKHNvdXJjZSwgZGVzdGluYXRpb24sIGZvcndhcmQsIGludmVyc2UpIHtcbiAgICB2YXIgc291cmNlUHJvaiA9IGdldChzb3VyY2UpO1xuICAgIHZhciBkZXN0UHJvaiA9IGdldChkZXN0aW5hdGlvbik7XG4gICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2VQcm9qLCBkZXN0UHJvaiwgY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oZm9yd2FyZCkpO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMoZGVzdFByb2osIHNvdXJjZVByb2osIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGludmVyc2UpKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgZnJvbSBsb25naXR1ZGUvbGF0aXR1ZGUgdG8gYSBkaWZmZXJlbnQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZSBhcyBsb25naXR1ZGUgYW5kIGxhdGl0dWRlLCBpLmUuXG4gKiAgICAgYW4gYXJyYXkgd2l0aCBsb25naXR1ZGUgYXMgMXN0IGFuZCBsYXRpdHVkZSBhcyAybmQgZWxlbWVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IFtvcHRfcHJvamVjdGlvbl0gVGFyZ2V0IHByb2plY3Rpb24uIFRoZVxuICogICAgIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgcHJvamVjdGVkIHRvIHRoZSB0YXJnZXQgcHJvamVjdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Mb25MYXQoY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24pIHtcbiAgICByZXR1cm4gdHJhbnNmb3JtKGNvb3JkaW5hdGUsICdFUFNHOjQzMjYnLCBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiAnRVBTRzozODU3Jyk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIHRvIGxvbmdpdHVkZS9sYXRpdHVkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgUHJvamVjdGVkIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBbb3B0X3Byb2plY3Rpb25dIFByb2plY3Rpb24gb2YgdGhlIGNvb3JkaW5hdGUuXG4gKiAgICAgVGhlIGRlZmF1bHQgaXMgV2ViIE1lcmNhdG9yLCBpLmUuICdFUFNHOjM4NTcnLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLiBhbiBhcnJheVxuICogICAgIHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0xvbkxhdChjb29yZGluYXRlLCBvcHRfcHJvamVjdGlvbikge1xuICAgIHZhciBsb25MYXQgPSB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycsICdFUFNHOjQzMjYnKTtcbiAgICB2YXIgbG9uID0gbG9uTGF0WzBdO1xuICAgIGlmIChsb24gPCAtMTgwIHx8IGxvbiA+IDE4MCkge1xuICAgICAgICBsb25MYXRbMF0gPSBtb2R1bG8obG9uICsgMTgwLCAzNjApIC0gMTgwO1xuICAgIH1cbiAgICByZXR1cm4gbG9uTGF0O1xufVxuLyoqXG4gKiBDaGVja3MgaWYgdHdvIHByb2plY3Rpb25zIGFyZSB0aGUgc2FtZSwgdGhhdCBpcyBldmVyeSBjb29yZGluYXRlIGluIG9uZVxuICogcHJvamVjdGlvbiBkb2VzIHJlcHJlc2VudCB0aGUgc2FtZSBnZW9ncmFwaGljIHBvaW50IGFzIHRoZSBzYW1lIGNvb3JkaW5hdGUgaW5cbiAqIHRoZSBvdGhlciBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjEgUHJvamVjdGlvbiAxLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBwcm9qZWN0aW9uMiBQcm9qZWN0aW9uIDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBFcXVpdmFsZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1aXZhbGVudChwcm9qZWN0aW9uMSwgcHJvamVjdGlvbjIpIHtcbiAgICBpZiAocHJvamVjdGlvbjEgPT09IHByb2plY3Rpb24yKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgZXF1YWxVbml0cyA9IHByb2plY3Rpb24xLmdldFVuaXRzKCkgPT09IHByb2plY3Rpb24yLmdldFVuaXRzKCk7XG4gICAgaWYgKHByb2plY3Rpb24xLmdldENvZGUoKSA9PT0gcHJvamVjdGlvbjIuZ2V0Q29kZSgpKSB7XG4gICAgICAgIHJldHVybiBlcXVhbFVuaXRzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMocHJvamVjdGlvbjEsIHByb2plY3Rpb24yKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMgPT09IGNsb25lVHJhbnNmb3JtICYmIGVxdWFsVW5pdHM7XG4gICAgfVxufVxuLyoqXG4gKiBTZWFyY2hlcyBpbiB0aGUgbGlzdCBvZiB0cmFuc2Zvcm0gZnVuY3Rpb25zIGZvciB0aGUgZnVuY3Rpb24gZm9yIGNvbnZlcnRpbmdcbiAqIGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvamVjdGlvbiBTb3VyY2UgUHJvamVjdGlvbiBvYmplY3QuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IGRlc3RpbmF0aW9uUHJvamVjdGlvbiBEZXN0aW5hdGlvbiBQcm9qZWN0aW9uXG4gKiAgICAgb2JqZWN0LlxuICogQHJldHVybiB7VHJhbnNmb3JtRnVuY3Rpb259IFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZVByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgIHZhciBkZXN0aW5hdGlvbkNvZGUgPSBkZXN0aW5hdGlvblByb2plY3Rpb24uZ2V0Q29kZSgpO1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnVuYyhzb3VyY2VDb2RlLCBkZXN0aW5hdGlvbkNvZGUpO1xuICAgIGlmICghdHJhbnNmb3JtRnVuYykge1xuICAgICAgICB0cmFuc2Zvcm1GdW5jID0gaWRlbnRpdHlUcmFuc2Zvcm07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jO1xufVxuLyoqXG4gKiBHaXZlbiB0aGUgcHJvamVjdGlvbi1saWtlIG9iamVjdHMsIHNlYXJjaGVzIGZvciBhIHRyYW5zZm9ybWF0aW9uXG4gKiBmdW5jdGlvbiB0byBjb252ZXJ0IGEgY29vcmRpbmF0ZXMgYXJyYXkgZnJvbSB0aGUgc291cmNlIHByb2plY3Rpb24gdG8gdGhlXG4gKiBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgIHZhciBzb3VyY2VQcm9qZWN0aW9uID0gZ2V0KHNvdXJjZSk7XG4gICAgdmFyIGRlc3RpbmF0aW9uUHJvamVjdGlvbiA9IGdldChkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhzb3VyY2VQcm9qZWN0aW9uLCBkZXN0aW5hdGlvblByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSBmcm9tIHNvdXJjZSBwcm9qZWN0aW9uIHRvIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGlzIHJldHVybnMgYSBuZXcgY29vcmRpbmF0ZSAoYW5kIGRvZXMgbm90IG1vZGlmeSB0aGUgb3JpZ2luYWwpLlxuICpcbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2oudHJhbnNmb3JtRXh0ZW50fSBmb3IgZXh0ZW50IHRyYW5zZm9ybWF0aW9uLlxuICogU2VlIHRoZSB0cmFuc2Zvcm0gbWV0aG9kIG9mIHtAbGluayBtb2R1bGU6b2wvZ2VvbS9HZW9tZXRyeX5HZW9tZXRyeX0gYW5kIGl0c1xuICogc3ViY2xhc3NlcyBmb3IgZ2VvbWV0cnkgdHJhbnNmb3Jtcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24tbGlrZS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24tbGlrZS5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyhjb29yZGluYXRlLCB1bmRlZmluZWQsIGNvb3JkaW5hdGUubGVuZ3RoKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhbiBleHRlbnQgZnJvbSBzb3VyY2UgcHJvamVjdGlvbiB0byBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpc1xuICogcmV0dXJucyBhIG5ldyBleHRlbnQgKGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQgdG8gdHJhbnNmb3JtLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zdG9wc10gTnVtYmVyIG9mIHN0b3BzIHBlciBzaWRlIHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm0uXG4gKiBCeSBkZWZhdWx0IG9ubHkgdGhlIGNvcm5lcnMgYXJlIHVzZWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSB0cmFuc2Zvcm1lZCBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2UsIGRlc3RpbmF0aW9uLCBvcHRfc3RvcHMpIHtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZXh0ZW50LCB0cmFuc2Zvcm1GdW5jLCB1bmRlZmluZWQsIG9wdF9zdG9wcyk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHBvaW50IHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qZWN0aW9uIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0aW5hdGlvblByb2plY3Rpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBQb2ludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybVdpdGhQcm9qZWN0aW9ucyhwb2ludCwgc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKSB7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMoc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKTtcbiAgICByZXR1cm4gdHJhbnNmb3JtRnVuYyhwb2ludCk7XG59XG4vKipcbiAqIEB0eXBlIHs/UHJvamVjdGlvbn1cbiAqL1xudmFyIHVzZXJQcm9qZWN0aW9uID0gbnVsbDtcbi8qKlxuICogU2V0IHRoZSBwcm9qZWN0aW9uIGZvciBjb29yZGluYXRlcyBzdXBwbGllZCBmcm9tIGFuZCByZXR1cm5lZCBieSBBUEkgbWV0aG9kcy5cbiAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXJcbiAqIHByb2plY3Rpb25zIGlzIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZCBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFVzZXJQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICB1c2VyUHJvamVjdGlvbiA9IGdldChwcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogQ2xlYXIgdGhlIHVzZXIgcHJvamVjdGlvbiBpZiBzZXQuICBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2ZcbiAqIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlciBwcm9qZWN0aW9ucyBpcyBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGRcbiAqIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJVc2VyUHJvamVjdGlvbigpIHtcbiAgICB1c2VyUHJvamVjdGlvbiA9IG51bGw7XG59XG4vKipcbiAqIEdldCB0aGUgcHJvamVjdGlvbiBmb3IgY29vcmRpbmF0ZXMgc3VwcGxpZWQgZnJvbSBhbmQgcmV0dXJuZWQgYnkgQVBJIG1ldGhvZHMuXG4gKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2YgdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyXG4gKiBwcm9qZWN0aW9ucyBpcyBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKiBAcmV0dXJuIHs/UHJvamVjdGlvbn0gVGhlIHVzZXIgcHJvamVjdGlvbiAob3IgbnVsbCBpZiBub3Qgc2V0KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVzZXJQcm9qZWN0aW9uKCkge1xuICAgIHJldHVybiB1c2VyUHJvamVjdGlvbjtcbn1cbi8qKlxuICogVXNlIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMgKFdHUy04NCBkYXR1bSkgaW4gQVBJIG1ldGhvZHMuICBOb3RlIHRoYXQgdGhpc1xuICogbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlciBwcm9qZWN0aW9ucyBpc1xuICogbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlR2VvZ3JhcGhpYygpIHtcbiAgICBzZXRVc2VyUHJvamVjdGlvbignRVBTRzo0MzI2Jyk7XG59XG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgaW50byB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2VQcm9qZWN0aW9uIFRoZSBpbnB1dCBjb29yZGluYXRlIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgaW5wdXQgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gY29vcmRpbmF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCBzb3VyY2VQcm9qZWN0aW9uLCB1c2VyUHJvamVjdGlvbik7XG59XG4vKipcbiAqIFJldHVybiBhIGNvb3JkaW5hdGUgdHJhbnNmb3JtZWQgZnJvbSB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBjb29yZGluYXRlIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlIElucHV0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0UHJvamVjdGlvbiBUaGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRoZSBpbnB1dCBjb29yZGluYXRlIHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIGRlc3RQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gY29vcmRpbmF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCB1c2VyUHJvamVjdGlvbiwgZGVzdFByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gYW4gZXh0ZW50IHRyYW5zZm9ybWVkIGludG8gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgZXh0ZW50IGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBJbnB1dCBleHRlbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2VQcm9qZWN0aW9uIFRoZSBpbnB1dCBleHRlbnQgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gVGhlIGlucHV0IGV4dGVudCBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Vc2VyRXh0ZW50KGV4dGVudCwgc291cmNlUHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHNvdXJjZVByb2plY3Rpb24sIHVzZXJQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIGFuIGV4dGVudCB0cmFuc2Zvcm1lZCBmcm9tIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGV4dGVudCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgSW5wdXQgZXh0ZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSBpbnB1dCBleHRlbnQgdHJhbnNmb3JtZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlckV4dGVudChleHRlbnQsIGRlc3RQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgdXNlclByb2plY3Rpb24sIGRlc3RQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIHRoZSByZXNvbHV0aW9uIGluIHVzZXIgcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCBvciBzb3VyY2Ugb3IgdXNlciBwcm9qZWN0aW9uIGFyZSBtaXNzaW5nIHVuaXRzLCB0aGUgb3JpZ2luYWwgcmVzb2x1dGlvblxuICogaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uIGluIGlucHV0IHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlUHJvamVjdGlvbiBUaGUgaW5wdXQgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gUmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Vc2VyUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBzb3VyY2VQcm9qZWN0aW9uKSB7XG4gICAgaWYgKCF1c2VyUHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICB9XG4gICAgdmFyIHNvdXJjZVVuaXRzID0gZ2V0KHNvdXJjZVByb2plY3Rpb24pLmdldFVuaXRzKCk7XG4gICAgdmFyIHVzZXJVbml0cyA9IHVzZXJQcm9qZWN0aW9uLmdldFVuaXRzKCk7XG4gICAgcmV0dXJuIHNvdXJjZVVuaXRzICYmIHVzZXJVbml0c1xuICAgICAgICA/IChyZXNvbHV0aW9uICogTUVURVJTX1BFUl9VTklUW3NvdXJjZVVuaXRzXSkgLyBNRVRFUlNfUEVSX1VOSVRbdXNlclVuaXRzXVxuICAgICAgICA6IHJlc29sdXRpb247XG59XG4vKipcbiAqIFJldHVybiB0aGUgcmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLiBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgb3Igc291cmNlIG9yIHVzZXIgcHJvamVjdGlvbiBhcmUgbWlzc2luZyB1bml0cywgdGhlIG9yaWdpbmFsIHJlc29sdXRpb25cbiAqIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiBpbiB1c2VyIHByb2plY3Rpb24gdW5pdHMgcGVyIHBpeGVsLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24gaW4gZGVzdGluYXRpb24gcHJvamVjdGlvbiB1bml0cyBwZXIgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tVXNlclJlc29sdXRpb24ocmVzb2x1dGlvbiwgZGVzdFByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiByZXNvbHV0aW9uO1xuICAgIH1cbiAgICB2YXIgc291cmNlVW5pdHMgPSBnZXQoZGVzdFByb2plY3Rpb24pLmdldFVuaXRzKCk7XG4gICAgdmFyIHVzZXJVbml0cyA9IHVzZXJQcm9qZWN0aW9uLmdldFVuaXRzKCk7XG4gICAgcmV0dXJuIHNvdXJjZVVuaXRzICYmIHVzZXJVbml0c1xuICAgICAgICA/IChyZXNvbHV0aW9uICogTUVURVJTX1BFUl9VTklUW3VzZXJVbml0c10pIC8gTUVURVJTX1BFUl9VTklUW3NvdXJjZVVuaXRzXVxuICAgICAgICA6IHJlc29sdXRpb247XG59XG4vKipcbiAqIENyZWF0ZXMgYSBzYWZlIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uIGZyb20gYSBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIFwiU2FmZVwiIG1lYW5zIHRoYXQgaXQgY2FuIGhhbmRsZSB3cmFwcGluZyBvZiB4LWNvb3JkaW5hdGVzIGZvciBnbG9iYWwgcHJvamVjdGlvbnMsXG4gKiBhbmQgdGhhdCBjb29yZGluYXRlcyBleGNlZWRpbmcgdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHZhbGlkaXR5IGV4dGVudCdzIHJhbmdlIHdpbGwgYmVcbiAqIGNsYW1wZWQgdG8gdGhlIHZhbGlkaXR5IHJhbmdlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0UHJvaiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0cmFuc2Zvcm0gVHJhbnNmb3JtIGZ1bmN0aW9uIChzb3VyY2UgdG8gZGVzdGlhdGlvbikuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBTYWZlIHRyYW5zZm9ybSBmdW5jdGlvbiAoc291cmNlIHRvIGRlc3RpYXRpb24pLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2FmZUNvb3JkaW5hdGVUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdFByb2osIHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoY29vcmQpIHtcbiAgICAgICAgdmFyIHNvdXJjZVggPSBjb29yZFswXTtcbiAgICAgICAgdmFyIHNvdXJjZVkgPSBjb29yZFsxXTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkLCB3b3JsZHNBd2F5O1xuICAgICAgICBpZiAoc291cmNlUHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VFeHRlbnRXaWR0aCA9IGdldFdpZHRoKHNvdXJjZUV4dGVudCk7XG4gICAgICAgICAgICB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZCwgc291cmNlUHJvaiwgc291cmNlRXh0ZW50V2lkdGgpO1xuICAgICAgICAgICAgaWYgKHdvcmxkc0F3YXkpIHtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHggdG8gdGhlIHJlYWwgd29ybGRcbiAgICAgICAgICAgICAgICBzb3VyY2VYID0gc291cmNlWCAtIHdvcmxkc0F3YXkgKiBzb3VyY2VFeHRlbnRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdXJjZVggPSBjbGFtcChzb3VyY2VYLCBzb3VyY2VFeHRlbnRbMF0sIHNvdXJjZUV4dGVudFsyXSk7XG4gICAgICAgICAgICBzb3VyY2VZID0gY2xhbXAoc291cmNlWSwgc291cmNlRXh0ZW50WzFdLCBzb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oW3NvdXJjZVgsIHNvdXJjZVldKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkID0gdHJhbnNmb3JtKGNvb3JkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29ybGRzQXdheSAmJiBkZXN0UHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgICAgICAvLyBNb3ZlIHRyYW5zZm9ybWVkIGNvb3JkaW5hdGUgYmFjayB0byB0aGUgb2Zmc2V0IHdvcmxkXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZFswXSArPSB3b3JsZHNBd2F5ICogZ2V0V2lkdGgoZGVzdFByb2ouZ2V0RXh0ZW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcbiAgICB9O1xufVxuLyoqXG4gKiBBZGQgdHJhbnNmb3JtcyB0byBhbmQgZnJvbSBFUFNHOjQzMjYgYW5kIEVQU0c6Mzg1Ny4gIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gKiBieSB3aGVuIHRoaXMgbW9kdWxlIGlzIGV4ZWN1dGVkIGFuZCBzaG91bGQgb25seSBuZWVkIHRvIGJlIGNhbGxlZCBhZ2FpbiBhZnRlclxuICogYGNsZWFyQWxsUHJvamVjdGlvbnMoKWAgaXMgY2FsbGVkIChlLmcuIGluIHRlc3RzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1vbigpIHtcbiAgICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMgdG8gY29udmVydCB3aXRoaW4gc2V0IG9mXG4gICAgLy8gcHJvamVjdGlvbnMgd2l0aCBlcXVhbCBtZWFuaW5nLlxuICAgIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHMzg1N19QUk9KRUNUSU9OUyk7XG4gICAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0c0MzI2X1BST0pFQ1RJT05TKTtcbiAgICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRvIGNvbnZlcnQgRVBTRzo0MzI2IGxpa2UgY29vcmRpbmF0ZXMgdG8gRVBTRzozODU3IGxpa2VcbiAgICAvLyBjb29yZGluYXRlcyBhbmQgYmFjay5cbiAgICBhZGRFcXVpdmFsZW50VHJhbnNmb3JtcyhFUFNHNDMyNl9QUk9KRUNUSU9OUywgRVBTRzM4NTdfUFJPSkVDVElPTlMsIGZyb21FUFNHNDMyNiwgdG9FUFNHNDMyNik7XG59XG5hZGRDb21tb24oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2ouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyXG4gKi9cbmltcG9ydCBDYW52YXNMYXllclJlbmRlcmVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFRpbGVSYW5nZSBmcm9tICcuLi8uLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi8uLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVELCBJTUFHRV9TTU9PVEhJTkdfRU5BQkxFRCB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIG1ha2VJbnZlcnNlLCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi8uLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlRW1wdHksIGVxdWFscywgZ2V0SW50ZXJzZWN0aW9uLCBnZXRUb3BMZWZ0LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjc3NPcGFjaXR5IH0gZnJvbSAnLi4vLi4vY3NzLmpzJztcbmltcG9ydCB7IGZyb21Vc2VyRXh0ZW50IH0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCB7IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24gfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQgeyB0b1N0cmluZyBhcyB0b1RyYW5zZm9ybVN0cmluZyB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlTGF5ZXIgVGlsZSBsYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcih0aWxlTGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUxheWVyKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyZWQgZXh0ZW50IGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBwcmV2aW91cyBgcmVuZGVyRnJhbWUoKWAgY2FsbFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRQcm9qZWN0aW9uID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmV2aXNpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkVGlsZXMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG1wRXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcFRpbGVSYW5nZV8gPSBuZXcgVGlsZVJhbmdlKDAsIDAsIDAsIDApO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRpbGUgaXMgZHJhd2FibGUuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmlzRHJhd2FibGVUaWxlID0gZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgdmFyIHVzZUludGVyaW1UaWxlc09uRXJyb3IgPSB0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpO1xuICAgICAgICByZXR1cm4gKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVNUFRZIHx8XG4gICAgICAgICAgICAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiAmJiAhdXNlSW50ZXJpbVRpbGVzT25FcnJvcikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2UgPSB0aWxlTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgaWYgKCF0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB1c2VJbnRlcmltVGlsZXNPbkVycm9yIGlzIGZhbHNlLCB3ZSBjb25zaWRlciB0aGUgZXJyb3IgdGlsZSBhcyBsb2FkZWQuXG4gICAgICAgICAgICAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuTE9BREVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGVMYXllci5nZXRQcmVsb2FkKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gUHJlbG9hZGVkIHRpbGVzIGZvciBsb3dlciByZXNvbHV0aW9ucyBtaWdodCBoYXZlIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdUaWxlc18gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgICAgdGlsZSA9IHRpbGUuZ2V0SW50ZXJpbVRpbGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZGVkVGlsZUNhbGxiYWNrID0gZnVuY3Rpb24gKHRpbGVzLCB6b29tLCB0aWxlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5sb2FkZWRUaWxlQ2FsbGJhY2suY2FsbCh0aGlzLCB0aWxlcywgem9vbSwgdGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgdmlld0NlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB0aWxlU291cmNlID0gdGlsZUxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICB2YXIgc291cmNlUmV2aXNpb24gPSB0aWxlU291cmNlLmdldFJldmlzaW9uKCk7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHRpbGVTb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgeiA9IHRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHZpZXdSZXNvbHV0aW9uLCB0aWxlU291cmNlLnpEaXJlY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgZXh0ZW50ID0gZnJhbWVTdGF0ZS5leHRlbnQ7XG4gICAgICAgIHZhciBsYXllckV4dGVudCA9IGxheWVyU3RhdGUuZXh0ZW50ICYmIGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICBleHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50LCBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgcHJvamVjdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlUGl4ZWxSYXRpbyA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyk7XG4gICAgICAgIC8vIGRlc2lyZWQgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIGluIHBpeGVsc1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVswXSAqIHRpbGVQaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzFdICogdGlsZVBpeGVsUmF0aW8pO1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gTWF0aC5yb3VuZChNYXRoLnNxcnQod2lkdGggKiB3aWR0aCArIGhlaWdodCAqIGhlaWdodCkpO1xuICAgICAgICAgICAgd2lkdGggPSBzaXplO1xuICAgICAgICAgICAgaGVpZ2h0ID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHggPSAodGlsZVJlc29sdXRpb24gKiB3aWR0aCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgICAgIHZhciBkeSA9ICh0aWxlUmVzb2x1dGlvbiAqIGhlaWdodCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgICAgIHZhciBjYW52YXNFeHRlbnQgPSBbXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzBdIC0gZHgsXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzFdIC0gZHksXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzBdICsgZHgsXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzFdICsgZHksXG4gICAgICAgIF07XG4gICAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdGlsZXNUb0RyYXdCeVogPSB7fTtcbiAgICAgICAgdGlsZXNUb0RyYXdCeVpbel0gPSB7fTtcbiAgICAgICAgdmFyIGZpbmRMb2FkZWRUaWxlcyA9IHRoaXMuY3JlYXRlTG9hZGVkVGlsZUZpbmRlcih0aWxlU291cmNlLCBwcm9qZWN0aW9uLCB0aWxlc1RvRHJhd0J5Wik7XG4gICAgICAgIHZhciB0bXBFeHRlbnQgPSB0aGlzLnRtcEV4dGVudDtcbiAgICAgICAgdmFyIHRtcFRpbGVSYW5nZSA9IHRoaXMudG1wVGlsZVJhbmdlXztcbiAgICAgICAgdGhpcy5uZXdUaWxlc18gPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmdldFRpbGUoeiwgeCwgeSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlc1RvRHJhd0J5Wlt6XVt0aWxlLnRpbGVDb29yZC50b1N0cmluZygpXSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5UcmFuc2l0aW9uID0gdGlsZS5pblRyYW5zaXRpb24odWlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5uZXdUaWxlc18gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5UcmFuc2l0aW9uIHx8IHRoaXMucmVuZGVyZWRUaWxlcy5pbmRleE9mKHRpbGUpID09PSAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsb29rIGZvciBhbHQgdGlsZXMgaWYgYWxwaGEgaXMgMVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkVGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UodGlsZS50aWxlQ29vcmQsIHRtcFRpbGVSYW5nZSwgdG1wRXh0ZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZFRpbGVSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkID0gZmluZExvYWRlZFRpbGVzKHogKyAxLCBjaGlsZFRpbGVSYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY292ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlR3JpZC5mb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlKHRpbGUudGlsZUNvb3JkLCBmaW5kTG9hZGVkVGlsZXMsIHRtcFRpbGVSYW5nZSwgdG1wRXh0ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbnZhc1NjYWxlID0gdGlsZVJlc29sdXRpb24gLyB2aWV3UmVzb2x1dGlvbjtcbiAgICAgICAgLy8gc2V0IGZvcndhcmQgYW5kIGludmVyc2UgcGl4ZWwgdHJhbnNmb3Jtc1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMucGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDIsIGZyYW1lU3RhdGUuc2l6ZVsxXSAvIDIsIDEgLyB0aWxlUGl4ZWxSYXRpbywgMSAvIHRpbGVQaXhlbFJhdGlvLCByb3RhdGlvbiwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpO1xuICAgICAgICB2YXIgY2FudmFzVHJhbnNmb3JtID0gdG9UcmFuc2Zvcm1TdHJpbmcodGhpcy5waXhlbFRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMudXNlQ29udGFpbmVyKHRhcmdldCwgY2FudmFzVHJhbnNmb3JtLCBsYXllclN0YXRlLm9wYWNpdHksIHRoaXMuZ2V0QmFja2dyb3VuZChmcmFtZVN0YXRlKSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgY2FudmFzID0gY29udGV4dC5jYW52YXM7XG4gICAgICAgIG1ha2VJbnZlcnNlKHRoaXMuaW52ZXJzZVBpeGVsVHJhbnNmb3JtLCB0aGlzLnBpeGVsVHJhbnNmb3JtKTtcbiAgICAgICAgLy8gc2V0IHNjYWxlIHRyYW5zZm9ybSBmb3IgY2FsY3VsYXRpbmcgdGlsZSBwb3NpdGlvbnMgb24gdGhlIGNhbnZhc1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMudGVtcFRyYW5zZm9ybSwgd2lkdGggLyAyLCBoZWlnaHQgLyAyLCBjYW52YXNTY2FsZSwgY2FudmFzU2NhbGUsIDAsIC13aWR0aCAvIDIsIC1oZWlnaHQgLyAyKTtcbiAgICAgICAgaWYgKGNhbnZhcy53aWR0aCAhPSB3aWR0aCB8fCBjYW52YXMuaGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgICAgICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCF0aGlzLmNvbnRhaW5lclJldXNlZCkge1xuICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNsaXBVbnJvdGF0ZWQoY29udGV4dCwgZnJhbWVTdGF0ZSwgbGF5ZXJFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGlsZVNvdXJjZS5nZXRJbnRlcnBvbGF0ZSgpKSB7XG4gICAgICAgICAgICBhc3NpZ24oY29udGV4dCwgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZVJlbmRlcihjb250ZXh0LCBmcmFtZVN0YXRlKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA9IDA7XG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICAgICAgdmFyIHpzID0gT2JqZWN0LmtleXModGlsZXNUb0RyYXdCeVopLm1hcChOdW1iZXIpO1xuICAgICAgICB6cy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgICAgICB2YXIgY2xpcHMsIGNsaXBacywgY3VycmVudENsaXA7XG4gICAgICAgIGlmIChsYXllclN0YXRlLm9wYWNpdHkgPT09IDEgJiZcbiAgICAgICAgICAgICghdGhpcy5jb250YWluZXJSZXVzZWQgfHxcbiAgICAgICAgICAgICAgICB0aWxlU291cmNlLmdldE9wYXF1ZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSkpIHtcbiAgICAgICAgICAgIHpzID0genMucmV2ZXJzZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY2xpcHMgPSBbXTtcbiAgICAgICAgICAgIGNsaXBacyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSB6cy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRaID0genNbaV07XG4gICAgICAgICAgICB2YXIgY3VycmVudFRpbGVQaXhlbFNpemUgPSB0aWxlU291cmNlLmdldFRpbGVQaXhlbFNpemUoY3VycmVudFosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihjdXJyZW50Wik7XG4gICAgICAgICAgICB2YXIgY3VycmVudFNjYWxlID0gY3VycmVudFJlc29sdXRpb24gLyB0aWxlUmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBkeF8xID0gY3VycmVudFRpbGVQaXhlbFNpemVbMF0gKiBjdXJyZW50U2NhbGUgKiBjYW52YXNTY2FsZTtcbiAgICAgICAgICAgIHZhciBkeV8xID0gY3VycmVudFRpbGVQaXhlbFNpemVbMV0gKiBjdXJyZW50U2NhbGUgKiBjYW52YXNTY2FsZTtcbiAgICAgICAgICAgIHZhciBvcmlnaW5UaWxlQ29vcmQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFooZ2V0VG9wTGVmdChjYW52YXNFeHRlbnQpLCBjdXJyZW50Wik7XG4gICAgICAgICAgICB2YXIgb3JpZ2luVGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChvcmlnaW5UaWxlQ29vcmQpO1xuICAgICAgICAgICAgdmFyIG9yaWdpbl8xID0gYXBwbHlUcmFuc2Zvcm0odGhpcy50ZW1wVHJhbnNmb3JtLCBbXG4gICAgICAgICAgICAgICAgKHRpbGVQaXhlbFJhdGlvICogKG9yaWdpblRpbGVFeHRlbnRbMF0gLSBjYW52YXNFeHRlbnRbMF0pKSAvXG4gICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICh0aWxlUGl4ZWxSYXRpbyAqIChjYW52YXNFeHRlbnRbM10gLSBvcmlnaW5UaWxlRXh0ZW50WzNdKSkgL1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmVzb2x1dGlvbixcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdmFyIHRpbGVHdXR0ZXIgPSB0aWxlUGl4ZWxSYXRpbyAqIHRpbGVTb3VyY2UuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciB0aWxlc1RvRHJhdyA9IHRpbGVzVG9EcmF3QnlaW2N1cnJlbnRaXTtcbiAgICAgICAgICAgIGZvciAodmFyIHRpbGVDb29yZEtleSBpbiB0aWxlc1RvRHJhdykge1xuICAgICAgICAgICAgICAgIHZhciB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9JbWFnZVRpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRpbGVzVG9EcmF3W3RpbGVDb29yZEtleV0pO1xuICAgICAgICAgICAgICAgIHZhciB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgaW50ZWdlciBwb3NpdGlvbnMgYW5kIHNpemVzIHNvIHRoYXQgdGlsZXMgYWxpZ25cbiAgICAgICAgICAgICAgICB2YXIgeEluZGV4ID0gb3JpZ2luVGlsZUNvb3JkWzFdIC0gdGlsZUNvb3JkWzFdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0WCA9IE1hdGgucm91bmQob3JpZ2luXzFbMF0gLSAoeEluZGV4IC0gMSkgKiBkeF8xKTtcbiAgICAgICAgICAgICAgICB2YXIgeUluZGV4ID0gb3JpZ2luVGlsZUNvb3JkWzJdIC0gdGlsZUNvb3JkWzJdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0WSA9IE1hdGgucm91bmQob3JpZ2luXzFbMV0gLSAoeUluZGV4IC0gMSkgKiBkeV8xKTtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQob3JpZ2luXzFbMF0gLSB4SW5kZXggKiBkeF8xKTtcbiAgICAgICAgICAgICAgICB2YXIgeSA9IE1hdGgucm91bmQob3JpZ2luXzFbMV0gLSB5SW5kZXggKiBkeV8xKTtcbiAgICAgICAgICAgICAgICB2YXIgdyA9IG5leHRYIC0geDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IG5leHRZIC0geTtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHogPT09IGN1cnJlbnRaO1xuICAgICAgICAgICAgICAgIHZhciBpblRyYW5zaXRpb24gPSB0cmFuc2l0aW9uICYmIHRpbGUuZ2V0QWxwaGEoZ2V0VWlkKHRoaXMpLCBmcmFtZVN0YXRlLnRpbWUpICE9PSAxO1xuICAgICAgICAgICAgICAgIGlmICghaW5UcmFuc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjbGlwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgdGlsZSB0aGF0IGFscmVhZHkgZmlsbGVkIGJ5IGEgaGlnaGVyIHogdGlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q2xpcCA9IFt4LCB5LCB4ICsgdywgeSwgeCArIHcsIHkgKyBoLCB4LCB5ICsgaF07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpXzEgPSAwLCBpaSA9IGNsaXBzLmxlbmd0aDsgaV8xIDwgaWk7ICsraV8xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogIT09IGN1cnJlbnRaICYmIGN1cnJlbnRaIDwgY2xpcFpzW2lfMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsaXAgPSBjbGlwc1tpXzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3VudGVyLWNsb2Nrd2lzZSAob3V0ZXIgcmluZykgZm9yIGN1cnJlbnQgdGlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjdXJyZW50Q2xpcFswXSwgY3VycmVudENsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFsyXSwgY3VycmVudENsaXBbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs0XSwgY3VycmVudENsaXBbNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs2XSwgY3VycmVudENsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9ja3dpc2UgKGlubmVyIHJpbmcpIGZvciBoaWdoZXIgeiB0aWxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKGNsaXBbNl0sIGNsaXBbN10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzRdLCBjbGlwWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFsyXSwgY2xpcFszXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMF0sIGNsaXBbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlwcy5wdXNoKGN1cnJlbnRDbGlwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaXBacy5wdXNoKGN1cnJlbnRaKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RpbGVJbWFnZSh0aWxlLCBmcmFtZVN0YXRlLCB4LCB5LCB3LCBoLCB0aWxlR3V0dGVyLCB0cmFuc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoY2xpcHMgJiYgIWluVHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLnVuc2hpZnQodGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMucHVzaCh0aWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVVc2VkVGlsZXMoZnJhbWVTdGF0ZS51c2VkVGlsZXMsIHRpbGVTb3VyY2UsIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbiA9IHNvdXJjZVJldmlzaW9uO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbiA9IHRpbGVSZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLmV4dGVudENoYW5nZWQgPVxuICAgICAgICAgICAgIXRoaXMucmVuZGVyZWRFeHRlbnRfIHx8ICFlcXVhbHModGhpcy5yZW5kZXJlZEV4dGVudF8sIGNhbnZhc0V4dGVudCk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gY2FudmFzRXh0ZW50O1xuICAgICAgICB0aGlzLnJlbmRlcmVkUGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG4gICAgICAgIHRoaXMucmVuZGVyZWRQcm9qZWN0aW9uID0gcHJvamVjdGlvbjtcbiAgICAgICAgdGhpcy5tYW5hZ2VUaWxlUHlyYW1pZChmcmFtZVN0YXRlLCB0aWxlU291cmNlLCB0aWxlR3JpZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwgZXh0ZW50LCB6LCB0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZUV4cGlyZUNhY2hlKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UpO1xuICAgICAgICB0aGlzLnBvc3RSZW5kZXIoY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmIChsYXllclN0YXRlLmV4dGVudCkge1xuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzaWduKGNvbnRleHQsIElNQUdFX1NNT09USElOR19FTkFCTEVEKTtcbiAgICAgICAgaWYgKGNhbnZhc1RyYW5zZm9ybSAhPT0gY2FudmFzLnN0eWxlLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGNhbnZhc1RyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3BhY2l0eSA9IGNzc09wYWNpdHkobGF5ZXJTdGF0ZS5vcGFjaXR5KTtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xuICAgICAgICBpZiAob3BhY2l0eSAhPT0gY29udGFpbmVyLnN0eWxlLm9wYWNpdHkpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gb3BhY2l0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBMZWZ0IG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRvcCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdyBXaWR0aCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQgb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBUaWxlIGd1dHRlci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHRyYW5zaXRpb24gQXBwbHkgYW4gYWxwaGEgdHJhbnNpdGlvbi5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZHJhd1RpbGVJbWFnZSA9IGZ1bmN0aW9uICh0aWxlLCBmcmFtZVN0YXRlLCB4LCB5LCB3LCBoLCBndXR0ZXIsIHRyYW5zaXRpb24pIHtcbiAgICAgICAgdmFyIGltYWdlID0gdGhpcy5nZXRUaWxlSW1hZ2UodGlsZSk7XG4gICAgICAgIGlmICghaW1hZ2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRoaXMpO1xuICAgICAgICB2YXIgYWxwaGEgPSB0cmFuc2l0aW9uID8gdGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgOiAxO1xuICAgICAgICB2YXIgYWxwaGFDaGFuZ2VkID0gYWxwaGEgIT09IHRoaXMuY29udGV4dC5nbG9iYWxBbHBoYTtcbiAgICAgICAgaWYgKGFscGhhQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGd1dHRlciwgZ3V0dGVyLCBpbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIGltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHgsIHksIHcsIGgpO1xuICAgICAgICBpZiAoYWxwaGFDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhbHBoYSAhPT0gMSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5hbmltYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB0aWxlLmVuZFRyYW5zaXRpb24odWlkKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IEltYWdlXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQgPyBjb250ZXh0LmNhbnZhcyA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGltYWdlIGZyb20gYSB0aWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0VGlsZUltYWdlID0gZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRpbGUuZ2V0SW1hZ2UoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuc2NoZWR1bGVFeHBpcmVDYWNoZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0aWxlU291cmNlKSB7XG4gICAgICAgIGlmICh0aWxlU291cmNlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBwb3N0UmVuZGVyRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZVNvdXJjZSwgbWFwLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGVTb3VyY2VLZXkgPSBnZXRVaWQodGlsZVNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS51c2VkVGlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVNvdXJjZS5leHBpcmVDYWNoZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uLCBmcmFtZVN0YXRlLnVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKG51bGwsIHRpbGVTb3VyY2UpO1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5Qb3N0UmVuZGVyRnVuY3Rpb259ICovIChwb3N0UmVuZGVyRnVuY3Rpb24pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+Pn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlU291cmNlIFRpbGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KCcuLi8uLi9UaWxlLmpzJykuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUudXBkYXRlVXNlZFRpbGVzID0gZnVuY3Rpb24gKHVzZWRUaWxlcywgdGlsZVNvdXJjZSwgdGlsZSkge1xuICAgICAgICAvLyBGSVhNRSBzaG91bGQgd2UgdXNlIHRpbGVzVG9EcmF3QnlaIGluc3RlYWQ/XG4gICAgICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIHVzZWRUaWxlcykpIHtcbiAgICAgICAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHVzZWRUaWxlc1t0aWxlU291cmNlS2V5XVt0aWxlLmdldEtleSgpXSA9IHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYW5hZ2UgdGlsZSBweXJhbWlkLlxuICAgICAqIFRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgYSBudW1iZXIgb2YgZnVuY3Rpb25zIHJlbGF0ZWQgdG8gdGhlIHRpbGVzIGF0IHRoZVxuICAgICAqIGN1cnJlbnQgem9vbSBhbmQgbG93ZXIgem9vbSBsZXZlbHM6XG4gICAgICogLSByZWdpc3RlcnMgaWRsZSB0aWxlcyBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzIHNvIHRoYXQgdGhleSBhcmUgbm90XG4gICAgICogICBkaXNjYXJkZWQgYnkgdGhlIHRpbGUgcXVldWVcbiAgICAgKiAtIGVucXVldWVzIG1pc3NpbmcgdGlsZXNcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRpbGUgZ3JpZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50WiBDdXJyZW50IFouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHByZWxvYWQgTG9hZCBsb3cgcmVzb2x1dGlvbiB0aWxlcyB1cCB0byAncHJlbG9hZCcgbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbb3B0X3RpbGVDYWxsYmFja10gVGlsZSBjYWxsYmFjay5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLm1hbmFnZVRpbGVQeXJhbWlkID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBleHRlbnQsIGN1cnJlbnRaLCBwcmVsb2FkLCBvcHRfdGlsZUNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICBpZiAoISh0aWxlU291cmNlS2V5IGluIGZyYW1lU3RhdGUud2FudGVkVGlsZXMpKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLndhbnRlZFRpbGVzW3RpbGVTb3VyY2VLZXldID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdhbnRlZFRpbGVzID0gZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XTtcbiAgICAgICAgdmFyIHRpbGVRdWV1ZSA9IGZyYW1lU3RhdGUudGlsZVF1ZXVlO1xuICAgICAgICB2YXIgbWluWm9vbSA9IHRpbGVHcmlkLmdldE1pblpvb20oKTtcbiAgICAgICAgdmFyIHRpbGVDb3VudCA9IDA7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlUmFuZ2UsIHRpbGVSZXNvbHV0aW9uLCB4LCB5LCB6O1xuICAgICAgICBmb3IgKHogPSBtaW5ab29tOyB6IDw9IGN1cnJlbnRaOyArK3opIHtcbiAgICAgICAgICAgIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6LCB0aWxlUmFuZ2UpO1xuICAgICAgICAgICAgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICAgICAgZm9yICh4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgICAgICAgICAgIGZvciAoeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRaIC0geiA8PSBwcmVsb2FkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK3RpbGVDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUgPSB0aWxlU291cmNlLmdldFRpbGUoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2FudGVkVGlsZXNbdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGlsZVF1ZXVlLmlzS2V5UXVldWVkKHRpbGUuZ2V0S2V5KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVRdWV1ZS5lbnF1ZXVlKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2VudGVyKHRpbGUudGlsZUNvb3JkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0X3RpbGVDYWxsYmFjayAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0X3RpbGVDYWxsYmFjayh0aWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2UudXNlVGlsZSh6LCB4LCB5LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aWxlU291cmNlLnVwZGF0ZUNhY2hlU2l6ZSh0aWxlQ291bnQsIHByb2plY3Rpb24pO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xufShDYW52YXNMYXllclJlbmRlcmVyKSk7XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVGlsZS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4uLy4uL2xheWVyL1ZlY3RvclRpbGUuanNcIikuZGVmYXVsdH1cbiAqL1xuQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldExheWVyO1xuZXhwb3J0IGRlZmF1bHQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlTGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVTdGF0ZVxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBJRExFOiAwLFxuICAgIExPQURJTkc6IDEsXG4gICAgTE9BREVEOiAyLFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB0aGF0IHRpbGUgbG9hZGluZyBmYWlsZWRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIEVSUk9SOiAzLFxuICAgIEVNUFRZOiA0LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVTdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1RpbGVcbiAqL1xuaW1wb3J0IEJhc2VUaWxlTGF5ZXIgZnJvbSAnLi9CYXNlVGlsZS5qcyc7XG5pbXBvcnQgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIgZnJvbSAnLi4vcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGVTb3VyY2VUeXBlXG4gKiBAZXh0ZW5kcyBCYXNlVGlsZUxheWVyPFRpbGVTb3VyY2VUeXBlLCBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcj5cbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUxheWVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9CYXNlVGlsZS5qc1wiKS5PcHRpb25zPFRpbGVTb3VyY2VUeXBlPn0gW29wdF9vcHRpb25zXSBUaWxlIGxheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUxheWVyKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIuY2FsbCh0aGlzLCBvcHRfb3B0aW9ucykgfHwgdGhpcztcbiAgICB9XG4gICAgVGlsZUxheWVyLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcih0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlTGF5ZXI7XG59KEJhc2VUaWxlTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL1ZpZXdQcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBDRU5URVI6ICdjZW50ZXInLFxuICAgIFJFU09MVVRJT046ICdyZXNvbHV0aW9uJyxcbiAgICBST1RBVElPTjogJ3JvdGF0aW9uJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3UHJvcGVydHkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Nvb3JkaW5hdGVcbiAqL1xuaW1wb3J0IHsgZ2V0V2lkdGggfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgcGFkTnVtYmVyIH0gZnJvbSAnLi9zdHJpbmcuanMnO1xuLyoqXG4gKiBBbiBhcnJheSBvZiBudW1iZXJzIHJlcHJlc2VudGluZyBhbiB4eSBjb29yZGluYXRlLiBFeGFtcGxlOiBgWzE2LCA0OF1gLlxuICogQHR5cGVkZWYge0FycmF5PG51bWJlcj59IENvb3JkaW5hdGVcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gYW5kXG4gKiB0cmFuc2Zvcm1zIGl0IGludG8gYSBge3N0cmluZ31gLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoQ29vcmRpbmF0ZXx1bmRlZmluZWQpKTogc3RyaW5nfSBDb29yZGluYXRlRm9ybWF0XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQWRkIGBkZWx0YWAgdG8gYGNvb3JkaW5hdGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kIHJldHVybmVkXG4gKiBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHthZGR9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICBhZGQoY29vcmQsIFstMiwgNF0pO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbNS44NSwgNTEuOTgzMzMzXVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBkZWx0YSBEZWx0YS5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBpbnB1dCBjb29yZGluYXRlIGFkanVzdGVkIGJ5XG4gKiB0aGUgZ2l2ZW4gZGVsdGEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoY29vcmRpbmF0ZSwgZGVsdGEpIHtcbiAgICBjb29yZGluYXRlWzBdICs9ICtkZWx0YVswXTtcbiAgICBjb29yZGluYXRlWzFdICs9ICtkZWx0YVsxXTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBjaXJjbGUuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2dlb20vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBUaGUgY2lyY2xlLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ2xvc2VzdCBwb2ludCBvbiB0aGUgY2lyY3VtZmVyZW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPbkNpcmNsZShjb29yZGluYXRlLCBjaXJjbGUpIHtcbiAgICB2YXIgciA9IGNpcmNsZS5nZXRSYWRpdXMoKTtcbiAgICB2YXIgY2VudGVyID0gY2lyY2xlLmdldENlbnRlcigpO1xuICAgIHZhciB4MCA9IGNlbnRlclswXTtcbiAgICB2YXIgeTAgPSBjZW50ZXJbMV07XG4gICAgdmFyIHgxID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeTEgPSBjb29yZGluYXRlWzFdO1xuICAgIHZhciBkeCA9IHgxIC0geDA7XG4gICAgdmFyIGR5ID0geTEgLSB5MDtcbiAgICBpZiAoZHggPT09IDAgJiYgZHkgPT09IDApIHtcbiAgICAgICAgZHggPSAxO1xuICAgIH1cbiAgICB2YXIgZCA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgdmFyIHggPSB4MCArIChyICogZHgpIC8gZDtcbiAgICB2YXIgeSA9IHkwICsgKHIgKiBkeSkgLyBkO1xuICAgIHJldHVybiBbeCwgeV07XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHBvaW50IGNsb3Nlc3QgdG8gdGhlIHBhc3NlZCBjb29yZGluYXRlIG9uIHRoZSBwYXNzZWQgc2VnbWVudC5cbiAqIFRoaXMgaXMgdGhlIGZvb3Qgb2YgdGhlIHBlcnBlbmRpY3VsYXIgb2YgdGhlIGNvb3JkaW5hdGUgdG8gdGhlIHNlZ21lbnQgd2hlblxuICogdGhlIGZvb3QgaXMgb24gdGhlIHNlZ21lbnQsIG9yIHRoZSBjbG9zZXN0IHNlZ21lbnQgY29vcmRpbmF0ZSB3aGVuIHRoZSBmb290XG4gKiBpcyBvdXRzaWRlIHRoZSBzZWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7QXJyYXk8Q29vcmRpbmF0ZT59IHNlZ21lbnQgVGhlIHR3byBjb29yZGluYXRlc1xuICogb2YgdGhlIHNlZ21lbnQuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBUaGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZlxuICogdGhlIGNvb3JkaW5hdGUgdG8gdGhlIHNlZ21lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0T25TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgICB2YXIgeDAgPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5MCA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIHN0YXJ0ID0gc2VnbWVudFswXTtcbiAgICB2YXIgZW5kID0gc2VnbWVudFsxXTtcbiAgICB2YXIgeDEgPSBzdGFydFswXTtcbiAgICB2YXIgeTEgPSBzdGFydFsxXTtcbiAgICB2YXIgeDIgPSBlbmRbMF07XG4gICAgdmFyIHkyID0gZW5kWzFdO1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICB2YXIgYWxvbmcgPSBkeCA9PT0gMCAmJiBkeSA9PT0gMFxuICAgICAgICA/IDBcbiAgICAgICAgOiAoZHggKiAoeDAgLSB4MSkgKyBkeSAqICh5MCAtIHkxKSkgLyAoZHggKiBkeCArIGR5ICogZHkgfHwgMCk7XG4gICAgdmFyIHgsIHk7XG4gICAgaWYgKGFsb25nIDw9IDApIHtcbiAgICAgICAgeCA9IHgxO1xuICAgICAgICB5ID0geTE7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFsb25nID49IDEpIHtcbiAgICAgICAgeCA9IHgyO1xuICAgICAgICB5ID0geTI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB4ID0geDEgKyBhbG9uZyAqIGR4O1xuICAgICAgICB5ID0geTEgKyBhbG9uZyAqIGR5O1xuICAgIH1cbiAgICByZXR1cm4gW3gsIHldO1xufVxuLyoqXG4gKiBSZXR1cm5zIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGVGb3JtYXR9IGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gKiB1c2VkIHRvIGZvcm1hdFxuICogYSB7Q29vcmRpbmF0ZX0gdG8gYSBzdHJpbmcuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2NyZWF0ZVN0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHN0cmluZ2lmeUZ1bmMgPSBjcmVhdGVTdHJpbmdYWSgpO1xuICogICAgIHZhciBvdXQgPSBzdHJpbmdpZnlGdW5jKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc4LCA0OCdcbiAqXG4gKiBFeGFtcGxlIHdpdGggZXhwbGljaXRseSBzcGVjaWZ5aW5nIDIgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKDIpO1xuICogICAgIHZhciBvdXQgPSBzdHJpbmdpZnlGdW5jKGNvb3JkKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc3Ljg1LCA0Ny45OCdcbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZUZvcm1hdH0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdHJpbmdYWShvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nIFhZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHJldHVybiB0b1N0cmluZ1hZKGNvb3JkaW5hdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cyk7XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBoZW1pc3BoZXJlcyBIZW1pc3BoZXJlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWdyZWVzIERlZ3JlZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWdyZWVzVG9TdHJpbmdIRE1TKGhlbWlzcGhlcmVzLCBkZWdyZWVzLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICB2YXIgbm9ybWFsaXplZERlZ3JlZXMgPSBtb2R1bG8oZGVncmVlcyArIDE4MCwgMzYwKSAtIDE4MDtcbiAgICB2YXIgeCA9IE1hdGguYWJzKDM2MDAgKiBub3JtYWxpemVkRGVncmVlcyk7XG4gICAgdmFyIGRmbFByZWNpc2lvbiA9IG9wdF9mcmFjdGlvbkRpZ2l0cyB8fCAwO1xuICAgIHZhciBwcmVjaXNpb24gPSBNYXRoLnBvdygxMCwgZGZsUHJlY2lzaW9uKTtcbiAgICB2YXIgZGVnID0gTWF0aC5mbG9vcih4IC8gMzYwMCk7XG4gICAgdmFyIG1pbiA9IE1hdGguZmxvb3IoKHggLSBkZWcgKiAzNjAwKSAvIDYwKTtcbiAgICB2YXIgc2VjID0geCAtIGRlZyAqIDM2MDAgLSBtaW4gKiA2MDtcbiAgICBzZWMgPSBNYXRoLmNlaWwoc2VjICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjtcbiAgICBpZiAoc2VjID49IDYwKSB7XG4gICAgICAgIHNlYyA9IDA7XG4gICAgICAgIG1pbiArPSAxO1xuICAgIH1cbiAgICBpZiAobWluID49IDYwKSB7XG4gICAgICAgIG1pbiA9IDA7XG4gICAgICAgIGRlZyArPSAxO1xuICAgIH1cbiAgICByZXR1cm4gKGRlZyArXG4gICAgICAgICdcXHUwMGIwICcgK1xuICAgICAgICBwYWROdW1iZXIobWluLCAyKSArXG4gICAgICAgICdcXHUyMDMyICcgK1xuICAgICAgICBwYWROdW1iZXIoc2VjLCAyLCBkZmxQcmVjaXNpb24pICtcbiAgICAgICAgJ1xcdTIwMzMnICtcbiAgICAgICAgKG5vcm1hbGl6ZWREZWdyZWVzID09IDBcbiAgICAgICAgICAgID8gJydcbiAgICAgICAgICAgIDogJyAnICsgaGVtaXNwaGVyZXMuY2hhckF0KG5vcm1hbGl6ZWREZWdyZWVzIDwgMCA/IDEgOiAwKSkpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0gdG8gYSBzdHJpbmdcbiAqIHVzaW5nIHRoZSBnaXZlbiBzdHJpbmcgdGVtcGxhdGUuIFRoZSBzdHJpbmdzIGB7eH1gIGFuZCBge3l9YCBpbiB0aGUgdGVtcGxhdGVcbiAqIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCB0aGUgZmlyc3QgYW5kIHNlY29uZCBjb29yZGluYXRlIHZhbHVlcyByZXNwZWN0aXZlbHkuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgdGhlIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2Zvcm1hdH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIHZhciBvdXQgPSBmb3JtYXQoY29vcmQsIHRlbXBsYXRlKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICdDb29yZGluYXRlIGlzICg4fDQ4KS4nXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgdGhlIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge2Zvcm1hdH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciB0ZW1wbGF0ZSA9ICdDb29yZGluYXRlIGlzICh7eH18e3l9KS4nO1xuICogICAgIHZhciBvdXQgPSBmb3JtYXQoY29vcmQsIHRlbXBsYXRlLCAyKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICdDb29yZGluYXRlIGlzICg3Ljg1fDQ3Ljk4KS4nXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgQSB0ZW1wbGF0ZSBzdHJpbmcgd2l0aCBge3h9YCBhbmQgYHt5fWAgcGxhY2Vob2xkZXJzXG4gKiAgICAgdGhhdCB3aWxsIGJlIHJlcGxhY2VkIGJ5IGZpcnN0IGFuZCBzZWNvbmQgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9mcmFjdGlvbkRpZ2l0c10gVGhlIG51bWJlciBvZiBkaWdpdHMgdG8gaW5jbHVkZVxuICogICAgYWZ0ZXIgdGhlIGRlY2ltYWwgcG9pbnQuIERlZmF1bHQgaXMgYDBgLlxuICogQHJldHVybiB7c3RyaW5nfSBGb3JtYXR0ZWQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdChjb29yZGluYXRlLCB0ZW1wbGF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAgICAgICAucmVwbGFjZSgne3h9JywgY29vcmRpbmF0ZVswXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpXG4gICAgICAgICAgICAucmVwbGFjZSgne3l9JywgY29vcmRpbmF0ZVsxXS50b0ZpeGVkKG9wdF9mcmFjdGlvbkRpZ2l0cykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlMiBTZWNvbmQgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gY29vcmRpbmF0ZXMgYXJlIGVxdWFsLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXF1YWxzKGNvb3JkaW5hdGUxLCBjb29yZGluYXRlMikge1xuICAgIHZhciBlcXVhbHMgPSB0cnVlO1xuICAgIGZvciAodmFyIGkgPSBjb29yZGluYXRlMS5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICBpZiAoY29vcmRpbmF0ZTFbaV0gIT0gY29vcmRpbmF0ZTJbaV0pIHtcbiAgICAgICAgICAgIGVxdWFscyA9IGZhbHNlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVxdWFscztcbn1cbi8qKlxuICogUm90YXRlIGBjb29yZGluYXRlYCBieSBgYW5nbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kXG4gKiByZXR1cm5lZCBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtyb3RhdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgcm90YXRlUmFkaWFucyA9IE1hdGguUEkgLyAyOyAvLyA5MCBkZWdyZWVzXG4gKiAgICAgcm90YXRlKGNvb3JkLCByb3RhdGVSYWRpYW5zKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWy00Ny45ODMzMzMsIDcuODVdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgQW5nbGUgaW4gcmFkaWFuLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZShjb29yZGluYXRlLCBhbmdsZSkge1xuICAgIHZhciBjb3NBbmdsZSA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIHggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgY29vcmRpbmF0ZVswXSA9IHg7XG4gICAgY29vcmRpbmF0ZVsxXSA9IHk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIFNjYWxlIGBjb29yZGluYXRlYCBieSBgc2NhbGVgLiBgY29vcmRpbmF0ZWAgaXMgbW9kaWZpZWQgaW4gcGxhY2UgYW5kIHJldHVybmVkXG4gKiBieSB0aGUgZnVuY3Rpb24uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtzY2FsZSBhcyBzY2FsZUNvb3JkaW5hdGV9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc2NhbGUgPSAxLjI7XG4gKiAgICAgc2NhbGVDb29yZGluYXRlKGNvb3JkLCBzY2FsZSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs5LjQyLCA1Ny41Nzk5OTk2XVxuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNjYWxlIFNjYWxlIGZhY3Rvci5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IENvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShjb29yZGluYXRlLCBzY2FsZSkge1xuICAgIGNvb3JkaW5hdGVbMF0gKj0gc2NhbGU7XG4gICAgY29vcmRpbmF0ZVsxXSAqPSBzY2FsZTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgICB2YXIgZHggPSBjb29yZDFbMF0gLSBjb29yZDJbMF07XG4gICAgdmFyIGR5ID0gY29vcmQxWzFdIC0gY29vcmQyWzFdO1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDEgRmlyc3QgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmQyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7bnVtYmVyfSBEaXN0YW5jZSBiZXR3ZWVuIGNvb3JkMSBhbmQgY29vcmQyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzdGFuY2UoY29vcmQxLCBjb29yZDIpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHNxdWFyZWREaXN0YW5jZShjb29yZDEsIGNvb3JkMikpO1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgdGhlIHNxdWFyZWQgZGlzdGFuY2UgZnJvbSBhIGNvb3JkaW5hdGUgdG8gYSBsaW5lIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgb2YgdGhlIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBMaW5lIHNlZ21lbnQgKDJcbiAqIGNvb3JkaW5hdGVzKS5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBwb2ludCB0byB0aGUgbGluZSBzZWdtZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3F1YXJlZERpc3RhbmNlVG9TZWdtZW50KGNvb3JkaW5hdGUsIHNlZ21lbnQpIHtcbiAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKGNvb3JkaW5hdGUsIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkpO1xufVxuLyoqXG4gKiBGb3JtYXQgYSBnZW9ncmFwaGljIGNvb3JkaW5hdGUgd2l0aCB0aGUgaGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcywgYW5kXG4gKiBzZWNvbmRzLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nSERNU30gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBvdXQgPSB0b1N0cmluZ0hETVMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzQ3wrAgNTjigLIgNjDigLMgTiA3wrAgNTDigLIgNjDigLMgRSdcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyAxIGZyYWN0aW9uYWwgZGlnaXQ6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdIRE1TfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MC4w4oCzIE4gN8KwIDUw4oCyIDYwLjDigLMgRSdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEhlbWlzcGhlcmUsIGRlZ3JlZXMsIG1pbnV0ZXMgYW5kIHNlY29uZHMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ0hETVMoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSB7XG4gICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIChkZWdyZWVzVG9TdHJpbmdIRE1TKCdOUycsIGNvb3JkaW5hdGVbMV0sIG9wdF9mcmFjdGlvbkRpZ2l0cykgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIGRlZ3JlZXNUb1N0cmluZ0hETVMoJ0VXJywgY29vcmRpbmF0ZVswXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBGb3JtYXQgYSBjb29yZGluYXRlIGFzIGEgY29tbWEgZGVsaW1pdGVkIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nWFkoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIDEgZnJhY3Rpb25hbCBkaWdpdDpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ1hZfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nWFkoY29vcmQsIDEpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuOCwgNDguMCdcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFhZLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmdYWShjb29yZGluYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICByZXR1cm4gZm9ybWF0KGNvb3JkaW5hdGUsICd7eH0sIHt5fScsIG9wdF9mcmFjdGlvbkRpZ2l0cyk7XG59XG4vKipcbiAqIE1vZGlmaWVzIHRoZSBwcm92aWRlZCBjb29yZGluYXRlIGluLXBsYWNlIHRvIGJlIHdpdGhpbiB0aGUgcmVhbCB3b3JsZFxuICogZXh0ZW50LiBUaGUgbG93ZXIgcHJvamVjdGlvbiBleHRlbnQgYm91bmRhcnkgaXMgaW5jbHVzaXZlLCB0aGUgdXBwZXIgb25lXG4gKiBleGNsdXNpdmUuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIHdpdGhpbiB0aGUgcmVhbCB3b3JsZCBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwWChjb29yZGluYXRlLCBwcm9qZWN0aW9uKSB7XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSkge1xuICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb24uZ2V0RXh0ZW50KCkpO1xuICAgICAgICB2YXIgd29ybGRzQXdheSA9IGdldFdvcmxkc0F3YXkoY29vcmRpbmF0ZSwgcHJvamVjdGlvbiwgd29ybGRXaWR0aCk7XG4gICAgICAgIGlmICh3b3JsZHNBd2F5KSB7XG4gICAgICAgICAgICBjb29yZGluYXRlWzBdIC09IHdvcmxkc0F3YXkgKiB3b3JsZFdpZHRoO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc291cmNlRXh0ZW50V2lkdGhdIFdpZHRoIG9mIHRoZSBzb3VyY2UgZXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBPZmZzZXQgaW4gd29ybGQgd2lkdGhzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCBvcHRfc291cmNlRXh0ZW50V2lkdGgpIHtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgdmFyIHdvcmxkc0F3YXkgPSAwO1xuICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiZcbiAgICAgICAgKGNvb3JkaW5hdGVbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdIHx8IGNvb3JkaW5hdGVbMF0gPiBwcm9qZWN0aW9uRXh0ZW50WzJdKSkge1xuICAgICAgICB2YXIgc291cmNlRXh0ZW50V2lkdGggPSBvcHRfc291cmNlRXh0ZW50V2lkdGggfHwgZ2V0V2lkdGgocHJvamVjdGlvbkV4dGVudCk7XG4gICAgICAgIHdvcmxkc0F3YXkgPSBNYXRoLmZsb29yKChjb29yZGluYXRlWzBdIC0gcHJvamVjdGlvbkV4dGVudFswXSkgLyBzb3VyY2VFeHRlbnRXaWR0aCk7XG4gICAgfVxuICAgIHJldHVybiB3b3JsZHNBd2F5O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29vcmRpbmF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY2VudGVyY29uc3RyYWludFxuICovXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkKSwgbnVtYmVyLCBpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZSwgYm9vbGVhbj0sIEFycmF5PG51bWJlcj49KTogKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb25seUNlbnRlciBJZiB0cnVlLCB0aGUgY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyLlxuICogQHBhcmFtIHtib29sZWFufSBzbW9vdGggSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIGdvIHNsaWdodGx5IG91dCBvZiB0aGUgZ2l2ZW4gZXh0ZW50XG4gKiAob25seSBkdXJpbmcgaW50ZXJhY3Rpb24gYW5kIGFuaW1hdGlvbikuXG4gKiBAcmV0dXJuIHtUeXBlfSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUV4dGVudChleHRlbnQsIG9ubHlDZW50ZXIsIHNtb290aCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemU7IHVudXNlZCBpZiBgb25seUNlbnRlcmAgd2FzIHNwZWNpZmllZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9jZW50ZXJTaGlmdF0gU2hpZnQgYmV0d2VlbiBtYXAgY2VudGVyIGFuZCB2aWV3cG9ydCBjZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nLCBvcHRfY2VudGVyU2hpZnQpIHtcbiAgICAgICAgaWYgKGNlbnRlcikge1xuICAgICAgICAgICAgdmFyIHZpZXdXaWR0aCA9IG9ubHlDZW50ZXIgPyAwIDogc2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdmlld0hlaWdodCA9IG9ubHlDZW50ZXIgPyAwIDogc2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgc2hpZnRYID0gb3B0X2NlbnRlclNoaWZ0ID8gb3B0X2NlbnRlclNoaWZ0WzBdIDogMDtcbiAgICAgICAgICAgIHZhciBzaGlmdFkgPSBvcHRfY2VudGVyU2hpZnQgPyBvcHRfY2VudGVyU2hpZnRbMV0gOiAwO1xuICAgICAgICAgICAgdmFyIG1pblggPSBleHRlbnRbMF0gKyB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgICAgICAgdmFyIG1heFggPSBleHRlbnRbMl0gLSB2aWV3V2lkdGggLyAyICsgc2hpZnRYO1xuICAgICAgICAgICAgdmFyIG1pblkgPSBleHRlbnRbMV0gKyB2aWV3SGVpZ2h0IC8gMiArIHNoaWZ0WTtcbiAgICAgICAgICAgIHZhciBtYXhZID0gZXh0ZW50WzNdIC0gdmlld0hlaWdodCAvIDIgKyBzaGlmdFk7XG4gICAgICAgICAgICAvLyBub3RlOiB3aGVuIHpvb21pbmcgb3V0IG9mIGJvdW5kcywgbWluIGFuZCBtYXggdmFsdWVzIGZvciB4IGFuZCB5IG1heVxuICAgICAgICAgICAgLy8gZW5kIHVwIGludmVydGVkIChtaW4gPiBtYXgpOyB0aGlzIGhhcyB0byBiZSBhY2NvdW50ZWQgZm9yXG4gICAgICAgICAgICBpZiAobWluWCA+IG1heFgpIHtcbiAgICAgICAgICAgICAgICBtaW5YID0gKG1heFggKyBtaW5YKSAvIDI7XG4gICAgICAgICAgICAgICAgbWF4WCA9IG1pblg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobWluWSA+IG1heFkpIHtcbiAgICAgICAgICAgICAgICBtaW5ZID0gKG1heFkgKyBtaW5ZKSAvIDI7XG4gICAgICAgICAgICAgICAgbWF4WSA9IG1pblk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgeCA9IGNsYW1wKGNlbnRlclswXSwgbWluWCwgbWF4WCk7XG4gICAgICAgICAgICB2YXIgeSA9IGNsYW1wKGNlbnRlclsxXSwgbWluWSwgbWF4WSk7XG4gICAgICAgICAgICB2YXIgcmF0aW8gPSAzMCAqIHJlc29sdXRpb247XG4gICAgICAgICAgICAvLyBkdXJpbmcgYW4gaW50ZXJhY3Rpb24sIGFsbG93IHNvbWUgb3ZlcnNjcm9sbFxuICAgICAgICAgICAgaWYgKG9wdF9pc01vdmluZyAmJiBzbW9vdGgpIHtcbiAgICAgICAgICAgICAgICB4ICs9XG4gICAgICAgICAgICAgICAgICAgIC1yYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBtaW5YIC0gY2VudGVyWzBdKSAvIHJhdGlvKSArXG4gICAgICAgICAgICAgICAgICAgICAgICByYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBjZW50ZXJbMF0gLSBtYXhYKSAvIHJhdGlvKTtcbiAgICAgICAgICAgICAgICB5ICs9XG4gICAgICAgICAgICAgICAgICAgIC1yYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBtaW5ZIC0gY2VudGVyWzFdKSAvIHJhdGlvKSArXG4gICAgICAgICAgICAgICAgICAgICAgICByYXRpbyAqIE1hdGgubG9nKDEgKyBNYXRoLm1heCgwLCBjZW50ZXJbMV0gLSBtYXhZKSAvIHJhdGlvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbeCwgeV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIENlbnRlci5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9uZShjZW50ZXIpIHtcbiAgICByZXR1cm4gY2VudGVyO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2VudGVyY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVzb2x1dGlvbmNvbnN0cmFpbnRcbiAqL1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0SGVpZ2h0LCBnZXRXaWR0aCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpbmVhckZpbmROZWFyZXN0IH0gZnJvbSAnLi9hcnJheS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIG51bWJlciwgaW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemUsIGJvb2xlYW49KTogKG51bWJlcnx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIG1vZGlmaWVkIHJlc29sdXRpb24gdGFraW5nIGludG8gYWNjb3VudCB0aGUgdmlld3BvcnQgc2l6ZSBhbmQgbWF4aW11bVxuICogYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4RXh0ZW50IE1heGltdW0gYWxsb3dlZCBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSB2aWV3cG9ydFNpemUgVmlld3BvcnQgc2l6ZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvd0Z1bGxFeHRlbnQgV2hldGhlciB0byBzaG93IHRoZSBmdWxsIGV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gQ2FwcGVkIHJlc29sdXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgbWF4RXh0ZW50LCB2aWV3cG9ydFNpemUsIHNob3dGdWxsRXh0ZW50KSB7XG4gICAgdmFyIHhSZXNvbHV0aW9uID0gZ2V0V2lkdGgobWF4RXh0ZW50KSAvIHZpZXdwb3J0U2l6ZVswXTtcbiAgICB2YXIgeVJlc29sdXRpb24gPSBnZXRIZWlnaHQobWF4RXh0ZW50KSAvIHZpZXdwb3J0U2l6ZVsxXTtcbiAgICBpZiAoc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKHJlc29sdXRpb24sIE1hdGgubWF4KHhSZXNvbHV0aW9uLCB5UmVzb2x1dGlvbikpO1xuICAgIH1cbiAgICByZXR1cm4gTWF0aC5taW4ocmVzb2x1dGlvbiwgTWF0aC5taW4oeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKSk7XG59XG4vKipcbiAqIFJldHVybnMgYSBtb2RpZmllZCByZXNvbHV0aW9uIHRvIGJlIGJldHdlZW4gbWF4UmVzb2x1dGlvbiBhbmQgbWluUmVzb2x1dGlvbiB3aGlsZVxuICogc3RpbGwgYWxsb3dpbmcgdGhlIHZhbHVlIHRvIGJlIHNsaWdodGx5IG91dCBvZiBib3VuZHMuXG4gKiBOb3RlOiB0aGUgY29tcHV0YXRpb24gaXMgYmFzZWQgb24gdGhlIGxvZ2FyaXRobSBmdW5jdGlvbiAobG4pOlxuICogIC0gYXQgMSwgbG4oeCkgaXMgMFxuICogIC0gYWJvdmUgMSwgbG4oeCkga2VlcHMgaW5jcmVhc2luZyBidXQgYXQgYSBtdWNoIHNsb3dlciBwYWNlIHRoYW4geFxuICogVGhlIGZpbmFsIHJlc3VsdCBpcyBjbGFtcGVkIHRvIHByZXZlbnQgZ2V0dGluZyB0b28gZmFyIGF3YXkgZnJvbSBib3VuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBNaW4gcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gU21vb3RoZWQgcmVzb2x1dGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgbWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbikge1xuICAgIHZhciByZXN1bHQgPSBNYXRoLm1pbihyZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uKTtcbiAgICB2YXIgcmF0aW8gPSA1MDtcbiAgICByZXN1bHQgKj1cbiAgICAgICAgTWF0aC5sb2coMSArIHJhdGlvICogTWF0aC5tYXgoMCwgcmVzb2x1dGlvbiAvIG1heFJlc29sdXRpb24gLSAxKSkgLyByYXRpbyArXG4gICAgICAgICAgICAxO1xuICAgIGlmIChtaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgIHJlc3VsdCA9IE1hdGgubWF4KHJlc3VsdCwgbWluUmVzb2x1dGlvbik7XG4gICAgICAgIHJlc3VsdCAvPVxuICAgICAgICAgICAgTWF0aC5sb2coMSArIHJhdGlvICogTWF0aC5tYXgoMCwgbWluUmVzb2x1dGlvbiAvIHJlc29sdXRpb24gLSAxKSkgL1xuICAgICAgICAgICAgICAgIHJhdGlvICtcbiAgICAgICAgICAgICAgICAxO1xuICAgIH1cbiAgICByZXR1cm4gY2xhbXAocmVzdWx0LCBtaW5SZXNvbHV0aW9uIC8gMiwgbWF4UmVzb2x1dGlvbiAqIDIpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHJlc29sdXRpb25zIFJlc29sdXRpb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaG93RnVsbEV4dGVudF0gSWYgdHJ1ZSwgYWxsb3dzIHVzIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LiBEZWZhdWx0OiBmYWxzZS5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9SZXNvbHV0aW9ucyhyZXNvbHV0aW9ucywgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbWF4UmVzb2x1dGlvbiA9IHJlc29sdXRpb25zWzBdO1xuICAgICAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSByZXNvbHV0aW9uc1tyZXNvbHV0aW9ucy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHZhciBjYXBwZWRNYXhSZXMgPSBvcHRfbWF4RXh0ZW50XG4gICAgICAgICAgICAgICAgPyBnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG9wdF9tYXhFeHRlbnQsIHNpemUsIG9wdF9zaG93RnVsbEV4dGVudClcbiAgICAgICAgICAgICAgICA6IG1heFJlc29sdXRpb247XG4gICAgICAgICAgICAvLyBkdXJpbmcgaW50ZXJhY3Rpbmcgb3IgYW5pbWF0aW5nLCBhbGxvdyBpbnRlcm1lZGlhcnkgdmFsdWVzXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghc21vb3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzLCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgdmFyIHogPSBNYXRoLmZsb29yKGxpbmVhckZpbmROZWFyZXN0KHJlc29sdXRpb25zLCBjYXBwZWQsIGRpcmVjdGlvbikpO1xuICAgICAgICAgICAgaWYgKHJlc29sdXRpb25zW3pdID4gY2FwcGVkTWF4UmVzICYmIHogPCByZXNvbHV0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3ogKyAxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNvbHV0aW9uc1t6XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHBvd2VyIFBvd2VyLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gTWF4aW11bSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWluUmVzb2x1dGlvbl0gTWluaW11bSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaG93RnVsbEV4dGVudF0gSWYgdHJ1ZSwgYWxsb3dzIHVzIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LiBEZWZhdWx0OiBmYWxzZS5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9Qb3dlcihwb3dlciwgbWF4UmVzb2x1dGlvbiwgb3B0X21pblJlc29sdXRpb24sIG9wdF9zbW9vdGgsIG9wdF9tYXhFeHRlbnQsIG9wdF9zaG93RnVsbEV4dGVudCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBtaW5SZXNvbHV0aW9uID0gb3B0X21pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9taW5SZXNvbHV0aW9uIDogMDtcbiAgICAgICAgICAgIC8vIGR1cmluZyBpbnRlcmFjdGluZyBvciBhbmltYXRpbmcsIGFsbG93IGludGVybWVkaWFyeSB2YWx1ZXNcbiAgICAgICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgc21vb3RoID0gb3B0X3Ntb290aCAhPT0gdW5kZWZpbmVkID8gb3B0X3Ntb290aCA6IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFzbW9vdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRvbGVyYW5jZSA9IDFlLTk7XG4gICAgICAgICAgICB2YXIgbWluWm9vbUxldmVsID0gTWF0aC5jZWlsKE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBjYXBwZWRNYXhSZXMpIC8gTWF0aC5sb2cocG93ZXIpIC0gdG9sZXJhbmNlKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAtZGlyZWN0aW9uICogKDAuNSAtIHRvbGVyYW5jZSkgKyAwLjU7XG4gICAgICAgICAgICB2YXIgY2FwcGVkID0gTWF0aC5taW4oY2FwcGVkTWF4UmVzLCByZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIHZhciBjYXBwZWRab29tTGV2ZWwgPSBNYXRoLmZsb29yKE1hdGgubG9nKG1heFJlc29sdXRpb24gLyBjYXBwZWQpIC8gTWF0aC5sb2cocG93ZXIpICsgb2Zmc2V0KTtcbiAgICAgICAgICAgIHZhciB6b29tTGV2ZWwgPSBNYXRoLm1heChtaW5ab29tTGV2ZWwsIGNhcHBlZFpvb21MZXZlbCk7XG4gICAgICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdyhwb3dlciwgem9vbUxldmVsKTtcbiAgICAgICAgICAgIHJldHVybiBjbGFtcChuZXdSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXggcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIE1pbiByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Ntb290aF0gSWYgdHJ1ZSwgdGhlIHZpZXcgd2lsbCBiZSBhYmxlIHRvIHNsaWdodGx5IGV4Y2VlZCByZXNvbHV0aW9uIGxpbWl0cy4gRGVmYXVsdDogdHJ1ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X21heEV4dGVudF0gTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaG93RnVsbEV4dGVudF0gSWYgdHJ1ZSwgYWxsb3dzIHVzIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LiBEZWZhdWx0OiBmYWxzZS5cbiAqIEByZXR1cm4ge1R5cGV9IFpvb20gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIG9wdF9zbW9vdGgsIG9wdF9tYXhFeHRlbnQsIG9wdF9zaG93RnVsbEV4dGVudCkge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRpcmVjdGlvbiBEaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBWaWV3cG9ydCBzaXplLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBzbW9vdGggPSBvcHRfc21vb3RoICE9PSB1bmRlZmluZWQgPyBvcHRfc21vb3RoIDogdHJ1ZTtcbiAgICAgICAgICAgIGlmICghc21vb3RoIHx8ICFvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVzb2x1dGlvbmNvbnN0cmFpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JvdGF0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQgeyB0b1JhZGlhbnMgfSBmcm9tICcuL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oKG51bWJlcnx1bmRlZmluZWQpLCBib29sZWFuPSk6IChudW1iZXJ8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2FibGUocm90YXRpb24pIHtcbiAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKHJvdGF0aW9uKSB7XG4gICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIE4uXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvTihuKSB7XG4gICAgdmFyIHRoZXRhID0gKDIgKiBNYXRoLlBJKSAvIG47XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJvdGF0aW9uLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKG9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByb3RhdGlvbiA9IE1hdGguZmxvb3Iocm90YXRpb24gLyB0aGV0YSArIDAuNSkgKiB0aGV0YTtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfdG9sZXJhbmNlXSBUb2xlcmFuY2UuXG4gKiBAcmV0dXJuIHtUeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU25hcFRvWmVybyhvcHRfdG9sZXJhbmNlKSB7XG4gICAgdmFyIHRvbGVyYW5jZSA9IG9wdF90b2xlcmFuY2UgfHwgdG9SYWRpYW5zKDUpO1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyb3RhdGlvbiwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKHJvdGF0aW9uKSA8PSB0b2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3RhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJvdGF0aW9uY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZWFzaW5nXG4gKi9cbi8qKlxuICogU3RhcnQgc2xvdyBhbmQgc3BlZWQgdXAuXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlSW4odCkge1xuICAgIHJldHVybiBNYXRoLnBvdyh0LCAzKTtcbn1cbi8qKlxuICogU3RhcnQgZmFzdCBhbmQgc2xvdyBkb3duLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWFzZU91dCh0KSB7XG4gICAgcmV0dXJuIDEgLSBlYXNlSW4oMSAtIHQpO1xufVxuLyoqXG4gKiBTdGFydCBzbG93LCBzcGVlZCB1cCwgYW5kIHRoZW4gc2xvdyBkb3duIGFnYWluLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5BbmRPdXQodCkge1xuICAgIHJldHVybiAzICogdCAqIHQgLSAyICogdCAqIHQgKiB0O1xufVxuLyoqXG4gKiBNYWludGFpbiBhIGNvbnN0YW50IHNwZWVkIG92ZXIgdGltZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhcih0KSB7XG4gICAgcmV0dXJuIHQ7XG59XG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgYXQgdGhlIHZlcnkgZW5kIHNsb3cgZG93biBhZ2Fpbi4gIFRoaXMgaGFzIHRoZVxuICogc2FtZSBnZW5lcmFsIGJlaGF2aW9yIGFzIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSwgYnV0IHRoZSBmaW5hbFxuICogc2xvd2Rvd24gaXMgZGVsYXllZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVwQW5kRG93bih0KSB7XG4gICAgaWYgKHQgPCAwLjUpIHtcbiAgICAgICAgcmV0dXJuIGluQW5kT3V0KDIgKiB0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAxIC0gaW5BbmRPdXQoMiAqICh0IC0gMC41KSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZWFzaW5nLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0dlb21ldHJ5TGF5b3V0XG4gKi9cbi8qKlxuICogVGhlIGNvb3JkaW5hdGUgbGF5b3V0IGZvciBnZW9tZXRyaWVzLCBpbmRpY2F0aW5nIHdoZXRoZXIgYSAzcmQgb3IgNHRoIHogKCdaJylcbiAqIG9yIG1lYXN1cmUgKCdNJykgY29vcmRpbmF0ZSBpcyBhdmFpbGFibGUuIFN1cHBvcnRlZCB2YWx1ZXMgYXJlIGAnWFknYCxcbiAqIGAnWFlaJ2AsIGAnWFlNJ2AsIGAnWFlaTSdgLlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFhZOiAnWFknLFxuICAgIFhZWjogJ1hZWicsXG4gICAgWFlNOiAnWFlNJyxcbiAgICBYWVpNOiAnWFlaTScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnlMYXlvdXQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL0dlb21ldHJ5XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbXB0eSwgY3JlYXRlT3JVcGRhdGVFbXB0eSwgZ2V0SGVpZ2h0LCByZXR1cm5PclVwZGF0ZSwgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24sIGdldFRyYW5zZm9ybSB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgbWVtb2l6ZU9uZSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyB0cmFuc2Zvcm0yRCB9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAqL1xudmFyIHRtcFRyYW5zZm9ybSA9IGNyZWF0ZVRyYW5zZm9ybSgpO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciB2ZWN0b3IgZ2VvbWV0cmllcy5cbiAqXG4gKiBUbyBnZXQgbm90aWZpZWQgb2YgY2hhbmdlcyB0byB0aGUgZ2VvbWV0cnksIHJlZ2lzdGVyIGEgbGlzdGVuZXIgZm9yIHRoZVxuICogZ2VuZXJpYyBgY2hhbmdlYCBldmVudCBvbiB5b3VyIGdlb21ldHJ5IGluc3RhbmNlLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgR2VvbWV0cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdlb21ldHJ5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEdlb21ldHJ5KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRfID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnRSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICAgICAqIEBhYnN0cmFjdFxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmV2aXNpb24gVGhlIGdlb21ldHJ5IHJldmlzaW9uLlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSBbb3B0X3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCA9IG1lbW9pemVPbmUoZnVuY3Rpb24gKHJldmlzaW9uLCBzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgICAgICBpZiAoIW9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xvbmUgPSB0aGlzLmNsb25lKCk7XG4gICAgICAgICAgICBjbG9uZS5hcHBseVRyYW5zZm9ybShvcHRfdHJhbnNmb3JtKTtcbiAgICAgICAgICAgIHJldHVybiBjbG9uZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkoc3F1YXJlZFRvbGVyYW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCBhIHRyYW5zZm9ybWVkIGFuZCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gW29wdF90cmFuc2Zvcm1dIE9wdGlvbmFsIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnlUcmFuc2Zvcm1lZCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlLCBvcHRfdHJhbnNmb3JtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpbXBsaWZ5VHJhbnNmb3JtZWRJbnRlcm5hbCh0aGlzLmdldFJldmlzaW9uKCksIHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4geyFHZW9tZXRyeX0gQ2xvbmUuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY29udGFpbnNYWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHZhciBjb29yZCA9IHRoaXMuZ2V0Q2xvc2VzdFBvaW50KFt4LCB5XSk7XG4gICAgICAgIHJldHVybiBjb29yZFswXSA9PT0geCAmJiBjb29yZFsxXSA9PT0geTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY2xvc2VzdCBwb2ludCBvZiB0aGUgZ2VvbWV0cnkgdG8gdGhlIHBhc3NlZCBwb2ludCBhc1xuICAgICAqIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlIGNvb3JkaW5hdGV9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9jbG9zZXN0UG9pbnRdIENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q2xvc2VzdFBvaW50ID0gZnVuY3Rpb24gKHBvaW50LCBvcHRfY2xvc2VzdFBvaW50KSB7XG4gICAgICAgIHZhciBjbG9zZXN0UG9pbnQgPSBvcHRfY2xvc2VzdFBvaW50ID8gb3B0X2Nsb3Nlc3RQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgICAgIHRoaXMuY2xvc2VzdFBvaW50WFkocG9pbnRbMF0sIHBvaW50WzFdLCBjbG9zZXN0UG9pbnQsIEluZmluaXR5KTtcbiAgICAgICAgcmV0dXJuIGNsb3Nlc3RQb2ludDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGdlb21ldHJ5IGluY2x1ZGVzIHRoZSBzcGVjaWZpZWQgY29vcmRpbmF0ZS4gSWYgdGhlXG4gICAgICogY29vcmRpbmF0ZSBpcyBvbiB0aGUgYm91bmRhcnkgb2YgdGhlIGdlb21ldHJ5LCByZXR1cm5zIGZhbHNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmludGVyc2VjdHNDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbnNYWShjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGV4dGVudCBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAob3B0X2V4dGVudCkge1xuICAgICAgICBpZiAodGhpcy5leHRlbnRSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gdGhpcy5jb21wdXRlRXh0ZW50KHRoaXMuZXh0ZW50Xyk7XG4gICAgICAgICAgICBpZiAoaXNOYU4oZXh0ZW50WzBdKSB8fCBpc05hTihleHRlbnRbMV0pKSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlT3JVcGRhdGVFbXB0eShleHRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5leHRlbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJldHVybk9yVXBkYXRlKHRoaXMuZXh0ZW50Xywgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSb3RhdGUgdGhlIGdlb21ldHJ5IGFyb3VuZCBhIGdpdmVuIGNvb3JkaW5hdGUuIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIGFuZ2xlIGluIHJhZGlhbnMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUucm90YXRlID0gZnVuY3Rpb24gKGFuZ2xlLCBhbmNob3IpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNjYWxlIHRoZSBnZW9tZXRyeSAod2l0aCBhbiBvcHRpb25hbCBvcmlnaW4pLiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3ggVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9zeV0gVGhlIHNjYWxpbmcgZmFjdG9yIGluIHRoZSB5LWRpcmVjdGlvbiAoZGVmYXVsdHMgdG8gc3gpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIHNjYWxlIG9yaWdpbiAoZGVmYXVsdHMgdG8gdGhlIGNlbnRlclxuICAgICAqICAgICBvZiB0aGUgZ2VvbWV0cnkgZXh0ZW50KS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnNjYWxlID0gZnVuY3Rpb24gKHN4LCBvcHRfc3ksIG9wdF9hbmNob3IpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5LiAgRm9yIGxpbmVzdHJpbmdzLCB0aGlzIHVzZXNcbiAgICAgKiB0aGUgW0RvdWdsYXMgUGV1Y2tlcl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobSlcbiAgICAgKiBhbGdvcml0aG0uICBGb3IgcG9seWdvbnMsIGEgcXVhbnRpemF0aW9uLWJhc2VkXG4gICAgICogc2ltcGxpZmljYXRpb24gaXMgdXNlZCB0byBwcmVzZXJ2ZSB0b3BvbG9neS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRoZSB0b2xlcmFuY2UgZGlzdGFuY2UgZm9yIHNpbXBsaWZpY2F0aW9uLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBBIG5ldywgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBvcmlnaW5hbCBnZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLnNpbXBsaWZ5ID0gZnVuY3Rpb24gKHRvbGVyYW5jZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnkodG9sZXJhbmNlICogdG9sZXJhbmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXJcbiAgICAgKiBhbGdvcml0aG0uXG4gICAgICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JhbWVyLURvdWdsYXMtUGV1Y2tlcl9hbGdvcml0aG0uXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeSA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBseSBhIHRyYW5zZm9ybSBmdW5jdGlvbiB0byB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICogQ2FsbGVkIHdpdGggYSBmbGF0IGFycmF5IG9mIGdlb21ldHJ5IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIHRoZSBnZW9tZXRyeS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5IGNvb3JkaW5hdGVzIGluIHBsYWNlLiAgSWZcbiAgICAgKiBpbnN0ZWFkIHlvdSB3YW50IGEgbmV3IGdlb21ldHJ5LCBmaXJzdCBgY2xvbmUoKWAgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFYIERlbHRhIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNsYXRlID0gZnVuY3Rpb24gKGRlbHRhWCwgZGVsdGFZKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gZWFjaCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeSBmcm9tIG9uZSBjb29yZGluYXRlIHJlZmVyZW5jZVxuICAgICAqIHN5c3RlbSB0byBhbm90aGVyLiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogRm9yIGV4YW1wbGUsIGEgbGluZSB3aWxsIGJlIHRyYW5zZm9ybWVkIHRvIGEgbGluZSBhbmQgYSBjaXJjbGUgdG8gYSBjaXJjbGUuXG4gICAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBzb3VyY2UgVGhlIGN1cnJlbnQgcHJvamVjdGlvbi4gIENhbiBiZSBhXG4gICAgICogICAgIHN0cmluZyBpZGVudGlmaWVyIG9yIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gVGhlIGRlc2lyZWQgcHJvamVjdGlvbi4gIENhbiBiZSBhXG4gICAgICogICAgIHN0cmluZyBpZGVudGlmaWVyIG9yIGEge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBUaGlzIGdlb21ldHJ5LiAgTm90ZSB0aGF0IG9yaWdpbmFsIGdlb21ldHJ5IGlzXG4gICAgICogICAgIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gKi9cbiAgICAgICAgdmFyIHNvdXJjZVByb2ogPSBnZXRQcm9qZWN0aW9uKHNvdXJjZSk7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1GbiA9IHNvdXJjZVByb2ouZ2V0VW5pdHMoKSA9PSBVbml0cy5USUxFX1BJWEVMU1xuICAgICAgICAgICAgPyBmdW5jdGlvbiAoaW5Db29yZGluYXRlcywgb3V0Q29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgICAgICAgICAgICAgIHZhciBwaXhlbEV4dGVudCA9IHNvdXJjZVByb2ouZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3RlZEV4dGVudCA9IHNvdXJjZVByb2ouZ2V0V29ybGRFeHRlbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2NhbGUgPSBnZXRIZWlnaHQocHJvamVjdGVkRXh0ZW50KSAvIGdldEhlaWdodChwaXhlbEV4dGVudCk7XG4gICAgICAgICAgICAgICAgY29tcG9zZVRyYW5zZm9ybSh0bXBUcmFuc2Zvcm0sIHByb2plY3RlZEV4dGVudFswXSwgcHJvamVjdGVkRXh0ZW50WzNdLCBzY2FsZSwgLXNjYWxlLCAwLCAwLCAwKTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0yRChpbkNvb3JkaW5hdGVzLCAwLCBpbkNvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCB0bXBUcmFuc2Zvcm0sIG91dENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0VHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RpbmF0aW9uKShpbkNvb3JkaW5hdGVzLCBvdXRDb29yZGluYXRlcywgc3RyaWRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogZ2V0VHJhbnNmb3JtKHNvdXJjZVByb2osIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5hcHBseVRyYW5zZm9ybSh0cmFuc2Zvcm1Gbik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIEdlb21ldHJ5O1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBHZW9tZXRyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvdHJhbnNmb3JtXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtMkQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0cmFuc2Zvcm0sIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2pdO1xuICAgICAgICB2YXIgeSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV07XG4gICAgICAgIGRlc3RbaSsrXSA9IHRyYW5zZm9ybVswXSAqIHggKyB0cmFuc2Zvcm1bMl0gKiB5ICsgdHJhbnNmb3JtWzRdO1xuICAgICAgICBkZXN0W2krK10gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gYW5jaG9yIFJvdGF0aW9uIGFuY2hvciBwb2ludC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIGFuY2hvclggPSBhbmNob3JbMF07XG4gICAgdmFyIGFuY2hvclkgPSBhbmNob3JbMV07XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgICAgICB2YXIgZGVsdGFZID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSAtIGFuY2hvclk7XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclggKyBkZWx0YVggKiBjb3MgLSBkZWx0YVkgKiBzaW47XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBkZWx0YVggKiBzaW4gKyBkZWx0YVkgKiBjb3M7XG4gICAgICAgIGZvciAodmFyIGsgPSBqICsgMjsgayA8IGogKyBzdHJpZGU7ICsraykge1xuICAgICAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2tdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRfZGVzdCAmJiBkZXN0Lmxlbmd0aCAhPSBpKSB7XG4gICAgICAgIGRlc3QubGVuZ3RoID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIGRlc3Q7XG59XG4vKipcbiAqIFNjYWxlIHRoZSBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3ggU2NhbGUgZmFjdG9yIGluIHRoZSB4LWRpcmVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeSBTY2FsZSBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmNob3IgU2NhbGUgYW5jaG9yIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHN4LCBzeSwgYW5jaG9yLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBhbmNob3JYID0gYW5jaG9yWzBdO1xuICAgIHZhciBhbmNob3JZID0gYW5jaG9yWzFdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gb2Zmc2V0OyBqIDwgZW5kOyBqICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgZGVsdGFYID0gZmxhdENvb3JkaW5hdGVzW2pdIC0gYW5jaG9yWDtcbiAgICAgICAgdmFyIGRlbHRhWSA9IGZsYXRDb29yZGluYXRlc1tqICsgMV0gLSBhbmNob3JZO1xuICAgICAgICBkZXN0W2krK10gPSBhbmNob3JYICsgc3ggKiBkZWx0YVg7XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclkgKyBzeSAqIGRlbHRhWTtcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZGVsdGFYLCBkZWx0YVksIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1tqXSArIGRlbHRhWDtcbiAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSArIGRlbHRhWTtcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vU2ltcGxlR2VvbWV0cnlcbiAqL1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4vR2VvbWV0cnkuanMnO1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcywgZ2V0Q2VudGVyIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHJvdGF0ZSwgc2NhbGUsIHRyYW5zZm9ybTJELCB0cmFuc2xhdGUgfSBmcm9tICcuL2ZsYXQvdHJhbnNmb3JtLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzOyBkbyBub3QgaW5zdGFudGlhdGVcbiAqIGluIGFwcHMsIGFzIGNhbm5vdCBiZSByZW5kZXJlZC5cbiAqXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFNpbXBsZUdlb21ldHJ5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTaW1wbGVHZW9tZXRyeSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTaW1wbGVHZW9tZXRyeSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuY29tcHV0ZUV4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PCo+fSBDb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBmaXJzdCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IEZpcnN0IGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgwLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGFzdCBjb29yZGluYXRlIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IExhc3QgcG9pbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRMYXN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAtIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUge0BsaW5rIG1vZHVsZTpvbC9nZW9tL0dlb21ldHJ5TGF5b3V0IGxheW91dH0gb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0TGF5b3V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXlvdXQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhpcyBnZW9tZXRyeSB1c2luZyB0aGUgRG91Z2xhcyBQZXVja2VyIGFsZ29yaXRobS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5ID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgaWYgKHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gIT09IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gMDtcbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgc3F1YXJlZFRvbGVyYW5jZSBpcyBuZWdhdGl2ZSBvciBpZiB3ZSBrbm93IHRoYXQgc2ltcGxpZmljYXRpb24gd2lsbCBub3RcbiAgICAgICAgLy8gaGF2ZSBhbnkgZWZmZWN0IHRoZW4ganVzdCByZXR1cm4gdGhpcy5cbiAgICAgICAgaWYgKHNxdWFyZWRUb2xlcmFuY2UgPCAwIHx8XG4gICAgICAgICAgICAodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlICE9PSAwICYmXG4gICAgICAgICAgICAgICAgc3F1YXJlZFRvbGVyYW5jZSA8PSB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2ltcGxpZmllZEdlb21ldHJ5ID0gdGhpcy5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbChzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGlmaWVkR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA8IHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRHZW9tZXRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNpbXBsaWZpY2F0aW9uIGRpZCBub3QgYWN0dWFsbHkgcmVtb3ZlIGFueSBjb29yZGluYXRlcy4gIFdlIG5vdyBrbm93XG4gICAgICAgICAgICAvLyB0aGF0IGFueSBjYWxscyB0byBnZXRTaW1wbGlmaWVkR2VvbWV0cnkgd2l0aCBhIHNxdWFyZWRUb2xlcmFuY2UgbGVzc1xuICAgICAgICAgICAgLy8gdGhhbiBvciBlcXVhbCB0byB0aGUgY3VycmVudCBzcXVhcmVkVG9sZXJhbmNlIHdpbGwgYWxzbyBub3QgaGF2ZSBhbnlcbiAgICAgICAgICAgIC8vIGVmZmVjdC4gIFRoaXMgYWxsb3dzIHVzIHRvIHNob3J0IGNpcmN1aXQgc2ltcGxpZmljYXRpb24gKHNhdmluZyBDUFVcbiAgICAgICAgICAgIC8vIGN5Y2xlcykgYW5kIHByZXZlbnRzIHRoZSBjYWNoZSBvZiBzaW1wbGlmaWVkIGdlb21ldHJpZXMgZnJvbSBmaWxsaW5nXG4gICAgICAgICAgICAvLyB1cCB3aXRoIHVzZWxlc3MgaWRlbnRpY2FsIGNvcGllcyBvZiB0aGlzIGdlb21ldHJ5IChzYXZpbmcgbWVtb3J5KS5cbiAgICAgICAgICAgIHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IHNxdWFyZWRUb2xlcmFuY2U7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7U2ltcGxlR2VvbWV0cnl9IFNpbXBsaWZpZWQgZ2VvbWV0cnkuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBTdHJpZGUuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFN0cmlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyaWRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0RmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGxheW91dCwgZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgIHRoaXMuc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGZsYXRDb29yZGluYXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7IUFycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gbGF5b3V0IExheW91dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbmVzdGluZyBOZXN0aW5nLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2V0TGF5b3V0ID0gZnVuY3Rpb24gKGxheW91dCwgY29vcmRpbmF0ZXMsIG5lc3RpbmcpIHtcbiAgICAgICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgICAgIHZhciBzdHJpZGU7XG4gICAgICAgIGlmIChsYXlvdXQpIHtcbiAgICAgICAgICAgIHN0cmlkZSA9IGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXN0aW5nOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RyaWRlID0gMjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge0FycmF5fSAqLyAoY29vcmRpbmF0ZXNbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN0cmlkZSA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGxheW91dCA9IGdldExheW91dEZvclN0cmlkZShzdHJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgICAgICB0aGlzLnN0cmlkZSA9IHN0cmlkZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBDYWxsZWQgd2l0aCBhIGZsYXQgYXJyYXkgb2YgZ2VvbWV0cnkgY29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5hcHBseVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICBpZiAodGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybUZuKHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLmZsYXRDb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGUgZ2VvbWV0cnkgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS4gVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gYW5nbGUgaW4gY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAoYW5nbGUsIGFuY2hvcikge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICByb3RhdGUoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGFuZ2xlLCBhbmNob3IsIGZsYXRDb29yZGluYXRlcyk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2NhbGUgdGhlIGdlb21ldHJ5ICh3aXRoIGFuIG9wdGlvbmFsIG9yaWdpbikuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeCBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N5XSBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uIChkZWZhdWx0cyB0byBzeCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgc2NhbGUgb3JpZ2luIChkZWZhdWx0cyB0byB0aGUgY2VudGVyXG4gICAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgc3kgPSBvcHRfc3k7XG4gICAgICAgIGlmIChzeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzeSA9IHN4O1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yO1xuICAgICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICAgICAgYW5jaG9yID0gZ2V0Q2VudGVyKHRoaXMuZ2V0RXh0ZW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHNjYWxlKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBzeCwgc3ksIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgdHJhbnNsYXRlKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCBkZWx0YVgsIGRlbHRhWSwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU2ltcGxlR2VvbWV0cnk7XG59KEdlb21ldHJ5KSk7XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBsYXlvdXQgTGF5b3V0LlxuICovXG5mdW5jdGlvbiBnZXRMYXlvdXRGb3JTdHJpZGUoc3RyaWRlKSB7XG4gICAgdmFyIGxheW91dDtcbiAgICBpZiAoc3RyaWRlID09IDIpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHN0cmlkZSA9PSAzKSB7XG4gICAgICAgIGxheW91dCA9IEdlb21ldHJ5TGF5b3V0LlhZWjtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RyaWRlID09IDQpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaTTtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSAqLyAobGF5b3V0KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFN0cmlkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmlkZUZvckxheW91dChsYXlvdXQpIHtcbiAgICB2YXIgc3RyaWRlO1xuICAgIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFkpIHtcbiAgICAgICAgc3RyaWRlID0gMjtcbiAgICB9XG4gICAgZWxzZSBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZWiB8fCBsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFlNKSB7XG4gICAgICAgIHN0cmlkZSA9IDM7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWVpNKSB7XG4gICAgICAgIHN0cmlkZSA9IDQ7XG4gICAgfVxuICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHN0cmlkZSk7XG59XG4vKipcbiAqIEBwYXJhbSB7U2ltcGxlR2VvbWV0cnl9IHNpbXBsZUdlb21ldHJ5IFNpbXBsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFRyYW5zZm9ybWVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1HZW9tMkQoc2ltcGxlR2VvbWV0cnksIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gc2ltcGxlR2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgaWYgKCFmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgc3RyaWRlID0gc2ltcGxlR2VvbWV0cnkuZ2V0U3RyaWRlKCk7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgdHJhbnNmb3JtLCBvcHRfZGVzdCk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgU2ltcGxlR2VvbWV0cnk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TaW1wbGVHZW9tZXRyeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2Nsb3Nlc3RcbiAqL1xuaW1wb3J0IHsgbGVycCwgc3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeCB9IGZyb20gJy4uLy4uL21hdGguanMnO1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBwb2ludCBvbiB0aGUgMkQgbGluZSBzZWdtZW50IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXSB0b1xuICogZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIHRoYXQgaXMgY2xvc2VzdCB0byB0aGUgcG9pbnQgKHgsIHkpLiAgRXh0cmFcbiAqIGRpbWVuc2lvbnMgYXJlIGxpbmVhcmx5IGludGVycG9sYXRlZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0MSBPZmZzZXQgMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQyIE9mZnNldCAyLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKi9cbmZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQxLCBvZmZzZXQyLCBzdHJpZGUsIHgsIHksIGNsb3Nlc3RQb2ludCkge1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIDFdO1xuICAgIHZhciBkeCA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyXSAtIHgxO1xuICAgIHZhciBkeSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgMV0gLSB5MTtcbiAgICB2YXIgb2Zmc2V0O1xuICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCkge1xuICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIHQgPSAoKHggLSB4MSkgKiBkeCArICh5IC0geTEpICogZHkpIC8gKGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKHQgPiAxKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHQgPiAwKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gbGVycChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MSArIGldLCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0MiArIGldLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXQxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgIH1cbiAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIHNxdWFyZWQgb2YgdGhlIGxhcmdlc3QgZGlzdGFuY2UgYmV0d2VlbiBhbnkgcGFpciBvZiBjb25zZWN1dGl2ZVxuICogY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXhTcXVhcmVkRGVsdGEoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXgpIHtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgdmFyIHNxdWFyZWREZWx0YSA9IHNxdWFyZWREeCh4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgIGlmIChzcXVhcmVkRGVsdGEgPiBtYXgpIHtcbiAgICAgICAgICAgIG1heCA9IHNxdWFyZWREZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gbWF4O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIG1heCA9IG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggTWF4IHNxdWFyZWQgZGVsdGEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1heCBzcXVhcmVkIGRlbHRhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlBcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgbWF4KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBtYXggPSBhcnJheU1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXgpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X3RtcFBvaW50XSBUZW1wb3JhcnkgcG9pbnQgb2JqZWN0LlxuICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25DbG9zZXN0UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgb3B0X3RtcFBvaW50KSB7XG4gICAgaWYgKG9mZnNldCA9PSBlbmQpIHtcbiAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICB9XG4gICAgdmFyIGksIHNxdWFyZWREaXN0YW5jZTtcbiAgICBpZiAobWF4RGVsdGEgPT09IDApIHtcbiAgICAgICAgLy8gQWxsIHBvaW50cyBhcmUgaWRlbnRpY2FsLCBzbyBqdXN0IHRlc3QgdGhlIGZpcnN0IHBvaW50LlxuICAgICAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIHZhciBpbmRleCA9IG9mZnNldCArIHN0cmlkZTtcbiAgICB3aGlsZSAoaW5kZXggPCBlbmQpIHtcbiAgICAgICAgYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIGluZGV4IC0gc3RyaWRlLCBpbmRleCwgc3RyaWRlLCB4LCB5LCB0bXBQb2ludCk7XG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICBpbmRleCArPSBzdHJpZGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBTa2lwIGFoZWFkIG11bHRpcGxlIHBvaW50cywgYmVjYXVzZSB3ZSBrbm93IHRoYXQgYWxsIHRoZSBza2lwcGVkXG4gICAgICAgICAgICAvLyBwb2ludHMgY2Fubm90IGJlIGFueSBjbG9zZXIgdGhhbiB0aGUgY2xvc2VzdCBwb2ludCB3ZSBoYXZlIGZvdW5kIHNvXG4gICAgICAgICAgICAvLyBmYXIuICBXZSBrbm93IHRoaXMgYmVjYXVzZSB3ZSBrbm93IGhvdyBjbG9zZSB0aGUgY3VycmVudCBwb2ludCBpcywgaG93XG4gICAgICAgICAgICAvLyBjbG9zZSB0aGUgY2xvc2VzdCBwb2ludCB3ZSBoYXZlIGZvdW5kIHNvIGZhciBpcywgYW5kIHRoZSBtYXhpbXVtXG4gICAgICAgICAgICAvLyBkaXN0YW5jZSBiZXR3ZWVuIGNvbnNlY3V0aXZlIHBvaW50cy4gIEZvciBleGFtcGxlLCBpZiB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgICAgIC8vIGF0IGRpc3RhbmNlIDEwLCB0aGUgYmVzdCB3ZSd2ZSBmb3VuZCBzbyBmYXIgaXMgMywgYW5kIHRoYXQgdGhlIG1heGltdW1cbiAgICAgICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzIGlzIDIsIHRoZW4gd2UnbGwgbmVlZCB0byBza2lwIGF0XG4gICAgICAgICAgICAvLyBsZWFzdCAoMTAgLSAzKSAvIDIgPT0gMyAocm91bmRlZCBkb3duKSBwb2ludHMgdG8gaGF2ZSBhbnkgY2hhbmNlIG9mXG4gICAgICAgICAgICAvLyBmaW5kaW5nIGEgY2xvc2VyIHBvaW50LiAgV2UgdXNlIE1hdGgubWF4KC4uLiwgMSkgdG8gZW5zdXJlIHRoYXQgd2VcbiAgICAgICAgICAgIC8vIGFsd2F5cyBhZHZhbmNlIGF0IGxlYXN0IG9uZSBwb2ludCwgdG8gYXZvaWQgYW4gaW5maW5pdGUgbG9vcC5cbiAgICAgICAgICAgIGluZGV4ICs9XG4gICAgICAgICAgICAgICAgc3RyaWRlICpcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5tYXgoKChNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKSAtIE1hdGguc3FydChtaW5TcXVhcmVkRGlzdGFuY2UpKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhEZWx0YSkgfFxuICAgICAgICAgICAgICAgICAgICAgICAgMCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzUmluZykge1xuICAgICAgICAvLyBDaGVjayB0aGUgY2xvc2luZyBzZWdtZW50LlxuICAgICAgICBhc3NpZ25DbG9zZXN0KGZsYXRDb29yZGluYXRlcywgZW5kIC0gc3RyaWRlLCBvZmZzZXQsIHN0cmlkZSwgeCwgeSwgdG1wUG9pbnQpO1xuICAgICAgICBzcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRHgoeCwgeSwgdG1wUG9pbnRbMF0sIHRtcFBvaW50WzFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gdG1wUG9pbnRbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4RGVsdGEgTWF4IGRlbHRhLlxuICogQHBhcmFtIHtib29sZWFufSBpc1JpbmcgSXMgcmluZy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X3RtcFBvaW50XSBUZW1wb3JhcnkgcG9pbnQgb2JqZWN0LlxuICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgb3B0X3RtcFBvaW50KSB7XG4gICAgdmFyIHRtcFBvaW50ID0gb3B0X3RtcFBvaW50ID8gb3B0X3RtcFBvaW50IDogW05hTiwgTmFOXTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IGFzc2lnbkNsb3Nlc3RQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCB0bXBQb2ludCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RNdWx0aUFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIHRtcFBvaW50KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2xvc2VzdC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2RlZmxhdGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZSwgc3RyaWRlKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2ldO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZsYXRlQ29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzLCBzdHJpZGUpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gY29vcmRpbmF0ZXNbaV07XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc3RyaWRlOyArK2opIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQrK10gPSBjb29yZGluYXRlW2pdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzcyBDb29yZGluYXRlc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9lbmRzXSBFbmRzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRW5kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3MsIHN0cmlkZSwgb3B0X2VuZHMpIHtcbiAgICB2YXIgZW5kcyA9IG9wdF9lbmRzID8gb3B0X2VuZHMgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGVuZCA9IGRlZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzW2pdLCBzdHJpZGUpO1xuICAgICAgICBlbmRzW2krK10gPSBlbmQ7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgZW5kcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBlbmRzO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gY29vcmRpbmF0ZXNzcyBDb29yZGluYXRlc3NzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBbb3B0X2VuZHNzXSBFbmRzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PG51bWJlcj4+fSBFbmRzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc3MsIHN0cmlkZSwgb3B0X2VuZHNzKSB7XG4gICAgdmFyIGVuZHNzID0gb3B0X2VuZHNzID8gb3B0X2VuZHNzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGNvb3JkaW5hdGVzc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kcyA9IGRlZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3NzW2pdLCBzdHJpZGUsIGVuZHNzW2ldKTtcbiAgICAgICAgZW5kc3NbaSsrXSA9IGVuZHM7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgZW5kc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gZW5kc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvc2ltcGxpZnlcbiAqL1xuLy8gQmFzZWQgb24gc2ltcGxpZnktanMgaHR0cHM6Ly9naXRodWIuY29tL21vdXJuZXIvc2ltcGxpZnktanNcbi8vIENvcHlyaWdodCAoYykgMjAxMiwgVmxhZGltaXIgQWdhZm9ua2luXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkLlxuLy9cbi8vIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dFxuLy8gbW9kaWZpY2F0aW9uLCBhcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG4vL1xuLy8gICAgMS4gUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuLy8gICAgICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbi8vXG4vLyAgICAyLiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodFxuLy8gICAgICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyIGluIHRoZVxuLy8gICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cbi8vXG4vLyBUSElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIlxuLy8gQU5EIEFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRVxuLy8gSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0Vcbi8vIEFSRSBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkVcbi8vIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1Jcbi8vIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GXG4vLyBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1Ncbi8vIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOXG4vLyBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVCAoSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKVxuLy8gQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVMgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEVcbi8vIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuaW1wb3J0IHsgc3F1YXJlZERpc3RhbmNlLCBzcXVhcmVkU2VnbWVudERpc3RhbmNlIH0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGlnaFF1YWxpdHkgSGlnaGVzdCBxdWFsaXR5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNdIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gU2ltcGxpZmllZCBsaW5lIHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNpbXBsaWZ5TGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIGhpZ2hRdWFsaXR5LCBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcykge1xuICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzXG4gICAgICAgIDogW107XG4gICAgaWYgKCFoaWdoUXVhbGl0eSkge1xuICAgICAgICBlbmQgPSByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDApO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzO1xuICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICBzdHJpZGUgPSAyO1xuICAgIH1cbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIHZhciBuID0gKGVuZCAtIG9mZnNldCkgLyBzdHJpZGU7XG4gICAgaWYgKG4gPCAzKSB7XG4gICAgICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgbWFya2VycyA9IG5ldyBBcnJheShuKTtcbiAgICBtYXJrZXJzWzBdID0gMTtcbiAgICBtYXJrZXJzW24gLSAxXSA9IDE7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBzdGFjayA9IFtvZmZzZXQsIGVuZCAtIHN0cmlkZV07XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgbGFzdCA9IHN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgZmlyc3QgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgdmFyIG1heFNxdWFyZWREaXN0YW5jZSA9IDA7XG4gICAgICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdF07XG4gICAgICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tmaXJzdCArIDFdO1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbbGFzdF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tsYXN0ICsgMV07XG4gICAgICAgIGZvciAodmFyIGkgPSBmaXJzdCArIHN0cmlkZTsgaSA8IGxhc3Q7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB2YXIgeCA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcbiAgICAgICAgICAgIHZhciBzcXVhcmVkRGlzdGFuY2VfMSA9IHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpO1xuICAgICAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZV8xID4gbWF4U3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIG1heFNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZV8xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhTcXVhcmVkRGlzdGFuY2UgPiBzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICBtYXJrZXJzWyhpbmRleCAtIG9mZnNldCkgLyBzdHJpZGVdID0gMTtcbiAgICAgICAgICAgIGlmIChmaXJzdCArIHN0cmlkZSA8IGluZGV4KSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChmaXJzdCwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGluZGV4ICsgc3RyaWRlIDwgbGFzdCkge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goaW5kZXgsIGxhc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKSB7XG4gICAgICAgIGlmIChtYXJrZXJzW2ldKSB7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyBpICogc3RyaWRlXTtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGkgKiBzdHJpZGUgKyAxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHMucHVzaChzaW1wbGlmaWVkT2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBzaW1wbGlmaWVkRW5kc3MgU2ltcGxpZmllZCBlbmRzcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3VnbGFzUGV1Y2tlck11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlckFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByYWRpYWxEaXN0YW5jZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpIHtcbiAgICBpZiAoZW5kIDw9IG9mZnNldCArIHN0cmlkZSkge1xuICAgICAgICAvLyB6ZXJvIG9yIG9uZSBwb2ludCwgbm8gc2ltcGxpZmljYXRpb24gcG9zc2libGUsIHNvIGNvcHkgYW5kIHJldHVyblxuICAgICAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgLy8gY29weSBmaXJzdCBwb2ludFxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgxO1xuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkxO1xuICAgIHZhciB4MiA9IHgxO1xuICAgIHZhciB5MiA9IHkxO1xuICAgIGZvciAob2Zmc2V0ICs9IHN0cmlkZTsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlKHgxLCB5MSwgeDIsIHkyKSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIC8vIGNvcHkgcG9pbnQgYXQgb2Zmc2V0XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHgyICE9IHgxIHx8IHkyICE9IHkxKSB7XG4gICAgICAgIC8vIGNvcHkgbGFzdCBwb2ludFxuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEByZXR1cm4ge251bWJlcn0gUm91bmRlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNuYXAodmFsdWUsIHRvbGVyYW5jZSkge1xuICAgIHJldHVybiB0b2xlcmFuY2UgKiBNYXRoLnJvdW5kKHZhbHVlIC8gdG9sZXJhbmNlKTtcbn1cbi8qKlxuICogU2ltcGxpZmllcyBhIGxpbmUgc3RyaW5nIHVzaW5nIGFuIGFsZ29yaXRobSBkZXNpZ25lZCBieSBUaW0gU2NoYXViLlxuICogQ29vcmRpbmF0ZXMgYXJlIHNuYXBwZWQgdG8gdGhlIG5lYXJlc3QgdmFsdWUgaW4gYSB2aXJ0dWFsIGdyaWQgYW5kXG4gKiBjb25zZWN1dGl2ZSBkdXBsaWNhdGUgY29vcmRpbmF0ZXMgYXJlIGRpc2NhcmRlZC4gIFRoaXMgZWZmZWN0aXZlbHkgcHJlc2VydmVzXG4gKiB0b3BvbG9neSBhcyB0aGUgc2ltcGxpZmljYXRpb24gb2YgYW55IHN1YnNlY3Rpb24gb2YgYSBsaW5lIHN0cmluZyBpc1xuICogaW5kZXBlbmRlbnQgb2YgdGhlIHJlc3Qgb2YgdGhlIGxpbmUgc3RyaW5nLiAgVGhpcyBtZWFucyB0aGF0LCBmb3IgZXhhbXBsZXMsXG4gKiB0aGUgY29tbW9uIGVkZ2UgYmV0d2VlbiB0d28gcG9seWdvbnMgd2lsbCBiZSBzaW1wbGlmaWVkIHRvIHRoZSBzYW1lIGxpbmVcbiAqIHN0cmluZyBpbmRlcGVuZGVudGx5IGluIGJvdGggcG9seWdvbnMuICBUaGlzIGltcGxlbWVudGF0aW9uIHVzZXMgYSBzaW5nbGVcbiAqIHBhc3Mgb3ZlciB0aGUgY29vcmRpbmF0ZXMgYW5kIGVsaW1pbmF0ZXMgaW50ZXJtZWRpYXRlIGNvbGxpbmVhciBwb2ludHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIC8vIGRvIG5vdGhpbmcgaWYgdGhlIGxpbmUgaXMgZW1wdHlcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gICAgLy8gc25hcCB0aGUgZmlyc3QgY29vcmRpbmF0ZSAoUDEpXG4gICAgdmFyIHgxID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICB2YXIgeTEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgIC8vIGFkZCB0aGUgZmlyc3QgY29vcmRpbmF0ZSB0byB0aGUgb3V0cHV0XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gICAgLy8gZmluZCB0aGUgbmV4dCBjb29yZGluYXRlIHRoYXQgZG9lcyBub3Qgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSBhcyB0aGUgZmlyc3RcbiAgICAvLyBjb29yZGluYXRlIChQMilcbiAgICB2YXIgeDIsIHkyO1xuICAgIGRvIHtcbiAgICAgICAgeDIgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgICAgICB5MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xuICAgICAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICAgICAgLy8gYWxsIGNvb3JkaW5hdGVzIHNuYXAgdG8gdGhlIHNhbWUgdmFsdWUsIHRoZSBsaW5lIGNvbGxhcHNlcyB0byBhIHBvaW50XG4gICAgICAgICAgICAvLyBwdXNoIHRoZSBsYXN0IHNuYXBwZWQgdmFsdWUgYW55d2F5IHRvIGVuc3VyZSB0aGF0IHRoZSBvdXRwdXQgY29udGFpbnNcbiAgICAgICAgICAgIC8vIGF0IGxlYXN0IHR3byBwb2ludHNcbiAgICAgICAgICAgIC8vIEZJWE1FIHNob3VsZCB3ZSByZWFsbHkgcmV0dXJuIGF0IGxlYXN0IHR3byBwb2ludHMgYW55d2F5P1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgICAgICB9XG4gICAgfSB3aGlsZSAoeDIgPT0geDEgJiYgeTIgPT0geTEpO1xuICAgIHdoaWxlIChvZmZzZXQgPCBlbmQpIHtcbiAgICAgICAgLy8gc25hcCB0aGUgbmV4dCBjb29yZGluYXRlIChQMylcbiAgICAgICAgdmFyIHgzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgdG9sZXJhbmNlKTtcbiAgICAgICAgdmFyIHkzID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIC8vIHNraXAgUDMgaWYgaXQgaXMgZXF1YWwgdG8gUDJcbiAgICAgICAgaWYgKHgzID09IHgyICYmIHkzID09IHkyKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDEgYW5kIFAyXG4gICAgICAgIHZhciBkeDEgPSB4MiAtIHgxO1xuICAgICAgICB2YXIgZHkxID0geTIgLSB5MTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkZWx0YSBiZXR3ZWVuIFAzIGFuZCBQMVxuICAgICAgICB2YXIgZHgyID0geDMgLSB4MTtcbiAgICAgICAgdmFyIGR5MiA9IHkzIC0geTE7XG4gICAgICAgIC8vIGlmIFAxLCBQMiwgYW5kIFAzIGFyZSBjb2xpbmVhciBhbmQgUDMgaXMgZnVydGhlciBmcm9tIFAxIHRoYW4gUDIgaXMgZnJvbVxuICAgICAgICAvLyBQMSBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gdGhlbiBQMiBpcyBvbiB0aGUgc3RyYWlnaHQgbGluZSBiZXR3ZWVuIFAxIGFuZFxuICAgICAgICAvLyBQM1xuICAgICAgICBpZiAoZHgxICogZHkyID09IGR5MSAqIGR4MiAmJlxuICAgICAgICAgICAgKChkeDEgPCAwICYmIGR4MiA8IGR4MSkgfHwgZHgxID09IGR4MiB8fCAoZHgxID4gMCAmJiBkeDIgPiBkeDEpKSAmJlxuICAgICAgICAgICAgKChkeTEgPCAwICYmIGR5MiA8IGR5MSkgfHwgZHkxID09IGR5MiB8fCAoZHkxID4gMCAmJiBkeTIgPiBkeTEpKSkge1xuICAgICAgICAgICAgLy8gZGlzY2FyZCBQMiBhbmQgc2V0IFAyID0gUDNcbiAgICAgICAgICAgIHgyID0geDM7XG4gICAgICAgICAgICB5MiA9IHkzO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZWl0aGVyIFAxLCBQMiwgYW5kIFAzIGFyZSBub3QgY29saW5lYXIsIG9yIHRoZXkgYXJlIGNvbGluZWFyIGJ1dCBQMyBpc1xuICAgICAgICAvLyBiZXR3ZWVuIFAzIGFuZCBQMSBvciBvbiB0aGUgb3Bwb3NpdGUgaGFsZiBvZiB0aGUgbGluZSB0byBQMi4gIGFkZCBQMixcbiAgICAgICAgLy8gYW5kIGNvbnRpbnVlIHdpdGggUDEgPSBQMiBhbmQgUDIgPSBQM1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgICAgIHgyID0geDM7XG4gICAgICAgIHkyID0geTM7XG4gICAgfVxuICAgIC8vIGFkZCB0aGUgbGFzdCBwb2ludCAoUDIpXG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDI7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRW5kcyBTaW1wbGlmaWVkIGVuZHMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kcy5wdXNoKHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRvbGVyYW5jZSBUb2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0LCBzaW1wbGlmaWVkRW5kc3MpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkT2Zmc2V0ID0gcXVhbnRpemVBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgc2ltcGxpZmllZEVuZHNzLnB1c2goc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2ltcGxpZnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbmZsYXRlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gW29wdF9jb29yZGluYXRlc10gQ29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBDb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG9wdF9jb29yZGluYXRlcykge1xuICAgIHZhciBjb29yZGluYXRlcyA9IG9wdF9jb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzIDogW107XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIGNvb3JkaW5hdGVzW2krK10gPSBmbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaiwgaiArIHN0cmlkZSk7XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gW29wdF9jb29yZGluYXRlc3NdIENvb3JkaW5hdGVzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfY29vcmRpbmF0ZXNzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzcyA9IG9wdF9jb29yZGluYXRlc3MgIT09IHVuZGVmaW5lZCA/IG9wdF9jb29yZGluYXRlc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2pdO1xuICAgICAgICBjb29yZGluYXRlc3NbaSsrXSA9IGluZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVzc1tpXSk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXNzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBbb3B0X2Nvb3JkaW5hdGVzc3NdXG4gKiAgICAgQ29vcmRpbmF0ZXNzcy5cbiAqIEByZXR1cm4ge0FycmF5PEFycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+Pn0gQ29vcmRpbmF0ZXNzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVNdWx0aUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9jb29yZGluYXRlc3NzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzc3MgPSBvcHRfY29vcmRpbmF0ZXNzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gZW5kc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2pdO1xuICAgICAgICBjb29yZGluYXRlc3NzW2krK10gPSBpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBjb29yZGluYXRlc3NzW2ldKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBjb29yZGluYXRlc3NzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGNvb3JkaW5hdGVzc3M7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmZsYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvYXJlYVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIHZhciB0d2ljZUFyZWEgPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIHR3aWNlQXJlYSArPSB5MSAqIHgyIC0geDEgKiB5MjtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHR3aWNlQXJlYSAvIDI7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlKSB7XG4gICAgdmFyIGFyZWEgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgYXJlYSArPSBsaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBhcmVhICs9IGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBhcmVhO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJlYS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vTGluZWFyUmluZ1xuICovXG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGFzc2lnbkNsb3Nlc3RQb2ludCwgbWF4U3F1YXJlZERlbHRhIH0gZnJvbSAnLi9mbGF0L2Nsb3Nlc3QuanMnO1xuaW1wb3J0IHsgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlcyB9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7IGRvdWdsYXNQZXVja2VyIH0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7IGluZmxhdGVDb29yZGluYXRlcyB9IGZyb20gJy4vZmxhdC9pbmZsYXRlLmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmcgYXMgbGluZWFyUmluZ0FyZWEgfSBmcm9tICcuL2ZsYXQvYXJlYS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExpbmVhciByaW5nIGdlb21ldHJ5LiBPbmx5IHVzZWQgYXMgcGFydCBvZiBwb2x5Z29uOyBjYW5ub3QgYmUgcmVuZGVyZWRcbiAqIG9uIGl0cyBvd24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTGluZWFyUmluZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGluZWFyUmluZywgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT58QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogICAgIEZvciBpbnRlcm5hbCB1c2UsIGZsYXQgY29vcmRpbmF0ZXMgaW4gY29tYmluYXRpb24gd2l0aCBgb3B0X2xheW91dGAgYXJlIGFsc28gYWNjZXB0ZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTGluZWFyUmluZyhjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhUmV2aXNpb25fID0gLTE7XG4gICAgICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgIUFycmF5LmlzQXJyYXkoY29vcmRpbmF0ZXNbMF0pKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMob3B0X2xheW91dCwgXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChjb29yZGluYXRlcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59ICovIChjb29yZGluYXRlcyksIG9wdF9sYXlvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFMaW5lYXJSaW5nfSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgTGluZWFyUmluZyh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIGlmIChtaW5TcXVhcmVkRGlzdGFuY2UgPCBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkodGhpcy5nZXRFeHRlbnQoKSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChtYXhTcXVhcmVkRGVsdGEodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RQb2ludCh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgdGhpcy5tYXhEZWx0YV8sIHRydWUsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgbGluZWFyIHJpbmcgb24gcHJvamVjdGVkIHBsYW5lLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdBcmVhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxpbmVhciByaW5nLlxuICAgICAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGluZmxhdGVDb29yZGluYXRlcyh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtMaW5lYXJSaW5nfSBTaW1wbGlmaWVkIExpbmVhclJpbmcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkb3VnbGFzUGV1Y2tlcih0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgICAgIHJldHVybiBuZXcgTGluZWFyUmluZyhzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxpbmVhciByaW5nLlxuICAgICAqIEBwYXJhbSB7IUFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMSk7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCBjb29yZGluYXRlcywgdGhpcy5zdHJpZGUpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBMaW5lYXJSaW5nO1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgTGluZWFyUmluZztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxpbmVhclJpbmcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlUeXBlXG4gKi9cbi8qKlxuICogVGhlIGdlb21ldHJ5IHR5cGUuIE9uZSBvZiBgJ1BvaW50J2AsIGAnTGluZVN0cmluZydgLCBgJ0xpbmVhclJpbmcnYCxcbiAqIGAnUG9seWdvbidgLCBgJ011bHRpUG9pbnQnYCwgYCdNdWx0aUxpbmVTdHJpbmcnYCwgYCdNdWx0aVBvbHlnb24nYCxcbiAqIGAnR2VvbWV0cnlDb2xsZWN0aW9uJ2AsIGAnQ2lyY2xlJ2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUE9JTlQ6ICdQb2ludCcsXG4gICAgTElORV9TVFJJTkc6ICdMaW5lU3RyaW5nJyxcbiAgICBMSU5FQVJfUklORzogJ0xpbmVhclJpbmcnLFxuICAgIFBPTFlHT046ICdQb2x5Z29uJyxcbiAgICBNVUxUSV9QT0lOVDogJ011bHRpUG9pbnQnLFxuICAgIE1VTFRJX0xJTkVfU1RSSU5HOiAnTXVsdGlMaW5lU3RyaW5nJyxcbiAgICBNVUxUSV9QT0xZR09OOiAnTXVsdGlQb2x5Z29uJyxcbiAgICBHRU9NRVRSWV9DT0xMRUNUSU9OOiAnR2VvbWV0cnlDb2xsZWN0aW9uJyxcbiAgICBDSVJDTEU6ICdDaXJjbGUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdlb21ldHJ5VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vUG9pbnRcbiAqL1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgeyBjb250YWluc1hZLCBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGRlZmxhdGVDb29yZGluYXRlIH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgc3F1YXJlZERpc3RhbmNlIGFzIHNxdWFyZWREeCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQb2ludCBnZW9tZXRyeS5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBQb2ludCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9pbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBvaW50KGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7IVBvaW50fSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9pbnQgPSBuZXcgUG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQpO1xuICAgICAgICBwb2ludC5hcHBseVByb3BlcnRpZXModGhpcyk7XG4gICAgICAgIHJldHVybiBwb2ludDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgdmFyIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLnN0cmlkZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbG9zZXN0UG9pbnQubGVuZ3RoID0gc3RyaWRlO1xuICAgICAgICAgICAgcmV0dXJuIHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZmxhdENvb3JkaW5hdGVzID8gW10gOiB0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVGcm9tQ29vcmRpbmF0ZSh0aGlzLmZsYXRDb29yZGluYXRlcywgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gR2VvbWV0cnlUeXBlLlBPSU5UO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5pbnRlcnNlY3RzRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gY29udGFpbnNYWShleHRlbnQsIHRoaXMuZmxhdENvb3JkaW5hdGVzWzBdLCB0aGlzLmZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFBcnJheTwqPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMCk7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZGVmbGF0ZUNvb3JkaW5hdGUodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIFBvaW50O1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2NvbnRhaW5zXG4gKi9cbmltcG9ydCB7IGZvckVhY2hDb3JuZXIgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgdmFyIG91dHNpZGUgPSBmb3JFYWNoQ29ybmVyKGV4dGVudCwgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuICFsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xuICAgIH0pO1xuICAgIHJldHVybiAhb3V0c2lkZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB4LCB5KSB7XG4gICAgLy8gaHR0cHM6Ly9nZW9tYWxnb3JpdGhtcy5jb20vYTAzLV9pbmNsdXNpb24uaHRtbFxuICAgIC8vIENvcHlyaWdodCAyMDAwIHNvZnRTdXJmZXIsIDIwMTIgRGFuIFN1bmRheVxuICAgIC8vIFRoaXMgY29kZSBtYXkgYmUgZnJlZWx5IHVzZWQgYW5kIG1vZGlmaWVkIGZvciBhbnkgcHVycG9zZVxuICAgIC8vIHByb3ZpZGluZyB0aGF0IHRoaXMgY29weXJpZ2h0IG5vdGljZSBpcyBpbmNsdWRlZCB3aXRoIGl0LlxuICAgIC8vIFNvZnRTdXJmZXIgbWFrZXMgbm8gd2FycmFudHkgZm9yIHRoaXMgY29kZSwgYW5kIGNhbm5vdCBiZSBoZWxkXG4gICAgLy8gbGlhYmxlIGZvciBhbnkgcmVhbCBvciBpbWFnaW5lZCBkYW1hZ2UgcmVzdWx0aW5nIGZyb20gaXRzIHVzZS5cbiAgICAvLyBVc2VycyBvZiB0aGlzIGNvZGUgbXVzdCB2ZXJpZnkgY29ycmVjdG5lc3MgZm9yIHRoZWlyIGFwcGxpY2F0aW9uLlxuICAgIHZhciB3biA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgaWYgKHkxIDw9IHkpIHtcbiAgICAgICAgICAgIGlmICh5MiA+IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA+IDApIHtcbiAgICAgICAgICAgICAgICB3bisrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHkyIDw9IHkgJiYgKHgyIC0geDEpICogKHkgLSB5MSkgLSAoeCAtIHgxKSAqICh5MiAtIHkxKSA8IDApIHtcbiAgICAgICAgICAgIHduLS07XG4gICAgICAgIH1cbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHduICE9PSAwO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkge1xuICAgIGlmIChlbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghbGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgeCwgeSkge1xuICAgIGlmIChlbmRzcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmIChsaW5lYXJSaW5nc0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29udGFpbnMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbnRlcnNlY3RzZXh0ZW50XG4gKi9cbmltcG9ydCB7IGNvbnRhaW5zRXh0ZW50LCBjcmVhdGVFbXB0eSwgZXh0ZW5kRmxhdENvb3JkaW5hdGVzLCBpbnRlcnNlY3RzLCBpbnRlcnNlY3RzU2VnbWVudCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZm9yRWFjaCBhcyBmb3JFYWNoU2VnbWVudCB9IGZyb20gJy4vc2VnbWVudHMuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50LCBsaW5lYXJSaW5nQ29udGFpbnNYWSB9IGZyb20gJy4vY29udGFpbnMuanMnO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNFeHRlbnQgPSBleHRlbmRGbGF0Q29vcmRpbmF0ZXMoY3JlYXRlRW1wdHkoKSwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICBpZiAoIWludGVyc2VjdHMoZXh0ZW50LCBjb29yZGluYXRlc0V4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoY29udGFpbnNFeHRlbnQoZXh0ZW50LCBjb29yZGluYXRlc0V4dGVudCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlc0V4dGVudFswXSA+PSBleHRlbnRbMF0gJiYgY29vcmRpbmF0ZXNFeHRlbnRbMl0gPD0gZXh0ZW50WzJdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29vcmRpbmF0ZXNFeHRlbnRbMV0gPj0gZXh0ZW50WzFdICYmIGNvb3JkaW5hdGVzRXh0ZW50WzNdIDw9IGV4dGVudFszXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZvckVhY2hTZWdtZW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50MSBTdGFydCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQyIEVuZCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHNlZ21lbnQgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LFxuICAgICAqICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocG9pbnQxLCBwb2ludDIpIHtcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdHNTZWdtZW50KGV4dGVudCwgcG9pbnQxLCBwb2ludDIpO1xuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVTdHJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbaV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgaWYgKGludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzBdLCBleHRlbnRbMV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMF0sIGV4dGVudFszXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFsyXSwgZXh0ZW50WzFdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbM10pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGlmICghaW50ZXJzZWN0c0xpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbMF0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChlbmRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDEsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICBpZiAoIWludGVyc2VjdHNMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgZW5kc1tpIC0gMV0sIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpZiAoaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyc2VjdHNleHRlbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9zZWdtZW50c1xuICovXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBzZWdtZW50IG9mIHRoZSBmbGF0IGNvb3JkaW5hdGVzXG4gKiBhcnJheS4gSWYgdGhlIGNhbGxiYWNrIHJldHVybnMgYSB0cnV0aHkgdmFsdWUgdGhlIGZ1bmN0aW9uIHJldHVybnMgdGhhdFxuICogdmFsdWUgaW1tZWRpYXRlbHkuIE90aGVyd2lzZSB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBUfSBjYWxsYmFjayBGdW5jdGlvblxuICogICAgIGNhbGxlZCBmb3IgZWFjaCBzZWdtZW50LlxuICogQHJldHVybiB7VHxib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgcmV0O1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICByZXQgPSBjYWxsYmFjayhmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0IC0gc3RyaWRlLCBvZmZzZXQpLCBmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBzdHJpZGUpKTtcbiAgICAgICAgaWYgKHJldCkge1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWdtZW50cy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3JldmVyc2VcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29vcmRpbmF0ZXMoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgdG1wID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldO1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIGldID0gdG1wO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIGVuZCAtPSBzdHJpZGU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmV2ZXJzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L29yaWVudFxuICovXG5pbXBvcnQgeyBjb29yZGluYXRlcyBhcyByZXZlcnNlQ29vcmRpbmF0ZXMgfSBmcm9tICcuL3JldmVyc2UuanMnO1xuLyoqXG4gKiBJcyB0aGUgbGluZWFyIHJpbmcgb3JpZW50ZWQgY2xvY2t3aXNlIGluIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIGJvdHRvbS1sZWZ0XG4gKiBjb29yZGluYXRlIG9yaWdpbj8gRm9yIGEgY29vcmRpbmF0ZSBzeXN0ZW0gd2l0aCBhIHRvcC1sZWZ0IGNvb3JkaW5hdGUgb3JpZ2luLFxuICogdGhlIHJpbmcncyBvcmllbnRhdGlvbiBpcyBjbG9ja3dpc2Ugd2hlbiB0aGlzIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gSXMgY2xvY2t3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8xMTY1NjQ3L2Nsb2Nrd2lzZS1tZXRob2QjMTE2NTk0M1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9PU0dlby9nZGFsL2Jsb2IvbWFzdGVyL2dkYWwvb2dyL29ncmxpbmVhcnJpbmcuY3BwXG4gICAgdmFyIGVkZ2UgPSAwO1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICBmb3IgKDsgb2Zmc2V0IDwgZW5kOyBvZmZzZXQgKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICB2YXIgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIGVkZ2UgKz0gKHgyIC0geDEpICogKHkyICsgeTEpO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gZWRnZSA9PT0gMCA/IHVuZGVmaW5lZCA6IGVkZ2UgPiAwO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIFRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb25cbiAqICAgICAoY291bnRlci1jbG9ja3dpc2UgZXh0ZXJpb3IgcmluZyBhbmQgY2xvY2t3aXNlIGludGVyaW9yIHJpbmdzKS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJpbmdzIGFyZSBjb3JyZWN0bHkgb3JpZW50ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgIGlmICgocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICgocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIGxpbmVhciByaW5ncyBhcmUgb3JpZW50ZWQuICBCeSBkZWZhdWx0LCBsZWZ0LWhhbmQgb3JpZW50YXRpb25cbiAqIGlzIHRlc3RlZCAoZmlyc3QgcmluZyBtdXN0IGJlIGNsb2Nrd2lzZSwgcmVtYWluaW5nIHJpbmdzIGNvdW50ZXItY2xvY2t3aXNlKS5cbiAqIFRvIHRlc3QgZm9yIHJpZ2h0LWhhbmQgb3JpZW50YXRpb24sIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgQXJyYXkgb2YgYXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gVGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvblxuICogICAgIChjb3VudGVyLWNsb2Nrd2lzZSBleHRlcmlvciByaW5nIGFuZCBjbG9ja3dpc2UgaW50ZXJpb3IgcmluZ3MpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmluZ3MgYXJlIGNvcnJlY3RseSBvcmllbnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmICghbGluZWFyUmluZ3NBcmVPcmllbnRlZChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIE9yaWVudCBjb29yZGluYXRlcyBpbiBhIGZsYXQgYXJyYXkgb2YgbGluZWFyIHJpbmdzLiAgQnkgZGVmYXVsdCwgcmluZ3NcbiAqIGFyZSBvcmllbnRlZCBmb2xsb3dpbmcgdGhlIGxlZnQtaGFuZCBydWxlIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZFxuICogY291bnRlci1jbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS4gIFRvIG9yaWVudCBhY2NvcmRpbmcgdG8gdGhlXG4gKiByaWdodC1oYW5kIHJ1bGUsIHVzZSB0aGUgYG9wdF9yaWdodGAgYXJndW1lbnQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gRm9sbG93IHRoZSByaWdodC1oYW5kIHJ1bGUgZm9yIG9yaWVudGF0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBvcHRfcmlnaHQpIHtcbiAgICB2YXIgcmlnaHQgPSBvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCA/IG9wdF9yaWdodCA6IGZhbHNlO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgdmFyIGlzQ2xvY2t3aXNlID0gbGluZWFyUmluZ0lzQ2xvY2t3aXNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIHZhciByZXZlcnNlID0gaSA9PT0gMFxuICAgICAgICAgICAgPyAocmlnaHQgJiYgaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgIWlzQ2xvY2t3aXNlKVxuICAgICAgICAgICAgOiAocmlnaHQgJiYgIWlzQ2xvY2t3aXNlKSB8fCAoIXJpZ2h0ICYmIGlzQ2xvY2t3aXNlKTtcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICAgIHJldmVyc2VDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgb2Zmc2V0ID0gb3JpZW50TGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzW2ldLCBzdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vcmllbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL1BvbHlnb25cbiAqL1xuaW1wb3J0IEdlb21ldHJ5TGF5b3V0IGZyb20gJy4vR2VvbWV0cnlMYXlvdXQuanMnO1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgTGluZWFyUmluZyBmcm9tICcuL0xpbmVhclJpbmcuanMnO1xuaW1wb3J0IFBvaW50IGZyb20gJy4vUG9pbnQuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgYXJyYXlNYXhTcXVhcmVkRGVsdGEsIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50IH0gZnJvbSAnLi9mbGF0L2Nsb3Nlc3QuanMnO1xuaW1wb3J0IHsgY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZLCBnZXRDZW50ZXIgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkgfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQgeyBleHRlbmQgfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgeyBnZXRJbnRlcmlvclBvaW50T2ZBcnJheSB9IGZyb20gJy4vZmxhdC9pbnRlcmlvcnBvaW50LmpzJztcbmltcG9ydCB7IGluZmxhdGVDb29yZGluYXRlc0FycmF5IH0gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHsgaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSB9IGZyb20gJy4vZmxhdC9pbnRlcnNlY3RzZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdzQXJlT3JpZW50ZWQsIG9yaWVudExpbmVhclJpbmdzIH0gZnJvbSAnLi9mbGF0L29yaWVudC5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5ncyBhcyBsaW5lYXJSaW5nc0FyZWEgfSBmcm9tICcuL2ZsYXQvYXJlYS5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nc0NvbnRhaW5zWFkgfSBmcm9tICcuL2ZsYXQvY29udGFpbnMuanMnO1xuaW1wb3J0IHsgbW9kdWxvIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBxdWFudGl6ZUFycmF5IH0gZnJvbSAnLi9mbGF0L3NpbXBsaWZ5LmpzJztcbmltcG9ydCB7IG9mZnNldCBhcyBzcGhlcmVPZmZzZXQgfSBmcm9tICcuLi9zcGhlcmUuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQb2x5Z29uIGdlb21ldHJ5LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFBvbHlnb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvbHlnb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshQXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj58IUFycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzXG4gICAgICogICAgIEFycmF5IG9mIGxpbmVhciByaW5ncyB0aGF0IGRlZmluZSB0aGUgcG9seWdvbi4gVGhlIGZpcnN0IGxpbmVhciByaW5nIG9mIHRoZVxuICAgICAqICAgICBhcnJheSBkZWZpbmVzIHRoZSBvdXRlci1ib3VuZGFyeSBvciBzdXJmYWNlIG9mIHRoZSBwb2x5Z29uLiBFYWNoIHN1YnNlcXVlbnRcbiAgICAgKiAgICAgbGluZWFyIHJpbmcgZGVmaW5lcyBhIGhvbGUgaW4gdGhlIHN1cmZhY2Ugb2YgdGhlIHBvbHlnb24uIEEgbGluZWFyIHJpbmcgaXNcbiAgICAgKiAgICAgYW4gYXJyYXkgb2YgdmVydGljZXMnIGNvb3JkaW5hdGVzIHdoZXJlIHRoZSBmaXJzdCBjb29yZGluYXRlIGFuZCB0aGUgbGFzdCBhcmVcbiAgICAgKiAgICAgZXF1aXZhbGVudC4gKEZvciBpbnRlcm5hbCB1c2UsIGZsYXQgY29vcmRpbmF0ZXMgaW4gY29tYmluYXRpb24gd2l0aFxuICAgICAqICAgICBgb3B0X2xheW91dGAgYW5kIGBvcHRfZW5kc2AgYXJlIGFsc28gYWNjZXB0ZWQuKVxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9lbmRzXSBFbmRzIChmb3IgaW50ZXJuYWwgdXNlIHdpdGggZmxhdCBjb29yZGluYXRlcykuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9seWdvbihjb29yZGluYXRlcywgb3B0X2xheW91dCwgb3B0X2VuZHMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZW5kc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRJbnRlcmlvclBvaW50XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFfID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmllbnRlZFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBudWxsO1xuICAgICAgICBpZiAob3B0X2xheW91dCAhPT0gdW5kZWZpbmVkICYmIG9wdF9lbmRzKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRGbGF0Q29vcmRpbmF0ZXMob3B0X2xheW91dCwgXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovIChjb29yZGluYXRlcykpO1xuICAgICAgICAgICAgX3RoaXMuZW5kc18gPSBvcHRfZW5kcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVzKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBlbmQgdGhlIHBhc3NlZCBsaW5lYXIgcmluZyB0byB0aGlzIHBvbHlnb24uXG4gICAgICogQHBhcmFtIHtMaW5lYXJSaW5nfSBsaW5lYXJSaW5nIExpbmVhciByaW5nLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5hcHBlbmRMaW5lYXJSaW5nID0gZnVuY3Rpb24gKGxpbmVhclJpbmcpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBsaW5lYXJSaW5nLmdldEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHRlbmQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZW5kc18ucHVzaCh0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHshUG9seWdvbn0gQ2xvbmUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0LCB0aGlzLmVuZHNfLnNsaWNlKCkpO1xuICAgICAgICBwb2x5Z29uLmFwcGx5UHJvcGVydGllcyh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHBvbHlnb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5TcXVhcmVkRGlzdGFuY2UgTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmNsb3Nlc3RQb2ludFhZID0gZnVuY3Rpb24gKHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgIGlmIChtaW5TcXVhcmVkRGlzdGFuY2UgPCBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkodGhpcy5nZXRFeHRlbnQoKSwgeCwgeSkpIHtcbiAgICAgICAgICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gIT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLm1heERlbHRhXyA9IE1hdGguc3FydChhcnJheU1heFNxdWFyZWREZWx0YSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIDApKTtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgdGhpcy5tYXhEZWx0YV8sIHRydWUsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY29udGFpbnNYWSA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHJldHVybiBsaW5lYXJSaW5nc0NvbnRhaW5zWFkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgeCwgeSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGFyZWEgb2YgdGhlIHBvbHlnb24gb24gcHJvamVjdGVkIHBsYW5lLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQXJlYSAob24gcHJvamVjdGVkIHBsYW5lKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0QXJlYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzQXJlYSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29vcmRpbmF0ZSBhcnJheSBmb3IgdGhpcyBnZW9tZXRyeS4gIFRoaXMgYXJyYXkgaGFzIHRoZSBzdHJ1Y3R1cmVcbiAgICAgKiBvZiBhIEdlb0pTT04gY29vcmRpbmF0ZSBhcnJheSBmb3IgcG9seWdvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIE9yaWVudCBjb29yZGluYXRlcyBhY2NvcmRpbmcgdG8gdGhlIHJpZ2h0LWhhbmRcbiAgICAgKiAgICAgcnVsZSAoY291bnRlci1jbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZCBjbG9ja3dpc2UgZm9yIGludGVyaW9yIHJpbmdzKS5cbiAgICAgKiAgICAgSWYgYGZhbHNlYCwgY29vcmRpbmF0ZXMgd2lsbCBiZSBvcmllbnRlZCBhY2NvcmRpbmcgdG8gdGhlIGxlZnQtaGFuZCBydWxlXG4gICAgICogICAgIChjbG9ja3dpc2UgZm9yIGV4dGVyaW9yIGFuZCBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLlxuICAgICAqICAgICBCeSBkZWZhdWx0LCBjb29yZGluYXRlIG9yaWVudGF0aW9uIHdpbGwgZGVwZW5kIG9uIGhvdyB0aGUgZ2VvbWV0cnkgd2FzXG4gICAgICogICAgIGNvbnN0cnVjdGVkLlxuICAgICAqIEByZXR1cm4ge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBDb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAob3B0X3JpZ2h0KSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIGlmIChvcHRfcmlnaHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLnNsaWNlKCk7XG4gICAgICAgICAgICBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBvcHRfcmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRW5kcy5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRFbmRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbmRzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEludGVyaW9yIHBvaW50LlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEZsYXRJbnRlcmlvclBvaW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHZhciBmbGF0Q2VudGVyID0gZ2V0Q2VudGVyKHRoaXMuZ2V0RXh0ZW50KCkpO1xuICAgICAgICAgICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludF8gPSBnZXRJbnRlcmlvclBvaW50T2ZBcnJheSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBmbGF0Q2VudGVyLCAwKTtcbiAgICAgICAgICAgIHRoaXMuZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdEludGVyaW9yUG9pbnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGFuIGludGVyaW9yIHBvaW50IG9mIHRoZSBwb2x5Z29uLlxuICAgICAqIEByZXR1cm4ge1BvaW50fSBJbnRlcmlvciBwb2ludCBhcyBYWU0gY29vcmRpbmF0ZSwgd2hlcmUgTSBpcyB0aGVcbiAgICAgKiBsZW5ndGggb2YgdGhlIGhvcml6b250YWwgaW50ZXJzZWN0aW9uIHRoYXQgdGhlIHBvaW50IGJlbG9uZ3MgdG8uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEludGVyaW9yUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy5nZXRGbGF0SW50ZXJpb3JQb2ludCgpLCBHZW9tZXRyeUxheW91dC5YWU0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBudW1iZXIgb2YgcmluZ3Mgb2YgdGhlIHBvbHlnb24sICB0aGlzIGluY2x1ZGVzIHRoZSBleHRlcmlvclxuICAgICAqIHJpbmcgYW5kIGFueSBpbnRlcmlvciByaW5ncy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTnVtYmVyIG9mIHJpbmdzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZHNfLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgTnRoIGxpbmVhciByaW5nIG9mIHRoZSBwb2x5Z29uIGdlb21ldHJ5LiBSZXR1cm4gYG51bGxgIGlmIHRoZVxuICAgICAqIGdpdmVuIGluZGV4IGlzIG91dCBvZiByYW5nZS5cbiAgICAgKiBUaGUgZXh0ZXJpb3IgbGluZWFyIHJpbmcgaXMgYXZhaWxhYmxlIGF0IGluZGV4IGAwYCBhbmQgdGhlIGludGVyaW9yIHJpbmdzXG4gICAgICogYXQgaW5kZXggYDFgIGFuZCBiZXlvbmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHJldHVybiB7TGluZWFyUmluZ30gTGluZWFyIHJpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmcgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLmVuZHNfLmxlbmd0aCA8PSBpbmRleCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKGluZGV4ID09PSAwID8gMCA6IHRoaXMuZW5kc19baW5kZXggLSAxXSwgdGhpcy5lbmRzX1tpbmRleF0pLCB0aGlzLmxheW91dCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGxpbmVhciByaW5ncyBvZiB0aGUgcG9seWdvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxMaW5lYXJSaW5nPn0gTGluZWFyIHJpbmdzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5ncyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxheW91dCA9IHRoaXMubGF5b3V0O1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5mbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIHZhciBlbmRzID0gdGhpcy5lbmRzXztcbiAgICAgICAgdmFyIGxpbmVhclJpbmdzID0gW107XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICAgICAgdmFyIGxpbmVhclJpbmcgPSBuZXcgTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMuc2xpY2Uob2Zmc2V0LCBlbmQpLCBsYXlvdXQpO1xuICAgICAgICAgICAgbGluZWFyUmluZ3MucHVzaChsaW5lYXJSaW5nKTtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGluZWFyUmluZ3M7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPcmllbnRlZCBmbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5vcmllbnRlZFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgICAgIGlmIChsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18gPSBmbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcy5zbGljZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLmxlbmd0aCA9IG9yaWVudExpbmVhclJpbmdzKHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9yaWVudGVkUmV2aXNpb25fID0gdGhpcy5nZXRSZXZpc2lvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1BvbHlnb259IFNpbXBsaWZpZWQgUG9seWdvbi5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBxdWFudGl6ZUFycmF5KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgTWF0aC5zcXJ0KHNxdWFyZWRUb2xlcmFuY2UpLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwLCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIHJldHVybiBuZXcgUG9seWdvbihzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSwgc2ltcGxpZmllZEVuZHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0VHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEdlb21ldHJ5VHlwZS5QT0xZR09OO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBwYXNzZWQgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBwb2x5Z29uLlxuICAgICAqIEBwYXJhbSB7IUFycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdGhpcy5zZXRMYXlvdXQob3B0X2xheW91dCwgY29vcmRpbmF0ZXMsIDIpO1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbmRzID0gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSwgdGhpcy5lbmRzXyk7XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGVuZHMubGVuZ3RoID09PSAwID8gMCA6IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9seWdvbjtcbn0oU2ltcGxlR2VvbWV0cnkpKTtcbmV4cG9ydCBkZWZhdWx0IFBvbHlnb247XG4vKipcbiAqIENyZWF0ZSBhbiBhcHByb3hpbWF0aW9uIG9mIGEgY2lyY2xlIG9uIHRoZSBzdXJmYWNlIG9mIGEgc3BoZXJlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgVGhlIGdyZWF0LWNpcmNsZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgdG9cbiAqICAgICB0aGUgcG9seWdvbiB2ZXJ0aWNlcyBpbiBtZXRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9uXSBPcHRpb25hbCBudW1iZXIgb2YgdmVydGljZXMgZm9yIHRoZSByZXN1bHRpbmdcbiAqICAgICBwb2x5Z29uLiBEZWZhdWx0IGlzIGAzMmAuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zcGhlcmVSYWRpdXNdIE9wdGlvbmFsIHJhZGl1cyBmb3IgdGhlIHNwaGVyZSAoZGVmYXVsdHMgdG9cbiAqICAgICB0aGUgRWFydGgncyBtZWFuIHJhZGl1cyB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkKS5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBcImNpcmN1bGFyXCIgcG9seWdvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNpcmN1bGFyKGNlbnRlciwgcmFkaXVzLCBvcHRfbiwgb3B0X3NwaGVyZVJhZGl1cykge1xuICAgIHZhciBuID0gb3B0X24gPyBvcHRfbiA6IDMyO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgZXh0ZW5kKGZsYXRDb29yZGluYXRlcywgc3BoZXJlT2Zmc2V0KGNlbnRlciwgcmFkaXVzLCAoMiAqIE1hdGguUEkgKiBpKSAvIG4sIG9wdF9zcGhlcmVSYWRpdXMpKTtcbiAgICB9XG4gICAgZmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV0pO1xuICAgIHJldHVybiBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBbXG4gICAgICAgIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsXG4gICAgXSk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHBvbHlnb24gZnJvbSBhbiBleHRlbnQuIFRoZSBsYXlvdXQgdXNlZCBpcyBgWFlgLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFRoZSBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV4dGVudChleHRlbnQpIHtcbiAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICB2YXIgbWluWSA9IGV4dGVudFsxXTtcbiAgICB2YXIgbWF4WCA9IGV4dGVudFsyXTtcbiAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gW1xuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtYXhZLFxuICAgICAgICBtYXhYLFxuICAgICAgICBtaW5ZLFxuICAgICAgICBtaW5YLFxuICAgICAgICBtaW5ZLFxuICAgIF07XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIFtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICBdKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcmVndWxhciBwb2x5Z29uIGZyb20gYSBjaXJjbGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vQ2lyY2xlLmpzXCIpLmRlZmF1bHR9IGNpcmNsZSBDaXJjbGUgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zaWRlc10gTnVtYmVyIG9mIHNpZGVzIG9mIHRoZSBwb2x5Z29uLiBEZWZhdWx0IGlzIDMyLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfYW5nbGVdIFN0YXJ0IGFuZ2xlIGZvciB0aGUgZmlyc3QgdmVydGV4IG9mIHRoZSBwb2x5Z29uIGluXG4gKiAgICAgY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy4gMCBtZWFucyBFYXN0LiBEZWZhdWx0IGlzIDAuXG4gKiBAcmV0dXJuIHtQb2x5Z29ufSBQb2x5Z29uIGdlb21ldHJ5LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbUNpcmNsZShjaXJjbGUsIG9wdF9zaWRlcywgb3B0X2FuZ2xlKSB7XG4gICAgdmFyIHNpZGVzID0gb3B0X3NpZGVzID8gb3B0X3NpZGVzIDogMzI7XG4gICAgdmFyIHN0cmlkZSA9IGNpcmNsZS5nZXRTdHJpZGUoKTtcbiAgICB2YXIgbGF5b3V0ID0gY2lyY2xlLmdldExheW91dCgpO1xuICAgIHZhciBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIGFycmF5TGVuZ3RoID0gc3RyaWRlICogKHNpZGVzICsgMSk7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheShhcnJheUxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheUxlbmd0aDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW2ldID0gMDtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW2kgKyAxXSA9IDA7XG4gICAgICAgIGZvciAodmFyIGogPSAyOyBqIDwgc3RyaWRlOyBqKyspIHtcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tpICsgal0gPSBjZW50ZXJbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGVuZHMgPSBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF07XG4gICAgdmFyIHBvbHlnb24gPSBuZXcgUG9seWdvbihmbGF0Q29vcmRpbmF0ZXMsIGxheW91dCwgZW5kcyk7XG4gICAgbWFrZVJlZ3VsYXIocG9seWdvbiwgY2VudGVyLCBjaXJjbGUuZ2V0UmFkaXVzKCksIG9wdF9hbmdsZSk7XG4gICAgcmV0dXJuIHBvbHlnb247XG59XG4vKipcbiAqIE1vZGlmeSB0aGUgY29vcmRpbmF0ZXMgb2YgYSBwb2x5Z29uIHRvIG1ha2UgaXQgYSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge1BvbHlnb259IHBvbHlnb24gUG9seWdvbiBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFJhZGl1cyBvZiB0aGUgcmVndWxhciBwb2x5Z29uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfYW5nbGVdIFN0YXJ0IGFuZ2xlIGZvciB0aGUgZmlyc3QgdmVydGV4IG9mIHRoZSBwb2x5Z29uIGluXG4gKiAgICAgY291bnRlci1jbG9ja3dpc2UgcmFkaWFucy4gMCBtZWFucyBFYXN0LiBEZWZhdWx0IGlzIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIHJhZGl1cywgb3B0X2FuZ2xlKSB7XG4gICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHBvbHlnb24uZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgdmFyIHN0cmlkZSA9IHBvbHlnb24uZ2V0U3RyaWRlKCk7XG4gICAgdmFyIHNpZGVzID0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAvIHN0cmlkZSAtIDE7XG4gICAgdmFyIHN0YXJ0QW5nbGUgPSBvcHRfYW5nbGUgPyBvcHRfYW5nbGUgOiAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IHNpZGVzOyArK2kpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IGkgKiBzdHJpZGU7XG4gICAgICAgIHZhciBhbmdsZSA9IHN0YXJ0QW5nbGUgKyAobW9kdWxvKGksIHNpZGVzKSAqIDIgKiBNYXRoLlBJKSAvIHNpZGVzO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSA9IGNlbnRlclswXSArIHJhZGl1cyAqIE1hdGguY29zKGFuZ2xlKTtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdID0gY2VudGVyWzFdICsgcmFkaXVzICogTWF0aC5zaW4oYW5nbGUpO1xuICAgIH1cbiAgICBwb2x5Z29uLmNoYW5nZWQoKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvbHlnb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9pbnRlcmlvcnBvaW50XG4gKi9cbmltcG9ydCB7IGxpbmVhclJpbmdzQ29udGFpbnNYWSB9IGZyb20gJy4vY29udGFpbnMuanMnO1xuaW1wb3J0IHsgbnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbiB9IGZyb20gJy4uLy4uL2FycmF5LmpzJztcbi8qKlxuICogQ2FsY3VsYXRlcyBhIHBvaW50IHRoYXQgaXMgbGlrZWx5IHRvIGxpZSBpbiB0aGUgaW50ZXJpb3Igb2YgdGhlIGxpbmVhciByaW5ncy5cbiAqIEluc3BpcmVkIGJ5IEpUUydzIGNvbS52aXZpZHNvbHV0aW9ucy5qdHMuZ2VvbS5HZW9tZXRyeSNnZXRJbnRlcmlvclBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHBhcmFtIHtudW1iZXJ9IGZsYXRDZW50ZXJzT2Zmc2V0IEZsYXQgY2VudGVyIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9kZXN0XSBEZXN0aW5hdGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IERlc3RpbmF0aW9uIHBvaW50IGFzIFhZTSBjb29yZGluYXRlLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZmxhdENlbnRlcnMsIGZsYXRDZW50ZXJzT2Zmc2V0LCBvcHRfZGVzdCkge1xuICAgIHZhciBpLCBpaSwgeCwgeDEsIHgyLCB5MSwgeTI7XG4gICAgdmFyIHkgPSBmbGF0Q2VudGVyc1tmbGF0Q2VudGVyc09mZnNldCArIDFdO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi9cbiAgICB2YXIgaW50ZXJzZWN0aW9ucyA9IFtdO1xuICAgIC8vIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb25zIHdpdGggdGhlIGhvcml6b250YWwgbGluZVxuICAgIGZvciAodmFyIHIgPSAwLCByciA9IGVuZHMubGVuZ3RoOyByIDwgcnI7ICsrcikge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tyXTtcbiAgICAgICAgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICAgICAgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgICAgIGZvciAoaSA9IG9mZnNldDsgaSA8IGVuZDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgaWYgKCh5IDw9IHkxICYmIHkyIDw9IHkpIHx8ICh5MSA8PSB5ICYmIHkgPD0geTIpKSB7XG4gICAgICAgICAgICAgICAgeCA9ICgoeSAtIHkxKSAvICh5MiAtIHkxKSkgKiAoeDIgLSB4MSkgKyB4MTtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb25zLnB1c2goeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBGaW5kIHRoZSBsb25nZXN0IHNlZ21lbnQgb2YgdGhlIGhvcml6b250YWwgbGluZSB0aGF0IGhhcyBpdHMgY2VudGVyIHBvaW50XG4gICAgLy8gaW5zaWRlIHRoZSBsaW5lYXIgcmluZy5cbiAgICB2YXIgcG9pbnRYID0gTmFOO1xuICAgIHZhciBtYXhTZWdtZW50TGVuZ3RoID0gLUluZmluaXR5O1xuICAgIGludGVyc2VjdGlvbnMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcbiAgICB4MSA9IGludGVyc2VjdGlvbnNbMF07XG4gICAgZm9yIChpID0gMSwgaWkgPSBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgeDIgPSBpbnRlcnNlY3Rpb25zW2ldO1xuICAgICAgICB2YXIgc2VnbWVudExlbmd0aCA9IE1hdGguYWJzKHgyIC0geDEpO1xuICAgICAgICBpZiAoc2VnbWVudExlbmd0aCA+IG1heFNlZ21lbnRMZW5ndGgpIHtcbiAgICAgICAgICAgIHggPSAoeDEgKyB4MikgLyAyO1xuICAgICAgICAgICAgaWYgKGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICAgICAgICAgIHBvaW50WCA9IHg7XG4gICAgICAgICAgICAgICAgbWF4U2VnbWVudExlbmd0aCA9IHNlZ21lbnRMZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeDEgPSB4MjtcbiAgICB9XG4gICAgaWYgKGlzTmFOKHBvaW50WCkpIHtcbiAgICAgICAgLy8gVGhlcmUgaXMgbm8gaG9yaXpvbnRhbCBsaW5lIHRoYXQgaGFzIGl0cyBjZW50ZXIgcG9pbnQgaW5zaWRlIHRoZSBsaW5lYXJcbiAgICAgICAgLy8gcmluZy4gIFVzZSB0aGUgY2VudGVyIG9mIHRoZSB0aGUgbGluZWFyIHJpbmcncyBleHRlbnQuXG4gICAgICAgIHBvaW50WCA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0XTtcbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0KSB7XG4gICAgICAgIG9wdF9kZXN0LnB1c2gocG9pbnRYLCB5LCBtYXhTZWdtZW50TGVuZ3RoKTtcbiAgICAgICAgcmV0dXJuIG9wdF9kZXN0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtwb2ludFgsIHksIG1heFNlZ21lbnRMZW5ndGhdO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENlbnRlcnMgRmxhdCBjZW50ZXJzLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnRzIGFzIFhZTSBjb29yZGluYXRlcywgd2hlcmUgTSBpcyB0aGVcbiAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVyaW9yUG9pbnRzT2ZNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBmbGF0Q2VudGVycykge1xuICAgIHZhciBpbnRlcmlvclBvaW50cyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaW50ZXJpb3JQb2ludHMgPSBnZXRJbnRlcmlvclBvaW50T2ZBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBmbGF0Q2VudGVycywgMiAqIGksIGludGVyaW9yUG9pbnRzKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gaW50ZXJpb3JQb2ludHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmlvcnBvaW50LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVmlld1xuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vZ2VvbS9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi9WaWV3SGludC5qcyc7XG5pbXBvcnQgVmlld1Byb3BlcnR5IGZyb20gJy4vVmlld1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IERFRkFVTFRfVElMRV9TSVpFIH0gZnJvbSAnLi90aWxlZ3JpZC9jb21tb24uanMnO1xuaW1wb3J0IHsgTUVURVJTX1BFUl9VTklULCBjcmVhdGVQcm9qZWN0aW9uLCBmcm9tVXNlckNvb3JkaW5hdGUsIGZyb21Vc2VyRXh0ZW50LCBnZXRVc2VyUHJvamVjdGlvbiwgdG9Vc2VyQ29vcmRpbmF0ZSwgdG9Vc2VyRXh0ZW50LCB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBWT0lEIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWRkIGFzIGFkZENvb3JkaW5hdGUsIGVxdWFscyBhcyBjb29yZGluYXRlc0VxdWFsLCByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSwgfSBmcm9tICcuL2Nvb3JkaW5hdGUuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7IG5vbmUgYXMgY2VudGVyTm9uZSwgY3JlYXRlRXh0ZW50IH0gZnJvbSAnLi9jZW50ZXJjb25zdHJhaW50LmpzJztcbmltcG9ydCB7IGNsYW1wLCBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgY3JlYXRlTWluTWF4UmVzb2x1dGlvbiB9IGZyb20gJy4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlU25hcFRvTiwgY3JlYXRlU25hcFRvWmVybywgZGlzYWJsZSwgbm9uZSBhcyByb3RhdGlvbk5vbmUsIH0gZnJvbSAnLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlU25hcFRvUG93ZXIsIGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zLCB9IGZyb20gJy4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4vZWFzaW5nLmpzJztcbmltcG9ydCB7IGVxdWFscyB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgeyBnZXRDZW50ZXIsIGdldEZvclZpZXdBbmRTaXplLCBnZXRIZWlnaHQsIGdldFdpZHRoLCBpc0VtcHR5LCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGluQW5kT3V0IH0gZnJvbSAnLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgbGluZWFyRmluZE5lYXJlc3QgfSBmcm9tICcuL2FycmF5LmpzJztcbmltcG9ydCB7IGZyb21FeHRlbnQgYXMgcG9seWdvbkZyb21FeHRlbnQgfSBmcm9tICcuL2dlb20vUG9seWdvbi5qcyc7XG4vKipcbiAqIEFuIGFuaW1hdGlvbiBjb25maWd1cmF0aW9uXG4gKlxuICogQHR5cGVkZWYge09iamVjdH0gQW5pbWF0aW9uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbc291cmNlQ2VudGVyXSBTb3VyY2UgY2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW3RhcmdldENlbnRlcl0gVGFyZ2V0IGNlbnRlci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc291cmNlUmVzb2x1dGlvbl0gU291cmNlIHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJlc29sdXRpb25dIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSb3RhdGlvbl0gU291cmNlIHJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0YXJnZXRSb3RhdGlvbl0gVGFyZ2V0IHJvdGF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gQW5jaG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0IFN0YXJ0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBjb21wbGV0ZSBDb21wbGV0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IGVhc2luZyBFYXNpbmcuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOnZvaWR9IGNhbGxiYWNrIENhbGxiYWNrLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IENvbnN0cmFpbnRzXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBjZW50ZXIgQ2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9yb3RhdGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcm90YXRpb24gUm90YXRpb24uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRml0T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW3NpemVdIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgYm94IHRvIGZpdFxuICogdGhlIGV4dGVudCBpbnRvLiBEZWZhdWx0IGlzIHRoZSBjdXJyZW50IHNpemUgb2YgdGhlIGZpcnN0IG1hcCBpbiB0aGUgRE9NIHRoYXRcbiAqIHVzZXMgdGhpcyB2aWV3LCBvciBgWzEwMCwgMTAwXWAgaWYgbm8gc3VjaCBtYXAgaXMgZm91bmQuXG4gKiBAcHJvcGVydHkgeyFBcnJheTxudW1iZXI+fSBbcGFkZGluZz1bMCwgMCwgMCwgMF1dIFBhZGRpbmcgKGluIHBpeGVscykgdG8gYmVcbiAqIGNsZWFyZWQgaW5zaWRlIHRoZSB2aWV3LiBWYWx1ZXMgaW4gdGhlIGFycmF5IGFyZSB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnRcbiAqIHBhZGRpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtuZWFyZXN0PWZhbHNlXSBJZiB0aGUgdmlldyBgY29uc3RyYWluUmVzb2x1dGlvbmAgb3B0aW9uIGlzIGB0cnVlYCxcbiAqIGdldCB0aGUgbmVhcmVzdCBleHRlbnQgaW5zdGVhZCBvZiB0aGUgY2xvc2VzdCB0aGF0IGFjdHVhbGx5IGZpdHMgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb249MF0gTWluaW11bSByZXNvbHV0aW9uIHRoYXQgd2Ugem9vbSB0by5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIHRoYXQgd2Ugem9vbSB0by4gSWZcbiAqIGBtaW5SZXNvbHV0aW9uYCBpcyBnaXZlbiwgdGhpcyBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbl0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQnkgZGVmYXVsdCwgdGhlcmUgaXMgbm8gYW5pbWF0aW9uIHRvIHRoZSB0YXJnZXQgZXh0ZW50LlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gW2Vhc2luZ10gVGhlIGVhc2luZyBmdW5jdGlvbiB1c2VkIGR1cmluZ1xuICogdGhlIGFuaW1hdGlvbiAoZGVmYXVsdHMgdG8ge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmcuaW5BbmRPdXR9KS5cbiAqIFRoZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaCBmcmFtZSB3aXRoIGEgbnVtYmVyIHJlcHJlc2VudGluZyBhXG4gKiBmcmFjdGlvbiBvZiB0aGUgYW5pbWF0aW9uJ3MgZHVyYXRpb24uICBUaGUgZnVuY3Rpb24gc2hvdWxkIHJldHVybiBhIG51bWJlclxuICogYmV0d2VlbiAwIGFuZCAxIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdG93YXJkIHRoZSBkZXN0aW5hdGlvbiBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6dm9pZH0gW2NhbGxiYWNrXSBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGUgdmlldyBpcyBpblxuICogaXRzIGZpbmFsIHBvc2l0aW9uLiBUaGUgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgd2l0aCBgdHJ1ZWAgaWYgdGhlIGFuaW1hdGlvblxuICogc2VyaWVzIGNvbXBsZXRlZCBvbiBpdHMgb3duIG9yIGBmYWxzZWAgaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBWaWV3T3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gVGhlIGluaXRpYWwgY2VudGVyIGZvclxuICogdGhlIHZpZXcuIElmIGEgdXNlciBwcm9qZWN0aW9uIGlzIG5vdCBzZXQsIHRoZSBjb29yZGluYXRlIHN5c3RlbSBmb3IgdGhlIGNlbnRlciBpc1xuICogc3BlY2lmaWVkIHdpdGggdGhlIGBwcm9qZWN0aW9uYCBvcHRpb24uIExheWVyIHNvdXJjZXMgd2lsbCBub3QgYmUgZmV0Y2hlZCBpZiB0aGlzXG4gKiBpcyBub3Qgc2V0LCBidXQgdGhlIGNlbnRlciBjYW4gYmUgc2V0IGxhdGVyIHdpdGgge0BsaW5rICNzZXRDZW50ZXJ9LlxuICogQHByb3BlcnR5IHtib29sZWFufG51bWJlcn0gW2NvbnN0cmFpblJvdGF0aW9uPXRydWVdIFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKiBgZmFsc2VgIG1lYW5zIG5vIGNvbnN0cmFpbnQuIGB0cnVlYCBtZWFucyBubyBjb25zdHJhaW50LCBidXQgc25hcCB0byB6ZXJvXG4gKiBuZWFyIHplcm8uIEEgbnVtYmVyIGNvbnN0cmFpbnMgdGhlIHJvdGF0aW9uIHRvIHRoYXQgbnVtYmVyIG9mIHZhbHVlcy4gRm9yXG4gKiBleGFtcGxlLCBgNGAgd2lsbCBjb25zdHJhaW4gdGhlIHJvdGF0aW9uIHRvIDAsIDkwLCAxODAsIGFuZCAyNzAgZGVncmVlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2VuYWJsZVJvdGF0aW9uPXRydWVdIEVuYWJsZSByb3RhdGlvbi5cbiAqIElmIGBmYWxzZWAsIGEgcm90YXRpb24gY29uc3RyYWludCB0aGF0IGFsd2F5cyBzZXRzIHRoZSByb3RhdGlvbiB0byB6ZXJvIGlzXG4gKiB1c2VkLiBUaGUgYGNvbnN0cmFpblJvdGF0aW9uYCBvcHRpb24gaGFzIG5vIGVmZmVjdCBpZiBgZW5hYmxlUm90YXRpb25gIGlzXG4gKiBgZmFsc2VgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBleHRlbnQgdGhhdCBjb25zdHJhaW5zIHRoZVxuICogdmlldywgaW4gb3RoZXIgd29yZHMsIG5vdGhpbmcgb3V0c2lkZSBvZiB0aGlzIGV4dGVudCBjYW4gYmUgdmlzaWJsZSBvbiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29uc3RyYWluT25seUNlbnRlcj1mYWxzZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIG9ubHkgYXBwbHkgdG8gdGhlIHZpZXcgY2VudGVyIGFuZCBub3QgdGhlIHdob2xlIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Ntb290aEV4dGVudENvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIGV4dGVudFxuICogY29uc3RyYWludCB3aWxsIGJlIGFwcGxpZWQgc21vb3RobHksIGkuZS4gYWxsb3cgdGhlIHZpZXcgdG8gZ28gc2xpZ2h0bHkgb3V0c2lkZVxuICogb2YgdGhlIGdpdmVuIGBleHRlbnRgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1pblJlc29sdXRpb25gIChvclxuICogYG1heFpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiBJZiB1bnNwZWNpZmllZCBpdCBpcyBjYWxjdWxhdGVkIGluIHN1Y2ggYSB3YXlcbiAqIHRoYXQgdGhlIHByb2plY3Rpb24ncyB2YWxpZGl0eSBleHRlbnQgZml0cyBpbiBhIDI1NngyNTYgcHggdGlsZS4gSWYgdGhlXG4gKiBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvciAodGhlIGRlZmF1bHQpIHRoZW4gYG1heFJlc29sdXRpb25gIGRlZmF1bHRzXG4gKiB0byBgNDAwNzUwMTYuNjg1NTc4NDkgLyAyNTYgPSAxNTY1NDMuMDMzOTI4MDQwOTdgLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lXG4gKiB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50LiAgSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhSZXNvbHV0aW9uYCAob3JcbiAqIGBtaW5ab29tYCkgYW5kIGB6b29tRmFjdG9yYC4gIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgYXNzdW1pbmcgMjlcbiAqIHpvb20gbGV2ZWxzICh3aXRoIGEgZmFjdG9yIG9mIDIpLiBJZiB0aGUgcHJvamVjdGlvbiBpcyBTcGhlcmljYWwgTWVyY2F0b3JcbiAqICh0aGUgZGVmYXVsdCkgdGhlbiBgbWluUmVzb2x1dGlvbmAgZGVmYXVsdHMgdG9cbiAqIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiAvIE1hdGgucG93KDIsIDI4KSA9IDAuMDAwNTgzMTY4MjQ1NTgzOTI1M2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb209MjhdIFRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluWm9vbWAgKG9yXG4gKiBgbWF4UmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1pblJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1heFpvb21gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gKiByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWF4Wm9vbWAgKG9yXG4gKiBgbWluUmVzb2x1dGlvbmApIGFuZCBgem9vbUZhY3RvcmAuICBOb3RlIHRoYXQgaWYgYG1heFJlc29sdXRpb25gIGlzIGFsc29cbiAqIHByb3ZpZGVkLCBpdCBpcyBnaXZlbiBwcmVjZWRlbmNlIG92ZXIgYG1pblpvb21gLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbXVsdGlXb3JsZD1mYWxzZV0gSWYgYGZhbHNlYCB0aGUgdmlldyBpcyBjb25zdHJhaW5lZCBzb1xuICogb25seSBvbmUgd29ybGQgaXMgdmlzaWJsZSwgYW5kIHlvdSBjYW5ub3QgcGFuIG9mZiB0aGUgZWRnZS4gIElmIGB0cnVlYCB0aGUgbWFwXG4gKiBtYXkgc2hvdyBtdWx0aXBsZSB3b3JsZHMgYXQgbG93IHpvb20gbGV2ZWxzLiAgT25seSB1c2VkIGlmIHRoZSBgcHJvamVjdGlvbmAgaXNcbiAqIGdsb2JhbC4gIE5vdGUgdGhhdCBpZiBgZXh0ZW50YCBpcyBhbHNvIHByb3ZpZGVkIGl0IGlzIGdpdmVuIHByZWNlZGVuY2UuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGFsd2F5c1xuICogYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uOyBmYWxzZSBtZWFuc1xuICogaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQ9dHJ1ZV0gSWYgdHJ1ZSwgdGhlIHJlc29sdXRpb25cbiAqIG1pbi9tYXggdmFsdWVzIHdpbGwgYmUgYXBwbGllZCBzbW9vdGhseSwgaS4gZS4gYWxsb3cgdGhlIHZpZXcgdG8gZXhjZWVkIHNsaWdodGx5XG4gKiB0aGUgZ2l2ZW4gcmVzb2x1dGlvbiBvciB6b29tIGJvdW5kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Nob3dGdWxsRXh0ZW50PWZhbHNlXSBBbGxvdyB0aGUgdmlldyB0byBiZSB6b29tZWQgb3V0IHRvXG4gKiBzaG93IHRoZSBmdWxsIGNvbmZpZ3VyZWQgZXh0ZW50LiBCeSBkZWZhdWx0LCB3aGVuIGEgdmlldyBpcyBjb25maWd1cmVkIHdpdGggYW5cbiAqIGV4dGVudCwgdXNlcnMgd2lsbCBub3QgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGUgdmlld3BvcnQgZXhjZWVkcyB0aGUgZXh0ZW50IGluXG4gKiBlaXRoZXIgZGltZW5zaW9uLiBUaGlzIG1lYW5zIHRoZSBmdWxsIGV4dGVudCBtYXkgbm90IGJlIHZpc2libGUgaWYgdGhlIHZpZXdwb3J0XG4gKiBpcyB0YWxsZXIgb3Igd2lkZXIgdGhhbiB0aGUgYXNwZWN0IHJhdGlvIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudC4gSWZcbiAqIHNob3dGdWxsRXh0ZW50IGlzIHRydWUsIHRoZSB1c2VyIHdpbGwgYmUgYWJsZSB0byB6b29tIG91dCBzbyB0aGF0IHRoZSB2aWV3cG9ydFxuICogZXhjZWVkcyB0aGUgaGVpZ2h0IG9yIHdpZHRoIG9mIHRoZSBjb25maWd1cmVkIGV4dGVudCwgYnV0IG5vdCBib3RoLCBhbGxvd2luZyB0aGVcbiAqIGZ1bGwgZXh0ZW50IHRvIGJlIHNob3duLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uPSdFUFNHOjM4NTcnXSBUaGVcbiAqIHByb2plY3Rpb24uIFRoZSBkZWZhdWx0IGlzIFNwaGVyaWNhbCBNZXJjYXRvci5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuIFRoZVxuICogdW5pdHMgYXJlIGBwcm9qZWN0aW9uYCB1bml0cyBwZXIgcGl4ZWwgKGUuZy4gbWV0ZXJzIHBlciBwaXhlbCkuIEFuXG4gKiBhbHRlcm5hdGl2ZSB0byBzZXR0aW5nIHRoaXMgaXMgdG8gc2V0IGB6b29tYC4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZVxuICogZmV0Y2hlZCBpZiBuZWl0aGVyIHRoaXMgbm9yIGB6b29tYCBhcmUgZGVmaW5lZCwgYnV0IHRoZXkgY2FuIGJlIHNldCBsYXRlclxuICogd2l0aCB7QGxpbmsgI3NldFpvb219IG9yIHtAbGluayAjc2V0UmVzb2x1dGlvbn0uXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtyZXNvbHV0aW9uc10gUmVzb2x1dGlvbnMgdGhhdCBkZXRlcm1pbmUgdGhlXG4gKiB6b29tIGxldmVscyBpZiBzcGVjaWZpZWQuIFRoZSBpbmRleCBpbiB0aGUgYXJyYXkgY29ycmVzcG9uZHMgdG8gdGhlIHpvb20gbGV2ZWwsXG4gKiB0aGVyZWZvcmUgdGhlIHJlc29sdXRpb24gdmFsdWVzIGhhdmUgdG8gYmUgaW4gZGVzY2VuZGluZyBvcmRlci4gSXQgYWxzbyBjb25zdHJhaW5zXG4gKiB0aGUgcmVzb2x1dGlvbiBieSB0aGUgbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZS4gSWYgc2V0IHRoZSBgbWF4UmVzb2x1dGlvbmAsXG4gKiBgbWluUmVzb2x1dGlvbmAsIGBtaW5ab29tYCwgYG1heFpvb21gLCBhbmQgYHpvb21GYWN0b3JgIG9wdGlvbnMgYXJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uPTBdIFRoZSBpbml0aWFsIHJvdGF0aW9uIGZvciB0aGUgdmlldyBpbiByYWRpYW5zXG4gKiAocG9zaXRpdmUgcm90YXRpb24gY2xvY2t3aXNlLCAwIG1lYW5zIE5vcnRoKS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gT25seSB1c2VkIGlmIGByZXNvbHV0aW9uYCBpcyBub3QgZGVmaW5lZC4gWm9vbVxuICogbGV2ZWwgdXNlZCB0byBjYWxjdWxhdGUgdGhlIGluaXRpYWwgcmVzb2x1dGlvbiBmb3IgdGhlIHZpZXcuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21GYWN0b3I9Ml0gVGhlIHpvb20gZmFjdG9yIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAqIGNvcnJlc3BvbmRpbmcgcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gY3NzIHBpeGVscykuXG4gKiBJZiB0aGUgbWFwIHZpZXdwb3J0IGlzIHBhcnRpYWxseSBjb3ZlcmVkIHdpdGggb3RoZXIgY29udGVudCAob3ZlcmxheXMpIGFsb25nXG4gKiBpdHMgZWRnZXMsIHRoaXMgc2V0dGluZyBhbGxvd3MgdG8gc2hpZnQgdGhlIGNlbnRlciBvZiB0aGUgdmlld3BvcnQgYXdheSBmcm9tXG4gKiB0aGF0IGNvbnRlbnQuIFRoZSBvcmRlciBvZiB0aGUgdmFsdWVzIGlzIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25PcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2ZcbiAqIHRoZSBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21dIFRoZSB6b29tIGxldmVsIG9mIHRoZSB2aWV3IGF0IHRoZSBlbmQgb2YgdGhlXG4gKiBhbmltYXRpb24uIFRoaXMgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGByZXNvbHV0aW9uYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVzb2x1dGlvbl0gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZFxuICogb2YgdGhlIGFuaW1hdGlvbi4gIElmIGB6b29tYCBpcyBhbHNvIHByb3ZpZGVkLCB0aGlzIG9wdGlvbiB3aWxsIGJlIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdGF0aW9uXSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFthbmNob3JdIE9wdGlvbmFsIGFuY2hvciB0byByZW1haW4gZml4ZWRcbiAqIGR1cmluZyBhIHJvdGF0aW9uIG9yIHJlc29sdXRpb24gYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDAwXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBbZWFzaW5nXSBUaGUgZWFzaW5nIGZ1bmN0aW9uIHVzZWRcbiAqIGR1cmluZyB0aGUgYW5pbWF0aW9uIChkZWZhdWx0cyB0byB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZy5pbkFuZE91dH0pLlxuICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIGZyYW1lIHdpdGggYSBudW1iZXIgcmVwcmVzZW50aW5nIGFcbiAqIGZyYWN0aW9uIG9mIHRoZSBhbmltYXRpb24ncyBkdXJhdGlvbi4gIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyXG4gKiBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0b3dhcmQgdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjZW50ZXIgQ2VudGVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW25leHRDZW50ZXJdIFRoZSBuZXh0IGNlbnRlciBkdXJpbmcgYW4gYW5pbWF0aW9uIHNlcmllcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbmV4dFJlc29sdXRpb25dIFRoZSBuZXh0IHJlc29sdXRpb24gZHVyaW5nIGFuIGFuaW1hdGlvbiBzZXJpZXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW25leHRSb3RhdGlvbl0gVGhlIG5leHQgcm90YXRpb24gZHVyaW5nIGFuIGFuaW1hdGlvbiBzZXJpZXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gem9vbSBab29tLlxuICovXG4vKipcbiAqIERlZmF1bHQgbWluIHpvb20gbGV2ZWwgZm9yIHRoZSBtYXAgdmlldy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBERUZBVUxUX01JTl9aT09NID0gMDtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6Y2VudGVyJ3wnY2hhbmdlOnJlc29sdXRpb24nfCdjaGFuZ2U6cm90YXRpb24nfSBWaWV3T2JqZWN0RXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPFZpZXdPYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfFZpZXdPYmplY3RFdmVudFR5cGVzLCBSZXR1cm4+fSBWaWV3T25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIFZpZXcgb2JqZWN0IHJlcHJlc2VudHMgYSBzaW1wbGUgMkQgdmlldyBvZiB0aGUgbWFwLlxuICpcbiAqIFRoaXMgaXMgdGhlIG9iamVjdCB0byBhY3QgdXBvbiB0byBjaGFuZ2UgdGhlIGNlbnRlciwgcmVzb2x1dGlvbixcbiAqIGFuZCByb3RhdGlvbiBvZiB0aGUgbWFwLlxuICpcbiAqIEEgVmlldyBoYXMgYSBgcHJvamVjdGlvbmAuIFRoZSBwcm9qZWN0aW9uIGRldGVybWluZXMgdGhlXG4gKiBjb29yZGluYXRlIHN5c3RlbSBvZiB0aGUgY2VudGVyLCBhbmQgaXRzIHVuaXRzIGRldGVybWluZSB0aGUgdW5pdHMgb2YgdGhlXG4gKiByZXNvbHV0aW9uIChwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbCkuIFRoZSBkZWZhdWx0IHByb2plY3Rpb24gaXNcbiAqIFNwaGVyaWNhbCBNZXJjYXRvciAoRVBTRzozODU3KS5cbiAqXG4gKiAjIyMgVGhlIHZpZXcgc3RhdGVzXG4gKlxuICogQSBWaWV3IGlzIGRldGVybWluZWQgYnkgdGhyZWUgc3RhdGVzOiBgY2VudGVyYCwgYHJlc29sdXRpb25gLFxuICogYW5kIGByb3RhdGlvbmAuIEVhY2ggc3RhdGUgaGFzIGEgY29ycmVzcG9uZGluZyBnZXR0ZXIgYW5kIHNldHRlciwgZS5nLlxuICogYGdldENlbnRlcmAgYW5kIGBzZXRDZW50ZXJgIGZvciB0aGUgYGNlbnRlcmAgc3RhdGUuXG4gKlxuICogVGhlIGB6b29tYCBzdGF0ZSBpcyBhY3R1YWxseSBub3Qgc2F2ZWQgb24gdGhlIHZpZXc6IGFsbCBjb21wdXRhdGlvbnNcbiAqIGludGVybmFsbHkgdXNlIHRoZSBgcmVzb2x1dGlvbmAgc3RhdGUuIFN0aWxsLCB0aGUgYHNldFpvb21gIGFuZCBgZ2V0Wm9vbWBcbiAqIG1ldGhvZHMgYXJlIGF2YWlsYWJsZSwgYXMgd2VsbCBhcyBgZ2V0UmVzb2x1dGlvbkZvclpvb21gIGFuZFxuICogYGdldFpvb21Gb3JSZXNvbHV0aW9uYCB0byBzd2l0Y2ggZnJvbSBvbmUgc3lzdGVtIHRvIHRoZSBvdGhlci5cbiAqXG4gKiAjIyMgVGhlIGNvbnN0cmFpbnRzXG4gKlxuICogYHNldENlbnRlcmAsIGBzZXRSZXNvbHV0aW9uYCBhbmQgYHNldFJvdGF0aW9uYCBjYW4gYmUgdXNlZCB0byBjaGFuZ2UgdGhlXG4gKiBzdGF0ZXMgb2YgdGhlIHZpZXcsIGJ1dCBhbnkgY29uc3RyYWludCBkZWZpbmVkIGluIHRoZSBjb25zdHJ1Y3RvciB3aWxsXG4gKiBiZSBhcHBsaWVkIGFsb25nIHRoZSB3YXkuXG4gKlxuICogQSBWaWV3IG9iamVjdCBjYW4gaGF2ZSBhICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqLCBhICpyb3RhdGlvbiBjb25zdHJhaW50KlxuICogYW5kIGEgKmNlbnRlciBjb25zdHJhaW50Ki5cbiAqXG4gKiBUaGUgKnJlc29sdXRpb24gY29uc3RyYWludCogdHlwaWNhbGx5IHJlc3RyaWN0cyBtaW4vbWF4IHZhbHVlcyBhbmRcbiAqIHNuYXBzIHRvIHNwZWNpZmljIHJlc29sdXRpb25zLiBJdCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBmb2xsb3dpbmdcbiAqIG9wdGlvbnM6IGByZXNvbHV0aW9uc2AsIGBtYXhSZXNvbHV0aW9uYCwgYG1heFpvb21gIGFuZCBgem9vbUZhY3RvcmAuXG4gKiBJZiBgcmVzb2x1dGlvbnNgIGlzIHNldCwgdGhlIG90aGVyIHRocmVlIG9wdGlvbnMgYXJlIGlnbm9yZWQuIFNlZVxuICogZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvcHRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uIEJ5IGRlZmF1bHQsIHRoZSB2aWV3XG4gKiBvbmx5IGhhcyBhIG1pbi9tYXggcmVzdHJpY3Rpb24gYW5kIGFsbG93IGludGVybWVkaWFyeSB6b29tIGxldmVscyB3aGVuXG4gKiBwaW5jaC16b29taW5nIGZvciBleGFtcGxlLlxuICpcbiAqIFRoZSAqcm90YXRpb24gY29uc3RyYWludCogc25hcHMgdG8gc3BlY2lmaWMgYW5nbGVzLiBJdCBpcyBkZXRlcm1pbmVkXG4gKiBieSB0aGUgZm9sbG93aW5nIG9wdGlvbnM6IGBlbmFibGVSb3RhdGlvbmAgYW5kIGBjb25zdHJhaW5Sb3RhdGlvbmAuXG4gKiBCeSBkZWZhdWx0IHJvdGF0aW9uIGlzIGFsbG93ZWQgYW5kIGl0cyB2YWx1ZSBpcyBzbmFwcGVkIHRvIHplcm8gd2hlbiBhcHByb2FjaGluZyB0aGVcbiAqIGhvcml6b250YWwuXG4gKlxuICogVGhlICpjZW50ZXIgY29uc3RyYWludCogaXMgZGV0ZXJtaW5lZCBieSB0aGUgYGV4dGVudGAgb3B0aW9uLiBCeVxuICogZGVmYXVsdCB0aGUgdmlldyBjZW50ZXIgaXMgbm90IGNvbnN0cmFpbmVkIGF0IGFsbC5cbiAqXG4gKiAjIyMgQ2hhbmdpbmcgdGhlIHZpZXcgc3RhdGVcbiAqXG4gKiBJdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IGBzZXRab29tYCwgYHNldFJlc29sdXRpb25gLCBgc2V0Q2VudGVyYCBhbmRcbiAqIGBzZXRSb3RhdGlvbmAgYXJlIHN1YmplY3QgdG8gdGhlIGFib3ZlIG1lbnRpb25lZCBjb25zdHJhaW50cy4gQXMgc3VjaCwgaXRcbiAqIG1heSBzb21ldGltZXMgbm90IGJlIHBvc3NpYmxlIHRvIGtub3cgaW4gYWR2YW5jZSB0aGUgcmVzdWx0aW5nIHN0YXRlIG9mIHRoZVxuICogVmlldy4gRm9yIGV4YW1wbGUsIGNhbGxpbmcgYHNldFJlc29sdXRpb24oMTApYCBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdFxuICogYGdldFJlc29sdXRpb24oKWAgd2lsbCByZXR1cm4gYDEwYC5cbiAqXG4gKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCwgd2hlbiBhcHBseWluZyBhIGRlbHRhIG9uIHRoZSB2aWV3IHN0YXRlLCBvbmVcbiAqIHNob3VsZCB1c2UgYGFkanVzdENlbnRlcmAsIGBhZGp1c3RSb3RhdGlvbmAsIGBhZGp1c3Rab29tYCBhbmQgYGFkanVzdFJlc29sdXRpb25gXG4gKiByYXRoZXIgdGhhbiB0aGUgY29ycmVzcG9uZGluZyBzZXR0ZXJzLiBUaGlzIHdpbGwgbGV0IHZpZXcgZG8gaXRzIGludGVybmFsXG4gKiBjb21wdXRhdGlvbnMuIEJlc2lkZXMsIHRoZSBgYWRqdXN0KmAgbWV0aG9kcyBhbHNvIHRha2UgYW4gYG9wdF9hbmNob3JgXG4gKiBhcmd1bWVudCB3aGljaCBhbGxvd3Mgc3BlY2lmeWluZyBhbiBvcmlnaW4gZm9yIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAqXG4gKiAjIyMgSW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlld1xuICpcbiAqIFZpZXcgY29uc3RyYWludHMgYXJlIHVzdWFsbHkgb25seSBhcHBsaWVkIHdoZW4gdGhlIHZpZXcgaXMgKmF0IHJlc3QqLCBtZWFuaW5nIHRoYXRcbiAqIG5vIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBvbmdvaW5nLiBBcyBzdWNoLCBpZiB0aGUgdXNlciBwdXRzIHRoZSB2aWV3IGluIGFcbiAqIHN0YXRlIHRoYXQgaXMgbm90IGVxdWl2YWxlbnQgdG8gYSBjb25zdHJhaW5lZCBvbmUgKGUuZy4gcm90YXRpbmcgdGhlIHZpZXcgd2hlblxuICogdGhlIHNuYXAgYW5nbGUgaXMgMCksIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZCBhdCB0aGUgaW50ZXJhY3Rpb24gZW5kIHRvXG4gKiBwdXQgYmFjayB0aGUgdmlldyB0byBhIHN0YWJsZSBzdGF0ZTtcbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWaWV3LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IFtvcHRfb3B0aW9uc10gVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZpZXcob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Vmlld09uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Vmlld09uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGludHNfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PEFycmF5PEFuaW1hdGlvbj4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXBkYXRlQW5pbWF0aW9uS2V5XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdwb3J0U2l6ZV8gPSBbMTAwLCAxMDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldENlbnRlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmV4dENlbnRlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5leHRSZXNvbHV0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5uZXh0Um90YXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5leHRlbnQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQob3B0aW9ucy5leHRlbnQsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5hcHBseU9wdGlvbnNfKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB1cCB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5T3B0aW9uc18gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBWaWV3UHJvcGVydHkpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0aWVzKHByb3BlcnRpZXMsIHRydWUpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvID0gY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby5tYXhSZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluUmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWluUmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnpvb21GYWN0b3JfID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLnpvb21GYWN0b3I7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZGRpbmdfID0gb3B0aW9ucy5wYWRkaW5nO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWm9vbV8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWluWm9vbTtcbiAgICAgICAgdmFyIGNlbnRlckNvbnN0cmFpbnQgPSBjcmVhdGVDZW50ZXJDb25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8uY29uc3RyYWludDtcbiAgICAgICAgdmFyIHJvdGF0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludChvcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtDb25zdHJhaW50c31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29uc3RyYWludHNfID0ge1xuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXJDb25zdHJhaW50LFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb25Db25zdHJhaW50LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFJvdGF0aW9uKG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRpb24gOiAwKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChvcHRpb25zLmNlbnRlciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jZW50ZXIgOiBudWxsKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJlc29sdXRpb24ob3B0aW9ucy5yZXNvbHV0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRab29tKG9wdGlvbnMuem9vbSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWaWV3LnByb3RvdHlwZSwgXCJwYWRkaW5nXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBhZGRpbmcgKGluIGNzcyBwaXhlbHMpLlxuICAgICAgICAgKiBJZiB0aGUgbWFwIHZpZXdwb3J0IGlzIHBhcnRpYWxseSBjb3ZlcmVkIHdpdGggb3RoZXIgY29udGVudCAob3ZlcmxheXMpIGFsb25nXG4gICAgICAgICAqIGl0cyBlZGdlcywgdGhpcyBzZXR0aW5nIGFsbG93cyB0byBzaGlmdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydCBhd2F5IGZyb20gdGhhdFxuICAgICAgICAgKiBjb250ZW50LiBUaGUgb3JkZXIgb2YgdGhlIHZhbHVlcyBpbiB0aGUgYXJyYXkgaXMgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LlxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBpcyBubyBwYWRkaW5nLCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIGBbMCwgMCwgMCwgMF1gLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFkZGluZ187XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHBhZGRpbmcpIHtcbiAgICAgICAgICAgIHZhciBvbGRQYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgICAgIHRoaXMucGFkZGluZ18gPSBwYWRkaW5nO1xuICAgICAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCk7XG4gICAgICAgICAgICBpZiAoY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1BhZGRpbmcgPSBwYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgICAgICAgICAgICBvbGRQYWRkaW5nID0gb2xkUGFkZGluZyB8fCBbMCwgMCwgMCwgMF07XG4gICAgICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WCA9IChyZXNvbHV0aW9uIC8gMikgKlxuICAgICAgICAgICAgICAgICAgICAobmV3UGFkZGluZ1szXSAtIG9sZFBhZGRpbmdbM10gKyBvbGRQYWRkaW5nWzFdIC0gbmV3UGFkZGluZ1sxXSk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldFkgPSAocmVzb2x1dGlvbiAvIDIpICpcbiAgICAgICAgICAgICAgICAgICAgKG5ld1BhZGRpbmdbMF0gLSBvbGRQYWRkaW5nWzBdICsgb2xkUGFkZGluZ1syXSAtIG5ld1BhZGRpbmdbMl0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoW2NlbnRlclswXSArIG9mZnNldFgsIGNlbnRlclsxXSAtIG9mZnNldFldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEdldCBhbiB1cGRhdGVkIHZlcnNpb24gb2YgdGhlIHZpZXcgb3B0aW9ucyB1c2VkIHRvIGNvbnN0cnVjdCB0aGUgdmlldy4gIFRoZVxuICAgICAqIGN1cnJlbnQgcmVzb2x1dGlvbiAob3Igem9vbSksIGNlbnRlciwgYW5kIHJvdGF0aW9uIGFyZSBhcHBsaWVkIHRvIGFueSBzdG9yZWRcbiAgICAgKiBvcHRpb25zLiAgVGhlIHByb3ZpZGVkIG9wdGlvbnMgY2FuIGJlIHVzZWQgdG8gYXBwbHkgbmV3IG1pbi9tYXggem9vbSBvclxuICAgICAqIHJlc29sdXRpb24gbGltaXRzLlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG5ld09wdGlvbnMgTmV3IG9wdGlvbnMgdG8gYmUgYXBwbGllZC5cbiAgICAgKiBAcmV0dXJuIHtWaWV3T3B0aW9uc30gTmV3IG9wdGlvbnMgdXBkYXRlZCB3aXRoIHRoZSBjdXJyZW50IHZpZXcgc3RhdGUuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0VXBkYXRlZE9wdGlvbnNfID0gZnVuY3Rpb24gKG5ld09wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLmdldFByb3BlcnRpZXMoKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcmVzb2x1dGlvbiAob3Igem9vbSlcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRpb25zLnJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMuem9vbSA9IHRoaXMuZ2V0Wm9vbSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHByZXNlcnZlIGNlbnRlclxuICAgICAgICBvcHRpb25zLmNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgLy8gcHJlc2VydmUgcm90YXRpb25cbiAgICAgICAgb3B0aW9ucy5yb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgcmV0dXJuIGFzc2lnbih7fSwgb3B0aW9ucywgbmV3T3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbmltYXRlIHRoZSB2aWV3LiAgVGhlIHZpZXcncyBjZW50ZXIsIHpvb20gKG9yIHJlc29sdXRpb24pLCBhbmQgcm90YXRpb25cbiAgICAgKiBjYW4gYmUgYW5pbWF0ZWQgZm9yIHNtb290aCB0cmFuc2l0aW9ucyBiZXR3ZWVuIHZpZXcgc3RhdGVzLiAgRm9yIGV4YW1wbGUsXG4gICAgICogdG8gYW5pbWF0ZSB0aGUgdmlldyB0byBhIG5ldyB6b29tIGxldmVsOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogdmlldy5nZXRab29tKCkgKyAxfSk7XG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCB0aGUgYW5pbWF0aW9uIGxhc3RzIG9uZSBzZWNvbmQgYW5kIHVzZXMgaW4tYW5kLW91dCBlYXNpbmcuICBZb3VcbiAgICAgKiBjYW4gY3VzdG9taXplIHRoaXMgYmVoYXZpb3IgYnkgaW5jbHVkaW5nIGBkdXJhdGlvbmAgKGluIG1pbGxpc2Vjb25kcykgYW5kXG4gICAgICogYGVhc2luZ2Agb3B0aW9ucyAoc2VlIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nfSkuXG4gICAgICpcbiAgICAgKiBUbyBjaGFpbiB0b2dldGhlciBtdWx0aXBsZSBhbmltYXRpb25zLCBjYWxsIHRoZSBtZXRob2Qgd2l0aCBtdWx0aXBsZVxuICAgICAqIGFuaW1hdGlvbiBvYmplY3RzLiAgRm9yIGV4YW1wbGUsIHRvIGZpcnN0IHpvb20gYW5kIHRoZW4gcGFuOlxuICAgICAqXG4gICAgICogICAgIHZpZXcuYW5pbWF0ZSh7em9vbTogMTB9LCB7Y2VudGVyOiBbMCwgMF19KTtcbiAgICAgKlxuICAgICAqIElmIHlvdSBwcm92aWRlIGEgZnVuY3Rpb24gYXMgdGhlIGxhc3QgYXJndW1lbnQgdG8gdGhlIGFuaW1hdGUgbWV0aG9kLCBpdFxuICAgICAqIHdpbGwgZ2V0IGNhbGxlZCBhdCB0aGUgZW5kIG9mIGFuIGFuaW1hdGlvbiBzZXJpZXMuICBUaGUgY2FsbGJhY2sgd2lsbCBiZVxuICAgICAqIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uIHNlcmllcyBjb21wbGV0ZWQgb24gaXRzIG93biBvciBgZmFsc2VgXG4gICAgICogaWYgaXQgd2FzIGNhbmNlbGxlZC5cbiAgICAgKlxuICAgICAqIEFuaW1hdGlvbnMgYXJlIGNhbmNlbGxlZCBieSB1c2VyIGludGVyYWN0aW9ucyAoZS5nLiBkcmFnZ2luZyB0aGUgbWFwKSBvciBieVxuICAgICAqIGNhbGxpbmcgYHZpZXcuc2V0Q2VudGVyKClgLCBgdmlldy5zZXRSZXNvbHV0aW9uKClgLCBvciBgdmlldy5zZXRSb3RhdGlvbigpYFxuICAgICAqIChvciBhbm90aGVyIG1ldGhvZCB0aGF0IGNhbGxzIG9uZSBvZiB0aGVzZSkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uXG4gICAgICogICAgIG9wdGlvbnMuICBNdWx0aXBsZSBhbmltYXRpb25zIGNhbiBiZSBydW4gaW4gc2VyaWVzIGJ5IHBhc3NpbmcgbXVsdGlwbGVcbiAgICAgKiAgICAgb3B0aW9ucyBvYmplY3RzLiAgVG8gcnVuIG11bHRpcGxlIGFuaW1hdGlvbnMgaW4gcGFyYWxsZWwsIGNhbGwgdGhlIG1ldGhvZFxuICAgICAqICAgICBtdWx0aXBsZSB0aW1lcy4gIEFuIG9wdGlvbmFsIGNhbGxiYWNrIGNhbiBiZSBwcm92aWRlZCBhcyBhIGZpbmFsXG4gICAgICogICAgIGFyZ3VtZW50LiAgVGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlclxuICAgICAqICAgICB0aGUgYW5pbWF0aW9uIGNvbXBsZXRlZCB3aXRob3V0IGJlaW5nIGNhbmNlbGxlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZSA9IGZ1bmN0aW9uICh2YXJfYXJncykge1xuICAgICAgICBpZiAodGhpcy5pc0RlZigpICYmICF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2VudGVyID0gZnJvbVVzZXJDb29yZGluYXRlKG9wdGlvbnMuY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFuY2hvciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRpb25zLmFuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXJnc1tpXSA9IG9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gey4uLihBbmltYXRpb25PcHRpb25zfGZ1bmN0aW9uKGJvb2xlYW4pOiB2b2lkKX0gdmFyX2FyZ3MgQW5pbWF0aW9uIG9wdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYW5pbWF0ZUludGVybmFsID0gZnVuY3Rpb24gKHZhcl9hcmdzKSB7XG4gICAgICAgIHZhciBhbmltYXRpb25Db3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBjYWxsYmFjaztcbiAgICAgICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJlxuICAgICAgICAgICAgdHlwZW9mIGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWxsYmFjayA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xuICAgICAgICAgICAgLS1hbmltYXRpb25Db3VudDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGZvciAoOyBpIDwgYW5pbWF0aW9uQ291bnQgJiYgIXRoaXMuaXNEZWYoKTsgKytpKSB7XG4gICAgICAgICAgICAvLyBpZiB2aWV3IHByb3BlcnRpZXMgYXJlIG5vdCB5ZXQgc2V0LCBzaG9ydGN1dCB0byB0aGUgZmluYWwgc3RhdGVcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKHN0YXRlLmNlbnRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuem9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc3RhdGUucmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0UmVzb2x1dGlvbihzdGF0ZS5yZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb3RhdGlvbihzdGF0ZS5yb3RhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IGFuaW1hdGlvbkNvdW50KSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMudGFyZ2V0Q2VudGVyXy5zbGljZSgpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMudGFyZ2V0UmVzb2x1dGlvbl87XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgICAgICB2YXIgc2VyaWVzID0gW107XG4gICAgICAgIGZvciAoOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAvKiogQHR5cGUge0FuaW1hdGlvbk9wdGlvbnN9ICovIChhcmd1bWVudHNbaV0pO1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFuY2hvcjogb3B0aW9ucy5hbmNob3IsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDAwLFxuICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcgfHwgaW5BbmRPdXQsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgPSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldENlbnRlciA9IG9wdGlvbnMuY2VudGVyLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgY2VudGVyID0gYW5pbWF0aW9uLnRhcmdldENlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy56b29tKTtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24gPSBvcHRpb25zLnJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IG1vZHVsbyhvcHRpb25zLnJvdGF0aW9uIC0gcm90YXRpb24gKyBNYXRoLlBJLCAyICogTWF0aC5QSSkgLSBNYXRoLlBJO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiA9IHJvdGF0aW9uICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgcm90YXRpb24gPSBhbmltYXRpb24udGFyZ2V0Um90YXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayBpZiBhbmltYXRpb24gaXMgYSBuby1vcFxuICAgICAgICAgICAgaWYgKGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyB3ZSBzdGlsbCBwdXNoIGl0IG9udG8gdGhlIHNlcmllcyBmb3IgY2FsbGJhY2sgaGFuZGxpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXJ0ICs9IGFuaW1hdGlvbi5kdXJhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllcy5wdXNoKGFuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpb25zXy5wdXNoKHNlcmllcyk7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldEFuaW1hdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10gPiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggdGhlIHZpZXcsIHN1Y2ggYXMgcGFubmluZyBvciB6b29taW5nLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aWV3IGlzIGJlaW5nIGludGVyYWN0ZWQgd2l0aC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0SW50ZXJhY3RpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpbnRzX1tWaWV3SGludC5JTlRFUkFDVElOR10gPiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FuY2VsIGFueSBvbmdvaW5nIGFuaW1hdGlvbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbmNlbEFuaW1hdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIC10aGlzLmhpbnRzX1tWaWV3SGludC5BTklNQVRJTkddKTtcbiAgICAgICAgdmFyIGFuY2hvcjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5hbmltYXRpb25zXy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcbiAgICAgICAgICAgIGlmIChzZXJpZXNbMF0uY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhzZXJpZXNbMF0uY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gc2VyaWVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHNlcmllc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IGFuaW1hdGlvbi5hbmNob3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuY2FuY2VsQW5jaG9yXyA9IGFuY2hvcjtcbiAgICAgICAgdGhpcy5uZXh0Q2VudGVyXyA9IG51bGw7XG4gICAgICAgIHRoaXMubmV4dFJlc29sdXRpb25fID0gTmFOO1xuICAgICAgICB0aGlzLm5leHRSb3RhdGlvbl8gPSBOYU47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYWxsIGFuaW1hdGlvbnMuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUudXBkYXRlQW5pbWF0aW9uc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25LZXlfKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdmFyIG1vcmUgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuYW5pbWF0aW9uc18ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBzZXJpZXMgPSB0aGlzLmFuaW1hdGlvbnNfW2ldO1xuICAgICAgICAgICAgdmFyIHNlcmllc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IHNlcmllcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHNlcmllc1tqXTtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZWxhcHNlZCA9IG5vdyAtIGFuaW1hdGlvbi5zdGFydDtcbiAgICAgICAgICAgICAgICB2YXIgZnJhY3Rpb24gPSBhbmltYXRpb24uZHVyYXRpb24gPiAwID8gZWxhcHNlZCAvIGFuaW1hdGlvbi5kdXJhdGlvbiA6IDE7XG4gICAgICAgICAgICAgICAgaWYgKGZyYWN0aW9uID49IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZnJhY3Rpb24gPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VyaWVzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gYW5pbWF0aW9uLmVhc2luZyhmcmFjdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclsxXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2VudGVyXyA9IGFuaW1hdGlvbi50YXJnZXRDZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0geDAgKyBwcm9ncmVzcyAqICh4MSAtIHgwKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSB5MCArIHByb2dyZXNzICogKHkxIC0geTApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBbeCwgeV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAmJiBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHByb2dyZXNzID09PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmNob3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbihyZXNvbHV0aW9uLCAwLCBzaXplLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyWm9vbShjb25zdHJhaW5lZFJlc29sdXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFJlc29sdXRpb25fID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5QSVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBhbmltYXRpb24uc291cmNlUm90YXRpb24gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyZXNzICpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAtIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uc3RyYWluZWRSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHJvdGF0aW9uLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKGNvbnN0cmFpbmVkUm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFJvdGF0aW9uXyA9IGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRSb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXyh0cnVlKTtcbiAgICAgICAgICAgICAgICBtb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2VyaWVzQ29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNfW2ldID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuQU5JTUFUSU5HLCAtMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0Q2VudGVyXyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0UmVzb2x1dGlvbl8gPSBOYU47XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0Um90YXRpb25fID0gTmFOO1xuICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHNlcmllc1swXS5jYWxsYmFjaztcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uQ2FsbGJhY2soY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwcnVuZSBjb21wbGV0ZWQgc2VyaWVzXG4gICAgICAgIHRoaXMuYW5pbWF0aW9uc18gPSB0aGlzLmFuaW1hdGlvbnNfLmZpbHRlcihCb29sZWFuKTtcbiAgICAgICAgaWYgKG1vcmUgJiYgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gVGFyZ2V0IHJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBSb3RhdGlvbiBhbmNob3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIgZm9yIHJvdGF0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyUm90YXRlID0gZnVuY3Rpb24gKHJvdGF0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIGlmIChjdXJyZW50Q2VudGVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNlbnRlciA9IFtjdXJyZW50Q2VudGVyWzBdIC0gYW5jaG9yWzBdLCBjdXJyZW50Q2VudGVyWzFdIC0gYW5jaG9yWzFdXTtcbiAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoY2VudGVyLCByb3RhdGlvbiAtIHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICBhZGRDb29yZGluYXRlKGNlbnRlciwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFpvb20gYW5jaG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyIGZvciByZXNvbHV0aW9uIGFuZCBhbmNob3IuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyWm9vbSA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBhbmNob3IpIHtcbiAgICAgICAgdmFyIGNlbnRlcjtcbiAgICAgICAgdmFyIGN1cnJlbnRDZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIHZhciBjdXJyZW50UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciB4ID0gYW5jaG9yWzBdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMF0gLSBjdXJyZW50Q2VudGVyWzBdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB5ID0gYW5jaG9yWzFdIC1cbiAgICAgICAgICAgICAgICAocmVzb2x1dGlvbiAqIChhbmNob3JbMV0gLSBjdXJyZW50Q2VudGVyWzFdKSkgLyBjdXJyZW50UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNlbnRlciA9IFt4LCB5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2VudGVyO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCB2aWV3cG9ydCBzaXplLlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcm90YXRpb25dIFRha2UgaW50byBhY2NvdW50IHRoZSByb3RhdGlvbiBvZiB0aGUgdmlld3BvcnQgd2hlbiBnaXZpbmcgdGhlIHNpemVcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gVmlld3BvcnQgc2l6ZSBvciBgWzEwMCwgMTAwXWAgd2hlbiBubyB2aWV3cG9ydCBpcyBmb3VuZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRWaWV3cG9ydFNpemVfID0gZnVuY3Rpb24gKG9wdF9yb3RhdGlvbikge1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMudmlld3BvcnRTaXplXztcbiAgICAgICAgaWYgKG9wdF9yb3RhdGlvbikge1xuICAgICAgICAgICAgdmFyIHcgPSBzaXplWzBdO1xuICAgICAgICAgICAgdmFyIGggPSBzaXplWzFdO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICBNYXRoLmFicyh3ICogTWF0aC5jb3Mob3B0X3JvdGF0aW9uKSkgK1xuICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhoICogTWF0aC5zaW4ob3B0X3JvdGF0aW9uKSksXG4gICAgICAgICAgICAgICAgTWF0aC5hYnModyAqIE1hdGguc2luKG9wdF9yb3RhdGlvbikpICtcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoaCAqIE1hdGguY29zKG9wdF9yb3RhdGlvbikpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzaXplO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdG9yZXMgdGhlIHZpZXdwb3J0IHNpemUgb24gdGhlIHZpZXcuIFRoZSB2aWV3cG9ydCBzaXplIGlzIG5vdCByZWFkIGV2ZXJ5IHRpbWUgZnJvbSB0aGUgRE9NXG4gICAgICogdG8gYXZvaWQgcGVyZm9ybWFuY2UgaGl0IGFuZCBsYXlvdXQgcmVmbG93LlxuICAgICAqIFRoaXMgc2hvdWxkIGJlIGRvbmUgb24gbWFwIHNpemUgY2hhbmdlLlxuICAgICAqIE5vdGU6IHRoZSBjb25zdHJhaW50cyBhcmUgbm90IHJlc29sdmVkIGR1cmluZyBhbiBhbmltYXRpb24gdG8gYXZvaWQgc3RvcHBpbmcgaXRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3NpemVdIFZpZXdwb3J0IHNpemU7IGlmIHVuZGVmaW5lZCwgWzEwMCwgMTAwXSBpcyBhc3N1bWVkXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0Vmlld3BvcnRTaXplID0gZnVuY3Rpb24gKG9wdF9zaXplKSB7XG4gICAgICAgIHRoaXMudmlld3BvcnRTaXplXyA9IEFycmF5LmlzQXJyYXkob3B0X3NpemUpXG4gICAgICAgICAgICA/IG9wdF9zaXplLnNsaWNlKClcbiAgICAgICAgICAgIDogWzEwMCwgMTAwXTtcbiAgICAgICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGNlbnRlci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q2VudGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICBpZiAoIWNlbnRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNlbnRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9Vc2VyQ29vcmRpbmF0ZShjZW50ZXIsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBjZW50ZXIgd2l0aG91dCB0cmFuc2Zvcm1pbmcgdG8gdXNlciBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LkNFTlRFUikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Q29uc3RyYWludHN9IENvbnN0cmFpbnRzLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSZXNvbHV0aW9uIGNvbnN0cmFpbnQgaXMgc2V0XG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KCdjb25zdHJhaW5SZXNvbHV0aW9uJyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfaGludHNdIERlc3RpbmF0aW9uIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEhpbnQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0SGludHMgPSBmdW5jdGlvbiAob3B0X2hpbnRzKSB7XG4gICAgICAgIGlmIChvcHRfaGludHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0X2hpbnRzWzBdID0gdGhpcy5oaW50c19bMF07XG4gICAgICAgICAgICBvcHRfaGludHNbMV0gPSB0aGlzLmhpbnRzX1sxXTtcbiAgICAgICAgICAgIHJldHVybiBvcHRfaGludHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaW50c18uc2xpY2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBleHRlbnQgZm9yIHRoZSBjdXJyZW50IHZpZXcgc3RhdGUgYW5kIHRoZSBwYXNzZWQgc2l6ZS5cbiAgICAgKiBUaGUgc2l6ZSBpcyB0aGUgcGl4ZWwgZGltZW5zaW9ucyBvZiB0aGUgYm94IGludG8gd2hpY2ggdGhlIGNhbGN1bGF0ZWQgZXh0ZW50XG4gICAgICogc2hvdWxkIGZpdC4gSW4gbW9zdCBjYXNlcyB5b3Ugd2FudCB0byBnZXQgdGhlIGV4dGVudCBvZiB0aGUgZW50aXJlIG1hcCxcbiAgICAgKiB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3NpemVdIEJveCBwaXhlbCBzaXplLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBzaXplXG4gICAgICogb2YgdGhlIG1hcCB0aGF0IHVzZXMgdGhpcyB2aWV3IHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlRXh0ZW50ID0gZnVuY3Rpb24gKG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBleHRlbnQgPSB0aGlzLmNhbGN1bGF0ZUV4dGVudEludGVybmFsKG9wdF9zaXplKTtcbiAgICAgICAgcmV0dXJuIHRvVXNlckV4dGVudChleHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCxcbiAgICAgKiB0aGUgbWFwJ3MgbGFzdCBrbm93biB2aWV3cG9ydCBzaXplIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVFeHRlbnRJbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB2YXIgc2l6ZSA9IG9wdF9zaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICB2YXIgY2VudGVyID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovICh0aGlzLmdldENlbnRlckludGVybmFsKCkpO1xuICAgICAgICBhc3NlcnQoY2VudGVyLCAxKTsgLy8gVGhlIHZpZXcgY2VudGVyIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHshbnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICBhc3NlcnQocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkLCAyKTsgLy8gVGhlIHZpZXcgcmVzb2x1dGlvbiBpcyBub3QgZGVmaW5lZFxuICAgICAgICB2YXIgcm90YXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICBhc3NlcnQocm90YXRpb24gIT09IHVuZGVmaW5lZCwgMyk7IC8vIFRoZSB2aWV3IHJvdGF0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHJldHVybiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWF4Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1pblJlc29sdXRpb25fKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSBuZXcgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBUaGUgbWF4aW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHsgbWF4Wm9vbTogem9vbSB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNaW5ab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG5ldyBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldE1pblpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBtaW5ab29tOiB6b29tIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSB2aWV3IHNob3VsZCBhbGxvdyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIFdoZXRoZXIgdGhlIHJlc29sdXRpb24gaXMgY29uc3RyYWluZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldENvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBjb25zdHJhaW5SZXNvbHV0aW9uOiBlbmFibGVkIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFRoZSBwcm9qZWN0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9ucyBmb3IgdGhlIHZpZXcuIFRoaXMgcmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzb2x1dGlvbnNcbiAgICAgKiBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBWaWV3LCBvciB1bmRlZmluZWQgaWYgbm9uZSB3ZXJlIGdpdmVuLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBUaGUgcmVzb2x1dGlvbnMgb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgcHJvdmlkZWQgZXh0ZW50IHdpbGwgcmVuZGVyIGF0XG4gICAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCwgb3B0X3NpemUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKGZyb21Vc2VyRXh0ZW50KGV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpLCBvcHRfc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgcHJvdmlkZWQgZXh0ZW50IHdpbGwgcmVuZGVyIGF0XG4gICAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbCA9IGZ1bmN0aW9uIChleHRlbnQsIG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKGV4dGVudCkgLyBzaXplWzBdO1xuICAgICAgICB2YXIgeVJlc29sdXRpb24gPSBnZXRIZWlnaHQoZXh0ZW50KSAvIHNpemVbMV07XG4gICAgICAgIHJldHVybiBNYXRoLm1heCh4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAgICogcmVzb2x1dGlvbi4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Bvd2VyXSBQb3dlci5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIpOiBudW1iZXJ9IFJlc29sdXRpb24gZm9yIHZhbHVlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uID0gZnVuY3Rpb24gKG9wdF9wb3dlcikge1xuICAgICAgICB2YXIgcG93ZXIgPSBvcHRfcG93ZXIgfHwgMjtcbiAgICAgICAgdmFyIG1heFJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgICAgICB2YXIgbWF4ID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHBvd2VyLCB2YWx1ZSAqIG1heCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgcm90YXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgaW4gcmFkaWFucy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSb3RhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSByZXNvbHV0aW9uIGZvciBhIHZhbHVlIGJldHdlZW5cbiAgICAgKiAwIGFuZCAxLiBFeHBvbmVudGlhbCBzY2FsaW5nIGlzIGFzc3VtZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcG93ZXJdIFBvd2VyLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gVmFsdWUgZm9yIHJlc29sdXRpb24gZnVuY3Rpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24gPSBmdW5jdGlvbiAob3B0X3Bvd2VyKSB7XG4gICAgICAgIHZhciBsb2dQb3dlciA9IE1hdGgubG9nKG9wdF9wb3dlciB8fCAyKTtcbiAgICAgICAgdmFyIG1heFJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgICAgICB2YXIgbWF4ID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gbG9nUG93ZXI7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyByZXNvbHV0aW9uKSAvIGxvZ1Bvd2VyIC8gbWF4O1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIHZpZXdwb3J0IG1pbnVzIHBhZGRpbmcuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yb3RhdGlvbl0gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIHJlZHVjZWQgYnkgdGhlIHBhZGRpbmcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyA9IGZ1bmN0aW9uIChvcHRfcm90YXRpb24pIHtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8ob3B0X3JvdGF0aW9uKTtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICBpZiAocGFkZGluZykge1xuICAgICAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICAgICAgICBzaXplWzBdIC0gcGFkZGluZ1sxXSAtIHBhZGRpbmdbM10sXG4gICAgICAgICAgICAgICAgc2l6ZVsxXSAtIHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1N0YXRlfSBWaWV3IHN0YXRlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAodGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpKTtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICBpZiAocGFkZGluZykge1xuICAgICAgICAgICAgdmFyIHJlZHVjZWRTaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgICAgICBjZW50ZXIgPSBjYWxjdWxhdGVDZW50ZXJPbihjZW50ZXIsIHRoaXMuZ2V0Vmlld3BvcnRTaXplXygpLCBbcmVkdWNlZFNpemVbMF0gLyAyICsgcGFkZGluZ1szXSwgcmVkdWNlZFNpemVbMV0gLyAyICsgcGFkZGluZ1swXV0sIHJlc29sdXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXIuc2xpY2UoMCksXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBwcm9qZWN0aW9uIDogbnVsbCxcbiAgICAgICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgICAgICBuZXh0Q2VudGVyOiB0aGlzLm5leHRDZW50ZXJfLFxuICAgICAgICAgICAgbmV4dFJlc29sdXRpb246IHRoaXMubmV4dFJlc29sdXRpb25fLFxuICAgICAgICAgICAgbmV4dFJvdGF0aW9uOiB0aGlzLm5leHRSb3RhdGlvbl8sXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb24sXG4gICAgICAgICAgICB6b29tOiB0aGlzLmdldFpvb20oKSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCB6b29tIGxldmVsLiBUaGlzIG1ldGhvZCBtYXkgcmV0dXJuIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzXG4gICAgICogaWYgdGhlIHZpZXcgZG9lcyBub3QgY29uc3RyYWluIHRoZSByZXNvbHV0aW9uLCBvciBpZiBhbiBpbnRlcmFjdGlvbiBvclxuICAgICAqIGFuaW1hdGlvbiBpcyB1bmRlcndheS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBab29tLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgem9vbTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgem9vbSA9IHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHpvb20gbGV2ZWwgZm9yIGEgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBUaGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgem9vbSBsZXZlbCBmb3IgdGhlIHByb3ZpZGVkIHJlc29sdXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFpvb21Gb3JSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMubWluWm9vbV8gfHwgMDtcbiAgICAgICAgdmFyIG1heCwgem9vbUZhY3RvcjtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfKSB7XG4gICAgICAgICAgICB2YXIgbmVhcmVzdCA9IGxpbmVhckZpbmROZWFyZXN0KHRoaXMucmVzb2x1dGlvbnNfLCByZXNvbHV0aW9uLCAxKTtcbiAgICAgICAgICAgIG9mZnNldCA9IG5lYXJlc3Q7XG4gICAgICAgICAgICBtYXggPSB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0XTtcbiAgICAgICAgICAgIGlmIChuZWFyZXN0ID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSBtYXggLyB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0ICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXggPSB0aGlzLm1heFJlc29sdXRpb25fO1xuICAgICAgICAgICAgem9vbUZhY3RvciA9IHRoaXMuem9vbUZhY3Rvcl87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldCArIE1hdGgubG9nKG1heCAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3Rvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHZpZXcgcmVzb2x1dGlvbiBmb3IgdGhlIHByb3ZpZGVkIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3Jab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiYXNlTGV2ZWwgPSBjbGFtcChNYXRoLmZsb29yKHpvb20pLCAwLCB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAyKTtcbiAgICAgICAgICAgIHZhciB6b29tRmFjdG9yID0gdGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsXSAvIHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbCArIDFdO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWxdIC9cbiAgICAgICAgICAgICAgICBNYXRoLnBvdyh6b29tRmFjdG9yLCBjbGFtcCh6b29tIC0gYmFzZUxldmVsLCAwLCAxKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLm1heFJlc29sdXRpb25fIC8gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgem9vbSAtIHRoaXMubWluWm9vbV8pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRml0IHRoZSBnaXZlbiBnZW9tZXRyeSBvciBleHRlbnQgYmFzZWQgb24gdGhlIGdpdmVuIG1hcCBzaXplIGFuZCBib3JkZXIuXG4gICAgICogVGhlIHNpemUgaXMgcGl4ZWwgZGltZW5zaW9ucyBvZiB0aGUgYm94IHRvIGZpdCB0aGUgZXh0ZW50IGludG8uXG4gICAgICogSW4gbW9zdCBjYXNlcyB5b3Ugd2lsbCB3YW50IHRvIHVzZSB0aGUgbWFwIHNpemUsIHRoYXQgaXMgYG1hcC5nZXRTaXplKClgLlxuICAgICAqIFRha2VzIGNhcmUgb2YgdGhlIG1hcCBhbmdsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZ2VvbWV0cnlPckV4dGVudCBUaGUgZ2VvbWV0cnkgb3JcbiAgICAgKiAgICAgZXh0ZW50IHRvIGZpdCB0aGUgdmlldyB0by5cbiAgICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZml0ID0gZnVuY3Rpb24gKGdlb21ldHJ5T3JFeHRlbnQsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovXG4gICAgICAgIHZhciBnZW9tZXRyeTtcbiAgICAgICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlPckV4dGVudCkgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8oZ2VvbWV0cnlPckV4dGVudCkuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KSA9PT1cbiAgICAgICAgICAgICAgICAnZnVuY3Rpb24nLCAyNCk7IC8vIEludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlPckV4dGVudCkpIHtcbiAgICAgICAgICAgIGFzc2VydCghaXNFbXB0eShnZW9tZXRyeU9yRXh0ZW50KSwgMjUpOyAvLyBDYW5ub3QgZml0IGVtcHR5IGV4dGVudCBwcm92aWRlZCBhcyBgZ2VvbWV0cnlgXG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQoZ2VvbWV0cnlPckV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdlb21ldHJ5T3JFeHRlbnQuZ2V0VHlwZSgpID09PSBHZW9tZXRyeVR5cGUuQ0lSQ0xFKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQoZ2VvbWV0cnlPckV4dGVudC5nZXRFeHRlbnQoKSwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpO1xuICAgICAgICAgICAgZ2VvbWV0cnkucm90YXRlKHRoaXMuZ2V0Um90YXRpb24oKSwgZ2V0Q2VudGVyKGV4dGVudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHVzZXJQcm9qZWN0aW9uID0gZ2V0VXNlclByb2plY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICh1c2VyUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5T3JFeHRlbnRcbiAgICAgICAgICAgICAgICAgICAgLmNsb25lKClcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zZm9ybSh1c2VyUHJvamVjdGlvbiwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnlPckV4dGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpdEludGVybmFsKGdlb21ldHJ5LCBvcHRfb3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgcm90YXRlZCBleHRlbnRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnRcIikuRXh0ZW50fSBUaGUgcm90YXRlZCBleHRlbnQgZm9yIHRoZSBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gICAgICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gICAgICAgIHZhciBjb29yZHMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICB2YXIgbWluUm90WCA9ICtJbmZpbml0eTtcbiAgICAgICAgdmFyIG1pblJvdFkgPSArSW5maW5pdHk7XG4gICAgICAgIHZhciBtYXhSb3RYID0gLUluZmluaXR5O1xuICAgICAgICB2YXIgbWF4Um90WSA9IC1JbmZpbml0eTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmFyIHJvdFggPSBjb29yZHNbaV0gKiBjb3NBbmdsZSAtIGNvb3Jkc1tpICsgMV0gKiBzaW5BbmdsZTtcbiAgICAgICAgICAgIHZhciByb3RZID0gY29vcmRzW2ldICogc2luQW5nbGUgKyBjb29yZHNbaSArIDFdICogY29zQW5nbGU7XG4gICAgICAgICAgICBtaW5Sb3RYID0gTWF0aC5taW4obWluUm90WCwgcm90WCk7XG4gICAgICAgICAgICBtaW5Sb3RZID0gTWF0aC5taW4obWluUm90WSwgcm90WSk7XG4gICAgICAgICAgICBtYXhSb3RYID0gTWF0aC5tYXgobWF4Um90WCwgcm90WCk7XG4gICAgICAgICAgICBtYXhSb3RZID0gTWF0aC5tYXgobWF4Um90WSwgcm90WSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFttaW5Sb3RYLCBtaW5Sb3RZLCBtYXhSb3RYLCBtYXhSb3RZXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IFRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5maXRJbnRlcm5hbCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRpb25zLnNpemU7XG4gICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBhZGRpbmcgOiBbMCwgMCwgMCwgMF07XG4gICAgICAgIHZhciBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb247XG4gICAgICAgIGlmIChvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy5tYXhab29tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3RhdGVkRXh0ZW50ID0gdGhpcy5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgICAgICAvLyBjYWxjdWxhdGUgcmVzb2x1dGlvblxuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKHJvdGF0ZWRFeHRlbnQsIFtcbiAgICAgICAgICAgIHNpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSxcbiAgICAgICAgICAgIHNpemVbMV0gLSBwYWRkaW5nWzBdIC0gcGFkZGluZ1syXSxcbiAgICAgICAgXSk7XG4gICAgICAgIHJlc29sdXRpb24gPSBpc05hTihyZXNvbHV0aW9uKVxuICAgICAgICAgICAgPyBtaW5SZXNvbHV0aW9uXG4gICAgICAgICAgICA6IE1hdGgubWF4KHJlc29sdXRpb24sIG1pblJlc29sdXRpb24pO1xuICAgICAgICByZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgbmVhcmVzdCA/IDAgOiAxKTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIGNlbnRlclxuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICAgICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgICAgICB2YXIgY2VudGVyUm90ID0gZ2V0Q2VudGVyKHJvdGF0ZWRFeHRlbnQpO1xuICAgICAgICBjZW50ZXJSb3RbMF0gKz0gKChwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSkgLyAyKSAqIHJlc29sdXRpb247XG4gICAgICAgIGNlbnRlclJvdFsxXSArPSAoKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIGNlbnRlclggPSBjZW50ZXJSb3RbMF0gKiBjb3NBbmdsZSAtIGNlbnRlclJvdFsxXSAqIHNpbkFuZ2xlO1xuICAgICAgICB2YXIgY2VudGVyWSA9IGNlbnRlclJvdFsxXSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WzBdICogc2luQW5nbGU7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENvbnN0cmFpbmVkQ2VudGVyKFtjZW50ZXJYLCBjZW50ZXJZXSwgcmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sgPyBvcHRpb25zLmNhbGxiYWNrIDogVk9JRDtcbiAgICAgICAgaWYgKG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyxcbiAgICAgICAgICAgIH0sIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gY2VudGVyO1xuICAgICAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXyhmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENlbnRlciBvbiBjb29yZGluYXRlIGFuZCB2aWV3IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jZW50ZXJPbiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbikge1xuICAgICAgICB0aGlzLmNlbnRlck9uSW50ZXJuYWwoZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHRoaXMuZ2V0UHJvamVjdGlvbigpKSwgc2l6ZSwgcG9zaXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwb3NpdGlvbiBQb3NpdGlvbiBvbiB0aGUgdmlldyB0byBjZW50ZXIgb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2VudGVyT25JbnRlcm5hbCA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbikge1xuICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKGNhbGN1bGF0ZUNlbnRlck9uKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uLCB0aGlzLmdldFJlc29sdXRpb24oKSwgdGhpcy5nZXRSb3RhdGlvbigpKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBzaGlmdCBiZXR3ZWVuIG1hcCBhbmQgdmlld3BvcnQgY2VudGVyLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBDZW50ZXIgc2hpZnQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyU2hpZnQgPSBmdW5jdGlvbiAoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSkge1xuICAgICAgICB2YXIgY2VudGVyU2hpZnQ7XG4gICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgaWYgKHBhZGRpbmcgJiYgY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgcmVkdWNlZFNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oLXJvdGF0aW9uKTtcbiAgICAgICAgICAgIHZhciBzaGlmdGVkQ2VudGVyID0gY2FsY3VsYXRlQ2VudGVyT24oY2VudGVyLCBzaXplLCBbcmVkdWNlZFNpemVbMF0gLyAyICsgcGFkZGluZ1szXSwgcmVkdWNlZFNpemVbMV0gLyAyICsgcGFkZGluZ1swXV0sIHJlc29sdXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgICAgIGNlbnRlclNoaWZ0ID0gW1xuICAgICAgICAgICAgICAgIGNlbnRlclswXSAtIHNoaWZ0ZWRDZW50ZXJbMF0sXG4gICAgICAgICAgICAgICAgY2VudGVyWzFdIC0gc2hpZnRlZENlbnRlclsxXSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNlbnRlclNoaWZ0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZGVmaW5lZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5pc0RlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpICYmIHRoaXMuZ2V0UmVzb2x1dGlvbigpICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXIgPSBmdW5jdGlvbiAoZGVsdGFDb29yZGluYXRlcykge1xuICAgICAgICB2YXIgY2VudGVyID0gdG9Vc2VyQ29vcmRpbmF0ZSh0aGlzLnRhcmdldENlbnRlcl8sIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyByZWxhdGl2ZSBjb29yZGluYXRlcyB0byB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YUNvb3JkaW5hdGVzIFJlbGF0aXZlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIChkZWx0YUNvb3JkaW5hdGVzKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLnRhcmdldENlbnRlcl87XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyYXRpbywgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvciAmJiBmcm9tVXNlckNvb3JkaW5hdGUob3B0X2FuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICB0aGlzLmFkanVzdFJlc29sdXRpb25JbnRlcm5hbChyYXRpbywgYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoZSB2aWV3IHJlc29sdXRpb24gYnkgYSByYXRpbywgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyBUaGUgcmF0aW8gdG8gYXBwbHkgb24gdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsID0gZnVuY3Rpb24gKHJhdGlvLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBpc01vdmluZyA9IHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXyAqIHJhdGlvLCAwLCBzaXplLCBpc01vdmluZyk7XG4gICAgICAgIGlmIChvcHRfYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20obmV3UmVzb2x1dGlvbiwgb3B0X2FuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyAqPSByYXRpbztcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHZhbHVlIHRvIHRoZSB2aWV3IHpvb20gbGV2ZWwsIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcmVzb2x1dGlvblxuICAgICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Wm9vbSA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICB0aGlzLmFkanVzdFJlc29sdXRpb24oTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgLWRlbHRhKSwgb3B0X2FuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgdmFsdWUgdG8gdGhlIHZpZXcgcm90YXRpb24sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcm90YXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSByb3RhdGlvbiwgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Um90YXRpb24gPSBmdW5jdGlvbiAoZGVsdGEsIG9wdF9hbmNob3IpIHtcbiAgICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgICAgIG9wdF9hbmNob3IgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0X2FuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRqdXN0Um90YXRpb25JbnRlcm5hbChkZWx0YSwgb3B0X2FuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIHJvdGF0aW9uLCBpbiByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFJvdGF0aW9uSW50ZXJuYWwgPSBmdW5jdGlvbiAoZGVsdGEsIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGlzTW92aW5nID0gdGhpcy5nZXRBbmltYXRpbmcoKSB8fCB0aGlzLmdldEludGVyYWN0aW5nKCk7XG4gICAgICAgIHZhciBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHRoaXMudGFyZ2V0Um90YXRpb25fICsgZGVsdGEsIGlzTW92aW5nKTtcbiAgICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKG5ld1JvdGF0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyArPSBkZWx0YTtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjZW50ZXIgb2YgdGhlIGN1cnJlbnQgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldENlbnRlciA9IGZ1bmN0aW9uIChjZW50ZXIpIHtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChmcm9tVXNlckNvb3JkaW5hdGUoY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjZW50ZXIgdXNpbmcgdGhlIHZpZXcgcHJvamVjdGlvbiAobm90IHRoZSB1c2VyIHByb2plY3Rpb24pLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIChjZW50ZXIpIHtcbiAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gY2VudGVyO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVmlld0hpbnQuanNcIikuZGVmYXVsdH0gaGludCBIaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyB2YWx1ZS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRIaW50ID0gZnVuY3Rpb24gKGhpbnQsIGRlbHRhKSB7XG4gICAgICAgIHRoaXMuaGludHNfW2hpbnRdICs9IGRlbHRhO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW2hpbnRdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGlzIHZpZXcuIEFueSByZXNvbHV0aW9uIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJvdGF0aW9uIGZvciB0aGlzIHZpZXcuIEFueSByb3RhdGlvbiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBpbiByYWRpYW5zLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24gKHJvdGF0aW9uKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gcm90YXRpb247XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFpvb20gdG8gYSBzcGVjaWZpYyB6b29tIGxldmVsLiBBbnkgcmVzb2x1dGlvbiBjb25zdHJhaW4gd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgdGhpcy5zZXRSZXNvbHV0aW9uKHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oem9vbSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVjb21wdXRlIHJvdGF0aW9uL3Jlc29sdXRpb24vY2VudGVyIGJhc2VkIG9uIHRhcmdldCB2YWx1ZXMuXG4gICAgICogTm90ZTogd2UgaGF2ZSB0byBjb21wdXRlIHJvdGF0aW9uIGZpcnN0LCB0aGVuIHJlc29sdXRpb24gYW5kIGNlbnRlciBjb25zaWRlcmluZyB0aGF0XG4gICAgICogcGFyYW1ldGVycyBjYW4gaW5mbHVlbmNlIG9uZSBhbm90aGVyIGluIGNhc2UgYSB2aWV3IGV4dGVudCBjb25zdHJhaW50IGlzIHByZXNlbnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2RvTm90Q2FuY2VsQW5pbXNdIERvIG5vdCBjYW5jZWwgYW5pbWF0aW9ucy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfZm9yY2VNb3ZpbmddIEFwcGx5IGNvbnN0cmFpbnRzIGFzIGlmIHRoZSB2aWV3IGlzIG1vdmluZy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5VGFyZ2V0U3RhdGVfID0gZnVuY3Rpb24gKG9wdF9kb05vdENhbmNlbEFuaW1zLCBvcHRfZm9yY2VNb3ZpbmcpIHtcbiAgICAgICAgdmFyIGlzTW92aW5nID0gdGhpcy5nZXRBbmltYXRpbmcoKSB8fCB0aGlzLmdldEludGVyYWN0aW5nKCkgfHwgb3B0X2ZvcmNlTW92aW5nO1xuICAgICAgICAvLyBjb21wdXRlIHJvdGF0aW9uXG4gICAgICAgIHZhciBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHRoaXMudGFyZ2V0Um90YXRpb25fLCBpc01vdmluZyk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sIDAsIHNpemUsIGlzTW92aW5nKTtcbiAgICAgICAgdmFyIG5ld0NlbnRlciA9IHRoaXMuY29uc3RyYWludHNfLmNlbnRlcih0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIHNpemUsIGlzTW92aW5nLCB0aGlzLmNhbGN1bGF0ZUNlbnRlclNoaWZ0KHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgbmV3Um90YXRpb24sIHNpemUpKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikgIT09IG5ld1JvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUk9UQVRJT04sIG5ld1JvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pICE9PSBuZXdSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgbmV3UmVzb2x1dGlvbik7XG4gICAgICAgICAgICB0aGlzLnNldCgnem9vbScsIHRoaXMuZ2V0Wm9vbSgpLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5ld0NlbnRlciB8fFxuICAgICAgICAgICAgIXRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpIHx8XG4gICAgICAgICAgICAhZXF1YWxzKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpLCBuZXdDZW50ZXIpKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuQ0VOVEVSLCBuZXdDZW50ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmdldEFuaW1hdGluZygpICYmICFvcHRfZG9Ob3RDYW5jZWxBbmltcykge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSWYgYW55IGNvbnN0cmFpbnRzIG5lZWQgdG8gYmUgYXBwbGllZCwgYW4gYW5pbWF0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgICAqIFRoaXMgaXMgdHlwaWNhbGx5IGRvbmUgb24gaW50ZXJhY3Rpb24gZW5kLlxuICAgICAqIE5vdGU6IGNhbGxpbmcgdGhpcyB3aXRoIGEgZHVyYXRpb24gb2YgMCB3aWxsIGFwcGx5IHRoZSBjb25zdHJhaW5lZCB2YWx1ZXMgc3RyYWlnaHQgYXdheSxcbiAgICAgKiB3aXRob3V0IGFuaW1hdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gVGhlIGFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUucmVzb2x2ZUNvbnN0cmFpbnRzID0gZnVuY3Rpb24gKG9wdF9kdXJhdGlvbiwgb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24sIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGR1cmF0aW9uID0gb3B0X2R1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZHVyYXRpb24gOiAyMDA7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiB8fCAwO1xuICAgICAgICB2YXIgbmV3Um90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbih0aGlzLnRhcmdldFJvdGF0aW9uXyk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sIGRpcmVjdGlvbiwgc2l6ZSk7XG4gICAgICAgIHZhciBuZXdDZW50ZXIgPSB0aGlzLmNvbnN0cmFpbnRzXy5jZW50ZXIodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBzaXplLCBmYWxzZSwgdGhpcy5jYWxjdWxhdGVDZW50ZXJTaGlmdCh0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIG5ld1JvdGF0aW9uLCBzaXplKSk7XG4gICAgICAgIGlmIChkdXJhdGlvbiA9PT0gMCAmJiAhdGhpcy5jYW5jZWxBbmNob3JfKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gbmV3UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gbmV3Um90YXRpb247XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSBuZXdDZW50ZXI7XG4gICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3IgfHwgKGR1cmF0aW9uID09PSAwID8gdGhpcy5jYW5jZWxBbmNob3JfIDogdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy5jYW5jZWxBbmNob3JfID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5nZXRSZXNvbHV0aW9uKCkgIT09IG5ld1Jlc29sdXRpb24gfHxcbiAgICAgICAgICAgIHRoaXMuZ2V0Um90YXRpb24oKSAhPT0gbmV3Um90YXRpb24gfHxcbiAgICAgICAgICAgICF0aGlzLmdldENlbnRlckludGVybmFsKCkgfHxcbiAgICAgICAgICAgICFlcXVhbHModGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpLCBuZXdDZW50ZXIpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiBuZXdSb3RhdGlvbixcbiAgICAgICAgICAgICAgICBjZW50ZXI6IG5ld0NlbnRlcixcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBhbmNob3IsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIHN0YXJ0ZWQuXG4gICAgICogVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZCB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkXG4gICAgICogKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5iZWdpbkludGVyYWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cygwKTtcbiAgICAgICAgdGhpcy5zZXRIaW50KFZpZXdIaW50LklOVEVSQUNUSU5HLCAxKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5vdGlmeSB0aGUgVmlldyB0aGF0IGFuIGludGVyYWN0aW9uIGhhcyBlbmRlZC4gVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZFxuICAgICAqIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWQgKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbl0gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5lbmRJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yICYmIGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRfYW5jaG9yLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgICAgIHRoaXMuZW5kSW50ZXJhY3Rpb25JbnRlcm5hbChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBhbmNob3IpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoZSBWaWV3IHRoYXQgYW4gaW50ZXJhY3Rpb24gaGFzIGVuZGVkLiBUaGUgdmlldyBzdGF0ZSB3aWxsIGJlIHJlc29sdmVkXG4gICAgICogdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZCAoZGVwZW5kaW5nIG9uIGl0cyBjb25zdHJhaW50cykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yZXNvbHV0aW9uRGlyZWN0aW9uXSBXaGljaCBkaXJlY3Rpb24gdG8gem9vbS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZW5kSW50ZXJhY3Rpb25JbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgLTEpO1xuICAgICAgICB0aGlzLnJlc29sdmVDb25zdHJhaW50cyhvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHZhbGlkIHBvc2l0aW9uIGZvciB0aGUgdmlldyBjZW50ZXIgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGNvbnN0cmFpbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlciBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF90YXJnZXRSZXNvbHV0aW9uXSBUYXJnZXQgcmVzb2x1dGlvbi4gSWYgbm90IHN1cHBsaWVkLCB0aGUgY3VycmVudCBvbmUgd2lsbCBiZSB1c2VkLlxuICAgICAqIFRoaXMgaXMgdXNlZnVsIHRvIGd1ZXNzIGEgdmFsaWQgY2VudGVyIHBvc2l0aW9uIGF0IGEgZGlmZmVyZW50IHpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBWYWxpZCBjZW50ZXIgcG9zaXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRDZW50ZXIgPSBmdW5jdGlvbiAodGFyZ2V0Q2VudGVyLCBvcHRfdGFyZ2V0UmVzb2x1dGlvbikge1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKHRhcmdldENlbnRlciwgb3B0X3RhcmdldFJlc29sdXRpb24gfHwgdGhpcy5nZXRSZXNvbHV0aW9uKCksIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgem9vbSBsZXZlbCBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdmlldyBjb25zdHJhaW50cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHRhcmdldFpvb20gVGFyZ2V0IHpvb20uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFZhbGlkIHpvb20gbGV2ZWwuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRab29tID0gZnVuY3Rpb24gKHRhcmdldFpvb20sIG9wdF9kaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIHRhcmdldFJlcyA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20odGFyZ2V0Wm9vbSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uKHRhcmdldFJlcywgb3B0X2RpcmVjdGlvbikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGEgdmFsaWQgcmVzb2x1dGlvbiBhY2NvcmRpbmcgdG8gdGhlIGN1cnJlbnQgdmlldyBjb25zdHJhaW50cy5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZGlyZWN0aW9uPTBdIEluZGljYXRlIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3IHJlc29sdXRpb24gZG9lcyBub3QgbWF0Y2ggYW55IHJlc29sdXRpb24gb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFZhbGlkIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q29uc3RyYWluZWRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHRhcmdldFJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IG9wdF9kaXJlY3Rpb24gfHwgMDtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGFyZ2V0UmVzb2x1dGlvbiwgZGlyZWN0aW9uLCBzaXplKTtcbiAgICB9O1xuICAgIHJldHVybiBWaWV3O1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHBhcmFtIHsqfSByZXR1cm5WYWx1ZSBSZXR1cm4gdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCByZXR1cm5WYWx1ZSkge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBjYWxsYmFjayhyZXR1cm5WYWx1ZSk7XG4gICAgfSwgMCk7XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jZW50ZXJjb25zdHJhaW50LmpzXCIpLlR5cGV9IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2VudGVyQ29uc3RyYWludChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIHNtb290aCA9IG9wdGlvbnMuc21vb3RoRXh0ZW50Q29uc3RyYWludCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuc21vb3RoRXh0ZW50Q29uc3RyYWludFxuICAgICAgICAgICAgOiB0cnVlO1xuICAgICAgICByZXR1cm4gY3JlYXRlRXh0ZW50KG9wdGlvbnMuZXh0ZW50LCBvcHRpb25zLmNvbnN0cmFpbk9ubHlDZW50ZXIsIHNtb290aCk7XG4gICAgfVxuICAgIHZhciBwcm9qZWN0aW9uID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICBpZiAob3B0aW9ucy5tdWx0aVdvcmxkICE9PSB0cnVlICYmIHByb2plY3Rpb24uaXNHbG9iYWwoKSkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKS5zbGljZSgpO1xuICAgICAgICBleHRlbnRbMF0gPSAtSW5maW5pdHk7XG4gICAgICAgIGV4dGVudFsyXSA9IEluZmluaXR5O1xuICAgICAgICByZXR1cm4gY3JlYXRlRXh0ZW50KGV4dGVudCwgZmFsc2UsIGZhbHNlKTtcbiAgICB9XG4gICAgcmV0dXJuIGNlbnRlck5vbmU7XG59XG4vKipcbiAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICogQHJldHVybiB7e2NvbnN0cmFpbnQ6IGltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZSwgbWF4UmVzb2x1dGlvbjogbnVtYmVyLFxuICogICAgIG1pblJlc29sdXRpb246IG51bWJlciwgbWluWm9vbTogbnVtYmVyLCB6b29tRmFjdG9yOiBudW1iZXJ9fSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50KG9wdGlvbnMpIHtcbiAgICB2YXIgcmVzb2x1dGlvbkNvbnN0cmFpbnQ7XG4gICAgdmFyIG1heFJlc29sdXRpb247XG4gICAgdmFyIG1pblJlc29sdXRpb247XG4gICAgLy8gVE9ETzogbW92ZSB0aGVzZSB0byBiZSBvbCBjb25zdGFudHNcbiAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL29wZW5sYXllcnMvb3BlbmxheWVycy9pc3N1ZXMvMjA3NlxuICAgIHZhciBkZWZhdWx0TWF4Wm9vbSA9IDI4O1xuICAgIHZhciBkZWZhdWx0Wm9vbUZhY3RvciA9IDI7XG4gICAgdmFyIG1pblpvb20gPSBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IERFRkFVTFRfTUlOX1pPT007XG4gICAgdmFyIG1heFpvb20gPSBvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4Wm9vbSA6IGRlZmF1bHRNYXhab29tO1xuICAgIHZhciB6b29tRmFjdG9yID0gb3B0aW9ucy56b29tRmFjdG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21GYWN0b3IgOiBkZWZhdWx0Wm9vbUZhY3RvcjtcbiAgICB2YXIgbXVsdGlXb3JsZCA9IG9wdGlvbnMubXVsdGlXb3JsZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tdWx0aVdvcmxkIDogZmFsc2U7XG4gICAgdmFyIHNtb290aCA9IG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICA/IG9wdGlvbnMuc21vb3RoUmVzb2x1dGlvbkNvbnN0cmFpbnRcbiAgICAgICAgOiB0cnVlO1xuICAgIHZhciBzaG93RnVsbEV4dGVudCA9IG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc2hvd0Z1bGxFeHRlbnQgOiBmYWxzZTtcbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgdmFyIHByb2pFeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHZhciBjb25zdHJhaW5Pbmx5Q2VudGVyID0gb3B0aW9ucy5jb25zdHJhaW5Pbmx5Q2VudGVyO1xuICAgIHZhciBleHRlbnQgPSBvcHRpb25zLmV4dGVudDtcbiAgICBpZiAoIW11bHRpV29ybGQgJiYgIWV4dGVudCAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgY29uc3RyYWluT25seUNlbnRlciA9IGZhbHNlO1xuICAgICAgICBleHRlbnQgPSBwcm9qRXh0ZW50O1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5yZXNvbHV0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciByZXNvbHV0aW9ucyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIG1heFJlc29sdXRpb24gPSByZXNvbHV0aW9uc1ttaW5ab29tXTtcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9XG4gICAgICAgICAgICByZXNvbHV0aW9uc1ttYXhab29tXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyByZXNvbHV0aW9uc1ttYXhab29tXVxuICAgICAgICAgICAgICAgIDogcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHJlc29sdXRpb25Db25zdHJhaW50ID0gY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMocmVzb2x1dGlvbnMsIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gY2FsY3VsYXRlIHRoZSBkZWZhdWx0IG1pbiBhbmQgbWF4IHJlc29sdXRpb25cbiAgICAgICAgdmFyIHNpemUgPSAhcHJvakV4dGVudFxuICAgICAgICAgICAgPyAvLyB1c2UgYW4gZXh0ZW50IHRoYXQgY2FuIGZpdCB0aGUgd2hvbGUgd29ybGQgaWYgbmVlZCBiZVxuICAgICAgICAgICAgICAgICgzNjAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10pIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KClcbiAgICAgICAgICAgIDogTWF0aC5tYXgoZ2V0V2lkdGgocHJvakV4dGVudCksIGdldEhlaWdodChwcm9qRXh0ZW50KSk7XG4gICAgICAgIHZhciBkZWZhdWx0TWF4UmVzb2x1dGlvbiA9IHNpemUgLyBERUZBVUxUX1RJTEVfU0laRSAvIE1hdGgucG93KGRlZmF1bHRab29tRmFjdG9yLCBERUZBVUxUX01JTl9aT09NKTtcbiAgICAgICAgdmFyIGRlZmF1bHRNaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gL1xuICAgICAgICAgICAgTWF0aC5wb3coZGVmYXVsdFpvb21GYWN0b3IsIGRlZmF1bHRNYXhab29tIC0gREVGQVVMVF9NSU5fWk9PTSk7XG4gICAgICAgIC8vIHVzZXIgcHJvdmlkZWQgbWF4UmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgIG1heFJlc29sdXRpb24gPSBvcHRpb25zLm1heFJlc29sdXRpb247XG4gICAgICAgIGlmIChtYXhSZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1pblpvb20gPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF4UmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWluWm9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXNlciBwcm92aWRlZCBtaW5SZXNvbHV0aW9uIHRha2VzIHByZWNlZGVuY2VcbiAgICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICAgICAgaWYgKG1pblJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1heFJlc29sdXRpb24gLyBNYXRoLnBvdyh6b29tRmFjdG9yLCBtYXhab29tKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gZGVmYXVsdE1pblJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2l2ZW4gZGlzY3JldGUgem9vbSBsZXZlbHMsIG1pblJlc29sdXRpb24gbWF5IGJlIGRpZmZlcmVudCB0aGFuIHByb3ZpZGVkXG4gICAgICAgIG1heFpvb20gPVxuICAgICAgICAgICAgbWluWm9vbSArXG4gICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLmxvZyhtYXhSZXNvbHV0aW9uIC8gbWluUmVzb2x1dGlvbikgLyBNYXRoLmxvZyh6b29tRmFjdG9yKSk7XG4gICAgICAgIG1pblJlc29sdXRpb24gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSAtIG1pblpvb20pO1xuICAgICAgICBpZiAob3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVNuYXBUb1Bvd2VyKHpvb21GYWN0b3IsIG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgc21vb3RoLCAhY29uc3RyYWluT25seUNlbnRlciAmJiBleHRlbnQsIHNob3dGdWxsRXh0ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb25zdHJhaW50OiByZXNvbHV0aW9uQ29uc3RyYWludCxcbiAgICAgICAgbWF4UmVzb2x1dGlvbjogbWF4UmVzb2x1dGlvbixcbiAgICAgICAgbWluUmVzb2x1dGlvbjogbWluUmVzb2x1dGlvbixcbiAgICAgICAgbWluWm9vbTogbWluWm9vbSxcbiAgICAgICAgem9vbUZhY3Rvcjogem9vbUZhY3RvcixcbiAgICB9O1xufVxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vcm90YXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQob3B0aW9ucykge1xuICAgIHZhciBlbmFibGVSb3RhdGlvbiA9IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZW5hYmxlUm90YXRpb24gOiB0cnVlO1xuICAgIGlmIChlbmFibGVSb3RhdGlvbikge1xuICAgICAgICB2YXIgY29uc3RyYWluUm90YXRpb24gPSBvcHRpb25zLmNvbnN0cmFpblJvdGF0aW9uO1xuICAgICAgICBpZiAoY29uc3RyYWluUm90YXRpb24gPT09IHVuZGVmaW5lZCB8fCBjb25zdHJhaW5Sb3RhdGlvbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVNuYXBUb1plcm8oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb25zdHJhaW5Sb3RhdGlvbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGNvbnN0cmFpblJvdGF0aW9uID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVNuYXBUb04oY29uc3RyYWluUm90YXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uTm9uZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRpc2FibGU7XG4gICAgfVxufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYW4gYW5pbWF0aW9uIGludm9sdmVzIG5vIHZpZXcgY2hhbmdlLlxuICogQHBhcmFtIHtBbmltYXRpb259IGFuaW1hdGlvbiBUaGUgYW5pbWF0aW9uLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pIHtcbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlciAmJiBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSB7XG4gICAgICAgIGlmICghY29vcmRpbmF0ZXNFcXVhbChhbmltYXRpb24uc291cmNlQ2VudGVyLCBhbmltYXRpb24udGFyZ2V0Q2VudGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAhPT0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSBhbmltYXRpb24udGFyZ2V0Um90YXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBCb3ggcGl4ZWwgc2l6ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBTaGlmdGVkIGNlbnRlci5cbiAqL1xuZnVuY3Rpb24gY2FsY3VsYXRlQ2VudGVyT24oY29vcmRpbmF0ZSwgc2l6ZSwgcG9zaXRpb24sIHJlc29sdXRpb24sIHJvdGF0aW9uKSB7XG4gICAgLy8gY2FsY3VsYXRlIHJvdGF0ZWQgcG9zaXRpb25cbiAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcygtcm90YXRpb24pO1xuICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gICAgdmFyIHJvdFggPSBjb29yZGluYXRlWzBdICogY29zQW5nbGUgLSBjb29yZGluYXRlWzFdICogc2luQW5nbGU7XG4gICAgdmFyIHJvdFkgPSBjb29yZGluYXRlWzFdICogY29zQW5nbGUgKyBjb29yZGluYXRlWzBdICogc2luQW5nbGU7XG4gICAgcm90WCArPSAoc2l6ZVswXSAvIDIgLSBwb3NpdGlvblswXSkgKiByZXNvbHV0aW9uO1xuICAgIHJvdFkgKz0gKHBvc2l0aW9uWzFdIC0gc2l6ZVsxXSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIGFuZ2xlXG4gICAgc2luQW5nbGUgPSAtc2luQW5nbGU7IC8vIGdvIGJhY2sgdG8gb3JpZ2luYWwgcm90YXRpb25cbiAgICB2YXIgY2VudGVyWCA9IHJvdFggKiBjb3NBbmdsZSAtIHJvdFkgKiBzaW5BbmdsZTtcbiAgICB2YXIgY2VudGVyWSA9IHJvdFkgKiBjb3NBbmdsZSArIHJvdFggKiBzaW5BbmdsZTtcbiAgICByZXR1cm4gW2NlbnRlclgsIGNlbnRlclldO1xufVxuZXhwb3J0IGRlZmF1bHQgVmlldztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkL2NvbW1vblxuICovXG4vKipcbiAqIERlZmF1bHQgbWF4aW11bSB6b29tIGZvciBkZWZhdWx0IHRpbGUgZ3JpZHMuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfTUFYX1pPT00gPSA0Mjtcbi8qKlxuICogRGVmYXVsdCB0aWxlIHNpemUuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERFRkFVTFRfVElMRV9TSVpFID0gMjU2O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9WaWV3SGludFxuICovXG4vKipcbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBTklNQVRJTkc6IDAsXG4gICAgSU5URVJBQ1RJTkc6IDEsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Vmlld0hpbnQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3N0eWxlL0ljb25JbWFnZUNhY2hlXG4gKi9cbmltcG9ydCB7IGFzU3RyaW5nIH0gZnJvbSAnLi4vY29sb3IuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBTaW5nbGV0b24gY2xhc3MuIEF2YWlsYWJsZSB0aHJvdWdoIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+c2hhcmVkfS5cbiAqL1xudmFyIEljb25JbWFnZUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEljb25JbWFnZUNhY2hlKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jYWNoZVNpemVfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSAzMjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNhY2hlXyA9IHt9O1xuICAgICAgICB0aGlzLmNhY2hlU2l6ZV8gPSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlU2l6ZV8gPiB0aGlzLm1heENhY2hlU2l6ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuZXhwaXJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZV8pIHtcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkltYWdlID0gdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAoKGkrKyAmIDMpID09PSAwICYmICFpY29uSW1hZ2UuaGFzTGlzdGVuZXIoKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5jYWNoZV9ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgLS10aGlzLmNhY2hlU2l6ZV87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0ljb25JbWFnZS5qc1wiKS5kZWZhdWx0fSBJY29uIGltYWdlLlxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpIHtcbiAgICAgICAgdmFyIGtleSA9IGdldEtleShzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcik7XG4gICAgICAgIHJldHVybiBrZXkgaW4gdGhpcy5jYWNoZV8gPyB0aGlzLmNhY2hlX1trZXldIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU3JjLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdH0gaWNvbkltYWdlIEljb24gaW1hZ2UuXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChzcmMsIGNyb3NzT3JpZ2luLCBjb2xvciwgaWNvbkltYWdlKSB7XG4gICAgICAgIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICAgICAgICB0aGlzLmNhY2hlX1trZXldID0gaWNvbkltYWdlO1xuICAgICAgICArK3RoaXMuY2FjaGVTaXplXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY2FjaGUgc2l6ZSBvZiB0aGUgaWNvbiBjYWNoZS4gRGVmYXVsdCBpcyBgMzJgLiBDaGFuZ2UgdGhpcyB2YWx1ZSB3aGVuXG4gICAgICogeW91ciBtYXAgdXNlcyBtb3JlIHRoYW4gMzIgZGlmZmVyZW50IGljb24gaW1hZ2VzIGFuZCB5b3UgYXJlIG5vdCBjYWNoaW5nIGljb25cbiAgICAgKiBzdHlsZXMgb24gdGhlIGFwcGxpY2F0aW9uIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhDYWNoZVNpemUgQ2FjaGUgbWF4IHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKG1heENhY2hlU2l6ZSkge1xuICAgICAgICB0aGlzLm1heENhY2hlU2l6ZV8gPSBtYXhDYWNoZVNpemU7XG4gICAgICAgIHRoaXMuZXhwaXJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gSWNvbkltYWdlQ2FjaGU7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gY3Jvc3NPcmlnaW4gQ3Jvc3Mgb3JpZ2luLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENhY2hlIGtleS5cbiAqL1xuZnVuY3Rpb24gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gICAgdmFyIGNvbG9yU3RyaW5nID0gY29sb3IgPyBhc1N0cmluZyhjb2xvcikgOiAnbnVsbCc7XG4gICAgcmV0dXJuIGNyb3NzT3JpZ2luICsgJzonICsgc3JjICsgJzonICsgY29sb3JTdHJpbmc7XG59XG5leHBvcnQgZGVmYXVsdCBJY29uSW1hZ2VDYWNoZTtcbi8qKlxuICogVGhlIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbkltYWdlQ2FjaGV+SWNvbkltYWdlQ2FjaGV9IGZvclxuICoge0BsaW5rIG1vZHVsZTpvbC9zdHlsZS9JY29ufkljb259IGltYWdlcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaGFyZWQgPSBuZXcgSWNvbkltYWdlQ2FjaGUoKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUljb25JbWFnZUNhY2hlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvTWFwXG4gKi9cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IHsgVFJVRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBtYWtlSW52ZXJzZSB9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBnZXRXaWR0aCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBzaGFyZWQgYXMgaWNvbkltYWdlQ2FjaGUgfSBmcm9tICcuLi9zdHlsZS9JY29uSW1hZ2VDYWNoZS5qcyc7XG5pbXBvcnQgeyBpblZpZXcgfSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgeyB3cmFwWCB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiBIaXRNYXRjaFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGRpc3RhbmNlU3EgU3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBNYXBSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBSZW5kZXJlcihtYXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwYXRjaFJlbmRlckV2ZW50ID0gZnVuY3Rpb24gKHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmNhbGN1bGF0ZU1hdHJpY2VzMkQgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSA9IGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm07XG4gICAgICAgIHZhciBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSA9IGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm07XG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0oY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDIsIGZyYW1lU3RhdGUuc2l6ZVsxXSAvIDIsIDEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbiwgLTEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbiwgLXZpZXdTdGF0ZS5yb3RhdGlvbiwgLXZpZXdTdGF0ZS5jZW50ZXJbMF0sIC12aWV3U3RhdGUuY2VudGVyWzFdKTtcbiAgICAgICAgbWFrZUludmVyc2UocGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0sIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjaGVja1dyYXBwZWQgQ2hlY2sgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcyIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBTLFQsVVxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgY2FsbGJhY2ssIHRoaXNBcmcsIGxheWVyRmlsdGVyLCB0aGlzQXJnMikge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG1hbmFnZWQgTWFuYWdlZCBsYXllci5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICAgICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKG1hbmFnZWQsIGZlYXR1cmUsIGxheWVyLCBnZW9tZXRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZmVhdHVyZSwgbWFuYWdlZCA/IGxheWVyIDogbnVsbCwgZ2VvbWV0cnkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB0cmFuc2xhdGVkQ29vcmRpbmF0ZSA9IHdyYXBYKGNvb3JkaW5hdGUuc2xpY2UoKSwgcHJvamVjdGlvbik7XG4gICAgICAgIHZhciBvZmZzZXRzID0gW1swLCAwXV07XG4gICAgICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiYgY2hlY2tXcmFwcGVkKSB7XG4gICAgICAgICAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICAgICAgb2Zmc2V0cy5wdXNoKFstd29ybGRXaWR0aCwgMF0sIFt3b3JsZFdpZHRoLCAwXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxheWVyU3RhdGVzID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICB2YXIgbnVtTGF5ZXJzID0gbGF5ZXJTdGF0ZXMubGVuZ3RoO1xuICAgICAgICB2YXIgbWF0Y2hlcyA9IC8qKiBAdHlwZSB7QXJyYXk8SGl0TWF0Y2g8VD4+fSAqLyAoW10pO1xuICAgICAgICB2YXIgdG1wQ29vcmQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvZmZzZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gbnVtTGF5ZXJzIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2pdO1xuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJGaWx0ZXIuY2FsbCh0aGlzQXJnMiwgbGF5ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXllclJlbmRlcmVyID0gbGF5ZXIuZ2V0UmVuZGVyZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXJSZW5kZXJlciAmJiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9IHNvdXJjZS5nZXRXcmFwWCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cmFuc2xhdGVkQ29vcmRpbmF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29vcmRpbmF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja18xID0gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUuYmluZChudWxsLCBsYXllclN0YXRlLm1hbmFnZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQ29vcmRbMF0gPSBjb29yZGluYXRlc1swXSArIG9mZnNldHNbaV1bMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBDb29yZFsxXSA9IGNvb3JkaW5hdGVzWzFdICsgb2Zmc2V0c1tpXVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGxheWVyUmVuZGVyZXIuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUodG1wQ29vcmQsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2tfMSwgbWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9yZGVyID0gMSAvIG1hdGNoZXMubGVuZ3RoO1xuICAgICAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKG0sIGkpIHsgcmV0dXJuIChtLmRpc3RhbmNlU3EgKz0gaSAqIG9yZGVyKTsgfSk7XG4gICAgICAgIG1hdGNoZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5kaXN0YW5jZVNxIC0gYi5kaXN0YW5jZVNxOyB9KTtcbiAgICAgICAgbWF0Y2hlcy5zb21lKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9IG0uY2FsbGJhY2sobS5mZWF0dXJlLCBtLmxheWVyLCBtLmdlb21ldHJ5KSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4uL3NvdXJjZS9Tb3VyY2VcIikuZGVmYXVsdD4sIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrIExheWVyXG4gICAgICogICAgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlXCIpLmRlZmF1bHQ+KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQuXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbGF5ZXJGaWx0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2hlY2tXcmFwcGVkIENoZWNrIGZvciB3cmFwcGVkIGdlb21ldHJpZXMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbih0aGlzOiBVLCBpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gbGF5ZXJGaWx0ZXIgTGF5ZXIgZmlsdGVyXG4gICAgICogICAgIGZ1bmN0aW9uLCBvbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb25cbiAgICAgKiAgICAgcmV0dXJucyBgdHJ1ZWAgd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiAgQnkgZGVmYXVsdCwgYWxsIHZpc2libGVcbiAgICAgKiAgICAgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICAgICAqIEBwYXJhbSB7VX0gdGhpc0FyZyBWYWx1ZSB0byB1c2UgYXMgYHRoaXNgIHdoZW4gZXhlY3V0aW5nIGBsYXllckZpbHRlcmAuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBjb29yZGluYXRlP1xuICAgICAqIEB0ZW1wbGF0ZSBVXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmhhc0ZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGxheWVyRmlsdGVyLCB0aGlzQXJnKSB7XG4gICAgICAgIHZhciBoYXNGZWF0dXJlID0gdGhpcy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgVFJVRSwgdGhpcywgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcpO1xuICAgICAgICByZXR1cm4gaGFzRmVhdHVyZSAhPT0gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoaWNvbkltYWdlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goZXhwaXJlSWNvbkNhY2hlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1hcFJlbmRlcmVyO1xufShEaXNwb3NhYmxlKSk7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICovXG5mdW5jdGlvbiBleHBpcmVJY29uQ2FjaGUobWFwLCBmcmFtZVN0YXRlKSB7XG4gICAgaWNvbkltYWdlQ2FjaGUuZXhwaXJlKCk7XG59XG5leHBvcnQgZGVmYXVsdCBNYXBSZW5kZXJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL2NhbnZhc1xuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4uL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IHsgV09SS0VSX09GRlNDUkVFTl9DQU5WQVMgfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vZG9tLmpzJztcbmltcG9ydCB7IGdldEZvbnRQYXJhbWV0ZXJzIH0gZnJvbSAnLi4vY3NzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRmlsbFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IGZpbGxTdHlsZSBGaWxsU3R5bGUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYgTGFiZWxcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB3aWR0aCBXaWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0LlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmd8bnVtYmVyPn0gY29udGV4dEluc3RydWN0aW9ucyBDb250ZXh0SW5zdHJ1Y3Rpb25zLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpbGxTdHJva2VTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY3VycmVudEZpbGxTdHlsZV0gQ3VycmVudCBGaWxsU3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtjdXJyZW50U3Ryb2tlU3R5bGVdIEN1cnJlbnQgU3Ryb2tlU3R5bGUuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtjdXJyZW50TGluZUNhcF0gQ3VycmVudCBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBjdXJyZW50TGluZURhc2ggQ3VycmVudCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVEYXNoT2Zmc2V0XSBDdXJyZW50IExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gW2N1cnJlbnRMaW5lSm9pbl0gQ3VycmVudCBMaW5lSm9pbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3VycmVudExpbmVXaWR0aF0gQ3VycmVudCBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRNaXRlckxpbWl0XSBDdXJyZW50IE1pdGVyTGltaXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xhc3RTdHJva2VdIExhc3Qgc3Ryb2tlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbZmlsbFN0eWxlXSBGaWxsU3R5bGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9IFtzdHJva2VTdHlsZV0gU3Ryb2tlU3R5bGUuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IFtsaW5lQ2FwXSBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZURhc2hPZmZzZXRdIExpbmVEYXNoT2Zmc2V0LlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lSm9pbn0gW2xpbmVKb2luXSBMaW5lSm9pbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbGluZVdpZHRoXSBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pdGVyTGltaXRdIE1pdGVyTGltaXQuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3Ryb2tlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUNhcH0gbGluZUNhcCBMaW5lQ2FwLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBsaW5lRGFzaCBMaW5lRGFzaC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lRGFzaE9mZnNldCBMaW5lRGFzaE9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IGxpbmVKb2luIExpbmVKb2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxpbmVXaWR0aCBMaW5lV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWl0ZXJMaW1pdCBNaXRlckxpbWl0LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBzdHJva2VTdHlsZSBTdHJva2VTdHlsZS5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUZXh0U3RhdGVcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RleHRBbGlnbl0gVGV4dEFsaWduLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHRleHRCYXNlbGluZSBUZXh0QmFzZWxpbmUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3BsYWNlbWVudF0gUGxhY2VtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhBbmdsZV0gTWF4QW5nbGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdmVyZmxvd10gT3ZlcmZsb3cuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL0ZpbGwuanNcIikuZGVmYXVsdH0gW2JhY2tncm91bmRGaWxsXSBCYWNrZ3JvdW5kRmlsbC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc3R5bGUvU3Ryb2tlLmpzXCIpLmRlZmF1bHR9IFtiYWNrZ3JvdW5kU3Ryb2tlXSBCYWNrZ3JvdW5kU3Ryb2tlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFtzY2FsZV0gU2NhbGUuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IFtwYWRkaW5nXSBQYWRkaW5nLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNlcmlhbGl6YWJsZUluc3RydWN0aW9uc1xuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaW5zdHJ1Y3Rpb25zLlxuICogQHByb3BlcnR5IHtBcnJheTwqPn0gaGl0RGV0ZWN0aW9uSW5zdHJ1Y3Rpb25zIFRoZSByZW5kZXJpbmcgaGl0IGRldGVjdGlvbiBpbnN0cnVjdGlvbnMuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IGNvb3JkaW5hdGVzIFRoZSBhcnJheSBvZiBhbGwgY29vcmRpbmF0ZXMuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBUZXh0U3RhdGU+fSBbdGV4dFN0YXRlc10gVGhlIHRleHQgc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgRmlsbFN0YXRlPn0gW2ZpbGxTdGF0ZXNdIFRoZSBmaWxsIHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIFN0cm9rZVN0YXRlPn0gW3N0cm9rZVN0YXRlc10gVGhlIHN0cm9rZSBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdDxudW1iZXIsIGltcG9ydChcIi4vY2FudmFzL0V4ZWN1dG9yLmpzXCIpLlJlcGxheUltYWdlT3JMYWJlbEFyZ3M+fSBEZWNsdXR0ZXJJbWFnZVdpdGhUZXh0XG4gKi9cbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRGb250ID0gJzEwcHggc2Fucy1zZXJpZic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdEZpbGxTdHlsZSA9ICcjMDAwJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Q2FudmFzTGluZUNhcH1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUNhcCA9ICdyb3VuZCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoID0gW107XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZURhc2hPZmZzZXQgPSAwO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtDYW52YXNMaW5lSm9pbn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZUpvaW4gPSAncm91bmQnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdE1pdGVyTGltaXQgPSAxMDtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0U3Ryb2tlU3R5bGUgPSAnIzAwMCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEFsaWduID0gJ2NlbnRlcic7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0VGV4dEJhc2VsaW5lID0gJ21pZGRsZSc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFBhZGRpbmcgPSBbMCwgMCwgMCwgMF07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0TGluZVdpZHRoID0gMTtcbi8qKlxuICogQHR5cGUge0Jhc2VPYmplY3R9XG4gKi9cbmV4cG9ydCB2YXIgY2hlY2tlZEZvbnRzID0gbmV3IEJhc2VPYmplY3QoKTtcbi8qKlxuICogVGhlIGxhYmVsIGNhY2hlIGZvciB0ZXh0IHJlbmRlcmluZy4gVG8gY2hhbmdlIHRoZSBkZWZhdWx0IGNhY2hlIHNpemUgb2YgMjA0OFxuICogZW50cmllcywgdXNlIHtAbGluayBtb2R1bGU6b2wvc3RydWN0cy9MUlVDYWNoZX5MUlVDYWNoZSNzZXRTaXplIGNhY2hlLnNldFNpemUoKX0uXG4gKiBEZXByZWNhdGVkIC0gdGhlcmUgaXMgbm8gbGFiZWwgY2FjaGUgYW55IG1vcmUuXG4gKiBAdHlwZSB7P31cbiAqIEBhcGlcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbGFiZWxDYWNoZSA9IG5ldyBFdmVudFRhcmdldCgpO1xubGFiZWxDYWNoZS5zZXRTaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUud2FybignbGFiZWxDYWNoZSBpcyBkZXByZWNhdGVkLicpOyAvL2VzbGludC1kaXNhYmxlLWxpbmVcbn07XG4vKipcbiAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gKi9cbnZhciBtZWFzdXJlQ29udGV4dCA9IG51bGw7XG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciBtZWFzdXJlRm9udDtcbi8qKlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICovXG5leHBvcnQgdmFyIHRleHRIZWlnaHRzID0ge307XG4vKipcbiAqIENsZWFycyB0aGUgbGFiZWwgY2FjaGUgd2hlbiBhIGZvbnQgYmVjb21lcyBhdmFpbGFibGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udFNwZWMgQ1NTIGZvbnQgc3BlYy5cbiAqL1xuZXhwb3J0IHZhciByZWdpc3RlckZvbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXRyaWVzID0gMTAwO1xuICAgIHZhciBzaXplID0gJzMycHggJztcbiAgICB2YXIgcmVmZXJlbmNlRm9udHMgPSBbJ21vbm9zcGFjZScsICdzZXJpZiddO1xuICAgIHZhciBsZW4gPSByZWZlcmVuY2VGb250cy5sZW5ndGg7XG4gICAgdmFyIHRleHQgPSAnd215dHppbFdNWVRaSUxAIy8mPyQlMTBcXHVGMDEzJztcbiAgICB2YXIgaW50ZXJ2YWwsIHJlZmVyZW5jZVdpZHRoO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBmb250U3R5bGUgQ3NzIGZvbnQtc3R5bGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9udFdlaWdodCBDc3MgZm9udC13ZWlnaHRcbiAgICAgKiBAcGFyYW0geyp9IGZvbnRGYW1pbHkgQ3NzIGZvbnQtZmFtaWx5XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gRm9udCB3aXRoIHN0eWxlIGFuZCB3ZWlnaHQgaXMgYXZhaWxhYmxlXG4gICAgICovXG4gICAgZnVuY3Rpb24gaXNBdmFpbGFibGUoZm9udFN0eWxlLCBmb250V2VpZ2h0LCBmb250RmFtaWx5KSB7XG4gICAgICAgIHZhciBhdmFpbGFibGUgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgICAgICB2YXIgcmVmZXJlbmNlRm9udCA9IHJlZmVyZW5jZUZvbnRzW2ldO1xuICAgICAgICAgICAgcmVmZXJlbmNlV2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnRTdHlsZSArICcgJyArIGZvbnRXZWlnaHQgKyAnICcgKyBzaXplICsgcmVmZXJlbmNlRm9udCwgdGV4dCk7XG4gICAgICAgICAgICBpZiAoZm9udEZhbWlseSAhPSByZWZlcmVuY2VGb250KSB7XG4gICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250U3R5bGUgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0ICtcbiAgICAgICAgICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgc2l6ZSArXG4gICAgICAgICAgICAgICAgICAgIGZvbnRGYW1pbHkgK1xuICAgICAgICAgICAgICAgICAgICAnLCcgK1xuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VGb250LCB0ZXh0KTtcbiAgICAgICAgICAgICAgICAvLyBJZiB3aWR0aCBhbmQgcmVmZXJlbmNlV2lkdGggYXJlIHRoZSBzYW1lLCB0aGVuIHRoZSBmYWxsYmFjayB3YXMgdXNlZFxuICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgb2YgdGhlIGZvbnQgd2Ugd2FudGVkLCBzbyB0aGUgZm9udCBpcyBub3QgYXZhaWxhYmxlLlxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZSA9IGF2YWlsYWJsZSAmJiB3aWR0aCAhPSByZWZlcmVuY2VXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYXZhaWxhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNoZWNrKCkge1xuICAgICAgICB2YXIgZG9uZSA9IHRydWU7XG4gICAgICAgIHZhciBmb250cyA9IGNoZWNrZWRGb250cy5nZXRLZXlzKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZvbnRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBmb250ID0gZm9udHNbaV07XG4gICAgICAgICAgICBpZiAoY2hlY2tlZEZvbnRzLmdldChmb250KSA8IHJldHJpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBdmFpbGFibGUuYXBwbHkodGhpcywgZm9udC5zcGxpdCgnXFxuJykpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyKHRleHRIZWlnaHRzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgbG9hZGVkIGZvbnRzIGFyZSBwaWNrZWQgdXAgYnkgU2FmYXJpXG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUZvbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoZm9udCwgcmV0cmllcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkRm9udHMuc2V0KGZvbnQsIGNoZWNrZWRGb250cy5nZXQoZm9udCkgKyAxLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgZG9uZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgICAgICAgICBpbnRlcnZhbCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgICAgIHZhciBmb250ID0gZ2V0Rm9udFBhcmFtZXRlcnMoZm9udFNwZWMpO1xuICAgICAgICBpZiAoIWZvbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZmFtaWxpZXMgPSBmb250LmZhbWlsaWVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmYW1pbGllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZmFtaWx5ID0gZmFtaWxpZXNbaV07XG4gICAgICAgICAgICB2YXIga2V5ID0gZm9udC5zdHlsZSArICdcXG4nICsgZm9udC53ZWlnaHQgKyAnXFxuJyArIGZhbWlseTtcbiAgICAgICAgICAgIGlmIChjaGVja2VkRm9udHMuZ2V0KGtleSkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCByZXRyaWVzLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQXZhaWxhYmxlKGZvbnQuc3R5bGUsIGZvbnQud2VpZ2h0LCBmYW1pbHkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoZWNrZWRGb250cy5zZXQoa2V5LCAwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVydmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoY2hlY2ssIDMyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250IHRvIHVzZSBmb3IgbWVhc3VyaW5nLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBNZWFzdXJlbWVudC5cbiAqL1xuZXhwb3J0IHZhciBtZWFzdXJlVGV4dEhlaWdodCA9IChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAqL1xuICAgIHZhciBtZWFzdXJlRWxlbWVudDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGZvbnRTcGVjKSB7XG4gICAgICAgIHZhciBoZWlnaHQgPSB0ZXh0SGVpZ2h0c1tmb250U3BlY107XG4gICAgICAgIGlmIChoZWlnaHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoV09SS0VSX09GRlNDUkVFTl9DQU5WQVMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZm9udCA9IGdldEZvbnRQYXJhbWV0ZXJzKGZvbnRTcGVjKTtcbiAgICAgICAgICAgICAgICB2YXIgbWV0cmljcyA9IG1lYXN1cmVUZXh0KGZvbnRTcGVjLCAnxb1nJyk7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmVIZWlnaHQgPSBpc05hTihOdW1iZXIoZm9udC5saW5lSGVpZ2h0KSlcbiAgICAgICAgICAgICAgICAgICAgPyAxLjJcbiAgICAgICAgICAgICAgICAgICAgOiBOdW1iZXIoZm9udC5saW5lSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPVxuICAgICAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0ICpcbiAgICAgICAgICAgICAgICAgICAgICAgIChtZXRyaWNzLmFjdHVhbEJvdW5kaW5nQm94QXNjZW50ICsgbWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtZWFzdXJlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5pbm5lckhUTUwgPSAnTSc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLm1pbkhlaWdodCA9ICcwJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubWF4SGVpZ2h0ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLnBhZGRpbmcgPSAnMCc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUubGVmdCA9ICctOTk5OTlweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnQgPSBmb250U3BlYztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG1lYXN1cmVFbGVtZW50KTtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBtZWFzdXJlRWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChtZWFzdXJlRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0SGVpZ2h0c1tmb250U3BlY10gPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlaWdodDtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRleHQuXG4gKiBAcmV0dXJuIHtUZXh0TWV0cmljc30gVGV4dCBtZXRyaWNzLlxuICovXG5mdW5jdGlvbiBtZWFzdXJlVGV4dChmb250LCB0ZXh0KSB7XG4gICAgaWYgKCFtZWFzdXJlQ29udGV4dCkge1xuICAgICAgICBtZWFzdXJlQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgICB9XG4gICAgaWYgKGZvbnQgIT0gbWVhc3VyZUZvbnQpIHtcbiAgICAgICAgbWVhc3VyZUNvbnRleHQuZm9udCA9IGZvbnQ7XG4gICAgICAgIG1lYXN1cmVGb250ID0gbWVhc3VyZUNvbnRleHQuZm9udDtcbiAgICB9XG4gICAgcmV0dXJuIG1lYXN1cmVDb250ZXh0Lm1lYXN1cmVUZXh0KHRleHQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGV4dC5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIHRleHQpIHtcbiAgICByZXR1cm4gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkud2lkdGg7XG59XG4vKipcbiAqIE1lYXN1cmUgdGV4dCB3aWR0aCB1c2luZyBhIGNhY2hlLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgVGhlIGZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0byBtZWFzdXJlLlxuICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fSBjYWNoZSBBIGxvb2t1cCBvZiBjYWNoZWQgd2lkdGhzIGJ5IHRleHQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSB0ZXh0IHdpZHRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZUFuZENhY2hlVGV4dFdpZHRoKGZvbnQsIHRleHQsIGNhY2hlKSB7XG4gICAgaWYgKHRleHQgaW4gY2FjaGUpIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlW3RleHRdO1xuICAgIH1cbiAgICB2YXIgd2lkdGggPSBtZWFzdXJlVGV4dFdpZHRoKGZvbnQsIHRleHQpO1xuICAgIGNhY2hlW3RleHRdID0gd2lkdGg7XG4gICAgcmV0dXJuIHdpZHRoO1xufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udCBGb250IHRvIHVzZSBmb3IgbWVhc3VyaW5nLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBsaW5lcyBMaW5lcyB0byBtZWFzdXJlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSB3aWR0aHMgQXJyYXkgd2lsbCBiZSBwb3B1bGF0ZWQgd2l0aCB0aGUgd2lkdGhzIG9mXG4gKiBlYWNoIGxpbmUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoIG9mIHRoZSB3aG9sZSB0ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZVRleHRXaWR0aHMoZm9udCwgbGluZXMsIHdpZHRocykge1xuICAgIHZhciBudW1MaW5lcyA9IGxpbmVzLmxlbmd0aDtcbiAgICB2YXIgd2lkdGggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtTGluZXM7ICsraSkge1xuICAgICAgICB2YXIgY3VycmVudFdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250LCBsaW5lc1tpXSk7XG4gICAgICAgIHdpZHRoID0gTWF0aC5tYXgod2lkdGgsIGN1cnJlbnRXaWR0aCk7XG4gICAgICAgIHdpZHRocy5wdXNoKGN1cnJlbnRXaWR0aCk7XG4gICAgfVxuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIFggb2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFkgWSBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGVBdE9mZnNldChjb250ZXh0LCByb3RhdGlvbiwgb2Zmc2V0WCwgb2Zmc2V0WSkge1xuICAgIGlmIChyb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShvZmZzZXRYLCBvZmZzZXRZKTtcbiAgICAgICAgY29udGV4dC5yb3RhdGUocm90YXRpb24pO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSgtb2Zmc2V0WCwgLW9mZnNldFkpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybXxudWxsfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IG9wYWNpdHkgT3BhY2l0eS5cbiAqIEBwYXJhbSB7TGFiZWx8SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBsYWJlbE9ySW1hZ2UgTGFiZWwuXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWCBPcmlnaW4gWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcmlnaW5ZIE9yaWdpbiBZLlxuICogQHBhcmFtIHtudW1iZXJ9IHcgV2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBzY2FsZSBTY2FsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRyYXdJbWFnZU9yTGFiZWwoY29udGV4dCwgdHJhbnNmb3JtLCBvcGFjaXR5LCBsYWJlbE9ySW1hZ2UsIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIHgsIHksIHNjYWxlKSB7XG4gICAgY29udGV4dC5zYXZlKCk7XG4gICAgaWYgKG9wYWNpdHkgIT09IDEpIHtcbiAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSAqPSBvcGFjaXR5O1xuICAgIH1cbiAgICBpZiAodHJhbnNmb3JtKSB7XG4gICAgICAgIGNvbnRleHQuc2V0VHJhbnNmb3JtLmFwcGx5KGNvbnRleHQsIHRyYW5zZm9ybSk7XG4gICAgfVxuICAgIGlmICggLyoqIEB0eXBlIHsqfSAqLyhsYWJlbE9ySW1hZ2UpLmNvbnRleHRJbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgLy8gbGFiZWxcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoeCwgeSk7XG4gICAgICAgIGNvbnRleHQuc2NhbGUoc2NhbGVbMF0sIHNjYWxlWzFdKTtcbiAgICAgICAgZXhlY3V0ZUxhYmVsSW5zdHJ1Y3Rpb25zKC8qKiBAdHlwZSB7TGFiZWx9ICovIChsYWJlbE9ySW1hZ2UpLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NhbGVbMF0gPCAwIHx8IHNjYWxlWzFdIDwgMCkge1xuICAgICAgICAvLyBmbGlwcGVkIGltYWdlXG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgICBjb250ZXh0LnNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGNvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGxhYmVsT3JJbWFnZSksIG9yaWdpblgsIG9yaWdpblksIHcsIGgsIDAsIDAsIHcsIGgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gaWYgaW1hZ2Ugbm90IGZsaXBwZWQgdHJhbnNsYXRlIGFuZCBzY2FsZSBjYW4gYmUgYXZvaWRlZFxuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChsYWJlbE9ySW1hZ2UpLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCB3ICogc2NhbGVbMF0sIGggKiBzY2FsZVsxXSk7XG4gICAgfVxuICAgIGNvbnRleHQucmVzdG9yZSgpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0xhYmVsfSBsYWJlbCBMYWJlbC5cbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVMYWJlbEluc3RydWN0aW9ucyhsYWJlbCwgY29udGV4dCkge1xuICAgIHZhciBjb250ZXh0SW5zdHJ1Y3Rpb25zID0gbGFiZWwuY29udGV4dEluc3RydWN0aW9ucztcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb250ZXh0SW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29udGV4dEluc3RydWN0aW9uc1tpICsgMV0pKSB7XG4gICAgICAgICAgICBjb250ZXh0W2NvbnRleHRJbnN0cnVjdGlvbnNbaV1dLmFwcGx5KGNvbnRleHQsIGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHRbY29udGV4dEluc3RydWN0aW9uc1tpXV0gPSBjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhbnZhcy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL0NvbXBvc2l0ZVxuICovXG5pbXBvcnQgTWFwUmVuZGVyZXIgZnJvbSAnLi9NYXAuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50IGZyb20gJy4uL3JlbmRlci9FdmVudC5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4uL3JlbmRlci9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgY2hlY2tlZEZvbnRzIH0gZnJvbSAnLi4vcmVuZGVyL2NhbnZhcy5qcyc7XG5pbXBvcnQgeyBpblZpZXcgfSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgcmVwbGFjZUNoaWxkcmVuIH0gZnJvbSAnLi4vZG9tLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ2FudmFzIG1hcCByZW5kZXJlci5cbiAqIEBhcGlcbiAqL1xudmFyIENvbXBvc2l0ZU1hcFJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb21wb3NpdGVNYXBSZW5kZXJlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbXBvc2l0ZU1hcFJlbmRlcmVyKG1hcCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtYXApIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZvbnRDaGFuZ2VMaXN0ZW5lcktleV8gPSBsaXN0ZW4oY2hlY2tlZEZvbnRzLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIG1hcC5yZWRyYXdUZXh0LmJpbmQobWFwKSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTERpdkVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgc3R5bGUgPSBfdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBzdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBzdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLmNsYXNzTmFtZSA9IENMQVNTX1VOU0VMRUNUQUJMRSArICcgb2wtbGF5ZXJzJztcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IG1hcC5nZXRWaWV3cG9ydCgpO1xuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKF90aGlzLmVsZW1lbnRfLCBjb250YWluZXIuZmlyc3RDaGlsZCB8fCBudWxsKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxIVE1MRWxlbWVudD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jaGlsZHJlbl8gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwYXRjaFJlbmRlckV2ZW50ID0gZnVuY3Rpb24gKHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIGlmIChtYXAuaGFzTGlzdGVuZXIodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBldmVudF8xID0gbmV3IFJlbmRlckV2ZW50KHR5cGUsIHVuZGVmaW5lZCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgICAgICBtYXAuZGlzcGF0Y2hFdmVudChldmVudF8xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmZvbnRDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgICAgICB0aGlzLmVsZW1lbnRfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIuXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50Xy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlTWF0cmljZXMyRChmcmFtZVN0YXRlKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5QUkVDT01QT1NFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSBmcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEuekluZGV4IC0gYi56SW5kZXg7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5fLmxlbmd0aCA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vbGF5ZXIvQmFzZVZlY3Rvci5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBkZWNsdXR0ZXJMYXllcnMgPSBbXTtcbiAgICAgICAgdmFyIHByZXZpb3VzRWxlbWVudCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBsYXllclN0YXRlc0FycmF5W2ldO1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS5sYXllckluZGV4ID0gaTtcbiAgICAgICAgICAgIGlmICghaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgfHxcbiAgICAgICAgICAgICAgICAobGF5ZXJTdGF0ZS5zb3VyY2VTdGF0ZSAhPSBTb3VyY2VTdGF0ZS5SRUFEWSAmJlxuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlLnNvdXJjZVN0YXRlICE9IFNvdXJjZVN0YXRlLlVOREVGSU5FRCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGxheWVyLnJlbmRlcihmcmFtZVN0YXRlLCBwcmV2aW91c0VsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZWxlbWVudCAhPT0gcHJldmlvdXNFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbl8ucHVzaChlbGVtZW50KTtcbiAgICAgICAgICAgICAgICBwcmV2aW91c0VsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCdnZXREZWNsdXR0ZXInIGluIGxheWVyKSB7XG4gICAgICAgICAgICAgICAgZGVjbHV0dGVyTGF5ZXJzLnB1c2goXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9sYXllci9CYXNlVmVjdG9yLmpzXCIpLmRlZmF1bHR9ICovIChsYXllcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSBkZWNsdXR0ZXJMYXllcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIGRlY2x1dHRlckxheWVyc1tpXS5yZW5kZXJEZWNsdXR0ZXIoZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmVwbGFjZUNoaWxkcmVuKHRoaXMuZWxlbWVudF8sIHRoaXMuY2hpbGRyZW5fKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5QT1NUQ09NUE9TRSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZFZpc2libGVfKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRfLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2hlZHVsZUV4cGlyZUljb25DYWNoZShmcmFtZVN0YXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlXCIpLmRlZmF1bHQ+LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFjayBMYXllclxuICAgICAqICAgICBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi4vc291cmNlL1NvdXJjZVwiKS5kZWZhdWx0Pik6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKSB7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICB2YXIgbnVtTGF5ZXJzID0gbGF5ZXJTdGF0ZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gbnVtTGF5ZXJzIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNbaV07XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkgJiZcbiAgICAgICAgICAgICAgICBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSAmJlxuICAgICAgICAgICAgICAgIGxheWVyRmlsdGVyKGxheWVyKSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXllclJlbmRlcmVyID0gbGF5ZXIuZ2V0UmVuZGVyZXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGxheWVyUmVuZGVyZXIuZ2V0RGF0YUF0UGl4ZWwocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKGxheWVyLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIENvbXBvc2l0ZU1hcFJlbmRlcmVyO1xufShNYXBSZW5kZXJlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ29tcG9zaXRlTWFwUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db21wb3NpdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0NvbGxlY3Rpb25FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL0NvbGxlY3Rpb24uQ29sbGVjdGlvbkV2ZW50I2FkZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBREQ6ICdhZGQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjcmVtb3ZlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJFTU9WRTogJ3JlbW92ZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29sbGVjdGlvbkV2ZW50VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0NvbGxlY3Rpb25cbiAqL1xuaW1wb3J0IEFzc2VydGlvbkVycm9yIGZyb20gJy4vQXNzZXJ0aW9uRXJyb3IuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gICAgTEVOR1RIOiAnbGVuZ3RoJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG52YXIgQ29sbGVjdGlvbkV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb2xsZWN0aW9uRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb25FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdF9lbGVtZW50XSBFbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2luZGV4XSBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uRXZlbnQodHlwZSwgb3B0X2VsZW1lbnQsIG9wdF9pbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVsZW1lbnQgdGhhdCBpcyBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50ID0gb3B0X2VsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW5kZXggPSBvcHRfaW5kZXg7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIENvbGxlY3Rpb25FdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IENvbGxlY3Rpb25FdmVudCB9O1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmxlbmd0aCcsIGltcG9ydChcIi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPCdhZGQnfCdyZW1vdmUnLCBDb2xsZWN0aW9uRXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmxlbmd0aCd8J2FkZCd8J3JlbW92ZScsUmV0dXJuPn0gQ29sbGVjdGlvbk9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdW5pcXVlPWZhbHNlXSBEaXNhbGxvdyB0aGUgc2FtZSBpdGVtIGZyb20gYmVpbmcgYWRkZWQgdG9cbiAqIHRoZSBjb2xsZWN0aW9uIHR3aWNlLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFuIGV4cGFuZGVkIHZlcnNpb24gb2Ygc3RhbmRhcmQgSlMgQXJyYXksIGFkZGluZyBjb252ZW5pZW5jZSBtZXRob2RzIGZvclxuICogbWFuaXB1bGF0aW9uLiBBZGQgYW5kIHJlbW92ZSBjaGFuZ2VzIHRvIHRoZSBDb2xsZWN0aW9uIHRyaWdnZXIgYSBDb2xsZWN0aW9uXG4gKiBldmVudC4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3QgY292ZXIgY2hhbmdlcyB0byB0aGUgb2JqZWN0cyBfd2l0aGluXyB0aGVcbiAqIENvbGxlY3Rpb247IHRoZXkgdHJpZ2dlciBldmVudHMgb24gdGhlIGFwcHJvcHJpYXRlIG9iamVjdCwgbm90IG9uIHRoZVxuICogQ29sbGVjdGlvbiBhcyBhIHdob2xlLlxuICpcbiAqIEBmaXJlcyBDb2xsZWN0aW9uRXZlbnRcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQGFwaVxuICovXG52YXIgQ29sbGVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29sbGVjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PFQ+fSBbb3B0X2FycmF5XSBBcnJheS5cbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gQ29sbGVjdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24ob3B0X2FycmF5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb25PblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmlxdWVfID0gISFvcHRpb25zLnVuaXF1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8VD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hcnJheV8gPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgaWYgKF90aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IF90aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXNzZXJ0VW5pcXVlXyhfdGhpcy5hcnJheV9baV0sIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF90aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGVsZW1lbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5nZXRMZW5ndGgoKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucG9wKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBlbGVtZW50cyB0byB0aGUgY29sbGVjdGlvbi4gIFRoaXMgcHVzaGVzIGVhY2ggaXRlbSBpbiB0aGUgcHJvdmlkZWQgYXJyYXlcbiAgICAgKiB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnIgQXJyYXkuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxUPn0gVGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2goYXJyW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgb3ZlciBlYWNoIGVsZW1lbnQsIGNhbGxpbmcgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCBBcnJheTxUPik6ICp9IGYgVGhlIGZ1bmN0aW9uIHRvIGNhbGxcbiAgICAgKiAgICAgZm9yIGV2ZXJ5IGVsZW1lbnQuIFRoaXMgZnVuY3Rpb24gdGFrZXMgMyBhcmd1bWVudHMgKHRoZSBlbGVtZW50LCB0aGVcbiAgICAgKiAgICAgaW5kZXggYW5kIHRoZSBhcnJheSkuIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXlfO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBmKGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgdW5kZXJseWluZyBBcnJheSBvYmplY3QuIFdhcm5pbmc6IGlmIHRoZSBhcnJheVxuICAgICAqIGlzIG11dGF0ZWQsIG5vIGV2ZW50cyB3aWxsIGJlIGRpc3BhdGNoZWQgYnkgdGhlIGNvbGxlY3Rpb24sIGFuZCB0aGVcbiAgICAgKiBjb2xsZWN0aW9uJ3MgXCJsZW5ndGhcIiBwcm9wZXJ0eSB3b24ndCBiZSBpbiBzeW5jIHdpdGggdGhlIGFjdHVhbCBsZW5ndGhcbiAgICAgKiBvZiB0aGUgYXJyYXkuXG4gICAgICogQHJldHVybiB7IUFycmF5PFQ+fSBBcnJheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0QXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmdldExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KFByb3BlcnR5LkxFTkdUSCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5pbnNlcnRBdCA9IGZ1bmN0aW9uIChpbmRleCwgZWxlbSkge1xuICAgICAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAwLCBlbGVtKTtcbiAgICAgICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtLCBpbmRleCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gYW5kIHJldHVybiBpdC5cbiAgICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQodGhpcy5nZXRMZW5ndGgoKSAtIDEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5zZXJ0IHRoZSBwcm92aWRlZCBlbGVtZW50IGF0IHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgbGVuZ3RoIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRBdChuLCBlbGVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBlbGVtZW50IG9yIHVuZGVmaW5lZCBpZiBub25lIGZvdW5kLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXIgYXJyID0gdGhpcy5hcnJheV87XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAoYXJyW2ldID09PSBlbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXggYW5kIHJldHVybiBpdC5cbiAgICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gZG9lcyBub3QgY29udGFpbiB0aGlzIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVmFsdWUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgICAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYsIGluZGV4KSk7XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnNldEF0ID0gZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICAgIHZhciBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgaWYgKGluZGV4IDwgbikge1xuICAgICAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICAgICAgICAgIHRoaXMuYXJyYXlfW2luZGV4XSA9IGVsZW07XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgcHJldiwgaW5kZXgpKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtLCBpbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IG47IGogPCBpbmRleDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRBdChqLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnNlcnRBdChpbmRleCwgZWxlbSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlTGVuZ3RoXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuTEVOR1RILCB0aGlzLmFycmF5Xy5sZW5ndGgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9leGNlcHRdIE9wdGlvbmFsIGluZGV4IHRvIGlnbm9yZS5cbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5hc3NlcnRVbmlxdWVfID0gZnVuY3Rpb24gKGVsZW0sIG9wdF9leGNlcHQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5hcnJheV8ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJyYXlfW2ldID09PSBlbGVtICYmIGkgIT09IG9wdF9leGNlcHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoNTgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQ29sbGVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbGxlY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9Hcm91cFxuICovXG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4uL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4uL3NvdXJjZS9TdGF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiwgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYgeydhZGRsYXllcid8J3JlbW92ZWxheWVyJ30gRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBsYXllciBncm91cCB0cmlnZ2VycyAnYWRkbGF5ZXInIGFuZCAncmVtb3ZlbGF5ZXInIGV2ZW50cyB3aGVuIGxheWVycyBhcmUgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tXG4gKiB0aGUgZ3JvdXAgb3Igb25lIG9mIGl0cyBjaGlsZCBncm91cHMuICBXaGVuIGEgbGF5ZXIgZ3JvdXAgaXMgYWRkZWQgdG8gb3IgcmVtb3ZlZCBmcm9tIGFub3RoZXIgbGF5ZXIgZ3JvdXAsXG4gKiBhIHNpbmdsZSBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCAoaW5zdGVhZCBvZiBvbmUgcGVyIGxheWVyIGluIHRoZSBncm91cCBhZGRlZCBvciByZW1vdmVkKS5cbiAqL1xudmFyIEdyb3VwRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEdyb3VwRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFdmVudFR5cGV9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtCYXNlTGF5ZXJ9IGxheWVyIFRoZSBsYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBHcm91cEV2ZW50KHR5cGUsIGxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYWRkZWQgb3IgcmVtb3ZlZCBsYXllci5cbiAgICAgICAgICogQHR5cGUge0Jhc2VMYXllcn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5ZXIgPSBsYXllcjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gR3JvdXBFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IEdyb3VwRXZlbnQgfTtcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAgICdjaGFuZ2U6bGF5ZXJzJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL0Jhc2VcIikuQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc3wnY2hhbmdlOmxheWVycycsIFJldHVybj59IEdyb3VwT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fGltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59IFtsYXllcnNdIENoaWxkIGxheWVycy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBMQVlFUlM6ICdsYXllcnMnLFxufTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gb2YgbGF5ZXJzIHRoYXQgYXJlIGhhbmRsZWQgdG9nZXRoZXIuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIHRyaWdnZXJlZCB3aGVuIHRoZSBncm91cC9Db2xsZWN0aW9uIGNoYW5nZXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgTGF5ZXJHcm91cCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTGF5ZXJHcm91cCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gTGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMYXllckdyb3VwKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBiYXNlT3B0aW9ucyA9IC8qKiBAdHlwZSB7T3B0aW9uc30gKi8gKGFzc2lnbih7fSwgb3B0aW9ucykpO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMubGF5ZXJzO1xuICAgICAgICB2YXIgbGF5ZXJzID0gb3B0aW9ucy5sYXllcnM7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dyb3VwT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7R3JvdXBPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dyb3VwT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyc0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcktleXNfID0ge307XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LkxBWUVSUywgX3RoaXMuaGFuZGxlTGF5ZXJzQ2hhbmdlZF8pO1xuICAgICAgICBpZiAobGF5ZXJzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsYXllcnMpKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXJzID0gbmV3IENvbGxlY3Rpb24obGF5ZXJzLnNsaWNlKCksIHsgdW5pcXVlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8obGF5ZXJzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsIDQzKTsgLy8gRXhwZWN0ZWQgYGxheWVyc2AgdG8gYmUgYW4gYXJyYXkgb3IgYSBgQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKHVuZGVmaW5lZCwgeyB1bmlxdWU6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0TGF5ZXJzKGxheWVycyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllckNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllcnMoKTtcbiAgICAgICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKGxheWVycywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIHRoaXMuaGFuZGxlTGF5ZXJzQWRkXywgdGhpcyksIGxpc3RlbihsYXllcnMsIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCB0aGlzLmhhbmRsZUxheWVyc1JlbW92ZV8sIHRoaXMpKTtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5saXN0ZW5lcktleXNfKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19baWRdLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXIodGhpcy5saXN0ZW5lcktleXNfKTtcbiAgICAgICAgdmFyIGxheWVyc0FycmF5ID0gbGF5ZXJzLmdldEFycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyc0FycmF5W2ldO1xuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckxheWVyTGlzdGVuZXJzXyhsYXllcik7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ2FkZGxheWVyJywgbGF5ZXIpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QmFzZUxheWVyfSBsYXllciBUaGUgbGF5ZXIuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUucmVnaXN0ZXJMYXllckxpc3RlbmVyc18gPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgdmFyIGxpc3RlbmVyS2V5cyA9IFtcbiAgICAgICAgICAgIGxpc3RlbihsYXllciwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKGxheWVyIGluc3RhbmNlb2YgTGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgbGlzdGVuZXJLZXlzLnB1c2gobGlzdGVuKGxheWVyLCAnYWRkbGF5ZXInLCB0aGlzLmhhbmRsZUxheWVyR3JvdXBBZGRfLCB0aGlzKSwgbGlzdGVuKGxheWVyLCAncmVtb3ZlbGF5ZXInLCB0aGlzLmhhbmRsZUxheWVyR3JvdXBSZW1vdmVfLCB0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2dldFVpZChsYXllcildID0gbGlzdGVuZXJLZXlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtHcm91cEV2ZW50fSBldmVudCBUaGUgbGF5ZXIgZ3JvdXAgZXZlbnQuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJHcm91cEFkZF8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBHcm91cEV2ZW50KCdhZGRsYXllcicsIGV2ZW50LmxheWVyKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dyb3VwRXZlbnR9IGV2ZW50IFRoZSBsYXllciBncm91cCBldmVudC5cbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllckdyb3VwUmVtb3ZlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ3JlbW92ZWxheWVyJywgZXZlbnQubGF5ZXIpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGNvbGxlY3Rpb25FdmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNBZGRfID0gZnVuY3Rpb24gKGNvbGxlY3Rpb25FdmVudCkge1xuICAgICAgICB2YXIgbGF5ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0fSAqLyAoY29sbGVjdGlvbkV2ZW50LmVsZW1lbnQpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyTGF5ZXJMaXN0ZW5lcnNfKGxheWVyKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBHcm91cEV2ZW50KCdhZGRsYXllcicsIGxheWVyKSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc1JlbW92ZV8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9ICovIChjb2xsZWN0aW9uRXZlbnQuZWxlbWVudCk7XG4gICAgICAgIHZhciBrZXkgPSBnZXRVaWQobGF5ZXIpO1xuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XS5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcktleXNfW2tleV07XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR3JvdXBFdmVudCgncmVtb3ZlbGF5ZXInLCBsYXllcikpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbiBjb2xsZWN0aW9ufSBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyIGxheWVyc31cbiAgICAgKiBpbiB0aGlzIGdyb3VwLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBDb2xsZWN0aW9uIG9mXG4gICAgICogICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2UgbGF5ZXJzfSB0aGF0IGFyZSBwYXJ0IG9mIHRoaXMgZ3JvdXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkxBWUVSUykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAgICogaW4gdGhpcyBncm91cC5cbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBsYXllcnMgQ29sbGVjdGlvbiBvZlxuICAgICAqICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLnNldExheWVycyA9IGZ1bmN0aW9uIChsYXllcnMpIHtcbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLmdldExheWVycygpO1xuICAgICAgICBpZiAoY29sbGVjdGlvbikge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRMYXllcnMgPSBjb2xsZWN0aW9uLmdldEFycmF5KCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjdXJyZW50TGF5ZXJzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEdyb3VwRXZlbnQoJ3JlbW92ZWxheWVyJywgY3VycmVudExheWVyc1tpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkxBWUVSUywgbGF5ZXJzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gW29wdF9hcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgIT09IHVuZGVmaW5lZCA/IG9wdF9hcnJheSA6IFtdO1xuICAgICAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5nZXRMYXllcnNBcnJheShhcnJheSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyIHN0YXRlcyBsaXN0IGFuZCB1c2UgdGhpcyBncm91cHMgei1pbmRleCBhcyB0aGUgZGVmYXVsdFxuICAgICAqIGZvciBhbGwgbGF5ZXJzIGluIHRoaXMgYW5kIG5lc3RlZCBncm91cHMsIGlmIGl0IGlzIHVuc2V0IGF0IHRoaXMgcG9pbnQuXG4gICAgICogSWYgb3B0X3N0YXRlcyBpcyBub3QgcHJvdmlkZWQgYW5kIHRoaXMgZ3JvdXAncyB6LWluZGV4IGlzIHVuZGVmaW5lZFxuICAgICAqIDAgaXMgdXNlZCBhIHRoZSBkZWZhdWx0IHotaW5kZXguXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gW29wdF9zdGF0ZXNdIE9wdGlvbmFsIGxpc3RcbiAgICAgKiBvZiBsYXllciBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIChvcHRfc3RhdGVzKSB7XG4gICAgICAgIHZhciBzdGF0ZXMgPSBvcHRfc3RhdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfc3RhdGVzIDogW107XG4gICAgICAgIHZhciBwb3MgPSBzdGF0ZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5nZXRMYXllclN0YXRlc0FycmF5KHN0YXRlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgb3duTGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpO1xuICAgICAgICB2YXIgZGVmYXVsdFpJbmRleCA9IG93bkxheWVyU3RhdGUuekluZGV4O1xuICAgICAgICBpZiAoIW9wdF9zdGF0ZXMgJiYgb3duTGF5ZXJTdGF0ZS56SW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVmYXVsdFpJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IHBvcywgaWkgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBzdGF0ZXNbaV07XG4gICAgICAgICAgICBsYXllclN0YXRlLm9wYWNpdHkgKj0gb3duTGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS52aXNpYmxlID0gbGF5ZXJTdGF0ZS52aXNpYmxlICYmIG93bkxheWVyU3RhdGUudmlzaWJsZTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbiA9IE1hdGgubWluKGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbiwgb3duTGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiA9IE1hdGgubWF4KGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiwgb3duTGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWluWm9vbSA9IE1hdGgubWF4KGxheWVyU3RhdGUubWluWm9vbSwgb3duTGF5ZXJTdGF0ZS5taW5ab29tKTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWF4Wm9vbSA9IE1hdGgubWluKGxheWVyU3RhdGUubWF4Wm9vbSwgb3duTGF5ZXJTdGF0ZS5tYXhab29tKTtcbiAgICAgICAgICAgIGlmIChvd25MYXllclN0YXRlLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24obGF5ZXJTdGF0ZS5leHRlbnQsIG93bkxheWVyU3RhdGUuZXh0ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gb3duTGF5ZXJTdGF0ZS5leHRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxheWVyU3RhdGUuekluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsYXllclN0YXRlLnpJbmRleCA9IGRlZmF1bHRaSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2Ugc3RhdGUuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTb3VyY2VTdGF0ZS5SRUFEWTtcbiAgICB9O1xuICAgIHJldHVybiBMYXllckdyb3VwO1xufShCYXNlTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IExheWVyR3JvdXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Hcm91cC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcEV2ZW50XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgZXZlbnQuXG4gKi9cbnZhciBNYXBFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gW29wdF9mcmFtZVN0YXRlXSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBFdmVudCh0eXBlLCBtYXAsIG9wdF9mcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIHdoZXJlIHRoZSBldmVudCBvY2N1cnJlZC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcCA9IG1hcDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBmcmFtZSBzdGF0ZSBhdCB0aGUgdGltZSBvZiB0aGUgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVTdGF0ZSA9IG9wdF9mcmFtZVN0YXRlICE9PSB1bmRlZmluZWQgPyBvcHRfZnJhbWVTdGF0ZSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE1hcEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBFdmVudC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFxuICovXG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBicm93c2VyIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5QbHVnZ2FibGVNYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBicm93c2VyIGV2ZW50LlxuICogQHRlbXBsYXRlIHtVSUV2ZW50fSBFVkVOVFxuICovXG52YXIgTWFwQnJvd3NlckV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBCcm93c2VyRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQHBhcmFtIHtFVkVOVH0gb3JpZ2luYWxFdmVudCBPcmlnaW5hbCBldmVudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfZHJhZ2dpbmddIElzIHRoZSBtYXAgY3VycmVudGx5IGJlaW5nIGRyYWdnZWQ/XG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gW29wdF9mcmFtZVN0YXRlXSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnQodHlwZSwgbWFwLCBvcmlnaW5hbEV2ZW50LCBvcHRfZHJhZ2dpbmcsIG9wdF9mcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUsIG1hcCwgb3B0X2ZyYW1lU3RhdGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtFVkVOVH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luYWxFdmVudCA9IG9yaWdpbmFsRXZlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIHBpeGVsIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIGlmIHRoZSBtYXAgaXMgY3VycmVudGx5IGJlaW5nIGRyYWdnZWQuIE9ubHkgc2V0IGZvclxuICAgICAgICAgKiBgUE9JTlRFUkRSQUdgIGFuZCBgUE9JTlRFUk1PVkVgIGV2ZW50cy4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ2dpbmcgPSBvcHRfZHJhZ2dpbmcgIT09IHVuZGVmaW5lZCA/IG9wdF9kcmFnZ2luZyA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLCBcInBpeGVsXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGl4ZWxfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5waXhlbF8gPSB0aGlzLm1hcC5nZXRFdmVudFBpeGVsKHRoaXMub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waXhlbF87XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgICAgICB0aGlzLnBpeGVsXyA9IHBpeGVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUsIFwiY29vcmRpbmF0ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29vcmRpbmF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LiAgVGhpcyB3aWxsIGJlIGluIHRoZSB1c2VyXG4gICAgICAgICAqIHByb2plY3Rpb24gaWYgb25lIGlzIHNldC4gIE90aGVyd2lzZSBpdCB3aWxsIGJlIGluIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29vcmRpbmF0ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVfID0gdGhpcy5tYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLnBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvb3JkaW5hdGVfO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVfID0gY29vcmRpbmF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIHRoZSBkZWZhdWx0IGJyb3dzZXIgYWN0aW9uLlxuICAgICAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvZXZlbnQucHJldmVudERlZmF1bHQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucHJldmVudERlZmF1bHQuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCdwcmV2ZW50RGVmYXVsdCcgaW4gdGhpcy5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgICAgICAvKiogQHR5cGUge1VJRXZlbnR9ICovICh0aGlzLm9yaWdpbmFsRXZlbnQpLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIGZ1cnRoZXIgcHJvcGFnYXRpb24gb2YgdGhlIGN1cnJlbnQgZXZlbnQuXG4gICAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5zdG9wUHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoJ3N0b3BQcm9wYWdhdGlvbicgaW4gdGhpcy5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgICAgICAvKiogQHR5cGUge1VJRXZlbnR9ICovICh0aGlzLm9yaWdpbmFsRXZlbnQpLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWFwQnJvd3NlckV2ZW50O1xufShNYXBFdmVudCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRUeXBlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBBIHRydWUgc2luZ2xlIGNsaWNrIHdpdGggbm8gZHJhZ2dpbmcgYW5kIG5vIGRvdWJsZSBjbGljay4gTm90ZSB0aGF0IHRoaXNcbiAgICAgKiBldmVudCBpcyBkZWxheWVkIGJ5IDI1MCBtcyB0byBlbnN1cmUgdGhhdCBpdCBpcyBub3QgYSBkb3VibGUgY2xpY2suXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3NpbmdsZWNsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNJTkdMRUNMSUNLOiAnc2luZ2xlY2xpY2snLFxuICAgIC8qKlxuICAgICAqIEEgY2xpY2sgd2l0aCBubyBkcmFnZ2luZy4gQSBkb3VibGUgY2xpY2sgd2lsbCBmaXJlIHR3byBvZiB0aGlzLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNjbGlja1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDTElDSzogRXZlbnRUeXBlLkNMSUNLLFxuICAgIC8qKlxuICAgICAqIEEgdHJ1ZSBkb3VibGUgY2xpY2ssIHdpdGggbm8gZHJhZ2dpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2RibGNsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIERCTENMSUNLOiBFdmVudFR5cGUuREJMQ0xJQ0ssXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIGRyYWdnZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJkcmFnXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPSU5URVJEUkFHOiAncG9pbnRlcmRyYWcnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBtb3ZlZC4gTm90ZSB0aGF0IG9uIHRvdWNoIGRldmljZXMgdGhpcyBpc1xuICAgICAqIHRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgaXMgcGFubmVkLCBzbyBpcyBub3QgdGhlIHNhbWUgYXMgbW91c2Vtb3ZlLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNwb2ludGVybW92ZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT0lOVEVSTU9WRTogJ3BvaW50ZXJtb3ZlJyxcbiAgICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICAgIFBPSU5URVJPVkVSOiAncG9pbnRlcm92ZXInLFxuICAgIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICAgIFBPSU5URVJMRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG4gICAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnLFxufTtcbi8qKipcbiAqIEB0eXBlZGVmIHsnc2luZ2xlY2xpY2snfCdjbGljayd8J2RibGNsaWNrJ3wncG9pbnRlcmRyYWcnfCdwb2ludGVybW92ZSd9IFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQT0lOVEVSTU9WRTogJ3BvaW50ZXJtb3ZlJyxcbiAgICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICAgIFBPSU5URVJPVkVSOiAncG9pbnRlcm92ZXInLFxuICAgIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICAgIFBPSU5URVJMRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG4gICAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlclxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgeyBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG52YXIgTWFwQnJvd3NlckV2ZW50SGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwQnJvd3NlckV2ZW50SGFuZGxlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBUaGUgbWFwIHdpdGggdGhlIHZpZXdwb3J0IHRvIGxpc3RlbiB0byBldmVudHMgb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlXSBUaGUgbWluaW1hbCBkaXN0YW5jZSB0aGUgcG9pbnRlciBtdXN0IHRyYXZlbCB0byB0cmlnZ2VyIGEgbW92ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKG1hcCwgbW92ZVRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtYXApIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIHRoZSBlbGVtZW50IHRoYXQgd2Ugd2lsbCBsaXN0ZW4gdG8gdGhlIHJlYWwgZXZlbnRzIG9uLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xpY2tUaW1lb3V0SWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW11bGF0ZSBkYmxjbGljayBhbmQgc2luZ2xlY2xpY2suIFdpbGwgYmUgdHJ1ZSB3aGVuIG9ubHkgb25lIHBvaW50ZXIgaXMgYWN0aXZlLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVtdWxhdGVDbGlja3NfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG1vdmVUb2xlcmFuY2UgPT09IHVuZGVmaW5lZCA/IDEgOiBtb3ZlVG9sZXJhbmNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1vc3QgcmVjZW50IFwiZG93blwiIHR5cGUgZXZlbnQgKG9yIG51bGwgaWYgbm9uZSBoYXZlIG9jY3VycmVkKS5cbiAgICAgICAgICogU2V0IG9uIHBvaW50ZXJkb3duLlxuICAgICAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZG93bl8gPSBudWxsO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLm1hcF8uZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hY3RpdmVQb2ludGVyc18gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8bnVtYmVyLCBib29sZWFuPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrZWRUb3VjaGVzXyA9IHt9O1xuICAgICAgICBfdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfID0gbGlzdGVuKGVsZW1lbnQsIFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sIF90aGlzLmhhbmRsZVBvaW50ZXJEb3duXywgX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge1BvaW50ZXJFdmVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBsaXN0ZW4oZWxlbWVudCwgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSwgX3RoaXMucmVsYXlFdmVudF8sIF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8gPSBfdGhpcy5oYW5kbGVUb3VjaE1vdmVfLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5UT1VDSE1PVkUsIF90aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXywgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgPyB7IHBhc3NpdmU6IGZhbHNlIH0gOiBmYWxzZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5lbXVsYXRlQ2xpY2tfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tUaW1lb3V0SWRfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGRvdWJsZS1jbGlja1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lb3V0SWRfKTtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBjbGlja1xuICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgLyoqIEB0aGlzIHtNYXBCcm93c2VyRXZlbnRIYW5kbGVyfSAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5TSU5HTEVDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDI1MCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEtlZXBzIHRyYWNrIG9uIGhvdyBtYW55IHBvaW50ZXJzIGFyZSBjdXJyZW50bHkgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS51cGRhdGVBY3RpdmVQb2ludGVyc18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHZhciBldmVudCA9IHBvaW50ZXJFdmVudDtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAgfHxcbiAgICAgICAgICAgIGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tlZFRvdWNoZXNfW2V2ZW50LnBvaW50ZXJJZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlUG9pbnRlcnNfID0gT2JqZWN0LmtleXModGhpcy50cmFja2VkVG91Y2hlc18pLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlclVwXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAvLyBXZSBlbXVsYXRlIGNsaWNrIGV2ZW50cyBvbiBsZWZ0IG1vdXNlIGJ1dHRvbiBjbGljaywgdG91Y2ggY29udGFjdCwgYW5kIHBlblxuICAgICAgICAvLyBjb250YWN0LiBpc01vdXNlQWN0aW9uQnV0dG9uIHJldHVybnMgdHJ1ZSBpbiB0aGVzZSBjYXNlcyAoZXZ0LmJ1dHRvbiBpcyBzZXRcbiAgICAgICAgLy8gdG8gMCkuXG4gICAgICAgIC8vIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyNidXR0b24tc3RhdGVzXG4gICAgICAgIC8vIFdlIG9ubHkgZmlyZSBjbGljaywgc2luZ2xlY2xpY2ssIGFuZCBkb3VibGVjbGljayBpZiBub2JvZHkgaGFzIGNhbGxlZFxuICAgICAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLlxuICAgICAgICBpZiAodGhpcy5lbXVsYXRlQ2xpY2tzXyAmJlxuICAgICAgICAgICAgIW5ld0V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgJiZcbiAgICAgICAgICAgICF0aGlzLmRyYWdnaW5nXyAmJlxuICAgICAgICAgICAgdGhpcy5pc01vdXNlQWN0aW9uQnV0dG9uXyhwb2ludGVyRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmVtdWxhdGVDbGlja18odGhpcy5kb3duXyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlUG9pbnRlcnNfID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kb3duXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiB3YXMgcHJlc3NlZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmlzTW91c2VBY3Rpb25CdXR0b25fID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlckRvd25fID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB0aGlzLmVtdWxhdGVDbGlja3NfID0gdGhpcy5hY3RpdmVQb2ludGVyc18gPT09IDA7XG4gICAgICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAvLyBTdG9yZSBhIGNvcHkgb2YgdGhlIGRvd24gZXZlbnRcbiAgICAgICAgdGhpcy5kb3duXyA9IC8qKiBAdHlwZSB7UG9pbnRlckV2ZW50fSAqLyAoe30pO1xuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBvaW50ZXJFdmVudFtwcm9wZXJ0eV07XG4gICAgICAgICAgICB0aGlzLmRvd25fW3Byb3BlcnR5XSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IFZPSUQgOiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLm1hcF8uZ2V0T3duZXJEb2N1bWVudCgpO1xuICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbihkb2MsIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUsIHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfLCB0aGlzKSwgbGlzdGVuKGRvYywgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsIHRoaXMuaGFuZGxlUG9pbnRlclVwXywgdGhpcyksIFxuICAgICAgICAgICAgLyogTm90ZSB0aGF0IHRoZSBsaXN0ZW5lciBmb3IgYHBvaW50ZXJjYW5jZWwgaXMgc2V0IHVwIG9uXG4gICAgICAgICAgICAgKiBgcG9pbnRlckV2ZW50SGFuZGxlcl9gIGFuZCBub3QgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGxpa2VcbiAgICAgICAgICAgICAqIHRoZSBgcG9pbnRlcnVwYCBhbmQgYHBvaW50ZXJtb3ZlYCBsaXN0ZW5lcnMuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogVGhlIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGUgZm9sbG93aW5nOiBgVG91Y2hTb3VyY2UudmFjdXVtVG91Y2hlc18oKWBcbiAgICAgICAgICAgICAqIGlzc3VlcyBgcG9pbnRlcmNhbmNlbGAgZXZlbnRzLCB3aGVuIHRoZXJlIHdhcyBubyBgdG91Y2hlbmRgIGZvciBhXG4gICAgICAgICAgICAgKiBgdG91Y2hzdGFydGAuIE5vdywgbGV0J3Mgc2F5IGEgZmlyc3QgYHRvdWNoc3RhcnRgIGlzIHJlZ2lzdGVyZWQgb25cbiAgICAgICAgICAgICAqIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AuIFRoZSBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgaXMgc2V0IHVwLlxuICAgICAgICAgICAgICogQnV0IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBkb2Vzbid0IGtub3cgYWJvdXQgdGhlIGZpcnN0XG4gICAgICAgICAgICAgKiBgdG91Y2hzdGFydGAuIElmIHRoZXJlIGlzIG5vIGB0b3VjaGVuZGAgZm9yIHRoZSBgdG91Y2hzdGFydGAsIHdlIGNhblxuICAgICAgICAgICAgICogb25seSByZWNlaXZlIGEgYHRvdWNoY2FuY2VsYCBmcm9tIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AsIGJlY2F1c2UgaXQgaXNcbiAgICAgICAgICAgICAqIG9ubHkgcmVnaXN0ZXJlZCB0aGVyZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGlzdGVuKHRoaXMuZWxlbWVudF8sIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSAmJiB0aGlzLmVsZW1lbnRfLmdldFJvb3ROb2RlKCkgIT09IGRvYykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4odGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlck1vdmVfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICAvLyBCZXR3ZWVuIHBvaW50ZXJkb3duIGFuZCBwb2ludGVydXAsIHBvaW50ZXJtb3ZlIGV2ZW50cyBhcmUgdHJpZ2dlcmVkLlxuICAgICAgICAvLyBUbyBhdm9pZCBhICdmYWxzZScgdG91Y2htb3ZlIGV2ZW50IHRvIGJlIGRpc3BhdGNoZWQsIHdlIHRlc3QgaWYgdGhlIHBvaW50ZXJcbiAgICAgICAgLy8gbW92ZWQgYSBzaWduaWZpY2FudCBkaXN0YW5jZS5cbiAgICAgICAgaWYgKHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsIHRoaXMuZHJhZ2dpbmdfKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyYXAgYW5kIHJlbGF5IGEgcG9pbnRlciBldmVudC4gIE5vdGUgdGhhdCB0aGlzIHJlcXVpcmVzIHRoYXQgdGhlIHR5cGVcbiAgICAgKiBzdHJpbmcgZm9yIHRoZSBNYXBCcm93c2VyRXZlbnQgbWF0Y2hlcyB0aGUgUG9pbnRlckV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5yZWxheUV2ZW50XyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfID0gcG9pbnRlckV2ZW50O1xuICAgICAgICB2YXIgZHJhZ2dpbmcgPSAhISh0aGlzLmRvd25fICYmIHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEJyb3dzZXJFdmVudChwb2ludGVyRXZlbnQudHlwZSwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsIGRyYWdnaW5nKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGbGV4aWJsZSBoYW5kbGluZyBvZiBhIGB0b3VjaC1hY3Rpb246IG5vbmVgIGNzcyBlcXVpdmFsZW50OiBiZWNhdXNlIGNhbGxpbmdcbiAgICAgKiBgcHJldmVudERlZmF1bHQoKWAgb24gYSBgcG9pbnRlcm1vdmVgIGV2ZW50IGRvZXMgbm90IHN0b3AgbmF0aXZlIHBhZ2Ugc2Nyb2xsaW5nXG4gICAgICogYW5kIHpvb21pbmcsIHdlIGFsc28gbGlzdGVuIGZvciBgdG91Y2htb3ZlYCBhbmQgY2FsbCBgcHJldmVudERlZmF1bHQoKWAgb24gaXRcbiAgICAgKiB3aGVuIGFuIGludGVyYWN0aW9uIChjdXJyZW50bHkgYERyYWdQYW5gIGhhbmRsZXMgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVUb3VjaE1vdmVfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIER1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbXBpemVuYmVyZy9lbG0tcGVwL2lzc3Vlcy8yLCBgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfYFxuICAgICAgICAvLyBtYXkgbm90IGJlIGluaXRpYWxpemVkIHlldCB3aGVuIHdlIGdldCBoZXJlIG9uIGEgcGxhdGZvcm0gd2l0aG91dCBuYXRpdmUgcG9pbnRlciBldmVudHMuXG4gICAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfO1xuICAgICAgICBpZiAoKCFvcmlnaW5hbEV2ZW50IHx8IG9yaWdpbmFsRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgJiZcbiAgICAgICAgICAgICh0eXBlb2YgZXZlbnQuY2FuY2VsYWJsZSAhPT0gJ2Jvb2xlYW4nIHx8IGV2ZW50LmNhbmNlbGFibGUgPT09IHRydWUpKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBtb3ZpbmcuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5pc01vdmluZ18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5kcmFnZ2luZ18gfHxcbiAgICAgICAgICAgIE1hdGguYWJzKHBvaW50ZXJFdmVudC5jbGllbnRYIC0gdGhpcy5kb3duXy5jbGllbnRYKSA+XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9sZXJhbmNlXyB8fFxuICAgICAgICAgICAgTWF0aC5hYnMocG9pbnRlckV2ZW50LmNsaWVudFkgLSB0aGlzLmRvd25fLmNsaWVudFkpID4gdGhpcy5tb3ZlVG9sZXJhbmNlXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMucmVsYXllZExpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50Xy5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5UT1VDSE1PVkUsIHRoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfKTtcbiAgICAgICAgaWYgKHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5lbGVtZW50XyA9IG51bGw7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcbn0oVGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBhIG1hcCBmcmFtZSBpcyByZW5kZXJlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I3Bvc3RyZW5kZXJcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9TVFJFTkRFUjogJ3Bvc3RyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgc3RhcnRzIG1vdmluZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I21vdmVzdGFydFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNT1ZFU1RBUlQ6ICdtb3Zlc3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgbWFwIGlzIG1vdmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjbW92ZWVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNT1ZFRU5EOiAnbW92ZWVuZCcsXG59O1xuLyoqKlxuICogQHR5cGVkZWYgeydwb3N0cmVuZGVyJ3wnbW92ZXN0YXJ0J3wnbW92ZWVuZCd9IFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgTEFZRVJHUk9VUDogJ2xheWVyZ3JvdXAnLFxuICAgIFNJWkU6ICdzaXplJyxcbiAgICBUQVJHRVQ6ICd0YXJnZXQnLFxuICAgIFZJRVc6ICd2aWV3Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9Qcmlvcml0eVF1ZXVlXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERST1AgPSBJbmZpbml0eTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJpb3JpdHkgcXVldWUuXG4gKlxuICogVGhlIGltcGxlbWVudGF0aW9uIGlzIGluc3BpcmVkIGZyb20gdGhlIENsb3N1cmUgTGlicmFyeSdzIEhlYXAgY2xhc3MgYW5kXG4gKiBQeXRob24ncyBoZWFwcSBtb2R1bGUuXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9zdHJ1Y3RzL2hlYXAuanNcbiAqIGFuZCBodHRwczovL2hnLnB5dGhvbi5vcmcvY3B5dGhvbi9maWxlLzIuNy9MaWIvaGVhcHEucHkuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIFByaW9yaXR5UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogbnVtYmVyfSBwcmlvcml0eUZ1bmN0aW9uIFByaW9yaXR5IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6IHN0cmluZ30ga2V5RnVuY3Rpb24gS2V5IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUocHJpb3JpdHlGdW5jdGlvbiwga2V5RnVuY3Rpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihUKTogbnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmlvcml0eUZ1bmN0aW9uXyA9IHByaW9yaXR5RnVuY3Rpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IHN0cmluZ31cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2V5RnVuY3Rpb25fID0ga2V5RnVuY3Rpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8VD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVsZW1lbnRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByaW9yaXRpZXNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xdWV1ZWRFbGVtZW50c18gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMucHJpb3JpdGllc18ubGVuZ3RoID0gMDtcbiAgICAgICAgY2xlYXIodGhpcy5xdWV1ZWRFbGVtZW50c18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFuZCByZXR1cm4gdGhlIGhpZ2hlc3QtcHJpb3JpdHkgZWxlbWVudC4gTyhsb2cgTikuXG4gICAgICogQHJldHVybiB7VH0gRWxlbWVudC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzWzBdO1xuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBwcmlvcml0aWVzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50c1swXSA9IGVsZW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgcHJpb3JpdGllc1swXSA9IHByaW9yaXRpZXMucG9wKCk7XG4gICAgICAgICAgICB0aGlzLnNpZnRVcF8oMCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVsZW1lbnRLZXkgPSB0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KTtcbiAgICAgICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW2VsZW1lbnRLZXldO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVucXVldWUgYW4gZWxlbWVudC4gTyhsb2cgTikuXG4gICAgICogQHBhcmFtIHtUfSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgYXNzZXJ0KCEodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c18pLCAzMSk7IC8vIFRyaWVkIHRvIGVucXVldWUgYW4gYGVsZW1lbnRgIHRoYXQgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHF1ZXVlXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHRoaXMucHJpb3JpdHlGdW5jdGlvbl8oZWxlbWVudCk7XG4gICAgICAgIGlmIChwcmlvcml0eSAhPSBEUk9QKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmlvcml0aWVzXy5wdXNoKHByaW9yaXR5KTtcbiAgICAgICAgICAgIHRoaXMucXVldWVkRWxlbWVudHNfW3RoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpXSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNpZnREb3duXygwLCB0aGlzLmVsZW1lbnRzXy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQ291bnQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgbGVmdCBjaGlsZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIGxlZnQgY2hpbGQgZm9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBsZWZ0IGNoaWxkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0TGVmdENoaWxkSW5kZXhfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpbmRleCAqIDIgKyAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcmlnaHQgY2hpbGQgZm9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSByaWdodCBjaGlsZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldFJpZ2h0Q2hpbGRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ICogMiArIDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgcGFyZW50IG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcGFyZW50IGZvci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgcGFyZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0UGFyZW50SW5kZXhfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiAoaW5kZXggLSAxKSA+PiAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSB0aGlzIGEgaGVhcC4gTyhOKS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmhlYXBpZnlfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gKHRoaXMuZWxlbWVudHNfLmxlbmd0aCA+PiAxKSAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB0aGlzLnNpZnRVcF8oaSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPT09IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBrZXkgcXVldWVkLlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzS2V5UXVldWVkID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4ga2V5IGluIHRoaXMucXVldWVkRWxlbWVudHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUfSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgcXVldWVkLlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzUXVldWVkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNLZXlRdWV1ZWQodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBtb3ZlIGRvd24uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5zaWZ0VXBfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBjb3VudCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpbmRleF07XG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuICAgICAgICB2YXIgc3RhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICB3aGlsZSAoaW5kZXggPCBjb3VudCA+PiAxKSB7XG4gICAgICAgICAgICB2YXIgbEluZGV4ID0gdGhpcy5nZXRMZWZ0Q2hpbGRJbmRleF8oaW5kZXgpO1xuICAgICAgICAgICAgdmFyIHJJbmRleCA9IHRoaXMuZ2V0UmlnaHRDaGlsZEluZGV4XyhpbmRleCk7XG4gICAgICAgICAgICB2YXIgc21hbGxlckNoaWxkSW5kZXggPSBySW5kZXggPCBjb3VudCAmJiBwcmlvcml0aWVzW3JJbmRleF0gPCBwcmlvcml0aWVzW2xJbmRleF1cbiAgICAgICAgICAgICAgICA/IHJJbmRleFxuICAgICAgICAgICAgICAgIDogbEluZGV4O1xuICAgICAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudHNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgICAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3NtYWxsZXJDaGlsZEluZGV4XTtcbiAgICAgICAgICAgIGluZGV4ID0gc21hbGxlckNoaWxkSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5zaWZ0RG93bl8oc3RhcnRJbmRleCwgaW5kZXgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXggVGhlIGluZGV4IG9mIHRoZSByb290LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSB1cC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnNpZnREb3duXyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBpbmRleCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdGllc1tpbmRleF07XG4gICAgICAgIHdoaWxlIChpbmRleCA+IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRJbmRleCA9IHRoaXMuZ2V0UGFyZW50SW5kZXhfKGluZGV4KTtcbiAgICAgICAgICAgIGlmIChwcmlvcml0aWVzW3BhcmVudEluZGV4XSA+IHByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudHNbcGFyZW50SW5kZXhdO1xuICAgICAgICAgICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1twYXJlbnRJbmRleF07XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJlbnRJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnQ7XG4gICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5yZXByaW9yaXRpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcmlvcml0eUZ1bmN0aW9uID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uXztcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIG4gPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBlbGVtZW50LCBpLCBwcmlvcml0eTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgcHJpb3JpdHkgPSBwcmlvcml0eUZ1bmN0aW9uKGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHByaW9yaXR5ID09IERST1ApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tpbmRleCsrXSA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHMubGVuZ3RoID0gaW5kZXg7XG4gICAgICAgIHByaW9yaXRpZXMubGVuZ3RoID0gaW5kZXg7XG4gICAgICAgIHRoaXMuaGVhcGlmeV8oKTtcbiAgICB9O1xuICAgIHJldHVybiBQcmlvcml0eVF1ZXVlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFByaW9yaXR5UXVldWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcmlvcml0eVF1ZXVlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVGlsZVF1ZXVlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBQcmlvcml0eVF1ZXVlLCB7IERST1AgfSBmcm9tICcuL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0LCBzdHJpbmcsIGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBudW1iZXIpOiBudW1iZXJ9IFByaW9yaXR5RnVuY3Rpb25cbiAqL1xudmFyIFRpbGVRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZVF1ZXVlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UHJpb3JpdHlGdW5jdGlvbn0gdGlsZVByaW9yaXR5RnVuY3Rpb24gVGlsZSBwcmlvcml0eSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6ID99IHRpbGVDaGFuZ2VDYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgb24gZWFjaCB0aWxlIGNoYW5nZSBldmVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlUXVldWUodGlsZVByaW9yaXR5RnVuY3Rpb24sIHRpbGVDaGFuZ2VDYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBQcmlvcml0eS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGlsZVByaW9yaXR5RnVuY3Rpb24uYXBwbHkobnVsbCwgZWxlbWVudCk7XG4gICAgICAgIH0sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKGVsZW1lbnRbMF0pLmdldEtleSgpO1xuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyA9IF90aGlzLmhhbmRsZVRpbGVDaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oKTogP31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18gPSB0aWxlQ2hhbmdlQ2FsbGJhY2s7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZXNMb2FkaW5nXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlc0xvYWRpbmdLZXlzXyA9IHt9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciBhZGRlZCA9IF9zdXBlci5wcm90b3R5cGUuZW5xdWV1ZS5jYWxsKHRoaXMsIGVsZW1lbnQpO1xuICAgICAgICBpZiAoYWRkZWQpIHtcbiAgICAgICAgICAgIHZhciB0aWxlID0gZWxlbWVudFswXTtcbiAgICAgICAgICAgIHRpbGUuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kSGFuZGxlVGlsZUNoYW5nZV8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZGRlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTnVtYmVyIG9mIHRpbGVzIGxvYWRpbmcuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5nZXRUaWxlc0xvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmhhbmRsZVRpbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5MT0FERUQgfHxcbiAgICAgICAgICAgIHN0YXRlID09PSBUaWxlU3RhdGUuRVJST1IgfHxcbiAgICAgICAgICAgIHN0YXRlID09PSBUaWxlU3RhdGUuRU1QVFkpIHtcbiAgICAgICAgICAgIHRpbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kSGFuZGxlVGlsZUNoYW5nZV8pO1xuICAgICAgICAgICAgdmFyIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgICAgICAgaWYgKHRpbGVLZXkgaW4gdGhpcy50aWxlc0xvYWRpbmdLZXlzXykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldO1xuICAgICAgICAgICAgICAgIC0tdGhpcy50aWxlc0xvYWRpbmdfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUb3RhbExvYWRpbmcgTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZCBzaW11bHRhbmVvdXNseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4TmV3TG9hZHMgTWF4aW11bSBudW1iZXIgb2YgbmV3IHRpbGVzIHRvIGxvYWQuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5sb2FkTW9yZVRpbGVzID0gZnVuY3Rpb24gKG1heFRvdGFsTG9hZGluZywgbWF4TmV3TG9hZHMpIHtcbiAgICAgICAgdmFyIG5ld0xvYWRzID0gMDtcbiAgICAgICAgdmFyIHN0YXRlLCB0aWxlLCB0aWxlS2V5O1xuICAgICAgICB3aGlsZSAodGhpcy50aWxlc0xvYWRpbmdfIDwgbWF4VG90YWxMb2FkaW5nICYmXG4gICAgICAgICAgICBuZXdMb2FkcyA8IG1heE5ld0xvYWRzICYmXG4gICAgICAgICAgICB0aGlzLmdldENvdW50KCkgPiAwKSB7XG4gICAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZGVxdWV1ZSgpWzBdKTtcbiAgICAgICAgICAgIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgICAgICAgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5JRExFICYmICEodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICsrdGhpcy50aWxlc0xvYWRpbmdfO1xuICAgICAgICAgICAgICAgICsrbmV3TG9hZHM7XG4gICAgICAgICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaWxlUXVldWU7XG59KFByaW9yaXR5UXVldWUpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVRdWV1ZTtcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoJy4vUGx1Z2dhYmxlTWFwLmpzJykuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlU291cmNlS2V5IFRpbGUgc291cmNlIGtleS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRpbGVDZW50ZXIgVGlsZSBjZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHByaW9yaXR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGlsZVByaW9yaXR5KGZyYW1lU3RhdGUsIHRpbGUsIHRpbGVTb3VyY2VLZXksIHRpbGVDZW50ZXIsIHRpbGVSZXNvbHV0aW9uKSB7XG4gICAgLy8gRmlsdGVyIG91dCB0aWxlcyBhdCBoaWdoZXIgem9vbSBsZXZlbHMgdGhhbiB0aGUgY3VycmVudCB6b29tIGxldmVsLCBvciB0aGF0XG4gICAgLy8gYXJlIG91dHNpZGUgdGhlIHZpc2libGUgZXh0ZW50LlxuICAgIGlmICghZnJhbWVTdGF0ZSB8fCAhKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgICAgcmV0dXJuIERST1A7XG4gICAgfVxuICAgIGlmICghZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XVt0aWxlLmdldEtleSgpXSkge1xuICAgICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgLy8gUHJpb3JpdGl6ZSB0aGUgaGlnaGVzdCB6b29tIGxldmVsIHRpbGVzIGNsb3Nlc3QgdG8gdGhlIGZvY3VzLlxuICAgIC8vIFRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyBhcmUgcHJpb3JpdGl6ZWQgdXNpbmcgTWF0aC5sb2codGlsZVJlc29sdXRpb24pLlxuICAgIC8vIFdpdGhpbiBhIHpvb20gbGV2ZWwsIHRpbGVzIGFyZSBwcmlvcml0aXplZCBieSB0aGUgZGlzdGFuY2UgaW4gcGl4ZWxzIGJldHdlZW5cbiAgICAvLyB0aGUgY2VudGVyIG9mIHRoZSB0aWxlIGFuZCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydC4gIFRoZSBmYWN0b3Igb2YgNjU1MzZcbiAgICAvLyBtZWFucyB0aGF0IHRoZSBwcmlvcml0aXphdGlvbiBzaG91bGQgYmVoYXZlIGFzIGRlc2lyZWQgZm9yIHRpbGVzIHVwIHRvXG4gICAgLy8gNjU1MzYgKiBNYXRoLmxvZygyKSA9IDQ1NDI2IHBpeGVscyBmcm9tIHRoZSBmb2N1cy5cbiAgICB2YXIgY2VudGVyID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUuY2VudGVyO1xuICAgIHZhciBkZWx0YVggPSB0aWxlQ2VudGVyWzBdIC0gY2VudGVyWzBdO1xuICAgIHZhciBkZWx0YVkgPSB0aWxlQ2VudGVyWzFdIC0gY2VudGVyWzFdO1xuICAgIHJldHVybiAoNjU1MzYgKiBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikgK1xuICAgICAgICBNYXRoLnNxcnQoZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZKSAvIHRpbGVSZXNvbHV0aW9uKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVRdWV1ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc2l6ZVxuICovXG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGEgc2l6ZTogYFt3aWR0aCwgaGVpZ2h0XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gU2l6ZVxuICogQGFwaVxuICovXG4vKipcbiAqIFJldHVybnMgYSBidWZmZXJlZCBzaXplLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIFRoZSBhbW91bnQgYnkgd2hpY2ggdG8gYnVmZmVyLlxuICogQHBhcmFtIHtTaXplfSBbb3B0X3NpemVdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBUaGUgYnVmZmVyZWQgc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihzaXplLCBudW0sIG9wdF9zaXplKSB7XG4gICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3B0X3NpemUgPSBbMCwgMF07XG4gICAgfVxuICAgIG9wdF9zaXplWzBdID0gc2l6ZVswXSArIDIgKiBudW07XG4gICAgb3B0X3NpemVbMV0gPSBzaXplWzFdICsgMiAqIG51bTtcbiAgICByZXR1cm4gb3B0X3NpemU7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgYSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgVGhlIHNpemUgdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNBcmVhKHNpemUpIHtcbiAgICByZXR1cm4gc2l6ZVswXSA+IDAgJiYgc2l6ZVsxXSA+IDA7XG59XG4vKipcbiAqIFJldHVybnMgYSBzaXplIHNjYWxlZCBieSBhIHJhdGlvLiBUaGUgcmVzdWx0IHdpbGwgYmUgYW4gYXJyYXkgb2YgaW50ZWdlcnMuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyBSYXRpby5cbiAqIEBwYXJhbSB7U2l6ZX0gW29wdF9zaXplXSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIHNjYWxlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoc2l6ZSwgcmF0aW8sIG9wdF9zaXplKSB7XG4gICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3B0X3NpemUgPSBbMCwgMF07XG4gICAgfVxuICAgIG9wdF9zaXplWzBdID0gKHNpemVbMF0gKiByYXRpbyArIDAuNSkgfCAwO1xuICAgIG9wdF9zaXplWzFdID0gKHNpemVbMV0gKiByYXRpbyArIDAuNSkgfCAwO1xuICAgIHJldHVybiBvcHRfc2l6ZTtcbn1cbi8qKlxuICogUmV0dXJucyBhbiBgU2l6ZWAgYXJyYXkgZm9yIHRoZSBwYXNzZWQgaW4gbnVtYmVyIChtZWFuaW5nOiBzcXVhcmUpIG9yXG4gKiBgU2l6ZWAgYXJyYXkuXG4gKiAobWVhbmluZzogbm9uLXNxdWFyZSksXG4gKiBAcGFyYW0ge251bWJlcnxTaXplfSBzaXplIFdpZHRoIGFuZCBoZWlnaHQuXG4gKiBAcGFyYW0ge1NpemV9IFtvcHRfc2l6ZV0gT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFNpemUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1NpemUoc2l6ZSwgb3B0X3NpemUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzaXplKSkge1xuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRfc2l6ZSA9IFtzaXplLCBzaXplXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdF9zaXplWzBdID0gc2l6ZTtcbiAgICAgICAgICAgIG9wdF9zaXplWzFdID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0X3NpemU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2l6ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1BsdWdnYWJsZU1hcFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBMYXllciBmcm9tICcuL2xheWVyL0xheWVyLmpzJztcbmltcG9ydCBMYXllckdyb3VwLCB7IEdyb3VwRXZlbnQgfSBmcm9tICcuL2xheWVyL0dyb3VwLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnQgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnQuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudEhhbmRsZXIgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRIYW5kbGVyLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG5pbXBvcnQgTWFwRXZlbnRUeXBlIGZyb20gJy4vTWFwRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBQcm9wZXJ0eSBmcm9tICcuL01hcFByb3BlcnR5LmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnRUeXBlIGZyb20gJy4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVF1ZXVlLCB7IGdldFRpbGVQcmlvcml0eSB9IGZyb20gJy4vVGlsZVF1ZXVlLmpzJztcbmltcG9ydCBWaWV3IGZyb20gJy4vVmlldy5qcyc7XG5pbXBvcnQgVmlld0hpbnQgZnJvbSAnLi9WaWV3SGludC5qcyc7XG5pbXBvcnQgeyBERVZJQ0VfUElYRUxfUkFUSU8sIFBBU1NJVkVfRVZFTlRfTElTVEVORVJTIH0gZnJvbSAnLi9oYXMuanMnO1xuaW1wb3J0IHsgVFJVRSB9IGZyb20gJy4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFwcGx5IGFzIGFwcGx5VHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBjbG9uZSwgY3JlYXRlT3JVcGRhdGVFbXB0eSwgZXF1YWxzLCBnZXRGb3JWaWV3QW5kU2l6ZSwgaXNFbXB0eSwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBmcm9tVXNlckNvb3JkaW5hdGUsIHRvVXNlckNvb3JkaW5hdGUgfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7IGhhc0FyZWEgfSBmcm9tICcuL3NpemUuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZSB9IGZyb20gJy4vZG9tLmpzJztcbi8qKlxuICogU3RhdGUgb2YgdGhlIGN1cnJlbnQgZnJhbWUuIE9ubHkgYHBpeGVsUmF0aW9gLCBgdGltZWAgYW5kIGB2aWV3U3RhdGVgIHNob3VsZFxuICogYmUgdXNlZCBpbiBhcHBsaWNhdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGcmFtZVN0YXRlXG4gKiBAcHJvcGVydHkge251bWJlcn0gcGl4ZWxSYXRpbyBUaGUgcGl4ZWwgcmF0aW8gb2YgdGhlIGZyYW1lLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWUgVGhlIHRpbWUgd2hlbiByZW5kZXJpbmcgb2YgdGhlIGZyYW1lIHdhcyByZXF1ZXN0ZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vVmlldy5qc1wiKS5TdGF0ZX0gdmlld1N0YXRlIFRoZSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3LlxuICogQHByb3BlcnR5IHtib29sZWFufSBhbmltYXRlIEFuaW1hdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX0gY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gQ29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcInJidXNoXCIpLmRlZmF1bHR9IGRlY2x1dHRlclRyZWUgRGVjbHV0dGVyVHJlZS5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW25leHRFeHRlbnRdIE5leHQgZXh0ZW50IGR1cmluZyBhbiBhbmltYXRpb24gc2VyaWVzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlPn0gbGF5ZXJTdGF0ZXNBcnJheSBMYXllclN0YXRlc0FycmF5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxheWVySW5kZXggTGF5ZXJJbmRleC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSBQaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8UG9zdFJlbmRlckZ1bmN0aW9uPn0gcG9zdFJlbmRlckZ1bmN0aW9ucyBQb3N0UmVuZGVyRnVuY3Rpb25zLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICogQHByb3BlcnR5IHtUaWxlUXVldWV9IHRpbGVRdWV1ZSBUaWxlUXVldWUuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHVzZWRUaWxlcyBVc2VkVGlsZXMuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IHZpZXdIaW50cyBWaWV3SGludHMuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHdhbnRlZFRpbGVzIFdhbnRlZFRpbGVzLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IG1hcElkIFRoZSBpZCBvZiB0aGUgbWFwLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gcmVuZGVyVGFyZ2V0cyBJZGVudGlmaWVycyBvZiBwcmV2aW91c2x5IHJlbmRlcmVkIGVsZW1lbnRzLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihQbHVnZ2FibGVNYXAsID9GcmFtZVN0YXRlKTogYW55fSBQb3N0UmVuZGVyRnVuY3Rpb25cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBdFBpeGVsT3B0aW9uc1xuICogQHByb3BlcnR5IHt1bmRlZmluZWR8ZnVuY3Rpb24oaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vc291cmNlL1NvdXJjZVwiKS5kZWZhdWx0Pik6IGJvb2xlYW59IFtsYXllckZpbHRlcl0gTGF5ZXIgZmlsdGVyXG4gKiBmdW5jdGlvbi4gVGhlIGZpbHRlciBmdW5jdGlvbiB3aWxsIHJlY2VpdmUgb25lIGFyZ3VtZW50LCB0aGVcbiAqIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXItY2FuZGlkYXRlfSBhbmQgaXQgc2hvdWxkIHJldHVybiBhIGJvb2xlYW4gdmFsdWUuXG4gKiBPbmx5IGxheWVycyB3aGljaCBhcmUgdmlzaWJsZSBhbmQgZm9yIHdoaWNoIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWBcbiAqIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gQnkgZGVmYXVsdCwgYWxsIHZpc2libGUgbGF5ZXJzIHdpbGwgYmUgdGVzdGVkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtoaXRUb2xlcmFuY2U9MF0gSGl0LWRldGVjdGlvbiB0b2xlcmFuY2UgaW4gY3NzIHBpeGVscy4gUGl4ZWxzXG4gKiBpbnNpZGUgdGhlIHJhZGl1cyBhcm91bmQgdGhlIGdpdmVuIHBvc2l0aW9uIHdpbGwgYmUgY2hlY2tlZCBmb3IgZmVhdHVyZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjaGVja1dyYXBwZWQ9dHJ1ZV0gQ2hlY2stV3JhcHBlZCBXaWxsIGNoZWNrIGZvciBmb3Igd3JhcHBlZCBnZW9tZXRyaWVzIGluc2lkZSB0aGUgcmFuZ2Ugb2ZcbiAqICAgKy8tIDEgd29ybGQgd2lkdGguIFdvcmtzIG9ubHkgaWYgYSBwcm9qZWN0aW9uIGlzIHVzZWQgdGhhdCBjYW4gYmUgd3JhcHBlZC5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zSW50ZXJuYWxcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gW2NvbnRyb2xzXSBDb250cm9scy5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXSBJbnRlcmFjdGlvbnMuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fSBrZXlib2FyZEV2ZW50VGFyZ2V0IEtleWJvYXJkRXZlbnRUYXJnZXQuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBvdmVybGF5cyBPdmVybGF5cy5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IHZhbHVlcyBWYWx1ZXMuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6bGF5ZXJncm91cCd8J2NoYW5nZTpzaXplJ3wnY2hhbmdlOnRhcmdldCd8J2NoYW5nZTp2aWV3J30gTWFwT2JqZWN0RXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxNYXBPYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9NYXBCcm93c2VyRXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL01hcEV2ZW50VHlwZVwiKS5UeXBlcywgaW1wb3J0KFwiLi9NYXBFdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL3JlbmRlci9FdmVudFR5cGVcIikuTWFwUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xNYXBPYmplY3RFdmVudFR5cGVzfFxuICogICAgICBpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFR5cGVcIikuVHlwZXN8aW1wb3J0KFwiLi9NYXBFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgIGltcG9ydChcIi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5NYXBSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBQbHVnZ2FibGVNYXBPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIHRoZSBtYXAuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBNYXBPcHRpb25zXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59IFtjb250cm9sc11cbiAqIENvbnRyb2xzIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sLmRlZmF1bHRzfSBpcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvXSBUaGUgcmF0aW8gYmV0d2VlblxuICogcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzIChkaXBzKSBvbiB0aGUgZGV2aWNlLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn0gW2ludGVyYWN0aW9uc11cbiAqIEludGVyYWN0aW9ucyB0aGF0IGFyZSBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gSWYgbm90IHNwZWNpZmllZCxcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24uZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fERvY3VtZW50fHN0cmluZ30gW2tleWJvYXJkRXZlbnRUYXJnZXRdIFRoZSBlbGVtZW50IHRvXG4gKiBsaXN0ZW4gdG8ga2V5Ym9hcmQgZXZlbnRzIG9uLiBUaGlzIGRldGVybWluZXMgd2hlbiB0aGUgYEtleWJvYXJkUGFuYCBhbmRcbiAqIGBLZXlib2FyZFpvb21gIGludGVyYWN0aW9ucyB0cmlnZ2VyLiBGb3IgZXhhbXBsZSwgaWYgdGhpcyBvcHRpb24gaXMgc2V0IHRvXG4gKiBgZG9jdW1lbnRgIHRoZSBrZXlib2FyZCBpbnRlcmFjdGlvbnMgd2lsbCBhbHdheXMgdHJpZ2dlci4gSWYgdGhpcyBvcHRpb24gaXNcbiAqIG5vdCBzcGVjaWZpZWQsIHRoZSBlbGVtZW50IHRoZSBsaWJyYXJ5IGxpc3RlbnMgdG8ga2V5Ym9hcmQgZXZlbnRzIG9uIGlzIHRoZVxuICogbWFwIHRhcmdldCAoaS5lLiB0aGUgdXNlci1wcm92aWRlZCBkaXYgZm9yIHRoZSBtYXApLiBJZiB0aGlzIGlzIG5vdFxuICogYGRvY3VtZW50YCwgdGhlIHRhcmdldCBlbGVtZW50IG5lZWRzIHRvIGJlIGZvY3VzZWQgZm9yIGtleSBldmVudHMgdG8gYmVcbiAqIGVtaXR0ZWQsIHJlcXVpcmluZyB0aGF0IHRoZSB0YXJnZXQgZWxlbWVudCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fENvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fExheWVyR3JvdXB9IFtsYXllcnNdXG4gKiBMYXllcnMuIElmIHRoaXMgaXMgbm90IGRlZmluZWQsIGEgbWFwIHdpdGggbm8gbGF5ZXJzIHdpbGwgYmUgcmVuZGVyZWQuIE5vdGVcbiAqIHRoYXQgbGF5ZXJzIGFyZSByZW5kZXJlZCBpbiB0aGUgb3JkZXIgc3VwcGxpZWQsIHNvIGlmIHlvdSB3YW50LCBmb3IgZXhhbXBsZSxcbiAqIGEgdmVjdG9yIGxheWVyIHRvIGFwcGVhciBvbiB0b3Agb2YgYSB0aWxlIGxheWVyLCBpdCBtdXN0IGNvbWUgYWZ0ZXIgdGhlIHRpbGVcbiAqIGxheWVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhUaWxlc0xvYWRpbmc9MTZdIE1heGltdW0gbnVtYmVyIHRpbGVzIHRvIGxvYWRcbiAqIHNpbXVsdGFuZW91c2x5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlPTFdIFRoZSBtaW5pbXVtIGRpc3RhbmNlIGluIHBpeGVscyB0aGVcbiAqIGN1cnNvciBtdXN0IG1vdmUgdG8gYmUgZGV0ZWN0ZWQgYXMgYSBtYXAgbW92ZSBldmVudCBpbnN0ZWFkIG9mIGEgY2xpY2suXG4gKiBJbmNyZWFzaW5nIHRoaXMgdmFsdWUgY2FuIG1ha2UgaXQgZWFzaWVyIHRvIGNsaWNrIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fEFycmF5PGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gW292ZXJsYXlzXVxuICogT3ZlcmxheXMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIEJ5IGRlZmF1bHQsIG5vIG92ZXJsYXlzIGFyZSBhZGRlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgY29udGFpbmVyIGZvciB0aGUgbWFwLCBlaXRoZXIgdGhlXG4gKiBlbGVtZW50IGl0c2VsZiBvciB0aGUgYGlkYCBvZiB0aGUgZWxlbWVudC4gSWYgbm90IHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb25cbiAqIHRpbWUsIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNzZXRUYXJnZXR9IG11c3QgYmUgY2FsbGVkIGZvciB0aGUgbWFwIHRvIGJlXG4gKiByZW5kZXJlZC4gSWYgcGFzc2VkIGJ5IGVsZW1lbnQsIHRoZSBjb250YWluZXIgY2FuIGJlIGluIGEgc2Vjb25kYXJ5IGRvY3VtZW50LlxuICogQHByb3BlcnR5IHtWaWV3fFByb21pc2U8aW1wb3J0KFwiLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zPn0gW3ZpZXddIFRoZSBtYXAncyB2aWV3LiAgTm8gbGF5ZXIgc291cmNlcyB3aWxsIGJlXG4gKiBmZXRjaGVkIHVubGVzcyB0aGlzIGlzIHNwZWNpZmllZCBhdCBjb25zdHJ1Y3Rpb24gdGltZSBvciB0aHJvdWdoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXAjc2V0Vmlld30uXG4gKi9cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZUxheWVyTWFwUHJvcGVydHkobGF5ZXIpIHtcbiAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICBsYXllci5zZXRNYXBJbnRlcm5hbChudWxsKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllckdyb3VwKSB7XG4gICAgICAgIGxheWVyLmdldExheWVycygpLmZvckVhY2gocmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0fSBsYXllciBMYXllci5cbiAqIEBwYXJhbSB7UGx1Z2dhYmxlTWFwfSBtYXAgTWFwLlxuICovXG5mdW5jdGlvbiBzZXRMYXllck1hcFByb3BlcnR5KGxheWVyLCBtYXApIHtcbiAgICBpZiAobGF5ZXIgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICBsYXllci5zZXRNYXBJbnRlcm5hbChtYXApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChsYXllciBpbnN0YW5jZW9mIExheWVyR3JvdXApIHtcbiAgICAgICAgdmFyIGxheWVycyA9IGxheWVyLmdldExheWVycygpLmdldEFycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVycy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBzZXRMYXllck1hcFByb3BlcnR5KGxheWVyc1tpXSwgbWFwKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQGZpcmVzIGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLk1hcEJyb3dzZXJFdmVudFxuICogQGZpcmVzIGltcG9ydChcIi4vTWFwRXZlbnQuanNcIikuTWFwRXZlbnRcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0I3ByZWNvbXBvc2VcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL3JlbmRlci9FdmVudC5qc1wiKS5kZWZhdWx0I3Bvc3Rjb21wb3NlXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnQuanNcIikuZGVmYXVsdCNyZW5kZXJjb21wbGV0ZVxuICogQGFwaVxuICovXG52YXIgUGx1Z2dhYmxlTWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQbHVnZ2FibGVNYXAsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNYXBPcHRpb25zfSBvcHRpb25zIE1hcCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBsdWdnYWJsZU1hcChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1BsdWdnYWJsZU1hcE9uU2lnbmF0dXJlPGltcG9ydChcIi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7UGx1Z2dhYmxlTWFwT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1BsdWdnYWJsZU1hcE9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIHZhciBvcHRpb25zSW50ZXJuYWwgPSBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlckNvbXBsZXRlXztcbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIF90aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XyA9IF90aGlzLmhhbmRsZUJyb3dzZXJFdmVudC5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhUaWxlc0xvYWRpbmdfID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFRpbGVzTG9hZGluZyA6IDE2O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID1cbiAgICAgICAgICAgIG9wdGlvbnMucGl4ZWxSYXRpbyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnBpeGVsUmF0aW9cbiAgICAgICAgICAgICAgICA6IERFVklDRV9QSVhFTF9SQVRJTztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpb25EZWxheUtleV87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uRGVsYXlfID0gLyoqIEB0aGlzIHtQbHVnZ2FibGVNYXB9ICovIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGcmFtZV8oRGF0ZS5ub3coKSk7XG4gICAgICAgIH0uYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVJbmRleF8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9GcmFtZVN0YXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVTdGF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV4dGVudCBhdCB0aGUgcHJldmlvdXMgJ21vdmVlbmQnIGV2ZW50LlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucHJldmlvdXNFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld1Byb3BlcnR5TGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmNsYXNzTmFtZSA9XG4gICAgICAgICAgICAnb2wtdmlld3BvcnQnICsgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyA/ICcgb2wtdG91Y2gnIDogJycpO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5jbGFzc05hbWUgPSAnb2wtb3ZlcmxheWNvbnRhaW5lcic7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudCc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5hcHBlbmRDaGlsZChfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TWFwQnJvd3NlckV2ZW50SGFuZGxlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG9wdGlvbnMubW92ZVRvbGVyYW5jZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleWJvYXJkRXZlbnRUYXJnZXRfID0gb3B0aW9uc0ludGVybmFsLmtleWJvYXJkRXZlbnRUYXJnZXQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0FycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRyb2xzID0gb3B0aW9uc0ludGVybmFsLmNvbnRyb2xzIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGlvbnMgPSBvcHRpb25zSW50ZXJuYWwuaW50ZXJhY3Rpb25zIHx8IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5c18gPSBvcHRpb25zSW50ZXJuYWwub3ZlcmxheXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxvb2t1cCBvZiBvdmVybGF5cyBieSBpZC5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlJZEluZGV4XyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcmVuZGVyZXIvTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxQb3N0UmVuZGVyRnVuY3Rpb24+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtUaWxlUXVldWV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlUXVldWVfID0gbmV3IFRpbGVRdWV1ZShfdGhpcy5nZXRUaWxlUHJpb3JpdHkuYmluZChfdGhpcyksIF90aGlzLmhhbmRsZVRpbGVDaGFuZ2VfLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCwgX3RoaXMuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuVklFVywgX3RoaXMuaGFuZGxlVmlld0NoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuU0laRSwgX3RoaXMuaGFuZGxlU2l6ZUNoYW5nZWRfKTtcbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTWFwUHJvcGVydHkuVEFSR0VULCBfdGhpcy5oYW5kbGVUYXJnZXRDaGFuZ2VkXyk7XG4gICAgICAgIC8vIHNldFByb3BlcnRpZXMgd2lsbCB0cmlnZ2VyIHRoZSByZW5kZXJpbmcgb2YgdGhlIG1hcCBpZiB0aGUgbWFwXG4gICAgICAgIC8vIGlzIFwiZGVmaW5lZFwiIGFscmVhZHkuXG4gICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMob3B0aW9uc0ludGVybmFsLnZhbHVlcyk7XG4gICAgICAgIHZhciBtYXAgPSBfdGhpcztcbiAgICAgICAgaWYgKG9wdGlvbnMudmlldyAmJiAhKG9wdGlvbnMudmlldyBpbnN0YW5jZW9mIFZpZXcpKSB7XG4gICAgICAgICAgICBvcHRpb25zLnZpZXcudGhlbihmdW5jdGlvbiAodmlld09wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBtYXAuc2V0VmlldyhuZXcgVmlldyh2aWV3T3B0aW9ucykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLm92ZXJsYXlzXy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLmFkZE92ZXJsYXlJbnRlcm5hbF8oXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQuZWxlbWVudCkpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheXNfLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBvdmVybGF5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gKi8gKGV2ZW50LmVsZW1lbnQpO1xuICAgICAgICAgICAgdmFyIGlkID0gb3ZlcmxheS5nZXRJZCgpO1xuICAgICAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmNvbnRyb2xzLmZvckVhY2goXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHR9IGNvbnRyb2wgQ29udHJvbC5cbiAgICAgICAgICogQHRoaXMge1BsdWdnYWJsZU1hcH1cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChjb250cm9sKSB7XG4gICAgICAgICAgICBjb250cm9sLnNldE1hcCh0aGlzKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5mb3JFYWNoKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uLlxuICAgICAgICAgKiBAdGhpcyB7UGx1Z2dhYmxlTWFwfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgICAgICBpbnRlcmFjdGlvbi5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5vdmVybGF5c18uZm9yRWFjaChfdGhpcy5hZGRPdmVybGF5SW50ZXJuYWxfLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JlbmRlcmVyL01hcC5qc1wiKS5kZWZhdWx0fSBUaGUgbWFwIHJlbmRlcmVyXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2UgYSBtYXAgdHlwZSB0aGF0IGhhcyBhIGNyZWF0ZVJlbmRlcmVyIG1ldGhvZCcpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBnaXZlbiBjb250cm9sIHRvIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkQ29udHJvbCA9IGZ1bmN0aW9uIChjb250cm9sKSB7XG4gICAgICAgIHRoaXMuZ2V0Q29udHJvbHMoKS5wdXNoKGNvbnRyb2wpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBnaXZlbiBpbnRlcmFjdGlvbiB0byB0aGUgbWFwLiBJZiB5b3Ugd2FudCB0byBhZGQgYW4gaW50ZXJhY3Rpb25cbiAgICAgKiBhdCBhbm90aGVyIHBvaW50IG9mIHRoZSBjb2xsZWN0aW9uIHVzZSBgZ2V0SW50ZXJhY3Rpb24oKWAgYW5kIHRoZSBtZXRob2RzXG4gICAgICogYXZhaWxhYmxlIG9uIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHN0b3AgdGhlIGV2ZW50IHByb3BhZ2F0aW9uIGZyb20gdGhlIGhhbmRsZUV2ZW50IGZ1bmN0aW9uLiBUaGUgaW50ZXJhY3Rpb25zXG4gICAgICogZ2V0IHRvIGhhbmRsZSB0aGUgZXZlbnRzIGluIHRoZSByZXZlcnNlIG9yZGVyIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24gdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZEludGVyYWN0aW9uID0gZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkucHVzaChpbnRlcmFjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiBsYXllciB0byB0aGUgdG9wIG9mIHRoaXMgbWFwLiBJZiB5b3Ugd2FudCB0byBhZGQgYSBsYXllclxuICAgICAqIGVsc2V3aGVyZSBpbiB0aGUgc3RhY2ssIHVzZSBgZ2V0TGF5ZXJzKClgIGFuZCB0aGUgbWV0aG9kcyBhdmFpbGFibGUgb25cbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vbGF5ZXIvR3JvdXAuanNcIikuR3JvdXBFdmVudH0gZXZlbnQgVGhlIGxheWVyIGFkZCBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJBZGRfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHNldExheWVyTWFwUHJvcGVydHkoZXZlbnQubGF5ZXIsIHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBnaXZlbiBvdmVybGF5IHRvIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZE92ZXJsYXkgPSBmdW5jdGlvbiAob3ZlcmxheSkge1xuICAgICAgICB0aGlzLmdldE92ZXJsYXlzKCkucHVzaChvdmVybGF5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgZGVhbHMgd2l0aCBtYXAncyBvdmVybGF5IGNvbGxlY3Rpb24gY2hhbmdlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZE92ZXJsYXlJbnRlcm5hbF8gPSBmdW5jdGlvbiAob3ZlcmxheSkge1xuICAgICAgICB2YXIgaWQgPSBvdmVybGF5LmdldElkKCk7XG4gICAgICAgIGlmIChpZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXSA9IG92ZXJsYXk7XG4gICAgICAgIH1cbiAgICAgICAgb3ZlcmxheS5zZXRNYXAodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRhcmdldChudWxsKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kIGV4ZWN1dGUgYVxuICAgICAqIGNhbGxiYWNrIHdpdGggZWFjaCBpbnRlcnNlY3RpbmcgZmVhdHVyZS4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZSBkZXRlY3Rpb24gY2FuXG4gICAgICogYmUgY29uZmlndXJlZCB0aHJvdWdoIHRoZSBgbGF5ZXJGaWx0ZXJgIG9wdGlvbiBpbiBgb3B0X29wdGlvbnNgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2UsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL3NvdXJjZS9Tb3VyY2VcIikuZGVmYXVsdD4sIGltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0KTogVH0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay4gVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICAgKiAgICAgY2FsbGVkIHdpdGggdHdvIGFyZ3VtZW50cy4gVGhlIGZpcnN0IGFyZ3VtZW50IGlzIG9uZVxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL0ZlYXR1cmUgZmVhdHVyZX0gb3JcbiAgICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9yZW5kZXIvRmVhdHVyZSByZW5kZXIgZmVhdHVyZX0gYXQgdGhlIHBpeGVsLCB0aGUgc2Vjb25kIGlzXG4gICAgICogICAgIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSBvZiB0aGUgZmVhdHVyZSBhbmQgd2lsbCBiZSBudWxsIGZvclxuICAgICAqICAgICB1bm1hbmFnZWQgbGF5ZXJzLiBUbyBzdG9wIGRldGVjdGlvbiwgY2FsbGJhY2sgZnVuY3Rpb25zIGNhbiByZXR1cm4gYVxuICAgICAqICAgICB0cnV0aHkgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQsIGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZiBsYXN0XG4gICAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRfb3B0aW9ucy5sYXllckZpbHRlciAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgICAgICB2YXIgY2hlY2tXcmFwcGVkID0gb3B0X29wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBjYWxsYmFjaywgbnVsbCwgbGF5ZXJGaWx0ZXIsIG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2U+fSBUaGUgZGV0ZWN0ZWQgZmVhdHVyZXMgb3JcbiAgICAgKiBhbiBlbXB0eSBhcnJheSBpZiBub25lIHdlcmUgZm91bmQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RmVhdHVyZXNBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgICB9LCBvcHRfb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbGwgbGF5ZXJzIGZyb20gYWxsIGxheWVyIGdyb3Vwcy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBMYXllcnMuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRBbGxMYXllcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllcnMgPSBbXTtcbiAgICAgICAgZnVuY3Rpb24gYWRkTGF5ZXJzRnJvbShsYXllckdyb3VwKSB7XG4gICAgICAgICAgICBsYXllckdyb3VwLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyIGluc3RhbmNlb2YgTGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRMYXllcnNGcm9tKGxheWVyLmdldExheWVycygpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVycy5wdXNoKGxheWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBhZGRMYXllcnNGcm9tKHRoaXMuZ2V0TGF5ZXJzKCkpO1xuICAgICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGxheWVycyB0aGF0IGhhdmUgYSBjb2xvciB2YWx1ZSBhdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydCwgYW5kXG4gICAgICogZXhlY3V0ZSBhIGNhbGxiYWNrIHdpdGggZWFjaCBtYXRjaGluZyBsYXllci4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZVxuICAgICAqIGRldGVjdGlvbiBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIGBvcHRfbGF5ZXJGaWx0ZXJgLlxuICAgICAqXG4gICAgICogTm90ZTogSW4gbWFwcyB3aXRoIG1vcmUgdGhhbiBvbmUgbGF5ZXIsIHRoaXMgbWV0aG9kIHdpbGwgdHlwaWNhbGx5IHJldHVybiBwaXhlbCBkYXRhXG4gICAgICogcmVwcmVzZW50aW5nIHRoZSBjb21wb3NlZCBpbWFnZSBvZiBhbGwgbGF5ZXJzIHZpc2libGUgYXQgdGhlIGdpdmVuIHBpeGVsIOKAkyBiZWNhdXNlIGxheWVyc1xuICAgICAqIHdpbGwgZ2VuZXJhbGx5IHNoYXJlIHRoZSBzYW1lIHJlbmRlcmluZyBjb250ZXh0LiAgVG8gZm9yY2UgbGF5ZXJzIHRvIHJlbmRlciBzZXBhcmF0ZWx5LCBhbmRcbiAgICAgKiB0byBnZXQgcGl4ZWwgZGF0YSByZXByZXNlbnRpbmcgb25seSBvbmUgbGF5ZXIgYXQgYSB0aW1lLCB5b3UgY2FuIGFzc2lnbiBlYWNoIGxheWVyIGEgdW5pcXVlXG4gICAgICogYGNsYXNzTmFtZWAgaW4gaXRzIGNvbnN0cnVjdG9yLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFMsIGltcG9ydChcIi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCwgKFVpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXkpKTogVH0gY2FsbGJhY2tcbiAgICAgKiAgICAgTGF5ZXIgY2FsbGJhY2suIFRoaXMgY2FsbGJhY2sgd2lsbCByZWNlaXZlIHR3byBhcmd1bWVudHM6IGZpcnN0IGlzIHRoZVxuICAgICAqICAgICB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyIGxheWVyfSwgc2Vjb25kIGFyZ3VtZW50IGlzIGFuIGFycmF5IHJlcHJlc2VudGluZ1xuICAgICAqICAgICBbUiwgRywgQiwgQV0gcGl4ZWwgdmFsdWVzICgwIC0gMjU1KSBhbmQgd2lsbCBiZSBgbnVsbGAgZm9yIGxheWVyIHR5cGVzXG4gICAgICogICAgIHRoYXQgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IHRoaXMgYXJndW1lbnQuIFRvIHN0b3AgZGV0ZWN0aW9uLCBjYWxsYmFja1xuICAgICAqICAgICBmdW5jdGlvbnMgY2FuIHJldHVybiBhIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0X29wdGlvbnNdIENvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LCBpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgbGFzdFxuICAgICAqIGNhbGxiYWNrIGV4ZWN1dGlvbiwgb3IgdGhlIGZpcnN0IHRydXRoeSBjYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAgICogQHRlbXBsYXRlIFMsVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGNhbGxiYWNrLCBvcHRfb3B0aW9ucykge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcbiAgICAgICAgdmFyIGxheWVyRmlsdGVyID0gb3B0aW9ucy5sYXllckZpbHRlciB8fCBUUlVFO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uZm9yRWFjaExheWVyQXRQaXhlbChwaXhlbCwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgbGF5ZXJGaWx0ZXIpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGlmIGZlYXR1cmVzIGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC4gTGF5ZXJzIGluY2x1ZGVkIGluIHRoZVxuICAgICAqIGRldGVjdGlvbiBjYW4gYmUgY29uZmlndXJlZCB0aHJvdWdoIGBvcHRfbGF5ZXJGaWx0ZXJgLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtBdFBpeGVsT3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25hbCBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHRoZXJlIGEgZmVhdHVyZSBhdCB0aGUgZ2l2ZW4gcGl4ZWw/XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFzRmVhdHVyZUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRfb3B0aW9ucy5sYXllckZpbHRlciAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgY2hlY2tXcmFwcGVkID0gb3B0X29wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmhhc0ZlYXR1cmVBdENvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5mcmFtZVN0YXRlXywgaGl0VG9sZXJhbmNlLCBjaGVja1dyYXBwZWQsIGxheWVyRmlsdGVyLCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgaW4gdXNlciBwcm9qZWN0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRFdmVudENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvb3JkaW5hdGUgaW4gdmlldyBwcm9qZWN0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCh0aGlzLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG1hcCBwaXhlbCBwb3NpdGlvbiBmb3IgYSBicm93c2VyIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBAcGFyYW0ge1VJRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IFBpeGVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50UGl4ZWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSB0aGlzLnZpZXdwb3J0Xy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGV2ZW50UG9zaXRpb24gPSBcbiAgICAgICAgLy9GSVhNRSBBcmUgd2UgcmVhbGx5IGNhbGxpbmcgdGhpcyB3aXRoIGEgVG91Y2hFdmVudCBhbnl3aGVyZT9cbiAgICAgICAgJ2NoYW5nZWRUb3VjaGVzJyBpbiBldmVudFxuICAgICAgICAgICAgPyAvKiogQHR5cGUge1RvdWNoRXZlbnR9ICovIChldmVudCkuY2hhbmdlZFRvdWNoZXNbMF1cbiAgICAgICAgICAgIDogLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAoZXZlbnQpO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgZXZlbnRQb3NpdGlvbi5jbGllbnRYIC0gdmlld3BvcnRQb3NpdGlvbi5sZWZ0LFxuICAgICAgICAgICAgZXZlbnRQb3NpdGlvbi5jbGllbnRZIC0gdmlld3BvcnRQb3NpdGlvbi50b3AsXG4gICAgICAgIF07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRhcmdldCBpbiB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC5cbiAgICAgKiBOb3RlIHRoYXQgdGhpcyByZXR1cm5zIHdoYXQgaXMgZW50ZXJlZCBhcyBhbiBvcHRpb24gb3IgaW4gc2V0VGFyZ2V0OlxuICAgICAqIGlmIHRoYXQgd2FzIGFuIGVsZW1lbnQsIGl0IHJldHVybnMgYW4gZWxlbWVudDsgaWYgYSBzdHJpbmcsIGl0IHJldHVybnMgdGhhdC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudHxzdHJpbmd8dW5kZWZpbmVkfSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudCB0aGF0IHRoZVxuICAgICAqICAgICBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9ICovICh0aGlzLmdldChNYXBQcm9wZXJ0eS5UQVJHRVQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgaW50byB3aGljaCB0aGlzIG1hcCBpcyByZW5kZXJlZC4gSW4gY29udHJhc3QgdG9cbiAgICAgKiBgZ2V0VGFyZ2V0YCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJuIGFuIGBFbGVtZW50YCwgb3IgYG51bGxgIGlmIHRoZVxuICAgICAqIG1hcCBoYXMgbm8gdGFyZ2V0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgZWxlbWVudCB0aGF0IHRoZSBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0VGFyZ2V0RWxlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuZ2V0VGFyZ2V0KCk7XG4gICAgICAgIGlmICh0YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0YXJnZXQpXG4gICAgICAgICAgICAgICAgOiB0YXJnZXQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICAgKiB1c2VyIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSBmb3IgdGhlIHBpeGVsIHBvc2l0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvb3JkaW5hdGVGcm9tUGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgcmV0dXJuIHRvVXNlckNvb3JkaW5hdGUodGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpLCB0aGlzLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIHBpeGVsLiAgVGhpcyByZXR1cm5zIGEgY29vcmRpbmF0ZSBpbiB0aGVcbiAgICAgKiBtYXAgdmlldyBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgZm9yIHRoZSBwaXhlbCBwb3NpdGlvbi5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGNvbnRyb2xzLiBNb2RpZnlpbmcgdGhpcyBjb2xsZWN0aW9uIGNoYW5nZXMgdGhlIGNvbnRyb2xzXG4gICAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gQ29udHJvbHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29udHJvbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRyb2xzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgb3ZlcmxheXMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgb3ZlcmxheXNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn0gT3ZlcmxheXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlzXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhbiBvdmVybGF5IGJ5IGl0cyBpZGVudGlmaWVyICh0aGUgdmFsdWUgcmV0dXJuZWQgYnkgb3ZlcmxheS5nZXRJZCgpKS5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIGluZGV4IHRyZWF0cyBzdHJpbmcgYW5kIG51bWVyaWMgaWRlbnRpZmllcnMgYXMgdGhlIHNhbWUuIFNvXG4gICAgICogYG1hcC5nZXRPdmVybGF5QnlJZCgyKWAgd2lsbCByZXR1cm4gYW4gb3ZlcmxheSB3aXRoIGlkIGAnMidgIG9yIGAyYC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGlkIE92ZXJsYXkgaWRlbnRpZmllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gT3ZlcmxheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5QnlJZCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgb3ZlcmxheSA9IHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldO1xuICAgICAgICByZXR1cm4gb3ZlcmxheSAhPT0gdW5kZWZpbmVkID8gb3ZlcmxheSA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBpbnRlcmFjdGlvbnMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgaW50ZXJhY3Rpb25zXG4gICAgICogYXNzb2NpYXRlZCB3aXRoIHRoZSBtYXAuXG4gICAgICpcbiAgICAgKiBJbnRlcmFjdGlvbnMgYXJlIHVzZWQgZm9yIGUuZy4gcGFuLCB6b29tIGFuZCByb3RhdGUuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBJbnRlcmFjdGlvbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0SW50ZXJhY3Rpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyZ3JvdXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbWFwLlxuICAgICAqIEByZXR1cm4ge0xheWVyR3JvdXB9IEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJHcm91cCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7TGF5ZXJHcm91cH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LkxBWUVSR1JPVVApKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFyIGFueSBleGlzdGluZyBsYXllcnMgYW5kIGFkZCBsYXllcnMgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0PnxDb2xsZWN0aW9uPGltcG9ydChcIi4vbGF5ZXIvQmFzZS5qc1wiKS5kZWZhdWx0Pn0gbGF5ZXJzIFRoZSBsYXllcnMgdG8gYmUgYWRkZWQgdG8gdGhlIG1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRMYXllcnMgPSBmdW5jdGlvbiAobGF5ZXJzKSB7XG4gICAgICAgIHZhciBncm91cCA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpO1xuICAgICAgICBpZiAobGF5ZXJzIGluc3RhbmNlb2YgQ29sbGVjdGlvbikge1xuICAgICAgICAgICAgZ3JvdXAuc2V0TGF5ZXJzKGxheWVycyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvbGxlY3Rpb24gPSBncm91cC5nZXRMYXllcnMoKTtcbiAgICAgICAgY29sbGVjdGlvbi5jbGVhcigpO1xuICAgICAgICBjb2xsZWN0aW9uLmV4dGVuZChsYXllcnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGxheWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBMYXllcnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHJldHVybiBsYXllcnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllcnMgaGF2ZSBzb3VyY2VzIHRoYXQgYXJlIHN0aWxsIGxvYWRpbmcuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlc0FycmF5W2ldLmxheWVyO1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2UubG9hZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSB1c2VyXG4gICAgICogcHJvamVjdGlvbiBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIEEgbWFwIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICB2YXIgdmlld0Nvb3JkaW5hdGUgPSBmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKHZpZXdDb29yZGluYXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSBtYXAgdmlld1xuICAgICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBBIG1hcCBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IEEgcGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBjb29yZGluYXRlLnNsaWNlKDAsIDIpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgcmVuZGVyZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH0gUmVuZGVyZXJcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuU0laRSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC4gQSB2aWV3IG1hbmFnZXMgcHJvcGVydGllcyBzdWNoIGFzXG4gICAgICogY2VudGVyIGFuZCByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge1ZpZXd9IFRoZSB2aWV3IHRoYXQgY29udHJvbHMgdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtWaWV3fSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuVklFVykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFZpZXdwb3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgdGhlIGNvbnRhaW5lciBmb3Igb3ZlcmxheXMuICBFbGVtZW50cyBhZGRlZCB0b1xuICAgICAqIHRoaXMgY29udGFpbmVyIHdpbGwgbGV0IG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLFxuICAgICAqIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheSB3aWxsIHRyaWdnZXIge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fVxuICAgICAqIGV2ZW50cy5cbiAgICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cyB0aGF0IGRvbid0IGFsbG93XG4gICAgICogZXZlbnQgcHJvcGFnYXRpb24uIEVsZW1lbnRzIGFkZGVkIHRvIHRoaXMgY29udGFpbmVyIHdvbid0IGxldCBtb3VzZWRvd24gYW5kXG4gICAgICogdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLCBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXlcbiAgICAgKiBkb24ndCB0cmlnZ2VyIGFueSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9LlxuICAgICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyIHRoYXQgc3RvcHMgZXZlbnRzLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHshRG9jdW1lbnR9IFRoZSBkb2N1bWVudCB3aGVyZSB0aGUgbWFwIGlzIGRpc3BsYXllZC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE93bmVyRG9jdW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgICAgIHJldHVybiB0YXJnZXRFbGVtZW50ID8gdGFyZ2V0RWxlbWVudC5vd25lckRvY3VtZW50IDogZG9jdW1lbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRpbGVDZW50ZXIgVGlsZSBjZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVSZXNvbHV0aW9uIFRpbGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUaWxlUHJpb3JpdHkgPSBmdW5jdGlvbiAodGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGdldFRpbGVQcmlvcml0eSh0aGlzLmZyYW1lU3RhdGVfLCB0aWxlLCB0aWxlU291cmNlS2V5LCB0aWxlQ2VudGVyLCB0aWxlUmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1VJRXZlbnR9IGJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0X3R5cGVdIFR5cGUuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVCcm93c2VyRXZlbnQgPSBmdW5jdGlvbiAoYnJvd3NlckV2ZW50LCBvcHRfdHlwZSkge1xuICAgICAgICB2YXIgdHlwZSA9IG9wdF90eXBlIHx8IGJyb3dzZXJFdmVudC50eXBlO1xuICAgICAgICB2YXIgbWFwQnJvd3NlckV2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudCh0eXBlLCB0aGlzLCBicm93c2VyRXZlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsZU1hcEJyb3dzZXJFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNYXBCcm93c2VyRXZlbnR9IG1hcEJyb3dzZXJFdmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlTWFwQnJvd3NlckV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgICAgICAgIC8vIFdpdGggbm8gdmlldyBkZWZpbmVkLCB3ZSBjYW5ub3QgdHJhbnNsYXRlIHBpeGVscyBpbnRvIGdlb2dyYXBoaWNhbFxuICAgICAgICAgICAgLy8gY29vcmRpbmF0ZXMgc28gaW50ZXJhY3Rpb25zIGNhbm5vdCBiZSB1c2VkLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtQb2ludGVyRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBvcmlnaW5hbEV2ZW50LnR5cGU7XG4gICAgICAgIGlmIChldmVudFR5cGUgPT09IFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLldIRUVMIHx8XG4gICAgICAgICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5nZXRPd25lckRvY3VtZW50KCk7XG4gICAgICAgICAgICB2YXIgcm9vdE5vZGUgPSB0aGlzLnZpZXdwb3J0Xy5nZXRSb290Tm9kZVxuICAgICAgICAgICAgICAgID8gdGhpcy52aWV3cG9ydF8uZ2V0Um9vdE5vZGUoKVxuICAgICAgICAgICAgICAgIDogZG9jO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IC8qKiBAdHlwZSB7Tm9kZX0gKi8gKG9yaWdpbmFsRXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIEFib3J0IGlmIHRoZSB0YXJnZXQgaXMgYSBjaGlsZCBvZiB0aGUgY29udGFpbmVyIGZvciBlbGVtZW50cyB3aG9zZSBldmVudHMgYXJlIG5vdCBtZWFudFxuICAgICAgICAgICAgLy8gdG8gYmUgaGFuZGxlZCBieSBtYXAgaW50ZXJhY3Rpb25zLlxuICAgICAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5jb250YWlucyh0YXJnZXQpIHx8XG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhlIGV2ZW50IHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIgdGhhdCBpcyBubyBsb25nZXIgaW4gdGhlIHBhZ2UuXG4gICAgICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSBmb3IgdGhlIHRhcmdldCB0byBubyBsb25nZXIgYmUgaW4gdGhlIHBhZ2UgaWYgaXQgaGFzIGJlZW4gcmVtb3ZlZCBpbiBhblxuICAgICAgICAgICAgICAgIC8vIGV2ZW50IGxpc3RlbmVyLCB0aGlzIG1pZ2h0IGhhcHBlbiBpbiBhIENvbnRyb2wgdGhhdCByZWNyZWF0ZXMgaXQncyBjb250ZW50IGJhc2VkIG9uXG4gICAgICAgICAgICAgICAgLy8gdXNlciBpbnRlcmFjdGlvbiBlaXRoZXIgbWFudWFsbHkgb3IgdmlhIGEgcmVuZGVyIGluIHNvbWV0aGluZyBsaWtlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvXG4gICAgICAgICAgICAgICAgIShyb290Tm9kZSA9PT0gZG9jID8gZG9jLmRvY3VtZW50RWxlbWVudCA6IHJvb3ROb2RlKS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5mcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKHRoaXMuZGlzcGF0Y2hFdmVudChtYXBCcm93c2VyRXZlbnQpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdmFyIGludGVyYWN0aW9uc0FycmF5ID0gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5nZXRBcnJheSgpLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gaW50ZXJhY3Rpb25zQXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbnNBcnJheVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb24uZ2V0TWFwKCkgIT09IHRoaXMgfHxcbiAgICAgICAgICAgICAgICAgICAgIWludGVyYWN0aW9uLmdldEFjdGl2ZSgpIHx8XG4gICAgICAgICAgICAgICAgICAgICF0aGlzLmdldFRhcmdldEVsZW1lbnQoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvbnQgPSBpbnRlcmFjdGlvbi5oYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmICghY29udCB8fCBtYXBCcm93c2VyRXZlbnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlUG9zdFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICAvLyBNYW5hZ2UgdGhlIHRpbGUgcXVldWVcbiAgICAgICAgLy8gSW1hZ2UgbG9hZHMgYXJlIGV4cGVuc2l2ZSBhbmQgYSBsaW1pdGVkIHJlc291cmNlLCBzbyB0cnkgdG8gdXNlIHRoZW1cbiAgICAgICAgLy8gZWZmaWNpZW50bHk6XG4gICAgICAgIC8vICogV2hlbiB0aGUgdmlldyBpcyBzdGF0aWMgd2UgYWxsb3cgYSBsYXJnZSBudW1iZXIgb2YgcGFyYWxsZWwgdGlsZSBsb2Fkc1xuICAgICAgICAvLyAgIHRvIGNvbXBsZXRlIHRoZSBmcmFtZSBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLlxuICAgICAgICAvLyAqIFdoZW4gYW5pbWF0aW5nIG9yIGludGVyYWN0aW5nLCBpbWFnZSBsb2FkcyBjYW4gY2F1c2UgamFua3MsIHNvIHdlIHJlZHVjZVxuICAgICAgICAvLyAgIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsb2FkcyBwZXIgZnJhbWUgYW5kIGxpbWl0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWxcbiAgICAgICAgLy8gICB0aWxlIGxvYWRzIHRvIHJlbWFpbiByZWFjdGl2ZSB0byB2aWV3IGNoYW5nZXMgYW5kIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mXG4gICAgICAgIC8vICAgbG9hZGluZyB0aWxlcyB0aGF0IHdpbGwgcXVpY2tseSBkaXNhcHBlYXIgZnJvbSB2aWV3LlxuICAgICAgICB2YXIgdGlsZVF1ZXVlID0gdGhpcy50aWxlUXVldWVfO1xuICAgICAgICBpZiAoIXRpbGVRdWV1ZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHZhciBtYXhUb3RhbExvYWRpbmcgPSB0aGlzLm1heFRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICB2YXIgbWF4TmV3TG9hZHMgPSBtYXhUb3RhbExvYWRpbmc7XG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBoaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xuICAgICAgICAgICAgICAgIGlmIChoaW50c1tWaWV3SGludC5BTklNQVRJTkddIHx8IGhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG93T25GcmFtZUJ1ZGdldCA9IERhdGUubm93KCkgLSBmcmFtZVN0YXRlLnRpbWUgPiA4O1xuICAgICAgICAgICAgICAgICAgICBtYXhUb3RhbExvYWRpbmcgPSBsb3dPbkZyYW1lQnVkZ2V0ID8gMCA6IDg7XG4gICAgICAgICAgICAgICAgICAgIG1heE5ld0xvYWRzID0gbG93T25GcmFtZUJ1ZGdldCA/IDAgOiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aWxlUXVldWUuZ2V0VGlsZXNMb2FkaW5nKCkgPCBtYXhUb3RhbExvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aWxlUXVldWUucmVwcmlvcml0aXplKCk7IC8vIEZJWE1FIG9ubHkgY2FsbCBpZiB2aWV3IGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgdGlsZVF1ZXVlLmxvYWRNb3JlVGlsZXMobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyYW1lU3RhdGUgJiZcbiAgICAgICAgICAgIHRoaXMuaGFzTGlzdGVuZXIoUmVuZGVyRXZlbnRUeXBlLlJFTkRFUkNPTVBMRVRFKSAmJlxuICAgICAgICAgICAgIWZyYW1lU3RhdGUuYW5pbWF0ZSAmJlxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDb21wbGV0ZV8pIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfLmRpc3BhdGNoUmVuZGVyRXZlbnQoUmVuZGVyRXZlbnRUeXBlLlJFTkRFUkNPTVBMRVRFLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcG9zdFJlbmRlckZ1bmN0aW9ucyA9IHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc187XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHBvc3RSZW5kZXJGdW5jdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uc1tpXSh0aGlzLCBmcmFtZVN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlU2l6ZUNoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRWaWV3KCkgJiYgIXRoaXMuZ2V0VmlldygpLmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLmdldFZpZXcoKS5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVUYXJnZXRDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5XSEVFTCwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8pO1xuICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRhcmdldCBtYXkgYmUgdW5kZWZpbmVkLCBudWxsLCBhIHN0cmluZyBvciBhbiBFbGVtZW50LlxuICAgICAgICAvLyBJZiBpdCdzIGEgc3RyaW5nIHdlIGNvbnZlcnQgaXQgdG8gYW4gRWxlbWVudCBiZWZvcmUgcHJvY2VlZGluZy5cbiAgICAgICAgLy8gSWYgaXQncyBub3Qgbm93IGFuIEVsZW1lbnQgd2UgcmVtb3ZlIHRoZSB2aWV3cG9ydCBmcm9tIHRoZSBET00uXG4gICAgICAgIC8vIElmIGl0J3MgYW4gRWxlbWVudCB3ZSBhcHBlbmQgdGhlIHZpZXdwb3J0IGVsZW1lbnQgdG8gaXQuXG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xykge1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfID0gdGhpcy5jcmVhdGVSZW5kZXJlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXyA9IG5ldyBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKHRoaXMsIHRoaXMubW92ZVRvbGVyYW5jZV8pO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIE1hcEJyb3dzZXJFdmVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmFkZEV2ZW50TGlzdGVuZXIoTWFwQnJvd3NlckV2ZW50VHlwZVtrZXldLCB0aGlzLmhhbmRsZU1hcEJyb3dzZXJFdmVudC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuV0hFRUwsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0VmlldyA9IHRoaXMuZ2V0T3duZXJEb2N1bWVudCgpLmRlZmF1bHRWaWV3O1xuICAgICAgICAgICAgdmFyIGtleWJvYXJkRXZlbnRUYXJnZXQgPSAhdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0X1xuICAgICAgICAgICAgICAgID8gdGFyZ2V0RWxlbWVudFxuICAgICAgICAgICAgICAgIDogdGhpcy5rZXlib2FyZEV2ZW50VGFyZ2V0XztcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2hhbmdlSGFuZGxlcktleXNfID0gW1xuICAgICAgICAgICAgICAgIGxpc3RlbihrZXlib2FyZEV2ZW50VGFyZ2V0LCBFdmVudFR5cGUuS0VZRE9XTiwgdGhpcy5oYW5kbGVCcm93c2VyRXZlbnQsIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihrZXlib2FyZEV2ZW50VGFyZ2V0LCBFdmVudFR5cGUuS0VZUFJFU1MsIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4oZGVmYXVsdFZpZXcsIEV2ZW50VHlwZS5SRVNJWkUsIHRoaXMudXBkYXRlU2l6ZSwgdGhpcyksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU2l6ZSgpO1xuICAgICAgICAvLyB1cGRhdGVTaXplIGNhbGxzIHNldFNpemUsIHNvIG5vIG5lZWQgdG8gY2FsbCB0aGlzLnJlbmRlclxuICAgICAgICAvLyBvdXJzZWx2ZXMgaGVyZS5cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVWaWV3Q2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydFNpemVfKCk7XG4gICAgICAgICAgICB0aGlzLnZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyA9IGxpc3Rlbih2aWV3LCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbGlzdGVuKHZpZXcsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8sIHRoaXMpO1xuICAgICAgICAgICAgdmlldy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18pIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXy5mb3JFYWNoKHVubGlzdGVuQnlLZXkpO1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGF5ZXJHcm91cCA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpO1xuICAgICAgICBpZiAobGF5ZXJHcm91cCkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVMYXllckFkZF8obmV3IEdyb3VwRXZlbnQoJ2FkZGxheWVyJywgbGF5ZXJHcm91cCkpO1xuICAgICAgICAgICAgdGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfID0gW1xuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllckdyb3VwLCBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0UsIHRoaXMucmVuZGVyLCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5yZW5kZXIsIHRoaXMpLFxuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllckdyb3VwLCAnYWRkbGF5ZXInLCB0aGlzLmhhbmRsZUxheWVyQWRkXywgdGhpcyksXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyR3JvdXAsICdyZW1vdmVsYXllcicsIHRoaXMuaGFuZGxlTGF5ZXJSZW1vdmVfLCB0aGlzKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaXNSZW5kZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5mcmFtZVN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcXVlc3RzIGFuIGltbWVkaWF0ZSByZW5kZXIgaW4gYSBzeW5jaHJvbm91cyBtYW5uZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyU3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZHJhd3MgYWxsIHRleHQgYWZ0ZXIgbmV3IGZvbnRzIGhhdmUgbG9hZGVkXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZWRyYXdUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGVzW2ldLmxheWVyO1xuICAgICAgICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkpIHtcbiAgICAgICAgICAgICAgICBsYXllci5nZXRSZW5kZXJlcigpLmhhbmRsZUZvbnRzQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IGEgbWFwIHJlbmRlcmluZyAoYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVyXyAmJiB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5Xyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY29udHJvbCBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGNvbnRyb2wgKG9yIHVuZGVmaW5lZFxuICAgICAqICAgICBpZiB0aGUgY29udHJvbCB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVDb250cm9sID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29udHJvbHMoKS5yZW1vdmUoY29udHJvbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGludGVyYWN0aW9uIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24gdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGludGVyYWN0aW9uIChvclxuICAgICAqICAgICB1bmRlZmluZWQgaWYgdGhlIGludGVyYWN0aW9uIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUludGVyYWN0aW9uID0gZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEludGVyYWN0aW9ucygpLnJlbW92ZShpbnRlcmFjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBsYXllciBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBsYXllciAob3IgdW5kZWZpbmVkIGlmIHRoZVxuICAgICAqICAgICBsYXllciB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHJldHVybiBsYXllcnMucmVtb3ZlKGxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9sYXllci9Hcm91cC5qc1wiKS5Hcm91cEV2ZW50fSBldmVudCBUaGUgbGF5ZXIgcmVtb3ZlIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVMYXllclJlbW92ZV8gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmVtb3ZlTGF5ZXJNYXBQcm9wZXJ0eShldmVudC5sYXllcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIG92ZXJsYXkgZnJvbSB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIG92ZXJsYXkgKG9yIHVuZGVmaW5lZFxuICAgICAqICAgICBpZiB0aGUgb3ZlcmxheSB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVPdmVybGF5ID0gZnVuY3Rpb24gKG92ZXJsYXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3ZlcmxheXMoKS5yZW1vdmUob3ZlcmxheSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBUaW1lLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXJGcmFtZV8gPSBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICB2YXIgcHJldmlvdXNGcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgLyoqIEB0eXBlIHs/RnJhbWVTdGF0ZX0gKi9cbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBudWxsO1xuICAgICAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkICYmIGhhc0FyZWEoc2l6ZSkgJiYgdmlldyAmJiB2aWV3LmlzRGVmKCkpIHtcbiAgICAgICAgICAgIHZhciB2aWV3SGludHMgPSB2aWV3LmdldEhpbnRzKHRoaXMuZnJhbWVTdGF0ZV8gPyB0aGlzLmZyYW1lU3RhdGVfLnZpZXdIaW50cyA6IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICB2YXIgdmlld1N0YXRlID0gdmlldy5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgZnJhbWVTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBhbmltYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTogdGhpcy5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8sXG4gICAgICAgICAgICAgICAgZGVjbHV0dGVyVHJlZTogbnVsbCxcbiAgICAgICAgICAgICAgICBleHRlbnQ6IGdldEZvclZpZXdBbmRTaXplKHZpZXdTdGF0ZS5jZW50ZXIsIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCB2aWV3U3RhdGUucm90YXRpb24sIHNpemUpLFxuICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmZyYW1lSW5kZXhfKyssXG4gICAgICAgICAgICAgICAgbGF5ZXJJbmRleDogMCxcbiAgICAgICAgICAgICAgICBsYXllclN0YXRlc0FycmF5OiB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCksXG4gICAgICAgICAgICAgICAgcGl4ZWxSYXRpbzogdGhpcy5waXhlbFJhdGlvXyxcbiAgICAgICAgICAgICAgICBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTogdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8sXG4gICAgICAgICAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9uczogW10sXG4gICAgICAgICAgICAgICAgc2l6ZTogc2l6ZSxcbiAgICAgICAgICAgICAgICB0aWxlUXVldWU6IHRoaXMudGlsZVF1ZXVlXyxcbiAgICAgICAgICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICAgICAgICAgIHVzZWRUaWxlczoge30sXG4gICAgICAgICAgICAgICAgdmlld1N0YXRlOiB2aWV3U3RhdGUsXG4gICAgICAgICAgICAgICAgdmlld0hpbnRzOiB2aWV3SGludHMsXG4gICAgICAgICAgICAgICAgd2FudGVkVGlsZXM6IHt9LFxuICAgICAgICAgICAgICAgIG1hcElkOiBnZXRVaWQodGhpcyksXG4gICAgICAgICAgICAgICAgcmVuZGVyVGFyZ2V0czoge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHZpZXdTdGF0ZS5uZXh0Q2VudGVyICYmIHZpZXdTdGF0ZS5uZXh0UmVzb2x1dGlvbikge1xuICAgICAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IGlzTmFOKHZpZXdTdGF0ZS5uZXh0Um90YXRpb24pXG4gICAgICAgICAgICAgICAgICAgID8gdmlld1N0YXRlLnJvdGF0aW9uXG4gICAgICAgICAgICAgICAgICAgIDogdmlld1N0YXRlLm5leHRSb3RhdGlvbjtcbiAgICAgICAgICAgICAgICBmcmFtZVN0YXRlLm5leHRFeHRlbnQgPSBnZXRGb3JWaWV3QW5kU2l6ZSh2aWV3U3RhdGUubmV4dENlbnRlciwgdmlld1N0YXRlLm5leHRSZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mcmFtZVN0YXRlXyA9IGZyYW1lU3RhdGU7XG4gICAgICAgIHRoaXMucmVuZGVyZXJfLnJlbmRlckZyYW1lKGZyYW1lU3RhdGUpO1xuICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKGZyYW1lU3RhdGUuYW5pbWF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLCBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzRnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBtb3ZlU3RhcnQgPSAhdGhpcy5wcmV2aW91c0V4dGVudF8gfHxcbiAgICAgICAgICAgICAgICAgICAgKCFpc0VtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgIWVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pKTtcbiAgICAgICAgICAgICAgICBpZiAobW92ZVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLk1PVkVTVEFSVCwgdGhpcywgcHJldmlvdXNGcmFtZVN0YXRlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNFeHRlbnRfID0gY3JlYXRlT3JVcGRhdGVFbXB0eSh0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGlkbGUgPSB0aGlzLnByZXZpb3VzRXh0ZW50XyAmJlxuICAgICAgICAgICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5BTklNQVRJTkddICYmXG4gICAgICAgICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSAmJlxuICAgICAgICAgICAgICAgICFlcXVhbHMoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcbiAgICAgICAgICAgIGlmIChpZGxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuTU9WRUVORCwgdGhpcywgZnJhbWVTdGF0ZSkpO1xuICAgICAgICAgICAgICAgIGNsb25lKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBNYXBFdmVudChNYXBFdmVudFR5cGUuUE9TVFJFTkRFUiwgdGhpcywgZnJhbWVTdGF0ZSkpO1xuICAgICAgICB0aGlzLnJlbmRlckNvbXBsZXRlXyA9XG4gICAgICAgICAgICAhdGhpcy50aWxlUXVldWVfLmdldFRpbGVzTG9hZGluZygpICYmXG4gICAgICAgICAgICAgICAgIXRoaXMudGlsZVF1ZXVlXy5nZXRDb3VudCgpICYmXG4gICAgICAgICAgICAgICAgIXRoaXMuZ2V0TG9hZGluZygpO1xuICAgICAgICBpZiAoIXRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfKSB7XG4gICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF90aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVQb3N0UmVuZGVyKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbGF5ZXJncm91cCBvZiB0aGlzIG1hcC5cbiAgICAgKiBAcGFyYW0ge0xheWVyR3JvdXB9IGxheWVyR3JvdXAgQSBsYXllciBncm91cCBjb250YWluaW5nIHRoZSBsYXllcnMgaW4gdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRMYXllckdyb3VwID0gZnVuY3Rpb24gKGxheWVyR3JvdXApIHtcbiAgICAgICAgdmFyIG9sZExheWVyR3JvdXAgPSB0aGlzLmdldExheWVyR3JvdXAoKTtcbiAgICAgICAgaWYgKG9sZExheWVyR3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTGF5ZXJSZW1vdmVfKG5ldyBHcm91cEV2ZW50KCdyZW1vdmVsYXllcicsIG9sZExheWVyR3JvdXApKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5MQVlFUkdST1VQLCBsYXllckdyb3VwKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc2l6ZSBvZiB0aGlzIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfHVuZGVmaW5lZH0gc2l6ZSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlNJWkUsIHNpemUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB0YXJnZXQgZWxlbWVudCB0byByZW5kZXIgdGhpcyBtYXAgaW50by5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gVGhlIEVsZW1lbnQgb3IgaWQgb2YgdGhlIEVsZW1lbnRcbiAgICAgKiAgICAgdGhhdCB0aGUgbWFwIGlzIHJlbmRlcmVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0VGFyZ2V0ID0gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5UQVJHRVQsIHRhcmdldCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZpZXcgZm9yIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7Vmlld3xQcm9taXNlPGltcG9ydChcIi4vVmlldy5qc1wiKS5WaWV3T3B0aW9ucz59IHZpZXcgVGhlIHZpZXcgdGhhdCBjb250cm9scyB0aGlzIG1hcC5cbiAgICAgKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHBhc3MgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gb3B0aW9ucyBmb3IgY29uc3RydWN0aW5nIGEgdmlldy4gIFRoaXNcbiAgICAgKiBhbHRlcm5hdGl2ZSBhbGxvd3MgdmlldyBwcm9wZXJ0aWVzIHRvIGJlIHJlc29sdmVkIGJ5IHNvdXJjZXMgb3Igb3RoZXIgY29tcG9uZW50cyB0aGF0IGxvYWRcbiAgICAgKiB2aWV3LXJlbGF0ZWQgbWV0YWRhdGEuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRWaWV3ID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgaWYgKCF2aWV3IHx8IHZpZXcgaW5zdGFuY2VvZiBWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5WSUVXLCB2aWV3KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldChNYXBQcm9wZXJ0eS5WSUVXLCBuZXcgVmlldygpKTtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXM7XG4gICAgICAgIHZpZXcudGhlbihmdW5jdGlvbiAodmlld09wdGlvbnMpIHtcbiAgICAgICAgICAgIG1hcC5zZXRWaWV3KG5ldyBWaWV3KHZpZXdPcHRpb25zKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRm9yY2UgYSByZWNhbGN1bGF0aW9uIG9mIHRoZSBtYXAgdmlld3BvcnQgc2l6ZS4gIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCB3aGVuXG4gICAgICogdGhpcmQtcGFydHkgY29kZSBjaGFuZ2VzIHRoZSBzaXplIG9mIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUudXBkYXRlU2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRhcmdldEVsZW1lbnQgPSB0aGlzLmdldFRhcmdldEVsZW1lbnQoKTtcbiAgICAgICAgdmFyIHNpemUgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGFyZ2V0RWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0YXJnZXRFbGVtZW50Lm9mZnNldFdpZHRoIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlckxlZnRXaWR0aCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nTGVmdCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nUmlnaHQnXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyUmlnaHRXaWR0aCddKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0YXJnZXRFbGVtZW50Lm9mZnNldEhlaWdodCAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJUb3BXaWR0aCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydwYWRkaW5nVG9wJ10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdCb3R0b20nXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyQm90dG9tV2lkdGgnXSk7XG4gICAgICAgICAgICBpZiAoIWlzTmFOKHdpZHRoKSAmJiAhaXNOYU4oaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHNpemUgPSBbd2lkdGgsIGhlaWdodF07XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNBcmVhKHNpemUpICYmXG4gICAgICAgICAgICAgICAgICAgICEhKHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0IHx8XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LmdldENsaWVudFJlY3RzKCkubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiTm8gbWFwIHZpc2libGUgYmVjYXVzZSB0aGUgbWFwIGNvbnRhaW5lcidzIHdpZHRoIG9yIGhlaWdodCBhcmUgMC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U2l6ZShzaXplKTtcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydFNpemVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWNvbXB1dGVzIHRoZSB2aWV3cG9ydCBzaXplIGFuZCBzYXZlIGl0IG9uIHRoZSB2aWV3IG9iamVjdCAoaWYgYW55KVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51cGRhdGVWaWV3cG9ydFNpemVfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgdmFyIHNpemUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICAgICAgaWYgKGNvbXB1dGVkU3R5bGUud2lkdGggJiYgY29tcHV0ZWRTdHlsZS5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBzaXplID0gW1xuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChjb21wdXRlZFN0eWxlLndpZHRoLCAxMCksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGNvbXB1dGVkU3R5bGUuaGVpZ2h0LCAxMCksXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZpZXcuc2V0Vmlld3BvcnRTaXplKHNpemUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUGx1Z2dhYmxlTWFwO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7TWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAqIEByZXR1cm4ge01hcE9wdGlvbnNJbnRlcm5hbH0gSW50ZXJuYWwgbWFwIG9wdGlvbnMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNJbnRlcm5hbChvcHRpb25zKSB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge0hUTUxFbGVtZW50fERvY3VtZW50fVxuICAgICAqL1xuICAgIHZhciBrZXlib2FyZEV2ZW50VGFyZ2V0ID0gbnVsbDtcbiAgICBpZiAob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5Ym9hcmRFdmVudFRhcmdldCA9XG4gICAgICAgICAgICB0eXBlb2Ygb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0ID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0KVxuICAgICAgICAgICAgICAgIDogb3B0aW9ucy5rZXlib2FyZEV2ZW50VGFyZ2V0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgKj59XG4gICAgICovXG4gICAgdmFyIHZhbHVlcyA9IHt9O1xuICAgIHZhciBsYXllckdyb3VwID0gb3B0aW9ucy5sYXllcnMgJiZcbiAgICAgICAgdHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLmxheWVycykuZ2V0TGF5ZXJzKSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICA/IC8qKiBAdHlwZSB7TGF5ZXJHcm91cH0gKi8gKG9wdGlvbnMubGF5ZXJzKVxuICAgICAgICA6IG5ldyBMYXllckdyb3VwKHsgbGF5ZXJzOiAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmxheWVycykgfSk7XG4gICAgdmFsdWVzW01hcFByb3BlcnR5LkxBWUVSR1JPVVBdID0gbGF5ZXJHcm91cDtcbiAgICB2YWx1ZXNbTWFwUHJvcGVydHkuVEFSR0VUXSA9IG9wdGlvbnMudGFyZ2V0O1xuICAgIHZhbHVlc1tNYXBQcm9wZXJ0eS5WSUVXXSA9XG4gICAgICAgIG9wdGlvbnMudmlldyBpbnN0YW5jZW9mIFZpZXcgPyBvcHRpb25zLnZpZXcgOiBuZXcgVmlldygpO1xuICAgIHZhciBjb250cm9scztcbiAgICBpZiAob3B0aW9ucy5jb250cm9scyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMuY29udHJvbHMpKSB7XG4gICAgICAgICAgICBjb250cm9scyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMuY29udHJvbHMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NlcnQodHlwZW9mICggLyoqIEB0eXBlIHs/fSAqLyhvcHRpb25zLmNvbnRyb2xzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsIDQ3KTsgLy8gRXhwZWN0ZWQgYGNvbnRyb2xzYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICAgICAgICBjb250cm9scyA9IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMuY29udHJvbHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBpbnRlcmFjdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMuaW50ZXJhY3Rpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5pbnRlcmFjdGlvbnMpKSB7XG4gICAgICAgICAgICBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLmludGVyYWN0aW9ucy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMuaW50ZXJhY3Rpb25zKS5nZXRBcnJheSkgPT09XG4gICAgICAgICAgICAgICAgJ2Z1bmN0aW9uJywgNDgpOyAvLyBFeHBlY3RlZCBgaW50ZXJhY3Rpb25zYCB0byBiZSBhbiBhcnJheSBvciBhbiBgaW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25gXG4gICAgICAgICAgICBpbnRlcmFjdGlvbnMgPSAvKiogQHR5cGUge0NvbGxlY3Rpb259ICovIChvcHRpb25zLmludGVyYWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIG92ZXJsYXlzO1xuICAgIGlmIChvcHRpb25zLm92ZXJsYXlzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5vdmVybGF5cykpIHtcbiAgICAgICAgICAgIG92ZXJsYXlzID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5vdmVybGF5cy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMub3ZlcmxheXMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJywgNDkpOyAvLyBFeHBlY3RlZCBgb3ZlcmxheXNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIG92ZXJsYXlzID0gb3B0aW9ucy5vdmVybGF5cztcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb250cm9sczogY29udHJvbHMsXG4gICAgICAgIGludGVyYWN0aW9uczogaW50ZXJhY3Rpb25zLFxuICAgICAgICBrZXlib2FyZEV2ZW50VGFyZ2V0OiBrZXlib2FyZEV2ZW50VGFyZ2V0LFxuICAgICAgICBvdmVybGF5czogb3ZlcmxheXMsXG4gICAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgIH07XG59XG5leHBvcnQgZGVmYXVsdCBQbHVnZ2FibGVNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QbHVnZ2FibGVNYXAuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0NvbnRyb2xcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi4vTWFwRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHJlbW92ZU5vZGUgfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fSBbZWxlbWVudF0gVGhlIGVsZW1lbnQgaXMgdGhlIGNvbnRyb2wnc1xuICogY29udGFpbmVyIGVsZW1lbnQuIFRoaXMgb25seSBuZWVkcyB0byBiZSBzcGVjaWZpZWQgaWYgeW91J3JlIGRldmVsb3BpbmdcbiAqIGEgY3VzdG9tIGNvbnRyb2wuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuXG4gKiB0aGUgY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnRcbiAqIHRoZSBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCBpcyBhIHZpc2libGUgd2lkZ2V0IHdpdGggYSBET00gZWxlbWVudCBpbiBhIGZpeGVkIHBvc2l0aW9uIG9uIHRoZVxuICogc2NyZWVuLiBUaGV5IGNhbiBpbnZvbHZlIHVzZXIgaW5wdXQgKGJ1dHRvbnMpLCBvciBiZSBpbmZvcm1hdGlvbmFsIG9ubHk7XG4gKiB0aGUgcG9zaXRpb24gaXMgZGV0ZXJtaW5lZCB1c2luZyBDU1MuIEJ5IGRlZmF1bHQgdGhlc2UgYXJlIHBsYWNlZCBpbiB0aGVcbiAqIGNvbnRhaW5lciB3aXRoIENTUyBjbGFzcyBuYW1lIGBvbC1vdmVybGF5Y29udGFpbmVyLXN0b3BldmVudGAsIGJ1dCBjYW4gdXNlXG4gKiBhbnkgb3V0c2lkZSBET00gZWxlbWVudC5cbiAqXG4gKiBUaGlzIGlzIHRoZSBiYXNlIGNsYXNzIGZvciBjb250cm9scy4gWW91IGNhbiB1c2UgaXQgZm9yIHNpbXBsZSBjdXN0b21cbiAqIGNvbnRyb2xzIGJ5IGNyZWF0aW5nIHRoZSBlbGVtZW50IHdpdGggbGlzdGVuZXJzLCBjcmVhdGluZyBhbiBpbnN0YW5jZTpcbiAqIGBgYGpzXG4gKiB2YXIgbXlDb250cm9sID0gbmV3IENvbnRyb2woe2VsZW1lbnQ6IG15RWxlbWVudH0pO1xuICogYGBgXG4gKiBhbmQgdGhlbiBhZGRpbmcgdGhpcyB0byB0aGUgbWFwLlxuICpcbiAqIFRoZSBtYWluIGFkdmFudGFnZSBvZiBoYXZpbmcgdGhpcyBhcyBhIGNvbnRyb2wgcmF0aGVyIHRoYW4gYSBzaW1wbGUgc2VwYXJhdGVcbiAqIERPTSBlbGVtZW50IGlzIHRoYXQgcHJldmVudGluZyBwcm9wYWdhdGlvbiBpcyBoYW5kbGVkIGZvciB5b3UuIENvbnRyb2xzXG4gKiB3aWxsIGFsc28gYmUgb2JqZWN0cyBpbiBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSwgc28geW91IGNhbiB1c2UgdGhlaXIgbWV0aG9kcy5cbiAqXG4gKiBZb3UgY2FuIGFsc28gZXh0ZW5kIHRoaXMgYmFzZSBmb3IgeW91ciBvd24gY29udHJvbCBjbGFzcy4gU2VlXG4gKiBleGFtcGxlcy9jdXN0b20tY29udHJvbHMgZm9yIGFuIGV4YW1wbGUgb2YgaG93IHRvIGRvIHRoaXMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQ29udHJvbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29udHJvbCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgQ29udHJvbCBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbnRyb2wob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudDtcbiAgICAgICAgaWYgKGVsZW1lbnQgJiYgIW9wdGlvbnMudGFyZ2V0ICYmICFlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudCA/IGVsZW1lbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxpc3RlbmVyS2V5cyA9IFtdO1xuICAgICAgICBpZiAob3B0aW9ucy5yZW5kZXIpIHtcbiAgICAgICAgICAgIF90aGlzLnJlbmRlciA9IG9wdGlvbnMucmVuZGVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnRhcmdldCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0VGFyZ2V0KG9wdGlvbnMudGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVtb3ZlTm9kZSh0aGlzLmVsZW1lbnQpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgY29udHJvbC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBjb250cm9sIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAgICogdGhlIG1hcCBoZXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmxpc3RlbmVyS2V5c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0ZW5lcktleXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXRfXG4gICAgICAgICAgICAgICAgPyB0aGlzLnRhcmdldF9cbiAgICAgICAgICAgICAgICA6IG1hcC5nZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50KCk7XG4gICAgICAgICAgICB0YXJnZXQuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlciAhPT0gVk9JRCkge1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJLZXlzLnB1c2gobGlzdGVuKG1hcCwgTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMucmVuZGVyLCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbmRlcnMgdGhlIGNvbnRyb2wuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtYXBFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBzZXQgYSB0YXJnZXQgZWxlbWVudCBmb3IgdGhlIGNvbnRyb2wuIEl0IGhhcyBub1xuICAgICAqIGVmZmVjdCBpZiBpdCBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGNvbnRyb2wgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIG1hcCAoaS5lLlxuICAgICAqIGFmdGVyIGBzZXRNYXBgIGlzIGNhbGxlZCBvbiB0aGUgY29udHJvbCkuIElmIG5vIGB0YXJnZXRgIGlzIHNldCBpbiB0aGVcbiAgICAgKiBvcHRpb25zIHBhc3NlZCB0byB0aGUgY29udHJvbCBjb25zdHJ1Y3RvciBhbmQgaWYgYHNldFRhcmdldGAgaXMgbm90IGNhbGxlZFxuICAgICAqIHRoZW4gdGhlIGNvbnRyb2wgaXMgYWRkZWQgdG8gdGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSB0YXJnZXQgVGFyZ2V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0XyA9XG4gICAgICAgICAgICB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29udHJvbDtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQ29udHJvbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbnRyb2wuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL0F0dHJpYnV0aW9uXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfQ09MTEFQU0VELCBDTEFTU19DT05UUk9MLCBDTEFTU19VTlNFTEVDVEFCTEUgfSBmcm9tICcuLi9jc3MuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi4vYXJyYXkuanMnO1xuaW1wb3J0IHsgaW5WaWV3IH0gZnJvbSAnLi4vbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IHsgcmVtb3ZlQ2hpbGRyZW4sIHJlcGxhY2VOb2RlIH0gZnJvbSAnLi4vZG9tLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWF0dHJpYnV0aW9uJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3VcbiAqIHdhbnQgdGhlIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3NcbiAqIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbY29sbGFwc2libGVdIFNwZWNpZnkgaWYgYXR0cmlidXRpb25zIGNhblxuICogYmUgY29sbGFwc2VkLiBJZiBub3Qgc3BlY2lmaWVkLCBzb3VyY2VzIGNvbnRyb2wgdGhpcyBiZWhhdmlvciB3aXRoIHRoZWlyXG4gKiBgYXR0cmlidXRpb25zQ29sbGFwc2libGVgIHNldHRpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb2xsYXBzZWQ9dHJ1ZV0gU3BlY2lmeSBpZiBhdHRyaWJ1dGlvbnMgc2hvdWxkXG4gKiBiZSBjb2xsYXBzZWQgYXQgc3RhcnR1cC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J0F0dHJpYnV0aW9ucyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbbGFiZWw9J2knXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlXG4gKiBjb2xsYXBzZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtleHBhbmRDbGFzc05hbWU9Y2xhc3NOYW1lICsgJy1leHBhbmQnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlXG4gKiBjb2xsYXBzZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbY29sbGFwc2VMYWJlbD0n4oC6J10gVGV4dCBsYWJlbCB0byB1c2VcbiAqIGZvciB0aGUgZXhwYW5kZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb2xsYXBzZUNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWNvbGxhcHNlJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZVxuICogZXhwYW5kZWQgYXR0cmlidXRpb25zIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW5cbiAqIHRoZSBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQ29udHJvbCB0byBzaG93IGFsbCB0aGUgYXR0cmlidXRpb25zIGFzc29jaWF0ZWQgd2l0aCB0aGUgbGF5ZXIgc291cmNlc1xuICogaW4gdGhlIG1hcC4gVGhpcyBjb250cm9sIGlzIG9uZSBvZiB0aGUgZGVmYXVsdCBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzLlxuICogQnkgZGVmYXVsdCBpdCB3aWxsIHNob3cgaW4gdGhlIGJvdHRvbSByaWdodCBwb3J0aW9uIG9mIHRoZSBtYXAsIGJ1dCB0aGlzIGNhblxuICogYmUgY2hhbmdlZCBieSB1c2luZyBhIGNzcyBzZWxlY3RvciBmb3IgYC5vbC1hdHRyaWJ1dGlvbmAuXG4gKlxuICogQGFwaVxuICovXG52YXIgQXR0cmlidXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEF0dHJpYnV0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBBdHRyaWJ1dGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEF0dHJpYnV0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bEVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29sbGFwc2VkXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbGxhcHNlZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzZWQgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51c2VyQ29sbGFwc2VkXyA9IF90aGlzLmNvbGxhcHNlZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJyaWRlQ29sbGFwc2libGVfID0gb3B0aW9ucy5jb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb2xsYXBzaWJsZV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jb2xsYXBzaWJsZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzaWJsZSA6IHRydWU7XG4gICAgICAgIGlmICghX3RoaXMuY29sbGFwc2libGVfKSB7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZWRfID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1hdHRyaWJ1dGlvbic7XG4gICAgICAgIHZhciB0aXBMYWJlbCA9IG9wdGlvbnMudGlwTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlwTGFiZWwgOiAnQXR0cmlidXRpb25zJztcbiAgICAgICAgdmFyIGV4cGFuZENsYXNzTmFtZSA9IG9wdGlvbnMuZXhwYW5kQ2xhc3NOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5leHBhbmRDbGFzc05hbWVcbiAgICAgICAgICAgIDogY2xhc3NOYW1lICsgJy1leHBhbmQnO1xuICAgICAgICB2YXIgY29sbGFwc2VMYWJlbCA9IG9wdGlvbnMuY29sbGFwc2VMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jb2xsYXBzZUxhYmVsIDogJ1xcdTIwM0EnO1xuICAgICAgICB2YXIgY29sbGFwc2VDbGFzc05hbWUgPSBvcHRpb25zLmNvbGxhcHNlQ2xhc3NOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5jb2xsYXBzZUNsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWNvbGxwYXNlJztcbiAgICAgICAgaWYgKHR5cGVvZiBjb2xsYXBzZUxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfLnRleHRDb250ZW50ID0gY29sbGFwc2VMYWJlbDtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfLmNsYXNzTmFtZSA9IGNvbGxhcHNlQ2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8gPSBjb2xsYXBzZUxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsYWJlbCA9IG9wdGlvbnMubGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGFiZWwgOiAnaSc7XG4gICAgICAgIGlmICh0eXBlb2YgbGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLmNsYXNzTmFtZSA9IGV4cGFuZENsYXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhY3RpdmVMYWJlbCA9IF90aGlzLmNvbGxhcHNpYmxlXyAmJiAhX3RoaXMuY29sbGFwc2VkXyA/IF90aGlzLmNvbGxhcHNlTGFiZWxfIDogX3RoaXMubGFiZWxfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIV90aGlzLmNvbGxhcHNlZF8pKTtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy50aXRsZSA9IHRpcExhYmVsO1xuICAgICAgICBfdGhpcy50b2dnbGVCdXR0b25fLmFwcGVuZENoaWxkKGFjdGl2ZUxhYmVsKTtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICtcbiAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICBDTEFTU19VTlNFTEVDVEFCTEUgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIENMQVNTX0NPTlRST0wgK1xuICAgICAgICAgICAgKF90aGlzLmNvbGxhcHNlZF8gJiYgX3RoaXMuY29sbGFwc2libGVfID8gJyAnICsgQ0xBU1NfQ09MTEFQU0VEIDogJycpICtcbiAgICAgICAgICAgIChfdGhpcy5jb2xsYXBzaWJsZV8gPyAnJyA6ICcgb2wtdW5jb2xsYXBzaWJsZScpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChfdGhpcy50b2dnbGVCdXR0b25fKTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChfdGhpcy51bEVsZW1lbnRfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiBjdXJyZW50bHkgcmVuZGVyZWQgcmVzb2x1dGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxzdHJpbmc+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbGxlY3QgYSBsaXN0IG9mIHZpc2libGUgYXR0cmlidXRpb25zIGFuZCBzZXQgdGhlIGNvbGxhcHNpYmxlIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gQXR0cmlidXRpb25zLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVzZWQgdG8gZGV0ZXJtaW5lIGlmIGFuIGF0dHJpYnV0aW9uIGFscmVhZHkgZXhpc3RzLlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIGxvb2t1cCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBsaXN0IG9mIHZpc2libGUgYXR0cmlidXRpb25zLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciB2aXNpYmxlQXR0cmlidXRpb25zID0gW107XG4gICAgICAgIHZhciBjb2xsYXBzaWJsZSA9IHRydWU7XG4gICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcbiAgICAgICAgICAgIGlmICghaW5WaWV3KGxheWVyU3RhdGUsIGZyYW1lU3RhdGUudmlld1N0YXRlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gKi8gKGxheWVyU3RhdGUubGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGlvbkdldHRlciA9IHNvdXJjZS5nZXRBdHRyaWJ1dGlvbnMoKTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRpb25HZXR0ZXIpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGlvbnMgPSBhdHRyaWJ1dGlvbkdldHRlcihmcmFtZVN0YXRlKTtcbiAgICAgICAgICAgIGlmICghYXR0cmlidXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb2xsYXBzaWJsZSA9XG4gICAgICAgICAgICAgICAgY29sbGFwc2libGUgJiYgc291cmNlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlKCkgIT09IGZhbHNlO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXR0cmlidXRpb25zKSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBqaiA9IGF0dHJpYnV0aW9ucy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGF0dHJpYnV0aW9uc1tqXSBpbiBsb29rdXApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlQXR0cmlidXRpb25zLnB1c2goYXR0cmlidXRpb25zW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb2t1cFthdHRyaWJ1dGlvbnNbal1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghKGF0dHJpYnV0aW9ucyBpbiBsb29rdXApKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVBdHRyaWJ1dGlvbnMucHVzaChhdHRyaWJ1dGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBsb29rdXBbYXR0cmlidXRpb25zXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5vdmVycmlkZUNvbGxhcHNpYmxlXykge1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xsYXBzaWJsZShjb2xsYXBzaWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpc2libGVBdHRyaWJ1dGlvbnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS51cGRhdGVFbGVtZW50XyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhdHRyaWJ1dGlvbnMgPSB0aGlzLmNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfKGZyYW1lU3RhdGUpO1xuICAgICAgICB2YXIgdmlzaWJsZSA9IGF0dHJpYnV0aW9ucy5sZW5ndGggPiAwO1xuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFZpc2libGVfICE9IHZpc2libGUpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gdmlzaWJsZSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdmlzaWJsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXF1YWxzKGF0dHJpYnV0aW9ucywgdGhpcy5yZW5kZXJlZEF0dHJpYnV0aW9uc18pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy51bEVsZW1lbnRfKTtcbiAgICAgICAgLy8gYXBwZW5kIHRoZSBhdHRyaWJ1dGlvbnNcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXR0cmlidXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gYXR0cmlidXRpb25zW2ldO1xuICAgICAgICAgICAgdGhpcy51bEVsZW1lbnRfLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfID0gYXR0cmlidXRpb25zO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgICAgICB0aGlzLnVzZXJDb2xsYXBzZWRfID0gdGhpcy5jb2xsYXBzZWRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuaGFuZGxlVG9nZ2xlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoQ0xBU1NfQ09MTEFQU0VEKTtcbiAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VkXykge1xuICAgICAgICAgICAgcmVwbGFjZU5vZGUodGhpcy5jb2xsYXBzZUxhYmVsXywgdGhpcy5sYWJlbF8pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVwbGFjZU5vZGUodGhpcy5sYWJlbF8sIHRoaXMuY29sbGFwc2VMYWJlbF8pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sbGFwc2VkXyA9ICF0aGlzLmNvbGxhcHNlZF87XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZXhwYW5kZWQnLCBTdHJpbmcoIXRoaXMuY29sbGFwc2VkXykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRpb24gaXMgY29sbGFwc2libGUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzaWJsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmdldENvbGxhcHNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzaWJsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgd2hldGhlciB0aGUgYXR0cmlidXRpb24gc2hvdWxkIGJlIGNvbGxhcHNpYmxlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29sbGFwc2libGUgVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNpYmxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUuc2V0Q29sbGFwc2libGUgPSBmdW5jdGlvbiAoY29sbGFwc2libGUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29sbGFwc2libGVfID09PSBjb2xsYXBzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sbGFwc2libGVfID0gY29sbGFwc2libGU7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdvbC11bmNvbGxhcHNpYmxlJyk7XG4gICAgICAgIGlmICh0aGlzLnVzZXJDb2xsYXBzZWRfKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZV8oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29sbGFwc2Ugb3IgZXhwYW5kIHRoZSBhdHRyaWJ1dGlvbiBhY2NvcmRpbmcgdG8gdGhlIHBhc3NlZCBwYXJhbWV0ZXIuIFdpbGxcbiAgICAgKiBub3QgZG8gYW55dGhpbmcgaWYgdGhlIGF0dHJpYnV0aW9uIGlzbid0IGNvbGxhcHNpYmxlIG9yIGlmIHRoZSBjdXJyZW50XG4gICAgICogY29sbGFwc2VkIHN0YXRlIGlzIGFscmVhZHkgdGhlIG9uZSByZXF1ZXN0ZWQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjb2xsYXBzZWQgVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnNldENvbGxhcHNlZCA9IGZ1bmN0aW9uIChjb2xsYXBzZWQpIHtcbiAgICAgICAgdGhpcy51c2VyQ29sbGFwc2VkXyA9IGNvbGxhcHNlZDtcbiAgICAgICAgaWYgKCF0aGlzLmNvbGxhcHNpYmxlXyB8fCB0aGlzLmNvbGxhcHNlZF8gPT09IGNvbGxhcHNlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGB0cnVlYCB3aGVuIHRoZSBhdHRyaWJ1dGlvbiBpcyBjdXJyZW50bHkgY29sbGFwc2VkIG9yIGBmYWxzZWBcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgd2lkZ2V0IGlzIGNvbGxhcHNlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmdldENvbGxhcHNlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgYXR0cmlidXRpb24gZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlRWxlbWVudF8obWFwRXZlbnQuZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gQXR0cmlidXRpb247XG59KENvbnRyb2wpKTtcbmV4cG9ydCBkZWZhdWx0IEF0dHJpYnV0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QXR0cmlidXRpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL1JvdGF0ZVxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IENMQVNTX0NPTlRST0wsIENMQVNTX0hJRERFTiwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtcm90YXRlJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW2xhYmVsPSfih6cnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHJvdGF0ZSBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlwTGFiZWw9J1Jlc2V0IHJvdGF0aW9uJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb21wYXNzQ2xhc3NOYW1lPSdvbC1jb21wYXNzJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSBjb21wYXNzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdXRvSGlkZT10cnVlXSBIaWRlIHRoZSBjb250cm9sIHdoZW4gcm90YXRpb24gaXMgMC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgc2hvdWxkXG4gKiBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYCBjYWxsYmFjay5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oKTp2b2lkfSBbcmVzZXROb3J0aF0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlIGNvbnRyb2wgaXMgY2xpY2tlZC5cbiAqIFRoaXMgd2lsbCBvdmVycmlkZSB0aGUgZGVmYXVsdCBgcmVzZXROb3J0aGAuXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBidXR0b24gY29udHJvbCB0byByZXNldCByb3RhdGlvbiB0byAwLlxuICogVG8gc3R5bGUgdGhpcyBjb250cm9sIHVzZSBjc3Mgc2VsZWN0b3IgYC5vbC1yb3RhdGVgLiBBIGAub2wtaGlkZGVuYCBjc3NcbiAqIHNlbGVjdG9yIGlzIGFkZGVkIHRvIHRoZSBidXR0b24gd2hlbiB0aGUgcm90YXRpb24gaXMgMC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gUm90YXRlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgcmVuZGVyOiBvcHRpb25zLnJlbmRlcixcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtcm90YXRlJztcbiAgICAgICAgdmFyIGxhYmVsID0gb3B0aW9ucy5sYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5sYWJlbCA6ICdcXHUyMUU3JztcbiAgICAgICAgdmFyIGNvbXBhc3NDbGFzc05hbWUgPSBvcHRpb25zLmNvbXBhc3NDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbXBhc3NDbGFzc05hbWVcbiAgICAgICAgICAgIDogJ29sLWNvbXBhc3MnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFiZWxfID0gbnVsbDtcbiAgICAgICAgaWYgKHR5cGVvZiBsYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc05hbWUgPSBjb21wYXNzQ2xhc3NOYW1lO1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfLnRleHRDb250ZW50ID0gbGFiZWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8gPSBsYWJlbDtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc0xpc3QuYWRkKGNvbXBhc3NDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aXBMYWJlbCA9IG9wdGlvbnMudGlwTGFiZWwgPyBvcHRpb25zLnRpcExhYmVsIDogJ1Jlc2V0IHJvdGF0aW9uJztcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uY2xhc3NOYW1lID0gY2xhc3NOYW1lICsgJy1yZXNldCc7XG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIGJ1dHRvbi50aXRsZSA9IHRpcExhYmVsO1xuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQoX3RoaXMubGFiZWxfKTtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMSUNLLCBfdGhpcy5oYW5kbGVDbGlja18uYmluZChfdGhpcyksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgKyAnICcgKyBDTEFTU19VTlNFTEVDVEFCTEUgKyAnICcgKyBDTEFTU19DT05UUk9MO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChidXR0b24pO1xuICAgICAgICBfdGhpcy5jYWxsUmVzZXROb3J0aF8gPSBvcHRpb25zLnJlc2V0Tm9ydGggPyBvcHRpb25zLnJlc2V0Tm9ydGggOiB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXV0b0hpZGVfID0gb3B0aW9ucy5hdXRvSGlkZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdXRvSGlkZSA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW9uXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKF90aGlzLmF1dG9IaWRlXykge1xuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKENMQVNTX0hJRERFTik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IFRoZSBldmVudCB0byBoYW5kbGVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLmNhbGxSZXNldE5vcnRoXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxSZXNldE5vcnRoXygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNldE5vcnRoXygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUucmVzZXROb3J0aF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgLy8gdGhlIG1hcCBkb2VzIG5vdCBoYXZlIGEgdmlldywgc28gd2UgY2FuJ3QgYWN0XG4gICAgICAgICAgICAvLyB1cG9uIGl0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdmlldy5nZXRSb3RhdGlvbigpO1xuICAgICAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID4gMCAmJiByb3RhdGlvbiAlICgyICogTWF0aC5QSSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3LnNldFJvdGF0aW9uKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHJvdGF0ZSBjb250cm9sIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgUm90YXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgaWYgKHJvdGF0aW9uICE9IHRoaXMucm90YXRpb25fKSB7XG4gICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gJ3JvdGF0ZSgnICsgcm90YXRpb24gKyAncmFkKSc7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGFpbnMgPSB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKENMQVNTX0hJRERFTik7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250YWlucyAmJiByb3RhdGlvbiA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250YWlucyAmJiByb3RhdGlvbiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFiZWxfLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgIH07XG4gICAgcmV0dXJuIFJvdGF0ZTtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgUm90YXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Um90YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9ab29tXG4gKi9cbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfQ09OVFJPTCwgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC16b29tJ10gQ1NTIGNsYXNzIG5hbWUuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JbkNsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWluJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHRoZSB6b29tLWluIGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLW91dCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFt6b29tSW5MYWJlbD0nKyddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1pblxuICogYnV0dG9uLiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbU91dExhYmVsPSfigJMnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHpvb20tb3V0IGJ1dHRvbi5cbiAqIEluc3RlYWQgb2YgdGV4dCwgYWxzbyBhbiBlbGVtZW50IChlLmcuIGEgYHNwYW5gIGVsZW1lbnQpIGNhbiBiZSB1c2VkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tSW5UaXBMYWJlbD0nWm9vbSBpbiddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbem9vbU91dFRpcExhYmVsPSdab29tIG91dCddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgYnV0dG9uIHRpcC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGNsaWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCB3aXRoIDIgYnV0dG9ucywgb25lIGZvciB6b29tIGluIGFuZCBvbmUgZm9yIHpvb20gb3V0LlxuICogVGhpcyBjb250cm9sIGlzIG9uZSBvZiB0aGUgZGVmYXVsdCBjb250cm9scyBvZiBhIG1hcC4gVG8gc3R5bGUgdGhpcyBjb250cm9sXG4gKiB1c2UgY3NzIHNlbGVjdG9ycyBgLm9sLXpvb20taW5gIGFuZCBgLm9sLXpvb20tb3V0YC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBab29tIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIHRhcmdldDogb3B0aW9ucy50YXJnZXQsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtem9vbSc7XG4gICAgICAgIHZhciBkZWx0YSA9IG9wdGlvbnMuZGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuICAgICAgICB2YXIgem9vbUluQ2xhc3NOYW1lID0gb3B0aW9ucy56b29tSW5DbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21JbkNsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLWluJztcbiAgICAgICAgdmFyIHpvb21PdXRDbGFzc05hbWUgPSBvcHRpb25zLnpvb21PdXRDbGFzc05hbWUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21PdXRDbGFzc05hbWVcbiAgICAgICAgICAgIDogY2xhc3NOYW1lICsgJy1vdXQnO1xuICAgICAgICB2YXIgem9vbUluTGFiZWwgPSBvcHRpb25zLnpvb21JbkxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21JbkxhYmVsIDogJysnO1xuICAgICAgICB2YXIgem9vbU91dExhYmVsID0gb3B0aW9ucy56b29tT3V0TGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbU91dExhYmVsIDogJ1xcdTIwMTMnO1xuICAgICAgICB2YXIgem9vbUluVGlwTGFiZWwgPSBvcHRpb25zLnpvb21JblRpcExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnpvb21JblRpcExhYmVsIDogJ1pvb20gaW4nO1xuICAgICAgICB2YXIgem9vbU91dFRpcExhYmVsID0gb3B0aW9ucy56b29tT3V0VGlwTGFiZWwgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnpvb21PdXRUaXBMYWJlbFxuICAgICAgICAgICAgOiAnWm9vbSBvdXQnO1xuICAgICAgICB2YXIgaW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGluRWxlbWVudC5jbGFzc05hbWUgPSB6b29tSW5DbGFzc05hbWU7XG4gICAgICAgIGluRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIGluRWxlbWVudC50aXRsZSA9IHpvb21JblRpcExhYmVsO1xuICAgICAgICBpbkVsZW1lbnQuYXBwZW5kQ2hpbGQodHlwZW9mIHpvb21JbkxhYmVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tSW5MYWJlbClcbiAgICAgICAgICAgIDogem9vbUluTGFiZWwpO1xuICAgICAgICBpbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzLCBkZWx0YSksIGZhbHNlKTtcbiAgICAgICAgdmFyIG91dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgb3V0RWxlbWVudC5jbGFzc05hbWUgPSB6b29tT3V0Q2xhc3NOYW1lO1xuICAgICAgICBvdXRFbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgb3V0RWxlbWVudC50aXRsZSA9IHpvb21PdXRUaXBMYWJlbDtcbiAgICAgICAgb3V0RWxlbWVudC5hcHBlbmRDaGlsZCh0eXBlb2Ygem9vbU91dExhYmVsID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh6b29tT3V0TGFiZWwpXG4gICAgICAgICAgICA6IHpvb21PdXRMYWJlbCk7XG4gICAgICAgIG91dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzLCAtZGVsdGEpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50O1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoaW5FbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChvdXRFbGVtZW50KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgWm9vbS5wcm90b3R5cGUuaGFuZGxlQ2xpY2tfID0gZnVuY3Rpb24gKGRlbHRhLCBldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLnpvb21CeURlbHRhXyhkZWx0YSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgWm9vbSBkZWx0YS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFpvb20ucHJvdG90eXBlLnpvb21CeURlbHRhXyA9IGZ1bmN0aW9uIChkZWx0YSkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgICAgICAgLy8gdXBvbiBpdFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgICAgICBpZiAoY3VycmVudFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIG5ld1pvb20gPSB2aWV3LmdldENvbnN0cmFpbmVkWm9vbShjdXJyZW50Wm9vbSArIGRlbHRhKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgem9vbTogbmV3Wm9vbSxcbiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHRoaXMuZHVyYXRpb25fLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2aWV3LnNldFpvb20obmV3Wm9vbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBab29tO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Wm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQUNUSVZFOiAnYWN0aXZlJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9wZXJ0eS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb25Qcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IGVhc2VPdXQsIGxpbmVhciB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIFJldHVybj59IEludGVyYWN0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBPYmplY3QgbGl0ZXJhbCB3aXRoIGNvbmZpZyBvcHRpb25zIGZvciBpbnRlcmFjdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBJbnRlcmFjdGlvbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOmJvb2xlYW59IGhhbmRsZUV2ZW50XG4gKiBNZXRob2QgY2FsbGVkIGJ5IHRoZSBtYXAgdG8gbm90aWZ5IHRoZSBpbnRlcmFjdGlvbiB0aGF0IGEgYnJvd3NlciBldmVudCB3YXNcbiAqIGRpc3BhdGNoZWQgdG8gdGhlIG1hcC4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgcHJvcGFnYXRpb24gb2ZcbiAqIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9ucyBjaGFpbiB3aWxsIGJlXG4gKiBwcmV2ZW50ZWQgKHRoaXMgaW5jbHVkZXMgZnVuY3Rpb25zIHdpdGggbm8gZXhwbGljaXQgcmV0dXJuKS4gVGhlIGludGVyYWN0aW9uc1xuICogYXJlIHRyYXZlcnNlZCBpbiByZXZlcnNlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgY29sbGVjdGlvbiBvZiB0aGUgbWFwLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIFVzZXIgYWN0aW9ucyB0aGF0IGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIG1hcC4gU29tZSBhcmUgc2ltaWxhciB0byBjb250cm9scyxcbiAqIGJ1dCBhcmUgbm90IGFzc29jaWF0ZWQgd2l0aCBhIERPTSBlbGVtZW50LlxuICogRm9yIGV4YW1wbGUsIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX0gaXNcbiAqIGZ1bmN0aW9uYWxseSB0aGUgc2FtZSBhcyB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfSwgYnV0IHRyaWdnZXJlZFxuICogYnkgYSBrZXlib2FyZCBldmVudCBub3QgYSBidXR0b24gZWxlbWVudCBldmVudC5cbiAqIEFsdGhvdWdoIGludGVyYWN0aW9ucyBkbyBub3QgaGF2ZSBhIERPTSBlbGVtZW50LCBzb21lIG9mIHRoZW0gZG8gcmVuZGVyXG4gKiB2ZWN0b3JzIGFuZCBzbyBhcmUgdmlzaWJsZSBvbiB0aGUgc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgSW50ZXJhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEludGVyYWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SW50ZXJhY3Rpb25PcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW50ZXJhY3Rpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7SW50ZXJhY3Rpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7SW50ZXJhY3Rpb25PblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICBpZiAob3B0X29wdGlvbnMgJiYgb3B0X29wdGlvbnMuaGFuZGxlRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZUV2ZW50ID0gb3B0X29wdGlvbnMuaGFuZGxlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBudWxsO1xuICAgICAgICBfdGhpcy5zZXRBY3RpdmUodHJ1ZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHdoZXRoZXIgdGhlIGludGVyYWN0aW9uIGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBpbnRlcmFjdGlvbiBpcyBhY3RpdmUsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChJbnRlcmFjdGlvblByb3BlcnR5LkFDVElWRSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW50ZXJhY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWN0aXZhdGUgb3IgZGVhY3RpdmF0ZSB0aGUgaW50ZXJhY3Rpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBhY3RpdmUgQWN0aXZlLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRBY3RpdmUgPSBmdW5jdGlvbiAoYWN0aXZlKSB7XG4gICAgICAgIHRoaXMuc2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFLCBhY3RpdmUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBpbnRlcmFjdGlvbiBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgICAqIHRoZSBtYXAgaGVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIHRoaXMubWFwXyA9IG1hcDtcbiAgICB9O1xuICAgIHJldHVybiBJbnRlcmFjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFuKHZpZXcsIGRlbHRhLCBvcHRfZHVyYXRpb24pIHtcbiAgICB2YXIgY3VycmVudENlbnRlciA9IHZpZXcuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICBpZiAoY3VycmVudENlbnRlcikge1xuICAgICAgICB2YXIgY2VudGVyID0gW2N1cnJlbnRDZW50ZXJbMF0gKyBkZWx0YVswXSwgY3VycmVudENlbnRlclsxXSArIGRlbHRhWzFdXTtcbiAgICAgICAgdmlldy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2R1cmF0aW9uIDogMjUwLFxuICAgICAgICAgICAgZWFzaW5nOiBsaW5lYXIsXG4gICAgICAgICAgICBjZW50ZXI6IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoY2VudGVyKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gdmlldyBWaWV3LlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIERlbHRhIGZyb20gcHJldmlvdXMgem9vbSBsZXZlbC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gQW5jaG9yIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBEdXJhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBvcHRfYW5jaG9yLCBvcHRfZHVyYXRpb24pIHtcbiAgICB2YXIgY3VycmVudFpvb20gPSB2aWV3LmdldFpvb20oKTtcbiAgICBpZiAoY3VycmVudFpvb20gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBuZXdab29tID0gdmlldy5nZXRDb25zdHJhaW5lZFpvb20oY3VycmVudFpvb20gKyBkZWx0YSk7XG4gICAgdmFyIG5ld1Jlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3Jab29tKG5ld1pvb20pO1xuICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgIH1cbiAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICByZXNvbHV0aW9uOiBuZXdSZXNvbHV0aW9uLFxuICAgICAgICBhbmNob3I6IG9wdF9hbmNob3IsXG4gICAgICAgIGR1cmF0aW9uOiBvcHRfZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kdXJhdGlvbiA6IDI1MCxcbiAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgIH0pO1xufVxuZXhwb3J0IGRlZmF1bHQgSW50ZXJhY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbnRlcmFjdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbVxuICovXG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZGVsdGE9MV0gVGhlIHpvb20gZGVsdGEgYXBwbGllZCBvbiBlYWNoIGRvdWJsZSBjbGljay5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSBieSBkb3VibGUtY2xpY2tpbmcgb24gdGhlIG1hcC5cbiAqIEBhcGlcbiAqL1xudmFyIERvdWJsZUNsaWNrWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRG91YmxlQ2xpY2tab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERvdWJsZUNsaWNrWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YV8gPSBvcHRpb25zLmRlbHRhID8gb3B0aW9ucy5kZWx0YSA6IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gKGlmIGl0IHdhcyBhXG4gICAgICogZG91YmxlY2xpY2spIGFuZCBldmVudHVhbGx5IHpvb21zIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKi9cbiAgICBEb3VibGVDbGlja1pvb20ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLkRCTENMSUNLKSB7XG4gICAgICAgICAgICB2YXIgYnJvd3NlckV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgYW5jaG9yID0gbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGU7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBicm93c2VyRXZlbnQuc2hpZnRLZXkgPyAtdGhpcy5kZWx0YV8gOiB0aGlzLmRlbHRhXztcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCBhbmNob3IsIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgIGJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIHJldHVybiBEb3VibGVDbGlja1pvb207XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEb3VibGVDbGlja1pvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Eb3VibGVDbGlja1pvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qb2ludGVyXG4gKi9cbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgZ2V0VmFsdWVzIH0gZnJvbSAnLi4vb2JqLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZURvd25FdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZG93blwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIHRoZW4gYSBkcmFnXG4gKiBzZXF1ZW5jZSBpcyBzdGFydGVkLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW2hhbmRsZURyYWdFdmVudF1cbiAqIEZ1bmN0aW9uIGhhbmRsaW5nIFwiZHJhZ1wiIGV2ZW50cy4gVGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgb24gXCJtb3ZlXCIgZXZlbnRzXG4gKiBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZUV2ZW50XVxuICogTWV0aG9kIGNhbGxlZCBieSB0aGUgbWFwIHRvIG5vdGlmeSB0aGUgaW50ZXJhY3Rpb24gdGhhdCBhIGJyb3dzZXIgZXZlbnQgd2FzXG4gKiBkaXNwYXRjaGVkIHRvIHRoZSBtYXAuIFRoZSBmdW5jdGlvbiBtYXkgcmV0dXJuIGBmYWxzZWAgdG8gcHJldmVudCB0aGVcbiAqIHByb3BhZ2F0aW9uIG9mIHRoZSBldmVudCB0byBvdGhlciBpbnRlcmFjdGlvbnMgaW4gdGhlIG1hcCdzIGludGVyYWN0aW9uc1xuICogY2hhaW4uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbaGFuZGxlTW92ZUV2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJtb3ZlXCIgZXZlbnRzLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBcIm1vdmVcIiBldmVudHMuXG4gKiBUaGlzIGZ1bmN0aW9ucyBpcyBhbHNvIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLCBzbyBkdXJpbmcgYSBkcmFnXG4gKiBzZXF1ZW5jZSBib3RoIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCBmdW5jdGlvbiBhbmQgdGhpcyBmdW5jdGlvbiBhcmUgY2FsbGVkLlxuICogSWYgYGhhbmRsZURvd25FdmVudGAgaXMgZGVmaW5lZCBhbmQgaXQgcmV0dXJucyB0cnVlIHRoaXMgZnVuY3Rpb24gd2lsbCBub3RcbiAqIGJlIGNhbGxlZCBkdXJpbmcgYSBkcmFnIHNlcXVlbmNlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gW2hhbmRsZVVwRXZlbnRdXG4gKiAgRnVuY3Rpb24gaGFuZGxpbmcgXCJ1cFwiIGV2ZW50cy4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCB0aGVuIHRoZVxuICogY3VycmVudCBkcmFnIHNlcXVlbmNlIGlzIHN0b3BwZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGJvb2xlYW4pOmJvb2xlYW59IFtzdG9wRG93bl1cbiAqIFNob3VsZCB0aGUgZG93biBldmVudCBiZSBwcm9wYWdhdGVkIHRvIG90aGVyIGludGVyYWN0aW9ucywgb3Igc2hvdWxkIGJlXG4gKiBzdG9wcGVkP1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgdGhhdCBjYWxscyB1c2VyLWRlZmluZWQgZnVuY3Rpb25zIG9uIGBkb3duYCwgYG1vdmVgIGFuZCBgdXBgXG4gKiBldmVudHMuIFRoaXMgY2xhc3MgYWxzbyBtYW5hZ2VzIFwiZHJhZyBzZXF1ZW5jZXNcIi5cbiAqXG4gKiBXaGVuIHRoZSBgaGFuZGxlRG93bkV2ZW50YCB1c2VyIGZ1bmN0aW9uIHJldHVybnMgYHRydWVgIGEgZHJhZyBzZXF1ZW5jZSBpc1xuICogc3RhcnRlZC4gRHVyaW5nIGEgZHJhZyBzZXF1ZW5jZSB0aGUgYGhhbmRsZURyYWdFdmVudGAgdXNlciBmdW5jdGlvbiBpc1xuICogY2FsbGVkIG9uIGBtb3ZlYCBldmVudHMuIFRoZSBkcmFnIHNlcXVlbmNlIGVuZHMgd2hlbiB0aGUgYGhhbmRsZVVwRXZlbnRgXG4gKiB1c2VyIGZ1bmN0aW9uIGlzIGNhbGxlZCBhbmQgcmV0dXJucyBgZmFsc2VgLlxuICogQGFwaVxuICovXG52YXIgUG9pbnRlckludGVyYWN0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2ludGVySW50ZXJhY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9pbnRlckludGVyYWN0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vSW50ZXJhY3Rpb24uanNcIikuSW50ZXJhY3Rpb25PcHRpb25zfSAqLyAob3B0aW9ucykpIHx8IHRoaXM7XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZURvd25FdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRG93bkV2ZW50ID0gb3B0aW9ucy5oYW5kbGVEb3duRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVEcmFnRXZlbnQgPSBvcHRpb25zLmhhbmRsZURyYWdFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVNb3ZlRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZU1vdmVFdmVudCA9IG9wdGlvbnMuaGFuZGxlTW92ZUV2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZVVwRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVVwRXZlbnQgPSBvcHRpb25zLmhhbmRsZVVwRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIF90aGlzLnN0b3BEb3duID0gb3B0aW9ucy5zdG9wRG93bjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgUG9pbnRlckV2ZW50Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrZWRQb2ludGVyc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxQb2ludGVyRXZlbnQ+fVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRQb2ludGVycyA9IFtdO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgbnVtYmVyIG9mIHBvaW50ZXJzIGludm9sdmVkIGluIHRoZSBpbnRlcmFjdGlvbixcbiAgICAgKiBlLmcuIGAyYCB3aGVuIHR3byBmaW5nZXJzIGFyZSB1c2VkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBwb2ludGVycy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5nZXRQb2ludGVyQ291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHsgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudCBtYXAgYnJvd3NlciBldmVudH0gYW5kIG1heSBjYWxsIGludG9cbiAgICAgKiBvdGhlciBmdW5jdGlvbnMsIGlmIGV2ZW50IHNlcXVlbmNlcyBsaWtlIGUuZy4gJ2RyYWcnIG9yICdkb3duLXVwJyBldGMuIGFyZVxuICAgICAqIGRldGVjdGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy51cGRhdGVUcmFja2VkUG9pbnRlcnNfKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIGlmICh0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UpIHtcbiAgICAgICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJEUkFHKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVEcmFnRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICAvLyBwcmV2ZW50IHBhZ2Ugc2Nyb2xsaW5nIGR1cmluZyBkcmFnZ2luZ1xuICAgICAgICAgICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkVXAgPSB0aGlzLmhhbmRsZVVwRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPVxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVkVXAgJiYgdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlZCA9IHRoaXMuaGFuZGxlRG93bkV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlID0gaGFuZGxlZDtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0aGlzLnN0b3BEb3duKGhhbmRsZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW92ZUV2ZW50KG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICFzdG9wRXZlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBtb3ZlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlTW92ZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIFwiZG93blwiIGV2ZW50cyBzaG91bGQgYmUgcHJvcGFnYXRlZFxuICAgICAqIHRvIG90aGVyIGludGVyYWN0aW9ucyBvciBzaG91bGQgYmUgc3RvcHBlZC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhbmRsZWQgV2FzIHRoZSBldmVudCBoYW5kbGVkIGJ5IHRoZSBpbnRlcmFjdGlvbj9cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBTaG91bGQgdGhlIGBkb3duYCBldmVudCBiZSBzdG9wcGVkP1xuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuc3RvcERvd24gPSBmdW5jdGlvbiAoaGFuZGxlZCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUudXBkYXRlVHJhY2tlZFBvaW50ZXJzXyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKGlzUG9pbnRlckRyYWdnaW5nRXZlbnQobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudDtcbiAgICAgICAgICAgIHZhciBpZCA9IGV2ZW50XzEucG9pbnRlcklkLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdID0gZXZlbnRfMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlkIGluIHRoaXMudHJhY2tlZFBvaW50ZXJzXykge1xuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBvbmx5IHdoZW4gdGhlcmUgd2FzIGEgcG9pbnRlcmRvd24gZXZlbnQgZm9yIHRoaXMgcG9pbnRlclxuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50YXJnZXRQb2ludGVycyA9IGdldFZhbHVlcyh0aGlzLnRyYWNrZWRQb2ludGVyc18pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gUG9pbnRlckludGVyYWN0aW9uO1xufShJbnRlcmFjdGlvbikpO1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFBvaW50ZXJFdmVudD59IHBvaW50ZXJFdmVudHMgTGlzdCBvZiBldmVudHMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gQ2VudHJvaWQgcGl4ZWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjZW50cm9pZChwb2ludGVyRXZlbnRzKSB7XG4gICAgdmFyIGxlbmd0aCA9IHBvaW50ZXJFdmVudHMubGVuZ3RoO1xuICAgIHZhciBjbGllbnRYID0gMDtcbiAgICB2YXIgY2xpZW50WSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBjbGllbnRYICs9IHBvaW50ZXJFdmVudHNbaV0uY2xpZW50WDtcbiAgICAgICAgY2xpZW50WSArPSBwb2ludGVyRXZlbnRzW2ldLmNsaWVudFk7XG4gICAgfVxuICAgIHJldHVybiBbY2xpZW50WCAvIGxlbmd0aCwgY2xpZW50WSAvIGxlbmd0aF07XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGV2ZW50IGlzIGEgcG9pbnRlcmRvd24sIHBvaW50ZXJkcmFnXG4gKiAgICAgb3IgcG9pbnRlcnVwIGV2ZW50LlxuICovXG5mdW5jdGlvbiBpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50KG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciB0eXBlID0gbWFwQnJvd3NlckV2ZW50LnR5cGU7XG4gICAgcmV0dXJuICh0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJET1dOIHx8XG4gICAgICAgIHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcgfHxcbiAgICAgICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVApO1xufVxuZXhwb3J0IGRlZmF1bHQgUG9pbnRlckludGVyYWN0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9pbnRlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL2NvbmRpdGlvblxuICovXG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IEZBTFNFLCBUUlVFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IE1BQywgV0VCS0lUIH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCwgdHJ1ZSBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gQ29uZGl0aW9uXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIGNvbmRpdGlvbiBmdW5jdGlvbiB0aGF0IHBhc3NlcyB3aGVuIGFsbCBwcm92aWRlZCBjb25kaXRpb25zIHBhc3MuXG4gKiBAcGFyYW0gey4uLkNvbmRpdGlvbn0gdmFyX2FyZ3MgQ29uZGl0aW9ucyB0byBjaGVjay5cbiAqIEByZXR1cm4ge0NvbmRpdGlvbn0gQ29uZGl0aW9uIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsKHZhcl9hcmdzKSB7XG4gICAgdmFyIGNvbmRpdGlvbnMgPSBhcmd1bWVudHM7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQWxsIGNvbmRpdGlvbnMgcGFzc2VkLlxuICAgICAqL1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHBhc3MgPSB0cnVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb25kaXRpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHBhc3MgPSBwYXNzICYmIGNvbmRpdGlvbnNbaV0oZXZlbnQpO1xuICAgICAgICAgICAgaWYgKCFwYXNzKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhc3M7XG4gICAgfTtcbn1cbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlIChlLmcuIHdoZW5cbiAqIGFkZGl0aW9uYWxseSB0aGUgc2hpZnQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdEtleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAob3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgYW5kIHNoaWZ0LWtleSBpcyBwcmVzc2VkLCBgZmFsc2VgIG90aGVyd2lzZVxuICogKGUuZy4gd2hlbiBhZGRpdGlvbmFsbHkgdGhlIHBsYXRmb3JtLW1vZGlmaWVyLWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIGFsdCBhbmQgc2hpZnQga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHRTaGlmdEtleXNPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKG9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy4gVGhpcyBjb25kaXRpb24gcmVxdWlyZXMgYSBtYXAgdGFyZ2V0XG4gKiBlbGVtZW50IHdpdGggYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSwgZS5nLiBgPGRpdiBpZD1cIm1hcFwiIHRhYmluZGV4PVwiMVwiPmAuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGV2ZW50Lm1hcC5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBldmVudC5tYXAuZ2V0T3duZXJEb2N1bWVudCgpLmFjdGl2ZUVsZW1lbnQ7XG4gICAgcmV0dXJuIHRhcmdldEVsZW1lbnQuY29udGFpbnMoYWN0aXZlRWxlbWVudCk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBtYXAgaGFzIHRoZSBmb2N1cyBvciBubyAndGFiaW5kZXgnIGF0dHJpYnV0ZSBzZXQuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgbWFwIGNvbnRhaW5lciBoYXMgdGhlIGZvY3VzIG9yIG5vICd0YWJpbmRleCcgYXR0cmlidXRlLlxuICovXG5leHBvcnQgdmFyIGZvY3VzV2l0aFRhYmluZGV4ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50Lm1hcC5nZXRUYXJnZXRFbGVtZW50KCkuaGFzQXR0cmlidXRlKCd0YWJpbmRleCcpXG4gICAgICAgID8gZm9jdXMoZXZlbnQpXG4gICAgICAgIDogdHJ1ZTtcbn07XG4vKipcbiAqIFJldHVybiBhbHdheXMgdHJ1ZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsd2F5cyA9IFRSVUU7XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgYGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBjbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5DTElDSztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGhhcyBhbiBcImFjdGlvblwiLXByb2R1Y2luZyBtb3VzZSBidXR0b24uXG4gKlxuICogQnkgZGVmaW5pdGlvbiwgdGhpcyBpbmNsdWRlcyBsZWZ0LWNsaWNrIG9uIHdpbmRvd3MvbGludXgsIGFuZCBsZWZ0LWNsaWNrXG4gKiB3aXRob3V0IHRoZSBjdHJsIGtleSBvbiBNYWNzLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCB2YXIgbW91c2VBY3Rpb25CdXR0b24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuIG9yaWdpbmFsRXZlbnQuYnV0dG9uID09IDAgJiYgIShXRUJLSVQgJiYgTUFDICYmIG9yaWdpbmFsRXZlbnQuY3RybEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIGZhbHNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IEZhbHNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG5ldmVyID0gRkFMU0U7XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LCBgZmFsc2VgXG4gKiBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYnJvd3NlciBldmVudCBpcyBhIGBwb2ludGVybW92ZWAgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgcG9pbnRlck1vdmUgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09ICdwb2ludGVybW92ZSc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgc2luZ2xlY2xpY2tgIGV2ZW50LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBhIG1hcCBgc2luZ2xlY2xpY2tgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHNpbmdsZUNsaWNrID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlNJTkdMRUNMSUNLO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYGRibGNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBkb3VibGVDbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5EQkxDTElDSztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgbm8gbW9kaWZpZXIga2V5IChhbHQtLCBzaGlmdC0gb3IgcGxhdGZvcm0tbW9kaWZpZXIta2V5KSBpc1xuICogcHJlc3NlZC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIG9ubHkgaWYgdGhlcmUgbm8gbW9kaWZpZXIga2V5cyBhcmUgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBub01vZGlmaWVyS2V5cyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuICghb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICAhb3JpZ2luYWxFdmVudC5zaGlmdEtleSk7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIHBsYXRmb3JtLW1vZGlmaWVyLWtleSAodGhlIG1ldGEta2V5IG9uIE1hYyxcbiAqIGN0cmwta2V5IG90aGVyd2lzZSkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlbiBhZGRpdGlvbmFsbHlcbiAqIHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBwbGF0Zm9ybSBtb2RpZmllciBrZXkgaXMgcHJlc3NlZC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwbGF0Zm9ybU1vZGlmaWVyS2V5T25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuICghb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgKE1BQyA/IG9yaWdpbmFsRXZlbnQubWV0YUtleSA6IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBhbHQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgc2hpZnQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2hpZnRLZXlPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICByZXR1cm4gKCFvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgIG9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLCBpLmUuIG5vdCBhIGA8aW5wdXQ+YC0sXG4gKiBgPHNlbGVjdD5gLSBvciBgPHRleHRhcmVhPmAtZWxlbWVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBvbmx5IGlmIHRoZSB0YXJnZXQgZWxlbWVudCBpcyBub3QgZWRpdGFibGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgdGFyZ2V0Tm90RWRpdGFibGUgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHZhciB0YWdOYW1lID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAob3JpZ2luYWxFdmVudC50YXJnZXQpLnRhZ05hbWU7XG4gICAgcmV0dXJuIHRhZ05hbWUgIT09ICdJTlBVVCcgJiYgdGFnTmFtZSAhPT0gJ1NFTEVDVCcgJiYgdGFnTmFtZSAhPT0gJ1RFWFRBUkVBJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIG1vdXNlIGRldmljZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBtb3VzZSBkZXZpY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbW91c2VPbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZlbnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZlbnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gICAgcmV0dXJuIHBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PSAnbW91c2UnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgdG91Y2hhYmxlIGRldmljZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSB0b3VjaGFibGUgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHRvdWNoT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlckV2dCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gICAgcmV0dXJuIHBvaW50ZXJFdnQucG9pbnRlclR5cGUgPT09ICd0b3VjaCc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBkaWdpdGFsIHBlbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBkaWdpdGFsIHBlbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBwZW5Pbmx5ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBwb2ludGVyRXZ0ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2dCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIC8vIHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jd2lkbC1Qb2ludGVyRXZlbnQtcG9pbnRlclR5cGVcbiAgICByZXR1cm4gcG9pbnRlckV2dC5wb2ludGVyVHlwZSA9PT0gJ3Blbic7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBwcmltYXJ5IHBvaW50ZXIgaW5cbiAqIGNvbnRhY3Qgd2l0aCB0aGUgc3VyZmFjZSBvciBpZiB0aGUgbGVmdCBtb3VzZSBidXR0b24gaXMgcHJlc3NlZC5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy8jYnV0dG9uLXN0YXRlcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBwcmltYXJ5IHBvaW50ZXIuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgcHJpbWFyeUFjdGlvbiA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2ZW50ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gICAgcmV0dXJuIHBvaW50ZXJFdmVudC5pc1ByaW1hcnkgJiYgcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25kaXRpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnUGFuXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGFsbCwgZm9jdXNXaXRoVGFiaW5kZXgsIG5vTW9kaWZpZXJLZXlzLCBwcmltYXJ5QWN0aW9uLCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSwgc2NhbGUgYXMgc2NhbGVDb29yZGluYXRlLCB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLm5vTW9kaWZpZXJLZXlzfSBhbmQge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnByaW1hcnlBY3Rpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL0tpbmV0aWMuanNcIikuZGVmYXVsdH0gW2tpbmV0aWNdIEtpbmV0aWMgaW5lcnRpYSB0byBhcHBseSB0byB0aGUgcGFuLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCBieSBkcmFnZ2luZyB0aGUgbWFwLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1BhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ1BhbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnUGFuKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIHN0b3BEb3duOiBGQUxTRSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vS2luZXRpYy5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtpbmV0aWNfID0gb3B0aW9ucy5raW5ldGljO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0UG9pbnRlcnNDb3VudF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBhbm5pbmdfID0gZmFsc2U7XG4gICAgICAgIHZhciBjb25kaXRpb24gPSBvcHRpb25zLmNvbmRpdGlvblxuICAgICAgICAgICAgPyBvcHRpb25zLmNvbmRpdGlvblxuICAgICAgICAgICAgOiBhbGwobm9Nb2RpZmllcktleXMsIHByaW1hcnlBY3Rpb24pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMub25Gb2N1c09ubHlcbiAgICAgICAgICAgID8gYWxsKGZvY3VzV2l0aFRhYmluZGV4LCBjb25kaXRpb24pXG4gICAgICAgICAgICA6IGNvbmRpdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubm9LaW5ldGljXyA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnUGFuLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5wYW5uaW5nXykge1xuICAgICAgICAgICAgdGhpcy5wYW5uaW5nXyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmdldE1hcCgpLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldFBvaW50ZXJzID0gdGhpcy50YXJnZXRQb2ludGVycztcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGFyZ2V0UG9pbnRlcnMpO1xuICAgICAgICBpZiAodGFyZ2V0UG9pbnRlcnMubGVuZ3RoID09IHRoaXMubGFzdFBvaW50ZXJzQ291bnRfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgICAgIHRoaXMua2luZXRpY18udXBkYXRlKGNlbnRyb2lkWzBdLCBjZW50cm9pZFsxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5sYXN0Q2VudHJvaWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdENlbnRyb2lkWzBdIC0gY2VudHJvaWRbMF0sXG4gICAgICAgICAgICAgICAgICAgIGNlbnRyb2lkWzFdIC0gdGhpcy5sYXN0Q2VudHJvaWRbMV0sXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICAgICAgc2NhbGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJlc29sdXRpb24oKSk7XG4gICAgICAgICAgICAgICAgcm90YXRlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgICAgICAgICB2aWV3LmFkanVzdENlbnRlckludGVybmFsKGRlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAvLyByZXNldCBzbyB3ZSBkb24ndCBvdmVyZXN0aW1hdGUgdGhlIGtpbmV0aWMgZW5lcmd5IGFmdGVyXG4gICAgICAgICAgICAvLyBhZnRlciBvbmUgZmluZ2VyIGRvd24sIHRpbnkgZHJhZywgc2Vjb25kIGZpbmdlciBkb3duXG4gICAgICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBjZW50cm9pZDtcbiAgICAgICAgdGhpcy5sYXN0UG9pbnRlcnNDb3VudF8gPSB0YXJnZXRQb2ludGVycy5sZW5ndGg7XG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubm9LaW5ldGljXyAmJiB0aGlzLmtpbmV0aWNfICYmIHRoaXMua2luZXRpY18uZW5kKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSB0aGlzLmtpbmV0aWNfLmdldERpc3RhbmNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gdGhpcy5raW5ldGljXy5nZXRBbmdsZSgpO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSB2aWV3LmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlcnB4ID0gbWFwLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbChjZW50ZXIpO1xuICAgICAgICAgICAgICAgIHZhciBkZXN0ID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChbXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcnB4WzBdIC0gZGlzdGFuY2UgKiBNYXRoLmNvcyhhbmdsZSksXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcnB4WzFdIC0gZGlzdGFuY2UgKiBNYXRoLnNpbihhbmdsZSksXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgdmlldy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IHZpZXcuZ2V0Q29uc3RyYWluZWRDZW50ZXIoZGVzdCksXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnBhbm5pbmdfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYW5uaW5nXyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmtpbmV0aWNfKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgICAgICAgICAgIC8vIGFmdGVyIG9uZSBmaW5nZXIgdXAsIHRpbnkgZHJhZywgc2Vjb25kIGZpbmdlciB1cFxuICAgICAgICAgICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUGFuLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDAgJiYgdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q2VudHJvaWQgPSBudWxsO1xuICAgICAgICAgICAgLy8gc3RvcCBhbnkgY3VycmVudCBhbmltYXRpb25cbiAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgICAgIHRoaXMua2luZXRpY18uYmVnaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIE5vIGtpbmV0aWMgYXMgc29vbiBhcyBtb3JlIHRoYW4gb25lIHBvaW50ZXIgb24gdGhlIHNjcmVlbiBpc1xuICAgICAgICAgICAgLy8gZGV0ZWN0ZWQuIFRoaXMgaXMgdG8gcHJldmVudCBuYXN0eSBwYW5zIGFmdGVyIHBpbmNoLlxuICAgICAgICAgICAgdGhpcy5ub0tpbmV0aWNfID0gdGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAxO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEcmFnUGFuO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdQYW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnUGFuLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhbHRTaGlmdEtleXNPbmx5LCBtb3VzZUFjdGlvbkJ1dHRvbiwgbW91c2VPbmx5LCB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgZGlzYWJsZSB9IGZyb20gJy4uL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLmFsdFNoaWZ0S2V5c09ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIHRoZSBhbHQgYW5kIHNoaWZ0IGtleXMgYXJlIGhlbGQgZG93bi5cbiAqXG4gKiBUaGlzIGludGVyYWN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGZvciBtb3VzZSBkZXZpY2VzLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1JvdGF0ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ1JvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIHN0b3BEb3duOiBGQUxTRSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogYWx0U2hpZnRLZXlzT25seTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghbW91c2VPbmx5KG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xuICAgICAgICB2YXIgb2Zmc2V0ID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgICAgICB2YXIgdGhldGEgPSBNYXRoLmF0YW4yKHNpemVbMV0gLyAyIC0gb2Zmc2V0WzFdLCBvZmZzZXRbMF0gLSBzaXplWzBdIC8gMik7XG4gICAgICAgIGlmICh0aGlzLmxhc3RBbmdsZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gdGhldGEgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICAgICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwoLWRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB0aGV0YTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnUm90YXRlLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1vdXNlQWN0aW9uQnV0dG9uKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBEcmFnUm90YXRlO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdSb3RhdGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EcmFnUm90YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvQm94XG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBQb2x5Z29uIGZyb20gJy4uL2dlb20vUG9seWdvbi5qcyc7XG52YXIgUmVuZGVyQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZW5kZXJCb3gsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZSBDU1MgY2xhc3MgbmFtZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZW5kZXJCb3goY2xhc3NOYW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5nZW9tZXRyeV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5jbGFzc05hbWUgPSAnb2wtYm94ICcgKyBjbGFzc05hbWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVuZFBpeGVsXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0TWFwKG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLnJlbmRlcl8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBweCA9ICdweCc7XG4gICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICAgIHN0eWxlLmxlZnQgPSBNYXRoLm1pbihzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFswXSkgKyBweDtcbiAgICAgICAgc3R5bGUudG9wID0gTWF0aC5taW4oc3RhcnRQaXhlbFsxXSwgZW5kUGl4ZWxbMV0pICsgcHg7XG4gICAgICAgIHN0eWxlLndpZHRoID0gTWF0aC5hYnMoZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdKSArIHB4O1xuICAgICAgICBzdHlsZS5oZWlnaHQgPSBNYXRoLmFicyhlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV0pICsgcHg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gdGhpcy5lbGVtZW50Xy5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS50b3AgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS53aWR0aCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIHN0eWxlLmhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHRoaXMubWFwXy5nZXRPdmVybGF5Q29udGFpbmVyKCkuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50Xyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgU3RhcnQgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgRW5kIHBpeGVsLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuc2V0UGl4ZWxzID0gZnVuY3Rpb24gKHN0YXJ0UGl4ZWwsIGVuZFBpeGVsKSB7XG4gICAgICAgIHRoaXMuc3RhcnRQaXhlbF8gPSBzdGFydFBpeGVsO1xuICAgICAgICB0aGlzLmVuZFBpeGVsXyA9IGVuZFBpeGVsO1xuICAgICAgICB0aGlzLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9yIHVwZGF0ZXMgdGhlIGNhY2hlZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLmNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGFydFBpeGVsID0gdGhpcy5zdGFydFBpeGVsXztcbiAgICAgICAgdmFyIGVuZFBpeGVsID0gdGhpcy5lbmRQaXhlbF87XG4gICAgICAgIHZhciBwaXhlbHMgPSBbXG4gICAgICAgICAgICBzdGFydFBpeGVsLFxuICAgICAgICAgICAgW3N0YXJ0UGl4ZWxbMF0sIGVuZFBpeGVsWzFdXSxcbiAgICAgICAgICAgIGVuZFBpeGVsLFxuICAgICAgICAgICAgW2VuZFBpeGVsWzBdLCBzdGFydFBpeGVsWzFdXSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gcGl4ZWxzLm1hcCh0aGlzLm1hcF8uZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsLCB0aGlzLm1hcF8pO1xuICAgICAgICAvLyBjbG9zZSB0aGUgcG9seWdvblxuICAgICAgICBjb29yZGluYXRlc1s0XSA9IGNvb3JkaW5hdGVzWzBdLnNsaWNlKCk7XG4gICAgICAgIGlmICghdGhpcy5nZW9tZXRyeV8pIHtcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlfID0gbmV3IFBvbHlnb24oW2Nvb3JkaW5hdGVzXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5Xy5zZXRDb29yZGluYXRlcyhbY29vcmRpbmF0ZXNdKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5LlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdlb21ldHJ5XztcbiAgICB9O1xuICAgIHJldHVybiBSZW5kZXJCb3g7XG59KERpc3Bvc2FibGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlbmRlckJveDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJveC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdCb3hcbiAqL1xuLy8gRklYTUUgZHJhdyBkcmFnIGJveFxuaW1wb3J0IEV2ZW50IGZyb20gJy4uL2V2ZW50cy9FdmVudC5qcyc7XG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uIGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgUmVuZGVyQm94IGZyb20gJy4uL3JlbmRlci9Cb3guanMnO1xuaW1wb3J0IHsgbW91c2VBY3Rpb25CdXR0b24gfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyBhbmQgcmV0dXJucyBhIGB7Ym9vbGVhbn1gLiBJZiB0aGUgY29uZGl0aW9uIGlzIG1ldCxcbiAqIHRydWUgc2hvdWxkIGJlIHJldHVybmVkLlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKHRoaXM6ID8sIGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwpOmJvb2xlYW59IEVuZENvbmRpdGlvblxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1kcmFnYm94J10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGEgYm9vbGVhblxuICogdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgb2wvZXZlbnRzL2NvbmRpdGlvbn5tb3VzZUFjdGlvbkJ1dHRvbn0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7RW5kQ29uZGl0aW9ufSBbYm94RW5kQ29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCB0d29cbiAqIHtAbGluayBtb2R1bGU6b2wvcGl4ZWx+UGl4ZWx9cyB0byBpbmRpY2F0ZSB3aGV0aGVyIGEgYGJveGVuZGAgZXZlbnQgc2hvdWxkIGJlIGZpcmVkLlxuICogRGVmYXVsdCBpcyBgdHJ1ZWAgaWYgdGhlIGFyZWEgb2YgdGhlIGJveCBpcyBiaWdnZXIgdGhhbiB0aGUgYG1pbkFyZWFgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24odGhpczpEcmFnQm94LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW29uQm94RW5kXSBDb2RlIHRvIGV4ZWN1dGUganVzdFxuICogYmVmb3JlIGBib3hlbmRgIGlzIGZpcmVkLlxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBEcmFnQm94RXZlbnRUeXBlID0ge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IHN0YXJ0LlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94c3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YU1RBUlQ6ICdib3hzdGFydCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIG9uIGRyYWcgd2hlbiBib3ggaXMgYWN0aXZlLlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZHJhZ1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hEUkFHOiAnYm94ZHJhZycsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggZW5kLlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94ZW5kXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWEVORDogJ2JveGVuZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHVwb24gZHJhZyBib3ggY2FuY2VsZWQuXG4gICAgICogQGV2ZW50IERyYWdCb3hFdmVudCNib3hjYW5jZWxcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YQ0FOQ0VMOiAnYm94Y2FuY2VsJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ0JveH5EcmFnQm94fSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZlxuICogdGhpcyB0eXBlLlxuICovXG52YXIgRHJhZ0JveEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnQm94RXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGV2ZW50IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE9yaWdpbmF0aW5nIGV2ZW50LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdCb3hFdmVudCh0eXBlLCBjb29yZGluYXRlLCBtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjb29yZGluYXRlIG9mIHRoZSBkcmFnIGV2ZW50LlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZSA9IGNvb3JkaW5hdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAY29uc3RcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBCcm93c2VyRXZlbnQgPSBtYXBCcm93c2VyRXZlbnQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIERyYWdCb3hFdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IERyYWdCb3hFdmVudCB9O1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6YWN0aXZlJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTwnYm94Y2FuY2VsJ3wnYm94ZHJhZyd8J2JveGVuZCd8J2JveHN0YXJ0JywgRHJhZ0JveEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTphY3RpdmUnfCdib3hjYW5jZWwnfCdib3hkcmFnJ3wnYm94ZW5kJywgUmV0dXJuPn0gRHJhZ0JveE9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIGRyYXcgYSB2ZWN0b3IgYm94IGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIHRoZSBzaGlmdCBvciBvdGhlciBrZXkgaXMgaGVsZCBkb3duLiBUaGlzIGlzIHVzZWQsIGZvciBleGFtcGxlLFxuICogZm9yIHpvb21pbmcgdG8gYSBzcGVjaWZpYyBhcmVhIG9mIHRoZSBtYXBcbiAqIChzZWUge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbX5EcmFnWm9vbX0gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVBbmRab29tfSkuXG4gKlxuICogQGZpcmVzIERyYWdCb3hFdmVudFxuICogQGFwaVxuICovXG52YXIgRHJhZ0JveCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ0JveCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnQm94KG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtEcmFnQm94T25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtEcmFnQm94T25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0JveC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYm94XyA9IG5ldyBSZW5kZXJCb3gob3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWdib3gnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5taW5BcmVhXyA9IG9wdGlvbnMubWluQXJlYSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5BcmVhIDogNjQ7XG4gICAgICAgIGlmIChvcHRpb25zLm9uQm94RW5kKSB7XG4gICAgICAgICAgICBfdGhpcy5vbkJveEVuZCA9IG9wdGlvbnMub25Cb3hFbmQ7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0UGl4ZWxfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogbW91c2VBY3Rpb25CdXR0b247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7RW5kQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYm94RW5kQ29uZGl0aW9uXyA9IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uXG4gICAgICAgICAgICA/IG9wdGlvbnMuYm94RW5kQ29uZGl0aW9uXG4gICAgICAgICAgICA6IF90aGlzLmRlZmF1bHRCb3hFbmRDb25kaXRpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgY29uZGl0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHRoZSBib3hlbmQgZXZlbnRcbiAgICAgKiBzaG91bGQgZmlyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgVGhlIG9yaWdpbmF0aW5nIE1hcEJyb3dzZXJFdmVudFxuICAgICAqICAgICBsZWFkaW5nIHRvIHRoZSBib3ggZW5kLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHN0YXJ0UGl4ZWwgVGhlIHN0YXJ0aW5nIHBpeGVsIG9mIHRoZSBib3guXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gZW5kUGl4ZWwgVGhlIGVuZCBwaXhlbCBvZiB0aGUgYm94LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBib3hlbmQgY29uZGl0aW9uIHNob3VsZCBiZSBmaXJlZC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5kZWZhdWx0Qm94RW5kQ29uZGl0aW9uID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCwgc3RhcnRQaXhlbCwgZW5kUGl4ZWwpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gZW5kUGl4ZWxbMF0gLSBzdGFydFBpeGVsWzBdO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdO1xuICAgICAgICByZXR1cm4gd2lkdGggKiB3aWR0aCArIGhlaWdodCAqIGhlaWdodCA+PSB0aGlzLm1pbkFyZWFfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBnZW9tZXRyeSBvZiBsYXN0IGRyYXduIGJveC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gR2VvbWV0cnkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3hfLmdldEdlb21ldHJ5KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KERyYWdCb3hFdmVudFR5cGUuQk9YRFJBRywgbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuYm94Xy5zZXRNYXAobnVsbCk7XG4gICAgICAgIHZhciBjb21wbGV0ZUJveCA9IHRoaXMuYm94RW5kQ29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQsIHRoaXMuc3RhcnRQaXhlbF8sIG1hcEJyb3dzZXJFdmVudC5waXhlbCk7XG4gICAgICAgIGlmIChjb21wbGV0ZUJveCkge1xuICAgICAgICAgICAgdGhpcy5vbkJveEVuZChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgRHJhZ0JveEV2ZW50KGNvbXBsZXRlQm94ID8gRHJhZ0JveEV2ZW50VHlwZS5CT1hFTkQgOiBEcmFnQm94RXZlbnRUeXBlLkJPWENBTkNFTCwgbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydFBpeGVsXyA9IG1hcEJyb3dzZXJFdmVudC5waXhlbDtcbiAgICAgICAgICAgIHRoaXMuYm94Xy5zZXRNYXAobWFwQnJvd3NlckV2ZW50Lm1hcCk7XG4gICAgICAgICAgICB0aGlzLmJveF8uc2V0UGl4ZWxzKHRoaXMuc3RhcnRQaXhlbF8sIHRoaXMuc3RhcnRQaXhlbF8pO1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hTVEFSVCwgbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGUsIG1hcEJyb3dzZXJFdmVudCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUganVzdCBiZWZvcmUgYG9uYm94ZW5kYCBpcyBmaXJlZFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLm9uQm94RW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7IH07XG4gICAgcmV0dXJuIERyYWdCb3g7XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgRHJhZ0JveDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdCb3guanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbVxuICovXG5pbXBvcnQgRHJhZ0JveCBmcm9tICcuL0RyYWdCb3guanMnO1xuaW1wb3J0IHsgZWFzZU91dCB9IGZyb20gJy4uL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBzaGlmdEtleU9ubHkgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWRyYWd6b29tJ10gQ1NTIGNsYXNzIG5hbWUgZm9yIHN0eWxpbmcgdGhlXG4gKiBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5zaGlmdEtleU9ubHl9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvdXQ9ZmFsc2VdIFVzZSBpbnRlcmFjdGlvbiBmb3Igem9vbWluZyBvdXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pbkFyZWE9NjRdIFRoZSBtaW5pbXVtIGFyZWEgb2YgdGhlIGJveCBpbiBwaXhlbCwgdGhpcyB2YWx1ZSBpcyB1c2VkIGJ5IHRoZSBwYXJlbnQgZGVmYXVsdFxuICogYGJveEVuZENvbmRpdGlvbmAgZnVuY3Rpb24uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiBhIGtleSwgc2hpZnQgYnkgZGVmYXVsdCwgaXMgaGVsZCBkb3duLlxuICpcbiAqIFRvIGNoYW5nZSB0aGUgc3R5bGUgb2YgdGhlIGJveCwgdXNlIENTUyBhbmQgdGhlIGAub2wtZHJhZ3pvb21gIHNlbGVjdG9yLCBvclxuICogeW91ciBjdXN0b20gb25lIGNvbmZpZ3VyZWQgd2l0aCBgY2xhc3NOYW1lYC5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBzaGlmdEtleU9ubHk7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29uZGl0aW9uOiBjb25kaXRpb24sXG4gICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbnMuY2xhc3NOYW1lIHx8ICdvbC1kcmFnem9vbScsXG4gICAgICAgICAgICBtaW5BcmVhOiBvcHRpb25zLm1pbkFyZWEsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDIwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3V0XyA9IG9wdGlvbnMub3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm91dCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHRvIGV4ZWN1dGUganVzdCBiZWZvcmUgYG9uYm94ZW5kYCBpcyBmaXJlZFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIERyYWdab29tLnByb3RvdHlwZS5vbkJveEVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHZpZXcgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLmRlZmF1bHR9ICovIChtYXAuZ2V0VmlldygpKTtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeSgpO1xuICAgICAgICBpZiAodGhpcy5vdXRfKSB7XG4gICAgICAgICAgICB2YXIgcm90YXRlZEV4dGVudCA9IHZpZXcucm90YXRlZEV4dGVudEZvckdlb21ldHJ5KGdlb21ldHJ5KTtcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gdmlldy5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwocm90YXRlZEV4dGVudCk7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgLyByZXNvbHV0aW9uO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpO1xuICAgICAgICAgICAgZ2VvbWV0cnkuc2NhbGUoZmFjdG9yICogZmFjdG9yKTtcbiAgICAgICAgfVxuICAgICAgICB2aWV3LmZpdEludGVybmFsKGdlb21ldHJ5LCB7XG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgcmV0dXJuIERyYWdab29tO1xufShEcmFnQm94KSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURyYWdab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyBwYW4gfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCBLZXlDb2RlIGZyb20gJy4uL2V2ZW50cy9LZXlDb2RlLmpzJztcbmltcG9ydCB7IG5vTW9kaWZpZXJLZXlzLCB0YXJnZXROb3RFZGl0YWJsZSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuaW1wb3J0IHsgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUgfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24ubm9Nb2RpZmllcktleXN9IGFuZFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnRhcmdldE5vdEVkaXRhYmxlfS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MTAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwaXhlbERlbHRhPTEyOF0gVGhlIGFtb3VudCBvZiBwaXhlbHMgdG8gcGFuIG9uIGVhY2gga2V5XG4gKiBwcmVzcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcGFuIHRoZSBtYXAgdXNpbmcga2V5Ym9hcmQgYXJyb3dzLlxuICogTm90ZSB0aGF0LCBhbHRob3VnaCB0aGlzIGludGVyYWN0aW9uIGlzIGJ5IGRlZmF1bHQgaW5jbHVkZWQgaW4gbWFwcyxcbiAqIHRoZSBrZXlzIGNhbiBvbmx5IGJlIHVzZWQgd2hlbiBicm93c2VyIGZvY3VzIGlzIG9uIHRoZSBlbGVtZW50IHRvIHdoaWNoXG4gKiB0aGUga2V5Ym9hcmQgZXZlbnRzIGFyZSBhdHRhY2hlZC4gQnkgZGVmYXVsdCwgdGhpcyBpcyB0aGUgbWFwIGRpdixcbiAqIHRob3VnaCB5b3UgY2FuIGNoYW5nZSB0aGlzIHdpdGggdGhlIGBrZXlib2FyZEV2ZW50VGFyZ2V0YCBpblxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfS4gYGRvY3VtZW50YCBuZXZlciBsb3NlcyBmb2N1cyBidXQsIGZvciBhbnkgb3RoZXJcbiAqIGVsZW1lbnQsIGZvY3VzIHdpbGwgaGF2ZSB0byBiZSBvbiwgYW5kIHJldHVybmVkIHRvLCB0aGlzIGVsZW1lbnQgaWYgdGhlIGtleXNcbiAqIGFyZSB0byBmdW5jdGlvbi5cbiAqIFNlZSBhbHNvIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFBhbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS2V5Ym9hcmRQYW4sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2V5Ym9hcmRQYW4ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb21iaW5lZCBjb25kaXRpb24gcmVzdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVmYXVsdENvbmRpdGlvbl8gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gKG5vTW9kaWZpZXJLZXlzKG1hcEJyb3dzZXJFdmVudCkgJiYgdGFyZ2V0Tm90RWRpdGFibGUobWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29uZGl0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMuY29uZGl0aW9uXG4gICAgICAgICAgICAgICAgOiBfdGhpcy5kZWZhdWx0Q29uZGl0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsRGVsdGFfID1cbiAgICAgICAgICAgIG9wdGlvbnMucGl4ZWxEZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waXhlbERlbHRhIDogMTI4O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBpZiBpdCB3YXMgYVxuICAgICAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHRoZSBkaXJlY3Rpb24gdG8gcGFuIHRvIChpZiBhbiBhcnJvdyBrZXkgd2FzXG4gICAgICogcHJlc3NlZCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAdGhpcyB7S2V5Ym9hcmRQYW59XG4gICAgICovXG4gICAgS2V5Ym9hcmRQYW4ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTikge1xuICAgICAgICAgICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdmFyIGtleUNvZGUgPSBrZXlFdmVudC5rZXlDb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICAgICAgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5MRUZUIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCB8fFxuICAgICAgICAgICAgICAgICAgICBrZXlDb2RlID09IEtleUNvZGUuVVApKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHZhciBtYXBVbml0c0RlbHRhID0gdmlldy5nZXRSZXNvbHV0aW9uKCkgKiB0aGlzLnBpeGVsRGVsdGFfO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YVggPSAwLCBkZWx0YVkgPSAwO1xuICAgICAgICAgICAgICAgIGlmIChrZXlDb2RlID09IEtleUNvZGUuRE9XTikge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVkgPSAtbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFYID0gLW1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5SSUdIVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVggPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsdGFZID0gbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gW2RlbHRhWCwgZGVsdGFZXTtcbiAgICAgICAgICAgICAgICByb3RhdGVDb29yZGluYXRlKGRlbHRhLCB2aWV3LmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHBhbih2aWV3LCBkZWx0YSwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgICAgIGtleUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIHJldHVybiBLZXlib2FyZFBhbjtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkUGFuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2V5Ym9hcmRQYW4uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2V2ZW50cy9LZXlDb2RlXG4gKi9cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqIEBjb25zdFxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgTEVGVDogMzcsXG4gICAgVVA6IDM4LFxuICAgIFJJR0hUOiAzOSxcbiAgICBET1dOOiA0MCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlDb2RlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7IHRhcmdldE5vdEVkaXRhYmxlIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MTAwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0XG4gKiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9IGFuZCByZXR1cm5zIGFcbiAqIGJvb2xlYW4gdG8gaW5kaWNhdGUgd2hldGhlciB0aGF0IGV2ZW50IHNob3VsZCBiZSBoYW5kbGVkLiBEZWZhdWx0IGlzXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24udGFyZ2V0Tm90RWRpdGFibGV9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBsZXZlbCBkZWx0YSBvbiBlYWNoIGtleSBwcmVzcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIHVzaW5nIGtleWJvYXJkICsgYW5kIC0uXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbn5LZXlib2FyZFBhbn0uXG4gKiBAYXBpXG4gKi9cbnZhciBLZXlib2FyZFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEtleWJvYXJkWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBLZXlib2FyZFpvb20ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IHRhcmdldE5vdEVkaXRhYmxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBpZiBpdCB3YXMgYVxuICAgICAqIGBLZXlFdmVudGAsIGFuZCBkZWNpZGVzIHdoZXRoZXIgdG8gem9vbSBpbiBvciBvdXQgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZVxuICAgICAqIGtleSBwcmVzc2VkIHdhcyAnKycgb3IgJy0nKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEB0aGlzIHtLZXlib2FyZFpvb219XG4gICAgICovXG4gICAgS2V5Ym9hcmRab29tLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHN0b3BFdmVudCA9IGZhbHNlO1xuICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWURPV04gfHxcbiAgICAgICAgICAgIG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlQUkVTUykge1xuICAgICAgICAgICAgdmFyIGtleUV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0ga2V5RXZlbnQuY2hhckNvZGU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgICAgICAoY2hhckNvZGUgPT0gJysnLmNoYXJDb2RlQXQoMCkgfHwgY2hhckNvZGUgPT0gJy0nLmNoYXJDb2RlQXQoMCkpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gY2hhckNvZGUgPT0gJysnLmNoYXJDb2RlQXQoMCkgPyB0aGlzLmRlbHRhXyA6IC10aGlzLmRlbHRhXztcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIHVuZGVmaW5lZCwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgICAgIGtleUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc3RvcEV2ZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIHJldHVybiBLZXlib2FyZFpvb207XG59KEludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBLZXlib2FyZFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlib2FyZFpvb20uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0tpbmV0aWNcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBpbmVydGlhbCBkZWNlbGVyYXRpb24gZm9yIG1hcCBtb3ZlbWVudC5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBLaW5ldGljID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWNheSBSYXRlIG9mIGRlY2F5IChtdXN0IGJlIG5lZ2F0aXZlKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluVmVsb2NpdHkgTWluaW11bSB2ZWxvY2l0eSAocGl4ZWxzL21pbGxpc2Vjb25kKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXkgRGVsYXkgdG8gY29uc2lkZXIgdG8gY2FsY3VsYXRlIHRoZSBraW5ldGljXG4gICAgICogICAgIGluaXRpYWwgdmFsdWVzIChtaWxsaXNlY29uZHMpLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEtpbmV0aWMoZGVjYXksIG1pblZlbG9jaXR5LCBkZWxheSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVjYXlfID0gZGVjYXk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5WZWxvY2l0eV8gPSBtaW5WZWxvY2l0eTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlbGF5XyA9IGRlbGF5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBvaW50c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFuZ2xlXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuYmVnaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucG9pbnRzXy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmFuZ2xlXyA9IDA7XG4gICAgICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdGhpcy5wb2ludHNfLnB1c2goeCwgeSwgRGF0ZS5ub3coKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHdlIHNob3VsZCBkbyBraW5ldGljIGFuaW1hdGlvbi5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnBvaW50c18ubGVuZ3RoIDwgNikge1xuICAgICAgICAgICAgLy8gYXQgbGVhc3QgMiBwb2ludHMgYXJlIHJlcXVpcmVkIChpLmUuIHRoZXJlIG11c3QgYmUgYXQgbGVhc3QgNiBlbGVtZW50c1xuICAgICAgICAgICAgLy8gaW4gdGhlIGFycmF5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWxheSA9IERhdGUubm93KCkgLSB0aGlzLmRlbGF5XztcbiAgICAgICAgdmFyIGxhc3RJbmRleCA9IHRoaXMucG9pbnRzXy5sZW5ndGggLSAzO1xuICAgICAgICBpZiAodGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDJdIDwgZGVsYXkpIHtcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IHRyYWNrZWQgcG9pbnQgaXMgdG9vIG9sZCwgd2hpY2ggbWVhbnMgdGhhdCB0aGUgdXNlciBzdG9wcGVkXG4gICAgICAgICAgICAvLyBwYW5uaW5nIGJlZm9yZSByZWxlYXNpbmcgdGhlIG1hcFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGdldCB0aGUgZmlyc3QgcG9pbnQgd2hpY2ggc3RpbGwgZmFsbHMgaW50byB0aGUgZGVsYXkgdGltZVxuICAgICAgICB2YXIgZmlyc3RJbmRleCA9IGxhc3RJbmRleCAtIDM7XG4gICAgICAgIHdoaWxlIChmaXJzdEluZGV4ID4gMCAmJiB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDJdID4gZGVsYXkpIHtcbiAgICAgICAgICAgIGZpcnN0SW5kZXggLT0gMztcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHVyYXRpb24gPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMl0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDJdO1xuICAgICAgICAvLyB3ZSBkb24ndCB3YW50IGEgZHVyYXRpb24gb2YgMCAoZGl2aWRlIGJ5IHplcm8pXG4gICAgICAgIC8vIHdlIGFsc28gbWFrZSBzdXJlIHRoZSB1c2VyIHBhbm5lZCBmb3IgYSBkdXJhdGlvbiBvZiBhdCBsZWFzdCBvbmUgZnJhbWVcbiAgICAgICAgLy8gKDEvNjBzKSB0byBjb21wdXRlIHNhbmUgZGlzcGxhY2VtZW50IHZhbHVlc1xuICAgICAgICBpZiAoZHVyYXRpb24gPCAxMDAwIC8gNjApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHggPSB0aGlzLnBvaW50c19bbGFzdEluZGV4XSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4XTtcbiAgICAgICAgdmFyIGR5ID0gdGhpcy5wb2ludHNfW2xhc3RJbmRleCArIDFdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXggKyAxXTtcbiAgICAgICAgdGhpcy5hbmdsZV8gPSBNYXRoLmF0YW4yKGR5LCBkeCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSkgLyBkdXJhdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbFZlbG9jaXR5XyA+IHRoaXMubWluVmVsb2NpdHlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUb3RhbCBkaXN0YW5jZSB0cmF2ZWxsZWQgKHBpeGVscykuXG4gICAgICovXG4gICAgS2luZXRpYy5wcm90b3R5cGUuZ2V0RGlzdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5WZWxvY2l0eV8gLSB0aGlzLmluaXRpYWxWZWxvY2l0eV8pIC8gdGhpcy5kZWNheV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIG9mIHRoZSBraW5ldGljIHBhbm5pbmcgYW5pbWF0aW9uIChyYWRpYW5zKS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5nZXRBbmdsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5nbGVfO1xuICAgIH07XG4gICAgcmV0dXJuIEtpbmV0aWM7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgS2luZXRpYztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtpbmV0aWMuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7IHpvb21CeURlbHRhIH0gZnJvbSAnLi9JbnRlcmFjdGlvbi5qcyc7XG5pbXBvcnQgeyBERVZJQ0VfUElYRUxfUkFUSU8sIEZJUkVGT1ggfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgYWxsLCBhbHdheXMsIGZvY3VzV2l0aFRhYmluZGV4IH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIE1vZGUgPSB7XG4gICAgVFJBQ0tQQUQ6ICd0cmFja3BhZCcsXG4gICAgV0hFRUw6ICd3aGVlbCcsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5hbHdheXN9LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIFdoZW4gdGhlIG1hcCdzIHRhcmdldCBoYXMgYSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBzZXQsXG4gKiB0aGUgaW50ZXJhY3Rpb24gd2lsbCBvbmx5IGhhbmRsZSBldmVudHMgd2hlbiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heERlbHRhPTFdIE1heGltdW0gbW91c2Ugd2hlZWwgZGVsdGEuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGltZW91dD04MF0gTW91c2Ugd2hlZWwgdGltZW91dCBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt1c2VBbmNob3I9dHJ1ZV0gRW5hYmxlIHpvb21pbmcgdXNpbmcgdGhlIG1vdXNlJ3NcbiAqIGxvY2F0aW9uIGFzIHRoZSBhbmNob3IuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIHpvb21pbmcgaW4gYW5kIG91dCB3aWxsIHpvb20gdG9cbiAqIHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlbiBpbnN0ZWFkIG9mIHpvb21pbmcgb24gdGhlIG1vdXNlJ3MgbG9jYXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5SZXNvbHV0aW9uPWZhbHNlXSBJZiB0cnVlLCB0aGUgbW91c2Ugd2hlZWwgem9vbVxuICogZXZlbnQgd2lsbCBhbHdheXMgYW5pbWF0ZSB0byB0aGUgY2xvc2VzdCB6b29tIGxldmVsIGFmdGVyIGFuIGludGVyYWN0aW9uO1xuICogZmFsc2UgbWVhbnMgaW50ZXJtZWRpYXJ5IHpvb20gbGV2ZWxzIGFyZSBhbGxvd2VkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgYnkgc2Nyb2xsaW5nIHRoZSBtb3VzZSB3aGVlbC5cbiAqIEBhcGlcbiAqL1xudmFyIE1vdXNlV2hlZWxab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNb3VzZVdoZWVsWm9vbSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNb3VzZVdoZWVsWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcbiAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0ludGVyYWN0aW9uLmpzXCIpLkludGVyYWN0aW9uT3B0aW9uc30gKi8gKG9wdGlvbnMpKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRvdGFsRGVsdGFfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0RGVsdGFfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSBvcHRpb25zLm1heERlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heERlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbWVvdXRfID0gb3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbWVvdXQgOiA4MDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXNlQW5jaG9yXyA9XG4gICAgICAgICAgICBvcHRpb25zLnVzZUFuY2hvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy51c2VBbmNob3IgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uXyA9XG4gICAgICAgICAgICBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcbiAgICAgICAgdmFyIGNvbmRpdGlvbiA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBhbHdheXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5vbkZvY3VzT25seVxuICAgICAgICAgICAgPyBhbGwoZm9jdXNXaXRoVGFiaW5kZXgsIGNvbmRpdGlvbilcbiAgICAgICAgICAgIDogY29uZGl0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbWVvdXRJZF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7TW9kZXx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRyYWNrcGFkIGV2ZW50cyBzZXBhcmF0ZWQgYnkgdGhpcyBkZWxheSB3aWxsIGJlIGNvbnNpZGVyZWQgc2VwYXJhdGVcbiAgICAgICAgICogaW50ZXJhY3Rpb25zLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2twYWRFdmVudEdhcF8gPSA0MDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrcGFkVGltZW91dElkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgZGVsdGEgdmFsdWVzIHBlciB6b29tIGxldmVsXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWx0YVBlclpvb21fID0gMzAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmVuZEludGVyYWN0aW9uXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCk7XG4gICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odW5kZWZpbmVkLCB0aGlzLmxhc3REZWx0YV8gPyAodGhpcy5sYXN0RGVsdGFfID4gMCA/IDEgOiAtMSkgOiAwLCB0aGlzLmxhc3RBbmNob3JfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGEgbW91c2V3aGVlbC1ldmVudCkgYW5kIGV2ZW50dWFsbHlcbiAgICAgKiB6b29tcyB0aGUgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHlwZSA9IG1hcEJyb3dzZXJFdmVudC50eXBlO1xuICAgICAgICBpZiAodHlwZSAhPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHdoZWVsRXZlbnQgPSAvKiogQHR5cGUge1doZWVsRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHdoZWVsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMudXNlQW5jaG9yXykge1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG1hcEJyb3dzZXJFdmVudC5jb29yZGluYXRlO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlbHRhIG5vcm1hbGlzYXRpb24gaW5zcGlyZWQgYnlcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wtanMvYmxvYi8wMDFjN2I5L2pzL3VpL2hhbmRsZXIvc2Nyb2xsX3pvb20uanNcbiAgICAgICAgdmFyIGRlbHRhO1xuICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLldIRUVMKSB7XG4gICAgICAgICAgICBkZWx0YSA9IHdoZWVsRXZlbnQuZGVsdGFZO1xuICAgICAgICAgICAgaWYgKEZJUkVGT1ggJiYgd2hlZWxFdmVudC5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgLz0gREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHdoZWVsRXZlbnQuZGVsdGFNb2RlID09PSBXaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgKj0gNDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxhc3REZWx0YV8gPSBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhcnRUaW1lXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLm1vZGVfIHx8IG5vdyAtIHRoaXMuc3RhcnRUaW1lXyA+IHRoaXMudHJhY2twYWRFdmVudEdhcF8pIHtcbiAgICAgICAgICAgIHRoaXMubW9kZV8gPSBNYXRoLmFicyhkZWx0YSkgPCA0ID8gTW9kZS5UUkFDS1BBRCA6IE1vZGUuV0hFRUw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodGhpcy5tb2RlXyA9PT0gTW9kZS5UUkFDS1BBRCAmJlxuICAgICAgICAgICAgISh2aWV3LmdldENvbnN0cmFpblJlc29sdXRpb24oKSB8fCB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudHJhY2twYWRUaW1lb3V0SWRfKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJhY2twYWRUaW1lb3V0SWRfID0gc2V0VGltZW91dCh0aGlzLmVuZEludGVyYWN0aW9uXy5iaW5kKHRoaXMpLCB0aGlzLnRpbWVvdXRfKTtcbiAgICAgICAgICAgIHZpZXcuYWRqdXN0Wm9vbSgtZGVsdGEgLyB0aGlzLmRlbHRhUGVyWm9vbV8sIHRoaXMubGFzdEFuY2hvcl8pO1xuICAgICAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gbm93O1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG90YWxEZWx0YV8gKz0gZGVsdGE7XG4gICAgICAgIHZhciB0aW1lTGVmdCA9IE1hdGgubWF4KHRoaXMudGltZW91dF8gLSAobm93IC0gdGhpcy5zdGFydFRpbWVfKSwgMCk7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJZF8pO1xuICAgICAgICB0aGlzLnRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlV2hlZWxab29tXy5iaW5kKHRoaXMsIG1hcCksIHRpbWVMZWZ0KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5oYW5kbGVXaGVlbFpvb21fID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICB2aWV3LmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsdGEgPSAtY2xhbXAodGhpcy50b3RhbERlbHRhXywgLXRoaXMubWF4RGVsdGFfICogdGhpcy5kZWx0YVBlclpvb21fLCB0aGlzLm1heERlbHRhXyAqIHRoaXMuZGVsdGFQZXJab29tXykgLyB0aGlzLmRlbHRhUGVyWm9vbV87XG4gICAgICAgIGlmICh2aWV3LmdldENvbnN0cmFpblJlc29sdXRpb24oKSB8fCB0aGlzLmNvbnN0cmFpblJlc29sdXRpb25fKSB7XG4gICAgICAgICAgICAvLyB2aWV3IGhhcyBhIHpvb20gY29uc3RyYWludCwgem9vbSBieSAxXG4gICAgICAgICAgICBkZWx0YSA9IGRlbHRhID8gKGRlbHRhID4gMCA/IDEgOiAtMSkgOiAwO1xuICAgICAgICB9XG4gICAgICAgIHpvb21CeURlbHRhKHZpZXcsIGRlbHRhLCB0aGlzLmxhc3RBbmNob3JfLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgIHRoaXMubW9kZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudG90YWxEZWx0YV8gPSAwO1xuICAgICAgICB0aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgdGhpcy5zdGFydFRpbWVfID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnRpbWVvdXRJZF8gPSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSB1c2luZyB0aGUgbW91c2UncyBsb2NhdGlvbiBhcyBhbiBhbmNob3Igd2hlbiB6b29taW5nXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1c2VBbmNob3IgdHJ1ZSB0byB6b29tIHRvIHRoZSBtb3VzZSdzIGxvY2F0aW9uLCBmYWxzZVxuICAgICAqIHRvIHpvb20gdG8gdGhlIGNlbnRlciBvZiB0aGUgbWFwXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlV2hlZWxab29tLnByb3RvdHlwZS5zZXRNb3VzZUFuY2hvciA9IGZ1bmN0aW9uICh1c2VBbmNob3IpIHtcbiAgICAgICAgdGhpcy51c2VBbmNob3JfID0gdXNlQW5jaG9yO1xuICAgICAgICBpZiAoIXVzZUFuY2hvcikge1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5jaG9yXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNb3VzZVdoZWVsWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IE1vdXNlV2hlZWxab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VXaGVlbFpvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZVxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7IGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLCB9IGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBkaXNhYmxlIH0gZnJvbSAnLi4vcm90YXRpb25jb25zdHJhaW50LmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RocmVzaG9sZD0wLjNdIE1pbmltYWwgYW5nbGUgaW4gcmFkaWFucyB0byBzdGFydCBhIHJvdGF0aW9uLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSB0d2lzdGluZyB3aXRoIHR3byBmaW5nZXJzXG4gKiBvbiBhIHRvdWNoIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIFBpbmNoUm90YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQaW5jaFJvdGF0ZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQaW5jaFJvdGF0ZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXBvaW50ZXJPcHRpb25zLnN0b3BEb3duKSB7XG4gICAgICAgICAgICBwb2ludGVyT3B0aW9ucy5zdG9wRG93biA9IEZBTFNFO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJvdGF0aW9uRGVsdGFfID0gMC4wO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRocmVzaG9sZF8gPSBvcHRpb25zLnRocmVzaG9sZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aHJlc2hvbGQgOiAwLjM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgUGluY2hSb3RhdGUucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHJvdGF0aW9uRGVsdGEgPSAwLjA7XG4gICAgICAgIHZhciB0b3VjaDAgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzBdO1xuICAgICAgICB2YXIgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcbiAgICAgICAgLy8gYW5nbGUgYmV0d2VlbiB0b3VjaGVzXG4gICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIodG91Y2gxLmNsaWVudFkgLSB0b3VjaDAuY2xpZW50WSwgdG91Y2gxLmNsaWVudFggLSB0b3VjaDAuY2xpZW50WCk7XG4gICAgICAgIGlmICh0aGlzLmxhc3RBbmdsZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGRlbHRhID0gYW5nbGUgLSB0aGlzLmxhc3RBbmdsZV87XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uRGVsdGFfICs9IGRlbHRhO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJvdGF0aW5nXyAmJiBNYXRoLmFicyh0aGlzLnJvdGF0aW9uRGVsdGFfKSA+IHRoaXMudGhyZXNob2xkXykge1xuICAgICAgICAgICAgICAgIHRoaXMucm90YXRpbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJvdGF0aW9uRGVsdGEgPSBkZWx0YTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSBhbmdsZTtcbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcuZ2V0Q29uc3RyYWludHMoKS5yb3RhdGlvbiA9PT0gZGlzYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJvdGF0ZSBhbmNob3IgcG9pbnQuXG4gICAgICAgIC8vIEZJWE1FOiBzaG91bGQgYmUgdGhlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHRoZSBsaW5lczpcbiAgICAgICAgLy8gICAgIHRvdWNoMCx0b3VjaDEgYW5kIHByZXZpb3VzVG91Y2gwLHByZXZpb3VzVG91Y2gxXG4gICAgICAgIHZhciB2aWV3cG9ydFBvc2l0aW9uID0gbWFwLmdldFZpZXdwb3J0KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpO1xuICAgICAgICBjZW50cm9pZFswXSAtPSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQ7XG4gICAgICAgIGNlbnRyb2lkWzFdIC09IHZpZXdwb3J0UG9zaXRpb24udG9wO1xuICAgICAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKGNlbnRyb2lkKTtcbiAgICAgICAgLy8gcm90YXRlXG4gICAgICAgIGlmICh0aGlzLnJvdGF0aW5nXykge1xuICAgICAgICAgICAgbWFwLnJlbmRlcigpO1xuICAgICAgICAgICAgdmlldy5hZGp1c3RSb3RhdGlvbkludGVybmFsKHJvdGF0aW9uRGVsdGEsIHRoaXMuYW5jaG9yXyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB0aGlzLmFuY2hvcl8gPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGluZ18gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQaW5jaFJvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBQaW5jaFJvdGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBpbmNoUm90YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vUGluY2hab29tXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj00MDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBwaW5jaGluZyB3aXRoIHR3byBmaW5nZXJzXG4gKiBvbiBhIHRvdWNoIHNjcmVlbi5cbiAqIEBhcGlcbiAqL1xudmFyIFBpbmNoWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGluY2hab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBpbmNoWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgdmFyIHBvaW50ZXJPcHRpb25zID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1BvaW50ZXIuanNcIikuT3B0aW9uc30gKi8gKG9wdGlvbnMpO1xuICAgICAgICBpZiAoIXBvaW50ZXJPcHRpb25zLnN0b3BEb3duKSB7XG4gICAgICAgICAgICBwb2ludGVyT3B0aW9ucy5zdG9wRG93biA9IEZBTFNFO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9pbnRlck9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDQwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdERpc3RhbmNlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSAxO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBQaW5jaFpvb20ucHJvdG90eXBlLmhhbmRsZURyYWdFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdmFyIHNjYWxlRGVsdGEgPSAxLjA7XG4gICAgICAgIHZhciB0b3VjaDAgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzBdO1xuICAgICAgICB2YXIgdG91Y2gxID0gdGhpcy50YXJnZXRQb2ludGVyc1sxXTtcbiAgICAgICAgdmFyIGR4ID0gdG91Y2gwLmNsaWVudFggLSB0b3VjaDEuY2xpZW50WDtcbiAgICAgICAgdmFyIGR5ID0gdG91Y2gwLmNsaWVudFkgLSB0b3VjaDEuY2xpZW50WTtcbiAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiB0b3VjaGVzXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmICh0aGlzLmxhc3REaXN0YW5jZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc2NhbGVEZWx0YSA9IHRoaXMubGFzdERpc3RhbmNlXyAvIGRpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdERpc3RhbmNlXyA9IGRpc3RhbmNlO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAoc2NhbGVEZWx0YSAhPSAxLjApIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gc2NhbGVEZWx0YTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzY2FsZSBhbmNob3IgcG9pbnQuXG4gICAgICAgIHZhciB2aWV3cG9ydFBvc2l0aW9uID0gbWFwLmdldFZpZXdwb3J0KCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRoaXMudGFyZ2V0UG9pbnRlcnMpO1xuICAgICAgICBjZW50cm9pZFswXSAtPSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQ7XG4gICAgICAgIGNlbnRyb2lkWzFdIC09IHZpZXdwb3J0UG9zaXRpb24udG9wO1xuICAgICAgICB0aGlzLmFuY2hvcl8gPSBtYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKGNlbnRyb2lkKTtcbiAgICAgICAgLy8gc2NhbGUsIGJ5cGFzcyB0aGUgcmVzb2x1dGlvbiBjb25zdHJhaW50XG4gICAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgICAgdmlldy5hZGp1c3RSZXNvbHV0aW9uSW50ZXJuYWwoc2NhbGVEZWx0YSwgdGhpcy5hbmNob3JfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIHVwIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFpvb20ucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHRoaXMubGFzdFNjYWxlRGVsdGFfID4gMSA/IDEgOiAtMTtcbiAgICAgICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8sIGRpcmVjdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgUGluY2hab29tLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxhc3REaXN0YW5jZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQaW5jaFpvb207XG59KFBvaW50ZXJJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgUGluY2hab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hab29tLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvTWFwXG4gKi9cbmltcG9ydCBDb21wb3NpdGVNYXBSZW5kZXJlciBmcm9tICcuL3JlbmRlcmVyL0NvbXBvc2l0ZS5qcyc7XG5pbXBvcnQgUGx1Z2dhYmxlTWFwIGZyb20gJy4vUGx1Z2dhYmxlTWFwLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7IGRlZmF1bHRzIGFzIGRlZmF1bHRDb250cm9scyB9IGZyb20gJy4vY29udHJvbC5qcyc7XG5pbXBvcnQgeyBkZWZhdWx0cyBhcyBkZWZhdWx0SW50ZXJhY3Rpb25zIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFRoZSBtYXAgaXMgdGhlIGNvcmUgY29tcG9uZW50IG9mIE9wZW5MYXllcnMuIEZvciBhIG1hcCB0byByZW5kZXIsIGEgdmlldyxcbiAqIG9uZSBvciBtb3JlIGxheWVycywgYW5kIGEgdGFyZ2V0IGNvbnRhaW5lciBhcmUgbmVlZGVkOlxuICpcbiAqICAgICBpbXBvcnQgTWFwIGZyb20gJ29sL01hcCc7XG4gKiAgICAgaW1wb3J0IFZpZXcgZnJvbSAnb2wvVmlldyc7XG4gKiAgICAgaW1wb3J0IFRpbGVMYXllciBmcm9tICdvbC9sYXllci9UaWxlJztcbiAqICAgICBpbXBvcnQgT1NNIGZyb20gJ29sL3NvdXJjZS9PU00nO1xuICpcbiAqICAgICB2YXIgbWFwID0gbmV3IE1hcCh7XG4gKiAgICAgICB2aWV3OiBuZXcgVmlldyh7XG4gKiAgICAgICAgIGNlbnRlcjogWzAsIDBdLFxuICogICAgICAgICB6b29tOiAxXG4gKiAgICAgICB9KSxcbiAqICAgICAgIGxheWVyczogW1xuICogICAgICAgICBuZXcgVGlsZUxheWVyKHtcbiAqICAgICAgICAgICBzb3VyY2U6IG5ldyBPU00oKVxuICogICAgICAgICB9KVxuICogICAgICAgXSxcbiAqICAgICAgIHRhcmdldDogJ21hcCdcbiAqICAgICB9KTtcbiAqXG4gKiBUaGUgYWJvdmUgc25pcHBldCBjcmVhdGVzIGEgbWFwIHVzaW5nIGEge0BsaW5rIG1vZHVsZTpvbC9sYXllci9UaWxlfSB0b1xuICogZGlzcGxheSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9PU01+T1NNfSBPU00gZGF0YSBhbmQgcmVuZGVyIGl0IHRvIGEgRE9NXG4gKiBlbGVtZW50IHdpdGggdGhlIGlkIGBtYXBgLlxuICpcbiAqIFRoZSBjb25zdHJ1Y3RvciBwbGFjZXMgYSB2aWV3cG9ydCBjb250YWluZXIgKHdpdGggQ1NTIGNsYXNzIG5hbWVcbiAqIGBvbC12aWV3cG9ydGApIGluIHRoZSB0YXJnZXQgZWxlbWVudCAoc2VlIGBnZXRWaWV3cG9ydCgpYCksIGFuZCB0aGVuIHR3b1xuICogZnVydGhlciBlbGVtZW50cyB3aXRoaW4gdGhlIHZpZXdwb3J0OiBvbmUgd2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCBmb3IgY29udHJvbHMgYW5kIHNvbWUgb3ZlcmxheXMsIGFuZCBvbmUgd2l0aFxuICogQ1NTIGNsYXNzIG5hbWUgYG9sLW92ZXJsYXljb250YWluZXJgIGZvciBvdGhlciBvdmVybGF5cyAoc2VlIHRoZSBgc3RvcEV2ZW50YFxuICogb3B0aW9uIG9mIHtAbGluayBtb2R1bGU6b2wvT3ZlcmxheX5PdmVybGF5fSBmb3IgdGhlIGRpZmZlcmVuY2UpLiBUaGUgbWFwXG4gKiBpdHNlbGYgaXMgcGxhY2VkIGluIGEgZnVydGhlciBlbGVtZW50IHdpdGhpbiB0aGUgdmlld3BvcnQuXG4gKlxuICogTGF5ZXJzIGFyZSBzdG9yZWQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0gaW5cbiAqIGxheWVyR3JvdXBzLiBBIHRvcC1sZXZlbCBncm91cCBpcyBwcm92aWRlZCBieSB0aGUgbGlicmFyeS4gVGhpcyBpcyB3aGF0IGlzXG4gKiBhY2Nlc3NlZCBieSBgZ2V0TGF5ZXJHcm91cGAgYW5kIGBzZXRMYXllckdyb3VwYC4gTGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIGFyZSBhZGRlZCB0byB0aGlzIGdyb3VwLCBhbmQgYGFkZExheWVyYCBhbmQgYHJlbW92ZUxheWVyYCBjaGFuZ2UgdGhlXG4gKiBsYXllciBjb2xsZWN0aW9uIGluIHRoZSBncm91cC4gYGdldExheWVyc2AgaXMgYSBjb252ZW5pZW5jZSBmdW5jdGlvbiBmb3JcbiAqIGBnZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKClgLiBOb3RlIHRoYXQge0BsaW5rIG1vZHVsZTpvbC9sYXllci9Hcm91cH5Hcm91cH1cbiAqIGlzIGEgc3ViY2xhc3Mgb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlfSwgc28gbGF5ZXJzIGVudGVyZWQgaW4gdGhlXG4gKiBvcHRpb25zIG9yIGFkZGVkIHdpdGggYGFkZExheWVyYCBjYW4gYmUgZ3JvdXBzLCB3aGljaCBjYW4gY29udGFpbiBmdXJ0aGVyXG4gKiBncm91cHMsIGFuZCBzbyBvbi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBNYXAgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1hcCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLk1hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWFwKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgb3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghb3B0aW9ucy5jb250cm9scykge1xuICAgICAgICAgICAgb3B0aW9ucy5jb250cm9scyA9IGRlZmF1bHRDb250cm9scygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0aW9ucy5pbnRlcmFjdGlvbnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaW50ZXJhY3Rpb25zID0gZGVmYXVsdEludGVyYWN0aW9ucyh7XG4gICAgICAgICAgICAgICAgb25Gb2N1c09ubHk6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgTWFwLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb21wb3NpdGVNYXBSZW5kZXJlcih0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBNYXA7XG59KFBsdWdnYWJsZU1hcCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sXG4gKi9cbmltcG9ydCBBdHRyaWJ1dGlvbiBmcm9tICcuL2NvbnRyb2wvQXR0cmlidXRpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb24gZnJvbSAnLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBSb3RhdGUgZnJvbSAnLi9jb250cm9sL1JvdGF0ZS5qcyc7XG5pbXBvcnQgWm9vbSBmcm9tICcuL2NvbnRyb2wvWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEF0dHJpYnV0aW9uIH0gZnJvbSAnLi9jb250cm9sL0F0dHJpYnV0aW9uLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQ29udHJvbCB9IGZyb20gJy4vY29udHJvbC9Db250cm9sLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRnVsbFNjcmVlbiB9IGZyb20gJy4vY29udHJvbC9GdWxsU2NyZWVuLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW91c2VQb3NpdGlvbiB9IGZyb20gJy4vY29udHJvbC9Nb3VzZVBvc2l0aW9uLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgT3ZlcnZpZXdNYXAgfSBmcm9tICcuL2NvbnRyb2wvT3ZlcnZpZXdNYXAuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBSb3RhdGUgfSBmcm9tICcuL2NvbnRyb2wvUm90YXRlLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgU2NhbGVMaW5lIH0gZnJvbSAnLi9jb250cm9sL1NjYWxlTGluZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFpvb20gfSBmcm9tICcuL2NvbnRyb2wvWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFpvb21TbGlkZXIgfSBmcm9tICcuL2NvbnRyb2wvWm9vbVNsaWRlci5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFpvb21Ub0V4dGVudCB9IGZyb20gJy4vY29udHJvbC9ab29tVG9FeHRlbnQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZWZhdWx0c09wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29udHJvbC9BdHRyaWJ1dGlvbi5qc1wiKS5PcHRpb25zfSBbYXR0cmlidXRpb25PcHRpb25zXVxuICogT3B0aW9ucyBmb3Ige0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3JvdGF0ZT10cnVlXSBJbmNsdWRlXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29udHJvbC9Sb3RhdGUuanNcIikuT3B0aW9uc30gW3JvdGF0ZU9wdGlvbnNdIE9wdGlvbnNcbiAqIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt6b29tXSBJbmNsdWRlIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2NvbnRyb2wvWm9vbS5qc1wiKS5PcHRpb25zfSBbem9vbU9wdGlvbnNdIE9wdGlvbnMgZm9yXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfS5cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBTZXQgb2YgY29udHJvbHMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBVbmxlc3MgY29uZmlndXJlZCBvdGhlcndpc2UsXG4gKiB0aGlzIHJldHVybnMgYSBjb2xsZWN0aW9uIGNvbnRhaW5pbmcgYW4gaW5zdGFuY2Ugb2YgZWFjaCBvZiB0aGUgZm9sbG93aW5nXG4gKiBjb250cm9sczpcbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1JvdGF0ZX5Sb3RhdGV9XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9BdHRyaWJ1dGlvbn5BdHRyaWJ1dGlvbn1cbiAqXG4gKiBAcGFyYW0ge0RlZmF1bHRzT3B0aW9uc30gW29wdF9vcHRpb25zXVxuICogRGVmYXVsdHMgb3B0aW9ucy5cbiAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdD59XG4gKiBDb250cm9scy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgdmFyIGNvbnRyb2xzID0gbmV3IENvbGxlY3Rpb24oKTtcbiAgICB2YXIgem9vbUNvbnRyb2wgPSBvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbSA6IHRydWU7XG4gICAgaWYgKHpvb21Db250cm9sKSB7XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobmV3IFpvb20ob3B0aW9ucy56b29tT3B0aW9ucykpO1xuICAgIH1cbiAgICB2YXIgcm90YXRlQ29udHJvbCA9IG9wdGlvbnMucm90YXRlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJvdGF0ZSA6IHRydWU7XG4gICAgaWYgKHJvdGF0ZUNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbHMucHVzaChuZXcgUm90YXRlKG9wdGlvbnMucm90YXRlT3B0aW9ucykpO1xuICAgIH1cbiAgICB2YXIgYXR0cmlidXRpb25Db250cm9sID0gb3B0aW9ucy5hdHRyaWJ1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5hdHRyaWJ1dGlvbiA6IHRydWU7XG4gICAgaWYgKGF0dHJpYnV0aW9uQ29udHJvbCkge1xuICAgICAgICBjb250cm9scy5wdXNoKG5ldyBBdHRyaWJ1dGlvbihvcHRpb25zLmF0dHJpYnV0aW9uT3B0aW9ucykpO1xuICAgIH1cbiAgICByZXR1cm4gY29udHJvbHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250cm9sLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvblxuICovXG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IERvdWJsZUNsaWNrWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5pbXBvcnQgRHJhZ1BhbiBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuaW1wb3J0IERyYWdSb3RhdGUgZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlLmpzJztcbmltcG9ydCBEcmFnWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmltcG9ydCBLZXlib2FyZFBhbiBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzJztcbmltcG9ydCBLZXlib2FyZFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMnO1xuaW1wb3J0IEtpbmV0aWMgZnJvbSAnLi9LaW5ldGljLmpzJztcbmltcG9ydCBNb3VzZVdoZWVsWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tLmpzJztcbmltcG9ydCBQaW5jaFJvdGF0ZSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzJztcbmltcG9ydCBQaW5jaFpvb20gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEb3VibGVDbGlja1pvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdBbmREcm9wIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnQW5kRHJvcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdCb3ggfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdCb3guanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnUGFuIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUGFuLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1JvdGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdSb3RhdGVBbmRab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlQW5kWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYXcgfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYXcuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBFeHRlbnQgfSBmcm9tICcuL2ludGVyYWN0aW9uL0V4dGVudC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEludGVyYWN0aW9uIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEtleWJvYXJkUGFuIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEtleWJvYXJkWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgTW9kaWZ5IH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb2RpZnkuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3VzZVdoZWVsWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQaW5jaFJvdGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQaW5jaFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBvaW50ZXIgfSBmcm9tICcuL2ludGVyYWN0aW9uL1BvaW50ZXIuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTZWxlY3QgfSBmcm9tICcuL2ludGVyYWN0aW9uL1NlbGVjdC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNuYXAgfSBmcm9tICcuL2ludGVyYWN0aW9uL1NuYXAuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBUcmFuc2xhdGUgfSBmcm9tICcuL2ludGVyYWN0aW9uL1RyYW5zbGF0ZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRzT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbYWx0U2hpZnREcmFnUm90YXRlPXRydWVdIFdoZXRoZXIgQWx0LVNoaWZ0LWRyYWcgcm90YXRlIGlzXG4gKiBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb25Gb2N1c09ubHk9ZmFsc2VdIEludGVyYWN0IG9ubHkgd2hlbiB0aGUgbWFwIGhhcyB0aGVcbiAqIGZvY3VzLiBUaGlzIGFmZmVjdHMgdGhlIGBNb3VzZVdoZWVsWm9vbWAgYW5kIGBEcmFnUGFuYCBpbnRlcmFjdGlvbnMgYW5kIGlzXG4gKiB1c2VmdWwgd2hlbiBwYWdlIHNjcm9sbCBpcyBkZXNpcmVkIGZvciBtYXBzIHRoYXQgZG8gbm90IGhhdmUgdGhlIGJyb3dzZXInc1xuICogZm9jdXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkb3VibGVDbGlja1pvb209dHJ1ZV0gV2hldGhlciBkb3VibGUgY2xpY2sgem9vbSBpc1xuICogZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2tleWJvYXJkPXRydWVdIFdoZXRoZXIga2V5Ym9hcmQgaW50ZXJhY3Rpb24gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW21vdXNlV2hlZWxab29tPXRydWVdIFdoZXRoZXIgbW91c2V3aGVlbCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzaGlmdERyYWdab29tPXRydWVdIFdoZXRoZXIgU2hpZnQtZHJhZyB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtkcmFnUGFuPXRydWVdIFdoZXRoZXIgZHJhZyBwYW4gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoUm90YXRlPXRydWVdIFdoZXRoZXIgcGluY2ggcm90YXRlIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtwaW5jaFpvb209dHJ1ZV0gV2hldGhlciBwaW5jaCB6b29tIGlzIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EZWx0YV0gWm9vbSBsZXZlbCBkZWx0YSB3aGVuIHVzaW5nIGtleWJvYXJkIG9yIGRvdWJsZSBjbGljayB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tRHVyYXRpb25dIER1cmF0aW9uIG9mIHRoZSB6b29tIGFuaW1hdGlvbiBpblxuICogbWlsbGlzZWNvbmRzLlxuICovXG4vKipcbiAqIFNldCBvZiBpbnRlcmFjdGlvbnMgaW5jbHVkZWQgaW4gbWFwcyBieSBkZWZhdWx0LiBTcGVjaWZpYyBpbnRlcmFjdGlvbnMgY2FuIGJlXG4gKiBleGNsdWRlZCBieSBzZXR0aW5nIHRoZSBhcHByb3ByaWF0ZSBvcHRpb24gdG8gZmFsc2UgaW4gdGhlIGNvbnN0cnVjdG9yXG4gKiBvcHRpb25zLCBidXQgdGhlIG9yZGVyIG9mIHRoZSBpbnRlcmFjdGlvbnMgaXMgZml4ZWQuICBJZiB5b3Ugd2FudCB0byBzcGVjaWZ5XG4gKiBhIGRpZmZlcmVudCBvcmRlciBmb3IgaW50ZXJhY3Rpb25zLCB5b3Ugd2lsbCBuZWVkIHRvIGNyZWF0ZSB5b3VyIG93blxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbn0gaW5zdGFuY2VzIGFuZCBpbnNlcnRcbiAqIHRoZW0gaW50byBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn0gaW4gdGhlIG9yZGVyIHlvdSB3YW50XG4gKiBiZWZvcmUgY3JlYXRpbmcgeW91ciB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9IGluc3RhbmNlLiBDaGFuZ2luZyB0aGUgb3JkZXIgY2FuXG4gKiBiZSBvZiBpbnRlcmVzdCBpZiB0aGUgZXZlbnQgcHJvcGFnYXRpb24gbmVlZHMgdG8gYmUgc3RvcHBlZCBhdCBhIHBvaW50LlxuICogVGhlIGRlZmF1bHQgc2V0IG9mIGludGVyYWN0aW9ucywgaW4gc2VxdWVuY2UsIGlzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGV+RHJhZ1JvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb21+RG91YmxlQ2xpY2tab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdQYW5+RHJhZ1Bhbn1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZX5QaW5jaFJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21+UGluY2hab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbX5LZXlib2FyZFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb21+TW91c2VXaGVlbFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1pvb21+RHJhZ1pvb219XG4gKlxuICogQHBhcmFtIHtEZWZhdWx0c09wdGlvbnN9IFtvcHRfb3B0aW9uc10gRGVmYXVsdHMgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKiBBIGNvbGxlY3Rpb24gb2YgaW50ZXJhY3Rpb25zIHRvIGJlIHVzZWQgd2l0aCB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwfVxuICogY29uc3RydWN0b3IncyBgaW50ZXJhY3Rpb25zYCBvcHRpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyhvcHRfb3B0aW9ucykge1xuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgIHZhciBpbnRlcmFjdGlvbnMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICAgIHZhciBraW5ldGljID0gbmV3IEtpbmV0aWMoLTAuMDA1LCAwLjA1LCAxMDApO1xuICAgIHZhciBhbHRTaGlmdERyYWdSb3RhdGUgPSBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0aW9ucy5hbHRTaGlmdERyYWdSb3RhdGVcbiAgICAgICAgOiB0cnVlO1xuICAgIGlmIChhbHRTaGlmdERyYWdSb3RhdGUpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdSb3RhdGUoKSk7XG4gICAgfVxuICAgIHZhciBkb3VibGVDbGlja1pvb20gPSBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kb3VibGVDbGlja1pvb20gOiB0cnVlO1xuICAgIGlmIChkb3VibGVDbGlja1pvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERvdWJsZUNsaWNrWm9vbSh7XG4gICAgICAgICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIGRyYWdQYW4gPSBvcHRpb25zLmRyYWdQYW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHJhZ1BhbiA6IHRydWU7XG4gICAgaWYgKGRyYWdQYW4pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IERyYWdQYW4oe1xuICAgICAgICAgICAgb25Gb2N1c09ubHk6IG9wdGlvbnMub25Gb2N1c09ubHksXG4gICAgICAgICAgICBraW5ldGljOiBraW5ldGljLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBwaW5jaFJvdGF0ZSA9IG9wdGlvbnMucGluY2hSb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucGluY2hSb3RhdGUgOiB0cnVlO1xuICAgIGlmIChwaW5jaFJvdGF0ZSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hSb3RhdGUoKSk7XG4gICAgfVxuICAgIHZhciBwaW5jaFpvb20gPSBvcHRpb25zLnBpbmNoWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFpvb20gOiB0cnVlO1xuICAgIGlmIChwaW5jaFpvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IFBpbmNoWm9vbSh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIGtleWJvYXJkID0gb3B0aW9ucy5rZXlib2FyZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5rZXlib2FyZCA6IHRydWU7XG4gICAgaWYgKGtleWJvYXJkKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBLZXlib2FyZFBhbigpKTtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkWm9vbSh7XG4gICAgICAgICAgICBkZWx0YTogb3B0aW9ucy56b29tRGVsdGEsXG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIG1vdXNlV2hlZWxab29tID0gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tb3VzZVdoZWVsWm9vbSA6IHRydWU7XG4gICAgaWYgKG1vdXNlV2hlZWxab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBNb3VzZVdoZWVsWm9vbSh7XG4gICAgICAgICAgICBvbkZvY3VzT25seTogb3B0aW9ucy5vbkZvY3VzT25seSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgc2hpZnREcmFnWm9vbSA9IG9wdGlvbnMuc2hpZnREcmFnWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zaGlmdERyYWdab29tIDogdHJ1ZTtcbiAgICBpZiAoc2hpZnREcmFnWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1pvb20oe1xuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJldHVybiBpbnRlcmFjdGlvbnM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbnRlcmFjdGlvbi5qcy5tYXAiLCJpbXBvcnQgQ29udHJvbCBmcm9tICdvbC9jb250cm9sL0NvbnRyb2wnO1xyXG4vKipcclxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgQ29udHJvbHMgd2l0aCBjaGlsZCBjb250cm9sc1xyXG4gKlxyXG4gKiBUaGUgZWxlbWVudCBwcm9wZXJ0eSBvZiB0aGUgQ29tcG9zaXRlQ29udHJvbCB3aWxsIGJlY29tZSB0aGUgdGFyZ2V0IGVsZW1lbnQgb2YgZXZlcnkgY2hpbGQgY29udHJvbFxyXG4gKiBhbmQgYWxzbyB0aGUgY3VycmVudCBtYXAgd2lsbCBiZSBzZXQgZm9yIGVhY2ggY2hpbGQgY29udHJvbFxyXG4gKlxyXG4gKiBUaGlzIGlzIHVzZWQgZS5nLiBmb3IgdGhlIChsYXlvdXQpIGNvbnRhaW5lciBjb250cm9sc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbXBvc2l0ZUNvbnRyb2wgZXh0ZW5kcyBDb250cm9sIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIEEgc2luZ2xlIGNoaWxkIGNvbnRyb2wgb3IgYSBjb2xsZWN0aW9uIG9mIGNoaWxkIGNvbnRyb2xzXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgT3BlbkxheWVyIGNvbnRyb2wgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihjaGlsZENvbnRyb2xzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcbiAgICAgICAgaWYgKCFvcHRzLmVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWNvbXBvc2l0ZSc7XHJcbiAgICAgICAgICAgIG9wdHMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjaGlsZHJlbjtcclxuICAgICAgICBpZiAoY2hpbGRDb250cm9scyBpbnN0YW5jZW9mIENvbnRyb2wpIHtcclxuICAgICAgICAgICAgY2hpbGRyZW4gPSBbY2hpbGRDb250cm9sc107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkQ29udHJvbHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoaWxkcmVuLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuc2V0VGFyZ2V0KG9wdHMuZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIob3B0cyk7XHJcbiAgICAgICAgdGhpcy5jaGlsZENvbnRyb2xzID0gY2hpbGRyZW47XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBvdmVycmlkZGVuIHNldE1hcCBtZXRob2RcclxuICAgICAqXHJcbiAgICAgKiBIZXJlIHdlIHNldCB0aGUgbWFwIGZvciBhbGwgY2hpbGQgY29udHJvbHNcclxuICAgICAqIEBwYXJhbSBtYXAgdGhlIGN1cnJlbnQgbWFwXHJcbiAgICAgKi9cclxuICAgIHNldE1hcChtYXApIHtcclxuICAgICAgICBzdXBlci5zZXRNYXAobWFwKTtcclxuICAgICAgICBpZiAobWFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRDb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5zZXRNYXAobWFwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGdldHRlciBmb3IgdGhlIGNoaWxkIGNvbnRyb2xzXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKi9cclxuICAgIGdldENoaWxkQ29udHJvbHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRDb250cm9scztcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBDb21wb3NpdGVDb250cm9sIH0gZnJvbSBcIi4uL2Jhc2VcIjtcclxuLyoqXHJcbiAqIEEgYmFzZSBjbGFzcyBmb3IgYSBjb250YWluZXIgb2YgY29udHJvbHMgaW4gdGhlIHNhbWUgSFRNTCBkaXYgZWxlbWVudFxyXG4gKlxyXG4gKiBUaGlzIGNvbnRyb2wgY3JlYXRlcyBhIHBhcmVudCBkaXYsIGFuZCBwdXRzIHRoZSBjaGlsZCBjb250cm9scyBpbiBpdC5cclxuICogVGFyZ2V0IGFuZCBtYXAgYXJlIHNldCBhdXRvbWF0aWNhbGx5IC0gc2VlIHtAbGlua2NvZGUgQ29tcG9zaXRlQ29udHJvbH1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb250YWluZXIgZXh0ZW5kcyBDb21wb3NpdGVDb250cm9sIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjb250YWluZXIgb3B0aW9uc1xyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudCA/IG9wdGlvbnMuZWxlbWVudCA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKG9wdGlvbnMuc3R5bGVDbGFzcyk7XHJcbiAgICAgICAgb3B0aW9ucy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICBzdXBlcihvcHRpb25zLmNoaWxkQ29udHJvbHMsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuc3R5bGVDbGFzcyA9IG9wdGlvbnMuc3R5bGVDbGFzcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQSBnZXR0ZXIgZm9yIHRoZSBzdHlsZSBjbGFzc1xyXG4gICAgICovXHJcbiAgICBnZXRTdHlsZUNsYXNzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlQ2xhc3M7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcbi8qKlxyXG4gKiBBIHNpbXBsZSBmb290ZXIge0BsaW5rY29kZSBDb250YWluZXJ9XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgRm9vdGVyIGV4dGVuZHMgQ29udGFpbmVyIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIFRoZSBjaGlsZCBjb250cm9scyBmb3IgdGhlIGZvb3RlciBjb250YWluZXJcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgY29udHJvbCBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNoaWxkQ29udHJvbHMsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdHMpLCB7IHN0eWxlQ2xhc3M6ICdiZ2lzLWZvb3RlcicsIGNoaWxkQ29udHJvbHMgfSkpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBBIHNpbXBsZSBoZWxwZXIgbWV0aG9kIGZvciBzaW1wbGVyIGhhbmRsaW5nIG9mIGFycmF5cy5cclxuICogUmVnYXJkbGVzcyBpZiB5b3UgZ2l2ZSBhIHN0cmluZyBvciBhbiBhcnJheSBvZiBzdHJpbmdzIHlvdSB3aWxsIHJlY2VpdmUgYW4gYXJyYXlcclxuICpcclxuICogQHBhcmFtIHZhbHVlIGEgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ1xyXG4gKi9cclxuY29uc3QgdG9BcnJheSA9ICh2YWx1ZSkgPT4ge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFt2YWx1ZV07XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgY2hpbGQgSFRNTCBlbGVtZW50IGlmIGl0IGRvZXMgbm90IGV4aXN0IGFuZCBhZGRzIGl0IGFzIGNoaWxkIHRvIHRoZSBnaXZlbiBlbGVtZW50XHJcbiAqXHJcbiAqIEBwYXJhbSBlbGVtZW50IHRoZSBwYXJlbnQgZWxlbWVudFxyXG4gKiBAcGFyYW0gdGFnTmFtZSB0aGUgdGFnIG5hbWUgZm9yIHRoZSBuZXcgY2hpbGQgLSBlLmcuIGRpdlxyXG4gKiBAcGFyYW0gY2xhc3NOYW1lIGEgY3NzIGNsYXNzIG5hbWUgZm9yIHRoZSBuZXcgY2hpbGRcclxuICovXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVDaGlsZElmTm90RXhpc3QgPSAoZWxlbWVudCwgdGFnTmFtZSwgY2xhc3NOYW1lKSA9PiB7XHJcbiAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgaWYgKCFlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NsYXNzTmFtZX1gKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwgY2xhc3NOYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFbmNsb3NpbmcgZWxlbWVudCBpcyBudWxsXCIpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmVtb3ZlcyBhIGNoaWxkIGVsZW1lbnQgd2l0aCBnaXZlbiBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgZ2l2ZW4gZWxlbWVudFxyXG4gKiBAcGFyYW0gZWxlbWVudCB0aGUgcGFyZW50IGVsZW1lbnRcclxuICogQHBhcmFtIGNsYXNzTmFtZSB0aGUgY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGNoaWxkIGVsZW1lbnRcclxuICovXHJcbmV4cG9ydCBjb25zdCByZW1vdmVDaGlsZElmRXhpc3QgPSAoZWxlbWVudCwgY2xhc3NOYW1lKSA9PiB7XHJcbiAgICBpZiAoZWxlbWVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgY29uc3QgY2hpbGQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2NsYXNzTmFtZX1gKTtcclxuICAgICAgICBpZiAoY2hpbGQgIT0gbnVsbCAmJiBlbGVtZW50LmNvbnRhaW5zKGNoaWxkKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZW1vdmUgYWxsIGNoaWxkcmVuIGVsZW1lbnRzIHdpdGggZ2l2ZW4gY3NzIGNsYXNzIG5hbWUgb2YgdGhlIGdpdmVuIHBhcmVudCBlbGVtZW50LlxyXG4gKiBUaGUgY2hpbGRyZW4gZG9uJ3QgaGF2ZSB0byBiZSBhIGRpcmVjdCBjaGlsZCBvZiB0aGUgcGFyZW50IGVsZW1lbnQuXHJcbiAqIEBwYXJhbSBlbGVtZW50IHRoZSBwYXJlbnQgZWxlbWVudFxyXG4gKiBAcGFyYW0gY2xhc3NOYW1lIHRoZSBjc3MgY2xhc3MgbmFtZSBvZiB0aGUgY2hpbGQgZWxlbWVudFxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHJlbW92ZUNoaWxkcmVuSWZFeGlzdCA9IChlbGVtZW50LCBjbGFzc05hbWUpID0+IHtcclxuICAgIGlmIChlbGVtZW50ICE9IG51bGwpIHtcclxuICAgICAgICBjb25zdCBjaGlsZHJlbiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7Y2xhc3NOYW1lfWApO1xyXG4gICAgICAgIGlmIChjaGlsZHJlbiAhPSBudWxsICYmIGNoaWxkcmVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiBjaGlsZC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogQ3JlYXRlcyBhIEhUTUwgZWxlbWVudFxyXG4gKiBAcGFyYW0gdGFnTmFtZSB0aGUgdGFnIG5hbWUgZm9yIHRoZSBuZXcgZWxlbWVudCAtIGUuZy4gZGl2XHJcbiAqIEBwYXJhbSBjbGFzc05hbWUgYSBjc3MgY2xhc3MgbmFtZSBmb3IgdGhlIG5ldyBlbGVtZW50XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgY3JlYXRlRWxlbWVudCA9ICh0YWdOYW1lLCBjbGFzc05hbWUpID0+IHtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xyXG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICByZXR1cm4gZWxlbWVudDtcclxufTtcclxuLyoqXHJcbiAqIFRvZ2dsZXMgY3NzIGNsYXNzIG5hbWVzIG9mIGVsZW1lbnRzIGZvdW5kIGJ5IHRoZSBnaXZlbiBzZWxlY3RvcihzKVxyXG4gKiBAcGFyYW0gc2VsZWN0b3JzMnRvZ2dsZSBvbmUgb3IgbW9yZSBjc3Mgc2VsZWN0b3JzXHJcbiAqIEBwYXJhbSB0b2dnbGVDbGFzc05hbWVzIG9uZSBvciBtb3JlIGNsYXNzIG5hbWVzIHRvIHRvZ2dsZVxyXG4gKiBAcGFyYW0gYW5jZXN0b3IgYW4gYW5jZXN0b3IgZWxlbWVudCBmb3IgdGhlIHF1ZXJ5IHNlbGVjdGlvbiAoZGVmYXVsdCBpcyBkb2N1bWVudClcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVDbGFzcyA9IChzZWxlY3RvcnMydG9nZ2xlLCB0b2dnbGVDbGFzc05hbWVzLCBhbmNlc3RvciA9IGRvY3VtZW50KSA9PiB7XHJcbiAgICB0b0FycmF5KHNlbGVjdG9yczJ0b2dnbGUpLmZvckVhY2goc2VsZWN0b3IydG9nZ2xlID0+IHtcclxuICAgICAgICBjb25zdCB0b2dnbGVFbGVtZW50ID0gYW5jZXN0b3IucXVlcnlTZWxlY3RvcihzZWxlY3RvcjJ0b2dnbGUpO1xyXG4gICAgICAgIGlmICh0b2dnbGVFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRvQXJyYXkodG9nZ2xlQ2xhc3NOYW1lcykuZm9yRWFjaCh0b2dnbGVDbGFzc05hbWUgPT4gdG9nZ2xlRWxlbWVudCA9PT0gbnVsbCB8fCB0b2dnbGVFbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0b2dnbGVFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUodG9nZ2xlQ2xhc3NOYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcbi8qKlxyXG4gKiBBZGRzIGEgY2xpY2sgZXZlbnQgbGlzdGVuZXIgdG8gZWxlbWVudHMgd2hpY2ggdHJpZ2dlcnMgY3NzIGNsYXNzIHRvZ2dsaW5nXHJcbiAqIEBwYXJhbSBjbGlja1NlbGVjdG9ycyBvbmUgb3IgbW9yZSBjc3Mgc2VsZWN0b3JzIGZvciB0aGUgZWxlbWVudHMgd2hpY2ggc2hhbGwgbGlzdGVuIHRvIGNsaWNrIGV2ZW50c1xyXG4gKiBAcGFyYW0gc2VsZWN0b3JzMnRvZ2dsZSBvbmUgb3IgbW9yZSBjc3MgY2xhc3Mgc2VsZWN0b3JzIGZvciB0aGUgZWxlbWVudHMgd2l0aCB0aGUgY3NzIGNsYXNzZXMgdG8gdG9nZ2xlXHJcbiAqIEBwYXJhbSB0b2dnbGVDbGFzc05hbWVzIG9uZSBvciBtb3JlIGNzcyBjbGFzcyBuYW1lcyB3aGljaCBzaGFsbCB0b2dnbGVcclxuICovXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVDbGFzc09uQ2xpY2sgPSAoY2xpY2tTZWxlY3RvcnMsIHNlbGVjdG9yczJ0b2dnbGUsIHRvZ2dsZUNsYXNzTmFtZXMpID0+IHtcclxuICAgIHRvQXJyYXkoY2xpY2tTZWxlY3RvcnMpLmZvckVhY2goY2xpY2tTZWxlY3RvciA9PiB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIChfYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xpY2tTZWxlY3RvcikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0b2dnbGVDbGFzcyhzZWxlY3RvcnMydG9nZ2xlLCB0b2dnbGVDbGFzc05hbWVzKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuIiwiaW1wb3J0IHsgQ29tcG9zaXRlQ29udHJvbCB9IGZyb20gXCIuL0NvbXBvc2l0ZUNvbnRyb2xcIjtcclxuLyoqXHJcbiAqICoqQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgYnV0dG9ucyoqXHJcbiAqXHJcbiAqIEEgYnV0dG9uIGlzIGFuIE9wZW5MYXllciBjb250cm9sIHdpdGggYSBkZWZhdWx0IGxheW91dC4gWW91IGNhbiBjaGFuZ2Ugc29tZSBzdHlsZSBjbGFzc2VzLCB0b29sdGlwcyBldGMuXHJcbiAqIHdpdGggdGhlIHtAbGlua2NvZGUgQnV0dG9uT3B0aW9uc31cclxuICpcclxuICogU29tZSBidXR0b25zIGV4dGVuZCBPcGVuTGF5ZXIgY29udHJvbHMgd2l0aCBpdHMgZmVhdHVyZXMsIGJ1dCBtb3N0IG9mIHRoZW0gYXJlIGp1c3QgYSBzaGVsbCBmb3IgZnVydGhlciBpbXBsZW1lbnRhdGlvbnNcclxuICpcclxuICogWW91IGNhbiBzZXQgdGhlIGljb24gZm9udCBvZiB0aGUgYnV0dG9uIHdpdGggdGhlIHVuaWNvZGUgbnVtYmVyIG9yIHRoZSBpY29uQ2xhc3NOYW1lIG9wdGlvbi5cclxuICpcclxuICogQGV2ZW50IGNsaWNrIEEgQnV0dG9uIGRpc3BhdGNoZXMgdGhlIENMSUNLIGV2ZW50IHNvIHRoYXQgeW91IGNhbiBsaXN0ZW4gdG8gaXQgd2l0aCB0aGUgKm9uKiBPcGVuTGF5ZXIgbWV0aG9kXHJcbiAqIEV4YW1wbGU6XHJcbiAqIGBgYHR5cGVzY3JpcHRcclxuICogY29uc3QgcHJpbnRDdHJsID0gbmV3IFByaW50KHsgcHJldmVudERlZmF1bHQ6IHRydWUgfSk7XHJcbiAqIHByaW50Q3RybC5vbihFdmVudFR5cGUuQ0xJQ0ssIHRoaXMuaGFuZGxlUHJpbnQpO1xyXG4gKiBgYGBcclxuICogQWx0ZXJuYXRpdmVseSB5b3UgY2FuIG92ZXJyaWRlIHRoZSB7QGxpbmtjb2RlIGhhbmRsZUV2ZW50fSBtZXRob2RcclxuICpcclxuICogQHJlbWFyayBBcyBhIGJ1dHRvbiBpcyBhbHNvIGEgQ29tcG9zaXRlQ29udHJvbCBpdCBjYW4gaGF2ZSBjaGlsZCBjb250cm9scy4gRS5nLiBpdCdzIHVzZWQgd2l0aCB0aGUge0BsaW5rY29kZSBUb2dnbGVCdXR0b259XHJcbiAqXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnV0dG9uIGV4dGVuZHMgQ29tcG9zaXRlQ29udHJvbCB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBCdXR0b24gb3B0aW9uc1xyXG4gICAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgT3B0aW9uYWwgY2hpbGQgY29udHJvbHNcclxuICAgICAqIEBldmVudCBjbGljayBUaGUgZXZlbnQgZmlyZWQgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY2hpbGRDb250cm9scykge1xyXG4gICAgICAgIG9wdGlvbnMudG9vbHRpcEFzVGV4dEVsZW1lbnQgPSBvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50ID8gb3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCA6IGZhbHNlO1xyXG4gICAgICAgIG9wdGlvbnMudW5pY29kZSA9IG9wdGlvbnMudW5pY29kZSB8fCBudWxsO1xyXG4gICAgICAgIG9wdGlvbnMuaWNvbkNsYXNzTmFtZSA9IG9wdGlvbnMuaWNvbkNsYXNzTmFtZSB8fCBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zLnVuaWNvZGUgPT09IG51bGwgJiYgb3B0aW9ucy5pY29uQ2xhc3NOYW1lID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMudW5pY29kZSA9IDB4ZTkwMztcclxuICAgICAgICB9XHJcbiAgICAgICAgb3B0aW9ucy50b29sdGlwID0gb3B0aW9ucy50b29sdGlwIHx8ICcnO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQgPyBvcHRpb25zLmVsZW1lbnQgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBidXR0b25Db250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9IG9wdGlvbnMuY29udGFpbmVyQ2xhc3NOYW1lID8gb3B0aW9ucy5jb250YWluZXJDbGFzc05hbWUgOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wnO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQudGl0bGUgPSBvcHRpb25zLnRvb2x0aXA7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtaWNvbi1idXR0b24nO1xyXG4gICAgICAgIGlmIChvcHRpb25zLnVuaWNvZGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC50ZXh0Q29udGVudCA9IFN0cmluZy5mcm9tQ29kZVBvaW50KG9wdGlvbnMudW5pY29kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuaWNvbkNsYXNzTmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmFwcGVuZENoaWxkKEJ1dHRvbi5nZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUob3B0aW9ucy5pY29uQ2xhc3NOYW1lKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQudGl0bGUgPSBvcHRpb25zLnRvb2x0aXA7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMudG9vbHRpcC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgb3B0aW9ucy50b29sdGlwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyRWxlbWVudC5hcHBlbmQoYnV0dG9uRWxlbWVudCk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMudG9vbHRpcEFzVGV4dEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgZGl2RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBkaXZFbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWNvbnRyb2wtYnV0dG9uLXRleHQtY29udGFpbmVyJztcclxuICAgICAgICAgICAgY29uc3Qgc3BhbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgICAgIHNwYW5FbGVtZW50LnRleHRDb250ZW50ID0gb3B0aW9ucy50b29sdGlwO1xyXG4gICAgICAgICAgICBzcGFuRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1jb250cm9sLWJ1dHRvbi10ZXh0JztcclxuICAgICAgICAgICAgZGl2RWxlbWVudC5hcHBlbmRDaGlsZChzcGFuRWxlbWVudCk7XHJcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN1cGVyKGNoaWxkQ29udHJvbHMgPyBjaGlsZENvbnRyb2xzIDogW10sIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgZWxlbWVudDogYnV0dG9uQ29udGFpbmVyRWxlbWVudCB9KSk7XHJcbiAgICAgICAgdGhpcy51bmljb2RlID0gb3B0aW9ucy51bmljb2RlO1xyXG4gICAgICAgIHRoaXMuaWNvbkNsYXNzTmFtZSA9IG9wdGlvbnMuaWNvbkNsYXNzTmFtZTtcclxuICAgICAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbkVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQoXCJjbGlja1wiKSwgZmFsc2UpO1xyXG4gICAgICAgIGlmICghb3B0aW9ucy5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVFdmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGlzIHRoZSBkZWZhdWx0IGNsaWNrIGhhbmRsZXIgb2YgYSBidXR0b25cclxuICAgICAqXHJcbiAgICAgKiBPdmVycmlkZSBpdCBmb3IgeW91ciBiZW5lZml0IG9yIGRpc2FibGUgZXhlY3V0aW9uIHdpdGggb3B0aW9ucy5wcmV2ZW50RGVmYXVsdFxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcclxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBnZXR0ZXIgZm9yIHRoZSBidXR0b25cclxuICAgICAqL1xyXG4gICAgZ2V0QnV0dG9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQSBzZXR0ZXIgdG8gY2hhbmdlIHRoZSB1bmljb2RlIGZvciB0aGUgYnV0dG9uIGZvbnQgaWNvbi5cclxuICAgICAqIFJlbW92ZXMgdGhlIGljb24gdGFnIGZvciB0aGUgYnV0dG9uLlxyXG4gICAgICogQHBhcmFtIHVuaWNvZGVcclxuICAgICAqL1xyXG4gICAgc2V0QnV0dG9uVW5pY29kZSh1bmljb2RlKSB7XHJcbiAgICAgICAgdGhpcy5nZXRCdXR0b24oKS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB0aGlzLmdldEJ1dHRvbigpLnRleHRDb250ZW50ID0gU3RyaW5nLmZyb21Db2RlUG9pbnQodW5pY29kZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEEgc2V0dGVyIHRvIGNoYW5nZSB0aGUgaWNvbiBjbGFzcyBuYW1lIGZvciB0aGUgYnV0dG9uLlxyXG4gICAgICogUmVzZXRzIHRoZSB1bmljb2RlIGZvciB0aGUgYnV0dG9uIGljb24uXHJcbiAgICAgKiBAcGFyYW0gaWNvbkNsYXNzTmFtZVxyXG4gICAgICovXHJcbiAgICBzZXRCdXR0b25JY29uQ2xhc3NOYW1lKGljb25DbGFzc05hbWUpIHtcclxuICAgICAgICB0aGlzLmdldEJ1dHRvbigpLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgdGhpcy5nZXRCdXR0b24oKS5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICB0aGlzLmdldEJ1dHRvbigpLmFwcGVuZENoaWxkKEJ1dHRvbi5nZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUoaWNvbkNsYXNzTmFtZSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYW4gaWNvbiBlbGVtZW50IGZvciB0aGUgZ2l2ZW4gY3NzIGNsYXNzIG5hbWVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWNvbkNsYXNzTmFtZVxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKGljb25DbGFzc05hbWUpIHtcclxuICAgICAgICBjb25zdCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgICAgICBpY29uRWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1pY29uICcgKyBpY29uQ2xhc3NOYW1lO1xyXG4gICAgICAgIHJldHVybiBpY29uRWxlbWVudDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgRXZlbnRUeXBlIGZyb20gXCJvbC9ldmVudHMvRXZlbnRUeXBlXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUNoaWxkSWZOb3RFeGlzdCwgcmVtb3ZlQ2hpbGRyZW5JZkV4aXN0LCB0b2dnbGVDbGFzcyB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2RvbVwiO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi9CdXR0b25cIjtcclxuaW1wb3J0IEJhc2VFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcbi8qKlxyXG4gKiBUaGUgdG9nZ2xlIGV2ZW50IHdoaWNoIGlzIGRpc3BhdGNoZWQgd2hlbiB0aGUge0BsaW5rY29kZSBUb2dnbGVCdXR0b259IGlzIGNsaWNrZWRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb2dnbGVFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZS4gVXN1YWxseSBhIHtAbGlua2NvZGUgVG9nZ2xlRXZlbnRUeXBlfVxyXG4gICAgICogQHBhcmFtIGlzVG9nZ2xlZCBUaGUgZmxhZyB0byBzaG93IHRoZSBzdGF0ZSBvZiB0aGUgdG9nZ2xlXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGlzVG9nZ2xlZCkge1xyXG4gICAgICAgIHN1cGVyKHR5cGUpO1xyXG4gICAgICAgIHRoaXMuaXNUb2dnbGVkID0gaXNUb2dnbGVkO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBIHtAbGlua0NvZGUgQnV0dG9ufSB0byB0b2dnbGUgdGhlIHZpc2liaWxpdHkgb2YgYSB7QGxpbmtjb2RlIENvbnRhaW5lcn1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBUb2dnbGVCdXR0b24gZXh0ZW5kcyBCdXR0b24ge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xyXG4gICAgICAgIHN1cGVyKG9wdHMsIG9wdGlvbnMuY29udGFpbmVyVG9Ub2dnbGUpO1xyXG4gICAgICAgIHRoaXMuX2lzVG9nZ2xlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyVG9Ub2dnbGUgPSBvcHRpb25zLmNvbnRhaW5lclRvVG9nZ2xlO1xyXG4gICAgICAgIHRoaXMudW5pY29kZVRvZ2dsZWQgPSBvcHRpb25zLnVuaWNvZGVUb2dnbGVkIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5pY29uQ2xhc3NOYW1lVG9nZ2xlZCA9IG9wdGlvbnMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQgfHwgbnVsbDtcclxuICAgICAgICBpZiAodGhpcy51bmljb2RlVG9nZ2xlZCA9PT0gbnVsbCAmJiB0aGlzLmljb25DbGFzc05hbWVUb2dnbGVkID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5pY29kZVRvZ2dsZWQgPSAweGU5MDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgb3ZlcnJpZGRlbiBoYW5kbGVFdmVudCBtZXRob2RcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IEV2ZW50VHlwZS5DTElDSykge1xyXG4gICAgICAgICAgICB0aGlzLmlzVG9nZ2xlZCA9ICF0aGlzLmlzVG9nZ2xlZDtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUb2dnbGVFdmVudChcInRvZ2dsZVwiLCB0aGlzLmlzVG9nZ2xlZCkpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gdGhpcy5nZXRQYXJlbnRFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU92ZXJsYXlGb3JFbGVtZW50KHBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50JykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlT3ZlcmxheU91dGVyKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzVG9nZ2xlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudW5pY29kZVRvZ2dsZWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEJ1dHRvblVuaWNvZGUodGhpcy51bmljb2RlVG9nZ2xlZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmljb25DbGFzc05hbWVUb2dnbGVkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRCdXR0b25JY29uQ2xhc3NOYW1lKHRoaXMuaWNvbkNsYXNzTmFtZVRvZ2dsZWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudW5pY29kZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0QnV0dG9uVW5pY29kZSh0aGlzLnVuaWNvZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5pY29uQ2xhc3NOYW1lICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRCdXR0b25JY29uQ2xhc3NOYW1lKHRoaXMuaWNvbkNsYXNzTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdG9nZ2xlQ2xhc3MoJy4nICsgdGhpcy5jb250YWluZXJUb1RvZ2dsZS5nZXRTdHlsZUNsYXNzKCksICdzaG93JywgcGFyZW50RWxlbWVudCB8fCBkb2N1bWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHNldHRlciBmb3IgdGhlIHRvZ2dsZWQgc3RhdGUgb2YgdGhlIGJ1dHRvblxyXG4gICAgICogQHBhcmFtIGlzVG9nZ2xlZFxyXG4gICAgICovXHJcbiAgICBzZXQgaXNUb2dnbGVkKGlzVG9nZ2xlZCkge1xyXG4gICAgICAgIHRoaXMuX2lzVG9nZ2xlZCA9IGlzVG9nZ2xlZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQSBnZXR0ZXIgZm9yIHRoZSB0b2dnbGVkIHN0YXRlIG9mIHRoZSBidXR0b25cclxuICAgICAqL1xyXG4gICAgZ2V0IGlzVG9nZ2xlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNUb2dnbGVkO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuZCByZW1vdmVzIGFuIG92ZXJsYXkgbGF5ZXIgKGZvciBncmF5IG91dCkgb24gYW4gZWxlbWVudFxyXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIHBhcmVudCBlbGVtZW50IGZvciB0aGUgb3ZlcmxheSBsYXllclxyXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSBUaGUgc3R5bGUgY2xhc3MgbmFtZSBmb3IgdGhlIG92ZXJsYXkgbGF5ZXJcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqL1xyXG4gICAgaGFuZGxlT3ZlcmxheUZvckVsZW1lbnQoZWxlbWVudCwgY2xhc3NOYW1lID0gJ2JnaXMtb3ZlcmxheS1iZycpIHtcclxuICAgICAgICBpZiAodGhpcy5lbGVtZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNUb2dnbGVkKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYmdpcy1vdmVybGF5LXRvZ2dsZWQtdHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgY3JlYXRlQ2hpbGRJZk5vdEV4aXN0KGVsZW1lbnQsICdkaXYnLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2JnaXMtb3ZlcmxheS10b2dnbGVkLXRydWUnKTtcclxuICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuSWZFeGlzdChlbGVtZW50LCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBGaW5kcyBhbGwgZWxlbWVudHMgaW4gdGhlIERPTSB3aXRoICouYmdpcy10b2dnbGVkLW92ZXJsYXlhYmxlKiBzdHlsZSBjbGFzcyB0byBncmF5IHRoZW0gb3V0XHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKi9cclxuICAgIGhhbmRsZU92ZXJsYXlPdXRlcigpIHtcclxuICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gdGhpcy5nZXRQYXJlbnRFbGVtZW50KCk7XHJcbiAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3Qgb3ZlcmxheWFibGVQYXJlbnRzID0gcGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmdpcy10b2dnbGVkLW92ZXJsYXlhYmxlJyk7XHJcbiAgICAgICAgICAgIGlmIChvdmVybGF5YWJsZVBhcmVudHMgJiYgb3ZlcmxheWFibGVQYXJlbnRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIG92ZXJsYXlhYmxlUGFyZW50cy5mb3JFYWNoKChwYXJlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU92ZXJsYXlGb3JFbGVtZW50KHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBjbG9zZXN0IHBhcmVudCBlbGVtZW50IGZvciB0b2dnbGUuXHJcbiAgICAgKiBGb3IgdGhlIGNvcmUgZmVhdHVyZSB2ZXJzaW9uIGl0J3MgdGhlIC5iZ2lzLW1hcFxyXG4gICAgICogRm9yIHRoZSBmdWxsIGZlYXR1cmUgdmVyc2lvbiBpdCdzIHRoZSAuYmdpc1xyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBnZXRQYXJlbnRFbGVtZW50KCkge1xyXG4gICAgICAgIGxldCBjbG9zZXN0UGFyZW50ID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoJy5iZ2lzJyk7XHJcbiAgICAgICAgaWYgKCFjbG9zZXN0UGFyZW50KSB7XHJcbiAgICAgICAgICAgIGNsb3Nlc3RQYXJlbnQgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCgnLmJnaXMtbWFwJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjbG9zZXN0UGFyZW50O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lclwiO1xyXG5pbXBvcnQgeyBUb2dnbGVCdXR0b24gfSBmcm9tIFwiLi4vYmFzZVwiO1xyXG4vKipcclxuICogQSB7QGxpbmtjb2RlIENvbnRhaW5lcn0gZm9yIGRpc3BsYXkgaW4gdGhlIGJvdHRvbSByaWdodCBjb3JuZXIuXHJcbiAqIFdlIGhhdmUgaG9yaXpvbnRhbCBjb250cm9scyBhbmQgdmVydGljYWwgY29udHJvbHMuIFRoZSB2aXNpYmlsaXR5IG9mIHZlcnRpY2FsXHJcbiAqIGNvbnRyb2xzIGlzIGNvbnRyb2xsZWQgYnkgYSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCb3R0b21SaWdodCBleHRlbmRzIENvbnRhaW5lciB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9uc1xyXG4gICAgICogQGV2ZW50IFRvZ2dsZUV2ZW50IFRoZSBldmVudCBmaXJlZCB3aGVuIHRoZSB7QGxpbmtjb2RlIFRvZ2dsZUJ1dHRvbn0gaXMgY2xpY2tlZFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IHRvZ2dsZUJ1dHRvbiA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMudmVydGljYWxDb250cm9scyAmJiBvcHRpb25zLnZlcnRpY2FsQ29udHJvbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJUb1RvZ2dsZSA9IG5ldyBDb250YWluZXIoeyBzdHlsZUNsYXNzOiAnYmdpcy1ib3R0b20tcmlnaHQtdmVydGljYWwnLCBjaGlsZENvbnRyb2xzOiBvcHRpb25zLnZlcnRpY2FsQ29udHJvbHMgfSk7XHJcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbiA9IG5ldyBUb2dnbGVCdXR0b24oeyBjb250YWluZXJUb1RvZ2dsZSwgY29udGFpbmVyQ2xhc3NOYW1lOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgYmdpcy1ib3R0b20tcmlnaHQtb3ZlcmxheScsIHVuaWNvZGU6IDB4ZTkwNywgdW5pY29kZVRvZ2dsZWQ6IDB4ZTkyNCwgdG9vbHRpcDogJ21laHIuLi4nIH0pO1xyXG4gICAgICAgICAgICBvcHRpb25zLmhvcml6b250YWxDb250cm9scy5wdXNoKHRvZ2dsZUJ1dHRvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xyXG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cyksIHsgc3R5bGVDbGFzczogJ2JnaXMtYm90dG9tLXJpZ2h0LWhvcml6b250YWwnLCBjaGlsZENvbnRyb2xzOiBvcHRpb25zLmhvcml6b250YWxDb250cm9scyB9KSk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSB0b2dnbGVCdXR0b247XHJcbiAgICAgICAgaWYgKHRoaXMudG9nZ2xlQnV0dG9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvZ2dsZVwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBIGdldHRlciBmb3IgdGhlIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufVxyXG4gICAgICovXHJcbiAgICBnZXRUb2dnbGVCdXR0b24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9nZ2xlQnV0dG9uO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lclwiO1xyXG4vKipcclxuICogQSBzaW1wbGUge0BsaW5rY29kZSBDb250YWluZXJ9IGZvciBjb250cm9scyBvbiB0aGUgdXBwZXIgcmlnaHQgY29ybmVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9wUmlnaHQgZXh0ZW5kcyBDb250YWluZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgVGhlIGNoaWxkIGNvbnRyb2wgb3IgYW4gYXJyYXkgb2YgY2hpbGQgY29udHJvbHNcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihjaGlsZENvbnRyb2xzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBvcHRzKSwgeyBzdHlsZUNsYXNzOiAnYmdpcy10b3AtcmlnaHQnLCBjaGlsZENvbnRyb2xzIH0pKTtcclxuICAgIH1cclxufVxyXG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0dlb2xvY2F0aW9uXG4gKi9cbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgY2lyY3VsYXIgYXMgY2lyY3VsYXJQb2x5Z29uIH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24sIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucywgaWRlbnRpdHlUcmFuc2Zvcm0sIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IHRvUmFkaWFucyB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBBQ0NVUkFDWTogJ2FjY3VyYWN5JyxcbiAgICBBQ0NVUkFDWV9HRU9NRVRSWTogJ2FjY3VyYWN5R2VvbWV0cnknLFxuICAgIEFMVElUVURFOiAnYWx0aXR1ZGUnLFxuICAgIEFMVElUVURFX0FDQ1VSQUNZOiAnYWx0aXR1ZGVBY2N1cmFjeScsXG4gICAgSEVBRElORzogJ2hlYWRpbmcnLFxuICAgIFBPU0lUSU9OOiAncG9zaXRpb24nLFxuICAgIFBST0pFQ1RJT046ICdwcm9qZWN0aW9uJyxcbiAgICBTUEVFRDogJ3NwZWVkJyxcbiAgICBUUkFDS0lORzogJ3RyYWNraW5nJyxcbiAgICBUUkFDS0lOR19PUFRJT05TOiAndHJhY2tpbmdPcHRpb25zJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIG9uIEdlb2xvY2F0aW9uIGVycm9yLlxuICovXG52YXIgR2VvbG9jYXRpb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbG9jYXRpb25FcnJvciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dlb2xvY2F0aW9uUG9zaXRpb25FcnJvcn0gZXJyb3IgZXJyb3Igb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgRXZlbnRUeXBlLkVSUk9SKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvZGUgPSBlcnJvci5jb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBHZW9sb2NhdGlvbkVycm9yO1xufShCYXNlRXZlbnQpKTtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdHJhY2tpbmc9ZmFsc2VdIFN0YXJ0IFRyYWNraW5nIHJpZ2h0IGFmdGVyXG4gKiBpbnN0YW50aWF0aW9uLlxuICogQHByb3BlcnR5IHtQb3NpdGlvbk9wdGlvbnN9IFt0cmFja2luZ09wdGlvbnNdIFRyYWNraW5nIG9wdGlvbnMuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFRoZSBwcm9qZWN0aW9uIHRoZSBwb3NpdGlvblxuICogaXMgcmVwb3J0ZWQgaW4uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6YWNjdXJhY3knfCdjaGFuZ2U6YWNjdXJhY3lHZW9tZXRyeSd8J2NoYW5nZTphbHRpdHVkZSd8XG4gKiAgICAnY2hhbmdlOmFsdGl0dWRlQWNjdXJhY3knfCdjaGFuZ2U6aGVhZGluZyd8J2NoYW5nZTpwb3NpdGlvbid8J2NoYW5nZTpwcm9qZWN0aW9uJ3wnY2hhbmdlOnNwZWVkJ3wnY2hhbmdlOnRyYWNraW5nJ3xcbiAqICAgICdjaGFuZ2U6dHJhY2tpbmdPcHRpb25zJ30gR2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8R2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTwnZXJyb3InLCBHZW9sb2NhdGlvbkVycm9yLCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8R2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzfFxuICogICAgICdlcnJvcicsIFJldHVybj59IEdlb2xvY2F0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBIZWxwZXIgY2xhc3MgZm9yIHByb3ZpZGluZyBIVE1MNSBHZW9sb2NhdGlvbiBjYXBhYmlsaXRpZXMuXG4gKiBUaGUgW0dlb2xvY2F0aW9uIEFQSV0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8pXG4gKiBpcyB1c2VkIHRvIGxvY2F0ZSBhIHVzZXIncyBwb3NpdGlvbi5cbiAqXG4gKiBUbyBnZXQgbm90aWZpZWQgb2YgcG9zaXRpb24gY2hhbmdlcywgcmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgdGhlIGdlbmVyaWNcbiAqIGBjaGFuZ2VgIGV2ZW50IG9uIHlvdXIgaW5zdGFuY2Ugb2Yge0BsaW5rIG1vZHVsZTpvbC9HZW9sb2NhdGlvbn5HZW9sb2NhdGlvbn0uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgdmFyIGdlb2xvY2F0aW9uID0gbmV3IEdlb2xvY2F0aW9uKHtcbiAqICAgICAgIC8vIHRha2UgdGhlIHByb2plY3Rpb24gdG8gdXNlIGZyb20gdGhlIG1hcCdzIHZpZXdcbiAqICAgICAgIHByb2plY3Rpb246IHZpZXcuZ2V0UHJvamVjdGlvbigpXG4gKiAgICAgfSk7XG4gKiAgICAgLy8gbGlzdGVuIHRvIGNoYW5nZXMgaW4gcG9zaXRpb25cbiAqICAgICBnZW9sb2NhdGlvbi5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZ0KSB7XG4gKiAgICAgICB3aW5kb3cuY29uc29sZS5sb2coZ2VvbG9jYXRpb24uZ2V0UG9zaXRpb24oKSk7XG4gKiAgICAgfSk7XG4gKlxuICogQGZpcmVzIG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2V2ZW50OmVycm9yXG4gKiBAYXBpXG4gKi9cbnZhciBHZW9sb2NhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbG9jYXRpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gR2VvbG9jYXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7R2VvbG9jYXRpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dlb2xvY2F0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dlb2xvY2F0aW9uT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1bnByb2plY3RlZCAoRVBTRzo0MzI2KSBkZXZpY2UgcG9zaXRpb24uXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb3NpdGlvbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zZm9ybV8gPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud2F0Y2hJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlBST0pFQ1RJT04sIF90aGlzLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlRSQUNLSU5HLCBfdGhpcy5oYW5kbGVUcmFja2luZ0NoYW5nZWRfKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudHJhY2tpbmdPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFRyYWNraW5nT3B0aW9ucyhvcHRpb25zLnRyYWNraW5nT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0VHJhY2tpbmcob3B0aW9ucy50cmFja2luZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50cmFja2luZyA6IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRyYWNraW5nKGZhbHNlKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKHByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhnZXRQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKSwgcHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbl8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5QT1NJVElPTiwgdGhpcy50cmFuc2Zvcm1fKHRoaXMucG9zaXRpb25fKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmhhbmRsZVRyYWNraW5nQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgnZ2VvbG9jYXRpb24nIGluIG5hdmlnYXRvcikge1xuICAgICAgICAgICAgdmFyIHRyYWNraW5nID0gdGhpcy5nZXRUcmFja2luZygpO1xuICAgICAgICAgICAgaWYgKHRyYWNraW5nICYmIHRoaXMud2F0Y2hJZF8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hJZF8gPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbih0aGlzLnBvc2l0aW9uQ2hhbmdlXy5iaW5kKHRoaXMpLCB0aGlzLnBvc2l0aW9uRXJyb3JfLmJpbmQodGhpcyksIHRoaXMuZ2V0VHJhY2tpbmdPcHRpb25zKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRyYWNraW5nICYmIHRoaXMud2F0Y2hJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMud2F0Y2hJZF8pO1xuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtHZW9sb2NhdGlvblBvc2l0aW9ufSBwb3NpdGlvbiBwb3NpdGlvbiBldmVudC5cbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUucG9zaXRpb25DaGFuZ2VfID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBjb29yZHMgPSBwb3NpdGlvbi5jb29yZHM7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkFDQ1VSQUNZLCBjb29yZHMuYWNjdXJhY3kpO1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5BTFRJVFVERSwgY29vcmRzLmFsdGl0dWRlID09PSBudWxsID8gdW5kZWZpbmVkIDogY29vcmRzLmFsdGl0dWRlKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuQUxUSVRVREVfQUNDVVJBQ1ksIGNvb3Jkcy5hbHRpdHVkZUFjY3VyYWN5ID09PSBudWxsID8gdW5kZWZpbmVkIDogY29vcmRzLmFsdGl0dWRlQWNjdXJhY3kpO1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5IRUFESU5HLCBjb29yZHMuaGVhZGluZyA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRvUmFkaWFucyhjb29yZHMuaGVhZGluZykpO1xuICAgICAgICBpZiAoIXRoaXMucG9zaXRpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uXyA9IFtjb29yZHMubG9uZ2l0dWRlLCBjb29yZHMubGF0aXR1ZGVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl9bMF0gPSBjb29yZHMubG9uZ2l0dWRlO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl9bMV0gPSBjb29yZHMubGF0aXR1ZGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2plY3RlZFBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm1fKHRoaXMucG9zaXRpb25fKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUE9TSVRJT04sIHByb2plY3RlZFBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuU1BFRUQsIGNvb3Jkcy5zcGVlZCA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvb3Jkcy5zcGVlZCk7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IGNpcmN1bGFyUG9seWdvbih0aGlzLnBvc2l0aW9uXywgY29vcmRzLmFjY3VyYWN5KTtcbiAgICAgICAgZ2VvbWV0cnkuYXBwbHlUcmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1fKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuQUNDVVJBQ1lfR0VPTUVUUlksIGdlb21ldHJ5KTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7R2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yfSBlcnJvciBlcnJvciBvYmplY3QuXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLnBvc2l0aW9uRXJyb3JfID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR2VvbG9jYXRpb25FcnJvcihlcnJvcikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24gaW4gbWV0ZXJzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24gbWVhc3VyZW1lbnQgaW5cbiAgICAgKiAgICAgbWV0ZXJzLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRBY2N1cmFjeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBnZW9tZXRyeSBvZiB0aGUgcG9zaXRpb24gYWNjdXJhY3kuXG4gICAgICogQHJldHVybiB7P2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEEgZ2VvbWV0cnkgb2YgdGhlIHBvc2l0aW9uIGFjY3VyYWN5LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRBY2N1cmFjeUdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHs/aW1wb3J0KFwiLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZX0dFT01FVFJZKSB8fCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYWx0aXR1ZGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgYWx0aXR1ZGUgb2YgdGhlIHBvc2l0aW9uIGluIG1ldGVycyBhYm92ZSBtZWFuXG4gICAgICogICAgIHNlYSBsZXZlbC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0QWx0aXR1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BTFRJVFVERSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbHRpdHVkZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGFjY3VyYWN5IG9mIHRoZSBhbHRpdHVkZSBtZWFzdXJlbWVudCBpblxuICAgICAqICAgICBtZXRlcnMuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldEFsdGl0dWRlQWNjdXJhY3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BTFRJVFVERV9BQ0NVUkFDWSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBoZWFkaW5nIGFzIHJhZGlhbnMgY2xvY2t3aXNlIGZyb20gTm9ydGguXG4gICAgICogTm90ZTogZGVwZW5kaW5nIG9uIHRoZSBicm93c2VyLCB0aGUgaGVhZGluZyBpcyBvbmx5IGRlZmluZWQgaWYgdGhlIGBlbmFibGVIaWdoQWNjdXJhY3lgXG4gICAgICogaXMgc2V0IHRvIGB0cnVlYCBpbiB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgaGVhZGluZyBvZiB0aGUgZGV2aWNlIGluIHJhZGlhbnMgZnJvbSBub3J0aC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0SGVhZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkhFQURJTkcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGRldmljZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBkZXZpY2UgcmVwb3J0ZWRcbiAgICAgKiAgICAgaW4gdGhlIGN1cnJlbnQgcHJvamVjdGlvbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBPU0lUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHByb2plY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHByb2plY3Rpb24gdGhlIHBvc2l0aW9uIGlzXG4gICAgICogICAgIHJlcG9ydGVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBST0pFQ1RJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3BlZWQgaW4gbWV0ZXJzIHBlciBzZWNvbmQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGluc3RhbnRhbmVvdXMgc3BlZWQgb2YgdGhlIGRldmljZSBpbiBtZXRlcnNcbiAgICAgKiAgICAgcGVyIHNlY29uZC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0U3BlZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5TUEVFRCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSBkZXZpY2UgbG9jYXRpb24gaXMgYmVpbmcgdHJhY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZGV2aWNlIGxvY2F0aW9uIGlzIGJlaW5nIHRyYWNrZWQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFRyYWNraW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoUHJvcGVydHkuVFJBQ0tJTkcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb24tb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtQb3NpdGlvbk9wdGlvbnN8dW5kZWZpbmVkfSBQb3NpdGlvbk9wdGlvbnMgYXMgZGVmaW5lZCBieVxuICAgICAqICAgICB0aGUgW0hUTUw1IEdlb2xvY2F0aW9uIHNwZWNcbiAgICAgKiAgICAgXShodHRwczovL3d3dy53My5vcmcvVFIvZ2VvbG9jYXRpb24tQVBJLyNwb3NpdGlvbl9vcHRpb25zX2ludGVyZmFjZSkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFRyYWNraW5nT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7UG9zaXRpb25PcHRpb25zfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlRSQUNLSU5HX09QVElPTlMpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvamVjdGlvbiB0byB1c2UgZm9yIHRyYW5zZm9ybWluZyB0aGUgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdGhlIHBvc2l0aW9uIGlzXG4gICAgICogICAgIHJlcG9ydGVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5zZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUFJPSkVDVElPTiwgZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSB0cmFja2luZy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHRyYWNraW5nIEVuYWJsZSB0cmFja2luZy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuc2V0VHJhY2tpbmcgPSBmdW5jdGlvbiAodHJhY2tpbmcpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuVFJBQ0tJTkcsIHRyYWNraW5nKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvZ2VvbG9jYXRpb24tQVBJLyNwb3NpdGlvbi1vcHRpb25zLlxuICAgICAqIEBwYXJhbSB7UG9zaXRpb25PcHRpb25zfSBvcHRpb25zIFBvc2l0aW9uT3B0aW9ucyBhcyBkZWZpbmVkIGJ5IHRoZVxuICAgICAqICAgICBbSFRNTDUgR2VvbG9jYXRpb24gc3BlY1xuICAgICAqICAgICBdKGh0dHA6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UpLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5zZXRUcmFja2luZ09wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5UUkFDS0lOR19PUFRJT05TLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIHJldHVybiBHZW9sb2NhdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgR2VvbG9jYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9sb2NhdGlvbi5qcy5tYXAiLCJpbXBvcnQgR2VvbG9jYXRpb24gZnJvbSAnb2wvR2VvbG9jYXRpb24nO1xyXG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCBFdmVudCBmcm9tIFwib2wvZXZlbnRzL0V2ZW50XCI7XHJcbmltcG9ydCBFdmVudFR5cGUgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFR5cGVcIjtcclxuaW1wb3J0IHsgZnJvbUxvbkxhdCB9IGZyb20gXCJvbC9wcm9qXCI7XHJcbi8qKlxyXG4gKiBUaGUgbG9jYXRpb24gcmV0cmlldmVkIGV2ZW50IHdoaWNoIGlzIGRpc3BhdGNoZWQgd2hlbiB3ZSByZXRyaWV2ZSBhIHBvc2l0aW9uIHZpYSB0aGUge0BsaW5rY29kZSBHZW9Mb2NhdGV9IGJ1dHRvblxyXG4gKlxyXG4gKiBAVE9ETyBleHRlbmQgdG8gcmV0cmlldmUgbW9yZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBPcGVubGF5ZXJzIEdlb2xvY2F0ZSBvYmplY3RcclxuICovXHJcbmV4cG9ydCBjbGFzcyBMb2NhdGlvblJldHJpZXZlZEV2ZW50IGV4dGVuZHMgRXZlbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIGV2ZW50IHR5cGUuIFVzdWFsbHkgYSB7QGxpbmtjb2RlIExvY2F0aW9uUmV0cmlldmVkRXZlbnRUeXBlfVxyXG4gICAgICogQHBhcmFtIHBvc2l0aW9uIFlvdXIgY3VycmVudCBwb3NpdGlvblxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBwb3NpdGlvbikge1xyXG4gICAgICAgIHN1cGVyKHR5cGUpO1xyXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQSB7QGxpbmtDb2RlIEJ1dHRvbn0gdG8gcmV0cmlldmUgeW91ciBjdXJyZW50IHBvc2l0aW9uXHJcbiAqXHJcbiAqIFRoaXMgY2xhc3MgdXNlcyB0aGUgT3BlbkxheWVycyBHZW9sb2NhdGlvbiBvYmplY3QgdG8gZmV0Y2ggdGhlIGN1cnJlbnQgcG9zaXRpb24uXHJcbiAqIFdoZW4gd2UgcmV0cmlldmUgdGhlIGN1cnJlbnQgcG9zaXRpb24sIGEgTG9jYXRpb25SZXRyaWV2ZWRFdmVudCBpcyBmaXJlZFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdlb0xvY2F0ZSBleHRlbmRzIEJ1dHRvbiB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbih7IHVuaWNvZGU6IDB4ZTkzNiwgY29udGFpbmVyQ2xhc3NOYW1lOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgb2wtZ2VvbG9jYXRlJywgdG9vbHRpcDogJ1N0YW5kb3J0IHplbnRyaWVyZW4nIH0sIG9wdHMpKTtcclxuICAgICAgICBjb25zdCBnZW9Mb2NhdGlvbk9wdGlvbnMgPSAob3B0aW9ucyB8fCB7fSk7XHJcbiAgICAgICAgdGhpcy5fZ2VvTG9jYXRpb24gPSBuZXcgR2VvbG9jYXRpb24oZ2VvTG9jYXRpb25PcHRpb25zKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBvdmVycmlkZVxyXG4gICAgICogQHBhcmFtIGV2ZW50XHJcbiAgICAgKi9cclxuICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gRXZlbnRUeXBlLkNMSUNLKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdlb0xvY2F0aW9uICYmICgoX2IgPSAoX2EgPSB0aGlzLmdldE1hcCgpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0VmlldygpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZ2V0UHJvamVjdGlvbigpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5vbmNlKCdjaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VvTG9jYXRpb24uc2V0VHJhY2tpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIChfYSA9IHRoaXMuZ2V0TWFwKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRWaWV3KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogZnJvbUxvbkxhdCh0aGlzLmdlb0xvY2F0aW9uLmdldFBvc2l0aW9uKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlb0xvY2F0aW9uLmdldFBvc2l0aW9uKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBMb2NhdGlvblJldHJpZXZlZEV2ZW50KFwibG9jYXRpb25fcmV0cmlldmVkXCIsIHRoaXMuZ2VvTG9jYXRpb24uZ2V0UG9zaXRpb24oKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW9Mb2NhdGlvbi5zZXRUcmFja2luZyh0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQSBnZXR0ZXIgZm9yIHRoZSBPcGVuTGF5ZXJzIEdlb2xvY2F0aW9uIG9iamVjdFxyXG4gICAgICovXHJcbiAgICBnZXQgZ2VvTG9jYXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dlb0xvY2F0aW9uO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGRlZmF1bHQgYXMgT2xBdHRyaWJ1dGlvbiB9IGZyb20gJ29sL2NvbnRyb2wvQXR0cmlidXRpb24nO1xyXG4vKipcclxuICogQSBzaW1wbGUgd3JhcHBlciBjb250cm9sIG9mIHRoZSBPcGVuTGF5ZXIgQXR0cmlidXRpb24gY29udHJvbFxyXG4gKlxyXG4gKiBJdCBpcyBjb2xsYXBzZWQgYW5kIHdlIGFkZCBhIGJnaXMgc3R5bGUgY2xhc3MgKCpiZ2lzLWNvcHlyaWdodCopLlxyXG4gKiBTb21lIHZpc2libGUgY2hhbmdlcyBhcmUgbWFkZSB2aWEgY3NzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0aW9uIGV4dGVuZHMgT2xBdHRyaWJ1dGlvbiB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgT3BlbmxheWVyIEF0dHJpYnV0aW9uIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHtcclxuICAgICAgICAgICAgY29sbGFwc2VkOiBmYWxzZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgc3VwZXIob3B0cyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSArPSAnIGJnaXMtY29weXJpZ2h0JztcclxuICAgIH1cclxufVxyXG4iLCIvKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uXG4gKi9cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiwgZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zLCBnZXRVc2VyUHJvamVjdGlvbiwgaWRlbnRpdHlUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4gfSBmcm9tICcuLi9ldmVudHMuanMnO1xuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgUFJPSkVDVElPTiA9ICdwcm9qZWN0aW9uJztcbi8qKlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xudmFyIENPT1JESU5BVEVfRk9STUFUID0gJ2Nvb3JkaW5hdGVGb3JtYXQnO1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6Y29vcmRpbmF0ZUZvcm1hdCd8J2NoYW5nZTpwcm9qZWN0aW9uJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpjb29yZGluYXRlRm9ybWF0J3wnY2hhbmdlOnByb2plY3Rpb24nLCBSZXR1cm4+fSBNb3VzZVBvc2l0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbW91c2UtcG9zaXRpb24nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fSBbY29vcmRpbmF0ZUZvcm1hdF0gQ29vcmRpbmF0ZSBmb3JtYXQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLiBEZWZhdWx0IGlzIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZVxuICogY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlXG4gKiBjb250cm9sIHRvIGJlIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtzdHJpbmd8Ym9vbGVhbn0gW3BsYWNlaG9sZGVyXSBNYXJrdXAgdG8gc2hvdyB3aGVuIHRoZSBtb3VzZSBwb3NpdGlvbiBpcyBub3RcbiAqIGF2YWlsYWJsZSAoZS5nLiB3aGVuIHRoZSBwb2ludGVyIGxlYXZlcyB0aGUgbWFwIHZpZXdwb3J0KS4gIEJ5IGRlZmF1bHQsIGEgbm9uLWJyZWFraW5nIHNwYWNlXG4gKiBpcyByZW5kZXJlZCB3aGVuIHRoZSBtb3VzZSBsZWF2ZXMgdGhlIHZpZXdwb3J0LiAgVG8gcmVuZGVyIHNvbWV0aGluZyBlbHNlLCBwcm92aWRlIGEgc3RyaW5nXG4gKiB0byBiZSB1c2VkIGFzIHRoZSB0ZXh0IGNvbnRlbnQgKGUuZy4gJ25vIHBvc2l0aW9uJyBvciAnJyBmb3IgYW4gZW1wdHkgc3RyaW5nKS4gIFNldCB0aGUgcGxhY2Vob2xkZXJcbiAqIHRvIGBmYWxzZWAgdG8gcmV0YWluIHRoZSBsYXN0IHBvc2l0aW9uIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgdmlld3BvcnQuICBJbiBhIGZ1dHVyZSByZWxlYXNlLCB0aGlzXG4gKiB3aWxsIGJlIHRoZSBkZWZhdWx0IGJlaGF2aW9yLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1bmRlZmluZWRIVE1MPScmIzE2MDsnXSBUaGlzIG9wdGlvbiBpcyBkZXByZWNhdGVkLiAgVXNlIHRoZSBgcGxhY2Vob2xkZXJgIG9wdGlvbiBpbnN0ZWFkLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgY29udHJvbCB0byBzaG93IHRoZSAyRCBjb29yZGluYXRlcyBvZiB0aGUgbW91c2UgY3Vyc29yLiBCeSBkZWZhdWx0LCB0aGVzZVxuICogYXJlIGluIHRoZSB2aWV3IHByb2plY3Rpb24sIGJ1dCBjYW4gYmUgaW4gYW55IHN1cHBvcnRlZCBwcm9qZWN0aW9uLlxuICogQnkgZGVmYXVsdCB0aGUgY29udHJvbCBpcyBzaG93biBpbiB0aGUgdG9wIHJpZ2h0IGNvcm5lciBvZiB0aGUgbWFwLCBidXQgdGhpc1xuICogY2FuIGJlIGNoYW5nZWQgYnkgdXNpbmcgdGhlIGNzcyBzZWxlY3RvciBgLm9sLW1vdXNlLXBvc2l0aW9uYC5cbiAqXG4gKiBPbiB0b3VjaCBkZXZpY2VzLCB3aGljaCB1c3VhbGx5IGRvIG5vdCBoYXZlIGEgbW91c2UgY3Vyc29yLCB0aGUgY29vcmRpbmF0ZXNcbiAqIG9mIHRoZSBjdXJyZW50bHkgdG91Y2hlZCBwb3NpdGlvbiBhcmUgc2hvd24uXG4gKlxuICogQGFwaVxuICovXG52YXIgTW91c2VQb3NpdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTW91c2VQb3NpdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gTW91c2UgcG9zaXRpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNb3VzZVBvc2l0aW9uKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9XG4gICAgICAgICAgICBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtbW91c2UtcG9zaXRpb24nO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICByZW5kZXI6IG9wdGlvbnMucmVuZGVyLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL2V2ZW50c1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge01vdXNlUG9zaXRpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge01vdXNlUG9zaXRpb25PblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihQUk9KRUNUSU9OLCBfdGhpcy5oYW5kbGVQcm9qZWN0aW9uQ2hhbmdlZF8pO1xuICAgICAgICBpZiAob3B0aW9ucy5jb29yZGluYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlRm9ybWF0KG9wdGlvbnMuY29vcmRpbmF0ZUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbikge1xuICAgICAgICAgICAgX3RoaXMuc2V0UHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGFuZ2UgdGhpcyB0byBgZmFsc2VgIHdoZW4gcmVtb3ZpbmcgdGhlIGRlcHJlY2F0ZWQgYHVuZGVmaW5lZEhUTUxgIG9wdGlvbi5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcmVuZGVyT25Nb3VzZU91dCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyID0gJyYjMTYwOyc7XG4gICAgICAgIGlmICgndW5kZWZpbmVkSFRNTCcgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgLy8gZGVwcmVjYXRlZCBiZWhhdmlvclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudW5kZWZpbmVkSFRNTCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBvcHRpb25zLnVuZGVmaW5lZEhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZW5kZXJPbk1vdXNlT3V0ID0gISFwbGFjZWhvbGRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgncGxhY2Vob2xkZXInIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBsYWNlaG9sZGVyID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJlbmRlck9uTW91c2VPdXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyID0gU3RyaW5nKG9wdGlvbnMucGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGxhY2Vob2xkZXJfID0gcGxhY2Vob2xkZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlck9uTW91c2VPdXRfID0gcmVuZGVyT25Nb3VzZU91dDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZEhUTUxfID0gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwUHJvamVjdGlvbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5oYW5kbGVQcm9qZWN0aW9uQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGNvb3JkaW5hdGUgZm9ybWF0IHR5cGUgdXNlZCB0byByZW5kZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24gb3JcbiAgICAgKiB1bmRlZmluZWQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fHVuZGVmaW5lZH0gVGhlIGZvcm1hdCB0byByZW5kZXIgdGhlIGN1cnJlbnRcbiAgICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlRm9ybWF0fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KENPT1JESU5BVEVfRk9STUFUKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHByb2plY3Rpb24gdGhhdCBpcyB1c2VkIHRvIHJlcG9ydCB0aGUgbW91c2UgcG9zaXRpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcHJvamVjdGlvbiB0byByZXBvcnQgbW91c2VcbiAgICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoUFJPSkVDVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5oYW5kbGVNb3VzZU1vdmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgIHRoaXMudXBkYXRlSFRNTF8obWFwLmdldEV2ZW50UGl4ZWwoZXZlbnQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZU1vdXNlT3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlSFRNTF8obnVsbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGNvbnRyb2wgZnJvbSBpdHMgY3VycmVudCBtYXAgYW5kIGF0dGFjaCBpdCB0byB0aGUgbmV3IG1hcC5cbiAgICAgKiBTdWJjbGFzc2VzIG1heSBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgdG8gZ2V0IG5vdGlmaWVkIGFib3V0IGNoYW5nZXMgdG9cbiAgICAgKiB0aGUgbWFwIGhlcmUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsIG1hcCk7XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHZhciB2aWV3cG9ydCA9IG1hcC5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4odmlld3BvcnQsIEV2ZW50VHlwZS5QT0lOVEVSTU9WRSwgdGhpcy5oYW5kbGVNb3VzZU1vdmUsIHRoaXMpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlck9uTW91c2VPdXRfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4odmlld3BvcnQsIEV2ZW50VHlwZS5QT0lOVEVST1VULCB0aGlzLmhhbmRsZU1vdXNlT3V0LCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUhUTUxfKG51bGwpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNvb3JkaW5hdGUgZm9ybWF0IHR5cGUgdXNlZCB0byByZW5kZXIgdGhlIGN1cnJlbnQgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR9IGZvcm1hdCBUaGUgZm9ybWF0IHRvIHJlbmRlciB0aGUgY3VycmVudFxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5zZXRDb29yZGluYXRlRm9ybWF0ID0gZnVuY3Rpb24gKGZvcm1hdCkge1xuICAgICAgICB0aGlzLnNldChDT09SRElOQVRFX0ZPUk1BVCwgZm9ybWF0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvamVjdGlvbiB0aGF0IGlzIHVzZWQgdG8gcmVwb3J0IHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdG8gcmVwb3J0IG1vdXNlXG4gICAgICogICAgIHBvc2l0aW9uIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnNldFByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICB0aGlzLnNldChQUk9KRUNUSU9OLCBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnVwZGF0ZUhUTUxfID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHZhciBodG1sID0gdGhpcy5wbGFjZWhvbGRlcl87XG4gICAgICAgIGlmIChwaXhlbCAmJiB0aGlzLm1hcFByb2plY3Rpb25fKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudHJhbnNmb3JtXykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9qZWN0aW9uID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHRoaXMubWFwUHJvamVjdGlvbl8sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gaWRlbnRpdHlUcmFuc2Zvcm07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1hcCA9IHRoaXMuZ2V0TWFwKCk7XG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZSA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICAgICAgaWYgKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdXNlclByb2plY3Rpb24gPSBnZXRVc2VyUHJvamVjdGlvbigpO1xuICAgICAgICAgICAgICAgIGlmICh1c2VyUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnModGhpcy5tYXBQcm9qZWN0aW9uXywgdXNlclByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8oY29vcmRpbmF0ZSwgY29vcmRpbmF0ZSk7XG4gICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVGb3JtYXQgPSB0aGlzLmdldENvb3JkaW5hdGVGb3JtYXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY29vcmRpbmF0ZUZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICBodG1sID0gY29vcmRpbmF0ZUZvcm1hdChjb29yZGluYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgPSBjb29yZGluYXRlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5yZW5kZXJlZEhUTUxfIHx8IGh0bWwgIT09IHRoaXMucmVuZGVyZWRIVE1MXykge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkSFRNTF8gPSBodG1sO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIHByb2plY3Rpb24uIFJlbmRlcmluZyBvZiB0aGUgY29vcmRpbmF0ZXMgaXMgZG9uZSBpblxuICAgICAqIGBoYW5kbGVNb3VzZU1vdmVgIGFuZCBgaGFuZGxlTW91c2VVcGAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLm1hcFByb2plY3Rpb25fID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1hcFByb2plY3Rpb25fICE9IGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFByb2plY3Rpb25fID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTW91c2VQb3NpdGlvbjtcbn0oQ29udHJvbCkpO1xuZXhwb3J0IGRlZmF1bHQgTW91c2VQb3NpdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1vdXNlUG9zaXRpb24uanMubWFwIiwiaW1wb3J0IHsgZGVmYXVsdCBhcyBPbE1vdXNlUG9zaXRpb24gfSBmcm9tICdvbC9jb250cm9sL01vdXNlUG9zaXRpb24nO1xyXG5pbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdvbC9jb29yZGluYXRlJztcclxuLyoqXHJcbiAqIERpc3BsYXlzIHRoZSBtb3VzZSBwb3NpdGlvbiBpbiB0aGUgbWFwLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vdXNlUG9zaXRpb24gZXh0ZW5kcyBPbE1vdXNlUG9zaXRpb24ge1xyXG4gICAgLyoqXHJcbiAgICAgICAqIENyZWF0ZXMgYSBuZXcgbW91c2UgcG9zaXRpb24gY29udHJvbCB3aXRoIHRoZSBkZmF1bHQgdmFsdWVzLi5cclxuICAgICAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAgICAgKiAvLyBFeGFtcGxlOiBjcmVhdGUgYSBuZXcgTW91c2VQb3NpdGlvbiBjb250cm9sIHdpdGggdGhlIGRlZmF1bHQgcGFyYW1ldGVycy5cclxuICAgICAgICogY29uc3QgbW91c2VQb3NpdGlvbkNvbnRyb2wgPSBuZXcgTW91c2VQb3NpdGlvbigpO1xyXG4gICAgICAgKiBgYGBcclxuICAgICAgICogQHBhcmFtIG9wdGlvbnMgQWxsIG9wdGlvbnMgb2YgdGhlIG9yaWdpbmFsIE9wZW5MYXllcnMgTW91c2VQb3NpdGlvbiBjb250cm9sIGFyZSBhbG93ZWQuXHJcbiAgICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xyXG4gICAgICAgIG9wdHMucHJvamVjdGlvbiA9IG9wdHMucHJvamVjdGlvbiA/IG9wdHMucHJvamVjdGlvbiA6ICdFUFNHOjQzMjYnO1xyXG4gICAgICAgIG9wdHMuY29vcmRpbmF0ZUZvcm1hdCA9IG9wdHMuY29vcmRpbmF0ZUZvcm1hdCA/IG9wdHMuY29vcmRpbmF0ZUZvcm1hdCA6IChjb29yZGluYXRlKSA9PiBjb29yZGluYXRlID8gZm9ybWF0KGNvb3JkaW5hdGUsICd7eH3CsE4ve3l9wrBFJywgNCkgOiAnJztcclxuICAgICAgICBvcHRzLnVuZGVmaW5lZEhUTUwgPSBvcHRzLnVuZGVmaW5lZEhUTUwgPyBvcHRzLnVuZGVmaW5lZEhUTUwgOiAnJm5ic3A7LSZuYnNwO8KwTi8mbmJzcDstJm5ic3A7wrBFJztcclxuICAgICAgICBvcHRzLmNsYXNzTmFtZSA9IG9wdHMuY2xhc3NOYW1lID8gb3B0cy5jbGFzc05hbWUgOiAnb2wtY29udHJvbCBvbC1tb3VzZS1wb3NpdGlvbiBiZ2lzLW1vdXNlcG9zaXRpb24nO1xyXG4gICAgICAgIHN1cGVyKG9wdHMpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IGRlZmF1bHQgYXMgT2xab29tIH0gZnJvbSAnb2wvY29udHJvbC9ab29tJztcclxuLyoqXHJcbiAqIFpvb20gYnV0dG9ucyBjb250cm9sXHJcbiAqIFRoZSBPcGVuTGF5ZXJzIFpvb20gY29udHJvbCBpcyB0aGUgYmFzZSBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFpvb20gZXh0ZW5kcyBPbFpvb20ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvclxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIE9wZW5MYXllcnMgWm9vbSBjb250cm9sIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xyXG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0cyksIHsgem9vbUluTGFiZWw6IFN0cmluZy5mcm9tQ29kZVBvaW50KDB4ZTkzNCksIHpvb21PdXRMYWJlbDogU3RyaW5nLmZyb21Db2RlUG9pbnQoMHhlOTM1KSB9KSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9ICdvbC1jb250cm9sIGJnaXMtY29udHJvbCB6b29tLWNvbnRhaW5lcic7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQ29udHJvbCB9IGZyb20gXCJvbC9jb250cm9sXCI7XHJcbmltcG9ydCBVbml0cyBmcm9tIFwib2wvcHJvai9Vbml0c1wiO1xyXG5pbXBvcnQgeyBnZXRQb2ludFJlc29sdXRpb24gfSBmcm9tIFwib2wvcHJvalwiO1xyXG4vKipcclxuICogMjUuNG1tID0gMSBpbmNoXHJcbiAqIDAuMjhtbSA9IHBpeGVsIHNpemUgYWNjb3JkaW5nIHRvIHRoZSBPR0MgV01UUyBzcGVjaWZpY2F0aW9uXHJcbiAqXHJcbiAqIEBjb25zdFxyXG4gKiBAdHlwZSB7bnVtYmVyfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERJU1BMQVlfRFBJID0gMjUuNCAvIDAuMjg7IC8vIH45MC43MTRcclxuLyoqXHJcbiAqIEBjb25zdFxyXG4gKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cclxuICovXHJcbmNvbnN0IExFQURJTkdfRElHSVRTID0gWzEsIDIsIDVdO1xyXG4vKipcclxuICogRGlzcGxheXMgYSBzY2FsZSBsaW5lIGluIHRoZSBtYXAuXHJcbiAqXHJcbiAqIFRoaXMgY29udHJvbCBpcyBhbiBjdXN0b21pemVkIHZlcnNpb24gb2YgdGhlIE9wZW5MYXllcnMgU2NhbGVsaW5lIGNvbnRyb2wuXHJcbiAqIEhlcmUgdGhlIHNjYWxlbGluZSBpcyBhIHN2ZyBpbWFnZSwgYmVjYXVzZSBub3cgdGhlIGNsaWVudCBjYW4gZXhwb3J0IGl0XHJcbiAqIHdpdGhvdXQgM3JkIHBhcnR5IGRlcGVuZGVuY3kgKHNlZSBvdXIgZXhwb3J0IGV4YW1wbGUpXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2NhbGVMaW5lIGV4dGVuZHMgQ29udHJvbCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgc2NhbGVsaW5lIGNvbnRyb2wuXHJcbiAgICAgKiBgYGB0eXBlc2NyaXB0XHJcbiAgICAgKiAvLyBFeGFtcGxlOiBjcmVhdGUgYSBuZXcgU2NhbGVMaW5lIGNvbnRyb2wgd2l0aCB0aGUgZGVmYXVsdCBwYXJhbWV0ZXJzLlxyXG4gICAgICogY29uc3Qgc2NhbGVMaW5lQ29udHJvbCA9IG5ldyBTY2FsZUxpbmUoKTtcclxuICAgICAqIGBgYFxyXG4gICAgICogQHBhcmFtIG9wdF9vcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdF9vcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcclxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ2JnaXMtc2NhbGVsaW5lJztcclxuICAgICAgICBzdXBlcih7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudmlld1N0YXRlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9taW5XaWR0aCA9IG9wdGlvbnMubWluV2lkdGggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluV2lkdGggOiA2NDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZWRXaWR0aCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnJlbmRlcmVkU1ZHID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZHBpID0gb3B0aW9ucy5kcGkgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgc2NhbGUgbGluZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gbWFwRXZlbnRcclxuICAgICAqL1xyXG4gICAgcmVuZGVyKG1hcEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgZnJhbWVTdGF0ZSA9IG1hcEV2ZW50LmZyYW1lU3RhdGU7XHJcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlRWxlbWVudCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgY29kZSBpcyBtYWlubHkgY29waWVkIGZyb20gdGhlIE9wZW5MYXllcnMgU2NhbGVsaW5lIGNvbnRyb2xcclxuICAgICAqIGFuZCBjdXN0b21pemVkIGZvciBvdXIgc3ZnIGVsZW1lbnRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUVsZW1lbnQoKSB7XHJcbiAgICAgICAgY29uc3Qgdmlld1N0YXRlID0gdGhpcy52aWV3U3RhdGU7XHJcbiAgICAgICAgaWYgKCF2aWV3U3RhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xyXG4gICAgICAgIGNvbnN0IHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcclxuICAgICAgICBjb25zdCBwb2ludFJlc29sdXRpb25Vbml0cyA9IFVuaXRzLk1FVEVSUztcclxuICAgICAgICBsZXQgcG9pbnRSZXNvbHV0aW9uID0gZ2V0UG9pbnRSZXNvbHV0aW9uKHByb2plY3Rpb24sIHZpZXdTdGF0ZS5yZXNvbHV0aW9uLCBjZW50ZXIsIHBvaW50UmVzb2x1dGlvblVuaXRzKTtcclxuICAgICAgICBjb25zdCBtaW5XaWR0aCA9ICh0aGlzLl9taW5XaWR0aCAqICh0aGlzLmRwaSB8fCBESVNQTEFZX0RQSSkpIC8gRElTUExBWV9EUEk7XHJcbiAgICAgICAgY29uc3Qgbm9taW5hbENvdW50ID0gbWluV2lkdGggKiBwb2ludFJlc29sdXRpb247XHJcbiAgICAgICAgbGV0IHN1ZmZpeCA9ICcnO1xyXG4gICAgICAgIGlmIChub21pbmFsQ291bnQgPCAwLjAwMSkge1xyXG4gICAgICAgICAgICBzdWZmaXggPSAnzrxtJztcclxuICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uICo9IDEwMDAwMDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5vbWluYWxDb3VudCA8IDEpIHtcclxuICAgICAgICAgICAgc3VmZml4ID0gJ21tJztcclxuICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uICo9IDEwMDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKG5vbWluYWxDb3VudCA8IDEwMDApIHtcclxuICAgICAgICAgICAgc3VmZml4ID0gJ20nO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc3VmZml4ID0gJ2ttJztcclxuICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uIC89IDEwMDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpID0gMyAqIE1hdGguZmxvb3IoTWF0aC5sb2cobWluV2lkdGggKiBwb2ludFJlc29sdXRpb24pIC8gTWF0aC5sb2coMTApKTtcclxuICAgICAgICBsZXQgY291bnQsIHdpZHRoLCBkZWNpbWFsQ291bnQ7XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGRlY2ltYWxDb3VudCA9IE1hdGguZmxvb3IoaSAvIDMpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWNpbWFsID0gTWF0aC5wb3coMTAsIGRlY2ltYWxDb3VudCk7XHJcbiAgICAgICAgICAgIGNvdW50ID0gTEVBRElOR19ESUdJVFNbKChpICUgMykgKyAzKSAlIDNdICogZGVjaW1hbDtcclxuICAgICAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKGNvdW50IC8gcG9pbnRSZXNvbHV0aW9uKTtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKHdpZHRoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHdpZHRoID49IG1pbldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBnZW5lcmF0ZWRTVkcgPSBudWxsO1xyXG4gICAgICAgIGlmIChjb3VudCAmJiBkZWNpbWFsQ291bnQgPj0gMCkge1xyXG4gICAgICAgICAgICBnZW5lcmF0ZWRTVkcgPSB0aGlzLmdldEdlbmVyYXRlZFNWRyhjb3VudC50b0ZpeGVkKGRlY2ltYWxDb3VudCA8IDAgPyAtZGVjaW1hbENvdW50IDogMCkgKyAnICcgKyBzdWZmaXgsIHdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGdlbmVyYXRlZFNWRyAmJiB0aGlzLnJlbmRlcmVkU1ZHICE9IGdlbmVyYXRlZFNWRykge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChnZW5lcmF0ZWRTVkcpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkU1ZHID0gZ2VuZXJhdGVkU1ZHO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZFdpZHRoICE9IHdpZHRoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcclxuICAgICAgICAgICAgaWYgKGdlbmVyYXRlZFNWRykge1xyXG4gICAgICAgICAgICAgICAgZ2VuZXJhdGVkU1ZHLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBTdHJpbmcod2lkdGgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkV2lkdGggPSB3aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGdlbmVyYXRlZCBzdmcgZWxlbWVudFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0eHQgdGhlIGNhbGN1bGF0ZWQgdGV4dCBjb250ZW50IG9mIHRoZSBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gd2lkdGggdGhlIGNhbGN1bGF0ZWQgb3V0cHV0IHdpZHRoXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBnZXRHZW5lcmF0ZWRTVkcodHh0LCB3aWR0aCkge1xyXG4gICAgICAgIGNvbnN0IHN2Z0hlaWdodCA9IDE4O1xyXG4gICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2JnaXMtc2NhbGVsaW5lLXN2ZycpO1xyXG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIHN2Z0hlaWdodCk7XHJcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBTdHJpbmcod2lkdGgpKTtcclxuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMTAwJScpO1xyXG4gICAgICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcclxuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnaWQnLCAnYmdpcy1zY2FsZWxpbmUtc3ZnLWJhY2tncm91bmQnKTtcclxuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgneCcsIFN0cmluZygwKSk7XHJcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoMCkpO1xyXG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCd3aWR0aCcsICcxMDAlJyAvKlN0cmluZyh3aWR0aCkqLyk7XHJcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICcxMDAlJyAvKlN0cmluZyhzdmdIZWlnaHQpKi8pO1xyXG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsJywgJyNlNWVjZjAnKTtcclxuICAgICAgICByZWN0LnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywgJy41Jyk7XHJcbiAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xyXG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMScpO1xyXG4gICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgJzAgJyArIHdpZHRoICsgJyAnICsgKHdpZHRoICsgMiAqIHN2Z0hlaWdodCkpO1xyXG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZChyZWN0KTtcclxuICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICd0ZXh0Jyk7XHJcbiAgICAgICAgdGV4dC50ZXh0Q29udGVudCA9IHR4dDtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgneCcsIFN0cmluZyh3aWR0aCAvIDIpKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgneScsIFN0cmluZygxMikpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC1zaXplJywgJzFlbScpO1xyXG4gICAgICAgIHRleHQuc2V0QXR0cmlidXRlKCdzdHlsZScsICdmb250LXNpemU6IDAuNzVyZW07IGZvbnQtZmFtaWx5OiBcIlNvdXJjZSBTYW5zIFByb1wiLCBzYW5zLXNlcmlmJyk7XHJcbiAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ2ZvbnQtZmFtaWx5JywgJ1wiU291cmNlIFNhbnMgUHJvXCIsIHNhbnMtc2VyaWYnKTtcclxuICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZmlsbCcsICdibGFjaycpO1xyXG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZCh0ZXh0KTtcclxuICAgICAgICByZXR1cm4gc3ZnO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIG1pbiB3aWR0aFxyXG4gICAgICogQHBhcmFtIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHNldE1pbldpZHRoKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fbWluV2lkdGggPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBtaW4gd2lkdGhcclxuICAgICAqL1xyXG4gICAgZ2V0TWluV2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21pbldpZHRoO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBDb250cm9sIGZyb20gJ29sL2NvbnRyb2wvQ29udHJvbCc7XHJcbmltcG9ydCB7IGJvdW5kaW5nRXh0ZW50IH0gZnJvbSBcIm9sL2V4dGVudFwiO1xyXG5pbXBvcnQgQmFzZUV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuLyoqXHJcbiAqIEFuIGV2ZW50IGNsYXNzIHRvIGhhbmRsZSBtb3VzZSBldmVudHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBPdmVydmlld01hcEV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIG9yaWdpbmFsRXZlbnQpIHtcclxuICAgICAgICBzdXBlcih0eXBlKTtcclxuICAgICAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEaXNwbGF5cyBhbiBvdmVydmlldyBtYXAgb2YgQXVzdHJpYSBhbmQgYSBjcm9zc2hhaXIgbWFya2VyIGZvciB0aGUgY3VycmVudFxyXG4gKiBjZW50ZXIgaW4gdGhlIG1haW4gbWFwLiBZb3UgY2FuIGNsaWNrIG9uIHRoZSBvdmVydmlldyBtYXAgdG8gcmVjZW50ZXIgdGhlXHJcbiAqIG1haW4gbWFwLlxyXG4gKlxyXG4gKiBIaW50OiB0aGUgZGVmYXVsdCBzaXplIG9mIHRoZSBvdmVydmlldyBtYXAgZGVwZW5kcyBvbiB0aGUgd2lkdGggb2YgdGhlIHZpZXdwb3J0IChhcHByb3ByaWF0ZSBmb3IgZnVsbHNjcmVlbiBtYXBzKS5cclxuICogVG8gbGltaXQgdGhlIHNpemUgYWRkIGEgbWF4LXdpZHRoIGFuZCBtYXgtaGVpZ2h0IChtYXgtd2lkdGggPSAxLjc1Km1heC1oZWlnaHQpIHRvIHRoZSAuYmdpcy1vdmVydmlldy1pbWFnZSBjc3MgY2xhc3MuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3ZlcnZpZXcgZXh0ZW5kcyBDb250cm9sIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBvdmVydmlldyBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBjb25zdCBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQuY2xhc3NOYW1lID0gJ2JnaXMtb3ZlcnZpZXctaW1hZ2UnO1xyXG4gICAgICAgIGNvbnN0IGZpZ3VyZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmaWd1cmUnKTtcclxuICAgICAgICBmaWd1cmVFbGVtZW50LmlubmVySFRNTCA9IE92ZXJ2aWV3LlNWR19DT0RFO1xyXG4gICAgICAgIG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChmaWd1cmVFbGVtZW50KTtcclxuICAgICAgICBvcHRzLmVsZW1lbnQgPSBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcbiAgICAgICAgc3VwZXIob3B0cyk7XHJcbiAgICAgICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IG9wdHMucHJldmVudERlZmF1bHQgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQgPSBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcbiAgICAgICAgLy8gZXh0ZW50OiBbbWlueCwgbWlueSwgbWF4eCwgbWF4eV0gLS0gY29vcmRpbmF0ZXM6IFtbbGVmdCwgYm90dG9tXSwgW3JpZ2h0LCB0b3BdXVxyXG4gICAgICAgIHRoaXMuZXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW1sxMDEwMDAwLCA1NzkwMDAwXSwgWzE5NjAwMDAsIDYzMzAwMDBdXSk7XHJcbiAgICAgICAgdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE92ZXJ2aWV3TWFwRXZlbnQoJ2NsaWNrJywgZSkpLCBmYWxzZSk7XHJcbiAgICAgICAgaWYgKCF0aGlzLnByZXZlbnREZWZhdWx0KSB7XHJcbiAgICAgICAgICAgIHRoaXMub24oXCJjbGlja1wiLCB0aGlzLm9uT3ZlcnZpZXdJbWFnZUNsaWNrKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdmdFbGVtZW50ID0gZmlndXJlRWxlbWVudC5maXJzdENoaWxkO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdyZWN0Jyk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1iYWNrZ3JvdW5kJyk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKDApKTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoMCkpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgncngnLCBTdHJpbmcoOCkpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgncnknLCBTdHJpbmcoOCkpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBTdHJpbmcoT3ZlcnZpZXcuU1ZHX1dJRFRIKSk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBTdHJpbmcoT3ZlcnZpZXcuU1ZHX0hFSUdIVCkpO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnc3Ryb2tlLXdpZHRoOjAnKTtcclxuICAgICAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBPdmVydmlldy5CQUNLR1JPVU5EX0NPTE9SKTtcclxuICAgICAgICB0aGlzLnN2Z0VsZW1lbnQucHJlcGVuZCh0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbWFwXHJcbiAgICAgKi9cclxuICAgIHNldE1hcChtYXApIHtcclxuICAgICAgICBzdXBlci5zZXRNYXAobWFwKTtcclxuICAgICAgICBpZiAobWFwKSB7XHJcbiAgICAgICAgICAgIC8vIGlmKHRoaXMuc3ZnRWxlbWVudCkge1xyXG4gICAgICAgICAgICAvLyAgIHRoaXMuc3ZnRWxlbWVudC5wcmVwZW5kKHRoaXMuc3ZnQmFja2dyb3VuZFJlY3QpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgICAgICAgICAgbWFwLm9uKCdtb3ZlZW5kJywgKGV2ZW50KSA9PiB0aGlzLnVwZGF0ZUNyb3NzaGFpcihldmVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgdXBkYXRlQ3Jvc3NoYWlyKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IHNpemUgPSBbT3ZlcnZpZXcuU1ZHX1dJRFRILCBPdmVydmlldy5TVkdfSEVJR0hUXTtcclxuICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLmdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0KChfYSA9IGV2ZW50Lm1hcC5nZXRWaWV3KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRDZW50ZXIoKSk7XHJcbiAgICAgICAgLy8ganVzdCB0byBiZSBzdXJlIG1ha2Ugc29tZSBsaW1pdHNcclxuICAgICAgICBpZiAoY2VudGVyWzBdID4gc2l6ZVswXSlcclxuICAgICAgICAgICAgY2VudGVyWzBdID0gc2l6ZVswXTtcclxuICAgICAgICBlbHNlIGlmIChjZW50ZXJbMF0gPCAwKVxyXG4gICAgICAgICAgICBjZW50ZXJbMF0gPSAwO1xyXG4gICAgICAgIGlmIChjZW50ZXJbMV0gPiBzaXplWzFdKVxyXG4gICAgICAgICAgICBjZW50ZXJbMV0gPSBzaXplWzFdO1xyXG4gICAgICAgIGVsc2UgaWYgKGNlbnRlclsxXSA8IDApXHJcbiAgICAgICAgICAgIGNlbnRlclsxXSA9IDA7XHJcbiAgICAgICAgLy8gdXBkYXRlIGNyb3NzaGFpclxyXG4gICAgICAgIGlmICh0aGlzLnN2Z0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdFbG1zID0gdGhpcy5zdmdFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpcicpO1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdFbG1zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGV4aXN0aW5nRWxtIG9mIEFycmF5LmZyb20oZXhpc3RpbmdFbG1zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3ZnRWxlbWVudC5yZW1vdmVDaGlsZChleGlzdGluZ0VsbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdmdFbGVtZW50LmFwcGVuZENoaWxkKE92ZXJ2aWV3LmdldENyb3NzaGFpcihjZW50ZXJbMF0sIDAsIGNlbnRlclswXSwgT3ZlcnZpZXcuU1ZHX0hFSUdIVCwgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpci14JykpO1xyXG4gICAgICAgICAgICB0aGlzLnN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoT3ZlcnZpZXcuZ2V0Q3Jvc3NoYWlyKDAsIGNlbnRlclsxXSwgT3ZlcnZpZXcuU1ZHX1dJRFRILCBjZW50ZXJbMV0sICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXIteScpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geDFcclxuICAgICAqIEBwYXJhbSB5MVxyXG4gICAgICogQHBhcmFtIHgyXHJcbiAgICAgKiBAcGFyYW0geTJcclxuICAgICAqIEBwYXJhbSBjc3NDbGFzc1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldENyb3NzaGFpcih4MSwgeTEsIHgyLCB5MiwgY3NzQ2xhc3MpIHtcclxuICAgICAgICBjb25zdCBsaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XHJcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgU3RyaW5nKHgxKSk7XHJcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgU3RyaW5nKHkxKSk7XHJcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgU3RyaW5nKHgyKSk7XHJcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgU3RyaW5nKHkyKSk7XHJcbiAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZpbGw6IG5vbmU7IHN0cm9rZTogYmxhY2s7IHN0cm9rZS13aWR0aDogMXB4OycpO1xyXG4gICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKCdjbGFzcycsICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXIgJyArIGNzc0NsYXNzKTtcclxuICAgICAgICByZXR1cm4gbGluZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsZWZ0XHJcbiAgICAgKiBAcGFyYW0gcmlnaHRcclxuICAgICAqIEBwYXJhbSB3aWR0aFxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgobGVmdCwgcmlnaHQsIHdpZHRoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguYWJzKChsZWZ0IC0gcmlnaHQpKSAvIHdpZHRoO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNlbnRlclxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQoY2VudGVyKSB7XHJcbiAgICAgICAgaWYgKGNlbnRlcikge1xyXG4gICAgICAgICAgICBjb25zdCBzaXplID0gW092ZXJ2aWV3LlNWR19XSURUSCwgT3ZlcnZpZXcuU1ZHX0hFSUdIVF07XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb24gPSBbXHJcbiAgICAgICAgICAgICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzBdLCB0aGlzLmV4dGVudFsyXSwgc2l6ZVswXSksXHJcbiAgICAgICAgICAgICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzFdLCB0aGlzLmV4dGVudFszXSwgc2l6ZVsxXSlcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgICAgIE1hdGgucm91bmQoMSAvIHJlc29sdXRpb25bMF0gKiAoY2VudGVyWzBdIC0gdGhpcy5leHRlbnRbMF0pKSxcclxuICAgICAgICAgICAgICAgIE1hdGgucm91bmQoMSAvIHJlc29sdXRpb25bMV0gKiAodGhpcy5leHRlbnRbM10gLSBjZW50ZXJbMV0pKVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gWzAsIDBdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBNZXRob2Q6IG9uT3ZlcnZpZXdJbWFnZUNsaWNrXHJcbiAgICAgKiBIYW5kbGUgY2xpY2sgaW4gb3ZlcnZpZXcgaW1hZ2VcclxuICAgICAqXHJcbiAgICAgKiBQYXJhbWV0ZXJzOlxyXG4gICAgICogZSAtIE1vdXNlRXZlbnQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIG9uT3ZlcnZpZXdJbWFnZUNsaWNrKGUpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGNvbnN0IG92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0ID0gdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgeCA9IGUub3JpZ2luYWxFdmVudC5jbGllbnRYIC0gb3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QubGVmdDsgLy8gWC1wb3MgaW4gb3ZlcnZpZXcgaW1hZ2VcclxuICAgICAgICBjb25zdCB5ID0gZS5vcmlnaW5hbEV2ZW50LmNsaWVudFkgLSBvdmVydmlld0NvbnRhaW5lckNsaWVudEJvdW5kaW5nUmVjdC50b3A7IC8vIFktcG9zIGluIG92ZXJ2aWV3IGltYWdlXHJcbiAgICAgICAgLy8gZ2V0IExvbkxhdFxyXG4gICAgICAgIGNvbnN0IGNsaWNrTG9uTGF0ID0gdGhpcy5nZXRMb25MYXRGcm9tT3ZlcnZpZXdQeChbeCwgeV0pO1xyXG4gICAgICAgIC8vIHVwZGF0ZSBjZW50ZXIgb2YgdGhlIG1hcFxyXG4gICAgICAgIChfYiA9IChfYSA9IHRoaXMuZ2V0TWFwKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRWaWV3KCkpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5hbmltYXRlKHtcclxuICAgICAgICAgICAgY2VudGVyOiBjbGlja0xvbkxhdCxcclxuICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWV0aG9kOiBnZXRMb25MYXRGcm9tT3ZlcnZpZXdQeFxyXG4gICAgICogR2V0IG1hcCBsb2NhdGlvbiBmcm9tIHBpeGVsIGxvY2F0aW9uXHJcbiAgICAgKlxyXG4gICAgICogUGFyYW1ldGVyczpcclxuICAgICAqIG9QeCAtIENvb3JkaW5hdGVcclxuICAgICAqXHJcbiAgICAgKiBSZXR1cm5zOlxyXG4gICAgICogW3gseV0gTG9jYXRpb24gaW4gbG9uL2xhdCB0cmFuc2xhdGVkIGZyb21cclxuICAgICAqIHBhc3NlZCBpbiBwaXhlbC1sb2NhdGlvbiBpbiBvdmVydmlldyBtYXBcclxuICAgICAqL1xyXG4gICAgZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHgob1B4KSB7XHJcbiAgICAgICAgY29uc3Qgc2l6ZSA9IFt0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5jbGllbnRXaWR0aCwgdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuY2xpZW50SGVpZ2h0XTtcclxuICAgICAgICBjb25zdCByZXNvbHV0aW9uID0gW1xyXG4gICAgICAgICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzBdLCB0aGlzLmV4dGVudFsyXSwgc2l6ZVswXSksXHJcbiAgICAgICAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMV0sIHRoaXMuZXh0ZW50WzNdLCBzaXplWzFdKVxyXG4gICAgICAgIF07XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgb1B4WzBdICogcmVzb2x1dGlvblswXSArIHRoaXMuZXh0ZW50WzBdLFxyXG4gICAgICAgICAgICB0aGlzLmV4dGVudFszXSAtIG9QeFsxXSAqIHJlc29sdXRpb25bMV1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIG92ZXJ2aWV3IHBhcmVudCBjb250YWluZXIgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBnZXRPdmVydmlld0NvbnRhaW5lckVsZW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIG92ZXJ2aWV3IHN2ZyBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGdldFNWR0VsZW1lbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ZnRWxlbWVudDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBzdmcgYmFja2dyb3VuZCByZWN0IGVsZW1lbnRcclxuICAgICAqL1xyXG4gICAgZ2V0QmFja2dyb3VuZFJlY3RFbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICovXHJcbk92ZXJ2aWV3LkJBQ0tHUk9VTkRfQ09MT1IgPSAnI2U1ZWNmMCc7XHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuT3ZlcnZpZXcuU1ZHX0hFSUdIVCA9IDIxNjtcclxuLyoqXHJcbiAqXHJcbiAqL1xyXG5PdmVydmlldy5TVkdfV0lEVEggPSAzODA7XHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuT3ZlcnZpZXcuU1ZHX0NPREUgPSBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyBjbGFzcz0nYmdpcy1vdmVydmlld21hcC1zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgXCIgKyBPdmVydmlldy5TVkdfV0lEVEggKyBcIiBcIiArIE92ZXJ2aWV3LlNWR19IRUlHSFQgKyBcIicgcHJlc2VydmVBc3BlY3RSYXRpbz0neE1pZFlNaWQgbWVldCcgaGVpZ2h0PScxMDAlJyB3aWR0aD0nMTAwJScgY29sb3ItaW50ZXJwb2xhdGlvbj0nYXV0bycgZmlsbD0nYmxhY2snIGZpbGwtb3BhY2l0eT0nMScgIHN0cm9rZT0nYmxhY2snIHN0cm9rZS1kYXNoYXJyYXk9J25vbmUnIHN0cm9rZS1kYXNob2Zmc2V0PScwJyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J21pdGVyJyBzdHJva2UtbWl0ZXJsaW1pdD0nMTAnIHN0cm9rZS1vcGFjaXR5PScxJyBzdHJva2Utd2lkdGg9JzEnIHhtbG5zOnY9J2h0dHBzOi8vdmVjdGEuaW8vbmFubyc+PHN0eWxlPjwhW0NEQVRBWy5Ce2NsaXAtcGF0aDp1cmwoI0EpfS5De2ZpbGwtcnVsZTpldmVub2RkfS5Ee3N0cm9rZTpub25lfS5Fe2ZpbGw6Izk5OX0uRntmaWxsOm5vbmV9Lkd7c3Ryb2tlLW1pdGVybGltaXQ6MX0uSHtzdHJva2Utd2lkdGg6Mi41fV1dPjwvc3R5bGU+PGRlZnM+PGNsaXBQYXRoIGlkPSdBJz48cGF0aCBkPSdNMCAwaDM4MHYyMTZIMFYweicvPjwvY2xpcFBhdGg+PHBhdGggaWQ9J0InIGQ9J00zNTYgODJsLS40IDUuMiA0LjQgMS42LTMuMiAyLjR2Ni40bC0zLjYuOCAyLjggMy42LjggNi44LTkuNiAxLjItLjQtMi0xLjYgMi40aC0zLjZsLTEuNi0zLjYtNC44LTEuNi04IDYuNCA2LjQgMy4yIDMuMi0uOCAxLjIgNC44IDIgLjgtMi44IDIuOC40IDMuMi0zLjYgMy4yLTIuOC0uNC0uOCAxLjYtMi40LTEuNi0uNCA0IDIuNCA0LjgtMi40IDEuNi0uOCA0IDIgLjgtLjQgMi40IDIuOC0uNC44IDEuNi0zLjIgMS42IDIuOCAyLjgtNCAyIDMuNiAxLjYtMTAtLjgtLjQgMy4yLTQgMS42LTIuNCA0LjQtNi40IDIuOC44LTMuNiA2LjQtNi44LTMuMi01LjIgMS42LTQuOC00LjgtMTQuOCAxMy4yLTYuOHYtNmwyLjgtNC0uOC0zLjYtMi40LTEuMi0xLjItNy42IDMuMi44IDItMi44LTItMS42IDIuOC0uOCAyLTQgMy4yLS40IDIuNCA0IDUuNi01LjZ2LTIuOGw1LjYtMS4yIDIuNC0zLjJMMzUyIDg4bDEuNi0zLjYtMi0yIDIuOCAxLjYgMS42LTJ6Jy8+PHBhdGggaWQ9J0MnIGQ9J00xNjIuNCAxNDYuOGwuNCAyIDguNCAxLjIgMS42IDIuOCA0LjQgMS42IDgtMiAuNC0yLjggNC44LS44IDIgMiAxMC44LjggOC40IDkuNiA1LjYtMiAyLjQtNCA4LjQtNC44IDEuNiAzLjJoNmwuOCAzLjIgNC44LTMuMiA1LjYgMiAxMC0zLjYgOCA4LjgtMiA4LjggMi40LjgtLjQgNi40IDIgMS4yLTMuNiAzLjItMS4yLTItMS42IDItMi40LS40LTIuNCA2LjQtNC44LjgtLjQgMi40LTQuOCAxLjYtLjggNC0yLjQtMy42LTIgMS4yLTItMi40LTEyLjQuOC0xLjItMi44aC01LjJsLTQtMi44LTUuNiAxLjItMTgtNC44LTYuOCAxLjYtNi40LTMuMkgxNjhsLTIuNC0yLjgtNC44LS40di0zLjJoMS42VjE3Mmw5LjItMS4yIDEuNi0yLjQtNS42LTR2LTMuMmwtNC40LTMuMi0uOC0yLjQgMi0zLjJoLTIuOGwtMi40LTMuNiAzLjItMnonLz48cGF0aCBpZD0nRCcgZD0nTTI2NC44IDIwLjhsNS42IDEuNi40IDQgNC40LS44IDEuNi0yLjggOC44IDMuMi44IDIgOCA0IDYuOC0xLjZWMzJsNS4yIDIgLjQgMi40IDUuNiAzLjIgMTIuOCAxLjIgMy42LTUuNiAzLjYtLjQgMi40IDIuNCAyLjgtLjQgMS4yIDQgMTAuNCAxLjYgMS42IDEwLjgtNC44IDYtLjggNC44IDUuNiA3LjYuOCA2LjQgNC40IDMuMi0xLjYgMi44LTIuOC0xLjYgMiAyTDM1MiA4OGwtNC40LTMuNi0yLjQgMy4yLTUuNiAxLjJ2Mi44bC01LjYgNS42LTIuNC00LTMuMi40LTEuNiAzLjYtMy4yIDEuMiAyIDEuMi0yIDMuMi0zLjItLjggMS4yIDcuNiAyLjQgMS4yLjggMy42LTIuOCA0IDEuMiA0LTUuMiA1LjJoLTIuOGwtMi02LjgtMi40IDIuOC0xLjItMi00LjgtLjgtMS4yLTIuOC0yIC40LjQtNC01LjItLjQtMS4yLTUuNi0xLjYgMS4yLTMuMi0zLjYtNC40LjR2LTEuNkgyODRsLTQuNC00LTIuNC40LS40IDItMy4yLS40LS44IDMuMi0xMC40LjQtMiAyLjQtNC0yLjQtMy4yIDEuMi0yLjQtNHYtNC40bDIuOC0xLjYtLjQtMS42LTEuNi0yLjQtMS42LjgtOC40LTQuNC0yLTMuMnYtMy42bDEuNi0uOC0uOC02LjQgMi0yLjQgNi44IDUuMiA3LjItMkwyNTggNzRoMy4ybDEuMiAyLjQuOC04LjRoLTJsLjgtNC44LTIgLjQgMS42LTEuNi00LTQuOCAyLjgtMS42LTEwLjQtNS4yIDEuNi03LjIgMy42LTIuOC40LTMuNiA3LjIgMS4yVjIzLjJsMi0yLjR6bTYyIDQ3LjJsLTcuMiA1LjYtMi40LTEuNi0uOCA2IDEuNiAzLjIgOS42LjQgMi0yLjggNC40IDEuNi0yLTIuNC44LTYtMi0yLTEuNiAxLjItMi40LTMuMnonLz48cGF0aCBpZD0nRScgZD0nTTIxMi40IDM4bDkuNiA2LjQtMi40IDIgMi40IDMuMmg2bDYuNCAyLjggMi0yLjhoMi40TDI0MCA0Nmw0IDMuMiAyLjQtMiA1LjYgNS4yIDcuMiAyIDEuMiAxLjItMi44IDEuNi40IDIgMy42IDIuOC0xLjYgMS42IDItLjQtLjggNC44aDJ2NC40bC0uOCA0LTEuMi0yLjRIMjU4bC0xLjYgMi44LTYgMi02LjgtNS4yLTMuMiAyLjQuOCA2LjQtMS42Ljh2My42bDYuNCA2IDUuNi44IDIgMy4yLTIuOCAyLjQgMS42IDYuOC0yLjQtLjgtMiAyLjQtNS4yLjgtLjggMi40LTguNCA0LjgtMy4yLS40LTItMi44LTYuOCAyLjR2LTMuNmwtMi0yLTEwLjQtMS4yLTMuNiA1LjYgMi44IDguNC0xLjYgMy4yaC0yLjRsLTguNC00IDItNi40LTEuNi0yIDIuOC00LjQtNS4yLTIgMS4yLTIuOCAzLjIuOHYtMS42bC02LjQuNC00LjQtMi0uNC04LjggMy42IDEuMi40LTIuOC00LTItNiAyLjh2LTJsLTMuMi0uNC0xLjItMi40aC00LjRsLTMuMiAzLjItNS4yLTUuMi0uNC0zLjIgMTItOS42IDE0LTQgNC44LTcuMi0uNC04LjggMiAuNCAxLjItMi40IDEwIDUuMiA0LjQtNy4yLjQtNS42LTItLjggMi40LTMuNnonLz48cGF0aCBpZD0nRicgZD0nTTE3Ni40IDg2LjhsMS42IDIuNCAzLjIuNHYybDYtMi44IDQgMi0uNCAyLjgtMy42LTEuMi40IDguOCAxMS4yIDIuNGgtMy42bC0xLjIgMy4yIDUuMiAxLjYtMi44IDQuNCAxLjYgMi0yIDYuNCA1LjIgMy4yLTEuNiAzLjIgMS42IDguOCA1LjIgMiA1LjItMi40LjggNC40IDYuOCA2LjQtNS4yIDEuMiAxLjIgMi44LTQuNCA4LTUuMi0zLjZ2LTIuNGwtMTAuNC0yLjgtMi44LjgtMS42LTItNS4yLjgtLjQgMi44LTcuMiAyLTUuMi0xLjYtMS42LTIuOC04LjQtMS4ydi0ybC00IDItNi0zLjZIMTQ4bC02LjQgNS42LTYtMS4yLTItMTIuOCAxLjYtMS42IDYuOC40IDEuMi0yIDguNC40di0zLjZsNC40LS44IDIuNC00LjggMi44LS44LTMuMi00LjggMi0yLTQuNC0xLjYgMS4yLTQuNGg4LjRsLTEuMiAxLjYgMi44IDIuNC0yIDIgLjggMiA3LjYgNS4yIDMuNi0xLjItLjQtNS42IDIuOC0zLjYtLjgtNC0yLjQtMmgtNS42bDQuNC05LjItNi40LTguNCA0LTMuNmg0eicvPjxwYXRoIGlkPSdHJyBkPSdNMjc5LjIgMTAxLjJsNy4yIDMuNnYxLjZsNC40LS40IDMuMiAzLjYgMS42LTEuMiAxLjIgNS42IDUuMi40LS44IDMuMiAyLjQuNCAxLjIgMi44IDQuOC44IDEuMiAyIDEuNi0yLjggMS4yLjgtLjQgMi44IDIuOCAzLjItNy4yIDMuNiA0LjggMTQuOC0xLjYgNC44IDMuMiA0LjgtNy42IDEwLjh2NmwyLjQgNS4yLTYuOC00aC0zLjZsLTkuNiAyLTIgMS4ydjIuOGwtMy4yIDEuMi0yLjgtMy4yLTE0LjguOC0yLjQtMS42LjQtNi40LTIuNC0uOCAyLTguOC04LTguOC0xMCAzLjYtNS42LTItNC44IDMuMi0uOC0zLjJoLTZsLTEuNi0zLjItOC40IDQuOC0yLjQgNC00LjQgMi0zLjItMS42IDUuNi04LjgtMS4yLTIuOCA1LjItMS4yLTYuOC02LjQtLjgtNC40LTUuMiAyLjQtNC44LTEuNi0yLTguNCAxLjYtNC40IDUuNiAxLjIgMS42LTMuMi0yLjgtOC40IDMuNi01LjYgMTAuNCAxLjIgMiAydjMuNmw2LjgtMi40IDIgMi44IDMuMi40IDE2LjQtMTAuNCAzLjIgMi40IDMuMi0xLjIgNCAyLjQgMi0yLjQgMTAuNC0uNC44LTMuMiAzLjIuNC40LTJoMnonLz48cGF0aCBpZD0nSCcgZD0nTTE1MS42IDE0NS4ybDYuNCAyLjQgMy42IDQuOGgyLjhsLTIgMy4yLjggMi40IDQuNCAzLjJ2My4ybDUuNiA0LTEuNiAyLjQtOS4yIDEuMi0xLjYgNS42LTUuNi40LTgtNC0xLjItNC0zLjItLjQtLjQtNi44LTIuOC44LTMuMi0yLjggMS4yLTEuNi0yLTQuOCAzLjYtLjggNy4yLTcuNiA1LjItLjh6Jy8+PHBhdGggaWQ9J0knIGQ9J002MS4yIDExOC44bDUuNiAxLjYgMi0yLjQgNi44IDMuNiA1LjItMS42IDEuMiAxLjYtMi40IDJoMy4ybDIgNmg2bDQtMi44IDIgLjQtLjggMi40IDIuNC0uNCAyLTMuMiA0IC40LTEuNi0yLjQgMi40LTIuOCA2IC40IDIuNC01LjIgOS42LjggNi44LTIuOCA5LjIgMS4yLTItNi40IDQuNC0yLjh2NC40bDgtMS4yIDIuOCA0LjggMy4yLS44djJsNCAxLjItMS42IDIuNCAzLjIgNC44LTIuOC44LTIuNCA0LjgtNC40Ljh2My42bC04LjQtLjQtMS4yIDItNi44LS40LTEuNiAxLjYgMi40IDEzLjYtOCAyLTkuMiA1LjItNS4yLTMuMi0zLjYgMi0zLjItMS42LTIuNCAyLjgtMi40LTEuNi05LjIgMS42LjQgMS42LTMuMiAxLjYtMy4yIDEwaC03LjJsLTYtMS42IDEuNi0yLjQtNC0zLjJMNjYgMTY2bC00LTEuMi44LTUuNi0yLjgtLjgtMS42LTMuMi0zLjYgMy4yLjQgMi0zLjYtLjR2NGwtNCAxLjItMS42LTIuOC0uNC0yLjQgMi44LTMuNi0yLTIuNCAxLjYtMS4yLTEuMi0yLjggNC00IC40LTcuMi0yLjQtMS4yIDYuOC0yIDQuOC01LjIgMi0zLjItMi00IC44LTQuNHonLz48cGF0aCBpZD0nSicgZD0nTTMxLjIgMTE2LjRsMiAuNC0uNCAyLjhoNi44bDEuMiA0IDQuNCAxLjYuNCAyLjQtMS42LjggMS42IDMuNiA2LTItLjggNS4yLTIgMS4yIDIuNCAyLjQtLjQgNy4yLTQgNCAxLjIgMi44LTEuNiAxLjIgMiAyLjQtMi44IDMuNiAyIDMuNi0xLjIgMi0zLjItMS4yLTEuMi0yLjgtNi40LTJWMTU0bC0xMi0yLjQgMS4yLTQuOC0zLjItMi40LjQtNC44LTItMiA2LjQtOC0uNC00LTIuOC0uNC0xLjYtMi44IDcuNi0yIDItNHonLz48cGF0aCBpZD0nSycgZD0nTTMyNy42IDY4LjRsLjQgMiAyLjgtLjQgMiAyLS44IDYgMiAyLjQtNC40LTEuNi0yIDIuOC05LjYtLjQtMS42LTMuMi44LTYgMi40IDEuNiAxLjYtMi40IDMuNi0uNC40LTIuOCAyLjQuNHonLz48L2RlZnM+PGcgdGV4dC1yZW5kZXJpbmc9J29wdGltaXplTGVnaWJpbGl0eSc+PHVzZSB4bGluazpocmVmPScjQicgY2xhc3M9J0IgQyBEIEUnLz48ZyBzdHJva2U9J3NpbHZlcic+PHVzZSB4bGluazpocmVmPScjQicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNDJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0MnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRCcgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNEJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0UnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRScgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNGJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0YnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRycgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNHJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0gnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSCcgY2xhc3M9J0IgRiBHIEgnLz48cGF0aCBkPSdNNjEuMiAxMTguOGwtMS4yLTEuMiAyLjQtLjgtMS4yIDJ6JyBjbGFzcz0nQiBDIEQgRScvPjxwYXRoIGQ9J002MS4yIDExOC44bC0xLjItMS4yIDIuNC0uOC0xLjIgMnonIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjSScgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNJJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0onIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNLJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0snIGNsYXNzPSdCIEYgRyBIJy8+PC9nPjwvZz48L3N2Zz5cIjtcclxuIiwiaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4vYmFzZVwiO1xyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJwcmludFwiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcmludCBleHRlbmRzIEJ1dHRvbiB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgYnV0dG9uIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24oeyB1bmljb2RlOiAweGU5MTIsIHRvb2x0aXA6ICdBbnNpY2h0IGRydWNrZW4nLCB0b29sdGlwQXNUZXh0RWxlbWVudDogdHJ1ZSB9LCBvcHRzKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4vYmFzZVwiO1xyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIGEgXCJzaGFyZVwiIGljb25cclxuICovXHJcbmV4cG9ydCBjbGFzcyBTaGFyZSBleHRlbmRzIEJ1dHRvbiB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyB0aGUgYnV0dG9uIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24oeyB1bmljb2RlOiBTaGFyZS5ERUZBVUxUX1VOSUNPREUsIHRvb2x0aXA6IFNoYXJlLkRFRkFVTFRfVE9PTFRJUF9URVhULCB0b29sdGlwQXNUZXh0RWxlbWVudDogdHJ1ZSB9LCBvcHRzKSk7XHJcbiAgICB9XHJcbn1cclxuU2hhcmUuREVGQVVMVF9UT09MVElQX1RFWFQgPSAnQW5zaWNodCB0ZWlsZW4nO1xyXG5TaGFyZS5ERUZBVUxUX1VOSUNPREUgPSAweGU5MmM7XHJcbiIsImltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuL2Jhc2VcIjtcclxuLyoqXHJcbiAqIEEgZGVmYXVsdCBidXR0b24gd2l0aCBhIFwidG9vbHNcIiBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9vbHMgZXh0ZW5kcyBCdXR0b24ge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKHsgdW5pY29kZTogMHhlOTNiLCB0b29sdGlwOiAnVG9vbGJveCBlaW5ibGVuZGVuJywgdG9vbHRpcEFzVGV4dEVsZW1lbnQ6IHRydWUgfSwgb3B0cykpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuL2Jhc2VcIjtcclxuLyoqXHJcbiAqIEEgZGVmYXVsdCBidXR0b24gd2l0aCBhIFwidmlldyBsaXN0XCIgaWNvblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFZpZXdMaXN0IGV4dGVuZHMgQnV0dG9uIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIHRoZSBidXR0b24gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbih7IHVuaWNvZGU6IDB4ZTkzNywgdG9vbHRpcDogJ0xpc3RlIGFuemVpZ2VuJyB9LCBvcHRzKSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcIi4vYmFzZVwiO1xyXG4vKipcclxuICogQSBkZWZhdWx0IGJ1dHRvbiB3aXRoIExheWVycyBpY29uXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTGF5ZXIgZXh0ZW5kcyBCdXR0b24ge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgdGhlIGJ1dHRvbiBvcHRpb25zXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBvcHRzID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICBzdXBlcihPYmplY3QuYXNzaWduKHsgdW5pY29kZTogMHhlOTM4LCB0b29sdGlwOiAnQmVnbGVpdGthcnRlbiB2ZXJ3YWx0ZW4nIH0sIG9wdHMpKTtcclxuICAgIH1cclxufVxyXG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7IGVhc2VJbiB9IGZyb20gJy4vZWFzaW5nLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvVGlsZX0gZm9yIHRoZSB0aWxlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgdXJsIGFzIGFyZ3VtZW50cy4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH0pO1xuICogYGBgXG4gKiBGb3IgbW9yZSBmaW5lIGdyYWluZWQgY29udHJvbCwgdGhlIGxvYWQgZnVuY3Rpb24gY2FuIHVzZSBmZXRjaCBvciBYTUxIdHRwUmVxdWVzdCBhbmQgaW52b2x2ZVxuICogZXJyb3IgaGFuZGxpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBUaWxlU3RhdGUgZnJvbSAnb2wvVGlsZVN0YXRlJztcbiAqXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAqICAgICB2YXIgZGF0YSA9IHRoaXMucmVzcG9uc2U7XG4gKiAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICogICAgICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YSk7XG4gKiAgICAgfSBlbHNlIHtcbiAqICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuRVJST1IpO1xuICogICB9KTtcbiAqICAgeGhyLm9wZW4oJ0dFVCcsIHNyYyk7XG4gKiAgIHhoci5zZW5kKCk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihUaWxlLCBzdHJpbmcpOiB2b2lkfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGV9IHNvdXJjZXMgdXNlIGEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIHRvIGdldFxuICogdGhlIHVybCB0aGF0IHByb3ZpZGVzIGEgdGlsZSBmb3IgYSBnaXZlbiB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVjb29yZH5UaWxlQ29vcmR9IGZvciB0aGUgdGlsZVxuICogY29vcmRpbmF0ZSwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcGl4ZWwgcmF0aW8gYW5kIGFcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzIGFyZ3VtZW50c1xuICogYW5kIHJldHVybnMgYSBge3N0cmluZ31gIHJlcHJlc2VudGluZyB0aGUgdGlsZSBVUkwsIG9yIHVuZGVmaW5lZCBpZiBubyB0aWxlXG4gKiBzaG91bGQgYmUgcmVxdWVzdGVkIGZvciB0aGUgcGFzc2VkIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkLCBudW1iZXIsXG4gKiAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IChzdHJpbmd8dW5kZWZpbmVkKX0gVXJsRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb249MjUwXSBBIGR1cmF0aW9uIGZvciB0aWxlIG9wYWNpdHlcbiAqIHRyYW5zaXRpb25zIGluIG1pbGxpc2Vjb25kcy4gQSBkdXJhdGlvbiBvZiAwIGRpc2FibGVzIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbnRlcnBvbGF0ZT1mYWxzZV0gVXNlIGludGVycG9sYXRlZCB2YWx1ZXMgd2hlbiByZXNhbXBsaW5nLiAgQnkgZGVmYXVsdCxcbiAqIHRoZSBuZWFyZXN0IG5laWdoYm9yIGlzIHVzZWQgd2hlbiByZXNhbXBsaW5nLlxuICogQGFwaVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHRpbGVzLlxuICpcbiAqIEBhYnN0cmFjdFxuICovXG52YXIgVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBUaWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZSh0aWxlQ29vcmQsIHN0YXRlLCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ29vcmQgPSB0aWxlQ29vcmQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIFwiaW50ZXJpbVwiIHRpbGUgZm9yIHRoaXMgdGlsZS4gVGhlIGludGVyaW0gdGlsZSBtYXkgYmUgdXNlZCB3aGlsZSB0aGlzXG4gICAgICAgICAqIG9uZSBpcyBsb2FkaW5nLCBmb3IgXCJzbW9vdGhcIiB0cmFuc2l0aW9ucyB3aGVuIGNoYW5naW5nIHBhcmFtcy9kaW1lbnNpb25zXG4gICAgICAgICAqIG9uIHRoZSBzb3VyY2UuXG4gICAgICAgICAqIEB0eXBlIHtUaWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW50ZXJpbVRpbGUgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQSBrZXkgYXNzaWduZWQgdG8gdGhlIHRpbGUuIFRoaXMgaXMgdXNlZCBieSB0aGUgdGlsZSBzb3VyY2UgdG8gZGV0ZXJtaW5lXG4gICAgICAgICAqIGlmIHRoaXMgdGlsZSBjYW4gZWZmZWN0aXZlbHkgYmUgdXNlZCwgb3IgaWYgYSBuZXcgdGlsZSBzaG91bGQgYmUgY3JlYXRlZFxuICAgICAgICAgKiBhbmQgdGhpcyBvbmUgYmUgdXNlZCBhcyBhbiBpbnRlcmltIHRpbGUgZm9yIHRoaXMgbmV3IHRpbGUuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXkgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkdXJhdGlvbiBmb3IgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbi5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zaXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMudHJhbnNpdGlvbiA9PT0gdW5kZWZpbmVkID8gMjUwIDogb3B0aW9ucy50cmFuc2l0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogTG9va3VwIG9mIHN0YXJ0IHRpbWVzIGZvciByZW5kZXJpbmcgdHJhbnNpdGlvbnMuICBJZiB0aGUgc3RhcnQgdGltZSBpc1xuICAgICAgICAgKiBlcXVhbCB0byAtMSwgdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGUuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNpdGlvblN0YXJ0c18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW50ZXJwb2xhdGUgPSAhIW9wdGlvbnMuaW50ZXJwb2xhdGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSB0aGUgdGlsZSBjYWNoZSB3aGVuIHRoZSB0aWxlIGlzIHJlbW92ZWQgZnJvbSB0aGUgY2FjaGUgZHVlIHRvIGV4cGlyeVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLnJlbGVhc2UgPSBmdW5jdGlvbiAoKSB7IH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXkgKyAnLycgKyB0aGlzLnRpbGVDb29yZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaW50ZXJpbSB0aWxlIG1vc3Qgc3VpdGFibGUgZm9yIHJlbmRlcmluZyB1c2luZyB0aGUgY2hhaW4gb2YgaW50ZXJpbVxuICAgICAqIHRpbGVzLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSAgbW9zdCByZWNlbnQgdGlsZSB0aGF0IGhhcyBiZWVuIGxvYWRlZCwgaWYgbm9cbiAgICAgKiBzdWNoIHRpbGUgZXhpc3RzLCB0aGUgb3JpZ2luYWwgdGlsZSBpcyByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHshVGlsZX0gQmVzdCB0aWxlIGZvciByZW5kZXJpbmcuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0SW50ZXJpbVRpbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgICAgICAgLy9lbXB0eSBjaGFpblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmludGVyaW1UaWxlO1xuICAgICAgICAvLyBmaW5kIHRoZSBmaXJzdCBsb2FkZWQgdGlsZSBhbmQgcmV0dXJuIGl0LiBTaW5jZSB0aGUgY2hhaW4gaXMgc29ydGVkIGluXG4gICAgICAgIC8vIGRlY3JlYXNpbmcgb3JkZXIgb2YgY3JlYXRpb24gdGltZSwgdGhlcmUgaXMgbm8gbmVlZCB0byBzZWFyY2ggdGhlIHJlbWFpbmRlclxuICAgICAgICAvLyBvZiB0aGUgbGlzdCAoYWxsIHRob3NlIHRpbGVzIGNvcnJlc3BvbmQgdG8gb2xkZXIgcmVxdWVzdHMgYW5kIHdpbGwgYmVcbiAgICAgICAgLy8gY2xlYW5lZCB1cCBieSByZWZyZXNoSW50ZXJpbUNoYWluKVxuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICAvLyBTaG93IHRpbGUgaW1tZWRpYXRlbHkgaW5zdGVhZCBvZiBmYWRpbmcgaXQgaW4gYWZ0ZXIgbG9hZGluZywgYmVjYXVzZVxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbnRlcmltIHRpbGUgaXMgaW4gcGxhY2UgYWxyZWFkeVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbl8gPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGlsZSA9IHRpbGUuaW50ZXJpbVRpbGU7XG4gICAgICAgIH0gd2hpbGUgKHRpbGUpO1xuICAgICAgICAvLyB3ZSBjYW4gbm90IGZpbmQgYSBiZXR0ZXIgdGlsZVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdvZXMgdGhyb3VnaCB0aGUgY2hhaW4gb2YgaW50ZXJpbSB0aWxlcyBhbmQgZGlzY2FyZHMgc2VjdGlvbnMgb2YgdGhlIGNoYWluXG4gICAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlbGV2YW50LlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLnJlZnJlc2hJbnRlcmltQ2hhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pbnRlcmltVGlsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlfVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHByZXYgPSB0aGlzO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICAvL3dlIGhhdmUgYSBsb2FkZWQgdGlsZSwgd2UgY2FuIGRpc2NhcmQgdGhlIHJlc3Qgb2YgdGhlIGxpc3RcbiAgICAgICAgICAgICAgICAvL3dlIHdvdWxkIGNvdWxkIGFib3J0IGFueSBMT0FESU5HIHRpbGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgIC8vb2xkZXIgdGhhbiB0aGlzIHRpbGUgKGkuZS4gYW55IExPQURJTkcgdGlsZSBmb2xsb3dpbmcgdGhpcyBlbnRyeSBpbiB0aGUgY2hhaW4pXG4gICAgICAgICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgICAgICAvL2tlZXAgdGhpcyBMT0FESU5HIHRpbGUgYW55IGxvYWRlZCB0aWxlcyBsYXRlciBpbiB0aGUgY2hhaW4gYXJlXG4gICAgICAgICAgICAgICAgLy9vbGRlciB0aGFuIHRoaXMgdGlsZSwgc28gd2UncmUgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGUgcmVxdWVzdFxuICAgICAgICAgICAgICAgIHByZXYgPSB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgLy90aGUgaGVhZCBvZiB0aGUgbGlzdCBpcyB0aGUgbW9zdCBjdXJyZW50IHRpbGUsIHdlIGRvbid0IG5lZWRcbiAgICAgICAgICAgICAgICAvL3RvIHN0YXJ0IGFueSBvdGhlciByZXF1ZXN0cyBmb3IgdGhpcyBjaGFpblxuICAgICAgICAgICAgICAgIHByZXYuaW50ZXJpbVRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aWxlID0gcHJldi5pbnRlcmltVGlsZTtcbiAgICAgICAgfSB3aGlsZSAodGlsZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhpcyB0aWxlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGhlIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ29vcmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBTdGF0ZS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBzdGF0ZSBvZiB0aGlzIHRpbGUuIElmIHlvdSB3cml0ZSB5b3VyIG93biB7QGxpbmsgbW9kdWxlOm9sL1RpbGV+TG9hZEZ1bmN0aW9uIHRpbGVMb2FkRnVuY3Rpb259ICxcbiAgICAgKiBpdCBpcyBpbXBvcnRhbnQgdG8gc2V0IHRoZSBzdGF0ZSBjb3JyZWN0bHkgdG8ge0BsaW5rIG1vZHVsZTpvbC9UaWxlU3RhdGV+RVJST1J9XG4gICAgICogd2hlbiB0aGUgdGlsZSBjYW5ub3QgYmUgbG9hZGVkLiBPdGhlcndpc2UgdGhlIHRpbGUgY2Fubm90IGJlIHJlbW92ZWQgZnJvbVxuICAgICAqIHRoZSB0aWxlIHF1ZXVlIGFuZCB3aWxsIGJsb2NrIG90aGVyIHJlcXVlc3RzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLnNldFN0YXRlID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBUaWxlU3RhdGUuRVJST1IgJiYgdGhpcy5zdGF0ZSA+IHN0YXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RpbGUgbG9hZCBzZXF1ZW5jZSB2aW9sYXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgaW1hZ2Ugb3IgcmV0cnkgaWYgbG9hZGluZyBwcmV2aW91c2x5IGZhaWxlZC5cbiAgICAgKiBMb2FkaW5nIGlzIHRha2VuIGNhcmUgb2YgYnkgdGhlIHRpbGUgcXVldWUsIGFuZCBjYWxsaW5nIHRoaXMgbWV0aG9kIGlzXG4gICAgICogb25seSBuZWVkZWQgZm9yIHByZWxvYWRpbmcgb3IgZm9yIHJlbG9hZGluZyBpbiBjYXNlIG9mIGFuIGVycm9yLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbHBoYSB2YWx1ZSBmb3IgcmVuZGVyaW5nLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRoZSByZW5kZXIgZnJhbWUgdGltZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEEgbnVtYmVyIGJldHdlZW4gMCBhbmQgMS5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRBbHBoYSA9IGZ1bmN0aW9uIChpZCwgdGltZSkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFydCA9IHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdO1xuICAgICAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgICAgICBzdGFydCA9IHRpbWU7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSA9IHN0YXJ0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbHRhID0gdGltZSAtIHN0YXJ0ICsgMTAwMCAvIDYwOyAvLyBhdm9pZCByZW5kZXJpbmcgYXQgMFxuICAgICAgICBpZiAoZGVsdGEgPj0gdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVhc2VJbihkZWx0YSAvIHRoaXMudHJhbnNpdGlvbl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIGEgdGlsZSBpcyBpbiBhbiBhbHBoYSB0cmFuc2l0aW9uLiAgQSB0aWxlIGlzIGNvbnNpZGVyZWQgaW5cbiAgICAgKiB0cmFuc2l0aW9uIGlmIHRpbGUuZ2V0QWxwaGEoKSBoYXMgbm90IHlldCBiZWVuIGNhbGxlZCBvciBoYXMgYmVlbiBjYWxsZWRcbiAgICAgKiBhbmQgcmV0dXJuZWQgMS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSBpcyBpbiB0cmFuc2l0aW9uLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmluVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAoIXRoaXMudHJhbnNpdGlvbl8pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gIT09IC0xO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFyayBhIHRyYW5zaXRpb24gYXMgY29tcGxldGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuZW5kVHJhbnNpdGlvbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICBpZiAodGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF0gPSAtMTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGU7XG59KEV2ZW50VGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlQmFzZVxuICovXG5pbXBvcnQgRXZlbnRUYXJnZXQgZnJvbSAnLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBJbWFnZUJhc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlQmFzZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZUJhc2UoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzdGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXh0ZW50ID0gZXh0ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUGl4ZWxSYXRpby5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFBpeGVsUmF0aW8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpeGVsUmF0aW9fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5yZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vSW1hZ2VTdGF0ZS5qc1wiKS5kZWZhdWx0fSBTdGF0ZS5cbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIHJldHVybiBJbWFnZUJhc2U7XG59KEV2ZW50VGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBJbWFnZUJhc2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZUJhc2UuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW1hZ2VCYXNlIGZyb20gJy4vSW1hZ2VCYXNlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4vSW1hZ2VTdGF0ZS5qcyc7XG5pbXBvcnQgeyBJTUFHRV9ERUNPREUgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBnZXRIZWlnaHQgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBsaXN0ZW5PbmNlLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi9ldmVudHMuanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9JbWFnZX5JbWFnZX0gZm9yIHRoZSBpbWFnZSBhbmQgYVxuICogYHtzdHJpbmd9YCBmb3IgdGhlIHNyYyBhcyBhcmd1bWVudHMuIEl0IGlzIHN1cHBvc2VkIHRvIG1ha2UgaXQgc28gdGhlXG4gKiB1bmRlcmx5aW5nIGltYWdlIHtAbGluayBtb2R1bGU6b2wvSW1hZ2V+SW1hZ2UjZ2V0SW1hZ2V9IGlzIGFzc2lnbmVkIHRoZVxuICogY29udGVudCBzcGVjaWZpZWQgYnkgdGhlIHNyYy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgaXNcbiAqXG4gKiAgICAgZnVuY3Rpb24oaW1hZ2UsIHNyYykge1xuICogICAgICAgaW1hZ2UuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiAgICAgfVxuICpcbiAqIFByb3ZpZGluZyBhIGN1c3RvbSBgaW1hZ2VMb2FkRnVuY3Rpb25gIGNhbiBiZSB1c2VmdWwgdG8gbG9hZCBpbWFnZXMgd2l0aFxuICogcG9zdCByZXF1ZXN0cyBvciAtIGluIGdlbmVyYWwgLSB0aHJvdWdoIFhIUiByZXF1ZXN0cywgd2hlcmUgdGhlIHNyYyBvZiB0aGVcbiAqIGltYWdlIGVsZW1lbnQgd291bGQgYmUgc2V0IHRvIGEgZGF0YSBVUkkgd2hlbiB0aGUgY29udGVudCBpcyBsb2FkZWQuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKEltYWdlV3JhcHBlciwgc3RyaW5nKTogdm9pZH0gTG9hZEZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbnZhciBJbWFnZVdyYXBwZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlV3JhcHBlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtMb2FkRnVuY3Rpb259IGltYWdlTG9hZEZ1bmN0aW9uIEltYWdlIGxvYWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gSW1hZ2VXcmFwcGVyKGV4dGVudCwgcmVzb2x1dGlvbiwgcGl4ZWxSYXRpbywgc3JjLCBjcm9zc09yaWdpbiwgaW1hZ2VMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBJbWFnZVN0YXRlLklETEUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3JjXyA9IHNyYztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgaWYgKGNyb3NzT3JpZ2luICE9PSBudWxsKSB7XG4gICAgICAgICAgICBfdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9mdW5jdGlvbigpOnZvaWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuSURMRTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtMb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8gPSBpbWFnZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuRVJST1I7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlc29sdXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHV0aW9uID0gZ2V0SGVpZ2h0KHRoaXMuZXh0ZW50KSAvIHRoaXMuaW1hZ2VfLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgICAqIExvYWRpbmcgaXMgdGFrZW4gY2FyZSBvZiBieSB0aGUgdGlsZSBxdWV1ZSwgYW5kIGNhbGxpbmcgdGhpcyBtZXRob2QgaXNcbiAgICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5JRExFIHx8IHRoaXMuc3RhdGUgPT0gSW1hZ2VTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IEltYWdlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUxvYWRGdW5jdGlvbl8odGhpcywgdGhpcy5zcmNfKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbGlzdGVuSW1hZ2UodGhpcy5pbWFnZV8sIHRoaXMuaGFuZGxlSW1hZ2VMb2FkXy5iaW5kKHRoaXMpLCB0aGlzLmhhbmRsZUltYWdlRXJyb3JfLmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UuXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSkge1xuICAgICAgICB0aGlzLmltYWdlXyA9IGltYWdlO1xuICAgICAgICB0aGlzLnJlc29sdXRpb24gPSBnZXRIZWlnaHQodGhpcy5leHRlbnQpIC8gdGhpcy5pbWFnZV8uaGVpZ2h0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51bmxpc3Rlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVdyYXBwZXI7XG59KEltYWdlQmFzZSkpO1xuLyoqXG4gKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gaW1hZ2UgSW1hZ2UgZWxlbWVudC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTphbnl9IGxvYWRIYW5kbGVyIExvYWQgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCk6YW55fSBlcnJvckhhbmRsZXIgRXJyb3IgY2FsbGJhY2sgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigpOnZvaWR9IENhbGxiYWNrIHRvIHN0b3AgbGlzdGVuaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuSW1hZ2UoaW1hZ2UsIGxvYWRIYW5kbGVyLCBlcnJvckhhbmRsZXIpIHtcbiAgICB2YXIgaW1nID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAoaW1hZ2UpO1xuICAgIHZhciBsaXN0ZW5pbmcgPSB0cnVlO1xuICAgIHZhciBkZWNvZGluZyA9IGZhbHNlO1xuICAgIHZhciBsb2FkZWQgPSBmYWxzZTtcbiAgICB2YXIgbGlzdGVuZXJLZXlzID0gW1xuICAgICAgICBsaXN0ZW5PbmNlKGltZywgRXZlbnRUeXBlLkxPQUQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIWRlY29kaW5nKSB7XG4gICAgICAgICAgICAgICAgbG9hZEhhbmRsZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgXTtcbiAgICBpZiAoaW1nLnNyYyAmJiBJTUFHRV9ERUNPREUpIHtcbiAgICAgICAgZGVjb2RpbmcgPSB0cnVlO1xuICAgICAgICBpbWdcbiAgICAgICAgICAgIC5kZWNvZGUoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmluZykge1xuICAgICAgICAgICAgICAgIGxvYWRIYW5kbGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbk9uY2UoaW1nLCBFdmVudFR5cGUuRVJST1IsIGVycm9ySGFuZGxlcikpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gdW5saXN0ZW4oKSB7XG4gICAgICAgIGxpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICBsaXN0ZW5lcktleXMuZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VXcmFwcGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2UuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9JbWFnZVRpbGVcbiAqL1xuaW1wb3J0IFRpbGUgZnJvbSAnLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHsgbGlzdGVuSW1hZ2UgfSBmcm9tICcuL0ltYWdlLmpzJztcbnZhciBJbWFnZVRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEltYWdlVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgSW1hZ2Ugc291cmNlIFVSSS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLk9wdGlvbnN9IFtvcHRfb3B0aW9uc10gVGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlVGlsZSh0aWxlQ29vcmQsIHN0YXRlLCBzcmMsIGNyb3NzT3JpZ2luLCB0aWxlTG9hZEZ1bmN0aW9uLCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0aWxlQ29vcmQsIHN0YXRlLCBvcHRfb3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY3Jvc3NPcmlnaW5fID0gY3Jvc3NPcmlnaW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbWFnZSBVUklcbiAgICAgICAgICpcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNyY18gPSBzcmM7XG4gICAgICAgIF90aGlzLmtleSA9IHNyYztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW1hZ2VfID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChjcm9zc09yaWdpbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgX3RoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/ZnVuY3Rpb24oKTp2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUxvYWRGdW5jdGlvbl8gPSB0aWxlTG9hZEZ1bmN0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgSFRNTCBpbWFnZSBlbGVtZW50IGZvciB0aGlzIHRpbGUgKG1heSBiZSBhIENhbnZhcywgSW1hZ2UsIG9yIFZpZGVvKS5cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbWFnZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIGFuIEhUTUwgaW1hZ2UgZWxlbWVudCBmb3IgdGhpcyB0aWxlIChtYXkgYmUgYSBDYW52YXMgb3IgcHJlbG9hZGVkIEltYWdlKS5cbiAgICAgKiBAcGFyYW0ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLnNldEltYWdlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5pbWFnZV8gPSBlbGVtZW50O1xuICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBsb2FkaW5nIG9yIHJlYWQgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVSUk9SO1xuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gZ2V0QmxhbmtJbWFnZSgpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBzdWNjZXNzZnVsIGltYWdlIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGltYWdlID0gLyoqIEB0eXBlIHtIVE1MSW1hZ2VFbGVtZW50fSAqLyAodGhpcy5pbWFnZV8pO1xuICAgICAgICBpZiAoaW1hZ2UubmF0dXJhbFdpZHRoICYmIGltYWdlLm5hdHVyYWxIZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVubGlzdGVuSW1hZ2VfKCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLklETEU7XG4gICAgICAgICAgICB0aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY3Jvc3NPcmlnaW5fICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZV8uY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb25fKHRoaXMsIHRoaXMuc3JjXyk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IGxpc3RlbkltYWdlKHRoaXMuaW1hZ2VfLCB0aGlzLmhhbmRsZUltYWdlTG9hZF8uYmluZCh0aGlzKSwgdGhpcy5oYW5kbGVJbWFnZUVycm9yXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRGlzY2FyZHMgZXZlbnQgaGFuZGxlcnMgd2hpY2ggbGlzdGVuIGZvciBsb2FkIGNvbXBsZXRpb24gb3IgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLnVubGlzdGVuSW1hZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy51bmxpc3Rlbl8pIHtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fKCk7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBJbWFnZVRpbGU7XG59KFRpbGUpKTtcbi8qKlxuICogR2V0IGEgMS1waXhlbCBibGFuayBpbWFnZS5cbiAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBCbGFuayBpbWFnZS5cbiAqL1xuZnVuY3Rpb24gZ2V0QmxhbmtJbWFnZSgpIHtcbiAgICB2YXIgY3R4ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKDEsIDEpO1xuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLDAsMCwwKSc7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIDEsIDEpO1xuICAgIHJldHVybiBjdHguY2FudmFzO1xufVxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW1hZ2VUaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovVHJpYW5ndWxhdGlvblxuICovXG5pbXBvcnQgeyBib3VuZGluZ0V4dGVudCwgY3JlYXRlRW1wdHksIGV4dGVuZENvb3JkaW5hdGUsIGdldEFyZWEsIGdldEJvdHRvbUxlZnQsIGdldEJvdHRvbVJpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRUb3BSaWdodCwgZ2V0V2lkdGgsIGludGVyc2VjdHMsIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGdldFRyYW5zZm9ybSB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgbG9nMiwgbW9kdWxvIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIFNpbmdsZSB0cmlhbmdsZTsgY29uc2lzdHMgb2YgMyBzb3VyY2UgcG9pbnRzIGFuZCAzIHRhcmdldCBwb2ludHMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUcmlhbmdsZVxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBzb3VyY2UgU291cmNlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSB0YXJnZXQgVGFyZ2V0LlxuICovXG4vKipcbiAqIE1heGltdW0gbnVtYmVyIG9mIHN1YmRpdmlzaW9uIHN0ZXBzIGR1cmluZyByYXN0ZXIgcmVwcm9qZWN0aW9uIHRyaWFuZ3VsYXRpb24uXG4gKiBQcmV2ZW50cyBoaWdoIG1lbW9yeSB1c2FnZSBhbmQgbGFyZ2UgbnVtYmVyIG9mIHByb2o0IGNhbGxzIChmb3IgY2VydGFpblxuICogdHJhbnNmb3JtYXRpb25zIGFuZCBhcmVhcykuIEF0IG1vc3QgYDIqKDJedGhpcylgIHRyaWFuZ2xlcyBhcmUgY3JlYXRlZCBmb3JcbiAqIGVhY2ggdHJpYW5ndWxhdGVkIGV4dGVudCAodGlsZS9pbWFnZSkuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG52YXIgTUFYX1NVQkRJVklTSU9OID0gMTA7XG4vKipcbiAqIE1heGltdW0gYWxsb3dlZCBzaXplIG9mIHRyaWFuZ2xlIHJlbGF0aXZlIHRvIHdvcmxkIHdpZHRoLiBXaGVuIHRyYW5zZm9ybWluZ1xuICogY29ybmVycyBvZiB3b3JsZCBleHRlbnQgYmV0d2VlbiBjZXJ0YWluIHByb2plY3Rpb25zLCB0aGUgcmVzdWx0aW5nXG4gKiB0cmlhbmd1bGF0aW9uIHNlZW1zIHRvIGhhdmUgemVybyBlcnJvciBhbmQgbm8gc3ViZGl2aXNpb24gaXMgcGVyZm9ybWVkLiBJZlxuICogdGhlIHRyaWFuZ2xlIHdpZHRoIGlzIG1vcmUgdGhhbiB0aGlzIChyZWxhdGl2ZSB0byB3b3JsZCB3aWR0aDsgMC0xKSxcbiAqIHN1YmRpdmlzb24gaXMgZm9yY2VkICh1cCB0byBgTUFYX1NVQkRJVklTSU9OYCkuIERlZmF1bHQgaXMgYDAuMjVgLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIE1BWF9UUklBTkdMRV9XSURUSCA9IDAuMjU7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENsYXNzIGNvbnRhaW5pbmcgdHJpYW5ndWxhdGlvbiBvZiB0aGUgZ2l2ZW4gdGFyZ2V0IGV4dGVudC5cbiAqIFVzZWQgZm9yIGRldGVybWluaW5nIHNvdXJjZSBkYXRhIGFuZCB0aGUgcmVwcm9qZWN0aW9uIGl0c2VsZi5cbiAqL1xudmFyIFRyaWFuZ3VsYXRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnQgdG8gdHJpYW5ndWxhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhTb3VyY2VFeHRlbnQgTWF4aW1hbCBzb3VyY2UgZXh0ZW50IHRoYXQgY2FuIGJlIHVzZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGVycm9yVGhyZXNob2xkIEFjY2VwdGFibGUgZXJyb3IgKGluIHNvdXJjZSB1bml0cykuXG4gICAgICogQHBhcmFtIHs/bnVtYmVyfSBvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uIFRoZSAob3B0aW9uYWwpIHJlc29sdXRpb24gb2YgdGhlIGRlc3RpbmF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRyaWFuZ3VsYXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0RXh0ZW50LCBtYXhTb3VyY2VFeHRlbnQsIGVycm9yVGhyZXNob2xkLCBvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNvdXJjZVByb2pfID0gc291cmNlUHJvajtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGFyZ2V0UHJval8gPSB0YXJnZXRQcm9qO1xuICAgICAgICAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSAqL1xuICAgICAgICB2YXIgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybUludiA9IGdldFRyYW5zZm9ybSh0aGlzLnRhcmdldFByb2pfLCB0aGlzLnNvdXJjZVByb2pfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjIEEgY29vcmRpbmF0ZS5cbiAgICAgICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmFuc2Zvcm1JbnZfID0gZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBjWzBdICsgJy8nICsgY1sxXTtcbiAgICAgICAgICAgIGlmICghdHJhbnNmb3JtSW52Q2FjaGVba2V5XSkge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybUludkNhY2hlW2tleV0gPSB0cmFuc2Zvcm1JbnYoYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJhbnNmb3JtSW52Q2FjaGVba2V5XTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhTb3VyY2VFeHRlbnRfID0gbWF4U291cmNlRXh0ZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZXJyb3JUaHJlc2hvbGRTcXVhcmVkXyA9IGVycm9yVGhyZXNob2xkICogZXJyb3JUaHJlc2hvbGQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8VHJpYW5nbGU+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmlhbmdsZXNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aGUgdHJpYW5ndWxhdGlvbiBjcm9zc2VzIGVkZ2Ugb2YgdGhlIHNvdXJjZSBwcm9qZWN0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JhcHNYSW5Tb3VyY2VfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FuV3JhcFhJblNvdXJjZV8gPVxuICAgICAgICAgICAgdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICAgICAgISFtYXhTb3VyY2VFeHRlbnQgJiZcbiAgICAgICAgICAgICAgICAhIXRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KCkgJiZcbiAgICAgICAgICAgICAgICBnZXRXaWR0aChtYXhTb3VyY2VFeHRlbnQpID09IGdldFdpZHRoKHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KCkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfID0gdGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKVxuICAgICAgICAgICAgPyBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgez9udW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldFdvcmxkV2lkdGhfID0gdGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKVxuICAgICAgICAgICAgPyBnZXRXaWR0aCh0aGlzLnRhcmdldFByb2pfLmdldEV4dGVudCgpKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Ub3BMZWZ0ID0gZ2V0VG9wTGVmdCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Ub3BSaWdodCA9IGdldFRvcFJpZ2h0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0ID0gZ2V0Qm90dG9tUmlnaHQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uQm90dG9tTGVmdCA9IGdldEJvdHRvbUxlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIHNvdXJjZVRvcExlZnQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Ub3BMZWZ0KTtcbiAgICAgICAgdmFyIHNvdXJjZVRvcFJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wUmlnaHQpO1xuICAgICAgICB2YXIgc291cmNlQm90dG9tUmlnaHQgPSB0aGlzLnRyYW5zZm9ybUludl8oZGVzdGluYXRpb25Cb3R0b21SaWdodCk7XG4gICAgICAgIHZhciBzb3VyY2VCb3R0b21MZWZ0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tTGVmdCk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIFRoZSBtYXhTdWJkaXZpc2lvbiBjb250cm9scyBob3cgbWFueSBzcGxpdHRpbmdzIG9mIHRoZSB0YXJnZXQgYXJlYSBjYW5cbiAgICAgICAgICogYmUgZG9uZS4gVGhlIGlkZWEgaGVyZSBpcyB0byBkbyBhIGxpbmVhciBtYXBwaW5nIG9mIHRoZSB0YXJnZXQgYXJlYXNcbiAgICAgICAgICogYnV0IHRoZSBhY3R1YWwgb3ZlcmFsIHJlcHJvamVjdGlvbiAoY2FuIGJlKSBleHRyZW1lbHkgbm9uLWxpbmVhci4gVGhlXG4gICAgICAgICAqIGRlZmF1bHQgdmFsdWUgb2YgTUFYX1NVQkRJVklTSU9OIHdhcyBjaG9zZW4gYmFzZWQgb24gbWFwcGluZyBhIDI1NngyNTZcbiAgICAgICAgICogdGlsZSBzaXplLiBIb3dldmVyIHRoaXMgZnVuY3Rpb24gaXMgYWxzbyBjYWxsZWQgdG8gcmVtYXAgY2FudmFzIHJlbmRlcmVkXG4gICAgICAgICAqIGxheWVycyB3aGljaCBjYW4gYmUgbXVjaCBsYXJnZXIuIFRoaXMgY2FsY3VsYXRpb24gaW5jcmVhc2VzIHRoZSBtYXhTdWJkaXZpc2lvblxuICAgICAgICAgKiB2YWx1ZSBieSB0aGUgcmlnaHQgZmFjdG9yIHNvIHRoYXQgZWFjaCAyNTZ4MjU2IHBpeGVsIGFyZWEgaGFzXG4gICAgICAgICAqIE1BWF9TVUJESVZJU0lPTiBkaXZpc2lvbnMuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgbWF4U3ViZGl2aXNpb24gPSBNQVhfU1VCRElWSVNJT04gK1xuICAgICAgICAgICAgKG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb25cbiAgICAgICAgICAgICAgICA/IE1hdGgubWF4KDAsIE1hdGguY2VpbChsb2cyKGdldEFyZWEodGFyZ2V0RXh0ZW50KSAvXG4gICAgICAgICAgICAgICAgICAgIChvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uICpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdF9kZXN0aW5hdGlvblJlc29sdXRpb24gKlxuICAgICAgICAgICAgICAgICAgICAgICAgMjU2ICpcbiAgICAgICAgICAgICAgICAgICAgICAgIDI1NikpKSlcbiAgICAgICAgICAgICAgICA6IDApO1xuICAgICAgICB0aGlzLmFkZFF1YWRfKGRlc3RpbmF0aW9uVG9wTGVmdCwgZGVzdGluYXRpb25Ub3BSaWdodCwgZGVzdGluYXRpb25Cb3R0b21SaWdodCwgZGVzdGluYXRpb25Cb3R0b21MZWZ0LCBzb3VyY2VUb3BMZWZ0LCBzb3VyY2VUb3BSaWdodCwgc291cmNlQm90dG9tUmlnaHQsIHNvdXJjZUJvdHRvbUxlZnQsIG1heFN1YmRpdmlzaW9uKTtcbiAgICAgICAgaWYgKHRoaXMud3JhcHNYSW5Tb3VyY2VfKSB7XG4gICAgICAgICAgICB2YXIgbGVmdEJvdW5kXzEgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgbGVmdEJvdW5kXzEgPSBNYXRoLm1pbihsZWZ0Qm91bmRfMSwgdHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsyXVswXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFNoaWZ0IHRyaWFuZ2xlcyB0byBiZSBhcyBjbG9zZSB0byBgbGVmdEJvdW5kYCBhcyBwb3NzaWJsZVxuICAgICAgICAgICAgLy8gKGlmIHRoZSBkaXN0YW5jZSBpcyBtb3JlIHRoYW4gYHdvcmxkV2lkdGggLyAyYCBpdCBjYW4gYmUgY2xvc2VyLlxuICAgICAgICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlKSB7XG4gICAgICAgICAgICAgICAgaWYgKE1hdGgubWF4KHRyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMF0pIC1cbiAgICAgICAgICAgICAgICAgICAgbGVmdEJvdW5kXzEgPlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3VHJpYW5nbGUgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzBdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMF1bMV1dLFxuICAgICAgICAgICAgICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzFdXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMl1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsyXVsxXV0sXG4gICAgICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVswXVswXSAtIGxlZnRCb3VuZF8xID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzBdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzFdWzBdIC0gbGVmdEJvdW5kXzEgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVbMV1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMl1bMF0gLSBsZWZ0Qm91bmRfMSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZVsyXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIFJhcmVseSAoaWYgdGhlIGV4dGVudCBjb250YWlucyBib3RoIHRoZSBkYXRlbGluZSBhbmQgcHJpbWUgbWVyaWRpYW4pXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBzaGlmdCBjYW4gaW4gdHVybiBicmVhayBzb21lIHRyaWFuZ2xlcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gRGV0ZWN0IHRoaXMgaGVyZSBhbmQgZG9uJ3Qgc2hpZnQgaW4gc3VjaCBjYXNlcy5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pblggPSBNYXRoLm1pbihuZXdUcmlhbmdsZVswXVswXSwgbmV3VHJpYW5nbGVbMV1bMF0sIG5ld1RyaWFuZ2xlWzJdWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heFggPSBNYXRoLm1heChuZXdUcmlhbmdsZVswXVswXSwgbmV3VHJpYW5nbGVbMV1bMF0sIG5ld1RyaWFuZ2xlWzJdWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heFggLSBtaW5YIDwgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWFuZ2xlLnNvdXJjZSA9IG5ld1RyaWFuZ2xlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICB0cmFuc2Zvcm1JbnZDYWNoZSA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRyaWFuZ2xlIHRvIHRoZSB0cmlhbmd1bGF0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhIFRoZSB0YXJnZXQgYSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiIFRoZSB0YXJnZXQgYiBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjIFRoZSB0YXJnZXQgYyBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhU3JjIFRoZSBzb3VyY2UgYSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiU3JjIFRoZSBzb3VyY2UgYiBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjU3JjIFRoZSBzb3VyY2UgYyBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuYWRkVHJpYW5nbGVfID0gZnVuY3Rpb24gKGEsIGIsIGMsIGFTcmMsIGJTcmMsIGNTcmMpIHtcbiAgICAgICAgdGhpcy50cmlhbmdsZXNfLnB1c2goe1xuICAgICAgICAgICAgc291cmNlOiBbYVNyYywgYlNyYywgY1NyY10sXG4gICAgICAgICAgICB0YXJnZXQ6IFthLCBiLCBjXSxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHF1YWQgKHBvaW50cyBpbiBjbG9jay13aXNlIG9yZGVyKSB0byB0aGUgdHJpYW5ndWxhdGlvblxuICAgICAqIChhbmQgcmVwcm9qZWN0cyB0aGUgdmVydGljZXMpIGlmIHZhbGlkLlxuICAgICAqIFBlcmZvcm1zIHF1YWQgc3ViZGl2aXNpb24gaWYgbmVlZGVkIHRvIGluY3JlYXNlIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhIFRoZSB0YXJnZXQgYSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiIFRoZSB0YXJnZXQgYiBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjIFRoZSB0YXJnZXQgYyBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkIFRoZSB0YXJnZXQgZCBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhU3JjIFRoZSBzb3VyY2UgYSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBiU3JjIFRoZSBzb3VyY2UgYiBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjU3JjIFRoZSBzb3VyY2UgYyBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkU3JjIFRoZSBzb3VyY2UgZCBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhTdWJkaXZpc2lvbiBNYXhpbWFsIGFsbG93ZWQgc3ViZGl2aXNpb24gb2YgdGhlIHF1YWQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBUcmlhbmd1bGF0aW9uLnByb3RvdHlwZS5hZGRRdWFkXyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBhU3JjLCBiU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbikge1xuICAgICAgICB2YXIgc291cmNlUXVhZEV4dGVudCA9IGJvdW5kaW5nRXh0ZW50KFthU3JjLCBiU3JjLCBjU3JjLCBkU3JjXSk7XG4gICAgICAgIHZhciBzb3VyY2VDb3ZlcmFnZVggPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfXG4gICAgICAgICAgICA/IGdldFdpZHRoKHNvdXJjZVF1YWRFeHRlbnQpIC8gdGhpcy5zb3VyY2VXb3JsZFdpZHRoX1xuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICB2YXIgc291cmNlV29ybGRXaWR0aCA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5zb3VyY2VXb3JsZFdpZHRoXyk7XG4gICAgICAgIC8vIHdoZW4gdGhlIHF1YWQgaXMgd3JhcHBlZCBpbiB0aGUgc291cmNlIHByb2plY3Rpb25cbiAgICAgICAgLy8gaXQgY292ZXJzIG1vc3Qgb2YgdGhlIHByb2plY3Rpb24gZXh0ZW50LCBidXQgbm90IGZ1bGx5XG4gICAgICAgIHZhciB3cmFwc1ggPSB0aGlzLnNvdXJjZVByb2pfLmNhbldyYXBYKCkgJiZcbiAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA+IDAuNSAmJlxuICAgICAgICAgICAgc291cmNlQ292ZXJhZ2VYIDwgMTtcbiAgICAgICAgdmFyIG5lZWRzU3ViZGl2aXNpb24gPSBmYWxzZTtcbiAgICAgICAgaWYgKG1heFN1YmRpdmlzaW9uID4gMCkge1xuICAgICAgICAgICAgaWYgKHRoaXMudGFyZ2V0UHJval8uaXNHbG9iYWwoKSAmJiB0aGlzLnRhcmdldFdvcmxkV2lkdGhfKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYSwgYiwgYywgZF0pO1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRDb3ZlcmFnZVggPSBnZXRXaWR0aCh0YXJnZXRRdWFkRXh0ZW50KSAvIHRoaXMudGFyZ2V0V29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldENvdmVyYWdlWCA+IE1BWF9UUklBTkdMRV9XSURUSCB8fCBuZWVkc1N1YmRpdmlzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF3cmFwc1ggJiYgdGhpcy5zb3VyY2VQcm9qXy5pc0dsb2JhbCgpICYmIHNvdXJjZUNvdmVyYWdlWCkge1xuICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPVxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHwgbmVlZHNTdWJkaXZpc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24gJiYgdGhpcy5tYXhTb3VyY2VFeHRlbnRfKSB7XG4gICAgICAgICAgICBpZiAoaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFswXSkgJiZcbiAgICAgICAgICAgICAgICBpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzFdKSAmJlxuICAgICAgICAgICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMl0pICYmXG4gICAgICAgICAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFszXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWludGVyc2VjdHMoc291cmNlUXVhZEV4dGVudCwgdGhpcy5tYXhTb3VyY2VFeHRlbnRfKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3aG9sZSBxdWFkIG91dHNpZGUgc291cmNlIHByb2plY3Rpb24gZXh0ZW50IC0+IGlnbm9yZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBpc05vdEZpbml0ZSA9IDA7XG4gICAgICAgIGlmICghbmVlZHNTdWJkaXZpc2lvbikge1xuICAgICAgICAgICAgaWYgKCFpc0Zpbml0ZShhU3JjWzBdKSB8fFxuICAgICAgICAgICAgICAgICFpc0Zpbml0ZShhU3JjWzFdKSB8fFxuICAgICAgICAgICAgICAgICFpc0Zpbml0ZShiU3JjWzBdKSB8fFxuICAgICAgICAgICAgICAgICFpc0Zpbml0ZShiU3JjWzFdKSB8fFxuICAgICAgICAgICAgICAgICFpc0Zpbml0ZShjU3JjWzBdKSB8fFxuICAgICAgICAgICAgICAgICFpc0Zpbml0ZShjU3JjWzFdKSB8fFxuICAgICAgICAgICAgICAgICFpc0Zpbml0ZShkU3JjWzBdKSB8fFxuICAgICAgICAgICAgICAgICFpc0Zpbml0ZShkU3JjWzFdKSkge1xuICAgICAgICAgICAgICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmVlZHNTdWJkaXZpc2lvbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJdCBtaWdodCBiZSB0aGUgY2FzZSB0aGF0IG9ubHkgMSBvZiB0aGUgcG9pbnRzIGlzIGluZmluaXRlLiBJbiB0aGlzIGNhc2VcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgY2FuIGRyYXcgYSBzaW5nbGUgdHJpYW5nbGUgd2l0aCB0aGUgb3RoZXIgdGhyZWUgcG9pbnRzXG4gICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlID1cbiAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoYVNyY1swXSkgfHwgIWlzRmluaXRlKGFTcmNbMV0pID8gOCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGJTcmNbMF0pIHx8ICFpc0Zpbml0ZShiU3JjWzFdKSA/IDQgOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShjU3JjWzBdKSB8fCAhaXNGaW5pdGUoY1NyY1sxXSkgPyAyIDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoZFNyY1swXSkgfHwgIWlzRmluaXRlKGRTcmNbMV0pID8gMSA6IDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNOb3RGaW5pdGUgIT0gMSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3RGaW5pdGUgIT0gMiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3RGaW5pdGUgIT0gNCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3RGaW5pdGUgIT0gOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgICAgICAgIGlmICghbmVlZHNTdWJkaXZpc2lvbikge1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBbKGFbMF0gKyBjWzBdKSAvIDIsIChhWzFdICsgY1sxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGNlbnRlcik7XG4gICAgICAgICAgICAgICAgdmFyIGR4ID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIGlmICh3cmFwc1gpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlclNyY0VzdGltWCA9IChtb2R1bG8oYVNyY1swXSwgc291cmNlV29ybGRXaWR0aCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxvKGNTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpKSAvXG4gICAgICAgICAgICAgICAgICAgICAgICAyO1xuICAgICAgICAgICAgICAgICAgICBkeCA9IGNlbnRlclNyY0VzdGltWCAtIG1vZHVsbyhjZW50ZXJTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZHggPSAoYVNyY1swXSArIGNTcmNbMF0pIC8gMiAtIGNlbnRlclNyY1swXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGR5ID0gKGFTcmNbMV0gKyBjU3JjWzFdKSAvIDIgLSBjZW50ZXJTcmNbMV07XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclNyY0Vycm9yU3F1YXJlZCA9IGR4ICogZHggKyBkeSAqIGR5O1xuICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPiB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmVlZHNTdWJkaXZpc2lvbikge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhhWzBdIC0gY1swXSkgPD0gTWF0aC5hYnMoYVsxXSAtIGNbMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHNwbGl0IGhvcml6b250YWxseSAodG9wICYgYm90dG9tKVxuICAgICAgICAgICAgICAgICAgICB2YXIgYmMgPSBbKGJbMF0gKyBjWzBdKSAvIDIsIChiWzFdICsgY1sxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJjU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGJjKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhID0gWyhkWzBdICsgYVswXSkgLyAyLCAoZFsxXSArIGFbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYVNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhkYSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYSwgYiwgYmMsIGRhLCBhU3JjLCBiU3JjLCBiY1NyYywgZGFTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oZGEsIGJjLCBjLCBkLCBkYVNyYywgYmNTcmMsIGNTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBzcGxpdCB2ZXJ0aWNhbGx5IChsZWZ0ICYgcmlnaHQpXG4gICAgICAgICAgICAgICAgICAgIHZhciBhYiA9IFsoYVswXSArIGJbMF0pIC8gMiwgKGFbMV0gKyBiWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWJTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oYWIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2QgPSBbKGNbMF0gKyBkWzBdKSAvIDIsIChjWzFdICsgZFsxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNkU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGNkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRRdWFkXyhhLCBhYiwgY2QsIGQsIGFTcmMsIGFiU3JjLCBjZFNyYywgZFNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRRdWFkXyhhYiwgYiwgYywgY2QsIGFiU3JjLCBiU3JjLCBjU3JjLCBjZFNyYywgbWF4U3ViZGl2aXNpb24gLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh3cmFwc1gpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5XcmFwWEluU291cmNlXykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMud3JhcHNYSW5Tb3VyY2VfID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFeGFjdGx5IHplcm8gb3Igb25lIG9mICpTcmMgaXMgbm90IGZpbml0ZVxuICAgICAgICAvLyBUaGUgdHJpYW5nbGVzIG11c3QgaGF2ZSB0aGUgZGlhZ29uYWwgbGluZSBhcyB0aGUgZmlyc3Qgc2lkZVxuICAgICAgICAvLyBUaGlzIGlzIHRvIGFsbG93IGVhc3kgY29kZSBpbiByZXByb2oucyB0byBtYWtlIGl0IHN0cmFpZ2h0IGZvciBicm9rZW5cbiAgICAgICAgLy8gYnJvd3NlcnMgdGhhdCBjYW4ndCBoYW5kbGUgZGlhZ29uYWwgY2xpcHBpbmdcbiAgICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4YikgPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYSwgYywgZCwgYVNyYywgY1NyYywgZFNyYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChpc05vdEZpbml0ZSAmIDB4ZSkgPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYSwgYywgYiwgYVNyYywgY1NyYywgYlNyYyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTm90RmluaXRlKSB7XG4gICAgICAgICAgICAvLyBUcnkgdGhlIG90aGVyIHR3byB0cmlhbmdsZXNcbiAgICAgICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGQpID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhiLCBkLCBhLCBiU3JjLCBkU3JjLCBhU3JjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweDcpID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRyaWFuZ2xlXyhiLCBkLCBjLCBiU3JjLCBkU3JjLCBjU3JjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBleHRlbnQgb2YgdGhlICdzb3VyY2UnIGNvb3JkaW5hdGVzIGZyb20gYWxsIHRoZSB0cmlhbmdsZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBDYWxjdWxhdGVkIGV4dGVudC5cbiAgICAgKi9cbiAgICBUcmlhbmd1bGF0aW9uLnByb3RvdHlwZS5jYWxjdWxhdGVTb3VyY2VFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBleHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgdmFyIHNyYyA9IHRyaWFuZ2xlLnNvdXJjZTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMF0pO1xuICAgICAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1sxXSk7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzJdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBleHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxUcmlhbmdsZT59IEFycmF5IG9mIHRoZSBjYWxjdWxhdGVkIHRyaWFuZ2xlcy5cbiAgICAgKi9cbiAgICBUcmlhbmd1bGF0aW9uLnByb3RvdHlwZS5nZXRUcmlhbmdsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyaWFuZ2xlc187XG4gICAgfTtcbiAgICByZXR1cm4gVHJpYW5ndWxhdGlvbjtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBUcmlhbmd1bGF0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VHJpYW5ndWxhdGlvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qXG4gKi9cbmltcG9ydCB7IElNQUdFX1NNT09USElOR19ESVNBQkxFRCB9IGZyb20gJy4vcmVuZGVyZXIvY2FudmFzL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuL29iai5qcyc7XG5pbXBvcnQgeyBjb250YWluc0Nvb3JkaW5hdGUsIGNyZWF0ZUVtcHR5LCBleHRlbmQsIGZvckVhY2hDb3JuZXIsIGdldENlbnRlciwgZ2V0SGVpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRXaWR0aCwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYW52YXNDb250ZXh0MkQgfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQgeyBnZXRQb2ludFJlc29sdXRpb24sIHRyYW5zZm9ybSB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBzb2x2ZUxpbmVhclN5c3RlbSB9IGZyb20gJy4vbWF0aC5qcyc7XG52YXIgYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xuLyoqXG4gKiBUaGlzIGRyYXdzIGEgc21hbGwgdHJpYW5nbGUgaW50byBhIGNhbnZhcyBieSBzZXR0aW5nIHRoZSB0cmlhbmdsZSBhcyB0aGUgY2xpcCByZWdpb25cbiAqIGFuZCB0aGVuIGRyYXdpbmcgYSAodG9vIGxhcmdlKSByZWN0YW5nbGVcbiAqXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY3R4IFRoZSBjb250ZXh0IGluIHdoaWNoIHRvIGRyYXcgdGhlIHRyaWFuZ2xlXG4gKiBAcGFyYW0ge251bWJlcn0gdTEgVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHBvaW50LiBUaGUgZmlyc3QgcG9pbnQgaXMgMCwwLlxuICogQHBhcmFtIHtudW1iZXJ9IHYxIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHNlY29uZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB1MiBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2MiBUaGUgeS1jb29yZGluYXRlIG9mIHRoZSB0aGlyZCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gZHJhd1Rlc3RUcmlhbmdsZShjdHgsIHUxLCB2MSwgdTIsIHYyKSB7XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oMCwgMCk7XG4gICAgY3R4LmxpbmVUbyh1MSwgdjEpO1xuICAgIGN0eC5saW5lVG8odTIsIHYyKTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguY2xpcCgpO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCBNYXRoLm1heCh1MSwgdTIpICsgMSwgTWF0aC5tYXgodjEsIHYyKSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbn1cbi8qKlxuICogR2l2ZW4gdGhlIGRhdGEgZnJvbSBnZXRJbWFnZURhdGEsIHNlZSBpZiB0aGUgcmlnaHQgdmFsdWVzIGFwcGVhciBhdCB0aGUgcHJvdmlkZWQgb2Zmc2V0LlxuICogUmV0dXJucyB0cnVlIGlmIGVpdGhlciB0aGUgY29sb3Igb3IgdHJhbnNwYXJlbmN5IGlzIG9mZlxuICpcbiAqIEBwYXJhbSB7VWludDhDbGFtcGVkQXJyYXl9IGRhdGEgVGhlIGRhdGEgcmV0dXJuZWQgZnJvbSBnZXRJbWFnZURhdGFcbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgVGhlIHBpeGVsIG9mZnNldCBmcm9tIHRoZSBzdGFydCBvZiBkYXRhLlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgZGlhZ29uYWwgcmVuZGVyaW5nIGlzIGJyb2tlblxuICovXG5mdW5jdGlvbiB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCBvZmZzZXQpIHtcbiAgICAvLyB0aGUgdmFsdWVzIG91Z2h0IHRvIGJlIGNsb3NlIHRvIHRoZSByZ2JhKDIxMCwgMCwgMCwgMC43NSlcbiAgICByZXR1cm4gKE1hdGguYWJzKGRhdGFbb2Zmc2V0ICogNF0gLSAyMTApID4gMiB8fFxuICAgICAgICBNYXRoLmFicyhkYXRhW29mZnNldCAqIDQgKyAzXSAtIDAuNzUgKiAyNTUpID4gMik7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgdGhlIGN1cnJlbnQgYnJvd3NlciBjb25maWd1cmF0aW9uIGNhbiByZW5kZXIgdHJpYW5ndWxhciBjbGlwIHJlZ2lvbnMgY29ycmVjdGx5LlxuICogVGhpcyB2YWx1ZSBpcyBjYWNoZWQgc28gdGhlIGZ1bmN0aW9uIGlzIG9ubHkgZXhwZW5zaXZlIHRoZSBmaXJzdCB0aW1lIGNhbGxlZC5cbiAqIEZpcmVmb3ggb24gV2luZG93cyAoYXMgb2Ygbm93KSBkb2VzIG5vdCBpZiBIV0EgaXMgZW5hYmxlZC4gU2VlIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTE2MDY5NzZcbiAqIElFIGFsc28gZG9lc24ndC4gQ2hyb21lIHdvcmtzLCBhbmQgZXZlcnl0aGluZyBzZWVtcyB0byB3b3JrIG9uIE9TWCBhbmQgQW5kcm9pZC4gVGhpcyBmdW5jdGlvbiBjYWNoZXMgdGhlXG4gKiByZXN1bHQuIEkgc3VwcG9zZSB0aGF0IGl0IGlzIGNvbmNlaXZhYmx5IHBvc3NpYmxlIHRoYXQgYSBicm93c2VyIG1pZ2h0IGZsaXAgbW9kZXMgd2hpbGUgdGhlIGFwcCBpc1xuICogcnVubmluZywgYnV0IGxldHMgaG9wZSBub3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgRGlhZ29uYWwgUmVuZGVyaW5nIGlzIGJyb2tlbi5cbiAqL1xuZnVuY3Rpb24gaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZygpIHtcbiAgICBpZiAoYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyMTAsIDAsIDAsIDAuNzUpJztcbiAgICAgICAgZHJhd1Rlc3RUcmlhbmdsZShjdHgsIDQsIDUsIDQsIDApO1xuICAgICAgICBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgNCwgNSwgMCwgNSk7XG4gICAgICAgIHZhciBkYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCAzLCAzKS5kYXRhO1xuICAgICAgICBicm9rZW5EaWFnb25hbFJlbmRlcmluZ18gPVxuICAgICAgICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgMCkgfHxcbiAgICAgICAgICAgICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCA0KSB8fFxuICAgICAgICAgICAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDgpO1xuICAgIH1cbiAgICByZXR1cm4gYnJva2VuRGlhZ29uYWxSZW5kZXJpbmdfO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0YXJnZXRDZW50ZXIgVGFyZ2V0IGNlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pIHtcbiAgICB2YXIgc291cmNlQ2VudGVyID0gdHJhbnNmb3JtKHRhcmdldENlbnRlciwgdGFyZ2V0UHJvaiwgc291cmNlUHJvaik7XG4gICAgLy8gY2FsY3VsYXRlIHRoZSBpZGVhbCByZXNvbHV0aW9uIG9mIHRoZSBzb3VyY2UgZGF0YVxuICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gZ2V0UG9pbnRSZXNvbHV0aW9uKHRhcmdldFByb2osIHRhcmdldFJlc29sdXRpb24sIHRhcmdldENlbnRlcik7XG4gICAgdmFyIHRhcmdldE1ldGVyc1BlclVuaXQgPSB0YXJnZXRQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICBpZiAodGFyZ2V0TWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24gKj0gdGFyZ2V0TWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgdmFyIHNvdXJjZU1ldGVyc1BlclVuaXQgPSBzb3VyY2VQcm9qLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICBpZiAoc291cmNlTWV0ZXJzUGVyVW5pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNvdXJjZVJlc29sdXRpb24gLz0gc291cmNlTWV0ZXJzUGVyVW5pdDtcbiAgICB9XG4gICAgLy8gQmFzZWQgb24gdGhlIHByb2plY3Rpb24gcHJvcGVydGllcywgdGhlIHBvaW50IHJlc29sdXRpb24gYXQgdGhlIHNwZWNpZmllZFxuICAgIC8vIGNvb3JkaW5hdGVzIG1heSBiZSBzbGlnaHRseSBkaWZmZXJlbnQuIFdlIG5lZWQgdG8gcmV2ZXJzZS1jb21wZW5zYXRlIHRoaXNcbiAgICAvLyBpbiBvcmRlciB0byBhY2hpZXZlIG9wdGltYWwgcmVzdWx0cy5cbiAgICB2YXIgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICBpZiAoIXNvdXJjZUV4dGVudCB8fCBjb250YWluc0Nvb3JkaW5hdGUoc291cmNlRXh0ZW50LCBzb3VyY2VDZW50ZXIpKSB7XG4gICAgICAgIHZhciBjb21wZW5zYXRpb25GYWN0b3IgPSBnZXRQb2ludFJlc29sdXRpb24oc291cmNlUHJvaiwgc291cmNlUmVzb2x1dGlvbiwgc291cmNlQ2VudGVyKSAvXG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uO1xuICAgICAgICBpZiAoaXNGaW5pdGUoY29tcGVuc2F0aW9uRmFjdG9yKSAmJiBjb21wZW5zYXRpb25GYWN0b3IgPiAwKSB7XG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uIC89IGNvbXBlbnNhdGlvbkZhY3RvcjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyBpZGVhbCByZXNvbHV0aW9uIHRvIHVzZSBmcm9tIHRoZSBzb3VyY2UgaW4gb3JkZXIgdG8gYWNoaWV2ZVxuICogcGl4ZWwgbWFwcGluZyBhcyBjbG9zZSBhcyBwb3NzaWJsZSB0byAxOjEgZHVyaW5nIHJlcHJvamVjdGlvbi5cbiAqIFRoZSByZXNvbHV0aW9uIGlzIGNhbGN1bGF0ZWQgcmVnYXJkbGVzcyBvZiB3aGF0IHJlc29sdXRpb25zXG4gKiBhcmUgYWN0dWFsbHkgYXZhaWxhYmxlIGluIHRoZSBkYXRhc2V0IChUaWxlR3JpZCwgSW1hZ2UsIC4uLikuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50XG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0UmVzb2x1dGlvbiBUYXJnZXQgcmVzb2x1dGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGJlc3QgcmVzb2x1dGlvbiB0byB1c2UuIENhbiBiZSArLUluZmluaXR5LCBOYU4gb3IgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24oc291cmNlUHJvaiwgdGFyZ2V0UHJvaiwgdGFyZ2V0RXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgdmFyIHRhcmdldENlbnRlciA9IGdldENlbnRlcih0YXJnZXRFeHRlbnQpO1xuICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRDZW50ZXIsIHRhcmdldFJlc29sdXRpb24pO1xuICAgIGlmICghaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgfHwgc291cmNlUmVzb2x1dGlvbiA8PSAwKSB7XG4gICAgICAgIGZvckVhY2hDb3JuZXIodGFyZ2V0RXh0ZW50LCBmdW5jdGlvbiAoY29ybmVyKSB7XG4gICAgICAgICAgICBzb3VyY2VSZXNvbHV0aW9uID0gY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCBjb3JuZXIsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICAgICAgcmV0dXJuIGlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pICYmIHNvdXJjZVJlc29sdXRpb24gPiAwO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZVJlc29sdXRpb247XG59XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEltYWdlRXh0ZW50XG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAqL1xuLyoqXG4gKiBSZW5kZXJzIHRoZSBzb3VyY2UgZGF0YSBpbnRvIG5ldyBjYW52YXMgYmFzZWQgb24gdGhlIHRyaWFuZ3VsYXRpb24uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0IEhlaWdodCBvZiB0aGUgY2FudmFzLlxuICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gKiBAcGFyYW0ge251bWJlcn0gc291cmNlUmVzb2x1dGlvbiBTb3VyY2UgcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBzb3VyY2VFeHRlbnQgRXh0ZW50IG9mIHRoZSBkYXRhIHNvdXJjZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9IHRyaWFuZ3VsYXRpb24gQ2FsY3VsYXRlZCB0cmlhbmd1bGF0aW9uLlxuICogQHBhcmFtIHtBcnJheTxJbWFnZUV4dGVudD59IHNvdXJjZXMgQXJyYXkgb2Ygc291cmNlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBndXR0ZXIgR3V0dGVyIG9mIHRoZSBzb3VyY2VzLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JlbmRlckVkZ2VzXSBSZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzLlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRfaW50ZXJwb2xhdGVdIFVzZSBsaW5lYXIgaW50ZXJwb2xhdGlvbiB3aGVuIHJlc2FtcGxpbmcuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQ2FudmFzIHdpdGggcmVwcm9qZWN0ZWQgZGF0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcih3aWR0aCwgaGVpZ2h0LCBwaXhlbFJhdGlvLCBzb3VyY2VSZXNvbHV0aW9uLCBzb3VyY2VFeHRlbnQsIHRhcmdldFJlc29sdXRpb24sIHRhcmdldEV4dGVudCwgdHJpYW5ndWxhdGlvbiwgc291cmNlcywgZ3V0dGVyLCBvcHRfcmVuZGVyRWRnZXMsIG9wdF9pbnRlcnBvbGF0ZSkge1xuICAgIHZhciBjb250ZXh0ID0gY3JlYXRlQ2FudmFzQ29udGV4dDJEKE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHdpZHRoKSwgTWF0aC5yb3VuZChwaXhlbFJhdGlvICogaGVpZ2h0KSk7XG4gICAgaWYgKCFvcHRfaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgYXNzaWduKGNvbnRleHQsIElNQUdFX1NNT09USElOR19ESVNBQkxFRCk7XG4gICAgfVxuICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG4gICAgfVxuICAgIGNvbnRleHQuc2NhbGUocGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG4gICAgZnVuY3Rpb24gcGl4ZWxSb3VuZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHBpeGVsUmF0aW8pIC8gcGl4ZWxSYXRpbztcbiAgICB9XG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG4gICAgdmFyIHNvdXJjZURhdGFFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc3JjLCBpLCBhcnIpIHtcbiAgICAgICAgZXh0ZW5kKHNvdXJjZURhdGFFeHRlbnQsIHNyYy5leHRlbnQpO1xuICAgIH0pO1xuICAgIHZhciBjYW52YXNXaWR0aEluVW5pdHMgPSBnZXRXaWR0aChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgY2FudmFzSGVpZ2h0SW5Vbml0cyA9IGdldEhlaWdodChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgc3RpdGNoQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzV2lkdGhJblVuaXRzKSAvIHNvdXJjZVJlc29sdXRpb24pLCBNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzSGVpZ2h0SW5Vbml0cykgLyBzb3VyY2VSZXNvbHV0aW9uKSk7XG4gICAgaWYgKCFvcHRfaW50ZXJwb2xhdGUpIHtcbiAgICAgICAgYXNzaWduKHN0aXRjaENvbnRleHQsIElNQUdFX1NNT09USElOR19ESVNBQkxFRCk7XG4gICAgfVxuICAgIHZhciBzdGl0Y2hTY2FsZSA9IHBpeGVsUmF0aW8gLyBzb3VyY2VSZXNvbHV0aW9uO1xuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc3JjLCBpLCBhcnIpIHtcbiAgICAgICAgdmFyIHhQb3MgPSBzcmMuZXh0ZW50WzBdIC0gc291cmNlRGF0YUV4dGVudFswXTtcbiAgICAgICAgdmFyIHlQb3MgPSAtKHNyYy5leHRlbnRbM10gLSBzb3VyY2VEYXRhRXh0ZW50WzNdKTtcbiAgICAgICAgdmFyIHNyY1dpZHRoID0gZ2V0V2lkdGgoc3JjLmV4dGVudCk7XG4gICAgICAgIHZhciBzcmNIZWlnaHQgPSBnZXRIZWlnaHQoc3JjLmV4dGVudCk7XG4gICAgICAgIC8vIFRoaXMgdGVzdCBzaG91bGQgbmV2ZXIgZmFpbCAtLSBidXQgaXQgZG9lcy4gTmVlZCB0byBmaW5kIGEgZml4IHRoZSB1cHN0cmVhbSBjb25kaXRpb25cbiAgICAgICAgaWYgKHNyYy5pbWFnZS53aWR0aCA+IDAgJiYgc3JjLmltYWdlLmhlaWdodCA+IDApIHtcbiAgICAgICAgICAgIHN0aXRjaENvbnRleHQuZHJhd0ltYWdlKHNyYy5pbWFnZSwgZ3V0dGVyLCBndXR0ZXIsIHNyYy5pbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIHNyYy5pbWFnZS5oZWlnaHQgLSAyICogZ3V0dGVyLCB4UG9zICogc3RpdGNoU2NhbGUsIHlQb3MgKiBzdGl0Y2hTY2FsZSwgc3JjV2lkdGggKiBzdGl0Y2hTY2FsZSwgc3JjSGVpZ2h0ICogc3RpdGNoU2NhbGUpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgdmFyIHRhcmdldFRvcExlZnQgPSBnZXRUb3BMZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgdHJpYW5ndWxhdGlvbi5nZXRUcmlhbmdsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgIC8qIENhbGN1bGF0ZSBhZmZpbmUgdHJhbnNmb3JtIChzcmMgLT4gZHN0KVxuICAgICAgICAgKiBSZXN1bHRpbmcgbWF0cml4IGNhbiBiZSB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZGluYXRlXG4gICAgICAgICAqIGZyb20gYHNvdXJjZVByb2plY3Rpb25gIHRvIGRlc3RpbmF0aW9uIHBpeGVscy5cbiAgICAgICAgICpcbiAgICAgICAgICogVG8gb3B0aW1pemUgbnVtYmVyIG9mIGNvbnRleHQgY2FsbHMgYW5kIGluY3JlYXNlIG51bWVyaWNhbCBzdGFiaWxpdHksXG4gICAgICAgICAqIHdlIGFsc28gZG8gdGhlIGZvbGxvd2luZyBvcGVyYXRpb25zOlxuICAgICAgICAgKiB0cmFucygtdG9wTGVmdEV4dGVudENvcm5lciksIHNjYWxlKDEgLyB0YXJnZXRSZXNvbHV0aW9uKSwgc2NhbGUoMSwgLTEpXG4gICAgICAgICAqIGhlcmUgYmVmb3JlIHNvbHZpbmcgdGhlIGxpbmVhciBzeXN0ZW0gc28gW3VpLCB2aV0gYXJlIHBpeGVsIGNvb3JkaW5hdGVzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBTcmMgcG9pbnRzOiB4aSwgeWlcbiAgICAgICAgICogRHN0IHBvaW50czogdWksIHZpXG4gICAgICAgICAqIEFmZmluZSBjb2VmZmljaWVudHM6IGFpalxuICAgICAgICAgKlxuICAgICAgICAgKiB8IHgwIHkwIDEgIDAgIDAgMCB8ICAgfGEwMHwgICB8dTB8XG4gICAgICAgICAqIHwgeDEgeTEgMSAgMCAgMCAwIHwgICB8YTAxfCAgIHx1MXxcbiAgICAgICAgICogfCB4MiB5MiAxICAwICAwIDAgfCB4IHxhMDJ8ID0gfHUyfFxuICAgICAgICAgKiB8ICAwICAwIDAgeDAgeTAgMSB8ICAgfGExMHwgICB8djB8XG4gICAgICAgICAqIHwgIDAgIDAgMCB4MSB5MSAxIHwgICB8YTExfCAgIHx2MXxcbiAgICAgICAgICogfCAgMCAgMCAwIHgyIHkyIDEgfCAgIHxhMTJ8ICAgfHYyfFxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHNvdXJjZSA9IHRyaWFuZ2xlLnNvdXJjZTtcbiAgICAgICAgdmFyIHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgICAgdmFyIHgwID0gc291cmNlWzBdWzBdLCB5MCA9IHNvdXJjZVswXVsxXTtcbiAgICAgICAgdmFyIHgxID0gc291cmNlWzFdWzBdLCB5MSA9IHNvdXJjZVsxXVsxXTtcbiAgICAgICAgdmFyIHgyID0gc291cmNlWzJdWzBdLCB5MiA9IHNvdXJjZVsyXVsxXTtcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgZXZlcnl0aGluZyBpcyBvbiBwaXhlbCBib3VuZGFyaWVzXG4gICAgICAgIHZhciB1MCA9IHBpeGVsUm91bmQoKHRhcmdldFswXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2MCA9IHBpeGVsUm91bmQoLSh0YXJnZXRbMF1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdTEgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdjEgPSBwaXhlbFJvdW5kKC0odGFyZ2V0WzFdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHUyID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzJdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHYyID0gcGl4ZWxSb3VuZCgtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIC8vIFNoaWZ0IGFsbCB0aGUgc291cmNlIHBvaW50cyB0byBpbXByb3ZlIG51bWVyaWNhbCBzdGFiaWxpdHlcbiAgICAgICAgLy8gb2YgYWxsIHRoZSBzdWJzZXF1ZW50IGNhbGN1bGF0aW9ucy4gVGhlIFt4MCwgeTBdIGlzIHVzZWQgaGVyZS5cbiAgICAgICAgLy8gVGhpcyBpcyBhbHNvIHVzZWQgdG8gc2ltcGxpZnkgdGhlIGxpbmVhciBzeXN0ZW0uXG4gICAgICAgIHZhciBzb3VyY2VOdW1lcmljYWxTaGlmdFggPSB4MDtcbiAgICAgICAgdmFyIHNvdXJjZU51bWVyaWNhbFNoaWZ0WSA9IHkwO1xuICAgICAgICB4MCA9IDA7XG4gICAgICAgIHkwID0gMDtcbiAgICAgICAgeDEgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgICAgICB5MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG4gICAgICAgIHgyIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WDtcbiAgICAgICAgeTIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRZO1xuICAgICAgICB2YXIgYXVnbWVudGVkTWF0cml4ID0gW1xuICAgICAgICAgICAgW3gxLCB5MSwgMCwgMCwgdTEgLSB1MF0sXG4gICAgICAgICAgICBbeDIsIHkyLCAwLCAwLCB1MiAtIHUwXSxcbiAgICAgICAgICAgIFswLCAwLCB4MSwgeTEsIHYxIC0gdjBdLFxuICAgICAgICAgICAgWzAsIDAsIHgyLCB5MiwgdjIgLSB2MF0sXG4gICAgICAgIF07XG4gICAgICAgIHZhciBhZmZpbmVDb2VmcyA9IHNvbHZlTGluZWFyU3lzdGVtKGF1Z21lbnRlZE1hdHJpeCk7XG4gICAgICAgIGlmICghYWZmaW5lQ29lZnMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgaWYgKGlzQnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoKSB8fCAhb3B0X2ludGVycG9sYXRlKSB7XG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBhbGwgbGluZXMgYXJlIGhvcml6b250YWwgb3IgdmVydGljYWxcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBkaWFnb25hbCBsaW5lLiBEbyBpdCBpbiA0IHN0ZXBzXG4gICAgICAgICAgICB2YXIgc3RlcHMgPSA0O1xuICAgICAgICAgICAgdmFyIHVkID0gdTAgLSB1MTtcbiAgICAgICAgICAgIHZhciB2ZCA9IHYwIC0gdjE7XG4gICAgICAgICAgICBmb3IgKHZhciBzdGVwID0gMDsgc3RlcCA8IHN0ZXBzOyBzdGVwKyspIHtcbiAgICAgICAgICAgICAgICAvLyBHbyBob3Jpem9udGFsbHlcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB1ZCkgLyBzdGVwcyksIHYxICsgcGl4ZWxSb3VuZCgoc3RlcCAqIHZkKSAvIChzdGVwcyAtIDEpKSk7XG4gICAgICAgICAgICAgICAgLy8gR28gdmVydGljYWxseVxuICAgICAgICAgICAgICAgIGlmIChzdGVwICE9IHN0ZXBzIC0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB1ZCkgLyBzdGVwcyksIHYxICsgcGl4ZWxSb3VuZCgoKHN0ZXAgKyAxKSAqIHZkKSAvIChzdGVwcyAtIDEpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gV2UgYXJlIGFsbW9zdCBhdCB1MHIsIHYwclxuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MCwgdjApO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICAgICAgY29udGV4dC50cmFuc2Zvcm0oYWZmaW5lQ29lZnNbMF0sIGFmZmluZUNvZWZzWzJdLCBhZmZpbmVDb2Vmc1sxXSwgYWZmaW5lQ29lZnNbM10sIHUwLCB2MCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHNvdXJjZURhdGFFeHRlbnRbMF0gLSBzb3VyY2VOdW1lcmljYWxTaGlmdFgsIHNvdXJjZURhdGFFeHRlbnRbM10gLSBzb3VyY2VOdW1lcmljYWxTaGlmdFkpO1xuICAgICAgICBjb250ZXh0LnNjYWxlKHNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvLCAtc291cmNlUmVzb2x1dGlvbiAvIHBpeGVsUmF0aW8pO1xuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShzdGl0Y2hDb250ZXh0LmNhbnZhcywgMCwgMCk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH0pO1xuICAgIGlmIChvcHRfcmVuZGVyRWRnZXMpIHtcbiAgICAgICAgY29udGV4dC5zYXZlKCk7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcbiAgICAgICAgdHJpYW5ndWxhdGlvbi5nZXRUcmlhbmdsZXMoKS5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgICAgICAgICAgdmFyIHUwID0gKHRhcmdldFswXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2MCA9IC0odGFyZ2V0WzBdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHUxID0gKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2MSA9IC0odGFyZ2V0WzFdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHUyID0gKHRhcmdldFsyXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2MiA9IC0odGFyZ2V0WzJdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGNvbnRleHQubW92ZVRvKHUxLCB2MSk7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVUbyh1MCwgdjApO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTIsIHYyKTtcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHJldHVybiBjb250ZXh0LmNhbnZhcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJlcHJvai5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9UaWxlXG4gKi9cbmltcG9ydCB7IEVSUk9SX1RIUkVTSE9MRCB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZSBmcm9tICcuLi9UaWxlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBUcmlhbmd1bGF0aW9uIGZyb20gJy4vVHJpYW5ndWxhdGlvbi5qcyc7XG5pbXBvcnQgeyBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uLCByZW5kZXIgYXMgcmVuZGVyUmVwcm9qZWN0ZWQsIH0gZnJvbSAnLi4vcmVwcm9qLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXRBcmVhLCBnZXRJbnRlcnNlY3Rpb24gfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcikgOiBpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IEZ1bmN0aW9uVHlwZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENsYXNzIGVuY2Fwc3VsYXRpbmcgc2luZ2xlIHJlcHJvamVjdGVkIHRpbGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZUltYWdlflRpbGVJbWFnZX0uXG4gKlxuICovXG52YXIgUmVwcm9qVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVwcm9qVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gc291cmNlVGlsZUdyaWQgU291cmNlIHRpbGUgZ3JpZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSB0YXJnZXRQcm9qIFRhcmdldCBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGFyZ2V0VGlsZUdyaWQgVGFyZ2V0IHRpbGUgZ3JpZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBDb29yZGluYXRlIG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gd3JhcHBlZFRpbGVDb29yZCBDb29yZGluYXRlIG9mIHRoZSB0aWxlIHdyYXBwZWQgaW4gWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZ3V0dGVyIEd1dHRlciBvZiB0aGUgc291cmNlIHRpbGVzLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb25UeXBlfSBnZXRUaWxlRnVuY3Rpb25cbiAgICAgKiAgICAgRnVuY3Rpb24gcmV0dXJuaW5nIHNvdXJjZSB0aWxlcyAoeiwgeCwgeSwgcGl4ZWxSYXRpbykuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZXJyb3JUaHJlc2hvbGRdIEFjY2VwdGFibGUgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBweCkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JlbmRlckVkZ2VzXSBSZW5kZXIgcmVwcm9qZWN0aW9uIGVkZ2VzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pbnRlcnBvbGF0ZV0gVXNlIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdoZW4gcmVzYW1wbGluZy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZXByb2pUaWxlKHNvdXJjZVByb2osIHNvdXJjZVRpbGVHcmlkLCB0YXJnZXRQcm9qLCB0YXJnZXRUaWxlR3JpZCwgdGlsZUNvb3JkLCB3cmFwcGVkVGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBndXR0ZXIsIGdldFRpbGVGdW5jdGlvbiwgb3B0X2Vycm9yVGhyZXNob2xkLCBvcHRfcmVuZGVyRWRnZXMsIG9wdF9pbnRlcnBvbGF0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0aWxlQ29vcmQsIFRpbGVTdGF0ZS5JRExFLCB7IGludGVycG9sYXRlOiAhIW9wdF9pbnRlcnBvbGF0ZSB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJFZGdlc18gPSBvcHRfcmVuZGVyRWRnZXMgIT09IHVuZGVmaW5lZCA/IG9wdF9yZW5kZXJFZGdlcyA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ndXR0ZXJfID0gZ3V0dGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FudmFzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVHcmlkXyA9IHNvdXJjZVRpbGVHcmlkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRUaWxlR3JpZF8gPSB0YXJnZXRUaWxlR3JpZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcHBlZFRpbGVDb29yZF8gPSB3cmFwcGVkVGlsZUNvb3JkID8gd3JhcHBlZFRpbGVDb29yZCA6IHRpbGVDb29yZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VaXyA9IDA7XG4gICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0YXJnZXRUaWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQoX3RoaXMud3JhcHBlZFRpbGVDb29yZF8pO1xuICAgICAgICB2YXIgbWF4VGFyZ2V0RXh0ZW50ID0gX3RoaXMudGFyZ2V0VGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbWF4U291cmNlRXh0ZW50ID0gX3RoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbGltaXRlZFRhcmdldEV4dGVudCA9IG1heFRhcmdldEV4dGVudFxuICAgICAgICAgICAgPyBnZXRJbnRlcnNlY3Rpb24odGFyZ2V0RXh0ZW50LCBtYXhUYXJnZXRFeHRlbnQpXG4gICAgICAgICAgICA6IHRhcmdldEV4dGVudDtcbiAgICAgICAgaWYgKGdldEFyZWEobGltaXRlZFRhcmdldEV4dGVudCkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFRpbGUgaXMgY29tcGxldGVseSBvdXRzaWRlIHJhbmdlIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBUT0RPOiBpcyBpdCBhY3R1YWxseSBjb3JyZWN0IHRoYXQgdGhlIHNvdXJjZSBldmVuIGNyZWF0ZXMgdGhlIHRpbGUgP1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZVByb2pFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICBpZiAoc291cmNlUHJvakV4dGVudCkge1xuICAgICAgICAgICAgaWYgKCFtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgICAgICAgICBtYXhTb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qRXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKG1heFNvdXJjZUV4dGVudCwgc291cmNlUHJvakV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldFJlc29sdXRpb24gPSB0YXJnZXRUaWxlR3JpZC5nZXRSZXNvbHV0aW9uKF90aGlzLndyYXBwZWRUaWxlQ29vcmRfWzBdKTtcbiAgICAgICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoIWlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pIHx8IHNvdXJjZVJlc29sdXRpb24gPD0gMCkge1xuICAgICAgICAgICAgLy8gaW52YWxpZCBzb3VyY2VSZXNvbHV0aW9uIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBwcm9iYWJseSBlZGdlcyBvZiB0aGUgcHJvamVjdGlvbnMgd2hlbiBubyBleHRlbnQgaXMgZGVmaW5lZFxuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVycm9yVGhyZXNob2xkSW5QaXhlbHMgPSBvcHRfZXJyb3JUaHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdF9lcnJvclRocmVzaG9sZCA6IEVSUk9SX1RIUkVTSE9MRDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshaW1wb3J0KFwiLi9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmlhbmd1bGF0aW9uXyA9IG5ldyBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgc291cmNlUmVzb2x1dGlvbiAqIGVycm9yVGhyZXNob2xkSW5QaXhlbHMsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoX3RoaXMudHJpYW5ndWxhdGlvbl8uZ2V0VHJpYW5nbGVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBubyB2YWxpZCB0cmlhbmdsZXMgLT4gRU1QVFlcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNvdXJjZVpfID0gc291cmNlVGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24oc291cmNlUmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzb3VyY2VFeHRlbnQgPSBfdGhpcy50cmlhbmd1bGF0aW9uXy5jYWxjdWxhdGVTb3VyY2VFeHRlbnQoKTtcbiAgICAgICAgaWYgKG1heFNvdXJjZUV4dGVudCkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFsxXSA9IGNsYW1wKHNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFszXSA9IGNsYW1wKHNvdXJjZUV4dGVudFszXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKHNvdXJjZUV4dGVudCwgbWF4U291cmNlRXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdldEFyZWEoc291cmNlRXh0ZW50KSkge1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc291cmNlUmFuZ2UgPSBzb3VyY2VUaWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHNvdXJjZUV4dGVudCwgX3RoaXMuc291cmNlWl8pO1xuICAgICAgICAgICAgZm9yICh2YXIgc3JjWCA9IHNvdXJjZVJhbmdlLm1pblg7IHNyY1ggPD0gc291cmNlUmFuZ2UubWF4WDsgc3JjWCsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3JjWSA9IHNvdXJjZVJhbmdlLm1pblk7IHNyY1kgPD0gc291cmNlUmFuZ2UubWF4WTsgc3JjWSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWxlID0gZ2V0VGlsZUZ1bmN0aW9uKF90aGlzLnNvdXJjZVpfLCBzcmNYLCBzcmNZLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgSFRNTCBDYW52YXMgZWxlbWVudCBmb3IgdGhpcyB0aWxlLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMuXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLnJlcHJvamVjdF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgaWYgKHRpbGUgJiYgdGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBleHRlbnQ6IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFRpbGVDb29yZEV4dGVudCh0aWxlLnRpbGVDb29yZCksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB0aWxlLmdldEltYWdlKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB6ID0gdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXTtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZVNpemUoeik7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVswXTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVsxXTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRSZXNvbHV0aW9uID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih0aGlzLnNvdXJjZVpfKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGhpcy53cmFwcGVkVGlsZUNvb3JkXyk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhc18gPSByZW5kZXJSZXByb2plY3RlZCh3aWR0aCwgaGVpZ2h0LCB0aGlzLnBpeGVsUmF0aW9fLCBzb3VyY2VSZXNvbHV0aW9uLCB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRFeHRlbnQoKSwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0RXh0ZW50LCB0aGlzLnRyaWFuZ3VsYXRpb25fLCBzb3VyY2VzLCB0aGlzLmd1dHRlcl8sIHRoaXMucmVuZGVyRWRnZXNfLCB0aGlzLmludGVycG9sYXRlKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdmFyIGxlZnRUb0xvYWRfMSA9IDA7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gW107XG4gICAgICAgICAgICB0aGlzLnNvdXJjZVRpbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0aWxlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5JRExFIHx8IHN0YXRlID09IFRpbGVTdGF0ZS5MT0FESU5HKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnRUb0xvYWRfMSsrO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlTGlzdGVuS2V5XzEgPSBsaXN0ZW4odGlsZSwgRXZlbnRUeXBlLkNIQU5HRSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPT0gVGlsZVN0YXRlLkVNUFRZKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5saXN0ZW5CeUtleShzb3VyY2VMaXN0ZW5LZXlfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdFRvTG9hZF8xLS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRUb0xvYWRfMSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVubGlzdGVuU291cmNlc18oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXByb2plY3RfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXy5wdXNoKHNvdXJjZUxpc3RlbktleV8xKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgaWYgKGxlZnRUb0xvYWRfMSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5yZXByb2plY3RfLmJpbmQodGhpcyksIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlLmxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLnVubGlzdGVuU291cmNlc18gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgfTtcbiAgICByZXR1cm4gUmVwcm9qVGlsZTtcbn0oVGlsZSkpO1xuZXhwb3J0IGRlZmF1bHQgUmVwcm9qVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlcHJvai9jb21tb25cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IG1heGltdW0gYWxsb3dlZCB0aHJlc2hvbGQgIChpbiBwaXhlbHMpIGZvciByZXByb2plY3Rpb25cbiAqIHRyaWFuZ3VsYXRpb24uXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIEVSUk9SX1RIUkVTSE9MRCA9IDAuNTtcbi8qKlxuICogRW5hYmxlIGF1dG9tYXRpYyByZXByb2plY3Rpb24gb2YgcmFzdGVyIHNvdXJjZXMuIERlZmF1bHQgaXMgYHRydWVgLlxuICogVE9ETzogZGVjaWRlIGlmIHdlIHdhbnQgdG8gZXhwb3NlIHRoaXMgYXMgYSBidWlsZCBmbGFnIG9yIHJlbW92ZSBpdFxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gPSB0cnVlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHJ1Y3RzL0xSVUNhY2hlXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFbnRyeVxuICogQHByb3BlcnR5IHtzdHJpbmd9IGtleV8gS2V5LlxuICogQHByb3BlcnR5IHtPYmplY3R9IG5ld2VyIE5ld2VyLlxuICogQHByb3BlcnR5IHtPYmplY3R9IG9sZGVyIE9sZGVyLlxuICogQHByb3BlcnR5IHsqfSB2YWx1ZV8gVmFsdWUuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogSW1wbGVtZW50cyBhIExlYXN0LVJlY2VudGx5LVVzZWQgY2FjaGUgd2hlcmUgdGhlIGtleXMgZG8gbm90IGNvbmZsaWN0IHdpdGhcbiAqIE9iamVjdCdzIHByb3BlcnRpZXMgKGUuZy4gJ2hhc093blByb3BlcnR5JyBpcyBub3QgYWxsb3dlZCBhcyBhIGtleSkuIEV4cGlyaW5nXG4gKiBpdGVtcyBmcm9tIHRoZSBjYWNoZSBpcyB0aGUgcmVzcG9uc2liaWxpdHkgb2YgdGhlIHVzZXIuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0XG4gKiBAdGVtcGxhdGUgVFxuICovXG52YXIgTFJVQ2FjaGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfaGlnaFdhdGVyTWFya10gSGlnaCB3YXRlciBtYXJrLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExSVUNhY2hlKG9wdF9oaWdoV2F0ZXJNYXJrKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXNpcmVkIG1heCBjYWNoZSBzaXplIGFmdGVyIGV4cGlyZUNhY2hlKCkuIElmIHNldCB0byAwLCBubyBjYWNoZSBlbnRyaWVzXG4gICAgICAgICAqIHdpbGwgYmUgcHJ1bmVkIGF0IGFsbC5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9XG4gICAgICAgICAgICBvcHRfaGlnaFdhdGVyTWFyayAhPT0gdW5kZWZpbmVkID8gb3B0X2hpZ2hXYXRlck1hcmsgOiAyMDQ4O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY291bnRfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgRW50cnk+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2xkZXN0XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0VudHJ5fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uZXdlc3RfID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ2FuIGV4cGlyZSBjYWNoZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hXYXRlck1hcmsgPiAwICYmIHRoaXMuZ2V0Q291bnQoKSA+IHRoaXMuaGlnaFdhdGVyTWFyaztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jb3VudF8gPSAwO1xuICAgICAgICB0aGlzLmVudHJpZXNfID0ge307XG4gICAgICAgIHRoaXMub2xkZXN0XyA9IG51bGw7XG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBrZXkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmNvbnRhaW5zS2V5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnRyaWVzXy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihULCBzdHJpbmcsIExSVUNhY2hlPFQ+KTogP30gZiBUaGUgZnVuY3Rpb25cbiAgICAgKiAgICAgdG8gY2FsbCBmb3IgZXZlcnkgZW50cnkgZnJvbSB0aGUgb2xkZXN0IHRvIHRoZSBuZXdlci4gVGhpcyBmdW5jdGlvbiB0YWtlc1xuICAgICAqICAgICAzIGFyZ3VtZW50cyAodGhlIGVudHJ5IHZhbHVlLCB0aGUgZW50cnkga2V5IGFuZCB0aGUgTFJVQ2FjaGUgb2JqZWN0KS5cbiAgICAgKiAgICAgVGhlIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5vbGRlc3RfO1xuICAgICAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgICAgICAgIGYoZW50cnkudmFsdWVfLCBlbnRyeS5rZXlfLCB0aGlzKTtcbiAgICAgICAgICAgIGVudHJ5ID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdF9vcHRpb25zXSBPcHRpb25zIChyZXNlcnZlZCBmb3Igc3ViY2xhc3NlcykuXG4gICAgICogQHJldHVybiB7VH0gVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXksIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgYXNzZXJ0KGVudHJ5ICE9PSB1bmRlZmluZWQsIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgICAgIGlmIChlbnRyeSA9PT0gdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGVudHJ5ID09PSB0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovICh0aGlzLm9sZGVzdF8ubmV3ZXIpO1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfLm9sZGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICAgICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5Lm5ld2VyID0gbnVsbDtcbiAgICAgICAgZW50cnkub2xkZXIgPSB0aGlzLm5ld2VzdF87XG4gICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgICAgICB0aGlzLm5ld2VzdF8gPSBlbnRyeTtcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbiBlbnRyeSBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBlbnRyeSBrZXkuXG4gICAgICogQHJldHVybiB7VH0gVGhlIHJlbW92ZWQgZW50cnkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5lbnRyaWVzX1trZXldO1xuICAgICAgICBhc3NlcnQoZW50cnkgIT09IHVuZGVmaW5lZCwgMTUpOyAvLyBUcmllZCB0byBnZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY2FjaGVcbiAgICAgICAgaWYgKGVudHJ5ID09PSB0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5vbGRlcik7XG4gICAgICAgICAgICBpZiAodGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkubmV3ZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgICAgICBkZWxldGUgdGhpcy5lbnRyaWVzX1trZXldO1xuICAgICAgICAtLXRoaXMuY291bnRfO1xuICAgICAgICByZXR1cm4gZW50cnkudmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBDb3VudC5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvdW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEtleXMuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldEtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXlzID0gbmV3IEFycmF5KHRoaXMuY291bnRfKTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgZW50cnk7XG4gICAgICAgIGZvciAoZW50cnkgPSB0aGlzLm5ld2VzdF87IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm9sZGVyKSB7XG4gICAgICAgICAgICBrZXlzW2krK10gPSBlbnRyeS5rZXlfO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8VD59IFZhbHVlcy5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZ2V0VmFsdWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KHRoaXMuY291bnRfKTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB2YXIgZW50cnk7XG4gICAgICAgIGZvciAoZW50cnkgPSB0aGlzLm5ld2VzdF87IGVudHJ5OyBlbnRyeSA9IGVudHJ5Lm9sZGVyKSB7XG4gICAgICAgICAgICB2YWx1ZXNbaSsrXSA9IGVudHJ5LnZhbHVlXztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7VH0gTGFzdCB2YWx1ZS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0xhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9sZGVzdF8udmFsdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBMYXN0IGtleS5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUucGVla0xhc3RLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9sZGVzdF8ua2V5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUga2V5IG9mIHRoZSBuZXdlc3QgaXRlbSBpbiB0aGUgY2FjaGUuICBUaHJvd3MgaWYgdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG5ld2VzdCBrZXkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtGaXJzdEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV3ZXN0Xy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy5vbGRlc3RfO1xuICAgICAgICBkZWxldGUgdGhpcy5lbnRyaWVzX1tlbnRyeS5rZXlfXTtcbiAgICAgICAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm5ld2VyKTtcbiAgICAgICAgaWYgKCF0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLS10aGlzLmNvdW50XztcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmdldChrZXkpOyAvLyB1cGRhdGUgYG5ld2VzdF9gXG4gICAgICAgIHRoaXMuZW50cmllc19ba2V5XS52YWx1ZV8gPSB2YWx1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5LlxuICAgICAqIEBwYXJhbSB7VH0gdmFsdWUgVmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgIGFzc2VydCghKGtleSBpbiB0aGlzLmVudHJpZXNfKSwgMTYpOyAvLyBUcmllZCB0byBzZXQgYSB2YWx1ZSBmb3IgYSBrZXkgdGhhdCBpcyB1c2VkIGFscmVhZHlcbiAgICAgICAgdmFyIGVudHJ5ID0ge1xuICAgICAgICAgICAga2V5Xzoga2V5LFxuICAgICAgICAgICAgbmV3ZXI6IG51bGwsXG4gICAgICAgICAgICBvbGRlcjogdGhpcy5uZXdlc3RfLFxuICAgICAgICAgICAgdmFsdWVfOiB2YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF0aGlzLm5ld2VzdF8pIHtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0XyA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5uZXdlc3RfLm5ld2VyID0gZW50cnk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgICAgIHRoaXMuZW50cmllc19ba2V5XSA9IGVudHJ5O1xuICAgICAgICArK3RoaXMuY291bnRfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IGEgbWF4aW11bSBudW1iZXIgb2YgZW50cmllcyBmb3IgdGhlIGNhY2hlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzaXplIENhY2hlIHNpemUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gc2l6ZTtcbiAgICB9O1xuICAgIHJldHVybiBMUlVDYWNoZTtcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBMUlVDYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxSVUNhY2hlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlY29vcmRcbiAqL1xuLyoqXG4gKiBBbiBhcnJheSBvZiB0aHJlZSBudW1iZXJzIHJlcHJlc2VudGluZyB0aGUgbG9jYXRpb24gb2YgYSB0aWxlIGluIGEgdGlsZVxuICogZ3JpZC4gVGhlIG9yZGVyIGlzIGB6YCAoem9vbSBsZXZlbCksIGB4YCAoY29sdW1uKSwgYW5kIGB5YCAocm93KS5cbiAqIEB0eXBlZGVmIHtBcnJheTxudW1iZXI+fSBUaWxlQ29vcmRcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gW29wdF90aWxlQ29vcmRdIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUoeiwgeCwgeSwgb3B0X3RpbGVDb29yZCkge1xuICAgIGlmIChvcHRfdGlsZUNvb3JkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3B0X3RpbGVDb29yZFswXSA9IHo7XG4gICAgICAgIG9wdF90aWxlQ29vcmRbMV0gPSB4O1xuICAgICAgICBvcHRfdGlsZUNvb3JkWzJdID0geTtcbiAgICAgICAgcmV0dXJuIG9wdF90aWxlQ29vcmQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW3osIHgsIHldO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXlaWFkoeiwgeCwgeSkge1xuICAgIHJldHVybiB6ICsgJy8nICsgeCArICcvJyArIHk7XG59XG4vKipcbiAqIEdldCB0aGUga2V5IGZvciBhIHRpbGUgY29vcmQuXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRoZSB0aWxlIGNvb3JkLlxuICogQHJldHVybiB7c3RyaW5nfSBLZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRLZXkodGlsZUNvb3JkKSB7XG4gICAgcmV0dXJuIGdldEtleVpYWSh0aWxlQ29vcmRbMF0sIHRpbGVDb29yZFsxXSwgdGlsZUNvb3JkWzJdKTtcbn1cbi8qKlxuICogR2V0IHRoZSB0aWxlIGNhY2hlIGtleSBmb3IgYSB0aWxlIGtleSBvYnRhaW5lZCB0aHJvdWdoIGB0aWxlLmdldEtleSgpYC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlS2V5IFRoZSB0aWxlIGtleS5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNhY2hlIGtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENhY2hlS2V5Rm9yVGlsZUtleSh0aWxlS2V5KSB7XG4gICAgdmFyIF9hID0gdGlsZUtleVxuICAgICAgICAuc3Vic3RyaW5nKHRpbGVLZXkubGFzdEluZGV4T2YoJy8nKSArIDEsIHRpbGVLZXkubGVuZ3RoKVxuICAgICAgICAuc3BsaXQoJywnKVxuICAgICAgICAubWFwKE51bWJlciksIHogPSBfYVswXSwgeCA9IF9hWzFdLCB5ID0gX2FbMl07XG4gICAgcmV0dXJuIGdldEtleVpYWSh6LCB4LCB5KTtcbn1cbi8qKlxuICogR2V0IGEgdGlsZSBjb29yZCBnaXZlbiBhIGtleS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIHRpbGUgY29vcmQga2V5LlxuICogQHJldHVybiB7VGlsZUNvb3JkfSBUaGUgdGlsZSBjb29yZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21LZXkoa2V5KSB7XG4gICAgcmV0dXJuIGtleS5zcGxpdCgnLycpLm1hcChOdW1iZXIpO1xufVxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEhhc2guXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNoKHRpbGVDb29yZCkge1xuICAgIHJldHVybiAodGlsZUNvb3JkWzFdIDw8IHRpbGVDb29yZFswXSkgKyB0aWxlQ29vcmRbMl07XG59XG4vKipcbiAqIEBwYXJhbSB7VGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHshaW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaWxlIGNvb3JkaW5hdGUgaXMgd2l0aGluIGV4dGVudCBhbmQgem9vbSBsZXZlbCByYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdpdGhpbkV4dGVudEFuZFoodGlsZUNvb3JkLCB0aWxlR3JpZCkge1xuICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgIHZhciB4ID0gdGlsZUNvb3JkWzFdO1xuICAgIHZhciB5ID0gdGlsZUNvb3JkWzJdO1xuICAgIGlmICh0aWxlR3JpZC5nZXRNaW5ab29tKCkgPiB6IHx8IHogPiB0aWxlR3JpZC5nZXRNYXhab29tKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgdGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0RnVsbFRpbGVSYW5nZSh6KTtcbiAgICBpZiAoIXRpbGVSYW5nZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0aWxlUmFuZ2UuY29udGFpbnNYWSh4LCB5KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aWxlY29vcmQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9UaWxlQ2FjaGVcbiAqL1xuaW1wb3J0IExSVUNhY2hlIGZyb20gJy4vc3RydWN0cy9MUlVDYWNoZS5qcyc7XG5pbXBvcnQgeyBmcm9tS2V5LCBnZXRLZXkgfSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG52YXIgVGlsZUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlQ2FjaGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGlsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlQ2FjaGUucHJvdG90eXBlLmV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKHVzZWRUaWxlcykge1xuICAgICAgICB3aGlsZSAodGhpcy5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICB2YXIgdGlsZSA9IHRoaXMucGVla0xhc3QoKTtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldEtleSgpIGluIHVzZWRUaWxlcykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3AoKS5yZWxlYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFBydW5lIGFsbCB0aWxlcyBmcm9tIHRoZSBjYWNoZSB0aGF0IGRvbid0IGhhdmUgdGhlIHNhbWUgeiBhcyB0aGUgbmV3ZXN0IHRpbGUuXG4gICAgICovXG4gICAgVGlsZUNhY2hlLnByb3RvdHlwZS5wcnVuZUV4Y2VwdE5ld2VzdFogPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmdldENvdW50KCkgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIga2V5ID0gdGhpcy5wZWVrRmlyc3RLZXkoKTtcbiAgICAgICAgdmFyIHRpbGVDb29yZCA9IGZyb21LZXkoa2V5KTtcbiAgICAgICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodGlsZSkge1xuICAgICAgICAgICAgaWYgKHRpbGUudGlsZUNvb3JkWzBdICE9PSB6KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoZ2V0S2V5KHRpbGUudGlsZUNvb3JkKSk7XG4gICAgICAgICAgICAgICAgdGlsZS5yZWxlYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZUNhY2hlO1xufShMUlVDYWNoZSkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZUNhY2hlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUNhY2hlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1NvdXJjZVxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IFNvdXJjZVN0YXRlIGZyb20gJy4vU3RhdGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi4vcHJvai5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvUGx1Z2dhYmxlTWFwfkZyYW1lU3RhdGV9IGFuZCByZXR1cm5zIGEgc3RyaW5nIG9yXG4gKiBhbiBhcnJheSBvZiBzdHJpbmdzIHJlcHJlc2VudGluZyBzb3VyY2UgYXR0cmlidXRpb25zLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZSk6IChzdHJpbmd8QXJyYXk8c3RyaW5nPil9IEF0dHJpYnV0aW9uXG4gKi9cbi8qKlxuICogQSB0eXBlIHRoYXQgY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBhdHRyaWJ1dGlvbiBpbmZvcm1hdGlvbiBmb3IgZGF0YSBzb3VyY2VzLlxuICpcbiAqIEl0IHJlcHJlc2VudHMgZWl0aGVyXG4gKiAqIGEgc2ltcGxlIHN0cmluZyAoZS5nLiBgJ8KpIEFjbWUgSW5jLidgKVxuICogKiBhbiBhcnJheSBvZiBzaW1wbGUgc3RyaW5ncyAoZS5nLiBgWyfCqSBBY21lIEluYy4nLCAnwqkgQmFjbWUgSW5jLiddYClcbiAqICogYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdHJpbmcgb3IgYXJyYXkgb2Ygc3RyaW5ncyAoe0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufSlcbiAqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfEFycmF5PHN0cmluZz58QXR0cmlidXRpb259IEF0dHJpYnV0aW9uTGlrZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7QXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi4gRGVmYXVsdCBpcyB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZT0ncmVhZHknXSBTdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPWZhbHNlXSBXcmFwWC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPWZhbHNlXSBVc2UgaW50ZXJwb2xhdGVkIHZhbHVlcyB3aGVuIHJlc2FtcGxpbmcuICBCeSBkZWZhdWx0LFxuICogdGhlIG5lYXJlc3QgbmVpZ2hib3IgaXMgdXNlZCB3aGVuIHJlc2FtcGxpbmcuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Ige0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllcn0gc291cmNlcy5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0F0dHJpYnV0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zXyA9IGFkYXB0QXR0cmlidXRpb25zKG9wdGlvbnMuYXR0cmlidXRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZVxuICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuIFNvdXJjZXMgdGhhdCBkZWZlciBsb2FkaW5nIHRvIHRoZVxuICAgICAgICAgKiBtYXAncyB0aWxlIHF1ZXVlIG5ldmVyIHNldCB0aGlzIHRvIGB0cnVlYC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuc3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3RhdGUgOiBTb3VyY2VTdGF0ZS5SRUFEWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcFhfID0gb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcnBvbGF0ZV8gPSAhIW9wdGlvbnMuaW50ZXJwb2xhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zKTp2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld1Jlc29sdmVyID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKEVycm9yKTp2b2lkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld1JlamVjdG9yID0gbnVsbDtcbiAgICAgICAgdmFyIHNlbGYgPSBfdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtQcm9taXNlPGltcG9ydChcIi4uL1ZpZXcuanNcIikuVmlld09wdGlvbnM+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudmlld1Byb21pc2VfID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgc2VsZi52aWV3UmVzb2x2ZXIgPSByZXNvbHZlO1xuICAgICAgICAgICAgc2VsZi52aWV3UmVqZWN0b3IgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYXR0cmlidXRpb24gZnVuY3Rpb24gZm9yIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbiBmdW5jdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHByb2plY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gUHJvamVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPnx1bmRlZmluZWR9IFJlc29sdXRpb25zLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlZpZXdPcHRpb25zPn0gQSBwcm9taXNlIGZvciB2aWV3LXJlbGF0ZWQgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXdQcm9taXNlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSwgc2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1N0YXRlflN0YXRlfSBmb3IgcG9zc2libGUgc3RhdGVzLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBXcmFwIFguXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRXcmFwWCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcFhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVXNlIGxpbmVhciBpbnRlcnBvbGF0aW9uIHdoZW4gcmVzYW1wbGluZy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldEludGVycG9sYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcnBvbGF0ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgdGhlIHNvdXJjZS4gVGhlIHNvdXJjZSB3aWxsIGJlIGNsZWFyZWQsIGFuZCBkYXRhIGZyb20gdGhlIHNlcnZlciB3aWxsIGJlIHJlbG9hZGVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBhdHRyaWJ1dGlvbnMgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9ucyBBdHRyaWJ1dGlvbnMuXG4gICAgICogICAgIENhbiBiZSBwYXNzZWQgYXMgYHN0cmluZ2AsIGBBcnJheTxzdHJpbmc+YCwge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufSxcbiAgICAgKiAgICAgb3IgYHVuZGVmaW5lZGAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuc2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gKGF0dHJpYnV0aW9ucykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbnMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBTb3VyY2U7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogVHVybnMgdGhlIGF0dHJpYnV0aW9ucyBvcHRpb24gaW50byBhbiBhdHRyaWJ1dGlvbnMgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9uTGlrZSBUaGUgYXR0cmlidXRpb24gb3B0aW9uLlxuICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBbiBhdHRyaWJ1dGlvbiBmdW5jdGlvbiAob3IgbnVsbCkuXG4gKi9cbmZ1bmN0aW9uIGFkYXB0QXR0cmlidXRpb25zKGF0dHJpYnV0aW9uTGlrZSkge1xuICAgIGlmICghYXR0cmlidXRpb25MaWtlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbkxpa2UpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGlvbkxpa2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBbYXR0cmlidXRpb25MaWtlXTtcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgU291cmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U291cmNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9UaWxlR3JpZFxuICovXG5pbXBvcnQgVGlsZVJhbmdlLCB7IGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlLCB9IGZyb20gJy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgeyBERUZBVUxUX1RJTEVfU0laRSB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2VpbCwgY2xhbXAsIGZsb29yIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZSwgZ2V0VG9wTGVmdCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVPclVwZGF0ZSBhcyBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBpc1NvcnRlZCwgbGluZWFyRmluZE5lYXJlc3QgfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuLi9zaXplLmpzJztcbi8qKlxuICogQHByaXZhdGVcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICovXG52YXIgdG1wVGlsZUNvb3JkID0gWzAsIDAsIDBdO1xuLyoqXG4gKiBOdW1iZXIgb2YgZGVjaW1hbCBkaWdpdHMgdG8gY29uc2lkZXIgaW4gaW50ZWdlciB2YWx1ZXMgd2hlbiByb3VuZGluZy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBERUNJTUFMUyA9IDU7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBObyB0aWxlcyBvdXRzaWRlIHRoaXNcbiAqIGV4dGVudCB3aWxsIGJlIHJlcXVlc3RlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlfSBzb3VyY2VzLiBXaGVuIG5vIGBvcmlnaW5gIG9yXG4gKiBgb3JpZ2luc2AgYXJlIGNvbmZpZ3VyZWQsIHRoZSBgb3JpZ2luYCB3aWxsIGJlIHNldCB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcmlnaW5dIFRoZSB0aWxlIGdyaWQgb3JpZ2luLCBpLmUuIHdoZXJlIHRoZSBgeGBcbiAqIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCkuIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3RcbiAqIHNwZWNpZmllZCwgYGV4dGVudGAgb3IgYG9yaWdpbnNgIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IFtvcmlnaW5zXSBUaWxlIGdyaWQgb3JpZ2lucywgaS5lLiB3aGVyZVxuICogdGhlIGB4YCBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiBvcmlnaW4uIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3Qgc3BlY2lmaWVkLCBgZXh0ZW50YCBvclxuICogYG9yaWdpbmAgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IHJlc29sdXRpb25zIFJlc29sdXRpb25zLiBUaGUgYXJyYXkgaW5kZXggb2YgZWFjaCByZXNvbHV0aW9uIG5lZWRzXG4gKiB0byBtYXRjaCB0aGUgem9vbSBsZXZlbC4gVGhpcyBtZWFucyB0aGF0IGV2ZW4gaWYgYSBgbWluWm9vbWAgaXMgY29uZmlndXJlZCwgdGhlIHJlc29sdXRpb25zXG4gKiBhcnJheSB3aWxsIGhhdmUgYSBsZW5ndGggb2YgYG1heFpvb20gKyAxYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3NpemVzXSBOdW1iZXIgb2YgdGlsZSByb3dzIGFuZCBjb2x1bW5zXG4gKiBvZiB0aGUgZ3JpZCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBzcGVjaWZpZWQgdGhlIHZhbHVlc1xuICogZGVmaW5lIGVhY2ggem9vbSBsZXZlbCdzIGV4dGVudCB0b2dldGhlciB3aXRoIHRoZSBgb3JpZ2luYCBvciBgb3JpZ2luc2AuXG4gKiBBIGdyaWQgYGV4dGVudGAgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gYWRkaXRpb24sIGFuZCB3aWxsIGZ1cnRoZXIgbGltaXQgdGhlIGV4dGVudFxuICogZm9yIHdoaWNoIHRpbGUgcmVxdWVzdHMgYXJlIG1hZGUgYnkgc291cmNlcy4gSWYgdGhlIGJvdHRvbS1sZWZ0IGNvcm5lciBvZlxuICogYW4gZXh0ZW50IGlzIHVzZWQgYXMgYG9yaWdpbmAgb3IgYG9yaWdpbnNgLCB0aGVuIHRoZSBgeWAgdmFsdWUgbXVzdCBiZVxuICogbmVnYXRpdmUgYmVjYXVzZSBPcGVuTGF5ZXJzIHRpbGUgY29vcmRpbmF0ZXMgdXNlIHRoZSB0b3AgbGVmdCBhcyB0aGUgb3JpZ2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemVdIFRpbGUgc2l6ZS5cbiAqIERlZmF1bHQgaXMgYFsyNTYsIDI1Nl1gLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbdGlsZVNpemVzXSBUaWxlIHNpemVzLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiB0aWxlIHNpemUuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc2V0dGluZyB0aGUgZ3JpZCBwYXR0ZXJuIGZvciBzb3VyY2VzIGFjY2Vzc2luZyB0aWxlZC1pbWFnZVxuICogc2VydmVycy5cbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVHcmlkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBUaWxlIGdyaWQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlR3JpZChvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblpvb20gPSBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIGFzc2VydChpc1NvcnRlZCh0aGlzLnJlc29sdXRpb25zXywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiIC0gYTtcbiAgICAgICAgfSwgdHJ1ZSksIDE3KTsgLy8gYHJlc29sdXRpb25zYCBtdXN0IGJlIHNvcnRlZCBpbiBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlJ3ZlIGdvdCBhIGNvbnNpc3RlbnQgem9vbSBmYWN0b3IgYW5kIG9yaWdpblxuICAgICAgICB2YXIgem9vbUZhY3RvcjtcbiAgICAgICAgaWYgKCFvcHRpb25zLm9yaWdpbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF6b29tRmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXSAhPT0gem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuem9vbUZhY3Rvcl8gPSB6b29tRmFjdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhab29tID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbl8gPSBvcHRpb25zLm9yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcmlnaW4gOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbnNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMub3JpZ2lucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbnNfID0gb3B0aW9ucy5vcmlnaW5zO1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub3JpZ2luc18ubGVuZ3RoID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCwgMjApOyAvLyBOdW1iZXIgb2YgYG9yaWdpbnNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG4gICAgICAgIGlmIChleHRlbnQgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbl8gPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KCghdGhpcy5vcmlnaW5fICYmIHRoaXMub3JpZ2luc18pIHx8ICh0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pLCAxOCk7IC8vIEVpdGhlciBgb3JpZ2luYCBvciBgb3JpZ2luc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplc18gPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy50aWxlU2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy50aWxlU2l6ZXNfID0gb3B0aW9ucy50aWxlU2l6ZXM7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy50aWxlU2l6ZXNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDE5KTsgLy8gTnVtYmVyIG9mIGB0aWxlU2l6ZXNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVTaXplICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMudGlsZVNpemVcbiAgICAgICAgICAgICAgICA6ICF0aGlzLnRpbGVTaXplc19cbiAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX1RJTEVfU0laRVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGFzc2VydCgoIXRoaXMudGlsZVNpemVfICYmIHRoaXMudGlsZVNpemVzXykgfHxcbiAgICAgICAgICAgICh0aGlzLnRpbGVTaXplXyAmJiAhdGhpcy50aWxlU2l6ZXNfKSwgMjIpOyAvLyBFaXRoZXIgYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGhcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHRlbnRfID0gZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBleHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRtcFNpemVfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRtcEV4dGVudF8gPSBbMCwgMCwgMCwgMF07XG4gICAgICAgIGlmIChvcHRpb25zLnNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gb3B0aW9ucy5zaXplcy5tYXAoZnVuY3Rpb24gKHNpemUsIHopIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZVJhbmdlID0gbmV3IFRpbGVSYW5nZShNYXRoLm1pbigwLCBzaXplWzBdKSwgTWF0aC5tYXgoc2l6ZVswXSAtIDEsIC0xKSwgTWF0aC5taW4oMCwgc2l6ZVsxXSksIE1hdGgubWF4KHNpemVbMV0gLSAxLCAtMSkpO1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3RyaWN0ZWRUaWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1pblggPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblgsIHRpbGVSYW5nZS5taW5YKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1heFggPSBNYXRoLm1pbihyZXN0cmljdGVkVGlsZVJhbmdlLm1heFgsIHRpbGVSYW5nZS5tYXhYKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1pblkgPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblksIHRpbGVSYW5nZS5taW5ZKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1heFkgPSBNYXRoLm1pbihyZXN0cmljdGVkVGlsZVJhbmdlLm1heFksIHRpbGVSYW5nZS5tYXhZKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbGVSYW5nZTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dGVudCkge1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVUaWxlUmFuZ2VzXyhleHRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgYSBmdW5jdGlvbiB3aXRoIGVhY2ggdGlsZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIGV4dGVudCBhbmQgem9vbSBsZXZlbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkKTogdm9pZH0gY2FsbGJhY2sgRnVuY3Rpb24gY2FsbGVkIHdpdGggZWFjaCB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5mb3JFYWNoVGlsZUNvb3JkID0gZnVuY3Rpb24gKGV4dGVudCwgem9vbSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVSYW5nZSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHpvb20pO1xuICAgICAgICBmb3IgKHZhciBpID0gdGlsZVJhbmdlLm1pblgsIGlpID0gdGlsZVJhbmdlLm1heFg7IGkgPD0gaWk7ICsraSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IHRpbGVSYW5nZS5taW5ZLCBqaiA9IHRpbGVSYW5nZS5tYXhZOyBqIDw9IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhbem9vbSwgaSwgal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gW29wdF90aWxlUmFuZ2VdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIGNhbGxiYWNrLCBvcHRfdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UsIHgsIHk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXSAtIDE7XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfID09PSAyKSB7XG4gICAgICAgICAgICB4ID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICAgICAgeSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHogPj0gdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHggPSBNYXRoLmZsb29yKHggLyAyKTtcbiAgICAgICAgICAgICAgICB5ID0gTWF0aC5mbG9vcih5IC8gMik7XG4gICAgICAgICAgICAgICAgdGlsZVJhbmdlID0gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoeCwgeCwgeSwgeSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjayh6LCB0aWxlUmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLXo7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLCBpZiBpdCB3YXMgY29uZmlndXJlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNYXggem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW4gem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gT3JpZ2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbnNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3pdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIHJlc29sdXRpb25zIGZvciB0aGUgdGlsZSBncmlkLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbb3B0X3RpbGVSYW5nZV0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfZXh0ZW50XSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgb3B0X3RpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICBpZiAodGlsZUNvb3JkWzBdIDwgdGhpcy5tYXhab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdICogMjtcbiAgICAgICAgICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXSAqIDI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1pblggKyAxLCBtaW5ZLCBtaW5ZICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGlsZUNvb3JkRXh0ZW50ID0gdGhpcy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCBvcHRfZXh0ZW50IHx8IHRoaXMudG1wRXh0ZW50Xyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRpbGVDb29yZEV4dGVudCwgdGlsZUNvb3JkWzBdICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlUmFuZ2VGb3JUaWxlQ29vcmRBbmRaID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgeiwgb3B0X3RpbGVSYW5nZSkge1xuICAgICAgICBpZiAoeiA+IHRoaXMubWF4Wm9vbSB8fCB6IDwgdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZUNvb3JkWiA9IHRpbGVDb29yZFswXTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFggPSB0aWxlQ29vcmRbMV07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gdGlsZUNvb3JkWzJdO1xuICAgICAgICBpZiAoeiA9PT0gdGlsZUNvb3JkWikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHRpbGVDb29yZFgsIHRpbGVDb29yZFksIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfKSB7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgeiAtIHRpbGVDb29yZFopO1xuICAgICAgICAgICAgdmFyIG1pblggPSBNYXRoLmZsb29yKHRpbGVDb29yZFggKiBmYWN0b3IpO1xuICAgICAgICAgICAgdmFyIG1pblkgPSBNYXRoLmZsb29yKHRpbGVDb29yZFkgKiBmYWN0b3IpO1xuICAgICAgICAgICAgaWYgKHogPCB0aWxlQ29vcmRaKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1pblgsIG1pblksIG1pblksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1heFggPSBNYXRoLmZsb29yKGZhY3RvciAqICh0aWxlQ29vcmRYICsgMSkpIC0gMTtcbiAgICAgICAgICAgIHZhciBtYXhZID0gTWF0aC5mbG9vcihmYWN0b3IgKiAodGlsZUNvb3JkWSArIDEpKSAtIDE7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGhpcy50bXBFeHRlbnRfKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHosIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIGEgdGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZVJhbmdlRXh0ZW50ID0gZnVuY3Rpb24gKHosIHRpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG4gICAgICAgIHZhciBtaW5YID0gb3JpZ2luWzBdICsgdGlsZVJhbmdlLm1pblggKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhYID0gb3JpZ2luWzBdICsgKHRpbGVSYW5nZS5tYXhYICsgMSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtaW5ZID0gb3JpZ2luWzFdICsgdGlsZVJhbmdlLm1pblkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhZID0gb3JpZ2luWzFdICsgKHRpbGVSYW5nZS5tYXhZICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHRpbGUgcmFuZ2UgZm9yIHRoZSBnaXZlbiBleHRlbnQgYW5kIGludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgdGlsZSByYW5nZSBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFogPSBmdW5jdGlvbiAoZXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSB0bXBUaWxlQ29vcmQ7XG4gICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMF0sIGV4dGVudFszXSwgeiwgZmFsc2UsIHRpbGVDb29yZCk7XG4gICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFsyXSwgZXh0ZW50WzFdLCB6LCB0cnVlLCB0aWxlQ29vcmQpO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgdGlsZUNvb3JkWzFdLCBtaW5ZLCB0aWxlQ29vcmRbMl0sIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGlsZSBjZW50ZXIuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENlbnRlciA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb3JpZ2luWzBdICsgKHRpbGVDb29yZFsxXSArIDAuNSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb24sXG4gICAgICAgICAgICBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMC41KSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbixcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIGEgdGlsZSBjb29yZGluYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIFRlbXBvcmFyeSBleHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEV4dGVudCA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgbWluWCA9IG9yaWdpblswXSArIHRpbGVDb29yZFsxXSAqIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1pblkgPSBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhYID0gbWluWCArIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1heFkgPSBtaW5ZICsgdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhlIGdpdmVuIG1hcCBjb29yZGluYXRlIGFuZCByZXNvbHV0aW9uLiAgVGhpc1xuICAgICAqIG1ldGhvZCBjb25zaWRlcnMgdGhhdCBjb29yZGluYXRlcyB0aGF0IGludGVyc2VjdCB0aWxlIGJvdW5kYXJpZXMgc2hvdWxkIGJlXG4gICAgICogYXNzaWduZWQgdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyhjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCByZXNvbHV0aW9uLCBmYWxzZSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZm9yIHJlc29sdXRpb25zIHRoYXQgY29ycmVzcG9uZFxuICAgICAqIHRvIGFuIGludGVnZXIgem9vbSBsZXZlbC4gIEluc3RlYWQgY2FsbCB0aGUgYGdldFRpbGVDb29yZEZvclhZQW5kWl9gIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiAoZm9yIGEgbm9uLWludGVnZXIgem9vbSBsZXZlbCkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8gPSBmdW5jdGlvbiAoeCwgeSwgcmVzb2x1dGlvbiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICB2YXIgeiA9IHRoaXMuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzY2FsZSA9IHJlc29sdXRpb24gLyB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWCA9IChzY2FsZSAqICh4IC0gb3JpZ2luWzBdKSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gKHNjYWxlICogKG9yaWdpblsxXSAtIHkpKSAvIHJlc29sdXRpb24gLyB0aWxlU2l6ZVsxXTtcbiAgICAgICAgaWYgKHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kpIHtcbiAgICAgICAgICAgIHRpbGVDb29yZFggPSBjZWlsKHRpbGVDb29yZFgsIERFQ0lNQUxTKSAtIDE7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gY2VpbCh0aWxlQ29vcmRZLCBERUNJTUFMUykgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IGZsb29yKHRpbGVDb29yZFgsIERFQ0lNQUxTKTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBmbG9vcih0aWxlQ29vcmRZLCBERUNJTUFMUyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkKHosIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlQ29vcmQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWx0aG91Z2ggdGhlcmUgaXMgcmVwZXRpdGlvbiBiZXR3ZWVuIHRoaXMgbWV0aG9kIGFuZCBgZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uX2AsXG4gICAgICogdGhleSBzaG91bGQgaGF2ZSBzZXBhcmF0ZSBpbXBsZW1lbnRhdGlvbnMuICBUaGlzIG1ldGhvZCBpcyBmb3IgaW50ZWdlciB6b29tXG4gICAgICogbGV2ZWxzLiAgVGhlIG90aGVyIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZm9yIHJlc29sdXRpb25zIGNvcnJlc3BvbmRpbmdcbiAgICAgKiB0byBub24taW50ZWdlciB6b29tIGxldmVscy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBNYXAgeCBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IE1hcCB5IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSBJbnN0ZWFkIG9mIGxldHRpbmcgZWRnZVxuICAgICAqICAgICBpbnRlcnNlY3Rpb25zIGdvIHRvIHRoZSBoaWdoZXIgdGlsZSBjb29yZGluYXRlLCBsZXQgZWRnZSBpbnRlcnNlY3Rpb25zXG4gICAgICogICAgIGdvIHRvIHRoZSBsb3dlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfID0gZnVuY3Rpb24gKHgsIHksIHosIHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3ksIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHopO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWCA9ICh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gLyB0aWxlU2l6ZVswXTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFkgPSAob3JpZ2luWzFdIC0geSkgLyByZXNvbHV0aW9uIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gY2VpbCh0aWxlQ29vcmRYLCBERUNJTUFMUykgLSAxO1xuICAgICAgICAgICAgdGlsZUNvb3JkWSA9IGNlaWwodGlsZUNvb3JkWSwgREVDSU1BTFMpIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZFggPSBmbG9vcih0aWxlQ29vcmRYLCBERUNJTUFMUyk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gZmxvb3IodGlsZUNvb3JkWSwgREVDSU1BTFMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZVRpbGVDb29yZCh6LCB0aWxlQ29vcmRYLCB0aWxlQ29vcmRZLCBvcHRfdGlsZUNvb3JkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHRpbGUgY29vcmRpbmF0ZSBnaXZlbiBhIG1hcCBjb29yZGluYXRlIGFuZCB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBEZXN0aW5hdGlvbiBpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JDb29yZEFuZFogPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgeiwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0sIHosIGZhbHNlLCBvcHRfdGlsZUNvb3JkKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcmVzb2x1dGlvbi5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3RpbGVDb29yZFswXV07XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgc2l6ZSBmb3IgYSB6b29tIGxldmVsLiBUaGUgdHlwZSBvZiB0aGUgcmV0dXJuIHZhbHVlIG1hdGNoZXMgdGhlXG4gICAgICogYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCB0aGF0IHRoZSB0aWxlIGdyaWQgd2FzIGNvbmZpZ3VyZWQgd2l0aC4gVG8gYWx3YXlzXG4gICAgICogZ2V0IGFuIGBpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemVgLCBydW4gdGhlIHJlc3VsdCB0aHJvdWdoIGBpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemUudG9TaXplKClgLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gICAgICogQHJldHVybiB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gVGlsZSBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZVNpemUgPSBmdW5jdGlvbiAoeikge1xuICAgICAgICBpZiAodGhpcy50aWxlU2l6ZV8pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVTaXplXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVTaXplc19bel07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IEV4dGVudCB0aWxlIHJhbmdlIGZvciB0aGUgc3BlY2lmaWVkIHpvb20gbGV2ZWwuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldEZ1bGxUaWxlUmFuZ2UgPSBmdW5jdGlvbiAoeikge1xuICAgICAgICBpZiAoIXRoaXMuZnVsbFRpbGVSYW5nZXNfKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leHRlbnRfXG4gICAgICAgICAgICAgICAgPyB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGhpcy5leHRlbnRfLCB6KVxuICAgICAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bGxUaWxlUmFuZ2VzX1t6XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFtvcHRfZGlyZWN0aW9uXVxuICAgICAqICAgICBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgKiAgICAgSWYgMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gKGxvd2VyIFopIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZVxuICAgICAqICAgICBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb24gKGhpZ2hlciBaKSB3aWxsIGJlIHVzZWQuIERlZmF1bHQgaXMgMC5cbiAgICAgKiAgICAgVXNlIGEge0BsaW5rIG1vZHVsZTpvbC9hcnJheX5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IGZvciBtb3JlIHByZWNpc2UgY29udHJvbC5cbiAgICAgKlxuICAgICAqIEZvciBleGFtcGxlIHRvIGNoYW5nZSB0aWxlIFogYXQgdGhlIG1pZHBvaW50IG9mIHpvb20gbGV2ZWxzXG4gICAgICogYGBganNcbiAgICAgKiBmdW5jdGlvbih2YWx1ZSwgaGlnaCwgbG93KSB7XG4gICAgICogICByZXR1cm4gdmFsdWUgLSBsb3cgKiBNYXRoLnNxcnQoaGlnaCAvIGxvdyk7XG4gICAgICogfVxuICAgICAqIGBgYFxuICAgICAqIEByZXR1cm4ge251bWJlcn0gWi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFpGb3JSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24pIHtcbiAgICAgICAgdmFyIHogPSBsaW5lYXJGaW5kTmVhcmVzdCh0aGlzLnJlc29sdXRpb25zXywgcmVzb2x1dGlvbiwgb3B0X2RpcmVjdGlvbiB8fCAwKTtcbiAgICAgICAgcmV0dXJuIGNsYW1wKHosIHRoaXMubWluWm9vbSwgdGhpcy5tYXhab29tKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IWltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmNhbGN1bGF0ZVRpbGVSYW5nZXNfID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoO1xuICAgICAgICB2YXIgZnVsbFRpbGVSYW5nZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgZm9yICh2YXIgeiA9IHRoaXMubWluWm9vbTsgeiA8IGxlbmd0aDsgKyt6KSB7XG4gICAgICAgICAgICBmdWxsVGlsZVJhbmdlc1t6XSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHopO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gZnVsbFRpbGVSYW5nZXM7XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZUdyaWQ7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZUdyaWQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlR3JpZC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWdyaWRcbiAqL1xuaW1wb3J0IENvcm5lciBmcm9tICcuL2V4dGVudC9Db3JuZXIuanMnO1xuaW1wb3J0IFRpbGVHcmlkIGZyb20gJy4vdGlsZWdyaWQvVGlsZUdyaWQuanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgeyBERUZBVUxUX01BWF9aT09NLCBERUZBVUxUX1RJTEVfU0laRSB9IGZyb20gJy4vdGlsZWdyaWQvY29tbW9uLmpzJztcbmltcG9ydCB7IE1FVEVSU19QRVJfVU5JVCwgZ2V0IGFzIGdldFByb2plY3Rpb24gfSBmcm9tICcuL3Byb2ouanMnO1xuaW1wb3J0IHsgY29udGFpbnNDb29yZGluYXRlLCBjcmVhdGVPclVwZGF0ZSwgZ2V0Q29ybmVyLCBnZXRIZWlnaHQsIGdldFdpZHRoLCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IHRvU2l6ZSB9IGZyb20gJy4vc2l6ZS5qcyc7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBEZWZhdWx0IHRpbGUgZ3JpZCBmb3IgdGhlXG4gKiBwYXNzZWQgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZvclByb2plY3Rpb24ocHJvamVjdGlvbikge1xuICAgIHZhciB0aWxlR3JpZCA9IHByb2plY3Rpb24uZ2V0RGVmYXVsdFRpbGVHcmlkKCk7XG4gICAgaWYgKCF0aWxlR3JpZCkge1xuICAgICAgICB0aWxlR3JpZCA9IGNyZWF0ZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHByb2plY3Rpb24uc2V0RGVmYXVsdFRpbGVHcmlkKHRpbGVHcmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIHRpbGVHcmlkO1xufVxuLyoqXG4gKiBAcGFyYW0ge1RpbGVHcmlkfSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3cmFwWCh0aWxlR3JpZCwgdGlsZUNvb3JkLCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHogPSB0aWxlQ29vcmRbMF07XG4gICAgdmFyIGNlbnRlciA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENlbnRlcih0aWxlQ29vcmQpO1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgaWYgKCFjb250YWluc0Nvb3JkaW5hdGUocHJvamVjdGlvbkV4dGVudCwgY2VudGVyKSkge1xuICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICB2YXIgd29ybGRzQXdheSA9IE1hdGguY2VpbCgocHJvamVjdGlvbkV4dGVudFswXSAtIGNlbnRlclswXSkgLyB3b3JsZFdpZHRoKTtcbiAgICAgICAgY2VudGVyWzBdICs9IHdvcmxkV2lkdGggKiB3b3JsZHNBd2F5O1xuICAgICAgICByZXR1cm4gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKGNlbnRlciwgeik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGlsZUNvb3JkO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9tYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQvQ29ybmVyLmpzXCIpLmRlZmF1bHR9IFtvcHRfY29ybmVyXSBFeHRlbnQgY29ybmVyIChkZWZhdWx0IGlzIGAndG9wLWxlZnQnYCkuXG4gKiBAcmV0dXJuIHshVGlsZUdyaWR9IFRpbGVHcmlkIGluc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRm9yRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X2Nvcm5lcikge1xuICAgIHZhciBjb3JuZXIgPSBvcHRfY29ybmVyICE9PSB1bmRlZmluZWQgPyBvcHRfY29ybmVyIDogQ29ybmVyLlRPUF9MRUZUO1xuICAgIHZhciByZXNvbHV0aW9ucyA9IHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUpO1xuICAgIHJldHVybiBuZXcgVGlsZUdyaWQoe1xuICAgICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgICAgb3JpZ2luOiBnZXRDb3JuZXIoZXh0ZW50LCBjb3JuZXIpLFxuICAgICAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnMsXG4gICAgICAgIHRpbGVTaXplOiBvcHRfdGlsZVNpemUsXG4gICAgfSk7XG59XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFhZWk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBFeHRlbnQgZm9yIHRoZSB0aWxlIGdyaWQuIFRoZSBvcmlnaW4gZm9yIGFuIFhZWiB0aWxlIGdyaWQgaXMgdGhlXG4gKiB0b3AtbGVmdCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgYG1heFJlc29sdXRpb25gIGlzIG5vdCBwcm92aWRlZCB0aGUgemVybyBsZXZlbCBvZiB0aGUgZ3JpZCBpcyBkZWZpbmVkIGJ5IHRoZSByZXNvbHV0aW9uXG4gKiBhdCB3aGljaCBvbmUgdGlsZSBmaXRzIGluIHRoZSBwcm92aWRlZCBleHRlbnQuIElmIG5vdCBwcm92aWRlZCwgdGhlIGV4dGVudCBvZiB0aGUgRVBTRzozODU3IHByb2plY3Rpb24gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gUmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBNYXhpbXVtIHpvb20uIFRoZSBkZWZhdWx0IGlzIGA0MmAuIFRoaXMgZGV0ZXJtaW5lcyB0aGUgbnVtYmVyIG9mIGxldmVsc1xuICogaW4gdGhlIGdyaWQgc2V0LiBGb3IgZXhhbXBsZSwgYSBgbWF4Wm9vbWAgb2YgMjEgbWVhbnMgdGhlcmUgYXJlIDIyIGxldmVscyBpbiB0aGUgZ3JpZCBzZXQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFt0aWxlU2l6ZT1bMjU2LCAyNTZdXSBUaWxlIHNpemUgaW4gcGl4ZWxzLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB0aWxlIGdyaWQgd2l0aCBhIHN0YW5kYXJkIFhZWiB0aWxpbmcgc2NoZW1lLlxuICogQHBhcmFtIHtYWVpPcHRpb25zfSBbb3B0X29wdGlvbnNdIFRpbGUgZ3JpZCBvcHRpb25zLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlIGdyaWQgaW5zdGFuY2UuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVYWVoob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgeHl6T3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciBleHRlbnQgPSB4eXpPcHRpb25zLmV4dGVudCB8fCBnZXRQcm9qZWN0aW9uKCdFUFNHOjM4NTcnKS5nZXRFeHRlbnQoKTtcbiAgICB2YXIgZ3JpZE9wdGlvbnMgPSB7XG4gICAgICAgIGV4dGVudDogZXh0ZW50LFxuICAgICAgICBtaW5ab29tOiB4eXpPcHRpb25zLm1pblpvb20sXG4gICAgICAgIHRpbGVTaXplOiB4eXpPcHRpb25zLnRpbGVTaXplLFxuICAgICAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgeHl6T3B0aW9ucy5tYXhab29tLCB4eXpPcHRpb25zLnRpbGVTaXplLCB4eXpPcHRpb25zLm1heFJlc29sdXRpb24pLFxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBUaWxlR3JpZChncmlkT3B0aW9ucyk7XG59XG4vKipcbiAqIENyZWF0ZSBhIHJlc29sdXRpb25zIGFycmF5IGZyb20gYW4gZXh0ZW50LiAgQSB6b29tIGZhY3RvciBvZiAyIGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfdGlsZVNpemVdIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWF4UmVzb2x1dGlvbl0gUmVzb2x1dGlvbiBhdCBsZXZlbCB6ZXJvLlxuICogQHJldHVybiB7IUFycmF5PG51bWJlcj59IFJlc29sdXRpb25zIGFycmF5LlxuICovXG5mdW5jdGlvbiByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplLCBvcHRfbWF4UmVzb2x1dGlvbikge1xuICAgIHZhciBtYXhab29tID0gb3B0X21heFpvb20gIT09IHVuZGVmaW5lZCA/IG9wdF9tYXhab29tIDogREVGQVVMVF9NQVhfWk9PTTtcbiAgICB2YXIgaGVpZ2h0ID0gZ2V0SGVpZ2h0KGV4dGVudCk7XG4gICAgdmFyIHdpZHRoID0gZ2V0V2lkdGgoZXh0ZW50KTtcbiAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUob3B0X3RpbGVTaXplICE9PSB1bmRlZmluZWQgPyBvcHRfdGlsZVNpemUgOiBERUZBVUxUX1RJTEVfU0laRSk7XG4gICAgdmFyIG1heFJlc29sdXRpb24gPSBvcHRfbWF4UmVzb2x1dGlvbiA+IDBcbiAgICAgICAgPyBvcHRfbWF4UmVzb2x1dGlvblxuICAgICAgICA6IE1hdGgubWF4KHdpZHRoIC8gdGlsZVNpemVbMF0sIGhlaWdodCAvIHRpbGVTaXplWzFdKTtcbiAgICB2YXIgbGVuZ3RoID0gbWF4Wm9vbSArIDE7XG4gICAgdmFyIHJlc29sdXRpb25zID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgeiA9IDA7IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgICByZXNvbHV0aW9uc1t6XSA9IG1heFJlc29sdXRpb24gLyBNYXRoLnBvdygyLCB6KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc29sdXRpb25zO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF90aWxlU2l6ZV0gVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBbb3B0X2Nvcm5lcl0gRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvclByb2plY3Rpb24ocHJvamVjdGlvbiwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X2Nvcm5lcikge1xuICAgIHZhciBleHRlbnQgPSBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICByZXR1cm4gY3JlYXRlRm9yRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X2Nvcm5lcik7XG59XG4vKipcbiAqIEdlbmVyYXRlIGEgdGlsZSBncmlkIGV4dGVudCBmcm9tIGEgcHJvamVjdGlvbi4gIElmIHRoZSBwcm9qZWN0aW9uIGhhcyBhblxuICogZXh0ZW50LCBpdCBpcyB1c2VkLiAgSWYgbm90LCBhIGdsb2JhbCBleHRlbnQgaXMgYXNzdW1lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICBwcm9qZWN0aW9uID0gZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICB2YXIgZXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICBpZiAoIWV4dGVudCkge1xuICAgICAgICB2YXIgaGFsZiA9ICgxODAgKiBNRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10pIC8gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XG4gICAgICAgIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlKC1oYWxmLCAtaGFsZiwgaGFsZiwgaGFsZik7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10aWxlZ3JpZC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlXG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IFNvdXJjZSBmcm9tICcuL1NvdXJjZS5qcyc7XG5pbXBvcnQgVGlsZUNhY2hlIGZyb20gJy4uL1RpbGVDYWNoZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBlcXVpdmFsZW50IH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRLZXlaWFksIHdpdGhpbkV4dGVudEFuZFogfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgZ2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24sIHdyYXBYLCB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbmltcG9ydCB7IHNjYWxlIGFzIHNjYWxlU2l6ZSwgdG9TaXplIH0gZnJvbSAnLi4vc2l6ZS5qcyc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXMsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9UaWxlRXZlbnRUeXBlXCIpLlRpbGVTb3VyY2VFdmVudFR5cGVzLCBUaWxlU291cmNlRXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICBpbXBvcnQoXCIuL1RpbGVFdmVudFR5cGVcIikuVGlsZVNvdXJjZUV2ZW50VHlwZXMsIFJldHVybj59IFRpbGVTb3VyY2VPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIENhY2hlU2l6ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb10gVGlsZVBpeGVsUmF0aW8uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV0gU3RhdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZUdyaWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIFRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gS2V5LlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXSBaRGlyZWN0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9ZmFsc2VdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiB0aGUgbmVhcmVzdCBuZWlnaGJvciBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBub3JtYWxseSBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXMgYW5kIG5vdFxuICogaW5zdGFudGlhdGVkIGluIGFwcHMuXG4gKiBCYXNlIGNsYXNzIGZvciBzb3VyY2VzIHByb3ZpZGluZyBpbWFnZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkLlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBUaWxlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlU291cmNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBTb3VyY2VUaWxlIHNvdXJjZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVTb3VyY2Uob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IG9wdGlvbnMuaW50ZXJwb2xhdGUsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1RpbGVTb3VyY2VPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9ldmVudHNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vZXZlbnRzXCIpLkV2ZW50c0tleT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3BhcXVlXyA9IG9wdGlvbnMub3BhcXVlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYXF1ZSA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVQaXhlbFJhdGlvXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVQaXhlbFJhdGlvICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVQaXhlbFJhdGlvIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVHcmlkIDogbnVsbDtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gWzI1NiwgMjU2XTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gb3B0aW9ucy50aWxlR3JpZDtcbiAgICAgICAgaWYgKHRpbGVHcmlkKSB7XG4gICAgICAgICAgICB0b1NpemUodGlsZUdyaWQuZ2V0VGlsZVNpemUodGlsZUdyaWQuZ2V0TWluWm9vbSgpKSwgdGlsZVNpemUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDYWNoZSA9IG5ldyBUaWxlQ2FjaGUob3B0aW9ucy5jYWNoZVNpemUgfHwgMCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50bXBTaXplID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleV8gPSBvcHRpb25zLmtleSB8fCAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuT3B0aW9uc31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVPcHRpb25zID0ge1xuICAgICAgICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IG9wdGlvbnMuaW50ZXJwb2xhdGUsXG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB6RGlyZWN0aW9uIGhpbnQsIHJlYWQgYnkgdGhlIHJlbmRlcmVyLiBJbmRpY2F0ZXMgd2hpY2ggcmVzb2x1dGlvbiBzaG91bGQgYmUgdXNlZFxuICAgICAgICAgKiBieSBhIHJlbmRlcmVyIGlmIHRoZSB2aWV3cyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICAgICAgICogSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuIElmIDEsIHRoZSBuZWFyZXN0IGxvd2VyIHJlc29sdXRpb25cbiAgICAgICAgICogd2lsbCBiZSB1c2VkLiBJZiAtMSwgdGhlIG5lYXJlc3QgaGlnaGVyIHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnpEaXJlY3Rpb24gPSBvcHRpb25zLnpEaXJlY3Rpb24gPyBvcHRpb25zLnpEaXJlY3Rpb24gOiAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZS5jYW5FeHBpcmVDYWNoZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSB1c2VkVGlsZXMgVXNlZCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5leHBpcmVDYWNoZSA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uLCB1c2VkVGlsZXMpIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRpbGVDYWNoZSkge1xuICAgICAgICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHVzZWRUaWxlcyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0KTooYm9vbGVhbnx2b2lkKX0gY2FsbGJhY2sgQ2FsbGVkIHdpdGggZWFjaFxuICAgICAqICAgICBsb2FkZWQgdGlsZS4gIElmIHRoZSBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWAsIHRoZSB0aWxlIHdpbGwgbm90IGJlXG4gICAgICogICAgIGNvbnNpZGVyZWQgbG9hZGVkLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIHJhbmdlIGlzIGZ1bGx5IGNvdmVyZWQgd2l0aCBsb2FkZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZm9yRWFjaExvYWRlZFRpbGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgeiwgdGlsZVJhbmdlLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgdGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBpZiAoIXRpbGVDYWNoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb3ZlcmVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHRpbGUsIHRpbGVDb29yZEtleSwgbG9hZGVkO1xuICAgICAgICBmb3IgKHZhciB4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xuICAgICAgICAgICAgZm9yICh2YXIgeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcbiAgICAgICAgICAgICAgICB0aWxlQ29vcmRLZXkgPSBnZXRLZXlaWFkoeiwgeCwgeSk7XG4gICAgICAgICAgICAgICAgbG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGUgPSAvKiogQHR5cGUgeyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSkpO1xuICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSB0aWxlLmdldFN0YXRlKCkgPT09IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZCA9IGNhbGxiYWNrKHRpbGUpICE9PSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb3ZlcmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldEd1dHRlckZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUga2V5IHRvIGJlIHVzZWQgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGtleSBmb3IgYWxsIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmFsdWUgdG8gYmUgdXNlZCBhcyB0aGUga2V5IGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgZm9yIHRpbGVzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5zZXRLZXkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGlmICh0aGlzLmtleV8gIT09IGtleSkge1xuICAgICAgICAgICAgdGhpcy5rZXlfID0ga2V5O1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBPcGFxdWUuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0T3BhcXVlID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3BhcXVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZC5nZXRSZXNvbHV0aW9ucygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZSA9IGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIGdyaWQgb2YgdGhlIHRpbGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaWxlIGdyaWQuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnRpbGVHcmlkKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlQ2FjaGUuanNcIikuZGVmYXVsdH0gVGlsZSBjYWNoZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGFzc2VydChlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSwgNjggLy8gQSBWZWN0b3JUaWxlIHNvdXJjZSBjYW4gb25seSBiZSByZW5kZXJlZCBpZiBpdCBoYXMgYSBwcm9qZWN0aW9uIGNvbXBhdGlibGUgd2l0aCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgcGl4ZWwgcmF0aW8gZm9yIHRoaXMgc291cmNlLiBTdWJjbGFzc2VzIG1heSBvdmVycmlkZSB0aGlzXG4gICAgICogbWV0aG9kLCB3aGljaCBpcyBtZWFudCB0byByZXR1cm4gYSBzdXBwb3J0ZWQgcGl4ZWwgcmF0aW8gdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHByb3ZpZGVkIGBwaXhlbFJhdGlvYCBhcyBjbG9zZSBhcyBwb3NzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcGl4ZWwgcmF0aW8uXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZVBpeGVsUmF0aW8gPSBmdW5jdGlvbiAocGl4ZWxSYXRpbykge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlUGl4ZWxSYXRpb187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlUGl4ZWxTaXplID0gZnVuY3Rpb24gKHosIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIHZhciB0aWxlUGl4ZWxSYXRpbyA9IHRoaXMuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplKTtcbiAgICAgICAgaWYgKHRpbGVQaXhlbFJhdGlvID09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aWxlU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBzY2FsZVNpemUodGlsZVNpemUsIHRpbGVQaXhlbFJhdGlvLCB0aGlzLnRtcFNpemUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdGlsZSBjb29yZGluYXRlIHdyYXBwZWQgYXJvdW5kIHRoZSB4LWF4aXMuIFdoZW4gdGhlIHRpbGUgY29vcmRpbmF0ZVxuICAgICAqIGlzIG91dHNpZGUgdGhlIHJlc29sdXRpb24gYW5kIGV4dGVudCByYW5nZSBvZiB0aGUgdGlsZSBncmlkLCBgbnVsbGAgd2lsbCBiZVxuICAgICAqIHJldHVybmVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBbb3B0X3Byb2plY3Rpb25dIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlIHRvIGJlIHBhc3NlZCB0byB0aGUgdGlsZVVybEZ1bmN0aW9uIG9yXG4gICAgICogICAgIG51bGwgaWYgbm8gdGlsZSBVUkwgc2hvdWxkIGJlIGNyZWF0ZWQgZm9yIHRoZSBwYXNzZWQgYHRpbGVDb29yZGAuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgb3B0X3Byb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBvcHRfcHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X3Byb2plY3Rpb24gOiB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgdmFyIHRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aGlzLmdldFdyYXBYKCkgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgICAgICAgICB0aWxlQ29vcmQgPSB3cmFwWCh0aWxlR3JpZCwgdGlsZUNvb3JkLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2l0aGluRXh0ZW50QW5kWih0aWxlQ29vcmQsIHRpbGVHcmlkKSA/IHRpbGVDb29yZCA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGNhY2hlZCB0aWxlcyBmcm9tIHRoZSBzb3VyY2UuIFRoZSBuZXh0IHJlbmRlciBjeWNsZSB3aWxsIGZldGNoIG5ldyB0aWxlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLmNsZWFyKCk7XG4gICAgfTtcbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVmcmVzaC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5jcmVhc2VzIHRoZSBjYWNoZSBzaXplIGlmIG5lZWRlZFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aWxlQ291bnQgTWluaW11bSBudW1iZXIgb2YgdGlsZXMgbmVlZGVkLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS51cGRhdGVDYWNoZVNpemUgPSBmdW5jdGlvbiAodGlsZUNvdW50LCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlQ291bnQgPiB0aWxlQ2FjaGUuaGlnaFdhdGVyTWFyaykge1xuICAgICAgICAgICAgdGlsZUNhY2hlLmhpZ2hXYXRlck1hcmsgPSB0aWxlQ291bnQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS51c2VUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHByb2plY3Rpb24pIHsgfTtcbiAgICByZXR1cm4gVGlsZVNvdXJjZTtcbn0oU291cmNlKSk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGV+VGlsZVNvdXJjZX0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2YgdGhpc1xuICogdHlwZS5cbiAqL1xudmFyIFRpbGVTb3VyY2VFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZVNvdXJjZUV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGhlIHRpbGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVNvdXJjZUV2ZW50KHR5cGUsIHRpbGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdHlwZSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0aWxlIHJlbGF0ZWQgdG8gdGhlIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlID0gdGlsZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gVGlsZVNvdXJjZUV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IHsgVGlsZVNvdXJjZUV2ZW50IH07XG5leHBvcnQgZGVmYXVsdCBUaWxlU291cmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZXVybGZ1bmN0aW9uXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgaGFzaCBhcyB0aWxlQ29vcmRIYXNoIH0gZnJvbSAnLi90aWxlY29vcmQuanMnO1xuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGUgVGVtcGxhdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgdGlsZUdyaWQpIHtcbiAgICB2YXIgelJlZ0V4ID0gL1xce3pcXH0vZztcbiAgICB2YXIgeFJlZ0V4ID0gL1xce3hcXH0vZztcbiAgICB2YXIgeVJlZ0V4ID0gL1xce3lcXH0vZztcbiAgICB2YXIgZGFzaFlSZWdFeCA9IC9cXHsteVxcfS9nO1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRpbGVDb29yZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHpSZWdFeCwgdGlsZUNvb3JkWzBdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoeFJlZ0V4LCB0aWxlQ29vcmRbMV0udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSh5UmVnRXgsIHRpbGVDb29yZFsyXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKGRhc2hZUmVnRXgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSB0aWxlR3JpZC5nZXRGdWxsVGlsZVJhbmdlKHopO1xuICAgICAgICAgICAgICAgIGFzc2VydChyYW5nZSwgNTUpOyAvLyBUaGUgey15fSBwbGFjZWhvbGRlciByZXF1aXJlcyBhIHRpbGUgZ3JpZCB3aXRoIGV4dGVudFxuICAgICAgICAgICAgICAgIHZhciB5ID0gcmFuZ2UuZ2V0SGVpZ2h0KCkgLSB0aWxlQ29vcmRbMl0gLSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiB5LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHRlbXBsYXRlcyBUZW1wbGF0ZXMuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBUaWxlIFVSTCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZyb21UZW1wbGF0ZXModGVtcGxhdGVzLCB0aWxlR3JpZCkge1xuICAgIHZhciBsZW4gPSB0ZW1wbGF0ZXMubGVuZ3RoO1xuICAgIHZhciB0aWxlVXJsRnVuY3Rpb25zID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICB0aWxlVXJsRnVuY3Rpb25zW2ldID0gY3JlYXRlRnJvbVRlbXBsYXRlKHRlbXBsYXRlc1tpXSwgdGlsZUdyaWQpO1xuICAgIH1cbiAgICByZXR1cm4gY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnModGlsZVVybEZ1bmN0aW9ucyk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9uPn0gdGlsZVVybEZ1bmN0aW9ucyBUaWxlIFVSTCBGdW5jdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnModGlsZVVybEZ1bmN0aW9ucykge1xuICAgIGlmICh0aWxlVXJsRnVuY3Rpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdGlsZVVybEZ1bmN0aW9uc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGggPSB0aWxlQ29vcmRIYXNoKHRpbGVDb29yZCk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBtb2R1bG8oaCwgdGlsZVVybEZ1bmN0aW9ucy5sZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIHRpbGVVcmxGdW5jdGlvbnNbaW5kZXhdKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7c3RyaW5nfHVuZGVmaW5lZH0gVGlsZSBVUkwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBudWxsVGlsZVVybEZ1bmN0aW9uKHRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVVJMLlxuICogQHJldHVybiB7QXJyYXk8c3RyaW5nPn0gQXJyYXkgb2YgdXJscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZFVybCh1cmwpIHtcbiAgICB2YXIgdXJscyA9IFtdO1xuICAgIHZhciBtYXRjaCA9IC9cXHsoW2Etel0pLShbYS16XSlcXH0vLmV4ZWModXJsKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgLy8gY2hhciByYW5nZVxuICAgICAgICB2YXIgc3RhcnRDaGFyQ29kZSA9IG1hdGNoWzFdLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHZhciBzdG9wQ2hhckNvZGUgPSBtYXRjaFsyXS5jaGFyQ29kZUF0KDApO1xuICAgICAgICB2YXIgY2hhckNvZGUgPSB2b2lkIDA7XG4gICAgICAgIGZvciAoY2hhckNvZGUgPSBzdGFydENoYXJDb2RlOyBjaGFyQ29kZSA8PSBzdG9wQ2hhckNvZGU7ICsrY2hhckNvZGUpIHtcbiAgICAgICAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJscztcbiAgICB9XG4gICAgbWF0Y2ggPSAvXFx7KFxcZCspLShcXGQrKVxcfS8uZXhlYyh1cmwpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgICAvLyBudW1iZXIgcmFuZ2VcbiAgICAgICAgdmFyIHN0b3BfMSA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSBwYXJzZUludChtYXRjaFsxXSwgMTApOyBpIDw9IHN0b3BfMTsgaSsrKSB7XG4gICAgICAgICAgICB1cmxzLnB1c2godXJsLnJlcGxhY2UobWF0Y2hbMF0sIGkudG9TdHJpbmcoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmxzO1xuICAgIH1cbiAgICB1cmxzLnB1c2godXJsKTtcbiAgICByZXR1cm4gdXJscztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRpbGV1cmxmdW5jdGlvbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9VcmxUaWxlXG4gKi9cbmltcG9ydCBUaWxlRXZlbnRUeXBlIGZyb20gJy4vVGlsZUV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVNvdXJjZSwgeyBUaWxlU291cmNlRXZlbnQgfSBmcm9tICcuL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgY3JlYXRlRnJvbVRlbXBsYXRlcywgZXhwYW5kVXJsIH0gZnJvbSAnLi4vdGlsZXVybGZ1bmN0aW9uLmpzJztcbmltcG9ydCB7IGdldEtleVpYWSB9IGZyb20gJy4uL3RpbGVjb29yZC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi91dGlsLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gQ2FjaGUgc2l6ZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFN0YXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGVHcmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvbiBUaWxlTG9hZEZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpb10gVGlsZVBpeGVsUmF0aW8uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIFRpbGVVcmxGdW5jdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVcmwuXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBVcmxzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIFRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gS2V5LlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXSBaRGlyZWN0aW9uLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9ZmFsc2VdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiB0aGUgbmVhcmVzdCBuZWlnaGJvciBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBCYXNlIGNsYXNzIGZvciBzb3VyY2VzIHByb3ZpZGluZyB0aWxlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQgb3ZlciBodHRwLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuL1RpbGUuanNcIikuVGlsZVNvdXJjZUV2ZW50XG4gKi9cbnZhciBVcmxUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhVcmxUaWxlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBJbWFnZSB0aWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVXJsVGlsZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgdGlsZUdyaWQ6IG9wdGlvbnMudGlsZUdyaWQsXG4gICAgICAgICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IG9wdGlvbnMuaW50ZXJwb2xhdGUsXG4gICAgICAgICAgICBrZXk6IG9wdGlvbnMua2V5LFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyA9XG4gICAgICAgICAgICBfdGhpcy50aWxlVXJsRnVuY3Rpb24gPT09IFVybFRpbGUucHJvdG90eXBlLnRpbGVVcmxGdW5jdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUxvYWRGdW5jdGlvbiA9IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgaWYgKG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy50aWxlVXJsRnVuY3Rpb24gPSBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbjtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PHN0cmluZz58bnVsbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVybHMgPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy51cmxzKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRVcmxzKG9wdGlvbnMudXJscyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy51cmwpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFVybChvcHRpb25zLnVybCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZGluZ0tleXNfID0ge307XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIGxvYWQgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gVGlsZUxvYWRGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlTG9hZEZ1bmN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB0aWxlIFVSTCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGVVcmxGdW5jdGlvblxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykudGlsZVVybEZ1bmN0aW9uID09PSB0aGlzLnRpbGVVcmxGdW5jdGlvblxuICAgICAgICAgICAgPyB0aGlzLnRpbGVVcmxGdW5jdGlvbi5iaW5kKHRoaXMpXG4gICAgICAgICAgICA6IHRoaXMudGlsZVVybEZ1bmN0aW9uO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBVUkxzIHVzZWQgZm9yIHRoaXMgc291cmNlLlxuICAgICAqIFdoZW4gYSB0aWxlVXJsRnVuY3Rpb24gaXMgdXNlZCBpbnN0ZWFkIG9mIHVybCBvciB1cmxzLFxuICAgICAqIG51bGwgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPnxudWxsfSBVUkxzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5nZXRVcmxzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cmxzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHRpbGUgY2hhbmdlIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aWxlKTtcbiAgICAgICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgIGlmICh0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkxPQURJTkcpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIHR5cGUgPSBUaWxlRXZlbnRUeXBlLlRJTEVMT0FEU1RBUlQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodWlkIGluIHRoaXMudGlsZUxvYWRpbmdLZXlzXykge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZUxvYWRpbmdLZXlzX1t1aWRdO1xuICAgICAgICAgICAgdHlwZSA9XG4gICAgICAgICAgICAgICAgdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUlxuICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFUlJPUlxuICAgICAgICAgICAgICAgICAgICA6IHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFRpbGVFdmVudFR5cGUuVElMRUxPQURFTkRcbiAgICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IHRpbGVMb2FkRnVuY3Rpb24gVGlsZSBsb2FkIGZ1bmN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlTG9hZEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVMb2FkRnVuY3Rpb24pIHtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSB0aWxlVXJsRnVuY3Rpb24gVGlsZSBVUkwgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtrZXldIE9wdGlvbmFsIG5ldyB0aWxlIGtleSBmb3IgdGhlIHNvdXJjZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VGlsZVVybEZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVVcmxGdW5jdGlvbiwga2V5KSB7XG4gICAgICAgIHRoaXMudGlsZVVybEZ1bmN0aW9uID0gdGlsZVVybEZ1bmN0aW9uO1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5wcnVuZUV4Y2VwdE5ld2VzdFooKTtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgVVJMIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnNldFVybCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIHVybHMgPSBleHBhbmRVcmwodXJsKTtcbiAgICAgICAgdGhpcy51cmxzID0gdXJscztcbiAgICAgICAgdGhpcy5zZXRVcmxzKHVybHMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBVUkxzIHRvIHVzZSBmb3IgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSB1cmxzIFVSTHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnNldFVybHMgPSBmdW5jdGlvbiAodXJscykge1xuICAgICAgICB0aGlzLnVybHMgPSB1cmxzO1xuICAgICAgICB2YXIga2V5ID0gdXJscy5qb2luKCdcXG4nKTtcbiAgICAgICAgaWYgKHRoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnNldFRpbGVVcmxGdW5jdGlvbihjcmVhdGVGcm9tVGVtcGxhdGVzKHVybHMsIHRoaXMudGlsZUdyaWQpLCBrZXkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRLZXkoa2V5KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS50aWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYXJrcyBhIHRpbGUgY29vcmQgYXMgYmVpbmcgdXNlZCwgd2l0aG91dCB0cmlnZ2VyaW5nIGEgbG9hZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS51c2VUaWxlID0gZnVuY3Rpb24gKHosIHgsIHkpIHtcbiAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleVpYWSh6LCB4LCB5KTtcbiAgICAgICAgaWYgKHRoaXMudGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVXJsVGlsZTtcbn0oVGlsZVNvdXJjZSkpO1xuZXhwb3J0IGRlZmF1bHQgVXJsVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVybFRpbGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBzdGFydHMgbG9hZGluZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZHN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRJTEVMT0FEU1RBUlQ6ICd0aWxlbG9hZHN0YXJ0JyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIHRpbGUgZmluaXNoZXMgbG9hZGluZywgZWl0aGVyIHdoZW4gaXRzIGRhdGEgaXMgbG9hZGVkLFxuICAgICAqIG9yIHdoZW4gbG9hZGluZyB3YXMgYWJvcnRlZCBiZWNhdXNlIHRoZSB0aWxlIGlzIG5vIGxvbmdlciBuZWVkZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlbmRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURFTkQ6ICd0aWxlbG9hZGVuZCcsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGlmIHRpbGUgbG9hZGluZyByZXN1bHRzIGluIGFuIGVycm9yLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2FkZXJyb3JcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURFUlJPUjogJ3RpbGVsb2FkZXJyb3InLFxufTtcbi8qKlxuICogQHR5cGVkZWYgeyd0aWxlbG9hZHN0YXJ0J3wndGlsZWxvYWRlbmQnfCd0aWxlbG9hZGVycm9yJ30gVGlsZVNvdXJjZUV2ZW50VHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUV2ZW50VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9UaWxlSW1hZ2VcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZVRpbGUgZnJvbSAnLi4vSW1hZ2VUaWxlLmpzJztcbmltcG9ydCBSZXByb2pUaWxlIGZyb20gJy4uL3JlcHJvai9UaWxlLmpzJztcbmltcG9ydCBUaWxlQ2FjaGUgZnJvbSAnLi4vVGlsZUNhY2hlLmpzJztcbmltcG9ydCBUaWxlU3RhdGUgZnJvbSAnLi4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCBVcmxUaWxlIGZyb20gJy4vVXJsVGlsZS5qcyc7XG5pbXBvcnQgeyBFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB9IGZyb20gJy4uL3JlcHJvai9jb21tb24uanMnO1xuaW1wb3J0IHsgZXF1aXZhbGVudCwgZ2V0IGFzIGdldFByb2plY3Rpb24gfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGdldEtleSwgZ2V0S2V5WlhZIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIH0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuaW1wb3J0IHsgZ2V0VWlkIH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9Tb3VyY2UuanNcIikuQXR0cmlidXRpb25MaWtlfSBbYXR0cmlidXRpb25zXSBBdHRyaWJ1dGlvbnMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZT10cnVlXSBBdHRyaWJ1dGlvbnMgYXJlIGNvbGxhcHNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjYWNoZVNpemVdIEluaXRpYWwgdGlsZSBjYWNoZSBzaXplLiBXaWxsIGF1dG8tZ3JvdyB0byBob2xkIGF0IGxlYXN0IHRoZSBudW1iZXIgb2YgdGlsZXMgaW4gdGhlIHZpZXdwb3J0LlxuICogQHByb3BlcnR5IHtudWxsfHN0cmluZ30gW2Nyb3NzT3JpZ2luXSBUaGUgYGNyb3NzT3JpZ2luYCBhdHRyaWJ1dGUgZm9yIGxvYWRlZCBpbWFnZXMuICBOb3RlIHRoYXRcbiAqIHlvdSBtdXN0IHByb3ZpZGUgYSBgY3Jvc3NPcmlnaW5gIHZhbHVlIGlmIHlvdSB3YW50IHRvIGFjY2VzcyBwaXhlbCBkYXRhIHdpdGggdGhlIENhbnZhcyByZW5kZXJlci5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0NPUlNfZW5hYmxlZF9pbWFnZSBmb3IgbW9yZSBkZXRhaWwuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtpbWFnZVNtb290aGluZz10cnVlXSBEZXByZWNhdGVkLiAgVXNlIHRoZSBgaW50ZXJwb2xhdGVgIG9wdGlvbiBpbnN0ZWFkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW50ZXJwb2xhdGU9dHJ1ZV0gVXNlIGludGVycG9sYXRlZCB2YWx1ZXMgd2hlbiByZXNhbXBsaW5nLiAgQnkgZGVmYXVsdCxcbiAqIGxpbmVhciBpbnRlcnBvbGF0aW9uIGlzIHVzZWQgd2hlbiByZXNhbXBsaW5nLiAgU2V0IHRvIGZhbHNlIHRvIHVzZSB0aGUgbmVhcmVzdCBuZWlnaGJvciBpbnN0ZWFkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLiBEZWZhdWx0IGlzIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFNvdXJjZSBzdGF0ZS5cbiAqIEBwcm9wZXJ0eSB7dHlwZW9mIGltcG9ydChcIi4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSBbdGlsZUNsYXNzXSBDbGFzcyB1c2VkIHRvIGluc3RhbnRpYXRlIGltYWdlIHRpbGVzLlxuICogRGVmYXVsdCBpcyB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlVGlsZX5JbWFnZVRpbGV9LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGUgZ3JpZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259IFt0aWxlTG9hZEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBsb2FkIGEgdGlsZSBnaXZlbiBhIFVSTC4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBmdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICogICBpbWFnZVRpbGUuZ2V0SW1hZ2UoKS5zcmMgPSBzcmM7XG4gKiB9O1xuICogYGBgXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvPTFdIFRoZSBwaXhlbCByYXRpbyB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZVxuICogc2VydmljZSBhZHZlcnRpemVzIDI1NnB4IGJ5IDI1NnB4IHRpbGVzIGJ1dCBhY3R1YWxseSBzZW5kcyA1MTJweFxuICogYnkgNTEycHggaW1hZ2VzIChmb3IgcmV0aW5hL2hpZHBpIGRldmljZXMpIHRoZW4gYHRpbGVQaXhlbFJhdGlvYFxuICogc2hvdWxkIGJlIHNldCB0byBgMmAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFt0aWxlVXJsRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGdldCB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VybF0gVVJMIHRlbXBsYXRlLiBNdXN0IGluY2x1ZGUgYHt4fWAsIGB7eX1gIG9yIGB7LXl9YCwgYW5kIGB7en1gIHBsYWNlaG9sZGVycy5cbiAqIEEgYHs/LT99YCB0ZW1wbGF0ZSBwYXR0ZXJuLCBmb3IgZXhhbXBsZSBgc3ViZG9tYWlue2EtZn0uZG9tYWluLmNvbWAsIG1heSBiZVxuICogdXNlZCBpbnN0ZWFkIG9mIGRlZmluaW5nIGVhY2ggb25lIHNlcGFyYXRlbHkgaW4gdGhlIGB1cmxzYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge0FycmF5PHN0cmluZz59IFt1cmxzXSBBbiBhcnJheSBvZiBVUkwgdGVtcGxhdGVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFhdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LiBUaGUgZGVmYXVsdCwgaXMgdG9cbiAqIHJlcXVlc3Qgb3V0LW9mLWJvdW5kcyB0aWxlcyBmcm9tIHRoZSBzZXJ2ZXIuIFdoZW4gc2V0IHRvIGBmYWxzZWAsIG9ubHkgb25lXG4gKiB3b3JsZCB3aWxsIGJlIHJlbmRlcmVkLiBXaGVuIHNldCB0byBgdHJ1ZWAsIHRpbGVzIHdpbGwgYmUgcmVxdWVzdGVkIGZvciBvbmVcbiAqIHdvcmxkIG9ubHksIGJ1dCB0aGV5IHdpbGwgYmUgd3JhcHBlZCBob3Jpem9udGFsbHkgdG8gcmVuZGVyIG11bHRpcGxlIHdvcmxkcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBPcHRpb25hbCB0aWxlIGtleSBmb3IgcHJvcGVyIGNhY2hlIGZldGNoaW5nXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vVGlsZS5qc1wiKS5UaWxlU291cmNlRXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVJbWFnZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUltYWdlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IU9wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVJbWFnZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcgOiB0cnVlO1xuICAgICAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGU7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgICAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZUxvYWRGdW5jdGlvbjogb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb25cbiAgICAgICAgICAgICAgICA6IGRlZmF1bHRUaWxlTG9hZEZ1bmN0aW9uLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB0aWxlVXJsRnVuY3Rpb246IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uLFxuICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgICAgIHVybHM6IG9wdGlvbnMudXJscyxcbiAgICAgICAgICAgIHdyYXBYOiBvcHRpb25zLndyYXBYLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IGludGVycG9sYXRlLFxuICAgICAgICAgICAga2V5OiBvcHRpb25zLmtleSxcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlOiBvcHRpb25zLmF0dHJpYnV0aW9uc0NvbGxhcHNpYmxlLFxuICAgICAgICAgICAgekRpcmVjdGlvbjogb3B0aW9ucy56RGlyZWN0aW9uLFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNyb3NzT3JpZ2luID1cbiAgICAgICAgICAgIG9wdGlvbnMuY3Jvc3NPcmlnaW4gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY3Jvc3NPcmlnaW4gOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7dHlwZW9mIEltYWdlVGlsZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDbGFzcyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVDbGFzcyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50aWxlQ2xhc3MgOiBJbWFnZVRpbGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgVGlsZUNhY2hlPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbiA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZF8gPSBvcHRpb25zLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25ba2V5XS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXhwaXJlQ2FjaGUuY2FsbCh0aGlzLCBwcm9qZWN0aW9uLCB1c2VkVGlsZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VkVGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aGlzLnRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdO1xuICAgICAgICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OICYmXG4gICAgICAgICAgICB0aGlzLmdldFByb2plY3Rpb24oKSAmJlxuICAgICAgICAgICAgcHJvamVjdGlvbiAmJlxuICAgICAgICAgICAgIWVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEd1dHRlcigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldEd1dHRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBrZXkgZm9yIGFsbCB0aWxlcy5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleSA9IF9zdXBlci5wcm90b3R5cGUuZ2V0S2V5LmNhbGwodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5nZXRJbnRlcnBvbGF0ZSgpKSB7XG4gICAgICAgICAgICBrZXkgKz0gJzpkaXNhYmxlLWludGVycG9sYXRpb24nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gT3BhcXVlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0T3BhcXVlID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OICYmXG4gICAgICAgICAgICB0aGlzLmdldFByb2plY3Rpb24oKSAmJlxuICAgICAgICAgICAgcHJvamVjdGlvbiAmJlxuICAgICAgICAgICAgIWVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZXRPcGFxdWUuY2FsbCh0aGlzLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBUaWxlIGdyaWQuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24uY2FsbCh0aGlzLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKHRoaXMudGlsZUdyaWQgJiYgKCF0aGlzUHJvaiB8fCBlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uW3Byb2pLZXldID1cbiAgICAgICAgICAgICAgICAgICAgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uW3Byb2pLZXldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZUNhY2hlLmpzXCIpLmRlZmF1bHR9IFRpbGUgY2FjaGUuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbi5jYWxsKHRoaXMsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aGlzUHJvaiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoIXRoaXNQcm9qIHx8IGVxdWl2YWxlbnQodGhpc1Byb2osIHByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IG5ldyBUaWxlQ2FjaGUodGhpcy50aWxlQ2FjaGUuaGlnaFdhdGVyTWFyayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW3Byb2pLZXldO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IHNldCBvbiB0aGUgdGlsZS5cbiAgICAgKiBAcmV0dXJuIHshSW1hZ2VUaWxlfSBUaWxlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5jcmVhdGVUaWxlXyA9IGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpIHtcbiAgICAgICAgdmFyIHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICAgICAgdmFyIHVybFRpbGVDb29yZCA9IHRoaXMuZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uKHRpbGVDb29yZCwgcHJvamVjdGlvbik7XG4gICAgICAgIHZhciB0aWxlVXJsID0gdXJsVGlsZUNvb3JkXG4gICAgICAgICAgICA/IHRoaXMudGlsZVVybEZ1bmN0aW9uKHVybFRpbGVDb29yZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbilcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xuICAgICAgICB2YXIgdGlsZSA9IG5ldyB0aGlzLnRpbGVDbGFzcyh0aWxlQ29vcmQsIHRpbGVVcmwgIT09IHVuZGVmaW5lZCA/IFRpbGVTdGF0ZS5JRExFIDogVGlsZVN0YXRlLkVNUFRZLCB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyB0aWxlVXJsIDogJycsIHRoaXMuY3Jvc3NPcmlnaW4sIHRoaXMudGlsZUxvYWRGdW5jdGlvbiwgdGhpcy50aWxlT3B0aW9ucyk7XG4gICAgICAgIHRpbGUua2V5ID0ga2V5O1xuICAgICAgICB0aWxlLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNIQU5HRSwgdGhpcy5oYW5kbGVUaWxlQ2hhbmdlLmJpbmQodGhpcykpO1xuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshKEltYWdlVGlsZXxSZXByb2pUaWxlKX0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgc291cmNlUHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICAgICAhc291cmNlUHJvamVjdGlvbiB8fFxuICAgICAgICAgICAgIXByb2plY3Rpb24gfHxcbiAgICAgICAgICAgIGVxdWl2YWxlbnQoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uIHx8IHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICAgICAgICAgIHZhciB0aWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleSh0aWxlQ29vcmQpO1xuICAgICAgICAgICAgaWYgKGNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgICAgICB0aWxlID0gY2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRpbGUua2V5ID09IGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciBuZXdUaWxlID0gbmV3IFJlcHJvalRpbGUoc291cmNlUHJvamVjdGlvbiwgc291cmNlVGlsZUdyaWQsIHByb2plY3Rpb24sIHRhcmdldFRpbGVHcmlkLCB0aWxlQ29vcmQsIHdyYXBwZWRUaWxlQ29vcmQsIHRoaXMuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyksIHRoaXMuZ2V0R3V0dGVyKCksIGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIHRoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfLCB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXywgdGhpcy5nZXRJbnRlcnBvbGF0ZSgpKTtcbiAgICAgICAgICAgICAgICBuZXdUaWxlLmtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBpZiAodGlsZSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdUaWxlLmludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgICAgICAgICAgICAgICAgbmV3VGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnJlcGxhY2UodGlsZUNvb3JkS2V5LCBuZXdUaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlLnNldCh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshKEltYWdlVGlsZXxSZXByb2pUaWxlKX0gVGlsZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRUaWxlSW50ZXJuYWwgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgdGlsZSA9IG51bGw7XG4gICAgICAgIHZhciB0aWxlQ29vcmRLZXkgPSBnZXRLZXlaWFkoeiwgeCwgeSk7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmdldEtleSgpO1xuICAgICAgICBpZiAoIXRoaXMudGlsZUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgIHRpbGUgPSB0aGlzLmNyZWF0ZVRpbGVfKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24sIGtleSk7XG4gICAgICAgICAgICB0aGlzLnRpbGVDYWNoZS5zZXQodGlsZUNvb3JkS2V5LCB0aWxlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGUgPSB0aGlzLnRpbGVDYWNoZS5nZXQodGlsZUNvb3JkS2V5KTtcbiAgICAgICAgICAgIGlmICh0aWxlLmtleSAhPSBrZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgc291cmNlJ3MgcGFyYW1zIGNoYW5nZWQuIElmIHRoZSB0aWxlIGhhcyBhbiBpbnRlcmltIHRpbGUgYW5kIGlmIHdlXG4gICAgICAgICAgICAgICAgLy8gY2FuIHVzZSBpdCB0aGVuIHdlIHVzZSBpdC4gT3RoZXJ3aXNlIHdlIGNyZWF0ZSBhIG5ldyB0aWxlLiAgSW4gYm90aFxuICAgICAgICAgICAgICAgIC8vIGNhc2VzIHdlIGF0dGVtcHQgdG8gYXNzaWduIGFuIGludGVyaW0gdGlsZSB0byB0aGUgbmV3IHRpbGUuXG4gICAgICAgICAgICAgICAgdmFyIGludGVyaW1UaWxlID0gdGlsZTtcbiAgICAgICAgICAgICAgICB0aWxlID0gdGhpcy5jcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpO1xuICAgICAgICAgICAgICAgIC8vbWFrZSB0aGUgbmV3IHRpbGUgdGhlIGhlYWQgb2YgdGhlIGxpc3QsXG4gICAgICAgICAgICAgICAgaWYgKGludGVyaW1UaWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy90aGUgb2xkIHRpbGUgaGFzbid0IGJlZ3VuIGxvYWRpbmcgeWV0LCBhbmQgaXMgbm93IG91dGRhdGVkLCBzbyB3ZSBjYW4gc2ltcGx5IGRpc2NhcmQgaXRcbiAgICAgICAgICAgICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IGludGVyaW1UaWxlLmludGVyaW1UaWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGlsZS5pbnRlcmltVGlsZSA9IGludGVyaW1UaWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aWxlLnJlZnJlc2hJbnRlcmltQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVDYWNoZS5yZXBsYWNlKHRpbGVDb29yZEtleSwgdGlsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgdG8gcmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcyBvciBub3QgKHVzdWFsbHkgZm9yIGRlYnVnZ2luZykuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZW5kZXIgUmVuZGVyIHRoZSBlZGdlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5zZXRSZW5kZXJSZXByb2plY3Rpb25FZGdlcyA9IGZ1bmN0aW9uIChyZW5kZXIpIHtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiB8fFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPT0gcmVuZGVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSByZW5kZXI7XG4gICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uW2lkXS5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdGlsZSBncmlkIHRvIHVzZSB3aGVuIHJlcHJvamVjdGluZyB0aGUgdGlsZXMgdG8gdGhlIGdpdmVuXG4gICAgICogcHJvamVjdGlvbiBpbnN0ZWFkIG9mIHRoZSBkZWZhdWx0IHRpbGUgZ3JpZCBmb3IgdGhlIHByb2plY3Rpb24uXG4gICAgICpcbiAgICAgKiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgY2Fubm90IGJlIGNyZWF0ZWRcbiAgICAgKiAoZS5nLiBwcm9qZWN0aW9uIGhhcyBubyBleHRlbnQgZGVmaW5lZCkgb3JcbiAgICAgKiBmb3Igb3B0aW1pemF0aW9uIHJlYXNvbnMgKGN1c3RvbSB0aWxlIHNpemUsIHJlc29sdXRpb25zLCAuLi4pLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlZ3JpZCBUaWxlIGdyaWQgdG8gdXNlIGZvciB0aGUgcHJvamVjdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5zZXRUaWxlR3JpZEZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdGlsZWdyaWQpIHtcbiAgICAgICAgaWYgKEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OKSB7XG4gICAgICAgICAgICB2YXIgcHJvaiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAocHJvaikge1xuICAgICAgICAgICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2opO1xuICAgICAgICAgICAgICAgIGlmICghKHByb2pLZXkgaW4gdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uW3Byb2pLZXldID0gdGlsZWdyaWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZUltYWdlO1xufShVcmxUaWxlKSk7XG4vKipcbiAqIEBwYXJhbSB7SW1hZ2VUaWxlfSBpbWFnZVRpbGUgSW1hZ2UgdGlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgU291cmNlLlxuICovXG5mdW5jdGlvbiBkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbihpbWFnZVRpbGUsIHNyYykge1xuICAgIC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAoaW1hZ2VUaWxlLmdldEltYWdlKCkpLnNyYyA9XG4gICAgICAgIHNyYztcbn1cbmV4cG9ydCBkZWZhdWx0IFRpbGVJbWFnZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVJbWFnZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1hZWlxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IFRpbGVJbWFnZSBmcm9tICcuL1RpbGVJbWFnZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVYWVosIGV4dGVudEZyb21Qcm9qZWN0aW9uIH0gZnJvbSAnLi4vdGlsZWdyaWQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBJbml0aWFsIHRpbGUgY2FjaGUgc2l6ZS4gV2lsbCBhdXRvLWdyb3cgdG8gaG9sZCBhdCBsZWFzdCB0aGUgbnVtYmVyIG9mIHRpbGVzIGluIHRoZSB2aWV3cG9ydC5cbiAqIEBwcm9wZXJ0eSB7bnVsbHxzdHJpbmd9IFtjcm9zc09yaWdpbl0gVGhlIGBjcm9zc09yaWdpbmAgYXR0cmlidXRlIGZvciBsb2FkZWQgaW1hZ2VzLiAgTm90ZSB0aGF0XG4gKiB5b3UgbXVzdCBwcm92aWRlIGEgYGNyb3NzT3JpZ2luYCB2YWx1ZSBpZiB5b3Ugd2FudCB0byBhY2Nlc3MgcGl4ZWwgZGF0YSB3aXRoIHRoZSBDYW52YXMgcmVuZGVyZXIuXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9DT1JTX2VuYWJsZWRfaW1hZ2UgZm9yIG1vcmUgZGV0YWlsLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbaW1hZ2VTbW9vdGhpbmc9dHJ1ZV0gRGVwcmVjYXRlZC4gIFVzZSB0aGUgYGludGVycG9sYXRlYCBvcHRpb24gaW5zdGVhZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ludGVycG9sYXRlPXRydWVdIFVzZSBpbnRlcnBvbGF0ZWQgdmFsdWVzIHdoZW4gcmVzYW1wbGluZy4gIEJ5IGRlZmF1bHQsXG4gKiBsaW5lYXIgaW50ZXJwb2xhdGlvbiBpcyB1c2VkIHdoZW4gcmVzYW1wbGluZy4gIFNldCB0byBmYWxzZSB0byB1c2UgdGhlIG5lYXJlc3QgbmVpZ2hib3IgaW5zdGVhZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29wYXF1ZT1mYWxzZV0gV2hldGhlciB0aGUgbGF5ZXIgaXMgb3BhcXVlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbj0nRVBTRzozODU3J10gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ9MC41XSBNYXhpbXVtIGFsbG93ZWQgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBwaXhlbHMpLlxuICogSGlnaGVyIHZhbHVlcyBjYW4gaW5jcmVhc2UgcmVwcm9qZWN0aW9uIHBlcmZvcm1hbmNlLCBidXQgZGVjcmVhc2UgcHJlY2lzaW9uLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tPTQyXSBPcHRpb25hbCBtYXggem9vbSBsZXZlbC4gTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbT0wXSBPcHRpb25hbCBtaW4gem9vbSBsZXZlbC4gTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gT3B0aW9uYWwgdGlsZSBncmlkIHJlc29sdXRpb24gYXQgbGV2ZWwgemVyby4gTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gW3RpbGVHcmlkXSBUaWxlIGdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBbdGlsZUxvYWRGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gbG9hZCBhIHRpbGUgZ2l2ZW4gYSBVUkwuIFRoZSBkZWZhdWx0IGlzXG4gKiBgYGBqc1xuICogZnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAqICAgaW1hZ2VUaWxlLmdldEltYWdlKCkuc3JjID0gc3JjO1xuICogfTtcbiAqIGBgYFxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aWxlUGl4ZWxSYXRpbz0xXSBUaGUgcGl4ZWwgcmF0aW8gdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLlxuICogRm9yIGV4YW1wbGUsIGlmIHRoZSB0aWxlIHNlcnZpY2UgYWR2ZXJ0aXplcyAyNTZweCBieSAyNTZweCB0aWxlcyBidXQgYWN0dWFsbHkgc2VuZHMgNTEycHhcbiAqIGJ5IDUxMnB4IGltYWdlcyAoZm9yIHJldGluYS9oaWRwaSBkZXZpY2VzKSB0aGVuIGB0aWxlUGl4ZWxSYXRpb2BcbiAqIHNob3VsZCBiZSBzZXQgdG8gYDJgLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGhlIHRpbGUgc2l6ZSB1c2VkIGJ5IHRoZSB0aWxlIHNlcnZpY2UuXG4gKiBOb3QgdXNlZCBpZiBgdGlsZUdyaWRgIGlzIHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLlVybEZ1bmN0aW9ufSBbdGlsZVVybEZ1bmN0aW9uXSBPcHRpb25hbCBmdW5jdGlvbiB0byBnZXRcbiAqIHRpbGUgVVJMIGdpdmVuIGEgdGlsZSBjb29yZGluYXRlIGFuZCB0aGUgcHJvamVjdGlvbi5cbiAqIFJlcXVpcmVkIGlmIGB1cmxgIG9yIGB1cmxzYCBhcmUgbm90IHByb3ZpZGVkLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVSTCB0ZW1wbGF0ZS4gTXVzdCBpbmNsdWRlIGB7eH1gLCBge3l9YCBvciBgey15fWAsXG4gKiBhbmQgYHt6fWAgcGxhY2Vob2xkZXJzLiBBIGB7Py0/fWAgdGVtcGxhdGUgcGF0dGVybiwgZm9yIGV4YW1wbGUgYHN1YmRvbWFpbnthLWZ9LmRvbWFpbi5jb21gLFxuICogbWF5IGJlIHVzZWQgaW5zdGVhZCBvZiBkZWZpbmluZyBlYWNoIG9uZSBzZXBhcmF0ZWx5IGluIHRoZSBgdXJsc2Agb3B0aW9uLlxuICogQHByb3BlcnR5IHtBcnJheTxzdHJpbmc+fSBbdXJsc10gQW4gYXJyYXkgb2YgVVJMIHRlbXBsYXRlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3dyYXBYPXRydWVdIFdoZXRoZXIgdG8gd3JhcCB0aGUgd29ybGQgaG9yaXpvbnRhbGx5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uPTI1MF0gRHVyYXRpb24gb2YgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiBmb3IgcmVuZGVyaW5nLlxuICogVG8gZGlzYWJsZSB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLCBwYXNzIGB0cmFuc2l0aW9uOiAwYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW3pEaXJlY3Rpb249MF1cbiAqIENob29zZSB3aGV0aGVyIHRvIHVzZSB0aWxlcyB3aXRoIGEgaGlnaGVyIG9yIGxvd2VyIHpvb20gbGV2ZWwgd2hlbiBiZXR3ZWVuIGludGVnZXJcbiAqIHpvb20gbGV2ZWxzLiBTZWUge0BsaW5rIG1vZHVsZTpvbC90aWxlZ3JpZC9UaWxlR3JpZH5UaWxlR3JpZCNnZXRaRm9yUmVzb2x1dGlvbn0uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGF5ZXIgc291cmNlIGZvciB0aWxlIGRhdGEgd2l0aCBVUkxzIGluIGEgc2V0IFhZWiBmb3JtYXQgdGhhdCBhcmVcbiAqIGRlZmluZWQgaW4gYSBVUkwgdGVtcGxhdGUuIEJ5IGRlZmF1bHQsIHRoaXMgZm9sbG93cyB0aGUgd2lkZWx5LXVzZWRcbiAqIEdvb2dsZSBncmlkIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIHRvcCBsZWZ0LiBHcmlkcyBsaWtlXG4gKiBUTVMgd2hlcmUgYHhgIDAgYW5kIGB5YCAwIGFyZSBpbiB0aGUgYm90dG9tIGxlZnQgY2FuIGJlIHVzZWQgYnlcbiAqIHVzaW5nIHRoZSBgey15fWAgcGxhY2Vob2xkZXIgaW4gdGhlIFVSTCB0ZW1wbGF0ZSwgc28gbG9uZyBhcyB0aGVcbiAqIHNvdXJjZSBkb2VzIG5vdCBoYXZlIGEgY3VzdG9tIHRpbGUgZ3JpZC4gSW4gdGhpcyBjYXNlXG4gKiBhIGB0aWxlVXJsRnVuY3Rpb25gIGNhbiBiZSB1c2VkLCBzdWNoIGFzOlxuICogYGBganNcbiAqICB0aWxlVXJsRnVuY3Rpb246IGZ1bmN0aW9uKGNvb3JkaW5hdGUpIHtcbiAqICAgIHJldHVybiAnaHR0cDovL21hcHNlcnZlci5jb20vJyArIGNvb3JkaW5hdGVbMF0gKyAnLycgK1xuICogICAgICBjb29yZGluYXRlWzFdICsgJy8nICsgKC1jb29yZGluYXRlWzJdIC0gMSkgKyAnLnBuZyc7XG4gKiAgfVxuICogYGBgXG4gKiBAYXBpXG4gKi9cbnZhciBYWVogPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFhZWiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gWFlaIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gWFlaKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcgOiB0cnVlO1xuICAgICAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy50aWxlR3JpZFxuICAgICAgICAgICAgOiBjcmVhdGVYWVooe1xuICAgICAgICAgICAgICAgIGV4dGVudDogZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbiksXG4gICAgICAgICAgICAgICAgbWF4UmVzb2x1dGlvbjogb3B0aW9ucy5tYXhSZXNvbHV0aW9uLFxuICAgICAgICAgICAgICAgIG1heFpvb206IG9wdGlvbnMubWF4Wm9vbSxcbiAgICAgICAgICAgICAgICBtaW5ab29tOiBvcHRpb25zLm1pblpvb20sXG4gICAgICAgICAgICAgICAgdGlsZVNpemU6IG9wdGlvbnMudGlsZVNpemUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBvcHRpb25zLmNyb3NzT3JpZ2luLFxuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IGludGVycG9sYXRlLFxuICAgICAgICAgICAgb3BhcXVlOiBvcHRpb25zLm9wYXF1ZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IHByb2plY3Rpb24sXG4gICAgICAgICAgICByZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDogb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCxcbiAgICAgICAgICAgIHRpbGVHcmlkOiB0aWxlR3JpZCxcbiAgICAgICAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvbixcbiAgICAgICAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IHRydWUsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiBvcHRpb25zLnRyYW5zaXRpb24sXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gWFlaO1xufShUaWxlSW1hZ2UpKTtcbmV4cG9ydCBkZWZhdWx0IFhZWjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVhZWi5qcy5tYXAiLCJpbXBvcnQgWFlaU291cmNlIGZyb20gJ29sL3NvdXJjZS9YWVouanMnO1xyXG4vKipcclxuICogQXZhaWxhYmxlIEJhc2VtYXAgdmFyaWFudHNcclxuICogQHByaXZhdGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBWQVJJQU5UUyA9IHtcclxuICAgIGdlb2xhbmRiYXNlbWFwOiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2dlb2xhbmRiYXNlbWFwL25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LnBuZycsXHJcbiAgICBibWFwZ3JhdTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwZ3JhdS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG4gICAgYm1hcG9ydGhvZm90bzMwY206ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcG9ydGhvZm90bzMwY20vbm9ybWFsL2dvb2dsZTM4NTcve3p9L3t5fS97eH0uanBlZycsXHJcbiAgICBibWFwZ2VsYWVuZGU6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcGdlbGFlbmRlL2dyYXUvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5qcGVnJyxcclxuICAgIGJtYXBvYmVyZmxhZWNoZTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb2JlcmZsYWVjaGUvZ3JhdS9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gICAgYm1hcG92ZXJsYXk6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvYm1hcG92ZXJsYXkvbm9ybWFsL2dvb2dsZTM4NTcve3p9L3t5fS97eH0ucG5nJyxcclxufTtcclxuLyoqXHJcbiAqIENvbnZlbmllbmNlIHNvdXJjZSBmb3IgYmFzZW1hcC5hdCByYXN0ZXIgbWFwcy5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBCYXNlbWFwU291cmNlIGV4dGVuZHMgWFlaU291cmNlIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBPcHRpb25zXHJcbiAgICAgKiBAcGFyYW0ge2tleW9mIHZhcmlhbnRzfSBbb3B0aW9ucy52YXJpYW50PVwiZ2VvbGFuZGJhc2VtYXBcIl0gQmFzZW1hcCB2YXJpYW50XHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCB2YXJpYW50ID0gKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy52YXJpYW50KSB8fCAnZ2VvbGFuZGJhc2VtYXAnO1xyXG4gICAgICAgIHN1cGVyKHtcclxuICAgICAgICAgICAgdXJsOiBWQVJJQU5UU1t2YXJpYW50XSxcclxuICAgICAgICAgICAgYXR0cmlidXRpb25zOiAnR3J1bmRrYXJ0ZTogPGEgaHJlZj1cImh0dHBzOi8vYmFzZW1hcC5hdC9cIj5iYXNlbWFwLmF0PC9hPicsXHJcbiAgICAgICAgICAgIGNyb3NzT3JpZ2luOiBcIkFub255bW91c1wiXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuLi8uLi8uLi9zcmMvaW5kZXhDb3JlLnNjc3MnO1xyXG5pbXBvcnQgVGlsZUxheWVyIGZyb20gXCJvbC9sYXllci9UaWxlXCI7XHJcbmltcG9ydCBWaWV3IGZyb20gXCJvbC9WaWV3XCI7XHJcbmltcG9ydCBNYXAgZnJvbSBcIm9sL01hcFwiO1xyXG5pbXBvcnQgeyBBdHRyaWJ1dGlvbiwgQmFzZW1hcFNvdXJjZSwgQm90dG9tUmlnaHQsIEZvb3RlciwgR2VvTG9jYXRlLCBMYXllciwgTW91c2VQb3NpdGlvbiwgT3ZlcnZpZXcsIFByaW50LCBTY2FsZUxpbmUsIFNoYXJlLCBUb29scywgVG9wUmlnaHQsIFZpZXdMaXN0LCBab29tIH0gZnJvbSBcIi4uLy4uLy4uL3NyY1wiO1xyXG5pbXBvcnQgeyBnZXRDZW50ZXIgfSBmcm9tIFwib2wvZXh0ZW50XCI7XHJcbm5ldyBNYXAoe1xyXG4gICAgdGFyZ2V0OiAnYmdpcy1tYXAnLFxyXG4gICAgbGF5ZXJzOiBbbmV3IFRpbGVMYXllcih7XHJcbiAgICAgICAgICAgIHNvdXJjZTogbmV3IEJhc2VtYXBTb3VyY2UoKVxyXG4gICAgICAgIH0pXSxcclxuICAgIGNvbnRyb2xzOiBbXHJcbiAgICAgICAgbmV3IEZvb3RlcihbXHJcbiAgICAgICAgICAgIG5ldyBTY2FsZUxpbmUoKSxcclxuICAgICAgICAgICAgbmV3IE1vdXNlUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgbmV3IEF0dHJpYnV0aW9uKCksXHJcbiAgICAgICAgXSksXHJcbiAgICAgICAgbmV3IEJvdHRvbVJpZ2h0KHsgaG9yaXpvbnRhbENvbnRyb2xzOiBbbmV3IExheWVyKCksXHJcbiAgICAgICAgICAgICAgICBuZXcgVmlld0xpc3QoKV0sXHJcbiAgICAgICAgICAgIHZlcnRpY2FsQ29udHJvbHM6IFtuZXcgUHJpbnQoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBTaGFyZSgpLCBuZXcgVG9vbHMoKV1cclxuICAgICAgICB9KSxcclxuICAgICAgICBuZXcgVG9wUmlnaHQoW1xyXG4gICAgICAgICAgICBuZXcgR2VvTG9jYXRlKCksXHJcbiAgICAgICAgICAgIG5ldyBab29tKCksXHJcbiAgICAgICAgXSksXHJcbiAgICAgICAgbmV3IE92ZXJ2aWV3KClcclxuICAgIF0sXHJcbiAgICB2aWV3OiBuZXcgVmlldyh7XHJcbiAgICAgICAgY2VudGVyOiBnZXRDZW50ZXIoWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdKSxcclxuICAgICAgICBjb25zdHJhaW5Pbmx5Q2VudGVyOiB0cnVlLFxyXG4gICAgICAgIGNvbnN0cmFpblJlc29sdXRpb246IGZhbHNlLFxyXG4gICAgICAgIGV4dGVudDogWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdLFxyXG4gICAgICAgIG1heFpvb206IDE1LFxyXG4gICAgICAgIG1pblpvb206IDYsXHJcbiAgICAgICAgem9vbTogNyxcclxuICAgIH0pXHJcbn0pO1xyXG5uZXcgTWFwKHtcclxuICAgIHRhcmdldDogJ2JnaXMtbWFwLTInLFxyXG4gICAgbGF5ZXJzOiBbbmV3IFRpbGVMYXllcih7XHJcbiAgICAgICAgICAgIHNvdXJjZTogbmV3IEJhc2VtYXBTb3VyY2UoKVxyXG4gICAgICAgIH0pXSxcclxuICAgIGNvbnRyb2xzOiBbXHJcbiAgICAgICAgbmV3IEZvb3RlcihbXHJcbiAgICAgICAgICAgIG5ldyBTY2FsZUxpbmUoKSxcclxuICAgICAgICAgICAgbmV3IE1vdXNlUG9zaXRpb24oKSxcclxuICAgICAgICAgICAgbmV3IEF0dHJpYnV0aW9uKCksXHJcbiAgICAgICAgXSksXHJcbiAgICAgICAgbmV3IEJvdHRvbVJpZ2h0KHsgaG9yaXpvbnRhbENvbnRyb2xzOiBbbmV3IExheWVyKCksXHJcbiAgICAgICAgICAgICAgICBuZXcgVmlld0xpc3QoKV0sXHJcbiAgICAgICAgICAgIHZlcnRpY2FsQ29udHJvbHM6IFtuZXcgUHJpbnQoKSxcclxuICAgICAgICAgICAgICAgIG5ldyBTaGFyZSgpLCBuZXcgVG9vbHMoKV1cclxuICAgICAgICB9KSxcclxuICAgICAgICBuZXcgVG9wUmlnaHQoW1xyXG4gICAgICAgICAgICBuZXcgR2VvTG9jYXRlKCksXHJcbiAgICAgICAgICAgIG5ldyBab29tKCksXHJcbiAgICAgICAgXSksXHJcbiAgICAgICAgbmV3IE92ZXJ2aWV3KClcclxuICAgIF0sXHJcbiAgICB2aWV3OiBuZXcgVmlldyh7XHJcbiAgICAgICAgY2VudGVyOiBnZXRDZW50ZXIoWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdKSxcclxuICAgICAgICBjb25zdHJhaW5Pbmx5Q2VudGVyOiB0cnVlLFxyXG4gICAgICAgIGNvbnN0cmFpblJlc29sdXRpb246IGZhbHNlLFxyXG4gICAgICAgIGV4dGVudDogWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdLFxyXG4gICAgICAgIG1heFpvb206IDE1LFxyXG4gICAgICAgIG1pblpvb206IDYsXHJcbiAgICAgICAgem9vbTogNyxcclxuICAgIH0pXHJcbn0pO1xyXG4iXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIkJhc2VFdmVudCIsInR5cGUiLCJ0aGlzIiwicHJvcGFnYXRpb25TdG9wcGVkIiwiZGVmYXVsdFByZXZlbnRlZCIsInRhcmdldCIsInByb3RvdHlwZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiRGlzcG9zYWJsZSIsImRpc3Bvc2VkIiwiZGlzcG9zZSIsImRpc3Bvc2VJbnRlcm5hbCIsIm51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24iLCJhIiwiYiIsImxpbmVhckZpbmROZWFyZXN0IiwiYXJyIiwiZGlyZWN0aW9uIiwibiIsImxlbmd0aCIsImkiLCJleHRlbmQiLCJkYXRhIiwiZXh0ZW5zaW9uIiwiQXJyYXkiLCJpc0FycmF5IiwiZXF1YWxzIiwiYXJyMSIsImFycjIiLCJsZW4xIiwiVFJVRSIsIlZPSUQiLCJhc3NpZ24iLCJ2YXJfc291cmNlcyIsIlR5cGVFcnJvciIsIm91dHB1dCIsImlpIiwiYXJndW1lbnRzIiwic291cmNlIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJjbGVhciIsIm9iamVjdCIsInByb3BlcnR5IiwiZXh0ZW5kU3RhdGljcyIsImdldFZhbHVlcyIsInZhbHVlcyIsInB1c2giLCJfX2V4dGVuZHMiLCJkIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJwIiwiY2FsbCIsIlN0cmluZyIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJfc3VwZXIiLCJUYXJnZXQiLCJvcHRfdGFyZ2V0IiwiX3RoaXMiLCJldmVudFRhcmdldF8iLCJwZW5kaW5nUmVtb3ZhbHNfIiwiZGlzcGF0Y2hpbmdfIiwibGlzdGVuZXJzXyIsImFkZEV2ZW50TGlzdGVuZXIiLCJsaXN0ZW5lciIsImxpc3RlbmVycyIsImxpc3RlbmVyc0ZvclR5cGUiLCJpbmRleE9mIiwiZGlzcGF0Y2hFdmVudCIsImV2ZW50IiwiZXZ0IiwiRXZlbnQiLCJwcm9wYWdhdGUiLCJkaXNwYXRjaGluZyIsInBlbmRpbmdSZW1vdmFscyIsImhhbmRsZUV2ZW50IiwicHIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0TGlzdGVuZXJzIiwidW5kZWZpbmVkIiwiaGFzTGlzdGVuZXIiLCJvcHRfdHlwZSIsImtleXMiLCJpbmRleCIsInNwbGljZSIsImxpc3RlbiIsIm9wdF90aGlzIiwib3B0X29uY2UiLCJiaW5kIiwib3JpZ2luYWxMaXN0ZW5lcl8xIiwiYXBwbHkiLCJldmVudHNLZXkiLCJsaXN0ZW5PbmNlIiwidW5saXN0ZW5CeUtleSIsIk9ic2VydmFibGUiLCJvbiIsIm9uY2UiLCJ1biIsInJldmlzaW9uXyIsImNoYW5nZWQiLCJFdmVudFR5cGUiLCJnZXRSZXZpc2lvbiIsIm9uSW50ZXJuYWwiLCJsZW4iLCJvbmNlSW50ZXJuYWwiLCJvbF9rZXkiLCJ1bkludGVybmFsIiwidW5CeUtleSIsIkVycm9yIiwidWlkQ291bnRlcl8iLCJnZXRVaWQiLCJvYmoiLCJvbF91aWQiLCJPYmplY3RFdmVudCIsIm9sZFZhbHVlIiwiQmFzZU9iamVjdCIsIm9wdF92YWx1ZXMiLCJ2YWx1ZXNfIiwic2V0UHJvcGVydGllcyIsImdldCIsImdldEtleXMiLCJnZXRQcm9wZXJ0aWVzIiwiaGFzUHJvcGVydGllcyIsIm5vdGlmeSIsImV2ZW50VHlwZSIsIk9iamVjdEV2ZW50VHlwZSIsImFkZENoYW5nZUxpc3RlbmVyIiwicmVtb3ZlQ2hhbmdlTGlzdGVuZXIiLCJzZXQiLCJvcHRfc2lsZW50IiwiYXBwbHlQcm9wZXJ0aWVzIiwidW5zZXQiLCJBc3NlcnRpb25FcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3BsaXQiLCJuYW1lIiwiYXNzZXJ0aW9uIiwiZXJyb3JDb2RlIiwibWluIiwibWF4IiwiTWF0aCIsImNvc2giLCJ4IiwieSIsImV4cCIsImxvZzIiLCJsb2ciLCJMT0cyRSIsInNxdWFyZWRTZWdtZW50RGlzdGFuY2UiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImR4IiwiZHkiLCJ0IiwidG9EZWdyZWVzIiwiYW5nbGVJblJhZGlhbnMiLCJQSSIsImFuZ2xlSW5EZWdyZWVzIiwiciIsImxlcnAiLCJ0b0ZpeGVkIiwiZGVjaW1hbHMiLCJmYWN0b3IiLCJwb3ciLCJyb3VuZCIsImZsb29yIiwiY2VpbCIsIkJhc2VMYXllciIsIm9wdGlvbnMiLCJiYWNrZ3JvdW5kXyIsImJhY2tncm91bmQiLCJwcm9wZXJ0aWVzIiwib3BhY2l0eSIsInZpc2libGUiLCJ6SW5kZXgiLCJtYXhSZXNvbHV0aW9uIiwiSW5maW5pdHkiLCJtaW5SZXNvbHV0aW9uIiwibWluWm9vbSIsIm1heFpvb20iLCJjbGFzc05hbWVfIiwiY2xhc3NOYW1lIiwic3RhdGVfIiwiZ2V0QmFja2dyb3VuZCIsImdldENsYXNzTmFtZSIsImdldExheWVyU3RhdGUiLCJvcHRfbWFuYWdlZCIsInN0YXRlIiwibGF5ZXIiLCJtYW5hZ2VkIiwiZ2V0WkluZGV4IiwiZ2V0T3BhY2l0eSIsInNvdXJjZVN0YXRlIiwiZ2V0U291cmNlU3RhdGUiLCJnZXRWaXNpYmxlIiwiZXh0ZW50IiwiZ2V0RXh0ZW50IiwiZ2V0TWF4UmVzb2x1dGlvbiIsImdldE1pblJlc29sdXRpb24iLCJnZXRNaW5ab29tIiwiZ2V0TWF4Wm9vbSIsImdldExheWVyc0FycmF5Iiwib3B0X2FycmF5IiwiZ2V0TGF5ZXJTdGF0ZXNBcnJheSIsIm9wdF9zdGF0ZXMiLCJzZXRCYWNrZ3JvdW5kIiwib3B0X2JhY2tncm91bmQiLCJzZXRFeHRlbnQiLCJzZXRNYXhSZXNvbHV0aW9uIiwic2V0TWluUmVzb2x1dGlvbiIsInNldE1heFpvb20iLCJzZXRNaW5ab29tIiwic2V0T3BhY2l0eSIsInNldFZpc2libGUiLCJzZXRaSW5kZXgiLCJ6aW5kZXgiLCJpblZpZXciLCJsYXllclN0YXRlIiwidmlld1N0YXRlIiwicmVzb2x1dGlvbiIsInpvb20iLCJMYXllciIsImJhc2VPcHRpb25zIiwibWFwUHJlY29tcG9zZUtleV8iLCJtYXBSZW5kZXJLZXlfIiwic291cmNlQ2hhbmdlS2V5XyIsInJlbmRlcmVyXyIsInJlbmRlciIsIm1hcCIsInNldE1hcCIsImhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyIsInNldFNvdXJjZSIsImFycmF5Iiwic3RhdGVzIiwiZ2V0U291cmNlIiwiZ2V0U3RhdGUiLCJoYW5kbGVTb3VyY2VDaGFuZ2VfIiwiZ2V0RmVhdHVyZXMiLCJwaXhlbCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZnJhbWVTdGF0ZSIsImxheWVyUmVuZGVyZXIiLCJnZXRSZW5kZXJlciIsInByZXBhcmVGcmFtZSIsInJlbmRlckZyYW1lIiwic2V0TWFwSW50ZXJuYWwiLCJnZXRNYXBJbnRlcm5hbCIsImxheWVyU3RhdGVzQXJyYXkiLCJzb21lIiwiYXJyYXlMYXllclN0YXRlIiwiY3JlYXRlUmVuZGVyZXIiLCJoYXNSZW5kZXJlciIsIkJhc2UiLCJCYXNlVGlsZUxheWVyIiwib3B0X29wdGlvbnMiLCJwcmVsb2FkIiwidXNlSW50ZXJpbVRpbGVzT25FcnJvciIsInNldFByZWxvYWQiLCJzZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yIiwiZ2V0UHJlbG9hZCIsIlRpbGVQcm9wZXJ0eSIsImdldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJMYXllclJlbmRlcmVyIiwiYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8iLCJoYW5kbGVJbWFnZUNoYW5nZV8iLCJsYXllcl8iLCJkZWNsdXR0ZXJFeGVjdXRvckdyb3VwIiwibG9hZGVkVGlsZUNhbGxiYWNrIiwidGlsZXMiLCJ0aWxlIiwidGlsZUNvb3JkIiwidG9TdHJpbmciLCJjcmVhdGVMb2FkZWRUaWxlRmluZGVyIiwicHJvamVjdGlvbiIsInRpbGVSYW5nZSIsImNhbGxiYWNrIiwiZm9yRWFjaExvYWRlZFRpbGUiLCJmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSIsImNvb3JkaW5hdGUiLCJoaXRUb2xlcmFuY2UiLCJtYXRjaGVzIiwiZ2V0RGF0YUF0UGl4ZWwiLCJnZXRMYXllciIsImhhbmRsZUZvbnRzQ2hhbmdlZCIsInJlbmRlcklmUmVhZHlBbmRWaXNpYmxlIiwibG9hZEltYWdlIiwiaW1hZ2UiLCJpbWFnZVN0YXRlIiwibG9hZCIsIlJlbmRlckV2ZW50Iiwib3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybSIsIm9wdF9mcmFtZVN0YXRlIiwib3B0X2NvbnRleHQiLCJpbnZlcnNlUGl4ZWxUcmFuc2Zvcm0iLCJjb250ZXh0IiwidHJhbnNmb3JtU3RyaW5nRGl2IiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsIkZJUkVGT1giLCJXRUJLSVQiLCJERVZJQ0VfUElYRUxfUkFUSU8iLCJkZXZpY2VQaXhlbFJhdGlvIiwiV09SS0VSX09GRlNDUkVFTl9DQU5WQVMiLCJXb3JrZXJHbG9iYWxTY29wZSIsIk9mZnNjcmVlbkNhbnZhcyIsIklNQUdFX0RFQ09ERSIsIkltYWdlIiwiZGVjb2RlIiwiUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMiLCJwYXNzaXZlIiwid2luZG93IiwiZXJyb3IiLCJ0cmFuc2Zvcm0iLCJjb21wb3NlIiwiZHgxIiwiZHkxIiwic3giLCJzeSIsImFuZ2xlIiwiZHgyIiwiZHkyIiwic2luIiwiY29zIiwibWFrZUludmVyc2UiLCJtYXQiLCJkZXQiLCJjIiwiZSIsImYiLCJIRVhfQ09MT1JfUkVfIiwiTkFNRURfQ09MT1JfUkVfIiwiZnJvbVN0cmluZyIsImNhY2hlIiwiY2FjaGVTaXplIiwicyIsImNvbG9yIiwiZyIsImV4ZWMiLCJlbCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiYm9keSIsImFwcGVuZENoaWxkIiwicmdiIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInJlbW92ZUNoaWxkIiwiZnJvbU5hbWVkIiwiaGFzQWxwaGEiLCJwYXJzZUludCIsInN1YnN0ciIsIm5vcm1hbGl6ZSIsInNsaWNlIiwiTnVtYmVyIiwiZnJvbVN0cmluZ0ludGVybmFsXyIsImFzQXJyYXkiLCJib3VuZGluZ0V4dGVudCIsImNvb3JkaW5hdGVzIiwiZXh0ZW5kQ29vcmRpbmF0ZSIsImNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSIsImNvbnRhaW5zQ29vcmRpbmF0ZSIsImNvbnRhaW5zWFkiLCJjb29yZGluYXRlUmVsYXRpb25zaGlwIiwibWluWCIsIm1pblkiLCJtYXhYIiwibWF4WSIsInJlbGF0aW9uc2hpcCIsImNyZWF0ZU9yVXBkYXRlIiwib3B0X2V4dGVudCIsImNyZWF0ZU9yVXBkYXRlRW1wdHkiLCJleHRlbnQxIiwiZXh0ZW50MiIsImV4dGVuZEZsYXRDb29yZGluYXRlcyIsImZsYXRDb29yZGluYXRlcyIsIm9mZnNldCIsImVuZCIsInN0cmlkZSIsImV4dGVuZFhZIiwiZm9yRWFjaENvcm5lciIsInZhbCIsImdldEJvdHRvbUxlZnQiLCJnZXRCb3R0b21SaWdodCIsImdldFRvcFJpZ2h0IiwiZ2V0VG9wTGVmdCIsImdldEFyZWEiLCJhcmVhIiwiZ2V0SGVpZ2h0IiwiZ2V0Q2VudGVyIiwiZ2V0Q29ybmVyIiwiY29ybmVyIiwiQ29ybmVyIiwiZ2V0Rm9yVmlld0FuZFNpemUiLCJjZW50ZXIiLCJyb3RhdGlvbiIsInNpemUiLCJjb3NSb3RhdGlvbiIsInNpblJvdGF0aW9uIiwieENvcyIsInhTaW4iLCJ5Q29zIiwieVNpbiIsIngwIiwieDMiLCJ5MCIsInkzIiwiZ2V0SW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0aW9uIiwiaW50ZXJzZWN0cyIsImNyZWF0ZUNhbnZhc0NvbnRleHQyRCIsIm9wdF93aWR0aCIsIm9wdF9oZWlnaHQiLCJvcHRfY2FudmFzUG9vbCIsIm9wdF9Db250ZXh0MkRTZXR0aW5ncyIsImNhbnZhcyIsInNoaWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJnZXRDb250ZXh0IiwicmVwbGFjZU5vZGUiLCJuZXdOb2RlIiwib2xkTm9kZSIsInBhcmVudCIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJyZW1vdmVOb2RlIiwibm9kZSIsIkNhbnZhc0xheWVyUmVuZGVyZXIiLCJjb250YWluZXIiLCJyZW5kZXJlZFJlc29sdXRpb24iLCJ0ZW1wVHJhbnNmb3JtIiwicGl4ZWxUcmFuc2Zvcm0iLCJjb250YWluZXJSZXVzZWQiLCJwaXhlbENvbnRleHRfIiwidXNlQ29udGFpbmVyIiwib3B0X2JhY2tncm91bmRDb2xvciIsImxheWVyQ2xhc3NOYW1lIiwiYmFja2dyb3VuZENvbG9yIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJIVE1MQ2FudmFzRWxlbWVudCIsInBvc2l0aW9uIiwibGVmdCIsInRyYW5zZm9ybU9yaWdpbiIsImNsaXBVbnJvdGF0ZWQiLCJ0b3BMZWZ0IiwidG9wUmlnaHQiLCJib3R0b21SaWdodCIsImJvdHRvbUxlZnQiLCJjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSIsImludmVydGVkIiwic2F2ZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsaXAiLCJkaXNwYXRjaFJlbmRlckV2ZW50XyIsImV2ZW50XzEiLCJwcmVSZW5kZXIiLCJwb3N0UmVuZGVyIiwiZ2V0UmVuZGVyVHJhbnNmb3JtIiwicGl4ZWxSYXRpbyIsIm9mZnNldFgiLCJyZW5kZXJQaXhlbCIsImxheWVyRXh0ZW50IiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0iLCJwaXhlbENvbnRleHQiLCJwaXhlbENhbnZhcyIsImNsZWFyUmVjdCIsImRyYXdJbWFnZSIsImdldEltYWdlRGF0YSIsImVyciIsIlVpbnQ4QXJyYXkiLCJUaWxlUmFuZ2UiLCJjb250YWlucyIsImNvbnRhaW5zVGlsZVJhbmdlIiwiZ2V0U2l6ZSIsImdldFdpZHRoIiwiSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIiwiaW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwibXNJbWFnZVNtb290aGluZ0VuYWJsZWQiLCJJTUFHRV9TTU9PVEhJTkdfRU5BQkxFRCIsIkNMQVNTX0hJRERFTiIsIkNMQVNTX0NPTlRST0wiLCJVbml0cyIsIlJlZ0V4cCIsImpvaW4iLCJSQURJQU5TIiwiREVHUkVFUyIsIkZFRVQiLCJNRVRFUlMiLCJQSVhFTFMiLCJUSUxFX1BJWEVMUyIsIlVTRkVFVCIsIlByb2plY3Rpb24iLCJjb2RlXyIsInVuaXRzXyIsImV4dGVudF8iLCJ3b3JsZEV4dGVudF8iLCJ3b3JsZEV4dGVudCIsImF4aXNPcmllbnRhdGlvbl8iLCJheGlzT3JpZW50YXRpb24iLCJnbG9iYWxfIiwiZ2xvYmFsIiwiY2FuV3JhcFhfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18iLCJnZXRQb2ludFJlc29sdXRpb24iLCJkZWZhdWx0VGlsZUdyaWRfIiwibWV0ZXJzUGVyVW5pdF8iLCJtZXRlcnNQZXJVbml0IiwiY2FuV3JhcFgiLCJnZXRDb2RlIiwiZ2V0VW5pdHMiLCJnZXRNZXRlcnNQZXJVbml0IiwiZ2V0V29ybGRFeHRlbnQiLCJnZXRBeGlzT3JpZW50YXRpb24iLCJpc0dsb2JhbCIsInNldEdsb2JhbCIsImdldERlZmF1bHRUaWxlR3JpZCIsInNldERlZmF1bHRUaWxlR3JpZCIsInRpbGVHcmlkIiwic2V0V29ybGRFeHRlbnQiLCJzZXRHZXRQb2ludFJlc29sdXRpb24iLCJmdW5jIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyIsIlJBRElVUyIsIkhBTEZfU0laRSIsIkVYVEVOVCIsIldPUkxEX0VYVEVOVCIsIk1BWF9TQUZFX1kiLCJ0YW4iLCJFUFNHMzg1N1Byb2plY3Rpb24iLCJ1bml0cyIsInBvaW50IiwiUFJPSkVDVElPTlMiLCJFUFNHNDMyNlByb2plY3Rpb24iLCJvcHRfYXhpc09yaWVudGF0aW9uIiwidHJhbnNmb3JtcyIsImRlc3RpbmF0aW9uIiwidHJhbnNmb3JtRm4iLCJzb3VyY2VDb2RlIiwiZGVzdGluYXRpb25Db2RlIiwiREVGQVVMVF9SQURJVVMiLCJnZXREaXN0YW5jZSIsImMxIiwiYzIiLCJvcHRfcmFkaXVzIiwicmFkaXVzIiwibGF0MSIsImxhdDIiLCJkZWx0YUxhdEJ5MiIsImRlbHRhTG9uQnkyIiwiYXRhbjIiLCJzcXJ0IiwiZGlzdGFuY2UiLCJiZWFyaW5nIiwibG9uMSIsImRCeVIiLCJsYXQiLCJhc2luIiwiY2xvbmVUcmFuc2Zvcm0iLCJpbnB1dCIsIm9wdF9vdXRwdXQiLCJvcHRfZGltZW5zaW9uIiwiaWRlbnRpdHlUcmFuc2Zvcm0iLCJhZGRQcm9qZWN0aW9uIiwiYWRkIiwicHJvamVjdGlvbkxpa2UiLCJyZXBsYWNlIiwib3B0X3VuaXRzIiwicG9pbnRSZXNvbHV0aW9uIiwiZ2V0dGVyIiwidG9FUFNHNDMyNl8xIiwiZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zIiwidmVydGljZXMiLCJhZGRFcXVpdmFsZW50UHJvamVjdGlvbnMiLCJwcm9qZWN0aW9ucyIsImZvckVhY2giLCJhZGRQcm9qZWN0aW9ucyIsImNyZWF0ZVByb2plY3Rpb24iLCJkZWZhdWx0Q29kZSIsImVxdWl2YWxlbnQiLCJwcm9qZWN0aW9uMSIsInByb2plY3Rpb24yIiwiZXF1YWxVbml0cyIsInNvdXJjZVByb2plY3Rpb24iLCJkZXN0aW5hdGlvblByb2plY3Rpb24iLCJ0cmFuc2Zvcm1GdW5jIiwiZ2V0VHJhbnNmb3JtIiwicHJvamVjdGlvbnMyIiwiZm9yd2FyZFRyYW5zZm9ybSIsImludmVyc2VUcmFuc2Zvcm0iLCJ1c2VyUHJvamVjdGlvbiIsImdldFVzZXJQcm9qZWN0aW9uIiwidG9Vc2VyQ29vcmRpbmF0ZSIsImZyb21Vc2VyQ29vcmRpbmF0ZSIsImRlc3RQcm9qZWN0aW9uIiwiZnJvbVVzZXJFeHRlbnQiLCJkaW1lbnNpb24iLCJhdGFuIiwiQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIiLCJ0aWxlTGF5ZXIiLCJleHRlbnRDaGFuZ2VkIiwicmVuZGVyZWRFeHRlbnRfIiwicmVuZGVyZWRQaXhlbFJhdGlvIiwicmVuZGVyZWRQcm9qZWN0aW9uIiwicmVuZGVyZWRSZXZpc2lvbiIsInJlbmRlcmVkVGlsZXMiLCJuZXdUaWxlc18iLCJ0bXBFeHRlbnQiLCJ0bXBUaWxlUmFuZ2VfIiwiaXNEcmF3YWJsZVRpbGUiLCJ0aWxlU3RhdGUiLCJnZXRUaWxlIiwieiIsInNldFN0YXRlIiwiZ2V0SW50ZXJpbVRpbGUiLCJsYXllckluZGV4Iiwidmlld1Jlc29sdXRpb24iLCJ2aWV3Q2VudGVyIiwidGlsZVNvdXJjZSIsInNvdXJjZVJldmlzaW9uIiwiZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwiZ2V0WkZvclJlc29sdXRpb24iLCJ6RGlyZWN0aW9uIiwidGlsZVJlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uIiwidGlsZVBpeGVsUmF0aW8iLCJnZXRUaWxlUGl4ZWxSYXRpbyIsImNhbnZhc0V4dGVudCIsImdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoiLCJ0aWxlc1RvRHJhd0J5WiIsImZpbmRMb2FkZWRUaWxlcyIsInRtcFRpbGVSYW5nZSIsInVpZCIsImluVHJhbnNpdGlvbiIsImdldEFscGhhIiwidGltZSIsImNoaWxkVGlsZVJhbmdlIiwiZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UiLCJjb3ZlcmVkIiwiZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSIsImNhbnZhc1NjYWxlIiwiY2FudmFzVHJhbnNmb3JtIiwidHJhbnNmb3JtU3RyaW5nIiwiZ2V0SW50ZXJwb2xhdGUiLCJjbGlwcyIsImNsaXBacyIsImN1cnJlbnRDbGlwIiwienMiLCJzb3J0IiwiZ2V0T3BhcXVlIiwicmV2ZXJzZSIsImN1cnJlbnRaIiwiY3VycmVudFRpbGVQaXhlbFNpemUiLCJnZXRUaWxlUGl4ZWxTaXplIiwiY3VycmVudFNjYWxlIiwiZHhfMSIsImR5XzEiLCJvcmlnaW5UaWxlQ29vcmQiLCJnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFoiLCJvcmlnaW5UaWxlRXh0ZW50IiwiZ2V0VGlsZUNvb3JkRXh0ZW50Iiwib3JpZ2luXzEiLCJ0aWxlR3V0dGVyIiwiZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiIsInRpbGVzVG9EcmF3IiwidGlsZUNvb3JkS2V5IiwieEluZGV4IiwibmV4dFgiLCJ5SW5kZXgiLCJuZXh0WSIsInciLCJoIiwidHJhbnNpdGlvbiIsImlfMSIsImRyYXdUaWxlSW1hZ2UiLCJyZXN0b3JlIiwidW5zaGlmdCIsInVwZGF0ZVVzZWRUaWxlcyIsInVzZWRUaWxlcyIsIm1hbmFnZVRpbGVQeXJhbWlkIiwic2NoZWR1bGVFeHBpcmVDYWNoZSIsImNzc09wYWNpdHkiLCJndXR0ZXIiLCJnZXRUaWxlSW1hZ2UiLCJhbHBoYSIsImFscGhhQ2hhbmdlZCIsImdsb2JhbEFscGhhIiwiYW5pbWF0ZSIsImVuZFRyYW5zaXRpb24iLCJnZXRJbWFnZSIsImNhbkV4cGlyZUNhY2hlIiwicG9zdFJlbmRlckZ1bmN0aW9uIiwidGlsZVNvdXJjZUtleSIsImV4cGlyZUNhY2hlIiwicG9zdFJlbmRlckZ1bmN0aW9ucyIsImdldEtleSIsIm9wdF90aWxlQ2FsbGJhY2siLCJ3YW50ZWRUaWxlcyIsInRpbGVRdWV1ZSIsInRpbGVDb3VudCIsImlzS2V5UXVldWVkIiwiZW5xdWV1ZSIsImdldFRpbGVDb29yZENlbnRlciIsInVzZVRpbGUiLCJ1cGRhdGVDYWNoZVNpemUiLCJUaWxlTGF5ZXIiLCJCYXNlVGlsZSIsIkNFTlRFUiIsIlJFU09MVVRJT04iLCJST1RBVElPTiIsImNvb3JkaW5hdGUxIiwiY29vcmRpbmF0ZTIiLCJjb3NBbmdsZSIsInNpbkFuZ2xlIiwiY3JlYXRlRXh0ZW50Iiwib25seUNlbnRlciIsInNtb290aCIsIm9wdF9pc01vdmluZyIsIm9wdF9jZW50ZXJTaGlmdCIsInZpZXdXaWR0aCIsInZpZXdIZWlnaHQiLCJzaGlmdFgiLCJzaGlmdFkiLCJyYXRpbyIsIm5vbmUiLCJnZXRWaWV3cG9ydENsYW1wZWRSZXNvbHV0aW9uIiwibWF4RXh0ZW50Iiwidmlld3BvcnRTaXplIiwic2hvd0Z1bGxFeHRlbnQiLCJ4UmVzb2x1dGlvbiIsInlSZXNvbHV0aW9uIiwiZ2V0U21vb3RoQ2xhbXBlZFJlc29sdXRpb24iLCJyZXN1bHQiLCJjcmVhdGVNaW5NYXhSZXNvbHV0aW9uIiwib3B0X3Ntb290aCIsIm9wdF9tYXhFeHRlbnQiLCJvcHRfc2hvd0Z1bGxFeHRlbnQiLCJjYXBwZWRNYXhSZXMiLCJkaXNhYmxlIiwiZWFzZUluIiwiZWFzZU91dCIsImluQW5kT3V0IiwibGluZWFyIiwidG1wVHJhbnNmb3JtIiwiR2VvbWV0cnkiLCJmbiIsImxhc3RSZXN1bHQiLCJsYXN0QXJncyIsImxhc3RUaGlzIiwiY2FsbGVkIiwiZXh0ZW50UmV2aXNpb25fIiwic2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSIsInNpbXBsaWZpZWRHZW9tZXRyeVJldmlzaW9uIiwic2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsIiwicmV2aXNpb24iLCJzcXVhcmVkVG9sZXJhbmNlIiwib3B0X3RyYW5zZm9ybSIsImdldFNpbXBsaWZpZWRHZW9tZXRyeSIsImNsb25lIiwiYXBwbHlUcmFuc2Zvcm0iLCJuZXh0QXJncyIsInNpbXBsaWZ5VHJhbnNmb3JtZWQiLCJjbG9zZXN0UG9pbnRYWSIsImNsb3Nlc3RQb2ludCIsIm1pblNxdWFyZWREaXN0YW5jZSIsImNvb3JkIiwiZ2V0Q2xvc2VzdFBvaW50Iiwib3B0X2Nsb3Nlc3RQb2ludCIsIk5hTiIsImludGVyc2VjdHNDb29yZGluYXRlIiwiY29tcHV0ZUV4dGVudCIsImlzTmFOIiwicmV0dXJuT3JVcGRhdGUiLCJyb3RhdGUiLCJhbmNob3IiLCJzY2FsZSIsIm9wdF9zeSIsIm9wdF9hbmNob3IiLCJzaW1wbGlmeSIsInRvbGVyYW5jZSIsImdldFR5cGUiLCJpbnRlcnNlY3RzRXh0ZW50IiwidHJhbnNsYXRlIiwiZGVsdGFYIiwiZGVsdGFZIiwic291cmNlUHJvaiIsImluQ29vcmRpbmF0ZXMiLCJvdXRDb29yZGluYXRlcyIsInBpeGVsRXh0ZW50IiwicHJvamVjdGVkRXh0ZW50Iiwib3B0X2Rlc3QiLCJkZXN0IiwiaiIsIlNpbXBsZUdlb21ldHJ5IiwibGF5b3V0IiwiR2VvbWV0cnlMYXlvdXQiLCJnZXRDb29yZGluYXRlcyIsImdldEZpcnN0Q29vcmRpbmF0ZSIsImdldEZsYXRDb29yZGluYXRlcyIsImdldExhc3RDb29yZGluYXRlIiwiZ2V0TGF5b3V0Iiwic2ltcGxpZmllZEdlb21ldHJ5IiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwiLCJnZXRTdHJpZGUiLCJzZXRGbGF0Q29vcmRpbmF0ZXMiLCJnZXRTdHJpZGVGb3JMYXlvdXQiLCJzZXRDb29yZGluYXRlcyIsIm9wdF9sYXlvdXQiLCJzZXRMYXlvdXQiLCJuZXN0aW5nIiwiZ2V0TGF5b3V0Rm9yU3RyaWRlIiwiYW5jaG9yWCIsImFuY2hvclkiLCJrIiwiYXNzaWduQ2xvc2VzdCIsIm9mZnNldDEiLCJvZmZzZXQyIiwibWF4U3F1YXJlZERlbHRhIiwic3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdFBvaW50IiwibWF4RGVsdGEiLCJpc1JpbmciLCJvcHRfdG1wUG9pbnQiLCJzcXVhcmVkRGlzdGFuY2UiLCJ0bXBQb2ludCIsImRlZmxhdGVDb29yZGluYXRlcyIsInNuYXAiLCJxdWFudGl6ZSIsInNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMiLCJzaW1wbGlmaWVkT2Zmc2V0IiwiaW5mbGF0ZUNvb3JkaW5hdGVzIiwib3B0X2Nvb3JkaW5hdGVzIiwibGluZWFyUmluZyIsInR3aWNlQXJlYSIsIkxpbmVhclJpbmciLCJtYXhEZWx0YV8iLCJtYXhEZWx0YVJldmlzaW9uXyIsIm1hcmtlcnMiLCJzdGFjayIsImxhc3QiLCJwb3AiLCJmaXJzdCIsIm1heFNxdWFyZWREaXN0YW5jZSIsInNxdWFyZWREaXN0YW5jZV8xIiwiZG91Z2xhc1BldWNrZXIiLCJQb2ludCIsImRlZmxhdGVDb29yZGluYXRlIiwibGluZWFyUmluZ0NvbnRhaW5zRXh0ZW50IiwibGluZWFyUmluZ0NvbnRhaW5zWFkiLCJ3biIsImxpbmVhclJpbmdzQ29udGFpbnNYWSIsImVuZHMiLCJpbnRlcnNlY3RzTGluZVN0cmluZyIsImNvb3JkaW5hdGVzRXh0ZW50IiwicmV0IiwicG9pbnQxIiwicG9pbnQyIiwic3RhcnQiLCJzdGFydFJlbCIsImVuZFJlbCIsInN0YXJ0WCIsInN0YXJ0WSIsImVuZFgiLCJlbmRZIiwic2xvcGUiLCJpbnRlcnNlY3RzU2VnbWVudCIsInRtcCIsImxpbmVhclJpbmdJc0Nsb2Nrd2lzZSIsImVkZ2UiLCJvcmllbnRMaW5lYXJSaW5ncyIsIm9wdF9yaWdodCIsInJpZ2h0IiwiaXNDbG9ja3dpc2UiLCJQb2x5Z29uIiwib3B0X2VuZHMiLCJlbmRzXyIsImZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fIiwiZmxhdEludGVyaW9yUG9pbnRfIiwib3JpZW50ZWRSZXZpc2lvbl8iLCJvcmllbnRlZEZsYXRDb29yZGluYXRlc18iLCJhcHBlbmRMaW5lYXJSaW5nIiwicG9seWdvbiIsImFycmF5TWF4U3F1YXJlZERlbHRhIiwiYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQiLCJnZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcyIsImxpbmVhclJpbmdzIiwib3B0X2Nvb3JkaW5hdGVzcyIsImNvb3JkaW5hdGVzcyIsImpqIiwiaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJnZXRFbmRzIiwiZ2V0RmxhdEludGVyaW9yUG9pbnQiLCJmbGF0Q2VudGVyIiwiZmxhdENlbnRlcnMiLCJmbGF0Q2VudGVyc09mZnNldCIsImludGVyc2VjdGlvbnMiLCJyciIsInBvaW50WCIsIm1heFNlZ21lbnRMZW5ndGgiLCJzZWdtZW50TGVuZ3RoIiwiYWJzIiwiZ2V0SW50ZXJpb3JQb2ludE9mQXJyYXkiLCJnZXRJbnRlcmlvclBvaW50IiwiZ2V0TGluZWFyUmluZ0NvdW50IiwiZ2V0TGluZWFyUmluZyIsImdldExpbmVhclJpbmdzIiwibGluZWFyUmluZ3NBcmVPcmllbnRlZCIsInNpbXBsaWZpZWRFbmRzIiwicXVhbnRpemVBcnJheSIsImludGVyc2VjdHNMaW5lYXJSaW5nIiwiaW50ZXJzZWN0c0xpbmVhclJpbmdBcnJheSIsImRlZmxhdGVDb29yZGluYXRlc0FycmF5IiwiZnJvbUV4dGVudCIsIlZpZXciLCJoaW50c18iLCJhbmltYXRpb25zXyIsInVwZGF0ZUFuaW1hdGlvbktleV8iLCJwcm9qZWN0aW9uXyIsInZpZXdwb3J0U2l6ZV8iLCJ0YXJnZXRDZW50ZXJfIiwidGFyZ2V0UmVzb2x1dGlvbl8iLCJ0YXJnZXRSb3RhdGlvbl8iLCJuZXh0Q2VudGVyXyIsIm5leHRSZXNvbHV0aW9uXyIsIm5leHRSb3RhdGlvbl8iLCJjYW5jZWxBbmNob3JfIiwiYXBwbHlPcHRpb25zXyIsIlZpZXdQcm9wZXJ0eSIsInJlc29sdXRpb25Db25zdHJhaW50SW5mbyIsInJlc29sdXRpb25Db25zdHJhaW50Iiwiem9vbUZhY3RvciIsIm11bHRpV29ybGQiLCJzbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludCIsInByb2pFeHRlbnQiLCJjb25zdHJhaW5Pbmx5Q2VudGVyIiwicmVzb2x1dGlvbnMiLCJjb25zdHJhaW5SZXNvbHV0aW9uIiwiY2FwcGVkIiwiY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMiLCJkZWZhdWx0TWF4UmVzb2x1dGlvbiIsImRlZmF1bHRNaW5SZXNvbHV0aW9uIiwiZGVmYXVsdE1heFpvb20iLCJwb3dlciIsIm9wdF9taW5SZXNvbHV0aW9uIiwibWluWm9vbUxldmVsIiwiY2FwcGVkWm9vbUxldmVsIiwiem9vbUxldmVsIiwiY3JlYXRlU25hcFRvUG93ZXIiLCJjb25zdHJhaW50IiwiY3JlYXRlUmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJtYXhSZXNvbHV0aW9uXyIsIm1pblJlc29sdXRpb25fIiwiem9vbUZhY3Rvcl8iLCJyZXNvbHV0aW9uc18iLCJwYWRkaW5nXyIsInBhZGRpbmciLCJtaW5ab29tXyIsImNlbnRlckNvbnN0cmFpbnQiLCJzbW9vdGhFeHRlbnRDb25zdHJhaW50IiwiY3JlYXRlQ2VudGVyQ29uc3RyYWludCIsInJvdGF0aW9uQ29uc3RyYWludCIsImVuYWJsZVJvdGF0aW9uIiwiY29uc3RyYWluUm90YXRpb24iLCJ0aGV0YSIsImNyZWF0ZVJvdGF0aW9uQ29uc3RyYWludCIsImNvbnN0cmFpbnRzXyIsInNldFJvdGF0aW9uIiwic2V0Q2VudGVySW50ZXJuYWwiLCJzZXRSZXNvbHV0aW9uIiwic2V0Wm9vbSIsIm9sZFBhZGRpbmciLCJuZXdQYWRkaW5nIiwib2Zmc2V0WSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJnZXRVcGRhdGVkT3B0aW9uc18iLCJuZXdPcHRpb25zIiwiZ2V0Wm9vbSIsImdldENlbnRlckludGVybmFsIiwiZ2V0Um90YXRpb24iLCJ2YXJfYXJncyIsImlzRGVmIiwiZ2V0QW5pbWF0aW5nIiwicmVzb2x2ZUNvbnN0cmFpbnRzIiwiYXJncyIsImdldFByb2plY3Rpb24iLCJhbmltYXRlSW50ZXJuYWwiLCJhbmltYXRpb25Db3VudCIsIkRhdGUiLCJub3ciLCJzZXJpZXMiLCJhbmltYXRpb24iLCJjb21wbGV0ZSIsImR1cmF0aW9uIiwiZWFzaW5nIiwic291cmNlQ2VudGVyIiwidGFyZ2V0Q2VudGVyIiwic291cmNlUmVzb2x1dGlvbiIsInRhcmdldFJlc29sdXRpb24iLCJnZXRSZXNvbHV0aW9uRm9yWm9vbSIsInNvdXJjZVJvdGF0aW9uIiwiZGVsdGEiLCJ0YXJnZXRSb3RhdGlvbiIsImlzTm9vcEFuaW1hdGlvbiIsInNldEhpbnQiLCJ1cGRhdGVBbmltYXRpb25zXyIsImFuaW1hdGlvbkNhbGxiYWNrIiwiZ2V0SW50ZXJhY3RpbmciLCJjYW5jZWxBbmltYXRpb25zIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJtb3JlIiwic2VyaWVzQ29tcGxldGUiLCJlbGFwc2VkIiwiZnJhY3Rpb24iLCJwcm9ncmVzcyIsImdldFZpZXdwb3J0U2l6ZV8iLCJjb25zdHJhaW5lZFJlc29sdXRpb24iLCJjYWxjdWxhdGVDZW50ZXJab29tIiwiYXBwbHlUYXJnZXRTdGF0ZV8iLCJjb25zdHJhaW5lZFJvdGF0aW9uIiwiY2FsY3VsYXRlQ2VudGVyUm90YXRlIiwiZmlsdGVyIiwiQm9vbGVhbiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImN1cnJlbnRDZW50ZXIiLCJjdXJyZW50UmVzb2x1dGlvbiIsIm9wdF9yb3RhdGlvbiIsInNldFZpZXdwb3J0U2l6ZSIsIm9wdF9zaXplIiwiZ2V0Q29uc3RyYWludHMiLCJnZXRDb25zdHJhaW5SZXNvbHV0aW9uIiwiZ2V0SGludHMiLCJvcHRfaGludHMiLCJjYWxjdWxhdGVFeHRlbnQiLCJjYWxjdWxhdGVFeHRlbnRJbnRlcm5hbCIsImdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18iLCJnZXRab29tRm9yUmVzb2x1dGlvbiIsInNldENvbnN0cmFpblJlc29sdXRpb24iLCJlbmFibGVkIiwiZ2V0UmVzb2x1dGlvbnMiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50IiwiZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsIiwiZ2V0UmVzb2x1dGlvbkZvclZhbHVlRnVuY3Rpb24iLCJvcHRfcG93ZXIiLCJnZXRDb25zdHJhaW5lZFJlc29sdXRpb24iLCJnZXRWYWx1ZUZvclJlc29sdXRpb25GdW5jdGlvbiIsImxvZ1Bvd2VyIiwicmVkdWNlZFNpemUiLCJjYWxjdWxhdGVDZW50ZXJPbiIsIm5leHRDZW50ZXIiLCJuZXh0UmVzb2x1dGlvbiIsIm5leHRSb3RhdGlvbiIsIm5lYXJlc3QiLCJiYXNlTGV2ZWwiLCJmaXQiLCJnZW9tZXRyeU9yRXh0ZW50IiwiZ2VvbWV0cnkiLCJmaXRJbnRlcm5hbCIsInJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeSIsImNvb3JkcyIsIm1pblJvdFgiLCJtaW5Sb3RZIiwibWF4Um90WCIsIm1heFJvdFkiLCJyb3RYIiwicm90WSIsInJvdGF0ZWRFeHRlbnQiLCJjZW50ZXJSb3QiLCJjZW50ZXJYIiwiY2VudGVyWSIsImdldENvbnN0cmFpbmVkQ2VudGVyIiwiY2VudGVyT24iLCJjZW50ZXJPbkludGVybmFsIiwiY2FsY3VsYXRlQ2VudGVyU2hpZnQiLCJjZW50ZXJTaGlmdCIsInNoaWZ0ZWRDZW50ZXIiLCJhZGp1c3RDZW50ZXIiLCJkZWx0YUNvb3JkaW5hdGVzIiwic2V0Q2VudGVyIiwiYWRqdXN0Q2VudGVySW50ZXJuYWwiLCJhZGp1c3RSZXNvbHV0aW9uIiwiYWRqdXN0UmVzb2x1dGlvbkludGVybmFsIiwiaXNNb3ZpbmciLCJuZXdSZXNvbHV0aW9uIiwiYWRqdXN0Wm9vbSIsImFkanVzdFJvdGF0aW9uIiwiYWRqdXN0Um90YXRpb25JbnRlcm5hbCIsIm5ld1JvdGF0aW9uIiwiaGludCIsIm9wdF9kb05vdENhbmNlbEFuaW1zIiwib3B0X2ZvcmNlTW92aW5nIiwibmV3Q2VudGVyIiwib3B0X2R1cmF0aW9uIiwib3B0X3Jlc29sdXRpb25EaXJlY3Rpb24iLCJiZWdpbkludGVyYWN0aW9uIiwiZW5kSW50ZXJhY3Rpb24iLCJlbmRJbnRlcmFjdGlvbkludGVybmFsIiwib3B0X3RhcmdldFJlc29sdXRpb24iLCJnZXRDb25zdHJhaW5lZFpvb20iLCJ0YXJnZXRab29tIiwib3B0X2RpcmVjdGlvbiIsInRhcmdldFJlcyIsInJldHVyblZhbHVlIiwic2V0VGltZW91dCIsInNyYyIsImNyb3NzT3JpZ2luIiwiYXNTdHJpbmciLCJzaGFyZWQiLCJJY29uSW1hZ2VDYWNoZSIsImNhY2hlXyIsImNhY2hlU2l6ZV8iLCJtYXhDYWNoZVNpemVfIiwiZXhwaXJlIiwiaWNvbkltYWdlIiwic2V0U2l6ZSIsIm1heENhY2hlU2l6ZSIsIk1hcFJlbmRlcmVyIiwibWFwXyIsImRpc3BhdGNoUmVuZGVyRXZlbnQiLCJjYWxjdWxhdGVNYXRyaWNlczJEIiwiY2hlY2tXcmFwcGVkIiwidGhpc0FyZyIsImxheWVyRmlsdGVyIiwidGhpc0FyZzIiLCJmZWF0dXJlIiwidHJhbnNsYXRlZENvb3JkaW5hdGUiLCJ3b3JsZFdpZHRoIiwid29ybGRzQXdheSIsIm9wdF9zb3VyY2VFeHRlbnRXaWR0aCIsInByb2plY3Rpb25FeHRlbnQiLCJzb3VyY2VFeHRlbnRXaWR0aCIsIm9mZnNldHMiLCJsYXllclN0YXRlcyIsIm51bUxheWVycyIsInRtcENvb3JkIiwiZ2V0V3JhcFgiLCJjYWxsYmFja18xIiwib3JkZXIiLCJtIiwiZGlzdGFuY2VTcSIsImZvckVhY2hMYXllckF0UGl4ZWwiLCJoYXNGZWF0dXJlQXRDb29yZGluYXRlIiwiZ2V0TWFwIiwic2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUiLCJleHBpcmVJY29uQ2FjaGUiLCJjaGVja2VkRm9udHMiLCJjb25zb2xlIiwid2FybiIsIkNvbXBvc2l0ZU1hcFJlbmRlcmVyIiwiZm9udENoYW5nZUxpc3RlbmVyS2V5XyIsInJlZHJhd1RleHQiLCJlbGVtZW50XyIsIkNMQVNTX1VOU0VMRUNUQUJMRSIsImdldFZpZXdwb3J0IiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImNoaWxkcmVuXyIsInJlbmRlcmVkVmlzaWJsZV8iLCJkZWNsdXR0ZXJMYXllcnMiLCJwcmV2aW91c0VsZW1lbnQiLCJlbGVtZW50IiwicmVuZGVyRGVjbHV0dGVyIiwiY2hpbGRyZW4iLCJvbGRDaGlsZHJlbiIsImNoaWxkTm9kZXMiLCJvbGRDaGlsZCIsIm5ld0NoaWxkIiwicmVwbGFjZUNoaWxkcmVuIiwiZGlzcGxheSIsIk1hcCIsIkNvbGxlY3Rpb25FdmVudCIsIm9wdF9lbGVtZW50Iiwib3B0X2luZGV4IiwiQ29sbGVjdGlvbiIsInVuaXF1ZV8iLCJ1bmlxdWUiLCJhcnJheV8iLCJhc3NlcnRVbmlxdWVfIiwidXBkYXRlTGVuZ3RoXyIsImdldExlbmd0aCIsImdldEFycmF5IiwiaXRlbSIsImluc2VydEF0IiwiZWxlbSIsIkNvbGxlY3Rpb25FdmVudFR5cGUiLCJyZW1vdmVBdCIsInJlbW92ZSIsInByZXYiLCJzZXRBdCIsIm9wdF9leGNlcHQiLCJHcm91cEV2ZW50IiwiTGF5ZXJHcm91cCIsImxheWVycyIsImxheWVyc0xpc3RlbmVyS2V5c18iLCJsaXN0ZW5lcktleXNfIiwiaGFuZGxlTGF5ZXJzQ2hhbmdlZF8iLCJzZXRMYXllcnMiLCJoYW5kbGVMYXllckNoYW5nZV8iLCJnZXRMYXllcnMiLCJpZCIsImhhbmRsZUxheWVyc0FkZF8iLCJoYW5kbGVMYXllcnNSZW1vdmVfIiwibGF5ZXJzQXJyYXkiLCJyZWdpc3RlckxheWVyTGlzdGVuZXJzXyIsImxpc3RlbmVyS2V5cyIsImhhbmRsZUxheWVyR3JvdXBBZGRfIiwiaGFuZGxlTGF5ZXJHcm91cFJlbW92ZV8iLCJjb2xsZWN0aW9uRXZlbnQiLCJjb2xsZWN0aW9uIiwiY3VycmVudExheWVycyIsInBvcyIsIm93bkxheWVyU3RhdGUiLCJkZWZhdWx0WkluZGV4IiwiTWFwRXZlbnQiLCJNYXBCcm93c2VyRXZlbnQiLCJvcmlnaW5hbEV2ZW50Iiwib3B0X2RyYWdnaW5nIiwicGl4ZWxfIiwiY29vcmRpbmF0ZV8iLCJkcmFnZ2luZyIsImdldEV2ZW50UGl4ZWwiLCJnZXRDb29yZGluYXRlRnJvbVBpeGVsIiwiU0lOR0xFQ0xJQ0siLCJDTElDSyIsIkRCTENMSUNLIiwiUE9JTlRFUkRSQUciLCJQT0lOVEVSTU9WRSIsIlBPSU5URVJET1dOIiwiUE9JTlRFUlVQIiwiUE9JTlRFUk9WRVIiLCJQT0lOVEVST1VUIiwiUE9JTlRFUkVOVEVSIiwiUE9JTlRFUkxFQVZFIiwiUE9JTlRFUkNBTkNFTCIsIk1hcEJyb3dzZXJFdmVudEhhbmRsZXIiLCJtb3ZlVG9sZXJhbmNlIiwiY2xpY2tUaW1lb3V0SWRfIiwiZW11bGF0ZUNsaWNrc18iLCJkcmFnZ2luZ18iLCJkcmFnTGlzdGVuZXJLZXlzXyIsIm1vdmVUb2xlcmFuY2VfIiwiZG93bl8iLCJhY3RpdmVQb2ludGVyc18iLCJ0cmFja2VkVG91Y2hlc18iLCJwb2ludGVyZG93bkxpc3RlbmVyS2V5XyIsImhhbmRsZVBvaW50ZXJEb3duXyIsIm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF8iLCJyZWxheWVkTGlzdGVuZXJLZXlfIiwicmVsYXlFdmVudF8iLCJib3VuZEhhbmRsZVRvdWNoTW92ZV8iLCJoYW5kbGVUb3VjaE1vdmVfIiwiZW11bGF0ZUNsaWNrXyIsInBvaW50ZXJFdmVudCIsIm5ld0V2ZW50IiwiY2xlYXJUaW1lb3V0IiwidXBkYXRlQWN0aXZlUG9pbnRlcnNfIiwicG9pbnRlcklkIiwiaGFuZGxlUG9pbnRlclVwXyIsImlzTW91c2VBY3Rpb25CdXR0b25fIiwiYnV0dG9uIiwiZG9jIiwiZ2V0T3duZXJEb2N1bWVudCIsImhhbmRsZVBvaW50ZXJNb3ZlXyIsImdldFJvb3ROb2RlIiwiaXNNb3ZpbmdfIiwiY2FuY2VsYWJsZSIsImNsaWVudFgiLCJjbGllbnRZIiwiRFJPUCIsIlByaW9yaXR5UXVldWUiLCJwcmlvcml0eUZ1bmN0aW9uIiwia2V5RnVuY3Rpb24iLCJwcmlvcml0eUZ1bmN0aW9uXyIsImtleUZ1bmN0aW9uXyIsImVsZW1lbnRzXyIsInByaW9yaXRpZXNfIiwicXVldWVkRWxlbWVudHNfIiwiZGVxdWV1ZSIsImVsZW1lbnRzIiwicHJpb3JpdGllcyIsInNpZnRVcF8iLCJlbGVtZW50S2V5IiwicHJpb3JpdHkiLCJzaWZ0RG93bl8iLCJnZXRDb3VudCIsImdldExlZnRDaGlsZEluZGV4XyIsImdldFJpZ2h0Q2hpbGRJbmRleF8iLCJnZXRQYXJlbnRJbmRleF8iLCJoZWFwaWZ5XyIsImlzRW1wdHkiLCJpc1F1ZXVlZCIsImNvdW50Iiwic3RhcnRJbmRleCIsImxJbmRleCIsInJJbmRleCIsInNtYWxsZXJDaGlsZEluZGV4IiwicGFyZW50SW5kZXgiLCJyZXByaW9yaXRpemUiLCJUaWxlUXVldWUiLCJ0aWxlUHJpb3JpdHlGdW5jdGlvbiIsInRpbGVDaGFuZ2VDYWxsYmFjayIsImJvdW5kSGFuZGxlVGlsZUNoYW5nZV8iLCJoYW5kbGVUaWxlQ2hhbmdlIiwidGlsZUNoYW5nZUNhbGxiYWNrXyIsInRpbGVzTG9hZGluZ18iLCJ0aWxlc0xvYWRpbmdLZXlzXyIsImFkZGVkIiwiZ2V0VGlsZXNMb2FkaW5nIiwidGlsZUtleSIsImxvYWRNb3JlVGlsZXMiLCJtYXhUb3RhbExvYWRpbmciLCJtYXhOZXdMb2FkcyIsIm5ld0xvYWRzIiwiaGFzQXJlYSIsInRvU2l6ZSIsInJlbW92ZUxheWVyTWFwUHJvcGVydHkiLCJzZXRMYXllck1hcFByb3BlcnR5IiwiUGx1Z2dhYmxlTWFwIiwib3B0aW9uc0ludGVybmFsIiwia2V5Ym9hcmRFdmVudFRhcmdldCIsImdldEVsZW1lbnRCeUlkIiwiY29udHJvbHMiLCJpbnRlcmFjdGlvbnMiLCJvdmVybGF5cyIsImxheWVyR3JvdXAiLCJ2aWV3IiwiY3JlYXRlT3B0aW9uc0ludGVybmFsIiwicmVuZGVyQ29tcGxldGVfIiwiYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfIiwiaGFuZGxlQnJvd3NlckV2ZW50IiwibWF4VGlsZXNMb2FkaW5nXyIsIm1heFRpbGVzTG9hZGluZyIsInBpeGVsUmF0aW9fIiwicG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfIiwiYW5pbWF0aW9uRGVsYXlLZXlfIiwiYW5pbWF0aW9uRGVsYXlfIiwicmVuZGVyRnJhbWVfIiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fIiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fIiwiZnJhbWVJbmRleF8iLCJmcmFtZVN0YXRlXyIsInByZXZpb3VzRXh0ZW50XyIsInZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyIsInZpZXdDaGFuZ2VMaXN0ZW5lcktleV8iLCJsYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfIiwidmlld3BvcnRfIiwib3ZlcmZsb3ciLCJvdmVybGF5Q29udGFpbmVyXyIsInBvaW50ZXJFdmVudHMiLCJvdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XyIsIm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfIiwia2V5Ym9hcmRFdmVudFRhcmdldF8iLCJ0YXJnZXRDaGFuZ2VIYW5kbGVyS2V5c18iLCJvdmVybGF5c18iLCJvdmVybGF5SWRJbmRleF8iLCJwb3N0UmVuZGVyRnVuY3Rpb25zXyIsInRpbGVRdWV1ZV8iLCJnZXRUaWxlUHJpb3JpdHkiLCJoYW5kbGVUaWxlQ2hhbmdlXyIsIk1hcFByb3BlcnR5IiwiaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfIiwiaGFuZGxlVmlld0NoYW5nZWRfIiwiaGFuZGxlU2l6ZUNoYW5nZWRfIiwiaGFuZGxlVGFyZ2V0Q2hhbmdlZF8iLCJ0aGVuIiwidmlld09wdGlvbnMiLCJzZXRWaWV3IiwiYWRkT3ZlcmxheUludGVybmFsXyIsImdldElkIiwiY29udHJvbCIsImludGVyYWN0aW9uIiwiYWRkQ29udHJvbCIsImdldENvbnRyb2xzIiwiYWRkSW50ZXJhY3Rpb24iLCJnZXRJbnRlcmFjdGlvbnMiLCJhZGRMYXllciIsImdldExheWVyR3JvdXAiLCJoYW5kbGVMYXllckFkZF8iLCJhZGRPdmVybGF5Iiwib3ZlcmxheSIsImdldE92ZXJsYXlzIiwic2V0VGFyZ2V0IiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwiZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsIiwiZ2V0RmVhdHVyZXNBdFBpeGVsIiwiZmVhdHVyZXMiLCJnZXRBbGxMYXllcnMiLCJhZGRMYXllcnNGcm9tIiwiaGFzRmVhdHVyZUF0UGl4ZWwiLCJnZXRFdmVudENvb3JkaW5hdGUiLCJnZXRFdmVudENvb3JkaW5hdGVJbnRlcm5hbCIsInZpZXdwb3J0UG9zaXRpb24iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJldmVudFBvc2l0aW9uIiwiY2hhbmdlZFRvdWNoZXMiLCJ0b3AiLCJnZXRUYXJnZXQiLCJnZXRUYXJnZXRFbGVtZW50IiwiZ2V0VmlldyIsImdldE92ZXJsYXlCeUlkIiwiZ3JvdXAiLCJnZXRMb2FkaW5nIiwibG9hZGluZyIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGUiLCJ2aWV3Q29vcmRpbmF0ZSIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCIsImdldE92ZXJsYXlDb250YWluZXIiLCJnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50IiwidGFyZ2V0RWxlbWVudCIsIm93bmVyRG9jdW1lbnQiLCJ0aWxlQ2VudGVyIiwiYnJvd3NlckV2ZW50IiwibWFwQnJvd3NlckV2ZW50IiwiaGFuZGxlTWFwQnJvd3NlckV2ZW50Iiwicm9vdE5vZGUiLCJkb2N1bWVudEVsZW1lbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsImdldEFjdGl2ZSIsImhhbmRsZVBvc3RSZW5kZXIiLCJoaW50cyIsInZpZXdIaW50cyIsImxvd09uRnJhbWVCdWRnZXQiLCJkZWZhdWx0VmlldyIsInVwZGF0ZVNpemUiLCJoYW5kbGVWaWV3UHJvcGVydHlDaGFuZ2VkXyIsInVwZGF0ZVZpZXdwb3J0U2l6ZV8iLCJoYW5kbGVMYXllclJlbW92ZV8iLCJpc1JlbmRlcmVkIiwicmVuZGVyU3luYyIsInJlbW92ZUNvbnRyb2wiLCJyZW1vdmVJbnRlcmFjdGlvbiIsInJlbW92ZUxheWVyIiwicmVtb3ZlT3ZlcmxheSIsInByZXZpb3VzRnJhbWVTdGF0ZSIsImRlY2x1dHRlclRyZWUiLCJtYXBJZCIsInJlbmRlclRhcmdldHMiLCJuZXh0RXh0ZW50IiwiTWFwRXZlbnRUeXBlIiwic2V0TGF5ZXJHcm91cCIsIm9sZExheWVyR3JvdXAiLCJjb21wdXRlZFN0eWxlIiwib2Zmc2V0V2lkdGgiLCJwYXJzZUZsb2F0Iiwib2Zmc2V0SGVpZ2h0IiwiZ2V0Q2xpZW50UmVjdHMiLCJDb250cm9sIiwidGFyZ2V0XyIsIm1hcEV2ZW50IiwiQXR0cmlidXRpb24iLCJ1bEVsZW1lbnRfIiwiY29sbGFwc2VkXyIsImNvbGxhcHNlZCIsInVzZXJDb2xsYXBzZWRfIiwib3ZlcnJpZGVDb2xsYXBzaWJsZV8iLCJjb2xsYXBzaWJsZSIsImNvbGxhcHNpYmxlXyIsInRpcExhYmVsIiwiZXhwYW5kQ2xhc3NOYW1lIiwiY29sbGFwc2VMYWJlbCIsImNvbGxhcHNlQ2xhc3NOYW1lIiwiY29sbGFwc2VMYWJlbF8iLCJ0ZXh0Q29udGVudCIsImxhYmVsIiwibGFiZWxfIiwiYWN0aXZlTGFiZWwiLCJ0b2dnbGVCdXR0b25fIiwic2V0QXR0cmlidXRlIiwidGl0bGUiLCJoYW5kbGVDbGlja18iLCJjc3NDbGFzc2VzIiwicmVuZGVyZWRBdHRyaWJ1dGlvbnNfIiwiY29sbGVjdFNvdXJjZUF0dHJpYnV0aW9uc18iLCJsb29rdXAiLCJ2aXNpYmxlQXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25HZXR0ZXIiLCJnZXRBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbnMiLCJnZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsInNldENvbGxhcHNpYmxlIiwidXBkYXRlRWxlbWVudF8iLCJsYXN0Q2hpbGQiLCJyZW1vdmVDaGlsZHJlbiIsImlubmVySFRNTCIsImhhbmRsZVRvZ2dsZV8iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJnZXRDb2xsYXBzaWJsZSIsInNldENvbGxhcHNlZCIsImdldENvbGxhcHNlZCIsIlJvdGF0ZSIsImNvbXBhc3NDbGFzc05hbWUiLCJjYWxsUmVzZXROb3J0aF8iLCJyZXNldE5vcnRoIiwiZHVyYXRpb25fIiwiYXV0b0hpZGVfIiwiYXV0b0hpZGUiLCJyb3RhdGlvbl8iLCJyZXNldE5vcnRoXyIsIlpvb20iLCJ6b29tSW5DbGFzc05hbWUiLCJ6b29tT3V0Q2xhc3NOYW1lIiwiem9vbUluTGFiZWwiLCJ6b29tT3V0TGFiZWwiLCJ6b29tSW5UaXBMYWJlbCIsInpvb21PdXRUaXBMYWJlbCIsImluRWxlbWVudCIsImNyZWF0ZVRleHROb2RlIiwib3V0RWxlbWVudCIsInpvb21CeURlbHRhXyIsImN1cnJlbnRab29tIiwibmV3Wm9vbSIsInpvb21CeURlbHRhIiwiSW50ZXJhY3Rpb24iLCJzZXRBY3RpdmUiLCJhY3RpdmUiLCJEb3VibGVDbGlja1pvb20iLCJkZWx0YV8iLCJzdG9wRXZlbnQiLCJzaGlmdEtleSIsIlBvaW50ZXJJbnRlcmFjdGlvbiIsImhhbmRsZURvd25FdmVudCIsImhhbmRsZURyYWdFdmVudCIsImhhbmRsZU1vdmVFdmVudCIsImhhbmRsZVVwRXZlbnQiLCJzdG9wRG93biIsImhhbmRsaW5nRG93blVwU2VxdWVuY2UiLCJ0cmFja2VkUG9pbnRlcnNfIiwidGFyZ2V0UG9pbnRlcnMiLCJnZXRQb2ludGVyQ291bnQiLCJ1cGRhdGVUcmFja2VkUG9pbnRlcnNfIiwiaGFuZGxlZFVwIiwiaGFuZGxlZCIsImlzUG9pbnRlckRyYWdnaW5nRXZlbnQiLCJjb25kaXRpb25zIiwicGFzcyIsImFsdFNoaWZ0S2V5c09ubHkiLCJhbHRLZXkiLCJtZXRhS2V5IiwiY3RybEtleSIsImZvY3VzV2l0aFRhYmluZGV4IiwiaGFzQXR0cmlidXRlIiwiYWN0aXZlRWxlbWVudCIsImFsd2F5cyIsIm1vdXNlQWN0aW9uQnV0dG9uIiwibm9Nb2RpZmllcktleXMiLCJzaGlmdEtleU9ubHkiLCJ0YXJnZXROb3RFZGl0YWJsZSIsInRhZ05hbWUiLCJtb3VzZU9ubHkiLCJwb2ludGVyVHlwZSIsInByaW1hcnlBY3Rpb24iLCJpc1ByaW1hcnkiLCJEcmFnUGFuIiwia2luZXRpY18iLCJraW5ldGljIiwibGFzdENlbnRyb2lkIiwibGFzdFBvaW50ZXJzQ291bnRfIiwicGFubmluZ18iLCJjb25kaXRpb24iLCJjb25kaXRpb25fIiwib25Gb2N1c09ubHkiLCJub0tpbmV0aWNfIiwiY2VudHJvaWQiLCJ1cGRhdGUiLCJiZWdpbiIsImdldEFuZ2xlIiwiY2VudGVycHgiLCJQb2ludGVyIiwiRHJhZ1JvdGF0ZSIsImxhc3RBbmdsZV8iLCJSZW5kZXJCb3giLCJnZW9tZXRyeV8iLCJzdGFydFBpeGVsXyIsImVuZFBpeGVsXyIsInJlbmRlcl8iLCJzdGFydFBpeGVsIiwiZW5kUGl4ZWwiLCJweCIsInNldFBpeGVscyIsImNyZWF0ZU9yVXBkYXRlR2VvbWV0cnkiLCJnZXRHZW9tZXRyeSIsIkRyYWdCb3hFdmVudCIsIkRyYWdCb3giLCJib3hfIiwibWluQXJlYV8iLCJtaW5BcmVhIiwib25Cb3hFbmQiLCJib3hFbmRDb25kaXRpb25fIiwiYm94RW5kQ29uZGl0aW9uIiwiZGVmYXVsdEJveEVuZENvbmRpdGlvbiIsImNvbXBsZXRlQm94IiwiRHJhZ1pvb20iLCJvdXRfIiwib3V0IiwiS2V5Ym9hcmRQYW4iLCJkZWZhdWx0Q29uZGl0aW9uXyIsInBpeGVsRGVsdGFfIiwicGl4ZWxEZWx0YSIsImtleUV2ZW50Iiwia2V5Q29kZSIsIm1hcFVuaXRzRGVsdGEiLCJwYW4iLCJLZXlib2FyZFpvb20iLCJjaGFyQ29kZSIsImNoYXJDb2RlQXQiLCJLaW5ldGljIiwiZGVjYXkiLCJtaW5WZWxvY2l0eSIsImRlbGF5IiwiZGVjYXlfIiwibWluVmVsb2NpdHlfIiwiZGVsYXlfIiwicG9pbnRzXyIsImFuZ2xlXyIsImluaXRpYWxWZWxvY2l0eV8iLCJsYXN0SW5kZXgiLCJmaXJzdEluZGV4IiwiTW9kZSIsIk1vdXNlV2hlZWxab29tIiwidG90YWxEZWx0YV8iLCJsYXN0RGVsdGFfIiwidGltZW91dF8iLCJ0aW1lb3V0IiwidXNlQW5jaG9yXyIsInVzZUFuY2hvciIsImNvbnN0cmFpblJlc29sdXRpb25fIiwibGFzdEFuY2hvcl8iLCJzdGFydFRpbWVfIiwidGltZW91dElkXyIsIm1vZGVfIiwidHJhY2twYWRFdmVudEdhcF8iLCJ0cmFja3BhZFRpbWVvdXRJZF8iLCJkZWx0YVBlclpvb21fIiwiZW5kSW50ZXJhY3Rpb25fIiwid2hlZWxFdmVudCIsImRlbHRhTW9kZSIsIldoZWVsRXZlbnQiLCJET01fREVMVEFfUElYRUwiLCJET01fREVMVEFfTElORSIsInRpbWVMZWZ0IiwiaGFuZGxlV2hlZWxab29tXyIsInNldE1vdXNlQW5jaG9yIiwiUGluY2hSb3RhdGUiLCJwb2ludGVyT3B0aW9ucyIsImFuY2hvcl8iLCJyb3RhdGluZ18iLCJyb3RhdGlvbkRlbHRhXyIsInRocmVzaG9sZF8iLCJ0aHJlc2hvbGQiLCJyb3RhdGlvbkRlbHRhIiwidG91Y2gwIiwidG91Y2gxIiwiUGluY2hab29tIiwibGFzdERpc3RhbmNlXyIsImxhc3RTY2FsZURlbHRhXyIsInNjYWxlRGVsdGEiLCJ6b29tT3B0aW9ucyIsInJvdGF0ZU9wdGlvbnMiLCJhdHRyaWJ1dGlvbiIsImF0dHJpYnV0aW9uT3B0aW9ucyIsImFsdFNoaWZ0RHJhZ1JvdGF0ZSIsImRvdWJsZUNsaWNrWm9vbSIsInpvb21EZWx0YSIsInpvb21EdXJhdGlvbiIsImRyYWdQYW4iLCJwaW5jaFJvdGF0ZSIsInBpbmNoWm9vbSIsImtleWJvYXJkIiwibW91c2VXaGVlbFpvb20iLCJzaGlmdERyYWdab29tIiwiQ29tcG9zaXRlIiwiQ29tcG9zaXRlQ29udHJvbCIsImNoaWxkQ29udHJvbHMiLCJvcHRzIiwic3VwZXIiLCJnZXRDaGlsZENvbnRyb2xzIiwiQ29udGFpbmVyIiwic3R5bGVDbGFzcyIsImdldFN0eWxlQ2xhc3MiLCJGb290ZXIiLCJ0b0FycmF5IiwiQnV0dG9uIiwidG9vbHRpcEFzVGV4dEVsZW1lbnQiLCJ1bmljb2RlIiwiaWNvbkNsYXNzTmFtZSIsInRvb2x0aXAiLCJidXR0b25Db250YWluZXJFbGVtZW50IiwiY29udGFpbmVyQ2xhc3NOYW1lIiwiYnV0dG9uRWxlbWVudCIsImZyb21Db2RlUG9pbnQiLCJnZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUiLCJhcHBlbmQiLCJkaXZFbGVtZW50Iiwic3BhbkVsZW1lbnQiLCJnZXRCdXR0b24iLCJzZXRCdXR0b25Vbmljb2RlIiwic2V0QnV0dG9uSWNvbkNsYXNzTmFtZSIsImljb25FbGVtZW50IiwiVG9nZ2xlRXZlbnQiLCJpc1RvZ2dsZWQiLCJUb2dnbGVCdXR0b24iLCJjb250YWluZXJUb1RvZ2dsZSIsIl9pc1RvZ2dsZWQiLCJ1bmljb2RlVG9nZ2xlZCIsImljb25DbGFzc05hbWVUb2dnbGVkIiwicGFyZW50RWxlbWVudCIsImdldFBhcmVudEVsZW1lbnQiLCJoYW5kbGVPdmVybGF5Rm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJoYW5kbGVPdmVybGF5T3V0ZXIiLCJzZWxlY3RvcnMydG9nZ2xlIiwidG9nZ2xlQ2xhc3NOYW1lcyIsImFuY2VzdG9yIiwic2VsZWN0b3IydG9nZ2xlIiwidG9nZ2xlRWxlbWVudCIsInRvZ2dsZUNsYXNzTmFtZSIsInRvZ2dsZUNsYXNzIiwiY3JlYXRlQ2hpbGRJZk5vdEV4aXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImNoaWxkIiwicmVtb3ZlQ2hpbGRyZW5JZkV4aXN0Iiwib3ZlcmxheWFibGVQYXJlbnRzIiwiY2xvc2VzdFBhcmVudCIsImNsb3Nlc3QiLCJCb3R0b21SaWdodCIsInRvZ2dsZUJ1dHRvbiIsInZlcnRpY2FsQ29udHJvbHMiLCJob3Jpem9udGFsQ29udHJvbHMiLCJnZXRUb2dnbGVCdXR0b24iLCJUb3BSaWdodCIsIkdlb2xvY2F0aW9uRXJyb3IiLCJHZW9sb2NhdGlvbiIsInBvc2l0aW9uXyIsInRyYW5zZm9ybV8iLCJ3YXRjaElkXyIsImhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyIsImhhbmRsZVRyYWNraW5nQ2hhbmdlZF8iLCJzZXRQcm9qZWN0aW9uIiwidHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmciLCJ0cmFja2luZyIsImdldFRyYWNraW5nIiwiZ2VvbG9jYXRpb24iLCJ3YXRjaFBvc2l0aW9uIiwicG9zaXRpb25DaGFuZ2VfIiwicG9zaXRpb25FcnJvcl8iLCJnZXRUcmFja2luZ09wdGlvbnMiLCJjbGVhcldhdGNoIiwiYWNjdXJhY3kiLCJhbHRpdHVkZSIsImFsdGl0dWRlQWNjdXJhY3kiLCJoZWFkaW5nIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJwcm9qZWN0ZWRQb3NpdGlvbiIsInNwZWVkIiwib3B0X24iLCJvcHRfc3BoZXJlUmFkaXVzIiwiY2lyY3VsYXIiLCJnZXRBY2N1cmFjeSIsImdldEFjY3VyYWN5R2VvbWV0cnkiLCJnZXRBbHRpdHVkZSIsImdldEFsdGl0dWRlQWNjdXJhY3kiLCJnZXRIZWFkaW5nIiwiZ2V0UG9zaXRpb24iLCJnZXRTcGVlZCIsIkxvY2F0aW9uUmV0cmlldmVkRXZlbnQiLCJHZW9Mb2NhdGUiLCJnZW9Mb2NhdGlvbk9wdGlvbnMiLCJfZ2VvTG9jYXRpb24iLCJfYSIsIl9iIiwiZ2VvTG9jYXRpb24iLCJPbEF0dHJpYnV0aW9uIiwiUFJPSkVDVElPTiIsIkNPT1JESU5BVEVfRk9STUFUIiwiTW91c2VQb3NpdGlvbiIsImNvb3JkaW5hdGVGb3JtYXQiLCJzZXRDb29yZGluYXRlRm9ybWF0IiwicmVuZGVyT25Nb3VzZU91dCIsInBsYWNlaG9sZGVyIiwidW5kZWZpbmVkSFRNTCIsInBsYWNlaG9sZGVyXyIsInJlbmRlck9uTW91c2VPdXRfIiwicmVuZGVyZWRIVE1MXyIsIm1hcFByb2plY3Rpb25fIiwiZ2V0Q29vcmRpbmF0ZUZvcm1hdCIsImhhbmRsZU1vdXNlTW92ZSIsInVwZGF0ZUhUTUxfIiwiaGFuZGxlTW91c2VPdXQiLCJ2aWV3cG9ydCIsImZvcm1hdCIsImh0bWwiLCJPbE1vdXNlUG9zaXRpb24iLCJ0ZW1wbGF0ZSIsIm9wdF9mcmFjdGlvbkRpZ2l0cyIsIk9sWm9vbSIsIkRJU1BMQVlfRFBJIiwiTEVBRElOR19ESUdJVFMiLCJTY2FsZUxpbmUiLCJfbWluV2lkdGgiLCJtaW5XaWR0aCIsInJlbmRlcmVkVmlzaWJsZSIsInJlbmRlcmVkV2lkdGgiLCJyZW5kZXJlZFNWRyIsImRwaSIsInVwZGF0ZUVsZW1lbnQiLCJwb2ludFJlc29sdXRpb25Vbml0cyIsIm5vbWluYWxDb3VudCIsInN1ZmZpeCIsImRlY2ltYWxDb3VudCIsImRlY2ltYWwiLCJnZW5lcmF0ZWRTVkciLCJnZXRHZW5lcmF0ZWRTVkciLCJ0eHQiLCJzdmciLCJjcmVhdGVFbGVtZW50TlMiLCJyZWN0IiwidGV4dCIsInNldE1pbldpZHRoIiwiZ2V0TWluV2lkdGgiLCJPdmVydmlld01hcEV2ZW50IiwiT3ZlcnZpZXciLCJvdmVydmlld0NvbnRhaW5lckVsZW1lbnQiLCJmaWd1cmVFbGVtZW50IiwiU1ZHX0NPREUiLCJvbk92ZXJ2aWV3SW1hZ2VDbGljayIsInN2Z0VsZW1lbnQiLCJiYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQiLCJTVkdfV0lEVEgiLCJTVkdfSEVJR0hUIiwiQkFDS0dST1VORF9DT0xPUiIsInByZXBlbmQiLCJ1cGRhdGVDcm9zc2hhaXIiLCJnZXRPdmVydmlld1B4RnJvbUxvbkxhdCIsImV4aXN0aW5nRWxtcyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJleGlzdGluZ0VsbSIsImZyb20iLCJnZXRDcm9zc2hhaXIiLCJjc3NDbGFzcyIsImxpbmUiLCJjYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoIiwib3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QiLCJjbGlja0xvbkxhdCIsImdldExvbkxhdEZyb21PdmVydmlld1B4Iiwib1B4IiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJnZXRPdmVydmlld0NvbnRhaW5lckVsZW1lbnQiLCJnZXRTVkdFbGVtZW50IiwiZ2V0QmFja2dyb3VuZFJlY3RFbGVtZW50IiwiUHJpbnQiLCJTaGFyZSIsIkRFRkFVTFRfVU5JQ09ERSIsIkRFRkFVTFRfVE9PTFRJUF9URVhUIiwiVG9vbHMiLCJWaWV3TGlzdCIsIlRpbGUiLCJpbnRlcmltVGlsZSIsInRyYW5zaXRpb25fIiwidHJhbnNpdGlvblN0YXJ0c18iLCJpbnRlcnBvbGF0ZSIsInJlbGVhc2UiLCJyZWZyZXNoSW50ZXJpbUNoYWluIiwiZ2V0VGlsZUNvb3JkIiwiSW1hZ2VCYXNlIiwiZ2V0UGl4ZWxSYXRpbyIsImxpc3RlbkltYWdlIiwibG9hZEhhbmRsZXIiLCJlcnJvckhhbmRsZXIiLCJpbWciLCJsaXN0ZW5pbmciLCJkZWNvZGluZyIsImxvYWRlZCIsImNhdGNoIiwiSW1hZ2VXcmFwcGVyIiwiaW1hZ2VMb2FkRnVuY3Rpb24iLCJzcmNfIiwiaW1hZ2VfIiwidW5saXN0ZW5fIiwiaW1hZ2VMb2FkRnVuY3Rpb25fIiwiaGFuZGxlSW1hZ2VFcnJvcl8iLCJ1bmxpc3RlbkltYWdlXyIsImhhbmRsZUltYWdlTG9hZF8iLCJzZXRJbWFnZSIsIkltYWdlVGlsZSIsInRpbGVMb2FkRnVuY3Rpb24iLCJjcm9zc09yaWdpbl8iLCJ0aWxlTG9hZEZ1bmN0aW9uXyIsImN0eCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsIlRyaWFuZ3VsYXRpb24iLCJ0YXJnZXRQcm9qIiwidGFyZ2V0RXh0ZW50IiwibWF4U291cmNlRXh0ZW50IiwiZXJyb3JUaHJlc2hvbGQiLCJvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uIiwic291cmNlUHJval8iLCJ0YXJnZXRQcm9qXyIsInRyYW5zZm9ybUludkNhY2hlIiwidHJhbnNmb3JtSW52IiwidHJhbnNmb3JtSW52XyIsIm1heFNvdXJjZUV4dGVudF8iLCJlcnJvclRocmVzaG9sZFNxdWFyZWRfIiwidHJpYW5nbGVzXyIsIndyYXBzWEluU291cmNlXyIsImNhbldyYXBYSW5Tb3VyY2VfIiwic291cmNlV29ybGRXaWR0aF8iLCJ0YXJnZXRXb3JsZFdpZHRoXyIsImRlc3RpbmF0aW9uVG9wTGVmdCIsImRlc3RpbmF0aW9uVG9wUmlnaHQiLCJkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21MZWZ0Iiwic291cmNlVG9wTGVmdCIsInNvdXJjZVRvcFJpZ2h0Iiwic291cmNlQm90dG9tUmlnaHQiLCJzb3VyY2VCb3R0b21MZWZ0IiwibWF4U3ViZGl2aXNpb24iLCJhZGRRdWFkXyIsImxlZnRCb3VuZF8xIiwidHJpYW5nbGUiLCJuZXdUcmlhbmdsZSIsImFkZFRyaWFuZ2xlXyIsImFTcmMiLCJiU3JjIiwiY1NyYyIsImRTcmMiLCJzb3VyY2VRdWFkRXh0ZW50Iiwic291cmNlQ292ZXJhZ2VYIiwic291cmNlV29ybGRXaWR0aCIsIndyYXBzWCIsIm5lZWRzU3ViZGl2aXNpb24iLCJpc0Zpbml0ZSIsImlzTm90RmluaXRlIiwiY2VudGVyU3JjIiwiYmMiLCJiY1NyYyIsImRhIiwiZGFTcmMiLCJhYiIsImFiU3JjIiwiY2QiLCJjZFNyYyIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudCIsImdldFRyaWFuZ2xlcyIsImJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyIsImRyYXdUZXN0VHJpYW5nbGUiLCJ1MSIsInYxIiwidTIiLCJ2MiIsImNsb3NlUGF0aCIsInZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nIiwiY2FsY3VsYXRlU291cmNlUmVzb2x1dGlvbiIsInRhcmdldE1ldGVyc1BlclVuaXQiLCJzb3VyY2VNZXRlcnNQZXJVbml0Iiwic291cmNlRXh0ZW50IiwiY29tcGVuc2F0aW9uRmFjdG9yIiwiUmVwcm9qVGlsZSIsInNvdXJjZVRpbGVHcmlkIiwidGFyZ2V0VGlsZUdyaWQiLCJ3cmFwcGVkVGlsZUNvb3JkIiwiZ2V0VGlsZUZ1bmN0aW9uIiwib3B0X2Vycm9yVGhyZXNob2xkIiwib3B0X3JlbmRlckVkZ2VzIiwib3B0X2ludGVycG9sYXRlIiwicmVuZGVyRWRnZXNfIiwiZ3V0dGVyXyIsImNhbnZhc18iLCJzb3VyY2VUaWxlR3JpZF8iLCJ0YXJnZXRUaWxlR3JpZF8iLCJ3cmFwcGVkVGlsZUNvb3JkXyIsInNvdXJjZVRpbGVzXyIsInNvdXJjZXNMaXN0ZW5lcktleXNfIiwic291cmNlWl8iLCJtYXhUYXJnZXRFeHRlbnQiLCJsaW1pdGVkVGFyZ2V0RXh0ZW50Iiwic291cmNlUHJvakV4dGVudCIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudFJlc29sdXRpb24iLCJlcnJvclRocmVzaG9sZEluUGl4ZWxzIiwidHJpYW5ndWxhdGlvbl8iLCJzb3VyY2VSYW5nZSIsInNyY1giLCJzcmNZIiwicmVwcm9qZWN0XyIsInNvdXJjZXMiLCJnZXRUaWxlU2l6ZSIsInRyaWFuZ3VsYXRpb24iLCJwaXhlbFJvdW5kIiwiZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIiwic291cmNlRGF0YUV4dGVudCIsImNhbnZhc1dpZHRoSW5Vbml0cyIsImNhbnZhc0hlaWdodEluVW5pdHMiLCJzdGl0Y2hDb250ZXh0Iiwic3RpdGNoU2NhbGUiLCJ4UG9zIiwieVBvcyIsInNyY1dpZHRoIiwic3JjSGVpZ2h0IiwidGFyZ2V0VG9wTGVmdCIsInUwIiwidjAiLCJzb3VyY2VOdW1lcmljYWxTaGlmdFgiLCJzb3VyY2VOdW1lcmljYWxTaGlmdFkiLCJhZmZpbmVDb2VmcyIsIm1heFJvdyIsIm1heEVsIiwiYWJzVmFsdWUiLCJjb2VmIiwibCIsInNvbHZlTGluZWFyU3lzdGVtIiwiaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZyIsInVkIiwidmQiLCJzdGVwIiwic3RlcHMiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsInN0cm9rZSIsImxlZnRUb0xvYWRfMSIsInNvdXJjZUxpc3RlbktleV8xIiwidW5saXN0ZW5Tb3VyY2VzXyIsIkxSVUNhY2hlIiwib3B0X2hpZ2hXYXRlck1hcmsiLCJoaWdoV2F0ZXJNYXJrIiwiY291bnRfIiwiZW50cmllc18iLCJvbGRlc3RfIiwibmV3ZXN0XyIsImNvbnRhaW5zS2V5IiwiZW50cnkiLCJ2YWx1ZV8iLCJrZXlfIiwibmV3ZXIiLCJvbGRlciIsInBlZWtMYXN0IiwicGVla0xhc3RLZXkiLCJwZWVrRmlyc3RLZXkiLCJvcHRfdGlsZUNvb3JkIiwiZ2V0S2V5WlhZIiwiVGlsZUNhY2hlIiwicHJ1bmVFeGNlcHROZXdlc3RaIiwiYWRhcHRBdHRyaWJ1dGlvbnMiLCJhdHRyaWJ1dGlvbkxpa2UiLCJTb3VyY2UiLCJhdHRyaWJ1dGlvbnNfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGVfIiwiYXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJ3cmFwWF8iLCJ3cmFwWCIsImludGVycG9sYXRlXyIsInZpZXdSZXNvbHZlciIsInZpZXdSZWplY3RvciIsInZpZXdQcm9taXNlXyIsInJlamVjdCIsInJlZnJlc2giLCJzZXRBdHRyaWJ1dGlvbnMiLCJ0bXBUaWxlQ29vcmQiLCJUaWxlR3JpZCIsImNvbXBhcmUiLCJldmVyeSIsImN1cnJlbnRWYWwiLCJyZXMiLCJvcmlnaW5zIiwib3JpZ2luXyIsIm9yaWdpbiIsIm9yaWdpbnNfIiwidGlsZVNpemVzXyIsInRpbGVTaXplcyIsInRpbGVTaXplXyIsInRpbGVTaXplIiwiZnVsbFRpbGVSYW5nZXNfIiwidG1wU2l6ZV8iLCJ0bXBFeHRlbnRfIiwic2l6ZXMiLCJyZXN0cmljdGVkVGlsZVJhbmdlIiwiY2FsY3VsYXRlVGlsZVJhbmdlc18iLCJmb3JFYWNoVGlsZUNvb3JkIiwib3B0X3RpbGVSYW5nZSIsInRpbGVDb29yZEV4dGVudCIsImdldE9yaWdpbiIsImdldFRpbGVSYW5nZUZvclRpbGVDb29yZEFuZFoiLCJ0aWxlQ29vcmRaIiwidGlsZUNvb3JkWCIsInRpbGVDb29yZFkiLCJnZXRUaWxlUmFuZ2VFeHRlbnQiLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFpfIiwiZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uIiwiZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyIsInJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kiLCJnZXRUaWxlQ29vcmRSZXNvbHV0aW9uIiwiZ2V0RnVsbFRpbGVSYW5nZSIsImZ1bGxUaWxlUmFuZ2VzIiwiZ2V0Rm9yUHJvamVjdGlvbiIsIm9wdF9tYXhab29tIiwib3B0X3RpbGVTaXplIiwib3B0X2Nvcm5lciIsInJlc29sdXRpb25zRnJvbUV4dGVudCIsImNyZWF0ZUZvckV4dGVudCIsImV4dGVudEZyb21Qcm9qZWN0aW9uIiwiY3JlYXRlRm9yUHJvamVjdGlvbiIsIm9wdF9tYXhSZXNvbHV0aW9uIiwiaGFsZiIsIlRpbGVTb3VyY2UiLCJvcGFxdWVfIiwib3BhcXVlIiwidGlsZVBpeGVsUmF0aW9fIiwidGlsZUNhY2hlIiwidG1wU2l6ZSIsInRpbGVPcHRpb25zIiwiZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiIsInNldEtleSIsImdldFRpbGVHcmlkIiwiZ2V0VGlsZUNvb3JkRm9yVGlsZVVybEZ1bmN0aW9uIiwib3B0X3Byb2plY3Rpb24iLCJ3aXRoaW5FeHRlbnRBbmRaIiwiVGlsZVNvdXJjZUV2ZW50IiwiY3JlYXRlRnJvbVRlbXBsYXRlIiwielJlZ0V4IiwieFJlZ0V4IiwieVJlZ0V4IiwiZGFzaFlSZWdFeCIsInJhbmdlIiwiVXJsVGlsZSIsImdlbmVyYXRlVGlsZVVybEZ1bmN0aW9uXyIsInRpbGVVcmxGdW5jdGlvbiIsInVybHMiLCJzZXRVcmxzIiwidXJsIiwic2V0VXJsIiwidGlsZUxvYWRpbmdLZXlzXyIsImdldFRpbGVMb2FkRnVuY3Rpb24iLCJnZXRUaWxlVXJsRnVuY3Rpb24iLCJnZXRQcm90b3R5cGVPZiIsImdldFVybHMiLCJzZXRUaWxlTG9hZEZ1bmN0aW9uIiwic2V0VGlsZVVybEZ1bmN0aW9uIiwibWF0Y2giLCJzdGFydENoYXJDb2RlIiwic3RvcENoYXJDb2RlIiwiZnJvbUNoYXJDb2RlIiwic3RvcF8xIiwiZXhwYW5kVXJsIiwidGVtcGxhdGVzIiwidGlsZVVybEZ1bmN0aW9ucyIsImNyZWF0ZUZyb21UaWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRlbXBsYXRlcyIsIlRpbGVJbWFnZSIsImltYWdlU21vb3RoaW5nIiwiZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24iLCJ0aWxlQ2xhc3MiLCJ0aWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwidGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJyZW5kZXJSZXByb2plY3Rpb25FZGdlc18iLCJ1c2VkVGlsZUNhY2hlIiwiZ2V0R3V0dGVyIiwidGhpc1Byb2oiLCJwcm9qS2V5IiwiY3JlYXRlVGlsZV8iLCJ1cmxUaWxlQ29vcmQiLCJ0aWxlVXJsIiwibmV3VGlsZSIsImdldFRpbGVJbnRlcm5hbCIsInNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzIiwic2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZWdyaWQiLCJwcm9qIiwiaW1hZ2VUaWxlIiwiWFlaIiwieHl6T3B0aW9ucyIsImdyaWRPcHRpb25zIiwiY3JlYXRlWFlaIiwiVkFSSUFOVFMiLCJnZW9sYW5kYmFzZW1hcCIsImJtYXBncmF1IiwiYm1hcG9ydGhvZm90bzMwY20iLCJibWFwZ2VsYWVuZGUiLCJibWFwb2JlcmZsYWVjaGUiLCJibWFwb3ZlcmxheSIsIkJhc2VtYXBTb3VyY2UiLCJYWVpTb3VyY2UiLCJ2YXJpYW50Il0sInNvdXJjZVJvb3QiOiIifQ==