!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["bgis-core"]=e():t["bgis-core"]=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=function(){function t(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),n="propertychange",o=function(){function t(){this.disposed=!1}return t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function i(t,e){return t>e?1:t<e?-1:0}function r(t,e,n){var o=t.length;if(t[0]<=e)return 0;if(e<=t[o-1])return o-1;var i=void 0;if(n>0){for(i=1;i<o;++i)if(t[i]<e)return i-1}else if(n<0){for(i=1;i<o;++i)if(t[i]<=e)return i}else for(i=1;i<o;++i){if(t[i]==e)return i;if(t[i]<e)return"function"==typeof n?n(e,t[i-1],t[i])>0?i-1:i:t[i-1]-e<e-t[i]?i-1:i}return o-1}function s(t,e){for(var n=Array.isArray(e)?e:[e],o=n.length,i=0;i<o;i++)t[t.length]=n[i]}function a(t,e){var n=t.length;if(n!==e.length)return!1;for(var o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}function l(){return!0}function u(){return!1}function c(){}var h="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,i=arguments.length;o<i;++o){var r=arguments[o];if(null!=r)for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])}return n};function p(t){for(var e in t)delete t[e]}var d,f="function"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e},g=(d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const _=function(t){function n(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return g(n,t),n.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_||(this.listeners_={}),o=n[t]||(n[t]=[]);-1===o.indexOf(e)&&o.push(e)}},n.prototype.dispatchEvent=function(t){var n="string"==typeof t?new e(t):t,o=n.type;n.target||(n.target=this.eventTarget_||this);var i,r=this.listeners_&&this.listeners_[o];if(r){var s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});o in s||(s[o]=0,a[o]=0),++s[o];for(var l=0,u=r.length;l<u;++l)if(!1===(i="handleEvent"in r[l]?r[l].handleEvent(n):r[l].call(this,n))||n.propagationStopped){i=!1;break}if(--s[o],0===s[o]){var h=a[o];for(delete a[o];h--;)this.removeEventListener(o,c);delete s[o]}return i}},n.prototype.disposeInternal=function(){this.listeners_&&p(this.listeners_)},n.prototype.getListeners=function(t){return this.listeners_&&this.listeners_[t]||void 0},n.prototype.hasListener=function(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)},n.prototype.removeEventListener=function(t,e){var n=this.listeners_&&this.listeners_[t];if(n){var o=n.indexOf(e);-1!==o&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[o]=c,++this.pendingRemovals_[t]):(n.splice(o,1),0===n.length&&delete this.listeners_[t]))}},n}(o),v="change",y="error",m="contextmenu",w="click",C="keydown",x="keypress",E="resize",b="touchmove",T="wheel";function P(t,e,n,o,i){if(o&&o!==t&&(n=n.bind(o)),i){var r=n;n=function(){t.removeEventListener(e,n),r.apply(this,arguments)}}var s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function O(t,e,n,o){return P(t,e,n,o,!0)}function R(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),p(t))}var S=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=function(t){function e(){var e=t.call(this)||this;return e.on=e.onInternal,e.once=e.onceInternal,e.un=e.unInternal,e.revision_=0,e}return S(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(v)},e.prototype.getRevision=function(){return this.revision_},e.prototype.onInternal=function(t,e){if(Array.isArray(t)){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=P(this,t[i],e);return o}return P(this,t,e)},e.prototype.onceInternal=function(t,e){var n;if(Array.isArray(t)){var o=t.length;n=new Array(o);for(var i=0;i<o;++i)n[i]=O(this,t[i],e)}else n=O(this,t,e);return e.ol_key=n,n},e.prototype.unInternal=function(t,e){var n=e.ol_key;if(n)!function(t){if(Array.isArray(t))for(var e=0,n=t.length;e<n;++e)R(t[e]);else R(t)}(n);else if(Array.isArray(t))for(var o=0,i=t.length;o<i;++o)this.removeEventListener(t[o],e);else this.removeEventListener(t,e)},e}(_);M.prototype.on,M.prototype.once,M.prototype.un;const j=M;function A(){return function(){throw new Error("Unimplemented abstract method.")}()}var I=0;function L(t){return t.ol_uid||(t.ol_uid=String(++I))}var F=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.key=n,i.oldValue=o,i}return F(e,t),e}(e);const D=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,L(n),n.values_=null,void 0!==e&&n.setProperties(e),n}return F(e,t),e.prototype.get=function(t){var e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},e.prototype.getProperties=function(){return this.values_&&h({},this.values_)||{}},e.prototype.hasProperties=function(){return!!this.values_},e.prototype.notify=function(t,e){var o;o="change:"+t,this.dispatchEvent(new k(o,t,e)),o=n,this.dispatchEvent(new k(o,t,e))},e.prototype.addChangeListener=function(t,e){this.addEventListener("change:"+t,e)},e.prototype.removeChangeListener=function(t,e){this.removeEventListener("change:"+t,e)},e.prototype.set=function(t,e,n){var o=this.values_||(this.values_={});if(n)o[t]=e;else{var i=o[t];o[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.applyProperties=function(t){t.values_&&h(this.values_||(this.values_={}),t.values_)},e.prototype.unset=function(t,e){if(this.values_&&t in this.values_){var n=this.values_[t];delete this.values_[t],function(t){var e;for(e in t)return!1;return!e}(this.values_)&&(this.values_=null),e||this.notify(t,n)}},e}(j),z="opacity",G="visible",N="extent",K="zIndex",Z="maxResolution",V="minResolution",X="maxZoom",H="minZoom",U="source";var W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const B=function(t){function e(e){var n=this,o="Assertion failed. See https://openlayers.org/en/v"+"6.6.1".split("-")[0]+"/doc/errors/#"+e+" for details.";return(n=t.call(this,o)||this).code=e,n.name="AssertionError",n.message=o,n}return W(e,t),e}(Error);function Y(t,e){if(!t)throw new B(e)}function q(t,e,n){return Math.min(Math.max(t,e),n)}var Q="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},J="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function $(t,e,n,o,i,r){var s=i-n,a=r-o;if(0!==s||0!==a){var l=((t-n)*s+(e-o)*a)/(s*s+a*a);l>1?(n=i,o=r):l>0&&(n+=s*l,o+=a*l)}return tt(t,e,n,o)}function tt(t,e,n,o){var i=n-t,r=o-e;return i*i+r*r}function et(t){return 180*t/Math.PI}function nt(t){return t*Math.PI/180}function ot(t,e){var n=t%e;return n*e<0?n+e:n}function it(t,e,n){return t+n*(e-t)}var rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const st=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=h({},e);return"object"==typeof e.properties&&(delete o.properties,h(o,e.properties)),o.opacity=void 0!==e.opacity?e.opacity:1,Y("number"==typeof o.opacity,64),o.visible=void 0===e.visible||e.visible,o.zIndex=e.zIndex,o.maxResolution=void 0!==e.maxResolution?e.maxResolution:1/0,o.minResolution=void 0!==e.minResolution?e.minResolution:0,o.minZoom=void 0!==e.minZoom?e.minZoom:-1/0,o.maxZoom=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==o.className?e.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return rt(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=q(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return A()},e.prototype.getLayerStatesArray=function(t){return A()},e.prototype.getExtent=function(){return this.get(N)},e.prototype.getMaxResolution=function(){return this.get(Z)},e.prototype.getMinResolution=function(){return this.get(V)},e.prototype.getMinZoom=function(){return this.get(H)},e.prototype.getMaxZoom=function(){return this.get(X)},e.prototype.getOpacity=function(){return this.get(z)},e.prototype.getSourceState=function(){return A()},e.prototype.getVisible=function(){return this.get(G)},e.prototype.getZIndex=function(){return this.get(K)},e.prototype.setExtent=function(t){this.set(N,t)},e.prototype.setMaxResolution=function(t){this.set(Z,t)},e.prototype.setMinResolution=function(t){this.set(V,t)},e.prototype.setMaxZoom=function(t){this.set(X,t)},e.prototype.setMinZoom=function(t){this.set(H,t)},e.prototype.setOpacity=function(t){Y("number"==typeof t,64),this.set(z,t)},e.prototype.setVisible=function(t){this.set(G,t)},e.prototype.setZIndex=function(t){this.set(K,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(D),at="precompose",lt="rendercomplete",ut="undefined",ct="ready";var ht=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function pt(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var o=e.zoom;return o>t.minZoom&&o<=t.maxZoom}const dt=function(t){function e(e){var n=this,o=h({},e);delete o.source,(n=t.call(this,o)||this).on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addChangeListener(U,n.handleSourcePropertyChange_);var i=e.source?e.source:null;return n.setSource(i),n}return ht(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(U)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():ut},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(R(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=P(t,v,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise((function(t){return t([])}))},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(R(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(R(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=P(t,at,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);Y(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=P(this,v,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(U,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(st),ft="preload",gt="useInterimTilesOnError";var _t=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const vt=function(t){function e(e){var n=this,o=e||{},i=h({},o);return delete i.preload,delete i.useInterimTilesOnError,(n=t.call(this,i)||this).on,n.once,n.un,n.setPreload(void 0!==o.preload?o.preload:0),n.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),n}return _t(e,t),e.prototype.getPreload=function(){return this.get(ft)},e.prototype.setPreload=function(t){this.set(ft,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(gt)},e.prototype.setUseInterimTilesOnError=function(t){this.set(gt,t)},e}(dt);var yt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mt=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n.declutterExecutorGroup=null,n}return yt(e,t),e.prototype.getFeatures=function(t){return A()},e.prototype.prepareFrame=function(t){return A()},e.prototype.renderFrame=function(t,e){return A()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(o,i){var r=this.loadedTileCallback.bind(this,n,o);return t.forEachLoadedTile(e,o,i,r)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i){},e.prototype.getDataAtPixel=function(t,e,n){return A()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(v,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ct&&t.changed()},e}(j);var wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ct=function(t){function e(e,n,o,i){var r=t.call(this,e)||this;return r.inversePixelTransform=n,r.frameState=o,r.context=i,r}return wt(e,t),e}(e);var xt,Et="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",bt=-1!==Et.indexOf("firefox"),Tt=(-1!==Et.indexOf("safari")&&Et.indexOf("chrom"),-1!==Et.indexOf("webkit")&&-1==Et.indexOf("edge")),Pt=-1!==Et.indexOf("macintosh"),Ot="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Rt="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,St="undefined"!=typeof Image&&Image.prototype.decode,Mt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}();function jt(t,e){var n=e[0],o=e[1];return e[0]=t[0]*n+t[2]*o+t[4],e[1]=t[1]*n+t[3]*o+t[5],e}function At(t,e,n,o,i,r,s,a){var l=Math.sin(r),u=Math.cos(r);return t[0]=o*u,t[1]=i*l,t[2]=-o*l,t[3]=i*u,t[4]=s*o*u-a*o*l+e,t[5]=s*i*l+a*i*u+n,t}function It(t,e){var n,o=(n=e)[0]*n[3]-n[1]*n[2];Y(0!==o,32);var i=e[0],r=e[1],s=e[2],a=e[3],l=e[4],u=e[5];return t[0]=a/o,t[1]=-r/o,t[2]=-s/o,t[3]=i/o,t[4]=(s*u-a*l)/o,t[5]=-(i*u-r*l)/o,t}new Array(6);const Lt="top-left";function Ft(t){for(var e=[1/0,1/0,-1/0,-1/0],n=0,o=t.length;n<o;++n)Vt(e,t[n]);return e}function kt(t,e,n){var o,i;return(o=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*o+(i=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*i}function Dt(t,e){return zt(t,e[0],e[1])}function zt(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function Gt(t,e){var n=t[0],o=t[1],i=t[2],r=t[3],s=e[0],a=e[1],l=0;return s<n?l|=16:s>i&&(l|=4),a<o?l|=8:a>r&&(l|=2),0===l&&(l=1),l}function Nt(t,e,n,o,i){return i?(i[0]=t,i[1]=e,i[2]=n,i[3]=o,i):[t,e,n,o]}function Kt(t){return Nt(1/0,1/0,-1/0,-1/0,t)}function Zt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Vt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Xt(t,e,n,o,i){for(;n<o;n+=i)Ht(t,e[n],e[n+1]);return t}function Ht(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function Ut(t,e){var n;return(n=e(Bt(t)))||(n=e(Yt(t)))||(n=e(ne(t)))?n:(n=e(ee(t)))||!1}function Wt(t){var e=0;return re(t)||(e=oe(t)*$t(t)),e}function Bt(t){return[t[0],t[1]]}function Yt(t){return[t[2],t[1]]}function qt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Qt(t,e){var n;return"bottom-left"===e?n=Bt(t):"bottom-right"===e?n=Yt(t):e===Lt?n=ee(t):"top-right"===e?n=ne(t):Y(!1,13),n}function Jt(t,e,n,o,i){var r=e*o[0]/2,s=e*o[1]/2,a=Math.cos(n),l=Math.sin(n),u=r*a,c=r*l,h=s*a,p=s*l,d=t[0],f=t[1],g=d-u+p,_=d-u-p,v=d+u-p,y=d+u+p,m=f-c-h,w=f-c+h,C=f+c+h,x=f+c-h;return Nt(Math.min(g,_,v,y),Math.min(m,w,C,x),Math.max(g,_,v,y),Math.max(m,w,C,x),i)}function $t(t){return t[3]-t[1]}function te(t,e,n){var o=n||[1/0,1/0,-1/0,-1/0];return ie(t,e)?(t[0]>e[0]?o[0]=t[0]:o[0]=e[0],t[1]>e[1]?o[1]=t[1]:o[1]=e[1],t[2]<e[2]?o[2]=t[2]:o[2]=e[2],t[3]<e[3]?o[3]=t[3]:o[3]=e[3]):Kt(o),o}function ee(t){return[t[0],t[3]]}function ne(t){return[t[2],t[3]]}function oe(t){return t[2]-t[0]}function ie(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function re(t){return t[2]<t[0]||t[3]<t[1]}function se(t,e,n,o){var i=n&&n.length?n.shift():Rt?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d",o)}function ae(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function le(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var ue=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ce=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return ue(e,t),e.prototype.useContainer=function(t,e,n){var o,i,r=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===r&&(a=t.firstElementChild)instanceof HTMLCanvasElement&&(i=a.getContext("2d")),!i||0!==i.canvas.width&&i.canvas.style.transform!==e?this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1):(this.container=t,this.context=i,this.containerReused=!0),!this.container){(o=document.createElement("div")).className=r;var s=o.style;s.position="absolute",s.width="100%",s.height="100%";var a=(i=se()).canvas;o.appendChild(a),(s=a.style).position="absolute",s.left="0",s.transformOrigin="top left",this.container=o,this.context=i}},e.prototype.clipUnrotated=function(t,e,n){var o=ee(n),i=ne(n),r=Yt(n),s=Bt(n);jt(e.coordinateToPixelTransform,o),jt(e.coordinateToPixelTransform,i),jt(e.coordinateToPixelTransform,r),jt(e.coordinateToPixelTransform,s);var a=this.inversePixelTransform;jt(a,o),jt(a,i),jt(a,r),jt(a,s),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var o=this.getLayer();if(o.hasListener(t)){var i=new Ct(t,this.inversePixelTransform,n,e);o.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_("postrender",t,e)},e.prototype.getRenderTransform=function(t,e,n,o,i,r,s){var a=i/2,l=r/2,u=o/e,c=-u,h=-t[0]+s,p=-t[1];return At(this.tempTransform,a,l,u,c,-n,h,p)},e.prototype.getDataAtPixel=function(t,e,n){var o,i=jt(this.inversePixelTransform,t.slice()),r=this.context,s=this.getLayer().getExtent();if(s&&!Dt(s,jt(e.pixelToCoordinateTransform,t.slice())))return null;try{var a=Math.round(i[0]),l=Math.round(i[1]),u=document.createElement("canvas"),c=u.getContext("2d");u.width=1,u.height=1,c.clearRect(0,0,1,1),c.drawImage(r.canvas,a,l,1,1,0,0,1,1),o=c.getImageData(0,0,1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:o}return 0===o[3]?null:o},e}(mt);var he=function(){function t(t,e,n,o){this.minX=t,this.maxX=e,this.minY=n,this.maxY=o}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function pe(t,e,n,o,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=n,i.maxY=o,i):new he(t,e,n,o)}const de=he;var fe={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ge={};ge[fe.DEGREES]=2*Math.PI*6370997/360,ge[fe.FEET]=.3048,ge[fe.METERS]=1,ge[fe.USFEET]=1200/3937;const _e=fe,ve=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ge[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}();var ye=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=6378137,we=Math.PI*me,Ce=[-we,-we,we,we],xe=[-180,-85,180,85],Ee=me*Math.log(Math.tan(Math.PI/2)),be=function(t){function e(e){return t.call(this,{code:e,units:_e.METERS,extent:Ce,global:!0,worldExtent:xe,getPointResolution:function(t,e){return t/Q(e[1]/me)}})||this}return ye(e,t),e}(ve),Te=[new be("EPSG:3857"),new be("EPSG:102100"),new be("EPSG:102113"),new be("EPSG:900913"),new be("http://www.opengis.net/gml/srs/epsg.xml#3857")];var Pe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oe=[-180,-90,180,90],Re=6378137*Math.PI/180,Se=function(t){function e(e,n){return t.call(this,{code:e,units:_e.DEGREES,extent:Oe,axisOrientation:n,global:!0,metersPerUnit:Re,worldExtent:Oe})||this}return Pe(e,t),e}(ve),Me=[new Se("CRS:84"),new Se("EPSG:4326","neu"),new Se("urn:ogc:def:crs:OGC:1.3:CRS84"),new Se("urn:ogc:def:crs:OGC:2:84"),new Se("http://www.opengis.net/gml/srs/epsg.xml#4326","neu")],je={},Ae={};function Ie(t,e,n){var o=t.getCode(),i=e.getCode();o in Ae||(Ae[o]={}),Ae[o][i]=n}var Le=6371008.8;function Fe(t,e,n){var o=n||Le,i=nt(t[1]),r=nt(e[1]),s=(r-i)/2,a=nt(e[0]-t[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(r);return 2*o*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function ke(t,e,n,o){var i=o||Le,r=nt(t[1]),s=nt(t[0]),a=e/i,l=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(n));return[et(s+Math.atan2(Math.sin(n)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(l))),et(l)]}function De(t,e,n){var o;if(void 0!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];o=e}else o=t.slice();return o}function ze(t,e,n){if(void 0!==e&&t!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}return t}function Ge(t){!function(t,e){je[t]=e}(t.getCode(),t),Ie(t,t,De)}function Ne(t){return"string"==typeof t?je[e=t]||je[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function Ke(t,e,n,o){var i,r=(t=Ne(t)).getPointResolutionFunc();if(r)i=r(e,n),o&&o!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/ge[o]);else{var s=t.getUnits();if(s==_e.DEGREES&&!o||o==_e.DEGREES)i=e;else{var a,l=He(t,Ne("EPSG:4326"));if(l===ze&&s!==_e.DEGREES)i=e*t.getMetersPerUnit();else{var u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];i=(Fe((u=l(u,u,2)).slice(0,2),u.slice(2,4))+Fe(u.slice(4,6),u.slice(6,8)))/2}void 0!==(a=o?ge[o]:t.getMetersPerUnit())&&(i/=a)}}return i}function Ze(t){!function(t){t.forEach(Ge)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Ie(e,t,De)}))}))}function Ve(t,e){return t?"string"==typeof t?Ne(t):t:Ne(e)}function Xe(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||He(t,e)===De)&&n}function He(t,e){var n=function(t,e){var n;return t in Ae&&e in Ae[t]&&(n=Ae[t][e]),n}(t.getCode(),e.getCode());return n||(n=ze),n}function Ue(t,e){return He(Ne(t),Ne(e))}function We(t,e,n){return Ue(e,n)(t,void 0,t.length)}var Be,Ye,qe,Qe=null;function Je(){return Qe}function $e(t,e){return t}function tn(t,e){return t}function en(t,e){return t}Ze(Te),Ze(Me),Be=Te,Ye=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i){r[s]=we*t[s]/180;var a=me*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));a>Ee?a=Ee:a<-Ee&&(a=-Ee),r[s+1]=a}return r},qe=function(t,e,n){var o=t.length,i=n>1?n:2,r=e;void 0===r&&(r=i>2?t.slice():new Array(o));for(var s=0;s<o;s+=i)r[s]=180*t[s]/we,r[s+1]=360*Math.atan(Math.exp(t[s+1]/me))/Math.PI-90;return r},Me.forEach((function(t){Be.forEach((function(e){Ie(t,e,Ye),Ie(e,t,qe)}))}));var nn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),on=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new de(0,0,0,0),n}return nn(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),o=e.getUseInterimTilesOnError();return 2==n||4==n||3==n&&!o},e.prototype.getTile=function(t,e,n,o){var i=o.pixelRatio,r=o.viewState.projection,s=this.getLayer(),a=s.getSource().getTile(t,e,n,i,r);return 3==a.getState()&&(s.getUseInterimTilesOnError()?s.getPreload()>0&&(this.newTiles_=!0):a.setState(2)),this.isDrawableTile(a)||(a=a.getInterimTile()),a},e.prototype.loadedTileCallback=function(e,n,o){return!!this.isDrawableTile(o)&&t.prototype.loadedTileCallback.call(this,e,n,o)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],o=t.viewState,r=o.projection,s=o.resolution,a=o.center,l=o.rotation,u=t.pixelRatio,c=this.getLayer(),p=c.getSource(),d=p.getRevision(),f=p.getTileGridForProjection(r),g=f.getZForResolution(s,p.zDirection),_=f.getResolution(g),v=t.extent,y=n.extent&&en(n.extent);y&&(v=te(v,en(n.extent)));var m=p.getTilePixelRatio(u),w=Math.round(t.size[0]*m),C=Math.round(t.size[1]*m);if(l){var x=Math.round(Math.sqrt(w*w+C*C));w=x,C=x}var E=_*w/2/m,b=_*C/2/m,T=[a[0]-E,a[1]-b,a[0]+E,a[1]+b],P=f.getTileRangeForExtentAndZ(v,g),O={};O[g]={};var R=this.createLoadedTileFinder(p,r,O),S=this.tmpExtent,M=this.tmpTileRange_;this.newTiles_=!1;for(var j=P.minX;j<=P.maxX;++j)for(var A=P.minY;A<=P.maxY;++A){var I=this.getTile(g,j,A,t);if(this.isDrawableTile(I)){var F=L(this);if(2==I.getState()){O[g][I.tileCoord.toString()]=I;var k=I.inTransition(F);this.newTiles_||!k&&-1!==this.renderedTiles.indexOf(I)||(this.newTiles_=!0)}if(1===I.getAlpha(F,t.time))continue}var D=f.getTileCoordChildTileRange(I.tileCoord,M,S),z=!1;D&&(z=R(g+1,D)),z||f.forEachTileCoordParentTileRange(I.tileCoord,R,M,S)}var G=_/s;At(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/m,1/m,l,-w/2,-C/2);var N=function(t){var e="matrix("+t.join(", ")+")";if(Rt)return e;var n=xt||(xt=document.createElement("div"));return n.style.transform=e,n.style.transform}(this.pixelTransform);this.useContainer(e,N,n.opacity);var K=this.context,Z=K.canvas;It(this.inversePixelTransform,this.pixelTransform),At(this.tempTransform,w/2,C/2,G,G,0,-w/2,-C/2),Z.width!=w||Z.height!=C?(Z.width=w,Z.height=C):this.containerReused||K.clearRect(0,0,w,C),y&&this.clipUnrotated(K,t,y),h(K,p.getContextOptions()),this.preRender(K,t),this.renderedTiles.length=0;var V,X,H,U=Object.keys(O).map(Number);U.sort(i),1!==n.opacity||this.containerReused&&!p.getOpaque(t.viewState.projection)?(V=[],X=[]):U=U.reverse();for(var W=U.length-1;W>=0;--W){var B=U[W],Y=p.getTilePixelSize(B,u,r),q=f.getResolution(B)/_,Q=Y[0]*q*G,J=Y[1]*q*G,$=f.getTileCoordForCoordAndZ(ee(T),B),tt=f.getTileCoordExtent($),et=jt(this.tempTransform,[m*(tt[0]-T[0])/_,m*(T[3]-tt[3])/_]),nt=m*p.getGutterForProjection(r),ot=O[B];for(var it in ot){var rt=(I=ot[it]).tileCoord,st=$[1]-rt[1],at=Math.round(et[0]-(st-1)*Q),lt=$[2]-rt[2],ut=Math.round(et[1]-(lt-1)*J),ct=at-(j=Math.round(et[0]-st*Q)),ht=ut-(A=Math.round(et[1]-lt*J)),pt=g===B;if(!(k=pt&&1!==I.getAlpha(L(this),t.time)))if(V){K.save(),H=[j,A,j+ct,A,j+ct,A+ht,j,A+ht];for(var dt=0,ft=V.length;dt<ft;++dt)if(g!==B&&B<X[dt]){var gt=V[dt];K.beginPath(),K.moveTo(H[0],H[1]),K.lineTo(H[2],H[3]),K.lineTo(H[4],H[5]),K.lineTo(H[6],H[7]),K.moveTo(gt[6],gt[7]),K.lineTo(gt[4],gt[5]),K.lineTo(gt[2],gt[3]),K.lineTo(gt[0],gt[1]),K.clip()}V.push(H),X.push(B)}else K.clearRect(j,A,ct,ht);this.drawTileImage(I,t,j,A,ct,ht,nt,pt,n.opacity),V&&!k?(K.restore(),this.renderedTiles.unshift(I)):this.renderedTiles.push(I),this.updateUsedTiles(t.usedTiles,p,I)}}return this.renderedRevision=d,this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!Zt(this.renderedExtent_,T),this.renderedExtent_=T,this.renderedPixelRatio=u,this.renderedProjection=r,this.manageTilePyramid(t,p,f,u,r,v,g,c.getPreload()),this.scheduleExpireCache(t,p),this.postRender(K,t),n.extent&&K.restore(),N!==Z.style.transform&&(Z.style.transform=N),this.container},e.prototype.drawTileImage=function(t,e,n,o,i,r,s,a,l){var u=this.getTileImage(t);if(u){var c=L(this),h=a?t.getAlpha(c,e.time):1,p=l*h,d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(u,s,s,u.width-2*s,u.height-2*s,n,o,i,r),d&&this.context.restore(),1!==h?e.animate=!0:a&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var o=L(t);o in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[o])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var o=L(e);o in t||(t[o]={}),t[o][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,o,i,r,s,a,l){var u=L(e);u in t.wantedTiles||(t.wantedTiles[u]={});var c,h,p,d,f,g,_=t.wantedTiles[u],v=t.tileQueue,y=0;for(g=n.getMinZoom();g<=s;++g)for(h=n.getTileRangeForExtentAndZ(r,g,h),p=n.getResolution(g),d=h.minX;d<=h.maxX;++d)for(f=h.minY;f<=h.maxY;++f)s-g<=a?(++y,0==(c=e.getTile(g,d,f,o,i)).getState()&&(_[c.getKey()]=!0,v.isKeyQueued(c.getKey())||v.enqueue([c,u,n.getTileCoordCenter(c.tileCoord),p])),void 0!==l&&l(c)):e.useTile(g,d,f,i);e.updateCacheSize(y,i)},e}(ce);on.prototype.getLayer;const rn=on;var sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const an=function(t){function e(e){return t.call(this,e)||this}return sn(e,t),e.prototype.createRenderer=function(){return new rn(this)},e}(vt),ln="center",un="resolution",cn="rotation";function hn(t,e){for(var n=!0,o=t.length-1;o>=0;--o)if(t[o]!=e[o]){n=!1;break}return n}function pn(t,e){var n=Math.cos(e),o=Math.sin(e),i=t[0]*n-t[1]*o,r=t[1]*n+t[0]*o;return t[0]=i,t[1]=r,t}function dn(t,e,n){return function(o,i,r,s,a){if(o){var l=e?0:r[0]*i,u=e?0:r[1]*i,c=a?a[0]:0,h=a?a[1]:0,p=t[0]+l/2+c,d=t[2]-l/2+c,f=t[1]+u/2+h,g=t[3]-u/2+h;p>d&&(d=p=(d+p)/2),f>g&&(g=f=(g+f)/2);var _=q(o[0],p,d),v=q(o[1],f,g),y=30*i;return s&&n&&(_+=-y*Math.log(1+Math.max(0,p-o[0])/y)+y*Math.log(1+Math.max(0,o[0]-d)/y),v+=-y*Math.log(1+Math.max(0,f-o[1])/y)+y*Math.log(1+Math.max(0,o[1]-g)/y)),[_,v]}}}function fn(t){return t}function gn(t,e,n,o){var i=oe(e)/n[0],r=$t(e)/n[1];return o?Math.min(t,Math.max(i,r)):Math.min(t,Math.min(i,r))}function _n(t,e,n){var o=Math.min(t,e);return o*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(o=Math.max(o,n),o/=Math.log(1+50*Math.max(0,n/t-1))/50+1),q(o,n/2,2*e)}function vn(t,e,n,o,i){return function(r,s,a,l){if(void 0!==r){var u=o?gn(t,o,a,i):t;return(void 0===n||n)&&l?_n(r,u,e):q(r,e,u)}}}function yn(t){return void 0!==t?0:void 0}function mn(t){return void 0!==t?t:void 0}function wn(t){return Math.pow(t,3)}function Cn(t){return 1-wn(1-t)}function xn(t){return 3*t*t-2*t*t*t}function En(t){return t}const bn="XY",Tn="XYZM";var Pn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),On=[1,0,0,1,0,0];const Rn=function(t){function e(){var e,n,o,i,r,s=t.call(this)||this;return s.extent_=[1/0,1/0,-1/0,-1/0],s.extentRevision_=-1,s.simplifiedGeometryMaxMinSquaredTolerance=0,s.simplifiedGeometryRevision=0,s.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var o=this.clone();return o.applyTransform(n),o.getSimplifiedGeometry(e)},r=!1,function(){var t=Array.prototype.slice.call(arguments);return r&&this===i&&a(t,o)||(r=!0,i=this,o=t,n=e.apply(this,arguments)),n}),s}return Pn(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return A()},e.prototype.closestPointXY=function(t,e,n,o){return A()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return A()},e.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Kt(e),this.extentRevision_=this.getRevision()}return function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){A()},e.prototype.scale=function(t,e,n){A()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return A()},e.prototype.getType=function(){return A()},e.prototype.applyTransform=function(t){A()},e.prototype.intersectsExtent=function(t){return A()},e.prototype.translate=function(t,e){A()},e.prototype.transform=function(t,e){var n=Ne(t),o=n.getUnits()==_e.TILE_PIXELS?function(t,o,i){var r=n.getExtent(),s=n.getWorldExtent(),a=$t(s)/$t(r);return At(On,s[0],s[3],a,-a,0,0,0),function(t,e,n,o,i,r){for(var s=r||[],a=0,l=0;l<n;l+=o){var u=t[l],c=t[l+1];s[a++]=i[0]*u+i[2]*c+i[4],s[a++]=i[1]*u+i[3]*c+i[5]}r&&s.length!=a&&(s.length=a)}(t,0,t.length,i,On,o),Ue(n,e)(t,o,i)}:Ue(n,e);return this.applyTransform(o),this},e}(D);var Sn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Mn(t){var e;return t==bn?e=2:"XYZ"==t||"XYM"==t?e=3:t==Tn&&(e=4),e}const jn=function(t){function e(){var e=t.call(this)||this;return e.layout=bn,e.stride=2,e.flatCoordinates=null,e}return Sn(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=this.flatCoordinates.length,o=this.stride,Xt(Kt(t),e,0,n,o);var e,n,o},e.prototype.getCoordinates=function(){return A()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=Mn(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){A()},e.prototype.setLayout=function(t,e,n){var o;if(t)o=Mn(t);else{for(var i=0;i<n;++i){if(0===e.length)return this.layout=bn,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=bn:3==t?e="XYZ":4==t&&(e=Tn),e}(o=e.length)}this.layout=t,this.stride=o},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=Math.cos(i),u=Math.sin(i),c=r[0],h=r[1],p=0,d=0;d<n;d+=o){var f=t[d]-c,g=t[d+1]-h;a[p++]=c+f*l-g*u,a[p++]=h+f*u+g*l;for(var _=d+2;_<d+o;++_)a[p++]=t[_]}s&&a.length!=p&&(a.length=p)}(n,0,n.length,o,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var o=e;void 0===o&&(o=t);var i=n;i||(i=qt(this.getExtent()));var r=this.getFlatCoordinates();if(r){var s=this.getStride();!function(t,e,n,o,i,r,s,a){for(var l=a||[],u=s[0],c=s[1],h=0,p=0;p<n;p+=o){var d=t[p]-u,f=t[p+1]-c;l[h++]=u+i*d,l[h++]=c+r*f;for(var g=p+2;g<p+o;++g)l[h++]=t[g]}a&&l.length!=h&&(l.length=h)}(r,0,r.length,s,t,o,i,r),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var o=this.getStride();!function(t,e,n,o,i,r,s){for(var a=s||[],l=0,u=0;u<n;u+=o){a[l++]=t[u]+i,a[l++]=t[u+1]+r;for(var c=u+2;c<u+o;++c)a[l++]=t[c]}s&&a.length!=l&&(a.length=l)}(n,0,n.length,o,t,e,n),this.changed()}},e}(Rn);function An(t,e,n,o,i,r,s){var a,l=t[e],u=t[e+1],c=t[n]-l,h=t[n+1]-u;if(0===c&&0===h)a=e;else{var p=((i-l)*c+(r-u)*h)/(c*c+h*h);if(p>1)a=n;else{if(p>0){for(var d=0;d<o;++d)s[d]=it(t[e+d],t[n+d],p);return void(s.length=o)}a=e}}for(d=0;d<o;++d)s[d]=t[a+d];s.length=o}function In(t,e,n,o,i){var r=t[e],s=t[e+1];for(e+=o;e<n;e+=o){var a=t[e],l=t[e+1],u=tt(r,s,a,l);u>i&&(i=u),r=a,s=l}return i}function Ln(t,e,n,o,i,r,s,a,l,u,c){if(e==n)return u;var h,p;if(0===i){if((p=tt(s,a,t[e],t[e+1]))<u){for(h=0;h<o;++h)l[h]=t[e+h];return l.length=o,p}return u}for(var d=c||[NaN,NaN],f=e+o;f<n;)if(An(t,f-o,f,o,s,a,d),(p=tt(s,a,d[0],d[1]))<u){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o,f+=o}else f+=o*Math.max((Math.sqrt(p)-Math.sqrt(u))/i|0,1);if(r&&(An(t,n-o,e,o,s,a,d),(p=tt(s,a,d[0],d[1]))<u)){for(u=p,h=0;h<o;++h)l[h]=d[h];l.length=o}return u}function Fn(t,e,n,o){for(var i=0,r=n.length;i<r;++i)for(var s=n[i],a=0;a<o;++a)t[e++]=s[a];return e}function kn(t,e){return e*Math.round(t/e)}function Dn(t,e,n,o,i,r,s){if(e==n)return s;var a,l,u=kn(t[e],i),c=kn(t[e+1],i);e+=o,r[s++]=u,r[s++]=c;do{if(a=kn(t[e],i),l=kn(t[e+1],i),(e+=o)==n)return r[s++]=a,r[s++]=l,s}while(a==u&&l==c);for(;e<n;){var h=kn(t[e],i),p=kn(t[e+1],i);if(e+=o,h!=a||p!=l){var d=a-u,f=l-c,g=h-u,_=p-c;d*_==f*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(f<0&&_<f||f==_||f>0&&_>f)?(a=h,l=p):(r[s++]=a,r[s++]=l,u=a,c=l,a=h,l=p)}}return r[s++]=a,r[s++]=l,s}function zn(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=e;a<n;a+=o)r[s++]=t.slice(a,a+o);return r.length=s,r}function Gn(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=s*a-r*l,r=a,s=l}return i/2}var Nn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Kn=function(t){function e(e,n){var o=t.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?o.setCoordinates(e,n):o.setFlatCoordinates(n,e),o}return Nn(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,o){return o<kt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(In(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ln(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.getArea=function(){return Gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return zn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=function(t,e,n,o,i,r,s){var a=(n-e)/o;if(a<3){for(;e<n;e+=o)r[s++]=t[e],r[s++]=t[e+1];return s}var l=new Array(a);l[0]=1,l[a-1]=1;for(var u=[e,n-o],c=0;u.length>0;){for(var h=u.pop(),p=u.pop(),d=0,f=t[p],g=t[p+1],_=t[h],v=t[h+1],y=p+o;y<h;y+=o){var m=$(t[y],t[y+1],f,g,_,v);m>d&&(c=y,d=m)}d>i&&(l[(c-e)/o]=1,p+o<c&&u.push(p,c),c+o<h&&u.push(c,h))}for(y=0;y<a;++y)l[y]&&(r[s++]=t[e+y*o],r[s++]=t[e+y*o+1]);return s}(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,bn)},e.prototype.getType=function(){return"LinearRing"},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fn(this.flatCoordinates,0,t,this.stride),this.changed()},e}(jn);var Zn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vn=function(t){function e(e,n){var o=t.call(this)||this;return o.setCoordinates(e,n),o}return Zn(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){var i=this.flatCoordinates,r=tt(t,e,i[0],i[1]);if(r<o){for(var s=this.stride,a=0;a<s;++a)n[a]=i[a];return n.length=s,r}return o},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return n=t,Nt(o=(e=this.flatCoordinates)[0],i=e[1],o,i,n);var e,n,o,i},e.prototype.getType=function(){return"Point"},e.prototype.intersectsExtent=function(t){return zt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,o){for(var i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(jn);function Xn(t,e,n,o,i){return!Ut(i,(function(i){return!Hn(t,e,n,o,i[0],i[1])}))}function Hn(t,e,n,o,i,r){for(var s=0,a=t[n-o],l=t[n-o+1];e<n;e+=o){var u=t[e],c=t[e+1];l<=r?c>r&&(u-a)*(r-l)-(i-a)*(c-l)>0&&s++:c<=r&&(u-a)*(r-l)-(i-a)*(c-l)<0&&s--,a=u,l=c}return 0!==s}function Un(t,e,n,o,i,r){if(0===n.length)return!1;if(!Hn(t,e,n[0],o,i,r))return!1;for(var s=1,a=n.length;s<a;++s)if(Hn(t,n[s-1],n[s],o,i,r))return!1;return!0}function Wn(t,e,n,o,i){var r,s,a=Xt([1/0,1/0,-1/0,-1/0],t,e,n,o);return!!ie(i,a)&&(s=a,(r=i)[0]<=s[0]&&s[2]<=r[2]&&r[1]<=s[1]&&s[3]<=r[3]||a[0]>=i[0]&&a[2]<=i[2]||a[1]>=i[1]&&a[3]<=i[3]||function(t,e,n,o,i){for(var r,s=[t[e],t[e+1]],a=[];e+o<n;e+=o){if(a[0]=t[e+o],a[1]=t[e+o+1],r=i(s,a))return r;s[0]=a[0],s[1]=a[1]}return!1}(t,e,n,o,(function(t,e){return function(t,e,n){var o=!1,i=Gt(t,e),r=Gt(t,n);if(1===i||1===r)o=!0;else{var s=t[0],a=t[1],l=t[2],u=t[3],c=e[0],h=e[1],p=n[0],d=n[1],f=(d-h)/(p-c),g=void 0,_=void 0;2&r&&!(2&i)&&(o=(g=p-(d-u)/f)>=s&&g<=l),o||!(4&r)||4&i||(o=(_=d-(p-l)*f)>=a&&_<=u),o||!(8&r)||8&i||(o=(g=p-(d-a)/f)>=s&&g<=l),o||!(16&r)||16&i||(o=(_=d-(p-s)*f)>=a&&_<=u)}return o}(i,t,e)})))}function Bn(t,e,n,o){for(;e<n-o;){for(var i=0;i<o;++i){var r=t[e+i];t[e+i]=t[n-o+i],t[n-o+i]=r}e+=o,n-=o}}function Yn(t,e,n,o){for(var i=0,r=t[n-o],s=t[n-o+1];e<n;e+=o){var a=t[e],l=t[e+1];i+=(a-r)*(l+s),r=a,s=l}return 0===i?void 0:i>0}function qn(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=Yn(t,e,l,o);(0===s?r&&u||!r&&!u:r&&!u||!r&&u)&&Bn(t,e,l,o),e=l}return e}var Qn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jn=function(t){function e(e,n,o){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==n&&o?(i.setFlatCoordinates(n,e),i.ends_=o):i.setCoordinates(e,n),i}return Qn(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?s(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,n,o){return o<kt(this.getExtent(),t,e)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,n,o,i){for(var r=0,s=n.length;r<s;++r){var a=n[r];i=In(t,e,a,o,i),e=a}return i}(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,n,o,i,r,s,a,l,u,c){for(var h=c||[NaN,NaN],p=0,d=n.length;p<d;++p){var f=n[p];u=Ln(t,e,f,o,i,r,s,a,l,u,h),e=f}return u}(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,o))},e.prototype.containsXY=function(t,e){return Un(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,n,o){for(var i=0,r=0,s=n.length;r<s;++r){var a=n[r];i+=Gn(t,e,a,o),e=a}return i}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?qn(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,function(t,e,n,o,i){for(var r=void 0!==i?i:[],s=0,a=0,l=n.length;a<l;++a){var u=n[a];r[s++]=zn(t,e,u,o,r[s]),e=u}return r.length=s,r}(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=qt(this.getExtent());this.flatInteriorPoint_=function(t,e,n,o,r,s,a){for(var l,u,c,h,p,d,f,g=r[s+1],_=[],v=0,y=n.length;v<y;++v){var m=n[v];for(h=t[m-o],d=t[m-o+1],l=e;l<m;l+=o)p=t[l],f=t[l+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(p-h)+h,_.push(c)),h=p,d=f}var w=NaN,C=-1/0;for(_.sort(i),h=_[0],l=1,u=_.length;l<u;++l){p=_[l];var x=Math.abs(p-h);x>C&&Un(t,e,n,o,c=(h+p)/2,g)&&(w=c,C=x),h=p}return isNaN(w)&&(w=r[s]),a?(a.push(w,g,C),a):[w,g,C]}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Vn(this.getFlatInteriorPoint(),"XYM")},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Kn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,o=[],i=0,r=0,s=n.length;r<s;++r){var a=n[r],l=new Kn(e.slice(i,a),t);o.push(l),i=a}return o},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,n,o,i){for(var r=void 0!==i&&i,s=0,a=n.length;s<a;++s){var l=n[s],u=Yn(t,e,l,o);if(0===s){if(r&&u||!r&&!u)return!1}else if(r&&!u||!r&&u)return!1;e=l}return!0}(t,0,this.ends_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=qn(this.orientedFlatCoordinates_,0,this.ends_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],o=[];return n.length=function(t,e,n,o,i,r,s,a){for(var l=0,u=n.length;l<u;++l){var c=n[l];s=Dn(t,e,c,o,i,r,s),a.push(s),e=c}return s}(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,o),new e(n,bn,o)},e.prototype.getType=function(){return"Polygon"},e.prototype.intersectsExtent=function(t){return function(t,e,n,o,i){if(!function(t,e,n,o,i){return!!(Wn(t,e,n,o,i)||Hn(t,e,n,o,i[0],i[1])||Hn(t,e,n,o,i[0],i[3])||Hn(t,e,n,o,i[2],i[1])||Hn(t,e,n,o,i[2],i[3]))}(t,e,n[0],o,i))return!1;if(1===n.length)return!0;for(var r=1,s=n.length;r<s;++r)if(Xn(t,n[r-1],n[r],o,i)&&!Wn(t,n[r-1],n[r],o,i))return!1;return!0}(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=function(t,e,n,o,i){for(var r=i||[],s=0,a=0,l=n.length;a<l;++a){var u=Fn(t,e,n[a],o);r[s++]=u,e=u}return r.length=s,r}(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(jn);const $n=Jn;function to(t){var e=t[0],n=t[1],o=t[2],i=t[3],r=[e,n,e,i,o,i,o,n,e,n];return new Jn(r,bn,[r.length])}var eo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function no(t,e){setTimeout((function(){t(e)}),0)}function oo(t){return!(t.sourceCenter&&t.targetCenter&&!hn(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function io(t,e,n,o,i){var r=Math.cos(-i),s=Math.sin(-i),a=t[0]*r-t[1]*s,l=t[1]*r+t[0]*s;return[(a+=(e[0]/2-n[0])*o)*r-(l+=(n[1]-e[1]/2)*o)*(s=-s),l*r+a*s]}const ro=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=h({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=Ve(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.cancelAnchor_=void 0,o.center&&(o.center=tn(o.center,n.projection_)),o.extent&&(o.extent=en(o.extent,n.projection_)),n.applyOptions_(o),n}return eo(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,o,i=void 0!==t.minZoom?t.minZoom:0,s=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,l=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,c=void 0!==t.showFullExtent&&t.showFullExtent,h=Ve(t.projection,"EPSG:3857"),p=h.getExtent(),d=t.constrainOnlyCenter,f=t.extent;if(l||f||!h.isGlobal()||(d=!1,f=p),void 0!==t.resolutions){var g=t.resolutions;n=g[i],o=void 0!==g[s]?g[s]:g[g.length-1],e=t.constrainResolution?function(t,e,n,o){return function(i,s,a,l){if(void 0!==i){var u=t[0],c=t[t.length-1],h=n?gn(u,n,a,o):u;if(l)return void 0===e||e?_n(i,h,c):q(i,c,h);var p=Math.min(h,i),d=Math.floor(r(t,p,s));return t[d]>h&&d<t.length-1?t[d+1]:t[d]}}}(g,u,!d&&f,c):vn(n,o,u,!d&&f,c)}else{var _=(p?Math.max(oe(p),$t(p)):360*ge[_e.DEGREES]/h.getMetersPerUnit())/256/Math.pow(2,0),v=_/Math.pow(2,28);void 0!==(n=t.maxResolution)?i=0:n=_/Math.pow(a,i),void 0===(o=t.minResolution)&&(o=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,s):_/Math.pow(a,s):v),s=i+Math.floor(Math.log(n/o)/Math.log(a)),o=n/Math.pow(a,s-i),e=t.constrainResolution?function(t,e,n,o,i,r){return function(s,a,l,u){if(void 0!==s){var c=i?gn(e,i,l,r):e,h=void 0!==n?n:0;if(u)return void 0===o||o?_n(s,c,h):q(s,h,c);var p=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),d=-a*(.5-1e-9)+.5,f=Math.min(c,s),g=Math.floor(Math.log(e/f)/Math.log(t)+d),_=Math.max(p,g);return q(e/Math.pow(t,_),h,c)}}}(a,n,o,u,!d&&f,c):vn(n,o,u,!d&&f,c)}return{constraint:e,maxResolution:n,minResolution:o,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return dn(t.extent,t.constrainOnlyCenter,e)}var n=Ve(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&n.isGlobal()){var o=n.getExtent().slice();return o[0]=-1/0,o[2]=1/0,dn(o,!1,!1)}return fn}(t),o=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=nt(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?mn:"number"==typeof e?(n=e,o=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/o+.5)*o:void 0}):mn}return yn;var n,o,i}(t);this.constraints_={center:n,resolution:o,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},Object.defineProperty(e.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var o=t||[0,0,0,0];e=e||[0,0,0,0];var i=this.getResolution(),r=i/2*(o[3]-e[3]+e[1]-o[1]),s=i/2*(o[0]-e[0]+e[2]-o[2]);this.setCenterInternal([n[0]+r,n[1]-s])}},enumerable:!1,configurable:!0}),e.prototype.getUpdatedOptions_=function(t){var e=h({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),h({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var o=arguments[n];o.center&&((o=h({},o)).center=tn(o.center,this.getProjection())),o.anchor&&((o=h({},o)).anchor=tn(o.anchor,this.getProjection())),e[n]=o}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var o=arguments[n-1];return o.center&&this.setCenterInternal(o.center),void 0!==o.zoom&&this.setZoom(o.zoom),void 0!==o.rotation&&this.setRotation(o.rotation),void(e&&no(e,!0))}for(var i=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,a=this.targetRotation_,l=[],u=0;u<n;++u){var c=arguments[u],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||xn,callback:e};if(c.center&&(h.sourceCenter=r,h.targetCenter=c.center.slice(),r=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=s,h.targetResolution=this.getResolutionForZoom(c.zoom),s=h.targetResolution):c.resolution&&(h.sourceResolution=s,h.targetResolution=c.resolution,s=h.targetResolution),void 0!==c.rotation){h.sourceRotation=a;var p=ot(c.rotation-a+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=a+p,a=h.targetRotation}oo(h)?h.complete=!0:i+=h.duration,l.push(h)}this.animations_.push(l),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,n=this.animations_.length;e<n;++e){var o=this.animations_[e];if(o[0].callback&&no(o[0].callback,!1),!t)for(var i=0,r=o.length;i<r;++i){var s=o[i];if(!s.complete){t=s.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var o=this.animations_[n],i=!0,r=0,s=o.length;r<s;++r){var a=o[r];if(!a.complete){var l=t-a.start,u=a.duration>0?l/a.duration:1;u>=1?(a.complete=!0,u=1):i=!1;var c=a.easing(u);if(a.sourceCenter){var h=a.sourceCenter[0],p=a.sourceCenter[1],d=h+c*(a.targetCenter[0]-h),f=p+c*(a.targetCenter[1]-p);this.targetCenter_=[d,f]}if(a.sourceResolution&&a.targetResolution){var g=1===c?a.targetResolution:a.sourceResolution+c*(a.targetResolution-a.sourceResolution);if(a.anchor){var _=this.getViewportSize_(this.getRotation()),v=this.constraints_.resolution(g,0,_,!0);this.targetCenter_=this.calculateCenterZoom(v,a.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==a.sourceRotation&&void 0!==a.targetRotation){var y=1===c?ot(a.targetRotation+Math.PI,2*Math.PI)-Math.PI:a.sourceRotation+c*(a.targetRotation-a.sourceRotation);if(a.anchor){var m=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(m,a.anchor)}this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!a.complete)break}}if(i){this.animations_[n]=null,this.setHint(0,-1);var w=o[0].callback;w&&no(w,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,o,i,r=this.getCenterInternal();return void 0!==r&&(pn(n=[r[0]-e[0],r[1]-e[1]],t-this.getRotation()),i=e,(o=n)[0]+=+i[0],o[1]+=+i[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,o=this.getCenterInternal(),i=this.getResolution();return void 0!==o&&void 0!==i&&(n=[e[0]-t*(e[0]-o[0])/i,e[1]-t*(e[1]-o[1])/i]),n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],o=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(o*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(o*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?$e(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(ln)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return e=this.calculateExtentInternal(t),this.getProjection(),e;var e},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();Y(n,1);var o=this.getResolution();Y(void 0!==o,2);var i=this.getRotation();return Y(void 0!==i,3),Jt(n,o,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(un)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(en(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),o=oe(t)/n[0],i=$t(t)/n[1];return Math.max(o,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/Math.log(e);return function(t){return n/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(cn)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),o=this.minResolution_,i=Math.log(n/o)/e;return function(t){return Math.log(n/t)/e/i}},e.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},e.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),o=this.getCenterInternal(),i=this.padding_;if(i){var r=this.getViewportSizeMinusPadding_();o=io(o,this.getViewportSize_(),[r[0]/2+i[3],r[1]/2+i[0]],e,n)}return{center:o.slice(0),projection:void 0!==t?t:null,resolution:e,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,o=this.minZoom_||0;if(this.resolutions_){var i=r(this.resolutions_,t,1);o=i,e=this.resolutions_[i],n=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,n=this.zoomFactor_;return o+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=q(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,q(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n;if(Y(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))Y(!re(t),25),n=to(o=en(t,this.getProjection()));else if("Circle"===t.getType()){var o;(n=to(o=en(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),qt(o))}else{var i=Je();n=i?t.clone().transform(i,this.getProjection()):t}this.fitInternal(n,e)},e.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),o=Math.sin(-e),i=t.getFlatCoordinates(),r=t.getStride(),s=1/0,a=1/0,l=-1/0,u=-1/0,c=0,h=i.length;c<h;c+=r){var p=i[c]*n-i[c+1]*o,d=i[c]*o+i[c+1]*n;s=Math.min(s,p),a=Math.min(a,d),l=Math.max(l,p),u=Math.max(u,d)}return[s,a,l,u]},e.prototype.fitInternal=function(t,e){var n=e||{},o=n.size;o||(o=this.getViewportSizeMinusPadding_());var i,r=void 0!==n.padding?n.padding:[0,0,0,0],s=void 0!==n.nearest&&n.nearest;i=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;var a=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(a,[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]);l=isNaN(l)?i:Math.max(l,i),l=this.getConstrainedResolution(l,s?0:1);var u=this.getRotation(),h=Math.sin(u),p=Math.cos(u),d=qt(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;var f=d[0]*p-d[1]*h,g=d[1]*p+d[0]*h,_=this.getConstrainedCenter([f,g],l),v=n.callback?n.callback:c;void 0!==n.duration?this.animateInternal({resolution:l,center:_,duration:n.duration,easing:n.easing},v):(this.targetResolution_=l,this.targetCenter_=_,this.applyTargetState_(!1,!0),no(v,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(tn(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(io(t,e,n,this.getResolution(),this.getRotation()))},e.prototype.calculateCenterShift=function(t,e,n,o){var i,r=this.padding_;if(r&&t){var s=this.getViewportSizeMinusPadding_(-n),a=io(t,o,[s[0]/2+r[3],s[1]/2+r[0]],e,n);i=[t[0]-a[0],t[1]-a[1]]}return i},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=$e(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&tn(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,o,n);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=tn(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),o=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(o,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(tn(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,o=this.constraints_.rotation(this.targetRotation_,n),i=this.getViewportSize_(o),r=this.constraints_.resolution(this.targetResolution_,0,i,n),s=this.constraints_.center(this.targetCenter_,r,i,n,this.calculateCenterShift(this.targetCenter_,r,o,i));this.get(cn)!==o&&this.set(cn,o),this.get(un)!==r&&this.set(un,r),this.get(ln)&&hn(this.get(ln),s)||this.set(ln,s),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var o=void 0!==t?t:200,i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,i,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,r,s));if(0===o&&!this.cancelAnchor_)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=l,void this.applyTargetState_();var u=n||(0===o?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===a&&this.getRotation()===r&&this.getCenterInternal()&&hn(this.getCenterInternal(),l)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:l,resolution:a,duration:o,easing:Cn,anchor:u}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,n){var o=n&&tn(n,this.getProjection());this.endInteractionInternal(t,e,o)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(1,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,o=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,o)},e}(D);function so(t,e,n){return e+":"+t+":"+(n?function(t){return"string"==typeof t?t:function(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var o=t[2];return o!=(0|o)&&(o=o+.5|0),"rgba("+e+","+n+","+o+","+(void 0===t[3]?1:t[3])+")"}(t)}(n):"null")}var ao=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var o=so(t,e,n);return o in this.cache_?this.cache_[o]:null},t.prototype.set=function(t,e,n,o){var i=so(t,e,n);this.cache_[i]=o,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}()),lo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function uo(t,e){ao.expire()}const co=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n}return lo(e,t),e.prototype.dispatchRenderEvent=function(t,e){A()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,o=t.pixelToCoordinateTransform;At(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),It(o,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,o,i,r,s,a){var l,u=e.viewState;function c(t,e,n,o){return i.call(r,e,t?n:null,o)}var h=u.projection,p=function(t,e){if(e.canWrapX()){var n=oe(e.getExtent()),o=function(t,e,n){var o=e.getExtent(),i=0;if(e.canWrapX()&&(t[0]<o[0]||t[0]>o[2])){var r=n||oe(o);i=Math.floor((t[0]-o[0])/r)}return i}(t,e,n);o&&(t[0]-=o*n)}return t}(t.slice(),h),d=[[0,0]];if(h.canWrapX()&&o){var f=oe(h.getExtent());d.push([-f,0],[f,0])}for(var g=e.layerStatesArray,_=g.length,v=[],y=[],m=0;m<d.length;m++)for(var w=_-1;w>=0;--w){var C=g[w],x=C.layer;if(x.hasRenderer()&&pt(C,u)&&s.call(a,x)){var E=x.getRenderer(),b=x.getSource();if(E&&b){var T=b.getWrapX()?p:t,P=c.bind(null,C.managed);y[0]=T[0]+d[m][0],y[1]=T[1]+d[m][1],l=E.forEachFeatureAtCoordinate(y,e,n,P,v)}if(l)return l}}if(0!==v.length){var O=1/v.length;return v.forEach((function(t,e){return t.distanceSq+=e*O})),v.sort((function(t,e){return t.distanceSq-e.distanceSq})),v.some((function(t){return l=t.callback(t.feature,t.layer,t.geometry)})),l}},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){return A()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,o,i,r){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,o,l,this,i,r)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){A()},e.prototype.scheduleExpireIconCache=function(t){ao.canExpireCache()&&t.postRenderFunctions.push(uo)},e}(o);var ho="ol-hidden",po="ol-control",fo=(new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),new D);(new _).setSize=function(){console.warn("labelCache is deprecated.")};var go=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _o=function(t){function e(e){var o=t.call(this,e)||this;o.fontChangeListenerKey_=P(fo,n,e.redrawText.bind(e)),o.element_=document.createElement("div");var i=o.element_.style;i.position="absolute",i.width="100%",i.height="100%",i.zIndex="0",o.element_.className="ol-unselectable ol-layers";var r=e.getViewport();return r.insertBefore(o.element_,r.firstChild||null),o.children_=[],o.renderedVisible_=!0,o}return go(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var o=new Ct(t,void 0,e);n.dispatchEvent(o)}},e.prototype.disposeInternal=function(){R(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(t){if(t){this.calculateMatrices2D(t),this.dispatchRenderEvent(at,t);var e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=t.viewState;this.children_.length=0;for(var o=[],i=null,r=0,s=e.length;r<s;++r){var a=e[r];if(t.layerIndex=r,pt(a,n)&&(a.sourceState==ct||a.sourceState==ut)){var l=a.layer,u=l.render(t,i);u&&(u!==i&&(this.children_.push(u),i=u),"getDeclutter"in l&&o.push(l))}}for(r=o.length-1;r>=0;--r)o[r].renderDeclutter(t);!function(t,e){for(var n=t.childNodes,o=0;;++o){var i=n[o],r=e[o];if(!i&&!r)break;i!==r&&(i?r?t.insertBefore(r,i):(t.removeChild(i),--o):t.appendChild(r))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,o,i){for(var r=e.viewState,s=e.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],u=l.layer;if(u.hasRenderer()&&pt(l,r)&&i(u)){var c=u.getRenderer().getDataAtPixel(t,e,n);if(c){var h=o(u,c);if(h)return h}}}},e}(co),vo="add",yo="remove";var mo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wo="length",Co=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.element=n,i.index=o,i}return mo(e,t),e}(e);const xo=function(t){function e(e,n){var o=t.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=e||[],o.unique_)for(var r=0,s=o.array_.length;r<s;++r)o.assertUnique_(o.array_[r],r);return o.updateLength_(),o}return mo(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(wo)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Co(vo,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,o=e.length;n<o;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Co(yo,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var o=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Co(yo,o,t)),this.dispatchEvent(new Co(vo,e,t))}else{for(var i=n;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(wo,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,o=this.array_.length;n<o;++n)if(this.array_[n]===t&&n!==e)throw new B(58)},e}(D);var Eo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bo="layers";const To=function(t){function e(e){var n=this,o=e||{},i=h({},o);delete i.layers;var r=o.layers;return(n=t.call(this,i)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(bo,n.handleLayersChanged_),r?Array.isArray(r)?r=new xo(r.slice(),{unique:!0}):Y("function"==typeof r.getArray,43):r=new xo(void 0,{unique:!0}),n.setLayers(r),n}return Eo(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(R),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(P(t,vo,this.handleLayersAdd_,this),P(t,yo,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(R);p(this.listenerKeys_);for(var o=t.getArray(),i=0,r=o.length;i<r;i++){var s=o[i];this.listenerKeys_[L(s)]=[P(s,n,this.handleLayerChange_,this),P(s,v,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[L(e)]=[P(e,n,this.handleLayerChange_,this),P(e,v,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=L(t.element);this.listenerKeys_[e].forEach(R),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(bo)},e.prototype.setLayers=function(t){this.set(bo,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));var o=this.getLayerState(),i=o.zIndex;t||void 0!==o.zIndex||(i=0);for(var r=n,s=e.length;r<s;r++){var a=e[r];a.opacity*=o.opacity,a.visible=a.visible&&o.visible,a.maxResolution=Math.min(a.maxResolution,o.maxResolution),a.minResolution=Math.max(a.minResolution,o.minResolution),a.minZoom=Math.max(a.minZoom,o.minZoom),a.maxZoom=Math.min(a.maxZoom,o.maxZoom),void 0!==o.extent&&(void 0!==a.extent?a.extent=te(a.extent,o.extent):a.extent=o.extent),void 0===a.zIndex&&(a.zIndex=i)}return e},e.prototype.getSourceState=function(){return ct},e}(st);var Po=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Oo=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.map=n,i.frameState=void 0!==o?o:null,i}return Po(e,t),e}(e);var Ro=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const So=function(t){function e(e,n,o,i,r){var s=t.call(this,e,n,r)||this;return s.originalEvent=o,s.pixel_=null,s.coordinate_=null,s.dragging=void 0!==i&&i,s}return Ro(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!1,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},e}(Oo),Mo={SINGLECLICK:"singleclick",CLICK:w,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},jo="pointermove",Ao="pointerdown";var Io=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Lo=function(t){function e(e,n){var o=t.call(this,e)||this;o.map_=e,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=void 0===n?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=0,o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=P(i,Ao,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=P(i,jo,o.relayEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(b,o.boundHandleTouchMove_,!!Mt&&{passive:!1}),o}return Io(e,t),e.prototype.emulateClick_=function(t){var e=new So(Mo.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new So(Mo.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new So(Mo.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Mo.POINTERUP||e.type==Mo.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Mo.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new So(Mo.POINTERUP,this.map_,t);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(R),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.emulateClicks_=0===this.activePointers_,this.updateActivePointers_(t);var e=new So(Mo.POINTERDOWN,this.map_,t);for(var n in this.dispatchEvent(e),this.down_={},t){var o=t[n];this.down_[n]="function"==typeof o?c:o}if(0===this.dragListenerKeys_.length){var i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(P(i,Mo.POINTERMOVE,this.handlePointerMove_,this),P(i,Mo.POINTERUP,this.handlePointerUp_,this),P(this.element_,Mo.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(P(this.element_.getRootNode(),Mo.POINTERUP,this.handlePointerUp_,this))}},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new So(Mo.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new So(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){var e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(R(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(b,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(R(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(R),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(_),Fo="postrender",ko="layergroup",Do="size",zo="target",Go="view";var No=1/0;const Ko=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,p(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},t.prototype.enqueue=function(t){Y(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=No&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,o=e.length,i=e[t],r=n[t],s=t;t<o>>1;){var a=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<o&&n[l]<n[a]?l:a;e[t]=e[u],n[t]=n[u],t=u}e[t]=i,n[t]=r,this.siftDown_(s,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,o=this.priorities_,i=n[e],r=o[e];e>t;){var s=this.getParentIndex_(e);if(!(o[s]>r))break;n[e]=n[s],o[e]=o[s],e=s}n[e]=i,o[e]=r},t.prototype.reprioritize=function(){var t,e,n,o=this.priorityFunction_,i=this.elements_,r=this.priorities_,s=0,a=i.length;for(e=0;e<a;++e)(n=o(t=i[e]))==No?delete this.queuedElements_[this.keyFunction_(t)]:(r[s]=n,i[s++]=t);i.length=s,r.length=s,this.heapify_()},t}();var Zo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vo=function(t){function e(e,n){var o=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return Zo(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);return n&&e[0].addEventListener(v,this.boundHandleTileChange_),n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(2===n||3===n||4===n){e.removeEventListener(v,this.boundHandleTileChange_);var o=e.getKey();o in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[o],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,o,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),0!==n.getState()||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,n.load())},e}(Ko);function Xo(t){return t[0]>0&&t[1]>0}function Ho(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var Uo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Wo=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,o,i,r={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new To({layers:t.layers});return r.layergroup=s,r.target=t.target,r.view=void 0!==t.view?t.view:new ro,void 0!==t.controls&&(Array.isArray(t.controls)?n=new xo(t.controls.slice()):(Y("function"==typeof t.controls.getArray,47),n=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new xo(t.interactions.slice()):(Y("function"==typeof t.interactions.getArray,48),o=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new xo(t.overlays.slice()):(Y("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new xo,{controls:n,interactions:o,keyboardEventTarget:e,overlays:i,values:r}}(e);return n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:Ot,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=e.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.keyHandlerKeys_=null,n.controls=o.controls||new xo,n.interactions=o.interactions||new xo,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new Vo(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(ko,n.handleLayerGroupChanged_),n.addChangeListener(Go,n.handleViewChanged_),n.addChangeListener(Do,n.handleSizeChanged_),n.addChangeListener(zo,n.handleTargetChanged_),n.setProperties(o.values),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.controls.addEventListener(vo,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(yo,function(t){t.element.setMap(null)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.addEventListener(vo,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(yo,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(vo,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(yo,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n}return Uo(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var o=this.getCoordinateFromPixelInternal(t),i=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,r=void 0!==n.layerFilter?n.layerFilter:l,s=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(o,this.frameState_,i,s,e,null,r,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var o=n||{},i=void 0!==o.hitTolerance?o.hitTolerance:0,r=o.layerFilter||l;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,r)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),o=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:l,i=void 0!==e.hitTolerance?e.hitTolerance:0,r=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,i,r,o,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n="changedTouches"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(zo)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return $e(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?jt(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(ko)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer.getSource();if(o&&o.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=tn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?jt(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(Do)},e.prototype.getView=function(){return this.get(Go)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getOwnerDocument=function(){var t=this.getTargetElement();return t?t.ownerDocument:document},e.prototype.getTilePriority=function(t,e,n,o){return function(t,e,n,o,i){if(!t||!(n in t.wantedTiles))return No;if(!t.wantedTiles[n][e.getKey()])return No;var r=t.viewState.center,s=o[0]-r[0],a=o[1]-r[1];return 65536*Math.log(i)+Math.sqrt(s*s+a*a)/i}(this.frameState_,t,e,n,o)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,o=new So(n,this,t);this.handleMapBrowserEvent(o)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent,n=e.type;if(n===Ao||n===T||n===C){var o=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():o,r=e.target;if(this.overlayContainerStopEvent_.contains(r)||!(i===o?o.documentElement:i).contains(r))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t))for(var s=this.getInteractions().getArray().slice(),a=s.length-1;a>=0;a--){var l=s[a];if(l.getMap()===this&&l.getActive()&&this.getTargetElement()&&(!l.handleEvent(t)||t.propagationStopped))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,o=n;if(t){var i=t.viewHints;if(i[0]||i[1]){var r=Date.now()-t.time>8;n=r?0:8,o=r?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,o))}!t||!this.hasListener(lt)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(lt,t);for(var s=this.postRenderFunctions_,a=0,l=s.length;a<l;++a)s[a](this,t);s.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.mapBrowserEventHandler_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)R(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null,this.viewport_.removeEventListener(m,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(T,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(E,this.handleResize_,!1),this.handleResize_=void 0),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,le(this.viewport_)}if(t){for(var o in t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Lo(this,this.moveTolerance_),Mo)this.mapBrowserEventHandler_.addEventListener(Mo[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(m,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(T,this.boundHandleBrowserEvent_,!!Mt&&{passive:!1});var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[P(i,C,this.handleBrowserEvent,this),P(i,x,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(E,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(R(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(R(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=P(t,n,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=P(t,v,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(R),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[P(t,n,this.render,this),P(t,v,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var o=t[e].layer;o.hasRenderer()&&o.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n,o=this,i=this.getSize(),r=this.getView(),s=this.frameState_,a=null;if(void 0!==i&&Xo(i)&&r&&r.isDef()){var l=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=r.getState();a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Jt(u.center,u.resolution,u.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:l,wantedTiles:{}}}this.frameState_=a,this.renderer_.renderFrame(a),a&&(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),s&&(!this.previousExtent_||!re(this.previousExtent_)&&!Zt(a.extent,this.previousExtent_))&&(this.dispatchEvent(new Oo("movestart",this,s)),this.previousExtent_=Kt(this.previousExtent_)),this.previousExtent_&&!a.viewHints[0]&&!a.viewHints[1]&&!Zt(a.extent,this.previousExtent_)&&(this.dispatchEvent(new Oo("moveend",this,a)),e=a.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice())),this.dispatchEvent(new Oo(Fo,this,a)),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((function(){o.postRenderTimeoutHandle_=void 0,o.handlePostRender()}),0))},e.prototype.setLayerGroup=function(t){this.set(ko,t)},e.prototype.setSize=function(t){this.set(Do,t)},e.prototype.setTarget=function(t){this.set(zo,t)},e.prototype.setView=function(t){this.set(Go,t)},e.prototype.updateSize=function(){var t=this.getTargetElement(),e=void 0;if(t){var n=getComputedStyle(t),o=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),i=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(o)||isNaN(i)||Xo(e=[o,i])||console.warn("No map visible because the map container's width or height are 0.")}this.setSize(e),this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(D);var Bo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Yo=function(t){function e(e){var n=t.call(this)||this,o=e.element;return!o||e.target||o.style.pointerEvents||(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],e.render&&(n.render=e.render),e.target&&n.setTarget(e.target),n}return Bo(e,t),e.prototype.disposeInternal=function(){le(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&le(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)R(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==c&&this.listenerKeys.push(P(t,Fo,this.render,this)),t.render())},e.prototype.render=function(t){},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(D);var qo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Qo=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this).ulElement_=document.createElement("ul"),n.collapsed_=void 0===o.collapsed||o.collapsed,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=void 0!==o.collapsible,n.collapsible_=void 0===o.collapsible||o.collapsible,n.collapsible_||(n.collapsed_=!1);var i=void 0!==o.className?o.className:"ol-attribution",r=void 0!==o.tipLabel?o.tipLabel:"Attributions",s=void 0!==o.expandClassName?o.expandClassName:i+"-expand",a=void 0!==o.collapseLabel?o.collapseLabel:"",l=void 0!==o.collapseClassName?o.collapseClassName:i+"-collpase";"string"==typeof a?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=a,n.collapseLabel_.className=l):n.collapseLabel_=a;var u=void 0!==o.label?o.label:"i";"string"==typeof u?(n.label_=document.createElement("span"),n.label_.textContent=u,n.label_.className=s):n.label_=u;var c=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=r,n.toggleButton_.appendChild(c),n.toggleButton_.addEventListener(w,n.handleClick_.bind(n),!1);var h=i+" ol-unselectable "+po+(n.collapsed_&&n.collapsible_?" ol-collapsed":"")+(n.collapsible_?"":" ol-uncollapsible"),p=n.element;return p.className=h,p.appendChild(n.toggleButton_),p.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return qo(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],o=!0,i=t.layerStatesArray,r=0,s=i.length;r<s;++r){var a=i[r];if(pt(a,t.viewState)){var l=a.layer.getSource();if(l){var u=l.getAttributions();if(u){var c=u(t);if(c)if(o=o&&!1!==l.getAttributionsCollapsible(),Array.isArray(c))for(var h=0,p=c.length;h<p;++h)c[h]in e||(n.push(c[h]),e[c[h]]=!0);else c in e||(n.push(c),e[c]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(o),n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!a(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var o=0,i=e.length;o<i;++o){var r=document.createElement("li");r.innerHTML=e[o],this.ulElement_.appendChild(r)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ae(this.collapseLabel_,this.label_):ae(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.render=function(t){this.updateElement_(t.frameState)},e}(Yo);var Jo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const $o=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=void 0!==o.className?o.className:"ol-rotate",r=void 0!==o.label?o.label:"",s=void 0!==o.compassClassName?o.compassClassName:"ol-compass";n.label_=null,"string"==typeof r?(n.label_=document.createElement("span"),n.label_.className=s,n.label_.textContent=r):(n.label_=r,n.label_.classList.add(s));var a=o.tipLabel?o.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=a,l.appendChild(n.label_),l.addEventListener(w,n.handleClick_.bind(n),!1);var u=i+" ol-unselectable "+po,c=n.element;return c.className=u,c.appendChild(l),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=void 0!==o.duration?o.duration:250,n.autoHide_=void 0===o.autoHide||o.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(ho),n}return Jo(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Cn}):t.setRotation(0))}},e.prototype.render=function(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var o="rotate("+n+"rad)";if(this.autoHide_){var i=this.element.classList.contains(ho);i||0!==n?i&&0!==n&&this.element.classList.remove(ho):this.element.classList.add(ho)}this.label_.style.transform=o}this.rotation_=n}},e}(Yo);var ti=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ei=function(t){function e(e){var n=this,o=e||{};n=t.call(this,{element:document.createElement("div"),target:o.target})||this;var i=void 0!==o.className?o.className:"ol-zoom",r=void 0!==o.delta?o.delta:1,s=void 0!==o.zoomInClassName?o.zoomInClassName:i+"-in",a=void 0!==o.zoomOutClassName?o.zoomOutClassName:i+"-out",l=void 0!==o.zoomInLabel?o.zoomInLabel:"+",u=void 0!==o.zoomOutLabel?o.zoomOutLabel:"",c=void 0!==o.zoomInTipLabel?o.zoomInTipLabel:"Zoom in",h=void 0!==o.zoomOutTipLabel?o.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=c,p.appendChild("string"==typeof l?document.createTextNode(l):l),p.addEventListener(w,n.handleClick_.bind(n,r),!1);var d=document.createElement("button");d.className=a,d.setAttribute("type","button"),d.title=h,d.appendChild("string"==typeof u?document.createTextNode(u):u),d.addEventListener(w,n.handleClick_.bind(n,-r),!1);var f=i+" ol-unselectable "+po,g=n.element;return g.className=f,g.appendChild(p),g.appendChild(d),n.duration_=void 0!==o.duration?o.duration:250,n}return ti(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var o=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:o,duration:this.duration_,easing:Cn})):e.setZoom(o)}}},e}(Yo),ni="active";var oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ii(t,e,n,o){var i=t.getZoom();if(void 0!==i){var r=t.getConstrainedZoom(i+e),s=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:void 0!==o?o:250,easing:Cn})}}const ri=function(t){function e(e){var n=t.call(this)||this;return n.on,n.once,n.un,e&&e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return oi(e,t),e.prototype.getActive=function(){return this.get(ni)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(ni,t)},e.prototype.setMap=function(t){this.map_=t},e}(D);var si=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ai=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:250,n}return si(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==Mo.DBLCLICK){var n=t.originalEvent,o=t.map,i=t.coordinate,r=n.shiftKey?-this.delta_:this.delta_;ii(o.getView(),r,i,this.duration_),n.preventDefault(),e=!0}return!e},e}(ri);var li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ui(t){for(var e=t.length,n=0,o=0,i=0;i<e;i++)n+=t[i].clientX,o+=t[i].clientY;return[n/e,o/e]}const ci=function(t){function e(e){var n=this,o=e||{};return n=t.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return li(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.originalEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Mo.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Mo.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==Mo.POINTERDOWN){var o=this.handleDownEvent(t);this.handlingDownUpSequence=o,e=this.stopDown(o)}else t.type==Mo.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Mo.POINTERDOWN||e===Mo.POINTERDRAG||e===Mo.POINTERUP}(t)){var e=t.originalEvent,n=e.pointerId.toString();t.type==Mo.POINTERUP?delete this.trackedPointers_[n]:(t.type==Mo.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=f(this.trackedPointers_)}},e}(ri);function hi(t){var e=arguments;return function(t){for(var n=!0,o=0,i=e.length;o<i&&(n=n&&e[o](t));++o);return n}}var pi=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},di=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||function(t){return t.target.getTargetElement().contains(document.activeElement)}(t)},fi=l,gi=function(t){var e=t.originalEvent;return 0==e.button&&!(Tt&&Pt&&e.ctrlKey)},_i=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},vi=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},yi=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},mi=function(t){var e=t.originalEvent;return Y(void 0!==e,56),"mouse"==e.pointerType},wi=function(t){var e=t.originalEvent;return Y(void 0!==e,56),e.isPrimary&&0===e.button},Ci=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const xi=function(t){function e(e){var n=t.call(this,{stopDown:u})||this,o=e||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:hi(_i,wi);return n.condition_=o.onFocusOnly?hi(di,i):i,n.noKinetic_=!1,n}return Ci(e,t),e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,o=this.targetPointers,i=ui(o);if(o.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var r=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=t.map.getView();e=r,n=s.getResolution(),e[0]*=n,e[1]*=n,pn(r,s.getRotation()),s.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=o.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var o=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-o*Math.cos(i),s[1]-o*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:Cn})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(ci);var Ei=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const bi=function(t){function e(e){var n=this,o=e||{};return(n=t.call(this,{stopDown:u})||this).condition_=o.condition?o.condition:pi,n.lastAngle_=void 0,n.duration_=void 0!==o.duration?o.duration:250,n}return Ei(e,t),e.prototype.handleDragEvent=function(t){if(mi(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==yn){var o=e.getSize(),i=t.pixel,r=Math.atan2(o[1]/2-i[1],i[0]-o[0]/2);if(void 0!==this.lastAngle_){var s=r-this.lastAngle_;n.adjustRotationInternal(-s)}this.lastAngle_=r}}},e.prototype.handleUpEvent=function(t){return!mi(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!(!mi(t)||!gi(t)||!this.condition_(t)||(t.map.getView().beginInteraction(),this.lastAngle_=void 0,0))},e}(ci);var Ti=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Pi=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Ti(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n="px",o=this.element_.style;o.left=Math.min(t[0],e[0])+n,o.top=Math.min(t[1],e[1])+n,o.width=Math.abs(e[0]-t[0])+n,o.height=Math.abs(e[1]-t[1])+n},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new $n([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(o);var Oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ri=function(t){function e(e,n,o){var i=t.call(this,e)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return Oi(e,t),e}(e);const Si=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.box_=new Pi(o.className||"ol-dragbox"),n.minArea_=void 0!==o.minArea?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:gi,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return Oi(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var o=n[0]-e[0],i=n[1]-e[1];return o*o+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Ri("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){this.box_.setMap(null);var e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Ri(e?"boxend":"boxcancel",t.coordinate,t)),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Ri("boxstart",t.coordinate,t)),!0)},e.prototype.onBoxEnd=function(t){},e}(ci);var Mi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ji=function(t){function e(e){var n=this,o=e||{},i=o.condition?o.condition:vi;return(n=t.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this).duration_=void 0!==o.duration?o.duration:200,n.out_=void 0!==o.out&&o.out,n}return Mi(e,t),e.prototype.onBoxEnd=function(t){var e=this.getMap().getView(),n=this.getGeometry();if(this.out_){var o=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(o),r=e.getResolution()/i;(n=n.clone()).scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:Cn})},e}(Si);var Ai=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ii=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.defaultCondition_=function(t){return _i(t)&&yi(t)},n.condition_=void 0!==o.condition?o.condition:n.defaultCondition_,n.duration_=void 0!==o.duration?o.duration:100,n.pixelDelta_=void 0!==o.pixelDelta?o.pixelDelta:128,n}return Ai(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C){var n=t.originalEvent,o=n.keyCode;if(this.condition_(t)&&(40==o||37==o||39==o||38==o)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,s=0,a=0;40==o?a=-r:37==o?s=-r:39==o?s=r:a=r;var l=[s,a];pn(l,i.getRotation()),function(t,e,n){var o=t.getCenterInternal();if(o){var i=[o[0]+e[0],o[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:En,center:t.getConstrainedCenter(i)})}}(i,l,this.duration_),n.preventDefault(),e=!0}}return!e},e}(ri);var Li=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Fi=function(t){function e(e){var n=t.call(this)||this,o=e||{};return n.condition_=o.condition?o.condition:yi,n.delta_=o.delta?o.delta:1,n.duration_=void 0!==o.duration?o.duration:100,n}return Li(e,t),e.prototype.handleEvent=function(t){var e=!1;if(t.type==C||t.type==x){var n=t.originalEvent,o=n.charCode;if(this.condition_(t)&&(o=="+".charCodeAt(0)||o=="-".charCodeAt(0))){var i=t.map,r=o=="+".charCodeAt(0)?this.delta_:-this.delta_;ii(i.getView(),r,void 0,this.duration_),n.preventDefault(),e=!0}}return!e},e}(ri),ki=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[e+2]-this.points_[n+2];if(o<1e3/60)return!1;var i=this.points_[e]-this.points_[n],r=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(r,i),this.initialVelocity_=Math.sqrt(i*i+r*r)/o,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}();var Di=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zi="trackpad";const Gi=function(t){function e(e){var n=this,o=e||{};(n=t.call(this,o)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==o.maxDelta?o.maxDelta:1,n.duration_=void 0!==o.duration?o.duration:250,n.timeout_=void 0!==o.timeout?o.timeout:80,n.useAnchor_=void 0===o.useAnchor||o.useAnchor,n.constrainResolution_=void 0!==o.constrainResolution&&o.constrainResolution;var i=o.condition?o.condition:fi;return n.condition_=o.onFocusOnly?hi(di,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return Di(e,t),e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==T)return!0;var e,n=t.map,o=t.originalEvent;if(o.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==T&&(e=o.deltaY,bt&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=Ot),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?zi:"wheel");var r=n.getView();if(this.mode_===zi&&!r.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(r.getAnimating()&&r.cancelAnimations(),r.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),r.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var s=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),s),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-q(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),ii(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(ri);var Ni=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ki=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==o.threshold?o.threshold:.3,n.duration_=void 0!==o.duration?o.duration:250,n}return Ni(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],o=this.targetPointers[1],i=Math.atan2(o.clientY-n.clientY,o.clientX-n.clientX);if(void 0!==this.lastAngle_){var r=i-this.lastAngle_;this.rotationDelta_+=r,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=r}this.lastAngle_=i;var s=t.map,a=s.getView();if(a.getConstraints().rotation!==yn){var l=s.getViewport().getBoundingClientRect(),u=ui(this.targetPointers);u[0]-=l.left,u[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(u),this.rotating_&&(s.render(),a.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ci);var Zi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Vi=function(t){function e(e){var n=this,o=e||{},i=o;return i.stopDown||(i.stopDown=u),(n=t.call(this,i)||this).anchor_=null,n.duration_=void 0!==o.duration?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return Zi(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],o=this.targetPointers[1],i=n.clientX-o.clientX,r=n.clientY-o.clientY,s=Math.sqrt(i*i+r*r);void 0!==this.lastDistance_&&(e=this.lastDistance_/s),this.lastDistance_=s;var a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e);var u=a.getViewport().getBoundingClientRect(),c=ui(this.targetPointers);c[0]-=u.left,c[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(c),a.render(),l.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(ci);var Xi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Hi=function(t){function e(e){return(e=h({},e)).controls||(e.controls=function(t){var e={},n=new xo;return(void 0===e.zoom||e.zoom)&&n.push(new ei(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new $o(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Qo(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e={onFocusOnly:!0}||{},n=new xo,o=new ki(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new bi),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new ai({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new xi({onFocusOnly:e.onFocusOnly,kinetic:o})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new Ki),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new Vi({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new Ii),n.push(new Fi({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new Gi({onFocusOnly:e.onFocusOnly,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new ji({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return Xi(e,t),e.prototype.createRenderer=function(){return new _o(this)},e}(Wo);class Ui extends Yo{constructor(t,e){const n=e||{};if(!n.element){const t=document.createElement("div");t.className="bgis-composite",n.element=t}let o;o=t instanceof Yo?[t]:t,o.forEach((t=>{t.setTarget(n.element)})),super(n),this.childControls=o}setMap(t){super.setMap(t),t&&this.childControls.forEach((e=>{e.setMap(t)}))}getChildControls(){return this.childControls}}class Wi extends Ui{constructor(t){const e=t.element?t.element:document.createElement("div");e.classList.add(t.styleClass),t.element=e,super(t.childControls,t),this.styleClass=t.styleClass}getStyleClass(){return this.styleClass}}var Bi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Yi="accuracy",qi="accuracyGeometry",Qi="altitude",Ji="altitudeAccuracy",$i="heading",tr="position",er="projection",nr="speed",or="tracking",ir="trackingOptions",rr=function(t){function e(e){var n=t.call(this,y)||this;return n.code=e.code,n.message=e.message,n}return Bi(e,t),e}(e);const sr=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un;var o=e||{};return n.position_=null,n.transform_=ze,n.watchId_=void 0,n.addChangeListener(er,n.handleProjectionChanged_),n.addChangeListener(or,n.handleTrackingChanged_),void 0!==o.projection&&n.setProjection(o.projection),void 0!==o.trackingOptions&&n.setTrackingOptions(o.trackingOptions),n.setTracking(void 0!==o.tracking&&o.tracking),n}return Bi(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=He(Ne("EPSG:4326"),t),this.position_&&this.set(tr,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(Yi,e.accuracy),this.set(Qi,null===e.altitude?void 0:e.altitude),this.set(Ji,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set($i,null===e.heading?void 0:nt(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var n=this.transform_(this.position_);this.set(tr,n),this.set(nr,null===e.speed?void 0:e.speed);var o=function(t,e,n,o){for(var i=[],r=0;r<32;++r)s(i,ke(t,e,2*Math.PI*r/32,undefined));return i.push(i[0],i[1]),new Jn(i,bn,[i.length])}(this.position_,e.accuracy);o.applyTransform(this.transform_),this.set(qi,o),this.changed()},e.prototype.positionError_=function(t){this.dispatchEvent(new rr(t))},e.prototype.getAccuracy=function(){return this.get(Yi)},e.prototype.getAccuracyGeometry=function(){return this.get(qi)||null},e.prototype.getAltitude=function(){return this.get(Qi)},e.prototype.getAltitudeAccuracy=function(){return this.get(Ji)},e.prototype.getHeading=function(){return this.get($i)},e.prototype.getPosition=function(){return this.get(tr)},e.prototype.getProjection=function(){return this.get(er)},e.prototype.getSpeed=function(){return this.get(nr)},e.prototype.getTracking=function(){return this.get(or)},e.prototype.getTrackingOptions=function(){return this.get(ir)},e.prototype.setProjection=function(t){this.set(er,Ne(t))},e.prototype.setTracking=function(t){this.set(or,t)},e.prototype.setTrackingOptions=function(t){this.set(ir,t)},e}(D);class ar extends Ui{constructor(t,e){t.tooltipAsTextElement=!!t.tooltipAsTextElement&&t.tooltipAsTextElement,t.unicode=t.unicode||null,t.iconClassName=t.iconClassName||null,null===t.unicode&&null===t.iconClassName&&(t.unicode=59651),t.tooltip=t.tooltip||"";const n=t.element?t.element:document.createElement("div");n.className=t.containerClassName?t.containerClassName:"ol-control bgis-control",n.title=t.tooltip;const o=document.createElement("button");if(o.className="bgis-icon-button",null!==t.unicode?o.textContent=String.fromCodePoint(t.unicode):null!==t.iconClassName&&o.appendChild(ar.getIconElementForIconClassName(t.iconClassName)),o.title=t.tooltip,t.tooltip.length>0&&o.setAttribute("aria-label",t.tooltip),n.append(o),t.tooltipAsTextElement){const e=document.createElement("div");e.className="bgis-control-button-text-container";const o=document.createElement("span");o.textContent=t.tooltip,o.className="bgis-control-button-text",e.appendChild(o),n.appendChild(e)}super(e||[],Object.assign(Object.assign({},t),{element:n})),this.unicode=t.unicode,this.iconClassName=t.iconClassName,this.button=o,this.element.addEventListener("click",(()=>this.dispatchEvent("click")),!1),t.preventDefault||this.on("click",this.handleEvent)}handleEvent(t){return!0}getButton(){return this.button}setButtonUnicode(t){this.getButton().innerHTML="",this.getButton().textContent=String.fromCodePoint(t)}setButtonIconClassName(t){this.getButton().textContent="",this.getButton().innerHTML="",this.getButton().appendChild(ar.getIconElementForIconClassName(t))}static getIconElementForIconClassName(t){const e=document.createElement("i");return e.className="bgis-icon "+t,e}}class lr extends e{constructor(t,e){super(t),this.position=e}}var ur=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cr="projection",hr="coordinateFormat";const pr=function(t){function e(e){var n=this,o=e||{},i=document.createElement("div");i.className=void 0!==o.className?o.className:"ol-mouse-position",(n=t.call(this,{element:i,render:o.render,target:o.target})||this).on,n.once,n.un,n.addChangeListener(cr,n.handleProjectionChanged_),o.coordinateFormat&&n.setCoordinateFormat(o.coordinateFormat),o.projection&&n.setProjection(o.projection);var r=!0,s="&#160;";return"undefinedHTML"in o?(void 0!==o.undefinedHTML&&(s=o.undefinedHTML),r=!!s):"placeholder"in o&&(!1===o.placeholder?r=!1:s=String(o.placeholder)),n.placeholder_=s,n.renderOnMouseOut_=r,n.renderedHTML_=i.innerHTML,n.mapProjection_=null,n.transform_=null,n}return ur(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get(hr)},e.prototype.getProjection=function(){return this.get(cr)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var n=e.getViewport();this.listenerKeys.push(P(n,jo,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(P(n,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}},e.prototype.setCoordinateFormat=function(t){this.set(hr,t)},e.prototype.setProjection=function(t){this.set(cr,Ne(t))},e.prototype.updateHTML_=function(t){var e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();this.transform_=n?He(this.mapProjection_,n):ze}var o=this.getMap().getCoordinateFromPixelInternal(t);if(o){var i=Je();i&&(this.transform_=He(this.mapProjection_,i)),this.transform_(o,o);var r=this.getCoordinateFormat();e=r?r(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e.prototype.render=function(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null},e}(Yo),dr=25.4/.28,fr=[1,2,5];class gr extends e{constructor(t,e){super(t),this.originalEvent=e}}class _r extends Yo{constructor(t){const e=t||{},n=document.createElement("div");n.className="bgis-overview-image";const o=document.createElement("figure");o.innerHTML=_r.SVG_CODE,n.appendChild(o),e.element=n,super(e),this.preventDefault=e.preventDefault||!1,this.overviewContainerElement=n,this.extent=Ft([[101e4,579e4],[196e4,633e4]]),this.overviewContainerElement.addEventListener("click",(t=>this.dispatchEvent(new gr("click",t))),!1),this.preventDefault||this.on("click",this.onOverviewImageClick),this.svgElement=o.firstChild,this.backgroundSVGRectElement=document.createElementNS("http://www.w3.org/2000/svg","rect"),this.backgroundSVGRectElement.setAttribute("class","bgis-overviewmap-svg-background"),this.backgroundSVGRectElement.setAttribute("x",String(0)),this.backgroundSVGRectElement.setAttribute("y",String(0)),this.backgroundSVGRectElement.setAttribute("rx",String(8)),this.backgroundSVGRectElement.setAttribute("ry",String(8)),this.backgroundSVGRectElement.setAttribute("width",String(_r.SVG_WIDTH)),this.backgroundSVGRectElement.setAttribute("height",String(_r.SVG_HEIGHT)),this.backgroundSVGRectElement.setAttribute("style","stroke-width:0"),this.backgroundSVGRectElement.setAttribute("fill",_r.BACKGROUND_COLOR),this.svgElement.prepend(this.backgroundSVGRectElement)}setMap(t){super.setMap(t),t&&(this.preventDefault||t.on("moveend",(t=>this.updateCrosshair(t))))}updateCrosshair(t){var e;const n=[_r.SVG_WIDTH,_r.SVG_HEIGHT],o=this.getOverviewPxFromLonLat(null===(e=t.map.getView())||void 0===e?void 0:e.getCenter());if(o[0]>n[0]?o[0]=n[0]:o[0]<0&&(o[0]=0),o[1]>n[1]?o[1]=n[1]:o[1]<0&&(o[1]=0),this.svgElement){const t=this.svgElement.getElementsByClassName("bgis-overviewmap-svg-crosshair");if(t)for(const e of Array.from(t))this.svgElement.removeChild(e);this.svgElement.appendChild(_r.getCrosshair(o[0],0,o[0],_r.SVG_HEIGHT,"bgis-overviewmap-svg-crosshair-x")),this.svgElement.appendChild(_r.getCrosshair(0,o[1],_r.SVG_WIDTH,o[1],"bgis-overviewmap-svg-crosshair-y"))}}static getCrosshair(t,e,n,o,i){const r=document.createElementNS("http://www.w3.org/2000/svg","line");return r.setAttribute("x1",String(t)),r.setAttribute("y1",String(e)),r.setAttribute("x2",String(n)),r.setAttribute("y2",String(o)),r.setAttribute("style","fill: none; stroke: black; stroke-width: 1px;"),r.setAttribute("class","bgis-overviewmap-svg-crosshair "+i),r}static calculateResolutionFromWidth(t,e,n){return Math.abs(t-e)/n}getOverviewPxFromLonLat(t){if(t){const e=[_r.SVG_WIDTH,_r.SVG_HEIGHT],n=[_r.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),_r.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[Math.round(1/n[0]*(t[0]-this.extent[0])),Math.round(1/n[1]*(this.extent[3]-t[1]))]}return[0,0]}onOverviewImageClick(t){var e,n;const o=this.overviewContainerElement.getBoundingClientRect(),i=t.originalEvent.clientX-o.left,r=t.originalEvent.clientY-o.top,s=this.getLonLatFromOverviewPx([i,r]);null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n||n.animate({center:s,duration:300})}getLonLatFromOverviewPx(t){const e=[this.overviewContainerElement.clientWidth,this.overviewContainerElement.clientHeight],n=[_r.calculateResolutionFromWidth(this.extent[0],this.extent[2],e[0]),_r.calculateResolutionFromWidth(this.extent[1],this.extent[3],e[1])];return[t[0]*n[0]+this.extent[0],this.extent[3]-t[1]*n[1]]}getOverviewContainerElement(){return this.overviewContainerElement}getSVGElement(){return this.svgElement}getBackgroundRectElement(){return this.backgroundSVGRectElement}}_r.BACKGROUND_COLOR="#e5ecf0",_r.SVG_HEIGHT=216,_r.SVG_WIDTH=380,_r.SVG_CODE="<svg xmlns='http://www.w3.org/2000/svg' class='bgis-overviewmap-svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 "+_r.SVG_WIDTH+" "+_r.SVG_HEIGHT+"' preserveAspectRatio='xMidYMid meet' height='100%' width='100%' color-interpolation='auto' fill='black' fill-opacity='1'  stroke='black' stroke-dasharray='none' stroke-dashoffset='0' stroke-linecap='square' stroke-linejoin='miter' stroke-miterlimit='10' stroke-opacity='1' stroke-width='1' xmlns:v='https://vecta.io/nano'><style><![CDATA[.B{clip-path:url(#A)}.C{fill-rule:evenodd}.D{stroke:none}.E{fill:#999}.F{fill:none}.G{stroke-miterlimit:1}.H{stroke-width:2.5}]]></style><defs><clipPath id='A'><path d='M0 0h380v216H0V0z'/></clipPath><path id='B' d='M356 82l-.4 5.2 4.4 1.6-3.2 2.4v6.4l-3.6.8 2.8 3.6.8 6.8-9.6 1.2-.4-2-1.6 2.4h-3.6l-1.6-3.6-4.8-1.6-8 6.4 6.4 3.2 3.2-.8 1.2 4.8 2 .8-2.8 2.8.4 3.2-3.6 3.2-2.8-.4-.8 1.6-2.4-1.6-.4 4 2.4 4.8-2.4 1.6-.8 4 2 .8-.4 2.4 2.8-.4.8 1.6-3.2 1.6 2.8 2.8-4 2 3.6 1.6-10-.8-.4 3.2-4 1.6-2.4 4.4-6.4 2.8.8-3.6 6.4-6.8-3.2-5.2 1.6-4.8-4.8-14.8 13.2-6.8v-6l2.8-4-.8-3.6-2.4-1.2-1.2-7.6 3.2.8 2-2.8-2-1.6 2.8-.8 2-4 3.2-.4 2.4 4 5.6-5.6v-2.8l5.6-1.2 2.4-3.2L352 88l1.6-3.6-2-2 2.8 1.6 1.6-2z'/><path id='C' d='M162.4 146.8l.4 2 8.4 1.2 1.6 2.8 4.4 1.6 8-2 .4-2.8 4.8-.8 2 2 10.8.8 8.4 9.6 5.6-2 2.4-4 8.4-4.8 1.6 3.2h6l.8 3.2 4.8-3.2 5.6 2 10-3.6 8 8.8-2 8.8 2.4.8-.4 6.4 2 1.2-3.6 3.2-1.2-2-1.6 2-2.4-.4-2.4 6.4-4.8.8-.4 2.4-4.8 1.6-.8 4-2.4-3.6-2 1.2-2-2.4-12.4.8-1.2-2.8h-5.2l-4-2.8-5.6 1.2-18-4.8-6.8 1.6-6.4-3.2H168l-2.4-2.8-4.8-.4v-3.2h1.6V172l9.2-1.2 1.6-2.4-5.6-4v-3.2l-4.4-3.2-.8-2.4 2-3.2h-2.8l-2.4-3.6 3.2-2z'/><path id='D' d='M264.8 20.8l5.6 1.6.4 4 4.4-.8 1.6-2.8 8.8 3.2.8 2 8 4 6.8-1.6V32l5.2 2 .4 2.4 5.6 3.2 12.8 1.2 3.6-5.6 3.6-.4 2.4 2.4 2.8-.4 1.2 4 10.4 1.6 1.6 10.8-4.8 6-.8 4.8 5.6 7.6.8 6.4 4.4 3.2-1.6 2.8-2.8-1.6 2 2L352 88l-4.4-3.6-2.4 3.2-5.6 1.2v2.8l-5.6 5.6-2.4-4-3.2.4-1.6 3.6-3.2 1.2 2 1.2-2 3.2-3.2-.8 1.2 7.6 2.4 1.2.8 3.6-2.8 4 1.2 4-5.2 5.2h-2.8l-2-6.8-2.4 2.8-1.2-2-4.8-.8-1.2-2.8-2 .4.4-4-5.2-.4-1.2-5.6-1.6 1.2-3.2-3.6-4.4.4v-1.6H284l-4.4-4-2.4.4-.4 2-3.2-.4-.8 3.2-10.4.4-2 2.4-4-2.4-3.2 1.2-2.4-4v-4.4l2.8-1.6-.4-1.6-1.6-2.4-1.6.8-8.4-4.4-2-3.2v-3.6l1.6-.8-.8-6.4 2-2.4 6.8 5.2 7.2-2L258 74h3.2l1.2 2.4.8-8.4h-2l.8-4.8-2 .4 1.6-1.6-4-4.8 2.8-1.6-10.4-5.2 1.6-7.2 3.6-2.8.4-3.6 7.2 1.2V23.2l2-2.4zm62 47.2l-7.2 5.6-2.4-1.6-.8 6 1.6 3.2 9.6.4 2-2.8 4.4 1.6-2-2.4.8-6-2-2-1.6 1.2-2.4-3.2z'/><path id='E' d='M212.4 38l9.6 6.4-2.4 2 2.4 3.2h6l6.4 2.8 2-2.8h2.4L240 46l4 3.2 2.4-2 5.6 5.2 7.2 2 1.2 1.2-2.8 1.6.4 2 3.6 2.8-1.6 1.6 2-.4-.8 4.8h2v4.4l-.8 4-1.2-2.4H258l-1.6 2.8-6 2-6.8-5.2-3.2 2.4.8 6.4-1.6.8v3.6l6.4 6 5.6.8 2 3.2-2.8 2.4 1.6 6.8-2.4-.8-2 2.4-5.2.8-.8 2.4-8.4 4.8-3.2-.4-2-2.8-6.8 2.4v-3.6l-2-2-10.4-1.2-3.6 5.6 2.8 8.4-1.6 3.2h-2.4l-8.4-4 2-6.4-1.6-2 2.8-4.4-5.2-2 1.2-2.8 3.2.8v-1.6l-6.4.4-4.4-2-.4-8.8 3.6 1.2.4-2.8-4-2-6 2.8v-2l-3.2-.4-1.2-2.4h-4.4l-3.2 3.2-5.2-5.2-.4-3.2 12-9.6 14-4 4.8-7.2-.4-8.8 2 .4 1.2-2.4 10 5.2 4.4-7.2.4-5.6-2-.8 2.4-3.6z'/><path id='F' d='M176.4 86.8l1.6 2.4 3.2.4v2l6-2.8 4 2-.4 2.8-3.6-1.2.4 8.8 11.2 2.4h-3.6l-1.2 3.2 5.2 1.6-2.8 4.4 1.6 2-2 6.4 5.2 3.2-1.6 3.2 1.6 8.8 5.2 2 5.2-2.4.8 4.4 6.8 6.4-5.2 1.2 1.2 2.8-4.4 8-5.2-3.6v-2.4l-10.4-2.8-2.8.8-1.6-2-5.2.8-.4 2.8-7.2 2-5.2-1.6-1.6-2.8-8.4-1.2v-2l-4 2-6-3.6H148l-6.4 5.6-6-1.2-2-12.8 1.6-1.6 6.8.4 1.2-2 8.4.4v-3.6l4.4-.8 2.4-4.8 2.8-.8-3.2-4.8 2-2-4.4-1.6 1.2-4.4h8.4l-1.2 1.6 2.8 2.4-2 2 .8 2 7.6 5.2 3.6-1.2-.4-5.6 2.8-3.6-.8-4-2.4-2h-5.6l4.4-9.2-6.4-8.4 4-3.6h4z'/><path id='G' d='M279.2 101.2l7.2 3.6v1.6l4.4-.4 3.2 3.6 1.6-1.2 1.2 5.6 5.2.4-.8 3.2 2.4.4 1.2 2.8 4.8.8 1.2 2 1.6-2.8 1.2.8-.4 2.8 2.8 3.2-7.2 3.6 4.8 14.8-1.6 4.8 3.2 4.8-7.6 10.8v6l2.4 5.2-6.8-4h-3.6l-9.6 2-2 1.2v2.8l-3.2 1.2-2.8-3.2-14.8.8-2.4-1.6.4-6.4-2.4-.8 2-8.8-8-8.8-10 3.6-5.6-2-4.8 3.2-.8-3.2h-6l-1.6-3.2-8.4 4.8-2.4 4-4.4 2-3.2-1.6 5.6-8.8-1.2-2.8 5.2-1.2-6.8-6.4-.8-4.4-5.2 2.4-4.8-1.6-2-8.4 1.6-4.4 5.6 1.2 1.6-3.2-2.8-8.4 3.6-5.6 10.4 1.2 2 2v3.6l6.8-2.4 2 2.8 3.2.4 16.4-10.4 3.2 2.4 3.2-1.2 4 2.4 2-2.4 10.4-.4.8-3.2 3.2.4.4-2h2z'/><path id='H' d='M151.6 145.2l6.4 2.4 3.6 4.8h2.8l-2 3.2.8 2.4 4.4 3.2v3.2l5.6 4-1.6 2.4-9.2 1.2-1.6 5.6-5.6.4-8-4-1.2-4-3.2-.4-.4-6.8-2.8.8-3.2-2.8 1.2-1.6-2-4.8 3.6-.8 7.2-7.6 5.2-.8z'/><path id='I' d='M61.2 118.8l5.6 1.6 2-2.4 6.8 3.6 5.2-1.6 1.2 1.6-2.4 2h3.2l2 6h6l4-2.8 2 .4-.8 2.4 2.4-.4 2-3.2 4 .4-1.6-2.4 2.4-2.8 6 .4 2.4-5.2 9.6.8 6.8-2.8 9.2 1.2-2-6.4 4.4-2.8v4.4l8-1.2 2.8 4.8 3.2-.8v2l4 1.2-1.6 2.4 3.2 4.8-2.8.8-2.4 4.8-4.4.8v3.6l-8.4-.4-1.2 2-6.8-.4-1.6 1.6 2.4 13.6-8 2-9.2 5.2-5.2-3.2-3.6 2-3.2-1.6-2.4 2.8-2.4-1.6-9.2 1.6.4 1.6-3.2 1.6-3.2 10h-7.2l-6-1.6 1.6-2.4-4-3.2L66 166l-4-1.2.8-5.6-2.8-.8-1.6-3.2-3.6 3.2.4 2-3.6-.4v4l-4 1.2-1.6-2.8-.4-2.4 2.8-3.6-2-2.4 1.6-1.2-1.2-2.8 4-4 .4-7.2-2.4-1.2 6.8-2 4.8-5.2 2-3.2-2-4 .8-4.4z'/><path id='J' d='M31.2 116.4l2 .4-.4 2.8h6.8l1.2 4 4.4 1.6.4 2.4-1.6.8 1.6 3.6 6-2-.8 5.2-2 1.2 2.4 2.4-.4 7.2-4 4 1.2 2.8-1.6 1.2 2 2.4-2.8 3.6 2 3.6-1.2 2-3.2-1.2-1.2-2.8-6.4-2V154l-12-2.4 1.2-4.8-3.2-2.4.4-4.8-2-2 6.4-8-.4-4-2.8-.4-1.6-2.8 7.6-2 2-4z'/><path id='K' d='M327.6 68.4l.4 2 2.8-.4 2 2-.8 6 2 2.4-4.4-1.6-2 2.8-9.6-.4-1.6-3.2.8-6 2.4 1.6 1.6-2.4 3.6-.4.4-2.8 2.4.4z'/></defs><g text-rendering='optimizeLegibility'><use xlink:href='#B' class='B C D E'/><g stroke='silver'><use xlink:href='#B' class='B F G H'/><use xlink:href='#C' class='B C D E'/><use xlink:href='#C' class='B F G H'/><use xlink:href='#D' class='B C D E'/><use xlink:href='#D' class='B F G H'/><use xlink:href='#E' class='B C D E'/><use xlink:href='#E' class='B F G H'/><use xlink:href='#F' class='B C D E'/><use xlink:href='#F' class='B F G H'/><use xlink:href='#G' class='B C D E'/><use xlink:href='#G' class='B F G H'/><use xlink:href='#H' class='B C D E'/><use xlink:href='#H' class='B F G H'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B C D E'/><path d='M61.2 118.8l-1.2-1.2 2.4-.8-1.2 2z' class='B F G H'/><use xlink:href='#I' class='B C D E'/><use xlink:href='#I' class='B F G H'/><use xlink:href='#J' class='B C D E'/><use xlink:href='#J' class='B F G H'/><use xlink:href='#K' class='B C D E'/><use xlink:href='#K' class='B F G H'/></g></g></svg>";class vr extends ar{constructor(t){const e=t||{};super(Object.assign({unicode:vr.DEFAULT_UNICODE,tooltip:vr.DEFAULT_TOOLTIP_TEXT,tooltipAsTextElement:!0},e))}}vr.DEFAULT_TOOLTIP_TEXT="Ansicht teilen",vr.DEFAULT_UNICODE=59692;var yr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mr=function(t){function e(e,n,o){var i=t.call(this)||this,r=o||{};return i.tileCoord=e,i.state=n,i.interimTile=null,i.key="",i.transition_=void 0===r.transition?250:r.transition,i.transitionStarts_={},i}return yr(e,t),e.prototype.changed=function(){this.dispatchEvent(v)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){A()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var o=e-n+1e3/60;return o>=this.transition_?1:wn(o/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(_);var wr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Cr=function(t){function e(e,n,o,i){var r=t.call(this)||this;return r.extent=e,r.pixelRatio_=o,r.resolution=n,r.state=i,r}return wr(e,t),e.prototype.changed=function(){this.dispatchEvent(v)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return A()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){A()},e}(_);var xr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Er(t,e,n){var o=t;if(o.src&&St){var i=o.decode(),r=!0;return i.then((function(){r&&e()})).catch((function(t){r&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():n())})),function(){r=!1}}var s=[O(o,"load",e),O(o,y,n)];return function(){s.forEach(R)}}!function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,o,0)||this;return a.src_=i,a.image_=new Image,null!==r&&(a.image_.crossOrigin=r),a.unlisten_=null,a.state=0,a.imageLoadFunction_=s,a}xr(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=$t(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Er(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t,this.resolution=$t(this.extent)/this.image_.height},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(Cr);var br=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Tr=function(t){function e(e,n,o,i,r,s){var a=t.call(this,e,n,s)||this;return a.crossOrigin_=i,a.src_=o,a.key=o,a.image_=new Image,null!==i&&(a.image_.crossOrigin=i),a.unlisten_=null,a.tileLoadFunction_=r,a}return br(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=2,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=se(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Er(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(mr),Pr=function(){function t(t,e,n,o,i,r){this.sourceProj_=t,this.targetProj_=e;var s={},a=Ue(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=a(t)),s[e]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&oe(o)==oe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?oe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?oe(this.targetProj_.getExtent()):null;var l=ee(n),u=ne(n),c=Yt(n),h=Bt(n),p=this.transformInv_(l),d=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),_=10+(r?Math.max(0,Math.ceil(J(Wt(n)/(r*r*256*256)))):0);if(this.addQuad_(l,u,c,h,p,d,f,g,_),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach((function(t,e,n){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}}return t.prototype.addTriangle_=function(t,e,n,o,i,r){this.triangles_.push({source:[o,i,r],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,o,i,r,s,a,l){var u=Ft([i,r,s,a]),c=this.sourceWorldWidth_?oe(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&c>.5&&c<1,d=!1;if(l>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(d=oe(Ft([t,e,n,o]))/this.targetWorldWidth_>.25||d),!p&&this.sourceProj_.isGlobal()&&c&&(d=c>.25||d)),!(!d&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3]))||ie(u,this.maxSourceExtent_)){var f=0;if(!(d||isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])))if(l>0)d=!0;else if(1!=(f=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(r[0])&&isFinite(r[1])?0:4)+(isFinite(s[0])&&isFinite(s[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1))&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!d){var g=[(t[0]+n[0])/2,(t[1]+n[1])/2],_=this.transformInv_(g),v=void 0;v=p?(ot(i[0],h)+ot(s[0],h))/2-ot(_[0],h):(i[0]+s[0])/2-_[0];var y=(i[1]+s[1])/2-_[1];d=v*v+y*y>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var m=[(e[0]+n[0])/2,(e[1]+n[1])/2],w=this.transformInv_(m),C=[(o[0]+t[0])/2,(o[1]+t[1])/2],x=this.transformInv_(C);this.addQuad_(t,e,m,C,i,r,w,x,l-1),this.addQuad_(C,m,n,o,x,w,s,a,l-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],b=this.transformInv_(E),T=[(n[0]+o[0])/2,(n[1]+o[1])/2],P=this.transformInv_(T);this.addQuad_(t,E,T,o,i,b,P,a,l-1),this.addQuad_(E,e,n,T,b,r,s,P,l-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&f)&&this.addTriangle_(t,n,o,i,s,a),0==(14&f)&&this.addTriangle_(t,n,e,i,s,r),f&&(0==(13&f)&&this.addTriangle_(e,o,t,r,a,i),0==(7&f)&&this.addTriangle_(e,o,n,r,a,s))}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,o){var i=e.source;Vt(t,i[0]),Vt(t,i[1]),Vt(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var Or,Rr={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};function Sr(t,e,n,o,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(o,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,o)+1,Math.max(n,i)),t.restore()}function Mr(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function jr(t,e,n,o){var i=We(n,e,t),r=Ke(e,o,n),s=e.getMetersPerUnit();void 0!==s&&(r*=s);var a=t.getMetersPerUnit();void 0!==a&&(r/=a);var l=t.getExtent();if(!l||Dt(l,i)){var u=Ke(t,r,i)/r;isFinite(u)&&u>0&&(r/=u)}return r}var Ar=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Ir=function(t){function e(e,n,o,i,r,s,a,l,u,c,h,p){var d=t.call(this,r,0)||this;d.renderEdges_=void 0!==h&&h,d.contextOptions_=p,d.pixelRatio_=a,d.gutter_=l,d.canvas_=null,d.sourceTileGrid_=n,d.targetTileGrid_=i,d.wrappedTileCoord_=s||r,d.sourceTiles_=[],d.sourcesListenerKeys_=null,d.sourceZ_=0;var f=i.getTileCoordExtent(d.wrappedTileCoord_),g=d.targetTileGrid_.getExtent(),_=d.sourceTileGrid_.getExtent(),v=g?te(f,g):f;if(0===Wt(v))return d.state=4,d;var y=e.getExtent();y&&(_=_?te(_,y):y);var m=i.getResolution(d.wrappedTileCoord_[0]),w=function(t,e,n,o){var i=qt(n),r=jr(t,e,i,o);return(!isFinite(r)||r<=0)&&Ut(n,(function(n){return r=jr(t,e,n,o),isFinite(r)&&r>0})),r}(e,o,v,m);if(!isFinite(w)||w<=0)return d.state=4,d;var C=void 0!==c?c:.5;if(d.triangulation_=new Pr(e,o,v,_,w*C,m),0===d.triangulation_.getTriangles().length)return d.state=4,d;d.sourceZ_=n.getZForResolution(w);var x=d.triangulation_.calculateSourceExtent();if(_&&(e.canWrapX()?(x[1]=q(x[1],_[1],_[3]),x[3]=q(x[3],_[1],_[3])):x=te(x,_)),Wt(x)){for(var E=n.getTileRangeForExtentAndZ(x,d.sourceZ_),b=E.minX;b<=E.maxX;b++)for(var T=E.minY;T<=E.maxY;T++){var P=u(d.sourceZ_,b,T,a);P&&d.sourceTiles_.push(P)}0===d.sourceTiles_.length&&(d.state=4)}else d.state=4;return d}return Ar(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,o){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),o="number"==typeof n?n:n[0],i="number"==typeof n?n:n[1],r=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=function(t,e,n,o,i,r,s,a,l,u,c,p){var d=se(Math.round(n*t),Math.round(n*e));if(h(d,p),0===l.length)return d.canvas;function f(t){return Math.round(t*n)/n}d.scale(n,n),d.globalCompositeOperation="lighter";var g=[1/0,1/0,-1/0,-1/0];l.forEach((function(t,e,n){var o,i;o=g,(i=t.extent)[0]<o[0]&&(o[0]=i[0]),i[2]>o[2]&&(o[2]=i[2]),i[1]<o[1]&&(o[1]=i[1]),i[3]>o[3]&&(o[3]=i[3])}));var _=oe(g),v=$t(g),y=se(Math.round(n*_/o),Math.round(n*v/o));h(y,p);var m=n/o;l.forEach((function(t,e,n){var o=t.extent[0]-g[0],i=-(t.extent[3]-g[3]),r=oe(t.extent),s=$t(t.extent);t.image.width>0&&t.image.height>0&&y.drawImage(t.image,u,u,t.image.width-2*u,t.image.height-2*u,o*m,i*m,r*m,s*m)}));var w=ee(s);return a.getTriangles().forEach((function(t,e,i){var s=t.source,a=t.target,l=s[0][0],u=s[0][1],c=s[1][0],h=s[1][1],_=s[2][0],v=s[2][1],m=f((a[0][0]-w[0])/r),C=f(-(a[0][1]-w[1])/r),x=f((a[1][0]-w[0])/r),E=f(-(a[1][1]-w[1])/r),b=f((a[2][0]-w[0])/r),T=f(-(a[2][1]-w[1])/r),P=l,O=u;l=0,u=0;var R=function(t){for(var e=t.length,n=0;n<e;n++){for(var o=n,i=Math.abs(t[n][n]),r=n+1;r<e;r++){var s=Math.abs(t[r][n]);s>i&&(i=s,o=r)}if(0===i)return null;var a=t[o];t[o]=t[n],t[n]=a;for(var l=n+1;l<e;l++)for(var u=-t[l][n]/t[n][n],c=n;c<e+1;c++)n==c?t[l][c]=0:t[l][c]+=u*t[n][c]}for(var h=new Array(e),p=e-1;p>=0;p--){h[p]=t[p][e]/t[p][p];for(var d=p-1;d>=0;d--)t[d][e]-=t[d][p]*h[p]}return h}([[c-=P,h-=O,0,0,x-m],[_-=P,v-=O,0,0,b-m],[0,0,c,h,E-C],[0,0,_,v,T-C]]);if(R){if(d.save(),d.beginPath(),function(){if(void 0===Or){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",Sr(t,4,5,4,0),Sr(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;Or=Mr(e,0)||Mr(e,4)||Mr(e,8)}return Or}()||p===Rr){d.moveTo(x,E);for(var S=m-x,M=C-E,j=0;j<4;j++)d.lineTo(x+f((j+1)*S/4),E+f(j*M/3)),3!=j&&d.lineTo(x+f((j+1)*S/4),E+f((j+1)*M/3));d.lineTo(b,T)}else d.moveTo(x,E),d.lineTo(m,C),d.lineTo(b,T);d.clip(),d.transform(R[0],R[2],R[1],R[3],m,C),d.translate(g[0]-P,g[3]-O),d.scale(o/n,-o/n),d.drawImage(y.canvas,0,0),d.restore()}})),c&&(d.save(),d.globalCompositeOperation="source-over",d.strokeStyle="black",d.lineWidth=1,a.getTriangles().forEach((function(t,e,n){var o=t.target,i=(o[0][0]-w[0])/r,s=-(o[0][1]-w[1])/r,a=(o[1][0]-w[0])/r,l=-(o[1][1]-w[1])/r,u=(o[2][0]-w[0])/r,c=-(o[2][1]-w[1])/r;d.beginPath(),d.moveTo(a,l),d.lineTo(i,s),d.lineTo(u,c),d.closePath(),d.stroke()})),d.restore()),d.canvas}(o,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),r,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.contextOptions_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,o){var i=e.getState();if(0==i||1==i){t++;var r=P(e,v,(function(n){var o=e.getState();2!=o&&3!=o&&4!=o||(R(r),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(r)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){0==t.getState()&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(R),this.sourcesListenerKeys_=null},e}(mr),Lr=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return Y(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return Y(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){Y(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function Fr(t,e,n,o){return void 0!==o?(o[0]=t,o[1]=e,o[2]=n,o):[t,e,n]}function kr(t,e,n){return t+"/"+e+"/"+n}function Dr(t){return kr(t[0],t[1],t[2])}var zr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zr(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=(e=this.peekFirstKey(),e.split("/").map(Number))[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Dr(e.tileCoord)),e.release())}.bind(this))}var e},e}(Lr);var Nr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function Kr(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const Zr=function(t){function e(e){var n=t.call(this)||this;return n.projection=Ne(e.projection),n.attributions_=Kr(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:ct,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n}return Nr(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection},e.prototype.getResolutions=function(){return A()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.getContextOptions=function(){},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Kr(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(D);var Vr=[0,0,0];const Xr=function(){function t(t){var e,n,o;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Y((e=this.resolutions_,!0,n=function(t,e){return e-t}||i,e.every((function(t,o){if(0===o)return!0;var i=n(e[o-1],t);return!(i>0||0===i)}))),17),!t.origins)for(var r=0,s=this.resolutions_.length-1;r<s;++r)if(o){if(this.resolutions_[r]/this.resolutions_[r+1]!==o){o=void 0;break}}else o=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=o,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Y(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=ee(a)),Y(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Y(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,Y(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){var n=new de(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(a){var o=this.getTileRangeForExtentAndZ(a,e);n.minX=Math.max(o.minX,n.minX),n.maxX=Math.min(o.maxX,n.maxX),n.minY=Math.max(o.minY,n.minY),n.maxY=Math.min(o.maxY,n.maxY)}return n}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,n){for(var o=this.getTileRangeForExtentAndZ(t,e),i=o.minX,r=o.maxX;i<=r;++i)for(var s=o.minY,a=o.maxY;s<=a;++s)n([e,i,s])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,o){var i,r,s=null,a=t[0]-1;for(2===this.zoomFactor_?(i=t[1],r=t[2]):s=this.getTileCoordExtent(t,o);a>=this.minZoom;){if(e(a,2===this.zoomFactor_?pe(i=Math.floor(i/2),i,r=Math.floor(r/2),r,n):this.getTileRangeForExtentAndZ(s,a,n)))return!0;--a}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var o=2*t[1],i=2*t[2];return pe(o,o+1,i,i+1,e)}var r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null},t.prototype.getTileRangeForTileCoordAndZ=function(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;var o=t[0],i=t[1],r=t[2];if(e===o)return pe(i,r,i,r,n);if(this.zoomFactor_){var s=Math.pow(this.zoomFactor_,e-o),a=Math.floor(i*s),l=Math.floor(r*s);return e<o?pe(a,a,l,l,n):pe(a,Math.floor(s*(i+1))-1,l,Math.floor(s*(r+1))-1,n)}var u=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(u,e,n)},t.prototype.getTileRangeExtent=function(t,e,n){var o=this.getOrigin(t),i=this.getResolution(t),r=Ho(this.getTileSize(t),this.tmpSize_),s=o[0]+e.minX*r[0]*i,a=o[0]+(e.maxX+1)*r[0]*i;return Nt(s,o[1]+e.minY*r[1]*i,a,o[1]+(e.maxY+1)*r[1]*i,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var o=Vr;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,o);var i=o[1],r=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,o),pe(i,o[1],r,o[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=Ho(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*o[0]*n,e[1]-(t[2]+.5)*o[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=Ho(this.getTileSize(t[0]),this.tmpSize_),r=n[0]+t[1]*i[0]*o,s=n[1]-(t[2]+1)*i[1]*o;return Nt(r,s,r+i[0]*o,s+i[1]*o,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,o,i){var r=this.getZForResolution(n),s=n/this.getResolution(r),a=this.getOrigin(r),l=Ho(this.getTileSize(r),this.tmpSize_),u=o?.5:0,c=o?.5:0,h=Math.floor((t-a[0])/n+u),p=Math.floor((a[1]-e)/n+c),d=s*h/l[0],f=s*p/l[1];return o?(d=Math.ceil(d)-1,f=Math.ceil(f)-1):(d=Math.floor(d),f=Math.floor(f)),Fr(r,d,f,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,o,i){var r=this.getOrigin(n),s=this.getResolution(n),a=Ho(this.getTileSize(n),this.tmpSize_),l=o?.5:0,u=o?.5:0,c=Math.floor((t-r[0])/s+l),h=Math.floor((r[1]-e)/s+u),p=c/a[0],d=h/a[1];return o?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),Fr(n,p,d,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},t.prototype.getZForResolution=function(t,e){return q(r(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),o=this.minZoom;o<e;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},t}();function Hr(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,o){return function(t,e,n,o){var i=Ur(t,undefined,n);return new Xr({extent:t,origin:Qt(t,"top-left"),resolutions:i,tileSize:n})}(Wr(t),0,void 0)}(t),t.setDefaultTileGrid(e)),e}function Ur(t,e,n,o){for(var i=void 0!==e?e:42,r=$t(t),s=oe(t),a=Ho(void 0!==n?n:256),l=o>0?o:Math.max(s/a[0],r/a[1]),u=i+1,c=new Array(u),h=0;h<u;++h)c[h]=l/Math.pow(2,h);return c}function Wr(t){var e=(t=Ne(t)).getExtent();if(!e){var n=180*ge[_e.DEGREES]/t.getMetersPerUnit();e=Nt(-n,-n,n,n)}return e}var Br=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Yr=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.on,n.once,n.un,n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var o=e.tileGrid;return o&&Ho(o.getTileSize(o.getMinZoom()),[256,256]),n.tileCache=new Gr(e.cacheSize||0),n.tmpSize=[0,0],n.key_=e.key||"",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return Br(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,o){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var r,s,a,l=!0,u=n.minX;u<=n.maxX;++u)for(var c=n.minY;c<=n.maxY;++c)s=kr(e,u,c),a=!1,i.containsKey(s)&&(a=2===(r=i.get(s)).getState())&&(a=!1!==o(r)),a||(l=!1);return l},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,o,i){return A()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Hr(t)},e.prototype.getTileCacheForProjection=function(t){return Y(Xe(this.getProjection(),t),68),this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var o,i,r,s=this.getTileGridForProjection(n),a=this.getTilePixelRatio(e),l=Ho(s.getTileSize(t),this.tmpSize);return 1==a?l:(o=l,i=a,void 0===(r=this.tmpSize)&&(r=[0,0]),r[0]=o[0]*i+.5|0,r[1]=o[1]*i+.5|0,r)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),o=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var o=e[0],i=t.getTileCoordCenter(e),r=Wr(n);if(Dt(r,i))return e;var s=oe(r),a=Math.ceil((r[0]-i[0])/s);return i[0]+=s*a,t.getTileCoordForCoordAndZ(i,o)}(o,t,n)),function(t,e){var n=t[0],o=t[1],i=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var r=e.getFullTileRange(n);return!r||r.containsXY(o,i)}(t,o)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.updateCacheSize=function(t,e){var n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)},e.prototype.useTile=function(t,e,n,o){},e}(Zr),qr=function(t){function e(e,n){var o=t.call(this,e)||this;return o.tile=n,o}return Br(e,t),e}(e);const Qr=Yr;function Jr(t,e){var n=/\{z\}/g,o=/\{x\}/g,i=/\{y\}/g,r=/\{-y\}/g;return function(s,a,l){return s?t.replace(n,s[0].toString()).replace(o,s[1].toString()).replace(i,s[2].toString()).replace(r,(function(){var t=s[0],n=e.getFullTileRange(t);return Y(n,55),(n.getHeight()-s[2]-1).toString()})):void 0}}var $r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ts=function(t){function e(n){var o=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tilePixelRatio:n.tilePixelRatio,wrapX:n.wrapX,transition:n.transition,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this;return o.generateTileUrlFunction_=o.tileUrlFunction===e.prototype.tileUrlFunction,o.tileLoadFunction=n.tileLoadFunction,n.tileUrlFunction&&(o.tileUrlFunction=n.tileUrlFunction),o.urls=null,n.urls?o.setUrls(n.urls):n.url&&o.setUrl(n.url),o.tileLoadingKeys_={},o}return $r(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,o=L(n),i=n.getState();1==i?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=3==i?"tileloaderror":2==i?"tileloadend":void 0),null!=e&&this.dispatchEvent(new qr(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){var o=n[1].charCodeAt(0),i=n[2].charCodeAt(0),r=void 0;for(r=o;r<=i;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t)){for(var s=parseInt(n[2],10),a=parseInt(n[1],10);a<=s;a++)e.push(t.replace(n[0],a.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(function(t,e){for(var n=t.length,o=new Array(n),i=0;i<n;++i)o[i]=Jr(t[i],e);return function(t){return 1===t.length?t[0]:function(e,n,o){if(e){var i=ot(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[i](e,n,o)}}}(o)}(t,this.tileGrid),e):this.setKey(e)},e.prototype.tileUrlFunction=function(t,e,n){},e.prototype.useTile=function(t,e,n){var o=kr(t,e,n);this.tileCache.containsKey(o)&&this.tileCache.get(o)},e}(Qr);var es=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function ns(t,e){t.getImage().src=e}const os=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ns,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:Tr,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.contextOptions_=!1===e.imageSmoothing?Rr:void 0,n.renderReprojectionEdges_=!1,n}return es(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[o];i.expireCache(i==n?e:{})}},e.prototype.getContextOptions=function(){return this.contextOptions_},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Xe(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){return t.prototype.getKey.call(this)+(this.contextOptions_?"\n"+JSON.stringify(this.contextOptions_):"")},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Xe(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Xe(e,t)){var n=L(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=Hr(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Xe(e,t))return this.tileCache;var n=L(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Gr(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,o,i,r){var s=[t,e,n],a=this.getTileCoordForTileUrlFunction(s,i),l=a?this.tileUrlFunction(a,o,i):void 0,u=new this.tileClass(s,void 0!==l?0:4,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=r,u.addEventListener(v,this.handleTileChange.bind(this)),u},e.prototype.getTile=function(t,e,n,o,i){var r=this.getProjection();if(r&&i&&!Xe(r,i)){var s=this.getTileCacheForProjection(i),a=[t,e,n],l=void 0,u=Dr(a);s.containsKey(u)&&(l=s.get(u));var c=this.getKey();if(l&&l.key==c)return l;var h=this.getTileGridForProjection(r),p=this.getTileGridForProjection(i),d=this.getTileCoordForTileUrlFunction(a,i),f=new Ir(r,h,i,p,a,d,this.getTilePixelRatio(o),this.getGutter(),function(t,e,n,o){return this.getTileInternal(t,e,n,o,r)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.contextOptions_);return f.key=c,l?(f.interimTile=l,f.refreshInterimChain(),s.replace(u,f)):s.set(u,f),f}return this.getTileInternal(t,e,n,o,r||i)},e.prototype.getTileInternal=function(t,e,n,o,i){var r=null,s=kr(t,e,n),a=this.getKey();if(this.tileCache.containsKey(s)){if((r=this.tileCache.get(s)).key!=a){var l=r;r=this.createTile_(t,e,n,o,i,a),0==l.getState()?r.interimTile=l.interimTile:r.interimTile=l,r.refreshInterimChain(),this.tileCache.replace(s,r)}}else r=this.createTile_(t,e,n,o,i,a),this.tileCache.set(s,r);return r},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Ne(t);if(n){var o=L(n);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}},e}(ts);var is=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const rs=function(t){function e(e){var n=e||{},o=void 0!==n.projection?n.projection:"EPSG:3857",i=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Ne("EPSG:3857").getExtent(),o={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Ur(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Xr(o)}({extent:Wr(o),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,imageSmoothing:n.imageSmoothing,opaque:n.opaque,projection:o,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return is(e,t),e}(os),ss={geolandbasemap:"https://maps{1-4}.wien.gv.at/basemap/geolandbasemap/normal/google3857/{z}/{y}/{x}.png",bmapgrau:"https://maps{1-4}.wien.gv.at/basemap/bmapgrau/normal/google3857/{z}/{y}/{x}.png",bmaporthofoto30cm:"https://maps{1-4}.wien.gv.at/basemap/bmaporthofoto30cm/normal/google3857/{z}/{y}/{x}.jpeg",bmapgelaende:"https://maps{1-4}.wien.gv.at/basemap/bmapgelaende/grau/google3857/{z}/{y}/{x}.jpeg",bmapoberflaeche:"https://maps{1-4}.wien.gv.at/basemap/bmapoberflaeche/grau/google3857/{z}/{y}/{x}.jpeg",bmapoverlay:"https://maps{1-4}.wien.gv.at/basemap/bmapoverlay/normal/google3857/{z}/{y}/{x}.png"},as=document.getElementById("textarea-output"),ls=new class extends ar{constructor(t){const e=t||{};super(Object.assign({unicode:59702,containerClassName:"ol-control bgis-control ol-geolocate",tooltip:"Standort zentrieren"},e));const n=t||{};this._geoLocation=new sr(n)}handleEvent(t){var e,n;return t.type===w&&this.geoLocation&&(null===(n=null===(e=this.getMap())||void 0===e?void 0:e.getView())||void 0===n?void 0:n.getProjection())&&(this.geoLocation.once("change",(()=>{var t;this.geoLocation.setTracking(!1),this.getMap().getView().animate({center:(t=this.geoLocation.getPosition(),We(t,"EPSG:4326","EPSG:3857")),duration:300}),this.geoLocation.getPosition()&&this.dispatchEvent(new lr("location_retrieved",this.geoLocation.getPosition()))})),this.geoLocation.setTracking(!0)),!0}get geoLocation(){return this._geoLocation}};return ls.on("click",(()=>{as.value="geolocate button clicked\n"+as.value})),ls.on("location_retrieved",(t=>{as.value="position retrieved: "+t.position+"\n"+as.value})),new Hi({target:"bgis-map",layers:[new an({source:new class extends rs{constructor(t){const e=(null==t?void 0:t.variant)||"geolandbasemap";super({url:ss[e],attributions:'Grundkarte: <a href="https://basemap.at/">basemap.at</a>',crossOrigin:"Anonymous"})}}})],controls:[new class extends Wi{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-footer",childControls:t}))}}([new class extends Yo{constructor(t){const e=t||{},n=e.className?e.className:"bgis-scaleline";super({element:document.createElement("div"),target:e.target}),this.viewState=null,this._minWidth=void 0!==e.minWidth?e.minWidth:64,this.renderedVisible=!1,this.renderedWidth=void 0,this.renderedSVG=void 0,this.dpi=e.dpi||void 0,this.element.className=n}render(t){const e=t.frameState;this.viewState=e?e.viewState:null,this.updateElement()}updateElement(){const t=this.viewState;if(!t)return void(this.renderedVisible&&(this.element.style.display="none",this.renderedVisible=!1));const e=t.center,n=t.projection,o=_e.METERS;let i=Ke(n,t.resolution,e,o);const r=this._minWidth*(this.dpi||dr)/dr,s=r*i;let a="";s<.001?(a="m",i*=1e6):s<1?(a="mm",i*=1e3):s<1e3?a="m":(a="km",i/=1e3);let l,u,c,h=3*Math.floor(Math.log(r*i)/Math.log(10));for(;;){c=Math.floor(h/3);const t=Math.pow(10,c);if(l=fr[(h%3+3)%3]*t,u=Math.round(l/i),isNaN(u))return this.element.style.display="none",void(this.renderedVisible=!1);if(u>=r)break;++h}let p=null;l&&c>=0&&(p=this.getGeneratedSVG(l.toFixed(c<0?-c:0)+" "+a,u)),p&&this.renderedSVG!=p&&(this.element.innerHTML="",this.element.appendChild(p),this.renderedSVG=p),this.renderedWidth!=u&&(this.element.style.width=u+"px",p&&p.setAttribute("width",String(u)),this.renderedWidth=u),this.renderedVisible||(this.element.style.display="",this.renderedVisible=!0)}getGeneratedSVG(t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id","bgis-scaleline-svg"),n.setAttribute("viewBox","0 0 "+e+" 18"),n.setAttribute("width",String(e)),n.setAttribute("height","100%");const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("id","bgis-scaleline-svg-background"),o.setAttribute("x",String(0)),o.setAttribute("y",String(0)),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("fill","#e5ecf0"),o.setAttribute("fill-opacity",".5"),o.setAttribute("stroke","black"),o.setAttribute("stroke-width","1"),o.setAttribute("stroke-dasharray","0 "+e+" "+(e+36)),n.appendChild(o);const i=document.createElementNS("http://www.w3.org/2000/svg","text");return i.textContent=t,i.setAttribute("x",String(e/2)),i.setAttribute("y",String(12)),i.setAttribute("text-anchor","middle"),i.setAttribute("font-size","1em"),i.setAttribute("style",'font-size: 0.75rem; font-family: "Source Sans Pro", sans-serif'),i.setAttribute("font-family",'"Source Sans Pro", sans-serif'),i.setAttribute("fill","black"),n.appendChild(i),n}setMinWidth(t){this._minWidth=t}getMinWidth(){return this._minWidth}},new class extends pr{constructor(t){const e=t||{};e.projection=e.projection?e.projection:"EPSG:4326",e.coordinateFormat=e.coordinateFormat?e.coordinateFormat:t=>t?function(t,e,n){return t?e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n)):""}(t,"{x}N/{y}E",4):"",e.undefinedHTML=e.undefinedHTML?e.undefinedHTML:"&nbsp;-&nbsp;N/&nbsp;-&nbsp;E",e.className=e.className?e.className:"ol-control ol-mouse-position bgis-mouseposition",super(e)}},new class extends Qo{constructor(t){super(t||{collapsed:!1}),this.element.className+=" bgis-copyright"}}]),new class extends Wi{constructor(t,e){const n=e||{};super(Object.assign(Object.assign({},n),{styleClass:"bgis-top-right",childControls:t}))}}([ls,new class extends ei{constructor(t){const e=t||{};super(Object.assign(Object.assign({},e),{zoomInLabel:String.fromCodePoint(59700),zoomOutLabel:String.fromCodePoint(59701)})),this.element.className="ol-control bgis-control zoom-container"}}])],view:new ro({center:qt([106e4,5838030,1913530,6281290]),constrainOnlyCenter:!0,constrainResolution:!1,extent:[106e4,5838030,1913530,6281290],maxZoom:15,minZoom:6,zoom:7})}),t})()}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iZ2lzLWNvcmUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2JnaXMtY29yZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3RFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0Rpc3Bvc2FibGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2FycmF5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9mdW5jdGlvbnMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL29iai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL1RhcmdldC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC91dGlsLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9PYmplY3QuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2xheWVyL1Byb3BlcnR5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Bc3NlcnRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvYXNzZXJ0cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbWF0aC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvQmFzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL0V2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1N0YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9MYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvbGF5ZXIvVGlsZVByb3BlcnR5LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9CYXNlVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlU3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9FdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaGFzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC9Db3JuZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXh0ZW50L1JlbGF0aW9uc2hpcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZG9tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9jYW52YXMvTGF5ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVSYW5nZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Vbml0cy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai9Qcm9qZWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2czODU3LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL2Vwc2c0MzI2LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3Byb2plY3Rpb25zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9wcm9qL3RyYW5zZm9ybXMuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NwaGVyZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcHJvai5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvY2FudmFzL1RpbGVMYXllci5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVN0YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3UHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Nvb3JkaW5hdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NlbnRlcmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3Jlc29sdXRpb25jb25zdHJhaW50LmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yb3RhdGlvbmNvbnN0cmFpbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Vhc2luZy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeUxheW91dC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9HZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3RyYW5zZm9ybS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2Nsb3Nlc3QuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9kZWZsYXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvc2ltcGxpZnkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2dlb20vZmxhdC9pbmZsYXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvYXJlYS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9MaW5lYXJSaW5nLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL0dlb21ldHJ5VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L2NvbnRhaW5zLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJzZWN0c2V4dGVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L3NlZ21lbnRzLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvcmV2ZXJzZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9mbGF0L29yaWVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZ2VvbS9Qb2x5Z29uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9nZW9tL2ZsYXQvaW50ZXJpb3Jwb2ludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVmlldy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvY29tbW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9WaWV3SGludC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc3R5bGUvSWNvbkltYWdlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbG9yLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZW5kZXJlci9NYXAuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2Nzcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcmVuZGVyZXIvQ29tcG9zaXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9Db2xsZWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9sYXllci9Hcm91cC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwRXZlbnQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwQnJvd3NlckV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvcG9pbnRlci9FdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcEV2ZW50VHlwZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvTWFwUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvVGlsZVF1ZXVlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zaXplLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9QbHVnZ2FibGVNYXAuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvQ29udHJvbC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9BdHRyaWJ1dGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC9Sb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2NvbnRyb2wvWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9Eb3VibGVDbGlja1pvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BvaW50ZXIuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2V2ZW50cy9jb25kaXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdQYW4uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlbmRlci9Cb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdCb3guanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0RyYWdab29tLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvZXZlbnRzL0tleUNvZGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvS2luZXRpYy5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9pbnRlcmFjdGlvbi9QaW5jaFpvb20uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL01hcC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvY29udHJvbC5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvaW50ZXJhY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9iYXNlL0NvbXBvc2l0ZUNvbnRyb2wudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvQ29udGFpbmVyLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9HZW9sb2NhdGlvbi5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2Jhc2UvQnV0dG9uLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvR2VvTG9jYXRlLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9jb250cm9sL01vdXNlUG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9TY2FsZUxpbmUudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9PdmVydmlldy50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL1NoYXJlLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZUJhc2UuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL0ltYWdlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9JbWFnZVRpbGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9Ucmlhbmd1bGF0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvY29tbW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ouanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3JlcHJvai9UaWxlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9yZXByb2ovY29tbW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zdHJ1Y3RzL0xSVUNhY2hlLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC90aWxlY29vcmQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL1RpbGVDYWNoZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1NvdXJjZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZWdyaWQvVGlsZUdyaWQuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3RpbGVncmlkLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvdGlsZXVybGZ1bmN0aW9uLmpzIiwid2VicGFjazovL2JnaXMtY29yZS8uL25vZGVfbW9kdWxlcy9vbC9zb3VyY2UvVXJsVGlsZS5qcyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9ub2RlX21vZHVsZXMvb2wvc291cmNlL1RpbGVFdmVudFR5cGUuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9UaWxlSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vbm9kZV9tb2R1bGVzL29sL3NvdXJjZS9YWVouanMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvc291cmNlL0Jhc2VtYXBTb3VyY2UudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc2l0ZS9leGFtcGxlcy9kYXRhL2dlb2xvY2F0ZS50cyIsIndlYnBhY2s6Ly9iZ2lzLWNvcmUvLi9zcmMvYmdpcy9vbC9jb250cm9sL2NvbnRhaW5lci9Gb290ZXIudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9Nb3VzZVBvc2l0aW9uLnRzIiwid2VicGFjazovL2JnaXMtY29yZS8uL3NyYy9iZ2lzL29sL2NvbnRyb2wvQXR0cmlidXRpb24udHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9jb250YWluZXIvVG9wUmlnaHQudHMiLCJ3ZWJwYWNrOi8vYmdpcy1jb3JlLy4vc3JjL2JnaXMvb2wvY29udHJvbC9ab29tLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJCYXNlRXZlbnQiLCJ0eXBlIiwidGhpcyIsInByb3BhZ2F0aW9uU3RvcHBlZCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJ0YXJnZXQiLCJwcm90b3R5cGUiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsIkRpc3Bvc2FibGUiLCJkaXNwb3NlZCIsImRpc3Bvc2UiLCJkaXNwb3NlSW50ZXJuYWwiLCJudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIiwiYSIsImIiLCJsaW5lYXJGaW5kTmVhcmVzdCIsImFyciIsImRpcmVjdGlvbiIsIm4iLCJsZW5ndGgiLCJpIiwiZXh0ZW5kIiwiZGF0YSIsImV4dGVuc2lvbiIsIkFycmF5IiwiaXNBcnJheSIsImVxdWFscyIsImFycjEiLCJhcnIyIiwibGVuMSIsIlRSVUUiLCJWT0lEIiwiYXNzaWduIiwidmFyX3NvdXJjZXMiLCJUeXBlRXJyb3IiLCJvdXRwdXQiLCJpaSIsImFyZ3VtZW50cyIsInNvdXJjZSIsImtleSIsImhhc093blByb3BlcnR5IiwiY2xlYXIiLCJvYmplY3QiLCJwcm9wZXJ0eSIsImV4dGVuZFN0YXRpY3MiLCJnZXRWYWx1ZXMiLCJ2YWx1ZXMiLCJwdXNoIiwiX19leHRlbmRzIiwiZCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwicCIsImNhbGwiLCJTdHJpbmciLCJfXyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlIiwiX3N1cGVyIiwiVGFyZ2V0Iiwib3B0X3RhcmdldCIsIl90aGlzIiwiZXZlbnRUYXJnZXRfIiwicGVuZGluZ1JlbW92YWxzXyIsImRpc3BhdGNoaW5nXyIsImxpc3RlbmVyc18iLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJsaXN0ZW5lcnNGb3JUeXBlIiwiaW5kZXhPZiIsImRpc3BhdGNoRXZlbnQiLCJldmVudCIsImV2dCIsIkV2ZW50IiwicHJvcGFnYXRlIiwiZGlzcGF0Y2hpbmciLCJwZW5kaW5nUmVtb3ZhbHMiLCJoYW5kbGVFdmVudCIsInByIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldExpc3RlbmVycyIsInVuZGVmaW5lZCIsImhhc0xpc3RlbmVyIiwib3B0X3R5cGUiLCJrZXlzIiwiaW5kZXgiLCJzcGxpY2UiLCJsaXN0ZW4iLCJvcHRfdGhpcyIsIm9wdF9vbmNlIiwiYmluZCIsIm9yaWdpbmFsTGlzdGVuZXJfMSIsImFwcGx5IiwiZXZlbnRzS2V5IiwibGlzdGVuT25jZSIsInVubGlzdGVuQnlLZXkiLCJPYnNlcnZhYmxlIiwib24iLCJvbkludGVybmFsIiwib25jZSIsIm9uY2VJbnRlcm5hbCIsInVuIiwidW5JbnRlcm5hbCIsInJldmlzaW9uXyIsImNoYW5nZWQiLCJFdmVudFR5cGUiLCJnZXRSZXZpc2lvbiIsImxlbiIsIm9sX2tleSIsInVuQnlLZXkiLCJFcnJvciIsInVpZENvdW50ZXJfIiwiZ2V0VWlkIiwib2JqIiwib2xfdWlkIiwiT2JqZWN0RXZlbnQiLCJvbGRWYWx1ZSIsIkJhc2VPYmplY3QiLCJvcHRfdmFsdWVzIiwidmFsdWVzXyIsInNldFByb3BlcnRpZXMiLCJnZXQiLCJnZXRLZXlzIiwiZ2V0UHJvcGVydGllcyIsImhhc1Byb3BlcnRpZXMiLCJub3RpZnkiLCJldmVudFR5cGUiLCJPYmplY3RFdmVudFR5cGUiLCJhZGRDaGFuZ2VMaXN0ZW5lciIsInJlbW92ZUNoYW5nZUxpc3RlbmVyIiwic2V0Iiwib3B0X3NpbGVudCIsImFwcGx5UHJvcGVydGllcyIsInVuc2V0IiwiQXNzZXJ0aW9uRXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInNwbGl0IiwibmFtZSIsImFzc2VydGlvbiIsImVycm9yQ29kZSIsIm1pbiIsIm1heCIsIk1hdGgiLCJjb3NoIiwieCIsInkiLCJleHAiLCJsb2cyIiwibG9nIiwiTE9HMkUiLCJzcXVhcmVkU2VnbWVudERpc3RhbmNlIiwieDEiLCJ5MSIsIngyIiwieTIiLCJkeCIsImR5IiwidCIsInRvRGVncmVlcyIsImFuZ2xlSW5SYWRpYW5zIiwiUEkiLCJhbmdsZUluRGVncmVlcyIsInIiLCJsZXJwIiwiQmFzZUxheWVyIiwib3B0aW9ucyIsInByb3BlcnRpZXMiLCJvcGFjaXR5IiwidmlzaWJsZSIsInpJbmRleCIsIm1heFJlc29sdXRpb24iLCJJbmZpbml0eSIsIm1pblJlc29sdXRpb24iLCJtaW5ab29tIiwibWF4Wm9vbSIsImNsYXNzTmFtZV8iLCJjbGFzc05hbWUiLCJzdGF0ZV8iLCJnZXRDbGFzc05hbWUiLCJnZXRMYXllclN0YXRlIiwib3B0X21hbmFnZWQiLCJzdGF0ZSIsImxheWVyIiwibWFuYWdlZCIsImdldFpJbmRleCIsInJvdW5kIiwiZ2V0T3BhY2l0eSIsInNvdXJjZVN0YXRlIiwiZ2V0U291cmNlU3RhdGUiLCJnZXRWaXNpYmxlIiwiZXh0ZW50IiwiZ2V0RXh0ZW50IiwiZ2V0TWF4UmVzb2x1dGlvbiIsImdldE1pblJlc29sdXRpb24iLCJnZXRNaW5ab29tIiwiZ2V0TWF4Wm9vbSIsImdldExheWVyc0FycmF5Iiwib3B0X2FycmF5IiwiZ2V0TGF5ZXJTdGF0ZXNBcnJheSIsIm9wdF9zdGF0ZXMiLCJzZXRFeHRlbnQiLCJzZXRNYXhSZXNvbHV0aW9uIiwic2V0TWluUmVzb2x1dGlvbiIsInNldE1heFpvb20iLCJzZXRNaW5ab29tIiwic2V0T3BhY2l0eSIsInNldFZpc2libGUiLCJzZXRaSW5kZXgiLCJ6aW5kZXgiLCJpblZpZXciLCJsYXllclN0YXRlIiwidmlld1N0YXRlIiwicmVzb2x1dGlvbiIsInpvb20iLCJMYXllciIsImJhc2VPcHRpb25zIiwibWFwUHJlY29tcG9zZUtleV8iLCJtYXBSZW5kZXJLZXlfIiwic291cmNlQ2hhbmdlS2V5XyIsInJlbmRlcmVyXyIsInJlbmRlciIsIm1hcCIsInNldE1hcCIsImhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyIsInNldFNvdXJjZSIsImFycmF5Iiwic3RhdGVzIiwiZ2V0U291cmNlIiwiZ2V0U3RhdGUiLCJoYW5kbGVTb3VyY2VDaGFuZ2VfIiwiZ2V0RmVhdHVyZXMiLCJwaXhlbCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZnJhbWVTdGF0ZSIsImxheWVyUmVuZGVyZXIiLCJnZXRSZW5kZXJlciIsInByZXBhcmVGcmFtZSIsInJlbmRlckZyYW1lIiwibGF5ZXJTdGF0ZXNBcnJheSIsInNvbWUiLCJhcnJheUxheWVyU3RhdGUiLCJjcmVhdGVSZW5kZXJlciIsImhhc1JlbmRlcmVyIiwiQmFzZSIsIkJhc2VUaWxlTGF5ZXIiLCJvcHRfb3B0aW9ucyIsInByZWxvYWQiLCJ1c2VJbnRlcmltVGlsZXNPbkVycm9yIiwic2V0UHJlbG9hZCIsInNldFVzZUludGVyaW1UaWxlc09uRXJyb3IiLCJnZXRQcmVsb2FkIiwiVGlsZVByb3BlcnR5IiwiZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvciIsIkxheWVyUmVuZGVyZXIiLCJib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyIsImhhbmRsZUltYWdlQ2hhbmdlXyIsImxheWVyXyIsImRlY2x1dHRlckV4ZWN1dG9yR3JvdXAiLCJsb2FkZWRUaWxlQ2FsbGJhY2siLCJ0aWxlcyIsInRpbGUiLCJ0aWxlQ29vcmQiLCJ0b1N0cmluZyIsImNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIiLCJwcm9qZWN0aW9uIiwidGlsZVJhbmdlIiwiY2FsbGJhY2siLCJmb3JFYWNoTG9hZGVkVGlsZSIsImZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlIiwiY29vcmRpbmF0ZSIsImhpdFRvbGVyYW5jZSIsIm1hdGNoZXMiLCJnZXREYXRhQXRQaXhlbCIsImdldExheWVyIiwiaGFuZGxlRm9udHNDaGFuZ2VkIiwicmVuZGVySWZSZWFkeUFuZFZpc2libGUiLCJsb2FkSW1hZ2UiLCJpbWFnZSIsImltYWdlU3RhdGUiLCJsb2FkIiwiUmVuZGVyRXZlbnQiLCJvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtIiwib3B0X2ZyYW1lU3RhdGUiLCJvcHRfY29udGV4dCIsImludmVyc2VQaXhlbFRyYW5zZm9ybSIsImNvbnRleHQiLCJ0cmFuc2Zvcm1TdHJpbmdEaXYiLCJ1YSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwiRklSRUZPWCIsIldFQktJVCIsIkRFVklDRV9QSVhFTF9SQVRJTyIsImRldmljZVBpeGVsUmF0aW8iLCJXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyIsIldvcmtlckdsb2JhbFNjb3BlIiwiT2Zmc2NyZWVuQ2FudmFzIiwiSU1BR0VfREVDT0RFIiwiSW1hZ2UiLCJkZWNvZGUiLCJQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyIsInBhc3NpdmUiLCJ3aW5kb3ciLCJlcnJvciIsInRyYW5zZm9ybSIsImNvbXBvc2UiLCJkeDEiLCJkeTEiLCJzeCIsInN5IiwiYW5nbGUiLCJkeDIiLCJkeTIiLCJzaW4iLCJjb3MiLCJtYWtlSW52ZXJzZSIsIm1hdCIsImRldCIsImMiLCJlIiwiZiIsImJvdW5kaW5nRXh0ZW50IiwiY29vcmRpbmF0ZXMiLCJleHRlbmRDb29yZGluYXRlIiwiY2xvc2VzdFNxdWFyZWREaXN0YW5jZVhZIiwiY29udGFpbnNDb29yZGluYXRlIiwiY29udGFpbnNYWSIsImNvb3JkaW5hdGVSZWxhdGlvbnNoaXAiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwicmVsYXRpb25zaGlwIiwiY3JlYXRlT3JVcGRhdGUiLCJvcHRfZXh0ZW50IiwiY3JlYXRlT3JVcGRhdGVFbXB0eSIsImV4dGVudDEiLCJleHRlbnQyIiwiZXh0ZW5kRmxhdENvb3JkaW5hdGVzIiwiZmxhdENvb3JkaW5hdGVzIiwib2Zmc2V0IiwiZW5kIiwic3RyaWRlIiwiZXh0ZW5kWFkiLCJmb3JFYWNoQ29ybmVyIiwidmFsIiwiZ2V0Qm90dG9tTGVmdCIsImdldEJvdHRvbVJpZ2h0IiwiZ2V0VG9wUmlnaHQiLCJnZXRUb3BMZWZ0IiwiZ2V0QXJlYSIsImFyZWEiLCJnZXRIZWlnaHQiLCJnZXRDZW50ZXIiLCJnZXRDb3JuZXIiLCJjb3JuZXIiLCJDb3JuZXIiLCJnZXRGb3JWaWV3QW5kU2l6ZSIsImNlbnRlciIsInJvdGF0aW9uIiwic2l6ZSIsImNvc1JvdGF0aW9uIiwic2luUm90YXRpb24iLCJ4Q29zIiwieFNpbiIsInlDb3MiLCJ5U2luIiwieDAiLCJ4MyIsInkwIiwieTMiLCJnZXRJbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3Rpb24iLCJpbnRlcnNlY3RzIiwiY3JlYXRlQ2FudmFzQ29udGV4dDJEIiwib3B0X3dpZHRoIiwib3B0X2hlaWdodCIsIm9wdF9jYW52YXNQb29sIiwib3B0X0NvbnRleHQyRFNldHRpbmdzIiwiY2FudmFzIiwic2hpZnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ3aWR0aCIsImhlaWdodCIsImdldENvbnRleHQiLCJyZXBsYWNlTm9kZSIsIm5ld05vZGUiLCJvbGROb2RlIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInJlcGxhY2VDaGlsZCIsInJlbW92ZU5vZGUiLCJub2RlIiwicmVtb3ZlQ2hpbGQiLCJDYW52YXNMYXllclJlbmRlcmVyIiwiY29udGFpbmVyIiwicmVuZGVyZWRSZXNvbHV0aW9uIiwidGVtcFRyYW5zZm9ybSIsInBpeGVsVHJhbnNmb3JtIiwiY29udGFpbmVyUmV1c2VkIiwidXNlQ29udGFpbmVyIiwibGF5ZXJDbGFzc05hbWUiLCJzdHlsZSIsImZpcnN0RWxlbWVudENoaWxkIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJwb3NpdGlvbiIsImFwcGVuZENoaWxkIiwibGVmdCIsInRyYW5zZm9ybU9yaWdpbiIsImNsaXBVbnJvdGF0ZWQiLCJ0b3BMZWZ0IiwidG9wUmlnaHQiLCJib3R0b21SaWdodCIsImJvdHRvbUxlZnQiLCJjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSIsImludmVydGVkIiwic2F2ZSIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsaXAiLCJkaXNwYXRjaFJlbmRlckV2ZW50XyIsImV2ZW50XzEiLCJwcmVSZW5kZXIiLCJwb3N0UmVuZGVyIiwiZ2V0UmVuZGVyVHJhbnNmb3JtIiwicGl4ZWxSYXRpbyIsIm9mZnNldFgiLCJyZW5kZXJQaXhlbCIsInNsaWNlIiwibGF5ZXJFeHRlbnQiLCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSIsIm5ld0NhbnZhcyIsIm5ld0NvbnRleHQiLCJjbGVhclJlY3QiLCJkcmF3SW1hZ2UiLCJnZXRJbWFnZURhdGEiLCJlcnIiLCJVaW50OEFycmF5IiwiVGlsZVJhbmdlIiwiY29udGFpbnMiLCJjb250YWluc1RpbGVSYW5nZSIsImdldFNpemUiLCJnZXRXaWR0aCIsIlVuaXRzIiwiREVHUkVFUyIsIkZFRVQiLCJNRVRFUlMiLCJQSVhFTFMiLCJUSUxFX1BJWEVMUyIsIlVTRkVFVCIsIk1FVEVSU19QRVJfVU5JVCIsIlByb2plY3Rpb24iLCJjb2RlXyIsInVuaXRzXyIsImV4dGVudF8iLCJ3b3JsZEV4dGVudF8iLCJ3b3JsZEV4dGVudCIsImF4aXNPcmllbnRhdGlvbl8iLCJheGlzT3JpZW50YXRpb24iLCJnbG9iYWxfIiwiZ2xvYmFsIiwiY2FuV3JhcFhfIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18iLCJnZXRQb2ludFJlc29sdXRpb24iLCJkZWZhdWx0VGlsZUdyaWRfIiwibWV0ZXJzUGVyVW5pdF8iLCJtZXRlcnNQZXJVbml0IiwiY2FuV3JhcFgiLCJnZXRDb2RlIiwiZ2V0VW5pdHMiLCJnZXRNZXRlcnNQZXJVbml0IiwiZ2V0V29ybGRFeHRlbnQiLCJnZXRBeGlzT3JpZW50YXRpb24iLCJpc0dsb2JhbCIsInNldEdsb2JhbCIsImdldERlZmF1bHRUaWxlR3JpZCIsInNldERlZmF1bHRUaWxlR3JpZCIsInRpbGVHcmlkIiwic2V0V29ybGRFeHRlbnQiLCJzZXRHZXRQb2ludFJlc29sdXRpb24iLCJmdW5jIiwiZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYyIsIlJBRElVUyIsIkhBTEZfU0laRSIsIkVYVEVOVCIsIldPUkxEX0VYVEVOVCIsIk1BWF9TQUZFX1kiLCJ0YW4iLCJFUFNHMzg1N1Byb2plY3Rpb24iLCJ1bml0cyIsInBvaW50IiwiUFJPSkVDVElPTlMiLCJFUFNHNDMyNlByb2plY3Rpb24iLCJvcHRfYXhpc09yaWVudGF0aW9uIiwiY2FjaGUiLCJ0cmFuc2Zvcm1zIiwiZGVzdGluYXRpb24iLCJ0cmFuc2Zvcm1GbiIsInNvdXJjZUNvZGUiLCJkZXN0aW5hdGlvbkNvZGUiLCJERUZBVUxUX1JBRElVUyIsImdldERpc3RhbmNlIiwiYzEiLCJjMiIsIm9wdF9yYWRpdXMiLCJyYWRpdXMiLCJsYXQxIiwibGF0MiIsImRlbHRhTGF0QnkyIiwiZGVsdGFMb25CeTIiLCJhdGFuMiIsInNxcnQiLCJkaXN0YW5jZSIsImJlYXJpbmciLCJsb24xIiwiZEJ5UiIsImxhdCIsImFzaW4iLCJjbG9uZVRyYW5zZm9ybSIsImlucHV0Iiwib3B0X291dHB1dCIsIm9wdF9kaW1lbnNpb24iLCJpZGVudGl0eVRyYW5zZm9ybSIsImFkZFByb2plY3Rpb24iLCJhZGQiLCJwcm9qZWN0aW9uTGlrZSIsInJlcGxhY2UiLCJvcHRfdW5pdHMiLCJwb2ludFJlc29sdXRpb24iLCJnZXR0ZXIiLCJ0b0VQU0c0MzI2XzEiLCJnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMiLCJ2ZXJ0aWNlcyIsImFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyIsInByb2plY3Rpb25zIiwiZm9yRWFjaCIsImFkZFByb2plY3Rpb25zIiwiY3JlYXRlUHJvamVjdGlvbiIsImRlZmF1bHRDb2RlIiwiZXF1aXZhbGVudCIsInByb2plY3Rpb24xIiwicHJvamVjdGlvbjIiLCJlcXVhbFVuaXRzIiwic291cmNlUHJvamVjdGlvbiIsImRlc3RpbmF0aW9uUHJvamVjdGlvbiIsInRyYW5zZm9ybUZ1bmMiLCJnZXRUcmFuc2Zvcm0iLCJwcm9qZWN0aW9uczIiLCJmb3J3YXJkVHJhbnNmb3JtIiwiaW52ZXJzZVRyYW5zZm9ybSIsInVzZXJQcm9qZWN0aW9uIiwiZ2V0VXNlclByb2plY3Rpb24iLCJ0b1VzZXJDb29yZGluYXRlIiwiZnJvbVVzZXJDb29yZGluYXRlIiwiZGVzdFByb2plY3Rpb24iLCJmcm9tVXNlckV4dGVudCIsImRpbWVuc2lvbiIsImF0YW4iLCJDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciIsInRpbGVMYXllciIsImV4dGVudENoYW5nZWQiLCJyZW5kZXJlZEV4dGVudF8iLCJyZW5kZXJlZFBpeGVsUmF0aW8iLCJyZW5kZXJlZFByb2plY3Rpb24iLCJyZW5kZXJlZFJldmlzaW9uIiwicmVuZGVyZWRUaWxlcyIsIm5ld1RpbGVzXyIsInRtcEV4dGVudCIsInRtcFRpbGVSYW5nZV8iLCJpc0RyYXdhYmxlVGlsZSIsInRpbGVTdGF0ZSIsImdldFRpbGUiLCJ6Iiwic2V0U3RhdGUiLCJnZXRJbnRlcmltVGlsZSIsImxheWVySW5kZXgiLCJ2aWV3UmVzb2x1dGlvbiIsInZpZXdDZW50ZXIiLCJ0aWxlU291cmNlIiwic291cmNlUmV2aXNpb24iLCJnZXRUaWxlR3JpZEZvclByb2plY3Rpb24iLCJnZXRaRm9yUmVzb2x1dGlvbiIsInpEaXJlY3Rpb24iLCJ0aWxlUmVzb2x1dGlvbiIsImdldFJlc29sdXRpb24iLCJ0aWxlUGl4ZWxSYXRpbyIsImdldFRpbGVQaXhlbFJhdGlvIiwiY2FudmFzRXh0ZW50IiwiZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWiIsInRpbGVzVG9EcmF3QnlaIiwiZmluZExvYWRlZFRpbGVzIiwidG1wVGlsZVJhbmdlIiwidWlkIiwiaW5UcmFuc2l0aW9uIiwiZ2V0QWxwaGEiLCJ0aW1lIiwiY2hpbGRUaWxlUmFuZ2UiLCJnZXRUaWxlQ29vcmRDaGlsZFRpbGVSYW5nZSIsImNvdmVyZWQiLCJmb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlIiwiY2FudmFzU2NhbGUiLCJjYW52YXNUcmFuc2Zvcm0iLCJ0cmFuc2Zvcm1TdHJpbmciLCJqb2luIiwiZ2V0Q29udGV4dE9wdGlvbnMiLCJjbGlwcyIsImNsaXBacyIsImN1cnJlbnRDbGlwIiwienMiLCJOdW1iZXIiLCJzb3J0IiwiZ2V0T3BhcXVlIiwicmV2ZXJzZSIsImN1cnJlbnRaIiwiY3VycmVudFRpbGVQaXhlbFNpemUiLCJnZXRUaWxlUGl4ZWxTaXplIiwiY3VycmVudFNjYWxlIiwiZHhfMSIsImR5XzEiLCJvcmlnaW5UaWxlQ29vcmQiLCJnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFoiLCJvcmlnaW5UaWxlRXh0ZW50IiwiZ2V0VGlsZUNvb3JkRXh0ZW50Iiwib3JpZ2luXzEiLCJ0aWxlR3V0dGVyIiwiZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiIsInRpbGVzVG9EcmF3IiwidGlsZUNvb3JkS2V5IiwieEluZGV4IiwibmV4dFgiLCJ5SW5kZXgiLCJuZXh0WSIsInciLCJoIiwidHJhbnNpdGlvbiIsImlfMSIsImRyYXdUaWxlSW1hZ2UiLCJyZXN0b3JlIiwidW5zaGlmdCIsInVwZGF0ZVVzZWRUaWxlcyIsInVzZWRUaWxlcyIsIm1hbmFnZVRpbGVQeXJhbWlkIiwic2NoZWR1bGVFeHBpcmVDYWNoZSIsImd1dHRlciIsImdldFRpbGVJbWFnZSIsInRpbGVBbHBoYSIsImFscGhhIiwiYWxwaGFDaGFuZ2VkIiwiZ2xvYmFsQWxwaGEiLCJhbmltYXRlIiwiZW5kVHJhbnNpdGlvbiIsImdldEltYWdlIiwiY2FuRXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb24iLCJ0aWxlU291cmNlS2V5IiwiZXhwaXJlQ2FjaGUiLCJwb3N0UmVuZGVyRnVuY3Rpb25zIiwiZ2V0S2V5Iiwib3B0X3RpbGVDYWxsYmFjayIsIndhbnRlZFRpbGVzIiwidGlsZVF1ZXVlIiwidGlsZUNvdW50IiwiaXNLZXlRdWV1ZWQiLCJlbnF1ZXVlIiwiZ2V0VGlsZUNvb3JkQ2VudGVyIiwidXNlVGlsZSIsInVwZGF0ZUNhY2hlU2l6ZSIsIlRpbGVMYXllciIsIkJhc2VUaWxlIiwiY29vcmRpbmF0ZTEiLCJjb29yZGluYXRlMiIsImNvc0FuZ2xlIiwic2luQW5nbGUiLCJjcmVhdGVFeHRlbnQiLCJvbmx5Q2VudGVyIiwic21vb3RoIiwib3B0X2lzTW92aW5nIiwib3B0X2NlbnRlclNoaWZ0Iiwidmlld1dpZHRoIiwidmlld0hlaWdodCIsInNoaWZ0WCIsInNoaWZ0WSIsInJhdGlvIiwibm9uZSIsImdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24iLCJtYXhFeHRlbnQiLCJ2aWV3cG9ydFNpemUiLCJzaG93RnVsbEV4dGVudCIsInhSZXNvbHV0aW9uIiwieVJlc29sdXRpb24iLCJnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbiIsInJlc3VsdCIsImNyZWF0ZU1pbk1heFJlc29sdXRpb24iLCJvcHRfc21vb3RoIiwib3B0X21heEV4dGVudCIsIm9wdF9zaG93RnVsbEV4dGVudCIsImNhcHBlZE1heFJlcyIsImRpc2FibGUiLCJlYXNlSW4iLCJwb3ciLCJlYXNlT3V0IiwiaW5BbmRPdXQiLCJsaW5lYXIiLCJ0bXBUcmFuc2Zvcm0iLCJHZW9tZXRyeSIsImZuIiwibGFzdFJlc3VsdCIsImxhc3RBcmdzIiwibGFzdFRoaXMiLCJjYWxsZWQiLCJleHRlbnRSZXZpc2lvbl8iLCJzaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlIiwic2ltcGxpZmllZEdlb21ldHJ5UmV2aXNpb24iLCJzaW1wbGlmeVRyYW5zZm9ybWVkSW50ZXJuYWwiLCJyZXZpc2lvbiIsInNxdWFyZWRUb2xlcmFuY2UiLCJvcHRfdHJhbnNmb3JtIiwiZ2V0U2ltcGxpZmllZEdlb21ldHJ5IiwiY2xvbmUiLCJhcHBseVRyYW5zZm9ybSIsIm5leHRBcmdzIiwic2ltcGxpZnlUcmFuc2Zvcm1lZCIsImNsb3Nlc3RQb2ludFhZIiwiY2xvc2VzdFBvaW50IiwibWluU3F1YXJlZERpc3RhbmNlIiwiY29vcmQiLCJnZXRDbG9zZXN0UG9pbnQiLCJvcHRfY2xvc2VzdFBvaW50IiwiTmFOIiwiaW50ZXJzZWN0c0Nvb3JkaW5hdGUiLCJjb21wdXRlRXh0ZW50IiwiaXNOYU4iLCJyZXR1cm5PclVwZGF0ZSIsInJvdGF0ZSIsImFuY2hvciIsInNjYWxlIiwib3B0X3N5Iiwib3B0X2FuY2hvciIsInNpbXBsaWZ5IiwidG9sZXJhbmNlIiwiZ2V0VHlwZSIsImludGVyc2VjdHNFeHRlbnQiLCJ0cmFuc2xhdGUiLCJkZWx0YVgiLCJkZWx0YVkiLCJzb3VyY2VQcm9qIiwiaW5Db29yZGluYXRlcyIsIm91dENvb3JkaW5hdGVzIiwicGl4ZWxFeHRlbnQiLCJwcm9qZWN0ZWRFeHRlbnQiLCJvcHRfZGVzdCIsImRlc3QiLCJqIiwiZ2V0U3RyaWRlRm9yTGF5b3V0IiwibGF5b3V0IiwiR2VvbWV0cnlMYXlvdXQiLCJTaW1wbGVHZW9tZXRyeSIsImdldENvb3JkaW5hdGVzIiwiZ2V0Rmlyc3RDb29yZGluYXRlIiwiZ2V0RmxhdENvb3JkaW5hdGVzIiwiZ2V0TGFzdENvb3JkaW5hdGUiLCJnZXRMYXlvdXQiLCJzaW1wbGlmaWVkR2VvbWV0cnkiLCJnZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCIsImdldFN0cmlkZSIsInNldEZsYXRDb29yZGluYXRlcyIsInNldENvb3JkaW5hdGVzIiwib3B0X2xheW91dCIsInNldExheW91dCIsIm5lc3RpbmciLCJnZXRMYXlvdXRGb3JTdHJpZGUiLCJhbmNob3JYIiwiYW5jaG9yWSIsImsiLCJhc3NpZ25DbG9zZXN0Iiwib2Zmc2V0MSIsIm9mZnNldDIiLCJtYXhTcXVhcmVkRGVsdGEiLCJzcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0UG9pbnQiLCJtYXhEZWx0YSIsImlzUmluZyIsIm9wdF90bXBQb2ludCIsInNxdWFyZWREaXN0YW5jZSIsInRtcFBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGVzIiwic25hcCIsInF1YW50aXplIiwic2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyIsInNpbXBsaWZpZWRPZmZzZXQiLCJpbmZsYXRlQ29vcmRpbmF0ZXMiLCJvcHRfY29vcmRpbmF0ZXMiLCJsaW5lYXJSaW5nIiwidHdpY2VBcmVhIiwiTGluZWFyUmluZyIsIm1heERlbHRhXyIsIm1heERlbHRhUmV2aXNpb25fIiwibWFya2VycyIsInN0YWNrIiwibGFzdCIsInBvcCIsImZpcnN0IiwibWF4U3F1YXJlZERpc3RhbmNlIiwic3F1YXJlZERpc3RhbmNlXzEiLCJkb3VnbGFzUGV1Y2tlciIsIlBvaW50IiwiZGVmbGF0ZUNvb3JkaW5hdGUiLCJsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQiLCJsaW5lYXJSaW5nQ29udGFpbnNYWSIsInduIiwibGluZWFyUmluZ3NDb250YWluc1hZIiwiZW5kcyIsImludGVyc2VjdHNMaW5lU3RyaW5nIiwiY29vcmRpbmF0ZXNFeHRlbnQiLCJyZXQiLCJwb2ludDEiLCJwb2ludDIiLCJzdGFydCIsInN0YXJ0UmVsIiwiZW5kUmVsIiwic3RhcnRYIiwic3RhcnRZIiwiZW5kWCIsImVuZFkiLCJzbG9wZSIsImludGVyc2VjdHNTZWdtZW50IiwidG1wIiwibGluZWFyUmluZ0lzQ2xvY2t3aXNlIiwiZWRnZSIsIm9yaWVudExpbmVhclJpbmdzIiwib3B0X3JpZ2h0IiwicmlnaHQiLCJpc0Nsb2Nrd2lzZSIsIlBvbHlnb24iLCJvcHRfZW5kcyIsImVuZHNfIiwiZmxhdEludGVyaW9yUG9pbnRSZXZpc2lvbl8iLCJmbGF0SW50ZXJpb3JQb2ludF8iLCJvcmllbnRlZFJldmlzaW9uXyIsIm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyIsImFwcGVuZExpbmVhclJpbmciLCJwb2x5Z29uIiwiYXJyYXlNYXhTcXVhcmVkRGVsdGEiLCJhc3NpZ25DbG9zZXN0QXJyYXlQb2ludCIsImdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzIiwibGluZWFyUmluZ3MiLCJvcHRfY29vcmRpbmF0ZXNzIiwiY29vcmRpbmF0ZXNzIiwiamoiLCJpbmZsYXRlQ29vcmRpbmF0ZXNBcnJheSIsImdldEVuZHMiLCJnZXRGbGF0SW50ZXJpb3JQb2ludCIsImZsYXRDZW50ZXIiLCJmbGF0Q2VudGVycyIsImZsYXRDZW50ZXJzT2Zmc2V0IiwiaW50ZXJzZWN0aW9ucyIsInJyIiwicG9pbnRYIiwibWF4U2VnbWVudExlbmd0aCIsInNlZ21lbnRMZW5ndGgiLCJhYnMiLCJnZXRJbnRlcmlvclBvaW50T2ZBcnJheSIsImdldEludGVyaW9yUG9pbnQiLCJnZXRMaW5lYXJSaW5nQ291bnQiLCJnZXRMaW5lYXJSaW5nIiwiZ2V0TGluZWFyUmluZ3MiLCJsaW5lYXJSaW5nc0FyZU9yaWVudGVkIiwic2ltcGxpZmllZEVuZHMiLCJxdWFudGl6ZUFycmF5IiwiaW50ZXJzZWN0c0xpbmVhclJpbmciLCJpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5IiwiZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkiLCJmcm9tRXh0ZW50IiwiYW5pbWF0aW9uQ2FsbGJhY2siLCJyZXR1cm5WYWx1ZSIsInNldFRpbWVvdXQiLCJpc05vb3BBbmltYXRpb24iLCJhbmltYXRpb24iLCJzb3VyY2VDZW50ZXIiLCJ0YXJnZXRDZW50ZXIiLCJzb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0UmVzb2x1dGlvbiIsInNvdXJjZVJvdGF0aW9uIiwidGFyZ2V0Um90YXRpb24iLCJjYWxjdWxhdGVDZW50ZXJPbiIsInJvdFgiLCJyb3RZIiwiVmlldyIsImhpbnRzXyIsImFuaW1hdGlvbnNfIiwidXBkYXRlQW5pbWF0aW9uS2V5XyIsInByb2plY3Rpb25fIiwidmlld3BvcnRTaXplXyIsInRhcmdldENlbnRlcl8iLCJ0YXJnZXRSZXNvbHV0aW9uXyIsInRhcmdldFJvdGF0aW9uXyIsImNhbmNlbEFuY2hvcl8iLCJhcHBseU9wdGlvbnNfIiwicmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvIiwicmVzb2x1dGlvbkNvbnN0cmFpbnQiLCJ6b29tRmFjdG9yIiwibXVsdGlXb3JsZCIsInNtb290aFJlc29sdXRpb25Db25zdHJhaW50IiwicHJvakV4dGVudCIsImNvbnN0cmFpbk9ubHlDZW50ZXIiLCJyZXNvbHV0aW9ucyIsImNvbnN0cmFpblJlc29sdXRpb24iLCJjYXBwZWQiLCJmbG9vciIsImNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zIiwiZGVmYXVsdE1heFJlc29sdXRpb24iLCJkZWZhdWx0TWluUmVzb2x1dGlvbiIsImRlZmF1bHRNYXhab29tIiwicG93ZXIiLCJvcHRfbWluUmVzb2x1dGlvbiIsIm1pblpvb21MZXZlbCIsImNlaWwiLCJjYXBwZWRab29tTGV2ZWwiLCJ6b29tTGV2ZWwiLCJjcmVhdGVTbmFwVG9Qb3dlciIsImNvbnN0cmFpbnQiLCJjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludCIsIm1heFJlc29sdXRpb25fIiwibWluUmVzb2x1dGlvbl8iLCJ6b29tRmFjdG9yXyIsInJlc29sdXRpb25zXyIsInBhZGRpbmdfIiwicGFkZGluZyIsIm1pblpvb21fIiwiY2VudGVyQ29uc3RyYWludCIsInNtb290aEV4dGVudENvbnN0cmFpbnQiLCJjcmVhdGVDZW50ZXJDb25zdHJhaW50Iiwicm90YXRpb25Db25zdHJhaW50IiwiZW5hYmxlUm90YXRpb24iLCJjb25zdHJhaW5Sb3RhdGlvbiIsInRoZXRhIiwiY3JlYXRlUm90YXRpb25Db25zdHJhaW50IiwiY29uc3RyYWludHNfIiwic2V0Um90YXRpb24iLCJzZXRDZW50ZXJJbnRlcm5hbCIsInNldFJlc29sdXRpb24iLCJzZXRab29tIiwib3B0aW9uc18iLCJvbGRQYWRkaW5nIiwibmV3UGFkZGluZyIsIm9mZnNldFkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiZ2V0VXBkYXRlZE9wdGlvbnNfIiwibmV3T3B0aW9ucyIsImdldFpvb20iLCJnZXRDZW50ZXJJbnRlcm5hbCIsImdldFJvdGF0aW9uIiwidmFyX2FyZ3MiLCJpc0RlZiIsImdldEFuaW1hdGluZyIsInJlc29sdmVDb25zdHJhaW50cyIsImFyZ3MiLCJnZXRQcm9qZWN0aW9uIiwiYW5pbWF0ZUludGVybmFsIiwiYW5pbWF0aW9uQ291bnQiLCJEYXRlIiwibm93Iiwic2VyaWVzIiwiY29tcGxldGUiLCJkdXJhdGlvbiIsImVhc2luZyIsImdldFJlc29sdXRpb25Gb3Jab29tIiwiZGVsdGEiLCJzZXRIaW50IiwidXBkYXRlQW5pbWF0aW9uc18iLCJnZXRJbnRlcmFjdGluZyIsImNhbmNlbEFuaW1hdGlvbnMiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsIm1vcmUiLCJzZXJpZXNDb21wbGV0ZSIsImVsYXBzZWQiLCJmcmFjdGlvbiIsInByb2dyZXNzIiwiZ2V0Vmlld3BvcnRTaXplXyIsImNvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImNhbGN1bGF0ZUNlbnRlclpvb20iLCJhcHBseVRhcmdldFN0YXRlXyIsImNvbnN0cmFpbmVkUm90YXRpb24iLCJjYWxjdWxhdGVDZW50ZXJSb3RhdGUiLCJmaWx0ZXIiLCJCb29sZWFuIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY3VycmVudENlbnRlciIsImN1cnJlbnRSZXNvbHV0aW9uIiwib3B0X3JvdGF0aW9uIiwic2V0Vmlld3BvcnRTaXplIiwib3B0X3NpemUiLCJWaWV3UHJvcGVydHkiLCJnZXRDb25zdHJhaW50cyIsImdldENvbnN0cmFpblJlc29sdXRpb24iLCJnZXRIaW50cyIsIm9wdF9oaW50cyIsImNhbGN1bGF0ZUV4dGVudCIsImNhbGN1bGF0ZUV4dGVudEludGVybmFsIiwiZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyIsImdldFpvb21Gb3JSZXNvbHV0aW9uIiwic2V0Q29uc3RyYWluUmVzb2x1dGlvbiIsImVuYWJsZWQiLCJnZXRSZXNvbHV0aW9ucyIsImdldFJlc29sdXRpb25Gb3JFeHRlbnQiLCJnZXRSZXNvbHV0aW9uRm9yRXh0ZW50SW50ZXJuYWwiLCJnZXRSZXNvbHV0aW9uRm9yVmFsdWVGdW5jdGlvbiIsIm9wdF9wb3dlciIsImdldENvbnN0cmFpbmVkUmVzb2x1dGlvbiIsImdldFZhbHVlRm9yUmVzb2x1dGlvbkZ1bmN0aW9uIiwibG9nUG93ZXIiLCJyZWR1Y2VkU2l6ZSIsIm5lYXJlc3QiLCJiYXNlTGV2ZWwiLCJmaXQiLCJnZW9tZXRyeU9yRXh0ZW50IiwiZ2VvbWV0cnkiLCJmaXRJbnRlcm5hbCIsInJvdGF0ZWRFeHRlbnRGb3JHZW9tZXRyeSIsImNvb3JkcyIsIm1pblJvdFgiLCJtaW5Sb3RZIiwibWF4Um90WCIsIm1heFJvdFkiLCJyb3RhdGVkRXh0ZW50IiwiY2VudGVyUm90IiwiY2VudGVyWCIsImNlbnRlclkiLCJnZXRDb25zdHJhaW5lZENlbnRlciIsImNlbnRlck9uIiwiY2VudGVyT25JbnRlcm5hbCIsImNhbGN1bGF0ZUNlbnRlclNoaWZ0IiwiY2VudGVyU2hpZnQiLCJzaGlmdGVkQ2VudGVyIiwiYWRqdXN0Q2VudGVyIiwiZGVsdGFDb29yZGluYXRlcyIsInNldENlbnRlciIsImFkanVzdENlbnRlckludGVybmFsIiwiYWRqdXN0UmVzb2x1dGlvbiIsImFkanVzdFJlc29sdXRpb25JbnRlcm5hbCIsImlzTW92aW5nIiwibmV3UmVzb2x1dGlvbiIsImFkanVzdFpvb20iLCJhZGp1c3RSb3RhdGlvbiIsImFkanVzdFJvdGF0aW9uSW50ZXJuYWwiLCJuZXdSb3RhdGlvbiIsImhpbnQiLCJvcHRfZG9Ob3RDYW5jZWxBbmltcyIsIm9wdF9mb3JjZU1vdmluZyIsIm5ld0NlbnRlciIsIm9wdF9kdXJhdGlvbiIsIm9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uIiwiYmVnaW5JbnRlcmFjdGlvbiIsImVuZEludGVyYWN0aW9uIiwiZW5kSW50ZXJhY3Rpb25JbnRlcm5hbCIsIm9wdF90YXJnZXRSZXNvbHV0aW9uIiwiZ2V0Q29uc3RyYWluZWRab29tIiwidGFyZ2V0Wm9vbSIsIm9wdF9kaXJlY3Rpb24iLCJ0YXJnZXRSZXMiLCJzcmMiLCJjcm9zc09yaWdpbiIsImNvbG9yIiwiZyIsImFzU3RyaW5nIiwic2hhcmVkIiwiSWNvbkltYWdlQ2FjaGUiLCJjYWNoZV8iLCJjYWNoZVNpemVfIiwibWF4Q2FjaGVTaXplXyIsImV4cGlyZSIsImljb25JbWFnZSIsInNldFNpemUiLCJtYXhDYWNoZVNpemUiLCJleHBpcmVJY29uQ2FjaGUiLCJNYXBSZW5kZXJlciIsIm1hcF8iLCJkaXNwYXRjaFJlbmRlckV2ZW50IiwiY2FsY3VsYXRlTWF0cmljZXMyRCIsImNoZWNrV3JhcHBlZCIsInRoaXNBcmciLCJsYXllckZpbHRlciIsInRoaXNBcmcyIiwiZmVhdHVyZSIsInRyYW5zbGF0ZWRDb29yZGluYXRlIiwid29ybGRXaWR0aCIsIndvcmxkc0F3YXkiLCJvcHRfc291cmNlRXh0ZW50V2lkdGgiLCJwcm9qZWN0aW9uRXh0ZW50Iiwic291cmNlRXh0ZW50V2lkdGgiLCJvZmZzZXRzIiwibGF5ZXJTdGF0ZXMiLCJudW1MYXllcnMiLCJ0bXBDb29yZCIsImdldFdyYXBYIiwiY2FsbGJhY2tfMSIsIm9yZGVyIiwibSIsImRpc3RhbmNlU3EiLCJmb3JFYWNoTGF5ZXJBdFBpeGVsIiwiaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZSIsImdldE1hcCIsInNjaGVkdWxlRXhwaXJlSWNvbkNhY2hlIiwiQ0xBU1NfSElEREVOIiwiQ0xBU1NfQ09OVFJPTCIsImNoZWNrZWRGb250cyIsIlJlZ0V4cCIsImNvbnNvbGUiLCJ3YXJuIiwiQ29tcG9zaXRlTWFwUmVuZGVyZXIiLCJmb250Q2hhbmdlTGlzdGVuZXJLZXlfIiwicmVkcmF3VGV4dCIsImVsZW1lbnRfIiwiQ0xBU1NfVU5TRUxFQ1RBQkxFIiwiZ2V0Vmlld3BvcnQiLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwiY2hpbGRyZW5fIiwicmVuZGVyZWRWaXNpYmxlXyIsImRlY2x1dHRlckxheWVycyIsInByZXZpb3VzRWxlbWVudCIsImVsZW1lbnQiLCJyZW5kZXJEZWNsdXR0ZXIiLCJjaGlsZHJlbiIsIm9sZENoaWxkcmVuIiwiY2hpbGROb2RlcyIsIm9sZENoaWxkIiwibmV3Q2hpbGQiLCJyZXBsYWNlQ2hpbGRyZW4iLCJkaXNwbGF5IiwiTWFwIiwiQ29sbGVjdGlvbkV2ZW50Iiwib3B0X2VsZW1lbnQiLCJvcHRfaW5kZXgiLCJDb2xsZWN0aW9uIiwidW5pcXVlXyIsInVuaXF1ZSIsImFycmF5XyIsImFzc2VydFVuaXF1ZV8iLCJ1cGRhdGVMZW5ndGhfIiwiZ2V0TGVuZ3RoIiwiZ2V0QXJyYXkiLCJpdGVtIiwiaW5zZXJ0QXQiLCJlbGVtIiwiQ29sbGVjdGlvbkV2ZW50VHlwZSIsInJlbW92ZUF0IiwicmVtb3ZlIiwicHJldiIsInNldEF0Iiwib3B0X2V4Y2VwdCIsIkxheWVyR3JvdXAiLCJsYXllcnMiLCJsYXllcnNMaXN0ZW5lcktleXNfIiwibGlzdGVuZXJLZXlzXyIsImhhbmRsZUxheWVyc0NoYW5nZWRfIiwic2V0TGF5ZXJzIiwiaGFuZGxlTGF5ZXJDaGFuZ2VfIiwiZ2V0TGF5ZXJzIiwiaWQiLCJoYW5kbGVMYXllcnNBZGRfIiwiaGFuZGxlTGF5ZXJzUmVtb3ZlXyIsImxheWVyc0FycmF5IiwiY29sbGVjdGlvbkV2ZW50IiwicG9zIiwib3duTGF5ZXJTdGF0ZSIsImRlZmF1bHRaSW5kZXgiLCJNYXBFdmVudCIsIk1hcEJyb3dzZXJFdmVudCIsIm9yaWdpbmFsRXZlbnQiLCJvcHRfZHJhZ2dpbmciLCJwaXhlbF8iLCJjb29yZGluYXRlXyIsImRyYWdnaW5nIiwiZ2V0RXZlbnRQaXhlbCIsImdldENvb3JkaW5hdGVGcm9tUGl4ZWwiLCJTSU5HTEVDTElDSyIsIkNMSUNLIiwiREJMQ0xJQ0siLCJQT0lOVEVSRFJBRyIsIlBPSU5URVJNT1ZFIiwiUE9JTlRFUkRPV04iLCJQT0lOVEVSVVAiLCJQT0lOVEVST1ZFUiIsIlBPSU5URVJPVVQiLCJQT0lOVEVSRU5URVIiLCJQT0lOVEVSTEVBVkUiLCJQT0lOVEVSQ0FOQ0VMIiwiTWFwQnJvd3NlckV2ZW50SGFuZGxlciIsIm1vdmVUb2xlcmFuY2UiLCJjbGlja1RpbWVvdXRJZF8iLCJlbXVsYXRlQ2xpY2tzXyIsImRyYWdnaW5nXyIsImRyYWdMaXN0ZW5lcktleXNfIiwibW92ZVRvbGVyYW5jZV8iLCJkb3duXyIsImFjdGl2ZVBvaW50ZXJzXyIsInRyYWNrZWRUb3VjaGVzXyIsInBvaW50ZXJkb3duTGlzdGVuZXJLZXlfIiwiaGFuZGxlUG9pbnRlckRvd25fIiwib3JpZ2luYWxQb2ludGVyTW92ZUV2ZW50XyIsInJlbGF5ZWRMaXN0ZW5lcktleV8iLCJyZWxheUV2ZW50XyIsImJvdW5kSGFuZGxlVG91Y2hNb3ZlXyIsImhhbmRsZVRvdWNoTW92ZV8iLCJlbXVsYXRlQ2xpY2tfIiwicG9pbnRlckV2ZW50IiwibmV3RXZlbnQiLCJjbGVhclRpbWVvdXQiLCJ1cGRhdGVBY3RpdmVQb2ludGVyc18iLCJwb2ludGVySWQiLCJoYW5kbGVQb2ludGVyVXBfIiwiaXNNb3VzZUFjdGlvbkJ1dHRvbl8iLCJidXR0b24iLCJkb2MiLCJnZXRPd25lckRvY3VtZW50IiwiaGFuZGxlUG9pbnRlck1vdmVfIiwiZ2V0Um9vdE5vZGUiLCJpc01vdmluZ18iLCJjYW5jZWxhYmxlIiwiY2xpZW50WCIsImNsaWVudFkiLCJEUk9QIiwiUHJpb3JpdHlRdWV1ZSIsInByaW9yaXR5RnVuY3Rpb24iLCJrZXlGdW5jdGlvbiIsInByaW9yaXR5RnVuY3Rpb25fIiwia2V5RnVuY3Rpb25fIiwiZWxlbWVudHNfIiwicHJpb3JpdGllc18iLCJxdWV1ZWRFbGVtZW50c18iLCJkZXF1ZXVlIiwiZWxlbWVudHMiLCJwcmlvcml0aWVzIiwic2lmdFVwXyIsImVsZW1lbnRLZXkiLCJwcmlvcml0eSIsInNpZnREb3duXyIsImdldENvdW50IiwiZ2V0TGVmdENoaWxkSW5kZXhfIiwiZ2V0UmlnaHRDaGlsZEluZGV4XyIsImdldFBhcmVudEluZGV4XyIsImhlYXBpZnlfIiwiaXNFbXB0eSIsImlzUXVldWVkIiwiY291bnQiLCJzdGFydEluZGV4IiwibEluZGV4IiwickluZGV4Iiwic21hbGxlckNoaWxkSW5kZXgiLCJwYXJlbnRJbmRleCIsInJlcHJpb3JpdGl6ZSIsIlRpbGVRdWV1ZSIsInRpbGVQcmlvcml0eUZ1bmN0aW9uIiwidGlsZUNoYW5nZUNhbGxiYWNrIiwiYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyIsImhhbmRsZVRpbGVDaGFuZ2UiLCJ0aWxlQ2hhbmdlQ2FsbGJhY2tfIiwidGlsZXNMb2FkaW5nXyIsInRpbGVzTG9hZGluZ0tleXNfIiwiYWRkZWQiLCJnZXRUaWxlc0xvYWRpbmciLCJ0aWxlS2V5IiwibG9hZE1vcmVUaWxlcyIsIm1heFRvdGFsTG9hZGluZyIsIm1heE5ld0xvYWRzIiwibmV3TG9hZHMiLCJoYXNBcmVhIiwidG9TaXplIiwiUGx1Z2dhYmxlTWFwIiwib3B0aW9uc0ludGVybmFsIiwia2V5Ym9hcmRFdmVudFRhcmdldCIsImdldEVsZW1lbnRCeUlkIiwiY29udHJvbHMiLCJpbnRlcmFjdGlvbnMiLCJvdmVybGF5cyIsImxheWVyR3JvdXAiLCJ2aWV3IiwiY3JlYXRlT3B0aW9uc0ludGVybmFsIiwiYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfIiwiaGFuZGxlQnJvd3NlckV2ZW50IiwibWF4VGlsZXNMb2FkaW5nXyIsIm1heFRpbGVzTG9hZGluZyIsInBpeGVsUmF0aW9fIiwicG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfIiwiYW5pbWF0aW9uRGVsYXlLZXlfIiwiYW5pbWF0aW9uRGVsYXlfIiwicmVuZGVyRnJhbWVfIiwiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fIiwicGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fIiwiZnJhbWVJbmRleF8iLCJmcmFtZVN0YXRlXyIsInByZXZpb3VzRXh0ZW50XyIsInZpZXdQcm9wZXJ0eUxpc3RlbmVyS2V5XyIsInZpZXdDaGFuZ2VMaXN0ZW5lcktleV8iLCJsYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfIiwidmlld3BvcnRfIiwib3ZlcmZsb3ciLCJvdmVybGF5Q29udGFpbmVyXyIsInBvaW50ZXJFdmVudHMiLCJvdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XyIsIm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfIiwia2V5Ym9hcmRFdmVudFRhcmdldF8iLCJrZXlIYW5kbGVyS2V5c18iLCJvdmVybGF5c18iLCJvdmVybGF5SWRJbmRleF8iLCJoYW5kbGVSZXNpemVfIiwicG9zdFJlbmRlckZ1bmN0aW9uc18iLCJ0aWxlUXVldWVfIiwiZ2V0VGlsZVByaW9yaXR5IiwiaGFuZGxlVGlsZUNoYW5nZV8iLCJNYXBQcm9wZXJ0eSIsImhhbmRsZUxheWVyR3JvdXBDaGFuZ2VkXyIsImhhbmRsZVZpZXdDaGFuZ2VkXyIsImhhbmRsZVNpemVDaGFuZ2VkXyIsImhhbmRsZVRhcmdldENoYW5nZWRfIiwiY29udHJvbCIsImludGVyYWN0aW9uIiwiYWRkT3ZlcmxheUludGVybmFsXyIsImdldElkIiwiYWRkQ29udHJvbCIsImdldENvbnRyb2xzIiwiYWRkSW50ZXJhY3Rpb24iLCJnZXRJbnRlcmFjdGlvbnMiLCJhZGRMYXllciIsImdldExheWVyR3JvdXAiLCJhZGRPdmVybGF5Iiwib3ZlcmxheSIsImdldE92ZXJsYXlzIiwic2V0VGFyZ2V0IiwiZm9yRWFjaEZlYXR1cmVBdFBpeGVsIiwiZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsIiwiZ2V0RmVhdHVyZXNBdFBpeGVsIiwiZmVhdHVyZXMiLCJoYXNGZWF0dXJlQXRQaXhlbCIsImdldEV2ZW50Q29vcmRpbmF0ZSIsImdldEV2ZW50Q29vcmRpbmF0ZUludGVybmFsIiwidmlld3BvcnRQb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImV2ZW50UG9zaXRpb24iLCJjaGFuZ2VkVG91Y2hlcyIsInRvcCIsImdldFRhcmdldCIsImdldFRhcmdldEVsZW1lbnQiLCJnZXRWaWV3IiwiZ2V0T3ZlcmxheUJ5SWQiLCJnZXRMb2FkaW5nIiwibG9hZGluZyIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGUiLCJ2aWV3Q29vcmRpbmF0ZSIsImdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCIsImdldE92ZXJsYXlDb250YWluZXIiLCJnZXRPdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50IiwidGFyZ2V0RWxlbWVudCIsIm93bmVyRG9jdW1lbnQiLCJ0aWxlQ2VudGVyIiwiYnJvd3NlckV2ZW50IiwibWFwQnJvd3NlckV2ZW50IiwiaGFuZGxlTWFwQnJvd3NlckV2ZW50Iiwicm9vdE5vZGUiLCJkb2N1bWVudEVsZW1lbnQiLCJpbnRlcmFjdGlvbnNBcnJheSIsImdldEFjdGl2ZSIsImhhbmRsZVBvc3RSZW5kZXIiLCJoaW50cyIsInZpZXdIaW50cyIsImxvd09uRnJhbWVCdWRnZXQiLCJ1cGRhdGVTaXplIiwiaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8iLCJ1cGRhdGVWaWV3cG9ydFNpemVfIiwiaXNSZW5kZXJlZCIsInJlbmRlclN5bmMiLCJyZW1vdmVDb250cm9sIiwicmVtb3ZlSW50ZXJhY3Rpb24iLCJyZW1vdmVMYXllciIsInJlbW92ZU92ZXJsYXkiLCJwcmV2aW91c0ZyYW1lU3RhdGUiLCJkZWNsdXR0ZXJUcmVlIiwiTWFwRXZlbnRUeXBlIiwic2V0TGF5ZXJHcm91cCIsInNldFZpZXciLCJjb21wdXRlZFN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsIm9mZnNldFdpZHRoIiwicGFyc2VGbG9hdCIsIm9mZnNldEhlaWdodCIsInBhcnNlSW50IiwiQ29udHJvbCIsInRhcmdldF8iLCJsaXN0ZW5lcktleXMiLCJtYXBFdmVudCIsIkF0dHJpYnV0aW9uIiwidWxFbGVtZW50XyIsImNvbGxhcHNlZF8iLCJjb2xsYXBzZWQiLCJ1c2VyQ29sbGFwc2VkXyIsIm92ZXJyaWRlQ29sbGFwc2libGVfIiwiY29sbGFwc2libGUiLCJjb2xsYXBzaWJsZV8iLCJ0aXBMYWJlbCIsImV4cGFuZENsYXNzTmFtZSIsImNvbGxhcHNlTGFiZWwiLCJjb2xsYXBzZUNsYXNzTmFtZSIsImNvbGxhcHNlTGFiZWxfIiwidGV4dENvbnRlbnQiLCJsYWJlbCIsImxhYmVsXyIsImFjdGl2ZUxhYmVsIiwidG9nZ2xlQnV0dG9uXyIsInNldEF0dHJpYnV0ZSIsInRpdGxlIiwiaGFuZGxlQ2xpY2tfIiwiY3NzQ2xhc3NlcyIsInJlbmRlcmVkQXR0cmlidXRpb25zXyIsImNvbGxlY3RTb3VyY2VBdHRyaWJ1dGlvbnNfIiwibG9va3VwIiwidmlzaWJsZUF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uR2V0dGVyIiwiZ2V0QXR0cmlidXRpb25zIiwiYXR0cmlidXRpb25zIiwiZ2V0QXR0cmlidXRpb25zQ29sbGFwc2libGUiLCJzZXRDb2xsYXBzaWJsZSIsInVwZGF0ZUVsZW1lbnRfIiwibGFzdENoaWxkIiwicmVtb3ZlQ2hpbGRyZW4iLCJpbm5lckhUTUwiLCJoYW5kbGVUb2dnbGVfIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0Q29sbGFwc2libGUiLCJzZXRDb2xsYXBzZWQiLCJnZXRDb2xsYXBzZWQiLCJSb3RhdGUiLCJjb21wYXNzQ2xhc3NOYW1lIiwiY2FsbFJlc2V0Tm9ydGhfIiwicmVzZXROb3J0aCIsImR1cmF0aW9uXyIsImF1dG9IaWRlXyIsImF1dG9IaWRlIiwicm90YXRpb25fIiwicmVzZXROb3J0aF8iLCJab29tIiwiem9vbUluQ2xhc3NOYW1lIiwiem9vbU91dENsYXNzTmFtZSIsInpvb21JbkxhYmVsIiwiem9vbU91dExhYmVsIiwiem9vbUluVGlwTGFiZWwiLCJ6b29tT3V0VGlwTGFiZWwiLCJpbkVsZW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsIm91dEVsZW1lbnQiLCJ6b29tQnlEZWx0YV8iLCJjdXJyZW50Wm9vbSIsIm5ld1pvb20iLCJ6b29tQnlEZWx0YSIsIkludGVyYWN0aW9uIiwic2V0QWN0aXZlIiwiYWN0aXZlIiwiRG91YmxlQ2xpY2tab29tIiwiZGVsdGFfIiwic3RvcEV2ZW50Iiwic2hpZnRLZXkiLCJQb2ludGVySW50ZXJhY3Rpb24iLCJoYW5kbGVEb3duRXZlbnQiLCJoYW5kbGVEcmFnRXZlbnQiLCJoYW5kbGVNb3ZlRXZlbnQiLCJoYW5kbGVVcEV2ZW50Iiwic3RvcERvd24iLCJoYW5kbGluZ0Rvd25VcFNlcXVlbmNlIiwidHJhY2tlZFBvaW50ZXJzXyIsInRhcmdldFBvaW50ZXJzIiwiZ2V0UG9pbnRlckNvdW50IiwidXBkYXRlVHJhY2tlZFBvaW50ZXJzXyIsImhhbmRsZWRVcCIsImhhbmRsZWQiLCJpc1BvaW50ZXJEcmFnZ2luZ0V2ZW50IiwiY29uZGl0aW9ucyIsInBhc3MiLCJhbHRTaGlmdEtleXNPbmx5IiwiYWx0S2V5IiwibWV0YUtleSIsImN0cmxLZXkiLCJmb2N1c1dpdGhUYWJpbmRleCIsImhhc0F0dHJpYnV0ZSIsImFjdGl2ZUVsZW1lbnQiLCJhbHdheXMiLCJtb3VzZUFjdGlvbkJ1dHRvbiIsIm5vTW9kaWZpZXJLZXlzIiwic2hpZnRLZXlPbmx5IiwidGFyZ2V0Tm90RWRpdGFibGUiLCJ0YWdOYW1lIiwibW91c2VPbmx5IiwicG9pbnRlclR5cGUiLCJwcmltYXJ5QWN0aW9uIiwiaXNQcmltYXJ5IiwiRHJhZ1BhbiIsImtpbmV0aWNfIiwia2luZXRpYyIsImxhc3RDZW50cm9pZCIsImxhc3RQb2ludGVyc0NvdW50XyIsInBhbm5pbmdfIiwiY29uZGl0aW9uIiwiY29uZGl0aW9uXyIsIm9uRm9jdXNPbmx5Iiwibm9LaW5ldGljXyIsImNlbnRyb2lkIiwidXBkYXRlIiwiYmVnaW4iLCJnZXRBbmdsZSIsImNlbnRlcnB4IiwiUG9pbnRlciIsIkRyYWdSb3RhdGUiLCJsYXN0QW5nbGVfIiwiUmVuZGVyQm94IiwiZ2VvbWV0cnlfIiwic3RhcnRQaXhlbF8iLCJlbmRQaXhlbF8iLCJyZW5kZXJfIiwic3RhcnRQaXhlbCIsImVuZFBpeGVsIiwicHgiLCJzZXRQaXhlbHMiLCJjcmVhdGVPclVwZGF0ZUdlb21ldHJ5IiwiZ2V0R2VvbWV0cnkiLCJEcmFnQm94RXZlbnQiLCJEcmFnQm94IiwiYm94XyIsIm1pbkFyZWFfIiwibWluQXJlYSIsIm9uQm94RW5kIiwiYm94RW5kQ29uZGl0aW9uXyIsImJveEVuZENvbmRpdGlvbiIsImRlZmF1bHRCb3hFbmRDb25kaXRpb24iLCJjb21wbGV0ZUJveCIsIkRyYWdab29tIiwib3V0XyIsIm91dCIsImZhY3RvciIsIktleWJvYXJkUGFuIiwiZGVmYXVsdENvbmRpdGlvbl8iLCJwaXhlbERlbHRhXyIsInBpeGVsRGVsdGEiLCJrZXlFdmVudCIsImtleUNvZGUiLCJtYXBVbml0c0RlbHRhIiwicGFuIiwiS2V5Ym9hcmRab29tIiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0IiwiS2luZXRpYyIsImRlY2F5IiwibWluVmVsb2NpdHkiLCJkZWxheSIsImRlY2F5XyIsIm1pblZlbG9jaXR5XyIsImRlbGF5XyIsInBvaW50c18iLCJhbmdsZV8iLCJpbml0aWFsVmVsb2NpdHlfIiwibGFzdEluZGV4IiwiZmlyc3RJbmRleCIsIk1vZGUiLCJNb3VzZVdoZWVsWm9vbSIsInRvdGFsRGVsdGFfIiwibGFzdERlbHRhXyIsInRpbWVvdXRfIiwidGltZW91dCIsInVzZUFuY2hvcl8iLCJ1c2VBbmNob3IiLCJjb25zdHJhaW5SZXNvbHV0aW9uXyIsImxhc3RBbmNob3JfIiwic3RhcnRUaW1lXyIsInRpbWVvdXRJZF8iLCJtb2RlXyIsInRyYWNrcGFkRXZlbnRHYXBfIiwidHJhY2twYWRUaW1lb3V0SWRfIiwiZGVsdGFQZXJab29tXyIsImVuZEludGVyYWN0aW9uXyIsIndoZWVsRXZlbnQiLCJkZWx0YU1vZGUiLCJXaGVlbEV2ZW50IiwiRE9NX0RFTFRBX1BJWEVMIiwiRE9NX0RFTFRBX0xJTkUiLCJ0aW1lTGVmdCIsImhhbmRsZVdoZWVsWm9vbV8iLCJzZXRNb3VzZUFuY2hvciIsIlBpbmNoUm90YXRlIiwicG9pbnRlck9wdGlvbnMiLCJhbmNob3JfIiwicm90YXRpbmdfIiwicm90YXRpb25EZWx0YV8iLCJ0aHJlc2hvbGRfIiwidGhyZXNob2xkIiwicm90YXRpb25EZWx0YSIsInRvdWNoMCIsInRvdWNoMSIsIlBpbmNoWm9vbSIsImxhc3REaXN0YW5jZV8iLCJsYXN0U2NhbGVEZWx0YV8iLCJzY2FsZURlbHRhIiwiem9vbU9wdGlvbnMiLCJyb3RhdGVPcHRpb25zIiwiYXR0cmlidXRpb24iLCJhdHRyaWJ1dGlvbk9wdGlvbnMiLCJhbHRTaGlmdERyYWdSb3RhdGUiLCJkb3VibGVDbGlja1pvb20iLCJ6b29tRGVsdGEiLCJ6b29tRHVyYXRpb24iLCJkcmFnUGFuIiwicGluY2hSb3RhdGUiLCJwaW5jaFpvb20iLCJrZXlib2FyZCIsIm1vdXNlV2hlZWxab29tIiwic2hpZnREcmFnWm9vbSIsIkNvbXBvc2l0ZSIsIkNvbXBvc2l0ZUNvbnRyb2wiLCJjaGlsZENvbnRyb2xzIiwib3B0cyIsInN1cGVyIiwiQ29udGFpbmVyIiwic3R5bGVDbGFzcyIsIkdlb2xvY2F0aW9uRXJyb3IiLCJHZW9sb2NhdGlvbiIsInBvc2l0aW9uXyIsInRyYW5zZm9ybV8iLCJ3YXRjaElkXyIsImhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyIsImhhbmRsZVRyYWNraW5nQ2hhbmdlZF8iLCJzZXRQcm9qZWN0aW9uIiwidHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmdPcHRpb25zIiwic2V0VHJhY2tpbmciLCJ0cmFja2luZyIsImdldFRyYWNraW5nIiwiZ2VvbG9jYXRpb24iLCJ3YXRjaFBvc2l0aW9uIiwicG9zaXRpb25DaGFuZ2VfIiwicG9zaXRpb25FcnJvcl8iLCJnZXRUcmFja2luZ09wdGlvbnMiLCJjbGVhcldhdGNoIiwiYWNjdXJhY3kiLCJhbHRpdHVkZSIsImFsdGl0dWRlQWNjdXJhY3kiLCJoZWFkaW5nIiwibG9uZ2l0dWRlIiwibGF0aXR1ZGUiLCJwcm9qZWN0ZWRQb3NpdGlvbiIsInNwZWVkIiwib3B0X24iLCJvcHRfc3BoZXJlUmFkaXVzIiwiY2lyY3VsYXIiLCJnZXRBY2N1cmFjeSIsImdldEFjY3VyYWN5R2VvbWV0cnkiLCJnZXRBbHRpdHVkZSIsImdldEFsdGl0dWRlQWNjdXJhY3kiLCJnZXRIZWFkaW5nIiwiZ2V0UG9zaXRpb24iLCJnZXRTcGVlZCIsIkJ1dHRvbiIsInRvb2x0aXBBc1RleHRFbGVtZW50IiwidW5pY29kZSIsImljb25DbGFzc05hbWUiLCJ0b29sdGlwIiwiYnV0dG9uQ29udGFpbmVyRWxlbWVudCIsImNvbnRhaW5lckNsYXNzTmFtZSIsImJ1dHRvbkVsZW1lbnQiLCJmcm9tQ29kZVBvaW50IiwiZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lIiwiYXBwZW5kIiwiZGl2RWxlbWVudCIsInNwYW5FbGVtZW50IiwiZ2V0QnV0dG9uIiwiaWNvbkVsZW1lbnQiLCJMb2NhdGlvblJldHJpZXZlZEV2ZW50IiwiUFJPSkVDVElPTiIsIkNPT1JESU5BVEVfRk9STUFUIiwiTW91c2VQb3NpdGlvbiIsImNvb3JkaW5hdGVGb3JtYXQiLCJzZXRDb29yZGluYXRlRm9ybWF0IiwicmVuZGVyT25Nb3VzZU91dCIsInBsYWNlaG9sZGVyIiwidW5kZWZpbmVkSFRNTCIsInBsYWNlaG9sZGVyXyIsInJlbmRlck9uTW91c2VPdXRfIiwicmVuZGVyZWRIVE1MXyIsIm1hcFByb2plY3Rpb25fIiwiZ2V0Q29vcmRpbmF0ZUZvcm1hdCIsImhhbmRsZU1vdXNlTW92ZSIsInVwZGF0ZUhUTUxfIiwiaGFuZGxlTW91c2VPdXQiLCJ2aWV3cG9ydCIsImZvcm1hdCIsImh0bWwiLCJESVNQTEFZX0RQSSIsIkxFQURJTkdfRElHSVRTIiwiT3ZlcnZpZXdNYXBFdmVudCIsIk92ZXJ2aWV3Iiwib3ZlcnZpZXdDb250YWluZXJFbGVtZW50IiwiZmlndXJlRWxlbWVudCIsIlNWR19DT0RFIiwib25PdmVydmlld0ltYWdlQ2xpY2siLCJzdmdFbGVtZW50IiwiYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiU1ZHX1dJRFRIIiwiU1ZHX0hFSUdIVCIsIkJBQ0tHUk9VTkRfQ09MT1IiLCJwcmVwZW5kIiwidXBkYXRlQ3Jvc3NoYWlyIiwiZ2V0T3ZlcnZpZXdQeEZyb21Mb25MYXQiLCJleGlzdGluZ0VsbXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZXhpc3RpbmdFbG0iLCJmcm9tIiwiZ2V0Q3Jvc3NoYWlyIiwiY3NzQ2xhc3MiLCJsaW5lIiwiY2FsY3VsYXRlUmVzb2x1dGlvbkZyb21XaWR0aCIsIm92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0IiwiY2xpY2tMb25MYXQiLCJnZXRMb25MYXRGcm9tT3ZlcnZpZXdQeCIsIm9QeCIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiU2hhcmUiLCJERUZBVUxUX1VOSUNPREUiLCJERUZBVUxUX1RPT0xUSVBfVEVYVCIsIlRpbGUiLCJpbnRlcmltVGlsZSIsInRyYW5zaXRpb25fIiwidHJhbnNpdGlvblN0YXJ0c18iLCJyZWxlYXNlIiwicmVmcmVzaEludGVyaW1DaGFpbiIsImdldFRpbGVDb29yZCIsIkltYWdlQmFzZSIsImdldFBpeGVsUmF0aW8iLCJsaXN0ZW5JbWFnZSIsImxvYWRIYW5kbGVyIiwiZXJyb3JIYW5kbGVyIiwiaW1nIiwicHJvbWlzZSIsImxpc3RlbmluZ18xIiwidGhlbiIsImNhdGNoIiwiSW1hZ2VXcmFwcGVyIiwiaW1hZ2VMb2FkRnVuY3Rpb24iLCJzcmNfIiwiaW1hZ2VfIiwidW5saXN0ZW5fIiwiaW1hZ2VMb2FkRnVuY3Rpb25fIiwiaGFuZGxlSW1hZ2VFcnJvcl8iLCJ1bmxpc3RlbkltYWdlXyIsImhhbmRsZUltYWdlTG9hZF8iLCJzZXRJbWFnZSIsIkltYWdlVGlsZSIsInRpbGVMb2FkRnVuY3Rpb24iLCJjcm9zc09yaWdpbl8iLCJ0aWxlTG9hZEZ1bmN0aW9uXyIsImN0eCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwibmF0dXJhbFdpZHRoIiwibmF0dXJhbEhlaWdodCIsIlRyaWFuZ3VsYXRpb24iLCJ0YXJnZXRQcm9qIiwidGFyZ2V0RXh0ZW50IiwibWF4U291cmNlRXh0ZW50IiwiZXJyb3JUaHJlc2hvbGQiLCJvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uIiwic291cmNlUHJval8iLCJ0YXJnZXRQcm9qXyIsInRyYW5zZm9ybUludkNhY2hlIiwidHJhbnNmb3JtSW52IiwidHJhbnNmb3JtSW52XyIsIm1heFNvdXJjZUV4dGVudF8iLCJlcnJvclRocmVzaG9sZFNxdWFyZWRfIiwidHJpYW5nbGVzXyIsIndyYXBzWEluU291cmNlXyIsImNhbldyYXBYSW5Tb3VyY2VfIiwic291cmNlV29ybGRXaWR0aF8iLCJ0YXJnZXRXb3JsZFdpZHRoXyIsImRlc3RpbmF0aW9uVG9wTGVmdCIsImRlc3RpbmF0aW9uVG9wUmlnaHQiLCJkZXN0aW5hdGlvbkJvdHRvbVJpZ2h0IiwiZGVzdGluYXRpb25Cb3R0b21MZWZ0Iiwic291cmNlVG9wTGVmdCIsInNvdXJjZVRvcFJpZ2h0Iiwic291cmNlQm90dG9tUmlnaHQiLCJzb3VyY2VCb3R0b21MZWZ0IiwibWF4U3ViZGl2aXNpb24iLCJhZGRRdWFkXyIsImxlZnRCb3VuZF8xIiwidHJpYW5nbGUiLCJuZXdUcmlhbmdsZSIsImFkZFRyaWFuZ2xlXyIsImFTcmMiLCJiU3JjIiwiY1NyYyIsImRTcmMiLCJzb3VyY2VRdWFkRXh0ZW50Iiwic291cmNlQ292ZXJhZ2VYIiwic291cmNlV29ybGRXaWR0aCIsIndyYXBzWCIsIm5lZWRzU3ViZGl2aXNpb24iLCJpc0Zpbml0ZSIsImlzTm90RmluaXRlIiwiY2VudGVyU3JjIiwiYmMiLCJiY1NyYyIsImRhIiwiZGFTcmMiLCJhYiIsImFiU3JjIiwiY2QiLCJjZFNyYyIsImNhbGN1bGF0ZVNvdXJjZUV4dGVudCIsImdldFRyaWFuZ2xlcyIsImJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyIsIklNQUdFX1NNT09USElOR19ESVNBQkxFRCIsImltYWdlU21vb3RoaW5nRW5hYmxlZCIsIm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkIiwiZHJhd1Rlc3RUcmlhbmdsZSIsInUxIiwidjEiLCJ1MiIsInYyIiwiY2xvc2VQYXRoIiwidmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmciLCJjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uIiwidGFyZ2V0TWV0ZXJzUGVyVW5pdCIsInNvdXJjZU1ldGVyc1BlclVuaXQiLCJzb3VyY2VFeHRlbnQiLCJjb21wZW5zYXRpb25GYWN0b3IiLCJSZXByb2pUaWxlIiwic291cmNlVGlsZUdyaWQiLCJ0YXJnZXRUaWxlR3JpZCIsIndyYXBwZWRUaWxlQ29vcmQiLCJnZXRUaWxlRnVuY3Rpb24iLCJvcHRfZXJyb3JUaHJlc2hvbGQiLCJvcHRfcmVuZGVyRWRnZXMiLCJvcHRfY29udGV4dE9wdGlvbnMiLCJyZW5kZXJFZGdlc18iLCJjb250ZXh0T3B0aW9uc18iLCJndXR0ZXJfIiwiY2FudmFzXyIsInNvdXJjZVRpbGVHcmlkXyIsInRhcmdldFRpbGVHcmlkXyIsIndyYXBwZWRUaWxlQ29vcmRfIiwic291cmNlVGlsZXNfIiwic291cmNlc0xpc3RlbmVyS2V5c18iLCJzb3VyY2VaXyIsIm1heFRhcmdldEV4dGVudCIsImxpbWl0ZWRUYXJnZXRFeHRlbnQiLCJzb3VyY2VQcm9qRXh0ZW50IiwiY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiIsImVycm9yVGhyZXNob2xkSW5QaXhlbHMiLCJ0cmlhbmd1bGF0aW9uXyIsInNvdXJjZVJhbmdlIiwic3JjWCIsInNyY1kiLCJyZXByb2plY3RfIiwic291cmNlcyIsImdldFRpbGVTaXplIiwidHJpYW5ndWxhdGlvbiIsInBpeGVsUm91bmQiLCJnbG9iYWxDb21wb3NpdGVPcGVyYXRpb24iLCJzb3VyY2VEYXRhRXh0ZW50IiwiY2FudmFzV2lkdGhJblVuaXRzIiwiY2FudmFzSGVpZ2h0SW5Vbml0cyIsInN0aXRjaENvbnRleHQiLCJzdGl0Y2hTY2FsZSIsInhQb3MiLCJ5UG9zIiwic3JjV2lkdGgiLCJzcmNIZWlnaHQiLCJ0YXJnZXRUb3BMZWZ0IiwidTAiLCJ2MCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WCIsInNvdXJjZU51bWVyaWNhbFNoaWZ0WSIsImFmZmluZUNvZWZzIiwibWF4Um93IiwibWF4RWwiLCJhYnNWYWx1ZSIsImNvZWYiLCJsIiwic29sdmVMaW5lYXJTeXN0ZW0iLCJpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nIiwidWQiLCJ2ZCIsInN0ZXAiLCJzdGVwcyIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwic3Ryb2tlIiwibGVmdFRvTG9hZF8xIiwic291cmNlTGlzdGVuS2V5XzEiLCJ1bmxpc3RlblNvdXJjZXNfIiwiTFJVQ2FjaGUiLCJvcHRfaGlnaFdhdGVyTWFyayIsImhpZ2hXYXRlck1hcmsiLCJjb3VudF8iLCJlbnRyaWVzXyIsIm9sZGVzdF8iLCJuZXdlc3RfIiwiY29udGFpbnNLZXkiLCJlbnRyeSIsInZhbHVlXyIsImtleV8iLCJuZXdlciIsIm9sZGVyIiwicGVla0xhc3QiLCJwZWVrTGFzdEtleSIsInBlZWtGaXJzdEtleSIsIm9wdF90aWxlQ29vcmQiLCJnZXRLZXlaWFkiLCJUaWxlQ2FjaGUiLCJwcnVuZUV4Y2VwdE5ld2VzdFoiLCJhZGFwdEF0dHJpYnV0aW9ucyIsImF0dHJpYnV0aW9uTGlrZSIsIlNvdXJjZSIsImF0dHJpYnV0aW9uc18iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZV8iLCJhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSIsIndyYXBYXyIsIndyYXBYIiwicmVmcmVzaCIsInNldEF0dHJpYnV0aW9ucyIsInRtcFRpbGVDb29yZCIsIlRpbGVHcmlkIiwiY29tcGFyZSIsImV2ZXJ5IiwiY3VycmVudFZhbCIsInJlcyIsIm9yaWdpbnMiLCJvcmlnaW5fIiwib3JpZ2luIiwib3JpZ2luc18iLCJ0aWxlU2l6ZXNfIiwidGlsZVNpemVzIiwidGlsZVNpemVfIiwidGlsZVNpemUiLCJmdWxsVGlsZVJhbmdlc18iLCJ0bXBTaXplXyIsInRtcEV4dGVudF8iLCJzaXplcyIsInJlc3RyaWN0ZWRUaWxlUmFuZ2UiLCJjYWxjdWxhdGVUaWxlUmFuZ2VzXyIsImZvckVhY2hUaWxlQ29vcmQiLCJvcHRfdGlsZVJhbmdlIiwidGlsZUNvb3JkRXh0ZW50IiwiZ2V0T3JpZ2luIiwiZ2V0VGlsZVJhbmdlRm9yVGlsZUNvb3JkQW5kWiIsInRpbGVDb29yZFoiLCJ0aWxlQ29vcmRYIiwidGlsZUNvb3JkWSIsImdldFRpbGVSYW5nZUV4dGVudCIsImdldFRpbGVDb29yZEZvclhZQW5kWl8iLCJnZXRUaWxlQ29vcmRGb3JDb29yZEFuZFJlc29sdXRpb24iLCJnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fIiwicmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSIsImFkanVzdFgiLCJhZGp1c3RZIiwieEZyb21PcmlnaW4iLCJ5RnJvbU9yaWdpbiIsImdldFRpbGVDb29yZFJlc29sdXRpb24iLCJnZXRGdWxsVGlsZVJhbmdlIiwiZnVsbFRpbGVSYW5nZXMiLCJnZXRGb3JQcm9qZWN0aW9uIiwib3B0X21heFpvb20iLCJvcHRfdGlsZVNpemUiLCJvcHRfY29ybmVyIiwicmVzb2x1dGlvbnNGcm9tRXh0ZW50IiwiY3JlYXRlRm9yRXh0ZW50IiwiZXh0ZW50RnJvbVByb2plY3Rpb24iLCJjcmVhdGVGb3JQcm9qZWN0aW9uIiwib3B0X21heFJlc29sdXRpb24iLCJoYWxmIiwiVGlsZVNvdXJjZSIsIm9wYXF1ZV8iLCJvcGFxdWUiLCJ0aWxlUGl4ZWxSYXRpb18iLCJ0aWxlQ2FjaGUiLCJjYWNoZVNpemUiLCJ0bXBTaXplIiwidGlsZU9wdGlvbnMiLCJnZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwibG9hZGVkIiwic2V0S2V5IiwiZ2V0VGlsZUdyaWQiLCJnZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24iLCJvcHRfcHJvamVjdGlvbiIsIndpdGhpbkV4dGVudEFuZFoiLCJUaWxlU291cmNlRXZlbnQiLCJjcmVhdGVGcm9tVGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsInpSZWdFeCIsInhSZWdFeCIsInlSZWdFeCIsImRhc2hZUmVnRXgiLCJyYW5nZSIsIlVybFRpbGUiLCJnZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8iLCJ0aWxlVXJsRnVuY3Rpb24iLCJ1cmxzIiwic2V0VXJscyIsInVybCIsInNldFVybCIsInRpbGVMb2FkaW5nS2V5c18iLCJnZXRUaWxlTG9hZEZ1bmN0aW9uIiwiZ2V0VGlsZVVybEZ1bmN0aW9uIiwiZ2V0UHJvdG90eXBlT2YiLCJnZXRVcmxzIiwic2V0VGlsZUxvYWRGdW5jdGlvbiIsInNldFRpbGVVcmxGdW5jdGlvbiIsIm1hdGNoIiwiZXhlYyIsInN0YXJ0Q2hhckNvZGUiLCJzdG9wQ2hhckNvZGUiLCJmcm9tQ2hhckNvZGUiLCJzdG9wXzEiLCJleHBhbmRVcmwiLCJ0ZW1wbGF0ZXMiLCJ0aWxlVXJsRnVuY3Rpb25zIiwiY3JlYXRlRnJvbVRpbGVVcmxGdW5jdGlvbnMiLCJjcmVhdGVGcm9tVGVtcGxhdGVzIiwiZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24iLCJpbWFnZVRpbGUiLCJUaWxlSW1hZ2UiLCJ0aWxlQ2xhc3MiLCJ0aWxlQ2FjaGVGb3JQcm9qZWN0aW9uIiwidGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfIiwicmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQiLCJpbWFnZVNtb290aGluZyIsInJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXyIsInVzZWRUaWxlQ2FjaGUiLCJnZXRHdXR0ZXIiLCJKU09OIiwic3RyaW5naWZ5IiwidGhpc1Byb2oiLCJwcm9qS2V5IiwiY3JlYXRlVGlsZV8iLCJ1cmxUaWxlQ29vcmQiLCJ0aWxlVXJsIiwibmV3VGlsZSIsImdldFRpbGVJbnRlcm5hbCIsInNldFJlbmRlclJlcHJvamVjdGlvbkVkZ2VzIiwic2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uIiwidGlsZWdyaWQiLCJwcm9qIiwiWFlaIiwieHl6T3B0aW9ucyIsImdyaWRPcHRpb25zIiwiY3JlYXRlWFlaIiwiVkFSSUFOVFMiLCJnZW9sYW5kYmFzZW1hcCIsImJtYXBncmF1IiwiYm1hcG9ydGhvZm90bzMwY20iLCJibWFwZ2VsYWVuZGUiLCJibWFwb2JlcmZsYWVjaGUiLCJibWFwb3ZlcmxheSIsIm91dHB1dFRleHRhcmVhIiwiZ2VvbG9jYXRlQ3RybCIsImdlb0xvY2F0aW9uT3B0aW9ucyIsIl9nZW9Mb2NhdGlvbiIsImdlb0xvY2F0aW9uIiwidmFyaWFudCIsIl9taW5XaWR0aCIsIm1pbldpZHRoIiwicmVuZGVyZWRWaXNpYmxlIiwicmVuZGVyZWRXaWR0aCIsInJlbmRlcmVkU1ZHIiwiZHBpIiwidXBkYXRlRWxlbWVudCIsInBvaW50UmVzb2x1dGlvblVuaXRzIiwibm9taW5hbENvdW50Iiwic3VmZml4IiwiZGVjaW1hbENvdW50IiwiZGVjaW1hbCIsImdlbmVyYXRlZFNWRyIsImdldEdlbmVyYXRlZFNWRyIsInRvRml4ZWQiLCJ0eHQiLCJzdmciLCJyZWN0IiwidGV4dCIsIm9wdF9mcmFjdGlvbkRpZ2l0cyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUFRLGFBQWVELElBRXZCRCxFQUFLLGFBQWVDLElBUnRCLENBU0dLLE1BQU0sV0FDVCxNLG1CQ1RBLEksS0NBd0IsQ0FBQ0osSUFDSCxvQkFBWEssUUFBMEJBLE9BQU9DLGFBQzFDQyxPQUFPQyxlQUFlUixFQUFTSyxPQUFPQyxZQUFhLENBQUVHLE1BQU8sV0FFN0RGLE9BQU9DLGVBQWVSLEVBQVMsYUFBYyxDQUFFUyxPQUFPLEssSUMrRHZELFFBdkQrQixXQUkzQixTQUFTQyxFQUFVQyxHQUlmQyxLQUFLQyxtQkFJTEQsS0FBS0UsaUJBTUxGLEtBQUtELEtBQU9BLEVBTVpDLEtBQUtHLE9BQVMsS0FpQmxCLE9BVkFMLEVBQVVNLFVBQVVDLGVBQWlCLFdBQ2pDTCxLQUFLRSxrQkFBbUIsR0FNNUJKLEVBQVVNLFVBQVVFLGdCQUFrQixXQUNsQ04sS0FBS0Msb0JBQXFCLEdBRXZCSCxFQXpDbUIsR0NQOUIsRUFNb0IsaUJDb0JwQixFQXpCZ0MsV0FDNUIsU0FBU1MsSUFNTFAsS0FBS1EsVUFBVyxFQWdCcEIsT0FYQUQsRUFBV0gsVUFBVUssUUFBVSxXQUN0QlQsS0FBS1EsV0FDTlIsS0FBS1EsVUFBVyxFQUNoQlIsS0FBS1Usb0JBT2JILEVBQVdILFVBQVVNLGdCQUFrQixhQUNoQ0gsRUF2Qm9CLEdDb0N4QixTQUFTSSxFQUEwQkMsRUFBR0MsR0FDekMsT0FBT0QsRUFBSUMsRUFBSSxFQUFJRCxFQUFJQyxHQUFLLEVBQUksRUFpQzdCLFNBQVNDLEVBQWtCQyxFQUFLWixFQUFRYSxHQUMzQyxJQUFJQyxFQUFJRixFQUFJRyxPQUNaLEdBQUlILEVBQUksSUFBTVosRUFDVixPQUFPLEVBRU4sR0FBSUEsR0FBVVksRUFBSUUsRUFBSSxHQUN2QixPQUFPQSxFQUFJLEVBR1gsSUFBSUUsT0FBSSxFQUNSLEdBQUlILEVBQVksR0FDWixJQUFLRyxFQUFJLEVBQUdBLEVBQUlGLElBQUtFLEVBQ2pCLEdBQUlKLEVBQUlJLEdBQUtoQixFQUNULE9BQU9nQixFQUFJLE9BSWxCLEdBQUlILEVBQVksR0FDakIsSUFBS0csRUFBSSxFQUFHQSxFQUFJRixJQUFLRSxFQUNqQixHQUFJSixFQUFJSSxJQUFNaEIsRUFDVixPQUFPZ0IsT0FLZixJQUFLQSxFQUFJLEVBQUdBLEVBQUlGLElBQUtFLEVBQUcsQ0FDcEIsR0FBSUosRUFBSUksSUFBTWhCLEVBQ1YsT0FBT2dCLEVBRU4sR0FBSUosRUFBSUksR0FBS2hCLEVBQ2QsTUFBeUIsbUJBQWRhLEVBQ0hBLEVBQVViLEVBQVFZLEVBQUlJLEVBQUksR0FBSUosRUFBSUksSUFBTSxFQUNqQ0EsRUFBSSxFQUdKQSxFQUdOSixFQUFJSSxFQUFJLEdBQUtoQixFQUFTQSxFQUFTWSxFQUFJSSxHQUNqQ0EsRUFBSSxFQUdKQSxFQUt2QixPQUFPRixFQUFJLEVBc0JaLFNBQVNHLEVBQU9MLEVBQUtNLEdBR3hCLElBRkEsSUFBSUMsRUFBWUMsTUFBTUMsUUFBUUgsR0FBUUEsRUFBTyxDQUFDQSxHQUMxQ0gsRUFBU0ksRUFBVUosT0FDZEMsRUFBSSxFQUFHQSxFQUFJRCxFQUFRQyxJQUN4QkosRUFBSUEsRUFBSUcsUUFBVUksRUFBVUgsR0F1QzdCLFNBQVNNLEVBQU9DLEVBQU1DLEdBQ3pCLElBQUlDLEVBQU9GLEVBQUtSLE9BQ2hCLEdBQUlVLElBQVNELEVBQUtULE9BQ2QsT0FBTyxFQUVYLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJUyxFQUFNVCxJQUN0QixHQUFJTyxFQUFLUCxLQUFPUSxFQUFLUixHQUNqQixPQUFPLEVBR2YsT0FBTyxFQy9MSixTQUFTVSxJQUNaLE9BQU8sRUFNSixTQUFTLElBQ1osT0FBTyxFQU9KLFNBQVNDLEtDWFQsSUFBSSxFQUFrQyxtQkFBbEJuQyxPQUFPb0MsT0FDNUJwQyxPQUFPb0MsT0FDUCxTQUFVNUIsRUFBUTZCLEdBQ2hCLEdBQUk3QixRQUNBLE1BQU0sSUFBSThCLFVBQVUsOENBR3hCLElBREEsSUFBSUMsRUFBU3ZDLE9BQU9RLEdBQ1hnQixFQUFJLEVBQUdnQixFQUFLQyxVQUFVbEIsT0FBUUMsRUFBSWdCLElBQU1oQixFQUFHLENBQ2hELElBQUlrQixFQUFTRCxVQUFVakIsR0FDdkIsR0FBSWtCLFFBQ0EsSUFBSyxJQUFJQyxLQUFPRCxFQUNSQSxFQUFPRSxlQUFlRCxLQUN0QkosRUFBT0ksR0FBT0QsRUFBT0MsSUFLckMsT0FBT0osR0FNUixTQUFTTSxFQUFNQyxHQUNsQixJQUFLLElBQUlDLEtBQVlELFNBQ1ZBLEVBQU9DLEdBV2YsSUMvQ0NDLEVEK0NHQyxFQUFxQyxtQkFBbEJqRCxPQUFPa0QsT0FDL0JsRCxPQUFPa0QsT0FDUCxTQUFVSixHQUNSLElBQUlJLEVBQVMsR0FDYixJQUFLLElBQUlILEtBQVlELEVBQ2pCSSxFQUFPQyxLQUFLTCxFQUFPQyxJQUV2QixPQUFPRyxHQ3ZEWEUsR0FDSUosRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUVyQixTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsS0FnTHZGLFFBcEo0QixTQUFVRyxHQUtsQyxTQUFTQyxFQUFPQyxHQUNaLElBQUlDLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQXFCakMsT0FoQkE0RCxFQUFNQyxhQUFlRixFQUtyQkMsRUFBTUUsaUJBQW1CLEtBS3pCRixFQUFNRyxhQUFlLEtBS3JCSCxFQUFNSSxXQUFhLEtBQ1pKLEVBdUhYLE9BakpBYixFQUFVVyxFQUFRRCxHQWdDbEJDLEVBQU90RCxVQUFVNkQsaUJBQW1CLFNBQVVsRSxFQUFNbUUsR0FDaEQsR0FBS25FLEdBQVNtRSxFQUFkLENBR0EsSUFBSUMsRUFBWW5FLEtBQUtnRSxhQUFlaEUsS0FBS2dFLFdBQWEsSUFDbERJLEVBQW1CRCxFQUFVcEUsS0FBVW9FLEVBQVVwRSxHQUFRLEtBQ2pCLElBQXhDcUUsRUFBaUJDLFFBQVFILElBQ3pCRSxFQUFpQnRCLEtBQUtvQixLQWE5QlIsRUFBT3RELFVBQVVrRSxjQUFnQixTQUFVQyxHQUV2QyxJQUFJQyxFQUF1QixpQkFBVkQsRUFBcUIsSUFBSUUsRUFBTUYsR0FBU0EsRUFDckR4RSxFQUFPeUUsRUFBSXpFLEtBQ1Z5RSxFQUFJckUsU0FDTHFFLEVBQUlyRSxPQUFTSCxLQUFLNkQsY0FBZ0I3RCxNQUV0QyxJQUNJMEUsRUFEQVAsRUFBWW5FLEtBQUtnRSxZQUFjaEUsS0FBS2dFLFdBQVdqRSxHQUVuRCxHQUFJb0UsRUFBVyxDQUNYLElBQUlRLEVBQWMzRSxLQUFLK0QsZUFBaUIvRCxLQUFLK0QsYUFBZSxJQUN4RGEsRUFBa0I1RSxLQUFLOEQsbUJBQXFCOUQsS0FBSzhELGlCQUFtQixJQUNsRS9ELEtBQVE0RSxJQUNWQSxFQUFZNUUsR0FBUSxFQUNwQjZFLEVBQWdCN0UsR0FBUSxLQUUxQjRFLEVBQVk1RSxHQUNkLElBQUssSUFBSW9CLEVBQUksRUFBR2dCLEVBQUtnQyxFQUFVakQsT0FBUUMsRUFBSWdCLElBQU1oQixFQU83QyxJQUFrQixLQUxkdUQsRUFEQSxnQkFBaUJQLEVBQVVoRCxHQUN1Q2dELEVBQVVoRCxHQUFJMEQsWUFBWUwsR0FHeEJMLEVBQVVoRCxHQUFJaUMsS0FBS3BELEtBQU13RSxLQUV0RUEsRUFBSXZFLG1CQUFvQixDQUMvQ3lFLEdBQVksRUFDWixNQUlSLEtBREVDLEVBQVk1RSxHQUNZLElBQXRCNEUsRUFBWTVFLEdBQWEsQ0FDekIsSUFBSStFLEVBQUtGLEVBQWdCN0UsR0FFekIsV0FETzZFLEVBQWdCN0UsR0FDaEIrRSxLQUNIOUUsS0FBSytFLG9CQUFvQmhGLEVBQU0rQixVQUU1QjZDLEVBQVk1RSxHQUV2QixPQUFPMkUsSUFNZmhCLEVBQU90RCxVQUFVTSxnQkFBa0IsV0FDL0JWLEtBQUtnRSxZQUFjeEIsRUFBTXhDLEtBQUtnRSxhQVNsQ04sRUFBT3RELFVBQVU0RSxhQUFlLFNBQVVqRixHQUN0QyxPQUFRQyxLQUFLZ0UsWUFBY2hFLEtBQUtnRSxXQUFXakUsU0FBVWtGLEdBT3pEdkIsRUFBT3RELFVBQVU4RSxZQUFjLFNBQVVDLEdBQ3JDLFFBQUtuRixLQUFLZ0UsYUFHSG1CLEVBQ0RBLEtBQVluRixLQUFLZ0UsV0FDakJyRSxPQUFPeUYsS0FBS3BGLEtBQUtnRSxZQUFZOUMsT0FBUyxJQU1oRHdDLEVBQU90RCxVQUFVMkUsb0JBQXNCLFNBQVVoRixFQUFNbUUsR0FDbkQsSUFBSUMsRUFBWW5FLEtBQUtnRSxZQUFjaEUsS0FBS2dFLFdBQVdqRSxHQUNuRCxHQUFJb0UsRUFBVyxDQUNYLElBQUlrQixFQUFRbEIsRUFBVUUsUUFBUUgsSUFDZixJQUFYbUIsSUFDSXJGLEtBQUs4RCxrQkFBb0IvRCxLQUFRQyxLQUFLOEQsa0JBRXRDSyxFQUFVa0IsR0FBU3ZELElBQ2pCOUIsS0FBSzhELGlCQUFpQi9ELEtBR3hCb0UsRUFBVW1CLE9BQU9ELEVBQU8sR0FDQyxJQUFyQmxCLEVBQVVqRCxlQUNIbEIsS0FBS2dFLFdBQVdqRSxPQU1wQzJELEVBbEpnQixDQW1KekIsR0NwTEYsRUFNWSxTQU5aLEVBWVcsUUFaWCxFQWVpQixjQWZqQixFQWdCVyxRQWhCWCxFQXNCYSxVQXRCYixFQXVCYyxXQXZCZCxFQXlCWSxTQXpCWixFQTBCZSxZQTFCZixFQTJCVyxRQ09KLFNBQVM2QixFQUFPcEYsRUFBUUosRUFBTW1FLEVBQVVzQixFQUFVQyxHQUlyRCxHQUhJRCxHQUFZQSxJQUFhckYsSUFDekIrRCxFQUFXQSxFQUFTd0IsS0FBS0YsSUFFekJDLEVBQVUsQ0FDVixJQUFJRSxFQUFxQnpCLEVBQ3pCQSxFQUFXLFdBQ1AvRCxFQUFPNEUsb0JBQW9CaEYsRUFBTW1FLEdBQ2pDeUIsRUFBbUJDLE1BQU01RixLQUFNb0MsWUFHdkMsSUFBSXlELEVBQVksQ0FDWjFGLE9BQVFBLEVBQ1JKLEtBQU1BLEVBQ05tRSxTQUFVQSxHQUdkLE9BREEvRCxFQUFPOEQsaUJBQWlCbEUsRUFBTW1FLEdBQ3ZCMkIsRUFzQkosU0FBU0MsRUFBVzNGLEVBQVFKLEVBQU1tRSxFQUFVc0IsR0FDL0MsT0FBT0QsRUFBT3BGLEVBQVFKLEVBQU1tRSxFQUFVc0IsR0FBVSxHQVc3QyxTQUFTTyxFQUFjekQsR0FDdEJBLEdBQU9BLEVBQUluQyxTQUNYbUMsRUFBSW5DLE9BQU80RSxvQkFBb0J6QyxFQUFJdkMsS0FBTXVDLEVBQUk0QixVQUM3QzFCLEVBQU1GLElDL0ZkLElBQUksRUFBd0MsV0FDeEMsSUFBSUssRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQWlEeEMwQyxFQUE0QixTQUFVdkMsR0FFdEMsU0FBU3VDLElBQ0wsSUFBSXBDLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQWtCakMsT0FkQTRELEVBQU1xQyxHQUFLckMsRUFBTXNDLFdBSWpCdEMsRUFBTXVDLEtBQU92QyxFQUFNd0MsYUFJbkJ4QyxFQUFNeUMsR0FBS3pDLEVBQU0wQyxXQUtqQjFDLEVBQU0yQyxVQUFZLEVBQ1gzQyxFQStFWCxPQW5HQSxFQUFVb0MsRUFBWXZDLEdBMEJ0QnVDLEVBQVc1RixVQUFVb0csUUFBVSxhQUN6QnhHLEtBQUt1RyxVQUNQdkcsS0FBS3NFLGNBQWNtQyxJQVF2QlQsRUFBVzVGLFVBQVVzRyxZQUFjLFdBQy9CLE9BQU8xRyxLQUFLdUcsV0FRaEJQLEVBQVc1RixVQUFVOEYsV0FBYSxTQUFVbkcsRUFBTW1FLEdBQzlDLEdBQUkzQyxNQUFNQyxRQUFRekIsR0FBTyxDQUdyQixJQUZBLElBQUk0RyxFQUFNNUcsRUFBS21CLE9BQ1hrRSxFQUFPLElBQUk3RCxNQUFNb0YsR0FDWnhGLEVBQUksRUFBR0EsRUFBSXdGLElBQU94RixFQUN2QmlFLEVBQUtqRSxHQUFLb0UsRUFBT3ZGLEtBQU1ELEVBQUtvQixHQUFJK0MsR0FFcEMsT0FBT2tCLEVBR1AsT0FBT0csRUFBT3ZGLEtBQTRCLEVBQVFrRSxJQVMxRDhCLEVBQVc1RixVQUFVZ0csYUFBZSxTQUFVckcsRUFBTW1FLEdBQ2hELElBQUk1QixFQUNKLEdBQUlmLE1BQU1DLFFBQVF6QixHQUFPLENBQ3JCLElBQUk0RyxFQUFNNUcsRUFBS21CLE9BQ2ZvQixFQUFNLElBQUlmLE1BQU1vRixHQUNoQixJQUFLLElBQUl4RixFQUFJLEVBQUdBLEVBQUl3RixJQUFPeEYsRUFDdkJtQixFQUFJbkIsR0FBSzJFLEVBQVc5RixLQUFNRCxFQUFLb0IsR0FBSStDLFFBSXZDNUIsRUFBTXdELEVBQVc5RixLQUE0QixFQUFRa0UsR0FHekQsT0FEc0IsRUFBVzBDLE9BQVN0RSxFQUNuQ0EsR0FRWDBELEVBQVc1RixVQUFVa0csV0FBYSxTQUFVdkcsRUFBTW1FLEdBQzlDLElBQUk1QixFQUE0QixFQUFXc0UsT0FDM0MsR0FBSXRFLEdBa0RMLFNBQWlCQSxHQUNwQixHQUFJZixNQUFNQyxRQUFRYyxHQUNkLElBQUssSUFBSW5CLEVBQUksRUFBR2dCLEVBQUtHLEVBQUlwQixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQ3ZDNEUsRUFBY3pELEVBQUluQixTQUl0QjRFLEVBQTZELEdBeER6RGMsQ0FBUXZFLFFBRVAsR0FBSWYsTUFBTUMsUUFBUXpCLEdBQ25CLElBQUssSUFBSW9CLEVBQUksRUFBR2dCLEVBQUtwQyxFQUFLbUIsT0FBUUMsRUFBSWdCLElBQU1oQixFQUN4Q25CLEtBQUsrRSxvQkFBb0JoRixFQUFLb0IsR0FBSStDLFFBSXRDbEUsS0FBSytFLG9CQUFvQmhGLEVBQU1tRSxJQUdoQzhCLEVBcEdvQixDQXFHN0IsR0FXRkEsRUFBVzVGLFVBQVU2RixHQVdyQkQsRUFBVzVGLFVBQVUrRixLQVFyQkgsRUFBVzVGLFVBQVVpRyxHQWlCckIsVUMvTE8sU0FBUyxJQUNaLE9BQXlCLFdBQ3JCLE1BQU0sSUFBSVMsTUFBTSxrQ0FESSxHQVM1QixJQUFJQyxFQUFjLEVBVVgsU0FBU0MsRUFBT0MsR0FDbkIsT0FBT0EsRUFBSUMsU0FBV0QsRUFBSUMsT0FBUzdELFNBQVMwRCxJQU16QyxJQ2pDSCxFQUF3QyxXQUN4QyxJQUFJcEUsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTJCeEM2RCxFQUE2QixTQUFVMUQsR0FPdkMsU0FBUzBELEVBQVlwSCxFQUFNdUMsRUFBSzhFLEdBQzVCLElBQUl4RCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTUQsSUFBU0MsS0FjdkMsT0FSQTRELEVBQU10QixJQUFNQSxFQU9ac0IsRUFBTXdELFNBQVdBLEVBQ1Z4RCxFQUVYLE9BdkJBLEVBQVV1RCxFQUFhMUQsR0F1QmhCMEQsRUF4QnFCLENBeUI5QjFDLEdBZ05GLFFBN0pnQyxTQUFVaEIsR0FLdEMsU0FBUzRELEVBQVdDLEdBQ2hCLElBQUkxRCxFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0EwQmpDLE9BdEJBNEQsRUFBTXFDLEdBSU5yQyxFQUFNdUMsS0FJTnZDLEVBQU15QyxHQUtOVyxFQUFPcEQsR0FLUEEsRUFBTTJELFFBQVUsVUFDR3RDLElBQWZxQyxHQUNBMUQsRUFBTTRELGNBQWNGLEdBRWpCMUQsRUEySFgsT0ExSkEsRUFBVXlELEVBQVk1RCxHQXVDdEI0RCxFQUFXakgsVUFBVXFILElBQU0sU0FBVW5GLEdBQ2pDLElBQUl6QyxFQUlKLE9BSElHLEtBQUt1SCxTQUFXdkgsS0FBS3VILFFBQVFoRixlQUFlRCxLQUM1Q3pDLEVBQVFHLEtBQUt1SCxRQUFRakYsSUFFbEJ6QyxHQU9Yd0gsRUFBV2pILFVBQVVzSCxRQUFVLFdBQzNCLE9BQVExSCxLQUFLdUgsU0FBVzVILE9BQU95RixLQUFLcEYsS0FBS3VILFVBQWEsSUFPMURGLEVBQVdqSCxVQUFVdUgsY0FBZ0IsV0FDakMsT0FBUTNILEtBQUt1SCxTQUFXLEVBQU8sR0FBSXZILEtBQUt1SCxVQUFhLElBS3pERixFQUFXakgsVUFBVXdILGNBQWdCLFdBQ2pDLFFBQVM1SCxLQUFLdUgsU0FNbEJGLEVBQVdqSCxVQUFVeUgsT0FBUyxTQUFVdkYsRUFBSzhFLEdBQ3pDLElBQUlVLEVBQ0pBLEVBQVksVUFBWXhGLEVBQ3hCdEMsS0FBS3NFLGNBQWMsSUFBSTZDLEVBQVlXLEVBQVd4RixFQUFLOEUsSUFDbkRVLEVBQVlDLEVBQ1ovSCxLQUFLc0UsY0FBYyxJQUFJNkMsRUFBWVcsRUFBV3hGLEVBQUs4RSxLQU12REMsRUFBV2pILFVBQVU0SCxrQkFBb0IsU0FBVTFGLEVBQUs0QixHQUNwRGxFLEtBQUtpRSxpQkFBaUIsVUFBWTNCLEVBQUs0QixJQU0zQ21ELEVBQVdqSCxVQUFVNkgscUJBQXVCLFNBQVUzRixFQUFLNEIsR0FDdkRsRSxLQUFLK0Usb0JBQW9CLFVBQVl6QyxFQUFLNEIsSUFTOUNtRCxFQUFXakgsVUFBVThILElBQU0sU0FBVTVGLEVBQUt6QyxFQUFPc0ksR0FDN0MsSUFBSXRGLEVBQVM3QyxLQUFLdUgsVUFBWXZILEtBQUt1SCxRQUFVLElBQzdDLEdBQUlZLEVBQ0F0RixFQUFPUCxHQUFPekMsTUFFYixDQUNELElBQUl1SCxFQUFXdkUsRUFBT1AsR0FDdEJPLEVBQU9QLEdBQU96QyxFQUNWdUgsSUFBYXZILEdBQ2JHLEtBQUs2SCxPQUFPdkYsRUFBSzhFLEtBVzdCQyxFQUFXakgsVUFBVW9ILGNBQWdCLFNBQVUzRSxFQUFRc0YsR0FDbkQsSUFBSyxJQUFJN0YsS0FBT08sRUFDWjdDLEtBQUtrSSxJQUFJNUYsRUFBS08sRUFBT1AsR0FBTTZGLElBUW5DZCxFQUFXakgsVUFBVWdJLGdCQUFrQixTQUFVL0YsR0FDeENBLEVBQU9rRixTQUdaLEVBQU92SCxLQUFLdUgsVUFBWXZILEtBQUt1SCxRQUFVLElBQUtsRixFQUFPa0YsVUFRdkRGLEVBQVdqSCxVQUFVaUksTUFBUSxTQUFVL0YsRUFBSzZGLEdBQ3hDLEdBQUluSSxLQUFLdUgsU0FBV2pGLEtBQU90QyxLQUFLdUgsUUFBUyxDQUNyQyxJQUFJSCxFQUFXcEgsS0FBS3VILFFBQVFqRixVQUNyQnRDLEtBQUt1SCxRQUFRakYsR04zTHpCLFNBQWlCRyxHQUNwQixJQUFJQyxFQUNKLElBQUtBLEtBQVlELEVBQ2IsT0FBTyxFQUVYLE9BQVFDLEVNdUxJLENBQVExQyxLQUFLdUgsV0FDYnZILEtBQUt1SCxRQUFVLE1BRWRZLEdBQ0RuSSxLQUFLNkgsT0FBT3ZGLEVBQUs4RSxLQUl0QkMsRUEzSm9CLENBNEo3QixHQzdQRixFQUNhLFVBRGIsRUFFYSxVQUZiLEVBR1ksU0FIWixFQUlhLFNBSmIsRUFLb0IsZ0JBTHBCLEVBTW9CLGdCQU5wQixFQU9jLFVBUGQsRUFRYyxVQVJkLEVBU1ksU0NmWixJQUFJLEVBQXdDLFdBQ3hDLElBQUkxRSxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBeUQ1QyxRQWpDb0MsU0FBVUcsR0FLMUMsU0FBUzZFLEVBQWVDLEdBQ3BCLElBQUkzRSxFQUFRNUQsS0FFUndJLEVBQVUsb0RIQ0QsUUdGNkNDLE1BQU0sS0FBSyxHQUdqRSxnQkFDQUYsRUFDQSxnQkFpQkosT0FoQkEzRSxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTXdJLElBQVl4SSxNQVNoQ3VJLEtBQU9BLEVBSWIzRSxFQUFNOEUsS0FBTyxpQkFFYjlFLEVBQU00RSxRQUFVQSxFQUNUNUUsRUFFWCxPQTlCQSxFQUFVMEUsRUFBZ0I3RSxHQThCbkI2RSxFQS9Cd0IsQ0FnQ2pDeEIsT0NoREssU0FBUyxFQUFPNkIsRUFBV0MsR0FDOUIsSUFBS0QsRUFDRCxNQUFNLElBQUksRUFBZUMsR0NDMUIsU0FBUyxFQUFNL0ksRUFBT2dKLEVBQUtDLEdBQzlCLE9BQU9DLEtBQUtGLElBQUlFLEtBQUtELElBQUlqSixFQUFPZ0osR0FBTUMsR0FXbkMsSUFBSUUsRUFJSCxTQUFVRCxLQUVIQSxLQUFLQyxLQUlMLFNBQVVDLEdBQ2IsSUFBSUMsRUFBd0IsS0FBT0MsSUFBSUYsR0FDdkMsT0FBUUMsRUFBSSxFQUFJQSxHQUFLLEdBY3RCRSxFQUlILFNBQVVMLEtBRUhBLEtBQUtLLEtBSUwsU0FBVUgsR0FDYixPQUFPRixLQUFLTSxJQUFJSixHQUFLRixLQUFLTyxPQWdCL0IsU0FBU0MsRUFBdUJOLEVBQUdDLEVBQUdNLEVBQUlDLEVBQUlDLEVBQUlDLEdBQ3JELElBQUlDLEVBQUtGLEVBQUtGLEVBQ1ZLLEVBQUtGLEVBQUtGLEVBQ2QsR0FBVyxJQUFQRyxHQUFtQixJQUFQQyxFQUFVLENBQ3RCLElBQUlDLElBQU1iLEVBQUlPLEdBQU1JLEdBQU1WLEVBQUlPLEdBQU1JLElBQU9ELEVBQUtBLEVBQUtDLEVBQUtBLEdBQ3REQyxFQUFJLEdBQ0pOLEVBQUtFLEVBQ0xELEVBQUtFLEdBRUFHLEVBQUksSUFDVE4sR0FBTUksRUFBS0UsRUFDWEwsR0FBTUksRUFBS0MsR0FHbkIsT0FBTyxHQUFnQmIsRUFBR0MsRUFBR00sRUFBSUMsR0FVOUIsU0FBUyxHQUFnQkQsRUFBSUMsRUFBSUMsRUFBSUMsR0FDeEMsSUFBSUMsRUFBS0YsRUFBS0YsRUFDVkssRUFBS0YsRUFBS0YsRUFDZCxPQUFPRyxFQUFLQSxFQUFLQyxFQUFLQSxFQTBEbkIsU0FBU0UsR0FBVUMsR0FDdEIsT0FBeUIsSUFBakJBLEVBQXdCakIsS0FBS2tCLEdBUWxDLFNBQVMsR0FBVUMsR0FDdEIsT0FBUUEsRUFBaUJuQixLQUFLa0IsR0FBTSxJQVNqQyxTQUFTLEdBQU9ySixFQUFHQyxHQUN0QixJQUFJc0osRUFBSXZKLEVBQUlDLEVBQ1osT0FBT3NKLEVBQUl0SixFQUFJLEVBQUlzSixFQUFJdEosRUFBSXNKLEVBVXhCLFNBQVNDLEdBQUt4SixFQUFHQyxFQUFHb0ksR0FDdkIsT0FBT3JJLEVBQUlxSSxHQUFLcEksRUFBSUQsR0NqTXhCLElBQUksR0FBd0MsV0FDeEMsSUFBSStCLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0F3VjVDLFNBdlIrQixTQUFVRyxHQUtyQyxTQUFTNEcsRUFBVUMsR0FDZixJQUFJMUcsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBSWpDNEQsRUFBTXFDLEdBSU5yQyxFQUFNdUMsS0FJTnZDLEVBQU15QyxHQUlOLElBQUlrRSxFQUFhLEVBQU8sR0FBSUQsR0FnQzVCLE1BL0JrQyxpQkFBdkJBLEVBQVFDLG9CQUNSQSxFQUFXQSxXQUNsQixFQUFPQSxFQUFZRCxFQUFRQyxhQUUvQkEsRUFBZ0MsYUFDUnRGLElBQXBCcUYsRUFBUUUsUUFBd0JGLEVBQVFFLFFBQVUsRUFDdEQsRUFBb0QsaUJBQXRDRCxFQUFnQyxRQUFnQixJQUM5REEsRUFBZ0MsYUFDUnRGLElBQXBCcUYsRUFBUUcsU0FBd0JILEVBQVFHLFFBQzVDRixFQUFnQyxPQUFJRCxFQUFRSSxPQUM1Q0gsRUFBdUMsbUJBQ1R0RixJQUExQnFGLEVBQVFLLGNBQThCTCxFQUFRSyxjQUFnQkMsSUFDbEVMLEVBQXVDLG1CQUNUdEYsSUFBMUJxRixFQUFRTyxjQUE4QlAsRUFBUU8sY0FBZ0IsRUFDbEVOLEVBQWlDLGFBQ1R0RixJQUFwQnFGLEVBQVFRLFFBQXdCUixFQUFRUSxTQUFVLElBQ3REUCxFQUFpQyxhQUNUdEYsSUFBcEJxRixFQUFRUyxRQUF3QlQsRUFBUVMsUUFBVUgsSUFLdERoSCxFQUFNb0gsZ0JBQ3VCL0YsSUFBekJzRixFQUFXVSxVQUEwQlgsRUFBUVcsVUFBWSxrQkFDdERWLEVBQVdVLFVBQ2xCckgsRUFBTTRELGNBQWMrQyxHQUtwQjNHLEVBQU1zSCxPQUFTLEtBQ1J0SCxFQStOWCxPQXBSQSxHQUFVeUcsRUFBVzVHLEdBMERyQjRHLEVBQVVqSyxVQUFVK0ssYUFBZSxXQUMvQixPQUFPbkwsS0FBS2dMLFlBU2hCWCxFQUFVakssVUFBVWdMLGNBQWdCLFNBQVVDLEdBRTFDLElBQUlDLEVBQVF0TCxLQUFLa0wsUUFDSSxDQUNiSyxNQUFPdkwsS0FDUHdMLGFBQXlCdkcsSUFBaEJvRyxHQUFtQ0EsR0FFaERYLEVBQVMxSyxLQUFLeUwsWUFXbEIsT0FWQUgsRUFBTWQsUUFBVSxFQUFNekIsS0FBSzJDLE1BQTBCLElBQXBCMUwsS0FBSzJMLGNBQXNCLElBQUssRUFBRyxHQUNwRUwsRUFBTU0sWUFBYzVMLEtBQUs2TCxpQkFDekJQLEVBQU1iLFFBQVV6SyxLQUFLOEwsYUFDckJSLEVBQU1TLE9BQVMvTCxLQUFLZ00sWUFDcEJWLEVBQU1aLFlBQW9CekYsSUFBWHlGLEdBQXlCWSxFQUFNRSxRQUFxQmQsRUFBWEUsSUFDeERVLEVBQU1YLGNBQWdCM0ssS0FBS2lNLG1CQUMzQlgsRUFBTVQsY0FBZ0I5QixLQUFLRCxJQUFJOUksS0FBS2tNLG1CQUFvQixHQUN4RFosRUFBTVIsUUFBVTlLLEtBQUttTSxhQUNyQmIsRUFBTVAsUUFBVS9LLEtBQUtvTSxhQUNyQnBNLEtBQUtrTCxPQUFTSSxFQUNQQSxHQVFYakIsRUFBVWpLLFVBQVVpTSxlQUFpQixTQUFVQyxHQUMzQyxPQUFPLEtBUVhqQyxFQUFVakssVUFBVW1NLG9CQUFzQixTQUFVQyxHQUNoRCxPQUFPLEtBU1huQyxFQUFVakssVUFBVTRMLFVBQVksV0FDNUIsT0FBK0RoTSxLQUFLeUgsSUFBSSxJQVE1RTRDLEVBQVVqSyxVQUFVNkwsaUJBQW1CLFdBQ25DLE9BQThCak0sS0FBS3lILElBQUksSUFRM0M0QyxFQUFVakssVUFBVThMLGlCQUFtQixXQUNuQyxPQUE4QmxNLEtBQUt5SCxJQUFJLElBUTNDNEMsRUFBVWpLLFVBQVUrTCxXQUFhLFdBQzdCLE9BQThCbk0sS0FBS3lILElBQUksSUFRM0M0QyxFQUFVakssVUFBVWdNLFdBQWEsV0FDN0IsT0FBOEJwTSxLQUFLeUgsSUFBSSxJQVEzQzRDLEVBQVVqSyxVQUFVdUwsV0FBYSxXQUM3QixPQUE4QjNMLEtBQUt5SCxJQUFJLElBTTNDNEMsRUFBVWpLLFVBQVV5TCxlQUFpQixXQUNqQyxPQUFPLEtBUVh4QixFQUFVakssVUFBVTBMLFdBQWEsV0FDN0IsT0FBK0I5TCxLQUFLeUgsSUFBSSxJQVM1QzRDLEVBQVVqSyxVQUFVcUwsVUFBWSxXQUM1QixPQUE4QnpMLEtBQUt5SCxJQUFJLElBUzNDNEMsRUFBVWpLLFVBQVVxTSxVQUFZLFNBQVVWLEdBQ3RDL0wsS0FBS2tJLElBQUksRUFBc0I2RCxJQVFuQzFCLEVBQVVqSyxVQUFVc00saUJBQW1CLFNBQVUvQixHQUM3QzNLLEtBQUtrSSxJQUFJLEVBQThCeUMsSUFRM0NOLEVBQVVqSyxVQUFVdU0saUJBQW1CLFNBQVU5QixHQUM3QzdLLEtBQUtrSSxJQUFJLEVBQThCMkMsSUFVM0NSLEVBQVVqSyxVQUFVd00sV0FBYSxTQUFVN0IsR0FDdkMvSyxLQUFLa0ksSUFBSSxFQUF3QjZDLElBVXJDVixFQUFVakssVUFBVXlNLFdBQWEsU0FBVS9CLEdBQ3ZDOUssS0FBS2tJLElBQUksRUFBd0I0QyxJQVFyQ1QsRUFBVWpLLFVBQVUwTSxXQUFhLFNBQVV0QyxHQUN2QyxFQUEwQixpQkFBWkEsRUFBc0IsSUFDcEN4SyxLQUFLa0ksSUFBSSxFQUF1QnNDLElBUXBDSCxFQUFVakssVUFBVTJNLFdBQWEsU0FBVXRDLEdBQ3ZDekssS0FBS2tJLElBQUksRUFBdUJ1QyxJQVNwQ0osRUFBVWpLLFVBQVU0TSxVQUFZLFNBQVVDLEdBQ3RDak4sS0FBS2tJLElBQUksRUFBdUIrRSxJQUtwQzVDLEVBQVVqSyxVQUFVTSxnQkFBa0IsV0FDOUJWLEtBQUtrTCxTQUNMbEwsS0FBS2tMLE9BQU9LLE1BQVEsS0FDcEJ2TCxLQUFLa0wsT0FBUyxNQUVsQnpILEVBQU9yRCxVQUFVTSxnQkFBZ0IwQyxLQUFLcEQsT0FFbkNxSyxFQXJSbUIsQ0FzUjVCLEdDalZGLEdBbUJnQixhQW5CaEIsR0FrQ29CLGlCQ2pDcEIsR0FDZSxZQURmLEdBR1csUUNWWCxJQUFJLEdBQXdDLFdBQ3hDLElBQUkxSCxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBNFVyQyxTQUFTNEosR0FBT0MsRUFBWUMsR0FDL0IsSUFBS0QsRUFBVzFDLFFBQ1osT0FBTyxFQUVYLElBQUk0QyxFQUFhRCxFQUFVQyxXQUMzQixHQUFJQSxFQUFhRixFQUFXdEMsZUFDeEJ3QyxHQUFjRixFQUFXeEMsY0FDekIsT0FBTyxFQUVYLElBQUkyQyxFQUFPRixFQUFVRSxLQUNyQixPQUFPQSxFQUFPSCxFQUFXckMsU0FBV3dDLEdBQVFILEVBQVdwQyxRQUUzRCxTQTVPMkIsU0FBVXRILEdBS2pDLFNBQVM4SixFQUFNakQsR0FDWCxJQUFJMUcsRUFBUTVELEtBQ1J3TixFQUFjLEVBQU8sR0FBSWxELFVBQ3RCa0QsRUFBWW5MLFFBQ25CdUIsRUFBUUgsRUFBT0wsS0FBS3BELEtBQU13TixJQUFnQnhOLE1BSXBDaUcsR0FJTnJDLEVBQU11QyxLQUlOdkMsRUFBTXlDLEdBS056QyxFQUFNNkosa0JBQW9CLEtBSzFCN0osRUFBTThKLGNBQWdCLEtBS3RCOUosRUFBTStKLGlCQUFtQixLQUt6Qi9KLEVBQU1nSyxVQUFZLEtBRWR0RCxFQUFRdUQsU0FDUmpLLEVBQU1pSyxPQUFTdkQsRUFBUXVELFFBRXZCdkQsRUFBUXdELEtBQ1JsSyxFQUFNbUssT0FBT3pELEVBQVF3RCxLQUV6QmxLLEVBQU1vRSxrQkFBa0IsRUFBc0JwRSxFQUFNb0ssNkJBQ3BELElBQUkzTCxFQUFTaUksRUFBUWpJLE9BQ1lpSSxFQUFjLE9BQ3pDLEtBRU4sT0FEQTFHLEVBQU1xSyxVQUFVNUwsR0FDVHVCLEVBaUtYLE9BdE5BLEdBQVUySixFQUFPOUosR0EyRGpCOEosRUFBTW5OLFVBQVVpTSxlQUFpQixTQUFVQyxHQUN2QyxJQUFJNEIsRUFBUTVCLEdBQXdCLEdBRXBDLE9BREE0QixFQUFNcEwsS0FBSzlDLE1BQ0prTyxHQU1YWCxFQUFNbk4sVUFBVW1NLG9CQUFzQixTQUFVQyxHQUM1QyxJQUFJMkIsRUFBUzNCLEdBQTBCLEdBRXZDLE9BREEyQixFQUFPckwsS0FBSzlDLEtBQUtvTCxpQkFDVitDLEdBUVhaLEVBQU1uTixVQUFVZ08sVUFBWSxXQUN4QixPQUFrQ3BPLEtBQUt5SCxJQUFJLElBQTBCLE1BS3pFOEYsRUFBTW5OLFVBQVV5TCxlQUFpQixXQUM3QixJQUFJeEosRUFBU3JDLEtBQUtvTyxZQUNsQixPQUFRL0wsRUFBaUNBLEVBQU9nTSxXQUEvQixJQUtyQmQsRUFBTW5OLFVBQVVrTyxvQkFBc0IsV0FDbEN0TyxLQUFLd0csV0FLVCtHLEVBQU1uTixVQUFVNE4sNEJBQThCLFdBQ3RDaE8sS0FBSzJOLG1CQUNMNUgsRUFBYy9GLEtBQUsyTixrQkFDbkIzTixLQUFLMk4saUJBQW1CLE1BRTVCLElBQUl0TCxFQUFTckMsS0FBS29PLFlBQ2QvTCxJQUNBckMsS0FBSzJOLGlCQUFtQnBJLEVBQU9sRCxFQUFRb0UsRUFBa0J6RyxLQUFLc08sb0JBQXFCdE8sT0FFdkZBLEtBQUt3RyxXQU9UK0csRUFBTW5OLFVBQVVtTyxZQUFjLFNBQVVDLEdBQ3BDLE9BQUt4TyxLQUFLNE4sVUFHSDVOLEtBQUs0TixVQUFVVyxZQUFZQyxHQUZ2QixJQUFJQyxTQUFRLFNBQVVDLEdBQVcsT0FBT0EsRUFBUSxRQVkvRG5CLEVBQU1uTixVQUFVeU4sT0FBUyxTQUFVYyxFQUFZeE8sR0FDM0MsSUFBSXlPLEVBQWdCNU8sS0FBSzZPLGNBQ3pCLEdBQUlELEVBQWNFLGFBQWFILEdBQzNCLE9BQU9DLEVBQWNHLFlBQVlKLEVBQVl4TyxJQWVyRG9OLEVBQU1uTixVQUFVMk4sT0FBUyxTQUFVRCxHQUMzQjlOLEtBQUt5TixvQkFDTDFILEVBQWMvRixLQUFLeU4sbUJBQ25Cek4sS0FBS3lOLGtCQUFvQixNQUV4QkssR0FDRDlOLEtBQUt3RyxVQUVMeEcsS0FBSzBOLGdCQUNMM0gsRUFBYy9GLEtBQUswTixlQUNuQjFOLEtBQUswTixjQUFnQixNQUVyQkksSUFDQTlOLEtBQUt5TixrQkFBb0JsSSxFQUFPdUksRUFBSyxJQUE0QixTQUFVdEosR0FDdkUsSUFFSXdLLEVBRGdELEVBQ2pCTCxXQUFXSyxpQkFDMUM3QixFQUFhbk4sS0FBS29MLGVBQWMsR0FFcEMsR0FBUTRELEVBQWlCQyxNQUFLLFNBQVVDLEdBQ3BDLE9BQU9BLEVBQWdCM0QsUUFBVTRCLEVBQVc1QixTQUM1QyxJQUNKeUQsRUFBaUJsTSxLQUFLcUssS0FDdkJuTixNQUNIQSxLQUFLME4sY0FBZ0JuSSxFQUFPdkYsS0FBTXlHLEVBQWtCcUgsRUFBSUQsT0FBUUMsR0FDaEU5TixLQUFLd0csWUFTYitHLEVBQU1uTixVQUFVNk4sVUFBWSxTQUFVNUwsR0FDbENyQyxLQUFLa0ksSUFBSSxFQUFzQjdGLElBTW5Da0wsRUFBTW5OLFVBQVV5TyxZQUFjLFdBSTFCLE9BSEs3TyxLQUFLNE4sWUFDTjVOLEtBQUs0TixVQUFZNU4sS0FBS21QLGtCQUVuQm5QLEtBQUs0TixXQUtoQkwsRUFBTW5OLFVBQVVnUCxZQUFjLFdBQzFCLFFBQVNwUCxLQUFLNE4sV0FPbEJMLEVBQU1uTixVQUFVK08sZUFBaUIsV0FDN0IsT0FBTyxNQUtYNUIsRUFBTW5OLFVBQVVNLGdCQUFrQixXQUM5QlYsS0FBS2lPLFVBQVUsTUFDZnhLLEVBQU9yRCxVQUFVTSxnQkFBZ0IwQyxLQUFLcEQsT0FFbkN1TixFQXZOZSxDQXdOeEI4QixJQzlURixHQUNhLFVBRGIsR0FFZ0MseUJDUmhDLElBQUksR0FBd0MsV0FDeEMsSUFBSTFNLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0E0STVDLFNBcEVtQyxTQUFVRyxHQUt6QyxTQUFTNkwsRUFBY0MsR0FDbkIsSUFBSTNMLEVBQVE1RCxLQUNSc0ssRUFBVWlGLEdBQTRCLEdBQ3RDL0IsRUFBYyxFQUFPLEdBQUlsRCxHQW9CN0IsY0FuQk9rRCxFQUFZZ0MsZUFDWmhDLEVBQVlpQyx3QkFDbkI3TCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTXdOLElBQWdCeE4sTUFJcENpRyxHQUlOckMsRUFBTXVDLEtBSU52QyxFQUFNeUMsR0FDTnpDLEVBQU04TCxnQkFBK0J6SyxJQUFwQnFGLEVBQVFrRixRQUF3QmxGLEVBQVFrRixRQUFVLEdBQ25FNUwsRUFBTStMLCtCQUE2RDFLLElBQW5DcUYsRUFBUW1GLHdCQUNsQ25GLEVBQVFtRix3QkFFUDdMLEVBc0NYLE9BakVBLEdBQVUwTCxFQUFlN0wsR0FtQ3pCNkwsRUFBY2xQLFVBQVV3UCxXQUFhLFdBQ2pDLE9BQThCNVAsS0FBS3lILElBQUlvSSxLQVEzQ1AsRUFBY2xQLFVBQVVzUCxXQUFhLFNBQVVGLEdBQzNDeFAsS0FBS2tJLElBQUkySCxHQUFzQkwsSUFRbkNGLEVBQWNsUCxVQUFVMFAsMEJBQTRCLFdBQ2hELE9BQStCOVAsS0FBS3lILElBQUlvSSxLQVE1Q1AsRUFBY2xQLFVBQVV1UCwwQkFBNEIsU0FBVUYsR0FDMUR6UCxLQUFLa0ksSUFBSTJILEdBQXlDSixJQUUvQ0gsRUFsRXVCLENBbUVoQyxJQzNJRixJQUFJLEdBQXdDLFdBQ3hDLElBQUkzTSxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBeUw1QyxTQS9KbUMsU0FBVUcsR0FLekMsU0FBU3NNLEVBQWN4RSxHQUNuQixJQUFJM0gsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBWWpDLE9BVkE0RCxFQUFNb00sd0JBQTBCcE0sRUFBTXFNLG1CQUFtQnZLLEtBQUs5QixHQUs5REEsRUFBTXNNLE9BQVMzRSxFQUlmM0gsRUFBTXVNLHVCQUF5QixLQUN4QnZNLEVBMklYLE9BNUpBLEdBQVVtTSxFQUFldE0sR0F5QnpCc00sRUFBYzNQLFVBQVVtTyxZQUFjLFNBQVVDLEdBQzVDLE9BQU8sS0FRWHVCLEVBQWMzUCxVQUFVME8sYUFBZSxTQUFVSCxHQUM3QyxPQUFPLEtBU1hvQixFQUFjM1AsVUFBVTJPLFlBQWMsU0FBVUosRUFBWXhPLEdBQ3hELE9BQU8sS0FRWDRQLEVBQWMzUCxVQUFVZ1EsbUJBQXFCLFNBQVVDLEVBQU8vQyxFQUFNZ0QsR0FDM0RELEVBQU0vQyxLQUNQK0MsRUFBTS9DLEdBQVEsSUFFbEIrQyxFQUFNL0MsR0FBTWdELEVBQUtDLFVBQVVDLFlBQWNGLEdBWTdDUCxFQUFjM1AsVUFBVXFRLHVCQUF5QixTQUFVcE8sRUFBUXFPLEVBQVlMLEdBQzNFLE9BT0EsU0FBVS9DLEVBQU1xRCxHQUNaLElBQUlDLEVBQVc1USxLQUFLb1EsbUJBQW1CMUssS0FBSzFGLEtBQU1xUSxFQUFPL0MsR0FDekQsT0FBT2pMLEVBQU93TyxrQkFBa0JILEVBQVlwRCxFQUFNcUQsRUFBV0MsSUFDL0RsTCxLQUFLMUYsT0FZWCtQLEVBQWMzUCxVQUFVMFEsMkJBQTZCLFNBQVVDLEVBQVlwQyxFQUFZcUMsRUFBY0osRUFBVUssS0FZL0dsQixFQUFjM1AsVUFBVThRLGVBQWlCLFNBQVUxQyxFQUFPRyxFQUFZcUMsR0FDbEUsT0FBTyxLQUtYakIsRUFBYzNQLFVBQVUrUSxTQUFXLFdBQy9CLE9BQU9uUixLQUFLa1EsUUFNaEJILEVBQWMzUCxVQUFVZ1IsbUJBQXFCLGFBTTdDckIsRUFBYzNQLFVBQVU2UCxtQkFBcUIsU0FBVTFMLEdDN0kvQyxJRDhJc0RBLEVBQVksT0FDNUQ4SixZQUNOck8sS0FBS3FSLDJCQVVidEIsRUFBYzNQLFVBQVVrUixVQUFZLFNBQVVDLEdBQzFDLElBQUlDLEVBQWFELEVBQU1sRCxXQVF2QixPQ25LSSxHRDRKQW1ELEdDM0pELEdEMkpvQ0EsR0FDbkNELEVBQU10TixpQkFBaUJ3QyxFQUFrQnpHLEtBQUtnUSx5QkMvSmhELEdEaUtFd0IsSUFDQUQsRUFBTUUsT0FDTkQsRUFBYUQsRUFBTWxELFlDaktuQixHRG1LR21ELEdBS1h6QixFQUFjM1AsVUFBVWlSLHdCQUEwQixXQUM5QyxJQUFJOUYsRUFBUXZMLEtBQUttUixXQUNiNUYsRUFBTU8sY0FBZ0JQLEVBQU1NLGtCQUFvQixJQUNoRE4sRUFBTS9FLFdBR1B1SixFQTdKdUIsQ0E4SmhDLEdFckxGLElBQUksR0FBd0MsV0FDeEMsSUFBSXBOLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FtRDVDLFNBbkNpQyxTQUFVRyxHQVN2QyxTQUFTaU8sRUFBWTNSLEVBQU00UixFQUEyQkMsRUFBZ0JDLEdBQ2xFLElBQUlqTyxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTUQsSUFBU0MsS0FxQnZDLE9BZEE0RCxFQUFNa08sc0JBQXdCSCxFQU05Qi9OLEVBQU0rSyxXQUFhaUQsRUFPbkJoTyxFQUFNbU8sUUFBVUYsRUFDVGpPLEVBRVgsT0FoQ0EsR0FBVThOLEVBQWFqTyxHQWdDaEJpTyxFQWpDcUIsQ0FrQzlCak4sR0NsREYsSUNvUEl1TixHRHBQQUMsR0FBMEIsb0JBQWRDLGdCQUE0RCxJQUF4QkEsVUFBVUMsVUFDeERELFVBQVVDLFVBQVVDLGNBQ3BCLEdBS0tDLElBQXFDLElBQTNCSixHQUFHNU4sUUFBUSxXQVVyQmlPLEtBTG1DLElBQTFCTCxHQUFHNU4sUUFBUSxXQUFvQjROLEdBQUc1TixRQUFRLFVBS2hCLElBQTFCNE4sR0FBRzVOLFFBQVEsWUFBMkMsR0FBdkI0TixHQUFHNU4sUUFBUSxTQUtuRCxJQUFtQyxJQUE3QjROLEdBQUc1TixRQUFRLGFBUWpCa08sR0FBaUQsb0JBQXJCQyxpQkFBbUNBLGlCQUFtQixFQU1sRkMsR0FBdUQsb0JBQXRCQyxtQkFDYixvQkFBcEJDLGlCQUNQblQsZ0JBQWdCa1Qsa0JBS1RFLEdBQWdDLG9CQUFWQyxPQUF5QkEsTUFBTXpTLFVBQVUwUyxPQUkvREMsR0FBMEIsV0FDakMsSUFBSUMsR0FBVSxFQUNkLElBQ0ksSUFBSTFJLEVBQVUzSyxPQUFPQyxlQUFlLEdBQUksVUFBVyxDQUMvQzZILElBQUssV0FDRHVMLEdBQVUsS0FHbEJDLE9BQU9oUCxpQkFBaUIsSUFBSyxLQUFNcUcsR0FDbkMySSxPQUFPbE8sb0JBQW9CLElBQUssS0FBTXVGLEdBRTFDLE1BQU80SSxJQUdQLE9BQU9GLEVBZDBCLEdDZ0U5QixTQUFTcE4sR0FBTXVOLEVBQVdwQyxHQUM3QixJQUFJOUgsRUFBSThILEVBQVcsR0FDZjdILEVBQUk2SCxFQUFXLEdBR25CLE9BRkFBLEVBQVcsR0FBS29DLEVBQVUsR0FBS2xLLEVBQUlrSyxFQUFVLEdBQUtqSyxFQUFJaUssRUFBVSxHQUNoRXBDLEVBQVcsR0FBS29DLEVBQVUsR0FBS2xLLEVBQUlrSyxFQUFVLEdBQUtqSyxFQUFJaUssRUFBVSxHQUN6RHBDLEVBd0RKLFNBQVNxQyxHQUFRRCxFQUFXRSxFQUFLQyxFQUFLQyxFQUFJQyxFQUFJQyxFQUFPQyxFQUFLQyxHQUM3RCxJQUFJQyxFQUFNN0ssS0FBSzZLLElBQUlILEdBQ2ZJLEVBQU05SyxLQUFLOEssSUFBSUosR0FPbkIsT0FOQU4sRUFBVSxHQUFLSSxFQUFLTSxFQUNwQlYsRUFBVSxHQUFLSyxFQUFLSSxFQUNwQlQsRUFBVSxJQUFNSSxFQUFLSyxFQUNyQlQsRUFBVSxHQUFLSyxFQUFLSyxFQUNwQlYsRUFBVSxHQUFLTyxFQUFNSCxFQUFLTSxFQUFNRixFQUFNSixFQUFLSyxFQUFNUCxFQUNqREYsRUFBVSxHQUFLTyxFQUFNRixFQUFLSSxFQUFNRCxFQUFNSCxFQUFLSyxFQUFNUCxFQUMxQ0gsRUFrQ0osU0FBU1csR0FBWTNULEVBQVFrQyxHQUNoQyxJQXFCd0IwUixFQXJCcEJDLEdBcUJvQkQsRUFyQkYxUixHQXNCWCxHQUFLMFIsRUFBSSxHQUFLQSxFQUFJLEdBQUtBLEVBQUksR0FyQnRDLEVBQWUsSUFBUkMsRUFBVyxJQUNsQixJQUFJcFQsRUFBSXlCLEVBQU8sR0FDWHhCLEVBQUl3QixFQUFPLEdBQ1g0UixFQUFJNVIsRUFBTyxHQUNYVyxFQUFJWCxFQUFPLEdBQ1g2UixFQUFJN1IsRUFBTyxHQUNYOFIsRUFBSTlSLEVBQU8sR0FPZixPQU5BbEMsRUFBTyxHQUFLNkMsRUFBSWdSLEVBQ2hCN1QsRUFBTyxJQUFNVSxFQUFJbVQsRUFDakI3VCxFQUFPLElBQU04VCxFQUFJRCxFQUNqQjdULEVBQU8sR0FBS1MsRUFBSW9ULEVBQ2hCN1QsRUFBTyxJQUFNOFQsRUFBSUUsRUFBSW5SLEVBQUlrUixHQUFLRixFQUM5QjdULEVBQU8sS0FBT1MsRUFBSXVULEVBQUl0VCxFQUFJcVQsR0FBS0YsRUFDeEI3VCxFQS9NQSxJQUFJb0IsTUFBTSxHQ25CckIsU0FHYyxXQ1FQLFNBQVM2UyxHQUFlQyxHQUUzQixJQURBLElBQUl0SSxFQTJLRyxDQUFDbkIsSUFBVUEsS0FBVSxLQUFXLEtBMUs5QnpKLEVBQUksRUFBR2dCLEVBQUtrUyxFQUFZblQsT0FBUUMsRUFBSWdCLElBQU1oQixFQUMvQ21ULEdBQWlCdkksRUFBUXNJLEVBQVlsVCxJQUV6QyxPQUFPNEssRUFrRUosU0FBU3dJLEdBQXlCeEksRUFBUTlDLEVBQUdDLEdBQ2hELElBQUlVLEVBQUlDLEVBbUJSLE9BakJJRCxFQURBWCxFQUFJOEMsRUFBTyxHQUNOQSxFQUFPLEdBQUs5QyxFQUVaOEMsRUFBTyxHQUFLOUMsRUFDWkEsRUFBSThDLEVBQU8sR0FHWCxHQVdHbkMsR0FSUkMsRUFEQVgsRUFBSTZDLEVBQU8sR0FDTkEsRUFBTyxHQUFLN0MsRUFFWjZDLEVBQU8sR0FBSzdDLEVBQ1pBLEVBQUk2QyxFQUFPLEdBR1gsR0FFYWxDLEVBVW5CLFNBQVMySyxHQUFtQnpJLEVBQVFnRixHQUN2QyxPQUFPMEQsR0FBVzFJLEVBQVFnRixFQUFXLEdBQUlBLEVBQVcsSUE2QmpELFNBQVMwRCxHQUFXMUksRUFBUTlDLEVBQUdDLEdBQ2xDLE9BQU82QyxFQUFPLElBQU05QyxHQUFLQSxHQUFLOEMsRUFBTyxJQUFNQSxFQUFPLElBQU03QyxHQUFLQSxHQUFLNkMsRUFBTyxHQVN0RSxTQUFTMkksR0FBdUIzSSxFQUFRZ0YsR0FDM0MsSUFBSTRELEVBQU81SSxFQUFPLEdBQ2Q2SSxFQUFPN0ksRUFBTyxHQUNkOEksRUFBTzlJLEVBQU8sR0FDZCtJLEVBQU8vSSxFQUFPLEdBQ2Q5QyxFQUFJOEgsRUFBVyxHQUNmN0gsRUFBSTZILEVBQVcsR0FDZmdFLEVDOUpLLEVEOEtULE9BZkk5TCxFQUFJMEwsRUFDSkksR0MzSkUsR0Q2Skc5TCxFQUFJNEwsSUFDVEUsR0NoS0csR0RrS0g3TCxFQUFJMEwsRUFDSkcsR0NsS0csRURvS0U3TCxFQUFJNEwsSUFDVEMsR0N2S0csR0FGRSxJRDJLTEEsSUFDQUEsRUMzS1UsR0Q2S1BBLEVBbUJKLFNBQVNDLEdBQWVMLEVBQU1DLEVBQU1DLEVBQU1DLEVBQU1HLEdBQ25ELE9BQUlBLEdBQ0FBLEVBQVcsR0FBS04sRUFDaEJNLEVBQVcsR0FBS0wsRUFDaEJLLEVBQVcsR0FBS0osRUFDaEJJLEVBQVcsR0FBS0gsRUFDVEcsR0FHQSxDQUFDTixFQUFNQyxFQUFNQyxFQUFNQyxHQVEzQixTQUFTSSxHQUFvQkQsR0FDaEMsT0FBT0QsR0FBZXBLLElBQVVBLEtBQVUsS0FBVyxJQUFXcUssR0FpRDdELFNBQVMsR0FBT0UsRUFBU0MsR0FDNUIsT0FBUUQsRUFBUSxJQUFNQyxFQUFRLElBQzFCRCxFQUFRLElBQU1DLEVBQVEsSUFDdEJELEVBQVEsSUFBTUMsRUFBUSxJQUN0QkQsRUFBUSxJQUFNQyxFQUFRLEdBeUN2QixTQUFTZCxHQUFpQnZJLEVBQVFnRixHQUNqQ0EsRUFBVyxHQUFLaEYsRUFBTyxLQUN2QkEsRUFBTyxHQUFLZ0YsRUFBVyxJQUV2QkEsRUFBVyxHQUFLaEYsRUFBTyxLQUN2QkEsRUFBTyxHQUFLZ0YsRUFBVyxJQUV2QkEsRUFBVyxHQUFLaEYsRUFBTyxLQUN2QkEsRUFBTyxHQUFLZ0YsRUFBVyxJQUV2QkEsRUFBVyxHQUFLaEYsRUFBTyxLQUN2QkEsRUFBTyxHQUFLZ0YsRUFBVyxJQXNCeEIsU0FBU3NFLEdBQXNCdEosRUFBUXVKLEVBQWlCQyxFQUFRQyxFQUFLQyxHQUN4RSxLQUFPRixFQUFTQyxFQUFLRCxHQUFVRSxFQUMzQkMsR0FBUzNKLEVBQVF1SixFQUFnQkMsR0FBU0QsRUFBZ0JDLEVBQVMsSUFFdkUsT0FBT3hKLEVBa0JKLFNBQVMySixHQUFTM0osRUFBUTlDLEVBQUdDLEdBQ2hDNkMsRUFBTyxHQUFLaEQsS0FBS0YsSUFBSWtELEVBQU8sR0FBSTlDLEdBQ2hDOEMsRUFBTyxHQUFLaEQsS0FBS0YsSUFBSWtELEVBQU8sR0FBSTdDLEdBQ2hDNkMsRUFBTyxHQUFLaEQsS0FBS0QsSUFBSWlELEVBQU8sR0FBSTlDLEdBQ2hDOEMsRUFBTyxHQUFLaEQsS0FBS0QsSUFBSWlELEVBQU8sR0FBSTdDLEdBVzdCLFNBQVN5TSxHQUFjNUosRUFBUTZFLEdBQ2xDLElBQUlnRixFQUVKLE9BREFBLEVBQU1oRixFQUFTaUYsR0FBYzlKLE9BSTdCNkosRUFBTWhGLEVBQVNrRixHQUFlL0osT0FJOUI2SixFQUFNaEYsRUFBU21GLEdBQVloSyxLQU5oQjZKLEdBVVhBLEVBQU1oRixFQUFTb0YsR0FBV2pLLE9BSW5CLEVBUUosU0FBU2tLLEdBQVFsSyxHQUNwQixJQUFJbUssRUFBTyxFQUlYLE9BSEssR0FBUW5LLEtBQ1RtSyxFQUFPLEdBQVNuSyxHQUFVb0ssR0FBVXBLLElBRWpDbUssRUFRSixTQUFTTCxHQUFjOUosR0FDMUIsTUFBTyxDQUFDQSxFQUFPLEdBQUlBLEVBQU8sSUFRdkIsU0FBUytKLEdBQWUvSixHQUMzQixNQUFPLENBQUNBLEVBQU8sR0FBSUEsRUFBTyxJQVF2QixTQUFTcUssR0FBVXJLLEdBQ3RCLE1BQU8sRUFBRUEsRUFBTyxHQUFLQSxFQUFPLElBQU0sR0FBSUEsRUFBTyxHQUFLQSxFQUFPLElBQU0sR0FRNUQsU0FBU3NLLEdBQVV0SyxFQUFRdUssR0FDOUIsSUFBSXZGLEVBZ0JKLE1EMWNhLGdCQzJiVHVGLEVBQ0F2RixFQUFhOEUsR0FBYzlKLEdEM2JqQixpQkM2Ykx1SyxFQUNMdkYsRUFBYStFLEdBQWUvSixHQUV2QnVLLElBQVdDLEdBQ2hCeEYsRUFBYWlGLEdBQVdqSyxHRC9iakIsY0NpY0Z1SyxFQUNMdkYsRUFBYWdGLEdBQVloSyxHQUd6QixHQUFPLEVBQU8sSUFFWGdGLEVBc0JKLFNBQVN5RixHQUFrQkMsRUFBUXBKLEVBQVlxSixFQUFVQyxFQUFNMUIsR0FDbEUsSUFBSXJMLEVBQU15RCxFQUFhc0osRUFBSyxHQUFNLEVBQzlCOU0sRUFBTXdELEVBQWFzSixFQUFLLEdBQU0sRUFDOUJDLEVBQWM3TixLQUFLOEssSUFBSTZDLEdBQ3ZCRyxFQUFjOU4sS0FBSzZLLElBQUk4QyxHQUN2QkksRUFBT2xOLEVBQUtnTixFQUNaRyxFQUFPbk4sRUFBS2lOLEVBQ1pHLEVBQU9uTixFQUFLK00sRUFDWkssRUFBT3BOLEVBQUtnTixFQUNaNU4sRUFBSXdOLEVBQU8sR0FDWHZOLEVBQUl1TixFQUFPLEdBQ1hTLEVBQUtqTyxFQUFJNk4sRUFBT0csRUFDaEJ6TixFQUFLUCxFQUFJNk4sRUFBT0csRUFDaEJ2TixFQUFLVCxFQUFJNk4sRUFBT0csRUFDaEJFLEVBQUtsTyxFQUFJNk4sRUFBT0csRUFDaEJHLEVBQUtsTyxFQUFJNk4sRUFBT0MsRUFDaEJ2TixFQUFLUCxFQUFJNk4sRUFBT0MsRUFDaEJyTixFQUFLVCxFQUFJNk4sRUFBT0MsRUFDaEJLLEVBQUtuTyxFQUFJNk4sRUFBT0MsRUFDcEIsT0FBT2hDLEdBQWVqTSxLQUFLRixJQUFJcU8sRUFBSTFOLEVBQUlFLEVBQUl5TixHQUFLcE8sS0FBS0YsSUFBSXVPLEVBQUkzTixFQUFJRSxFQUFJME4sR0FBS3RPLEtBQUtELElBQUlvTyxFQUFJMU4sRUFBSUUsRUFBSXlOLEdBQUtwTyxLQUFLRCxJQUFJc08sRUFBSTNOLEVBQUlFLEVBQUkwTixHQUFLcEMsR0FRM0gsU0FBU2tCLEdBQVVwSyxHQUN0QixPQUFPQSxFQUFPLEdBQUtBLEVBQU8sR0FtQnZCLFNBQVN1TCxHQUFnQm5DLEVBQVNDLEVBQVNILEdBQzlDLElBQUlzQyxFQUFldEMsR0ExVlosQ0FBQ3JLLElBQVVBLEtBQVUsS0FBVyxLQXdYdkMsT0E3Qkk0TSxHQUFXckMsRUFBU0MsSUFDaEJELEVBQVEsR0FBS0MsRUFBUSxHQUNyQm1DLEVBQWEsR0FBS3BDLEVBQVEsR0FHMUJvQyxFQUFhLEdBQUtuQyxFQUFRLEdBRTFCRCxFQUFRLEdBQUtDLEVBQVEsR0FDckJtQyxFQUFhLEdBQUtwQyxFQUFRLEdBRzFCb0MsRUFBYSxHQUFLbkMsRUFBUSxHQUUxQkQsRUFBUSxHQUFLQyxFQUFRLEdBQ3JCbUMsRUFBYSxHQUFLcEMsRUFBUSxHQUcxQm9DLEVBQWEsR0FBS25DLEVBQVEsR0FFMUJELEVBQVEsR0FBS0MsRUFBUSxHQUNyQm1DLEVBQWEsR0FBS3BDLEVBQVEsR0FHMUJvQyxFQUFhLEdBQUtuQyxFQUFRLElBSTlCRixHQUFvQnFDLEdBRWpCQSxFQXdCSixTQUFTdkIsR0FBV2pLLEdBQ3ZCLE1BQU8sQ0FBQ0EsRUFBTyxHQUFJQSxFQUFPLElBUXZCLFNBQVNnSyxHQUFZaEssR0FDeEIsTUFBTyxDQUFDQSxFQUFPLEdBQUlBLEVBQU8sSUFRdkIsU0FBUyxHQUFTQSxHQUNyQixPQUFPQSxFQUFPLEdBQUtBLEVBQU8sR0FTdkIsU0FBU3lMLEdBQVdyQyxFQUFTQyxHQUNoQyxPQUFRRCxFQUFRLElBQU1DLEVBQVEsSUFDMUJELEVBQVEsSUFBTUMsRUFBUSxJQUN0QkQsRUFBUSxJQUFNQyxFQUFRLElBQ3RCRCxFQUFRLElBQU1DLEVBQVEsR0FRdkIsU0FBUyxHQUFRckosR0FDcEIsT0FBT0EsRUFBTyxHQUFLQSxFQUFPLElBQU1BLEVBQU8sR0FBS0EsRUFBTyxHRTFtQmhELFNBQVMwTCxHQUFzQkMsRUFBV0MsRUFBWUMsRUFBZ0JDLEdBQ3pFLElBQUlDLEVBQVNGLEdBQWtCQSxFQUFlMVcsT0FDeEMwVyxFQUFlRyxRQUNmdEYsR0FDSSxJQUFJRSxnQkFBZ0IrRSxHQUFhLElBQUtDLEdBQWMsS0FDcERLLFNBQVNDLGNBQWMsVUFRakMsT0FQSVAsSUFDQUksRUFBT0ksTUFBUVIsR0FFZkMsSUFDQUcsRUFBT0ssT0FBU1IsR0FHNEJHLEVBQU9NLFdBQVcsS0FBTVAsR0FnQ3JFLFNBQVNRLEdBQVlDLEVBQVNDLEdBQ2pDLElBQUlDLEVBQVNELEVBQVFFLFdBQ2pCRCxHQUNBQSxFQUFPRSxhQUFhSixFQUFTQyxHQU85QixTQUFTSSxHQUFXQyxHQUN2QixPQUFPQSxHQUFRQSxFQUFLSCxXQUFhRyxFQUFLSCxXQUFXSSxZQUFZRCxHQUFRLEtDckV6RSxJQUFJLEdBQXdDLFdBQ3hDLElBQUlqVyxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBMFA1QyxTQTdOeUMsU0FBVUcsR0FLL0MsU0FBU3FWLEVBQW9Cdk4sR0FDekIsSUFBSTNILEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNdUwsSUFBVXZMLEtBd0N4QyxPQW5DQTRELEVBQU1tVixVQUFZLEtBS2xCblYsRUFBTW9WLG1CQU9OcFYsRUFBTXFWLGNMcEJILENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdLMkJuQnJWLEVBQU1zVixlTDNCSCxDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHS2tDbkJ0VixFQUFNa08sc0JMbENILENBQUMsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEdLc0NuQmxPLEVBQU1tTyxRQUFVLEtBSWhCbk8sRUFBTXVWLGlCQUFrQixFQUNqQnZWLEVBNktYLE9BMU5BLEdBQVVrVixFQUFxQnJWLEdBcUQvQnFWLEVBQW9CMVksVUFBVWdaLGFBQWUsU0FBVWpaLEVBQVFnVCxFQUFXM0ksR0FDdEUsSUFDSXVPLEVBQVdoSCxFQURYc0gsRUFBaUJyWixLQUFLbVIsV0FBV2hHLGVBd0JyQyxHQXRCSWhMLEdBQ3lCLEtBQXpCQSxFQUFPbVosTUFBTTlPLFNBQ2JySyxFQUFPOEssWUFBY29PLElBQ2pCdkIsRUFBUzNYLEVBQU9vWiw2QkFDRUMsb0JBQ2xCekgsRUFBVStGLEVBQU9NLFdBQVcsUUFHaENyRyxHQUMwQixJQUF6QkEsRUFBUStGLE9BQU9JLE9BQ1puRyxFQUFRK0YsT0FBT3dCLE1BQU1uRyxZQUFjQSxFQU1sQ25ULEtBQUttWixrQkFFVm5aLEtBQUsrWSxVQUFZLEtBQ2pCL1ksS0FBSytSLFFBQVUsS0FDZi9SLEtBQUttWixpQkFBa0IsSUFSdkJuWixLQUFLK1ksVUFBWTVZLEVBQ2pCSCxLQUFLK1IsUUFBVUEsRUFDZi9SLEtBQUttWixpQkFBa0IsSUFRdEJuWixLQUFLK1ksVUFBVyxFQUNqQkEsRUFBWWYsU0FBU0MsY0FBYyxRQUN6QmhOLFVBQVlvTyxFQUN0QixJQUFJQyxFQUFRUCxFQUFVTyxNQUN0QkEsRUFBTUcsU0FBVyxXQUNqQkgsRUFBTXBCLE1BQVEsT0FDZG9CLEVBQU1uQixPQUFTLE9BRWYsSUFBSUwsR0FESi9GLEVBQVUwRixNQUNXSyxPQUNyQmlCLEVBQVVXLFlBQVk1QixJQUN0QndCLEVBQVF4QixFQUFPd0IsT0FDVEcsU0FBVyxXQUNqQkgsRUFBTUssS0FBTyxJQUNiTCxFQUFNTSxnQkFBa0IsV0FDeEI1WixLQUFLK1ksVUFBWUEsRUFDakIvWSxLQUFLK1IsUUFBVUEsSUFTdkIrRyxFQUFvQjFZLFVBQVV5WixjQUFnQixTQUFVOUgsRUFBU3BELEVBQVk1QyxHQUN6RSxJQUFJK04sRUFBVTlELEdBQVdqSyxHQUNyQmdPLEVBQVdoRSxHQUFZaEssR0FDdkJpTyxFQUFjbEUsR0FBZS9KLEdBQzdCa08sRUFBYXBFLEdBQWM5SixHQUMvQm5HLEdBQWUrSSxFQUFXdUwsMkJBQTRCSixHQUN0RGxVLEdBQWUrSSxFQUFXdUwsMkJBQTRCSCxHQUN0RG5VLEdBQWUrSSxFQUFXdUwsMkJBQTRCRixHQUN0RHBVLEdBQWUrSSxFQUFXdUwsMkJBQTRCRCxHQUN0RCxJQUFJRSxFQUFXbmEsS0FBSzhSLHNCQUNwQmxNLEdBQWV1VSxFQUFVTCxHQUN6QmxVLEdBQWV1VSxFQUFVSixHQUN6Qm5VLEdBQWV1VSxFQUFVSCxHQUN6QnBVLEdBQWV1VSxFQUFVRixHQUN6QmxJLEVBQVFxSSxPQUNSckksRUFBUXNJLFlBQ1J0SSxFQUFRdUksT0FBT3ZSLEtBQUsyQyxNQUFNb08sRUFBUSxJQUFLL1EsS0FBSzJDLE1BQU1vTyxFQUFRLEtBQzFEL0gsRUFBUXdJLE9BQU94UixLQUFLMkMsTUFBTXFPLEVBQVMsSUFBS2hSLEtBQUsyQyxNQUFNcU8sRUFBUyxLQUM1RGhJLEVBQVF3SSxPQUFPeFIsS0FBSzJDLE1BQU1zTyxFQUFZLElBQUtqUixLQUFLMkMsTUFBTXNPLEVBQVksS0FDbEVqSSxFQUFRd0ksT0FBT3hSLEtBQUsyQyxNQUFNdU8sRUFBVyxJQUFLbFIsS0FBSzJDLE1BQU11TyxFQUFXLEtBQ2hFbEksRUFBUXlJLFFBUVoxQixFQUFvQjFZLFVBQVVxYSxxQkFBdUIsU0FBVTFhLEVBQU1nUyxFQUFTcEQsR0FDMUUsSUFBSXBELEVBQVF2TCxLQUFLbVIsV0FDakIsR0FBSTVGLEVBQU1yRyxZQUFZbkYsR0FBTyxDQUN6QixJQUFJMmEsRUFBVSxJQUFJLEdBQVkzYSxFQUFNQyxLQUFLOFIsc0JBQXVCbkQsRUFBWW9ELEdBQzVFeEcsRUFBTWpILGNBQWNvVyxLQVE1QjVCLEVBQW9CMVksVUFBVXVhLFVBQVksU0FBVTVJLEVBQVNwRCxHQUN6RDNPLEtBQUt5YSxxQmRqS0UsWWNpSzhDMUksRUFBU3BELElBT2xFbUssRUFBb0IxWSxVQUFVd2EsV0FBYSxTQUFVN0ksRUFBU3BELEdBQzFEM08sS0FBS3lhLHFCZG5LRyxhY21LOEMxSSxFQUFTcEQsSUFjbkVtSyxFQUFvQjFZLFVBQVV5YSxtQkFBcUIsU0FBVXBFLEVBQVFwSixFQUFZcUosRUFBVW9FLEVBQVk1QyxFQUFPQyxFQUFRNEMsR0FDbEgsSUFBSTFILEVBQU02RSxFQUFRLEVBQ2Q1RSxFQUFNNkUsRUFBUyxFQUNmNUUsRUFBS3VILEVBQWF6TixFQUNsQm1HLEdBQU1ELEVBQ05HLEdBQU8rQyxFQUFPLEdBQUtzRSxFQUNuQnBILEdBQU84QyxFQUFPLEdBQ2xCLE9BQU9yRCxHQUFpQnBULEtBQUtpWixjQUFlNUYsRUFBS0MsRUFBS0MsRUFBSUMsR0FBS2tELEVBQVVoRCxFQUFLQyxJQVVsRm1GLEVBQW9CMVksVUFBVThRLGVBQWlCLFNBQVUxQyxFQUFPRyxFQUFZcUMsR0FDeEUsSUFXSTNQLEVBWEEyWixFQUFjcFYsR0FBZTVGLEtBQUs4UixzQkFBdUJ0RCxFQUFNeU0sU0FDL0RsSixFQUFVL1IsS0FBSytSLFFBRWZtSixFQURRbGIsS0FBS21SLFdBQ09uRixZQUN4QixHQUFJa1AsSUFHSzFHLEdBQW1CMEcsRUFGRHRWLEdBQWUrSSxFQUFXd00sMkJBQTRCM00sRUFBTXlNLFVBRy9FLE9BQU8sS0FJZixJQUNJLElBQUloUyxFQUFJRixLQUFLMkMsTUFBTXNQLEVBQVksSUFDM0I5UixFQUFJSCxLQUFLMkMsTUFBTXNQLEVBQVksSUFDM0JJLEVBQVlwRCxTQUFTQyxjQUFjLFVBQ25Db0QsRUFBYUQsRUFBVWhELFdBQVcsTUFDdENnRCxFQUFVbEQsTUFBUSxFQUNsQmtELEVBQVVqRCxPQUFTLEVBQ25Ca0QsRUFBV0MsVUFBVSxFQUFHLEVBQUcsRUFBRyxHQUM5QkQsRUFBV0UsVUFBVXhKLEVBQVErRixPQUFRN08sRUFBR0MsRUFBRyxFQUFHLEVBQUcsRUFBRyxFQUFHLEVBQUcsR0FDMUQ3SCxFQUFPZ2EsRUFBV0csYUFBYSxFQUFHLEVBQUcsRUFBRyxHQUFHbmEsS0FFL0MsTUFBT29hLEdBQ0gsTUFBaUIsa0JBQWJBLEVBQUkvUyxLQUVHLElBQUlnVCxXQUVScmEsRUFFWCxPQUFnQixJQUFaQSxFQUFLLEdBQ0UsS0FFSkEsR0FFSnlYLEVBM042QixDQTROdEMsSUNsUEYsSUFBSTZDLEdBQTJCLFdBTzNCLFNBQVNBLEVBQVVoSCxFQUFNRSxFQUFNRCxFQUFNRSxHQUlqQzlVLEtBQUsyVSxLQUFPQSxFQUlaM1UsS0FBSzZVLEtBQU9BLEVBSVo3VSxLQUFLNFUsS0FBT0EsRUFJWjVVLEtBQUs4VSxLQUFPQSxFQWtGaEIsT0E1RUE2RyxFQUFVdmIsVUFBVXdiLFNBQVcsU0FBVXJMLEdBQ3JDLE9BQU92USxLQUFLeVUsV0FBV2xFLEVBQVUsR0FBSUEsRUFBVSxLQU1uRG9MLEVBQVV2YixVQUFVeWIsa0JBQW9CLFNBQVVsTCxHQUM5QyxPQUFRM1EsS0FBSzJVLE1BQVFoRSxFQUFVZ0UsTUFDM0JoRSxFQUFVa0UsTUFBUTdVLEtBQUs2VSxNQUN2QjdVLEtBQUs0VSxNQUFRakUsRUFBVWlFLE1BQ3ZCakUsRUFBVW1FLE1BQVE5VSxLQUFLOFUsTUFPL0I2RyxFQUFVdmIsVUFBVXFVLFdBQWEsU0FBVXhMLEVBQUdDLEdBQzFDLE9BQU9sSixLQUFLMlUsTUFBUTFMLEdBQUtBLEdBQUtqSixLQUFLNlUsTUFBUTdVLEtBQUs0VSxNQUFRMUwsR0FBS0EsR0FBS2xKLEtBQUs4VSxNQU0zRTZHLEVBQVV2YixVQUFVcUIsT0FBUyxTQUFVa1AsR0FDbkMsT0FBUTNRLEtBQUsyVSxNQUFRaEUsRUFBVWdFLE1BQzNCM1UsS0FBSzRVLE1BQVFqRSxFQUFVaUUsTUFDdkI1VSxLQUFLNlUsTUFBUWxFLEVBQVVrRSxNQUN2QjdVLEtBQUs4VSxNQUFRbkUsRUFBVW1FLE1BSy9CNkcsRUFBVXZiLFVBQVVnQixPQUFTLFNBQVV1UCxHQUMvQkEsRUFBVWdFLEtBQU8zVSxLQUFLMlUsT0FDdEIzVSxLQUFLMlUsS0FBT2hFLEVBQVVnRSxNQUV0QmhFLEVBQVVrRSxLQUFPN1UsS0FBSzZVLE9BQ3RCN1UsS0FBSzZVLEtBQU9sRSxFQUFVa0UsTUFFdEJsRSxFQUFVaUUsS0FBTzVVLEtBQUs0VSxPQUN0QjVVLEtBQUs0VSxLQUFPakUsRUFBVWlFLE1BRXRCakUsRUFBVW1FLEtBQU85VSxLQUFLOFUsT0FDdEI5VSxLQUFLOFUsS0FBT25FLEVBQVVtRSxPQU05QjZHLEVBQVV2YixVQUFVK1YsVUFBWSxXQUM1QixPQUFPblcsS0FBSzhVLEtBQU85VSxLQUFLNFUsS0FBTyxHQUtuQytHLEVBQVV2YixVQUFVMGIsUUFBVSxXQUMxQixNQUFPLENBQUM5YixLQUFLK2IsV0FBWS9iLEtBQUttVyxjQUtsQ3dGLEVBQVV2YixVQUFVMmIsU0FBVyxXQUMzQixPQUFPL2IsS0FBSzZVLEtBQU83VSxLQUFLMlUsS0FBTyxHQU1uQ2dILEVBQVV2YixVQUFVb1gsV0FBYSxTQUFVN0csR0FDdkMsT0FBUTNRLEtBQUsyVSxNQUFRaEUsRUFBVWtFLE1BQzNCN1UsS0FBSzZVLE1BQVFsRSxFQUFVZ0UsTUFDdkIzVSxLQUFLNFUsTUFBUWpFLEVBQVVtRSxNQUN2QjlVLEtBQUs4VSxNQUFRbkUsRUFBVWlFLE1BRXhCK0csRUF6R21CLEdBbUh2QixTQUFTLEdBQWVoSCxFQUFNRSxFQUFNRCxFQUFNRSxFQUFNbkUsR0FDbkQsWUFBa0IxTCxJQUFkMEwsR0FDQUEsRUFBVWdFLEtBQU9BLEVBQ2pCaEUsRUFBVWtFLEtBQU9BLEVBQ2pCbEUsRUFBVWlFLEtBQU9BLEVBQ2pCakUsRUFBVW1FLEtBQU9BLEVBQ1ZuRSxHQUdBLElBQUlnTCxHQUFVaEgsRUFBTUUsRUFBTUQsRUFBTUUsR0FHL0MsWUM5SEEsSUFBSWtILEdBQVEsQ0FLUkMsUUFBUyxVQUtUQyxLQUFNLEtBS05DLE9BQVEsSUFLUkMsT0FBUSxTQUtSQyxZQUFhLGNBS2JDLE9BQVEsU0FRREMsR0FBa0IsR0FFN0JBLEdBQWdCUCxHQUFNQyxTQUFZLEVBQUlsVCxLQUFLa0IsR0FBSyxRQUFXLElBQzNEc1MsR0FBZ0JQLEdBQU1FLE1BQVEsTUFDOUJLLEdBQWdCUCxHQUFNRyxRQUFVLEVBQ2hDSSxHQUFnQlAsR0FBTU0sUUFBVSxLQUFPLEtBQ3ZDLFlDZ01BLEdBbk1nQyxXQUk1QixTQUFTRSxFQUFXbFMsR0FLaEJ0SyxLQUFLeWMsTUFBUW5TLEVBQVEvQixLQVFyQnZJLEtBQUswYyxPQUFzRHBTLEVBQWEsTUFReEV0SyxLQUFLMmMsYUFBNkIxWCxJQUFuQnFGLEVBQVF5QixPQUF1QnpCLEVBQVF5QixPQUFTLEtBUS9EL0wsS0FBSzRjLGtCQUN1QjNYLElBQXhCcUYsRUFBUXVTLFlBQTRCdlMsRUFBUXVTLFlBQWMsS0FLOUQ3YyxLQUFLOGMsc0JBQzJCN1gsSUFBNUJxRixFQUFReVMsZ0JBQWdDelMsRUFBUXlTLGdCQUFrQixNQUt0RS9jLEtBQUtnZCxhQUE2Qi9YLElBQW5CcUYsRUFBUTJTLFFBQXVCM1MsRUFBUTJTLE9BS3REamQsS0FBS2tkLGFBQWVsZCxLQUFLZ2QsVUFBV2hkLEtBQUsyYyxTQUt6QzNjLEtBQUttZCx3QkFBMEI3UyxFQUFROFMsbUJBS3ZDcGQsS0FBS3FkLGlCQUFtQixLQUt4QnJkLEtBQUtzZCxlQUFpQmhULEVBQVFpVCxjQWdJbEMsT0EzSEFmLEVBQVdwYyxVQUFVb2QsU0FBVyxXQUM1QixPQUFPeGQsS0FBS2tkLFdBT2hCVixFQUFXcGMsVUFBVXFkLFFBQVUsV0FDM0IsT0FBT3pkLEtBQUt5YyxPQU9oQkQsRUFBV3BjLFVBQVU0TCxVQUFZLFdBQzdCLE9BQU9oTSxLQUFLMmMsU0FPaEJILEVBQVdwYyxVQUFVc2QsU0FBVyxXQUM1QixPQUFPMWQsS0FBSzBjLFFBU2hCRixFQUFXcGMsVUFBVXVkLGlCQUFtQixXQUNwQyxPQUFPM2QsS0FBS3NkLGdCQUFrQmYsR0FBZ0J2YyxLQUFLMGMsU0FPdkRGLEVBQVdwYyxVQUFVd2QsZUFBaUIsV0FDbEMsT0FBTzVkLEtBQUs0YyxjQWFoQkosRUFBV3BjLFVBQVV5ZCxtQkFBcUIsV0FDdEMsT0FBTzdkLEtBQUs4YyxrQkFPaEJOLEVBQVdwYyxVQUFVMGQsU0FBVyxXQUM1QixPQUFPOWQsS0FBS2dkLFNBT2hCUixFQUFXcGMsVUFBVTJkLFVBQVksU0FBVWQsR0FDdkNqZCxLQUFLZ2QsUUFBVUMsRUFDZmpkLEtBQUtrZCxhQUFlRCxJQUFVamQsS0FBSzJjLFVBS3ZDSCxFQUFXcGMsVUFBVTRkLG1CQUFxQixXQUN0QyxPQUFPaGUsS0FBS3FkLGtCQUtoQmIsRUFBV3BjLFVBQVU2ZCxtQkFBcUIsU0FBVUMsR0FDaERsZSxLQUFLcWQsaUJBQW1CYSxHQU81QjFCLEVBQVdwYyxVQUFVcU0sVUFBWSxTQUFVVixHQUN2Qy9MLEtBQUsyYyxRQUFVNVEsRUFDZi9MLEtBQUtrZCxhQUFlbGQsS0FBS2dkLFVBQVdqUixJQVF4Q3lRLEVBQVdwYyxVQUFVK2QsZUFBaUIsU0FBVXRCLEdBQzVDN2MsS0FBSzRjLGFBQWVDLEdBUXhCTCxFQUFXcGMsVUFBVWdlLHNCQUF3QixTQUFVQyxHQUNuRHJlLEtBQUttZCx3QkFBMEJrQixHQU9uQzdCLEVBQVdwYyxVQUFVa2UsdUJBQXlCLFdBQzFDLE9BQU90ZSxLQUFLbWQseUJBRVRYLEVBak1vQixHQ2pEL0IsSUFBSSxHQUF3QyxXQUN4QyxJQUFJN1osRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTJCakNpYixHQUFTLFFBS1RDLEdBQVl6VixLQUFLa0IsR0FBS3NVLEdBS3RCRSxHQUFTLEVBQUVELElBQVlBLEdBQVdBLEdBQVdBLElBSzdDRSxHQUFlLEVBQUUsS0FBTSxHQUFJLElBQUssSUFNaENDLEdBQWFKLEdBQVN4VixLQUFLTSxJQUFJTixLQUFLNlYsSUFBSTdWLEtBQUtrQixHQUFLLElBS3pENFUsR0FBb0MsU0FBVXBiLEdBSzlDLFNBQVNvYixFQUFtQnRXLEdBQ3hCLE9BQU85RSxFQUFPTCxLQUFLcEQsS0FBTSxDQUNyQnVJLEtBQU1BLEVBQ051VyxNQUFPLFVBQ1AvUyxPQUFRMFMsR0FDUnhCLFFBQVEsRUFDUkosWUFBYTZCLEdBQ2J0QixtQkFBb0IsU0FBVS9QLEVBQVkwUixHQUN0QyxPQUFPMVIsRUFBYXJFLEVBQUsrVixFQUFNLEdBQUtSLFFBRXRDdmUsS0FFVixPQWhCQSxHQUFVNmUsRUFBb0JwYixHQWdCdkJvYixFQWpCNEIsQ0FrQnJDLElBT1NHLEdBQWMsQ0FDckIsSUFBSUgsR0FBbUIsYUFDdkIsSUFBSUEsR0FBbUIsZUFDdkIsSUFBSUEsR0FBbUIsZUFDdkIsSUFBSUEsR0FBbUIsZUFDdkIsSUFBSUEsR0FBbUIsaURDbkYzQixJQUFJLEdBQXdDLFdBQ3hDLElBQUlsYyxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBaUNqQyxHQUFTLEVBQUUsS0FBTSxHQUFJLElBQUssSUFLMUIsR0FaUyxRQVlVeUYsS0FBS2tCLEdBQWUsSUFTOUNnVixHQUFvQyxTQUFVeGIsR0FNOUMsU0FBU3diLEVBQW1CMVcsRUFBTTJXLEdBQzlCLE9BQU96YixFQUFPTCxLQUFLcEQsS0FBTSxDQUNyQnVJLEtBQU1BLEVBQ051VyxNQUFPLFdBQ1AvUyxPQUFRLEdBQ1JnUixnQkFBaUJtQyxFQUNqQmpDLFFBQVEsRUFDUk0sY0FBZSxHQUNmVixZQUFhLE1BQ1g3YyxLQUVWLE9BaEJBLEdBQVVpZixFQUFvQnhiLEdBZ0J2QndiLEVBakI0QixDQWtCckMsSUFPUyxHQUFjLENBQ3JCLElBQUlBLEdBQW1CLFVBQ3ZCLElBQUlBLEdBQW1CLFlBQWEsT0FDcEMsSUFBSUEsR0FBbUIsaUNBQ3ZCLElBQUlBLEdBQW1CLDRCQUN2QixJQUFJQSxHQUFtQiwrQ0FBZ0QsUUN2RXZFRSxHQUFRLEdDRVJDLEdBQWEsR0FlVixTQUFTLEdBQUkvYyxFQUFRZ2QsRUFBYUMsR0FDckMsSUFBSUMsRUFBYWxkLEVBQU9vYixVQUNwQitCLEVBQWtCSCxFQUFZNUIsVUFDNUI4QixLQUFjSCxLQUNoQkEsR0FBV0csR0FBYyxJQUU3QkgsR0FBV0csR0FBWUMsR0FBbUJGLEVDUnZDLElBQUlHLEdBQWlCLFVBVXJCLFNBQVNDLEdBQVlDLEVBQUlDLEVBQUlDLEdBQ2hDLElBQUlDLEVBQVNELEdBQWNKLEdBQ3ZCTSxFQUFPLEdBQVVKLEVBQUcsSUFDcEJLLEVBQU8sR0FBVUosRUFBRyxJQUNwQkssR0FBZUQsRUFBT0QsR0FBUSxFQUM5QkcsRUFBYyxHQUFVTixFQUFHLEdBQUtELEVBQUcsSUFBTSxFQUN6Qy9lLEVBQUltSSxLQUFLNkssSUFBSXFNLEdBQWVsWCxLQUFLNkssSUFBSXFNLEdBQ3JDbFgsS0FBSzZLLElBQUlzTSxHQUNMblgsS0FBSzZLLElBQUlzTSxHQUNUblgsS0FBSzhLLElBQUlrTSxHQUNUaFgsS0FBSzhLLElBQUltTSxHQUNqQixPQUFPLEVBQUlGLEVBQVMvVyxLQUFLb1gsTUFBTXBYLEtBQUtxWCxLQUFLeGYsR0FBSW1JLEtBQUtxWCxLQUFLLEVBQUl4ZixJQXNMeEQsU0FBUzJVLEdBQU9vSyxFQUFJVSxFQUFVQyxFQUFTVCxHQUMxQyxJQUFJQyxFQUFTRCxHQUFjSixHQUN2Qk0sRUFBTyxHQUFVSixFQUFHLElBQ3BCWSxFQUFPLEdBQVVaLEVBQUcsSUFDcEJhLEVBQU9ILEVBQVdQLEVBQ2xCVyxFQUFNMVgsS0FBSzJYLEtBQUszWCxLQUFLNkssSUFBSW1NLEdBQVFoWCxLQUFLOEssSUFBSTJNLEdBQzFDelgsS0FBSzhLLElBQUlrTSxHQUFRaFgsS0FBSzZLLElBQUk0TSxHQUFRelgsS0FBSzhLLElBQUl5TSxJQUcvQyxNQUFPLENBQUN2VyxHQUZFd1csRUFDTnhYLEtBQUtvWCxNQUFNcFgsS0FBSzZLLElBQUkwTSxHQUFXdlgsS0FBSzZLLElBQUk0TSxHQUFRelgsS0FBSzhLLElBQUlrTSxHQUFPaFgsS0FBSzhLLElBQUkyTSxHQUFRelgsS0FBSzZLLElBQUltTSxHQUFRaFgsS0FBSzZLLElBQUk2TSxLQUN2RjFXLEdBQVUwVyxJQ2pKL0IsU0FBU0UsR0FBZUMsRUFBT0MsRUFBWUMsR0FDOUMsSUFBSTVlLEVBQ0osUUFBbUIrQyxJQUFmNGIsRUFBMEIsQ0FDMUIsSUFBSyxJQUFJMWYsRUFBSSxFQUFHZ0IsRUFBS3llLEVBQU0xZixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQ3pDMGYsRUFBVzFmLEdBQUt5ZixFQUFNemYsR0FFMUJlLEVBQVMyZSxPQUdUM2UsRUFBUzBlLEVBQU0zRixRQUVuQixPQUFPL1ksRUFRSixTQUFTNmUsR0FBa0JILEVBQU9DLEVBQVlDLEdBQ2pELFFBQW1CN2IsSUFBZjRiLEdBQTRCRCxJQUFVQyxFQUFZLENBQ2xELElBQUssSUFBSTFmLEVBQUksRUFBR2dCLEVBQUt5ZSxFQUFNMWYsT0FBUUMsRUFBSWdCLElBQU1oQixFQUN6QzBmLEVBQVcxZixHQUFLeWYsRUFBTXpmLEdBRTFCeWYsRUFBUUMsRUFFWixPQUFPRCxFQVNKLFNBQVNJLEdBQWN0USxJSC9GdkIsU0FBYW5JLEVBQU1tSSxHQUN0QnlPLEdBQU01VyxHQUFRbUksRUcrRmR1USxDQUFRdlEsRUFBVytNLFVBQVcvTSxHQUM5QixHQUFpQkEsRUFBWUEsRUFBWWlRLElBaUJ0QyxTQUFTLEdBQUlPLEdBQ2hCLE1BQWlDLGlCQUFuQkEsRUg1SE4vQixHQURRNVcsRUc4SG9CLElINUhoQzRXLEdBQU01VyxFQUFLNFksUUFBUSx5Q0FBMEMsYUFDN0QsS0c0SDRCLEdBQW9CLEtIL0hqRCxJQUFhNVksRUdxSmIsU0FBUzZVLEdBQW1CMU0sRUFBWXJELEVBQVkwUixFQUFPcUMsR0FFOUQsSUFBSUMsRUFDQUMsR0FGSjVRLEVBQWEsR0FBSUEsSUFFTzROLHlCQUN4QixHQUFJZ0QsRUFDQUQsRUFBa0JDLEVBQU9qVSxFQUFZMFIsR0FDakNxQyxHQUFhQSxJQUFjMVEsRUFBV2dOLGFBQ2xDSCxFQUFnQjdNLEVBQVdpTixzQkFFM0IwRCxFQUNLQSxFQUFrQjlELEVBQWlCaEIsR0FBZ0I2RSxRQUkvRCxDQUNELElBQUl0QyxFQUFRcE8sRUFBV2dOLFdBQ3ZCLEdBQUtvQixHQUFTLGFBQWtCc0MsR0FBY0EsR0FBYSxXQUN2REMsRUFBa0JoVSxNQUVqQixDQUlELElBcUJJa1EsRUFyQkFnRSxFQUFlQyxHQUE0QjlRLEVBQVksR0FBSSxjQUMvRCxHQUFJNlEsSUFBaUJSLElBQXFCakMsSUFBVSxXQUVoRHVDLEVBQWtCaFUsRUFBYXFELEVBQVdpTix1QkFFekMsQ0FDRCxJQUFJOEQsRUFBVyxDQUNYMUMsRUFBTSxHQUFLMVIsRUFBYSxFQUN4QjBSLEVBQU0sR0FDTkEsRUFBTSxHQUFLMVIsRUFBYSxFQUN4QjBSLEVBQU0sR0FDTkEsRUFBTSxHQUNOQSxFQUFNLEdBQUsxUixFQUFhLEVBQ3hCMFIsRUFBTSxHQUNOQSxFQUFNLEdBQUsxUixFQUFhLEdBSzVCZ1UsR0FGWTNCLElBRForQixFQUFXRixFQUFhRSxFQUFVQSxFQUFVLElBQ1h4RyxNQUFNLEVBQUcsR0FBSXdHLEVBQVN4RyxNQUFNLEVBQUcsSUFDbkR5RSxHQUFZK0IsRUFBU3hHLE1BQU0sRUFBRyxHQUFJd0csRUFBU3hHLE1BQU0sRUFBRyxLQUM1QixPQUtuQmhXLEtBSGxCc1ksRUFBZ0I2RCxFQUNkN0UsR0FBZ0I2RSxHQUNoQjFRLEVBQVdpTixzQkFFYjBELEdBQW1COUQsSUFJL0IsT0FBTzhELEVBU0osU0FBU0ssR0FBeUJDLElBbEdsQyxTQUF3QkEsR0FDM0JBLEVBQVlDLFFBQVFaLElBa0dwQmEsQ0FBZUYsR0FDZkEsRUFBWUMsU0FBUSxTQUFVdmYsR0FDMUJzZixFQUFZQyxTQUFRLFNBQVV2QyxHQUN0QmhkLElBQVdnZCxHQUNYLEdBQWlCaGQsRUFBUWdkLEVBQWFzQixVQXNDL0MsU0FBU21CLEdBQWlCcFIsRUFBWXFSLEdBQ3pDLE9BQUtyUixFQUcwQixpQkFBZkEsRUFDTCxHQUFJQSxHQUdzQixFQU4xQixHQUFJcVIsR0F1R1osU0FBU0MsR0FBV0MsRUFBYUMsR0FDcEMsR0FBSUQsSUFBZ0JDLEVBQ2hCLE9BQU8sRUFFWCxJQUFJQyxFQUFhRixFQUFZdkUsYUFBZXdFLEVBQVl4RSxXQUN4RCxPQUFJdUUsRUFBWXhFLFlBQWN5RSxFQUFZekUsV0FJbEIrRCxHQUE0QlMsRUFBYUMsS0FDcEN2QixLQUpsQndCLEVBZ0JSLFNBQVNYLEdBQTRCWSxFQUFrQkMsR0FDMUQsSUFFSUMsRUZ6VkQsU0FBYS9DLEVBQVlDLEdBQzVCLElBQUlyTSxFQUlKLE9BSElvTSxLQUFjSCxJQUFjSSxLQUFtQkosR0FBV0csS0FDMURwTSxFQUFZaU0sR0FBV0csR0FBWUMsSUFFaENyTSxFRW9WYSxDQUZIaVAsRUFBaUIzRSxVQUNaNEUsRUFBc0I1RSxXQUs1QyxPQUhLNkUsSUFDREEsRUFBZ0J2QixJQUVidUIsRUFZSixTQUFTQyxHQUFhbGdCLEVBQVFnZCxHQUdqQyxPQUFPbUMsR0FGZ0IsR0FBSW5mLEdBQ0MsR0FBSWdkLElBaUI3QixTQUFTbE0sR0FBVXBDLEVBQVkxTyxFQUFRZ2QsR0FFMUMsT0FEb0JrRCxHQUFhbGdCLEVBQVFnZCxFQUNsQ2lELENBQWN2UixPQUFZOUwsRUFBVzhMLEVBQVc3UCxRQWlDM0QsSUE1TnNEc2hCLEdBQWNDLEdBQWtCQyxHQTRObEZDLEdBQWlCLEtBd0JkLFNBQVNDLEtBQ1osT0FBT0QsR0FpQkosU0FBU0UsR0FBaUI5UixFQUFZcVIsR0FDekMsT0FDV3JSLEVBV1IsU0FBUytSLEdBQW1CL1IsRUFBWWdTLEdBQzNDLE9BQ1doUyxFQXdCUixTQUFTaVMsR0FBZWpYLEVBQVFnWCxHQUNuQyxPQUNXaFgsRUFpRFgyVixHQUF5QixJQUN6QkEsR0FBeUIsSUFqV3lCYyxHQW9XSixHQXBXa0JDLEdMOUo3RCxTQUFzQjdCLEVBQU9DLEVBQVlDLEdBQzVDLElBQUk1ZixFQUFTMGYsRUFBTTFmLE9BQ2YraEIsRUFBWW5DLEVBQWdCLEVBQUlBLEVBQWdCLEVBQ2hENWUsRUFBUzJlLE9BQ0U1YixJQUFYL0MsSUFHSUEsRUFGQStnQixFQUFZLEVBRUhyQyxFQUFNM0YsUUFHTixJQUFJMVosTUFBTUwsSUFHM0IsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlELEVBQVFDLEdBQUs4aEIsRUFBVyxDQUN4Qy9nQixFQUFPZixHQUFNcWQsR0FBWW9DLEVBQU16ZixHQUFNLElBQ3JDLElBQUkrSCxFQUFJcVYsR0FBU3hWLEtBQUtNLElBQUlOLEtBQUs2VixJQUFLN1YsS0FBS2tCLEtBQU8yVyxFQUFNemYsRUFBSSxHQUFLLElBQU8sTUFDbEUrSCxFQUFJeVYsR0FDSnpWLEVBQUl5VixHQUVDelYsR0FBS3lWLEtBQ1Z6VixHQUFLeVYsSUFFVHpjLEVBQU9mLEVBQUksR0FBSytILEVBRXBCLE9BQU9oSCxHS3NJMkV3Z0IsR0w1SC9FLFNBQW9COUIsRUFBT0MsRUFBWUMsR0FDMUMsSUFBSTVmLEVBQVMwZixFQUFNMWYsT0FDZitoQixFQUFZbkMsRUFBZ0IsRUFBSUEsRUFBZ0IsRUFDaEQ1ZSxFQUFTMmUsT0FDRTViLElBQVgvQyxJQUdJQSxFQUZBK2dCLEVBQVksRUFFSHJDLEVBQU0zRixRQUdOLElBQUkxWixNQUFNTCxJQUczQixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsRUFBUUMsR0FBSzhoQixFQUM3Qi9nQixFQUFPZixHQUFNLElBQU15ZixFQUFNemYsR0FBTXFkLEdBQy9CdGMsRUFBT2YsRUFBSSxHQUNOLElBQU00SCxLQUFLbWEsS0FBS25hLEtBQUtJLElBQUl5WCxFQUFNemYsRUFBSSxHQUFLb2QsS0FBWXhWLEtBQUtrQixHQUFLLEdBRXZFLE9BQU8vSCxHSzhjaUIsR0FuV1gwZixTQUFRLFNBQVVLLEdBQzNCTyxHQUFhWixTQUFRLFNBQVVNLEdBQzNCLEdBQWlCRCxFQUFhQyxFQUFhTyxJQUMzQyxHQUFpQlAsRUFBYUQsRUFBYVMsVUMvUHZELElBQUksR0FBd0MsV0FDeEMsSUFBSS9mLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FpQ3hDNmYsR0FBeUMsU0FBVTFmLEdBS25ELFNBQVMwZixFQUF3QkMsR0FDN0IsSUFBSXhmLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNb2pCLElBQWNwakIsS0E4QzVDLE9BekNBNEQsRUFBTXlmLGVBQWdCLEVBS3RCemYsRUFBTTBmLGdCQUFrQixLQUt4QjFmLEVBQU0yZixtQkFLTjNmLEVBQU00ZixtQkFBcUIsS0FLM0I1ZixFQUFNNmYsaUJBS043ZixFQUFNOGYsY0FBZ0IsR0FLdEI5ZixFQUFNK2YsV0FBWSxFQUtsQi9mLEVBQU1nZ0IsVWIrR0gsQ0FBQ2haLElBQVVBLEtBQVUsS0FBVyxLYTFHbkNoSCxFQUFNaWdCLGNBQWdCLElBQUksR0FBVSxFQUFHLEVBQUcsRUFBRyxHQUN0Q2pnQixFQThaWCxPQWpkQSxHQUFVdWYsRUFBeUIxZixHQTBEbkMwZixFQUF3Qi9pQixVQUFVMGpCLGVBQWlCLFNBQVV4VCxHQUN6RCxJQUFJOFMsRUFBWXBqQixLQUFLbVIsV0FDakI0UyxFQUFZelQsRUFBS2pDLFdBQ2pCb0IsRUFBeUIyVCxFQUFVdFQsNEJBQ3ZDLE9DdkZJLEdEdUZJaVUsR0NqRkwsR0RrRkNBLEdDbkZELEdEb0ZFQSxJQUFpQ3RVLEdBUzFDMFQsRUFBd0IvaUIsVUFBVTRqQixRQUFVLFNBQVVDLEVBQUdoYixFQUFHQyxFQUFHeUYsR0FDM0QsSUFBSW1NLEVBQWFuTSxFQUFXbU0sV0FDeEJwSyxFQUFhL0IsRUFBV3ZCLFVBQVVzRCxXQUNsQzBTLEVBQVlwakIsS0FBS21SLFdBRWpCYixFQURhOFMsRUFBVWhWLFlBQ0w0VixRQUFRQyxFQUFHaGIsRUFBR0MsRUFBRzRSLEVBQVlwSyxHQWNuRCxPQ2hIRyxHRG1HQ0osRUFBS2pDLGFBQ0ErVSxFQUFVdFQsNEJBSU5zVCxFQUFVeFQsYUFBZSxJQUU5QjVQLEtBQUsyakIsV0FBWSxHQUpqQnJULEVBQUs0VCxTQzNHVCxJRGtIQ2xrQixLQUFLOGpCLGVBQWV4VCxLQUNyQkEsRUFBT0EsRUFBSzZULGtCQUVUN1QsR0FRWDZTLEVBQXdCL2lCLFVBQVVnUSxtQkFBcUIsU0FBVUMsRUFBTy9DLEVBQU1nRCxHQUMxRSxRQUFJdFEsS0FBSzhqQixlQUFleFQsSUFDYjdNLEVBQU9yRCxVQUFVZ1EsbUJBQW1CaE4sS0FBS3BELEtBQU1xUSxFQUFPL0MsRUFBTWdELElBUzNFNlMsRUFBd0IvaUIsVUFBVTBPLGFBQWUsU0FBVUgsR0FDdkQsUUFBUzNPLEtBQUttUixXQUFXL0MsYUFRN0IrVSxFQUF3Qi9pQixVQUFVMk8sWUFBYyxTQUFVSixFQUFZeE8sR0FDbEUsSUFBSWdOLEVBQWF3QixFQUFXSyxpQkFBaUJMLEVBQVd5VixZQUNwRGhYLEVBQVl1QixFQUFXdkIsVUFDdkJzRCxFQUFhdEQsRUFBVXNELFdBQ3ZCMlQsRUFBaUJqWCxFQUFVQyxXQUMzQmlYLEVBQWFsWCxFQUFVcUosT0FDdkJDLEVBQVd0SixFQUFVc0osU0FDckJvRSxFQUFhbk0sRUFBV21NLFdBQ3hCc0ksRUFBWXBqQixLQUFLbVIsV0FDakJvVCxFQUFhbkIsRUFBVWhWLFlBQ3ZCb1csRUFBaUJELEVBQVc3ZCxjQUM1QndYLEVBQVdxRyxFQUFXRSx5QkFBeUIvVCxHQUMvQ3VULEVBQUkvRixFQUFTd0csa0JBQWtCTCxFQUFnQkUsRUFBV0ksWUFDMURDLEVBQWlCMUcsRUFBUzJHLGNBQWNaLEdBQ3hDbFksRUFBUzRDLEVBQVc1QyxPQUNwQm1QLEVBQWMvTixFQUFXcEIsUUFBVWlYLEdBQWU3VixFQUFXcEIsUUFDN0RtUCxJQUNBblAsRUFBU3VMLEdBQWdCdkwsRUFBUWlYLEdBQWU3VixFQUFXcEIsVUFFL0QsSUFBSStZLEVBQWlCUCxFQUFXUSxrQkFBa0JqSyxHQUU5QzVDLEVBQVFuUCxLQUFLMkMsTUFBTWlELEVBQVdnSSxLQUFLLEdBQUttTyxHQUN4QzNNLEVBQVNwUCxLQUFLMkMsTUFBTWlELEVBQVdnSSxLQUFLLEdBQUttTyxHQUM3QyxHQUFJcE8sRUFBVSxDQUNWLElBQUlDLEVBQU81TixLQUFLMkMsTUFBTTNDLEtBQUtxWCxLQUFLbEksRUFBUUEsRUFBUUMsRUFBU0EsSUFDekRELEVBQVF2QixFQUNSd0IsRUFBU3hCLEVBRWIsSUFBSS9NLEVBQU1nYixFQUFpQjFNLEVBQVMsRUFBSTRNLEVBQ3BDamIsRUFBTSthLEVBQWlCek0sRUFBVSxFQUFJMk0sRUFDckNFLEVBQWUsQ0FDZlYsRUFBVyxHQUFLMWEsRUFDaEIwYSxFQUFXLEdBQUt6YSxFQUNoQnlhLEVBQVcsR0FBSzFhLEVBQ2hCMGEsRUFBVyxHQUFLemEsR0FFaEI4RyxFQUFZdU4sRUFBUytHLDBCQUEwQmxaLEVBQVFrWSxHQUl2RGlCLEVBQWlCLEdBQ3JCQSxFQUFlakIsR0FBSyxHQUNwQixJQUFJa0IsRUFBa0JubEIsS0FBS3lRLHVCQUF1QjhULEVBQVk3VCxFQUFZd1UsR0FDdEV0QixFQUFZNWpCLEtBQUs0akIsVUFDakJ3QixFQUFlcGxCLEtBQUs2akIsY0FDeEI3akIsS0FBSzJqQixXQUFZLEVBQ2pCLElBQUssSUFBSTFhLEVBQUkwSCxFQUFVZ0UsS0FBTTFMLEdBQUswSCxFQUFVa0UsT0FBUTVMLEVBQ2hELElBQUssSUFBSUMsRUFBSXlILEVBQVVpRSxLQUFNMUwsR0FBS3lILEVBQVVtRSxPQUFRNUwsRUFBRyxDQUNuRCxJQUFJb0gsRUFBT3RRLEtBQUtna0IsUUFBUUMsRUFBR2hiLEVBQUdDLEVBQUd5RixHQUNqQyxHQUFJM08sS0FBSzhqQixlQUFleFQsR0FBTyxDQUMzQixJQUFJK1UsRUFBTXJlLEVBQU9oSCxNQUNqQixHQ3BNUixHRG9NWXNRLEVBQUtqQyxXQUFnQyxDQUNyQzZXLEVBQWVqQixHQUFHM1QsRUFBS0MsVUFBVUMsWUFBY0YsRUFDL0MsSUFBSWdWLEVBQWVoVixFQUFLZ1YsYUFBYUQsR0FDaENybEIsS0FBSzJqQixZQUNMMkIsSUFBc0QsSUFBdEN0bEIsS0FBSzBqQixjQUFjcmYsUUFBUWlNLEtBQzVDdFEsS0FBSzJqQixXQUFZLEdBR3pCLEdBQTRDLElBQXhDclQsRUFBS2lWLFNBQVNGLEVBQUsxVyxFQUFXNlcsTUFFOUIsU0FHUixJQUFJQyxFQUFpQnZILEVBQVN3SCwyQkFBMkJwVixFQUFLQyxVQUFXNlUsRUFBY3hCLEdBQ25GK0IsR0FBVSxFQUNWRixJQUNBRSxFQUFVUixFQUFnQmxCLEVBQUksRUFBR3dCLElBRWhDRSxHQUNEekgsRUFBUzBILGdDQUFnQ3RWLEVBQUtDLFVBQVc0VSxFQUFpQkMsRUFBY3hCLEdBSXBHLElBQUlpQyxFQUFjakIsRUFBaUJQLEVBRW5DalIsR0FBaUJwVCxLQUFLa1osZUFBZ0J2SyxFQUFXZ0ksS0FBSyxHQUFLLEVBQUdoSSxFQUFXZ0ksS0FBSyxHQUFLLEVBQUcsRUFBSW1PLEVBQWdCLEVBQUlBLEVBQWdCcE8sR0FBV3dCLEVBQVEsR0FBSUMsRUFBUyxHQUM5SixJQUFJMk4sRWZ1QkwsU0FBa0IvUixHQUNyQixJQUFJZ1MsRUFBa0IsVUFBWWhTLEVBQUlpUyxLQUFLLE1BQVEsSUFDbkQsR0FBSXZULEdBQ0EsT0FBT3NULEVBRVgsSUFBSW5OLEVBQU81RyxLQUF1QkEsR0FBcUJnRyxTQUFTQyxjQUFjLFFBRTlFLE9BREFXLEVBQUtVLE1BQU1uRyxVQUFZNFMsRUFDaEJuTixFQUFLVSxNQUFNbkcsVWU5QlEsQ0FBa0JuVCxLQUFLa1osZ0JBQzdDbFosS0FBS29aLGFBQWFqWixFQUFRMmxCLEVBQWlCM1ksRUFBVzNDLFNBQ3RELElBQUl1SCxFQUFVL1IsS0FBSytSLFFBQ2YrRixFQUFTL0YsRUFBUStGLE9BQ3JCaEUsR0FBWTlULEtBQUs4UixzQkFBdUI5UixLQUFLa1osZ0JBRTdDOUYsR0FBaUJwVCxLQUFLaVosY0FBZWYsRUFBUSxFQUFHQyxFQUFTLEVBQUcwTixFQUFhQSxFQUFhLEdBQUkzTixFQUFRLEdBQUlDLEVBQVMsR0FDM0dMLEVBQU9JLE9BQVNBLEdBQVNKLEVBQU9LLFFBQVVBLEdBQzFDTCxFQUFPSSxNQUFRQSxFQUNmSixFQUFPSyxPQUFTQSxHQUVWblksS0FBS21aLGlCQUNYcEgsRUFBUXVKLFVBQVUsRUFBRyxFQUFHcEQsRUFBT0MsR0FFL0IrQyxHQUNBbGIsS0FBSzZaLGNBQWM5SCxFQUFTcEQsRUFBWXVNLEdBRTVDLEVBQU9uSixFQUFTd1MsRUFBVzBCLHFCQUMzQmptQixLQUFLMmEsVUFBVTVJLEVBQVNwRCxHQUN4QjNPLEtBQUswakIsY0FBY3hpQixPQUFTLEVBRTVCLElBRUlnbEIsRUFBT0MsRUFBUUMsRUFGZkMsRUFBSzFtQixPQUFPeUYsS0FBSzhmLEdBQWdCcFgsSUFBSXdZLFFBQ3pDRCxFQUFHRSxLQUFLNWxCLEdBRW1CLElBQXZCd00sRUFBVzNDLFNBQ1R4SyxLQUFLbVosa0JBQ0hvTCxFQUFXaUMsVUFBVTdYLEVBQVd2QixVQUFVc0QsYUFJOUN3VixFQUFRLEdBQ1JDLEVBQVMsSUFKVEUsRUFBS0EsRUFBR0ksVUFNWixJQUFLLElBQUl0bEIsRUFBSWtsQixFQUFHbmxCLE9BQVMsRUFBR0MsR0FBSyxJQUFLQSxFQUFHLENBQ3JDLElBQUl1bEIsRUFBV0wsRUFBR2xsQixHQUNkd2xCLEVBQXVCcEMsRUFBV3FDLGlCQUFpQkYsRUFBVTVMLEVBQVlwSyxHQUV6RW1XLEVBRG9CM0ksRUFBUzJHLGNBQWM2QixHQUNSOUIsRUFDbkNrQyxFQUFPSCxFQUFxQixHQUFLRSxFQUFlaEIsRUFDaERrQixFQUFPSixFQUFxQixHQUFLRSxFQUFlaEIsRUFDaERtQixFQUFrQjlJLEVBQVMrSSx5QkFBeUJqUixHQUFXZ1AsR0FBZTBCLEdBQzlFUSxHQUFtQmhKLEVBQVNpSixtQkFBbUJILEdBQy9DSSxHQUFXeGhCLEdBQWU1RixLQUFLaVosY0FBZSxDQUM3QzZMLEdBQWtCb0MsR0FBaUIsR0FBS2xDLEVBQWEsSUFDbERKLEVBQ0hFLEdBQWtCRSxFQUFhLEdBQUtrQyxHQUFpQixJQUNsRHRDLElBRUp5QyxHQUFhdkMsRUFBaUJQLEVBQVcrQyx1QkFBdUI1VyxHQUNoRTZXLEdBQWNyQyxFQUFld0IsR0FDakMsSUFBSyxJQUFJYyxNQUFnQkQsR0FBYSxDQUNsQyxJQUNJaFgsSUFEQUQsRUFBNERpWCxHQUFZQyxLQUN2RGpYLFVBRWpCa1gsR0FBU1QsRUFBZ0IsR0FBS3pXLEdBQVUsR0FDeENtWCxHQUFRM2UsS0FBSzJDLE1BQU0wYixHQUFTLElBQU1LLEdBQVMsR0FBS1gsR0FDaERhLEdBQVNYLEVBQWdCLEdBQUt6VyxHQUFVLEdBQ3hDcVgsR0FBUTdlLEtBQUsyQyxNQUFNMGIsR0FBUyxJQUFNTyxHQUFTLEdBQUtaLEdBR2hEYyxHQUFJSCxJQUZKemUsRUFBSUYsS0FBSzJDLE1BQU0wYixHQUFTLEdBQUtLLEdBQVNYLElBR3RDZ0IsR0FBSUYsSUFGSjFlLEVBQUlILEtBQUsyQyxNQUFNMGIsR0FBUyxHQUFLTyxHQUFTWixJQUd0Q2dCLEdBQWE5RCxJQUFNeUMsRUFFdkIsS0FESXBCLEVBQWV5QyxJQUErRCxJQUFqRHpYLEVBQUtpVixTQUFTdmUsRUFBT2hILE1BQU8yTyxFQUFXNlcsT0FFcEUsR0FBSVUsRUFBTyxDQUVQblUsRUFBUXFJLE9BQ1JnTSxFQUFjLENBQUNuZCxFQUFHQyxFQUFHRCxFQUFJNGUsR0FBRzNlLEVBQUdELEVBQUk0ZSxHQUFHM2UsRUFBSTRlLEdBQUc3ZSxFQUFHQyxFQUFJNGUsSUFDcEQsSUFBSyxJQUFJRSxHQUFNLEVBQUc3bEIsR0FBSytqQixFQUFNaGxCLE9BQVE4bUIsR0FBTTdsQixLQUFNNmxCLEdBQzdDLEdBQUkvRCxJQUFNeUMsR0FBWUEsRUFBV1AsRUFBTzZCLElBQU0sQ0FDMUMsSUFBSXhOLEdBQU8wTCxFQUFNOEIsSUFDakJqVyxFQUFRc0ksWUFFUnRJLEVBQVF1SSxPQUFPOEwsRUFBWSxHQUFJQSxFQUFZLElBQzNDclUsRUFBUXdJLE9BQU82TCxFQUFZLEdBQUlBLEVBQVksSUFDM0NyVSxFQUFRd0ksT0FBTzZMLEVBQVksR0FBSUEsRUFBWSxJQUMzQ3JVLEVBQVF3SSxPQUFPNkwsRUFBWSxHQUFJQSxFQUFZLElBRTNDclUsRUFBUXVJLE9BQU9FLEdBQUssR0FBSUEsR0FBSyxJQUM3QnpJLEVBQVF3SSxPQUFPQyxHQUFLLEdBQUlBLEdBQUssSUFDN0J6SSxFQUFRd0ksT0FBT0MsR0FBSyxHQUFJQSxHQUFLLElBQzdCekksRUFBUXdJLE9BQU9DLEdBQUssR0FBSUEsR0FBSyxJQUM3QnpJLEVBQVF5SSxPQUdoQjBMLEVBQU1wakIsS0FBS3NqQixHQUNYRCxFQUFPcmpCLEtBQUs0akIsUUFHWjNVLEVBQVF1SixVQUFVclMsRUFBR0MsRUFBRzJlLEdBQUdDLElBR25DOW5CLEtBQUtpb0IsY0FBYzNYLEVBQU0zQixFQUFZMUYsRUFBR0MsRUFBRzJlLEdBQUdDLEdBQUdULEdBQVlVLEdBQVk1YSxFQUFXM0MsU0FDaEYwYixJQUFVWixHQUNWdlQsRUFBUW1XLFVBQ1Jsb0IsS0FBSzBqQixjQUFjeUUsUUFBUTdYLElBRzNCdFEsS0FBSzBqQixjQUFjNWdCLEtBQUt3TixHQUU1QnRRLEtBQUtvb0IsZ0JBQWdCelosRUFBVzBaLFVBQVc5RCxFQUFZalUsSUFtQi9ELE9BaEJBdFEsS0FBS3lqQixpQkFBbUJlLEVBQ3hCeGtCLEtBQUtnWixtQkFBcUI0TCxFQUMxQjVrQixLQUFLcWpCLGVBQ0FyakIsS0FBS3NqQixrQkFBb0IsR0FBT3RqQixLQUFLc2pCLGdCQUFpQjBCLEdBQzNEaGxCLEtBQUtzakIsZ0JBQWtCMEIsRUFDdkJobEIsS0FBS3VqQixtQkFBcUJ6SSxFQUMxQjlhLEtBQUt3akIsbUJBQXFCOVMsRUFDMUIxUSxLQUFLc29CLGtCQUFrQjNaLEVBQVk0VixFQUFZckcsRUFBVXBELEVBQVlwSyxFQUFZM0UsRUFBUWtZLEVBQUdiLEVBQVV4VCxjQUN0RzVQLEtBQUt1b0Isb0JBQW9CNVosRUFBWTRWLEdBQ3JDdmtCLEtBQUs0YSxXQUFXN0ksRUFBU3BELEdBQ3JCeEIsRUFBV3BCLFFBQ1hnRyxFQUFRbVcsVUFFUnBDLElBQW9CaE8sRUFBT3dCLE1BQU1uRyxZQUNqQzJFLEVBQU93QixNQUFNbkcsVUFBWTJTLEdBRXRCOWxCLEtBQUsrWSxXQWFoQm9LLEVBQXdCL2lCLFVBQVU2bkIsY0FBZ0IsU0FBVTNYLEVBQU0zQixFQUFZMUYsRUFBR0MsRUFBRzJlLEVBQUdDLEVBQUdVLEVBQVFULEVBQVl2ZCxHQUMxRyxJQUFJK0csRUFBUXZSLEtBQUt5b0IsYUFBYW5ZLEdBQzlCLEdBQUtpQixFQUFMLENBR0EsSUFBSThULEVBQU1yZSxFQUFPaEgsTUFDYjBvQixFQUFZWCxFQUFhelgsRUFBS2lWLFNBQVNGLEVBQUsxVyxFQUFXNlcsTUFBUSxFQUMvRG1ELEVBQVFuZSxFQUFVa2UsRUFDbEJFLEVBQWVELElBQVUzb0IsS0FBSytSLFFBQVE4VyxZQUN0Q0QsSUFDQTVvQixLQUFLK1IsUUFBUXFJLE9BQ2JwYSxLQUFLK1IsUUFBUThXLFlBQWNGLEdBRS9CM29CLEtBQUsrUixRQUFRd0osVUFBVWhLLEVBQU9pWCxFQUFRQSxFQUFRalgsRUFBTTJHLE1BQVEsRUFBSXNRLEVBQVFqWCxFQUFNNEcsT0FBUyxFQUFJcVEsRUFBUXZmLEVBQUdDLEVBQUcyZSxFQUFHQyxHQUN4R2MsR0FDQTVvQixLQUFLK1IsUUFBUW1XLFVBRUMsSUFBZFEsRUFDQS9aLEVBQVdtYSxTQUFVLEVBRWhCZixHQUNMelgsRUFBS3lZLGNBQWMxRCxLQU0zQmxDLEVBQXdCL2lCLFVBQVU0b0IsU0FBVyxXQUN6QyxJQUFJalgsRUFBVS9SLEtBQUsrUixRQUNuQixPQUFPQSxFQUFVQSxFQUFRK0YsT0FBUyxNQVF0Q3FMLEVBQXdCL2lCLFVBQVVxb0IsYUFBZSxTQUFVblksR0FDdkQsT0FBT0EsRUFBSzBZLFlBT2hCN0YsRUFBd0IvaUIsVUFBVW1vQixvQkFBc0IsU0FBVTVaLEVBQVk0VixHQUMxRSxHQUFJQSxFQUFXMEUsaUJBQWtCLENBTTdCLElBQUlDLEVBQXFCLFNBQVUzRSxFQUFZelcsRUFBS2EsR0FDaEQsSUFBSXdhLEVBQWdCbmlCLEVBQU91ZCxHQUN2QjRFLEtBQWlCeGEsRUFBVzBaLFdBQzVCOUQsRUFBVzZFLFlBQVl6YSxFQUFXdkIsVUFBVXNELFdBQVkvQixFQUFXMFosVUFBVWMsS0FFbkZ6akIsS0FBSyxLQUFNNmUsR0FDYjVWLEVBQVcwYSxvQkFBb0J2bUIsS0FDbUMsS0FTMUVxZ0IsRUFBd0IvaUIsVUFBVWdvQixnQkFBa0IsU0FBVUMsRUFBVzlELEVBQVlqVSxHQUVqRixJQUFJNlksRUFBZ0JuaUIsRUFBT3VkLEdBQ3JCNEUsS0FBaUJkLElBQ25CQSxFQUFVYyxHQUFpQixJQUUvQmQsRUFBVWMsR0FBZTdZLEVBQUtnWixXQUFZLEdBb0I5Q25HLEVBQXdCL2lCLFVBQVVrb0Isa0JBQW9CLFNBQVUzWixFQUFZNFYsRUFBWXJHLEVBQVVwRCxFQUFZcEssRUFBWTNFLEVBQVEyYSxFQUFVbFgsRUFBUytaLEdBQ2pKLElBQUlKLEVBQWdCbmlCLEVBQU91ZCxHQUNyQjRFLEtBQWlCeGEsRUFBVzZhLGNBQzlCN2EsRUFBVzZhLFlBQVlMLEdBQWlCLElBRTVDLElBSUk3WSxFQUFNSyxFQUFXaVUsRUFBZ0IzYixFQUFHQyxFQUFHK2EsRUFKdkN1RixFQUFjN2EsRUFBVzZhLFlBQVlMLEdBQ3JDTSxFQUFZOWEsRUFBVzhhLFVBRXZCQyxFQUFZLEVBRWhCLElBQUt6RixFQUhTL0YsRUFBUy9SLGFBR0w4WCxHQUFLeUMsSUFBWXpDLEVBRy9CLElBRkF0VCxFQUFZdU4sRUFBUytHLDBCQUEwQmxaLEVBQVFrWSxFQUFHdFQsR0FDMURpVSxFQUFpQjFHLEVBQVMyRyxjQUFjWixHQUNuQ2hiLEVBQUkwSCxFQUFVZ0UsS0FBTTFMLEdBQUswSCxFQUFVa0UsT0FBUTVMLEVBQzVDLElBQUtDLEVBQUl5SCxFQUFVaUUsS0FBTTFMLEdBQUt5SCxFQUFVbUUsT0FBUTVMLEVBQ3hDd2QsRUFBV3pDLEdBQUt6VSxLQUNka2EsRUNuZGhCLElEb2RjcFosRUFBT2lVLEVBQVdQLFFBQVFDLEVBQUdoYixFQUFHQyxFQUFHNFIsRUFBWXBLLElBQ3RDckMsYUFDTG1iLEVBQVlsWixFQUFLZ1osV0FBWSxFQUN4QkcsRUFBVUUsWUFBWXJaLEVBQUtnWixXQUM1QkcsRUFBVUcsUUFBUSxDQUNkdFosRUFDQTZZLEVBQ0FqTCxFQUFTMkwsbUJBQW1CdlosRUFBS0MsV0FDakNxVSxVQUlhM2YsSUFBckJza0IsR0FDQUEsRUFBaUJqWixJQUlyQmlVLEVBQVd1RixRQUFRN0YsRUFBR2hiLEVBQUdDLEVBQUd3SCxHQUs1QzZULEVBQVd3RixnQkFBZ0JMLEVBQVdoWixJQUVuQ3lTLEVBbGRpQyxDQW1kMUMsSUFLRkEsR0FBd0IvaUIsVUFBVStRLFNBQ2xDLFlFMWZBLElBQUksR0FBd0MsV0FDeEMsSUFBSXhPLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FrRDVDLFNBbEIrQixTQUFVRyxHQUtyQyxTQUFTdW1CLEVBQVV6YSxHQUNmLE9BQU85TCxFQUFPTCxLQUFLcEQsS0FBTXVQLElBQWdCdlAsS0FVN0MsT0FmQSxHQUFVZ3FCLEVBQVd2bUIsR0FZckJ1bUIsRUFBVTVwQixVQUFVK08sZUFBaUIsV0FDakMsT0FBTyxJQUFJLEdBQXdCblAsT0FFaENncUIsRUFoQm1CLENBaUI1QkMsSUMzQ0YsR0FDWSxTQURaLEdBRWdCLGFBRmhCLEdBR2MsV0N1TlAsU0FBUyxHQUFPQyxFQUFhQyxHQUVoQyxJQURBLElBQUkxb0IsR0FBUyxFQUNKTixFQUFJK29CLEVBQVlocEIsT0FBUyxFQUFHQyxHQUFLLElBQUtBLEVBQzNDLEdBQUkrb0IsRUFBWS9vQixJQUFNZ3BCLEVBQVlocEIsR0FBSSxDQUNsQ00sR0FBUyxFQUNULE1BR1IsT0FBT0EsRUFvQkosU0FBUyxHQUFPc1AsRUFBWTBDLEdBQy9CLElBQUkyVyxFQUFXcmhCLEtBQUs4SyxJQUFJSixHQUNwQjRXLEVBQVd0aEIsS0FBSzZLLElBQUlILEdBQ3BCeEssRUFBSThILEVBQVcsR0FBS3FaLEVBQVdyWixFQUFXLEdBQUtzWixFQUMvQ25oQixFQUFJNkgsRUFBVyxHQUFLcVosRUFBV3JaLEVBQVcsR0FBS3NaLEVBR25ELE9BRkF0WixFQUFXLEdBQUs5SCxFQUNoQjhILEVBQVcsR0FBSzdILEVBQ1Q2SCxFQ3JQSixTQUFTdVosR0FBYXZlLEVBQVF3ZSxFQUFZQyxHQUM3QyxPQUFPLFNBU0cvVCxFQUFRcEosRUFBWXNKLEVBQU04VCxFQUFjQyxHQUM5QyxHQUFJalUsRUFBUSxDQUNSLElBQUlrVSxFQUFZSixFQUFhLEVBQUk1VCxFQUFLLEdBQUt0SixFQUN2Q3VkLEVBQWFMLEVBQWEsRUFBSTVULEVBQUssR0FBS3RKLEVBQ3hDd2QsRUFBU0gsRUFBa0JBLEVBQWdCLEdBQUssRUFDaERJLEVBQVNKLEVBQWtCQSxFQUFnQixHQUFLLEVBQ2hEL1YsRUFBTzVJLEVBQU8sR0FBSzRlLEVBQVksRUFBSUUsRUFDbkNoVyxFQUFPOUksRUFBTyxHQUFLNGUsRUFBWSxFQUFJRSxFQUNuQ2pXLEVBQU83SSxFQUFPLEdBQUs2ZSxFQUFhLEVBQUlFLEVBQ3BDaFcsRUFBTy9JLEVBQU8sR0FBSzZlLEVBQWEsRUFBSUUsRUFHcENuVyxFQUFPRSxJQUVQQSxFQURBRixHQUFRRSxFQUFPRixHQUFRLEdBR3ZCQyxFQUFPRSxJQUVQQSxFQURBRixHQUFRRSxFQUFPRixHQUFRLEdBRzNCLElBQUkzTCxFQUFJLEVBQU13TixFQUFPLEdBQUk5QixFQUFNRSxHQUMzQjNMLEVBQUksRUFBTXVOLEVBQU8sR0FBSTdCLEVBQU1FLEdBQzNCaVcsRUFBUSxHQUFLMWQsRUFVakIsT0FSSW9kLEdBQWdCRCxJQUNoQnZoQixJQUNLOGhCLEVBQVFoaUIsS0FBS00sSUFBSSxFQUFJTixLQUFLRCxJQUFJLEVBQUc2TCxFQUFPOEIsRUFBTyxJQUFNc1UsR0FDbERBLEVBQVFoaUIsS0FBS00sSUFBSSxFQUFJTixLQUFLRCxJQUFJLEVBQUcyTixFQUFPLEdBQUs1QixHQUFRa1csR0FDN0Q3aEIsSUFDSzZoQixFQUFRaGlCLEtBQUtNLElBQUksRUFBSU4sS0FBS0QsSUFBSSxFQUFHOEwsRUFBTzZCLEVBQU8sSUFBTXNVLEdBQ2xEQSxFQUFRaGlCLEtBQUtNLElBQUksRUFBSU4sS0FBS0QsSUFBSSxFQUFHMk4sRUFBTyxHQUFLM0IsR0FBUWlXLElBRTFELENBQUM5aEIsRUFBR0MsS0FXaEIsU0FBUzhoQixHQUFLdlUsR0FDakIsT0FBT0EsRUNsRFgsU0FBU3dVLEdBQTZCNWQsRUFBWTZkLEVBQVdDLEVBQWNDLEdBQ3ZFLElBQUlDLEVBQWMsR0FBU0gsR0FBYUMsRUFBYSxHQUNqREcsRUFBY25WLEdBQVUrVSxHQUFhQyxFQUFhLEdBQ3RELE9BQUlDLEVBQ09yaUIsS0FBS0YsSUFBSXdFLEVBQVl0RSxLQUFLRCxJQUFJdWlCLEVBQWFDLElBRS9DdmlCLEtBQUtGLElBQUl3RSxFQUFZdEUsS0FBS0YsSUFBSXdpQixFQUFhQyxJQWN0RCxTQUFTQyxHQUEyQmxlLEVBQVkxQyxFQUFlRSxHQUMzRCxJQUFJMmdCLEVBQVN6aUIsS0FBS0YsSUFBSXdFLEVBQVkxQyxHQVlsQyxPQVZBNmdCLEdBQ0l6aUIsS0FBS00sSUFBSSxFQUZELEdBRWFOLEtBQUtELElBQUksRUFBR3VFLEVBQWExQyxFQUFnQixJQUZ0RCxHQUdKLEVBQ0pFLElBQ0EyZ0IsRUFBU3ppQixLQUFLRCxJQUFJMGlCLEVBQVEzZ0IsR0FDMUIyZ0IsR0FDSXppQixLQUFLTSxJQUFJLEVBUEwsR0FPaUJOLEtBQUtELElBQUksRUFBRytCLEVBQWdCd0MsRUFBYSxJQVAxRCxHQVNBLEdBRUwsRUFBTW1lLEVBQVEzZ0IsRUFBZ0IsRUFBbUIsRUFBaEJGLEdBbUdyQyxTQUFTOGdCLEdBQXVCOWdCLEVBQWVFLEVBQWU2Z0IsRUFBWUMsRUFBZUMsR0FDNUYsT0FBTyxTQVFHdmUsRUFBWXJNLEVBQVcyVixFQUFNOFQsR0FDbkMsUUFBbUJ4bEIsSUFBZm9JLEVBQTBCLENBQzFCLElBQUl3ZSxFQUFlRixFQUNiVixHQUE2QnRnQixFQUFlZ2hCLEVBQWVoVixFQUFNaVYsR0FDakVqaEIsRUFFTixZQUQ0QjFGLElBQWZ5bUIsR0FBMkJBLElBQ3hCakIsRUFHVGMsR0FBMkJsZSxFQUFZd2UsRUFBY2hoQixHQUZqRCxFQUFNd0MsRUFBWXhDLEVBQWVnaEIsS0MzSmpELFNBQVNDLEdBQVFwVixHQUNwQixZQUFpQnpSLElBQWJ5UixFQUNPLE9BR1AsRUFPRCxTQUFTLEdBQUtBLEdBQ2pCLFlBQWlCelIsSUFBYnlSLEVBQ09BLE9BR1AsRUNuQkQsU0FBU3FWLEdBQU9qaUIsR0FDbkIsT0FBT2YsS0FBS2lqQixJQUFJbGlCLEVBQUcsR0FRaEIsU0FBU21pQixHQUFRbmlCLEdBQ3BCLE9BQU8sRUFBSWlpQixHQUFPLEVBQUlqaUIsR0FRbkIsU0FBU29pQixHQUFTcGlCLEdBQ3JCLE9BQU8sRUFBSUEsRUFBSUEsRUFBSSxFQUFJQSxFQUFJQSxFQUFJQSxFQVE1QixTQUFTcWlCLEdBQU9yaUIsR0FDbkIsT0FBT0EsRUM1QlgsU0FDUSxLQURSLEdBSVUsT0NiVixJQUFJLEdBQXdDLFdBQ3hDLElBQUluSCxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBNkJ4QzhvQixHekJHTyxDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHeUJrUTNCLFNBeFA4QixTQUFVM29CLEdBRXBDLFNBQVM0b0IsSUFDTCxJL0NabUJDLEVBR25CQyxFQUVBQyxFQUNBQyxFQUxBQyxFK0NXSTlvQixFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0FxQ2pDLE9BaENBNEQsRUFBTStZLFF2QjRJSCxDQUFDL1IsSUFBVUEsS0FBVSxLQUFXLEt1QnZJbkNoSCxFQUFNK29CLGlCQUFtQixFQUt6Qi9vQixFQUFNZ3BCLHlDQUEyQyxFQUtqRGhwQixFQUFNaXBCLDJCQUE2QixFQVNuQ2pwQixFQUFNa3BCLDZCL0N6Q2FSLEUrQ3lDNEIsU0FBVVMsRUFBVUMsRUFBa0JDLEdBQ2pGLElBQUtBLEVBQ0QsT0FBT2p0QixLQUFLa3RCLHNCQUFzQkYsR0FFdEMsSUFBSUcsRUFBUW50QixLQUFLbXRCLFFBRWpCLE9BREFBLEVBQU1DLGVBQWVILEdBQ2RFLEVBQU1ELHNCQUFzQkYsSS9DOUN2Q04sR0FBUyxFQU1OLFdBQ0gsSUFBSVcsRUFBVzlyQixNQUFNbkIsVUFBVTZhLE1BQU03WCxLQUFLaEIsV0FPMUMsT0FOS3NxQixHQUFVMXNCLE9BQVN5c0IsR0FBYSxFQUFZWSxFQUFVYixLQUN2REUsR0FBUyxFQUNURCxFQUFXenNCLEtBQ1h3c0IsRUFBV2EsRUFDWGQsRUFBYUQsRUFBRzFtQixNQUFNNUYsS0FBTW9DLFlBRXpCbXFCLEkrQ2tDQTNvQixFQThNWCxPQXJQQSxHQUFVeW9CLEVBQVU1b0IsR0FnRHBCNG9CLEVBQVNqc0IsVUFBVWt0QixvQkFBc0IsU0FBVU4sRUFBa0JDLEdBQ2pFLE9BQU9qdEIsS0FBSzhzQiw0QkFBNEI5c0IsS0FBSzBHLGNBQWVzbUIsRUFBa0JDLElBT2xGWixFQUFTanNCLFVBQVUrc0IsTUFBUSxXQUN2QixPQUFPLEtBVVhkLEVBQVNqc0IsVUFBVW10QixlQUFpQixTQUFVdGtCLEVBQUdDLEVBQUdza0IsRUFBY0MsR0FDOUQsT0FBTyxLQU9YcEIsRUFBU2pzQixVQUFVcVUsV0FBYSxTQUFVeEwsRUFBR0MsR0FDekMsSUFBSXdrQixFQUFRMXRCLEtBQUsydEIsZ0JBQWdCLENBQUMxa0IsRUFBR0MsSUFDckMsT0FBT3drQixFQUFNLEtBQU96a0IsR0FBS3lrQixFQUFNLEtBQU94a0IsR0FVMUNtakIsRUFBU2pzQixVQUFVdXRCLGdCQUFrQixTQUFVNU8sRUFBTzZPLEdBQ2xELElBQUlKLEVBQWVJLEdBQXNDLENBQUNDLElBQUtBLEtBRS9ELE9BREE3dEIsS0FBS3V0QixlQUFleE8sRUFBTSxHQUFJQSxFQUFNLEdBQUl5TyxFQUFjNWlCLEtBQy9DNGlCLEdBU1huQixFQUFTanNCLFVBQVUwdEIscUJBQXVCLFNBQVUvYyxHQUNoRCxPQUFPL1EsS0FBS3lVLFdBQVcxRCxFQUFXLEdBQUlBLEVBQVcsS0FRckRzYixFQUFTanNCLFVBQVUydEIsY0FBZ0IsU0FBVWhpQixHQUN6QyxPQUFPLEtBUVhzZ0IsRUFBU2pzQixVQUFVNEwsVUFBWSxTQUFVaUosR0FDckMsR0FBSWpWLEtBQUsyc0IsaUJBQW1CM3NCLEtBQUswRyxjQUFlLENBQzVDLElBQUlxRixFQUFTL0wsS0FBSyt0QixjQUFjL3RCLEtBQUsyYyxVQUNqQ3FSLE1BQU1qaUIsRUFBTyxLQUFPaWlCLE1BQU1qaUIsRUFBTyxNQUNqQ21KLEdBQW9CbkosR0FFeEIvTCxLQUFLMnNCLGdCQUFrQjNzQixLQUFLMEcsY0FFaEMsT3ZCc2RELFNBQXdCcUYsRUFBUWtKLEdBQ25DLE9BQUlBLEdBQ0FBLEVBQVcsR0FBS2xKLEVBQU8sR0FDdkJrSixFQUFXLEdBQUtsSixFQUFPLEdBQ3ZCa0osRUFBVyxHQUFLbEosRUFBTyxHQUN2QmtKLEVBQVcsR0FBS2xKLEVBQU8sR0FDaEJrSixHQUdBbEosRXVCL2RBa2lCLENBQWVqdUIsS0FBSzJjLFFBQVMxSCxJQVV4Q29YLEVBQVNqc0IsVUFBVTh0QixPQUFTLFNBQVV6YSxFQUFPMGEsR0FDekMsS0FZSjlCLEVBQVNqc0IsVUFBVWd1QixNQUFRLFNBQVU3YSxFQUFJOGEsRUFBUUMsR0FDN0MsS0FXSmpDLEVBQVNqc0IsVUFBVW11QixTQUFXLFNBQVVDLEdBQ3BDLE9BQU94dUIsS0FBS2t0QixzQkFBc0JzQixFQUFZQSxJQVVsRG5DLEVBQVNqc0IsVUFBVThzQixzQkFBd0IsU0FBVUYsR0FDakQsT0FBTyxLQU9YWCxFQUFTanNCLFVBQVVxdUIsUUFBVSxXQUN6QixPQUFPLEtBV1hwQyxFQUFTanNCLFVBQVVndEIsZUFBaUIsU0FBVTlOLEdBQzFDLEtBUUorTSxFQUFTanNCLFVBQVVzdUIsaUJBQW1CLFNBQVUzaUIsR0FDNUMsT0FBTyxLQVVYc2dCLEVBQVNqc0IsVUFBVXV1QixVQUFZLFNBQVVDLEVBQVFDLEdBQzdDLEtBaUJKeEMsRUFBU2pzQixVQUFVK1MsVUFBWSxTQUFVOVEsRUFBUWdkLEdBRTdDLElBQUl5UCxFQUFhLEdBQWN6c0IsR0FDM0JpZCxFQUFjd1AsRUFBV3BSLFlBQWMsZUFDckMsU0FBVXFSLEVBQWVDLEVBQWdCdlosR0FDdkMsSUFBSXdaLEVBQWNILEVBQVc5aUIsWUFDekJrakIsRUFBa0JKLEVBQVdsUixpQkFDN0J3USxFQUFRalksR0FBVStZLEdBQW1CL1ksR0FBVThZLEdBR25ELE9BRkE3YixHQUFpQmdaLEdBQWM4QyxFQUFnQixHQUFJQSxFQUFnQixHQUFJZCxHQUFRQSxFQUFPLEVBQUcsRUFBRyxHQzVRckcsU0FBcUI5WSxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUXRDLEVBQVdnYyxHQUd6RSxJQUZBLElBQUlDLEVBQU9ELEdBQXNCLEdBQzdCaHVCLEVBQUksRUFDQ2t1QixFRDBROEIsRUMxUWxCQSxFQUFJN1osRUFBSzZaLEdBQUs1WixFQUFRLENBQ3ZDLElBQUl4TSxFQUFJcU0sRUFBZ0IrWixHQUNwQm5tQixFQUFJb00sRUFBZ0IrWixFQUFJLEdBQzVCRCxFQUFLanVCLEtBQU9nUyxFQUFVLEdBQUtsSyxFQUFJa0ssRUFBVSxHQUFLakssRUFBSWlLLEVBQVUsR0FDNURpYyxFQUFLanVCLEtBQU9nUyxFQUFVLEdBQUtsSyxFQUFJa0ssRUFBVSxHQUFLakssRUFBSWlLLEVBQVUsR0FFNURnYyxHQUFZQyxFQUFLbHVCLFFBQVVDLElBQzNCaXVCLEVBQUtsdUIsT0FBU0MsR0RtUU4sQ0FBWTR0QixFQUFlLEVBQUdBLEVBQWM3dEIsT0FBUXVVLEVBQVEyVyxHQUFjNEMsR0FDbkV6TSxHQUFhdU0sRUFBWXpQLEVBQXpCa0QsQ0FBc0N3TSxFQUFlQyxFQUFnQnZaLElBRTlFOE0sR0FBYXVNLEVBQVl6UCxHQUUvQixPQURBcmYsS0FBS290QixlQUFlOU4sR0FDYnRmLE1BRUpxc0IsRUF0UGtCLENBdVAzQixHRWpTRixJQUFJLEdBQXdDLFdBQ3hDLElBQUkxcEIsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTJSckMsU0FBU2dzQixHQUFtQkMsR0FDL0IsSUFBSTlaLEVBVUosT0FUSThaLEdBQVVDLEdBQ1YvWixFQUFTLEVIblJSLE9HcVJJOFosR0hwUkosT0dvUm9DQSxFQUNyQzlaLEVBQVMsRUFFSjhaLEdBQVVDLEtBQ2YvWixFQUFTLEdBRWdCLEVBa0JqQyxTQXpSb0MsU0FBVWhTLEdBRTFDLFNBQVNnc0IsSUFDTCxJQUFJN3JCLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQWdCakMsT0FYQTRELEVBQU0yckIsT0FBU0MsR0FLZjVyQixFQUFNNlIsT0FBUyxFQUtmN1IsRUFBTTBSLGdCQUFrQixLQUNqQjFSLEVBa05YLE9BcE9BLEdBQVU2ckIsRUFBZ0Joc0IsR0F5QjFCZ3NCLEVBQWVydkIsVUFBVTJ0QixjQUFnQixTQUFVaGlCLEdBQy9DLE96QjhMMEN1SixFeUI5TER0VixLQUFLc1YsZ0J6QjhMcUJFLEV5QjlMRHhWLEtBQUtzVixnQkFBZ0JwVSxPekI4TGZ1VSxFeUI5THVCelYsS0FBS3lWLE96QmdNakdKLEdBRE1ILEd5Qi9MbUduSixHekJnTTNFdUosRXlCaE04QixFekJnTUxFLEVBQUtDLEdBRmhFLElBQTJDSCxFQUF5QkUsRUFBS0MsR3lCeEw1RWdhLEVBQWVydkIsVUFBVXN2QixlQUFpQixXQUN0QyxPQUFPLEtBT1hELEVBQWVydkIsVUFBVXV2QixtQkFBcUIsV0FDMUMsT0FBTzN2QixLQUFLc1YsZ0JBQWdCMkYsTUFBTSxFQUFHamIsS0FBS3lWLFNBSzlDZ2EsRUFBZXJ2QixVQUFVd3ZCLG1CQUFxQixXQUMxQyxPQUFPNXZCLEtBQUtzVixpQkFPaEJtYSxFQUFlcnZCLFVBQVV5dkIsa0JBQW9CLFdBQ3pDLE9BQU83dkIsS0FBS3NWLGdCQUFnQjJGLE1BQU1qYixLQUFLc1YsZ0JBQWdCcFUsT0FBU2xCLEtBQUt5VixTQU96RWdhLEVBQWVydkIsVUFBVTB2QixVQUFZLFdBQ2pDLE9BQU85dkIsS0FBS3V2QixRQU9oQkUsRUFBZXJ2QixVQUFVOHNCLHNCQUF3QixTQUFVRixHQU92RCxHQU5JaHRCLEtBQUs2c0IsNkJBQStCN3NCLEtBQUswRyxnQkFDekMxRyxLQUFLNHNCLHlDQUEyQyxFQUNoRDVzQixLQUFLNnNCLDJCQUE2QjdzQixLQUFLMEcsZUFJdkNzbUIsRUFBbUIsR0FDZ0MsSUFBbERodEIsS0FBSzRzQiwwQ0FDRkksR0FBb0JodEIsS0FBSzRzQix5Q0FDN0IsT0FBTzVzQixLQUVYLElBQUkrdkIsRUFBcUIvdkIsS0FBS2d3Qiw4QkFBOEJoRCxHQUU1RCxPQURnQytDLEVBQW1CSCxxQkFDckIxdUIsT0FBU2xCLEtBQUtzVixnQkFBZ0JwVSxPQUNqRDZ1QixHQVNQL3ZCLEtBQUs0c0IseUNBQTJDSSxFQUN6Q2h0QixPQVFmeXZCLEVBQWVydkIsVUFBVTR2Qiw4QkFBZ0MsU0FBVWhELEdBQy9ELE9BQU9odEIsTUFLWHl2QixFQUFlcnZCLFVBQVU2dkIsVUFBWSxXQUNqQyxPQUFPandCLEtBQUt5VixRQU1oQmdhLEVBQWVydkIsVUFBVTh2QixtQkFBcUIsU0FBVVgsRUFBUWphLEdBQzVEdFYsS0FBS3lWLE9BQVM2WixHQUFtQkMsR0FDakN2dkIsS0FBS3V2QixPQUFTQSxFQUNkdnZCLEtBQUtzVixnQkFBa0JBLEdBTzNCbWEsRUFBZXJ2QixVQUFVK3ZCLGVBQWlCLFNBQVU5YixFQUFhK2IsR0FDN0QsS0FRSlgsRUFBZXJ2QixVQUFVaXdCLFVBQVksU0FBVWQsRUFBUWxiLEVBQWFpYyxHQUVoRSxJQUFJN2EsRUFDSixHQUFJOFosRUFDQTlaLEVBQVM2WixHQUFtQkMsT0FFM0IsQ0FDRCxJQUFLLElBQUlwdUIsRUFBSSxFQUFHQSxFQUFJbXZCLElBQVdudkIsRUFBRyxDQUM5QixHQUEyQixJQUF2QmtULEVBQVluVCxPQUdaLE9BRkFsQixLQUFLdXZCLE9BQVNDLFFBQ2R4dkIsS0FBS3lWLE9BQVMsR0FJZHBCLEVBQW9DQSxFQUFZLEdBSXhEa2IsRUFpRlosU0FBNEI5WixHQUN4QixJQUFJOFosRUFVSixPQVRjLEdBQVY5WixFQUNBOFosRUFBU0MsR0FFTSxHQUFWL1osRUFDTDhaLEVIclFDLE1HdVFjLEdBQVY5WixJQUNMOFosRUFBU0MsSUFFK0MsRUE1RjNDZSxDQURUOWEsRUFBU3BCLEVBQVluVCxRQUd6QmxCLEtBQUt1dkIsT0FBU0EsRUFDZHZ2QixLQUFLeVYsT0FBU0EsR0FXbEJnYSxFQUFlcnZCLFVBQVVndEIsZUFBaUIsU0FBVTlOLEdBQzVDdGYsS0FBS3NWLGtCQUNMZ0ssRUFBWXRmLEtBQUtzVixnQkFBaUJ0VixLQUFLc1YsZ0JBQWlCdFYsS0FBS3lWLFFBQzdEelYsS0FBS3dHLFlBVWJpcEIsRUFBZXJ2QixVQUFVOHRCLE9BQVMsU0FBVXphLEVBQU8wYSxHQUMvQyxJQUFJN1ksRUFBa0J0VixLQUFLNHZCLHFCQUMzQixHQUFJdGEsRUFBaUIsQ0FDakIsSUFBSUcsRUFBU3pWLEtBQUtpd0IsYURuTHZCLFNBQWdCM2EsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVFoQyxFQUFPMGEsRUFBUWdCLEdBT3hFLElBTkEsSUFBSUMsRUFBT0QsR0FBc0IsR0FDN0J0YixFQUFNOUssS0FBSzhLLElBQUlKLEdBQ2ZHLEVBQU03SyxLQUFLNkssSUFBSUgsR0FDZitjLEVBQVVyQyxFQUFPLEdBQ2pCc0MsRUFBVXRDLEVBQU8sR0FDakJodEIsRUFBSSxFQUNDa3VCLEVDNkt1QixFRDdLWEEsRUFBSTdaLEVBQUs2WixHQUFLNVosRUFBUSxDQUN2QyxJQUFJbVosRUFBU3RaLEVBQWdCK1osR0FBS21CLEVBQzlCM0IsRUFBU3ZaLEVBQWdCK1osRUFBSSxHQUFLb0IsRUFDdENyQixFQUFLanVCLEtBQU9xdkIsRUFBVTVCLEVBQVMvYSxFQUFNZ2IsRUFBU2piLEVBQzlDd2IsRUFBS2p1QixLQUFPc3ZCLEVBQVU3QixFQUFTaGIsRUFBTWliLEVBQVNoYixFQUM5QyxJQUFLLElBQUk2YyxFQUFJckIsRUFBSSxFQUFHcUIsRUFBSXJCLEVBQUk1WixJQUFVaWIsRUFDbEN0QixFQUFLanVCLEtBQU9tVSxFQUFnQm9iLEdBR2hDdkIsR0FBWUMsRUFBS2x1QixRQUFVQyxJQUMzQml1QixFQUFLbHVCLE9BQVNDLEdDbUtWLENBQU9tVSxFQUFpQixFQUFHQSxFQUFnQnBVLE9BQVF1VSxFQUFRaEMsRUFBTzBhLEVBQVE3WSxHQUMxRXRWLEtBQUt3RyxZQVliaXBCLEVBQWVydkIsVUFBVWd1QixNQUFRLFNBQVU3YSxFQUFJOGEsRUFBUUMsR0FDbkQsSUFBSTlhLEVBQUs2YSxPQUNFcHBCLElBQVB1TyxJQUNBQSxFQUFLRCxHQUVULElBQUk0YSxFQUFTRyxFQUNSSCxJQUNEQSxFQUFTL1gsR0FBVXBXLEtBQUtnTSxjQUU1QixJQUFJc0osRUFBa0J0VixLQUFLNHZCLHFCQUMzQixHQUFJdGEsRUFBaUIsQ0FDakIsSUFBSUcsRUFBU3pWLEtBQUtpd0IsYUQzS3ZCLFNBQWUzYSxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUWxDLEVBQUlDLEVBQUkyYSxFQUFRZ0IsR0FLeEUsSUFKQSxJQUFJQyxFQUFPRCxHQUFzQixHQUM3QnFCLEVBQVVyQyxFQUFPLEdBQ2pCc0MsRUFBVXRDLEVBQU8sR0FDakJodEIsRUFBSSxFQUNDa3VCLEVDdUtzQixFRHZLVkEsRUFBSTdaLEVBQUs2WixHQUFLNVosRUFBUSxDQUN2QyxJQUFJbVosRUFBU3RaLEVBQWdCK1osR0FBS21CLEVBQzlCM0IsRUFBU3ZaLEVBQWdCK1osRUFBSSxHQUFLb0IsRUFDdENyQixFQUFLanVCLEtBQU9xdkIsRUFBVWpkLEVBQUtxYixFQUMzQlEsRUFBS2p1QixLQUFPc3ZCLEVBQVVqZCxFQUFLcWIsRUFDM0IsSUFBSyxJQUFJNkIsRUFBSXJCLEVBQUksRUFBR3FCLEVBQUlyQixFQUFJNVosSUFBVWliLEVBQ2xDdEIsRUFBS2p1QixLQUFPbVUsRUFBZ0JvYixHQUdoQ3ZCLEdBQVlDLEVBQUtsdUIsUUFBVUMsSUFDM0JpdUIsRUFBS2x1QixPQUFTQyxHQzZKVixDQUFNbVUsRUFBaUIsRUFBR0EsRUFBZ0JwVSxPQUFRdVUsRUFBUWxDLEVBQUlDLEVBQUkyYSxFQUFRN1ksR0FDMUV0VixLQUFLd0csWUFVYmlwQixFQUFlcnZCLFVBQVV1dUIsVUFBWSxTQUFVQyxFQUFRQyxHQUNuRCxJQUFJdlosRUFBa0J0VixLQUFLNHZCLHFCQUMzQixHQUFJdGEsRUFBaUIsQ0FDakIsSUFBSUcsRUFBU3pWLEtBQUtpd0IsYUQ3SnZCLFNBQW1CM2EsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVFtWixFQUFRQyxFQUFRTSxHQUc1RSxJQUZBLElBQUlDLEVBQU9ELEdBQXNCLEdBQzdCaHVCLEVBQUksRUFDQ2t1QixFQzJKMEIsRUQzSmRBLEVBQUk3WixFQUFLNlosR0FBSzVaLEVBQVEsQ0FDdkMyWixFQUFLanVCLEtBQU9tVSxFQUFnQitaLEdBQUtULEVBQ2pDUSxFQUFLanVCLEtBQU9tVSxFQUFnQitaLEVBQUksR0FBS1IsRUFDckMsSUFBSyxJQUFJNkIsRUFBSXJCLEVBQUksRUFBR3FCLEVBQUlyQixFQUFJNVosSUFBVWliLEVBQ2xDdEIsRUFBS2p1QixLQUFPbVUsRUFBZ0JvYixHQUdoQ3ZCLEdBQVlDLEVBQUtsdUIsUUFBVUMsSUFDM0JpdUIsRUFBS2x1QixPQUFTQyxHQ21KVixDQUFVbVUsRUFBaUIsRUFBR0EsRUFBZ0JwVSxPQUFRdVUsRUFBUW1aLEVBQVFDLEVBQVF2WixHQUM5RXRWLEtBQUt3RyxZQUdOaXBCLEVBck93QixDQXNPakMsSUNyUEYsU0FBU2tCLEdBQWNyYixFQUFpQnNiLEVBQVNDLEVBQVNwYixFQUFReE0sRUFBR0MsRUFBR3NrQixHQUNwRSxJQUlJalksRUFKQS9MLEVBQUs4TCxFQUFnQnNiLEdBQ3JCbm5CLEVBQUs2TCxFQUFnQnNiLEVBQVUsR0FDL0JobkIsRUFBSzBMLEVBQWdCdWIsR0FBV3JuQixFQUNoQ0ssRUFBS3lMLEVBQWdCdWIsRUFBVSxHQUFLcG5CLEVBRXhDLEdBQVcsSUFBUEcsR0FBbUIsSUFBUEMsRUFDWjBMLEVBQVNxYixNQUVSLENBQ0QsSUFBSTltQixJQUFNYixFQUFJTyxHQUFNSSxHQUFNVixFQUFJTyxHQUFNSSxJQUFPRCxFQUFLQSxFQUFLQyxFQUFLQSxHQUMxRCxHQUFJQyxFQUFJLEVBQ0p5TCxFQUFTc2IsTUFFUixJQUFJL21CLEVBQUksRUFBRyxDQUNaLElBQUssSUFBSTNJLEVBQUksRUFBR0EsRUFBSXNVLElBQVV0VSxFQUMxQnFzQixFQUFhcnNCLEdBQUtpSixHQUFLa0wsRUFBZ0JzYixFQUFVenZCLEdBQUltVSxFQUFnQnViLEVBQVUxdkIsR0FBSTJJLEdBR3ZGLFlBREEwakIsRUFBYXRzQixPQUFTdVUsR0FJdEJGLEVBQVNxYixHQUdqQixJQUFTenZCLEVBQUksRUFBR0EsRUFBSXNVLElBQVV0VSxFQUMxQnFzQixFQUFhcnNCLEdBQUttVSxFQUFnQkMsRUFBU3BVLEdBRS9DcXNCLEVBQWF0c0IsT0FBU3VVLEVBWW5CLFNBQVNxYixHQUFnQnhiLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRM00sR0FDbEUsSUFBSVUsRUFBSzhMLEVBQWdCQyxHQUNyQjlMLEVBQUs2TCxFQUFnQkMsRUFBUyxHQUNsQyxJQUFLQSxHQUFVRSxFQUFRRixFQUFTQyxFQUFLRCxHQUFVRSxFQUFRLENBQ25ELElBQUkvTCxFQUFLNEwsRUFBZ0JDLEdBQ3JCNUwsRUFBSzJMLEVBQWdCQyxFQUFTLEdBQzlCd2IsRUFBZSxHQUFVdm5CLEVBQUlDLEVBQUlDLEVBQUlDLEdBQ3JDb25CLEVBQWVqb0IsSUFDZkEsRUFBTWlvQixHQUVWdm5CLEVBQUtFLEVBQ0xELEVBQUtFLEVBRVQsT0FBT2IsRUFnREosU0FBU2tvQixHQUFtQjFiLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRd2IsRUFBVUMsRUFBUWpvQixFQUFHQyxFQUFHc2tCLEVBQWNDLEVBQW9CMEQsR0FDL0gsR0FBSTViLEdBQVVDLEVBQ1YsT0FBT2lZLEVBRVgsSUFBSXRzQixFQUFHaXdCLEVBQ1AsR0FBaUIsSUFBYkgsRUFBZ0IsQ0FHaEIsSUFEQUcsRUFBa0IsR0FBVW5vQixFQUFHQyxFQUFHb00sRUFBZ0JDLEdBQVNELEVBQWdCQyxFQUFTLEtBQzlEa1ksRUFBb0IsQ0FDdEMsSUFBS3RzQixFQUFJLEVBQUdBLEVBQUlzVSxJQUFVdFUsRUFDdEJxc0IsRUFBYXJzQixHQUFLbVUsRUFBZ0JDLEVBQVNwVSxHQUcvQyxPQURBcXNCLEVBQWF0c0IsT0FBU3VVLEVBQ2YyYixFQUdQLE9BQU8zRCxFQUtmLElBRkEsSUFBSTRELEVBQVdGLEdBQThCLENBQUN0RCxJQUFLQSxLQUMvQ3hvQixFQUFRa1EsRUFBU0UsRUFDZHBRLEVBQVFtUSxHQUdYLEdBRkFtYixHQUFjcmIsRUFBaUJqUSxFQUFRb1EsRUFBUXBRLEVBQU9vUSxFQUFReE0sRUFBR0MsRUFBR21vQixJQUNwRUQsRUFBa0IsR0FBVW5vQixFQUFHQyxFQUFHbW9CLEVBQVMsR0FBSUEsRUFBUyxLQUNsQzVELEVBQW9CLENBRXRDLElBREFBLEVBQXFCMkQsRUFDaEJqd0IsRUFBSSxFQUFHQSxFQUFJc1UsSUFBVXRVLEVBQ3RCcXNCLEVBQWFyc0IsR0FBS2t3QixFQUFTbHdCLEdBRS9CcXNCLEVBQWF0c0IsT0FBU3VVLEVBQ3RCcFEsR0FBU29RLE9BYVRwUSxHQUNJb1EsRUFDSTFNLEtBQUtELEtBQU1DLEtBQUtxWCxLQUFLZ1IsR0FBbUJyb0IsS0FBS3FYLEtBQUtxTixJQUM5Q3dELEVBQ0EsRUFBRyxHQUd2QixHQUFJQyxJQUVBUCxHQUFjcmIsRUFBaUJFLEVBQU1DLEVBQVFGLEVBQVFFLEVBQVF4TSxFQUFHQyxFQUFHbW9CLElBQ25FRCxFQUFrQixHQUFVbm9CLEVBQUdDLEVBQUdtb0IsRUFBUyxHQUFJQSxFQUFTLEtBQ2xDNUQsR0FBb0IsQ0FFdEMsSUFEQUEsRUFBcUIyRCxFQUNoQmp3QixFQUFJLEVBQUdBLEVBQUlzVSxJQUFVdFUsRUFDdEJxc0IsRUFBYXJzQixHQUFLa3dCLEVBQVNsd0IsR0FFL0Jxc0IsRUFBYXRzQixPQUFTdVUsRUFHOUIsT0FBT2dZLEVDNUpKLFNBQVM2RCxHQUFtQmhjLEVBQWlCQyxFQUFRbEIsRUFBYW9CLEdBQ3JFLElBQUssSUFBSXRVLEVBQUksRUFBR2dCLEVBQUtrUyxFQUFZblQsT0FBUUMsRUFBSWdCLElBQU1oQixFQUUvQyxJQURBLElBQUk0UCxFQUFhc0QsRUFBWWxULEdBQ3BCa3VCLEVBQUksRUFBR0EsRUFBSTVaLElBQVU0WixFQUMxQi9aLEVBQWdCQyxLQUFZeEUsRUFBV3NlLEdBRy9DLE9BQU85WixFQ3NMSixTQUFTZ2MsR0FBSzF4QixFQUFPMnVCLEdBQ3hCLE9BQU9BLEVBQVl6bEIsS0FBSzJDLE1BQU03TCxFQUFRMnVCLEdBcUJuQyxTQUFTZ0QsR0FBU2xjLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRK1ksRUFBV2lELEVBQTJCQyxHQUVqRyxHQUFJbmMsR0FBVUMsRUFDVixPQUFPa2MsRUFHWCxJQVFJaG9CLEVBQUlDLEVBUkpILEVBQUsrbkIsR0FBS2pjLEVBQWdCQyxHQUFTaVosR0FDbkMva0IsRUFBSzhuQixHQUFLamMsRUFBZ0JDLEVBQVMsR0FBSWlaLEdBQzNDalosR0FBVUUsRUFFVmdjLEVBQTBCQyxLQUFzQmxvQixFQUNoRGlvQixFQUEwQkMsS0FBc0Jqb0IsRUFJaEQsR0FJSSxHQUhBQyxFQUFLNm5CLEdBQUtqYyxFQUFnQkMsR0FBU2laLEdBQ25DN2tCLEVBQUs0bkIsR0FBS2pjLEVBQWdCQyxFQUFTLEdBQUlpWixJQUN2Q2paLEdBQVVFLElBQ0lELEVBT1YsT0FGQWljLEVBQTBCQyxLQUFzQmhvQixFQUNoRCtuQixFQUEwQkMsS0FBc0IvbkIsRUFDekMrbkIsUUFFTmhvQixHQUFNRixHQUFNRyxHQUFNRixHQUMzQixLQUFPOEwsRUFBU0MsR0FBSyxDQUVqQixJQUFJMkIsRUFBS29hLEdBQUtqYyxFQUFnQkMsR0FBU2laLEdBQ25DblgsRUFBS2thLEdBQUtqYyxFQUFnQkMsRUFBUyxHQUFJaVosR0FHM0MsR0FGQWpaLEdBQVVFLEVBRU4wQixHQUFNek4sR0FBTTJOLEdBQU0xTixFQUF0QixDQUlBLElBQUkwSixFQUFNM0osRUFBS0YsRUFDWDhKLEVBQU0zSixFQUFLRixFQUVYaUssRUFBTXlELEVBQUszTixFQUNYbUssRUFBTTBELEVBQUs1TixFQUlYNEosRUFBTU0sR0FBT0wsRUFBTUksSUFDakJMLEVBQU0sR0FBS0ssRUFBTUwsR0FBUUEsR0FBT0ssR0FBUUwsRUFBTSxHQUFLSyxFQUFNTCxLQUN6REMsRUFBTSxHQUFLSyxFQUFNTCxHQUFRQSxHQUFPSyxHQUFRTCxFQUFNLEdBQUtLLEVBQU1MLElBRTNENUosRUFBS3lOLEVBQ0x4TixFQUFLME4sSUFNVG9hLEVBQTBCQyxLQUFzQmhvQixFQUNoRCtuQixFQUEwQkMsS0FBc0IvbkIsRUFDaERILEVBQUtFLEVBQ0xELEVBQUtFLEVBQ0xELEVBQUt5TixFQUNMeE4sRUFBSzBOLElBS1QsT0FGQW9hLEVBQTBCQyxLQUFzQmhvQixFQUNoRCtuQixFQUEwQkMsS0FBc0IvbkIsRUFDekMrbkIsRUNuU0osU0FBU0MsR0FBbUJyYyxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUW1jLEdBR3JFLElBRkEsSUFBSXZkLE9BQWtDcFAsSUFBcEIyc0IsRUFBZ0NBLEVBQWtCLEdBQ2hFendCLEVBQUksRUFDQ2t1QixFQUFJOVosRUFBUThaLEVBQUk3WixFQUFLNlosR0FBSzVaLEVBQy9CcEIsRUFBWWxULEtBQU9tVSxFQUFnQjJGLE1BQU1vVSxFQUFHQSxFQUFJNVosR0FHcEQsT0FEQXBCLEVBQVluVCxPQUFTQyxFQUNka1QsRUNSSixTQUFTd2QsR0FBV3ZjLEVBQWlCQyxFQUFRQyxFQUFLQyxHQUlyRCxJQUhBLElBQUlxYyxFQUFZLEVBQ1p0b0IsRUFBSzhMLEVBQWdCRSxFQUFNQyxHQUMzQmhNLEVBQUs2TCxFQUFnQkUsRUFBTUMsRUFBUyxHQUNqQ0YsRUFBU0MsRUFBS0QsR0FBVUUsRUFBUSxDQUNuQyxJQUFJL0wsRUFBSzRMLEVBQWdCQyxHQUNyQjVMLEVBQUsyTCxFQUFnQkMsRUFBUyxHQUNsQ3VjLEdBQWFyb0IsRUFBS0MsRUFBS0YsRUFBS0csRUFDNUJILEVBQUtFLEVBQ0xELEVBQUtFLEVBRVQsT0FBT21vQixFQUFZLEVDckJ2QixJQUFJLEdBQXdDLFdBQ3hDLElBQUludkIsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQW1KNUMsU0FqSGdDLFNBQVVHLEdBT3RDLFNBQVNzdUIsRUFBVzFkLEVBQWErYixHQUM3QixJQUFJeHNCLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQW1CakMsT0FkQTRELEVBQU1vdUIsV0FBYSxFQUtuQnB1QixFQUFNcXVCLG1CQUFxQixPQUNSaHRCLElBQWZtckIsR0FBNkI3dUIsTUFBTUMsUUFBUTZTLEVBQVksSUFLdkR6USxFQUFNdXNCLGVBQ3NELEVBQWVDLEdBTDNFeHNCLEVBQU1zc0IsbUJBQW1CRSxFQUNJLEdBTTFCeHNCLEVBb0ZYLE9BOUdBLEdBQVVtdUIsRUFBWXR1QixHQWlDdEJzdUIsRUFBVzN4QixVQUFVK3NCLE1BQVEsV0FDekIsT0FBTyxJQUFJNEUsRUFBVy94QixLQUFLc1YsZ0JBQWdCMkYsUUFBU2piLEtBQUt1dkIsU0FTN0R3QyxFQUFXM3hCLFVBQVVtdEIsZUFBaUIsU0FBVXRrQixFQUFHQyxFQUFHc2tCLEVBQWNDLEdBQ2hFLE9BQUlBLEVBQXFCbFosR0FBeUJ2VSxLQUFLZ00sWUFBYS9DLEVBQUdDLEdBQzVEdWtCLEdBRVB6dEIsS0FBS2l5QixtQkFBcUJqeUIsS0FBSzBHLGdCQUMvQjFHLEtBQUtneUIsVUFBWWpwQixLQUFLcVgsS0FBSzBRLEdBQWdCOXdCLEtBQUtzVixnQkFBaUIsRUFBR3RWLEtBQUtzVixnQkFBZ0JwVSxPQUFRbEIsS0FBS3lWLE9BQVEsSUFDOUd6VixLQUFLaXlCLGtCQUFvQmp5QixLQUFLMEcsZUFFM0JzcUIsR0FBbUJoeEIsS0FBS3NWLGdCQUFpQixFQUFHdFYsS0FBS3NWLGdCQUFnQnBVLE9BQVFsQixLQUFLeVYsT0FBUXpWLEtBQUtneUIsV0FBVyxFQUFNL29CLEVBQUdDLEVBQUdza0IsRUFBY0MsS0FPM0lzRSxFQUFXM3hCLFVBQVU2VixRQUFVLFdBQzNCLE9BQU80YixHQUFlN3hCLEtBQUtzVixnQkFBaUIsRUFBR3RWLEtBQUtzVixnQkFBZ0JwVSxPQUFRbEIsS0FBS3lWLFNBT3JGc2MsRUFBVzN4QixVQUFVc3ZCLGVBQWlCLFdBQ2xDLE9BQU9pQyxHQUFtQjN4QixLQUFLc1YsZ0JBQWlCLEVBQUd0VixLQUFLc1YsZ0JBQWdCcFUsT0FBUWxCLEtBQUt5VixTQU96RnNjLEVBQVczeEIsVUFBVTR2Qiw4QkFBZ0MsU0FBVWhELEdBQzNELElBQUl5RSxFQUE0QixHQUVoQyxPQURBQSxFQUEwQnZ3QixPSC9DM0IsU0FBd0JvVSxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUXVYLEVBQWtCeUUsRUFBMkJDLEdBQzlHLElBQUl6d0IsR0FBS3VVLEVBQU1ELEdBQVVFLEVBQ3pCLEdBQUl4VSxFQUFJLEVBQUcsQ0FDUCxLQUFPc1UsRUFBU0MsRUFBS0QsR0FBVUUsRUFDM0JnYyxFQUEwQkMsS0FBc0JwYyxFQUFnQkMsR0FDaEVrYyxFQUEwQkMsS0FDdEJwYyxFQUFnQkMsRUFBUyxHQUVqQyxPQUFPbWMsRUFHWCxJQUFJUSxFQUFVLElBQUkzd0IsTUFBTU4sR0FDeEJpeEIsRUFBUSxHQUFLLEVBQ2JBLEVBQVFqeEIsRUFBSSxHQUFLLEVBSWpCLElBRkEsSUFBSWt4QixFQUFRLENBQUM1YyxFQUFRQyxFQUFNQyxHQUN2QnBRLEVBQVEsRUFDTDhzQixFQUFNanhCLE9BQVMsR0FBRyxDQVFyQixJQVBBLElBQUlreEIsRUFBT0QsRUFBTUUsTUFDYkMsRUFBUUgsRUFBTUUsTUFDZEUsRUFBcUIsRUFDckIvb0IsRUFBSzhMLEVBQWdCZ2QsR0FDckI3b0IsRUFBSzZMLEVBQWdCZ2QsRUFBUSxHQUM3QjVvQixFQUFLNEwsRUFBZ0I4YyxHQUNyQnpvQixFQUFLMkwsRUFBZ0I4YyxFQUFPLEdBQ3ZCanhCLEVBQUlteEIsRUFBUTdjLEVBQVF0VSxFQUFJaXhCLEVBQU1qeEIsR0FBS3NVLEVBQVEsQ0FDaEQsSUFFSStjLEVBQW9CanBCLEVBRmhCK0wsRUFBZ0JuVSxHQUNoQm1VLEVBQWdCblUsRUFBSSxHQUN5QnFJLEVBQUlDLEVBQUlDLEVBQUlDLEdBQzdENm9CLEVBQW9CRCxJQUNwQmx0QixFQUFRbEUsRUFDUm94QixFQUFxQkMsR0FHekJELEVBQXFCdkYsSUFDckJrRixHQUFTN3NCLEVBQVFrUSxHQUFVRSxHQUFVLEVBQ2pDNmMsRUFBUTdjLEVBQVNwUSxHQUNqQjhzQixFQUFNcnZCLEtBQUt3dkIsRUFBT2p0QixHQUVsQkEsRUFBUW9RLEVBQVMyYyxHQUNqQkQsRUFBTXJ2QixLQUFLdUMsRUFBTytzQixJQUk5QixJQUFTanhCLEVBQUksRUFBR0EsRUFBSUYsSUFBS0UsRUFDakIrd0IsRUFBUS93QixLQUNSc3dCLEVBQTBCQyxLQUN0QnBjLEVBQWdCQyxFQUFTcFUsRUFBSXNVLEdBQ2pDZ2MsRUFBMEJDLEtBQ3RCcGMsRUFBZ0JDLEVBQVNwVSxFQUFJc1UsRUFBUyxJQUdsRCxPQUFPaWMsRUdMZ0NlLENBQWV6eUIsS0FBS3NWLGdCQUFpQixFQUFHdFYsS0FBS3NWLGdCQUFnQnBVLE9BQVFsQixLQUFLeVYsT0FBUXVYLEVBQWtCeUUsRUFBMkIsR0FDM0osSUFBSU0sRUFBV04sRUFBMkJqQyxLQU9yRHVDLEVBQVczeEIsVUFBVXF1QixRQUFVLFdBQzNCLE1DNUdTLGNEb0hic0QsRUFBVzN4QixVQUFVc3VCLGlCQUFtQixTQUFVM2lCLEdBQzlDLE9BQU8sR0FRWGdtQixFQUFXM3hCLFVBQVUrdkIsZUFBaUIsU0FBVTliLEVBQWErYixHQUN6RHB3QixLQUFLcXdCLFVBQVVELEVBQVkvYixFQUFhLEdBQ25DclUsS0FBS3NWLGtCQUNOdFYsS0FBS3NWLGdCQUFrQixJQUUzQnRWLEtBQUtzVixnQkFBZ0JwVSxPQUFTb3dCLEdBQW1CdHhCLEtBQUtzVixnQkFBaUIsRUFBR2pCLEVBQWFyVSxLQUFLeVYsUUFDNUZ6VixLQUFLd0csV0FFRnVyQixFQS9Hb0IsQ0FnSDdCLElFbEpGLElBQUksR0FBd0MsV0FDeEMsSUFBSXB2QixFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBd0g1QyxTQTNGMkIsU0FBVUcsR0FNakMsU0FBU2l2QixFQUFNcmUsRUFBYStiLEdBQ3hCLElBQUl4c0IsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBRWpDLE9BREE0RCxFQUFNdXNCLGVBQWU5YixFQUFhK2IsR0FDM0J4c0IsRUFnRlgsT0F4RkEsR0FBVTh1QixFQUFPanZCLEdBZWpCaXZCLEVBQU10eUIsVUFBVStzQixNQUFRLFdBQ3BCLElBQUlwTyxFQUFRLElBQUkyVCxFQUFNMXlCLEtBQUtzVixnQkFBZ0IyRixRQUFTamIsS0FBS3V2QixRQUV6RCxPQURBeFEsRUFBTTNXLGdCQUFnQnBJLE1BQ2YrZSxHQVNYMlQsRUFBTXR5QixVQUFVbXRCLGVBQWlCLFNBQVV0a0IsRUFBR0MsRUFBR3NrQixFQUFjQyxHQUMzRCxJQUFJblksRUFBa0J0VixLQUFLc1YsZ0JBQ3ZCOGIsRUFBa0IsR0FBVW5vQixFQUFHQyxFQUFHb00sRUFBZ0IsR0FBSUEsRUFBZ0IsSUFDMUUsR0FBSThiLEVBQWtCM0QsRUFBb0IsQ0FFdEMsSUFEQSxJQUFJaFksRUFBU3pWLEtBQUt5VixPQUNUdFUsRUFBSSxFQUFHQSxFQUFJc1UsSUFBVXRVLEVBQzFCcXNCLEVBQWFyc0IsR0FBS21VLEVBQWdCblUsR0FHdEMsT0FEQXFzQixFQUFhdHNCLE9BQVN1VSxFQUNmMmIsRUFHUCxPQUFPM0QsR0FRZmlGLEVBQU10eUIsVUFBVXN2QixlQUFpQixXQUM3QixPQUFRMXZCLEtBQUtzVixnQkFBdUJ0VixLQUFLc1YsZ0JBQWdCMkYsUUFBMUIsSUFPbkN5WCxFQUFNdHlCLFVBQVUydEIsY0FBZ0IsU0FBVWhpQixHQUN0QyxPakM0SWlEa0osRWlDNUlTbEosRWpDK0l2RGlKLEdBRkgvTCxHQURxQzhILEVpQzVJRC9RLEtBQUtzVixpQmpDNkkxQixHQUNmcE0sRUFBSTZILEVBQVcsR0FDUzlILEVBQUdDLEVBQUcrTCxHQUgvQixJQUFzQ2xFLEVBQVlrRSxFQUNqRGhNLEVBQ0FDLEdpQ3ZJSndwQixFQUFNdHlCLFVBQVVxdUIsUUFBVSxXQUN0QixNRHBGRyxTQzRGUGlFLEVBQU10eUIsVUFBVXN1QixpQkFBbUIsU0FBVTNpQixHQUN6QyxPQUFPMEksR0FBVzFJLEVBQVEvTCxLQUFLc1YsZ0JBQWdCLEdBQUl0VixLQUFLc1YsZ0JBQWdCLEtBTzVFb2QsRUFBTXR5QixVQUFVK3ZCLGVBQWlCLFNBQVU5YixFQUFhK2IsR0FDcERwd0IsS0FBS3F3QixVQUFVRCxFQUFZL2IsRUFBYSxHQUNuQ3JVLEtBQUtzVixrQkFDTnRWLEtBQUtzVixnQkFBa0IsSUFFM0J0VixLQUFLc1YsZ0JBQWdCcFUsT056R3RCLFNBQTJCb1UsRUFBaUJDLEVBQVF4RSxFQUFZMEUsR0FDbkUsSUFBSyxJQUFJdFUsRUFBSSxFQUFHZ0IsRUFBSzRPLEVBQVc3UCxPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQzlDbVUsRUFBZ0JDLEtBQVl4RSxFQUFXNVAsR0FFM0MsT0FBT29VLEVNcUcyQm9kLENBQWtCM3lCLEtBQUtzVixnQkFBaUIsRUFBR2pCLEVBQWFyVSxLQUFLeVYsUUFDM0Z6VixLQUFLd0csV0FFRmtzQixFQXpGZSxDQTBGeEIsSUMzR0ssU0FBU0UsR0FBeUJ0ZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTFKLEdBUzNFLE9BUmM0SixHQUFjNUosR0FLNUIsU0FBVWdGLEdBQ04sT0FBUThoQixHQUFxQnZkLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRMUUsRUFBVyxHQUFJQSxFQUFXLE9BYTlGLFNBQVM4aEIsR0FBcUJ2ZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUXhNLEVBQUdDLEdBVzFFLElBSEEsSUFBSTRwQixFQUFLLEVBQ0x0cEIsRUFBSzhMLEVBQWdCRSxFQUFNQyxHQUMzQmhNLEVBQUs2TCxFQUFnQkUsRUFBTUMsRUFBUyxHQUNqQ0YsRUFBU0MsRUFBS0QsR0FBVUUsRUFBUSxDQUNuQyxJQUFJL0wsRUFBSzRMLEVBQWdCQyxHQUNyQjVMLEVBQUsyTCxFQUFnQkMsRUFBUyxHQUM5QjlMLEdBQU1QLEVBQ0ZTLEVBQUtULElBQU1RLEVBQUtGLElBQU9OLEVBQUlPLElBQU9SLEVBQUlPLElBQU9HLEVBQUtGLEdBQU0sR0FDeERxcEIsSUFHQ25wQixHQUFNVCxJQUFNUSxFQUFLRixJQUFPTixFQUFJTyxJQUFPUixFQUFJTyxJQUFPRyxFQUFLRixHQUFNLEdBQzlEcXBCLElBRUp0cEIsRUFBS0UsRUFDTEQsRUFBS0UsRUFFVCxPQUFjLElBQVBtcEIsRUFXSixTQUFTQyxHQUFzQnpkLEVBQWlCQyxFQUFReWQsRUFBTXZkLEVBQVF4TSxFQUFHQyxHQUM1RSxHQUFvQixJQUFoQjhwQixFQUFLOXhCLE9BQ0wsT0FBTyxFQUVYLElBQUsyeEIsR0FBcUJ2ZCxFQUFpQkMsRUFBUXlkLEVBQUssR0FBSXZkLEVBQVF4TSxFQUFHQyxHQUNuRSxPQUFPLEVBRVgsSUFBSyxJQUFJL0gsRUFBSSxFQUFHZ0IsRUFBSzZ3QixFQUFLOXhCLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFDeEMsR0FBSTB4QixHQUFxQnZkLEVBQWlCMGQsRUFBSzd4QixFQUFJLEdBQUk2eEIsRUFBSzd4QixHQUFJc1UsRUFBUXhNLEVBQUdDLEdBQ3ZFLE9BQU8sRUFHZixPQUFPLEVDbEVKLFNBQVMrcEIsR0FBcUIzZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTFKLEdBQ3ZFLEluQ3VIMkJvSixFQUFTQyxFbUN2SGhDOGQsRUFBb0I3ZCxHbkMrS2pCLENBQUN6SyxJQUFVQSxLQUFVLEtBQVcsS21DL0tzQjBLLEVBQWlCQyxFQUFRQyxFQUFLQyxHQUMzRixRQUFLK0IsR0FBV3pMLEVBQVFtbkIsS25Dc0hZOWQsRW1DbkhUOGQsR25DbUhBL2QsRW1DbkhScEosR25Db0hILElBQU1xSixFQUFRLElBQzFCQSxFQUFRLElBQU1ELEVBQVEsSUFDdEJBLEVBQVEsSUFBTUMsRUFBUSxJQUN0QkEsRUFBUSxJQUFNRCxFQUFRLEltQ3BIdEIrZCxFQUFrQixJQUFNbm5CLEVBQU8sSUFBTW1uQixFQUFrQixJQUFNbm5CLEVBQU8sSUFHcEVtbkIsRUFBa0IsSUFBTW5uQixFQUFPLElBQU1tbkIsRUFBa0IsSUFBTW5uQixFQUFPLElDVHJFLFNBQWlCdUosRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVE3RSxHQUkxRCxJQUhBLElBRUl1aUIsRUFGQUMsRUFBUyxDQUFDOWQsRUFBZ0JDLEdBQVNELEVBQWdCQyxFQUFTLElBQzVEOGQsRUFBUyxHQUVOOWQsRUFBU0UsRUFBU0QsRUFBS0QsR0FBVUUsRUFBUSxDQUk1QyxHQUhBNGQsRUFBTyxHQUFLL2QsRUFBZ0JDLEVBQVNFLEdBQ3JDNGQsRUFBTyxHQUFLL2QsRUFBZ0JDLEVBQVNFLEVBQVMsR0FDOUMwZCxFQUFNdmlCLEVBQVN3aUIsRUFBUUMsR0FFbkIsT0FBT0YsRUFFWEMsRUFBTyxHQUFLQyxFQUFPLEdBQ25CRCxFQUFPLEdBQUtDLEVBQU8sR0FFdkIsT0FBTyxFREZBelIsQ0FBZXRNLEVBQWlCQyxFQUFRQyxFQUFLQyxHQU9wRCxTQUFVMmQsRUFBUUMsR0FDZCxPbkMwbkJELFNBQTJCdG5CLEVBQVF1bkIsRUFBTzlkLEdBQzdDLElBQUlnQyxHQUFhLEVBQ2IrYixFQUFXN2UsR0FBdUIzSSxFQUFRdW5CLEdBQzFDRSxFQUFTOWUsR0FBdUIzSSxFQUFReUosR0FDNUMsR0N6cEJjLElEeXBCVitkLEdDenBCVSxJRDBwQlZDLEVBQ0FoYyxHQUFhLE1BRVosQ0FDRCxJQUFJN0MsRUFBTzVJLEVBQU8sR0FDZDZJLEVBQU83SSxFQUFPLEdBQ2Q4SSxFQUFPOUksRUFBTyxHQUNkK0ksRUFBTy9JLEVBQU8sR0FDZDBuQixFQUFTSCxFQUFNLEdBQ2ZJLEVBQVNKLEVBQU0sR0FDZkssRUFBT25lLEVBQUksR0FDWG9lLEVBQU9wZSxFQUFJLEdBQ1hxZSxHQUFTRCxFQUFPRixJQUFXQyxFQUFPRixHQUNsQ3hxQixPQUFJLEVBQVFDLE9BQUksRUN0cUJqQixFRHVxQklzcUIsS0N2cUJKLEVEdXFCc0NELEtBR3JDL2IsR0FEQXZPLEVBQUkwcUIsR0FBUUMsRUFBTzllLEdBQVErZSxJQUNUbGYsR0FBUTFMLEdBQUs0TCxHQUU5QjJDLEtDM3FCRixFRDRxQklnYyxJQzVxQkosRUQ2cUJHRCxJQUdGL2IsR0FEQXRPLEVBQUkwcUIsR0FBUUQsRUFBTzllLEdBQVFnZixJQUNUamYsR0FBUTFMLEdBQUs0TCxHQUU5QjBDLEtDanJCRixFRGtyQklnYyxJQ2xyQkosRURtckJHRCxJQUdGL2IsR0FEQXZPLEVBQUkwcUIsR0FBUUMsRUFBT2hmLEdBQVFpZixJQUNUbGYsR0FBUTFMLEdBQUs0TCxHQUU5QjJDLEtDdnJCSCxHRHdyQktnYyxJQ3hyQkwsR0R5ckJJRCxJQUdGL2IsR0FEQXRPLEVBQUkwcUIsR0FBUUQsRUFBT2hmLEdBQVFrZixJQUNUamYsR0FBUTFMLEdBQUs0TCxHQUd2QyxPQUFPMEMsRW1DeHFCSXNjLENBQWtCL25CLEVBQVFxbkIsRUFBUUMsT0UzQjFDLFNBQVNoZixHQUFZaUIsRUFBaUJDLEVBQVFDLEVBQUtDLEdBQ3RELEtBQU9GLEVBQVNDLEVBQU1DLEdBQVEsQ0FDMUIsSUFBSyxJQUFJdFUsRUFBSSxFQUFHQSxFQUFJc1UsSUFBVXRVLEVBQUcsQ0FDN0IsSUFBSTR5QixFQUFNemUsRUFBZ0JDLEVBQVNwVSxHQUNuQ21VLEVBQWdCQyxFQUFTcFUsR0FBS21VLEVBQWdCRSxFQUFNQyxFQUFTdFUsR0FDN0RtVSxFQUFnQkUsRUFBTUMsRUFBU3RVLEdBQUs0eUIsRUFFeEN4ZSxHQUFVRSxFQUNWRCxHQUFPQyxHQ0hSLFNBQVN1ZSxHQUFzQjFlLEVBQWlCQyxFQUFRQyxFQUFLQyxHQU1oRSxJQUhBLElBQUl3ZSxFQUFPLEVBQ1B6cUIsRUFBSzhMLEVBQWdCRSxFQUFNQyxHQUMzQmhNLEVBQUs2TCxFQUFnQkUsRUFBTUMsRUFBUyxHQUNqQ0YsRUFBU0MsRUFBS0QsR0FBVUUsRUFBUSxDQUNuQyxJQUFJL0wsRUFBSzRMLEVBQWdCQyxHQUNyQjVMLEVBQUsyTCxFQUFnQkMsRUFBUyxHQUNsQzBlLElBQVN2cUIsRUFBS0YsSUFBT0csRUFBS0YsR0FDMUJELEVBQUtFLEVBQ0xELEVBQUtFLEVBRVQsT0FBZ0IsSUFBVHNxQixPQUFhaHZCLEVBQVlndkIsRUFBTyxFQXdFcEMsU0FBU0MsR0FBa0I1ZSxFQUFpQkMsRUFBUXlkLEVBQU12ZCxFQUFRMGUsR0FFckUsSUFEQSxJQUFJQyxPQUFzQm52QixJQUFka3ZCLEdBQTBCQSxFQUM3Qmh6QixFQUFJLEVBQUdnQixFQUFLNndCLEVBQUs5eEIsT0FBUUMsRUFBSWdCLElBQU1oQixFQUFHLENBQzNDLElBQUlxVSxFQUFNd2QsRUFBSzd4QixHQUNYa3pCLEVBQWNMLEdBQXNCMWUsRUFBaUJDLEVBQVFDLEVBQUtDLElBQ2xELElBQU50VSxFQUNQaXpCLEdBQVNDLElBQWtCRCxJQUFVQyxFQUNyQ0QsSUFBVUMsSUFBa0JELEdBQVNDLElBRXhDLEdBQW1CL2UsRUFBaUJDLEVBQVFDLEVBQUtDLEdBRXJERixFQUFTQyxFQUViLE9BQU9ELEVDaEhYLElBQUksR0FBd0MsV0FDeEMsSUFBSTVTLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0EwQ3hDZ3hCLEdBQXlCLFNBQVU3d0IsR0FhbkMsU0FBUzZ3QixFQUFRamdCLEVBQWErYixFQUFZbUUsR0FDdEMsSUFBSTN3QixFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0E2Q2pDLE9BeENBNEQsRUFBTTR3QixNQUFRLEdBS2Q1d0IsRUFBTTZ3Qiw0QkFBOEIsRUFLcEM3d0IsRUFBTTh3QixtQkFBcUIsS0FLM0I5d0IsRUFBTW91QixXQUFhLEVBS25CcHVCLEVBQU1xdUIsbUJBQXFCLEVBSzNCcnVCLEVBQU0rd0IsbUJBQXFCLEVBSzNCL3dCLEVBQU1neEIseUJBQTJCLFVBQ2QzdkIsSUFBZm1yQixHQUE0Qm1FLEdBQzVCM3dCLEVBQU1zc0IsbUJBQW1CRSxFQUNJLEdBQzdCeHNCLEVBQU00d0IsTUFBUUQsR0FHZDN3QixFQUFNdXNCLGVBQzZELEVBQWVDLEdBRS9FeHNCLEVBdU5YLE9BalJBLEdBQVUwd0IsRUFBUzd3QixHQWlFbkI2d0IsRUFBUWwwQixVQUFVeTBCLGlCQUFtQixTQUFVaEQsR0FDdEM3eEIsS0FBS3NWLGdCQUlObFUsRUFBT3BCLEtBQUtzVixnQkFBaUJ1YyxFQUFXakMsc0JBSHhDNXZCLEtBQUtzVixnQkFBa0J1YyxFQUFXakMscUJBQXFCM1UsUUFLM0RqYixLQUFLdzBCLE1BQU0xeEIsS0FBSzlDLEtBQUtzVixnQkFBZ0JwVSxRQUNyQ2xCLEtBQUt3RyxXQU9UOHRCLEVBQVFsMEIsVUFBVStzQixNQUFRLFdBQ3RCLElBQUkySCxFQUFVLElBQUlSLEVBQVF0MEIsS0FBS3NWLGdCQUFnQjJGLFFBQVNqYixLQUFLdXZCLE9BQVF2dkIsS0FBS3cwQixNQUFNdlosU0FFaEYsT0FEQTZaLEVBQVExc0IsZ0JBQWdCcEksTUFDakI4MEIsR0FTWFIsRUFBUWwwQixVQUFVbXRCLGVBQWlCLFNBQVV0a0IsRUFBR0MsRUFBR3NrQixFQUFjQyxHQUM3RCxPQUFJQSxFQUFxQmxaLEdBQXlCdlUsS0FBS2dNLFlBQWEvQyxFQUFHQyxHQUM1RHVrQixHQUVQenRCLEtBQUtpeUIsbUJBQXFCanlCLEtBQUswRyxnQkFDL0IxRyxLQUFLZ3lCLFVBQVlqcEIsS0FBS3FYLEtiN0QzQixTQUE4QjlLLEVBQWlCQyxFQUFReWQsRUFBTXZkLEVBQVEzTSxHQUN4RSxJQUFLLElBQUkzSCxFQUFJLEVBQUdnQixFQUFLNndCLEVBQUs5eEIsT0FBUUMsRUFBSWdCLElBQU1oQixFQUFHLENBQzNDLElBQUlxVSxFQUFNd2QsRUFBSzd4QixHQUNmMkgsRUFBTWdvQixHQUFnQnhiLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRM00sR0FDNUR5TSxFQUFTQyxFQUViLE9BQU8xTSxFYXVENEJpc0IsQ0FBcUIvMEIsS0FBS3NWLGdCQUFpQixFQUFHdFYsS0FBS3cwQixNQUFPeDBCLEtBQUt5VixPQUFRLElBQ2xHelYsS0FBS2l5QixrQkFBb0JqeUIsS0FBSzBHLGVic0RuQyxTQUFpQzRPLEVBQWlCQyxFQUFReWQsRUFBTXZkLEVBQVF3YixFQUFVQyxFQUFRam9CLEVBQUdDLEVBQUdza0IsRUFBY0MsRUFBb0IwRCxHQUVySSxJQURBLElBQUlFLEVBQVdGLEdBQThCLENBQUN0RCxJQUFLQSxLQUMxQzFzQixFQUFJLEVBQUdnQixFQUFLNndCLEVBQUs5eEIsT0FBUUMsRUFBSWdCLElBQU1oQixFQUFHLENBQzNDLElBQUlxVSxFQUFNd2QsRUFBSzd4QixHQUNmc3NCLEVBQXFCdUQsR0FBbUIxYixFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUXdiLEVBQVVDLEVBQVFqb0IsRUFBR0MsRUFBR3NrQixFQUFjQyxFQUFvQjRELEdBQ3hJOWIsRUFBU0MsRUFFYixPQUFPaVksRWEzREl1SCxDQUF3QmgxQixLQUFLc1YsZ0JBQWlCLEVBQUd0VixLQUFLdzBCLE1BQU94MEIsS0FBS3lWLE9BQVF6VixLQUFLZ3lCLFdBQVcsRUFBTS9vQixFQUFHQyxFQUFHc2tCLEVBQWNDLEtBTy9INkcsRUFBUWwwQixVQUFVcVUsV0FBYSxTQUFVeEwsRUFBR0MsR0FDeEMsT0FBTzZwQixHQUFzQi95QixLQUFLaTFCLDZCQUE4QixFQUFHajFCLEtBQUt3MEIsTUFBT3gwQixLQUFLeVYsT0FBUXhNLEVBQUdDLElBT25Hb3JCLEVBQVFsMEIsVUFBVTZWLFFBQVUsV0FDeEIsT1RqSUQsU0FBcUJYLEVBQWlCQyxFQUFReWQsRUFBTXZkLEdBRXZELElBREEsSUFBSVMsRUFBTyxFQUNGL1UsRUFBSSxFQUFHZ0IsRUFBSzZ3QixFQUFLOXhCLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFBRyxDQUMzQyxJQUFJcVUsRUFBTXdkLEVBQUs3eEIsR0FDZitVLEdBQVEyYixHQUFXdmMsRUFBaUJDLEVBQVFDLEVBQUtDLEdBQ2pERixFQUFTQyxFQUViLE9BQU9VLEVTMEhJZ2YsQ0FBZ0JsMUIsS0FBS2kxQiw2QkFBOEIsRUFBR2oxQixLQUFLdzBCLE1BQU94MEIsS0FBS3lWLFNBZWxGNmUsRUFBUWwwQixVQUFVc3ZCLGVBQWlCLFNBQVV5RSxHQUN6QyxJQUFJN2UsRUFRSixZQVBrQnJRLElBQWRrdkIsRUFFQUQsR0FEQTVlLEVBQWtCdFYsS0FBS2kxQiw2QkFBNkJoYSxRQUNqQixFQUFHamIsS0FBS3cwQixNQUFPeDBCLEtBQUt5VixPQUFRMGUsR0FHL0Q3ZSxFQUFrQnRWLEtBQUtzVixnQlZ6SjVCLFNBQWlDQSxFQUFpQkMsRUFBUXlkLEVBQU12ZCxFQUFRMGYsR0FHM0UsSUFGQSxJQUFJQyxPQUFvQ253QixJQUFyQmt3QixFQUFpQ0EsRUFBbUIsR0FDbkVoMEIsRUFBSSxFQUNDa3VCLEVBQUksRUFBR2dHLEVBQUtyQyxFQUFLOXhCLE9BQVFtdUIsRUFBSWdHLElBQU1oRyxFQUFHLENBQzNDLElBQUk3WixFQUFNd2QsRUFBSzNELEdBQ2YrRixFQUFhajBCLEtBQU93d0IsR0FBbUJyYyxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTJmLEVBQWFqMEIsSUFDMUZvVSxFQUFTQyxFQUdiLE9BREE0ZixFQUFhbDBCLE9BQVNDLEVBQ2ZpMEIsRVVrSklFLENBQXdCaGdCLEVBQWlCLEVBQUd0VixLQUFLdzBCLE1BQU94MEIsS0FBS3lWLFNBS3hFNmUsRUFBUWwwQixVQUFVbTFCLFFBQVUsV0FDeEIsT0FBT3YxQixLQUFLdzBCLE9BS2hCRixFQUFRbDBCLFVBQVVvMUIscUJBQXVCLFdBQ3JDLEdBQUl4MUIsS0FBS3kwQiw0QkFBOEJ6MEIsS0FBSzBHLGNBQWUsQ0FDdkQsSUFBSSt1QixFQUFhcmYsR0FBVXBXLEtBQUtnTSxhQUNoQ2hNLEtBQUswMEIsbUJDbkxWLFNBQWlDcGYsRUFBaUJDLEVBQVF5ZCxFQUFNdmQsRUFBUWlnQixFQUFhQyxFQUFtQnhHLEdBTTNHLElBTEEsSUFBSWh1QixFQUFHZ0IsRUFBSThHLEVBQUdPLEVBQUlFLEVBQUlELEVBQUlFLEVBQ3RCVCxFQUFJd3NCLEVBQVlDLEVBQW9CLEdBRXBDQyxFQUFnQixHQUVYenJCLEVBQUksRUFBRzByQixFQUFLN0MsRUFBSzl4QixPQUFRaUosRUFBSTByQixJQUFNMXJCLEVBQUcsQ0FDM0MsSUFBSXFMLEVBQU13ZCxFQUFLN29CLEdBR2YsSUFGQVgsRUFBSzhMLEVBQWdCRSxFQUFNQyxHQUMzQmhNLEVBQUs2TCxFQUFnQkUsRUFBTUMsRUFBUyxHQUMvQnRVLEVBQUlvVSxFQUFRcFUsRUFBSXFVLEVBQUtyVSxHQUFLc1UsRUFDM0IvTCxFQUFLNEwsRUFBZ0JuVSxHQUNyQndJLEVBQUsyTCxFQUFnQm5VLEVBQUksSUFDcEIrSCxHQUFLTyxHQUFNRSxHQUFNVCxHQUFPTyxHQUFNUCxHQUFLQSxHQUFLUyxLQUN6Q1YsR0FBTUMsRUFBSU8sSUFBT0UsRUFBS0YsSUFBUUMsRUFBS0YsR0FBTUEsRUFDekNvc0IsRUFBYzl5QixLQUFLbUcsSUFFdkJPLEVBQUtFLEVBQ0xELEVBQUtFLEVBS2IsSUFBSW1zQixFQUFTakksSUFDVGtJLEdBQW1CLElBR3ZCLElBRkFILEVBQWNyUCxLQUFLNWxCLEdBQ25CNkksRUFBS29zQixFQUFjLEdBQ2R6MEIsRUFBSSxFQUFHZ0IsRUFBS3l6QixFQUFjMTBCLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFBRyxDQUNoRHVJLEVBQUtrc0IsRUFBY3owQixHQUNuQixJQUFJNjBCLEVBQWdCanRCLEtBQUtrdEIsSUFBSXZzQixFQUFLRixHQUM5QndzQixFQUFnQkQsR0FFWmhELEdBQXNCemQsRUFBaUJDLEVBQVF5ZCxFQUFNdmQsRUFEekR4TSxHQUFLTyxFQUFLRSxHQUFNLEVBQ29EUixLQUNoRTRzQixFQUFTN3NCLEVBQ1Q4c0IsRUFBbUJDLEdBRzNCeHNCLEVBQUtFLEVBT1QsT0FMSXNrQixNQUFNOEgsS0FHTkEsRUFBU0osRUFBWUMsSUFFckJ4RyxHQUNBQSxFQUFTcnNCLEtBQUtnekIsRUFBUTVzQixFQUFHNnNCLEdBQ2xCNUcsR0FHQSxDQUFDMkcsRUFBUTVzQixFQUFHNnNCLEdEa0lXRyxDQUF3QmwyQixLQUFLaTFCLDZCQUE4QixFQUFHajFCLEtBQUt3MEIsTUFBT3gwQixLQUFLeVYsT0FBUWdnQixFQUFZLEdBQzdIejFCLEtBQUt5MEIsMkJBQTZCejBCLEtBQUswRyxjQUUzQyxPQUFPMUcsS0FBSzAwQixvQkFRaEJKLEVBQVFsMEIsVUFBVSsxQixpQkFBbUIsV0FDakMsT0FBTyxJQUFJLEdBQU1uMkIsS0FBS3cxQix1QmpCck1yQixRaUI4TUxsQixFQUFRbDBCLFVBQVVnMkIsbUJBQXFCLFdBQ25DLE9BQU9wMkIsS0FBS3cwQixNQUFNdHpCLFFBWXRCb3pCLEVBQVFsMEIsVUFBVWkyQixjQUFnQixTQUFVaHhCLEdBQ3hDLE9BQUlBLEVBQVEsR0FBS3JGLEtBQUt3MEIsTUFBTXR6QixRQUFVbUUsRUFDM0IsS0FFSixJQUFJLEdBQVdyRixLQUFLc1YsZ0JBQWdCMkYsTUFBZ0IsSUFBVjVWLEVBQWMsRUFBSXJGLEtBQUt3MEIsTUFBTW52QixFQUFRLEdBQUlyRixLQUFLdzBCLE1BQU1udkIsSUFBU3JGLEtBQUt1dkIsU0FPdkgrRSxFQUFRbDBCLFVBQVVrMkIsZUFBaUIsV0FNL0IsSUFMQSxJQUFJL0csRUFBU3Z2QixLQUFLdXZCLE9BQ2RqYSxFQUFrQnRWLEtBQUtzVixnQkFDdkIwZCxFQUFPaHpCLEtBQUt3MEIsTUFDWlUsRUFBYyxHQUNkM2YsRUFBUyxFQUNKcFUsRUFBSSxFQUFHZ0IsRUFBSzZ3QixFQUFLOXhCLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFBRyxDQUMzQyxJQUFJcVUsRUFBTXdkLEVBQUs3eEIsR0FDWDB3QixFQUFhLElBQUksR0FBV3ZjLEVBQWdCMkYsTUFBTTFGLEVBQVFDLEdBQU0rWixHQUNwRTJGLEVBQVlweUIsS0FBSyt1QixHQUNqQnRjLEVBQVNDLEVBRWIsT0FBTzBmLEdBS1haLEVBQVFsMEIsVUFBVTYwQiwyQkFBNkIsV0FDM0MsR0FBSWoxQixLQUFLMjBCLG1CQUFxQjMwQixLQUFLMEcsY0FBZSxDQUM5QyxJQUFJNE8sRUFBa0J0VixLQUFLc1YsaUJEM05oQyxTQUFnQ0EsRUFBaUJDLEVBQVF5ZCxFQUFNdmQsRUFBUTBlLEdBRTFFLElBREEsSUFBSUMsT0FBc0JudkIsSUFBZGt2QixHQUEwQkEsRUFDN0JoekIsRUFBSSxFQUFHZ0IsRUFBSzZ3QixFQUFLOXhCLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFBRyxDQUMzQyxJQUFJcVUsRUFBTXdkLEVBQUs3eEIsR0FDWGt6QixFQUFjTCxHQUFzQjFlLEVBQWlCQyxFQUFRQyxFQUFLQyxHQUN0RSxHQUFVLElBQU50VSxHQUNBLEdBQUtpekIsR0FBU0MsSUFBa0JELElBQVVDLEVBQ3RDLE9BQU8sT0FJWCxHQUFLRCxJQUFVQyxJQUFrQkQsR0FBU0MsRUFDdEMsT0FBTyxFQUdmOWUsRUFBU0MsRUFFYixPQUFPLEVDMk1LK2dCLENBQXVCamhCLEVBQWlCLEVBQUd0VixLQUFLdzBCLE1BQU94MEIsS0FBS3lWLFNBSTVEelYsS0FBSzQwQix5QkFBMkJ0ZixFQUFnQjJGLFFBQ2hEamIsS0FBSzQwQix5QkFBeUIxekIsT0FBU2d6QixHQUFrQmwwQixLQUFLNDBCLHlCQUEwQixFQUFHNTBCLEtBQUt3MEIsTUFBT3gwQixLQUFLeVYsU0FKNUd6VixLQUFLNDBCLHlCQUEyQnRmLEVBTXBDdFYsS0FBSzIwQixrQkFBb0IzMEIsS0FBSzBHLGNBRWxDLE9BQU8xRyxLQUFLNDBCLDBCQU9oQk4sRUFBUWwwQixVQUFVNHZCLDhCQUFnQyxTQUFVaEQsR0FDeEQsSUFBSXlFLEVBQTRCLEdBQzVCK0UsRUFBaUIsR0FFckIsT0FEQS9FLEVBQTBCdndCLE9YbUMzQixTQUF1Qm9VLEVBQWlCQyxFQUFReWQsRUFBTXZkLEVBQVErWSxFQUFXaUQsRUFBMkJDLEVBQWtCOEUsR0FDekgsSUFBSyxJQUFJcjFCLEVBQUksRUFBR2dCLEVBQUs2d0IsRUFBSzl4QixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQUcsQ0FDM0MsSUFBSXFVLEVBQU13ZCxFQUFLN3hCLEdBQ2Z1d0IsRUFBbUJGLEdBQVNsYyxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUStZLEVBQVdpRCxFQUEyQkMsR0FDeEc4RSxFQUFlMXpCLEtBQUs0dUIsR0FDcEJuYyxFQUFTQyxFQUViLE9BQU9rYyxFVzFDZ0MrRSxDQUFjejJCLEtBQUtzVixnQkFBaUIsRUFBR3RWLEtBQUt3MEIsTUFBT3gwQixLQUFLeVYsT0FBUTFNLEtBQUtxWCxLQUFLNE0sR0FBbUJ5RSxFQUEyQixFQUFHK0UsR0FDdkosSUFBSWxDLEVBQVE3QyxFQUEyQmpDLEdBQW1CZ0gsSUFPckVsQyxFQUFRbDBCLFVBQVVxdUIsUUFBVSxXQUN4QixNUHJSSyxXTzZSVDZGLEVBQVFsMEIsVUFBVXN1QixpQkFBbUIsU0FBVTNpQixHQUMzQyxPSmpORCxTQUFtQ3VKLEVBQWlCQyxFQUFReWQsRUFBTXZkLEVBQVExSixHQUM3RSxJQTNCRyxTQUE4QnVKLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRMUosR0FDdkUsU0FBSWtuQixHQUFxQjNkLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRMUosSUFHM0Q4bUIsR0FBcUJ2ZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTFKLEVBQU8sR0FBSUEsRUFBTyxLQUc3RThtQixHQUFxQnZkLEVBQWlCQyxFQUFRQyxFQUFLQyxFQUFRMUosRUFBTyxHQUFJQSxFQUFPLEtBRzdFOG1CLEdBQXFCdmQsRUFBaUJDLEVBQVFDLEVBQUtDLEVBQVExSixFQUFPLEdBQUlBLEVBQU8sS0FHN0U4bUIsR0FBcUJ2ZCxFQUFpQkMsRUFBUUMsRUFBS0MsRUFBUTFKLEVBQU8sR0FBSUEsRUFBTyxLQWM1RTJxQixDQUFxQnBoQixFQUFpQkMsRUFBUXlkLEVBQUssR0FBSXZkLEVBQVExSixHQUNoRSxPQUFPLEVBRVgsR0FBb0IsSUFBaEJpbkIsRUFBSzl4QixPQUNMLE9BQU8sRUFFWCxJQUFLLElBQUlDLEVBQUksRUFBR2dCLEVBQUs2d0IsRUFBSzl4QixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQ3hDLEdBQUl5eEIsR0FBeUJ0ZCxFQUFpQjBkLEVBQUs3eEIsRUFBSSxHQUFJNnhCLEVBQUs3eEIsR0FBSXNVLEVBQVExSixLQUNuRWtuQixHQUFxQjNkLEVBQWlCMGQsRUFBSzd4QixFQUFJLEdBQUk2eEIsRUFBSzd4QixHQUFJc1UsRUFBUTFKLEdBQ3JFLE9BQU8sRUFJbkIsT0FBTyxFSW1NSTRxQixDQUEwQjMyQixLQUFLaTFCLDZCQUE4QixFQUFHajFCLEtBQUt3MEIsTUFBT3gwQixLQUFLeVYsT0FBUTFKLElBUXBHdW9CLEVBQVFsMEIsVUFBVSt2QixlQUFpQixTQUFVOWIsRUFBYStiLEdBQ3REcHdCLEtBQUtxd0IsVUFBVUQsRUFBWS9iLEVBQWEsR0FDbkNyVSxLQUFLc1Ysa0JBQ050VixLQUFLc1YsZ0JBQWtCLElBRTNCLElBQUkwZCxFWmhSTCxTQUFpQzFkLEVBQWlCQyxFQUFRNmYsRUFBYzNmLEVBQVE4ZSxHQUduRixJQUZBLElBQUl2QixFQUFPdUIsR0FBc0IsR0FDN0JwekIsRUFBSSxFQUNDa3VCLEVBQUksRUFBR2dHLEVBQUtELEVBQWFsMEIsT0FBUW11QixFQUFJZ0csSUFBTWhHLEVBQUcsQ0FDbkQsSUFBSTdaLEVBQU04YixHQUFtQmhjLEVBQWlCQyxFQUFRNmYsRUFBYS9GLEdBQUk1WixHQUN2RXVkLEVBQUs3eEIsS0FBT3FVLEVBQ1pELEVBQVNDLEVBR2IsT0FEQXdkLEVBQUs5eEIsT0FBU0MsRUFDUDZ4QixFWXVRUTRELENBQXdCNTJCLEtBQUtzVixnQkFBaUIsRUFBR2pCLEVBQWFyVSxLQUFLeVYsT0FBUXpWLEtBQUt3MEIsT0FDM0Z4MEIsS0FBS3NWLGdCQUFnQnBVLE9BQXlCLElBQWhCOHhCLEVBQUs5eEIsT0FBZSxFQUFJOHhCLEVBQUtBLEVBQUs5eEIsT0FBUyxHQUN6RWxCLEtBQUt3RyxXQUVGOHRCLEVBbFJpQixDQW1SMUIsSUFDRixZQStCTyxTQUFTdUMsR0FBVzlxQixHQUN2QixJQUFJNEksRUFBTzVJLEVBQU8sR0FDZDZJLEVBQU83SSxFQUFPLEdBQ2Q4SSxFQUFPOUksRUFBTyxHQUNkK0ksRUFBTy9JLEVBQU8sR0FDZHVKLEVBQWtCLENBQ2xCWCxFQUNBQyxFQUNBRCxFQUNBRyxFQUNBRCxFQUNBQyxFQUNBRCxFQUNBRCxFQUNBRCxFQUNBQyxHQUVKLE9BQU8sSUFBSTBmLEdBQVFoZixFQUFpQmthLEdBQW1CLENBQ25EbGEsRUFBZ0JwVSxTRS9XeEIsSUFBSSxHQUF3QyxXQUN4QyxJQUFJeUIsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTRqRDVDLFNBQVN3ekIsR0FBa0JsbUIsRUFBVW1tQixHQUNqQ0MsWUFBVyxXQUNQcG1CLEVBQVNtbUIsS0FDVixHQW1KQSxTQUFTRSxHQUFnQkMsR0FDNUIsUUFBSUEsRUFBVUMsY0FBZ0JELEVBQVVFLGVBQy9CLEdBQWlCRixFQUFVQyxhQUFjRCxFQUFVRSxnQkFJeERGLEVBQVVHLG1CQUFxQkgsRUFBVUksa0JBR3pDSixFQUFVSyxpQkFBbUJMLEVBQVVNLGVBYS9DLFNBQVNDLEdBQWtCMW1CLEVBQVk0RixFQUFNOEMsRUFBVXBNLEVBQVlxSixHQUUvRCxJQUFJMFQsRUFBV3JoQixLQUFLOEssS0FBSzZDLEdBQ3JCMlQsRUFBV3RoQixLQUFLNkssS0FBSzhDLEdBQ3JCZ2hCLEVBQU8zbUIsRUFBVyxHQUFLcVosRUFBV3JaLEVBQVcsR0FBS3NaLEVBQ2xEc04sRUFBTzVtQixFQUFXLEdBQUtxWixFQUFXclosRUFBVyxHQUFLc1osRUFPdEQsTUFBTyxFQU5QcU4sSUFBUy9nQixFQUFLLEdBQUssRUFBSThDLEVBQVMsSUFBTXBNLEdBSWpCK2MsR0FIckJ1TixJQUFTbGUsRUFBUyxHQUFLOUMsRUFBSyxHQUFLLEdBQUt0SixJQUV0Q2dkLEdBQVlBLEdBRUVzTixFQUFPdk4sRUFBV3NOLEVBQU9yTixHQUczQyxTQTU5QzBCLFNBQVU1bUIsR0FLaEMsU0FBU20wQixFQUFLcm9CLEdBQ1YsSUFBSTNMLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQUlqQzRELEVBQU1xQyxHQUlOckMsRUFBTXVDLEtBSU52QyxFQUFNeUMsR0FDTixJQUFJaUUsRUFBVSxFQUFPLEdBQUlpRixHQXNEekIsT0FqREEzTCxFQUFNaTBCLE9BQVMsQ0FBQyxFQUFHLEdBS25CajBCLEVBQU1rMEIsWUFBYyxHQUtwQmwwQixFQUFNbTBCLG9CQU1ObjBCLEVBQU1vMEIsWUFBY2xXLEdBQWlCeFgsRUFBUW9HLFdBQVksYUFLekQ5TSxFQUFNcTBCLGNBQWdCLENBQUMsSUFBSyxLQUs1QnIwQixFQUFNczBCLGNBQWdCLEtBS3RCdDBCLEVBQU11MEIsa0JBS052MEIsRUFBTXcwQixnQkFLTngwQixFQUFNeTBCLG1CQUFnQnB6QixFQUNsQnFGLEVBQVFtTSxTQUNSbk0sRUFBUW1NLE9BQVNxTSxHQUFtQnhZLEVBQVFtTSxPQUFRN1MsRUFBTW8wQixjQUUxRDF0QixFQUFReUIsU0FDUnpCLEVBQVF5QixPQUFTaVgsR0FBZTFZLEVBQVF5QixPQUFRbkksRUFBTW8wQixjQUUxRHAwQixFQUFNMDBCLGNBQWNodUIsR0FDYjFHLEVBbXRDWCxPQTN4Q0EsR0FBVWcwQixFQUFNbjBCLEdBOEVoQm0wQixFQUFLeDNCLFVBQVVrNEIsY0FBZ0IsU0FBVWh1QixHQUlyQyxJQUNJaXVCLEVBNHVDTCxTQUFvQ2p1QixHQUN2QyxJQUFJa3VCLEVBQ0E3dEIsRUFDQUUsRUFLQUMsT0FBOEI3RixJQUFwQnFGLEVBQVFRLFFBQXdCUixFQUFRUSxRQTE1Q25DLEVBMjVDZkMsT0FBOEI5RixJQUFwQnFGLEVBQVFTLFFBQXdCVCxFQUFRUyxRQUhqQyxHQUlqQjB0QixPQUFvQ3h6QixJQUF2QnFGLEVBQVFtdUIsV0FBMkJudUIsRUFBUW11QixXQUhwQyxFQUlwQkMsT0FBb0N6ekIsSUFBdkJxRixFQUFRb3VCLFlBQTJCcHVCLEVBQVFvdUIsV0FDeERsTyxPQUFnRHZsQixJQUF2Q3FGLEVBQVFxdUIsNEJBQ2ZydUIsRUFBUXF1QiwyQkFFVnZOLE9BQTRDbm1CLElBQTNCcUYsRUFBUThnQixnQkFBK0I5Z0IsRUFBUThnQixlQUNoRTFhLEVBQWFvUixHQUFpQnhYLEVBQVFvRyxXQUFZLGFBQ2xEa29CLEVBQWFsb0IsRUFBVzFFLFlBQ3hCNnNCLEVBQXNCdnVCLEVBQVF1dUIsb0JBQzlCOXNCLEVBQVN6QixFQUFReUIsT0FLckIsR0FKSzJzQixHQUFlM3NCLElBQVUyRSxFQUFXb04sYUFDckMrYSxHQUFzQixFQUN0QjlzQixFQUFTNnNCLFFBRWUzekIsSUFBeEJxRixFQUFRd3VCLFlBQTJCLENBQ25DLElBQUlBLEVBQWN4dUIsRUFBUXd1QixZQUMxQm51QixFQUFnQm11QixFQUFZaHVCLEdBQzVCRCxPQUM2QjVGLElBQXpCNnpCLEVBQVkvdEIsR0FDTit0QixFQUFZL3RCLEdBQ1ordEIsRUFBWUEsRUFBWTUzQixPQUFTLEdBRXZDczNCLEVBREFsdUIsRUFBUXl1QixvQnRCN2pEYixTQUFpQ0QsRUFBYXBOLEVBQVlDLEVBQWVDLEdBQzVFLE9BQU8sU0FRR3ZlLEVBQVlyTSxFQUFXMlYsRUFBTThULEdBQ25DLFFBQW1CeGxCLElBQWZvSSxFQUEwQixDQUMxQixJQUFJMUMsRUFBZ0JtdUIsRUFBWSxHQUM1Qmp1QixFQUFnQml1QixFQUFZQSxFQUFZNTNCLE9BQVMsR0FDakQycUIsRUFBZUYsRUFDYlYsR0FBNkJ0Z0IsRUFBZWdoQixFQUFlaFYsRUFBTWlWLEdBQ2pFamhCLEVBRU4sR0FBSThmLEVBRUEsWUFENEJ4bEIsSUFBZnltQixHQUEyQkEsRUFJakNILEdBQTJCbGUsRUFBWXdlLEVBQWNoaEIsR0FGakQsRUFBTXdDLEVBQVl4QyxFQUFlZ2hCLEdBSWhELElBQUltTixFQUFTandCLEtBQUtGLElBQUlnakIsRUFBY3hlLEdBQ2hDNFcsRUFBSWxiLEtBQUtrd0IsTUFBTW40QixFQUFrQmc0QixFQUFhRSxFQUFRaDRCLElBQzFELE9BQUk4M0IsRUFBWTdVLEdBQUs0SCxHQUFnQjVILEVBQUk2VSxFQUFZNTNCLE9BQVMsRUFDbkQ0M0IsRUFBWTdVLEVBQUksR0FFcEI2VSxFQUFZN1UsS3NCaWlESWlWLENBQXdCSixFQUFhdE8sR0FBU3FPLEdBQXVCOXNCLEVBQVFxZixHQUc3RUssR0FBdUI5Z0IsRUFBZUUsRUFBZTJmLEdBQVNxTyxHQUF1QjlzQixFQUFRcWYsT0FHdkgsQ0FFRCxJQUlJK04sR0FKUVAsRUFHTjd2QixLQUFLRCxJQUFJLEdBQVM4dkIsR0FBYXppQixHQUFVeWlCLElBRHRDLElBQU1yYyxHQUFnQixZQUFrQjdMLEVBQVdpTixvQkN4bkRyQyxJRDBuRCtCNVUsS0FBS2lqQixJQXJDdkMsRUF6NUNMLEdBKzdDWG9OLEVBQXVCRCxFQUN2QnB3QixLQUFLaWpCLElBdkNXLEVBdUNZcU4sU0FHVnAwQixLQUR0QjBGLEVBQWdCTCxFQUFRSyxlQUVwQkcsRUFBVSxFQUdWSCxFQUFnQnd1QixFQUF1QnB3QixLQUFLaWpCLElBQUl5TSxFQUFZM3RCLFFBSTFDN0YsS0FEdEI0RixFQUFnQlAsRUFBUU8saUJBSVpBLE9BRmdCNUYsSUFBcEJxRixFQUFRUyxhQUNzQjlGLElBQTFCcUYsRUFBUUssY0FDUUEsRUFBZ0I1QixLQUFLaWpCLElBQUl5TSxFQUFZMXRCLEdBR3JDb3VCLEVBQXVCcHdCLEtBQUtpakIsSUFBSXlNLEVBQVkxdEIsR0FJaERxdUIsR0FJeEJydUIsRUFDSUQsRUFDSS9CLEtBQUtrd0IsTUFBTWx3QixLQUFLTSxJQUFJc0IsRUFBZ0JFLEdBQWlCOUIsS0FBS00sSUFBSW92QixJQUN0RTV0QixFQUFnQkYsRUFBZ0I1QixLQUFLaWpCLElBQUl5TSxFQUFZMXRCLEVBQVVELEdBRTNEMHRCLEVBREFsdUIsRUFBUXl1QixvQnRCNWpEYixTQUEyQk8sRUFBTzN1QixFQUFlNHVCLEVBQW1CN04sRUFBWUMsRUFBZUMsR0FDbEcsT0FBTyxTQVFHdmUsRUFBWXJNLEVBQVcyVixFQUFNOFQsR0FDbkMsUUFBbUJ4bEIsSUFBZm9JLEVBQTBCLENBQzFCLElBQUl3ZSxFQUFlRixFQUNiVixHQUE2QnRnQixFQUFlZ2hCLEVBQWVoVixFQUFNaVYsR0FDakVqaEIsRUFDRkUsT0FBc0M1RixJQUF0QnMwQixFQUFrQ0EsRUFBb0IsRUFFMUUsR0FBSTlPLEVBRUEsWUFENEJ4bEIsSUFBZnltQixHQUEyQkEsRUFJakNILEdBQTJCbGUsRUFBWXdlLEVBQWNoaEIsR0FGakQsRUFBTXdDLEVBQVl4QyxFQUFlZ2hCLEdBSWhELElBQ0kyTixFQUFlendCLEtBQUswd0IsS0FBSzF3QixLQUFLTSxJQUFJc0IsRUFBZ0JraEIsR0FBZ0I5aUIsS0FBS00sSUFBSWl3QixHQUQvRCxNQUVaL2pCLEdBQVV2VSxHQUFhLEdBRlgsTUFFOEIsR0FDMUNnNEIsRUFBU2p3QixLQUFLRixJQUFJZ2pCLEVBQWN4ZSxHQUNoQ3FzQixFQUFrQjN3QixLQUFLa3dCLE1BQU1sd0IsS0FBS00sSUFBSXNCLEVBQWdCcXVCLEdBQVVqd0IsS0FBS00sSUFBSWl3QixHQUFTL2pCLEdBQ2xGb2tCLEVBQVk1d0IsS0FBS0QsSUFBSTB3QixFQUFjRSxHQUV2QyxPQUFPLEVBRGEvdUIsRUFBZ0I1QixLQUFLaWpCLElBQUlzTixFQUFPSyxHQUN4Qjl1QixFQUFlZ2hCLEtzQitoRHBCK04sQ0FBa0JuQixFQUFZOXRCLEVBQWVFLEVBQWUyZixHQUFTcU8sR0FBdUI5c0IsRUFBUXFmLEdBR3BHSyxHQUF1QjlnQixFQUFlRSxFQUFlMmYsR0FBU3FPLEdBQXVCOXNCLEVBQVFxZixHQUc1SCxNQUFPLENBQ0h5TyxXQUFZckIsRUFDWjd0QixjQUFlQSxFQUNmRSxjQUFlQSxFQUNmQyxRQUFTQSxFQUNUMnRCLFdBQVlBLEdBbjBDbUJxQixDQUEyQnh2QixHQUsxRHRLLEtBQUsrNUIsZUFBaUJ4QixFQUF5QjV0QixjQUsvQzNLLEtBQUtnNkIsZUFBaUJ6QixFQUF5QjF0QixjQUsvQzdLLEtBQUtpNkIsWUFBYzFCLEVBQXlCRSxXQUs1Q3o0QixLQUFLazZCLGFBQWU1dkIsRUFBUXd1QixZQUs1Qjk0QixLQUFLbTZCLFNBQVc3dkIsRUFBUTh2QixRQUt4QnA2QixLQUFLcTZCLFNBQVc5QixFQUF5Qnp0QixRQUN6QyxJQUFJd3ZCLEVBd3JDTCxTQUFnQ2h3QixHQUNuQyxRQUF1QnJGLElBQW5CcUYsRUFBUXlCLE9BQXNCLENBQzlCLElBQUl5ZSxPQUE0Q3ZsQixJQUFuQ3FGLEVBQVFpd0Isd0JBQ2Zqd0IsRUFBUWl3Qix1QkFFZCxPQUFPalEsR0FBYWhnQixFQUFReUIsT0FBUXpCLEVBQVF1dUIsb0JBQXFCck8sR0FFckUsSUFBSTlaLEVBQWFvUixHQUFpQnhYLEVBQVFvRyxXQUFZLGFBQ3RELElBQTJCLElBQXZCcEcsRUFBUW91QixZQUF1QmhvQixFQUFXb04sV0FBWSxDQUN0RCxJQUFJL1IsRUFBUzJFLEVBQVcxRSxZQUFZaVAsUUFHcEMsT0FGQWxQLEVBQU8sSUFBSyxJQUNaQSxFQUFPLEdBQUtuQixJQUNMMGYsR0FBYXZlLEdBQVEsR0FBTyxHQUV2QyxPQUFPLEdBdHNDb0J5dUIsQ0FBdUJsd0IsR0FDMUNrdUIsRUFBdUJELEVBQXlCc0IsV0FDaERZLEVBeXlDTCxTQUFrQ253QixHQUVyQyxRQURnRHJGLElBQTNCcUYsRUFBUW93QixnQkFBK0Jwd0IsRUFBUW93QixlQUNoRCxDQUNoQixJQUFJQyxFQUFvQnJ3QixFQUFRcXdCLGtCQUNoQyxZQUEwQjExQixJQUF0QjAxQixJQUF5RCxJQUF0QkEsR3JCL25EdkNuTSxFQUE2QixHQUFVLEdBQ3BDLFNBTUc5WCxFQUFVK1QsR0FDaEIsT0FBSUEsRUFDTy9ULE9BRU16UixJQUFieVIsRUFDSTNOLEtBQUtrdEIsSUFBSXZmLElBQWE4WCxFQUNmLEVBR0E5WCxPQUlYLEtxQjhtRDJCLElBQXRCaWtCLEVBQ0UsR0FFMkIsaUJBQXRCQSxHckIvcERNMTVCLEVxQmdxREcwNUIsRXJCL3BEekJDLEVBQVMsRUFBSTd4QixLQUFLa0IsR0FBTWhKLEVBQ3JCLFNBTUd5VixFQUFVK1QsR0FDaEIsT0FBSUEsRUFDTy9ULE9BRU16UixJQUFieVIsRUFDQUEsRUFBVzNOLEtBQUtrd0IsTUFBTXZpQixFQUFXa2tCLEVBQVEsSUFBT0EsT0FJaEQsSXFCa3BETyxHQUlYLE9BQU85TyxHckJ2cURSLElBQXVCN3FCLEVBQ3RCMjVCLEVBeUJBcE0sRXFCa1Z5QnFNLENBQXlCdndCLEdBS2xEdEssS0FBSzg2QixhQUFlLENBQ2hCcmtCLE9BQVE2akIsRUFDUmp0QixXQUFZbXJCLEVBQ1o5aEIsU0FBVStqQixHQUVkejZCLEtBQUsrNkIsaUJBQWlDOTFCLElBQXJCcUYsRUFBUW9NLFNBQXlCcE0sRUFBUW9NLFNBQVcsR0FDckUxVyxLQUFLZzdCLHVCQUFxQy8xQixJQUFuQnFGLEVBQVFtTSxPQUF1Qm5NLEVBQVFtTSxPQUFTLFdBQzVDeFIsSUFBdkJxRixFQUFRK0MsV0FDUnJOLEtBQUtpN0IsY0FBYzN3QixFQUFRK0MsaUJBRUxwSSxJQUFqQnFGLEVBQVFnRCxNQUNidE4sS0FBS2s3QixRQUFRNXdCLEVBQVFnRCxNQUV6QnROLEtBQUt3SCxjQXBEWSxJQXlEakJ4SCxLQUFLbTdCLFNBQVc3d0IsR0FFcEIzSyxPQUFPQyxlQUFlZzRCLEVBQUt4M0IsVUFBVyxVQUFXLENBVTdDcUgsSUFBSyxXQUNELE9BQU96SCxLQUFLbTZCLFVBRWhCanlCLElBQUssU0FBVWt5QixHQUNYLElBQUlnQixFQUFhcDdCLEtBQUttNkIsU0FDdEJuNkIsS0FBS202QixTQUFXQyxFQUNoQixJQUFJM2pCLEVBQVN6VyxLQUFLb1csWUFDbEIsR0FBSUssRUFBUSxDQUNSLElBQUk0a0IsRUFBYWpCLEdBQVcsQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0Q2dCLEVBQWFBLEdBQWMsQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUNyQyxJQUFJL3RCLEVBQWFyTixLQUFLNmtCLGdCQUNsQjlKLEVBQVcxTixFQUFhLEdBQ3ZCZ3VCLEVBQVcsR0FBS0QsRUFBVyxHQUFLQSxFQUFXLEdBQUtDLEVBQVcsSUFDNURDLEVBQVdqdUIsRUFBYSxHQUN2Qmd1QixFQUFXLEdBQUtELEVBQVcsR0FBS0EsRUFBVyxHQUFLQyxFQUFXLElBQ2hFcjdCLEtBQUtnN0Isa0JBQWtCLENBQUN2a0IsRUFBTyxHQUFLc0UsRUFBU3RFLEVBQU8sR0FBSzZrQixNQUdqRUMsWUFBWSxFQUNaQyxjQUFjLElBVWxCNUQsRUFBS3gzQixVQUFVcTdCLG1CQUFxQixTQUFVQyxHQUMxQyxJQUFJcHhCLEVBQVUsRUFBTyxHQUFJdEssS0FBS203QixVQVk5QixZQVYyQmwyQixJQUF2QnFGLEVBQVErQyxXQUNSL0MsRUFBUStDLFdBQWFyTixLQUFLNmtCLGdCQUcxQnZhLEVBQVFnRCxLQUFPdE4sS0FBSzI3QixVQUd4QnJ4QixFQUFRbU0sT0FBU3pXLEtBQUs0N0Isb0JBRXRCdHhCLEVBQVFvTSxTQUFXMVcsS0FBSzY3QixjQUNqQixFQUFPLEdBQUl2eEIsRUFBU294QixJQW1DL0I5RCxFQUFLeDNCLFVBQVUwb0IsUUFBVSxTQUFVZ1QsR0FDM0I5N0IsS0FBSys3QixVQUFZLzdCLEtBQUtnOEIsZ0JBQ3RCaDhCLEtBQUtpOEIsbUJBQW1CLEdBRzVCLElBREEsSUFBSUMsRUFBTyxJQUFJMzZCLE1BQU1hLFVBQVVsQixRQUN0QkMsRUFBSSxFQUFHQSxFQUFJKzZCLEVBQUtoN0IsU0FBVUMsRUFBRyxDQUNsQyxJQUFJbUosRUFBVWxJLFVBQVVqQixHQUNwQm1KLEVBQVFtTSxVQUNSbk0sRUFBVSxFQUFPLEdBQUlBLElBQ2JtTSxPQUFTcU0sR0FBbUJ4WSxFQUFRbU0sT0FBUXpXLEtBQUttOEIsa0JBRXpEN3hCLEVBQVE2akIsVUFDUjdqQixFQUFVLEVBQU8sR0FBSUEsSUFDYjZqQixPQUFTckwsR0FBbUJ4WSxFQUFRNmpCLE9BQVFudUIsS0FBS204QixrQkFFN0RELEVBQUsvNkIsR0FBS21KLEVBRWR0SyxLQUFLbzhCLGdCQUFnQngyQixNQUFNNUYsS0FBTWs4QixJQUtyQ3RFLEVBQUt4M0IsVUFBVWc4QixnQkFBa0IsU0FBVU4sR0FDdkMsSUFDSWxyQixFQURBeXJCLEVBQWlCajZCLFVBQVVsQixPQU8vQixHQUxJbTdCLEVBQWlCLEdBQ3dCLG1CQUFsQ2o2QixVQUFVaTZCLEVBQWlCLEtBQ2xDenJCLEVBQVd4TyxVQUFVaTZCLEVBQWlCLEtBQ3BDQSxJQUVEcjhCLEtBQUsrN0IsUUFBUyxDQUVmLElBQUl6d0IsRUFBUWxKLFVBQVVpNkIsRUFBaUIsR0FhdkMsT0FaSS93QixFQUFNbUwsUUFDTnpXLEtBQUtnN0Isa0JBQWtCMXZCLEVBQU1tTCxhQUVkeFIsSUFBZnFHLEVBQU1nQyxNQUNOdE4sS0FBS2s3QixRQUFRNXZCLEVBQU1nQyxXQUVBckksSUFBbkJxRyxFQUFNb0wsVUFDTjFXLEtBQUsrNkIsWUFBWXp2QixFQUFNb0wsZUFFdkI5RixHQUNBa21CLEdBQWtCbG1CLEdBQVUsSUFTcEMsSUFMQSxJQUFJMGlCLEVBQVFnSixLQUFLQyxNQUNiOWxCLEVBQVN6VyxLQUFLazRCLGNBQWNqZCxRQUM1QjVOLEVBQWFyTixLQUFLbTRCLGtCQUNsQnpoQixFQUFXMVcsS0FBS280QixnQkFDaEJvRSxFQUFTLEdBQ0pyN0IsRUFBSSxFQUFHQSxFQUFJazdCLElBQWtCbDdCLEVBQUcsQ0FDckMsSUFBSW1KLEVBQTJDbEksVUFBVWpCLEdBQ3JEKzFCLEVBQVksQ0FDWjVELE1BQU9BLEVBQ1BtSixVQUFVLEVBQ1Z0TyxPQUFRN2pCLEVBQVE2akIsT0FDaEJ1TyxjQUErQnozQixJQUFyQnFGLEVBQVFveUIsU0FBeUJweUIsRUFBUW95QixTQUFXLElBQzlEQyxPQUFRcnlCLEVBQVFxeUIsUUFBVXpRLEdBQzFCdGIsU0FBVUEsR0FpQmQsR0FmSXRHLEVBQVFtTSxTQUNSeWdCLEVBQVVDLGFBQWUxZ0IsRUFDekJ5Z0IsRUFBVUUsYUFBZTlzQixFQUFRbU0sT0FBT3dFLFFBQ3hDeEUsRUFBU3lnQixFQUFVRSxtQkFFRm55QixJQUFqQnFGLEVBQVFnRCxNQUNSNHBCLEVBQVVHLGlCQUFtQmhxQixFQUM3QjZwQixFQUFVSSxpQkFBbUJ0M0IsS0FBSzQ4QixxQkFBcUJ0eUIsRUFBUWdELE1BQy9ERCxFQUFhNnBCLEVBQVVJLGtCQUVsQmh0QixFQUFRK0MsYUFDYjZwQixFQUFVRyxpQkFBbUJocUIsRUFDN0I2cEIsRUFBVUksaUJBQW1CaHRCLEVBQVErQyxXQUNyQ0EsRUFBYTZwQixFQUFVSSx1QkFFRnJ5QixJQUFyQnFGLEVBQVFvTSxTQUF3QixDQUNoQ3dnQixFQUFVSyxlQUFpQjdnQixFQUMzQixJQUFJbW1CLEVBQVEsR0FBT3Z5QixFQUFRb00sU0FBV0EsRUFBVzNOLEtBQUtrQixHQUFJLEVBQUlsQixLQUFLa0IsSUFBTWxCLEtBQUtrQixHQUM5RWl0QixFQUFVTSxlQUFpQjlnQixFQUFXbW1CLEVBQ3RDbm1CLEVBQVd3Z0IsRUFBVU0sZUFHckJQLEdBQWdCQyxHQUNoQkEsRUFBVXVGLFVBQVcsRUFJckJuSixHQUFTNEQsRUFBVXdGLFNBRXZCRixFQUFPMTVCLEtBQUtvMEIsR0FFaEJsM0IsS0FBSzgzQixZQUFZaDFCLEtBQUswNUIsR0FDdEJ4OEIsS0FBSzg4QixRRXRsQkUsRUZzbEIwQixHQUNqQzk4QixLQUFLKzhCLHFCQU9UbkYsRUFBS3gzQixVQUFVNDdCLGFBQWUsV0FDMUIsT0FBT2g4QixLQUFLNjNCLE9FL2xCTCxHRitsQmtDLEdBTzdDRCxFQUFLeDNCLFVBQVU0OEIsZUFBaUIsV0FDNUIsT0FBT2g5QixLQUFLNjNCLE9FdG1CSCxHRnNtQmtDLEdBTS9DRCxFQUFLeDNCLFVBQVU2OEIsaUJBQW1CLFdBRTlCLElBQUk5TyxFQURKbnVCLEtBQUs4OEIsUUU5bUJFLEdGOG1CMkI5OEIsS0FBSzYzQixPRTltQmhDLElGZ25CUCxJQUFLLElBQUkxMkIsRUFBSSxFQUFHZ0IsRUFBS25DLEtBQUs4M0IsWUFBWTUyQixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQUcsQ0FDdkQsSUFBSXE3QixFQUFTeDhCLEtBQUs4M0IsWUFBWTMyQixHQUk5QixHQUhJcTdCLEVBQU8sR0FBRzVyQixVQUNWa21CLEdBQWtCMEYsRUFBTyxHQUFHNXJCLFVBQVUsSUFFckN1ZCxFQUNELElBQUssSUFBSWtCLEVBQUksRUFBR2dHLEVBQUttSCxFQUFPdDdCLE9BQVFtdUIsRUFBSWdHLElBQU1oRyxFQUFHLENBQzdDLElBQUk2SCxFQUFZc0YsRUFBT25OLEdBQ3ZCLElBQUs2SCxFQUFVdUYsU0FBVSxDQUNyQnRPLEVBQVMrSSxFQUFVL0ksT0FDbkIsUUFLaEJudUIsS0FBSzgzQixZQUFZNTJCLE9BQVMsRUFDMUJsQixLQUFLcTRCLGNBQWdCbEssR0FLekJ5SixFQUFLeDNCLFVBQVUyOEIsa0JBQW9CLFdBSy9CLFFBSmlDOTNCLElBQTdCakYsS0FBSyszQixzQkFDTG1GLHFCQUFxQmw5QixLQUFLKzNCLHFCQUMxQi8zQixLQUFLKzNCLHlCQUFzQjl5QixHQUUxQmpGLEtBQUtnOEIsZUFBVixDQUtBLElBRkEsSUFBSU8sRUFBTUQsS0FBS0MsTUFDWFksR0FBTyxFQUNGaDhCLEVBQUluQixLQUFLODNCLFlBQVk1MkIsT0FBUyxFQUFHQyxHQUFLLElBQUtBLEVBQUcsQ0FHbkQsSUFGQSxJQUFJcTdCLEVBQVN4OEIsS0FBSzgzQixZQUFZMzJCLEdBQzFCaThCLEdBQWlCLEVBQ1ovTixFQUFJLEVBQUdnRyxFQUFLbUgsRUFBT3Q3QixPQUFRbXVCLEVBQUlnRyxJQUFNaEcsRUFBRyxDQUM3QyxJQUFJNkgsRUFBWXNGLEVBQU9uTixHQUN2QixJQUFJNkgsRUFBVXVGLFNBQWQsQ0FHQSxJQUFJWSxFQUFVZCxFQUFNckYsRUFBVTVELE1BQzFCZ0ssRUFBV3BHLEVBQVV3RixTQUFXLEVBQUlXLEVBQVVuRyxFQUFVd0YsU0FBVyxFQUNuRVksR0FBWSxHQUNacEcsRUFBVXVGLFVBQVcsRUFDckJhLEVBQVcsR0FHWEYsR0FBaUIsRUFFckIsSUFBSUcsRUFBV3JHLEVBQVV5RixPQUFPVyxHQUNoQyxHQUFJcEcsRUFBVUMsYUFBYyxDQUN4QixJQUFJamdCLEVBQUtnZ0IsRUFBVUMsYUFBYSxHQUM1Qi9mLEVBQUs4ZixFQUFVQyxhQUFhLEdBRzVCbHVCLEVBQUlpTyxFQUFLcW1CLEdBRkpyRyxFQUFVRSxhQUFhLEdBRUZsZ0IsR0FDMUJoTyxFQUFJa08sRUFBS21tQixHQUZKckcsRUFBVUUsYUFBYSxHQUVGaGdCLEdBQzlCcFgsS0FBS2s0QixjQUFnQixDQUFDanZCLEVBQUdDLEdBRTdCLEdBQUlndUIsRUFBVUcsa0JBQW9CSCxFQUFVSSxpQkFBa0IsQ0FDMUQsSUFBSWpxQixFQUEwQixJQUFia3dCLEVBQ1hyRyxFQUFVSSxpQkFDVkosRUFBVUcsaUJBQ1JrRyxHQUNLckcsRUFBVUksaUJBQW1CSixFQUFVRyxrQkFDcEQsR0FBSUgsRUFBVS9JLE9BQVEsQ0FDbEIsSUFBSXhYLEVBQU8zVyxLQUFLdzlCLGlCQUFpQng5QixLQUFLNjdCLGVBQ2xDNEIsRUFBd0J6OUIsS0FBSzg2QixhQUFhenRCLFdBQVdBLEVBQVksRUFBR3NKLEdBQU0sR0FDOUUzVyxLQUFLazRCLGNBQWdCbDRCLEtBQUswOUIsb0JBQW9CRCxFQUF1QnZHLEVBQVUvSSxRQUVuRm51QixLQUFLbTRCLGtCQUFvQjlxQixFQUN6QnJOLEtBQUsyOUIsbUJBQWtCLEdBRTNCLFFBQWlDMTRCLElBQTdCaXlCLEVBQVVLLHFCQUNtQnR5QixJQUE3Qml5QixFQUFVTSxlQUE4QixDQUN4QyxJQUFJOWdCLEVBQXdCLElBQWI2bUIsRUFDVCxHQUFPckcsRUFBVU0sZUFBaUJ6dUIsS0FBS2tCLEdBQUksRUFBSWxCLEtBQUtrQixJQUNsRGxCLEtBQUtrQixHQUNQaXRCLEVBQVVLLGVBQ1JnRyxHQUNLckcsRUFBVU0sZUFBaUJOLEVBQVVLLGdCQUNsRCxHQUFJTCxFQUFVL0ksT0FBUSxDQUNsQixJQUFJeVAsRUFBc0I1OUIsS0FBSzg2QixhQUFhcGtCLFNBQVNBLEdBQVUsR0FDL0QxVyxLQUFLazRCLGNBQWdCbDRCLEtBQUs2OUIsc0JBQXNCRCxFQUFxQjFHLEVBQVUvSSxRQUVuRm51QixLQUFLbzRCLGdCQUFrQjFoQixFQUkzQixHQUZBMVcsS0FBSzI5QixtQkFBa0IsR0FDdkJSLEdBQU8sR0FDRmpHLEVBQVV1RixTQUNYLE9BR1IsR0FBSVcsRUFBZ0IsQ0FDaEJwOUIsS0FBSzgzQixZQUFZMzJCLEdBQUssS0FDdEJuQixLQUFLODhCLFFFOXNCTixHRjhzQm1DLEdBQ2xDLElBQUlsc0IsRUFBVzRyQixFQUFPLEdBQUc1ckIsU0FDckJBLEdBQ0FrbUIsR0FBa0JsbUIsR0FBVSxJQUt4QzVRLEtBQUs4M0IsWUFBYzkzQixLQUFLODNCLFlBQVlnRyxPQUFPQyxTQUN2Q1osUUFBcUNsNEIsSUFBN0JqRixLQUFLKzNCLHNCQUNiLzNCLEtBQUsrM0Isb0JBQXNCaUcsc0JBQXNCaCtCLEtBQUsrOEIsa0JBQWtCcjNCLEtBQUsxRixVQVFyRjQzQixFQUFLeDNCLFVBQVV5OUIsc0JBQXdCLFNBQVVubkIsRUFBVXlYLEdBQ3ZELElBQUkxWCxFeEJwc0JRMUYsRUFBWThyQixFd0Jxc0JwQm9CLEVBQWdCaitCLEtBQUs0N0Isb0JBTXpCLFlBTHNCMzJCLElBQWxCZzVCLElBRUEsR0FEQXhuQixFQUFTLENBQUN3bkIsRUFBYyxHQUFLOVAsRUFBTyxHQUFJOFAsRUFBYyxHQUFLOVAsRUFBTyxJQUN6Q3pYLEVBQVcxVyxLQUFLNjdCLGV4QnhzQnJCZ0IsRXdCeXNCRTFPLEd4QnpzQmRwZCxFd0J5c0JNMEYsR3hCeHNCWCxLQUFPb21CLEVBQU0sR0FDeEI5ckIsRUFBVyxLQUFPOHJCLEVBQU0sSXdCeXNCYnBtQixHQU9YbWhCLEVBQUt4M0IsVUFBVXM5QixvQkFBc0IsU0FBVXJ3QixFQUFZOGdCLEdBQ3ZELElBQUkxWCxFQUNBd25CLEVBQWdCaitCLEtBQUs0N0Isb0JBQ3JCc0MsRUFBb0JsK0IsS0FBSzZrQixnQkFRN0IsWUFQc0I1ZixJQUFsQmc1QixRQUFxRGg1QixJQUF0Qmk1QixJQUsvQnpuQixFQUFTLENBSkQwWCxFQUFPLEdBQ1Y5Z0IsR0FBYzhnQixFQUFPLEdBQUs4UCxFQUFjLElBQU9DLEVBQzVDL1AsRUFBTyxHQUNWOWdCLEdBQWM4Z0IsRUFBTyxHQUFLOFAsRUFBYyxJQUFPQyxJQUdqRHpuQixHQVFYbWhCLEVBQUt4M0IsVUFBVW85QixpQkFBbUIsU0FBVVcsR0FDeEMsSUFBSXhuQixFQUFPM1csS0FBS2k0QixjQUNoQixHQUFJa0csRUFBYyxDQUNkLElBQUl0VyxFQUFJbFIsRUFBSyxHQUNUbVIsRUFBSW5SLEVBQUssR0FDYixNQUFPLENBQ0g1TixLQUFLa3RCLElBQUlwTyxFQUFJOWUsS0FBSzhLLElBQUlzcUIsSUFDbEJwMUIsS0FBS2t0QixJQUFJbk8sRUFBSS9lLEtBQUs2SyxJQUFJdXFCLElBQzFCcDFCLEtBQUtrdEIsSUFBSXBPLEVBQUk5ZSxLQUFLNkssSUFBSXVxQixJQUNsQnAxQixLQUFLa3RCLElBQUluTyxFQUFJL2UsS0FBSzhLLElBQUlzcUIsS0FJOUIsT0FBT3huQixHQVVmaWhCLEVBQUt4M0IsVUFBVWcrQixnQkFBa0IsU0FBVUMsR0FDdkNyK0IsS0FBS2k0QixjQUFnQjEyQixNQUFNQyxRQUFRNjhCLEdBQzdCQSxFQUFTcGpCLFFBQ1QsQ0FBQyxJQUFLLEtBQ1BqYixLQUFLZzhCLGdCQUNOaDhCLEtBQUtpOEIsbUJBQW1CLElBU2hDckUsRUFBS3gzQixVQUFVZ1csVUFBWSxXQUN2QixJQUFJSyxFQUFTelcsS0FBSzQ3QixvQkFDbEIsT0FBS25sQixFQUdFb00sR0FBaUJwTSxFQUFRelcsS0FBS204QixpQkFGMUIxbEIsR0FRZm1oQixFQUFLeDNCLFVBQVV3N0Isa0JBQW9CLFdBQy9CLE9BQXNFNTdCLEtBQUt5SCxJQUFJNjJCLEtBS25GMUcsRUFBS3gzQixVQUFVbStCLGVBQWlCLFdBQzVCLE9BQU92K0IsS0FBSzg2QixjQUtoQmxELEVBQUt4M0IsVUFBVW8rQix1QkFBeUIsV0FDcEMsT0FBT3grQixLQUFLbTdCLFNBQVNwQyxxQkFNekJuQixFQUFLeDNCLFVBQVVxK0IsU0FBVyxTQUFVQyxHQUNoQyxZQUFrQno1QixJQUFkeTVCLEdBQ0FBLEVBQVUsR0FBSzErQixLQUFLNjNCLE9BQU8sR0FDM0I2RyxFQUFVLEdBQUsxK0IsS0FBSzYzQixPQUFPLEdBQ3BCNkcsR0FHQTErQixLQUFLNjNCLE9BQU81YyxTQWEzQjJjLEVBQUt4M0IsVUFBVXUrQixnQkFBa0IsU0FBVU4sR0FFdkMsTzdCdlVxQnR5QixFNkJzVVIvTCxLQUFLNCtCLHdCQUF3QlAsR0FDZHIrQixLQUFLbThCLGdCN0JyVTFCcHdCLEVBRlIsSUFBc0JBLEc2QjhVekI2ckIsRUFBS3gzQixVQUFVdytCLHdCQUEwQixTQUFVUCxHQUMvQyxJQUFJMW5CLEVBQU8wbkIsR0FBWXIrQixLQUFLNitCLCtCQUN4QnBvQixFQUErRHpXLEtBQUs0N0Isb0JBQ3hFLEVBQU9ubEIsRUFBUSxHQUNmLElBQUlwSixFQUFxQ3JOLEtBQUs2a0IsZ0JBQzlDLE9BQXNCNWYsSUFBZm9JLEVBQTBCLEdBQ2pDLElBQUlxSixFQUFtQzFXLEtBQUs2N0IsY0FFNUMsT0FEQSxPQUFvQjUyQixJQUFieVIsRUFBd0IsR0FDeEJGLEdBQWtCQyxFQUFRcEosRUFBWXFKLEVBQVVDLElBTzNEaWhCLEVBQUt4M0IsVUFBVTZMLGlCQUFtQixXQUM5QixPQUFPak0sS0FBSys1QixnQkFPaEJuQyxFQUFLeDNCLFVBQVU4TCxpQkFBbUIsV0FDOUIsT0FBT2xNLEtBQUtnNkIsZ0JBT2hCcEMsRUFBS3gzQixVQUFVZ00sV0FBYSxXQUN4QixPQUE4QnBNLEtBQUs4K0IscUJBQXFCOStCLEtBQUtnNkIsaUJBT2pFcEMsRUFBS3gzQixVQUFVd00sV0FBYSxTQUFVVSxHQUNsQ3ROLEtBQUtzNEIsY0FBY3Q0QixLQUFLeTdCLG1CQUFtQixDQUFFMXdCLFFBQVN1QyxNQU8xRHNxQixFQUFLeDNCLFVBQVUrTCxXQUFhLFdBQ3hCLE9BQThCbk0sS0FBSzgrQixxQkFBcUI5K0IsS0FBSys1QixpQkFPakVuQyxFQUFLeDNCLFVBQVV5TSxXQUFhLFNBQVVTLEdBQ2xDdE4sS0FBS3M0QixjQUFjdDRCLEtBQUt5N0IsbUJBQW1CLENBQUUzd0IsUUFBU3dDLE1BTzFEc3FCLEVBQUt4M0IsVUFBVTIrQix1QkFBeUIsU0FBVUMsR0FDOUNoL0IsS0FBS3M0QixjQUFjdDRCLEtBQUt5N0IsbUJBQW1CLENBQUUxQyxvQkFBcUJpRyxNQU90RXBILEVBQUt4M0IsVUFBVSs3QixjQUFnQixXQUMzQixPQUFPbjhCLEtBQUtnNEIsYUFRaEJKLEVBQUt4M0IsVUFBVXlrQixjQUFnQixXQUMzQixPQUF3QzdrQixLQUFLeUgsSUFBSTYyQixLQVFyRDFHLEVBQUt4M0IsVUFBVTYrQixlQUFpQixXQUM1QixPQUFPai9CLEtBQUtrNkIsY0FVaEJ0QyxFQUFLeDNCLFVBQVU4K0IsdUJBQXlCLFNBQVVuekIsRUFBUXN5QixHQUN0RCxPQUFPcitCLEtBQUttL0IsK0JBQStCbmMsR0FBZWpYLEVBQVEvTCxLQUFLbThCLGlCQUFrQmtDLElBUzdGekcsRUFBS3gzQixVQUFVKytCLCtCQUFpQyxTQUFVcHpCLEVBQVFzeUIsR0FDOUQsSUFBSTFuQixFQUFPMG5CLEdBQVlyK0IsS0FBSzYrQiwrQkFDeEJ4VCxFQUFjLEdBQVN0ZixHQUFVNEssRUFBSyxHQUN0QzJVLEVBQWNuVixHQUFVcEssR0FBVTRLLEVBQUssR0FDM0MsT0FBTzVOLEtBQUtELElBQUl1aUIsRUFBYUMsSUFRakNzTSxFQUFLeDNCLFVBQVVnL0IsOEJBQWdDLFNBQVVDLEdBQ3JELElBQUkvRixFQUFRK0YsR0FBYSxFQUNyQjEwQixFQUFnQjNLLEtBQUtzL0IseUJBQXlCdC9CLEtBQUsrNUIsZ0JBQ25EbHZCLEVBQWdCN0ssS0FBS2c2QixlQUNyQmx4QixFQUFNQyxLQUFLTSxJQUFJc0IsRUFBZ0JFLEdBQWlCOUIsS0FBS00sSUFBSWl3QixHQUM3RCxPQUFPLFNBS0d6NUIsR0FFTixPQURpQjhLLEVBQWdCNUIsS0FBS2lqQixJQUFJc04sRUFBT3o1QixFQUFRaUosS0FVakU4dUIsRUFBS3gzQixVQUFVeTdCLFlBQWMsV0FDekIsT0FBOEI3N0IsS0FBS3lILElBQUk2MkIsS0FRM0MxRyxFQUFLeDNCLFVBQVVtL0IsOEJBQWdDLFNBQVVGLEdBQ3JELElBQUlHLEVBQVd6MkIsS0FBS00sSUFBSWcyQixHQUFhLEdBQ2pDMTBCLEVBQWdCM0ssS0FBS3MvQix5QkFBeUJ0L0IsS0FBSys1QixnQkFDbkRsdkIsRUFBZ0I3SyxLQUFLZzZCLGVBQ3JCbHhCLEVBQU1DLEtBQUtNLElBQUlzQixFQUFnQkUsR0FBaUIyMEIsRUFDcEQsT0FBTyxTQUtHbnlCLEdBRU4sT0FEWXRFLEtBQUtNLElBQUlzQixFQUFnQjBDLEdBQWNteUIsRUFBVzEyQixJQVV0RTh1QixFQUFLeDNCLFVBQVV5K0IsNkJBQStCLFNBQVVWLEdBQ3BELElBQUl4bkIsRUFBTzNXLEtBQUt3OUIsaUJBQWlCVyxHQUM3Qi9ELEVBQVVwNkIsS0FBS202QixTQU9uQixPQU5JQyxJQUNBempCLEVBQU8sQ0FDSEEsRUFBSyxHQUFLeWpCLEVBQVEsR0FBS0EsRUFBUSxHQUMvQnpqQixFQUFLLEdBQUt5akIsRUFBUSxHQUFLQSxFQUFRLEtBR2hDempCLEdBS1hpaEIsRUFBS3gzQixVQUFVaU8sU0FBVyxXQUN0QixJQUFJcUMsRUFBYTFRLEtBQUttOEIsZ0JBQ2xCOXVCLEVBQW9Dck4sS0FBSzZrQixnQkFDekNuTyxFQUFXMVcsS0FBSzY3QixjQUNoQnBsQixFQUE4RHpXLEtBQUs0N0Isb0JBQ25FeEIsRUFBVXA2QixLQUFLbTZCLFNBQ25CLEdBQUlDLEVBQVMsQ0FDVCxJQUFJcUYsRUFBY3ovQixLQUFLNitCLCtCQUN2QnBvQixFQUFTZ2hCLEdBQWtCaGhCLEVBQVF6VyxLQUFLdzlCLG1CQUFvQixDQUFDaUMsRUFBWSxHQUFLLEVBQUlyRixFQUFRLEdBQUlxRixFQUFZLEdBQUssRUFBSXJGLEVBQVEsSUFBSy9zQixFQUFZcUosR0FFaEosTUFBTyxDQUNIRCxPQUFRQSxFQUFPd0UsTUFBTSxHQUNyQnZLLGdCQUEyQnpMLElBQWZ5TCxFQUEyQkEsRUFBYSxLQUNwRHJELFdBQVlBLEVBQ1pxSixTQUFVQSxFQUNWcEosS0FBTXROLEtBQUsyN0IsWUFVbkIvRCxFQUFLeDNCLFVBQVV1N0IsUUFBVSxXQUNyQixJQUFJcnVCLEVBQ0FELEVBQWFyTixLQUFLNmtCLGdCQUl0QixZQUhtQjVmLElBQWZvSSxJQUNBQyxFQUFPdE4sS0FBSzgrQixxQkFBcUJ6eEIsSUFFOUJDLEdBUVhzcUIsRUFBS3gzQixVQUFVMCtCLHFCQUF1QixTQUFVenhCLEdBQzVDLElBQ0l2RSxFQUFLMnZCLEVBRExsakIsRUFBU3ZWLEtBQUtxNkIsVUFBWSxFQUU5QixHQUFJcjZCLEtBQUtrNkIsYUFBYyxDQUNuQixJQUFJd0YsRUFBVTUrQixFQUFrQmQsS0FBS2s2QixhQUFjN3NCLEVBQVksR0FDL0RrSSxFQUFTbXFCLEVBQ1Q1MkIsRUFBTTlJLEtBQUtrNkIsYUFBYXdGLEdBRXBCakgsRUFEQWlILEdBQVcxL0IsS0FBS2s2QixhQUFhaDVCLE9BQVMsRUFDekIsRUFHQTRILEVBQU05SSxLQUFLazZCLGFBQWF3RixFQUFVLFFBSW5ENTJCLEVBQU05SSxLQUFLKzVCLGVBQ1h0QixFQUFhejRCLEtBQUtpNkIsWUFFdEIsT0FBTzFrQixFQUFTeE0sS0FBS00sSUFBSVAsRUFBTXVFLEdBQWN0RSxLQUFLTSxJQUFJb3ZCLElBUTFEYixFQUFLeDNCLFVBQVV3OEIscUJBQXVCLFNBQVV0dkIsR0FDNUMsR0FBSXROLEtBQUtrNkIsYUFBYyxDQUNuQixHQUFJbDZCLEtBQUtrNkIsYUFBYWg1QixRQUFVLEVBQzVCLE9BQU8sRUFFWCxJQUFJeStCLEVBQVksRUFBTTUyQixLQUFLa3dCLE1BQU0zckIsR0FBTyxFQUFHdE4sS0FBS2s2QixhQUFhaDVCLE9BQVMsR0FDbEV1M0IsRUFBYXo0QixLQUFLazZCLGFBQWF5RixHQUFhMy9CLEtBQUtrNkIsYUFBYXlGLEVBQVksR0FDOUUsT0FBUTMvQixLQUFLazZCLGFBQWF5RixHQUN0QjUyQixLQUFLaWpCLElBQUl5TSxFQUFZLEVBQU1uckIsRUFBT3F5QixFQUFXLEVBQUcsSUFHcEQsT0FBUTMvQixLQUFLKzVCLGVBQWlCaHhCLEtBQUtpakIsSUFBSWhzQixLQUFLaTZCLFlBQWEzc0IsRUFBT3ROLEtBQUtxNkIsV0FhN0V6QyxFQUFLeDNCLFVBQVV3L0IsSUFBTSxTQUFVQyxFQUFrQnR3QixHQUU3QyxJQUFJdXdCLEVBSUosR0FIQSxFQUFPditCLE1BQU1DLFFBQVFxK0IsSUFFYixtQkFEcUIsRUFBd0Msc0JBQ2pELElBQ2hCdCtCLE1BQU1DLFFBQVFxK0IsR0FDZCxHQUFRLEdBQVFBLEdBQW1CLElBRW5DQyxFQUFXLEdBRFAvekIsRUFBU2lYLEdBQWU2YyxFQUFrQjcvQixLQUFLbThCLHVCQUdsRCxHVHRuQ0QsV1NzbkNLMEQsRUFBaUJwUixVQUFtQyxDQUN6RCxJQUFJMWlCLEdBQ0orekIsRUFBVyxHQURQL3pCLEVBQVNpWCxHQUFlNmMsRUFBaUI3ekIsWUFBYWhNLEtBQUttOEIsbUJBRXREak8sT0FBT2x1QixLQUFLNjdCLGNBQWV6bEIsR0FBVXJLLFFBRTdDLENBQ0QsSUFBSTRXLEVBQWlCQyxLQUVqQmtkLEVBREFuZCxFQUNzRWtkLEVBQ2pFMVMsUUFDQWhhLFVBQVV3UCxFQUFnQjNpQixLQUFLbThCLGlCQUd6QjBELEVBR25CNy9CLEtBQUsrL0IsWUFBWUQsRUFBVXZ3QixJQU8vQnFvQixFQUFLeDNCLFVBQVU0L0IseUJBQTJCLFNBQVVGLEdBVWhELElBVEEsSUFBSXBwQixFQUFXMVcsS0FBSzY3QixjQUNoQnpSLEVBQVdyaEIsS0FBSzhLLElBQUk2QyxHQUNwQjJULEVBQVd0aEIsS0FBSzZLLEtBQUs4QyxHQUNyQnVwQixFQUFTSCxFQUFTbFEscUJBQ2xCbmEsRUFBU3FxQixFQUFTN1AsWUFDbEJpUSxFQUFVLElBQ1ZDLEVBQVUsSUFDVkMsR0FBVSxJQUNWQyxHQUFVLElBQ0xsL0IsRUFBSSxFQUFHZ0IsRUFBSzg5QixFQUFPLytCLE9BQVFDLEVBQUlnQixFQUFJaEIsR0FBS3NVLEVBQVEsQ0FDckQsSUFBSWlpQixFQUFPdUksRUFBTzkrQixHQUFLaXBCLEVBQVc2VixFQUFPOStCLEVBQUksR0FBS2twQixFQUM5Q3NOLEVBQU9zSSxFQUFPOStCLEdBQUtrcEIsRUFBVzRWLEVBQU85K0IsRUFBSSxHQUFLaXBCLEVBQ2xEOFYsRUFBVW4zQixLQUFLRixJQUFJcTNCLEVBQVN4SSxHQUM1QnlJLEVBQVVwM0IsS0FBS0YsSUFBSXMzQixFQUFTeEksR0FDNUJ5SSxFQUFVcjNCLEtBQUtELElBQUlzM0IsRUFBUzFJLEdBQzVCMkksRUFBVXQzQixLQUFLRCxJQUFJdTNCLEVBQVMxSSxHQUVoQyxNQUFPLENBQUN1SSxFQUFTQyxFQUFTQyxFQUFTQyxJQU12Q3pJLEVBQUt4M0IsVUFBVTIvQixZQUFjLFNBQVVELEVBQVV2d0IsR0FDN0MsSUFBSWpGLEVBQVVpRixHQUFlLEdBQ3pCb0gsRUFBT3JNLEVBQVFxTSxLQUNkQSxJQUNEQSxFQUFPM1csS0FBSzYrQixnQ0FFaEIsSUFFSWgwQixFQUZBdXZCLE9BQThCbjFCLElBQXBCcUYsRUFBUTh2QixRQUF3Qjl2QixFQUFROHZCLFFBQVUsQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUN0RXNGLE9BQThCejZCLElBQXBCcUYsRUFBUW8xQixTQUF3QnAxQixFQUFRbzFCLFFBR2xENzBCLE9BRDBCNUYsSUFBMUJxRixFQUFRTyxjQUNRUCxFQUFRTyxtQkFFQzVGLElBQXBCcUYsRUFBUVMsUUFDRy9LLEtBQUs0OEIscUJBQXFCdHlCLEVBQVFTLFNBR2xDLEVBRXBCLElBQUl1MUIsRUFBZ0J0Z0MsS0FBS2dnQyx5QkFBeUJGLEdBRTlDenlCLEVBQWFyTixLQUFLbS9CLCtCQUErQm1CLEVBQWUsQ0FDaEUzcEIsRUFBSyxHQUFLeWpCLEVBQVEsR0FBS0EsRUFBUSxHQUMvQnpqQixFQUFLLEdBQUt5akIsRUFBUSxHQUFLQSxFQUFRLEtBRW5DL3NCLEVBQWEyZ0IsTUFBTTNnQixHQUNieEMsRUFDQTlCLEtBQUtELElBQUl1RSxFQUFZeEMsR0FDM0J3QyxFQUFhck4sS0FBS3MvQix5QkFBeUJqeUIsRUFBWXF5QixFQUFVLEVBQUksR0FFckUsSUFBSWhwQixFQUFXMVcsS0FBSzY3QixjQUNoQnhSLEVBQVd0aEIsS0FBSzZLLElBQUk4QyxHQUNwQjBULEVBQVdyaEIsS0FBSzhLLElBQUk2QyxHQUNwQjZwQixFQUFZbnFCLEdBQVVrcUIsR0FDMUJDLEVBQVUsS0FBUW5HLEVBQVEsR0FBS0EsRUFBUSxJQUFNLEVBQUsvc0IsRUFDbERrekIsRUFBVSxLQUFRbkcsRUFBUSxHQUFLQSxFQUFRLElBQU0sRUFBSy9zQixFQUNsRCxJQUFJbXpCLEVBQVVELEVBQVUsR0FBS25XLEVBQVdtVyxFQUFVLEdBQUtsVyxFQUNuRG9XLEVBQVVGLEVBQVUsR0FBS25XLEVBQVdtVyxFQUFVLEdBQUtsVyxFQUNuRDVULEVBQVN6VyxLQUFLMGdDLHFCQUFxQixDQUFDRixFQUFTQyxHQUFVcHpCLEdBQ3ZEdUQsRUFBV3RHLEVBQVFzRyxTQUFXdEcsRUFBUXNHLFNBQVc5TyxPQUM1Qm1ELElBQXJCcUYsRUFBUW95QixTQUNSMThCLEtBQUtvOEIsZ0JBQWdCLENBQ2pCL3VCLFdBQVlBLEVBQ1pvSixPQUFRQSxFQUNSaW1CLFNBQVVweUIsRUFBUW95QixTQUNsQkMsT0FBUXJ5QixFQUFRcXlCLFFBQ2pCL3JCLElBR0g1USxLQUFLbTRCLGtCQUFvQjlxQixFQUN6QnJOLEtBQUtrNEIsY0FBZ0J6aEIsRUFDckJ6VyxLQUFLMjlCLG1CQUFrQixHQUFPLEdBQzlCN0csR0FBa0JsbUIsR0FBVSxLQVVwQ2duQixFQUFLeDNCLFVBQVV1Z0MsU0FBVyxTQUFVNXZCLEVBQVk0RixFQUFNOEMsR0FDbER6WixLQUFLNGdDLGlCQUFpQjlkLEdBQW1CL1IsRUFBWS9RLEtBQUttOEIsaUJBQWtCeGxCLEVBQU04QyxJQU90Rm1lLEVBQUt4M0IsVUFBVXdnQyxpQkFBbUIsU0FBVTd2QixFQUFZNEYsRUFBTThDLEdBQzFEelosS0FBS2c3QixrQkFBa0J2RCxHQUFrQjFtQixFQUFZNEYsRUFBTThDLEVBQVV6WixLQUFLNmtCLGdCQUFpQjdrQixLQUFLNjdCLGlCQVVwR2pFLEVBQUt4M0IsVUFBVXlnQyxxQkFBdUIsU0FBVXBxQixFQUFRcEosRUFBWXFKLEVBQVVDLEdBQzFFLElBQUltcUIsRUFDQTFHLEVBQVVwNkIsS0FBS202QixTQUNuQixHQUFJQyxHQUFXM2pCLEVBQVEsQ0FDbkIsSUFBSWdwQixFQUFjei9CLEtBQUs2K0IsOEJBQThCbm9CLEdBQ2pEcXFCLEVBQWdCdEosR0FBa0JoaEIsRUFBUUUsRUFBTSxDQUFDOG9CLEVBQVksR0FBSyxFQUFJckYsRUFBUSxHQUFJcUYsRUFBWSxHQUFLLEVBQUlyRixFQUFRLElBQUsvc0IsRUFBWXFKLEdBQ3BJb3FCLEVBQWMsQ0FDVnJxQixFQUFPLEdBQUtzcUIsRUFBYyxHQUMxQnRxQixFQUFPLEdBQUtzcUIsRUFBYyxJQUdsQyxPQUFPRCxHQUtYbEosRUFBS3gzQixVQUFVMjdCLE1BQVEsV0FDbkIsUUFBUy83QixLQUFLNDdCLDBCQUFnRDMyQixJQUF6QmpGLEtBQUs2a0IsaUJBTzlDK1MsRUFBS3gzQixVQUFVNGdDLGFBQWUsU0FBVUMsR0FDcEMsSUFBSXhxQixFQUFTb00sR0FBaUI3aUIsS0FBS2s0QixjQUFlbDRCLEtBQUttOEIsaUJBQ3ZEbjhCLEtBQUtraEMsVUFBVSxDQUNYenFCLEVBQU8sR0FBS3dxQixFQUFpQixHQUM3QnhxQixFQUFPLEdBQUt3cUIsRUFBaUIsTUFPckNySixFQUFLeDNCLFVBQVUrZ0MscUJBQXVCLFNBQVVGLEdBQzVDLElBQUl4cUIsRUFBU3pXLEtBQUtrNEIsY0FDbEJsNEIsS0FBS2c3QixrQkFBa0IsQ0FDbkJ2a0IsRUFBTyxHQUFLd3FCLEVBQWlCLEdBQzdCeHFCLEVBQU8sR0FBS3dxQixFQUFpQixNQVVyQ3JKLEVBQUt4M0IsVUFBVWdoQyxpQkFBbUIsU0FBVXJXLEVBQU91RCxHQUMvQyxJQUFJSCxFQUFTRyxHQUFjeEwsR0FBbUJ3TCxFQUFZdHVCLEtBQUttOEIsaUJBQy9EbjhCLEtBQUtxaEMseUJBQXlCdFcsRUFBT29ELElBUXpDeUosRUFBS3gzQixVQUFVaWhDLHlCQUEyQixTQUFVdFcsRUFBT3VELEdBQ3ZELElBQUlnVCxFQUFXdGhDLEtBQUtnOEIsZ0JBQWtCaDhCLEtBQUtnOUIsaUJBQ3ZDcm1CLEVBQU8zVyxLQUFLdzlCLGlCQUFpQng5QixLQUFLNjdCLGVBQ2xDMEYsRUFBZ0J2aEMsS0FBSzg2QixhQUFhenRCLFdBQVdyTixLQUFLbTRCLGtCQUFvQnBOLEVBQU8sRUFBR3BVLEVBQU0ycUIsR0FDdEZoVCxJQUNBdHVCLEtBQUtrNEIsY0FBZ0JsNEIsS0FBSzA5QixvQkFBb0I2RCxFQUFlalQsSUFFakV0dUIsS0FBS200QixtQkFBcUJwTixFQUMxQi9xQixLQUFLMjlCLHFCQVNUL0YsRUFBS3gzQixVQUFVb2hDLFdBQWEsU0FBVTNFLEVBQU92TyxHQUN6Q3R1QixLQUFLb2hDLGlCQUFpQnI0QixLQUFLaWpCLElBQUloc0IsS0FBS2k2QixhQUFjNEMsR0FBUXZPLElBUzlEc0osRUFBS3gzQixVQUFVcWhDLGVBQWlCLFNBQVU1RSxFQUFPdk8sR0FDekNBLElBQ0FBLEVBQWF4TCxHQUFtQndMLEVBQVl0dUIsS0FBS204QixrQkFFckRuOEIsS0FBSzBoQyx1QkFBdUI3RSxFQUFPdk8sSUFNdkNzSixFQUFLeDNCLFVBQVVzaEMsdUJBQXlCLFNBQVU3RSxFQUFPdk8sR0FDckQsSUFBSWdULEVBQVd0aEMsS0FBS2c4QixnQkFBa0JoOEIsS0FBS2c5QixpQkFDdkMyRSxFQUFjM2hDLEtBQUs4NkIsYUFBYXBrQixTQUFTMVcsS0FBS280QixnQkFBa0J5RSxFQUFPeUUsR0FDdkVoVCxJQUNBdHVCLEtBQUtrNEIsY0FBZ0JsNEIsS0FBSzY5QixzQkFBc0I4RCxFQUFhclQsSUFFakV0dUIsS0FBS280QixpQkFBbUJ5RSxFQUN4Qjc4QixLQUFLMjlCLHFCQVFUL0YsRUFBS3gzQixVQUFVOGdDLFVBQVksU0FBVXpxQixHQUNqQ3pXLEtBQUtnN0Isa0JBQWtCbFksR0FBbUJyTSxFQUFRelcsS0FBS204QixtQkFNM0R2RSxFQUFLeDNCLFVBQVU0NkIsa0JBQW9CLFNBQVV2a0IsR0FDekN6VyxLQUFLazRCLGNBQWdCemhCLEVBQ3JCelcsS0FBSzI5QixxQkFPVC9GLEVBQUt4M0IsVUFBVTA4QixRQUFVLFNBQVU4RSxFQUFNL0UsR0FHckMsT0FGQTc4QixLQUFLNjNCLE9BQU8rSixJQUFTL0UsRUFDckI3OEIsS0FBS3dHLFVBQ0V4RyxLQUFLNjNCLE9BQU8rSixJQVF2QmhLLEVBQUt4M0IsVUFBVTY2QixjQUFnQixTQUFVNXRCLEdBQ3JDck4sS0FBS200QixrQkFBb0I5cUIsRUFDekJyTixLQUFLMjlCLHFCQVFUL0YsRUFBS3gzQixVQUFVMjZCLFlBQWMsU0FBVXJrQixHQUNuQzFXLEtBQUtvNEIsZ0JBQWtCMWhCLEVBQ3ZCMVcsS0FBSzI5QixxQkFPVC9GLEVBQUt4M0IsVUFBVTg2QixRQUFVLFNBQVU1dEIsR0FDL0J0TixLQUFLaTdCLGNBQWNqN0IsS0FBSzQ4QixxQkFBcUJ0dkIsS0FVakRzcUIsRUFBS3gzQixVQUFVdTlCLGtCQUFvQixTQUFVa0UsRUFBc0JDLEdBQy9ELElBQUlSLEVBQVd0aEMsS0FBS2c4QixnQkFBa0JoOEIsS0FBS2c5QixrQkFBb0I4RSxFQUUzREgsRUFBYzNoQyxLQUFLODZCLGFBQWFwa0IsU0FBUzFXLEtBQUtvNEIsZ0JBQWlCa0osR0FDL0QzcUIsRUFBTzNXLEtBQUt3OUIsaUJBQWlCbUUsR0FDN0JKLEVBQWdCdmhDLEtBQUs4NkIsYUFBYXp0QixXQUFXck4sS0FBS200QixrQkFBbUIsRUFBR3hoQixFQUFNMnFCLEdBQzlFUyxFQUFZL2hDLEtBQUs4NkIsYUFBYXJrQixPQUFPelcsS0FBS2s0QixjQUFlcUosRUFBZTVxQixFQUFNMnFCLEVBQVV0aEMsS0FBSzZnQyxxQkFBcUI3Z0MsS0FBS2s0QixjQUFlcUosRUFBZUksRUFBYWhyQixJQUNsSzNXLEtBQUt5SCxJQUFJNjJCLE1BQTJCcUQsR0FDcEMzaEMsS0FBS2tJLElBQUlvMkIsR0FBdUJxRCxHQUVoQzNoQyxLQUFLeUgsSUFBSTYyQixNQUE2QmlELEdBQ3RDdmhDLEtBQUtrSSxJQUFJbzJCLEdBQXlCaUQsR0FFakN2aEMsS0FBS3lILElBQUk2MkIsS0FDVCxHQUFPdCtCLEtBQUt5SCxJQUFJNjJCLElBQXNCeUQsSUFDdkMvaEMsS0FBS2tJLElBQUlvMkIsR0FBcUJ5RCxHQUU5Qi9oQyxLQUFLZzhCLGlCQUFtQjZGLEdBQ3hCN2hDLEtBQUtpOUIsbUJBRVRqOUIsS0FBS3E0QixtQkFBZ0JwekIsR0FXekIyeUIsRUFBS3gzQixVQUFVNjdCLG1CQUFxQixTQUFVK0YsRUFBY0MsRUFBeUIzVCxHQUNqRixJQUFJb08sT0FBNEJ6M0IsSUFBakIrOEIsRUFBNkJBLEVBQWUsSUFDdkRoaEMsRUFBWWloQyxHQUEyQixFQUN2Q04sRUFBYzNoQyxLQUFLODZCLGFBQWFwa0IsU0FBUzFXLEtBQUtvNEIsaUJBQzlDemhCLEVBQU8zVyxLQUFLdzlCLGlCQUFpQm1FLEdBQzdCSixFQUFnQnZoQyxLQUFLODZCLGFBQWF6dEIsV0FBV3JOLEtBQUttNEIsa0JBQW1CbjNCLEVBQVcyVixHQUNoRm9yQixFQUFZL2hDLEtBQUs4NkIsYUFBYXJrQixPQUFPelcsS0FBS2s0QixjQUFlcUosRUFBZTVxQixHQUFNLEVBQU8zVyxLQUFLNmdDLHFCQUFxQjdnQyxLQUFLazRCLGNBQWVxSixFQUFlSSxFQUFhaHJCLElBQ25LLEdBQWlCLElBQWIrbEIsSUFBbUIxOEIsS0FBS3E0QixjQUt4QixPQUpBcjRCLEtBQUttNEIsa0JBQW9Cb0osRUFDekJ2aEMsS0FBS280QixnQkFBa0J1SixFQUN2QjNoQyxLQUFLazRCLGNBQWdCNkosT0FDckIvaEMsS0FBSzI5QixvQkFHVCxJQUFJeFAsRUFBU0csSUFBNEIsSUFBYm9PLEVBQWlCMThCLEtBQUtxNEIsbUJBQWdCcHpCLEdBQ2xFakYsS0FBS3E0QixtQkFBZ0JwekIsRUFDakJqRixLQUFLNmtCLGtCQUFvQjBjLEdBQ3pCdmhDLEtBQUs2N0IsZ0JBQWtCOEYsR0FDdEIzaEMsS0FBSzQ3QixxQkFDTCxHQUFPNTdCLEtBQUs0N0Isb0JBQXFCbUcsS0FDOUIvaEMsS0FBS2c4QixnQkFDTGg4QixLQUFLaTlCLG1CQUVUajlCLEtBQUtvOEIsZ0JBQWdCLENBQ2pCMWxCLFNBQVVpckIsRUFDVmxyQixPQUFRc3JCLEVBQ1IxMEIsV0FBWWswQixFQUNaN0UsU0FBVUEsRUFDVkMsT0FBUTFRLEdBQ1JrQyxPQUFRQSxNQVVwQnlKLEVBQUt4M0IsVUFBVThoQyxpQkFBbUIsV0FDOUJsaUMsS0FBS2k4QixtQkFBbUIsR0FDeEJqOEIsS0FBSzg4QixRRS8rQ0ksRUYrK0MwQixJQVV2Q2xGLEVBQUt4M0IsVUFBVStoQyxlQUFpQixTQUFVSCxFQUFjQyxFQUF5QjNULEdBQzdFLElBQUlILEVBQVNHLEdBQWN4TCxHQUFtQndMLEVBQVl0dUIsS0FBS204QixpQkFDL0RuOEIsS0FBS29pQyx1QkFBdUJKLEVBQWNDLEVBQXlCOVQsSUFTdkV5SixFQUFLeDNCLFVBQVVnaUMsdUJBQXlCLFNBQVVKLEVBQWNDLEVBQXlCM1QsR0FDckZ0dUIsS0FBSzg4QixRRXJnREksR0ZxZ0QyQixHQUNwQzk4QixLQUFLaThCLG1CQUFtQitGLEVBQWNDLEVBQXlCM1QsSUFTbkVzSixFQUFLeDNCLFVBQVVzZ0MscUJBQXVCLFNBQVV0SixFQUFjaUwsR0FDMUQsSUFBSTFyQixFQUFPM1csS0FBS3c5QixpQkFBaUJ4OUIsS0FBSzY3QixlQUN0QyxPQUFPNzdCLEtBQUs4NkIsYUFBYXJrQixPQUFPMmdCLEVBQWNpTCxHQUF3QnJpQyxLQUFLNmtCLGdCQUFpQmxPLElBV2hHaWhCLEVBQUt4M0IsVUFBVWtpQyxtQkFBcUIsU0FBVUMsRUFBWUMsR0FDdEQsSUFBSUMsRUFBWXppQyxLQUFLNDhCLHFCQUFxQjJGLEdBQzFDLE9BQU92aUMsS0FBSzgrQixxQkFBcUI5K0IsS0FBS3MvQix5QkFBeUJtRCxFQUFXRCxLQVc5RTVLLEVBQUt4M0IsVUFBVWsvQix5QkFBMkIsU0FBVWhJLEVBQWtCa0wsR0FDbEUsSUFBSXhoQyxFQUFZd2hDLEdBQWlCLEVBQzdCN3JCLEVBQU8zVyxLQUFLdzlCLGlCQUFpQng5QixLQUFLNjdCLGVBQ3RDLE9BQU83N0IsS0FBSzg2QixhQUFhenRCLFdBQVdpcUIsRUFBa0J0MkIsRUFBVzJWLElBRTlEaWhCLEVBNXhDYyxDQTZ4Q3ZCLEdHejlDRixTQUFTdE8sR0FBT29aLEVBQUtDLEVBQWFDLEdBRTlCLE9BQU9ELEVBQWMsSUFBTUQsRUFBTSxLQURmRSxFQzlEZixTQUFrQkEsR0FDckIsTUFBcUIsaUJBQVZBLEVBQ0FBLEVBZ0tSLFNBQWtCQSxHQUNyQixJQUFJejRCLEVBQUl5NEIsRUFBTSxHQUNWejRCLElBQVUsRUFBSkEsS0FDTkEsRUFBS0EsRUFBSSxHQUFPLEdBRXBCLElBQUkwNEIsRUFBSUQsRUFBTSxHQUNWQyxJQUFVLEVBQUpBLEtBQ05BLEVBQUtBLEVBQUksR0FBTyxHQUVwQixJQUFJaGlDLEVBQUkraEMsRUFBTSxHQUtkLE9BSkkvaEMsSUFBVSxFQUFKQSxLQUNOQSxFQUFLQSxFQUFJLEdBQU8sR0FHYixRQUFVc0osRUFBSSxJQUFNMDRCLEVBQUksSUFBTWhpQyxFQUFJLFVBRHBCb0UsSUFBYjI5QixFQUFNLEdBQW1CLEVBQUlBLEVBQU0sSUFDUSxJQTNLeEMsQ0FBU0EsR0R5RE1FLENBQVNGLEdBQVMsUUFTekMsSUFBSUcsR0FBUyxJQWhHZ0IsV0FDaEMsU0FBU0MsSUFLTGhqQyxLQUFLaWpDLE9BQVMsR0FLZGpqQyxLQUFLa2pDLFdBQWEsRUFLbEJsakMsS0FBS21qQyxjQUFnQixHQThEekIsT0F6REFILEVBQWU1aUMsVUFBVW9DLE1BQVEsV0FDN0J4QyxLQUFLaWpDLE9BQVMsR0FDZGpqQyxLQUFLa2pDLFdBQWEsR0FLdEJGLEVBQWU1aUMsVUFBVTZvQixlQUFpQixXQUN0QyxPQUFPanBCLEtBQUtrakMsV0FBYWxqQyxLQUFLbWpDLGVBS2xDSCxFQUFlNWlDLFVBQVVnakMsT0FBUyxXQUM5QixHQUFJcGpDLEtBQUtpcEIsaUJBQWtCLENBQ3ZCLElBQUk5bkIsRUFBSSxFQUNSLElBQUssSUFBSW1CLEtBQU90QyxLQUFLaWpDLE9BQVEsQ0FDekIsSUFBSUksRUFBWXJqQyxLQUFLaWpDLE9BQU8zZ0MsR0FDVixJQUFQLEVBQU5uQixNQUFtQmtpQyxFQUFVbitCLHVCQUN2QmxGLEtBQUtpakMsT0FBTzNnQyxLQUNqQnRDLEtBQUtrakMsZUFXdkJGLEVBQWU1aUMsVUFBVXFILElBQU0sU0FBVWk3QixFQUFLQyxFQUFhQyxHQUN2RCxJQUFJdGdDLEVBQU1nbkIsR0FBT29aLEVBQUtDLEVBQWFDLEdBQ25DLE9BQU90Z0MsS0FBT3RDLEtBQUtpakMsT0FBU2pqQyxLQUFLaWpDLE9BQU8zZ0MsR0FBTyxNQVFuRDBnQyxFQUFlNWlDLFVBQVU4SCxJQUFNLFNBQVV3NkIsRUFBS0MsRUFBYUMsRUFBT1MsR0FDOUQsSUFBSS9nQyxFQUFNZ25CLEdBQU9vWixFQUFLQyxFQUFhQyxHQUNuQzVpQyxLQUFLaWpDLE9BQU8zZ0MsR0FBTytnQyxJQUNqQnJqQyxLQUFLa2pDLFlBU1hGLEVBQWU1aUMsVUFBVWtqQyxRQUFVLFNBQVVDLEdBQ3pDdmpDLEtBQUttakMsY0FBZ0JJLEVBQ3JCdmpDLEtBQUtvakMsVUFFRkosRUE5RXdCLElFUi9CLEdBQXdDLFdBQ3hDLElBQUlyZ0MsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQWlONUMsU0FBU2tnQyxHQUFnQjExQixFQUFLYSxHQUMxQixZQUVKLFNBOUtpQyxTQUFVbEwsR0FLdkMsU0FBU2dnQyxFQUFZMzFCLEdBQ2pCLElBQUlsSyxFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0FNakMsT0FEQTRELEVBQU04L0IsS0FBTzUxQixFQUNObEssRUF5SlgsT0FwS0EsR0FBVTYvQixFQUFhaGdDLEdBa0J2QmdnQyxFQUFZcmpDLFVBQVV1akMsb0JBQXNCLFNBQVU1akMsRUFBTTRPLEdBQ3hELEtBTUo4MEIsRUFBWXJqQyxVQUFVd2pDLG9CQUFzQixTQUFVajFCLEdBQ2xELElBQUl2QixFQUFZdUIsRUFBV3ZCLFVBQ3ZCOE0sRUFBNkJ2TCxFQUFXdUwsMkJBQ3hDaUIsRUFBNkJ4TSxFQUFXd00sMkJBQzVDL0gsR0FBaUI4RyxFQUE0QnZMLEVBQVdnSSxLQUFLLEdBQUssRUFBR2hJLEVBQVdnSSxLQUFLLEdBQUssRUFBRyxFQUFJdkosRUFBVUMsWUFBYSxFQUFJRCxFQUFVQyxZQUFhRCxFQUFVc0osVUFBV3RKLEVBQVVxSixPQUFPLElBQUtySixFQUFVcUosT0FBTyxJQUMvTTNDLEdBQVlxSCxFQUE0QmpCLElBaUI1Q3VwQixFQUFZcmpDLFVBQVUwUSwyQkFBNkIsU0FBVUMsRUFBWXBDLEVBQVlxQyxFQUFjNnlCLEVBQWNqekIsRUFBVWt6QixFQUFTQyxFQUFhQyxHQUM3SSxJQUFJeFksRUFDQXBlLEVBQVl1QixFQUFXdkIsVUFRM0IsU0FBUzBELEVBQTJCdEYsRUFBU3k0QixFQUFTMTRCLEVBQU91MEIsR0FDekQsT0FBT2x2QixFQUFTeE4sS0FBSzBnQyxFQUFTRyxFQUFTejRCLEVBQVVELEVBQVEsS0FBTXUwQixHQUVuRSxJQUFJcHZCLEVBQWF0RCxFQUFVc0QsV0FDdkJ3ekIsRTdCNlJMLFNBQWVuekIsRUFBWUwsR0FDOUIsR0FBSUEsRUFBVzhNLFdBQVksQ0FDdkIsSUFBSTJtQixFQUFhLEdBQVN6ekIsRUFBVzFFLGFBQ2pDbzRCLEVBYUwsU0FBdUJyekIsRUFBWUwsRUFBWTJ6QixHQUNsRCxJQUFJQyxFQUFtQjV6QixFQUFXMUUsWUFDOUJvNEIsRUFBYSxFQUNqQixHQUFJMXpCLEVBQVc4TSxhQUNWek0sRUFBVyxHQUFLdXpCLEVBQWlCLElBQU12ekIsRUFBVyxHQUFLdXpCLEVBQWlCLElBQUssQ0FDOUUsSUFBSUMsRUFBb0JGLEdBQXlCLEdBQVNDLEdBQzFERixFQUFhcjdCLEtBQUtrd0IsT0FBT2xvQixFQUFXLEdBQUt1ekIsRUFBaUIsSUFBTUMsR0FFcEUsT0FBT0gsRUFyQmMsQ0FBY3J6QixFQUFZTCxFQUFZeXpCLEdBQ25EQyxJQUNBcnpCLEVBQVcsSUFBTXF6QixFQUFhRCxHQUd0QyxPQUFPcHpCLEU2QnJTd0IsQ0FBTUEsRUFBV2tLLFFBQVN2SyxHQUNqRDh6QixFQUFVLENBQUMsQ0FBQyxFQUFHLElBQ25CLEdBQUk5ekIsRUFBVzhNLFlBQWNxbUIsRUFBYyxDQUN2QyxJQUNJTSxFQUFhLEdBRE16ekIsRUFBVzFFLGFBRWxDdzRCLEVBQVExaEMsS0FBSyxFQUFFcWhDLEVBQVksR0FBSSxDQUFDQSxFQUFZLElBTWhELElBSkEsSUFBSU0sRUFBYzkxQixFQUFXSyxpQkFDekIwMUIsRUFBWUQsRUFBWXZqQyxPQUN4QitQLEVBQTRDLEdBQzVDMHpCLEVBQVcsR0FDTnhqQyxFQUFJLEVBQUdBLEVBQUlxakMsRUFBUXRqQyxPQUFRQyxJQUNoQyxJQUFLLElBQUlrdUIsRUFBSXFWLEVBQVksRUFBR3JWLEdBQUssSUFBS0EsRUFBRyxDQUNyQyxJQUFJbGlCLEVBQWFzM0IsRUFBWXBWLEdBQ3pCOWpCLEVBQVE0QixFQUFXNUIsTUFDdkIsR0FBSUEsRUFBTTZELGVBQ05sQyxHQUFPQyxFQUFZQyxJQUNuQjIyQixFQUFZM2dDLEtBQUs0Z0MsRUFBVXo0QixHQUFRLENBQ25DLElBQUlxRCxFQUFnQnJELEVBQU1zRCxjQUN0QnhNLEVBQVNrSixFQUFNNkMsWUFDbkIsR0FBSVEsR0FBaUJ2TSxFQUFRLENBQ3pCLElBQUlnUyxFQUFjaFMsRUFBT3VpQyxXQUNuQlYsRUFDQW56QixFQUNGOHpCLEVBQWEvekIsRUFBMkJwTCxLQUFLLEtBQU15SCxFQUFXM0IsU0FDbEVtNUIsRUFBUyxHQUFLdHdCLEVBQVksR0FBS213QixFQUFRcmpDLEdBQUcsR0FDMUN3akMsRUFBUyxHQUFLdHdCLEVBQVksR0FBS213QixFQUFRcmpDLEdBQUcsR0FDMUNxcUIsRUFBUzVjLEVBQWNrQywyQkFBMkI2ekIsRUFBVWgyQixFQUFZcUMsRUFBYzZ6QixFQUFZNXpCLEdBRXRHLEdBQUl1YSxFQUNBLE9BQU9BLEdBS3ZCLEdBQXVCLElBQW5CdmEsRUFBUS9QLE9BQVosQ0FHQSxJQUFJNGpDLEVBQVEsRUFBSTd6QixFQUFRL1AsT0FNeEIsT0FMQStQLEVBQVEyUSxTQUFRLFNBQVVtakIsRUFBRzVqQyxHQUFLLE9BQVE0akMsRUFBRUMsWUFBYzdqQyxFQUFJMmpDLEtBQzlEN3pCLEVBQVFzVixNQUFLLFNBQVUzbEIsRUFBR0MsR0FBSyxPQUFPRCxFQUFFb2tDLFdBQWFua0MsRUFBRW1rQyxjQUN2RC96QixFQUFRaEMsTUFBSyxTQUFVODFCLEdBQ25CLE9BQVF2WixFQUFTdVosRUFBRW4wQixTQUFTbTBCLEVBQUVkLFFBQVNjLEVBQUV4NUIsTUFBT3c1QixFQUFFakYsYUFFL0N0VSxJQWdCWGlZLEVBQVlyakMsVUFBVTZrQyxvQkFBc0IsU0FBVXoyQixFQUFPRyxFQUFZcUMsRUFBY0osRUFBVW16QixHQUM3RixPQUFPLEtBZVhOLEVBQVlyakMsVUFBVThrQyx1QkFBeUIsU0FBVW4wQixFQUFZcEMsRUFBWXFDLEVBQWM2eUIsRUFBY0UsRUFBYUQsR0FFdEgsWUFBc0I3K0IsSUFETGpGLEtBQUs4USwyQkFBMkJDLEVBQVlwQyxFQUFZcUMsRUFBYzZ5QixFQUFjaGlDLEVBQU03QixLQUFNK2pDLEVBQWFELElBTWxJTCxFQUFZcmpDLFVBQVUra0MsT0FBUyxXQUMzQixPQUFPbmxDLEtBQUswakMsTUFPaEJELEVBQVlyakMsVUFBVTJPLFlBQWMsU0FBVUosR0FDMUMsS0FNSjgwQixFQUFZcmpDLFVBQVVnbEMsd0JBQTBCLFNBQVV6MkIsR0FDbEQscUJBQ0FBLEVBQVcwYSxvQkFBb0J2bUIsS0FBSzBnQyxLQUdyQ0MsRUFyS3FCLENBc0s5QixHQ3pMSyxJQUFJNEIsR0FBZSxZQTRCZkMsR0FBZ0IsYUMwRmhCQyxJRDdFSyxJQUFJQyxPQUFPLENBQ3ZCLHFEQUNBLDRDQUNBLDhEQUNBLGdEQUNBLDhFQUNBLGdFQUNBLG1DQUNGeGYsS0FBSyxJQUFLLEtDcUVjLElBQUksSUFTTixJQUFJLEdBQ2pCc2QsUUFBVSxXQUNqQm1DLFFBQVFDLEtBQUssOEJDcEpqQixJQUFJLEdBQXdDLFdBQ3hDLElBQUkvaUMsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQW1MNUMsU0FsSjBDLFNBQVVHLEdBS2hELFNBQVNraUMsRUFBcUI3M0IsR0FDMUIsSUFBSWxLLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNOE4sSUFBUTlOLEtBSXRDNEQsRUFBTWdpQyx1QkFBeUJyZ0MsRUFBT2dnQyxHQUFjeDlCLEVBQWdDK0YsRUFBSSszQixXQUFXbmdDLEtBQUtvSSxJQUt4R2xLLEVBQU1raUMsU0FBVzl0QixTQUFTQyxjQUFjLE9BQ3hDLElBQUlxQixFQUFRMVYsRUFBTWtpQyxTQUFTeHNCLE1BQzNCQSxFQUFNRyxTQUFXLFdBQ2pCSCxFQUFNcEIsTUFBUSxPQUNkb0IsRUFBTW5CLE9BQVMsT0FDZm1CLEVBQU01TyxPQUFTLElBQ2Y5RyxFQUFNa2lDLFNBQVM3NkIsVUFBWTg2Qiw0QkFDM0IsSUFBSWh0QixFQUFZakwsRUFBSWs0QixjQVlwQixPQVhBanRCLEVBQVVrdEIsYUFBYXJpQyxFQUFNa2lDLFNBQVUvc0IsRUFBVW10QixZQUFjLE1BSy9EdGlDLEVBQU11aUMsVUFBWSxHQUtsQnZpQyxFQUFNd2lDLGtCQUFtQixFQUNsQnhpQyxFQThHWCxPQS9JQSxHQUFVK2hDLEVBQXNCbGlDLEdBdUNoQ2tpQyxFQUFxQnZsQyxVQUFVdWpDLG9CQUFzQixTQUFVNWpDLEVBQU00TyxHQUNqRSxJQUFJYixFQUFNOU4sS0FBS21sQyxTQUNmLEdBQUlyM0IsRUFBSTVJLFlBQVluRixHQUFPLENBQ3ZCLElBQUkyYSxFQUFVLElBQUksR0FBWTNhLE9BQU1rRixFQUFXMEosR0FDL0NiLEVBQUl4SixjQUFjb1csS0FHMUJpckIsRUFBcUJ2bEMsVUFBVU0sZ0JBQWtCLFdBQzdDcUYsRUFBYy9GLEtBQUs0bEMsd0JBQ25CNWxDLEtBQUs4bEMsU0FBU3J0QixXQUFXSSxZQUFZN1ksS0FBSzhsQyxVQUMxQ3JpQyxFQUFPckQsVUFBVU0sZ0JBQWdCMEMsS0FBS3BELE9BTTFDMmxDLEVBQXFCdmxDLFVBQVUyTyxZQUFjLFNBQVVKLEdBQ25ELEdBQUtBLEVBQUwsQ0FPQTNPLEtBQUs0akMsb0JBQW9CajFCLEdBQ3pCM08sS0FBSzJqQyxvQkFBb0IsR0FBNEJoMUIsR0FDckQsSUFBSUssRUFBbUJMLEVBQVdLLGlCQUFpQnVYLE1BQUssU0FBVTNsQixFQUFHQyxHQUNqRSxPQUFPRCxFQUFFOEosT0FBUzdKLEVBQUU2SixVQUVwQjBDLEVBQVl1QixFQUFXdkIsVUFDM0JwTixLQUFLbW1DLFVBQVVqbEMsT0FBUyxFQU14QixJQUZBLElBQUltbEMsRUFBa0IsR0FDbEJDLEVBQWtCLEtBQ2JubEMsRUFBSSxFQUFHZ0IsRUFBSzZNLEVBQWlCOU4sT0FBUUMsRUFBSWdCLElBQU1oQixFQUFHLENBQ3ZELElBQUlnTSxFQUFhNkIsRUFBaUI3TixHQUVsQyxHQURBd04sRUFBV3lWLFdBQWFqakIsRUFDbkIrTCxHQUFPQyxFQUFZQyxLQUNuQkQsRUFBV3ZCLGFBQWUsSUFDdkJ1QixFQUFXdkIsYUFBZSxJQUZsQyxDQUtBLElBQUlMLEVBQVE0QixFQUFXNUIsTUFDbkJnN0IsRUFBVWg3QixFQUFNc0MsT0FBT2MsRUFBWTIzQixHQUNsQ0MsSUFHREEsSUFBWUQsSUFDWnRtQyxLQUFLbW1DLFVBQVVyakMsS0FBS3lqQyxHQUNwQkQsRUFBa0JDLEdBRWxCLGlCQUFrQmg3QixHQUNsQjg2QixFQUFnQnZqQyxLQUN3QyxLQUdoRSxJQUFTM0IsRUFBSWtsQyxFQUFnQm5sQyxPQUFTLEVBQUdDLEdBQUssSUFBS0EsRUFDL0NrbEMsRUFBZ0JsbEMsR0FBR3FsQyxnQkFBZ0I3M0IsSS9DN0N4QyxTQUF5QmlLLEVBQU02dEIsR0FFbEMsSUFEQSxJQUFJQyxFQUFjOXRCLEVBQUsrdEIsV0FDZHhsQyxFQUFJLEtBQVdBLEVBQUcsQ0FDdkIsSUFBSXlsQyxFQUFXRixFQUFZdmxDLEdBQ3ZCMGxDLEVBQVdKLEVBQVN0bEMsR0FFeEIsSUFBS3lsQyxJQUFhQyxFQUNkLE1BR0FELElBQWFDLElBSVpELEVBS0FDLEVBTUxqdUIsRUFBS3F0QixhQUFhWSxFQUFVRCxJQUx4Qmh1QixFQUFLQyxZQUFZK3RCLEtBQ2Z6bEMsR0FORnlYLEVBQUtjLFlBQVltdEIsSytDZ0NyQkMsQ0FBZ0I5bUMsS0FBSzhsQyxTQUFVOWxDLEtBQUttbUMsV0FDcENubUMsS0FBSzJqQyxvQjVEdkdJLGM0RHVHNkNoMUIsR0FDakQzTyxLQUFLb21DLG1CQUNOcG1DLEtBQUs4bEMsU0FBU3hzQixNQUFNeXRCLFFBQVUsR0FDOUIvbUMsS0FBS29tQyxrQkFBbUIsR0FFNUJwbUMsS0FBS29sQyx3QkFBd0J6MkIsUUFqRHJCM08sS0FBS29tQyxtQkFDTHBtQyxLQUFLOGxDLFNBQVN4c0IsTUFBTXl0QixRQUFVLE9BQzlCL21DLEtBQUtvbUMsa0JBQW1CLElBOERwQ1QsRUFBcUJ2bEMsVUFBVTZrQyxvQkFBc0IsU0FBVXoyQixFQUFPRyxFQUFZcUMsRUFBY0osRUFBVW16QixHQUl0RyxJQUhBLElBQUkzMkIsRUFBWXVCLEVBQVd2QixVQUN2QnEzQixFQUFjOTFCLEVBQVdLLGlCQUVwQjdOLEVBRE9zakMsRUFBWXZqQyxPQUNILEVBQUdDLEdBQUssSUFBS0EsRUFBRyxDQUNyQyxJQUFJZ00sRUFBYXMzQixFQUFZdGpDLEdBQ3pCb0ssRUFBUTRCLEVBQVc1QixNQUN2QixHQUFJQSxFQUFNNkQsZUFDTmxDLEdBQU9DLEVBQVlDLElBQ25CMjJCLEVBQVl4NEIsR0FBUSxDQUNwQixJQUNJbEssRUFEZ0JrSyxFQUFNc0QsY0FDRHFDLGVBQWUxQyxFQUFPRyxFQUFZcUMsR0FDM0QsR0FBSTNQLEVBQU0sQ0FDTixJQUFJbXFCLEVBQVM1YSxFQUFTckYsRUFBT2xLLEdBQzdCLEdBQUltcUIsRUFDQSxPQUFPQSxNQU9wQm1hLEVBaEo4QixDQWlKdkNxQixJQzVLRixHQU1TLE1BTlQsR0FZWSxTQ2xCWixJQUFJLEdBQXdDLFdBQ3hDLElBQUlya0MsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTBCeEMsR0FDUSxTQU9SMmpDLEdBQWlDLFNBQVV4akMsR0FPM0MsU0FBU3dqQyxFQUFnQmxuQyxFQUFNbW5DLEVBQWFDLEdBQ3hDLElBQUl2akMsRUFBUUgsRUFBT0wsS0FBS3BELEtBQU1ELElBQVNDLEtBYXZDLE9BUEE0RCxFQUFNMmlDLFFBQVVXLEVBTWhCdGpDLEVBQU15QixNQUFROGhDLEVBQ1B2akMsRUFFWCxPQXRCQSxHQUFVcWpDLEVBQWlCeGpDLEdBc0JwQndqQyxFQXZCeUIsQ0F3QmxDeGlDLEdBaVBGLFNBck5nQyxTQUFVaEIsR0FNdEMsU0FBUzJqQyxFQUFXOTZCLEVBQVdpRCxHQUMzQixJQUFJM0wsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBSWpDNEQsRUFBTXFDLEdBSU5yQyxFQUFNdUMsS0FJTnZDLEVBQU15QyxHQUNOLElBQUlpRSxFQUFVaUYsR0FBZSxHQVc3QixHQU5BM0wsRUFBTXlqQyxVQUFZLzhCLEVBQVFnOUIsT0FLMUIxakMsRUFBTTJqQyxPQUFTajdCLEdBQXdCLEdBQ25DMUksRUFBTXlqQyxRQUNOLElBQUssSUFBSWxtQyxFQUFJLEVBQUdnQixFQUFLeUIsRUFBTTJqQyxPQUFPcm1DLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFDaER5QyxFQUFNNGpDLGNBQWM1akMsRUFBTTJqQyxPQUFPcG1DLEdBQUlBLEdBSTdDLE9BREF5QyxFQUFNNmpDLGdCQUNDN2pDLEVBOEtYLE9BbE5BLEdBQVV3akMsRUFBWTNqQyxHQTBDdEIyakMsRUFBV2huQyxVQUFVb0MsTUFBUSxXQUN6QixLQUFPeEMsS0FBSzBuQyxZQUFjLEdBQ3RCMW5DLEtBQUtxeUIsT0FVYitVLEVBQVdobkMsVUFBVWdCLE9BQVMsU0FBVUwsR0FDcEMsSUFBSyxJQUFJSSxFQUFJLEVBQUdnQixFQUFLcEIsRUFBSUcsT0FBUUMsRUFBSWdCLElBQU1oQixFQUN2Q25CLEtBQUs4QyxLQUFLL0IsRUFBSUksSUFFbEIsT0FBT25CLE1BU1hvbkMsRUFBV2huQyxVQUFVd2hCLFFBQVUsU0FBVXpOLEdBRXJDLElBREEsSUFBSWpHLEVBQVFsTyxLQUFLdW5DLE9BQ1JwbUMsRUFBSSxFQUFHZ0IsRUFBSytMLEVBQU1oTixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQ3pDZ1QsRUFBRWpHLEVBQU0vTSxHQUFJQSxFQUFHK00sSUFXdkJrNUIsRUFBV2huQyxVQUFVdW5DLFNBQVcsV0FDNUIsT0FBTzNuQyxLQUFLdW5DLFFBUWhCSCxFQUFXaG5DLFVBQVV3bkMsS0FBTyxTQUFVdmlDLEdBQ2xDLE9BQU9yRixLQUFLdW5DLE9BQU9saUMsSUFRdkIraEMsRUFBV2huQyxVQUFVc25DLFVBQVksV0FDN0IsT0FBTzFuQyxLQUFLeUgsSUFBSSxLQVFwQjIvQixFQUFXaG5DLFVBQVV5bkMsU0FBVyxTQUFVeGlDLEVBQU95aUMsR0FDekM5bkMsS0FBS3FuQyxTQUNMcm5DLEtBQUt3bkMsY0FBY00sR0FFdkI5bkMsS0FBS3VuQyxPQUFPamlDLE9BQU9ELEVBQU8sRUFBR3lpQyxHQUM3QjluQyxLQUFLeW5DLGdCQUNMem5DLEtBQUtzRSxjQUFjLElBQUkyaUMsR0FBZ0JjLEdBQXlCRCxFQUFNemlDLEtBUTFFK2hDLEVBQVdobkMsVUFBVWl5QixJQUFNLFdBQ3ZCLE9BQU9yeUIsS0FBS2dvQyxTQUFTaG9DLEtBQUswbkMsWUFBYyxJQVE1Q04sRUFBV2huQyxVQUFVMEMsS0FBTyxTQUFVZ2xDLEdBQzlCOW5DLEtBQUtxbkMsU0FDTHJuQyxLQUFLd25DLGNBQWNNLEdBRXZCLElBQUk3bUMsRUFBSWpCLEtBQUswbkMsWUFFYixPQURBMW5DLEtBQUs2bkMsU0FBUzVtQyxFQUFHNm1DLEdBQ1Y5bkMsS0FBSzBuQyxhQVFoQk4sRUFBV2huQyxVQUFVNm5DLE9BQVMsU0FBVUgsR0FFcEMsSUFEQSxJQUFJL21DLEVBQU1mLEtBQUt1bkMsT0FDTnBtQyxFQUFJLEVBQUdnQixFQUFLcEIsRUFBSUcsT0FBUUMsRUFBSWdCLElBQU1oQixFQUN2QyxHQUFJSixFQUFJSSxLQUFPMm1DLEVBQ1gsT0FBTzluQyxLQUFLZ29DLFNBQVM3bUMsSUFZakNpbUMsRUFBV2huQyxVQUFVNG5DLFNBQVcsU0FBVTNpQyxHQUN0QyxJQUFJNmlDLEVBQU9sb0MsS0FBS3VuQyxPQUFPbGlDLEdBSXZCLE9BSEFyRixLQUFLdW5DLE9BQU9qaUMsT0FBT0QsRUFBTyxHQUMxQnJGLEtBQUt5bkMsZ0JBQ0x6bkMsS0FBS3NFLGNBQWMsSUFBSTJpQyxHQUFnQmMsR0FBNEJHLEVBQU03aUMsSUFDbEU2aUMsR0FRWGQsRUFBV2huQyxVQUFVK25DLE1BQVEsU0FBVTlpQyxFQUFPeWlDLEdBQzFDLElBQUk3bUMsRUFBSWpCLEtBQUswbkMsWUFDYixHQUFJcmlDLEVBQVFwRSxFQUFHLENBQ1BqQixLQUFLcW5DLFNBQ0xybkMsS0FBS3duQyxjQUFjTSxFQUFNemlDLEdBRTdCLElBQUk2aUMsRUFBT2xvQyxLQUFLdW5DLE9BQU9saUMsR0FDdkJyRixLQUFLdW5DLE9BQU9saUMsR0FBU3lpQyxFQUNyQjluQyxLQUFLc0UsY0FBYyxJQUFJMmlDLEdBQWdCYyxHQUE0QkcsRUFBTTdpQyxJQUN6RXJGLEtBQUtzRSxjQUFjLElBQUkyaUMsR0FBZ0JjLEdBQXlCRCxFQUFNemlDLFFBRXJFLENBQ0QsSUFBSyxJQUFJZ3FCLEVBQUlwdUIsRUFBR291QixFQUFJaHFCLElBQVNncUIsRUFDekJydkIsS0FBSzZuQyxTQUFTeFksT0FBR3BxQixHQUVyQmpGLEtBQUs2bkMsU0FBU3hpQyxFQUFPeWlDLEtBTTdCVixFQUFXaG5DLFVBQVVxbkMsY0FBZ0IsV0FDakN6bkMsS0FBS2tJLElBQUksR0FBaUJsSSxLQUFLdW5DLE9BQU9ybUMsU0FPMUNrbUMsRUFBV2huQyxVQUFVb25DLGNBQWdCLFNBQVVNLEVBQU1NLEdBQ2pELElBQUssSUFBSWpuQyxFQUFJLEVBQUdnQixFQUFLbkMsS0FBS3VuQyxPQUFPcm1DLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFDL0MsR0FBSW5CLEtBQUt1bkMsT0FBT3BtQyxLQUFPMm1DLEdBQVEzbUMsSUFBTWluQyxFQUNqQyxNQUFNLElBQUksRUFBZSxLQUk5QmhCLEVBbk5vQixDQW9ON0IsR0MxU0YsSUFBSSxHQUF3QyxXQUN4QyxJQUFJemtDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FzRHhDLEdBQ1EsU0FxTFosU0EzS2dDLFNBQVVHLEdBS3RDLFNBQVM0a0MsRUFBVzk0QixHQUNoQixJQUFJM0wsRUFBUTVELEtBQ1JzSyxFQUFVaUYsR0FBZSxHQUN6Qi9CLEVBQXNDLEVBQU8sR0FBSWxELFVBQzlDa0QsRUFBWTg2QixPQUNuQixJQUFJQSxFQUFTaCtCLEVBQVFnK0IsT0F5QnJCLE9BeEJBMWtDLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNd04sSUFBZ0J4TixNQUtwQ3VvQyxvQkFBc0IsR0FLNUIza0MsRUFBTTRrQyxjQUFnQixHQUN0QjVrQyxFQUFNb0Usa0JBQWtCLEdBQWlCcEUsRUFBTTZrQyxzQkFDM0NILEVBQ0kvbUMsTUFBTUMsUUFBUThtQyxHQUNkQSxFQUFTLElBQUksR0FBV0EsRUFBT3J0QixRQUFTLENBQUVxc0IsUUFBUSxJQUdsRCxFQUF1RCxtQkFBdkIsRUFBaUIsU0FBa0IsSUFJdkVnQixFQUFTLElBQUksUUFBV3JqQyxFQUFXLENBQUVxaUMsUUFBUSxJQUVqRDFqQyxFQUFNOGtDLFVBQVVKLEdBQ1Qxa0MsRUFzSVgsT0F4S0EsR0FBVXlrQyxFQUFZNWtDLEdBdUN0QjRrQyxFQUFXam9DLFVBQVV1b0MsbUJBQXFCLFdBQ3RDM29DLEtBQUt3RyxXQUtUNmhDLEVBQVdqb0MsVUFBVXFvQyxxQkFBdUIsV0FDeEN6b0MsS0FBS3VvQyxvQkFBb0IzbUIsUUFBUTdiLEdBQ2pDL0YsS0FBS3VvQyxvQkFBb0JybkMsT0FBUyxFQUNsQyxJQUFJb25DLEVBQVN0b0MsS0FBSzRvQyxZQUVsQixJQUFLLElBQUlDLEtBRFQ3b0MsS0FBS3VvQyxvQkFBb0J6bEMsS0FBS3lDLEVBQU8raUMsRUFBUVAsR0FBeUIvbkMsS0FBSzhvQyxpQkFBa0I5b0MsTUFBT3VGLEVBQU8raUMsRUFBUVAsR0FBNEIvbkMsS0FBSytvQyxvQkFBcUIvb0MsT0FDMUpBLEtBQUt3b0MsY0FDaEJ4b0MsS0FBS3dvQyxjQUFjSyxHQUFJam5CLFFBQVE3YixHQUVuQ3ZELEVBQU14QyxLQUFLd29DLGVBRVgsSUFEQSxJQUFJUSxFQUFjVixFQUFPWCxXQUNoQnhtQyxFQUFJLEVBQUdnQixFQUFLNm1DLEVBQVk5bkMsT0FBUUMsRUFBSWdCLEVBQUloQixJQUFLLENBQ2xELElBQUlvSyxFQUFReTlCLEVBQVk3bkMsR0FDeEJuQixLQUFLd29DLGNBQWN4aEMsRUFBT3VFLElBQVUsQ0FDaENoRyxFQUFPZ0csRUFBT3hELEVBQWdDL0gsS0FBSzJvQyxtQkFBb0Izb0MsTUFDdkV1RixFQUFPZ0csRUFBTzlFLEVBQWtCekcsS0FBSzJvQyxtQkFBb0Izb0MsT0FHakVBLEtBQUt3RyxXQU1UNmhDLEVBQVdqb0MsVUFBVTBvQyxpQkFBbUIsU0FBVUcsR0FDOUMsSUFBSTE5QixFQUFvRDA5QixFQUF1QixRQUMvRWpwQyxLQUFLd29DLGNBQWN4aEMsRUFBT3VFLElBQVUsQ0FDaENoRyxFQUFPZ0csRUFBT3hELEVBQWdDL0gsS0FBSzJvQyxtQkFBb0Izb0MsTUFDdkV1RixFQUFPZ0csRUFBTzlFLEVBQWtCekcsS0FBSzJvQyxtQkFBb0Izb0MsT0FFN0RBLEtBQUt3RyxXQU1UNmhDLEVBQVdqb0MsVUFBVTJvQyxvQkFBc0IsU0FBVUUsR0FDakQsSUFDSTNtQyxFQUFNMEUsRUFEOENpaUMsRUFBdUIsU0FFL0VqcEMsS0FBS3dvQyxjQUFjbG1DLEdBQUtzZixRQUFRN2IsVUFDekIvRixLQUFLd29DLGNBQWNsbUMsR0FDMUJ0QyxLQUFLd0csV0FVVDZoQyxFQUFXam9DLFVBQVV3b0MsVUFBWSxXQUM3QixPQUF3RjVvQyxLQUFLeUgsSUFBSSxLQVVyRzRnQyxFQUFXam9DLFVBQVVzb0MsVUFBWSxTQUFVSixHQUN2Q3RvQyxLQUFLa0ksSUFBSSxHQUFpQm9nQyxJQU05QkQsRUFBV2pvQyxVQUFVaU0sZUFBaUIsU0FBVUMsR0FDNUMsSUFBSTRCLE9BQXNCakosSUFBZHFILEVBQTBCQSxFQUFZLEdBSWxELE9BSEF0TSxLQUFLNG9DLFlBQVlobkIsU0FBUSxTQUFVclcsR0FDL0JBLEVBQU1jLGVBQWU2QixNQUVsQkEsR0FXWG02QixFQUFXam9DLFVBQVVtTSxvQkFBc0IsU0FBVUMsR0FDakQsSUFBSTJCLE9BQXdCbEosSUFBZnVILEVBQTJCQSxFQUFhLEdBQ2pEMDhCLEVBQU0vNkIsRUFBT2pOLE9BQ2pCbEIsS0FBSzRvQyxZQUFZaG5CLFNBQVEsU0FBVXJXLEdBQy9CQSxFQUFNZ0Isb0JBQW9CNEIsTUFFOUIsSUFBSWc3QixFQUFnQm5wQyxLQUFLb0wsZ0JBQ3JCZytCLEVBQWdCRCxFQUFjeitCLE9BQzdCOEIsUUFBdUN2SCxJQUF6QmtrQyxFQUFjeitCLFNBQzdCMCtCLEVBQWdCLEdBRXBCLElBQUssSUFBSWpvQyxFQUFJK25DLEVBQUsvbUMsRUFBS2dNLEVBQU9qTixPQUFRQyxFQUFJZ0IsRUFBSWhCLElBQUssQ0FDL0MsSUFBSWdNLEVBQWFnQixFQUFPaE4sR0FDeEJnTSxFQUFXM0MsU0FBVzIrQixFQUFjMytCLFFBQ3BDMkMsRUFBVzFDLFFBQVUwQyxFQUFXMUMsU0FBVzArQixFQUFjMStCLFFBQ3pEMEMsRUFBV3hDLGNBQWdCNUIsS0FBS0YsSUFBSXNFLEVBQVd4QyxjQUFldytCLEVBQWN4K0IsZUFDNUV3QyxFQUFXdEMsY0FBZ0I5QixLQUFLRCxJQUFJcUUsRUFBV3RDLGNBQWVzK0IsRUFBY3QrQixlQUM1RXNDLEVBQVdyQyxRQUFVL0IsS0FBS0QsSUFBSXFFLEVBQVdyQyxRQUFTcStCLEVBQWNyK0IsU0FDaEVxQyxFQUFXcEMsUUFBVWhDLEtBQUtGLElBQUlzRSxFQUFXcEMsUUFBU28rQixFQUFjcCtCLGNBQ25DOUYsSUFBekJra0MsRUFBY3A5QixjQUNZOUcsSUFBdEJrSSxFQUFXcEIsT0FDWG9CLEVBQVdwQixPQUFTdUwsR0FBZ0JuSyxFQUFXcEIsT0FBUW85QixFQUFjcDlCLFFBR3JFb0IsRUFBV3BCLE9BQVNvOUIsRUFBY3A5QixhQUdoQjlHLElBQXRCa0ksRUFBV3pDLFNBQ1h5QyxFQUFXekMsT0FBUzArQixHQUc1QixPQUFPajdCLEdBS1hrNkIsRUFBV2pvQyxVQUFVeUwsZUFBaUIsV0FDbEMsT0FBTyxJQUVKdzhCLEVBektvQixDQTBLN0JoNUIsSUMzT0YsSUFBSSxHQUF3QyxXQUN4QyxJQUFJMU0sRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQWlENUMsU0F6QjhCLFNBQVVHLEdBT3BDLFNBQVM0bEMsRUFBU3RwQyxFQUFNK04sRUFBSzhELEdBQ3pCLElBQUloTyxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTUQsSUFBU0MsS0FhdkMsT0FQQTRELEVBQU1rSyxJQUFNQSxFQU1abEssRUFBTStLLGdCQUFnQzFKLElBQW5CMk0sRUFBK0JBLEVBQWlCLEtBQzVEaE8sRUFFWCxPQXRCQSxHQUFVeWxDLEVBQVU1bEMsR0FzQmI0bEMsRUF2QmtCLENBd0IzQjVrQyxHQ2hERixJQUFJLEdBQXdDLFdBQ3hDLElBQUk5QixFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBNEg1QyxTQW5HcUMsU0FBVUcsR0FTM0MsU0FBUzZsQyxFQUFnQnZwQyxFQUFNK04sRUFBS3k3QixFQUFlQyxFQUFjNTNCLEdBQzdELElBQUloTyxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTUQsRUFBTStOLEVBQUs4RCxJQUFtQjVSLEtBMEI1RCxPQW5CQTRELEVBQU0ybEMsY0FBZ0JBLEVBS3RCM2xDLEVBQU02bEMsT0FBUyxLQUtmN2xDLEVBQU04bEMsWUFBYyxLQVFwQjlsQyxFQUFNK2xDLGNBQTRCMWtDLElBQWpCdWtDLEdBQTZCQSxFQUN2QzVsQyxFQTZEWCxPQWhHQSxHQUFVMGxDLEVBQWlCN2xDLEdBcUMzQjlELE9BQU9DLGVBQWUwcEMsRUFBZ0JscEMsVUFBVyxRQUFTLENBTXREcUgsSUFBSyxXQUlELE9BSEt6SCxLQUFLeXBDLFNBQ056cEMsS0FBS3lwQyxPQUFTenBDLEtBQUs4TixJQUFJODdCLGNBQWM1cEMsS0FBS3VwQyxnQkFFdkN2cEMsS0FBS3lwQyxRQUVoQnZoQyxJQUFLLFNBQVVzRyxHQUNYeE8sS0FBS3lwQyxPQUFTajdCLEdBRWxCK3NCLFlBQVksRUFDWkMsY0FBYyxJQUVsQjc3QixPQUFPQyxlQUFlMHBDLEVBQWdCbHBDLFVBQVcsYUFBYyxDQU8zRHFILElBQUssV0FJRCxPQUhLekgsS0FBSzBwQyxjQUNOMXBDLEtBQUswcEMsWUFBYzFwQyxLQUFLOE4sSUFBSSs3Qix1QkFBdUI3cEMsS0FBS3dPLFFBRXJEeE8sS0FBSzBwQyxhQUVoQnhoQyxJQUFLLFNBQVU2SSxHQUNYL1EsS0FBSzBwQyxZQUFjMzRCLEdBRXZCd3FCLFlBQVksRUFDWkMsY0FBYyxJQU9sQjhOLEVBQWdCbHBDLFVBQVVDLGVBQWlCLFdBQ3ZDb0QsRUFBT3JELFVBQVVDLGVBQWUrQyxLQUFLcEQsTUFDakMsbUJBQW9CQSxLQUFLdXBDLGVBQ0R2cEMsS0FBa0IsY0FBRUssa0JBUXBEaXBDLEVBQWdCbHBDLFVBQVVFLGdCQUFrQixXQUN4Q21ELEVBQU9yRCxVQUFVRSxnQkFBZ0I4QyxLQUFLcEQsTUFDbEMsb0JBQXFCQSxLQUFLdXBDLGVBQ0Z2cEMsS0FBa0IsY0FBRU0sbUJBRzdDZ3BDLEVBakd5QixDQWtHbEMsSUNuSEYsSUFPSVEsWUFBYSxjQU1iQyxNQUFPdGpDLEVBTVB1akMsUzVFSFUsVzRFU1ZDLFlBQWEsY0FPYkMsWUFBYSxjQUNiQyxZQUFhLGNBQ2JDLFVBQVcsWUFDWEMsWUFBYSxjQUNiQyxXQUFZLGFBQ1pDLGFBQWMsZUFDZEMsYUFBYyxlQUNkQyxjQUFlLGlCQ3hDbkIsR0FDaUIsY0FEakIsR0FFaUIsY0NOakIsSUFBSSxHQUF3QyxXQUN4QyxJQUFJOW5DLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0EwUzVDLFNBblI0QyxTQUFVRyxHQU1sRCxTQUFTaW5DLEVBQXVCNThCLEVBQUs2OEIsR0FDakMsSUFBSS9tQyxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTThOLElBQVE5TixLQU10QzRELEVBQU04L0IsS0FBTzUxQixFQUtibEssRUFBTWduQyxnQkFLTmhuQyxFQUFNaW5DLGdCQUFpQixFQUt2QmpuQyxFQUFNa25DLFdBQVksRUFLbEJsbkMsRUFBTW1uQyxrQkFBb0IsR0FLMUJubkMsRUFBTW9uQyxvQkFBbUMvbEMsSUFBbEIwbEMsRUFBOEIsRUFBSUEsRUFPekQvbUMsRUFBTXFuQyxNQUFRLEtBQ2QsSUFBSTFFLEVBQVUzaUMsRUFBTTgvQixLQUFLc0MsY0FnQ3pCLE9BM0JBcGlDLEVBQU1zbkMsZ0JBQWtCLEVBS3hCdG5DLEVBQU11bkMsZ0JBQWtCLEdBQ3hCdm5DLEVBQU1raUMsU0FBV1MsRUFLakIzaUMsRUFBTXduQyx3QkFBMEI3bEMsRUFBT2doQyxFQUFTLEdBQThCM2lDLEVBQU15bkMsbUJBQW9Cem5DLEdBS3hHQSxFQUFNMG5DLDBCQUtOMW5DLEVBQU0ybkMsb0JBQXNCaG1DLEVBQU9naEMsRUFBUyxHQUE4QjNpQyxFQUFNNG5DLFlBQWE1bkMsR0FJN0ZBLEVBQU02bkMsc0JBQXdCN25DLEVBQU04bkMsaUJBQWlCaG1DLEtBQUs5QixHQUMxREEsRUFBTWtpQyxTQUFTN2hDLGlCQUFpQndDLEVBQXFCN0MsRUFBTTZuQyx3QkFBdUIxNEIsSUFBMEIsQ0FBRUMsU0FBUyxJQUNoSHBQLEVBbU1YLE9BaFJBLEdBQVU4bUMsRUFBd0JqbkMsR0FvRmxDaW5DLEVBQXVCdHFDLFVBQVV1ckMsY0FBZ0IsU0FBVUMsR0FDdkQsSUFBSUMsRUFBVyxJQUFJLEdBQWdCLFNBQTJCN3JDLEtBQUswakMsS0FBTWtJLEdBQ3pFNXJDLEtBQUtzRSxjQUFjdW5DLFFBQ1U1bUMsSUFBekJqRixLQUFLNHFDLGlCQUVMa0IsYUFBYTlyQyxLQUFLNHFDLGlCQUNsQjVxQyxLQUFLNHFDLHFCQUFrQjNsQyxFQUN2QjRtQyxFQUFXLElBQUksR0FBZ0IsWUFBOEI3ckMsS0FBSzBqQyxLQUFNa0ksR0FDeEU1ckMsS0FBS3NFLGNBQWN1bkMsSUFJbkI3ckMsS0FBSzRxQyxnQkFBa0I1VCxXQUV2QixXQUNJaDNCLEtBQUs0cUMscUJBQWtCM2xDLEVBQ3ZCLElBQUk0bUMsRUFBVyxJQUFJLEdBQWdCLGVBQWlDN3JDLEtBQUswakMsS0FBTWtJLEdBQy9FNXJDLEtBQUtzRSxjQUFjdW5DLElBQ3JCbm1DLEtBQUsxRixNQUFPLE1BVXRCMHFDLEVBQXVCdHFDLFVBQVUyckMsc0JBQXdCLFNBQVVILEdBQy9ELElBQUlybkMsRUFBUXFuQyxFQUNScm5DLEVBQU14RSxNQUFRLGNBQ2R3RSxFQUFNeEUsTUFBUSx3QkFDUEMsS0FBS21yQyxnQkFBZ0I1bUMsRUFBTXluQyxXQUU3QnpuQyxFQUFNeEUsTUFBUSxpQkFDbkJDLEtBQUttckMsZ0JBQWdCNW1DLEVBQU15bkMsWUFBYSxHQUU1Q2hzQyxLQUFLa3JDLGdCQUFrQnZyQyxPQUFPeUYsS0FBS3BGLEtBQUttckMsaUJBQWlCanFDLFFBTzdEd3BDLEVBQXVCdHFDLFVBQVU2ckMsaUJBQW1CLFNBQVVMLEdBQzFENXJDLEtBQUsrckMsc0JBQXNCSCxHQUMzQixJQUFJQyxFQUFXLElBQUksR0FBZ0IsYUFBK0I3ckMsS0FBSzBqQyxLQUFNa0ksR0FDN0U1ckMsS0FBS3NFLGNBQWN1bkMsR0FPZjdyQyxLQUFLNnFDLGlCQUNKZ0IsRUFBUzNyQyxtQkFDVEYsS0FBSzhxQyxXQUNOOXFDLEtBQUtrc0MscUJBQXFCTixJQUMxQjVyQyxLQUFLMnJDLGNBQWMzckMsS0FBS2lyQyxPQUVDLElBQXpCanJDLEtBQUtrckMsa0JBQ0xsckMsS0FBSytxQyxrQkFBa0JucEIsUUFBUTdiLEdBQy9CL0YsS0FBSytxQyxrQkFBa0I3cEMsT0FBUyxFQUNoQ2xCLEtBQUs4cUMsV0FBWSxFQUNqQjlxQyxLQUFLaXJDLE1BQVEsT0FTckJQLEVBQXVCdHFDLFVBQVU4ckMscUJBQXVCLFNBQVVOLEdBQzlELE9BQStCLElBQXhCQSxFQUFhTyxRQU94QnpCLEVBQXVCdHFDLFVBQVVpckMsbUJBQXFCLFNBQVVPLEdBQzVENXJDLEtBQUs2cUMsZUFBMEMsSUFBekI3cUMsS0FBS2tyQyxnQkFDM0JsckMsS0FBSytyQyxzQkFBc0JILEdBQzNCLElBQUlDLEVBQVcsSUFBSSxHQUFnQixlQUFpQzdyQyxLQUFLMGpDLEtBQU1rSSxHQUkvRSxJQUFLLElBQUlscEMsS0FIVDFDLEtBQUtzRSxjQUFjdW5DLEdBRW5CN3JDLEtBQUtpckMsTUFBb0MsR0FDcEJXLEVBQWMsQ0FDL0IsSUFBSS9yQyxFQUFRK3JDLEVBQWFscEMsR0FDekIxQyxLQUFLaXJDLE1BQU12b0MsR0FBNkIsbUJBQVY3QyxFQUF1QmlDLEVBQU9qQyxFQUVoRSxHQUFzQyxJQUFsQ0csS0FBSytxQyxrQkFBa0I3cEMsT0FBYyxDQUNyQyxJQUFJa3JDLEVBQU1wc0MsS0FBSzBqQyxLQUFLMkksbUJBQ3BCcnNDLEtBQUsrcUMsa0JBQWtCam9DLEtBQUt5QyxFQUFPNm1DLEVBQUssZUFBaUNwc0MsS0FBS3NzQyxtQkFBb0J0c0MsTUFBT3VGLEVBQU82bUMsRUFBSyxhQUErQnBzQyxLQUFLaXNDLGlCQUFrQmpzQyxNQWMzS3VGLEVBQU92RixLQUFLOGxDLFNBQVUsaUJBQW1DOWxDLEtBQUtpc0MsaUJBQWtCanNDLE9BQzVFQSxLQUFLOGxDLFNBQVN5RyxhQUFldnNDLEtBQUs4bEMsU0FBU3lHLGdCQUFrQkgsR0FDN0Rwc0MsS0FBSytxQyxrQkFBa0Jqb0MsS0FBS3lDLEVBQU92RixLQUFLOGxDLFNBQVN5RyxjQUFlLGFBQStCdnNDLEtBQUtpc0MsaUJBQWtCanNDLFNBU2xJMHFDLEVBQXVCdHFDLFVBQVVrc0MsbUJBQXFCLFNBQVVWLEdBSTVELEdBQUk1ckMsS0FBS3dzQyxVQUFVWixHQUFlLENBQzlCNXJDLEtBQUs4cUMsV0FBWSxFQUNqQixJQUFJZSxFQUFXLElBQUksR0FBZ0IsZUFBaUM3ckMsS0FBSzBqQyxLQUFNa0ksRUFBYzVyQyxLQUFLOHFDLFdBQ2xHOXFDLEtBQUtzRSxjQUFjdW5DLEtBVTNCbkIsRUFBdUJ0cUMsVUFBVW9yQyxZQUFjLFNBQVVJLEdBQ3JENXJDLEtBQUtzckMsMEJBQTRCTSxFQUNqQyxJQUFJakMsS0FBYzNwQyxLQUFLaXJDLFFBQVNqckMsS0FBS3dzQyxVQUFVWixJQUMvQzVyQyxLQUFLc0UsY0FBYyxJQUFJLEdBQWdCc25DLEVBQWE3ckMsS0FBTUMsS0FBSzBqQyxLQUFNa0ksRUFBY2pDLEtBVXZGZSxFQUF1QnRxQyxVQUFVc3JDLGlCQUFtQixTQUFVbm5DLEdBRzFELElBQUlnbEMsRUFBZ0J2cEMsS0FBS3NyQywwQkFDbkIvQixJQUFpQkEsRUFBY3JwQyxrQkFDSixrQkFBckJxRSxFQUFNa29DLGFBQWlELElBQXJCbG9DLEVBQU1rb0MsWUFDaERsb0MsRUFBTWxFLGtCQVNkcXFDLEVBQXVCdHFDLFVBQVVvc0MsVUFBWSxTQUFVWixHQUNuRCxPQUFRNXJDLEtBQUs4cUMsV0FDVC9oQyxLQUFLa3RCLElBQUkyVixFQUFhYyxRQUFVMXNDLEtBQUtpckMsTUFBTXlCLFNBQ3ZDMXNDLEtBQUtnckMsZ0JBQ1RqaUMsS0FBS2t0QixJQUFJMlYsRUFBYWUsUUFBVTNzQyxLQUFLaXJDLE1BQU0wQixTQUFXM3NDLEtBQUtnckMsZ0JBS25FTixFQUF1QnRxQyxVQUFVTSxnQkFBa0IsV0FDM0NWLEtBQUt1ckMsc0JBQ0x4bEMsRUFBYy9GLEtBQUt1ckMscUJBQ25CdnJDLEtBQUt1ckMsb0JBQXNCLE1BRS9CdnJDLEtBQUs4bEMsU0FBUy9nQyxvQkFBb0IwQixFQUFxQnpHLEtBQUt5ckMsdUJBQ3hEenJDLEtBQUtvckMsMEJBQ0xybEMsRUFBYy9GLEtBQUtvckMseUJBQ25CcHJDLEtBQUtvckMsd0JBQTBCLE1BRW5DcHJDLEtBQUsrcUMsa0JBQWtCbnBCLFFBQVE3YixHQUMvQi9GLEtBQUsrcUMsa0JBQWtCN3BDLE9BQVMsRUFDaENsQixLQUFLOGxDLFNBQVcsS0FDaEJyaUMsRUFBT3JELFVBQVVNLGdCQUFnQjBDLEtBQUtwRCxPQUVuQzBxQyxFQWpSZ0MsQ0FrUnpDLEdDdFNGLEdBTWdCLGFDTmhCLEdBQ2dCLGFBRGhCLEdBRVUsT0FGVixHQUdZLFNBSFosR0FJVSxPQ0ZILElBQUlrQyxHQUFPaGlDLElBc09sQixTQXpObUMsV0FLL0IsU0FBU2lpQyxFQUFjQyxFQUFrQkMsR0FLckMvc0MsS0FBS2d0QyxrQkFBb0JGLEVBS3pCOXNDLEtBQUtpdEMsYUFBZUYsRUFLcEIvc0MsS0FBS2t0QyxVQUFZLEdBS2pCbHRDLEtBQUttdEMsWUFBYyxHQUtuQm50QyxLQUFLb3RDLGdCQUFrQixHQXlMM0IsT0FwTEFQLEVBQWN6c0MsVUFBVW9DLE1BQVEsV0FDNUJ4QyxLQUFLa3RDLFVBQVVoc0MsT0FBUyxFQUN4QmxCLEtBQUttdEMsWUFBWWpzQyxPQUFTLEVBQzFCc0IsRUFBTXhDLEtBQUtvdEMsa0JBTWZQLEVBQWN6c0MsVUFBVWl0QyxRQUFVLFdBQzlCLElBQUlDLEVBQVd0dEMsS0FBS2t0QyxVQUNoQkssRUFBYXZ0QyxLQUFLbXRDLFlBQ2xCNUcsRUFBVStHLEVBQVMsR0FDQSxHQUFuQkEsRUFBU3BzQyxRQUNUb3NDLEVBQVNwc0MsT0FBUyxFQUNsQnFzQyxFQUFXcnNDLE9BQVMsSUFHcEJvc0MsRUFBUyxHQUFLQSxFQUFTamIsTUFDdkJrYixFQUFXLEdBQUtBLEVBQVdsYixNQUMzQnJ5QixLQUFLd3RDLFFBQVEsSUFFakIsSUFBSUMsRUFBYXp0QyxLQUFLaXRDLGFBQWExRyxHQUVuQyxjQURPdm1DLEtBQUtvdEMsZ0JBQWdCSyxHQUNyQmxILEdBT1hzRyxFQUFjenNDLFVBQVV3cEIsUUFBVSxTQUFVMmMsR0FDeEMsSUFBU3ZtQyxLQUFLaXRDLGFBQWExRyxLQUFZdm1DLEtBQUtvdEMsaUJBQWtCLElBQzlELElBQUlNLEVBQVcxdEMsS0FBS2d0QyxrQkFBa0J6RyxHQUN0QyxPQUFJbUgsR0FBWWQsS0FDWjVzQyxLQUFLa3RDLFVBQVVwcUMsS0FBS3lqQyxHQUNwQnZtQyxLQUFLbXRDLFlBQVlycUMsS0FBSzRxQyxHQUN0QjF0QyxLQUFLb3RDLGdCQUFnQnB0QyxLQUFLaXRDLGFBQWExRyxLQUFZLEVBQ25Edm1DLEtBQUsydEMsVUFBVSxFQUFHM3RDLEtBQUtrdEMsVUFBVWhzQyxPQUFTLElBQ25DLElBT2YyckMsRUFBY3pzQyxVQUFVd3RDLFNBQVcsV0FDL0IsT0FBTzV0QyxLQUFLa3RDLFVBQVVoc0MsUUFRMUIyckMsRUFBY3pzQyxVQUFVeXRDLG1CQUFxQixTQUFVeG9DLEdBQ25ELE9BQWUsRUFBUkEsRUFBWSxHQVF2QnduQyxFQUFjenNDLFVBQVUwdEMsb0JBQXNCLFNBQVV6b0MsR0FDcEQsT0FBZSxFQUFSQSxFQUFZLEdBUXZCd25DLEVBQWN6c0MsVUFBVTJ0QyxnQkFBa0IsU0FBVTFvQyxHQUNoRCxPQUFRQSxFQUFRLEdBQU0sR0FNMUJ3bkMsRUFBY3pzQyxVQUFVNHRDLFNBQVcsV0FDL0IsSUFBSTdzQyxFQUNKLElBQUtBLEdBQUtuQixLQUFLa3RDLFVBQVVoc0MsUUFBVSxHQUFLLEVBQUdDLEdBQUssRUFBR0EsSUFDL0NuQixLQUFLd3RDLFFBQVFyc0MsSUFNckIwckMsRUFBY3pzQyxVQUFVNnRDLFFBQVUsV0FDOUIsT0FBaUMsSUFBMUJqdUMsS0FBS2t0QyxVQUFVaHNDLFFBTTFCMnJDLEVBQWN6c0MsVUFBVXVwQixZQUFjLFNBQVVybkIsR0FDNUMsT0FBT0EsS0FBT3RDLEtBQUtvdEMsaUJBTXZCUCxFQUFjenNDLFVBQVU4dEMsU0FBVyxTQUFVM0gsR0FDekMsT0FBT3ZtQyxLQUFLMnBCLFlBQVkzcEIsS0FBS2l0QyxhQUFhMUcsS0FNOUNzRyxFQUFjenNDLFVBQVVvdEMsUUFBVSxTQUFVbm9DLEdBT3hDLElBTkEsSUFBSWlvQyxFQUFXdHRDLEtBQUtrdEMsVUFDaEJLLEVBQWF2dEMsS0FBS210QyxZQUNsQmdCLEVBQVFiLEVBQVNwc0MsT0FDakJxbEMsRUFBVStHLEVBQVNqb0MsR0FDbkJxb0MsRUFBV0gsRUFBV2xvQyxHQUN0QitvQyxFQUFhL29DLEVBQ1ZBLEVBQVE4b0MsR0FBUyxHQUFHLENBQ3ZCLElBQUlFLEVBQVNydUMsS0FBSzZ0QyxtQkFBbUJ4b0MsR0FDakNpcEMsRUFBU3R1QyxLQUFLOHRDLG9CQUFvQnpvQyxHQUNsQ2twQyxFQUFvQkQsRUFBU0gsR0FBU1osRUFBV2UsR0FBVWYsRUFBV2MsR0FDcEVDLEVBQ0FELEVBQ05mLEVBQVNqb0MsR0FBU2lvQyxFQUFTaUIsR0FDM0JoQixFQUFXbG9DLEdBQVNrb0MsRUFBV2dCLEdBQy9CbHBDLEVBQVFrcEMsRUFFWmpCLEVBQVNqb0MsR0FBU2toQyxFQUNsQmdILEVBQVdsb0MsR0FBU3FvQyxFQUNwQjF0QyxLQUFLMnRDLFVBQVVTLEVBQVkvb0MsSUFPL0J3bkMsRUFBY3pzQyxVQUFVdXRDLFVBQVksU0FBVVMsRUFBWS9vQyxHQUt0RCxJQUpBLElBQUlpb0MsRUFBV3R0QyxLQUFLa3RDLFVBQ2hCSyxFQUFhdnRDLEtBQUttdEMsWUFDbEI1RyxFQUFVK0csRUFBU2pvQyxHQUNuQnFvQyxFQUFXSCxFQUFXbG9DLEdBQ25CQSxFQUFRK29DLEdBQVksQ0FDdkIsSUFBSUksRUFBY3h1QyxLQUFLK3RDLGdCQUFnQjFvQyxHQUN2QyxLQUFJa29DLEVBQVdpQixHQUFlZCxHQU0xQixNQUxBSixFQUFTam9DLEdBQVNpb0MsRUFBU2tCLEdBQzNCakIsRUFBV2xvQyxHQUFTa29DLEVBQVdpQixHQUMvQm5wQyxFQUFRbXBDLEVBTWhCbEIsRUFBU2pvQyxHQUFTa2hDLEVBQ2xCZ0gsRUFBV2xvQyxHQUFTcW9DLEdBS3hCYixFQUFjenNDLFVBQVVxdUMsYUFBZSxXQUNuQyxJQUtJbEksRUFBU3BsQyxFQUFHdXNDLEVBTFpaLEVBQW1COXNDLEtBQUtndEMsa0JBQ3hCTSxFQUFXdHRDLEtBQUtrdEMsVUFDaEJLLEVBQWF2dEMsS0FBS210QyxZQUNsQjluQyxFQUFRLEVBQ1JwRSxFQUFJcXNDLEVBQVNwc0MsT0FFakIsSUFBS0MsRUFBSSxFQUFHQSxFQUFJRixJQUFLRSxHQUVqQnVzQyxFQUFXWixFQURYdkcsRUFBVStHLEVBQVNuc0MsTUFFSHlyQyxVQUNMNXNDLEtBQUtvdEMsZ0JBQWdCcHRDLEtBQUtpdEMsYUFBYTFHLEtBRzlDZ0gsRUFBV2xvQyxHQUFTcW9DLEVBQ3BCSixFQUFTam9DLEtBQVdraEMsR0FHNUIrRyxFQUFTcHNDLE9BQVNtRSxFQUNsQmtvQyxFQUFXcnNDLE9BQVNtRSxFQUNwQnJGLEtBQUtndUMsWUFFRm5CLEVBdk51QixHQ3JCbEMsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbHFDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0E2SDVDLFNBckcrQixTQUFVRyxHQU1yQyxTQUFTaXJDLEVBQVVDLEVBQXNCQyxHQUNyQyxJQUFJaHJDLEVBQVFILEVBQU9MLEtBQUtwRCxNQUt4QixTQUFVdW1DLEdBQ04sT0FBT29JLEVBQXFCL29DLE1BQU0sS0FBTTJnQyxNQU01QyxTQUFVQSxHQUNOLE9BQW1EQSxFQUFRLEdBQUlqZCxhQUM3RHRwQixLQWtCTixPQWhCQTRELEVBQU1pckMsdUJBQXlCanJDLEVBQU1rckMsaUJBQWlCcHBDLEtBQUs5QixHQUszREEsRUFBTW1yQyxvQkFBc0JILEVBSzVCaHJDLEVBQU1vckMsY0FBZ0IsRUFLdEJwckMsRUFBTXFyQyxrQkFBb0IsR0FDbkJyckMsRUE0RFgsT0FsR0EsR0FBVThxQyxFQUFXanJDLEdBNENyQmlyQyxFQUFVdHVDLFVBQVV3cEIsUUFBVSxTQUFVMmMsR0FDcEMsSUFBSTJJLEVBQVF6ckMsRUFBT3JELFVBQVV3cEIsUUFBUXhtQixLQUFLcEQsS0FBTXVtQyxHQUtoRCxPQUpJMkksR0FDVzNJLEVBQVEsR0FDZHRpQyxpQkFBaUJ3QyxFQUFrQnpHLEtBQUs2dUMsd0JBRTFDSyxHQUtYUixFQUFVdHVDLFVBQVUrdUMsZ0JBQWtCLFdBQ2xDLE9BQU9udkMsS0FBS2d2QyxlQU1oQk4sRUFBVXR1QyxVQUFVMHVDLGlCQUFtQixTQUFVdnFDLEdBQzdDLElBQUkrTCxFQUFtRC9MLEVBQVksT0FDL0QrRyxFQUFRZ0YsRUFBS2pDLFdBQ2pCLEcvQ2pGSSxJK0NpRkEvQyxHL0M1RUQsSStDNkVDQSxHL0M1RUQsSStDNkVDQSxFQUEyQixDQUMzQmdGLEVBQUt2TCxvQkFBb0IwQixFQUFrQnpHLEtBQUs2dUMsd0JBQ2hELElBQUlPLEVBQVU5K0IsRUFBS2daLFNBQ2Y4bEIsS0FBV3B2QyxLQUFLaXZDLDJCQUNUanZDLEtBQUtpdkMsa0JBQWtCRyxLQUM1QnB2QyxLQUFLZ3ZDLGVBRVhodkMsS0FBSyt1Qyx3QkFPYkwsRUFBVXR1QyxVQUFVaXZDLGNBQWdCLFNBQVVDLEVBQWlCQyxHQUczRCxJQUZBLElBQ1dqL0IsRUFBTTgrQixFQURiSSxFQUFXLEVBRVJ4dkMsS0FBS2d2QyxjQUFnQk0sR0FDeEJFLEVBQVdELEdBQ1h2dkMsS0FBSzR0QyxXQUFhLEdBRWxCd0IsR0FEQTkrQixFQUFtRHRRLEtBQUtxdEMsVUFBVSxJQUNuRC9qQixTL0MxR2pCLEkrQzJHVWhaLEVBQUtqQyxZQUNxQitnQyxLQUFXcHZDLEtBQUtpdkMsb0JBQzlDanZDLEtBQUtpdkMsa0JBQWtCRyxJQUFXLElBQ2hDcHZDLEtBQUtndkMsZ0JBQ0xRLEVBQ0ZsL0IsRUFBS21CLFNBSVZpOUIsRUFuR21CLENBb0c1QixJQ2hHSyxTQUFTZSxHQUFROTRCLEdBQ3BCLE9BQU9BLEVBQUssR0FBSyxHQUFLQSxFQUFLLEdBQUssRUEwQjdCLFNBQVMrNEIsR0FBTy80QixFQUFNMG5CLEdBQ3pCLE9BQUk5OEIsTUFBTUMsUUFBUW1WLEdBQ1BBLFFBR1UxUixJQUFibzVCLEVBQ0FBLEVBQVcsQ0FBQzFuQixFQUFNQSxJQUdsQjBuQixFQUFTLEdBQUsxbkIsRUFDZDBuQixFQUFTLEdBQUsxbkIsR0FFWDBuQixHQ25FZixJQUFJLEdBQXdDLFdBQ3hDLElBQUkxN0IsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTYwQzVDLFNBNXJDa0MsU0FBVUcsR0FLeEMsU0FBU2tzQyxFQUFhcmxDLEdBQ2xCLElBQUkxRyxFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0FJakM0RCxFQUFNcUMsR0FJTnJDLEVBQU11QyxLQUlOdkMsRUFBTXlDLEdBQ04sSUFBSXVwQyxFQXdtQ1osU0FBK0J0bEMsR0FJM0IsSUFBSXVsQyxFQUFzQixVQUNVNXFDLElBQWhDcUYsRUFBUXVsQyxzQkFDUkEsRUFDMkMsaUJBQWhDdmxDLEVBQVF1bEMsb0JBQ1Q3M0IsU0FBUzgzQixlQUFleGxDLEVBQVF1bEMscUJBQ2hDdmxDLEVBQVF1bEMscUJBS3RCLElBU0lFLEVBVUFDLEVBV0FDLEVBOUJBcHRDLEVBQVMsR0FDVHF0QyxFQUFhNWxDLEVBQVFnK0IsUUFDb0MsbUJBQS9CaCtCLEVBQWMsT0FBVyxVQUN0QkEsRUFBYyxPQUN6QyxJQUFJLEdBQVcsQ0FBRWcrQixPQUFtQ2grQixFQUFjLFNBdUN4RSxPQXRDQXpILEVBQTZCLFdBQUlxdEMsRUFDakNydEMsRUFBeUIsT0FBSXlILEVBQVFuSyxPQUNyQzBDLEVBQXVCLFVBQ0ZvQyxJQUFqQnFGLEVBQVE2bEMsS0FBcUI3bEMsRUFBUTZsQyxLQUFPLElBQUksUUFFM0JsckMsSUFBckJxRixFQUFReWxDLFdBQ0p4dUMsTUFBTUMsUUFBUThJLEVBQVF5bEMsVUFDdEJBLEVBQVcsSUFBSSxHQUFXemxDLEVBQVF5bEMsU0FBUzkwQixVQUczQyxFQUFpRSxtQkFBaEMzUSxFQUFnQixTQUFVLFNBQWtCLElBQzdFeWxDLEVBQXNDemxDLEVBQWdCLGdCQUlqQ3JGLElBQXpCcUYsRUFBUTBsQyxlQUNKenVDLE1BQU1DLFFBQVE4SSxFQUFRMGxDLGNBQ3RCQSxFQUFlLElBQUksR0FBVzFsQyxFQUFRMGxDLGFBQWEvMEIsVUFHbkQsRUFDSSxtQkFENkIzUSxFQUFvQixhQUFVLFNBQy9DLElBQ2hCMGxDLEVBQTBDMWxDLEVBQW9CLG9CQUk3Q3JGLElBQXJCcUYsRUFBUTJsQyxTQUNKMXVDLE1BQU1DLFFBQVE4SSxFQUFRMmxDLFVBQ3RCQSxFQUFXLElBQUksR0FBVzNsQyxFQUFRMmxDLFNBQVNoMUIsVUFHM0MsRUFBaUUsbUJBQWhDM1EsRUFBZ0IsU0FBVSxTQUFrQixJQUM3RTJsQyxFQUFXM2xDLEVBQVEybEMsVUFJdkJBLEVBQVcsSUFBSSxHQUVaLENBQ0hGLFNBQVVBLEVBQ1ZDLGFBQWNBLEVBQ2RILG9CQUFxQkEsRUFDckJJLFNBQVVBLEVBQ1ZwdEMsT0FBUUEsR0F0cUNjdXRDLENBQXNCOWxDLEdBbVA1QyxPQWpQQTFHLEVBQU15c0MseUJBQTJCenNDLEVBQU0wc0MsbUJBQW1CNXFDLEtBQUs5QixHQUsvREEsRUFBTTJzQyxzQkFDMEJ0ckMsSUFBNUJxRixFQUFRa21DLGdCQUFnQ2xtQyxFQUFRa21DLGdCQUFrQixHQUt0RTVzQyxFQUFNNnNDLGlCQUNxQnhyQyxJQUF2QnFGLEVBQVF3USxXQUNGeFEsRUFBUXdRLFdBQ1J2SSxHQUtWM08sRUFBTThzQyx5QkFLTjlzQyxFQUFNK3NDLG1CQUlOL3NDLEVBQU1ndEMsZ0JBQThDLFdBQ2hENXdDLEtBQUsyd0Msd0JBQXFCMXJDLEVBQzFCakYsS0FBSzZ3QyxhQUFhdlUsS0FBS0MsUUFDekI3MkIsS0FBSzlCLEdBS1BBLEVBQU1rdEMsNEJqRTFLSCxDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHaUUrS25CbHRDLEVBQU1tdEMsNEJqRS9LSCxDQUFDLEVBQUcsRUFBRyxFQUFHLEVBQUcsRUFBRyxHaUVvTG5CbnRDLEVBQU1vdEMsWUFBYyxFQUtwQnB0QyxFQUFNcXRDLFlBQWMsS0FNcEJydEMsRUFBTXN0QyxnQkFBa0IsS0FLeEJ0dEMsRUFBTXV0Qyx5QkFBMkIsS0FLakN2dEMsRUFBTXd0Qyx1QkFBeUIsS0FLL0J4dEMsRUFBTXl0QyxnQ0FBa0MsS0FLeEN6dEMsRUFBTTB0QyxVQUFZdDVCLFNBQVNDLGNBQWMsT0FDekNyVSxFQUFNMHRDLFVBQVVybUMsVUFDWixlQUFpQixpQkFBa0JnSSxPQUFTLFlBQWMsSUFDOURyUCxFQUFNMHRDLFVBQVVoNEIsTUFBTUcsU0FBVyxXQUNqQzdWLEVBQU0wdEMsVUFBVWg0QixNQUFNaTRCLFNBQVcsU0FDakMzdEMsRUFBTTB0QyxVQUFVaDRCLE1BQU1wQixNQUFRLE9BQzlCdFUsRUFBTTB0QyxVQUFVaDRCLE1BQU1uQixPQUFTLE9BSy9CdlUsRUFBTTR0QyxrQkFBb0J4NUIsU0FBU0MsY0FBYyxPQUNqRHJVLEVBQU00dEMsa0JBQWtCbDRCLE1BQU1HLFNBQVcsV0FDekM3VixFQUFNNHRDLGtCQUFrQmw0QixNQUFNNU8sT0FBUyxJQUN2QzlHLEVBQU00dEMsa0JBQWtCbDRCLE1BQU1wQixNQUFRLE9BQ3RDdFUsRUFBTTR0QyxrQkFBa0JsNEIsTUFBTW5CLE9BQVMsT0FDdkN2VSxFQUFNNHRDLGtCQUFrQmw0QixNQUFNbTRCLGNBQWdCLE9BQzlDN3RDLEVBQU00dEMsa0JBQWtCdm1DLFVBQVksc0JBQ3BDckgsRUFBTTB0QyxVQUFVNTNCLFlBQVk5VixFQUFNNHRDLG1CQUtsQzV0QyxFQUFNOHRDLDJCQUE2QjE1QixTQUFTQyxjQUFjLE9BQzFEclUsRUFBTTh0QywyQkFBMkJwNEIsTUFBTUcsU0FBVyxXQUNsRDdWLEVBQU04dEMsMkJBQTJCcDRCLE1BQU01TyxPQUFTLElBQ2hEOUcsRUFBTTh0QywyQkFBMkJwNEIsTUFBTXBCLE1BQVEsT0FDL0N0VSxFQUFNOHRDLDJCQUEyQnA0QixNQUFNbkIsT0FBUyxPQUNoRHZVLEVBQU04dEMsMkJBQTJCcDRCLE1BQU1tNEIsY0FBZ0IsT0FDdkQ3dEMsRUFBTTh0QywyQkFBMkJ6bUMsVUFBWSxnQ0FDN0NySCxFQUFNMHRDLFVBQVU1M0IsWUFBWTlWLEVBQU04dEMsNEJBS2xDOXRDLEVBQU0rdEMsd0JBQTBCLEtBS2hDL3RDLEVBQU1vbkMsZUFBaUIxZ0MsRUFBUXFnQyxjQUsvQi9tQyxFQUFNZ3VDLHFCQUF1QmhDLEVBQWdCQyxvQkFLN0Nqc0MsRUFBTWl1QyxnQkFBa0IsS0FLeEJqdUMsRUFBTW1zQyxTQUFXSCxFQUFnQkcsVUFBWSxJQUFJLEdBS2pEbnNDLEVBQU1vc0MsYUFBZUosRUFBZ0JJLGNBQWdCLElBQUksR0FLekRwc0MsRUFBTWt1QyxVQUFZbEMsRUFBZ0JLLFNBTWxDcnNDLEVBQU1tdUMsZ0JBQWtCLEdBS3hCbnVDLEVBQU1nSyxVQUFZLEtBS2xCaEssRUFBTW91QyxjQUtOcHVDLEVBQU1xdUMscUJBQXVCLEdBSzdCcnVDLEVBQU1zdUMsV0FBYSxJQUFJLEdBQVV0dUMsRUFBTXV1QyxnQkFBZ0J6c0MsS0FBSzlCLEdBQVFBLEVBQU13dUMsa0JBQWtCMXNDLEtBQUs5QixJQUNqR0EsRUFBTW9FLGtCQUFrQnFxQyxHQUF3Qnp1QyxFQUFNMHVDLDBCQUN0RDF1QyxFQUFNb0Usa0JBQWtCcXFDLEdBQWtCenVDLEVBQU0ydUMsb0JBQ2hEM3VDLEVBQU1vRSxrQkFBa0JxcUMsR0FBa0J6dUMsRUFBTTR1QyxvQkFDaEQ1dUMsRUFBTW9FLGtCQUFrQnFxQyxHQUFvQnp1QyxFQUFNNnVDLHNCQUdsRDd1QyxFQUFNNEQsY0FBY29vQyxFQUFnQi9zQyxRQUNwQ2UsRUFBTW1zQyxTQUFTbnVCLFFBS2YsU0FBVTh3QixHQUNOQSxFQUFRM2tDLE9BQU8vTixPQUNqQjBGLEtBQUs5QixJQUNQQSxFQUFNbXNDLFNBQVM5ckMsaUJBQWlCOGpDLEdBSWhDLFNBQVV4akMsR0FDTkEsRUFBTWdpQyxRQUFReDRCLE9BQU8vTixPQUN2QjBGLEtBQUs5QixJQUNQQSxFQUFNbXNDLFNBQVM5ckMsaUJBQWlCOGpDLEdBSWhDLFNBQVV4akMsR0FDTkEsRUFBTWdpQyxRQUFReDRCLE9BQU8sT0FDdkJySSxLQUFLOUIsSUFDUEEsRUFBTW9zQyxhQUFhcHVCLFFBS25CLFNBQVUrd0IsR0FDTkEsRUFBWTVrQyxPQUFPL04sT0FDckIwRixLQUFLOUIsSUFDUEEsRUFBTW9zQyxhQUFhL3JDLGlCQUFpQjhqQyxHQUlwQyxTQUFVeGpDLEdBQ05BLEVBQU1naUMsUUFBUXg0QixPQUFPL04sT0FDdkIwRixLQUFLOUIsSUFDUEEsRUFBTW9zQyxhQUFhL3JDLGlCQUFpQjhqQyxHQUlwQyxTQUFVeGpDLEdBQ05BLEVBQU1naUMsUUFBUXg0QixPQUFPLE9BQ3ZCckksS0FBSzlCLElBQ1BBLEVBQU1rdUMsVUFBVWx3QixRQUFRaGUsRUFBTWd2QyxvQkFBb0JsdEMsS0FBSzlCLElBQ3ZEQSxFQUFNa3VDLFVBQVU3dEMsaUJBQWlCOGpDLEdBSWpDLFNBQVV4akMsR0FDTnZFLEtBQUs0eUMsb0JBQzBDcnVDLEVBQWEsVUFDOURtQixLQUFLOUIsSUFDUEEsRUFBTWt1QyxVQUFVN3RDLGlCQUFpQjhqQyxHQUlqQyxTQUFVeGpDLEdBQ04sSUFDSXNrQyxFQUR5RHRrQyxFQUFhLFFBQ3pEc3VDLGFBQ041dEMsSUFBUDRqQyxVQUNPN29DLEtBQUsreEMsZ0JBQWdCbEosRUFBR3I0QixZQUVuQ2pNLEVBQU1naUMsUUFBUXg0QixPQUFPLE9BQ3ZCckksS0FBSzlCLElBQ0FBLEVBKzJCWCxPQXBuQ0EsR0FBVStyQyxFQUFjbHNDLEdBMlF4QmtzQyxFQUFhdnZDLFVBQVUrTyxlQUFpQixXQUNwQyxNQUFNLElBQUlySSxNQUFNLG9EQU9wQjZvQyxFQUFhdnZDLFVBQVUweUMsV0FBYSxTQUFVSixHQUMxQzF5QyxLQUFLK3lDLGNBQWNqd0MsS0FBSzR2QyxJQVc1Qi9DLEVBQWF2dkMsVUFBVTR5QyxlQUFpQixTQUFVTCxHQUM5QzN5QyxLQUFLaXpDLGtCQUFrQm53QyxLQUFLNnZDLElBU2hDaEQsRUFBYXZ2QyxVQUFVOHlDLFNBQVcsU0FBVTNuQyxHQUMzQnZMLEtBQUttekMsZ0JBQWdCdkssWUFDM0I5bEMsS0FBS3lJLElBT2hCb2tDLEVBQWF2dkMsVUFBVWd6QyxXQUFhLFNBQVVDLEdBQzFDcnpDLEtBQUtzekMsY0FBY3h3QyxLQUFLdXdDLElBTzVCMUQsRUFBYXZ2QyxVQUFVd3lDLG9CQUFzQixTQUFVUyxHQUNuRCxJQUFJeEssRUFBS3dLLEVBQVFSLGFBQ041dEMsSUFBUDRqQyxJQUNBN29DLEtBQUsreEMsZ0JBQWdCbEosRUFBR3I0QixZQUFjNmlDLEdBRTFDQSxFQUFRdGxDLE9BQU8vTixPQU1uQjJ2QyxFQUFhdnZDLFVBQVVNLGdCQUFrQixXQUNyQ1YsS0FBS3V6QyxVQUFVLE1BQ2Y5dkMsRUFBT3JELFVBQVVNLGdCQUFnQjBDLEtBQUtwRCxPQW9CMUMydkMsRUFBYXZ2QyxVQUFVb3pDLHNCQUF3QixTQUFVaGxDLEVBQU9vQyxFQUFVckIsR0FDdEUsR0FBS3ZQLEtBQUtpeEMsWUFBVixDQUdBLElBQUlsZ0MsRUFBYS9RLEtBQUt5ekMsK0JBQStCamxDLEdBRWpEd0MsT0FBNEMvTCxLQURoRHNLLE9BQThCdEssSUFBaEJzSyxFQUE0QkEsRUFBYyxJQUN6QnlCLGFBQTZCekIsRUFBWXlCLGFBQWUsRUFDbkYreUIsT0FBMEM5K0IsSUFBNUJzSyxFQUFZdzBCLFlBQTRCeDBCLEVBQVl3MEIsWUFBY2xpQyxFQUNoRmdpQyxHQUE0QyxJQUE3QnQwQixFQUFZczBCLGFBQy9CLE9BQU83akMsS0FBSzROLFVBQVVrRCwyQkFBMkJDLEVBQVkvUSxLQUFLaXhDLFlBQWFqZ0MsRUFBYzZ5QixFQUFjanpCLEVBQVUsS0FBTW16QixFQUFhLFFBVTVJNEwsRUFBYXZ2QyxVQUFVc3pDLG1CQUFxQixTQUFVbGxDLEVBQU9lLEdBQ3pELElBQUlva0MsRUFBVyxHQUlmLE9BSEEzekMsS0FBS3d6QyxzQkFBc0JobEMsR0FBTyxTQUFVeTFCLEdBQ3hDMFAsRUFBUzd3QyxLQUFLbWhDLEtBQ2YxMEIsR0FDSW9rQyxHQXVCWGhFLEVBQWF2dkMsVUFBVTZrQyxvQkFBc0IsU0FBVXoyQixFQUFPb0MsRUFBVXJCLEdBQ3BFLEdBQUt2UCxLQUFLaXhDLFlBQVYsQ0FHQSxJQUFJM21DLEVBQVVpRixHQUFlLEdBQ3pCeUIsT0FBd0MvTCxJQUF6QnFGLEVBQVEwRyxhQUE2QjFHLEVBQVEwRyxhQUFlLEVBQzNFK3lCLEVBQWN6NUIsRUFBUXk1QixhQUFlbGlDLEVBQ3pDLE9BQU83QixLQUFLNE4sVUFBVXEzQixvQkFBb0J6MkIsRUFBT3hPLEtBQUtpeEMsWUFBYWpnQyxFQUFjSixFQUFVbXpCLEtBVS9GNEwsRUFBYXZ2QyxVQUFVd3pDLGtCQUFvQixTQUFVcGxDLEVBQU9lLEdBQ3hELElBQUt2UCxLQUFLaXhDLFlBQ04sT0FBTyxFQUVYLElBQUlsZ0MsRUFBYS9RLEtBQUt5ekMsK0JBQStCamxDLEdBRWpEdTFCLE9BQTBDOStCLEtBRDlDc0ssT0FBOEJ0SyxJQUFoQnNLLEVBQTRCQSxFQUFjLElBQzFCdzBCLFlBQTRCeDBCLEVBQVl3MEIsWUFBY2xpQyxFQUNoRm1QLE9BQTRDL0wsSUFBN0JzSyxFQUFZeUIsYUFBNkJ6QixFQUFZeUIsYUFBZSxFQUNuRjZ5QixHQUE0QyxJQUE3QnQwQixFQUFZczBCLGFBQy9CLE9BQU83akMsS0FBSzROLFVBQVVzM0IsdUJBQXVCbjBCLEVBQVkvUSxLQUFLaXhDLFlBQWFqZ0MsRUFBYzZ5QixFQUFjRSxFQUFhLE9BUXhINEwsRUFBYXZ2QyxVQUFVeXpDLG1CQUFxQixTQUFVdHZDLEdBQ2xELE9BQU92RSxLQUFLNnBDLHVCQUF1QjdwQyxLQUFLNHBDLGNBQWNybEMsS0FPMURvckMsRUFBYXZ2QyxVQUFVMHpDLDJCQUE2QixTQUFVdnZDLEdBQzFELE9BQU92RSxLQUFLeXpDLCtCQUErQnp6QyxLQUFLNHBDLGNBQWNybEMsS0FRbEVvckMsRUFBYXZ2QyxVQUFVd3BDLGNBQWdCLFNBQVVybEMsR0FDN0MsSUFBSXd2QyxFQUFtQi96QyxLQUFLc3hDLFVBQVUwQyx3QkFDbENDLEVBRUosbUJBQW9CMXZDLEVBQ1ksRUFBUTJ2QyxlQUFlLEdBQ3ZCLEVBQ2hDLE1BQU8sQ0FDSEQsRUFBY3ZILFFBQVVxSCxFQUFpQnA2QixLQUN6Q3M2QixFQUFjdEgsUUFBVW9ILEVBQWlCSSxNQVlqRHhFLEVBQWF2dkMsVUFBVWcwQyxVQUFZLFdBQy9CLE9BQW9EcDBDLEtBQUt5SCxJQUFJNHFDLEtBU2pFMUMsRUFBYXZ2QyxVQUFVaTBDLGlCQUFtQixXQUN0QyxJQUFJbDBDLEVBQVNILEtBQUtvMEMsWUFDbEIsWUFBZW52QyxJQUFYOUUsRUFDeUIsaUJBQVhBLEVBQ1I2WCxTQUFTODNCLGVBQWUzdkMsR0FDeEJBLEVBR0MsTUFVZnd2QyxFQUFhdnZDLFVBQVV5cEMsdUJBQXlCLFNBQVVyN0IsR0FDdEQsT0FBT3FVLEdBQWlCN2lCLEtBQUt5ekMsK0JBQStCamxDLEdBQVF4TyxLQUFLczBDLFVBQVVuWSxrQkFRdkZ3VCxFQUFhdnZDLFVBQVVxekMsK0JBQWlDLFNBQVVqbEMsR0FDOUQsSUFBSUcsRUFBYTNPLEtBQUtpeEMsWUFDdEIsT0FBS3RpQyxFQUlNL0ksR0FBZStJLEVBQVd3TSwyQkFBNEIzTSxFQUFNeU0sU0FINUQsTUFZZjAwQixFQUFhdnZDLFVBQVUyeUMsWUFBYyxXQUNqQyxPQUFPL3lDLEtBQUsrdkMsVUFRaEJKLEVBQWF2dkMsVUFBVWt6QyxZQUFjLFdBQ2pDLE9BQU90ekMsS0FBSzh4QyxXQVVoQm5DLEVBQWF2dkMsVUFBVW0wQyxlQUFpQixTQUFVMUwsR0FDOUMsSUFBSXdLLEVBQVVyekMsS0FBSyt4QyxnQkFBZ0JsSixFQUFHcjRCLFlBQ3RDLFlBQW1CdkwsSUFBWm91QyxFQUF3QkEsRUFBVSxNQVU3QzFELEVBQWF2dkMsVUFBVTZ5QyxnQkFBa0IsV0FDckMsT0FBT2p6QyxLQUFLZ3dDLGNBUWhCTCxFQUFhdnZDLFVBQVUreUMsY0FBZ0IsV0FDbkMsT0FBa0NuekMsS0FBS3lILElBQUk0cUMsS0FPL0MxQyxFQUFhdnZDLFVBQVV3b0MsVUFBWSxXQUUvQixPQURhNW9DLEtBQUttekMsZ0JBQWdCdkssYUFNdEMrRyxFQUFhdnZDLFVBQVVvMEMsV0FBYSxXQUVoQyxJQURBLElBQUl4bEMsRUFBbUJoUCxLQUFLbXpDLGdCQUFnQjVtQyxzQkFDbkNwTCxFQUFJLEVBQUdnQixFQUFLNk0sRUFBaUI5TixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQUcsQ0FDdkQsSUFDSWtCLEVBRFEyTSxFQUFpQjdOLEdBQUdvSyxNQUN1QzZDLFlBQ3ZFLEdBQUkvTCxHQUFVQSxFQUFPb3lDLFFBQ2pCLE9BQU8sRUFHZixPQUFPLEdBU1g5RSxFQUFhdnZDLFVBQVVzMEMsdUJBQXlCLFNBQVUzakMsR0FDdEQsSUFBSTRqQyxFQUFpQjd4QixHQUFtQi9SLEVBQVkvUSxLQUFLczBDLFVBQVVuWSxpQkFDbkUsT0FBT244QixLQUFLNDBDLCtCQUErQkQsSUFRL0NoRixFQUFhdnZDLFVBQVV3MEMsK0JBQWlDLFNBQVU3akMsR0FDOUQsSUFBSXBDLEVBQWEzTyxLQUFLaXhDLFlBQ3RCLE9BQUt0aUMsRUFJTS9JLEdBQWUrSSxFQUFXdUwsMkJBQTRCbkosRUFBV2tLLE1BQU0sRUFBRyxJQUgxRSxNQVVmMDBCLEVBQWF2dkMsVUFBVXlPLFlBQWMsV0FDakMsT0FBTzdPLEtBQUs0TixXQVFoQitoQyxFQUFhdnZDLFVBQVUwYixRQUFVLFdBQzdCLE9BQTBEOWIsS0FBS3lILElBQUk0cUMsS0FTdkUxQyxFQUFhdnZDLFVBQVVrMEMsUUFBVSxXQUM3QixPQUE0QnQwQyxLQUFLeUgsSUFBSTRxQyxLQU96QzFDLEVBQWF2dkMsVUFBVTRsQyxZQUFjLFdBQ2pDLE9BQU9obUMsS0FBS3N4QyxXQVNoQjNCLEVBQWF2dkMsVUFBVXkwQyxvQkFBc0IsV0FDekMsT0FBTzcwQyxLQUFLd3hDLG1CQVNoQjdCLEVBQWF2dkMsVUFBVTAwQyw2QkFBK0IsV0FDbEQsT0FBTzkwQyxLQUFLMHhDLDRCQUtoQi9CLEVBQWF2dkMsVUFBVWlzQyxpQkFBbUIsV0FDdEMsSUFBSTBJLEVBQWdCLzBDLEtBQUtxMEMsbUJBQ3pCLE9BQU9VLEVBQWdCQSxFQUFjQyxjQUFnQmg5QixVQVN6RDIzQixFQUFhdnZDLFVBQVUreEMsZ0JBQWtCLFNBQVU3aEMsRUFBTTZZLEVBQWU4ckIsRUFBWXJ3QixHQUNoRixPRnByQkQsU0FBeUJqVyxFQUFZMkIsRUFBTTZZLEVBQWU4ckIsRUFBWXJ3QixHQUd6RSxJQUFLalcsS0FBZ0J3YSxLQUFpQnhhLEVBQVc2YSxhQUM3QyxPQUFPb2pCLEdBRVgsSUFBS2orQixFQUFXNmEsWUFBWUwsR0FBZTdZLEVBQUtnWixVQUM1QyxPQUFPc2pCLEdBUVgsSUFBSW4yQixFQUFTOUgsRUFBV3ZCLFVBQVVxSixPQUM5Qm1ZLEVBQVNxbUIsRUFBVyxHQUFLeCtCLEVBQU8sR0FDaENvWSxFQUFTb21CLEVBQVcsR0FBS3grQixFQUFPLEdBQ3BDLE9BQVEsTUFBUTFOLEtBQUtNLElBQUl1YixHQUNyQjdiLEtBQUtxWCxLQUFLd08sRUFBU0EsRUFBU0MsRUFBU0EsR0FBVWpLLEVFaXFCeEN1dEIsQ0FBZ0JueUMsS0FBS2l4QyxZQUFhM2dDLEVBQU02WSxFQUFlOHJCLEVBQVlyd0IsSUFNOUUrcUIsRUFBYXZ2QyxVQUFVa3dDLG1CQUFxQixTQUFVNEUsRUFBYy92QyxHQUNoRSxJQUFJcEYsRUFBT29GLEdBQVkrdkMsRUFBYW4xQyxLQUNoQ28xQyxFQUFrQixJQUFJLEdBQWdCcDFDLEVBQU1DLEtBQU1rMUMsR0FDdERsMUMsS0FBS28xQyxzQkFBc0JELElBSy9CeEYsRUFBYXZ2QyxVQUFVZzFDLHNCQUF3QixTQUFVRCxHQUNyRCxHQUFLbjFDLEtBQUtpeEMsWUFBVixDQUtBLElBQUkxSCxFQUE2QzRMLEVBQTZCLGNBQzFFcnRDLEVBQVl5aEMsRUFBY3hwQyxLQUM5QixHQUFJK0gsSUFBYyxJQUNkQSxJQUFjckIsR0FDZHFCLElBQWNyQixFQUFtQixDQUNqQyxJQUFJMmxDLEVBQU1wc0MsS0FBS3FzQyxtQkFDWGdKLEVBQVdyMUMsS0FBS3N4QyxVQUFVL0UsWUFDeEJ2c0MsS0FBS3N4QyxVQUFVL0UsY0FDZkgsRUFDRmpzQyxFQUE4Qm9wQyxFQUFvQixPQUN0RCxHQUdBdnBDLEtBQUsweEMsMkJBQTJCOTFCLFNBQVN6YixNQUtuQ2sxQyxJQUFhakosRUFBTUEsRUFBSWtKLGdCQUFrQkQsR0FBVXo1QixTQUFTemIsR0FDOUQsT0FJUixHQURBZzFDLEVBQWdCeG1DLFdBQWEzTyxLQUFLaXhDLGFBQ1UsSUFBeENqeEMsS0FBS3NFLGNBQWM2d0MsR0FFbkIsSUFEQSxJQUFJSSxFQUFvQnYxQyxLQUFLaXpDLGtCQUFrQnRMLFdBQVcxc0IsUUFDakQ5WixFQUFJbzBDLEVBQWtCcjBDLE9BQVMsRUFBR0MsR0FBSyxFQUFHQSxJQUFLLENBQ3BELElBQUl3eEMsRUFBYzRDLEVBQWtCcDBDLEdBQ3BDLEdBQUl3eEMsRUFBWXhOLFdBQWFubEMsTUFDeEIyeUMsRUFBWTZDLGFBQ1p4MUMsS0FBS3EwQyxzQkFHQzFCLEVBQVk5dEMsWUFBWXN3QyxJQUN0QkEsRUFBZ0JsMUMsb0JBQ3pCLFNBUWhCMHZDLEVBQWF2dkMsVUFBVXExQyxpQkFBbUIsV0FDdEMsSUFBSTltQyxFQUFhM08sS0FBS2l4QyxZQVVsQnhuQixFQUFZenBCLEtBQUtreUMsV0FDckIsSUFBS3pvQixFQUFVd2tCLFVBQVcsQ0FDdEIsSUFBSXFCLEVBQWtCdHZDLEtBQUt1d0MsaUJBQ3ZCaEIsRUFBY0QsRUFDbEIsR0FBSTNnQyxFQUFZLENBQ1osSUFBSSttQyxFQUFRL21DLEVBQVdnbkMsVUFDdkIsR0FBSUQsRXBCbDRCTCxJb0JrNEJrQ0EsRXBCajRCaEMsR29CaTRCNkQsQ0FDMUQsSUFBSUUsRUFBbUJ0WixLQUFLQyxNQUFRNXRCLEVBQVc2VyxLQUFPLEVBQ3REOHBCLEVBQWtCc0csRUFBbUIsRUFBSSxFQUN6Q3JHLEVBQWNxRyxFQUFtQixFQUFJLEdBR3pDbnNCLEVBQVUwbEIsa0JBQW9CRyxJQUM5QjdsQixFQUFVZ2xCLGVBQ1ZobEIsRUFBVTRsQixjQUFjQyxFQUFpQkMsS0FHN0M1Z0MsSUFDQTNPLEtBQUtrRixZQUFZLEtBQ2hCeUosRUFBV21hLFNBQ1g5b0IsS0FBS2t5QyxXQUFXL0MsbUJBQ2hCbnZDLEtBQUt3MEMsY0FDTngwQyxLQUFLNE4sVUFBVSsxQixvQkFBb0IsR0FBZ0NoMUIsR0FHdkUsSUFEQSxJQUFJMGEsRUFBc0JycEIsS0FBS2l5QyxxQkFDdEI5d0MsRUFBSSxFQUFHZ0IsRUFBS2tuQixFQUFvQm5vQixPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQ3ZEa29CLEVBQW9CbG9CLEdBQUduQixLQUFNMk8sR0FFakMwYSxFQUFvQm5vQixPQUFTLEdBS2pDeXVDLEVBQWF2dkMsVUFBVW95QyxtQkFBcUIsV0FDcEN4eUMsS0FBS3MwQyxZQUFjdDBDLEtBQUtzMEMsVUFBVXRZLGdCQUNsQ2g4QixLQUFLczBDLFVBQVVyWSxtQkFBbUIsR0FFdENqOEIsS0FBSzZOLFVBS1Q4aEMsRUFBYXZ2QyxVQUFVcXlDLHFCQUF1QixXQUsxQyxJQUFJc0MsRUFJSixHQUhJLzBDLEtBQUtvMEMsY0FDTFcsRUFBZ0IvMEMsS0FBS3EwQyxvQkFFckJyMEMsS0FBSzJ4Qyx3QkFBeUIsQ0FDOUIsSUFBSyxJQUFJeHdDLEVBQUksRUFBR2dCLEVBQUtuQyxLQUFLNnhDLGdCQUFnQjN3QyxPQUFRQyxFQUFJZ0IsSUFBTWhCLEVBQ3hENEUsRUFBYy9GLEtBQUs2eEMsZ0JBQWdCMXdDLElBRXZDbkIsS0FBSzZ4QyxnQkFBa0IsS0FDdkI3eEMsS0FBS3N4QyxVQUFVdnNDLG9CQUFvQjBCLEVBQXVCekcsS0FBS3F3QywwQkFDL0Ryd0MsS0FBS3N4QyxVQUFVdnNDLG9CQUFvQjBCLEVBQWlCekcsS0FBS3F3QywrQkFDOUJwckMsSUFBdkJqRixLQUFLZ3lDLGdCQUNManRDLG9CQUFvQjBCLEVBQWtCekcsS0FBS2d5QyxlQUFlLEdBQzFEaHlDLEtBQUtneUMsbUJBQWdCL3NDLEdBRXpCakYsS0FBSzJ4Qyx3QkFBd0JseEMsVUFDN0JULEtBQUsyeEMsd0JBQTBCLEtBQy9CaDVCLEdBQVczWSxLQUFLc3hDLFdBRXBCLEdBQUt5RCxFQWFBLENBTUQsSUFBSyxJQUFJenlDLEtBTFR5eUMsRUFBY3I3QixZQUFZMVosS0FBS3N4QyxXQUMxQnR4QyxLQUFLNE4sWUFDTjVOLEtBQUs0TixVQUFZNU4sS0FBS21QLGtCQUUxQm5QLEtBQUsyeEMsd0JBQTBCLElBQUksR0FBdUIzeEMsS0FBTUEsS0FBS2dyQyxnQkFDckQsR0FDWmhyQyxLQUFLMnhDLHdCQUF3QjF0QyxpQkFBaUIsR0FBb0IzQixHQUFNdEMsS0FBS28xQyxzQkFBc0IxdkMsS0FBSzFGLE9BRTVHQSxLQUFLc3hDLFVBQVVydEMsaUJBQWlCd0MsRUFBdUJ6RyxLQUFLcXdDLDBCQUEwQixHQUN0RnJ3QyxLQUFLc3hDLFVBQVVydEMsaUJBQWlCd0MsRUFBaUJ6RyxLQUFLcXdDLDJCQUEwQnQ5QixJQUEwQixDQUFFQyxTQUFTLElBQ3JILElBQUk2OEIsRUFBdUI3dkMsS0FBSzR4QyxxQkFFMUI1eEMsS0FBSzR4QyxxQkFETG1ELEVBRU4vMEMsS0FBSzZ4QyxnQkFBa0IsQ0FDbkJ0c0MsRUFBT3NxQyxFQUFxQnBwQyxFQUFtQnpHLEtBQUtzd0MsbUJBQW9CdHdDLE1BQ3hFdUYsRUFBT3NxQyxFQUFxQnBwQyxFQUFvQnpHLEtBQUtzd0MsbUJBQW9CdHdDLE9BRXhFQSxLQUFLZ3lDLGdCQUNOaHlDLEtBQUtneUMsY0FBZ0JoeUMsS0FBSzYxQyxXQUFXbndDLEtBQUsxRixNQUMxQ2lULE9BQU9oUCxpQkFBaUJ3QyxFQUFrQnpHLEtBQUtneUMsZUFBZSxTQWhDOURoeUMsS0FBSzROLFlBQ0xrK0IsYUFBYTlyQyxLQUFLMHdDLDBCQUNsQjF3QyxLQUFLMHdDLDhCQUEyQnpyQyxFQUNoQ2pGLEtBQUtpeUMscUJBQXFCL3dDLE9BQVMsRUFDbkNsQixLQUFLNE4sVUFBVW5OLFVBQ2ZULEtBQUs0TixVQUFZLE1BRWpCNU4sS0FBSzJ3QyxxQkFDTHpULHFCQUFxQmw5QixLQUFLMndDLG9CQUMxQjN3QyxLQUFLMndDLHdCQUFxQjFyQyxHQTBCbENqRixLQUFLNjFDLGNBT1RsRyxFQUFhdnZDLFVBQVVneUMsa0JBQW9CLFdBQ3ZDcHlDLEtBQUs2TixVQUtUOGhDLEVBQWF2dkMsVUFBVTAxQywyQkFBNkIsV0FDaEQ5MUMsS0FBSzZOLFVBS1Q4aEMsRUFBYXZ2QyxVQUFVbXlDLG1CQUFxQixXQUNwQ3Z5QyxLQUFLbXhDLDJCQUNMcHJDLEVBQWMvRixLQUFLbXhDLDBCQUNuQm54QyxLQUFLbXhDLHlCQUEyQixNQUVoQ254QyxLQUFLb3hDLHlCQUNMcnJDLEVBQWMvRixLQUFLb3hDLHdCQUNuQnB4QyxLQUFLb3hDLHVCQUF5QixNQUVsQyxJQUFJakIsRUFBT253QyxLQUFLczBDLFVBQ1puRSxJQUNBbndDLEtBQUsrMUMsc0JBQ0wvMUMsS0FBS214Qyx5QkFBMkI1ckMsRUFBTzRxQyxFQUFNcG9DLEVBQWdDL0gsS0FBSzgxQywyQkFBNEI5MUMsTUFDOUdBLEtBQUtveEMsdUJBQXlCN3JDLEVBQU80cUMsRUFBTTFwQyxFQUFrQnpHLEtBQUs4MUMsMkJBQTRCOTFDLE1BQzlGbXdDLEVBQUtsVSxtQkFBbUIsSUFFNUJqOEIsS0FBSzZOLFVBS1Q4aEMsRUFBYXZ2QyxVQUFVa3lDLHlCQUEyQixXQUMxQ3R5QyxLQUFLcXhDLGtDQUNMcnhDLEtBQUtxeEMsZ0NBQWdDenZCLFFBQVE3YixHQUM3Qy9GLEtBQUtxeEMsZ0NBQWtDLE1BRTNDLElBQUluQixFQUFhbHdDLEtBQUttekMsZ0JBQ2xCakQsSUFDQWx3QyxLQUFLcXhDLGdDQUFrQyxDQUNuQzlyQyxFQUFPMnFDLEVBQVlub0MsRUFBZ0MvSCxLQUFLNk4sT0FBUTdOLE1BQ2hFdUYsRUFBTzJxQyxFQUFZenBDLEVBQWtCekcsS0FBSzZOLE9BQVE3TixRQUcxREEsS0FBSzZOLFVBS1Q4aEMsRUFBYXZ2QyxVQUFVNDFDLFdBQWEsV0FDaEMsUUFBU2gyQyxLQUFLaXhDLGFBTWxCdEIsRUFBYXZ2QyxVQUFVNjFDLFdBQWEsV0FDNUJqMkMsS0FBSzJ3QyxvQkFDTHpULHFCQUFxQmw5QixLQUFLMndDLG9CQUU5QjN3QyxLQUFLNHdDLG1CQUtUakIsRUFBYXZ2QyxVQUFVeWxDLFdBQWEsV0FFaEMsSUFEQSxJQUFJcEIsRUFBY3prQyxLQUFLbXpDLGdCQUFnQjVtQyxzQkFDOUJwTCxFQUFJLEVBQUdnQixFQUFLc2lDLEVBQVl2akMsT0FBUUMsRUFBSWdCLElBQU1oQixFQUFHLENBQ2xELElBQUlvSyxFQUFRazVCLEVBQVl0akMsR0FBR29LLE1BQ3ZCQSxFQUFNNkQsZUFDTjdELEVBQU1zRCxjQUFjdUMsdUJBUWhDdStCLEVBQWF2dkMsVUFBVXlOLE9BQVMsV0FDeEI3TixLQUFLNE4sZ0JBQXlDM0ksSUFBNUJqRixLQUFLMndDLHFCQUN2QjN3QyxLQUFLMndDLG1CQUFxQjNTLHNCQUFzQmgrQixLQUFLNHdDLG1CQVU3RGpCLEVBQWF2dkMsVUFBVTgxQyxjQUFnQixTQUFVeEQsR0FDN0MsT0FBTzF5QyxLQUFLK3lDLGNBQWM5SyxPQUFPeUssSUFTckMvQyxFQUFhdnZDLFVBQVUrMUMsa0JBQW9CLFNBQVV4RCxHQUNqRCxPQUFPM3lDLEtBQUtpekMsa0JBQWtCaEwsT0FBTzBLLElBU3pDaEQsRUFBYXZ2QyxVQUFVZzJDLFlBQWMsU0FBVTdxQyxHQUUzQyxPQURhdkwsS0FBS216QyxnQkFBZ0J2SyxZQUNwQlgsT0FBTzE4QixJQVN6Qm9rQyxFQUFhdnZDLFVBQVVpMkMsY0FBZ0IsU0FBVWhELEdBQzdDLE9BQU9yekMsS0FBS3N6QyxjQUFjckwsT0FBT29MLElBTXJDMUQsRUFBYXZ2QyxVQUFVeXdDLGFBQWUsU0FBVXJyQixHQUM1QyxJL0QzaUNjelosRUFBUWtKLEUrRDJpQ2xCclIsRUFBUTVELEtBQ1IyVyxFQUFPM1csS0FBSzhiLFVBQ1pxMEIsRUFBT253QyxLQUFLczBDLFVBQ1pnQyxFQUFxQnQyQyxLQUFLaXhDLFlBRTFCdGlDLEVBQWEsS0FDakIsUUFBYTFKLElBQVQwUixHQUFzQjg0QixHQUFROTRCLElBQVN3NUIsR0FBUUEsRUFBS3BVLFFBQVMsQ0FDN0QsSUFBSTRaLEVBQVl4RixFQUFLMVIsU0FBU3orQixLQUFLaXhDLFlBQWNqeEMsS0FBS2l4QyxZQUFZMEUsZUFBWTF3QyxHQUMxRW1JLEVBQVkraUMsRUFBSzloQyxXQUNyQk0sRUFBYSxDQUNUbWEsU0FBUyxFQUNUNU8sMkJBQTRCbGEsS0FBSzh3Qyw0QkFDakN5RixjQUFlLEtBQ2Z4cUMsT0FBUXlLLEdBQWtCcEosRUFBVXFKLE9BQVFySixFQUFVQyxXQUFZRCxFQUFVc0osU0FBVUMsR0FDdEZ0UixNQUFPckYsS0FBS2d4QyxjQUNaNXNCLFdBQVksRUFDWnBWLGlCQUFrQmhQLEtBQUttekMsZ0JBQWdCNW1DLHNCQUN2Q3VPLFdBQVk5YSxLQUFLeXdDLFlBQ2pCdDFCLDJCQUE0Qm5iLEtBQUsrd0MsNEJBQ2pDMW5CLG9CQUFxQixHQUNyQjFTLEtBQU1BLEVBQ044UyxVQUFXenBCLEtBQUtreUMsV0FDaEIxc0IsS0FBTUEsRUFDTjZDLFVBQVcsR0FDWGpiLFVBQVdBLEVBQ1h1b0MsVUFBV0EsRUFDWG5zQixZQUFhLElBR3JCeHBCLEtBQUtpeEMsWUFBY3RpQyxFQUNuQjNPLEtBQUs0TixVQUFVbUIsWUFBWUosR0FDdkJBLElBQ0lBLEVBQVdtYSxTQUNYOW9CLEtBQUs2TixTQUVUdE0sTUFBTW5CLFVBQVUwQyxLQUFLOEMsTUFBTTVGLEtBQUtpeUMscUJBQXNCdGpDLEVBQVcwYSxxQkFDN0RpdEIsS0FDaUJ0MkMsS0FBS2t4QyxrQkFDaEIsR0FBUWx4QyxLQUFLa3hDLG1CQUNWLEdBQU92aUMsRUFBVzVDLE9BQVEvTCxLQUFLa3hDLG9CQUVwQ2x4QyxLQUFLc0UsY0FBYyxJQUFJLEdMem9DNUIsWUt5b0M2RHRFLEtBQU1zMkMsSUFDOUR0MkMsS0FBS2t4QyxnQkFBa0JoOEIsR0FBb0JsVixLQUFLa3hDLGtCQUc3Q2x4QyxLQUFLa3hDLGtCQUNYdmlDLEVBQVdnbkMsVXBCenBDYixLb0IwcENFaG5DLEVBQVdnbkMsVXBCenBDWCxLb0IwcENBLEdBQU9obkMsRUFBVzVDLE9BQVEvTCxLQUFLa3hDLG1CQUVoQ2x4QyxLQUFLc0UsY0FBYyxJQUFJLEdMNW9DMUIsVUs0b0N5RHRFLEtBQU0yTyxJL0Q3bEN0RDVDLEUrRDhsQ0E0QyxFQUFXNUMsUS9EOWxDSGtKLEUrRDhsQ1dqVixLQUFLa3hDLGtCL0Q1bEN0Q2o4QixFQUFXLEdBQUtsSixFQUFPLEdBQ3ZCa0osRUFBVyxHQUFLbEosRUFBTyxHQUN2QmtKLEVBQVcsR0FBS2xKLEVBQU8sR0FDdkJrSixFQUFXLEdBQUtsSixFQUFPLElBSWhCQSxFQUFPa1AsVStEd2xDZGpiLEtBQUtzRSxjQUFjLElBQUksR0FBU2t5QyxHQUF5QngyQyxLQUFNMk8sSUFDMUQzTyxLQUFLMHdDLDJCQUNOMXdDLEtBQUswd0MseUJBQTJCMVosWUFBVyxXQUN2Q3B6QixFQUFNOHNDLDhCQUEyQnpyQyxFQUNqQ3JCLEVBQU02eEMscUJBQ1AsS0FTWDlGLEVBQWF2dkMsVUFBVXEyQyxjQUFnQixTQUFVdkcsR0FDN0Nsd0MsS0FBS2tJLElBQUltcUMsR0FBd0JuQyxJQVFyQ1AsRUFBYXZ2QyxVQUFVa2pDLFFBQVUsU0FBVTNzQixHQUN2QzNXLEtBQUtrSSxJQUFJbXFDLEdBQWtCMTdCLElBUy9CZzVCLEVBQWF2dkMsVUFBVW16QyxVQUFZLFNBQVVwekMsR0FDekNILEtBQUtrSSxJQUFJbXFDLEdBQW9CbHlDLElBUWpDd3ZDLEVBQWF2dkMsVUFBVXMyQyxRQUFVLFNBQVV2RyxHQUN2Q253QyxLQUFLa0ksSUFBSW1xQyxHQUFrQmxDLElBTy9CUixFQUFhdnZDLFVBQVV5MUMsV0FBYSxXQUNoQyxJQUFJZCxFQUFnQi8wQyxLQUFLcTBDLG1CQUNyQjE5QixPQUFPMVIsRUFDWCxHQUFJOHZDLEVBQWUsQ0FDZixJQUFJNEIsRUFBZ0JDLGlCQUFpQjdCLEdBQ2pDNzhCLEVBQVE2OEIsRUFBYzhCLFlBQ3RCQyxXQUFXSCxFQUErQixpQkFDMUNHLFdBQVdILEVBQTJCLGFBQ3RDRyxXQUFXSCxFQUE0QixjQUN2Q0csV0FBV0gsRUFBZ0Msa0JBQzNDeCtCLEVBQVM0OEIsRUFBY2dDLGFBQ3ZCRCxXQUFXSCxFQUE4QixnQkFDekNHLFdBQVdILEVBQTBCLFlBQ3JDRyxXQUFXSCxFQUE2QixlQUN4Q0csV0FBV0gsRUFBaUMsbUJBQzNDM29CLE1BQU05VixJQUFXOFYsTUFBTTdWLElBRW5CczNCLEdBREw5NEIsRUFBTyxDQUFDdUIsRUFBT0MsS0FHWHN0QixRQUFRQyxLQUFLLHFFQUl6QjFsQyxLQUFLc2pDLFFBQVEzc0IsR0FDYjNXLEtBQUsrMUMsdUJBTVRwRyxFQUFhdnZDLFVBQVUyMUMsb0JBQXNCLFdBQ3pDLElBQUk1RixFQUFPbndDLEtBQUtzMEMsVUFDaEIsR0FBSW5FLEVBQU0sQ0FDTixJQUFJeDVCLE9BQU8xUixFQUNQMHhDLEVBQWdCQyxpQkFBaUI1MkMsS0FBS3N4QyxXQUN0Q3FGLEVBQWN6K0IsT0FBU3krQixFQUFjeCtCLFNBQ3JDeEIsRUFBTyxDQUNIcWdDLFNBQVNMLEVBQWN6K0IsTUFBTyxJQUM5QjgrQixTQUFTTCxFQUFjeCtCLE9BQVEsTUFHdkNnNEIsRUFBSy9SLGdCQUFnQnpuQixLQUd0Qmc1QixFQXJuQ3NCLENBc25DL0IsR0N2d0NGLElBQUksR0FBd0MsV0FDeEMsSUFBSWh0QyxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBZ0s1QyxTQXRHNkIsU0FBVUcsR0FLbkMsU0FBU3d6QyxFQUFRM3NDLEdBQ2IsSUFBSTFHLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQUM3QnVtQyxFQUFVajhCLEVBQVFpOEIsUUE4QnRCLE9BN0JJQSxHQUFZajhCLEVBQVFuSyxRQUFXb21DLEVBQVFqdEIsTUFBTW00QixnQkFDN0NsTCxFQUFRanRCLE1BQU1tNEIsY0FBZ0IsUUFNbEM3dEMsRUFBTTJpQyxRQUFVQSxHQUFvQixLQUtwQzNpQyxFQUFNc3pDLFFBQVUsS0FLaEJ0ekMsRUFBTTgvQixLQUFPLEtBS2I5L0IsRUFBTXV6QyxhQUFlLEdBQ2pCN3NDLEVBQVF1RCxTQUNSakssRUFBTWlLLE9BQVN2RCxFQUFRdUQsUUFFdkJ2RCxFQUFRbkssUUFDUnlELEVBQU0ydkMsVUFBVWpwQyxFQUFRbkssUUFFckJ5RCxFQStEWCxPQW5HQSxHQUFVcXpDLEVBQVN4ekMsR0F5Q25Cd3pDLEVBQVE3MkMsVUFBVU0sZ0JBQWtCLFdBQ2hDaVksR0FBVzNZLEtBQUt1bUMsU0FDaEI5aUMsRUFBT3JELFVBQVVNLGdCQUFnQjBDLEtBQUtwRCxPQU8xQ2kzQyxFQUFRNzJDLFVBQVUra0MsT0FBUyxXQUN2QixPQUFPbmxDLEtBQUswakMsTUFTaEJ1VCxFQUFRNzJDLFVBQVUyTixPQUFTLFNBQVVELEdBQzdCOU4sS0FBSzBqQyxNQUNML3FCLEdBQVczWSxLQUFLdW1DLFNBRXBCLElBQUssSUFBSXBsQyxFQUFJLEVBQUdnQixFQUFLbkMsS0FBS20zQyxhQUFhajJDLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFDckQ0RSxFQUFjL0YsS0FBS20zQyxhQUFhaDJDLElBRXBDbkIsS0FBS20zQyxhQUFhajJDLE9BQVMsRUFDM0JsQixLQUFLMGpDLEtBQU81MUIsRUFDUjlOLEtBQUswakMsUUFDUTFqQyxLQUFLazNDLFFBQ1psM0MsS0FBS2szQyxRQUNMcHBDLEVBQUlnbkMsZ0NBQ0hwN0IsWUFBWTFaLEtBQUt1bUMsU0FDcEJ2bUMsS0FBSzZOLFNBQVcvTCxHQUNoQjlCLEtBQUttM0MsYUFBYXIwQyxLQUFLeUMsRUFBT3VJLEVBQUswb0MsR0FBeUJ4MkMsS0FBSzZOLE9BQVE3TixPQUU3RThOLEVBQUlELFdBUVpvcEMsRUFBUTcyQyxVQUFVeU4sT0FBUyxTQUFVdXBDLEtBVXJDSCxFQUFRNzJDLFVBQVVtekMsVUFBWSxTQUFVcHpDLEdBQ3BDSCxLQUFLazNDLFFBQ2lCLGlCQUFYLzJDLEVBQXNCNlgsU0FBUzgzQixlQUFlM3ZDLEdBQVVBLEdBRWhFODJDLEVBcEdpQixDQXFHMUIsR0MvSkYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJdDBDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FrVjVDLFNBdlJpQyxTQUFVRyxHQUt2QyxTQUFTNHpDLEVBQVk5bkMsR0FDakIsSUFBSTNMLEVBQVE1RCxLQUNSc0ssRUFBVWlGLEdBQTRCLElBQzFDM0wsRUFBUUgsRUFBT0wsS0FBS3BELEtBQU0sQ0FDdEJ1bUMsUUFBU3Z1QixTQUFTQyxjQUFjLE9BQ2hDcEssT0FBUXZELEVBQVF1RCxPQUNoQjFOLE9BQVFtSyxFQUFRbkssVUFDZEgsTUFLQXMzQyxXQUFhdC9CLFNBQVNDLGNBQWMsTUFLMUNyVSxFQUFNMnpDLGdCQUNvQnR5QyxJQUF0QnFGLEVBQVFrdEMsV0FBMEJsdEMsRUFBUWt0QyxVQUs5QzV6QyxFQUFNNnpDLGVBQWlCN3pDLEVBQU0yekMsV0FLN0IzekMsRUFBTTh6QywwQkFBK0N6eUMsSUFBeEJxRixFQUFRcXRDLFlBS3JDL3pDLEVBQU1nMEMsa0JBQ3NCM3lDLElBQXhCcUYsRUFBUXF0QyxhQUE0QnJ0QyxFQUFRcXRDLFlBQzNDL3pDLEVBQU1nMEMsZUFDUGgwQyxFQUFNMnpDLFlBQWEsR0FFdkIsSUFBSXRzQyxPQUFrQ2hHLElBQXRCcUYsRUFBUVcsVUFBMEJYLEVBQVFXLFVBQVksaUJBQ2xFNHNDLE9BQWdDNXlDLElBQXJCcUYsRUFBUXV0QyxTQUF5QnZ0QyxFQUFRdXRDLFNBQVcsZUFDL0RDLE9BQThDN3lDLElBQTVCcUYsRUFBUXd0QyxnQkFDeEJ4dEMsRUFBUXd0QyxnQkFDUjdzQyxFQUFZLFVBQ2Q4c0MsT0FBMEM5eUMsSUFBMUJxRixFQUFReXRDLGNBQThCenRDLEVBQVF5dEMsY0FBZ0IsSUFDOUVDLE9BQWtEL3lDLElBQTlCcUYsRUFBUTB0QyxrQkFDMUIxdEMsRUFBUTB0QyxrQkFDUi9zQyxFQUFZLFlBQ1csaUJBQWxCOHNDLEdBS1BuMEMsRUFBTXEwQyxlQUFpQmpnQyxTQUFTQyxjQUFjLFFBQzlDclUsRUFBTXEwQyxlQUFlQyxZQUFjSCxFQUNuQ24wQyxFQUFNcTBDLGVBQWVodEMsVUFBWStzQyxHQUdqQ3AwQyxFQUFNcTBDLGVBQWlCRixFQUUzQixJQUFJSSxPQUEwQmx6QyxJQUFsQnFGLEVBQVE2dEMsTUFBc0I3dEMsRUFBUTZ0QyxNQUFRLElBQ3JDLGlCQUFWQSxHQUtQdjBDLEVBQU13MEMsT0FBU3BnQyxTQUFTQyxjQUFjLFFBQ3RDclUsRUFBTXcwQyxPQUFPRixZQUFjQyxFQUMzQnYwQyxFQUFNdzBDLE9BQU9udEMsVUFBWTZzQyxHQUd6QmwwQyxFQUFNdzBDLE9BQVNELEVBRW5CLElBQUlFLEVBQWN6MEMsRUFBTWcwQyxlQUFpQmgwQyxFQUFNMnpDLFdBQWEzekMsRUFBTXEwQyxlQUFpQnIwQyxFQUFNdzBDLE9BS3pGeDBDLEVBQU0wMEMsY0FBZ0J0Z0MsU0FBU0MsY0FBYyxVQUM3Q3JVLEVBQU0wMEMsY0FBY0MsYUFBYSxPQUFRLFVBQ3pDMzBDLEVBQU0wMEMsY0FBY0MsYUFBYSxnQkFBaUJsMUMsUUFBUU8sRUFBTTJ6QyxhQUNoRTN6QyxFQUFNMDBDLGNBQWNFLE1BQVFYLEVBQzVCajBDLEVBQU0wMEMsY0FBYzUrQixZQUFZMitCLEdBQ2hDejBDLEVBQU0wMEMsY0FBY3IwQyxpQkFBaUJ3QyxFQUFpQjdDLEVBQU02MEMsYUFBYS95QyxLQUFLOUIsSUFBUSxHQUN0RixJQUFJODBDLEVBQWF6dEMsc0JBSWJxNkIsSUFDQzFoQyxFQUFNMnpDLFlBQWMzekMsRUFBTWcwQyxhQUFlLGdCQUF3QixLQUNqRWgwQyxFQUFNZzBDLGFBQWUsR0FBSyxxQkFDM0JyUixFQUFVM2lDLEVBQU0yaUMsUUFlcEIsT0FkQUEsRUFBUXQ3QixVQUFZeXRDLEVBQ3BCblMsRUFBUTdzQixZQUFZOVYsRUFBTTAwQyxlQUMxQi9SLEVBQVE3c0IsWUFBWTlWLEVBQU0wekMsWUFNMUIxekMsRUFBTSswQyxzQkFBd0IsR0FLOUIvMEMsRUFBTXdpQyxrQkFBbUIsRUFDbEJ4aUMsRUF1S1gsT0FwUkEsR0FBVXl6QyxFQUFhNXpDLEdBcUh2QjR6QyxFQUFZajNDLFVBQVV3NEMsMkJBQTZCLFNBQVVqcUMsR0FhekQsSUFSQSxJQUFJa3FDLEVBQVMsR0FLVEMsRUFBc0IsR0FDdEJuQixHQUFjLEVBQ2Qzb0MsRUFBbUJMLEVBQVdLLGlCQUN6QjdOLEVBQUksRUFBR2dCLEVBQUs2TSxFQUFpQjlOLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFBRyxDQUN2RCxJQUFJZ00sRUFBYTZCLEVBQWlCN04sR0FDbEMsR0FBSytMLEdBQU9DLEVBQVl3QixFQUFXdkIsV0FBbkMsQ0FHQSxJQUFJL0ssRUFBNkQ4SyxFQUFnQixNQUFFaUIsWUFDbkYsR0FBSy9MLEVBQUwsQ0FHQSxJQUFJMDJDLEVBQW9CMTJDLEVBQU8yMkMsa0JBQy9CLEdBQUtELEVBQUwsQ0FHQSxJQUFJRSxFQUFlRixFQUFrQnBxQyxHQUNyQyxHQUFLc3FDLEVBS0wsR0FGQXRCLEVBQ0lBLElBQXVELElBQXhDdDFDLEVBQU82MkMsNkJBQ3RCMzNDLE1BQU1DLFFBQVF5M0MsR0FDZCxJQUFLLElBQUk1cEIsRUFBSSxFQUFHZ0csRUFBSzRqQixFQUFhLzNDLE9BQVFtdUIsRUFBSWdHLElBQU1oRyxFQUMxQzRwQixFQUFhNXBCLEtBQU13cEIsSUFDckJDLEVBQW9CaDJDLEtBQUttMkMsRUFBYTVwQixJQUN0Q3dwQixFQUFPSSxFQUFhNXBCLEtBQU0sUUFLNUI0cEIsS0FBZ0JKLElBQ2xCQyxFQUFvQmgyQyxLQUFLbTJDLEdBQ3pCSixFQUFPSSxJQUFnQixNQU9uQyxPQUhLajVDLEtBQUswM0Msc0JBQ04xM0MsS0FBS201QyxlQUFleEIsR0FFakJtQixHQU1YekIsRUFBWWozQyxVQUFVZzVDLGVBQWlCLFNBQVV6cUMsR0FDN0MsR0FBS0EsRUFBTCxDQU9BLElBQUlzcUMsRUFBZWo1QyxLQUFLNDRDLDJCQUEyQmpxQyxHQUMvQ2xFLEVBQVV3dUMsRUFBYS8zQyxPQUFTLEVBS3BDLEdBSklsQixLQUFLb21DLGtCQUFvQjM3QixJQUN6QnpLLEtBQUt1bUMsUUFBUWp0QixNQUFNeXRCLFFBQVV0OEIsRUFBVSxHQUFLLE9BQzVDekssS0FBS29tQyxpQkFBbUIzN0IsSUFFeEJoSixFQUFPdzNDLEVBQWNqNUMsS0FBSzI0Qyx1QkFBOUIsRS9EN0tELFNBQXdCLy9CLEdBQzNCLEtBQU9BLEVBQUt5Z0MsV0FDUnpnQyxFQUFLQyxZQUFZRCxFQUFLeWdDLFcrRDhLdEJDLENBQWV0NUMsS0FBS3MzQyxZQUVwQixJQUFLLElBQUluMkMsRUFBSSxFQUFHZ0IsRUFBSzgyQyxFQUFhLzNDLE9BQVFDLEVBQUlnQixJQUFNaEIsRUFBRyxDQUNuRCxJQUFJb2xDLEVBQVV2dUIsU0FBU0MsY0FBYyxNQUNyQ3N1QixFQUFRZ1QsVUFBWU4sRUFBYTkzQyxHQUNqQ25CLEtBQUtzM0MsV0FBVzU5QixZQUFZNnNCLEdBRWhDdm1DLEtBQUsyNEMsc0JBQXdCTSxRQXRCckJqNUMsS0FBS29tQyxtQkFDTHBtQyxLQUFLdW1DLFFBQVFqdEIsTUFBTXl0QixRQUFVLE9BQzdCL21DLEtBQUtvbUMsa0JBQW1CLElBMEJwQ2lSLEVBQVlqM0MsVUFBVXE0QyxhQUFlLFNBQVVsMEMsR0FDM0NBLEVBQU1sRSxpQkFDTkwsS0FBS3c1QyxnQkFDTHg1QyxLQUFLeTNDLGVBQWlCejNDLEtBQUt1M0MsWUFLL0JGLEVBQVlqM0MsVUFBVW81QyxjQUFnQixXQUNsQ3g1QyxLQUFLdW1DLFFBQVFrVCxVQUFVQyxPbEJ6TkYsZ0JrQjBOakIxNUMsS0FBS3UzQyxXQUNMbC9CLEdBQVlyWSxLQUFLaTRDLGVBQWdCajRDLEtBQUtvNEMsUUFHdEMvL0IsR0FBWXJZLEtBQUtvNEMsT0FBUXA0QyxLQUFLaTRDLGdCQUVsQ2o0QyxLQUFLdTNDLFlBQWN2M0MsS0FBS3UzQyxXQUN4QnYzQyxLQUFLczRDLGNBQWNDLGFBQWEsZ0JBQWlCbDFDLFFBQVFyRCxLQUFLdTNDLGNBT2xFRixFQUFZajNDLFVBQVV1NUMsZUFBaUIsV0FDbkMsT0FBTzM1QyxLQUFLNDNDLGNBT2hCUCxFQUFZajNDLFVBQVUrNEMsZUFBaUIsU0FBVXhCLEdBQ3pDMzNDLEtBQUs0M0MsZUFBaUJELElBRzFCMzNDLEtBQUs0M0MsYUFBZUQsRUFDcEIzM0MsS0FBS3VtQyxRQUFRa1QsVUFBVUMsT0FBTyxvQkFDMUIxNUMsS0FBS3kzQyxnQkFDTHozQyxLQUFLdzVDLGtCQVVibkMsRUFBWWozQyxVQUFVdzVDLGFBQWUsU0FBVXBDLEdBQzNDeDNDLEtBQUt5M0MsZUFBaUJELEVBQ2pCeDNDLEtBQUs0M0MsY0FBZ0I1M0MsS0FBS3UzQyxhQUFlQyxHQUc5Q3gzQyxLQUFLdzVDLGlCQVFUbkMsRUFBWWozQyxVQUFVeTVDLGFBQWUsV0FDakMsT0FBTzc1QyxLQUFLdTNDLFlBT2hCRixFQUFZajNDLFVBQVV5TixPQUFTLFNBQVV1cEMsR0FDckNwM0MsS0FBS281QyxlQUFlaEMsRUFBU3pvQyxhQUUxQjBvQyxFQXJScUIsQ0FzUjlCLElDalZGLElBQUksR0FBd0MsV0FDeEMsSUFBSTEwQyxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBZ0w1QyxTQWxJNEIsU0FBVUcsR0FLbEMsU0FBU3EyQyxFQUFPdnFDLEdBQ1osSUFBSTNMLEVBQVE1RCxLQUNSc0ssRUFBVWlGLEdBQTRCLEdBQzFDM0wsRUFBUUgsRUFBT0wsS0FBS3BELEtBQU0sQ0FDdEJ1bUMsUUFBU3Z1QixTQUFTQyxjQUFjLE9BQ2hDcEssT0FBUXZELEVBQVF1RCxPQUNoQjFOLE9BQVFtSyxFQUFRbkssVUFDZEgsS0FDTixJQUFJaUwsT0FBa0NoRyxJQUF0QnFGLEVBQVFXLFVBQTBCWCxFQUFRVyxVQUFZLFlBQ2xFa3RDLE9BQTBCbHpDLElBQWxCcUYsRUFBUTZ0QyxNQUFzQjd0QyxFQUFRNnRDLE1BQVEsSUFDdEQ0QixPQUFnRDkwQyxJQUE3QnFGLEVBQVF5dkMsaUJBQ3pCenZDLEVBQVF5dkMsaUJBQ1IsYUFLTm4yQyxFQUFNdzBDLE9BQVMsS0FDTSxpQkFBVkQsR0FDUHYwQyxFQUFNdzBDLE9BQVNwZ0MsU0FBU0MsY0FBYyxRQUN0Q3JVLEVBQU13MEMsT0FBT250QyxVQUFZOHVDLEVBQ3pCbjJDLEVBQU13MEMsT0FBT0YsWUFBY0MsSUFHM0J2MEMsRUFBTXcwQyxPQUFTRCxFQUNmdjBDLEVBQU13MEMsT0FBT3FCLFVBQVV4NEIsSUFBSTg0QixJQUUvQixJQUFJbEMsRUFBV3Z0QyxFQUFRdXRDLFNBQVd2dEMsRUFBUXV0QyxTQUFXLGlCQUNqRDFMLEVBQVNuMEIsU0FBU0MsY0FBYyxVQUNwQ2swQixFQUFPbGhDLFVBQVlBLEVBQVksU0FDL0JraEMsRUFBT29NLGFBQWEsT0FBUSxVQUM1QnBNLEVBQU9xTSxNQUFRWCxFQUNmMUwsRUFBT3p5QixZQUFZOVYsRUFBTXcwQyxRQUN6QmpNLEVBQU9sb0MsaUJBQWlCd0MsRUFBaUI3QyxFQUFNNjBDLGFBQWEveUMsS0FBSzlCLElBQVEsR0FDekUsSUFBSTgwQyxFQUFhenRDLHNCQUE2Q3E2QixHQUMxRGlCLEVBQVUzaUMsRUFBTTJpQyxRQXNCcEIsT0FyQkFBLEVBQVF0N0IsVUFBWXl0QyxFQUNwQm5TLEVBQVE3c0IsWUFBWXl5QixHQUNwQnZvQyxFQUFNbzJDLGdCQUFrQjF2QyxFQUFRMnZDLFdBQWEzdkMsRUFBUTJ2QyxnQkFBYWgxQyxFQUtsRXJCLEVBQU1zMkMsZUFBaUNqMUMsSUFBckJxRixFQUFRb3lCLFNBQXlCcHlCLEVBQVFveUIsU0FBVyxJQUt0RTk0QixFQUFNdTJDLGVBQWlDbDFDLElBQXJCcUYsRUFBUTh2QyxVQUF5Qjl2QyxFQUFROHZDLFNBSzNEeDJDLEVBQU15MkMsZUFBWXAxQyxFQUNkckIsRUFBTXUyQyxXQUNOdjJDLEVBQU0yaUMsUUFBUWtULFVBQVV4NEIsSUFBSW9rQixJQUV6QnpoQyxFQWtFWCxPQS9IQSxHQUFVazJDLEVBQVFyMkMsR0FtRWxCcTJDLEVBQU8xNUMsVUFBVXE0QyxhQUFlLFNBQVVsMEMsR0FDdENBLEVBQU1sRSxzQkFDdUI0RSxJQUF6QmpGLEtBQUtnNkMsZ0JBQ0xoNkMsS0FBS2c2QyxrQkFHTGg2QyxLQUFLczZDLGVBTWJSLEVBQU8xNUMsVUFBVWs2QyxZQUFjLFdBQzNCLElBQ0luSyxFQURNbndDLEtBQUttbEMsU0FDQW1QLFVBQ2YsR0FBS25FLEVBQUwsQ0FLQSxJQUFJejVCLEVBQVd5NUIsRUFBS3RVLG1CQUNINTJCLElBQWJ5UixJQUNJMVcsS0FBS2s2QyxVQUFZLEdBQUt4akMsR0FBWSxFQUFJM04sS0FBS2tCLEtBQVEsRUFDbkRrbUMsRUFBS3JuQixRQUFRLENBQ1RwUyxTQUFVLEVBQ1ZnbUIsU0FBVTE4QixLQUFLazZDLFVBQ2Z2ZCxPQUFRMVEsS0FJWmtrQixFQUFLcFYsWUFBWSxNQVM3QitlLEVBQU8xNUMsVUFBVXlOLE9BQVMsU0FBVXVwQyxHQUNoQyxJQUFJem9DLEVBQWF5b0MsRUFBU3pvQyxXQUMxQixHQUFLQSxFQUFMLENBR0EsSUFBSStILEVBQVcvSCxFQUFXdkIsVUFBVXNKLFNBQ3BDLEdBQUlBLEdBQVkxVyxLQUFLcTZDLFVBQVcsQ0FDNUIsSUFBSWxuQyxFQUFZLFVBQVl1RCxFQUFXLE9BQ3ZDLEdBQUkxVyxLQUFLbTZDLFVBQVcsQ0FDaEIsSUFBSXYrQixFQUFXNWIsS0FBS3VtQyxRQUFRa1QsVUFBVTc5QixTQUFTeXBCLElBQzFDenBCLEdBQXlCLElBQWJsRixFQUdSa0YsR0FBeUIsSUFBYmxGLEdBQ2pCMVcsS0FBS3VtQyxRQUFRa1QsVUFBVXhSLE9BQU81QyxJQUg5QnJsQyxLQUFLdW1DLFFBQVFrVCxVQUFVeDRCLElBQUlva0IsSUFNbkNybEMsS0FBS280QyxPQUFPOStCLE1BQU1uRyxVQUFZQSxFQUVsQ25ULEtBQUtxNkMsVUFBWTNqQyxJQUVkb2pDLEVBaElnQixDQWlJekIsSUMvS0YsSUFBSSxHQUF3QyxXQUN4QyxJQUFJbjNDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0E2STVDLFNBL0YwQixTQUFVRyxHQUtoQyxTQUFTODJDLEVBQUtockMsR0FDVixJQUFJM0wsRUFBUTVELEtBQ1JzSyxFQUFVaUYsR0FBNEIsR0FDMUMzTCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTSxDQUN0QnVtQyxRQUFTdnVCLFNBQVNDLGNBQWMsT0FDaEM5WCxPQUFRbUssRUFBUW5LLFVBQ2RILEtBQ04sSUFBSWlMLE9BQWtDaEcsSUFBdEJxRixFQUFRVyxVQUEwQlgsRUFBUVcsVUFBWSxVQUNsRTR4QixPQUEwQjUzQixJQUFsQnFGLEVBQVF1eUIsTUFBc0J2eUIsRUFBUXV5QixNQUFRLEVBQ3REMmQsT0FBOEN2MUMsSUFBNUJxRixFQUFRa3dDLGdCQUN4Qmx3QyxFQUFRa3dDLGdCQUNSdnZDLEVBQVksTUFDZHd2QyxPQUFnRHgxQyxJQUE3QnFGLEVBQVFtd0MsaUJBQ3pCbndDLEVBQVFtd0MsaUJBQ1J4dkMsRUFBWSxPQUNkeXZDLE9BQXNDejFDLElBQXhCcUYsRUFBUW93QyxZQUE0QnB3QyxFQUFRb3dDLFlBQWMsSUFDeEVDLE9BQXdDMTFDLElBQXpCcUYsRUFBUXF3QyxhQUE2QnJ3QyxFQUFRcXdDLGFBQWUsSUFDM0VDLE9BQTRDMzFDLElBQTNCcUYsRUFBUXN3QyxlQUErQnR3QyxFQUFRc3dDLGVBQWlCLFVBQ2pGQyxPQUE4QzUxQyxJQUE1QnFGLEVBQVF1d0MsZ0JBQ3hCdndDLEVBQVF1d0MsZ0JBQ1IsV0FDRkMsRUFBWTlpQyxTQUFTQyxjQUFjLFVBQ3ZDNmlDLEVBQVU3dkMsVUFBWXV2QyxFQUN0Qk0sRUFBVXZDLGFBQWEsT0FBUSxVQUMvQnVDLEVBQVV0QyxNQUFRb0MsRUFDbEJFLEVBQVVwaEMsWUFBbUMsaUJBQWhCZ2hDLEVBQ3ZCMWlDLFNBQVMraUMsZUFBZUwsR0FDeEJBLEdBQ05JLEVBQVU3MkMsaUJBQWlCd0MsRUFBaUI3QyxFQUFNNjBDLGFBQWEveUMsS0FBSzlCLEVBQU9pNUIsSUFBUSxHQUNuRixJQUFJbWUsRUFBYWhqQyxTQUFTQyxjQUFjLFVBQ3hDK2lDLEVBQVcvdkMsVUFBWXd2QyxFQUN2Qk8sRUFBV3pDLGFBQWEsT0FBUSxVQUNoQ3lDLEVBQVd4QyxNQUFRcUMsRUFDbkJHLEVBQVd0aEMsWUFBb0MsaUJBQWpCaWhDLEVBQ3hCM2lDLFNBQVMraUMsZUFBZUosR0FDeEJBLEdBQ05LLEVBQVcvMkMsaUJBQWlCd0MsRUFBaUI3QyxFQUFNNjBDLGFBQWEveUMsS0FBSzlCLEdBQVFpNUIsSUFBUSxHQUNyRixJQUFJNmIsRUFBYXp0QyxzQkFBNkNxNkIsR0FDMURpQixFQUFVM2lDLEVBQU0yaUMsUUFTcEIsT0FSQUEsRUFBUXQ3QixVQUFZeXRDLEVBQ3BCblMsRUFBUTdzQixZQUFZb2hDLEdBQ3BCdlUsRUFBUTdzQixZQUFZc2hDLEdBS3BCcDNDLEVBQU1zMkMsZUFBaUNqMUMsSUFBckJxRixFQUFRb3lCLFNBQXlCcHlCLEVBQVFveUIsU0FBVyxJQUMvRDk0QixFQXlDWCxPQTVGQSxHQUFVMjJDLEVBQU05MkMsR0EwRGhCODJDLEVBQUtuNkMsVUFBVXE0QyxhQUFlLFNBQVU1YixFQUFPdDRCLEdBQzNDQSxFQUFNbEUsaUJBQ05MLEtBQUtpN0MsYUFBYXBlLElBTXRCMGQsRUFBS242QyxVQUFVNjZDLGFBQWUsU0FBVXBlLEdBQ3BDLElBQ0lzVCxFQURNbndDLEtBQUttbEMsU0FDQW1QLFVBQ2YsR0FBS25FLEVBQUwsQ0FLQSxJQUFJK0ssRUFBYy9LLEVBQUt4VSxVQUN2QixRQUFvQjEyQixJQUFoQmkyQyxFQUEyQixDQUMzQixJQUFJQyxFQUFVaEwsRUFBSzdOLG1CQUFtQjRZLEVBQWNyZSxHQUNoRDc4QixLQUFLazZDLFVBQVksR0FDYi9KLEVBQUtuVSxnQkFDTG1VLEVBQUtsVCxtQkFFVGtULEVBQUtybkIsUUFBUSxDQUNUeGIsS0FBTTZ0QyxFQUNOemUsU0FBVTE4QixLQUFLazZDLFVBQ2Z2ZCxPQUFRMVEsTUFJWmtrQixFQUFLalYsUUFBUWlnQixNQUlsQlosRUE3RmMsQ0E4RnZCLElDdElGLEdBQ1ksU0NQWixJQUFJLEdBQXdDLFdBQ3hDLElBQUk1M0MsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQXNKckMsU0FBUzgzQyxHQUFZakwsRUFBTXRULEVBQU92TyxFQUFZMFQsR0FDakQsSUFBSWtaLEVBQWMvSyxFQUFLeFUsVUFDdkIsUUFBb0IxMkIsSUFBaEJpMkMsRUFBSixDQUdBLElBQUlDLEVBQVVoTCxFQUFLN04sbUJBQW1CNFksRUFBY3JlLEdBQ2hEMEUsRUFBZ0I0TyxFQUFLdlQscUJBQXFCdWUsR0FDMUNoTCxFQUFLblUsZ0JBQ0xtVSxFQUFLbFQsbUJBRVRrVCxFQUFLcm5CLFFBQVEsQ0FDVHpiLFdBQVlrMEIsRUFDWnBULE9BQVFHLEVBQ1JvTyxjQUEyQnozQixJQUFqQis4QixFQUE2QkEsRUFBZSxJQUN0RHJGLE9BQVExUSxNQUdoQixTQW5IaUMsU0FBVXhvQixHQUt2QyxTQUFTNDNDLEVBQVk5ckMsR0FDakIsSUFBSTNMLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQXNCakMsT0FsQkE0RCxFQUFNcUMsR0FJTnJDLEVBQU11QyxLQUlOdkMsRUFBTXlDLEdBQ0ZrSixHQUFlQSxFQUFZMUssY0FDM0JqQixFQUFNaUIsWUFBYzBLLEVBQVkxSyxhQU1wQ2pCLEVBQU04L0IsS0FBTyxLQUNiOS9CLEVBQU0wM0MsV0FBVSxHQUNUMTNDLEVBOENYLE9BekVBLEdBQVV5M0MsRUFBYTUzQyxHQW1DdkI0M0MsRUFBWWo3QyxVQUFVbzFDLFVBQVksV0FDOUIsT0FBK0J4MUMsS0FBS3lILElBQUksS0FPNUM0ekMsRUFBWWo3QyxVQUFVK2tDLE9BQVMsV0FDM0IsT0FBT25sQyxLQUFLMGpDLE1BUWhCMlgsRUFBWWo3QyxVQUFVeUUsWUFBYyxTQUFVc3dDLEdBQzFDLE9BQU8sR0FRWGtHLEVBQVlqN0MsVUFBVWs3QyxVQUFZLFNBQVVDLEdBQ3hDdjdDLEtBQUtrSSxJQUFJLEdBQTRCcXpDLElBUXpDRixFQUFZajdDLFVBQVUyTixPQUFTLFNBQVVELEdBQ3JDOU4sS0FBSzBqQyxLQUFPNTFCLEdBRVR1dEMsRUExRXFCLENBMkU5QixHQy9IRixJQUFJLEdBQXdDLFdBQ3hDLElBQUkxNEMsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQXdFNUMsU0ExQ3FDLFNBQVVHLEdBSzNDLFNBQVMrM0MsRUFBZ0Jqc0MsR0FDckIsSUFBSTNMLEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQUM3QnNLLEVBQVVpRixHQUE0QixHQVcxQyxPQU5BM0wsRUFBTTYzQyxPQUFTbnhDLEVBQVF1eUIsTUFBUXZ5QixFQUFRdXlCLE1BQVEsRUFLL0NqNUIsRUFBTXMyQyxlQUFpQ2oxQyxJQUFyQnFGLEVBQVFveUIsU0FBeUJweUIsRUFBUW95QixTQUFXLElBQy9EOTRCLEVBc0JYLE9BdkNBLEdBQVU0M0MsRUFBaUIvM0MsR0F5QjNCKzNDLEVBQWdCcDdDLFVBQVV5RSxZQUFjLFNBQVVzd0MsR0FDOUMsSUFBSXVHLEdBQVksRUFDaEIsR0FBSXZHLEVBQWdCcDFDLE1BQVEsWUFBOEIsQ0FDdEQsSUFBSW0xQyxFQUEwQ0MsRUFBNkIsY0FDdkVybkMsRUFBTXFuQyxFQUFnQnJuQyxJQUN0QnFnQixFQUFTZ25CLEVBQWdCcGtDLFdBQ3pCOHJCLEVBQVFxWSxFQUFheUcsVUFBWTM3QyxLQUFLeTdDLE9BQVN6N0MsS0FBS3k3QyxPQUV4REwsR0FEV3R0QyxFQUFJd21DLFVBQ0d6WCxFQUFPMU8sRUFBUW51QixLQUFLazZDLFdBQ3RDaEYsRUFBYTcwQyxpQkFDYnE3QyxHQUFZLEVBRWhCLE9BQVFBLEdBRUxGLEVBeEN5QixDQXlDbEMsSUN2RUYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJNzRDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FxTnJDLFNBQVMsR0FBU211QyxHQUlyQixJQUhBLElBQUl2d0MsRUFBU3V3QyxFQUFjdndDLE9BQ3ZCd3JDLEVBQVUsRUFDVkMsRUFBVSxFQUNMeHJDLEVBQUksRUFBR0EsRUFBSUQsRUFBUUMsSUFDeEJ1ckMsR0FBVytFLEVBQWN0d0MsR0FBR3VyQyxRQUM1QkMsR0FBVzhFLEVBQWN0d0MsR0FBR3dyQyxRQUVoQyxNQUFPLENBQUNELEVBQVV4ckMsRUFBUXlyQyxFQUFVenJDLEdBYXhDLFNBaEx3QyxTQUFVdUMsR0FLOUMsU0FBU200QyxFQUFtQnJzQyxHQUN4QixJQUFJM0wsRUFBUTVELEtBQ1JzSyxFQUFVaUYsR0FBNEIsR0FpQzFDLE9BaENBM0wsRUFBUUgsRUFBT0wsS0FBS3BELEtBQ3lDLElBQWNBLEtBQ3ZFc0ssRUFBUXV4QyxrQkFDUmo0QyxFQUFNaTRDLGdCQUFrQnZ4QyxFQUFRdXhDLGlCQUVoQ3Z4QyxFQUFRd3hDLGtCQUNSbDRDLEVBQU1rNEMsZ0JBQWtCeHhDLEVBQVF3eEMsaUJBRWhDeHhDLEVBQVF5eEMsa0JBQ1JuNEMsRUFBTW00QyxnQkFBa0J6eEMsRUFBUXl4QyxpQkFFaEN6eEMsRUFBUTB4QyxnQkFDUnA0QyxFQUFNbzRDLGNBQWdCMXhDLEVBQVEweEMsZUFFOUIxeEMsRUFBUTJ4QyxXQUNScjRDLEVBQU1xNEMsU0FBVzN4QyxFQUFRMnhDLFVBTTdCcjRDLEVBQU1zNEMsd0JBQXlCLEVBSy9CdDRDLEVBQU11NEMsaUJBQW1CLEdBS3pCdjRDLEVBQU13NEMsZUFBaUIsR0FDaEJ4NEMsRUE2R1gsT0FwSkEsR0FBVWc0QyxFQUFvQm40QyxHQStDOUJtNEMsRUFBbUJ4N0MsVUFBVWk4QyxnQkFBa0IsV0FDM0MsT0FBT3I4QyxLQUFLbzhDLGVBQWVsN0MsUUFRL0IwNkMsRUFBbUJ4N0MsVUFBVXk3QyxnQkFBa0IsU0FBVTFHLEdBQ3JELE9BQU8sR0FPWHlHLEVBQW1CeDdDLFVBQVUwN0MsZ0JBQWtCLFNBQVUzRyxLQVN6RHlHLEVBQW1CeDdDLFVBQVV5RSxZQUFjLFNBQVVzd0MsR0FDakQsSUFBS0EsRUFBZ0I1TCxjQUNqQixPQUFPLEVBRVgsSUFBSW1TLEdBQVksRUFFaEIsR0FEQTE3QyxLQUFLczhDLHVCQUF1Qm5ILEdBQ3hCbjFDLEtBQUtrOEMsd0JBQ0wsR0FBSS9HLEVBQWdCcDFDLE1BQVEsZUFDeEJDLEtBQUs4N0MsZ0JBQWdCM0csR0FFckJBLEVBQWdCNUwsY0FBY2xwQyxzQkFFN0IsR0FBSTgwQyxFQUFnQnAxQyxNQUFRLGFBQStCLENBQzVELElBQUl3OEMsRUFBWXY4QyxLQUFLZzhDLGNBQWM3RyxHQUNuQ24xQyxLQUFLazhDLHVCQUNESyxHQUFhdjhDLEtBQUtvOEMsZUFBZWw3QyxPQUFTLFFBSWxELEdBQUlpMEMsRUFBZ0JwMUMsTUFBUSxlQUFpQyxDQUN6RCxJQUFJeThDLEVBQVV4OEMsS0FBSzY3QyxnQkFBZ0IxRyxHQUNuQ24xQyxLQUFLazhDLHVCQUF5Qk0sRUFDOUJkLEVBQVkxN0MsS0FBS2k4QyxTQUFTTyxRQUVyQnJILEVBQWdCcDFDLE1BQVEsZ0JBQzdCQyxLQUFLKzdDLGdCQUFnQjVHLEdBRzdCLE9BQVF1RyxHQU9aRSxFQUFtQng3QyxVQUFVMjdDLGdCQUFrQixTQUFVNUcsS0FPekR5RyxFQUFtQng3QyxVQUFVNDdDLGNBQWdCLFNBQVU3RyxHQUNuRCxPQUFPLEdBUVh5RyxFQUFtQng3QyxVQUFVNjdDLFNBQVcsU0FBVU8sR0FDOUMsT0FBT0EsR0FNWFosRUFBbUJ4N0MsVUFBVWs4Qyx1QkFBeUIsU0FBVW5ILEdBQzVELEdBcUNSLFNBQWdDQSxHQUM1QixJQUFJcDFDLEVBQU9vMUMsRUFBZ0JwMUMsS0FDM0IsT0FBUUEsSUFBUyxnQkFDYkEsSUFBUyxnQkFDVEEsSUFBUyxhQXpDTDA4QyxDQUF1QnRILEdBQWtCLENBQ3pDLElBQUl6NkIsRUFBVXk2QixFQUFnQjVMLGNBQzFCVixFQUFLbnVCLEVBQVFzeEIsVUFBVXg3QixXQUN2QjJrQyxFQUFnQnAxQyxNQUFRLG9CQUNqQkMsS0FBS204QyxpQkFBaUJ0VCxJQUV4QnNNLEVBQWdCcDFDLE1BQVEsZ0JBR3hCOG9DLEtBQU03b0MsS0FBS204QyxvQkFGaEJuOEMsS0FBS204QyxpQkFBaUJ0VCxHQUFNbnVCLEdBTWhDMWEsS0FBS284QyxlQUFpQng1QyxFQUFVNUMsS0FBS204QyxvQkFHdENQLEVBcko0QixDQXNKckMsSUM5TEssU0FBUyxHQUFJOWYsR0FDaEIsSUFBSTRnQixFQUFhdDZDLFVBS2pCLE9BQU8sU0FBVW1DLEdBRWIsSUFEQSxJQUFJbzRDLEdBQU8sRUFDRng3QyxFQUFJLEVBQUdnQixFQUFLdTZDLEVBQVd4N0MsT0FBUUMsRUFBSWdCLElBQ3hDdzZDLEVBQU9BLEdBQVFELEVBQVd2N0MsR0FBR29ELE1BRGlCcEQsR0FNbEQsT0FBT3c3QyxHQVdSLElBY0lDLEdBQW1CLFNBQVV6SCxHQUNwQyxJQUFJNUwsRUFBb0U0TCxFQUE2QixjQUNyRyxPQUFRNUwsRUFBY3NULFVBQ2hCdFQsRUFBY3VULFNBQVd2VCxFQUFjd1QsVUFDekN4VCxFQUFjb1MsVUFtQlhxQixHQUFvQixTQUFVejRDLEdBQ3JDLE9BQU9BLEVBQU11SixJQUFJdW1DLG1CQUFtQjRJLGFBQWEsYUFWbEMsU0FBVTE0QyxHQUN6QixPQUFPQSxFQUFNcEUsT0FBT2swQyxtQkFBbUJ6NEIsU0FBUzVELFNBQVNrbEMsZUFVbkQsQ0FBTTM0QyxJQVVMNDRDLEdBQVN0N0MsRUFvQlR1N0MsR0FBb0IsU0FBVWpJLEdBQ3JDLElBQUk1TCxFQUEyQzRMLEVBQTZCLGNBQzVFLE9BQStCLEdBQXhCNUwsRUFBYzRDLFVBQWlCNzVCLElBQVUsSUFBT2kzQixFQUFjd1QsVUFpRDlETSxHQUFpQixTQUFVbEksR0FDbEMsSUFBSTVMLEVBQW9FNEwsRUFBNkIsY0FDckcsT0FBUzVMLEVBQWNzVCxVQUNqQnRULEVBQWN1VCxTQUFXdlQsRUFBY3dULFdBQ3hDeFQsRUFBY29TLFVBeUJaMkIsR0FBZSxTQUFVbkksR0FDaEMsSUFBSTVMLEVBQW9FNEwsRUFBNkIsY0FDckcsT0FBUzVMLEVBQWNzVCxVQUNqQnRULEVBQWN1VCxTQUFXdlQsRUFBY3dULFVBQ3pDeFQsRUFBY29TLFVBVVg0QixHQUFvQixTQUFVcEksR0FDckMsSUFDSXFJLEVBRG9FckksRUFBNkIsY0FDM0MsT0FBRXFJLFFBQzVELE1BQW1CLFVBQVpBLEdBQW1DLFdBQVpBLEdBQW9DLGFBQVpBLEdBUy9DQyxHQUFZLFNBQVV0SSxHQUM3QixJQUFJdkosRUFBbUUsRUFBa0JyQyxjQUd6RixPQUZBLE9BQXdCdGtDLElBQWpCMm1DLEVBQTRCLElBRUEsU0FBNUJBLEVBQWE4UixhQXFDYkMsR0FBZ0IsU0FBVXhJLEdBQ2pDLElBQUl2SixFQUFtRSxFQUFrQnJDLGNBRXpGLE9BREEsT0FBd0J0a0MsSUFBakIybUMsRUFBNEIsSUFDNUJBLEVBQWFnUyxXQUFxQyxJQUF4QmhTLEVBQWFPLFFDdFE5QyxHQUF3QyxXQUN4QyxJQUFJeHBDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0F5TDVDLFNBcEo2QixTQUFVRyxHQUtuQyxTQUFTbzZDLEVBQVF0dUMsR0FDYixJQUFJM0wsRUFBUUgsRUFBT0wsS0FBS3BELEtBQU0sQ0FDMUJpOEMsU0FBVSxLQUNSajhDLEtBQ0ZzSyxFQUFVaUYsR0FBNEIsR0FLMUMzTCxFQUFNazZDLFNBQVd4ekMsRUFBUXl6QyxRQUl6Qm42QyxFQUFNbzZDLGFBQWUsS0FJckJwNkMsRUFBTXE2QyxtQkFJTnI2QyxFQUFNczZDLFVBQVcsRUFDakIsSUFBSUMsRUFBWTd6QyxFQUFRNnpDLFVBQ2xCN3pDLEVBQVE2ekMsVUFDUixHQUFJZCxHQUFnQk0sSUFhMUIsT0FSQS81QyxFQUFNdzZDLFdBQWE5ekMsRUFBUSt6QyxZQUNyQixHQUFJckIsR0FBbUJtQixHQUN2QkEsRUFLTnY2QyxFQUFNMDZDLFlBQWEsRUFDWjE2QyxFQXdHWCxPQWpKQSxHQUFVaTZDLEVBQVNwNkMsR0ErQ25CbzZDLEVBQVF6OUMsVUFBVTA3QyxnQkFBa0IsU0FBVTNHLEdBQ3JDbjFDLEtBQUtrK0MsV0FDTmwrQyxLQUFLaytDLFVBQVcsRUFDaEJsK0MsS0FBS21sQyxTQUFTbVAsVUFBVXBTLG9CQUU1QixJeEQ0TGNueEIsRUFBWXFkLEV3RDVMdEJndUIsRUFBaUJwOEMsS0FBS284QyxlQUN0Qm1DLEVBQVcsR0FBcUJuQyxHQUNwQyxHQUFJQSxFQUFlbDdDLFFBQVVsQixLQUFLaStDLG9CQUk5QixHQUhJaitDLEtBQUs4OUMsVUFDTDk5QyxLQUFLODlDLFNBQVNVLE9BQU9ELEVBQVMsR0FBSUEsRUFBUyxJQUUzQ3YrQyxLQUFLZytDLGFBQWMsQ0FDbkIsSUFBSW5oQixFQUFRLENBQ1I3OEIsS0FBS2crQyxhQUFhLEdBQUtPLEVBQVMsR0FDaENBLEVBQVMsR0FBS3YrQyxLQUFLZytDLGFBQWEsSUFHaEM3TixFQURNZ0YsRUFBZ0JybkMsSUFDWHdtQyxVeERnTFR2akMsRXdEL0tVOHJCLEV4RCtLRXpPLEV3RC9LSytoQixFQUFLdHJCLGdCeERnTHhDOVQsRUFBVyxJQUFNcWQsRUFDakJyZCxFQUFXLElBQU1xZCxFd0RoTEwsR0FBaUJ5TyxFQUFPc1QsRUFBS3RVLGVBQzdCc1UsRUFBS2hQLHFCQUFxQnRFLFNBR3pCNzhCLEtBQUs4OUMsVUFHVjk5QyxLQUFLODlDLFNBQVNXLFFBRWxCeitDLEtBQUtnK0MsYUFBZU8sRUFDcEJ2K0MsS0FBS2krQyxtQkFBcUI3QixFQUFlbDdDLE9BQ3pDaTBDLEVBQWdCNUwsY0FBY2xwQyxrQkFPbEN3OUMsRUFBUXo5QyxVQUFVNDdDLGNBQWdCLFNBQVU3RyxHQUN4QyxJQUFJcm5DLEVBQU1xbkMsRUFBZ0JybkMsSUFDdEJxaUMsRUFBT3JpQyxFQUFJd21DLFVBQ2YsR0FBbUMsSUFBL0J0MEMsS0FBS284QyxlQUFlbDdDLE9BQWMsQ0FDbEMsSUFBS2xCLEtBQUtzK0MsWUFBY3QrQyxLQUFLODlDLFVBQVk5OUMsS0FBSzg5QyxTQUFTdG9DLE1BQU8sQ0FDMUQsSUFBSTZLLEVBQVdyZ0IsS0FBSzg5QyxTQUFTcCtCLGNBQ3pCak0sRUFBUXpULEtBQUs4OUMsU0FBU1ksV0FDdEJqb0MsRUFBUzA1QixFQUFLdlUsb0JBQ2QraUIsRUFBVzd3QyxFQUFJOG1DLCtCQUErQm4rQixHQUM5QzJZLEVBQU90aEIsRUFBSTJsQywrQkFBK0IsQ0FDMUNrTCxFQUFTLEdBQUt0K0IsRUFBV3RYLEtBQUs4SyxJQUFJSixHQUNsQ2tyQyxFQUFTLEdBQUt0K0IsRUFBV3RYLEtBQUs2SyxJQUFJSCxLQUV0QzA4QixFQUFLL1QsZ0JBQWdCLENBQ2pCM2xCLE9BQVEwNUIsRUFBS3pQLHFCQUFxQnRSLEdBQ2xDc04sU0FBVSxJQUNWQyxPQUFRMVEsS0FPaEIsT0FKSWpzQixLQUFLaytDLFdBQ0xsK0MsS0FBS2srQyxVQUFXLEVBQ2hCL04sRUFBS2hPLG1CQUVGLEVBU1AsT0FOSW5pQyxLQUFLODlDLFVBR0w5OUMsS0FBSzg5QyxTQUFTVyxRQUVsQnorQyxLQUFLZytDLGFBQWUsTUFDYixHQVFmSCxFQUFRejlDLFVBQVV5N0MsZ0JBQWtCLFNBQVUxRyxHQUMxQyxHQUFJbjFDLEtBQUtvOEMsZUFBZWw3QyxPQUFTLEdBQUtsQixLQUFLbytDLFdBQVdqSixHQUFrQixDQUNwRSxJQUNJaEYsRUFETWdGLEVBQWdCcm5DLElBQ1h3bUMsVUFZZixPQVhBdDBDLEtBQUtnK0MsYUFBZSxLQUVoQjdOLEVBQUtuVSxnQkFDTG1VLEVBQUtsVCxtQkFFTGo5QixLQUFLODlDLFVBQ0w5OUMsS0FBSzg5QyxTQUFTVyxRQUlsQnorQyxLQUFLcytDLFdBQWF0K0MsS0FBS284QyxlQUFlbDdDLE9BQVMsR0FDeEMsRUFHUCxPQUFPLEdBR1IyOEMsRUFsSmlCLENBbUoxQmUsSUN4TEYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJajhDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0E2SDVDLFNBdEZnQyxTQUFVRyxHQUt0QyxTQUFTbzdDLEVBQVd0dkMsR0FDaEIsSUFBSTNMLEVBQVE1RCxLQUNSc0ssRUFBVWlGLEdBQTRCLEdBbUIxQyxPQWxCQTNMLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNLENBQ3RCaThDLFNBQVUsS0FDUmo4QyxNQUtBbytDLFdBQWE5ekMsRUFBUTZ6QyxVQUFZN3pDLEVBQVE2ekMsVUFBWXZCLEdBSzNEaDVDLEVBQU1rN0MsZ0JBQWE3NUMsRUFLbkJyQixFQUFNczJDLGVBQWlDajFDLElBQXJCcUYsRUFBUW95QixTQUF5QnB5QixFQUFRb3lCLFNBQVcsSUFDL0Q5NEIsRUEwRFgsT0FuRkEsR0FBVWk3QyxFQUFZcDdDLEdBK0J0Qm83QyxFQUFXeitDLFVBQVUwN0MsZ0JBQWtCLFNBQVUzRyxHQUM3QyxHQUFLc0ksR0FBVXRJLEdBQWYsQ0FHQSxJQUFJcm5DLEVBQU1xbkMsRUFBZ0JybkMsSUFDdEJxaUMsRUFBT3JpQyxFQUFJd21DLFVBQ2YsR0FBSW5FLEVBQUs1UixpQkFBaUI3bkIsV0FBYW9WLEdBQXZDLENBR0EsSUFBSW5WLEVBQU83SSxFQUFJZ08sVUFDWHZHLEVBQVM0L0IsRUFBZ0IzbUMsTUFDekJvc0IsRUFBUTd4QixLQUFLb1gsTUFBTXhKLEVBQUssR0FBSyxFQUFJcEIsRUFBTyxHQUFJQSxFQUFPLEdBQUtvQixFQUFLLEdBQUssR0FDdEUsUUFBd0IxUixJQUFwQmpGLEtBQUs4K0MsV0FBMEIsQ0FDL0IsSUFBSWppQixFQUFRakMsRUFBUTU2QixLQUFLOCtDLFdBQ3pCM08sRUFBS3pPLHdCQUF3QjdFLEdBRWpDNzhCLEtBQUs4K0MsV0FBYWxrQixLQU90QmlrQixFQUFXeitDLFVBQVU0N0MsY0FBZ0IsU0FBVTdHLEdBQzNDLE9BQUtzSSxHQUFVdEksS0FHTEEsRUFBZ0JybkMsSUFDWHdtQyxVQUNWblMsZUFBZW5pQyxLQUFLazZDLFlBQ2xCLElBT1gyRSxFQUFXeitDLFVBQVV5N0MsZ0JBQWtCLFNBQVUxRyxHQUM3QyxTQUFLc0ksR0FBVXRJLEtBR1hpSSxHQUFrQmpJLEtBQ2xCbjFDLEtBQUtvK0MsV0FBV2pKLEtBQ05BLEVBQWdCcm5DLElBQ3RCd21DLFVBQVVwUyxtQkFDZGxpQyxLQUFLOCtDLGdCQUFhNzVDLEVBQ1gsS0FNUjQ1QyxFQXBGb0IsQ0FxRjdCRCxJQ3pIRixJQUFJLEdBQXdDLFdBQ3hDLElBQUlqOEMsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQWtJNUMsU0FqSCtCLFNBQVVHLEdBS3JDLFNBQVNzN0MsRUFBVTl6QyxHQUNmLElBQUlySCxFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0E2QmpDLE9BeEJBNEQsRUFBTW83QyxVQUFZLEtBS2xCcDdDLEVBQU1raUMsU0FBVzl0QixTQUFTQyxjQUFjLE9BQ3hDclUsRUFBTWtpQyxTQUFTeHNCLE1BQU1HLFNBQVcsV0FDaEM3VixFQUFNa2lDLFNBQVN4c0IsTUFBTW00QixjQUFnQixPQUNyQzd0QyxFQUFNa2lDLFNBQVM3NkIsVUFBWSxVQUFZQSxFQUt2Q3JILEVBQU04L0IsS0FBTyxLQUtiOS9CLEVBQU1xN0MsWUFBYyxLQUtwQnI3QyxFQUFNczdDLFVBQVksS0FDWHQ3QyxFQTRFWCxPQTlHQSxHQUFVbTdDLEVBQVd0N0MsR0F1Q3JCczdDLEVBQVUzK0MsVUFBVU0sZ0JBQWtCLFdBQ2xDVixLQUFLK04sT0FBTyxPQUtoQmd4QyxFQUFVMytDLFVBQVUrK0MsUUFBVSxXQUMxQixJQUFJQyxFQUFhcC9DLEtBQUtpL0MsWUFDbEJJLEVBQVdyL0MsS0FBS2svQyxVQUNoQkksRUFBSyxLQUNMaG1DLEVBQVF0WixLQUFLOGxDLFNBQVN4c0IsTUFDMUJBLEVBQU1LLEtBQU81USxLQUFLRixJQUFJdTJDLEVBQVcsR0FBSUMsRUFBUyxJQUFNQyxFQUNwRGhtQyxFQUFNNjZCLElBQU1wckMsS0FBS0YsSUFBSXUyQyxFQUFXLEdBQUlDLEVBQVMsSUFBTUMsRUFDbkRobUMsRUFBTXBCLE1BQVFuUCxLQUFLa3RCLElBQUlvcEIsRUFBUyxHQUFLRCxFQUFXLElBQU1FLEVBQ3REaG1DLEVBQU1uQixPQUFTcFAsS0FBS2t0QixJQUFJb3BCLEVBQVMsR0FBS0QsRUFBVyxJQUFNRSxHQUszRFAsRUFBVTMrQyxVQUFVMk4sT0FBUyxTQUFVRCxHQUNuQyxHQUFJOU4sS0FBSzBqQyxLQUFNLENBQ1gxakMsS0FBSzBqQyxLQUFLbVIsc0JBQXNCaDhCLFlBQVk3WSxLQUFLOGxDLFVBQ2pELElBQUl4c0IsRUFBUXRaLEtBQUs4bEMsU0FBU3hzQixNQUMxQkEsRUFBTUssS0FBTyxVQUNiTCxFQUFNNjZCLElBQU0sVUFDWjc2QixFQUFNcEIsTUFBUSxVQUNkb0IsRUFBTW5CLE9BQVMsVUFFbkJuWSxLQUFLMGpDLEtBQU81MUIsRUFDUjlOLEtBQUswakMsTUFDTDFqQyxLQUFLMGpDLEtBQUttUixzQkFBc0JuN0IsWUFBWTFaLEtBQUs4bEMsV0FPekRpWixFQUFVMytDLFVBQVVtL0MsVUFBWSxTQUFVSCxFQUFZQyxHQUNsRHIvQyxLQUFLaS9DLFlBQWNHLEVBQ25CcC9DLEtBQUtrL0MsVUFBWUcsRUFDakJyL0MsS0FBS3cvQyx5QkFDTHgvQyxLQUFLbS9DLFdBS1RKLEVBQVUzK0MsVUFBVW8vQyx1QkFBeUIsV0FDekMsSUFBSUosRUFBYXAvQyxLQUFLaS9DLFlBQ2xCSSxFQUFXci9DLEtBQUtrL0MsVUFPaEI3cUMsRUFOUyxDQUNUK3FDLEVBQ0EsQ0FBQ0EsRUFBVyxHQUFJQyxFQUFTLElBQ3pCQSxFQUNBLENBQUNBLEVBQVMsR0FBSUQsRUFBVyxLQUVKdHhDLElBQUk5TixLQUFLMGpDLEtBQUsrUCwrQkFBZ0N6ekMsS0FBSzBqQyxNQUU1RXJ2QixFQUFZLEdBQUtBLEVBQVksR0FBRzRHLFFBQzNCamIsS0FBS2cvQyxVQUlOaC9DLEtBQUtnL0MsVUFBVTd1QixlQUFlLENBQUM5YixJQUgvQnJVLEtBQUtnL0MsVUFBWSxJQUFJLEdBQVEsQ0FBQzNxQyxLQVN0QzBxQyxFQUFVMytDLFVBQVVxL0MsWUFBYyxXQUM5QixPQUFPei9DLEtBQUtnL0MsV0FFVEQsRUEvR21CLENBZ0g1QixHQ3BJRixJQUFJLEdBQXdDLFdBQ3hDLElBQUlwOEMsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTZFeENvOEMsR0FBOEIsU0FBVWo4QyxHQU94QyxTQUFTaThDLEVBQWEzL0MsRUFBTWdSLEVBQVlva0MsR0FDcEMsSUFBSXZ4QyxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTUQsSUFBU0MsS0FjdkMsT0FQQTRELEVBQU1tTixXQUFhQSxFQU1uQm5OLEVBQU11eEMsZ0JBQWtCQSxFQUNqQnZ4QyxFQUVYLE9BdkJBLEdBQVU4N0MsRUFBY2o4QyxHQXVCakJpOEMsRUF4QnNCLENBeUIvQmo3QyxHQStJRixTQXhINkIsU0FBVWhCLEdBS25DLFNBQVNrOEMsRUFBUXB3QyxHQUNiLElBQUkzTCxFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0FJakM0RCxFQUFNcUMsR0FJTnJDLEVBQU11QyxLQUlOdkMsRUFBTXlDLEdBQ04sSUFBSWlFLEVBQVVpRixHQUE0QixHQStCMUMsT0ExQkEzTCxFQUFNZzhDLEtBQU8sSUFBSSxHQUFVdDFDLEVBQVFXLFdBQWEsY0FLaERySCxFQUFNaThDLGNBQStCNTZDLElBQXBCcUYsRUFBUXcxQyxRQUF3QngxQyxFQUFRdzFDLFFBQVUsR0FDL0R4MUMsRUFBUXkxQyxXQUNSbjhDLEVBQU1tOEMsU0FBV3oxQyxFQUFReTFDLFVBTTdCbjhDLEVBQU1xN0MsWUFBYyxLQUtwQnI3QyxFQUFNdzZDLFdBQWE5ekMsRUFBUTZ6QyxVQUFZN3pDLEVBQVE2ekMsVUFBWWYsR0FLM0R4NUMsRUFBTW84QyxpQkFBbUIxMUMsRUFBUTIxQyxnQkFDM0IzMUMsRUFBUTIxQyxnQkFDUnI4QyxFQUFNczhDLHVCQUNMdDhDLEVBb0VYLE9BckhBLEdBQVUrN0MsRUFBU2w4QyxHQTREbkJrOEMsRUFBUXYvQyxVQUFVOC9DLHVCQUF5QixTQUFVL0ssRUFBaUJpSyxFQUFZQyxHQUM5RSxJQUFJbm5DLEVBQVFtbkMsRUFBUyxHQUFLRCxFQUFXLEdBQ2pDam5DLEVBQVNrbkMsRUFBUyxHQUFLRCxFQUFXLEdBQ3RDLE9BQU9sbkMsRUFBUUEsRUFBUUMsRUFBU0EsR0FBVW5ZLEtBQUs2L0MsVUFPbkRGLEVBQVF2L0MsVUFBVXEvQyxZQUFjLFdBQzVCLE9BQU96L0MsS0FBSzQvQyxLQUFLSCxlQU1yQkUsRUFBUXYvQyxVQUFVMDdDLGdCQUFrQixTQUFVM0csR0FDMUNuMUMsS0FBSzQvQyxLQUFLTCxVQUFVdi9DLEtBQUtpL0MsWUFBYTlKLEVBQWdCM21DLE9BQ3REeE8sS0FBS3NFLGNBQWMsSUFBSW83QyxHQW5KbEIsVUFtSnlEdkssRUFBZ0Jwa0MsV0FBWW9rQyxLQU85RndLLEVBQVF2L0MsVUFBVTQ3QyxjQUFnQixTQUFVN0csR0FDeENuMUMsS0FBSzQvQyxLQUFLN3hDLE9BQU8sTUFDakIsSUFBSW95QyxFQUFjbmdELEtBQUtnZ0QsaUJBQWlCN0ssRUFBaUJuMUMsS0FBS2kvQyxZQUFhOUosRUFBZ0IzbUMsT0FLM0YsT0FKSTJ4QyxHQUNBbmdELEtBQUsrL0MsU0FBUzVLLEdBRWxCbjFDLEtBQUtzRSxjQUFjLElBQUlvN0MsR0FBYVMsRUExSmhDLFNBTUcsWUFvSmlHaEwsRUFBZ0Jwa0MsV0FBWW9rQyxLQUM3SCxHQU9Yd0ssRUFBUXYvQyxVQUFVeTdDLGdCQUFrQixTQUFVMUcsR0FDMUMsUUFBSW4xQyxLQUFLbytDLFdBQVdqSixLQUNoQm4xQyxLQUFLaS9DLFlBQWM5SixFQUFnQjNtQyxNQUNuQ3hPLEtBQUs0L0MsS0FBSzd4QyxPQUFPb25DLEVBQWdCcm5DLEtBQ2pDOU4sS0FBSzQvQyxLQUFLTCxVQUFVdi9DLEtBQUtpL0MsWUFBYWovQyxLQUFLaS9DLGFBQzNDai9DLEtBQUtzRSxjQUFjLElBQUlvN0MsR0FuTHJCLFdBbUw2RHZLLEVBQWdCcGtDLFdBQVlva0MsS0FDcEYsSUFVZndLLEVBQVF2L0MsVUFBVTIvQyxTQUFXLFNBQVV4N0MsS0FDaENvN0MsRUF0SGlCLENBdUgxQmYsSUNwUEYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJajhDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0E0RjVDLFNBaEQ4QixTQUFVRyxHQUtwQyxTQUFTMjhDLEVBQVM3d0MsR0FDZCxJQUFJM0wsRUFBUTVELEtBQ1JzSyxFQUFVaUYsR0FBNEIsR0FDdEM0dUMsRUFBWTd6QyxFQUFRNnpDLFVBQVk3ekMsRUFBUTZ6QyxVQUFZYixHQWdCeEQsT0FmQTE1QyxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTSxDQUN0Qm0rQyxVQUFXQSxFQUNYbHpDLFVBQVdYLEVBQVFXLFdBQWEsY0FDaEM2MEMsUUFBU3gxQyxFQUFRdzFDLFdBQ2Y5L0MsTUFLQWs2QyxlQUFpQ2oxQyxJQUFyQnFGLEVBQVFveUIsU0FBeUJweUIsRUFBUW95QixTQUFXLElBS3RFOTRCLEVBQU15OEMsVUFBdUJwN0MsSUFBaEJxRixFQUFRZzJDLEtBQW9CaDJDLEVBQVFnMkMsSUFDMUMxOEMsRUFzQlgsT0E3Q0EsR0FBVXc4QyxFQUFVMzhDLEdBNkJwQjI4QyxFQUFTaGdELFVBQVUyL0MsU0FBVyxTQUFVeDdDLEdBQ3BDLElBQ0k0ckMsRUFETW53QyxLQUFLbWxDLFNBQzhDbVAsVUFDekR4VSxFQUFXOS9CLEtBQUt5L0MsY0FDcEIsR0FBSXovQyxLQUFLcWdELEtBQU0sQ0FDWCxJQUFJL2YsRUFBZ0I2UCxFQUFLblEseUJBQXlCRixHQUM5Q3p5QixFQUFhOGlDLEVBQUtoUiwrQkFBK0JtQixHQUNqRGlnQixFQUFTcFEsRUFBS3RyQixnQkFBa0J4WCxHQUNwQ3l5QixFQUFXQSxFQUFTM1MsU0FDWGlCLE1BQU1teUIsRUFBU0EsR0FFNUJwUSxFQUFLcFEsWUFBWUQsRUFBVSxDQUN2QnBELFNBQVUxOEIsS0FBS2s2QyxVQUNmdmQsT0FBUTFRLE1BR1RtMEIsRUE5Q2tCLENBK0MzQixJQzNGRixJQUFJLEdBQXdDLFdBQ3hDLElBQUl6OUMsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQWlJNUMsU0FsRmlDLFNBQVVHLEdBS3ZDLFNBQVMrOEMsRUFBWWp4QyxHQUNqQixJQUFJM0wsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBQzdCc0ssRUFBVWlGLEdBQWUsR0E0QjdCLE9BdEJBM0wsRUFBTTY4QyxrQkFBb0IsU0FBVXRMLEdBQ2hDLE9BQVFrSSxHQUFlbEksSUFBb0JvSSxHQUFrQnBJLElBTWpFdnhDLEVBQU13NkMsZ0JBQ29CbjVDLElBQXRCcUYsRUFBUTZ6QyxVQUNGN3pDLEVBQVE2ekMsVUFDUnY2QyxFQUFNNjhDLGtCQUtoQjc4QyxFQUFNczJDLGVBQWlDajFDLElBQXJCcUYsRUFBUW95QixTQUF5QnB5QixFQUFRb3lCLFNBQVcsSUFLdEU5NEIsRUFBTTg4QyxpQkFDcUJ6N0MsSUFBdkJxRixFQUFRcTJDLFdBQTJCcjJDLEVBQVFxMkMsV0FBYSxJQUNyRC84QyxFQTZDWCxPQS9FQSxHQUFVNDhDLEVBQWEvOEMsR0E0Q3ZCKzhDLEVBQVlwZ0QsVUFBVXlFLFlBQWMsU0FBVXN3QyxHQUMxQyxJQUFJdUcsR0FBWSxFQUNoQixHQUFJdkcsRUFBZ0JwMUMsTUFBUTBHLEVBQW1CLENBQzNDLElBQUltNkMsRUFBeUN6TCxFQUE2QixjQUN0RTBMLEVBQVVELEVBQVNDLFFBQ3ZCLEdBQUk3Z0QsS0FBS28rQyxXQUFXakosS0N0RnRCLElEdUZPMEwsR0MxRlAsSUQyRlVBLEdDekZULElEMEZTQSxHQzNGWixJRDRGWUEsR0FBd0IsQ0FDNUIsSUFDSTFRLEVBRE1nRixFQUFnQnJuQyxJQUNYd21DLFVBQ1h3TSxFQUFnQjNRLEVBQUt0ckIsZ0JBQWtCN2tCLEtBQUswZ0QsWUFDNUM5eEIsRUFBUyxFQUFHQyxFQUFTLEVDOUYvQixJRCtGVWd5QixFQUNBaHlCLEdBQVVpeUIsRUNuR3BCLElEcUdlRCxFQUNManlCLEdBQVVreUIsRUNwR25CLElEc0djRCxFQUNManlCLEVBQVNreUIsRUFHVGp5QixFQUFTaXlCLEVBRWIsSUFBSWprQixFQUFRLENBQUNqTyxFQUFRQyxHQUNyQixHQUFpQmdPLEVBQU9zVCxFQUFLdFUsZVRjdEMsU0FBYXNVLEVBQU10VCxFQUFPbUYsR0FDN0IsSUFBSS9ELEVBQWdCa1MsRUFBS3ZVLG9CQUN6QixHQUFJcUMsRUFBZSxDQUNmLElBQUl4bkIsRUFBUyxDQUFDd25CLEVBQWMsR0FBS3BCLEVBQU0sR0FBSW9CLEVBQWMsR0FBS3BCLEVBQU0sSUFDcEVzVCxFQUFLL1QsZ0JBQWdCLENBQ2pCTSxjQUEyQnozQixJQUFqQis4QixFQUE2QkEsRUFBZSxJQUN0RHJGLE9BQVF4USxHQUNSMVYsT0FBUTA1QixFQUFLelAscUJBQXFCanFCLE1TcEI5QnNxQyxDQUFJNVEsRUFBTXRULEVBQU83OEIsS0FBS2s2QyxXQUN0QjBHLEVBQVN2Z0QsaUJBQ1RxN0MsR0FBWSxHQUdwQixPQUFRQSxHQUVMOEUsRUFoRnFCLENBaUY5QixJRWhJRixJQUFJLEdBQXdDLFdBQ3hDLElBQUk3OUMsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQWdHNUMsU0FyRGtDLFNBQVVHLEdBS3hDLFNBQVN1OUMsRUFBYXp4QyxHQUNsQixJQUFJM0wsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBQzdCc0ssRUFBVWlGLEdBQTRCLEdBZ0IxQyxPQVhBM0wsRUFBTXc2QyxXQUFhOXpDLEVBQVE2ekMsVUFBWTd6QyxFQUFRNnpDLFVBQVlaLEdBSzNEMzVDLEVBQU02M0MsT0FBU254QyxFQUFRdXlCLE1BQVF2eUIsRUFBUXV5QixNQUFRLEVBSy9DajVCLEVBQU1zMkMsZUFBaUNqMUMsSUFBckJxRixFQUFRb3lCLFNBQXlCcHlCLEVBQVFveUIsU0FBVyxJQUMvRDk0QixFQTRCWCxPQWxEQSxHQUFVbzlDLEVBQWN2OUMsR0FnQ3hCdTlDLEVBQWE1Z0QsVUFBVXlFLFlBQWMsU0FBVXN3QyxHQUMzQyxJQUFJdUcsR0FBWSxFQUNoQixHQUFJdkcsRUFBZ0JwMUMsTUFBUTBHLEdBQ3hCMHVDLEVBQWdCcDFDLE1BQVEwRyxFQUFvQixDQUM1QyxJQUFJbTZDLEVBQXlDekwsRUFBNkIsY0FDdEU4TCxFQUFXTCxFQUFTSyxTQUN4QixHQUFJamhELEtBQUtvK0MsV0FBV2pKLEtBQ2Y4TCxHQUFZLElBQUlDLFdBQVcsSUFBTUQsR0FBWSxJQUFJQyxXQUFXLElBQUssQ0FDbEUsSUFBSXB6QyxFQUFNcW5DLEVBQWdCcm5DLElBQ3RCK3VCLEVBQVFva0IsR0FBWSxJQUFJQyxXQUFXLEdBQUtsaEQsS0FBS3k3QyxRQUFVejdDLEtBQUt5N0MsT0FFaEVMLEdBRFd0dEMsRUFBSXdtQyxVQUNHelgsT0FBTzUzQixFQUFXakYsS0FBS2s2QyxXQUN6QzBHLEVBQVN2Z0QsaUJBQ1RxN0MsR0FBWSxHQUdwQixPQUFRQSxHQUVMc0YsRUFuRHNCLENBb0QvQixJQ2dCRixHQXRHNkIsV0FPekIsU0FBU0csRUFBUUMsRUFBT0MsRUFBYUMsR0FLakN0aEQsS0FBS3VoRCxPQUFTSCxFQUtkcGhELEtBQUt3aEQsYUFBZUgsRUFLcEJyaEQsS0FBS3loRCxPQUFTSCxFQUtkdGhELEtBQUswaEQsUUFBVSxHQUtmMWhELEtBQUsyaEQsT0FBUyxFQUtkM2hELEtBQUs0aEQsaUJBQW1CLEVBK0Q1QixPQTFEQVQsRUFBUS9nRCxVQUFVcStDLE1BQVEsV0FDdEJ6K0MsS0FBSzBoRCxRQUFReGdELE9BQVMsRUFDdEJsQixLQUFLMmhELE9BQVMsRUFDZDNoRCxLQUFLNGhELGlCQUFtQixHQU01QlQsRUFBUS9nRCxVQUFVbytDLE9BQVMsU0FBVXYxQyxFQUFHQyxHQUNwQ2xKLEtBQUswaEQsUUFBUTUrQyxLQUFLbUcsRUFBR0MsRUFBR296QixLQUFLQyxRQUtqQzRrQixFQUFRL2dELFVBQVVvVixJQUFNLFdBQ3BCLEdBQUl4VixLQUFLMGhELFFBQVF4Z0QsT0FBUyxFQUd0QixPQUFPLEVBRVgsSUFBSW9nRCxFQUFRaGxCLEtBQUtDLE1BQVF2OEIsS0FBS3loRCxPQUMxQkksRUFBWTdoRCxLQUFLMGhELFFBQVF4Z0QsT0FBUyxFQUN0QyxHQUFJbEIsS0FBSzBoRCxRQUFRRyxFQUFZLEdBQUtQLEVBRzlCLE9BQU8sRUFJWCxJQURBLElBQUlRLEVBQWFELEVBQVksRUFDdEJDLEVBQWEsR0FBSzloRCxLQUFLMGhELFFBQVFJLEVBQWEsR0FBS1IsR0FDcERRLEdBQWMsRUFFbEIsSUFBSXBsQixFQUFXMThCLEtBQUswaEQsUUFBUUcsRUFBWSxHQUFLN2hELEtBQUswaEQsUUFBUUksRUFBYSxHQUl2RSxHQUFJcGxCLEVBQVcsSUFBTyxHQUNsQixPQUFPLEVBRVgsSUFBSTl5QixFQUFLNUosS0FBSzBoRCxRQUFRRyxHQUFhN2hELEtBQUswaEQsUUFBUUksR0FDNUNqNEMsRUFBSzdKLEtBQUswaEQsUUFBUUcsRUFBWSxHQUFLN2hELEtBQUswaEQsUUFBUUksRUFBYSxHQUdqRSxPQUZBOWhELEtBQUsyaEQsT0FBUzU0QyxLQUFLb1gsTUFBTXRXLEVBQUlELEdBQzdCNUosS0FBSzRoRCxpQkFBbUI3NEMsS0FBS3FYLEtBQUt4VyxFQUFLQSxFQUFLQyxFQUFLQSxHQUFNNnlCLEVBQ2hEMThCLEtBQUs0aEQsaUJBQW1CNWhELEtBQUt3aEQsY0FLeENMLEVBQVEvZ0QsVUFBVXNmLFlBQWMsV0FDNUIsT0FBUTFmLEtBQUt3aEQsYUFBZXhoRCxLQUFLNGhELGtCQUFvQjVoRCxLQUFLdWhELFFBSzlESixFQUFRL2dELFVBQVVzK0MsU0FBVyxXQUN6QixPQUFPMStDLEtBQUsyaEQsUUFFVFIsRUFwR2lCLEdDVDVCLElBQUksR0FBd0MsV0FDeEMsSUFBSXgrQyxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBMEJqQ3krQyxHQUNHLFdBd09kLFNBOU1vQyxTQUFVdCtDLEdBSzFDLFNBQVN1K0MsRUFBZXp5QyxHQUNwQixJQUFJM0wsRUFBUTVELEtBQ1JzSyxFQUFVaUYsR0FBNEIsSUFDMUMzTCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FDeUMsSUFBY0EsTUFLckVpaUQsWUFBYyxFQUtwQnIrQyxFQUFNcytDLFdBQWEsRUFLbkJ0K0MsRUFBTW91QixlQUFpQy9zQixJQUFyQnFGLEVBQVEybUIsU0FBeUIzbUIsRUFBUTJtQixTQUFXLEVBS3RFcnRCLEVBQU1zMkMsZUFBaUNqMUMsSUFBckJxRixFQUFRb3lCLFNBQXlCcHlCLEVBQVFveUIsU0FBVyxJQUt0RTk0QixFQUFNdStDLGNBQStCbDlDLElBQXBCcUYsRUFBUTgzQyxRQUF3QjkzQyxFQUFRODNDLFFBQVUsR0FLbkV4K0MsRUFBTXkrQyxnQkFDb0JwOUMsSUFBdEJxRixFQUFRZzRDLFdBQTBCaDRDLEVBQVFnNEMsVUFLOUMxK0MsRUFBTTIrQywwQkFDOEJ0OUMsSUFBaENxRixFQUFReXVCLHFCQUNGenVCLEVBQVF5dUIsb0JBRWxCLElBQUlvbEIsRUFBWTd6QyxFQUFRNnpDLFVBQVk3ekMsRUFBUTZ6QyxVQUFZaEIsR0E0Q3hELE9BdkNBdjVDLEVBQU13NkMsV0FBYTl6QyxFQUFRK3pDLFlBQ3JCLEdBQUlyQixHQUFtQm1CLEdBQ3ZCQSxFQUtOdjZDLEVBQU00K0MsWUFBYyxLQUtwQjUrQyxFQUFNNitDLGdCQUFheDlDLEVBS25CckIsRUFBTTgrQyxXQUtOOStDLEVBQU0rK0MsV0FBUTE5QyxFQU1kckIsRUFBTWcvQyxrQkFBb0IsSUFJMUJoL0MsRUFBTWkvQyxtQkFNTmovQyxFQUFNay9DLGNBQWdCLElBQ2ZsL0MsRUErR1gsT0EzTUEsR0FBVW8rQyxFQUFnQnYrQyxHQWlHMUJ1K0MsRUFBZTVoRCxVQUFVMmlELGdCQUFrQixXQUN2Qy9pRCxLQUFLNmlELHdCQUFxQjU5QyxFQUNmakYsS0FBS21sQyxTQUFTbVAsVUFDcEJuUyxvQkFBZWw5QixFQUFXakYsS0FBS2tpRCxXQUFjbGlELEtBQUtraUQsV0FBYSxFQUFJLEdBQUssRUFBSyxFQUFHbGlELEtBQUt3aUQsY0FROUZSLEVBQWU1aEQsVUFBVXlFLFlBQWMsU0FBVXN3QyxHQUM3QyxJQUFLbjFDLEtBQUtvK0MsV0FBV2pKLEdBQ2pCLE9BQU8sRUFHWCxHQURXQSxFQUFnQnAxQyxPQUNkMEcsRUFDVCxPQUFPLEVBRVgsSUFRSW8yQixFQVJBL3VCLEVBQU1xbkMsRUFBZ0JybkMsSUFDdEJrMUMsRUFBd0M3TixFQUE2QixjQWlCekUsR0FoQkE2TixFQUFXM2lELGlCQUNQTCxLQUFLcWlELGFBQ0xyaUQsS0FBS3dpRCxZQUFjck4sRUFBZ0Jwa0MsWUFLbkNva0MsRUFBZ0JwMUMsTUFBUTBHLElBQ3hCbzJCLEVBQVFtbUIsRUFBV24wQixPQUNmeGMsSUFBVzJ3QyxFQUFXQyxZQUFjQyxXQUFXQyxrQkFDL0N0bUIsR0FBU3RxQixJQUVUeXdDLEVBQVdDLFlBQWNDLFdBQVdFLGlCQUNwQ3ZtQixHQUFTLEtBR0gsSUFBVkEsRUFDQSxPQUFPLEVBR1A3OEIsS0FBS2tpRCxXQUFhcmxCLEVBRXRCLElBQUlOLEVBQU1ELEtBQUtDLFdBQ1N0M0IsSUFBcEJqRixLQUFLeWlELGFBQ0x6aUQsS0FBS3lpRCxXQUFhbG1CLEtBRWpCdjhCLEtBQUsyaUQsT0FBU3BtQixFQUFNdjhCLEtBQUt5aUQsV0FBYXppRCxLQUFLNGlELHFCQUM1QzVpRCxLQUFLMmlELE1BQVE1NUMsS0FBS2t0QixJQUFJNEcsR0FBUyxFQUFJa2xCLEdBM0twQyxTQTZLSCxJQUFJNVIsRUFBT3JpQyxFQUFJd21DLFVBQ2YsR0FBSXQwQyxLQUFLMmlELFFBQVVaLEtBQ2I1UixFQUFLM1IsMkJBQTRCeCtCLEtBQUt1aUQscUJBYXhDLE9BWkl2aUQsS0FBSzZpRCxtQkFDTC9XLGFBQWE5ckMsS0FBSzZpRCxxQkFHZDFTLEVBQUtuVSxnQkFDTG1VLEVBQUtsVCxtQkFFVGtULEVBQUtqTyxvQkFFVGxpQyxLQUFLNmlELG1CQUFxQjdyQixXQUFXaDNCLEtBQUsraUQsZ0JBQWdCcjlDLEtBQUsxRixNQUFPQSxLQUFLbWlELFVBQzNFaFMsRUFBSzNPLFlBQVkzRSxFQUFRNzhCLEtBQUs4aUQsY0FBZTlpRCxLQUFLd2lELGFBQ2xEeGlELEtBQUt5aUQsV0FBYWxtQixHQUNYLEVBRVh2OEIsS0FBS2lpRCxhQUFlcGxCLEVBQ3BCLElBQUl3bUIsRUFBV3Q2QyxLQUFLRCxJQUFJOUksS0FBS21pRCxVQUFZNWxCLEVBQU12OEIsS0FBS3lpRCxZQUFhLEdBR2pFLE9BRkEzVyxhQUFhOXJDLEtBQUswaUQsWUFDbEIxaUQsS0FBSzBpRCxXQUFhMXJCLFdBQVdoM0IsS0FBS3NqRCxpQkFBaUI1OUMsS0FBSzFGLEtBQU04TixHQUFNdTFDLElBQzdELEdBTVhyQixFQUFlNWhELFVBQVVrakQsaUJBQW1CLFNBQVV4MUMsR0FDbEQsSUFBSXFpQyxFQUFPcmlDLEVBQUl3bUMsVUFDWG5FLEVBQUtuVSxnQkFDTG1VLEVBQUtsVCxtQkFFVCxJQUFJSixHQUFTLEVBQU03OEIsS0FBS2lpRCxhQUFjamlELEtBQUtneUIsVUFBWWh5QixLQUFLOGlELGNBQWU5aUQsS0FBS2d5QixVQUFZaHlCLEtBQUs4aUQsZUFBaUI5aUQsS0FBSzhpRCxlQUNuSDNTLEVBQUszUiwwQkFBNEJ4K0IsS0FBS3VpRCx3QkFFdEMxbEIsRUFBUUEsRUFBU0EsRUFBUSxFQUFJLEdBQUssRUFBSyxHQUUzQ3VlLEdBQVlqTCxFQUFNdFQsRUFBTzc4QixLQUFLd2lELFlBQWF4aUQsS0FBS2s2QyxXQUNoRGw2QyxLQUFLMmlELFdBQVExOUMsRUFDYmpGLEtBQUtpaUQsWUFBYyxFQUNuQmppRCxLQUFLd2lELFlBQWMsS0FDbkJ4aUQsS0FBS3lpRCxnQkFBYXg5QyxFQUNsQmpGLEtBQUswaUQsZ0JBQWF6OUMsR0FRdEIrOEMsRUFBZTVoRCxVQUFVbWpELGVBQWlCLFNBQVVqQixHQUNoRHRpRCxLQUFLcWlELFdBQWFDLEVBQ2JBLElBQ0R0aUQsS0FBS3dpRCxZQUFjLE9BR3BCUixFQTVNd0IsQ0E2TWpDLElDbFFGLElBQUksR0FBd0MsV0FDeEMsSUFBSXIvQyxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBMko1QyxTQTFIaUMsU0FBVUcsR0FLdkMsU0FBUysvQyxFQUFZajBDLEdBQ2pCLElBQUkzTCxFQUFRNUQsS0FDUnNLLEVBQVVpRixHQUE0QixHQUN0Q2swQyxFQUErRCxFQW1DbkUsT0FsQ0tBLEVBQWV4SCxXQUNoQndILEVBQWV4SCxTQUFXLElBRTlCcjRDLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNeWpELElBQW1CempELE1BS3ZDMGpELFFBQVUsS0FLaEI5L0MsRUFBTWs3QyxnQkFBYTc1QyxFQUtuQnJCLEVBQU0rL0MsV0FBWSxFQUtsQi8vQyxFQUFNZ2dELGVBQWlCLEVBS3ZCaGdELEVBQU1pZ0QsZ0JBQW1DNStDLElBQXRCcUYsRUFBUXc1QyxVQUEwQng1QyxFQUFRdzVDLFVBQVksR0FLekVsZ0QsRUFBTXMyQyxlQUFpQ2oxQyxJQUFyQnFGLEVBQVFveUIsU0FBeUJweUIsRUFBUW95QixTQUFXLElBQy9EOTRCLEVBNkVYLE9BdkhBLEdBQVU0L0MsRUFBYS8vQyxHQWdEdkIrL0MsRUFBWXBqRCxVQUFVMDdDLGdCQUFrQixTQUFVM0csR0FDOUMsSUFBSTRPLEVBQWdCLEVBQ2hCQyxFQUFTaGtELEtBQUtvOEMsZUFBZSxHQUM3QjZILEVBQVNqa0QsS0FBS284QyxlQUFlLEdBRTdCM29DLEVBQVExSyxLQUFLb1gsTUFBTThqQyxFQUFPdFgsUUFBVXFYLEVBQU9yWCxRQUFTc1gsRUFBT3ZYLFFBQVVzWCxFQUFPdFgsU0FDaEYsUUFBd0J6bkMsSUFBcEJqRixLQUFLOCtDLFdBQTBCLENBQy9CLElBQUlqaUIsRUFBUXBwQixFQUFRelQsS0FBSzgrQyxXQUN6QjkrQyxLQUFLNGpELGdCQUFrQi9tQixHQUNsQjc4QixLQUFLMmpELFdBQWE1NkMsS0FBS2t0QixJQUFJajJCLEtBQUs0akQsZ0JBQWtCNWpELEtBQUs2akQsYUFDeEQ3akQsS0FBSzJqRCxXQUFZLEdBRXJCSSxFQUFnQmxuQixFQUVwQjc4QixLQUFLOCtDLFdBQWFyckMsRUFDbEIsSUFBSTNGLEVBQU1xbkMsRUFBZ0JybkMsSUFDdEJxaUMsRUFBT3JpQyxFQUFJd21DLFVBQ2YsR0FBSW5FLEVBQUs1UixpQkFBaUI3bkIsV0FBYW9WLEdBQXZDLENBTUEsSUFBSWlvQixFQUFtQmptQyxFQUFJazRCLGNBQWNnTyx3QkFDckN1SyxFQUFXLEdBQXFCditDLEtBQUtvOEMsZ0JBQ3pDbUMsRUFBUyxJQUFNeEssRUFBaUJwNkIsS0FDaEM0a0MsRUFBUyxJQUFNeEssRUFBaUJJLElBQ2hDbjBDLEtBQUswakQsUUFBVTUxQyxFQUFJMmxDLCtCQUErQjhLLEdBRTlDditDLEtBQUsyakQsWUFDTDcxQyxFQUFJRCxTQUNKc2lDLEVBQUt6Tyx1QkFBdUJxaUIsRUFBZS9qRCxLQUFLMGpELFlBUXhERixFQUFZcGpELFVBQVU0N0MsY0FBZ0IsU0FBVTdHLEdBQzVDLFFBQUluMUMsS0FBS284QyxlQUFlbDdDLE9BQVMsSUFDbkJpMEMsRUFBZ0JybkMsSUFDWHdtQyxVQUNWblMsZUFBZW5pQyxLQUFLazZDLFdBQ2xCLEtBV2ZzSixFQUFZcGpELFVBQVV5N0MsZ0JBQWtCLFNBQVUxRyxHQUM5QyxHQUFJbjFDLEtBQUtvOEMsZUFBZWw3QyxRQUFVLEVBQUcsQ0FDakMsSUFBSTRNLEVBQU1xbkMsRUFBZ0JybkMsSUFRMUIsT0FQQTlOLEtBQUswakQsUUFBVSxLQUNmMWpELEtBQUs4K0MsZ0JBQWE3NUMsRUFDbEJqRixLQUFLMmpELFdBQVksRUFDakIzakQsS0FBSzRqRCxlQUFpQixFQUNqQjVqRCxLQUFLazhDLHdCQUNOcHVDLEVBQUl3bUMsVUFBVXBTLG9CQUVYLEVBR1AsT0FBTyxHQUdSc2hCLEVBeEhxQixDQXlIOUI1RSxJQzFKRixJQUFJLEdBQXdDLFdBQ3hDLElBQUlqOEMsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQXVJNUMsU0F6RytCLFNBQVVHLEdBS3JDLFNBQVN5Z0QsRUFBVTMwQyxHQUNmLElBQUkzTCxFQUFRNUQsS0FDUnNLLEVBQVVpRixHQUE0QixHQUN0Q2swQyxFQUErRCxFQXlCbkUsT0F4QktBLEVBQWV4SCxXQUNoQndILEVBQWV4SCxTQUFXLElBRTlCcjRDLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNeWpELElBQW1CempELE1BS3ZDMGpELFFBQVUsS0FLaEI5L0MsRUFBTXMyQyxlQUFpQ2oxQyxJQUFyQnFGLEVBQVFveUIsU0FBeUJweUIsRUFBUW95QixTQUFXLElBS3RFOTRCLEVBQU11Z0QsbUJBQWdCbC9DLEVBS3RCckIsRUFBTXdnRCxnQkFBa0IsRUFDakJ4Z0QsRUFzRVgsT0F0R0EsR0FBVXNnRCxFQUFXemdELEdBc0NyQnlnRCxFQUFVOWpELFVBQVUwN0MsZ0JBQWtCLFNBQVUzRyxHQUM1QyxJQUFJa1AsRUFBYSxFQUNiTCxFQUFTaGtELEtBQUtvOEMsZUFBZSxHQUM3QjZILEVBQVNqa0QsS0FBS284QyxlQUFlLEdBQzdCeHlDLEVBQUtvNkMsRUFBT3RYLFFBQVV1WCxFQUFPdlgsUUFDN0I3aUMsRUFBS202QyxFQUFPclgsUUFBVXNYLEVBQU90WCxRQUU3QnRzQixFQUFXdFgsS0FBS3FYLEtBQUt4VyxFQUFLQSxFQUFLQyxFQUFLQSxRQUNiNUUsSUFBdkJqRixLQUFLbWtELGdCQUNMRSxFQUFhcmtELEtBQUtta0QsY0FBZ0I5akMsR0FFdENyZ0IsS0FBS21rRCxjQUFnQjlqQyxFQUNyQixJQUFJdlMsRUFBTXFuQyxFQUFnQnJuQyxJQUN0QnFpQyxFQUFPcmlDLEVBQUl3bUMsVUFDRyxHQUFkK1AsSUFDQXJrRCxLQUFLb2tELGdCQUFrQkMsR0FHM0IsSUFBSXRRLEVBQW1Cam1DLEVBQUlrNEIsY0FBY2dPLHdCQUNyQ3VLLEVBQVcsR0FBcUJ2K0MsS0FBS284QyxnQkFDekNtQyxFQUFTLElBQU14SyxFQUFpQnA2QixLQUNoQzRrQyxFQUFTLElBQU14SyxFQUFpQkksSUFDaENuMEMsS0FBSzBqRCxRQUFVNTFDLEVBQUkybEMsK0JBQStCOEssR0FFbER6d0MsRUFBSUQsU0FDSnNpQyxFQUFLOU8seUJBQXlCZ2pCLEVBQVlya0QsS0FBSzBqRCxVQU9uRFEsRUFBVTlqRCxVQUFVNDdDLGNBQWdCLFNBQVU3RyxHQUMxQyxHQUFJbjFDLEtBQUtvOEMsZUFBZWw3QyxPQUFTLEVBQUcsQ0FDaEMsSUFDSWl2QyxFQURNZ0YsRUFBZ0JybkMsSUFDWHdtQyxVQUNYdHpDLEVBQVloQixLQUFLb2tELGdCQUFrQixFQUFJLEdBQUssRUFFaEQsT0FEQWpVLEVBQUtoTyxlQUFlbmlDLEtBQUtrNkMsVUFBV2w1QyxJQUM3QixFQUdQLE9BQU8sR0FRZmtqRCxFQUFVOWpELFVBQVV5N0MsZ0JBQWtCLFNBQVUxRyxHQUM1QyxHQUFJbjFDLEtBQUtvOEMsZUFBZWw3QyxRQUFVLEVBQUcsQ0FDakMsSUFBSTRNLEVBQU1xbkMsRUFBZ0JybkMsSUFPMUIsT0FOQTlOLEtBQUswakQsUUFBVSxLQUNmMWpELEtBQUtta0QsbUJBQWdCbC9DLEVBQ3JCakYsS0FBS29rRCxnQkFBa0IsRUFDbEJwa0QsS0FBS2s4Qyx3QkFDTnB1QyxFQUFJd21DLFVBQVVwUyxvQkFFWCxFQUdQLE9BQU8sR0FHUmdpQixFQXZHbUIsQ0F3RzVCdEYsSUN0SUYsSUFBSSxHQUF3QyxXQUN4QyxJQUFJajhDLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0E4RjVDLFNBeEJ5QixTQUFVRyxHQUsvQixTQUFTdWpDLEVBQUkxOEIsR0FZVCxPQVZBQSxFQUFVLEVBQU8sR0FBSUEsSUFDUnlsQyxXQUNUemxDLEVBQVF5bEMsU0NqQ2IsU0FBa0J4Z0MsR0FDckIsSUFBSWpGLEVBQXNDLEdBQ3RDeWxDLEVBQVcsSUFBSSxHQWFuQixZQVptQzlxQyxJQUFqQnFGLEVBQVFnRCxNQUFxQmhELEVBQVFnRCxPQUVuRHlpQyxFQUFTanRDLEtBQUssSUFBSSxHQUFLd0gsRUFBUWc2QyxvQkFFSXIvQyxJQUFuQnFGLEVBQVE0akIsUUFBdUI1akIsRUFBUTRqQixTQUV2RDZoQixFQUFTanRDLEtBQUssSUFBSSxHQUFPd0gsRUFBUWk2QyxzQkFFWXQvQyxJQUF4QnFGLEVBQVFrNkMsYUFBNEJsNkMsRUFBUWs2QyxjQUVqRXpVLEVBQVNqdEMsS0FBSyxJQUFJLEdBQVl3SCxFQUFRbTZDLHFCQUVuQzFVLEVEa0JvQixJQUVsQnpsQyxFQUFRMGxDLGVBQ1QxbEMsRUFBUTBsQyxhRUZiLFNBQWtCemdDLEdBQ3JCLElBQUlqRixFRkMrQyxDQUN2Qyt6QyxhQUFhLElFRmlCLEdBQ3RDck8sRUFBZSxJQUFJLEdBQ25CK04sRUFBVSxJQUFJLElBQVMsS0FBTyxJQUFNLEtBb0R4QyxZQW5Ed0Q5NEMsSUFBL0JxRixFQUFRbzZDLG9CQUMzQnA2QyxFQUFRbzZDLHFCQUdWMVUsRUFBYWx0QyxLQUFLLElBQUksVUFFd0JtQyxJQUE1QnFGLEVBQVFxNkMsaUJBQWdDcjZDLEVBQVFxNkMsa0JBRWxFM1UsRUFBYWx0QyxLQUFLLElBQUksR0FBZ0IsQ0FDbEMrNUIsTUFBT3Z5QixFQUFRczZDLFVBQ2Zsb0IsU0FBVXB5QixFQUFRdTZDLHNCQUdRNS9DLElBQXBCcUYsRUFBUXc2QyxTQUF3Qng2QyxFQUFRdzZDLFVBRWxEOVUsRUFBYWx0QyxLQUFLLElBQUksR0FBUSxDQUMxQnU3QyxZQUFhL3pDLEVBQVErekMsWUFDckJOLFFBQVNBLFdBR3lCOTRDLElBQXhCcUYsRUFBUXk2QyxhQUE0Qno2QyxFQUFReTZDLGNBRTFEL1UsRUFBYWx0QyxLQUFLLElBQUksVUFFWW1DLElBQXRCcUYsRUFBUTA2QyxXQUEwQjE2QyxFQUFRMDZDLFlBRXREaFYsRUFBYWx0QyxLQUFLLElBQUksR0FBVSxDQUM1QjQ1QixTQUFVcHlCLEVBQVF1NkMsc0JBR1U1L0MsSUFBckJxRixFQUFRMjZDLFVBQXlCMzZDLEVBQVEyNkMsWUFFcERqVixFQUFhbHRDLEtBQUssSUFBSSxJQUN0Qmt0QyxFQUFhbHRDLEtBQUssSUFBSSxHQUFhLENBQy9CKzVCLE1BQU92eUIsRUFBUXM2QyxVQUNmbG9CLFNBQVVweUIsRUFBUXU2Qyx1QkFHc0I1L0MsSUFBM0JxRixFQUFRNDZDLGdCQUErQjU2QyxFQUFRNDZDLGlCQUVoRWxWLEVBQWFsdEMsS0FBSyxJQUFJLEdBQWUsQ0FDakN1N0MsWUFBYS96QyxFQUFRK3pDLFlBQ3JCM2hCLFNBQVVweUIsRUFBUXU2QyxzQkFHb0I1L0MsSUFBMUJxRixFQUFRNjZDLGVBQThCNzZDLEVBQVE2NkMsZ0JBRTlEblYsRUFBYWx0QyxLQUFLLElBQUksR0FBUyxDQUMzQjQ1QixTQUFVcHlCLEVBQVF1NkMsZ0JBR25CN1UsRUZyRHdCLElBSW5CdnNDLEVBQU9MLEtBQUtwRCxLQUFNc0ssSUFBWXRLLEtBTTFDLE9BckJBLEdBQVVnbkMsRUFBS3ZqQyxHQWtCZnVqQyxFQUFJNW1DLFVBQVUrTyxlQUFpQixXQUMzQixPQUFPLElBQUlpMkMsR0FBcUJwbEQsT0FFN0JnbkMsRUF0QmEsQ0F1QnRCLElHbEZJLE1BQWdCcWUsV0FBeUIsR0FhN0MsWUFBc0JDLEVBQW9DaDdDLEdBRXhELE1BQU1pN0MsRUFBT2o3QyxHQUFvQixHQUVqQyxJQUFJaTdDLEVBQUtoZixRQUFTLENBQ2hCLE1BQU1BLEVBQVV2dUIsU0FBU0MsY0FBYyxPQUN2Q3N1QixFQUFRdDdCLFVBQVksaUJBQ3BCczZDLEVBQUtoZixRQUFVQSxFQUdqQixJQUFJRSxFQUVGQSxFQURFNmUsYUFBeUIsR0FDaEIsQ0FBQ0EsR0FFREEsRUFHYjdlLEVBQVM3a0IsU0FBUTh3QixJQUNmQSxFQUFRYSxVQUFVZ1MsRUFBS2hmLFlBR3pCaWYsTUFBTUQsR0FFTnZsRCxLQUFLc2xELGNBQWdCN2UsRUFTdkIsT0FBTzM0QixHQUNMMDNDLE1BQU16M0MsT0FBT0QsR0FDVkEsR0FDRDlOLEtBQUtzbEQsY0FBYzFqQyxTQUFROHdCLElBQ3pCQSxFQUFRM2tDLE9BQU9ELE1BU2QsbUJBQ0wsT0FBTzlOLEtBQUtzbEQsZUNuRFYsTUFBT0csV0FBa0JKLEdBVTdCLFlBQVkvNkMsR0FDVixNQUFNaThCLEVBQVVqOEIsRUFBUWk4QixRQUFVajhCLEVBQVFpOEIsUUFBVXZ1QixTQUFTQyxjQUFjLE9BQzNFc3VCLEVBQVFrVCxVQUFVeDRCLElBQUkzVyxFQUFRbzdDLFlBQzlCcDdDLEVBQVFpOEIsUUFBVUEsRUFDbEJpZixNQUFNbDdDLEVBQVFnN0MsY0FBZWg3QyxHQUM3QnRLLEtBQUswbEQsV0FBYXA3QyxFQUFRbzdDLFdBTXJCLGdCQUNMLE9BQU8xbEQsS0FBSzBsRCxZQ3pDaEIsSUFBSSxHQUF3QyxXQUN4QyxJQUFJL2lELEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0EyQnhDLEdBQ1UsV0FEVixHQUVtQixtQkFGbkIsR0FHVSxXQUhWLEdBSW1CLG1CQUpuQixHQUtTLFVBTFQsR0FNVSxXQU5WLEdBT1ksYUFQWixHQVFPLFFBUlAsR0FTVSxXQVRWLEdBVWtCLGtCQU1sQnFpRCxHQUFrQyxTQUFVbGlELEdBSzVDLFNBQVNraUQsRUFBaUJ6eUMsR0FDdEIsSUFBSXRQLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNeUcsSUFBb0J6RyxLQVNsRCxPQUxBNEQsRUFBTTJFLEtBQU8ySyxFQUFNM0ssS0FJbkIzRSxFQUFNNEUsUUFBVTBLLEVBQU0xSyxRQUNmNUUsRUFFWCxPQWhCQSxHQUFVK2hELEVBQWtCbGlELEdBZ0JyQmtpRCxFQWpCMEIsQ0FrQm5DLEdBcVNGLFNBdlBpQyxTQUFVbGlELEdBS3ZDLFNBQVNtaUQsRUFBWXIyQyxHQUNqQixJQUFJM0wsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBSWpDNEQsRUFBTXFDLEdBSU5yQyxFQUFNdUMsS0FJTnZDLEVBQU15QyxHQUNOLElBQUlpRSxFQUFVaUYsR0FBZSxHQTBCN0IsT0FwQkEzTCxFQUFNaWlELFVBQVksS0FLbEJqaUQsRUFBTWtpRCxXQUFhL2tDLEdBS25CbmQsRUFBTW1pRCxjQUFXOWdELEVBQ2pCckIsRUFBTW9FLGtCQUFrQixHQUFxQnBFLEVBQU1vaUQsMEJBQ25EcGlELEVBQU1vRSxrQkFBa0IsR0FBbUJwRSxFQUFNcWlELDZCQUN0QmhoRCxJQUF2QnFGLEVBQVFvRyxZQUNSOU0sRUFBTXNpRCxjQUFjNTdDLEVBQVFvRyxpQkFFQXpMLElBQTVCcUYsRUFBUTY3QyxpQkFDUnZpRCxFQUFNd2lELG1CQUFtQjk3QyxFQUFRNjdDLGlCQUVyQ3ZpRCxFQUFNeWlELGlCQUFpQ3BoRCxJQUFyQnFGLEVBQVFnOEMsVUFBeUJoOEMsRUFBUWc4QyxVQUNwRDFpRCxFQXdNWCxPQXBQQSxHQUFVZ2lELEVBQWFuaUQsR0FpRHZCbWlELEVBQVl4bEQsVUFBVU0sZ0JBQWtCLFdBQ3BDVixLQUFLcW1ELGFBQVksR0FDakI1aUQsRUFBT3JELFVBQVVNLGdCQUFnQjBDLEtBQUtwRCxPQUsxQzRsRCxFQUFZeGxELFVBQVU0bEQseUJBQTJCLFdBQzdDLElBQUl0MUMsRUFBYTFRLEtBQUttOEIsZ0JBQ2xCenJCLElBQ0ExUSxLQUFLOGxELFdBQWF0a0MsR0FBNEIsR0FBYyxhQUFjOVEsR0FDdEUxUSxLQUFLNmxELFdBQ0w3bEQsS0FBS2tJLElBQUksR0FBbUJsSSxLQUFLOGxELFdBQVc5bEQsS0FBSzZsRCxjQU83REQsRUFBWXhsRCxVQUFVNmxELHVCQUF5QixXQUMzQyxHQUFJLGdCQUFpQi96QyxVQUFXLENBQzVCLElBQUlvMEMsRUFBV3RtRCxLQUFLdW1ELGNBQ2hCRCxRQUE4QnJoRCxJQUFsQmpGLEtBQUsrbEQsU0FDakIvbEQsS0FBSytsRCxTQUFXN3pDLFVBQVVzMEMsWUFBWUMsY0FBY3ptRCxLQUFLMG1ELGdCQUFnQmhoRCxLQUFLMUYsTUFBT0EsS0FBSzJtRCxlQUFlamhELEtBQUsxRixNQUFPQSxLQUFLNG1ELHNCQUVwSE4sUUFBOEJyaEQsSUFBbEJqRixLQUFLK2xELFdBQ3ZCN3pDLFVBQVVzMEMsWUFBWUssV0FBVzdtRCxLQUFLK2xELFVBQ3RDL2xELEtBQUsrbEQsY0FBVzlnRCxLQVE1QjJnRCxFQUFZeGxELFVBQVVzbUQsZ0JBQWtCLFNBQVVqdEMsR0FDOUMsSUFBSXdtQixFQUFTeG1CLEVBQVN3bUIsT0FDdEJqZ0MsS0FBS2tJLElBQUksR0FBbUIrM0IsRUFBTzZtQixVQUNuQzltRCxLQUFLa0ksSUFBSSxHQUF1QyxPQUFwQiszQixFQUFPOG1CLGNBQW9COWhELEVBQVlnN0IsRUFBTzhtQixVQUMxRS9tRCxLQUFLa0ksSUFBSSxHQUF3RCxPQUE1QiszQixFQUFPK21CLHNCQUE0Qi9oRCxFQUFZZzdCLEVBQU8rbUIsa0JBQzNGaG5ELEtBQUtrSSxJQUFJLEdBQXFDLE9BQW5CKzNCLEVBQU9nbkIsYUFBbUJoaUQsRUFBWSxHQUFVZzdCLEVBQU9nbkIsVUFDN0VqbkQsS0FBSzZsRCxXQUlON2xELEtBQUs2bEQsVUFBVSxHQUFLNWxCLEVBQU9pbkIsVUFDM0JsbkQsS0FBSzZsRCxVQUFVLEdBQUs1bEIsRUFBT2tuQixVQUozQm5uRCxLQUFLNmxELFVBQVksQ0FBQzVsQixFQUFPaW5CLFVBQVdqbkIsRUFBT2tuQixVQU0vQyxJQUFJQyxFQUFvQnBuRCxLQUFLOGxELFdBQVc5bEQsS0FBSzZsRCxXQUM3QzdsRCxLQUFLa0ksSUFBSSxHQUFtQmsvQyxHQUM1QnBuRCxLQUFLa0ksSUFBSSxHQUFpQyxPQUFqQiszQixFQUFPb25CLFdBQWlCcGlELEVBQVlnN0IsRUFBT29uQixPQUNwRSxJQUFJdm5CLEVuRDJITCxTQUFrQnJwQixFQUFRcUosRUFBUXduQyxFQUFPQyxHQUk1QyxJQUhBLElBRUlqeUMsRUFBa0IsR0FDYm5VLEVBQUksRUFBR0EsRUFIUSxLQUdDQSxFQUNyQkMsRUFBT2tVLEVBQWlCLEdBQWFtQixFQUFRcUosRUFBUyxFQUFJL1csS0FBS2tCLEdBQUs5SSxFQUpoRCxHbUQ1SExxbUQsWW5EbUluQixPQURBbHlDLEVBQWdCeFMsS0FBS3dTLEVBQWdCLEdBQUlBLEVBQWdCLElBQ2xELElBQUlnZixHQUFRaGYsRUFBaUJrYSxHQUFtQixDQUNuRGxhLEVBQWdCcFUsU21EcElEc21ELENBQWdCeG5ELEtBQUs2bEQsVUFBVzVsQixFQUFPNm1CLFVBQ3REaG5CLEVBQVMxUyxlQUFlcHRCLEtBQUs4bEQsWUFDN0I5bEQsS0FBS2tJLElBQUksR0FBNEI0M0IsR0FDckM5L0IsS0FBS3dHLFdBTVRvL0MsRUFBWXhsRCxVQUFVdW1ELGVBQWlCLFNBQVV6ekMsR0FDN0NsVCxLQUFLc0UsY0FBYyxJQUFJcWhELEdBQWlCenlDLEtBUzVDMHlDLEVBQVl4bEQsVUFBVXFuRCxZQUFjLFdBQ2hDLE9BQXdDem5ELEtBQUt5SCxJQUFJLEtBUXJEbStDLEVBQVl4bEQsVUFBVXNuRCxvQkFBc0IsV0FDeEMsT0FBNEQxbkQsS0FBS3lILElBQUksS0FBK0IsTUFTeEdtK0MsRUFBWXhsRCxVQUFVdW5ELFlBQWMsV0FDaEMsT0FBd0MzbkQsS0FBS3lILElBQUksS0FTckRtK0MsRUFBWXhsRCxVQUFVd25ELG9CQUFzQixXQUN4QyxPQUF3QzVuRCxLQUFLeUgsSUFBSSxLQVVyRG0rQyxFQUFZeGxELFVBQVV5bkQsV0FBYSxXQUMvQixPQUF3QzduRCxLQUFLeUgsSUFBSSxLQVNyRG0rQyxFQUFZeGxELFVBQVUwbkQsWUFBYyxXQUNoQyxPQUFzRTluRCxLQUFLeUgsSUFBSSxLQVNuRm0rQyxFQUFZeGxELFVBQVUrN0IsY0FBZ0IsV0FDbEMsT0FBd0VuOEIsS0FBS3lILElBQUksS0FTckZtK0MsRUFBWXhsRCxVQUFVMm5ELFNBQVcsV0FDN0IsT0FBd0MvbkQsS0FBS3lILElBQUksS0FRckRtK0MsRUFBWXhsRCxVQUFVbW1ELFlBQWMsV0FDaEMsT0FBK0J2bUQsS0FBS3lILElBQUksS0FXNUNtK0MsRUFBWXhsRCxVQUFVd21ELG1CQUFxQixXQUN2QyxPQUFpRDVtRCxLQUFLeUgsSUFBSSxLQVM5RG0rQyxFQUFZeGxELFVBQVU4bEQsY0FBZ0IsU0FBVXgxQyxHQUM1QzFRLEtBQUtrSSxJQUFJLEdBQXFCLEdBQWN3SSxLQVFoRGsxQyxFQUFZeGxELFVBQVVpbUQsWUFBYyxTQUFVQyxHQUMxQ3RtRCxLQUFLa0ksSUFBSSxHQUFtQm8rQyxJQVdoQ1YsRUFBWXhsRCxVQUFVZ21ELG1CQUFxQixTQUFVOTdDLEdBQ2pEdEssS0FBS2tJLElBQUksR0FBMkJvQyxJQUVqQ3M3QyxFQXJQcUIsQ0FzUDlCLEdDdlNJLE1BQWdCb0MsV0FBZTNDLEdBc0JuQyxZQUFzQi82QyxFQUF3Qmc3QyxHQUU1Q2g3QyxFQUFRMjlDLHVCQUF1QjM5QyxFQUFRMjlDLHNCQUF1QjM5QyxFQUFRMjlDLHFCQUV0RTM5QyxFQUFRNDlDLFFBQVU1OUMsRUFBUTQ5QyxTQUFXLEtBQ3JDNTlDLEVBQVE2OUMsY0FBZ0I3OUMsRUFBUTY5QyxlQUFpQixLQUM1QixPQUFsQjc5QyxFQUFRNDlDLFNBQTBDLE9BQXhCNTlDLEVBQVE2OUMsZ0JBQ25DNzlDLEVBQVE0OUMsUUFBVSxPQUVwQjU5QyxFQUFRODlDLFFBQVU5OUMsRUFBUTg5QyxTQUFXLEdBRXJDLE1BQU1DLEVBQXlCLzlDLEVBQVFpOEIsUUFBVWo4QixFQUFRaThCLFFBQVV2dUIsU0FBU0MsY0FBYyxPQUMxRm93QyxFQUF1QnA5QyxVQUFZWCxFQUFRZytDLG1CQUFxQmgrQyxFQUFRZytDLG1CQUFxQiwwQkFDN0ZELEVBQXVCN1AsTUFBUWx1QyxFQUFRODlDLFFBRXZDLE1BQU1HLEVBQWdCdndDLFNBQVNDLGNBQWMsVUFlN0MsR0FkQXN3QyxFQUFjdDlDLFVBQVksbUJBRUgsT0FBcEJYLEVBQVE0OUMsUUFDVEssRUFBY3JRLFlBQWM3MEMsT0FBT21sRCxjQUFjbCtDLEVBQVE0OUMsU0FDdEIsT0FBMUI1OUMsRUFBUTY5QyxlQUNqQkksRUFBYzd1QyxZQUFZc3VDLEdBQU9TLCtCQUErQm4rQyxFQUFRNjlDLGdCQUcxRUksRUFBYy9QLE1BQVFsdUMsRUFBUTg5QyxRQUMzQjk5QyxFQUFRODlDLFFBQVFsbkQsT0FBUyxHQUMxQnFuRCxFQUFjaFEsYUFBYSxhQUFjanVDLEVBQVE4OUMsU0FFbkRDLEVBQXVCSyxPQUFPSCxHQUUxQmorQyxFQUFRMjlDLHFCQUFzQixDQUNoQyxNQUFNVSxFQUFhM3dDLFNBQVNDLGNBQWMsT0FDMUMwd0MsRUFBVzE5QyxVQUFZLHFDQUN2QixNQUFNMjlDLEVBQWM1d0MsU0FBU0MsY0FBYyxRQUMzQzJ3QyxFQUFZMVEsWUFBYzV0QyxFQUFRODlDLFFBQ2xDUSxFQUFZMzlDLFVBQVksMkJBQ3hCMDlDLEVBQVdqdkMsWUFBWWt2QyxHQUN2QlAsRUFBdUIzdUMsWUFBWWl2QyxHQUdyQ25ELE1BQU1GLEdBQWdDLEdBQUUsK0JBQ25DaDdDLEdBQU8sQ0FDVmk4QixRQUFTOGhCLEtBR1hyb0QsS0FBS2tvRCxRQUFVNTlDLEVBQVE0OUMsUUFDdkJsb0QsS0FBS21vRCxjQUFnQjc5QyxFQUFRNjlDLGNBQzdCbm9ELEtBQUttc0MsT0FBU29jLEVBRWR2b0QsS0FBS3VtQyxRQUFRdGlDLGlCQUFpQixTQUFTLElBQU1qRSxLQUFLc0UsY0FBYyxXQUFVLEdBRXRFZ0csRUFBUWpLLGdCQUNWTCxLQUFLaUcsR0FBRyxRQUFTakcsS0FBSzZFLGFBWW5CLFlBQVlOLEdBQ2pCLE9BQU8sRUFNRixZQUNMLE9BQU92RSxLQUFLbXNDLE9BUVAsaUJBQWlCK2IsR0FDdEJsb0QsS0FBSzZvRCxZQUFZdFAsVUFBWSxHQUM3QnY1QyxLQUFLNm9ELFlBQVkzUSxZQUFjNzBDLE9BQU9tbEQsY0FBY04sR0FRL0MsdUJBQXVCQyxHQUM1Qm5vRCxLQUFLNm9ELFlBQVkzUSxZQUFjLEdBQy9CbDRDLEtBQUs2b0QsWUFBWXRQLFVBQVksR0FDN0J2NUMsS0FBSzZvRCxZQUFZbnZDLFlBQVlzdUMsR0FBT1MsK0JBQStCTixJQVNoQyxzQ0FBQ0EsR0FDcEMsTUFBTVcsRUFBYzl3QyxTQUFTQyxjQUFjLEtBRTNDLE9BREE2d0MsRUFBWTc5QyxVQUFZLGFBQWVrOUMsRUFDaENXLEdDcEtMLE1BQU9DLFdBQStCdGtELEVBVTFDLFlBQVkxRSxFQUFjMFosR0FDeEIrckMsTUFBTXpsRCxHQUVOQyxLQUFLeVosU0FBV0EsR0MvQnBCLElBQUksR0FBd0MsV0FDeEMsSUFBSTlXLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FzQnhDMGxELEdBQWEsYUFJYkMsR0FBb0IsbUJBdVF4QixTQWhPbUMsU0FBVXhsRCxHQUt6QyxTQUFTeWxELEVBQWMzNUMsR0FDbkIsSUFBSTNMLEVBQVE1RCxLQUNSc0ssRUFBVWlGLEdBQTRCLEdBQ3RDZzNCLEVBQVV2dUIsU0FBU0MsY0FBYyxPQUNyQ3N1QixFQUFRdDdCLGVBQ2tCaEcsSUFBdEJxRixFQUFRVyxVQUEwQlgsRUFBUVcsVUFBWSxxQkFDMURySCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTSxDQUN0QnVtQyxRQUFTQSxFQUNUMTRCLE9BQVF2RCxFQUFRdUQsT0FDaEIxTixPQUFRbUssRUFBUW5LLFVBQ2RILE1BSUFpRyxHQUlOckMsRUFBTXVDLEtBSU52QyxFQUFNeUMsR0FDTnpDLEVBQU1vRSxrQkFBa0JnaEQsR0FBWXBsRCxFQUFNb2lELDBCQUN0QzE3QyxFQUFRNitDLGtCQUNSdmxELEVBQU13bEQsb0JBQW9COStDLEVBQVE2K0Msa0JBRWxDNytDLEVBQVFvRyxZQUNSOU0sRUFBTXNpRCxjQUFjNTdDLEVBQVFvRyxZQU1oQyxJQUFJMjRDLEdBQW1CLEVBSW5CQyxFQUFjLFNBeUNsQixNQXhDSSxrQkFBbUJoL0MsUUFFV3JGLElBQTFCcUYsRUFBUWkvQyxnQkFDUkQsRUFBY2gvQyxFQUFRaS9DLGVBRTFCRixJQUFxQkMsR0FFaEIsZ0JBQWlCaC9DLEtBQ00sSUFBeEJBLEVBQVFnL0MsWUFDUkQsR0FBbUIsRUFHbkJDLEVBQWNqbUQsT0FBT2lILEVBQVFnL0MsY0FPckMxbEQsRUFBTTRsRCxhQUFlRixFQUtyQjFsRCxFQUFNNmxELGtCQUFvQkosRUFLMUJ6bEQsRUFBTThsRCxjQUFnQm5qQixFQUFRZ1QsVUFLOUIzMUMsRUFBTStsRCxlQUFpQixLQUt2Qi9sRCxFQUFNa2lELFdBQWEsS0FDWmxpRCxFQTBJWCxPQTdOQSxHQUFVc2xELEVBQWV6bEQsR0F3RnpCeWxELEVBQWM5b0QsVUFBVTRsRCx5QkFBMkIsV0FDL0NobUQsS0FBSzhsRCxXQUFhLE1BVXRCb0QsRUFBYzlvRCxVQUFVd3BELG9CQUFzQixXQUMxQyxPQUE2RTVwRCxLQUFLeUgsSUFBSXdoRCxLQVMxRkMsRUFBYzlvRCxVQUFVKzdCLGNBQWdCLFdBQ3BDLE9BQXlFbjhCLEtBQUt5SCxJQUFJdWhELEtBTXRGRSxFQUFjOW9ELFVBQVV5cEQsZ0JBQWtCLFNBQVV0bEQsR0FDaEQsSUFBSXVKLEVBQU05TixLQUFLbWxDLFNBQ2ZubEMsS0FBSzhwRCxZQUFZaDhDLEVBQUk4N0IsY0FBY3JsQyxLQU12QzJrRCxFQUFjOW9ELFVBQVUycEQsZUFBaUIsU0FBVXhsRCxHQUMvQ3ZFLEtBQUs4cEQsWUFBWSxPQVNyQlosRUFBYzlvRCxVQUFVMk4sT0FBUyxTQUFVRCxHQUV2QyxHQURBckssRUFBT3JELFVBQVUyTixPQUFPM0ssS0FBS3BELEtBQU04TixHQUMvQkEsRUFBSyxDQUNMLElBQUlrOEMsRUFBV2w4QyxFQUFJazRCLGNBQ25CaG1DLEtBQUttM0MsYUFBYXIwQyxLQUFLeUMsRUFBT3lrRCxFQUFVLEdBQXVCaHFELEtBQUs2cEQsZ0JBQWlCN3BELE9BQ2pGQSxLQUFLeXBELG1CQUNMenBELEtBQUttM0MsYUFBYXIwQyxLQUFLeUMsRUFBT3lrRCxFckNyTTlCLGFxQ3FNOERocUQsS0FBSytwRCxlQUFnQi9wRCxPQUV2RkEsS0FBSzhwRCxZQUFZLFFBVXpCWixFQUFjOW9ELFVBQVVncEQsb0JBQXNCLFNBQVVhLEdBQ3BEanFELEtBQUtrSSxJQUFJK2dELEdBQW1CZ0IsSUFTaENmLEVBQWM5b0QsVUFBVThsRCxjQUFnQixTQUFVeDFDLEdBQzlDMVEsS0FBS2tJLElBQUk4Z0QsR0FBWSxHQUFjdDRDLEtBTXZDdzRDLEVBQWM5b0QsVUFBVTBwRCxZQUFjLFNBQVV0N0MsR0FDNUMsSUFBSTA3QyxFQUFPbHFELEtBQUt3cEQsYUFDaEIsR0FBSWg3QyxHQUFTeE8sS0FBSzJwRCxlQUFnQixDQUM5QixJQUFLM3BELEtBQUs4bEQsV0FBWSxDQUNsQixJQUFJcDFDLEVBQWExUSxLQUFLbThCLGdCQUVsQm44QixLQUFLOGxELFdBRExwMUMsRUFDa0I4USxHQUE0QnhoQixLQUFLMnBELGVBQWdCajVDLEdBR2pEcVEsR0FHMUIsSUFDSWhRLEVBRE0vUSxLQUFLbWxDLFNBQ01zTywrQkFBK0JqbEMsR0FDcEQsR0FBSXVDLEVBQVksQ0FDWixJQUFJNFIsRUFBaUJDLEtBQ2pCRCxJQUNBM2lCLEtBQUs4bEQsV0FBYXRrQyxHQUE0QnhoQixLQUFLMnBELGVBQWdCaG5DLElBRXZFM2lCLEtBQUs4bEQsV0FBVy8wQyxFQUFZQSxHQUM1QixJQUFJbzRDLEVBQW1CbnBELEtBQUs0cEQsc0JBRXhCTSxFQURBZixFQUNPQSxFQUFpQnA0QyxHQUdqQkEsRUFBV1AsWUFJekJ4USxLQUFLMHBELGVBQWlCUSxJQUFTbHFELEtBQUswcEQsZ0JBQ3JDMXBELEtBQUt1bUMsUUFBUWdULFVBQVkyUSxFQUN6QmxxRCxLQUFLMHBELGNBQWdCUSxJQVM3QmhCLEVBQWM5b0QsVUFBVXlOLE9BQVMsU0FBVXVwQyxHQUN2QyxJQUFJem9DLEVBQWF5b0MsRUFBU3pvQyxXQUNyQkEsRUFJRzNPLEtBQUsycEQsZ0JBQWtCaDdDLEVBQVd2QixVQUFVc0QsYUFDNUMxUSxLQUFLMnBELGVBQWlCaDdDLEVBQVd2QixVQUFVc0QsV0FDM0MxUSxLQUFLOGxELFdBQWEsTUFMdEI5bEQsS0FBSzJwRCxlQUFpQixNQVN2QlQsRUE5TnVCLENBK05oQyxJQ3RSV2lCLEdBQWMsS0FBTyxJQU01QkMsR0FBaUIsQ0FBQyxFQUFHLEVBQUcsR0NEeEIsTUFBT0MsV0FBeUIsRUFFcEMsWUFBWXRxRCxFQUFjd3BDLEdBQ3hCaWMsTUFBTXpsRCxHQUNOQyxLQUFLdXBDLGNBQWdCQSxHQWlCbkIsTUFBTytnQixXQUFpQixHQTZENUIsWUFBWWhnRCxHQUVWLE1BQU1pN0MsRUFBT2o3QyxHQUFXLEdBRWxCaWdELEVBQTJCdnlDLFNBQVNDLGNBQWMsT0FDeERzeUMsRUFBeUJ0L0MsVUFBWSxzQkFFckMsTUFBTXUvQyxFQUFnQnh5QyxTQUFTQyxjQUFjLFVBQzdDdXlDLEVBQWNqUixVQUFZK1EsR0FBU0csU0FFbkNGLEVBQXlCN3dDLFlBQVk4d0MsR0FFckNqRixFQUFLaGYsUUFBVWdrQixFQUVmL0UsTUFBTUQsR0FFTnZsRCxLQUFLSyxlQUFpQmtsRCxFQUFLbGxELGlCQUFrQixFQUU3Q0wsS0FBS3VxRCx5QkFBMkJBLEVBR2hDdnFELEtBQUsrTCxPQUFTcUksR0FBZSxDQUFDLENBQUMsTUFBUyxPQUFVLENBQUMsTUFBUyxTQUU1RHBVLEtBQUt1cUQseUJBQXlCdG1ELGlCQUFpQixTQUFVaVEsR0FBTWxVLEtBQUtzRSxjQUFjLElBQUkrbEQsR0FBaUIsUUFBU24yQyxNQUFLLEdBRWpIbFUsS0FBS0ssZ0JBQ1BMLEtBQUtpRyxHQUFHLFFBQVNqRyxLQUFLMHFELHNCQUd4QjFxRCxLQUFLMnFELFdBQWFILEVBQWN0a0IsV0FFaENsbUMsS0FBSzRxRCx5QkFBMkI1eUMsU0FBUzZ5QyxnQkFBZ0IsNkJBQThCLFFBQ3ZGN3FELEtBQUs0cUQseUJBQXlCclMsYUFBYSxRQUFTLG1DQUNwRHY0QyxLQUFLNHFELHlCQUF5QnJTLGFBQWEsSUFBS2wxQyxPQUFPLElBQ3ZEckQsS0FBSzRxRCx5QkFBeUJyUyxhQUFhLElBQUtsMUMsT0FBTyxJQUN2RHJELEtBQUs0cUQseUJBQXlCclMsYUFBYSxLQUFNbDFDLE9BQU8sSUFDeERyRCxLQUFLNHFELHlCQUF5QnJTLGFBQWEsS0FBTWwxQyxPQUFPLElBQ3hEckQsS0FBSzRxRCx5QkFBeUJyUyxhQUFhLFFBQVNsMUMsT0FBT2luRCxHQUFTUSxZQUNwRTlxRCxLQUFLNHFELHlCQUF5QnJTLGFBQWEsU0FBVWwxQyxPQUFPaW5ELEdBQVNTLGFBQ3JFL3FELEtBQUs0cUQseUJBQXlCclMsYUFBYSxRQUFTLGtCQUNwRHY0QyxLQUFLNHFELHlCQUF5QnJTLGFBQWEsT0FBUStSLEdBQVNVLGtCQUU1RGhyRCxLQUFLMnFELFdBQVdNLFFBQVFqckQsS0FBSzRxRCwwQkFPeEIsT0FBTzk4QyxHQUNaMDNDLE1BQU16M0MsT0FBT0QsR0FDVEEsSUFJRTlOLEtBQUtLLGdCQUNQeU4sRUFBSTdILEdBQUcsV0FBWTFCLEdBQW9CdkUsS0FBS2tyRCxnQkFBZ0IzbUQsTUFVeEQsZ0JBQWdCQSxHLE1BRXhCLE1BQU1vUyxFQUFPLENBQUMyekMsR0FBU1EsVUFBV1IsR0FBU1MsWUFFckN0MEMsRUFBU3pXLEtBQUttckQsd0JBQTJDLFFBQW5CLEVBQUE1bUQsRUFBTXVKLElBQUl3bUMsaUJBQVMsZUFBRWwrQixhQWNqRSxHQVhJSyxFQUFPLEdBQUtFLEVBQUssR0FDbkJGLEVBQU8sR0FBS0UsRUFBSyxHQUNWRixFQUFPLEdBQUssSUFDbkJBLEVBQU8sR0FBSyxHQUVWQSxFQUFPLEdBQUtFLEVBQUssR0FDbkJGLEVBQU8sR0FBS0UsRUFBSyxHQUNWRixFQUFPLEdBQUssSUFDbkJBLEVBQU8sR0FBSyxHQUdWelcsS0FBSzJxRCxXQUFZLENBQ25CLE1BQU1TLEVBQWVwckQsS0FBSzJxRCxXQUFXVSx1QkFBdUIsa0NBQzVELEdBQUlELEVBQ0YsSUFBSyxNQUFNRSxLQUFlL3BELE1BQU1ncUQsS0FBS0gsR0FDbkNwckQsS0FBSzJxRCxXQUFXOXhDLFlBQVl5eUMsR0FHaEN0ckQsS0FBSzJxRCxXQUFXanhDLFlBQVk0d0MsR0FBU2tCLGFBQWEvMEMsRUFBTyxHQUFJLEVBQUdBLEVBQU8sR0FBSTZ6QyxHQUFTUyxXQUFZLHFDQUNoRy9xRCxLQUFLMnFELFdBQVdqeEMsWUFBWTR3QyxHQUFTa0IsYUFBYSxFQUFHLzBDLEVBQU8sR0FBSTZ6QyxHQUFTUSxVQUFXcjBDLEVBQU8sR0FBSSxzQ0FjekUsb0JBQUNqTixFQUFZQyxFQUFZQyxFQUFZQyxFQUFZOGhELEdBQ3pFLE1BQU1DLEVBQU8xekMsU0FBUzZ5QyxnQkFBZ0IsNkJBQThCLFFBT3BFLE9BTkFhLEVBQUtuVCxhQUFhLEtBQU1sMUMsT0FBT21HLElBQy9Ca2lELEVBQUtuVCxhQUFhLEtBQU1sMUMsT0FBT29HLElBQy9CaWlELEVBQUtuVCxhQUFhLEtBQU1sMUMsT0FBT3FHLElBQy9CZ2lELEVBQUtuVCxhQUFhLEtBQU1sMUMsT0FBT3NHLElBQy9CK2hELEVBQUtuVCxhQUFhLFFBQVMsaURBQzNCbVQsRUFBS25ULGFBQWEsUUFBUyxrQ0FBb0NrVCxHQUN4REMsRUFVaUMsb0NBQUMveEMsRUFBY3lhLEVBQWVsYyxHQUN0RSxPQUFPblAsS0FBS2t0QixJQUFLdGMsRUFBT3lhLEdBQVVsYyxFQVExQix3QkFBd0J6QixHQUNoQyxHQUFJQSxFQUFRLENBQ1YsTUFBTUUsRUFBTyxDQUFDMnpDLEdBQVNRLFVBQVdSLEdBQVNTLFlBQ3JDMTlDLEVBQWEsQ0FDakJpOUMsR0FBU3FCLDZCQUE2QjNyRCxLQUFLK0wsT0FBTyxHQUFJL0wsS0FBSytMLE9BQU8sR0FBSTRLLEVBQUssSUFDM0UyekMsR0FBU3FCLDZCQUE2QjNyRCxLQUFLK0wsT0FBTyxHQUFJL0wsS0FBSytMLE9BQU8sR0FBSTRLLEVBQUssS0FFN0UsTUFBTyxDQUNMNU4sS0FBSzJDLE1BQU0sRUFBSTJCLEVBQVcsSUFBTW9KLEVBQU8sR0FBS3pXLEtBQUsrTCxPQUFPLEtBQ3hEaEQsS0FBSzJDLE1BQU0sRUFBSTJCLEVBQVcsSUFBTXJOLEtBQUsrTCxPQUFPLEdBQUswSyxFQUFPLE1BRzVELE1BQU8sQ0FBQyxFQUFHLEdBVUgscUJBQXFCdkMsRyxRQUU3QixNQUFNMDNDLEVBQXNDNXJELEtBQUt1cUQseUJBQXlCdlcsd0JBQ3BFL3FDLEVBQUlpTCxFQUFFcTFCLGNBQWNtRCxRQUFVa2YsRUFBb0NqeUMsS0FDbEV6USxFQUFJZ0wsRUFBRXExQixjQUFjb0QsUUFBVWlmLEVBQW9DelgsSUFHbEUwWCxFQUFjN3JELEtBQUs4ckQsd0JBQXdCLENBQUM3aUQsRUFBR0MsSUFHN0IsUUFBeEIsRUFBYSxRQUFiLEVBQUFsSixLQUFLbWxDLGdCQUFRLGVBQUVtUCxpQkFBUyxTQUFFeHJCLFFBQVEsQ0FDaENyUyxPQUFRbzFDLEVBQ1JudkIsU0FBVSxNQWdCSix3QkFBd0JxdkIsR0FFaEMsTUFBTXAxQyxFQUFPLENBQUMzVyxLQUFLdXFELHlCQUF5QnlCLFlBQWFoc0QsS0FBS3VxRCx5QkFBeUIwQixjQUNqRjUrQyxFQUFhLENBQ2pCaTlDLEdBQVNxQiw2QkFBNkIzckQsS0FBSytMLE9BQU8sR0FBSS9MLEtBQUsrTCxPQUFPLEdBQUk0SyxFQUFLLElBQzNFMnpDLEdBQVNxQiw2QkFBNkIzckQsS0FBSytMLE9BQU8sR0FBSS9MLEtBQUsrTCxPQUFPLEdBQUk0SyxFQUFLLEtBRzdFLE1BQU8sQ0FDTG8xQyxFQUFJLEdBQUsxK0MsRUFBVyxHQUFLck4sS0FBSytMLE9BQU8sR0FDckMvTCxLQUFLK0wsT0FBTyxHQUFLZ2dELEVBQUksR0FBSzErQyxFQUFXLElBT2xDLDhCQUNMLE9BQU9yTixLQUFLdXFELHlCQU1QLGdCQUNMLE9BQU92cUQsS0FBSzJxRCxXQU1QLDJCQUNMLE9BQU8zcUQsS0FBSzRxRCwwQkEvUVAsR0FBQUksaUJBQW1CLFVBS25CLEdBQUFELFdBQWEsSUFLYixHQUFBRCxVQUFZLElBS1osR0FBQUwsU0FBVyxnSUFBa0lILEdBQVNRLFVBQVksSUFBTVIsR0FBU1MsV0FBYSx3MkxDckRqTSxNQUFPbUIsV0FBY2xFLEdBU3pCLFlBQW1CMTlDLEdBQ2pCLE1BQU1pN0MsRUFBT2o3QyxHQUFXLEdBRXhCazdDLE1BQUssZUFBRzBDLFFBQVNnRSxHQUFNQyxnQkFBaUIvRCxRQUFTOEQsR0FBTUUscUJBQXNCbkUsc0JBQXNCLEdBQVMxQyxLQVY5RixHQUFBNkcscUJBQXVCLGlCQUN2QixHQUFBRCxnQkFBa0IsTUNUcEMsSUFBSSxHQUF3QyxXQUN4QyxJQUFJeHBELEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0F5UzVDLFNBcE4wQixTQUFVRyxHQU9oQyxTQUFTNG9ELEVBQUs5N0MsRUFBV2pGLEVBQU9pRSxHQUM1QixJQUFJM0wsRUFBUUgsRUFBT0wsS0FBS3BELE9BQVNBLEtBQzdCc0ssRUFBVWlGLEdBQTRCLEdBb0MxQyxPQWhDQTNMLEVBQU0yTSxVQUFZQSxFQUtsQjNNLEVBQU0wSCxNQUFRQSxFQU9kMUgsRUFBTTBvRCxZQUFjLEtBT3BCMW9ELEVBQU10QixJQUFNLEdBS1pzQixFQUFNMm9ELGlCQUNxQnRuRCxJQUF2QnFGLEVBQVF5ZCxXQUEyQixJQUFNemQsRUFBUXlkLFdBTXJEbmtCLEVBQU00b0Qsa0JBQW9CLEdBQ25CNW9ELEVBcUtYLE9Bak5BLEdBQVV5b0QsRUFBTTVvRCxHQWlEaEI0b0QsRUFBS2pzRCxVQUFVb0csUUFBVSxXQUNyQnhHLEtBQUtzRSxjQUFjbUMsSUFLdkI0bEQsRUFBS2pzRCxVQUFVcXNELFFBQVUsYUFJekJKLEVBQUtqc0QsVUFBVWtwQixPQUFTLFdBQ3BCLE9BQU90cEIsS0FBS3NDLElBQU0sSUFBTXRDLEtBQUt1USxXQVFqQzg3QyxFQUFLanNELFVBQVUrakIsZUFBaUIsV0FDNUIsSUFBS25rQixLQUFLc3NELFlBRU4sT0FBT3RzRCxLQUVYLElBQUlzUSxFQUFPdFEsS0FBS3NzRCxZQUtoQixFQUFHLENBQ0MsR25GNUpBLEdtRjRKSWg4QyxFQUFLakMsV0FJTCxPQURBck8sS0FBS3VzRCxZQUFjLEVBQ1pqOEMsRUFFWEEsRUFBT0EsRUFBS2c4QyxrQkFDUGg4QyxHQUVULE9BQU90USxNQU1YcXNELEVBQUtqc0QsVUFBVXNzRCxvQkFBc0IsV0FDakMsR0FBSzFzRCxLQUFLc3NELFlBQVYsQ0FHQSxJQUFJaDhDLEVBQU90USxLQUFLc3NELFlBQ1pwa0IsRUFBMkIsS0FDL0IsRUFBRyxDQUNDLEduRmxMQSxHbUZrTEk1M0IsRUFBS2pDLFdBQWdDLENBSXJDaUMsRUFBS2c4QyxZQUFjLEtBQ25CLE1uRnhMSCxHbUYwTFFoOEMsRUFBS2pDLFdBR1Y2NUIsRUFBTzUzQixFbkY5TGIsR21GZ01XQSxFQUFLakMsV0FHVjY1QixFQUFLb2tCLFlBQWNoOEMsRUFBS2c4QyxZQUd4QnBrQixFQUFPNTNCLEVBRVhBLEVBQU80M0IsRUFBS29rQixrQkFDUGg4QyxLQU9iKzdDLEVBQUtqc0QsVUFBVXVzRCxhQUFlLFdBQzFCLE9BQU8zc0QsS0FBS3VRLFdBS2hCODdDLEVBQUtqc0QsVUFBVWlPLFNBQVcsV0FDdEIsT0FBT3JPLEtBQUtzTCxPQVVoQitnRCxFQUFLanNELFVBQVU4akIsU0FBVyxTQUFVNVksR0FDaEMsR25GM05HLEltRjJOQ3RMLEtBQUtzTCxPQUE2QnRMLEtBQUtzTCxNQUFRQSxFQUMvQyxNQUFNLElBQUl4RSxNQUFNLGdDQUVwQjlHLEtBQUtzTCxNQUFRQSxFQUNidEwsS0FBS3dHLFdBU1Q2bEQsRUFBS2pzRCxVQUFVcVIsS0FBTyxXQUNsQixLQVFKNDZDLEVBQUtqc0QsVUFBVW1sQixTQUFXLFNBQVVzakIsRUFBSXJqQixHQUNwQyxJQUFLeGxCLEtBQUt1c0QsWUFDTixPQUFPLEVBRVgsSUFBSWo1QixFQUFRdHpCLEtBQUt3c0Qsa0JBQWtCM2pCLEdBQ25DLEdBQUt2VixHQUlBLElBQWUsSUFBWEEsRUFDTCxPQUFPLE9BSlBBLEVBQVE5TixFQUNSeGxCLEtBQUt3c0Qsa0JBQWtCM2pCLEdBQU12VixFQUtqQyxJQUFJdUosRUFBUXJYLEVBQU84TixFQUFRLElBQU8sR0FDbEMsT0FBSXVKLEdBQVM3OEIsS0FBS3VzRCxZQUNQLEVBRUp4Z0MsR0FBTzhRLEVBQVE3OEIsS0FBS3VzRCxjQVMvQkYsRUFBS2pzRCxVQUFVa2xCLGFBQWUsU0FBVXVqQixHQUNwQyxRQUFLN29DLEtBQUt1c0QsY0FHNkIsSUFBaEN2c0QsS0FBS3dzRCxrQkFBa0IzakIsSUFNbEN3akIsRUFBS2pzRCxVQUFVMm9CLGNBQWdCLFNBQVU4ZixHQUNqQzdvQyxLQUFLdXNELGNBQ0x2c0QsS0FBS3dzRCxrQkFBa0IzakIsSUFBTyxJQUcvQndqQixFQWxOYyxDQW1OdkIsR0N4U0YsSUFBSSxHQUF3QyxXQUN4QyxJQUFJMXBELEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FzRzVDLFNBOUUrQixTQUFVRyxHQVFyQyxTQUFTbXBELEVBQVU3Z0QsRUFBUXNCLEVBQVl5TixFQUFZeFAsR0FDL0MsSUFBSTFILEVBQVFILEVBQU9MLEtBQUtwRCxPQUFTQSxLQXFCakMsT0FoQkE0RCxFQUFNbUksT0FBU0EsRUFLZm5JLEVBQU02c0MsWUFBYzMxQixFQUtwQmxYLEVBQU15SixXQUFhQSxFQUtuQnpKLEVBQU0wSCxNQUFRQSxFQUNQMUgsRUE4Q1gsT0EzRUEsR0FBVWdwRCxFQUFXbnBELEdBa0NyQm1wRCxFQUFVeHNELFVBQVVvRyxRQUFVLFdBQzFCeEcsS0FBS3NFLGNBQWNtQyxJQUt2Qm1tRCxFQUFVeHNELFVBQVU0TCxVQUFZLFdBQzVCLE9BQU9oTSxLQUFLK0wsUUFNaEI2Z0QsRUFBVXhzRCxVQUFVNG9CLFNBQVcsV0FDM0IsT0FBTyxLQUtYNGpDLEVBQVV4c0QsVUFBVXlzRCxjQUFnQixXQUNoQyxPQUFPN3NELEtBQUt5d0MsYUFLaEJtYyxFQUFVeHNELFVBQVV5a0IsY0FBZ0IsV0FDaEMsT0FBOEI3a0IsS0FBZSxZQUtqRDRzRCxFQUFVeHNELFVBQVVpTyxTQUFXLFdBQzNCLE9BQU9yTyxLQUFLc0wsT0FNaEJzaEQsRUFBVXhzRCxVQUFVcVIsS0FBTyxXQUN2QixLQUVHbTdDLEVBNUVtQixDQTZFNUIsR0NyR0YsSUFBSSxHQUF3QyxXQUN4QyxJQUFJanFELEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0F5SnJDLFNBQVN3cEQsR0FBWXY3QyxFQUFPdzdDLEVBQWFDLEdBQzVDLElBQUlDLEVBQXNDLEVBQzFDLEdBQUlBLEVBQUl2cUIsS0FBTzl2QixHQUFjLENBQ3pCLElBQUlzNkMsRUFBVUQsRUFBSW42QyxTQUNkcTZDLEdBQWMsRUF1QmxCLE9BbkJBRCxFQUNLRSxNQUFLLFdBQ0ZELEdBQ0FKLE9BR0hNLE9BQU0sU0FBVW42QyxHQUNiaTZDLElBR21CLGtCQUFmajZDLEVBQU14SyxNQUNZLHdCQUFsQndLLEVBQU0xSyxRQUNOdWtELElBR0FDLFFBbEJHLFdBQ1hHLEdBQWMsR0F1QnRCLElBQUloVyxFQUFlLENBQ2ZyeEMsRUFBV21uRCxFeEh4SlQsT3dId0o4QkYsR0FDaENqbkQsRUFBV21uRCxFQUFLeG1ELEVBQWlCdW1ELElBRXJDLE9BQU8sV0FDSDdWLEVBQWF2MUIsUUFBUTdiLEtBbEpLLFNBQVV0QyxHQVV4QyxTQUFTNnBELEVBQWF2aEQsRUFBUXNCLEVBQVl5TixFQUFZNG5CLEVBQUtDLEVBQWE0cUIsR0FDcEUsSUFBSTNwRCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTStMLEVBQVFzQixFQUFZeU4sRXhHN0NoRCxJd0c2Q2dGOWEsS0E2QmxGLE9BeEJBNEQsRUFBTTRwRCxLQUFPOXFCLEVBS2I5K0IsRUFBTTZwRCxPQUFTLElBQUk1NkMsTUFDQyxPQUFoQjh2QixJQUNBLytCLEVBQU02cEQsT0FBTzlxQixZQUFjQSxHQU0vQi8rQixFQUFNOHBELFVBQVksS0FLbEI5cEQsRUFBTTBILE14R3BFSixFd0d5RUYxSCxFQUFNK3BELG1CQUFxQkosRUFDcEIzcEQsRUF2Q1gsR0FBVTBwRCxFQUFjN3BELEdBNkN4QjZwRCxFQUFhbHRELFVBQVU0b0IsU0FBVyxXQUM5QixPQUFPaHBCLEtBQUt5dEQsUUFPaEJILEVBQWFsdEQsVUFBVXd0RCxrQkFBb0IsV0FDdkM1dEQsS0FBS3NMLE14R3RGRixFd0d1Rkh0TCxLQUFLNnRELGlCQUNMN3RELEtBQUt3RyxXQU9UOG1ELEVBQWFsdEQsVUFBVTB0RCxpQkFBbUIsZ0JBQ2Q3b0QsSUFBcEJqRixLQUFLcU4sYUFDTHJOLEtBQUtxTixXQUFhOEksR0FBVW5XLEtBQUsrTCxRQUFVL0wsS0FBS3l0RCxPQUFPdDFDLFFBRTNEblksS0FBS3NMLE14R3BHRCxFd0dxR0p0TCxLQUFLNnRELGlCQUNMN3RELEtBQUt3RyxXQVFUOG1ELEVBQWFsdEQsVUFBVXFSLEtBQU8sV3hHaEh4QixHd0dpSEV6UixLQUFLc0wsT3hHOUdOLEd3RzhHa0N0TCxLQUFLc0wsUUFDdEN0TCxLQUFLc0wsTXhHakhKLEV3R2tIRHRMLEtBQUt3RyxVQUNMeEcsS0FBSzJ0RCxtQkFBbUIzdEQsS0FBTUEsS0FBS3d0RCxNQUNuQ3h0RCxLQUFLMHRELFVBQVlaLEdBQVk5c0QsS0FBS3l0RCxPQUFRenRELEtBQUs4dEQsaUJBQWlCcG9ELEtBQUsxRixNQUFPQSxLQUFLNHRELGtCQUFrQmxvRCxLQUFLMUYsU0FNaEhzdEQsRUFBYWx0RCxVQUFVMnRELFNBQVcsU0FBVXg4QyxHQUN4Q3ZSLEtBQUt5dEQsT0FBU2w4QyxFQUNkdlIsS0FBS3FOLFdBQWE4SSxHQUFVblcsS0FBSytMLFFBQVUvTCxLQUFLeXRELE9BQU90MUMsUUFPM0RtMUMsRUFBYWx0RCxVQUFVeXRELGVBQWlCLFdBQ2hDN3RELEtBQUswdEQsWUFDTDF0RCxLQUFLMHRELFlBQ0wxdEQsS0FBSzB0RCxVQUFZLE9BckdJLENBeUcvQixJQ2xKRixJQUFJLEdBQXdDLFdBQ3hDLElBQUkvcUQsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQTBKNUMsU0FwSStCLFNBQVVHLEdBVXJDLFNBQVN1cUQsRUFBVXo5QyxFQUFXakYsRUFBT28zQixFQUFLQyxFQUFhc3JCLEVBQWtCMStDLEdBQ3JFLElBQUkzTCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTXVRLEVBQVdqRixFQUFPaUUsSUFBZ0J2UCxLQWdDaEUsT0EzQkE0RCxFQUFNc3FELGFBQWV2ckIsRUFPckIvK0IsRUFBTTRwRCxLQUFPOXFCLEVBQ2I5K0IsRUFBTXRCLElBQU1vZ0MsRUFLWjkrQixFQUFNNnBELE9BQVMsSUFBSTU2QyxNQUNDLE9BQWhCOHZCLElBQ0EvK0IsRUFBTTZwRCxPQUFPOXFCLFlBQWNBLEdBTS9CLytCLEVBQU04cEQsVUFBWSxLQUtsQjlwRCxFQUFNdXFELGtCQUFvQkYsRUFDbkJycUQsRUE2RVgsT0F2SEEsR0FBVW9xRCxFQUFXdnFELEdBaURyQnVxRCxFQUFVNXRELFVBQVU0b0IsU0FBVyxXQUMzQixPQUFPaHBCLEtBQUt5dEQsUUFNaEJPLEVBQVU1dEQsVUFBVTJ0RCxTQUFXLFNBQVV4bkIsR0FDckN2bUMsS0FBS3l0RCxPQUFTbG5CLEVBQ2R2bUMsS0FBS3NMLE10RnhFRCxFc0Z5RUp0TCxLQUFLNnRELGlCQUNMN3RELEtBQUt3RyxXQU9Ud25ELEVBQVU1dEQsVUFBVXd0RCxrQkFBb0IsV0EwRDVDLElBQ1FRLEVBMURBcHVELEtBQUtzTCxNdEY3RUYsRXNGOEVIdEwsS0FBSzZ0RCxpQkFDTDd0RCxLQUFLeXRELFNBd0RMVyxFQUFNMzJDLEdBQXNCLEVBQUcsSUFDL0I0MkMsVUFBWSxnQkFDaEJELEVBQUlFLFNBQVMsRUFBRyxFQUFHLEVBQUcsR0FDZkYsRUFBSXQyQyxRQTFEUDlYLEtBQUt3RyxXQU9Ud25ELEVBQVU1dEQsVUFBVTB0RCxpQkFBbUIsV0FDbkMsSUFBSXY4QyxFQUF5Q3ZSLEtBQVcsT0FDcER1UixFQUFNZzlDLGNBQWdCaDlDLEVBQU1pOUMsY0FDNUJ4dUQsS0FBS3NMLE10Ri9GTCxFc0ZrR0F0TCxLQUFLc0wsTXRGNUZOLEVzRjhGSHRMLEtBQUs2dEQsaUJBQ0w3dEQsS0FBS3dHLFdBTVR3bkQsRUFBVTV0RCxVQUFVcVIsS0FBTyxXdEZ0R3BCLEdzRnVHQ3pSLEtBQUtzTCxRQUNMdEwsS0FBS3NMLE10Ri9HUCxFc0ZnSEV0TCxLQUFLeXRELE9BQVMsSUFBSTU2QyxNQUNRLE9BQXRCN1MsS0FBS2t1RCxlQUNMbHVELEtBQUt5dEQsT0FBTzlxQixZQUFjM2lDLEtBQUtrdUQsZXRGbEhyQyxHc0ZxSEVsdUQsS0FBS3NMLFFBQ0x0TCxLQUFLc0wsTXRGckhKLEVzRnNIRHRMLEtBQUt3RyxVQUNMeEcsS0FBS211RCxrQkFBa0JudUQsS0FBTUEsS0FBS3d0RCxNQUNsQ3h0RCxLQUFLMHRELFVBQVlaLEdBQVk5c0QsS0FBS3l0RCxPQUFRenRELEtBQUs4dEQsaUJBQWlCcG9ELEtBQUsxRixNQUFPQSxLQUFLNHRELGtCQUFrQmxvRCxLQUFLMUYsU0FRaEhndUQsRUFBVTV0RCxVQUFVeXRELGVBQWlCLFdBQzdCN3RELEtBQUswdEQsWUFDTDF0RCxLQUFLMHRELFlBQ0wxdEQsS0FBSzB0RCxVQUFZLE9BR2xCTSxFQXhIbUIsQ0F5SDVCLElDNk5GLEdBMVVtQyxXQVMvQixTQUFTUyxFQUFjMy9CLEVBQVk0L0IsRUFBWUMsRUFBY0MsRUFBaUJDLEVBQWdCQyxHQUsxRjl1RCxLQUFLK3VELFlBQWNqZ0MsRUFLbkI5dUIsS0FBS2d2RCxZQUFjTixFQUVuQixJQUFJTyxFQUFvQixHQUNwQkMsRUFBZTNzQyxHQUFhdmlCLEtBQUtndkQsWUFBYWh2RCxLQUFLK3VELGFBTXZEL3VELEtBQUttdkQsY0FBZ0IsU0FBVWw3QyxHQUMzQixJQUFJM1IsRUFBTTJSLEVBQUUsR0FBSyxJQUFNQSxFQUFFLEdBSXpCLE9BSEtnN0MsRUFBa0Izc0QsS0FDbkIyc0QsRUFBa0Izc0QsR0FBTzRzRCxFQUFhajdDLElBRW5DZzdDLEVBQWtCM3NELElBTTdCdEMsS0FBS292RCxpQkFBbUJSLEVBS3hCNXVELEtBQUtxdkQsdUJBQXlCUixFQUFpQkEsRUFLL0M3dUQsS0FBS3N2RCxXQUFhLEdBTWxCdHZELEtBQUt1dkQsaUJBQWtCLEVBS3ZCdnZELEtBQUt3dkQsa0JBQ0R4dkQsS0FBSyt1RCxZQUFZdnhDLGNBQ1hveEMsS0FDQTV1RCxLQUFLK3VELFlBQVkvaUQsYUFDbkIsR0FBUzRpRCxJQUFvQixHQUFTNXVELEtBQUsrdUQsWUFBWS9pRCxhQUsvRGhNLEtBQUt5dkQsa0JBQW9CenZELEtBQUsrdUQsWUFBWS9pRCxZQUNwQyxHQUFTaE0sS0FBSyt1RCxZQUFZL2lELGFBQzFCLEtBS05oTSxLQUFLMHZELGtCQUFvQjF2RCxLQUFLZ3ZELFlBQVloakQsWUFDcEMsR0FBU2hNLEtBQUtndkQsWUFBWWhqRCxhQUMxQixLQUNOLElBQUkyakQsRUFBcUIzNUMsR0FBVzI0QyxHQUNoQ2lCLEVBQXNCNzVDLEdBQVk0NEMsR0FDbENrQixFQUF5Qi81QyxHQUFlNjRDLEdBQ3hDbUIsRUFBd0JqNkMsR0FBYzg0QyxHQUN0Q29CLEVBQWdCL3ZELEtBQUttdkQsY0FBY1EsR0FDbkNLLEVBQWlCaHdELEtBQUttdkQsY0FBY1MsR0FDcENLLEVBQW9CandELEtBQUttdkQsY0FBY1UsR0FDdkNLLEVBQW1CbHdELEtBQUttdkQsY0FBY1csR0FXdENLLEVBaEhVLElBaUhUckIsRUFDSy9sRCxLQUFLRCxJQUFJLEVBQUdDLEtBQUswd0IsS0FBS3J3QixFQUFLNk0sR0FBUTA0QyxJQUNoQ0csRUFDR0EsRUFDQSxJQUNBLFFBQ04sR0FFVixHQURBOXVELEtBQUtvd0QsU0FBU1QsRUFBb0JDLEVBQXFCQyxFQUF3QkMsRUFBdUJDLEVBQWVDLEVBQWdCQyxFQUFtQkMsRUFBa0JDLEdBQ3RLbndELEtBQUt1dkQsZ0JBQWlCLENBQ3RCLElBQUljLEVBQWN6bEQsSUFDbEI1SyxLQUFLc3ZELFdBQVcxdEMsU0FBUSxTQUFVMHVDLEVBQVVudkQsRUFBR0osR0FDM0NzdkQsRUFBY3RuRCxLQUFLRixJQUFJd25ELEVBQWFDLEVBQVNqdUQsT0FBTyxHQUFHLEdBQUlpdUQsRUFBU2p1RCxPQUFPLEdBQUcsR0FBSWl1RCxFQUFTanVELE9BQU8sR0FBRyxPQUl6R3JDLEtBQUtzdkQsV0FBVzF0QyxRQUFRLFNBQVUwdUMsR0FDOUIsR0FBSXZuRCxLQUFLRCxJQUFJd25ELEVBQVNqdUQsT0FBTyxHQUFHLEdBQUlpdUQsRUFBU2p1RCxPQUFPLEdBQUcsR0FBSWl1RCxFQUFTanVELE9BQU8sR0FBRyxJQUMxRWd1RCxFQUNBcndELEtBQUt5dkQsa0JBQW9CLEVBQUcsQ0FDNUIsSUFBSWMsRUFBYyxDQUNkLENBQUNELEVBQVNqdUQsT0FBTyxHQUFHLEdBQUlpdUQsRUFBU2p1RCxPQUFPLEdBQUcsSUFDM0MsQ0FBQ2l1RCxFQUFTanVELE9BQU8sR0FBRyxHQUFJaXVELEVBQVNqdUQsT0FBTyxHQUFHLElBQzNDLENBQUNpdUQsRUFBU2p1RCxPQUFPLEdBQUcsR0FBSWl1RCxFQUFTanVELE9BQU8sR0FBRyxLQUUzQ2t1RCxFQUFZLEdBQUcsR0FBS0YsRUFBY3J3RCxLQUFLeXZELGtCQUFvQixJQUMzRGMsRUFBWSxHQUFHLElBQU12d0QsS0FBS3l2RCxtQkFFMUJjLEVBQVksR0FBRyxHQUFLRixFQUFjcndELEtBQUt5dkQsa0JBQW9CLElBQzNEYyxFQUFZLEdBQUcsSUFBTXZ3RCxLQUFLeXZELG1CQUUxQmMsRUFBWSxHQUFHLEdBQUtGLEVBQWNyd0QsS0FBS3l2RCxrQkFBb0IsSUFDM0RjLEVBQVksR0FBRyxJQUFNdndELEtBQUt5dkQsbUJBSzlCLElBQUk5NkMsRUFBTzVMLEtBQUtGLElBQUkwbkQsRUFBWSxHQUFHLEdBQUlBLEVBQVksR0FBRyxHQUFJQSxFQUFZLEdBQUcsSUFDOUR4bkQsS0FBS0QsSUFBSXluRCxFQUFZLEdBQUcsR0FBSUEsRUFBWSxHQUFHLEdBQUlBLEVBQVksR0FBRyxJQUM5RDU3QyxFQUFPM1UsS0FBS3l2RCxrQkFBb0IsSUFDdkNhLEVBQVNqdUQsT0FBU2t1RCxLQUc1QjdxRCxLQUFLMUYsT0FFWGl2RCxFQUFvQixHQTBMeEIsT0E5S0FSLEVBQWNydUQsVUFBVW93RCxhQUFlLFNBQVU1dkQsRUFBR0MsRUFBR29ULEVBQUd3OEMsRUFBTUMsRUFBTUMsR0FDbEUzd0QsS0FBS3N2RCxXQUFXeHNELEtBQUssQ0FDakJULE9BQVEsQ0FBQ291RCxFQUFNQyxFQUFNQyxHQUNyQnh3RCxPQUFRLENBQUNTLEVBQUdDLEVBQUdvVCxNQW1CdkJ3NkMsRUFBY3J1RCxVQUFVZ3dELFNBQVcsU0FBVXh2RCxFQUFHQyxFQUFHb1QsRUFBR2pSLEVBQUd5dEQsRUFBTUMsRUFBTUMsRUFBTUMsRUFBTVQsR0FDN0UsSUFBSVUsRUFBbUJ6OEMsR0FBZSxDQUFDcThDLEVBQU1DLEVBQU1DLEVBQU1DLElBQ3JERSxFQUFrQjl3RCxLQUFLeXZELGtCQUNyQixHQUFTb0IsR0FBb0I3d0QsS0FBS3l2RCxrQkFDbEMsS0FDRnNCLEVBQTBDL3dELEtBQXNCLGtCQUdoRWd4RCxFQUFTaHhELEtBQUsrdUQsWUFBWXZ4QyxZQUMxQnN6QyxFQUFrQixJQUNsQkEsRUFBa0IsRUFDbEJHLEdBQW1CLEVBYXZCLEdBWklkLEVBQWlCLElBQ2Jud0QsS0FBS2d2RCxZQUFZbHhDLFlBQWM5ZCxLQUFLMHZELG9CQUdwQ3VCLEVBRHNCLEdBREM3OEMsR0FBZSxDQUFDeFQsRUFBR0MsRUFBR29ULEVBQUdqUixLQUNHaEQsS0FBSzB2RCxrQkFyTS9DLEtBdU1tQ3VCLElBRTNDRCxHQUFVaHhELEtBQUsrdUQsWUFBWWp4QyxZQUFjZ3pDLElBQzFDRyxFQUNJSCxFQTNNSyxLQTJNbUNHLE9BRy9DQSxHQUFvQmp4RCxLQUFLb3ZELGtCQUN0QjhCLFNBQVNMLEVBQWlCLEtBQzFCSyxTQUFTTCxFQUFpQixLQUMxQkssU0FBU0wsRUFBaUIsS0FDMUJLLFNBQVNMLEVBQWlCLE1BQ3JCcjVDLEdBQVdxNUMsRUFBa0I3d0QsS0FBS292RCxrQkFML0MsQ0FXQSxJQUFJK0IsRUFBYyxFQUNsQixLQUFLRixHQUNJQyxTQUFTVCxFQUFLLEtBQ2RTLFNBQVNULEVBQUssS0FDZFMsU0FBU1IsRUFBSyxLQUNkUSxTQUFTUixFQUFLLEtBQ2RRLFNBQVNQLEVBQUssS0FDZE8sU0FBU1AsRUFBSyxLQUNkTyxTQUFTTixFQUFLLEtBQ2RNLFNBQVNOLEVBQUssS0FDZixHQUFJVCxFQUFpQixFQUNqQmMsR0FBbUIsT0FVbkIsR0FBbUIsSUFMbkJFLEdBQ01ELFNBQVNULEVBQUssS0FBUVMsU0FBU1QsRUFBSyxJQUFVLEVBQUosSUFDdENTLFNBQVNSLEVBQUssS0FBUVEsU0FBU1IsRUFBSyxJQUFVLEVBQUosSUFDMUNRLFNBQVNQLEVBQUssS0FBUU8sU0FBU1AsRUFBSyxJQUFVLEVBQUosSUFDMUNPLFNBQVNOLEVBQUssS0FBUU0sU0FBU04sRUFBSyxJQUFVLEVBQUosS0FFakMsR0FBZk8sR0FDZSxHQUFmQSxHQUNlLEdBQWZBLEVBQ0EsT0FLaEIsR0FBSWhCLEVBQWlCLEVBQUcsQ0FDcEIsSUFBS2MsRUFBa0IsQ0FDbkIsSUFBSXg2QyxFQUFTLEVBQUU3VixFQUFFLEdBQUtxVCxFQUFFLElBQU0sR0FBSXJULEVBQUUsR0FBS3FULEVBQUUsSUFBTSxHQUM3Q205QyxFQUFZcHhELEtBQUttdkQsY0FBYzE0QyxHQUMvQjdNLE9BQUssRUFLTEEsRUFKQW9uRCxHQUN1QixHQUFPUCxFQUFLLEdBQUlNLEdBQ25DLEdBQU9KLEVBQUssR0FBSUksSUFDaEIsRUFDbUIsR0FBT0ssRUFBVSxHQUFJTCxJQUd0Q04sRUFBSyxHQUFLRSxFQUFLLElBQU0sRUFBSVMsRUFBVSxHQUU3QyxJQUFJdm5ELEdBQU00bUQsRUFBSyxHQUFLRSxFQUFLLElBQU0sRUFBSVMsRUFBVSxHQUU3Q0gsRUFENEJybkQsRUFBS0EsRUFBS0MsRUFBS0EsRUFDQTdKLEtBQUtxdkQsdUJBRXBELEdBQUk0QixFQUFrQixDQUNsQixHQUFJbG9ELEtBQUtrdEIsSUFBSXIxQixFQUFFLEdBQUtxVCxFQUFFLEtBQU9sTCxLQUFLa3RCLElBQUlyMUIsRUFBRSxHQUFLcVQsRUFBRSxJQUFLLENBRWhELElBQUlvOUMsRUFBSyxFQUFFeHdELEVBQUUsR0FBS29ULEVBQUUsSUFBTSxHQUFJcFQsRUFBRSxHQUFLb1QsRUFBRSxJQUFNLEdBQ3pDcTlDLEVBQVF0eEQsS0FBS212RCxjQUFja0MsR0FDM0JFLEVBQUssRUFBRXZ1RCxFQUFFLEdBQUtwQyxFQUFFLElBQU0sR0FBSW9DLEVBQUUsR0FBS3BDLEVBQUUsSUFBTSxHQUN6QzR3RCxFQUFReHhELEtBQUttdkQsY0FBY29DLEdBQy9CdnhELEtBQUtvd0QsU0FBU3h2RCxFQUFHQyxFQUFHd3dELEVBQUlFLEVBQUlkLEVBQU1DLEVBQU1ZLEVBQU9FLEVBQU9yQixFQUFpQixHQUN2RW53RCxLQUFLb3dELFNBQVNtQixFQUFJRixFQUFJcDlDLEVBQUdqUixFQUFHd3VELEVBQU9GLEVBQU9YLEVBQU1DLEVBQU1ULEVBQWlCLE9BRXRFLENBRUQsSUFBSXNCLEVBQUssRUFBRTd3RCxFQUFFLEdBQUtDLEVBQUUsSUFBTSxHQUFJRCxFQUFFLEdBQUtDLEVBQUUsSUFBTSxHQUN6QzZ3RCxFQUFRMXhELEtBQUttdkQsY0FBY3NDLEdBQzNCRSxFQUFLLEVBQUUxOUMsRUFBRSxHQUFLalIsRUFBRSxJQUFNLEdBQUlpUixFQUFFLEdBQUtqUixFQUFFLElBQU0sR0FDekM0dUQsRUFBUTV4RCxLQUFLbXZELGNBQWN3QyxHQUMvQjN4RCxLQUFLb3dELFNBQVN4dkQsRUFBRzZ3RCxFQUFJRSxFQUFJM3VELEVBQUd5dEQsRUFBTWlCLEVBQU9FLEVBQU9oQixFQUFNVCxFQUFpQixHQUN2RW53RCxLQUFLb3dELFNBQVNxQixFQUFJNXdELEVBQUdvVCxFQUFHMDlDLEVBQUlELEVBQU9oQixFQUFNQyxFQUFNaUIsRUFBT3pCLEVBQWlCLEdBRTNFLFFBR1IsR0FBSWEsRUFBUSxDQUNSLElBQUtoeEQsS0FBS3d2RCxrQkFDTixPQUVKeHZELEtBQUt1dkQsaUJBQWtCLEVBTUEsSUFBUixHQUFkNEIsSUFDRG54RCxLQUFLd3dELGFBQWE1dkQsRUFBR3FULEVBQUdqUixFQUFHeXRELEVBQU1FLEVBQU1DLEdBRWhCLElBQVIsR0FBZE8sSUFDRG54RCxLQUFLd3dELGFBQWE1dkQsRUFBR3FULEVBQUdwVCxFQUFHNHZELEVBQU1FLEVBQU1ELEdBRXZDUyxJQUUyQixJQUFSLEdBQWRBLElBQ0RueEQsS0FBS3d3RCxhQUFhM3ZELEVBQUdtQyxFQUFHcEMsRUFBRzh2RCxFQUFNRSxFQUFNSCxHQUVoQixJQUFSLEVBQWRVLElBQ0RueEQsS0FBS3d3RCxhQUFhM3ZELEVBQUdtQyxFQUFHaVIsRUFBR3k4QyxFQUFNRSxFQUFNRCxNQVNuRGxDLEVBQWNydUQsVUFBVXl4RCxzQkFBd0IsV0FDNUMsSUFBSTlsRCxFckc3SkQsQ0FBQ25CLElBQVVBLEtBQVUsS0FBVyxLcUdvS25DLE9BTkE1SyxLQUFLc3ZELFdBQVcxdEMsU0FBUSxTQUFVMHVDLEVBQVVudkQsRUFBR0osR0FDM0MsSUFBSTJoQyxFQUFNNHRCLEVBQVNqdUQsT0FDbkJpUyxHQUFpQnZJLEVBQVEyMkIsRUFBSSxJQUM3QnB1QixHQUFpQnZJLEVBQVEyMkIsRUFBSSxJQUM3QnB1QixHQUFpQnZJLEVBQVEyMkIsRUFBSSxPQUUxQjMyQixHQUtYMGlELEVBQWNydUQsVUFBVTB4RCxhQUFlLFdBQ25DLE9BQU85eEQsS0FBS3N2RCxZQUVUYixFQXhVdUIsR0MzQjNCLElDRUhzRCxHREdPQyxHQUEyQixDQUNsQ0MsdUJBQXVCLEVBQ3ZCQyx5QkFBeUIsR0NNN0IsU0FBU0MsR0FBaUIvRCxFQUFLZ0UsRUFBSUMsRUFBSUMsRUFBSUMsR0FDdkNuRSxFQUFJL3pDLFlBQ0orekMsRUFBSTl6QyxPQUFPLEVBQUcsR0FDZDh6QyxFQUFJN3pDLE9BQU82M0MsRUFBSUMsR0FDZmpFLEVBQUk3ekMsT0FBTyszQyxFQUFJQyxHQUNmbkUsRUFBSW9FLFlBQ0pwRSxFQUFJaDBDLE9BQ0pnMEMsRUFBSTV6QyxPQUNKNHpDLEVBQUlFLFNBQVMsRUFBRyxFQUFHdmxELEtBQUtELElBQUlzcEQsRUFBSUUsR0FBTSxFQUFHdnBELEtBQUtELElBQUl1cEQsRUFBSUUsSUFDdERuRSxFQUFJbG1DLFVBVVIsU0FBU3VxQyxHQUE4QnB4RCxFQUFNa1UsR0FFekMsT0FBUXhNLEtBQUtrdEIsSUFBSTUwQixFQUFjLEVBQVRrVSxHQUFjLEtBQU8sR0FDdkN4TSxLQUFLa3RCLElBQUk1MEIsRUFBYyxFQUFUa1UsRUFBYSxHQUFLLFFBQWMsRUF1Qy9DLFNBQVNtOUMsR0FBMEI1akMsRUFBWTQvQixFQUFZdDNCLEVBQWNFLEdBQzVFLElBQUlILEVBQWVoa0IsR0FBVWlrQixFQUFjczNCLEVBQVk1L0IsR0FFbkR1SSxFQUFtQmphLEdBQW1Cc3hDLEVBQVlwM0IsRUFBa0JGLEdBQ3BFdTdCLEVBQXNCakUsRUFBVy93Qyx3QkFDVDFZLElBQXhCMHRELElBQ0F0N0IsR0FBb0JzN0IsR0FFeEIsSUFBSUMsRUFBc0I5akMsRUFBV25SLHdCQUNUMVksSUFBeEIydEQsSUFDQXY3QixHQUFvQnU3QixHQUt4QixJQUFJQyxFQUFlL2pDLEVBQVc5aUIsWUFDOUIsSUFBSzZtRCxHQUFnQnIrQyxHQUFtQnErQyxFQUFjMTdCLEdBQWUsQ0FDakUsSUFBSTI3QixFQUFxQjExQyxHQUFtQjBSLEVBQVl1SSxFQUFrQkYsR0FDdEVFLEVBQ0E2NUIsU0FBUzRCLElBQXVCQSxFQUFxQixJQUNyRHo3QixHQUFvQnk3QixHQUc1QixPQUFPejdCLEVDeEdYLElBQUksR0FBd0MsV0FDeEMsSUFBSTEwQixFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBNFE1QyxTQXhPZ0MsU0FBVUcsR0FpQnRDLFNBQVNzdkQsRUFBV2prQyxFQUFZa2tDLEVBQWdCdEUsRUFBWXVFLEVBQWdCMWlELEVBQVcyaUQsRUFBa0JwNEMsRUFBWTBOLEVBQVEycUMsRUFBaUJDLEVBQW9CQyxFQUFpQkMsR0FDL0ssSUFBSTF2RCxFQUFRSCxFQUFPTCxLQUFLcEQsS0FBTXVRLEUxRi9DNUIsSTBGK0MwRHZRLEtBSzVENEQsRUFBTTJ2RCxrQkFBbUN0dUQsSUFBcEJvdUQsR0FBZ0NBLEVBS3JEenZELEVBQU00dkQsZ0JBQWtCRixFQUt4QjF2RCxFQUFNNnNDLFlBQWMzMUIsRUFLcEJsWCxFQUFNNnZELFFBQVVqckMsRUFLaEI1a0IsRUFBTTh2RCxRQUFVLEtBS2hCOXZELEVBQU0rdkQsZ0JBQWtCWCxFQUt4QnB2RCxFQUFNZ3dELGdCQUFrQlgsRUFLeEJydkQsRUFBTWl3RCxrQkFBb0JYLEdBQXNDM2lELEVBS2hFM00sRUFBTWt3RCxhQUFlLEdBS3JCbHdELEVBQU1td0QscUJBQXVCLEtBSzdCbndELEVBQU1vd0QsU0FBVyxFQUNqQixJQUFJckYsRUFBZXNFLEVBQWU5ckMsbUJBQW1CdmpCLEVBQU1pd0QsbUJBQ3ZESSxFQUFrQnJ3RCxFQUFNZ3dELGdCQUFnQjVuRCxZQUN4QzRpRCxFQUFrQmhyRCxFQUFNK3ZELGdCQUFnQjNuRCxZQUN4Q2tvRCxFQUFzQkQsRUFDcEIzOEMsR0FBZ0JxM0MsRUFBY3NGLEdBQzlCdEYsRUFDTixHQUFxQyxJQUFqQzE0QyxHQUFRaStDLEdBSVIsT0FEQXR3RCxFQUFNMEgsTTFGeEdQLEUwRnlHUTFILEVBRVgsSUFBSXV3RCxFQUFtQnJsQyxFQUFXOWlCLFlBQzlCbW9ELElBS0l2RixFQUpDQSxFQUlpQnQzQyxHQUFnQnMzQyxFQUFpQnVGLEdBSGpDQSxHQU0xQixJQUFJNzhCLEVBQW1CMjdCLEVBQWVwdUMsY0FBY2poQixFQUFNaXdELGtCQUFrQixJQUN4RXg4QixFRGRMLFNBQXlDdkksRUFBWTQvQixFQUFZQyxFQUFjcjNCLEdBQ2xGLElBQUlGLEVBQWVoaEIsR0FBVXU0QyxHQUN6QnQzQixFQUFtQnE3QixHQUEwQjVqQyxFQUFZNC9CLEVBQVl0M0IsRUFBY0UsR0FPdkYsUUFOSzQ1QixTQUFTNzVCLElBQXFCQSxHQUFvQixJQUNuRDFoQixHQUFjZzVDLEdBQWMsU0FBVXI0QyxHQUVsQyxPQURBK2dCLEVBQW1CcTdCLEdBQTBCNWpDLEVBQVk0L0IsRUFBWXA0QyxFQUFRZ2hCLEdBQ3RFNDVCLFNBQVM3NUIsSUFBcUJBLEVBQW1CLEtBR3pEQSxFQ0tvQis4QixDQUFnQ3RsQyxFQUFZNC9CLEVBQVl3RixFQUFxQjU4QixHQUNwRyxJQUFLNDVCLFNBQVM3NUIsSUFBcUJBLEdBQW9CLEVBSW5ELE9BREF6ekIsRUFBTTBILE0xRnpIUCxFMEYwSFExSCxFQUVYLElBQUl5d0QsT0FBZ0RwdkQsSUFBdkJtdUQsRUFBbUNBLEVDbkkzQyxHRHlJckIsR0FEQXh2RCxFQUFNMHdELGVBQWlCLElBQUksR0FBY3hsQyxFQUFZNC9CLEVBQVl3RixFQUFxQnRGLEVBQWlCdjNCLEVBQW1CZzlCLEVBQXdCLzhCLEdBQy9GLElBQS9DMXpCLEVBQU0wd0QsZUFBZXhDLGVBQWU1d0QsT0FHcEMsT0FEQTBDLEVBQU0wSCxNMUZwSVAsRTBGcUlRMUgsRUFFWEEsRUFBTW93RCxTQUFXaEIsRUFBZXR1QyxrQkFBa0IyUyxHQUNsRCxJQUFJdzdCLEVBQWVqdkQsRUFBTTB3RCxlQUFlekMsd0JBVXhDLEdBVElqRCxJQUNJOS9CLEVBQVd0UixZQUNYcTFDLEVBQWEsR0FBSyxFQUFNQSxFQUFhLEdBQUlqRSxFQUFnQixHQUFJQSxFQUFnQixJQUM3RWlFLEVBQWEsR0FBSyxFQUFNQSxFQUFhLEdBQUlqRSxFQUFnQixHQUFJQSxFQUFnQixLQUc3RWlFLEVBQWV2N0MsR0FBZ0J1N0MsRUFBY2pFLElBR2hEMzRDLEdBQVE0OEMsR0FHUixDQUVELElBREEsSUFBSTBCLEVBQWN2QixFQUFlL3RDLDBCQUEwQjR0QyxFQUFjanZELEVBQU1vd0QsVUFDdEVRLEVBQU9ELEVBQVk1L0MsS0FBTTYvQyxHQUFRRCxFQUFZMS9DLEtBQU0yL0MsSUFDeEQsSUFBSyxJQUFJQyxFQUFPRixFQUFZMy9DLEtBQU02L0MsR0FBUUYsRUFBWXovQyxLQUFNMi9DLElBQVEsQ0FDaEUsSUFBSW5rRCxFQUFPNmlELEVBQWdCdnZELEVBQU1vd0QsU0FBVVEsRUFBTUMsRUFBTTM1QyxHQUNuRHhLLEdBQ0ExTSxFQUFNa3dELGFBQWFoeEQsS0FBS3dOLEdBSUYsSUFBOUIxTSxFQUFNa3dELGFBQWE1eUQsU0FDbkIwQyxFQUFNMEgsTTFGaEtYLFEwRm1KQzFILEVBQU0wSCxNMUZuSlAsRTBGbUtILE9BQU8xSCxFQXdGWCxPQXJPQSxHQUFVbXZELEVBQVl0dkQsR0FtSnRCc3ZELEVBQVczeUQsVUFBVTRvQixTQUFXLFdBQzVCLE9BQU9ocEIsS0FBSzB6RCxTQUtoQlgsRUFBVzN5RCxVQUFVczBELFdBQWEsV0FDOUIsSUFBSUMsRUFBVSxHQVVkLEdBVEEzMEQsS0FBSzh6RCxhQUFhbHlDLFFBQVEsU0FBVXRSLEVBQU1uUCxFQUFHSixHQUNyQ3VQLEcxRnhMSixHMEZ3TFlBLEVBQUtqQyxZQUNic21ELEVBQVE3eEQsS0FBSyxDQUNUaUosT0FBUS9MLEtBQUsyekQsZ0JBQWdCeHNDLG1CQUFtQjdXLEVBQUtDLFdBQ3JEZ0IsTUFBT2pCLEVBQUswWSxjQUd0QnRqQixLQUFLMUYsT0FDUEEsS0FBSzh6RCxhQUFhNXlELE9BQVMsRUFDSixJQUFuQnl6RCxFQUFRenpELE9BQ1JsQixLQUFLc0wsTTFGNUxOLE0wRjhMRSxDQUNELElBQUkyWSxFQUFJamtCLEtBQUs2ekQsa0JBQWtCLEdBQzNCbDlDLEVBQU8zVyxLQUFLNHpELGdCQUFnQmdCLFlBQVkzd0MsR0FDeEMvTCxFQUF3QixpQkFBVHZCLEVBQW9CQSxFQUFPQSxFQUFLLEdBQy9Dd0IsRUFBeUIsaUJBQVR4QixFQUFvQkEsRUFBT0EsRUFBSyxHQUNoRDJnQixFQUFtQnQzQixLQUFLNHpELGdCQUFnQi91QyxjQUFjWixHQUN0RG9ULEVBQW1CcjNCLEtBQUsyekQsZ0JBQWdCOXVDLGNBQWM3a0IsS0FBS2cwRCxVQUMzRHJGLEVBQWUzdUQsS0FBSzR6RCxnQkFBZ0J6c0MsbUJBQW1Cbm5CLEtBQUs2ekQsbUJBQ2hFN3pELEtBQUswekQsUUQ3RFYsU0FBZ0J4N0MsRUFBT0MsRUFBUTJDLEVBQVl1YyxFQUFrQnc3QixFQUFjdjdCLEVBQWtCcTNCLEVBQWNrRyxFQUFlRixFQUFTbnNDLEVBQVE2cUMsRUFBaUJDLEdBQy9KLElBQUl2aEQsRUFBVTBGLEdBQXNCMU8sS0FBSzJDLE1BQU1vUCxFQUFhNUMsR0FBUW5QLEtBQUsyQyxNQUFNb1AsRUFBYTNDLElBRTVGLEdBREEsRUFBT3BHLEVBQVN1aEQsR0FDTyxJQUFuQnFCLEVBQVF6ekQsT0FDUixPQUFPNlEsRUFBUStGLE9BR25CLFNBQVNnOUMsRUFBV2oxRCxHQUNoQixPQUFPa0osS0FBSzJDLE1BQU03TCxFQUFRaWIsR0FBY0EsRUFGNUMvSSxFQUFRcWMsTUFBTXRULEVBQVlBLEdBSTFCL0ksRUFBUWdqRCx5QkFBMkIsVUFDbkMsSUFBSUMsRXZHNEJHLENBQUNwcUQsSUFBVUEsS0FBVSxLQUFXLEt1RzNCdkMrcEQsRUFBUS95QyxTQUFRLFNBQVU4Z0IsRUFBS3ZoQyxFQUFHSixHdkdtSS9CLElBQWdCb1UsRUFBU0MsRUFBVEQsRXVHbElSNi9DLEd2R2tJaUI1L0MsRXVHbElDc3RCLEVBQUkzMkIsUXZHbUlyQixHQUFLb0osRUFBUSxLQUNyQkEsRUFBUSxHQUFLQyxFQUFRLElBRXJCQSxFQUFRLEdBQUtELEVBQVEsS0FDckJBLEVBQVEsR0FBS0MsRUFBUSxJQUVyQkEsRUFBUSxHQUFLRCxFQUFRLEtBQ3JCQSxFQUFRLEdBQUtDLEVBQVEsSUFFckJBLEVBQVEsR0FBS0QsRUFBUSxLQUNyQkEsRUFBUSxHQUFLQyxFQUFRLE91RzNJekIsSUFBSTYvQyxFQUFxQixHQUFTRCxHQUM5QkUsRUFBc0IvK0MsR0FBVTYrQyxHQUNoQ0csRUFBZ0IxOUMsR0FBc0IxTyxLQUFLMkMsTUFBT29QLEVBQWFtNkMsRUFBc0I1OUIsR0FBbUJ0dUIsS0FBSzJDLE1BQU9vUCxFQUFhbzZDLEVBQXVCNzlCLElBQzVKLEVBQU84OUIsRUFBZTdCLEdBQ3RCLElBQUk4QixFQUFjdDZDLEVBQWF1YyxFQUMvQnM5QixFQUFRL3lDLFNBQVEsU0FBVThnQixFQUFLdmhDLEVBQUdKLEdBQzlCLElBQUlzMEQsRUFBTzN5QixFQUFJMzJCLE9BQU8sR0FBS2lwRCxFQUFpQixHQUN4Q00sSUFBUzV5QixFQUFJMzJCLE9BQU8sR0FBS2lwRCxFQUFpQixJQUMxQ08sRUFBVyxHQUFTN3lCLEVBQUkzMkIsUUFDeEJ5cEQsRUFBWXIvQyxHQUFVdXNCLEVBQUkzMkIsUUFFMUIyMkIsRUFBSW54QixNQUFNMkcsTUFBUSxHQUFLd3FCLEVBQUlueEIsTUFBTTRHLE9BQVMsR0FDMUNnOUMsRUFBYzU1QyxVQUFVbW5CLEVBQUlueEIsTUFBT2lYLEVBQVFBLEVBQVFrYSxFQUFJbnhCLE1BQU0yRyxNQUFRLEVBQUlzUSxFQUFRa2EsRUFBSW54QixNQUFNNEcsT0FBUyxFQUFJcVEsRUFBUTZzQyxFQUFPRCxFQUFhRSxFQUFPRixFQUFhRyxFQUFXSCxFQUFhSSxFQUFZSixNQUdwTSxJQUFJSyxFQUFnQnovQyxHQUFXMjRDLEdBOEcvQixPQTdHQWtHLEVBQWMvQyxlQUFlbHdDLFNBQVEsU0FBVTB1QyxFQUFVbnZELEVBQUdKLEdBcUJ4RCxJQUFJc0IsRUFBU2l1RCxFQUFTanVELE9BQ2xCbEMsRUFBU213RCxFQUFTbndELE9BQ2xCK1csRUFBSzdVLEVBQU8sR0FBRyxHQUFJK1UsRUFBSy9VLEVBQU8sR0FBRyxHQUNsQ21ILEVBQUtuSCxFQUFPLEdBQUcsR0FBSW9ILEVBQUtwSCxFQUFPLEdBQUcsR0FDbENxSCxFQUFLckgsRUFBTyxHQUFHLEdBQUlzSCxFQUFLdEgsRUFBTyxHQUFHLEdBRWxDcXpELEVBQUtaLEdBQVkzMEQsRUFBTyxHQUFHLEdBQUtzMUQsRUFBYyxJQUFNbitCLEdBQ3BEcStCLEVBQUtiLElBQWEzMEQsRUFBTyxHQUFHLEdBQUtzMUQsRUFBYyxJQUFNbitCLEdBQ3JEODZCLEVBQUswQyxHQUFZMzBELEVBQU8sR0FBRyxHQUFLczFELEVBQWMsSUFBTW4rQixHQUNwRCs2QixFQUFLeUMsSUFBYTMwRCxFQUFPLEdBQUcsR0FBS3MxRCxFQUFjLElBQU1uK0IsR0FDckRnN0IsRUFBS3dDLEdBQVkzMEQsRUFBTyxHQUFHLEdBQUtzMUQsRUFBYyxJQUFNbitCLEdBQ3BEaTdCLEVBQUt1QyxJQUFhMzBELEVBQU8sR0FBRyxHQUFLczFELEVBQWMsSUFBTW4rQixHQUlyRHMrQixFQUF3QjErQyxFQUN4QjIrQyxFQUF3QnorQyxFQUM1QkYsRUFBSyxFQUNMRSxFQUFLLEVBS0wsSUFNSTArQyxFcEh4SEwsU0FBMkIvaEQsR0FFOUIsSUFEQSxJQUFJOVMsRUFBSThTLEVBQUk3UyxPQUNIQyxFQUFJLEVBQUdBLEVBQUlGLEVBQUdFLElBQUssQ0FJeEIsSUFGQSxJQUFJNDBELEVBQVM1MEQsRUFDVDYwRCxFQUFRanRELEtBQUtrdEIsSUFBSWxpQixFQUFJNVMsR0FBR0EsSUFDbkJnSixFQUFJaEosRUFBSSxFQUFHZ0osRUFBSWxKLEVBQUdrSixJQUFLLENBQzVCLElBQUk4ckQsRUFBV2x0RCxLQUFLa3RCLElBQUlsaUIsRUFBSTVKLEdBQUdoSixJQUMzQjgwRCxFQUFXRCxJQUNYQSxFQUFRQyxFQUNSRixFQUFTNXJELEdBR2pCLEdBQWMsSUFBVjZyRCxFQUNBLE9BQU8sS0FHWCxJQUFJamlDLEVBQU1oZ0IsRUFBSWdpRCxHQUNkaGlELEVBQUlnaUQsR0FBVWhpRCxFQUFJNVMsR0FDbEI0UyxFQUFJNVMsR0FBSzR5QixFQUVULElBQUssSUFBSTFFLEVBQUlsdUIsRUFBSSxFQUFHa3VCLEVBQUlwdUIsRUFBR291QixJQUV2QixJQURBLElBQUk2bUMsR0FBUW5pRCxFQUFJc2IsR0FBR2x1QixHQUFLNFMsRUFBSTVTLEdBQUdBLEdBQ3RCdXZCLEVBQUl2dkIsRUFBR3V2QixFQUFJenZCLEVBQUksRUFBR3l2QixJQUNuQnZ2QixHQUFLdXZCLEVBQ0wzYyxFQUFJc2IsR0FBR3FCLEdBQUssRUFHWjNjLEVBQUlzYixHQUFHcUIsSUFBTXdsQyxFQUFPbmlELEVBQUk1UyxHQUFHdXZCLEdBTzNDLElBREEsSUFBSXpuQixFQUFJLElBQUkxSCxNQUFNTixHQUNUazFELEVBQUlsMUQsRUFBSSxFQUFHazFELEdBQUssRUFBR0EsSUFBSyxDQUM3Qmx0RCxFQUFFa3RELEdBQUtwaUQsRUFBSW9pRCxHQUFHbDFELEdBQUs4UyxFQUFJb2lELEdBQUdBLEdBQzFCLElBQUssSUFBSXB4QixFQUFJb3hCLEVBQUksRUFBR3B4QixHQUFLLEVBQUdBLElBQ3hCaHhCLEVBQUlneEIsR0FBRzlqQyxJQUFNOFMsRUFBSWd4QixHQUFHb3hCLEdBQUtsdEQsRUFBRWt0RCxHQUduQyxPQUFPbHRELEVvSCtFZW10RCxDQU5JLENBQ2xCLENBTEo1c0QsR0FBTW9zRCxFQUNObnNELEdBQU1vc0QsRUFJTyxFQUFHLEVBQUd6RCxFQUFLc0QsR0FDcEIsQ0FKSmhzRCxHQUFNa3NELEVBQ05qc0QsR0FBTWtzRCxFQUdPLEVBQUcsRUFBR3ZELEVBQUtvRCxHQUNwQixDQUFDLEVBQUcsRUFBR2xzRCxFQUFJQyxFQUFJNG9ELEVBQUtzRCxHQUNwQixDQUFDLEVBQUcsRUFBR2pzRCxFQUFJQyxFQUFJNG9ELEVBQUtvRCxLQUd4QixHQUFLRyxFQUFMLENBS0EsR0FGQS9qRCxFQUFRcUksT0FDUnJJLEVBQVFzSSxZQXZMaEIsV0FDSSxRQUFpQ3BWLElBQTdCOHNELEdBQXdDLENBQ3hDLElBQUkzRCxFQUFNcDJDLFNBQVNDLGNBQWMsVUFBVUcsV0FBVyxNQUN0RGcyQyxFQUFJMkcseUJBQTJCLFVBQy9CM0csRUFBSUMsVUFBWSx3QkFDaEI4RCxHQUFpQi9ELEVBQUssRUFBRyxFQUFHLEVBQUcsR0FDL0IrRCxHQUFpQi9ELEVBQUssRUFBRyxFQUFHLEVBQUcsR0FDL0IsSUFBSS9zRCxFQUFPK3NELEVBQUk1eUMsYUFBYSxFQUFHLEVBQUcsRUFBRyxHQUFHbmEsS0FDeEMwd0QsR0FDSVUsR0FBOEJweEQsRUFBTSxJQUNoQ294RCxHQUE4QnB4RCxFQUFNLElBQ3BDb3hELEdBQThCcHhELEVBQU0sR0FFaEQsT0FBTzB3RCxHQTJLQ3NFLElBQ0EvQyxJQUF1QnRCLEdBQTBCLENBRWpEamdELEVBQVF1SSxPQUFPODNDLEVBQUlDLEdBS25CLElBSEEsSUFDSWlFLEVBQUtaLEVBQUt0RCxFQUNWbUUsRUFBS1osRUFBS3RELEVBQ0xtRSxFQUFPLEVBQUdBLEVBSFAsRUFHcUJBLElBRTdCemtELEVBQVF3SSxPQUFPNjNDLEVBQUswQyxHQUFhMEIsRUFBTyxHQUFLRixFQUxyQyxHQUttRGpFLEVBQUt5QyxFQUFZMEIsRUFBT0QsRUFBTSxJQUU3RUUsR0FBUkQsR0FDQXprRCxFQUFRd0ksT0FBTzYzQyxFQUFLMEMsR0FBYTBCLEVBQU8sR0FBS0YsRUFSekMsR0FRdURqRSxFQUFLeUMsR0FBYTBCLEVBQU8sR0FBS0QsRUFBTSxJQUl2R3hrRCxFQUFRd0ksT0FBTyszQyxFQUFJQyxRQUduQnhnRCxFQUFRdUksT0FBTzgzQyxFQUFJQyxHQUNuQnRnRCxFQUFRd0ksT0FBT203QyxFQUFJQyxHQUNuQjVqRCxFQUFRd0ksT0FBTyszQyxFQUFJQyxHQUV2QnhnRCxFQUFReUksT0FDUnpJLEVBQVFvQixVQUFVMmlELEVBQVksR0FBSUEsRUFBWSxHQUFJQSxFQUFZLEdBQUlBLEVBQVksR0FBSUosRUFBSUMsR0FDdEY1akQsRUFBUTRjLFVBQVVxbUMsRUFBaUIsR0FBS1ksRUFBdUJaLEVBQWlCLEdBQUthLEdBQ3JGOWpELEVBQVFxYyxNQUFNaUosRUFBbUJ2YyxHQUFhdWMsRUFBbUJ2YyxHQUNqRS9JLEVBQVF3SixVQUFVNDVDLEVBQWNyOUMsT0FBUSxFQUFHLEdBQzNDL0YsRUFBUW1XLGNBRVJtckMsSUFDQXRoRCxFQUFRcUksT0FDUnJJLEVBQVFnakQseUJBQTJCLGNBQ25DaGpELEVBQVEya0QsWUFBYyxRQUN0QjNrRCxFQUFRNGtELFVBQVksRUFDcEI5QixFQUFjL0MsZUFBZWx3QyxTQUFRLFNBQVUwdUMsRUFBVW52RCxFQUFHSixHQUN4RCxJQUFJWixFQUFTbXdELEVBQVNud0QsT0FDbEJ1MUQsR0FBTXYxRCxFQUFPLEdBQUcsR0FBS3MxRCxFQUFjLElBQU1uK0IsRUFDekNxK0IsSUFBT3gxRCxFQUFPLEdBQUcsR0FBS3MxRCxFQUFjLElBQU1uK0IsRUFDMUM4NkIsR0FBTWp5RCxFQUFPLEdBQUcsR0FBS3MxRCxFQUFjLElBQU1uK0IsRUFDekMrNkIsSUFBT2x5RCxFQUFPLEdBQUcsR0FBS3MxRCxFQUFjLElBQU1uK0IsRUFDMUNnN0IsR0FBTW55RCxFQUFPLEdBQUcsR0FBS3MxRCxFQUFjLElBQU1uK0IsRUFDekNpN0IsSUFBT3B5RCxFQUFPLEdBQUcsR0FBS3MxRCxFQUFjLElBQU1uK0IsRUFDOUN2bEIsRUFBUXNJLFlBQ1J0SSxFQUFRdUksT0FBTzgzQyxFQUFJQyxHQUNuQnRnRCxFQUFRd0ksT0FBT203QyxFQUFJQyxHQUNuQjVqRCxFQUFRd0ksT0FBTyszQyxFQUFJQyxHQUNuQnhnRCxFQUFReWdELFlBQ1J6Z0QsRUFBUTZrRCxZQUVaN2tELEVBQVFtVyxXQUVMblcsRUFBUStGLE9DL0VRakssQ0FBa0JxSyxFQUFPQyxFQUFRblksS0FBS3l3QyxZQUFhcFosRUFBa0JyM0IsS0FBSzJ6RCxnQkFBZ0IzbkQsWUFBYXNyQixFQUFrQnEzQixFQUFjM3VELEtBQUtzMEQsZUFBZ0JLLEVBQVMzMEQsS0FBS3l6RCxRQUFTenpELEtBQUt1ekQsYUFBY3Z6RCxLQUFLd3pELGlCQUMxTnh6RCxLQUFLc0wsTTFGNU1MLEUwRjhNSnRMLEtBQUt3RyxXQUtUdXNELEVBQVczeUQsVUFBVXFSLEtBQU8sV0FDeEIsRzFGdE5FLEcwRnNORXpSLEtBQUtzTCxNQUF5QixDQUM5QnRMLEtBQUtzTCxNMUZ0TkosRTBGdU5EdEwsS0FBS3dHLFVBQ0wsSUFBSXF3RCxFQUFlLEVBQ25CNzJELEtBQUsrekQscUJBQXVCLEdBQzVCL3pELEtBQUs4ekQsYUFBYWx5QyxRQUFRLFNBQVV0UixFQUFNblAsRUFBR0osR0FDekMsSUFBSXVLLEVBQVFnRixFQUFLakMsV0FDakIsRzFGN05OLEcwRjZOVS9DLEcxRjVOUCxHMEY0TmtDQSxFQUE0QixDQUN2RHVyRCxJQUNBLElBQUlDLEVBQW9CdnhELEVBQU8rSyxFQUFNN0osR0FBa0IsU0FBVXlOLEdBQzdELElBQUk1SSxFQUFRZ0YsRUFBS2pDLFcxRjlON0IsRzBGK05nQi9DLEcxRjFOakIsRzBGMk5pQkEsRzFGMU5qQixHMEYyTmlCQSxJQUNBdkYsRUFBYyt3RCxHQUVPLEtBRHJCRCxJQUVJNzJELEtBQUsrMkQsbUJBQ0wvMkQsS0FBSzAwRCxpQkFHZDEwRCxNQUNIQSxLQUFLK3pELHFCQUFxQmp4RCxLQUFLZzBELEtBRXJDcHhELEtBQUsxRixPQUNjLElBQWpCNjJELEVBQ0E3L0IsV0FBV2gzQixLQUFLMDBELFdBQVdodkQsS0FBSzFGLE1BQU8sR0FHdkNBLEtBQUs4ekQsYUFBYWx5QyxTQUFRLFNBQVV0UixFQUFNblAsRUFBR0osRzFGblBuRCxHMEZvUHNCdVAsRUFBS2pDLFlBRWJpQyxFQUFLbUIsWUFTekJzaEQsRUFBVzN5RCxVQUFVMjJELGlCQUFtQixXQUNwQy8yRCxLQUFLK3pELHFCQUFxQm55QyxRQUFRN2IsR0FDbEMvRixLQUFLK3pELHFCQUF1QixNQUV6QmhCLEVBdE9vQixDQXVPN0IsSUVyQkYsR0FsTzhCLFdBSTFCLFNBQVNpRSxFQUFTQyxHQU1kajNELEtBQUtrM0QsbUJBQ3FCanlELElBQXRCZ3lELEVBQWtDQSxFQUFvQixLQUsxRGozRCxLQUFLbTNELE9BQVMsRUFLZG4zRCxLQUFLbzNELFNBQVcsR0FLaEJwM0QsS0FBS3EzRCxRQUFVLEtBS2ZyM0QsS0FBS3MzRCxRQUFVLEtBaU1uQixPQTVMQU4sRUFBUzUyRCxVQUFVNm9CLGVBQWlCLFdBQ2hDLE9BQU9qcEIsS0FBS2szRCxjQUFnQixHQUFLbDNELEtBQUs0dEMsV0FBYTV0QyxLQUFLazNELGVBSzVERixFQUFTNTJELFVBQVVvQyxNQUFRLFdBQ3ZCeEMsS0FBS20zRCxPQUFTLEVBQ2RuM0QsS0FBS28zRCxTQUFXLEdBQ2hCcDNELEtBQUtxM0QsUUFBVSxLQUNmcjNELEtBQUtzM0QsUUFBVSxNQU1uQk4sRUFBUzUyRCxVQUFVbTNELFlBQWMsU0FBVWoxRCxHQUN2QyxPQUFPdEMsS0FBS28zRCxTQUFTNzBELGVBQWVELElBUXhDMDBELEVBQVM1MkQsVUFBVXdoQixRQUFVLFNBQVV6TixHQUVuQyxJQURBLElBQUlxakQsRUFBUXgzRCxLQUFLcTNELFFBQ1ZHLEdBQ0hyakQsRUFBRXFqRCxFQUFNQyxPQUFRRCxFQUFNRSxLQUFNMTNELE1BQzVCdzNELEVBQVFBLEVBQU1HLE9BUXRCWCxFQUFTNTJELFVBQVVxSCxJQUFNLFNBQVVuRixFQUFLaU4sR0FDcEMsSUFBSWlvRCxFQUFReDNELEtBQUtvM0QsU0FBUzkwRCxHQUUxQixPQURBLE9BQWlCMkMsSUFBVnV5RCxFQUFxQixJQUN4QkEsSUFBVXgzRCxLQUFLczNELFVBR1ZFLElBQVV4M0QsS0FBS3EzRCxTQUNwQnIzRCxLQUFLcTNELFFBQWdDcjNELEtBQUtxM0QsUUFBYSxNQUN2RHIzRCxLQUFLcTNELFFBQVFPLE1BQVEsT0FHckJKLEVBQU1HLE1BQU1DLE1BQVFKLEVBQU1JLE1BQzFCSixFQUFNSSxNQUFNRCxNQUFRSCxFQUFNRyxPQUU5QkgsRUFBTUcsTUFBUSxLQUNkSCxFQUFNSSxNQUFRNTNELEtBQUtzM0QsUUFDbkJ0M0QsS0FBS3MzRCxRQUFRSyxNQUFRSCxFQUNyQngzRCxLQUFLczNELFFBQVVFLEdBYkpBLEVBQU1DLFFBcUJyQlQsRUFBUzUyRCxVQUFVNm5DLE9BQVMsU0FBVTNsQyxHQUNsQyxJQUFJazFELEVBQVF4M0QsS0FBS28zRCxTQUFTOTBELEdBb0IxQixPQW5CQSxPQUFpQjJDLElBQVZ1eUQsRUFBcUIsSUFDeEJBLElBQVV4M0QsS0FBS3MzRCxTQUNmdDNELEtBQUtzM0QsUUFBZ0NFLEVBQVcsTUFDNUN4M0QsS0FBS3MzRCxVQUNMdDNELEtBQUtzM0QsUUFBUUssTUFBUSxPQUdwQkgsSUFBVXgzRCxLQUFLcTNELFNBQ3BCcjNELEtBQUtxM0QsUUFBZ0NHLEVBQVcsTUFDNUN4M0QsS0FBS3EzRCxVQUNMcjNELEtBQUtxM0QsUUFBUU8sTUFBUSxRQUl6QkosRUFBTUcsTUFBTUMsTUFBUUosRUFBTUksTUFDMUJKLEVBQU1JLE1BQU1ELE1BQVFILEVBQU1HLGNBRXZCMzNELEtBQUtvM0QsU0FBUzkwRCxLQUNuQnRDLEtBQUttM0QsT0FDQUssRUFBTUMsUUFLakJULEVBQVM1MkQsVUFBVXd0QyxTQUFXLFdBQzFCLE9BQU81dEMsS0FBS20zRCxRQUtoQkgsRUFBUzUyRCxVQUFVc0gsUUFBVSxXQUN6QixJQUVJOHZELEVBRkFweUQsRUFBTyxJQUFJN0QsTUFBTXZCLEtBQUttM0QsUUFDdEJoMkQsRUFBSSxFQUVSLElBQUtxMkQsRUFBUXgzRCxLQUFLczNELFFBQVNFLEVBQU9BLEVBQVFBLEVBQU1JLE1BQzVDeHlELEVBQUtqRSxLQUFPcTJELEVBQU1FLEtBRXRCLE9BQU90eUQsR0FLWDR4RCxFQUFTNTJELFVBQVV3QyxVQUFZLFdBQzNCLElBRUk0MEQsRUFGQTMwRCxFQUFTLElBQUl0QixNQUFNdkIsS0FBS20zRCxRQUN4QmgyRCxFQUFJLEVBRVIsSUFBS3EyRCxFQUFReDNELEtBQUtzM0QsUUFBU0UsRUFBT0EsRUFBUUEsRUFBTUksTUFDNUMvMEQsRUFBTzFCLEtBQU9xMkQsRUFBTUMsT0FFeEIsT0FBTzUwRCxHQUtYbTBELEVBQVM1MkQsVUFBVXkzRCxTQUFXLFdBQzFCLE9BQU83M0QsS0FBS3EzRCxRQUFRSSxRQUt4QlQsRUFBUzUyRCxVQUFVMDNELFlBQWMsV0FDN0IsT0FBTzkzRCxLQUFLcTNELFFBQVFLLE1BTXhCVixFQUFTNTJELFVBQVUyM0QsYUFBZSxXQUM5QixPQUFPLzNELEtBQUtzM0QsUUFBUUksTUFLeEJWLEVBQVM1MkQsVUFBVWl5QixJQUFNLFdBQ3JCLElBQUltbEMsRUFBUXgzRCxLQUFLcTNELFFBVWpCLGNBVE9yM0QsS0FBS28zRCxTQUFTSSxFQUFNRSxNQUN2QkYsRUFBTUcsUUFDTkgsRUFBTUcsTUFBTUMsTUFBUSxNQUV4QjUzRCxLQUFLcTNELFFBQWdDRyxFQUFXLE1BQzNDeDNELEtBQUtxM0QsVUFDTnIzRCxLQUFLczNELFFBQVUsUUFFakJ0M0QsS0FBS20zRCxPQUNBSyxFQUFNQyxRQU1qQlQsRUFBUzUyRCxVQUFVK2dCLFFBQVUsU0FBVTdlLEVBQUt6QyxHQUN4Q0csS0FBS3lILElBQUluRixHQUNUdEMsS0FBS28zRCxTQUFTOTBELEdBQUttMUQsT0FBUzUzRCxHQU1oQ20zRCxFQUFTNTJELFVBQVU4SCxJQUFNLFNBQVU1RixFQUFLekMsR0FDcEMsSUFBU3lDLEtBQU90QyxLQUFLbzNELFVBQVcsSUFDaEMsSUFBSUksRUFBUSxDQUNSRSxLQUFNcDFELEVBQ05xMUQsTUFBTyxLQUNQQyxNQUFPNTNELEtBQUtzM0QsUUFDWkcsT0FBUTUzRCxHQUVQRyxLQUFLczNELFFBSU50M0QsS0FBS3MzRCxRQUFRSyxNQUFRSCxFQUhyQngzRCxLQUFLcTNELFFBQVVHLEVBS25CeDNELEtBQUtzM0QsUUFBVUUsRUFDZngzRCxLQUFLbzNELFNBQVM5MEQsR0FBT2sxRCxJQUNuQngzRCxLQUFLbTNELFFBT1hILEVBQVM1MkQsVUFBVWtqQyxRQUFVLFNBQVUzc0IsR0FDbkMzVyxLQUFLazNELGNBQWdCdmdELEdBRWxCcWdELEVBaE9rQixHQ0p0QixTQUFTLEdBQWUveUMsRUFBR2hiLEVBQUdDLEVBQUc4dUQsR0FDcEMsWUFBc0IveUQsSUFBbEIreUQsR0FDQUEsRUFBYyxHQUFLL3pDLEVBQ25CK3pDLEVBQWMsR0FBSy91RCxFQUNuQit1RCxFQUFjLEdBQUs5dUQsRUFDWjh1RCxHQUdBLENBQUMvekMsRUFBR2hiLEVBQUdDLEdBU2YsU0FBUyt1RCxHQUFVaDBDLEVBQUdoYixFQUFHQyxHQUM1QixPQUFPK2EsRUFBSSxJQUFNaGIsRUFBSSxJQUFNQyxFQU94QixTQUFTLEdBQU9xSCxHQUNuQixPQUFPMG5ELEdBQVUxbkQsRUFBVSxHQUFJQSxFQUFVLEdBQUlBLEVBQVUsSUMxQzNELElBQUksR0FBd0MsV0FDeEMsSUFBSTVOLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0EwRDVDLFNBdEMrQixTQUFVRyxHQUVyQyxTQUFTeTBELElBQ0wsT0FBa0IsT0FBWHowRCxHQUFtQkEsRUFBT21DLE1BQU01RixLQUFNb0MsWUFBY3BDLEtBaUMvRCxPQW5DQSxHQUFVazRELEVBQVd6MEQsR0FPckJ5MEQsRUFBVTkzRCxVQUFVZ3BCLFlBQWMsU0FBVWYsR0FDeEMsS0FBT3JvQixLQUFLaXBCLG9CQUNHanBCLEtBQUs2M0QsV0FDUHZ1QyxXQUFZakIsSUFJakJyb0IsS0FBS3F5QixNQUFNbzZCLFdBT3ZCeUwsRUFBVTkzRCxVQUFVKzNELG1CQUFxQixXQUNyQyxHQUF3QixJQUFwQm40RCxLQUFLNHRDLFdBQVQsQ0FHQSxJQUVJM3BCLEdEYVkzaEIsRUNmTnRDLEtBQUsrM0QsZURnQlp6MUQsRUFBSW1HLE1BQU0sS0FBS3FGLElBQUl3WSxTQ2RKLEdBQ2xCdG1CLEtBQUs0aEIsUUFBUSxTQUFVdFIsR0FDZkEsRUFBS0MsVUFBVSxLQUFPMFQsSUFDdEJqa0IsS0FBS2lvQyxPQUFPLEdBQU8zM0IsRUFBS0MsWUFDeEJELEVBQUttOEMsWUFFWC9tRCxLQUFLMUYsT0RPUixJQUFpQnNDLEdDTGI0MUQsRUFwQ21CLENBcUM1QixJQ3pERixJQUFJLEdBQXdDLFdBQ3hDLElBQUl2MUQsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQXFMNUMsU0FBUzgwRCxHQUFrQkMsR0FDdkIsT0FBS0EsRUFHRDkyRCxNQUFNQyxRQUFRNjJELEdBQ1AsU0FBVTFwRCxHQUNiLE9BQU8wcEQsR0FHZ0IsbUJBQXBCQSxFQUNBQSxFQUVKLFNBQVUxcEQsR0FDYixNQUFPLENBQUMwcEQsSUFYRCxLQWNmLFNBN0k0QixTQUFVNTBELEdBS2xDLFNBQVM2MEQsRUFBT2h1RCxHQUNaLElBQUkxRyxFQUFRSCxFQUFPTCxLQUFLcEQsT0FBU0EsS0FvQ2pDLE9BL0JBNEQsRUFBTThNLFdBQWEsR0FBY3BHLEVBQVFvRyxZQUt6QzlNLEVBQU0yMEQsY0FBZ0JILEdBQWtCOXRELEVBQVEydUMsY0FLaERyMUMsRUFBTTQwRCw4QkFDa0N2ekQsSUFBcENxRixFQUFRbXVELHlCQUNGbnVELEVBQVFtdUQsd0JBT2xCNzBELEVBQU02d0MsU0FBVSxFQUtoQjd3QyxFQUFNc0gsWUFDZ0JqRyxJQUFsQnFGLEVBQVFnQixNQUFzQmhCLEVBQVFnQixNQUFRLEdBS2xEMUgsRUFBTTgwRCxZQUEyQnp6RCxJQUFsQnFGLEVBQVFxdUQsT0FBc0JydUQsRUFBUXF1RCxNQUM5Qy8wRCxFQTRFWCxPQXJIQSxHQUFVMDBELEVBQVE3MEQsR0ErQ2xCNjBELEVBQU9sNEQsVUFBVTQ0QyxnQkFBa0IsV0FDL0IsT0FBT2g1QyxLQUFLdTRELGVBS2hCRCxFQUFPbDRELFVBQVU4NEMsMkJBQTZCLFdBQzFDLE9BQU9sNUMsS0FBS3c0RCwwQkFPaEJGLEVBQU9sNEQsVUFBVSs3QixjQUFnQixXQUM3QixPQUFPbjhCLEtBQUswUSxZQU1oQjRuRCxFQUFPbDRELFVBQVU2K0IsZUFBaUIsV0FDOUIsT0FBTyxLQU9YcTVCLEVBQU9sNEQsVUFBVWlPLFNBQVcsV0FDeEIsT0FBT3JPLEtBQUtrTCxRQUtoQm90RCxFQUFPbDRELFVBQVV3a0MsU0FBVyxXQUN4QixPQUFPNWtDLEtBQUswNEQsUUFLaEJKLEVBQU9sNEQsVUFBVTZsQixrQkFBb0IsYUFPckNxeUMsRUFBT2w0RCxVQUFVdzRELFFBQVUsV0FDdkI1NEQsS0FBS3dHLFdBU1Q4eEQsRUFBT2w0RCxVQUFVeTRELGdCQUFrQixTQUFVNWYsR0FDekNqNUMsS0FBS3U0RCxjQUFnQkgsR0FBa0JuZixHQUN2Q2o1QyxLQUFLd0csV0FNVDh4RCxFQUFPbDRELFVBQVU4akIsU0FBVyxTQUFVNVksR0FDbEN0TCxLQUFLa0wsT0FBU0ksRUFDZHRMLEtBQUt3RyxXQUVGOHhELEVBdEhnQixDQXVIekIsR0NoS0YsSUFBSVEsR0FBZSxDQUFDLEVBQUcsRUFBRyxHQTJoQjFCLFNBdGY4QixXQUkxQixTQUFTQyxFQUFTenVELEd2SXlMZixJQUFrQnZKLEVBQ2pCaTRELEV1STNLSXZnQyxFQUNKLEdBWEF6NEIsS0FBSzhLLGFBQThCN0YsSUFBcEJxRixFQUFRUSxRQUF3QlIsRUFBUVEsUUFBVSxFQUtqRTlLLEtBQUtrNkIsYUFBZTV2QixFQUFRd3VCLFlBQzVCLEd2SThLaUIvM0IsRXVJOUtEZixLQUFLazZCLGNBRWxCLEV2STZLSDgrQixFdUkvS21DLFNBQVVwNEQsRUFBR0MsR0FDNUMsT0FBT0EsRUFBSUQsSXZJOEtPRCxFQUNuQkksRUFBSWs0RCxPQUFNLFNBQVVDLEVBQVk3ekQsR0FDbkMsR0FBYyxJQUFWQSxFQUNBLE9BQU8sRUFFWCxJQUFJOHpELEVBQU1ILEVBQVFqNEQsRUFBSXNFLEVBQVEsR0FBSTZ6RCxHQUNsQyxRQUFTQyxFQUFNLEdBQTRCLElBQVJBLE91SW5MekIsS0FHTDd1RCxFQUFROHVELFFBQ1QsSUFBSyxJQUFJajRELEVBQUksRUFBR2dCLEVBQUtuQyxLQUFLazZCLGFBQWFoNUIsT0FBUyxFQUFHQyxFQUFJZ0IsSUFBTWhCLEVBQ3pELEdBQUtzM0IsR0FJRCxHQUFJejRCLEtBQUtrNkIsYUFBYS80QixHQUFLbkIsS0FBS2s2QixhQUFhLzRCLEVBQUksS0FBT3MzQixFQUFZLENBQ2hFQSxPQUFheHpCLEVBQ2IsWUFMSnd6QixFQUFhejRCLEtBQUtrNkIsYUFBYS80QixHQUFLbkIsS0FBS2s2QixhQUFhLzRCLEVBQUksR0FjdEVuQixLQUFLaTZCLFlBQWN4QixFQUtuQno0QixLQUFLK0ssUUFBVS9LLEtBQUtrNkIsYUFBYWg1QixPQUFTLEVBSzFDbEIsS0FBS3E1RCxhQUE2QnAwRCxJQUFuQnFGLEVBQVFndkQsT0FBdUJodkQsRUFBUWd2RCxPQUFTLEtBSy9EdDVELEtBQUt1NUQsU0FBVyxVQUNRdDBELElBQXBCcUYsRUFBUTh1RCxVQUNScDVELEtBQUt1NUQsU0FBV2p2RCxFQUFROHVELFFBQ3hCLEVBQU9wNUQsS0FBS3U1RCxTQUFTcjRELFFBQVVsQixLQUFLazZCLGFBQWFoNUIsT0FBUSxLQUU3RCxJQUFJNkssRUFBU3pCLEVBQVF5QixZQUNOOUcsSUFBWDhHLEdBQXlCL0wsS0FBS3E1RCxTQUFZcjVELEtBQUt1NUQsV0FDL0N2NUQsS0FBS3E1RCxRQUFVcmpELEdBQVdqSyxJQUU5QixHQUFTL0wsS0FBS3E1RCxTQUFXcjVELEtBQUt1NUQsVUFBY3Y1RCxLQUFLcTVELFVBQVlyNUQsS0FBS3U1RCxTQUFXLElBSzdFdjVELEtBQUt3NUQsV0FBYSxVQUNRdjBELElBQXRCcUYsRUFBUW12RCxZQUNSejVELEtBQUt3NUQsV0FBYWx2RCxFQUFRbXZELFVBQzFCLEVBQU96NUQsS0FBS3c1RCxXQUFXdDRELFFBQVVsQixLQUFLazZCLGFBQWFoNUIsT0FBUSxLQU0vRGxCLEtBQUswNUQsZUFDb0J6MEQsSUFBckJxRixFQUFRcXZELFNBQ0ZydkQsRUFBUXF2RCxTQUNQMzVELEtBQUt3NUQsV0FFRixLcEV4SFMsSW9FeUh2QixHQUFTeDVELEtBQUswNUQsV0FBYTE1RCxLQUFLdzVELFlBQzNCeDVELEtBQUswNUQsWUFBYzE1RCxLQUFLdzVELFdBQWEsSUFLMUN4NUQsS0FBSzJjLGFBQXFCMVgsSUFBWDhHLEVBQXVCQSxFQUFTLEtBSy9DL0wsS0FBSzQ1RCxnQkFBa0IsS0FLdkI1NUQsS0FBSzY1RCxTQUFXLENBQUMsRUFBRyxHQUtwQjc1RCxLQUFLODVELFdBQWEsQ0FBQyxFQUFHLEVBQUcsRUFBRyxRQUNONzBELElBQWxCcUYsRUFBUXl2RCxNQUNSLzVELEtBQUs0NUQsZ0JBQWtCdHZELEVBQVF5dkQsTUFBTWpzRCxLQUFJLFNBQVU2SSxFQUFNc04sR0FDckQsSUFBSXRULEVBQVksSUFBSSxHQUFVNUgsS0FBS0YsSUFBSSxFQUFHOE4sRUFBSyxJQUFLNU4sS0FBS0QsSUFBSTZOLEVBQUssR0FBSyxHQUFJLEdBQUk1TixLQUFLRixJQUFJLEVBQUc4TixFQUFLLElBQUs1TixLQUFLRCxJQUFJNk4sRUFBSyxHQUFLLEdBQUksSUFDNUgsR0FBSTVLLEVBQVEsQ0FDUixJQUFJaXVELEVBQXNCaDZELEtBQUtpbEIsMEJBQTBCbFosRUFBUWtZLEdBQ2pFdFQsRUFBVWdFLEtBQU81TCxLQUFLRCxJQUFJa3hELEVBQW9CcmxELEtBQU1oRSxFQUFVZ0UsTUFDOURoRSxFQUFVa0UsS0FBTzlMLEtBQUtGLElBQUlteEQsRUFBb0JubEQsS0FBTWxFLEVBQVVrRSxNQUM5RGxFLEVBQVVpRSxLQUFPN0wsS0FBS0QsSUFBSWt4RCxFQUFvQnBsRCxLQUFNakUsRUFBVWlFLE1BQzlEakUsRUFBVW1FLEtBQU8vTCxLQUFLRixJQUFJbXhELEVBQW9CbGxELEtBQU1uRSxFQUFVbUUsTUFFbEUsT0FBT25FLElBQ1IzUSxNQUVFK0wsR0FDTC9MLEtBQUtpNkQscUJBQXFCbHVELEdBK1hsQyxPQXBYQWd0RCxFQUFTMzRELFVBQVU4NUQsaUJBQW1CLFNBQVVudUQsRUFBUXVCLEVBQU1zRCxHQUUxRCxJQURBLElBQUlELEVBQVkzUSxLQUFLaWxCLDBCQUEwQmxaLEVBQVF1QixHQUM5Q25NLEVBQUl3UCxFQUFVZ0UsS0FBTXhTLEVBQUt3TyxFQUFVa0UsS0FBTTFULEdBQUtnQixJQUFNaEIsRUFDekQsSUFBSyxJQUFJa3VCLEVBQUkxZSxFQUFVaUUsS0FBTXlnQixFQUFLMWtCLEVBQVVtRSxLQUFNdWEsR0FBS2dHLElBQU1oRyxFQUN6RHplLEVBQVMsQ0FBQ3RELEVBQU1uTSxFQUFHa3VCLEtBVy9CMHBDLEVBQVMzNEQsVUFBVXdsQixnQ0FBa0MsU0FBVXJWLEVBQVdLLEVBQVV1cEQsRUFBZWxsRCxHQUMvRixJQUFlaE0sRUFBR0MsRUFDZGt4RCxFQUFrQixLQUNsQm4yQyxFQUFJMVQsRUFBVSxHQUFLLEVBUXZCLElBUHlCLElBQXJCdlEsS0FBS2k2QixhQUNMaHhCLEVBQUlzSCxFQUFVLEdBQ2RySCxFQUFJcUgsRUFBVSxJQUdkNnBELEVBQWtCcDZELEtBQUttbkIsbUJBQW1CNVcsRUFBVzBFLEdBRWxEZ1AsR0FBS2prQixLQUFLOEssU0FBUyxDQVN0QixHQUFJOEYsRUFBU3FULEVBUlksSUFBckJqa0IsS0FBS2k2QixZQUdPLEdBRlpoeEIsRUFBSUYsS0FBS2t3QixNQUFNaHdCLEVBQUksR0FFb0JBLEVBRHZDQyxFQUFJSCxLQUFLa3dCLE1BQU0vdkIsRUFBSSxHQUMwQkEsRUFBR2l4RCxHQUdwQ242RCxLQUFLaWxCLDBCQUEwQm0xQyxFQUFpQm4yQyxFQUFHazJDLElBRy9ELE9BQU8sSUFFVGwyQyxFQUVOLE9BQU8sR0FPWDgwQyxFQUFTMzRELFVBQVU0TCxVQUFZLFdBQzNCLE9BQU9oTSxLQUFLMmMsU0FPaEJvOEMsRUFBUzM0RCxVQUFVZ00sV0FBYSxXQUM1QixPQUFPcE0sS0FBSytLLFNBT2hCZ3VELEVBQVMzNEQsVUFBVStMLFdBQWEsV0FDNUIsT0FBT25NLEtBQUs4SyxTQVFoQml1RCxFQUFTMzRELFVBQVVpNkQsVUFBWSxTQUFVcDJDLEdBQ3JDLE9BQUlqa0IsS0FBS3E1RCxRQUNFcjVELEtBQUtxNUQsUUFHTHI1RCxLQUFLdTVELFNBQVN0MUMsSUFTN0I4MEMsRUFBUzM0RCxVQUFVeWtCLGNBQWdCLFNBQVVaLEdBQ3pDLE9BQU9qa0IsS0FBS2s2QixhQUFhalcsSUFPN0I4MEMsRUFBUzM0RCxVQUFVNitCLGVBQWlCLFdBQ2hDLE9BQU9qL0IsS0FBS2s2QixjQVFoQjYrQixFQUFTMzRELFVBQVVzbEIsMkJBQTZCLFNBQVVuVixFQUFXNHBELEVBQWVsbEQsR0FDaEYsR0FBSTFFLEVBQVUsR0FBS3ZRLEtBQUsrSyxRQUFTLENBQzdCLEdBQXlCLElBQXJCL0ssS0FBS2k2QixZQUFtQixDQUN4QixJQUFJdGxCLEVBQXNCLEVBQWZwRSxFQUFVLEdBQ2pCcUUsRUFBc0IsRUFBZnJFLEVBQVUsR0FDckIsT0FBTyxHQUF3Qm9FLEVBQU1BLEVBQU8sRUFBR0MsRUFBTUEsRUFBTyxFQUFHdWxELEdBRW5FLElBQUlDLEVBQWtCcDZELEtBQUttbkIsbUJBQW1CNVcsRUFBVzBFLEdBQWNqVixLQUFLODVELFlBQzVFLE9BQU85NUQsS0FBS2lsQiwwQkFBMEJtMUMsRUFBaUI3cEQsRUFBVSxHQUFLLEVBQUc0cEQsR0FFN0UsT0FBTyxNQVFYcEIsRUFBUzM0RCxVQUFVazZELDZCQUErQixTQUFVL3BELEVBQVcwVCxFQUFHazJDLEdBQ3RFLEdBQUlsMkMsRUFBSWprQixLQUFLK0ssU0FBV2taLEVBQUlqa0IsS0FBSzhLLFFBQzdCLE9BQU8sS0FFWCxJQUFJeXZELEVBQWFocUQsRUFBVSxHQUN2QmlxRCxFQUFhanFELEVBQVUsR0FDdkJrcUQsRUFBYWxxRCxFQUFVLEdBQzNCLEdBQUkwVCxJQUFNczJDLEVBQ04sT0FBTyxHQUF3QkMsRUFBWUMsRUFBWUQsRUFBWUMsRUFBWU4sR0FFbkYsR0FBSW42RCxLQUFLaTZCLFlBQWEsQ0FDbEIsSUFBSXNtQixFQUFTeDNDLEtBQUtpakIsSUFBSWhzQixLQUFLaTZCLFlBQWFoVyxFQUFJczJDLEdBQ3hDNWxELEVBQU81TCxLQUFLa3dCLE1BQU11aEMsRUFBYWphLEdBQy9CM3JDLEVBQU83TCxLQUFLa3dCLE1BQU13aEMsRUFBYWxhLEdBQ25DLE9BQUl0OEIsRUFBSXMyQyxFQUNHLEdBQXdCNWxELEVBQU1BLEVBQU1DLEVBQU1BLEVBQU11bEQsR0FJcEQsR0FBd0J4bEQsRUFGcEI1TCxLQUFLa3dCLE1BQU1zbkIsR0FBVWlhLEVBQWEsSUFBTSxFQUVSNWxELEVBRGhDN0wsS0FBS2t3QixNQUFNc25CLEdBQVVrYSxFQUFhLElBQU0sRUFDSU4sR0FFM0QsSUFBSUMsRUFBa0JwNkQsS0FBS21uQixtQkFBbUI1VyxFQUFXdlEsS0FBSzg1RCxZQUM5RCxPQUFPOTVELEtBQUtpbEIsMEJBQTBCbTFDLEVBQWlCbjJDLEVBQUdrMkMsSUFTOURwQixFQUFTMzRELFVBQVVzNkQsbUJBQXFCLFNBQVV6MkMsRUFBR3RULEVBQVdzRSxHQUM1RCxJQUFJcWtELEVBQVN0NUQsS0FBS3E2RCxVQUFVcDJDLEdBQ3hCNVcsRUFBYXJOLEtBQUs2a0IsY0FBY1osR0FDaEMwMUMsRUFBV2pxQixHQUFPMXZDLEtBQUs0MEQsWUFBWTN3QyxHQUFJamtCLEtBQUs2NUQsVUFDNUNsbEQsRUFBTzJrRCxFQUFPLEdBQUszb0QsRUFBVWdFLEtBQU9nbEQsRUFBUyxHQUFLdHNELEVBQ2xEd0gsRUFBT3lrRCxFQUFPLElBQU0zb0QsRUFBVWtFLEtBQU8sR0FBSzhrRCxFQUFTLEdBQUt0c0QsRUFHNUQsT0FBTzJILEdBQWVMLEVBRlgya0QsRUFBTyxHQUFLM29ELEVBQVVpRSxLQUFPK2tELEVBQVMsR0FBS3RzRCxFQUVwQndILEVBRHZCeWtELEVBQU8sSUFBTTNvRCxFQUFVbUUsS0FBTyxHQUFLNmtELEVBQVMsR0FBS3RzRCxFQUNkNEgsSUFTbEQ4akQsRUFBUzM0RCxVQUFVNmtCLDBCQUE0QixTQUFVbFosRUFBUWtZLEVBQUdrMkMsR0FDaEUsSUFBSTVwRCxFQUFZdW9ELEdBQ2hCOTRELEtBQUsyNkQsdUJBQXVCNXVELEVBQU8sR0FBSUEsRUFBTyxHQUFJa1ksR0FBRyxFQUFPMVQsR0FDNUQsSUFBSW9FLEVBQU9wRSxFQUFVLEdBQ2pCcUUsRUFBT3JFLEVBQVUsR0FFckIsT0FEQXZRLEtBQUsyNkQsdUJBQXVCNXVELEVBQU8sR0FBSUEsRUFBTyxHQUFJa1ksR0FBRyxFQUFNMVQsR0FDcEQsR0FBd0JvRSxFQUFNcEUsRUFBVSxHQUFJcUUsRUFBTXJFLEVBQVUsR0FBSTRwRCxJQU0zRXBCLEVBQVMzNEQsVUFBVXlwQixtQkFBcUIsU0FBVXRaLEdBQzlDLElBQUkrb0QsRUFBU3Q1RCxLQUFLcTZELFVBQVU5cEQsRUFBVSxJQUNsQ2xELEVBQWFyTixLQUFLNmtCLGNBQWN0VSxFQUFVLElBQzFDb3BELEVBQVdqcUIsR0FBTzF2QyxLQUFLNDBELFlBQVlya0QsRUFBVSxJQUFLdlEsS0FBSzY1RCxVQUMzRCxNQUFPLENBQ0hQLEVBQU8sSUFBTS9vRCxFQUFVLEdBQUssSUFBT29wRCxFQUFTLEdBQUt0c0QsRUFDakRpc0QsRUFBTyxJQUFNL29ELEVBQVUsR0FBSyxJQUFPb3BELEVBQVMsR0FBS3RzRCxJQVd6RDByRCxFQUFTMzRELFVBQVUrbUIsbUJBQXFCLFNBQVU1VyxFQUFXMEUsR0FDekQsSUFBSXFrRCxFQUFTdDVELEtBQUtxNkQsVUFBVTlwRCxFQUFVLElBQ2xDbEQsRUFBYXJOLEtBQUs2a0IsY0FBY3RVLEVBQVUsSUFDMUNvcEQsRUFBV2pxQixHQUFPMXZDLEtBQUs0MEQsWUFBWXJrRCxFQUFVLElBQUt2USxLQUFLNjVELFVBQ3ZEbGxELEVBQU8ya0QsRUFBTyxHQUFLL29ELEVBQVUsR0FBS29wRCxFQUFTLEdBQUt0c0QsRUFDaER1SCxFQUFPMGtELEVBQU8sSUFBTS9vRCxFQUFVLEdBQUssR0FBS29wRCxFQUFTLEdBQUt0c0QsRUFHMUQsT0FBTzJILEdBQWVMLEVBQU1DLEVBRmpCRCxFQUFPZ2xELEVBQVMsR0FBS3RzRCxFQUNyQnVILEVBQU8ra0QsRUFBUyxHQUFLdHNELEVBQ2M0SCxJQWFsRDhqRCxFQUFTMzRELFVBQVV3NkQsa0NBQW9DLFNBQVU3cEQsRUFBWTFELEVBQVkycUQsR0FDckYsT0FBT2g0RCxLQUFLNjZELGdDQUFnQzlwRCxFQUFXLEdBQUlBLEVBQVcsR0FBSTFELEdBQVksRUFBTzJxRCxJQWVqR2UsRUFBUzM0RCxVQUFVeTZELGdDQUFrQyxTQUFVNXhELEVBQUdDLEVBQUdtRSxFQUFZeXRELEVBQTJCOUMsR0FDeEcsSUFBSS96QyxFQUFJamtCLEtBQUswa0Isa0JBQWtCclgsR0FDM0IrZ0IsRUFBUS9nQixFQUFhck4sS0FBSzZrQixjQUFjWixHQUN4Q3ExQyxFQUFTdDVELEtBQUtxNkQsVUFBVXAyQyxHQUN4QjAxQyxFQUFXanFCLEdBQU8xdkMsS0FBSzQwRCxZQUFZM3dDLEdBQUlqa0IsS0FBSzY1RCxVQUM1Q2tCLEVBQVVELEVBQTRCLEdBQU0sRUFDNUNFLEVBQVVGLEVBQTRCLEdBQU0sRUFDNUNHLEVBQWNseUQsS0FBS2t3QixPQUFPaHdCLEVBQUlxd0QsRUFBTyxJQUFNanNELEVBQWEwdEQsR0FDeERHLEVBQWNueUQsS0FBS2t3QixPQUFPcWdDLEVBQU8sR0FBS3B3RCxHQUFLbUUsRUFBYTJ0RCxHQUN4RFIsRUFBY3BzQyxFQUFRNnNDLEVBQWV0QixFQUFTLEdBQzlDYyxFQUFjcnNDLEVBQVE4c0MsRUFBZXZCLEVBQVMsR0FTbEQsT0FSSW1CLEdBQ0FOLEVBQWF6eEQsS0FBSzB3QixLQUFLK2dDLEdBQWMsRUFDckNDLEVBQWExeEQsS0FBSzB3QixLQUFLZ2hDLEdBQWMsSUFHckNELEVBQWF6eEQsS0FBS2t3QixNQUFNdWhDLEdBQ3hCQyxFQUFhMXhELEtBQUtrd0IsTUFBTXdoQyxJQUVyQixHQUF3QngyQyxFQUFHdTJDLEVBQVlDLEVBQVl6QyxJQWlCOURlLEVBQVMzNEQsVUFBVXU2RCx1QkFBeUIsU0FBVTF4RCxFQUFHQyxFQUFHK2EsRUFBRzYyQyxFQUEyQjlDLEdBQ3RGLElBQUlzQixFQUFTdDVELEtBQUtxNkQsVUFBVXAyQyxHQUN4QjVXLEVBQWFyTixLQUFLNmtCLGNBQWNaLEdBQ2hDMDFDLEVBQVdqcUIsR0FBTzF2QyxLQUFLNDBELFlBQVkzd0MsR0FBSWprQixLQUFLNjVELFVBQzVDa0IsRUFBVUQsRUFBNEIsR0FBTSxFQUM1Q0UsRUFBVUYsRUFBNEIsR0FBTSxFQUM1Q0csRUFBY2x5RCxLQUFLa3dCLE9BQU9od0IsRUFBSXF3RCxFQUFPLElBQU1qc0QsRUFBYTB0RCxHQUN4REcsRUFBY255RCxLQUFLa3dCLE9BQU9xZ0MsRUFBTyxHQUFLcHdELEdBQUttRSxFQUFhMnRELEdBQ3hEUixFQUFhUyxFQUFjdEIsRUFBUyxHQUNwQ2MsRUFBYVMsRUFBY3ZCLEVBQVMsR0FTeEMsT0FSSW1CLEdBQ0FOLEVBQWF6eEQsS0FBSzB3QixLQUFLK2dDLEdBQWMsRUFDckNDLEVBQWExeEQsS0FBSzB3QixLQUFLZ2hDLEdBQWMsSUFHckNELEVBQWF6eEQsS0FBS2t3QixNQUFNdWhDLEdBQ3hCQyxFQUFhMXhELEtBQUtrd0IsTUFBTXdoQyxJQUVyQixHQUF3QngyQyxFQUFHdTJDLEVBQVlDLEVBQVl6QyxJQVU5RGUsRUFBUzM0RCxVQUFVNm1CLHlCQUEyQixTQUFVbFcsRUFBWWtULEVBQUcrekMsR0FDbkUsT0FBT2g0RCxLQUFLMjZELHVCQUF1QjVwRCxFQUFXLEdBQUlBLEVBQVcsR0FBSWtULEdBQUcsRUFBTyt6QyxJQU0vRWUsRUFBUzM0RCxVQUFVKzZELHVCQUF5QixTQUFVNXFELEdBQ2xELE9BQU92USxLQUFLazZCLGFBQWEzcEIsRUFBVSxLQVV2Q3dvRCxFQUFTMzRELFVBQVV3MEQsWUFBYyxTQUFVM3dDLEdBQ3ZDLE9BQUlqa0IsS0FBSzA1RCxVQUNFMTVELEtBQUswNUQsVUFHTDE1RCxLQUFLdzVELFdBQVd2MUMsSUFPL0I4MEMsRUFBUzM0RCxVQUFVZzdELGlCQUFtQixTQUFVbjNDLEdBQzVDLE9BQUtqa0IsS0FBSzQ1RCxnQkFNQzU1RCxLQUFLNDVELGdCQUFnQjMxQyxHQUxyQmprQixLQUFLMmMsUUFDTjNjLEtBQUtpbEIsMEJBQTBCamxCLEtBQUsyYyxRQUFTc0gsR0FDN0MsTUF1QmQ4MEMsRUFBUzM0RCxVQUFVc2tCLGtCQUFvQixTQUFVclgsRUFBWW0xQixHQUV6RCxPQUFPLEVBREMxaEMsRUFBa0JkLEtBQUtrNkIsYUFBYzdzQixFQUFZbTFCLEdBQWlCLEdBQzFEeGlDLEtBQUs4SyxRQUFTOUssS0FBSytLLFVBTXZDZ3VELEVBQVMzNEQsVUFBVTY1RCxxQkFBdUIsU0FBVWx1RCxHQUdoRCxJQUZBLElBQUk3SyxFQUFTbEIsS0FBS2s2QixhQUFhaDVCLE9BQzNCbTZELEVBQWlCLElBQUk5NUQsTUFBTUwsR0FDdEIraUIsRUFBSWprQixLQUFLOEssUUFBU21aLEVBQUkvaUIsSUFBVStpQixFQUNyQ28zQyxFQUFlcDNDLEdBQUtqa0IsS0FBS2lsQiwwQkFBMEJsWixFQUFRa1ksR0FFL0Rqa0IsS0FBSzQ1RCxnQkFBa0J5QixHQUVwQnRDLEVBcGZrQixHQ3JDdEIsU0FBU3VDLEdBQWlCNXFELEdBQzdCLElBQUl3TixFQUFXeE4sRUFBV3NOLHFCQUsxQixPQUpLRSxJQUNEQSxFQTBHRCxTQUE2QnhOLEVBQVk2cUQsRUFBYUMsRUFBY0MsR0FFdkUsT0ExRUcsU0FBeUIxdkQsRUFBUXd2RCxFQUFhQyxFQUFjQyxHQUMvRCxJQUNJM2lDLEVBQWM0aUMsR0FBc0IzdkQsRUF3RVR3dkQsVUF4RThCQyxHQUM3RCxPQUFPLElBQUksR0FBUyxDQUNoQnp2RCxPQUFRQSxFQUNSdXRELE9BQVFqakQsR0FBVXRLLEVBSitCd0ssWUFLakR1aUIsWUFBYUEsRUFDYjZnQyxTQUFVNkIsSUFtRVBHLENBRE1DLEdBQXFCbHJELEdBM0duQm1yRCxXQUFvQm5yRCxHQUMvQkEsRUFBV3VOLG1CQUFtQkMsSUFFM0JBLEVBK0VYLFNBQVN3OUMsR0FBc0IzdkQsRUFBUXd2RCxFQUFhQyxFQUFjTSxHQVU5RCxJQVRBLElBQUkvd0QsT0FBMEI5RixJQUFoQnMyRCxFQUE0QkEsRXJFOUZoQixHcUUrRnRCcGpELEVBQVNoQyxHQUFVcEssR0FDbkJtTSxFQUFRLEdBQVNuTSxHQUNqQjR0RCxFQUFXanFCLFFBQXdCenFDLElBQWpCdTJELEVBQTZCQSxFckU1RnhCLEtxRTZGdkI3d0QsRUFBZ0JteEQsRUFBb0IsRUFDbENBLEVBQ0EveUQsS0FBS0QsSUFBSW9QLEVBQVF5aEQsRUFBUyxHQUFJeGhELEVBQVN3aEQsRUFBUyxJQUNsRHo0RCxFQUFTNkosRUFBVSxFQUNuQit0QixFQUFjLElBQUl2M0IsTUFBTUwsR0FDbkIraUIsRUFBSSxFQUFHQSxFQUFJL2lCLElBQVUraUIsRUFDMUI2VSxFQUFZN1UsR0FBS3RaLEVBQWdCNUIsS0FBS2lqQixJQUFJLEVBQUcvSCxHQUVqRCxPQUFPNlUsRUFxQkosU0FBUzhpQyxHQUFxQmxyRCxHQUVqQyxJQUFJM0UsR0FESjJFLEVBQWEsR0FBY0EsSUFDSDFFLFlBQ3hCLElBQUtELEVBQVEsQ0FDVCxJQUFJZ3dELEVBQVEsSUFBTXgvQyxHQUFnQixZQUFrQjdMLEVBQVdpTixtQkFDL0Q1UixFQUFTaUosSUFBZ0IrbUQsR0FBT0EsRUFBTUEsRUFBTUEsR0FFaEQsT0FBT2h3RCxFQzdJWCxJQUFJLEdBQXdDLFdBQ3hDLElBQUlwSixFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBMkR4QzA0RCxHQUE0QixTQUFVdjRELEdBS3RDLFNBQVN1NEQsRUFBVzF4RCxHQUNoQixJQUFJMUcsRUFBUUgsRUFBT0wsS0FBS3BELEtBQU0sQ0FDMUJpNUMsYUFBYzN1QyxFQUFRMnVDLGFBQ3RCd2Ysd0JBQXlCbnVELEVBQVFtdUQsd0JBQ2pDL25ELFdBQVlwRyxFQUFRb0csV0FDcEJwRixNQUFPaEIsRUFBUWdCLE1BQ2ZxdEQsTUFBT3J1RCxFQUFRcXVELFNBQ2IzNEQsS0FJTjRELEVBQU1xQyxHQUlOckMsRUFBTXVDLEtBSU52QyxFQUFNeUMsR0FLTnpDLEVBQU1xNEQsYUFBNkJoM0QsSUFBbkJxRixFQUFRNHhELFFBQXVCNXhELEVBQVE0eEQsT0FLdkR0NEQsRUFBTXU0RCxxQkFDeUJsM0QsSUFBM0JxRixFQUFRd2EsZUFBK0J4YSxFQUFRd2EsZUFBaUIsRUFLcEVsaEIsRUFBTXNhLGNBQWdDalosSUFBckJxRixFQUFRNFQsU0FBeUI1VCxFQUFRNFQsU0FBVyxLQUNyRSxJQUNJQSxFQUFXNVQsRUFBUTRULFNBZ0N2QixPQS9CSUEsR0FDQXd4QixHQUFPeHhCLEVBQVMwMkMsWUFBWTEyQyxFQUFTL1IsY0FIMUIsQ0FBQyxJQUFLLE1BU3JCdkksRUFBTXc0RCxVQUFZLElBQUksR0FBVTl4RCxFQUFRK3hELFdBQWEsR0FLckR6NEQsRUFBTTA0RCxRQUFVLENBQUMsRUFBRyxHQUtwQjE0RCxFQUFNOHpELEtBQU9wdEQsRUFBUWhJLEtBQU8sR0FLNUJzQixFQUFNMjRELFlBQWMsQ0FBRXgwQyxXQUFZemQsRUFBUXlkLFlBUTFDbmtCLEVBQU0rZ0IsV0FBYXJhLEVBQVFxYSxXQUFhcmEsRUFBUXFhLFdBQWEsRUFDdEQvZ0IsRUFnTlgsT0F6UkEsR0FBVW80RCxFQUFZdjRELEdBOEV0QnU0RCxFQUFXNTdELFVBQVU2b0IsZUFBaUIsV0FDbEMsT0FBT2pwQixLQUFLbzhELFVBQVVuekMsa0JBTTFCK3lDLEVBQVc1N0QsVUFBVWdwQixZQUFjLFNBQVUxWSxFQUFZMlgsR0FDckQsSUFBSSt6QyxFQUFZcDhELEtBQUt3OEQsMEJBQTBCOXJELEdBQzNDMHJELEdBQ0FBLEVBQVVoekMsWUFBWWYsSUFZOUIyekMsRUFBVzU3RCxVQUFVeVEsa0JBQW9CLFNBQVVILEVBQVl1VCxFQUFHdFQsRUFBV0MsR0FDekUsSUFBSXdyRCxFQUFZcDhELEtBQUt3OEQsMEJBQTBCOXJELEdBQy9DLElBQUswckQsRUFDRCxPQUFPLEVBSVgsSUFGQSxJQUNJOXJELEVBQU1rWCxFQUFjaTFDLEVBRHBCOTJDLEdBQVUsRUFFTDFjLEVBQUkwSCxFQUFVZ0UsS0FBTTFMLEdBQUswSCxFQUFVa0UsT0FBUTVMLEVBQ2hELElBQUssSUFBSUMsRUFBSXlILEVBQVVpRSxLQUFNMUwsR0FBS3lILEVBQVVtRSxPQUFRNUwsRUFDaERzZSxFQUFleXdDLEdBQVVoMEMsRUFBR2hiLEVBQUdDLEdBQy9CdXpELEdBQVMsRUFDTEwsRUFBVTdFLFlBQVkvdkMsS0FFdEJpMUMsRWxHcEtSLEtrR21LUW5zRCxFQUFxRDhyRCxFQUFVMzBELElBQUkrZixJQUNyRG5aLGNBRVZvdUQsR0FBNEIsSUFBbkI3ckQsRUFBU04sSUFHckJtc0QsSUFDRDkyQyxHQUFVLEdBSXRCLE9BQU9BLEdBTVhxMkMsRUFBVzU3RCxVQUFVa25CLHVCQUF5QixTQUFVNVcsR0FDcEQsT0FBTyxHQU9Yc3JELEVBQVc1N0QsVUFBVWtwQixPQUFTLFdBQzFCLE9BQU90cEIsS0FBSzAzRCxNQU9oQnNFLEVBQVc1N0QsVUFBVXM4RCxPQUFTLFNBQVVwNkQsR0FDaEN0QyxLQUFLMDNELE9BQVNwMUQsSUFDZHRDLEtBQUswM0QsS0FBT3AxRCxFQUNadEMsS0FBS3dHLFlBT2J3MUQsRUFBVzU3RCxVQUFVb21CLFVBQVksU0FBVTlWLEdBQ3ZDLE9BQU8xUSxLQUFLaThELFNBS2hCRCxFQUFXNTdELFVBQVU2K0IsZUFBaUIsV0FDbEMsT0FBT2ovQixLQUFLa2UsU0FBUytnQixrQkFXekIrOEIsRUFBVzU3RCxVQUFVNGpCLFFBQVUsU0FBVUMsRUFBR2hiLEVBQUdDLEVBQUc0UixFQUFZcEssR0FDMUQsT0FBTyxLQU9Yc3JELEVBQVc1N0QsVUFBVXU4RCxZQUFjLFdBQy9CLE9BQU8zOEQsS0FBS2tlLFVBTWhCODlDLEVBQVc1N0QsVUFBVXFrQix5QkFBMkIsU0FBVS9ULEdBQ3RELE9BQUsxUSxLQUFLa2UsU0FJQ2xlLEtBQUtrZSxTQUhMLEdBQXlCeE4sSUFXeENzckQsRUFBVzU3RCxVQUFVbzhELDBCQUE0QixTQUFVOXJELEdBR3ZELE9BRkEsRUFBT3NSLEdBQVdoaUIsS0FBS204QixnQkFBaUJ6ckIsR0FBYSxJQUU5QzFRLEtBQUtvOEQsV0FTaEJKLEVBQVc1N0QsVUFBVTJrQixrQkFBb0IsU0FBVWpLLEdBQy9DLE9BQU85YSxLQUFLbThELGlCQVFoQkgsRUFBVzU3RCxVQUFVd21CLGlCQUFtQixTQUFVM0MsRUFBR25KLEVBQVlwSyxHQUM3RCxJbERyUGNpRyxFQUFNb1UsRUFBT3NULEVrRHFQdkJuZ0IsRUFBV2xlLEtBQUt5a0IseUJBQXlCL1QsR0FDekNvVSxFQUFpQjlrQixLQUFLK2tCLGtCQUFrQmpLLEdBQ3hDNitDLEVBQVdqcUIsR0FBT3h4QixFQUFTMDJDLFlBQVkzd0MsR0FBSWprQixLQUFLczhELFNBQ3BELE9BQXNCLEdBQWxCeDNDLEVBQ082MEMsR2xEelBHaGpELEVrRDRQT2dqRCxFbEQ1UEQ1dUMsRWtENFBXakcsT2xEM1BsQjdmLEtBRGNvNUIsRWtENFBvQnIrQixLQUFLczhELFdsRDFQcERqK0IsRUFBVyxDQUFDLEVBQUcsSUFFbkJBLEVBQVMsR0FBTTFuQixFQUFLLEdBQUtvVSxFQUFRLEdBQU8sRUFDeENzVCxFQUFTLEdBQU0xbkIsRUFBSyxHQUFLb1UsRUFBUSxHQUFPLEVBQ2pDc1QsSWtEa1FQMjlCLEVBQVc1N0QsVUFBVXc4RCwrQkFBaUMsU0FBVXJzRCxFQUFXc3NELEdBQ3ZFLElBQUluc0QsT0FBZ0N6TCxJQUFuQjQzRCxFQUErQkEsRUFBaUI3OEQsS0FBS204QixnQkFDbEVqZSxFQUFXbGUsS0FBS3lrQix5QkFBeUIvVCxHQUk3QyxPQUhJMVEsS0FBSzRrQyxZQUFjbDBCLEVBQVdvTixhQUM5QnZOLEVEclJMLFNBQWUyTixFQUFVM04sRUFBV0csR0FDdkMsSUFBSXVULEVBQUkxVCxFQUFVLEdBQ2RrRyxFQUFTeUgsRUFBUzJMLG1CQUFtQnRaLEdBQ3JDK3pCLEVBQW1CczNCLEdBQXFCbHJELEdBQzVDLEdBQUs4RCxHQUFtQjh2QixFQUFrQjd0QixHQU90QyxPQUFPbEcsRUFOUCxJQUFJNHpCLEVBQWEsR0FBU0csR0FDdEJGLEVBQWFyN0IsS0FBSzB3QixNQUFNNkssRUFBaUIsR0FBSzd0QixFQUFPLElBQU0wdEIsR0FFL0QsT0FEQTF0QixFQUFPLElBQU0wdEIsRUFBYUMsRUFDbkJsbUIsRUFBUytJLHlCQUF5QnhRLEVBQVF3TixHQzZRakMsQ0FBTS9GLEVBQVUzTixFQUFXRyxJTHRPNUMsU0FBMEJILEVBQVcyTixHQUN4QyxJQUFJK0YsRUFBSTFULEVBQVUsR0FDZHRILEVBQUlzSCxFQUFVLEdBQ2RySCxFQUFJcUgsRUFBVSxHQUNsQixHQUFJMk4sRUFBUy9SLGFBQWU4WCxHQUFLQSxFQUFJL0YsRUFBUzlSLGFBQzFDLE9BQU8sRUFFWCxJQUFJdUUsRUFBWXVOLEVBQVNrOUMsaUJBQWlCbjNDLEdBQzFDLE9BQUt0VCxHQUlNQSxFQUFVOEQsV0FBV3hMLEVBQUdDLEdLNE54QjR6RCxDQUFpQnZzRCxFQUFXMk4sR0FBWTNOLEVBQVksTUFNL0R5ckQsRUFBVzU3RCxVQUFVb0MsTUFBUSxXQUN6QnhDLEtBQUtvOEQsVUFBVTU1RCxTQUVuQnc1RCxFQUFXNTdELFVBQVV3NEQsUUFBVSxXQUMzQjU0RCxLQUFLd0MsUUFDTGlCLEVBQU9yRCxVQUFVdzRELFFBQVF4MUQsS0FBS3BELE9BT2xDZzhELEVBQVc1N0QsVUFBVTJwQixnQkFBa0IsU0FBVUwsRUFBV2haLEdBQ3hELElBQUkwckQsRUFBWXA4RCxLQUFLdzhELDBCQUEwQjlyRCxHQUMzQ2daLEVBQVkweUMsRUFBVWxGLGdCQUN0QmtGLEVBQVVsRixjQUFnQnh0QyxJQVdsQ3N5QyxFQUFXNTdELFVBQVUwcEIsUUFBVSxTQUFVN0YsRUFBR2hiLEVBQUdDLEVBQUd3SCxLQUMzQ3NyRCxFQTFSb0IsQ0EyUjdCLElBTUVlLEdBQWlDLFNBQVV0NUQsR0FNM0MsU0FBU3M1RCxFQUFnQmg5RCxFQUFNdVEsR0FDM0IsSUFBSTFNLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNRCxJQUFTQyxLQU92QyxPQURBNEQsRUFBTTBNLEtBQU9BLEVBQ04xTSxFQUVYLE9BZkEsR0FBVW01RCxFQUFpQnQ1RCxHQWVwQnM1RCxFQWhCeUIsQ0FpQmxDdDRELEdBRUYsWUNwV08sU0FBU3U0RCxHQUFtQkMsRUFBVS8rQyxHQUN6QyxJQUFJZy9DLEVBQVMsU0FDVEMsRUFBUyxTQUNUQyxFQUFTLFNBQ1RDLEVBQWEsVUFDakIsT0FBTyxTQU9HOXNELEVBQVd1SyxFQUFZcEssR0FDN0IsT0FBS0gsRUFJTTBzRCxFQUNGOTdDLFFBQVErN0MsRUFBUTNzRCxFQUFVLEdBQUdDLFlBQzdCMlEsUUFBUWc4QyxFQUFRNXNELEVBQVUsR0FBR0MsWUFDN0IyUSxRQUFRaThDLEVBQVE3c0QsRUFBVSxHQUFHQyxZQUM3QjJRLFFBQVFrOEMsR0FBWSxXQUNyQixJQUFJcDVDLEVBQUkxVCxFQUFVLEdBQ2Qrc0QsRUFBUXAvQyxFQUFTazlDLGlCQUFpQm4zQyxHQUd0QyxPQUZBLEVBQU9xNUMsRUFBTyxLQUNOQSxFQUFNbm5ELFlBQWM1RixFQUFVLEdBQUssR0FDbENDLG1CQVpiLEdDekJaLElBQUksR0FBd0MsV0FDeEMsSUFBSTdOLEVBQWdCLFNBQVVLLEVBQUduQyxHQUk3QixPQUhBOEIsRUFBZ0JoRCxPQUFPc0QsZ0JBQ2xCLENBQUVDLFVBQVcsY0FBZ0IzQixPQUFTLFNBQVV5QixFQUFHbkMsR0FBS21DLEVBQUVFLFVBQVlyQyxJQUN2RSxTQUFVbUMsRUFBR25DLEdBQUssSUFBSyxJQUFJc0MsS0FBS3RDLEVBQU9sQixPQUFPUyxVQUFVbUMsZUFBZWEsS0FBS3ZDLEVBQUdzQyxLQUFJSCxFQUFFRyxHQUFLdEMsRUFBRXNDLE1BQzNFSCxFQUFHbkMsSUFFNUIsT0FBTyxTQUFVbUMsRUFBR25DLEdBQ2hCLEdBQWlCLG1CQUFOQSxHQUEwQixPQUFOQSxFQUMzQixNQUFNLElBQUlvQixVQUFVLHVCQUF5Qm9CLE9BQU94QyxHQUFLLGlDQUU3RCxTQUFTeUMsSUFBT3RELEtBQUt1RCxZQUFjUCxFQURuQ0wsRUFBY0ssRUFBR25DLEdBRWpCbUMsRUFBRTVDLFVBQWtCLE9BQU5TLEVBQWFsQixPQUFPNkQsT0FBTzNDLElBQU15QyxFQUFHbEQsVUFBWVMsRUFBRVQsVUFBVyxJQUFJa0QsSUFaM0MsR0FzTzVDLFNBckw2QixTQUFVRyxHQUtuQyxTQUFTODVELEVBQVFqekQsR0FDYixJQUFJMUcsRUFBUUgsRUFBT0wsS0FBS3BELEtBQU0sQ0FDMUJpNUMsYUFBYzN1QyxFQUFRMnVDLGFBQ3RCb2pCLFVBQVcveEQsRUFBUSt4RCxVQUNuQkgsT0FBUTV4RCxFQUFRNHhELE9BQ2hCeHJELFdBQVlwRyxFQUFRb0csV0FDcEJwRixNQUFPaEIsRUFBUWdCLE1BQ2Y0UyxTQUFVNVQsRUFBUTRULFNBQ2xCNEcsZUFBZ0J4YSxFQUFRd2EsZUFDeEI2ekMsTUFBT3J1RCxFQUFRcXVELE1BQ2Y1d0MsV0FBWXpkLEVBQVF5ZCxXQUNwQnpsQixJQUFLZ0ksRUFBUWhJLElBQ2JtMkQsd0JBQXlCbnVELEVBQVFtdUQsd0JBQ2pDOXpDLFdBQVlyYSxFQUFRcWEsY0FDbEIza0IsS0ErQk4sT0ExQkE0RCxFQUFNNDVELHlCQUNGNTVELEVBQU02NUQsa0JBQW9CRixFQUFRbjlELFVBQVVxOUQsZ0JBS2hENzVELEVBQU1xcUQsaUJBQW1CM2pELEVBQVEyakQsaUJBQzdCM2pELEVBQVFtekQsa0JBQ1I3NUQsRUFBTTY1RCxnQkFBa0JuekQsRUFBUW16RCxpQkFNcEM3NUQsRUFBTTg1RCxLQUFPLEtBQ1RwekQsRUFBUW96RCxLQUNSOTVELEVBQU0rNUQsUUFBUXJ6RCxFQUFRb3pELE1BRWpCcHpELEVBQVFzekQsS0FDYmg2RCxFQUFNaTZELE9BQU92ekQsRUFBUXN6RCxLQU16Qmg2RCxFQUFNazZELGlCQUFtQixHQUNsQmw2RCxFQWlJWCxPQWxMQSxHQUFVMjVELEVBQVM5NUQsR0F3RG5CODVELEVBQVFuOUQsVUFBVTI5RCxvQkFBc0IsV0FDcEMsT0FBTy85RCxLQUFLaXVELGtCQU9oQnNQLEVBQVFuOUQsVUFBVTQ5RCxtQkFBcUIsV0FDbkMsT0FBT3IrRCxPQUFPcytELGVBQWVqK0QsTUFBTXk5RCxrQkFBb0J6OUQsS0FBS3k5RCxnQkFDdER6OUQsS0FBS3k5RCxnQkFBZ0IvM0QsS0FBSzFGLE1BQzFCQSxLQUFLeTlELGlCQVNmRixFQUFRbjlELFVBQVU4OUQsUUFBVSxXQUN4QixPQUFPbCtELEtBQUswOUQsTUFPaEJILEVBQVFuOUQsVUFBVTB1QyxpQkFBbUIsU0FBVXZxQyxHQUMzQyxJQUdJeEUsRUFIQXVRLEVBQW9EL0wsRUFBWSxPQUNoRThnQixFQUFNcmUsRUFBT3NKLEdBQ2J5VCxFQUFZelQsRUFBS2pDLFdwR2pJaEIsR29HbUlEMFYsR0FDQS9qQixLQUFLODlELGlCQUFpQno0QyxJQUFPLEVBQzdCdGxCLEVDaklPLGlCRG1JRnNsQixLQUFPcmxCLEtBQUs4OUQsMEJBQ1Y5OUQsS0FBSzg5RCxpQkFBaUJ6NEMsR0FDN0J0bEIsRXBHbklELEdvR29JS2drQixFQ3pIRyxnQnJHaEJQLEdvRzJJVUEsRUNqSUwsbUJEbUlTOWUsR0FFTkEsTUFBUmxGLEdBQ0FDLEtBQUtzRSxjQUFjLElBQUl5NEQsR0FBZ0JoOUQsRUFBTXVRLEtBUXJEaXRELEVBQVFuOUQsVUFBVSs5RCxvQkFBc0IsU0FBVWxRLEdBQzlDanVELEtBQUtvOEQsVUFBVTU1RCxRQUNmeEMsS0FBS2l1RCxpQkFBbUJBLEVBQ3hCanVELEtBQUt3RyxXQVFUKzJELEVBQVFuOUQsVUFBVWcrRCxtQkFBcUIsU0FBVVgsRUFBaUJuN0QsR0FDOUR0QyxLQUFLeTlELGdCQUFrQkEsRUFDdkJ6OUQsS0FBS284RCxVQUFVakUsMEJBQ0ksSUFBUjcxRCxFQUNQdEMsS0FBSzA4RCxPQUFPcDZELEdBR1p0QyxLQUFLd0csV0FRYisyRCxFQUFRbjlELFVBQVV5OUQsT0FBUyxTQUFVRCxHQUNqQyxJQUFJRixFRDlGTCxTQUFtQkUsR0FDdEIsSUFBSUYsRUFBTyxHQUNQVyxFQUFRLHNCQUFzQkMsS0FBS1YsR0FDdkMsR0FBSVMsRUFBTyxDQUVQLElBQUlFLEVBQWdCRixFQUFNLEdBQUduZCxXQUFXLEdBQ3BDc2QsRUFBZUgsRUFBTSxHQUFHbmQsV0FBVyxHQUNuQ0QsT0FBVyxFQUNmLElBQUtBLEVBQVdzZCxFQUFldGQsR0FBWXVkLElBQWdCdmQsRUFDdkR5YyxFQUFLNTZELEtBQUs4NkQsRUFBSXo4QyxRQUFRazlDLEVBQU0sR0FBSWg3RCxPQUFPbzdELGFBQWF4ZCxLQUV4RCxPQUFPeWMsRUFHWCxHQURBVyxFQUFRLGtCQUFrQkMsS0FBS1YsR0FDcEIsQ0FHUCxJQURBLElBQUljLEVBQVMxbkIsU0FBU3FuQixFQUFNLEdBQUksSUFDdkJsOUQsRUFBSTYxQyxTQUFTcW5CLEVBQU0sR0FBSSxJQUFLbDlELEdBQUt1OUQsRUFBUXY5RCxJQUM5Q3U4RCxFQUFLNTZELEtBQUs4NkQsRUFBSXo4QyxRQUFRazlDLEVBQU0sR0FBSWw5RCxFQUFFcVAsYUFFdEMsT0FBT2t0RCxFQUdYLE9BREFBLEVBQUs1NkQsS0FBSzg2RCxHQUNIRixFQ3VFUWlCLENBQVVmLEdBQ3JCNTlELEtBQUswOUQsS0FBT0EsRUFDWjE5RCxLQUFLMjlELFFBQVFELElBT2pCSCxFQUFRbjlELFVBQVV1OUQsUUFBVSxTQUFVRCxHQUNsQzE5RCxLQUFLMDlELEtBQU9BLEVBQ1osSUFBSXA3RCxFQUFNbzdELEVBQUsxM0MsS0FBSyxNQUNoQmhtQixLQUFLdzlELHlCQUNMeDlELEtBQUtvK0QsbUJEMUpWLFNBQTZCUSxFQUFXMWdELEdBRzNDLElBRkEsSUFBSXZYLEVBQU1pNEQsRUFBVTE5RCxPQUNoQjI5RCxFQUFtQixJQUFJdDlELE1BQU1vRixHQUN4QnhGLEVBQUksRUFBR0EsRUFBSXdGLElBQU94RixFQUN2QjA5RCxFQUFpQjE5RCxHQUFLNjdELEdBQW1CNEIsRUFBVXo5RCxHQUFJK2MsR0FFM0QsT0FNRyxTQUFvQzJnRCxHQUN2QyxPQUFnQyxJQUE1QkEsRUFBaUIzOUQsT0FDVjI5RCxFQUFpQixHQUVyQixTQU9HdHVELEVBQVd1SyxFQUFZcEssR0FDN0IsR0FBS0gsRUFHQSxDQUNELElBQ0lsTCxFQUFRLEdOUmpCLFNBQWNrTCxHQUNqQixPQUFRQSxFQUFVLElBQU1BLEVBQVUsSUFBTUEsRUFBVSxHTU1sQyxDQUFjQSxHQUNBc3VELEVBQWlCMzlELFFBQ3ZDLE9BQU8yOUQsRUFBaUJ4NUQsR0FBT2tMLEVBQVd1SyxFQUFZcEssS0F4QnZEb3VELENBQTJCRCxHQ29KRkUsQ0FBb0JyQixFQUFNMTlELEtBQUtrZSxVQUFXNWIsR0FHbEV0QyxLQUFLMDhELE9BQU9wNkQsSUFTcEJpN0QsRUFBUW45RCxVQUFVcTlELGdCQUFrQixTQUFVbHRELEVBQVd1SyxFQUFZcEssS0FTckU2c0QsRUFBUW45RCxVQUFVMHBCLFFBQVUsU0FBVTdGLEVBQUdoYixFQUFHQyxHQUN4QyxJQUFJc2UsRUFBZXl3QyxHQUFVaDBDLEVBQUdoYixFQUFHQyxHQUMvQmxKLEtBQUtvOEQsVUFBVTdFLFlBQVkvdkMsSUFDM0J4bkIsS0FBS284RCxVQUFVMzBELElBQUkrZixJQUdwQisxQyxFQW5MaUIsQ0FvTDFCLElFck9GLElBQUksR0FBd0MsV0FDeEMsSUFBSTU2RCxFQUFnQixTQUFVSyxFQUFHbkMsR0FJN0IsT0FIQThCLEVBQWdCaEQsT0FBT3NELGdCQUNsQixDQUFFQyxVQUFXLGNBQWdCM0IsT0FBUyxTQUFVeUIsRUFBR25DLEdBQUttQyxFQUFFRSxVQUFZckMsSUFDdkUsU0FBVW1DLEVBQUduQyxHQUFLLElBQUssSUFBSXNDLEtBQUt0QyxFQUFPbEIsT0FBT1MsVUFBVW1DLGVBQWVhLEtBQUt2QyxFQUFHc0MsS0FBSUgsRUFBRUcsR0FBS3RDLEVBQUVzQyxNQUMzRUgsRUFBR25DLElBRTVCLE9BQU8sU0FBVW1DLEVBQUduQyxHQUNoQixHQUFpQixtQkFBTkEsR0FBMEIsT0FBTkEsRUFDM0IsTUFBTSxJQUFJb0IsVUFBVSx1QkFBeUJvQixPQUFPeEMsR0FBSyxpQ0FFN0QsU0FBU3lDLElBQU90RCxLQUFLdUQsWUFBY1AsRUFEbkNMLEVBQWNLLEVBQUduQyxHQUVqQm1DLEVBQUU1QyxVQUFrQixPQUFOUyxFQUFhbEIsT0FBTzZELE9BQU8zQyxJQUFNeUMsRUFBR2xELFVBQVlTLEVBQUVULFVBQVcsSUFBSWtELElBWjNDLEdBMGE1QyxTQUFTMDdELEdBQXdCQyxFQUFXdjhCLEdBQ1V1OEIsRUFBVWoyQyxXQUFZMFosSUFDcEVBLEVBRVIsU0E5VitCLFNBQVVqL0IsR0FLckMsU0FBU3k3RCxFQUFVNTBELEdBQ2YsSUFBSTFHLEVBQVFILEVBQU9MLEtBQUtwRCxLQUFNLENBQzFCaTVDLGFBQWMzdUMsRUFBUTJ1QyxhQUN0Qm9qQixVQUFXL3hELEVBQVEreEQsVUFDbkJILE9BQVE1eEQsRUFBUTR4RCxPQUNoQnhyRCxXQUFZcEcsRUFBUW9HLFdBQ3BCcEYsTUFBT2hCLEVBQVFnQixNQUNmNFMsU0FBVTVULEVBQVE0VCxTQUNsQit2QyxpQkFBa0IzakQsRUFBUTJqRCxpQkFDcEIzakQsRUFBUTJqRCxpQkFDUitRLEdBQ05sNkMsZUFBZ0J4YSxFQUFRd2EsZUFDeEIyNEMsZ0JBQWlCbnpELEVBQVFtekQsZ0JBQ3pCRyxJQUFLdHpELEVBQVFzekQsSUFDYkYsS0FBTXB6RCxFQUFRb3pELEtBQ2QvRSxNQUFPcnVELEVBQVFxdUQsTUFDZjV3QyxXQUFZemQsRUFBUXlkLFdBQ3BCemxCLElBQUtnSSxFQUFRaEksSUFDYm0yRCx3QkFBeUJudUQsRUFBUW11RCx3QkFDakM5ekMsV0FBWXJhLEVBQVFxYSxjQUNsQjNrQixLQXVDTixPQWxDQTRELEVBQU0rK0IsaUJBQ3NCMTlCLElBQXhCcUYsRUFBUXE0QixZQUE0QnI0QixFQUFRcTRCLFlBQWMsS0FLOUQvK0IsRUFBTXU3RCxlQUNvQmw2RCxJQUF0QnFGLEVBQVE2MEQsVUFBMEI3MEQsRUFBUTYwRCxVQUFZLEdBSzFEdjdELEVBQU13N0QsdUJBQXlCLEdBSy9CeDdELEVBQU15N0Qsc0JBQXdCLEdBSzlCejdELEVBQU0wN0QsNEJBQThCaDFELEVBQVFpMUQsMkJBSzVDMzdELEVBQU00dkQsaUJBQ3lCLElBQTNCbHBELEVBQVFrMUQsZUFBMkJ4TixRQUEyQi9zRCxFQUtsRXJCLEVBQU02N0QsMEJBQTJCLEVBQzFCNzdELEVBb1JYLE9BblZBLEdBQVVzN0QsRUFBV3o3RCxHQW9FckJ5N0QsRUFBVTkrRCxVQUFVNm9CLGVBQWlCLFdBSWpDLEdBQUlqcEIsS0FBS284RCxVQUFVbnpDLGlCQUNmLE9BQU8sRUFHUCxJQUFLLElBQUkzbUIsS0FBT3RDLEtBQUtvL0QsdUJBQ2pCLEdBQUlwL0QsS0FBS28vRCx1QkFBdUI5OEQsR0FBSzJtQixpQkFDakMsT0FBTyxFQUluQixPQUFPLEdBTVhpMkMsRUFBVTkrRCxVQUFVZ3BCLFlBQWMsU0FBVTFZLEVBQVkyWCxHQUtwRCxJQUFJcTNDLEVBQWdCMS9ELEtBQUt3OEQsMEJBQTBCOXJELEdBRW5ELElBQUssSUFBSW00QixLQURUN29DLEtBQUtvOEQsVUFBVWh6QyxZQUFZcHBCLEtBQUtvOEQsV0FBYXNELEVBQWdCcjNDLEVBQVksSUFDMURyb0IsS0FBS28vRCx1QkFBd0IsQ0FDeEMsSUFBSWhELEVBQVlwOEQsS0FBS28vRCx1QkFBdUJ2MkIsR0FDNUN1ekIsRUFBVWh6QyxZQUFZZ3pDLEdBQWFzRCxFQUFnQnIzQyxFQUFZLE1BTXZFNjJDLEVBQVU5K0QsVUFBVTZsQixrQkFBb0IsV0FDcEMsT0FBT2ptQixLQUFLd3pELGlCQU1oQjBMLEVBQVU5K0QsVUFBVWtuQix1QkFBeUIsU0FBVTVXLEdBQ25ELE9BQ0kxUSxLQUFLbThCLGlCQUNMenJCLElBQ0NzUixHQUFXaGlCLEtBQUttOEIsZ0JBQWlCenJCLEdBQzNCLEVBR0ExUSxLQUFLMi9ELGFBTXBCVCxFQUFVOStELFVBQVV1L0QsVUFBWSxXQUM1QixPQUFPLEdBT1hULEVBQVU5K0QsVUFBVWtwQixPQUFTLFdBQ3pCLE9BQVE3bEIsRUFBT3JELFVBQVVrcEIsT0FBT2xtQixLQUFLcEQsT0FDaENBLEtBQUt3ekQsZ0JBQWtCLEtBQU9vTSxLQUFLQyxVQUFVNy9ELEtBQUt3ekQsaUJBQW1CLEtBTTlFMEwsRUFBVTkrRCxVQUFVb21CLFVBQVksU0FBVTlWLEdBQ3RDLFFBQ0kxUSxLQUFLbThCLGlCQUNMenJCLElBQ0NzUixHQUFXaGlCLEtBQUttOEIsZ0JBQWlCenJCLEtBSTNCak4sRUFBT3JELFVBQVVvbUIsVUFBVXBqQixLQUFLcEQsS0FBTTBRLElBT3JEd3VELEVBQVU5K0QsVUFBVXFrQix5QkFBMkIsU0FBVS9ULEdBSXJELElBQUlvdkQsRUFBVzkvRCxLQUFLbThCLGdCQUNwQixJQUFJbjhCLEtBQUtrZSxVQUFjNGhELElBQVk5OUMsR0FBVzg5QyxFQUFVcHZELEdBR25ELENBQ0QsSUFBSXF2RCxFQUFVLzRELEVBQU8wSixHQUtyQixPQUpNcXZELEtBQVcvL0QsS0FBS3EvRCx3QkFDbEJyL0QsS0FBS3EvRCxzQkFBc0JVLEdBQ3ZCLEdBQXlCcnZELElBRTFCMVEsS0FBS3EvRCxzQkFBc0JVLEdBUmxDLE9BQU8vL0QsS0FBS2tlLFVBZXBCZ2hELEVBQVU5K0QsVUFBVW84RCwwQkFBNEIsU0FBVTlyRCxHQUl0RCxJQUFJb3ZELEVBQVc5L0QsS0FBS204QixnQkFDcEIsSUFBSzJqQyxHQUFZOTlDLEdBQVc4OUMsRUFBVXB2RCxHQUNsQyxPQUFPMVEsS0FBS284RCxVQUdaLElBQUkyRCxFQUFVLzRELEVBQU8wSixHQUlyQixPQUhNcXZELEtBQVcvL0QsS0FBS28vRCx5QkFDbEJwL0QsS0FBS28vRCx1QkFBdUJXLEdBQVcsSUFBSSxHQUFVLy9ELEtBQUtvOEQsVUFBVWxGLGdCQUVqRWwzRCxLQUFLby9ELHVCQUF1QlcsSUFhM0NiLEVBQVU5K0QsVUFBVTQvRCxZQUFjLFNBQVUvN0MsRUFBR2hiLEVBQUdDLEVBQUc0UixFQUFZcEssRUFBWXBPLEdBQ3pFLElBQUlpTyxFQUFZLENBQUMwVCxFQUFHaGIsRUFBR0MsR0FDbkIrMkQsRUFBZWpnRSxLQUFLNDhELCtCQUErQnJzRCxFQUFXRyxHQUM5RHd2RCxFQUFVRCxFQUNSamdFLEtBQUt5OUQsZ0JBQWdCd0MsRUFBY25sRCxFQUFZcEssUUFDL0N6TCxFQUNGcUwsRUFBTyxJQUFJdFEsS0FBS20vRCxVQUFVNXVELE9BQXVCdEwsSUFBWmk3RCxFdEcxUnZDLEVBUUMsT3NHa1I0R2o3RCxJQUFaaTdELEVBQXdCQSxFQUFVLEdBQUlsZ0UsS0FBSzJpQyxZQUFhM2lDLEtBQUtpdUQsaUJBQWtCanVELEtBQUt1OEQsYUFHdkwsT0FGQWpzRCxFQUFLaE8sSUFBTUEsRUFDWGdPLEVBQUtyTSxpQkFBaUJ3QyxFQUFrQnpHLEtBQUs4dUMsaUJBQWlCcHBDLEtBQUsxRixPQUM1RHNRLEdBVVg0dUQsRUFBVTkrRCxVQUFVNGpCLFFBQVUsU0FBVUMsRUFBR2hiLEVBQUdDLEVBQUc0UixFQUFZcEssR0FDekQsSUFBSTBSLEVBQW1CcGlCLEtBQUttOEIsZ0JBQzVCLEdBQ0svWixHQUNBMVIsSUFDRHNSLEdBQVdJLEVBQWtCMVIsR0FHNUIsQ0FDRCxJQUFJeU8sRUFBUW5mLEtBQUt3OEQsMEJBQTBCOXJELEdBQ3ZDSCxFQUFZLENBQUMwVCxFQUFHaGIsRUFBR0MsR0FDbkJvSCxPQUFPLEVBQ1BrWCxFQUFlLEdBQU9qWCxHQUN0QjRPLEVBQU1vNEMsWUFBWS92QyxLQUNsQmxYLEVBQU82TyxFQUFNMVgsSUFBSStmLElBRXJCLElBQUlsbEIsRUFBTXRDLEtBQUtzcEIsU0FDZixHQUFJaFosR0FBUUEsRUFBS2hPLEtBQU9BLEVBQ3BCLE9BQU9nTyxFQUdQLElBQUkwaUQsRUFBaUJoekQsS0FBS3lrQix5QkFBeUJyQyxHQUMvQzZ3QyxFQUFpQmp6RCxLQUFLeWtCLHlCQUF5Qi9ULEdBQy9Dd2lELEVBQW1CbHpELEtBQUs0OEQsK0JBQStCcnNELEVBQVdHLEdBQ2xFeXZELEVBQVUsSUFBSSxHQUFXLzlDLEVBQWtCNHdDLEVBQWdCdGlELEVBQVl1aUQsRUFBZ0IxaUQsRUFBVzJpRCxFQUFrQmx6RCxLQUFLK2tCLGtCQUFrQmpLLEdBQWE5YSxLQUFLMi9ELFlBQWEsU0FBVTE3QyxFQUFHaGIsRUFBR0MsRUFBRzRSLEdBQzdMLE9BQU85YSxLQUFLb2dFLGdCQUFnQm44QyxFQUFHaGIsRUFBR0MsRUFBRzRSLEVBQVlzSCxJQUNuRDFjLEtBQUsxRixNQUFPQSxLQUFLcy9ELDRCQUE2QnQvRCxLQUFLeS9ELHlCQUEwQnovRCxLQUFLd3pELGlCQVVwRixPQVRBMk0sRUFBUTc5RCxJQUFNQSxFQUNWZ08sR0FDQTZ2RCxFQUFRN1QsWUFBY2g4QyxFQUN0QjZ2RCxFQUFRelQsc0JBQ1J2dEMsRUFBTWdDLFFBQVFxRyxFQUFjMjRDLElBRzVCaGhELEVBQU1qWCxJQUFJc2YsRUFBYzI0QyxHQUVyQkEsRUE5QlgsT0FBT25nRSxLQUFLb2dFLGdCQUFnQm44QyxFQUFHaGIsRUFBR0MsRUFBRzRSLEVBQVlzSCxHQUFvQjFSLElBMkM3RXd1RCxFQUFVOStELFVBQVVnZ0UsZ0JBQWtCLFNBQVVuOEMsRUFBR2hiLEVBQUdDLEVBQUc0UixFQUFZcEssR0FDakUsSUFBSUosRUFBTyxLQUNQa1gsRUFBZXl3QyxHQUFVaDBDLEVBQUdoYixFQUFHQyxHQUMvQjVHLEVBQU10QyxLQUFLc3BCLFNBQ2YsR0FBS3RwQixLQUFLbzhELFVBQVU3RSxZQUFZL3ZDLElBTTVCLElBREFsWCxFQUFPdFEsS0FBS284RCxVQUFVMzBELElBQUkrZixJQUNqQmxsQixLQUFPQSxFQUFLLENBSWpCLElBQUlncUQsRUFBY2g4QyxFQUNsQkEsRUFBT3RRLEtBQUtnZ0UsWUFBWS83QyxFQUFHaGIsRUFBR0MsRUFBRzRSLEVBQVlwSyxFQUFZcE8sR3RHdlcvRCxHc0d5V1VncUQsRUFBWWorQyxXQUVaaUMsRUFBS2c4QyxZQUFjQSxFQUFZQSxZQUcvQmg4QyxFQUFLZzhDLFlBQWNBLEVBRXZCaDhDLEVBQUtvOEMsc0JBQ0wxc0QsS0FBS284RCxVQUFVajdDLFFBQVFxRyxFQUFjbFgsU0FwQnpDQSxFQUFPdFEsS0FBS2dnRSxZQUFZLzdDLEVBQUdoYixFQUFHQyxFQUFHNFIsRUFBWXBLLEVBQVlwTyxHQUN6RHRDLEtBQUtvOEQsVUFBVWwwRCxJQUFJc2YsRUFBY2xYLEdBc0JyQyxPQUFPQSxHQU9YNHVELEVBQVU5K0QsVUFBVWlnRSwyQkFBNkIsU0FBVXh5RCxHQUN2RCxHQUNJN04sS0FBS3kvRCwwQkFBNEI1eEQsRUFEckMsQ0FLQSxJQUFLLElBQUlnN0IsS0FEVDdvQyxLQUFLeS9ELHlCQUEyQjV4RCxFQUNqQjdOLEtBQUtvL0QsdUJBQ2hCcC9ELEtBQUtvL0QsdUJBQXVCdjJCLEdBQUlybUMsUUFFcEN4QyxLQUFLd0csWUFjVDA0RCxFQUFVOStELFVBQVVrZ0UseUJBQTJCLFNBQVU1dkQsRUFBWTZ2RCxHQUU3RCxJQUFJQyxFQUFPLEdBQWM5dkQsR0FDekIsR0FBSTh2RCxFQUFNLENBQ04sSUFBSVQsRUFBVS80RCxFQUFPdzVELEdBQ2ZULEtBQVcvL0QsS0FBS3EvRCx3QkFDbEJyL0QsS0FBS3EvRCxzQkFBc0JVLEdBQVdRLEtBSy9DckIsRUFwVm1CLENBcVY1QixJQ2xhRixJQUFJLEdBQXdDLFdBQ3hDLElBQUl2OEQsRUFBZ0IsU0FBVUssRUFBR25DLEdBSTdCLE9BSEE4QixFQUFnQmhELE9BQU9zRCxnQkFDbEIsQ0FBRUMsVUFBVyxjQUFnQjNCLE9BQVMsU0FBVXlCLEVBQUduQyxHQUFLbUMsRUFBRUUsVUFBWXJDLElBQ3ZFLFNBQVVtQyxFQUFHbkMsR0FBSyxJQUFLLElBQUlzQyxLQUFLdEMsRUFBT2xCLE9BQU9TLFVBQVVtQyxlQUFlYSxLQUFLdkMsRUFBR3NDLEtBQUlILEVBQUVHLEdBQUt0QyxFQUFFc0MsTUFDM0VILEVBQUduQyxJQUU1QixPQUFPLFNBQVVtQyxFQUFHbkMsR0FDaEIsR0FBaUIsbUJBQU5BLEdBQTBCLE9BQU5BLEVBQzNCLE1BQU0sSUFBSW9CLFVBQVUsdUJBQXlCb0IsT0FBT3hDLEdBQUssaUNBRTdELFNBQVN5QyxJQUFPdEQsS0FBS3VELFlBQWNQLEVBRG5DTCxFQUFjSyxFQUFHbkMsR0FFakJtQyxFQUFFNUMsVUFBa0IsT0FBTlMsRUFBYWxCLE9BQU82RCxPQUFPM0MsSUFBTXlDLEVBQUdsRCxVQUFZUyxFQUFFVCxVQUFXLElBQUlrRCxJQVozQyxHQXNINUMsU0F6Q3lCLFNBQVVHLEdBSy9CLFNBQVNnOUQsRUFBSWx4RCxHQUNULElBQ0lqRixFQUFVaUYsR0FBZSxHQUN6Qm1CLE9BQW9DekwsSUFBdkJxRixFQUFRb0csV0FBMkJwRyxFQUFRb0csV0FBYSxZQUNyRXdOLE9BQWdDalosSUFBckJxRixFQUFRNFQsU0FDakI1VCxFQUFRNFQsU05YZixTQUFtQjNPLEdBQ3RCLElBQUlteEQsRUFBYW54RCxHQUFlLEdBQzVCeEQsRUFBUzIwRCxFQUFXMzBELFFBQVUsR0FBYyxhQUFhQyxZQUN6RDIwRCxFQUFjLENBQ2Q1MEQsT0FBUUEsRUFDUmpCLFFBQVM0MUQsRUFBVzUxRCxRQUNwQjZ1RCxTQUFVK0csRUFBVy9HLFNBQ3JCN2dDLFlBQWE0aUMsR0FBc0IzdkQsRUFBUTIwRCxFQUFXMzFELFFBQVMyMUQsRUFBVy9HLFNBQVUrRyxFQUFXLzFELGdCQUVuRyxPQUFPLElBQUksR0FBU2cyRCxHTUdWQyxDQUFVLENBQ1I3MEQsT0FBUTZ2RCxHQUFxQmxyRCxHQUM3Qi9GLGNBQWVMLEVBQVFLLGNBQ3ZCSSxRQUFTVCxFQUFRUyxRQUNqQkQsUUFBU1IsRUFBUVEsUUFDakI2dUQsU0FBVXJ2RCxFQUFRcXZELFdBcUIxQixPQW5CUWwyRCxFQUFPTCxLQUFLcEQsS0FBTSxDQUN0Qmk1QyxhQUFjM3VDLEVBQVEydUMsYUFDdEJvakIsVUFBVy94RCxFQUFRK3hELFVBQ25CMTVCLFlBQWFyNEIsRUFBUXE0QixZQUNyQjY4QixlQUFnQmwxRCxFQUFRazFELGVBQ3hCdEQsT0FBUTV4RCxFQUFRNHhELE9BQ2hCeHJELFdBQVlBLEVBQ1o2dUQsMkJBQTRCajFELEVBQVFpMUQsMkJBQ3BDcmhELFNBQVVBLEVBQ1YrdkMsaUJBQWtCM2pELEVBQVEyakQsaUJBQzFCbnBDLGVBQWdCeGEsRUFBUXdhLGVBQ3hCMjRDLGdCQUFpQm56RCxFQUFRbXpELGdCQUN6QkcsSUFBS3R6RCxFQUFRc3pELElBQ2JGLEtBQU1wekQsRUFBUW96RCxLQUNkL0UsV0FBeUIxekQsSUFBbEJxRixFQUFRcXVELE9BQXNCcnVELEVBQVFxdUQsTUFDN0M1d0MsV0FBWXpkLEVBQVF5ZCxXQUNwQjB3Qyx3QkFBeUJudUQsRUFBUW11RCx3QkFDakM5ekMsV0FBWXJhLEVBQVFxYSxjQUNsQjNrQixLQUdWLE9BdENBLEdBQVV5Z0UsRUFBS2g5RCxHQXNDUmc5RCxFQXZDYSxDQXdDdEIsSUMzR1dJLEdBQXFCLENBQ2hDQyxlQUFnQix3RkFDaEJDLFNBQVUsa0ZBQ1ZDLGtCQUFtQiw0RkFDbkJDLGFBQWMscUZBQ2RDLGdCQUFpQix3RkFDakJDLFlBQWEsc0ZDWFRDLEdBQWlCcHBELFNBQVM4M0IsZUFBZSxtQkFFekN1eEIsR0FBZ0IsSTNCb0NoQixjQUF5QnJaLEdBYzdCLFlBQVkxOUMsR0FDVixNQUFNaTdDLEVBQU9qN0MsR0FBVyxHQUN4Qms3QyxNQUFLLGVBQUUwQyxRQUFTLE1BQVFJLG1CQUFvQix1Q0FBd0NGLFFBQVMsdUJBQTBCN0MsSUFFdkgsTUFBTStiLEVBQXNCaDNELEdBQVcsR0FDdkN0SyxLQUFLdWhFLGFBQWUsSUFBSSxHQUFZRCxHQVMvQixZQUFZLzhELEcsUUFrQmpCLE9BakJHQSxFQUFNeEUsT0FBUzBHLEdBRWJ6RyxLQUFLd2hFLGNBQXVDLFFBQXhCLEVBQWEsUUFBYixFQUFBeGhFLEtBQUttbEMsZ0JBQVEsZUFBRW1QLGlCQUFTLGVBQUVuWSxtQkFDL0NuOEIsS0FBS3doRSxZQUFZcjdELEtBQUssVUFBVSxLaEY0UWpDLElBQW9CNEssRWdGM1FqQi9RLEtBQUt3aEUsWUFBWW5iLGFBQVksR0FDN0JybUQsS0FBS21sQyxTQUFTbVAsVUFBVXhyQixRQUFRLENBQzlCclMsUWhGeVFlMUYsRWdGelFJL1EsS0FBS3doRSxZQUFZMVosY2hGMFFyQzMwQyxHQUFVcEMsRUFBWSxZQUE2RCxjZ0Z6UWxGMnJCLFNBQVUsTUFFVDE4QixLQUFLd2hFLFlBQVkxWixlQUNsQjluRCxLQUFLc0UsY0FBYyxJQUFJeWtELEdBQXVCLHFCQUFzQi9vRCxLQUFLd2hFLFlBQVkxWixtQkFHekY5bkQsS0FBS3doRSxZQUFZbmIsYUFBWSxLQUkxQixFQU9NLGtCQUNiLE9BQU9ybUQsS0FBS3VoRSxlLE8yQnpGaEJGLEdBQWNwN0QsR0FBRyxTQUFTLEtBQ3hCbTdELEdBQWV2aEUsTUFBUSw2QkFBK0J1aEUsR0FBZXZoRSxTQUd2RXdoRSxHQUFjcDdELEdBQUcsc0JBQXVCaU8sSUFDdENrdEQsR0FBZXZoRSxNQUFRLHVCQUF5QnFVLEVBQUV1RixTQUFXLEtBQU8ybkQsR0FBZXZoRSxTQUdyRixJQUFJLEdBQUksQ0FDTk0sT0FBUSxXQUNSbW9DLE9BQVEsQ0FBQyxJQUFJK2pCLEdBQVUsQ0FDckJocUQsT0FBUSxJRFVOLGNBQTZCLEdBTWpDLFlBQVlpSSxHQUNWLE1BQU1tM0QsR0FBVW4zRCxhQUFPLEVBQVBBLEVBQVNtM0QsVUFBVyxpQkFDcENqYyxNQUFNLENBQ0pvWSxJQUFLaUQsR0FBU1ksR0FDZHhvQixhQUFjLDJEQUNkdFcsWUFBYSxtQkNuQmpCb04sU0FBVSxDQUNSLElDbkJFLGNBQXNCMFYsR0FPMUIsWUFBWUgsRUFBb0NoN0MsR0FDOUMsTUFBTWk3QyxFQUFPajdDLEdBQW1CLEdBQ2hDazdDLE1BQUssK0JBQUtELEdBQUksQ0FBR0csV0FBWSxjQUFlSixxQkRVakMsQ0FDVCxJekJvQkEsY0FBeUIsR0FzQjdCLFlBQVkvMUMsR0FDVixNQUFNakYsRUFBVWlGLEdBQTRCLEdBRXRDdEUsRUFBWVgsRUFBUVcsVUFBWVgsRUFBUVcsVUFBWSxpQkFFMUR1NkMsTUFBTSxDQUNKamYsUUFBU3Z1QixTQUFTQyxjQUFjLE9BQ2hDOVgsT0FBUW1LLEVBQVFuSyxTQUdsQkgsS0FBS29OLFVBQVksS0FFakJwTixLQUFLMGhFLGVBQWlDejhELElBQXJCcUYsRUFBUXEzRCxTQUF5QnIzRCxFQUFRcTNELFNBQVcsR0FDckUzaEUsS0FBSzRoRSxpQkFBa0IsRUFDdkI1aEUsS0FBSzZoRSxtQkFBZ0I1OEQsRUFDckJqRixLQUFLOGhFLGlCQUFjNzhELEVBQ25CakYsS0FBSytoRSxJQUFNejNELEVBQVF5M0QsVUFBTzk4RCxFQUUxQmpGLEtBQUt1bUMsUUFBUXQ3QixVQUFZQSxFQVFwQixPQUFPbXNDLEdBQ1osTUFBTXpvQyxFQUFheW9DLEVBQVN6b0MsV0FJMUIzTyxLQUFLb04sVUFIRnVCLEVBR2NBLEVBQVd2QixVQUZYLEtBSW5CcE4sS0FBS2dpRSxnQkFRQyxnQkFFTixNQUFNNTBELEVBQVlwTixLQUFLb04sVUFFdkIsSUFBS0EsRUFLSCxZQUpJcE4sS0FBSzRoRSxrQkFDUDVoRSxLQUFLdW1DLFFBQVFqdEIsTUFBTXl0QixRQUFVLE9BQzdCL21DLEtBQUs0aEUsaUJBQWtCLElBSzNCLE1BQU1uckQsRUFBU3JKLEVBQVVxSixPQUNuQi9GLEVBQWF0RCxFQUFVc0QsV0FDdkJ1eEQsRUFBdUIsVUFDN0IsSUFBSTVnRCxFQUFrQmpFLEdBQ3BCMU0sRUFDQXRELEVBQVVDLFdBQ1ZvSixFQUNBd3JELEdBR0YsTUFBTU4sRUFBWTNoRSxLQUFLMGhFLFdBQWExaEUsS0FBSytoRSxLQUFPNVgsSUFBZ0JBLEdBRTFEK1gsRUFBZVAsRUFBV3RnRCxFQUNoQyxJQUFJOGdELEVBQVMsR0FDVEQsRUFBZSxNQUNqQkMsRUFBUyxLQUNUOWdELEdBQW1CLEtBQ1Y2Z0QsRUFBZSxHQUN4QkMsRUFBUyxLQUNUOWdELEdBQW1CLEtBQ1Y2Z0QsRUFBZSxJQUN4QkMsRUFBUyxLQUVUQSxFQUFTLEtBQ1Q5Z0QsR0FBbUIsS0FHckIsSUFDSThzQixFQUFPajJCLEVBQU9rcUQsRUFEZGpoRSxFQUFJLEVBQUk0SCxLQUFLa3dCLE1BQU1sd0IsS0FBS00sSUFBSXM0RCxFQUFXdGdELEdBQW1CdFksS0FBS00sSUFBSSxLQUl2RSxPQUFhLENBQ1grNEQsRUFBZXI1RCxLQUFLa3dCLE1BQU05M0IsRUFBSSxHQUM5QixNQUFNa2hFLEVBQVV0NUQsS0FBS2lqQixJQUFJLEdBQUlvMkMsR0FHN0IsR0FGQWowQixFQUFRaWMsSUFBaUJqcEQsRUFBSSxFQUFLLEdBQUssR0FBS2toRSxFQUM1Q25xRCxFQUFRblAsS0FBSzJDLE1BQU15aUMsRUFBUTlzQixHQUN2QjJNLE1BQU05VixHQUdSLE9BRkFsWSxLQUFLdW1DLFFBQVFqdEIsTUFBTXl0QixRQUFVLFlBQzdCL21DLEtBQUs0aEUsaUJBQWtCLEdBRWxCLEdBQUkxcEQsR0FBU3lwRCxFQUNsQixRQUVBeGdFLEVBR0osSUFBSW1oRSxFQUFlLEtBQ2ZuMEIsR0FBU2kwQixHQUFjLElBQ3pCRSxFQUFldGlFLEtBQUt1aUUsZ0JBQWdCcDBCLEVBQU1xMEIsUUFBUUosRUFBZSxHQUFLQSxFQUFlLEdBQUssSUFBTUQsRUFBUWpxRCxJQUd0R29xRCxHQUFnQnRpRSxLQUFLOGhFLGFBQWVRLElBQ3RDdGlFLEtBQUt1bUMsUUFBUWdULFVBQVksR0FDekJ2NUMsS0FBS3VtQyxRQUFRN3NCLFlBQVk0b0QsR0FDekJ0aUUsS0FBSzhoRSxZQUFjUSxHQUdqQnRpRSxLQUFLNmhFLGVBQWlCM3BELElBQ3hCbFksS0FBS3VtQyxRQUFRanRCLE1BQU1wQixNQUFRQSxFQUFRLEtBQ2hDb3FELEdBQ0RBLEVBQWEvcEIsYUFBYSxRQUFTbDFDLE9BQU82VSxJQUU1Q2xZLEtBQUs2aEUsY0FBZ0IzcEQsR0FHbEJsWSxLQUFLNGhFLGtCQUNSNWhFLEtBQUt1bUMsUUFBUWp0QixNQUFNeXRCLFFBQVUsR0FDN0IvbUMsS0FBSzRoRSxpQkFBa0IsR0FZakIsZ0JBQWdCYSxFQUFhdnFELEdBRXJDLE1BRU13cUQsRUFBTTFxRCxTQUFTNnlDLGdCQUFnQiw2QkFBOEIsT0FDbkU2WCxFQUFJbnFCLGFBQWEsS0FBTSxzQkFDdkJtcUIsRUFBSW5xQixhQUFhLFVBQVcsT0FBU3JnQyxFQUFULE9BQzVCd3FELEVBQUlucUIsYUFBYSxRQUFTbDFDLE9BQU82VSxJQUNqQ3dxRCxFQUFJbnFCLGFBQWEsU0FBVSxRQUUzQixNQUFNb3FCLEVBQU8zcUQsU0FBUzZ5QyxnQkFBZ0IsNkJBQThCLFFBQ3BFOFgsRUFBS3BxQixhQUFhLEtBQU0saUNBQ3hCb3FCLEVBQUtwcUIsYUFBYSxJQUFLbDFDLE9BQU8sSUFDOUJzL0QsRUFBS3BxQixhQUFhLElBQUtsMUMsT0FBTyxJQUM5QnMvRCxFQUFLcHFCLGFBQWEsUUFBUyxRQUMzQm9xQixFQUFLcHFCLGFBQWEsU0FBVSxRQUM1Qm9xQixFQUFLcHFCLGFBQWEsT0FBUSxXQUMxQm9xQixFQUFLcHFCLGFBQWEsZUFBZ0IsTUFDbENvcUIsRUFBS3BxQixhQUFhLFNBQVUsU0FDNUJvcUIsRUFBS3BxQixhQUFhLGVBQWdCLEtBQ2xDb3FCLEVBQUtwcUIsYUFBYSxtQkFBb0IsS0FBT3JnQyxFQUFRLEtBQU9BLEVBQVEsS0FDcEV3cUQsRUFBSWhwRCxZQUFZaXBELEdBRWhCLE1BQU1DLEVBQXVCNXFELFNBQVM2eUMsZ0JBQWdCLDZCQUE4QixRQVdwRixPQVZBK1gsRUFBSzFxQixZQUFjdXFCLEVBQ25CRyxFQUFLcnFCLGFBQWEsSUFBS2wxQyxPQUFPNlUsRUFBUSxJQUN0QzBxRCxFQUFLcnFCLGFBQWEsSUFBS2wxQyxPQUFPLEtBQzlCdS9ELEVBQUtycUIsYUFBYSxjQUFlLFVBQ2pDcXFCLEVBQUtycUIsYUFBYSxZQUFhLE9BQy9CcXFCLEVBQUtycUIsYUFBYSxRQUFTLGtFQUMzQnFxQixFQUFLcnFCLGFBQWEsY0FBZSxpQ0FDakNxcUIsRUFBS3JxQixhQUFhLE9BQVEsU0FDMUJtcUIsRUFBSWhwRCxZQUFZa3BELEdBRVRGLEVBT0YsWUFBWTdpRSxHQUNqQkcsS0FBSzBoRSxVQUFZN2hFLEVBTVosY0FDTCxPQUFPRyxLQUFLMGhFLFl5QjlOVixJRXJCQSxjQUE2QixHQVVqQyxZQUFZcDNELEdBRVYsTUFBTWk3QyxFQUFPajdDLEdBQW9CLEdBRWpDaTdDLEVBQUs3MEMsV0FBYTYwQyxFQUFLNzBDLFdBQWE2MEMsRUFBSzcwQyxXQUFhLFlBQ3RENjBDLEVBQUs0RCxpQkFBbUI1RCxFQUFLNEQsaUJBQW1CNUQsRUFBSzRELGlCQUFvQnA0QyxHQUF1Q0EsRXhHNEw3RyxTQUFnQkEsRUFBWWtzRCxFQUFVNEYsR0FDekMsT0FBSTl4RCxFQUNPa3NELEVBQ0Y5N0MsUUFBUSxNQUFPcFEsRUFBVyxHQUFHeXhELFFBQVFLLElBQ3JDMWhELFFBQVEsTUFBT3BRLEVBQVcsR0FBR3l4RCxRQUFRSyxJQUduQyxHd0duTWtINVksQ0FBT2w1QyxFQUFZLGNBQWUsR0FBSyxHQUNwS3cwQyxFQUFLZ0UsY0FBZ0JoRSxFQUFLZ0UsY0FBZ0JoRSxFQUFLZ0UsY0FBZ0Isa0NBQy9EaEUsRUFBS3Q2QyxVQUFZczZDLEVBQUt0NkMsVUFBWXM2QyxFQUFLdDZDLFVBQVksa0RBRW5EdTZDLE1BQU1ELEtGR0osSUdwQkEsY0FBMkIsR0FNL0IsWUFBWWo3QyxHQUtWazdDLE1BSGFsN0MsR0FBb0IsQ0FDL0JrdEMsV0FBVyxJQUlieDNDLEtBQUt1bUMsUUFBUXQ3QixXQUFhLHNCSFMxQixJSXhCRSxjQUF3Qnc2QyxHQU81QixZQUFZSCxFQUFvQ2g3QyxHQUM5QyxNQUFNaTdDLEVBQU9qN0MsR0FBbUIsR0FDaENrN0MsTUFBSywrQkFBS0QsR0FBSSxDQUFHRyxXQUFZLGlCQUFrQkoscUJKZWxDLENBQ1grYixHQUNBLElLMUJBLGNBQW9CLEdBTXhCLFlBQVkvMkQsR0FFVixNQUFNaTdDLEVBQU9qN0MsR0FBb0IsR0FFakNrN0MsTUFBSywrQkFBS0QsR0FBSSxDQUNaN0ssWUFBY3IzQyxPQUFPbWxELGNBQWMsT0FDbkM3TixhQUFjdDNDLE9BQU9tbEQsY0FBYyxVQUVyQ3hvRCxLQUFLdW1DLFFBQVF0N0IsVUFBWSw4Q0xlM0JrbEMsS0FBTSxJQUFJLEdBQUssQ0FDYjE1QixPQUFRTCxHQUFVLENBQUMsTUFBUyxRQUFTLFFBQVMsVUFDOUN5aUIscUJBQXFCLEVBQ3JCRSxxQkFBcUIsRUFDckJodEIsT0FBUSxDQUFDLE1BQVMsUUFBUyxRQUFTLFNBQ3BDaEIsUUFBUyxHQUNURCxRQUFTLEVBQ1R3QyxLQUFNLE0iLCJmaWxlIjoiZXhhbXBsZS1nZW9sb2NhdGUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYmdpcy1jb3JlXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImJnaXMtY29yZVwiXSA9IGZhY3RvcnkoKTtcbn0pKHNlbGYsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0V2ZW50XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogU3RyaXBwZWQgZG93biBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgVzNDIERPTSBMZXZlbCAyIEV2ZW50IGludGVyZmFjZS5cbiAqIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTItRXZlbnRzL2V2ZW50cy5odG1sI0V2ZW50cy1pbnRlcmZhY2UuXG4gKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IHByb3ZpZGVzIGB0eXBlYCBhbmQgYHRhcmdldGAgcHJvcGVydGllcywgYW5kXG4gKiBgc3RvcFByb3BhZ2F0aW9uYCBhbmQgYHByZXZlbnREZWZhdWx0YCBtZXRob2RzLiBJdCBpcyBtZWFudCBhcyBiYXNlIGNsYXNzXG4gKiBmb3IgaGlnaGVyIGxldmVsIGV2ZW50cyBkZWZpbmVkIGluIHRoZSBsaWJyYXJ5LCBhbmQgd29ya3Mgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvVGFyZ2V0flRhcmdldH0uXG4gKi9cbnZhciBCYXNlRXZlbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlRXZlbnQodHlwZSkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWZhdWx0UHJldmVudGVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGV2ZW50IHR5cGUuXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXZlbnQgdGFyZ2V0LlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldCA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByZXZlbnQgZGVmYXVsdC4gVGhpcyBtZWFucyB0aGF0IG5vIGVtdWxhdGVkIGBjbGlja2AsIGBzaW5nbGVjbGlja2Agb3IgYGRvdWJsZWNsaWNrYCBldmVudHNcbiAgICAgKiB3aWxsIGJlIGZpcmVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRQcmV2ZW50ZWQgPSB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUV2ZW50LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJvcGFnYXRpb25TdG9wcGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlRXZlbnQ7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge0V2ZW50fGltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdH0gZXZ0IEV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24oZXZ0KSB7XG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V2ZW50fGltcG9ydChcIi4vRXZlbnQuanNcIikuZGVmYXVsdH0gZXZ0IEV2ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdChldnQpIHtcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcbn1cbmV4cG9ydCBkZWZhdWx0IEJhc2VFdmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9PYmplY3RFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwcm9wZXJ0eSBpcyBjaGFuZ2VkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvT2JqZWN0Lk9iamVjdEV2ZW50I3Byb3BlcnR5Y2hhbmdlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBST1BFUlRZQ0hBTkdFOiAncHJvcGVydHljaGFuZ2UnLFxufTtcbi8qKlxuICogQHR5cGVkZWYgeydwcm9wZXJ0eWNoYW5nZSd9IFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdEV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvRGlzcG9zYWJsZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIE9iamVjdHMgdGhhdCBuZWVkIHRvIGNsZWFuIHVwIGFmdGVyIHRoZW1zZWx2ZXMuXG4gKi9cbnZhciBEaXNwb3NhYmxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIERpc3Bvc2FibGUoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb2JqZWN0IGhhcyBhbHJlYWR5IGJlZW4gZGlzcG9zZWQuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc3Bvc2VkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmRpc3Bvc2VJbnRlcm5hbCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFeHRlbnNpb24gcG9pbnQgZm9yIGRpc3Bvc2FibGUgb2JqZWN0cy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIHJldHVybiBEaXNwb3NhYmxlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IERpc3Bvc2FibGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EaXNwb3NhYmxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9hcnJheVxuICovXG4vKipcbiAqIFBlcmZvcm1zIGEgYmluYXJ5IHNlYXJjaCBvbiB0aGUgcHJvdmlkZWQgc29ydGVkIGxpc3QgYW5kIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBpdGVtIGlmIGZvdW5kLiBJZiBpdCBjYW4ndCBiZSBmb3VuZCBpdCdsbCByZXR1cm4gLTEuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFya3NreWFwcC9iaW5hcnktc2VhcmNoXG4gKlxuICogQHBhcmFtIHtBcnJheTwqPn0gaGF5c3RhY2sgSXRlbXMgdG8gc2VhcmNoIHRocm91Z2guXG4gKiBAcGFyYW0geyp9IG5lZWRsZSBUaGUgaXRlbSB0byBsb29rIGZvci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRfY29tcGFyYXRvcl0gQ29tcGFyYXRvciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBpdGVtIGlmIGZvdW5kLCAtMSBpZiBub3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5hcnlTZWFyY2goaGF5c3RhY2ssIG5lZWRsZSwgb3B0X2NvbXBhcmF0b3IpIHtcbiAgICB2YXIgbWlkLCBjbXA7XG4gICAgdmFyIGNvbXBhcmF0b3IgPSBvcHRfY29tcGFyYXRvciB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICAgIHZhciBsb3cgPSAwO1xuICAgIHZhciBoaWdoID0gaGF5c3RhY2subGVuZ3RoO1xuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIHdoaWxlIChsb3cgPCBoaWdoKSB7XG4gICAgICAgIC8qIE5vdGUgdGhhdCBcIihsb3cgKyBoaWdoKSA+Pj4gMVwiIG1heSBvdmVyZmxvdywgYW5kIHJlc3VsdHMgaW4gYSB0eXBlY2FzdFxuICAgICAgICAgKiB0byBkb3VibGUgKHdoaWNoIGdpdmVzIHRoZSB3cm9uZyByZXN1bHRzKS4gKi9cbiAgICAgICAgbWlkID0gbG93ICsgKChoaWdoIC0gbG93KSA+PiAxKTtcbiAgICAgICAgY21wID0gK2NvbXBhcmF0b3IoaGF5c3RhY2tbbWlkXSwgbmVlZGxlKTtcbiAgICAgICAgaWYgKGNtcCA8IDAuMCkge1xuICAgICAgICAgICAgLyogVG9vIGxvdy4gKi9cbiAgICAgICAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvKiBLZXkgZm91bmQgb3IgdG9vIGhpZ2ggKi9cbiAgICAgICAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgICAgICAgICBmb3VuZCA9ICFjbXA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogS2V5IG5vdCBmb3VuZC4gKi9cbiAgICByZXR1cm4gZm91bmQgPyBsb3cgOiB+bG93O1xufVxuLyoqXG4gKiBDb21wYXJlIGZ1bmN0aW9uIGZvciBhcnJheSBzb3J0IHRoYXQgaXMgc2FmZSBmb3IgbnVtYmVycy5cbiAqIEBwYXJhbSB7Kn0gYSBUaGUgZmlyc3Qgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHBhcmFtIHsqfSBiIFRoZSBzZWNvbmQgb2JqZWN0IHRvIGJlIGNvbXBhcmVkLlxuICogQHJldHVybiB7bnVtYmVyfSBBIG5lZ2F0aXZlIG51bWJlciwgemVybywgb3IgYSBwb3NpdGl2ZSBudW1iZXIgYXMgdGhlIGZpcnN0XG4gKiAgICAgYXJndW1lbnQgaXMgbGVzcyB0aGFuLCBlcXVhbCB0bywgb3IgZ3JlYXRlciB0aGFuIHRoZSBzZWNvbmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XG59XG4vKipcbiAqIFdoZXRoZXIgdGhlIGFycmF5IGNvbnRhaW5zIHRoZSBnaXZlbiBvYmplY3QuXG4gKiBAcGFyYW0ge0FycmF5PCo+fSBhcnIgVGhlIGFycmF5IHRvIHRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgZWxlbWVudC5cbiAqIEBwYXJhbSB7Kn0gb2JqIFRoZSBvYmplY3QgZm9yIHdoaWNoIHRvIHRlc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGlzIGluIHRoZSBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluY2x1ZGVzKGFyciwgb2JqKSB7XG4gICAgcmV0dXJuIGFyci5pbmRleE9mKG9iaikgPj0gMDtcbn1cbi8qKlxuICoge0BsaW5rIG1vZHVsZTpvbC90aWxlZ3JpZC9UaWxlR3JpZH5UaWxlR3JpZCNnZXRaRm9yUmVzb2x1dGlvbn0gY2FuIHVzZSBhIGZ1bmN0aW9uXG4gKiBvZiB0aGlzIHR5cGUgdG8gZGV0ZXJtaW5lIHdoaWNoIG5lYXJlc3QgcmVzb2x1dGlvbiB0byB1c2UuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhIGB7bnVtYmVyfWAgcmVwcmVzZW50aW5nIGEgdmFsdWUgYmV0d2VlbiB0d28gYXJyYXkgZW50cmllcyxcbiAqIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoZSBuZWFyZXN0IGhpZ2hlciBlbnRyeSBhbmRcbiAqIGEgYHtudW1iZXJ9YCByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoZSBuZWFyZXN0IGxvd2VyIGVudHJ5XG4gKiBhcyBhcmd1bWVudHMgYW5kIHJldHVybnMgYSBge251bWJlcn1gLiBJZiBhIG5lZ2F0aXZlIG51bWJlciBvciB6ZXJvIGlzIHJldHVybmVkXG4gKiB0aGUgbG93ZXIgdmFsdWUgd2lsbCBiZSB1c2VkLCBpZiBhIHBvc2l0aXZlIG51bWJlciBpcyByZXR1cm5lZCB0aGUgaGlnaGVyIHZhbHVlXG4gKiB3aWxsIGJlIHVzZWQuXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24obnVtYmVyLCBudW1iZXIsIG51bWJlcik6IG51bWJlcn0gTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhcnIgQXJyYXkgaW4gZGVzY2NlbmRpbmcgb3JkZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdGFyZ2V0IFRhcmdldC5cbiAqIEBwYXJhbSB7bnVtYmVyfE5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gZGlyZWN0aW9uXG4gKiAgICAwIG1lYW5zIHJldHVybiB0aGUgbmVhcmVzdCxcbiAqICAgID4gMCBtZWFucyByZXR1cm4gdGhlIGxhcmdlc3QgbmVhcmVzdCxcbiAqICAgIDwgMCBtZWFucyByZXR1cm4gdGhlIHNtYWxsZXN0IG5lYXJlc3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEluZGV4LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyRmluZE5lYXJlc3QoYXJyLCB0YXJnZXQsIGRpcmVjdGlvbikge1xuICAgIHZhciBuID0gYXJyLmxlbmd0aDtcbiAgICBpZiAoYXJyWzBdIDw9IHRhcmdldCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSBpZiAodGFyZ2V0IDw9IGFycltuIC0gMV0pIHtcbiAgICAgICAgcmV0dXJuIG4gLSAxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgIGlmIChkaXJlY3Rpb24gPiAwKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA8IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSAtIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA8IDApIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldIDw9IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgbjsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA9PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFycltpXSA8IHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRpcmVjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbih0YXJnZXQsIGFycltpIC0gMV0sIGFycltpXSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJyW2kgLSAxXSAtIHRhcmdldCA8IHRhcmdldCAtIGFycltpXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4gLSAxO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIEFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlZ2luIEJlZ2luIGluZGV4LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQgaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXZlcnNlU3ViQXJyYXkoYXJyLCBiZWdpbiwgZW5kKSB7XG4gICAgd2hpbGUgKGJlZ2luIDwgZW5kKSB7XG4gICAgICAgIHZhciB0bXAgPSBhcnJbYmVnaW5dO1xuICAgICAgICBhcnJbYmVnaW5dID0gYXJyW2VuZF07XG4gICAgICAgIGFycltlbmRdID0gdG1wO1xuICAgICAgICArK2JlZ2luO1xuICAgICAgICAtLWVuZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8VkFMVUU+fSBhcnIgVGhlIGFycmF5IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7IUFycmF5PFZBTFVFPnxWQUxVRX0gZGF0YSBUaGUgZWxlbWVudHMgb3IgYXJyYXlzIG9mIGVsZW1lbnRzIHRvIGFkZCB0byBhcnIuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChhcnIsIGRhdGEpIHtcbiAgICB2YXIgZXh0ZW5zaW9uID0gQXJyYXkuaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbZGF0YV07XG4gICAgdmFyIGxlbmd0aCA9IGV4dGVuc2lvbi5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJbYXJyLmxlbmd0aF0gPSBleHRlbnNpb25baV07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PFZBTFVFPn0gYXJyIFRoZSBhcnJheSB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge1ZBTFVFfSBvYmogVGhlIGVsZW1lbnQgdG8gcmVtb3ZlLlxuICogQHRlbXBsYXRlIFZBTFVFXG4gKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZWxlbWVudCB3YXMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZShhcnIsIG9iaikge1xuICAgIHZhciBpID0gYXJyLmluZGV4T2Yob2JqKTtcbiAgICB2YXIgZm91bmQgPSBpID4gLTE7XG4gICAgaWYgKGZvdW5kKSB7XG4gICAgICAgIGFyci5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICAgIHJldHVybiBmb3VuZDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxWQUxVRT59IGFyciBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIHtmdW5jdGlvbihWQUxVRSwgbnVtYmVyLCA/KSA6IGJvb2xlYW59IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNvbXBhcmUuXG4gKiBAdGVtcGxhdGUgVkFMVUVcbiAqIEByZXR1cm4ge1ZBTFVFfG51bGx9IFRoZSBlbGVtZW50IGZvdW5kIG9yIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kKGFyciwgZnVuYykge1xuICAgIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoID4+PiAwO1xuICAgIHZhciB2YWx1ZTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gYXJyW2ldO1xuICAgICAgICBpZiAoZnVuYyh2YWx1ZSwgaSwgYXJyKSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5fFVpbnQ4Q2xhbXBlZEFycmF5fSBhcnIxIFRoZSBmaXJzdCBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheXxVaW50OENsYW1wZWRBcnJheX0gYXJyMiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSB0d28gYXJyYXlzIGFyZSBlcXVhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhhcnIxLCBhcnIyKSB7XG4gICAgdmFyIGxlbjEgPSBhcnIxLmxlbmd0aDtcbiAgICBpZiAobGVuMSAhPT0gYXJyMi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjE7IGkrKykge1xuICAgICAgICBpZiAoYXJyMVtpXSAhPT0gYXJyMltpXSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBTb3J0IHRoZSBwYXNzZWQgYXJyYXkgc3VjaCB0aGF0IHRoZSByZWxhdGl2ZSBvcmRlciBvZiBlcXVhbCBlbGVtZW50cyBpcyBwcmV2ZXJ2ZWQuXG4gKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU29ydGluZ19hbGdvcml0aG0jU3RhYmlsaXR5IGZvciBkZXRhaWxzLlxuICogQHBhcmFtIHtBcnJheTwqPn0gYXJyIFRoZSBhcnJheSB0byBzb3J0IChtb2RpZmllcyBvcmlnaW5hbCkuXG4gKiBAcGFyYW0geyFmdW5jdGlvbigqLCAqKTogbnVtYmVyfSBjb21wYXJlRm5jIENvbXBhcmlzb24gZnVuY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFibGVTb3J0KGFyciwgY29tcGFyZUZuYykge1xuICAgIHZhciBsZW5ndGggPSBhcnIubGVuZ3RoO1xuICAgIHZhciB0bXAgPSBBcnJheShhcnIubGVuZ3RoKTtcbiAgICB2YXIgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdG1wW2ldID0geyBpbmRleDogaSwgdmFsdWU6IGFycltpXSB9O1xuICAgIH1cbiAgICB0bXAuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICByZXR1cm4gY29tcGFyZUZuYyhhLnZhbHVlLCBiLnZhbHVlKSB8fCBhLmluZGV4IC0gYi5pbmRleDtcbiAgICB9KTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IHRtcFtpXS52YWx1ZTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBDb21wYXJpc29uIGZ1bmN0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBSZXR1cm4gaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyLCBmdW5jKSB7XG4gICAgdmFyIGluZGV4O1xuICAgIHZhciBmb3VuZCA9ICFhcnIuZXZlcnkoZnVuY3Rpb24gKGVsLCBpZHgpIHtcbiAgICAgICAgaW5kZXggPSBpZHg7XG4gICAgICAgIHJldHVybiAhZnVuYyhlbCwgaWR4LCBhcnIpO1xuICAgIH0pO1xuICAgIHJldHVybiBmb3VuZCA/IGluZGV4IDogLTE7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8Kj59IGFyciBUaGUgYXJyYXkgdG8gdGVzdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRfZnVuY10gQ29tcGFyaXNvbiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zdHJpY3RdIFN0cmljdGx5IHNvcnRlZCAoZGVmYXVsdCBmYWxzZSkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm4gaW5kZXguXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1NvcnRlZChhcnIsIG9wdF9mdW5jLCBvcHRfc3RyaWN0KSB7XG4gICAgdmFyIGNvbXBhcmUgPSBvcHRfZnVuYyB8fCBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uO1xuICAgIHJldHVybiBhcnIuZXZlcnkoZnVuY3Rpb24gKGN1cnJlbnRWYWwsIGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlcyA9IGNvbXBhcmUoYXJyW2luZGV4IC0gMV0sIGN1cnJlbnRWYWwpO1xuICAgICAgICByZXR1cm4gIShyZXMgPiAwIHx8IChvcHRfc3RyaWN0ICYmIHJlcyA9PT0gMCkpO1xuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXJyYXkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2Z1bmN0aW9uc1xuICovXG5pbXBvcnQgeyBlcXVhbHMgYXMgYXJyYXlFcXVhbHMgfSBmcm9tICcuL2FycmF5LmpzJztcbi8qKlxuICogQWx3YXlzIHJldHVybnMgdHJ1ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUUlVFKCkge1xuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBBbHdheXMgcmV0dXJucyBmYWxzZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IGZhbHNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gRkFMU0UoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBBIHJldXNhYmxlIGZ1bmN0aW9uLCB1c2VkIGUuZy4gYXMgYSBkZWZhdWx0IGZvciBjYWxsYmFja3MuXG4gKlxuICogQHJldHVybiB7dm9pZH0gTm90aGluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFZPSUQoKSB7IH1cbi8qKlxuICogV3JhcCBhIGZ1bmN0aW9uIGluIGFub3RoZXIgZnVuY3Rpb24gdGhhdCByZW1lbWJlcnMgdGhlIGxhc3QgcmV0dXJuLiAgSWYgdGhlXG4gKiByZXR1cm5lZCBmdW5jdGlvbiBpcyBjYWxsZWQgdHdpY2UgaW4gYSByb3cgd2l0aCB0aGUgc2FtZSBhcmd1bWVudHMgYW5kIHRoZSBzYW1lXG4gKiB0aGlzIG9iamVjdCwgaXQgd2lsbCByZXR1cm4gdGhlIHZhbHVlIGZyb20gdGhlIGZpcnN0IGNhbGwgaW4gdGhlIHNlY29uZCBjYWxsLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYW55KTogUmV0dXJuVHlwZX0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1lbW9pemUuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbiguLi5hbnkpOiBSZXR1cm5UeXBlfSBUaGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG4gKiBAdGVtcGxhdGUgUmV0dXJuVHlwZVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVtb2l6ZU9uZShmbikge1xuICAgIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgICAvKiogQHR5cGUge1JldHVyblR5cGV9ICovXG4gICAgdmFyIGxhc3RSZXN1bHQ7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxhbnk+fSAqL1xuICAgIHZhciBsYXN0QXJncztcbiAgICB2YXIgbGFzdFRoaXM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5leHRBcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKCFjYWxsZWQgfHwgdGhpcyAhPT0gbGFzdFRoaXMgfHwgIWFycmF5RXF1YWxzKG5leHRBcmdzLCBsYXN0QXJncykpIHtcbiAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgICAgICAgICBsYXN0QXJncyA9IG5leHRBcmdzO1xuICAgICAgICAgICAgbGFzdFJlc3VsdCA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZ1bmN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvb2JqXG4gKi9cbi8qKlxuICogUG9seWZpbGwgZm9yIE9iamVjdC5hc3NpZ24oKS4gIEFzc2lnbnMgZW51bWVyYWJsZSBhbmQgb3duIHByb3BlcnRpZXMgZnJvbVxuICogb25lIG9yIG1vcmUgc291cmNlIG9iamVjdHMgdG8gYSB0YXJnZXQgb2JqZWN0LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24uXG4gKlxuICogQHBhcmFtIHshT2JqZWN0fSB0YXJnZXQgVGhlIHRhcmdldCBvYmplY3QuXG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX3NvdXJjZXMgVGhlIHNvdXJjZSBvYmplY3QocykuXG4gKiBAcmV0dXJuIHshT2JqZWN0fSBUaGUgbW9kaWZpZWQgdGFyZ2V0IG9iamVjdC5cbiAqL1xuZXhwb3J0IHZhciBhc3NpZ24gPSB0eXBlb2YgT2JqZWN0LmFzc2lnbiA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gT2JqZWN0LmFzc2lnblxuICAgIDogZnVuY3Rpb24gKHRhcmdldCwgdmFyX3NvdXJjZXMpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICAgICAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IHVuZGVmaW5lZCAmJiBzb3VyY2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG4vKipcbiAqIFJlbW92ZXMgYWxsIHByb3BlcnRpZXMgZnJvbSBhbiBvYmplY3QuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2xlYXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcihvYmplY3QpIHtcbiAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgZGVsZXRlIG9iamVjdFtwcm9wZXJ0eV07XG4gICAgfVxufVxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgT2JqZWN0LnZhbHVlcygpLiAgR2V0IGFuIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcyBmcm9tIGFuIG9iamVjdC5cbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvdmFsdWVzXG4gKlxuICogQHBhcmFtIHshT2JqZWN0PEssVj59IG9iamVjdCBUaGUgb2JqZWN0IGZyb20gd2hpY2ggdG8gZ2V0IHRoZSB2YWx1ZXMuXG4gKiBAcmV0dXJuIHshQXJyYXk8Vj59IFRoZSBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiBAdGVtcGxhdGUgSyxWXG4gKi9cbmV4cG9ydCB2YXIgZ2V0VmFsdWVzID0gdHlwZW9mIE9iamVjdC52YWx1ZXMgPT09ICdmdW5jdGlvbidcbiAgICA/IE9iamVjdC52YWx1ZXNcbiAgICA6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKG9iamVjdFtwcm9wZXJ0eV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfTtcbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBoYXMgYW55IHByb3BlcnRpZXMuXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgb2JqZWN0IGlzIGVtcHR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShvYmplY3QpIHtcbiAgICB2YXIgcHJvcGVydHk7XG4gICAgZm9yIChwcm9wZXJ0eSBpbiBvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gIXByb3BlcnR5O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JqLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL1RhcmdldFxuICovXG5pbXBvcnQgRGlzcG9zYWJsZSBmcm9tICcuLi9EaXNwb3NhYmxlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL0V2ZW50LmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7RXZlbnRUYXJnZXR8VGFyZ2V0fSBFdmVudFRhcmdldExpa2VcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFczQyBET00gTGV2ZWwgMiBFdmVudFRhcmdldCBpbnRlcmZhY2UuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDAvUkVDLURPTS1MZXZlbC0yLUV2ZW50cy0yMDAwMTExMy9ldmVudHMuaHRtbCNFdmVudHMtRXZlbnRUYXJnZXQuXG4gKlxuICogVGhlcmUgYXJlIHR3byBpbXBvcnRhbnQgc2ltcGxpZmljYXRpb25zIGNvbXBhcmVkIHRvIHRoZSBzcGVjaWZpY2F0aW9uOlxuICpcbiAqIDEuIFRoZSBoYW5kbGluZyBvZiBgdXNlQ2FwdHVyZWAgaW4gYGFkZEV2ZW50TGlzdGVuZXJgIGFuZFxuICogICAgYHJlbW92ZUV2ZW50TGlzdGVuZXJgLiBUaGVyZSBpcyBubyByZWFsIGNhcHR1cmUgbW9kZWwuXG4gKiAyLiBUaGUgaGFuZGxpbmcgb2YgYHN0b3BQcm9wYWdhdGlvbmAgYW5kIGBwcmV2ZW50RGVmYXVsdGAgb24gYGRpc3BhdGNoRXZlbnRgLlxuICogICAgVGhlcmUgaXMgbm8gZXZlbnQgdGFyZ2V0IGhpZXJhcmNoeS4gV2hlbiBhIGxpc3RlbmVyIGNhbGxzXG4gKiAgICBgc3RvcFByb3BhZ2F0aW9uYCBvciBgcHJldmVudERlZmF1bHRgIG9uIGFuIGV2ZW50IG9iamVjdCwgaXQgbWVhbnMgdGhhdCBub1xuICogICAgbW9yZSBsaXN0ZW5lcnMgYWZ0ZXIgdGhpcyBvbmUgd2lsbCBiZSBjYWxsZWQuIFNhbWUgYXMgd2hlbiB0aGUgbGlzdGVuZXJcbiAqICAgIHJldHVybnMgZmFsc2UuXG4gKi9cbnZhciBUYXJnZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRhcmdldCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyp9IFtvcHRfdGFyZ2V0XSBEZWZhdWx0IGV2ZW50IHRhcmdldCBmb3IgZGlzcGF0Y2hlZCBldmVudHMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGFyZ2V0KG9wdF90YXJnZXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZXZlbnRUYXJnZXRfID0gb3B0X3RhcmdldDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGVuZGluZ1JlbW92YWxzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRpc3BhdGNoaW5nXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgQXJyYXk8aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyPj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcnNfID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyfSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKi9cbiAgICBUYXJnZXQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKCF0eXBlIHx8ICFsaXN0ZW5lcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gfHwgKHRoaXMubGlzdGVuZXJzXyA9IHt9KTtcbiAgICAgICAgdmFyIGxpc3RlbmVyc0ZvclR5cGUgPSBsaXN0ZW5lcnNbdHlwZV0gfHwgKGxpc3RlbmVyc1t0eXBlXSA9IFtdKTtcbiAgICAgICAgaWYgKGxpc3RlbmVyc0ZvclR5cGUuaW5kZXhPZihsaXN0ZW5lcikgPT09IC0xKSB7XG4gICAgICAgICAgICBsaXN0ZW5lcnNGb3JUeXBlLnB1c2gobGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGFuZCBjYWxscyBhbGwgbGlzdGVuZXJzIGxpc3RlbmluZyBmb3IgZXZlbnRzXG4gICAgICogb2YgdGhpcyB0eXBlLiBUaGUgZXZlbnQgcGFyYW1ldGVyIGNhbiBlaXRoZXIgYmUgYSBzdHJpbmcgb3IgYW5cbiAgICAgKiBPYmplY3Qgd2l0aCBhIGB0eXBlYCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fHN0cmluZ30gZXZlbnQgRXZlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBgZmFsc2VgIGlmIGFueW9uZSBjYWxsZWQgcHJldmVudERlZmF1bHQgb24gdGhlXG4gICAgICogICAgIGV2ZW50IG9iamVjdCBvciBpZiBhbnkgb2YgdGhlIGxpc3RlbmVycyByZXR1cm5lZCBmYWxzZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9FdmVudC5qc1wiKS5kZWZhdWx0fEV2ZW50fSAqL1xuICAgICAgICB2YXIgZXZ0ID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJyA/IG5ldyBFdmVudChldmVudCkgOiBldmVudDtcbiAgICAgICAgdmFyIHR5cGUgPSBldnQudHlwZTtcbiAgICAgICAgaWYgKCFldnQudGFyZ2V0KSB7XG4gICAgICAgICAgICBldnQudGFyZ2V0ID0gdGhpcy5ldmVudFRhcmdldF8gfHwgdGhpcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNfICYmIHRoaXMubGlzdGVuZXJzX1t0eXBlXTtcbiAgICAgICAgdmFyIHByb3BhZ2F0ZTtcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgICAgICAgdmFyIGRpc3BhdGNoaW5nID0gdGhpcy5kaXNwYXRjaGluZ18gfHwgKHRoaXMuZGlzcGF0Y2hpbmdfID0ge30pO1xuICAgICAgICAgICAgdmFyIHBlbmRpbmdSZW1vdmFscyA9IHRoaXMucGVuZGluZ1JlbW92YWxzXyB8fCAodGhpcy5wZW5kaW5nUmVtb3ZhbHNfID0ge30pO1xuICAgICAgICAgICAgaWYgKCEodHlwZSBpbiBkaXNwYXRjaGluZykpIHtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaGluZ1t0eXBlXSA9IDA7XG4gICAgICAgICAgICAgICAgcGVuZGluZ1JlbW92YWxzW3R5cGVdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsrZGlzcGF0Y2hpbmdbdHlwZV07XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmICgnaGFuZGxlRXZlbnQnIGluIGxpc3RlbmVyc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lck9iamVjdH0gKi8gKGxpc3RlbmVyc1tpXSkuaGFuZGxlRXZlbnQoZXZ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3BhZ2F0ZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkxpc3RlbmVyRnVuY3Rpb259ICovIChsaXN0ZW5lcnNbaV0pLmNhbGwodGhpcywgZXZ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByb3BhZ2F0ZSA9PT0gZmFsc2UgfHwgZXZ0LnByb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wYWdhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLS1kaXNwYXRjaGluZ1t0eXBlXTtcbiAgICAgICAgICAgIGlmIChkaXNwYXRjaGluZ1t0eXBlXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBwciA9IHBlbmRpbmdSZW1vdmFsc1t0eXBlXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcGVuZGluZ1JlbW92YWxzW3R5cGVdO1xuICAgICAgICAgICAgICAgIHdoaWxlIChwci0tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBWT0lEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVsZXRlIGRpc3BhdGNoaW5nW3R5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb3BhZ2F0ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzXyAmJiBjbGVhcih0aGlzLmxpc3RlbmVyc18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0ZW5lcnMgZm9yIGEgc3BlY2lmaWVkIGV2ZW50IHR5cGUuIExpc3RlbmVycyBhcmUgcmV0dXJuZWQgaW4gdGhlXG4gICAgICogb3JkZXIgdGhhdCB0aGV5IHdpbGwgYmUgY2FsbGVkIGluLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuTGlzdGVuZXI+fHVuZGVmaW5lZH0gTGlzdGVuZXJzLlxuICAgICAqL1xuICAgIFRhcmdldC5wcm90b3R5cGUuZ2V0TGlzdGVuZXJzID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdKSB8fCB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdF90eXBlXSBUeXBlLiBJZiBub3QgcHJvdmlkZWQsXG4gICAgICogICAgIGB0cnVlYCB3aWxsIGJlIHJldHVybmVkIGlmIHRoaXMgZXZlbnQgdGFyZ2V0IGhhcyBhbnkgbGlzdGVuZXJzLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEhhcyBsaXN0ZW5lcnMuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5oYXNMaXN0ZW5lciA9IGZ1bmN0aW9uIChvcHRfdHlwZSkge1xuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvcHRfdHlwZVxuICAgICAgICAgICAgPyBvcHRfdHlwZSBpbiB0aGlzLmxpc3RlbmVyc19cbiAgICAgICAgICAgIDogT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnNfKS5sZW5ndGggPiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5MaXN0ZW5lcn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICovXG4gICAgVGFyZ2V0LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc18gJiYgdGhpcy5saXN0ZW5lcnNfW3R5cGVdO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZ1JlbW92YWxzXyAmJiB0eXBlIGluIHRoaXMucGVuZGluZ1JlbW92YWxzXykge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGxpc3RlbmVyIGEgbm8tb3AsIGFuZCByZW1vdmUgbGF0ZXIgaW4gI2Rpc3BhdGNoRXZlbnQoKVxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnNbaW5kZXhdID0gVk9JRDtcbiAgICAgICAgICAgICAgICAgICAgKyt0aGlzLnBlbmRpbmdSZW1vdmFsc19bdHlwZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc19bdHlwZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUYXJnZXQ7XG59KERpc3Bvc2FibGUpKTtcbmV4cG9ydCBkZWZhdWx0IFRhcmdldDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRhcmdldC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0V2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAY29uc3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIEdlbmVyaWMgY2hhbmdlIGV2ZW50LiBUcmlnZ2VyZWQgd2hlbiB0aGUgcmV2aXNpb24gY291bnRlciBpcyBpbmNyZWFzZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2NoYW5nZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDSEFOR0U6ICdjaGFuZ2UnLFxuICAgIC8qKlxuICAgICAqIEdlbmVyaWMgZXJyb3IgZXZlbnQuIFRyaWdnZXJlZCB3aGVuIGFuIGVycm9yIG9jY3Vycy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL2V2ZW50cy9FdmVudH5CYXNlRXZlbnQjZXJyb3JcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRVJST1I6ICdlcnJvcicsXG4gICAgQkxVUjogJ2JsdXInLFxuICAgIENMRUFSOiAnY2xlYXInLFxuICAgIENPTlRFWFRNRU5VOiAnY29udGV4dG1lbnUnLFxuICAgIENMSUNLOiAnY2xpY2snLFxuICAgIERCTENMSUNLOiAnZGJsY2xpY2snLFxuICAgIERSQUdFTlRFUjogJ2RyYWdlbnRlcicsXG4gICAgRFJBR09WRVI6ICdkcmFnb3ZlcicsXG4gICAgRFJPUDogJ2Ryb3AnLFxuICAgIEZPQ1VTOiAnZm9jdXMnLFxuICAgIEtFWURPV046ICdrZXlkb3duJyxcbiAgICBLRVlQUkVTUzogJ2tleXByZXNzJyxcbiAgICBMT0FEOiAnbG9hZCcsXG4gICAgUkVTSVpFOiAncmVzaXplJyxcbiAgICBUT1VDSE1PVkU6ICd0b3VjaG1vdmUnLFxuICAgIFdIRUVMOiAnd2hlZWwnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzXG4gKi9cbmltcG9ydCB7IGNsZWFyIH0gZnJvbSAnLi9vYmouanMnO1xuLyoqXG4gKiBLZXkgdG8gdXNlIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfk9ic2VydmFibGUjdW5CeUtleX0uXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFdmVudHNLZXlcbiAqIEBwcm9wZXJ0eSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBUYXJnZXQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gdHlwZSBUeXBlLlxuICogQGFwaVxuICovXG4vKipcbiAqIExpc3RlbmVyIGZ1bmN0aW9uLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aXRoIGFuIGV2ZW50IG9iamVjdCBhcyBhcmd1bWVudC5cbiAqIFdoZW4gdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYCwgZXZlbnQgcHJvcGFnYXRpb24gd2lsbCBzdG9wLlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCkpOiAodm9pZHxib29sZWFuKX0gTGlzdGVuZXJGdW5jdGlvblxuICogQGFwaVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IExpc3RlbmVyT2JqZWN0XG4gKiBAcHJvcGVydHkge0xpc3RlbmVyRnVuY3Rpb259IGhhbmRsZUV2ZW50IEhhbmRsZUV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtMaXN0ZW5lckZ1bmN0aW9ufExpc3RlbmVyT2JqZWN0fSBMaXN0ZW5lclxuICovXG4vKipcbiAqIFJlZ2lzdGVycyBhbiBldmVudCBsaXN0ZW5lciBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGVmZmljaWVudGx5IGJpbmRzIGEgYGxpc3RlbmVyYCB0byBhIGB0aGlzYCBvYmplY3QsIGFuZCByZXR1cm5zXG4gKiBhIGtleSBmb3IgdXNlIHdpdGgge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMudW5saXN0ZW5CeUtleX0uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V2ZW50cy9UYXJnZXQuanNcIikuRXZlbnRUYXJnZXRMaWtlfSB0YXJnZXQgRXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAqIEBwYXJhbSB7TGlzdGVuZXJGdW5jdGlvbn0gbGlzdGVuZXIgTGlzdGVuZXIuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdF90aGlzXSBPYmplY3QgcmVmZXJlbmNlZCBieSB0aGUgYHRoaXNgIGtleXdvcmQgaW4gdGhlXG4gKiAgICAgbGlzdGVuZXIuIERlZmF1bHQgaXMgdGhlIGB0YXJnZXRgLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X29uY2VdIElmIHRydWUsIGFkZCB0aGUgbGlzdGVuZXIgYXMgb25lLW9mZiBsaXN0ZW5lci5cbiAqIEByZXR1cm4ge0V2ZW50c0tleX0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCBvcHRfb25jZSkge1xuICAgIGlmIChvcHRfdGhpcyAmJiBvcHRfdGhpcyAhPT0gdGFyZ2V0KSB7XG4gICAgICAgIGxpc3RlbmVyID0gbGlzdGVuZXIuYmluZChvcHRfdGhpcyk7XG4gICAgfVxuICAgIGlmIChvcHRfb25jZSkge1xuICAgICAgICB2YXIgb3JpZ2luYWxMaXN0ZW5lcl8xID0gbGlzdGVuZXI7XG4gICAgICAgIGxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lcl8xLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciBldmVudHNLZXkgPSB7XG4gICAgICAgIHRhcmdldDogdGFyZ2V0LFxuICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICBsaXN0ZW5lcjogbGlzdGVuZXIsXG4gICAgfTtcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGV2ZW50c0tleTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGEgb25lLW9mZiBldmVudCBsaXN0ZW5lciBvbiBhbiBldmVudCB0YXJnZXQuIEluc3BpcmVkIGJ5XG4gKiBodHRwczovL2dvb2dsZS5naXRodWIuaW8vY2xvc3VyZS1saWJyYXJ5L2FwaS9zb3VyY2UvY2xvc3VyZS9nb29nL2V2ZW50cy9ldmVudHMuanMuc3JjLmh0bWxcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGVmZmljaWVudGx5IGJpbmRzIGEgYGxpc3RlbmVyYCBhcyBzZWxmLXVucmVnaXN0ZXJpbmcgbGlzdGVuZXJcbiAqIHRvIGEgYHRoaXNgIG9iamVjdCwgYW5kIHJldHVybnMgYSBrZXkgZm9yIHVzZSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy51bmxpc3RlbkJ5S2V5fSBpbiBjYXNlIHRoZSBsaXN0ZW5lciBuZWVkcyB0byBiZVxuICogdW5yZWdpc3RlcmVkIGJlZm9yZSBpdCBpcyBjYWxsZWQuXG4gKlxuICogV2hlbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy5saXN0ZW59IGlzIGNhbGxlZCB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyBhZnRlciB0aGlzXG4gKiBmdW5jdGlvbiwgdGhlIHNlbGYtdW5yZWdpc3RlcmluZyBsaXN0ZW5lciB3aWxsIGJlIHR1cm5lZCBpbnRvIGEgcGVybWFuZW50XG4gKiBsaXN0ZW5lci5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL1RhcmdldC5qc1wiKS5FdmVudFRhcmdldExpa2V9IHRhcmdldCBFdmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBFdmVudCB0eXBlLlxuICogQHBhcmFtIHtMaXN0ZW5lckZ1bmN0aW9ufSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0X3RoaXNdIE9iamVjdCByZWZlcmVuY2VkIGJ5IHRoZSBgdGhpc2Aga2V5d29yZCBpbiB0aGVcbiAqICAgICBsaXN0ZW5lci4gRGVmYXVsdCBpcyB0aGUgYHRhcmdldGAuXG4gKiBAcmV0dXJuIHtFdmVudHNLZXl9IEtleSBmb3IgdW5saXN0ZW5CeUtleS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2UodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgb3B0X3RoaXMpIHtcbiAgICByZXR1cm4gbGlzdGVuKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIG9wdF90aGlzLCB0cnVlKTtcbn1cbi8qKlxuICogVW5yZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzIG9uIGFuIGV2ZW50IHRhcmdldC4gSW5zcGlyZWQgYnlcbiAqIGh0dHBzOi8vZ29vZ2xlLmdpdGh1Yi5pby9jbG9zdXJlLWxpYnJhcnkvYXBpL3NvdXJjZS9jbG9zdXJlL2dvb2cvZXZlbnRzL2V2ZW50cy5qcy5zcmMuaHRtbFxuICpcbiAqIFRoZSBhcmd1bWVudCBwYXNzZWQgdG8gdGhpcyBmdW5jdGlvbiBpcyB0aGUga2V5IHJldHVybmVkIGZyb21cbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzLmxpc3Rlbn0gb3Ige0BsaW5rIG1vZHVsZTpvbC9ldmVudHMubGlzdGVuT25jZX0uXG4gKlxuICogQHBhcmFtIHtFdmVudHNLZXl9IGtleSBUaGUga2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5saXN0ZW5CeUtleShrZXkpIHtcbiAgICBpZiAoa2V5ICYmIGtleS50YXJnZXQpIHtcbiAgICAgICAga2V5LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGtleS50eXBlLCBrZXkubGlzdGVuZXIpO1xuICAgICAgICBjbGVhcihrZXkpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50cy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL09ic2VydmFibGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIGxpc3Rlbk9uY2UsIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG4vKioqXG4gKiBAdGVtcGxhdGUge3N0cmluZ30gVHlwZVxuICogQHRlbXBsYXRlIHtFdmVudHxpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0fSBFdmVudENsYXNzXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7KHR5cGU6IFR5cGV8VHlwZVtdLCBsaXN0ZW5lcjogKGV2ZW50OiBFdmVudENsYXNzKSA9PiA/KSA9PiBSZXR1cm59IE9uU2lnbmF0dXJlXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSB7c3RyaW5nfSBUeXBlXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7KHR5cGU6IFR5cGVbXSwgbGlzdGVuZXI6IChldmVudDogRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkgPT4gPykgPT4gUmV0dXJufSBDb21iaW5lZE9uU2lnbmF0dXJlXG4gKi9cbi8qKipcbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL2V2ZW50c1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHNcIikuRXZlbnRzS2V5Pn0gT25SZXR1cm5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7J2NoYW5nZSd8J2Vycm9yJ30gRXZlbnRUeXBlc1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEFuIGV2ZW50IHRhcmdldCBwcm92aWRpbmcgY29udmVuaWVudCBtZXRob2RzIGZvciBsaXN0ZW5lciByZWdpc3RyYXRpb25cbiAqIGFuZCB1bnJlZ2lzdHJhdGlvbi4gQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIGFsd2F5cyBhdmFpbGFibGUgdGhyb3VnaFxuICoge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfk9ic2VydmFibGUjY2hhbmdlZH0uXG4gKlxuICogQGZpcmVzIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHRcbiAqIEBhcGlcbiAqL1xudmFyIE9ic2VydmFibGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE9ic2VydmFibGUsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7T25TaWduYXR1cmU8RXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub24gPSBfdGhpcy5vbkludGVybmFsO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPblNpZ25hdHVyZTxFdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBPblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlID0gX3RoaXMub25jZUludGVybmFsO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPblNpZ25hdHVyZTxFdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCB2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuID0gX3RoaXMudW5JbnRlcm5hbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZXZpc2lvbl8gPSAwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlYXNlcyB0aGUgcmV2aXNpb24gY291bnRlciBhbmQgZGlzcGF0Y2hlcyBhICdjaGFuZ2UnIGV2ZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICArK3RoaXMucmV2aXNpb25fO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZlcnNpb24gbnVtYmVyIGZvciB0aGlzIG9iamVjdC4gIEVhY2ggdGltZSB0aGUgb2JqZWN0IGlzIG1vZGlmaWVkLFxuICAgICAqIGl0cyB2ZXJzaW9uIG51bWJlciB3aWxsIGJlIGluY3JlbWVudGVkLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gUmV2aXNpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmdldFJldmlzaW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXZpc2lvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFR5cGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbig/KTogP30gbGlzdGVuZXIgTGlzdGVuZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IEV2ZW50IGtleS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUub25JbnRlcm5hbCA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHR5cGUubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICBrZXlzW2ldID0gbGlzdGVuKHRoaXMsIHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3Rlbih0aGlzLCAvKiogQHR5cGUge3N0cmluZ30gKi8gKHR5cGUpLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gRXZlbnQga2V5LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5vbmNlSW50ZXJuYWwgPSBmdW5jdGlvbiAodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodHlwZSkpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSB0eXBlLmxlbmd0aDtcbiAgICAgICAgICAgIGtleSA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgICAgIGtleVtpXSA9IGxpc3Rlbk9uY2UodGhpcywgdHlwZVtpXSwgbGlzdGVuZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAga2V5ID0gbGlzdGVuT25jZSh0aGlzLCAvKiogQHR5cGUge3N0cmluZ30gKi8gKHR5cGUpLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovIChsaXN0ZW5lcikub2xfa2V5ID0ga2V5O1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVW5saXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5PHN0cmluZz59IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKD8pOiA/fSBsaXN0ZW5lciBMaXN0ZW5lci5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudW5JbnRlcm5hbCA9IGZ1bmN0aW9uICh0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIga2V5ID0gLyoqIEB0eXBlIHtPYmplY3R9ICovIChsaXN0ZW5lcikub2xfa2V5O1xuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICB1bkJ5S2V5KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdHlwZS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGVbaV0sIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufShFdmVudFRhcmdldCkpO1xuLyoqXG4gKiBMaXN0ZW4gZm9yIGEgY2VydGFpbiB0eXBlIG9mIGV2ZW50LlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSB0eXBlIFRoZSBldmVudCB0eXBlIG9yIGFycmF5IG9mIGV2ZW50IHR5cGVzLlxuICogQHBhcmFtIHtmdW5jdGlvbigoRXZlbnR8aW1wb3J0KFwiLi9ldmVudHMvRXZlbnRcIikuZGVmYXVsdCkpOiA/fSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl8QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn0gVW5pcXVlIGtleSBmb3IgdGhlIGxpc3RlbmVyLiBJZlxuICogICAgIGNhbGxlZCB3aXRoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFzIHRoZSBmaXJzdCBhcmd1bWVudCwgdGhlIHJldHVyblxuICogICAgIHdpbGwgYmUgYW4gYXJyYXkgb2Yga2V5cy5cbiAqIEBhcGlcbiAqL1xuT2JzZXJ2YWJsZS5wcm90b3R5cGUub247XG4vKipcbiAqIExpc3RlbiBvbmNlIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IFVuaXF1ZSBrZXkgZm9yIHRoZSBsaXN0ZW5lci4gSWZcbiAqICAgICBjYWxsZWQgd2l0aCBhbiBhcnJheSBvZiBldmVudCB0eXBlcyBhcyB0aGUgZmlyc3QgYXJndW1lbnQsIHRoZSByZXR1cm5cbiAqICAgICB3aWxsIGJlIGFuIGFycmF5IG9mIGtleXMuXG4gKiBAYXBpXG4gKi9cbk9ic2VydmFibGUucHJvdG90eXBlLm9uY2U7XG4vKipcbiAqIFVubGlzdGVuIGZvciBhIGNlcnRhaW4gdHlwZSBvZiBldmVudC5cbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd8QXJyYXk8c3RyaW5nPn0gdHlwZSBUaGUgZXZlbnQgdHlwZSBvciBhcnJheSBvZiBldmVudCB0eXBlcy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKEV2ZW50fGltcG9ydChcIi4vZXZlbnRzL0V2ZW50XCIpLmRlZmF1bHQpKTogP30gbGlzdGVuZXIgVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5PYnNlcnZhYmxlLnByb3RvdHlwZS51bjtcbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciB1c2luZyB0aGUga2V5IHJldHVybmVkIGJ5IGBvbigpYCBvciBgb25jZSgpYC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fEFycmF5PGltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleT59IGtleSBUaGUga2V5IHJldHVybmVkIGJ5IGBvbigpYFxuICogICAgIG9yIGBvbmNlKClgIChvciBhbiBhcnJheSBvZiBrZXlzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVuQnlLZXkoa2V5KSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoa2V5KSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBrZXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleShrZXlbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB1bmxpc3RlbkJ5S2V5KC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fSAqLyAoa2V5KSk7XG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgT2JzZXJ2YWJsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3V0aWxcbiAqL1xuLyoqXG4gKiBAcmV0dXJuIHs/fSBBbnkgcmV0dXJuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWJzdHJhY3QoKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7P30gKi8gKChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCBhYnN0cmFjdCBtZXRob2QuJyk7XG4gICAgfSkoKSk7XG59XG4vKipcbiAqIENvdW50ZXIgZm9yIGdldFVpZC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgdWlkQ291bnRlcl8gPSAwO1xuLyoqXG4gKiBHZXRzIGEgdW5pcXVlIElEIGZvciBhbiBvYmplY3QuIFRoaXMgbXV0YXRlcyB0aGUgb2JqZWN0IHNvIHRoYXQgZnVydGhlciBjYWxsc1xuICogd2l0aCB0aGUgc2FtZSBvYmplY3QgYXMgYSBwYXJhbWV0ZXIgcmV0dXJucyB0aGUgc2FtZSB2YWx1ZS4gVW5pcXVlIElEcyBhcmUgZ2VuZXJhdGVkXG4gKiBhcyBhIHN0cmljdGx5IGluY3JlYXNpbmcgc2VxdWVuY2UuIEFkYXB0ZWQgZnJvbSBnb29nLmdldFVpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZ2V0IHRoZSB1bmlxdWUgSUQgZm9yLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdW5pcXVlIElEIGZvciB0aGUgb2JqZWN0LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VWlkKG9iaikge1xuICAgIHJldHVybiBvYmoub2xfdWlkIHx8IChvYmoub2xfdWlkID0gU3RyaW5nKCsrdWlkQ291bnRlcl8pKTtcbn1cbi8qKlxuICogT3BlbkxheWVycyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBWRVJTSU9OID0gJzYuNi4xJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0aWwuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9PYmplY3RcbiAqL1xuaW1wb3J0IEV2ZW50IGZyb20gJy4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi9PYmplY3RFdmVudFR5cGUuanMnO1xuaW1wb3J0IE9ic2VydmFibGUgZnJvbSAnLi9PYnNlcnZhYmxlLmpzJztcbmltcG9ydCB7IGFzc2lnbiwgaXNFbXB0eSB9IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4vdXRpbC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9IGluc3RhbmNlcyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqL1xudmFyIE9iamVjdEV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhPYmplY3RFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgZXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBwcm9wZXJ0eSBuYW1lLlxuICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgVGhlIG9sZCB2YWx1ZSBmb3IgYGtleWAuXG4gICAgICovXG4gICAgZnVuY3Rpb24gT2JqZWN0RXZlbnQodHlwZSwga2V5LCBvbGRWYWx1ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHdob3NlIHZhbHVlIGlzIGNoYW5naW5nLlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb2xkIHZhbHVlLiBUbyBnZXQgdGhlIG5ldyB2YWx1ZSB1c2UgYGUudGFyZ2V0LmdldChlLmtleSlgIHdoZXJlXG4gICAgICAgICAqIGBlYCBpcyB0aGUgZXZlbnQgb2JqZWN0LlxuICAgICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub2xkVmFsdWUgPSBvbGRWYWx1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0RXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBPYmplY3RFdmVudCB9O1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXMsIE9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBSZXR1cm4+fSBPYmplY3RPblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIE1vc3Qgbm9uLXRyaXZpYWwgY2xhc3NlcyBpbmhlcml0IGZyb20gdGhpcy5cbiAqXG4gKiBUaGlzIGV4dGVuZHMge0BsaW5rIG1vZHVsZTpvbC9PYnNlcnZhYmxlfSB3aXRoIG9ic2VydmFibGVcbiAqIHByb3BlcnRpZXMsIHdoZXJlIGVhY2ggcHJvcGVydHkgaXMgb2JzZXJ2YWJsZSBhcyB3ZWxsIGFzIHRoZSBvYmplY3QgYXMgYVxuICogd2hvbGUuXG4gKlxuICogQ2xhc3NlcyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIGhhdmUgcHJlLWRlZmluZWQgcHJvcGVydGllcywgdG8gd2hpY2ggeW91IGNhblxuICogYWRkIHlvdXIgb3ducy4gVGhlIHByZS1kZWZpbmVkIHByb3BlcnRpZXMgYXJlIGxpc3RlZCBpbiB0aGlzIGRvY3VtZW50YXRpb24gYXNcbiAqICdPYnNlcnZhYmxlIFByb3BlcnRpZXMnLCBhbmQgaGF2ZSB0aGVpciBvd24gYWNjZXNzb3JzOyBmb3IgZXhhbXBsZSxcbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gaGFzIGEgYHRhcmdldGAgcHJvcGVydHksIGFjY2Vzc2VkIHdpdGhcbiAqIGBnZXRUYXJnZXQoKWAgYW5kIGNoYW5nZWQgd2l0aCBgc2V0VGFyZ2V0KClgLiBOb3QgYWxsIHByb3BlcnRpZXMgYXJlIGhvd2V2ZXJcbiAqIHNldHRhYmxlLiBUaGVyZSBhcmUgYWxzbyBnZW5lcmFsLXB1cnBvc2UgYWNjZXNzb3JzIGBnZXQoKWAgYW5kIGBzZXQoKWAuIEZvclxuICogZXhhbXBsZSwgYGdldCgndGFyZ2V0JylgIGlzIGVxdWl2YWxlbnQgdG8gYGdldFRhcmdldCgpYC5cbiAqXG4gKiBUaGUgYHNldGAgYWNjZXNzb3JzIHRyaWdnZXIgYSBjaGFuZ2UgZXZlbnQsIGFuZCB5b3UgY2FuIG1vbml0b3IgdGhpcyBieVxuICogcmVnaXN0ZXJpbmcgYSBsaXN0ZW5lci4gRm9yIGV4YW1wbGUsIHtAbGluayBtb2R1bGU6b2wvVmlld35WaWV3fSBoYXMgYVxuICogYGNlbnRlcmAgcHJvcGVydHksIHNvIGB2aWV3Lm9uKCdjaGFuZ2U6Y2VudGVyJywgZnVuY3Rpb24oZXZ0KSB7Li4ufSk7YCB3b3VsZFxuICogY2FsbCB0aGUgZnVuY3Rpb24gd2hlbmV2ZXIgdGhlIHZhbHVlIG9mIHRoZSBjZW50ZXIgcHJvcGVydHkgY2hhbmdlcy4gV2l0aGluXG4gKiB0aGUgZnVuY3Rpb24sIGBldnQudGFyZ2V0YCB3b3VsZCBiZSB0aGUgdmlldywgc28gYGV2dC50YXJnZXQuZ2V0Q2VudGVyKClgXG4gKiB3b3VsZCByZXR1cm4gdGhlIG5ldyBjZW50ZXIuXG4gKlxuICogWW91IGNhbiBhZGQgeW91ciBvd24gb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIHdpdGhcbiAqIGBvYmplY3Quc2V0KCdwcm9wJywgJ3ZhbHVlJylgLCBhbmQgcmV0cmlldmUgdGhhdCB3aXRoIGBvYmplY3QuZ2V0KCdwcm9wJylgLlxuICogWW91IGNhbiBsaXN0ZW4gZm9yIGNoYW5nZXMgb24gdGhhdCBwcm9wZXJ0eSB2YWx1ZSB3aXRoXG4gKiBgb2JqZWN0Lm9uKCdjaGFuZ2U6cHJvcCcsIGxpc3RlbmVyKWAuIFlvdSBjYW4gZ2V0IGEgbGlzdCBvZiBhbGxcbiAqIHByb3BlcnRpZXMgd2l0aCB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0I2dldFByb3BlcnRpZXN9LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzIGFyZSBzZXBhcmF0ZSBmcm9tIHN0YW5kYXJkIEpTIHByb3BlcnRpZXMuXG4gKiBZb3UgY2FuLCBmb3IgZXhhbXBsZSwgZ2l2ZSB5b3VyIG1hcCBvYmplY3QgYSB0aXRsZSB3aXRoXG4gKiBgbWFwLnRpdGxlPSdOZXcgdGl0bGUnYCBhbmQgd2l0aCBgbWFwLnNldCgndGl0bGUnLCAnQW5vdGhlciB0aXRsZScpYC4gVGhlXG4gKiBmaXJzdCB3aWxsIGJlIGEgYGhhc093blByb3BlcnR5YDsgdGhlIHNlY29uZCB3aWxsIGFwcGVhciBpblxuICogYGdldFByb3BlcnRpZXMoKWAuIE9ubHkgdGhlIHNlY29uZCBpcyBvYnNlcnZhYmxlLlxuICpcbiAqIFByb3BlcnRpZXMgY2FuIGJlIGRlbGV0ZWQgYnkgdXNpbmcgdGhlIHVuc2V0IG1ldGhvZC4gRS5nLlxuICogb2JqZWN0LnVuc2V0KCdmb28nKS5cbiAqXG4gKiBAZmlyZXMgT2JqZWN0RXZlbnRcbiAqIEBhcGlcbiAqL1xudmFyIEJhc2VPYmplY3QgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEJhc2VPYmplY3QsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3Q8c3RyaW5nLCAqPn0gW29wdF92YWx1ZXNdIEFuIG9iamVjdCB3aXRoIGtleS12YWx1ZSBwYWlycy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlT2JqZWN0KG9wdF92YWx1ZXMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0T25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3RPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0T25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgLy8gQ2FsbCB7QGxpbmsgbW9kdWxlOm9sL3V0aWwuZ2V0VWlkfSB0byBlbnN1cmUgdGhhdCB0aGUgb3JkZXIgb2Ygb2JqZWN0cycgaWRzIGlzXG4gICAgICAgIC8vIHRoZSBzYW1lIGFzIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IHdlcmUgY3JlYXRlZC4gIFRoaXMgYWxzbyBoZWxwcyB0b1xuICAgICAgICAvLyBlbnN1cmUgdGhhdCBvYmplY3QgcHJvcGVydGllcyBhcmUgYWx3YXlzIGFkZGVkIGluIHRoZSBzYW1lIG9yZGVyLCB3aGljaFxuICAgICAgICAvLyBoZWxwcyBtYW55IEphdmFTY3JpcHQgZW5naW5lcyBnZW5lcmF0ZSBmYXN0ZXIgY29kZS5cbiAgICAgICAgZ2V0VWlkKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZhbHVlc18gPSBudWxsO1xuICAgICAgICBpZiAob3B0X3ZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9wZXJ0aWVzKG9wdF92YWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyBhIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgS2V5IG5hbWUuXG4gICAgICogQHJldHVybiB7Kn0gVmFsdWUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICBpZiAodGhpcy52YWx1ZXNfICYmIHRoaXMudmFsdWVzXy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIGxpc3Qgb2Ygb2JqZWN0IHByb3BlcnR5IG5hbWVzLlxuICAgICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IExpc3Qgb2YgcHJvcGVydHkgbmFtZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmdldEtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy52YWx1ZXNfICYmIE9iamVjdC5rZXlzKHRoaXMudmFsdWVzXykpIHx8IFtdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFuIG9iamVjdCBvZiBhbGwgcHJvcGVydHkgbmFtZXMgYW5kIHZhbHVlcy5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3Q8c3RyaW5nLCAqPn0gT2JqZWN0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudmFsdWVzXyAmJiBhc3NpZ24oe30sIHRoaXMudmFsdWVzXykpIHx8IHt9O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG9iamVjdCBoYXMgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBCYXNlT2JqZWN0LnByb3RvdHlwZS5oYXNQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnZhbHVlc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7Kn0gb2xkVmFsdWUgT2xkIHZhbHVlLlxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uIChrZXksIG9sZFZhbHVlKSB7XG4gICAgICAgIHZhciBldmVudFR5cGU7XG4gICAgICAgIGV2ZW50VHlwZSA9IFwiY2hhbmdlOlwiICsga2V5O1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE9iamVjdEV2ZW50KGV2ZW50VHlwZSwga2V5LCBvbGRWYWx1ZSkpO1xuICAgICAgICBldmVudFR5cGUgPSBPYmplY3RFdmVudFR5cGUuUFJPUEVSVFlDSEFOR0U7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT2JqZWN0RXZlbnQoZXZlbnRUeXBlLCBrZXksIG9sZFZhbHVlKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmFkZENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKGtleSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlOlwiICsga2V5LCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleSBuYW1lLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9ldmVudHMuanNcIikuTGlzdGVuZXJ9IGxpc3RlbmVyIExpc3RlbmVyLlxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24gKGtleSwgbGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlOlwiICsga2V5LCBsaXN0ZW5lcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXRzIGEgdmFsdWUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaWxlbnRdIFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBvcHRfc2lsZW50KSB7XG4gICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlc18gfHwgKHRoaXMudmFsdWVzXyA9IHt9KTtcbiAgICAgICAgaWYgKG9wdF9zaWxlbnQpIHtcbiAgICAgICAgICAgIHZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB2YWx1ZXNba2V5XTtcbiAgICAgICAgICAgIHZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAob2xkVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoa2V5LCBvbGRWYWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgYSBjb2xsZWN0aW9uIG9mIGtleS12YWx1ZSBwYWlycy4gIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgYW55IGV4aXN0aW5nXG4gICAgICogcHJvcGVydGllcyBhbmQgYWRkcyBuZXcgb25lcyAoaXQgZG9lcyBub3QgcmVtb3ZlIGFueSBleGlzdGluZyBwcm9wZXJ0aWVzKS5cbiAgICAgKiBAcGFyYW0ge09iamVjdDxzdHJpbmcsICo+fSB2YWx1ZXMgVmFsdWVzLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9zaWxlbnRdIFVwZGF0ZSB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLnNldFByb3BlcnRpZXMgPSBmdW5jdGlvbiAodmFsdWVzLCBvcHRfc2lsZW50KSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KGtleSwgdmFsdWVzW2tleV0sIG9wdF9zaWxlbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBcHBseSBhbnkgcHJvcGVydGllcyBmcm9tIGFub3RoZXIgb2JqZWN0IHdpdGhvdXQgdHJpZ2dlcmluZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtCYXNlT2JqZWN0fSBzb3VyY2UgVGhlIHNvdXJjZSBvYmplY3QuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLmFwcGx5UHJvcGVydGllcyA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKCFzb3VyY2UudmFsdWVzXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFzc2lnbih0aGlzLnZhbHVlc18gfHwgKHRoaXMudmFsdWVzXyA9IHt9KSwgc291cmNlLnZhbHVlc18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVW5zZXRzIGEgcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkgbmFtZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc2lsZW50XSBVbnNldCB3aXRob3V0IHRyaWdnZXJpbmcgYW4gZXZlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VPYmplY3QucHJvdG90eXBlLnVuc2V0ID0gZnVuY3Rpb24gKGtleSwgb3B0X3NpbGVudCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZXNfICYmIGtleSBpbiB0aGlzLnZhbHVlc18pIHtcbiAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWVzX1trZXldO1xuICAgICAgICAgICAgaWYgKGlzRW1wdHkodGhpcy52YWx1ZXNfKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW9wdF9zaWxlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeShrZXksIG9sZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEJhc2VPYmplY3Q7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCBkZWZhdWx0IEJhc2VPYmplY3Q7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3QuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2xheWVyL1Byb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIE9QQUNJVFk6ICdvcGFjaXR5JyxcbiAgICBWSVNJQkxFOiAndmlzaWJsZScsXG4gICAgRVhURU5UOiAnZXh0ZW50JyxcbiAgICBaX0lOREVYOiAnekluZGV4JyxcbiAgICBNQVhfUkVTT0xVVElPTjogJ21heFJlc29sdXRpb24nLFxuICAgIE1JTl9SRVNPTFVUSU9OOiAnbWluUmVzb2x1dGlvbicsXG4gICAgTUFYX1pPT006ICdtYXhab29tJyxcbiAgICBNSU5fWk9PTTogJ21pblpvb20nLFxuICAgIFNPVVJDRTogJ3NvdXJjZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UHJvcGVydHkuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9Bc3NlcnRpb25FcnJvclxuICovXG5pbXBvcnQgeyBWRVJTSU9OIH0gZnJvbSAnLi91dGlsLmpzJztcbi8qKlxuICogRXJyb3Igb2JqZWN0IHRocm93biB3aGVuIGFuIGFzc2VydGlvbiBmYWlsZWQuIFRoaXMgaXMgYW4gRUNNQS0yNjIgRXJyb3IsXG4gKiBleHRlbmRlZCB3aXRoIGEgYGNvZGVgIHByb3BlcnR5LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yLlxuICovXG52YXIgQXNzZXJ0aW9uRXJyb3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEFzc2VydGlvbkVycm9yLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBjb2RlIEVycm9yIGNvZGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQXNzZXJ0aW9uRXJyb3IoY29kZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcGF0aCA9IFZFUlNJT04gPT09ICdsYXRlc3QnID8gVkVSU0lPTiA6ICd2JyArIFZFUlNJT04uc3BsaXQoJy0nKVswXTtcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSAnQXNzZXJ0aW9uIGZhaWxlZC4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vJyArXG4gICAgICAgICAgICBwYXRoICtcbiAgICAgICAgICAgICcvZG9jL2Vycm9ycy8jJyArXG4gICAgICAgICAgICBjb2RlICtcbiAgICAgICAgICAgICcgZm9yIGRldGFpbHMuJztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXJyb3IgY29kZS4gVGhlIG1lYW5pbmcgb2YgdGhlIGNvZGUgY2FuIGJlIGZvdW5kIG9uXG4gICAgICAgICAqIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvIChyZXBsYWNlIGBsYXRlc3RgIHdpdGhcbiAgICAgICAgICogdGhlIHZlcnNpb24gZm91bmQgaW4gdGhlIE9wZW5MYXllcnMgc2NyaXB0J3MgaGVhZGVyIGNvbW1lbnQgaWYgYSB2ZXJzaW9uXG4gICAgICAgICAqIG90aGVyIHRoYW4gdGhlIGxhdGVzdCBpcyB1c2VkKS5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmFtZSA9ICdBc3NlcnRpb25FcnJvcic7XG4gICAgICAgIC8vIFJlLWFzc2lnbiBtZXNzYWdlLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1JpY2gtSGFycmlzL2J1YmxlL2lzc3Vlcy80MFxuICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gQXNzZXJ0aW9uRXJyb3I7XG59KEVycm9yKSk7XG5leHBvcnQgZGVmYXVsdCBBc3NlcnRpb25FcnJvcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUFzc2VydGlvbkVycm9yLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9hc3NlcnRzXG4gKi9cbmltcG9ydCBBc3NlcnRpb25FcnJvciBmcm9tICcuL0Fzc2VydGlvbkVycm9yLmpzJztcbi8qKlxuICogQHBhcmFtIHsqfSBhc3NlcnRpb24gQXNzZXJ0aW9uIHdlIGV4cGVjdGVkIHRvIGJlIHRydXRoeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvckNvZGUgRXJyb3IgY29kZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChhc3NlcnRpb24sIGVycm9yQ29kZSkge1xuICAgIGlmICghYXNzZXJ0aW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBBc3NlcnRpb25FcnJvcihlcnJvckNvZGUpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFzc2VydHMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL21hdGhcbiAqL1xuLyoqXG4gKiBUYWtlcyBhIG51bWJlciBhbmQgY2xhbXBzIGl0IHRvIHdpdGhpbiB0aGUgcHJvdmlkZWQgYm91bmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBpbnB1dCBudW1iZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluIFRoZSBtaW5pbXVtIHZhbHVlIHRvIHJldHVybi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXggVGhlIG1heGltdW0gdmFsdWUgdG8gcmV0dXJuLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5wdXQgbnVtYmVyIGlmIGl0IGlzIHdpdGhpbiBib3VuZHMsIG9yIHRoZSBuZWFyZXN0XG4gKiAgICAgbnVtYmVyIHdpdGhpbiB0aGUgYm91bmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpO1xufVxuLyoqXG4gKiBSZXR1cm4gdGhlIGh5cGVyYm9saWMgY29zaW5lIG9mIGEgZ2l2ZW4gbnVtYmVyLiBUaGUgbWV0aG9kIHdpbGwgdXNlIHRoZVxuICogbmF0aXZlIGBNYXRoLmNvc2hgIGZ1bmN0aW9uIGlmIGl0IGlzIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIHRoZSBoeXBlcmJvbGljXG4gKiBjb3NpbmUgd2lsbCBiZSBjYWxjdWxhdGVkIHZpYSB0aGUgcmVmZXJlbmNlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNb3ppbGxhXG4gKiBkZXZlbG9wZXIgbmV0d29yay5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHJldHVybiB7bnVtYmVyfSBIeXBlcmJvbGljIGNvc2luZSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGNvc2ggPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGNvc2g7XG4gICAgaWYgKCdjb3NoJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGguY29zaCBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGNvc2ggPSBNYXRoLmNvc2g7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBjb3NoID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHZhciB5ID0gLyoqIEB0eXBlIHtNYXRofSAqLyAoTWF0aCkuZXhwKHgpO1xuICAgICAgICAgICAgcmV0dXJuICh5ICsgMSAvIHkpIC8gMjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGNvc2g7XG59KSgpO1xuLyoqXG4gKiBSZXR1cm4gdGhlIGJhc2UgMiBsb2dhcml0aG0gb2YgYSBnaXZlbiBudW1iZXIuIFRoZSBtZXRob2Qgd2lsbCB1c2UgdGhlXG4gKiBuYXRpdmUgYE1hdGgubG9nMmAgZnVuY3Rpb24gaWYgaXQgaXMgYXZhaWxhYmxlLCBvdGhlcndpc2UgdGhlIGJhc2UgMlxuICogbG9nYXJpdGhtIHdpbGwgYmUgY2FsY3VsYXRlZCB2aWEgdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGVcbiAqIE1vemlsbGEgZGV2ZWxvcGVyIG5ldHdvcmsuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEByZXR1cm4ge251bWJlcn0gQmFzZSAyIGxvZ2FyaXRobSBvZiB4LlxuICovXG5leHBvcnQgdmFyIGxvZzIgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8vIFdyYXBwZWQgaW4gYSBpaWZlLCB0byBzYXZlIHRoZSBvdmVyaGVhZCBvZiBjaGVja2luZyBmb3IgdGhlIG5hdGl2ZVxuICAgIC8vIGltcGxlbWVudGF0aW9uIG9uIGV2ZXJ5IGludm9jYXRpb24uXG4gICAgdmFyIGxvZzI7XG4gICAgaWYgKCdsb2cyJyBpbiBNYXRoKSB7XG4gICAgICAgIC8vIFRoZSBlbnZpcm9ubWVudCBzdXBwb3J0cyB0aGUgbmF0aXZlIE1hdGgubG9nMiBmdW5jdGlvbiwgdXNlIGl04oCmXG4gICAgICAgIGxvZzIgPSBNYXRoLmxvZzI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyDigKYgZWxzZSwgdXNlIHRoZSByZWZlcmVuY2UgaW1wbGVtZW50YXRpb24gb2YgTUROOlxuICAgICAgICBsb2cyID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBNYXRoLmxvZyh4KSAqIE1hdGguTE9HMkU7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBsb2cyO1xufSkoKTtcbi8qKlxuICogUmV0dXJucyB0aGUgc3F1YXJlIG9mIHRoZSBjbG9zZXN0IGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50ICh4LCB5KSBhbmQgdGhlXG4gKiBsaW5lIHNlZ21lbnQgKHgxLCB5MSkgdG8gKHgyLCB5MikuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UoeCwgeSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgZHggPSB4MiAtIHgxO1xuICAgIHZhciBkeSA9IHkyIC0geTE7XG4gICAgaWYgKGR4ICE9PSAwIHx8IGR5ICE9PSAwKSB7XG4gICAgICAgIHZhciB0ID0gKCh4IC0geDEpICogZHggKyAoeSAtIHkxKSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG4gICAgICAgIGlmICh0ID4gMSkge1xuICAgICAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgICAgIHkxID0geTI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodCA+IDApIHtcbiAgICAgICAgICAgIHgxICs9IGR4ICogdDtcbiAgICAgICAgICAgIHkxICs9IGR5ICogdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlKHgsIHksIHgxLCB5MSk7XG59XG4vKipcbiAqIFJldHVybnMgdGhlIHNxdWFyZSBvZiB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgcG9pbnRzICh4MSwgeTEpIGFuZCAoeDIsIHkyKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MSBYMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MSBZMS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4MiBYMi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5MiBZMi5cbiAqIEByZXR1cm4ge251bWJlcn0gU3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZSh4MSwgeTEsIHgyLCB5Mikge1xuICAgIHZhciBkeCA9IHgyIC0geDE7XG4gICAgdmFyIGR5ID0geTIgLSB5MTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG59XG4vKipcbiAqIFNvbHZlcyBzeXN0ZW0gb2YgbGluZWFyIGVxdWF0aW9ucyB1c2luZyBHYXVzc2lhbiBlbGltaW5hdGlvbiBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gbWF0IEF1Z21lbnRlZCBtYXRyaXggKG4geCBuICsgMSBjb2x1bW4pXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbiByb3ctbWFqb3Igb3JkZXIuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgcmVzdWx0aW5nIHZlY3Rvci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvbHZlTGluZWFyU3lzdGVtKG1hdCkge1xuICAgIHZhciBuID0gbWF0Lmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAvLyBGaW5kIG1heCBpbiB0aGUgaS10aCBjb2x1bW4gKGlnbm9yaW5nIGkgLSAxIGZpcnN0IHJvd3MpXG4gICAgICAgIHZhciBtYXhSb3cgPSBpO1xuICAgICAgICB2YXIgbWF4RWwgPSBNYXRoLmFicyhtYXRbaV1baV0pO1xuICAgICAgICBmb3IgKHZhciByID0gaSArIDE7IHIgPCBuOyByKyspIHtcbiAgICAgICAgICAgIHZhciBhYnNWYWx1ZSA9IE1hdGguYWJzKG1hdFtyXVtpXSk7XG4gICAgICAgICAgICBpZiAoYWJzVmFsdWUgPiBtYXhFbCkge1xuICAgICAgICAgICAgICAgIG1heEVsID0gYWJzVmFsdWU7XG4gICAgICAgICAgICAgICAgbWF4Um93ID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4RWwgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsOyAvLyBtYXRyaXggaXMgc2luZ3VsYXJcbiAgICAgICAgfVxuICAgICAgICAvLyBTd2FwIG1heCByb3cgd2l0aCBpLXRoIChjdXJyZW50KSByb3dcbiAgICAgICAgdmFyIHRtcCA9IG1hdFttYXhSb3ddO1xuICAgICAgICBtYXRbbWF4Um93XSA9IG1hdFtpXTtcbiAgICAgICAgbWF0W2ldID0gdG1wO1xuICAgICAgICAvLyBTdWJ0cmFjdCB0aGUgaS10aCByb3cgdG8gbWFrZSBhbGwgdGhlIHJlbWFpbmluZyByb3dzIDAgaW4gdGhlIGktdGggY29sdW1uXG4gICAgICAgIGZvciAodmFyIGogPSBpICsgMTsgaiA8IG47IGorKykge1xuICAgICAgICAgICAgdmFyIGNvZWYgPSAtbWF0W2pdW2ldIC8gbWF0W2ldW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IGk7IGsgPCBuICsgMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gaykge1xuICAgICAgICAgICAgICAgICAgICBtYXRbal1ba10gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0W2pdW2tdICs9IGNvZWYgKiBtYXRbaV1ba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFNvbHZlIEF4PWIgZm9yIHVwcGVyIHRyaWFuZ3VsYXIgbWF0cml4IEEgKG1hdClcbiAgICB2YXIgeCA9IG5ldyBBcnJheShuKTtcbiAgICBmb3IgKHZhciBsID0gbiAtIDE7IGwgPj0gMDsgbC0tKSB7XG4gICAgICAgIHhbbF0gPSBtYXRbbF1bbl0gLyBtYXRbbF1bbF07XG4gICAgICAgIGZvciAodmFyIG0gPSBsIC0gMTsgbSA+PSAwOyBtLS0pIHtcbiAgICAgICAgICAgIG1hdFttXVtuXSAtPSBtYXRbbV1bbF0gKiB4W2xdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB4O1xufVxuLyoqXG4gKiBDb252ZXJ0cyByYWRpYW5zIHRvIHRvIGRlZ3JlZXMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlSW5SYWRpYW5zIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEFuZ2xlIGluIGRlZ3JlZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0RlZ3JlZXMoYW5nbGVJblJhZGlhbnMpIHtcbiAgICByZXR1cm4gKGFuZ2xlSW5SYWRpYW5zICogMTgwKSAvIE1hdGguUEk7XG59XG4vKipcbiAqIENvbnZlcnRzIGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYW5nbGVJbkRlZ3JlZXMgQW5nbGUgaW4gZGVncmVlcy5cbiAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgaW4gcmFkaWFucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUmFkaWFucyhhbmdsZUluRGVncmVlcykge1xuICAgIHJldHVybiAoYW5nbGVJbkRlZ3JlZXMgKiBNYXRoLlBJKSAvIDE4MDtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbW9kdWxvIG9mIGEgLyBiLCBkZXBlbmRpbmcgb24gdGhlIHNpZ24gb2YgYi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gYSBEaXZpZGVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIERpdmlzb3IuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1vZHVsby5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZHVsbyhhLCBiKSB7XG4gICAgdmFyIHIgPSBhICUgYjtcbiAgICByZXR1cm4gciAqIGIgPCAwID8gciArIGIgOiByO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsaW5lYXJseSBpbnRlcnBvbGF0ZWQgdmFsdWUgb2YgeCBiZXR3ZWVuIGEgYW5kIGIuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGEgTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYiBOdW1iZXJcbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFZhbHVlIHRvIGJlIGludGVycG9sYXRlZC5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJwb2xhdGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVycChhLCBiLCB4KSB7XG4gICAgcmV0dXJuIGEgKyB4ICogKGIgLSBhKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGguanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9CYXNlXG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4uL09iamVjdC5qcyc7XG5pbXBvcnQgTGF5ZXJQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uL29iai5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6ZXh0ZW50J3wnY2hhbmdlOm1heFJlc29sdXRpb24nfCdjaGFuZ2U6bWF4Wm9vbSd8XG4gKiAgICAnY2hhbmdlOm1pblJlc29sdXRpb24nfCdjaGFuZ2U6bWluWm9vbSd8J2NoYW5nZTpvcGFjaXR5J3wnY2hhbmdlOnZpc2libGUnfCdjaGFuZ2U6ekluZGV4J30gQmFzZUxheWVyT2JqZWN0RXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxCYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfEJhc2VMYXllck9iamVjdEV2ZW50VHlwZXMsIFJldHVybj59IEJhc2VMYXllck9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLWxheWVyJ10gQSBDU1MgY2xhc3MgbmFtZSB0byBzZXQgdG8gdGhlIGxheWVyIGVsZW1lbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gT3BhY2l0eSAoMCwgMSkuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt2aXNpYmxlPXRydWVdIFZpc2liaWxpdHkuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSBib3VuZGluZyBleHRlbnQgZm9yIGxheWVyIHJlbmRlcmluZy4gIFRoZSBsYXllciB3aWxsIG5vdCBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGlzIGV4dGVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbekluZGV4XSBUaGUgei1pbmRleCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgQXQgcmVuZGVyaW5nIHRpbWUsIHRoZSBsYXllcnNcbiAqIHdpbGwgYmUgb3JkZXJlZCwgZmlyc3QgYnkgWi1pbmRleCBhbmQgdGhlbiBieSBwb3NpdGlvbi4gV2hlbiBgdW5kZWZpbmVkYCwgYSBgekluZGV4YCBvZiAwIGlzIGFzc3VtZWRcbiAqIGZvciBsYXllcnMgdGhhdCBhcmUgYWRkZWQgdG8gdGhlIG1hcCdzIGBsYXllcnNgIGNvbGxlY3Rpb24sIG9yIGBJbmZpbml0eWAgd2hlbiB0aGUgbGF5ZXIncyBgc2V0TWFwKClgXG4gKiBtZXRob2Qgd2FzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhSZXNvbHV0aW9uXSBUaGUgbWF4aW11bSByZXNvbHV0aW9uIChleGNsdXNpdmUpIGJlbG93IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluWm9vbV0gVGhlIG1pbmltdW0gdmlldyB6b29tIGxldmVsIChleGNsdXNpdmUpIGFib3ZlIHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gVGhlIG1heGltdW0gdmlldyB6b29tIGxldmVsIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbFxuICogYmUgdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0PHN0cmluZywgKj59IFtwcm9wZXJ0aWVzXSBBcmJpdHJhcnkgb2JzZXJ2YWJsZSBwcm9wZXJ0aWVzLiBDYW4gYmUgYWNjZXNzZWQgd2l0aCBgI2dldCgpYCBhbmQgYCNzZXQoKWAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogTm90ZSB0aGF0IHdpdGgge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlfSBhbmQgYWxsIGl0cyBzdWJjbGFzc2VzLCBhbnkgcHJvcGVydHkgc2V0IGluXG4gKiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH0gcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdCwgc29cbiAqIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQGFwaVxuICovXG52YXIgQmFzZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIExheWVyIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQmFzZUxheWVyKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7QmFzZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlTGF5ZXJPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwcm9wZXJ0aWVzLnByb3BlcnRpZXM7XG4gICAgICAgICAgICBhc3NpZ24ocHJvcGVydGllcywgb3B0aW9ucy5wcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuT1BBQ0lUWV0gPVxuICAgICAgICAgICAgb3B0aW9ucy5vcGFjaXR5ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYWNpdHkgOiAxO1xuICAgICAgICBhc3NlcnQodHlwZW9mIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZXSA9PT0gJ251bWJlcicsIDY0KTsgLy8gTGF5ZXIgb3BhY2l0eSBtdXN0IGJlIGEgbnVtYmVyXG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFXSA9XG4gICAgICAgICAgICBvcHRpb25zLnZpc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlzaWJsZSA6IHRydWU7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5aX0lOREVYXSA9IG9wdGlvbnMuekluZGV4O1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1JFU09MVVRJT05dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhSZXNvbHV0aW9uIDogSW5maW5pdHk7XG4gICAgICAgIHByb3BlcnRpZXNbTGF5ZXJQcm9wZXJ0eS5NSU5fUkVTT0xVVElPTl0gPVxuICAgICAgICAgICAgb3B0aW9ucy5taW5SZXNvbHV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblJlc29sdXRpb24gOiAwO1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUlOX1pPT01dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWluWm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taW5ab29tIDogLUluZmluaXR5O1xuICAgICAgICBwcm9wZXJ0aWVzW0xheWVyUHJvcGVydHkuTUFYX1pPT01dID1cbiAgICAgICAgICAgIG9wdGlvbnMubWF4Wm9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5tYXhab29tIDogSW5maW5pdHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xhc3NOYW1lXyA9XG4gICAgICAgICAgICBwcm9wZXJ0aWVzLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtbGF5ZXInO1xuICAgICAgICBkZWxldGUgcHJvcGVydGllcy5jbGFzc05hbWU7XG4gICAgICAgIF90aGlzLnNldFByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlXyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBDU1MgY2xhc3MgbmFtZS5cbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldENsYXNzTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3NOYW1lXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIG5vdCBtZWFudCB0byBiZSBjYWxsZWQgYnkgbGF5ZXJzIG9yIGxheWVyIHJlbmRlcmVycyBiZWNhdXNlIHRoZSBzdGF0ZVxuICAgICAqIGlzIGluY29ycmVjdCBpZiB0aGUgbGF5ZXIgaXMgaW5jbHVkZWQgaW4gYSBsYXllciBncm91cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9tYW5hZ2VkXSBMYXllciBpcyBtYW5hZ2VkLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9IExheWVyIHN0YXRlLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZSA9IGZ1bmN0aW9uIChvcHRfbWFuYWdlZCkge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGV9ICovXG4gICAgICAgIHZhciBzdGF0ZSA9IHRoaXMuc3RhdGVfIHx8XG4gICAgICAgICAgICAvKiogQHR5cGUgez99ICovICh7XG4gICAgICAgICAgICAgICAgbGF5ZXI6IHRoaXMsXG4gICAgICAgICAgICAgICAgbWFuYWdlZDogb3B0X21hbmFnZWQgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRfbWFuYWdlZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB2YXIgekluZGV4ID0gdGhpcy5nZXRaSW5kZXgoKTtcbiAgICAgICAgc3RhdGUub3BhY2l0eSA9IGNsYW1wKE1hdGgucm91bmQodGhpcy5nZXRPcGFjaXR5KCkgKiAxMDApIC8gMTAwLCAwLCAxKTtcbiAgICAgICAgc3RhdGUuc291cmNlU3RhdGUgPSB0aGlzLmdldFNvdXJjZVN0YXRlKCk7XG4gICAgICAgIHN0YXRlLnZpc2libGUgPSB0aGlzLmdldFZpc2libGUoKTtcbiAgICAgICAgc3RhdGUuZXh0ZW50ID0gdGhpcy5nZXRFeHRlbnQoKTtcbiAgICAgICAgc3RhdGUuekluZGV4ID0gekluZGV4ID09PSB1bmRlZmluZWQgJiYgIXN0YXRlLm1hbmFnZWQgPyBJbmZpbml0eSA6IHpJbmRleDtcbiAgICAgICAgc3RhdGUubWF4UmVzb2x1dGlvbiA9IHRoaXMuZ2V0TWF4UmVzb2x1dGlvbigpO1xuICAgICAgICBzdGF0ZS5taW5SZXNvbHV0aW9uID0gTWF0aC5tYXgodGhpcy5nZXRNaW5SZXNvbHV0aW9uKCksIDApO1xuICAgICAgICBzdGF0ZS5taW5ab29tID0gdGhpcy5nZXRNaW5ab29tKCk7XG4gICAgICAgIHN0YXRlLm1heFpvb20gPSB0aGlzLmdldE1heFpvb20oKTtcbiAgICAgICAgdGhpcy5zdGF0ZV8gPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBbb3B0X2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlXG4gICAgICogICAgIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllcnNBcnJheSA9IGZ1bmN0aW9uIChvcHRfYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTGF5ZXIuanNcIikuU3RhdGU+fSBbb3B0X3N0YXRlc10gT3B0aW9uYWwgbGlzdCBvZiBsYXllclxuICAgICAqICAgICBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHtAbGluayBtb2R1bGU6b2wvZXh0ZW50fkV4dGVudCBleHRlbnR9IG9mIHRoZSBsYXllciBvciBgdW5kZWZpbmVkYCBpZiBpdFxuICAgICAqIHdpbGwgYmUgdmlzaWJsZSByZWdhcmRsZXNzIG9mIGV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fHVuZGVmaW5lZH0gVGhlIGxheWVyIGV4dGVudC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudHx1bmRlZmluZWR9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LkVYVEVOVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHJlc29sdXRpb24gb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1BWF9SRVNPTFVUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuTUlOX1JFU09MVVRJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWluaW11bSB6b29tIGxldmVsIG9mIHRoZSBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0TWluWm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5NSU5fWk9PTSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgb2YgdGhlIGxheWVyLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gem9vbSBsZXZlbCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5nZXRNYXhab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5Lk1BWF9aT09NKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyIChiZXR3ZWVuIDAgYW5kIDEpLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG9wYWNpdHkgb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0T3BhY2l0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoTGF5ZXJQcm9wZXJ0eS5PUEFDSVRZKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9zb3VyY2UvU3RhdGUuanNcIikuZGVmYXVsdH0gU291cmNlIHN0YXRlLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllciAoYHRydWVgIG9yIGBmYWxzZWApLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLmdldFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlZJU0lCTEUpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgWi1pbmRleCBvZiB0aGUgbGF5ZXIsIHdoaWNoIGlzIHVzZWQgdG8gb3JkZXIgbGF5ZXJzIGJlZm9yZVxuICAgICAqIHJlbmRlcmluZy4gVGhlIGRlZmF1bHQgWi1pbmRleCBpcyAwLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIFotaW5kZXggb2YgdGhlIGxheWVyLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZ2V0WkluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChMYXllclByb3BlcnR5LlpfSU5ERVgpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgZXh0ZW50IGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLiAgSWYgYHVuZGVmaW5lZGAsIHRoZSBsYXllclxuICAgICAqIHdpbGwgYmUgdmlzaWJsZSBhdCBhbGwgZXh0ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR8dW5kZWZpbmVkfSBleHRlbnQgVGhlIGV4dGVudCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuRVhURU5ULCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBtYXhpbXVtIHJlc29sdXRpb24gYXQgd2hpY2ggdGhlIGxheWVyIGlzIHZpc2libGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFJlc29sdXRpb24gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRNYXhSZXNvbHV0aW9uID0gZnVuY3Rpb24gKG1heFJlc29sdXRpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5NQVhfUkVTT0xVVElPTiwgbWF4UmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgbGF5ZXIgaXMgdmlzaWJsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluUmVzb2x1dGlvbiBUaGUgbWluaW11bSByZXNvbHV0aW9uIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAobWluUmVzb2x1dGlvbikge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9SRVNPTFVUSU9OLCBtaW5SZXNvbHV0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWF4aW11bSB6b29tIChleGNsdXNpdmUpIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4Wm9vbSBUaGUgbWF4aW11bSB6b29tIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1heFpvb20gPSBmdW5jdGlvbiAobWF4Wm9vbSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1BWF9aT09NLCBtYXhab29tKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbWluaW11bSB6b29tIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoZSBsYXllciBpcyB2aXNpYmxlLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgem9vbSBsZXZlbHMgZm9yIGxheWVyIHZpc2liaWxpdHkgYXJlIGJhc2VkIG9uIHRoZVxuICAgICAqIHZpZXcgem9vbSBsZXZlbCwgd2hpY2ggbWF5IGJlIGRpZmZlcmVudCBmcm9tIGEgdGlsZSBzb3VyY2Ugem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWm9vbSBUaGUgbWluaW11bSB6b29tIG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE1pblpvb20gPSBmdW5jdGlvbiAobWluWm9vbSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk1JTl9aT09NLCBtaW5ab29tKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgb3BhY2l0eSBvZiB0aGUgbGF5ZXIsIGFsbG93ZWQgdmFsdWVzIHJhbmdlIGZyb20gMCB0byAxLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IFRoZSBvcGFjaXR5IG9mIHRoZSBsYXllci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlTGF5ZXIucHJvdG90eXBlLnNldE9wYWNpdHkgPSBmdW5jdGlvbiAob3BhY2l0eSkge1xuICAgICAgICBhc3NlcnQodHlwZW9mIG9wYWNpdHkgPT09ICdudW1iZXInLCA2NCk7IC8vIExheWVyIG9wYWNpdHkgbXVzdCBiZSBhIG51bWJlclxuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5Lk9QQUNJVFksIG9wYWNpdHkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBsYXllciAoYHRydWVgIG9yIGBmYWxzZWApLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaWJsZSBUaGUgdmlzaWJpbGl0eSBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKHZpc2libGUpIHtcbiAgICAgICAgdGhpcy5zZXQoTGF5ZXJQcm9wZXJ0eS5WSVNJQkxFLCB2aXNpYmxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBaLWluZGV4IG9mIHRoZSBsYXllciwgd2hpY2ggaXMgdXNlZCB0byBvcmRlciBsYXllcnMgYmVmb3JlIHJlbmRlcmluZy5cbiAgICAgKiBUaGUgZGVmYXVsdCBaLWluZGV4IGlzIDAuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHppbmRleCBUaGUgei1pbmRleCBvZiB0aGUgbGF5ZXIuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQmFzZUxheWVyLnByb3RvdHlwZS5zZXRaSW5kZXggPSBmdW5jdGlvbiAoemluZGV4KSB7XG4gICAgICAgIHRoaXMuc2V0KExheWVyUHJvcGVydHkuWl9JTkRFWCwgemluZGV4KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIEJhc2VMYXllci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZV8pIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVfLmxheWVyID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIEJhc2VMYXllcjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQmFzZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QmFzZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0V2ZW50VHlwZVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgYmVmb3JlIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlcmVuZGVyXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBSRVJFTkRFUjogJ3ByZXJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGEgbGF5ZXIgaXMgcmVuZGVyZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdHJlbmRlclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT1NUUkVOREVSOiAncG9zdHJlbmRlcicsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGJlZm9yZSBsYXllcnMgYXJlIHJlbmRlcmVkLlxuICAgICAqIFRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZSBhIGBjb250ZXh0YCBzZXQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcHJlY29tcG9zZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQUkVDT01QT1NFOiAncHJlY29tcG9zZScsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIGFmdGVyIGFsbCBsYXllcnMgYXJlIHJlbmRlcmVkLlxuICAgICAqIFRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZSBhIGBjb250ZXh0YCBzZXQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcG9zdGNvbXBvc2VcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9TVENPTVBPU0U6ICdwb3N0Y29tcG9zZScsXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gcmVuZGVyaW5nIGlzIGNvbXBsZXRlLCBpLmUuIGFsbCBzb3VyY2VzIGFuZCB0aWxlcyBoYXZlXG4gICAgICogZmluaXNoZWQgbG9hZGluZyBmb3IgdGhlIGN1cnJlbnQgdmlld3BvcnQsIGFuZCBhbGwgdGlsZXMgYXJlIGZhZGVkIGluLlxuICAgICAqIFRoZSBldmVudCBvYmplY3Qgd2lsbCBub3QgaGF2ZSBhIGBjb250ZXh0YCBzZXQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9yZW5kZXIvRXZlbnR+UmVuZGVyRXZlbnQjcmVuZGVyY29tcGxldGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUkVOREVSQ09NUExFVEU6ICdyZW5kZXJjb21wbGV0ZScsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7J3Bvc3RyZW5kZXInfCdwcmVjb21wb3NlJ3wncG9zdGNvbXBvc2UnfCdyZW5kZXJjb21wbGV0ZSd9IE1hcFJlbmRlckV2ZW50VHlwZXNcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7J3Bvc3RyZW5kZXInfCdwcmVyZW5kZXInfSBMYXllclJlbmRlckV2ZW50VHlwZXNcbiAqL1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUeXBlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvU3RhdGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogU3RhdGUgb2YgdGhlIHNvdXJjZSwgb25lIG9mICd1bmRlZmluZWQnLCAnbG9hZGluZycsICdyZWFkeScgb3IgJ2Vycm9yJy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIFVOREVGSU5FRDogJ3VuZGVmaW5lZCcsXG4gICAgTE9BRElORzogJ2xvYWRpbmcnLFxuICAgIFJFQURZOiAncmVhZHknLFxuICAgIEVSUk9SOiAnZXJyb3InLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN0YXRlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IEJhc2VMYXllciBmcm9tICcuL0Jhc2UuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBMYXllclByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlKTpIVE1MRWxlbWVudH0gUmVuZGVyRnVuY3Rpb25cbiAqL1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpzb3VyY2UnLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8J2NoYW5nZTpzb3VyY2UnfFxuICogICAgIGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBMYXllck9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZVR5cGVcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1sYXllciddIEEgQ1NTIGNsYXNzIG5hbWUgdG8gc2V0IHRvIHRoZSBsYXllciBlbGVtZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtvcGFjaXR5PTFdIE9wYWNpdHkgKDAsIDEpLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbdmlzaWJsZT10cnVlXSBWaXNpYmlsaXR5LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbZXh0ZW50XSBUaGUgYm91bmRpbmcgZXh0ZW50IGZvciBsYXllciByZW5kZXJpbmcuICBUaGUgbGF5ZXIgd2lsbCBub3QgYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhpcyBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pJbmRleF0gVGhlIHotaW5kZXggZm9yIGxheWVyIHJlbmRlcmluZy4gIEF0IHJlbmRlcmluZyB0aW1lLCB0aGUgbGF5ZXJzXG4gKiB3aWxsIGJlIG9yZGVyZWQsIGZpcnN0IGJ5IFotaW5kZXggYW5kIHRoZW4gYnkgcG9zaXRpb24uIFdoZW4gYHVuZGVmaW5lZGAsIGEgYHpJbmRleGAgb2YgMCBpcyBhc3N1bWVkXG4gKiBmb3IgbGF5ZXJzIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSBtYXAncyBgbGF5ZXJzYCBjb2xsZWN0aW9uLCBvciBgSW5maW5pdHlgIHdoZW4gdGhlIGxheWVyJ3MgYHNldE1hcCgpYFxuICogbWV0aG9kIHdhcyB1c2VkLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5SZXNvbHV0aW9uXSBUaGUgbWluaW11bSByZXNvbHV0aW9uIChpbmNsdXNpdmUpIGF0IHdoaWNoIHRoaXMgbGF5ZXIgd2lsbCBiZVxuICogdmlzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4UmVzb2x1dGlvbl0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiAoZXhjbHVzaXZlKSBiZWxvdyB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb21dIFRoZSBtaW5pbXVtIHZpZXcgem9vbSBsZXZlbCAoZXhjbHVzaXZlKSBhYm92ZSB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFpvb21dIFRoZSBtYXhpbXVtIHZpZXcgem9vbSBsZXZlbCAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGxcbiAqIGJlIHZpc2libGUuXG4gKiBAcHJvcGVydHkge1NvdXJjZVR5cGV9IFtzb3VyY2VdIFNvdXJjZSBmb3IgdGhpcyBsYXllci4gIElmIG5vdCBwcm92aWRlZCB0byB0aGUgY29uc3RydWN0b3IsXG4gKiB0aGUgc291cmNlIGNhbiBiZSBzZXQgYnkgY2FsbGluZyB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0xheWVyfkxheWVyI3NldFNvdXJjZSBsYXllci5zZXRTb3VyY2Uoc291cmNlKX0gYWZ0ZXJcbiAqIGNvbnN0cnVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IFttYXBdIE1hcC5cbiAqIEBwcm9wZXJ0eSB7UmVuZGVyRnVuY3Rpb259IFtyZW5kZXJdIFJlbmRlciBmdW5jdGlvbi4gVGFrZXMgdGhlIGZyYW1lIHN0YXRlIGFzIGlucHV0IGFuZCBpcyBleHBlY3RlZCB0byByZXR1cm4gYW5cbiAqIEhUTUwgZWxlbWVudC4gV2lsbCBvdmVyd3JpdGUgdGhlIGRlZmF1bHQgcmVuZGVyaW5nIGZvciB0aGUgbGF5ZXIuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsICo+fSBbcHJvcGVydGllc10gQXJiaXRyYXJ5IG9ic2VydmFibGUgcHJvcGVydGllcy4gQ2FuIGJlIGFjY2Vzc2VkIHdpdGggYCNnZXQoKWAgYW5kIGAjc2V0KClgLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0YXRlXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LCB0aGUgdmFsdWUgaXMgcm91bmRlZCB0byB0d28gZGlnaXRzIHRvIGFwcGVhciBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc291cmNlL1N0YXRlLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVN0YXRlIFNvdXJjZVN0YXRlLlxuICogQHByb3BlcnR5IHtib29sZWFufSB2aXNpYmxlIFZpc2libGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IG1hbmFnZWQgTWFuYWdlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IHpJbmRleCBaSW5kZXguXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXhpbXVtIHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluUmVzb2x1dGlvbiBNaW5pbXVtIHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWluWm9vbSBNaW5pbXVtIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcn0gbWF4Wm9vbSBNYXhpbXVtIHpvb20uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmcm9tIHdoaWNoIGFsbCBsYXllciB0eXBlcyBhcmUgZGVyaXZlZC4gVGhpcyBzaG91bGQgb25seSBiZSBpbnN0YW50aWF0ZWRcbiAqIGluIHRoZSBjYXNlIHdoZXJlIGEgY3VzdG9tIGxheWVyIGlzIGJlIGFkZGVkIHRvIHRoZSBtYXAgd2l0aCBhIGN1c3RvbSBgcmVuZGVyYCBmdW5jdGlvbi5cbiAqIFN1Y2ggYSBmdW5jdGlvbiBjYW4gYmUgc3BlY2lmaWVkIGluIHRoZSBgb3B0aW9uc2Agb2JqZWN0LCBhbmQgaXMgZXhwZWN0ZWQgdG8gcmV0dXJuIGFuIEhUTUwgZWxlbWVudC5cbiAqXG4gKiBBIHZpc3VhbCByZXByZXNlbnRhdGlvbiBvZiByYXN0ZXIgb3IgdmVjdG9yIG1hcCBkYXRhLlxuICogTGF5ZXJzIGdyb3VwIHRvZ2V0aGVyIHRob3NlIHByb3BlcnRpZXMgdGhhdCBwZXJ0YWluIHRvIGhvdyB0aGUgZGF0YSBpcyB0byBiZVxuICogZGlzcGxheWVkLCBpcnJlc3BlY3RpdmUgb2YgdGhlIHNvdXJjZSBvZiB0aGF0IGRhdGEuXG4gKlxuICogTGF5ZXJzIGFyZSB1c3VhbGx5IGFkZGVkIHRvIGEgbWFwIHdpdGgge0BsaW5rIGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0I2FkZExheWVyIG1hcC5hZGRMYXllcigpfS4gQ29tcG9uZW50c1xuICogbGlrZSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1NlbGVjdH5TZWxlY3R9IHVzZSB1bm1hbmFnZWQgbGF5ZXJzXG4gKiBpbnRlcm5hbGx5LiBUaGVzZSB1bm1hbmFnZWQgbGF5ZXJzIGFyZSBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcCB1c2luZ1xuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciNzZXRNYXB9IGluc3RlYWQuXG4gKlxuICogQSBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IGlzIGZpcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0aGF0IGZvciBwZXJmb3JtYW5jZSByZWFzb25zIHNldmVyYWwgbGF5ZXJzIG1pZ2h0IGdldCByZW5kZXJlZCB0b1xuICogdGhlIHNhbWUgSFRNTCBlbGVtZW50LCB3aGljaCB3aWxsIGNhdXNlIHtAbGluayBpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdCNmb3JFYWNoTGF5ZXJBdFBpeGVsIG1hcC5mb3JFYWNoTGF5ZXJBdFBpeGVsKCl9IHRvXG4gKiBnaXZlIGZhbHNlIHBvc2l0aXZlcy4gVG8gYXZvaWQgdGhpcywgYXBwbHkgZGlmZmVyZW50IGBjbGFzc05hbWVgIHByb3BlcnRpZXMgdG8gdGhlXG4gKiBsYXllcnMgYXQgY3JlYXRpb24gdGltZS5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLlJlbmRlckV2ZW50I3ByZXJlbmRlclxuICogQGZpcmVzIGltcG9ydChcIi4uL3JlbmRlci9FdmVudC5qc1wiKS5SZW5kZXJFdmVudCNwb3N0cmVuZGVyXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvU291cmNlLmpzXCIpLmRlZmF1bHR9IFNvdXJjZVR5cGVcbiAqIEBhcGlcbiAqL1xudmFyIExheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM8U291cmNlVHlwZT59IG9wdGlvbnMgTGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMYXllcihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBiYXNlT3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5zb3VyY2U7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0xheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0xheWVyT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcFByZWNvbXBvc2VLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc291cmNlQ2hhbmdlS2V5XyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICAgIC8vIE92ZXJ3cml0ZSBkZWZhdWx0IHJlbmRlciBtZXRob2Qgd2l0aCBhIGN1c3RvbSBvbmVcbiAgICAgICAgaWYgKG9wdGlvbnMucmVuZGVyKSB7XG4gICAgICAgICAgICBfdGhpcy5yZW5kZXIgPSBvcHRpb25zLnJlbmRlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5tYXApIHtcbiAgICAgICAgICAgIF90aGlzLnNldE1hcChvcHRpb25zLm1hcCk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuYWRkQ2hhbmdlTGlzdGVuZXIoTGF5ZXJQcm9wZXJ0eS5TT1VSQ0UsIF90aGlzLmhhbmRsZVNvdXJjZVByb3BlcnR5Q2hhbmdlXyk7XG4gICAgICAgIHZhciBzb3VyY2UgPSBvcHRpb25zLnNvdXJjZVxuICAgICAgICAgICAgPyAvKiogQHR5cGUge1NvdXJjZVR5cGV9ICovIChvcHRpb25zLnNvdXJjZSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgX3RoaXMuc2V0U291cmNlKHNvdXJjZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBbb3B0X2FycmF5XSBBcnJheSBvZiBsYXllcnMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLmRlZmF1bHQ+fSBBcnJheSBvZiBsYXllcnMuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgYXJyYXkucHVzaCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGFycmF5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gW29wdF9zdGF0ZXNdIE9wdGlvbmFsIGxpc3Qgb2YgbGF5ZXIgc3RhdGVzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5TdGF0ZT59IExpc3Qgb2YgbGF5ZXIgc3RhdGVzLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRMYXllclN0YXRlc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9zdGF0ZXMpIHtcbiAgICAgICAgdmFyIHN0YXRlcyA9IG9wdF9zdGF0ZXMgPyBvcHRfc3RhdGVzIDogW107XG4gICAgICAgIHN0YXRlcy5wdXNoKHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpKTtcbiAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGF5ZXIgc291cmNlLlxuICAgICAqIEByZXR1cm4ge1NvdXJjZVR5cGV9IFRoZSBsYXllciBzb3VyY2UgKG9yIGBudWxsYCBpZiBub3QgeWV0IHNldCkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7U291cmNlVHlwZX0gKi8gKHRoaXMuZ2V0KExheWVyUHJvcGVydHkuU09VUkNFKSkgfHwgbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2Ugc3RhdGUuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmdldFNvdXJjZVN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5nZXRTb3VyY2UoKTtcbiAgICAgICAgcmV0dXJuICFzb3VyY2UgPyBTb3VyY2VTdGF0ZS5VTkRFRklORUQgOiBzb3VyY2UuZ2V0U3RhdGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmhhbmRsZVNvdXJjZUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuaGFuZGxlU291cmNlUHJvcGVydHlDaGFuZ2VfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VDaGFuZ2VLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMuc291cmNlQ2hhbmdlS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldFNvdXJjZSgpO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUNoYW5nZUtleV8gPSBsaXN0ZW4oc291cmNlLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVNvdXJjZUNoYW5nZV8sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbFwiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlXCIpLmRlZmF1bHQ+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGhcbiAgICAgKiBhbiBhcnJheSBvZiBmZWF0dXJlcy5cbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuZ2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJldHVybiByZXNvbHZlKFtdKTsgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmdldEZlYXR1cmVzKHBpeGVsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEluIGNoYXJnZSB0byBtYW5hZ2UgdGhlIHJlbmRlcmluZyBvZiB0aGUgbGF5ZXIuIE9uZSBsYXllciB0eXBlIGlzXG4gICAgICogYm91bmRlZCB3aXRoIG9uZSBsYXllciByZW5kZXJlci5cbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgVGFyZ2V0IHdoaWNoIHRoZSByZW5kZXJlciBtYXkgKGJ1dCBuZWVkIG5vdCkgdXNlXG4gICAgICogZm9yIHJlbmRlcmluZyBpdHMgY29udGVudC5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIGxheWVyUmVuZGVyZXIgPSB0aGlzLmdldFJlbmRlcmVyKCk7XG4gICAgICAgIGlmIChsYXllclJlbmRlcmVyLnByZXBhcmVGcmFtZShmcmFtZVN0YXRlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGxheWVyUmVuZGVyZXIucmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSwgdGFyZ2V0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgbGF5ZXIgdG8gYmUgcmVuZGVyZWQgb24gdG9wIG9mIG90aGVyIGxheWVycyBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsXG4gICAgICogbm90IG1hbmFnZSB0aGlzIGxheWVyIGluIGl0cyBsYXllcnMgY29sbGVjdGlvbiwgYW5kIHRoZSBjYWxsYmFjayBpblxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNmb3JFYWNoTGF5ZXJBdFBpeGVsfSB3aWxsIHJlY2VpdmUgYG51bGxgIGFzIGxheWVyLiBUaGlzXG4gICAgICogaXMgdXNlZnVsIGZvciB0ZW1wb3JhcnkgbGF5ZXJzLiBUbyByZW1vdmUgYW4gdW5tYW5hZ2VkIGxheWVyIGZyb20gdGhlIG1hcCxcbiAgICAgKiB1c2UgYCNzZXRNYXAobnVsbClgLlxuICAgICAqXG4gICAgICogVG8gYWRkIHRoZSBsYXllciB0byBhIG1hcCBhbmQgaGF2ZSBpdCBtYW5hZ2VkIGJ5IHRoZSBtYXAsIHVzZVxuICAgICAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcCNhZGRMYXllcn0gaW5zdGVhZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0TWFwID0gZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICBpZiAodGhpcy5tYXBQcmVjb21wb3NlS2V5Xykge1xuICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLm1hcFByZWNvbXBvc2VLZXlfKTtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXBSZW5kZXJLZXlfKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubWFwUmVuZGVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLm1hcFJlbmRlcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXApIHtcbiAgICAgICAgICAgIHRoaXMubWFwUHJlY29tcG9zZUtleV8gPSBsaXN0ZW4obWFwLCBSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJFdmVudCA9IFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50LmpzXCIpLmRlZmF1bHR9ICovIChldnQpO1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gcmVuZGVyRXZlbnQuZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gdGhpcy5nZXRMYXllclN0YXRlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAvLyBBIGxheWVyIGNhbiBvbmx5IGJlIGFkZGVkIHRvIHRoZSBtYXAgb25jZS4gVXNlIGVpdGhlciBgbGF5ZXIuc2V0TWFwKClgIG9yIGBtYXAuYWRkTGF5ZXIoKWAsIG5vdCBib3RoLlxuICAgICAgICAgICAgICAgIGFzc2VydCghbGF5ZXJTdGF0ZXNBcnJheS5zb21lKGZ1bmN0aW9uIChhcnJheUxheWVyU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5TGF5ZXJTdGF0ZS5sYXllciA9PT0gbGF5ZXJTdGF0ZS5sYXllcjtcbiAgICAgICAgICAgICAgICB9KSwgNjcpO1xuICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzQXJyYXkucHVzaChsYXllclN0YXRlKTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tYXBSZW5kZXJLZXlfID0gbGlzdGVuKHRoaXMsIEV2ZW50VHlwZS5DSEFOR0UsIG1hcC5yZW5kZXIsIG1hcCk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsYXllciBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtTb3VyY2VUeXBlfSBzb3VyY2UgVGhlIGxheWVyIHNvdXJjZS5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuc2V0U291cmNlID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgICB0aGlzLnNldChMYXllclByb3BlcnR5LlNPVVJDRSwgc291cmNlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcmVuZGVyZXIgZm9yIHRoaXMgbGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcmVuZGVyZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gVGhlIGxheWVyIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5nZXRSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8gPSB0aGlzLmNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGxheWVyIGhhcyBhIHJlbmRlcmVyLlxuICAgICAqL1xuICAgIExheWVyLnByb3RvdHlwZS5oYXNSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBBIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBMYXllci5wcm90b3R5cGUuY3JlYXRlUmVuZGVyZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgTGF5ZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXRTb3VyY2UobnVsbCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTGF5ZXI7XG59KEJhc2VMYXllcikpO1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBsYXllciBpcyB2aXNpYmxlIGFuZCBpZiB0aGUgcHJvdmlkZWQgdmlldyBzdGF0ZVxuICogaGFzIHJlc29sdXRpb24gYW5kIHpvb20gbGV2ZWxzIHRoYXQgYXJlIGluIHJhbmdlIG9mIHRoZSBsYXllcidzIG1pbi9tYXguXG4gKiBAcGFyYW0ge1N0YXRlfSBsYXllclN0YXRlIExheWVyIHN0YXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9WaWV3LmpzXCIpLlN0YXRlfSB2aWV3U3RhdGUgVmlldyBzdGF0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBsYXllciBpcyB2aXNpYmxlIGF0IHRoZSBnaXZlbiB2aWV3IHN0YXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkge1xuICAgIGlmICghbGF5ZXJTdGF0ZS52aXNpYmxlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHJlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcbiAgICBpZiAocmVzb2x1dGlvbiA8IGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiB8fFxuICAgICAgICByZXNvbHV0aW9uID49IGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciB6b29tID0gdmlld1N0YXRlLnpvb207XG4gICAgcmV0dXJuIHpvb20gPiBsYXllclN0YXRlLm1pblpvb20gJiYgem9vbSA8PSBsYXllclN0YXRlLm1heFpvb207XG59XG5leHBvcnQgZGVmYXVsdCBMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgUFJFTE9BRDogJ3ByZWxvYWQnLFxuICAgIFVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SOiAndXNlSW50ZXJpbVRpbGVzT25FcnJvcicsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvbGF5ZXIvQmFzZVRpbGVcbiAqL1xuaW1wb3J0IExheWVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFRpbGVQcm9wZXJ0eSBmcm9tICcuL1RpbGVQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgeyBhc3NpZ24gfSBmcm9tICcuLi9vYmouanMnO1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9CYXNlXCIpLkJhc2VMYXllck9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpzb3VyY2UnfCdjaGFuZ2U6cHJlbG9hZCd8J2NoYW5nZTp1c2VJbnRlcmltVGlsZXNPbkVycm9yJywgaW1wb3J0KFwiLi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlXCIpLkxheWVyUmVuZGVyRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4vQmFzZVwiKS5CYXNlTGF5ZXJPYmplY3RFdmVudFR5cGVzfFxuICogICAnY2hhbmdlOnNvdXJjZSd8J2NoYW5nZTpwcmVsb2FkJ3wnY2hhbmdlOnVzZUludGVyaW1UaWxlc09uRXJyb3InfGltcG9ydChcIi4uL3JlbmRlci9FdmVudFR5cGVcIikuTGF5ZXJSZW5kZXJFdmVudFR5cGVzLCBSZXR1cm4+fSBCYXNlVGlsZUxheWVyT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGVTb3VyY2VUeXBlXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtbGF5ZXInXSBBIENTUyBjbGFzcyBuYW1lIHRvIHNldCB0byB0aGUgbGF5ZXIgZWxlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtwcmVsb2FkPTBdIFByZWxvYWQuIExvYWQgbG93LXJlc29sdXRpb24gdGlsZXMgdXAgdG8gYHByZWxvYWRgIGxldmVscy4gYDBgXG4gKiBtZWFucyBubyBwcmVsb2FkaW5nLlxuICogQHByb3BlcnR5IHtUaWxlU291cmNlVHlwZX0gW3NvdXJjZV0gU291cmNlIGZvciB0aGlzIGxheWVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gW21hcF0gU2V0cyB0aGUgbGF5ZXIgYXMgb3ZlcmxheSBvbiBhIG1hcC4gVGhlIG1hcCB3aWxsIG5vdCBtYW5hZ2VcbiAqIHRoaXMgbGF5ZXIgaW4gaXRzIGxheWVycyBjb2xsZWN0aW9uLCBhbmQgdGhlIGxheWVyIHdpbGwgYmUgcmVuZGVyZWQgb24gdG9wLiBUaGlzIGlzIHVzZWZ1bCBmb3JcbiAqIHRlbXBvcmFyeSBsYXllcnMuIFRoZSBzdGFuZGFyZCB3YXkgdG8gYWRkIGEgbGF5ZXIgdG8gYSBtYXAgYW5kIGhhdmUgaXQgbWFuYWdlZCBieSB0aGUgbWFwIGlzIHRvXG4gKiB1c2Uge0BsaW5rIGltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0I2FkZExheWVyIG1hcC5hZGRMYXllcigpfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUludGVyaW1UaWxlc09uRXJyb3I9dHJ1ZV0gVXNlIGludGVyaW0gdGlsZXMgb24gZXJyb3IuXG4gKiBAcHJvcGVydHkge09iamVjdDxzdHJpbmcsICo+fSBbcHJvcGVydGllc10gQXJiaXRyYXJ5IG9ic2VydmFibGUgcHJvcGVydGllcy4gQ2FuIGJlIGFjY2Vzc2VkIHdpdGggYCNnZXQoKWAgYW5kIGAjc2V0KClgLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEZvciBsYXllciBzb3VyY2VzIHRoYXQgcHJvdmlkZSBwcmUtcmVuZGVyZWQsIHRpbGVkIGltYWdlcyBpbiBncmlkcyB0aGF0IGFyZVxuICogb3JnYW5pemVkIGJ5IHpvb20gbGV2ZWxzIGZvciBzcGVjaWZpYyByZXNvbHV0aW9ucy5cbiAqIE5vdGUgdGhhdCBhbnkgcHJvcGVydHkgc2V0IGluIHRoZSBvcHRpb25zIGlzIHNldCBhcyBhIHtAbGluayBtb2R1bGU6b2wvT2JqZWN0fkJhc2VPYmplY3R9XG4gKiBwcm9wZXJ0eSBvbiB0aGUgbGF5ZXIgb2JqZWN0OyBmb3IgZXhhbXBsZSwgc2V0dGluZyBgdGl0bGU6ICdNeSBUaXRsZSdgIGluIHRoZVxuICogb3B0aW9ucyBtZWFucyB0aGF0IGB0aXRsZWAgaXMgb2JzZXJ2YWJsZSwgYW5kIGhhcyBnZXQvc2V0IGFjY2Vzc29ycy5cbiAqXG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGVTb3VyY2VUeXBlXG4gKiBAZXh0ZW5kcyB7TGF5ZXI8VGlsZVNvdXJjZVR5cGU+fVxuICogQGFwaVxuICovXG52YXIgQmFzZVRpbGVMYXllciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZVRpbGVMYXllciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnM8VGlsZVNvdXJjZVR5cGU+fSBbb3B0X29wdGlvbnNdIFRpbGUgbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBCYXNlVGlsZUxheWVyKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgYmFzZU9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdGlvbnMpO1xuICAgICAgICBkZWxldGUgYmFzZU9wdGlvbnMucHJlbG9hZDtcbiAgICAgICAgZGVsZXRlIGJhc2VPcHRpb25zLnVzZUludGVyaW1UaWxlc09uRXJyb3I7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgYmFzZU9wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0Jhc2VUaWxlTGF5ZXJPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlVGlsZUxheWVyT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtCYXNlVGlsZUxheWVyT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgX3RoaXMuc2V0UHJlbG9hZChvcHRpb25zLnByZWxvYWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucHJlbG9hZCA6IDApO1xuICAgICAgICBfdGhpcy5zZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yKG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvciAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMudXNlSW50ZXJpbVRpbGVzT25FcnJvclxuICAgICAgICAgICAgOiB0cnVlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGxldmVsIGFzIG51bWJlciB0byB3aGljaCB3ZSB3aWxsIHByZWxvYWQgdGlsZXMgdXAgdG8uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbGV2ZWwgdG8gcHJlbG9hZCB0aWxlcyB1cCB0by5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5nZXRQcmVsb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuUFJFTE9BRCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsZXZlbCBhcyBudW1iZXIgdG8gd2hpY2ggd2Ugd2lsbCBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmVsb2FkIFRoZSBsZXZlbCB0byBwcmVsb2FkIHRpbGVzIHVwIHRvLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLnNldFByZWxvYWQgPSBmdW5jdGlvbiAocHJlbG9hZCkge1xuICAgICAgICB0aGlzLnNldChUaWxlUHJvcGVydHkuUFJFTE9BRCwgcHJlbG9hZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHdlIHVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJhc2VUaWxlTGF5ZXIucHJvdG90eXBlLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovICh0aGlzLmdldChUaWxlUHJvcGVydHkuVVNFX0lOVEVSSU1fVElMRVNfT05fRVJST1IpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHdlIHVzZSBpbnRlcmltIHRpbGVzIG9uIGVycm9yLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlSW50ZXJpbVRpbGVzT25FcnJvciBVc2UgaW50ZXJpbSB0aWxlcyBvbiBlcnJvci5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCYXNlVGlsZUxheWVyLnByb3RvdHlwZS5zZXRVc2VJbnRlcmltVGlsZXNPbkVycm9yID0gZnVuY3Rpb24gKHVzZUludGVyaW1UaWxlc09uRXJyb3IpIHtcbiAgICAgICAgdGhpcy5zZXQoVGlsZVByb3BlcnR5LlVTRV9JTlRFUklNX1RJTEVTX09OX0VSUk9SLCB1c2VJbnRlcmltVGlsZXNPbkVycm9yKTtcbiAgICB9O1xuICAgIHJldHVybiBCYXNlVGlsZUxheWVyO1xufShMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgQmFzZVRpbGVMYXllcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUJhc2VUaWxlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvTGF5ZXJcbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZVN0YXRlIGZyb20gJy4uL0ltYWdlU3RhdGUuanMnO1xuaW1wb3J0IE9ic2VydmFibGUgZnJvbSAnLi4vT2JzZXJ2YWJsZS5qcyc7XG5pbXBvcnQgU291cmNlU3RhdGUgZnJvbSAnLi4vc291cmNlL1N0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG4vKipcbiAqIEB0ZW1wbGF0ZSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gTGF5ZXJUeXBlXG4gKi9cbnZhciBMYXllclJlbmRlcmVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYXllclJlbmRlcmVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TGF5ZXJUeXBlfSBsYXllciBMYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMYXllclJlbmRlcmVyKGxheWVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZUltYWdlQ2hhbmdlXyA9IF90aGlzLmhhbmRsZUltYWdlQ2hhbmdlXy5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0xheWVyVHlwZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyXyA9IGxheWVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3JlbmRlci9jYW52YXMvRXhlY3V0b3JHcm91cFwiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVjbHV0dGVyRXhlY3V0b3JHcm91cCA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzIGxheWVyIGxldmVsIGhpdCBkZXRlY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHJldHVybiB7UHJvbWlzZTxBcnJheTxpbXBvcnQoXCIuLi9GZWF0dXJlXCIpLmRlZmF1bHQ+Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGhcbiAgICAgKiBhbiBhcnJheSBvZiBmZWF0dXJlcy5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVybWluZSB3aGV0aGVyIHJlbmRlciBzaG91bGQgYmUgY2FsbGVkLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gTGF5ZXIgaXMgcmVhZHkgdG8gYmUgcmVuZGVyZWQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIGxheWVyLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0IFRhcmdldCB0aGF0IG1heSBiZSB1c2VkIHRvIHJlbmRlciBjb250ZW50IHRvLlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fSBUaGUgcmVuZGVyZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdD4+fSB0aWxlcyBMb29rdXAgb2YgbG9hZGVkIHRpbGVzIGJ5IHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dm9pZH0gSWYgYGZhbHNlYCwgdGhlIHRpbGUgd2lsbCBub3QgYmUgY29uc2lkZXJlZCBsb2FkZWQuXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZGVkVGlsZUNhbGxiYWNrID0gZnVuY3Rpb24gKHRpbGVzLCB6b29tLCB0aWxlKSB7XG4gICAgICAgIGlmICghdGlsZXNbem9vbV0pIHtcbiAgICAgICAgICAgIHRpbGVzW3pvb21dID0ge307XG4gICAgICAgIH1cbiAgICAgICAgdGlsZXNbem9vbV1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgZnVuY3Rpb24gdGhhdCBhZGRzIGxvYWRlZCB0aWxlcyB0byB0aGUgdGlsZSBsb29rdXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBzb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uIG9mIHRoZSB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge09iamVjdDxudW1iZXIsIE9iamVjdDxzdHJpbmcsIGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdD4+fSB0aWxlcyBMb29rdXAgb2YgbG9hZGVkIHRpbGVzIGJ5IHpvb20gbGV2ZWwuXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gQSBmdW5jdGlvbiB0aGF0IGNhbiBiZVxuICAgICAqICAgICBjYWxsZWQgd2l0aCBhIHpvb20gbGV2ZWwgYW5kIGEgdGlsZSByYW5nZSB0byBhZGQgbG9hZGVkIHRpbGVzIHRvIHRoZSBsb29rdXAuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIgPSBmdW5jdGlvbiAoc291cmNlLCBwcm9qZWN0aW9uLCB0aWxlcykge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHpvb20gWm9vbSBsZXZlbC5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIHJhbmdlIGlzIGZ1bGx5IGxvYWRlZC5cbiAgICAgICAgICogQHRoaXMge0xheWVyUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoem9vbSwgdGlsZVJhbmdlKSB7XG4gICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSB0aGlzLmxvYWRlZFRpbGVDYWxsYmFjay5iaW5kKHRoaXMsIHRpbGVzLCB6b29tKTtcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2UuZm9yRWFjaExvYWRlZFRpbGUocHJvamVjdGlvbiwgem9vbSwgdGlsZVJhbmdlLCBjYWxsYmFjayk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vTWFwLmpzXCIpLkhpdE1hdGNoPFQ+Pn0gbWF0Y2hlcyBUaGUgaGl0IGRldGVjdGVkIG1hdGNoZXMgd2l0aCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIG1hdGNoZXMpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGl0VG9sZXJhbmNlIEhpdCB0b2xlcmFuY2UgaW4gcGl4ZWxzLlxuICAgICAqIEByZXR1cm4ge1VpbnQ4Q2xhbXBlZEFycmF5fFVpbnQ4QXJyYXl9IFRoZSByZXN1bHQuICBJZiB0aGVyZSBpcyBubyBkYXRhIGF0IHRoZSBwaXhlbFxuICAgICAqICAgIGxvY2F0aW9uLCBudWxsIHdpbGwgYmUgcmV0dXJuZWQuICBJZiB0aGVyZSBpcyBkYXRhLCBidXQgcGl4ZWwgdmFsdWVzIGNhbm5vdCBiZVxuICAgICAqICAgIHJldHVybmVkLCBhbmQgZW1wdHkgYXJyYXkgd2lsbCBiZSByZXR1cm5lZC5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXREYXRhQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7TGF5ZXJUeXBlfSBMYXllci5cbiAgICAgKi9cbiAgICBMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhY3Rpb24gbmVjZXNzYXJ5IHRvIGdldCB0aGUgbGF5ZXIgcmVuZGVyZWQgYWZ0ZXIgbmV3IGZvbnRzIGhhdmUgbG9hZGVkXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuaGFuZGxlRm9udHNDaGFuZ2VkID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBjaGFuZ2VzIGluIGltYWdlIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEltYWdlIGNoYW5nZSBldmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyUmVuZGVyZXIucHJvdG90eXBlLmhhbmRsZUltYWdlQ2hhbmdlXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgaW1hZ2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL0ltYWdlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICBpZiAoaW1hZ2UuZ2V0U3RhdGUoKSA9PT0gSW1hZ2VTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVySWZSZWFkeUFuZFZpc2libGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCB0aGUgaW1hZ2UgaWYgbm90IGFscmVhZHkgbG9hZGVkLCBhbmQgcmVnaXN0ZXIgdGhlIGltYWdlIGNoYW5nZVxuICAgICAqIGxpc3RlbmVyIGlmIG5lZWRlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0ltYWdlQmFzZS5qc1wiKS5kZWZhdWx0fSBpbWFnZSBJbWFnZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGltYWdlIGlzIGFscmVhZHkgbG9hZGVkLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZEltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHZhciBpbWFnZVN0YXRlID0gaW1hZ2UuZ2V0U3RhdGUoKTtcbiAgICAgICAgaWYgKGltYWdlU3RhdGUgIT0gSW1hZ2VTdGF0ZS5MT0FERUQgJiYgaW1hZ2VTdGF0ZSAhPSBJbWFnZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICBpbWFnZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuYm91bmRIYW5kbGVJbWFnZUNoYW5nZV8pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbWFnZVN0YXRlID09IEltYWdlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgaW1hZ2UubG9hZCgpO1xuICAgICAgICAgICAgaW1hZ2VTdGF0ZSA9IGltYWdlLmdldFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGltYWdlU3RhdGUgPT0gSW1hZ2VTdGF0ZS5MT0FERUQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucmVuZGVySWZSZWFkeUFuZFZpc2libGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgaWYgKGxheWVyLmdldFZpc2libGUoKSAmJiBsYXllci5nZXRTb3VyY2VTdGF0ZSgpID09IFNvdXJjZVN0YXRlLlJFQURZKSB7XG4gICAgICAgICAgICBsYXllci5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBMYXllclJlbmRlcmVyO1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBMYXllclJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGF5ZXIuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlU3RhdGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgSURMRTogMCxcbiAgICBMT0FESU5HOiAxLFxuICAgIExPQURFRDogMixcbiAgICBFUlJPUjogMyxcbiAgICBFTVBUWTogNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JbWFnZVN0YXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXIvRXZlbnRcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xudmFyIFJlbmRlckV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSZW5kZXJFdmVudCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IFtvcHRfaW52ZXJzZVBpeGVsVHJhbnNmb3JtXSBUcmFuc2Zvcm0gZm9yXG4gICAgICogICAgIENTUyBwaXhlbHMgdG8gcmVuZGVyZWQgcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IFtvcHRfZnJhbWVTdGF0ZV0gRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHs/Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBbb3B0X2NvbnRleHRdIENvbnRleHQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVuZGVyRXZlbnQodHlwZSwgb3B0X2ludmVyc2VQaXhlbFRyYW5zZm9ybSwgb3B0X2ZyYW1lU3RhdGUsIG9wdF9jb250ZXh0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcmFuc2Zvcm0gZnJvbSBDU1MgcGl4ZWxzIChyZWxhdGl2ZSB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBtYXAgdmlld3BvcnQpXG4gICAgICAgICAqIHRvIHJlbmRlcmVkIHBpeGVscyBvbiB0aGlzIGV2ZW50J3MgYGNvbnRleHRgLiBPbmx5IGF2YWlsYWJsZSB3aGVuIGEgQ2FudmFzIHJlbmRlcmVyIGlzIHVzZWQsIG51bGwgb3RoZXJ3aXNlLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybXx1bmRlZmluZWR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSA9IG9wdF9pbnZlcnNlUGl4ZWxUcmFuc2Zvcm07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHJlbmRlciBmcmFtZSBzdGF0ZS5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVTdGF0ZSA9IG9wdF9mcmFtZVN0YXRlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FudmFzIGNvbnRleHQuIE5vdCBhdmFpbGFibGUgd2hlbiB0aGUgZXZlbnQgaXMgZGlzcGF0Y2hlZCBieSB0aGUgbWFwLiBPbmx5IGF2YWlsYWJsZVxuICAgICAgICAgKiB3aGVuIGEgQ2FudmFzIHJlbmRlcmVyIGlzIHVzZWQsIG51bGwgb3RoZXJ3aXNlLlxuICAgICAgICAgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfG51bGx8dW5kZWZpbmVkfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0ID0gb3B0X2NvbnRleHQ7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFJlbmRlckV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IGRlZmF1bHQgUmVuZGVyRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvaGFzXG4gKi9cbnZhciB1YSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBuYXZpZ2F0b3IudXNlckFnZW50ICE9PSAndW5kZWZpbmVkJ1xuICAgID8gbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpXG4gICAgOiAnJztcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIEZpcmVmb3ggYXMgYnJvd3Nlci5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIEZJUkVGT1ggPSB1YS5pbmRleE9mKCdmaXJlZm94JykgIT09IC0xO1xuLyoqXG4gKiBVc2VyIGFnZW50IHN0cmluZyBzYXlzIHdlIGFyZSBkZWFsaW5nIHdpdGggU2FmYXJpIGFzIGJyb3dzZXIuXG4gKiBAdHlwZSB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IHZhciBTQUZBUkkgPSB1YS5pbmRleE9mKCdzYWZhcmknKSAhPT0gLTEgJiYgdWEuaW5kZXhPZignY2hyb20nKSA9PSAtMTtcbi8qKlxuICogVXNlciBhZ2VudCBzdHJpbmcgc2F5cyB3ZSBhcmUgZGVhbGluZyB3aXRoIGEgV2ViS2l0IGVuZ2luZS5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFdFQktJVCA9IHVhLmluZGV4T2YoJ3dlYmtpdCcpICE9PSAtMSAmJiB1YS5pbmRleE9mKCdlZGdlJykgPT0gLTE7XG4vKipcbiAqIFVzZXIgYWdlbnQgc3RyaW5nIHNheXMgd2UgYXJlIGRlYWxpbmcgd2l0aCBhIE1hYyBhcyBwbGF0Zm9ybS5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIE1BQyA9IHVhLmluZGV4T2YoJ21hY2ludG9zaCcpICE9PSAtMTtcbi8qKlxuICogVGhlIHJhdGlvIGJldHdlZW4gcGh5c2ljYWwgcGl4ZWxzIGFuZCBkZXZpY2UtaW5kZXBlbmRlbnQgcGl4ZWxzXG4gKiAoZGlwcykgb24gdGhlIGRldmljZSAoYHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvYCkuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgREVWSUNFX1BJWEVMX1JBVElPID0gdHlwZW9mIGRldmljZVBpeGVsUmF0aW8gIT09ICd1bmRlZmluZWQnID8gZGV2aWNlUGl4ZWxSYXRpbyA6IDE7XG4vKipcbiAqIFRoZSBleGVjdXRpb24gY29udGV4dCBpcyBhIHdvcmtlciB3aXRoIE9mZnNjcmVlbkNhbnZhcyBhdmFpbGFibGUuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTID0gdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBPZmZzY3JlZW5DYW52YXMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlOyAvL2VzbGludC1kaXNhYmxlLWxpbmVcbi8qKlxuICogSW1hZ2UucHJvdG90eXBlLmRlY29kZSgpIGlzIHN1cHBvcnRlZC5cbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIElNQUdFX0RFQ09ERSA9IHR5cGVvZiBJbWFnZSAhPT0gJ3VuZGVmaW5lZCcgJiYgSW1hZ2UucHJvdG90eXBlLmRlY29kZTtcbi8qKlxuICogQHR5cGUge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCB2YXIgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBwYXNzaXZlID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcGFzc2l2ZSA9IHRydWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ18nLCBudWxsLCBvcHRpb25zKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ18nLCBudWxsLCBvcHRpb25zKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vIHBhc3NpdmUgbm90IHN1cHBvcnRlZFxuICAgIH1cbiAgICByZXR1cm4gcGFzc2l2ZTtcbn0pKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1oYXMuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RyYW5zZm9ybVxuICovXG5pbXBvcnQgeyBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUyB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IHJlcHJlc2VudGluZyBhbiBhZmZpbmUgMmQgdHJhbnNmb3JtYXRpb24gZm9yIHVzZSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3RyYW5zZm9ybX0gZnVuY3Rpb25zLiBUaGUgYXJyYXkgaGFzIDYgZWxlbWVudHMuXG4gKiBAdHlwZWRlZiB7IUFycmF5PG51bWJlcj59IFRyYW5zZm9ybVxuICogQGFwaVxuICovXG4vKipcbiAqIENvbGxlY3Rpb24gb2YgYWZmaW5lIDJkIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucy4gVGhlIGZ1bmN0aW9ucyB3b3JrIG9uIGFuXG4gKiBhcnJheSBvZiA2IGVsZW1lbnRzLiBUaGUgZWxlbWVudCBvcmRlciBpcyBjb21wYXRpYmxlIHdpdGggdGhlIFtTVkdNYXRyaXhcbiAqIGludGVyZmFjZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NWR01hdHJpeCkgYW5kIGlzXG4gKiBhIHN1YnNldCAoZWxlbWVudHMgYSB0byBmKSBvZiBhIDPDlzMgbWF0cml4OlxuICogYGBgXG4gKiBbIGEgYyBlIF1cbiAqIFsgYiBkIGYgXVxuICogWyAwIDAgMSBdXG4gKiBgYGBcbiAqL1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge1RyYW5zZm9ybX1cbiAqL1xudmFyIHRtcF8gPSBuZXcgQXJyYXkoNik7XG4vKipcbiAqIENyZWF0ZSBhbiBpZGVudGl0eSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBJZGVudGl0eSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgcmV0dXJuIFsxLCAwLCAwLCAxLCAwLCAwXTtcbn1cbi8qKlxuICogUmVzZXRzIHRoZSBnaXZlbiB0cmFuc2Zvcm0gdG8gYW4gaWRlbnRpdHkgdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXQodHJhbnNmb3JtKSB7XG4gICAgcmV0dXJuIHNldCh0cmFuc2Zvcm0sIDEsIDAsIDAsIDEsIDAsIDApO1xufVxuLyoqXG4gKiBNdWx0aXBseSB0aGUgdW5kZXJseWluZyBtYXRyaWNlcyBvZiB0d28gdHJhbnNmb3JtcyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgaW5cbiAqIHRoZSBmaXJzdCB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTEgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDEuXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybTIgVHJhbnNmb3JtIHBhcmFtZXRlcnMgb2YgbWF0cml4IDIuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0xIG11bHRpcGxpZWQgd2l0aCB0cmFuc2Zvcm0yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbXVsdGlwbHkodHJhbnNmb3JtMSwgdHJhbnNmb3JtMikge1xuICAgIHZhciBhMSA9IHRyYW5zZm9ybTFbMF07XG4gICAgdmFyIGIxID0gdHJhbnNmb3JtMVsxXTtcbiAgICB2YXIgYzEgPSB0cmFuc2Zvcm0xWzJdO1xuICAgIHZhciBkMSA9IHRyYW5zZm9ybTFbM107XG4gICAgdmFyIGUxID0gdHJhbnNmb3JtMVs0XTtcbiAgICB2YXIgZjEgPSB0cmFuc2Zvcm0xWzVdO1xuICAgIHZhciBhMiA9IHRyYW5zZm9ybTJbMF07XG4gICAgdmFyIGIyID0gdHJhbnNmb3JtMlsxXTtcbiAgICB2YXIgYzIgPSB0cmFuc2Zvcm0yWzJdO1xuICAgIHZhciBkMiA9IHRyYW5zZm9ybTJbM107XG4gICAgdmFyIGUyID0gdHJhbnNmb3JtMls0XTtcbiAgICB2YXIgZjIgPSB0cmFuc2Zvcm0yWzVdO1xuICAgIHRyYW5zZm9ybTFbMF0gPSBhMSAqIGEyICsgYzEgKiBiMjtcbiAgICB0cmFuc2Zvcm0xWzFdID0gYjEgKiBhMiArIGQxICogYjI7XG4gICAgdHJhbnNmb3JtMVsyXSA9IGExICogYzIgKyBjMSAqIGQyO1xuICAgIHRyYW5zZm9ybTFbM10gPSBiMSAqIGMyICsgZDEgKiBkMjtcbiAgICB0cmFuc2Zvcm0xWzRdID0gYTEgKiBlMiArIGMxICogZjIgKyBlMTtcbiAgICB0cmFuc2Zvcm0xWzVdID0gYjEgKiBlMiArIGQxICogZjIgKyBmMTtcbiAgICByZXR1cm4gdHJhbnNmb3JtMTtcbn1cbi8qKlxuICogU2V0IHRoZSB0cmFuc2Zvcm0gY29tcG9uZW50cyBhLWYgb24gYSBnaXZlbiB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0geyFUcmFuc2Zvcm19IHRyYW5zZm9ybSBUcmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gYSBUaGUgYSBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiIFRoZSBiIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGMgVGhlIGMgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcGFyYW0ge251bWJlcn0gZCBUaGUgZCBjb21wb25lbnQgb2YgdGhlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlIFRoZSBlIGNvbXBvbmVudCBvZiB0aGUgdHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGYgVGhlIGYgY29tcG9uZW50IG9mIHRoZSB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBNYXRyaXggd2l0aCB0cmFuc2Zvcm0gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldCh0cmFuc2Zvcm0sIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgICB0cmFuc2Zvcm1bMF0gPSBhO1xuICAgIHRyYW5zZm9ybVsxXSA9IGI7XG4gICAgdHJhbnNmb3JtWzJdID0gYztcbiAgICB0cmFuc2Zvcm1bM10gPSBkO1xuICAgIHRyYW5zZm9ybVs0XSA9IGU7XG4gICAgdHJhbnNmb3JtWzVdID0gZjtcbiAgICByZXR1cm4gdHJhbnNmb3JtO1xufVxuLyoqXG4gKiBTZXQgdHJhbnNmb3JtIG9uIG9uZSBtYXRyaXggZnJvbSBhbm90aGVyIG1hdHJpeC5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSB0by5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMiBNYXRyaXggdG8gc2V0IHRyYW5zZm9ybSBmcm9tLlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtMSB3aXRoIHRyYW5zZm9ybSBmcm9tIHRyYW5zZm9ybTIgYXBwbGllZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEZyb21BcnJheSh0cmFuc2Zvcm0xLCB0cmFuc2Zvcm0yKSB7XG4gICAgdHJhbnNmb3JtMVswXSA9IHRyYW5zZm9ybTJbMF07XG4gICAgdHJhbnNmb3JtMVsxXSA9IHRyYW5zZm9ybTJbMV07XG4gICAgdHJhbnNmb3JtMVsyXSA9IHRyYW5zZm9ybTJbMl07XG4gICAgdHJhbnNmb3JtMVszXSA9IHRyYW5zZm9ybTJbM107XG4gICAgdHJhbnNmb3JtMVs0XSA9IHRyYW5zZm9ybTJbNF07XG4gICAgdHJhbnNmb3JtMVs1XSA9IHRyYW5zZm9ybTJbNV07XG4gICAgcmV0dXJuIHRyYW5zZm9ybTE7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIGNvb3JkaW5hdGUgd2l0aCB0aGUgZ2l2ZW4gdHJhbnNmb3JtIHJldHVybmluZyB0aGVcbiAqIHJlc3VsdGluZywgdHJhbnNmb3JtZWQgY29vcmRpbmF0ZS4gVGhlIGNvb3JkaW5hdGUgd2lsbCBiZSBtb2RpZmllZCBpbi1wbGFjZS5cbiAqXG4gKiBAcGFyYW0ge1RyYW5zZm9ybX0gdHJhbnNmb3JtIFRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gY29vcmRpbmF0ZSBUaGUgY29vcmRpbmF0ZSB0byB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXxpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSByZXR1cm4gY29vcmRpbmF0ZSBzbyB0aGF0IG9wZXJhdGlvbnMgY2FuIGJlXG4gKiAgICAgY2hhaW5lZCB0b2dldGhlci5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5KHRyYW5zZm9ybSwgY29vcmRpbmF0ZSkge1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgY29vcmRpbmF0ZVswXSA9IHRyYW5zZm9ybVswXSAqIHggKyB0cmFuc2Zvcm1bMl0gKiB5ICsgdHJhbnNmb3JtWzRdO1xuICAgIGNvb3JkaW5hdGVbMV0gPSB0cmFuc2Zvcm1bMV0gKiB4ICsgdHJhbnNmb3JtWzNdICogeSArIHRyYW5zZm9ybVs1XTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogQXBwbGllcyByb3RhdGlvbiB0byB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlIGluIHJhZGlhbnMuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgcm90YXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUodHJhbnNmb3JtLCBhbmdsZSkge1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgY29zLCBzaW4sIC1zaW4sIGNvcywgMCwgMCkpO1xufVxuLyoqXG4gKiBBcHBsaWVzIHNjYWxlIHRvIGEgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtudW1iZXJ9IHggU2NhbGUgZmFjdG9yIHguXG4gKiBAcGFyYW0ge251bWJlcn0geSBTY2FsZSBmYWN0b3IgeS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBzY2FsZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUodHJhbnNmb3JtLCB4LCB5KSB7XG4gICAgcmV0dXJuIG11bHRpcGx5KHRyYW5zZm9ybSwgc2V0KHRtcF8sIHgsIDAsIDAsIHksIDAsIDApKTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIHNjYWxlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBvdmVyd3JpdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBTY2FsZSBmYWN0b3IgeC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFNjYWxlIGZhY3RvciB5LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIHNjYWxlIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTY2FsZSh0YXJnZXQsIHgsIHkpIHtcbiAgICByZXR1cm4gc2V0KHRhcmdldCwgeCwgMCwgMCwgeSwgMCwgMCk7XG59XG4vKipcbiAqIEFwcGxpZXMgdHJhbnNsYXRpb24gdG8gdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeCBUcmFuc2xhdGlvbiB4LlxuICogQHBhcmFtIHtudW1iZXJ9IGR5IFRyYW5zbGF0aW9uIHkuXG4gKiBAcmV0dXJuIHshVHJhbnNmb3JtfSBUaGUgdHJhbnNsYXRlZCB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUodHJhbnNmb3JtLCBkeCwgZHkpIHtcbiAgICByZXR1cm4gbXVsdGlwbHkodHJhbnNmb3JtLCBzZXQodG1wXywgMSwgMCwgMCwgMSwgZHgsIGR5KSk7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVGhlIHRyYW5zZm9ybSAod2lsbCBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBjb21wb3NpdGUgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZSh0cmFuc2Zvcm0sIGR4MSwgZHkxLCBzeCwgc3ksIGFuZ2xlLCBkeDIsIGR5Mikge1xuICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKTtcbiAgICB0cmFuc2Zvcm1bMF0gPSBzeCAqIGNvcztcbiAgICB0cmFuc2Zvcm1bMV0gPSBzeSAqIHNpbjtcbiAgICB0cmFuc2Zvcm1bMl0gPSAtc3ggKiBzaW47XG4gICAgdHJhbnNmb3JtWzNdID0gc3kgKiBjb3M7XG4gICAgdHJhbnNmb3JtWzRdID0gZHgyICogc3ggKiBjb3MgLSBkeTIgKiBzeCAqIHNpbiArIGR4MTtcbiAgICB0cmFuc2Zvcm1bNV0gPSBkeDIgKiBzeSAqIHNpbiArIGR5MiAqIHN5ICogY29zICsgZHkxO1xuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIENyZWF0ZXMgYSBjb21wb3NpdGUgdHJhbnNmb3JtIGdpdmVuIGFuIGluaXRpYWwgdHJhbnNsYXRpb24sIHNjYWxlLCByb3RhdGlvbiwgYW5kXG4gKiBmaW5hbCB0cmFuc2xhdGlvbiAoaW4gdGhhdCBvcmRlciBvbmx5LCBub3QgY29tbXV0YXRpdmUpLiBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybVxuICogc3RyaW5nIGNhbiBiZSBhcHBsaWVkIGFzIGB0cmFuc2Zvcm1gIHByb3BlcnR5IG9mIGFuIEhUTUxFbGVtZW50J3Mgc3R5bGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZHgxIEluaXRpYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTEgSW5pdGlhbCB0cmFuc2xhdGlvbiB5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN4IFNjYWxlIGZhY3RvciB4LlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciB5LlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIFJvdGF0aW9uIChpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeDIgRmluYWwgdHJhbnNsYXRpb24geC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkeTIgRmluYWwgdHJhbnNsYXRpb24geS5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXBvc2l0ZSBjc3MgdHJhbnNmb3JtLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcG9zZUNzc1RyYW5zZm9ybShkeDEsIGR5MSwgc3gsIHN5LCBhbmdsZSwgZHgyLCBkeTIpIHtcbiAgICByZXR1cm4gdG9TdHJpbmcoY29tcG9zZShjcmVhdGUoKSwgZHgxLCBkeTEsIHN4LCBzeSwgYW5nbGUsIGR4MiwgZHkyKSk7XG59XG4vKipcbiAqIEludmVydCB0aGUgZ2l2ZW4gdHJhbnNmb3JtLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBzb3VyY2UgVGhlIHNvdXJjZSB0cmFuc2Zvcm0gdG8gaW52ZXJ0LlxuICogQHJldHVybiB7IVRyYW5zZm9ybX0gVGhlIGludmVydGVkIChzb3VyY2UpIHRyYW5zZm9ybS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludmVydChzb3VyY2UpIHtcbiAgICByZXR1cm4gbWFrZUludmVyc2Uoc291cmNlLCBzb3VyY2UpO1xufVxuLyoqXG4gKiBJbnZlcnQgdGhlIGdpdmVuIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gdGFyZ2V0IFRyYW5zZm9ybSB0byBiZSBzZXQgYXMgdGhlIGludmVyc2Ugb2ZcbiAqICAgICB0aGUgc291cmNlIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7IVRyYW5zZm9ybX0gc291cmNlIFRoZSBzb3VyY2UgdHJhbnNmb3JtIHRvIGludmVydC5cbiAqIEByZXR1cm4geyFUcmFuc2Zvcm19IFRoZSBpbnZlcnRlZCAodGFyZ2V0KSB0cmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYWtlSW52ZXJzZSh0YXJnZXQsIHNvdXJjZSkge1xuICAgIHZhciBkZXQgPSBkZXRlcm1pbmFudChzb3VyY2UpO1xuICAgIGFzc2VydChkZXQgIT09IDAsIDMyKTsgLy8gVHJhbnNmb3JtYXRpb24gbWF0cml4IGNhbm5vdCBiZSBpbnZlcnRlZFxuICAgIHZhciBhID0gc291cmNlWzBdO1xuICAgIHZhciBiID0gc291cmNlWzFdO1xuICAgIHZhciBjID0gc291cmNlWzJdO1xuICAgIHZhciBkID0gc291cmNlWzNdO1xuICAgIHZhciBlID0gc291cmNlWzRdO1xuICAgIHZhciBmID0gc291cmNlWzVdO1xuICAgIHRhcmdldFswXSA9IGQgLyBkZXQ7XG4gICAgdGFyZ2V0WzFdID0gLWIgLyBkZXQ7XG4gICAgdGFyZ2V0WzJdID0gLWMgLyBkZXQ7XG4gICAgdGFyZ2V0WzNdID0gYSAvIGRldDtcbiAgICB0YXJnZXRbNF0gPSAoYyAqIGYgLSBkICogZSkgLyBkZXQ7XG4gICAgdGFyZ2V0WzVdID0gLShhICogZiAtIGIgKiBlKSAvIGRldDtcbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkZXRlcm1pbmFudCBvZiB0aGUgZ2l2ZW4gbWF0cml4LlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7bnVtYmVyfSBEZXRlcm1pbmFudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVybWluYW50KG1hdCkge1xuICAgIHJldHVybiBtYXRbMF0gKiBtYXRbM10gLSBtYXRbMV0gKiBtYXRbMl07XG59XG4vKipcbiAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB0cmFuc2Zvcm1TdHJpbmdEaXY7XG4vKipcbiAqIEEgcm91bmRlZCBzdHJpbmcgdmVyc2lvbiBvZiB0aGUgdHJhbnNmb3JtLiAgVGhpcyBjYW4gYmUgdXNlZFxuICogZm9yIENTUyB0cmFuc2Zvcm1zLlxuICogQHBhcmFtIHshVHJhbnNmb3JtfSBtYXQgTWF0cml4LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdHJhbnNmb3JtIGFzIGEgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJpbmcobWF0KSB7XG4gICAgdmFyIHRyYW5zZm9ybVN0cmluZyA9ICdtYXRyaXgoJyArIG1hdC5qb2luKCcsICcpICsgJyknO1xuICAgIGlmIChXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBUykge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtU3RyaW5nO1xuICAgIH1cbiAgICB2YXIgbm9kZSA9IHRyYW5zZm9ybVN0cmluZ0RpdiB8fCAodHJhbnNmb3JtU3RyaW5nRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykpO1xuICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtU3RyaW5nO1xuICAgIHJldHVybiBub2RlLnN0eWxlLnRyYW5zZm9ybTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRyYW5zZm9ybS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50L0Nvcm5lclxuICovXG4vKipcbiAqIEV4dGVudCBjb3JuZXIuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQk9UVE9NX0xFRlQ6ICdib3R0b20tbGVmdCcsXG4gICAgQk9UVE9NX1JJR0hUOiAnYm90dG9tLXJpZ2h0JyxcbiAgICBUT1BfTEVGVDogJ3RvcC1sZWZ0JyxcbiAgICBUT1BfUklHSFQ6ICd0b3AtcmlnaHQnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvcm5lci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50XG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBSZWxhdGlvbnNoaXAgZnJvbSAnLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGFuIGV4dGVudDogYFttaW54LCBtaW55LCBtYXh4LCBtYXh5XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gRXh0ZW50XG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQnVpbGQgYW4gZXh0ZW50IHRoYXQgaW5jbHVkZXMgYWxsIGdpdmVuIGNvb3JkaW5hdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0V4dGVudH0gQm91bmRpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYm91bmRpbmdFeHRlbnQoY29vcmRpbmF0ZXMpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0geHMgWHMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHlzIFlzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBEZXN0aW5hdGlvbiBleHRlbnQuXG4gKiBAcHJpdmF0ZVxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmZ1bmN0aW9uIF9ib3VuZGluZ0V4dGVudFhZcyh4cywgeXMsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWluLmFwcGx5KG51bGwsIHhzKTtcbiAgICB2YXIgbWluWSA9IE1hdGgubWluLmFwcGx5KG51bGwsIHlzKTtcbiAgICB2YXIgbWF4WCA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHhzKTtcbiAgICB2YXIgbWF4WSA9IE1hdGgubWF4LmFwcGx5KG51bGwsIHlzKTtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIFJldHVybiBleHRlbnQgaW5jcmVhc2VkIGJ5IHRoZSBwcm92aWRlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFRoZSBhbW91bnQgYnkgd2hpY2ggdGhlIGV4dGVudCBzaG91bGQgYmUgYnVmZmVyZWQuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYnVmZmVyKGV4dGVudCwgdmFsdWUsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdIC0gdmFsdWU7XG4gICAgICAgIG9wdF9leHRlbnRbMV0gPSBleHRlbnRbMV0gLSB2YWx1ZTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IGV4dGVudFsyXSArIHZhbHVlO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdICsgdmFsdWU7XG4gICAgICAgIHJldHVybiBvcHRfZXh0ZW50O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGV4dGVudFswXSAtIHZhbHVlLFxuICAgICAgICAgICAgZXh0ZW50WzFdIC0gdmFsdWUsXG4gICAgICAgICAgICBleHRlbnRbMl0gKyB2YWx1ZSxcbiAgICAgICAgICAgIGV4dGVudFszXSArIHZhbHVlLFxuICAgICAgICBdO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIGNsb25lIG9mIGFuIGV4dGVudC5cbiAqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudCB0byBjbG9uZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBUaGUgY2xvbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShleHRlbnQsIG9wdF9leHRlbnQpIHtcbiAgICBpZiAob3B0X2V4dGVudCkge1xuICAgICAgICBvcHRfZXh0ZW50WzBdID0gZXh0ZW50WzBdO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gZXh0ZW50WzFdO1xuICAgICAgICBvcHRfZXh0ZW50WzJdID0gZXh0ZW50WzJdO1xuICAgICAgICBvcHRfZXh0ZW50WzNdID0gZXh0ZW50WzNdO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBleHRlbnQuc2xpY2UoKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IENsb3Nlc3Qgc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWShleHRlbnQsIHgsIHkpIHtcbiAgICB2YXIgZHgsIGR5O1xuICAgIGlmICh4IDwgZXh0ZW50WzBdKSB7XG4gICAgICAgIGR4ID0gZXh0ZW50WzBdIC0geDtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzJdIDwgeCkge1xuICAgICAgICBkeCA9IHggLSBleHRlbnRbMl07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeCA9IDA7XG4gICAgfVxuICAgIGlmICh5IDwgZXh0ZW50WzFdKSB7XG4gICAgICAgIGR5ID0gZXh0ZW50WzFdIC0geTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXh0ZW50WzNdIDwgeSkge1xuICAgICAgICBkeSA9IHkgLSBleHRlbnRbM107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBkeSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBhc3NlZCBjb29yZGluYXRlIGlzIGNvbnRhaW5lZCBvciBvbiB0aGUgZWRnZSBvZiB0aGUgZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIGluIHRoZSBleHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0Nvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5zWFkoZXh0ZW50LCBjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdKTtcbn1cbi8qKlxuICogQ2hlY2sgaWYgb25lIGV4dGVudCBjb250YWlucyBhbm90aGVyLlxuICpcbiAqIEFuIGV4dGVudCBpcyBkZWVtZWQgY29udGFpbmVkIGlmIGl0IGxpZXMgY29tcGxldGVseSB3aXRoaW4gdGhlIG90aGVyIGV4dGVudCxcbiAqIGluY2x1ZGluZyBpZiB0aGV5IHNoYXJlIG9uZSBvciBtb3JlIGVkZ2VzLlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2Vjb25kIGV4dGVudCBpcyBjb250YWluZWQgYnkgb3Igb24gdGhlIGVkZ2Ugb2YgdGhlXG4gKiAgICAgZmlyc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250YWluc0V4dGVudChleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdIDw9IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MlsyXSA8PSBleHRlbnQxWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPD0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQyWzNdIDw9IGV4dGVudDFbM10pO1xufVxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgaXMgY29udGFpbmVkIG9yIG9uIHRoZSBlZGdlIG9mIHRoZSBleHRlbnQuXG4gKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0geSBZIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgeCwgeSB2YWx1ZXMgYXJlIGNvbnRhaW5lZCBpbiB0aGUgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29udGFpbnNYWShleHRlbnQsIHgsIHkpIHtcbiAgICByZXR1cm4gZXh0ZW50WzBdIDw9IHggJiYgeCA8PSBleHRlbnRbMl0gJiYgZXh0ZW50WzFdIDw9IHkgJiYgeSA8PSBleHRlbnRbM107XG59XG4vKipcbiAqIEdldCB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYSBjb29yZGluYXRlIGFuZCBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IFRoZSBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLmRlZmF1bHR9IFRoZSByZWxhdGlvbnNoaXAgKGJpdHdpc2UgY29tcGFyZSB3aXRoXG4gKiAgICAgaW1wb3J0KFwiLi9leHRlbnQvUmVsYXRpb25zaGlwLmpzXCIpLlJlbGF0aW9uc2hpcCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlUmVsYXRpb25zaGlwKGV4dGVudCwgY29vcmRpbmF0ZSkge1xuICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgIHZhciB4ID0gY29vcmRpbmF0ZVswXTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5VTktOT1dOO1xuICAgIGlmICh4IDwgbWluWCkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuTEVGVDtcbiAgICB9XG4gICAgZWxzZSBpZiAoeCA+IG1heFgpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLlJJR0hUO1xuICAgIH1cbiAgICBpZiAoeSA8IG1pblkpIHtcbiAgICAgICAgcmVsYXRpb25zaGlwID0gcmVsYXRpb25zaGlwIHwgUmVsYXRpb25zaGlwLkJFTE9XO1xuICAgIH1cbiAgICBlbHNlIGlmICh5ID4gbWF4WSkge1xuICAgICAgICByZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXAgfCBSZWxhdGlvbnNoaXAuQUJPVkU7XG4gICAgfVxuICAgIGlmIChyZWxhdGlvbnNoaXAgPT09IFJlbGF0aW9uc2hpcC5VTktOT1dOKSB7XG4gICAgICAgIHJlbGF0aW9uc2hpcCA9IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkc7XG4gICAgfVxuICAgIHJldHVybiByZWxhdGlvbnNoaXA7XG59XG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBleHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEVtcHR5IGV4dGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVtcHR5KCkge1xuICAgIHJldHVybiBbSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eV07XG59XG4vKipcbiAqIENyZWF0ZSBhIG5ldyBleHRlbnQgb3IgdXBkYXRlIHRoZSBwcm92aWRlZCBleHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCkge1xuICAgIGlmIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIG9wdF9leHRlbnRbMF0gPSBtaW5YO1xuICAgICAgICBvcHRfZXh0ZW50WzFdID0gbWluWTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IG1heFg7XG4gICAgICAgIG9wdF9leHRlbnRbM10gPSBtYXhZO1xuICAgICAgICByZXR1cm4gb3B0X2V4dGVudDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV07XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZW1wdHkgZXh0ZW50IG9yIG1ha2UgdGhlIHByb3ZpZGVkIG9uZSBlbXB0eS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpIHtcbiAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUoSW5maW5pdHksIEluZmluaXR5LCAtSW5maW5pdHksIC1JbmZpbml0eSwgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkgPSBjb29yZGluYXRlWzFdO1xuICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZSh4LCB5LCB4LCB5LCBvcHRfZXh0ZW50KTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGVzKGNvb3JkaW5hdGVzLCBvcHRfZXh0ZW50KSB7XG4gICAgdmFyIGV4dGVudCA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkob3B0X2V4dGVudCk7XG4gICAgcmV0dXJuIGV4dGVuZENvb3JkaW5hdGVzKGV4dGVudCwgY29vcmRpbmF0ZXMpO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtFeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlRnJvbUZsYXRDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgZXh0ZW50ID0gY3JlYXRlT3JVcGRhdGVFbXB0eShvcHRfZXh0ZW50KTtcbiAgICByZXR1cm4gZXh0ZW5kRmxhdENvb3JkaW5hdGVzKGV4dGVudCwgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSByaW5ncyBSaW5ncy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRXh0ZW50LlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPclVwZGF0ZUZyb21SaW5ncyhyaW5ncywgb3B0X2V4dGVudCkge1xuICAgIHZhciBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZUVtcHR5KG9wdF9leHRlbnQpO1xuICAgIHJldHVybiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHR3byBleHRlbnRzIGFyZSBlcXVpdmFsZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBhcmUgZXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWFscyhleHRlbnQxLCBleHRlbnQyKSB7XG4gICAgcmV0dXJuIChleHRlbnQxWzBdID09IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MVsyXSA9PSBleHRlbnQyWzJdICYmXG4gICAgICAgIGV4dGVudDFbMV0gPT0gZXh0ZW50MlsxXSAmJlxuICAgICAgICBleHRlbnQxWzNdID09IGV4dGVudDJbM10pO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgdHdvIGV4dGVudHMgYXJlIGFwcHJveGltYXRlbHkgZXF1aXZhbGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQxIEV4dGVudCAxLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDIgRXh0ZW50IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZSBpbiBleHRlbnQgY29vcmRpbmF0ZSB1bml0cy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBkaWZmZXIgYnkgbGVzcyB0aGFuIHRoZSB0b2xlcmFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHByb3hpbWF0ZWx5RXF1YWxzKGV4dGVudDEsIGV4dGVudDIsIHRvbGVyYW5jZSkge1xuICAgIHJldHVybiAoTWF0aC5hYnMoZXh0ZW50MVswXSAtIGV4dGVudDJbMF0pIDwgdG9sZXJhbmNlICYmXG4gICAgICAgIE1hdGguYWJzKGV4dGVudDFbMl0gLSBleHRlbnQyWzJdKSA8IHRvbGVyYW5jZSAmJlxuICAgICAgICBNYXRoLmFicyhleHRlbnQxWzFdIC0gZXh0ZW50MlsxXSkgPCB0b2xlcmFuY2UgJiZcbiAgICAgICAgTWF0aC5hYnMoZXh0ZW50MVszXSAtIGV4dGVudDJbM10pIDwgdG9sZXJhbmNlKTtcbn1cbi8qKlxuICogTW9kaWZ5IGFuIGV4dGVudCB0byBpbmNsdWRlIGFub3RoZXIgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgVGhlIGV4dGVudCB0byBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIFRoZSBleHRlbnQgdGhhdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSBmaXJzdC5cbiAqIEByZXR1cm4ge0V4dGVudH0gQSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IChleHRlbmRlZCkgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICBpZiAoZXh0ZW50MlswXSA8IGV4dGVudDFbMF0pIHtcbiAgICAgICAgZXh0ZW50MVswXSA9IGV4dGVudDJbMF07XG4gICAgfVxuICAgIGlmIChleHRlbnQyWzJdID4gZXh0ZW50MVsyXSkge1xuICAgICAgICBleHRlbnQxWzJdID0gZXh0ZW50MlsyXTtcbiAgICB9XG4gICAgaWYgKGV4dGVudDJbMV0gPCBleHRlbnQxWzFdKSB7XG4gICAgICAgIGV4dGVudDFbMV0gPSBleHRlbnQyWzFdO1xuICAgIH1cbiAgICBpZiAoZXh0ZW50MlszXSA+IGV4dGVudDFbM10pIHtcbiAgICAgICAgZXh0ZW50MVszXSA9IGV4dGVudDJbM107XG4gICAgfVxuICAgIHJldHVybiBleHRlbnQxO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBjb29yZGluYXRlKSB7XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPCBleHRlbnRbMF0pIHtcbiAgICAgICAgZXh0ZW50WzBdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMF0gPiBleHRlbnRbMl0pIHtcbiAgICAgICAgZXh0ZW50WzJdID0gY29vcmRpbmF0ZVswXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPCBleHRlbnRbMV0pIHtcbiAgICAgICAgZXh0ZW50WzFdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVbMV0gPiBleHRlbnRbM10pIHtcbiAgICAgICAgZXh0ZW50WzNdID0gY29vcmRpbmF0ZVsxXTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIGNvb3JkaW5hdGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgY29vcmRpbmF0ZXNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtFeHRlbnR9IEV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZEZsYXRDb29yZGluYXRlcyhleHRlbnQsIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSkge1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgZXh0ZW5kWFkoZXh0ZW50LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IHJpbmdzIFJpbmdzLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmRSaW5ncyhleHRlbnQsIHJpbmdzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gcmluZ3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBleHRlbmRDb29yZGluYXRlcyhleHRlbnQsIHJpbmdzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFhZKGV4dGVudCwgeCwgeSkge1xuICAgIGV4dGVudFswXSA9IE1hdGgubWluKGV4dGVudFswXSwgeCk7XG4gICAgZXh0ZW50WzFdID0gTWF0aC5taW4oZXh0ZW50WzFdLCB5KTtcbiAgICBleHRlbnRbMl0gPSBNYXRoLm1heChleHRlbnRbMl0sIHgpO1xuICAgIGV4dGVudFszXSA9IE1hdGgubWF4KGV4dGVudFszXSwgeSk7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYGNhbGxiYWNrYCBmb3IgZWFjaCBjb3JuZXIgb2YgdGhlIGV4dGVudC4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGEgdHJ1dGh5IHZhbHVlIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoYXQgdmFsdWVcbiAqIGltbWVkaWF0ZWx5LiBPdGhlcndpc2UgdGhlIGZ1bmN0aW9uIHJldHVybnMgYGZhbHNlYC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFN9IGNhbGxiYWNrIENhbGxiYWNrLlxuICogQHJldHVybiB7U3xib29sZWFufSBWYWx1ZS5cbiAqIEB0ZW1wbGF0ZSBTXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JFYWNoQ29ybmVyKGV4dGVudCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdmFsO1xuICAgIHZhbCA9IGNhbGxiYWNrKGdldEJvdHRvbUxlZnQoZXh0ZW50KSk7XG4gICAgaWYgKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH1cbiAgICB2YWwgPSBjYWxsYmFjayhnZXRCb3R0b21SaWdodChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHZhbCA9IGNhbGxiYWNrKGdldFRvcFJpZ2h0KGV4dGVudCkpO1xuICAgIGlmICh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG4gICAgdmFsID0gY2FsbGJhY2soZ2V0VG9wTGVmdChleHRlbnQpKTtcbiAgICBpZiAodmFsKSB7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogR2V0IHRoZSBzaXplIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXJlYShleHRlbnQpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgaWYgKCFpc0VtcHR5KGV4dGVudCkpIHtcbiAgICAgICAgYXJlYSA9IGdldFdpZHRoKGV4dGVudCkgKiBnZXRIZWlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vKipcbiAqIEdldCB0aGUgYm90dG9tIGxlZnQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gbGVmdCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm90dG9tTGVmdChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFswXSwgZXh0ZW50WzFdXTtcbn1cbi8qKlxuICogR2V0IHRoZSBib3R0b20gcmlnaHQgY29vcmRpbmF0ZSBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBCb3R0b20gcmlnaHQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdHRvbVJpZ2h0KGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdLCBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIGNlbnRlciBjb29yZGluYXRlIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENlbnRlci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENlbnRlcihleHRlbnQpIHtcbiAgICByZXR1cm4gWyhleHRlbnRbMF0gKyBleHRlbnRbMl0pIC8gMiwgKGV4dGVudFsxXSArIGV4dGVudFszXSkgLyAyXTtcbn1cbi8qKlxuICogR2V0IGEgY29ybmVyIGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBjb3JuZXIgQ29ybmVyLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvcm5lciBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSB7XG4gICAgdmFyIGNvb3JkaW5hdGU7XG4gICAgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9MRUZUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRCb3R0b21MZWZ0KGV4dGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGNvcm5lciA9PT0gQ29ybmVyLkJPVFRPTV9SSUdIVCkge1xuICAgICAgICBjb29yZGluYXRlID0gZ2V0Qm90dG9tUmlnaHQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX0xFRlQpIHtcbiAgICAgICAgY29vcmRpbmF0ZSA9IGdldFRvcExlZnQoZXh0ZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoY29ybmVyID09PSBDb3JuZXIuVE9QX1JJR0hUKSB7XG4gICAgICAgIGNvb3JkaW5hdGUgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXNzZXJ0KGZhbHNlLCAxMyk7IC8vIEludmFsaWQgY29ybmVyXG4gICAgfVxuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudCAyLlxuICogQHJldHVybiB7bnVtYmVyfSBFbmxhcmdlZCBhcmVhLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5sYXJnZWRBcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICB2YXIgbWluWCA9IE1hdGgubWluKGV4dGVudDFbMF0sIGV4dGVudDJbMF0pO1xuICAgIHZhciBtaW5ZID0gTWF0aC5taW4oZXh0ZW50MVsxXSwgZXh0ZW50MlsxXSk7XG4gICAgdmFyIG1heFggPSBNYXRoLm1heChleHRlbnQxWzJdLCBleHRlbnQyWzJdKTtcbiAgICB2YXIgbWF4WSA9IE1hdGgubWF4KGV4dGVudDFbM10sIGV4dGVudDJbM10pO1xuICAgIHJldHVybiAobWF4WCAtIG1pblgpICogKG1heFkgLSBtaW5ZKTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlci5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIERlc3RpbmF0aW9uIGV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yVmlld0FuZFNpemUoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSwgb3B0X2V4dGVudCkge1xuICAgIHZhciBkeCA9IChyZXNvbHV0aW9uICogc2l6ZVswXSkgLyAyO1xuICAgIHZhciBkeSA9IChyZXNvbHV0aW9uICogc2l6ZVsxXSkgLyAyO1xuICAgIHZhciBjb3NSb3RhdGlvbiA9IE1hdGguY29zKHJvdGF0aW9uKTtcbiAgICB2YXIgc2luUm90YXRpb24gPSBNYXRoLnNpbihyb3RhdGlvbik7XG4gICAgdmFyIHhDb3MgPSBkeCAqIGNvc1JvdGF0aW9uO1xuICAgIHZhciB4U2luID0gZHggKiBzaW5Sb3RhdGlvbjtcbiAgICB2YXIgeUNvcyA9IGR5ICogY29zUm90YXRpb247XG4gICAgdmFyIHlTaW4gPSBkeSAqIHNpblJvdGF0aW9uO1xuICAgIHZhciB4ID0gY2VudGVyWzBdO1xuICAgIHZhciB5ID0gY2VudGVyWzFdO1xuICAgIHZhciB4MCA9IHggLSB4Q29zICsgeVNpbjtcbiAgICB2YXIgeDEgPSB4IC0geENvcyAtIHlTaW47XG4gICAgdmFyIHgyID0geCArIHhDb3MgLSB5U2luO1xuICAgIHZhciB4MyA9IHggKyB4Q29zICsgeVNpbjtcbiAgICB2YXIgeTAgPSB5IC0geFNpbiAtIHlDb3M7XG4gICAgdmFyIHkxID0geSAtIHhTaW4gKyB5Q29zO1xuICAgIHZhciB5MiA9IHkgKyB4U2luICsgeUNvcztcbiAgICB2YXIgeTMgPSB5ICsgeFNpbiAtIHlDb3M7XG4gICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlKE1hdGgubWluKHgwLCB4MSwgeDIsIHgzKSwgTWF0aC5taW4oeTAsIHkxLCB5MiwgeTMpLCBNYXRoLm1heCh4MCwgeDEsIHgyLCB4MyksIE1hdGgubWF4KHkwLCB5MSwgeTIsIHkzKSwgb3B0X2V4dGVudCk7XG59XG4vKipcbiAqIEdldCB0aGUgaGVpZ2h0IG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBIZWlnaHQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRIZWlnaHQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIGV4dGVudFszXSAtIGV4dGVudFsxXTtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEByZXR1cm4ge251bWJlcn0gSW50ZXJzZWN0aW9uIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb25BcmVhKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudDEsIGV4dGVudDIpO1xuICAgIHJldHVybiBnZXRBcmVhKGludGVyc2VjdGlvbik7XG59XG4vKipcbiAqIEdldCB0aGUgaW50ZXJzZWN0aW9uIG9mIHR3byBleHRlbnRzLlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudDEgRXh0ZW50IDEuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MiBFeHRlbnQgMi5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gT3B0aW9uYWwgZXh0ZW50IHRvIHBvcHVsYXRlIHdpdGggaW50ZXJzZWN0aW9uLlxuICogQHJldHVybiB7RXh0ZW50fSBJbnRlcnNlY3RpbmcgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJzZWN0aW9uKGV4dGVudDEsIGV4dGVudDIsIG9wdF9leHRlbnQpIHtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gb3B0X2V4dGVudCA/IG9wdF9leHRlbnQgOiBjcmVhdGVFbXB0eSgpO1xuICAgIGlmIChpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpKSB7XG4gICAgICAgIGlmIChleHRlbnQxWzBdID4gZXh0ZW50MlswXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzBdID0gZXh0ZW50MVswXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblswXSA9IGV4dGVudDJbMF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dGVudDFbMV0gPiBleHRlbnQyWzFdKSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMV0gPSBleHRlbnQxWzFdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzFdID0gZXh0ZW50MlsxXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0ZW50MVsyXSA8IGV4dGVudDJbMl0pIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblsyXSA9IGV4dGVudDFbMl07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpbnRlcnNlY3Rpb25bMl0gPSBleHRlbnQyWzJdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChleHRlbnQxWzNdIDwgZXh0ZW50MlszXSkge1xuICAgICAgICAgICAgaW50ZXJzZWN0aW9uWzNdID0gZXh0ZW50MVszXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGludGVyc2VjdGlvblszXSA9IGV4dGVudDJbM107XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNyZWF0ZU9yVXBkYXRlRW1wdHkoaW50ZXJzZWN0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1hcmdpbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1hcmdpbihleHRlbnQpIHtcbiAgICByZXR1cm4gZ2V0V2lkdGgoZXh0ZW50KSArIGdldEhlaWdodChleHRlbnQpO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNpemUgKHdpZHRoLCBoZWlnaHQpIG9mIGFuIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgVGhlIGV4dGVudC5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBUaGUgZXh0ZW50IHNpemUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTaXplKGV4dGVudCkge1xuICAgIHJldHVybiBbZXh0ZW50WzJdIC0gZXh0ZW50WzBdLCBleHRlbnRbM10gLSBleHRlbnRbMV1dO1xufVxuLyoqXG4gKiBHZXQgdGhlIHRvcCBsZWZ0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIGxlZnQgY29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvcExlZnQoZXh0ZW50KSB7XG4gICAgcmV0dXJuIFtleHRlbnRbMF0sIGV4dGVudFszXV07XG59XG4vKipcbiAqIEdldCB0aGUgdG9wIHJpZ2h0IGNvb3JkaW5hdGUgb2YgYW4gZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVG9wIHJpZ2h0IGNvb3JkaW5hdGUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BSaWdodChleHRlbnQpIHtcbiAgICByZXR1cm4gW2V4dGVudFsyXSwgZXh0ZW50WzNdXTtcbn1cbi8qKlxuICogR2V0IHRoZSB3aWR0aCBvZiBhbiBleHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXaWR0aChleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzJdIC0gZXh0ZW50WzBdO1xufVxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgb25lIGV4dGVudCBpbnRlcnNlY3RzIGFub3RoZXIuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50MSBFeHRlbnQgMS5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQyIEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0d28gZXh0ZW50cyBpbnRlcnNlY3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzKGV4dGVudDEsIGV4dGVudDIpIHtcbiAgICByZXR1cm4gKGV4dGVudDFbMF0gPD0gZXh0ZW50MlsyXSAmJlxuICAgICAgICBleHRlbnQxWzJdID49IGV4dGVudDJbMF0gJiZcbiAgICAgICAgZXh0ZW50MVsxXSA8PSBleHRlbnQyWzNdICYmXG4gICAgICAgIGV4dGVudDFbM10gPj0gZXh0ZW50MlsxXSk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiBhbiBleHRlbnQgaXMgZW1wdHkuXG4gKiBAcGFyYW0ge0V4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eShleHRlbnQpIHtcbiAgICByZXR1cm4gZXh0ZW50WzJdIDwgZXh0ZW50WzBdIHx8IGV4dGVudFszXSA8IGV4dGVudFsxXTtcbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge0V4dGVudH0gW29wdF9leHRlbnRdIEV4dGVudC5cbiAqIEByZXR1cm4ge0V4dGVudH0gRXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmV0dXJuT3JVcGRhdGUoZXh0ZW50LCBvcHRfZXh0ZW50KSB7XG4gICAgaWYgKG9wdF9leHRlbnQpIHtcbiAgICAgICAgb3B0X2V4dGVudFswXSA9IGV4dGVudFswXTtcbiAgICAgICAgb3B0X2V4dGVudFsxXSA9IGV4dGVudFsxXTtcbiAgICAgICAgb3B0X2V4dGVudFsyXSA9IGV4dGVudFsyXTtcbiAgICAgICAgb3B0X2V4dGVudFszXSA9IGV4dGVudFszXTtcbiAgICAgICAgcmV0dXJuIG9wdF9leHRlbnQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgVmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUZyb21DZW50ZXIoZXh0ZW50LCB2YWx1ZSkge1xuICAgIHZhciBkZWx0YVggPSAoKGV4dGVudFsyXSAtIGV4dGVudFswXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIHZhciBkZWx0YVkgPSAoKGV4dGVudFszXSAtIGV4dGVudFsxXSkgLyAyKSAqICh2YWx1ZSAtIDEpO1xuICAgIGV4dGVudFswXSAtPSBkZWx0YVg7XG4gICAgZXh0ZW50WzJdICs9IGRlbHRhWDtcbiAgICBleHRlbnRbMV0gLT0gZGVsdGFZO1xuICAgIGV4dGVudFszXSArPSBkZWx0YVk7XG59XG4vKipcbiAqIERldGVybWluZSBpZiB0aGUgc2VnbWVudCBiZXR3ZWVuIHR3byBjb29yZGluYXRlcyBpbnRlcnNlY3RzIChjcm9zc2VzLFxuICogdG91Y2hlcywgb3IgaXMgY29udGFpbmVkIGJ5KSB0aGUgcHJvdmlkZWQgZXh0ZW50LlxuICogQHBhcmFtIHtFeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gc3RhcnQgU2VnbWVudCBzdGFydCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZW5kIFNlZ21lbnQgZW5kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgc2VnbWVudCBpbnRlcnNlY3RzIHRoZSBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzU2VnbWVudChleHRlbnQsIHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaW50ZXJzZWN0cyA9IGZhbHNlO1xuICAgIHZhciBzdGFydFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBzdGFydCk7XG4gICAgdmFyIGVuZFJlbCA9IGNvb3JkaW5hdGVSZWxhdGlvbnNoaXAoZXh0ZW50LCBlbmQpO1xuICAgIGlmIChzdGFydFJlbCA9PT0gUmVsYXRpb25zaGlwLklOVEVSU0VDVElORyB8fFxuICAgICAgICBlbmRSZWwgPT09IFJlbGF0aW9uc2hpcC5JTlRFUlNFQ1RJTkcpIHtcbiAgICAgICAgaW50ZXJzZWN0cyA9IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgbWluWCA9IGV4dGVudFswXTtcbiAgICAgICAgdmFyIG1pblkgPSBleHRlbnRbMV07XG4gICAgICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgICAgICB2YXIgbWF4WSA9IGV4dGVudFszXTtcbiAgICAgICAgdmFyIHN0YXJ0WCA9IHN0YXJ0WzBdO1xuICAgICAgICB2YXIgc3RhcnRZID0gc3RhcnRbMV07XG4gICAgICAgIHZhciBlbmRYID0gZW5kWzBdO1xuICAgICAgICB2YXIgZW5kWSA9IGVuZFsxXTtcbiAgICAgICAgdmFyIHNsb3BlID0gKGVuZFkgLSBzdGFydFkpIC8gKGVuZFggLSBzdGFydFgpO1xuICAgICAgICB2YXIgeCA9IHZvaWQgMCwgeSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKCEhKGVuZFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkgJiYgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5BQk9WRSkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgdG9wXG4gICAgICAgICAgICB4ID0gZW5kWCAtIChlbmRZIC0gbWF4WSkgLyBzbG9wZTtcbiAgICAgICAgICAgIGludGVyc2VjdHMgPSB4ID49IG1pblggJiYgeCA8PSBtYXhYO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW50ZXJzZWN0cyAmJlxuICAgICAgICAgICAgISEoZW5kUmVsICYgUmVsYXRpb25zaGlwLlJJR0hUKSAmJlxuICAgICAgICAgICAgIShzdGFydFJlbCAmIFJlbGF0aW9uc2hpcC5SSUdIVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgcmlnaHRcbiAgICAgICAgICAgIHkgPSBlbmRZIC0gKGVuZFggLSBtYXhYKSAqIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHkgPj0gbWluWSAmJiB5IDw9IG1heFk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuQkVMT1cpICYmXG4gICAgICAgICAgICAhKHN0YXJ0UmVsICYgUmVsYXRpb25zaGlwLkJFTE9XKSkge1xuICAgICAgICAgICAgLy8gcG90ZW50aWFsbHkgaW50ZXJzZWN0cyBib3R0b21cbiAgICAgICAgICAgIHggPSBlbmRYIC0gKGVuZFkgLSBtaW5ZKSAvIHNsb3BlO1xuICAgICAgICAgICAgaW50ZXJzZWN0cyA9IHggPj0gbWluWCAmJiB4IDw9IG1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpbnRlcnNlY3RzICYmXG4gICAgICAgICAgICAhIShlbmRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkgJiZcbiAgICAgICAgICAgICEoc3RhcnRSZWwgJiBSZWxhdGlvbnNoaXAuTEVGVCkpIHtcbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGludGVyc2VjdHMgbGVmdFxuICAgICAgICAgICAgeSA9IGVuZFkgLSAoZW5kWCAtIG1pblgpICogc2xvcGU7XG4gICAgICAgICAgICBpbnRlcnNlY3RzID0geSA+PSBtaW5ZICYmIHkgPD0gbWF4WTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaW50ZXJzZWN0cztcbn1cbi8qKlxuICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGV4dGVudC5cbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIENhbGxlZCB3aXRoIGBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV1gIGV4dGVudCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7RXh0ZW50fSBbb3B0X2V4dGVudF0gRGVzdGluYXRpb24gZXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3RvcHNdIE51bWJlciBvZiBzdG9wcyBwZXIgc2lkZSB1c2VkIGZvciB0aGUgdHJhbnNmb3JtLlxuICogQnkgZGVmYXVsdCBvbmx5IHRoZSBjb3JuZXJzIGFyZSB1c2VkLlxuICogQHJldHVybiB7RXh0ZW50fSBFeHRlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseVRyYW5zZm9ybShleHRlbnQsIHRyYW5zZm9ybUZuLCBvcHRfZXh0ZW50LCBvcHRfc3RvcHMpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXMgPSBbXTtcbiAgICBpZiAob3B0X3N0b3BzID4gMSkge1xuICAgICAgICB2YXIgd2lkdGggPSBleHRlbnRbMl0gLSBleHRlbnRbMF07XG4gICAgICAgIHZhciBoZWlnaHQgPSBleHRlbnRbM10gLSBleHRlbnRbMV07XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0X3N0b3BzOyArK2kpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzLnB1c2goZXh0ZW50WzBdICsgKHdpZHRoICogaSkgLyBvcHRfc3RvcHMsIGV4dGVudFsxXSwgZXh0ZW50WzJdLCBleHRlbnRbMV0gKyAoaGVpZ2h0ICogaSkgLyBvcHRfc3RvcHMsIGV4dGVudFsyXSAtICh3aWR0aCAqIGkpIC8gb3B0X3N0b3BzLCBleHRlbnRbM10sIGV4dGVudFswXSwgZXh0ZW50WzNdIC0gKGhlaWdodCAqIGkpIC8gb3B0X3N0b3BzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29vcmRpbmF0ZXMgPSBbXG4gICAgICAgICAgICBleHRlbnRbMF0sXG4gICAgICAgICAgICBleHRlbnRbMV0sXG4gICAgICAgICAgICBleHRlbnRbMl0sXG4gICAgICAgICAgICBleHRlbnRbMV0sXG4gICAgICAgICAgICBleHRlbnRbMl0sXG4gICAgICAgICAgICBleHRlbnRbM10sXG4gICAgICAgICAgICBleHRlbnRbMF0sXG4gICAgICAgICAgICBleHRlbnRbM10sXG4gICAgICAgIF07XG4gICAgfVxuICAgIHRyYW5zZm9ybUZuKGNvb3JkaW5hdGVzLCBjb29yZGluYXRlcywgMik7XG4gICAgdmFyIHhzID0gW107XG4gICAgdmFyIHlzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHtcbiAgICAgICAgeHMucHVzaChjb29yZGluYXRlc1tpXSk7XG4gICAgICAgIHlzLnB1c2goY29vcmRpbmF0ZXNbaSArIDFdKTtcbiAgICB9XG4gICAgcmV0dXJuIF9ib3VuZGluZ0V4dGVudFhZcyh4cywgeXMsIG9wdF9leHRlbnQpO1xufVxuLyoqXG4gKiBNb2RpZmllcyB0aGUgcHJvdmlkZWQgZXh0ZW50IGluLXBsYWNlIHRvIGJlIHdpdGhpbiB0aGUgcmVhbCB3b3JsZFxuICogZXh0ZW50LlxuICpcbiAqIEBwYXJhbSB7RXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb25cbiAqIEByZXR1cm4ge0V4dGVudH0gVGhlIGV4dGVudCB3aXRoaW4gdGhlIHJlYWwgd29ybGQgZXh0ZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgoZXh0ZW50LCBwcm9qZWN0aW9uKSB7XG4gICAgdmFyIHByb2plY3Rpb25FeHRlbnQgPSBwcm9qZWN0aW9uLmdldEV4dGVudCgpO1xuICAgIHZhciBjZW50ZXIgPSBnZXRDZW50ZXIoZXh0ZW50KTtcbiAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpICYmXG4gICAgICAgIChjZW50ZXJbMF0gPCBwcm9qZWN0aW9uRXh0ZW50WzBdIHx8IGNlbnRlclswXSA+PSBwcm9qZWN0aW9uRXh0ZW50WzJdKSkge1xuICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICB2YXIgd29ybGRzQXdheSA9IE1hdGguZmxvb3IoKGNlbnRlclswXSAtIHByb2plY3Rpb25FeHRlbnRbMF0pIC8gd29ybGRXaWR0aCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSB3b3JsZHNBd2F5ICogd29ybGRXaWR0aDtcbiAgICAgICAgZXh0ZW50WzBdIC09IG9mZnNldDtcbiAgICAgICAgZXh0ZW50WzJdIC09IG9mZnNldDtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVudDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4dGVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXh0ZW50L1JlbGF0aW9uc2hpcFxuICovXG4vKipcbiAqIFJlbGF0aW9uc2hpcCB0byBhbiBleHRlbnQuXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgVU5LTk9XTjogMCxcbiAgICBJTlRFUlNFQ1RJTkc6IDEsXG4gICAgQUJPVkU6IDIsXG4gICAgUklHSFQ6IDQsXG4gICAgQkVMT1c6IDgsXG4gICAgTEVGVDogMTYsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UmVsYXRpb25zaGlwLmpzLm1hcCIsImltcG9ydCB7IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIH0gZnJvbSAnLi9oYXMuanMnO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2RvbVxuICovXG4vL0ZJWE1FIE1vdmUgdGhpcyBmdW5jdGlvbiB0byB0aGUgY2FudmFzIG1vZHVsZVxuLyoqXG4gKiBDcmVhdGUgYW4gaHRtbCBjYW52YXMgZWxlbWVudCBhbmQgcmV0dXJucyBpdHMgMmQgY29udGV4dC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3dpZHRoXSBDYW52YXMgd2lkdGguXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9oZWlnaHRdIENhbnZhcyBoZWlnaHQuXG4gKiBAcGFyYW0ge0FycmF5PEhUTUxDYW52YXNFbGVtZW50Pn0gW29wdF9jYW52YXNQb29sXSBDYW52YXMgcG9vbCB0byB0YWtlIGV4aXN0aW5nIGNhbnZhcyBmcm9tLlxuICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkRTZXR0aW5nc30gW29wdF9Db250ZXh0MkRTZXR0aW5nc10gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEU2V0dGluZ3NcbiAqIEByZXR1cm4ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gVGhlIGNvbnRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYW52YXNDb250ZXh0MkQob3B0X3dpZHRoLCBvcHRfaGVpZ2h0LCBvcHRfY2FudmFzUG9vbCwgb3B0X0NvbnRleHQyRFNldHRpbmdzKSB7XG4gICAgdmFyIGNhbnZhcyA9IG9wdF9jYW52YXNQb29sICYmIG9wdF9jYW52YXNQb29sLmxlbmd0aFxuICAgICAgICA/IG9wdF9jYW52YXNQb29sLnNoaWZ0KClcbiAgICAgICAgOiBXT1JLRVJfT0ZGU0NSRUVOX0NBTlZBU1xuICAgICAgICAgICAgPyBuZXcgT2Zmc2NyZWVuQ2FudmFzKG9wdF93aWR0aCB8fCAzMDAsIG9wdF9oZWlnaHQgfHwgMzAwKVxuICAgICAgICAgICAgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBpZiAob3B0X3dpZHRoKSB7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IG9wdF93aWR0aDtcbiAgICB9XG4gICAgaWYgKG9wdF9oZWlnaHQpIHtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IG9wdF9oZWlnaHQ7XG4gICAgfVxuICAgIC8vRklYTUUgQWxsb3cgT2Zmc2NyZWVuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIGFzIHJldHVybiB0eXBlXG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSAqLyAoY2FudmFzLmdldENvbnRleHQoJzJkJywgb3B0X0NvbnRleHQyRFNldHRpbmdzKSk7XG59XG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBjb21wdXRlZCB3aWR0aCBmb3IgdGhlIGdpdmVuIGVsZW1lbnQgaW5jbHVkaW5nIG1hcmdpbixcbiAqIHBhZGRpbmcgYW5kIGJvcmRlci5cbiAqIEVxdWl2YWxlbnQgdG8galF1ZXJ5J3MgYCQoZWwpLm91dGVyV2lkdGgodHJ1ZSlgLlxuICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHdpZHRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0ZXJXaWR0aChlbGVtZW50KSB7XG4gICAgdmFyIHdpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgIHdpZHRoICs9IHBhcnNlSW50KHN0eWxlLm1hcmdpbkxlZnQsIDEwKSArIHBhcnNlSW50KHN0eWxlLm1hcmdpblJpZ2h0LCAxMCk7XG4gICAgcmV0dXJuIHdpZHRoO1xufVxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgY29tcHV0ZWQgaGVpZ2h0IGZvciB0aGUgZ2l2ZW4gZWxlbWVudCBpbmNsdWRpbmcgbWFyZ2luLFxuICogcGFkZGluZyBhbmQgYm9yZGVyLlxuICogRXF1aXZhbGVudCB0byBqUXVlcnkncyBgJChlbCkub3V0ZXJIZWlnaHQodHJ1ZSlgLlxuICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnQgRWxlbWVudC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGhlaWdodC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dGVySGVpZ2h0KGVsZW1lbnQpIHtcbiAgICB2YXIgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICBoZWlnaHQgKz0gcGFyc2VJbnQoc3R5bGUubWFyZ2luVG9wLCAxMCkgKyBwYXJzZUludChzdHlsZS5tYXJnaW5Cb3R0b20sIDEwKTtcbiAgICByZXR1cm4gaGVpZ2h0O1xufVxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5ld05vZGUgTm9kZSB0byByZXBsYWNlIG9sZCBub2RlXG4gKiBAcGFyYW0ge05vZGV9IG9sZE5vZGUgVGhlIG5vZGUgdG8gYmUgcmVwbGFjZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VOb2RlKG5ld05vZGUsIG9sZE5vZGUpIHtcbiAgICB2YXIgcGFyZW50ID0gb2xkTm9kZS5wYXJlbnROb2RlO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZChuZXdOb2RlLCBvbGROb2RlKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZSBUaGUgbm9kZSB0byByZW1vdmUuXG4gKiBAcmV0dXJuIHtOb2RlfSBUaGUgbm9kZSB0aGF0IHdhcyByZW1vdmVkIG9yIG51bGwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVOb2RlKG5vZGUpIHtcbiAgICByZXR1cm4gbm9kZSAmJiBub2RlLnBhcmVudE5vZGUgPyBub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobm9kZSkgOiBudWxsO1xufVxuLyoqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgVGhlIG5vZGUgdG8gcmVtb3ZlIHRoZSBjaGlsZHJlbiBmcm9tLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSkge1xuICAgIHdoaWxlIChub2RlLmxhc3RDaGlsZCkge1xuICAgICAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgICB9XG59XG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgY2hpbGRyZW4gb2YgYSBwYXJlbnQgbm9kZSBzbyB0aGV5IG1hdGNoIHRoZVxuICogcHJvdmlkZWQgbGlzdCBvZiBjaGlsZHJlbi4gIFRoaXMgZnVuY3Rpb24gYWltcyB0byBlZmZpY2llbnRseVxuICogcmVtb3ZlLCBhZGQsIGFuZCByZW9yZGVyIGNoaWxkIG5vZGVzIHdoaWxlIG1haW50YWluaW5nIGEgc2ltcGxlXG4gKiBpbXBsZW1lbnRhdGlvbiAoaXQgaXMgbm90IGd1YXJhbnRlZWQgdG8gbWluaW1pemUgRE9NIG9wZXJhdGlvbnMpLlxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRoZSBwYXJlbnQgbm9kZSB3aG9zZSBjaGlsZHJlbiBuZWVkIHJld29ya2luZy5cbiAqIEBwYXJhbSB7QXJyYXk8Tm9kZT59IGNoaWxkcmVuIFRoZSBkZXNpcmVkIGNoaWxkcmVuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUNoaWxkcmVuKG5vZGUsIGNoaWxkcmVuKSB7XG4gICAgdmFyIG9sZENoaWxkcmVuID0gbm9kZS5jaGlsZE5vZGVzO1xuICAgIGZvciAodmFyIGkgPSAwOyB0cnVlOyArK2kpIHtcbiAgICAgICAgdmFyIG9sZENoaWxkID0gb2xkQ2hpbGRyZW5baV07XG4gICAgICAgIHZhciBuZXdDaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAvLyBjaGVjayBpZiBvdXIgd29yayBpcyBkb25lXG4gICAgICAgIGlmICghb2xkQ2hpbGQgJiYgIW5ld0NoaWxkKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiBjaGlsZHJlbiBtYXRjaFxuICAgICAgICBpZiAob2xkQ2hpbGQgPT09IG5ld0NoaWxkKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGVjayBpZiBhIG5ldyBjaGlsZCBuZWVkcyB0byBiZSBhZGRlZFxuICAgICAgICBpZiAoIW9sZENoaWxkKSB7XG4gICAgICAgICAgICBub2RlLmFwcGVuZENoaWxkKG5ld0NoaWxkKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGlmIGFuIG9sZCBjaGlsZCBuZWVkcyB0byBiZSByZW1vdmVkXG4gICAgICAgIGlmICghbmV3Q2hpbGQpIHtcbiAgICAgICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQob2xkQ2hpbGQpO1xuICAgICAgICAgICAgLS1pO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVvcmRlclxuICAgICAgICBub2RlLmluc2VydEJlZm9yZShuZXdDaGlsZCwgb2xkQ2hpbGQpO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRvbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlcmVyL2NhbnZhcy9MYXllclxuICovXG5pbXBvcnQgTGF5ZXJSZW5kZXJlciBmcm9tICcuLi9MYXllci5qcyc7XG5pbXBvcnQgUmVuZGVyRXZlbnQgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50LmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBhcHBseSBhcyBhcHBseVRyYW5zZm9ybSwgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBjcmVhdGUgYXMgY3JlYXRlVHJhbnNmb3JtLCB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBjb250YWluc0Nvb3JkaW5hdGUsIGdldEJvdHRvbUxlZnQsIGdldEJvdHRvbVJpZ2h0LCBnZXRUb3BMZWZ0LCBnZXRUb3BSaWdodCwgfSBmcm9tICcuLi8uLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FudmFzQ29udGV4dDJEIH0gZnJvbSAnLi4vLi4vZG9tLmpzJztcbi8qKlxuICogQGFic3RyYWN0XG4gKiBAdGVtcGxhdGUge2ltcG9ydChcIi4uLy4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IExheWVyVHlwZVxuICogQGV4dGVuZHMge0xheWVyUmVuZGVyZXI8TGF5ZXJUeXBlPn1cbiAqL1xudmFyIENhbnZhc0xheWVyUmVuZGVyZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENhbnZhc0xheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtMYXllclR5cGV9IGxheWVyIExheWVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhbnZhc0xheWVyUmVuZGVyZXIobGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbGF5ZXIpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRlbXBvcmFyeSB0cmFuc2Zvcm0uICBUaGUgdmFsdWVzIGluIHRoaXMgdHJhbnNmb3JtIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gYVxuICAgICAgICAgKiBmdW5jdGlvbiB0aGF0IHNldHMgdGhlIHZhbHVlcy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRlbXBUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0cmFuc2Zvcm0gZm9yIHJlbmRlcmVkIHBpeGVscyB0byB2aWV3cG9ydCBDU1MgcGl4ZWxzLiAgVGhpcyB0cmFuc2Zvcm0gbXVzdFxuICAgICAgICAgKiBiZSBzZXQgd2hlbiByZW5kZXJpbmcgYSBmcmFtZSBhbmQgbWF5IGJlIHVzZWQgYnkgb3RoZXIgZnVuY3Rpb25zIGFmdGVyIHJlbmRlcmluZy5cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vdHJhbnNmb3JtLmpzXCIpLlRyYW5zZm9ybX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHJhbnNmb3JtIGZvciB2aWV3cG9ydCBDU1MgcGl4ZWxzIHRvIHJlbmRlcmVkIHBpeGVscy4gIFRoaXMgdHJhbnNmb3JtIG11c3RcbiAgICAgICAgICogYmUgc2V0IHdoZW4gcmVuZGVyaW5nIGEgZnJhbWUgYW5kIG1heSBiZSB1c2VkIGJ5IG90aGVyIGZ1bmN0aW9ucyBhZnRlciByZW5kZXJpbmcuXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGFpbmVyUmV1c2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgcmVuZGVyaW5nIGNvbnRhaW5lciBmcm9tIGFuIGV4aXN0aW5nIHRhcmdldCwgaWYgY29tcGF0aWJsZS5cbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXQgUG90ZW50aWFsIHJlbmRlciB0YXJnZXQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRyYW5zZm9ybSBDU1MgVHJhbnNmb3JtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUudXNlQ29udGFpbmVyID0gZnVuY3Rpb24gKHRhcmdldCwgdHJhbnNmb3JtLCBvcGFjaXR5KSB7XG4gICAgICAgIHZhciBsYXllckNsYXNzTmFtZSA9IHRoaXMuZ2V0TGF5ZXIoKS5nZXRDbGFzc05hbWUoKTtcbiAgICAgICAgdmFyIGNvbnRhaW5lciwgY29udGV4dDtcbiAgICAgICAgaWYgKHRhcmdldCAmJlxuICAgICAgICAgICAgdGFyZ2V0LnN0eWxlLm9wYWNpdHkgPT09ICcnICYmXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NOYW1lID09PSBsYXllckNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IHRhcmdldC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgIGlmIChjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dCAmJlxuICAgICAgICAgICAgKGNvbnRleHQuY2FudmFzLndpZHRoID09PSAwIHx8XG4gICAgICAgICAgICAgICAgY29udGV4dC5jYW52YXMuc3R5bGUudHJhbnNmb3JtID09PSB0cmFuc2Zvcm0pKSB7XG4gICAgICAgICAgICAvLyBDb250YWluZXIgb2YgdGhlIHByZXZpb3VzIGxheWVyIHJlbmRlcmVyIGNhbiBiZSB1c2VkLlxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSB0YXJnZXQ7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29udGFpbmVyUmV1c2VkKSB7XG4gICAgICAgICAgICAvLyBQcmV2aW91c2x5IHJldXNlZCBjb250YWluZXIgY2Fubm90IGJlIHVzZWQgYW55IG1vcmUuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXJSZXVzZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBsYXllckNsYXNzTmFtZTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGNvbnRhaW5lci5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAgICAgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICAgICAgICBzdHlsZSA9IGNhbnZhcy5zdHlsZTtcbiAgICAgICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgIHN0eWxlLmxlZnQgPSAnMCc7XG4gICAgICAgICAgICBzdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSAndG9wIGxlZnQnO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgQ2xpcCBleHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc0xheWVyUmVuZGVyZXIucHJvdG90eXBlLmNsaXBVbnJvdGF0ZWQgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSwgZXh0ZW50KSB7XG4gICAgICAgIHZhciB0b3BMZWZ0ID0gZ2V0VG9wTGVmdChleHRlbnQpO1xuICAgICAgICB2YXIgdG9wUmlnaHQgPSBnZXRUb3BSaWdodChleHRlbnQpO1xuICAgICAgICB2YXIgYm90dG9tUmlnaHQgPSBnZXRCb3R0b21SaWdodChleHRlbnQpO1xuICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGdldEJvdHRvbUxlZnQoZXh0ZW50KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgdG9wTGVmdCk7XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIHRvcFJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgYm90dG9tUmlnaHQpO1xuICAgICAgICBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBib3R0b21MZWZ0KTtcbiAgICAgICAgdmFyIGludmVydGVkID0gdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm07XG4gICAgICAgIGFwcGx5VHJhbnNmb3JtKGludmVydGVkLCB0b3BMZWZ0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIHRvcFJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIGJvdHRvbVJpZ2h0KTtcbiAgICAgICAgYXBwbHlUcmFuc2Zvcm0oaW52ZXJ0ZWQsIGJvdHRvbUxlZnQpO1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oTWF0aC5yb3VuZCh0b3BMZWZ0WzBdKSwgTWF0aC5yb3VuZCh0b3BMZWZ0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQodG9wUmlnaHRbMF0pLCBNYXRoLnJvdW5kKHRvcFJpZ2h0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tUmlnaHRbMF0pLCBNYXRoLnJvdW5kKGJvdHRvbVJpZ2h0WzFdKSk7XG4gICAgICAgIGNvbnRleHQubGluZVRvKE1hdGgucm91bmQoYm90dG9tTGVmdFswXSksIE1hdGgucm91bmQoYm90dG9tTGVmdFsxXSkpO1xuICAgICAgICBjb250ZXh0LmNsaXAoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudF8gPSBmdW5jdGlvbiAodHlwZSwgY29udGV4dCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIGlmIChsYXllci5oYXNMaXN0ZW5lcih0eXBlKSkge1xuICAgICAgICAgICAgdmFyIGV2ZW50XzEgPSBuZXcgUmVuZGVyRXZlbnQodHlwZSwgdGhpcy5pbnZlcnNlUGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUsIGNvbnRleHQpO1xuICAgICAgICAgICAgbGF5ZXIuZGlzcGF0Y2hFdmVudChldmVudF8xKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wcmVSZW5kZXIgPSBmdW5jdGlvbiAoY29udGV4dCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoUmVuZGVyRXZlbnRfKFJlbmRlckV2ZW50VHlwZS5QUkVSRU5ERVIsIGNvbnRleHQsIGZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGNvbnRleHQgQ29udGV4dC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBDYW52YXNMYXllclJlbmRlcmVyLnByb3RvdHlwZS5wb3N0UmVuZGVyID0gZnVuY3Rpb24gKGNvbnRleHQsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaFJlbmRlckV2ZW50XyhSZW5kZXJFdmVudFR5cGUuUE9TVFJFTkRFUiwgY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdHJhbnNmb3JtIGZvciByZW5kZXJpbmcgdG8gYW4gZWxlbWVudCB0aGF0IHdpbGwgYmUgcm90YXRlZCBhZnRlciByZW5kZXJpbmcuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIFdpZHRoIG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSByZW5kZXJlZCBlbGVtZW50IChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRYIE9mZnNldCBvbiB0aGUgeC1heGlzIGluIHZpZXcgY29vcmRpbmF0ZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBUcmFuc2Zvcm0uXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0UmVuZGVyVHJhbnNmb3JtID0gZnVuY3Rpb24gKGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHBpeGVsUmF0aW8sIHdpZHRoLCBoZWlnaHQsIG9mZnNldFgpIHtcbiAgICAgICAgdmFyIGR4MSA9IHdpZHRoIC8gMjtcbiAgICAgICAgdmFyIGR5MSA9IGhlaWdodCAvIDI7XG4gICAgICAgIHZhciBzeCA9IHBpeGVsUmF0aW8gLyByZXNvbHV0aW9uO1xuICAgICAgICB2YXIgc3kgPSAtc3g7XG4gICAgICAgIHZhciBkeDIgPSAtY2VudGVyWzBdICsgb2Zmc2V0WDtcbiAgICAgICAgdmFyIGR5MiA9IC1jZW50ZXJbMV07XG4gICAgICAgIHJldHVybiBjb21wb3NlVHJhbnNmb3JtKHRoaXMudGVtcFRyYW5zZm9ybSwgZHgxLCBkeTEsIHN4LCBzeSwgLXJvdGF0aW9uLCBkeDIsIGR5Mik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcmV0dXJuIHtVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5fSBUaGUgcmVzdWx0LiAgSWYgdGhlcmUgaXMgbm8gZGF0YSBhdCB0aGUgcGl4ZWxcbiAgICAgKiAgICBsb2NhdGlvbiwgbnVsbCB3aWxsIGJlIHJldHVybmVkLiAgSWYgdGhlcmUgaXMgZGF0YSwgYnV0IHBpeGVsIHZhbHVlcyBjYW5ub3QgYmVcbiAgICAgKiAgICByZXR1cm5lZCwgYW5kIGVtcHR5IGFycmF5IHdpbGwgYmUgcmV0dXJuZWQuXG4gICAgICovXG4gICAgQ2FudmFzTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUuZ2V0RGF0YUF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgcmVuZGVyUGl4ZWwgPSBhcHBseVRyYW5zZm9ybSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciBsYXllckV4dGVudCA9IGxheWVyLmdldEV4dGVudCgpO1xuICAgICAgICBpZiAobGF5ZXJFeHRlbnQpIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJDb29yZGluYXRlID0gYXBwbHlUcmFuc2Zvcm0oZnJhbWVTdGF0ZS5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSwgcGl4ZWwuc2xpY2UoKSk7XG4gICAgICAgICAgICAvKiogZ2V0IG9ubHkgZGF0YSBpbnNpZGUgb2YgdGhlIGxheWVyIGV4dGVudCAqL1xuICAgICAgICAgICAgaWYgKCFjb250YWluc0Nvb3JkaW5hdGUobGF5ZXJFeHRlbnQsIHJlbmRlckNvb3JkaW5hdGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRhdGE7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQocmVuZGVyUGl4ZWxbMF0pO1xuICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnJvdW5kKHJlbmRlclBpeGVsWzFdKTtcbiAgICAgICAgICAgIHZhciBuZXdDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIHZhciBuZXdDb250ZXh0ID0gbmV3Q2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBuZXdDYW52YXMud2lkdGggPSAxO1xuICAgICAgICAgICAgbmV3Q2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgICAgICBuZXdDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgIG5ld0NvbnRleHQuZHJhd0ltYWdlKGNvbnRleHQuY2FudmFzLCB4LCB5LCAxLCAxLCAwLCAwLCAxLCAxKTtcbiAgICAgICAgICAgIGRhdGEgPSBuZXdDb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCAxLCAxKS5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gJ1NlY3VyaXR5RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgLy8gdGFpbnRlZCBjYW52YXMsIHdlIGFzc3VtZSB0aGVyZSBpcyBkYXRhIGF0IHRoZSBnaXZlbiBwaXhlbCAoYWx0aG91Z2ggdGhlcmUgbWlnaHQgbm90IGJlKVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFbM10gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH07XG4gICAgcmV0dXJuIENhbnZhc0xheWVyUmVuZGVyZXI7XG59KExheWVyUmVuZGVyZXIpKTtcbmV4cG9ydCBkZWZhdWx0IENhbnZhc0xheWVyUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MYXllci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVGlsZVJhbmdlXG4gKi9cbi8qKlxuICogQSByZXByZXNlbnRhdGlvbiBvZiBhIGNvbnRpZ3VvdXMgYmxvY2sgb2YgdGlsZXMuICBBIHRpbGUgcmFuZ2UgaXMgc3BlY2lmaWVkXG4gKiBieSBpdHMgbWluL21heCB0aWxlIGNvb3JkaW5hdGVzIGFuZCBpcyBpbmNsdXNpdmUgb2YgY29vcmRpbmF0ZXMuXG4gKi9cbnZhciBUaWxlUmFuZ2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblggTWluaW11bSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYIE1heGltdW0gWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heFkgTWF4aW11bSBZLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRpbGVSYW5nZShtaW5YLCBtYXhYLCBtaW5ZLCBtYXhZKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5taW5YID0gbWluWDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1heFggPSBtYXhYO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhZID0gbWF4WTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgdGlsZSBjb29yZGluYXRlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnMgPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5zWFkodGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuY29udGFpbnNUaWxlUmFuZ2UgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YIDw9IHRpbGVSYW5nZS5taW5YICYmXG4gICAgICAgICAgICB0aWxlUmFuZ2UubWF4WCA8PSB0aGlzLm1heFggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgICAgICAgdGlsZVJhbmdlLm1heFkgPD0gdGhpcy5tYXhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zIGNvb3JkaW5hdGUuXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluWCA8PSB4ICYmIHggPD0gdGhpcy5tYXhYICYmIHRoaXMubWluWSA8PSB5ICYmIHkgPD0gdGhpcy5tYXhZO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEVxdWFscy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblggPT0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA9PSB0aWxlUmFuZ2UubWluWSAmJlxuICAgICAgICAgICAgdGhpcy5tYXhYID09IHRpbGVSYW5nZS5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1heFkgPT0gdGlsZVJhbmdlLm1heFkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUaWxlUmFuZ2V9IHRpbGVSYW5nZSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVSYW5nZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKHRpbGVSYW5nZSkge1xuICAgICAgICBpZiAodGlsZVJhbmdlLm1pblggPCB0aGlzLm1pblgpIHtcbiAgICAgICAgICAgIHRoaXMubWluWCA9IHRpbGVSYW5nZS5taW5YO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlUmFuZ2UubWF4WCA+IHRoaXMubWF4WCkge1xuICAgICAgICAgICAgdGhpcy5tYXhYID0gdGlsZVJhbmdlLm1heFg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpbGVSYW5nZS5taW5ZIDwgdGhpcy5taW5ZKSB7XG4gICAgICAgICAgICB0aGlzLm1pblkgPSB0aWxlUmFuZ2UubWluWTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGlsZVJhbmdlLm1heFkgPiB0aGlzLm1heFkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4WSA9IHRpbGVSYW5nZS5tYXhZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhlaWdodC5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4WSAtIHRoaXMubWluWSArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gU2l6ZS5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldEhlaWdodCgpXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gV2lkdGguXG4gICAgICovXG4gICAgVGlsZVJhbmdlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4WCAtIHRoaXMubWluWCArIDE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1RpbGVSYW5nZX0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSW50ZXJzZWN0cy5cbiAgICAgKi9cbiAgICBUaWxlUmFuZ2UucHJvdG90eXBlLmludGVyc2VjdHMgPSBmdW5jdGlvbiAodGlsZVJhbmdlKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5taW5YIDw9IHRpbGVSYW5nZS5tYXhYICYmXG4gICAgICAgICAgICB0aGlzLm1heFggPj0gdGlsZVJhbmdlLm1pblggJiZcbiAgICAgICAgICAgIHRoaXMubWluWSA8PSB0aWxlUmFuZ2UubWF4WSAmJlxuICAgICAgICAgICAgdGhpcy5tYXhZID49IHRpbGVSYW5nZS5taW5ZKTtcbiAgICB9O1xuICAgIHJldHVybiBUaWxlUmFuZ2U7XG59KCkpO1xuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWCBNaW5pbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WCBNYXhpbXVtIFguXG4gKiBAcGFyYW0ge251bWJlcn0gbWluWSBNaW5pbXVtIFkuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4WSBNYXhpbXVtIFkuXG4gKiBAcGFyYW0ge1RpbGVSYW5nZX0gW3RpbGVSYW5nZV0gVGlsZVJhbmdlLlxuICogQHJldHVybiB7VGlsZVJhbmdlfSBUaWxlIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlT3JVcGRhdGUobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgdGlsZVJhbmdlKSB7XG4gICAgaWYgKHRpbGVSYW5nZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRpbGVSYW5nZS5taW5YID0gbWluWDtcbiAgICAgICAgdGlsZVJhbmdlLm1heFggPSBtYXhYO1xuICAgICAgICB0aWxlUmFuZ2UubWluWSA9IG1pblk7XG4gICAgICAgIHRpbGVSYW5nZS5tYXhZID0gbWF4WTtcbiAgICAgICAgcmV0dXJuIHRpbGVSYW5nZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgVGlsZVJhbmdlKG1pblgsIG1heFgsIG1pblksIG1heFkpO1xuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IFRpbGVSYW5nZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVSYW5nZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai9Vbml0c1xuICovXG4vKipcbiAqIFByb2plY3Rpb24gdW5pdHM6IGAnZGVncmVlcydgLCBgJ2Z0J2AsIGAnbSdgLCBgJ3BpeGVscydgLCBgJ3RpbGUtcGl4ZWxzJ2Agb3JcbiAqIGAndXMtZnQnYC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBVbml0cyA9IHtcbiAgICAvKipcbiAgICAgKiBEZWdyZWVzXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIERFR1JFRVM6ICdkZWdyZWVzJyxcbiAgICAvKipcbiAgICAgKiBGZWV0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEZFRVQ6ICdmdCcsXG4gICAgLyoqXG4gICAgICogTWV0ZXJzXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1FVEVSUzogJ20nLFxuICAgIC8qKlxuICAgICAqIFBpeGVsc1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQSVhFTFM6ICdwaXhlbHMnLFxuICAgIC8qKlxuICAgICAqIFRpbGUgUGl4ZWxzXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRJTEVfUElYRUxTOiAndGlsZS1waXhlbHMnLFxuICAgIC8qKlxuICAgICAqIFVTIEZlZXRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVVNGRUVUOiAndXMtZnQnLFxufTtcbi8qKlxuICogTWV0ZXJzIHBlciB1bml0IGxvb2t1cCB0YWJsZS5cbiAqIEBjb25zdFxuICogQHR5cGUge09iamVjdDxVbml0cywgbnVtYmVyPn1cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBNRVRFUlNfUEVSX1VOSVQgPSB7fTtcbi8vIHVzZSB0aGUgcmFkaXVzIG9mIHRoZSBOb3JtYWwgc3BoZXJlXG5NRVRFUlNfUEVSX1VOSVRbVW5pdHMuREVHUkVFU10gPSAoMiAqIE1hdGguUEkgKiA2MzcwOTk3KSAvIDM2MDtcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5GRUVUXSA9IDAuMzA0ODtcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5NRVRFUlNdID0gMTtcbk1FVEVSU19QRVJfVU5JVFtVbml0cy5VU0ZFRVRdID0gMTIwMCAvIDM5Mzc7XG5leHBvcnQgZGVmYXVsdCBVbml0cztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuaXRzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qL1Byb2plY3Rpb25cbiAqL1xuaW1wb3J0IHsgTUVURVJTX1BFUl9VTklUIH0gZnJvbSAnLi9Vbml0cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjb2RlIFRoZSBTUlMgaWRlbnRpZmllciBjb2RlLCBlLmcuIGBFUFNHOjQzMjZgLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR8c3RyaW5nfSBbdW5pdHNdIFVuaXRzLiBSZXF1aXJlZCB1bmxlc3MgYVxuICogcHJvajQgcHJvamVjdGlvbiBpcyBkZWZpbmVkIGZvciBgY29kZWAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtleHRlbnRdIFRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoZSBTUlMuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2F4aXNPcmllbnRhdGlvbj0nZW51J10gVGhlIGF4aXMgb3JpZW50YXRpb24gYXMgc3BlY2lmaWVkIGluIFByb2o0LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZ2xvYmFsPWZhbHNlXSBXaGV0aGVyIHRoZSBwcm9qZWN0aW9uIGlzIHZhbGlkIGZvciB0aGUgd2hvbGUgZ2xvYmUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21ldGVyc1BlclVuaXRdIFRoZSBtZXRlcnMgcGVyIHVuaXQgZm9yIHRoZSBTUlMuXG4gKiBJZiBub3QgcHJvdmlkZWQsIHRoZSBgdW5pdHNgIGFyZSB1c2VkIHRvIGdldCB0aGUgbWV0ZXJzIHBlciB1bml0IGZyb20gdGhlIHtAbGluayBtb2R1bGU6b2wvcHJvai9Vbml0c35NRVRFUlNfUEVSX1VOSVR9XG4gKiBsb29rdXAgdGFibGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFt3b3JsZEV4dGVudF0gVGhlIHdvcmxkIGV4dGVudCBmb3IgdGhlIFNSUy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyLCBpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOm51bWJlcn0gW2dldFBvaW50UmVzb2x1dGlvbl1cbiAqIEZ1bmN0aW9uIHRvIGRldGVybWluZSByZXNvbHV0aW9uIGF0IGEgcG9pbnQuIFRoZSBmdW5jdGlvbiBpcyBjYWxsZWQgd2l0aCBhXG4gKiBgbnVtYmVyYCB2aWV3IHJlc29sdXRpb24gYW5kIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGUgQ29vcmRpbmF0ZX0gYXMgYXJndW1lbnRzLCBhbmQgcmV0dXJuc1xuICogdGhlIGBudW1iZXJgIHJlc29sdXRpb24gaW4gcHJvamVjdGlvbiB1bml0cyBhdCB0aGUgcGFzc2VkIGNvb3JkaW5hdGUuIElmIHRoaXMgaXMgYHVuZGVmaW5lZGAsXG4gKiB0aGUgZGVmYXVsdCB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouZ2V0UG9pbnRSZXNvbHV0aW9uIGdldFBvaW50UmVzb2x1dGlvbigpfSBmdW5jdGlvbiB3aWxsIGJlIHVzZWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJvamVjdGlvbiBkZWZpbml0aW9uIGNsYXNzLiBPbmUgb2YgdGhlc2UgaXMgY3JlYXRlZCBmb3IgZWFjaCBwcm9qZWN0aW9uXG4gKiBzdXBwb3J0ZWQgaW4gdGhlIGFwcGxpY2F0aW9uIGFuZCBzdG9yZWQgaW4gdGhlIHtAbGluayBtb2R1bGU6b2wvcHJvan0gbmFtZXNwYWNlLlxuICogWW91IGNhbiB1c2UgdGhlc2UgaW4gYXBwbGljYXRpb25zLCBidXQgdGhpcyBpcyBub3QgcmVxdWlyZWQsIGFzIEFQSSBwYXJhbXNcbiAqIGFuZCBvcHRpb25zIHVzZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2p+UHJvamVjdGlvbkxpa2V9IHdoaWNoIG1lYW5zIHRoZSBzaW1wbGUgc3RyaW5nXG4gKiBjb2RlIHdpbGwgc3VmZmljZS5cbiAqXG4gKiBZb3UgY2FuIHVzZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouZ2V0fSB0byByZXRyaWV2ZSB0aGUgb2JqZWN0IGZvciBhIHBhcnRpY3VsYXJcbiAqIHByb2plY3Rpb24uXG4gKlxuICogVGhlIGxpYnJhcnkgaW5jbHVkZXMgZGVmaW5pdGlvbnMgZm9yIGBFUFNHOjQzMjZgIGFuZCBgRVBTRzozODU3YCwgdG9nZXRoZXJcbiAqIHdpdGggdGhlIGZvbGxvd2luZyBhbGlhc2VzOlxuICogKiBgRVBTRzo0MzI2YDogQ1JTOjg0LCB1cm46b2djOmRlZjpjcnM6RVBTRzo2LjY6NDMyNixcbiAqICAgICB1cm46b2djOmRlZjpjcnM6T0dDOjEuMzpDUlM4NCwgdXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0LFxuICogICAgIGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCM0MzI2LFxuICogICAgIHVybjp4LW9nYzpkZWY6Y3JzOkVQU0c6NDMyNlxuICogKiBgRVBTRzozODU3YDogRVBTRzoxMDIxMDAsIEVQU0c6MTAyMTEzLCBFUFNHOjkwMDkxMyxcbiAqICAgICB1cm46b2djOmRlZjpjcnM6RVBTRzo2LjE4OjM6Mzg1NyxcbiAqICAgICBodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjMzg1N1xuICpcbiAqIElmIHlvdSB1c2UgW3Byb2o0anNdKGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9qNGpzL3Byb2o0anMpLCBhbGlhc2VzIGNhblxuICogYmUgYWRkZWQgdXNpbmcgYHByb2o0LmRlZnMoKWAuIEFmdGVyIGFsbCByZXF1aXJlZCBwcm9qZWN0aW9uIGRlZmluaXRpb25zIGFyZVxuICogYWRkZWQsIGNhbGwgdGhlIHtAbGluayBtb2R1bGU6b2wvcHJvai9wcm9qNC5yZWdpc3Rlcn0gZnVuY3Rpb24uXG4gKlxuICogQGFwaVxuICovXG52YXIgUHJvamVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgUHJvamVjdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFByb2plY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29kZV8gPSBvcHRpb25zLmNvZGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVbml0cyBvZiBwcm9qZWN0ZWQgY29vcmRpbmF0ZXMuIFdoZW4gc2V0IHRvIGBUSUxFX1BJWEVMU2AsIGFcbiAgICAgICAgICogYHRoaXMuZXh0ZW50X2AgYW5kIGB0aGlzLndvcmxkRXh0ZW50X2AgbXVzdCBiZSBjb25maWd1cmVkIHByb3Blcmx5IGZvciBlYWNoXG4gICAgICAgICAqIHRpbGUuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL1VuaXRzLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVuaXRzXyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9Vbml0cy5qc1wiKS5kZWZhdWx0fSAqLyAob3B0aW9ucy51bml0cyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBWYWxpZGl0eSBleHRlbnQgb2YgdGhlIHByb2plY3Rpb24gaW4gcHJvamVjdGVkIGNvb3JkaW5hdGVzLiBGb3IgcHJvamVjdGlvbnNcbiAgICAgICAgICogd2l0aCBgVElMRV9QSVhFTFNgIHVuaXRzLCB0aGlzIGlzIHRoZSBleHRlbnQgb2YgdGhlIHRpbGUgaW5cbiAgICAgICAgICogdGlsZSBwaXhlbCBzcGFjZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmV4dGVudF8gPSBvcHRpb25zLmV4dGVudCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5leHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogRXh0ZW50IG9mIHRoZSB3b3JsZCBpbiBFUFNHOjQzMjYuIEZvciBwcm9qZWN0aW9ucyB3aXRoXG4gICAgICAgICAqIGBUSUxFX1BJWEVMU2AgdW5pdHMsIHRoaXMgaXMgdGhlIGV4dGVudCBvZiB0aGUgdGlsZSBpblxuICAgICAgICAgKiBwcm9qZWN0ZWQgY29vcmRpbmF0ZSBzcGFjZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndvcmxkRXh0ZW50XyA9XG4gICAgICAgICAgICBvcHRpb25zLndvcmxkRXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLndvcmxkRXh0ZW50IDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmF4aXNPcmllbnRhdGlvbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5heGlzT3JpZW50YXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXhpc09yaWVudGF0aW9uIDogJ2VudSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2xvYmFsXyA9IG9wdGlvbnMuZ2xvYmFsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmdsb2JhbCA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhbldyYXBYXyA9ICEhKHRoaXMuZ2xvYmFsXyAmJiB0aGlzLmV4dGVudF8pO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXyA9IG9wdGlvbnMuZ2V0UG9pbnRSZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlZmF1bHRUaWxlR3JpZF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1ldGVyc1BlclVuaXRfID0gb3B0aW9ucy5tZXRlcnNQZXJVbml0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcHJvamVjdGlvbiBpcyBzdWl0YWJsZSBmb3Igd3JhcHBpbmcgdGhlIHgtYXhpc1xuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmNhbldyYXBYID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5XcmFwWF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvZGUgZm9yIHRoaXMgcHJvamVjdGlvbiwgZS5nLiAnRVBTRzo0MzI2Jy5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IENvZGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldENvZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvZGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWxpZGl0eSBleHRlbnQgZm9yIHRoaXMgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdW5pdHMgb2YgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vVW5pdHMuanNcIikuZGVmYXVsdH0gVW5pdHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldFVuaXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy51bml0c187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFtb3VudCBvZiBtZXRlcnMgcGVyIHVuaXQgb2YgdGhpcyBwcm9qZWN0aW9uLiAgSWYgdGhlIHByb2plY3Rpb24gaXNcbiAgICAgKiBub3QgY29uZmlndXJlZCB3aXRoIGBtZXRlcnNQZXJVbml0YCBvciBhIHVuaXRzIGlkZW50aWZpZXIsIHRoZSByZXR1cm4gaXNcbiAgICAgKiBgdW5kZWZpbmVkYC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBNZXRlcnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLmdldE1ldGVyc1BlclVuaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGVyc1BlclVuaXRfIHx8IE1FVEVSU19QRVJfVU5JVFt0aGlzLnVuaXRzX107XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHdvcmxkIGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0V29ybGRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndvcmxkRXh0ZW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYXhpcyBvcmllbnRhdGlvbiBvZiB0aGlzIHByb2plY3Rpb24uXG4gICAgICogRXhhbXBsZSB2YWx1ZXMgYXJlOlxuICAgICAqIGVudSAtIHRoZSBkZWZhdWx0IGVhc3RpbmcsIG5vcnRoaW5nLCBlbGV2YXRpb24uXG4gICAgICogbmV1IC0gbm9ydGhpbmcsIGVhc3RpbmcsIHVwIC0gdXNlZnVsIGZvciBcImxhdC9sb25nXCIgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyxcbiAgICAgKiAgICAgb3Igc291dGggb3JpZW50YXRlZCB0cmFuc3ZlcnNlIG1lcmNhdG9yLlxuICAgICAqIHdudSAtIHdlc3RpbmcsIG5vcnRoaW5nLCB1cCAtIHNvbWUgcGxhbmV0YXJ5IGNvb3JkaW5hdGUgc3lzdGVtcyBoYXZlXG4gICAgICogICAgIFwid2VzdCBwb3NpdGl2ZVwiIGNvb3JkaW5hdGUgc3lzdGVtc1xuICAgICAqIEByZXR1cm4ge3N0cmluZ30gQXhpcyBvcmllbnRhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuZ2V0QXhpc09yaWVudGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5heGlzT3JpZW50YXRpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSXMgdGhpcyBwcm9qZWN0aW9uIGEgZ2xvYmFsIHByb2plY3Rpb24gd2hpY2ggc3BhbnMgdGhlIHdob2xlIHdvcmxkP1xuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgZ2xvYmFsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5pc0dsb2JhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBpZiB0aGUgcHJvamVjdGlvbiBpcyBhIGdsb2JhbCBwcm9qZWN0aW9uIHdoaWNoIHNwYW5zIHRoZSB3aG9sZSB3b3JsZFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZ2xvYmFsIFdoZXRoZXIgdGhlIHByb2plY3Rpb24gaXMgZ2xvYmFsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRHbG9iYWwgPSBmdW5jdGlvbiAoZ2xvYmFsKSB7XG4gICAgICAgIHRoaXMuZ2xvYmFsXyA9IGdsb2JhbDtcbiAgICAgICAgdGhpcy5jYW5XcmFwWF8gPSAhIShnbG9iYWwgJiYgdGhpcy5leHRlbnRfKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRoZSBkZWZhdWx0IHRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXREZWZhdWx0VGlsZUdyaWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRUaWxlR3JpZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRpbGVHcmlkIFRoZSBkZWZhdWx0IHRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXREZWZhdWx0VGlsZUdyaWQgPSBmdW5jdGlvbiAodGlsZUdyaWQpIHtcbiAgICAgICAgdGhpcy5kZWZhdWx0VGlsZUdyaWRfID0gdGlsZUdyaWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHZhbGlkaXR5IGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUHJvamVjdGlvbi5wcm90b3R5cGUuc2V0RXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICB0aGlzLmV4dGVudF8gPSBleHRlbnQ7XG4gICAgICAgIHRoaXMuY2FuV3JhcFhfID0gISEodGhpcy5nbG9iYWxfICYmIGV4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHdvcmxkIGV4dGVudCBmb3IgdGhpcyBwcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gd29ybGRFeHRlbnQgV29ybGQgZXh0ZW50XG4gICAgICogICAgIFttaW5sb24sIG1pbmxhdCwgbWF4bG9uLCBtYXhsYXRdLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5zZXRXb3JsZEV4dGVudCA9IGZ1bmN0aW9uICh3b3JsZEV4dGVudCkge1xuICAgICAgICB0aGlzLndvcmxkRXh0ZW50XyA9IHdvcmxkRXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBnZXRQb2ludFJlc29sdXRpb24gZnVuY3Rpb24gKHNlZSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouZ2V0UG9pbnRSZXNvbHV0aW9ufVxuICAgICAqIGZvciB0aGlzIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6bnVtYmVyfSBmdW5jIEZ1bmN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFByb2plY3Rpb24ucHJvdG90eXBlLnNldEdldFBvaW50UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgICAgIHRoaXMuZ2V0UG9pbnRSZXNvbHV0aW9uRnVuY18gPSBmdW5jO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXN0b20gcG9pbnQgcmVzb2x1dGlvbiBmdW5jdGlvbiBmb3IgdGhpcyBwcm9qZWN0aW9uIChpZiBzZXQpLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlciwgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTpudW1iZXJ8dW5kZWZpbmVkfSBUaGUgY3VzdG9tIHBvaW50XG4gICAgICogcmVzb2x1dGlvbiBmdW5jdGlvbiAoaWYgc2V0KS5cbiAgICAgKi9cbiAgICBQcm9qZWN0aW9uLnByb3RvdHlwZS5nZXRQb2ludFJlc29sdXRpb25GdW5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRQb2ludFJlc29sdXRpb25GdW5jXztcbiAgICB9O1xuICAgIHJldHVybiBQcm9qZWN0aW9uO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFByb2plY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcm9qZWN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnMzg1N1xuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vVW5pdHMuanMnO1xuaW1wb3J0IHsgY29zaCB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBSYWRpdXMgb2YgV0dTODQgc3BoZXJlXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIFJBRElVUyA9IDYzNzgxMzc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBIQUxGX1NJWkUgPSBNYXRoLlBJICogUkFESVVTO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICovXG5leHBvcnQgdmFyIEVYVEVOVCA9IFstSEFMRl9TSVpFLCAtSEFMRl9TSVpFLCBIQUxGX1NJWkUsIEhBTEZfU0laRV07XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gKi9cbmV4cG9ydCB2YXIgV09STERfRVhURU5UID0gWy0xODAsIC04NSwgMTgwLCA4NV07XG4vKipcbiAqIE1heGltdW0gc2FmZSB2YWx1ZSBpbiB5IGRpcmVjdGlvblxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIE1BWF9TQUZFX1kgPSBSQURJVVMgKiBNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJIC8gMikpO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIG9iamVjdCBmb3Igd2ViL3NwaGVyaWNhbCBNZXJjYXRvciAoRVBTRzozODU3KS5cbiAqL1xudmFyIEVQU0czODU3UHJvamVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRVBTRzM4NTdQcm9qZWN0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIENvZGUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRVBTRzM4NTdQcm9qZWN0aW9uKGNvZGUpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGNvZGU6IGNvZGUsXG4gICAgICAgICAgICB1bml0czogVW5pdHMuTUVURVJTLFxuICAgICAgICAgICAgZXh0ZW50OiBFWFRFTlQsXG4gICAgICAgICAgICBnbG9iYWw6IHRydWUsXG4gICAgICAgICAgICB3b3JsZEV4dGVudDogV09STERfRVhURU5ULFxuICAgICAgICAgICAgZ2V0UG9pbnRSZXNvbHV0aW9uOiBmdW5jdGlvbiAocmVzb2x1dGlvbiwgcG9pbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x1dGlvbiAvIGNvc2gocG9pbnRbMV0gLyBSQURJVVMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIEVQU0czODU3UHJvamVjdGlvbjtcbn0oUHJvamVjdGlvbikpO1xuLyoqXG4gKiBQcm9qZWN0aW9ucyBlcXVhbCB0byBFUFNHOjM4NTcuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICovXG5leHBvcnQgdmFyIFBST0pFQ1RJT05TID0gW1xuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6Mzg1NycpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ0VQU0c6MTAyMTAwJyksXG4gICAgbmV3IEVQU0czODU3UHJvamVjdGlvbignRVBTRzoxMDIxMTMnKSxcbiAgICBuZXcgRVBTRzM4NTdQcm9qZWN0aW9uKCdFUFNHOjkwMDkxMycpLFxuICAgIG5ldyBFUFNHMzg1N1Byb2plY3Rpb24oJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3JyksXG5dO1xuLyoqXG4gKiBUcmFuc2Zvcm1hdGlvbiBmcm9tIEVQU0c6NDMyNiB0byBFUFNHOjM4NTcuXG4gKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBpbnB1dCBJbnB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpbWVuc2lvbl0gRGltZW5zaW9uIChkZWZhdWx0IGlzIGAyYCkuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRVBTRzQzMjYoaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHZhciBkaW1lbnNpb24gPSBvcHRfZGltZW5zaW9uID4gMSA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICAgIHZhciBvdXRwdXQgPSBvcHRfb3V0cHV0O1xuICAgIGlmIChvdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoZGltZW5zaW9uID4gMikge1xuICAgICAgICAgICAgLy8gcHJlc2VydmUgdmFsdWVzIGJleW9uZCBzZWNvbmQgZGltZW5zaW9uXG4gICAgICAgICAgICBvdXRwdXQgPSBpbnB1dC5zbGljZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3V0cHV0ID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gZGltZW5zaW9uKSB7XG4gICAgICAgIG91dHB1dFtpXSA9IChIQUxGX1NJWkUgKiBpbnB1dFtpXSkgLyAxODA7XG4gICAgICAgIHZhciB5ID0gUkFESVVTICogTWF0aC5sb2coTWF0aC50YW4oKE1hdGguUEkgKiAoK2lucHV0W2kgKyAxXSArIDkwKSkgLyAzNjApKTtcbiAgICAgICAgaWYgKHkgPiBNQVhfU0FGRV9ZKSB7XG4gICAgICAgICAgICB5ID0gTUFYX1NBRkVfWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh5IDwgLU1BWF9TQUZFX1kpIHtcbiAgICAgICAgICAgIHkgPSAtTUFYX1NBRkVfWTtcbiAgICAgICAgfVxuICAgICAgICBvdXRwdXRbaSArIDFdID0geTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gZnJvbSBFUFNHOjM4NTcgdG8gRVBTRzo0MzI2LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbiAoZGVmYXVsdCBpcyBgMmApLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gT3V0cHV0IGFycmF5IG9mIGNvb3JkaW5hdGUgdmFsdWVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9FUFNHNDMyNihpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIHZhciBsZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgdmFyIGRpbWVuc2lvbiA9IG9wdF9kaW1lbnNpb24gPiAxID8gb3B0X2RpbWVuc2lvbiA6IDI7XG4gICAgdmFyIG91dHB1dCA9IG9wdF9vdXRwdXQ7XG4gICAgaWYgKG91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChkaW1lbnNpb24gPiAyKSB7XG4gICAgICAgICAgICAvLyBwcmVzZXJ2ZSB2YWx1ZXMgYmV5b25kIHNlY29uZCBkaW1lbnNpb25cbiAgICAgICAgICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgb3V0cHV0W2ldID0gKDE4MCAqIGlucHV0W2ldKSAvIEhBTEZfU0laRTtcbiAgICAgICAgb3V0cHV0W2kgKyAxXSA9XG4gICAgICAgICAgICAoMzYwICogTWF0aC5hdGFuKE1hdGguZXhwKGlucHV0W2kgKyAxXSAvIFJBRElVUykpKSAvIE1hdGguUEkgLSA5MDtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVwc2czODU3LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcHJvai9lcHNnNDMyNlxuICovXG5pbXBvcnQgUHJvamVjdGlvbiBmcm9tICcuL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzIGZyb20gJy4vVW5pdHMuanMnO1xuLyoqXG4gKiBTZW1pLW1ham9yIHJhZGl1cyBvZiB0aGUgV0dTODQgZWxsaXBzb2lkLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBSQURJVVMgPSA2Mzc4MTM3O1xuLyoqXG4gKiBFeHRlbnQgb2YgdGhlIEVQU0c6NDMyNiBwcm9qZWN0aW9uIHdoaWNoIGlzIHRoZSB3aG9sZSB3b3JsZC5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICovXG5leHBvcnQgdmFyIEVYVEVOVCA9IFstMTgwLCAtOTAsIDE4MCwgOTBdO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgTUVURVJTX1BFUl9VTklUID0gKE1hdGguUEkgKiBSQURJVVMpIC8gMTgwO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBQcm9qZWN0aW9uIG9iamVjdCBmb3IgV0dTODQgZ2VvZ3JhcGhpYyBjb29yZGluYXRlcyAoRVBTRzo0MzI2KS5cbiAqXG4gKiBOb3RlIHRoYXQgT3BlbkxheWVycyBkb2VzIG5vdCBzdHJpY3RseSBjb21wbHkgd2l0aCB0aGUgRVBTRyBkZWZpbml0aW9uLlxuICogVGhlIEVQU0cgcmVnaXN0cnkgZGVmaW5lcyA0MzI2IGFzIGEgQ1JTIGZvciBMYXRpdHVkZSxMb25naXR1ZGUgKHkseCkuXG4gKiBPcGVuTGF5ZXJzIHRyZWF0cyBFUFNHOjQzMjYgYXMgYSBwc2V1ZG8tcHJvamVjdGlvbiwgd2l0aCB4LHkgY29vcmRpbmF0ZXMuXG4gKi9cbnZhciBFUFNHNDMyNlByb2plY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEVQU0c0MzI2UHJvamVjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29kZSBDb2RlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0X2F4aXNPcmllbnRhdGlvbl0gQXhpcyBvcmllbnRhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBFUFNHNDMyNlByb2plY3Rpb24oY29kZSwgb3B0X2F4aXNPcmllbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgY29kZTogY29kZSxcbiAgICAgICAgICAgIHVuaXRzOiBVbml0cy5ERUdSRUVTLFxuICAgICAgICAgICAgZXh0ZW50OiBFWFRFTlQsXG4gICAgICAgICAgICBheGlzT3JpZW50YXRpb246IG9wdF9heGlzT3JpZW50YXRpb24sXG4gICAgICAgICAgICBnbG9iYWw6IHRydWUsXG4gICAgICAgICAgICBtZXRlcnNQZXJVbml0OiBNRVRFUlNfUEVSX1VOSVQsXG4gICAgICAgICAgICB3b3JsZEV4dGVudDogRVhURU5ULFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgIH1cbiAgICByZXR1cm4gRVBTRzQzMjZQcm9qZWN0aW9uO1xufShQcm9qZWN0aW9uKSk7XG4vKipcbiAqIFByb2plY3Rpb25zIGVxdWFsIHRvIEVQU0c6NDMyNi5cbiAqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdD59XG4gKi9cbmV4cG9ydCB2YXIgUFJPSkVDVElPTlMgPSBbXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignQ1JTOjg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignRVBTRzo0MzI2JywgJ25ldScpLFxuICAgIG5ldyBFUFNHNDMyNlByb2plY3Rpb24oJ3VybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbigndXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0JyksXG4gICAgbmV3IEVQU0c0MzI2UHJvamVjdGlvbignaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwvc3JzL2Vwc2cueG1sIzQzMjYnLCAnbmV1JyksXG5dO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXBzZzQzMjYuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3Byb2ovcHJvamVjdGlvbnNcbiAqL1xuLyoqXG4gKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHQ+fVxuICovXG52YXIgY2FjaGUgPSB7fTtcbi8qKlxuICogQ2xlYXIgdGhlIHByb2plY3Rpb25zIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgY2FjaGUgPSB7fTtcbn1cbi8qKlxuICogR2V0IGEgY2FjaGVkIHByb2plY3Rpb24gYnkgY29kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBjb2RlIGZvciB0aGUgcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBUaGUgcHJvamVjdGlvbiAoaWYgY2FjaGVkKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldChjb2RlKSB7XG4gICAgcmV0dXJuIChjYWNoZVtjb2RlXSB8fFxuICAgICAgICBjYWNoZVtjb2RlLnJlcGxhY2UoL3VybjooeC0pP29nYzpkZWY6Y3JzOkVQU0c6KC4qOik/KFxcdyspJC8sICdFUFNHOiQzJyldIHx8XG4gICAgICAgIG51bGwpO1xufVxuLyoqXG4gKiBBZGQgYSBwcm9qZWN0aW9uIHRvIHRoZSBjYWNoZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2RlIFRoZSBwcm9qZWN0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFRoZSBwcm9qZWN0aW9uIHRvIGNhY2hlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGNvZGUsIHByb2plY3Rpb24pIHtcbiAgICBjYWNoZVtjb2RlXSA9IHByb2plY3Rpb247XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wcm9qZWN0aW9ucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcHJvai90cmFuc2Zvcm1zXG4gKi9cbmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9uPj59XG4gKi9cbnZhciB0cmFuc2Zvcm1zID0ge307XG4vKipcbiAqIENsZWFyIHRoZSB0cmFuc2Zvcm0gY2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICB0cmFuc2Zvcm1zID0ge307XG59XG4vKipcbiAqIFJlZ2lzdGVycyBhIGNvbnZlcnNpb24gZnVuY3Rpb24gdG8gY29udmVydCBjb29yZGluYXRlcyBmcm9tIHRoZSBzb3VyY2VcbiAqIHByb2plY3Rpb24gdG8gdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IGRlc3RpbmF0aW9uIERlc3RpbmF0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSB0cmFuc2Zvcm1GbiBUcmFuc2Zvcm0uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGQoc291cmNlLCBkZXN0aW5hdGlvbiwgdHJhbnNmb3JtRm4pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgICBpZiAoIShzb3VyY2VDb2RlIGluIHRyYW5zZm9ybXMpKSB7XG4gICAgICAgIHRyYW5zZm9ybXNbc291cmNlQ29kZV0gPSB7fTtcbiAgICB9XG4gICAgdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdID0gdHJhbnNmb3JtRm47XG59XG4vKipcbiAqIFVucmVnaXN0ZXJzIHRoZSBjb252ZXJzaW9uIGZ1bmN0aW9uIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgZnJvbSB0aGUgc291cmNlXG4gKiBwcm9qZWN0aW9uIHRvIHRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLiAgVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjbGVhbiB1cFxuICogY2FjaGVkIHRyYW5zZm9ybXMgZHVyaW5nIHRlc3RpbmcuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRoZSB1bnJlZ2lzdGVyZWQgdHJhbnNmb3JtLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgc291cmNlQ29kZSA9IHNvdXJjZS5nZXRDb2RlKCk7XG4gICAgdmFyIGRlc3RpbmF0aW9uQ29kZSA9IGRlc3RpbmF0aW9uLmdldENvZGUoKTtcbiAgICB2YXIgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXVtkZXN0aW5hdGlvbkNvZGVdO1xuICAgIGRlbGV0ZSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgaWYgKGlzRW1wdHkodHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkpIHtcbiAgICAgICAgZGVsZXRlIHRyYW5zZm9ybXNbc291cmNlQ29kZV07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vKipcbiAqIEdldCBhIHRyYW5zZm9ybSBnaXZlbiBhIHNvdXJjZSBjb2RlIGFuZCBhIGRlc3RpbmF0aW9uIGNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc291cmNlQ29kZSBUaGUgY29kZSBmb3IgdGhlIHNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtzdHJpbmd9IGRlc3RpbmF0aW9uQ29kZSBUaGUgY29kZSBmb3IgdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufHVuZGVmaW5lZH0gVGhlIHRyYW5zZm9ybSBmdW5jdGlvbiAoaWYgZm91bmQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0KHNvdXJjZUNvZGUsIGRlc3RpbmF0aW9uQ29kZSkge1xuICAgIHZhciB0cmFuc2Zvcm07XG4gICAgaWYgKHNvdXJjZUNvZGUgaW4gdHJhbnNmb3JtcyAmJiBkZXN0aW5hdGlvbkNvZGUgaW4gdHJhbnNmb3Jtc1tzb3VyY2VDb2RlXSkge1xuICAgICAgICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1zW3NvdXJjZUNvZGVdW2Rlc3RpbmF0aW9uQ29kZV07XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10cmFuc2Zvcm1zLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zcGhlcmVcbiAqL1xuaW1wb3J0IEdlb21ldHJ5VHlwZSBmcm9tICcuL2dlb20vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCB7IHRvRGVncmVlcywgdG9SYWRpYW5zIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBvcHRpb25zIGZvciB0aGUge0BsaW5rIGdldExlbmd0aH0gb3Ige0BsaW5rIGdldEFyZWF9XG4gKiBmdW5jdGlvbnMuXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTcGhlcmVNZXRyaWNPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddXG4gKiBQcm9qZWN0aW9uIG9mIHRoZSAgZ2VvbWV0cnkuICBCeSBkZWZhdWx0LCB0aGUgZ2VvbWV0cnkgaXMgYXNzdW1lZCB0byBiZSBpblxuICogV2ViIE1lcmNhdG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyYWRpdXM9NjM3MTAwOC44XSBTcGhlcmUgcmFkaXVzLiAgQnkgZGVmYXVsdCwgdGhlXG4gKiBbbWVhbiBFYXJ0aCByYWRpdXNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VhcnRoX3JhZGl1cyNNZWFuX3JhZGl1cylcbiAqIGZvciB0aGUgV0dTODQgZWxsaXBzb2lkIGlzIHVzZWQuXG4gKi9cbi8qKlxuICogVGhlIG1lYW4gRWFydGggcmFkaXVzICgxLzMgKiAoMmEgKyBiKSkgZm9yIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FYXJ0aF9yYWRpdXMjTWVhbl9yYWRpdXNcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgREVGQVVMVF9SQURJVVMgPSA2MzcxMDA4Ljg7XG4vKipcbiAqIEdldCB0aGUgZ3JlYXQgY2lyY2xlIGRpc3RhbmNlIChpbiBtZXRlcnMpIGJldHdlZW4gdHdvIGdlb2dyYXBoaWMgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge0FycmF5fSBjMSBTdGFydGluZyBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheX0gYzIgRW5kaW5nIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9yYWRpdXNdIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS4gIERlZmF1bHRzIHRvIHRoZSBFYXJ0aCdzXG4gKiAgICAgbWVhbiByYWRpdXMgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGdyZWF0IGNpcmNsZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb2ludHMgKGluIG1ldGVycykuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREaXN0YW5jZShjMSwgYzIsIG9wdF9yYWRpdXMpIHtcbiAgICB2YXIgcmFkaXVzID0gb3B0X3JhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgICB2YXIgbGF0MSA9IHRvUmFkaWFucyhjMVsxXSk7XG4gICAgdmFyIGxhdDIgPSB0b1JhZGlhbnMoYzJbMV0pO1xuICAgIHZhciBkZWx0YUxhdEJ5MiA9IChsYXQyIC0gbGF0MSkgLyAyO1xuICAgIHZhciBkZWx0YUxvbkJ5MiA9IHRvUmFkaWFucyhjMlswXSAtIGMxWzBdKSAvIDI7XG4gICAgdmFyIGEgPSBNYXRoLnNpbihkZWx0YUxhdEJ5MikgKiBNYXRoLnNpbihkZWx0YUxhdEJ5MikgK1xuICAgICAgICBNYXRoLnNpbihkZWx0YUxvbkJ5MikgKlxuICAgICAgICAgICAgTWF0aC5zaW4oZGVsdGFMb25CeTIpICpcbiAgICAgICAgICAgIE1hdGguY29zKGxhdDEpICpcbiAgICAgICAgICAgIE1hdGguY29zKGxhdDIpO1xuICAgIHJldHVybiAyICogcmFkaXVzICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpO1xufVxuLyoqXG4gKiBHZXQgdGhlIGN1bXVsYXRpdmUgZ3JlYXQgY2lyY2xlIGxlbmd0aCBvZiBsaW5lc3RyaW5nIGNvb3JkaW5hdGVzIChnZW9ncmFwaGljKS5cbiAqIEBwYXJhbSB7QXJyYXl9IGNvb3JkaW5hdGVzIExpbmVzdHJpbmcgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzIHRvIHVzZS5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGxlbmd0aCAoaW4gbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGVuZ3RoSW50ZXJuYWwoY29vcmRpbmF0ZXMsIHJhZGl1cykge1xuICAgIHZhciBsZW5ndGggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpIC0gMTsgKytpKSB7XG4gICAgICAgIGxlbmd0aCArPSBnZXREaXN0YW5jZShjb29yZGluYXRlc1tpXSwgY29vcmRpbmF0ZXNbaSArIDFdLCByYWRpdXMpO1xuICAgIH1cbiAgICByZXR1cm4gbGVuZ3RoO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBsZW5ndGggb2YgYSBnZW9tZXRyeS4gIFRoaXMgbGVuZ3RoIGlzIHRoZSBzdW0gb2YgdGhlXG4gKiBncmVhdCBjaXJjbGUgZGlzdGFuY2VzIGJldHdlZW4gY29vcmRpbmF0ZXMuICBGb3IgcG9seWdvbnMsIHRoZSBsZW5ndGggaXNcbiAqIHRoZSBzdW0gb2YgYWxsIHJpbmdzLiAgRm9yIHBvaW50cywgdGhlIGxlbmd0aCBpcyB6ZXJvLiAgRm9yIG11bHRpLXBhcnRcbiAqIGdlb21ldHJpZXMsIHRoZSBsZW5ndGggaXMgdGhlIHN1bSBvZiB0aGUgbGVuZ3RoIG9mIGVhY2ggcGFydC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEEgZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge1NwaGVyZU1ldHJpY09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucyBmb3IgdGhlXG4gKiBsZW5ndGggY2FsY3VsYXRpb24uICBCeSBkZWZhdWx0LCBnZW9tZXRyaWVzIGFyZSBhc3N1bWVkIHRvIGJlIGluICdFUFNHOjM4NTcnLlxuICogWW91IGNhbiBjaGFuZ2UgdGhpcyBieSBwcm92aWRpbmcgYSBgcHJvamVjdGlvbmAgb3B0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgc3BoZXJpY2FsIGxlbmd0aCAoaW4gbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExlbmd0aChnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgIHZhciByYWRpdXMgPSBvcHRpb25zLnJhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiB8fCAnRVBTRzozODU3JztcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcbiAgICBpZiAodHlwZSAhPT0gR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT04pIHtcbiAgICAgICAgZ2VvbWV0cnkgPSBnZW9tZXRyeS5jbG9uZSgpLnRyYW5zZm9ybShwcm9qZWN0aW9uLCAnRVBTRzo0MzI2Jyk7XG4gICAgfVxuICAgIHZhciBsZW5ndGggPSAwO1xuICAgIHZhciBjb29yZGluYXRlcywgY29vcmRzLCBpLCBpaSwgaiwgamo7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPSU5UOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVDoge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGxlbmd0aCA9IGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLlBPTFlHT046IHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBjb29yZGluYXRlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoICs9IGdldExlbmd0aEludGVybmFsKGNvb3JkaW5hdGVzW2ldLCByYWRpdXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjoge1xuICAgICAgICAgICAgY29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldENvb3JkaW5hdGVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjb29yZHMgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGNvb3Jkcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlbmd0aCArPSBnZXRMZW5ndGhJbnRlcm5hbChjb29yZHNbal0sIHJhZGl1cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTjoge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJpZXMgPSBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL0dlb21ldHJ5Q29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqLyAoZ2VvbWV0cnkpLmdldEdlb21ldHJpZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gZ2VvbWV0cmllcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgbGVuZ3RoICs9IGdldExlbmd0aChnZW9tZXRyaWVzW2ldLCBvcHRfb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGVuZ3RoO1xufVxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzcGhlcmljYWwgYXJlYSBmb3IgYSBsaXN0IG9mIGNvb3JkaW5hdGVzLlxuICpcbiAqIFtSZWZlcmVuY2VdKGh0dHBzOi8vdHJzLmpwbC5uYXNhLmdvdi9oYW5kbGUvMjAxNC80MDQwOSlcbiAqIFJvYmVydC4gRy4gQ2hhbWJlcmxhaW4gYW5kIFdpbGxpYW0gSC4gRHVxdWV0dGUsIFwiU29tZSBBbGdvcml0aG1zIGZvclxuICogUG9seWdvbnMgb24gYSBTcGhlcmVcIiwgSlBMIFB1YmxpY2F0aW9uIDA3LTAzLCBKZXQgUHJvcHVsc2lvblxuICogTGFib3JhdG9yeSwgUGFzYWRlbmEsIENBLCBKdW5lIDIwMDdcbiAqXG4gKiBAcGFyYW0ge0FycmF5PGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgTGlzdCBvZiBjb29yZGluYXRlcyBvZiBhIGxpbmVhclxuICogcmluZy4gSWYgdGhlIHJpbmcgaXMgb3JpZW50ZWQgY2xvY2t3aXNlLCB0aGUgYXJlYSB3aWxsIGJlIHBvc2l0aXZlLFxuICogb3RoZXJ3aXNlIGl0IHdpbGwgYmUgbmVnYXRpdmUuXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIFRoZSBzcGhlcmUgcmFkaXVzLlxuICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChpbiBzcXVhcmUgbWV0ZXJzKS5cbiAqL1xuZnVuY3Rpb24gZ2V0QXJlYUludGVybmFsKGNvb3JkaW5hdGVzLCByYWRpdXMpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgdmFyIGxlbiA9IGNvb3JkaW5hdGVzLmxlbmd0aDtcbiAgICB2YXIgeDEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVswXTtcbiAgICB2YXIgeTEgPSBjb29yZGluYXRlc1tsZW4gLSAxXVsxXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciB4MiA9IGNvb3JkaW5hdGVzW2ldWzBdO1xuICAgICAgICB2YXIgeTIgPSBjb29yZGluYXRlc1tpXVsxXTtcbiAgICAgICAgYXJlYSArPVxuICAgICAgICAgICAgdG9SYWRpYW5zKHgyIC0geDEpICpcbiAgICAgICAgICAgICAgICAoMiArIE1hdGguc2luKHRvUmFkaWFucyh5MSkpICsgTWF0aC5zaW4odG9SYWRpYW5zKHkyKSkpO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gKGFyZWEgKiByYWRpdXMgKiByYWRpdXMpIC8gMi4wO1xufVxuLyoqXG4gKiBHZXQgdGhlIHNwaGVyaWNhbCBhcmVhIG9mIGEgZ2VvbWV0cnkuICBUaGlzIGlzIHRoZSBhcmVhIChpbiBtZXRlcnMpIGFzc3VtaW5nXG4gKiB0aGF0IHBvbHlnb24gZWRnZXMgYXJlIHNlZ21lbnRzIG9mIGdyZWF0IGNpcmNsZXMgb24gYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBBIGdlb21ldHJ5LlxuICogQHBhcmFtIHtTcGhlcmVNZXRyaWNPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMgZm9yIHRoZSBhcmVhXG4gKiAgICAgY2FsY3VsYXRpb24uICBCeSBkZWZhdWx0LCBnZW9tZXRyaWVzIGFyZSBhc3N1bWVkIHRvIGJlIGluICdFUFNHOjM4NTcnLlxuICogICAgIFlvdSBjYW4gY2hhbmdlIHRoaXMgYnkgcHJvdmlkaW5nIGEgYHByb2plY3Rpb25gIG9wdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIHNwaGVyaWNhbCBhcmVhIChpbiBzcXVhcmUgbWV0ZXJzKS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEFyZWEoZ2VvbWV0cnksIG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgcmFkaXVzID0gb3B0aW9ucy5yYWRpdXMgfHwgREVGQVVMVF9SQURJVVM7XG4gICAgdmFyIHByb2plY3Rpb24gPSBvcHRpb25zLnByb2plY3Rpb24gfHwgJ0VQU0c6Mzg1Nyc7XG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XG4gICAgaWYgKHR5cGUgIT09IEdlb21ldHJ5VHlwZS5HRU9NRVRSWV9DT0xMRUNUSU9OKSB7XG4gICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnkuY2xvbmUoKS50cmFuc2Zvcm0ocHJvamVjdGlvbiwgJ0VQU0c6NDMyNicpO1xuICAgIH1cbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgdmFyIGNvb3JkaW5hdGVzLCBjb29yZHMsIGksIGlpLCBqLCBqajtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuUE9JTlQ6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UOlxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcbiAgICAgICAgY2FzZSBHZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkxJTkVBUl9SSU5HOiB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xuICAgICAgICAgICAgYXJlYSA9IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlc1swXSwgcmFkaXVzKSk7XG4gICAgICAgICAgICBmb3IgKGkgPSAxLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICBhcmVhIC09IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZGluYXRlc1tpXSwgcmFkaXVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIEdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOiB7XG4gICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovIChnZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gY29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGNvb3JkcyA9IGNvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgICAgIGFyZWEgKz0gTWF0aC5hYnMoZ2V0QXJlYUludGVybmFsKGNvb3Jkc1swXSwgcmFkaXVzKSk7XG4gICAgICAgICAgICAgICAgZm9yIChqID0gMSwgamogPSBjb29yZHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBhcmVhIC09IE1hdGguYWJzKGdldEFyZWFJbnRlcm5hbChjb29yZHNbal0sIHJhZGl1cykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgR2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046IHtcbiAgICAgICAgICAgIHZhciBnZW9tZXRyaWVzID0gXG4gICAgICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vZ2VvbS9HZW9tZXRyeUNvbGxlY3Rpb24uanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5KS5nZXRHZW9tZXRyaWVzKCk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGdlb21ldHJpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgICAgIGFyZWEgKz0gZ2V0QXJlYShnZW9tZXRyaWVzW2ldLCBvcHRfb3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6ICcgKyB0eXBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBhdCB0aGUgZ2l2ZW4gZGlzdGFuY2UgYW5kIGJlYXJpbmcgZnJvbSBgYzFgLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGMxIFRoZSBvcmlnaW4gcG9pbnQgKGBbbG9uLCBsYXRdYCBpbiBkZWdyZWVzKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZSBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGJldHdlZW4gdGhlIG9yaWdpblxuICogICAgIHBvaW50IGFuZCB0aGUgdGFyZ2V0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IGJlYXJpbmcgVGhlIGJlYXJpbmcgKGluIHJhZGlhbnMpLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcmFkaXVzXSBUaGUgc3BoZXJlIHJhZGl1cyB0byB1c2UuICBEZWZhdWx0cyB0byB0aGUgRWFydGgnc1xuICogICAgIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGhlIHRhcmdldCBwb2ludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9mZnNldChjMSwgZGlzdGFuY2UsIGJlYXJpbmcsIG9wdF9yYWRpdXMpIHtcbiAgICB2YXIgcmFkaXVzID0gb3B0X3JhZGl1cyB8fCBERUZBVUxUX1JBRElVUztcbiAgICB2YXIgbGF0MSA9IHRvUmFkaWFucyhjMVsxXSk7XG4gICAgdmFyIGxvbjEgPSB0b1JhZGlhbnMoYzFbMF0pO1xuICAgIHZhciBkQnlSID0gZGlzdGFuY2UgLyByYWRpdXM7XG4gICAgdmFyIGxhdCA9IE1hdGguYXNpbihNYXRoLnNpbihsYXQxKSAqIE1hdGguY29zKGRCeVIpICtcbiAgICAgICAgTWF0aC5jb3MobGF0MSkgKiBNYXRoLnNpbihkQnlSKSAqIE1hdGguY29zKGJlYXJpbmcpKTtcbiAgICB2YXIgbG9uID0gbG9uMSArXG4gICAgICAgIE1hdGguYXRhbjIoTWF0aC5zaW4oYmVhcmluZykgKiBNYXRoLnNpbihkQnlSKSAqIE1hdGguY29zKGxhdDEpLCBNYXRoLmNvcyhkQnlSKSAtIE1hdGguc2luKGxhdDEpICogTWF0aC5zaW4obGF0KSk7XG4gICAgcmV0dXJuIFt0b0RlZ3JlZXMobG9uKSwgdG9EZWdyZWVzKGxhdCldO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3BoZXJlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9wcm9qXG4gKi9cbi8qKlxuICogVGhlIG9sL3Byb2ogbW9kdWxlIHN0b3JlczpcbiAqICogYSBsaXN0IG9mIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufVxuICogb2JqZWN0cywgb25lIGZvciBlYWNoIHByb2plY3Rpb24gc3VwcG9ydGVkIGJ5IHRoZSBhcHBsaWNhdGlvblxuICogKiBhIGxpc3Qgb2YgdHJhbnNmb3JtIGZ1bmN0aW9ucyBuZWVkZWQgdG8gY29udmVydCBjb29yZGluYXRlcyBpbiBvbmUgcHJvamVjdGlvblxuICogaW50byBhbm90aGVyLlxuICpcbiAqIFRoZSBzdGF0aWMgZnVuY3Rpb25zIGFyZSB0aGUgbWV0aG9kcyB1c2VkIHRvIG1haW50YWluIHRoZXNlLlxuICogRWFjaCB0cmFuc2Zvcm0gZnVuY3Rpb24gY2FuIGhhbmRsZSBub3Qgb25seSBzaW1wbGUgY29vcmRpbmF0ZSBwYWlycywgYnV0IGFsc29cbiAqIGxhcmdlIGFycmF5cyBvZiBjb29yZGluYXRlcyBzdWNoIGFzIHZlY3RvciBnZW9tZXRyaWVzLlxuICpcbiAqIFdoZW4gbG9hZGVkLCB0aGUgbGlicmFyeSBhZGRzIHByb2plY3Rpb24gb2JqZWN0cyBmb3IgRVBTRzo0MzI2IChXR1M4NFxuICogZ2VvZ3JhcGhpYyBjb29yZGluYXRlcykgYW5kIEVQU0c6Mzg1NyAoV2ViIG9yIFNwaGVyaWNhbCBNZXJjYXRvciwgYXMgdXNlZFxuICogZm9yIGV4YW1wbGUgYnkgQmluZyBNYXBzIG9yIE9wZW5TdHJlZXRNYXApLCB0b2dldGhlciB3aXRoIHRoZSByZWxldmFudFxuICogdHJhbnNmb3JtIGZ1bmN0aW9ucy5cbiAqXG4gKiBBZGRpdGlvbmFsIHRyYW5zZm9ybXMgbWF5IGJlIGFkZGVkIGJ5IHVzaW5nIHRoZSBodHRwOi8vcHJvajRqcy5vcmcvXG4gKiBsaWJyYXJ5ICh2ZXJzaW9uIDIuMiBvciBsYXRlcikuIFlvdSBjYW4gdXNlIHRoZSBmdWxsIGJ1aWxkIHN1cHBsaWVkIGJ5XG4gKiBQcm9qNGpzLCBvciBjcmVhdGUgYSBjdXN0b20gYnVpbGQgdG8gc3VwcG9ydCB0aG9zZSBwcm9qZWN0aW9ucyB5b3UgbmVlZDsgc2VlXG4gKiB0aGUgUHJvajRqcyB3ZWJzaXRlIGZvciBob3cgdG8gZG8gdGhpcy4gWW91IGFsc28gbmVlZCB0aGUgUHJvajRqcyBkZWZpbml0aW9uc1xuICogZm9yIHRoZSByZXF1aXJlZCBwcm9qZWN0aW9ucy4gVGhlc2UgZGVmaW5pdGlvbnMgY2FuIGJlIG9idGFpbmVkIGZyb21cbiAqIGh0dHBzOi8vZXBzZy5pby8sIGFuZCBhcmUgYSBKUyBmdW5jdGlvbiwgc28gY2FuIGJlIGxvYWRlZCBpbiBhIHNjcmlwdFxuICogdGFnIChhcyBpbiB0aGUgZXhhbXBsZXMpIG9yIHBhc3RlZCBpbnRvIHlvdXIgYXBwbGljYXRpb24uXG4gKlxuICogQWZ0ZXIgYWxsIHJlcXVpcmVkIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgYXJlIGFkZGVkIHRvIHByb2o0J3MgcmVnaXN0cnkgKGJ5XG4gKiB1c2luZyBgcHJvajQuZGVmcygpYCksIHNpbXBseSBjYWxsIGByZWdpc3Rlcihwcm9qNClgIGZyb20gdGhlIGBvbC9wcm9qL3Byb2o0YFxuICogcGFja2FnZS4gRXhpc3RpbmcgdHJhbnNmb3JtcyBhcmUgbm90IGNoYW5nZWQgYnkgdGhpcyBmdW5jdGlvbi4gU2VlXG4gKiBleGFtcGxlcy93bXMtaW1hZ2UtY3VzdG9tLXByb2ogZm9yIGFuIGV4YW1wbGUgb2YgdGhpcy5cbiAqXG4gKiBBZGRpdGlvbmFsIHByb2plY3Rpb24gZGVmaW5pdGlvbnMgY2FuIGJlIHJlZ2lzdGVyZWQgd2l0aCBgcHJvajQuZGVmcygpYCBhbnlcbiAqIHRpbWUuIEp1c3QgbWFrZSBzdXJlIHRvIGNhbGwgYHJlZ2lzdGVyKHByb2o0KWAgYWdhaW47IGZvciBleGFtcGxlLCB3aXRoIHVzZXItc3VwcGxpZWQgZGF0YSB3aGVyZSB5b3UgZG9uJ3RcbiAqIGtub3cgaW4gYWR2YW5jZSB3aGF0IHByb2plY3Rpb25zIGFyZSBuZWVkZWQsIHlvdSBjYW4gaW5pdGlhbGx5IGxvYWQgbWluaW1hbFxuICogc3VwcG9ydCBhbmQgdGhlbiBsb2FkIHdoaWNoZXZlciBhcmUgcmVxdWVzdGVkLlxuICpcbiAqIE5vdGUgdGhhdCBQcm9qNGpzIGRvZXMgbm90IHN1cHBvcnQgcHJvamVjdGlvbiBleHRlbnRzLiBJZiB5b3Ugd2FudCB0byBhZGRcbiAqIG9uZSBmb3IgY3JlYXRpbmcgZGVmYXVsdCB0aWxlIGdyaWRzLCB5b3UgY2FuIGFkZCBpdCBhZnRlciB0aGUgUHJvamVjdGlvblxuICogb2JqZWN0IGhhcyBiZWVuIGNyZWF0ZWQgd2l0aCBgc2V0RXh0ZW50YCwgZm9yIGV4YW1wbGUsXG4gKiBgZ2V0KCdFUFNHOjEyMzQnKS5zZXRFeHRlbnQoZXh0ZW50KWAuXG4gKlxuICogSW4gYWRkaXRpb24gdG8gUHJvajRqcyBzdXBwb3J0LCBhbnkgdHJhbnNmb3JtIGZ1bmN0aW9ucyBjYW4gYmUgYWRkZWQgd2l0aFxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qLmFkZENvb3JkaW5hdGVUcmFuc2Zvcm1zfS4gVG8gdXNlIHRoaXMsIHlvdSBtdXN0IGZpcnN0IGNyZWF0ZVxuICogYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn0gb2JqZWN0IGZvciB0aGUgbmV3IHByb2plY3Rpb24gYW5kIGFkZCBpdCB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkUHJvamVjdGlvbn0uIFlvdSBjYW4gdGhlbiBhZGQgdGhlIGZvcndhcmQgYW5kIGludmVyc2VcbiAqIGZ1bmN0aW9ucyB3aXRoIHtAbGluayBtb2R1bGU6b2wvcHJvai5hZGRDb29yZGluYXRlVHJhbnNmb3Jtc30uIFNlZVxuICogZXhhbXBsZXMvd21zLWN1c3RvbS1wcm9qIGZvciBhbiBleGFtcGxlIG9mIHRoaXMuXG4gKlxuICogTm90ZSB0aGF0IGlmIG5vIHRyYW5zZm9ybXMgYXJlIG5lZWRlZCBhbmQgeW91IG9ubHkgbmVlZCB0byBkZWZpbmUgdGhlXG4gKiBwcm9qZWN0aW9uLCBqdXN0IGFkZCBhIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSB3aXRoXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3Byb2ouYWRkUHJvamVjdGlvbn0uIFNlZSBleGFtcGxlcy93bXMtbm8tcHJvaiBmb3IgYW4gZXhhbXBsZSBvZlxuICogdGhpcy5cbiAqL1xuaW1wb3J0IFByb2plY3Rpb24gZnJvbSAnLi9wcm9qL1Byb2plY3Rpb24uanMnO1xuaW1wb3J0IFVuaXRzLCB7IE1FVEVSU19QRVJfVU5JVCB9IGZyb20gJy4vcHJvai9Vbml0cy5qcyc7XG5pbXBvcnQgeyBQUk9KRUNUSU9OUyBhcyBFUFNHMzg1N19QUk9KRUNUSU9OUywgZnJvbUVQU0c0MzI2LCB0b0VQU0c0MzI2LCB9IGZyb20gJy4vcHJvai9lcHNnMzg1Ny5qcyc7XG5pbXBvcnQgeyBQUk9KRUNUSU9OUyBhcyBFUFNHNDMyNl9QUk9KRUNUSU9OUyB9IGZyb20gJy4vcHJvai9lcHNnNDMyNi5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkUHJvaiwgY2xlYXIgYXMgY2xlYXJQcm9qLCBnZXQgYXMgZ2V0UHJvaiwgfSBmcm9tICcuL3Byb2ovcHJvamVjdGlvbnMuanMnO1xuaW1wb3J0IHsgYWRkIGFzIGFkZFRyYW5zZm9ybUZ1bmMsIGNsZWFyIGFzIGNsZWFyVHJhbnNmb3JtRnVuY3MsIGdldCBhcyBnZXRUcmFuc2Zvcm1GdW5jLCB9IGZyb20gJy4vcHJvai90cmFuc2Zvcm1zLmpzJztcbmltcG9ydCB7IGFwcGx5VHJhbnNmb3JtLCBnZXRXaWR0aCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNsYW1wLCBtb2R1bG8gfSBmcm9tICcuL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0RGlzdGFuY2UgfSBmcm9tICcuL3NwaGVyZS5qcyc7XG5pbXBvcnQgeyBnZXRXb3JsZHNBd2F5IH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQSBwcm9qZWN0aW9uIGFzIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSwgU1JTIGlkZW50aWZpZXJcbiAqIHN0cmluZyBvciB1bmRlZmluZWQuXG4gKiBAdHlwZWRlZiB7UHJvamVjdGlvbnxzdHJpbmd8dW5kZWZpbmVkfSBQcm9qZWN0aW9uTGlrZVxuICogQGFwaVxuICovXG4vKipcbiAqIEEgdHJhbnNmb3JtIGZ1bmN0aW9uIGFjY2VwdHMgYW4gYXJyYXkgb2YgaW5wdXQgY29vcmRpbmF0ZSB2YWx1ZXMsIGFuIG9wdGlvbmFsXG4gKiBvdXRwdXQgYXJyYXksIGFuZCBhbiBvcHRpb25hbCBkaW1lbnNpb24gKGRlZmF1bHQgc2hvdWxkIGJlIDIpLiAgVGhlIGZ1bmN0aW9uXG4gKiB0cmFuc2Zvcm1zIHRoZSBpbnB1dCBjb29yZGluYXRlIHZhbHVlcywgcG9wdWxhdGVzIHRoZSBvdXRwdXQgYXJyYXksIGFuZFxuICogcmV0dXJucyB0aGUgb3V0cHV0IGFycmF5LlxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihBcnJheTxudW1iZXI+LCBBcnJheTxudW1iZXI+PSwgbnVtYmVyPSk6IEFycmF5PG51bWJlcj59IFRyYW5zZm9ybUZ1bmN0aW9uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB7IE1FVEVSU19QRVJfVU5JVCB9O1xuZXhwb3J0IHsgUHJvamVjdGlvbiB9O1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGlucHV0IElucHV0IGNvb3JkaW5hdGUgYXJyYXkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfb3V0cHV0XSBPdXRwdXQgYXJyYXkgb2YgY29vcmRpbmF0ZSB2YWx1ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kaW1lbnNpb25dIERpbWVuc2lvbi5cbiAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dCBjb29yZGluYXRlIGFycmF5IChuZXcgYXJyYXksIHNhbWUgY29vcmRpbmF0ZVxuICogICAgIHZhbHVlcykuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVRyYW5zZm9ybShpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIHZhciBvdXRwdXQ7XG4gICAgaWYgKG9wdF9vdXRwdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBpbnB1dC5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBvcHRfb3V0cHV0W2ldID0gaW5wdXRbaV07XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0ID0gb3B0X291dHB1dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG91dHB1dCA9IGlucHV0LnNsaWNlKCk7XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQgY29vcmRpbmF0ZSBhcnJheS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF9vdXRwdXRdIE91dHB1dCBhcnJheSBvZiBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpbWVuc2lvbl0gRGltZW5zaW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW5wdXQgY29vcmRpbmF0ZSBhcnJheSAoc2FtZSBhcnJheSBhcyBpbnB1dCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpZGVudGl0eVRyYW5zZm9ybShpbnB1dCwgb3B0X291dHB1dCwgb3B0X2RpbWVuc2lvbikge1xuICAgIGlmIChvcHRfb3V0cHV0ICE9PSB1bmRlZmluZWQgJiYgaW5wdXQgIT09IG9wdF9vdXRwdXQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gaW5wdXQubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgb3B0X291dHB1dFtpXSA9IGlucHV0W2ldO1xuICAgICAgICB9XG4gICAgICAgIGlucHV0ID0gb3B0X291dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0O1xufVxuLyoqXG4gKiBBZGQgYSBQcm9qZWN0aW9uIG9iamVjdCB0byB0aGUgbGlzdCBvZiBzdXBwb3J0ZWQgcHJvamVjdGlvbnMgdGhhdCBjYW4gYmVcbiAqIGxvb2tlZCB1cCBieSB0aGVpciBjb2RlLlxuICpcbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbiBQcm9qZWN0aW9uIGluc3RhbmNlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgYWRkUHJvaihwcm9qZWN0aW9uLmdldENvZGUoKSwgcHJvamVjdGlvbik7XG4gICAgYWRkVHJhbnNmb3JtRnVuYyhwcm9qZWN0aW9uLCBwcm9qZWN0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zIFByb2plY3Rpb25zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvamVjdGlvbnMocHJvamVjdGlvbnMpIHtcbiAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGFkZFByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBGZXRjaGVzIGEgUHJvamVjdGlvbiBvYmplY3QgZm9yIHRoZSBjb2RlIHNwZWNpZmllZC5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uTGlrZSBFaXRoZXIgYSBjb2RlIHN0cmluZyB3aGljaCBpc1xuICogICAgIGEgY29tYmluYXRpb24gb2YgYXV0aG9yaXR5IGFuZCBpZGVudGlmaWVyIHN1Y2ggYXMgXCJFUFNHOjQzMjZcIiwgb3IgYW5cbiAqICAgICBleGlzdGluZyBwcm9qZWN0aW9uIG9iamVjdCwgb3IgdW5kZWZpbmVkLlxuICogQHJldHVybiB7UHJvamVjdGlvbn0gUHJvamVjdGlvbiBvYmplY3QsIG9yIG51bGwgaWYgbm90IGluIGxpc3QuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQocHJvamVjdGlvbkxpa2UpIHtcbiAgICByZXR1cm4gdHlwZW9mIHByb2plY3Rpb25MaWtlID09PSAnc3RyaW5nJ1xuICAgICAgICA/IGdldFByb2ooLyoqIEB0eXBlIHtzdHJpbmd9ICovIChwcm9qZWN0aW9uTGlrZSkpXG4gICAgICAgIDogLyoqIEB0eXBlIHtQcm9qZWN0aW9ufSAqLyAocHJvamVjdGlvbkxpa2UpIHx8IG51bGw7XG59XG4vKipcbiAqIEdldCB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgcG9pbnQgaW4gZGVncmVlcyBvciBkaXN0YW5jZSB1bml0cy5cbiAqIEZvciBwcm9qZWN0aW9ucyB3aXRoIGRlZ3JlZXMgYXMgdGhlIHVuaXQgdGhpcyB3aWxsIHNpbXBseSByZXR1cm4gdGhlXG4gKiBwcm92aWRlZCByZXNvbHV0aW9uLiBGb3Igb3RoZXIgcHJvamVjdGlvbnMgdGhlIHBvaW50IHJlc29sdXRpb24gaXNcbiAqIGJ5IGRlZmF1bHQgZXN0aW1hdGVkIGJ5IHRyYW5zZm9ybWluZyB0aGUgJ3BvaW50JyBwaXhlbCB0byBFUFNHOjQzMjYsXG4gKiBtZWFzdXJpbmcgaXRzIHdpZHRoIGFuZCBoZWlnaHQgb24gdGhlIG5vcm1hbCBzcGhlcmUsXG4gKiBhbmQgdGFraW5nIHRoZSBhdmVyYWdlIG9mIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxuICogQSBjdXN0b20gZnVuY3Rpb24gY2FuIGJlIHByb3ZpZGVkIGZvciBhIHNwZWNpZmljIHByb2plY3Rpb24sIGVpdGhlclxuICogYnkgc2V0dGluZyB0aGUgYGdldFBvaW50UmVzb2x1dGlvbmAgb3B0aW9uIGluIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9wcm9qL1Byb2plY3Rpb25+UHJvamVjdGlvbn0gY29uc3RydWN0b3Igb3IgYnkgdXNpbmdcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9uflByb2plY3Rpb24jc2V0R2V0UG9pbnRSZXNvbHV0aW9ufSB0byBjaGFuZ2UgYW4gZXhpc3RpbmdcbiAqIHByb2plY3Rpb24gb2JqZWN0LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIE5vbWluYWwgcmVzb2x1dGlvbiBpbiBwcm9qZWN0aW9uIHVuaXRzLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQgUG9pbnQgdG8gZmluZCBhZGp1c3RlZCByZXNvbHV0aW9uIGF0LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovVW5pdHMuanNcIikuZGVmYXVsdH0gW29wdF91bml0c10gVW5pdHMgdG8gZ2V0IHRoZSBwb2ludCByZXNvbHV0aW9uIGluLlxuICogRGVmYXVsdCBpcyB0aGUgcHJvamVjdGlvbidzIHVuaXRzLlxuICogQHJldHVybiB7bnVtYmVyfSBQb2ludCByZXNvbHV0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UG9pbnRSZXNvbHV0aW9uKHByb2plY3Rpb24sIHJlc29sdXRpb24sIHBvaW50LCBvcHRfdW5pdHMpIHtcbiAgICBwcm9qZWN0aW9uID0gZ2V0KHByb2plY3Rpb24pO1xuICAgIHZhciBwb2ludFJlc29sdXRpb247XG4gICAgdmFyIGdldHRlciA9IHByb2plY3Rpb24uZ2V0UG9pbnRSZXNvbHV0aW9uRnVuYygpO1xuICAgIGlmIChnZXR0ZXIpIHtcbiAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gZ2V0dGVyKHJlc29sdXRpb24sIHBvaW50KTtcbiAgICAgICAgaWYgKG9wdF91bml0cyAmJiBvcHRfdW5pdHMgIT09IHByb2plY3Rpb24uZ2V0VW5pdHMoKSkge1xuICAgICAgICAgICAgdmFyIG1ldGVyc1BlclVuaXQgPSBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgICAgIGlmIChtZXRlcnNQZXJVbml0KSB7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgKHBvaW50UmVzb2x1dGlvbiAqIG1ldGVyc1BlclVuaXQpIC8gTUVURVJTX1BFUl9VTklUW29wdF91bml0c107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB1bml0cyA9IHByb2plY3Rpb24uZ2V0VW5pdHMoKTtcbiAgICAgICAgaWYgKCh1bml0cyA9PSBVbml0cy5ERUdSRUVTICYmICFvcHRfdW5pdHMpIHx8IG9wdF91bml0cyA9PSBVbml0cy5ERUdSRUVTKSB7XG4gICAgICAgICAgICBwb2ludFJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRXN0aW1hdGUgcG9pbnQgcmVzb2x1dGlvbiBieSB0cmFuc2Zvcm1pbmcgdGhlIGNlbnRlciBwaXhlbCB0byBFUFNHOjQzMjYsXG4gICAgICAgICAgICAvLyBtZWFzdXJpbmcgaXRzIHdpZHRoIGFuZCBoZWlnaHQgb24gdGhlIG5vcm1hbCBzcGhlcmUsIGFuZCB0YWtpbmcgdGhlXG4gICAgICAgICAgICAvLyBhdmVyYWdlIG9mIHRoZSB3aWR0aCBhbmQgaGVpZ2h0LlxuICAgICAgICAgICAgdmFyIHRvRVBTRzQzMjZfMSA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhwcm9qZWN0aW9uLCBnZXQoJ0VQU0c6NDMyNicpKTtcbiAgICAgICAgICAgIGlmICh0b0VQU0c0MzI2XzEgPT09IGlkZW50aXR5VHJhbnNmb3JtICYmIHVuaXRzICE9PSBVbml0cy5ERUdSRUVTKSB7XG4gICAgICAgICAgICAgICAgLy8gbm8gdHJhbnNmb3JtIGlzIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiA9IHJlc29sdXRpb24gKiBwcm9qZWN0aW9uLmdldE1ldGVyc1BlclVuaXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciB2ZXJ0aWNlcyA9IFtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0gLSByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzBdICsgcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdLFxuICAgICAgICAgICAgICAgICAgICBwb2ludFswXSxcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMV0gLSByZXNvbHV0aW9uIC8gMixcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRbMF0sXG4gICAgICAgICAgICAgICAgICAgIHBvaW50WzFdICsgcmVzb2x1dGlvbiAvIDIsXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcyA9IHRvRVBTRzQzMjZfMSh2ZXJ0aWNlcywgdmVydGljZXMsIDIpO1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDAsIDIpLCB2ZXJ0aWNlcy5zbGljZSgyLCA0KSk7XG4gICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGdldERpc3RhbmNlKHZlcnRpY2VzLnNsaWNlKDQsIDYpLCB2ZXJ0aWNlcy5zbGljZSg2LCA4KSk7XG4gICAgICAgICAgICAgICAgcG9pbnRSZXNvbHV0aW9uID0gKHdpZHRoICsgaGVpZ2h0KSAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWV0ZXJzUGVyVW5pdCA9IG9wdF91bml0c1xuICAgICAgICAgICAgICAgID8gTUVURVJTX1BFUl9VTklUW29wdF91bml0c11cbiAgICAgICAgICAgICAgICA6IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICAgICAgaWYgKG1ldGVyc1BlclVuaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHBvaW50UmVzb2x1dGlvbiAvPSBtZXRlcnNQZXJVbml0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludFJlc29sdXRpb247XG59XG4vKipcbiAqIFJlZ2lzdGVycyB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbnMgdGhhdCBkb24ndCBhbHRlciBjb29yZGluYXRlcy4gVGhvc2UgYWxsb3dcbiAqIHRvIHRyYW5zZm9ybSBiZXR3ZWVuIHByb2plY3Rpb25zIHdpdGggZXF1YWwgbWVhbmluZy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PFByb2plY3Rpb24+fSBwcm9qZWN0aW9ucyBQcm9qZWN0aW9ucy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhwcm9qZWN0aW9ucykge1xuICAgIGFkZFByb2plY3Rpb25zKHByb2plY3Rpb25zKTtcbiAgICBwcm9qZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgcHJvamVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UgIT09IGRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgYWRkVHJhbnNmb3JtRnVuYyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBjbG9uZVRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLyoqXG4gKiBSZWdpc3RlcnMgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb25zIHRvIGNvbnZlcnQgY29vcmRpbmF0ZXMgaW4gYW55IHByb2plY3Rpb25cbiAqIGluIHByb2plY3Rpb24xIHRvIGFueSBwcm9qZWN0aW9uIGluIHByb2plY3Rpb24yLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zMSBQcm9qZWN0aW9ucyB3aXRoIGVxdWFsXG4gKiAgICAgbWVhbmluZy5cbiAqIEBwYXJhbSB7QXJyYXk8UHJvamVjdGlvbj59IHByb2plY3Rpb25zMiBQcm9qZWN0aW9ucyB3aXRoIGVxdWFsXG4gKiAgICAgbWVhbmluZy5cbiAqIEBwYXJhbSB7VHJhbnNmb3JtRnVuY3Rpb259IGZvcndhcmRUcmFuc2Zvcm0gVHJhbnNmb3JtYXRpb24gZnJvbSBhbnlcbiAqICAgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMSB0byBhbnkgcHJvamVjdGlvbiBpbiBwcm9qZWN0aW9uMi5cbiAqIEBwYXJhbSB7VHJhbnNmb3JtRnVuY3Rpb259IGludmVyc2VUcmFuc2Zvcm0gVHJhbnNmb3JtIGZyb20gYW55IHByb2plY3Rpb25cbiAqICAgaW4gcHJvamVjdGlvbjIgdG8gYW55IHByb2plY3Rpb24gaW4gcHJvamVjdGlvbjEuLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXF1aXZhbGVudFRyYW5zZm9ybXMocHJvamVjdGlvbnMxLCBwcm9qZWN0aW9uczIsIGZvcndhcmRUcmFuc2Zvcm0sIGludmVyc2VUcmFuc2Zvcm0pIHtcbiAgICBwcm9qZWN0aW9uczEuZm9yRWFjaChmdW5jdGlvbiAocHJvamVjdGlvbjEpIHtcbiAgICAgICAgcHJvamVjdGlvbnMyLmZvckVhY2goZnVuY3Rpb24gKHByb2plY3Rpb24yKSB7XG4gICAgICAgICAgICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMiwgZm9yd2FyZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICBhZGRUcmFuc2Zvcm1GdW5jKHByb2plY3Rpb24yLCBwcm9qZWN0aW9uMSwgaW52ZXJzZVRyYW5zZm9ybSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuLyoqXG4gKiBDbGVhciBhbGwgY2FjaGVkIHByb2plY3Rpb25zIGFuZCB0cmFuc2Zvcm1zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxQcm9qZWN0aW9ucygpIHtcbiAgICBjbGVhclByb2ooKTtcbiAgICBjbGVhclRyYW5zZm9ybUZ1bmNzKCk7XG59XG4vKipcbiAqIEBwYXJhbSB7UHJvamVjdGlvbnxzdHJpbmd8dW5kZWZpbmVkfSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVmYXVsdENvZGUgRGVmYXVsdCBjb2RlLlxuICogQHJldHVybiB7UHJvamVjdGlvbn0gUHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2plY3Rpb24ocHJvamVjdGlvbiwgZGVmYXVsdENvZGUpIHtcbiAgICBpZiAoIXByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGdldChkZWZhdWx0Q29kZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBwcm9qZWN0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZ2V0KHByb2plY3Rpb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7UHJvamVjdGlvbn0gKi8gKHByb2plY3Rpb24pO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBtb2R1bGU6b2wvcHJvan5UcmFuc2Zvcm1GdW5jdGlvbn0gZnJvbSBhIHNpbXBsZSAyRCBjb29yZGluYXRlIHRyYW5zZm9ybVxuICogZnVuY3Rpb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlKTogaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkVHJhbnNmb3JtIENvb3JkaW5hdGVcbiAqICAgICB0cmFuc2Zvcm0uXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVHJhbnNmb3JtRnJvbUNvb3JkaW5hdGVUcmFuc2Zvcm0oY29vcmRUcmFuc2Zvcm0pIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gaW5wdXQgSW5wdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X291dHB1dF0gT3V0cHV0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpbWVuc2lvbl0gRGltZW5zaW9uLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE91dHB1dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoaW5wdXQsIG9wdF9vdXRwdXQsIG9wdF9kaW1lbnNpb24pIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgdmFyIGRpbWVuc2lvbiA9IG9wdF9kaW1lbnNpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9kaW1lbnNpb24gOiAyO1xuICAgICAgICB2YXIgb3V0cHV0ID0gb3B0X291dHB1dCAhPT0gdW5kZWZpbmVkID8gb3B0X291dHB1dCA6IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSBkaW1lbnNpb24pIHtcbiAgICAgICAgICAgIHZhciBwb2ludCA9IGNvb3JkVHJhbnNmb3JtKFtpbnB1dFtpXSwgaW5wdXRbaSArIDFdXSk7XG4gICAgICAgICAgICBvdXRwdXRbaV0gPSBwb2ludFswXTtcbiAgICAgICAgICAgIG91dHB1dFtpICsgMV0gPSBwb2ludFsxXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID49IDI7IC0taikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtpICsgal0gPSBpbnB1dFtpICsgal07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9KTtcbn1cbi8qKlxuICogUmVnaXN0ZXJzIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9ucyB0byBjb252ZXJ0IGNvb3JkaW5hdGVzIGJldHdlZW4gdGhlXG4gKiBzb3VyY2UgcHJvamVjdGlvbiBhbmQgdGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBUaGUgZm9yd2FyZCBhbmQgaW52ZXJzZSBmdW5jdGlvbnMgY29udmVydCBjb29yZGluYXRlIHBhaXJzOyB0aGlzIGZ1bmN0aW9uXG4gKiBjb252ZXJ0cyB0aGVzZSBpbnRvIHRoZSBmdW5jdGlvbnMgdXNlZCBpbnRlcm5hbGx5IHdoaWNoIGFsc28gaGFuZGxlXG4gKiBleHRlbnRzIGFuZCBjb29yZGluYXRlIGFycmF5cy5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBmb3J3YXJkIFRoZSBmb3J3YXJkIHRyYW5zZm9ybVxuICogICAgIGZ1bmN0aW9uICh0aGF0IGlzLCBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb25cbiAqICAgICBwcm9qZWN0aW9uKSB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGV9IGFzIGFyZ3VtZW50IGFuZCByZXR1cm5zXG4gKiAgICAgdGhlIHRyYW5zZm9ybWVkIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUpOiBpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gaW52ZXJzZSBUaGUgaW52ZXJzZSB0cmFuc2Zvcm1cbiAqICAgICBmdW5jdGlvbiAodGhhdCBpcywgZnJvbSB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbiB0byB0aGUgc291cmNlXG4gKiAgICAgcHJvamVjdGlvbikgdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhcyBhcmd1bWVudCBhbmQgcmV0dXJuc1xuICogICAgIHRoZSB0cmFuc2Zvcm1lZCB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZX0uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb29yZGluYXRlVHJhbnNmb3Jtcyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBmb3J3YXJkLCBpbnZlcnNlKSB7XG4gICAgdmFyIHNvdXJjZVByb2ogPSBnZXQoc291cmNlKTtcbiAgICB2YXIgZGVzdFByb2ogPSBnZXQoZGVzdGluYXRpb24pO1xuICAgIGFkZFRyYW5zZm9ybUZ1bmMoc291cmNlUHJvaiwgZGVzdFByb2osIGNyZWF0ZVRyYW5zZm9ybUZyb21Db29yZGluYXRlVHJhbnNmb3JtKGZvcndhcmQpKTtcbiAgICBhZGRUcmFuc2Zvcm1GdW5jKGRlc3RQcm9qLCBzb3VyY2VQcm9qLCBjcmVhdGVUcmFuc2Zvcm1Gcm9tQ29vcmRpbmF0ZVRyYW5zZm9ybShpbnZlcnNlKSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYSBjb29yZGluYXRlIGZyb20gbG9uZ2l0dWRlL2xhdGl0dWRlIHRvIGEgZGlmZmVyZW50IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUgYXMgbG9uZ2l0dWRlIGFuZCBsYXRpdHVkZSwgaS5lLlxuICogICAgIGFuIGFycmF5IHdpdGggbG9uZ2l0dWRlIGFzIDFzdCBhbmQgbGF0aXR1ZGUgYXMgMm5kIGVsZW1lbnQuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBbb3B0X3Byb2plY3Rpb25dIFRhcmdldCBwcm9qZWN0aW9uLiBUaGVcbiAqICAgICBkZWZhdWx0IGlzIFdlYiBNZXJjYXRvciwgaS5lLiAnRVBTRzozODU3Jy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlIHByb2plY3RlZCB0byB0aGUgdGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tTG9uTGF0KGNvb3JkaW5hdGUsIG9wdF9wcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybShjb29yZGluYXRlLCAnRVBTRzo0MzI2Jywgb3B0X3Byb2plY3Rpb24gIT09IHVuZGVmaW5lZCA/IG9wdF9wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1NycpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGEgY29vcmRpbmF0ZSB0byBsb25naXR1ZGUvbGF0aXR1ZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFByb2plY3RlZCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gW29wdF9wcm9qZWN0aW9uXSBQcm9qZWN0aW9uIG9mIHRoZSBjb29yZGluYXRlLlxuICogICAgIFRoZSBkZWZhdWx0IGlzIFdlYiBNZXJjYXRvciwgaS5lLiAnRVBTRzozODU3Jy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlIGFzIGxvbmdpdHVkZSBhbmQgbGF0aXR1ZGUsIGkuZS4gYW4gYXJyYXlcbiAqICAgICB3aXRoIGxvbmdpdHVkZSBhcyAxc3QgYW5kIGxhdGl0dWRlIGFzIDJuZCBlbGVtZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Mb25MYXQoY29vcmRpbmF0ZSwgb3B0X3Byb2plY3Rpb24pIHtcbiAgICB2YXIgbG9uTGF0ID0gdHJhbnNmb3JtKGNvb3JkaW5hdGUsIG9wdF9wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfcHJvamVjdGlvbiA6ICdFUFNHOjM4NTcnLCAnRVBTRzo0MzI2Jyk7XG4gICAgdmFyIGxvbiA9IGxvbkxhdFswXTtcbiAgICBpZiAobG9uIDwgLTE4MCB8fCBsb24gPiAxODApIHtcbiAgICAgICAgbG9uTGF0WzBdID0gbW9kdWxvKGxvbiArIDE4MCwgMzYwKSAtIDE4MDtcbiAgICB9XG4gICAgcmV0dXJuIGxvbkxhdDtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHR3byBwcm9qZWN0aW9ucyBhcmUgdGhlIHNhbWUsIHRoYXQgaXMgZXZlcnkgY29vcmRpbmF0ZSBpbiBvbmVcbiAqIHByb2plY3Rpb24gZG9lcyByZXByZXNlbnQgdGhlIHNhbWUgZ2VvZ3JhcGhpYyBwb2ludCBhcyB0aGUgc2FtZSBjb29yZGluYXRlIGluXG4gKiB0aGUgb3RoZXIgcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHByb2plY3Rpb24xIFByb2plY3Rpb24gMS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gcHJvamVjdGlvbjIgUHJvamVjdGlvbiAyLlxuICogQHJldHVybiB7Ym9vbGVhbn0gRXF1aXZhbGVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxdWl2YWxlbnQocHJvamVjdGlvbjEsIHByb2plY3Rpb24yKSB7XG4gICAgaWYgKHByb2plY3Rpb24xID09PSBwcm9qZWN0aW9uMikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGVxdWFsVW5pdHMgPSBwcm9qZWN0aW9uMS5nZXRVbml0cygpID09PSBwcm9qZWN0aW9uMi5nZXRVbml0cygpO1xuICAgIGlmIChwcm9qZWN0aW9uMS5nZXRDb2RlKCkgPT09IHByb2plY3Rpb24yLmdldENvZGUoKSkge1xuICAgICAgICByZXR1cm4gZXF1YWxVbml0cztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHByb2plY3Rpb24xLCBwcm9qZWN0aW9uMik7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1GdW5jID09PSBjbG9uZVRyYW5zZm9ybSAmJiBlcXVhbFVuaXRzO1xuICAgIH1cbn1cbi8qKlxuICogU2VhcmNoZXMgaW4gdGhlIGxpc3Qgb2YgdHJhbnNmb3JtIGZ1bmN0aW9ucyBmb3IgdGhlIGZ1bmN0aW9uIGZvciBjb252ZXJ0aW5nXG4gKiBjb29yZGluYXRlcyBmcm9tIHRoZSBzb3VyY2UgcHJvamVjdGlvbiB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb259IHNvdXJjZVByb2plY3Rpb24gU291cmNlIFByb2plY3Rpb24gb2JqZWN0LlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0aW5hdGlvblByb2plY3Rpb24gRGVzdGluYXRpb24gUHJvamVjdGlvblxuICogICAgIG9iamVjdC5cbiAqIEByZXR1cm4ge1RyYW5zZm9ybUZ1bmN0aW9ufSBUcmFuc2Zvcm0gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMoc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKSB7XG4gICAgdmFyIHNvdXJjZUNvZGUgPSBzb3VyY2VQcm9qZWN0aW9uLmdldENvZGUoKTtcbiAgICB2YXIgZGVzdGluYXRpb25Db2RlID0gZGVzdGluYXRpb25Qcm9qZWN0aW9uLmdldENvZGUoKTtcbiAgICB2YXIgdHJhbnNmb3JtRnVuYyA9IGdldFRyYW5zZm9ybUZ1bmMoc291cmNlQ29kZSwgZGVzdGluYXRpb25Db2RlKTtcbiAgICBpZiAoIXRyYW5zZm9ybUZ1bmMpIHtcbiAgICAgICAgdHJhbnNmb3JtRnVuYyA9IGlkZW50aXR5VHJhbnNmb3JtO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtRnVuYztcbn1cbi8qKlxuICogR2l2ZW4gdGhlIHByb2plY3Rpb24tbGlrZSBvYmplY3RzLCBzZWFyY2hlcyBmb3IgYSB0cmFuc2Zvcm1hdGlvblxuICogZnVuY3Rpb24gdG8gY29udmVydCBhIGNvb3JkaW5hdGVzIGFycmF5IGZyb20gdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHRvIHRoZVxuICogZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBzb3VyY2UgU291cmNlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtUcmFuc2Zvcm1GdW5jdGlvbn0gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHJhbnNmb3JtKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcbiAgICB2YXIgc291cmNlUHJvamVjdGlvbiA9IGdldChzb3VyY2UpO1xuICAgIHZhciBkZXN0aW5hdGlvblByb2plY3Rpb24gPSBnZXQoZGVzdGluYXRpb24pO1xuICAgIHJldHVybiBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMoc291cmNlUHJvamVjdGlvbiwgZGVzdGluYXRpb25Qcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogVHJhbnNmb3JtcyBhIGNvb3JkaW5hdGUgZnJvbSBzb3VyY2UgcHJvamVjdGlvbiB0byBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogVGhpcyByZXR1cm5zIGEgbmV3IGNvb3JkaW5hdGUgKGFuZCBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsKS5cbiAqXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9wcm9qLnRyYW5zZm9ybUV4dGVudH0gZm9yIGV4dGVudCB0cmFuc2Zvcm1hdGlvbi5cbiAqIFNlZSB0aGUgdHJhbnNmb3JtIG1ldGhvZCBvZiB7QGxpbmsgbW9kdWxlOm9sL2dlb20vR2VvbWV0cnl+R2VvbWV0cnl9IGFuZCBpdHNcbiAqIHN1YmNsYXNzZXMgZm9yIGdlb21ldHJ5IHRyYW5zZm9ybXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlIFNvdXJjZSBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLWxpa2UuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybShjb29yZGluYXRlLCBzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMoY29vcmRpbmF0ZSwgdW5kZWZpbmVkLCBjb29yZGluYXRlLmxlbmd0aCk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gZXh0ZW50IGZyb20gc291cmNlIHByb2plY3Rpb24gdG8gZGVzdGluYXRpb24gcHJvamVjdGlvbi4gIFRoaXNcbiAqIHJldHVybnMgYSBuZXcgZXh0ZW50IChhbmQgZG9lcyBub3QgbW9kaWZ5IHRoZSBvcmlnaW5hbCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50IHRvIHRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IHNvdXJjZSBTb3VyY2UgcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdGluYXRpb24gRGVzdGluYXRpb24gcHJvamVjdGlvbi1saWtlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3RvcHNdIE51bWJlciBvZiBzdG9wcyBwZXIgc2lkZSB1c2VkIGZvciB0aGUgdHJhbnNmb3JtLlxuICogQnkgZGVmYXVsdCBvbmx5IHRoZSBjb3JuZXJzIGFyZSB1c2VkLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgdHJhbnNmb3JtZWQgZXh0ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtRXh0ZW50KGV4dGVudCwgc291cmNlLCBkZXN0aW5hdGlvbiwgb3B0X3N0b3BzKSB7XG4gICAgdmFyIHRyYW5zZm9ybUZ1bmMgPSBnZXRUcmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbik7XG4gICAgcmV0dXJuIGFwcGx5VHJhbnNmb3JtKGV4dGVudCwgdHJhbnNmb3JtRnVuYywgdW5kZWZpbmVkLCBvcHRfc3RvcHMpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBnaXZlbiBwb2ludCB0byB0aGUgZGVzdGluYXRpb24gcHJvamVjdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludCBQb2ludC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gc291cmNlUHJvamVjdGlvbiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbn0gZGVzdGluYXRpb25Qcm9qZWN0aW9uIERlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gUG9pbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1XaXRoUHJvamVjdGlvbnMocG9pbnQsIHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbikge1xuICAgIHZhciB0cmFuc2Zvcm1GdW5jID0gZ2V0VHJhbnNmb3JtRnJvbVByb2plY3Rpb25zKHNvdXJjZVByb2plY3Rpb24sIGRlc3RpbmF0aW9uUHJvamVjdGlvbik7XG4gICAgcmV0dXJuIHRyYW5zZm9ybUZ1bmMocG9pbnQpO1xufVxuLyoqXG4gKiBAdHlwZSB7P1Byb2plY3Rpb259XG4gKi9cbnZhciB1c2VyUHJvamVjdGlvbiA9IG51bGw7XG4vKipcbiAqIFNldCB0aGUgcHJvamVjdGlvbiBmb3IgY29vcmRpbmF0ZXMgc3VwcGxpZWQgZnJvbSBhbmQgcmV0dXJuZWQgYnkgQVBJIG1ldGhvZHMuXG4gKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHlldCBhIHBhcnQgb2YgdGhlIHN0YWJsZSBBUEkuICBTdXBwb3J0IGZvciB1c2VyXG4gKiBwcm9qZWN0aW9ucyBpcyBub3QgeWV0IGNvbXBsZXRlIGFuZCBzaG91bGQgYmUgY29uc2lkZXJlZCBleHBlcmltZW50YWwuXG4gKiBAcGFyYW0ge1Byb2plY3Rpb25MaWtlfSBwcm9qZWN0aW9uIFRoZSB1c2VyIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRVc2VyUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgdXNlclByb2plY3Rpb24gPSBnZXQocHJvamVjdGlvbik7XG59XG4vKipcbiAqIENsZWFyIHRoZSB1c2VyIHByb2plY3Rpb24gaWYgc2V0LiAgTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mXG4gKiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXIgcHJvamVjdGlvbnMgaXMgbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkXG4gKiBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyVXNlclByb2plY3Rpb24oKSB7XG4gICAgdXNlclByb2plY3Rpb24gPSBudWxsO1xufVxuLyoqXG4gKiBHZXQgdGhlIHByb2plY3Rpb24gZm9yIGNvb3JkaW5hdGVzIHN1cHBsaWVkIGZyb20gYW5kIHJldHVybmVkIGJ5IEFQSSBtZXRob2RzLlxuICogTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGlzIG5vdCB5ZXQgYSBwYXJ0IG9mIHRoZSBzdGFibGUgQVBJLiAgU3VwcG9ydCBmb3IgdXNlclxuICogcHJvamVjdGlvbnMgaXMgbm90IHlldCBjb21wbGV0ZSBhbmQgc2hvdWxkIGJlIGNvbnNpZGVyZWQgZXhwZXJpbWVudGFsLlxuICogQHJldHVybiB7P1Byb2plY3Rpb259IFRoZSB1c2VyIHByb2plY3Rpb24gKG9yIG51bGwgaWYgbm90IHNldCkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyUHJvamVjdGlvbigpIHtcbiAgICByZXR1cm4gdXNlclByb2plY3Rpb247XG59XG4vKipcbiAqIFVzZSBnZW9ncmFwaGljIGNvb3JkaW5hdGVzIChXR1MtODQgZGF0dW0pIGluIEFQSSBtZXRob2RzLiAgTm90ZSB0aGF0IHRoaXNcbiAqIG1ldGhvZCBpcyBub3QgeWV0IGEgcGFydCBvZiB0aGUgc3RhYmxlIEFQSS4gIFN1cHBvcnQgZm9yIHVzZXIgcHJvamVjdGlvbnMgaXNcbiAqIG5vdCB5ZXQgY29tcGxldGUgYW5kIHNob3VsZCBiZSBjb25zaWRlcmVkIGV4cGVyaW1lbnRhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHVzZUdlb2dyYXBoaWMoKSB7XG4gICAgc2V0VXNlclByb2plY3Rpb24oJ0VQU0c6NDMyNicpO1xufVxuLyoqXG4gKiBSZXR1cm4gYSBjb29yZGluYXRlIHRyYW5zZm9ybWVkIGludG8gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgY29vcmRpbmF0ZSBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZSBJbnB1dCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlUHJvamVjdGlvbiBUaGUgaW5wdXQgY29vcmRpbmF0ZSBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVGhlIGlucHV0IGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgc291cmNlUHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgc291cmNlUHJvamVjdGlvbiwgdXNlclByb2plY3Rpb24pO1xufVxuLyoqXG4gKiBSZXR1cm4gYSBjb29yZGluYXRlIHRyYW5zZm9ybWVkIGZyb20gdGhlIHVzZXIgcHJvamVjdGlvbi4gIElmIG5vIHVzZXIgcHJvamVjdGlvblxuICogaXMgc2V0LCB0aGUgb3JpZ2luYWwgY29vcmRpbmF0ZSBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZSBJbnB1dCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gZGVzdFByb2plY3Rpb24gVGhlIGRlc3RpbmF0aW9uIHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUaGUgaW5wdXQgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21Vc2VyQ29vcmRpbmF0ZShjb29yZGluYXRlLCBkZXN0UHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGNvb3JkaW5hdGU7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm0oY29vcmRpbmF0ZSwgdXNlclByb2plY3Rpb24sIGRlc3RQcm9qZWN0aW9uKTtcbn1cbi8qKlxuICogUmV0dXJuIGFuIGV4dGVudCB0cmFuc2Zvcm1lZCBpbnRvIHRoZSB1c2VyIHByb2plY3Rpb24uICBJZiBubyB1c2VyIHByb2plY3Rpb25cbiAqIGlzIHNldCwgdGhlIG9yaWdpbmFsIGV4dGVudCBpcyByZXR1cm5lZC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgSW5wdXQgZXh0ZW50LlxuICogQHBhcmFtIHtQcm9qZWN0aW9uTGlrZX0gc291cmNlUHJvamVjdGlvbiBUaGUgaW5wdXQgZXh0ZW50IHByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFRoZSBpbnB1dCBleHRlbnQgaW4gdGhlIHVzZXIgcHJvamVjdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvVXNlckV4dGVudChleHRlbnQsIHNvdXJjZVByb2plY3Rpb24pIHtcbiAgICBpZiAoIXVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiBleHRlbnQ7XG4gICAgfVxuICAgIHJldHVybiB0cmFuc2Zvcm1FeHRlbnQoZXh0ZW50LCBzb3VyY2VQcm9qZWN0aW9uLCB1c2VyUHJvamVjdGlvbik7XG59XG4vKipcbiAqIFJldHVybiBhbiBleHRlbnQgdHJhbnNmb3JtZWQgZnJvbSB0aGUgdXNlciBwcm9qZWN0aW9uLiAgSWYgbm8gdXNlciBwcm9qZWN0aW9uXG4gKiBpcyBzZXQsIHRoZSBvcmlnaW5hbCBleHRlbnQgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IElucHV0IGV4dGVudC5cbiAqIEBwYXJhbSB7UHJvamVjdGlvbkxpa2V9IGRlc3RQcm9qZWN0aW9uIFRoZSBkZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBUaGUgaW5wdXQgZXh0ZW50IHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZnJvbVVzZXJFeHRlbnQoZXh0ZW50LCBkZXN0UHJvamVjdGlvbikge1xuICAgIGlmICghdXNlclByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGV4dGVudDtcbiAgICB9XG4gICAgcmV0dXJuIHRyYW5zZm9ybUV4dGVudChleHRlbnQsIHVzZXJQcm9qZWN0aW9uLCBkZXN0UHJvamVjdGlvbik7XG59XG4vKipcbiAqIENyZWF0ZXMgYSBzYWZlIGNvb3JkaW5hdGUgdHJhbnNmb3JtIGZ1bmN0aW9uIGZyb20gYSBjb29yZGluYXRlIHRyYW5zZm9ybSBmdW5jdGlvbi5cbiAqIFwiU2FmZVwiIG1lYW5zIHRoYXQgaXQgY2FuIGhhbmRsZSB3cmFwcGluZyBvZiB4LWNvb3JkaW5hdGVzIGZvciBnbG9iYWwgcHJvamVjdGlvbnMsXG4gKiBhbmQgdGhhdCBjb29yZGluYXRlcyBleGNlZWRpbmcgdGhlIHNvdXJjZSBwcm9qZWN0aW9uIHZhbGlkaXR5IGV4dGVudCdzIHJhbmdlIHdpbGwgYmVcbiAqIGNsYW1wZWQgdG8gdGhlIHZhbGlkaXR5IHJhbmdlLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBzb3VyY2VQcm9qIFNvdXJjZSBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtQcm9qZWN0aW9ufSBkZXN0UHJvaiBEZXN0aW5hdGlvbiBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSB0cmFuc2Zvcm0gVHJhbnNmb3JtIGZ1bmN0aW9uIChzb3VyY2UgdG8gZGVzdGlhdGlvbikuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBTYWZlIHRyYW5zZm9ybSBmdW5jdGlvbiAoc291cmNlIHRvIGRlc3RpYXRpb24pLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2FmZUNvb3JkaW5hdGVUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdFByb2osIHRyYW5zZm9ybSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoY29vcmQpIHtcbiAgICAgICAgdmFyIHNvdXJjZVggPSBjb29yZFswXTtcbiAgICAgICAgdmFyIHNvdXJjZVkgPSBjb29yZFsxXTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybWVkLCB3b3JsZHNBd2F5O1xuICAgICAgICBpZiAoc291cmNlUHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VFeHRlbnRXaWR0aCA9IGdldFdpZHRoKHNvdXJjZUV4dGVudCk7XG4gICAgICAgICAgICB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZCwgc291cmNlUHJvaiwgc291cmNlRXh0ZW50V2lkdGgpO1xuICAgICAgICAgICAgaWYgKHdvcmxkc0F3YXkpIHtcbiAgICAgICAgICAgICAgICAvLyBNb3ZlIHggdG8gdGhlIHJlYWwgd29ybGRcbiAgICAgICAgICAgICAgICBzb3VyY2VYID0gc291cmNlWCAtIHdvcmxkc0F3YXkgKiBzb3VyY2VFeHRlbnRXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNvdXJjZVggPSBjbGFtcChzb3VyY2VYLCBzb3VyY2VFeHRlbnRbMF0sIHNvdXJjZUV4dGVudFsyXSk7XG4gICAgICAgICAgICBzb3VyY2VZID0gY2xhbXAoc291cmNlWSwgc291cmNlRXh0ZW50WzFdLCBzb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgdHJhbnNmb3JtZWQgPSB0cmFuc2Zvcm0oW3NvdXJjZVgsIHNvdXJjZVldKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybWVkID0gdHJhbnNmb3JtKGNvb3JkKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAod29ybGRzQXdheSAmJiBkZXN0UHJvai5jYW5XcmFwWCgpKSB7XG4gICAgICAgICAgICAvLyBNb3ZlIHRyYW5zZm9ybWVkIGNvb3JkaW5hdGUgYmFjayB0byB0aGUgb2Zmc2V0IHdvcmxkXG4gICAgICAgICAgICB0cmFuc2Zvcm1lZFswXSArPSB3b3JsZHNBd2F5ICogZ2V0V2lkdGgoZGVzdFByb2ouZ2V0RXh0ZW50KCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lZDtcbiAgICB9O1xufVxuLyoqXG4gKiBBZGQgdHJhbnNmb3JtcyB0byBhbmQgZnJvbSBFUFNHOjQzMjYgYW5kIEVQU0c6Mzg1Ny4gIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkXG4gKiBieSB3aGVuIHRoaXMgbW9kdWxlIGlzIGV4ZWN1dGVkIGFuZCBzaG91bGQgb25seSBuZWVkIHRvIGJlIGNhbGxlZCBhZ2FpbiBhZnRlclxuICogYGNsZWFyQWxsUHJvamVjdGlvbnMoKWAgaXMgY2FsbGVkIChlLmcuIGluIHRlc3RzKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENvbW1vbigpIHtcbiAgICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRoYXQgZG9uJ3QgYWx0ZXIgY29vcmRpbmF0ZXMgdG8gY29udmVydCB3aXRoaW4gc2V0IG9mXG4gICAgLy8gcHJvamVjdGlvbnMgd2l0aCBlcXVhbCBtZWFuaW5nLlxuICAgIGFkZEVxdWl2YWxlbnRQcm9qZWN0aW9ucyhFUFNHMzg1N19QUk9KRUNUSU9OUyk7XG4gICAgYWRkRXF1aXZhbGVudFByb2plY3Rpb25zKEVQU0c0MzI2X1BST0pFQ1RJT05TKTtcbiAgICAvLyBBZGQgdHJhbnNmb3JtYXRpb25zIHRvIGNvbnZlcnQgRVBTRzo0MzI2IGxpa2UgY29vcmRpbmF0ZXMgdG8gRVBTRzozODU3IGxpa2VcbiAgICAvLyBjb29yZGluYXRlcyBhbmQgYmFjay5cbiAgICBhZGRFcXVpdmFsZW50VHJhbnNmb3JtcyhFUFNHNDMyNl9QUk9KRUNUSU9OUywgRVBTRzM4NTdfUFJPSkVDVElPTlMsIGZyb21FUFNHNDMyNiwgdG9FUFNHNDMyNik7XG59XG5hZGRDb21tb24oKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2ouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9jYW52YXMvVGlsZUxheWVyXG4gKi9cbmltcG9ydCBDYW52YXNMYXllclJlbmRlcmVyIGZyb20gJy4vTGF5ZXIuanMnO1xuaW1wb3J0IFRpbGVSYW5nZSBmcm9tICcuLi8uLi9UaWxlUmFuZ2UuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi8uLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNvbXBvc2UgYXMgY29tcG9zZVRyYW5zZm9ybSwgbWFrZUludmVyc2UsIH0gZnJvbSAnLi4vLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4uLy4uL29iai5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFbXB0eSwgZXF1YWxzLCBnZXRJbnRlcnNlY3Rpb24sIGdldFRvcExlZnQsIH0gZnJvbSAnLi4vLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGZyb21Vc2VyRXh0ZW50IH0gZnJvbSAnLi4vLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi8uLi91dGlsLmpzJztcbmltcG9ydCB7IG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24gfSBmcm9tICcuLi8uLi9hcnJheS5qcyc7XG5pbXBvcnQgeyB0b1N0cmluZyBhcyB0b1RyYW5zZm9ybVN0cmluZyB9IGZyb20gJy4uLy4uL3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyByZW5kZXJlciBmb3IgdGlsZSBsYXllcnMuXG4gKiBAYXBpXG4gKi9cbnZhciBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9sYXllci9UaWxlLmpzXCIpLmRlZmF1bHR8aW1wb3J0KFwiLi4vLi4vbGF5ZXIvVmVjdG9yVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlTGF5ZXIgVGlsZSBsYXllci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcih0aWxlTGF5ZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUxheWVyKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogUmVuZGVyZWQgZXh0ZW50IGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBwcmV2aW91cyBgcmVuZGVyRnJhbWUoKWAgY2FsbFxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudENoYW5nZWQgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRFeHRlbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uLy4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyZWRQcm9qZWN0aW9uID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkUmV2aXNpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkVGlsZXMgPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubmV3VGlsZXNfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG1wRXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcFRpbGVSYW5nZV8gPSBuZXcgVGlsZVJhbmdlKDAsIDAsIDAsIDApO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaWxlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRpbGUgaXMgZHJhd2FibGUuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmlzRHJhd2FibGVUaWxlID0gZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcbiAgICAgICAgdmFyIHVzZUludGVyaW1UaWxlc09uRXJyb3IgPSB0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpO1xuICAgICAgICByZXR1cm4gKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BREVEIHx8XG4gICAgICAgICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVNUFRZIHx8XG4gICAgICAgICAgICAodGlsZVN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiAmJiAhdXNlSW50ZXJpbVRpbGVzT25FcnJvcikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlLlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcbiAgICAgICAgdmFyIHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcbiAgICAgICAgdmFyIHRpbGVTb3VyY2UgPSB0aWxlTGF5ZXIuZ2V0U291cmNlKCk7XG4gICAgICAgIHZhciB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgaWYgKCF0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpKSB7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiB1c2VJbnRlcmltVGlsZXNPbkVycm9yIGlzIGZhbHNlLCB3ZSBjb25zaWRlciB0aGUgZXJyb3IgdGlsZSBhcyBsb2FkZWQuXG4gICAgICAgICAgICAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuTE9BREVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGVMYXllci5nZXRQcmVsb2FkKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gUHJlbG9hZGVkIHRpbGVzIGZvciBsb3dlciByZXNvbHV0aW9ucyBtaWdodCBoYXZlIGZpbmlzaGVkIGxvYWRpbmcuXG4gICAgICAgICAgICAgICAgdGhpcy5uZXdUaWxlc18gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc0RyYXdhYmxlVGlsZSh0aWxlKSkge1xuICAgICAgICAgICAgdGlsZSA9IHRpbGUuZ2V0SW50ZXJpbVRpbGUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGlsZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59IHRpbGVzIExvb2t1cCBvZiBsb2FkZWQgdGlsZXMgYnkgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbnx2b2lkfSBJZiBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZSBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUubG9hZGVkVGlsZUNhbGxiYWNrID0gZnVuY3Rpb24gKHRpbGVzLCB6b29tLCB0aWxlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhd2FibGVUaWxlKHRpbGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5sb2FkZWRUaWxlQ2FsbGJhY2suY2FsbCh0aGlzLCB0aWxlcywgem9vbSwgdGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIHdoZXRoZXIgcmVuZGVyIHNob3VsZCBiZSBjYWxsZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllciBpcyByZWFkeSB0byBiZSByZW5kZXJlZC5cbiAgICAgKi9cbiAgICBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlci5wcm90b3R5cGUucHJlcGFyZUZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyIHRoZSBsYXllci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldCBUYXJnZXQgdGhhdCBtYXkgYmUgdXNlZCB0byByZW5kZXIgY29udGVudCB0by5cbiAgICAgKiBAcmV0dXJuIHtIVE1MRWxlbWVudH0gVGhlIHJlbmRlcmVkIGVsZW1lbnQuXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUsIHRhcmdldCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheVtmcmFtZVN0YXRlLmxheWVySW5kZXhdO1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xuICAgICAgICB2YXIgdmlld0NlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXdTdGF0ZS5yb3RhdGlvbjtcbiAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XG4gICAgICAgIHZhciB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XG4gICAgICAgIHZhciB0aWxlU291cmNlID0gdGlsZUxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICB2YXIgc291cmNlUmV2aXNpb24gPSB0aWxlU291cmNlLmdldFJldmlzaW9uKCk7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IHRpbGVTb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgeiA9IHRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHZpZXdSZXNvbHV0aW9uLCB0aWxlU291cmNlLnpEaXJlY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgZXh0ZW50ID0gZnJhbWVTdGF0ZS5leHRlbnQ7XG4gICAgICAgIHZhciBsYXllckV4dGVudCA9IGxheWVyU3RhdGUuZXh0ZW50ICYmIGZyb21Vc2VyRXh0ZW50KGxheWVyU3RhdGUuZXh0ZW50LCBwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKGxheWVyRXh0ZW50KSB7XG4gICAgICAgICAgICBleHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24oZXh0ZW50LCBmcm9tVXNlckV4dGVudChsYXllclN0YXRlLmV4dGVudCwgcHJvamVjdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlUGl4ZWxSYXRpbyA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyk7XG4gICAgICAgIC8vIGRlc2lyZWQgZGltZW5zaW9ucyBvZiB0aGUgY2FudmFzIGluIHBpeGVsc1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKGZyYW1lU3RhdGUuc2l6ZVswXSAqIHRpbGVQaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IE1hdGgucm91bmQoZnJhbWVTdGF0ZS5zaXplWzFdICogdGlsZVBpeGVsUmF0aW8pO1xuICAgICAgICBpZiAocm90YXRpb24pIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gTWF0aC5yb3VuZChNYXRoLnNxcnQod2lkdGggKiB3aWR0aCArIGhlaWdodCAqIGhlaWdodCkpO1xuICAgICAgICAgICAgd2lkdGggPSBzaXplO1xuICAgICAgICAgICAgaGVpZ2h0ID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZHggPSAodGlsZVJlc29sdXRpb24gKiB3aWR0aCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgICAgIHZhciBkeSA9ICh0aWxlUmVzb2x1dGlvbiAqIGhlaWdodCkgLyAyIC8gdGlsZVBpeGVsUmF0aW87XG4gICAgICAgIHZhciBjYW52YXNFeHRlbnQgPSBbXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzBdIC0gZHgsXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzFdIC0gZHksXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzBdICsgZHgsXG4gICAgICAgICAgICB2aWV3Q2VudGVyWzFdICsgZHksXG4gICAgICAgIF07XG4gICAgICAgIHZhciB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PG51bWJlciwgT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pj59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdGlsZXNUb0RyYXdCeVogPSB7fTtcbiAgICAgICAgdGlsZXNUb0RyYXdCeVpbel0gPSB7fTtcbiAgICAgICAgdmFyIGZpbmRMb2FkZWRUaWxlcyA9IHRoaXMuY3JlYXRlTG9hZGVkVGlsZUZpbmRlcih0aWxlU291cmNlLCBwcm9qZWN0aW9uLCB0aWxlc1RvRHJhd0J5Wik7XG4gICAgICAgIHZhciB0bXBFeHRlbnQgPSB0aGlzLnRtcEV4dGVudDtcbiAgICAgICAgdmFyIHRtcFRpbGVSYW5nZSA9IHRoaXMudG1wVGlsZVJhbmdlXztcbiAgICAgICAgdGhpcy5uZXdUaWxlc18gPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLmdldFRpbGUoeiwgeCwgeSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmF3YWJsZVRpbGUodGlsZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpZCA9IGdldFVpZCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlc1RvRHJhd0J5Wlt6XVt0aWxlLnRpbGVDb29yZC50b1N0cmluZygpXSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5UcmFuc2l0aW9uID0gdGlsZS5pblRyYW5zaXRpb24odWlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5uZXdUaWxlc18gJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaW5UcmFuc2l0aW9uIHx8IHRoaXMucmVuZGVyZWRUaWxlcy5pbmRleE9mKHRpbGUpID09PSAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld1RpbGVzXyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsb29rIGZvciBhbHQgdGlsZXMgaWYgYWxwaGEgaXMgMVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkVGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UodGlsZS50aWxlQ29vcmQsIHRtcFRpbGVSYW5nZSwgdG1wRXh0ZW50KTtcbiAgICAgICAgICAgICAgICB2YXIgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZFRpbGVSYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkID0gZmluZExvYWRlZFRpbGVzKHogKyAxLCBjaGlsZFRpbGVSYW5nZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghY292ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlR3JpZC5mb3JFYWNoVGlsZUNvb3JkUGFyZW50VGlsZVJhbmdlKHRpbGUudGlsZUNvb3JkLCBmaW5kTG9hZGVkVGlsZXMsIHRtcFRpbGVSYW5nZSwgdG1wRXh0ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNhbnZhc1NjYWxlID0gdGlsZVJlc29sdXRpb24gLyB2aWV3UmVzb2x1dGlvbjtcbiAgICAgICAgLy8gc2V0IGZvcndhcmQgYW5kIGludmVyc2UgcGl4ZWwgdHJhbnNmb3Jtc1xuICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRoaXMucGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDIsIGZyYW1lU3RhdGUuc2l6ZVsxXSAvIDIsIDEgLyB0aWxlUGl4ZWxSYXRpbywgMSAvIHRpbGVQaXhlbFJhdGlvLCByb3RhdGlvbiwgLXdpZHRoIC8gMiwgLWhlaWdodCAvIDIpO1xuICAgICAgICB2YXIgY2FudmFzVHJhbnNmb3JtID0gdG9UcmFuc2Zvcm1TdHJpbmcodGhpcy5waXhlbFRyYW5zZm9ybSk7XG4gICAgICAgIHRoaXMudXNlQ29udGFpbmVyKHRhcmdldCwgY2FudmFzVHJhbnNmb3JtLCBsYXllclN0YXRlLm9wYWNpdHkpO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xuICAgICAgICBtYWtlSW52ZXJzZSh0aGlzLmludmVyc2VQaXhlbFRyYW5zZm9ybSwgdGhpcy5waXhlbFRyYW5zZm9ybSk7XG4gICAgICAgIC8vIHNldCBzY2FsZSB0cmFuc2Zvcm0gZm9yIGNhbGN1bGF0aW5nIHRpbGUgcG9zaXRpb25zIG9uIHRoZSBjYW52YXNcbiAgICAgICAgY29tcG9zZVRyYW5zZm9ybSh0aGlzLnRlbXBUcmFuc2Zvcm0sIHdpZHRoIC8gMiwgaGVpZ2h0IC8gMiwgY2FudmFzU2NhbGUsIGNhbnZhc1NjYWxlLCAwLCAtd2lkdGggLyAyLCAtaGVpZ2h0IC8gMik7XG4gICAgICAgIGlmIChjYW52YXMud2lkdGggIT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPSBoZWlnaHQpIHtcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGhpcy5jb250YWluZXJSZXVzZWQpIHtcbiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsYXllckV4dGVudCkge1xuICAgICAgICAgICAgdGhpcy5jbGlwVW5yb3RhdGVkKGNvbnRleHQsIGZyYW1lU3RhdGUsIGxheWVyRXh0ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBhc3NpZ24oY29udGV4dCwgdGlsZVNvdXJjZS5nZXRDb250ZXh0T3B0aW9ucygpKTtcbiAgICAgICAgdGhpcy5wcmVSZW5kZXIoY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPSAwO1xuICAgICAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgICAgIHZhciB6cyA9IE9iamVjdC5rZXlzKHRpbGVzVG9EcmF3QnlaKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgenMuc29ydChudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcbiAgICAgICAgdmFyIGNsaXBzLCBjbGlwWnMsIGN1cnJlbnRDbGlwO1xuICAgICAgICBpZiAobGF5ZXJTdGF0ZS5vcGFjaXR5ID09PSAxICYmXG4gICAgICAgICAgICAoIXRoaXMuY29udGFpbmVyUmV1c2VkIHx8XG4gICAgICAgICAgICAgICAgdGlsZVNvdXJjZS5nZXRPcGFxdWUoZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbikpKSB7XG4gICAgICAgICAgICB6cyA9IHpzLnJldmVyc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNsaXBzID0gW107XG4gICAgICAgICAgICBjbGlwWnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0genMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50WiA9IHpzW2ldO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRUaWxlUGl4ZWxTaXplID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxTaXplKGN1cnJlbnRaLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oY3VycmVudFopO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRTY2FsZSA9IGN1cnJlbnRSZXNvbHV0aW9uIC8gdGlsZVJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgZHhfMSA9IGN1cnJlbnRUaWxlUGl4ZWxTaXplWzBdICogY3VycmVudFNjYWxlICogY2FudmFzU2NhbGU7XG4gICAgICAgICAgICB2YXIgZHlfMSA9IGN1cnJlbnRUaWxlUGl4ZWxTaXplWzFdICogY3VycmVudFNjYWxlICogY2FudmFzU2NhbGU7XG4gICAgICAgICAgICB2YXIgb3JpZ2luVGlsZUNvb3JkID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaKGdldFRvcExlZnQoY2FudmFzRXh0ZW50KSwgY3VycmVudFopO1xuICAgICAgICAgICAgdmFyIG9yaWdpblRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQob3JpZ2luVGlsZUNvb3JkKTtcbiAgICAgICAgICAgIHZhciBvcmlnaW5fMSA9IGFwcGx5VHJhbnNmb3JtKHRoaXMudGVtcFRyYW5zZm9ybSwgW1xuICAgICAgICAgICAgICAgICh0aWxlUGl4ZWxSYXRpbyAqIChvcmlnaW5UaWxlRXh0ZW50WzBdIC0gY2FudmFzRXh0ZW50WzBdKSkgL1xuICAgICAgICAgICAgICAgICAgICB0aWxlUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAodGlsZVBpeGVsUmF0aW8gKiAoY2FudmFzRXh0ZW50WzNdIC0gb3JpZ2luVGlsZUV4dGVudFszXSkpIC9cbiAgICAgICAgICAgICAgICAgICAgdGlsZVJlc29sdXRpb24sXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIHZhciB0aWxlR3V0dGVyID0gdGlsZVBpeGVsUmF0aW8gKiB0aWxlU291cmNlLmdldEd1dHRlckZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICB2YXIgdGlsZXNUb0RyYXcgPSB0aWxlc1RvRHJhd0J5WltjdXJyZW50Wl07XG4gICAgICAgICAgICBmb3IgKHZhciB0aWxlQ29vcmRLZXkgaW4gdGlsZXNUb0RyYXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9ICovICh0aWxlc1RvRHJhd1t0aWxlQ29vcmRLZXldKTtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZUNvb3JkID0gdGlsZS50aWxlQ29vcmQ7XG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGludGVnZXIgcG9zaXRpb25zIGFuZCBzaXplcyBzbyB0aGF0IHRpbGVzIGFsaWduXG4gICAgICAgICAgICAgICAgdmFyIHhJbmRleCA9IG9yaWdpblRpbGVDb29yZFsxXSAtIHRpbGVDb29yZFsxXTtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFggPSBNYXRoLnJvdW5kKG9yaWdpbl8xWzBdIC0gKHhJbmRleCAtIDEpICogZHhfMSk7XG4gICAgICAgICAgICAgICAgdmFyIHlJbmRleCA9IG9yaWdpblRpbGVDb29yZFsyXSAtIHRpbGVDb29yZFsyXTtcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFkgPSBNYXRoLnJvdW5kKG9yaWdpbl8xWzFdIC0gKHlJbmRleCAtIDEpICogZHlfMSk7XG4gICAgICAgICAgICAgICAgdmFyIHggPSBNYXRoLnJvdW5kKG9yaWdpbl8xWzBdIC0geEluZGV4ICogZHhfMSk7XG4gICAgICAgICAgICAgICAgdmFyIHkgPSBNYXRoLnJvdW5kKG9yaWdpbl8xWzFdIC0geUluZGV4ICogZHlfMSk7XG4gICAgICAgICAgICAgICAgdmFyIHcgPSBuZXh0WCAtIHg7XG4gICAgICAgICAgICAgICAgdmFyIGggPSBuZXh0WSAtIHk7XG4gICAgICAgICAgICAgICAgdmFyIHRyYW5zaXRpb24gPSB6ID09PSBjdXJyZW50WjtcbiAgICAgICAgICAgICAgICB2YXIgaW5UcmFuc2l0aW9uID0gdHJhbnNpdGlvbiAmJiB0aWxlLmdldEFscGhhKGdldFVpZCh0aGlzKSwgZnJhbWVTdGF0ZS50aW1lKSAhPT0gMTtcbiAgICAgICAgICAgICAgICBpZiAoIWluVHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2xpcHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENsaXAgbWFzayBmb3IgcmVnaW9ucyBpbiB0aGlzIHRpbGUgdGhhdCBhbHJlYWR5IGZpbGxlZCBieSBhIGhpZ2hlciB6IHRpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENsaXAgPSBbeCwgeSwgeCArIHcsIHksIHggKyB3LCB5ICsgaCwgeCwgeSArIGhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaV8xID0gMCwgaWkgPSBjbGlwcy5sZW5ndGg7IGlfMSA8IGlpOyArK2lfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh6ICE9PSBjdXJyZW50WiAmJiBjdXJyZW50WiA8IGNsaXBac1tpXzFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbGlwID0gY2xpcHNbaV8xXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bnRlci1jbG9ja3dpc2UgKG91dGVyIHJpbmcpIGZvciBjdXJyZW50IHRpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oY3VycmVudENsaXBbMF0sIGN1cnJlbnRDbGlwWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbMl0sIGN1cnJlbnRDbGlwWzNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbNF0sIGN1cnJlbnRDbGlwWzVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbNl0sIGN1cnJlbnRDbGlwWzddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2xvY2t3aXNlIChpbm5lciByaW5nKSBmb3IgaGlnaGVyIHogdGlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyhjbGlwWzZdLCBjbGlwWzddKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFs0XSwgY2xpcFs1XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMl0sIGNsaXBbM10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzBdLCBjbGlwWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xpcHMucHVzaChjdXJyZW50Q2xpcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGlwWnMucHVzaChjdXJyZW50Wik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCh4LCB5LCB3LCBoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdUaWxlSW1hZ2UodGlsZSwgZnJhbWVTdGF0ZSwgeCwgeSwgdywgaCwgdGlsZUd1dHRlciwgdHJhbnNpdGlvbiwgbGF5ZXJTdGF0ZS5vcGFjaXR5KTtcbiAgICAgICAgICAgICAgICBpZiAoY2xpcHMgJiYgIWluVHJhbnNpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLnVuc2hpZnQodGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMucHVzaCh0aWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVVc2VkVGlsZXMoZnJhbWVTdGF0ZS51c2VkVGlsZXMsIHRpbGVTb3VyY2UsIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbiA9IHNvdXJjZVJldmlzaW9uO1xuICAgICAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbiA9IHRpbGVSZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLmV4dGVudENoYW5nZWQgPVxuICAgICAgICAgICAgIXRoaXMucmVuZGVyZWRFeHRlbnRfIHx8ICFlcXVhbHModGhpcy5yZW5kZXJlZEV4dGVudF8sIGNhbnZhc0V4dGVudCk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRFeHRlbnRfID0gY2FudmFzRXh0ZW50O1xuICAgICAgICB0aGlzLnJlbmRlcmVkUGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XG4gICAgICAgIHRoaXMucmVuZGVyZWRQcm9qZWN0aW9uID0gcHJvamVjdGlvbjtcbiAgICAgICAgdGhpcy5tYW5hZ2VUaWxlUHlyYW1pZChmcmFtZVN0YXRlLCB0aWxlU291cmNlLCB0aWxlR3JpZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwgZXh0ZW50LCB6LCB0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpKTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZUV4cGlyZUNhY2hlKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UpO1xuICAgICAgICB0aGlzLnBvc3RSZW5kZXIoY29udGV4dCwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIGlmIChsYXllclN0YXRlLmV4dGVudCkge1xuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbnZhc1RyYW5zZm9ybSAhPT0gY2FudmFzLnN0eWxlLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY2FudmFzLnN0eWxlLnRyYW5zZm9ybSA9IGNhbnZhc1RyYW5zZm9ybTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBMZWZ0IG9mIHRoZSB0aWxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRvcCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdyBXaWR0aCBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaCBIZWlnaHQgb2YgdGhlIHRpbGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBUaWxlIGd1dHRlci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHRyYW5zaXRpb24gQXBwbHkgYW4gYWxwaGEgdHJhbnNpdGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3BhY2l0eSBPcGFjaXR5LlxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5kcmF3VGlsZUltYWdlID0gZnVuY3Rpb24gKHRpbGUsIGZyYW1lU3RhdGUsIHgsIHksIHcsIGgsIGd1dHRlciwgdHJhbnNpdGlvbiwgb3BhY2l0eSkge1xuICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmdldFRpbGVJbWFnZSh0aWxlKTtcbiAgICAgICAgaWYgKCFpbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1aWQgPSBnZXRVaWQodGhpcyk7XG4gICAgICAgIHZhciB0aWxlQWxwaGEgPSB0cmFuc2l0aW9uID8gdGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgOiAxO1xuICAgICAgICB2YXIgYWxwaGEgPSBvcGFjaXR5ICogdGlsZUFscGhhO1xuICAgICAgICB2YXIgYWxwaGFDaGFuZ2VkID0gYWxwaGEgIT09IHRoaXMuY29udGV4dC5nbG9iYWxBbHBoYTtcbiAgICAgICAgaWYgKGFscGhhQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGd1dHRlciwgZ3V0dGVyLCBpbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIGltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHgsIHksIHcsIGgpO1xuICAgICAgICBpZiAoYWxwaGFDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aWxlQWxwaGEgIT09IDEpIHtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUuYW5pbWF0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdGlsZS5lbmRUcmFuc2l0aW9uKHVpZCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBJbWFnZVxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgICAgIHJldHVybiBjb250ZXh0ID8gY29udGV4dC5jYW52YXMgOiBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpbWFnZSBmcm9tIGEgdGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL0ltYWdlVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLmdldFRpbGVJbWFnZSA9IGZ1bmN0aW9uICh0aWxlKSB7XG4gICAgICAgIHJldHVybiB0aWxlLmdldEltYWdlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnNjaGVkdWxlRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSkge1xuICAgICAgICBpZiAodGlsZVNvdXJjZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgcG9zdFJlbmRlckZ1bmN0aW9uID0gZnVuY3Rpb24gKHRpbGVTb3VyY2UsIG1hcCwgZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB0aWxlU291cmNlS2V5ID0gZ2V0VWlkKHRpbGVTb3VyY2UpO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlU291cmNlS2V5IGluIGZyYW1lU3RhdGUudXNlZFRpbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGVTb3VyY2UuZXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbiwgZnJhbWVTdGF0ZS51c2VkVGlsZXNbdGlsZVNvdXJjZUtleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZChudWxsLCB0aWxlU291cmNlKTtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuUG9zdFJlbmRlckZ1bmN0aW9ufSAqLyAocG9zdFJlbmRlckZ1bmN0aW9uKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICFPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vc291cmNlL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZVNvdXJjZSBUaWxlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydCgnLi4vLi4vVGlsZS5qcycpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgQ2FudmFzVGlsZUxheWVyUmVuZGVyZXIucHJvdG90eXBlLnVwZGF0ZVVzZWRUaWxlcyA9IGZ1bmN0aW9uICh1c2VkVGlsZXMsIHRpbGVTb3VyY2UsIHRpbGUpIHtcbiAgICAgICAgLy8gRklYTUUgc2hvdWxkIHdlIHVzZSB0aWxlc1RvRHJhd0J5WiBpbnN0ZWFkP1xuICAgICAgICB2YXIgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgaWYgKCEodGlsZVNvdXJjZUtleSBpbiB1c2VkVGlsZXMpKSB7XG4gICAgICAgICAgICB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV0gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICB1c2VkVGlsZXNbdGlsZVNvdXJjZUtleV1bdGlsZS5nZXRLZXkoKV0gPSB0cnVlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFuYWdlIHRpbGUgcHlyYW1pZC5cbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHBlcmZvcm1zIGEgbnVtYmVyIG9mIGZ1bmN0aW9ucyByZWxhdGVkIHRvIHRoZSB0aWxlcyBhdCB0aGVcbiAgICAgKiBjdXJyZW50IHpvb20gYW5kIGxvd2VyIHpvb20gbGV2ZWxzOlxuICAgICAqIC0gcmVnaXN0ZXJzIGlkbGUgdGlsZXMgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcyBzbyB0aGF0IHRoZXkgYXJlIG5vdFxuICAgICAqICAgZGlzY2FyZGVkIGJ5IHRoZSB0aWxlIHF1ZXVlXG4gICAgICogLSBlbnF1ZXVlcyBtaXNzaW5nIHRpbGVzXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL3NvdXJjZS9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGVTb3VyY2UgVGlsZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gY3VycmVudFogQ3VycmVudCBaLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwcmVsb2FkIExvYWQgbG93IHJlc29sdXRpb24gdGlsZXMgdXAgdG8gJ3ByZWxvYWQnIGxldmVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uLy4uL1RpbGUuanNcIikuZGVmYXVsdCk6dm9pZH0gW29wdF90aWxlQ2FsbGJhY2tdIFRpbGUgY2FsbGJhY2suXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIENhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5tYW5hZ2VUaWxlUHlyYW1pZCA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCB0aWxlU291cmNlLCB0aWxlR3JpZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwgZXh0ZW50LCBjdXJyZW50WiwgcHJlbG9hZCwgb3B0X3RpbGVDYWxsYmFjaykge1xuICAgICAgICB2YXIgdGlsZVNvdXJjZUtleSA9IGdldFVpZCh0aWxlU291cmNlKTtcbiAgICAgICAgaWYgKCEodGlsZVNvdXJjZUtleSBpbiBmcmFtZVN0YXRlLndhbnRlZFRpbGVzKSkge1xuICAgICAgICAgICAgZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHZhciB3YW50ZWRUaWxlcyA9IGZyYW1lU3RhdGUud2FudGVkVGlsZXNbdGlsZVNvdXJjZUtleV07XG4gICAgICAgIHZhciB0aWxlUXVldWUgPSBmcmFtZVN0YXRlLnRpbGVRdWV1ZTtcbiAgICAgICAgdmFyIG1pblpvb20gPSB0aWxlR3JpZC5nZXRNaW5ab29tKCk7XG4gICAgICAgIHZhciB0aWxlQ291bnQgPSAwO1xuICAgICAgICB2YXIgdGlsZSwgdGlsZVJhbmdlLCB0aWxlUmVzb2x1dGlvbiwgeCwgeSwgejtcbiAgICAgICAgZm9yICh6ID0gbWluWm9vbTsgeiA8PSBjdXJyZW50WjsgKyt6KSB7XG4gICAgICAgICAgICB0aWxlUmFuZ2UgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgeiwgdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIHRpbGVSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgICAgIGZvciAoeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50WiAtIHogPD0gcHJlbG9hZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgKyt0aWxlQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdhbnRlZFRpbGVzW3RpbGUuZ2V0S2V5KCldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRpbGVRdWV1ZS5pc0tleVF1ZXVlZCh0aWxlLmdldEtleSgpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUXVldWUuZW5xdWV1ZShbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNvdXJjZUtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVHcmlkLmdldFRpbGVDb29yZENlbnRlcih0aWxlLnRpbGVDb29yZCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdF90aWxlQ2FsbGJhY2sgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdF90aWxlQ2FsbGJhY2sodGlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlU291cmNlLnVzZVRpbGUoeiwgeCwgeSwgcHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGlsZVNvdXJjZS51cGRhdGVDYWNoZVNpemUodGlsZUNvdW50LCBwcm9qZWN0aW9uKTtcbiAgICB9O1xuICAgIHJldHVybiBDYW52YXNUaWxlTGF5ZXJSZW5kZXJlcjtcbn0oQ2FudmFzTGF5ZXJSZW5kZXJlcikpO1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uLy4uL2xheWVyL1RpbGUuanNcIikuZGVmYXVsdHxpbXBvcnQoXCIuLi8uLi9sYXllci9WZWN0b3JUaWxlLmpzXCIpLmRlZmF1bHR9XG4gKi9cbkNhbnZhc1RpbGVMYXllclJlbmRlcmVyLnByb3RvdHlwZS5nZXRMYXllcjtcbmV4cG9ydCBkZWZhdWx0IENhbnZhc1RpbGVMYXllclJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUxheWVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9UaWxlU3RhdGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgSURMRTogMCxcbiAgICBMT0FESU5HOiAxLFxuICAgIExPQURFRDogMixcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgdGhhdCB0aWxlIGxvYWRpbmcgZmFpbGVkXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBFUlJPUjogMyxcbiAgICBFTVBUWTogNCxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlU3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9UaWxlXG4gKi9cbmltcG9ydCBCYXNlVGlsZUxheWVyIGZyb20gJy4vQmFzZVRpbGUuanMnO1xuaW1wb3J0IENhbnZhc1RpbGVMYXllclJlbmRlcmVyIGZyb20gJy4uL3JlbmRlcmVyL2NhbnZhcy9UaWxlTGF5ZXIuanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBGb3IgbGF5ZXIgc291cmNlcyB0aGF0IHByb3ZpZGUgcHJlLXJlbmRlcmVkLCB0aWxlZCBpbWFnZXMgaW4gZ3JpZHMgdGhhdCBhcmVcbiAqIG9yZ2FuaXplZCBieSB6b29tIGxldmVscyBmb3Igc3BlY2lmaWMgcmVzb2x1dGlvbnMuXG4gKiBOb3RlIHRoYXQgYW55IHByb3BlcnR5IHNldCBpbiB0aGUgb3B0aW9ucyBpcyBzZXQgYXMgYSB7QGxpbmsgbW9kdWxlOm9sL09iamVjdH5CYXNlT2JqZWN0fVxuICogcHJvcGVydHkgb24gdGhlIGxheWVyIG9iamVjdDsgZm9yIGV4YW1wbGUsIHNldHRpbmcgYHRpdGxlOiAnTXkgVGl0bGUnYCBpbiB0aGVcbiAqIG9wdGlvbnMgbWVhbnMgdGhhdCBgdGl0bGVgIGlzIG9ic2VydmFibGUsIGFuZCBoYXMgZ2V0L3NldCBhY2Nlc3NvcnMuXG4gKlxuICogQHRlbXBsYXRlIHtpbXBvcnQoXCIuLi9zb3VyY2UvVGlsZS5qc1wiKS5kZWZhdWx0fSBUaWxlU291cmNlVHlwZVxuICogQGV4dGVuZHMge0Jhc2VUaWxlTGF5ZXI8VGlsZVNvdXJjZVR5cGU+fVxuICogQGFwaVxuICovXG52YXIgVGlsZUxheWVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlTGF5ZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0Jhc2VUaWxlLmpzXCIpLk9wdGlvbnM8VGlsZVNvdXJjZVR5cGU+fSBbb3B0X29wdGlvbnNdIFRpbGUgbGF5ZXIgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlTGF5ZXIob3B0X29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIG9wdF9vcHRpb25zKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSByZW5kZXJlciBmb3IgdGhpcyBsYXllci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9yZW5kZXJlci9MYXllci5qc1wiKS5kZWZhdWx0fSBBIGxheWVyIHJlbmRlcmVyLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlTGF5ZXIucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENhbnZhc1RpbGVMYXllclJlbmRlcmVyKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVMYXllcjtcbn0oQmFzZVRpbGVMYXllcikpO1xuZXhwb3J0IGRlZmF1bHQgVGlsZUxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld1Byb3BlcnR5XG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIENFTlRFUjogJ2NlbnRlcicsXG4gICAgUkVTT0xVVElPTjogJ3Jlc29sdXRpb24nLFxuICAgIFJPVEFUSU9OOiAncm90YXRpb24nLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29vcmRpbmF0ZVxuICovXG5pbXBvcnQgeyBnZXRXaWR0aCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBwYWROdW1iZXIgfSBmcm9tICcuL3N0cmluZy5qcyc7XG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGFuIHh5IGNvb3JkaW5hdGUuIEV4YW1wbGU6IGBbMTYsIDQ4XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gQ29vcmRpbmF0ZVxuICogQGFwaVxuICovXG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSBhbmRcbiAqIHRyYW5zZm9ybXMgaXQgaW50byBhIGB7c3RyaW5nfWAuXG4gKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChDb29yZGluYXRlfHVuZGVmaW5lZCkpOiBzdHJpbmd9IENvb3JkaW5hdGVGb3JtYXRcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBBZGQgYGRlbHRhYCB0byBgY29vcmRpbmF0ZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge2FkZH0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIGFkZChjb29yZCwgWy0yLCA0XSk7XG4gKiAgICAgLy8gY29vcmQgaXMgbm93IFs1Ljg1LCA1MS45ODMzMzNdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGRlbHRhIERlbHRhLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGlucHV0IGNvb3JkaW5hdGUgYWRqdXN0ZWQgYnlcbiAqIHRoZSBnaXZlbiBkZWx0YS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZChjb29yZGluYXRlLCBkZWx0YSkge1xuICAgIGNvb3JkaW5hdGVbMF0gKz0gK2RlbHRhWzBdO1xuICAgIGNvb3JkaW5hdGVbMV0gKz0gK2RlbHRhWzFdO1xuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBwb2ludCBjbG9zZXN0IHRvIHRoZSBwYXNzZWQgY29vcmRpbmF0ZSBvbiB0aGUgcGFzc2VkIGNpcmNsZS5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgVGhlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9DaXJjbGUuanNcIikuZGVmYXVsdH0gY2lyY2xlIFRoZSBjaXJjbGUuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDbG9zZXN0IHBvaW50IG9uIHRoZSBjaXJjdW1mZXJlbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdE9uQ2lyY2xlKGNvb3JkaW5hdGUsIGNpcmNsZSkge1xuICAgIHZhciByID0gY2lyY2xlLmdldFJhZGl1cygpO1xuICAgIHZhciBjZW50ZXIgPSBjaXJjbGUuZ2V0Q2VudGVyKCk7XG4gICAgdmFyIHgwID0gY2VudGVyWzBdO1xuICAgIHZhciB5MCA9IGNlbnRlclsxXTtcbiAgICB2YXIgeDEgPSBjb29yZGluYXRlWzBdO1xuICAgIHZhciB5MSA9IGNvb3JkaW5hdGVbMV07XG4gICAgdmFyIGR4ID0geDEgLSB4MDtcbiAgICB2YXIgZHkgPSB5MSAtIHkwO1xuICAgIGlmIChkeCA9PT0gMCAmJiBkeSA9PT0gMCkge1xuICAgICAgICBkeCA9IDE7XG4gICAgfVxuICAgIHZhciBkID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICB2YXIgeCA9IHgwICsgKHIgKiBkeCkgLyBkO1xuICAgIHZhciB5ID0geTAgKyAociAqIGR5KSAvIGQ7XG4gICAgcmV0dXJuIFt4LCB5XTtcbn1cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgcG9pbnQgY2xvc2VzdCB0byB0aGUgcGFzc2VkIGNvb3JkaW5hdGUgb24gdGhlIHBhc3NlZCBzZWdtZW50LlxuICogVGhpcyBpcyB0aGUgZm9vdCBvZiB0aGUgcGVycGVuZGljdWxhciBvZiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudCB3aGVuXG4gKiB0aGUgZm9vdCBpcyBvbiB0aGUgc2VnbWVudCwgb3IgdGhlIGNsb3Nlc3Qgc2VnbWVudCBjb29yZGluYXRlIHdoZW4gdGhlIGZvb3RcbiAqIGlzIG91dHNpZGUgdGhlIHNlZ21lbnQuXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBjb29yZGluYXRlLlxuICogQHBhcmFtIHtBcnJheTxDb29yZGluYXRlPn0gc2VnbWVudCBUaGUgdHdvIGNvb3JkaW5hdGVzXG4gKiBvZiB0aGUgc2VnbWVudC5cbiAqIEByZXR1cm4ge0Nvb3JkaW5hdGV9IFRoZSBmb290IG9mIHRoZSBwZXJwZW5kaWN1bGFyIG9mXG4gKiB0aGUgY29vcmRpbmF0ZSB0byB0aGUgc2VnbWVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RPblNlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICAgIHZhciB4MCA9IGNvb3JkaW5hdGVbMF07XG4gICAgdmFyIHkwID0gY29vcmRpbmF0ZVsxXTtcbiAgICB2YXIgc3RhcnQgPSBzZWdtZW50WzBdO1xuICAgIHZhciBlbmQgPSBzZWdtZW50WzFdO1xuICAgIHZhciB4MSA9IHN0YXJ0WzBdO1xuICAgIHZhciB5MSA9IHN0YXJ0WzFdO1xuICAgIHZhciB4MiA9IGVuZFswXTtcbiAgICB2YXIgeTIgPSBlbmRbMV07XG4gICAgdmFyIGR4ID0geDIgLSB4MTtcbiAgICB2YXIgZHkgPSB5MiAtIHkxO1xuICAgIHZhciBhbG9uZyA9IGR4ID09PSAwICYmIGR5ID09PSAwXG4gICAgICAgID8gMFxuICAgICAgICA6IChkeCAqICh4MCAtIHgxKSArIGR5ICogKHkwIC0geTEpKSAvIChkeCAqIGR4ICsgZHkgKiBkeSB8fCAwKTtcbiAgICB2YXIgeCwgeTtcbiAgICBpZiAoYWxvbmcgPD0gMCkge1xuICAgICAgICB4ID0geDE7XG4gICAgICAgIHkgPSB5MTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYWxvbmcgPj0gMSkge1xuICAgICAgICB4ID0geDI7XG4gICAgICAgIHkgPSB5MjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHggPSB4MSArIGFsb25nICogZHg7XG4gICAgICAgIHkgPSB5MSArIGFsb25nICogZHk7XG4gICAgfVxuICAgIHJldHVybiBbeCwgeV07XG59XG4vKipcbiAqIFJldHVybnMgYSB7QGxpbmsgbW9kdWxlOm9sL2Nvb3JkaW5hdGV+Q29vcmRpbmF0ZUZvcm1hdH0gZnVuY3Rpb24gdGhhdCBjYW4gYmVcbiAqIHVzZWQgdG8gZm9ybWF0XG4gKiBhIHtDb29yZGluYXRlfSB0byBhIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Y3JlYXRlU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgc3RyaW5naWZ5RnVuYyA9IGNyZWF0ZVN0cmluZ1hZKCk7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzgsIDQ4J1xuICpcbiAqIEV4YW1wbGUgd2l0aCBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMiBmcmFjdGlvbmFsIGRpZ2l0czpcbiAqXG4gKiAgICAgaW1wb3J0IHtjcmVhdGVTdHJpbmdYWX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzdHJpbmdpZnlGdW5jID0gY3JlYXRlU3RyaW5nWFkoMik7XG4gKiAgICAgdmFyIG91dCA9IHN0cmluZ2lmeUZ1bmMoY29vcmQpO1xuICogICAgIC8vIG91dCBpcyBub3cgJzcuODUsIDQ3Ljk4J1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlRm9ybWF0fSBDb29yZGluYXRlIGZvcm1hdC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0cmluZ1hZKG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHJldHVybiAoXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcgWFkuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKGNvb3JkaW5hdGUpIHtcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nWFkoY29vcmRpbmF0ZSwgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGhlbWlzcGhlcmVzIEhlbWlzcGhlcmVzLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXMgRGVncmVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZ3JlZXNUb1N0cmluZ0hETVMoaGVtaXNwaGVyZXMsIGRlZ3JlZXMsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHZhciBub3JtYWxpemVkRGVncmVlcyA9IG1vZHVsbyhkZWdyZWVzICsgMTgwLCAzNjApIC0gMTgwO1xuICAgIHZhciB4ID0gTWF0aC5hYnMoMzYwMCAqIG5vcm1hbGl6ZWREZWdyZWVzKTtcbiAgICB2YXIgZGZsUHJlY2lzaW9uID0gb3B0X2ZyYWN0aW9uRGlnaXRzIHx8IDA7XG4gICAgdmFyIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBkZmxQcmVjaXNpb24pO1xuICAgIHZhciBkZWcgPSBNYXRoLmZsb29yKHggLyAzNjAwKTtcbiAgICB2YXIgbWluID0gTWF0aC5mbG9vcigoeCAtIGRlZyAqIDM2MDApIC8gNjApO1xuICAgIHZhciBzZWMgPSB4IC0gZGVnICogMzYwMCAtIG1pbiAqIDYwO1xuICAgIHNlYyA9IE1hdGguY2VpbChzZWMgKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uO1xuICAgIGlmIChzZWMgPj0gNjApIHtcbiAgICAgICAgc2VjID0gMDtcbiAgICAgICAgbWluICs9IDE7XG4gICAgfVxuICAgIGlmIChtaW4gPj0gNjApIHtcbiAgICAgICAgbWluID0gMDtcbiAgICAgICAgZGVnICs9IDE7XG4gICAgfVxuICAgIHJldHVybiAoZGVnICtcbiAgICAgICAgJ1xcdTAwYjAgJyArXG4gICAgICAgIHBhZE51bWJlcihtaW4sIDIpICtcbiAgICAgICAgJ1xcdTIwMzIgJyArXG4gICAgICAgIHBhZE51bWJlcihzZWMsIDIsIGRmbFByZWNpc2lvbikgK1xuICAgICAgICAnXFx1MjAzMycgK1xuICAgICAgICAobm9ybWFsaXplZERlZ3JlZXMgPT0gMFxuICAgICAgICAgICAgPyAnJ1xuICAgICAgICAgICAgOiAnICcgKyBoZW1pc3BoZXJlcy5jaGFyQXQobm9ybWFsaXplZERlZ3JlZXMgPCAwID8gMSA6IDApKSk7XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHtAbGluayBtb2R1bGU6b2wvY29vcmRpbmF0ZX5Db29yZGluYXRlfSB0byBhIHN0cmluZ1xuICogdXNpbmcgdGhlIGdpdmVuIHN0cmluZyB0ZW1wbGF0ZS4gVGhlIHN0cmluZ3MgYHt4fWAgYW5kIGB7eX1gIGluIHRoZSB0ZW1wbGF0ZVxuICogd2lsbCBiZSByZXBsYWNlZCB3aXRoIHRoZSBmaXJzdCBhbmQgc2Vjb25kIGNvb3JkaW5hdGUgdmFsdWVzIHJlc3BlY3RpdmVseS5cbiAqXG4gKiBFeGFtcGxlIHdpdGhvdXQgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHRlbXBsYXRlID0gJ0Nvb3JkaW5hdGUgaXMgKHt4fXx7eX0pLic7XG4gKiAgICAgdmFyIG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDh8NDgpLidcbiAqXG4gKiBFeGFtcGxlIGV4cGxpY2l0bHkgc3BlY2lmeWluZyB0aGUgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7Zm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIHRlbXBsYXRlID0gJ0Nvb3JkaW5hdGUgaXMgKHt4fXx7eX0pLic7XG4gKiAgICAgdmFyIG91dCA9IGZvcm1hdChjb29yZCwgdGVtcGxhdGUsIDIpO1xuICogICAgIC8vIG91dCBpcyBub3cgJ0Nvb3JkaW5hdGUgaXMgKDcuODV8NDcuOTgpLidcbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBBIHRlbXBsYXRlIHN0cmluZyB3aXRoIGB7eH1gIGFuZCBge3l9YCBwbGFjZWhvbGRlcnNcbiAqICAgICB0aGF0IHdpbGwgYmUgcmVwbGFjZWQgYnkgZmlyc3QgYW5kIHNlY29uZCBjb29yZGluYXRlIHZhbHVlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2ZyYWN0aW9uRGlnaXRzXSBUaGUgbnVtYmVyIG9mIGRpZ2l0cyB0byBpbmNsdWRlXG4gKiAgICBhZnRlciB0aGUgZGVjaW1hbCBwb2ludC4gRGVmYXVsdCBpcyBgMGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEZvcm1hdHRlZCBjb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0KGNvb3JkaW5hdGUsIHRlbXBsYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gdGVtcGxhdGVcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7eH0nLCBjb29yZGluYXRlWzBdLnRvRml4ZWQob3B0X2ZyYWN0aW9uRGlnaXRzKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKCd7eX0nLCBjb29yZGluYXRlWzFdLnRvRml4ZWQob3B0X2ZyYWN0aW9uRGlnaXRzKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUxIEZpcnN0IGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUyIFNlY29uZCBjb29yZGluYXRlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHR3byBjb29yZGluYXRlcyBhcmUgZXF1YWwuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbHMoY29vcmRpbmF0ZTEsIGNvb3JkaW5hdGUyKSB7XG4gICAgdmFyIGVxdWFscyA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IGNvb3JkaW5hdGUxLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIGlmIChjb29yZGluYXRlMVtpXSAhPSBjb29yZGluYXRlMltpXSkge1xuICAgICAgICAgICAgZXF1YWxzID0gZmFsc2U7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXF1YWxzO1xufVxuLyoqXG4gKiBSb3RhdGUgYGNvb3JkaW5hdGVgIGJ5IGBhbmdsZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmRcbiAqIHJldHVybmVkIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge3JvdGF0ZX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciByb3RhdGVSYWRpYW5zID0gTWF0aC5QSSAvIDI7IC8vIDkwIGRlZ3JlZXNcbiAqICAgICByb3RhdGUoY29vcmQsIHJvdGF0ZVJhZGlhbnMpO1xuICogICAgIC8vIGNvb3JkIGlzIG5vdyBbLTQ3Ljk4MzMzMywgNy44NV1cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBBbmdsZSBpbiByYWRpYW4uXG4gKiBAcmV0dXJuIHtDb29yZGluYXRlfSBDb29yZGluYXRlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlKGNvb3JkaW5hdGUsIGFuZ2xlKSB7XG4gICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoYW5nbGUpO1xuICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgeCA9IGNvb3JkaW5hdGVbMF0gKiBjb3NBbmdsZSAtIGNvb3JkaW5hdGVbMV0gKiBzaW5BbmdsZTtcbiAgICB2YXIgeSA9IGNvb3JkaW5hdGVbMV0gKiBjb3NBbmdsZSArIGNvb3JkaW5hdGVbMF0gKiBzaW5BbmdsZTtcbiAgICBjb29yZGluYXRlWzBdID0geDtcbiAgICBjb29yZGluYXRlWzFdID0geTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZTtcbn1cbi8qKlxuICogU2NhbGUgYGNvb3JkaW5hdGVgIGJ5IGBzY2FsZWAuIGBjb29yZGluYXRlYCBpcyBtb2RpZmllZCBpbiBwbGFjZSBhbmQgcmV0dXJuZWRcbiAqIGJ5IHRoZSBmdW5jdGlvbi5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgICBpbXBvcnQge3NjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZX0gZnJvbSAnb2wvY29vcmRpbmF0ZSc7XG4gKlxuICogICAgIHZhciBjb29yZCA9IFs3Ljg1LCA0Ny45ODMzMzNdO1xuICogICAgIHZhciBzY2FsZSA9IDEuMjtcbiAqICAgICBzY2FsZUNvb3JkaW5hdGUoY29vcmQsIHNjYWxlKTtcbiAqICAgICAvLyBjb29yZCBpcyBub3cgWzkuNDIsIDU3LjU3OTk5OTZdXG4gKlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2NhbGUgU2NhbGUgZmFjdG9yLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gQ29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGNvb3JkaW5hdGUsIHNjYWxlKSB7XG4gICAgY29vcmRpbmF0ZVswXSAqPSBzY2FsZTtcbiAgICBjb29yZGluYXRlWzFdICo9IHNjYWxlO1xuICAgIHJldHVybiBjb29yZGluYXRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDIgU2Vjb25kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNxdWFyZWQgZGlzdGFuY2UgYmV0d2VlbiBjb29yZDEgYW5kIGNvb3JkMi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxdWFyZWREaXN0YW5jZShjb29yZDEsIGNvb3JkMikge1xuICAgIHZhciBkeCA9IGNvb3JkMVswXSAtIGNvb3JkMlswXTtcbiAgICB2YXIgZHkgPSBjb29yZDFbMV0gLSBjb29yZDJbMV07XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xufVxuLyoqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkMSBGaXJzdCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtDb29yZGluYXRlfSBjb29yZDIgU2Vjb25kIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IERpc3RhbmNlIGJldHdlZW4gY29vcmQxIGFuZCBjb29yZDIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0YW5jZShjb29yZDEsIGNvb3JkMikge1xuICAgIHJldHVybiBNYXRoLnNxcnQoc3F1YXJlZERpc3RhbmNlKGNvb3JkMSwgY29vcmQyKSk7XG59XG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIGEgY29vcmRpbmF0ZSB0byBhIGxpbmUgc2VnbWVudC5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PENvb3JkaW5hdGU+fSBzZWdtZW50IExpbmUgc2VnbWVudCAoMlxuICogY29vcmRpbmF0ZXMpLlxuICogQHJldHVybiB7bnVtYmVyfSBTcXVhcmVkIGRpc3RhbmNlIGZyb20gdGhlIHBvaW50IHRvIHRoZSBsaW5lIHNlZ21lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcXVhcmVkRGlzdGFuY2VUb1NlZ21lbnQoY29vcmRpbmF0ZSwgc2VnbWVudCkge1xuICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2UoY29vcmRpbmF0ZSwgY2xvc2VzdE9uU2VnbWVudChjb29yZGluYXRlLCBzZWdtZW50KSk7XG59XG4vKipcbiAqIEZvcm1hdCBhIGdlb2dyYXBoaWMgY29vcmRpbmF0ZSB3aXRoIHRoZSBoZW1pc3BoZXJlLCBkZWdyZWVzLCBtaW51dGVzLCBhbmRcbiAqIHNlY29uZHMuXG4gKlxuICogRXhhbXBsZSB3aXRob3V0IHNwZWNpZnlpbmcgZnJhY3Rpb25hbCBkaWdpdHM6XG4gKlxuICogICAgIGltcG9ydCB7dG9TdHJpbmdIRE1TfSBmcm9tICdvbC9jb29yZGluYXRlJztcbiAqXG4gKiAgICAgdmFyIGNvb3JkID0gWzcuODUsIDQ3Ljk4MzMzM107XG4gKiAgICAgdmFyIG91dCA9IHRvU3RyaW5nSERNUyhjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNDfCsCA1OOKAsiA2MOKAsyBOIDfCsCA1MOKAsiA2MOKAsyBFJ1xuICpcbiAqIEV4YW1wbGUgZXhwbGljaXRseSBzcGVjaWZ5aW5nIDEgZnJhY3Rpb25hbCBkaWdpdDpcbiAqXG4gKiAgICAgaW1wb3J0IHt0b1N0cmluZ0hETVN9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdIRE1TKGNvb3JkLCAxKTtcbiAqICAgICAvLyBvdXQgaXMgbm93ICc0N8KwIDU44oCyIDYwLjDigLMgTiA3wrAgNTDigLIgNjAuMOKAsyBFJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gSGVtaXNwaGVyZSwgZGVncmVlcywgbWludXRlcyBhbmQgc2Vjb25kcy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3RyaW5nSERNUyhjb29yZGluYXRlLCBvcHRfZnJhY3Rpb25EaWdpdHMpIHtcbiAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gKGRlZ3JlZXNUb1N0cmluZ0hETVMoJ05TJywgY29vcmRpbmF0ZVsxXSwgb3B0X2ZyYWN0aW9uRGlnaXRzKSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgZGVncmVlc1RvU3RyaW5nSERNUygnRVcnLCBjb29yZGluYXRlWzBdLCBvcHRfZnJhY3Rpb25EaWdpdHMpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIEZvcm1hdCBhIGNvb3JkaW5hdGUgYXMgYSBjb21tYSBkZWxpbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGUgd2l0aG91dCBzcGVjaWZ5aW5nIGZyYWN0aW9uYWwgZGlnaXRzOlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnOCwgNDgnXG4gKlxuICogRXhhbXBsZSBleHBsaWNpdGx5IHNwZWNpZnlpbmcgMSBmcmFjdGlvbmFsIGRpZ2l0OlxuICpcbiAqICAgICBpbXBvcnQge3RvU3RyaW5nWFl9IGZyb20gJ29sL2Nvb3JkaW5hdGUnO1xuICpcbiAqICAgICB2YXIgY29vcmQgPSBbNy44NSwgNDcuOTgzMzMzXTtcbiAqICAgICB2YXIgb3V0ID0gdG9TdHJpbmdYWShjb29yZCwgMSk7XG4gKiAgICAgLy8gb3V0IGlzIG5vdyAnNy44LCA0OC4wJ1xuICpcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZnJhY3Rpb25EaWdpdHNdIFRoZSBudW1iZXIgb2YgZGlnaXRzIHRvIGluY2x1ZGVcbiAqICAgIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50LiBEZWZhdWx0IGlzIGAwYC5cbiAqIEByZXR1cm4ge3N0cmluZ30gWFkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZ1hZKGNvb3JkaW5hdGUsIG9wdF9mcmFjdGlvbkRpZ2l0cykge1xuICAgIHJldHVybiBmb3JtYXQoY29vcmRpbmF0ZSwgJ3t4fSwge3l9Jywgb3B0X2ZyYWN0aW9uRGlnaXRzKTtcbn1cbi8qKlxuICogTW9kaWZpZXMgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGUgaW4tcGxhY2UgdG8gYmUgd2l0aGluIHRoZSByZWFsIHdvcmxkXG4gKiBleHRlbnQuIFRoZSBsb3dlciBwcm9qZWN0aW9uIGV4dGVudCBib3VuZGFyeSBpcyBpbmNsdXNpdmUsIHRoZSB1cHBlciBvbmVcbiAqIGV4Y2x1c2l2ZS5cbiAqXG4gKiBAcGFyYW0ge0Nvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7Q29vcmRpbmF0ZX0gVGhlIGNvb3JkaW5hdGUgd2l0aGluIHRoZSByZWFsIHdvcmxkIGV4dGVudC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyYXBYKGNvb3JkaW5hdGUsIHByb2plY3Rpb24pIHtcbiAgICBpZiAocHJvamVjdGlvbi5jYW5XcmFwWCgpKSB7XG4gICAgICAgIHZhciB3b3JsZFdpZHRoID0gZ2V0V2lkdGgocHJvamVjdGlvbi5nZXRFeHRlbnQoKSk7XG4gICAgICAgIHZhciB3b3JsZHNBd2F5ID0gZ2V0V29ybGRzQXdheShjb29yZGluYXRlLCBwcm9qZWN0aW9uLCB3b3JsZFdpZHRoKTtcbiAgICAgICAgaWYgKHdvcmxkc0F3YXkpIHtcbiAgICAgICAgICAgIGNvb3JkaW5hdGVbMF0gLT0gd29ybGRzQXdheSAqIHdvcmxkV2lkdGg7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvb3JkaW5hdGU7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9zb3VyY2VFeHRlbnRXaWR0aF0gV2lkdGggb2YgdGhlIHNvdXJjZSBleHRlbnQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE9mZnNldCBpbiB3b3JsZCB3aWR0aHMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRXb3JsZHNBd2F5KGNvb3JkaW5hdGUsIHByb2plY3Rpb24sIG9wdF9zb3VyY2VFeHRlbnRXaWR0aCkge1xuICAgIHZhciBwcm9qZWN0aW9uRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgd29ybGRzQXdheSA9IDA7XG4gICAgaWYgKHByb2plY3Rpb24uY2FuV3JhcFgoKSAmJlxuICAgICAgICAoY29vcmRpbmF0ZVswXSA8IHByb2plY3Rpb25FeHRlbnRbMF0gfHwgY29vcmRpbmF0ZVswXSA+IHByb2plY3Rpb25FeHRlbnRbMl0pKSB7XG4gICAgICAgIHZhciBzb3VyY2VFeHRlbnRXaWR0aCA9IG9wdF9zb3VyY2VFeHRlbnRXaWR0aCB8fCBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgd29ybGRzQXdheSA9IE1hdGguZmxvb3IoKGNvb3JkaW5hdGVbMF0gLSBwcm9qZWN0aW9uRXh0ZW50WzBdKSAvIHNvdXJjZUV4dGVudFdpZHRoKTtcbiAgICB9XG4gICAgcmV0dXJuIHdvcmxkc0F3YXk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb29yZGluYXRlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jZW50ZXJjb25zdHJhaW50XG4gKi9cbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWQpLCBudW1iZXIsIGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplLCBib29sZWFuPSwgQXJyYXk8bnVtYmVyPj0pOiAoaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkKX0gVHlwZVxuICovXG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBvbmx5Q2VudGVyIElmIHRydWUsIHRoZSBjb25zdHJhaW50IHdpbGwgb25seSBhcHBseSB0byB0aGUgdmlldyBjZW50ZXIuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNtb290aCBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gZ28gc2xpZ2h0bHkgb3V0IG9mIHRoZSBnaXZlbiBleHRlbnRcbiAqIChvbmx5IGR1cmluZyBpbnRlcmFjdGlvbiBhbmQgYW5pbWF0aW9uKS5cbiAqIEByZXR1cm4ge1R5cGV9IFRoZSBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRXh0ZW50KGV4dGVudCwgb25seUNlbnRlciwgc21vb3RoKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gY2VudGVyIENlbnRlci5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZTsgdW51c2VkIGlmIGBvbmx5Q2VudGVyYCB3YXMgc3BlY2lmaWVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2NlbnRlclNoaWZ0XSBTaGlmdCBiZXR3ZWVuIG1hcCBjZW50ZXIgYW5kIHZpZXdwb3J0IGNlbnRlci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoY2VudGVyLCByZXNvbHV0aW9uLCBzaXplLCBvcHRfaXNNb3ZpbmcsIG9wdF9jZW50ZXJTaGlmdCkge1xuICAgICAgICBpZiAoY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgdmlld1dpZHRoID0gb25seUNlbnRlciA/IDAgOiBzaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB2aWV3SGVpZ2h0ID0gb25seUNlbnRlciA/IDAgOiBzaXplWzFdICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciBzaGlmdFggPSBvcHRfY2VudGVyU2hpZnQgPyBvcHRfY2VudGVyU2hpZnRbMF0gOiAwO1xuICAgICAgICAgICAgdmFyIHNoaWZ0WSA9IG9wdF9jZW50ZXJTaGlmdCA/IG9wdF9jZW50ZXJTaGlmdFsxXSA6IDA7XG4gICAgICAgICAgICB2YXIgbWluWCA9IGV4dGVudFswXSArIHZpZXdXaWR0aCAvIDIgKyBzaGlmdFg7XG4gICAgICAgICAgICB2YXIgbWF4WCA9IGV4dGVudFsyXSAtIHZpZXdXaWR0aCAvIDIgKyBzaGlmdFg7XG4gICAgICAgICAgICB2YXIgbWluWSA9IGV4dGVudFsxXSArIHZpZXdIZWlnaHQgLyAyICsgc2hpZnRZO1xuICAgICAgICAgICAgdmFyIG1heFkgPSBleHRlbnRbM10gLSB2aWV3SGVpZ2h0IC8gMiArIHNoaWZ0WTtcbiAgICAgICAgICAgIC8vIG5vdGU6IHdoZW4gem9vbWluZyBvdXQgb2YgYm91bmRzLCBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHggYW5kIHkgbWF5XG4gICAgICAgICAgICAvLyBlbmQgdXAgaW52ZXJ0ZWQgKG1pbiA+IG1heCk7IHRoaXMgaGFzIHRvIGJlIGFjY291bnRlZCBmb3JcbiAgICAgICAgICAgIGlmIChtaW5YID4gbWF4WCkge1xuICAgICAgICAgICAgICAgIG1pblggPSAobWF4WCArIG1pblgpIC8gMjtcbiAgICAgICAgICAgICAgICBtYXhYID0gbWluWDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW5ZID4gbWF4WSkge1xuICAgICAgICAgICAgICAgIG1pblkgPSAobWF4WSArIG1pblkpIC8gMjtcbiAgICAgICAgICAgICAgICBtYXhZID0gbWluWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB4ID0gY2xhbXAoY2VudGVyWzBdLCBtaW5YLCBtYXhYKTtcbiAgICAgICAgICAgIHZhciB5ID0gY2xhbXAoY2VudGVyWzFdLCBtaW5ZLCBtYXhZKTtcbiAgICAgICAgICAgIHZhciByYXRpbyA9IDMwICogcmVzb2x1dGlvbjtcbiAgICAgICAgICAgIC8vIGR1cmluZyBhbiBpbnRlcmFjdGlvbiwgYWxsb3cgc29tZSBvdmVyc2Nyb2xsXG4gICAgICAgICAgICBpZiAob3B0X2lzTW92aW5nICYmIHNtb290aCkge1xuICAgICAgICAgICAgICAgIHggKz1cbiAgICAgICAgICAgICAgICAgICAgLXJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIG1pblggLSBjZW50ZXJbMF0pIC8gcmF0aW8pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclswXSAtIG1heFgpIC8gcmF0aW8pO1xuICAgICAgICAgICAgICAgIHkgKz1cbiAgICAgICAgICAgICAgICAgICAgLXJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIG1pblkgLSBjZW50ZXJbMV0pIC8gcmF0aW8pICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhdGlvICogTWF0aC5sb2coMSArIE1hdGgubWF4KDAsIGNlbnRlclsxXSAtIG1heFkpIC8gcmF0aW8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFt4LCB5XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2NlbnRlcl0gQ2VudGVyLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBDZW50ZXIuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub25lKGNlbnRlcikge1xuICAgIHJldHVybiBjZW50ZXI7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jZW50ZXJjb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXNvbHV0aW9uY29uc3RyYWludFxuICovXG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBnZXRIZWlnaHQsIGdldFdpZHRoIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgbGluZWFyRmluZE5lYXJlc3QgfSBmcm9tICcuL2FycmF5LmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKChudW1iZXJ8dW5kZWZpbmVkKSwgbnVtYmVyLCBpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZSwgYm9vbGVhbj0pOiAobnVtYmVyfHVuZGVmaW5lZCl9IFR5cGVcbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgbW9kaWZpZWQgcmVzb2x1dGlvbiB0YWtpbmcgaW50byBhY2NvdW50IHRoZSB2aWV3cG9ydCBzaXplIGFuZCBtYXhpbXVtXG4gKiBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb25cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBtYXhFeHRlbnQgTWF4aW11bSBhbGxvd2VkIGV4dGVudC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHZpZXdwb3J0U2l6ZSBWaWV3cG9ydCBzaXplLlxuICogQHBhcmFtIHtib29sZWFufSBzaG93RnVsbEV4dGVudCBXaGV0aGVyIHRvIHNob3cgdGhlIGZ1bGwgZXh0ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBDYXBwZWQgcmVzb2x1dGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBtYXhFeHRlbnQsIHZpZXdwb3J0U2l6ZSwgc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICB2YXIgeFJlc29sdXRpb24gPSBnZXRXaWR0aChtYXhFeHRlbnQpIC8gdmlld3BvcnRTaXplWzBdO1xuICAgIHZhciB5UmVzb2x1dGlvbiA9IGdldEhlaWdodChtYXhFeHRlbnQpIC8gdmlld3BvcnRTaXplWzFdO1xuICAgIGlmIChzaG93RnVsbEV4dGVudCkge1xuICAgICAgICByZXR1cm4gTWF0aC5taW4ocmVzb2x1dGlvbiwgTWF0aC5tYXgoeFJlc29sdXRpb24sIHlSZXNvbHV0aW9uKSk7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1pbihyZXNvbHV0aW9uLCBNYXRoLm1pbih4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pKTtcbn1cbi8qKlxuICogUmV0dXJucyBhIG1vZGlmaWVkIHJlc29sdXRpb24gdG8gYmUgYmV0d2VlbiBtYXhSZXNvbHV0aW9uIGFuZCBtaW5SZXNvbHV0aW9uIHdoaWxlXG4gKiBzdGlsbCBhbGxvd2luZyB0aGUgdmFsdWUgdG8gYmUgc2xpZ2h0bHkgb3V0IG9mIGJvdW5kcy5cbiAqIE5vdGU6IHRoZSBjb21wdXRhdGlvbiBpcyBiYXNlZCBvbiB0aGUgbG9nYXJpdGhtIGZ1bmN0aW9uIChsbik6XG4gKiAgLSBhdCAxLCBsbih4KSBpcyAwXG4gKiAgLSBhYm92ZSAxLCBsbih4KSBrZWVwcyBpbmNyZWFzaW5nIGJ1dCBhdCBhIG11Y2ggc2xvd2VyIHBhY2UgdGhhbiB4XG4gKiBUaGUgZmluYWwgcmVzdWx0IGlzIGNsYW1wZWQgdG8gcHJldmVudCBnZXR0aW5nIHRvbyBmYXIgYXdheSBmcm9tIGJvdW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXggcmVzb2x1dGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtaW5SZXNvbHV0aW9uIE1pbiByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBTbW9vdGhlZCByZXNvbHV0aW9uLlxuICovXG5mdW5jdGlvbiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uKSB7XG4gICAgdmFyIHJlc3VsdCA9IE1hdGgubWluKHJlc29sdXRpb24sIG1heFJlc29sdXRpb24pO1xuICAgIHZhciByYXRpbyA9IDUwO1xuICAgIHJlc3VsdCAqPVxuICAgICAgICBNYXRoLmxvZygxICsgcmF0aW8gKiBNYXRoLm1heCgwLCByZXNvbHV0aW9uIC8gbWF4UmVzb2x1dGlvbiAtIDEpKSAvIHJhdGlvICtcbiAgICAgICAgICAgIDE7XG4gICAgaWYgKG1pblJlc29sdXRpb24pIHtcbiAgICAgICAgcmVzdWx0ID0gTWF0aC5tYXgocmVzdWx0LCBtaW5SZXNvbHV0aW9uKTtcbiAgICAgICAgcmVzdWx0IC89XG4gICAgICAgICAgICBNYXRoLmxvZygxICsgcmF0aW8gKiBNYXRoLm1heCgwLCBtaW5SZXNvbHV0aW9uIC8gcmVzb2x1dGlvbiAtIDEpKSAvXG4gICAgICAgICAgICAgICAgcmF0aW8gK1xuICAgICAgICAgICAgICAgIDE7XG4gICAgfVxuICAgIHJldHVybiBjbGFtcChyZXN1bHQsIG1pblJlc29sdXRpb24gLyAyLCBtYXhSZXNvbHV0aW9uICogMik7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gcmVzb2x1dGlvbnMgUmVzb2x1dGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc21vb3RoXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gc2xpZ2h0bHkgZXhjZWVkIHJlc29sdXRpb24gbGltaXRzLiBEZWZhdWx0OiB0cnVlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zKHJlc29sdXRpb25zLCBvcHRfc21vb3RoLCBvcHRfbWF4RXh0ZW50LCBvcHRfc2hvd0Z1bGxFeHRlbnQpIHtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gRGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgVmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfaXNNb3ZpbmddIFRydWUgaWYgYW4gaW50ZXJhY3Rpb24gb3IgYW5pbWF0aW9uIGlzIGluIHByb2dyZXNzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSwgb3B0X2lzTW92aW5nKSB7XG4gICAgICAgIGlmIChyZXNvbHV0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBtYXhSZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbMF07XG4gICAgICAgICAgICB2YXIgbWluUmVzb2x1dGlvbiA9IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgdmFyIGNhcHBlZE1heFJlcyA9IG9wdF9tYXhFeHRlbnRcbiAgICAgICAgICAgICAgICA/IGdldFZpZXdwb3J0Q2xhbXBlZFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgb3B0X21heEV4dGVudCwgc2l6ZSwgb3B0X3Nob3dGdWxsRXh0ZW50KVxuICAgICAgICAgICAgICAgIDogbWF4UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIC8vIGR1cmluZyBpbnRlcmFjdGluZyBvciBhbmltYXRpbmcsIGFsbG93IGludGVybWVkaWFyeSB2YWx1ZXNcbiAgICAgICAgICAgIGlmIChvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgICAgICAgICB2YXIgc21vb3RoID0gb3B0X3Ntb290aCAhPT0gdW5kZWZpbmVkID8gb3B0X3Ntb290aCA6IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFzbW9vdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKHJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRTbW9vdGhDbGFtcGVkUmVzb2x1dGlvbihyZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMsIG1pblJlc29sdXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNhcHBlZCA9IE1hdGgubWluKGNhcHBlZE1heFJlcywgcmVzb2x1dGlvbik7XG4gICAgICAgICAgICB2YXIgeiA9IE1hdGguZmxvb3IobGluZWFyRmluZE5lYXJlc3QocmVzb2x1dGlvbnMsIGNhcHBlZCwgZGlyZWN0aW9uKSk7XG4gICAgICAgICAgICBpZiAocmVzb2x1dGlvbnNbel0gPiBjYXBwZWRNYXhSZXMgJiYgeiA8IHJlc29sdXRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x1dGlvbnNbeiArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdXRpb25zW3pdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcG93ZXIgUG93ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4UmVzb2x1dGlvbiBNYXhpbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9taW5SZXNvbHV0aW9uXSBNaW5pbXVtIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc21vb3RoXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gc2xpZ2h0bHkgZXhjZWVkIHJlc29sdXRpb24gbGltaXRzLiBEZWZhdWx0OiB0cnVlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNuYXBUb1Bvd2VyKHBvd2VyLCBtYXhSZXNvbHV0aW9uLCBvcHRfbWluUmVzb2x1dGlvbiwgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgY2FwcGVkTWF4UmVzID0gb3B0X21heEV4dGVudFxuICAgICAgICAgICAgICAgID8gZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBvcHRfbWF4RXh0ZW50LCBzaXplLCBvcHRfc2hvd0Z1bGxFeHRlbnQpXG4gICAgICAgICAgICAgICAgOiBtYXhSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSBvcHRfbWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X21pblJlc29sdXRpb24gOiAwO1xuICAgICAgICAgICAgLy8gZHVyaW5nIGludGVyYWN0aW5nIG9yIGFuaW1hdGluZywgYWxsb3cgaW50ZXJtZWRpYXJ5IHZhbHVlc1xuICAgICAgICAgICAgaWYgKG9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgICAgIHZhciBzbW9vdGggPSBvcHRfc21vb3RoICE9PSB1bmRlZmluZWQgPyBvcHRfc21vb3RoIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXNtb290aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2xhbXAocmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgY2FwcGVkTWF4UmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIGNhcHBlZE1heFJlcywgbWluUmVzb2x1dGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdG9sZXJhbmNlID0gMWUtOTtcbiAgICAgICAgICAgIHZhciBtaW5ab29tTGV2ZWwgPSBNYXRoLmNlaWwoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIGNhcHBlZE1heFJlcykgLyBNYXRoLmxvZyhwb3dlcikgLSB0b2xlcmFuY2UpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IC1kaXJlY3Rpb24gKiAoMC41IC0gdG9sZXJhbmNlKSArIDAuNTtcbiAgICAgICAgICAgIHZhciBjYXBwZWQgPSBNYXRoLm1pbihjYXBwZWRNYXhSZXMsIHJlc29sdXRpb24pO1xuICAgICAgICAgICAgdmFyIGNhcHBlZFpvb21MZXZlbCA9IE1hdGguZmxvb3IoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIGNhcHBlZCkgLyBNYXRoLmxvZyhwb3dlcikgKyBvZmZzZXQpO1xuICAgICAgICAgICAgdmFyIHpvb21MZXZlbCA9IE1hdGgubWF4KG1pblpvb21MZXZlbCwgY2FwcGVkWm9vbUxldmVsKTtcbiAgICAgICAgICAgIHZhciBuZXdSZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHBvd2VyLCB6b29tTGV2ZWwpO1xuICAgICAgICAgICAgcmV0dXJuIGNsYW1wKG5ld1Jlc29sdXRpb24sIG1pblJlc29sdXRpb24sIGNhcHBlZE1heFJlcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSZXNvbHV0aW9uIE1heCByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblJlc29sdXRpb24gTWluIHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfc21vb3RoXSBJZiB0cnVlLCB0aGUgdmlldyB3aWxsIGJlIGFibGUgdG8gc2xpZ2h0bHkgZXhjZWVkIHJlc29sdXRpb24gbGltaXRzLiBEZWZhdWx0OiB0cnVlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfbWF4RXh0ZW50XSBNYXhpbXVtIGFsbG93ZWQgZXh0ZW50LlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3Nob3dGdWxsRXh0ZW50XSBJZiB0cnVlLCBhbGxvd3MgdXMgdG8gc2hvdyB0aGUgZnVsbCBleHRlbnQuIERlZmF1bHQ6IGZhbHNlLlxuICogQHJldHVybiB7VHlwZX0gWm9vbSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1pbk1heFJlc29sdXRpb24obWF4UmVzb2x1dGlvbiwgbWluUmVzb2x1dGlvbiwgb3B0X3Ntb290aCwgb3B0X21heEV4dGVudCwgb3B0X3Nob3dGdWxsRXh0ZW50KSB7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGlyZWN0aW9uIERpcmVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIFZpZXdwb3J0IHNpemUuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBkaXJlY3Rpb24sIHNpemUsIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgY2FwcGVkTWF4UmVzID0gb3B0X21heEV4dGVudFxuICAgICAgICAgICAgICAgID8gZ2V0Vmlld3BvcnRDbGFtcGVkUmVzb2x1dGlvbihtYXhSZXNvbHV0aW9uLCBvcHRfbWF4RXh0ZW50LCBzaXplLCBvcHRfc2hvd0Z1bGxFeHRlbnQpXG4gICAgICAgICAgICAgICAgOiBtYXhSZXNvbHV0aW9uO1xuICAgICAgICAgICAgdmFyIHNtb290aCA9IG9wdF9zbW9vdGggIT09IHVuZGVmaW5lZCA/IG9wdF9zbW9vdGggOiB0cnVlO1xuICAgICAgICAgICAgaWYgKCFzbW9vdGggfHwgIW9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbGFtcChyZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBjYXBwZWRNYXhSZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGdldFNtb290aENsYW1wZWRSZXNvbHV0aW9uKHJlc29sdXRpb24sIGNhcHBlZE1heFJlcywgbWluUmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXNvbHV0aW9uY29uc3RyYWludC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcm90YXRpb25jb25zdHJhaW50XG4gKi9cbmltcG9ydCB7IHRvUmFkaWFucyB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbigobnVtYmVyfHVuZGVmaW5lZCksIGJvb2xlYW49KTogKG51bWJlcnx1bmRlZmluZWQpfSBUeXBlXG4gKi9cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFJvdGF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzYWJsZShyb3RhdGlvbikge1xuICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vbmUocm90YXRpb24pIHtcbiAgICBpZiAocm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IG4gTi5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9OKG4pIHtcbiAgICB2YXIgdGhldGEgPSAoMiAqIE1hdGguUEkpIC8gbjtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2lzTW92aW5nXSBUcnVlIGlmIGFuIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBpbiBwcm9ncmVzcy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBSb3RhdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAocm90YXRpb24sIG9wdF9pc01vdmluZykge1xuICAgICAgICBpZiAob3B0X2lzTW92aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJvdGF0aW9uID0gTWF0aC5mbG9vcihyb3RhdGlvbiAvIHRoZXRhICsgMC41KSAqIHRoZXRhO1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF90b2xlcmFuY2VdIFRvbGVyYW5jZS5cbiAqIEByZXR1cm4ge1R5cGV9IFJvdGF0aW9uIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTbmFwVG9aZXJvKG9wdF90b2xlcmFuY2UpIHtcbiAgICB2YXIgdG9sZXJhbmNlID0gb3B0X3RvbGVyYW5jZSB8fCB0b1JhZGlhbnMoNSk7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJvdGF0aW9uIFJvdGF0aW9uLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9pc01vdmluZ10gVHJ1ZSBpZiBhbiBpbnRlcmFjdGlvbiBvciBhbmltYXRpb24gaXMgaW4gcHJvZ3Jlc3MuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gUm90YXRpb24uXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHJvdGF0aW9uLCBvcHRfaXNNb3ZpbmcpIHtcbiAgICAgICAgaWYgKG9wdF9pc01vdmluZykge1xuICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMocm90YXRpb24pIDw9IHRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvdGF0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cm90YXRpb25jb25zdHJhaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9lYXNpbmdcbiAqL1xuLyoqXG4gKiBTdGFydCBzbG93IGFuZCBzcGVlZCB1cC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0IElucHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEByZXR1cm4ge251bWJlcn0gT3V0cHV0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVhc2VJbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucG93KHQsIDMpO1xufVxuLyoqXG4gKiBTdGFydCBmYXN0IGFuZCBzbG93IGRvd24uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlYXNlT3V0KHQpIHtcbiAgICByZXR1cm4gMSAtIGVhc2VJbigxIC0gdCk7XG59XG4vKipcbiAqIFN0YXJ0IHNsb3csIHNwZWVkIHVwLCBhbmQgdGhlbiBzbG93IGRvd24gYWdhaW4uXG4gKiBAcGFyYW0ge251bWJlcn0gdCBJbnB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE91dHB1dCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbkFuZE91dCh0KSB7XG4gICAgcmV0dXJuIDMgKiB0ICogdCAtIDIgKiB0ICogdCAqIHQ7XG59XG4vKipcbiAqIE1haW50YWluIGEgY29uc3RhbnQgc3BlZWQgb3ZlciB0aW1lLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyKHQpIHtcbiAgICByZXR1cm4gdDtcbn1cbi8qKlxuICogU3RhcnQgc2xvdywgc3BlZWQgdXAsIGFuZCBhdCB0aGUgdmVyeSBlbmQgc2xvdyBkb3duIGFnYWluLiAgVGhpcyBoYXMgdGhlXG4gKiBzYW1lIGdlbmVyYWwgYmVoYXZpb3IgYXMge0BsaW5rIG1vZHVsZTpvbC9lYXNpbmcuaW5BbmRPdXR9LCBidXQgdGhlIGZpbmFsXG4gKiBzbG93ZG93biBpcyBkZWxheWVkLlxuICogQHBhcmFtIHtudW1iZXJ9IHQgSW5wdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHJldHVybiB7bnVtYmVyfSBPdXRwdXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBBbmREb3duKHQpIHtcbiAgICBpZiAodCA8IDAuNSkge1xuICAgICAgICByZXR1cm4gaW5BbmRPdXQoMiAqIHQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDEgLSBpbkFuZE91dCgyICogKHQgLSAwLjUpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lYXNpbmcuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlMYXlvdXRcbiAqL1xuLyoqXG4gKiBUaGUgY29vcmRpbmF0ZSBsYXlvdXQgZm9yIGdlb21ldHJpZXMsIGluZGljYXRpbmcgd2hldGhlciBhIDNyZCBvciA0dGggeiAoJ1onKVxuICogb3IgbWVhc3VyZSAoJ00nKSBjb29yZGluYXRlIGlzIGF2YWlsYWJsZS4gU3VwcG9ydGVkIHZhbHVlcyBhcmUgYCdYWSdgLFxuICogYCdYWVonYCwgYCdYWU0nYCwgYCdYWVpNJ2AuXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgWFk6ICdYWScsXG4gICAgWFlaOiAnWFlaJyxcbiAgICBYWU06ICdYWU0nLFxuICAgIFhZWk06ICdYWVpNJyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9tZXRyeUxheW91dC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vR2VvbWV0cnlcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBjb21wb3NlIGFzIGNvbXBvc2VUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi4vdHJhbnNmb3JtLmpzJztcbmltcG9ydCB7IGNyZWF0ZUVtcHR5LCBjcmVhdGVPclVwZGF0ZUVtcHR5LCBnZXRIZWlnaHQsIHJldHVybk9yVXBkYXRlLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiwgZ2V0VHJhbnNmb3JtIH0gZnJvbSAnLi4vcHJvai5qcyc7XG5pbXBvcnQgeyBtZW1vaXplT25lIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IHRyYW5zZm9ybTJEIH0gZnJvbSAnLi9mbGF0L3RyYW5zZm9ybS5qcyc7XG4vKipcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfVxuICovXG52YXIgdG1wVHJhbnNmb3JtID0gY3JlYXRlVHJhbnNmb3JtKCk7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHZlY3RvciBnZW9tZXRyaWVzLlxuICpcbiAqIFRvIGdldCBub3RpZmllZCBvZiBjaGFuZ2VzIHRvIHRoZSBnZW9tZXRyeSwgcmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgdGhlXG4gKiBnZW5lcmljIGBjaGFuZ2VgIGV2ZW50IG9uIHlvdXIgZ2VvbWV0cnkgaW5zdGFuY2UuXG4gKlxuICogQGFic3RyYWN0XG4gKiBAYXBpXG4gKi9cbnZhciBHZW9tZXRyeSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbWV0cnksIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR2VvbWV0cnkoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudF8gPSBjcmVhdGVFbXB0eSgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmV4dGVudFJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSB0cmFuc2Zvcm1lZCBhbmQgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgICAgICogQGFic3RyYWN0XG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXZpc2lvbiBUaGUgZ2VvbWV0cnkgcmV2aXNpb24uXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IFtvcHRfdHJhbnNmb3JtXSBPcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24uXG4gICAgICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsID0gbWVtb2l6ZU9uZShmdW5jdGlvbiAocmV2aXNpb24sIHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGlmICghb3B0X3RyYW5zZm9ybSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjbG9uZSA9IHRoaXMuY2xvbmUoKTtcbiAgICAgICAgICAgIGNsb25lLmFwcGx5VHJhbnNmb3JtKG9wdF90cmFuc2Zvcm0pO1xuICAgICAgICAgICAgcmV0dXJuIGNsb25lLmdldFNpbXBsaWZpZWRHZW9tZXRyeShzcXVhcmVkVG9sZXJhbmNlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IGEgdHJhbnNmb3JtZWQgYW5kIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlRyYW5zZm9ybUZ1bmN0aW9ufSBbb3B0X3RyYW5zZm9ybV0gT3B0aW9uYWwgdHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIEByZXR1cm4ge0dlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5zaW1wbGlmeVRyYW5zZm9ybWVkID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UsIG9wdF90cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxpZnlUcmFuc2Zvcm1lZEludGVybmFsKHRoaXMuZ2V0UmV2aXNpb24oKSwgc3F1YXJlZFRvbGVyYW5jZSwgb3B0X3RyYW5zZm9ybSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7IUdlb21ldHJ5fSBDbG9uZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMgKHgsIHkpLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgdmFyIGNvb3JkID0gdGhpcy5nZXRDbG9zZXN0UG9pbnQoW3gsIHldKTtcbiAgICAgICAgcmV0dXJuIGNvb3JkWzBdID09PSB4ICYmIGNvb3JkWzFdID09PSB5O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjbG9zZXN0IHBvaW50IG9mIHRoZSBnZW9tZXRyeSB0byB0aGUgcGFzc2VkIHBvaW50IGFzXG4gICAgICoge0BsaW5rIG1vZHVsZTpvbC9jb29yZGluYXRlfkNvb3JkaW5hdGUgY29vcmRpbmF0ZX0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHBvaW50IFBvaW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2Nsb3Nlc3RQb2ludF0gQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRDbG9zZXN0UG9pbnQgPSBmdW5jdGlvbiAocG9pbnQsIG9wdF9jbG9zZXN0UG9pbnQpIHtcbiAgICAgICAgdmFyIGNsb3Nlc3RQb2ludCA9IG9wdF9jbG9zZXN0UG9pbnQgPyBvcHRfY2xvc2VzdFBvaW50IDogW05hTiwgTmFOXTtcbiAgICAgICAgdGhpcy5jbG9zZXN0UG9pbnRYWShwb2ludFswXSwgcG9pbnRbMV0sIGNsb3Nlc3RQb2ludCwgSW5maW5pdHkpO1xuICAgICAgICByZXR1cm4gY2xvc2VzdFBvaW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZ2VvbWV0cnkgaW5jbHVkZXMgdGhlIHNwZWNpZmllZCBjb29yZGluYXRlLiBJZiB0aGVcbiAgICAgKiBjb29yZGluYXRlIGlzIG9uIHRoZSBib3VuZGFyeSBvZiB0aGUgZ2VvbWV0cnksIHJldHVybnMgZmFsc2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJzZWN0c0Nvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluc1hZKGNvb3JkaW5hdGVbMF0sIGNvb3JkaW5hdGVbMV0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfZXh0ZW50XSBFeHRlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmdldEV4dGVudCA9IGZ1bmN0aW9uIChvcHRfZXh0ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLmV4dGVudFJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSB0aGlzLmNvbXB1dGVFeHRlbnQodGhpcy5leHRlbnRfKTtcbiAgICAgICAgICAgIGlmIChpc05hTihleHRlbnRbMF0pIHx8IGlzTmFOKGV4dGVudFsxXSkpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVPclVwZGF0ZUVtcHR5KGV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmV4dGVudFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0dXJuT3JVcGRhdGUodGhpcy5leHRlbnRfLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGUgZ2VvbWV0cnkgYXJvdW5kIGEgZ2l2ZW4gY29vcmRpbmF0ZS4gVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnlcbiAgICAgKiBjb29yZGluYXRlcyBpbiBwbGFjZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgUm90YXRpb24gYW5nbGUgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYW5jaG9yIFRoZSByb3RhdGlvbiBjZW50ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5yb3RhdGUgPSBmdW5jdGlvbiAoYW5nbGUsIGFuY2hvcikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2NhbGUgdGhlIGdlb21ldHJ5ICh3aXRoIGFuIG9wdGlvbmFsIG9yaWdpbikuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzeCBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3N5XSBUaGUgc2NhbGluZyBmYWN0b3IgaW4gdGhlIHktZGlyZWN0aW9uIChkZWZhdWx0cyB0byBzeCkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgc2NhbGUgb3JpZ2luIChkZWZhdWx0cyB0byB0aGUgY2VudGVyXG4gICAgICogICAgIG9mIHRoZSBnZW9tZXRyeSBleHRlbnQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2NhbGUgPSBmdW5jdGlvbiAoc3gsIG9wdF9zeSwgb3B0X2FuY2hvcikge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkuICBGb3IgbGluZXN0cmluZ3MsIHRoaXMgdXNlc1xuICAgICAqIHRoZSBbRG91Z2xhcyBQZXVja2VyXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9SYW1lci1Eb3VnbGFzLVBldWNrZXJfYWxnb3JpdGhtKVxuICAgICAqIGFsZ29yaXRobS4gIEZvciBwb2x5Z29ucywgYSBxdWFudGl6YXRpb24tYmFzZWRcbiAgICAgKiBzaW1wbGlmaWNhdGlvbiBpcyB1c2VkIHRvIHByZXNlcnZlIHRvcG9sb2d5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVGhlIHRvbGVyYW5jZSBkaXN0YW5jZSBmb3Igc2ltcGxpZmljYXRpb24uXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IEEgbmV3LCBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIG9yaWdpbmFsIGdlb21ldHJ5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuc2ltcGxpZnkgPSBmdW5jdGlvbiAodG9sZXJhbmNlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeSh0b2xlcmFuY2UgKiB0b2xlcmFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgc2ltcGxpZmllZCB2ZXJzaW9uIG9mIHRoaXMgZ2VvbWV0cnkgdXNpbmcgdGhlIERvdWdsYXMgUGV1Y2tlclxuICAgICAqIGFsZ29yaXRobS5cbiAgICAgKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUmFtZXItRG91Z2xhcy1QZXVja2VyX2FsZ29yaXRobS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5ID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogVGhlIGdlb21ldHJ5IGlzIG1vZGlmaWVkIGluIHBsYWNlLlxuICAgICAqIElmIHlvdSBkbyBub3Qgd2FudCB0aGUgZ2VvbWV0cnkgbW9kaWZpZWQgaW4gcGxhY2UsIGZpcnN0IGBjbG9uZSgpYCBpdCBhbmRcbiAgICAgKiB0aGVuIHVzZSB0aGlzIGZ1bmN0aW9uIG9uIHRoZSBjbG9uZS5cbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259IHRyYW5zZm9ybUZuIFRyYW5zZm9ybSBmdW5jdGlvbi5cbiAgICAgKiBDYWxsZWQgd2l0aCBhIGZsYXQgYXJyYXkgb2YgZ2VvbWV0cnkgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5VHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKi9cbiAgICBHZW9tZXRyeS5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgdGhlIGdlb21ldHJ5LiAgVGhpcyBtb2RpZmllcyB0aGUgZ2VvbWV0cnkgY29vcmRpbmF0ZXMgaW4gcGxhY2UuICBJZlxuICAgICAqIGluc3RlYWQgeW91IHdhbnQgYSBuZXcgZ2VvbWV0cnksIGZpcnN0IGBjbG9uZSgpYCB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVggRGVsdGEgWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGFZIERlbHRhIFkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiAoZGVsdGFYLCBkZWx0YVkpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBlYWNoIGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5IGZyb20gb25lIGNvb3JkaW5hdGUgcmVmZXJlbmNlXG4gICAgICogc3lzdGVtIHRvIGFub3RoZXIuIFRoZSBnZW9tZXRyeSBpcyBtb2RpZmllZCBpbiBwbGFjZS5cbiAgICAgKiBGb3IgZXhhbXBsZSwgYSBsaW5lIHdpbGwgYmUgdHJhbnNmb3JtZWQgdG8gYSBsaW5lIGFuZCBhIGNpcmNsZSB0byBhIGNpcmNsZS5cbiAgICAgKiBJZiB5b3UgZG8gbm90IHdhbnQgdGhlIGdlb21ldHJ5IG1vZGlmaWVkIGluIHBsYWNlLCBmaXJzdCBgY2xvbmUoKWAgaXQgYW5kXG4gICAgICogdGhlbiB1c2UgdGhpcyBmdW5jdGlvbiBvbiB0aGUgY2xvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHNvdXJjZSBUaGUgY3VycmVudCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBkZXN0aW5hdGlvbiBUaGUgZGVzaXJlZCBwcm9qZWN0aW9uLiAgQ2FuIGJlIGFcbiAgICAgKiAgICAgc3RyaW5nIGlkZW50aWZpZXIgb3IgYSB7QGxpbmsgbW9kdWxlOm9sL3Byb2ovUHJvamVjdGlvbn5Qcm9qZWN0aW9ufSBvYmplY3QuXG4gICAgICogQHJldHVybiB7R2VvbWV0cnl9IFRoaXMgZ2VvbWV0cnkuICBOb3RlIHRoYXQgb3JpZ2luYWwgZ2VvbWV0cnkgaXNcbiAgICAgKiAgICAgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb21ldHJ5LnByb3RvdHlwZS50cmFuc2Zvcm0gPSBmdW5jdGlvbiAoc291cmNlLCBkZXN0aW5hdGlvbikge1xuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSAqL1xuICAgICAgICB2YXIgc291cmNlUHJvaiA9IGdldFByb2plY3Rpb24oc291cmNlKTtcbiAgICAgICAgdmFyIHRyYW5zZm9ybUZuID0gc291cmNlUHJvai5nZXRVbml0cygpID09IFVuaXRzLlRJTEVfUElYRUxTXG4gICAgICAgICAgICA/IGZ1bmN0aW9uIChpbkNvb3JkaW5hdGVzLCBvdXRDb29yZGluYXRlcywgc3RyaWRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBpeGVsRXh0ZW50ID0gc291cmNlUHJvai5nZXRFeHRlbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvamVjdGVkRXh0ZW50ID0gc291cmNlUHJvai5nZXRXb3JsZEV4dGVudCgpO1xuICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IGdldEhlaWdodChwcm9qZWN0ZWRFeHRlbnQpIC8gZ2V0SGVpZ2h0KHBpeGVsRXh0ZW50KTtcbiAgICAgICAgICAgICAgICBjb21wb3NlVHJhbnNmb3JtKHRtcFRyYW5zZm9ybSwgcHJvamVjdGVkRXh0ZW50WzBdLCBwcm9qZWN0ZWRFeHRlbnRbM10sIHNjYWxlLCAtc2NhbGUsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTJEKGluQ29vcmRpbmF0ZXMsIDAsIGluQ29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIHRtcFRyYW5zZm9ybSwgb3V0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pKGluQ29vcmRpbmF0ZXMsIG91dENvb3JkaW5hdGVzLCBzdHJpZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiBnZXRUcmFuc2Zvcm0oc291cmNlUHJvaiwgZGVzdGluYXRpb24pO1xuICAgICAgICB0aGlzLmFwcGx5VHJhbnNmb3JtKHRyYW5zZm9ybUZuKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gR2VvbWV0cnk7XG59KEJhc2VPYmplY3QpKTtcbmV4cG9ydCBkZWZhdWx0IEdlb21ldHJ5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnkuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC90cmFuc2Zvcm1cbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0yRChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRyYW5zZm9ybSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHggPSBmbGF0Q29vcmRpbmF0ZXNbal07XG4gICAgICAgIHZhciB5ID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXTtcbiAgICAgICAgZGVzdFtpKytdID0gdHJhbnNmb3JtWzBdICogeCArIHRyYW5zZm9ybVsyXSAqIHkgKyB0cmFuc2Zvcm1bNF07XG4gICAgICAgIGRlc3RbaSsrXSA9IHRyYW5zZm9ybVsxXSAqIHggKyB0cmFuc2Zvcm1bM10gKiB5ICsgdHJhbnNmb3JtWzVdO1xuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIEFuZ2xlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBhbmNob3IgUm90YXRpb24gYW5jaG9yIHBvaW50LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb3RhdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBhbmdsZSwgYW5jaG9yLCBvcHRfZGVzdCkge1xuICAgIHZhciBkZXN0ID0gb3B0X2Rlc3QgPyBvcHRfZGVzdCA6IFtdO1xuICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgdmFyIHNpbiA9IE1hdGguc2luKGFuZ2xlKTtcbiAgICB2YXIgYW5jaG9yWCA9IGFuY2hvclswXTtcbiAgICB2YXIgYW5jaG9yWSA9IGFuY2hvclsxXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIGRlbHRhWCA9IGZsYXRDb29yZGluYXRlc1tqXSAtIGFuY2hvclg7XG4gICAgICAgIHZhciBkZWx0YVkgPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdIC0gYW5jaG9yWTtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWCArIGRlbHRhWCAqIGNvcyAtIGRlbHRhWSAqIHNpbjtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWSArIGRlbHRhWCAqIHNpbiArIGRlbHRhWSAqIGNvcztcbiAgICAgICAgZm9yICh2YXIgayA9IGogKyAyOyBrIDwgaiArIHN0cmlkZTsgKytrKSB7XG4gICAgICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNba107XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdF9kZXN0ICYmIGRlc3QubGVuZ3RoICE9IGkpIHtcbiAgICAgICAgZGVzdC5sZW5ndGggPSBpO1xuICAgIH1cbiAgICByZXR1cm4gZGVzdDtcbn1cbi8qKlxuICogU2NhbGUgdGhlIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzeCBTY2FsZSBmYWN0b3IgaW4gdGhlIHgtZGlyZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IHN5IFNjYWxlIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24uXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGFuY2hvciBTY2FsZSBhbmNob3IgcG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfZGVzdF0gRGVzdGluYXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBUcmFuc2Zvcm1lZCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3gsIHN5LCBhbmNob3IsIG9wdF9kZXN0KSB7XG4gICAgdmFyIGRlc3QgPSBvcHRfZGVzdCA/IG9wdF9kZXN0IDogW107XG4gICAgdmFyIGFuY2hvclggPSBhbmNob3JbMF07XG4gICAgdmFyIGFuY2hvclkgPSBhbmNob3JbMV07XG4gICAgdmFyIGkgPSAwO1xuICAgIGZvciAodmFyIGogPSBvZmZzZXQ7IGogPCBlbmQ7IGogKz0gc3RyaWRlKSB7XG4gICAgICAgIHZhciBkZWx0YVggPSBmbGF0Q29vcmRpbmF0ZXNbal0gLSBhbmNob3JYO1xuICAgICAgICB2YXIgZGVsdGFZID0gZmxhdENvb3JkaW5hdGVzW2ogKyAxXSAtIGFuY2hvclk7XG4gICAgICAgIGRlc3RbaSsrXSA9IGFuY2hvclggKyBzeCAqIGRlbHRhWDtcbiAgICAgICAgZGVzdFtpKytdID0gYW5jaG9yWSArIHN5ICogZGVsdGFZO1xuICAgICAgICBmb3IgKHZhciBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWSBEZWx0YSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBkZWx0YVgsIGRlbHRhWSwgb3B0X2Rlc3QpIHtcbiAgICB2YXIgZGVzdCA9IG9wdF9kZXN0ID8gb3B0X2Rlc3QgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgZGVzdFtpKytdID0gZmxhdENvb3JkaW5hdGVzW2pdICsgZGVsdGFYO1xuICAgICAgICBkZXN0W2krK10gPSBmbGF0Q29vcmRpbmF0ZXNbaiArIDFdICsgZGVsdGFZO1xuICAgICAgICBmb3IgKHZhciBrID0gaiArIDI7IGsgPCBqICsgc3RyaWRlOyArK2spIHtcbiAgICAgICAgICAgIGRlc3RbaSsrXSA9IGZsYXRDb29yZGluYXRlc1trXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QgJiYgZGVzdC5sZW5ndGggIT0gaSkge1xuICAgICAgICBkZXN0Lmxlbmd0aCA9IGk7XG4gICAgfVxuICAgIHJldHVybiBkZXN0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHJhbnNmb3JtLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9TaW1wbGVHZW9tZXRyeVxuICovXG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi9HZW9tZXRyeS5qcyc7XG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzLCBnZXRDZW50ZXIgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgcm90YXRlLCBzY2FsZSwgdHJhbnNmb3JtMkQsIHRyYW5zbGF0ZSB9IGZyb20gJy4vZmxhdC90cmFuc2Zvcm0uanMnO1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzOyBvbmx5IHVzZWQgZm9yIGNyZWF0aW5nIHN1YmNsYXNzZXM7IGRvIG5vdCBpbnN0YW50aWF0ZVxuICogaW4gYXBwcywgYXMgY2Fubm90IGJlIHJlbmRlcmVkLlxuICpcbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU2ltcGxlR2VvbWV0cnkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFNpbXBsZUdlb21ldHJ5LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNpbXBsZUdlb21ldHJ5KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdHJpZGUgPSAyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRDb29yZGluYXRlcyA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5jb21wdXRlRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCkge1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVGcm9tRmxhdENvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHJldHVybiB7QXJyYXk8Kj59IENvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGZpcnN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gRmlyc3QgY29vcmRpbmF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKDAsIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldEZsYXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBsYXN0IGNvb3JkaW5hdGUgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gTGFzdCBwb2ludC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldExhc3RDb29yZGluYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UodGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC0gdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSB7QGxpbmsgbW9kdWxlOm9sL2dlb20vR2VvbWV0cnlMYXlvdXQgbGF5b3V0fSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRMYXlvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHNpbXBsaWZpZWQgdmVyc2lvbiBvZiB0aGlzIGdlb21ldHJ5IHVzaW5nIHRoZSBEb3VnbGFzIFBldWNrZXIgYWxnb3JpdGhtLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge1NpbXBsZUdlb21ldHJ5fSBTaW1wbGlmaWVkIGdlb21ldHJ5LlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnkgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICBpZiAodGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiAhPT0gdGhpcy5nZXRSZXZpc2lvbigpKSB7XG4gICAgICAgICAgICB0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgPSAwO1xuICAgICAgICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlSZXZpc2lvbiA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBzcXVhcmVkVG9sZXJhbmNlIGlzIG5lZ2F0aXZlIG9yIGlmIHdlIGtub3cgdGhhdCBzaW1wbGlmaWNhdGlvbiB3aWxsIG5vdFxuICAgICAgICAvLyBoYXZlIGFueSBlZmZlY3QgdGhlbiBqdXN0IHJldHVybiB0aGlzLlxuICAgICAgICBpZiAoc3F1YXJlZFRvbGVyYW5jZSA8IDAgfHxcbiAgICAgICAgICAgICh0aGlzLnNpbXBsaWZpZWRHZW9tZXRyeU1heE1pblNxdWFyZWRUb2xlcmFuY2UgIT09IDAgJiZcbiAgICAgICAgICAgICAgICBzcXVhcmVkVG9sZXJhbmNlIDw9IHRoaXMuc2ltcGxpZmllZEdlb21ldHJ5TWF4TWluU3F1YXJlZFRvbGVyYW5jZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaW1wbGlmaWVkR2VvbWV0cnkgPSB0aGlzLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsKHNxdWFyZWRUb2xlcmFuY2UpO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIDwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2ltcGxpZmllZEdlb21ldHJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gU2ltcGxpZmljYXRpb24gZGlkIG5vdCBhY3R1YWxseSByZW1vdmUgYW55IGNvb3JkaW5hdGVzLiAgV2Ugbm93IGtub3dcbiAgICAgICAgICAgIC8vIHRoYXQgYW55IGNhbGxzIHRvIGdldFNpbXBsaWZpZWRHZW9tZXRyeSB3aXRoIGEgc3F1YXJlZFRvbGVyYW5jZSBsZXNzXG4gICAgICAgICAgICAvLyB0aGFuIG9yIGVxdWFsIHRvIHRoZSBjdXJyZW50IHNxdWFyZWRUb2xlcmFuY2Ugd2lsbCBhbHNvIG5vdCBoYXZlIGFueVxuICAgICAgICAgICAgLy8gZWZmZWN0LiAgVGhpcyBhbGxvd3MgdXMgdG8gc2hvcnQgY2lyY3VpdCBzaW1wbGlmaWNhdGlvbiAoc2F2aW5nIENQVVxuICAgICAgICAgICAgLy8gY3ljbGVzKSBhbmQgcHJldmVudHMgdGhlIGNhY2hlIG9mIHNpbXBsaWZpZWQgZ2VvbWV0cmllcyBmcm9tIGZpbGxpbmdcbiAgICAgICAgICAgIC8vIHVwIHdpdGggdXNlbGVzcyBpZGVudGljYWwgY29waWVzIG9mIHRoaXMgZ2VvbWV0cnkgKHNhdmluZyBtZW1vcnkpLlxuICAgICAgICAgICAgdGhpcy5zaW1wbGlmaWVkR2VvbWV0cnlNYXhNaW5TcXVhcmVkVG9sZXJhbmNlID0gc3F1YXJlZFRvbGVyYW5jZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAgICAgKiBAcmV0dXJuIHtTaW1wbGVHZW9tZXRyeX0gU2ltcGxpZmllZCBnZW9tZXRyeS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmdldFNpbXBsaWZpZWRHZW9tZXRyeUludGVybmFsID0gZnVuY3Rpb24gKHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFN0cmlkZS5cbiAgICAgKi9cbiAgICBTaW1wbGVHZW9tZXRyeS5wcm90b3R5cGUuZ2V0U3RyaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJpZGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gbGF5b3V0IExheW91dC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAobGF5b3V0LCBmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgdGhpcy5zdHJpZGUgPSBnZXRTdHJpZGVGb3JMYXlvdXQobGF5b3V0KTtcbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gZmxhdENvb3JkaW5hdGVzO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHshQXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBsYXlvdXQgTGF5b3V0LlxuICAgICAqIEBwYXJhbSB7QXJyYXk8Kj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBuZXN0aW5nIE5lc3RpbmcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zZXRMYXlvdXQgPSBmdW5jdGlvbiAobGF5b3V0LCBjb29yZGluYXRlcywgbmVzdGluZykge1xuICAgICAgICAvKiogQHR5cGUge251bWJlcn0gKi9cbiAgICAgICAgdmFyIHN0cmlkZTtcbiAgICAgICAgaWYgKGxheW91dCkge1xuICAgICAgICAgICAgc3RyaWRlID0gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5lc3Rpbmc7ICsraSkge1xuICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHJpZGUgPSAyO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7QXJyYXl9ICovIChjb29yZGluYXRlc1swXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RyaWRlID0gY29vcmRpbmF0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgbGF5b3V0ID0gZ2V0TGF5b3V0Rm9yU3RyaWRlKHN0cmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgICAgIHRoaXMuc3RyaWRlID0gc3RyaWRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQXBwbHkgYSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gdGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBUaGUgZ2VvbWV0cnkgaXMgbW9kaWZpZWQgaW4gcGxhY2UuXG4gICAgICogSWYgeW91IGRvIG5vdCB3YW50IHRoZSBnZW9tZXRyeSBtb2RpZmllZCBpbiBwbGFjZSwgZmlyc3QgYGNsb25lKClgIGl0IGFuZFxuICAgICAqIHRoZW4gdXNlIHRoaXMgZnVuY3Rpb24gb24gdGhlIGNsb25lLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn0gdHJhbnNmb3JtRm4gVHJhbnNmb3JtIGZ1bmN0aW9uLlxuICAgICAqIENhbGxlZCB3aXRoIGEgZmxhdCBhcnJheSBvZiBnZW9tZXRyeSBjb29yZGluYXRlcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLmFwcGx5VHJhbnNmb3JtID0gZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG4gICAgICAgIGlmICh0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdHJhbnNmb3JtRm4odGhpcy5mbGF0Q29vcmRpbmF0ZXMsIHRoaXMuZmxhdENvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUm90YXRlIHRoZSBnZW9tZXRyeSBhcm91bmQgYSBnaXZlbiBjb29yZGluYXRlLiBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeVxuICAgICAqIGNvb3JkaW5hdGVzIGluIHBsYWNlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSBSb3RhdGlvbiBhbmdsZSBpbiBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnJvdGF0ZSA9IGZ1bmN0aW9uIChhbmdsZSwgYW5jaG9yKSB7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldEZsYXRDb29yZGluYXRlcygpO1xuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB2YXIgc3RyaWRlID0gdGhpcy5nZXRTdHJpZGUoKTtcbiAgICAgICAgICAgIHJvdGF0ZShmbGF0Q29vcmRpbmF0ZXMsIDAsIGZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHN0cmlkZSwgYW5nbGUsIGFuY2hvciwgZmxhdENvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTY2FsZSB0aGUgZ2VvbWV0cnkgKHdpdGggYW4gb3B0aW9uYWwgb3JpZ2luKS4gIFRoaXMgbW9kaWZpZXMgdGhlIGdlb21ldHJ5XG4gICAgICogY29vcmRpbmF0ZXMgaW4gcGxhY2UuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN4IFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeC1kaXJlY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfc3ldIFRoZSBzY2FsaW5nIGZhY3RvciBpbiB0aGUgeS1kaXJlY3Rpb24gKGRlZmF1bHRzIHRvIHN4KS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBzY2FsZSBvcmlnaW4gKGRlZmF1bHRzIHRvIHRoZSBjZW50ZXJcbiAgICAgKiAgICAgb2YgdGhlIGdlb21ldHJ5IGV4dGVudCkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNpbXBsZUdlb21ldHJ5LnByb3RvdHlwZS5zY2FsZSA9IGZ1bmN0aW9uIChzeCwgb3B0X3N5LCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBzeSA9IG9wdF9zeTtcbiAgICAgICAgaWYgKHN5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN5ID0gc3g7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFuY2hvciA9IG9wdF9hbmNob3I7XG4gICAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgICAgICBhbmNob3IgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSB0aGlzLmdldFN0cmlkZSgpO1xuICAgICAgICAgICAgc2NhbGUoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIHN4LCBzeSwgYW5jaG9yLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSB0aGUgZ2VvbWV0cnkuICBUaGlzIG1vZGlmaWVzIHRoZSBnZW9tZXRyeSBjb29yZGluYXRlcyBpbiBwbGFjZS4gIElmXG4gICAgICogaW5zdGVhZCB5b3Ugd2FudCBhIG5ldyBnZW9tZXRyeSwgZmlyc3QgYGNsb25lKClgIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhWCBEZWx0YSBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVkgRGVsdGEgWS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgU2ltcGxlR2VvbWV0cnkucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChkZWx0YVgsIGRlbHRhWSkge1xuICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuZ2V0U3RyaWRlKCk7XG4gICAgICAgICAgICB0cmFuc2xhdGUoZmxhdENvb3JkaW5hdGVzLCAwLCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCBzdHJpZGUsIGRlbHRhWCwgZGVsdGFZLCBmbGF0Q29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTaW1wbGVHZW9tZXRyeTtcbn0oR2VvbWV0cnkpKTtcbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IGxheW91dCBMYXlvdXQuXG4gKi9cbmZ1bmN0aW9uIGdldExheW91dEZvclN0cmlkZShzdHJpZGUpIHtcbiAgICB2YXIgbGF5b3V0O1xuICAgIGlmIChzdHJpZGUgPT0gMikge1xuICAgICAgICBsYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc3RyaWRlID09IDMpIHtcbiAgICAgICAgbGF5b3V0ID0gR2VvbWV0cnlMYXlvdXQuWFlaO1xuICAgIH1cbiAgICBlbHNlIGlmIChzdHJpZGUgPT0gNCkge1xuICAgICAgICBsYXlvdXQgPSBHZW9tZXRyeUxheW91dC5YWVpNO1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9ICovIChsYXlvdXQpO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gbGF5b3V0IExheW91dC5cbiAqIEByZXR1cm4ge251bWJlcn0gU3RyaWRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RyaWRlRm9yTGF5b3V0KGxheW91dCkge1xuICAgIHZhciBzdHJpZGU7XG4gICAgaWYgKGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWSkge1xuICAgICAgICBzdHJpZGUgPSAyO1xuICAgIH1cbiAgICBlbHNlIGlmIChsYXlvdXQgPT0gR2VvbWV0cnlMYXlvdXQuWFlaIHx8IGxheW91dCA9PSBHZW9tZXRyeUxheW91dC5YWU0pIHtcbiAgICAgICAgc3RyaWRlID0gMztcbiAgICB9XG4gICAgZWxzZSBpZiAobGF5b3V0ID09IEdlb21ldHJ5TGF5b3V0LlhZWk0pIHtcbiAgICAgICAgc3RyaWRlID0gNDtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoc3RyaWRlKTtcbn1cbi8qKlxuICogQHBhcmFtIHtTaW1wbGVHZW9tZXRyeX0gc2ltcGxlR2VvbWV0cnkgU2ltcGxlIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSB0cmFuc2Zvcm0gVHJhbnNmb3JtLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gVHJhbnNmb3JtZWQgZmxhdCBjb29yZGluYXRlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUdlb20yRChzaW1wbGVHZW9tZXRyeSwgdHJhbnNmb3JtLCBvcHRfZGVzdCkge1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBzaW1wbGVHZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICBpZiAoIWZsYXRDb29yZGluYXRlcykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBzdHJpZGUgPSBzaW1wbGVHZW9tZXRyeS5nZXRTdHJpZGUoKTtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybTJEKGZsYXRDb29yZGluYXRlcywgMCwgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgc3RyaWRlLCB0cmFuc2Zvcm0sIG9wdF9kZXN0KTtcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCBTaW1wbGVHZW9tZXRyeTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVNpbXBsZUdlb21ldHJ5LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY2xvc2VzdFxuICovXG5pbXBvcnQgeyBsZXJwLCBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4IH0gZnJvbSAnLi4vLi4vbWF0aC5qcyc7XG4vKipcbiAqIFJldHVybnMgdGhlIHBvaW50IG9uIHRoZSAyRCBsaW5lIHNlZ21lbnQgZmxhdENvb3JkaW5hdGVzW29mZnNldDFdIHRvXG4gKiBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0Ml0gdGhhdCBpcyBjbG9zZXN0IHRvIHRoZSBwb2ludCAoeCwgeSkuICBFeHRyYVxuICogZGltZW5zaW9ucyBhcmUgbGluZWFybHkgaW50ZXJwb2xhdGVkLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQxIE9mZnNldCAxLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldDIgT2Zmc2V0IDIuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAqL1xuZnVuY3Rpb24gYXNzaWduQ2xvc2VzdChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldDEsIG9mZnNldDIsIHN0cmlkZSwgeCwgeSwgY2xvc2VzdFBvaW50KSB7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDFdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQxICsgMV07XG4gICAgdmFyIGR4ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDJdIC0geDE7XG4gICAgdmFyIGR5ID0gZmxhdENvb3JkaW5hdGVzW29mZnNldDIgKyAxXSAtIHkxO1xuICAgIHZhciBvZmZzZXQ7XG4gICAgaWYgKGR4ID09PSAwICYmIGR5ID09PSAwKSB7XG4gICAgICAgIG9mZnNldCA9IG9mZnNldDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgdCA9ICgoeCAtIHgxKSAqIGR4ICsgKHkgLSB5MSkgKiBkeSkgLyAoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICAgICBpZiAodCA+IDEpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodCA+IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBsZXJwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQxICsgaV0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQyICsgaV0sIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgfVxuICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG59XG4vKipcbiAqIFJldHVybiB0aGUgc3F1YXJlZCBvZiB0aGUgbGFyZ2VzdCBkaXN0YW5jZSBiZXR3ZWVuIGFueSBwYWlyIG9mIGNvbnNlY3V0aXZlXG4gKiBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1heFNxdWFyZWREZWx0YShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heCkge1xuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICBmb3IgKG9mZnNldCArPSBzdHJpZGU7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICB2YXIgc3F1YXJlZERlbHRhID0gc3F1YXJlZER4KHgxLCB5MSwgeDIsIHkyKTtcbiAgICAgICAgaWYgKHNxdWFyZWREZWx0YSA+IG1heCkge1xuICAgICAgICAgICAgbWF4ID0gc3F1YXJlZERlbHRhO1xuICAgICAgICB9XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiBtYXg7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbWF4IE1heCBzcXVhcmVkIGRlbHRhLlxuICogQHJldHVybiB7bnVtYmVyfSBNYXggc3F1YXJlZCBkZWx0YS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgbWF4ID0gbWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbWF4O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heCBNYXggc3F1YXJlZCBkZWx0YS5cbiAqIEByZXR1cm4ge251bWJlcn0gTWF4IHNxdWFyZWQgZGVsdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtdWx0aUFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBtYXgpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIG1heCA9IGFycmF5TWF4U3F1YXJlZERlbHRhKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heCk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIG1heDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICBpZiAob2Zmc2V0ID09IGVuZCkge1xuICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgIH1cbiAgICB2YXIgaSwgc3F1YXJlZERpc3RhbmNlO1xuICAgIGlmIChtYXhEZWx0YSA9PT0gMCkge1xuICAgICAgICAvLyBBbGwgcG9pbnRzIGFyZSBpZGVudGljYWwsIHNvIGp1c3QgdGVzdCB0aGUgZmlyc3QgcG9pbnQuXG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSwgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmlkZTsgKytpKSB7XG4gICAgICAgICAgICAgICAgY2xvc2VzdFBvaW50W2ldID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIHJldHVybiBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgdmFyIGluZGV4ID0gb2Zmc2V0ICsgc3RyaWRlO1xuICAgIHdoaWxlIChpbmRleCA8IGVuZCkge1xuICAgICAgICBhc3NpZ25DbG9zZXN0KGZsYXRDb29yZGluYXRlcywgaW5kZXggLSBzdHJpZGUsIGluZGV4LCBzdHJpZGUsIHgsIHksIHRtcFBvaW50KTtcbiAgICAgICAgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIHRtcFBvaW50WzBdLCB0bXBQb2ludFsxXSk7XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UgPCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgIG1pblNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IHRtcFBvaW50W2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xvc2VzdFBvaW50Lmxlbmd0aCA9IHN0cmlkZTtcbiAgICAgICAgICAgIGluZGV4ICs9IHN0cmlkZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFNraXAgYWhlYWQgbXVsdGlwbGUgcG9pbnRzLCBiZWNhdXNlIHdlIGtub3cgdGhhdCBhbGwgdGhlIHNraXBwZWRcbiAgICAgICAgICAgIC8vIHBvaW50cyBjYW5ub3QgYmUgYW55IGNsb3NlciB0aGFuIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc29cbiAgICAgICAgICAgIC8vIGZhci4gIFdlIGtub3cgdGhpcyBiZWNhdXNlIHdlIGtub3cgaG93IGNsb3NlIHRoZSBjdXJyZW50IHBvaW50IGlzLCBob3dcbiAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBjbG9zZXN0IHBvaW50IHdlIGhhdmUgZm91bmQgc28gZmFyIGlzLCBhbmQgdGhlIG1heGltdW1cbiAgICAgICAgICAgIC8vIGRpc3RhbmNlIGJldHdlZW4gY29uc2VjdXRpdmUgcG9pbnRzLiAgRm9yIGV4YW1wbGUsIGlmIHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAgICAgLy8gYXQgZGlzdGFuY2UgMTAsIHRoZSBiZXN0IHdlJ3ZlIGZvdW5kIHNvIGZhciBpcyAzLCBhbmQgdGhhdCB0aGUgbWF4aW11bVxuICAgICAgICAgICAgLy8gZGlzdGFuY2UgYmV0d2VlbiBjb25zZWN1dGl2ZSBwb2ludHMgaXMgMiwgdGhlbiB3ZSdsbCBuZWVkIHRvIHNraXAgYXRcbiAgICAgICAgICAgIC8vIGxlYXN0ICgxMCAtIDMpIC8gMiA9PSAzIChyb3VuZGVkIGRvd24pIHBvaW50cyB0byBoYXZlIGFueSBjaGFuY2Ugb2ZcbiAgICAgICAgICAgIC8vIGZpbmRpbmcgYSBjbG9zZXIgcG9pbnQuICBXZSB1c2UgTWF0aC5tYXgoLi4uLCAxKSB0byBlbnN1cmUgdGhhdCB3ZVxuICAgICAgICAgICAgLy8gYWx3YXlzIGFkdmFuY2UgYXQgbGVhc3Qgb25lIHBvaW50LCB0byBhdm9pZCBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICAgICAgaW5kZXggKz1cbiAgICAgICAgICAgICAgICBzdHJpZGUgKlxuICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgoKE1hdGguc3FydChzcXVhcmVkRGlzdGFuY2UpIC0gTWF0aC5zcXJ0KG1pblNxdWFyZWREaXN0YW5jZSkpIC9cbiAgICAgICAgICAgICAgICAgICAgICAgIG1heERlbHRhKSB8XG4gICAgICAgICAgICAgICAgICAgICAgICAwLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNSaW5nKSB7XG4gICAgICAgIC8vIENoZWNrIHRoZSBjbG9zaW5nIHNlZ21lbnQuXG4gICAgICAgIGFzc2lnbkNsb3Nlc3QoZmxhdENvb3JkaW5hdGVzLCBlbmQgLSBzdHJpZGUsIG9mZnNldCwgc3RyaWRlLCB4LCB5LCB0bXBQb2ludCk7XG4gICAgICAgIHNxdWFyZWREaXN0YW5jZSA9IHNxdWFyZWREeCh4LCB5LCB0bXBQb2ludFswXSwgdG1wUG9pbnRbMV0pO1xuICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlIDwgbWluU3F1YXJlZERpc3RhbmNlKSB7XG4gICAgICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBzcXVhcmVkRGlzdGFuY2U7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgICAgICBjbG9zZXN0UG9pbnRbaV0gPSB0bXBQb2ludFtpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhEZWx0YSBNYXggZGVsdGEuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzUmluZyBJcyByaW5nLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGNsb3Nlc3RQb2ludCBDbG9zZXN0IHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfdG1wUG9pbnRdIFRlbXBvcmFyeSBwb2ludCBvYmplY3QuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2lnbkNsb3Nlc3RBcnJheVBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG1heERlbHRhLCBpc1JpbmcsIHgsIHksIGNsb3Nlc3RQb2ludCwgbWluU3F1YXJlZERpc3RhbmNlLCBvcHRfdG1wUG9pbnQpIHtcbiAgICB2YXIgdG1wUG9pbnQgPSBvcHRfdG1wUG9pbnQgPyBvcHRfdG1wUG9pbnQgOiBbTmFOLCBOYU5dO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kID0gZW5kc1tpXTtcbiAgICAgICAgbWluU3F1YXJlZERpc3RhbmNlID0gYXNzaWduQ2xvc2VzdFBvaW50KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIHRtcFBvaW50KTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gbWluU3F1YXJlZERpc3RhbmNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IG1heERlbHRhIE1heCBkZWx0YS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNSaW5nIElzIHJpbmcuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gW29wdF90bXBQb2ludF0gVGVtcG9yYXJ5IHBvaW50IG9iamVjdC5cbiAqIEByZXR1cm4ge251bWJlcn0gTWluaW11bSBzcXVhcmVkIGRpc3RhbmNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduQ2xvc2VzdE11bHRpQXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgbWF4RGVsdGEsIGlzUmluZywgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UsIG9wdF90bXBQb2ludCkge1xuICAgIHZhciB0bXBQb2ludCA9IG9wdF90bXBQb2ludCA/IG9wdF90bXBQb2ludCA6IFtOYU4sIE5hTl07XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBtaW5TcXVhcmVkRGlzdGFuY2UgPSBhc3NpZ25DbG9zZXN0QXJyYXlQb2ludChmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBtYXhEZWx0YSwgaXNSaW5nLCB4LCB5LCBjbG9zZXN0UG9pbnQsIG1pblNxdWFyZWREaXN0YW5jZSwgdG1wUG9pbnQpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBtaW5TcXVhcmVkRGlzdGFuY2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbG9zZXN0LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvZGVmbGF0ZVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlLCBzdHJpZGUpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBjb29yZGluYXRlLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbaV07XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmxhdGVDb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXMsIHN0cmlkZSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGNvb3JkaW5hdGUgPSBjb29yZGluYXRlc1tpXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzdHJpZGU7ICsraikge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCsrXSA9IGNvb3JkaW5hdGVbal07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pn0gY29vcmRpbmF0ZXNzIENvb3JkaW5hdGVzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2VuZHNdIEVuZHMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzcywgc3RyaWRlLCBvcHRfZW5kcykge1xuICAgIHZhciBlbmRzID0gb3B0X2VuZHMgPyBvcHRfZW5kcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBjb29yZGluYXRlc3MubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICB2YXIgZW5kID0gZGVmbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBjb29yZGluYXRlc3Nbal0sIHN0cmlkZSk7XG4gICAgICAgIGVuZHNbaSsrXSA9IGVuZDtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICBlbmRzLmxlbmd0aCA9IGk7XG4gICAgcmV0dXJuIGVuZHM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBjb29yZGluYXRlc3NzIENvb3JkaW5hdGVzc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IFtvcHRfZW5kc3NdIEVuZHNzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IEVuZHNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgY29vcmRpbmF0ZXNzcywgc3RyaWRlLCBvcHRfZW5kc3MpIHtcbiAgICB2YXIgZW5kc3MgPSBvcHRfZW5kc3MgPyBvcHRfZW5kc3MgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IDAsIGpqID0gY29vcmRpbmF0ZXNzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmRzID0gZGVmbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGNvb3JkaW5hdGVzc3Nbal0sIHN0cmlkZSwgZW5kc3NbaV0pO1xuICAgICAgICBlbmRzc1tpKytdID0gZW5kcztcbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICBlbmRzcy5sZW5ndGggPSBpO1xuICAgIHJldHVybiBlbmRzcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlZmxhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9zaW1wbGlmeVxuICovXG4vLyBCYXNlZCBvbiBzaW1wbGlmeS1qcyBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9zaW1wbGlmeS1qc1xuLy8gQ29weXJpZ2h0IChjKSAyMDEyLCBWbGFkaW1pciBBZ2Fmb25raW5cbi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4vL1xuLy8gUmVkaXN0cmlidXRpb24gYW5kIHVzZSBpbiBzb3VyY2UgYW5kIGJpbmFyeSBmb3Jtcywgd2l0aCBvciB3aXRob3V0XG4vLyBtb2RpZmljYXRpb24sIGFyZSBwZXJtaXR0ZWQgcHJvdmlkZWQgdGhhdCB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgYXJlIG1ldDpcbi8vXG4vLyAgICAxLiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4vLyAgICAgICB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuLy9cbi8vICAgIDIuIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0XG4vLyAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlXG4vLyAgICAgICBkb2N1bWVudGF0aW9uIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuLy9cbi8vIFRISVMgU09GVFdBUkUgSVMgUFJPVklERUQgQlkgVEhFIENPUFlSSUdIVCBIT0xERVJTIEFORCBDT05UUklCVVRPUlMgXCJBUyBJU1wiXG4vLyBBTkQgQU5ZIEVYUFJFU1MgT1IgSU1QTElFRCBXQVJSQU5USUVTLCBJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgVEhFXG4vLyBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRVxuLy8gQVJFIERJU0NMQUlNRUQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSIE9SIENPTlRSSUJVVE9SUyBCRVxuLy8gTElBQkxFIEZPUiBBTlkgRElSRUNULCBJTkRJUkVDVCwgSU5DSURFTlRBTCwgU1BFQ0lBTCwgRVhFTVBMQVJZLCBPUlxuLy8gQ09OU0VRVUVOVElBTCBEQU1BR0VTIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0Zcbi8vIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7IExPU1MgT0YgVVNFLCBEQVRBLCBPUiBQUk9GSVRTOyBPUiBCVVNJTkVTU1xuLy8gSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT04gQU5ZIFRIRU9SWSBPRiBMSUFCSUxJVFksIFdIRVRIRVIgSU5cbi8vIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpXG4vLyBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJUyBTT0ZUV0FSRSwgRVZFTiBJRiBBRFZJU0VEIE9GIFRIRVxuLy8gUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuXG5pbXBvcnQgeyBzcXVhcmVkRGlzdGFuY2UsIHNxdWFyZWRTZWdtZW50RGlzdGFuY2UgfSBmcm9tICcuLi8uLi9tYXRoLmpzJztcbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtib29sZWFufSBoaWdoUXVhbGl0eSBIaWdoZXN0IHF1YWxpdHkuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc10gU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBTaW1wbGlmaWVkIGxpbmUgc3RyaW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2ltcGxpZnlMaW5lU3RyaW5nKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgaGlnaFF1YWxpdHksIG9wdF9zaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzKSB7XG4gICAgdmFyIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgPSBvcHRfc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gb3B0X3NpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNcbiAgICAgICAgOiBbXTtcbiAgICBpZiAoIWhpZ2hRdWFsaXR5KSB7XG4gICAgICAgIGVuZCA9IHJhZGlhbERpc3RhbmNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgMCk7XG4gICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXM7XG4gICAgICAgIG9mZnNldCA9IDA7XG4gICAgICAgIHN0cmlkZSA9IDI7XG4gICAgfVxuICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICByZXR1cm4gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcztcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG91Z2xhc1BldWNrZXIoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gICAgdmFyIG4gPSAoZW5kIC0gb2Zmc2V0KSAvIHN0cmlkZTtcbiAgICBpZiAobiA8IDMpIHtcbiAgICAgICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPVxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbiAgICB9XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBtYXJrZXJzID0gbmV3IEFycmF5KG4pO1xuICAgIG1hcmtlcnNbMF0gPSAxO1xuICAgIG1hcmtlcnNbbiAtIDFdID0gMTtcbiAgICAvKiogQHR5cGUge0FycmF5PG51bWJlcj59ICovXG4gICAgdmFyIHN0YWNrID0gW29mZnNldCwgZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHdoaWxlIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBsYXN0ID0gc3RhY2sucG9wKCk7XG4gICAgICAgIHZhciBmaXJzdCA9IHN0YWNrLnBvcCgpO1xuICAgICAgICB2YXIgbWF4U3F1YXJlZERpc3RhbmNlID0gMDtcbiAgICAgICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0XTtcbiAgICAgICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2ZpcnN0ICsgMV07XG4gICAgICAgIHZhciB4MiA9IGZsYXRDb29yZGluYXRlc1tsYXN0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2xhc3QgKyAxXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0ICsgc3RyaWRlOyBpIDwgbGFzdDsgaSArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHZhciB4ID0gZmxhdENvb3JkaW5hdGVzW2ldO1xuICAgICAgICAgICAgdmFyIHkgPSBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xuICAgICAgICAgICAgdmFyIHNxdWFyZWREaXN0YW5jZV8xID0gc3F1YXJlZFNlZ21lbnREaXN0YW5jZSh4LCB5LCB4MSwgeTEsIHgyLCB5Mik7XG4gICAgICAgICAgICBpZiAoc3F1YXJlZERpc3RhbmNlXzEgPiBtYXhTcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgbWF4U3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZERpc3RhbmNlXzE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1heFNxdWFyZWREaXN0YW5jZSA+IHNxdWFyZWRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgIG1hcmtlcnNbKGluZGV4IC0gb2Zmc2V0KSAvIHN0cmlkZV0gPSAxO1xuICAgICAgICAgICAgaWYgKGZpcnN0ICsgc3RyaWRlIDwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGZpcnN0LCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggKyBzdHJpZGUgPCBsYXN0KSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChpbmRleCwgbGFzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgaWYgKG1hcmtlcnNbaV0pIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9XG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW29mZnNldCArIGkgKiBzdHJpZGVdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaSAqIHN0cmlkZSArIDFdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEVuZHMgU2ltcGxpZmllZCBlbmRzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBkb3VnbGFzUGV1Y2tlcihmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHNxdWFyZWRUb2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kcy5wdXNoKHNpbXBsaWZpZWRPZmZzZXQpO1xuICAgICAgICBvZmZzZXQgPSBlbmQ7XG4gICAgfVxuICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMgU2ltcGxpZmllZCBmbGF0XG4gKiAgICAgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc2ltcGxpZmllZE9mZnNldCBTaW1wbGlmaWVkIG9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IHNpbXBsaWZpZWRFbmRzcyBTaW1wbGlmaWVkIGVuZHNzLlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdWdsYXNQZXVja2VyTXVsdGlBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHNzKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICB2YXIgc2ltcGxpZmllZEVuZHMgPSBbXTtcbiAgICAgICAgc2ltcGxpZmllZE9mZnNldCA9IGRvdWdsYXNQZXVja2VyQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gc3F1YXJlZFRvbGVyYW5jZSBTcXVhcmVkIHRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZGlhbERpc3RhbmNlKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgc3F1YXJlZFRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCkge1xuICAgIGlmIChlbmQgPD0gb2Zmc2V0ICsgc3RyaWRlKSB7XG4gICAgICAgIC8vIHplcm8gb3Igb25lIHBvaW50LCBubyBzaW1wbGlmaWNhdGlvbiBwb3NzaWJsZSwgc28gY29weSBhbmQgcmV0dXJuXG4gICAgICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID1cbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgfVxuICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xuICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAvLyBjb3B5IGZpcnN0IHBvaW50XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geDE7XG4gICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTE7XG4gICAgdmFyIHgyID0geDE7XG4gICAgdmFyIHkyID0geTE7XG4gICAgZm9yIChvZmZzZXQgKz0gc3RyaWRlOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XG4gICAgICAgIGlmIChzcXVhcmVkRGlzdGFuY2UoeDEsIHkxLCB4MiwgeTIpID4gc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgLy8gY29weSBwb2ludCBhdCBvZmZzZXRcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICAgICAgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlc1tzaW1wbGlmaWVkT2Zmc2V0KytdID0geTI7XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoeDIgIT0geDEgfHwgeTIgIT0geTEpIHtcbiAgICAgICAgLy8gY29weSBsYXN0IHBvaW50XG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBWYWx1ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHJldHVybiB7bnVtYmVyfSBSb3VuZGVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc25hcCh2YWx1ZSwgdG9sZXJhbmNlKSB7XG4gICAgcmV0dXJuIHRvbGVyYW5jZSAqIE1hdGgucm91bmQodmFsdWUgLyB0b2xlcmFuY2UpO1xufVxuLyoqXG4gKiBTaW1wbGlmaWVzIGEgbGluZSBzdHJpbmcgdXNpbmcgYW4gYWxnb3JpdGhtIGRlc2lnbmVkIGJ5IFRpbSBTY2hhdWIuXG4gKiBDb29yZGluYXRlcyBhcmUgc25hcHBlZCB0byB0aGUgbmVhcmVzdCB2YWx1ZSBpbiBhIHZpcnR1YWwgZ3JpZCBhbmRcbiAqIGNvbnNlY3V0aXZlIGR1cGxpY2F0ZSBjb29yZGluYXRlcyBhcmUgZGlzY2FyZGVkLiAgVGhpcyBlZmZlY3RpdmVseSBwcmVzZXJ2ZXNcbiAqIHRvcG9sb2d5IGFzIHRoZSBzaW1wbGlmaWNhdGlvbiBvZiBhbnkgc3Vic2VjdGlvbiBvZiBhIGxpbmUgc3RyaW5nIGlzXG4gKiBpbmRlcGVuZGVudCBvZiB0aGUgcmVzdCBvZiB0aGUgbGluZSBzdHJpbmcuICBUaGlzIG1lYW5zIHRoYXQsIGZvciBleGFtcGxlcyxcbiAqIHRoZSBjb21tb24gZWRnZSBiZXR3ZWVuIHR3byBwb2x5Z29ucyB3aWxsIGJlIHNpbXBsaWZpZWQgdG8gdGhlIHNhbWUgbGluZVxuICogc3RyaW5nIGluZGVwZW5kZW50bHkgaW4gYm90aCBwb2x5Z29ucy4gIFRoaXMgaW1wbGVtZW50YXRpb24gdXNlcyBhIHNpbmdsZVxuICogcGFzcyBvdmVyIHRoZSBjb29yZGluYXRlcyBhbmQgZWxpbWluYXRlcyBpbnRlcm1lZGlhdGUgY29sbGluZWFyIHBvaW50cy5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHJldHVybiB7bnVtYmVyfSBTaW1wbGlmaWVkIG9mZnNldC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHF1YW50aXplKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgdG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCBzaW1wbGlmaWVkT2Zmc2V0KSB7XG4gICAgLy8gZG8gbm90aGluZyBpZiB0aGUgbGluZSBpcyBlbXB0eVxuICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAgIHJldHVybiBzaW1wbGlmaWVkT2Zmc2V0O1xuICAgIH1cbiAgICAvLyBzbmFwIHRoZSBmaXJzdCBjb29yZGluYXRlIChQMSlcbiAgICB2YXIgeDEgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgIHZhciB5MSA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdLCB0b2xlcmFuY2UpO1xuICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgLy8gYWRkIHRoZSBmaXJzdCBjb29yZGluYXRlIHRvIHRoZSBvdXRwdXRcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MTtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MTtcbiAgICAvLyBmaW5kIHRoZSBuZXh0IGNvb3JkaW5hdGUgdGhhdCBkb2VzIG5vdCBzbmFwIHRvIHRoZSBzYW1lIHZhbHVlIGFzIHRoZSBmaXJzdFxuICAgIC8vIGNvb3JkaW5hdGUgKFAyKVxuICAgIHZhciB4MiwgeTI7XG4gICAgZG8ge1xuICAgICAgICB4MiA9IHNuYXAoZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIHRvbGVyYW5jZSk7XG4gICAgICAgIHkyID0gc25hcChmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0sIHRvbGVyYW5jZSk7XG4gICAgICAgIG9mZnNldCArPSBzdHJpZGU7XG4gICAgICAgIGlmIChvZmZzZXQgPT0gZW5kKSB7XG4gICAgICAgICAgICAvLyBhbGwgY29vcmRpbmF0ZXMgc25hcCB0byB0aGUgc2FtZSB2YWx1ZSwgdGhlIGxpbmUgY29sbGFwc2VzIHRvIGEgcG9pbnRcbiAgICAgICAgICAgIC8vIHB1c2ggdGhlIGxhc3Qgc25hcHBlZCB2YWx1ZSBhbnl3YXkgdG8gZW5zdXJlIHRoYXQgdGhlIG91dHB1dCBjb250YWluc1xuICAgICAgICAgICAgLy8gYXQgbGVhc3QgdHdvIHBvaW50c1xuICAgICAgICAgICAgLy8gRklYTUUgc2hvdWxkIHdlIHJlYWxseSByZXR1cm4gYXQgbGVhc3QgdHdvIHBvaW50cyBhbnl3YXk/XG4gICAgICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICAgICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHkyO1xuICAgICAgICAgICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICB9IHdoaWxlICh4MiA9PSB4MSAmJiB5MiA9PSB5MSk7XG4gICAgd2hpbGUgKG9mZnNldCA8IGVuZCkge1xuICAgICAgICAvLyBzbmFwIHRoZSBuZXh0IGNvb3JkaW5hdGUgKFAzKVxuICAgICAgICB2YXIgeDMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXRdLCB0b2xlcmFuY2UpO1xuICAgICAgICB2YXIgeTMgPSBzbmFwKGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXSwgdG9sZXJhbmNlKTtcbiAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgLy8gc2tpcCBQMyBpZiBpdCBpcyBlcXVhbCB0byBQMlxuICAgICAgICBpZiAoeDMgPT0geDIgJiYgeTMgPT0geTIpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVsdGEgYmV0d2VlbiBQMSBhbmQgUDJcbiAgICAgICAgdmFyIGR4MSA9IHgyIC0geDE7XG4gICAgICAgIHZhciBkeTEgPSB5MiAtIHkxO1xuICAgICAgICAvLyBjYWxjdWxhdGUgdGhlIGRlbHRhIGJldHdlZW4gUDMgYW5kIFAxXG4gICAgICAgIHZhciBkeDIgPSB4MyAtIHgxO1xuICAgICAgICB2YXIgZHkyID0geTMgLSB5MTtcbiAgICAgICAgLy8gaWYgUDEsIFAyLCBhbmQgUDMgYXJlIGNvbGluZWFyIGFuZCBQMyBpcyBmdXJ0aGVyIGZyb20gUDEgdGhhbiBQMiBpcyBmcm9tXG4gICAgICAgIC8vIFAxIGluIHRoZSBzYW1lIGRpcmVjdGlvbiB0aGVuIFAyIGlzIG9uIHRoZSBzdHJhaWdodCBsaW5lIGJldHdlZW4gUDEgYW5kXG4gICAgICAgIC8vIFAzXG4gICAgICAgIGlmIChkeDEgKiBkeTIgPT0gZHkxICogZHgyICYmXG4gICAgICAgICAgICAoKGR4MSA8IDAgJiYgZHgyIDwgZHgxKSB8fCBkeDEgPT0gZHgyIHx8IChkeDEgPiAwICYmIGR4MiA+IGR4MSkpICYmXG4gICAgICAgICAgICAoKGR5MSA8IDAgJiYgZHkyIDwgZHkxKSB8fCBkeTEgPT0gZHkyIHx8IChkeTEgPiAwICYmIGR5MiA+IGR5MSkpKSB7XG4gICAgICAgICAgICAvLyBkaXNjYXJkIFAyIGFuZCBzZXQgUDIgPSBQM1xuICAgICAgICAgICAgeDIgPSB4MztcbiAgICAgICAgICAgIHkyID0geTM7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlaXRoZXIgUDEsIFAyLCBhbmQgUDMgYXJlIG5vdCBjb2xpbmVhciwgb3IgdGhleSBhcmUgY29saW5lYXIgYnV0IFAzIGlzXG4gICAgICAgIC8vIGJldHdlZW4gUDMgYW5kIFAxIG9yIG9uIHRoZSBvcHBvc2l0ZSBoYWxmIG9mIHRoZSBsaW5lIHRvIFAyLiAgYWRkIFAyLFxuICAgICAgICAvLyBhbmQgY29udGludWUgd2l0aCBQMSA9IFAyIGFuZCBQMiA9IFAzXG4gICAgICAgIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXNbc2ltcGxpZmllZE9mZnNldCsrXSA9IHgyO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICAgICAgeDEgPSB4MjtcbiAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgeDIgPSB4MztcbiAgICAgICAgeTIgPSB5MztcbiAgICB9XG4gICAgLy8gYWRkIHRoZSBsYXN0IHBvaW50IChQMilcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB4MjtcbiAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzW3NpbXBsaWZpZWRPZmZzZXQrK10gPSB5MjtcbiAgICByZXR1cm4gc2ltcGxpZmllZE9mZnNldDtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b2xlcmFuY2UgVG9sZXJhbmNlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzIFNpbXBsaWZpZWQgZmxhdFxuICogICAgIGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHNpbXBsaWZpZWRPZmZzZXQgU2ltcGxpZmllZCBvZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHNpbXBsaWZpZWRFbmRzIFNpbXBsaWZpZWQgZW5kcy5cbiAqIEByZXR1cm4ge251bWJlcn0gU2ltcGxpZmllZCBvZmZzZXQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBxdWFudGl6ZUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIHNpbXBsaWZpZWRFbmRzLnB1c2goc2ltcGxpZmllZE9mZnNldCk7XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEVuZHNzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9sZXJhbmNlIFRvbGVyYW5jZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyBTaW1wbGlmaWVkIGZsYXRcbiAqICAgICBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzaW1wbGlmaWVkT2Zmc2V0IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gc2ltcGxpZmllZEVuZHNzIFNpbXBsaWZpZWQgZW5kc3MuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFNpbXBsaWZpZWQgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcXVhbnRpemVNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCB0b2xlcmFuY2UsIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIHNpbXBsaWZpZWRPZmZzZXQsIHNpbXBsaWZpZWRFbmRzcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgdmFyIHNpbXBsaWZpZWRFbmRzID0gW107XG4gICAgICAgIHNpbXBsaWZpZWRPZmZzZXQgPSBxdWFudGl6ZUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHRvbGVyYW5jZSwgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcywgc2ltcGxpZmllZE9mZnNldCwgc2ltcGxpZmllZEVuZHMpO1xuICAgICAgICBzaW1wbGlmaWVkRW5kc3MucHVzaChzaW1wbGlmaWVkRW5kcyk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIHNpbXBsaWZpZWRPZmZzZXQ7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zaW1wbGlmeS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2luZmxhdGVcbiAqL1xuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+fSBbb3B0X2Nvb3JkaW5hdGVzXSBDb29yZGluYXRlcy5cbiAqIEByZXR1cm4ge0FycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IENvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzKSB7XG4gICAgdmFyIGNvb3JkaW5hdGVzID0gb3B0X2Nvb3JkaW5hdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXMgOiBbXTtcbiAgICB2YXIgaSA9IDA7XG4gICAgZm9yICh2YXIgaiA9IG9mZnNldDsgaiA8IGVuZDsgaiArPSBzdHJpZGUpIHtcbiAgICAgICAgY29vcmRpbmF0ZXNbaSsrXSA9IGZsYXRDb29yZGluYXRlcy5zbGljZShqLCBqICsgc3RyaWRlKTtcbiAgICB9XG4gICAgY29vcmRpbmF0ZXMubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXM7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSBbb3B0X2Nvb3JkaW5hdGVzc10gQ29vcmRpbmF0ZXNzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9jb29yZGluYXRlc3MpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNzID0gb3B0X2Nvb3JkaW5hdGVzcyAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvb3JkaW5hdGVzcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbal07XG4gICAgICAgIGNvb3JkaW5hdGVzc1tpKytdID0gaW5mbGF0ZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY29vcmRpbmF0ZXNzW2ldKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICBjb29yZGluYXRlc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXNzO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxBcnJheTxpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+Pj59IFtvcHRfY29vcmRpbmF0ZXNzc11cbiAqICAgICBDb29yZGluYXRlc3NzLlxuICogQHJldHVybiB7QXJyYXk8QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj4+fSBDb29yZGluYXRlc3NzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5mbGF0ZU11bHRpQ29vcmRpbmF0ZXNBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X2Nvb3JkaW5hdGVzc3MpIHtcbiAgICB2YXIgY29vcmRpbmF0ZXNzcyA9IG9wdF9jb29yZGluYXRlc3NzICE9PSB1bmRlZmluZWQgPyBvcHRfY29vcmRpbmF0ZXNzcyA6IFtdO1xuICAgIHZhciBpID0gMDtcbiAgICBmb3IgKHZhciBqID0gMCwgamogPSBlbmRzcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3Nbal07XG4gICAgICAgIGNvb3JkaW5hdGVzc3NbaSsrXSA9IGluZmxhdGVDb29yZGluYXRlc0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGNvb3JkaW5hdGVzc3NbaV0pO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIGNvb3JkaW5hdGVzc3MubGVuZ3RoID0gaTtcbiAgICByZXR1cm4gY29vcmRpbmF0ZXNzcztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZmxhdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vZmxhdC9hcmVhXG4gKi9cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZCBFbmQuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgdmFyIHR3aWNlQXJlYSA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgdHdpY2VBcmVhICs9IHkxICogeDIgLSB4MSAqIHkyO1xuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gdHdpY2VBcmVhIC8gMjtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUpIHtcbiAgICB2YXIgYXJlYSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICBhcmVhICs9IGxpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gYXJlYTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxBcnJheTxudW1iZXI+Pn0gZW5kc3MgRW5kc3MuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEByZXR1cm4ge251bWJlcn0gQXJlYS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSkge1xuICAgIHZhciBhcmVhID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGFyZWEgKz0gbGluZWFyUmluZ3MoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSk7XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZWE7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcmVhLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9MaW5lYXJSaW5nXG4gKi9cbmltcG9ydCBHZW9tZXRyeUxheW91dCBmcm9tICcuL0dlb21ldHJ5TGF5b3V0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9HZW9tZXRyeVR5cGUuanMnO1xuaW1wb3J0IFNpbXBsZUdlb21ldHJ5IGZyb20gJy4vU2ltcGxlR2VvbWV0cnkuanMnO1xuaW1wb3J0IHsgYXNzaWduQ2xvc2VzdFBvaW50LCBtYXhTcXVhcmVkRGVsdGEgfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQgeyBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFkgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9mbGF0L2RlZmxhdGUuanMnO1xuaW1wb3J0IHsgZG91Z2xhc1BldWNrZXIgfSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHsgaW5mbGF0ZUNvb3JkaW5hdGVzIH0gZnJvbSAnLi9mbGF0L2luZmxhdGUuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZyBhcyBsaW5lYXJSaW5nQXJlYSB9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogTGluZWFyIHJpbmcgZ2VvbWV0cnkuIE9ubHkgdXNlZCBhcyBwYXJ0IG9mIHBvbHlnb247IGNhbm5vdCBiZSByZW5kZXJlZFxuICogb24gaXRzIG93bi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBMaW5lYXJSaW5nID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMaW5lYXJSaW5nLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPnxBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiAgICAgRm9yIGludGVybmFsIHVzZSwgZmxhdCBjb29yZGluYXRlcyBpbiBjb21iaW5hdGlvbiB3aXRoIGBvcHRfbGF5b3V0YCBhcmUgYWxzbyBhY2NlcHRlZC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMaW5lYXJSaW5nKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFfID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWF4RGVsdGFSZXZpc2lvbl8gPSAtMTtcbiAgICAgICAgaWYgKG9wdF9sYXlvdXQgIT09IHVuZGVmaW5lZCAmJiAhQXJyYXkuaXNBcnJheShjb29yZGluYXRlc1swXSkpIHtcbiAgICAgICAgICAgIF90aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRDb29yZGluYXRlcyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi8gKGNvb3JkaW5hdGVzKSwgb3B0X2xheW91dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlIGEgY29tcGxldGUgY29weSBvZiB0aGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7IUxpbmVhclJpbmd9IENsb25lLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCksIHRoaXMubGF5b3V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KG1heFNxdWFyZWREZWx0YSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduQ2xvc2VzdFBvaW50KHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBhcmVhIG9mIHRoZSBsaW5lYXIgcmluZyBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMaW5lYXJSaW5nLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ0FyZWEodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gQ29vcmRpbmF0ZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gaW5mbGF0ZUNvb3JkaW5hdGVzKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBzcXVhcmVkVG9sZXJhbmNlIFNxdWFyZWQgdG9sZXJhbmNlLlxuICAgICAqIEByZXR1cm4ge0xpbmVhclJpbmd9IFNpbXBsaWZpZWQgTGluZWFyUmluZy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuZ2V0U2ltcGxpZmllZEdlb21ldHJ5SW50ZXJuYWwgPSBmdW5jdGlvbiAoc3F1YXJlZFRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgc2ltcGxpZmllZEZsYXRDb29yZGluYXRlcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IGRvdWdsYXNQZXVja2VyKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGgsIHRoaXMuc3RyaWRlLCBzcXVhcmVkVG9sZXJhbmNlLCBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLCAwKTtcbiAgICAgICAgcmV0dXJuIG5ldyBMaW5lYXJSaW5nKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHlwZSBvZiB0aGlzIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vR2VvbWV0cnlUeXBlLmpzXCIpLmRlZmF1bHR9IEdlb21ldHJ5IHR5cGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuTElORUFSX1JJTkc7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTGluZWFyUmluZy5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjb29yZGluYXRlcyBvZiB0aGUgbGluZWFyIHJpbmcuXG4gICAgICogQHBhcmFtIHshQXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExpbmVhclJpbmcucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAxKTtcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZXModGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIGNvb3JkaW5hdGVzLCB0aGlzLnN0cmlkZSk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIExpbmVhclJpbmc7XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5leHBvcnQgZGVmYXVsdCBMaW5lYXJSaW5nO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TGluZWFyUmluZy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9HZW9tZXRyeVR5cGVcbiAqL1xuLyoqXG4gKiBUaGUgZ2VvbWV0cnkgdHlwZS4gT25lIG9mIGAnUG9pbnQnYCwgYCdMaW5lU3RyaW5nJ2AsIGAnTGluZWFyUmluZydgLFxuICogYCdQb2x5Z29uJ2AsIGAnTXVsdGlQb2ludCdgLCBgJ011bHRpTGluZVN0cmluZydgLCBgJ011bHRpUG9seWdvbidgLFxuICogYCdHZW9tZXRyeUNvbGxlY3Rpb24nYCwgYCdDaXJjbGUnYC5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQT0lOVDogJ1BvaW50JyxcbiAgICBMSU5FX1NUUklORzogJ0xpbmVTdHJpbmcnLFxuICAgIExJTkVBUl9SSU5HOiAnTGluZWFyUmluZycsXG4gICAgUE9MWUdPTjogJ1BvbHlnb24nLFxuICAgIE1VTFRJX1BPSU5UOiAnTXVsdGlQb2ludCcsXG4gICAgTVVMVElfTElORV9TVFJJTkc6ICdNdWx0aUxpbmVTdHJpbmcnLFxuICAgIE1VTFRJX1BPTFlHT046ICdNdWx0aVBvbHlnb24nLFxuICAgIEdFT01FVFJZX0NPTExFQ1RJT046ICdHZW9tZXRyeUNvbGxlY3Rpb24nLFxuICAgIENJUkNMRTogJ0NpcmNsZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9R2VvbWV0cnlUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9Qb2ludFxuICovXG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBTaW1wbGVHZW9tZXRyeSBmcm9tICcuL1NpbXBsZUdlb21ldHJ5LmpzJztcbmltcG9ydCB7IGNvbnRhaW5zWFksIGNyZWF0ZU9yVXBkYXRlRnJvbUNvb3JkaW5hdGUgfSBmcm9tICcuLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgZGVmbGF0ZUNvb3JkaW5hdGUgfSBmcm9tICcuL2ZsYXQvZGVmbGF0ZS5qcyc7XG5pbXBvcnQgeyBzcXVhcmVkRGlzdGFuY2UgYXMgc3F1YXJlZER4IH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvaW50IGdlb21ldHJ5LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFBvaW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQb2ludCwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZXMgQ29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUG9pbnQoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoY29vcmRpbmF0ZXMsIG9wdF9sYXlvdXQpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2UgYSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHshUG9pbnR9IENsb25lLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb2ludCA9IG5ldyBQb2ludCh0aGlzLmZsYXRDb29yZGluYXRlcy5zbGljZSgpLCB0aGlzLmxheW91dCk7XG4gICAgICAgIHBvaW50LmFwcGx5UHJvcGVydGllcyh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjbG9zZXN0UG9pbnQgQ2xvc2VzdCBwb2ludC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWluU3F1YXJlZERpc3RhbmNlIE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE1pbmltdW0gc3F1YXJlZCBkaXN0YW5jZS5cbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICB2YXIgc3F1YXJlZERpc3RhbmNlID0gc3F1YXJlZER4KHgsIHksIGZsYXRDb29yZGluYXRlc1swXSwgZmxhdENvb3JkaW5hdGVzWzFdKTtcbiAgICAgICAgaWYgKHNxdWFyZWREaXN0YW5jZSA8IG1pblNxdWFyZWREaXN0YW5jZSkge1xuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IHRoaXMuc3RyaWRlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpZGU7ICsraSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RQb2ludFtpXSA9IGZsYXRDb29yZGluYXRlc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsb3Nlc3RQb2ludC5sZW5ndGggPSBzdHJpZGU7XG4gICAgICAgICAgICByZXR1cm4gc3F1YXJlZERpc3RhbmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb29yZGluYXRlIG9mIHRoZSBwb2ludC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IENvb3JkaW5hdGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPyBbXSA6IHRoaXMuZmxhdENvb3JkaW5hdGVzLnNsaWNlKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmNvbXB1dGVFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZUZyb21Db29yZGluYXRlKHRoaXMuZmxhdENvb3JkaW5hdGVzLCBleHRlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0eXBlIG9mIHRoaXMgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9HZW9tZXRyeVR5cGUuanNcIikuZGVmYXVsdH0gR2VvbWV0cnkgdHlwZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmdldFR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBHZW9tZXRyeVR5cGUuUE9JTlQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLmludGVyc2VjdHNFeHRlbnQgPSBmdW5jdGlvbiAoZXh0ZW50KSB7XG4gICAgICAgIHJldHVybiBjb250YWluc1hZKGV4dGVudCwgdGhpcy5mbGF0Q29vcmRpbmF0ZXNbMF0sIHRoaXMuZmxhdENvb3JkaW5hdGVzWzFdKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUFycmF5PCo+fSBjb29yZGluYXRlcyBDb29yZGluYXRlcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vR2VvbWV0cnlMYXlvdXQuanNcIikuZGVmYXVsdH0gW29wdF9sYXlvdXRdIExheW91dC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnQucHJvdG90eXBlLnNldENvb3JkaW5hdGVzID0gZnVuY3Rpb24gKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0KSB7XG4gICAgICAgIHRoaXMuc2V0TGF5b3V0KG9wdF9sYXlvdXQsIGNvb3JkaW5hdGVzLCAwKTtcbiAgICAgICAgaWYgKCF0aGlzLmZsYXRDb29yZGluYXRlcykge1xuICAgICAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcy5sZW5ndGggPSBkZWZsYXRlQ29vcmRpbmF0ZSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICByZXR1cm4gUG9pbnQ7XG59KFNpbXBsZUdlb21ldHJ5KSk7XG5leHBvcnQgZGVmYXVsdCBQb2ludDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBvaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvY29udGFpbnNcbiAqL1xuaW1wb3J0IHsgZm9yRWFjaENvcm5lciB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyBleHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICB2YXIgb3V0c2lkZSA9IGZvckVhY2hDb3JuZXIoZXh0ZW50LCBcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICByZXR1cm4gIWxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgY29vcmRpbmF0ZVswXSwgY29vcmRpbmF0ZVsxXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuICFvdXRzaWRlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIHgsIHkpIHtcbiAgICAvLyBodHRwczovL2dlb21hbGdvcml0aG1zLmNvbS9hMDMtX2luY2x1c2lvbi5odG1sXG4gICAgLy8gQ29weXJpZ2h0IDIwMDAgc29mdFN1cmZlciwgMjAxMiBEYW4gU3VuZGF5XG4gICAgLy8gVGhpcyBjb2RlIG1heSBiZSBmcmVlbHkgdXNlZCBhbmQgbW9kaWZpZWQgZm9yIGFueSBwdXJwb3NlXG4gICAgLy8gcHJvdmlkaW5nIHRoYXQgdGhpcyBjb3B5cmlnaHQgbm90aWNlIGlzIGluY2x1ZGVkIHdpdGggaXQuXG4gICAgLy8gU29mdFN1cmZlciBtYWtlcyBubyB3YXJyYW50eSBmb3IgdGhpcyBjb2RlLCBhbmQgY2Fubm90IGJlIGhlbGRcbiAgICAvLyBsaWFibGUgZm9yIGFueSByZWFsIG9yIGltYWdpbmVkIGRhbWFnZSByZXN1bHRpbmcgZnJvbSBpdHMgdXNlLlxuICAgIC8vIFVzZXJzIG9mIHRoaXMgY29kZSBtdXN0IHZlcmlmeSBjb3JyZWN0bmVzcyBmb3IgdGhlaXIgYXBwbGljYXRpb24uXG4gICAgdmFyIHduID0gMDtcbiAgICB2YXIgeDEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlXTtcbiAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgMV07XG4gICAgZm9yICg7IG9mZnNldCA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICB2YXIgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XTtcbiAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIDFdO1xuICAgICAgICBpZiAoeTEgPD0geSkge1xuICAgICAgICAgICAgaWYgKHkyID4geSAmJiAoeDIgLSB4MSkgKiAoeSAtIHkxKSAtICh4IC0geDEpICogKHkyIC0geTEpID4gMCkge1xuICAgICAgICAgICAgICAgIHduKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoeTIgPD0geSAmJiAoeDIgLSB4MSkgKiAoeSAtIHkxKSAtICh4IC0geDEpICogKHkyIC0geTEpIDwgMCkge1xuICAgICAgICAgICAgd24tLTtcbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgICAgICB5MSA9IHkyO1xuICAgIH1cbiAgICByZXR1cm4gd24gIT09IDA7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSB7XG4gICAgaWYgKGVuZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKCFsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBDb250YWlucyAoeCwgeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nc3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCB4LCB5KSB7XG4gICAgaWYgKGVuZHNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaWYgKGxpbmVhclJpbmdzQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250YWlucy5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyc2VjdHNleHRlbnRcbiAqL1xuaW1wb3J0IHsgY29udGFpbnNFeHRlbnQsIGNyZWF0ZUVtcHR5LCBleHRlbmRGbGF0Q29vcmRpbmF0ZXMsIGludGVyc2VjdHMsIGludGVyc2VjdHNTZWdtZW50LCB9IGZyb20gJy4uLy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBmb3JFYWNoIGFzIGZvckVhY2hTZWdtZW50IH0gZnJvbSAnLi9zZWdtZW50cy5qcyc7XG5pbXBvcnQgeyBsaW5lYXJSaW5nQ29udGFpbnNFeHRlbnQsIGxpbmVhclJpbmdDb250YWluc1hZIH0gZnJvbSAnLi9jb250YWlucy5qcyc7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIHZhciBjb29yZGluYXRlc0V4dGVudCA9IGV4dGVuZEZsYXRDb29yZGluYXRlcyhjcmVhdGVFbXB0eSgpLCBmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgIGlmICghaW50ZXJzZWN0cyhleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjb250YWluc0V4dGVudChleHRlbnQsIGNvb3JkaW5hdGVzRXh0ZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGNvb3JkaW5hdGVzRXh0ZW50WzBdID49IGV4dGVudFswXSAmJiBjb29yZGluYXRlc0V4dGVudFsyXSA8PSBleHRlbnRbMl0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb29yZGluYXRlc0V4dGVudFsxXSA+PSBleHRlbnRbMV0gJiYgY29vcmRpbmF0ZXNFeHRlbnRbM10gPD0gZXh0ZW50WzNdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZm9yRWFjaFNlZ21lbnQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gcG9pbnQxIFN0YXJ0IHBvaW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBwb2ludDIgRW5kIHBvaW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgc2VnbWVudCBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QsXG4gICAgICogICAgIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIChwb2ludDEsIHBvaW50Mikge1xuICAgICAgICByZXR1cm4gaW50ZXJzZWN0c1NlZ21lbnQoZXh0ZW50LCBwb2ludDEsIHBvaW50Mik7XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZW5kcyBFbmRzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uLy4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIGV4dGVudCBpbnRlcnNlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcnNlY3RzTGluZVN0cmluZ0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBpZiAoaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNbaV0sIHN0cmlkZSwgZXh0ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBpZiAoaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMF0sIGV4dGVudFsxXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChsaW5lYXJSaW5nQ29udGFpbnNYWShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUsIGV4dGVudFswXSwgZXh0ZW50WzNdKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGxpbmVhclJpbmdDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSwgZXh0ZW50WzJdLCBleHRlbnRbMV0pKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAobGluZWFyUmluZ0NvbnRhaW5zWFkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBleHRlbnRbMl0sIGV4dGVudFszXSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q29vcmRpbmF0ZXMgRmxhdCBjb29yZGluYXRlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBlbmRzIEVuZHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgZXh0ZW50KSB7XG4gICAgaWYgKCFpbnRlcnNlY3RzTGluZWFyUmluZyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc1swXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGVuZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgaWYgKGxpbmVhclJpbmdDb250YWluc0V4dGVudChmbGF0Q29vcmRpbmF0ZXMsIGVuZHNbaSAtIDFdLCBlbmRzW2ldLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIGlmICghaW50ZXJzZWN0c0xpbmVTdHJpbmcoZmxhdENvb3JkaW5hdGVzLCBlbmRzW2kgLSAxXSwgZW5kc1tpXSwgc3RyaWRlLCBleHRlbnQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi8uLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZ2VvbWV0cnkgYW5kIHRoZSBleHRlbnQgaW50ZXJzZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW50ZXJzZWN0c0xpbmVhclJpbmdNdWx0aUFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzcywgc3RyaWRlLCBleHRlbnQpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmRzID0gZW5kc3NbaV07XG4gICAgICAgIGlmIChpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGV4dGVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJzZWN0c2V4dGVudC5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L3NlZ21lbnRzXG4gKi9cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBjYWxscyBgY2FsbGJhY2tgIGZvciBlYWNoIHNlZ21lbnQgb2YgdGhlIGZsYXQgY29vcmRpbmF0ZXNcbiAqIGFycmF5LiBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBhIHRydXRoeSB2YWx1ZSB0aGUgZnVuY3Rpb24gcmV0dXJucyB0aGF0XG4gKiB2YWx1ZSBpbW1lZGlhdGVseS4gT3RoZXJ3aXNlIHRoZSBmdW5jdGlvbiByZXR1cm5zIGBmYWxzZWAuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kIEVuZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi8uLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGUsIGltcG9ydChcIi4uLy4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZSk6IFR9IGNhbGxiYWNrIEZ1bmN0aW9uXG4gKiAgICAgY2FsbGVkIGZvciBlYWNoIHNlZ21lbnQuXG4gKiBAcmV0dXJuIHtUfGJvb2xlYW59IFZhbHVlLlxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvckVhY2goZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCBjYWxsYmFjaykge1xuICAgIHZhciBwb2ludDEgPSBbZmxhdENvb3JkaW5hdGVzW29mZnNldF0sIGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXV07XG4gICAgdmFyIHBvaW50MiA9IFtdO1xuICAgIHZhciByZXQ7XG4gICAgZm9yICg7IG9mZnNldCArIHN0cmlkZSA8IGVuZDsgb2Zmc2V0ICs9IHN0cmlkZSkge1xuICAgICAgICBwb2ludDJbMF0gPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgc3RyaWRlXTtcbiAgICAgICAgcG9pbnQyWzFdID0gZmxhdENvb3JkaW5hdGVzW29mZnNldCArIHN0cmlkZSArIDFdO1xuICAgICAgICByZXQgPSBjYWxsYmFjayhwb2ludDEsIHBvaW50Mik7XG4gICAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcG9pbnQxWzBdID0gcG9pbnQyWzBdO1xuICAgICAgICBwb2ludDFbMV0gPSBwb2ludDJbMV07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlZ21lbnRzLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvcmV2ZXJzZVxuICovXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb29yZGluYXRlcyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpIHtcbiAgICB3aGlsZSAob2Zmc2V0IDwgZW5kIC0gc3RyaWRlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaWRlOyArK2kpIHtcbiAgICAgICAgICAgIHZhciB0bXAgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV07XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgaV0gPSBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV07XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbZW5kIC0gc3RyaWRlICsgaV0gPSB0bXA7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcbiAgICAgICAgZW5kIC09IHN0cmlkZTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXZlcnNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9nZW9tL2ZsYXQvb3JpZW50XG4gKi9cbmltcG9ydCB7IGNvb3JkaW5hdGVzIGFzIHJldmVyc2VDb29yZGluYXRlcyB9IGZyb20gJy4vcmV2ZXJzZS5qcyc7XG4vKipcbiAqIElzIHRoZSBsaW5lYXIgcmluZyBvcmllbnRlZCBjbG9ja3dpc2UgaW4gYSBjb29yZGluYXRlIHN5c3RlbSB3aXRoIGEgYm90dG9tLWxlZnRcbiAqIGNvb3JkaW5hdGUgb3JpZ2luPyBGb3IgYSBjb29yZGluYXRlIHN5c3RlbSB3aXRoIGEgdG9wLWxlZnQgY29vcmRpbmF0ZSBvcmlnaW4sXG4gKiB0aGUgcmluZydzIG9yaWVudGF0aW9uIGlzIGNsb2Nrd2lzZSB3aGVuIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBmYWxzZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmQgRW5kLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBJcyBjbG9ja3dpc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKSB7XG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzExNjU2NDcvY2xvY2t3aXNlLW1ldGhvZCMxMTY1OTQzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL09TR2VvL2dkYWwvYmxvYi9tYXN0ZXIvZ2RhbC9vZ3Ivb2dybGluZWFycmluZy5jcHBcbiAgICB2YXIgZWRnZSA9IDA7XG4gICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZV07XG4gICAgdmFyIHkxID0gZmxhdENvb3JkaW5hdGVzW2VuZCAtIHN0cmlkZSArIDFdO1xuICAgIGZvciAoOyBvZmZzZXQgPCBlbmQ7IG9mZnNldCArPSBzdHJpZGUpIHtcbiAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XG4gICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcbiAgICAgICAgZWRnZSArPSAoeDIgLSB4MSkgKiAoeTIgKyB5MSk7XG4gICAgICAgIHgxID0geDI7XG4gICAgICAgIHkxID0geTI7XG4gICAgfVxuICAgIHJldHVybiBlZGdlID09PSAwID8gdW5kZWZpbmVkIDogZWRnZSA+IDA7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgQXJyYXkgb2YgZW5kIGluZGV4ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RyaWRlIFN0cmlkZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gVGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvblxuICogICAgIChjb3VudGVyLWNsb2Nrd2lzZSBleHRlcmlvciByaW5nIGFuZCBjbG9ja3dpc2UgaW50ZXJpb3IgcmluZ3MpLlxuICogQHJldHVybiB7Ym9vbGVhbn0gUmluZ3MgYXJlIGNvcnJlY3RseSBvcmllbnRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpbmVhclJpbmdzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHMsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gICAgdmFyIHJpZ2h0ID0gb3B0X3JpZ2h0ICE9PSB1bmRlZmluZWQgPyBvcHRfcmlnaHQgOiBmYWxzZTtcbiAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBlbmRzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgIHZhciBpc0Nsb2Nrd2lzZSA9IGxpbmVhclJpbmdJc0Nsb2Nrd2lzZShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kLCBzdHJpZGUpO1xuICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKChyaWdodCAmJiBpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiAhaXNDbG9ja3dpc2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKChyaWdodCAmJiAhaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgaXNDbG9ja3dpc2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGVuZDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgbGluZWFyIHJpbmdzIGFyZSBvcmllbnRlZC4gIEJ5IGRlZmF1bHQsIGxlZnQtaGFuZCBvcmllbnRhdGlvblxuICogaXMgdGVzdGVkIChmaXJzdCByaW5nIG11c3QgYmUgY2xvY2t3aXNlLCByZW1haW5pbmcgcmluZ3MgY291bnRlci1jbG9ja3dpc2UpLlxuICogVG8gdGVzdCBmb3IgcmlnaHQtaGFuZCBvcmllbnRhdGlvbiwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBBcnJheSBvZiBhcnJheSBvZiBlbmQgaW5kZXhlcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBUZXN0IGZvciByaWdodC1oYW5kIG9yaWVudGF0aW9uXG4gKiAgICAgKGNvdW50ZXItY2xvY2t3aXNlIGV4dGVyaW9yIHJpbmcgYW5kIGNsb2Nrd2lzZSBpbnRlcmlvciByaW5ncykuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSaW5ncyBhcmUgY29ycmVjdGx5IG9yaWVudGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGluZWFyUmluZ3NzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHNzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgdmFyIGVuZHMgPSBlbmRzc1tpXTtcbiAgICAgICAgaWYgKCFsaW5lYXJSaW5nc0FyZU9yaWVudGVkKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5kcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG9mZnNldCA9IGVuZHNbZW5kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogT3JpZW50IGNvb3JkaW5hdGVzIGluIGEgZmxhdCBhcnJheSBvZiBsaW5lYXIgcmluZ3MuICBCeSBkZWZhdWx0LCByaW5nc1xuICogYXJlIG9yaWVudGVkIGZvbGxvd2luZyB0aGUgbGVmdC1oYW5kIHJ1bGUgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLiAgVG8gb3JpZW50IGFjY29yZGluZyB0byB0aGVcbiAqIHJpZ2h0LWhhbmQgcnVsZSwgdXNlIHRoZSBgb3B0X3JpZ2h0YCBhcmd1bWVudC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0X3JpZ2h0XSBGb2xsb3cgdGhlIHJpZ2h0LWhhbmQgcnVsZSBmb3Igb3JpZW50YXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIG9wdF9yaWdodCkge1xuICAgIHZhciByaWdodCA9IG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkID8gb3B0X3JpZ2h0IDogZmFsc2U7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW2ldO1xuICAgICAgICB2YXIgaXNDbG9ja3dpc2UgPSBsaW5lYXJSaW5nSXNDbG9ja3dpc2UoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlKTtcbiAgICAgICAgdmFyIHJldmVyc2UgPSBpID09PSAwXG4gICAgICAgICAgICA/IChyaWdodCAmJiBpc0Nsb2Nrd2lzZSkgfHwgKCFyaWdodCAmJiAhaXNDbG9ja3dpc2UpXG4gICAgICAgICAgICA6IChyaWdodCAmJiAhaXNDbG9ja3dpc2UpIHx8ICghcmlnaHQgJiYgaXNDbG9ja3dpc2UpO1xuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgcmV2ZXJzZUNvb3JkaW5hdGVzKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgIH1cbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuLyoqXG4gKiBPcmllbnQgY29vcmRpbmF0ZXMgaW4gYSBmbGF0IGFycmF5IG9mIGxpbmVhciByaW5ncy4gIEJ5IGRlZmF1bHQsIHJpbmdzXG4gKiBhcmUgb3JpZW50ZWQgZm9sbG93aW5nIHRoZSBsZWZ0LWhhbmQgcnVsZSAoY2xvY2t3aXNlIGZvciBleHRlcmlvciBhbmRcbiAqIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuICBUbyBvcmllbnQgYWNjb3JkaW5nIHRvIHRoZVxuICogcmlnaHQtaGFuZCBydWxlLCB1c2UgdGhlIGBvcHRfcmlnaHRgIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gZmxhdENvb3JkaW5hdGVzIEZsYXQgY29vcmRpbmF0ZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldC5cbiAqIEBwYXJhbSB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IGVuZHNzIEFycmF5IG9mIGFycmF5IG9mIGVuZCBpbmRleGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0cmlkZSBTdHJpZGUuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmlnaHRdIEZvbGxvdyB0aGUgcmlnaHQtaGFuZCBydWxlIGZvciBvcmllbnRhdGlvbi5cbiAqIEByZXR1cm4ge251bWJlcn0gRW5kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gb3JpZW50TGluZWFyUmluZ3NBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3MsIHN0cmlkZSwgb3B0X3JpZ2h0KSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICBvZmZzZXQgPSBvcmllbnRMaW5lYXJSaW5ncyhmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kc3NbaV0sIHN0cmlkZSwgb3B0X3JpZ2h0KTtcbiAgICB9XG4gICAgcmV0dXJuIG9mZnNldDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9yaWVudC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2dlb20vUG9seWdvblxuICovXG5pbXBvcnQgR2VvbWV0cnlMYXlvdXQgZnJvbSAnLi9HZW9tZXRyeUxheW91dC5qcyc7XG5pbXBvcnQgR2VvbWV0cnlUeXBlIGZyb20gJy4vR2VvbWV0cnlUeXBlLmpzJztcbmltcG9ydCBMaW5lYXJSaW5nIGZyb20gJy4vTGluZWFyUmluZy5qcyc7XG5pbXBvcnQgUG9pbnQgZnJvbSAnLi9Qb2ludC5qcyc7XG5pbXBvcnQgU2ltcGxlR2VvbWV0cnkgZnJvbSAnLi9TaW1wbGVHZW9tZXRyeS5qcyc7XG5pbXBvcnQgeyBhcnJheU1heFNxdWFyZWREZWx0YSwgYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQgfSBmcm9tICcuL2ZsYXQvY2xvc2VzdC5qcyc7XG5pbXBvcnQgeyBjbG9zZXN0U3F1YXJlZERpc3RhbmNlWFksIGdldENlbnRlciB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheSB9IGZyb20gJy4vZmxhdC9kZWZsYXRlLmpzJztcbmltcG9ydCB7IGV4dGVuZCB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IGdldEludGVyaW9yUG9pbnRPZkFycmF5IH0gZnJvbSAnLi9mbGF0L2ludGVyaW9ycG9pbnQuanMnO1xuaW1wb3J0IHsgaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkgfSBmcm9tICcuL2ZsYXQvaW5mbGF0ZS5qcyc7XG5pbXBvcnQgeyBpbnRlcnNlY3RzTGluZWFyUmluZ0FycmF5IH0gZnJvbSAnLi9mbGF0L2ludGVyc2VjdHNleHRlbnQuanMnO1xuaW1wb3J0IHsgbGluZWFyUmluZ3NBcmVPcmllbnRlZCwgb3JpZW50TGluZWFyUmluZ3MgfSBmcm9tICcuL2ZsYXQvb3JpZW50LmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdzIGFzIGxpbmVhclJpbmdzQXJlYSB9IGZyb20gJy4vZmxhdC9hcmVhLmpzJztcbmltcG9ydCB7IGxpbmVhclJpbmdzQ29udGFpbnNYWSB9IGZyb20gJy4vZmxhdC9jb250YWlucy5qcyc7XG5pbXBvcnQgeyBtb2R1bG8gfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7IHF1YW50aXplQXJyYXkgfSBmcm9tICcuL2ZsYXQvc2ltcGxpZnkuanMnO1xuaW1wb3J0IHsgb2Zmc2V0IGFzIHNwaGVyZU9mZnNldCB9IGZyb20gJy4uL3NwaGVyZS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIFBvbHlnb24gZ2VvbWV0cnkuXG4gKlxuICogQGFwaVxuICovXG52YXIgUG9seWdvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUG9seWdvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFBcnJheTxBcnJheTxpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGU+PnwhQXJyYXk8bnVtYmVyPn0gY29vcmRpbmF0ZXNcbiAgICAgKiAgICAgQXJyYXkgb2YgbGluZWFyIHJpbmdzIHRoYXQgZGVmaW5lIHRoZSBwb2x5Z29uLiBUaGUgZmlyc3QgbGluZWFyIHJpbmcgb2YgdGhlXG4gICAgICogICAgIGFycmF5IGRlZmluZXMgdGhlIG91dGVyLWJvdW5kYXJ5IG9yIHN1cmZhY2Ugb2YgdGhlIHBvbHlnb24uIEVhY2ggc3Vic2VxdWVudFxuICAgICAqICAgICBsaW5lYXIgcmluZyBkZWZpbmVzIGEgaG9sZSBpbiB0aGUgc3VyZmFjZSBvZiB0aGUgcG9seWdvbi4gQSBsaW5lYXIgcmluZyBpc1xuICAgICAqICAgICBhbiBhcnJheSBvZiB2ZXJ0aWNlcycgY29vcmRpbmF0ZXMgd2hlcmUgdGhlIGZpcnN0IGNvb3JkaW5hdGUgYW5kIHRoZSBsYXN0IGFyZVxuICAgICAqICAgICBlcXVpdmFsZW50LiAoRm9yIGludGVybmFsIHVzZSwgZmxhdCBjb29yZGluYXRlcyBpbiBjb21iaW5hdGlvbiB3aXRoXG4gICAgICogICAgIGBvcHRfbGF5b3V0YCBhbmQgYG9wdF9lbmRzYCBhcmUgYWxzbyBhY2NlcHRlZC4pXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0dlb21ldHJ5TGF5b3V0LmpzXCIpLmRlZmF1bHR9IFtvcHRfbGF5b3V0XSBMYXlvdXQuXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2VuZHNdIEVuZHMgKGZvciBpbnRlcm5hbCB1c2Ugd2l0aCBmbGF0IGNvb3JkaW5hdGVzKS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2x5Z29uKGNvb3JkaW5hdGVzLCBvcHRfbGF5b3V0LCBvcHRfZW5kcykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbmRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZmxhdEludGVyaW9yUG9pbnRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YV8gPSAtMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IC0xO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkUmV2aXNpb25fID0gLTE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRfbGF5b3V0ICE9PSB1bmRlZmluZWQgJiYgb3B0X2VuZHMpIHtcbiAgICAgICAgICAgIF90aGlzLnNldEZsYXRDb29yZGluYXRlcyhvcHRfbGF5b3V0LCBcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn0gKi8gKGNvb3JkaW5hdGVzKSk7XG4gICAgICAgICAgICBfdGhpcy5lbmRzXyA9IG9wdF9lbmRzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMuc2V0Q29vcmRpbmF0ZXMoXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5PEFycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT4+fSAqLyAoY29vcmRpbmF0ZXMpLCBvcHRfbGF5b3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCB0aGUgcGFzc2VkIGxpbmVhciByaW5nIHRvIHRoaXMgcG9seWdvbi5cbiAgICAgKiBAcGFyYW0ge0xpbmVhclJpbmd9IGxpbmVhclJpbmcgTGluZWFyIHJpbmcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmFwcGVuZExpbmVhclJpbmcgPSBmdW5jdGlvbiAobGluZWFyUmluZykge1xuICAgICAgICBpZiAoIXRoaXMuZmxhdENvb3JkaW5hdGVzKSB7XG4gICAgICAgICAgICB0aGlzLmZsYXRDb29yZGluYXRlcyA9IGxpbmVhclJpbmcuZ2V0RmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVuZCh0aGlzLmZsYXRDb29yZGluYXRlcywgbGluZWFyUmluZy5nZXRGbGF0Q29vcmRpbmF0ZXMoKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbmRzXy5wdXNoKHRoaXMuZmxhdENvb3JkaW5hdGVzLmxlbmd0aCk7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSBhIGNvbXBsZXRlIGNvcHkgb2YgdGhlIGdlb21ldHJ5LlxuICAgICAqIEByZXR1cm4geyFQb2x5Z29ufSBDbG9uZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb2x5Z29uID0gbmV3IFBvbHlnb24odGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoKSwgdGhpcy5sYXlvdXQsIHRoaXMuZW5kc18uc2xpY2UoKSk7XG4gICAgICAgIHBvbHlnb24uYXBwbHlQcm9wZXJ0aWVzKHRoaXMpO1xuICAgICAgICByZXR1cm4gcG9seWdvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2xvc2VzdFBvaW50IENsb3Nlc3QgcG9pbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1pblNxdWFyZWREaXN0YW5jZSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW5pbXVtIHNxdWFyZWQgZGlzdGFuY2UuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuY2xvc2VzdFBvaW50WFkgPSBmdW5jdGlvbiAoeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpIHtcbiAgICAgICAgaWYgKG1pblNxdWFyZWREaXN0YW5jZSA8IGNsb3Nlc3RTcXVhcmVkRGlzdGFuY2VYWSh0aGlzLmdldEV4dGVudCgpLCB4LCB5KSkge1xuICAgICAgICAgICAgcmV0dXJuIG1pblNxdWFyZWREaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5tYXhEZWx0YVJldmlzaW9uXyAhPSB0aGlzLmdldFJldmlzaW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMubWF4RGVsdGFfID0gTWF0aC5zcXJ0KGFycmF5TWF4U3F1YXJlZERlbHRhKHRoaXMuZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgMCkpO1xuICAgICAgICAgICAgdGhpcy5tYXhEZWx0YVJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXNzaWduQ2xvc2VzdEFycmF5UG9pbnQodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB0aGlzLm1heERlbHRhXywgdHJ1ZSwgeCwgeSwgY2xvc2VzdFBvaW50LCBtaW5TcXVhcmVkRGlzdGFuY2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbnRhaW5zICh4LCB5KS5cbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5jb250YWluc1hZID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIGxpbmVhclJpbmdzQ29udGFpbnNYWSh0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCksIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCB4LCB5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgYXJlYSBvZiB0aGUgcG9seWdvbiBvbiBwcm9qZWN0ZWQgcGxhbmUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBBcmVhIChvbiBwcm9qZWN0ZWQgcGxhbmUpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRBcmVhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbGluZWFyUmluZ3NBcmVhKHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb29yZGluYXRlIGFycmF5IGZvciB0aGlzIGdlb21ldHJ5LiAgVGhpcyBhcnJheSBoYXMgdGhlIHN0cnVjdHVyZVxuICAgICAqIG9mIGEgR2VvSlNPTiBjb29yZGluYXRlIGFycmF5IGZvciBwb2x5Z29ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yaWdodF0gT3JpZW50IGNvb3JkaW5hdGVzIGFjY29yZGluZyB0byB0aGUgcmlnaHQtaGFuZFxuICAgICAqICAgICBydWxlIChjb3VudGVyLWNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNsb2Nrd2lzZSBmb3IgaW50ZXJpb3IgcmluZ3MpLlxuICAgICAqICAgICBJZiBgZmFsc2VgLCBjb29yZGluYXRlcyB3aWxsIGJlIG9yaWVudGVkIGFjY29yZGluZyB0byB0aGUgbGVmdC1oYW5kIHJ1bGVcbiAgICAgKiAgICAgKGNsb2Nrd2lzZSBmb3IgZXh0ZXJpb3IgYW5kIGNvdW50ZXItY2xvY2t3aXNlIGZvciBpbnRlcmlvciByaW5ncykuXG4gICAgICogICAgIEJ5IGRlZmF1bHQsIGNvb3JkaW5hdGUgb3JpZW50YXRpb24gd2lsbCBkZXBlbmQgb24gaG93IHRoZSBnZW9tZXRyeSB3YXNcbiAgICAgKiAgICAgY29uc3RydWN0ZWQuXG4gICAgICogQHJldHVybiB7QXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IENvb3JkaW5hdGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChvcHRfcmlnaHQpIHtcbiAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcztcbiAgICAgICAgaWYgKG9wdF9yaWdodCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldE9yaWVudGVkRmxhdENvb3JkaW5hdGVzKCkuc2xpY2UoKTtcbiAgICAgICAgICAgIG9yaWVudExpbmVhclJpbmdzKGZsYXRDb29yZGluYXRlcywgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIG9wdF9yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5mbGF0ZUNvb3JkaW5hdGVzQXJyYXkoZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBFbmRzLlxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldEVuZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVuZHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gSW50ZXJpb3IgcG9pbnQuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0RmxhdEludGVyaW9yUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmZsYXRJbnRlcmlvclBvaW50UmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdmFyIGZsYXRDZW50ZXIgPSBnZXRDZW50ZXIodGhpcy5nZXRFeHRlbnQoKSk7XG4gICAgICAgICAgICB0aGlzLmZsYXRJbnRlcmlvclBvaW50XyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KHRoaXMuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMoKSwgMCwgdGhpcy5lbmRzXywgdGhpcy5zdHJpZGUsIGZsYXRDZW50ZXIsIDApO1xuICAgICAgICAgICAgdGhpcy5mbGF0SW50ZXJpb3JQb2ludFJldmlzaW9uXyA9IHRoaXMuZ2V0UmV2aXNpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5mbGF0SW50ZXJpb3JQb2ludF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYW4gaW50ZXJpb3IgcG9pbnQgb2YgdGhlIHBvbHlnb24uXG4gICAgICogQHJldHVybiB7UG9pbnR9IEludGVyaW9yIHBvaW50IGFzIFhZTSBjb29yZGluYXRlLCB3aGVyZSBNIGlzIHRoZVxuICAgICAqIGxlbmd0aCBvZiB0aGUgaG9yaXpvbnRhbCBpbnRlcnNlY3Rpb24gdGhhdCB0aGUgcG9pbnQgYmVsb25ncyB0by5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLmdldEZsYXRJbnRlcmlvclBvaW50KCksIEdlb21ldHJ5TGF5b3V0LlhZTSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG51bWJlciBvZiByaW5ncyBvZiB0aGUgcG9seWdvbiwgIHRoaXMgaW5jbHVkZXMgdGhlIGV4dGVyaW9yXG4gICAgICogcmluZyBhbmQgYW55IGludGVyaW9yIHJpbmdzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOdW1iZXIgb2YgcmluZ3MuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5kc18ubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBOdGggbGluZWFyIHJpbmcgb2YgdGhlIHBvbHlnb24gZ2VvbWV0cnkuIFJldHVybiBgbnVsbGAgaWYgdGhlXG4gICAgICogZ2l2ZW4gaW5kZXggaXMgb3V0IG9mIHJhbmdlLlxuICAgICAqIFRoZSBleHRlcmlvciBsaW5lYXIgcmluZyBpcyBhdmFpbGFibGUgYXQgaW5kZXggYDBgIGFuZCB0aGUgaW50ZXJpb3IgcmluZ3NcbiAgICAgKiBhdCBpbmRleCBgMWAgYW5kIGJleW9uZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcmV0dXJuIHtMaW5lYXJSaW5nfSBMaW5lYXIgcmluZy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZyA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuZW5kc18ubGVuZ3RoIDw9IGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IExpbmVhclJpbmcodGhpcy5mbGF0Q29vcmRpbmF0ZXMuc2xpY2UoaW5kZXggPT09IDAgPyAwIDogdGhpcy5lbmRzX1tpbmRleCAtIDFdLCB0aGlzLmVuZHNfW2luZGV4XSksIHRoaXMubGF5b3V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbGluZWFyIHJpbmdzIG9mIHRoZSBwb2x5Z29uLlxuICAgICAqIEByZXR1cm4ge0FycmF5PExpbmVhclJpbmc+fSBMaW5lYXIgcmluZ3MuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBvbHlnb24ucHJvdG90eXBlLmdldExpbmVhclJpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5b3V0ID0gdGhpcy5sYXlvdXQ7XG4gICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmZsYXRDb29yZGluYXRlcztcbiAgICAgICAgdmFyIGVuZHMgPSB0aGlzLmVuZHNfO1xuICAgICAgICB2YXIgbGluZWFyUmluZ3MgPSBbXTtcbiAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGVuZHMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGVuZCA9IGVuZHNbaV07XG4gICAgICAgICAgICB2YXIgbGluZWFyUmluZyA9IG5ldyBMaW5lYXJSaW5nKGZsYXRDb29yZGluYXRlcy5zbGljZShvZmZzZXQsIGVuZCksIGxheW91dCk7XG4gICAgICAgICAgICBsaW5lYXJSaW5ncy5wdXNoKGxpbmVhclJpbmcpO1xuICAgICAgICAgICAgb2Zmc2V0ID0gZW5kO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5lYXJSaW5ncztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IE9yaWVudGVkIGZsYXQgY29vcmRpbmF0ZXMuXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuZ2V0T3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm9yaWVudGVkUmV2aXNpb25fICE9IHRoaXMuZ2V0UmV2aXNpb24oKSkge1xuICAgICAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IHRoaXMuZmxhdENvb3JkaW5hdGVzO1xuICAgICAgICAgICAgaWYgKGxpbmVhclJpbmdzQXJlT3JpZW50ZWQoZmxhdENvb3JkaW5hdGVzLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudGVkRmxhdENvb3JkaW5hdGVzXyA9IGZsYXRDb29yZGluYXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfID0gZmxhdENvb3JkaW5hdGVzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18ubGVuZ3RoID0gb3JpZW50TGluZWFyUmluZ3ModGhpcy5vcmllbnRlZEZsYXRDb29yZGluYXRlc18sIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3JpZW50ZWRSZXZpc2lvbl8gPSB0aGlzLmdldFJldmlzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZW50ZWRGbGF0Q29vcmRpbmF0ZXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNxdWFyZWRUb2xlcmFuY2UgU3F1YXJlZCB0b2xlcmFuY2UuXG4gICAgICogQHJldHVybiB7UG9seWdvbn0gU2ltcGxpZmllZCBQb2x5Z29uLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRTaW1wbGlmaWVkR2VvbWV0cnlJbnRlcm5hbCA9IGZ1bmN0aW9uIChzcXVhcmVkVG9sZXJhbmNlKSB7XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIHZhciBzaW1wbGlmaWVkRW5kcyA9IFtdO1xuICAgICAgICBzaW1wbGlmaWVkRmxhdENvb3JkaW5hdGVzLmxlbmd0aCA9IHF1YW50aXplQXJyYXkodGhpcy5mbGF0Q29vcmRpbmF0ZXMsIDAsIHRoaXMuZW5kc18sIHRoaXMuc3RyaWRlLCBNYXRoLnNxcnQoc3F1YXJlZFRvbGVyYW5jZSksIHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIDAsIHNpbXBsaWZpZWRFbmRzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2x5Z29uKHNpbXBsaWZpZWRGbGF0Q29vcmRpbmF0ZXMsIEdlb21ldHJ5TGF5b3V0LlhZLCBzaW1wbGlmaWVkRW5kcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHR5cGUgb2YgdGhpcyBnZW9tZXRyeS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL0dlb21ldHJ5VHlwZS5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeSB0eXBlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5nZXRUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gR2VvbWV0cnlUeXBlLlBPTFlHT047XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRoZSBnZW9tZXRyeSBhbmQgdGhlIHBhc3NlZCBleHRlbnQgaW50ZXJzZWN0LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGdlb21ldHJ5IGFuZCB0aGUgZXh0ZW50IGludGVyc2VjdC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9seWdvbi5wcm90b3R5cGUuaW50ZXJzZWN0c0V4dGVudCA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdHNMaW5lYXJSaW5nQXJyYXkodGhpcy5nZXRPcmllbnRlZEZsYXRDb29yZGluYXRlcygpLCAwLCB0aGlzLmVuZHNfLCB0aGlzLnN0cmlkZSwgZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIHBvbHlnb24uXG4gICAgICogQHBhcmFtIHshQXJyYXk8QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPj59IGNvb3JkaW5hdGVzIENvb3JkaW5hdGVzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9HZW9tZXRyeUxheW91dC5qc1wiKS5kZWZhdWx0fSBbb3B0X2xheW91dF0gTGF5b3V0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2x5Z29uLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcyA9IGZ1bmN0aW9uIChjb29yZGluYXRlcywgb3B0X2xheW91dCkge1xuICAgICAgICB0aGlzLnNldExheW91dChvcHRfbGF5b3V0LCBjb29yZGluYXRlcywgMik7XG4gICAgICAgIGlmICghdGhpcy5mbGF0Q29vcmRpbmF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuZmxhdENvb3JkaW5hdGVzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVuZHMgPSBkZWZsYXRlQ29vcmRpbmF0ZXNBcnJheSh0aGlzLmZsYXRDb29yZGluYXRlcywgMCwgY29vcmRpbmF0ZXMsIHRoaXMuc3RyaWRlLCB0aGlzLmVuZHNfKTtcbiAgICAgICAgdGhpcy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoID0gZW5kcy5sZW5ndGggPT09IDAgPyAwIDogZW5kc1tlbmRzLmxlbmd0aCAtIDFdO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBQb2x5Z29uO1xufShTaW1wbGVHZW9tZXRyeSkpO1xuZXhwb3J0IGRlZmF1bHQgUG9seWdvbjtcbi8qKlxuICogQ3JlYXRlIGFuIGFwcHJveGltYXRpb24gb2YgYSBjaXJjbGUgb24gdGhlIHN1cmZhY2Ugb2YgYSBzcGhlcmUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY2VudGVyIENlbnRlciAoYFtsb24sIGxhdF1gIGluIGRlZ3JlZXMpLlxuICogQHBhcmFtIHtudW1iZXJ9IHJhZGl1cyBUaGUgZ3JlYXQtY2lyY2xlIGRpc3RhbmNlIGZyb20gdGhlIGNlbnRlciB0b1xuICogICAgIHRoZSBwb2x5Z29uIHZlcnRpY2VzIGluIG1ldGVycy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X25dIE9wdGlvbmFsIG51bWJlciBvZiB2ZXJ0aWNlcyBmb3IgdGhlIHJlc3VsdGluZ1xuICogICAgIHBvbHlnb24uIERlZmF1bHQgaXMgYDMyYC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3NwaGVyZVJhZGl1c10gT3B0aW9uYWwgcmFkaXVzIGZvciB0aGUgc3BoZXJlIChkZWZhdWx0cyB0b1xuICogICAgIHRoZSBFYXJ0aCdzIG1lYW4gcmFkaXVzIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQpLlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIFwiY2lyY3VsYXJcIiBwb2x5Z29uLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2lyY3VsYXIoY2VudGVyLCByYWRpdXMsIG9wdF9uLCBvcHRfc3BoZXJlUmFkaXVzKSB7XG4gICAgdmFyIG4gPSBvcHRfbiA/IG9wdF9uIDogMzI7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICBleHRlbmQoZmxhdENvb3JkaW5hdGVzLCBzcGhlcmVPZmZzZXQoY2VudGVyLCByYWRpdXMsICgyICogTWF0aC5QSSAqIGkpIC8gbiwgb3B0X3NwaGVyZVJhZGl1cykpO1xuICAgIH1cbiAgICBmbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0sIGZsYXRDb29yZGluYXRlc1sxXSk7XG4gICAgcmV0dXJuIG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgR2VvbWV0cnlMYXlvdXQuWFksIFtcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzLmxlbmd0aCxcbiAgICBdKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgcG9seWdvbiBmcm9tIGFuIGV4dGVudC4gVGhlIGxheW91dCB1c2VkIGlzIGBYWWAuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBUaGUgZXh0ZW50LlxuICogQHJldHVybiB7UG9seWdvbn0gVGhlIHBvbHlnb24uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXh0ZW50KGV4dGVudCkge1xuICAgIHZhciBtaW5YID0gZXh0ZW50WzBdO1xuICAgIHZhciBtaW5ZID0gZXh0ZW50WzFdO1xuICAgIHZhciBtYXhYID0gZXh0ZW50WzJdO1xuICAgIHZhciBtYXhZID0gZXh0ZW50WzNdO1xuICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBbXG4gICAgICAgIG1pblgsXG4gICAgICAgIG1pblksXG4gICAgICAgIG1pblgsXG4gICAgICAgIG1heFksXG4gICAgICAgIG1heFgsXG4gICAgICAgIG1heFksXG4gICAgICAgIG1heFgsXG4gICAgICAgIG1pblksXG4gICAgICAgIG1pblgsXG4gICAgICAgIG1pblksXG4gICAgXTtcbiAgICByZXR1cm4gbmV3IFBvbHlnb24oZmxhdENvb3JkaW5hdGVzLCBHZW9tZXRyeUxheW91dC5YWSwgW1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoLFxuICAgIF0pO1xufVxuLyoqXG4gKiBDcmVhdGUgYSByZWd1bGFyIHBvbHlnb24gZnJvbSBhIGNpcmNsZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9DaXJjbGUuanNcIikuZGVmYXVsdH0gY2lyY2xlIENpcmNsZSBnZW9tZXRyeS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3NpZGVzXSBOdW1iZXIgb2Ygc2lkZXMgb2YgdGhlIHBvbHlnb24uIERlZmF1bHQgaXMgMzIuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9hbmdsZV0gU3RhcnQgYW5nbGUgZm9yIHRoZSBmaXJzdCB2ZXJ0ZXggb2YgdGhlIHBvbHlnb24gaW5cbiAqICAgICBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zLiAwIG1lYW5zIEVhc3QuIERlZmF1bHQgaXMgMC5cbiAqIEByZXR1cm4ge1BvbHlnb259IFBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tQ2lyY2xlKGNpcmNsZSwgb3B0X3NpZGVzLCBvcHRfYW5nbGUpIHtcbiAgICB2YXIgc2lkZXMgPSBvcHRfc2lkZXMgPyBvcHRfc2lkZXMgOiAzMjtcbiAgICB2YXIgc3RyaWRlID0gY2lyY2xlLmdldFN0cmlkZSgpO1xuICAgIHZhciBsYXlvdXQgPSBjaXJjbGUuZ2V0TGF5b3V0KCk7XG4gICAgdmFyIGNlbnRlciA9IGNpcmNsZS5nZXRDZW50ZXIoKTtcbiAgICB2YXIgYXJyYXlMZW5ndGggPSBzdHJpZGUgKiAoc2lkZXMgKyAxKTtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KGFycmF5TGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5TGVuZ3RoOyBpICs9IHN0cmlkZSkge1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaV0gPSAwO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbaSArIDFdID0gMDtcbiAgICAgICAgZm9yICh2YXIgaiA9IDI7IGogPCBzdHJpZGU7IGorKykge1xuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzW2kgKyBqXSA9IGNlbnRlcltqXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgZW5kcyA9IFtmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoXTtcbiAgICB2YXIgcG9seWdvbiA9IG5ldyBQb2x5Z29uKGZsYXRDb29yZGluYXRlcywgbGF5b3V0LCBlbmRzKTtcbiAgICBtYWtlUmVndWxhcihwb2x5Z29uLCBjZW50ZXIsIGNpcmNsZS5nZXRSYWRpdXMoKSwgb3B0X2FuZ2xlKTtcbiAgICByZXR1cm4gcG9seWdvbjtcbn1cbi8qKlxuICogTW9kaWZ5IHRoZSBjb29yZGluYXRlcyBvZiBhIHBvbHlnb24gdG8gbWFrZSBpdCBhIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7UG9seWdvbn0gcG9seWdvbiBQb2x5Z29uIGdlb21ldHJ5LlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIgb2YgdGhlIHJlZ3VsYXIgcG9seWdvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXMgUmFkaXVzIG9mIHRoZSByZWd1bGFyIHBvbHlnb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9hbmdsZV0gU3RhcnQgYW5nbGUgZm9yIHRoZSBmaXJzdCB2ZXJ0ZXggb2YgdGhlIHBvbHlnb24gaW5cbiAqICAgICBjb3VudGVyLWNsb2Nrd2lzZSByYWRpYW5zLiAwIG1lYW5zIEVhc3QuIERlZmF1bHQgaXMgMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1ha2VSZWd1bGFyKHBvbHlnb24sIGNlbnRlciwgcmFkaXVzLCBvcHRfYW5nbGUpIHtcbiAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gcG9seWdvbi5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICB2YXIgc3RyaWRlID0gcG9seWdvbi5nZXRTdHJpZGUoKTtcbiAgICB2YXIgc2lkZXMgPSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC8gc3RyaWRlIC0gMTtcbiAgICB2YXIgc3RhcnRBbmdsZSA9IG9wdF9hbmdsZSA/IG9wdF9hbmdsZSA6IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gc2lkZXM7ICsraSkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gaSAqIHN0cmlkZTtcbiAgICAgICAgdmFyIGFuZ2xlID0gc3RhcnRBbmdsZSArIChtb2R1bG8oaSwgc2lkZXMpICogMiAqIE1hdGguUEkpIC8gc2lkZXM7XG4gICAgICAgIGZsYXRDb29yZGluYXRlc1tvZmZzZXRdID0gY2VudGVyWzBdICsgcmFkaXVzICogTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV0gPSBjZW50ZXJbMV0gKyByYWRpdXMgKiBNYXRoLnNpbihhbmdsZSk7XG4gICAgfVxuICAgIHBvbHlnb24uY2hhbmdlZCgpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UG9seWdvbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZ2VvbS9mbGF0L2ludGVyaW9ycG9pbnRcbiAqL1xuaW1wb3J0IHsgbGluZWFyUmluZ3NDb250YWluc1hZIH0gZnJvbSAnLi9jb250YWlucy5qcyc7XG5pbXBvcnQgeyBudW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uIH0gZnJvbSAnLi4vLi4vYXJyYXkuanMnO1xuLyoqXG4gKiBDYWxjdWxhdGVzIGEgcG9pbnQgdGhhdCBpcyBsaWtlbHkgdG8gbGllIGluIHRoZSBpbnRlcmlvciBvZiB0aGUgbGluZWFyIHJpbmdzLlxuICogSW5zcGlyZWQgYnkgSlRTJ3MgY29tLnZpdmlkc29sdXRpb25zLmp0cy5nZW9tLkdlb21ldHJ5I2dldEludGVyaW9yUG9pbnQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGVuZHMgRW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gZmxhdENlbnRlcnNPZmZzZXQgRmxhdCBjZW50ZXIgb2Zmc2V0LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBbb3B0X2Rlc3RdIERlc3RpbmF0aW9uLlxuICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gRGVzdGluYXRpb24gcG9pbnQgYXMgWFlNIGNvb3JkaW5hdGUsIHdoZXJlIE0gaXMgdGhlXG4gKiBsZW5ndGggb2YgdGhlIGhvcml6b250YWwgaW50ZXJzZWN0aW9uIHRoYXQgdGhlIHBvaW50IGJlbG9uZ3MgdG8uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnRlcmlvclBvaW50T2ZBcnJheShmbGF0Q29vcmRpbmF0ZXMsIG9mZnNldCwgZW5kcywgc3RyaWRlLCBmbGF0Q2VudGVycywgZmxhdENlbnRlcnNPZmZzZXQsIG9wdF9kZXN0KSB7XG4gICAgdmFyIGksIGlpLCB4LCB4MSwgeDIsIHkxLCB5MjtcbiAgICB2YXIgeSA9IGZsYXRDZW50ZXJzW2ZsYXRDZW50ZXJzT2Zmc2V0ICsgMV07XG4gICAgLyoqIEB0eXBlIHtBcnJheTxudW1iZXI+fSAqL1xuICAgIHZhciBpbnRlcnNlY3Rpb25zID0gW107XG4gICAgLy8gQ2FsY3VsYXRlIGludGVyc2VjdGlvbnMgd2l0aCB0aGUgaG9yaXpvbnRhbCBsaW5lXG4gICAgZm9yICh2YXIgciA9IDAsIHJyID0gZW5kcy5sZW5ndGg7IHIgPCBycjsgKytyKSB7XG4gICAgICAgIHZhciBlbmQgPSBlbmRzW3JdO1xuICAgICAgICB4MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xuICAgICAgICB5MSA9IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGUgKyAxXTtcbiAgICAgICAgZm9yIChpID0gb2Zmc2V0OyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgeDIgPSBmbGF0Q29vcmRpbmF0ZXNbaV07XG4gICAgICAgICAgICB5MiA9IGZsYXRDb29yZGluYXRlc1tpICsgMV07XG4gICAgICAgICAgICBpZiAoKHkgPD0geTEgJiYgeTIgPD0geSkgfHwgKHkxIDw9IHkgJiYgeSA8PSB5MikpIHtcbiAgICAgICAgICAgICAgICB4ID0gKCh5IC0geTEpIC8gKHkyIC0geTEpKSAqICh4MiAtIHgxKSArIHgxO1xuICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbnMucHVzaCh4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHgxID0geDI7XG4gICAgICAgICAgICB5MSA9IHkyO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEZpbmQgdGhlIGxvbmdlc3Qgc2VnbWVudCBvZiB0aGUgaG9yaXpvbnRhbCBsaW5lIHRoYXQgaGFzIGl0cyBjZW50ZXIgcG9pbnRcbiAgICAvLyBpbnNpZGUgdGhlIGxpbmVhciByaW5nLlxuICAgIHZhciBwb2ludFggPSBOYU47XG4gICAgdmFyIG1heFNlZ21lbnRMZW5ndGggPSAtSW5maW5pdHk7XG4gICAgaW50ZXJzZWN0aW9ucy5zb3J0KG51bWJlclNhZmVDb21wYXJlRnVuY3Rpb24pO1xuICAgIHgxID0gaW50ZXJzZWN0aW9uc1swXTtcbiAgICBmb3IgKGkgPSAxLCBpaSA9IGludGVyc2VjdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB4MiA9IGludGVyc2VjdGlvbnNbaV07XG4gICAgICAgIHZhciBzZWdtZW50TGVuZ3RoID0gTWF0aC5hYnMoeDIgLSB4MSk7XG4gICAgICAgIGlmIChzZWdtZW50TGVuZ3RoID4gbWF4U2VnbWVudExlbmd0aCkge1xuICAgICAgICAgICAgeCA9ICh4MSArIHgyKSAvIDI7XG4gICAgICAgICAgICBpZiAobGluZWFyUmluZ3NDb250YWluc1hZKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIHgsIHkpKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRYID0geDtcbiAgICAgICAgICAgICAgICBtYXhTZWdtZW50TGVuZ3RoID0gc2VnbWVudExlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB4MSA9IHgyO1xuICAgIH1cbiAgICBpZiAoaXNOYU4ocG9pbnRYKSkge1xuICAgICAgICAvLyBUaGVyZSBpcyBubyBob3Jpem9udGFsIGxpbmUgdGhhdCBoYXMgaXRzIGNlbnRlciBwb2ludCBpbnNpZGUgdGhlIGxpbmVhclxuICAgICAgICAvLyByaW5nLiAgVXNlIHRoZSBjZW50ZXIgb2YgdGhlIHRoZSBsaW5lYXIgcmluZydzIGV4dGVudC5cbiAgICAgICAgcG9pbnRYID0gZmxhdENlbnRlcnNbZmxhdENlbnRlcnNPZmZzZXRdO1xuICAgIH1cbiAgICBpZiAob3B0X2Rlc3QpIHtcbiAgICAgICAgb3B0X2Rlc3QucHVzaChwb2ludFgsIHksIG1heFNlZ21lbnRMZW5ndGgpO1xuICAgICAgICByZXR1cm4gb3B0X2Rlc3Q7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW3BvaW50WCwgeSwgbWF4U2VnbWVudExlbmd0aF07XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IGZsYXRDb29yZGluYXRlcyBGbGF0IGNvb3JkaW5hdGVzLlxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBPZmZzZXQuXG4gKiBAcGFyYW0ge0FycmF5PEFycmF5PG51bWJlcj4+fSBlbmRzcyBFbmRzcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdHJpZGUgU3RyaWRlLlxuICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBmbGF0Q2VudGVycyBGbGF0IGNlbnRlcnMuXG4gKiBAcmV0dXJuIHtBcnJheTxudW1iZXI+fSBJbnRlcmlvciBwb2ludHMgYXMgWFlNIGNvb3JkaW5hdGVzLCB3aGVyZSBNIGlzIHRoZVxuICogbGVuZ3RoIG9mIHRoZSBob3Jpem9udGFsIGludGVyc2VjdGlvbiB0aGF0IHRoZSBwb2ludCBiZWxvbmdzIHRvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SW50ZXJpb3JQb2ludHNPZk11bHRpQXJyYXkoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZHNzLCBzdHJpZGUsIGZsYXRDZW50ZXJzKSB7XG4gICAgdmFyIGludGVyaW9yUG9pbnRzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZW5kc3MubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgZW5kcyA9IGVuZHNzW2ldO1xuICAgICAgICBpbnRlcmlvclBvaW50cyA9IGdldEludGVyaW9yUG9pbnRPZkFycmF5KGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmRzLCBzdHJpZGUsIGZsYXRDZW50ZXJzLCAyICogaSwgaW50ZXJpb3JQb2ludHMpO1xuICAgICAgICBvZmZzZXQgPSBlbmRzW2VuZHMubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBpbnRlcmlvclBvaW50cztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyaW9ycG9pbnQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9WaWV3XG4gKi9cbmltcG9ydCBCYXNlT2JqZWN0IGZyb20gJy4vT2JqZWN0LmpzJztcbmltcG9ydCBHZW9tZXRyeVR5cGUgZnJvbSAnLi9nZW9tL0dlb21ldHJ5VHlwZS5qcyc7XG5pbXBvcnQgVW5pdHMgZnJvbSAnLi9wcm9qL1VuaXRzLmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCBWaWV3UHJvcGVydHkgZnJvbSAnLi9WaWV3UHJvcGVydHkuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGNyZWF0ZVByb2plY3Rpb24sIGZyb21Vc2VyQ29vcmRpbmF0ZSwgZnJvbVVzZXJFeHRlbnQsIGdldFVzZXJQcm9qZWN0aW9uLCB0b1VzZXJDb29yZGluYXRlLCB0b1VzZXJFeHRlbnQsIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhZGQgYXMgYWRkQ29vcmRpbmF0ZSwgZXF1YWxzIGFzIGNvb3JkaW5hdGVzRXF1YWwsIHJvdGF0ZSBhcyByb3RhdGVDb29yZGluYXRlLCB9IGZyb20gJy4vY29vcmRpbmF0ZS5qcyc7XG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgbm9uZSBhcyBjZW50ZXJOb25lLCBjcmVhdGVFeHRlbnQgfSBmcm9tICcuL2NlbnRlcmNvbnN0cmFpbnQuanMnO1xuaW1wb3J0IHsgY2xhbXAsIG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9OLCBjcmVhdGVTbmFwVG9aZXJvLCBkaXNhYmxlLCBub25lIGFzIHJvdGF0aW9uTm9uZSwgfSBmcm9tICcuL3JvdGF0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBjcmVhdGVTbmFwVG9Qb3dlciwgY3JlYXRlU25hcFRvUmVzb2x1dGlvbnMsIH0gZnJvbSAnLi9yZXNvbHV0aW9uY29uc3RyYWludC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgZXF1YWxzIH0gZnJvbSAnLi9jb29yZGluYXRlLmpzJztcbmltcG9ydCB7IGdldENlbnRlciwgZ2V0Rm9yVmlld0FuZFNpemUsIGdldEhlaWdodCwgZ2V0V2lkdGgsIGlzRW1wdHksIH0gZnJvbSAnLi9leHRlbnQuanMnO1xuaW1wb3J0IHsgaW5BbmRPdXQgfSBmcm9tICcuL2Vhc2luZy5qcyc7XG5pbXBvcnQgeyBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4vYXJyYXkuanMnO1xuaW1wb3J0IHsgZnJvbUV4dGVudCBhcyBwb2x5Z29uRnJvbUV4dGVudCB9IGZyb20gJy4vZ2VvbS9Qb2x5Z29uLmpzJztcbi8qKlxuICogQW4gYW5pbWF0aW9uIGNvbmZpZ3VyYXRpb25cbiAqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBbmltYXRpb25cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtzb3VyY2VDZW50ZXJdIFNvdXJjZSBjZW50ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbdGFyZ2V0Q2VudGVyXSBUYXJnZXQgY2VudGVyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzb3VyY2VSZXNvbHV0aW9uXSBTb3VyY2UgcmVzb2x1dGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGFyZ2V0UmVzb2x1dGlvbl0gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NvdXJjZVJvdGF0aW9uXSBTb3VyY2Ugcm90YXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RhcmdldFJvdGF0aW9uXSBUYXJnZXQgcm90YXRpb24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbYW5jaG9yXSBBbmNob3IuXG4gKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnQgU3RhcnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gZHVyYXRpb24gRHVyYXRpb24uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGNvbXBsZXRlIENvbXBsZXRlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihudW1iZXIpOm51bWJlcn0gZWFzaW5nIEVhc2luZy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6dm9pZH0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQ29uc3RyYWludHNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jZW50ZXJjb25zdHJhaW50LmpzXCIpLlR5cGV9IGNlbnRlciBDZW50ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcmVzb2x1dGlvbmNvbnN0cmFpbnQuanNcIikuVHlwZX0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSByb3RhdGlvbiBSb3RhdGlvbi5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaXRPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbc2l6ZV0gVGhlIHNpemUgaW4gcGl4ZWxzIG9mIHRoZSBib3ggdG8gZml0XG4gKiB0aGUgZXh0ZW50IGludG8uIERlZmF1bHQgaXMgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgZmlyc3QgbWFwIGluIHRoZSBET00gdGhhdFxuICogdXNlcyB0aGlzIHZpZXcsIG9yIGBbMTAwLCAxMDBdYCBpZiBubyBzdWNoIG1hcCBpcyBmb3VuZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IFtwYWRkaW5nPVswLCAwLCAwLCAwXV0gUGFkZGluZyAoaW4gcGl4ZWxzKSB0byBiZVxuICogY2xlYXJlZCBpbnNpZGUgdGhlIHZpZXcuIFZhbHVlcyBpbiB0aGUgYXJyYXkgYXJlIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdFxuICogcGFkZGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW25lYXJlc3Q9ZmFsc2VdIElmIHRoZSB2aWV3IGBjb25zdHJhaW5SZXNvbHV0aW9uYCBvcHRpb24gaXMgYHRydWVgLFxuICogZ2V0IHRoZSBuZWFyZXN0IGV4dGVudCBpbnN0ZWFkIG9mIHRoZSBjbG9zZXN0IHRoYXQgYWN0dWFsbHkgZml0cyB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbj0wXSBNaW5pbXVtIHJlc29sdXRpb24gdGhhdCB3ZSB6b29tIHRvLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgdGhhdCB3ZSB6b29tIHRvLiBJZlxuICogYG1pblJlc29sdXRpb25gIGlzIGdpdmVuLCB0aGlzIHByb3BlcnR5IGlzIGlnbm9yZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uXSBUaGUgZHVyYXRpb24gb2YgdGhlIGFuaW1hdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBCeSBkZWZhdWx0LCB0aGVyZSBpcyBubyBhbmltYXRpb24gdG8gdGhlIHRhcmdldCBleHRlbnQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKG51bWJlcik6bnVtYmVyfSBbZWFzaW5nXSBUaGUgZWFzaW5nIGZ1bmN0aW9uIHVzZWQgZHVyaW5nXG4gKiB0aGUgYW5pbWF0aW9uIChkZWZhdWx0cyB0byB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZy5pbkFuZE91dH0pLlxuICogVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGZvciBlYWNoIGZyYW1lIHdpdGggYSBudW1iZXIgcmVwcmVzZW50aW5nIGFcbiAqIGZyYWN0aW9uIG9mIHRoZSBhbmltYXRpb24ncyBkdXJhdGlvbi4gIFRoZSBmdW5jdGlvbiBzaG91bGQgcmV0dXJuIGEgbnVtYmVyXG4gKiBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwcm9ncmVzcyB0b3dhcmQgdGhlIGRlc3RpbmF0aW9uIHN0YXRlLlxuICogQHByb3BlcnR5IHtmdW5jdGlvbihib29sZWFuKTp2b2lkfSBbY2FsbGJhY2tdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSB2aWV3IGlzIGluXG4gKiBpdHMgZmluYWwgcG9zaXRpb24uIFRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIGB0cnVlYCBpZiB0aGUgYW5pbWF0aW9uXG4gKiBzZXJpZXMgY29tcGxldGVkIG9uIGl0cyBvd24gb3IgYGZhbHNlYCBpZiBpdCB3YXMgY2FuY2VsbGVkLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFZpZXdPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbY2VudGVyXSBUaGUgaW5pdGlhbCBjZW50ZXIgZm9yXG4gKiB0aGUgdmlldy4gSWYgYSB1c2VyIHByb2plY3Rpb24gaXMgbm90IHNldCwgdGhlIGNvb3JkaW5hdGUgc3lzdGVtIGZvciB0aGUgY2VudGVyIGlzXG4gKiBzcGVjaWZpZWQgd2l0aCB0aGUgYHByb2plY3Rpb25gIG9wdGlvbi4gTGF5ZXIgc291cmNlcyB3aWxsIG5vdCBiZSBmZXRjaGVkIGlmIHRoaXNcbiAqIGlzIG5vdCBzZXQsIGJ1dCB0aGUgY2VudGVyIGNhbiBiZSBzZXQgbGF0ZXIgd2l0aCB7QGxpbmsgI3NldENlbnRlcn0uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW58bnVtYmVyfSBbY29uc3RyYWluUm90YXRpb249dHJ1ZV0gUm90YXRpb24gY29uc3RyYWludC5cbiAqIGBmYWxzZWAgbWVhbnMgbm8gY29uc3RyYWludC4gYHRydWVgIG1lYW5zIG5vIGNvbnN0cmFpbnQsIGJ1dCBzbmFwIHRvIHplcm9cbiAqIG5lYXIgemVyby4gQSBudW1iZXIgY29uc3RyYWlucyB0aGUgcm90YXRpb24gdG8gdGhhdCBudW1iZXIgb2YgdmFsdWVzLiBGb3JcbiAqIGV4YW1wbGUsIGA0YCB3aWxsIGNvbnN0cmFpbiB0aGUgcm90YXRpb24gdG8gMCwgOTAsIDE4MCwgYW5kIDI3MCBkZWdyZWVzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZW5hYmxlUm90YXRpb249dHJ1ZV0gRW5hYmxlIHJvdGF0aW9uLlxuICogSWYgYGZhbHNlYCwgYSByb3RhdGlvbiBjb25zdHJhaW50IHRoYXQgYWx3YXlzIHNldHMgdGhlIHJvdGF0aW9uIHRvIHplcm8gaXNcbiAqIHVzZWQuIFRoZSBgY29uc3RyYWluUm90YXRpb25gIG9wdGlvbiBoYXMgbm8gZWZmZWN0IGlmIGBlbmFibGVSb3RhdGlvbmAgaXNcbiAqIGBmYWxzZWAuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGV4dGVudCB0aGF0IGNvbnN0cmFpbnMgdGhlXG4gKiB2aWV3LCBpbiBvdGhlciB3b3Jkcywgbm90aGluZyBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50IGNhbiBiZSB2aXNpYmxlIG9uIHRoZSBtYXAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb25zdHJhaW5Pbmx5Q2VudGVyPWZhbHNlXSBJZiB0cnVlLCB0aGUgZXh0ZW50XG4gKiBjb25zdHJhaW50IHdpbGwgb25seSBhcHBseSB0byB0aGUgdmlldyBjZW50ZXIgYW5kIG5vdCB0aGUgd2hvbGUgZXh0ZW50LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc21vb3RoRXh0ZW50Q29uc3RyYWludD10cnVlXSBJZiB0cnVlLCB0aGUgZXh0ZW50XG4gKiBjb25zdHJhaW50IHdpbGwgYmUgYXBwbGllZCBzbW9vdGhseSwgaS5lLiBhbGxvdyB0aGUgdmlldyB0byBnbyBzbGlnaHRseSBvdXRzaWRlXG4gKiBvZiB0aGUgZ2l2ZW4gYGV4dGVudGAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gdXNlZCB0byBkZXRlcm1pbmVcbiAqIHRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnQuIEl0IGlzIHVzZWQgdG9nZXRoZXIgd2l0aCBgbWluUmVzb2x1dGlvbmAgKG9yXG4gKiBgbWF4Wm9vbWApIGFuZCBgem9vbUZhY3RvcmAuIElmIHVuc3BlY2lmaWVkIGl0IGlzIGNhbGN1bGF0ZWQgaW4gc3VjaCBhIHdheVxuICogdGhhdCB0aGUgcHJvamVjdGlvbidzIHZhbGlkaXR5IGV4dGVudCBmaXRzIGluIGEgMjU2eDI1NiBweCB0aWxlLiBJZiB0aGVcbiAqIHByb2plY3Rpb24gaXMgU3BoZXJpY2FsIE1lcmNhdG9yICh0aGUgZGVmYXVsdCkgdGhlbiBgbWF4UmVzb2x1dGlvbmAgZGVmYXVsdHNcbiAqIHRvIGA0MDA3NTAxNi42ODU1Nzg0OSAvIDI1NiA9IDE1NjU0My4wMzM5MjgwNDA5N2AuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblJlc29sdXRpb25dIFRoZSBtaW5pbXVtIHJlc29sdXRpb24gdXNlZCB0byBkZXRlcm1pbmVcbiAqIHRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnQuICBJdCBpcyB1c2VkIHRvZ2V0aGVyIHdpdGggYG1heFJlc29sdXRpb25gIChvclxuICogYG1pblpvb21gKSBhbmQgYHpvb21GYWN0b3JgLiAgSWYgdW5zcGVjaWZpZWQgaXQgaXMgY2FsY3VsYXRlZCBhc3N1bWluZyAyOVxuICogem9vbSBsZXZlbHMgKHdpdGggYSBmYWN0b3Igb2YgMikuIElmIHRoZSBwcm9qZWN0aW9uIGlzIFNwaGVyaWNhbCBNZXJjYXRvclxuICogKHRoZSBkZWZhdWx0KSB0aGVuIGBtaW5SZXNvbHV0aW9uYCBkZWZhdWx0cyB0b1xuICogYDQwMDc1MDE2LjY4NTU3ODQ5IC8gMjU2IC8gTWF0aC5wb3coMiwgMjgpID0gMC4wMDA1ODMxNjgyNDU1ODM5MjUzYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT0yOF0gVGhlIG1heGltdW0gem9vbSBsZXZlbCB1c2VkIHRvIGRldGVybWluZSB0aGVcbiAqIHJlc29sdXRpb24gY29uc3RyYWludC4gSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtaW5ab29tYCAob3JcbiAqIGBtYXhSZXNvbHV0aW9uYCkgYW5kIGB6b29tRmFjdG9yYC4gIE5vdGUgdGhhdCBpZiBgbWluUmVzb2x1dGlvbmAgaXMgYWxzb1xuICogcHJvdmlkZWQsIGl0IGlzIGdpdmVuIHByZWNlZGVuY2Ugb3ZlciBgbWF4Wm9vbWAuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gVGhlIG1pbmltdW0gem9vbSBsZXZlbCB1c2VkIHRvIGRldGVybWluZSB0aGVcbiAqIHJlc29sdXRpb24gY29uc3RyYWludC4gSXQgaXMgdXNlZCB0b2dldGhlciB3aXRoIGBtYXhab29tYCAob3JcbiAqIGBtaW5SZXNvbHV0aW9uYCkgYW5kIGB6b29tRmFjdG9yYC4gIE5vdGUgdGhhdCBpZiBgbWF4UmVzb2x1dGlvbmAgaXMgYWxzb1xuICogcHJvdmlkZWQsIGl0IGlzIGdpdmVuIHByZWNlZGVuY2Ugb3ZlciBgbWluWm9vbWAuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFttdWx0aVdvcmxkPWZhbHNlXSBJZiBgZmFsc2VgIHRoZSB2aWV3IGlzIGNvbnN0cmFpbmVkIHNvXG4gKiBvbmx5IG9uZSB3b3JsZCBpcyB2aXNpYmxlLCBhbmQgeW91IGNhbm5vdCBwYW4gb2ZmIHRoZSBlZGdlLiAgSWYgYHRydWVgIHRoZSBtYXBcbiAqIG1heSBzaG93IG11bHRpcGxlIHdvcmxkcyBhdCBsb3cgem9vbSBsZXZlbHMuICBPbmx5IHVzZWQgaWYgdGhlIGBwcm9qZWN0aW9uYCBpc1xuICogZ2xvYmFsLiAgTm90ZSB0aGF0IGlmIGBleHRlbnRgIGlzIGFsc28gcHJvdmlkZWQgaXQgaXMgZ2l2ZW4gcHJlY2VkZW5jZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIElmIHRydWUsIHRoZSB2aWV3IHdpbGwgYWx3YXlzXG4gKiBhbmltYXRlIHRvIHRoZSBjbG9zZXN0IHpvb20gbGV2ZWwgYWZ0ZXIgYW4gaW50ZXJhY3Rpb247IGZhbHNlIG1lYW5zXG4gKiBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgYXJlIGFsbG93ZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtzbW9vdGhSZXNvbHV0aW9uQ29uc3RyYWludD10cnVlXSBJZiB0cnVlLCB0aGUgcmVzb2x1dGlvblxuICogbWluL21heCB2YWx1ZXMgd2lsbCBiZSBhcHBsaWVkIHNtb290aGx5LCBpLiBlLiBhbGxvdyB0aGUgdmlldyB0byBleGNlZWQgc2xpZ2h0bHlcbiAqIHRoZSBnaXZlbiByZXNvbHV0aW9uIG9yIHpvb20gYm91bmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbc2hvd0Z1bGxFeHRlbnQ9ZmFsc2VdIEFsbG93IHRoZSB2aWV3IHRvIGJlIHpvb21lZCBvdXQgdG9cbiAqIHNob3cgdGhlIGZ1bGwgY29uZmlndXJlZCBleHRlbnQuIEJ5IGRlZmF1bHQsIHdoZW4gYSB2aWV3IGlzIGNvbmZpZ3VyZWQgd2l0aCBhblxuICogZXh0ZW50LCB1c2VycyB3aWxsIG5vdCBiZSBhYmxlIHRvIHpvb20gb3V0IHNvIHRoZSB2aWV3cG9ydCBleGNlZWRzIHRoZSBleHRlbnQgaW5cbiAqIGVpdGhlciBkaW1lbnNpb24uIFRoaXMgbWVhbnMgdGhlIGZ1bGwgZXh0ZW50IG1heSBub3QgYmUgdmlzaWJsZSBpZiB0aGUgdmlld3BvcnRcbiAqIGlzIHRhbGxlciBvciB3aWRlciB0aGFuIHRoZSBhc3BlY3QgcmF0aW8gb2YgdGhlIGNvbmZpZ3VyZWQgZXh0ZW50LiBJZlxuICogc2hvd0Z1bGxFeHRlbnQgaXMgdHJ1ZSwgdGhlIHVzZXIgd2lsbCBiZSBhYmxlIHRvIHpvb20gb3V0IHNvIHRoYXQgdGhlIHZpZXdwb3J0XG4gKiBleGNlZWRzIHRoZSBoZWlnaHQgb3Igd2lkdGggb2YgdGhlIGNvbmZpZ3VyZWQgZXh0ZW50LCBidXQgbm90IGJvdGgsIGFsbG93aW5nIHRoZVxuICogZnVsbCBleHRlbnQgdG8gYmUgc2hvd24uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIFRoZVxuICogcHJvamVjdGlvbi4gVGhlIGRlZmF1bHQgaXMgU3BoZXJpY2FsIE1lcmNhdG9yLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBUaGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy4gVGhlXG4gKiB1bml0cyBhcmUgYHByb2plY3Rpb25gIHVuaXRzIHBlciBwaXhlbCAoZS5nLiBtZXRlcnMgcGVyIHBpeGVsKS4gQW5cbiAqIGFsdGVybmF0aXZlIHRvIHNldHRpbmcgdGhpcyBpcyB0byBzZXQgYHpvb21gLiBMYXllciBzb3VyY2VzIHdpbGwgbm90IGJlXG4gKiBmZXRjaGVkIGlmIG5laXRoZXIgdGhpcyBub3IgYHpvb21gIGFyZSBkZWZpbmVkLCBidXQgdGhleSBjYW4gYmUgc2V0IGxhdGVyXG4gKiB3aXRoIHtAbGluayAjc2V0Wm9vbX0gb3Ige0BsaW5rICNzZXRSZXNvbHV0aW9ufS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gW3Jlc29sdXRpb25zXSBSZXNvbHV0aW9ucyB0aGF0IGRldGVybWluZSB0aGVcbiAqIHpvb20gbGV2ZWxzIGlmIHNwZWNpZmllZC4gVGhlIGluZGV4IGluIHRoZSBhcnJheSBjb3JyZXNwb25kcyB0byB0aGUgem9vbSBsZXZlbCxcbiAqIHRoZXJlZm9yZSB0aGUgcmVzb2x1dGlvbiB2YWx1ZXMgaGF2ZSB0byBiZSBpbiBkZXNjZW5kaW5nIG9yZGVyLiBJdCBhbHNvIGNvbnN0cmFpbnNcbiAqIHRoZSByZXNvbHV0aW9uIGJ5IHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIHZhbHVlLiBJZiBzZXQgdGhlIGBtYXhSZXNvbHV0aW9uYCxcbiAqIGBtaW5SZXNvbHV0aW9uYCwgYG1pblpvb21gLCBgbWF4Wm9vbWAsIGFuZCBgem9vbUZhY3RvcmAgb3B0aW9ucyBhcmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb249MF0gVGhlIGluaXRpYWwgcm90YXRpb24gZm9yIHRoZSB2aWV3IGluIHJhZGlhbnNcbiAqIChwb3NpdGl2ZSByb3RhdGlvbiBjbG9ja3dpc2UsIDAgbWVhbnMgTm9ydGgpLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6b29tXSBPbmx5IHVzZWQgaWYgYHJlc29sdXRpb25gIGlzIG5vdCBkZWZpbmVkLiBab29tXG4gKiBsZXZlbCB1c2VkIHRvIGNhbGN1bGF0ZSB0aGUgaW5pdGlhbCByZXNvbHV0aW9uIGZvciB0aGUgdmlldy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbUZhY3Rvcj0yXSBUaGUgem9vbSBmYWN0b3IgdXNlZCB0byBjb21wdXRlIHRoZVxuICogY29ycmVzcG9uZGluZyByZXNvbHV0aW9uLlxuICogQHByb3BlcnR5IHshQXJyYXk8bnVtYmVyPn0gW3BhZGRpbmc9WzAsIDAsIDAsIDBdXSBQYWRkaW5nIChpbiBjc3MgcGl4ZWxzKS5cbiAqIElmIHRoZSBtYXAgdmlld3BvcnQgaXMgcGFydGlhbGx5IGNvdmVyZWQgd2l0aCBvdGhlciBjb250ZW50IChvdmVybGF5cykgYWxvbmdcbiAqIGl0cyBlZGdlcywgdGhpcyBzZXR0aW5nIGFsbG93cyB0byBzaGlmdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydCBhd2F5IGZyb21cbiAqIHRoYXQgY29udGVudC4gVGhlIG9yZGVyIG9mIHRoZSB2YWx1ZXMgaXMgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0LlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFuaW1hdGlvbk9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtjZW50ZXJdIFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZlxuICogdGhlIGFuaW1hdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbV0gVGhlIHpvb20gbGV2ZWwgb2YgdGhlIHZpZXcgYXQgdGhlIGVuZCBvZiB0aGVcbiAqIGFuaW1hdGlvbi4gVGhpcyB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYHJlc29sdXRpb25gLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyZXNvbHV0aW9uXSBUaGUgcmVzb2x1dGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kXG4gKiBvZiB0aGUgYW5pbWF0aW9uLiAgSWYgYHpvb21gIGlzIGFsc28gcHJvdmlkZWQsIHRoaXMgb3B0aW9uIHdpbGwgYmUgaWdub3JlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcm90YXRpb25dIFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBhdCB0aGUgZW5kIG9mXG4gKiB0aGUgYW5pbWF0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW2FuY2hvcl0gT3B0aW9uYWwgYW5jaG9yIHRvIHJlbWFpbiBmaXhlZFxuICogZHVyaW5nIGEgcm90YXRpb24gb3IgcmVzb2x1dGlvbiBhbmltYXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTEwMDBdIFRoZSBkdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24obnVtYmVyKTpudW1iZXJ9IFtlYXNpbmddIFRoZSBlYXNpbmcgZnVuY3Rpb24gdXNlZFxuICogZHVyaW5nIHRoZSBhbmltYXRpb24gKGRlZmF1bHRzIHRvIHtAbGluayBtb2R1bGU6b2wvZWFzaW5nLmluQW5kT3V0fSkuXG4gKiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2ggZnJhbWUgd2l0aCBhIG51bWJlciByZXByZXNlbnRpbmcgYVxuICogZnJhY3Rpb24gb2YgdGhlIGFuaW1hdGlvbidzIGR1cmF0aW9uLiAgVGhlIGZ1bmN0aW9uIHNob3VsZCByZXR1cm4gYSBudW1iZXJcbiAqIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRvd2FyZCB0aGUgZGVzdGluYXRpb24gc3RhdGUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gem9vbSBab29tLlxuICovXG4vKipcbiAqIERlZmF1bHQgbWluIHpvb20gbGV2ZWwgZm9yIHRoZSBtYXAgdmlldy5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBERUZBVUxUX01JTl9aT09NID0gMDtcbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6Y2VudGVyJ3wnY2hhbmdlOnJlc29sdXRpb24nfCdjaGFuZ2U6cm90YXRpb24nfSBWaWV3T2JqZWN0RXZlbnRUeXBlc1xuICovXG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPFZpZXdPYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfFZpZXdPYmplY3RFdmVudFR5cGVzLCBSZXR1cm4+fSBWaWV3T25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIFZpZXcgb2JqZWN0IHJlcHJlc2VudHMgYSBzaW1wbGUgMkQgdmlldyBvZiB0aGUgbWFwLlxuICpcbiAqIFRoaXMgaXMgdGhlIG9iamVjdCB0byBhY3QgdXBvbiB0byBjaGFuZ2UgdGhlIGNlbnRlciwgcmVzb2x1dGlvbixcbiAqIGFuZCByb3RhdGlvbiBvZiB0aGUgbWFwLlxuICpcbiAqIEEgVmlldyBoYXMgYSBgcHJvamVjdGlvbmAuIFRoZSBwcm9qZWN0aW9uIGRldGVybWluZXMgdGhlXG4gKiBjb29yZGluYXRlIHN5c3RlbSBvZiB0aGUgY2VudGVyLCBhbmQgaXRzIHVuaXRzIGRldGVybWluZSB0aGUgdW5pdHMgb2YgdGhlXG4gKiByZXNvbHV0aW9uIChwcm9qZWN0aW9uIHVuaXRzIHBlciBwaXhlbCkuIFRoZSBkZWZhdWx0IHByb2plY3Rpb24gaXNcbiAqIFNwaGVyaWNhbCBNZXJjYXRvciAoRVBTRzozODU3KS5cbiAqXG4gKiAjIyMgVGhlIHZpZXcgc3RhdGVzXG4gKlxuICogQSBWaWV3IGlzIGRldGVybWluZWQgYnkgdGhyZWUgc3RhdGVzOiBgY2VudGVyYCwgYHJlc29sdXRpb25gLFxuICogYW5kIGByb3RhdGlvbmAuIEVhY2ggc3RhdGUgaGFzIGEgY29ycmVzcG9uZGluZyBnZXR0ZXIgYW5kIHNldHRlciwgZS5nLlxuICogYGdldENlbnRlcmAgYW5kIGBzZXRDZW50ZXJgIGZvciB0aGUgYGNlbnRlcmAgc3RhdGUuXG4gKlxuICogVGhlIGB6b29tYCBzdGF0ZSBpcyBhY3R1YWxseSBub3Qgc2F2ZWQgb24gdGhlIHZpZXc6IGFsbCBjb21wdXRhdGlvbnNcbiAqIGludGVybmFsbHkgdXNlIHRoZSBgcmVzb2x1dGlvbmAgc3RhdGUuIFN0aWxsLCB0aGUgYHNldFpvb21gIGFuZCBgZ2V0Wm9vbWBcbiAqIG1ldGhvZHMgYXJlIGF2YWlsYWJsZSwgYXMgd2VsbCBhcyBgZ2V0UmVzb2x1dGlvbkZvclpvb21gIGFuZFxuICogYGdldFpvb21Gb3JSZXNvbHV0aW9uYCB0byBzd2l0Y2ggZnJvbSBvbmUgc3lzdGVtIHRvIHRoZSBvdGhlci5cbiAqXG4gKiAjIyMgVGhlIGNvbnN0cmFpbnRzXG4gKlxuICogYHNldENlbnRlcmAsIGBzZXRSZXNvbHV0aW9uYCBhbmQgYHNldFJvdGF0aW9uYCBjYW4gYmUgdXNlZCB0byBjaGFuZ2UgdGhlXG4gKiBzdGF0ZXMgb2YgdGhlIHZpZXcsIGJ1dCBhbnkgY29uc3RyYWludCBkZWZpbmVkIGluIHRoZSBjb25zdHJ1Y3RvciB3aWxsXG4gKiBiZSBhcHBsaWVkIGFsb25nIHRoZSB3YXkuXG4gKlxuICogQSBWaWV3IG9iamVjdCBjYW4gaGF2ZSBhICpyZXNvbHV0aW9uIGNvbnN0cmFpbnQqLCBhICpyb3RhdGlvbiBjb25zdHJhaW50KlxuICogYW5kIGEgKmNlbnRlciBjb25zdHJhaW50Ki5cbiAqXG4gKiBUaGUgKnJlc29sdXRpb24gY29uc3RyYWludCogdHlwaWNhbGx5IHJlc3RyaWN0cyBtaW4vbWF4IHZhbHVlcyBhbmRcbiAqIHNuYXBzIHRvIHNwZWNpZmljIHJlc29sdXRpb25zLiBJdCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBmb2xsb3dpbmdcbiAqIG9wdGlvbnM6IGByZXNvbHV0aW9uc2AsIGBtYXhSZXNvbHV0aW9uYCwgYG1heFpvb21gIGFuZCBgem9vbUZhY3RvcmAuXG4gKiBJZiBgcmVzb2x1dGlvbnNgIGlzIHNldCwgdGhlIG90aGVyIHRocmVlIG9wdGlvbnMgYXJlIGlnbm9yZWQuIFNlZVxuICogZG9jdW1lbnRhdGlvbiBmb3IgZWFjaCBvcHRpb24gZm9yIG1vcmUgaW5mb3JtYXRpb24uIEJ5IGRlZmF1bHQsIHRoZSB2aWV3XG4gKiBvbmx5IGhhcyBhIG1pbi9tYXggcmVzdHJpY3Rpb24gYW5kIGFsbG93IGludGVybWVkaWFyeSB6b29tIGxldmVscyB3aGVuXG4gKiBwaW5jaC16b29taW5nIGZvciBleGFtcGxlLlxuICpcbiAqIFRoZSAqcm90YXRpb24gY29uc3RyYWludCogc25hcHMgdG8gc3BlY2lmaWMgYW5nbGVzLiBJdCBpcyBkZXRlcm1pbmVkXG4gKiBieSB0aGUgZm9sbG93aW5nIG9wdGlvbnM6IGBlbmFibGVSb3RhdGlvbmAgYW5kIGBjb25zdHJhaW5Sb3RhdGlvbmAuXG4gKiBCeSBkZWZhdWx0IHJvdGF0aW9uIGlzIGFsbG93ZWQgYW5kIGl0cyB2YWx1ZSBpcyBzbmFwcGVkIHRvIHplcm8gd2hlbiBhcHByb2FjaGluZyB0aGVcbiAqIGhvcml6b250YWwuXG4gKlxuICogVGhlICpjZW50ZXIgY29uc3RyYWludCogaXMgZGV0ZXJtaW5lZCBieSB0aGUgYGV4dGVudGAgb3B0aW9uLiBCeVxuICogZGVmYXVsdCB0aGUgdmlldyBjZW50ZXIgaXMgbm90IGNvbnN0cmFpbmVkIGF0IGFsbC5cbiAqXG4gKiAjIyMgQ2hhbmdpbmcgdGhlIHZpZXcgc3RhdGVcbiAqXG4gKiBJdCBpcyBpbXBvcnRhbnQgdG8gbm90ZSB0aGF0IGBzZXRab29tYCwgYHNldFJlc29sdXRpb25gLCBgc2V0Q2VudGVyYCBhbmRcbiAqIGBzZXRSb3RhdGlvbmAgYXJlIHN1YmplY3QgdG8gdGhlIGFib3ZlIG1lbnRpb25lZCBjb25zdHJhaW50cy4gQXMgc3VjaCwgaXRcbiAqIG1heSBzb21ldGltZXMgbm90IGJlIHBvc3NpYmxlIHRvIGtub3cgaW4gYWR2YW5jZSB0aGUgcmVzdWx0aW5nIHN0YXRlIG9mIHRoZVxuICogVmlldy4gRm9yIGV4YW1wbGUsIGNhbGxpbmcgYHNldFJlc29sdXRpb24oMTApYCBkb2VzIG5vdCBndWFyYW50ZWUgdGhhdFxuICogYGdldFJlc29sdXRpb24oKWAgd2lsbCByZXR1cm4gYDEwYC5cbiAqXG4gKiBBIGNvbnNlcXVlbmNlIG9mIHRoaXMgaXMgdGhhdCwgd2hlbiBhcHBseWluZyBhIGRlbHRhIG9uIHRoZSB2aWV3IHN0YXRlLCBvbmVcbiAqIHNob3VsZCB1c2UgYGFkanVzdENlbnRlcmAsIGBhZGp1c3RSb3RhdGlvbmAsIGBhZGp1c3Rab29tYCBhbmQgYGFkanVzdFJlc29sdXRpb25gXG4gKiByYXRoZXIgdGhhbiB0aGUgY29ycmVzcG9uZGluZyBzZXR0ZXJzLiBUaGlzIHdpbGwgbGV0IHZpZXcgZG8gaXRzIGludGVybmFsXG4gKiBjb21wdXRhdGlvbnMuIEJlc2lkZXMsIHRoZSBgYWRqdXN0KmAgbWV0aG9kcyBhbHNvIHRha2UgYW4gYG9wdF9hbmNob3JgXG4gKiBhcmd1bWVudCB3aGljaCBhbGxvd3Mgc3BlY2lmeWluZyBhbiBvcmlnaW4gZm9yIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAqXG4gKiAjIyMgSW50ZXJhY3Rpbmcgd2l0aCB0aGUgdmlld1xuICpcbiAqIFZpZXcgY29uc3RyYWludHMgYXJlIHVzdWFsbHkgb25seSBhcHBsaWVkIHdoZW4gdGhlIHZpZXcgaXMgKmF0IHJlc3QqLCBtZWFuaW5nIHRoYXRcbiAqIG5vIGludGVyYWN0aW9uIG9yIGFuaW1hdGlvbiBpcyBvbmdvaW5nLiBBcyBzdWNoLCBpZiB0aGUgdXNlciBwdXRzIHRoZSB2aWV3IGluIGFcbiAqIHN0YXRlIHRoYXQgaXMgbm90IGVxdWl2YWxlbnQgdG8gYSBjb25zdHJhaW5lZCBvbmUgKGUuZy4gcm90YXRpbmcgdGhlIHZpZXcgd2hlblxuICogdGhlIHNuYXAgYW5nbGUgaXMgMCksIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZCBhdCB0aGUgaW50ZXJhY3Rpb24gZW5kIHRvXG4gKiBwdXQgYmFjayB0aGUgdmlldyB0byBhIHN0YWJsZSBzdGF0ZTtcbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBWaWV3ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhWaWV3LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IFtvcHRfb3B0aW9uc10gVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFZpZXcob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Vmlld09uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7Vmlld09uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtWaWV3T25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBhc3NpZ24oe30sIG9wdF9vcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGludHNfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PEFycmF5PEFuaW1hdGlvbj4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYW5pbWF0aW9uc18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXBkYXRlQW5pbWF0aW9uS2V5XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEBjb25zdFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByb2plY3Rpb25fID0gY3JlYXRlUHJvamVjdGlvbihvcHRpb25zLnByb2plY3Rpb24sICdFUFNHOjM4NTcnKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdwb3J0U2l6ZV8gPSBbMTAwLCAxMDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldENlbnRlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRSZXNvbHV0aW9uXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNhbmNlbEFuY2hvcl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgb3B0aW9ucy5jZW50ZXIgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5jZW50ZXIsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5leHRlbnQpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQob3B0aW9ucy5leHRlbnQsIF90aGlzLnByb2plY3Rpb25fKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5hcHBseU9wdGlvbnNfKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldCB1cCB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBvcHRpb25zLlxuICAgICAqIEBwYXJhbSB7Vmlld09wdGlvbnN9IG9wdGlvbnMgVmlldyBvcHRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5T3B0aW9uc18gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50SW5mbyA9IGNyZWF0ZVJlc29sdXRpb25Db25zdHJhaW50KG9wdGlvbnMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uQ29uc3RyYWludEluZm8ubWF4UmVzb2x1dGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblJlc29sdXRpb25fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1pblJlc29sdXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy56b29tRmFjdG9yXyA9IHJlc29sdXRpb25Db25zdHJhaW50SW5mby56b29tRmFjdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNvbHV0aW9uc18gPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWRkaW5nXyA9IG9wdGlvbnMucGFkZGluZztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblpvb21fID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLm1pblpvb207XG4gICAgICAgIHZhciBjZW50ZXJDb25zdHJhaW50ID0gY3JlYXRlQ2VudGVyQ29uc3RyYWludChvcHRpb25zKTtcbiAgICAgICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50ID0gcmVzb2x1dGlvbkNvbnN0cmFpbnRJbmZvLmNvbnN0cmFpbnQ7XG4gICAgICAgIHZhciByb3RhdGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVSb3RhdGlvbkNvbnN0cmFpbnQob3B0aW9ucyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Q29uc3RyYWludHN9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvbnN0cmFpbnRzXyA9IHtcbiAgICAgICAgICAgIGNlbnRlcjogY2VudGVyQ29uc3RyYWludCxcbiAgICAgICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb25Db25zdHJhaW50LFxuICAgICAgICAgICAgcm90YXRpb246IHJvdGF0aW9uQ29uc3RyYWludCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRSb3RhdGlvbihvcHRpb25zLnJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnJvdGF0aW9uIDogMCk7XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwob3B0aW9ucy5jZW50ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2VudGVyIDogbnVsbCk7XG4gICAgICAgIGlmIChvcHRpb25zLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRSZXNvbHV0aW9uKG9wdGlvbnMucmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Wm9vbShvcHRpb25zLnpvb20pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0UHJvcGVydGllcyhwcm9wZXJ0aWVzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtWaWV3T3B0aW9uc31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub3B0aW9uc18gPSBvcHRpb25zO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZpZXcucHJvdG90eXBlLCBcInBhZGRpbmdcIiwge1xuICAgICAgICAvKipcbiAgICAgICAgICogUGFkZGluZyAoaW4gY3NzIHBpeGVscykuXG4gICAgICAgICAqIElmIHRoZSBtYXAgdmlld3BvcnQgaXMgcGFydGlhbGx5IGNvdmVyZWQgd2l0aCBvdGhlciBjb250ZW50IChvdmVybGF5cykgYWxvbmdcbiAgICAgICAgICogaXRzIGVkZ2VzLCB0aGlzIHNldHRpbmcgYWxsb3dzIHRvIHNoaWZ0IHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdwb3J0IGF3YXkgZnJvbSB0aGF0XG4gICAgICAgICAqIGNvbnRlbnQuIFRoZSBvcmRlciBvZiB0aGUgdmFsdWVzIGluIHRoZSBhcnJheSBpcyB0b3AsIHJpZ2h0LCBib3R0b20sIGxlZnQuXG4gICAgICAgICAqIFRoZSBkZWZhdWx0IGlzIG5vIHBhZGRpbmcsIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gYFswLCAwLCAwLCAwXWAuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxudW1iZXI+fHVuZGVmaW5lZH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAocGFkZGluZykge1xuICAgICAgICAgICAgdmFyIG9sZFBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICAgICAgdGhpcy5wYWRkaW5nXyA9IHBhZGRpbmc7XG4gICAgICAgICAgICB2YXIgY2VudGVyID0gdGhpcy5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgIGlmIChjZW50ZXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmV3UGFkZGluZyA9IHBhZGRpbmcgfHwgWzAsIDAsIDAsIDBdO1xuICAgICAgICAgICAgICAgIG9sZFBhZGRpbmcgPSBvbGRQYWRkaW5nIHx8IFswLCAwLCAwLCAwXTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbigpO1xuICAgICAgICAgICAgICAgIHZhciBvZmZzZXRYID0gKHJlc29sdXRpb24gLyAyKSAqXG4gICAgICAgICAgICAgICAgICAgIChuZXdQYWRkaW5nWzNdIC0gb2xkUGFkZGluZ1szXSArIG9sZFBhZGRpbmdbMV0gLSBuZXdQYWRkaW5nWzFdKTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0WSA9IChyZXNvbHV0aW9uIC8gMikgKlxuICAgICAgICAgICAgICAgICAgICAobmV3UGFkZGluZ1swXSAtIG9sZFBhZGRpbmdbMF0gKyBvbGRQYWRkaW5nWzJdIC0gbmV3UGFkZGluZ1syXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChbY2VudGVyWzBdICsgb2Zmc2V0WCwgY2VudGVyWzFdIC0gb2Zmc2V0WV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgLyoqXG4gICAgICogR2V0IGFuIHVwZGF0ZWQgdmVyc2lvbiBvZiB0aGUgdmlldyBvcHRpb25zIHVzZWQgdG8gY29uc3RydWN0IHRoZSB2aWV3LiAgVGhlXG4gICAgICogY3VycmVudCByZXNvbHV0aW9uIChvciB6b29tKSwgY2VudGVyLCBhbmQgcm90YXRpb24gYXJlIGFwcGxpZWQgdG8gYW55IHN0b3JlZFxuICAgICAqIG9wdGlvbnMuICBUaGUgcHJvdmlkZWQgb3B0aW9ucyBjYW4gYmUgdXNlZCB0byBhcHBseSBuZXcgbWluL21heCB6b29tIG9yXG4gICAgICogcmVzb2x1dGlvbiBsaW1pdHMuXG4gICAgICogQHBhcmFtIHtWaWV3T3B0aW9uc30gbmV3T3B0aW9ucyBOZXcgb3B0aW9ucyB0byBiZSBhcHBsaWVkLlxuICAgICAqIEByZXR1cm4ge1ZpZXdPcHRpb25zfSBOZXcgb3B0aW9ucyB1cGRhdGVkIHdpdGggdGhlIGN1cnJlbnQgdmlldyBzdGF0ZS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRVcGRhdGVkT3B0aW9uc18gPSBmdW5jdGlvbiAobmV3T3B0aW9ucykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFzc2lnbih7fSwgdGhpcy5vcHRpb25zXyk7XG4gICAgICAgIC8vIHByZXNlcnZlIHJlc29sdXRpb24gKG9yIHpvb20pXG4gICAgICAgIGlmIChvcHRpb25zLnJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0aW9ucy5yZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zLnpvb20gPSB0aGlzLmdldFpvb20oKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBwcmVzZXJ2ZSBjZW50ZXJcbiAgICAgICAgb3B0aW9ucy5jZW50ZXIgPSB0aGlzLmdldENlbnRlckludGVybmFsKCk7XG4gICAgICAgIC8vIHByZXNlcnZlIHJvdGF0aW9uXG4gICAgICAgIG9wdGlvbnMucm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHJldHVybiBhc3NpZ24oe30sIG9wdGlvbnMsIG5ld09wdGlvbnMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQW5pbWF0ZSB0aGUgdmlldy4gIFRoZSB2aWV3J3MgY2VudGVyLCB6b29tIChvciByZXNvbHV0aW9uKSwgYW5kIHJvdGF0aW9uXG4gICAgICogY2FuIGJlIGFuaW1hdGVkIGZvciBzbW9vdGggdHJhbnNpdGlvbnMgYmV0d2VlbiB2aWV3IHN0YXRlcy4gIEZvciBleGFtcGxlLFxuICAgICAqIHRvIGFuaW1hdGUgdGhlIHZpZXcgdG8gYSBuZXcgem9vbSBsZXZlbDpcbiAgICAgKlxuICAgICAqICAgICB2aWV3LmFuaW1hdGUoe3pvb206IHZpZXcuZ2V0Wm9vbSgpICsgMX0pO1xuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgdGhlIGFuaW1hdGlvbiBsYXN0cyBvbmUgc2Vjb25kIGFuZCB1c2VzIGluLWFuZC1vdXQgZWFzaW5nLiAgWW91XG4gICAgICogY2FuIGN1c3RvbWl6ZSB0aGlzIGJlaGF2aW9yIGJ5IGluY2x1ZGluZyBgZHVyYXRpb25gIChpbiBtaWxsaXNlY29uZHMpIGFuZFxuICAgICAqIGBlYXNpbmdgIG9wdGlvbnMgKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2Vhc2luZ30pLlxuICAgICAqXG4gICAgICogVG8gY2hhaW4gdG9nZXRoZXIgbXVsdGlwbGUgYW5pbWF0aW9ucywgY2FsbCB0aGUgbWV0aG9kIHdpdGggbXVsdGlwbGVcbiAgICAgKiBhbmltYXRpb24gb2JqZWN0cy4gIEZvciBleGFtcGxlLCB0byBmaXJzdCB6b29tIGFuZCB0aGVuIHBhbjpcbiAgICAgKlxuICAgICAqICAgICB2aWV3LmFuaW1hdGUoe3pvb206IDEwfSwge2NlbnRlcjogWzAsIDBdfSk7XG4gICAgICpcbiAgICAgKiBJZiB5b3UgcHJvdmlkZSBhIGZ1bmN0aW9uIGFzIHRoZSBsYXN0IGFyZ3VtZW50IHRvIHRoZSBhbmltYXRlIG1ldGhvZCwgaXRcbiAgICAgKiB3aWxsIGdldCBjYWxsZWQgYXQgdGhlIGVuZCBvZiBhbiBhbmltYXRpb24gc2VyaWVzLiAgVGhlIGNhbGxiYWNrIHdpbGwgYmVcbiAgICAgKiBjYWxsZWQgd2l0aCBgdHJ1ZWAgaWYgdGhlIGFuaW1hdGlvbiBzZXJpZXMgY29tcGxldGVkIG9uIGl0cyBvd24gb3IgYGZhbHNlYFxuICAgICAqIGlmIGl0IHdhcyBjYW5jZWxsZWQuXG4gICAgICpcbiAgICAgKiBBbmltYXRpb25zIGFyZSBjYW5jZWxsZWQgYnkgdXNlciBpbnRlcmFjdGlvbnMgKGUuZy4gZHJhZ2dpbmcgdGhlIG1hcCkgb3IgYnlcbiAgICAgKiBjYWxsaW5nIGB2aWV3LnNldENlbnRlcigpYCwgYHZpZXcuc2V0UmVzb2x1dGlvbigpYCwgb3IgYHZpZXcuc2V0Um90YXRpb24oKWBcbiAgICAgKiAob3IgYW5vdGhlciBtZXRob2QgdGhhdCBjYWxscyBvbmUgb2YgdGhlc2UpLlxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi4oQW5pbWF0aW9uT3B0aW9uc3xmdW5jdGlvbihib29sZWFuKTogdm9pZCl9IHZhcl9hcmdzIEFuaW1hdGlvblxuICAgICAqICAgICBvcHRpb25zLiAgTXVsdGlwbGUgYW5pbWF0aW9ucyBjYW4gYmUgcnVuIGluIHNlcmllcyBieSBwYXNzaW5nIG11bHRpcGxlXG4gICAgICogICAgIG9wdGlvbnMgb2JqZWN0cy4gIFRvIHJ1biBtdWx0aXBsZSBhbmltYXRpb25zIGluIHBhcmFsbGVsLCBjYWxsIHRoZSBtZXRob2RcbiAgICAgKiAgICAgbXVsdGlwbGUgdGltZXMuICBBbiBvcHRpb25hbCBjYWxsYmFjayBjYW4gYmUgcHJvdmlkZWQgYXMgYSBmaW5hbFxuICAgICAqICAgICBhcmd1bWVudC4gIFRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCB3aXRoIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXJcbiAgICAgKiAgICAgdGhlIGFuaW1hdGlvbiBjb21wbGV0ZWQgd2l0aG91dCBiZWluZyBjYW5jZWxsZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAodmFyX2FyZ3MpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNEZWYoKSAmJiAhdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHNbaV07XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5jZW50ZXIpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNlbnRlciA9IGZyb21Vc2VyQ29vcmRpbmF0ZShvcHRpb25zLmNlbnRlciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IGFzc2lnbih7fSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hbmNob3IgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0aW9ucy5hbmNob3IsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFyZ3NbaV0gPSBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0ZUludGVybmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHsuLi4oQW5pbWF0aW9uT3B0aW9uc3xmdW5jdGlvbihib29sZWFuKTogdm9pZCl9IHZhcl9hcmdzIEFuaW1hdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFuaW1hdGVJbnRlcm5hbCA9IGZ1bmN0aW9uICh2YXJfYXJncykge1xuICAgICAgICB2YXIgYW5pbWF0aW9uQ291bnQgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICB2YXIgY2FsbGJhY2s7XG4gICAgICAgIGlmIChhbmltYXRpb25Db3VudCA+IDEgJiZcbiAgICAgICAgICAgIHR5cGVvZiBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcbiAgICAgICAgICAgIC0tYW5pbWF0aW9uQ291bnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzRGVmKCkpIHtcbiAgICAgICAgICAgIC8vIGlmIHZpZXcgcHJvcGVydGllcyBhcmUgbm90IHlldCBzZXQsIHNob3J0Y3V0IHRvIHRoZSBmaW5hbCBzdGF0ZVxuICAgICAgICAgICAgdmFyIHN0YXRlID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XG4gICAgICAgICAgICBpZiAoc3RhdGUuY2VudGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChzdGF0ZS5jZW50ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Wm9vbShzdGF0ZS56b29tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzdGF0ZS5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRSb3RhdGlvbihzdGF0ZS5yb3RhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMudGFyZ2V0Q2VudGVyXy5zbGljZSgpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMudGFyZ2V0UmVzb2x1dGlvbl87XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMudGFyZ2V0Um90YXRpb25fO1xuICAgICAgICB2YXIgc2VyaWVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAvKiogQHR5cGUge0FuaW1hdGlvbk9wdGlvbnN9ICovIChhcmd1bWVudHNbaV0pO1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgY29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFuY2hvcjogb3B0aW9ucy5hbmNob3IsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDAwLFxuICAgICAgICAgICAgICAgIGVhc2luZzogb3B0aW9ucy5lYXNpbmcgfHwgaW5BbmRPdXQsXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgPSBjZW50ZXI7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldENlbnRlciA9IG9wdGlvbnMuY2VudGVyLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgY2VudGVyID0gYW5pbWF0aW9uLnRhcmdldENlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy56b29tKTtcbiAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24gPSBvcHRpb25zLnJlc29sdXRpb247XG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiA9IHJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IG1vZHVsbyhvcHRpb25zLnJvdGF0aW9uIC0gcm90YXRpb24gKyBNYXRoLlBJLCAyICogTWF0aC5QSSkgLSBNYXRoLlBJO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiA9IHJvdGF0aW9uICsgZGVsdGE7XG4gICAgICAgICAgICAgICAgcm90YXRpb24gPSBhbmltYXRpb24udGFyZ2V0Um90YXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjaGVjayBpZiBhbmltYXRpb24gaXMgYSBuby1vcFxuICAgICAgICAgICAgaWYgKGlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyB3ZSBzdGlsbCBwdXNoIGl0IG9udG8gdGhlIHNlcmllcyBmb3IgY2FsbGJhY2sgaGFuZGxpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXJ0ICs9IGFuaW1hdGlvbi5kdXJhdGlvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcmllcy5wdXNoKGFuaW1hdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpb25zXy5wdXNoKHNlcmllcyk7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgdGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHZpZXcgaXMgYmVpbmcgYW5pbWF0ZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldEFuaW1hdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW1ZpZXdIaW50LkFOSU1BVElOR10gPiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGggdGhlIHZpZXcsIHN1Y2ggYXMgcGFubmluZyBvciB6b29taW5nLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB2aWV3IGlzIGJlaW5nIGludGVyYWN0ZWQgd2l0aC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0SW50ZXJhY3RpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpbnRzX1tWaWV3SGludC5JTlRFUkFDVElOR10gPiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FuY2VsIGFueSBvbmdvaW5nIGFuaW1hdGlvbnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbmNlbEFuaW1hdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIC10aGlzLmhpbnRzX1tWaWV3SGludC5BTklNQVRJTkddKTtcbiAgICAgICAgdmFyIGFuY2hvcjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5hbmltYXRpb25zXy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcbiAgICAgICAgICAgIGlmIChzZXJpZXNbMF0uY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhzZXJpZXNbMF0uY2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gc2VyaWVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IHNlcmllc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvciA9IGFuaW1hdGlvbi5hbmNob3I7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuY2FuY2VsQW5jaG9yXyA9IGFuY2hvcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBhbGwgYW5pbWF0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS51cGRhdGVBbmltYXRpb25zXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICB2YXIgbW9yZSA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5hbmltYXRpb25zXy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XG4gICAgICAgICAgICB2YXIgc2VyaWVzQ29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gc2VyaWVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gYW5pbWF0aW9uLnN0YXJ0O1xuICAgICAgICAgICAgICAgIHZhciBmcmFjdGlvbiA9IGFuaW1hdGlvbi5kdXJhdGlvbiA+IDAgPyBlbGFwc2VkIC8gYW5pbWF0aW9uLmR1cmF0aW9uIDogMTtcbiAgICAgICAgICAgICAgICBpZiAoZnJhY3Rpb24gPj0gMSkge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uY29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmcmFjdGlvbiA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZXJpZXNDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBhbmltYXRpb24uZWFzaW5nKGZyYWN0aW9uKTtcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlcikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHgwICsgcHJvZ3Jlc3MgKiAoeDEgLSB4MCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0geTAgKyBwcm9ncmVzcyAqICh5MSAtIHkwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gW3gsIHldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gJiYgYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBwcm9ncmVzcyA9PT0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgOiBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3MgKlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24gLSBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24ocmVzb2x1dGlvbiwgMCwgc2l6ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20oY29uc3RyYWluZWRSZXNvbHV0aW9uLCBhbmltYXRpb24uYW5jaG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFJlc29sdXRpb25fID0gcmVzb2x1dGlvbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXyh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IHByb2dyZXNzID09PSAxXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG1vZHVsbyhhbmltYXRpb24udGFyZ2V0Um90YXRpb24gKyBNYXRoLlBJLCAyICogTWF0aC5QSSkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguUElcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyAqXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhbmltYXRpb24udGFyZ2V0Um90YXRpb24gLSBhbmltYXRpb24uc291cmNlUm90YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnN0cmFpbmVkUm90YXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yb3RhdGlvbihyb3RhdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZShjb25zdHJhaW5lZFJvdGF0aW9uLCBhbmltYXRpb24uYW5jaG9yKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IHJvdGF0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKHRydWUpO1xuICAgICAgICAgICAgICAgIG1vcmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghYW5pbWF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzZXJpZXNDb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc19baV0gPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5BTklNQVRJTkcsIC0xKTtcbiAgICAgICAgICAgICAgICB2YXIgY2FsbGJhY2sgPSBzZXJpZXNbMF0uY2FsbGJhY2s7XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkNhbGxiYWNrKGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJ1bmUgY29tcGxldGVkIHNlcmllc1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnNfID0gdGhpcy5hbmltYXRpb25zXy5maWx0ZXIoQm9vbGVhbik7XG4gICAgICAgIGlmIChtb3JlICYmIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25zXy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFRhcmdldCByb3RhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBhbmNob3IgUm90YXRpb24gYW5jaG9yLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gQ2VudGVyIGZvciByb3RhdGlvbiBhbmQgYW5jaG9yLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclJvdGF0ZSA9IGZ1bmN0aW9uIChyb3RhdGlvbiwgYW5jaG9yKSB7XG4gICAgICAgIHZhciBjZW50ZXI7XG4gICAgICAgIHZhciBjdXJyZW50Q2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICBpZiAoY3VycmVudENlbnRlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjZW50ZXIgPSBbY3VycmVudENlbnRlclswXSAtIGFuY2hvclswXSwgY3VycmVudENlbnRlclsxXSAtIGFuY2hvclsxXV07XG4gICAgICAgICAgICByb3RhdGVDb29yZGluYXRlKGNlbnRlciwgcm90YXRpb24gLSB0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICAgICAgYWRkQ29vcmRpbmF0ZShjZW50ZXIsIGFuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNlbnRlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGFuY2hvciBab29tIGFuY2hvci5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IENlbnRlciBmb3IgcmVzb2x1dGlvbiBhbmQgYW5jaG9yLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmNhbGN1bGF0ZUNlbnRlclpvb20gPSBmdW5jdGlvbiAocmVzb2x1dGlvbiwgYW5jaG9yKSB7XG4gICAgICAgIHZhciBjZW50ZXI7XG4gICAgICAgIHZhciBjdXJyZW50Q2VudGVyID0gdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICB2YXIgY3VycmVudFJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgaWYgKGN1cnJlbnRDZW50ZXIgIT09IHVuZGVmaW5lZCAmJiBjdXJyZW50UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgeCA9IGFuY2hvclswXSAtXG4gICAgICAgICAgICAgICAgKHJlc29sdXRpb24gKiAoYW5jaG9yWzBdIC0gY3VycmVudENlbnRlclswXSkpIC8gY3VycmVudFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgeSA9IGFuY2hvclsxXSAtXG4gICAgICAgICAgICAgICAgKHJlc29sdXRpb24gKiAoYW5jaG9yWzFdIC0gY3VycmVudENlbnRlclsxXSkpIC8gY3VycmVudFJlc29sdXRpb247XG4gICAgICAgICAgICBjZW50ZXIgPSBbeCwgeV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNlbnRlcjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdmlld3BvcnQgc2l6ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3JvdGF0aW9uXSBUYWtlIGludG8gYWNjb3VudCB0aGUgcm90YXRpb24gb2YgdGhlIHZpZXdwb3J0IHdoZW4gZ2l2aW5nIHRoZSBzaXplXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFZpZXdwb3J0IHNpemUgb3IgYFsxMDAsIDEwMF1gIHdoZW4gbm8gdmlld3BvcnQgaXMgZm91bmQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Vmlld3BvcnRTaXplXyA9IGZ1bmN0aW9uIChvcHRfcm90YXRpb24pIHtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLnZpZXdwb3J0U2l6ZV87XG4gICAgICAgIGlmIChvcHRfcm90YXRpb24pIHtcbiAgICAgICAgICAgIHZhciB3ID0gc2l6ZVswXTtcbiAgICAgICAgICAgIHZhciBoID0gc2l6ZVsxXTtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgTWF0aC5hYnModyAqIE1hdGguY29zKG9wdF9yb3RhdGlvbikpICtcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoaCAqIE1hdGguc2luKG9wdF9yb3RhdGlvbikpLFxuICAgICAgICAgICAgICAgIE1hdGguYWJzKHcgKiBNYXRoLnNpbihvcHRfcm90YXRpb24pKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKGggKiBNYXRoLmNvcyhvcHRfcm90YXRpb24pKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU3RvcmVzIHRoZSB2aWV3cG9ydCBzaXplIG9uIHRoZSB2aWV3LiBUaGUgdmlld3BvcnQgc2l6ZSBpcyBub3QgcmVhZCBldmVyeSB0aW1lIGZyb20gdGhlIERPTVxuICAgICAqIHRvIGF2b2lkIHBlcmZvcm1hbmNlIGhpdCBhbmQgbGF5b3V0IHJlZmxvdy5cbiAgICAgKiBUaGlzIHNob3VsZCBiZSBkb25lIG9uIG1hcCBzaXplIGNoYW5nZS5cbiAgICAgKiBOb3RlOiB0aGUgY29uc3RyYWludHMgYXJlIG5vdCByZXNvbHZlZCBkdXJpbmcgYW4gYW5pbWF0aW9uIHRvIGF2b2lkIHN0b3BwaW5nIGl0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF9zaXplXSBWaWV3cG9ydCBzaXplOyBpZiB1bmRlZmluZWQsIFsxMDAsIDEwMF0gaXMgYXNzdW1lZFxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFZpZXdwb3J0U2l6ZSA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB0aGlzLnZpZXdwb3J0U2l6ZV8gPSBBcnJheS5pc0FycmF5KG9wdF9zaXplKVxuICAgICAgICAgICAgPyBvcHRfc2l6ZS5zbGljZSgpXG4gICAgICAgICAgICA6IFsxMDAsIDEwMF07XG4gICAgICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBjZW50ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENlbnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKTtcbiAgICAgICAgaWYgKCFjZW50ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBjZW50ZXI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvVXNlckNvb3JkaW5hdGUoY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgY2VudGVyIHdpdGhvdXQgdHJhbnNmb3JtaW5nIHRvIHVzZXIgcHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Q2VudGVySW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5DRU5URVIpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0NvbnN0cmFpbnRzfSBDb25zdHJhaW50cy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRDb25zdHJhaW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmVzb2x1dGlvbiBjb25zdHJhaW50IGlzIHNldFxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNfLmNvbnN0cmFpblJlc29sdXRpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IFtvcHRfaGludHNdIERlc3RpbmF0aW9uIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IEhpbnQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0SGludHMgPSBmdW5jdGlvbiAob3B0X2hpbnRzKSB7XG4gICAgICAgIGlmIChvcHRfaGludHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgb3B0X2hpbnRzWzBdID0gdGhpcy5oaW50c19bMF07XG4gICAgICAgICAgICBvcHRfaGludHNbMV0gPSB0aGlzLmhpbnRzX1sxXTtcbiAgICAgICAgICAgIHJldHVybiBvcHRfaGludHM7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaW50c18uc2xpY2UoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBleHRlbnQgZm9yIHRoZSBjdXJyZW50IHZpZXcgc3RhdGUgYW5kIHRoZSBwYXNzZWQgc2l6ZS5cbiAgICAgKiBUaGUgc2l6ZSBpcyB0aGUgcGl4ZWwgZGltZW5zaW9ucyBvZiB0aGUgYm94IGludG8gd2hpY2ggdGhlIGNhbGN1bGF0ZWQgZXh0ZW50XG4gICAgICogc2hvdWxkIGZpdC4gSW4gbW9zdCBjYXNlcyB5b3Ugd2FudCB0byBnZXQgdGhlIGV4dGVudCBvZiB0aGUgZW50aXJlIG1hcCxcbiAgICAgKiB0aGF0IGlzIGBtYXAuZ2V0U2l6ZSgpYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3NpemVdIEJveCBwaXhlbCBzaXplLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBzaXplXG4gICAgICogb2YgdGhlIG1hcCB0aGF0IHVzZXMgdGhpcyB2aWV3IHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlRXh0ZW50ID0gZnVuY3Rpb24gKG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBleHRlbnQgPSB0aGlzLmNhbGN1bGF0ZUV4dGVudEludGVybmFsKG9wdF9zaXplKTtcbiAgICAgICAgcmV0dXJuIHRvVXNlckV4dGVudChleHRlbnQsIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuIElmIG5vdCBwcm92aWRlZCxcbiAgICAgKiB0aGUgbWFwJ3MgbGFzdCBrbm93biB2aWV3cG9ydCBzaXplIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jYWxjdWxhdGVFeHRlbnRJbnRlcm5hbCA9IGZ1bmN0aW9uIChvcHRfc2l6ZSkge1xuICAgICAgICB2YXIgc2l6ZSA9IG9wdF9zaXplIHx8IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICB2YXIgY2VudGVyID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9ICovICh0aGlzLmdldENlbnRlckludGVybmFsKCkpO1xuICAgICAgICBhc3NlcnQoY2VudGVyLCAxKTsgLy8gVGhlIHZpZXcgY2VudGVyIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gLyoqIEB0eXBlIHshbnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICBhc3NlcnQocmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkLCAyKTsgLy8gVGhlIHZpZXcgcmVzb2x1dGlvbiBpcyBub3QgZGVmaW5lZFxuICAgICAgICB2YXIgcm90YXRpb24gPSAvKiogQHR5cGUgeyFudW1iZXJ9ICovICh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICBhc3NlcnQocm90YXRpb24gIT09IHVuZGVmaW5lZCwgMyk7IC8vIFRoZSB2aWV3IHJvdGF0aW9uIGlzIG5vdCBkZWZpbmVkXG4gICAgICAgIHJldHVybiBnZXRGb3JWaWV3QW5kU2l6ZShjZW50ZXIsIHJlc29sdXRpb24sIHJvdGF0aW9uLCBzaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWF4aW11bSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWF4UmVzb2x1dGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF4UmVzb2x1dGlvbl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gcmVzb2x1dGlvbiBvZiB0aGUgdmlldy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBtaW5pbXVtIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldE1pblJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXhpbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIG1heGltdW0gem9vbSBsZXZlbC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0TWF4Wm9vbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLm1pblJlc29sdXRpb25fKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgYSBuZXcgbWF4aW11bSB6b29tIGxldmVsIGZvciB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBUaGUgbWF4aW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRNYXhab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgdGhpcy5hcHBseU9wdGlvbnNfKHRoaXMuZ2V0VXBkYXRlZE9wdGlvbnNfKHsgbWF4Wm9vbTogem9vbSB9KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIHZpZXcuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbWluaW11bSB6b29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRNaW5ab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLmdldFpvb21Gb3JSZXNvbHV0aW9uKHRoaXMubWF4UmVzb2x1dGlvbl8pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG5ldyBtaW5pbXVtIHpvb20gbGV2ZWwgZm9yIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFRoZSBtaW5pbXVtIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldE1pblpvb20gPSBmdW5jdGlvbiAoem9vbSkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBtaW5ab29tOiB6b29tIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB3aGV0aGVyIHRoZSB2aWV3IHNob3VsZCBhbGxvdyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIFdoZXRoZXIgdGhlIHJlc29sdXRpb24gaXMgY29uc3RyYWluZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldENvbnN0cmFpblJlc29sdXRpb24gPSBmdW5jdGlvbiAoZW5hYmxlZCkge1xuICAgICAgICB0aGlzLmFwcGx5T3B0aW9uc18odGhpcy5nZXRVcGRhdGVkT3B0aW9uc18oeyBjb25zdHJhaW5SZXNvbHV0aW9uOiBlbmFibGVkIH0pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyBwcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFRoZSBwcm9qZWN0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9qZWN0aW9uXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSByZXNvbHV0aW9uIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSByZXNvbHV0aW9ucyBmb3IgdGhlIHZpZXcuIFRoaXMgcmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzb2x1dGlvbnNcbiAgICAgKiBwYXNzZWQgdG8gdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBWaWV3LCBvciB1bmRlZmluZWQgaWYgbm9uZSB3ZXJlIGdpdmVuLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBUaGUgcmVzb2x1dGlvbnMgb2YgdGhlIHZpZXcuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHV0aW9uc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgcHJvdmlkZWQgZXh0ZW50IHdpbGwgcmVuZGVyIGF0XG4gICAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uRm9yRXh0ZW50ID0gZnVuY3Rpb24gKGV4dGVudCwgb3B0X3NpemUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKGZyb21Vc2VyRXh0ZW50KGV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpLCBvcHRfc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgcHJvdmlkZWQgZXh0ZW50IChpbiBtYXAgdW5pdHMpIGFuZCBzaXplIChpbiBwaXhlbHMpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfc2l6ZV0gQm94IHBpeGVsIHNpemUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcmVzb2x1dGlvbiBhdCB3aGljaCB0aGUgcHJvdmlkZWQgZXh0ZW50IHdpbGwgcmVuZGVyIGF0XG4gICAgICogICAgIHRoZSBnaXZlbiBzaXplLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbCA9IGZ1bmN0aW9uIChleHRlbnQsIG9wdF9zaXplKSB7XG4gICAgICAgIHZhciBzaXplID0gb3B0X3NpemUgfHwgdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgIHZhciB4UmVzb2x1dGlvbiA9IGdldFdpZHRoKGV4dGVudCkgLyBzaXplWzBdO1xuICAgICAgICB2YXIgeVJlc29sdXRpb24gPSBnZXRIZWlnaHQoZXh0ZW50KSAvIHNpemVbMV07XG4gICAgICAgIHJldHVybiBNYXRoLm1heCh4UmVzb2x1dGlvbiwgeVJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAxIGZvciBhXG4gICAgICogcmVzb2x1dGlvbi4gRXhwb25lbnRpYWwgc2NhbGluZyBpcyBhc3N1bWVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Bvd2VyXSBQb3dlci5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihudW1iZXIpOiBudW1iZXJ9IFJlc29sdXRpb24gZm9yIHZhbHVlIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3JWYWx1ZUZ1bmN0aW9uID0gZnVuY3Rpb24gKG9wdF9wb3dlcikge1xuICAgICAgICB2YXIgcG93ZXIgPSBvcHRfcG93ZXIgfHwgMjtcbiAgICAgICAgdmFyIG1heFJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgICAgICB2YXIgbWF4ID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gTWF0aC5sb2cocG93ZXIpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIFZhbHVlLlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHBvd2VyLCB2YWx1ZSAqIG1heCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x1dGlvbjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHZpZXcgcm90YXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgcm90YXRpb24gb2YgdGhlIHZpZXcgaW4gcmFkaWFucy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRSb3RhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJPVEFUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSByZXNvbHV0aW9uIGZvciBhIHZhbHVlIGJldHdlZW5cbiAgICAgKiAwIGFuZCAxLiBFeHBvbmVudGlhbCBzY2FsaW5nIGlzIGFzc3VtZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcG93ZXJdIFBvd2VyLlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9uKG51bWJlcik6IG51bWJlcn0gVmFsdWUgZm9yIHJlc29sdXRpb24gZnVuY3Rpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0VmFsdWVGb3JSZXNvbHV0aW9uRnVuY3Rpb24gPSBmdW5jdGlvbiAob3B0X3Bvd2VyKSB7XG4gICAgICAgIHZhciBsb2dQb3dlciA9IE1hdGgubG9nKG9wdF9wb3dlciB8fCAyKTtcbiAgICAgICAgdmFyIG1heFJlc29sdXRpb24gPSB0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0aGlzLm1heFJlc29sdXRpb25fKTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb24gPSB0aGlzLm1pblJlc29sdXRpb25fO1xuICAgICAgICB2YXIgbWF4ID0gTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gbG9nUG93ZXI7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFZhbHVlLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IE1hdGgubG9nKG1heFJlc29sdXRpb24gLyByZXNvbHV0aW9uKSAvIGxvZ1Bvd2VyIC8gbWF4O1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNpemUgb2YgdGhlIHZpZXdwb3J0IG1pbnVzIHBhZGRpbmcuXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9yb3RhdGlvbl0gVGFrZSBpbnRvIGFjY291bnQgdGhlIHJvdGF0aW9uIG9mIHRoZSB2aWV3cG9ydCB3aGVuIGdpdmluZyB0aGUgc2l6ZVxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBWaWV3cG9ydCBzaXplIHJlZHVjZWQgYnkgdGhlIHBhZGRpbmcuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXyA9IGZ1bmN0aW9uIChvcHRfcm90YXRpb24pIHtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8ob3B0X3JvdGF0aW9uKTtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICBpZiAocGFkZGluZykge1xuICAgICAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICAgICAgICBzaXplWzBdIC0gcGFkZGluZ1sxXSAtIHBhZGRpbmdbM10sXG4gICAgICAgICAgICAgICAgc2l6ZVsxXSAtIHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1N0YXRlfSBWaWV3IHN0YXRlLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodGhpcy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSAqLyAodGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpKTtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnBhZGRpbmdfO1xuICAgICAgICBpZiAocGFkZGluZykge1xuICAgICAgICAgICAgdmFyIHJlZHVjZWRTaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVNaW51c1BhZGRpbmdfKCk7XG4gICAgICAgICAgICBjZW50ZXIgPSBjYWxjdWxhdGVDZW50ZXJPbihjZW50ZXIsIHRoaXMuZ2V0Vmlld3BvcnRTaXplXygpLCBbcmVkdWNlZFNpemVbMF0gLyAyICsgcGFkZGluZ1szXSwgcmVkdWNlZFNpemVbMV0gLyAyICsgcGFkZGluZ1swXV0sIHJlc29sdXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2VudGVyOiBjZW50ZXIuc2xpY2UoMCksXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBwcm9qZWN0aW9uIDogbnVsbCxcbiAgICAgICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgICAgICByb3RhdGlvbjogcm90YXRpb24sXG4gICAgICAgICAgICB6b29tOiB0aGlzLmdldFpvb20oKSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCB6b29tIGxldmVsLiBUaGlzIG1ldGhvZCBtYXkgcmV0dXJuIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzXG4gICAgICogaWYgdGhlIHZpZXcgZG9lcyBub3QgY29uc3RyYWluIHRoZSByZXNvbHV0aW9uLCBvciBpZiBhbiBpbnRlcmFjdGlvbiBvclxuICAgICAqIGFuaW1hdGlvbiBpcyB1bmRlcndheS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBab29tLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5nZXRab29tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgem9vbTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcbiAgICAgICAgaWYgKHJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgem9vbSA9IHRoaXMuZ2V0Wm9vbUZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHpvb20gbGV2ZWwgZm9yIGEgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmVzb2x1dGlvbiBUaGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgem9vbSBsZXZlbCBmb3IgdGhlIHByb3ZpZGVkIHJlc29sdXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFpvb21Gb3JSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHJlc29sdXRpb24pIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMubWluWm9vbV8gfHwgMDtcbiAgICAgICAgdmFyIG1heCwgem9vbUZhY3RvcjtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfKSB7XG4gICAgICAgICAgICB2YXIgbmVhcmVzdCA9IGxpbmVhckZpbmROZWFyZXN0KHRoaXMucmVzb2x1dGlvbnNfLCByZXNvbHV0aW9uLCAxKTtcbiAgICAgICAgICAgIG9mZnNldCA9IG5lYXJlc3Q7XG4gICAgICAgICAgICBtYXggPSB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0XTtcbiAgICAgICAgICAgIGlmIChuZWFyZXN0ID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICB6b29tRmFjdG9yID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSBtYXggLyB0aGlzLnJlc29sdXRpb25zX1tuZWFyZXN0ICsgMV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXggPSB0aGlzLm1heFJlc29sdXRpb25fO1xuICAgICAgICAgICAgem9vbUZhY3RvciA9IHRoaXMuem9vbUZhY3Rvcl87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldCArIE1hdGgubG9nKG1heCAvIHJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3Rvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIGEgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIHZpZXcgcmVzb2x1dGlvbiBmb3IgdGhlIHByb3ZpZGVkIHpvb20gbGV2ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldFJlc29sdXRpb25Gb3Jab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbnNfKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiYXNlTGV2ZWwgPSBjbGFtcChNYXRoLmZsb29yKHpvb20pLCAwLCB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGggLSAyKTtcbiAgICAgICAgICAgIHZhciB6b29tRmFjdG9yID0gdGhpcy5yZXNvbHV0aW9uc19bYmFzZUxldmVsXSAvIHRoaXMucmVzb2x1dGlvbnNfW2Jhc2VMZXZlbCArIDFdO1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLnJlc29sdXRpb25zX1tiYXNlTGV2ZWxdIC9cbiAgICAgICAgICAgICAgICBNYXRoLnBvdyh6b29tRmFjdG9yLCBjbGFtcCh6b29tIC0gYmFzZUxldmVsLCAwLCAxKSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICh0aGlzLm1heFJlc29sdXRpb25fIC8gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgem9vbSAtIHRoaXMubWluWm9vbV8pKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRml0IHRoZSBnaXZlbiBnZW9tZXRyeSBvciBleHRlbnQgYmFzZWQgb24gdGhlIGdpdmVuIG1hcCBzaXplIGFuZCBib3JkZXIuXG4gICAgICogVGhlIHNpemUgaXMgcGl4ZWwgZGltZW5zaW9ucyBvZiB0aGUgYm94IHRvIGZpdCB0aGUgZXh0ZW50IGludG8uXG4gICAgICogSW4gbW9zdCBjYXNlcyB5b3Ugd2lsbCB3YW50IHRvIHVzZSB0aGUgbWFwIHNpemUsIHRoYXQgaXMgYG1hcC5nZXRTaXplKClgLlxuICAgICAqIFRha2VzIGNhcmUgb2YgdGhlIG1hcCBhbmdsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fGltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZ2VvbWV0cnlPckV4dGVudCBUaGUgZ2VvbWV0cnkgb3JcbiAgICAgKiAgICAgZXh0ZW50IHRvIGZpdCB0aGUgdmlldyB0by5cbiAgICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZml0ID0gZnVuY3Rpb24gKGdlb21ldHJ5T3JFeHRlbnQsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9ICovXG4gICAgICAgIHZhciBnZW9tZXRyeTtcbiAgICAgICAgYXNzZXJ0KEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlPckV4dGVudCkgfHxcbiAgICAgICAgICAgIHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8oZ2VvbWV0cnlPckV4dGVudCkuZ2V0U2ltcGxpZmllZEdlb21ldHJ5KSA9PT1cbiAgICAgICAgICAgICAgICAnZnVuY3Rpb24nLCAyNCk7IC8vIEludmFsaWQgZXh0ZW50IG9yIGdlb21ldHJ5IHByb3ZpZGVkIGFzIGBnZW9tZXRyeWBcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZ2VvbWV0cnlPckV4dGVudCkpIHtcbiAgICAgICAgICAgIGFzc2VydCghaXNFbXB0eShnZW9tZXRyeU9yRXh0ZW50KSwgMjUpOyAvLyBDYW5ub3QgZml0IGVtcHR5IGV4dGVudCBwcm92aWRlZCBhcyBgZ2VvbWV0cnlgXG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQoZ2VvbWV0cnlPckV4dGVudCwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGdlb21ldHJ5T3JFeHRlbnQuZ2V0VHlwZSgpID09PSBHZW9tZXRyeVR5cGUuQ0lSQ0xFKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gZnJvbVVzZXJFeHRlbnQoZ2VvbWV0cnlPckV4dGVudC5nZXRFeHRlbnQoKSwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICAgICAgZ2VvbWV0cnkgPSBwb2x5Z29uRnJvbUV4dGVudChleHRlbnQpO1xuICAgICAgICAgICAgZ2VvbWV0cnkucm90YXRlKHRoaXMuZ2V0Um90YXRpb24oKSwgZ2V0Q2VudGVyKGV4dGVudCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHVzZXJQcm9qZWN0aW9uID0gZ2V0VXNlclByb2plY3Rpb24oKTtcbiAgICAgICAgICAgIGlmICh1c2VyUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdH0gKi8gKGdlb21ldHJ5T3JFeHRlbnRcbiAgICAgICAgICAgICAgICAgICAgLmNsb25lKClcbiAgICAgICAgICAgICAgICAgICAgLnRyYW5zZm9ybSh1c2VyUHJvamVjdGlvbiwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5ID0gZ2VvbWV0cnlPckV4dGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpdEludGVybmFsKGdlb21ldHJ5LCBvcHRfb3B0aW9ucyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgcm90YXRlZCBleHRlbnRcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZ2VvbS9TaW1wbGVHZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBUaGUgZ2VvbWV0cnkuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnRcIikuRXh0ZW50fSBUaGUgcm90YXRlZCBleHRlbnQgZm9yIHRoZSBnZW9tZXRyeS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkgPSBmdW5jdGlvbiAoZ2VvbWV0cnkpIHtcbiAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xuICAgICAgICB2YXIgY29zQW5nbGUgPSBNYXRoLmNvcyhyb3RhdGlvbik7XG4gICAgICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKC1yb3RhdGlvbik7XG4gICAgICAgIHZhciBjb29yZHMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcbiAgICAgICAgdmFyIHN0cmlkZSA9IGdlb21ldHJ5LmdldFN0cmlkZSgpO1xuICAgICAgICB2YXIgbWluUm90WCA9ICtJbmZpbml0eTtcbiAgICAgICAgdmFyIG1pblJvdFkgPSArSW5maW5pdHk7XG4gICAgICAgIHZhciBtYXhSb3RYID0gLUluZmluaXR5O1xuICAgICAgICB2YXIgbWF4Um90WSA9IC1JbmZpbml0eTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29vcmRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmFyIHJvdFggPSBjb29yZHNbaV0gKiBjb3NBbmdsZSAtIGNvb3Jkc1tpICsgMV0gKiBzaW5BbmdsZTtcbiAgICAgICAgICAgIHZhciByb3RZID0gY29vcmRzW2ldICogc2luQW5nbGUgKyBjb29yZHNbaSArIDFdICogY29zQW5nbGU7XG4gICAgICAgICAgICBtaW5Sb3RYID0gTWF0aC5taW4obWluUm90WCwgcm90WCk7XG4gICAgICAgICAgICBtaW5Sb3RZID0gTWF0aC5taW4obWluUm90WSwgcm90WSk7XG4gICAgICAgICAgICBtYXhSb3RYID0gTWF0aC5tYXgobWF4Um90WCwgcm90WCk7XG4gICAgICAgICAgICBtYXhSb3RZID0gTWF0aC5tYXgobWF4Um90WSwgcm90WSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFttaW5Sb3RYLCBtaW5Sb3RZLCBtYXhSb3RYLCBtYXhSb3RZXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IFRoZSBnZW9tZXRyeS5cbiAgICAgKiBAcGFyYW0ge0ZpdE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5maXRJbnRlcm5hbCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIHNpemUgPSBvcHRpb25zLnNpemU7XG4gICAgICAgIGlmICghc2l6ZSkge1xuICAgICAgICAgICAgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplTWludXNQYWRkaW5nXygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWRkaW5nID0gb3B0aW9ucy5wYWRkaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBhZGRpbmcgOiBbMCwgMCwgMCwgMF07XG4gICAgICAgIHZhciBuZWFyZXN0ID0gb3B0aW9ucy5uZWFyZXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5lYXJlc3QgOiBmYWxzZTtcbiAgICAgICAgdmFyIG1pblJlc29sdXRpb247XG4gICAgICAgIGlmIChvcHRpb25zLm1pblJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IG9wdGlvbnMubWluUmVzb2x1dGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20ob3B0aW9ucy5tYXhab29tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1pblJlc29sdXRpb24gPSAwO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3RhdGVkRXh0ZW50ID0gdGhpcy5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgICAgICAvLyBjYWxjdWxhdGUgcmVzb2x1dGlvblxuICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHRoaXMuZ2V0UmVzb2x1dGlvbkZvckV4dGVudEludGVybmFsKHJvdGF0ZWRFeHRlbnQsIFtcbiAgICAgICAgICAgIHNpemVbMF0gLSBwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSxcbiAgICAgICAgICAgIHNpemVbMV0gLSBwYWRkaW5nWzBdIC0gcGFkZGluZ1syXSxcbiAgICAgICAgXSk7XG4gICAgICAgIHJlc29sdXRpb24gPSBpc05hTihyZXNvbHV0aW9uKVxuICAgICAgICAgICAgPyBtaW5SZXNvbHV0aW9uXG4gICAgICAgICAgICA6IE1hdGgubWF4KHJlc29sdXRpb24sIG1pblJlc29sdXRpb24pO1xuICAgICAgICByZXNvbHV0aW9uID0gdGhpcy5nZXRDb25zdHJhaW5lZFJlc29sdXRpb24ocmVzb2x1dGlvbiwgbmVhcmVzdCA/IDAgOiAxKTtcbiAgICAgICAgLy8gY2FsY3VsYXRlIGNlbnRlclxuICAgICAgICB2YXIgcm90YXRpb24gPSB0aGlzLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHZhciBzaW5BbmdsZSA9IE1hdGguc2luKHJvdGF0aW9uKTtcbiAgICAgICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3Mocm90YXRpb24pO1xuICAgICAgICB2YXIgY2VudGVyUm90ID0gZ2V0Q2VudGVyKHJvdGF0ZWRFeHRlbnQpO1xuICAgICAgICBjZW50ZXJSb3RbMF0gKz0gKChwYWRkaW5nWzFdIC0gcGFkZGluZ1szXSkgLyAyKSAqIHJlc29sdXRpb247XG4gICAgICAgIGNlbnRlclJvdFsxXSArPSAoKHBhZGRpbmdbMF0gLSBwYWRkaW5nWzJdKSAvIDIpICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIGNlbnRlclggPSBjZW50ZXJSb3RbMF0gKiBjb3NBbmdsZSAtIGNlbnRlclJvdFsxXSAqIHNpbkFuZ2xlO1xuICAgICAgICB2YXIgY2VudGVyWSA9IGNlbnRlclJvdFsxXSAqIGNvc0FuZ2xlICsgY2VudGVyUm90WzBdICogc2luQW5nbGU7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENvbnN0cmFpbmVkQ2VudGVyKFtjZW50ZXJYLCBjZW50ZXJZXSwgcmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IG9wdGlvbnMuY2FsbGJhY2sgPyBvcHRpb25zLmNhbGxiYWNrIDogVk9JRDtcbiAgICAgICAgaWYgKG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlSW50ZXJuYWwoe1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgY2VudGVyOiBjZW50ZXIsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyxcbiAgICAgICAgICAgIH0sIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gY2VudGVyO1xuICAgICAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXyhmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENlbnRlciBvbiBjb29yZGluYXRlIGFuZCB2aWV3IHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBzaXplIEJveCBwaXhlbCBzaXplLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gcG9zaXRpb24gUG9zaXRpb24gb24gdGhlIHZpZXcgdG8gY2VudGVyIG9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5jZW50ZXJPbiA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbikge1xuICAgICAgICB0aGlzLmNlbnRlck9uSW50ZXJuYWwoZnJvbVVzZXJDb29yZGluYXRlKGNvb3JkaW5hdGUsIHRoaXMuZ2V0UHJvamVjdGlvbigpKSwgc2l6ZSwgcG9zaXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwb3NpdGlvbiBQb3NpdGlvbiBvbiB0aGUgdmlldyB0byBjZW50ZXIgb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2VudGVyT25JbnRlcm5hbCA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBzaXplLCBwb3NpdGlvbikge1xuICAgICAgICB0aGlzLnNldENlbnRlckludGVybmFsKGNhbGN1bGF0ZUNlbnRlck9uKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uLCB0aGlzLmdldFJlc29sdXRpb24oKSwgdGhpcy5nZXRSb3RhdGlvbigpKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBzaGlmdCBiZXR3ZWVuIG1hcCBhbmQgdmlld3BvcnQgY2VudGVyLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNlbnRlciBDZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBDZW50ZXIgc2hpZnQuXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuY2FsY3VsYXRlQ2VudGVyU2hpZnQgPSBmdW5jdGlvbiAoY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSkge1xuICAgICAgICB2YXIgY2VudGVyU2hpZnQ7XG4gICAgICAgIHZhciBwYWRkaW5nID0gdGhpcy5wYWRkaW5nXztcbiAgICAgICAgaWYgKHBhZGRpbmcgJiYgY2VudGVyKSB7XG4gICAgICAgICAgICB2YXIgcmVkdWNlZFNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZU1pbnVzUGFkZGluZ18oLXJvdGF0aW9uKTtcbiAgICAgICAgICAgIHZhciBzaGlmdGVkQ2VudGVyID0gY2FsY3VsYXRlQ2VudGVyT24oY2VudGVyLCBzaXplLCBbcmVkdWNlZFNpemVbMF0gLyAyICsgcGFkZGluZ1szXSwgcmVkdWNlZFNpemVbMV0gLyAyICsgcGFkZGluZ1swXV0sIHJlc29sdXRpb24sIHJvdGF0aW9uKTtcbiAgICAgICAgICAgIGNlbnRlclNoaWZ0ID0gW1xuICAgICAgICAgICAgICAgIGNlbnRlclswXSAtIHNoaWZ0ZWRDZW50ZXJbMF0sXG4gICAgICAgICAgICAgICAgY2VudGVyWzFdIC0gc2hpZnRlZENlbnRlclsxXSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNlbnRlclNoaWZ0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgZGVmaW5lZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5pc0RlZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpICYmIHRoaXMuZ2V0UmVzb2x1dGlvbigpICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHJlbGF0aXZlIGNvb3JkaW5hdGVzIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXcuIEFueSBleHRlbnQgY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGRlbHRhQ29vcmRpbmF0ZXMgUmVsYXRpdmUgdmFsdWUgdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXIgPSBmdW5jdGlvbiAoZGVsdGFDb29yZGluYXRlcykge1xuICAgICAgICB2YXIgY2VudGVyID0gdG9Vc2VyQ29vcmRpbmF0ZSh0aGlzLnRhcmdldENlbnRlcl8sIHRoaXMuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXIoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyByZWxhdGl2ZSBjb29yZGluYXRlcyB0byB0aGUgY2VudGVyIG9mIHRoZSB2aWV3LiBBbnkgZXh0ZW50IGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBkZWx0YUNvb3JkaW5hdGVzIFJlbGF0aXZlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5hZGp1c3RDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIChkZWx0YUNvb3JkaW5hdGVzKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLnRhcmdldENlbnRlcl87XG4gICAgICAgIHRoaXMuc2V0Q2VudGVySW50ZXJuYWwoW1xuICAgICAgICAgICAgY2VudGVyWzBdICsgZGVsdGFDb29yZGluYXRlc1swXSxcbiAgICAgICAgICAgIGNlbnRlclsxXSArIGRlbHRhQ29vcmRpbmF0ZXNbMV0sXG4gICAgICAgIF0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhlIHZpZXcgcmVzb2x1dGlvbiBieSBhIHJhdGlvLCBvcHRpb25hbGx5IHVzaW5nIGFuIGFuY2hvci4gQW55IHJlc29sdXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvIFRoZSByYXRpbyB0byBhcHBseSBvbiB0aGUgdmlldyByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyYXRpbywgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvciAmJiBmcm9tVXNlckNvb3JkaW5hdGUob3B0X2FuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICB0aGlzLmFkanVzdFJlc29sdXRpb25JbnRlcm5hbChyYXRpbywgYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoZSB2aWV3IHJlc29sdXRpb24gYnkgYSByYXRpbywgb3B0aW9uYWxseSB1c2luZyBhbiBhbmNob3IuIEFueSByZXNvbHV0aW9uXG4gICAgICogY29uc3RyYWludCB3aWxsIGFwcGx5LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyBUaGUgcmF0aW8gdG8gYXBwbHkgb24gdGhlIHZpZXcgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIG9yaWdpbiBvZiB0aGUgdHJhbnNmb3JtYXRpb24uXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0UmVzb2x1dGlvbkludGVybmFsID0gZnVuY3Rpb24gKHJhdGlvLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBpc01vdmluZyA9IHRoaXMuZ2V0QW5pbWF0aW5nKCkgfHwgdGhpcy5nZXRJbnRlcmFjdGluZygpO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyh0aGlzLmdldFJvdGF0aW9uKCkpO1xuICAgICAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJlc29sdXRpb24odGhpcy50YXJnZXRSZXNvbHV0aW9uXyAqIHJhdGlvLCAwLCBzaXplLCBpc01vdmluZyk7XG4gICAgICAgIGlmIChvcHRfYW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldENlbnRlcl8gPSB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20obmV3UmVzb2x1dGlvbiwgb3B0X2FuY2hvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyAqPSByYXRpbztcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBhIHZhbHVlIHRvIHRoZSB2aWV3IHpvb20gbGV2ZWwsIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcmVzb2x1dGlvblxuICAgICAqIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Wm9vbSA9IGZ1bmN0aW9uIChkZWx0YSwgb3B0X2FuY2hvcikge1xuICAgICAgICB0aGlzLmFkanVzdFJlc29sdXRpb24oTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgLWRlbHRhKSwgb3B0X2FuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIGEgdmFsdWUgdG8gdGhlIHZpZXcgcm90YXRpb24sIG9wdGlvbmFsbHkgdXNpbmcgYW4gYW5jaG9yLiBBbnkgcm90YXRpb25cbiAgICAgKiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFJlbGF0aXZlIHZhbHVlIHRvIGFkZCB0byB0aGUgem9vbSByb3RhdGlvbiwgaW4gcmFkaWFucy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBbb3B0X2FuY2hvcl0gVGhlIHJvdGF0aW9uIGNlbnRlci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYWRqdXN0Um90YXRpb24gPSBmdW5jdGlvbiAoZGVsdGEsIG9wdF9hbmNob3IpIHtcbiAgICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgICAgIG9wdF9hbmNob3IgPSBmcm9tVXNlckNvb3JkaW5hdGUob3B0X2FuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRqdXN0Um90YXRpb25JbnRlcm5hbChkZWx0YSwgb3B0X2FuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgUmVsYXRpdmUgdmFsdWUgdG8gYWRkIHRvIHRoZSB6b29tIHJvdGF0aW9uLCBpbiByYWRpYW5zLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgcm90YXRpb24gY2VudGVyLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFkanVzdFJvdGF0aW9uSW50ZXJuYWwgPSBmdW5jdGlvbiAoZGVsdGEsIG9wdF9hbmNob3IpIHtcbiAgICAgICAgdmFyIGlzTW92aW5nID0gdGhpcy5nZXRBbmltYXRpbmcoKSB8fCB0aGlzLmdldEludGVyYWN0aW5nKCk7XG4gICAgICAgIHZhciBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHRoaXMudGFyZ2V0Um90YXRpb25fICsgZGVsdGEsIGlzTW92aW5nKTtcbiAgICAgICAgaWYgKG9wdF9hbmNob3IpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0Q2VudGVyXyA9IHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKG5ld1JvdGF0aW9uLCBvcHRfYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyArPSBkZWx0YTtcbiAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjZW50ZXIgb2YgdGhlIGN1cnJlbnQgdmlldy4gQW55IGV4dGVudCBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IGNlbnRlciBUaGUgY2VudGVyIG9mIHRoZSB2aWV3LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldENlbnRlciA9IGZ1bmN0aW9uIChjZW50ZXIpIHtcbiAgICAgICAgdGhpcy5zZXRDZW50ZXJJbnRlcm5hbChmcm9tVXNlckNvb3JkaW5hdGUoY2VudGVyLCB0aGlzLmdldFByb2plY3Rpb24oKSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBjZW50ZXIgdXNpbmcgdGhlIHZpZXcgcHJvamVjdGlvbiAobm90IHRoZSB1c2VyIHByb2plY3Rpb24pLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV8dW5kZWZpbmVkfSBjZW50ZXIgVGhlIGNlbnRlciBvZiB0aGUgdmlldy5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRDZW50ZXJJbnRlcm5hbCA9IGZ1bmN0aW9uIChjZW50ZXIpIHtcbiAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gY2VudGVyO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVmlld0hpbnQuanNcIikuZGVmYXVsdH0gaGludCBIaW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBEZWx0YS5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IE5ldyB2YWx1ZS5cbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRIaW50ID0gZnVuY3Rpb24gKGhpbnQsIGRlbHRhKSB7XG4gICAgICAgIHRoaXMuaGludHNfW2hpbnRdICs9IGRlbHRhO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGludHNfW2hpbnRdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSByZXNvbHV0aW9uIGZvciB0aGlzIHZpZXcuIEFueSByZXNvbHV0aW9uIGNvbnN0cmFpbnQgd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcnx1bmRlZmluZWR9IHJlc29sdXRpb24gVGhlIHJlc29sdXRpb24gb2YgdGhlIHZpZXcuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuc2V0UmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8gPSByZXNvbHV0aW9uO1xuICAgICAgICB0aGlzLmFwcGx5VGFyZ2V0U3RhdGVfKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHJvdGF0aW9uIGZvciB0aGlzIHZpZXcuIEFueSByb3RhdGlvbiBjb25zdHJhaW50IHdpbGwgYXBwbHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJvdGF0aW9uIFRoZSByb3RhdGlvbiBvZiB0aGUgdmlldyBpbiByYWRpYW5zLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnNldFJvdGF0aW9uID0gZnVuY3Rpb24gKHJvdGF0aW9uKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0Um90YXRpb25fID0gcm90YXRpb247XG4gICAgICAgIHRoaXMuYXBwbHlUYXJnZXRTdGF0ZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFpvb20gdG8gYSBzcGVjaWZpYyB6b29tIGxldmVsLiBBbnkgcmVzb2x1dGlvbiBjb25zdHJhaW4gd2lsbCBhcHBseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBab29tIGxldmVsLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBWaWV3LnByb3RvdHlwZS5zZXRab29tID0gZnVuY3Rpb24gKHpvb20pIHtcbiAgICAgICAgdGhpcy5zZXRSZXNvbHV0aW9uKHRoaXMuZ2V0UmVzb2x1dGlvbkZvclpvb20oem9vbSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVjb21wdXRlIHJvdGF0aW9uL3Jlc29sdXRpb24vY2VudGVyIGJhc2VkIG9uIHRhcmdldCB2YWx1ZXMuXG4gICAgICogTm90ZTogd2UgaGF2ZSB0byBjb21wdXRlIHJvdGF0aW9uIGZpcnN0LCB0aGVuIHJlc29sdXRpb24gYW5kIGNlbnRlciBjb25zaWRlcmluZyB0aGF0XG4gICAgICogcGFyYW1ldGVycyBjYW4gaW5mbHVlbmNlIG9uZSBhbm90aGVyIGluIGNhc2UgYSB2aWV3IGV4dGVudCBjb25zdHJhaW50IGlzIHByZXNlbnQuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0X2RvTm90Q2FuY2VsQW5pbXNdIERvIG5vdCBjYW5jZWwgYW5pbWF0aW9ucy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfZm9yY2VNb3ZpbmddIEFwcGx5IGNvbnN0cmFpbnRzIGFzIGlmIHRoZSB2aWV3IGlzIG1vdmluZy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmFwcGx5VGFyZ2V0U3RhdGVfID0gZnVuY3Rpb24gKG9wdF9kb05vdENhbmNlbEFuaW1zLCBvcHRfZm9yY2VNb3ZpbmcpIHtcbiAgICAgICAgdmFyIGlzTW92aW5nID0gdGhpcy5nZXRBbmltYXRpbmcoKSB8fCB0aGlzLmdldEludGVyYWN0aW5nKCkgfHwgb3B0X2ZvcmNlTW92aW5nO1xuICAgICAgICAvLyBjb21wdXRlIHJvdGF0aW9uXG4gICAgICAgIHZhciBuZXdSb3RhdGlvbiA9IHRoaXMuY29uc3RyYWludHNfLnJvdGF0aW9uKHRoaXMudGFyZ2V0Um90YXRpb25fLCBpc01vdmluZyk7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKG5ld1JvdGF0aW9uKTtcbiAgICAgICAgdmFyIG5ld1Jlc29sdXRpb24gPSB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRoaXMudGFyZ2V0UmVzb2x1dGlvbl8sIDAsIHNpemUsIGlzTW92aW5nKTtcbiAgICAgICAgdmFyIG5ld0NlbnRlciA9IHRoaXMuY29uc3RyYWludHNfLmNlbnRlcih0aGlzLnRhcmdldENlbnRlcl8sIG5ld1Jlc29sdXRpb24sIHNpemUsIGlzTW92aW5nLCB0aGlzLmNhbGN1bGF0ZUNlbnRlclNoaWZ0KHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgbmV3Um90YXRpb24sIHNpemUpKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0KFZpZXdQcm9wZXJ0eS5ST1RBVElPTikgIT09IG5ld1JvdGF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUk9UQVRJT04sIG5ld1JvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nZXQoVmlld1Byb3BlcnR5LlJFU09MVVRJT04pICE9PSBuZXdSZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNldChWaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgbmV3UmVzb2x1dGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmdldChWaWV3UHJvcGVydHkuQ0VOVEVSKSB8fFxuICAgICAgICAgICAgIWVxdWFscyh0aGlzLmdldChWaWV3UHJvcGVydHkuQ0VOVEVSKSwgbmV3Q2VudGVyKSkge1xuICAgICAgICAgICAgdGhpcy5zZXQoVmlld1Byb3BlcnR5LkNFTlRFUiwgbmV3Q2VudGVyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5nZXRBbmltYXRpbmcoKSAmJiAhb3B0X2RvTm90Q2FuY2VsQW5pbXMpIHtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FuY2VsQW5jaG9yXyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIElmIGFueSBjb25zdHJhaW50cyBuZWVkIHRvIGJlIGFwcGxpZWQsIGFuIGFuaW1hdGlvbiB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICAgKiBUaGlzIGlzIHR5cGljYWxseSBkb25lIG9uIGludGVyYWN0aW9uIGVuZC5cbiAgICAgKiBOb3RlOiBjYWxsaW5nIHRoaXMgd2l0aCBhIGR1cmF0aW9uIG9mIDAgd2lsbCBhcHBseSB0aGUgY29uc3RyYWluZWQgdmFsdWVzIHN0cmFpZ2h0IGF3YXksXG4gICAgICogd2l0aG91dCBhbmltYXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIFRoZSBhbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbl0gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLnJlc29sdmVDb25zdHJhaW50cyA9IGZ1bmN0aW9uIChvcHRfZHVyYXRpb24sIG9wdF9yZXNvbHV0aW9uRGlyZWN0aW9uLCBvcHRfYW5jaG9yKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IG9wdF9kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2R1cmF0aW9uIDogMjAwO1xuICAgICAgICB2YXIgZGlyZWN0aW9uID0gb3B0X3Jlc29sdXRpb25EaXJlY3Rpb24gfHwgMDtcbiAgICAgICAgdmFyIG5ld1JvdGF0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucm90YXRpb24odGhpcy50YXJnZXRSb3RhdGlvbl8pO1xuICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0Vmlld3BvcnRTaXplXyhuZXdSb3RhdGlvbik7XG4gICAgICAgIHZhciBuZXdSZXNvbHV0aW9uID0gdGhpcy5jb25zdHJhaW50c18ucmVzb2x1dGlvbih0aGlzLnRhcmdldFJlc29sdXRpb25fLCBkaXJlY3Rpb24sIHNpemUpO1xuICAgICAgICB2YXIgbmV3Q2VudGVyID0gdGhpcy5jb25zdHJhaW50c18uY2VudGVyKHRoaXMudGFyZ2V0Q2VudGVyXywgbmV3UmVzb2x1dGlvbiwgc2l6ZSwgZmFsc2UsIHRoaXMuY2FsY3VsYXRlQ2VudGVyU2hpZnQodGhpcy50YXJnZXRDZW50ZXJfLCBuZXdSZXNvbHV0aW9uLCBuZXdSb3RhdGlvbiwgc2l6ZSkpO1xuICAgICAgICBpZiAoZHVyYXRpb24gPT09IDAgJiYgIXRoaXMuY2FuY2VsQW5jaG9yXykge1xuICAgICAgICAgICAgdGhpcy50YXJnZXRSZXNvbHV0aW9uXyA9IG5ld1Jlc29sdXRpb247XG4gICAgICAgICAgICB0aGlzLnRhcmdldFJvdGF0aW9uXyA9IG5ld1JvdGF0aW9uO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRDZW50ZXJfID0gbmV3Q2VudGVyO1xuICAgICAgICAgICAgdGhpcy5hcHBseVRhcmdldFN0YXRlXygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhbmNob3IgPSBvcHRfYW5jaG9yIHx8IChkdXJhdGlvbiA9PT0gMCA/IHRoaXMuY2FuY2VsQW5jaG9yXyA6IHVuZGVmaW5lZCk7XG4gICAgICAgIHRoaXMuY2FuY2VsQW5jaG9yXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMuZ2V0UmVzb2x1dGlvbigpICE9PSBuZXdSZXNvbHV0aW9uIHx8XG4gICAgICAgICAgICB0aGlzLmdldFJvdGF0aW9uKCkgIT09IG5ld1JvdGF0aW9uIHx8XG4gICAgICAgICAgICAhdGhpcy5nZXRDZW50ZXJJbnRlcm5hbCgpIHx8XG4gICAgICAgICAgICAhZXF1YWxzKHRoaXMuZ2V0Q2VudGVySW50ZXJuYWwoKSwgbmV3Q2VudGVyKSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbEFuaW1hdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogbmV3Um90YXRpb24sXG4gICAgICAgICAgICAgICAgY2VudGVyOiBuZXdDZW50ZXIsXG4gICAgICAgICAgICAgICAgcmVzb2x1dGlvbjogbmV3UmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICAgICAgICAgIGFuY2hvcjogYW5jaG9yLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5vdGlmeSB0aGUgVmlldyB0aGF0IGFuIGludGVyYWN0aW9uIGhhcyBzdGFydGVkLlxuICAgICAqIFRoZSB2aWV3IHN0YXRlIHdpbGwgYmUgcmVzb2x2ZWQgdG8gYSBzdGFibGUgb25lIGlmIG5lZWRlZFxuICAgICAqIChkZXBlbmRpbmcgb24gaXRzIGNvbnN0cmFpbnRzKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuYmVnaW5JbnRlcmFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMoMCk7XG4gICAgICAgIHRoaXMuc2V0SGludChWaWV3SGludC5JTlRFUkFDVElORywgMSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhlIFZpZXcgdGhhdCBhbiBpbnRlcmFjdGlvbiBoYXMgZW5kZWQuIFRoZSB2aWV3IHN0YXRlIHdpbGwgYmUgcmVzb2x2ZWRcbiAgICAgKiB0byBhIHN0YWJsZSBvbmUgaWYgbmVlZGVkIChkZXBlbmRpbmcgb24gaXRzIGNvbnN0cmFpbnRzKS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1zLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X3Jlc29sdXRpb25EaXJlY3Rpb25dIFdoaWNoIGRpcmVjdGlvbiB0byB6b29tLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBUaGUgb3JpZ2luIG9mIHRoZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVmlldy5wcm90b3R5cGUuZW5kSW50ZXJhY3Rpb24gPSBmdW5jdGlvbiAob3B0X2R1cmF0aW9uLCBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiwgb3B0X2FuY2hvcikge1xuICAgICAgICB2YXIgYW5jaG9yID0gb3B0X2FuY2hvciAmJiBmcm9tVXNlckNvb3JkaW5hdGUob3B0X2FuY2hvciwgdGhpcy5nZXRQcm9qZWN0aW9uKCkpO1xuICAgICAgICB0aGlzLmVuZEludGVyYWN0aW9uSW50ZXJuYWwob3B0X2R1cmF0aW9uLCBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiwgYW5jaG9yKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE5vdGlmeSB0aGUgVmlldyB0aGF0IGFuIGludGVyYWN0aW9uIGhhcyBlbmRlZC4gVGhlIHZpZXcgc3RhdGUgd2lsbCBiZSByZXNvbHZlZFxuICAgICAqIHRvIGEgc3RhYmxlIG9uZSBpZiBuZWVkZWQgKGRlcGVuZGluZyBvbiBpdHMgY29uc3RyYWludHMpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2R1cmF0aW9uXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbXMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbl0gV2hpY2ggZGlyZWN0aW9uIHRvIHpvb20uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gW29wdF9hbmNob3JdIFRoZSBvcmlnaW4gb2YgdGhlIHRyYW5zZm9ybWF0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmVuZEludGVyYWN0aW9uSW50ZXJuYWwgPSBmdW5jdGlvbiAob3B0X2R1cmF0aW9uLCBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiwgb3B0X2FuY2hvcikge1xuICAgICAgICB0aGlzLnNldEhpbnQoVmlld0hpbnQuSU5URVJBQ1RJTkcsIC0xKTtcbiAgICAgICAgdGhpcy5yZXNvbHZlQ29uc3RyYWludHMob3B0X2R1cmF0aW9uLCBvcHRfcmVzb2x1dGlvbkRpcmVjdGlvbiwgb3B0X2FuY2hvcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB2YWxpZCBwb3NpdGlvbiBmb3IgdGhlIHZpZXcgY2VudGVyIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBjb25zdHJhaW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gdGFyZ2V0Q2VudGVyIFRhcmdldCBjZW50ZXIgcG9zaXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfdGFyZ2V0UmVzb2x1dGlvbl0gVGFyZ2V0IHJlc29sdXRpb24uIElmIG5vdCBzdXBwbGllZCwgdGhlIGN1cnJlbnQgb25lIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBUaGlzIGlzIHVzZWZ1bCB0byBndWVzcyBhIHZhbGlkIGNlbnRlciBwb3NpdGlvbiBhdCBhIGRpZmZlcmVudCB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gVmFsaWQgY2VudGVyIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpbmVkQ2VudGVyID0gZnVuY3Rpb24gKHRhcmdldENlbnRlciwgb3B0X3RhcmdldFJlc29sdXRpb24pIHtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLmdldFZpZXdwb3J0U2l6ZV8odGhpcy5nZXRSb3RhdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RyYWludHNfLmNlbnRlcih0YXJnZXRDZW50ZXIsIG9wdF90YXJnZXRSZXNvbHV0aW9uIHx8IHRoaXMuZ2V0UmVzb2x1dGlvbigpLCBzaXplKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHZhbGlkIHpvb20gbGV2ZWwgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHZpZXcgY29uc3RyYWludHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB0YXJnZXRab29tIFRhcmdldCB6b29tLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpcmVjdGlvbj0wXSBJbmRpY2F0ZSB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlldyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBWYWxpZCB6b29tIGxldmVsLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpbmVkWm9vbSA9IGZ1bmN0aW9uICh0YXJnZXRab29tLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciB0YXJnZXRSZXMgPSB0aGlzLmdldFJlc29sdXRpb25Gb3Jab29tKHRhcmdldFpvb20pO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRab29tRm9yUmVzb2x1dGlvbih0aGlzLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbih0YXJnZXRSZXMsIG9wdF9kaXJlY3Rpb24pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHZhbGlkIHJlc29sdXRpb24gYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHZpZXcgY29uc3RyYWludHMuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8dW5kZWZpbmVkfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2RpcmVjdGlvbj0wXSBJbmRpY2F0ZSB3aGljaCByZXNvbHV0aW9uIHNob3VsZCBiZSB1c2VkXG4gICAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlldyByZXNvbHV0aW9uIGRvZXMgbm90IG1hdGNoIGFueSByZXNvbHV0aW9uIG9mIHRoZSB0aWxlIHNvdXJjZS5cbiAgICAgKiBJZiAwLCB0aGUgbmVhcmVzdCByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC4gSWYgMSwgdGhlIG5lYXJlc3QgbG93ZXIgcmVzb2x1dGlvblxuICAgICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBWYWxpZCByZXNvbHV0aW9uLlxuICAgICAqL1xuICAgIFZpZXcucHJvdG90eXBlLmdldENvbnN0cmFpbmVkUmVzb2x1dGlvbiA9IGZ1bmN0aW9uICh0YXJnZXRSZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSBvcHRfZGlyZWN0aW9uIHx8IDA7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRWaWV3cG9ydFNpemVfKHRoaXMuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cmFpbnRzXy5yZXNvbHV0aW9uKHRhcmdldFJlc29sdXRpb24sIGRpcmVjdGlvbiwgc2l6ZSk7XG4gICAgfTtcbiAgICByZXR1cm4gVmlldztcbn0oQmFzZU9iamVjdCkpO1xuLyoqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEBwYXJhbSB7Kn0gcmV0dXJuVmFsdWUgUmV0dXJuIHZhbHVlLlxuICovXG5mdW5jdGlvbiBhbmltYXRpb25DYWxsYmFjayhjYWxsYmFjaywgcmV0dXJuVmFsdWUpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FsbGJhY2socmV0dXJuVmFsdWUpO1xuICAgIH0sIDApO1xufVxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vY2VudGVyY29uc3RyYWludC5qc1wiKS5UeXBlfSBUaGUgY29uc3RyYWludC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNlbnRlckNvbnN0cmFpbnQob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBzbW9vdGggPSBvcHRpb25zLnNtb290aEV4dGVudENvbnN0cmFpbnQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnNtb290aEV4dGVudENvbnN0cmFpbnRcbiAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUV4dGVudChvcHRpb25zLmV4dGVudCwgb3B0aW9ucy5jb25zdHJhaW5Pbmx5Q2VudGVyLCBzbW9vdGgpO1xuICAgIH1cbiAgICB2YXIgcHJvamVjdGlvbiA9IGNyZWF0ZVByb2plY3Rpb24ob3B0aW9ucy5wcm9qZWN0aW9uLCAnRVBTRzozODU3Jyk7XG4gICAgaWYgKG9wdGlvbnMubXVsdGlXb3JsZCAhPT0gdHJ1ZSAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCkuc2xpY2UoKTtcbiAgICAgICAgZXh0ZW50WzBdID0gLUluZmluaXR5O1xuICAgICAgICBleHRlbnRbMl0gPSBJbmZpbml0eTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUV4dGVudChleHRlbnQsIGZhbHNlLCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiBjZW50ZXJOb25lO1xufVxuLyoqXG4gKiBAcGFyYW0ge1ZpZXdPcHRpb25zfSBvcHRpb25zIFZpZXcgb3B0aW9ucy5cbiAqIEByZXR1cm4ge3tjb25zdHJhaW50OiBpbXBvcnQoXCIuL3Jlc29sdXRpb25jb25zdHJhaW50LmpzXCIpLlR5cGUsIG1heFJlc29sdXRpb246IG51bWJlcixcbiAqICAgICBtaW5SZXNvbHV0aW9uOiBudW1iZXIsIG1pblpvb206IG51bWJlciwgem9vbUZhY3RvcjogbnVtYmVyfX0gVGhlIGNvbnN0cmFpbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNvbHV0aW9uQ29uc3RyYWludChvcHRpb25zKSB7XG4gICAgdmFyIHJlc29sdXRpb25Db25zdHJhaW50O1xuICAgIHZhciBtYXhSZXNvbHV0aW9uO1xuICAgIHZhciBtaW5SZXNvbHV0aW9uO1xuICAgIC8vIFRPRE86IG1vdmUgdGhlc2UgdG8gYmUgb2wgY29uc3RhbnRzXG4gICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVubGF5ZXJzL29wZW5sYXllcnMvaXNzdWVzLzIwNzZcbiAgICB2YXIgZGVmYXVsdE1heFpvb20gPSAyODtcbiAgICB2YXIgZGVmYXVsdFpvb21GYWN0b3IgPSAyO1xuICAgIHZhciBtaW5ab29tID0gb3B0aW9ucy5taW5ab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pblpvb20gOiBERUZBVUxUX01JTl9aT09NO1xuICAgIHZhciBtYXhab29tID0gb3B0aW9ucy5tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1heFpvb20gOiBkZWZhdWx0TWF4Wm9vbTtcbiAgICB2YXIgem9vbUZhY3RvciA9IG9wdGlvbnMuem9vbUZhY3RvciAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tRmFjdG9yIDogZGVmYXVsdFpvb21GYWN0b3I7XG4gICAgdmFyIG11bHRpV29ybGQgPSBvcHRpb25zLm11bHRpV29ybGQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubXVsdGlXb3JsZCA6IGZhbHNlO1xuICAgIHZhciBzbW9vdGggPSBvcHRpb25zLnNtb290aFJlc29sdXRpb25Db25zdHJhaW50ICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLnNtb290aFJlc29sdXRpb25Db25zdHJhaW50XG4gICAgICAgIDogdHJ1ZTtcbiAgICB2YXIgc2hvd0Z1bGxFeHRlbnQgPSBvcHRpb25zLnNob3dGdWxsRXh0ZW50ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNob3dGdWxsRXh0ZW50IDogZmFsc2U7XG4gICAgdmFyIHByb2plY3Rpb24gPSBjcmVhdGVQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbiwgJ0VQU0c6Mzg1NycpO1xuICAgIHZhciBwcm9qRXh0ZW50ID0gcHJvamVjdGlvbi5nZXRFeHRlbnQoKTtcbiAgICB2YXIgY29uc3RyYWluT25seUNlbnRlciA9IG9wdGlvbnMuY29uc3RyYWluT25seUNlbnRlcjtcbiAgICB2YXIgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG4gICAgaWYgKCFtdWx0aVdvcmxkICYmICFleHRlbnQgJiYgcHJvamVjdGlvbi5pc0dsb2JhbCgpKSB7XG4gICAgICAgIGNvbnN0cmFpbk9ubHlDZW50ZXIgPSBmYWxzZTtcbiAgICAgICAgZXh0ZW50ID0gcHJvakV4dGVudDtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMucmVzb2x1dGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcmVzb2x1dGlvbnMgPSBvcHRpb25zLnJlc29sdXRpb25zO1xuICAgICAgICBtYXhSZXNvbHV0aW9uID0gcmVzb2x1dGlvbnNbbWluWm9vbV07XG4gICAgICAgIG1pblJlc29sdXRpb24gPVxuICAgICAgICAgICAgcmVzb2x1dGlvbnNbbWF4Wm9vbV0gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gcmVzb2x1dGlvbnNbbWF4Wm9vbV1cbiAgICAgICAgICAgICAgICA6IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAob3B0aW9ucy5jb25zdHJhaW5SZXNvbHV0aW9uKSB7XG4gICAgICAgICAgICByZXNvbHV0aW9uQ29uc3RyYWludCA9IGNyZWF0ZVNuYXBUb1Jlc29sdXRpb25zKHJlc29sdXRpb25zLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgZGVmYXVsdCBtaW4gYW5kIG1heCByZXNvbHV0aW9uXG4gICAgICAgIHZhciBzaXplID0gIXByb2pFeHRlbnRcbiAgICAgICAgICAgID8gLy8gdXNlIGFuIGV4dGVudCB0aGF0IGNhbiBmaXQgdGhlIHdob2xlIHdvcmxkIGlmIG5lZWQgYmVcbiAgICAgICAgICAgICAgICAoMzYwICogTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdKSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpXG4gICAgICAgICAgICA6IE1hdGgubWF4KGdldFdpZHRoKHByb2pFeHRlbnQpLCBnZXRIZWlnaHQocHJvakV4dGVudCkpO1xuICAgICAgICB2YXIgZGVmYXVsdE1heFJlc29sdXRpb24gPSBzaXplIC8gREVGQVVMVF9USUxFX1NJWkUgLyBNYXRoLnBvdyhkZWZhdWx0Wm9vbUZhY3RvciwgREVGQVVMVF9NSU5fWk9PTSk7XG4gICAgICAgIHZhciBkZWZhdWx0TWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC9cbiAgICAgICAgICAgIE1hdGgucG93KGRlZmF1bHRab29tRmFjdG9yLCBkZWZhdWx0TWF4Wm9vbSAtIERFRkFVTFRfTUlOX1pPT00pO1xuICAgICAgICAvLyB1c2VyIHByb3ZpZGVkIG1heFJlc29sdXRpb24gdGFrZXMgcHJlY2VkZW5jZVxuICAgICAgICBtYXhSZXNvbHV0aW9uID0gb3B0aW9ucy5tYXhSZXNvbHV0aW9uO1xuICAgICAgICBpZiAobWF4UmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtaW5ab29tID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1heFJlc29sdXRpb24gPSBkZWZhdWx0TWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1pblpvb20pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHVzZXIgcHJvdmlkZWQgbWluUmVzb2x1dGlvbiB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAgIG1pblJlc29sdXRpb24gPSBvcHRpb25zLm1pblJlc29sdXRpb247XG4gICAgICAgIGlmIChtaW5SZXNvbHV0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLm1heFpvb20gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm1heFJlc29sdXRpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coem9vbUZhY3RvciwgbWF4Wm9vbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWluUmVzb2x1dGlvbiA9IGRlZmF1bHRNaW5SZXNvbHV0aW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGdpdmVuIGRpc2NyZXRlIHpvb20gbGV2ZWxzLCBtaW5SZXNvbHV0aW9uIG1heSBiZSBkaWZmZXJlbnQgdGhhbiBwcm92aWRlZFxuICAgICAgICBtYXhab29tID1cbiAgICAgICAgICAgIG1pblpvb20gK1xuICAgICAgICAgICAgICAgIE1hdGguZmxvb3IoTWF0aC5sb2cobWF4UmVzb2x1dGlvbiAvIG1pblJlc29sdXRpb24pIC8gTWF0aC5sb2coem9vbUZhY3RvcikpO1xuICAgICAgICBtaW5SZXNvbHV0aW9uID0gbWF4UmVzb2x1dGlvbiAvIE1hdGgucG93KHpvb21GYWN0b3IsIG1heFpvb20gLSBtaW5ab29tKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbikge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVTbmFwVG9Qb3dlcih6b29tRmFjdG9yLCBtYXhSZXNvbHV0aW9uLCBtaW5SZXNvbHV0aW9uLCBzbW9vdGgsICFjb25zdHJhaW5Pbmx5Q2VudGVyICYmIGV4dGVudCwgc2hvd0Z1bGxFeHRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x1dGlvbkNvbnN0cmFpbnQgPSBjcmVhdGVNaW5NYXhSZXNvbHV0aW9uKG1heFJlc29sdXRpb24sIG1pblJlc29sdXRpb24sIHNtb290aCwgIWNvbnN0cmFpbk9ubHlDZW50ZXIgJiYgZXh0ZW50LCBzaG93RnVsbEV4dGVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29uc3RyYWludDogcmVzb2x1dGlvbkNvbnN0cmFpbnQsXG4gICAgICAgIG1heFJlc29sdXRpb246IG1heFJlc29sdXRpb24sXG4gICAgICAgIG1pblJlc29sdXRpb246IG1pblJlc29sdXRpb24sXG4gICAgICAgIG1pblpvb206IG1pblpvb20sXG4gICAgICAgIHpvb21GYWN0b3I6IHpvb21GYWN0b3IsXG4gICAgfTtcbn1cbi8qKlxuICogQHBhcmFtIHtWaWV3T3B0aW9uc30gb3B0aW9ucyBWaWV3IG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JvdGF0aW9uY29uc3RyYWludC5qc1wiKS5UeXBlfSBSb3RhdGlvbiBjb25zdHJhaW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUm90YXRpb25Db25zdHJhaW50KG9wdGlvbnMpIHtcbiAgICB2YXIgZW5hYmxlUm90YXRpb24gPSBvcHRpb25zLmVuYWJsZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmVuYWJsZVJvdGF0aW9uIDogdHJ1ZTtcbiAgICBpZiAoZW5hYmxlUm90YXRpb24pIHtcbiAgICAgICAgdmFyIGNvbnN0cmFpblJvdGF0aW9uID0gb3B0aW9ucy5jb25zdHJhaW5Sb3RhdGlvbjtcbiAgICAgICAgaWYgKGNvbnN0cmFpblJvdGF0aW9uID09PSB1bmRlZmluZWQgfHwgY29uc3RyYWluUm90YXRpb24gPT09IHRydWUpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9aZXJvKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29uc3RyYWluUm90YXRpb24gPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXR1cm4gcm90YXRpb25Ob25lO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBjb25zdHJhaW5Sb3RhdGlvbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVTbmFwVG9OKGNvbnN0cmFpblJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiByb3RhdGlvbk5vbmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBkaXNhYmxlO1xuICAgIH1cbn1cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGFuIGFuaW1hdGlvbiBpbnZvbHZlcyBubyB2aWV3IGNoYW5nZS5cbiAqIEBwYXJhbSB7QW5pbWF0aW9ufSBhbmltYXRpb24gVGhlIGFuaW1hdGlvbi5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBhbmltYXRpb24gaW52b2x2ZXMgbm8gdmlldyBjaGFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc05vb3BBbmltYXRpb24oYW5pbWF0aW9uKSB7XG4gICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIgJiYgYW5pbWF0aW9uLnRhcmdldENlbnRlcikge1xuICAgICAgICBpZiAoIWNvb3JkaW5hdGVzRXF1YWwoYW5pbWF0aW9uLnNvdXJjZUNlbnRlciwgYW5pbWF0aW9uLnRhcmdldENlbnRlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gIT09IGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VSb3RhdGlvbiAhPT0gYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IGNvb3JkaW5hdGUgQ29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IHNpemUgQm94IHBpeGVsIHNpemUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBvc2l0aW9uIFBvc2l0aW9uIG9uIHRoZSB2aWV3IHRvIGNlbnRlciBvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gU2hpZnRlZCBjZW50ZXIuXG4gKi9cbmZ1bmN0aW9uIGNhbGN1bGF0ZUNlbnRlck9uKGNvb3JkaW5hdGUsIHNpemUsIHBvc2l0aW9uLCByZXNvbHV0aW9uLCByb3RhdGlvbikge1xuICAgIC8vIGNhbGN1bGF0ZSByb3RhdGVkIHBvc2l0aW9uXG4gICAgdmFyIGNvc0FuZ2xlID0gTWF0aC5jb3MoLXJvdGF0aW9uKTtcbiAgICB2YXIgc2luQW5nbGUgPSBNYXRoLnNpbigtcm90YXRpb24pO1xuICAgIHZhciByb3RYID0gY29vcmRpbmF0ZVswXSAqIGNvc0FuZ2xlIC0gY29vcmRpbmF0ZVsxXSAqIHNpbkFuZ2xlO1xuICAgIHZhciByb3RZID0gY29vcmRpbmF0ZVsxXSAqIGNvc0FuZ2xlICsgY29vcmRpbmF0ZVswXSAqIHNpbkFuZ2xlO1xuICAgIHJvdFggKz0gKHNpemVbMF0gLyAyIC0gcG9zaXRpb25bMF0pICogcmVzb2x1dGlvbjtcbiAgICByb3RZICs9IChwb3NpdGlvblsxXSAtIHNpemVbMV0gLyAyKSAqIHJlc29sdXRpb247XG4gICAgLy8gZ28gYmFjayB0byBvcmlnaW5hbCBhbmdsZVxuICAgIHNpbkFuZ2xlID0gLXNpbkFuZ2xlOyAvLyBnbyBiYWNrIHRvIG9yaWdpbmFsIHJvdGF0aW9uXG4gICAgdmFyIGNlbnRlclggPSByb3RYICogY29zQW5nbGUgLSByb3RZICogc2luQW5nbGU7XG4gICAgdmFyIGNlbnRlclkgPSByb3RZICogY29zQW5nbGUgKyByb3RYICogc2luQW5nbGU7XG4gICAgcmV0dXJuIFtjZW50ZXJYLCBjZW50ZXJZXTtcbn1cbmV4cG9ydCBkZWZhdWx0IFZpZXc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1WaWV3LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9jb21tb25cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IG1heGltdW0gem9vbSBmb3IgZGVmYXVsdCB0aWxlIGdyaWRzLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX01BWF9aT09NID0gNDI7XG4vKipcbiAqIERlZmF1bHQgdGlsZSBzaXplLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1RJTEVfU0laRSA9IDI1Njtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvVmlld0hpbnRcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgQU5JTUFUSU5HOiAwLFxuICAgIElOVEVSQUNUSU5HOiAxLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZXdIaW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9zdHlsZS9JY29uSW1hZ2VDYWNoZVxuICovXG5pbXBvcnQgeyBhc1N0cmluZyB9IGZyb20gJy4uL2NvbG9yLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogU2luZ2xldG9uIGNsYXNzLiBBdmFpbGFibGUgdGhyb3VnaCB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25JbWFnZUNhY2hlfnNoYXJlZH0uXG4gKi9cbnZhciBJY29uSW1hZ2VDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJY29uSW1hZ2VDYWNoZSgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhY2hlXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVTaXplXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhDYWNoZVNpemVfID0gMzI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZJWE1FIGVtcHR5IGRlc2NyaXB0aW9uIGZvciBqc2RvY1xuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jYWNoZV8gPSB7fTtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVfID0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVNpemVfID4gdGhpcy5tYXhDYWNoZVNpemVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgSWNvbkltYWdlQ2FjaGUucHJvdG90eXBlLmV4cGlyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGVfKSB7XG4gICAgICAgICAgICAgICAgdmFyIGljb25JbWFnZSA9IHRoaXMuY2FjaGVfW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKChpKysgJiAzKSA9PT0gMCAmJiAhaWNvbkltYWdlLmhhc0xpc3RlbmVyKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuY2FjaGVfW2tleV07XG4gICAgICAgICAgICAgICAgICAgIC0tdGhpcy5jYWNoZVNpemVfO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb2xvci5qc1wiKS5Db2xvcn0gY29sb3IgQ29sb3IuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9JY29uSW1hZ2UuanNcIikuZGVmYXVsdH0gSWNvbiBpbWFnZS5cbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKSB7XG4gICAgICAgIHZhciBrZXkgPSBnZXRLZXkoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IpO1xuICAgICAgICByZXR1cm4ga2V5IGluIHRoaXMuY2FjaGVfID8gdGhpcy5jYWNoZV9ba2V5XSA6IG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNyYy5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2NvbG9yLmpzXCIpLkNvbG9yfSBjb2xvciBDb2xvci5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vSWNvbkltYWdlLmpzXCIpLmRlZmF1bHR9IGljb25JbWFnZSBJY29uIGltYWdlLlxuICAgICAqL1xuICAgIEljb25JbWFnZUNhY2hlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoc3JjLCBjcm9zc09yaWdpbiwgY29sb3IsIGljb25JbWFnZSkge1xuICAgICAgICB2YXIga2V5ID0gZ2V0S2V5KHNyYywgY3Jvc3NPcmlnaW4sIGNvbG9yKTtcbiAgICAgICAgdGhpcy5jYWNoZV9ba2V5XSA9IGljb25JbWFnZTtcbiAgICAgICAgKyt0aGlzLmNhY2hlU2l6ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIGNhY2hlIHNpemUgb2YgdGhlIGljb24gY2FjaGUuIERlZmF1bHQgaXMgYDMyYC4gQ2hhbmdlIHRoaXMgdmFsdWUgd2hlblxuICAgICAqIHlvdXIgbWFwIHVzZXMgbW9yZSB0aGFuIDMyIGRpZmZlcmVudCBpY29uIGltYWdlcyBhbmQgeW91IGFyZSBub3QgY2FjaGluZyBpY29uXG4gICAgICogc3R5bGVzIG9uIHRoZSBhcHBsaWNhdGlvbiBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4Q2FjaGVTaXplIENhY2hlIG1heCBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJY29uSW1hZ2VDYWNoZS5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIChtYXhDYWNoZVNpemUpIHtcbiAgICAgICAgdGhpcy5tYXhDYWNoZVNpemVfID0gbWF4Q2FjaGVTaXplO1xuICAgICAgICB0aGlzLmV4cGlyZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIEljb25JbWFnZUNhY2hlO1xufSgpKTtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHNyYyBTcmMuXG4gKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29sb3IuanNcIikuQ29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBDYWNoZSBrZXkuXG4gKi9cbmZ1bmN0aW9uIGdldEtleShzcmMsIGNyb3NzT3JpZ2luLCBjb2xvcikge1xuICAgIHZhciBjb2xvclN0cmluZyA9IGNvbG9yID8gYXNTdHJpbmcoY29sb3IpIDogJ251bGwnO1xuICAgIHJldHVybiBjcm9zc09yaWdpbiArICc6JyArIHNyYyArICc6JyArIGNvbG9yU3RyaW5nO1xufVxuZXhwb3J0IGRlZmF1bHQgSWNvbkltYWdlQ2FjaGU7XG4vKipcbiAqIFRoZSB7QGxpbmsgbW9kdWxlOm9sL3N0eWxlL0ljb25JbWFnZUNhY2hlfkljb25JbWFnZUNhY2hlfSBmb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvc3R5bGUvSWNvbn5JY29ufSBpbWFnZXMuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgc2hhcmVkID0gbmV3IEljb25JbWFnZUNhY2hlKCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1JY29uSW1hZ2VDYWNoZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvY29sb3JcbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi9tYXRoLmpzJztcbi8qKlxuICogQSBjb2xvciByZXByZXNlbnRlZCBhcyBhIHNob3J0IGFycmF5IFtyZWQsIGdyZWVuLCBibHVlLCBhbHBoYV0uXG4gKiByZWQsIGdyZWVuLCBhbmQgYmx1ZSBzaG91bGQgYmUgaW50ZWdlcnMgaW4gdGhlIHJhbmdlIDAuLjI1NSBpbmNsdXNpdmUuXG4gKiBhbHBoYSBzaG91bGQgYmUgYSBmbG9hdCBpbiB0aGUgcmFuZ2UgMC4uMSBpbmNsdXNpdmUuIElmIG5vIGFscGhhIHZhbHVlIGlzXG4gKiBnaXZlbiB0aGVuIGAxYCB3aWxsIGJlIHVzZWQuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gQ29sb3JcbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBUaGlzIFJlZ0V4cCBtYXRjaGVzICMgZm9sbG93ZWQgYnkgMywgNCwgNiwgb3IgOCBoZXggZGlnaXRzLlxuICogQGNvbnN0XG4gKiBAdHlwZSB7UmVnRXhwfVxuICogQHByaXZhdGVcbiAqL1xudmFyIEhFWF9DT0xPUl9SRV8gPSAvXiMoW2EtZjAtOV17M318W2EtZjAtOV17NH0oPzpbYS1mMC05XXsyfSl7MCwyfSkkL2k7XG4vKipcbiAqIFJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgbWF0Y2hpbmcgcG90ZW50aWFsIG5hbWVkIGNvbG9yIHN0eWxlIHN0cmluZ3MuXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtSZWdFeHB9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgTkFNRURfQ09MT1JfUkVfID0gL14oW2Etel0qKSR8XmhzbGE/XFwoLipcXCkkL2k7XG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gcmdiYSBzdHJpbmcuXG4gKiBAcGFyYW0ge0NvbG9yfHN0cmluZ30gY29sb3IgQ29sb3IuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJnYmEgc3RyaW5nLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNTdHJpbmcoY29sb3IpIHtcbiAgICBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9TdHJpbmcoY29sb3IpO1xuICAgIH1cbn1cbi8qKlxuICogUmV0dXJuIG5hbWVkIGNvbG9yIGFzIGFuIHJnYmEgc3RyaW5nLlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yIE5hbWVkIGNvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBSZ2Igc3RyaW5nLlxuICovXG5mdW5jdGlvbiBmcm9tTmFtZWQoY29sb3IpIHtcbiAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5zdHlsZS5jb2xvciA9IGNvbG9yO1xuICAgIGlmIChlbC5zdHlsZS5jb2xvciAhPT0gJycpIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIHZhciByZ2IgPSBnZXRDb21wdXRlZFN0eWxlKGVsKS5jb2xvcjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7XG4gICAgICAgIHJldHVybiByZ2I7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcuXG4gKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gKi9cbmV4cG9ydCB2YXIgZnJvbVN0cmluZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgLy8gV2UgbWFpbnRhaW4gYSBzbWFsbCBjYWNoZSBvZiBwYXJzZWQgc3RyaW5ncy4gIFRvIHByb3ZpZGUgY2hlYXAgTFJVLWxpa2VcbiAgICAvLyBzZW1hbnRpY3MsIHdoZW5ldmVyIHRoZSBjYWNoZSBncm93cyB0b28gbGFyZ2Ugd2Ugc2ltcGx5IGRlbGV0ZSBhblxuICAgIC8vIGFyYml0cmFyeSAyNSUgb2YgdGhlIGVudHJpZXMuXG4gICAgLyoqXG4gICAgICogQGNvbnN0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgTUFYX0NBQ0hFX1NJWkUgPSAxMDI0O1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBDb2xvcj59XG4gICAgICovXG4gICAgdmFyIGNhY2hlID0ge307XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB2YXIgY2FjaGVTaXplID0gMDtcbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAgICAgKiBAcmV0dXJuIHtDb2xvcn0gQ29sb3IuXG4gICAgICovXG4gICAgZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmFyIGNvbG9yO1xuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkocykpIHtcbiAgICAgICAgICAgIGNvbG9yID0gY2FjaGVbc107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVTaXplID49IE1BWF9DQUNIRV9TSVpFKSB7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGkrKyAmIDMpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC0tY2FjaGVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sb3IgPSBmcm9tU3RyaW5nSW50ZXJuYWxfKHMpO1xuICAgICAgICAgICAgY2FjaGVbc10gPSBjb2xvcjtcbiAgICAgICAgICAgICsrY2FjaGVTaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9KTtcbn0pKCk7XG4vKipcbiAqIFJldHVybiB0aGUgY29sb3IgYXMgYW4gYXJyYXkuIFRoaXMgZnVuY3Rpb24gbWFpbnRhaW5zIGEgY2FjaGUgb2YgY2FsY3VsYXRlZFxuICogYXJyYXlzIHdoaWNoIG1lYW5zIHRoZSByZXN1bHQgc2hvdWxkIG5vdCBiZSBtb2RpZmllZC5cbiAqIEBwYXJhbSB7Q29sb3J8c3RyaW5nfSBjb2xvciBDb2xvci5cbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzQXJyYXkoY29sb3IpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShjb2xvcikpIHtcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZyb21TdHJpbmcoY29sb3IpO1xuICAgIH1cbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nLlxuICogQHByaXZhdGVcbiAqIEByZXR1cm4ge0NvbG9yfSBDb2xvci5cbiAqL1xuZnVuY3Rpb24gZnJvbVN0cmluZ0ludGVybmFsXyhzKSB7XG4gICAgdmFyIHIsIGcsIGIsIGEsIGNvbG9yO1xuICAgIGlmIChOQU1FRF9DT0xPUl9SRV8uZXhlYyhzKSkge1xuICAgICAgICBzID0gZnJvbU5hbWVkKHMpO1xuICAgIH1cbiAgICBpZiAoSEVYX0NPTE9SX1JFXy5leGVjKHMpKSB7XG4gICAgICAgIC8vIGhleFxuICAgICAgICB2YXIgbiA9IHMubGVuZ3RoIC0gMTsgLy8gbnVtYmVyIG9mIGhleCBkaWdpdHNcbiAgICAgICAgdmFyIGQgPSAvLyBudW1iZXIgb2YgZGlnaXRzIHBlciBjaGFubmVsXG4gICAgICAgICB2b2lkIDA7IC8vIG51bWJlciBvZiBkaWdpdHMgcGVyIGNoYW5uZWxcbiAgICAgICAgaWYgKG4gPD0gNCkge1xuICAgICAgICAgICAgZCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBkID0gMjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzQWxwaGEgPSBuID09PSA0IHx8IG4gPT09IDg7XG4gICAgICAgIHIgPSBwYXJzZUludChzLnN1YnN0cigxICsgMCAqIGQsIGQpLCAxNik7XG4gICAgICAgIGcgPSBwYXJzZUludChzLnN1YnN0cigxICsgMSAqIGQsIGQpLCAxNik7XG4gICAgICAgIGIgPSBwYXJzZUludChzLnN1YnN0cigxICsgMiAqIGQsIGQpLCAxNik7XG4gICAgICAgIGlmIChoYXNBbHBoYSkge1xuICAgICAgICAgICAgYSA9IHBhcnNlSW50KHMuc3Vic3RyKDEgKyAzICogZCwgZCksIDE2KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGEgPSAyNTU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGQgPT0gMSkge1xuICAgICAgICAgICAgciA9IChyIDw8IDQpICsgcjtcbiAgICAgICAgICAgIGcgPSAoZyA8PCA0KSArIGc7XG4gICAgICAgICAgICBiID0gKGIgPDwgNCkgKyBiO1xuICAgICAgICAgICAgaWYgKGhhc0FscGhhKSB7XG4gICAgICAgICAgICAgICAgYSA9IChhIDw8IDQpICsgYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb2xvciA9IFtyLCBnLCBiLCBhIC8gMjU1XTtcbiAgICB9XG4gICAgZWxzZSBpZiAocy5pbmRleE9mKCdyZ2JhKCcpID09IDApIHtcbiAgICAgICAgLy8gcmdiYSgpXG4gICAgICAgIGNvbG9yID0gcy5zbGljZSg1LCAtMSkuc3BsaXQoJywnKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgbm9ybWFsaXplKGNvbG9yKTtcbiAgICB9XG4gICAgZWxzZSBpZiAocy5pbmRleE9mKCdyZ2IoJykgPT0gMCkge1xuICAgICAgICAvLyByZ2IoKVxuICAgICAgICBjb2xvciA9IHMuc2xpY2UoNCwgLTEpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG4gICAgICAgIGNvbG9yLnB1c2goMSk7XG4gICAgICAgIG5vcm1hbGl6ZShjb2xvcik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBhc3NlcnQoZmFsc2UsIDE0KTsgLy8gSW52YWxpZCBjb2xvclxuICAgIH1cbiAgICByZXR1cm4gY29sb3I7XG59XG4vKipcbiAqIFRPRE8gdGhpcyBmdW5jdGlvbiBpcyBvbmx5IHVzZWQgaW4gdGhlIHRlc3QsIHdlIHByb2JhYmx5IHNob3VsZG4ndCBleHBvcnQgaXRcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7Q29sb3J9IENsYW1wZWQgY29sb3IuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUoY29sb3IpIHtcbiAgICBjb2xvclswXSA9IGNsYW1wKChjb2xvclswXSArIDAuNSkgfCAwLCAwLCAyNTUpO1xuICAgIGNvbG9yWzFdID0gY2xhbXAoKGNvbG9yWzFdICsgMC41KSB8IDAsIDAsIDI1NSk7XG4gICAgY29sb3JbMl0gPSBjbGFtcCgoY29sb3JbMl0gKyAwLjUpIHwgMCwgMCwgMjU1KTtcbiAgICBjb2xvclszXSA9IGNsYW1wKGNvbG9yWzNdLCAwLCAxKTtcbiAgICByZXR1cm4gY29sb3I7XG59XG4vKipcbiAqIEBwYXJhbSB7Q29sb3J9IGNvbG9yIENvbG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBTdHJpbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1N0cmluZyhjb2xvcikge1xuICAgIHZhciByID0gY29sb3JbMF07XG4gICAgaWYgKHIgIT0gKHIgfCAwKSkge1xuICAgICAgICByID0gKHIgKyAwLjUpIHwgMDtcbiAgICB9XG4gICAgdmFyIGcgPSBjb2xvclsxXTtcbiAgICBpZiAoZyAhPSAoZyB8IDApKSB7XG4gICAgICAgIGcgPSAoZyArIDAuNSkgfCAwO1xuICAgIH1cbiAgICB2YXIgYiA9IGNvbG9yWzJdO1xuICAgIGlmIChiICE9IChiIHwgMCkpIHtcbiAgICAgICAgYiA9IChiICsgMC41KSB8IDA7XG4gICAgfVxuICAgIHZhciBhID0gY29sb3JbM10gPT09IHVuZGVmaW5lZCA/IDEgOiBjb2xvclszXTtcbiAgICByZXR1cm4gJ3JnYmEoJyArIHIgKyAnLCcgKyBnICsgJywnICsgYiArICcsJyArIGEgKyAnKSc7XG59XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZy5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHN0cmluZyBpcyBhY3R1YWxseSBhIHZhbGlkIGNvbG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZ0NvbG9yKHMpIHtcbiAgICBpZiAoTkFNRURfQ09MT1JfUkVfLnRlc3QocykpIHtcbiAgICAgICAgcyA9IGZyb21OYW1lZChzKTtcbiAgICB9XG4gICAgcmV0dXJuIChIRVhfQ09MT1JfUkVfLnRlc3QocykgfHwgcy5pbmRleE9mKCdyZ2JhKCcpID09PSAwIHx8IHMuaW5kZXhPZigncmdiKCcpID09PSAwKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbG9yLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyZXIvTWFwXG4gKi9cbmltcG9ydCBEaXNwb3NhYmxlIGZyb20gJy4uL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IHsgVFJVRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhYnN0cmFjdCB9IGZyb20gJy4uL3V0aWwuanMnO1xuaW1wb3J0IHsgY29tcG9zZSBhcyBjb21wb3NlVHJhbnNmb3JtLCBtYWtlSW52ZXJzZSB9IGZyb20gJy4uL3RyYW5zZm9ybS5qcyc7XG5pbXBvcnQgeyBnZXRXaWR0aCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBzaGFyZWQgYXMgaWNvbkltYWdlQ2FjaGUgfSBmcm9tICcuLi9zdHlsZS9JY29uSW1hZ2VDYWNoZS5qcyc7XG5pbXBvcnQgeyBpblZpZXcgfSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgeyB3cmFwWCB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiBIaXRNYXRjaFxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9IGxheWVyIExheWVyLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9nZW9tL1NpbXBsZUdlb21ldHJ5LmpzXCIpLmRlZmF1bHR9IGdlb21ldHJ5IEdlb21ldHJ5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGRpc3RhbmNlU3EgU3F1YXJlZCBkaXN0YW5jZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi92ZWN0b3IuanNcIikuRmVhdHVyZUNhbGxiYWNrPFQ+fSBjYWxsYmFjayBDYWxsYmFjay5cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbi8qKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBNYXBSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBSZW5kZXJlcihtYXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9yZW5kZXIvRXZlbnRUeXBlLmpzXCIpLmRlZmF1bHR9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwYXRjaFJlbmRlckV2ZW50ID0gZnVuY3Rpb24gKHR5cGUsIGZyYW1lU3RhdGUpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWVTdGF0ZS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLmNhbGN1bGF0ZU1hdHJpY2VzMkQgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIHZhciBjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSA9IGZyYW1lU3RhdGUuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm07XG4gICAgICAgIHZhciBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSA9IGZyYW1lU3RhdGUucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm07XG4gICAgICAgIGNvbXBvc2VUcmFuc2Zvcm0oY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGZyYW1lU3RhdGUuc2l6ZVswXSAvIDIsIGZyYW1lU3RhdGUuc2l6ZVsxXSAvIDIsIDEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbiwgLTEgLyB2aWV3U3RhdGUucmVzb2x1dGlvbiwgLXZpZXdTdGF0ZS5yb3RhdGlvbiwgLXZpZXdTdGF0ZS5jZW50ZXJbMF0sIC12aWV3U3RhdGUuY2VudGVyWzFdKTtcbiAgICAgICAgbWFrZUludmVyc2UocGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0sIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjaGVja1dyYXBwZWQgQ2hlY2sgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdmVjdG9yLmpzXCIpLkZlYXR1cmVDYWxsYmFjazxUPn0gY2FsbGJhY2sgRmVhdHVyZSBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge1N9IHRoaXNBcmcgVmFsdWUgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyBgY2FsbGJhY2tgLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogVSwgaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcGFyYW0ge1V9IHRoaXNBcmcyIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBTLFQsVVxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgY2FsbGJhY2ssIHRoaXNBcmcsIGxheWVyRmlsdGVyLCB0aGlzQXJnMikge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG1hbmFnZWQgTWFuYWdlZCBsYXllci5cbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9GZWF0dXJlLmpzXCIpLkZlYXR1cmVMaWtlfSBmZWF0dXJlIEZlYXR1cmUuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZ2VvbS9HZW9tZXRyeS5qc1wiKS5kZWZhdWx0fSBnZW9tZXRyeSBHZW9tZXRyeS5cbiAgICAgICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKG1hbmFnZWQsIGZlYXR1cmUsIGxheWVyLCBnZW9tZXRyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZmVhdHVyZSwgbWFuYWdlZCA/IGxheWVyIDogbnVsbCwgZ2VvbWV0cnkpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwcm9qZWN0aW9uID0gdmlld1N0YXRlLnByb2plY3Rpb247XG4gICAgICAgIHZhciB0cmFuc2xhdGVkQ29vcmRpbmF0ZSA9IHdyYXBYKGNvb3JkaW5hdGUuc2xpY2UoKSwgcHJvamVjdGlvbik7XG4gICAgICAgIHZhciBvZmZzZXRzID0gW1swLCAwXV07XG4gICAgICAgIGlmIChwcm9qZWN0aW9uLmNhbldyYXBYKCkgJiYgY2hlY2tXcmFwcGVkKSB7XG4gICAgICAgICAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgICAgICAgICB2YXIgd29ybGRXaWR0aCA9IGdldFdpZHRoKHByb2plY3Rpb25FeHRlbnQpO1xuICAgICAgICAgICAgb2Zmc2V0cy5wdXNoKFstd29ybGRXaWR0aCwgMF0sIFt3b3JsZFdpZHRoLCAwXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxheWVyU3RhdGVzID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICB2YXIgbnVtTGF5ZXJzID0gbGF5ZXJTdGF0ZXMubGVuZ3RoO1xuICAgICAgICB2YXIgbWF0Y2hlcyA9IC8qKiBAdHlwZSB7QXJyYXk8SGl0TWF0Y2g8VD4+fSAqLyAoW10pO1xuICAgICAgICB2YXIgdG1wQ29vcmQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvZmZzZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gbnVtTGF5ZXJzIC0gMTsgaiA+PSAwOyAtLWopIHtcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzW2pdO1xuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGUubGF5ZXI7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5WaWV3KGxheWVyU3RhdGUsIHZpZXdTdGF0ZSkgJiZcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJGaWx0ZXIuY2FsbCh0aGlzQXJnMiwgbGF5ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXllclJlbmRlcmVyID0gbGF5ZXIuZ2V0UmVuZGVyZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXJSZW5kZXJlciAmJiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9IHNvdXJjZS5nZXRXcmFwWCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0cmFuc2xhdGVkQ29vcmRpbmF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogY29vcmRpbmF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFja18xID0gZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUuYmluZChudWxsLCBsYXllclN0YXRlLm1hbmFnZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG1wQ29vcmRbMF0gPSBjb29yZGluYXRlc1swXSArIG9mZnNldHNbaV1bMF07XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBDb29yZFsxXSA9IGNvb3JkaW5hdGVzWzFdICsgb2Zmc2V0c1tpXVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGxheWVyUmVuZGVyZXIuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUodG1wQ29vcmQsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2tfMSwgbWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9yZGVyID0gMSAvIG1hdGNoZXMubGVuZ3RoO1xuICAgICAgICBtYXRjaGVzLmZvckVhY2goZnVuY3Rpb24gKG0sIGkpIHsgcmV0dXJuIChtLmRpc3RhbmNlU3EgKz0gaSAqIG9yZGVyKTsgfSk7XG4gICAgICAgIG1hdGNoZXMuc29ydChmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYS5kaXN0YW5jZVNxIC0gYi5kaXN0YW5jZVNxOyB9KTtcbiAgICAgICAgbWF0Y2hlcy5zb21lKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9IG0uY2FsbGJhY2sobS5mZWF0dXJlLCBtLmxheWVyLCBtLmdlb21ldHJ5KSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gcGl4ZWwgUGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFjayBMYXllclxuICAgICAqICAgICBjYWxsYmFjay5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IENhbGxiYWNrIHJlc3VsdC5cbiAgICAgKiBAdGVtcGxhdGUgVFxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBsYXllckZpbHRlcikge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIENvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZVN0YXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoaXRUb2xlcmFuY2UgSGl0IHRvbGVyYW5jZSBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjaGVja1dyYXBwZWQgQ2hlY2sgZm9yIHdyYXBwZWQgZ2VvbWV0cmllcy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6IFUsIGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBsYXllckZpbHRlciBMYXllciBmaWx0ZXJcbiAgICAgKiAgICAgZnVuY3Rpb24sIG9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvblxuICAgICAqICAgICByZXR1cm5zIGB0cnVlYCB3aWxsIGJlIHRlc3RlZCBmb3IgZmVhdHVyZXMuICBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZVxuICAgICAqICAgICBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gICAgICogQHBhcmFtIHtVfSB0aGlzQXJnIFZhbHVlIHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgYGxheWVyRmlsdGVyYC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyB0aGVyZSBhIGZlYXR1cmUgYXQgdGhlIGdpdmVuIGNvb3JkaW5hdGU/XG4gICAgICogQHRlbXBsYXRlIFVcbiAgICAgKi9cbiAgICBNYXBSZW5kZXJlci5wcm90b3R5cGUuaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgbGF5ZXJGaWx0ZXIsIHRoaXNBcmcpIHtcbiAgICAgICAgdmFyIGhhc0ZlYXR1cmUgPSB0aGlzLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBUUlVFLCB0aGlzLCBsYXllckZpbHRlciwgdGhpc0FyZyk7XG4gICAgICAgIHJldHVybiBoYXNGZWF0dXJlICE9PSB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5nZXRNYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW5kZXIuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICovXG4gICAgTWFwUmVuZGVyZXIucHJvdG90eXBlLnJlbmRlckZyYW1lID0gZnVuY3Rpb24gKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1hcFJlbmRlcmVyLnByb3RvdHlwZS5zY2hlZHVsZUV4cGlyZUljb25DYWNoZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmIChpY29uSW1hZ2VDYWNoZS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChleHBpcmVJY29uQ2FjaGUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWFwUmVuZGVyZXI7XG59KERpc3Bvc2FibGUpKTtcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGV9IGZyYW1lU3RhdGUgRnJhbWUgc3RhdGUuXG4gKi9cbmZ1bmN0aW9uIGV4cGlyZUljb25DYWNoZShtYXAsIGZyYW1lU3RhdGUpIHtcbiAgICBpY29uSW1hZ2VDYWNoZS5leHBpcmUoKTtcbn1cbmV4cG9ydCBkZWZhdWx0IE1hcFJlbmRlcmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9jc3NcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGb250UGFyYW1ldGVyc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IHN0eWxlIFN0eWxlLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHZhcmlhbnQgVmFyaWFudC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB3ZWlnaHQgV2VpZ2h0LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNpemUgU2l6ZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBsaW5lSGVpZ2h0IExpbmVIZWlnaHQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZmFtaWx5IEZhbWlseS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gZmFtaWxpZXMgRmFtaWxpZXMuXG4gKi9cbi8qKlxuICogVGhlIENTUyBjbGFzcyBmb3IgaGlkZGVuIGZlYXR1cmUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0hJRERFTiA9ICdvbC1oaWRkZW4nO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSBzZWxlY3RhYmxlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19TRUxFQ1RBQkxFID0gJ29sLXNlbGVjdGFibGUnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRvIGhhdmUgdGhlbSB1bnNlbGVjdGFibGUuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX1VOU0VMRUNUQUJMRSA9ICdvbC11bnNlbGVjdGFibGUnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIGZvciB1bnN1cHBvcnRlZCBmZWF0dXJlLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19VTlNVUFBPUlRFRCA9ICdvbC11bnN1cHBvcnRlZCc7XG4vKipcbiAqIFRoZSBDU1MgY2xhc3MgZm9yIGNvbnRyb2xzLlxuICpcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBDTEFTU19DT05UUk9MID0gJ29sLWNvbnRyb2wnO1xuLyoqXG4gKiBUaGUgQ1NTIGNsYXNzIHRoYXQgd2UnbGwgZ2l2ZSB0aGUgRE9NIGVsZW1lbnRzIHRoYXQgYXJlIGNvbGxhcHNlZCwgaS5lLlxuICogdG8gdGhvc2UgZWxlbWVudHMgd2hpY2ggdXN1YWxseSBjYW4gYmUgZXhwYW5kZWQuXG4gKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5leHBvcnQgdmFyIENMQVNTX0NPTExBUFNFRCA9ICdvbC1jb2xsYXBzZWQnO1xuLyoqXG4gKiBGcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwMTM1Njk3L3JlZ2V4LXRvLXBhcnNlLWFueS1jc3MtZm9udFxuICogQHR5cGUge1JlZ0V4cH1cbiAqL1xudmFyIGZvbnRSZWdFeCA9IG5ldyBSZWdFeHAoW1xuICAgICdeXFxcXHMqKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShpdGFsaWN8b2JsaXF1ZSkpPyknLFxuICAgICcoPz0oPzooPzpbLWEtel0rXFxcXHMqKXswLDJ9KHNtYWxsLWNhcHMpKT8pJyxcbiAgICAnKD89KD86KD86Wy1hLXpdK1xcXFxzKil7MCwyfShib2xkKD86ZXIpP3xsaWdodGVyfFsxLTldMDAgKSk/KScsXG4gICAgJyg/Oig/Om5vcm1hbHxcXFxcMXxcXFxcMnxcXFxcMylcXFxccyopezAsM30oKD86eHg/LSk/JyxcbiAgICAnKD86c21hbGx8bGFyZ2UpfG1lZGl1bXxzbWFsbGVyfGxhcmdlcnxbXFxcXC5cXFxcZF0rKD86XFxcXCV8aW58W2NlbV1tfGV4fHBbY3R4XSkpJyxcbiAgICAnKD86XFxcXHMqXFxcXC9cXFxccyoobm9ybWFsfFtcXFxcLlxcXFxkXSsoPzpcXFxcJXxpbnxbY2VtXW18ZXh8cFtjdHhdKT8pKScsXG4gICAgJz9cXFxccyooWy0sXFxcXFwiXFxcXFxcJ1xcXFxzYS16XSs/KVxcXFxzKiQnLFxuXS5qb2luKCcnKSwgJ2knKTtcbnZhciBmb250UmVnRXhNYXRjaEluZGV4ID0gW1xuICAgICdzdHlsZScsXG4gICAgJ3ZhcmlhbnQnLFxuICAgICd3ZWlnaHQnLFxuICAgICdzaXplJyxcbiAgICAnbGluZUhlaWdodCcsXG4gICAgJ2ZhbWlseScsXG5dO1xuLyoqXG4gKiBHZXQgdGhlIGxpc3Qgb2YgZm9udCBmYW1pbGllcyBmcm9tIGEgZm9udCBzcGVjLiAgTm90ZSB0aGF0IHRoaXMgZG9lc24ndCB3b3JrXG4gKiBmb3IgZm9udCBmYW1pbGllcyB0aGF0IGhhdmUgY29tbWFzIGluIHRoZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9udFNwZWMgVGhlIENTUyBmb250IHByb3BlcnR5LlxuICogQHJldHVybiB7Rm9udFBhcmFtZXRlcnN9IFRoZSBmb250IHBhcmFtZXRlcnMgKG9yIG51bGwgaWYgdGhlIGlucHV0IHNwZWMgaXMgaW52YWxpZCkuXG4gKi9cbmV4cG9ydCB2YXIgZ2V0Rm9udFBhcmFtZXRlcnMgPSBmdW5jdGlvbiAoZm9udFNwZWMpIHtcbiAgICB2YXIgbWF0Y2ggPSBmb250U3BlYy5tYXRjaChmb250UmVnRXgpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBzdHlsZSA9IC8qKiBAdHlwZSB7Rm9udFBhcmFtZXRlcnN9ICovICh7XG4gICAgICAgIGxpbmVIZWlnaHQ6ICdub3JtYWwnLFxuICAgICAgICBzaXplOiAnMS4yZW0nLFxuICAgICAgICBzdHlsZTogJ25vcm1hbCcsXG4gICAgICAgIHdlaWdodDogJ25vcm1hbCcsXG4gICAgICAgIHZhcmlhbnQ6ICdub3JtYWwnLFxuICAgIH0pO1xuICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGZvbnRSZWdFeE1hdGNoSW5kZXgubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBtYXRjaFtpICsgMV07XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzdHlsZVtmb250UmVnRXhNYXRjaEluZGV4W2ldXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN0eWxlLmZhbWlsaWVzID0gc3R5bGUuZmFtaWx5LnNwbGl0KC8sXFxzPy8pO1xuICAgIHJldHVybiBzdHlsZTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jc3MuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3JlbmRlci9jYW52YXNcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuLi9ldmVudHMvVGFyZ2V0LmpzJztcbmltcG9ydCB7IFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTIH0gZnJvbSAnLi4vaGFzLmpzJztcbmltcG9ydCB7IGNsZWFyIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4uL2RvbS5qcyc7XG5pbXBvcnQgeyBnZXRGb250UGFyYW1ldGVycyB9IGZyb20gJy4uL2Nzcy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEZpbGxTdGF0ZVxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBmaWxsU3R5bGUgRmlsbFN0eWxlLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIExhYmVsXG4gKiBAcHJvcGVydHkge251bWJlcn0gd2lkdGggV2lkdGguXG4gKiBAcHJvcGVydHkge251bWJlcn0gaGVpZ2h0IEhlaWdodC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nfG51bWJlcj59IGNvbnRleHRJbnN0cnVjdGlvbnMgQ29udGV4dEluc3RydWN0aW9ucy5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBGaWxsU3Ryb2tlU3RhdGVcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2N1cnJlbnRGaWxsU3R5bGVdIEN1cnJlbnQgRmlsbFN0eWxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbY3VycmVudFN0cm9rZVN0eWxlXSBDdXJyZW50IFN0cm9rZVN0eWxlLlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBbY3VycmVudExpbmVDYXBdIEN1cnJlbnQgTGluZUNhcC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gY3VycmVudExpbmVEYXNoIEN1cnJlbnQgTGluZURhc2guXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lRGFzaE9mZnNldF0gQ3VycmVudCBMaW5lRGFzaE9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtjdXJyZW50TGluZUpvaW5dIEN1cnJlbnQgTGluZUpvaW4uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N1cnJlbnRMaW5lV2lkdGhdIEN1cnJlbnQgTGluZVdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtjdXJyZW50TWl0ZXJMaW1pdF0gQ3VycmVudCBNaXRlckxpbWl0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtsYXN0U3Ryb2tlXSBMYXN0IHN0cm9rZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gW2ZpbGxTdHlsZV0gRmlsbFN0eWxlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfSBbc3Ryb2tlU3R5bGVdIFN0cm9rZVN0eWxlLlxuICogQHByb3BlcnR5IHtDYW52YXNMaW5lQ2FwfSBbbGluZUNhcF0gTGluZUNhcC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2ggTGluZURhc2guXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xpbmVEYXNoT2Zmc2V0XSBMaW5lRGFzaE9mZnNldC5cbiAqIEBwcm9wZXJ0eSB7Q2FudmFzTGluZUpvaW59IFtsaW5lSm9pbl0gTGluZUpvaW4uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2xpbmVXaWR0aF0gTGluZVdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaXRlckxpbWl0XSBNaXRlckxpbWl0LlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFN0cm9rZVN0YXRlXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVDYXB9IGxpbmVDYXAgTGluZUNhcC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8bnVtYmVyPn0gbGluZURhc2ggTGluZURhc2guXG4gKiBAcHJvcGVydHkge251bWJlcn0gbGluZURhc2hPZmZzZXQgTGluZURhc2hPZmZzZXQuXG4gKiBAcHJvcGVydHkge0NhbnZhc0xpbmVKb2lufSBsaW5lSm9pbiBMaW5lSm9pbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBsaW5lV2lkdGggTGluZVdpZHRoLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IG1pdGVyTGltaXQgTWl0ZXJMaW1pdC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vY29sb3JsaWtlLmpzXCIpLkNvbG9yTGlrZX0gc3Ryb2tlU3R5bGUgU3Ryb2tlU3R5bGUuXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gVGV4dFN0YXRlXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZm9udCBGb250LlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0ZXh0QWxpZ25dIFRleHRBbGlnbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB0ZXh0QmFzZWxpbmUgVGV4dEJhc2VsaW5lLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtwbGFjZW1lbnRdIFBsYWNlbWVudC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4QW5nbGVdIE1heEFuZ2xlLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3ZlcmZsb3ddIE92ZXJmbG93LlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9zdHlsZS9GaWxsLmpzXCIpLmRlZmF1bHR9IFtiYWNrZ3JvdW5kRmlsbF0gQmFja2dyb3VuZEZpbGwuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3N0eWxlL1N0cm9rZS5qc1wiKS5kZWZhdWx0fSBbYmFja2dyb3VuZFN0cm9rZV0gQmFja2dyb3VuZFN0cm9rZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbc2NhbGVdIFNjYWxlLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBbcGFkZGluZ10gUGFkZGluZy5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBTZXJpYWxpemFibGVJbnN0cnVjdGlvbnNcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8Kj59IGluc3RydWN0aW9ucyBUaGUgcmVuZGVyaW5nIGluc3RydWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8Kj59IGhpdERldGVjdGlvbkluc3RydWN0aW9ucyBUaGUgcmVuZGVyaW5nIGhpdCBkZXRlY3Rpb24gaW5zdHJ1Y3Rpb25zLlxuICogQHByb3BlcnR5IHtBcnJheTxudW1iZXI+fSBjb29yZGluYXRlcyBUaGUgYXJyYXkgb2YgYWxsIGNvb3JkaW5hdGVzLlxuICogQHByb3BlcnR5IHshT2JqZWN0PHN0cmluZywgVGV4dFN0YXRlPn0gW3RleHRTdGF0ZXNdIFRoZSB0ZXh0IHN0YXRlcyAoZGVjbHV0dGVyaW5nKS5cbiAqIEBwcm9wZXJ0eSB7IU9iamVjdDxzdHJpbmcsIEZpbGxTdGF0ZT59IFtmaWxsU3RhdGVzXSBUaGUgZmlsbCBzdGF0ZXMgKGRlY2x1dHRlcmluZykuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBTdHJva2VTdGF0ZT59IFtzdHJva2VTdGF0ZXNdIFRoZSBzdHJva2Ugc3RhdGVzIChkZWNsdXR0ZXJpbmcpLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3Q8bnVtYmVyLCBpbXBvcnQoXCIuL2NhbnZhcy9FeGVjdXRvci5qc1wiKS5SZXBsYXlJbWFnZU9yTGFiZWxBcmdzPn0gRGVjbHV0dGVySW1hZ2VXaXRoVGV4dFxuICovXG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBkZWZhdWx0Rm9udCA9ICcxMHB4IHNhbnMtc2VyaWYnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb2xvcmxpa2UuanNcIikuQ29sb3JMaWtlfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRGaWxsU3R5bGUgPSAnIzAwMCc7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge0NhbnZhc0xpbmVDYXB9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVDYXAgPSAncm91bmQnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRMaW5lRGFzaCA9IFtdO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVEYXNoT2Zmc2V0ID0gMDtcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7Q2FudmFzTGluZUpvaW59XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVKb2luID0gJ3JvdW5kJztcbi8qKlxuICogQGNvbnN0XG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRNaXRlckxpbWl0ID0gMTA7XG4vKipcbiAqIEBjb25zdFxuICogQHR5cGUge2ltcG9ydChcIi4uL2NvbG9ybGlrZS5qc1wiKS5Db2xvckxpa2V9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFN0cm9rZVN0eWxlID0gJyMwMDAnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFRleHRBbGlnbiA9ICdjZW50ZXInO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdFRleHRCYXNlbGluZSA9ICdtaWRkbGUnO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtBcnJheTxudW1iZXI+fVxuICovXG5leHBvcnQgdmFyIGRlZmF1bHRQYWRkaW5nID0gWzAsIDAsIDAsIDBdO1xuLyoqXG4gKiBAY29uc3RcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCB2YXIgZGVmYXVsdExpbmVXaWR0aCA9IDE7XG4vKipcbiAqIEB0eXBlIHtCYXNlT2JqZWN0fVxuICovXG5leHBvcnQgdmFyIGNoZWNrZWRGb250cyA9IG5ldyBCYXNlT2JqZWN0KCk7XG4vKipcbiAqIFRoZSBsYWJlbCBjYWNoZSBmb3IgdGV4dCByZW5kZXJpbmcuIFRvIGNoYW5nZSB0aGUgZGVmYXVsdCBjYWNoZSBzaXplIG9mIDIwNDhcbiAqIGVudHJpZXMsIHVzZSB7QGxpbmsgbW9kdWxlOm9sL3N0cnVjdHMvTFJVQ2FjaGV+TFJVQ2FjaGUjc2V0U2l6ZSBjYWNoZS5zZXRTaXplKCl9LlxuICogRGVwcmVjYXRlZCAtIHRoZXJlIGlzIG5vIGxhYmVsIGNhY2hlIGFueSBtb3JlLlxuICogQHR5cGUgez99XG4gKiBAYXBpXG4gKiBAZGVwcmVjYXRlZFxuICovXG5leHBvcnQgdmFyIGxhYmVsQ2FjaGUgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbmxhYmVsQ2FjaGUuc2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLndhcm4oJ2xhYmVsQ2FjaGUgaXMgZGVwcmVjYXRlZC4nKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lXG59O1xuLyoqXG4gKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxuICovXG52YXIgbWVhc3VyZUNvbnRleHQgPSBudWxsO1xuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgbWVhc3VyZUZvbnQ7XG4vKipcbiAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn1cbiAqL1xuZXhwb3J0IHZhciB0ZXh0SGVpZ2h0cyA9IHt9O1xuLyoqXG4gKiBDbGVhcnMgdGhlIGxhYmVsIGNhY2hlIHdoZW4gYSBmb250IGJlY29tZXMgYXZhaWxhYmxlLlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnRTcGVjIENTUyBmb250IHNwZWMuXG4gKi9cbmV4cG9ydCB2YXIgcmVnaXN0ZXJGb250ID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV0cmllcyA9IDEwMDtcbiAgICB2YXIgc2l6ZSA9ICczMnB4ICc7XG4gICAgdmFyIHJlZmVyZW5jZUZvbnRzID0gWydtb25vc3BhY2UnLCAnc2VyaWYnXTtcbiAgICB2YXIgbGVuID0gcmVmZXJlbmNlRm9udHMubGVuZ3RoO1xuICAgIHZhciB0ZXh0ID0gJ3dteXR6aWxXTVlUWklMQCMvJj8kJTEwXFx1RjAxMyc7XG4gICAgdmFyIGludGVydmFsLCByZWZlcmVuY2VXaWR0aDtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZm9udFN0eWxlIENzcyBmb250LXN0eWxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGZvbnRXZWlnaHQgQ3NzIGZvbnQtd2VpZ2h0XG4gICAgICogQHBhcmFtIHsqfSBmb250RmFtaWx5IENzcyBmb250LWZhbWlseVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEZvbnQgd2l0aCBzdHlsZSBhbmQgd2VpZ2h0IGlzIGF2YWlsYWJsZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGlzQXZhaWxhYmxlKGZvbnRTdHlsZSwgZm9udFdlaWdodCwgZm9udEZhbWlseSkge1xuICAgICAgICB2YXIgYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgICAgICAgICAgdmFyIHJlZmVyZW5jZUZvbnQgPSByZWZlcmVuY2VGb250c1tpXTtcbiAgICAgICAgICAgIHJlZmVyZW5jZVdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250U3R5bGUgKyAnICcgKyBmb250V2VpZ2h0ICsgJyAnICsgc2l6ZSArIHJlZmVyZW5jZUZvbnQsIHRleHQpO1xuICAgICAgICAgICAgaWYgKGZvbnRGYW1pbHkgIT0gcmVmZXJlbmNlRm9udCkge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udFN0eWxlICtcbiAgICAgICAgICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodCArXG4gICAgICAgICAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAgICAgICAgIHNpemUgK1xuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5ICtcbiAgICAgICAgICAgICAgICAgICAgJywnICtcbiAgICAgICAgICAgICAgICAgICAgcmVmZXJlbmNlRm9udCwgdGV4dCk7XG4gICAgICAgICAgICAgICAgLy8gSWYgd2lkdGggYW5kIHJlZmVyZW5jZVdpZHRoIGFyZSB0aGUgc2FtZSwgdGhlbiB0aGUgZmFsbGJhY2sgd2FzIHVzZWRcbiAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIG9mIHRoZSBmb250IHdlIHdhbnRlZCwgc28gdGhlIGZvbnQgaXMgbm90IGF2YWlsYWJsZS5cbiAgICAgICAgICAgICAgICBhdmFpbGFibGUgPSBhdmFpbGFibGUgJiYgd2lkdGggIT0gcmVmZXJlbmNlV2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGF2YWlsYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjaGVjaygpIHtcbiAgICAgICAgdmFyIGRvbmUgPSB0cnVlO1xuICAgICAgICB2YXIgZm9udHMgPSBjaGVja2VkRm9udHMuZ2V0S2V5cygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBmb250cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZm9udCA9IGZvbnRzW2ldO1xuICAgICAgICAgICAgaWYgKGNoZWNrZWRGb250cy5nZXQoZm9udCkgPCByZXRyaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXZhaWxhYmxlLmFwcGx5KHRoaXMsIGZvbnQuc3BsaXQoJ1xcbicpKSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhcih0ZXh0SGVpZ2h0cyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IGxvYWRlZCBmb250cyBhcmUgcGlja2VkIHVwIGJ5IFNhZmFyaVxuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlQ29udGV4dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVGb250ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkRm9udHMuc2V0KGZvbnQsIHJldHJpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZEZvbnRzLnNldChmb250LCBjaGVja2VkRm9udHMuZ2V0KGZvbnQpICsgMSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgaW50ZXJ2YWwgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmb250U3BlYykge1xuICAgICAgICB2YXIgZm9udCA9IGdldEZvbnRQYXJhbWV0ZXJzKGZvbnRTcGVjKTtcbiAgICAgICAgaWYgKCFmb250KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZhbWlsaWVzID0gZm9udC5mYW1pbGllcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gZmFtaWxpZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgdmFyIGZhbWlseSA9IGZhbWlsaWVzW2ldO1xuICAgICAgICAgICAgdmFyIGtleSA9IGZvbnQuc3R5bGUgKyAnXFxuJyArIGZvbnQud2VpZ2h0ICsgJ1xcbicgKyBmYW1pbHk7XG4gICAgICAgICAgICBpZiAoY2hlY2tlZEZvbnRzLmdldChrZXkpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjaGVja2VkRm9udHMuc2V0KGtleSwgcmV0cmllcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc0F2YWlsYWJsZShmb250LnN0eWxlLCBmb250LndlaWdodCwgZmFtaWx5KSkge1xuICAgICAgICAgICAgICAgICAgICBjaGVja2VkRm9udHMuc2V0KGtleSwgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnZhbCA9IHNldEludGVydmFsKGNoZWNrLCAzMik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gTWVhc3VyZW1lbnQuXG4gKi9cbmV4cG9ydCB2YXIgbWVhc3VyZVRleHRIZWlnaHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH1cbiAgICAgKi9cbiAgICB2YXIgbWVhc3VyZUVsZW1lbnQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmb250U3BlYykge1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdGV4dEhlaWdodHNbZm9udFNwZWNdO1xuICAgICAgICBpZiAoaGVpZ2h0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaWYgKFdPUktFUl9PRkZTQ1JFRU5fQ0FOVkFTKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvbnQgPSBnZXRGb250UGFyYW1ldGVycyhmb250U3BlYyk7XG4gICAgICAgICAgICAgICAgdmFyIG1ldHJpY3MgPSBtZWFzdXJlVGV4dChmb250U3BlYywgJ8W9ZycpO1xuICAgICAgICAgICAgICAgIHZhciBsaW5lSGVpZ2h0ID0gaXNOYU4oTnVtYmVyKGZvbnQubGluZUhlaWdodCkpXG4gICAgICAgICAgICAgICAgICAgID8gMS4yXG4gICAgICAgICAgICAgICAgICAgIDogTnVtYmVyKGZvbnQubGluZUhlaWdodCk7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID1cbiAgICAgICAgICAgICAgICAgICAgbGluZUhlaWdodCAqXG4gICAgICAgICAgICAgICAgICAgICAgICAobWV0cmljcy5hY3R1YWxCb3VuZGluZ0JveEFzY2VudCArIG1ldHJpY3MuYWN0dWFsQm91bmRpbmdCb3hEZXNjZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghbWVhc3VyZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuaW5uZXJIVE1MID0gJ00nO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5taW5IZWlnaHQgPSAnMCc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLm1heEhlaWdodCA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5wYWRkaW5nID0gJzAnO1xuICAgICAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVFbGVtZW50LnN0eWxlLmxlZnQgPSAnLTk5OTk5cHgnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtZWFzdXJlRWxlbWVudC5zdHlsZS5mb250ID0gZm9udFNwZWM7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChtZWFzdXJlRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gbWVhc3VyZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQobWVhc3VyZUVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dEhlaWdodHNbZm9udFNwZWNdID0gaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoZWlnaHQ7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IEZvbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0LlxuICogQHJldHVybiB7VGV4dE1ldHJpY3N9IFRleHQgbWV0cmljcy5cbiAqL1xuZnVuY3Rpb24gbWVhc3VyZVRleHQoZm9udCwgdGV4dCkge1xuICAgIGlmICghbWVhc3VyZUNvbnRleHQpIHtcbiAgICAgICAgbWVhc3VyZUNvbnRleHQgPSBjcmVhdGVDYW52YXNDb250ZXh0MkQoMSwgMSk7XG4gICAgfVxuICAgIGlmIChmb250ICE9IG1lYXN1cmVGb250KSB7XG4gICAgICAgIG1lYXN1cmVDb250ZXh0LmZvbnQgPSBmb250O1xuICAgICAgICBtZWFzdXJlRm9udCA9IG1lYXN1cmVDb250ZXh0LmZvbnQ7XG4gICAgfVxuICAgIHJldHVybiBtZWFzdXJlQ29udGV4dC5tZWFzdXJlVGV4dCh0ZXh0KTtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0IFRleHQuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFdpZHRoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVhc3VyZVRleHRXaWR0aChmb250LCB0ZXh0KSB7XG4gICAgcmV0dXJuIG1lYXN1cmVUZXh0KGZvbnQsIHRleHQpLndpZHRoO1xufVxuLyoqXG4gKiBNZWFzdXJlIHRleHQgd2lkdGggdXNpbmcgYSBjYWNoZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250IFRoZSBmb250LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgVGhlIHRleHQgdG8gbWVhc3VyZS5cbiAqIEBwYXJhbSB7T2JqZWN0PHN0cmluZywgbnVtYmVyPn0gY2FjaGUgQSBsb29rdXAgb2YgY2FjaGVkIHdpZHRocyBieSB0ZXh0LlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgdGV4dCB3aWR0aC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVBbmRDYWNoZVRleHRXaWR0aChmb250LCB0ZXh0LCBjYWNoZSkge1xuICAgIGlmICh0ZXh0IGluIGNhY2hlKSB7XG4gICAgICAgIHJldHVybiBjYWNoZVt0ZXh0XTtcbiAgICB9XG4gICAgdmFyIHdpZHRoID0gbWVhc3VyZVRleHRXaWR0aChmb250LCB0ZXh0KTtcbiAgICBjYWNoZVt0ZXh0XSA9IHdpZHRoO1xuICAgIHJldHVybiB3aWR0aDtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvbnQgRm9udCB0byB1c2UgZm9yIG1lYXN1cmluZy5cbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gbGluZXMgTGluZXMgdG8gbWVhc3VyZS5cbiAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gd2lkdGhzIEFycmF5IHdpbGwgYmUgcG9wdWxhdGVkIHdpdGggdGhlIHdpZHRocyBvZlxuICogZWFjaCBsaW5lLlxuICogQHJldHVybiB7bnVtYmVyfSBXaWR0aCBvZiB0aGUgd2hvbGUgdGV4dC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lYXN1cmVUZXh0V2lkdGhzKGZvbnQsIGxpbmVzLCB3aWR0aHMpIHtcbiAgICB2YXIgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XG4gICAgdmFyIHdpZHRoID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUxpbmVzOyArK2kpIHtcbiAgICAgICAgdmFyIGN1cnJlbnRXaWR0aCA9IG1lYXN1cmVUZXh0V2lkdGgoZm9udCwgbGluZXNbaV0pO1xuICAgICAgICB3aWR0aCA9IE1hdGgubWF4KHdpZHRoLCBjdXJyZW50V2lkdGgpO1xuICAgICAgICB3aWR0aHMucHVzaChjdXJyZW50V2lkdGgpO1xuICAgIH1cbiAgICByZXR1cm4gd2lkdGg7XG59XG4vKipcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge251bWJlcn0gcm90YXRpb24gUm90YXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0WCBYIG9mZnNldC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRZIFkgb2Zmc2V0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gcm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sIG9mZnNldFgsIG9mZnNldFkpIHtcbiAgICBpZiAocm90YXRpb24gIT09IDApIHtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUob2Zmc2V0WCwgb2Zmc2V0WSk7XG4gICAgICAgIGNvbnRleHQucm90YXRlKHJvdGF0aW9uKTtcbiAgICAgICAgY29udGV4dC50cmFuc2xhdGUoLW9mZnNldFgsIC1vZmZzZXRZKTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0IENvbnRleHQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm18bnVsbH0gdHJhbnNmb3JtIFRyYW5zZm9ybS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvcGFjaXR5IE9wYWNpdHkuXG4gKiBAcGFyYW0ge0xhYmVsfEhUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gbGFiZWxPckltYWdlIExhYmVsLlxuICogQHBhcmFtIHtudW1iZXJ9IG9yaWdpblggT3JpZ2luIFguXG4gKiBAcGFyYW0ge251bWJlcn0gb3JpZ2luWSBPcmlnaW4gWS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB3IFdpZHRoLlxuICogQHBhcmFtIHtudW1iZXJ9IGggSGVpZ2h0LlxuICogQHBhcmFtIHtudW1iZXJ9IHggWC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gc2NhbGUgU2NhbGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkcmF3SW1hZ2VPckxhYmVsKGNvbnRleHQsIHRyYW5zZm9ybSwgb3BhY2l0eSwgbGFiZWxPckltYWdlLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCB4LCB5LCBzY2FsZSkge1xuICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgIGlmIChvcGFjaXR5ICE9PSAxKSB7XG4gICAgICAgIGNvbnRleHQuZ2xvYmFsQWxwaGEgKj0gb3BhY2l0eTtcbiAgICB9XG4gICAgaWYgKHRyYW5zZm9ybSkge1xuICAgICAgICBjb250ZXh0LnNldFRyYW5zZm9ybS5hcHBseShjb250ZXh0LCB0cmFuc2Zvcm0pO1xuICAgIH1cbiAgICBpZiAoIC8qKiBAdHlwZSB7Kn0gKi8obGFiZWxPckltYWdlKS5jb250ZXh0SW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgIC8vIGxhYmVsXG4gICAgICAgIGNvbnRleHQudHJhbnNsYXRlKHgsIHkpO1xuICAgICAgICBjb250ZXh0LnNjYWxlKHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGV4ZWN1dGVMYWJlbEluc3RydWN0aW9ucygvKiogQHR5cGUge0xhYmVsfSAqLyAobGFiZWxPckltYWdlKSwgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjYWxlWzBdIDwgMCB8fCBzY2FsZVsxXSA8IDApIHtcbiAgICAgICAgLy8gZmxpcHBlZCBpbWFnZVxuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4LCB5KTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzY2FsZVswXSwgc2NhbGVbMV0pO1xuICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShcbiAgICAgICAgLyoqIEB0eXBlIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9ICovIChsYWJlbE9ySW1hZ2UpLCBvcmlnaW5YLCBvcmlnaW5ZLCB3LCBoLCAwLCAwLCB3LCBoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIGlmIGltYWdlIG5vdCBmbGlwcGVkIHRyYW5zbGF0ZSBhbmQgc2NhbGUgY2FuIGJlIGF2b2lkZWRcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UoXG4gICAgICAgIC8qKiBAdHlwZSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSAqLyAobGFiZWxPckltYWdlKSwgb3JpZ2luWCwgb3JpZ2luWSwgdywgaCwgeCwgeSwgdyAqIHNjYWxlWzBdLCBoICogc2NhbGVbMV0pO1xuICAgIH1cbiAgICBjb250ZXh0LnJlc3RvcmUoKTtcbn1cbi8qKlxuICogQHBhcmFtIHtMYWJlbH0gbGFiZWwgTGFiZWwuXG4gKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dCBDb250ZXh0LlxuICovXG5mdW5jdGlvbiBleGVjdXRlTGFiZWxJbnN0cnVjdGlvbnMobGFiZWwsIGNvbnRleHQpIHtcbiAgICB2YXIgY29udGV4dEluc3RydWN0aW9ucyA9IGxhYmVsLmNvbnRleHRJbnN0cnVjdGlvbnM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGlpID0gY29udGV4dEluc3RydWN0aW9ucy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbnRleHRJbnN0cnVjdGlvbnNbaSArIDFdKSkge1xuICAgICAgICAgICAgY29udGV4dFtjb250ZXh0SW5zdHJ1Y3Rpb25zW2ldXS5hcHBseShjb250ZXh0LCBjb250ZXh0SW5zdHJ1Y3Rpb25zW2kgKyAxXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0W2NvbnRleHRJbnN0cnVjdGlvbnNbaV1dID0gY29udGV4dEluc3RydWN0aW9uc1tpICsgMV07XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW52YXMuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZW5kZXJlci9Db21wb3NpdGVcbiAqL1xuaW1wb3J0IE1hcFJlbmRlcmVyIGZyb20gJy4vTWFwLmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudCBmcm9tICcuLi9yZW5kZXIvRXZlbnQuanMnO1xuaW1wb3J0IFJlbmRlckV2ZW50VHlwZSBmcm9tICcuLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuaW1wb3J0IHsgQ0xBU1NfVU5TRUxFQ1RBQkxFIH0gZnJvbSAnLi4vY3NzLmpzJztcbmltcG9ydCB7IGNoZWNrZWRGb250cyB9IGZyb20gJy4uL3JlbmRlci9jYW52YXMuanMnO1xuaW1wb3J0IHsgaW5WaWV3IH0gZnJvbSAnLi4vbGF5ZXIvTGF5ZXIuanMnO1xuaW1wb3J0IHsgbGlzdGVuLCB1bmxpc3RlbkJ5S2V5IH0gZnJvbSAnLi4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHJlcGxhY2VDaGlsZHJlbiB9IGZyb20gJy4uL2RvbS5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENhbnZhcyBtYXAgcmVuZGVyZXIuXG4gKiBAYXBpXG4gKi9cbnZhciBDb21wb3NpdGVNYXBSZW5kZXJlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29tcG9zaXRlTWFwUmVuZGVyZXIsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb21wb3NpdGVNYXBSZW5kZXJlcihtYXApIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgbWFwKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mb250Q2hhbmdlTGlzdGVuZXJLZXlfID0gbGlzdGVuKGNoZWNrZWRGb250cywgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCBtYXAucmVkcmF3VGV4dC5iaW5kKG1hcCkpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxEaXZFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZWxlbWVudF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIHN0eWxlID0gX3RoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICAgIHN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgc3R5bGUuekluZGV4ID0gJzAnO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5jbGFzc05hbWUgPSBDTEFTU19VTlNFTEVDVEFCTEUgKyAnIG9sLWxheWVycyc7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBtYXAuZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShfdGhpcy5lbGVtZW50XywgY29udGFpbmVyLmZpcnN0Q2hpbGQgfHwgbnVsbCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8SFRNTEVsZW1lbnQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2hpbGRyZW5fID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcmVuZGVyL0V2ZW50VHlwZS5qc1wiKS5kZWZhdWx0fSB0eXBlIEV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBDb21wb3NpdGVNYXBSZW5kZXJlci5wcm90b3R5cGUuZGlzcGF0Y2hSZW5kZXJFdmVudCA9IGZ1bmN0aW9uICh0eXBlLCBmcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICBpZiAobWFwLmhhc0xpc3RlbmVyKHR5cGUpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IG5ldyBSZW5kZXJFdmVudCh0eXBlLCB1bmRlZmluZWQsIGZyYW1lU3RhdGUpO1xuICAgICAgICAgICAgbWFwLmRpc3BhdGNoRXZlbnQoZXZlbnRfMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5mb250Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgdGhpcy5lbGVtZW50Xy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVyLlxuICAgICAqIEBwYXJhbSB7P2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqL1xuICAgIENvbXBvc2l0ZU1hcFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXJGcmFtZSA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIGlmICghZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudF8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGN1bGF0ZU1hdHJpY2VzMkQoZnJhbWVTdGF0ZSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUFJFQ09NUE9TRSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnpJbmRleCAtIGIuekluZGV4O1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xuICAgICAgICB0aGlzLmNoaWxkcmVuXy5sZW5ndGggPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2xheWVyL0Jhc2VWZWN0b3IuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZGVjbHV0dGVyTGF5ZXJzID0gW107XG4gICAgICAgIHZhciBwcmV2aW91c0VsZW1lbnQgPSBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBsYXllclN0YXRlc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcbiAgICAgICAgICAgIGZyYW1lU3RhdGUubGF5ZXJJbmRleCA9IGk7XG4gICAgICAgICAgICBpZiAoIWluVmlldyhsYXllclN0YXRlLCB2aWV3U3RhdGUpIHx8XG4gICAgICAgICAgICAgICAgKGxheWVyU3RhdGUuc291cmNlU3RhdGUgIT0gU291cmNlU3RhdGUuUkVBRFkgJiZcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZS5zb3VyY2VTdGF0ZSAhPSBTb3VyY2VTdGF0ZS5VTkRFRklORUQpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBsYXllci5yZW5kZXIoZnJhbWVTdGF0ZSwgcHJldmlvdXNFbGVtZW50KTtcbiAgICAgICAgICAgIGlmICghZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT09IHByZXZpb3VzRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRyZW5fLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgnZ2V0RGVjbHV0dGVyJyBpbiBsYXllcikge1xuICAgICAgICAgICAgICAgIGRlY2x1dHRlckxheWVycy5wdXNoKFxuICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vbGF5ZXIvQmFzZVZlY3Rvci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gZGVjbHV0dGVyTGF5ZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICBkZWNsdXR0ZXJMYXllcnNbaV0ucmVuZGVyRGVjbHV0dGVyKGZyYW1lU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJlcGxhY2VDaGlsZHJlbih0aGlzLmVsZW1lbnRfLCB0aGlzLmNoaWxkcmVuXyk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hSZW5kZXJFdmVudChSZW5kZXJFdmVudFR5cGUuUE9TVENPTVBPU0UsIGZyYW1lU3RhdGUpO1xuICAgICAgICBpZiAoIXRoaXMucmVuZGVyZWRWaXNpYmxlXykge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Xy5zdHlsZS5kaXNwbGF5ID0gJyc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVFeHBpcmVJY29uQ2FjaGUoZnJhbWVTdGF0ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lU3RhdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhpdFRvbGVyYW5jZSBIaXQgdG9sZXJhbmNlIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHQsIChVaW50OENsYW1wZWRBcnJheXxVaW50OEFycmF5KSk6IFR9IGNhbGxiYWNrIExheWVyXG4gICAgICogICAgIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vbGF5ZXIvTGF5ZXIuanNcIikuZGVmYXVsdCk6IGJvb2xlYW59IGxheWVyRmlsdGVyIExheWVyIGZpbHRlclxuICAgICAqICAgICBmdW5jdGlvbiwgb25seSBsYXllcnMgd2hpY2ggYXJlIHZpc2libGUgYW5kIGZvciB3aGljaCB0aGlzIGZ1bmN0aW9uXG4gICAgICogICAgIHJldHVybnMgYHRydWVgIHdpbGwgYmUgdGVzdGVkIGZvciBmZWF0dXJlcy4gIEJ5IGRlZmF1bHQsIGFsbCB2aXNpYmxlXG4gICAgICogICAgIGxheWVycyB3aWxsIGJlIHRlc3RlZC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICovXG4gICAgQ29tcG9zaXRlTWFwUmVuZGVyZXIucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWwgPSBmdW5jdGlvbiAocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSwgY2FsbGJhY2ssIGxheWVyRmlsdGVyKSB7XG4gICAgICAgIHZhciB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcbiAgICAgICAgdmFyIGxheWVyU3RhdGVzID0gZnJhbWVTdGF0ZS5sYXllclN0YXRlc0FycmF5O1xuICAgICAgICB2YXIgbnVtTGF5ZXJzID0gbGF5ZXJTdGF0ZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gbnVtTGF5ZXJzIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gbGF5ZXJTdGF0ZXNbaV07XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlLmxheWVyO1xuICAgICAgICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkgJiZcbiAgICAgICAgICAgICAgICBpblZpZXcobGF5ZXJTdGF0ZSwgdmlld1N0YXRlKSAmJlxuICAgICAgICAgICAgICAgIGxheWVyRmlsdGVyKGxheWVyKSkge1xuICAgICAgICAgICAgICAgIHZhciBsYXllclJlbmRlcmVyID0gbGF5ZXIuZ2V0UmVuZGVyZXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IGxheWVyUmVuZGVyZXIuZ2V0RGF0YUF0UGl4ZWwocGl4ZWwsIGZyYW1lU3RhdGUsIGhpdFRvbGVyYW5jZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGxiYWNrKGxheWVyLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgcmV0dXJuIENvbXBvc2l0ZU1hcFJlbmRlcmVyO1xufShNYXBSZW5kZXJlcikpO1xuZXhwb3J0IGRlZmF1bHQgQ29tcG9zaXRlTWFwUmVuZGVyZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Db21wb3NpdGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL0NvbGxlY3Rpb25FdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYW4gaXRlbSBpcyBhZGRlZCB0byB0aGUgY29sbGVjdGlvbi5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL0NvbGxlY3Rpb24uQ29sbGVjdGlvbkV2ZW50I2FkZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBBREQ6ICdhZGQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGFuIGl0ZW0gaXMgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvQ29sbGVjdGlvbi5Db2xsZWN0aW9uRXZlbnQjcmVtb3ZlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFJFTU9WRTogJ3JlbW92ZScsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29sbGVjdGlvbkV2ZW50VHlwZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0NvbGxlY3Rpb25cbiAqL1xuaW1wb3J0IEFzc2VydGlvbkVycm9yIGZyb20gJy4vQXNzZXJ0aW9uRXJyb3IuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgUHJvcGVydHkgPSB7XG4gICAgTEVOR1RIOiAnbGVuZ3RoJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGJ5IHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG52YXIgQ29sbGVjdGlvbkV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb2xsZWN0aW9uRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb25FdmVudFR5cGUuanNcIikuZGVmYXVsdH0gdHlwZSBUeXBlLlxuICAgICAqIEBwYXJhbSB7Kn0gW29wdF9lbGVtZW50XSBFbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2luZGV4XSBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb2xsZWN0aW9uRXZlbnQodHlwZSwgb3B0X2VsZW1lbnQsIG9wdF9pbmRleCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVsZW1lbnQgdGhhdCBpcyBhZGRlZCB0byBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICAgICAqIEB0eXBlIHsqfVxuICAgICAgICAgKiBAYXBpXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbGVtZW50ID0gb3B0X2VsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGFkZGVkIG9yIHJlbW92ZWQgZWxlbWVudC5cbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaW5kZXggPSBvcHRfaW5kZXg7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIENvbGxlY3Rpb25FdmVudDtcbn0oRXZlbnQpKTtcbmV4cG9ydCB7IENvbGxlY3Rpb25FdmVudCB9O1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3wnY2hhbmdlOmxlbmd0aCcsIGltcG9ydChcIi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPCdhZGQnfCdyZW1vdmUnLCBDb2xsZWN0aW9uRXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmxlbmd0aCd8J2FkZCd8J3JlbW92ZScsUmV0dXJuPn0gQ29sbGVjdGlvbk9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdW5pcXVlPWZhbHNlXSBEaXNhbGxvdyB0aGUgc2FtZSBpdGVtIGZyb20gYmVpbmcgYWRkZWQgdG9cbiAqIHRoZSBjb2xsZWN0aW9uIHR3aWNlLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFuIGV4cGFuZGVkIHZlcnNpb24gb2Ygc3RhbmRhcmQgSlMgQXJyYXksIGFkZGluZyBjb252ZW5pZW5jZSBtZXRob2RzIGZvclxuICogbWFuaXB1bGF0aW9uLiBBZGQgYW5kIHJlbW92ZSBjaGFuZ2VzIHRvIHRoZSBDb2xsZWN0aW9uIHRyaWdnZXIgYSBDb2xsZWN0aW9uXG4gKiBldmVudC4gTm90ZSB0aGF0IHRoaXMgZG9lcyBub3QgY292ZXIgY2hhbmdlcyB0byB0aGUgb2JqZWN0cyBfd2l0aGluXyB0aGVcbiAqIENvbGxlY3Rpb247IHRoZXkgdHJpZ2dlciBldmVudHMgb24gdGhlIGFwcHJvcHJpYXRlIG9iamVjdCwgbm90IG9uIHRoZVxuICogQ29sbGVjdGlvbiBhcyBhIHdob2xlLlxuICpcbiAqIEBmaXJlcyBDb2xsZWN0aW9uRXZlbnRcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQGFwaVxuICovXG52YXIgQ29sbGVjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29sbGVjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0FycmF5PFQ+fSBbb3B0X2FycmF5XSBBcnJheS5cbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gQ29sbGVjdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIENvbGxlY3Rpb24ob3B0X2FycmF5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0NvbGxlY3Rpb25PblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bmlxdWVfID0gISFvcHRpb25zLnVuaXF1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8VD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hcnJheV8gPSBvcHRfYXJyYXkgPyBvcHRfYXJyYXkgOiBbXTtcbiAgICAgICAgaWYgKF90aGlzLnVuaXF1ZV8pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IF90aGlzLmFycmF5Xy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXNzZXJ0VW5pcXVlXyhfdGhpcy5hcnJheV9baV0sIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF90aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGVsZW1lbnRzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGhpcy5nZXRMZW5ndGgoKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMucG9wKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZCBlbGVtZW50cyB0byB0aGUgY29sbGVjdGlvbi4gIFRoaXMgcHVzaGVzIGVhY2ggaXRlbSBpbiB0aGUgcHJvdmlkZWQgYXJyYXlcbiAgICAgKiB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnIgQXJyYXkuXG4gICAgICogQHJldHVybiB7Q29sbGVjdGlvbjxUPn0gVGhpcyBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnB1c2goYXJyW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEl0ZXJhdGUgb3ZlciBlYWNoIGVsZW1lbnQsIGNhbGxpbmcgdGhlIHByb3ZpZGVkIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgbnVtYmVyLCBBcnJheTxUPik6ICp9IGYgVGhlIGZ1bmN0aW9uIHRvIGNhbGxcbiAgICAgKiAgICAgZm9yIGV2ZXJ5IGVsZW1lbnQuIFRoaXMgZnVuY3Rpb24gdGFrZXMgMyBhcmd1bWVudHMgKHRoZSBlbGVtZW50LCB0aGVcbiAgICAgKiAgICAgaW5kZXggYW5kIHRoZSBhcnJheSkuIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBhcnJheSA9IHRoaXMuYXJyYXlfO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBhcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBmKGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgdW5kZXJseWluZyBBcnJheSBvYmplY3QuIFdhcm5pbmc6IGlmIHRoZSBhcnJheVxuICAgICAqIGlzIG11dGF0ZWQsIG5vIGV2ZW50cyB3aWxsIGJlIGRpc3BhdGNoZWQgYnkgdGhlIGNvbGxlY3Rpb24sIGFuZCB0aGVcbiAgICAgKiBjb2xsZWN0aW9uJ3MgXCJsZW5ndGhcIiBwcm9wZXJ0eSB3b24ndCBiZSBpbiBzeW5jIHdpdGggdGhlIGFjdHVhbCBsZW5ndGhcbiAgICAgKiBvZiB0aGUgYXJyYXkuXG4gICAgICogQHJldHVybiB7IUFycmF5PFQ+fSBBcnJheS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUuZ2V0QXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEByZXR1cm4ge1R9IEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLmdldExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KFByb3BlcnR5LkxFTkdUSCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbnNlcnQgYW4gZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5pbnNlcnRBdCA9IGZ1bmN0aW9uIChpbmRleCwgZWxlbSkge1xuICAgICAgICBpZiAodGhpcy51bmlxdWVfKSB7XG4gICAgICAgICAgICB0aGlzLmFzc2VydFVuaXF1ZV8oZWxlbSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hcnJheV8uc3BsaWNlKGluZGV4LCAwLCBlbGVtKTtcbiAgICAgICAgdGhpcy51cGRhdGVMZW5ndGhfKCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtLCBpbmRleCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGNvbGxlY3Rpb24gYW5kIHJldHVybiBpdC5cbiAgICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gaXMgZW1wdHkuXG4gICAgICogQHJldHVybiB7VHx1bmRlZmluZWR9IEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnBvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQodGhpcy5nZXRMZW5ndGgoKSAtIDEpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSW5zZXJ0IHRoZSBwcm92aWRlZCBlbGVtZW50IGF0IHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBOZXcgbGVuZ3RoIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgdGhpcy5hc3NlcnRVbmlxdWVfKGVsZW0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgdGhpcy5pbnNlcnRBdChuLCBlbGVtKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGVuZ3RoKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gZWxlbWVudCBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7VH0gZWxlbSBFbGVtZW50LlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBlbGVtZW50IG9yIHVuZGVmaW5lZCBpZiBub25lIGZvdW5kLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICB2YXIgYXJyID0gdGhpcy5hcnJheV87XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGFyci5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICBpZiAoYXJyW2ldID09PSBlbGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlQXQoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXggYW5kIHJldHVybiBpdC5cbiAgICAgKiBSZXR1cm4gYHVuZGVmaW5lZGAgaWYgdGhlIGNvbGxlY3Rpb24gZG9lcyBub3QgY29udGFpbiB0aGlzIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleC5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gVmFsdWUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBwcmV2ID0gdGhpcy5hcnJheV9baW5kZXhdO1xuICAgICAgICB0aGlzLmFycmF5Xy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUxlbmd0aF8oKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDb2xsZWN0aW9uRXZlbnQoQ29sbGVjdGlvbkV2ZW50VHlwZS5SRU1PVkUsIHByZXYsIGluZGV4KSk7XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBlbGVtZW50IGF0IHRoZSBwcm92aWRlZCBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXguXG4gICAgICogQHBhcmFtIHtUfSBlbGVtIEVsZW1lbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlLnNldEF0ID0gZnVuY3Rpb24gKGluZGV4LCBlbGVtKSB7XG4gICAgICAgIHZhciBuID0gdGhpcy5nZXRMZW5ndGgoKTtcbiAgICAgICAgaWYgKGluZGV4IDwgbikge1xuICAgICAgICAgICAgaWYgKHRoaXMudW5pcXVlXykge1xuICAgICAgICAgICAgICAgIHRoaXMuYXNzZXJ0VW5pcXVlXyhlbGVtLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJldiA9IHRoaXMuYXJyYXlfW2luZGV4XTtcbiAgICAgICAgICAgIHRoaXMuYXJyYXlfW2luZGV4XSA9IGVsZW07XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IENvbGxlY3Rpb25FdmVudChDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgcHJldiwgaW5kZXgpKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ29sbGVjdGlvbkV2ZW50KENvbGxlY3Rpb25FdmVudFR5cGUuQURELCBlbGVtLCBpbmRleCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IG47IGogPCBpbmRleDsgKytqKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnNlcnRBdChqLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnNlcnRBdChpbmRleCwgZWxlbSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGUudXBkYXRlTGVuZ3RoXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuTEVOR1RILCB0aGlzLmFycmF5Xy5sZW5ndGgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1R9IGVsZW0gRWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdF9leGNlcHRdIE9wdGlvbmFsIGluZGV4IHRvIGlnbm9yZS5cbiAgICAgKi9cbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZS5hc3NlcnRVbmlxdWVfID0gZnVuY3Rpb24gKGVsZW0sIG9wdF9leGNlcHQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gdGhpcy5hcnJheV8ubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJyYXlfW2ldID09PSBlbGVtICYmIGkgIT09IG9wdF9leGNlcHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQXNzZXJ0aW9uRXJyb3IoNTgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQ29sbGVjdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgQ29sbGVjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNvbGxlY3Rpb24uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9sYXllci9Hcm91cFxuICovXG5pbXBvcnQgQmFzZUxheWVyIGZyb20gJy4vQmFzZS5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuLi9Db2xsZWN0aW9uLmpzJztcbmltcG9ydCBDb2xsZWN0aW9uRXZlbnRUeXBlIGZyb20gJy4uL0NvbGxlY3Rpb25FdmVudFR5cGUuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBPYmplY3RFdmVudFR5cGUgZnJvbSAnLi4vT2JqZWN0RXZlbnRUeXBlLmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuLi9zb3VyY2UvU3RhdGUuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG5pbXBvcnQgeyBhc3NpZ24sIGNsZWFyIH0gZnJvbSAnLi4vb2JqLmpzJztcbmltcG9ydCB7IGdldEludGVyc2VjdGlvbiB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbb3BhY2l0eT0xXSBPcGFjaXR5ICgwLCAxKS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3Zpc2libGU9dHJ1ZV0gVmlzaWJpbGl0eS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gVGhlIGJvdW5kaW5nIGV4dGVudCBmb3IgbGF5ZXIgcmVuZGVyaW5nLiAgVGhlIGxheWVyIHdpbGwgbm90IGJlXG4gKiByZW5kZXJlZCBvdXRzaWRlIG9mIHRoaXMgZXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt6SW5kZXhdIFRoZSB6LWluZGV4IGZvciBsYXllciByZW5kZXJpbmcuICBBdCByZW5kZXJpbmcgdGltZSwgdGhlIGxheWVyc1xuICogd2lsbCBiZSBvcmRlcmVkLCBmaXJzdCBieSBaLWluZGV4IGFuZCB0aGVuIGJ5IHBvc2l0aW9uLiBXaGVuIGB1bmRlZmluZWRgLCBhIGB6SW5kZXhgIG9mIDAgaXMgYXNzdW1lZFxuICogZm9yIGxheWVycyB0aGF0IGFyZSBhZGRlZCB0byB0aGUgbWFwJ3MgYGxheWVyc2AgY29sbGVjdGlvbiwgb3IgYEluZmluaXR5YCB3aGVuIHRoZSBsYXllcidzIGBzZXRNYXAoKWBcbiAqIG1ldGhvZCB3YXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluUmVzb2x1dGlvbl0gVGhlIG1pbmltdW0gcmVzb2x1dGlvbiAoaW5jbHVzaXZlKSBhdCB3aGljaCB0aGlzIGxheWVyIHdpbGwgYmVcbiAqIHZpc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFRoZSBtYXhpbXVtIHJlc29sdXRpb24gKGV4Y2x1c2l2ZSkgYmVsb3cgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tXSBUaGUgbWluaW11bSB2aWV3IHpvb20gbGV2ZWwgKGV4Y2x1c2l2ZSkgYWJvdmUgd2hpY2ggdGhpcyBsYXllciB3aWxsIGJlXG4gKiB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttYXhab29tXSBUaGUgbWF4aW11bSB2aWV3IHpvb20gbGV2ZWwgKGluY2x1c2l2ZSkgYXQgd2hpY2ggdGhpcyBsYXllciB3aWxsXG4gKiBiZSB2aXNpYmxlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD58aW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gW2xheWVyc10gQ2hpbGQgbGF5ZXJzLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gW3Byb3BlcnRpZXNdIEFyYml0cmFyeSBvYnNlcnZhYmxlIHByb3BlcnRpZXMuIENhbiBiZSBhY2Nlc3NlZCB3aXRoIGAjZ2V0KClgIGFuZCBgI3NldCgpYC5cbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmFyIFByb3BlcnR5ID0ge1xuICAgIExBWUVSUzogJ2xheWVycycsXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBvZiBsYXllcnMgdGhhdCBhcmUgaGFuZGxlZCB0b2dldGhlci5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIGdyb3VwL0NvbGxlY3Rpb24gY2hhbmdlcy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBMYXllckdyb3VwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMYXllckdyb3VwLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBMYXllciBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIExheWVyR3JvdXAob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdmFyIGJhc2VPcHRpb25zID0gLyoqIEB0eXBlIHtPcHRpb25zfSAqLyAoYXNzaWduKHt9LCBvcHRpb25zKSk7XG4gICAgICAgIGRlbGV0ZSBiYXNlT3B0aW9ucy5sYXllcnM7XG4gICAgICAgIHZhciBsYXllcnMgPSBvcHRpb25zLmxheWVycztcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBiYXNlT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyc0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBBcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5saXN0ZW5lcktleXNfID0ge307XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LkxBWUVSUywgX3RoaXMuaGFuZGxlTGF5ZXJzQ2hhbmdlZF8pO1xuICAgICAgICBpZiAobGF5ZXJzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsYXllcnMpKSB7XG4gICAgICAgICAgICAgICAgbGF5ZXJzID0gbmV3IENvbGxlY3Rpb24obGF5ZXJzLnNsaWNlKCksIHsgdW5pcXVlOiB0cnVlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8obGF5ZXJzKS5nZXRBcnJheSkgPT09ICdmdW5jdGlvbicsIDQzKTsgLy8gRXhwZWN0ZWQgYGxheWVyc2AgdG8gYmUgYW4gYXJyYXkgb3IgYSBgQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxheWVycyA9IG5ldyBDb2xsZWN0aW9uKHVuZGVmaW5lZCwgeyB1bmlxdWU6IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0TGF5ZXJzKGxheWVycyk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllckNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5oYW5kbGVMYXllcnNDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMubGF5ZXJzTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllcnMoKTtcbiAgICAgICAgdGhpcy5sYXllcnNMaXN0ZW5lcktleXNfLnB1c2gobGlzdGVuKGxheWVycywgQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIHRoaXMuaGFuZGxlTGF5ZXJzQWRkXywgdGhpcyksIGxpc3RlbihsYXllcnMsIENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCB0aGlzLmhhbmRsZUxheWVyc1JlbW92ZV8sIHRoaXMpKTtcbiAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5saXN0ZW5lcktleXNfKSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5c19baWRdLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXIodGhpcy5saXN0ZW5lcktleXNfKTtcbiAgICAgICAgdmFyIGxheWVyc0FycmF5ID0gbGF5ZXJzLmdldEFycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyc0FycmF5Lmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyc0FycmF5W2ldO1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXNfW2dldFVpZChsYXllcildID0gW1xuICAgICAgICAgICAgICAgIGxpc3RlbihsYXllciwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyLCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gY29sbGVjdGlvbkV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmhhbmRsZUxheWVyc0FkZF8gPSBmdW5jdGlvbiAoY29sbGVjdGlvbkV2ZW50KSB7XG4gICAgICAgIHZhciBsYXllciA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9CYXNlLmpzXCIpLmRlZmF1bHR9ICovIChjb2xsZWN0aW9uRXZlbnQuZWxlbWVudCk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1tnZXRVaWQobGF5ZXIpXSA9IFtcbiAgICAgICAgICAgIGxpc3RlbihsYXllciwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZUxheWVyQ2hhbmdlXywgdGhpcyksXG4gICAgICAgICAgICBsaXN0ZW4obGF5ZXIsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlTGF5ZXJDaGFuZ2VfLCB0aGlzKSxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBjb2xsZWN0aW9uRXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJzUmVtb3ZlXyA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uRXZlbnQpIHtcbiAgICAgICAgdmFyIGxheWVyID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdH0gKi8gKGNvbGxlY3Rpb25FdmVudC5lbGVtZW50KTtcbiAgICAgICAgdmFyIGtleSA9IGdldFVpZChsYXllcik7XG4gICAgICAgIHRoaXMubGlzdGVuZXJLZXlzX1trZXldLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyS2V5c19ba2V5XTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb24gY29sbGVjdGlvbn0gb2Yge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllciBsYXllcnN9XG4gICAgICogaW4gdGhpcyBncm91cC5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gQ29sbGVjdGlvbiBvZlxuICAgICAqICAge0BsaW5rIG1vZHVsZTpvbC9sYXllci9CYXNlIGxheWVyc30gdGhhdCBhcmUgcGFydCBvZiB0aGlzIGdyb3VwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL0NvbGxlY3Rpb24uanNcIikuZGVmYXVsdDxpbXBvcnQoXCIuL0Jhc2UuanNcIikuZGVmYXVsdD59ICovICh0aGlzLmdldChQcm9wZXJ0eS5MQVlFUlMpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9uIGNvbGxlY3Rpb259IG9mIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXJ+TGF5ZXIgbGF5ZXJzfVxuICAgICAqIGluIHRoaXMgZ3JvdXAuXG4gICAgICogQHBhcmFtIHshaW1wb3J0KFwiLi4vQ29sbGVjdGlvbi5qc1wiKS5kZWZhdWx0PGltcG9ydChcIi4vQmFzZS5qc1wiKS5kZWZhdWx0Pn0gbGF5ZXJzIENvbGxlY3Rpb24gb2ZcbiAgICAgKiAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvQmFzZSBsYXllcnN9IHRoYXQgYXJlIHBhcnQgb2YgdGhpcyBncm91cC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMYXllckdyb3VwLnByb3RvdHlwZS5zZXRMYXllcnMgPSBmdW5jdGlvbiAobGF5ZXJzKSB7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkxBWUVSUywgbGF5ZXJzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gW29wdF9hcnJheV0gQXJyYXkgb2YgbGF5ZXJzICh0byBiZSBtb2RpZmllZCBpbiBwbGFjZSkuXG4gICAgICogQHJldHVybiB7QXJyYXk8aW1wb3J0KFwiLi9MYXllci5qc1wiKS5kZWZhdWx0Pn0gQXJyYXkgb2YgbGF5ZXJzLlxuICAgICAqL1xuICAgIExheWVyR3JvdXAucHJvdG90eXBlLmdldExheWVyc0FycmF5ID0gZnVuY3Rpb24gKG9wdF9hcnJheSkge1xuICAgICAgICB2YXIgYXJyYXkgPSBvcHRfYXJyYXkgIT09IHVuZGVmaW5lZCA/IG9wdF9hcnJheSA6IFtdO1xuICAgICAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5nZXRMYXllcnNBcnJheShhcnJheSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gYXJyYXk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGxheWVyIHN0YXRlcyBsaXN0IGFuZCB1c2UgdGhpcyBncm91cHMgei1pbmRleCBhcyB0aGUgZGVmYXVsdFxuICAgICAqIGZvciBhbGwgbGF5ZXJzIGluIHRoaXMgYW5kIG5lc3RlZCBncm91cHMsIGlmIGl0IGlzIHVuc2V0IGF0IHRoaXMgcG9pbnQuXG4gICAgICogSWYgb3B0X3N0YXRlcyBpcyBub3QgcHJvdmlkZWQgYW5kIHRoaXMgZ3JvdXAncyB6LWluZGV4IGlzIHVuZGVmaW5lZFxuICAgICAqIDAgaXMgdXNlZCBhIHRoZSBkZWZhdWx0IHotaW5kZXguXG4gICAgICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gW29wdF9zdGF0ZXNdIE9wdGlvbmFsIGxpc3RcbiAgICAgKiBvZiBsYXllciBzdGF0ZXMgKHRvIGJlIG1vZGlmaWVkIGluIHBsYWNlKS5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0xheWVyLmpzXCIpLlN0YXRlPn0gTGlzdCBvZiBsYXllciBzdGF0ZXMuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0TGF5ZXJTdGF0ZXNBcnJheSA9IGZ1bmN0aW9uIChvcHRfc3RhdGVzKSB7XG4gICAgICAgIHZhciBzdGF0ZXMgPSBvcHRfc3RhdGVzICE9PSB1bmRlZmluZWQgPyBvcHRfc3RhdGVzIDogW107XG4gICAgICAgIHZhciBwb3MgPSBzdGF0ZXMubGVuZ3RoO1xuICAgICAgICB0aGlzLmdldExheWVycygpLmZvckVhY2goZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgICAgICBsYXllci5nZXRMYXllclN0YXRlc0FycmF5KHN0YXRlcyk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgb3duTGF5ZXJTdGF0ZSA9IHRoaXMuZ2V0TGF5ZXJTdGF0ZSgpO1xuICAgICAgICB2YXIgZGVmYXVsdFpJbmRleCA9IG93bkxheWVyU3RhdGUuekluZGV4O1xuICAgICAgICBpZiAoIW9wdF9zdGF0ZXMgJiYgb3duTGF5ZXJTdGF0ZS56SW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGVmYXVsdFpJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IHBvcywgaWkgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxheWVyU3RhdGUgPSBzdGF0ZXNbaV07XG4gICAgICAgICAgICBsYXllclN0YXRlLm9wYWNpdHkgKj0gb3duTGF5ZXJTdGF0ZS5vcGFjaXR5O1xuICAgICAgICAgICAgbGF5ZXJTdGF0ZS52aXNpYmxlID0gbGF5ZXJTdGF0ZS52aXNpYmxlICYmIG93bkxheWVyU3RhdGUudmlzaWJsZTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbiA9IE1hdGgubWluKGxheWVyU3RhdGUubWF4UmVzb2x1dGlvbiwgb3duTGF5ZXJTdGF0ZS5tYXhSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiA9IE1hdGgubWF4KGxheWVyU3RhdGUubWluUmVzb2x1dGlvbiwgb3duTGF5ZXJTdGF0ZS5taW5SZXNvbHV0aW9uKTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWluWm9vbSA9IE1hdGgubWF4KGxheWVyU3RhdGUubWluWm9vbSwgb3duTGF5ZXJTdGF0ZS5taW5ab29tKTtcbiAgICAgICAgICAgIGxheWVyU3RhdGUubWF4Wm9vbSA9IE1hdGgubWluKGxheWVyU3RhdGUubWF4Wm9vbSwgb3duTGF5ZXJTdGF0ZS5tYXhab29tKTtcbiAgICAgICAgICAgIGlmIChvd25MYXllclN0YXRlLmV4dGVudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZS5leHRlbnQgPSBnZXRJbnRlcnNlY3Rpb24obGF5ZXJTdGF0ZS5leHRlbnQsIG93bkxheWVyU3RhdGUuZXh0ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGUuZXh0ZW50ID0gb3duTGF5ZXJTdGF0ZS5leHRlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxheWVyU3RhdGUuekluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsYXllclN0YXRlLnpJbmRleCA9IGRlZmF1bHRaSW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NvdXJjZS9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBTb3VyY2Ugc3RhdGUuXG4gICAgICovXG4gICAgTGF5ZXJHcm91cC5wcm90b3R5cGUuZ2V0U291cmNlU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBTb3VyY2VTdGF0ZS5SRUFEWTtcbiAgICB9O1xuICAgIHJldHVybiBMYXllckdyb3VwO1xufShCYXNlTGF5ZXIpKTtcbmV4cG9ydCBkZWZhdWx0IExheWVyR3JvdXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Hcm91cC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcEV2ZW50XG4gKi9cbmltcG9ydCBFdmVudCBmcm9tICcuL2V2ZW50cy9FdmVudC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBldmVudHMgYXJlIGluc3RhbmNlcyBvZiB0aGlzIHR5cGUuXG4gKiBTZWUge0BsaW5rIG1vZHVsZTpvbC9QbHVnZ2FibGVNYXB+UGx1Z2dhYmxlTWFwfSBmb3Igd2hpY2ggZXZlbnRzIHRyaWdnZXIgYSBtYXAgZXZlbnQuXG4gKi9cbnZhciBNYXBFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gW29wdF9mcmFtZVN0YXRlXSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBFdmVudCh0eXBlLCBtYXAsIG9wdF9mcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIHdoZXJlIHRoZSBldmVudCBvY2N1cnJlZC5cbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcCA9IG1hcDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBmcmFtZSBzdGF0ZSBhdCB0aGUgdGltZSBvZiB0aGUgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZnJhbWVTdGF0ZSA9IG9wdF9mcmFtZVN0YXRlICE9PSB1bmRlZmluZWQgPyBvcHRfZnJhbWVTdGF0ZSA6IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIE1hcEV2ZW50O1xufShFdmVudCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwRXZlbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBFdmVudC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL01hcEJyb3dzZXJFdmVudFxuICovXG5pbXBvcnQgTWFwRXZlbnQgZnJvbSAnLi9NYXBFdmVudC5qcyc7XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIGFzIG1hcCBicm93c2VyIGV2ZW50cyBhcmUgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS5cbiAqIFNlZSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5QbHVnZ2FibGVNYXB9IGZvciB3aGljaCBldmVudHMgdHJpZ2dlciBhIG1hcCBicm93c2VyIGV2ZW50LlxuICogQHRlbXBsYXRlIHtVSUV2ZW50fSBFVkVOVFxuICovXG52YXIgTWFwQnJvd3NlckV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNYXBCcm93c2VyRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgdHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICogQHBhcmFtIHtFVkVOVH0gb3JpZ2luYWxFdmVudCBPcmlnaW5hbCBldmVudC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfZHJhZ2dpbmddIElzIHRoZSBtYXAgY3VycmVudGx5IGJlaW5nIGRyYWdnZWQ/XG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gW29wdF9mcmFtZVN0YXRlXSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnQodHlwZSwgbWFwLCBvcmlnaW5hbEV2ZW50LCBvcHRfZHJhZ2dpbmcsIG9wdF9mcmFtZVN0YXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUsIG1hcCwgb3B0X2ZyYW1lU3RhdGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3JpZ2luYWwgYnJvd3NlciBldmVudC5cbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtFVkVOVH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3JpZ2luYWxFdmVudCA9IG9yaWdpbmFsRXZlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFwIHBpeGVsIHJlbGF0aXZlIHRvIHRoZSB2aWV3cG9ydCBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvb3JkaW5hdGUgaW4gdGhlIHVzZXIgcHJvamVjdGlvbiBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29vcmRpbmF0ZV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIGlmIHRoZSBtYXAgaXMgY3VycmVudGx5IGJlaW5nIGRyYWdnZWQuIE9ubHkgc2V0IGZvclxuICAgICAgICAgKiBgUE9JTlRFUkRSQUdgIGFuZCBgUE9JTlRFUk1PVkVgIGV2ZW50cy4gRGVmYXVsdCBpcyBgZmFsc2VgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ2dpbmcgPSBvcHRfZHJhZ2dpbmcgIT09IHVuZGVmaW5lZCA/IG9wdF9kcmFnZ2luZyA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShNYXBCcm93c2VyRXZlbnQucHJvdG90eXBlLCBcInBpeGVsXCIsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBtYXAgcGl4ZWwgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIG9yaWdpbmFsIGV2ZW50LlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGl4ZWxfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5waXhlbF8gPSB0aGlzLm1hcC5nZXRFdmVudFBpeGVsKHRoaXMub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5waXhlbF87XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgICAgICB0aGlzLnBpeGVsXyA9IHBpeGVsO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUsIFwiY29vcmRpbmF0ZVwiLCB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29vcmRpbmF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LiAgVGhpcyB3aWxsIGJlIGluIHRoZSB1c2VyXG4gICAgICAgICAqIHByb2plY3Rpb24gaWYgb25lIGlzIHNldC4gIE90aGVyd2lzZSBpdCB3aWxsIGJlIGluIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29vcmRpbmF0ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVfID0gdGhpcy5tYXAuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCh0aGlzLnBpeGVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvb3JkaW5hdGVfO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmNvb3JkaW5hdGVfID0gY29vcmRpbmF0ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIHRoZSBkZWZhdWx0IGJyb3dzZXIgYWN0aW9uLlxuICAgICAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvZXZlbnQucHJldmVudERlZmF1bHQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUucHJldmVudERlZmF1bHQuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKCdwcmV2ZW50RGVmYXVsdCcgaW4gdGhpcy5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgICAgICAvKiogQHR5cGUge1VJRXZlbnR9ICovICh0aGlzLm9yaWdpbmFsRXZlbnQpLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFByZXZlbnRzIGZ1cnRoZXIgcHJvcGFnYXRpb24gb2YgdGhlIGN1cnJlbnQgZXZlbnQuXG4gICAgICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9ldmVudC5zdG9wUHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbi5jYWxsKHRoaXMpO1xuICAgICAgICBpZiAoJ3N0b3BQcm9wYWdhdGlvbicgaW4gdGhpcy5vcmlnaW5hbEV2ZW50KSB7XG4gICAgICAgICAgICAvKiogQHR5cGUge1VJRXZlbnR9ICovICh0aGlzLm9yaWdpbmFsRXZlbnQpLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gTWFwQnJvd3NlckV2ZW50O1xufShNYXBFdmVudCkpO1xuZXhwb3J0IGRlZmF1bHQgTWFwQnJvd3NlckV2ZW50O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50LmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9NYXBCcm93c2VyRXZlbnRUeXBlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICAvKipcbiAgICAgKiBBIHRydWUgc2luZ2xlIGNsaWNrIHdpdGggbm8gZHJhZ2dpbmcgYW5kIG5vIGRvdWJsZSBjbGljay4gTm90ZSB0aGF0IHRoaXNcbiAgICAgKiBldmVudCBpcyBkZWxheWVkIGJ5IDI1MCBtcyB0byBlbnN1cmUgdGhhdCBpdCBpcyBub3QgYSBkb3VibGUgY2xpY2suXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3NpbmdsZWNsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNJTkdMRUNMSUNLOiAnc2luZ2xlY2xpY2snLFxuICAgIC8qKlxuICAgICAqIEEgY2xpY2sgd2l0aCBubyBkcmFnZ2luZy4gQSBkb3VibGUgY2xpY2sgd2lsbCBmaXJlIHR3byBvZiB0aGlzLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNjbGlja1xuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDTElDSzogRXZlbnRUeXBlLkNMSUNLLFxuICAgIC8qKlxuICAgICAqIEEgdHJ1ZSBkb3VibGUgY2xpY2ssIHdpdGggbm8gZHJhZ2dpbmcuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I2RibGNsaWNrXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIERCTENMSUNLOiBFdmVudFR5cGUuREJMQ0xJQ0ssXG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSBwb2ludGVyIGlzIGRyYWdnZWQuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50I3BvaW50ZXJkcmFnXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBPSU5URVJEUkFHOiAncG9pbnRlcmRyYWcnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgcG9pbnRlciBpcyBtb3ZlZC4gTm90ZSB0aGF0IG9uIHRvdWNoIGRldmljZXMgdGhpcyBpc1xuICAgICAqIHRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgaXMgcGFubmVkLCBzbyBpcyBub3QgdGhlIHNhbWUgYXMgbW91c2Vtb3ZlLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudCNwb2ludGVybW92ZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQT0lOVEVSTU9WRTogJ3BvaW50ZXJtb3ZlJyxcbiAgICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICAgIFBPSU5URVJPVkVSOiAncG9pbnRlcm92ZXInLFxuICAgIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICAgIFBPSU5URVJMRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG4gICAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnLFxufTtcbi8qKipcbiAqIEB0eXBlZGVmIHsnc2luZ2xlY2xpY2snfCdjbGljayd8J2RibGNsaWNrJ3wncG9pbnRlcmRyYWcnfCdwb2ludGVybW92ZSd9IFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEJyb3dzZXJFdmVudFR5cGUuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3BvaW50ZXIvRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQ29uc3RhbnRzIGZvciBldmVudCBuYW1lcy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBQT0lOVEVSTU9WRTogJ3BvaW50ZXJtb3ZlJyxcbiAgICBQT0lOVEVSRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgICBQT0lOVEVSVVA6ICdwb2ludGVydXAnLFxuICAgIFBPSU5URVJPVkVSOiAncG9pbnRlcm92ZXInLFxuICAgIFBPSU5URVJPVVQ6ICdwb2ludGVyb3V0JyxcbiAgICBQT0lOVEVSRU5URVI6ICdwb2ludGVyZW50ZXInLFxuICAgIFBPSU5URVJMRUFWRTogJ3BvaW50ZXJsZWF2ZScsXG4gICAgUE9JTlRFUkNBTkNFTDogJ3BvaW50ZXJjYW5jZWwnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwQnJvd3NlckV2ZW50SGFuZGxlclxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50VHlwZSBmcm9tICcuL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IFBvaW50ZXJFdmVudFR5cGUgZnJvbSAnLi9wb2ludGVyL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgeyBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IFZPSUQgfSBmcm9tICcuL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG52YXIgTWFwQnJvd3NlckV2ZW50SGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwQnJvd3NlckV2ZW50SGFuZGxlciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBUaGUgbWFwIHdpdGggdGhlIHZpZXdwb3J0IHRvIGxpc3RlbiB0byBldmVudHMgb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFttb3ZlVG9sZXJhbmNlXSBUaGUgbWluaW1hbCBkaXN0YW5jZSB0aGUgcG9pbnRlciBtdXN0IHRyYXZlbCB0byB0cmlnZ2VyIGEgbW92ZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKG1hcCwgbW92ZVRvbGVyYW5jZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtYXApIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGlzIGlzIHRoZSBlbGVtZW50IHRoYXQgd2Ugd2lsbCBsaXN0ZW4gdG8gdGhlIHJlYWwgZXZlbnRzIG9uLlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7YW55fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2xpY2tUaW1lb3V0SWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW11bGF0ZSBkYmxjbGljayBhbmQgc2luZ2xlY2xpY2suIFdpbGwgYmUgdHJ1ZSB3aGVuIG9ubHkgb25lIHBvaW50ZXIgaXMgYWN0aXZlLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVtdWxhdGVDbGlja3NfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFBcnJheTxpbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHJhZ0xpc3RlbmVyS2V5c18gPSBbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tb3ZlVG9sZXJhbmNlXyA9IG1vdmVUb2xlcmFuY2UgPT09IHVuZGVmaW5lZCA/IDEgOiBtb3ZlVG9sZXJhbmNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1vc3QgcmVjZW50IFwiZG93blwiIHR5cGUgZXZlbnQgKG9yIG51bGwgaWYgbm9uZSBoYXZlIG9jY3VycmVkKS5cbiAgICAgICAgICogU2V0IG9uIHBvaW50ZXJkb3duLlxuICAgICAgICAgKiBAdHlwZSB7UG9pbnRlckV2ZW50fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZG93bl8gPSBudWxsO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLm1hcF8uZ2V0Vmlld3BvcnQoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hY3RpdmVQb2ludGVyc18gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8bnVtYmVyLCBib29sZWFuPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYWNrZWRUb3VjaGVzXyA9IHt9O1xuICAgICAgICBfdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfID0gbGlzdGVuKGVsZW1lbnQsIFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkRPV04sIF90aGlzLmhhbmRsZVBvaW50ZXJEb3duXywgX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge1BvaW50ZXJFdmVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9yaWdpbmFsUG9pbnRlck1vdmVFdmVudF87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4vZXZlbnRzLmpzXCIpLkV2ZW50c0tleX1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8gPSBsaXN0ZW4oZWxlbWVudCwgUG9pbnRlckV2ZW50VHlwZS5QT0lOVEVSTU9WRSwgX3RoaXMucmVsYXlFdmVudF8sIF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3VuZEhhbmRsZVRvdWNoTW92ZV8gPSBfdGhpcy5oYW5kbGVUb3VjaE1vdmVfLmJpbmQoX3RoaXMpO1xuICAgICAgICBfdGhpcy5lbGVtZW50Xy5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5UT1VDSE1PVkUsIF90aGlzLmJvdW5kSGFuZGxlVG91Y2hNb3ZlXywgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgPyB7IHBhc3NpdmU6IGZhbHNlIH0gOiBmYWxzZSk7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5lbXVsYXRlQ2xpY2tfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB2YXIgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ld0V2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tUaW1lb3V0SWRfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vIGRvdWJsZS1jbGlja1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lb3V0SWRfKTtcbiAgICAgICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgbmV3RXZlbnQgPSBuZXcgTWFwQnJvd3NlckV2ZW50KE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0ssIHRoaXMubWFwXywgcG9pbnRlckV2ZW50KTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBjbGlja1xuICAgICAgICAgICAgdGhpcy5jbGlja1RpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgLyoqIEB0aGlzIHtNYXBCcm93c2VyRXZlbnRIYW5kbGVyfSAqL1xuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tUaW1lb3V0SWRfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5TSU5HTEVDTElDSywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDI1MCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEtlZXBzIHRyYWNrIG9uIGhvdyBtYW55IHBvaW50ZXJzIGFyZSBjdXJyZW50bHkgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS51cGRhdGVBY3RpdmVQb2ludGVyc18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHZhciBldmVudCA9IHBvaW50ZXJFdmVudDtcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAgfHxcbiAgICAgICAgICAgIGV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSQ0FOQ0VMKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50cmFja2VkVG91Y2hlc19bZXZlbnQucG9pbnRlcklkXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04pIHtcbiAgICAgICAgICAgIHRoaXMudHJhY2tlZFRvdWNoZXNfW2V2ZW50LnBvaW50ZXJJZF0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWN0aXZlUG9pbnRlcnNfID0gT2JqZWN0LmtleXModGhpcy50cmFja2VkVG91Y2hlc18pLmxlbmd0aDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlclVwXyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVQb2ludGVyc18ocG9pbnRlckV2ZW50KTtcbiAgICAgICAgdmFyIG5ld0V2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudChNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAvLyBXZSBlbXVsYXRlIGNsaWNrIGV2ZW50cyBvbiBsZWZ0IG1vdXNlIGJ1dHRvbiBjbGljaywgdG91Y2ggY29udGFjdCwgYW5kIHBlblxuICAgICAgICAvLyBjb250YWN0LiBpc01vdXNlQWN0aW9uQnV0dG9uIHJldHVybnMgdHJ1ZSBpbiB0aGVzZSBjYXNlcyAoZXZ0LmJ1dHRvbiBpcyBzZXRcbiAgICAgICAgLy8gdG8gMCkuXG4gICAgICAgIC8vIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyNidXR0b24tc3RhdGVzXG4gICAgICAgIC8vIFdlIG9ubHkgZmlyZSBjbGljaywgc2luZ2xlY2xpY2ssIGFuZCBkb3VibGVjbGljayBpZiBub2JvZHkgaGFzIGNhbGxlZFxuICAgICAgICAvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLlxuICAgICAgICBpZiAodGhpcy5lbXVsYXRlQ2xpY2tzXyAmJlxuICAgICAgICAgICAgIW5ld0V2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgJiZcbiAgICAgICAgICAgICF0aGlzLmRyYWdnaW5nXyAmJlxuICAgICAgICAgICAgdGhpcy5pc01vdXNlQWN0aW9uQnV0dG9uXyhwb2ludGVyRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLmVtdWxhdGVDbGlja18odGhpcy5kb3duXyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlUG9pbnRlcnNfID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLmRyYWdnaW5nXyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kb3duXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBsZWZ0IG1vdXNlIGJ1dHRvbiB3YXMgcHJlc3NlZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1hcEJyb3dzZXJFdmVudEhhbmRsZXIucHJvdG90eXBlLmlzTW91c2VBY3Rpb25CdXR0b25fID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gcG9pbnRlckV2ZW50LmJ1dHRvbiA9PT0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlckRvd25fID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICB0aGlzLmVtdWxhdGVDbGlja3NfID0gdGhpcy5hY3RpdmVQb2ludGVyc18gPT09IDA7XG4gICAgICAgIHRoaXMudXBkYXRlQWN0aXZlUG9pbnRlcnNfKHBvaW50ZXJFdmVudCk7XG4gICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTiwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3RXZlbnQpO1xuICAgICAgICAvLyBTdG9yZSBhIGNvcHkgb2YgdGhlIGRvd24gZXZlbnRcbiAgICAgICAgdGhpcy5kb3duXyA9IC8qKiBAdHlwZSB7UG9pbnRlckV2ZW50fSAqLyAoe30pO1xuICAgICAgICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBvaW50ZXJFdmVudFtwcm9wZXJ0eV07XG4gICAgICAgICAgICB0aGlzLmRvd25fW3Byb3BlcnR5XSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IFZPSUQgOiB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB0aGlzLm1hcF8uZ2V0T3duZXJEb2N1bWVudCgpO1xuICAgICAgICAgICAgdGhpcy5kcmFnTGlzdGVuZXJLZXlzXy5wdXNoKGxpc3Rlbihkb2MsIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUk1PVkUsIHRoaXMuaGFuZGxlUG9pbnRlck1vdmVfLCB0aGlzKSwgbGlzdGVuKGRvYywgTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSVVAsIHRoaXMuaGFuZGxlUG9pbnRlclVwXywgdGhpcyksIFxuICAgICAgICAgICAgLyogTm90ZSB0aGF0IHRoZSBsaXN0ZW5lciBmb3IgYHBvaW50ZXJjYW5jZWwgaXMgc2V0IHVwIG9uXG4gICAgICAgICAgICAgKiBgcG9pbnRlckV2ZW50SGFuZGxlcl9gIGFuZCBub3QgYGRvY3VtZW50UG9pbnRlckV2ZW50SGFuZGxlcl9gIGxpa2VcbiAgICAgICAgICAgICAqIHRoZSBgcG9pbnRlcnVwYCBhbmQgYHBvaW50ZXJtb3ZlYCBsaXN0ZW5lcnMuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogVGhlIHJlYXNvbiBmb3IgdGhpcyBpcyB0aGUgZm9sbG93aW5nOiBgVG91Y2hTb3VyY2UudmFjdXVtVG91Y2hlc18oKWBcbiAgICAgICAgICAgICAqIGlzc3VlcyBgcG9pbnRlcmNhbmNlbGAgZXZlbnRzLCB3aGVuIHRoZXJlIHdhcyBubyBgdG91Y2hlbmRgIGZvciBhXG4gICAgICAgICAgICAgKiBgdG91Y2hzdGFydGAuIE5vdywgbGV0J3Mgc2F5IGEgZmlyc3QgYHRvdWNoc3RhcnRgIGlzIHJlZ2lzdGVyZWQgb25cbiAgICAgICAgICAgICAqIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AuIFRoZSBgZG9jdW1lbnRQb2ludGVyRXZlbnRIYW5kbGVyX2AgaXMgc2V0IHVwLlxuICAgICAgICAgICAgICogQnV0IGBkb2N1bWVudFBvaW50ZXJFdmVudEhhbmRsZXJfYCBkb2Vzbid0IGtub3cgYWJvdXQgdGhlIGZpcnN0XG4gICAgICAgICAgICAgKiBgdG91Y2hzdGFydGAuIElmIHRoZXJlIGlzIG5vIGB0b3VjaGVuZGAgZm9yIHRoZSBgdG91Y2hzdGFydGAsIHdlIGNhblxuICAgICAgICAgICAgICogb25seSByZWNlaXZlIGEgYHRvdWNoY2FuY2VsYCBmcm9tIGBwb2ludGVyRXZlbnRIYW5kbGVyX2AsIGJlY2F1c2UgaXQgaXNcbiAgICAgICAgICAgICAqIG9ubHkgcmVnaXN0ZXJlZCB0aGVyZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGlzdGVuKHRoaXMuZWxlbWVudF8sIE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkNBTkNFTCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSAmJiB0aGlzLmVsZW1lbnRfLmdldFJvb3ROb2RlKCkgIT09IGRvYykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ucHVzaChsaXN0ZW4odGhpcy5lbGVtZW50Xy5nZXRSb290Tm9kZSgpLCBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCwgdGhpcy5oYW5kbGVQb2ludGVyVXBfLCB0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UG9pbnRlckV2ZW50fSBwb2ludGVyRXZlbnQgUG9pbnRlclxuICAgICAqIGV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTWFwQnJvd3NlckV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUG9pbnRlck1vdmVfID0gZnVuY3Rpb24gKHBvaW50ZXJFdmVudCkge1xuICAgICAgICAvLyBCZXR3ZWVuIHBvaW50ZXJkb3duIGFuZCBwb2ludGVydXAsIHBvaW50ZXJtb3ZlIGV2ZW50cyBhcmUgdHJpZ2dlcmVkLlxuICAgICAgICAvLyBUbyBhdm9pZCBhICdmYWxzZScgdG91Y2htb3ZlIGV2ZW50IHRvIGJlIGRpc3BhdGNoZWQsIHdlIHRlc3QgaWYgdGhlIHBvaW50ZXJcbiAgICAgICAgLy8gbW92ZWQgYSBzaWduaWZpY2FudCBkaXN0YW5jZS5cbiAgICAgICAgaWYgKHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhZ2dpbmdfID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBuZXdFdmVudCA9IG5ldyBNYXBCcm93c2VyRXZlbnQoTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRywgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsIHRoaXMuZHJhZ2dpbmdfKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXdFdmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFdyYXAgYW5kIHJlbGF5IGEgcG9pbnRlciBldmVudC4gIE5vdGUgdGhhdCB0aGlzIHJlcXVpcmVzIHRoYXQgdGhlIHR5cGVcbiAgICAgKiBzdHJpbmcgZm9yIHRoZSBNYXBCcm93c2VyRXZlbnQgbWF0Y2hlcyB0aGUgUG9pbnRlckV2ZW50IHR5cGUuXG4gICAgICogQHBhcmFtIHtQb2ludGVyRXZlbnR9IHBvaW50ZXJFdmVudCBQb2ludGVyXG4gICAgICogZXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5yZWxheUV2ZW50XyA9IGZ1bmN0aW9uIChwb2ludGVyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfID0gcG9pbnRlckV2ZW50O1xuICAgICAgICB2YXIgZHJhZ2dpbmcgPSAhISh0aGlzLmRvd25fICYmIHRoaXMuaXNNb3ZpbmdfKHBvaW50ZXJFdmVudCkpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEJyb3dzZXJFdmVudChwb2ludGVyRXZlbnQudHlwZSwgdGhpcy5tYXBfLCBwb2ludGVyRXZlbnQsIGRyYWdnaW5nKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGbGV4aWJsZSBoYW5kbGluZyBvZiBhIGB0b3VjaC1hY3Rpb246IG5vbmVgIGNzcyBlcXVpdmFsZW50OiBiZWNhdXNlIGNhbGxpbmdcbiAgICAgKiBgcHJldmVudERlZmF1bHQoKWAgb24gYSBgcG9pbnRlcm1vdmVgIGV2ZW50IGRvZXMgbm90IHN0b3AgbmF0aXZlIHBhZ2Ugc2Nyb2xsaW5nXG4gICAgICogYW5kIHpvb21pbmcsIHdlIGFsc28gbGlzdGVuIGZvciBgdG91Y2htb3ZlYCBhbmQgY2FsbCBgcHJldmVudERlZmF1bHQoKWAgb24gaXRcbiAgICAgKiB3aGVuIGFuIGludGVyYWN0aW9uIChjdXJyZW50bHkgYERyYWdQYW5gIGhhbmRsZXMgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVUb3VjaE1vdmVfID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIC8vIER1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbXBpemVuYmVyZy9lbG0tcGVwL2lzc3Vlcy8yLCBgdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfYFxuICAgICAgICAvLyBtYXkgbm90IGJlIGluaXRpYWxpemVkIHlldCB3aGVuIHdlIGdldCBoZXJlIG9uIGEgcGxhdGZvcm0gd2l0aG91dCBuYXRpdmUgcG9pbnRlciBldmVudHMuXG4gICAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gdGhpcy5vcmlnaW5hbFBvaW50ZXJNb3ZlRXZlbnRfO1xuICAgICAgICBpZiAoKCFvcmlnaW5hbEV2ZW50IHx8IG9yaWdpbmFsRXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgJiZcbiAgICAgICAgICAgICh0eXBlb2YgZXZlbnQuY2FuY2VsYWJsZSAhPT0gJ2Jvb2xlYW4nIHx8IGV2ZW50LmNhbmNlbGFibGUgPT09IHRydWUpKSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1BvaW50ZXJFdmVudH0gcG9pbnRlckV2ZW50IFBvaW50ZXJcbiAgICAgKiBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBtb3ZpbmcuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5pc01vdmluZ18gPSBmdW5jdGlvbiAocG9pbnRlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiAodGhpcy5kcmFnZ2luZ18gfHxcbiAgICAgICAgICAgIE1hdGguYWJzKHBvaW50ZXJFdmVudC5jbGllbnRYIC0gdGhpcy5kb3duXy5jbGllbnRYKSA+XG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9sZXJhbmNlXyB8fFxuICAgICAgICAgICAgTWF0aC5hYnMocG9pbnRlckV2ZW50LmNsaWVudFkgLSB0aGlzLmRvd25fLmNsaWVudFkpID4gdGhpcy5tb3ZlVG9sZXJhbmNlXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBNYXBCcm93c2VyRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbGF5ZWRMaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5yZWxheWVkTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMucmVsYXllZExpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbGVtZW50Xy5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5UT1VDSE1PVkUsIHRoaXMuYm91bmRIYW5kbGVUb3VjaE1vdmVfKTtcbiAgICAgICAgaWYgKHRoaXMucG9pbnRlcmRvd25MaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy5wb2ludGVyZG93bkxpc3RlbmVyS2V5Xyk7XG4gICAgICAgICAgICB0aGlzLnBvaW50ZXJkb3duTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRyYWdMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMuZHJhZ0xpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5lbGVtZW50XyA9IG51bGw7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gTWFwQnJvd3NlckV2ZW50SGFuZGxlcjtcbn0oVGFyZ2V0KSk7XG5leHBvcnQgZGVmYXVsdCBNYXBCcm93c2VyRXZlbnRIYW5kbGVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TWFwQnJvd3NlckV2ZW50SGFuZGxlci5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwRXZlbnRUeXBlXG4gKi9cbi8qKlxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciBhIG1hcCBmcmFtZSBpcyByZW5kZXJlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I3Bvc3RyZW5kZXJcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUE9TVFJFTkRFUjogJ3Bvc3RyZW5kZXInLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIHRoZSBtYXAgc3RhcnRzIG1vdmluZy5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL01hcEV2ZW50fk1hcEV2ZW50I21vdmVzdGFydFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNT1ZFU1RBUlQ6ICdtb3Zlc3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBhZnRlciB0aGUgbWFwIGlzIG1vdmVkLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvTWFwRXZlbnR+TWFwRXZlbnQjbW92ZWVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNT1ZFRU5EOiAnbW92ZWVuZCcsXG59O1xuLyoqKlxuICogQHR5cGVkZWYgeydwb3N0cmVuZGVyJ3wnbW92ZXN0YXJ0J3wnbW92ZWVuZCd9IFR5cGVzXG4gKi9cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU1hcEV2ZW50VHlwZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvTWFwUHJvcGVydHlcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgTEFZRVJHUk9VUDogJ2xheWVyZ3JvdXAnLFxuICAgIFNJWkU6ICdzaXplJyxcbiAgICBUQVJHRVQ6ICd0YXJnZXQnLFxuICAgIFZJRVc6ICd2aWV3Jyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXBQcm9wZXJ0eS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9Qcmlvcml0eVF1ZXVlXG4gKi9cbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xlYXIgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgdmFyIERST1AgPSBJbmZpbml0eTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogUHJpb3JpdHkgcXVldWUuXG4gKlxuICogVGhlIGltcGxlbWVudGF0aW9uIGlzIGluc3BpcmVkIGZyb20gdGhlIENsb3N1cmUgTGlicmFyeSdzIEhlYXAgY2xhc3MgYW5kXG4gKiBQeXRob24ncyBoZWFwcSBtb2R1bGUuXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9zdHJ1Y3RzL2hlYXAuanNcbiAqIGFuZCBodHRwczovL2hnLnB5dGhvbi5vcmcvY3B5dGhvbi9maWxlLzIuNy9MaWIvaGVhcHEucHkuXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIFByaW9yaXR5UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihUKTogbnVtYmVyfSBwcmlvcml0eUZ1bmN0aW9uIFByaW9yaXR5IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCk6IHN0cmluZ30ga2V5RnVuY3Rpb24gS2V5IGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFByaW9yaXR5UXVldWUocHJpb3JpdHlGdW5jdGlvbiwga2V5RnVuY3Rpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtmdW5jdGlvbihUKTogbnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wcmlvcml0eUZ1bmN0aW9uXyA9IHByaW9yaXR5RnVuY3Rpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oVCk6IHN0cmluZ31cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2V5RnVuY3Rpb25fID0ga2V5RnVuY3Rpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8VD59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVsZW1lbnRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PG51bWJlcj59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnByaW9yaXRpZXNfID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5xdWV1ZWRFbGVtZW50c18gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRklYTUUgZW1wdHkgZGVzY3JpcHRpb24gZm9yIGpzZG9jXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudHNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMucHJpb3JpdGllc18ubGVuZ3RoID0gMDtcbiAgICAgICAgY2xlYXIodGhpcy5xdWV1ZWRFbGVtZW50c18pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFuZCByZXR1cm4gdGhlIGhpZ2hlc3QtcHJpb3JpdHkgZWxlbWVudC4gTyhsb2cgTikuXG4gICAgICogQHJldHVybiB7VH0gRWxlbWVudC5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzWzBdO1xuICAgICAgICBpZiAoZWxlbWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICBwcmlvcml0aWVzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50c1swXSA9IGVsZW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgcHJpb3JpdGllc1swXSA9IHByaW9yaXRpZXMucG9wKCk7XG4gICAgICAgICAgICB0aGlzLnNpZnRVcF8oMCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVsZW1lbnRLZXkgPSB0aGlzLmtleUZ1bmN0aW9uXyhlbGVtZW50KTtcbiAgICAgICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW2VsZW1lbnRLZXldO1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVucXVldWUgYW4gZWxlbWVudC4gTyhsb2cgTikuXG4gICAgICogQHBhcmFtIHtUfSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIHRvIHRoZSBxdWV1ZS5cbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5lbnF1ZXVlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgYXNzZXJ0KCEodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkgaW4gdGhpcy5xdWV1ZWRFbGVtZW50c18pLCAzMSk7IC8vIFRyaWVkIHRvIGVucXVldWUgYW4gYGVsZW1lbnRgIHRoYXQgd2FzIGFscmVhZHkgYWRkZWQgdG8gdGhlIHF1ZXVlXG4gICAgICAgIHZhciBwcmlvcml0eSA9IHRoaXMucHJpb3JpdHlGdW5jdGlvbl8oZWxlbWVudCk7XG4gICAgICAgIGlmIChwcmlvcml0eSAhPSBEUk9QKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzXy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy5wcmlvcml0aWVzXy5wdXNoKHByaW9yaXR5KTtcbiAgICAgICAgICAgIHRoaXMucXVldWVkRWxlbWVudHNfW3RoaXMua2V5RnVuY3Rpb25fKGVsZW1lbnQpXSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNpZnREb3duXygwLCB0aGlzLmVsZW1lbnRzXy5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQ291bnQuXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGg7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgbGVmdCBjaGlsZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBnZXQgdGhlIGxlZnQgY2hpbGQgZm9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBsZWZ0IGNoaWxkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0TGVmdENoaWxkSW5kZXhfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiBpbmRleCAqIDIgKyAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIHJpZ2h0IGNoaWxkIG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcmlnaHQgY2hpbGQgZm9yLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSByaWdodCBjaGlsZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmdldFJpZ2h0Q2hpbGRJbmRleF8gPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4ICogMiArIDI7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBvZiB0aGUgcGFyZW50IG9mIHRoZSBub2RlIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggVGhlIGluZGV4IG9mIHRoZSBub2RlIHRvIGdldCB0aGUgcGFyZW50IGZvci5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgcGFyZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuZ2V0UGFyZW50SW5kZXhfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHJldHVybiAoaW5kZXggLSAxKSA+PiAxO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFrZSB0aGlzIGEgaGVhcC4gTyhOKS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmhlYXBpZnlfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gKHRoaXMuZWxlbWVudHNfLmxlbmd0aCA+PiAxKSAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB0aGlzLnNpZnRVcF8oaSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIGVtcHR5LlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzXy5sZW5ndGggPT09IDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJcyBrZXkgcXVldWVkLlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzS2V5UXVldWVkID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4ga2V5IGluIHRoaXMucXVldWVkRWxlbWVudHNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUfSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgcXVldWVkLlxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLmlzUXVldWVkID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNLZXlRdWV1ZWQodGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgbm9kZSB0byBtb3ZlIGRvd24uXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5zaWZ0VXBfID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgIHZhciBlbGVtZW50cyA9IHRoaXMuZWxlbWVudHNfO1xuICAgICAgICB2YXIgcHJpb3JpdGllcyA9IHRoaXMucHJpb3JpdGllc187XG4gICAgICAgIHZhciBjb3VudCA9IGVsZW1lbnRzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50c1tpbmRleF07XG4gICAgICAgIHZhciBwcmlvcml0eSA9IHByaW9yaXRpZXNbaW5kZXhdO1xuICAgICAgICB2YXIgc3RhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICB3aGlsZSAoaW5kZXggPCBjb3VudCA+PiAxKSB7XG4gICAgICAgICAgICB2YXIgbEluZGV4ID0gdGhpcy5nZXRMZWZ0Q2hpbGRJbmRleF8oaW5kZXgpO1xuICAgICAgICAgICAgdmFyIHJJbmRleCA9IHRoaXMuZ2V0UmlnaHRDaGlsZEluZGV4XyhpbmRleCk7XG4gICAgICAgICAgICB2YXIgc21hbGxlckNoaWxkSW5kZXggPSBySW5kZXggPCBjb3VudCAmJiBwcmlvcml0aWVzW3JJbmRleF0gPCBwcmlvcml0aWVzW2xJbmRleF1cbiAgICAgICAgICAgICAgICA/IHJJbmRleFxuICAgICAgICAgICAgICAgIDogbEluZGV4O1xuICAgICAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudHNbc21hbGxlckNoaWxkSW5kZXhdO1xuICAgICAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0aWVzW3NtYWxsZXJDaGlsZEluZGV4XTtcbiAgICAgICAgICAgIGluZGV4ID0gc21hbGxlckNoaWxkSW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudDtcbiAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICAgICAgdGhpcy5zaWZ0RG93bl8oc3RhcnRJbmRleCwgaW5kZXgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0SW5kZXggVGhlIGluZGV4IG9mIHRoZSByb290LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBUaGUgaW5kZXggb2YgdGhlIG5vZGUgdG8gbW92ZSB1cC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnNpZnREb3duXyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBpbmRleCkge1xuICAgICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXztcbiAgICAgICAgdmFyIHByaW9yaXRpZXMgPSB0aGlzLnByaW9yaXRpZXNfO1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdGllc1tpbmRleF07XG4gICAgICAgIHdoaWxlIChpbmRleCA+IHN0YXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRJbmRleCA9IHRoaXMuZ2V0UGFyZW50SW5kZXhfKGluZGV4KTtcbiAgICAgICAgICAgIGlmIChwcmlvcml0aWVzW3BhcmVudEluZGV4XSA+IHByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaW5kZXhdID0gZWxlbWVudHNbcGFyZW50SW5kZXhdO1xuICAgICAgICAgICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdGllc1twYXJlbnRJbmRleF07XG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJlbnRJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnRzW2luZGV4XSA9IGVsZW1lbnQ7XG4gICAgICAgIHByaW9yaXRpZXNbaW5kZXhdID0gcHJpb3JpdHk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5yZXByaW9yaXRpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwcmlvcml0eUZ1bmN0aW9uID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uXztcbiAgICAgICAgdmFyIGVsZW1lbnRzID0gdGhpcy5lbGVtZW50c187XG4gICAgICAgIHZhciBwcmlvcml0aWVzID0gdGhpcy5wcmlvcml0aWVzXztcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgICAgdmFyIG4gPSBlbGVtZW50cy5sZW5ndGg7XG4gICAgICAgIHZhciBlbGVtZW50LCBpLCBwcmlvcml0eTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG47ICsraSkge1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgICAgICAgICAgcHJpb3JpdHkgPSBwcmlvcml0eUZ1bmN0aW9uKGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHByaW9yaXR5ID09IERST1ApIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5xdWV1ZWRFbGVtZW50c19bdGhpcy5rZXlGdW5jdGlvbl8oZWxlbWVudCldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJpb3JpdGllc1tpbmRleF0gPSBwcmlvcml0eTtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tpbmRleCsrXSA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxlbWVudHMubGVuZ3RoID0gaW5kZXg7XG4gICAgICAgIHByaW9yaXRpZXMubGVuZ3RoID0gaW5kZXg7XG4gICAgICAgIHRoaXMuaGVhcGlmeV8oKTtcbiAgICB9O1xuICAgIHJldHVybiBQcmlvcml0eVF1ZXVlO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFByaW9yaXR5UXVldWU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qcmlvcml0eVF1ZXVlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVGlsZVF1ZXVlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBQcmlvcml0eVF1ZXVlLCB7IERST1AgfSBmcm9tICcuL3N0cnVjdHMvUHJpb3JpdHlRdWV1ZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge2Z1bmN0aW9uKGltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0LCBzdHJpbmcsIGltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlLCBudW1iZXIpOiBudW1iZXJ9IFByaW9yaXR5RnVuY3Rpb25cbiAqL1xudmFyIFRpbGVRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZVF1ZXVlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7UHJpb3JpdHlGdW5jdGlvbn0gdGlsZVByaW9yaXR5RnVuY3Rpb24gVGlsZSBwcmlvcml0eSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6ID99IHRpbGVDaGFuZ2VDYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgb24gZWFjaCB0aWxlIGNoYW5nZSBldmVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlUXVldWUodGlsZVByaW9yaXR5RnVuY3Rpb24sIHRpbGVDaGFuZ2VDYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBQcmlvcml0eS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGlsZVByaW9yaXR5RnVuY3Rpb24uYXBwbHkobnVsbCwgZWxlbWVudCk7XG4gICAgICAgIH0sIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZWxlbWVudCBFbGVtZW50LlxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEtleS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKGVsZW1lbnRbMF0pLmdldEtleSgpO1xuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVUaWxlQ2hhbmdlXyA9IF90aGlzLmhhbmRsZVRpbGVDaGFuZ2UuYmluZChfdGhpcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oKTogP31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDaGFuZ2VDYWxsYmFja18gPSB0aWxlQ2hhbmdlQ2FsbGJhY2s7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZXNMb2FkaW5nXyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsYm9vbGVhbj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlc0xvYWRpbmdLZXlzXyA9IHt9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGVsZW1lbnQgRWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZWxlbWVudCB3YXMgYWRkZWQgdG8gdGhlIHF1ZXVlLlxuICAgICAqL1xuICAgIFRpbGVRdWV1ZS5wcm90b3R5cGUuZW5xdWV1ZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciBhZGRlZCA9IF9zdXBlci5wcm90b3R5cGUuZW5xdWV1ZS5jYWxsKHRoaXMsIGVsZW1lbnQpO1xuICAgICAgICBpZiAoYWRkZWQpIHtcbiAgICAgICAgICAgIHZhciB0aWxlID0gZWxlbWVudFswXTtcbiAgICAgICAgICAgIHRpbGUuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kSGFuZGxlVGlsZUNoYW5nZV8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhZGRlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTnVtYmVyIG9mIHRpbGVzIGxvYWRpbmcuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5nZXRUaWxlc0xvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVzTG9hZGluZ187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlUXVldWUucHJvdG90eXBlLmhhbmRsZVRpbGVDaGFuZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHRpbGUgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5MT0FERUQgfHxcbiAgICAgICAgICAgIHN0YXRlID09PSBUaWxlU3RhdGUuRVJST1IgfHxcbiAgICAgICAgICAgIHN0YXRlID09PSBUaWxlU3RhdGUuRU1QVFkpIHtcbiAgICAgICAgICAgIHRpbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmJvdW5kSGFuZGxlVGlsZUNoYW5nZV8pO1xuICAgICAgICAgICAgdmFyIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgICAgICAgaWYgKHRpbGVLZXkgaW4gdGhpcy50aWxlc0xvYWRpbmdLZXlzXykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldO1xuICAgICAgICAgICAgICAgIC0tdGhpcy50aWxlc0xvYWRpbmdfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhUb3RhbExvYWRpbmcgTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZCBzaW11bHRhbmVvdXNseS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4TmV3TG9hZHMgTWF4aW11bSBudW1iZXIgb2YgbmV3IHRpbGVzIHRvIGxvYWQuXG4gICAgICovXG4gICAgVGlsZVF1ZXVlLnByb3RvdHlwZS5sb2FkTW9yZVRpbGVzID0gZnVuY3Rpb24gKG1heFRvdGFsTG9hZGluZywgbWF4TmV3TG9hZHMpIHtcbiAgICAgICAgdmFyIG5ld0xvYWRzID0gMDtcbiAgICAgICAgdmFyIHN0YXRlLCB0aWxlLCB0aWxlS2V5O1xuICAgICAgICB3aGlsZSAodGhpcy50aWxlc0xvYWRpbmdfIDwgbWF4VG90YWxMb2FkaW5nICYmXG4gICAgICAgICAgICBuZXdMb2FkcyA8IG1heE5ld0xvYWRzICYmXG4gICAgICAgICAgICB0aGlzLmdldENvdW50KCkgPiAwKSB7XG4gICAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZGVxdWV1ZSgpWzBdKTtcbiAgICAgICAgICAgIHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xuICAgICAgICAgICAgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFRpbGVTdGF0ZS5JRExFICYmICEodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICsrdGhpcy50aWxlc0xvYWRpbmdfO1xuICAgICAgICAgICAgICAgICsrbmV3TG9hZHM7XG4gICAgICAgICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBUaWxlUXVldWU7XG59KFByaW9yaXR5UXVldWUpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVRdWV1ZTtcbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoJy4vUGx1Z2dhYmxlTWFwLmpzJykuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLmRlZmF1bHR9IHRpbGUgVGlsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0aWxlU291cmNlS2V5IFRpbGUgc291cmNlIGtleS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRpbGVDZW50ZXIgVGlsZSBjZW50ZXIuXG4gKiBAcGFyYW0ge251bWJlcn0gdGlsZVJlc29sdXRpb24gVGlsZSByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHByaW9yaXR5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGlsZVByaW9yaXR5KGZyYW1lU3RhdGUsIHRpbGUsIHRpbGVTb3VyY2VLZXksIHRpbGVDZW50ZXIsIHRpbGVSZXNvbHV0aW9uKSB7XG4gICAgLy8gRmlsdGVyIG91dCB0aWxlcyBhdCBoaWdoZXIgem9vbSBsZXZlbHMgdGhhbiB0aGUgY3VycmVudCB6b29tIGxldmVsLCBvciB0aGF0XG4gICAgLy8gYXJlIG91dHNpZGUgdGhlIHZpc2libGUgZXh0ZW50LlxuICAgIGlmICghZnJhbWVTdGF0ZSB8fCAhKHRpbGVTb3VyY2VLZXkgaW4gZnJhbWVTdGF0ZS53YW50ZWRUaWxlcykpIHtcbiAgICAgICAgcmV0dXJuIERST1A7XG4gICAgfVxuICAgIGlmICghZnJhbWVTdGF0ZS53YW50ZWRUaWxlc1t0aWxlU291cmNlS2V5XVt0aWxlLmdldEtleSgpXSkge1xuICAgICAgICByZXR1cm4gRFJPUDtcbiAgICB9XG4gICAgLy8gUHJpb3JpdGl6ZSB0aGUgaGlnaGVzdCB6b29tIGxldmVsIHRpbGVzIGNsb3Nlc3QgdG8gdGhlIGZvY3VzLlxuICAgIC8vIFRpbGVzIGF0IGhpZ2hlciB6b29tIGxldmVscyBhcmUgcHJpb3JpdGl6ZWQgdXNpbmcgTWF0aC5sb2codGlsZVJlc29sdXRpb24pLlxuICAgIC8vIFdpdGhpbiBhIHpvb20gbGV2ZWwsIHRpbGVzIGFyZSBwcmlvcml0aXplZCBieSB0aGUgZGlzdGFuY2UgaW4gcGl4ZWxzIGJldHdlZW5cbiAgICAvLyB0aGUgY2VudGVyIG9mIHRoZSB0aWxlIGFuZCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3cG9ydC4gIFRoZSBmYWN0b3Igb2YgNjU1MzZcbiAgICAvLyBtZWFucyB0aGF0IHRoZSBwcmlvcml0aXphdGlvbiBzaG91bGQgYmVoYXZlIGFzIGRlc2lyZWQgZm9yIHRpbGVzIHVwIHRvXG4gICAgLy8gNjU1MzYgKiBNYXRoLmxvZygyKSA9IDQ1NDI2IHBpeGVscyBmcm9tIHRoZSBmb2N1cy5cbiAgICB2YXIgY2VudGVyID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUuY2VudGVyO1xuICAgIHZhciBkZWx0YVggPSB0aWxlQ2VudGVyWzBdIC0gY2VudGVyWzBdO1xuICAgIHZhciBkZWx0YVkgPSB0aWxlQ2VudGVyWzFdIC0gY2VudGVyWzFdO1xuICAgIHJldHVybiAoNjU1MzYgKiBNYXRoLmxvZyh0aWxlUmVzb2x1dGlvbikgK1xuICAgICAgICBNYXRoLnNxcnQoZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZKSAvIHRpbGVSZXNvbHV0aW9uKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVRdWV1ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc2l6ZVxuICovXG4vKipcbiAqIEFuIGFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGEgc2l6ZTogYFt3aWR0aCwgaGVpZ2h0XWAuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gU2l6ZVxuICogQGFwaVxuICovXG4vKipcbiAqIFJldHVybnMgYSBidWZmZXJlZCBzaXplLlxuICogQHBhcmFtIHtTaXplfSBzaXplIFNpemUuXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIFRoZSBhbW91bnQgYnkgd2hpY2ggdG8gYnVmZmVyLlxuICogQHBhcmFtIHtTaXplfSBbb3B0X3NpemVdIE9wdGlvbmFsIHJldXNhYmxlIHNpemUgYXJyYXkuXG4gKiBAcmV0dXJuIHtTaXplfSBUaGUgYnVmZmVyZWQgc2l6ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1ZmZlcihzaXplLCBudW0sIG9wdF9zaXplKSB7XG4gICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3B0X3NpemUgPSBbMCwgMF07XG4gICAgfVxuICAgIG9wdF9zaXplWzBdID0gc2l6ZVswXSArIDIgKiBudW07XG4gICAgb3B0X3NpemVbMV0gPSBzaXplWzFdICsgMiAqIG51bTtcbiAgICByZXR1cm4gb3B0X3NpemU7XG59XG4vKipcbiAqIERldGVybWluZXMgaWYgYSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgVGhlIHNpemUgdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBzaXplIGhhcyBhIHBvc2l0aXZlIGFyZWEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNBcmVhKHNpemUpIHtcbiAgICByZXR1cm4gc2l6ZVswXSA+IDAgJiYgc2l6ZVsxXSA+IDA7XG59XG4vKipcbiAqIFJldHVybnMgYSBzaXplIHNjYWxlZCBieSBhIHJhdGlvLiBUaGUgcmVzdWx0IHdpbGwgYmUgYW4gYXJyYXkgb2YgaW50ZWdlcnMuXG4gKiBAcGFyYW0ge1NpemV9IHNpemUgU2l6ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyBSYXRpby5cbiAqIEBwYXJhbSB7U2l6ZX0gW29wdF9zaXplXSBPcHRpb25hbCByZXVzYWJsZSBzaXplIGFycmF5LlxuICogQHJldHVybiB7U2l6ZX0gVGhlIHNjYWxlZCBzaXplLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUoc2l6ZSwgcmF0aW8sIG9wdF9zaXplKSB7XG4gICAgaWYgKG9wdF9zaXplID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgb3B0X3NpemUgPSBbMCwgMF07XG4gICAgfVxuICAgIG9wdF9zaXplWzBdID0gKHNpemVbMF0gKiByYXRpbyArIDAuNSkgfCAwO1xuICAgIG9wdF9zaXplWzFdID0gKHNpemVbMV0gKiByYXRpbyArIDAuNSkgfCAwO1xuICAgIHJldHVybiBvcHRfc2l6ZTtcbn1cbi8qKlxuICogUmV0dXJucyBhbiBgU2l6ZWAgYXJyYXkgZm9yIHRoZSBwYXNzZWQgaW4gbnVtYmVyIChtZWFuaW5nOiBzcXVhcmUpIG9yXG4gKiBgU2l6ZWAgYXJyYXkuXG4gKiAobWVhbmluZzogbm9uLXNxdWFyZSksXG4gKiBAcGFyYW0ge251bWJlcnxTaXplfSBzaXplIFdpZHRoIGFuZCBoZWlnaHQuXG4gKiBAcGFyYW0ge1NpemV9IFtvcHRfc2l6ZV0gT3B0aW9uYWwgcmV1c2FibGUgc2l6ZSBhcnJheS5cbiAqIEByZXR1cm4ge1NpemV9IFNpemUuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1NpemUoc2l6ZSwgb3B0X3NpemUpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShzaXplKSkge1xuICAgICAgICByZXR1cm4gc2l6ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChvcHRfc2l6ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBvcHRfc2l6ZSA9IFtzaXplLCBzaXplXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdF9zaXplWzBdID0gc2l6ZTtcbiAgICAgICAgICAgIG9wdF9zaXplWzFdID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3B0X3NpemU7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2l6ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1BsdWdnYWJsZU1hcFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuL09iamVjdC5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IENvbGxlY3Rpb25FdmVudFR5cGUgZnJvbSAnLi9Db2xsZWN0aW9uRXZlbnRUeXBlLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBMYXllckdyb3VwIGZyb20gJy4vbGF5ZXIvR3JvdXAuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudCBmcm9tICcuL01hcEJyb3dzZXJFdmVudC5qcyc7XG5pbXBvcnQgTWFwQnJvd3NlckV2ZW50SGFuZGxlciBmcm9tICcuL01hcEJyb3dzZXJFdmVudEhhbmRsZXIuanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi9NYXBCcm93c2VyRXZlbnRUeXBlLmpzJztcbmltcG9ydCBNYXBFdmVudCBmcm9tICcuL01hcEV2ZW50LmpzJztcbmltcG9ydCBNYXBFdmVudFR5cGUgZnJvbSAnLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IE1hcFByb3BlcnR5IGZyb20gJy4vTWFwUHJvcGVydHkuanMnO1xuaW1wb3J0IE9iamVjdEV2ZW50VHlwZSBmcm9tICcuL09iamVjdEV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgUG9pbnRlckV2ZW50VHlwZSBmcm9tICcuL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBSZW5kZXJFdmVudFR5cGUgZnJvbSAnLi9yZW5kZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlUXVldWUsIHsgZ2V0VGlsZVByaW9yaXR5IH0gZnJvbSAnLi9UaWxlUXVldWUuanMnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi9WaWV3LmpzJztcbmltcG9ydCBWaWV3SGludCBmcm9tICcuL1ZpZXdIaW50LmpzJztcbmltcG9ydCB7IERFVklDRV9QSVhFTF9SQVRJTywgUEFTU0lWRV9FVkVOVF9MSVNURU5FUlMgfSBmcm9tICcuL2hhcy5qcyc7XG5pbXBvcnQgeyBUUlVFIH0gZnJvbSAnLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYXBwbHkgYXMgYXBwbHlUcmFuc2Zvcm0sIGNyZWF0ZSBhcyBjcmVhdGVUcmFuc2Zvcm0sIH0gZnJvbSAnLi90cmFuc2Zvcm0uanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IGNsb25lLCBjcmVhdGVPclVwZGF0ZUVtcHR5LCBlcXVhbHMsIGdldEZvclZpZXdBbmRTaXplLCBpc0VtcHR5LCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGZyb21Vc2VyQ29vcmRpbmF0ZSwgdG9Vc2VyQ29vcmRpbmF0ZSB9IGZyb20gJy4vcHJvai5qcyc7XG5pbXBvcnQgeyBoYXNBcmVhIH0gZnJvbSAnLi9zaXplLmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4vZXZlbnRzLmpzJztcbmltcG9ydCB7IHJlbW92ZU5vZGUgfSBmcm9tICcuL2RvbS5qcyc7XG4vKipcbiAqIFN0YXRlIG9mIHRoZSBjdXJyZW50IGZyYW1lLiBPbmx5IGBwaXhlbFJhdGlvYCwgYHRpbWVgIGFuZCBgdmlld1N0YXRlYCBzaG91bGRcbiAqIGJlIHVzZWQgaW4gYXBwbGljYXRpb25zLlxuICogQHR5cGVkZWYge09iamVjdH0gRnJhbWVTdGF0ZVxuICogQHByb3BlcnR5IHtudW1iZXJ9IHBpeGVsUmF0aW8gVGhlIHBpeGVsIHJhdGlvIG9mIHRoZSBmcmFtZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lIFRoZSB0aW1lIHdoZW4gcmVuZGVyaW5nIG9mIHRoZSBmcmFtZSB3YXMgcmVxdWVzdGVkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1ZpZXcuanNcIikuU3RhdGV9IHZpZXdTdGF0ZSBUaGUgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gYW5pbWF0ZSBBbmltYXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19IGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtIENvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCJyYnVzaFwiKS5kZWZhdWx0fSBkZWNsdXR0ZXJUcmVlIERlY2x1dHRlclRyZWUuXG4gKiBAcHJvcGVydHkge251bGx8aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGluZGV4IEluZGV4LlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0xheWVyLmpzXCIpLlN0YXRlPn0gbGF5ZXJTdGF0ZXNBcnJheSBMYXllclN0YXRlc0FycmF5LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGxheWVySW5kZXggTGF5ZXJJbmRleC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi90cmFuc2Zvcm0uanNcIikuVHJhbnNmb3JtfSBwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSBQaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8UG9zdFJlbmRlckZ1bmN0aW9uPn0gcG9zdFJlbmRlckZ1bmN0aW9ucyBQb3N0UmVuZGVyRnVuY3Rpb25zLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gc2l6ZSBTaXplLlxuICogQHByb3BlcnR5IHtUaWxlUXVldWV9IHRpbGVRdWV1ZSBUaWxlUXVldWUuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHVzZWRUaWxlcyBVc2VkVGlsZXMuXG4gKiBAcHJvcGVydHkge0FycmF5PG51bWJlcj59IHZpZXdIaW50cyBWaWV3SGludHMuXG4gKiBAcHJvcGVydHkgeyFPYmplY3Q8c3RyaW5nLCBPYmplY3Q8c3RyaW5nLCBib29sZWFuPj59IHdhbnRlZFRpbGVzIFdhbnRlZFRpbGVzLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihQbHVnZ2FibGVNYXAsID9GcmFtZVN0YXRlKTogYW55fSBQb3N0UmVuZGVyRnVuY3Rpb25cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBBdFBpeGVsT3B0aW9uc1xuICogQHByb3BlcnR5IHt1bmRlZmluZWR8ZnVuY3Rpb24oaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gW2xheWVyRmlsdGVyXSBMYXllciBmaWx0ZXJcbiAqIGZ1bmN0aW9uLiBUaGUgZmlsdGVyIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSBvbmUgYXJndW1lbnQsIHRoZVxuICoge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllci1jYW5kaWRhdGV9IGFuZCBpdCBzaG91bGQgcmV0dXJuIGEgYm9vbGVhbiB2YWx1ZS5cbiAqIE9ubHkgbGF5ZXJzIHdoaWNoIGFyZSB2aXNpYmxlIGFuZCBmb3Igd2hpY2ggdGhpcyBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYFxuICogd2lsbCBiZSB0ZXN0ZWQgZm9yIGZlYXR1cmVzLiBCeSBkZWZhdWx0LCBhbGwgdmlzaWJsZSBsYXllcnMgd2lsbCBiZSB0ZXN0ZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2hpdFRvbGVyYW5jZT0wXSBIaXQtZGV0ZWN0aW9uIHRvbGVyYW5jZSBpbiBjc3MgcGl4ZWxzLiBQaXhlbHNcbiAqIGluc2lkZSB0aGUgcmFkaXVzIGFyb3VuZCB0aGUgZ2l2ZW4gcG9zaXRpb24gd2lsbCBiZSBjaGVja2VkIGZvciBmZWF0dXJlcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NoZWNrV3JhcHBlZD10cnVlXSBDaGVjay1XcmFwcGVkIFdpbGwgY2hlY2sgZm9yIGZvciB3cmFwcGVkIGdlb21ldHJpZXMgaW5zaWRlIHRoZSByYW5nZSBvZlxuICogICArLy0gMSB3b3JsZCB3aWR0aC4gV29ya3Mgb25seSBpZiBhIHByb2plY3Rpb24gaXMgdXNlZCB0aGF0IGNhbiBiZSB3cmFwcGVkLlxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1hcE9wdGlvbnNJbnRlcm5hbFxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBbY29udHJvbHNdIENvbnRyb2xzLlxuICogQHByb3BlcnR5IHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IFtpbnRlcmFjdGlvbnNdIEludGVyYWN0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9IGtleWJvYXJkRXZlbnRUYXJnZXQgS2V5Ym9hcmRFdmVudFRhcmdldC5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD59IG92ZXJsYXlzIE92ZXJsYXlzLlxuICogQHByb3BlcnR5IHtPYmplY3Q8c3RyaW5nLCAqPn0gdmFsdWVzIFZhbHVlcy5cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8J2NoYW5nZTpsYXllcmdyb3VwJ3wnY2hhbmdlOnNpemUnfCdjaGFuZ2U6dGFyZ2V0J3wnY2hhbmdlOnZpZXcnfSBNYXBPYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPE1hcE9iamVjdEV2ZW50VHlwZXMsIGltcG9ydChcIi4vT2JqZWN0XCIpLk9iamVjdEV2ZW50LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuL01hcEJyb3dzZXJFdmVudFR5cGVcIikuVHlwZXMsIGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vTWFwRXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuL01hcEV2ZW50XCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vcmVuZGVyL0V2ZW50VHlwZVwiKS5NYXBSZW5kZXJFdmVudFR5cGVzLCBpbXBvcnQoXCIuL3JlbmRlci9FdmVudFwiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfE1hcE9iamVjdEV2ZW50VHlwZXN8XG4gKiAgICAgIGltcG9ydChcIi4vTWFwQnJvd3NlckV2ZW50VHlwZVwiKS5UeXBlc3xpbXBvcnQoXCIuL01hcEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAgaW1wb3J0KFwiLi9yZW5kZXIvRXZlbnRUeXBlXCIpLk1hcFJlbmRlckV2ZW50VHlwZXMsIFJldHVybj59IFBsdWdnYWJsZU1hcE9uU2lnbmF0dXJlXG4gKi9cbi8qKlxuICogT2JqZWN0IGxpdGVyYWwgd2l0aCBjb25maWcgb3B0aW9ucyBmb3IgdGhlIG1hcC5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IE1hcE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn0gW2NvbnRyb2xzXVxuICogQ29udHJvbHMgaW5pdGlhbGx5IGFkZGVkIHRvIHRoZSBtYXAuIElmIG5vdCBzcGVjaWZpZWQsXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wuZGVmYXVsdHN9IGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW9dIFRoZSByYXRpbyBiZXR3ZWVuXG4gKiBwaHlzaWNhbCBwaXhlbHMgYW5kIGRldmljZS1pbmRlcGVuZGVudCBwaXhlbHMgKGRpcHMpIG9uIHRoZSBkZXZpY2UuXG4gKiBAcHJvcGVydHkge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0PnxBcnJheTxpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHQ+fSBbaW50ZXJhY3Rpb25zXVxuICogSW50ZXJhY3Rpb25zIHRoYXQgYXJlIGluaXRpYWxseSBhZGRlZCB0byB0aGUgbWFwLiBJZiBub3Qgc3BlY2lmaWVkLFxuICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi5kZWZhdWx0c30gaXMgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR8c3RyaW5nfSBba2V5Ym9hcmRFdmVudFRhcmdldF0gVGhlIGVsZW1lbnQgdG9cbiAqIGxpc3RlbiB0byBrZXlib2FyZCBldmVudHMgb24uIFRoaXMgZGV0ZXJtaW5lcyB3aGVuIHRoZSBgS2V5Ym9hcmRQYW5gIGFuZFxuICogYEtleWJvYXJkWm9vbWAgaW50ZXJhY3Rpb25zIHRyaWdnZXIuIEZvciBleGFtcGxlLCBpZiB0aGlzIG9wdGlvbiBpcyBzZXQgdG9cbiAqIGBkb2N1bWVudGAgdGhlIGtleWJvYXJkIGludGVyYWN0aW9ucyB3aWxsIGFsd2F5cyB0cmlnZ2VyLiBJZiB0aGlzIG9wdGlvbiBpc1xuICogbm90IHNwZWNpZmllZCwgdGhlIGVsZW1lbnQgdGhlIGxpYnJhcnkgbGlzdGVucyB0byBrZXlib2FyZCBldmVudHMgb24gaXMgdGhlXG4gKiBtYXAgdGFyZ2V0IChpLmUuIHRoZSB1c2VyLXByb3ZpZGVkIGRpdiBmb3IgdGhlIG1hcCkuIElmIHRoaXMgaXMgbm90XG4gKiBgZG9jdW1lbnRgLCB0aGUgdGFyZ2V0IGVsZW1lbnQgbmVlZHMgdG8gYmUgZm9jdXNlZCBmb3Iga2V5IGV2ZW50cyB0byBiZVxuICogZW1pdHRlZCwgcmVxdWlyaW5nIHRoYXQgdGhlIHRhcmdldCBlbGVtZW50IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdD58TGF5ZXJHcm91cH0gW2xheWVyc11cbiAqIExheWVycy4gSWYgdGhpcyBpcyBub3QgZGVmaW5lZCwgYSBtYXAgd2l0aCBubyBsYXllcnMgd2lsbCBiZSByZW5kZXJlZC4gTm90ZVxuICogdGhhdCBsYXllcnMgYXJlIHJlbmRlcmVkIGluIHRoZSBvcmRlciBzdXBwbGllZCwgc28gaWYgeW91IHdhbnQsIGZvciBleGFtcGxlLFxuICogYSB2ZWN0b3IgbGF5ZXIgdG8gYXBwZWFyIG9uIHRvcCBvZiBhIHRpbGUgbGF5ZXIsIGl0IG11c3QgY29tZSBhZnRlciB0aGUgdGlsZVxuICogbGF5ZXIuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFRpbGVzTG9hZGluZz0xNl0gTWF4aW11bSBudW1iZXIgdGlsZXMgdG8gbG9hZFxuICogc2ltdWx0YW5lb3VzbHkuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21vdmVUb2xlcmFuY2U9MV0gVGhlIG1pbmltdW0gZGlzdGFuY2UgaW4gcGl4ZWxzIHRoZVxuICogY3Vyc29yIG11c3QgbW92ZSB0byBiZSBkZXRlY3RlZCBhcyBhIG1hcCBtb3ZlIGV2ZW50IGluc3RlYWQgb2YgYSBjbGljay5cbiAqIEluY3JlYXNpbmcgdGhpcyB2YWx1ZSBjYW4gbWFrZSBpdCBlYXNpZXIgdG8gY2xpY2sgb24gdGhlIG1hcC5cbiAqIEBwcm9wZXJ0eSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdD58QXJyYXk8aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBbb3ZlcmxheXNdXG4gKiBPdmVybGF5cyBpbml0aWFsbHkgYWRkZWQgdG8gdGhlIG1hcC4gQnkgZGVmYXVsdCwgbm8gb3ZlcmxheXMgYXJlIGFkZGVkLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFRoZSBjb250YWluZXIgZm9yIHRoZSBtYXAsIGVpdGhlciB0aGVcbiAqIGVsZW1lbnQgaXRzZWxmIG9yIHRoZSBgaWRgIG9mIHRoZSBlbGVtZW50LiBJZiBub3Qgc3BlY2lmaWVkIGF0IGNvbnN0cnVjdGlvblxuICogdGltZSwge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI3NldFRhcmdldH0gbXVzdCBiZSBjYWxsZWQgZm9yIHRoZSBtYXAgdG8gYmVcbiAqIHJlbmRlcmVkLiBJZiBwYXNzZWQgYnkgZWxlbWVudCwgdGhlIGNvbnRhaW5lciBjYW4gYmUgaW4gYSBzZWNvbmRhcnkgZG9jdW1lbnQuXG4gKiBAcHJvcGVydHkge1ZpZXd9IFt2aWV3XSBUaGUgbWFwJ3Mgdmlldy4gIE5vIGxheWVyIHNvdXJjZXMgd2lsbCBiZVxuICogZmV0Y2hlZCB1bmxlc3MgdGhpcyBpcyBzcGVjaWZpZWQgYXQgY29uc3RydWN0aW9uIHRpbWUgb3IgdGhyb3VnaFxuICoge0BsaW5rIG1vZHVsZTpvbC9NYXB+TWFwI3NldFZpZXd9LlxuICovXG4vKipcbiAqIEBhcGlcbiAqL1xudmFyIFBsdWdnYWJsZU1hcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUGx1Z2dhYmxlTWFwLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQbHVnZ2FibGVNYXAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtQbHVnZ2FibGVNYXBPblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1BsdWdnYWJsZU1hcE9uU2lnbmF0dXJlPGltcG9ydChcIi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtQbHVnZ2FibGVNYXBPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICB2YXIgb3B0aW9uc0ludGVybmFsID0gY3JlYXRlT3B0aW9uc0ludGVybmFsKG9wdGlvbnMpO1xuICAgICAgICAvKiogQHByaXZhdGUgKi9cbiAgICAgICAgX3RoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfID0gX3RoaXMuaGFuZGxlQnJvd3NlckV2ZW50LmJpbmQoX3RoaXMpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heFRpbGVzTG9hZGluZ18gPVxuICAgICAgICAgICAgb3B0aW9ucy5tYXhUaWxlc0xvYWRpbmcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4VGlsZXNMb2FkaW5nIDogMTY7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpb18gPVxuICAgICAgICAgICAgb3B0aW9ucy5waXhlbFJhdGlvICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMucGl4ZWxSYXRpb1xuICAgICAgICAgICAgICAgIDogREVWSUNFX1BJWEVMX1JBVElPO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyp9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmFuaW1hdGlvbkRlbGF5S2V5XztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmltYXRpb25EZWxheV8gPSAvKiogQHRoaXMge1BsdWdnYWJsZU1hcH0gKi8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheUtleV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnJlbmRlckZyYW1lXyhEYXRlLm5vdygpKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL3RyYW5zZm9ybS5qc1wiKS5UcmFuc2Zvcm19XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybV8gPSBjcmVhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZUluZGV4XyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0ZyYW1lU3RhdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5mcmFtZVN0YXRlXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZXh0ZW50IGF0IHRoZSBwcmV2aW91cyAnbW92ZWVuZCcgZXZlbnQuXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wcmV2aW91c0V4dGVudF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9pbXBvcnQoXCIuL2V2ZW50cy5qc1wiKS5FdmVudHNLZXl9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnZpZXdwb3J0XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uY2xhc3NOYW1lID1cbiAgICAgICAgICAgICdvbC12aWV3cG9ydCcgKyAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93ID8gJyBvbC10b3VjaCcgOiAnJyk7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICBfdGhpcy52aWV3cG9ydF8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLnZpZXdwb3J0Xy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lcl8uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS56SW5kZXggPSAnMCc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyXy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJfLmNsYXNzTmFtZSA9ICdvbC1vdmVybGF5Y29udGFpbmVyJztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmFwcGVuZENoaWxkKF90aGlzLm92ZXJsYXlDb250YWluZXJfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshSFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBfdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLnpJbmRleCA9ICcwJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICAgX3RoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF8uY2xhc3NOYW1lID0gJ29sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50JztcbiAgICAgICAgX3RoaXMudmlld3BvcnRfLmFwcGVuZENoaWxkKF90aGlzLm92ZXJsYXlDb250YWluZXJTdG9wRXZlbnRfKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtNYXBCcm93c2VyRXZlbnRIYW5kbGVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwQnJvd3NlckV2ZW50SGFuZGxlcl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1vdmVUb2xlcmFuY2VfID0gb3B0aW9ucy5tb3ZlVG9sZXJhbmNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fERvY3VtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5Ym9hcmRFdmVudFRhcmdldF8gPSBvcHRpb25zSW50ZXJuYWwua2V5Ym9hcmRFdmVudFRhcmdldDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/QXJyYXk8aW1wb3J0KFwiLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleUhhbmRsZXJLZXlzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udHJvbHMgPSBvcHRpb25zSW50ZXJuYWwuY29udHJvbHMgfHwgbmV3IENvbGxlY3Rpb24oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucyA9IG9wdGlvbnNJbnRlcm5hbC5pbnRlcmFjdGlvbnMgfHwgbmV3IENvbGxlY3Rpb24oKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm92ZXJsYXlzXyA9IG9wdGlvbnNJbnRlcm5hbC5vdmVybGF5cztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbG9va3VwIG9mIG92ZXJsYXlzIGJ5IGlkLlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3ZlcmxheUlkSW5kZXhfID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVyXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7dW5kZWZpbmVkfGZ1bmN0aW9uKEV2ZW50KTogdm9pZH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmhhbmRsZVJlc2l6ZV87XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PFBvc3RSZW5kZXJGdW5jdGlvbj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge1RpbGVRdWV1ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVRdWV1ZV8gPSBuZXcgVGlsZVF1ZXVlKF90aGlzLmdldFRpbGVQcmlvcml0eS5iaW5kKF90aGlzKSwgX3RoaXMuaGFuZGxlVGlsZUNoYW5nZV8uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5MQVlFUkdST1VQLCBfdGhpcy5oYW5kbGVMYXllckdyb3VwQ2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5WSUVXLCBfdGhpcy5oYW5kbGVWaWV3Q2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5TSVpFLCBfdGhpcy5oYW5kbGVTaXplQ2hhbmdlZF8pO1xuICAgICAgICBfdGhpcy5hZGRDaGFuZ2VMaXN0ZW5lcihNYXBQcm9wZXJ0eS5UQVJHRVQsIF90aGlzLmhhbmRsZVRhcmdldENoYW5nZWRfKTtcbiAgICAgICAgLy8gc2V0UHJvcGVydGllcyB3aWxsIHRyaWdnZXIgdGhlIHJlbmRlcmluZyBvZiB0aGUgbWFwIGlmIHRoZSBtYXBcbiAgICAgICAgLy8gaXMgXCJkZWZpbmVkXCIgYWxyZWFkeS5cbiAgICAgICAgX3RoaXMuc2V0UHJvcGVydGllcyhvcHRpb25zSW50ZXJuYWwudmFsdWVzKTtcbiAgICAgICAgX3RoaXMuY29udHJvbHMuZm9yRWFjaChcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdH0gY29udHJvbCBDb250cm9sLlxuICAgICAgICAgKiBAdGhpcyB7UGx1Z2dhYmxlTWFwfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgICAgIGNvbnRyb2wuc2V0TWFwKHRoaXMpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMuY29udHJvbHMuYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5jb250cm9scy5hZGRFdmVudExpc3RlbmVyKENvbGxlY3Rpb25FdmVudFR5cGUuUkVNT1ZFLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLkNvbGxlY3Rpb25FdmVudH0gZXZlbnQgQ29sbGVjdGlvbkV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5lbGVtZW50LnNldE1hcChudWxsKTtcbiAgICAgICAgfS5iaW5kKF90aGlzKSk7XG4gICAgICAgIF90aGlzLmludGVyYWN0aW9ucy5mb3JFYWNoKFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzXCIpLmRlZmF1bHR9IGludGVyYWN0aW9uIEludGVyYWN0aW9uLlxuICAgICAgICAgKiBAdGhpcyB7UGx1Z2dhYmxlTWFwfVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgICAgICBpbnRlcmFjdGlvbi5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGlvbnMuYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLkFERCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAodGhpcyk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5pbnRlcmFjdGlvbnMuYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQuZWxlbWVudC5zZXRNYXAobnVsbCk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5vdmVybGF5c18uZm9yRWFjaChfdGhpcy5hZGRPdmVybGF5SW50ZXJuYWxfLmJpbmQoX3RoaXMpKTtcbiAgICAgICAgX3RoaXMub3ZlcmxheXNfLmFkZEV2ZW50TGlzdGVuZXIoQ29sbGVjdGlvbkV2ZW50VHlwZS5BREQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbkV2ZW50fSBldmVudCBDb2xsZWN0aW9uRXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkT3ZlcmxheUludGVybmFsXyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9ICovIChldmVudC5lbGVtZW50KSk7XG4gICAgICAgIH0uYmluZChfdGhpcykpO1xuICAgICAgICBfdGhpcy5vdmVybGF5c18uYWRkRXZlbnRMaXN0ZW5lcihDb2xsZWN0aW9uRXZlbnRUeXBlLlJFTU9WRSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uRXZlbnR9IGV2ZW50IENvbGxlY3Rpb25FdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgdmFyIG92ZXJsYXkgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSAqLyAoZXZlbnQuZWxlbWVudCk7XG4gICAgICAgICAgICB2YXIgaWQgPSBvdmVybGF5LmdldElkKCk7XG4gICAgICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm92ZXJsYXlJZEluZGV4X1tpZC50b1N0cmluZygpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV2ZW50LmVsZW1lbnQuc2V0TWFwKG51bGwpO1xuICAgICAgICB9LmJpbmQoX3RoaXMpKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3JlbmRlcmVyL01hcC5qc1wiKS5kZWZhdWx0fSBUaGUgbWFwIHJlbmRlcmVyXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5jcmVhdGVSZW5kZXJlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2UgYSBtYXAgdHlwZSB0aGF0IGhhcyBhIGNyZWF0ZVJlbmRlcmVyIG1ldGhvZCcpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBnaXZlbiBjb250cm9sIHRvIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkQ29udHJvbCA9IGZ1bmN0aW9uIChjb250cm9sKSB7XG4gICAgICAgIHRoaXMuZ2V0Q29udHJvbHMoKS5wdXNoKGNvbnRyb2wpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBnaXZlbiBpbnRlcmFjdGlvbiB0byB0aGUgbWFwLiBJZiB5b3Ugd2FudCB0byBhZGQgYW4gaW50ZXJhY3Rpb25cbiAgICAgKiBhdCBhbm90aGVyIHBvaW50IG9mIHRoZSBjb2xsZWN0aW9uIHVzZSBgZ2V0SW50ZXJhY3Rpb24oKWAgYW5kIHRoZSBtZXRob2RzXG4gICAgICogYXZhaWxhYmxlIG9uIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgICAqIHN0b3AgdGhlIGV2ZW50IHByb3BhZ2F0aW9uIGZyb20gdGhlIGhhbmRsZUV2ZW50IGZ1bmN0aW9uLiBUaGUgaW50ZXJhY3Rpb25zXG4gICAgICogZ2V0IHRvIGhhbmRsZSB0aGUgZXZlbnRzIGluIHRoZSByZXZlcnNlIG9yZGVyIG9mIHRoaXMgY29sbGVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24gdG8gYWRkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmFkZEludGVyYWN0aW9uID0gZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgIHRoaXMuZ2V0SW50ZXJhY3Rpb25zKCkucHVzaChpbnRlcmFjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiBsYXllciB0byB0aGUgdG9wIG9mIHRoaXMgbWFwLiBJZiB5b3Ugd2FudCB0byBhZGQgYSBsYXllclxuICAgICAqIGVsc2V3aGVyZSBpbiB0aGUgc3RhY2ssIHVzZSBgZ2V0TGF5ZXJzKClgIGFuZCB0aGUgbWV0aG9kcyBhdmFpbGFibGUgb25cbiAgICAgKiB7QGxpbmsgbW9kdWxlOm9sL0NvbGxlY3Rpb25+Q29sbGVjdGlvbn0uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkTGF5ZXIgPSBmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgdmFyIGxheWVycyA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVycygpO1xuICAgICAgICBsYXllcnMucHVzaChsYXllcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBZGQgdGhlIGdpdmVuIG92ZXJsYXkgdG8gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBvdmVybGF5IE92ZXJsYXkuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkT3ZlcmxheSA9IGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICAgIHRoaXMuZ2V0T3ZlcmxheXMoKS5wdXNoKG92ZXJsYXkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhpcyBkZWFscyB3aXRoIG1hcCdzIG92ZXJsYXkgY29sbGVjdGlvbiBjaGFuZ2VzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHR9IG92ZXJsYXkgT3ZlcmxheS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuYWRkT3ZlcmxheUludGVybmFsXyA9IGZ1bmN0aW9uIChvdmVybGF5KSB7XG4gICAgICAgIHZhciBpZCA9IG92ZXJsYXkuZ2V0SWQoKTtcbiAgICAgICAgaWYgKGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheUlkSW5kZXhfW2lkLnRvU3RyaW5nKCldID0gb3ZlcmxheTtcbiAgICAgICAgfVxuICAgICAgICBvdmVybGF5LnNldE1hcCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc2V0VGFyZ2V0KG51bGwpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZWN0IGZlYXR1cmVzIHRoYXQgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LCBhbmQgZXhlY3V0ZSBhXG4gICAgICogY2FsbGJhY2sgd2l0aCBlYWNoIGludGVyc2VjdGluZyBmZWF0dXJlLiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlIGRldGVjdGlvbiBjYW5cbiAgICAgKiBiZSBjb25maWd1cmVkIHRocm91Z2ggdGhlIGBsYXllckZpbHRlcmAgb3B0aW9uIGluIGBvcHRfb3B0aW9uc2AuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4vRmVhdHVyZS5qc1wiKS5GZWF0dXJlTGlrZSwgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCBpbXBvcnQoXCIuL2dlb20vU2ltcGxlR2VvbWV0cnkuanNcIikuZGVmYXVsdCk6IFR9IGNhbGxiYWNrIEZlYXR1cmUgY2FsbGJhY2suIFRoZSBjYWxsYmFjayB3aWxsIGJlXG4gICAgICogICAgIGNhbGxlZCB3aXRoIHR3byBhcmd1bWVudHMuIFRoZSBmaXJzdCBhcmd1bWVudCBpcyBvbmVcbiAgICAgKiAgICAge0BsaW5rIG1vZHVsZTpvbC9GZWF0dXJlIGZlYXR1cmV9IG9yXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvcmVuZGVyL0ZlYXR1cmUgcmVuZGVyIGZlYXR1cmV9IGF0IHRoZSBwaXhlbCwgdGhlIHNlY29uZCBpc1xuICAgICAqICAgICB0aGUge0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllciBsYXllcn0gb2YgdGhlIGZlYXR1cmUgYW5kIHdpbGwgYmUgbnVsbCBmb3JcbiAgICAgKiAgICAgdW5tYW5hZ2VkIGxheWVycy4gVG8gc3RvcCBkZXRlY3Rpb24sIGNhbGxiYWNrIGZ1bmN0aW9ucyBjYW4gcmV0dXJuIGFcbiAgICAgKiAgICAgdHJ1dGh5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtUfHVuZGVmaW5lZH0gQ2FsbGJhY2sgcmVzdWx0LCBpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YgbGFzdFxuICAgICAqIGNhbGxiYWNrIGV4ZWN1dGlvbiwgb3IgdGhlIGZpcnN0IHRydXRoeSBjYWxsYmFjayByZXR1cm4gdmFsdWUuXG4gICAgICogQHRlbXBsYXRlIFMsVFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjb29yZGluYXRlID0gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwocGl4ZWwpO1xuICAgICAgICBvcHRfb3B0aW9ucyA9IG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgaGl0VG9sZXJhbmNlID0gb3B0X29wdGlvbnMuaGl0VG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRfb3B0aW9ucy5sYXllckZpbHRlciAhPT0gdW5kZWZpbmVkID8gb3B0X29wdGlvbnMubGF5ZXJGaWx0ZXIgOiBUUlVFO1xuICAgICAgICB2YXIgY2hlY2tXcmFwcGVkID0gb3B0X29wdGlvbnMuY2hlY2tXcmFwcGVkICE9PSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJfLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKGNvb3JkaW5hdGUsIHRoaXMuZnJhbWVTdGF0ZV8sIGhpdFRvbGVyYW5jZSwgY2hlY2tXcmFwcGVkLCBjYWxsYmFjaywgbnVsbCwgbGF5ZXJGaWx0ZXIsIG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBmZWF0dXJlcyB0aGF0IGludGVyc2VjdCBhIHBpeGVsIG9uIHRoZSB2aWV3cG9ydC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9uYWwgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtBcnJheTxpbXBvcnQoXCIuL0ZlYXR1cmUuanNcIikuRmVhdHVyZUxpa2U+fSBUaGUgZGV0ZWN0ZWQgZmVhdHVyZXMgb3JcbiAgICAgKiBhbiBlbXB0eSBhcnJheSBpZiBub25lIHdlcmUgZm91bmQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RmVhdHVyZXNBdFBpeGVsID0gZnVuY3Rpb24gKHBpeGVsLCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgdGhpcy5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uIChmZWF0dXJlKSB7XG4gICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuICAgICAgICB9LCBvcHRfb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERldGVjdCBsYXllcnMgdGhhdCBoYXZlIGEgY29sb3IgdmFsdWUgYXQgYSBwaXhlbCBvbiB0aGUgdmlld3BvcnQsIGFuZFxuICAgICAqIGV4ZWN1dGUgYSBjYWxsYmFjayB3aXRoIGVhY2ggbWF0Y2hpbmcgbGF5ZXIuIExheWVycyBpbmNsdWRlZCBpbiB0aGVcbiAgICAgKiBkZXRlY3Rpb24gY2FuIGJlIGNvbmZpZ3VyZWQgdGhyb3VnaCBgb3B0X2xheWVyRmlsdGVyYC5cbiAgICAgKlxuICAgICAqIE5vdGU6IHRoaXMgbWF5IGdpdmUgZmFsc2UgcG9zaXRpdmVzIHVubGVzcyB0aGUgbWFwIGxheWVycyBoYXZlIGhhZCBkaWZmZXJlbnQgYGNsYXNzTmFtZWBcbiAgICAgKiBwcm9wZXJ0aWVzIGFzc2lnbmVkIHRvIHRoZW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczogUywgaW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0LCAoVWludDhDbGFtcGVkQXJyYXl8VWludDhBcnJheSkpOiBUfSBjYWxsYmFja1xuICAgICAqICAgICBMYXllciBjYWxsYmFjay4gVGhpcyBjYWxsYmFjayB3aWxsIHJlY2VpdmUgdHdvIGFyZ3VtZW50czogZmlyc3QgaXMgdGhlXG4gICAgICogICAgIHtAbGluayBtb2R1bGU6b2wvbGF5ZXIvTGF5ZXIgbGF5ZXJ9LCBzZWNvbmQgYXJndW1lbnQgaXMgYW4gYXJyYXkgcmVwcmVzZW50aW5nXG4gICAgICogICAgIFtSLCBHLCBCLCBBXSBwaXhlbCB2YWx1ZXMgKDAgLSAyNTUpIGFuZCB3aWxsIGJlIGBudWxsYCBmb3IgbGF5ZXIgdHlwZXNcbiAgICAgKiAgICAgdGhhdCBkbyBub3QgY3VycmVudGx5IHN1cHBvcnQgdGhpcyBhcmd1bWVudC4gVG8gc3RvcCBkZXRlY3Rpb24sIGNhbGxiYWNrXG4gICAgICogICAgIGZ1bmN0aW9ucyBjYW4gcmV0dXJuIGEgdHJ1dGh5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXRQaXhlbE9wdGlvbnN9IFtvcHRfb3B0aW9uc10gQ29uZmlndXJhdGlvbiBvcHRpb25zLlxuICAgICAqIEByZXR1cm4ge1R8dW5kZWZpbmVkfSBDYWxsYmFjayByZXN1bHQsIGkuZS4gdGhlIHJldHVybiB2YWx1ZSBvZiBsYXN0XG4gICAgICogY2FsbGJhY2sgZXhlY3V0aW9uLCBvciB0aGUgZmlyc3QgdHJ1dGh5IGNhbGxiYWNrIHJldHVybiB2YWx1ZS5cbiAgICAgKiBAdGVtcGxhdGUgUyxUXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgY2FsbGJhY2ssIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5mcmFtZVN0YXRlXykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gICAgICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRpb25zLmhpdFRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5oaXRUb2xlcmFuY2UgOiAwO1xuICAgICAgICB2YXIgbGF5ZXJGaWx0ZXIgPSBvcHRpb25zLmxheWVyRmlsdGVyIHx8IFRSVUU7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyXy5mb3JFYWNoTGF5ZXJBdFBpeGVsKHBpeGVsLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCBsYXllckZpbHRlcik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlY3QgaWYgZmVhdHVyZXMgaW50ZXJzZWN0IGEgcGl4ZWwgb24gdGhlIHZpZXdwb3J0LiBMYXllcnMgaW5jbHVkZWQgaW4gdGhlXG4gICAgICogZGV0ZWN0aW9uIGNhbiBiZSBjb25maWd1cmVkIHRocm91Z2ggYG9wdF9sYXllckZpbHRlcmAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbC5cbiAgICAgKiBAcGFyYW0ge0F0UGl4ZWxPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbmFsIG9wdGlvbnMuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSXMgdGhlcmUgYSBmZWF0dXJlIGF0IHRoZSBnaXZlbiBwaXhlbD9cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYXNGZWF0dXJlQXRQaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZyYW1lU3RhdGVfKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNvb3JkaW5hdGUgPSB0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCk7XG4gICAgICAgIG9wdF9vcHRpb25zID0gb3B0X29wdGlvbnMgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBsYXllckZpbHRlciA9IG9wdF9vcHRpb25zLmxheWVyRmlsdGVyICE9PSB1bmRlZmluZWQgPyBvcHRfb3B0aW9ucy5sYXllckZpbHRlciA6IFRSVUU7XG4gICAgICAgIHZhciBoaXRUb2xlcmFuY2UgPSBvcHRfb3B0aW9ucy5oaXRUb2xlcmFuY2UgIT09IHVuZGVmaW5lZCA/IG9wdF9vcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XG4gICAgICAgIHZhciBjaGVja1dyYXBwZWQgPSBvcHRfb3B0aW9ucy5jaGVja1dyYXBwZWQgIT09IGZhbHNlO1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl8uaGFzRmVhdHVyZUF0Q29vcmRpbmF0ZShjb29yZGluYXRlLCB0aGlzLmZyYW1lU3RhdGVfLCBoaXRUb2xlcmFuY2UsIGNoZWNrV3JhcHBlZCwgbGF5ZXJGaWx0ZXIsIG51bGwpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBpbiB1c2VyIHByb2plY3Rpb24gZm9yIGEgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldEV2ZW50Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb29yZGluYXRlRnJvbVBpeGVsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY29vcmRpbmF0ZSBpbiB2aWV3IHByb2plY3Rpb24gZm9yIGEgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBDb29yZGluYXRlLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRDb29yZGluYXRlSW50ZXJuYWwgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsKHRoaXMuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHBpeGVsIHBvc2l0aW9uIGZvciBhIGJyb3dzZXIgZXZlbnQgcmVsYXRpdmUgdG8gdGhlIHZpZXdwb3J0LlxuICAgICAqIEBwYXJhbSB7VUlFdmVudH0gZXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gUGl4ZWwuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0RXZlbnRQaXhlbCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgdmlld3BvcnRQb3NpdGlvbiA9IHRoaXMudmlld3BvcnRfLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgZXZlbnRQb3NpdGlvbiA9IFxuICAgICAgICAvL0ZJWE1FIEFyZSB3ZSByZWFsbHkgY2FsbGluZyB0aGlzIHdpdGggYSBUb3VjaEV2ZW50IGFueXdoZXJlP1xuICAgICAgICAnY2hhbmdlZFRvdWNoZXMnIGluIGV2ZW50XG4gICAgICAgICAgICA/IC8qKiBAdHlwZSB7VG91Y2hFdmVudH0gKi8gKGV2ZW50KS5jaGFuZ2VkVG91Y2hlc1swXVxuICAgICAgICAgICAgOiAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChldmVudCk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBldmVudFBvc2l0aW9uLmNsaWVudFggLSB2aWV3cG9ydFBvc2l0aW9uLmxlZnQsXG4gICAgICAgICAgICBldmVudFBvc2l0aW9uLmNsaWVudFkgLSB2aWV3cG9ydFBvc2l0aW9uLnRvcCxcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGFyZ2V0IGluIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJldHVybnMgd2hhdCBpcyBlbnRlcmVkIGFzIGFuIG9wdGlvbiBvciBpbiBzZXRUYXJnZXQ6XG4gICAgICogaWYgdGhhdCB3YXMgYW4gZWxlbWVudCwgaXQgcmV0dXJucyBhbiBlbGVtZW50OyBpZiBhIHN0cmluZywgaXQgcmV0dXJucyB0aGF0LlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fHN0cmluZ3x1bmRlZmluZWR9IFRoZSBFbGVtZW50IG9yIGlkIG9mIHRoZSBFbGVtZW50IHRoYXQgdGhlXG4gICAgICogICAgIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFRhcmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR8c3RyaW5nfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KE1hcFByb3BlcnR5LlRBUkdFVCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBET00gZWxlbWVudCBpbnRvIHdoaWNoIHRoaXMgbWFwIGlzIHJlbmRlcmVkLiBJbiBjb250cmFzdCB0b1xuICAgICAqIGBnZXRUYXJnZXRgIHRoaXMgbWV0aG9kIGFsd2F5cyByZXR1cm4gYW4gYEVsZW1lbnRgLCBvciBgbnVsbGAgaWYgdGhlXG4gICAgICogbWFwIGhhcyBubyB0YXJnZXQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFRoZSBlbGVtZW50IHRoYXQgdGhlIG1hcCBpcyByZW5kZXJlZCBpbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUYXJnZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy5nZXRUYXJnZXQoKTtcbiAgICAgICAgaWYgKHRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHRhcmdldCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhcmdldClcbiAgICAgICAgICAgICAgICA6IHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgICAqIHVzZXIgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsIHBvc2l0aW9uIGluIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFRoZSBjb29yZGluYXRlIGZvciB0aGUgcGl4ZWwgcG9zaXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbCA9IGZ1bmN0aW9uIChwaXhlbCkge1xuICAgICAgICByZXR1cm4gdG9Vc2VyQ29vcmRpbmF0ZSh0aGlzLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCksIHRoaXMuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGNvb3JkaW5hdGUgZm9yIGEgZ2l2ZW4gcGl4ZWwuICBUaGlzIHJldHVybnMgYSBjb29yZGluYXRlIGluIHRoZVxuICAgICAqIG1hcCB2aWV3IHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3BpeGVsLmpzXCIpLlBpeGVsfSBwaXhlbCBQaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBUaGUgY29vcmRpbmF0ZSBmb3IgdGhlIHBpeGVsIHBvc2l0aW9uLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUZyb21QaXhlbEludGVybmFsID0gZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLCBwaXhlbC5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgY29udHJvbHMuIE1vZGlmeWluZyB0aGlzIGNvbGxlY3Rpb24gY2hhbmdlcyB0aGUgY29udHJvbHNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vY29udHJvbC9Db250cm9sLmpzXCIpLmRlZmF1bHQ+fSBDb250cm9scy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRDb250cm9scyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbHM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBvdmVybGF5cy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBvdmVybGF5c1xuICAgICAqIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWFwLlxuICAgICAqIEByZXR1cm4ge0NvbGxlY3Rpb248aW1wb3J0KFwiLi9PdmVybGF5LmpzXCIpLmRlZmF1bHQ+fSBPdmVybGF5cy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRPdmVybGF5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheXNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IGFuIG92ZXJsYXkgYnkgaXRzIGlkZW50aWZpZXIgKHRoZSB2YWx1ZSByZXR1cm5lZCBieSBvdmVybGF5LmdldElkKCkpLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgaW5kZXggdHJlYXRzIHN0cmluZyBhbmQgbnVtZXJpYyBpZGVudGlmaWVycyBhcyB0aGUgc2FtZS4gU29cbiAgICAgKiBgbWFwLmdldE92ZXJsYXlCeUlkKDIpYCB3aWxsIHJldHVybiBhbiBvdmVybGF5IHdpdGggaWQgYCcyJ2Agb3IgYDJgLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gaWQgT3ZlcmxheSBpZGVudGlmaWVyLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fSBPdmVybGF5LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBvdmVybGF5ID0gdGhpcy5vdmVybGF5SWRJbmRleF9baWQudG9TdHJpbmcoKV07XG4gICAgICAgIHJldHVybiBvdmVybGF5ICE9PSB1bmRlZmluZWQgPyBvdmVybGF5IDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbWFwIGludGVyYWN0aW9ucy4gTW9kaWZ5aW5nIHRoaXMgY29sbGVjdGlvbiBjaGFuZ2VzIHRoZSBpbnRlcmFjdGlvbnNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIG1hcC5cbiAgICAgKlxuICAgICAqIEludGVyYWN0aW9ucyBhcmUgdXNlZCBmb3IgZS5nLiBwYW4sIHpvb20gYW5kIHJvdGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtDb2xsZWN0aW9uPGltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdD59IEludGVyYWN0aW9ucy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRJbnRlcmFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVyYWN0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbGF5ZXJncm91cCBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7TGF5ZXJHcm91cH0gQSBsYXllciBncm91cCBjb250YWluaW5nIHRoZSBsYXllcnMgaW4gdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMYXllckdyb3VwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtMYXllckdyb3VwfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuTEFZRVJHUk9VUCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjb2xsZWN0aW9uIG9mIGxheWVycyBhc3NvY2lhdGVkIHdpdGggdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7IUNvbGxlY3Rpb248aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHQ+fSBMYXllcnMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0TGF5ZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHJldHVybiBsYXllcnM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBMYXllcnMgaGF2ZSBzb3VyY2VzIHRoYXQgYXJlIHN0aWxsIGxvYWRpbmcuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSBsYXllclN0YXRlc0FycmF5W2ldLmxheWVyO1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9sYXllci9MYXllci5qc1wiKS5kZWZhdWx0fSAqLyAobGF5ZXIpLmdldFNvdXJjZSgpO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAmJiBzb3VyY2UubG9hZGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSB1c2VyXG4gICAgICogcHJvamVjdGlvbiBhbmQgcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyBwaXhlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIEEgbWFwIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9waXhlbC5qc1wiKS5QaXhlbH0gQSBwaXhlbCBwb3NpdGlvbiBpbiB0aGUgbWFwIHZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFBpeGVsRnJvbUNvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSkge1xuICAgICAgICB2YXIgdmlld0Nvb3JkaW5hdGUgPSBmcm9tVXNlckNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgdGhpcy5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UGl4ZWxGcm9tQ29vcmRpbmF0ZUludGVybmFsKHZpZXdDb29yZGluYXRlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGl4ZWwgZm9yIGEgY29vcmRpbmF0ZS4gIFRoaXMgdGFrZXMgYSBjb29yZGluYXRlIGluIHRoZSBtYXAgdmlld1xuICAgICAqIHByb2plY3Rpb24gYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcGl4ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBBIG1hcCBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vcGl4ZWwuanNcIikuUGl4ZWx9IEEgcGl4ZWwgcG9zaXRpb24gaW4gdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFBpeGVsRnJvbUNvb3JkaW5hdGVJbnRlcm5hbCA9IGZ1bmN0aW9uIChjb29yZGluYXRlKSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBseVRyYW5zZm9ybShmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCBjb29yZGluYXRlLnNsaWNlKDAsIDIpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBtYXAgcmVuZGVyZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9yZW5kZXJlci9NYXAuanNcIikuZGVmYXVsdH0gUmVuZGVyZXJcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlcl87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHNpemUgb2YgdGhpcyBtYXAuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBUaGUgc2l6ZSBpbiBwaXhlbHMgb2YgdGhlIG1hcCBpbiB0aGUgRE9NLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuU0laRSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2aWV3IGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcC4gQSB2aWV3IG1hbmFnZXMgcHJvcGVydGllcyBzdWNoIGFzXG4gICAgICogY2VudGVyIGFuZCByZXNvbHV0aW9uLlxuICAgICAqIEByZXR1cm4ge1ZpZXd9IFRoZSB2aWV3IHRoYXQgY29udHJvbHMgdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtWaWV3fSAqLyAodGhpcy5nZXQoTWFwUHJvcGVydHkuVklFVykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIHRoZSBtYXAgdmlld3BvcnQuXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9IFZpZXdwb3J0LlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldFZpZXdwb3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGVsZW1lbnQgdGhhdCBzZXJ2ZXMgYXMgdGhlIGNvbnRhaW5lciBmb3Igb3ZlcmxheXMuICBFbGVtZW50cyBhZGRlZCB0b1xuICAgICAqIHRoaXMgY29udGFpbmVyIHdpbGwgbGV0IG1vdXNlZG93biBhbmQgdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLFxuICAgICAqIHNvIGNsaWNrcyBhbmQgZ2VzdHVyZXMgb24gYW4gb3ZlcmxheSB3aWxsIHRyaWdnZXIge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fVxuICAgICAqIGV2ZW50cy5cbiAgICAgKiBAcmV0dXJuIHshSFRNTEVsZW1lbnR9IFRoZSBtYXAncyBvdmVybGF5IGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE92ZXJsYXlDb250YWluZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXJfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBlbGVtZW50IHRoYXQgc2VydmVzIGFzIGEgY29udGFpbmVyIGZvciBvdmVybGF5cyB0aGF0IGRvbid0IGFsbG93XG4gICAgICogZXZlbnQgcHJvcGFnYXRpb24uIEVsZW1lbnRzIGFkZGVkIHRvIHRoaXMgY29udGFpbmVyIHdvbid0IGxldCBtb3VzZWRvd24gYW5kXG4gICAgICogdG91Y2hzdGFydCBldmVudHMgdGhyb3VnaCB0byB0aGUgbWFwLCBzbyBjbGlja3MgYW5kIGdlc3R1cmVzIG9uIGFuIG92ZXJsYXlcbiAgICAgKiBkb24ndCB0cmlnZ2VyIGFueSB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH5NYXBCcm93c2VyRXZlbnR9LlxuICAgICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH0gVGhlIG1hcCdzIG92ZXJsYXkgY29udGFpbmVyIHRoYXQgc3RvcHMgZXZlbnRzLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuZ2V0T3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheUNvbnRhaW5lclN0b3BFdmVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHshRG9jdW1lbnR9IFRoZSBkb2N1bWVudCB3aGVyZSB0aGUgbWFwIGlzIGRpc3BsYXllZC5cbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmdldE93bmVyRG9jdW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID0gdGhpcy5nZXRUYXJnZXRFbGVtZW50KCk7XG4gICAgICAgIHJldHVybiB0YXJnZXRFbGVtZW50ID8gdGFyZ2V0RWxlbWVudC5vd25lckRvY3VtZW50IDogZG9jdW1lbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5kZWZhdWx0fSB0aWxlIFRpbGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRpbGVTb3VyY2VLZXkgVGlsZSBzb3VyY2Uga2V5LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRpbGVDZW50ZXIgVGlsZSBjZW50ZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVSZXNvbHV0aW9uIFRpbGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRpbGUgcHJpb3JpdHkuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5nZXRUaWxlUHJpb3JpdHkgPSBmdW5jdGlvbiAodGlsZSwgdGlsZVNvdXJjZUtleSwgdGlsZUNlbnRlciwgdGlsZVJlc29sdXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGdldFRpbGVQcmlvcml0eSh0aGlzLmZyYW1lU3RhdGVfLCB0aWxlLCB0aWxlU291cmNlS2V5LCB0aWxlQ2VudGVyLCB0aWxlUmVzb2x1dGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge1VJRXZlbnR9IGJyb3dzZXJFdmVudCBCcm93c2VyIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0X3R5cGVdIFR5cGUuXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5oYW5kbGVCcm93c2VyRXZlbnQgPSBmdW5jdGlvbiAoYnJvd3NlckV2ZW50LCBvcHRfdHlwZSkge1xuICAgICAgICB2YXIgdHlwZSA9IG9wdF90eXBlIHx8IGJyb3dzZXJFdmVudC50eXBlO1xuICAgICAgICB2YXIgbWFwQnJvd3NlckV2ZW50ID0gbmV3IE1hcEJyb3dzZXJFdmVudCh0eXBlLCB0aGlzLCBicm93c2VyRXZlbnQpO1xuICAgICAgICB0aGlzLmhhbmRsZU1hcEJyb3dzZXJFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNYXBCcm93c2VyRXZlbnR9IG1hcEJyb3dzZXJFdmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlTWFwQnJvd3NlckV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMuZnJhbWVTdGF0ZV8pIHtcbiAgICAgICAgICAgIC8vIFdpdGggbm8gdmlldyBkZWZpbmVkLCB3ZSBjYW5ub3QgdHJhbnNsYXRlIHBpeGVscyBpbnRvIGdlb2dyYXBoaWNhbFxuICAgICAgICAgICAgLy8gY29vcmRpbmF0ZXMgc28gaW50ZXJhY3Rpb25zIGNhbm5vdCBiZSB1c2VkLlxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtQb2ludGVyRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHZhciBldmVudFR5cGUgPSBvcmlnaW5hbEV2ZW50LnR5cGU7XG4gICAgICAgIGlmIChldmVudFR5cGUgPT09IFBvaW50ZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICAgICAgICAgIGV2ZW50VHlwZSA9PT0gRXZlbnRUeXBlLldIRUVMIHx8XG4gICAgICAgICAgICBldmVudFR5cGUgPT09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0gdGhpcy5nZXRPd25lckRvY3VtZW50KCk7XG4gICAgICAgICAgICB2YXIgcm9vdE5vZGUgPSB0aGlzLnZpZXdwb3J0Xy5nZXRSb290Tm9kZVxuICAgICAgICAgICAgICAgID8gdGhpcy52aWV3cG9ydF8uZ2V0Um9vdE5vZGUoKVxuICAgICAgICAgICAgICAgIDogZG9jO1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IC8qKiBAdHlwZSB7Tm9kZX0gKi8gKG9yaWdpbmFsRXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIEFib3J0IGlmIHRoZSB0YXJnZXQgaXMgYSBjaGlsZCBvZiB0aGUgY29udGFpbmVyIGZvciBlbGVtZW50cyB3aG9zZSBldmVudHMgYXJlIG5vdCBtZWFudFxuICAgICAgICAgICAgLy8gdG8gYmUgaGFuZGxlZCBieSBtYXAgaW50ZXJhY3Rpb25zLlxuICAgICAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyU3RvcEV2ZW50Xy5jb250YWlucyh0YXJnZXQpIHx8XG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhlIGV2ZW50IHRhcmdldCBpcyBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIgdGhhdCBpcyBubyBsb25nZXIgaW4gdGhlIHBhZ2UuXG4gICAgICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSBmb3IgdGhlIHRhcmdldCB0byBubyBsb25nZXIgYmUgaW4gdGhlIHBhZ2UgaWYgaXQgaGFzIGJlZW4gcmVtb3ZlZCBpbiBhblxuICAgICAgICAgICAgICAgIC8vIGV2ZW50IGxpc3RlbmVyLCB0aGlzIG1pZ2h0IGhhcHBlbiBpbiBhIENvbnRyb2wgdGhhdCByZWNyZWF0ZXMgaXQncyBjb250ZW50IGJhc2VkIG9uXG4gICAgICAgICAgICAgICAgLy8gdXNlciBpbnRlcmFjdGlvbiBlaXRoZXIgbWFudWFsbHkgb3IgdmlhIGEgcmVuZGVyIGluIHNvbWV0aGluZyBsaWtlIGh0dHBzOi8vcmVhY3Rqcy5vcmcvXG4gICAgICAgICAgICAgICAgIShyb290Tm9kZSA9PT0gZG9jID8gZG9jLmRvY3VtZW50RWxlbWVudCA6IHJvb3ROb2RlKS5jb250YWlucyh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1hcEJyb3dzZXJFdmVudC5mcmFtZVN0YXRlID0gdGhpcy5mcmFtZVN0YXRlXztcbiAgICAgICAgaWYgKHRoaXMuZGlzcGF0Y2hFdmVudChtYXBCcm93c2VyRXZlbnQpICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgdmFyIGludGVyYWN0aW9uc0FycmF5ID0gdGhpcy5nZXRJbnRlcmFjdGlvbnMoKS5nZXRBcnJheSgpLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gaW50ZXJhY3Rpb25zQXJyYXkubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbnNBcnJheVtpXTtcbiAgICAgICAgICAgICAgICBpZiAoaW50ZXJhY3Rpb24uZ2V0TWFwKCkgIT09IHRoaXMgfHxcbiAgICAgICAgICAgICAgICAgICAgIWludGVyYWN0aW9uLmdldEFjdGl2ZSgpIHx8XG4gICAgICAgICAgICAgICAgICAgICF0aGlzLmdldFRhcmdldEVsZW1lbnQoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvbnQgPSBpbnRlcmFjdGlvbi5oYW5kbGVFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIGlmICghY29udCB8fCBtYXBCcm93c2VyRXZlbnQucHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlUG9zdFJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICAvLyBNYW5hZ2UgdGhlIHRpbGUgcXVldWVcbiAgICAgICAgLy8gSW1hZ2UgbG9hZHMgYXJlIGV4cGVuc2l2ZSBhbmQgYSBsaW1pdGVkIHJlc291cmNlLCBzbyB0cnkgdG8gdXNlIHRoZW1cbiAgICAgICAgLy8gZWZmaWNpZW50bHk6XG4gICAgICAgIC8vICogV2hlbiB0aGUgdmlldyBpcyBzdGF0aWMgd2UgYWxsb3cgYSBsYXJnZSBudW1iZXIgb2YgcGFyYWxsZWwgdGlsZSBsb2Fkc1xuICAgICAgICAvLyAgIHRvIGNvbXBsZXRlIHRoZSBmcmFtZSBhcyBxdWlja2x5IGFzIHBvc3NpYmxlLlxuICAgICAgICAvLyAqIFdoZW4gYW5pbWF0aW5nIG9yIGludGVyYWN0aW5nLCBpbWFnZSBsb2FkcyBjYW4gY2F1c2UgamFua3MsIHNvIHdlIHJlZHVjZVxuICAgICAgICAvLyAgIHRoZSBtYXhpbXVtIG51bWJlciBvZiBsb2FkcyBwZXIgZnJhbWUgYW5kIGxpbWl0IHRoZSBudW1iZXIgb2YgcGFyYWxsZWxcbiAgICAgICAgLy8gICB0aWxlIGxvYWRzIHRvIHJlbWFpbiByZWFjdGl2ZSB0byB2aWV3IGNoYW5nZXMgYW5kIHRvIHJlZHVjZSB0aGUgY2hhbmNlIG9mXG4gICAgICAgIC8vICAgbG9hZGluZyB0aWxlcyB0aGF0IHdpbGwgcXVpY2tseSBkaXNhcHBlYXIgZnJvbSB2aWV3LlxuICAgICAgICB2YXIgdGlsZVF1ZXVlID0gdGhpcy50aWxlUXVldWVfO1xuICAgICAgICBpZiAoIXRpbGVRdWV1ZS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHZhciBtYXhUb3RhbExvYWRpbmcgPSB0aGlzLm1heFRpbGVzTG9hZGluZ187XG4gICAgICAgICAgICB2YXIgbWF4TmV3TG9hZHMgPSBtYXhUb3RhbExvYWRpbmc7XG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBoaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xuICAgICAgICAgICAgICAgIGlmIChoaW50c1tWaWV3SGludC5BTklNQVRJTkddIHx8IGhpbnRzW1ZpZXdIaW50LklOVEVSQUNUSU5HXSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbG93T25GcmFtZUJ1ZGdldCA9IERhdGUubm93KCkgLSBmcmFtZVN0YXRlLnRpbWUgPiA4O1xuICAgICAgICAgICAgICAgICAgICBtYXhUb3RhbExvYWRpbmcgPSBsb3dPbkZyYW1lQnVkZ2V0ID8gMCA6IDg7XG4gICAgICAgICAgICAgICAgICAgIG1heE5ld0xvYWRzID0gbG93T25GcmFtZUJ1ZGdldCA/IDAgOiAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aWxlUXVldWUuZ2V0VGlsZXNMb2FkaW5nKCkgPCBtYXhUb3RhbExvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aWxlUXVldWUucmVwcmlvcml0aXplKCk7IC8vIEZJWE1FIG9ubHkgY2FsbCBpZiB2aWV3IGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgdGlsZVF1ZXVlLmxvYWRNb3JlVGlsZXMobWF4VG90YWxMb2FkaW5nLCBtYXhOZXdMb2Fkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyYW1lU3RhdGUgJiZcbiAgICAgICAgICAgIHRoaXMuaGFzTGlzdGVuZXIoUmVuZGVyRXZlbnRUeXBlLlJFTkRFUkNPTVBMRVRFKSAmJlxuICAgICAgICAgICAgIWZyYW1lU3RhdGUuYW5pbWF0ZSAmJlxuICAgICAgICAgICAgIXRoaXMudGlsZVF1ZXVlXy5nZXRUaWxlc0xvYWRpbmcoKSAmJlxuICAgICAgICAgICAgIXRoaXMuZ2V0TG9hZGluZygpKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyXy5kaXNwYXRjaFJlbmRlckV2ZW50KFJlbmRlckV2ZW50VHlwZS5SRU5ERVJDT01QTEVURSwgZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBvc3RSZW5kZXJGdW5jdGlvbnMgPSB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSBwb3N0UmVuZGVyRnVuY3Rpb25zLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnNbaV0odGhpcywgZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcG9zdFJlbmRlckZ1bmN0aW9ucy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLmhhbmRsZVNpemVDaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ2V0VmlldygpICYmICF0aGlzLmdldFZpZXcoKS5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgdGhpcy5nZXRWaWV3KCkucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVGFyZ2V0Q2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHRhcmdldCBtYXkgYmUgdW5kZWZpbmVkLCBudWxsLCBhIHN0cmluZyBvciBhbiBFbGVtZW50LlxuICAgICAgICAvLyBJZiBpdCdzIGEgc3RyaW5nIHdlIGNvbnZlcnQgaXQgdG8gYW4gRWxlbWVudCBiZWZvcmUgcHJvY2VlZGluZy5cbiAgICAgICAgLy8gSWYgaXQncyBub3Qgbm93IGFuIEVsZW1lbnQgd2UgcmVtb3ZlIHRoZSB2aWV3cG9ydCBmcm9tIHRoZSBET00uXG4gICAgICAgIC8vIElmIGl0J3MgYW4gRWxlbWVudCB3ZSBhcHBlbmQgdGhlIHZpZXdwb3J0IGVsZW1lbnQgdG8gaXQuXG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50O1xuICAgICAgICBpZiAodGhpcy5nZXRUYXJnZXQoKSkge1xuICAgICAgICAgICAgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmtleUhhbmRsZXJLZXlzXy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgdW5saXN0ZW5CeUtleSh0aGlzLmtleUhhbmRsZXJLZXlzX1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmtleUhhbmRsZXJLZXlzXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnZpZXdwb3J0Xy5yZW1vdmVFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DT05URVhUTUVOVSwgdGhpcy5ib3VuZEhhbmRsZUJyb3dzZXJFdmVudF8pO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuV0hFRUwsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhhbmRsZVJlc2l6ZV8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlJFU0laRSwgdGhpcy5oYW5kbGVSZXNpemVfLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXNpemVfID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXy5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfID0gbnVsbDtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGFyZ2V0RWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyZXJfKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucG9zdFJlbmRlclRpbWVvdXRIYW5kbGVfKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xykge1xuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy52aWV3cG9ydF8pO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVyXykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXJfID0gdGhpcy5jcmVhdGVSZW5kZXJlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXBCcm93c2VyRXZlbnRIYW5kbGVyXyA9IG5ldyBNYXBCcm93c2VyRXZlbnRIYW5kbGVyKHRoaXMsIHRoaXMubW92ZVRvbGVyYW5jZV8pO1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIE1hcEJyb3dzZXJFdmVudFR5cGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcEJyb3dzZXJFdmVudEhhbmRsZXJfLmFkZEV2ZW50TGlzdGVuZXIoTWFwQnJvd3NlckV2ZW50VHlwZVtrZXldLCB0aGlzLmhhbmRsZU1hcEJyb3dzZXJFdmVudC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudmlld3BvcnRfLmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNPTlRFWFRNRU5VLCB0aGlzLmJvdW5kSGFuZGxlQnJvd3NlckV2ZW50XywgZmFsc2UpO1xuICAgICAgICAgICAgdGhpcy52aWV3cG9ydF8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuV0hFRUwsIHRoaXMuYm91bmRIYW5kbGVCcm93c2VyRXZlbnRfLCBQQVNTSVZFX0VWRU5UX0xJU1RFTkVSUyA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlKTtcbiAgICAgICAgICAgIHZhciBrZXlib2FyZEV2ZW50VGFyZ2V0ID0gIXRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF9cbiAgICAgICAgICAgICAgICA/IHRhcmdldEVsZW1lbnRcbiAgICAgICAgICAgICAgICA6IHRoaXMua2V5Ym9hcmRFdmVudFRhcmdldF87XG4gICAgICAgICAgICB0aGlzLmtleUhhbmRsZXJLZXlzXyA9IFtcbiAgICAgICAgICAgICAgICBsaXN0ZW4oa2V5Ym9hcmRFdmVudFRhcmdldCwgRXZlbnRUeXBlLktFWURPV04sIHRoaXMuaGFuZGxlQnJvd3NlckV2ZW50LCB0aGlzKSxcbiAgICAgICAgICAgICAgICBsaXN0ZW4oa2V5Ym9hcmRFdmVudFRhcmdldCwgRXZlbnRUeXBlLktFWVBSRVNTLCB0aGlzLmhhbmRsZUJyb3dzZXJFdmVudCwgdGhpcyksXG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmhhbmRsZVJlc2l6ZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVJlc2l6ZV8gPSB0aGlzLnVwZGF0ZVNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUkVTSVpFLCB0aGlzLmhhbmRsZVJlc2l6ZV8sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICAgICAgLy8gdXBkYXRlU2l6ZSBjYWxscyBzZXRTaXplLCBzbyBubyBuZWVkIHRvIGNhbGwgdGhpcy5yZW5kZXJcbiAgICAgICAgLy8gb3Vyc2VsdmVzIGhlcmUuXG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVmlld1Byb3BlcnR5Q2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlVmlld0NoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8pO1xuICAgICAgICAgICAgdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZpZXdDaGFuZ2VMaXN0ZW5lcktleV8pIHtcbiAgICAgICAgICAgIHVubGlzdGVuQnlLZXkodGhpcy52aWV3Q2hhbmdlTGlzdGVuZXJLZXlfKTtcbiAgICAgICAgICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRTaXplXygpO1xuICAgICAgICAgICAgdGhpcy52aWV3UHJvcGVydHlMaXN0ZW5lcktleV8gPSBsaXN0ZW4odmlldywgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudmlld0NoYW5nZUxpc3RlbmVyS2V5XyA9IGxpc3Rlbih2aWV3LCBFdmVudFR5cGUuQ0hBTkdFLCB0aGlzLmhhbmRsZVZpZXdQcm9wZXJ0eUNoYW5nZWRfLCB0aGlzKTtcbiAgICAgICAgICAgIHZpZXcucmVzb2x2ZUNvbnN0cmFpbnRzKDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaGFuZGxlTGF5ZXJHcm91cENoYW5nZWRfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5sYXllckdyb3VwUHJvcGVydHlMaXN0ZW5lcktleXNfKSB7XG4gICAgICAgICAgICB0aGlzLmxheWVyR3JvdXBQcm9wZXJ0eUxpc3RlbmVyS2V5c18uZm9yRWFjaCh1bmxpc3RlbkJ5S2V5KTtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxheWVyR3JvdXAgPSB0aGlzLmdldExheWVyR3JvdXAoKTtcbiAgICAgICAgaWYgKGxheWVyR3JvdXApIHtcbiAgICAgICAgICAgIHRoaXMubGF5ZXJHcm91cFByb3BlcnR5TGlzdGVuZXJLZXlzXyA9IFtcbiAgICAgICAgICAgICAgICBsaXN0ZW4obGF5ZXJHcm91cCwgT2JqZWN0RXZlbnRUeXBlLlBST1BFUlRZQ0hBTkdFLCB0aGlzLnJlbmRlciwgdGhpcyksXG4gICAgICAgICAgICAgICAgbGlzdGVuKGxheWVyR3JvdXAsIEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMucmVuZGVyLCB0aGlzKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElzIHJlbmRlcmVkLlxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuaXNSZW5kZXJlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5mcmFtZVN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlcXVlc3RzIGFuIGltbWVkaWF0ZSByZW5kZXIgaW4gYSBzeW5jaHJvbm91cyBtYW5uZXIuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyU3luYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRGVsYXlLZXlfKSB7XG4gICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5S2V5Xyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbmltYXRpb25EZWxheV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlZHJhd3MgYWxsIHRleHQgYWZ0ZXIgbmV3IGZvbnRzIGhhdmUgbG9hZGVkXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZWRyYXdUZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IGxheWVyU3RhdGVzW2ldLmxheWVyO1xuICAgICAgICAgICAgaWYgKGxheWVyLmhhc1JlbmRlcmVyKCkpIHtcbiAgICAgICAgICAgICAgICBsYXllci5nZXRSZW5kZXJlcigpLmhhbmRsZUZvbnRzQ2hhbmdlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXF1ZXN0IGEgbWFwIHJlbmRlcmluZyAoYXQgdGhlIG5leHQgYW5pbWF0aW9uIGZyYW1lKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVyXyAmJiB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbkRlbGF5S2V5XyA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkRlbGF5Xyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY29udHJvbCBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0fSBjb250cm9sIENvbnRyb2wuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9jb250cm9sL0NvbnRyb2wuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGNvbnRyb2wgKG9yIHVuZGVmaW5lZFxuICAgICAqICAgICBpZiB0aGUgY29udHJvbCB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVDb250cm9sID0gZnVuY3Rpb24gKGNvbnRyb2wpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29udHJvbHMoKS5yZW1vdmUoY29udHJvbCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGdpdmVuIGludGVyYWN0aW9uIGZyb20gdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdH0gaW50ZXJhY3Rpb24gSW50ZXJhY3Rpb24gdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSByZW1vdmVkIGludGVyYWN0aW9uIChvclxuICAgICAqICAgICB1bmRlZmluZWQgaWYgdGhlIGludGVyYWN0aW9uIHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZUludGVyYWN0aW9uID0gZnVuY3Rpb24gKGludGVyYWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEludGVyYWN0aW9ucygpLnJlbW92ZShpbnRlcmFjdGlvbik7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBsYXllciBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL2xheWVyL0Jhc2UuanNcIikuZGVmYXVsdH0gbGF5ZXIgTGF5ZXIuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9sYXllci9CYXNlLmpzXCIpLmRlZmF1bHR8dW5kZWZpbmVkfSBUaGUgcmVtb3ZlZCBsYXllciAob3IgdW5kZWZpbmVkIGlmIHRoZVxuICAgICAqICAgICBsYXllciB3YXMgbm90IGZvdW5kKS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW1vdmVMYXllciA9IGZ1bmN0aW9uIChsYXllcikge1xuICAgICAgICB2YXIgbGF5ZXJzID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJzKCk7XG4gICAgICAgIHJldHVybiBsYXllcnMucmVtb3ZlKGxheWVyKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gb3ZlcmxheSBmcm9tIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL092ZXJsYXkuanNcIikuZGVmYXVsdH0gb3ZlcmxheSBPdmVybGF5LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vT3ZlcmxheS5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHJlbW92ZWQgb3ZlcmxheSAob3IgdW5kZWZpbmVkXG4gICAgICogICAgIGlmIHRoZSBvdmVybGF5IHdhcyBub3QgZm91bmQpLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbW92ZU92ZXJsYXkgPSBmdW5jdGlvbiAob3ZlcmxheSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRPdmVybGF5cygpLnJlbW92ZShvdmVybGF5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIFRpbWUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBQbHVnZ2FibGVNYXAucHJvdG90eXBlLnJlbmRlckZyYW1lXyA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7XG4gICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XG4gICAgICAgIHZhciBwcmV2aW91c0ZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xuICAgICAgICAvKiogQHR5cGUgez9GcmFtZVN0YXRlfSAqL1xuICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IG51bGw7XG4gICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQgJiYgaGFzQXJlYShzaXplKSAmJiB2aWV3ICYmIHZpZXcuaXNEZWYoKSkge1xuICAgICAgICAgICAgdmFyIHZpZXdIaW50cyA9IHZpZXcuZ2V0SGludHModGhpcy5mcmFtZVN0YXRlXyA/IHRoaXMuZnJhbWVTdGF0ZV8udmlld0hpbnRzIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIHZhciB2aWV3U3RhdGUgPSB2aWV3LmdldFN0YXRlKCk7XG4gICAgICAgICAgICBmcmFtZVN0YXRlID0ge1xuICAgICAgICAgICAgICAgIGFuaW1hdGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtOiB0aGlzLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyxcbiAgICAgICAgICAgICAgICBkZWNsdXR0ZXJUcmVlOiBudWxsLFxuICAgICAgICAgICAgICAgIGV4dGVudDogZ2V0Rm9yVmlld0FuZFNpemUodmlld1N0YXRlLmNlbnRlciwgdmlld1N0YXRlLnJlc29sdXRpb24sIHZpZXdTdGF0ZS5yb3RhdGlvbiwgc2l6ZSksXG4gICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZnJhbWVJbmRleF8rKyxcbiAgICAgICAgICAgICAgICBsYXllckluZGV4OiAwLFxuICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzQXJyYXk6IHRoaXMuZ2V0TGF5ZXJHcm91cCgpLmdldExheWVyU3RhdGVzQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBwaXhlbFJhdGlvOiB0aGlzLnBpeGVsUmF0aW9fLFxuICAgICAgICAgICAgICAgIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtOiB0aGlzLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyxcbiAgICAgICAgICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zOiBbXSxcbiAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgICAgIHRpbGVRdWV1ZTogdGhpcy50aWxlUXVldWVfLFxuICAgICAgICAgICAgICAgIHRpbWU6IHRpbWUsXG4gICAgICAgICAgICAgICAgdXNlZFRpbGVzOiB7fSxcbiAgICAgICAgICAgICAgICB2aWV3U3RhdGU6IHZpZXdTdGF0ZSxcbiAgICAgICAgICAgICAgICB2aWV3SGludHM6IHZpZXdIaW50cyxcbiAgICAgICAgICAgICAgICB3YW50ZWRUaWxlczoge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJhbWVTdGF0ZV8gPSBmcmFtZVN0YXRlO1xuICAgICAgICB0aGlzLnJlbmRlcmVyXy5yZW5kZXJGcmFtZShmcmFtZVN0YXRlKTtcbiAgICAgICAgaWYgKGZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIGlmIChmcmFtZVN0YXRlLmFuaW1hdGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wb3N0UmVuZGVyRnVuY3Rpb25zXywgZnJhbWVTdGF0ZS5wb3N0UmVuZGVyRnVuY3Rpb25zKTtcbiAgICAgICAgICAgIGlmIChwcmV2aW91c0ZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbW92ZVN0YXJ0ID0gIXRoaXMucHJldmlvdXNFeHRlbnRfIHx8XG4gICAgICAgICAgICAgICAgICAgICghaXNFbXB0eSh0aGlzLnByZXZpb3VzRXh0ZW50XykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICFlcXVhbHMoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKSk7XG4gICAgICAgICAgICAgICAgaWYgKG1vdmVTdGFydCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IE1hcEV2ZW50KE1hcEV2ZW50VHlwZS5NT1ZFU1RBUlQsIHRoaXMsIHByZXZpb3VzRnJhbWVTdGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzRXh0ZW50XyA9IGNyZWF0ZU9yVXBkYXRlRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpZGxlID0gdGhpcy5wcmV2aW91c0V4dGVudF8gJiZcbiAgICAgICAgICAgICAgICAhZnJhbWVTdGF0ZS52aWV3SGludHNbVmlld0hpbnQuQU5JTUFUSU5HXSAmJlxuICAgICAgICAgICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1tWaWV3SGludC5JTlRFUkFDVElOR10gJiZcbiAgICAgICAgICAgICAgICAhZXF1YWxzKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50Xyk7XG4gICAgICAgICAgICBpZiAoaWRsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLk1PVkVFTkQsIHRoaXMsIGZyYW1lU3RhdGUpKTtcbiAgICAgICAgICAgICAgICBjbG9uZShmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgTWFwRXZlbnQoTWFwRXZlbnRUeXBlLlBPU1RSRU5ERVIsIHRoaXMsIGZyYW1lU3RhdGUpKTtcbiAgICAgICAgaWYgKCF0aGlzLnBvc3RSZW5kZXJUaW1lb3V0SGFuZGxlXykge1xuICAgICAgICAgICAgdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8gPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5wb3N0UmVuZGVyVGltZW91dEhhbmRsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlUG9zdFJlbmRlcigpO1xuICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGxheWVyZ3JvdXAgb2YgdGhpcyBtYXAuXG4gICAgICogQHBhcmFtIHtMYXllckdyb3VwfSBsYXllckdyb3VwIEEgbGF5ZXIgZ3JvdXAgY29udGFpbmluZyB0aGUgbGF5ZXJzIGluIHRoaXMgbWFwLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUuc2V0TGF5ZXJHcm91cCA9IGZ1bmN0aW9uIChsYXllckdyb3VwKSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LkxBWUVSR1JPVVAsIGxheWVyR3JvdXApO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBzaXplIG9mIHRoaXMgbWFwLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV8dW5kZWZpbmVkfSBzaXplIFRoZSBzaXplIGluIHBpeGVscyBvZiB0aGUgbWFwIGluIHRoZSBET00uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuU0laRSwgc2l6ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIHRhcmdldCBlbGVtZW50IHRvIHJlbmRlciB0aGlzIG1hcCBpbnRvLlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBUaGUgRWxlbWVudCBvciBpZCBvZiB0aGUgRWxlbWVudFxuICAgICAqICAgICB0aGF0IHRoZSBtYXAgaXMgcmVuZGVyZWQgaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuc2V0KE1hcFByb3BlcnR5LlRBUkdFVCwgdGFyZ2V0KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdmlldyBmb3IgdGhpcyBtYXAuXG4gICAgICogQHBhcmFtIHtWaWV3fSB2aWV3IFRoZSB2aWV3IHRoYXQgY29udHJvbHMgdGhpcyBtYXAuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5zZXRWaWV3ID0gZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgdGhpcy5zZXQoTWFwUHJvcGVydHkuVklFVywgdmlldyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGb3JjZSBhIHJlY2FsY3VsYXRpb24gb2YgdGhlIG1hcCB2aWV3cG9ydCBzaXplLiAgVGhpcyBzaG91bGQgYmUgY2FsbGVkIHdoZW5cbiAgICAgKiB0aGlyZC1wYXJ0eSBjb2RlIGNoYW5nZXMgdGhlIHNpemUgb2YgdGhlIG1hcCB2aWV3cG9ydC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS51cGRhdGVTaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IHRoaXMuZ2V0VGFyZ2V0RWxlbWVudCgpO1xuICAgICAgICB2YXIgc2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRhcmdldEVsZW1lbnQub2Zmc2V0V2lkdGggLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsnYm9yZGVyTGVmdFdpZHRoJ10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdMZWZ0J10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdSaWdodCddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJSaWdodFdpZHRoJ10pO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRhcmdldEVsZW1lbnQub2Zmc2V0SGVpZ2h0IC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ2JvcmRlclRvcFdpZHRoJ10pIC1cbiAgICAgICAgICAgICAgICBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGVbJ3BhZGRpbmdUb3AnXSkgLVxuICAgICAgICAgICAgICAgIHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZVsncGFkZGluZ0JvdHRvbSddKSAtXG4gICAgICAgICAgICAgICAgcGFyc2VGbG9hdChjb21wdXRlZFN0eWxlWydib3JkZXJCb3R0b21XaWR0aCddKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4od2lkdGgpICYmICFpc05hTihoZWlnaHQpKSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IFt3aWR0aCwgaGVpZ2h0XTtcbiAgICAgICAgICAgICAgICBpZiAoIWhhc0FyZWEoc2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk5vIG1hcCB2aXNpYmxlIGJlY2F1c2UgdGhlIG1hcCBjb250YWluZXIncyB3aWR0aCBvciBoZWlnaHQgYXJlIDAuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFNpemUoc2l6ZSk7XG4gICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnRTaXplXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVjb21wdXRlcyB0aGUgdmlld3BvcnQgc2l6ZSBhbmQgc2F2ZSBpdCBvbiB0aGUgdmlldyBvYmplY3QgKGlmIGFueSlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFBsdWdnYWJsZU1hcC5wcm90b3R5cGUudXBkYXRlVmlld3BvcnRTaXplXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcpIHtcbiAgICAgICAgICAgIHZhciBzaXplID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdmFyIGNvbXB1dGVkU3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMudmlld3BvcnRfKTtcbiAgICAgICAgICAgIGlmIChjb21wdXRlZFN0eWxlLndpZHRoICYmIGNvbXB1dGVkU3R5bGUuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc2l6ZSA9IFtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoY29tcHV0ZWRTdHlsZS53aWR0aCwgMTApLFxuICAgICAgICAgICAgICAgICAgICBwYXJzZUludChjb21wdXRlZFN0eWxlLmhlaWdodCwgMTApLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2aWV3LnNldFZpZXdwb3J0U2l6ZShzaXplKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBsdWdnYWJsZU1hcDtcbn0oQmFzZU9iamVjdCkpO1xuLyoqXG4gKiBAcGFyYW0ge01hcE9wdGlvbnN9IG9wdGlvbnMgTWFwIG9wdGlvbnMuXG4gKiBAcmV0dXJuIHtNYXBPcHRpb25zSW50ZXJuYWx9IEludGVybmFsIG1hcCBvcHRpb25zLlxuICovXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zSW50ZXJuYWwob3B0aW9ucykge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudHxEb2N1bWVudH1cbiAgICAgKi9cbiAgICB2YXIga2V5Ym9hcmRFdmVudFRhcmdldCA9IG51bGw7XG4gICAgaWYgKG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGtleWJvYXJkRXZlbnRUYXJnZXQgPVxuICAgICAgICAgICAgdHlwZW9mIG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldClcbiAgICAgICAgICAgICAgICA6IG9wdGlvbnMua2V5Ym9hcmRFdmVudFRhcmdldDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsICo+fVxuICAgICAqL1xuICAgIHZhciB2YWx1ZXMgPSB7fTtcbiAgICB2YXIgbGF5ZXJHcm91cCA9IG9wdGlvbnMubGF5ZXJzICYmXG4gICAgICAgIHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5sYXllcnMpLmdldExheWVycykgPT09ICdmdW5jdGlvbidcbiAgICAgICAgPyAvKiogQHR5cGUge0xheWVyR3JvdXB9ICovIChvcHRpb25zLmxheWVycylcbiAgICAgICAgOiBuZXcgTGF5ZXJHcm91cCh7IGxheWVyczogLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5sYXllcnMpIH0pO1xuICAgIHZhbHVlc1tNYXBQcm9wZXJ0eS5MQVlFUkdST1VQXSA9IGxheWVyR3JvdXA7XG4gICAgdmFsdWVzW01hcFByb3BlcnR5LlRBUkdFVF0gPSBvcHRpb25zLnRhcmdldDtcbiAgICB2YWx1ZXNbTWFwUHJvcGVydHkuVklFV10gPVxuICAgICAgICBvcHRpb25zLnZpZXcgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudmlldyA6IG5ldyBWaWV3KCk7XG4gICAgdmFyIGNvbnRyb2xzO1xuICAgIGlmIChvcHRpb25zLmNvbnRyb2xzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5jb250cm9scykpIHtcbiAgICAgICAgICAgIGNvbnRyb2xzID0gbmV3IENvbGxlY3Rpb24ob3B0aW9ucy5jb250cm9scy5zbGljZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGFzc2VydCh0eXBlb2YgKCAvKiogQHR5cGUgez99ICovKG9wdGlvbnMuY29udHJvbHMpLmdldEFycmF5KSA9PT0gJ2Z1bmN0aW9uJywgNDcpOyAvLyBFeHBlY3RlZCBgY29udHJvbHNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIGNvbnRyb2xzID0gLyoqIEB0eXBlIHtDb2xsZWN0aW9ufSAqLyAob3B0aW9ucy5jb250cm9scyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGludGVyYWN0aW9ucztcbiAgICBpZiAob3B0aW9ucy5pbnRlcmFjdGlvbnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmludGVyYWN0aW9ucykpIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKG9wdGlvbnMuaW50ZXJhY3Rpb25zLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5pbnRlcmFjdGlvbnMpLmdldEFycmF5KSA9PT1cbiAgICAgICAgICAgICAgICAnZnVuY3Rpb24nLCA0OCk7IC8vIEV4cGVjdGVkIGBpbnRlcmFjdGlvbnNgIHRvIGJlIGFuIGFycmF5IG9yIGFuIGBpbXBvcnQoXCIuL0NvbGxlY3Rpb24uanNcIikuQ29sbGVjdGlvbmBcbiAgICAgICAgICAgIGludGVyYWN0aW9ucyA9IC8qKiBAdHlwZSB7Q29sbGVjdGlvbn0gKi8gKG9wdGlvbnMuaW50ZXJhY3Rpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgb3ZlcmxheXM7XG4gICAgaWYgKG9wdGlvbnMub3ZlcmxheXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLm92ZXJsYXlzKSkge1xuICAgICAgICAgICAgb3ZlcmxheXMgPSBuZXcgQ29sbGVjdGlvbihvcHRpb25zLm92ZXJsYXlzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXNzZXJ0KHR5cGVvZiAoIC8qKiBAdHlwZSB7P30gKi8ob3B0aW9ucy5vdmVybGF5cykuZ2V0QXJyYXkpID09PSAnZnVuY3Rpb24nLCA0OSk7IC8vIEV4cGVjdGVkIGBvdmVybGF5c2AgdG8gYmUgYW4gYXJyYXkgb3IgYW4gYGltcG9ydChcIi4vQ29sbGVjdGlvbi5qc1wiKS5Db2xsZWN0aW9uYFxuICAgICAgICAgICAgb3ZlcmxheXMgPSBvcHRpb25zLm92ZXJsYXlzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBvdmVybGF5cyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRyb2xzOiBjb250cm9scyxcbiAgICAgICAgaW50ZXJhY3Rpb25zOiBpbnRlcmFjdGlvbnMsXG4gICAgICAgIGtleWJvYXJkRXZlbnRUYXJnZXQ6IGtleWJvYXJkRXZlbnRUYXJnZXQsXG4gICAgICAgIG92ZXJsYXlzOiBvdmVybGF5cyxcbiAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IFBsdWdnYWJsZU1hcDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVBsdWdnYWJsZU1hcC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQ29udHJvbFxuICovXG5pbXBvcnQgQmFzZU9iamVjdCBmcm9tICcuLi9PYmplY3QuanMnO1xuaW1wb3J0IE1hcEV2ZW50VHlwZSBmcm9tICcuLi9NYXBFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgVk9JRCB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBsaXN0ZW4sIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuLi9ldmVudHMuanMnO1xuaW1wb3J0IHsgcmVtb3ZlTm9kZSB9IGZyb20gJy4uL2RvbS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR9IFtlbGVtZW50XSBUaGUgZWxlbWVudCBpcyB0aGUgY29udHJvbCdzXG4gKiBjb250YWluZXIgZWxlbWVudC4gVGhpcyBvbmx5IG5lZWRzIHRvIGJlIHNwZWNpZmllZCBpZiB5b3UncmUgZGV2ZWxvcGluZ1xuICogYSBjdXN0b20gY29udHJvbC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW5cbiAqIHRoZSBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudFxuICogdGhlIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIGlzIGEgdmlzaWJsZSB3aWRnZXQgd2l0aCBhIERPTSBlbGVtZW50IGluIGEgZml4ZWQgcG9zaXRpb24gb24gdGhlXG4gKiBzY3JlZW4uIFRoZXkgY2FuIGludm9sdmUgdXNlciBpbnB1dCAoYnV0dG9ucyksIG9yIGJlIGluZm9ybWF0aW9uYWwgb25seTtcbiAqIHRoZSBwb3NpdGlvbiBpcyBkZXRlcm1pbmVkIHVzaW5nIENTUy4gQnkgZGVmYXVsdCB0aGVzZSBhcmUgcGxhY2VkIGluIHRoZVxuICogY29udGFpbmVyIHdpdGggQ1NTIGNsYXNzIG5hbWUgYG9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50YCwgYnV0IGNhbiB1c2VcbiAqIGFueSBvdXRzaWRlIERPTSBlbGVtZW50LlxuICpcbiAqIFRoaXMgaXMgdGhlIGJhc2UgY2xhc3MgZm9yIGNvbnRyb2xzLiBZb3UgY2FuIHVzZSBpdCBmb3Igc2ltcGxlIGN1c3RvbVxuICogY29udHJvbHMgYnkgY3JlYXRpbmcgdGhlIGVsZW1lbnQgd2l0aCBsaXN0ZW5lcnMsIGNyZWF0aW5nIGFuIGluc3RhbmNlOlxuICogYGBganNcbiAqIHZhciBteUNvbnRyb2wgPSBuZXcgQ29udHJvbCh7ZWxlbWVudDogbXlFbGVtZW50fSk7XG4gKiBgYGBcbiAqIGFuZCB0aGVuIGFkZGluZyB0aGlzIHRvIHRoZSBtYXAuXG4gKlxuICogVGhlIG1haW4gYWR2YW50YWdlIG9mIGhhdmluZyB0aGlzIGFzIGEgY29udHJvbCByYXRoZXIgdGhhbiBhIHNpbXBsZSBzZXBhcmF0ZVxuICogRE9NIGVsZW1lbnQgaXMgdGhhdCBwcmV2ZW50aW5nIHByb3BhZ2F0aW9uIGlzIGhhbmRsZWQgZm9yIHlvdS4gQ29udHJvbHNcbiAqIHdpbGwgYWxzbyBiZSBvYmplY3RzIGluIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufkNvbGxlY3Rpb259LCBzbyB5b3UgY2FuIHVzZSB0aGVpciBtZXRob2RzLlxuICpcbiAqIFlvdSBjYW4gYWxzbyBleHRlbmQgdGhpcyBiYXNlIGZvciB5b3VyIG93biBjb250cm9sIGNsYXNzLiBTZWVcbiAqIGV4YW1wbGVzL2N1c3RvbS1jb250cm9scyBmb3IgYW4gZXhhbXBsZSBvZiBob3cgdG8gZG8gdGhpcy5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBDb250cm9sID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb250cm9sLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBDb250cm9sIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29udHJvbChvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBlbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50O1xuICAgICAgICBpZiAoZWxlbWVudCAmJiAhb3B0aW9ucy50YXJnZXQgJiYgIWVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cykge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnQgPSBlbGVtZW50ID8gZWxlbWVudCA6IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1hcF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PGltcG9ydChcIi4uL2V2ZW50cy5qc1wiKS5FdmVudHNLZXk+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGlzdGVuZXJLZXlzID0gW107XG4gICAgICAgIGlmIChvcHRpb25zLnJlbmRlcikge1xuICAgICAgICAgICAgX3RoaXMucmVuZGVyID0gb3B0aW9ucy5yZW5kZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudGFyZ2V0KSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRUYXJnZXQob3B0aW9ucy50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYW4gdXAuXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVOb2RlKHRoaXMuZWxlbWVudCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBjb250cm9sLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBNYXAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLmdldE1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFwXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgY29udHJvbCBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgICAqIHRoZSBtYXAgaGVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBDb250cm9sLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHJlbW92ZU5vZGUodGhpcy5lbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgaWkgPSB0aGlzLmxpc3RlbmVyS2V5cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB1bmxpc3RlbkJ5S2V5KHRoaXMubGlzdGVuZXJLZXlzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLm1hcF8gPSBtYXA7XG4gICAgICAgIGlmICh0aGlzLm1hcF8pIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldF9cbiAgICAgICAgICAgICAgICA/IHRoaXMudGFyZ2V0X1xuICAgICAgICAgICAgICAgIDogbWFwLmdldE92ZXJsYXlDb250YWluZXJTdG9wRXZlbnQoKTtcbiAgICAgICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyICE9PSBWT0lEKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lcktleXMucHVzaChsaXN0ZW4obWFwLCBNYXBFdmVudFR5cGUuUE9TVFJFTkRFUiwgdGhpcy5yZW5kZXIsIHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hcC5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogUmVuZGVycyB0aGUgY29udHJvbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQ29udHJvbC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7IH07XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHNldCBhIHRhcmdldCBlbGVtZW50IGZvciB0aGUgY29udHJvbC4gSXQgaGFzIG5vXG4gICAgICogZWZmZWN0IGlmIGl0IGlzIGNhbGxlZCBhZnRlciB0aGUgY29udHJvbCBoYXMgYmVlbiBhZGRlZCB0byB0aGUgbWFwIChpLmUuXG4gICAgICogYWZ0ZXIgYHNldE1hcGAgaXMgY2FsbGVkIG9uIHRoZSBjb250cm9sKS4gSWYgbm8gYHRhcmdldGAgaXMgc2V0IGluIHRoZVxuICAgICAqIG9wdGlvbnMgcGFzc2VkIHRvIHRoZSBjb250cm9sIGNvbnN0cnVjdG9yIGFuZCBpZiBgc2V0VGFyZ2V0YCBpcyBub3QgY2FsbGVkXG4gICAgICogdGhlbiB0aGUgY29udHJvbCBpcyBhZGRlZCB0byB0aGUgbWFwJ3Mgb3ZlcmxheSBjb250YWluZXIuXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudHxzdHJpbmd9IHRhcmdldCBUYXJnZXQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIENvbnRyb2wucHJvdG90eXBlLnNldFRhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50YXJnZXRfID1cbiAgICAgICAgICAgIHR5cGVvZiB0YXJnZXQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0KSA6IHRhcmdldDtcbiAgICB9O1xuICAgIHJldHVybiBDb250cm9sO1xufShCYXNlT2JqZWN0KSk7XG5leHBvcnQgZGVmYXVsdCBDb250cm9sO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udHJvbC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvQXR0cmlidXRpb25cbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19DT0xMQVBTRUQsIENMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBlcXVhbHMgfSBmcm9tICcuLi9hcnJheS5qcyc7XG5pbXBvcnQgeyBpblZpZXcgfSBmcm9tICcuLi9sYXllci9MYXllci5qcyc7XG5pbXBvcnQgeyByZW1vdmVDaGlsZHJlbiwgcmVwbGFjZU5vZGUgfSBmcm9tICcuLi9kb20uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtYXR0cmlidXRpb24nXSBDU1MgY2xhc3MgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBbdGFyZ2V0XSBTcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdVxuICogd2FudCB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAnc1xuICogdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtjb2xsYXBzaWJsZV0gU3BlY2lmeSBpZiBhdHRyaWJ1dGlvbnMgY2FuXG4gKiBiZSBjb2xsYXBzZWQuIElmIG5vdCBzcGVjaWZpZWQsIHNvdXJjZXMgY29udHJvbCB0aGlzIGJlaGF2aW9yIHdpdGggdGhlaXJcbiAqIGBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZWAgc2V0dGluZy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbGxhcHNlZD10cnVlXSBTcGVjaWZ5IGlmIGF0dHJpYnV0aW9ucyBzaG91bGRcbiAqIGJlIGNvbGxhcHNlZCBhdCBzdGFydHVwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0aXBMYWJlbD0nQXR0cmlidXRpb25zJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtsYWJlbD0naSddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2V4cGFuZENsYXNzTmFtZT1jbGFzc05hbWUgKyAnLWV4cGFuZCddIENTUyBjbGFzcyBuYW1lIGZvciB0aGVcbiAqIGNvbGxhcHNlZCBhdHRyaWJ1dGlvbnMgYnV0dG9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtjb2xsYXBzZUxhYmVsPSfCuyddIFRleHQgbGFiZWwgdG8gdXNlXG4gKiBmb3IgdGhlIGV4cGFuZGVkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBJbnN0ZWFkIG9mIHRleHQsIGFsc28gYW4gZWxlbWVudCAoZS5nLiBhIGBzcGFuYCBlbGVtZW50KSBjYW4gYmUgdXNlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY29sbGFwc2VDbGFzc05hbWU9Y2xhc3NOYW1lICsgJy1jb2xsYXBzZSddIENTUyBjbGFzcyBuYW1lIGZvciB0aGVcbiAqIGV4cGFuZGVkIGF0dHJpYnV0aW9ucyBidXR0b24uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuXG4gKiB0aGUgY29udHJvbCBzaG91bGQgYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWBcbiAqIGNhbGxiYWNrLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIENvbnRyb2wgdG8gc2hvdyBhbGwgdGhlIGF0dHJpYnV0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGxheWVyIHNvdXJjZXNcbiAqIGluIHRoZSBtYXAuIFRoaXMgY29udHJvbCBpcyBvbmUgb2YgdGhlIGRlZmF1bHQgY29udHJvbHMgaW5jbHVkZWQgaW4gbWFwcy5cbiAqIEJ5IGRlZmF1bHQgaXQgd2lsbCBzaG93IGluIHRoZSBib3R0b20gcmlnaHQgcG9ydGlvbiBvZiB0aGUgbWFwLCBidXQgdGhpcyBjYW5cbiAqIGJlIGNoYW5nZWQgYnkgdXNpbmcgYSBjc3Mgc2VsZWN0b3IgZm9yIGAub2wtYXR0cmlidXRpb25gLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEF0dHJpYnV0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhBdHRyaWJ1dGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gQXR0cmlidXRpb24gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBdHRyaWJ1dGlvbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudWxFbGVtZW50XyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbGxhcHNlZF8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jb2xsYXBzZWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2VkIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXNlckNvbGxhcHNlZF8gPSBfdGhpcy5jb2xsYXBzZWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdmVycmlkZUNvbGxhcHNpYmxlXyA9IG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29sbGFwc2libGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29sbGFwc2libGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2libGUgOiB0cnVlO1xuICAgICAgICBpZiAoIV90aGlzLmNvbGxhcHNpYmxlXykge1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VkXyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSBvcHRpb25zLmNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5jbGFzc05hbWUgOiAnb2wtYXR0cmlidXRpb24nO1xuICAgICAgICB2YXIgdGlwTGFiZWwgPSBvcHRpb25zLnRpcExhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpcExhYmVsIDogJ0F0dHJpYnV0aW9ucyc7XG4gICAgICAgIHZhciBleHBhbmRDbGFzc05hbWUgPSBvcHRpb25zLmV4cGFuZENsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuZXhwYW5kQ2xhc3NOYW1lXG4gICAgICAgICAgICA6IGNsYXNzTmFtZSArICctZXhwYW5kJztcbiAgICAgICAgdmFyIGNvbGxhcHNlTGFiZWwgPSBvcHRpb25zLmNvbGxhcHNlTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGFwc2VMYWJlbCA6ICdcXHUwMEJCJztcbiAgICAgICAgdmFyIGNvbGxhcHNlQ2xhc3NOYW1lID0gb3B0aW9ucy5jb2xsYXBzZUNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuY29sbGFwc2VDbGFzc05hbWVcbiAgICAgICAgICAgIDogY2xhc3NOYW1lICsgJy1jb2xscGFzZSc7XG4gICAgICAgIGlmICh0eXBlb2YgY29sbGFwc2VMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VMYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXy50ZXh0Q29udGVudCA9IGNvbGxhcHNlTGFiZWw7XG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUxhYmVsXy5jbGFzc05hbWUgPSBjb2xsYXBzZUNsYXNzTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlTGFiZWxfID0gY29sbGFwc2VMYWJlbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGFiZWwgPSBvcHRpb25zLmxhYmVsICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxhYmVsIDogJ2knO1xuICAgICAgICBpZiAodHlwZW9mIGxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8udGV4dENvbnRlbnQgPSBsYWJlbDtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy5jbGFzc05hbWUgPSBleHBhbmRDbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8gPSBsYWJlbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWN0aXZlTGFiZWwgPSBfdGhpcy5jb2xsYXBzaWJsZV8gJiYgIV90aGlzLmNvbGxhcHNlZF8gPyBfdGhpcy5jb2xsYXBzZUxhYmVsXyA6IF90aGlzLmxhYmVsXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnYnV0dG9uJyk7XG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgU3RyaW5nKCFfdGhpcy5jb2xsYXBzZWRfKSk7XG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8udGl0bGUgPSB0aXBMYWJlbDtcbiAgICAgICAgX3RoaXMudG9nZ2xlQnV0dG9uXy5hcHBlbmRDaGlsZChhY3RpdmVMYWJlbCk7XG4gICAgICAgIF90aGlzLnRvZ2dsZUJ1dHRvbl8uYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xJQ0ssIF90aGlzLmhhbmRsZUNsaWNrXy5iaW5kKF90aGlzKSwgZmFsc2UpO1xuICAgICAgICB2YXIgY3NzQ2xhc3NlcyA9IGNsYXNzTmFtZSArXG4gICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgQ0xBU1NfVU5TRUxFQ1RBQkxFICtcbiAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICBDTEFTU19DT05UUk9MICtcbiAgICAgICAgICAgIChfdGhpcy5jb2xsYXBzZWRfICYmIF90aGlzLmNvbGxhcHNpYmxlXyA/ICcgJyArIENMQVNTX0NPTExBUFNFRCA6ICcnKSArXG4gICAgICAgICAgICAoX3RoaXMuY29sbGFwc2libGVfID8gJycgOiAnIG9sLXVuY29sbGFwc2libGUnKTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50O1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMudG9nZ2xlQnV0dG9uXyk7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoX3RoaXMudWxFbGVtZW50Xyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgY3VycmVudGx5IHJlbmRlcmVkIHJlc29sdXRpb25zLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8c3RyaW5nPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJlZFZpc2libGVfID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb2xsZWN0IGEgbGlzdCBvZiB2aXNpYmxlIGF0dHJpYnV0aW9ucyBhbmQgc2V0IHRoZSBjb2xsYXBzaWJsZSBzdGF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5GcmFtZVN0YXRlfSBmcmFtZVN0YXRlIEZyYW1lIHN0YXRlLlxuICAgICAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IEF0dHJpYnV0aW9ucy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5jb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIHRvIGRldGVybWluZSBpZiBhbiBhdHRyaWJ1dGlvbiBhbHJlYWR5IGV4aXN0cy5cbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBsb29rdXAgPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB2aXNpYmxlIGF0dHJpYnV0aW9ucy5cbiAgICAgICAgICogQHR5cGUge0FycmF5PHN0cmluZz59XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdmlzaWJsZUF0dHJpYnV0aW9ucyA9IFtdO1xuICAgICAgICB2YXIgY29sbGFwc2libGUgPSB0cnVlO1xuICAgICAgICB2YXIgbGF5ZXJTdGF0ZXNBcnJheSA9IGZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGVzQXJyYXlbaV07XG4gICAgICAgICAgICBpZiAoIWluVmlldyhsYXllclN0YXRlLCBmcmFtZVN0YXRlLnZpZXdTdGF0ZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL2xheWVyL0xheWVyLmpzXCIpLmRlZmF1bHR9ICovIChsYXllclN0YXRlLmxheWVyKS5nZXRTb3VyY2UoKTtcbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRpb25HZXR0ZXIgPSBzb3VyY2UuZ2V0QXR0cmlidXRpb25zKCk7XG4gICAgICAgICAgICBpZiAoIWF0dHJpYnV0aW9uR2V0dGVyKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYXR0cmlidXRpb25zID0gYXR0cmlidXRpb25HZXR0ZXIoZnJhbWVTdGF0ZSk7XG4gICAgICAgICAgICBpZiAoIWF0dHJpYnV0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29sbGFwc2libGUgPVxuICAgICAgICAgICAgICAgIGNvbGxhcHNpYmxlICYmIHNvdXJjZS5nZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSgpICE9PSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGF0dHJpYnV0aW9ucykpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBhdHRyaWJ1dGlvbnMubGVuZ3RoOyBqIDwgamo7ICsraikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShhdHRyaWJ1dGlvbnNbal0gaW4gbG9va3VwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUF0dHJpYnV0aW9ucy5wdXNoKGF0dHJpYnV0aW9uc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb29rdXBbYXR0cmlidXRpb25zW2pdXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIShhdHRyaWJ1dGlvbnMgaW4gbG9va3VwKSkge1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlQXR0cmlidXRpb25zLnB1c2goYXR0cmlidXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgbG9va3VwW2F0dHJpYnV0aW9uc10gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMub3ZlcnJpZGVDb2xsYXBzaWJsZV8pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29sbGFwc2libGUoY29sbGFwc2libGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2aXNpYmxlQXR0cmlidXRpb25zO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0gez9pbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuRnJhbWVTdGF0ZX0gZnJhbWVTdGF0ZSBGcmFtZSBzdGF0ZS5cbiAgICAgKi9cbiAgICBBdHRyaWJ1dGlvbi5wcm90b3R5cGUudXBkYXRlRWxlbWVudF8gPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkVmlzaWJsZV8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZV8gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXR0cmlidXRpb25zID0gdGhpcy5jb2xsZWN0U291cmNlQXR0cmlidXRpb25zXyhmcmFtZVN0YXRlKTtcbiAgICAgICAgdmFyIHZpc2libGUgPSBhdHRyaWJ1dGlvbnMubGVuZ3RoID4gMDtcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlXyAhPSB2aXNpYmxlKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHZpc2libGUgPyAnJyA6ICdub25lJztcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlXyA9IHZpc2libGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVxdWFscyhhdHRyaWJ1dGlvbnMsIHRoaXMucmVuZGVyZWRBdHRyaWJ1dGlvbnNfKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMudWxFbGVtZW50Xyk7XG4gICAgICAgIC8vIGFwcGVuZCB0aGUgYXR0cmlidXRpb25zXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGF0dHJpYnV0aW9ucy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IGF0dHJpYnV0aW9uc1tpXTtcbiAgICAgICAgICAgIHRoaXMudWxFbGVtZW50Xy5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVkQXR0cmlidXRpb25zXyA9IGF0dHJpYnV0aW9ucztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgVGhlIGV2ZW50IHRvIGhhbmRsZVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmhhbmRsZUNsaWNrXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZV8oKTtcbiAgICAgICAgdGhpcy51c2VyQ29sbGFwc2VkXyA9IHRoaXMuY29sbGFwc2VkXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLmhhbmRsZVRvZ2dsZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKENMQVNTX0NPTExBUFNFRCk7XG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNlZF8pIHtcbiAgICAgICAgICAgIHJlcGxhY2VOb2RlKHRoaXMuY29sbGFwc2VMYWJlbF8sIHRoaXMubGFiZWxfKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlcGxhY2VOb2RlKHRoaXMubGFiZWxfLCB0aGlzLmNvbGxhcHNlTGFiZWxfKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxhcHNlZF8gPSAhdGhpcy5jb2xsYXBzZWRfO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbl8uc2V0QXR0cmlidXRlKCdhcmlhLWV4cGFuZGVkJywgU3RyaW5nKCF0aGlzLmNvbGxhcHNlZF8pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGF0dHJpYnV0aW9uIGlzIGNvbGxhcHNpYmxlLCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB3aWRnZXQgaXMgY29sbGFwc2libGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5nZXRDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2libGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHdoZXRoZXIgdGhlIGF0dHJpYnV0aW9uIHNob3VsZCBiZSBjb2xsYXBzaWJsZS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbGxhcHNpYmxlIFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzaWJsZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnNldENvbGxhcHNpYmxlID0gZnVuY3Rpb24gKGNvbGxhcHNpYmxlKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNpYmxlXyA9PT0gY29sbGFwc2libGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxhcHNpYmxlXyA9IGNvbGxhcHNpYmxlO1xuICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnb2wtdW5jb2xsYXBzaWJsZScpO1xuICAgICAgICBpZiAodGhpcy51c2VyQ29sbGFwc2VkXykge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGVfKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENvbGxhcHNlIG9yIGV4cGFuZCB0aGUgYXR0cmlidXRpb24gYWNjb3JkaW5nIHRvIHRoZSBwYXNzZWQgcGFyYW1ldGVyLiBXaWxsXG4gICAgICogbm90IGRvIGFueXRoaW5nIGlmIHRoZSBhdHRyaWJ1dGlvbiBpc24ndCBjb2xsYXBzaWJsZSBvciBpZiB0aGUgY3VycmVudFxuICAgICAqIGNvbGxhcHNlZCBzdGF0ZSBpcyBhbHJlYWR5IHRoZSBvbmUgcmVxdWVzdGVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29sbGFwc2VkIFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5zZXRDb2xsYXBzZWQgPSBmdW5jdGlvbiAoY29sbGFwc2VkKSB7XG4gICAgICAgIHRoaXMudXNlckNvbGxhcHNlZF8gPSBjb2xsYXBzZWQ7XG4gICAgICAgIGlmICghdGhpcy5jb2xsYXBzaWJsZV8gfHwgdGhpcy5jb2xsYXBzZWRfID09PSBjb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZV8oKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiBgdHJ1ZWAgd2hlbiB0aGUgYXR0cmlidXRpb24gaXMgY3VycmVudGx5IGNvbGxhcHNlZCBvciBgZmFsc2VgXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHdpZGdldCBpcyBjb2xsYXBzZWQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEF0dHJpYnV0aW9uLnByb3RvdHlwZS5nZXRDb2xsYXBzZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGF0dHJpYnV0aW9uIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBFdmVudCBNYXAgZXZlbnQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgQXR0cmlidXRpb24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChtYXBFdmVudCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUVsZW1lbnRfKG1hcEV2ZW50LmZyYW1lU3RhdGUpO1xuICAgIH07XG4gICAgcmV0dXJuIEF0dHJpYnV0aW9uO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBBdHRyaWJ1dGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUF0dHJpYnV0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvY29udHJvbC9Sb3RhdGVcbiAqL1xuaW1wb3J0IENvbnRyb2wgZnJvbSAnLi9Db250cm9sLmpzJztcbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBDTEFTU19DT05UUk9MLCBDTEFTU19ISURERU4sIENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjbGFzc05hbWU9J29sLXJvdGF0ZSddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtzdHJpbmd8SFRNTEVsZW1lbnR9IFtsYWJlbD0n4oenJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSByb3RhdGUgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RpcExhYmVsPSdSZXNldCByb3RhdGlvbiddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgcm90YXRlIHRpcC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY29tcGFzc0NsYXNzTmFtZT0nb2wtY29tcGFzcyddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgY29tcGFzcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b0hpZGU9dHJ1ZV0gSGlkZSB0aGUgY29udHJvbCB3aGVuIHJvdGF0aW9uIGlzIDAuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtyZW5kZXJdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIHNob3VsZFxuICogYmUgcmUtcmVuZGVyZWQuIFRoaXMgaXMgY2FsbGVkIGluIGEgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAgY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKCk6dm9pZH0gW3Jlc2V0Tm9ydGhdIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHRoZSBjb250cm9sIGlzIGNsaWNrZWQuXG4gKiBUaGlzIHdpbGwgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgYHJlc2V0Tm9ydGhgLlxuICogQHByb3BlcnR5IHtIVE1MRWxlbWVudHxzdHJpbmd9IFt0YXJnZXRdIFNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IHdhbnQgdGhlIGNvbnRyb2wgdG8gYmVcbiAqIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIG1hcCdzIHZpZXdwb3J0LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEEgYnV0dG9uIGNvbnRyb2wgdG8gcmVzZXQgcm90YXRpb24gdG8gMC5cbiAqIFRvIHN0eWxlIHRoaXMgY29udHJvbCB1c2UgY3NzIHNlbGVjdG9yIGAub2wtcm90YXRlYC4gQSBgLm9sLWhpZGRlbmAgY3NzXG4gKiBzZWxlY3RvciBpcyBhZGRlZCB0byB0aGUgYnV0dG9uIHdoZW4gdGhlIHJvdGF0aW9uIGlzIDAuXG4gKlxuICogQGFwaVxuICovXG52YXIgUm90YXRlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhSb3RhdGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFJvdGF0ZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJvdGF0ZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY2xhc3NOYW1lIDogJ29sLXJvdGF0ZSc7XG4gICAgICAgIHZhciBsYWJlbCA9IG9wdGlvbnMubGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubGFiZWwgOiAnXFx1MjFFNyc7XG4gICAgICAgIHZhciBjb21wYXNzQ2xhc3NOYW1lID0gb3B0aW9ucy5jb21wYXNzQ2xhc3NOYW1lICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gb3B0aW9ucy5jb21wYXNzQ2xhc3NOYW1lXG4gICAgICAgICAgICA6ICdvbC1jb21wYXNzJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhYmVsXyA9IG51bGw7XG4gICAgICAgIGlmICh0eXBlb2YgbGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8uY2xhc3NOYW1lID0gY29tcGFzc0NsYXNzTmFtZTtcbiAgICAgICAgICAgIF90aGlzLmxhYmVsXy50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgX3RoaXMubGFiZWxfID0gbGFiZWw7XG4gICAgICAgICAgICBfdGhpcy5sYWJlbF8uY2xhc3NMaXN0LmFkZChjb21wYXNzQ2xhc3NOYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlwTGFiZWwgPSBvcHRpb25zLnRpcExhYmVsID8gb3B0aW9ucy50aXBMYWJlbCA6ICdSZXNldCByb3RhdGlvbic7XG4gICAgICAgIHZhciBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uLmNsYXNzTmFtZSA9IGNsYXNzTmFtZSArICctcmVzZXQnO1xuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24udGl0bGUgPSB0aXBMYWJlbDtcbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKF90aGlzLmxhYmVsXyk7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMpLCBmYWxzZSk7XG4gICAgICAgIHZhciBjc3NDbGFzc2VzID0gY2xhc3NOYW1lICsgJyAnICsgQ0xBU1NfVU5TRUxFQ1RBQkxFICsgJyAnICsgQ0xBU1NfQ09OVFJPTDtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBfdGhpcy5lbGVtZW50O1xuICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNzc0NsYXNzZXM7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICAgICAgX3RoaXMuY2FsbFJlc2V0Tm9ydGhfID0gb3B0aW9ucy5yZXNldE5vcnRoID8gb3B0aW9ucy5yZXNldE5vcnRoIDogdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmF1dG9IaWRlXyA9IG9wdGlvbnMuYXV0b0hpZGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuYXV0b0hpZGUgOiB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yb3RhdGlvbl8gPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmIChfdGhpcy5hdXRvSGlkZV8pIHtcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChDTEFTU19ISURERU4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSb3RhdGUucHJvdG90eXBlLmhhbmRsZUNsaWNrXyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAodGhpcy5jYWxsUmVzZXROb3J0aF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jYWxsUmVzZXROb3J0aF8oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXROb3J0aF8oKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSb3RhdGUucHJvdG90eXBlLnJlc2V0Tm9ydGhfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAoIXZpZXcpIHtcbiAgICAgICAgICAgIC8vIHRoZSBtYXAgZG9lcyBub3QgaGF2ZSBhIHZpZXcsIHNvIHdlIGNhbid0IGFjdFxuICAgICAgICAgICAgLy8gdXBvbiBpdFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHZpZXcuZ2V0Um90YXRpb24oKTtcbiAgICAgICAgaWYgKHJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmR1cmF0aW9uXyA+IDAgJiYgcm90YXRpb24gJSAoMiAqIE1hdGguUEkpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdmlldy5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb246IDAsXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNlT3V0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmlldy5zZXRSb3RhdGlvbigwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSByb3RhdGUgY29udHJvbCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwRXZlbnQgTWFwIGV2ZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIFJvdGF0ZS5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKG1hcEV2ZW50KSB7XG4gICAgICAgIHZhciBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJvdGF0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb247XG4gICAgICAgIGlmIChyb3RhdGlvbiAhPSB0aGlzLnJvdGF0aW9uXykge1xuICAgICAgICAgICAgdmFyIHRyYW5zZm9ybSA9ICdyb3RhdGUoJyArIHJvdGF0aW9uICsgJ3JhZCknO1xuICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0hpZGVfKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5zID0gdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhDTEFTU19ISURERU4pO1xuICAgICAgICAgICAgICAgIGlmICghY29udGFpbnMgJiYgcm90YXRpb24gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udGFpbnMgJiYgcm90YXRpb24gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NfSElEREVOKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhYmVsXy5zdHlsZS50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb3RhdGlvbl8gPSByb3RhdGlvbjtcbiAgICB9O1xuICAgIHJldHVybiBSb3RhdGU7XG59KENvbnRyb2wpKTtcbmV4cG9ydCBkZWZhdWx0IFJvdGF0ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVJvdGF0ZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2wvWm9vbVxuICovXG5pbXBvcnQgQ29udHJvbCBmcm9tICcuL0NvbnRyb2wuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IENMQVNTX0NPTlRST0wsIENMQVNTX1VOU0VMRUNUQUJMRSB9IGZyb20gJy4uL2Nzcy5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0yNTBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtem9vbSddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tSW5DbGFzc05hbWU9Y2xhc3NOYW1lICsgJy1pbiddIENTUyBjbGFzcyBuYW1lIGZvciB0aGUgem9vbS1pbiBidXR0b24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21PdXRDbGFzc05hbWU9Y2xhc3NOYW1lICsgJy1vdXQnXSBDU1MgY2xhc3MgbmFtZSBmb3IgdGhlIHpvb20tb3V0IGJ1dHRvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfEhUTUxFbGVtZW50fSBbem9vbUluTGFiZWw9JysnXSBUZXh0IGxhYmVsIHRvIHVzZSBmb3IgdGhlIHpvb20taW5cbiAqIGJ1dHRvbi4gSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xIVE1MRWxlbWVudH0gW3pvb21PdXRMYWJlbD0nLSddIFRleHQgbGFiZWwgdG8gdXNlIGZvciB0aGUgem9vbS1vdXQgYnV0dG9uLlxuICogSW5zdGVhZCBvZiB0ZXh0LCBhbHNvIGFuIGVsZW1lbnQgKGUuZy4gYSBgc3BhbmAgZWxlbWVudCkgY2FuIGJlIHVzZWQuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3pvb21JblRpcExhYmVsPSdab29tIGluJ10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt6b29tT3V0VGlwTGFiZWw9J1pvb20gb3V0J10gVGV4dCBsYWJlbCB0byB1c2UgZm9yIHRoZSBidXR0b24gdGlwLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBkZWx0YSBhcHBsaWVkIG9uIGVhY2ggY2xpY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZVxuICogcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHdpdGggMiBidXR0b25zLCBvbmUgZm9yIHpvb20gaW4gYW5kIG9uZSBmb3Igem9vbSBvdXQuXG4gKiBUaGlzIGNvbnRyb2wgaXMgb25lIG9mIHRoZSBkZWZhdWx0IGNvbnRyb2xzIG9mIGEgbWFwLiBUbyBzdHlsZSB0aGlzIGNvbnRyb2xcbiAqIHVzZSBjc3Mgc2VsZWN0b3JzIGAub2wtem9vbS1pbmAgYW5kIGAub2wtem9vbS1vdXRgLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFpvb20gb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgdmFyIGNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC16b29tJztcbiAgICAgICAgdmFyIGRlbHRhID0gb3B0aW9ucy5kZWx0YSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kZWx0YSA6IDE7XG4gICAgICAgIHZhciB6b29tSW5DbGFzc05hbWUgPSBvcHRpb25zLnpvb21JbkNsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuem9vbUluQ2xhc3NOYW1lXG4gICAgICAgICAgICA6IGNsYXNzTmFtZSArICctaW4nO1xuICAgICAgICB2YXIgem9vbU91dENsYXNzTmFtZSA9IG9wdGlvbnMuem9vbU91dENsYXNzTmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuem9vbU91dENsYXNzTmFtZVxuICAgICAgICAgICAgOiBjbGFzc05hbWUgKyAnLW91dCc7XG4gICAgICAgIHZhciB6b29tSW5MYWJlbCA9IG9wdGlvbnMuem9vbUluTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbUluTGFiZWwgOiAnKyc7XG4gICAgICAgIHZhciB6b29tT3V0TGFiZWwgPSBvcHRpb25zLnpvb21PdXRMYWJlbCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tT3V0TGFiZWwgOiAnXFx1MjIxMic7XG4gICAgICAgIHZhciB6b29tSW5UaXBMYWJlbCA9IG9wdGlvbnMuem9vbUluVGlwTGFiZWwgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuem9vbUluVGlwTGFiZWwgOiAnWm9vbSBpbic7XG4gICAgICAgIHZhciB6b29tT3V0VGlwTGFiZWwgPSBvcHRpb25zLnpvb21PdXRUaXBMYWJlbCAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICA/IG9wdGlvbnMuem9vbU91dFRpcExhYmVsXG4gICAgICAgICAgICA6ICdab29tIG91dCc7XG4gICAgICAgIHZhciBpbkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgaW5FbGVtZW50LmNsYXNzTmFtZSA9IHpvb21JbkNsYXNzTmFtZTtcbiAgICAgICAgaW5FbGVtZW50LnNldEF0dHJpYnV0ZSgndHlwZScsICdidXR0b24nKTtcbiAgICAgICAgaW5FbGVtZW50LnRpdGxlID0gem9vbUluVGlwTGFiZWw7XG4gICAgICAgIGluRWxlbWVudC5hcHBlbmRDaGlsZCh0eXBlb2Ygem9vbUluTGFiZWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHpvb21JbkxhYmVsKVxuICAgICAgICAgICAgOiB6b29tSW5MYWJlbCk7XG4gICAgICAgIGluRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMsIGRlbHRhKSwgZmFsc2UpO1xuICAgICAgICB2YXIgb3V0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICBvdXRFbGVtZW50LmNsYXNzTmFtZSA9IHpvb21PdXRDbGFzc05hbWU7XG4gICAgICAgIG91dEVsZW1lbnQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBvdXRFbGVtZW50LnRpdGxlID0gem9vbU91dFRpcExhYmVsO1xuICAgICAgICBvdXRFbGVtZW50LmFwcGVuZENoaWxkKHR5cGVvZiB6b29tT3V0TGFiZWwgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICA/IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHpvb21PdXRMYWJlbClcbiAgICAgICAgICAgIDogem9vbU91dExhYmVsKTtcbiAgICAgICAgb3V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DTElDSywgX3RoaXMuaGFuZGxlQ2xpY2tfLmJpbmQoX3RoaXMsIC1kZWx0YSksIGZhbHNlKTtcbiAgICAgICAgdmFyIGNzc0NsYXNzZXMgPSBjbGFzc05hbWUgKyAnICcgKyBDTEFTU19VTlNFTEVDVEFCTEUgKyAnICcgKyBDTEFTU19DT05UUk9MO1xuICAgICAgICB2YXIgZWxlbWVudCA9IF90aGlzLmVsZW1lbnQ7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY3NzQ2xhc3NlcztcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChpbkVsZW1lbnQpO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG91dEVsZW1lbnQpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbHRhIFpvb20gZGVsdGEuXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCBUaGUgZXZlbnQgdG8gaGFuZGxlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBab29tLnByb3RvdHlwZS5oYW5kbGVDbGlja18gPSBmdW5jdGlvbiAoZGVsdGEsIGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuem9vbUJ5RGVsdGFfKGRlbHRhKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YSBab29tIGRlbHRhLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgWm9vbS5wcm90b3R5cGUuem9vbUJ5RGVsdGFfID0gZnVuY3Rpb24gKGRlbHRhKSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICghdmlldykge1xuICAgICAgICAgICAgLy8gdGhlIG1hcCBkb2VzIG5vdCBoYXZlIGEgdmlldywgc28gd2UgY2FuJ3QgYWN0XG4gICAgICAgICAgICAvLyB1cG9uIGl0XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnJlbnRab29tID0gdmlldy5nZXRab29tKCk7XG4gICAgICAgIGlmIChjdXJyZW50Wm9vbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgbmV3Wm9vbSA9IHZpZXcuZ2V0Q29uc3RyYWluZWRab29tKGN1cnJlbnRab29tICsgZGVsdGEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuZHVyYXRpb25fID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh2aWV3LmdldEFuaW1hdGluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2aWV3LmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgICAgICB6b29tOiBuZXdab29tLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5kdXJhdGlvbl8sXG4gICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZXcuc2V0Wm9vbShuZXdab29tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFpvb207XG59KENvbnRyb2wpKTtcbmV4cG9ydCBkZWZhdWx0IFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ab29tLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9Qcm9wZXJ0eVxuICovXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBQ1RJVkU6ICdhY3RpdmUnLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVByb3BlcnR5LmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vSW50ZXJhY3Rpb25cbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBJbnRlcmFjdGlvblByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IHsgZWFzZU91dCwgbGluZWFyIH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuQ29tYmluZWRPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfFxuICogICAgICdjaGFuZ2U6YWN0aXZlJywgUmV0dXJuPn0gSW50ZXJhY3Rpb25PblNpZ25hdHVyZVxuICovXG4vKipcbiAqIE9iamVjdCBsaXRlcmFsIHdpdGggY29uZmlnIG9wdGlvbnMgZm9yIGludGVyYWN0aW9ucy5cbiAqIEB0eXBlZGVmIHtPYmplY3R9IEludGVyYWN0aW9uT3B0aW9uc1xuICogQHByb3BlcnR5IHtmdW5jdGlvbihpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCk6Ym9vbGVhbn0gaGFuZGxlRXZlbnRcbiAqIE1ldGhvZCBjYWxsZWQgYnkgdGhlIG1hcCB0byBub3RpZnkgdGhlIGludGVyYWN0aW9uIHRoYXQgYSBicm93c2VyIGV2ZW50IHdhc1xuICogZGlzcGF0Y2hlZCB0byB0aGUgbWFwLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBhIGZhbHN5IHZhbHVlLCBwcm9wYWdhdGlvbiBvZlxuICogdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zIGNoYWluIHdpbGwgYmVcbiAqIHByZXZlbnRlZCAodGhpcyBpbmNsdWRlcyBmdW5jdGlvbnMgd2l0aCBubyBleHBsaWNpdCByZXR1cm4pLiBUaGUgaW50ZXJhY3Rpb25zXG4gKiBhcmUgdHJhdmVyc2VkIGluIHJldmVyc2Ugb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBjb2xsZWN0aW9uIG9mIHRoZSBtYXAuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogVXNlciBhY3Rpb25zIHRoYXQgY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgbWFwLiBTb21lIGFyZSBzaW1pbGFyIHRvIGNvbnRyb2xzLFxuICogYnV0IGFyZSBub3QgYXNzb2NpYXRlZCB3aXRoIGEgRE9NIGVsZW1lbnQuXG4gKiBGb3IgZXhhbXBsZSwge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfSBpc1xuICogZnVuY3Rpb25hbGx5IHRoZSBzYW1lIGFzIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LCBidXQgdHJpZ2dlcmVkXG4gKiBieSBhIGtleWJvYXJkIGV2ZW50IG5vdCBhIGJ1dHRvbiBlbGVtZW50IGV2ZW50LlxuICogQWx0aG91Z2ggaW50ZXJhY3Rpb25zIGRvIG5vdCBoYXZlIGEgRE9NIGVsZW1lbnQsIHNvbWUgb2YgdGhlbSBkbyByZW5kZXJcbiAqIHZlY3RvcnMgYW5kIHNvIGFyZSB2aXNpYmxlIG9uIHRoZSBzY3JlZW4uXG4gKiBAYXBpXG4gKi9cbnZhciBJbnRlcmFjdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW50ZXJhY3Rpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtJbnRlcmFjdGlvbk9wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbnRlcmFjdGlvbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0ludGVyYWN0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtJbnRlcmFjdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIGlmIChvcHRfb3B0aW9ucyAmJiBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlRXZlbnQgPSBvcHRfb3B0aW9ucy5oYW5kbGVFdmVudDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG51bGw7XG4gICAgICAgIF90aGlzLnNldEFjdGl2ZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gd2hldGhlciB0aGUgaW50ZXJhY3Rpb24gaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIGludGVyYWN0aW9uIGlzIGFjdGl2ZSwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldEFjdGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHRoaXMuZ2V0KEludGVyYWN0aW9uUHJvcGVydHkuQUNUSVZFKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1hcCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbnRlcmFjdGlvbi5wcm90b3R5cGUuZ2V0TWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXBfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9LlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZSBvciBkZWFjdGl2YXRlIHRoZSBpbnRlcmFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGFjdGl2ZSBBY3RpdmUuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldEFjdGl2ZSA9IGZ1bmN0aW9uIChhY3RpdmUpIHtcbiAgICAgICAgdGhpcy5zZXQoSW50ZXJhY3Rpb25Qcm9wZXJ0eS5BQ1RJVkUsIGFjdGl2ZSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhlIGludGVyYWN0aW9uIGZyb20gaXRzIGN1cnJlbnQgbWFwIGFuZCBhdHRhY2ggaXQgdG8gdGhlIG5ldyBtYXAuXG4gICAgICogU3ViY2xhc3NlcyBtYXkgc2V0IHVwIGV2ZW50IGhhbmRsZXJzIHRvIGdldCBub3RpZmllZCBhYm91dCBjaGFuZ2VzIHRvXG4gICAgICogdGhlIG1hcCBoZXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgSW50ZXJhY3Rpb24ucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgIH07XG4gICAgcmV0dXJuIEludGVyYWN0aW9uO1xufShCYXNlT2JqZWN0KSk7XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZGVsdGEgRGVsdGEuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9kdXJhdGlvbl0gRHVyYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYW4odmlldywgZGVsdGEsIG9wdF9kdXJhdGlvbikge1xuICAgIHZhciBjdXJyZW50Q2VudGVyID0gdmlldy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgIGlmIChjdXJyZW50Q2VudGVyKSB7XG4gICAgICAgIHZhciBjZW50ZXIgPSBbY3VycmVudENlbnRlclswXSArIGRlbHRhWzBdLCBjdXJyZW50Q2VudGVyWzFdICsgZGVsdGFbMV1dO1xuICAgICAgICB2aWV3LmFuaW1hdGVJbnRlcm5hbCh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0X2R1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfZHVyYXRpb24gOiAyNTAsXG4gICAgICAgICAgICBlYXNpbmc6IGxpbmVhcixcbiAgICAgICAgICAgIGNlbnRlcjogdmlldy5nZXRDb25zdHJhaW5lZENlbnRlcihjZW50ZXIpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVmlldy5qc1wiKS5kZWZhdWx0fSB2aWV3IFZpZXcuXG4gKiBAcGFyYW0ge251bWJlcn0gZGVsdGEgRGVsdGEgZnJvbSBwcmV2aW91cyB6b29tIGxldmVsLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcHRfYW5jaG9yXSBBbmNob3IgY29vcmRpbmF0ZSBpbiB0aGUgdXNlciBwcm9qZWN0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfZHVyYXRpb25dIER1cmF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIG9wdF9hbmNob3IsIG9wdF9kdXJhdGlvbikge1xuICAgIHZhciBjdXJyZW50Wm9vbSA9IHZpZXcuZ2V0Wm9vbSgpO1xuICAgIGlmIChjdXJyZW50Wm9vbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5ld1pvb20gPSB2aWV3LmdldENvbnN0cmFpbmVkWm9vbShjdXJyZW50Wm9vbSArIGRlbHRhKTtcbiAgICB2YXIgbmV3UmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbkZvclpvb20obmV3Wm9vbSk7XG4gICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgfVxuICAgIHZpZXcuYW5pbWF0ZSh7XG4gICAgICAgIHJlc29sdXRpb246IG5ld1Jlc29sdXRpb24sXG4gICAgICAgIGFuY2hvcjogb3B0X2FuY2hvcixcbiAgICAgICAgZHVyYXRpb246IG9wdF9kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0X2R1cmF0aW9uIDogMjUwLFxuICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgfSk7XG59XG5leHBvcnQgZGVmYXVsdCBJbnRlcmFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUludGVyYWN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tXG4gKi9cbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZWx0YT0xXSBUaGUgem9vbSBkZWx0YSBhcHBsaWVkIG9uIGVhY2ggZG91YmxlIGNsaWNrLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIGJ5IGRvdWJsZS1jbGlja2luZyBvbiB0aGUgbWFwLlxuICogQGFwaVxuICovXG52YXIgRG91YmxlQ2xpY2tab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEb3VibGVDbGlja1pvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRG91YmxlQ2xpY2tab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhXyA9IG9wdGlvbnMuZGVsdGEgPyBvcHRpb25zLmRlbHRhIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSAoaWYgaXQgd2FzIGFcbiAgICAgKiBkb3VibGVjbGljaykgYW5kIGV2ZW50dWFsbHkgem9vbXMgdGhlIG1hcC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqL1xuICAgIERvdWJsZUNsaWNrWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0spIHtcbiAgICAgICAgICAgIHZhciBicm93c2VyRXZlbnQgPSAvKiogQHR5cGUge01vdXNlRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciBhbmNob3IgPSBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZTtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGJyb3dzZXJFdmVudC5zaGlmdEtleSA/IC10aGlzLmRlbHRhXyA6IHRoaXMuZGVsdGFfO1xuICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIGFuY2hvciwgdGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgYnJvd3NlckV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIERvdWJsZUNsaWNrWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IERvdWJsZUNsaWNrWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPURvdWJsZUNsaWNrWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BvaW50ZXJcbiAqL1xuaW1wb3J0IEludGVyYWN0aW9uIGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IE1hcEJyb3dzZXJFdmVudFR5cGUgZnJvbSAnLi4vTWFwQnJvd3NlckV2ZW50VHlwZS5qcyc7XG5pbXBvcnQgeyBnZXRWYWx1ZXMgfSBmcm9tICcuLi9vYmouanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBbaGFuZGxlRG93bkV2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJkb3duXCIgZXZlbnRzLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgdGhlbiBhIGRyYWdcbiAqIHNlcXVlbmNlIGlzIHN0YXJ0ZWQuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTp2b2lkfSBbaGFuZGxlRHJhZ0V2ZW50XVxuICogRnVuY3Rpb24gaGFuZGxpbmcgXCJkcmFnXCIgZXZlbnRzLiBUaGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBcIm1vdmVcIiBldmVudHNcbiAqIGR1cmluZyBhIGRyYWcgc2VxdWVuY2UuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBbaGFuZGxlRXZlbnRdXG4gKiBNZXRob2QgY2FsbGVkIGJ5IHRoZSBtYXAgdG8gbm90aWZ5IHRoZSBpbnRlcmFjdGlvbiB0aGF0IGEgYnJvd3NlciBldmVudCB3YXNcbiAqIGRpc3BhdGNoZWQgdG8gdGhlIG1hcC4gVGhlIGZ1bmN0aW9uIG1heSByZXR1cm4gYGZhbHNlYCB0byBwcmV2ZW50IHRoZVxuICogcHJvcGFnYXRpb24gb2YgdGhlIGV2ZW50IHRvIG90aGVyIGludGVyYWN0aW9ucyBpbiB0aGUgbWFwJ3MgaW50ZXJhY3Rpb25zXG4gKiBjaGFpbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtoYW5kbGVNb3ZlRXZlbnRdXG4gKiBGdW5jdGlvbiBoYW5kbGluZyBcIm1vdmVcIiBldmVudHMuIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIFwibW92ZVwiIGV2ZW50cy5cbiAqIFRoaXMgZnVuY3Rpb25zIGlzIGFsc28gY2FsbGVkIGR1cmluZyBhIGRyYWcgc2VxdWVuY2UsIHNvIGR1cmluZyBhIGRyYWdcbiAqIHNlcXVlbmNlIGJvdGggdGhlIGBoYW5kbGVEcmFnRXZlbnRgIGZ1bmN0aW9uIGFuZCB0aGlzIGZ1bmN0aW9uIGFyZSBjYWxsZWQuXG4gKiBJZiBgaGFuZGxlRG93bkV2ZW50YCBpcyBkZWZpbmVkIGFuZCBpdCByZXR1cm5zIHRydWUgdGhpcyBmdW5jdGlvbiB3aWxsIG5vdFxuICogYmUgY2FsbGVkIGR1cmluZyBhIGRyYWcgc2VxdWVuY2UuXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKGltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0KTpib29sZWFufSBbaGFuZGxlVXBFdmVudF1cbiAqICBGdW5jdGlvbiBoYW5kbGluZyBcInVwXCIgZXZlbnRzLiBJZiB0aGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgIHRoZW4gdGhlXG4gKiBjdXJyZW50IGRyYWcgc2VxdWVuY2UgaXMgc3RvcHBlZC5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oYm9vbGVhbik6Ym9vbGVhbn0gW3N0b3BEb3duXVxuICogU2hvdWxkIHRoZSBkb3duIGV2ZW50IGJlIHByb3BhZ2F0ZWQgdG8gb3RoZXIgaW50ZXJhY3Rpb25zLCBvciBzaG91bGQgYmVcbiAqIHN0b3BwZWQ/XG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyB0aGF0IGNhbGxzIHVzZXItZGVmaW5lZCBmdW5jdGlvbnMgb24gYGRvd25gLCBgbW92ZWAgYW5kIGB1cGBcbiAqIGV2ZW50cy4gVGhpcyBjbGFzcyBhbHNvIG1hbmFnZXMgXCJkcmFnIHNlcXVlbmNlc1wiLlxuICpcbiAqIFdoZW4gdGhlIGBoYW5kbGVEb3duRXZlbnRgIHVzZXIgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAgYSBkcmFnIHNlcXVlbmNlIGlzXG4gKiBzdGFydGVkLiBEdXJpbmcgYSBkcmFnIHNlcXVlbmNlIHRoZSBgaGFuZGxlRHJhZ0V2ZW50YCB1c2VyIGZ1bmN0aW9uIGlzXG4gKiBjYWxsZWQgb24gYG1vdmVgIGV2ZW50cy4gVGhlIGRyYWcgc2VxdWVuY2UgZW5kcyB3aGVuIHRoZSBgaGFuZGxlVXBFdmVudGBcbiAqIHVzZXIgZnVuY3Rpb24gaXMgY2FsbGVkIGFuZCByZXR1cm5zIGBmYWxzZWAuXG4gKiBAYXBpXG4gKi9cbnZhciBQb2ludGVySW50ZXJhY3Rpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBvaW50ZXJJbnRlcmFjdGlvbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBQb2ludGVySW50ZXJhY3Rpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgXG4gICAgICAgIC8qKiBAdHlwZSB7aW1wb3J0KFwiLi9JbnRlcmFjdGlvbi5qc1wiKS5JbnRlcmFjdGlvbk9wdGlvbnN9ICovIChvcHRpb25zKSkgfHwgdGhpcztcbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlRG93bkV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVEb3duRXZlbnQgPSBvcHRpb25zLmhhbmRsZURvd25FdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5oYW5kbGVEcmFnRXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZURyYWdFdmVudCA9IG9wdGlvbnMuaGFuZGxlRHJhZ0V2ZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmhhbmRsZU1vdmVFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlTW92ZUV2ZW50ID0gb3B0aW9ucy5oYW5kbGVNb3ZlRXZlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaGFuZGxlVXBFdmVudCkge1xuICAgICAgICAgICAgX3RoaXMuaGFuZGxlVXBFdmVudCA9IG9wdGlvbnMuaGFuZGxlVXBFdmVudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdG9wRG93bikge1xuICAgICAgICAgICAgX3RoaXMuc3RvcERvd24gPSBvcHRpb25zLnN0b3BEb3duO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBQb2ludGVyRXZlbnQ+fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2tlZFBvaW50ZXJzXyA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFBvaW50ZXJFdmVudD59XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRhcmdldFBvaW50ZXJzID0gW107XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBudW1iZXIgb2YgcG9pbnRlcnMgaW52b2x2ZWQgaW4gdGhlIGludGVyYWN0aW9uLFxuICAgICAqIGUuZy4gYDJgIHdoZW4gdHdvIGZpbmdlcnMgYXJlIHVzZWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgbnVtYmVyIG9mIHBvaW50ZXJzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmdldFBvaW50ZXJDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFBvaW50ZXJJbnRlcmFjdGlvbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50IG1hcCBicm93c2VyIGV2ZW50fSBhbmQgbWF5IGNhbGwgaW50b1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucywgaWYgZXZlbnQgc2VxdWVuY2VzIGxpa2UgZS5nLiAnZHJhZycgb3IgJ2Rvd24tdXAnIGV0Yy4gYXJlXG4gICAgICogZGV0ZWN0ZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0b3BFdmVudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnVwZGF0ZVRyYWNrZWRQb2ludGVyc18obWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSkge1xuICAgICAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRSQUcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURyYWdFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIC8vIHByZXZlbnQgcGFnZSBzY3JvbGxpbmcgZHVyaW5nIGRyYWdnaW5nXG4gICAgICAgICAgICAgICAgbWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUlVQKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZWRVcCA9IHRoaXMuaGFuZGxlVXBFdmVudChtYXBCcm93c2VyRXZlbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxpbmdEb3duVXBTZXF1ZW5jZSA9XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZWRVcCAmJiB0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgICAgICAgICAgIHZhciBoYW5kbGVkID0gdGhpcy5oYW5kbGVEb3duRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsaW5nRG93blVwU2VxdWVuY2UgPSBoYW5kbGVkO1xuICAgICAgICAgICAgICAgIHN0b3BFdmVudCA9IHRoaXMuc3RvcERvd24oaGFuZGxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJNT1ZFKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3ZlRXZlbnQobWFwQnJvd3NlckV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gIXN0b3BFdmVudDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIG1vdmUgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5oYW5kbGVNb3ZlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7IH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBQb2ludGVySW50ZXJhY3Rpb24ucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBkZXRlcm1pbmUgaWYgXCJkb3duXCIgZXZlbnRzIHNob3VsZCBiZSBwcm9wYWdhdGVkXG4gICAgICogdG8gb3RoZXIgaW50ZXJhY3Rpb25zIG9yIHNob3VsZCBiZSBzdG9wcGVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFuZGxlZCBXYXMgdGhlIGV2ZW50IGhhbmRsZWQgYnkgdGhlIGludGVyYWN0aW9uP1xuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFNob3VsZCB0aGUgYGRvd25gIGV2ZW50IGJlIHN0b3BwZWQ/XG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS5zdG9wRG93biA9IGZ1bmN0aW9uIChoYW5kbGVkKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVkO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUG9pbnRlckludGVyYWN0aW9uLnByb3RvdHlwZS51cGRhdGVUcmFja2VkUG9pbnRlcnNfID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoaXNQb2ludGVyRHJhZ2dpbmdFdmVudChtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50O1xuICAgICAgICAgICAgdmFyIGlkID0gZXZlbnRfMS5wb2ludGVySWQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRyYWNrZWRQb2ludGVyc19baWRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRE9XTikge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhY2tlZFBvaW50ZXJzX1tpZF0gPSBldmVudF8xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaWQgaW4gdGhpcy50cmFja2VkUG9pbnRlcnNfKSB7XG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIG9ubHkgd2hlbiB0aGVyZSB3YXMgYSBwb2ludGVyZG93biBldmVudCBmb3IgdGhpcyBwb2ludGVyXG4gICAgICAgICAgICAgICAgdGhpcy50cmFja2VkUG9pbnRlcnNfW2lkXSA9IGV2ZW50XzE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRhcmdldFBvaW50ZXJzID0gZ2V0VmFsdWVzKHRoaXMudHJhY2tlZFBvaW50ZXJzXyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBQb2ludGVySW50ZXJhY3Rpb247XG59KEludGVyYWN0aW9uKSk7XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8UG9pbnRlckV2ZW50Pn0gcG9pbnRlckV2ZW50cyBMaXN0IG9mIGV2ZW50cy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBDZW50cm9pZCBwaXhlbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNlbnRyb2lkKHBvaW50ZXJFdmVudHMpIHtcbiAgICB2YXIgbGVuZ3RoID0gcG9pbnRlckV2ZW50cy5sZW5ndGg7XG4gICAgdmFyIGNsaWVudFggPSAwO1xuICAgIHZhciBjbGllbnRZID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNsaWVudFggKz0gcG9pbnRlckV2ZW50c1tpXS5jbGllbnRYO1xuICAgICAgICBjbGllbnRZICs9IHBvaW50ZXJFdmVudHNbaV0uY2xpZW50WTtcbiAgICB9XG4gICAgcmV0dXJuIFtjbGllbnRYIC8gbGVuZ3RoLCBjbGllbnRZIC8gbGVuZ3RoXTtcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZXZlbnQgaXMgYSBwb2ludGVyZG93biwgcG9pbnRlcmRyYWdcbiAqICAgICBvciBwb2ludGVydXAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGlzUG9pbnRlckRyYWdnaW5nRXZlbnQobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHR5cGUgPSBtYXBCcm93c2VyRXZlbnQudHlwZTtcbiAgICByZXR1cm4gKHR5cGUgPT09IE1hcEJyb3dzZXJFdmVudFR5cGUuUE9JTlRFUkRPV04gfHxcbiAgICAgICAgdHlwZSA9PT0gTWFwQnJvd3NlckV2ZW50VHlwZS5QT0lOVEVSRFJBRyB8fFxuICAgICAgICB0eXBlID09PSBNYXBCcm93c2VyRXZlbnRUeXBlLlBPSU5URVJVUCk7XG59XG5leHBvcnQgZGVmYXVsdCBQb2ludGVySW50ZXJhY3Rpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Qb2ludGVyLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9ldmVudHMvY29uZGl0aW9uXG4gKi9cbmltcG9ydCBNYXBCcm93c2VyRXZlbnRUeXBlIGZyb20gJy4uL01hcEJyb3dzZXJFdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgRkFMU0UsIFRSVUUgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgTUFDLCBXRUJLSVQgfSBmcm9tICcuLi9oYXMuanMnO1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi4vYXNzZXJ0cy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL01hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYHtib29sZWFufWAuIElmIHRoZSBjb25kaXRpb24gaXMgbWV0LCB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24odGhpczogPywgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOiBib29sZWFufSBDb25kaXRpb25cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgY29uZGl0aW9uIGZ1bmN0aW9uIHRoYXQgcGFzc2VzIHdoZW4gYWxsIHByb3ZpZGVkIGNvbmRpdGlvbnMgcGFzcy5cbiAqIEBwYXJhbSB7Li4uQ29uZGl0aW9ufSB2YXJfYXJncyBDb25kaXRpb25zIHRvIGNoZWNrLlxuICogQHJldHVybiB7Q29uZGl0aW9ufSBDb25kaXRpb24gZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbGwodmFyX2FyZ3MpIHtcbiAgICB2YXIgY29uZGl0aW9ucyA9IGFyZ3VtZW50cztcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBBbGwgY29uZGl0aW9ucyBwYXNzZWQuXG4gICAgICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgcGFzcyA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IGNvbmRpdGlvbnMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xuICAgICAgICAgICAgcGFzcyA9IHBhc3MgJiYgY29uZGl0aW9uc1tpXShldmVudCk7XG4gICAgICAgICAgICBpZiAoIXBhc3MpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFzcztcbiAgICB9O1xufVxuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG9ubHkgdGhlIGFsdC1rZXkgaXMgcHJlc3NlZCwgYGZhbHNlYCBvdGhlcndpc2UgKGUuZy4gd2hlblxuICogYWRkaXRpb25hbGx5IHRoZSBzaGlmdC1rZXkgaXMgcHJlc3NlZCkuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBvbmx5IHRoZSBhbHQga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgYWx0S2V5T25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuIChvcmlnaW5hbEV2ZW50LmFsdEtleSAmJlxuICAgICAgICAhKG9yaWdpbmFsRXZlbnQubWV0YUtleSB8fCBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgYWx0LWtleSBhbmQgc2hpZnQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gKiAoZS5nLiB3aGVuIGFkZGl0aW9uYWxseSB0aGUgcGxhdGZvcm0tbW9kaWZpZXIta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIGFsdFNoaWZ0S2V5c09ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAob3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIG1hcCBoYXMgdGhlIGZvY3VzLiBUaGlzIGNvbmRpdGlvbiByZXF1aXJlcyBhIG1hcCB0YXJnZXRcbiAqIGVsZW1lbnQgd2l0aCBhIGB0YWJpbmRleGAgYXR0cmlidXRlLCBlLmcuIGA8ZGl2IGlkPVwibWFwXCIgdGFiaW5kZXg9XCIxXCI+YC5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBldmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBmb2N1cyA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC50YXJnZXQuZ2V0VGFyZ2V0RWxlbWVudCgpLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgbWFwIGhhcyB0aGUgZm9jdXMgb3Igbm8gJ3RhYmluZGV4JyBhdHRyaWJ1dGUgc2V0LlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIG1hcCBjb250YWluZXIgaGFzIHRoZSBmb2N1cyBvciBubyAndGFiaW5kZXgnIGF0dHJpYnV0ZS5cbiAqL1xuZXhwb3J0IHZhciBmb2N1c1dpdGhUYWJpbmRleCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC5tYXAuZ2V0VGFyZ2V0RWxlbWVudCgpLmhhc0F0dHJpYnV0ZSgndGFiaW5kZXgnKVxuICAgICAgICA/IGZvY3VzKGV2ZW50KVxuICAgICAgICA6IHRydWU7XG59O1xuLyoqXG4gKiBSZXR1cm4gYWx3YXlzIHRydWUuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBhbHdheXMgPSBUUlVFO1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBpcyBhIGBjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgY2xpY2sgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuQ0xJQ0s7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBoYXMgYW4gXCJhY3Rpb25cIi1wcm9kdWNpbmcgbW91c2UgYnV0dG9uLlxuICpcbiAqIEJ5IGRlZmluaXRpb24sIHRoaXMgaW5jbHVkZXMgbGVmdC1jbGljayBvbiB3aW5kb3dzL2xpbnV4LCBhbmQgbGVmdC1jbGlja1xuICogd2l0aG91dCB0aGUgY3RybCBrZXkgb24gTWFjcy5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUaGUgcmVzdWx0LlxuICovXG5leHBvcnQgdmFyIG1vdXNlQWN0aW9uQnV0dG9uID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtNb3VzZUV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiBvcmlnaW5hbEV2ZW50LmJ1dHRvbiA9PSAwICYmICEoV0VCS0lUICYmIE1BQyAmJiBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGFsd2F5cyBmYWxzZS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBGYWxzZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBuZXZlciA9IEZBTFNFO1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBicm93c2VyIGV2ZW50IGlzIGEgYHBvaW50ZXJtb3ZlYCBldmVudCwgYGZhbHNlYFxuICogb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJyb3dzZXIgZXZlbnQgaXMgYSBgcG9pbnRlcm1vdmVgIGV2ZW50LlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHBvaW50ZXJNb3ZlID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHJldHVybiBtYXBCcm93c2VyRXZlbnQudHlwZSA9PSAncG9pbnRlcm1vdmUnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYHNpbmdsZWNsaWNrYCBldmVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgaXMgYSBtYXAgYHNpbmdsZWNsaWNrYCBldmVudC5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciBzaW5nbGVDbGljayA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICByZXR1cm4gbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gTWFwQnJvd3NlckV2ZW50VHlwZS5TSU5HTEVDTElDSztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBkYmxjbGlja2AgZXZlbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGV2ZW50IGlzIGEgbWFwIGBkYmxjbGlja2AgZXZlbnQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgZG91YmxlQ2xpY2sgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgcmV0dXJuIG1hcEJyb3dzZXJFdmVudC50eXBlID09IE1hcEJyb3dzZXJFdmVudFR5cGUuREJMQ0xJQ0s7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIG5vIG1vZGlmaWVyIGtleSAoYWx0LSwgc2hpZnQtIG9yIHBsYXRmb3JtLW1vZGlmaWVyLWtleSkgaXNcbiAqIHByZXNzZWQuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBvbmx5IGlmIHRoZXJlIG5vIG1vZGlmaWVyIGtleXMgYXJlIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgbm9Nb2RpZmllcktleXMgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAoIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgICEob3JpZ2luYWxFdmVudC5tZXRhS2V5IHx8IG9yaWdpbmFsRXZlbnQuY3RybEtleSkgJiZcbiAgICAgICAgIW9yaWdpbmFsRXZlbnQuc2hpZnRLZXkpO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiBvbmx5IHRoZSBwbGF0Zm9ybS1tb2RpZmllci1rZXkgKHRoZSBtZXRhLWtleSBvbiBNYWMsXG4gKiBjdHJsLWtleSBvdGhlcndpc2UpIGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlIChlLmcuIHdoZW4gYWRkaXRpb25hbGx5XG4gKiB0aGUgc2hpZnQta2V5IGlzIHByZXNzZWQpLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgb25seSB0aGUgcGxhdGZvcm0gbW9kaWZpZXIga2V5IGlzIHByZXNzZWQuXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgcGxhdGZvcm1Nb2RpZmllcktleU9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIG9yaWdpbmFsRXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR8TW91c2VFdmVudHxUb3VjaEV2ZW50fSAqLyAobWFwQnJvd3NlckV2ZW50Lm9yaWdpbmFsRXZlbnQpO1xuICAgIHJldHVybiAoIW9yaWdpbmFsRXZlbnQuYWx0S2V5ICYmXG4gICAgICAgIChNQUMgPyBvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgOiBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpICYmXG4gICAgICAgICFvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgb25seSB0aGUgc2hpZnQta2V5IGlzIHByZXNzZWQsIGBmYWxzZWAgb3RoZXJ3aXNlIChlLmcuIHdoZW5cbiAqIGFkZGl0aW9uYWxseSB0aGUgYWx0LWtleSBpcyBwcmVzc2VkKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG9ubHkgdGhlIHNoaWZ0IGtleSBpcyBwcmVzc2VkLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHNoaWZ0S2V5T25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IC8qKiBAdHlwZSB7S2V5Ym9hcmRFdmVudHxNb3VzZUV2ZW50fFRvdWNoRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgcmV0dXJuICghb3JpZ2luYWxFdmVudC5hbHRLZXkgJiZcbiAgICAgICAgIShvcmlnaW5hbEV2ZW50Lm1ldGFLZXkgfHwgb3JpZ2luYWxFdmVudC5jdHJsS2V5KSAmJlxuICAgICAgICBvcmlnaW5hbEV2ZW50LnNoaWZ0S2V5KTtcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIHRhcmdldCBlbGVtZW50IGlzIG5vdCBlZGl0YWJsZSwgaS5lLiBub3QgYSBgPGlucHV0PmAtLFxuICogYDxzZWxlY3Q+YC0gb3IgYDx0ZXh0YXJlYT5gLWVsZW1lbnQsIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgb25seSBpZiB0aGUgdGFyZ2V0IGVsZW1lbnQgaXMgbm90IGVkaXRhYmxlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHRhcmdldE5vdEVkaXRhYmxlID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgIHZhciBvcmlnaW5hbEV2ZW50ID0gLyoqIEB0eXBlIHtLZXlib2FyZEV2ZW50fE1vdXNlRXZlbnR8VG91Y2hFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICB2YXIgdGFnTmFtZSA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG9yaWdpbmFsRXZlbnQudGFyZ2V0KS50YWdOYW1lO1xuICAgIHJldHVybiB0YWdOYW1lICE9PSAnSU5QVVQnICYmIHRhZ05hbWUgIT09ICdTRUxFQ1QnICYmIHRhZ05hbWUgIT09ICdURVhUQVJFQSc7XG59O1xuLyoqXG4gKiBSZXR1cm4gYHRydWVgIGlmIHRoZSBldmVudCBvcmlnaW5hdGVzIGZyb20gYSBtb3VzZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgbW91c2UgZGV2aWNlLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIG1vdXNlT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlckV2ZW50ID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnRcIikuZGVmYXVsdH0gKi8gKG1hcEJyb3dzZXJFdmVudCkub3JpZ2luYWxFdmVudDtcbiAgICBhc3NlcnQocG9pbnRlckV2ZW50ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gICAgLy8gc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICAgIHJldHVybiBwb2ludGVyRXZlbnQucG9pbnRlclR5cGUgPT0gJ21vdXNlJztcbn07XG4vKipcbiAqIFJldHVybiBgdHJ1ZWAgaWYgdGhlIGV2ZW50IG9yaWdpbmF0ZXMgZnJvbSBhIHRvdWNoYWJsZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgdG91Y2hhYmxlIGRldmljZS5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IHZhciB0b3VjaE9ubHkgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdnQgPSAvKiogQHR5cGUge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudFwiKS5kZWZhdWx0fSAqLyAobWFwQnJvd3NlckV2ZW50KS5vcmlnaW5hbEV2ZW50O1xuICAgIGFzc2VydChwb2ludGVyRXZ0ICE9PSB1bmRlZmluZWQsIDU2KTsgLy8gbWFwQnJvd3NlckV2ZW50IG11c3Qgb3JpZ2luYXRlIGZyb20gYSBwb2ludGVyIGV2ZW50XG4gICAgLy8gc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzLyN3aWRsLVBvaW50ZXJFdmVudC1wb2ludGVyVHlwZVxuICAgIHJldHVybiBwb2ludGVyRXZ0LnBvaW50ZXJUeXBlID09PSAndG91Y2gnO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgZGlnaXRhbCBwZW4uXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgZGlnaXRhbCBwZW4uXG4gKiBAYXBpXG4gKi9cbmV4cG9ydCB2YXIgcGVuT25seSA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICB2YXIgcG9pbnRlckV2dCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdnQgIT09IHVuZGVmaW5lZCwgNTYpOyAvLyBtYXBCcm93c2VyRXZlbnQgbXVzdCBvcmlnaW5hdGUgZnJvbSBhIHBvaW50ZXIgZXZlbnRcbiAgICAvLyBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI3dpZGwtUG9pbnRlckV2ZW50LXBvaW50ZXJUeXBlXG4gICAgcmV0dXJuIHBvaW50ZXJFdnQucG9pbnRlclR5cGUgPT09ICdwZW4nO1xufTtcbi8qKlxuICogUmV0dXJuIGB0cnVlYCBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyIGluXG4gKiBjb250YWN0IHdpdGggdGhlIHN1cmZhY2Ugb3IgaWYgdGhlIGxlZnQgbW91c2UgYnV0dG9uIGlzIHByZXNzZWQuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL3BvaW50ZXJldmVudHMvI2J1dHRvbi1zdGF0ZXMuXG4gKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgZXZlbnQgb3JpZ2luYXRlcyBmcm9tIGEgcHJpbWFyeSBwb2ludGVyLlxuICogQGFwaVxuICovXG5leHBvcnQgdmFyIHByaW1hcnlBY3Rpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgdmFyIHBvaW50ZXJFdmVudCA9IC8qKiBAdHlwZSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50XCIpLmRlZmF1bHR9ICovIChtYXBCcm93c2VyRXZlbnQpLm9yaWdpbmFsRXZlbnQ7XG4gICAgYXNzZXJ0KHBvaW50ZXJFdmVudCAhPT0gdW5kZWZpbmVkLCA1Nik7IC8vIG1hcEJyb3dzZXJFdmVudCBtdXN0IG9yaWdpbmF0ZSBmcm9tIGEgcG9pbnRlciBldmVudFxuICAgIHJldHVybiBwb2ludGVyRXZlbnQuaXNQcmltYXJ5ICYmIHBvaW50ZXJFdmVudC5idXR0b24gPT09IDA7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZGl0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvaW50ZXJhY3Rpb24vRHJhZ1BhblxuICovXG5pbXBvcnQgUG9pbnRlckludGVyYWN0aW9uLCB7IGNlbnRyb2lkIGFzIGNlbnRyb2lkRnJvbVBvaW50ZXJzLCB9IGZyb20gJy4vUG9pbnRlci5qcyc7XG5pbXBvcnQgeyBGQUxTRSB9IGZyb20gJy4uL2Z1bmN0aW9ucy5qcyc7XG5pbXBvcnQgeyBhbGwsIGZvY3VzV2l0aFRhYmluZGV4LCBub01vZGlmaWVyS2V5cywgcHJpbWFyeUFjdGlvbiwgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7IGVhc2VPdXQgfSBmcm9tICcuLi9lYXNpbmcuanMnO1xuaW1wb3J0IHsgcm90YXRlIGFzIHJvdGF0ZUNvb3JkaW5hdGUsIHNjYWxlIGFzIHNjYWxlQ29vcmRpbmF0ZSwgfSBmcm9tICcuLi9jb29yZGluYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn0gW2NvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5ub01vZGlmaWVyS2V5c30gYW5kIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5wcmltYXJ5QWN0aW9ufS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW29uRm9jdXNPbmx5PWZhbHNlXSBXaGVuIHRoZSBtYXAncyB0YXJnZXQgaGFzIGEgYHRhYmluZGV4YCBhdHRyaWJ1dGUgc2V0LFxuICogdGhlIGludGVyYWN0aW9uIHdpbGwgb25seSBoYW5kbGUgZXZlbnRzIHdoZW4gdGhlIG1hcCBoYXMgdGhlIGZvY3VzLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9LaW5ldGljLmpzXCIpLmRlZmF1bHR9IFtraW5ldGljXSBLaW5ldGljIGluZXJ0aWEgdG8gYXBwbHkgdG8gdGhlIHBhbi5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gcGFuIHRoZSBtYXAgYnkgZHJhZ2dpbmcgdGhlIG1hcC5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdQYW4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdQYW4sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ1BhbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBzdG9wRG93bjogRkFMU0UsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL0tpbmV0aWMuanNcIikuZGVmYXVsdHx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5raW5ldGljXyA9IG9wdGlvbnMua2luZXRpYztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdFBvaW50ZXJzQ291bnRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wYW5uaW5nXyA9IGZhbHNlO1xuICAgICAgICB2YXIgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgICAgIDogYWxsKG5vTW9kaWZpZXJLZXlzLCBwcmltYXJ5QWN0aW9uKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLm9uRm9jdXNPbmx5XG4gICAgICAgICAgICA/IGFsbChmb2N1c1dpdGhUYWJpbmRleCwgY29uZGl0aW9uKVxuICAgICAgICAgICAgOiBjb25kaXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm5vS2luZXRpY18gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIXRoaXMucGFubmluZ18pIHtcbiAgICAgICAgICAgIHRoaXMucGFubmluZ18gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0YXJnZXRQb2ludGVycyA9IHRoaXMudGFyZ2V0UG9pbnRlcnM7XG4gICAgICAgIHZhciBjZW50cm9pZCA9IGNlbnRyb2lkRnJvbVBvaW50ZXJzKHRhcmdldFBvaW50ZXJzKTtcbiAgICAgICAgaWYgKHRhcmdldFBvaW50ZXJzLmxlbmd0aCA9PSB0aGlzLmxhc3RQb2ludGVyc0NvdW50Xykge1xuICAgICAgICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtpbmV0aWNfLnVwZGF0ZShjZW50cm9pZFswXSwgY2VudHJvaWRbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMubGFzdENlbnRyb2lkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RDZW50cm9pZFswXSAtIGNlbnRyb2lkWzBdLFxuICAgICAgICAgICAgICAgICAgICBjZW50cm9pZFsxXSAtIHRoaXMubGFzdENlbnRyb2lkWzFdLFxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICAgICAgICAgIHNjYWxlQ29vcmRpbmF0ZShkZWx0YSwgdmlldy5nZXRSZXNvbHV0aW9uKCkpO1xuICAgICAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgdmlldy5hZGp1c3RDZW50ZXJJbnRlcm5hbChkZWx0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgLy8gcmVzZXQgc28gd2UgZG9uJ3Qgb3ZlcmVzdGltYXRlIHRoZSBraW5ldGljIGVuZXJneSBhZnRlclxuICAgICAgICAgICAgLy8gYWZ0ZXIgb25lIGZpbmdlciBkb3duLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgZG93blxuICAgICAgICAgICAgdGhpcy5raW5ldGljXy5iZWdpbigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gY2VudHJvaWQ7XG4gICAgICAgIHRoaXMubGFzdFBvaW50ZXJzQ291bnRfID0gdGFyZ2V0UG9pbnRlcnMubGVuZ3RoO1xuICAgICAgICBtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdQYW4ucHJvdG90eXBlLmhhbmRsZVVwRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm5vS2luZXRpY18gJiYgdGhpcy5raW5ldGljXyAmJiB0aGlzLmtpbmV0aWNfLmVuZCgpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gdGhpcy5raW5ldGljXy5nZXREaXN0YW5jZSgpO1xuICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IHRoaXMua2luZXRpY18uZ2V0QW5nbGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gdmlldy5nZXRDZW50ZXJJbnRlcm5hbCgpO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJweCA9IG1hcC5nZXRQaXhlbEZyb21Db29yZGluYXRlSW50ZXJuYWwoY2VudGVyKTtcbiAgICAgICAgICAgICAgICB2YXIgZGVzdCA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoW1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXJweFswXSAtIGRpc3RhbmNlICogTWF0aC5jb3MoYW5nbGUpLFxuICAgICAgICAgICAgICAgICAgICBjZW50ZXJweFsxXSAtIGRpc3RhbmNlICogTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIHZpZXcuYW5pbWF0ZUludGVybmFsKHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB2aWV3LmdldENvbnN0cmFpbmVkQ2VudGVyKGRlc3QpLFxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2VPdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYW5uaW5nXykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFubmluZ18gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2aWV3LmVuZEludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5raW5ldGljXykge1xuICAgICAgICAgICAgICAgIC8vIHJlc2V0IHNvIHdlIGRvbid0IG92ZXJlc3RpbWF0ZSB0aGUga2luZXRpYyBlbmVyZ3kgYWZ0ZXJcbiAgICAgICAgICAgICAgICAvLyBhZnRlciBvbmUgZmluZ2VyIHVwLCB0aW55IGRyYWcsIHNlY29uZCBmaW5nZXIgdXBcbiAgICAgICAgICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxhc3RDZW50cm9pZCA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZG93biBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1Bhbi5wcm90b3R5cGUuaGFuZGxlRG93bkV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPiAwICYmIHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMubGFzdENlbnRyb2lkID0gbnVsbDtcbiAgICAgICAgICAgIC8vIHN0b3AgYW55IGN1cnJlbnQgYW5pbWF0aW9uXG4gICAgICAgICAgICBpZiAodmlldy5nZXRBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMua2luZXRpY18pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtpbmV0aWNfLmJlZ2luKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBObyBraW5ldGljIGFzIHNvb24gYXMgbW9yZSB0aGFuIG9uZSBwb2ludGVyIG9uIHRoZSBzY3JlZW4gaXNcbiAgICAgICAgICAgIC8vIGRldGVjdGVkLiBUaGlzIGlzIHRvIHByZXZlbnQgbmFzdHkgcGFucyBhZnRlciBwaW5jaC5cbiAgICAgICAgICAgIHRoaXMubm9LaW5ldGljXyA9IHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID4gMTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRHJhZ1Bhbjtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnUGFuO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1Bhbi5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVcbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuaW1wb3J0IHsgYWx0U2hpZnRLZXlzT25seSwgbW91c2VBY3Rpb25CdXR0b24sIG1vdXNlT25seSwgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7IGRpc2FibGUgfSBmcm9tICcuLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYSBib29sZWFuXG4gKiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5hbHRTaGlmdEtleXNPbmx5fS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byByb3RhdGUgdGhlIG1hcCBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmcgb24gdGhlIG1hcCxcbiAqIG5vcm1hbGx5IGNvbWJpbmVkIHdpdGggYW4ge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9ufSB0aGF0IGxpbWl0c1xuICogaXQgdG8gd2hlbiB0aGUgYWx0IGFuZCBzaGlmdCBrZXlzIGFyZSBoZWxkIGRvd24uXG4gKlxuICogVGhpcyBpbnRlcmFjdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBmb3IgbW91c2UgZGV2aWNlcy5cbiAqIEBhcGlcbiAqL1xudmFyIERyYWdSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdSb3RhdGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gRHJhZ1JvdGF0ZShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBzdG9wRG93bjogRkFMU0UsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jb25kaXRpb25fID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IGFsdFNoaWZ0S2V5c09ubHk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZHVyYXRpb25fID0gb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDI1MDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkcmFnIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAoIW1vdXNlT25seShtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcuZ2V0Q29uc3RyYWludHMoKS5yb3RhdGlvbiA9PT0gZGlzYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaXplID0gbWFwLmdldFNpemUoKTtcbiAgICAgICAgdmFyIG9mZnNldCA9IG1hcEJyb3dzZXJFdmVudC5waXhlbDtcbiAgICAgICAgdmFyIHRoZXRhID0gTWF0aC5hdGFuMihzaXplWzFdIC8gMiAtIG9mZnNldFsxXSwgb2Zmc2V0WzBdIC0gc2l6ZVswXSAvIDIpO1xuICAgICAgICBpZiAodGhpcy5sYXN0QW5nbGVfICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IHRoZXRhIC0gdGhpcy5sYXN0QW5nbGVfO1xuICAgICAgICAgICAgdmlldy5hZGp1c3RSb3RhdGlvbkludGVybmFsKC1kZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0QW5nbGVfID0gdGhldGE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ1JvdGF0ZS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdSb3RhdGUucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKCFtb3VzZU9ubHkobWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3VzZUFjdGlvbkJ1dHRvbihtYXBCcm93c2VyRXZlbnQpICYmXG4gICAgICAgICAgICB0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSkge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICBtYXAuZ2V0VmlldygpLmJlZ2luSW50ZXJhY3Rpb24oKTtcbiAgICAgICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gRHJhZ1JvdGF0ZTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnUm90YXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1JvdGF0ZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVuZGVyL0JveFxuICovXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuaW1wb3J0IERpc3Bvc2FibGUgZnJvbSAnLi4vRGlzcG9zYWJsZS5qcyc7XG5pbXBvcnQgUG9seWdvbiBmcm9tICcuLi9nZW9tL1BvbHlnb24uanMnO1xudmFyIFJlbmRlckJveCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUmVuZGVyQm94LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWUgQ1NTIGNsYXNzIG5hbWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUmVuZGVyQm94KGNsYXNzTmFtZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZ2VvbWV0cnlfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRGl2RWxlbWVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmVsZW1lbnRfID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIF90aGlzLmVsZW1lbnRfLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICAgICAgX3RoaXMuZWxlbWVudF8uY2xhc3NOYW1lID0gJ29sLWJveCAnICsgY2xhc3NOYW1lO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGFydFBpeGVsXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5lbmRQaXhlbF8gPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFuIHVwLlxuICAgICAqL1xuICAgIFJlbmRlckJveC5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldE1hcChudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5yZW5kZXJfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgICAgIHZhciBlbmRQaXhlbCA9IHRoaXMuZW5kUGl4ZWxfO1xuICAgICAgICB2YXIgcHggPSAncHgnO1xuICAgICAgICB2YXIgc3R5bGUgPSB0aGlzLmVsZW1lbnRfLnN0eWxlO1xuICAgICAgICBzdHlsZS5sZWZ0ID0gTWF0aC5taW4oc3RhcnRQaXhlbFswXSwgZW5kUGl4ZWxbMF0pICsgcHg7XG4gICAgICAgIHN0eWxlLnRvcCA9IE1hdGgubWluKHN0YXJ0UGl4ZWxbMV0sIGVuZFBpeGVsWzFdKSArIHB4O1xuICAgICAgICBzdHlsZS53aWR0aCA9IE1hdGguYWJzKGVuZFBpeGVsWzBdIC0gc3RhcnRQaXhlbFswXSkgKyBweDtcbiAgICAgICAgc3R5bGUuaGVpZ2h0ID0gTWF0aC5hYnMoZW5kUGl4ZWxbMV0gLSBzdGFydFBpeGVsWzFdKSArIHB4O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9QbHVnZ2FibGVNYXAuanNcIikuZGVmYXVsdH0gbWFwIE1hcC5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLnNldE1hcCA9IGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgaWYgKHRoaXMubWFwXykge1xuICAgICAgICAgICAgdGhpcy5tYXBfLmdldE92ZXJsYXlDb250YWluZXIoKS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnRfKTtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IHRoaXMuZWxlbWVudF8uc3R5bGU7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gJ2luaGVyaXQnO1xuICAgICAgICAgICAgc3R5bGUudG9wID0gJ2luaGVyaXQnO1xuICAgICAgICAgICAgc3R5bGUud2lkdGggPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICBzdHlsZS5oZWlnaHQgPSAnaW5oZXJpdCc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXBfID0gbWFwO1xuICAgICAgICBpZiAodGhpcy5tYXBfKSB7XG4gICAgICAgICAgICB0aGlzLm1hcF8uZ2V0T3ZlcmxheUNvbnRhaW5lcigpLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudF8pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBzdGFydFBpeGVsIFN0YXJ0IHBpeGVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IGVuZFBpeGVsIEVuZCBwaXhlbC5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLnNldFBpeGVscyA9IGZ1bmN0aW9uIChzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgICAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gc3RhcnRQaXhlbDtcbiAgICAgICAgdGhpcy5lbmRQaXhlbF8gPSBlbmRQaXhlbDtcbiAgICAgICAgdGhpcy5jcmVhdGVPclVwZGF0ZUdlb21ldHJ5KCk7XG4gICAgICAgIHRoaXMucmVuZGVyXygpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBvciB1cGRhdGVzIHRoZSBjYWNoZWQgZ2VvbWV0cnkuXG4gICAgICovXG4gICAgUmVuZGVyQm94LnByb3RvdHlwZS5jcmVhdGVPclVwZGF0ZUdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3RhcnRQaXhlbCA9IHRoaXMuc3RhcnRQaXhlbF87XG4gICAgICAgIHZhciBlbmRQaXhlbCA9IHRoaXMuZW5kUGl4ZWxfO1xuICAgICAgICB2YXIgcGl4ZWxzID0gW1xuICAgICAgICAgICAgc3RhcnRQaXhlbCxcbiAgICAgICAgICAgIFtzdGFydFBpeGVsWzBdLCBlbmRQaXhlbFsxXV0sXG4gICAgICAgICAgICBlbmRQaXhlbCxcbiAgICAgICAgICAgIFtlbmRQaXhlbFswXSwgc3RhcnRQaXhlbFsxXV0sXG4gICAgICAgIF07XG4gICAgICAgIHZhciBjb29yZGluYXRlcyA9IHBpeGVscy5tYXAodGhpcy5tYXBfLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbCwgdGhpcy5tYXBfKTtcbiAgICAgICAgLy8gY2xvc2UgdGhlIHBvbHlnb25cbiAgICAgICAgY29vcmRpbmF0ZXNbNF0gPSBjb29yZGluYXRlc1swXS5zbGljZSgpO1xuICAgICAgICBpZiAoIXRoaXMuZ2VvbWV0cnlfKSB7XG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5XyA9IG5ldyBQb2x5Z29uKFtjb29yZGluYXRlc10pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeV8uc2V0Q29vcmRpbmF0ZXMoW2Nvb3JkaW5hdGVzXSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeS5cbiAgICAgKi9cbiAgICBSZW5kZXJCb3gucHJvdG90eXBlLmdldEdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW9tZXRyeV87XG4gICAgfTtcbiAgICByZXR1cm4gUmVuZGVyQm94O1xufShEaXNwb3NhYmxlKSk7XG5leHBvcnQgZGVmYXVsdCBSZW5kZXJCb3g7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Cb3guanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9EcmFnQm94XG4gKi9cbi8vIEZJWE1FIGRyYXcgZHJhZyBib3hcbmltcG9ydCBFdmVudCBmcm9tICcuLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IFJlbmRlckJveCBmcm9tICcuLi9yZW5kZXIvQm94LmpzJztcbmltcG9ydCB7IG1vdXNlQWN0aW9uQnV0dG9uIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgYW5kIHJldHVybnMgYSBge2Jvb2xlYW59YC4gSWYgdGhlIGNvbmRpdGlvbiBpcyBtZXQsXG4gKiB0cnVlIHNob3VsZCBiZSByZXR1cm5lZC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbih0aGlzOiA/LCBpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdCwgaW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWwsIGltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsKTpib29sZWFufSBFbmRDb25kaXRpb25cbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ2JveCddIENTUyBjbGFzcyBuYW1lIGZvciBzdHlsaW5nIHRoZSBib3guXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhIGJvb2xlYW5cbiAqIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG9sL2V2ZW50cy9jb25kaXRpb25+bW91c2VBY3Rpb25CdXR0b259LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5BcmVhPTY0XSBUaGUgbWluaW11bSBhcmVhIG9mIHRoZSBib3ggaW4gcGl4ZWwsIHRoaXMgdmFsdWUgaXMgdXNlZCBieSB0aGUgZGVmYXVsdFxuICogYGJveEVuZENvbmRpdGlvbmAgZnVuY3Rpb24uXG4gKiBAcHJvcGVydHkge0VuZENvbmRpdGlvbn0gW2JveEVuZENvbmRpdGlvbl0gQSBmdW5jdGlvbiB0aGF0IHRha2VzIGEge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgdHdvXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3BpeGVsflBpeGVsfXMgdG8gaW5kaWNhdGUgd2hldGhlciBhIGBib3hlbmRgIGV2ZW50IHNob3VsZCBiZSBmaXJlZC5cbiAqIERlZmF1bHQgaXMgYHRydWVgIGlmIHRoZSBhcmVhIG9mIHRoZSBib3ggaXMgYmlnZ2VyIHRoYW4gdGhlIGBtaW5BcmVhYCBvcHRpb24uXG4gKiBAcHJvcGVydHkge2Z1bmN0aW9uKHRoaXM6RHJhZ0JveCwgaW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHQpOnZvaWR9IFtvbkJveEVuZF0gQ29kZSB0byBleGVjdXRlIGp1c3RcbiAqIGJlZm9yZSBgYm94ZW5kYCBpcyBmaXJlZC5cbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG52YXIgRHJhZ0JveEV2ZW50VHlwZSA9IHtcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgdXBvbiBkcmFnIGJveCBzdGFydC5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveHN0YXJ0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWFNUQVJUOiAnYm94c3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCBvbiBkcmFnIHdoZW4gYm94IGlzIGFjdGl2ZS5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGRyYWdcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgQk9YRFJBRzogJ2JveGRyYWcnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IGVuZC5cbiAgICAgKiBAZXZlbnQgRHJhZ0JveEV2ZW50I2JveGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBCT1hFTkQ6ICdib3hlbmQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB1cG9uIGRyYWcgYm94IGNhbmNlbGVkLlxuICAgICAqIEBldmVudCBEcmFnQm94RXZlbnQjYm94Y2FuY2VsXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEJPWENBTkNFTDogJ2JveGNhbmNlbCcsXG59O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBFdmVudHMgZW1pdHRlZCBieSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdCb3h+RHJhZ0JveH0gaW5zdGFuY2VzIGFyZSBpbnN0YW5jZXMgb2ZcbiAqIHRoaXMgdHlwZS5cbiAqL1xudmFyIERyYWdCb3hFdmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRHJhZ0JveEV2ZW50LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFRoZSBldmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfSBjb29yZGluYXRlIFRoZSBldmVudCBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBPcmlnaW5hdGluZyBldmVudC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEcmFnQm94RXZlbnQodHlwZSwgY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHR5cGUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY29vcmRpbmF0ZSBvZiB0aGUgZHJhZyBldmVudC5cbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGNvbnN0XG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICogQGFwaVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubWFwQnJvd3NlckV2ZW50ID0gbWFwQnJvd3NlckV2ZW50O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBEcmFnQm94RXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBEcmFnQm94RXZlbnQgfTtcbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlcywgaW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZScsIGltcG9ydChcIi4uL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8J2JveGNhbmNlbCd8J2JveGRyYWcnfCdib3hlbmQnLCBEcmFnQm94RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmFjdGl2ZSd8J2JveGNhbmNlbCd8J2JveGRyYWcnfCdib3hlbmQnLCBSZXR1cm4+fSBEcmFnQm94T25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gZHJhdyBhIHZlY3RvciBib3ggYnkgY2xpY2tpbmcgYW5kIGRyYWdnaW5nIG9uIHRoZSBtYXAsXG4gKiBub3JtYWxseSBjb21iaW5lZCB3aXRoIGFuIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbn0gdGhhdCBsaW1pdHNcbiAqIGl0IHRvIHdoZW4gdGhlIHNoaWZ0IG9yIG90aGVyIGtleSBpcyBoZWxkIGRvd24uIFRoaXMgaXMgdXNlZCwgZm9yIGV4YW1wbGUsXG4gKiBmb3Igem9vbWluZyB0byBhIHNwZWNpZmljIGFyZWEgb2YgdGhlIG1hcFxuICogKHNlZSB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RyYWdab29tfkRyYWdab29tfSBhbmRcbiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZUFuZFpvb219KS5cbiAqXG4gKiBAZmlyZXMgRHJhZ0JveEV2ZW50XG4gKiBAYXBpXG4gKi9cbnZhciBEcmFnQm94ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhEcmFnQm94LCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdCb3gob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7RHJhZ0JveE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0RyYWdCb3hPblNpZ25hdHVyZTx2b2lkPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVuO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9yZW5kZXIvQm94LmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hfID0gbmV3IFJlbmRlckJveChvcHRpb25zLmNsYXNzTmFtZSB8fCAnb2wtZHJhZ2JveCcpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1pbkFyZWFfID0gb3B0aW9ucy5taW5BcmVhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1pbkFyZWEgOiA2NDtcbiAgICAgICAgaWYgKG9wdGlvbnMub25Cb3hFbmQpIHtcbiAgICAgICAgICAgIF90aGlzLm9uQm94RW5kID0gb3B0aW9ucy5vbkJveEVuZDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRQaXhlbF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29uZGl0aW9uXyA9IG9wdGlvbnMuY29uZGl0aW9uID8gb3B0aW9ucy5jb25kaXRpb24gOiBtb3VzZUFjdGlvbkJ1dHRvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtFbmRDb25kaXRpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ib3hFbmRDb25kaXRpb25fID0gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgID8gb3B0aW9ucy5ib3hFbmRDb25kaXRpb25cbiAgICAgICAgICAgIDogX3RoaXMuZGVmYXVsdEJveEVuZENvbmRpdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCBjb25kaXRpb24gZm9yIGRldGVybWluaW5nIHdoZXRoZXIgdGhlIGJveGVuZCBldmVudFxuICAgICAqIHNob3VsZCBmaXJlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBUaGUgb3JpZ2luYXRpbmcgTWFwQnJvd3NlckV2ZW50XG4gICAgICogICAgIGxlYWRpbmcgdG8gdGhlIGJveCBlbmQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9waXhlbC5qc1wiKS5QaXhlbH0gc3RhcnRQaXhlbCBUaGUgc3RhcnRpbmcgcGl4ZWwgb2YgdGhlIGJveC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3BpeGVsLmpzXCIpLlBpeGVsfSBlbmRQaXhlbCBUaGUgZW5kIHBpeGVsIG9mIHRoZSBib3guXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciBvciBub3QgdGhlIGJveGVuZCBjb25kaXRpb24gc2hvdWxkIGJlIGZpcmVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmRlZmF1bHRCb3hFbmRDb25kaXRpb24gPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50LCBzdGFydFBpeGVsLCBlbmRQaXhlbCkge1xuICAgICAgICB2YXIgd2lkdGggPSBlbmRQaXhlbFswXSAtIHN0YXJ0UGl4ZWxbMF07XG4gICAgICAgIHZhciBoZWlnaHQgPSBlbmRQaXhlbFsxXSAtIHN0YXJ0UGl4ZWxbMV07XG4gICAgICAgIHJldHVybiB3aWR0aCAqIHdpZHRoICsgaGVpZ2h0ICogaGVpZ2h0ID49IHRoaXMubWluQXJlYV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGdlb21ldHJ5IG9mIGxhc3QgZHJhd24gYm94LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2dlb20vUG9seWdvbi5qc1wiKS5kZWZhdWx0fSBHZW9tZXRyeS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuZ2V0R2VvbWV0cnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJveF8uZ2V0R2VvbWV0cnkoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBEcmFnQm94LnByb3RvdHlwZS5oYW5kbGVEcmFnRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoRHJhZ0JveEV2ZW50VHlwZS5CT1hEUkFHLCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciB1cCBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IElmIHRoZSBldmVudCB3YXMgY29uc3VtZWQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgdGhpcy5ib3hfLnNldE1hcChudWxsKTtcbiAgICAgICAgdmFyIGNvbXBsZXRlQm94ID0gdGhpcy5ib3hFbmRDb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCwgdGhpcy5zdGFydFBpeGVsXywgbWFwQnJvd3NlckV2ZW50LnBpeGVsKTtcbiAgICAgICAgaWYgKGNvbXBsZXRlQm94KSB7XG4gICAgICAgICAgICB0aGlzLm9uQm94RW5kKG1hcEJyb3dzZXJFdmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBEcmFnQm94RXZlbnQoY29tcGxldGVCb3ggPyBEcmFnQm94RXZlbnRUeXBlLkJPWEVORCA6IERyYWdCb3hFdmVudFR5cGUuQk9YQ0FOQ0VMLCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIERyYWdCb3gucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9uXyhtYXBCcm93c2VyRXZlbnQpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0UGl4ZWxfID0gbWFwQnJvd3NlckV2ZW50LnBpeGVsO1xuICAgICAgICAgICAgdGhpcy5ib3hfLnNldE1hcChtYXBCcm93c2VyRXZlbnQubWFwKTtcbiAgICAgICAgICAgIHRoaXMuYm94Xy5zZXRQaXhlbHModGhpcy5zdGFydFBpeGVsXywgdGhpcy5zdGFydFBpeGVsXyk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IERyYWdCb3hFdmVudChEcmFnQm94RXZlbnRUeXBlLkJPWFNUQVJULCBtYXBCcm93c2VyRXZlbnQuY29vcmRpbmF0ZSwgbWFwQnJvd3NlckV2ZW50KSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBqdXN0IGJlZm9yZSBgb25ib3hlbmRgIGlzIGZpcmVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ0JveC5wcm90b3R5cGUub25Cb3hFbmQgPSBmdW5jdGlvbiAoZXZlbnQpIHsgfTtcbiAgICByZXR1cm4gRHJhZ0JveDtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBEcmFnQm94O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ0JveC5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL0RyYWdab29tXG4gKi9cbmltcG9ydCBEcmFnQm94IGZyb20gJy4vRHJhZ0JveC5qcyc7XG5pbXBvcnQgeyBlYXNlT3V0IH0gZnJvbSAnLi4vZWFzaW5nLmpzJztcbmltcG9ydCB7IHNoaWZ0S2V5T25seSB9IGZyb20gJy4uL2V2ZW50cy9jb25kaXRpb24uanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2NsYXNzTmFtZT0nb2wtZHJhZ3pvb20nXSBDU1MgY2xhc3MgbmFtZSBmb3Igc3R5bGluZyB0aGVcbiAqIGJveC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC5cbiAqIERlZmF1bHQgaXMge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLnNoaWZ0S2V5T25seX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTIwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW291dD1mYWxzZV0gVXNlIGludGVyYWN0aW9uIGZvciB6b29taW5nIG91dC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWluQXJlYT02NF0gVGhlIG1pbmltdW0gYXJlYSBvZiB0aGUgYm94IGluIHBpeGVsLCB0aGlzIHZhbHVlIGlzIHVzZWQgYnkgdGhlIHBhcmVudCBkZWZhdWx0XG4gKiBgYm94RW5kQ29uZGl0aW9uYCBmdW5jdGlvbi5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IGNsaWNraW5nIGFuZCBkcmFnZ2luZyBvbiB0aGUgbWFwLFxuICogbm9ybWFsbHkgY29tYmluZWQgd2l0aCBhbiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb259IHRoYXQgbGltaXRzXG4gKiBpdCB0byB3aGVuIGEga2V5LCBzaGlmdCBieSBkZWZhdWx0LCBpcyBoZWxkIGRvd24uXG4gKlxuICogVG8gY2hhbmdlIHRoZSBzdHlsZSBvZiB0aGUgYm94LCB1c2UgQ1NTIGFuZCB0aGUgYC5vbC1kcmFnem9vbWAgc2VsZWN0b3IsIG9yXG4gKiB5b3VyIGN1c3RvbSBvbmUgY29uZmlndXJlZCB3aXRoIGBjbGFzc05hbWVgLlxuICogQGFwaVxuICovXG52YXIgRHJhZ1pvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERyYWdab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIERyYWdab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IHNoaWZ0S2V5T25seTtcbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvbixcbiAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9ucy5jbGFzc05hbWUgfHwgJ29sLWRyYWd6b29tJyxcbiAgICAgICAgICAgIG1pbkFyZWE6IG9wdGlvbnMubWluQXJlYSxcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vdXRfID0gb3B0aW9ucy5vdXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMub3V0IDogZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdG8gZXhlY3V0ZSBqdXN0IGJlZm9yZSBgb25ib3hlbmRgIGlzIGZpcmVkXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gZXZlbnQgRXZlbnQuXG4gICAgICovXG4gICAgRHJhZ1pvb20ucHJvdG90eXBlLm9uQm94RW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBtYXAgPSB0aGlzLmdldE1hcCgpO1xuICAgICAgICB2YXIgdmlldyA9IC8qKiBAdHlwZSB7IWltcG9ydChcIi4uL1ZpZXcuanNcIikuZGVmYXVsdH0gKi8gKG1hcC5nZXRWaWV3KCkpO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KCk7XG4gICAgICAgIGlmICh0aGlzLm91dF8pIHtcbiAgICAgICAgICAgIHZhciByb3RhdGVkRXh0ZW50ID0gdmlldy5yb3RhdGVkRXh0ZW50Rm9yR2VvbWV0cnkoZ2VvbWV0cnkpO1xuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSB2aWV3LmdldFJlc29sdXRpb25Gb3JFeHRlbnRJbnRlcm5hbChyb3RhdGVkRXh0ZW50KTtcbiAgICAgICAgICAgIHZhciBmYWN0b3IgPSB2aWV3LmdldFJlc29sdXRpb24oKSAvIHJlc29sdXRpb247XG4gICAgICAgICAgICBnZW9tZXRyeSA9IGdlb21ldHJ5LmNsb25lKCk7XG4gICAgICAgICAgICBnZW9tZXRyeS5zY2FsZShmYWN0b3IgKiBmYWN0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHZpZXcuZml0SW50ZXJuYWwoZ2VvbWV0cnksIHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLmR1cmF0aW9uXyxcbiAgICAgICAgICAgIGVhc2luZzogZWFzZU91dCxcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gRHJhZ1pvb207XG59KERyYWdCb3gpKTtcbmV4cG9ydCBkZWZhdWx0IERyYWdab29tO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RHJhZ1pvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFBhblxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEludGVyYWN0aW9uLCB7IHBhbiB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IEtleUNvZGUgZnJvbSAnLi4vZXZlbnRzL0tleUNvZGUuanMnO1xuaW1wb3J0IHsgbm9Nb2RpZmllcktleXMsIHRhcmdldE5vdEVkaXRhYmxlIH0gZnJvbSAnLi4vZXZlbnRzL2NvbmRpdGlvbi5qcyc7XG5pbXBvcnQgeyByb3RhdGUgYXMgcm90YXRlQ29vcmRpbmF0ZSB9IGZyb20gJy4uL2Nvb3JkaW5hdGUuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi5ub01vZGlmaWVyS2V5c30gYW5kXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2V2ZW50cy9jb25kaXRpb24udGFyZ2V0Tm90RWRpdGFibGV9LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BpeGVsRGVsdGE9MTI4XSBUaGUgYW1vdW50IG9mIHBpeGVscyB0byBwYW4gb24gZWFjaCBrZXlcbiAqIHByZXNzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byBwYW4gdGhlIG1hcCB1c2luZyBrZXlib2FyZCBhcnJvd3MuXG4gKiBOb3RlIHRoYXQsIGFsdGhvdWdoIHRoaXMgaW50ZXJhY3Rpb24gaXMgYnkgZGVmYXVsdCBpbmNsdWRlZCBpbiBtYXBzLFxuICogdGhlIGtleXMgY2FuIG9ubHkgYmUgdXNlZCB3aGVuIGJyb3dzZXIgZm9jdXMgaXMgb24gdGhlIGVsZW1lbnQgdG8gd2hpY2hcbiAqIHRoZSBrZXlib2FyZCBldmVudHMgYXJlIGF0dGFjaGVkLiBCeSBkZWZhdWx0LCB0aGlzIGlzIHRoZSBtYXAgZGl2LFxuICogdGhvdWdoIHlvdSBjYW4gY2hhbmdlIHRoaXMgd2l0aCB0aGUgYGtleWJvYXJkRXZlbnRUYXJnZXRgIGluXG4gKiB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9LiBgZG9jdW1lbnRgIG5ldmVyIGxvc2VzIGZvY3VzIGJ1dCwgZm9yIGFueSBvdGhlclxuICogZWxlbWVudCwgZm9jdXMgd2lsbCBoYXZlIHRvIGJlIG9uLCBhbmQgcmV0dXJuZWQgdG8sIHRoaXMgZWxlbWVudCBpZiB0aGUga2V5c1xuICogYXJlIHRvIGZ1bmN0aW9uLlxuICogU2VlIGFsc28ge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21+S2V5Ym9hcmRab29tfS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkUGFuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhLZXlib2FyZFBhbiwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IFtvcHRfb3B0aW9uc10gT3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBLZXlib2FyZFBhbihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENvbWJpbmVkIGNvbmRpdGlvbiByZXN1bHQuXG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kZWZhdWx0Q29uZGl0aW9uXyA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAobm9Nb2RpZmllcktleXMobWFwQnJvd3NlckV2ZW50KSAmJiB0YXJnZXROb3RFZGl0YWJsZShtYXBCcm93c2VyRXZlbnQpKTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy5jb25kaXRpb24gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5jb25kaXRpb25cbiAgICAgICAgICAgICAgICA6IF90aGlzLmRlZmF1bHRDb25kaXRpb25fO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxEZWx0YV8gPVxuICAgICAgICAgICAgb3B0aW9ucy5waXhlbERlbHRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpeGVsRGVsdGEgOiAxMjg7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gICAgICogYEtleUV2ZW50YCwgYW5kIGRlY2lkZXMgdGhlIGRpcmVjdGlvbiB0byBwYW4gdG8gKGlmIGFuIGFycm93IGtleSB3YXNcbiAgICAgKiBwcmVzc2VkKS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgTWFwIGJyb3dzZXIgZXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYGZhbHNlYCB0byBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uLlxuICAgICAqIEB0aGlzIHtLZXlib2FyZFBhbn1cbiAgICAgKi9cbiAgICBLZXlib2FyZFBhbi5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIHZhciBzdG9wRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKG1hcEJyb3dzZXJFdmVudC50eXBlID09IEV2ZW50VHlwZS5LRVlET1dOKSB7XG4gICAgICAgICAgICB2YXIga2V5RXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIga2V5Q29kZSA9IGtleUV2ZW50LmtleUNvZGU7XG4gICAgICAgICAgICBpZiAodGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkgJiZcbiAgICAgICAgICAgICAgICAoa2V5Q29kZSA9PSBLZXlDb2RlLkRPV04gfHxcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLkxFRlQgfHxcbiAgICAgICAgICAgICAgICAgICAga2V5Q29kZSA9PSBLZXlDb2RlLlJJR0hUIHx8XG4gICAgICAgICAgICAgICAgICAgIGtleUNvZGUgPT0gS2V5Q29kZS5VUCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICAgICAgdmFyIG1hcFVuaXRzRGVsdGEgPSB2aWV3LmdldFJlc29sdXRpb24oKSAqIHRoaXMucGl4ZWxEZWx0YV87XG4gICAgICAgICAgICAgICAgdmFyIGRlbHRhWCA9IDAsIGRlbHRhWSA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGtleUNvZGUgPT0gS2V5Q29kZS5ET1dOKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWSA9IC1tYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChrZXlDb2RlID09IEtleUNvZGUuTEVGVCkge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVggPSAtbWFwVW5pdHNEZWx0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoa2V5Q29kZSA9PSBLZXlDb2RlLlJJR0hUKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhWCA9IG1hcFVuaXRzRGVsdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWx0YVkgPSBtYXBVbml0c0RlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBbZGVsdGFYLCBkZWx0YVldO1xuICAgICAgICAgICAgICAgIHJvdGF0ZUNvb3JkaW5hdGUoZGVsdGEsIHZpZXcuZ2V0Um90YXRpb24oKSk7XG4gICAgICAgICAgICAgICAgcGFuKHZpZXcsIGRlbHRhLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICAgICAga2V5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIEtleWJvYXJkUGFuO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgS2V5Ym9hcmRQYW47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlib2FyZFBhbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvZXZlbnRzL0tleUNvZGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQGNvbnN0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBMRUZUOiAzNyxcbiAgICBVUDogMzgsXG4gICAgUklHSFQ6IDM5LFxuICAgIERPV046IDQwLFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleUNvZGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb21cbiAqL1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbnRlcmFjdGlvbiwgeyB6b29tQnlEZWx0YSB9IGZyb20gJy4vSW50ZXJhY3Rpb24uanMnO1xuaW1wb3J0IHsgdGFyZ2V0Tm90RWRpdGFibGUgfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkdXJhdGlvbj0xMDBdIEFuaW1hdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL2V2ZW50cy9jb25kaXRpb24uanNcIikuQ29uZGl0aW9ufSBbY29uZGl0aW9uXSBBIGZ1bmN0aW9uIHRoYXRcbiAqIHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvTWFwQnJvd3NlckV2ZW50fk1hcEJyb3dzZXJFdmVudH0gYW5kIHJldHVybnMgYVxuICogYm9vbGVhbiB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoYXQgZXZlbnQgc2hvdWxkIGJlIGhhbmRsZWQuIERlZmF1bHQgaXNcbiAqIHtAbGluayBtb2R1bGU6b2wvZXZlbnRzL2NvbmRpdGlvbi50YXJnZXROb3RFZGl0YWJsZX0uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2RlbHRhPTFdIFRoZSB6b29tIGxldmVsIGRlbHRhIG9uIGVhY2gga2V5IHByZXNzLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFsbG93cyB0aGUgdXNlciB0byB6b29tIHRoZSBtYXAgdXNpbmcga2V5Ym9hcmQgKyBhbmQgLS5cbiAqIE5vdGUgdGhhdCwgYWx0aG91Z2ggdGhpcyBpbnRlcmFjdGlvbiBpcyBieSBkZWZhdWx0IGluY2x1ZGVkIGluIG1hcHMsXG4gKiB0aGUga2V5cyBjYW4gb25seSBiZSB1c2VkIHdoZW4gYnJvd3NlciBmb2N1cyBpcyBvbiB0aGUgZWxlbWVudCB0byB3aGljaFxuICogdGhlIGtleWJvYXJkIGV2ZW50cyBhcmUgYXR0YWNoZWQuIEJ5IGRlZmF1bHQsIHRoaXMgaXMgdGhlIG1hcCBkaXYsXG4gKiB0aG91Z2ggeW91IGNhbiBjaGFuZ2UgdGhpcyB3aXRoIHRoZSBga2V5Ym9hcmRFdmVudFRhcmdldGAgaW5cbiAqIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0uIGBkb2N1bWVudGAgbmV2ZXIgbG9zZXMgZm9jdXMgYnV0LCBmb3IgYW55IG90aGVyXG4gKiBlbGVtZW50LCBmb2N1cyB3aWxsIGhhdmUgdG8gYmUgb24sIGFuZCByZXR1cm5lZCB0bywgdGhpcyBlbGVtZW50IGlmIHRoZSBrZXlzXG4gKiBhcmUgdG8gZnVuY3Rpb24uXG4gKiBTZWUgYWxzbyB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0tleWJvYXJkUGFufktleWJvYXJkUGFufS5cbiAqIEBhcGlcbiAqL1xudmFyIEtleWJvYXJkWm9vbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoS2V5Ym9hcmRab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEtleWJvYXJkWm9vbShvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLmNvbmRpdGlvbiA/IG9wdGlvbnMuY29uZGl0aW9uIDogdGFyZ2V0Tm90RWRpdGFibGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZGVsdGFfID0gb3B0aW9ucy5kZWx0YSA/IG9wdGlvbnMuZGVsdGEgOiAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAxMDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IGlmIGl0IHdhcyBhXG4gICAgICogYEtleUV2ZW50YCwgYW5kIGRlY2lkZXMgd2hldGhlciB0byB6b29tIGluIG9yIG91dCAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlXG4gICAgICoga2V5IHByZXNzZWQgd2FzICcrJyBvciAnLScpLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBNYXAgYnJvd3NlciBldmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgZmFsc2VgIHRvIHN0b3AgZXZlbnQgcHJvcGFnYXRpb24uXG4gICAgICogQHRoaXMge0tleWJvYXJkWm9vbX1cbiAgICAgKi9cbiAgICBLZXlib2FyZFpvb20ucHJvdG90eXBlLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc3RvcEV2ZW50ID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuS0VZRE9XTiB8fFxuICAgICAgICAgICAgbWFwQnJvd3NlckV2ZW50LnR5cGUgPT0gRXZlbnRUeXBlLktFWVBSRVNTKSB7XG4gICAgICAgICAgICB2YXIga2V5RXZlbnQgPSAvKiogQHR5cGUge0tleWJvYXJkRXZlbnR9ICovIChtYXBCcm93c2VyRXZlbnQub3JpZ2luYWxFdmVudCk7XG4gICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBrZXlFdmVudC5jaGFyQ29kZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmRpdGlvbl8obWFwQnJvd3NlckV2ZW50KSAmJlxuICAgICAgICAgICAgICAgIChjaGFyQ29kZSA9PSAnKycuY2hhckNvZGVBdCgwKSB8fCBjaGFyQ29kZSA9PSAnLScuY2hhckNvZGVBdCgwKSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBjaGFyQ29kZSA9PSAnKycuY2hhckNvZGVBdCgwKSA/IHRoaXMuZGVsdGFfIDogLXRoaXMuZGVsdGFfO1xuICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgICAgICB6b29tQnlEZWx0YSh2aWV3LCBkZWx0YSwgdW5kZWZpbmVkLCB0aGlzLmR1cmF0aW9uXyk7XG4gICAgICAgICAgICAgICAga2V5RXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhc3RvcEV2ZW50O1xuICAgIH07XG4gICAgcmV0dXJuIEtleWJvYXJkWm9vbTtcbn0oSW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IEtleWJvYXJkWm9vbTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUtleWJvYXJkWm9vbS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvS2luZXRpY1xuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudGF0aW9uIG9mIGluZXJ0aWFsIGRlY2VsZXJhdGlvbiBmb3IgbWFwIG1vdmVtZW50LlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIEtpbmV0aWMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlY2F5IFJhdGUgb2YgZGVjYXkgKG11c3QgYmUgbmVnYXRpdmUpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5WZWxvY2l0eSBNaW5pbXVtIHZlbG9jaXR5IChwaXhlbHMvbWlsbGlzZWNvbmQpLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheSBEZWxheSB0byBjb25zaWRlciB0byBjYWxjdWxhdGUgdGhlIGtpbmV0aWNcbiAgICAgKiAgICAgaW5pdGlhbCB2YWx1ZXMgKG1pbGxpc2Vjb25kcykuXG4gICAgICovXG4gICAgZnVuY3Rpb24gS2luZXRpYyhkZWNheSwgbWluVmVsb2NpdHksIGRlbGF5KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kZWNheV8gPSBkZWNheTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblZlbG9jaXR5XyA9IG1pblZlbG9jaXR5O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGVsYXlfID0gZGVsYXk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyPn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucG9pbnRzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5nbGVfID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluaXRpYWxWZWxvY2l0eV8gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5wb2ludHNfLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuYW5nbGVfID0gMDtcbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gMDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB0aGlzLnBvaW50c18ucHVzaCh4LCB5LCBEYXRlLm5vdygpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgd2Ugc2hvdWxkIGRvIGtpbmV0aWMgYW5pbWF0aW9uLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9pbnRzXy5sZW5ndGggPCA2KSB7XG4gICAgICAgICAgICAvLyBhdCBsZWFzdCAyIHBvaW50cyBhcmUgcmVxdWlyZWQgKGkuZS4gdGhlcmUgbXVzdCBiZSBhdCBsZWFzdCA2IGVsZW1lbnRzXG4gICAgICAgICAgICAvLyBpbiB0aGUgYXJyYXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbGF5ID0gRGF0ZS5ub3coKSAtIHRoaXMuZGVsYXlfO1xuICAgICAgICB2YXIgbGFzdEluZGV4ID0gdGhpcy5wb2ludHNfLmxlbmd0aCAtIDM7XG4gICAgICAgIGlmICh0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMl0gPCBkZWxheSkge1xuICAgICAgICAgICAgLy8gdGhlIGxhc3QgdHJhY2tlZCBwb2ludCBpcyB0b28gb2xkLCB3aGljaCBtZWFucyB0aGF0IHRoZSB1c2VyIHN0b3BwZWRcbiAgICAgICAgICAgIC8vIHBhbm5pbmcgYmVmb3JlIHJlbGVhc2luZyB0aGUgbWFwXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2V0IHRoZSBmaXJzdCBwb2ludCB3aGljaCBzdGlsbCBmYWxscyBpbnRvIHRoZSBkZWxheSB0aW1lXG4gICAgICAgIHZhciBmaXJzdEluZGV4ID0gbGFzdEluZGV4IC0gMztcbiAgICAgICAgd2hpbGUgKGZpcnN0SW5kZXggPiAwICYmIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl0gPiBkZWxheSkge1xuICAgICAgICAgICAgZmlyc3RJbmRleCAtPSAzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXggKyAyXSAtIHRoaXMucG9pbnRzX1tmaXJzdEluZGV4ICsgMl07XG4gICAgICAgIC8vIHdlIGRvbid0IHdhbnQgYSBkdXJhdGlvbiBvZiAwIChkaXZpZGUgYnkgemVybylcbiAgICAgICAgLy8gd2UgYWxzbyBtYWtlIHN1cmUgdGhlIHVzZXIgcGFubmVkIGZvciBhIGR1cmF0aW9uIG9mIGF0IGxlYXN0IG9uZSBmcmFtZVxuICAgICAgICAvLyAoMS82MHMpIHRvIGNvbXB1dGUgc2FuZSBkaXNwbGFjZW1lbnQgdmFsdWVzXG4gICAgICAgIGlmIChkdXJhdGlvbiA8IDEwMDAgLyA2MCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkeCA9IHRoaXMucG9pbnRzX1tsYXN0SW5kZXhdIC0gdGhpcy5wb2ludHNfW2ZpcnN0SW5kZXhdO1xuICAgICAgICB2YXIgZHkgPSB0aGlzLnBvaW50c19bbGFzdEluZGV4ICsgMV0gLSB0aGlzLnBvaW50c19bZmlyc3RJbmRleCArIDFdO1xuICAgICAgICB0aGlzLmFuZ2xlXyA9IE1hdGguYXRhbjIoZHksIGR4KTtcbiAgICAgICAgdGhpcy5pbml0aWFsVmVsb2NpdHlfID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KSAvIGR1cmF0aW9uO1xuICAgICAgICByZXR1cm4gdGhpcy5pbml0aWFsVmVsb2NpdHlfID4gdGhpcy5taW5WZWxvY2l0eV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRvdGFsIGRpc3RhbmNlIHRyYXZlbGxlZCAocGl4ZWxzKS5cbiAgICAgKi9cbiAgICBLaW5ldGljLnByb3RvdHlwZS5nZXREaXN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm1pblZlbG9jaXR5XyAtIHRoaXMuaW5pdGlhbFZlbG9jaXR5XykgLyB0aGlzLmRlY2F5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQW5nbGUgb2YgdGhlIGtpbmV0aWMgcGFubmluZyBhbmltYXRpb24gKHJhZGlhbnMpLlxuICAgICAqL1xuICAgIEtpbmV0aWMucHJvdG90eXBlLmdldEFuZ2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmdsZV87XG4gICAgfTtcbiAgICByZXR1cm4gS2luZXRpYztcbn0oKSk7XG5leHBvcnQgZGVmYXVsdCBLaW5ldGljO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9S2luZXRpYy5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL01vdXNlV2hlZWxab29tXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgSW50ZXJhY3Rpb24sIHsgem9vbUJ5RGVsdGEgfSBmcm9tICcuL0ludGVyYWN0aW9uLmpzJztcbmltcG9ydCB7IERFVklDRV9QSVhFTF9SQVRJTywgRklSRUZPWCB9IGZyb20gJy4uL2hhcy5qcyc7XG5pbXBvcnQgeyBhbGwsIGFsd2F5cywgZm9jdXNXaXRoVGFiaW5kZXggfSBmcm9tICcuLi9ldmVudHMvY29uZGl0aW9uLmpzJztcbmltcG9ydCB7IGNsYW1wIH0gZnJvbSAnLi4vbWF0aC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCB2YXIgTW9kZSA9IHtcbiAgICBUUkFDS1BBRDogJ3RyYWNrcGFkJyxcbiAgICBXSEVFTDogJ3doZWVsJyxcbn07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXZlbnRzL2NvbmRpdGlvbi5qc1wiKS5Db25kaXRpb259IFtjb25kaXRpb25dIEEgZnVuY3Rpb24gdGhhdFxuICogdGFrZXMgYW4ge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnR+TWFwQnJvd3NlckV2ZW50fSBhbmQgcmV0dXJucyBhXG4gKiBib29sZWFuIHRvIGluZGljYXRlIHdoZXRoZXIgdGhhdCBldmVudCBzaG91bGQgYmUgaGFuZGxlZC4gRGVmYXVsdCBpc1xuICoge0BsaW5rIG1vZHVsZTpvbC9ldmVudHMvY29uZGl0aW9uLmFsd2F5c30uXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gV2hlbiB0aGUgbWFwJ3MgdGFyZ2V0IGhhcyBhIGB0YWJpbmRleGAgYXR0cmlidXRlIHNldCxcbiAqIHRoZSBpbnRlcmFjdGlvbiB3aWxsIG9ubHkgaGFuZGxlIGV2ZW50cyB3aGVuIHRoZSBtYXAgaGFzIHRoZSBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4RGVsdGE9MV0gTWF4aW11bSBtb3VzZSB3aGVlbCBkZWx0YS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZHVyYXRpb249MjUwXSBBbmltYXRpb24gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0aW1lb3V0PTgwXSBNb3VzZSB3aGVlbCB0aW1lb3V0IGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3VzZUFuY2hvcj10cnVlXSBFbmFibGUgem9vbWluZyB1c2luZyB0aGUgbW91c2Unc1xuICogbG9jYXRpb24gYXMgdGhlIGFuY2hvci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgem9vbWluZyBpbiBhbmQgb3V0IHdpbGwgem9vbSB0b1xuICogdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuIGluc3RlYWQgb2Ygem9vbWluZyBvbiB0aGUgbW91c2UncyBsb2NhdGlvbi5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2NvbnN0cmFpblJlc29sdXRpb249ZmFsc2VdIElmIHRydWUsIHRoZSBtb3VzZSB3aGVlbCB6b29tXG4gKiBldmVudCB3aWxsIGFsd2F5cyBhbmltYXRlIHRvIHRoZSBjbG9zZXN0IHpvb20gbGV2ZWwgYWZ0ZXIgYW4gaW50ZXJhY3Rpb247XG4gKiBmYWxzZSBtZWFucyBpbnRlcm1lZGlhcnkgem9vbSBsZXZlbHMgYXJlIGFsbG93ZWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHpvb20gdGhlIG1hcCBieSBzY3JvbGxpbmcgdGhlIG1vdXNlIHdoZWVsLlxuICogQGFwaVxuICovXG52YXIgTW91c2VXaGVlbFpvb20gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKE1vdXNlV2hlZWxab29tLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1vdXNlV2hlZWxab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIFxuICAgICAgICAvKiogQHR5cGUge2ltcG9ydChcIi4vSW50ZXJhY3Rpb24uanNcIikuSW50ZXJhY3Rpb25PcHRpb25zfSAqLyAob3B0aW9ucykpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudG90YWxEZWx0YV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3REZWx0YV8gPSAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1heERlbHRhXyA9IG9wdGlvbnMubWF4RGVsdGEgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWF4RGVsdGEgOiAxO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmR1cmF0aW9uXyA9IG9wdGlvbnMuZHVyYXRpb24gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuZHVyYXRpb24gOiAyNTA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGltZW91dF8gPSBvcHRpb25zLnRpbWVvdXQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGltZW91dCA6IDgwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51c2VBbmNob3JfID1cbiAgICAgICAgICAgIG9wdGlvbnMudXNlQW5jaG9yICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnVzZUFuY2hvciA6IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbnN0cmFpblJlc29sdXRpb25fID1cbiAgICAgICAgICAgIG9wdGlvbnMuY29uc3RyYWluUmVzb2x1dGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zLmNvbnN0cmFpblJlc29sdXRpb25cbiAgICAgICAgICAgICAgICA6IGZhbHNlO1xuICAgICAgICB2YXIgY29uZGl0aW9uID0gb3B0aW9ucy5jb25kaXRpb24gPyBvcHRpb25zLmNvbmRpdGlvbiA6IGFsd2F5cztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9ldmVudHMvY29uZGl0aW9uLmpzXCIpLkNvbmRpdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvbmRpdGlvbl8gPSBvcHRpb25zLm9uRm9jdXNPbmx5XG4gICAgICAgICAgICA/IGFsbChmb2N1c1dpdGhUYWJpbmRleCwgY29uZGl0aW9uKVxuICAgICAgICAgICAgOiBjb25kaXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhcnRUaW1lXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGltZW91dElkXztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtNb2RlfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1vZGVfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogVHJhY2twYWQgZXZlbnRzIHNlcGFyYXRlZCBieSB0aGlzIGRlbGF5IHdpbGwgYmUgY29uc2lkZXJlZCBzZXBhcmF0ZVxuICAgICAgICAgKiBpbnRlcmFjdGlvbnMuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFja3BhZEV2ZW50R2FwXyA9IDQwMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhY2twYWRUaW1lb3V0SWRfO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBkZWx0YSB2YWx1ZXMgcGVyIHpvb20gbGV2ZWxcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmRlbHRhUGVyWm9vbV8gPSAzMDA7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuZW5kSW50ZXJhY3Rpb25fID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnRyYWNrcGFkVGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdldE1hcCgpLmdldFZpZXcoKTtcbiAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih1bmRlZmluZWQsIHRoaXMubGFzdERlbHRhXyA/ICh0aGlzLmxhc3REZWx0YV8gPiAwID8gMSA6IC0xKSA6IDAsIHRoaXMubGFzdEFuY2hvcl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUge0BsaW5rIG1vZHVsZTpvbC9NYXBCcm93c2VyRXZlbnQgbWFwIGJyb3dzZXIgZXZlbnR9IChpZiBpdCB3YXMgYSBtb3VzZXdoZWVsLWV2ZW50KSBhbmQgZXZlbnR1YWxseVxuICAgICAqIHpvb21zIHRoZSBtYXAuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IE1hcCBicm93c2VyIGV2ZW50LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGBmYWxzZWAgdG8gc3RvcCBldmVudCBwcm9wYWdhdGlvbi5cbiAgICAgKi9cbiAgICBNb3VzZVdoZWVsWm9vbS5wcm90b3R5cGUuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5jb25kaXRpb25fKG1hcEJyb3dzZXJFdmVudCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0eXBlID0gbWFwQnJvd3NlckV2ZW50LnR5cGU7XG4gICAgICAgIGlmICh0eXBlICE9PSBFdmVudFR5cGUuV0hFRUwpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgd2hlZWxFdmVudCA9IC8qKiBAdHlwZSB7V2hlZWxFdmVudH0gKi8gKG1hcEJyb3dzZXJFdmVudC5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgd2hlZWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAodGhpcy51c2VBbmNob3JfKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmNob3JfID0gbWFwQnJvd3NlckV2ZW50LmNvb3JkaW5hdGU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRGVsdGEgbm9ybWFsaXNhdGlvbiBpbnNwaXJlZCBieVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWFwYm94L21hcGJveC1nbC1qcy9ibG9iLzAwMWM3YjkvanMvdWkvaGFuZGxlci9zY3JvbGxfem9vbS5qc1xuICAgICAgICB2YXIgZGVsdGE7XG4gICAgICAgIGlmIChtYXBCcm93c2VyRXZlbnQudHlwZSA9PSBFdmVudFR5cGUuV0hFRUwpIHtcbiAgICAgICAgICAgIGRlbHRhID0gd2hlZWxFdmVudC5kZWx0YVk7XG4gICAgICAgICAgICBpZiAoRklSRUZPWCAmJiB3aGVlbEV2ZW50LmRlbHRhTW9kZSA9PT0gV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwpIHtcbiAgICAgICAgICAgICAgICBkZWx0YSAvPSBERVZJQ0VfUElYRUxfUkFUSU87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAod2hlZWxFdmVudC5kZWx0YU1vZGUgPT09IFdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkUpIHtcbiAgICAgICAgICAgICAgICBkZWx0YSAqPSA0MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGFzdERlbHRhXyA9IGRlbHRhO1xuICAgICAgICB9XG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBpZiAodGhpcy5zdGFydFRpbWVfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IG5vdztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubW9kZV8gfHwgbm93IC0gdGhpcy5zdGFydFRpbWVfID4gdGhpcy50cmFja3BhZEV2ZW50R2FwXykge1xuICAgICAgICAgICAgdGhpcy5tb2RlXyA9IE1hdGguYWJzKGRlbHRhKSA8IDQgPyBNb2RlLlRSQUNLUEFEIDogTW9kZS5XSEVFTDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmICh0aGlzLm1vZGVfID09PSBNb2RlLlRSQUNLUEFEICYmXG4gICAgICAgICAgICAhKHZpZXcuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHx8IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50cmFja3BhZFRpbWVvdXRJZF8pIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50cmFja3BhZFRpbWVvdXRJZF8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmlldy5jYW5jZWxBbmltYXRpb25zKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZpZXcuYmVnaW5JbnRlcmFjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmFja3BhZFRpbWVvdXRJZF8gPSBzZXRUaW1lb3V0KHRoaXMuZW5kSW50ZXJhY3Rpb25fLmJpbmQodGhpcyksIHRoaXMudGltZW91dF8pO1xuICAgICAgICAgICAgdmlldy5hZGp1c3Rab29tKC1kZWx0YSAvIHRoaXMuZGVsdGFQZXJab29tXywgdGhpcy5sYXN0QW5jaG9yXyk7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0VGltZV8gPSBub3c7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3RhbERlbHRhXyArPSBkZWx0YTtcbiAgICAgICAgdmFyIHRpbWVMZWZ0ID0gTWF0aC5tYXgodGhpcy50aW1lb3V0XyAtIChub3cgLSB0aGlzLnN0YXJ0VGltZV8pLCAwKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dElkXyk7XG4gICAgICAgIHRoaXMudGltZW91dElkXyA9IHNldFRpbWVvdXQodGhpcy5oYW5kbGVXaGVlbFpvb21fLmJpbmQodGhpcywgbWFwKSwgdGltZUxlZnQpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLmRlZmF1bHR9IG1hcCBNYXAuXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLmhhbmRsZVdoZWVsWm9vbV8gPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgaWYgKHZpZXcuZ2V0QW5pbWF0aW5nKCkpIHtcbiAgICAgICAgICAgIHZpZXcuY2FuY2VsQW5pbWF0aW9ucygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWx0YSA9IC1jbGFtcCh0aGlzLnRvdGFsRGVsdGFfLCAtdGhpcy5tYXhEZWx0YV8gKiB0aGlzLmRlbHRhUGVyWm9vbV8sIHRoaXMubWF4RGVsdGFfICogdGhpcy5kZWx0YVBlclpvb21fKSAvIHRoaXMuZGVsdGFQZXJab29tXztcbiAgICAgICAgaWYgKHZpZXcuZ2V0Q29uc3RyYWluUmVzb2x1dGlvbigpIHx8IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbl8pIHtcbiAgICAgICAgICAgIC8vIHZpZXcgaGFzIGEgem9vbSBjb25zdHJhaW50LCB6b29tIGJ5IDFcbiAgICAgICAgICAgIGRlbHRhID0gZGVsdGEgPyAoZGVsdGEgPiAwID8gMSA6IC0xKSA6IDA7XG4gICAgICAgIH1cbiAgICAgICAgem9vbUJ5RGVsdGEodmlldywgZGVsdGEsIHRoaXMubGFzdEFuY2hvcl8sIHRoaXMuZHVyYXRpb25fKTtcbiAgICAgICAgdGhpcy5tb2RlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy50b3RhbERlbHRhXyA9IDA7XG4gICAgICAgIHRoaXMubGFzdEFuY2hvcl8gPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXJ0VGltZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudGltZW91dElkXyA9IHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEVuYWJsZSBvciBkaXNhYmxlIHVzaW5nIHRoZSBtb3VzZSdzIGxvY2F0aW9uIGFzIGFuIGFuY2hvciB3aGVuIHpvb21pbmdcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUFuY2hvciB0cnVlIHRvIHpvb20gdG8gdGhlIG1vdXNlJ3MgbG9jYXRpb24sIGZhbHNlXG4gICAgICogdG8gem9vbSB0byB0aGUgY2VudGVyIG9mIHRoZSBtYXBcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VXaGVlbFpvb20ucHJvdG90eXBlLnNldE1vdXNlQW5jaG9yID0gZnVuY3Rpb24gKHVzZUFuY2hvcikge1xuICAgICAgICB0aGlzLnVzZUFuY2hvcl8gPSB1c2VBbmNob3I7XG4gICAgICAgIGlmICghdXNlQW5jaG9yKSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmNob3JfID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIE1vdXNlV2hlZWxab29tO1xufShJbnRlcmFjdGlvbikpO1xuZXhwb3J0IGRlZmF1bHQgTW91c2VXaGVlbFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1Nb3VzZVdoZWVsWm9vbS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlXG4gKi9cbmltcG9ydCBQb2ludGVySW50ZXJhY3Rpb24sIHsgY2VudHJvaWQgYXMgY2VudHJvaWRGcm9tUG9pbnRlcnMsIH0gZnJvbSAnLi9Qb2ludGVyLmpzJztcbmltcG9ydCB7IEZBTFNFIH0gZnJvbSAnLi4vZnVuY3Rpb25zLmpzJztcbmltcG9ydCB7IGRpc2FibGUgfSBmcm9tICcuLi9yb3RhdGlvbmNvbnN0cmFpbnQuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTI1MF0gVGhlIGR1cmF0aW9uIG9mIHRoZSBhbmltYXRpb24gaW5cbiAqIG1pbGxpc2Vjb25kcy5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGhyZXNob2xkPTAuM10gTWluaW1hbCBhbmdsZSBpbiByYWRpYW5zIHRvIHN0YXJ0IGEgcm90YXRpb24uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWxsb3dzIHRoZSB1c2VyIHRvIHJvdGF0ZSB0aGUgbWFwIGJ5IHR3aXN0aW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hSb3RhdGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFBpbmNoUm90YXRlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBPcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFBpbmNoUm90YXRlKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgcG9pbnRlck9wdGlvbnMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlci5qc1wiKS5PcHRpb25zfSAqLyAob3B0aW9ucyk7XG4gICAgICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMubGFzdEFuZ2xlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpbmdfID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucm90YXRpb25EZWx0YV8gPSAwLjA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGhyZXNob2xkXyA9IG9wdGlvbnMudGhyZXNob2xkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRocmVzaG9sZCA6IDAuMztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMjUwO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRyYWcgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKi9cbiAgICBQaW5jaFJvdGF0ZS5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgcm90YXRpb25EZWx0YSA9IDAuMDtcbiAgICAgICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgICAgIHZhciB0b3VjaDEgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzFdO1xuICAgICAgICAvLyBhbmdsZSBiZXR3ZWVuIHRvdWNoZXNcbiAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih0b3VjaDEuY2xpZW50WSAtIHRvdWNoMC5jbGllbnRZLCB0b3VjaDEuY2xpZW50WCAtIHRvdWNoMC5jbGllbnRYKTtcbiAgICAgICAgaWYgKHRoaXMubGFzdEFuZ2xlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBhbmdsZSAtIHRoaXMubGFzdEFuZ2xlXztcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25EZWx0YV8gKz0gZGVsdGE7XG4gICAgICAgICAgICBpZiAoIXRoaXMucm90YXRpbmdfICYmIE1hdGguYWJzKHRoaXMucm90YXRpb25EZWx0YV8pID4gdGhpcy50aHJlc2hvbGRfKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGluZ18gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcm90YXRpb25EZWx0YSA9IGRlbHRhO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEFuZ2xlXyA9IGFuZ2xlO1xuICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xuICAgICAgICBpZiAodmlldy5nZXRDb25zdHJhaW50cygpLnJvdGF0aW9uID09PSBkaXNhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcm90YXRlIGFuY2hvciBwb2ludC5cbiAgICAgICAgLy8gRklYTUU6IHNob3VsZCBiZSB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gdGhlIGxpbmVzOlxuICAgICAgICAvLyAgICAgdG91Y2gwLHRvdWNoMSBhbmQgcHJldmlvdXNUb3VjaDAscHJldmlvdXNUb3VjaDFcbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGhpcy50YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICAgICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgICAgIHRoaXMuYW5jaG9yXyA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoY2VudHJvaWQpO1xuICAgICAgICAvLyByb3RhdGVcbiAgICAgICAgaWYgKHRoaXMucm90YXRpbmdfKSB7XG4gICAgICAgICAgICBtYXAucmVuZGVyKCk7XG4gICAgICAgICAgICB2aWV3LmFkanVzdFJvdGF0aW9uSW50ZXJuYWwocm90YXRpb25EZWx0YSwgdGhpcy5hbmNob3JfKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVVcEV2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICBpZiAodGhpcy50YXJnZXRQb2ludGVycy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHZhciB2aWV3ID0gbWFwLmdldFZpZXcoKTtcbiAgICAgICAgICAgIHZpZXcuZW5kSW50ZXJhY3Rpb24odGhpcy5kdXJhdGlvbl8pO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEhhbmRsZSBwb2ludGVyIGRvd24gZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoUm90YXRlLnByb3RvdHlwZS5oYW5kbGVEb3duRXZlbnQgPSBmdW5jdGlvbiAobWFwQnJvd3NlckV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFBvaW50ZXJzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0gbWFwQnJvd3NlckV2ZW50Lm1hcDtcbiAgICAgICAgICAgIHRoaXMuYW5jaG9yXyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmxhc3RBbmdsZV8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW5nXyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvbkRlbHRhXyA9IDAuMDtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBpbmNoUm90YXRlO1xufShQb2ludGVySW50ZXJhY3Rpb24pKTtcbmV4cG9ydCBkZWZhdWx0IFBpbmNoUm90YXRlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGluY2hSb3RhdGUuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9pbnRlcmFjdGlvbi9QaW5jaFpvb21cbiAqL1xuaW1wb3J0IFBvaW50ZXJJbnRlcmFjdGlvbiwgeyBjZW50cm9pZCBhcyBjZW50cm9pZEZyb21Qb2ludGVycywgfSBmcm9tICcuL1BvaW50ZXIuanMnO1xuaW1wb3J0IHsgRkFMU0UgfSBmcm9tICcuLi9mdW5jdGlvbnMuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2R1cmF0aW9uPTQwMF0gQW5pbWF0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBBbGxvd3MgdGhlIHVzZXIgdG8gem9vbSB0aGUgbWFwIGJ5IHBpbmNoaW5nIHdpdGggdHdvIGZpbmdlcnNcbiAqIG9uIGEgdG91Y2ggc2NyZWVuLlxuICogQGFwaVxuICovXG52YXIgUGluY2hab29tID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhQaW5jaFpvb20sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gUGluY2hab29tKG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICB2YXIgcG9pbnRlck9wdGlvbnMgPSAvKiogQHR5cGUge2ltcG9ydChcIi4vUG9pbnRlci5qc1wiKS5PcHRpb25zfSAqLyAob3B0aW9ucyk7XG4gICAgICAgIGlmICghcG9pbnRlck9wdGlvbnMuc3RvcERvd24pIHtcbiAgICAgICAgICAgIHBvaW50ZXJPcHRpb25zLnN0b3BEb3duID0gRkFMU0U7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBwb2ludGVyT3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5kdXJhdGlvbl8gPSBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogNDAwO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnx1bmRlZmluZWR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sYXN0RGlzdGFuY2VfID0gdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmxhc3RTY2FsZURlbHRhXyA9IDE7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgZHJhZyBldmVudHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9NYXBCcm93c2VyRXZlbnQuanNcIikuZGVmYXVsdH0gbWFwQnJvd3NlckV2ZW50IEV2ZW50LlxuICAgICAqL1xuICAgIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlRHJhZ0V2ZW50ID0gZnVuY3Rpb24gKG1hcEJyb3dzZXJFdmVudCkge1xuICAgICAgICB2YXIgc2NhbGVEZWx0YSA9IDEuMDtcbiAgICAgICAgdmFyIHRvdWNoMCA9IHRoaXMudGFyZ2V0UG9pbnRlcnNbMF07XG4gICAgICAgIHZhciB0b3VjaDEgPSB0aGlzLnRhcmdldFBvaW50ZXJzWzFdO1xuICAgICAgICB2YXIgZHggPSB0b3VjaDAuY2xpZW50WCAtIHRvdWNoMS5jbGllbnRYO1xuICAgICAgICB2YXIgZHkgPSB0b3VjaDAuY2xpZW50WSAtIHRvdWNoMS5jbGllbnRZO1xuICAgICAgICAvLyBkaXN0YW5jZSBiZXR3ZWVuIHRvdWNoZXNcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgaWYgKHRoaXMubGFzdERpc3RhbmNlXyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzY2FsZURlbHRhID0gdGhpcy5sYXN0RGlzdGFuY2VfIC8gZGlzdGFuY2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sYXN0RGlzdGFuY2VfID0gZGlzdGFuY2U7XG4gICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgIGlmIChzY2FsZURlbHRhICE9IDEuMCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0U2NhbGVEZWx0YV8gPSBzY2FsZURlbHRhO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNjYWxlIGFuY2hvciBwb2ludC5cbiAgICAgICAgdmFyIHZpZXdwb3J0UG9zaXRpb24gPSBtYXAuZ2V0Vmlld3BvcnQoKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGNlbnRyb2lkID0gY2VudHJvaWRGcm9tUG9pbnRlcnModGhpcy50YXJnZXRQb2ludGVycyk7XG4gICAgICAgIGNlbnRyb2lkWzBdIC09IHZpZXdwb3J0UG9zaXRpb24ubGVmdDtcbiAgICAgICAgY2VudHJvaWRbMV0gLT0gdmlld3BvcnRQb3NpdGlvbi50b3A7XG4gICAgICAgIHRoaXMuYW5jaG9yXyA9IG1hcC5nZXRDb29yZGluYXRlRnJvbVBpeGVsSW50ZXJuYWwoY2VudHJvaWQpO1xuICAgICAgICAvLyBzY2FsZSwgYnlwYXNzIHRoZSByZXNvbHV0aW9uIGNvbnN0cmFpbnRcbiAgICAgICAgbWFwLnJlbmRlcigpO1xuICAgICAgICB2aWV3LmFkanVzdFJlc29sdXRpb25JbnRlcm5hbChzY2FsZURlbHRhLCB0aGlzLmFuY2hvcl8pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogSGFuZGxlIHBvaW50ZXIgdXAgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vTWFwQnJvd3NlckV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEJyb3dzZXJFdmVudCBFdmVudC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBJZiB0aGUgZXZlbnQgd2FzIGNvbnN1bWVkLlxuICAgICAqL1xuICAgIFBpbmNoWm9vbS5wcm90b3R5cGUuaGFuZGxlVXBFdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgdmFyIG1hcCA9IG1hcEJyb3dzZXJFdmVudC5tYXA7XG4gICAgICAgICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5sYXN0U2NhbGVEZWx0YV8gPiAxID8gMSA6IC0xO1xuICAgICAgICAgICAgdmlldy5lbmRJbnRlcmFjdGlvbih0aGlzLmR1cmF0aW9uXywgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgcG9pbnRlciBkb3duIGV2ZW50cy5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEJyb3dzZXJFdmVudC5qc1wiKS5kZWZhdWx0fSBtYXBCcm93c2VyRXZlbnQgRXZlbnQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gSWYgdGhlIGV2ZW50IHdhcyBjb25zdW1lZC5cbiAgICAgKi9cbiAgICBQaW5jaFpvb20ucHJvdG90eXBlLmhhbmRsZURvd25FdmVudCA9IGZ1bmN0aW9uIChtYXBCcm93c2VyRXZlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0UG9pbnRlcnMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSBtYXBCcm93c2VyRXZlbnQubWFwO1xuICAgICAgICAgICAgdGhpcy5hbmNob3JfID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubGFzdERpc3RhbmNlXyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMubGFzdFNjYWxlRGVsdGFfID0gMTtcbiAgICAgICAgICAgIGlmICghdGhpcy5oYW5kbGluZ0Rvd25VcFNlcXVlbmNlKSB7XG4gICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5iZWdpbkludGVyYWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFBpbmNoWm9vbTtcbn0oUG9pbnRlckludGVyYWN0aW9uKSk7XG5leHBvcnQgZGVmYXVsdCBQaW5jaFpvb207XG4vLyMgc291cmNlTWFwcGluZ1VSTD1QaW5jaFpvb20uanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9NYXBcbiAqL1xuaW1wb3J0IENvbXBvc2l0ZU1hcFJlbmRlcmVyIGZyb20gJy4vcmVuZGVyZXIvQ29tcG9zaXRlLmpzJztcbmltcG9ydCBQbHVnZ2FibGVNYXAgZnJvbSAnLi9QbHVnZ2FibGVNYXAuanMnO1xuaW1wb3J0IHsgYXNzaWduIH0gZnJvbSAnLi9vYmouanMnO1xuaW1wb3J0IHsgZGVmYXVsdHMgYXMgZGVmYXVsdENvbnRyb2xzIH0gZnJvbSAnLi9jb250cm9sLmpzJztcbmltcG9ydCB7IGRlZmF1bHRzIGFzIGRlZmF1bHRJbnRlcmFjdGlvbnMgfSBmcm9tICcuL2ludGVyYWN0aW9uLmpzJztcbi8qKlxuICogQGNsYXNzZGVzY1xuICogVGhlIG1hcCBpcyB0aGUgY29yZSBjb21wb25lbnQgb2YgT3BlbkxheWVycy4gRm9yIGEgbWFwIHRvIHJlbmRlciwgYSB2aWV3LFxuICogb25lIG9yIG1vcmUgbGF5ZXJzLCBhbmQgYSB0YXJnZXQgY29udGFpbmVyIGFyZSBuZWVkZWQ6XG4gKlxuICogICAgIGltcG9ydCBNYXAgZnJvbSAnb2wvTWFwJztcbiAqICAgICBpbXBvcnQgVmlldyBmcm9tICdvbC9WaWV3JztcbiAqICAgICBpbXBvcnQgVGlsZUxheWVyIGZyb20gJ29sL2xheWVyL1RpbGUnO1xuICogICAgIGltcG9ydCBPU00gZnJvbSAnb2wvc291cmNlL09TTSc7XG4gKlxuICogICAgIHZhciBtYXAgPSBuZXcgTWFwKHtcbiAqICAgICAgIHZpZXc6IG5ldyBWaWV3KHtcbiAqICAgICAgICAgY2VudGVyOiBbMCwgMF0sXG4gKiAgICAgICAgIHpvb206IDFcbiAqICAgICAgIH0pLFxuICogICAgICAgbGF5ZXJzOiBbXG4gKiAgICAgICAgIG5ldyBUaWxlTGF5ZXIoe1xuICogICAgICAgICAgIHNvdXJjZTogbmV3IE9TTSgpXG4gKiAgICAgICAgIH0pXG4gKiAgICAgICBdLFxuICogICAgICAgdGFyZ2V0OiAnbWFwJ1xuICogICAgIH0pO1xuICpcbiAqIFRoZSBhYm92ZSBzbmlwcGV0IGNyZWF0ZXMgYSBtYXAgdXNpbmcgYSB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL1RpbGV9IHRvXG4gKiBkaXNwbGF5IHtAbGluayBtb2R1bGU6b2wvc291cmNlL09TTX5PU019IE9TTSBkYXRhIGFuZCByZW5kZXIgaXQgdG8gYSBET01cbiAqIGVsZW1lbnQgd2l0aCB0aGUgaWQgYG1hcGAuXG4gKlxuICogVGhlIGNvbnN0cnVjdG9yIHBsYWNlcyBhIHZpZXdwb3J0IGNvbnRhaW5lciAod2l0aCBDU1MgY2xhc3MgbmFtZVxuICogYG9sLXZpZXdwb3J0YCkgaW4gdGhlIHRhcmdldCBlbGVtZW50IChzZWUgYGdldFZpZXdwb3J0KClgKSwgYW5kIHRoZW4gdHdvXG4gKiBmdXJ0aGVyIGVsZW1lbnRzIHdpdGhpbiB0aGUgdmlld3BvcnQ6IG9uZSB3aXRoIENTUyBjbGFzcyBuYW1lXG4gKiBgb2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRgIGZvciBjb250cm9scyBhbmQgc29tZSBvdmVybGF5cywgYW5kIG9uZSB3aXRoXG4gKiBDU1MgY2xhc3MgbmFtZSBgb2wtb3ZlcmxheWNvbnRhaW5lcmAgZm9yIG90aGVyIG92ZXJsYXlzIChzZWUgdGhlIGBzdG9wRXZlbnRgXG4gKiBvcHRpb24gb2Yge0BsaW5rIG1vZHVsZTpvbC9PdmVybGF5fk92ZXJsYXl9IGZvciB0aGUgZGlmZmVyZW5jZSkuIFRoZSBtYXBcbiAqIGl0c2VsZiBpcyBwbGFjZWQgaW4gYSBmdXJ0aGVyIGVsZW1lbnQgd2l0aGluIHRoZSB2aWV3cG9ydC5cbiAqXG4gKiBMYXllcnMgYXJlIHN0b3JlZCBhcyBhIHtAbGluayBtb2R1bGU6b2wvQ29sbGVjdGlvbn5Db2xsZWN0aW9ufSBpblxuICogbGF5ZXJHcm91cHMuIEEgdG9wLWxldmVsIGdyb3VwIGlzIHByb3ZpZGVkIGJ5IHRoZSBsaWJyYXJ5LiBUaGlzIGlzIHdoYXQgaXNcbiAqIGFjY2Vzc2VkIGJ5IGBnZXRMYXllckdyb3VwYCBhbmQgYHNldExheWVyR3JvdXBgLiBMYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgYXJlIGFkZGVkIHRvIHRoaXMgZ3JvdXAsIGFuZCBgYWRkTGF5ZXJgIGFuZCBgcmVtb3ZlTGF5ZXJgIGNoYW5nZSB0aGVcbiAqIGxheWVyIGNvbGxlY3Rpb24gaW4gdGhlIGdyb3VwLiBgZ2V0TGF5ZXJzYCBpcyBhIGNvbnZlbmllbmNlIGZ1bmN0aW9uIGZvclxuICogYGdldExheWVyR3JvdXAoKS5nZXRMYXllcnMoKWAuIE5vdGUgdGhhdCB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0dyb3Vwfkdyb3VwfVxuICogaXMgYSBzdWJjbGFzcyBvZiB7QGxpbmsgbW9kdWxlOm9sL2xheWVyL0Jhc2V9LCBzbyBsYXllcnMgZW50ZXJlZCBpbiB0aGVcbiAqIG9wdGlvbnMgb3IgYWRkZWQgd2l0aCBgYWRkTGF5ZXJgIGNhbiBiZSBncm91cHMsIHdoaWNoIGNhbiBjb250YWluIGZ1cnRoZXJcbiAqIGdyb3VwcywgYW5kIHNvIG9uLlxuICpcbiAqIEBhcGlcbiAqL1xudmFyIE1hcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTWFwLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9QbHVnZ2FibGVNYXAuanNcIikuTWFwT3B0aW9uc30gb3B0aW9ucyBNYXAgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNYXAob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBvcHRpb25zID0gYXNzaWduKHt9LCBvcHRpb25zKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmNvbnRyb2xzKSB7XG4gICAgICAgICAgICBvcHRpb25zLmNvbnRyb2xzID0gZGVmYXVsdENvbnRyb2xzKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zLmludGVyYWN0aW9ucykge1xuICAgICAgICAgICAgb3B0aW9ucy5pbnRlcmFjdGlvbnMgPSBkZWZhdWx0SW50ZXJhY3Rpb25zKHtcbiAgICAgICAgICAgICAgICBvbkZvY3VzT25seTogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgb3B0aW9ucykgfHwgdGhpcztcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBNYXAucHJvdG90eXBlLmNyZWF0ZVJlbmRlcmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IENvbXBvc2l0ZU1hcFJlbmRlcmVyKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIE1hcDtcbn0oUGx1Z2dhYmxlTWFwKSk7XG5leHBvcnQgZGVmYXVsdCBNYXA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NYXAuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2NvbnRyb2xcbiAqL1xuaW1wb3J0IEF0dHJpYnV0aW9uIGZyb20gJy4vY29udHJvbC9BdHRyaWJ1dGlvbi5qcyc7XG5pbXBvcnQgQ29sbGVjdGlvbiBmcm9tICcuL0NvbGxlY3Rpb24uanMnO1xuaW1wb3J0IFJvdGF0ZSBmcm9tICcuL2NvbnRyb2wvUm90YXRlLmpzJztcbmltcG9ydCBab29tIGZyb20gJy4vY29udHJvbC9ab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgQXR0cmlidXRpb24gfSBmcm9tICcuL2NvbnRyb2wvQXR0cmlidXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBDb250cm9sIH0gZnJvbSAnLi9jb250cm9sL0NvbnRyb2wuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBGdWxsU2NyZWVuIH0gZnJvbSAnLi9jb250cm9sL0Z1bGxTY3JlZW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb3VzZVBvc2l0aW9uIH0gZnJvbSAnLi9jb250cm9sL01vdXNlUG9zaXRpb24uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBPdmVydmlld01hcCB9IGZyb20gJy4vY29udHJvbC9PdmVydmlld01hcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFJvdGF0ZSB9IGZyb20gJy4vY29udHJvbC9Sb3RhdGUuanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBTY2FsZUxpbmUgfSBmcm9tICcuL2NvbnRyb2wvU2NhbGVMaW5lLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbSB9IGZyb20gJy4vY29udHJvbC9ab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbVNsaWRlciB9IGZyb20gJy4vY29udHJvbC9ab29tU2xpZGVyLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgWm9vbVRvRXh0ZW50IH0gZnJvbSAnLi9jb250cm9sL1pvb21Ub0V4dGVudC5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IERlZmF1bHRzT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb249dHJ1ZV0gSW5jbHVkZVxuICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL0F0dHJpYnV0aW9uLmpzXCIpLk9wdGlvbnN9IFthdHRyaWJ1dGlvbk9wdGlvbnNdXG4gKiBPcHRpb25zIGZvciB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvQXR0cmlidXRpb25+QXR0cmlidXRpb259LlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcm90YXRlPXRydWVdIEluY2x1ZGVcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9jb250cm9sL1JvdGF0ZS5qc1wiKS5PcHRpb25zfSBbcm90YXRlT3B0aW9uc10gT3B0aW9uc1xuICogZm9yIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9Sb3RhdGV+Um90YXRlfS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3pvb21dIEluY2x1ZGUge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL1pvb21+Wm9vbX0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vY29udHJvbC9ab29tLmpzXCIpLk9wdGlvbnN9IFt6b29tT3B0aW9uc10gT3B0aW9ucyBmb3JcbiAqIHtAbGluayBtb2R1bGU6b2wvY29udHJvbC9ab29tflpvb219LlxuICogQGFwaVxuICovXG4vKipcbiAqIFNldCBvZiBjb250cm9scyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFVubGVzcyBjb25maWd1cmVkIG90aGVyd2lzZSxcbiAqIHRoaXMgcmV0dXJucyBhIGNvbGxlY3Rpb24gY29udGFpbmluZyBhbiBpbnN0YW5jZSBvZiBlYWNoIG9mIHRoZSBmb2xsb3dpbmdcbiAqIGNvbnRyb2xzOlxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvWm9vbX5ab29tfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2NvbnRyb2wvUm90YXRlflJvdGF0ZX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9jb250cm9sL0F0dHJpYnV0aW9ufkF0dHJpYnV0aW9ufVxuICpcbiAqIEBwYXJhbSB7RGVmYXVsdHNPcHRpb25zfSBbb3B0X29wdGlvbnNdXG4gKiBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7Q29sbGVjdGlvbjxpbXBvcnQoXCIuL2NvbnRyb2wvQ29udHJvbC5qc1wiKS5kZWZhdWx0Pn1cbiAqIENvbnRyb2xzLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdHMob3B0X29wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zID8gb3B0X29wdGlvbnMgOiB7fTtcbiAgICB2YXIgY29udHJvbHMgPSBuZXcgQ29sbGVjdGlvbigpO1xuICAgIHZhciB6b29tQ29udHJvbCA9IG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy56b29tIDogdHJ1ZTtcbiAgICBpZiAoem9vbUNvbnRyb2wpIHtcbiAgICAgICAgY29udHJvbHMucHVzaChuZXcgWm9vbShvcHRpb25zLnpvb21PcHRpb25zKSk7XG4gICAgfVxuICAgIHZhciByb3RhdGVDb250cm9sID0gb3B0aW9ucy5yb3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucm90YXRlIDogdHJ1ZTtcbiAgICBpZiAocm90YXRlQ29udHJvbCkge1xuICAgICAgICBjb250cm9scy5wdXNoKG5ldyBSb3RhdGUob3B0aW9ucy5yb3RhdGVPcHRpb25zKSk7XG4gICAgfVxuICAgIHZhciBhdHRyaWJ1dGlvbkNvbnRyb2wgPSBvcHRpb25zLmF0dHJpYnV0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF0dHJpYnV0aW9uIDogdHJ1ZTtcbiAgICBpZiAoYXR0cmlidXRpb25Db250cm9sKSB7XG4gICAgICAgIGNvbnRyb2xzLnB1c2gobmV3IEF0dHJpYnV0aW9uKG9wdGlvbnMuYXR0cmlidXRpb25PcHRpb25zKSk7XG4gICAgfVxuICAgIHJldHVybiBjb250cm9scztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRyb2wuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL2ludGVyYWN0aW9uXG4gKi9cbmltcG9ydCBDb2xsZWN0aW9uIGZyb20gJy4vQ29sbGVjdGlvbi5qcyc7XG5pbXBvcnQgRG91YmxlQ2xpY2tab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmltcG9ydCBEcmFnUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1Bhbi5qcyc7XG5pbXBvcnQgRHJhZ1JvdGF0ZSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGUuanMnO1xuaW1wb3J0IERyYWdab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ1pvb20uanMnO1xuaW1wb3J0IEtleWJvYXJkUGFuIGZyb20gJy4vaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW4uanMnO1xuaW1wb3J0IEtleWJvYXJkWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkWm9vbS5qcyc7XG5pbXBvcnQgS2luZXRpYyBmcm9tICcuL0tpbmV0aWMuanMnO1xuaW1wb3J0IE1vdXNlV2hlZWxab29tIGZyb20gJy4vaW50ZXJhY3Rpb24vTW91c2VXaGVlbFpvb20uanMnO1xuaW1wb3J0IFBpbmNoUm90YXRlIGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hSb3RhdGUuanMnO1xuaW1wb3J0IFBpbmNoWm9vbSBmcm9tICcuL2ludGVyYWN0aW9uL1BpbmNoWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERvdWJsZUNsaWNrWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRG91YmxlQ2xpY2tab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ0FuZERyb3AgfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdBbmREcm9wLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ0JveCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhZ0JveC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIERyYWdQYW4gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdQYW4uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBEcmFnUm90YXRlIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9EcmFnUm90YXRlLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1JvdGF0ZUFuZFpvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdSb3RhdGVBbmRab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhZ1pvb20gfSBmcm9tICcuL2ludGVyYWN0aW9uL0RyYWdab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgRHJhdyB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRHJhdy5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIEV4dGVudCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vRXh0ZW50LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgSW50ZXJhY3Rpb24gfSBmcm9tICcuL2ludGVyYWN0aW9uL0ludGVyYWN0aW9uLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgS2V5Ym9hcmRQYW4gfSBmcm9tICcuL2ludGVyYWN0aW9uL0tleWJvYXJkUGFuLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgS2V5Ym9hcmRab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9LZXlib2FyZFpvb20uanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBNb2RpZnkgfSBmcm9tICcuL2ludGVyYWN0aW9uL01vZGlmeS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIE1vdXNlV2hlZWxab29tIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBpbmNoUm90YXRlIH0gZnJvbSAnLi9pbnRlcmFjdGlvbi9QaW5jaFJvdGF0ZS5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFBpbmNoWm9vbSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vUGluY2hab29tLmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgUG9pbnRlciB9IGZyb20gJy4vaW50ZXJhY3Rpb24vUG9pbnRlci5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFNlbGVjdCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vU2VsZWN0LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgU25hcCB9IGZyb20gJy4vaW50ZXJhY3Rpb24vU25hcC5qcyc7XG5leHBvcnQgeyBkZWZhdWx0IGFzIFRyYW5zbGF0ZSB9IGZyb20gJy4vaW50ZXJhY3Rpb24vVHJhbnNsYXRlLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRGVmYXVsdHNPcHRpb25zXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFthbHRTaGlmdERyYWdSb3RhdGU9dHJ1ZV0gV2hldGhlciBBbHQtU2hpZnQtZHJhZyByb3RhdGUgaXNcbiAqIGRlc2lyZWQuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvbkZvY3VzT25seT1mYWxzZV0gSW50ZXJhY3Qgb25seSB3aGVuIHRoZSBtYXAgaGFzIHRoZVxuICogZm9jdXMuIFRoaXMgYWZmZWN0cyB0aGUgYE1vdXNlV2hlZWxab29tYCBhbmQgYERyYWdQYW5gIGludGVyYWN0aW9ucyBhbmQgaXNcbiAqIHVzZWZ1bCB3aGVuIHBhZ2Ugc2Nyb2xsIGlzIGRlc2lyZWQgZm9yIG1hcHMgdGhhdCBkbyBub3QgaGF2ZSB0aGUgYnJvd3NlcidzXG4gKiBmb2N1cy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RvdWJsZUNsaWNrWm9vbT10cnVlXSBXaGV0aGVyIGRvdWJsZSBjbGljayB6b29tIGlzXG4gKiBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBba2V5Ym9hcmQ9dHJ1ZV0gV2hldGhlciBrZXlib2FyZCBpbnRlcmFjdGlvbiBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbbW91c2VXaGVlbFpvb209dHJ1ZV0gV2hldGhlciBtb3VzZXdoZWVsIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NoaWZ0RHJhZ1pvb209dHJ1ZV0gV2hldGhlciBTaGlmdC1kcmFnIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2RyYWdQYW49dHJ1ZV0gV2hldGhlciBkcmFnIHBhbiBpcyBkZXNpcmVkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbcGluY2hSb3RhdGU9dHJ1ZV0gV2hldGhlciBwaW5jaCByb3RhdGUgaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3BpbmNoWm9vbT10cnVlXSBXaGV0aGVyIHBpbmNoIHpvb20gaXMgZGVzaXJlZC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbem9vbURlbHRhXSBab29tIGxldmVsIGRlbHRhIHdoZW4gdXNpbmcga2V5Ym9hcmQgb3IgZG91YmxlIGNsaWNrIHpvb20uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3pvb21EdXJhdGlvbl0gRHVyYXRpb24gb2YgdGhlIHpvb20gYW5pbWF0aW9uIGluXG4gKiBtaWxsaXNlY29uZHMuXG4gKi9cbi8qKlxuICogU2V0IG9mIGludGVyYWN0aW9ucyBpbmNsdWRlZCBpbiBtYXBzIGJ5IGRlZmF1bHQuIFNwZWNpZmljIGludGVyYWN0aW9ucyBjYW4gYmVcbiAqIGV4Y2x1ZGVkIGJ5IHNldHRpbmcgdGhlIGFwcHJvcHJpYXRlIG9wdGlvbiB0byBmYWxzZSBpbiB0aGUgY29uc3RydWN0b3JcbiAqIG9wdGlvbnMsIGJ1dCB0aGUgb3JkZXIgb2YgdGhlIGludGVyYWN0aW9ucyBpcyBmaXhlZC4gIElmIHlvdSB3YW50IHRvIHNwZWNpZnlcbiAqIGEgZGlmZmVyZW50IG9yZGVyIGZvciBpbnRlcmFjdGlvbnMsIHlvdSB3aWxsIG5lZWQgdG8gY3JlYXRlIHlvdXIgb3duXG4gKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0ludGVyYWN0aW9ufSBpbnN0YW5jZXMgYW5kIGluc2VydFxuICogdGhlbSBpbnRvIGEge0BsaW5rIG1vZHVsZTpvbC9Db2xsZWN0aW9ufSBpbiB0aGUgb3JkZXIgeW91IHdhbnRcbiAqIGJlZm9yZSBjcmVhdGluZyB5b3VyIHtAbGluayBtb2R1bGU6b2wvTWFwfk1hcH0gaW5zdGFuY2UuIENoYW5naW5nIHRoZSBvcmRlciBjYW5cbiAqIGJlIG9mIGludGVyZXN0IGlmIHRoZSBldmVudCBwcm9wYWdhdGlvbiBuZWVkcyB0byBiZSBzdG9wcGVkIGF0IGEgcG9pbnQuXG4gKiBUaGUgZGVmYXVsdCBzZXQgb2YgaW50ZXJhY3Rpb25zLCBpbiBzZXF1ZW5jZSwgaXM6XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1JvdGF0ZX5EcmFnUm90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL0RvdWJsZUNsaWNrWm9vbX5Eb3VibGVDbGlja1pvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vRHJhZ1Bhbn5EcmFnUGFufVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1BpbmNoUm90YXRlflBpbmNoUm90YXRlfVxuICogKiB7QGxpbmsgbW9kdWxlOm9sL2ludGVyYWN0aW9uL1BpbmNoWm9vbX5QaW5jaFpvb219XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRQYW5+S2V5Ym9hcmRQYW59XG4gKiAqIHtAbGluayBtb2R1bGU6b2wvaW50ZXJhY3Rpb24vS2V5Ym9hcmRab29tfktleWJvYXJkWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9Nb3VzZVdoZWVsWm9vbX5Nb3VzZVdoZWVsWm9vbX1cbiAqICoge0BsaW5rIG1vZHVsZTpvbC9pbnRlcmFjdGlvbi9EcmFnWm9vbX5EcmFnWm9vbX1cbiAqXG4gKiBAcGFyYW0ge0RlZmF1bHRzT3B0aW9uc30gW29wdF9vcHRpb25zXSBEZWZhdWx0cyBvcHRpb25zLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9Db2xsZWN0aW9uLmpzXCIpLmRlZmF1bHQ8aW1wb3J0KFwiLi9pbnRlcmFjdGlvbi9JbnRlcmFjdGlvbi5qc1wiKS5kZWZhdWx0Pn1cbiAqIEEgY29sbGVjdGlvbiBvZiBpbnRlcmFjdGlvbnMgdG8gYmUgdXNlZCB3aXRoIHRoZSB7QGxpbmsgbW9kdWxlOm9sL01hcH5NYXB9XG4gKiBjb25zdHJ1Y3RvcidzIGBpbnRlcmFjdGlvbnNgIG9wdGlvbi5cbiAqIEBhcGlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRzKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgdmFyIGludGVyYWN0aW9ucyA9IG5ldyBDb2xsZWN0aW9uKCk7XG4gICAgdmFyIGtpbmV0aWMgPSBuZXcgS2luZXRpYygtMC4wMDUsIDAuMDUsIDEwMCk7XG4gICAgdmFyIGFsdFNoaWZ0RHJhZ1JvdGF0ZSA9IG9wdGlvbnMuYWx0U2hpZnREcmFnUm90YXRlICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBvcHRpb25zLmFsdFNoaWZ0RHJhZ1JvdGF0ZVxuICAgICAgICA6IHRydWU7XG4gICAgaWYgKGFsdFNoaWZ0RHJhZ1JvdGF0ZSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1JvdGF0ZSgpKTtcbiAgICB9XG4gICAgdmFyIGRvdWJsZUNsaWNrWm9vbSA9IG9wdGlvbnMuZG91YmxlQ2xpY2tab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRvdWJsZUNsaWNrWm9vbSA6IHRydWU7XG4gICAgaWYgKGRvdWJsZUNsaWNrWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRG91YmxlQ2xpY2tab29tKHtcbiAgICAgICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgZHJhZ1BhbiA9IG9wdGlvbnMuZHJhZ1BhbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kcmFnUGFuIDogdHJ1ZTtcbiAgICBpZiAoZHJhZ1Bhbikge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgRHJhZ1Bhbih7XG4gICAgICAgICAgICBvbkZvY3VzT25seTogb3B0aW9ucy5vbkZvY3VzT25seSxcbiAgICAgICAgICAgIGtpbmV0aWM6IGtpbmV0aWMsXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdmFyIHBpbmNoUm90YXRlID0gb3B0aW9ucy5waW5jaFJvdGF0ZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5waW5jaFJvdGF0ZSA6IHRydWU7XG4gICAgaWYgKHBpbmNoUm90YXRlKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBQaW5jaFJvdGF0ZSgpKTtcbiAgICB9XG4gICAgdmFyIHBpbmNoWm9vbSA9IG9wdGlvbnMucGluY2hab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnBpbmNoWm9vbSA6IHRydWU7XG4gICAgaWYgKHBpbmNoWm9vbSkge1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgUGluY2hab29tKHtcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIga2V5Ym9hcmQgPSBvcHRpb25zLmtleWJvYXJkICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmtleWJvYXJkIDogdHJ1ZTtcbiAgICBpZiAoa2V5Ym9hcmQpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IEtleWJvYXJkUGFuKCkpO1xuICAgICAgICBpbnRlcmFjdGlvbnMucHVzaChuZXcgS2V5Ym9hcmRab29tKHtcbiAgICAgICAgICAgIGRlbHRhOiBvcHRpb25zLnpvb21EZWx0YSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLnpvb21EdXJhdGlvbixcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB2YXIgbW91c2VXaGVlbFpvb20gPSBvcHRpb25zLm1vdXNlV2hlZWxab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1vdXNlV2hlZWxab29tIDogdHJ1ZTtcbiAgICBpZiAobW91c2VXaGVlbFpvb20pIHtcbiAgICAgICAgaW50ZXJhY3Rpb25zLnB1c2gobmV3IE1vdXNlV2hlZWxab29tKHtcbiAgICAgICAgICAgIG9uRm9jdXNPbmx5OiBvcHRpb25zLm9uRm9jdXNPbmx5LFxuICAgICAgICAgICAgZHVyYXRpb246IG9wdGlvbnMuem9vbUR1cmF0aW9uLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhciBzaGlmdERyYWdab29tID0gb3B0aW9ucy5zaGlmdERyYWdab29tICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNoaWZ0RHJhZ1pvb20gOiB0cnVlO1xuICAgIGlmIChzaGlmdERyYWdab29tKSB7XG4gICAgICAgIGludGVyYWN0aW9ucy5wdXNoKG5ldyBEcmFnWm9vbSh7XG4gICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy56b29tRHVyYXRpb24sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGludGVyYWN0aW9ucztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWludGVyYWN0aW9uLmpzLm1hcCIsImltcG9ydCBDb250cm9sLCB7T3B0aW9uc30gZnJvbSAnb2wvY29udHJvbC9Db250cm9sJztcclxuaW1wb3J0IFBsdWdnYWJsZU1hcCBmcm9tIFwib2wvUGx1Z2dhYmxlTWFwXCI7XHJcblxyXG4vKipcclxuICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgQ29udHJvbHMgd2l0aCBjaGlsZCBjb250cm9sc1xyXG4gKlxyXG4gKiBUaGUgZWxlbWVudCBwcm9wZXJ0eSBvZiB0aGUgQ29tcG9zaXRlQ29udHJvbCB3aWxsIGJlY29tZSB0aGUgdGFyZ2V0IGVsZW1lbnQgb2YgZXZlcnkgY2hpbGQgY29udHJvbFxyXG4gKiBhbmQgYWxzbyB0aGUgY3VycmVudCBtYXAgd2lsbCBiZSBzZXQgZm9yIGVhY2ggY2hpbGQgY29udHJvbFxyXG4gKlxyXG4gKiBUaGlzIGlzIHVzZWQgZS5nLiBmb3IgdGhlIChsYXlvdXQpIGNvbnRhaW5lciBjb250cm9sc1xyXG4gKi9cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbXBvc2l0ZUNvbnRyb2wgZXh0ZW5kcyBDb250cm9sIHtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGNoaWxkIGNvbnRyb2xzXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBjaGlsZENvbnRyb2xzOiBDb250cm9sW107XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgQSBzaW5nbGUgY2hpbGQgY29udHJvbCBvciBhIGNvbGxlY3Rpb24gb2YgY2hpbGQgY29udHJvbHNcclxuICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgT3BlbkxheWVyIGNvbnRyb2wgb3B0aW9uc1xyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihjaGlsZENvbnRyb2xzOiBDb250cm9sIHwgQ29udHJvbFtdLCBvcHRpb25zPzogT3B0aW9ucykge1xyXG5cclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zID8gb3B0aW9ucyA6IHt9O1xyXG5cclxuICAgIGlmKCFvcHRzLmVsZW1lbnQpIHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICBlbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWNvbXBvc2l0ZSc7XHJcbiAgICAgIG9wdHMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNoaWxkcmVuO1xyXG4gICAgaWYgKGNoaWxkQ29udHJvbHMgaW5zdGFuY2VvZiBDb250cm9sKSB7XHJcbiAgICAgIGNoaWxkcmVuID0gW2NoaWxkQ29udHJvbHNdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2hpbGRyZW4gPSBjaGlsZENvbnRyb2xzO1xyXG4gICAgfVxyXG5cclxuICAgIGNoaWxkcmVuLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgIGNvbnRyb2wuc2V0VGFyZ2V0KG9wdHMuZWxlbWVudCBhcyBIVE1MRWxlbWVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlcihvcHRzKTtcclxuXHJcbiAgICB0aGlzLmNoaWxkQ29udHJvbHMgPSBjaGlsZHJlbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBvdmVycmlkZW4gc2V0TWFwIG1ldGhvZFxyXG4gICAqXHJcbiAgICogSGVyZSB3ZSBzZXQgdGhlIG1hcCBmb3IgYWxsIGNoaWxkIGNvbnRyb2xzXHJcbiAgICogQHBhcmFtIG1hcCB0aGUgY3VycmVudCBtYXBcclxuICAgKi9cclxuICBzZXRNYXAobWFwOiBQbHVnZ2FibGVNYXApOiB2b2lkIHtcclxuICAgIHN1cGVyLnNldE1hcChtYXApO1xyXG4gICAgaWYobWFwKSB7XHJcbiAgICAgIHRoaXMuY2hpbGRDb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4ge1xyXG4gICAgICAgIGNvbnRyb2wuc2V0TWFwKG1hcCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBnZXR0ZXIgZm9yIHRoZSBjaGlsZCBjb250cm9sc1xyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0Q2hpbGRDb250cm9scygpOiBDb250cm9sW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuY2hpbGRDb250cm9scztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tIFwib2wvY29udHJvbC9Db250cm9sXCI7XHJcbmltcG9ydCB7Q29tcG9zaXRlQ29udHJvbH0gZnJvbSBcIi4uL2Jhc2VcIjtcclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciBhIHtAbGlua2NvZGUgQ29udGFpbmVyfVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb250YWluZXJPcHRpb25zIGV4dGVuZHMgT3B0aW9ucyB7XHJcbiAgLyoqIFRoZSBzdHlsZSBjbGFzcyBvZiB0aGUgY29udGFpbmVyICoqL1xyXG4gIHN0eWxlQ2xhc3M6IHN0cmluZ1xyXG4gIC8qKiBBIGNoaWxkIGNvbnRyb2wgb3IgYW4gYXJyYXkgb2YgY2hpbGQgY29udHJvbHMgKiovXHJcbiAgY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSxcclxufVxyXG5cclxuLyoqXHJcbiAqIEEgYmFzZSBjbGFzcyBmb3IgYSBjb250YWluZXIgb2YgY29udHJvbHMgaW4gdGhlIHNhbWUgSFRNTCBkaXYgZWxlbWVudFxyXG4gKlxyXG4gKiBUaGlzIGNvbnRyb2wgY3JlYXRlcyBhIHBhcmVudCBkaXYsIGFuZCBwdXRzIHRoZSBjaGlsZCBjb250cm9scyBpbiBpdC5cclxuICogVGFyZ2V0IGFuZCBtYXAgYXJlIHNldCBhdXRvbWF0aWNhbGx5IC0gc2VlIHtAbGlua2NvZGUgQ29tcG9zaXRlQ29udHJvbH1cclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb250YWluZXIgZXh0ZW5kcyBDb21wb3NpdGVDb250cm9sIHtcclxuXHJcbiAgLyoqIFRoZSBzdHlsZSBjbGFzcyBvZiB0aGUgY29udGFpbmVyICoqL1xyXG4gIHByaXZhdGUgcmVhZG9ubHkgc3R5bGVDbGFzczogc3RyaW5nO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjb250YWluZXIgb3B0aW9uc1xyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBDb250YWluZXJPcHRpb25zKSB7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50ID8gb3B0aW9ucy5lbGVtZW50IDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25zLnN0eWxlQ2xhc3MpO1xyXG4gICAgb3B0aW9ucy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgIHN1cGVyKG9wdGlvbnMuY2hpbGRDb250cm9scywgb3B0aW9ucyk7XHJcbiAgICB0aGlzLnN0eWxlQ2xhc3MgPSBvcHRpb25zLnN0eWxlQ2xhc3M7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBIGdldHRlciBmb3IgdGhlIHN0eWxlIGNsYXNzXHJcbiAgICovXHJcbiAgcHVibGljIGdldFN0eWxlQ2xhc3MoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLnN0eWxlQ2xhc3M7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0dlb2xvY2F0aW9uXG4gKi9cbmltcG9ydCBCYXNlRXZlbnQgZnJvbSAnLi9ldmVudHMvRXZlbnQuanMnO1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi9PYmplY3QuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgY2lyY3VsYXIgYXMgY2lyY3VsYXJQb2x5Z29uIH0gZnJvbSAnLi9nZW9tL1BvbHlnb24uanMnO1xuaW1wb3J0IHsgZ2V0IGFzIGdldFByb2plY3Rpb24sIGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucywgaWRlbnRpdHlUcmFuc2Zvcm0sIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IHRvUmFkaWFucyB9IGZyb20gJy4vbWF0aC5qcyc7XG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbnZhciBQcm9wZXJ0eSA9IHtcbiAgICBBQ0NVUkFDWTogJ2FjY3VyYWN5JyxcbiAgICBBQ0NVUkFDWV9HRU9NRVRSWTogJ2FjY3VyYWN5R2VvbWV0cnknLFxuICAgIEFMVElUVURFOiAnYWx0aXR1ZGUnLFxuICAgIEFMVElUVURFX0FDQ1VSQUNZOiAnYWx0aXR1ZGVBY2N1cmFjeScsXG4gICAgSEVBRElORzogJ2hlYWRpbmcnLFxuICAgIFBPU0lUSU9OOiAncG9zaXRpb24nLFxuICAgIFBST0pFQ1RJT046ICdwcm9qZWN0aW9uJyxcbiAgICBTUEVFRDogJ3NwZWVkJyxcbiAgICBUUkFDS0lORzogJ3RyYWNraW5nJyxcbiAgICBUUkFDS0lOR19PUFRJT05TOiAndHJhY2tpbmdPcHRpb25zJyxcbn07XG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEV2ZW50cyBlbWl0dGVkIG9uIEdlb2xvY2F0aW9uIGVycm9yLlxuICovXG52YXIgR2VvbG9jYXRpb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbG9jYXRpb25FcnJvciwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0dlb2xvY2F0aW9uUG9zaXRpb25FcnJvcn0gZXJyb3IgZXJyb3Igb2JqZWN0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEdlb2xvY2F0aW9uRXJyb3IoZXJyb3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgRXZlbnRUeXBlLkVSUk9SKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNvZGUgPSBlcnJvci5jb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBHZW9sb2NhdGlvbkVycm9yO1xufShCYXNlRXZlbnQpKTtcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFufSBbdHJhY2tpbmc9ZmFsc2VdIFN0YXJ0IFRyYWNraW5nIHJpZ2h0IGFmdGVyXG4gKiBpbnN0YW50aWF0aW9uLlxuICogQHByb3BlcnR5IHtQb3NpdGlvbk9wdGlvbnN9IFt0cmFja2luZ09wdGlvbnNdIFRyYWNraW5nIG9wdGlvbnMuXG4gKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFRoZSBwcm9qZWN0aW9uIHRoZSBwb3NpdGlvblxuICogaXMgcmVwb3J0ZWQgaW4uXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydChcIi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzfCdjaGFuZ2U6YWNjdXJhY3knfCdjaGFuZ2U6YWNjdXJhY3lHZW9tZXRyeSd8J2NoYW5nZTphbHRpdHVkZSd8XG4gKiAgICAnY2hhbmdlOmFsdGl0dWRlQWNjdXJhY3knfCdjaGFuZ2U6aGVhZGluZyd8J2NoYW5nZTpwb3NpdGlvbid8J2NoYW5nZTpwcm9qZWN0aW9uJ3wnY2hhbmdlOnNwZWVkJ3wnY2hhbmdlOnRyYWNraW5nJ3xcbiAqICAgICdjaGFuZ2U6dHJhY2tpbmdPcHRpb25zJ30gR2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzXG4gKi9cbi8qKipcbiAqIEB0ZW1wbGF0ZSBSZXR1cm5cbiAqIEB0eXBlZGVmIHtpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8R2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzLCBpbXBvcnQoXCIuL09iamVjdFwiKS5PYmplY3RFdmVudCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTwnZXJyb3InLCBHZW9sb2NhdGlvbkVycm9yLCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXN8R2VvbG9jYXRpb25PYmplY3RFdmVudFR5cGVzfFxuICogICAgICdlcnJvcicsIFJldHVybj59IEdlb2xvY2F0aW9uT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBIZWxwZXIgY2xhc3MgZm9yIHByb3ZpZGluZyBIVE1MNSBHZW9sb2NhdGlvbiBjYXBhYmlsaXRpZXMuXG4gKiBUaGUgW0dlb2xvY2F0aW9uIEFQSV0oaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8pXG4gKiBpcyB1c2VkIHRvIGxvY2F0ZSBhIHVzZXIncyBwb3NpdGlvbi5cbiAqXG4gKiBUbyBnZXQgbm90aWZpZWQgb2YgcG9zaXRpb24gY2hhbmdlcywgcmVnaXN0ZXIgYSBsaXN0ZW5lciBmb3IgdGhlIGdlbmVyaWNcbiAqIGBjaGFuZ2VgIGV2ZW50IG9uIHlvdXIgaW5zdGFuY2Ugb2Yge0BsaW5rIG1vZHVsZTpvbC9HZW9sb2NhdGlvbn5HZW9sb2NhdGlvbn0uXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgdmFyIGdlb2xvY2F0aW9uID0gbmV3IEdlb2xvY2F0aW9uKHtcbiAqICAgICAgIC8vIHRha2UgdGhlIHByb2plY3Rpb24gdG8gdXNlIGZyb20gdGhlIG1hcCdzIHZpZXdcbiAqICAgICAgIHByb2plY3Rpb246IHZpZXcuZ2V0UHJvamVjdGlvbigpXG4gKiAgICAgfSk7XG4gKiAgICAgLy8gbGlzdGVuIHRvIGNoYW5nZXMgaW4gcG9zaXRpb25cbiAqICAgICBnZW9sb2NhdGlvbi5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZ0KSB7XG4gKiAgICAgICB3aW5kb3cuY29uc29sZS5sb2coZ2VvbG9jYXRpb24uZ2V0UG9zaXRpb24oKSk7XG4gKiAgICAgfSk7XG4gKlxuICogQGZpcmVzIG1vZHVsZTpvbC9ldmVudHMvRXZlbnR+QmFzZUV2ZW50I2V2ZW50OmVycm9yXG4gKiBAYXBpXG4gKi9cbnZhciBHZW9sb2NhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2VvbG9jYXRpb24sIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIE9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gR2VvbG9jYXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7R2VvbG9jYXRpb25PblNpZ25hdHVyZTxpbXBvcnQoXCIuL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub247XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dlb2xvY2F0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uY2U7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge0dlb2xvY2F0aW9uT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB1bnByb2plY3RlZCAoRVBTRzo0MzI2KSBkZXZpY2UgcG9zaXRpb24uXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wb3NpdGlvbl8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vcHJvai5qc1wiKS5UcmFuc2Zvcm1GdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRyYW5zZm9ybV8gPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud2F0Y2hJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlBST0pFQ1RJT04sIF90aGlzLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyk7XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFByb3BlcnR5LlRSQUNLSU5HLCBfdGhpcy5oYW5kbGVUcmFja2luZ0NoYW5nZWRfKTtcbiAgICAgICAgaWYgKG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudHJhY2tpbmdPcHRpb25zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFRyYWNraW5nT3B0aW9ucyhvcHRpb25zLnRyYWNraW5nT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuc2V0VHJhY2tpbmcob3B0aW9ucy50cmFja2luZyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy50cmFja2luZyA6IGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhbiB1cC5cbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNldFRyYWNraW5nKGZhbHNlKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKHByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyhnZXRQcm9qZWN0aW9uKCdFUFNHOjQzMjYnKSwgcHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbl8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5QT1NJVElPTiwgdGhpcy50cmFuc2Zvcm1fKHRoaXMucG9zaXRpb25fKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmhhbmRsZVRyYWNraW5nQ2hhbmdlZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgnZ2VvbG9jYXRpb24nIGluIG5hdmlnYXRvcikge1xuICAgICAgICAgICAgdmFyIHRyYWNraW5nID0gdGhpcy5nZXRUcmFja2luZygpO1xuICAgICAgICAgICAgaWYgKHRyYWNraW5nICYmIHRoaXMud2F0Y2hJZF8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hJZF8gPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbih0aGlzLnBvc2l0aW9uQ2hhbmdlXy5iaW5kKHRoaXMpLCB0aGlzLnBvc2l0aW9uRXJyb3JfLmJpbmQodGhpcyksIHRoaXMuZ2V0VHJhY2tpbmdPcHRpb25zKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIXRyYWNraW5nICYmIHRoaXMud2F0Y2hJZF8gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMud2F0Y2hJZF8pO1xuICAgICAgICAgICAgICAgIHRoaXMud2F0Y2hJZF8gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtHZW9sb2NhdGlvblBvc2l0aW9ufSBwb3NpdGlvbiBwb3NpdGlvbiBldmVudC5cbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUucG9zaXRpb25DaGFuZ2VfID0gZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgIHZhciBjb29yZHMgPSBwb3NpdGlvbi5jb29yZHM7XG4gICAgICAgIHRoaXMuc2V0KFByb3BlcnR5LkFDQ1VSQUNZLCBjb29yZHMuYWNjdXJhY3kpO1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5BTFRJVFVERSwgY29vcmRzLmFsdGl0dWRlID09PSBudWxsID8gdW5kZWZpbmVkIDogY29vcmRzLmFsdGl0dWRlKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuQUxUSVRVREVfQUNDVVJBQ1ksIGNvb3Jkcy5hbHRpdHVkZUFjY3VyYWN5ID09PSBudWxsID8gdW5kZWZpbmVkIDogY29vcmRzLmFsdGl0dWRlQWNjdXJhY3kpO1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5IRUFESU5HLCBjb29yZHMuaGVhZGluZyA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IHRvUmFkaWFucyhjb29yZHMuaGVhZGluZykpO1xuICAgICAgICBpZiAoIXRoaXMucG9zaXRpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uXyA9IFtjb29yZHMubG9uZ2l0dWRlLCBjb29yZHMubGF0aXR1ZGVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl9bMF0gPSBjb29yZHMubG9uZ2l0dWRlO1xuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbl9bMV0gPSBjb29yZHMubGF0aXR1ZGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2plY3RlZFBvc2l0aW9uID0gdGhpcy50cmFuc2Zvcm1fKHRoaXMucG9zaXRpb25fKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUE9TSVRJT04sIHByb2plY3RlZFBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuU1BFRUQsIGNvb3Jkcy5zcGVlZCA9PT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvb3Jkcy5zcGVlZCk7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IGNpcmN1bGFyUG9seWdvbih0aGlzLnBvc2l0aW9uXywgY29vcmRzLmFjY3VyYWN5KTtcbiAgICAgICAgZ2VvbWV0cnkuYXBwbHlUcmFuc2Zvcm0odGhpcy50cmFuc2Zvcm1fKTtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuQUNDVVJBQ1lfR0VPTUVUUlksIGdlb21ldHJ5KTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7R2VvbG9jYXRpb25Qb3NpdGlvbkVycm9yfSBlcnJvciBlcnJvciBvYmplY3QuXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLnBvc2l0aW9uRXJyb3JfID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgR2VvbG9jYXRpb25FcnJvcihlcnJvcikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24gaW4gbWV0ZXJzLlxuICAgICAqIEByZXR1cm4ge251bWJlcnx1bmRlZmluZWR9IFRoZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24gbWVhc3VyZW1lbnQgaW5cbiAgICAgKiAgICAgbWV0ZXJzLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRBY2N1cmFjeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSBnZW9tZXRyeSBvZiB0aGUgcG9zaXRpb24gYWNjdXJhY3kuXG4gICAgICogQHJldHVybiB7P2ltcG9ydChcIi4vZ2VvbS9Qb2x5Z29uLmpzXCIpLmRlZmF1bHR9IEEgZ2VvbWV0cnkgb2YgdGhlIHBvc2l0aW9uIGFjY3VyYWN5LlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRBY2N1cmFjeUdlb21ldHJ5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHs/aW1wb3J0KFwiLi9nZW9tL1BvbHlnb24uanNcIikuZGVmYXVsdH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkFDQ1VSQUNZX0dFT01FVFJZKSB8fCBudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYWx0aXR1ZGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgYWx0aXR1ZGUgb2YgdGhlIHBvc2l0aW9uIGluIG1ldGVycyBhYm92ZSBtZWFuXG4gICAgICogICAgIHNlYSBsZXZlbC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0QWx0aXR1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BTFRJVFVERSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbHRpdHVkZSBhY2N1cmFjeSBvZiB0aGUgcG9zaXRpb24uXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGFjY3VyYWN5IG9mIHRoZSBhbHRpdHVkZSBtZWFzdXJlbWVudCBpblxuICAgICAqICAgICBtZXRlcnMuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldEFsdGl0dWRlQWNjdXJhY3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5BTFRJVFVERV9BQ0NVUkFDWSkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBoZWFkaW5nIGFzIHJhZGlhbnMgY2xvY2t3aXNlIGZyb20gTm9ydGguXG4gICAgICogTm90ZTogZGVwZW5kaW5nIG9uIHRoZSBicm93c2VyLCB0aGUgaGVhZGluZyBpcyBvbmx5IGRlZmluZWQgaWYgdGhlIGBlbmFibGVIaWdoQWNjdXJhY3lgXG4gICAgICogaXMgc2V0IHRvIGB0cnVlYCBpbiB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfSBUaGUgaGVhZGluZyBvZiB0aGUgZGV2aWNlIGluIHJhZGlhbnMgZnJvbSBub3J0aC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0SGVhZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LkhFQURJTkcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcG9zaXRpb24gb2YgdGhlIGRldmljZS5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZXx1bmRlZmluZWR9IFRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBkZXZpY2UgcmVwb3J0ZWRcbiAgICAgKiAgICAgaW4gdGhlIGN1cnJlbnQgcHJvamVjdGlvbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0UG9zaXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge2ltcG9ydChcIi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBPU0lUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHByb2plY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gVGhlIHByb2plY3Rpb24gdGhlIHBvc2l0aW9uIGlzXG4gICAgICogICAgIHJlcG9ydGVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlBST0pFQ1RJT04pKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3BlZWQgaW4gbWV0ZXJzIHBlciBzZWNvbmQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH0gVGhlIGluc3RhbnRhbmVvdXMgc3BlZWQgb2YgdGhlIGRldmljZSBpbiBtZXRlcnNcbiAgICAgKiAgICAgcGVyIHNlY29uZC5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuZ2V0U3BlZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAvKiogQHR5cGUge251bWJlcnx1bmRlZmluZWR9ICovICh0aGlzLmdldChQcm9wZXJ0eS5TUEVFRCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSBkZXZpY2UgbG9jYXRpb24gaXMgYmVpbmcgdHJhY2tlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgZGV2aWNlIGxvY2F0aW9uIGlzIGJlaW5nIHRyYWNrZWQuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFRyYWNraW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtib29sZWFufSAqLyAodGhpcy5nZXQoUHJvcGVydHkuVFJBQ0tJTkcpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb24tb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJuIHtQb3NpdGlvbk9wdGlvbnN8dW5kZWZpbmVkfSBQb3NpdGlvbk9wdGlvbnMgYXMgZGVmaW5lZCBieVxuICAgICAqICAgICB0aGUgW0hUTUw1IEdlb2xvY2F0aW9uIHNwZWNcbiAgICAgKiAgICAgXShodHRwczovL3d3dy53My5vcmcvVFIvZ2VvbG9jYXRpb24tQVBJLyNwb3NpdGlvbl9vcHRpb25zX2ludGVyZmFjZSkuXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgR2VvbG9jYXRpb24ucHJvdG90eXBlLmdldFRyYWNraW5nT3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7UG9zaXRpb25PcHRpb25zfHVuZGVmaW5lZH0gKi8gKHRoaXMuZ2V0KFByb3BlcnR5LlRSQUNLSU5HX09QVElPTlMpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgcHJvamVjdGlvbiB0byB1c2UgZm9yIHRyYW5zZm9ybWluZyB0aGUgY29vcmRpbmF0ZXMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gVGhlIHByb2plY3Rpb24gdGhlIHBvc2l0aW9uIGlzXG4gICAgICogICAgIHJlcG9ydGVkIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5zZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuUFJPSkVDVElPTiwgZ2V0UHJvamVjdGlvbihwcm9qZWN0aW9uKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBFbmFibGUgb3IgZGlzYWJsZSB0cmFja2luZy5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHRyYWNraW5nIEVuYWJsZSB0cmFja2luZy5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBHZW9sb2NhdGlvbi5wcm90b3R5cGUuc2V0VHJhY2tpbmcgPSBmdW5jdGlvbiAodHJhY2tpbmcpIHtcbiAgICAgICAgdGhpcy5zZXQoUHJvcGVydHkuVFJBQ0tJTkcsIHRyYWNraW5nKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdHJhY2tpbmcgb3B0aW9ucy5cbiAgICAgKiBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvZ2VvbG9jYXRpb24tQVBJLyNwb3NpdGlvbi1vcHRpb25zLlxuICAgICAqIEBwYXJhbSB7UG9zaXRpb25PcHRpb25zfSBvcHRpb25zIFBvc2l0aW9uT3B0aW9ucyBhcyBkZWZpbmVkIGJ5IHRoZVxuICAgICAqICAgICBbSFRNTDUgR2VvbG9jYXRpb24gc3BlY1xuICAgICAqICAgICBdKGh0dHA6Ly93d3cudzMub3JnL1RSL2dlb2xvY2F0aW9uLUFQSS8jcG9zaXRpb25fb3B0aW9uc19pbnRlcmZhY2UpLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEdlb2xvY2F0aW9uLnByb3RvdHlwZS5zZXRUcmFja2luZ09wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldChQcm9wZXJ0eS5UUkFDS0lOR19PUFRJT05TLCBvcHRpb25zKTtcbiAgICB9O1xuICAgIHJldHVybiBHZW9sb2NhdGlvbjtcbn0oQmFzZU9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgR2VvbG9jYXRpb247XG4vLyMgc291cmNlTWFwcGluZ1VSTD1HZW9sb2NhdGlvbi5qcy5tYXAiLCJpbXBvcnQgQ29udHJvbCwge09wdGlvbnN9IGZyb20gXCJvbC9jb250cm9sL0NvbnRyb2xcIjtcclxuaW1wb3J0IHtDb21wb3NpdGVDb250cm9sfSBmcm9tIFwiLi9Db21wb3NpdGVDb250cm9sXCI7XHJcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xyXG5pbXBvcnQgRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xyXG5pbXBvcnQge09iamVjdE9uU2lnbmF0dXJlfSBmcm9tIFwib2wvT2JqZWN0XCI7XHJcbmltcG9ydCB7T25SZXR1cm59IGZyb20gXCJvbC9PYnNlcnZhYmxlXCI7XHJcblxyXG4vKipcclxuICogT3B0aW9ucyBmb3Ige0BsaW5rY29kZSBCdXR0b259XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEJ1dHRvbk9wdGlvbnMgZXh0ZW5kcyBPcHRpb25zIHtcclxuXHJcbiAgLyoqIFRoZSB1bmljb2RlIG51bWJlciBvZiB0aGUgZm9udCBpY29uLCBlLmcuIDB4ZTkwMyAqKi9cclxuICB1bmljb2RlPzogbnVtYmVyIHwgbnVsbCxcclxuXHJcbiAgLyoqIFRoZSB0ZXh0IHVzZWQgZm9yIHRoZSB0aXRsZSBhbmQgYXJpYSBhdHRyaWJ1dGVzIG9mIHRoZSBidXR0b24gY29udGFpbmVyIGFuZCB0aGUgYnV0dG9uIGl0c2VsZi4gKiovXHJcbiAgdG9vbHRpcD86IHN0cmluZyxcclxuXHJcbiAgLyoqIFN0eWxlIGNsYXNzIG5hbWUgZm9yIHRoZSBjb250YWluZXIgICoqL1xyXG4gIGNvbnRhaW5lckNsYXNzTmFtZT86IHN0cmluZyxcclxuXHJcbiAgLyoqIFN0eWxlIGNsYXNzIG5hbWUgZm9yIHRoZSBidXR0b24gZWxlbWVudCAqKi9cclxuICBpY29uQ2xhc3NOYW1lPzogc3RyaW5nIHwgbnVsbCxcclxuXHJcbiAgLyoqIElmICd0cnVlJyB0aGUgdG9vbHRpcCB0ZXh0IHdpbGwgYmUgcmVuZGVyZWQgYXMgdmlzaWJsZSB0ZXh0IGVsZW1lbnQgICoqL1xyXG4gIHRvb2x0aXBBc1RleHRFbGVtZW50PzogYm9vbGVhbixcclxuXHJcbiAgLyoqIElmICd0cnVlJyB0aGUgZGVmYXVsdCBidXR0b24gY2xpY2sgaGFuZGxlciB3aWxsIG5vdCBiZSBleGVjdXRlZCAqKi9cclxuICBwcmV2ZW50RGVmYXVsdD86IGJvb2xlYW5cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBleHRlbmRlZCBzaWduYXR1cmUgZm9yIHRoZSBvbiBtZXRob2RcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmV4cG9ydCB0eXBlIEJ1dHRvbk9uU2lnbmF0dXJlPFJldHVybj4gPSAoKHR5cGU6IFwiY2xpY2tcIiB8IFwiY2xpY2tcIltdLCBsaXN0ZW5lcjogKGV2ZW50OiBFdmVudCkgPT4gYW55KSA9PiBSZXR1cm4pICYgT2JqZWN0T25TaWduYXR1cmU8UmV0dXJuPjtcclxuXHJcbi8qKlxyXG4gKiAqKkFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGJ1dHRvbnMqKlxyXG4gKlxyXG4gKiBBIGJ1dHRvbiBpcyBhbiBPcGVuTGF5ZXIgY29udHJvbCB3aXRoIGEgZGVmYXVsdCBsYXlvdXQuIFlvdSBjYW4gY2hhbmdlIHNvbWUgc3R5bGUgY2xhc3NlcywgdG9vbHRpcHMgZXRjXHJcbiAqIHdpdGggdGhlIHtAbGlua2NvZGUgQnV0dG9uT3B0aW9uc31cclxuICpcclxuICogU29tZSBidXR0b25zIGV4dGVudCBmcm9tIE9wZW5MYXllciBjb250cm9scyB3aXRoIGl0cyBmZWF0dXJlcywgYnV0IG1vc3Qgb2YgdGhlbSBhcmUganVzdCBhIHNoZWxsIGZvciBmdXJ0aGVyIGltcGxlbWVudGF0aW9uc1xyXG4gKlxyXG4gKiBZb3UgY2FuIHNldCB0aGUgaWNvbiBmb250IG9mIHRoZSBidXR0b24gd2l0aCB0aGUgdW5pY29kZSBudW1iZXIgb3IgdGhlIGljb25DbGFzc05hbWUgb3B0aW9uLlxyXG4gKlxyXG4gKiBAZXZlbnQgY2xpY2sgQSBCdXR0b24gZGlzcGF0Y2hlcyB0aGUgQ0xJQ0sgZXZlbnQgc28gdGhhdCB5b3UgY2FuIGxpc3RlbiB0byBpdCB3aXRoIHRoZSAqb24qIE9wZW5MYXllciBtZXRob2RcclxuICogRXhhbXBsZTpcclxuICogYGBgdHlwZXNjcmlwdFxyXG4gKiBjb25zdCBwcmludEN0cmwgPSBuZXcgUHJpbnQoeyBwcmV2ZW50RGVmYXVsdDogdHJ1ZSB9KTtcclxuICogcHJpbnRDdHJsLm9uKEV2ZW50VHlwZS5DTElDSywgdGhpcy5oYW5kbGVQcmludCk7XHJcbiAqIGBgYFxyXG4gKiBBbHRlcm5hdGl2bHkgeW91IGNhbiBvdmVycmlkZSB0aGUge0BsaW5rY29kZSBoYW5kbGVFdmVudH0gbWV0aG9kXHJcbiAqXHJcbiAqIEByZW1hcmsgQXMgYSBidXR0b24gaXMgYWxzbyBhIENvbXBvc2l0ZUNvbnRyb2wgaXQgY2FuIGhhdmUgY2hpbGQgY29udHJvbHMuIEUuZy4gaXQncyB1c2VkIHdpdGggdGhlIHtAbGlua2NvZGUgVG9nZ2xlQnV0dG9ufVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJ1dHRvbiBleHRlbmRzIENvbXBvc2l0ZUNvbnRyb2wge1xyXG5cclxuICAvKiogVGhlIEhUTUwgZWxlbWVudCBvZiB0aGUgYnV0dG9uICoqL1xyXG4gIHByb3RlY3RlZCBidXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAvKiogVGhlIHVuaWNvZGUgZm9yIHRoZSBmb250IGljb24gKiovXHJcbiAgcHJvdGVjdGVkIHVuaWNvZGU6IG51bWJlciB8IG51bGw7XHJcblxyXG4gIC8qKiBUaGUgaWNvbnMgY3NzIGNsYXNzIG5hbWUgKiovXHJcbiAgcHJvdGVjdGVkIGljb25DbGFzc05hbWU6IHN0cmluZyB8IG51bGw7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqKi9cclxuICBwdWJsaWMgb24hOiBCdXR0b25PblNpZ25hdHVyZTxPblJldHVybj47XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgQnV0dG9uIG9wdGlvbnNcclxuICAgKiBAcGFyYW0gY2hpbGRDb250cm9scyBPcHRpb25hbCBjaGlsZCBjb250cm9sc1xyXG4gICAqIEBldmVudCBjbGljayBUaGUgZXZlbnQgZmlyZWQgd2hlbiB0aGUgYnV0dG9uIGlzIGNsaWNrZWRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3Iob3B0aW9uczogQnV0dG9uT3B0aW9ucywgY2hpbGRDb250cm9scz86IENvbnRyb2wgfCBDb250cm9sW10pIHtcclxuXHJcbiAgICBvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50ID0gb3B0aW9ucy50b29sdGlwQXNUZXh0RWxlbWVudCA/IG9wdGlvbnMudG9vbHRpcEFzVGV4dEVsZW1lbnQgOiBmYWxzZTtcclxuXHJcbiAgICBvcHRpb25zLnVuaWNvZGUgPSBvcHRpb25zLnVuaWNvZGUgfHwgbnVsbDtcclxuICAgIG9wdGlvbnMuaWNvbkNsYXNzTmFtZSA9IG9wdGlvbnMuaWNvbkNsYXNzTmFtZSB8fCBudWxsO1xyXG4gICAgaWYob3B0aW9ucy51bmljb2RlPT09bnVsbCAmJiBvcHRpb25zLmljb25DbGFzc05hbWU9PT1udWxsKSB7XHJcbiAgICAgIG9wdGlvbnMudW5pY29kZSA9IDB4ZTkwMztcclxuICAgIH1cclxuICAgIG9wdGlvbnMudG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcCB8fCAnJztcclxuXHJcbiAgICBjb25zdCBidXR0b25Db250YWluZXJFbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50ID8gb3B0aW9ucy5lbGVtZW50IDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICBidXR0b25Db250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9IG9wdGlvbnMuY29udGFpbmVyQ2xhc3NOYW1lID8gb3B0aW9ucy5jb250YWluZXJDbGFzc05hbWUgOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wnO1xyXG4gICAgYnV0dG9uQ29udGFpbmVyRWxlbWVudC50aXRsZSA9IG9wdGlvbnMudG9vbHRpcDtcclxuXHJcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWljb24tYnV0dG9uJztcclxuXHJcbiAgICBpZihvcHRpb25zLnVuaWNvZGUgIT09IG51bGwpIHtcclxuICAgICAgYnV0dG9uRWxlbWVudC50ZXh0Q29udGVudCA9IFN0cmluZy5mcm9tQ29kZVBvaW50KG9wdGlvbnMudW5pY29kZSk7XHJcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuaWNvbkNsYXNzTmFtZSAhPT0gbnVsbCkge1xyXG4gICAgICBidXR0b25FbGVtZW50LmFwcGVuZENoaWxkKEJ1dHRvbi5nZXRJY29uRWxlbWVudEZvckljb25DbGFzc05hbWUob3B0aW9ucy5pY29uQ2xhc3NOYW1lKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYnV0dG9uRWxlbWVudC50aXRsZSA9IG9wdGlvbnMudG9vbHRpcDtcclxuICAgIGlmKG9wdGlvbnMudG9vbHRpcC5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgb3B0aW9ucy50b29sdGlwKTtcclxuICAgIH1cclxuICAgIGJ1dHRvbkNvbnRhaW5lckVsZW1lbnQuYXBwZW5kKGJ1dHRvbkVsZW1lbnQpO1xyXG5cclxuICAgIGlmIChvcHRpb25zLnRvb2x0aXBBc1RleHRFbGVtZW50KSB7XHJcbiAgICAgIGNvbnN0IGRpdkVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgZGl2RWxlbWVudC5jbGFzc05hbWUgPSAnYmdpcy1jb250cm9sLWJ1dHRvbi10ZXh0LWNvbnRhaW5lcic7XHJcbiAgICAgIGNvbnN0IHNwYW5FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpIGFzIEhUTUxTcGFuRWxlbWVudDtcclxuICAgICAgc3BhbkVsZW1lbnQudGV4dENvbnRlbnQgPSBvcHRpb25zLnRvb2x0aXA7XHJcbiAgICAgIHNwYW5FbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWNvbnRyb2wtYnV0dG9uLXRleHQnO1xyXG4gICAgICBkaXZFbGVtZW50LmFwcGVuZENoaWxkKHNwYW5FbGVtZW50KTtcclxuICAgICAgYnV0dG9uQ29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChkaXZFbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBzdXBlcihjaGlsZENvbnRyb2xzID8gY2hpbGRDb250cm9scyA6IFtdLCB7XHJcbiAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgIGVsZW1lbnQ6IGJ1dHRvbkNvbnRhaW5lckVsZW1lbnRcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudW5pY29kZSA9IG9wdGlvbnMudW5pY29kZTtcclxuICAgIHRoaXMuaWNvbkNsYXNzTmFtZSA9IG9wdGlvbnMuaWNvbkNsYXNzTmFtZTtcclxuICAgIHRoaXMuYnV0dG9uID0gYnV0dG9uRWxlbWVudDtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuZGlzcGF0Y2hFdmVudChcImNsaWNrXCIpLCBmYWxzZSk7XHJcblxyXG4gICAgaWYoIW9wdGlvbnMucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgdGhpcy5vbihcImNsaWNrXCIsIHRoaXMuaGFuZGxlRXZlbnQpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoaXMgaXMgdGhlIGRlZmF1bHQgY2xpY2sgaGFuZGxlciBvZiBhIGJ1dHRvblxyXG4gICAqXHJcbiAgICogT3ZlcnJpZGUgaXQgZm9yIHlvdXIgYmVuZWZpdCBvciBkaXNhYmxlIGV4ZWN1dGlvbiB3aXRoIG9wdGlvbnMucHJldmVudERlZmF1bHRcclxuICAgKiBAcGFyYW0gZXZlbnRcclxuICAgKi9cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXHJcbiAgcHVibGljIGhhbmRsZUV2ZW50KGV2ZW50OiBCYXNlRXZlbnQpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGdldHRlciBmb3IgdGhlIGJ1dHRvblxyXG4gICAqL1xyXG4gIHB1YmxpYyBnZXRCdXR0b24oKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xyXG4gICAgcmV0dXJuIHRoaXMuYnV0dG9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBzZXR0ZXIgdG8gY2hhbmdlIHRoZSB1bmljb2RlIGZvciB0aGUgYnV0dG9uIGZvbnQgaWNvbi5cclxuICAgKiBSZW1vdmVzIHRoZSBpY29uIHRhZyBmb3IgdGhlIGJ1dHRvbi5cclxuICAgKiBAcGFyYW0gdW5pY29kZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRCdXR0b25Vbmljb2RlKHVuaWNvZGU6IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5nZXRCdXR0b24oKS5pbm5lckhUTUwgPSAnJztcclxuICAgIHRoaXMuZ2V0QnV0dG9uKCkudGV4dENvbnRlbnQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCh1bmljb2RlKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEEgc2V0dGVyIHRvIGNoYW5nZSB0aGUgaWNvbiBjbGFzcyBuYW1lIGZvciB0aGUgYnV0dG9uLlxyXG4gICAqIFJlc2V0cyB0aGUgdW5pY29kZSBmb3IgdGhlIGJ1dHRvbiBpY29uLlxyXG4gICAqIEBwYXJhbSBpY29uQ2xhc3NOYW1lXHJcbiAgICovXHJcbiAgcHVibGljIHNldEJ1dHRvbkljb25DbGFzc05hbWUoaWNvbkNsYXNzTmFtZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0aGlzLmdldEJ1dHRvbigpLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB0aGlzLmdldEJ1dHRvbigpLmlubmVySFRNTCA9ICcnO1xyXG4gICAgdGhpcy5nZXRCdXR0b24oKS5hcHBlbmRDaGlsZChCdXR0b24uZ2V0SWNvbkVsZW1lbnRGb3JJY29uQ2xhc3NOYW1lKGljb25DbGFzc05hbWUpKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCBhbiBpY29uIGVsZW1lbnQgZm9yIHRoZSBnaXZlbiBjc3MgY2xhc3MgbmFtZVxyXG4gICAqXHJcbiAgICogQHBhcmFtIGljb25DbGFzc05hbWVcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgc3RhdGljIGdldEljb25FbGVtZW50Rm9ySWNvbkNsYXNzTmFtZShpY29uQ2xhc3NOYW1lOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBpY29uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgIGljb25FbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLWljb24gJyArIGljb25DbGFzc05hbWU7XHJcbiAgICByZXR1cm4gaWNvbkVsZW1lbnQ7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgR2VvbG9jYXRpb24sIHtPcHRpb25zIGFzIE9sR2VvTG9jYXRpb25PcHRpb25zfSBmcm9tICdvbC9HZW9sb2NhdGlvbic7XHJcbmltcG9ydCB7QnV0dG9ufSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCBCYXNlRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xyXG5pbXBvcnQgRXZlbnQgZnJvbSBcIm9sL2V2ZW50cy9FdmVudFwiO1xyXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gXCJvbC9ldmVudHMvRXZlbnRUeXBlXCI7XHJcbmltcG9ydCB7QnV0dG9uT25TaWduYXR1cmUsIEJ1dHRvbk9wdGlvbnN9IGZyb20gXCIuL2Jhc2UvQnV0dG9uXCI7XHJcbmltcG9ydCB7ZnJvbUxvbkxhdH0gZnJvbSBcIm9sL3Byb2pcIjtcclxuaW1wb3J0IHtDb29yZGluYXRlfSBmcm9tIFwib2wvY29vcmRpbmF0ZVwiO1xyXG5pbXBvcnQge09uUmV0dXJufSBmcm9tIFwib2wvT2JzZXJ2YWJsZVwiO1xyXG5cclxuLyoqXHJcbiAqIFRoZSBleHRlbmRlZCBzaWduYXR1cmUgZm9yIHRoZSBvbiBtZXRob2RcclxuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmV4cG9ydCB0eXBlIEdlb2xvY2F0ZU9uU2lnbmF0dXJlPFJldHVybj4gPSAoKHR5cGU6IFwibG9jYXRpb25fcmV0cmlldmVkXCIgfCBcImxvY2F0aW9uX3JldHJpZXZlZFwiW10sIGxpc3RlbmVyOiAoZXZlbnQ6IExvY2F0aW9uUmV0cmlldmVkRXZlbnQpID0+IGFueSkgPT4gUmV0dXJuKSAmIEJ1dHRvbk9uU2lnbmF0dXJlPFJldHVybj47XHJcblxyXG4vKipcclxuICogVGhlIGxvY2F0aW9uIHJldHJpZXZlZCBldmVudCB3aGljaCBpcyBkaXNwYXRjaGVkIHdoZW4gd2UgcmV0cmlldmUgYSBwb3NpdGlvbiB2aWEgdGhlIHtAbGlua2NvZGUgR2VvTG9jYXRlfSBidXR0b25cclxuICpcclxuICogQFRPRE8gZXh0ZW5kIHRvIHJldHJpZXZlIG1vcmUgaW5mb3JtYXRpb24gZnJvbSB0aGUgT3BlbmxheWVycyBHZW9sb2NhdGUgb2JqZWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTG9jYXRpb25SZXRyaWV2ZWRFdmVudCBleHRlbmRzIEV2ZW50IHtcclxuXHJcbiAgLyoqIHlvdXIgY3VycmVudCBwb3NpdGlvbiAqKi9cclxuICBwb3NpdGlvbjogQ29vcmRpbmF0ZTtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gdHlwZSBUaGUgZXZlbnQgdHlwZS4gVXN1YWxseSBhIHtAbGlua2NvZGUgTG9jYXRpb25SZXRyaWV2ZWRFdmVudFR5cGV9XHJcbiAgICogQHBhcmFtIHBvc2l0aW9uIFlvdXIgY3VycmVudCBwb3NpdGlvblxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZywgcG9zaXRpb246IENvb3JkaW5hdGUpIHtcclxuICAgIHN1cGVyKHR5cGUpO1xyXG5cclxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQSB7QGxpbmtDb2RlIEJ1dHRvbn0gdG8gcmV0cmlldmUgeW91ciBjdXJyZW50IHBvc2l0aW9uXHJcbiAqXHJcbiAqIFRoaXMgY2xhc3MgdXNlcyB0aGUgT3BlbkxheWVycyBHZW9sb2NhdGlvbiBvYmplY3QgdG8gZmV0Y2ggdGhlIGN1cnJlbnQgcG9zaXRpb24uXHJcbiAqIFdoZW4gd2UgcmV0cmlldmUgdGhlIGN1cnJlbnQgcG9zaXRpb24sIGEgTG9jYXRpb25SZXRyaWV2ZWRFdmVudCBpcyBmaXJlZFxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdlb0xvY2F0ZSBleHRlbmRzIEJ1dHRvbiB7XHJcblxyXG4gIC8qKiBUaGUgT3BlbkxheWVycyBHZW9sb2NhdGlvbiBvYmplY3QgKiovXHJcbiAgcHJvdGVjdGVkIF9nZW9Mb2NhdGlvbjogR2VvbG9jYXRpb247XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvdmVycmlkZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBvbiE6IEdlb2xvY2F0ZU9uU2lnbmF0dXJlPE9uUmV0dXJuPjtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0gb3B0aW9uc1xyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBCdXR0b25PcHRpb25zIHwgT2xHZW9Mb2NhdGlvbk9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdHMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgc3VwZXIoe3VuaWNvZGU6IDB4ZTkzNiwgY29udGFpbmVyQ2xhc3NOYW1lOiAnb2wtY29udHJvbCBiZ2lzLWNvbnRyb2wgb2wtZ2VvbG9jYXRlJywgdG9vbHRpcDogJ1N0YW5kb3J0IHplbnRyaWVyZW4nLCAuLi5vcHRzIH0pO1xyXG5cclxuICAgIGNvbnN0IGdlb0xvY2F0aW9uT3B0aW9ucyA9IChvcHRpb25zIHx8IHt9KSBhcyBPbEdlb0xvY2F0aW9uT3B0aW9ucztcclxuICAgIHRoaXMuX2dlb0xvY2F0aW9uID0gbmV3IEdlb2xvY2F0aW9uKGdlb0xvY2F0aW9uT3B0aW9ucyk7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAb3ZlcnJpZGVcclxuICAgKiBAcGFyYW0gZXZlbnRcclxuICAgKi9cclxuICBwdWJsaWMgaGFuZGxlRXZlbnQoZXZlbnQ6IEV2ZW50IHwgQmFzZUV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICBpZihldmVudC50eXBlID09PSBFdmVudFR5cGUuQ0xJQ0spIHtcclxuXHJcbiAgICAgIGlmKHRoaXMuZ2VvTG9jYXRpb24gJiYgdGhpcy5nZXRNYXAoKT8uZ2V0VmlldygpPy5nZXRQcm9qZWN0aW9uKCkpIHtcclxuICAgICAgICB0aGlzLmdlb0xvY2F0aW9uLm9uY2UoJ2NoYW5nZScsICgpID0+IHtcclxuICAgICAgICAgIHRoaXMuZ2VvTG9jYXRpb24uc2V0VHJhY2tpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgdGhpcy5nZXRNYXAoKS5nZXRWaWV3KCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgIGNlbnRlcjogZnJvbUxvbkxhdCh0aGlzLmdlb0xvY2F0aW9uLmdldFBvc2l0aW9uKCkgYXMgbnVtYmVyW10pLFxyXG4gICAgICAgICAgICBkdXJhdGlvbjogMzAwLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBpZih0aGlzLmdlb0xvY2F0aW9uLmdldFBvc2l0aW9uKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBMb2NhdGlvblJldHJpZXZlZEV2ZW50KFwibG9jYXRpb25fcmV0cmlldmVkXCIsIHRoaXMuZ2VvTG9jYXRpb24uZ2V0UG9zaXRpb24oKSEpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmdlb0xvY2F0aW9uLnNldFRyYWNraW5nKHRydWUpO1xyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQSBnZXR0ZXIgZm9yIHRoZSBPcGVuTGF5ZXJzIEdlb2xvY2F0aW9uIG9iamVjdFxyXG4gICAqL1xyXG4gIGdldCBnZW9Mb2NhdGlvbigpOiBHZW9sb2NhdGlvbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fZ2VvTG9jYXRpb247XHJcbiAgfVxyXG59XHJcbiIsIi8qKlxuICogQG1vZHVsZSBvbC9jb250cm9sL01vdXNlUG9zaXRpb25cbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBDb250cm9sIGZyb20gJy4vQ29udHJvbC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL3BvaW50ZXIvRXZlbnRUeXBlLmpzJztcbmltcG9ydCB7IGdldCBhcyBnZXRQcm9qZWN0aW9uLCBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnMsIGdldFVzZXJQcm9qZWN0aW9uLCBpZGVudGl0eVRyYW5zZm9ybSwgfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGxpc3RlbiB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbnZhciBQUk9KRUNUSU9OID0gJ3Byb2plY3Rpb24nO1xuLyoqXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG52YXIgQ09PUkRJTkFURV9GT1JNQVQgPSAnY29vcmRpbmF0ZUZvcm1hdCc7XG4vKioqXG4gKiBAdGVtcGxhdGUgUmV0dXJuXG4gKiBAdHlwZWRlZiB7aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkV2ZW50VHlwZXMsIGltcG9ydChcIi4uL2V2ZW50cy9FdmVudC5qc1wiKS5kZWZhdWx0LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5PblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgJ2NoYW5nZTpjb29yZGluYXRlRm9ybWF0J3wnY2hhbmdlOnByb2plY3Rpb24nLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLkNvbWJpbmVkT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzfGltcG9ydChcIi4uL09iamVjdEV2ZW50VHlwZVwiKS5UeXBlc3xcbiAqICAgICAnY2hhbmdlOmNvb3JkaW5hdGVGb3JtYXQnfCdjaGFuZ2U6cHJvamVjdGlvbicsIFJldHVybj59IE1vdXNlUG9zaXRpb25PblNpZ25hdHVyZVxuICovXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbY2xhc3NOYW1lPSdvbC1tb3VzZS1wb3NpdGlvbiddIENTUyBjbGFzcyBuYW1lLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR9IFtjb29yZGluYXRlRm9ybWF0XSBDb29yZGluYXRlIGZvcm1hdC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vTWFwRXZlbnQuanNcIikuZGVmYXVsdCk6dm9pZH0gW3JlbmRlcl0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gdGhlXG4gKiBjb250cm9sIHNob3VsZCBiZSByZS1yZW5kZXJlZC4gVGhpcyBpcyBjYWxsZWQgaW4gYSBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYFxuICogY2FsbGJhY2suXG4gKiBAcHJvcGVydHkge0hUTUxFbGVtZW50fHN0cmluZ30gW3RhcmdldF0gU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGVcbiAqIGNvbnRyb2wgdG8gYmUgcmVuZGVyZWQgb3V0c2lkZSBvZiB0aGUgbWFwJ3Mgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge3N0cmluZ3xib29sZWFufSBbcGxhY2Vob2xkZXJdIE1hcmt1cCB0byBzaG93IHdoZW4gdGhlIG1vdXNlIHBvc2l0aW9uIGlzIG5vdFxuICogYXZhaWxhYmxlIChlLmcuIHdoZW4gdGhlIHBvaW50ZXIgbGVhdmVzIHRoZSBtYXAgdmlld3BvcnQpLiAgQnkgZGVmYXVsdCwgYSBub24tYnJlYWtpbmcgc3BhY2VcbiAqIGlzIHJlbmRlcmVkIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgdmlld3BvcnQuICBUbyByZW5kZXIgc29tZXRoaW5nIGVsc2UsIHByb3ZpZGUgYSBzdHJpbmdcbiAqIHRvIGJlIHVzZWQgYXMgdGhlIHRleHQgY29udGVudCAoZS5nLiAnbm8gcG9zaXRpb24nIG9yICcnIGZvciBhbiBlbXB0eSBzdHJpbmcpLiAgU2V0IHRoZSBwbGFjZWhvbGRlclxuICogdG8gYGZhbHNlYCB0byByZXRhaW4gdGhlIGxhc3QgcG9zaXRpb24gd2hlbiB0aGUgbW91c2UgbGVhdmVzIHRoZSB2aWV3cG9ydC4gIEluIGEgZnV0dXJlIHJlbGVhc2UsIHRoaXNcbiAqIHdpbGwgYmUgdGhlIGRlZmF1bHQgYmVoYXZpb3IuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3VuZGVmaW5lZEhUTUw9JyYjMTYwOyddIFRoaXMgb3B0aW9uIGlzIGRlcHJlY2F0ZWQuICBVc2UgdGhlIGBwbGFjZWhvbGRlcmAgb3B0aW9uIGluc3RlYWQuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQSBjb250cm9sIHRvIHNob3cgdGhlIDJEIGNvb3JkaW5hdGVzIG9mIHRoZSBtb3VzZSBjdXJzb3IuIEJ5IGRlZmF1bHQsIHRoZXNlXG4gKiBhcmUgaW4gdGhlIHZpZXcgcHJvamVjdGlvbiwgYnV0IGNhbiBiZSBpbiBhbnkgc3VwcG9ydGVkIHByb2plY3Rpb24uXG4gKiBCeSBkZWZhdWx0IHRoZSBjb250cm9sIGlzIHNob3duIGluIHRoZSB0b3AgcmlnaHQgY29ybmVyIG9mIHRoZSBtYXAsIGJ1dCB0aGlzXG4gKiBjYW4gYmUgY2hhbmdlZCBieSB1c2luZyB0aGUgY3NzIHNlbGVjdG9yIGAub2wtbW91c2UtcG9zaXRpb25gLlxuICpcbiAqIE9uIHRvdWNoIGRldmljZXMsIHdoaWNoIHVzdWFsbHkgZG8gbm90IGhhdmUgYSBtb3VzZSBjdXJzb3IsIHRoZSBjb29yZGluYXRlc1xuICogb2YgdGhlIGN1cnJlbnRseSB0b3VjaGVkIHBvc2l0aW9uIGFyZSBzaG93bi5cbiAqXG4gKiBAYXBpXG4gKi9cbnZhciBNb3VzZVBvc2l0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhNb3VzZVBvc2l0aW9uLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gW29wdF9vcHRpb25zXSBNb3VzZSBwb3NpdGlvbiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1vdXNlUG9zaXRpb24ob3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XG4gICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID1cbiAgICAgICAgICAgIG9wdGlvbnMuY2xhc3NOYW1lICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdvbC1tb3VzZS1wb3NpdGlvbic7XG4gICAgICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgIHJlbmRlcjogb3B0aW9ucy5yZW5kZXIsXG4gICAgICAgICAgICB0YXJnZXQ6IG9wdGlvbnMudGFyZ2V0LFxuICAgICAgICB9KSB8fCB0aGlzO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtNb3VzZVBvc2l0aW9uT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbjtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGUuanNcIikuT25SZXR1cm4+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub25jZTtcbiAgICAgICAgLyoqKlxuICAgICAgICAgKiBAdHlwZSB7TW91c2VQb3NpdGlvbk9uU2lnbmF0dXJlPHZvaWQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudW47XG4gICAgICAgIF90aGlzLmFkZENoYW5nZUxpc3RlbmVyKFBST0pFQ1RJT04sIF90aGlzLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvb3JkaW5hdGVGb3JtYXQpIHtcbiAgICAgICAgICAgIF90aGlzLnNldENvb3JkaW5hdGVGb3JtYXQob3B0aW9ucy5jb29yZGluYXRlRm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5wcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICBfdGhpcy5zZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKiBDaGFuZ2UgdGhpcyB0byBgZmFsc2VgIHdoZW4gcmVtb3ZpbmcgdGhlIGRlcHJlY2F0ZWQgYHVuZGVmaW5lZEhUTUxgIG9wdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHZhciByZW5kZXJPbk1vdXNlT3V0ID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSAnJiMxNjA7JztcbiAgICAgICAgaWYgKCd1bmRlZmluZWRIVE1MJyBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAvLyBkZXByZWNhdGVkIGJlaGF2aW9yXG4gICAgICAgICAgICBpZiAob3B0aW9ucy51bmRlZmluZWRIVE1MICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA9IG9wdGlvbnMudW5kZWZpbmVkSFRNTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbmRlck9uTW91c2VPdXQgPSAhIXBsYWNlaG9sZGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCdwbGFjZWhvbGRlcicgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyT25Nb3VzZU91dCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXIgPSBTdHJpbmcob3B0aW9ucy5wbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5wbGFjZWhvbGRlcl8gPSBwbGFjZWhvbGRlcjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVuZGVyT25Nb3VzZU91dF8gPSByZW5kZXJPbk1vdXNlT3V0O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlcmVkSFRNTF8gPSBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5tYXBQcm9qZWN0aW9uXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2ltcG9ydChcIi4uL3Byb2ouanNcIikuVHJhbnNmb3JtRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2Zvcm1fID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZVByb2plY3Rpb25DaGFuZ2VkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1fID0gbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29vcmRpbmF0ZSBmb3JtYXQgdHlwZSB1c2VkIHRvIHJlbmRlciB0aGUgY3VycmVudCBwb3NpdGlvbiBvclxuICAgICAqIHVuZGVmaW5lZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSBUaGUgZm9ybWF0IHRvIHJlbmRlciB0aGUgY3VycmVudFxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5nZXRDb29yZGluYXRlRm9ybWF0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGVGb3JtYXR8dW5kZWZpbmVkfSAqLyAodGhpcy5nZXQoQ09PUkRJTkFURV9GT1JNQVQpKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgcHJvamVjdGlvbiB0aGF0IGlzIHVzZWQgdG8gcmVwb3J0IHRoZSBtb3VzZSBwb3NpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9IFRoZSBwcm9qZWN0aW9uIHRvIHJlcG9ydCBtb3VzZVxuICAgICAqICAgICBwb3NpdGlvbiBpbi5cbiAgICAgKiBAb2JzZXJ2YWJsZVxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5nZXRQcm9qZWN0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdHx1bmRlZmluZWR9ICovICh0aGlzLmdldChQUk9KRUNUSU9OKSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50IEJyb3dzZXIgZXZlbnQuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLmhhbmRsZU1vdXNlTW92ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgdGhpcy51cGRhdGVIVE1MXyhtYXAuZ2V0RXZlbnRQaXhlbChldmVudCkpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgQnJvd3NlciBldmVudC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuaGFuZGxlTW91c2VPdXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVIVE1MXyhudWxsKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgY29udHJvbCBmcm9tIGl0cyBjdXJyZW50IG1hcCBhbmQgYXR0YWNoIGl0IHRvIHRoZSBuZXcgbWFwLlxuICAgICAqIFN1YmNsYXNzZXMgbWF5IHNldCB1cCBldmVudCBoYW5kbGVycyB0byBnZXQgbm90aWZpZWQgYWJvdXQgY2hhbmdlcyB0b1xuICAgICAqIHRoZSBtYXAgaGVyZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1BsdWdnYWJsZU1hcC5qc1wiKS5kZWZhdWx0fSBtYXAgTWFwLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5zZXRNYXAgPSBmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcywgbWFwKTtcbiAgICAgICAgaWYgKG1hcCkge1xuICAgICAgICAgICAgdmFyIHZpZXdwb3J0ID0gbWFwLmdldFZpZXdwb3J0KCk7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbih2aWV3cG9ydCwgRXZlbnRUeXBlLlBPSU5URVJNT1ZFLCB0aGlzLmhhbmRsZU1vdXNlTW92ZSwgdGhpcykpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVuZGVyT25Nb3VzZU91dF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyS2V5cy5wdXNoKGxpc3Rlbih2aWV3cG9ydCwgRXZlbnRUeXBlLlBPSU5URVJPVVQsIHRoaXMuaGFuZGxlTW91c2VPdXQsIHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlSFRNTF8obnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgY29vcmRpbmF0ZSBmb3JtYXQgdHlwZSB1c2VkIHRvIHJlbmRlciB0aGUgY3VycmVudCBwb3NpdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZUZvcm1hdH0gZm9ybWF0IFRoZSBmb3JtYXQgdG8gcmVuZGVyIHRoZSBjdXJyZW50XG4gICAgICogICAgIHBvc2l0aW9uIGluLlxuICAgICAqIEBvYnNlcnZhYmxlXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIE1vdXNlUG9zaXRpb24ucHJvdG90eXBlLnNldENvb3JkaW5hdGVGb3JtYXQgPSBmdW5jdGlvbiAoZm9ybWF0KSB7XG4gICAgICAgIHRoaXMuc2V0KENPT1JESU5BVEVfRk9STUFULCBmb3JtYXQpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBwcm9qZWN0aW9uIHRoYXQgaXMgdXNlZCB0byByZXBvcnQgdGhlIG1vdXNlIHBvc2l0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBUaGUgcHJvamVjdGlvbiB0byByZXBvcnQgbW91c2VcbiAgICAgKiAgICAgcG9zaXRpb24gaW4uXG4gICAgICogQG9ic2VydmFibGVcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUuc2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIHRoaXMuc2V0KFBST0pFQ1RJT04sIGdldFByb2plY3Rpb24ocHJvamVjdGlvbikpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/aW1wb3J0KFwiLi4vcGl4ZWwuanNcIikuUGl4ZWx9IHBpeGVsIFBpeGVsLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgTW91c2VQb3NpdGlvbi5wcm90b3R5cGUudXBkYXRlSFRNTF8gPSBmdW5jdGlvbiAocGl4ZWwpIHtcbiAgICAgICAgdmFyIGh0bWwgPSB0aGlzLnBsYWNlaG9sZGVyXztcbiAgICAgICAgaWYgKHBpeGVsICYmIHRoaXMubWFwUHJvamVjdGlvbl8pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy50cmFuc2Zvcm1fKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAocHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBnZXRUcmFuc2Zvcm1Gcm9tUHJvamVjdGlvbnModGhpcy5tYXBQcm9qZWN0aW9uXywgcHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybV8gPSBpZGVudGl0eVRyYW5zZm9ybTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5nZXRNYXAoKTtcbiAgICAgICAgICAgIHZhciBjb29yZGluYXRlID0gbWFwLmdldENvb3JkaW5hdGVGcm9tUGl4ZWxJbnRlcm5hbChwaXhlbCk7XG4gICAgICAgICAgICBpZiAoY29vcmRpbmF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB1c2VyUHJvamVjdGlvbiA9IGdldFVzZXJQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZXJQcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IGdldFRyYW5zZm9ybUZyb21Qcm9qZWN0aW9ucyh0aGlzLm1hcFByb2plY3Rpb25fLCB1c2VyUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyhjb29yZGluYXRlLCBjb29yZGluYXRlKTtcbiAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZUZvcm1hdCA9IHRoaXMuZ2V0Q29vcmRpbmF0ZUZvcm1hdCgpO1xuICAgICAgICAgICAgICAgIGlmIChjb29yZGluYXRlRm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgPSBjb29yZGluYXRlRm9ybWF0KGNvb3JkaW5hdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGNvb3JkaW5hdGUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnJlbmRlcmVkSFRNTF8gfHwgaHRtbCAhPT0gdGhpcy5yZW5kZXJlZEhUTUxfKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRIVE1MXyA9IGh0bWw7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvamVjdGlvbi4gUmVuZGVyaW5nIG9mIHRoZSBjb29yZGluYXRlcyBpcyBkb25lIGluXG4gICAgICogYGhhbmRsZU1vdXNlTW92ZWAgYW5kIGBoYW5kbGVNb3VzZVVwYC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL01hcEV2ZW50LmpzXCIpLmRlZmF1bHR9IG1hcEV2ZW50IE1hcCBldmVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBNb3VzZVBvc2l0aW9uLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAobWFwRXZlbnQpIHtcbiAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBtYXBFdmVudC5mcmFtZVN0YXRlO1xuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMubWFwUHJvamVjdGlvbl8gIT0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMubWFwUHJvamVjdGlvbl8gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtXyA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBNb3VzZVBvc2l0aW9uO1xufShDb250cm9sKSk7XG5leHBvcnQgZGVmYXVsdCBNb3VzZVBvc2l0aW9uO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9TW91c2VQb3NpdGlvbi5qcy5tYXAiLCJpbXBvcnQge01hcEV2ZW50fSBmcm9tIFwib2xcIjtcclxuaW1wb3J0IHtTdGF0ZX0gZnJvbSBcIm9sL1ZpZXdcIjtcclxuaW1wb3J0IHtDb250cm9sfSBmcm9tIFwib2wvY29udHJvbFwiO1xyXG5pbXBvcnQgVW5pdHMgZnJvbSBcIm9sL3Byb2ovVW5pdHNcIjtcclxuaW1wb3J0IHtnZXRQb2ludFJlc29sdXRpb259IGZyb20gXCJvbC9wcm9qXCI7XHJcblxyXG4vKipcclxuICogMjUuNG1tID0gMSBpbmNoXHJcbiAqIDAuMjhtbSA9IHBpeGVsIHNpemUgYWNjb3JkaW5nIHRvIHRoZSBPR0MgV01UUyBzcGVjaWZpY2F0aW9uXHJcbiAqXHJcbiAqIEBjb25zdFxyXG4gKiBAdHlwZSB7bnVtYmVyfVxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERJU1BMQVlfRFBJID0gMjUuNCAvIDAuMjg7IC8vIH45MC43MTRcclxuXHJcbi8qKlxyXG4gKiBAY29uc3RcclxuICogQHR5cGUge0FycmF5PG51bWJlcj59XHJcbiAqL1xyXG5jb25zdCBMRUFESU5HX0RJR0lUUyA9IFsxLCAyLCA1XTtcclxuXHJcbi8qKlxyXG4gKiBTY2FsZUxpbmUgb3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBTY2FsZUxpbmVPcHRpb25zIHtcclxuXHJcbiAgLyoqIEEgY3NzIGNsYXNzIG5hbWUgKiovXHJcbiAgY2xhc3NOYW1lPzogc3RyaW5nO1xyXG5cclxuICAvKiogU3BlY2lmeSBhIHRhcmdldCBpZiB5b3Ugd2FudCB0aGUgY29udHJvbCB0byBiZSByZW5kZXJlZCBvdXRzaWRlIG9mIHRoZSBtYXAncyB2aWV3cG9ydCAqKi9cclxuICB0YXJnZXQ/OiBIVE1MRWxlbWVudCB8IHN0cmluZztcclxuXHJcbiAgLyoqIGRwaSBvZiB0aGUgb3V0cHV0IGRldmljZSAqKi9cclxuICBkcGk/OiBudW1iZXI7XHJcblxyXG4gIC8qKiBNaW5pbXVtIHdpZHRoIGluIHBpeGVscyBhdCB0aGUgT0dDIGRlZmF1bHQgZHBpLiBUaGUgd2lkdGggd2lsbCBiZSBhZGp1c3RlZCB0byBtYXRjaCB0aGUgZHBpIHVzZWQuICoqL1xyXG4gIG1pbldpZHRoPzogbnVtYmVyO1xyXG59XHJcblxyXG4vKipcclxuICogRGlzcGxheXMgYSBzY2FsZSBsaW5lIGluIHRoZSBtYXAuXHJcbiAqXHJcbiAqIFRoaXMgY29udHJvbCBpcyBhbiBjdXN0b21pemVkIHZlcnNpb24gb2YgdGhlIE9wZW5MYXllcnMgU2NhbGVsaW5lIGNvbnRyb2wuXHJcbiAqIEhlcmUgdGhlIHNjYWxlbGluZSBpcyBhIHN2ZyBpbWFnZSwgYmVjYXVzZSBub3cgdGhlIGNsaWVudCBjYW4gZXhwb3J0IGl0XHJcbiAqIHdpdGhvdXQgM3JkIHBhcnR5IGRlcGVuZGVuY3kgKHNlZSBvdXIgZXhwb3J0IGV4YW1wbGUpXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgU2NhbGVMaW5lIGV4dGVuZHMgQ29udHJvbCB7XHJcblxyXG4gIHByb3RlY3RlZCB2aWV3U3RhdGU6IFN0YXRlIHwgbnVsbDtcclxuXHJcbiAgcHJpdmF0ZSBfbWluV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgcHJvdGVjdGVkIHJlbmRlcmVkVmlzaWJsZTogYm9vbGVhbjtcclxuXHJcbiAgcHJvdGVjdGVkIHJlbmRlcmVkV2lkdGg6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgcHJvdGVjdGVkIHJlbmRlcmVkU1ZHOiBTVkdFbGVtZW50IHwgdW5kZWZpbmVkO1xyXG5cclxuICBwcm90ZWN0ZWQgZHBpOiBudW1iZXIgfCB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgc2NhbGVsaW5lIGNvbnRyb2wuXHJcbiAgICogYGBgdHlwZXNjcmlwdFxyXG4gICAqIC8vIEV4YW1wbGU6IGNyZWF0ZSBhIG5ldyBTY2FsZUxpbmUgY29udHJvbCB3aXRoIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXHJcbiAgICogY29uc3Qgc2NhbGVMaW5lQ29udHJvbCA9IG5ldyBTY2FsZUxpbmUoKTtcclxuICAgKiBgYGBcclxuICAgKiBAcGFyYW0gb3B0X29wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRfb3B0aW9ucz86IFNjYWxlTGluZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRfb3B0aW9ucyA/IG9wdF9vcHRpb25zIDoge307XHJcblxyXG4gICAgY29uc3QgY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWUgPyBvcHRpb25zLmNsYXNzTmFtZSA6ICdiZ2lzLXNjYWxlbGluZSc7XHJcblxyXG4gICAgc3VwZXIoe1xyXG4gICAgICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgdGFyZ2V0OiBvcHRpb25zLnRhcmdldCxcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMudmlld1N0YXRlID0gbnVsbDtcclxuXHJcbiAgICB0aGlzLl9taW5XaWR0aCA9IG9wdGlvbnMubWluV2lkdGggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluV2lkdGggOiA2NDtcclxuICAgIHRoaXMucmVuZGVyZWRWaXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLnJlbmRlcmVkV2lkdGggPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnJlbmRlcmVkU1ZHID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5kcGkgPSBvcHRpb25zLmRwaSB8fCB1bmRlZmluZWQ7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgdGhlIHNjYWxlIGxpbmUgZWxlbWVudFxyXG4gICAqIEBwYXJhbSBtYXBFdmVudFxyXG4gICAqL1xyXG4gIHB1YmxpYyByZW5kZXIobWFwRXZlbnQ6IE1hcEV2ZW50KTogdm9pZCB7XHJcbiAgICBjb25zdCBmcmFtZVN0YXRlID0gbWFwRXZlbnQuZnJhbWVTdGF0ZTtcclxuICAgIGlmICghZnJhbWVTdGF0ZSkge1xyXG4gICAgICB0aGlzLnZpZXdTdGF0ZSA9IG51bGw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVFbGVtZW50KCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBUaGUgY29kZSBpcyBtYWlubHkgY29waWVkIGZyb20gdGhlIE9wZW5MYXllcnMgU2NhbGVsaW5lIGNvbnRyb2xcclxuICAgKiBhbmQgY3VzdG9taXplZCBmb3Igb3VyIHN2ZyBlbGVtZW50XHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBwcml2YXRlIHVwZGF0ZUVsZW1lbnQoKTogdm9pZCB7XHJcblxyXG4gICAgY29uc3Qgdmlld1N0YXRlID0gdGhpcy52aWV3U3RhdGU7XHJcblxyXG4gICAgaWYgKCF2aWV3U3RhdGUpIHtcclxuICAgICAgaWYgKHRoaXMucmVuZGVyZWRWaXNpYmxlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2VudGVyID0gdmlld1N0YXRlLmNlbnRlcjtcclxuICAgIGNvbnN0IHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcclxuICAgIGNvbnN0IHBvaW50UmVzb2x1dGlvblVuaXRzID0gVW5pdHMuTUVURVJTO1xyXG4gICAgbGV0IHBvaW50UmVzb2x1dGlvbiA9IGdldFBvaW50UmVzb2x1dGlvbihcclxuICAgICAgcHJvamVjdGlvbixcclxuICAgICAgdmlld1N0YXRlLnJlc29sdXRpb24sXHJcbiAgICAgIGNlbnRlcixcclxuICAgICAgcG9pbnRSZXNvbHV0aW9uVW5pdHNcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgbWluV2lkdGggPSAodGhpcy5fbWluV2lkdGggKiAodGhpcy5kcGkgfHwgRElTUExBWV9EUEkpKSAvIERJU1BMQVlfRFBJO1xyXG5cclxuICAgIGNvbnN0IG5vbWluYWxDb3VudCA9IG1pbldpZHRoICogcG9pbnRSZXNvbHV0aW9uO1xyXG4gICAgbGV0IHN1ZmZpeCA9ICcnO1xyXG4gICAgaWYgKG5vbWluYWxDb3VudCA8IDAuMDAxKSB7XHJcbiAgICAgIHN1ZmZpeCA9ICfOvG0nO1xyXG4gICAgICBwb2ludFJlc29sdXRpb24gKj0gMTAwMDAwMDtcclxuICAgIH0gZWxzZSBpZiAobm9taW5hbENvdW50IDwgMSkge1xyXG4gICAgICBzdWZmaXggPSAnbW0nO1xyXG4gICAgICBwb2ludFJlc29sdXRpb24gKj0gMTAwMDtcclxuICAgIH0gZWxzZSBpZiAobm9taW5hbENvdW50IDwgMTAwMCkge1xyXG4gICAgICBzdWZmaXggPSAnbSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdWZmaXggPSAna20nO1xyXG4gICAgICBwb2ludFJlc29sdXRpb24gLz0gMTAwMDtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgaSA9IDMgKiBNYXRoLmZsb29yKE1hdGgubG9nKG1pbldpZHRoICogcG9pbnRSZXNvbHV0aW9uKSAvIE1hdGgubG9nKDEwKSk7XHJcbiAgICBsZXQgY291bnQsIHdpZHRoLCBkZWNpbWFsQ291bnQ6IG51bWJlciB8IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBkZWNpbWFsQ291bnQgPSBNYXRoLmZsb29yKGkgLyAzKTtcclxuICAgICAgY29uc3QgZGVjaW1hbCA9IE1hdGgucG93KDEwLCBkZWNpbWFsQ291bnQpO1xyXG4gICAgICBjb3VudCA9IExFQURJTkdfRElHSVRTWygoaSAlIDMpICsgMykgJSAzXSAqIGRlY2ltYWw7XHJcbiAgICAgIHdpZHRoID0gTWF0aC5yb3VuZChjb3VudCAvIHBvaW50UmVzb2x1dGlvbik7XHJcbiAgICAgIGlmIChpc05hTih3aWR0aCkpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0aGlzLnJlbmRlcmVkVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIGlmICh3aWR0aCA+PSBtaW5XaWR0aCkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgICsraTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZ2VuZXJhdGVkU1ZHID0gbnVsbDtcclxuICAgIGlmIChjb3VudCAmJiBkZWNpbWFsQ291bnQ+PTApIHtcclxuICAgICAgZ2VuZXJhdGVkU1ZHID0gdGhpcy5nZXRHZW5lcmF0ZWRTVkcoY291bnQudG9GaXhlZChkZWNpbWFsQ291bnQgPCAwID8gLWRlY2ltYWxDb3VudCA6IDApICsgJyAnICsgc3VmZml4LCB3aWR0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGdlbmVyYXRlZFNWRyAmJiB0aGlzLnJlbmRlcmVkU1ZHICE9IGdlbmVyYXRlZFNWRykge1xyXG4gICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChnZW5lcmF0ZWRTVkcpO1xyXG4gICAgICB0aGlzLnJlbmRlcmVkU1ZHID0gZ2VuZXJhdGVkU1ZHO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnJlbmRlcmVkV2lkdGggIT0gd2lkdGgpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xyXG4gICAgICBpZihnZW5lcmF0ZWRTVkcpIHtcclxuICAgICAgICBnZW5lcmF0ZWRTVkcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyh3aWR0aCkpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVuZGVyZWRXaWR0aCA9IHdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5yZW5kZXJlZFZpc2libGUpIHtcclxuICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgdGhpcy5yZW5kZXJlZFZpc2libGUgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgZ2VuZXJhdGVkIHN2ZyBlbGVtZW50XHJcbiAgICpcclxuICAgKiBAcGFyYW0gdHh0IHRoZSBjYWxjdWxhdGVkIHRleHQgY29udGVudCBvZiB0aGUgZWxlbWVudFxyXG4gICAqIEBwYXJhbSB3aWR0aCB0aGUgY2FsY3VsYXRlZCBvdXRwdXQgd2lkdGhcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBnZXRHZW5lcmF0ZWRTVkcodHh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBTVkdFbGVtZW50IHtcclxuXHJcbiAgICBjb25zdCBzdmdIZWlnaHQgPSAxODtcclxuXHJcbiAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcclxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2JnaXMtc2NhbGVsaW5lLXN2ZycpO1xyXG4gICAgc3ZnLnNldEF0dHJpYnV0ZSgndmlld0JveCcsICcwIDAgJyArIHdpZHRoICsgJyAnICsgc3ZnSGVpZ2h0KTtcclxuICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgU3RyaW5nKHdpZHRoKSk7XHJcbiAgICBzdmcuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMTAwJScpO1xyXG5cclxuICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdpZCcsICdiZ2lzLXNjYWxlbGluZS1zdmctYmFja2dyb3VuZCcpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3gnLCBTdHJpbmcoMCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3knLCBTdHJpbmcoMCkpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzEwMCUnIC8qU3RyaW5nKHdpZHRoKSovKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMTAwJScgLypTdHJpbmcoc3ZnSGVpZ2h0KSovKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsJywgJyNlNWVjZjAnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCAnLjUnKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnYmxhY2snKTtcclxuICAgIHJlY3Quc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMScpO1xyXG4gICAgcmVjdC5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCAnMCAnICsgd2lkdGggKyAnICcgKyAod2lkdGggKyAyICogc3ZnSGVpZ2h0KSk7XHJcbiAgICBzdmcuYXBwZW5kQ2hpbGQocmVjdCk7XHJcblxyXG4gICAgY29uc3QgdGV4dDogU1ZHVGV4dEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcclxuICAgIHRleHQudGV4dENvbnRlbnQgPSB0eHQ7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgneCcsIFN0cmluZyh3aWR0aCAvIDIpKTtcclxuICAgIHRleHQuc2V0QXR0cmlidXRlKCd5JywgU3RyaW5nKDEyKSk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZm9udC1zaXplJywgJzFlbScpO1xyXG4gICAgdGV4dC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZvbnQtc2l6ZTogMC43NXJlbTsgZm9udC1mYW1pbHk6IFwiU291cmNlIFNhbnMgUHJvXCIsIHNhbnMtc2VyaWYnKTtcclxuICAgIHRleHQuc2V0QXR0cmlidXRlKCdmb250LWZhbWlseScsICdcIlNvdXJjZSBTYW5zIFByb1wiLCBzYW5zLXNlcmlmJyk7XHJcbiAgICB0ZXh0LnNldEF0dHJpYnV0ZSgnZmlsbCcsICdibGFjaycpO1xyXG4gICAgc3ZnLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgIHJldHVybiBzdmc7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgdGhlIG1pbiB3aWR0aFxyXG4gICAqIEBwYXJhbSB2YWx1ZVxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRNaW5XaWR0aCh2YWx1ZTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICB0aGlzLl9taW5XaWR0aCA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBtaW4gd2lkdGhcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0TWluV2lkdGgoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9taW5XaWR0aDtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7TWFwRXZlbnQsIFBsdWdnYWJsZU1hcH0gZnJvbSBcIm9sXCI7XHJcbmltcG9ydCBDb250cm9sLCB7T3B0aW9uc30gZnJvbSAnb2wvY29udHJvbC9Db250cm9sJztcclxuaW1wb3J0IHtDb29yZGluYXRlfSBmcm9tIFwib2wvY29vcmRpbmF0ZVwiO1xyXG5pbXBvcnQge2JvdW5kaW5nRXh0ZW50LCBFeHRlbnR9IGZyb20gXCJvbC9leHRlbnRcIjtcclxuaW1wb3J0IHtPblJldHVybn0gZnJvbSBcIm9sL09ic2VydmFibGVcIjtcclxuaW1wb3J0IHtPYmplY3RPblNpZ25hdHVyZX0gZnJvbSBcIm9sL09iamVjdFwiO1xyXG5pbXBvcnQgQmFzZUV2ZW50IGZyb20gXCJvbC9ldmVudHMvRXZlbnRcIjtcclxuXHJcbi8qKlxyXG4gKiBUaGUgb3ZlcnZpZXcgb3B0aW9uc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBPdmVydmlld09wdGlvbnMgZXh0ZW5kcyBPcHRpb25zIHtcclxuICBwcmV2ZW50RGVmYXVsdD86IGJvb2xlYW5cclxufVxyXG5cclxuLyoqXHJcbiAqIEFuIGV2ZW50IGNsYXNzIHRvIGhhbmRsZSBtb3VzZSBldmVudHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBPdmVydmlld01hcEV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHtcclxuICBvcmlnaW5hbEV2ZW50OiBNb3VzZUV2ZW50O1xyXG4gIGNvbnN0cnVjdG9yKHR5cGU6IHN0cmluZywgb3JpZ2luYWxFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgc3VwZXIodHlwZSk7XHJcbiAgICB0aGlzLm9yaWdpbmFsRXZlbnQgPSBvcmlnaW5hbEV2ZW50O1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFRoZSBleHRlbmRlZCBzaWduYXR1cmUgZm9yIHRoZSBvbiBtZXRob2RcclxuICovXHJcbmV4cG9ydCB0eXBlIE92ZXJ2aWV3T25TaWduYXR1cmU8UmV0dXJuPiA9ICgodHlwZTogXCJjbGlja1wiIHwgXCJjbGlja1wiW10sIGxpc3RlbmVyOiAoZXZlbnQ6IE92ZXJ2aWV3TWFwRXZlbnQpID0+IGFueSkgPT4gUmV0dXJuKSAmIE9iamVjdE9uU2lnbmF0dXJlPFJldHVybj47XHJcblxyXG4vKipcclxuICogRGlzcGxheXMgYW4gb3ZlcnZpZXcgbWFwIG9mIEF1c3RyaWEgYW5kIGEgY3Jvc3NoYWlyIG1hcmtlciBmb3IgdGhlIGN1cnJlbnRcclxuICogY2VudGVyIGluIHRoZSBtYWluIG1hcC4gWW91IGNhbiBjbGljayBvbiB0aGUgb3ZlcnZpZXcgbWFwIHRvIHJlY2VudGVyIHRoZVxyXG4gKiBtYWluIG1hcC5cclxuICpcclxuICogSGludDogdGhlIGRlZmF1bHQgc2l6ZSBvZiB0aGUgb3ZlcnZpZXcgbWFwIGRlcGVuZHMgb24gdGhlIHdpZHRoIG9mIHRoZSB2aWV3cG9ydCAoYXBwcm9wcmlhdGUgZm9yIGZ1bGxzY3JlZW4gbWFwcykuXHJcbiAqIFRvIGxpbWl0IHRoZSBzaXplIGFkZCBhIG1heC13aWR0aCBhbmQgbWF4LWhlaWdodCAobWF4LXdpZHRoID0gMS43NSptYXgtaGVpZ2h0KSB0byB0aGUgLmJnaXMtb3ZlcnZpZXctaW1hZ2UgY3NzIGNsYXNzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE92ZXJ2aWV3IGV4dGVuZHMgQ29udHJvbCB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIEJBQ0tHUk9VTkRfQ09MT1IgPSAnI2U1ZWNmMCc7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIFNWR19IRUlHSFQgPSAyMTY7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICovXHJcbiAgc3RhdGljIFNWR19XSURUSCA9IDM4MDtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKi9cclxuICBzdGF0aWMgU1ZHX0NPREUgPSBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyBjbGFzcz0nYmdpcy1vdmVydmlld21hcC1zdmcnIHhtbG5zOnhsaW5rPSdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJyB2aWV3Qm94PScwIDAgXCIgKyBPdmVydmlldy5TVkdfV0lEVEggKyBcIiBcIiArIE92ZXJ2aWV3LlNWR19IRUlHSFQgKyBcIicgcHJlc2VydmVBc3BlY3RSYXRpbz0neE1pZFlNaWQgbWVldCcgaGVpZ2h0PScxMDAlJyB3aWR0aD0nMTAwJScgY29sb3ItaW50ZXJwb2xhdGlvbj0nYXV0bycgZmlsbD0nYmxhY2snIGZpbGwtb3BhY2l0eT0nMScgIHN0cm9rZT0nYmxhY2snIHN0cm9rZS1kYXNoYXJyYXk9J25vbmUnIHN0cm9rZS1kYXNob2Zmc2V0PScwJyBzdHJva2UtbGluZWNhcD0nc3F1YXJlJyBzdHJva2UtbGluZWpvaW49J21pdGVyJyBzdHJva2UtbWl0ZXJsaW1pdD0nMTAnIHN0cm9rZS1vcGFjaXR5PScxJyBzdHJva2Utd2lkdGg9JzEnIHhtbG5zOnY9J2h0dHBzOi8vdmVjdGEuaW8vbmFubyc+PHN0eWxlPjwhW0NEQVRBWy5Ce2NsaXAtcGF0aDp1cmwoI0EpfS5De2ZpbGwtcnVsZTpldmVub2RkfS5Ee3N0cm9rZTpub25lfS5Fe2ZpbGw6Izk5OX0uRntmaWxsOm5vbmV9Lkd7c3Ryb2tlLW1pdGVybGltaXQ6MX0uSHtzdHJva2Utd2lkdGg6Mi41fV1dPjwvc3R5bGU+PGRlZnM+PGNsaXBQYXRoIGlkPSdBJz48cGF0aCBkPSdNMCAwaDM4MHYyMTZIMFYweicvPjwvY2xpcFBhdGg+PHBhdGggaWQ9J0InIGQ9J00zNTYgODJsLS40IDUuMiA0LjQgMS42LTMuMiAyLjR2Ni40bC0zLjYuOCAyLjggMy42LjggNi44LTkuNiAxLjItLjQtMi0xLjYgMi40aC0zLjZsLTEuNi0zLjYtNC44LTEuNi04IDYuNCA2LjQgMy4yIDMuMi0uOCAxLjIgNC44IDIgLjgtMi44IDIuOC40IDMuMi0zLjYgMy4yLTIuOC0uNC0uOCAxLjYtMi40LTEuNi0uNCA0IDIuNCA0LjgtMi40IDEuNi0uOCA0IDIgLjgtLjQgMi40IDIuOC0uNC44IDEuNi0zLjIgMS42IDIuOCAyLjgtNCAyIDMuNiAxLjYtMTAtLjgtLjQgMy4yLTQgMS42LTIuNCA0LjQtNi40IDIuOC44LTMuNiA2LjQtNi44LTMuMi01LjIgMS42LTQuOC00LjgtMTQuOCAxMy4yLTYuOHYtNmwyLjgtNC0uOC0zLjYtMi40LTEuMi0xLjItNy42IDMuMi44IDItMi44LTItMS42IDIuOC0uOCAyLTQgMy4yLS40IDIuNCA0IDUuNi01LjZ2LTIuOGw1LjYtMS4yIDIuNC0zLjJMMzUyIDg4bDEuNi0zLjYtMi0yIDIuOCAxLjYgMS42LTJ6Jy8+PHBhdGggaWQ9J0MnIGQ9J00xNjIuNCAxNDYuOGwuNCAyIDguNCAxLjIgMS42IDIuOCA0LjQgMS42IDgtMiAuNC0yLjggNC44LS44IDIgMiAxMC44LjggOC40IDkuNiA1LjYtMiAyLjQtNCA4LjQtNC44IDEuNiAzLjJoNmwuOCAzLjIgNC44LTMuMiA1LjYgMiAxMC0zLjYgOCA4LjgtMiA4LjggMi40LjgtLjQgNi40IDIgMS4yLTMuNiAzLjItMS4yLTItMS42IDItMi40LS40LTIuNCA2LjQtNC44LjgtLjQgMi40LTQuOCAxLjYtLjggNC0yLjQtMy42LTIgMS4yLTItMi40LTEyLjQuOC0xLjItMi44aC01LjJsLTQtMi44LTUuNiAxLjItMTgtNC44LTYuOCAxLjYtNi40LTMuMkgxNjhsLTIuNC0yLjgtNC44LS40di0zLjJoMS42VjE3Mmw5LjItMS4yIDEuNi0yLjQtNS42LTR2LTMuMmwtNC40LTMuMi0uOC0yLjQgMi0zLjJoLTIuOGwtMi40LTMuNiAzLjItMnonLz48cGF0aCBpZD0nRCcgZD0nTTI2NC44IDIwLjhsNS42IDEuNi40IDQgNC40LS44IDEuNi0yLjggOC44IDMuMi44IDIgOCA0IDYuOC0xLjZWMzJsNS4yIDIgLjQgMi40IDUuNiAzLjIgMTIuOCAxLjIgMy42LTUuNiAzLjYtLjQgMi40IDIuNCAyLjgtLjQgMS4yIDQgMTAuNCAxLjYgMS42IDEwLjgtNC44IDYtLjggNC44IDUuNiA3LjYuOCA2LjQgNC40IDMuMi0xLjYgMi44LTIuOC0xLjYgMiAyTDM1MiA4OGwtNC40LTMuNi0yLjQgMy4yLTUuNiAxLjJ2Mi44bC01LjYgNS42LTIuNC00LTMuMi40LTEuNiAzLjYtMy4yIDEuMiAyIDEuMi0yIDMuMi0zLjItLjggMS4yIDcuNiAyLjQgMS4yLjggMy42LTIuOCA0IDEuMiA0LTUuMiA1LjJoLTIuOGwtMi02LjgtMi40IDIuOC0xLjItMi00LjgtLjgtMS4yLTIuOC0yIC40LjQtNC01LjItLjQtMS4yLTUuNi0xLjYgMS4yLTMuMi0zLjYtNC40LjR2LTEuNkgyODRsLTQuNC00LTIuNC40LS40IDItMy4yLS40LS44IDMuMi0xMC40LjQtMiAyLjQtNC0yLjQtMy4yIDEuMi0yLjQtNHYtNC40bDIuOC0xLjYtLjQtMS42LTEuNi0yLjQtMS42LjgtOC40LTQuNC0yLTMuMnYtMy42bDEuNi0uOC0uOC02LjQgMi0yLjQgNi44IDUuMiA3LjItMkwyNTggNzRoMy4ybDEuMiAyLjQuOC04LjRoLTJsLjgtNC44LTIgLjQgMS42LTEuNi00LTQuOCAyLjgtMS42LTEwLjQtNS4yIDEuNi03LjIgMy42LTIuOC40LTMuNiA3LjIgMS4yVjIzLjJsMi0yLjR6bTYyIDQ3LjJsLTcuMiA1LjYtMi40LTEuNi0uOCA2IDEuNiAzLjIgOS42LjQgMi0yLjggNC40IDEuNi0yLTIuNC44LTYtMi0yLTEuNiAxLjItMi40LTMuMnonLz48cGF0aCBpZD0nRScgZD0nTTIxMi40IDM4bDkuNiA2LjQtMi40IDIgMi40IDMuMmg2bDYuNCAyLjggMi0yLjhoMi40TDI0MCA0Nmw0IDMuMiAyLjQtMiA1LjYgNS4yIDcuMiAyIDEuMiAxLjItMi44IDEuNi40IDIgMy42IDIuOC0xLjYgMS42IDItLjQtLjggNC44aDJ2NC40bC0uOCA0LTEuMi0yLjRIMjU4bC0xLjYgMi44LTYgMi02LjgtNS4yLTMuMiAyLjQuOCA2LjQtMS42Ljh2My42bDYuNCA2IDUuNi44IDIgMy4yLTIuOCAyLjQgMS42IDYuOC0yLjQtLjgtMiAyLjQtNS4yLjgtLjggMi40LTguNCA0LjgtMy4yLS40LTItMi44LTYuOCAyLjR2LTMuNmwtMi0yLTEwLjQtMS4yLTMuNiA1LjYgMi44IDguNC0xLjYgMy4yaC0yLjRsLTguNC00IDItNi40LTEuNi0yIDIuOC00LjQtNS4yLTIgMS4yLTIuOCAzLjIuOHYtMS42bC02LjQuNC00LjQtMi0uNC04LjggMy42IDEuMi40LTIuOC00LTItNiAyLjh2LTJsLTMuMi0uNC0xLjItMi40aC00LjRsLTMuMiAzLjItNS4yLTUuMi0uNC0zLjIgMTItOS42IDE0LTQgNC44LTcuMi0uNC04LjggMiAuNCAxLjItMi40IDEwIDUuMiA0LjQtNy4yLjQtNS42LTItLjggMi40LTMuNnonLz48cGF0aCBpZD0nRicgZD0nTTE3Ni40IDg2LjhsMS42IDIuNCAzLjIuNHYybDYtMi44IDQgMi0uNCAyLjgtMy42LTEuMi40IDguOCAxMS4yIDIuNGgtMy42bC0xLjIgMy4yIDUuMiAxLjYtMi44IDQuNCAxLjYgMi0yIDYuNCA1LjIgMy4yLTEuNiAzLjIgMS42IDguOCA1LjIgMiA1LjItMi40LjggNC40IDYuOCA2LjQtNS4yIDEuMiAxLjIgMi44LTQuNCA4LTUuMi0zLjZ2LTIuNGwtMTAuNC0yLjgtMi44LjgtMS42LTItNS4yLjgtLjQgMi44LTcuMiAyLTUuMi0xLjYtMS42LTIuOC04LjQtMS4ydi0ybC00IDItNi0zLjZIMTQ4bC02LjQgNS42LTYtMS4yLTItMTIuOCAxLjYtMS42IDYuOC40IDEuMi0yIDguNC40di0zLjZsNC40LS44IDIuNC00LjggMi44LS44LTMuMi00LjggMi0yLTQuNC0xLjYgMS4yLTQuNGg4LjRsLTEuMiAxLjYgMi44IDIuNC0yIDIgLjggMiA3LjYgNS4yIDMuNi0xLjItLjQtNS42IDIuOC0zLjYtLjgtNC0yLjQtMmgtNS42bDQuNC05LjItNi40LTguNCA0LTMuNmg0eicvPjxwYXRoIGlkPSdHJyBkPSdNMjc5LjIgMTAxLjJsNy4yIDMuNnYxLjZsNC40LS40IDMuMiAzLjYgMS42LTEuMiAxLjIgNS42IDUuMi40LS44IDMuMiAyLjQuNCAxLjIgMi44IDQuOC44IDEuMiAyIDEuNi0yLjggMS4yLjgtLjQgMi44IDIuOCAzLjItNy4yIDMuNiA0LjggMTQuOC0xLjYgNC44IDMuMiA0LjgtNy42IDEwLjh2NmwyLjQgNS4yLTYuOC00aC0zLjZsLTkuNiAyLTIgMS4ydjIuOGwtMy4yIDEuMi0yLjgtMy4yLTE0LjguOC0yLjQtMS42LjQtNi40LTIuNC0uOCAyLTguOC04LTguOC0xMCAzLjYtNS42LTItNC44IDMuMi0uOC0zLjJoLTZsLTEuNi0zLjItOC40IDQuOC0yLjQgNC00LjQgMi0zLjItMS42IDUuNi04LjgtMS4yLTIuOCA1LjItMS4yLTYuOC02LjQtLjgtNC40LTUuMiAyLjQtNC44LTEuNi0yLTguNCAxLjYtNC40IDUuNiAxLjIgMS42LTMuMi0yLjgtOC40IDMuNi01LjYgMTAuNCAxLjIgMiAydjMuNmw2LjgtMi40IDIgMi44IDMuMi40IDE2LjQtMTAuNCAzLjIgMi40IDMuMi0xLjIgNCAyLjQgMi0yLjQgMTAuNC0uNC44LTMuMiAzLjIuNC40LTJoMnonLz48cGF0aCBpZD0nSCcgZD0nTTE1MS42IDE0NS4ybDYuNCAyLjQgMy42IDQuOGgyLjhsLTIgMy4yLjggMi40IDQuNCAzLjJ2My4ybDUuNiA0LTEuNiAyLjQtOS4yIDEuMi0xLjYgNS42LTUuNi40LTgtNC0xLjItNC0zLjItLjQtLjQtNi44LTIuOC44LTMuMi0yLjggMS4yLTEuNi0yLTQuOCAzLjYtLjggNy4yLTcuNiA1LjItLjh6Jy8+PHBhdGggaWQ9J0knIGQ9J002MS4yIDExOC44bDUuNiAxLjYgMi0yLjQgNi44IDMuNiA1LjItMS42IDEuMiAxLjYtMi40IDJoMy4ybDIgNmg2bDQtMi44IDIgLjQtLjggMi40IDIuNC0uNCAyLTMuMiA0IC40LTEuNi0yLjQgMi40LTIuOCA2IC40IDIuNC01LjIgOS42LjggNi44LTIuOCA5LjIgMS4yLTItNi40IDQuNC0yLjh2NC40bDgtMS4yIDIuOCA0LjggMy4yLS44djJsNCAxLjItMS42IDIuNCAzLjIgNC44LTIuOC44LTIuNCA0LjgtNC40Ljh2My42bC04LjQtLjQtMS4yIDItNi44LS40LTEuNiAxLjYgMi40IDEzLjYtOCAyLTkuMiA1LjItNS4yLTMuMi0zLjYgMi0zLjItMS42LTIuNCAyLjgtMi40LTEuNi05LjIgMS42LjQgMS42LTMuMiAxLjYtMy4yIDEwaC03LjJsLTYtMS42IDEuNi0yLjQtNC0zLjJMNjYgMTY2bC00LTEuMi44LTUuNi0yLjgtLjgtMS42LTMuMi0zLjYgMy4yLjQgMi0zLjYtLjR2NGwtNCAxLjItMS42LTIuOC0uNC0yLjQgMi44LTMuNi0yLTIuNCAxLjYtMS4yLTEuMi0yLjggNC00IC40LTcuMi0yLjQtMS4yIDYuOC0yIDQuOC01LjIgMi0zLjItMi00IC44LTQuNHonLz48cGF0aCBpZD0nSicgZD0nTTMxLjIgMTE2LjRsMiAuNC0uNCAyLjhoNi44bDEuMiA0IDQuNCAxLjYuNCAyLjQtMS42LjggMS42IDMuNiA2LTItLjggNS4yLTIgMS4yIDIuNCAyLjQtLjQgNy4yLTQgNCAxLjIgMi44LTEuNiAxLjIgMiAyLjQtMi44IDMuNiAyIDMuNi0xLjIgMi0zLjItMS4yLTEuMi0yLjgtNi40LTJWMTU0bC0xMi0yLjQgMS4yLTQuOC0zLjItMi40LjQtNC44LTItMiA2LjQtOC0uNC00LTIuOC0uNC0xLjYtMi44IDcuNi0yIDItNHonLz48cGF0aCBpZD0nSycgZD0nTTMyNy42IDY4LjRsLjQgMiAyLjgtLjQgMiAyLS44IDYgMiAyLjQtNC40LTEuNi0yIDIuOC05LjYtLjQtMS42LTMuMi44LTYgMi40IDEuNiAxLjYtMi40IDMuNi0uNC40LTIuOCAyLjQuNHonLz48L2RlZnM+PGcgdGV4dC1yZW5kZXJpbmc9J29wdGltaXplTGVnaWJpbGl0eSc+PHVzZSB4bGluazpocmVmPScjQicgY2xhc3M9J0IgQyBEIEUnLz48ZyBzdHJva2U9J3NpbHZlcic+PHVzZSB4bGluazpocmVmPScjQicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNDJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0MnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRCcgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNEJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0UnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjRScgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNGJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0YnIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjRycgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNHJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0gnIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSCcgY2xhc3M9J0IgRiBHIEgnLz48cGF0aCBkPSdNNjEuMiAxMTguOGwtMS4yLTEuMiAyLjQtLjgtMS4yIDJ6JyBjbGFzcz0nQiBDIEQgRScvPjxwYXRoIGQ9J002MS4yIDExOC44bC0xLjItMS4yIDIuNC0uOC0xLjIgMnonIGNsYXNzPSdCIEYgRyBIJy8+PHVzZSB4bGluazpocmVmPScjSScgY2xhc3M9J0IgQyBEIEUnLz48dXNlIHhsaW5rOmhyZWY9JyNJJyBjbGFzcz0nQiBGIEcgSCcvPjx1c2UgeGxpbms6aHJlZj0nI0onIGNsYXNzPSdCIEMgRCBFJy8+PHVzZSB4bGluazpocmVmPScjSicgY2xhc3M9J0IgRiBHIEgnLz48dXNlIHhsaW5rOmhyZWY9JyNLJyBjbGFzcz0nQiBDIEQgRScvPjx1c2UgeGxpbms6aHJlZj0nI0snIGNsYXNzPSdCIEYgRyBIJy8+PC9nPjwvZz48L3N2Zz5cIjtcclxuXHJcbiAgLyoqXHJcbiAgICogQVBJUHJvcGVydHk6IGV4dGVudFxyXG4gICAqIEV4dGVudCBvZiBvdmVydmlldyAtIFttaW54LCBtaW55LCBtYXh4LCBtYXh5XSBvciBbbGVmdCwgYm90dG9tLCByaWdodCwgdG9wXVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBleHRlbnQ6IEV4dGVudDtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcHJvdGVjdGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHN2Z0VsZW1lbnQ6IFNWR0VsZW1lbnQ7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHByb3RlY3RlZFxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwcm90ZWN0ZWRcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50OiBTVkdSZWN0RWxlbWVudDtcclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcHJpdmF0ZVxyXG4gICAqL1xyXG4gIHByb3RlY3RlZCBwcmV2ZW50RGVmYXVsdDogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogQG92ZXJyaWRlXHJcbiAgICovXHJcbiAgcHVibGljIG9uITogT3ZlcnZpZXdPblNpZ25hdHVyZTxPblJldHVybj47XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgdGhlIG92ZXJ2aWV3IG9wdGlvbnNcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogT3ZlcnZpZXdPcHRpb25zKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge30gYXMgT3ZlcnZpZXdPcHRpb25zO1xyXG5cclxuICAgIGNvbnN0IG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgb3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsYXNzTmFtZSA9ICdiZ2lzLW92ZXJ2aWV3LWltYWdlJztcclxuXHJcbiAgICBjb25zdCBmaWd1cmVFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmlndXJlJyk7XHJcbiAgICBmaWd1cmVFbGVtZW50LmlubmVySFRNTCA9IE92ZXJ2aWV3LlNWR19DT0RFO1xyXG5cclxuICAgIG92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5hcHBlbmRDaGlsZChmaWd1cmVFbGVtZW50KTtcclxuXHJcbiAgICBvcHRzLmVsZW1lbnQgPSBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcblxyXG4gICAgc3VwZXIob3B0cyk7XHJcblxyXG4gICAgdGhpcy5wcmV2ZW50RGVmYXVsdCA9IG9wdHMucHJldmVudERlZmF1bHQgfHwgZmFsc2U7XHJcblxyXG4gICAgdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQgPSBvdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcblxyXG4gICAgLy8gZXh0ZW50OiBbbWlueCwgbWlueSwgbWF4eCwgbWF4eV0gLS0gY29vcmRpbmF0ZXM6IFtbbGVmdCwgYm90dG9tXSwgW3JpZ2h0LCB0b3BdXVxyXG4gICAgdGhpcy5leHRlbnQgPSBib3VuZGluZ0V4dGVudChbWzEwMTAwMDAsIDU3OTAwMDBdLCBbMTk2MDAwMCwgNjMzMDAwMF1dKTtcclxuXHJcbiAgICB0aGlzLm92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgT3ZlcnZpZXdNYXBFdmVudCgnY2xpY2snLCBlKSksIGZhbHNlKTtcclxuXHJcbiAgICBpZighdGhpcy5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgdGhpcy5vbk92ZXJ2aWV3SW1hZ2VDbGljayk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdmdFbGVtZW50ID0gZmlndXJlRWxlbWVudC5maXJzdENoaWxkIGFzIFNWR0VsZW1lbnQ7XHJcblxyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3JlY3QnKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnYmdpcy1vdmVydmlld21hcC1zdmctYmFja2dyb3VuZCcpO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd4JywgU3RyaW5nKDApKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgneScsIFN0cmluZygwKSk7XHJcbiAgICB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3J4JywgU3RyaW5nKDgpKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgncnknLCBTdHJpbmcoOCkpO1xyXG4gICAgdGhpcy5iYWNrZ3JvdW5kU1ZHUmVjdEVsZW1lbnQuc2V0QXR0cmlidXRlKCd3aWR0aCcsIFN0cmluZyhPdmVydmlldy5TVkdfV0lEVEgpKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgU3RyaW5nKE92ZXJ2aWV3LlNWR19IRUlHSFQpKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnc3Ryb2tlLXdpZHRoOjAnKTtcclxuICAgIHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50LnNldEF0dHJpYnV0ZSgnZmlsbCcsIE92ZXJ2aWV3LkJBQ0tHUk9VTkRfQ09MT1IpO1xyXG5cclxuICAgIHRoaXMuc3ZnRWxlbWVudC5wcmVwZW5kKHRoaXMuYmFja2dyb3VuZFNWR1JlY3RFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG1hcFxyXG4gICAqL1xyXG4gIHB1YmxpYyBzZXRNYXAobWFwOiBQbHVnZ2FibGVNYXApOiB2b2lkIHtcclxuICAgIHN1cGVyLnNldE1hcChtYXApO1xyXG4gICAgaWYgKG1hcCkge1xyXG4gICAgICAvLyBpZih0aGlzLnN2Z0VsZW1lbnQpIHtcclxuICAgICAgLy8gICB0aGlzLnN2Z0VsZW1lbnQucHJlcGVuZCh0aGlzLnN2Z0JhY2tncm91bmRSZWN0KTtcclxuICAgICAgLy8gfVxyXG4gICAgICBpZighdGhpcy5wcmV2ZW50RGVmYXVsdCkge1xyXG4gICAgICAgIG1hcC5vbignbW92ZWVuZCcsIChldmVudDogTWFwRXZlbnQpID0+IHRoaXMudXBkYXRlQ3Jvc3NoYWlyKGV2ZW50KSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHVwZGF0ZUNyb3NzaGFpcihldmVudDogTWFwRXZlbnQpOiB2b2lkIHtcclxuXHJcbiAgICBjb25zdCBzaXplID0gW092ZXJ2aWV3LlNWR19XSURUSCwgT3ZlcnZpZXcuU1ZHX0hFSUdIVF07XHJcblxyXG4gICAgY29uc3QgY2VudGVyID0gdGhpcy5nZXRPdmVydmlld1B4RnJvbUxvbkxhdChldmVudC5tYXAuZ2V0VmlldygpPy5nZXRDZW50ZXIoKSk7XHJcblxyXG4gICAgLy8ganVzdCB0byBiZSBzdXJlIG1ha2Ugc29tZSBsaW1pdHNcclxuICAgIGlmIChjZW50ZXJbMF0gPiBzaXplWzBdKVxyXG4gICAgICBjZW50ZXJbMF0gPSBzaXplWzBdO1xyXG4gICAgZWxzZSBpZiAoY2VudGVyWzBdIDwgMClcclxuICAgICAgY2VudGVyWzBdID0gMDtcclxuXHJcbiAgICBpZiAoY2VudGVyWzFdID4gc2l6ZVsxXSlcclxuICAgICAgY2VudGVyWzFdID0gc2l6ZVsxXTtcclxuICAgIGVsc2UgaWYgKGNlbnRlclsxXSA8IDApXHJcbiAgICAgIGNlbnRlclsxXSA9IDA7XHJcblxyXG4gICAgLy8gdXBkYXRlIGNyb3NzaGFpclxyXG4gICAgaWYgKHRoaXMuc3ZnRWxlbWVudCkge1xyXG4gICAgICBjb25zdCBleGlzdGluZ0VsbXMgPSB0aGlzLnN2Z0VsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnYmdpcy1vdmVydmlld21hcC1zdmctY3Jvc3NoYWlyJykgYXMgSFRNTENvbGxlY3Rpb25PZjxTVkdMaW5lRWxlbWVudD47XHJcbiAgICAgIGlmIChleGlzdGluZ0VsbXMpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGV4aXN0aW5nRWxtIG9mIEFycmF5LmZyb20oZXhpc3RpbmdFbG1zKSkge1xyXG4gICAgICAgICAgdGhpcy5zdmdFbGVtZW50LnJlbW92ZUNoaWxkKGV4aXN0aW5nRWxtKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgdGhpcy5zdmdFbGVtZW50LmFwcGVuZENoaWxkKE92ZXJ2aWV3LmdldENyb3NzaGFpcihjZW50ZXJbMF0sIDAsIGNlbnRlclswXSwgT3ZlcnZpZXcuU1ZHX0hFSUdIVCwgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpci14JykpO1xyXG4gICAgICB0aGlzLnN2Z0VsZW1lbnQuYXBwZW5kQ2hpbGQoT3ZlcnZpZXcuZ2V0Q3Jvc3NoYWlyKDAsIGNlbnRlclsxXSwgT3ZlcnZpZXcuU1ZHX1dJRFRILCBjZW50ZXJbMV0sICdiZ2lzLW92ZXJ2aWV3bWFwLXN2Zy1jcm9zc2hhaXIteScpKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB4MVxyXG4gICAqIEBwYXJhbSB5MVxyXG4gICAqIEBwYXJhbSB4MlxyXG4gICAqIEBwYXJhbSB5MlxyXG4gICAqIEBwYXJhbSBjc3NDbGFzc1xyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHVibGljIHN0YXRpYyBnZXRDcm9zc2hhaXIoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlciwgY3NzQ2xhc3M6IHN0cmluZyk6IFNWR0xpbmVFbGVtZW50IHtcclxuICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcclxuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd4MScsIFN0cmluZyh4MSkpO1xyXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgU3RyaW5nKHkxKSk7XHJcbiAgICBsaW5lLnNldEF0dHJpYnV0ZSgneDInLCBTdHJpbmcoeDIpKTtcclxuICAgIGxpbmUuc2V0QXR0cmlidXRlKCd5MicsIFN0cmluZyh5MikpO1xyXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2ZpbGw6IG5vbmU7IHN0cm9rZTogYmxhY2s7IHN0cm9rZS13aWR0aDogMXB4OycpO1xyXG4gICAgbGluZS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ2JnaXMtb3ZlcnZpZXdtYXAtc3ZnLWNyb3NzaGFpciAnICsgY3NzQ2xhc3MpO1xyXG4gICAgcmV0dXJuIGxpbmU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBsZWZ0XHJcbiAgICogQHBhcmFtIHJpZ2h0XHJcbiAgICogQHBhcmFtIHdpZHRoXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBwdWJsaWMgc3RhdGljIGNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgobGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyLCB3aWR0aDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBNYXRoLmFicygobGVmdCAtIHJpZ2h0KSkgLyB3aWR0aDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNlbnRlclxyXG4gICAqIEBwcml2YXRlXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGdldE92ZXJ2aWV3UHhGcm9tTG9uTGF0KGNlbnRlcjogQ29vcmRpbmF0ZSB8IHVuZGVmaW5lZCk6IG51bWJlcltdIHtcclxuICAgIGlmIChjZW50ZXIpIHtcclxuICAgICAgY29uc3Qgc2l6ZSA9IFtPdmVydmlldy5TVkdfV0lEVEgsIE92ZXJ2aWV3LlNWR19IRUlHSFRdO1xyXG4gICAgICBjb25zdCByZXNvbHV0aW9uID0gW1xyXG4gICAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMF0sIHRoaXMuZXh0ZW50WzJdLCBzaXplWzBdKSxcclxuICAgICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzFdLCB0aGlzLmV4dGVudFszXSwgc2l6ZVsxXSlcclxuICAgICAgXTtcclxuICAgICAgcmV0dXJuIFtcclxuICAgICAgICBNYXRoLnJvdW5kKDEgLyByZXNvbHV0aW9uWzBdICogKGNlbnRlclswXSAtIHRoaXMuZXh0ZW50WzBdKSksXHJcbiAgICAgICAgTWF0aC5yb3VuZCgxIC8gcmVzb2x1dGlvblsxXSAqICh0aGlzLmV4dGVudFszXSAtIGNlbnRlclsxXSkpXHJcbiAgICAgIF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gWzAsIDBdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogTWV0aG9kOiBvbk92ZXJ2aWV3SW1hZ2VDbGlja1xyXG4gICAqIEhhbmRsZSBjbGljayBpbiBvdmVydmlldyBpbWFnZVxyXG4gICAqXHJcbiAgICogUGFyYW1ldGVyczpcclxuICAgKiBlIC0gTW91c2VFdmVudCBvYmplY3RcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgb25PdmVydmlld0ltYWdlQ2xpY2soZTogT3ZlcnZpZXdNYXBFdmVudCk6IHZvaWQge1xyXG5cclxuICAgIGNvbnN0IG92ZXJ2aWV3Q29udGFpbmVyQ2xpZW50Qm91bmRpbmdSZWN0ID0gdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICBjb25zdCB4ID0gZS5vcmlnaW5hbEV2ZW50LmNsaWVudFggLSBvdmVydmlld0NvbnRhaW5lckNsaWVudEJvdW5kaW5nUmVjdC5sZWZ0OyAvLyBYLXBvcyBpbiBvdmVydmlldyBpbWFnZVxyXG4gICAgY29uc3QgeSA9IGUub3JpZ2luYWxFdmVudC5jbGllbnRZIC0gb3ZlcnZpZXdDb250YWluZXJDbGllbnRCb3VuZGluZ1JlY3QudG9wOyAvLyBZLXBvcyBpbiBvdmVydmlldyBpbWFnZVxyXG5cclxuICAgIC8vIGdldCBMb25MYXRcclxuICAgIGNvbnN0IGNsaWNrTG9uTGF0ID0gdGhpcy5nZXRMb25MYXRGcm9tT3ZlcnZpZXdQeChbeCwgeV0pO1xyXG5cclxuICAgIC8vIHVwZGF0ZSBjZW50ZXIgb2YgdGhlIG1hcFxyXG4gICAgdGhpcy5nZXRNYXAoKT8uZ2V0VmlldygpPy5hbmltYXRlKHtcclxuICAgICAgY2VudGVyOiBjbGlja0xvbkxhdCxcclxuICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE1ldGhvZDogZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHhcclxuICAgKiBHZXQgbWFwIGxvY2F0aW9uIGZyb20gcGl4ZWwgbG9jYXRpb25cclxuICAgKlxyXG4gICAqIFBhcmFtZXRlcnM6XHJcbiAgICogb1B4IC0gQ29vcmRpbmF0ZVxyXG4gICAqXHJcbiAgICogUmV0dXJuczpcclxuICAgKiBbeCx5XSBMb2NhdGlvbiBpbiBsb24vbGF0IHRyYW5zbGF0ZWQgZnJvbVxyXG4gICAqIHBhc3NlZCBpbiBwaXhlbC1sb2NhdGlvbiBpbiBvdmVydmlldyBtYXBcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgZ2V0TG9uTGF0RnJvbU92ZXJ2aWV3UHgob1B4OiBDb29yZGluYXRlKTogbnVtYmVyW10ge1xyXG5cclxuICAgIGNvbnN0IHNpemUgPSBbdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQuY2xpZW50V2lkdGgsIHRoaXMub3ZlcnZpZXdDb250YWluZXJFbGVtZW50LmNsaWVudEhlaWdodF07XHJcbiAgICBjb25zdCByZXNvbHV0aW9uID0gW1xyXG4gICAgICBPdmVydmlldy5jYWxjdWxhdGVSZXNvbHV0aW9uRnJvbVdpZHRoKHRoaXMuZXh0ZW50WzBdLCB0aGlzLmV4dGVudFsyXSwgc2l6ZVswXSksXHJcbiAgICAgIE92ZXJ2aWV3LmNhbGN1bGF0ZVJlc29sdXRpb25Gcm9tV2lkdGgodGhpcy5leHRlbnRbMV0sIHRoaXMuZXh0ZW50WzNdLCBzaXplWzFdKVxyXG4gICAgXTtcclxuXHJcbiAgICByZXR1cm4gW1xyXG4gICAgICBvUHhbMF0gKiByZXNvbHV0aW9uWzBdICsgdGhpcy5leHRlbnRbMF0sXHJcbiAgICAgIHRoaXMuZXh0ZW50WzNdIC0gb1B4WzFdICogcmVzb2x1dGlvblsxXVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCB0aGUgb3ZlcnZpZXcgcGFyZW50IGNvbnRhaW5lciBlbGVtZW50XHJcbiAgICovXHJcbiAgcHVibGljIGdldE92ZXJ2aWV3Q29udGFpbmVyRWxlbWVudCgpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5vdmVydmlld0NvbnRhaW5lckVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXQgdGhlIG92ZXJ2aWV3IHN2ZyBlbGVtZW50XHJcbiAgICovXHJcbiAgcHVibGljIGdldFNWR0VsZW1lbnQoKTogU1ZHRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5zdmdFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogR2V0IHRoZSBzdmcgYmFja2dyb3VuZCByZWN0IGVsZW1lbnRcclxuICAgKi9cclxuICBwdWJsaWMgZ2V0QmFja2dyb3VuZFJlY3RFbGVtZW50KCk6IFNWR1JlY3RFbGVtZW50IHtcclxuICAgIHJldHVybiB0aGlzLmJhY2tncm91bmRTVkdSZWN0RWxlbWVudDtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7QnV0dG9ufSBmcm9tIFwiLi9iYXNlXCI7XHJcbmltcG9ydCB7QnV0dG9uT3B0aW9uc30gZnJvbSBcIi4vYmFzZS9CdXR0b25cIjtcclxuXHJcbi8qKlxyXG4gKiBBIGRlZmF1bHQgYnV0dG9uIHdpdGggYSBcInNoYXJlXCIgaWNvblxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNoYXJlIGV4dGVuZHMgQnV0dG9uIHtcclxuXHJcbiAgc3RhdGljIHJlYWRvbmx5IERFRkFVTFRfVE9PTFRJUF9URVhUID0gJ0Fuc2ljaHQgdGVpbGVuJztcclxuICBzdGF0aWMgcmVhZG9ubHkgREVGQVVMVF9VTklDT0RFID0gMHhlOTJjO1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBidXR0b24gb3B0aW9uc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihvcHRpb25zPzogQnV0dG9uT3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgc3VwZXIoeyB1bmljb2RlOiBTaGFyZS5ERUZBVUxUX1VOSUNPREUsIHRvb2x0aXA6IFNoYXJlLkRFRkFVTFRfVE9PTFRJUF9URVhULCB0b29sdGlwQXNUZXh0RWxlbWVudDogdHJ1ZSwgLi4ub3B0cyB9KTtcclxuXHJcbiAgfVxyXG5cclxufVxyXG4iLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL1RpbGVcbiAqL1xuaW1wb3J0IEV2ZW50VGFyZ2V0IGZyb20gJy4vZXZlbnRzL1RhcmdldC5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4vZXZlbnRzL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi91dGlsLmpzJztcbmltcG9ydCB7IGVhc2VJbiB9IGZyb20gJy4vZWFzaW5nLmpzJztcbi8qKlxuICogQSBmdW5jdGlvbiB0aGF0IHRha2VzIGFuIHtAbGluayBtb2R1bGU6b2wvVGlsZX0gZm9yIHRoZSB0aWxlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgdXJsIGFzIGFyZ3VtZW50cy4gVGhlIGRlZmF1bHQgaXNcbiAqIGBgYGpzXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH0pO1xuICogYGBgXG4gKiBGb3IgbW9yZSBmaW5lIGdyYWluZWQgY29udHJvbCwgdGhlIGxvYWQgZnVuY3Rpb24gY2FuIHVzZSBmZXRjaCBvciBYTUxIdHRwUmVxdWVzdCBhbmQgaW52b2x2ZVxuICogZXJyb3IgaGFuZGxpbmc6XG4gKlxuICogYGBganNcbiAqIGltcG9ydCBUaWxlU3RhdGUgZnJvbSAnb2wvVGlsZVN0YXRlJztcbiAqXG4gKiBzb3VyY2Uuc2V0VGlsZUxvYWRGdW5jdGlvbihmdW5jdGlvbih0aWxlLCBzcmMpIHtcbiAqICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICogICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVuZCcsIGZ1bmN0aW9uIChldnQpIHtcbiAqICAgICB2YXIgZGF0YSA9IHRoaXMucmVzcG9uc2U7XG4gKiAgICAgaWYgKGRhdGEgIT09IHVuZGVmaW5lZCkge1xuICogICAgICAgdGlsZS5nZXRJbWFnZSgpLnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZGF0YSk7XG4gKiAgICAgfSBlbHNlIHtcbiAqICAgICAgIHRpbGUuc2V0U3RhdGUoVGlsZVN0YXRlLkVSUk9SKTtcbiAqICAgICB9XG4gKiAgIH0pO1xuICogICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gKiAgICAgdGlsZS5zZXRTdGF0ZShUaWxlU3RhdGUuRVJST1IpO1xuICogICB9KTtcbiAqICAgeGhyLm9wZW4oJ0dFVCcsIHNyYyk7XG4gKiAgIHhoci5zZW5kKCk7XG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihUaWxlLCBzdHJpbmcpOiB2b2lkfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlflRpbGV9IHNvdXJjZXMgdXNlIGEgZnVuY3Rpb24gb2YgdGhpcyB0eXBlIHRvIGdldFxuICogdGhlIHVybCB0aGF0IHByb3ZpZGVzIGEgdGlsZSBmb3IgYSBnaXZlbiB0aWxlIGNvb3JkaW5hdGUuXG4gKlxuICogVGhpcyBmdW5jdGlvbiB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL3RpbGVjb29yZH5UaWxlQ29vcmR9IGZvciB0aGUgdGlsZVxuICogY29vcmRpbmF0ZSwgYSBge251bWJlcn1gIHJlcHJlc2VudGluZyB0aGUgcGl4ZWwgcmF0aW8gYW5kIGFcbiAqIHtAbGluayBtb2R1bGU6b2wvcHJvai9Qcm9qZWN0aW9ufSBmb3IgdGhlIHByb2plY3Rpb24gIGFzIGFyZ3VtZW50c1xuICogYW5kIHJldHVybnMgYSBge3N0cmluZ31gIHJlcHJlc2VudGluZyB0aGUgdGlsZSBVUkwsIG9yIHVuZGVmaW5lZCBpZiBubyB0aWxlXG4gKiBzaG91bGQgYmUgcmVxdWVzdGVkIGZvciB0aGUgcGFzc2VkIHRpbGUgY29vcmRpbmF0ZS5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkLCBudW1iZXIsXG4gKiAgICAgICAgICAgaW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdCk6IChzdHJpbmd8dW5kZWZpbmVkKX0gVXJsRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb249MjUwXSBBIGR1cmF0aW9uIGZvciB0aWxlIG9wYWNpdHlcbiAqIHRyYW5zaXRpb25zIGluIG1pbGxpc2Vjb25kcy4gQSBkdXJhdGlvbiBvZiAwIGRpc2FibGVzIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24uXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3IgdGlsZXMuXG4gKlxuICogQGFic3RyYWN0XG4gKi9cbnZhciBUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9UaWxlU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlKHRpbGVDb29yZCwgc3RhdGUsIG9wdF9vcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgPyBvcHRfb3B0aW9ucyA6IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVDb29yZCA9IHRpbGVDb29yZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQW4gXCJpbnRlcmltXCIgdGlsZSBmb3IgdGhpcyB0aWxlLiBUaGUgaW50ZXJpbSB0aWxlIG1heSBiZSB1c2VkIHdoaWxlIHRoaXNcbiAgICAgICAgICogb25lIGlzIGxvYWRpbmcsIGZvciBcInNtb290aFwiIHRyYW5zaXRpb25zIHdoZW4gY2hhbmdpbmcgcGFyYW1zL2RpbWVuc2lvbnNcbiAgICAgICAgICogb24gdGhlIHNvdXJjZS5cbiAgICAgICAgICogQHR5cGUge1RpbGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5pbnRlcmltVGlsZSA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGtleSBhc3NpZ25lZCB0byB0aGUgdGlsZS4gVGhpcyBpcyB1c2VkIGJ5IHRoZSB0aWxlIHNvdXJjZSB0byBkZXRlcm1pbmVcbiAgICAgICAgICogaWYgdGhpcyB0aWxlIGNhbiBlZmZlY3RpdmVseSBiZSB1c2VkLCBvciBpZiBhIG5ldyB0aWxlIHNob3VsZCBiZSBjcmVhdGVkXG4gICAgICAgICAqIGFuZCB0aGlzIG9uZSBiZSB1c2VkIGFzIGFuIGludGVyaW0gdGlsZSBmb3IgdGhpcyBuZXcgdGlsZS5cbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmtleSA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGR1cmF0aW9uIGZvciB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uLlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudHJhbnNpdGlvbl8gPVxuICAgICAgICAgICAgb3B0aW9ucy50cmFuc2l0aW9uID09PSB1bmRlZmluZWQgPyAyNTAgOiBvcHRpb25zLnRyYW5zaXRpb247XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMb29rdXAgb2Ygc3RhcnQgdGltZXMgZm9yIHJlbmRlcmluZyB0cmFuc2l0aW9ucy4gIElmIHRoZSBzdGFydCB0aW1lIGlzXG4gICAgICAgICAqIGVxdWFsIHRvIC0xLCB0aGUgdHJhbnNpdGlvbiBpcyBjb21wbGV0ZS5cbiAgICAgICAgICogQHR5cGUge09iamVjdDxzdHJpbmcsIG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmFuc2l0aW9uU3RhcnRzXyA9IHt9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5jaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoRXZlbnRUeXBlLkNIQU5HRSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgdGhlIHRpbGUgY2FjaGUgd2hlbiB0aGUgdGlsZSBpcyByZW1vdmVkIGZyb20gdGhlIGNhY2hlIGR1ZSB0byBleHBpcnlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5yZWxlYXNlID0gZnVuY3Rpb24gKCkgeyB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEtleSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5ICsgJy8nICsgdGhpcy50aWxlQ29vcmQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGludGVyaW0gdGlsZSBtb3N0IHN1aXRhYmxlIGZvciByZW5kZXJpbmcgdXNpbmcgdGhlIGNoYWluIG9mIGludGVyaW1cbiAgICAgKiB0aWxlcy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgIG1vc3QgcmVjZW50IHRpbGUgdGhhdCBoYXMgYmVlbiBsb2FkZWQsIGlmIG5vXG4gICAgICogc3VjaCB0aWxlIGV4aXN0cywgdGhlIG9yaWdpbmFsIHRpbGUgaXMgcmV0dXJuZWQuXG4gICAgICogQHJldHVybiB7IVRpbGV9IEJlc3QgdGlsZSBmb3IgcmVuZGVyaW5nLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEludGVyaW1UaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgICAgICAgIC8vZW1wdHkgY2hhaW5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWxlID0gdGhpcy5pbnRlcmltVGlsZTtcbiAgICAgICAgLy8gZmluZCB0aGUgZmlyc3QgbG9hZGVkIHRpbGUgYW5kIHJldHVybiBpdC4gU2luY2UgdGhlIGNoYWluIGlzIHNvcnRlZCBpblxuICAgICAgICAvLyBkZWNyZWFzaW5nIG9yZGVyIG9mIGNyZWF0aW9uIHRpbWUsIHRoZXJlIGlzIG5vIG5lZWQgdG8gc2VhcmNoIHRoZSByZW1haW5kZXJcbiAgICAgICAgLy8gb2YgdGhlIGxpc3QgKGFsbCB0aG9zZSB0aWxlcyBjb3JyZXNwb25kIHRvIG9sZGVyIHJlcXVlc3RzIGFuZCB3aWxsIGJlXG4gICAgICAgIC8vIGNsZWFuZWQgdXAgYnkgcmVmcmVzaEludGVyaW1DaGFpbilcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BREVEKSB7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyB0aWxlIGltbWVkaWF0ZWx5IGluc3RlYWQgb2YgZmFkaW5nIGl0IGluIGFmdGVyIGxvYWRpbmcsIGJlY2F1c2VcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW50ZXJpbSB0aWxlIGlzIGluIHBsYWNlIGFscmVhZHlcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25fID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbGUgPSB0aWxlLmludGVyaW1UaWxlO1xuICAgICAgICB9IHdoaWxlICh0aWxlKTtcbiAgICAgICAgLy8gd2UgY2FuIG5vdCBmaW5kIGEgYmV0dGVyIHRpbGVcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHb2VzIHRocm91Z2ggdGhlIGNoYWluIG9mIGludGVyaW0gdGlsZXMgYW5kIGRpc2NhcmRzIHNlY3Rpb25zIG9mIHRoZSBjaGFpblxuICAgICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWxldmFudC5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5yZWZyZXNoSW50ZXJpbUNoYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaW50ZXJpbVRpbGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZSA9IHRoaXMuaW50ZXJpbVRpbGU7XG4gICAgICAgIHZhciBwcmV2ID0gLyoqIEB0eXBlIHtUaWxlfSAqLyAodGhpcyk7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLkxPQURFRCkge1xuICAgICAgICAgICAgICAgIC8vd2UgaGF2ZSBhIGxvYWRlZCB0aWxlLCB3ZSBjYW4gZGlzY2FyZCB0aGUgcmVzdCBvZiB0aGUgbGlzdFxuICAgICAgICAgICAgICAgIC8vd2Ugd291bGQgY291bGQgYWJvcnQgYW55IExPQURJTkcgdGlsZSByZXF1ZXN0XG4gICAgICAgICAgICAgICAgLy9vbGRlciB0aGFuIHRoaXMgdGlsZSAoaS5lLiBhbnkgTE9BRElORyB0aWxlIGZvbGxvd2luZyB0aGlzIGVudHJ5IGluIHRoZSBjaGFpbilcbiAgICAgICAgICAgICAgICB0aWxlLmludGVyaW1UaWxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgICAgIC8va2VlcCB0aGlzIExPQURJTkcgdGlsZSBhbnkgbG9hZGVkIHRpbGVzIGxhdGVyIGluIHRoZSBjaGFpbiBhcmVcbiAgICAgICAgICAgICAgICAvL29sZGVyIHRoYW4gdGhpcyB0aWxlLCBzbyB3ZSdyZSBzdGlsbCBpbnRlcmVzdGVkIGluIHRoZSByZXF1ZXN0XG4gICAgICAgICAgICAgICAgcHJldiA9IHRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aWxlLmdldFN0YXRlKCkgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgICAgICAvL3RoZSBoZWFkIG9mIHRoZSBsaXN0IGlzIHRoZSBtb3N0IGN1cnJlbnQgdGlsZSwgd2UgZG9uJ3QgbmVlZFxuICAgICAgICAgICAgICAgIC8vdG8gc3RhcnQgYW55IG90aGVyIHJlcXVlc3RzIGZvciB0aGlzIGNoYWluXG4gICAgICAgICAgICAgICAgcHJldi5pbnRlcmltVGlsZSA9IHRpbGUuaW50ZXJpbVRpbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2ID0gdGlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRpbGUgPSBwcmV2LmludGVyaW1UaWxlO1xuICAgICAgICB9IHdoaWxlICh0aWxlKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBjb29yZGluYXRlIGZvciB0aGlzIHRpbGUuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaGUgdGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5nZXRUaWxlQ29vcmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVDb29yZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZVN0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldFN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoaXMgdGlsZS4gSWYgeW91IHdyaXRlIHlvdXIgb3duIHtAbGluayBtb2R1bGU6b2wvVGlsZX5Mb2FkRnVuY3Rpb24gdGlsZUxvYWRGdW5jdGlvbn0gLFxuICAgICAqIGl0IGlzIGltcG9ydGFudCB0byBzZXQgdGhlIHN0YXRlIGNvcnJlY3RseSB0byB7QGxpbmsgbW9kdWxlOm9sL1RpbGVTdGF0ZX5FUlJPUn1cbiAgICAgKiB3aGVuIHRoZSB0aWxlIGNhbm5vdCBiZSBsb2FkZWQuIE90aGVyd2lzZSB0aGUgdGlsZSBjYW5ub3QgYmUgcmVtb3ZlZCBmcm9tXG4gICAgICogdGhlIHRpbGUgcXVldWUgYW5kIHdpbGwgYmxvY2sgb3RoZXIgcmVxdWVzdHMuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFRpbGVTdGF0ZS5FUlJPUiAmJiB0aGlzLnN0YXRlID4gc3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGlsZSBsb2FkIHNlcXVlbmNlIHZpb2xhdGlvbicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBMb2FkIHRoZSBpbWFnZSBvciByZXRyeSBpZiBsb2FkaW5nIHByZXZpb3VzbHkgZmFpbGVkLlxuICAgICAqIExvYWRpbmcgaXMgdGFrZW4gY2FyZSBvZiBieSB0aGUgdGlsZSBxdWV1ZSwgYW5kIGNhbGxpbmcgdGhpcyBtZXRob2QgaXNcbiAgICAgKiBvbmx5IG5lZWRlZCBmb3IgcHJlbG9hZGluZyBvciBmb3IgcmVsb2FkaW5nIGluIGNhc2Ugb2YgYW4gZXJyb3IuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFscGhhIHZhbHVlIGZvciByZW5kZXJpbmcuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGlkIEFuIGlkIGZvciB0aGUgcmVuZGVyZXIuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWUgVGhlIHJlbmRlciBmcmFtZSB0aW1lLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLlxuICAgICAqL1xuICAgIFRpbGUucHJvdG90eXBlLmdldEFscGhhID0gZnVuY3Rpb24gKGlkLCB0aW1lKSB7XG4gICAgICAgIGlmICghdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXJ0ID0gdGhpcy50cmFuc2l0aW9uU3RhcnRzX1tpZF07XG4gICAgICAgIGlmICghc3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXJ0ID0gdGltZTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvblN0YXJ0c19baWRdID0gc3RhcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhcnQgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVsdGEgPSB0aW1lIC0gc3RhcnQgKyAxMDAwIC8gNjA7IC8vIGF2b2lkIHJlbmRlcmluZyBhdCAwXG4gICAgICAgIGlmIChkZWx0YSA+PSB0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWFzZUluKGRlbHRhIC8gdGhpcy50cmFuc2l0aW9uXyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgaWYgYSB0aWxlIGlzIGluIGFuIGFscGhhIHRyYW5zaXRpb24uICBBIHRpbGUgaXMgY29uc2lkZXJlZCBpblxuICAgICAqIHRyYW5zaXRpb24gaWYgdGlsZS5nZXRBbHBoYSgpIGhhcyBub3QgeWV0IGJlZW4gY2FsbGVkIG9yIGhhcyBiZWVuIGNhbGxlZFxuICAgICAqIGFuZCByZXR1cm5lZCAxLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBbiBpZCBmb3IgdGhlIHJlbmRlcmVyLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSB0aWxlIGlzIGluIHRyYW5zaXRpb24uXG4gICAgICovXG4gICAgVGlsZS5wcm90b3R5cGUuaW5UcmFuc2l0aW9uID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGlmICghdGhpcy50cmFuc2l0aW9uXykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSAhPT0gLTE7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBNYXJrIGEgdHJhbnNpdGlvbiBhcyBjb21wbGV0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgQW4gaWQgZm9yIHRoZSByZW5kZXJlci5cbiAgICAgKi9cbiAgICBUaWxlLnByb3RvdHlwZS5lbmRUcmFuc2l0aW9uID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIGlmICh0aGlzLnRyYW5zaXRpb25fKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25TdGFydHNfW2lkXSA9IC0xO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gVGlsZTtcbn0oRXZlbnRUYXJnZXQpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VCYXNlXG4gKi9cbmltcG9ydCBFdmVudFRhcmdldCBmcm9tICcuL2V2ZW50cy9UYXJnZXQuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuL3V0aWwuanMnO1xuLyoqXG4gKiBAYWJzdHJhY3RcbiAqL1xudmFyIEltYWdlQmFzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VCYXNlLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IHN0YXRlIFN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEltYWdlQmFzZShleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHN0YXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5leHRlbnQgPSBleHRlbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucGl4ZWxSYXRpb18gPSBwaXhlbFJhdGlvO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBJbWFnZUJhc2UucHJvdG90eXBlLmNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChFdmVudFR5cGUuQ0hBTkdFKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gRXh0ZW50LlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0RXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHRlbnQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IEltYWdlLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBQaXhlbFJhdGlvLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0UGl4ZWxSYXRpbyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGl4ZWxSYXRpb187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovICh0aGlzLnJlc29sdXRpb24pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi9JbWFnZVN0YXRlLmpzXCIpLmRlZmF1bHR9IFN0YXRlLlxuICAgICAqL1xuICAgIEltYWdlQmFzZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogTG9hZCBub3QgeWV0IGxvYWRlZCBVUkkuXG4gICAgICogQGFic3RyYWN0XG4gICAgICovXG4gICAgSW1hZ2VCYXNlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBhYnN0cmFjdCgpO1xuICAgIH07XG4gICAgcmV0dXJuIEltYWdlQmFzZTtcbn0oRXZlbnRUYXJnZXQpKTtcbmV4cG9ydCBkZWZhdWx0IEltYWdlQmFzZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlQmFzZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL0ltYWdlXG4gKi9cbmltcG9ydCBFdmVudFR5cGUgZnJvbSAnLi9ldmVudHMvRXZlbnRUeXBlLmpzJztcbmltcG9ydCBJbWFnZUJhc2UgZnJvbSAnLi9JbWFnZUJhc2UuanMnO1xuaW1wb3J0IEltYWdlU3RhdGUgZnJvbSAnLi9JbWFnZVN0YXRlLmpzJztcbmltcG9ydCB7IElNQUdFX0RFQ09ERSB9IGZyb20gJy4vaGFzLmpzJztcbmltcG9ydCB7IGdldEhlaWdodCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3Rlbk9uY2UsIHVubGlzdGVuQnlLZXkgfSBmcm9tICcuL2V2ZW50cy5qcyc7XG4vKipcbiAqIEEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhbiB7QGxpbmsgbW9kdWxlOm9sL0ltYWdlfkltYWdlfSBmb3IgdGhlIGltYWdlIGFuZCBhXG4gKiBge3N0cmluZ31gIGZvciB0aGUgc3JjIGFzIGFyZ3VtZW50cy4gSXQgaXMgc3VwcG9zZWQgdG8gbWFrZSBpdCBzbyB0aGVcbiAqIHVuZGVybHlpbmcgaW1hZ2Uge0BsaW5rIG1vZHVsZTpvbC9JbWFnZX5JbWFnZSNnZXRJbWFnZX0gaXMgYXNzaWduZWQgdGhlXG4gKiBjb250ZW50IHNwZWNpZmllZCBieSB0aGUgc3JjLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgZGVmYXVsdCBpc1xuICpcbiAqICAgICBmdW5jdGlvbihpbWFnZSwgc3JjKSB7XG4gKiAgICAgICBpbWFnZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqICAgICB9XG4gKlxuICogUHJvdmlkaW5nIGEgY3VzdG9tIGBpbWFnZUxvYWRGdW5jdGlvbmAgY2FuIGJlIHVzZWZ1bCB0byBsb2FkIGltYWdlcyB3aXRoXG4gKiBwb3N0IHJlcXVlc3RzIG9yIC0gaW4gZ2VuZXJhbCAtIHRocm91Z2ggWEhSIHJlcXVlc3RzLCB3aGVyZSB0aGUgc3JjIG9mIHRoZVxuICogaW1hZ2UgZWxlbWVudCB3b3VsZCBiZSBzZXQgdG8gYSBkYXRhIFVSSSB3aGVuIHRoZSBjb250ZW50IGlzIGxvYWRlZC5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oSW1hZ2VXcmFwcGVyLCBzdHJpbmcpOiB2b2lkfSBMb2FkRnVuY3Rpb25cbiAqIEBhcGlcbiAqL1xudmFyIEltYWdlV3JhcHBlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoSW1hZ2VXcmFwcGVyLCBfc3VwZXIpO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHVuZGVmaW5lZH0gcmVzb2x1dGlvbiBSZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBzcmMgSW1hZ2Ugc291cmNlIFVSSS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IGNyb3NzT3JpZ2luIENyb3NzIG9yaWdpbi5cbiAgICAgKiBAcGFyYW0ge0xvYWRGdW5jdGlvbn0gaW1hZ2VMb2FkRnVuY3Rpb24gSW1hZ2UgbG9hZCBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVdyYXBwZXIoZXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzcmMsIGNyb3NzT3JpZ2luLCBpbWFnZUxvYWRGdW5jdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBleHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIEltYWdlU3RhdGUuSURMRSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zcmNfID0gc3JjO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2Z1bmN0aW9uKCk6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuL0ltYWdlU3RhdGUuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5JRExFO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0xvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyA9IGltYWdlTG9hZEZ1bmN0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2UuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBsb2FkaW5nIG9yIHJlYWQgZXJyb3JzLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLmhhbmRsZUltYWdlRXJyb3JfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5FUlJPUjtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFRyYWNrcyBzdWNjZXNzZnVsIGltYWdlIGxvYWQuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUuaGFuZGxlSW1hZ2VMb2FkXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzb2x1dGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdXRpb24gPSBnZXRIZWlnaHQodGhpcy5leHRlbnQpIC8gdGhpcy5pbWFnZV8uaGVpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3RhdGUgPSBJbWFnZVN0YXRlLkxPQURFRDtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgdGhlIGltYWdlIG9yIHJldHJ5IGlmIGxvYWRpbmcgcHJldmlvdXNseSBmYWlsZWQuXG4gICAgICogTG9hZGluZyBpcyB0YWtlbiBjYXJlIG9mIGJ5IHRoZSB0aWxlIHF1ZXVlLCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIG9ubHkgbmVlZGVkIGZvciBwcmVsb2FkaW5nIG9yIGZvciByZWxvYWRpbmcgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VXcmFwcGVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLklETEUgfHwgdGhpcy5zdGF0ZSA9PSBJbWFnZVN0YXRlLkVSUk9SKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gSW1hZ2VTdGF0ZS5MT0FESU5HO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgICAgICAgICB0aGlzLmltYWdlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBsaXN0ZW5JbWFnZSh0aGlzLmltYWdlXywgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZS5cbiAgICAgKi9cbiAgICBJbWFnZVdyYXBwZXIucHJvdG90eXBlLnNldEltYWdlID0gZnVuY3Rpb24gKGltYWdlKSB7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gaW1hZ2U7XG4gICAgICAgIHRoaXMucmVzb2x1dGlvbiA9IGdldEhlaWdodCh0aGlzLmV4dGVudCkgLyB0aGlzLmltYWdlXy5oZWlnaHQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBEaXNjYXJkcyBldmVudCBoYW5kbGVycyB3aGljaCBsaXN0ZW4gZm9yIGxvYWQgY29tcGxldGlvbiBvciBlcnJvcnMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIEltYWdlV3JhcHBlci5wcm90b3R5cGUudW5saXN0ZW5JbWFnZV8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnVubGlzdGVuXykge1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8oKTtcbiAgICAgICAgICAgIHRoaXMudW5saXN0ZW5fID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEltYWdlV3JhcHBlcjtcbn0oSW1hZ2VCYXNlKSk7XG4vKipcbiAqIEBwYXJhbSB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBpbWFnZSBJbWFnZSBlbGVtZW50LlxuICogQHBhcmFtIHtmdW5jdGlvbigpOmFueX0gbG9hZEhhbmRsZXIgTG9hZCBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTphbnl9IGVycm9ySGFuZGxlciBFcnJvciBjYWxsYmFjayBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKCk6dm9pZH0gQ2FsbGJhY2sgdG8gc3RvcCBsaXN0ZW5pbmcuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5JbWFnZShpbWFnZSwgbG9hZEhhbmRsZXIsIGVycm9ySGFuZGxlcikge1xuICAgIHZhciBpbWcgPSAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR9ICovIChpbWFnZSk7XG4gICAgaWYgKGltZy5zcmMgJiYgSU1BR0VfREVDT0RFKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gaW1nLmRlY29kZSgpO1xuICAgICAgICB2YXIgbGlzdGVuaW5nXzEgPSB0cnVlO1xuICAgICAgICB2YXIgdW5saXN0ZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsaXN0ZW5pbmdfMSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBwcm9taXNlXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobGlzdGVuaW5nXzEpIHtcbiAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGxpc3RlbmluZ18xKSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IFVuY29uZGl0aW9uYWxseSBjYWxsIGVycm9ySGFuZGxlcigpIHdoZW4gdGhpcyBidWcgaXMgZml4ZWQgdXBzdHJlYW06XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTg1MjdcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0VuY29kaW5nRXJyb3InICYmXG4gICAgICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIGltYWdlIHR5cGUuJykge1xuICAgICAgICAgICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JIYW5kbGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHVubGlzdGVuO1xuICAgIH1cbiAgICB2YXIgbGlzdGVuZXJLZXlzID0gW1xuICAgICAgICBsaXN0ZW5PbmNlKGltZywgRXZlbnRUeXBlLkxPQUQsIGxvYWRIYW5kbGVyKSxcbiAgICAgICAgbGlzdGVuT25jZShpbWcsIEV2ZW50VHlwZS5FUlJPUiwgZXJyb3JIYW5kbGVyKSxcbiAgICBdO1xuICAgIHJldHVybiBmdW5jdGlvbiB1bmxpc3RlbigpIHtcbiAgICAgICAgbGlzdGVuZXJLZXlzLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgfTtcbn1cbmV4cG9ydCBkZWZhdWx0IEltYWdlV3JhcHBlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvSW1hZ2VUaWxlXG4gKi9cbmltcG9ydCBUaWxlIGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4vVGlsZVN0YXRlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGxpc3RlbkltYWdlIH0gZnJvbSAnLi9JbWFnZS5qcyc7XG52YXIgSW1hZ2VUaWxlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhJbWFnZVRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGVTdGF0ZS5qc1wiKS5kZWZhdWx0fSBzdGF0ZSBTdGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3JjIEltYWdlIHNvdXJjZSBVUkkuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBjcm9zc09yaWdpbiBDcm9zcyBvcmlnaW4uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGUgbG9hZCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5PcHRpb25zfSBbb3B0X29wdGlvbnNdIFRpbGUgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBJbWFnZVRpbGUodGlsZUNvb3JkLCBzdGF0ZSwgc3JjLCBjcm9zc09yaWdpbiwgdGlsZUxvYWRGdW5jdGlvbiwgb3B0X29wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdGlsZUNvb3JkLCBzdGF0ZSwgb3B0X29wdGlvbnMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNyb3NzT3JpZ2luXyA9IGNyb3NzT3JpZ2luO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW1hZ2UgVVJJXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zcmNfID0gc3JjO1xuICAgICAgICBfdGhpcy5rZXkgPSBzcmM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmltYWdlXyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICBpZiAoY3Jvc3NPcmlnaW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIF90aGlzLmltYWdlXy5jcm9zc09yaWdpbiA9IGNyb3NzT3JpZ2luO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P2Z1bmN0aW9uKCk6dm9pZH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnVubGlzdGVuXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVMb2FkRnVuY3Rpb25fID0gdGlsZUxvYWRGdW5jdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIEhUTUwgaW1hZ2UgZWxlbWVudCBmb3IgdGhpcyB0aWxlIChtYXkgYmUgYSBDYW52YXMsIEltYWdlLCBvciBWaWRlbykuXG4gICAgICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR8SFRNTEltYWdlRWxlbWVudHxIVE1MVmlkZW9FbGVtZW50fSBJbWFnZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5nZXRJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyBhbiBIVE1MIGltYWdlIGVsZW1lbnQgZm9yIHRoaXMgdGlsZSAobWF5IGJlIGEgQ2FudmFzIG9yIHByZWxvYWRlZCBJbWFnZSkuXG4gICAgICogQHBhcmFtIHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fSBlbGVtZW50IEVsZW1lbnQuXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5zZXRJbWFnZSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaW1hZ2VfID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5MT0FERUQ7XG4gICAgICAgIHRoaXMudW5saXN0ZW5JbWFnZV8oKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3MgbG9hZGluZyBvciByZWFkIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS5oYW5kbGVJbWFnZUVycm9yXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmltYWdlXyA9IGdldEJsYW5rSW1hZ2UoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUcmFja3Mgc3VjY2Vzc2Z1bCBpbWFnZSBsb2FkLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmhhbmRsZUltYWdlTG9hZF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbWFnZSA9IC8qKiBAdHlwZSB7SFRNTEltYWdlRWxlbWVudH0gKi8gKHRoaXMuaW1hZ2VfKTtcbiAgICAgICAgaWYgKGltYWdlLm5hdHVyYWxXaWR0aCAmJiBpbWFnZS5uYXR1cmFsSGVpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51bmxpc3RlbkltYWdlXygpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBJbWFnZVRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5JRExFO1xuICAgICAgICAgICAgdGhpcy5pbWFnZV8gPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNyb3NzT3JpZ2luXyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VfLmNyb3NzT3JpZ2luID0gdGhpcy5jcm9zc09yaWdpbl87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUgPT0gVGlsZVN0YXRlLklETEUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSBUaWxlU3RhdGUuTE9BRElORztcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgICAgICAgICAgdGhpcy50aWxlTG9hZEZ1bmN0aW9uXyh0aGlzLCB0aGlzLnNyY18pO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBsaXN0ZW5JbWFnZSh0aGlzLmltYWdlXywgdGhpcy5oYW5kbGVJbWFnZUxvYWRfLmJpbmQodGhpcyksIHRoaXMuaGFuZGxlSW1hZ2VFcnJvcl8uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIERpc2NhcmRzIGV2ZW50IGhhbmRsZXJzIHdoaWNoIGxpc3RlbiBmb3IgbG9hZCBjb21wbGV0aW9uIG9yIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgSW1hZ2VUaWxlLnByb3RvdHlwZS51bmxpc3RlbkltYWdlXyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMudW5saXN0ZW5fKSB7XG4gICAgICAgICAgICB0aGlzLnVubGlzdGVuXygpO1xuICAgICAgICAgICAgdGhpcy51bmxpc3Rlbl8gPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gSW1hZ2VUaWxlO1xufShUaWxlKSk7XG4vKipcbiAqIEdldCBhIDEtcGl4ZWwgYmxhbmsgaW1hZ2UuXG4gKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH0gQmxhbmsgaW1hZ2UuXG4gKi9cbmZ1bmN0aW9uIGdldEJsYW5rSW1hZ2UoKSB7XG4gICAgdmFyIGN0eCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCgxLCAxKTtcbiAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMCknO1xuICAgIGN0eC5maWxsUmVjdCgwLCAwLCAxLCAxKTtcbiAgICByZXR1cm4gY3R4LmNhbnZhcztcbn1cbmV4cG9ydCBkZWZhdWx0IEltYWdlVGlsZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUltYWdlVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvcmVwcm9qL1RyaWFuZ3VsYXRpb25cbiAqL1xuaW1wb3J0IHsgYm91bmRpbmdFeHRlbnQsIGNyZWF0ZUVtcHR5LCBleHRlbmRDb29yZGluYXRlLCBnZXRBcmVhLCBnZXRCb3R0b21MZWZ0LCBnZXRCb3R0b21SaWdodCwgZ2V0VG9wTGVmdCwgZ2V0VG9wUmlnaHQsIGdldFdpZHRoLCBpbnRlcnNlY3RzLCB9IGZyb20gJy4uL2V4dGVudC5qcyc7XG5pbXBvcnQgeyBnZXRUcmFuc2Zvcm0gfSBmcm9tICcuLi9wcm9qLmpzJztcbmltcG9ydCB7IGxvZzIsIG1vZHVsbyB9IGZyb20gJy4uL21hdGguanMnO1xuLyoqXG4gKiBTaW5nbGUgdHJpYW5nbGU7IGNvbnNpc3RzIG9mIDMgc291cmNlIHBvaW50cyBhbmQgMyB0YXJnZXQgcG9pbnRzLlxuICogQHR5cGVkZWYge09iamVjdH0gVHJpYW5nbGVcbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gc291cmNlIFNvdXJjZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gdGFyZ2V0IFRhcmdldC5cbiAqL1xuLyoqXG4gKiBNYXhpbXVtIG51bWJlciBvZiBzdWJkaXZpc2lvbiBzdGVwcyBkdXJpbmcgcmFzdGVyIHJlcHJvamVjdGlvbiB0cmlhbmd1bGF0aW9uLlxuICogUHJldmVudHMgaGlnaCBtZW1vcnkgdXNhZ2UgYW5kIGxhcmdlIG51bWJlciBvZiBwcm9qNCBjYWxscyAoZm9yIGNlcnRhaW5cbiAqIHRyYW5zZm9ybWF0aW9ucyBhbmQgYXJlYXMpLiBBdCBtb3N0IGAyKigyXnRoaXMpYCB0cmlhbmdsZXMgYXJlIGNyZWF0ZWQgZm9yXG4gKiBlYWNoIHRyaWFuZ3VsYXRlZCBleHRlbnQgKHRpbGUvaW1hZ2UpLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xudmFyIE1BWF9TVUJESVZJU0lPTiA9IDEwO1xuLyoqXG4gKiBNYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZiB0cmlhbmdsZSByZWxhdGl2ZSB0byB3b3JsZCB3aWR0aC4gV2hlbiB0cmFuc2Zvcm1pbmdcbiAqIGNvcm5lcnMgb2Ygd29ybGQgZXh0ZW50IGJldHdlZW4gY2VydGFpbiBwcm9qZWN0aW9ucywgdGhlIHJlc3VsdGluZ1xuICogdHJpYW5ndWxhdGlvbiBzZWVtcyB0byBoYXZlIHplcm8gZXJyb3IgYW5kIG5vIHN1YmRpdmlzaW9uIGlzIHBlcmZvcm1lZC4gSWZcbiAqIHRoZSB0cmlhbmdsZSB3aWR0aCBpcyBtb3JlIHRoYW4gdGhpcyAocmVsYXRpdmUgdG8gd29ybGQgd2lkdGg7IDAtMSksXG4gKiBzdWJkaXZpc29uIGlzIGZvcmNlZCAodXAgdG8gYE1BWF9TVUJESVZJU0lPTmApLiBEZWZhdWx0IGlzIGAwLjI1YC5cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbnZhciBNQVhfVFJJQU5HTEVfV0lEVEggPSAwLjI1O1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBjb250YWluaW5nIHRyaWFuZ3VsYXRpb24gb2YgdGhlIGdpdmVuIHRhcmdldCBleHRlbnQuXG4gKiBVc2VkIGZvciBkZXRlcm1pbmluZyBzb3VyY2UgZGF0YSBhbmQgdGhlIHJlcHJvamVjdGlvbiBpdHNlbGYuXG4gKi9cbnZhciBUcmlhbmd1bGF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IHRhcmdldEV4dGVudCBUYXJnZXQgZXh0ZW50IHRvIHRyaWFuZ3VsYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gbWF4U291cmNlRXh0ZW50IE1heGltYWwgc291cmNlIGV4dGVudCB0aGF0IGNhbiBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBlcnJvclRocmVzaG9sZCBBY2NlcHRhYmxlIGVycm9yIChpbiBzb3VyY2UgdW5pdHMpLlxuICAgICAqIEBwYXJhbSB7P251bWJlcn0gb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiBUaGUgKG9wdGlvbmFsKSByZXNvbHV0aW9uIG9mIHRoZSBkZXN0aW5hdGlvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldEV4dGVudCwgbWF4U291cmNlRXh0ZW50LCBlcnJvclRocmVzaG9sZCwgb3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbikge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VQcm9qXyA9IHNvdXJjZVByb2o7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRhcmdldFByb2pfID0gdGFyZ2V0UHJvajtcbiAgICAgICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vY29vcmRpbmF0ZS5qc1wiKS5Db29yZGluYXRlPn0gKi9cbiAgICAgICAgdmFyIHRyYW5zZm9ybUludkNhY2hlID0ge307XG4gICAgICAgIHZhciB0cmFuc2Zvcm1JbnYgPSBnZXRUcmFuc2Zvcm0odGhpcy50YXJnZXRQcm9qXywgdGhpcy5zb3VyY2VQcm9qXyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBBIGNvb3JkaW5hdGUuXG4gICAgICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVHJhbnNmb3JtZWQgY29vcmRpbmF0ZS5cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJhbnNmb3JtSW52XyA9IGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gY1swXSArICcvJyArIGNbMV07XG4gICAgICAgICAgICBpZiAoIXRyYW5zZm9ybUludkNhY2hlW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1JbnZDYWNoZVtrZXldID0gdHJhbnNmb3JtSW52KGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUludkNhY2hlW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWF4U291cmNlRXh0ZW50XyA9IG1heFNvdXJjZUV4dGVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVycm9yVGhyZXNob2xkU3F1YXJlZF8gPSBlcnJvclRocmVzaG9sZCAqIGVycm9yVGhyZXNob2xkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFRyaWFuZ2xlPn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpYW5nbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNhdGVzIHRoYXQgdGhlIHRyaWFuZ3VsYXRpb24gY3Jvc3NlcyBlZGdlIG9mIHRoZSBzb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNhbldyYXBYSW5Tb3VyY2VfID1cbiAgICAgICAgICAgIHRoaXMuc291cmNlUHJval8uY2FuV3JhcFgoKSAmJlxuICAgICAgICAgICAgICAgICEhbWF4U291cmNlRXh0ZW50ICYmXG4gICAgICAgICAgICAgICAgISF0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpICYmXG4gICAgICAgICAgICAgICAgZ2V0V2lkdGgobWF4U291cmNlRXh0ZW50KSA9PSBnZXRXaWR0aCh0aGlzLnNvdXJjZVByb2pfLmdldEV4dGVudCgpKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyA9IHRoaXMuc291cmNlUHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy5zb3VyY2VQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHs/bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YXJnZXRXb3JsZFdpZHRoXyA9IHRoaXMudGFyZ2V0UHJval8uZ2V0RXh0ZW50KClcbiAgICAgICAgICAgID8gZ2V0V2lkdGgodGhpcy50YXJnZXRQcm9qXy5nZXRFeHRlbnQoKSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uVG9wUmlnaHQgPSBnZXRUb3BSaWdodCh0YXJnZXRFeHRlbnQpO1xuICAgICAgICB2YXIgZGVzdGluYXRpb25Cb3R0b21SaWdodCA9IGdldEJvdHRvbVJpZ2h0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbkJvdHRvbUxlZnQgPSBnZXRCb3R0b21MZWZ0KHRhcmdldEV4dGVudCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BMZWZ0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uVG9wTGVmdCk7XG4gICAgICAgIHZhciBzb3VyY2VUb3BSaWdodCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvblRvcFJpZ2h0KTtcbiAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0ID0gdGhpcy50cmFuc2Zvcm1JbnZfKGRlc3RpbmF0aW9uQm90dG9tUmlnaHQpO1xuICAgICAgICB2YXIgc291cmNlQm90dG9tTGVmdCA9IHRoaXMudHJhbnNmb3JtSW52XyhkZXN0aW5hdGlvbkJvdHRvbUxlZnQpO1xuICAgICAgICAvKlxuICAgICAgICAgKiBUaGUgbWF4U3ViZGl2aXNpb24gY29udHJvbHMgaG93IG1hbnkgc3BsaXR0aW5ncyBvZiB0aGUgdGFyZ2V0IGFyZWEgY2FuXG4gICAgICAgICAqIGJlIGRvbmUuIFRoZSBpZGVhIGhlcmUgaXMgdG8gZG8gYSBsaW5lYXIgbWFwcGluZyBvZiB0aGUgdGFyZ2V0IGFyZWFzXG4gICAgICAgICAqIGJ1dCB0aGUgYWN0dWFsIG92ZXJhbCByZXByb2plY3Rpb24gKGNhbiBiZSkgZXh0cmVtZWx5IG5vbi1saW5lYXIuIFRoZVxuICAgICAgICAgKiBkZWZhdWx0IHZhbHVlIG9mIE1BWF9TVUJESVZJU0lPTiB3YXMgY2hvc2VuIGJhc2VkIG9uIG1hcHBpbmcgYSAyNTZ4MjU2XG4gICAgICAgICAqIHRpbGUgc2l6ZS4gSG93ZXZlciB0aGlzIGZ1bmN0aW9uIGlzIGFsc28gY2FsbGVkIHRvIHJlbWFwIGNhbnZhcyByZW5kZXJlZFxuICAgICAgICAgKiBsYXllcnMgd2hpY2ggY2FuIGJlIG11Y2ggbGFyZ2VyLiBUaGlzIGNhbGN1bGF0aW9uIGluY3JlYXNlcyB0aGUgbWF4U3ViZGl2aXNpb25cbiAgICAgICAgICogdmFsdWUgYnkgdGhlIHJpZ2h0IGZhY3RvciBzbyB0aGF0IGVhY2ggMjU2eDI1NiBwaXhlbCBhcmVhIGhhc1xuICAgICAgICAgKiBNQVhfU1VCRElWSVNJT04gZGl2aXNpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIG1heFN1YmRpdmlzaW9uID0gTUFYX1NVQkRJVklTSU9OICtcbiAgICAgICAgICAgIChvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uXG4gICAgICAgICAgICAgICAgPyBNYXRoLm1heCgwLCBNYXRoLmNlaWwobG9nMihnZXRBcmVhKHRhcmdldEV4dGVudCkgL1xuICAgICAgICAgICAgICAgICAgICAob3B0X2Rlc3RpbmF0aW9uUmVzb2x1dGlvbiAqXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRfZGVzdGluYXRpb25SZXNvbHV0aW9uICpcbiAgICAgICAgICAgICAgICAgICAgICAgIDI1NiAqXG4gICAgICAgICAgICAgICAgICAgICAgICAyNTYpKSkpXG4gICAgICAgICAgICAgICAgOiAwKTtcbiAgICAgICAgdGhpcy5hZGRRdWFkXyhkZXN0aW5hdGlvblRvcExlZnQsIGRlc3RpbmF0aW9uVG9wUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tUmlnaHQsIGRlc3RpbmF0aW9uQm90dG9tTGVmdCwgc291cmNlVG9wTGVmdCwgc291cmNlVG9wUmlnaHQsIHNvdXJjZUJvdHRvbVJpZ2h0LCBzb3VyY2VCb3R0b21MZWZ0LCBtYXhTdWJkaXZpc2lvbik7XG4gICAgICAgIGlmICh0aGlzLndyYXBzWEluU291cmNlXykge1xuICAgICAgICAgICAgdmFyIGxlZnRCb3VuZF8xID0gSW5maW5pdHk7XG4gICAgICAgICAgICB0aGlzLnRyaWFuZ2xlc18uZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID0gTWF0aC5taW4obGVmdEJvdW5kXzEsIHRyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzFdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTaGlmdCB0cmlhbmdsZXMgdG8gYmUgYXMgY2xvc2UgdG8gYGxlZnRCb3VuZGAgYXMgcG9zc2libGVcbiAgICAgICAgICAgIC8vIChpZiB0aGUgZGlzdGFuY2UgaXMgbW9yZSB0aGFuIGB3b3JsZFdpZHRoIC8gMmAgaXQgY2FuIGJlIGNsb3Nlci5cbiAgICAgICAgICAgIHRoaXMudHJpYW5nbGVzXy5mb3JFYWNoKGZ1bmN0aW9uICh0cmlhbmdsZSkge1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLm1heCh0cmlhbmdsZS5zb3VyY2VbMF1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVswXSwgdHJpYW5nbGUuc291cmNlWzJdWzBdKSAtXG4gICAgICAgICAgICAgICAgICAgIGxlZnRCb3VuZF8xID5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1RyaWFuZ2xlID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgW3RyaWFuZ2xlLnNvdXJjZVswXVswXSwgdHJpYW5nbGUuc291cmNlWzBdWzFdXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFt0cmlhbmdsZS5zb3VyY2VbMV1bMF0sIHRyaWFuZ2xlLnNvdXJjZVsxXVsxXV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBbdHJpYW5nbGUuc291cmNlWzJdWzBdLCB0cmlhbmdsZS5zb3VyY2VbMl1bMV1dLFxuICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VHJpYW5nbGVbMF1bMF0gLSBsZWZ0Qm91bmRfMSA+IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUcmlhbmdsZVswXVswXSAtPSB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdUcmlhbmdsZVsxXVswXSAtIGxlZnRCb3VuZF8xID4gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXyAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RyaWFuZ2xlWzFdWzBdIC09IHRoaXMuc291cmNlV29ybGRXaWR0aF87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1RyaWFuZ2xlWzJdWzBdIC0gbGVmdEJvdW5kXzEgPiB0aGlzLnNvdXJjZVdvcmxkV2lkdGhfIC8gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VHJpYW5nbGVbMl1bMF0gLT0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBSYXJlbHkgKGlmIHRoZSBleHRlbnQgY29udGFpbnMgYm90aCB0aGUgZGF0ZWxpbmUgYW5kIHByaW1lIG1lcmlkaWFuKVxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc2hpZnQgY2FuIGluIHR1cm4gYnJlYWsgc29tZSB0cmlhbmdsZXMuXG4gICAgICAgICAgICAgICAgICAgIC8vIERldGVjdCB0aGlzIGhlcmUgYW5kIGRvbid0IHNoaWZ0IGluIHN1Y2ggY2FzZXMuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtaW5YID0gTWF0aC5taW4obmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXhYID0gTWF0aC5tYXgobmV3VHJpYW5nbGVbMF1bMF0sIG5ld1RyaWFuZ2xlWzFdWzBdLCBuZXdUcmlhbmdsZVsyXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhYIC0gbWluWCA8IHRoaXMuc291cmNlV29ybGRXaWR0aF8gLyAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlhbmdsZS5zb3VyY2UgPSBuZXdUcmlhbmdsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhbnNmb3JtSW52Q2FjaGUgPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0cmlhbmdsZSB0byB0aGUgdHJpYW5ndWxhdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRyaWFuZ3VsYXRpb24ucHJvdG90eXBlLmFkZFRyaWFuZ2xlXyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBhU3JjLCBiU3JjLCBjU3JjKSB7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzXy5wdXNoKHtcbiAgICAgICAgICAgIHNvdXJjZTogW2FTcmMsIGJTcmMsIGNTcmNdLFxuICAgICAgICAgICAgdGFyZ2V0OiBbYSwgYiwgY10sXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQWRkcyBxdWFkIChwb2ludHMgaW4gY2xvY2std2lzZSBvcmRlcikgdG8gdGhlIHRyaWFuZ3VsYXRpb25cbiAgICAgKiAoYW5kIHJlcHJvamVjdHMgdGhlIHZlcnRpY2VzKSBpZiB2YWxpZC5cbiAgICAgKiBQZXJmb3JtcyBxdWFkIHN1YmRpdmlzaW9uIGlmIG5lZWRlZCB0byBpbmNyZWFzZSBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYSBUaGUgdGFyZ2V0IGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYiBUaGUgdGFyZ2V0IGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYyBUaGUgdGFyZ2V0IGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZCBUaGUgdGFyZ2V0IGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYVNyYyBUaGUgc291cmNlIGEgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gYlNyYyBUaGUgc291cmNlIGIgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY1NyYyBUaGUgc291cmNlIGMgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gZFNyYyBUaGUgc291cmNlIGQgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbWF4U3ViZGl2aXNpb24gTWF4aW1hbCBhbGxvd2VkIHN1YmRpdmlzaW9uIG9mIHRoZSBxdWFkLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuYWRkUXVhZF8gPSBmdW5jdGlvbiAoYSwgYiwgYywgZCwgYVNyYywgYlNyYywgY1NyYywgZFNyYywgbWF4U3ViZGl2aXNpb24pIHtcbiAgICAgICAgdmFyIHNvdXJjZVF1YWRFeHRlbnQgPSBib3VuZGluZ0V4dGVudChbYVNyYywgYlNyYywgY1NyYywgZFNyY10pO1xuICAgICAgICB2YXIgc291cmNlQ292ZXJhZ2VYID0gdGhpcy5zb3VyY2VXb3JsZFdpZHRoX1xuICAgICAgICAgICAgPyBnZXRXaWR0aChzb3VyY2VRdWFkRXh0ZW50KSAvIHRoaXMuc291cmNlV29ybGRXaWR0aF9cbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgdmFyIHNvdXJjZVdvcmxkV2lkdGggPSAvKiogQHR5cGUge251bWJlcn0gKi8gKHRoaXMuc291cmNlV29ybGRXaWR0aF8pO1xuICAgICAgICAvLyB3aGVuIHRoZSBxdWFkIGlzIHdyYXBwZWQgaW4gdGhlIHNvdXJjZSBwcm9qZWN0aW9uXG4gICAgICAgIC8vIGl0IGNvdmVycyBtb3N0IG9mIHRoZSBwcm9qZWN0aW9uIGV4dGVudCwgYnV0IG5vdCBmdWxseVxuICAgICAgICB2YXIgd3JhcHNYID0gdGhpcy5zb3VyY2VQcm9qXy5jYW5XcmFwWCgpICYmXG4gICAgICAgICAgICBzb3VyY2VDb3ZlcmFnZVggPiAwLjUgJiZcbiAgICAgICAgICAgIHNvdXJjZUNvdmVyYWdlWCA8IDE7XG4gICAgICAgIHZhciBuZWVkc1N1YmRpdmlzaW9uID0gZmFsc2U7XG4gICAgICAgIGlmIChtYXhTdWJkaXZpc2lvbiA+IDApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldFByb2pfLmlzR2xvYmFsKCkgJiYgdGhpcy50YXJnZXRXb3JsZFdpZHRoXykge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRRdWFkRXh0ZW50ID0gYm91bmRpbmdFeHRlbnQoW2EsIGIsIGMsIGRdKTtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0Q292ZXJhZ2VYID0gZ2V0V2lkdGgodGFyZ2V0UXVhZEV4dGVudCkgLyB0aGlzLnRhcmdldFdvcmxkV2lkdGhfO1xuICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPVxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb3ZlcmFnZVggPiBNQVhfVFJJQU5HTEVfV0lEVEggfHwgbmVlZHNTdWJkaXZpc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghd3JhcHNYICYmIHRoaXMuc291cmNlUHJval8uaXNHbG9iYWwoKSAmJiBzb3VyY2VDb3ZlcmFnZVgpIHtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID1cbiAgICAgICAgICAgICAgICAgICAgc291cmNlQ292ZXJhZ2VYID4gTUFYX1RSSUFOR0xFX1dJRFRIIHx8IG5lZWRzU3ViZGl2aXNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFuZWVkc1N1YmRpdmlzaW9uICYmIHRoaXMubWF4U291cmNlRXh0ZW50Xykge1xuICAgICAgICAgICAgaWYgKGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbMF0pICYmXG4gICAgICAgICAgICAgICAgaXNGaW5pdGUoc291cmNlUXVhZEV4dGVudFsxXSkgJiZcbiAgICAgICAgICAgICAgICBpc0Zpbml0ZShzb3VyY2VRdWFkRXh0ZW50WzJdKSAmJlxuICAgICAgICAgICAgICAgIGlzRmluaXRlKHNvdXJjZVF1YWRFeHRlbnRbM10pKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnRlcnNlY3RzKHNvdXJjZVF1YWRFeHRlbnQsIHRoaXMubWF4U291cmNlRXh0ZW50XykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hvbGUgcXVhZCBvdXRzaWRlIHNvdXJjZSBwcm9qZWN0aW9uIGV4dGVudCAtPiBpZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNOb3RGaW5pdGUgPSAwO1xuICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgIGlmICghaXNGaW5pdGUoYVNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYVNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoYlNyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoY1NyY1sxXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1swXSkgfHxcbiAgICAgICAgICAgICAgICAhaXNGaW5pdGUoZFNyY1sxXSkpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzU3ViZGl2aXNpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQgbWlnaHQgYmUgdGhlIGNhc2UgdGhhdCBvbmx5IDEgb2YgdGhlIHBvaW50cyBpcyBpbmZpbml0ZS4gSW4gdGhpcyBjYXNlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGNhbiBkcmF3IGEgc2luZ2xlIHRyaWFuZ2xlIHdpdGggdGhlIG90aGVyIHRocmVlIHBvaW50c1xuICAgICAgICAgICAgICAgICAgICBpc05vdEZpbml0ZSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGFTcmNbMF0pIHx8ICFpc0Zpbml0ZShhU3JjWzFdKSA/IDggOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpc0Zpbml0ZShiU3JjWzBdKSB8fCAhaXNGaW5pdGUoYlNyY1sxXSkgPyA0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICghaXNGaW5pdGUoY1NyY1swXSkgfHwgIWlzRmluaXRlKGNTcmNbMV0pID8gMiA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIWlzRmluaXRlKGRTcmNbMF0pIHx8ICFpc0Zpbml0ZShkU3JjWzFdKSA/IDEgOiAwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTm90RmluaXRlICE9IDEgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTm90RmluaXRlICE9IDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF4U3ViZGl2aXNpb24gPiAwKSB7XG4gICAgICAgICAgICBpZiAoIW5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gWyhhWzBdICsgY1swXSkgLyAyLCAoYVsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZW50ZXIpO1xuICAgICAgICAgICAgICAgIHZhciBkeCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFc3RpbVggPSAobW9kdWxvKGFTcmNbMF0sIHNvdXJjZVdvcmxkV2lkdGgpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsbyhjU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKSkgL1xuICAgICAgICAgICAgICAgICAgICAgICAgMjtcbiAgICAgICAgICAgICAgICAgICAgZHggPSBjZW50ZXJTcmNFc3RpbVggLSBtb2R1bG8oY2VudGVyU3JjWzBdLCBzb3VyY2VXb3JsZFdpZHRoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGR4ID0gKGFTcmNbMF0gKyBjU3JjWzBdKSAvIDIgLSBjZW50ZXJTcmNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBkeSA9IChhU3JjWzFdICsgY1NyY1sxXSkgLyAyIC0gY2VudGVyU3JjWzFdO1xuICAgICAgICAgICAgICAgIHZhciBjZW50ZXJTcmNFcnJvclNxdWFyZWQgPSBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICAgICAgICAgICAgICBuZWVkc1N1YmRpdmlzaW9uID0gY2VudGVyU3JjRXJyb3JTcXVhcmVkID4gdGhpcy5lcnJvclRocmVzaG9sZFNxdWFyZWRfO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG5lZWRzU3ViZGl2aXNpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoYVswXSAtIGNbMF0pIDw9IE1hdGguYWJzKGFbMV0gLSBjWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBzcGxpdCBob3Jpem9udGFsbHkgKHRvcCAmIGJvdHRvbSlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJjID0gWyhiWzBdICsgY1swXSkgLyAyLCAoYlsxXSArIGNbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBiY1NyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhiYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYSA9IFsoZFswXSArIGFbMF0pIC8gMiwgKGRbMV0gKyBhWzFdKSAvIDJdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGFTcmMgPSB0aGlzLnRyYW5zZm9ybUludl8oZGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGEsIGIsIGJjLCBkYSwgYVNyYywgYlNyYywgYmNTcmMsIGRhU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFF1YWRfKGRhLCBiYywgYywgZCwgZGFTcmMsIGJjU3JjLCBjU3JjLCBkU3JjLCBtYXhTdWJkaXZpc2lvbiAtIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3BsaXQgdmVydGljYWxseSAobGVmdCAmIHJpZ2h0KVxuICAgICAgICAgICAgICAgICAgICB2YXIgYWIgPSBbKGFbMF0gKyBiWzBdKSAvIDIsIChhWzFdICsgYlsxXSkgLyAyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFiU3JjID0gdGhpcy50cmFuc2Zvcm1JbnZfKGFiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNkID0gWyhjWzBdICsgZFswXSkgLyAyLCAoY1sxXSArIGRbMV0pIC8gMl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjZFNyYyA9IHRoaXMudHJhbnNmb3JtSW52XyhjZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYSwgYWIsIGNkLCBkLCBhU3JjLCBhYlNyYywgY2RTcmMsIGRTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUXVhZF8oYWIsIGIsIGMsIGNkLCBhYlNyYywgYlNyYywgY1NyYywgY2RTcmMsIG1heFN1YmRpdmlzaW9uIC0gMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAod3JhcHNYKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuV3JhcFhJblNvdXJjZV8pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLndyYXBzWEluU291cmNlXyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRXhhY3RseSB6ZXJvIG9yIG9uZSBvZiAqU3JjIGlzIG5vdCBmaW5pdGVcbiAgICAgICAgLy8gVGhlIHRyaWFuZ2xlcyBtdXN0IGhhdmUgdGhlIGRpYWdvbmFsIGxpbmUgYXMgdGhlIGZpcnN0IHNpZGVcbiAgICAgICAgLy8gVGhpcyBpcyB0byBhbGxvdyBlYXN5IGNvZGUgaW4gcmVwcm9qLnMgdG8gbWFrZSBpdCBzdHJhaWdodCBmb3IgYnJva2VuXG4gICAgICAgIC8vIGJyb3dzZXJzIHRoYXQgY2FuJ3QgaGFuZGxlIGRpYWdvbmFsIGNsaXBwaW5nXG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGIpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGQsIGFTcmMsIGNTcmMsIGRTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaXNOb3RGaW5pdGUgJiAweGUpID09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRkVHJpYW5nbGVfKGEsIGMsIGIsIGFTcmMsIGNTcmMsIGJTcmMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05vdEZpbml0ZSkge1xuICAgICAgICAgICAgLy8gVHJ5IHRoZSBvdGhlciB0d28gdHJpYW5nbGVzXG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHhkKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYSwgYlNyYywgZFNyYywgYVNyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGlzTm90RmluaXRlICYgMHg3KSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUcmlhbmdsZV8oYiwgZCwgYywgYlNyYywgZFNyYywgY1NyYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZXMgZXh0ZW50IG9mIHRoZSAnc291cmNlJyBjb29yZGluYXRlcyBmcm9tIGFsbCB0aGUgdHJpYW5nbGVzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gQ2FsY3VsYXRlZCBleHRlbnQuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuY2FsY3VsYXRlU291cmNlRXh0ZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZXh0ZW50ID0gY3JlYXRlRW1wdHkoKTtcbiAgICAgICAgdGhpcy50cmlhbmdsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSB0cmlhbmdsZS5zb3VyY2U7XG4gICAgICAgICAgICBleHRlbmRDb29yZGluYXRlKGV4dGVudCwgc3JjWzBdKTtcbiAgICAgICAgICAgIGV4dGVuZENvb3JkaW5hdGUoZXh0ZW50LCBzcmNbMV0pO1xuICAgICAgICAgICAgZXh0ZW5kQ29vcmRpbmF0ZShleHRlbnQsIHNyY1syXSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZXh0ZW50O1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8VHJpYW5nbGU+fSBBcnJheSBvZiB0aGUgY2FsY3VsYXRlZCB0cmlhbmdsZXMuXG4gICAgICovXG4gICAgVHJpYW5ndWxhdGlvbi5wcm90b3R5cGUuZ2V0VHJpYW5nbGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmlhbmdsZXNfO1xuICAgIH07XG4gICAgcmV0dXJuIFRyaWFuZ3VsYXRpb247XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgVHJpYW5ndWxhdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRyaWFuZ3VsYXRpb24uanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9jb21tb25cbiAqL1xuLyoqXG4gKiBEZWZhdWx0IFdNUyB2ZXJzaW9uLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IHZhciBERUZBVUxUX1dNU19WRVJTSU9OID0gJzEuMy4wJztcbi8qKlxuICogQ29udGV4dCBvcHRpb25zIHRvIGRpc2FibGUgaW1hZ2Ugc21vb3RoaW5nLlxuICogQHR5cGUge09iamVjdH1cbiAqL1xuZXhwb3J0IHZhciBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgPSB7XG4gICAgaW1hZ2VTbW9vdGhpbmdFbmFibGVkOiBmYWxzZSxcbiAgICBtc0ltYWdlU21vb3RoaW5nRW5hYmxlZDogZmFsc2UsXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29tbW9uLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2pcbiAqL1xuaW1wb3J0IHsgSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIH0gZnJvbSAnLi9zb3VyY2UvY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2lnbiB9IGZyb20gJy4vb2JqLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlRW1wdHksIGV4dGVuZCwgZm9yRWFjaENvcm5lciwgZ2V0Q2VudGVyLCBnZXRIZWlnaHQsIGdldFRvcExlZnQsIGdldFdpZHRoLCB9IGZyb20gJy4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhbnZhc0NvbnRleHQyRCB9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7IGdldFBvaW50UmVzb2x1dGlvbiwgdHJhbnNmb3JtIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IHNvbHZlTGluZWFyU3lzdGVtIH0gZnJvbSAnLi9tYXRoLmpzJztcbnZhciBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG4vKipcbiAqIFRoaXMgZHJhd3MgYSBzbWFsbCB0cmlhbmdsZSBpbnRvIGEgY2FudmFzIGJ5IHNldHRpbmcgdGhlIHRyaWFuZ2xlIGFzIHRoZSBjbGlwIHJlZ2lvblxuICogYW5kIHRoZW4gZHJhd2luZyBhICh0b28gbGFyZ2UpIHJlY3RhbmdsZVxuICpcbiAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjdHggVGhlIGNvbnRleHQgaW4gd2hpY2ggdG8gZHJhdyB0aGUgdHJpYW5nbGVcbiAqIEBwYXJhbSB7bnVtYmVyfSB1MSBUaGUgeC1jb29yZGluYXRlIG9mIHRoZSBzZWNvbmQgcG9pbnQuIFRoZSBmaXJzdCBwb2ludCBpcyAwLDAuXG4gKiBAcGFyYW0ge251bWJlcn0gdjEgVGhlIHktY29vcmRpbmF0ZSBvZiB0aGUgc2Vjb25kIHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHUyIFRoZSB4LWNvb3JkaW5hdGUgb2YgdGhlIHRoaXJkIHBvaW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHYyIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIHRoaXJkIHBvaW50LlxuICovXG5mdW5jdGlvbiBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgdTEsIHYxLCB1MiwgdjIpIHtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbygwLCAwKTtcbiAgICBjdHgubGluZVRvKHUxLCB2MSk7XG4gICAgY3R4LmxpbmVUbyh1MiwgdjIpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5jbGlwKCk7XG4gICAgY3R4LmZpbGxSZWN0KDAsIDAsIE1hdGgubWF4KHUxLCB1MikgKyAxLCBNYXRoLm1heCh2MSwgdjIpKTtcbiAgICBjdHgucmVzdG9yZSgpO1xufVxuLyoqXG4gKiBHaXZlbiB0aGUgZGF0YSBmcm9tIGdldEltYWdlRGF0YSwgc2VlIGlmIHRoZSByaWdodCB2YWx1ZXMgYXBwZWFyIGF0IHRoZSBwcm92aWRlZCBvZmZzZXQuXG4gKiBSZXR1cm5zIHRydWUgaWYgZWl0aGVyIHRoZSBjb2xvciBvciB0cmFuc3BhcmVuY3kgaXMgb2ZmXG4gKlxuICogQHBhcmFtIHtVaW50OENsYW1wZWRBcnJheX0gZGF0YSBUaGUgZGF0YSByZXR1cm5lZCBmcm9tIGdldEltYWdlRGF0YVxuICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldCBUaGUgcGl4ZWwgb2Zmc2V0IGZyb20gdGhlIHN0YXJ0IG9mIGRhdGEuXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBkaWFnb25hbCByZW5kZXJpbmcgaXMgYnJva2VuXG4gKi9cbmZ1bmN0aW9uIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIG9mZnNldCkge1xuICAgIC8vIHRoZSB2YWx1ZXMgb3VnaHQgdG8gYmUgY2xvc2UgdG8gdGhlIHJnYmEoMjEwLCAwLCAwLCAwLjc1KVxuICAgIHJldHVybiAoTWF0aC5hYnMoZGF0YVtvZmZzZXQgKiA0XSAtIDIxMCkgPiAyIHx8XG4gICAgICAgIE1hdGguYWJzKGRhdGFbb2Zmc2V0ICogNCArIDNdIC0gMC43NSAqIDI1NSkgPiAyKTtcbn1cbi8qKlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgY3VycmVudCBicm93c2VyIGNvbmZpZ3VyYXRpb24gY2FuIHJlbmRlciB0cmlhbmd1bGFyIGNsaXAgcmVnaW9ucyBjb3JyZWN0bHkuXG4gKiBUaGlzIHZhbHVlIGlzIGNhY2hlZCBzbyB0aGUgZnVuY3Rpb24gaXMgb25seSBleHBlbnNpdmUgdGhlIGZpcnN0IHRpbWUgY2FsbGVkLlxuICogRmlyZWZveCBvbiBXaW5kb3dzIChhcyBvZiBub3cpIGRvZXMgbm90IGlmIEhXQSBpcyBlbmFibGVkLiBTZWUgaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTYwNjk3NlxuICogSUUgYWxzbyBkb2Vzbid0LiBDaHJvbWUgd29ya3MsIGFuZCBldmVyeXRoaW5nIHNlZW1zIHRvIHdvcmsgb24gT1NYIGFuZCBBbmRyb2lkLiBUaGlzIGZ1bmN0aW9uIGNhY2hlcyB0aGVcbiAqIHJlc3VsdC4gSSBzdXBwb3NlIHRoYXQgaXQgaXMgY29uY2VpdmFibHkgcG9zc2libGUgdGhhdCBhIGJyb3dzZXIgbWlnaHQgZmxpcCBtb2RlcyB3aGlsZSB0aGUgYXBwIGlzXG4gKiBydW5uaW5nLCBidXQgbGV0cyBob3BlIG5vdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIHRoZSBEaWFnb25hbCBSZW5kZXJpbmcgaXMgYnJva2VuLlxuICovXG5mdW5jdGlvbiBpc0Jyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKCkge1xuICAgIGlmIChicm9rZW5EaWFnb25hbFJlbmRlcmluZ18gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgY3R4ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdsaWdodGVyJztcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDIxMCwgMCwgMCwgMC43NSknO1xuICAgICAgICBkcmF3VGVzdFRyaWFuZ2xlKGN0eCwgNCwgNSwgNCwgMCk7XG4gICAgICAgIGRyYXdUZXN0VHJpYW5nbGUoY3R4LCA0LCA1LCAwLCA1KTtcbiAgICAgICAgdmFyIGRhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIDMsIDMpLmRhdGE7XG4gICAgICAgIGJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nXyA9XG4gICAgICAgICAgICB2ZXJpZnlCcm9rZW5EaWFnb25hbFJlbmRlcmluZyhkYXRhLCAwKSB8fFxuICAgICAgICAgICAgICAgIHZlcmlmeUJyb2tlbkRpYWdvbmFsUmVuZGVyaW5nKGRhdGEsIDQpIHx8XG4gICAgICAgICAgICAgICAgdmVyaWZ5QnJva2VuRGlhZ29uYWxSZW5kZXJpbmcoZGF0YSwgOCk7XG4gICAgfVxuICAgIHJldHVybiBicm9rZW5EaWFnb25hbFJlbmRlcmluZ187XG59XG4vKipcbiAqIENhbGN1bGF0ZXMgaWRlYWwgcmVzb2x1dGlvbiB0byB1c2UgZnJvbSB0aGUgc291cmNlIGluIG9yZGVyIHRvIGFjaGlldmVcbiAqIHBpeGVsIG1hcHBpbmcgYXMgY2xvc2UgYXMgcG9zc2libGUgdG8gMToxIGR1cmluZyByZXByb2plY3Rpb24uXG4gKiBUaGUgcmVzb2x1dGlvbiBpcyBjYWxjdWxhdGVkIHJlZ2FyZGxlc3Mgb2Ygd2hhdCByZXNvbHV0aW9uc1xuICogYXJlIGFjdHVhbGx5IGF2YWlsYWJsZSBpbiB0aGUgZGF0YXNldCAoVGlsZUdyaWQsIEltYWdlLCAuLi4pLlxuICpcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IHRhcmdldENlbnRlciBUYXJnZXQgY2VudGVyLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBiZXN0IHJlc29sdXRpb24gdG8gdXNlLiBDYW4gYmUgKy1JbmZpbml0eSwgTmFOIG9yIDAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbikge1xuICAgIHZhciBzb3VyY2VDZW50ZXIgPSB0cmFuc2Zvcm0odGFyZ2V0Q2VudGVyLCB0YXJnZXRQcm9qLCBzb3VyY2VQcm9qKTtcbiAgICAvLyBjYWxjdWxhdGUgdGhlIGlkZWFsIHJlc29sdXRpb24gb2YgdGhlIHNvdXJjZSBkYXRhXG4gICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBnZXRQb2ludFJlc29sdXRpb24odGFyZ2V0UHJvaiwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0Q2VudGVyKTtcbiAgICB2YXIgdGFyZ2V0TWV0ZXJzUGVyVW5pdCA9IHRhcmdldFByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGlmICh0YXJnZXRNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbiAqPSB0YXJnZXRNZXRlcnNQZXJVbml0O1xuICAgIH1cbiAgICB2YXIgc291cmNlTWV0ZXJzUGVyVW5pdCA9IHNvdXJjZVByb2ouZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgIGlmIChzb3VyY2VNZXRlcnNQZXJVbml0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc291cmNlUmVzb2x1dGlvbiAvPSBzb3VyY2VNZXRlcnNQZXJVbml0O1xuICAgIH1cbiAgICAvLyBCYXNlZCBvbiB0aGUgcHJvamVjdGlvbiBwcm9wZXJ0aWVzLCB0aGUgcG9pbnQgcmVzb2x1dGlvbiBhdCB0aGUgc3BlY2lmaWVkXG4gICAgLy8gY29vcmRpbmF0ZXMgbWF5IGJlIHNsaWdodGx5IGRpZmZlcmVudC4gV2UgbmVlZCB0byByZXZlcnNlLWNvbXBlbnNhdGUgdGhpc1xuICAgIC8vIGluIG9yZGVyIHRvIGFjaGlldmUgb3B0aW1hbCByZXN1bHRzLlxuICAgIHZhciBzb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgIGlmICghc291cmNlRXh0ZW50IHx8IGNvbnRhaW5zQ29vcmRpbmF0ZShzb3VyY2VFeHRlbnQsIHNvdXJjZUNlbnRlcikpIHtcbiAgICAgICAgdmFyIGNvbXBlbnNhdGlvbkZhY3RvciA9IGdldFBvaW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCBzb3VyY2VSZXNvbHV0aW9uLCBzb3VyY2VDZW50ZXIpIC9cbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb247XG4gICAgICAgIGlmIChpc0Zpbml0ZShjb21wZW5zYXRpb25GYWN0b3IpICYmIGNvbXBlbnNhdGlvbkZhY3RvciA+IDApIHtcbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb24gLz0gY29tcGVuc2F0aW9uRmFjdG9yO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzb3VyY2VSZXNvbHV0aW9uO1xufVxuLyoqXG4gKiBDYWxjdWxhdGVzIGlkZWFsIHJlc29sdXRpb24gdG8gdXNlIGZyb20gdGhlIHNvdXJjZSBpbiBvcmRlciB0byBhY2hpZXZlXG4gKiBwaXhlbCBtYXBwaW5nIGFzIGNsb3NlIGFzIHBvc3NpYmxlIHRvIDE6MSBkdXJpbmcgcmVwcm9qZWN0aW9uLlxuICogVGhlIHJlc29sdXRpb24gaXMgY2FsY3VsYXRlZCByZWdhcmRsZXNzIG9mIHdoYXQgcmVzb2x1dGlvbnNcbiAqIGFyZSBhY3R1YWxseSBhdmFpbGFibGUgaW4gdGhlIGRhdGFzZXQgKFRpbGVHcmlkLCBJbWFnZSwgLi4uKS5cbiAqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVByb2ogU291cmNlIHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHRhcmdldFByb2ogVGFyZ2V0IHByb2plY3Rpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnRcbiAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRSZXNvbHV0aW9uIFRhcmdldCByZXNvbHV0aW9uLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgYmVzdCByZXNvbHV0aW9uIHRvIHVzZS4gQ2FuIGJlICstSW5maW5pdHksIE5hTiBvciAwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbihzb3VyY2VQcm9qLCB0YXJnZXRQcm9qLCB0YXJnZXRFeHRlbnQsIHRhcmdldFJlc29sdXRpb24pIHtcbiAgICB2YXIgdGFyZ2V0Q2VudGVyID0gZ2V0Q2VudGVyKHRhcmdldEV4dGVudCk7XG4gICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIHRhcmdldENlbnRlciwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgaWYgKCFpc0Zpbml0ZShzb3VyY2VSZXNvbHV0aW9uKSB8fCBzb3VyY2VSZXNvbHV0aW9uIDw9IDApIHtcbiAgICAgICAgZm9yRWFjaENvcm5lcih0YXJnZXRFeHRlbnQsIGZ1bmN0aW9uIChjb3JuZXIpIHtcbiAgICAgICAgICAgIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGNvcm5lciwgdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgICAgICByZXR1cm4gaXNGaW5pdGUoc291cmNlUmVzb2x1dGlvbikgJiYgc291cmNlUmVzb2x1dGlvbiA+IDA7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gc291cmNlUmVzb2x1dGlvbjtcbn1cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gSW1hZ2VFeHRlbnRcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHByb3BlcnR5IHtIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR9IGltYWdlIEltYWdlLlxuICovXG4vKipcbiAqIFJlbmRlcnMgdGhlIHNvdXJjZSBkYXRhIGludG8gbmV3IGNhbnZhcyBiYXNlZCBvbiB0aGUgdHJpYW5ndWxhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGggV2lkdGggb2YgdGhlIGNhbnZhcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHQgSGVpZ2h0IG9mIHRoZSBjYW52YXMuXG4gKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzb3VyY2VSZXNvbHV0aW9uIFNvdXJjZSByZXNvbHV0aW9uLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IHNvdXJjZUV4dGVudCBFeHRlbnQgb2YgdGhlIGRhdGEgc291cmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldFJlc29sdXRpb24gVGFyZ2V0IHJlc29sdXRpb24uXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gdGFyZ2V0RXh0ZW50IFRhcmdldCBleHRlbnQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcmVwcm9qL1RyaWFuZ3VsYXRpb24uanNcIikuZGVmYXVsdH0gdHJpYW5ndWxhdGlvbiBDYWxjdWxhdGVkIHRyaWFuZ3VsYXRpb24uXG4gKiBAcGFyYW0ge0FycmF5PEltYWdlRXh0ZW50Pn0gc291cmNlcyBBcnJheSBvZiBzb3VyY2VzLlxuICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZXMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRfcmVuZGVyRWRnZXNdIFJlbmRlciByZXByb2plY3Rpb24gZWRnZXMuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdF9jb250ZXh0T3B0aW9uc10gUHJvcGVydGllcyB0byBzZXQgb24gdGhlIGNhbnZhcyBjb250ZXh0LlxuICogQHJldHVybiB7SFRNTENhbnZhc0VsZW1lbnR9IENhbnZhcyB3aXRoIHJlcHJvamVjdGVkIGRhdGEuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXIod2lkdGgsIGhlaWdodCwgcGl4ZWxSYXRpbywgc291cmNlUmVzb2x1dGlvbiwgc291cmNlRXh0ZW50LCB0YXJnZXRSZXNvbHV0aW9uLCB0YXJnZXRFeHRlbnQsIHRyaWFuZ3VsYXRpb24sIHNvdXJjZXMsIGd1dHRlciwgb3B0X3JlbmRlckVkZ2VzLCBvcHRfY29udGV4dE9wdGlvbnMpIHtcbiAgICB2YXIgY29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiB3aWR0aCksIE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIGhlaWdodCkpO1xuICAgIGFzc2lnbihjb250ZXh0LCBvcHRfY29udGV4dE9wdGlvbnMpO1xuICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG4gICAgfVxuICAgIGNvbnRleHQuc2NhbGUocGl4ZWxSYXRpbywgcGl4ZWxSYXRpbyk7XG4gICAgZnVuY3Rpb24gcGl4ZWxSb3VuZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSAqIHBpeGVsUmF0aW8pIC8gcGl4ZWxSYXRpbztcbiAgICB9XG4gICAgY29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlcic7XG4gICAgdmFyIHNvdXJjZURhdGFFeHRlbnQgPSBjcmVhdGVFbXB0eSgpO1xuICAgIHNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc3JjLCBpLCBhcnIpIHtcbiAgICAgICAgZXh0ZW5kKHNvdXJjZURhdGFFeHRlbnQsIHNyYy5leHRlbnQpO1xuICAgIH0pO1xuICAgIHZhciBjYW52YXNXaWR0aEluVW5pdHMgPSBnZXRXaWR0aChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgY2FudmFzSGVpZ2h0SW5Vbml0cyA9IGdldEhlaWdodChzb3VyY2VEYXRhRXh0ZW50KTtcbiAgICB2YXIgc3RpdGNoQ29udGV4dCA9IGNyZWF0ZUNhbnZhc0NvbnRleHQyRChNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzV2lkdGhJblVuaXRzKSAvIHNvdXJjZVJlc29sdXRpb24pLCBNYXRoLnJvdW5kKChwaXhlbFJhdGlvICogY2FudmFzSGVpZ2h0SW5Vbml0cykgLyBzb3VyY2VSZXNvbHV0aW9uKSk7XG4gICAgYXNzaWduKHN0aXRjaENvbnRleHQsIG9wdF9jb250ZXh0T3B0aW9ucyk7XG4gICAgdmFyIHN0aXRjaFNjYWxlID0gcGl4ZWxSYXRpbyAvIHNvdXJjZVJlc29sdXRpb247XG4gICAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzcmMsIGksIGFycikge1xuICAgICAgICB2YXIgeFBvcyA9IHNyYy5leHRlbnRbMF0gLSBzb3VyY2VEYXRhRXh0ZW50WzBdO1xuICAgICAgICB2YXIgeVBvcyA9IC0oc3JjLmV4dGVudFszXSAtIHNvdXJjZURhdGFFeHRlbnRbM10pO1xuICAgICAgICB2YXIgc3JjV2lkdGggPSBnZXRXaWR0aChzcmMuZXh0ZW50KTtcbiAgICAgICAgdmFyIHNyY0hlaWdodCA9IGdldEhlaWdodChzcmMuZXh0ZW50KTtcbiAgICAgICAgLy8gVGhpcyB0ZXN0IHNob3VsZCBuZXZlciBmYWlsIC0tIGJ1dCBpdCBkb2VzLiBOZWVkIHRvIGZpbmQgYSBmaXggdGhlIHVwc3RyZWFtIGNvbmRpdGlvblxuICAgICAgICBpZiAoc3JjLmltYWdlLndpZHRoID4gMCAmJiBzcmMuaW1hZ2UuaGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgc3RpdGNoQ29udGV4dC5kcmF3SW1hZ2Uoc3JjLmltYWdlLCBndXR0ZXIsIGd1dHRlciwgc3JjLmltYWdlLndpZHRoIC0gMiAqIGd1dHRlciwgc3JjLmltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHhQb3MgKiBzdGl0Y2hTY2FsZSwgeVBvcyAqIHN0aXRjaFNjYWxlLCBzcmNXaWR0aCAqIHN0aXRjaFNjYWxlLCBzcmNIZWlnaHQgKiBzdGl0Y2hTY2FsZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgdGFyZ2V0VG9wTGVmdCA9IGdldFRvcExlZnQodGFyZ2V0RXh0ZW50KTtcbiAgICB0cmlhbmd1bGF0aW9uLmdldFRyaWFuZ2xlcygpLmZvckVhY2goZnVuY3Rpb24gKHRyaWFuZ2xlLCBpLCBhcnIpIHtcbiAgICAgICAgLyogQ2FsY3VsYXRlIGFmZmluZSB0cmFuc2Zvcm0gKHNyYyAtPiBkc3QpXG4gICAgICAgICAqIFJlc3VsdGluZyBtYXRyaXggY2FuIGJlIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkaW5hdGVcbiAgICAgICAgICogZnJvbSBgc291cmNlUHJvamVjdGlvbmAgdG8gZGVzdGluYXRpb24gcGl4ZWxzLlxuICAgICAgICAgKlxuICAgICAgICAgKiBUbyBvcHRpbWl6ZSBudW1iZXIgb2YgY29udGV4dCBjYWxscyBhbmQgaW5jcmVhc2UgbnVtZXJpY2FsIHN0YWJpbGl0eSxcbiAgICAgICAgICogd2UgYWxzbyBkbyB0aGUgZm9sbG93aW5nIG9wZXJhdGlvbnM6XG4gICAgICAgICAqIHRyYW5zKC10b3BMZWZ0RXh0ZW50Q29ybmVyKSwgc2NhbGUoMSAvIHRhcmdldFJlc29sdXRpb24pLCBzY2FsZSgxLCAtMSlcbiAgICAgICAgICogaGVyZSBiZWZvcmUgc29sdmluZyB0aGUgbGluZWFyIHN5c3RlbSBzbyBbdWksIHZpXSBhcmUgcGl4ZWwgY29vcmRpbmF0ZXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIFNyYyBwb2ludHM6IHhpLCB5aVxuICAgICAgICAgKiBEc3QgcG9pbnRzOiB1aSwgdmlcbiAgICAgICAgICogQWZmaW5lIGNvZWZmaWNpZW50czogYWlqXG4gICAgICAgICAqXG4gICAgICAgICAqIHwgeDAgeTAgMSAgMCAgMCAwIHwgICB8YTAwfCAgIHx1MHxcbiAgICAgICAgICogfCB4MSB5MSAxICAwICAwIDAgfCAgIHxhMDF8ICAgfHUxfFxuICAgICAgICAgKiB8IHgyIHkyIDEgIDAgIDAgMCB8IHggfGEwMnwgPSB8dTJ8XG4gICAgICAgICAqIHwgIDAgIDAgMCB4MCB5MCAxIHwgICB8YTEwfCAgIHx2MHxcbiAgICAgICAgICogfCAgMCAgMCAwIHgxIHkxIDEgfCAgIHxhMTF8ICAgfHYxfFxuICAgICAgICAgKiB8ICAwICAwIDAgeDIgeTIgMSB8ICAgfGExMnwgICB8djJ8XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgc291cmNlID0gdHJpYW5nbGUuc291cmNlO1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdHJpYW5nbGUudGFyZ2V0O1xuICAgICAgICB2YXIgeDAgPSBzb3VyY2VbMF1bMF0sIHkwID0gc291cmNlWzBdWzFdO1xuICAgICAgICB2YXIgeDEgPSBzb3VyY2VbMV1bMF0sIHkxID0gc291cmNlWzFdWzFdO1xuICAgICAgICB2YXIgeDIgPSBzb3VyY2VbMl1bMF0sIHkyID0gc291cmNlWzJdWzFdO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCBldmVyeXRoaW5nIGlzIG9uIHBpeGVsIGJvdW5kYXJpZXNcbiAgICAgICAgdmFyIHUwID0gcGl4ZWxSb3VuZCgodGFyZ2V0WzBdWzBdIC0gdGFyZ2V0VG9wTGVmdFswXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgdmFyIHYwID0gcGl4ZWxSb3VuZCgtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB1MSA9IHBpeGVsUm91bmQoKHRhcmdldFsxXVswXSAtIHRhcmdldFRvcExlZnRbMF0pIC8gdGFyZ2V0UmVzb2x1dGlvbik7XG4gICAgICAgIHZhciB2MSA9IHBpeGVsUm91bmQoLSh0YXJnZXRbMV1bMV0gLSB0YXJnZXRUb3BMZWZ0WzFdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdTIgPSBwaXhlbFJvdW5kKCh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICB2YXIgdjIgPSBwaXhlbFJvdW5kKC0odGFyZ2V0WzJdWzFdIC0gdGFyZ2V0VG9wTGVmdFsxXSkgLyB0YXJnZXRSZXNvbHV0aW9uKTtcbiAgICAgICAgLy8gU2hpZnQgYWxsIHRoZSBzb3VyY2UgcG9pbnRzIHRvIGltcHJvdmUgbnVtZXJpY2FsIHN0YWJpbGl0eVxuICAgICAgICAvLyBvZiBhbGwgdGhlIHN1YnNlcXVlbnQgY2FsY3VsYXRpb25zLiBUaGUgW3gwLCB5MF0gaXMgdXNlZCBoZXJlLlxuICAgICAgICAvLyBUaGlzIGlzIGFsc28gdXNlZCB0byBzaW1wbGlmeSB0aGUgbGluZWFyIHN5c3RlbS5cbiAgICAgICAgdmFyIHNvdXJjZU51bWVyaWNhbFNoaWZ0WCA9IHgwO1xuICAgICAgICB2YXIgc291cmNlTnVtZXJpY2FsU2hpZnRZID0geTA7XG4gICAgICAgIHgwID0gMDtcbiAgICAgICAgeTAgPSAwO1xuICAgICAgICB4MSAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFg7XG4gICAgICAgIHkxIC09IHNvdXJjZU51bWVyaWNhbFNoaWZ0WTtcbiAgICAgICAgeDIgLT0gc291cmNlTnVtZXJpY2FsU2hpZnRYO1xuICAgICAgICB5MiAtPSBzb3VyY2VOdW1lcmljYWxTaGlmdFk7XG4gICAgICAgIHZhciBhdWdtZW50ZWRNYXRyaXggPSBbXG4gICAgICAgICAgICBbeDEsIHkxLCAwLCAwLCB1MSAtIHUwXSxcbiAgICAgICAgICAgIFt4MiwgeTIsIDAsIDAsIHUyIC0gdTBdLFxuICAgICAgICAgICAgWzAsIDAsIHgxLCB5MSwgdjEgLSB2MF0sXG4gICAgICAgICAgICBbMCwgMCwgeDIsIHkyLCB2MiAtIHYwXSxcbiAgICAgICAgXTtcbiAgICAgICAgdmFyIGFmZmluZUNvZWZzID0gc29sdmVMaW5lYXJTeXN0ZW0oYXVnbWVudGVkTWF0cml4KTtcbiAgICAgICAgaWYgKCFhZmZpbmVDb2Vmcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICBpZiAoaXNCcm9rZW5EaWFnb25hbFJlbmRlcmluZygpIHx8XG4gICAgICAgICAgICBvcHRfY29udGV4dE9wdGlvbnMgPT09IElNQUdFX1NNT09USElOR19ESVNBQkxFRCkge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgYWxsIGxpbmVzIGFyZSBob3Jpem9udGFsIG9yIHZlcnRpY2FsXG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZGlhZ29uYWwgbGluZS4gRG8gaXQgaW4gNCBzdGVwc1xuICAgICAgICAgICAgdmFyIHN0ZXBzID0gNDtcbiAgICAgICAgICAgIHZhciB1ZCA9IHUwIC0gdTE7XG4gICAgICAgICAgICB2YXIgdmQgPSB2MCAtIHYxO1xuICAgICAgICAgICAgZm9yICh2YXIgc3RlcCA9IDA7IHN0ZXAgPCBzdGVwczsgc3RlcCsrKSB7XG4gICAgICAgICAgICAgICAgLy8gR28gaG9yaXpvbnRhbGx5XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKHN0ZXAgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIC8vIEdvIHZlcnRpY2FsbHlcbiAgICAgICAgICAgICAgICBpZiAoc3RlcCAhPSBzdGVwcyAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTEgKyBwaXhlbFJvdW5kKCgoc3RlcCArIDEpICogdWQpIC8gc3RlcHMpLCB2MSArIHBpeGVsUm91bmQoKChzdGVwICsgMSkgKiB2ZCkgLyAoc3RlcHMgLSAxKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIGFyZSBhbG1vc3QgYXQgdTByLCB2MHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGV4dC5jbGlwKCk7XG4gICAgICAgIGNvbnRleHQudHJhbnNmb3JtKGFmZmluZUNvZWZzWzBdLCBhZmZpbmVDb2Vmc1syXSwgYWZmaW5lQ29lZnNbMV0sIGFmZmluZUNvZWZzWzNdLCB1MCwgdjApO1xuICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZShzb3VyY2VEYXRhRXh0ZW50WzBdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRYLCBzb3VyY2VEYXRhRXh0ZW50WzNdIC0gc291cmNlTnVtZXJpY2FsU2hpZnRZKTtcbiAgICAgICAgY29udGV4dC5zY2FsZShzb3VyY2VSZXNvbHV0aW9uIC8gcGl4ZWxSYXRpbywgLXNvdXJjZVJlc29sdXRpb24gLyBwaXhlbFJhdGlvKTtcbiAgICAgICAgY29udGV4dC5kcmF3SW1hZ2Uoc3RpdGNoQ29udGV4dC5jYW52YXMsIDAsIDApO1xuICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICB9KTtcbiAgICBpZiAob3B0X3JlbmRlckVkZ2VzKSB7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdzb3VyY2Utb3Zlcic7XG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgIHRyaWFuZ3VsYXRpb24uZ2V0VHJpYW5nbGVzKCkuZm9yRWFjaChmdW5jdGlvbiAodHJpYW5nbGUsIGksIGFycikge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRyaWFuZ2xlLnRhcmdldDtcbiAgICAgICAgICAgIHZhciB1MCA9ICh0YXJnZXRbMF1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjAgPSAtKHRhcmdldFswXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MSA9ICh0YXJnZXRbMV1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjEgPSAtKHRhcmdldFsxXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIHZhciB1MiA9ICh0YXJnZXRbMl1bMF0gLSB0YXJnZXRUb3BMZWZ0WzBdKSAvIHRhcmdldFJlc29sdXRpb247XG4gICAgICAgICAgICB2YXIgdjIgPSAtKHRhcmdldFsyXVsxXSAtIHRhcmdldFRvcExlZnRbMV0pIC8gdGFyZ2V0UmVzb2x1dGlvbjtcbiAgICAgICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjb250ZXh0Lm1vdmVUbyh1MSwgdjEpO1xuICAgICAgICAgICAgY29udGV4dC5saW5lVG8odTAsIHYwKTtcbiAgICAgICAgICAgIGNvbnRleHQubGluZVRvKHUyLCB2Mik7XG4gICAgICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbiAgICByZXR1cm4gY29udGV4dC5jYW52YXM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZXByb2ouanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovVGlsZVxuICovXG5pbXBvcnQgeyBFUlJPUl9USFJFU0hPTEQgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IFRpbGUgZnJvbSAnLi4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgVHJpYW5ndWxhdGlvbiBmcm9tICcuL1RyaWFuZ3VsYXRpb24uanMnO1xuaW1wb3J0IHsgY2FsY3VsYXRlU291cmNlRXh0ZW50UmVzb2x1dGlvbiwgcmVuZGVyIGFzIHJlbmRlclJlcHJvamVjdGVkLCB9IGZyb20gJy4uL3JlcHJvai5qcyc7XG5pbXBvcnQgeyBjbGFtcCB9IGZyb20gJy4uL21hdGguanMnO1xuaW1wb3J0IHsgZ2V0QXJlYSwgZ2V0SW50ZXJzZWN0aW9uIH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGxpc3RlbiwgdW5saXN0ZW5CeUtleSB9IGZyb20gJy4uL2V2ZW50cy5qcyc7XG4vKipcbiAqIEB0eXBlZGVmIHtmdW5jdGlvbihudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIpIDogaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSBGdW5jdGlvblR5cGVcbiAqL1xuLyoqXG4gKiBAY2xhc3NkZXNjXG4gKiBDbGFzcyBlbmNhcHN1bGF0aW5nIHNpbmdsZSByZXByb2plY3RlZCB0aWxlLlxuICogU2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1RpbGVJbWFnZX5UaWxlSW1hZ2V9LlxuICpcbiAqL1xudmFyIFJlcHJvalRpbGUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFJlcHJvalRpbGUsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gc291cmNlUHJvaiBTb3VyY2UgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHNvdXJjZVRpbGVHcmlkIFNvdXJjZSB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gdGFyZ2V0UHJvaiBUYXJnZXQgcHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IHRhcmdldFRpbGVHcmlkIFRhcmdldCB0aWxlIGdyaWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHdyYXBwZWRUaWxlQ29vcmQgQ29vcmRpbmF0ZSBvZiB0aGUgdGlsZSB3cmFwcGVkIGluIFguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGd1dHRlciBHdXR0ZXIgb2YgdGhlIHNvdXJjZSB0aWxlcy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uVHlwZX0gZ2V0VGlsZUZ1bmN0aW9uXG4gICAgICogICAgIEZ1bmN0aW9uIHJldHVybmluZyBzb3VyY2UgdGlsZXMgKHosIHgsIHksIHBpeGVsUmF0aW8pLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2Vycm9yVGhyZXNob2xkXSBBY2NlcHRhYmxlIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcHgpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdF9yZW5kZXJFZGdlc10gUmVuZGVyIHJlcHJvamVjdGlvbiBlZGdlcy5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdF9jb250ZXh0T3B0aW9uc10gUHJvcGVydGllcyB0byBzZXQgb24gdGhlIGNhbnZhcyBjb250ZXh0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJlcHJvalRpbGUoc291cmNlUHJvaiwgc291cmNlVGlsZUdyaWQsIHRhcmdldFByb2osIHRhcmdldFRpbGVHcmlkLCB0aWxlQ29vcmQsIHdyYXBwZWRUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIGd1dHRlciwgZ2V0VGlsZUZ1bmN0aW9uLCBvcHRfZXJyb3JUaHJlc2hvbGQsIG9wdF9yZW5kZXJFZGdlcywgb3B0X2NvbnRleHRPcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHRpbGVDb29yZCwgVGlsZVN0YXRlLklETEUpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnJlbmRlckVkZ2VzXyA9IG9wdF9yZW5kZXJFZGdlcyAhPT0gdW5kZWZpbmVkID8gb3B0X3JlbmRlckVkZ2VzIDogZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dE9wdGlvbnNfID0gb3B0X2NvbnRleHRPcHRpb25zO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnBpeGVsUmF0aW9fID0gcGl4ZWxSYXRpbztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5ndXR0ZXJfID0gZ3V0dGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY2FudmFzXyA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVHcmlkXyA9IHNvdXJjZVRpbGVHcmlkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50YXJnZXRUaWxlR3JpZF8gPSB0YXJnZXRUaWxlR3JpZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcHBlZFRpbGVDb29yZF8gPSB3cmFwcGVkVGlsZUNvb3JkID8gd3JhcHBlZFRpbGVDb29yZCA6IHRpbGVDb29yZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXyA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9BcnJheTxpbXBvcnQoXCIuLi9ldmVudHMuanNcIikuRXZlbnRzS2V5Pn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5zb3VyY2VaXyA9IDA7XG4gICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0YXJnZXRUaWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQoX3RoaXMud3JhcHBlZFRpbGVDb29yZF8pO1xuICAgICAgICB2YXIgbWF4VGFyZ2V0RXh0ZW50ID0gX3RoaXMudGFyZ2V0VGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbWF4U291cmNlRXh0ZW50ID0gX3RoaXMuc291cmNlVGlsZUdyaWRfLmdldEV4dGVudCgpO1xuICAgICAgICB2YXIgbGltaXRlZFRhcmdldEV4dGVudCA9IG1heFRhcmdldEV4dGVudFxuICAgICAgICAgICAgPyBnZXRJbnRlcnNlY3Rpb24odGFyZ2V0RXh0ZW50LCBtYXhUYXJnZXRFeHRlbnQpXG4gICAgICAgICAgICA6IHRhcmdldEV4dGVudDtcbiAgICAgICAgaWYgKGdldEFyZWEobGltaXRlZFRhcmdldEV4dGVudCkgPT09IDApIHtcbiAgICAgICAgICAgIC8vIFRpbGUgaXMgY29tcGxldGVseSBvdXRzaWRlIHJhbmdlIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBUT0RPOiBpcyBpdCBhY3R1YWxseSBjb3JyZWN0IHRoYXQgdGhlIHNvdXJjZSBldmVuIGNyZWF0ZXMgdGhlIHRpbGUgP1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNvdXJjZVByb2pFeHRlbnQgPSBzb3VyY2VQcm9qLmdldEV4dGVudCgpO1xuICAgICAgICBpZiAoc291cmNlUHJvakV4dGVudCkge1xuICAgICAgICAgICAgaWYgKCFtYXhTb3VyY2VFeHRlbnQpIHtcbiAgICAgICAgICAgICAgICBtYXhTb3VyY2VFeHRlbnQgPSBzb3VyY2VQcm9qRXh0ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWF4U291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKG1heFNvdXJjZUV4dGVudCwgc291cmNlUHJvakV4dGVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRhcmdldFJlc29sdXRpb24gPSB0YXJnZXRUaWxlR3JpZC5nZXRSZXNvbHV0aW9uKF90aGlzLndyYXBwZWRUaWxlQ29vcmRfWzBdKTtcbiAgICAgICAgdmFyIHNvdXJjZVJlc29sdXRpb24gPSBjYWxjdWxhdGVTb3VyY2VFeHRlbnRSZXNvbHV0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoIWlzRmluaXRlKHNvdXJjZVJlc29sdXRpb24pIHx8IHNvdXJjZVJlc29sdXRpb24gPD0gMCkge1xuICAgICAgICAgICAgLy8gaW52YWxpZCBzb3VyY2VSZXNvbHV0aW9uIC0+IEVNUFRZXG4gICAgICAgICAgICAvLyBwcm9iYWJseSBlZGdlcyBvZiB0aGUgcHJvamVjdGlvbnMgd2hlbiBubyBleHRlbnQgaXMgZGVmaW5lZFxuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVycm9yVGhyZXNob2xkSW5QaXhlbHMgPSBvcHRfZXJyb3JUaHJlc2hvbGQgIT09IHVuZGVmaW5lZCA/IG9wdF9lcnJvclRocmVzaG9sZCA6IEVSUk9SX1RIUkVTSE9MRDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHshaW1wb3J0KFwiLi9Ucmlhbmd1bGF0aW9uLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50cmlhbmd1bGF0aW9uXyA9IG5ldyBUcmlhbmd1bGF0aW9uKHNvdXJjZVByb2osIHRhcmdldFByb2osIGxpbWl0ZWRUYXJnZXRFeHRlbnQsIG1heFNvdXJjZUV4dGVudCwgc291cmNlUmVzb2x1dGlvbiAqIGVycm9yVGhyZXNob2xkSW5QaXhlbHMsIHRhcmdldFJlc29sdXRpb24pO1xuICAgICAgICBpZiAoX3RoaXMudHJpYW5ndWxhdGlvbl8uZ2V0VHJpYW5nbGVzKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBubyB2YWxpZCB0cmlhbmdsZXMgLT4gRU1QVFlcbiAgICAgICAgICAgIF90aGlzLnN0YXRlID0gVGlsZVN0YXRlLkVNUFRZO1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIF90aGlzLnNvdXJjZVpfID0gc291cmNlVGlsZUdyaWQuZ2V0WkZvclJlc29sdXRpb24oc291cmNlUmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzb3VyY2VFeHRlbnQgPSBfdGhpcy50cmlhbmd1bGF0aW9uXy5jYWxjdWxhdGVTb3VyY2VFeHRlbnQoKTtcbiAgICAgICAgaWYgKG1heFNvdXJjZUV4dGVudCkge1xuICAgICAgICAgICAgaWYgKHNvdXJjZVByb2ouY2FuV3JhcFgoKSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFsxXSA9IGNsYW1wKHNvdXJjZUV4dGVudFsxXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgICAgIHNvdXJjZUV4dGVudFszXSA9IGNsYW1wKHNvdXJjZUV4dGVudFszXSwgbWF4U291cmNlRXh0ZW50WzFdLCBtYXhTb3VyY2VFeHRlbnRbM10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc291cmNlRXh0ZW50ID0gZ2V0SW50ZXJzZWN0aW9uKHNvdXJjZUV4dGVudCwgbWF4U291cmNlRXh0ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdldEFyZWEoc291cmNlRXh0ZW50KSkge1xuICAgICAgICAgICAgX3RoaXMuc3RhdGUgPSBUaWxlU3RhdGUuRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgc291cmNlUmFuZ2UgPSBzb3VyY2VUaWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHNvdXJjZUV4dGVudCwgX3RoaXMuc291cmNlWl8pO1xuICAgICAgICAgICAgZm9yICh2YXIgc3JjWCA9IHNvdXJjZVJhbmdlLm1pblg7IHNyY1ggPD0gc291cmNlUmFuZ2UubWF4WDsgc3JjWCsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3JjWSA9IHNvdXJjZVJhbmdlLm1pblk7IHNyY1kgPD0gc291cmNlUmFuZ2UubWF4WTsgc3JjWSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWxlID0gZ2V0VGlsZUZ1bmN0aW9uKF90aGlzLnNvdXJjZVpfLCBzcmNYLCBzcmNZLCBwaXhlbFJhdGlvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNvdXJjZVRpbGVzXy5wdXNoKHRpbGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzLnNvdXJjZVRpbGVzXy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FTVBUWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgSFRNTCBDYW52YXMgZWxlbWVudCBmb3IgdGhpcyB0aWxlLlxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fSBDYW52YXMuXG4gICAgICovXG4gICAgUmVwcm9qVGlsZS5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbnZhc187XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLnJlcHJvamVjdF8gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgaWYgKHRpbGUgJiYgdGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5MT0FERUQpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBleHRlbnQ6IHRoaXMuc291cmNlVGlsZUdyaWRfLmdldFRpbGVDb29yZEV4dGVudCh0aWxlLnRpbGVDb29yZCksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlOiB0aWxlLmdldEltYWdlKCksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmxlbmd0aCA9IDA7XG4gICAgICAgIGlmIChzb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IFRpbGVTdGF0ZS5FUlJPUjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB6ID0gdGhpcy53cmFwcGVkVGlsZUNvb3JkX1swXTtcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0VGlsZVNpemUoeik7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVswXTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0eXBlb2Ygc2l6ZSA9PT0gJ251bWJlcicgPyBzaXplIDogc2l6ZVsxXTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRSZXNvbHV0aW9uID0gdGhpcy50YXJnZXRUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih6KTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VSZXNvbHV0aW9uID0gdGhpcy5zb3VyY2VUaWxlR3JpZF8uZ2V0UmVzb2x1dGlvbih0aGlzLnNvdXJjZVpfKTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRFeHRlbnQgPSB0aGlzLnRhcmdldFRpbGVHcmlkXy5nZXRUaWxlQ29vcmRFeHRlbnQodGhpcy53cmFwcGVkVGlsZUNvb3JkXyk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhc18gPSByZW5kZXJSZXByb2plY3RlZCh3aWR0aCwgaGVpZ2h0LCB0aGlzLnBpeGVsUmF0aW9fLCBzb3VyY2VSZXNvbHV0aW9uLCB0aGlzLnNvdXJjZVRpbGVHcmlkXy5nZXRFeHRlbnQoKSwgdGFyZ2V0UmVzb2x1dGlvbiwgdGFyZ2V0RXh0ZW50LCB0aGlzLnRyaWFuZ3VsYXRpb25fLCBzb3VyY2VzLCB0aGlzLmd1dHRlcl8sIHRoaXMucmVuZGVyRWRnZXNfLCB0aGlzLmNvbnRleHRPcHRpb25zXyk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURFRDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIExvYWQgbm90IHlldCBsb2FkZWQgVVJJLlxuICAgICAqL1xuICAgIFJlcHJvalRpbGUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gVGlsZVN0YXRlLkxPQURJTkc7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgICAgIHZhciBsZWZ0VG9Mb2FkXzEgPSAwO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VzTGlzdGVuZXJLZXlzXyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18uZm9yRWFjaChmdW5jdGlvbiAodGlsZSwgaSwgYXJyKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSB8fCBzdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0VG9Mb2FkXzErKztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZUxpc3RlbktleV8xID0gbGlzdGVuKHRpbGUsIEV2ZW50VHlwZS5DSEFOR0UsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT0gVGlsZVN0YXRlLkxPQURFRCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FUlJPUiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID09IFRpbGVTdGF0ZS5FTVBUWSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVubGlzdGVuQnlLZXkoc291cmNlTGlzdGVuS2V5XzEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxlZnRUb0xvYWRfMS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51bmxpc3RlblNvdXJjZXNfKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwcm9qZWN0XygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18ucHVzaChzb3VyY2VMaXN0ZW5LZXlfMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIGlmIChsZWZ0VG9Mb2FkXzEgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMucmVwcm9qZWN0Xy5iaW5kKHRoaXMpLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfLmZvckVhY2goZnVuY3Rpb24gKHRpbGUsIGksIGFycikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdGUgPSB0aWxlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PSBUaWxlU3RhdGUuSURMRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZS5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBSZXByb2pUaWxlLnByb3RvdHlwZS51bmxpc3RlblNvdXJjZXNfID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNvdXJjZXNMaXN0ZW5lcktleXNfLmZvckVhY2godW5saXN0ZW5CeUtleSk7XG4gICAgICAgIHRoaXMuc291cmNlc0xpc3RlbmVyS2V5c18gPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIFJlcHJvalRpbGU7XG59KFRpbGUpKTtcbmV4cG9ydCBkZWZhdWx0IFJlcHJvalRpbGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC9yZXByb2ovY29tbW9uXG4gKi9cbi8qKlxuICogRGVmYXVsdCBtYXhpbXVtIGFsbG93ZWQgdGhyZXNob2xkICAoaW4gcGl4ZWxzKSBmb3IgcmVwcm9qZWN0aW9uXG4gKiB0cmlhbmd1bGF0aW9uLlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuZXhwb3J0IHZhciBFUlJPUl9USFJFU0hPTEQgPSAwLjU7XG4vKipcbiAqIEVuYWJsZSBhdXRvbWF0aWMgcmVwcm9qZWN0aW9uIG9mIHJhc3RlciBzb3VyY2VzLiBEZWZhdWx0IGlzIGB0cnVlYC5cbiAqIFRPRE86IGRlY2lkZSBpZiB3ZSB3YW50IHRvIGV4cG9zZSB0aGlzIGFzIGEgYnVpbGQgZmxhZyBvciByZW1vdmUgaXRcbiAqIEB0eXBlIHtib29sZWFufVxuICovXG5leHBvcnQgdmFyIEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OID0gdHJ1ZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbW1vbi5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc3RydWN0cy9MUlVDYWNoZVxuICovXG5pbXBvcnQgeyBhc3NlcnQgfSBmcm9tICcuLi9hc3NlcnRzLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRW50cnlcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBrZXlfIEtleS5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBuZXdlciBOZXdlci5cbiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBvbGRlciBPbGRlci5cbiAqIEBwcm9wZXJ0eSB7Kn0gdmFsdWVfIFZhbHVlLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEltcGxlbWVudHMgYSBMZWFzdC1SZWNlbnRseS1Vc2VkIGNhY2hlIHdoZXJlIHRoZSBrZXlzIGRvIG5vdCBjb25mbGljdCB3aXRoXG4gKiBPYmplY3QncyBwcm9wZXJ0aWVzIChlLmcuICdoYXNPd25Qcm9wZXJ0eScgaXMgbm90IGFsbG93ZWQgYXMgYSBrZXkpLiBFeHBpcmluZ1xuICogaXRlbXMgZnJvbSB0aGUgY2FjaGUgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSB1c2VyLlxuICpcbiAqIEBmaXJlcyBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdFxuICogQHRlbXBsYXRlIFRcbiAqL1xudmFyIExSVUNhY2hlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X2hpZ2hXYXRlck1hcmtdIEhpZ2ggd2F0ZXIgbWFyay5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBMUlVDYWNoZShvcHRfaGlnaFdhdGVyTWFyaykge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVzaXJlZCBtYXggY2FjaGUgc2l6ZSBhZnRlciBleHBpcmVDYWNoZSgpLiBJZiBzZXQgdG8gMCwgbm8gY2FjaGUgZW50cmllc1xuICAgICAgICAgKiB3aWxsIGJlIHBydW5lZCBhdCBhbGwuXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhpZ2hXYXRlck1hcmsgPVxuICAgICAgICAgICAgb3B0X2hpZ2hXYXRlck1hcmsgIT09IHVuZGVmaW5lZCA/IG9wdF9oaWdoV2F0ZXJNYXJrIDogMjA0ODtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNvdW50XyA9IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIEVudHJ5Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW50cmllc18gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHs/RW50cnl9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgez9FbnRyeX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbiBleHBpcmUgY2FjaGUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoV2F0ZXJNYXJrID4gMCAmJiB0aGlzLmdldENvdW50KCkgPiB0aGlzLmhpZ2hXYXRlck1hcms7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBGSVhNRSBlbXB0eSBkZXNjcmlwdGlvbiBmb3IganNkb2NcbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY291bnRfID0gMDtcbiAgICAgICAgdGhpcy5lbnRyaWVzXyA9IHt9O1xuICAgICAgICB0aGlzLm9sZGVzdF8gPSBudWxsO1xuICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBLZXkuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gQ29udGFpbnMga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5jb250YWluc0tleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW50cmllc18uaGFzT3duUHJvcGVydHkoa2V5KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oVCwgc3RyaW5nLCBMUlVDYWNoZTxUPik6ID99IGYgVGhlIGZ1bmN0aW9uXG4gICAgICogICAgIHRvIGNhbGwgZm9yIGV2ZXJ5IGVudHJ5IGZyb20gdGhlIG9sZGVzdCB0byB0aGUgbmV3ZXIuIFRoaXMgZnVuY3Rpb24gdGFrZXNcbiAgICAgKiAgICAgMyBhcmd1bWVudHMgKHRoZSBlbnRyeSB2YWx1ZSwgdGhlIGVudHJ5IGtleSBhbmQgdGhlIExSVUNhY2hlIG9iamVjdCkuXG4gICAgICogICAgIFRoZSByZXR1cm4gdmFsdWUgaXMgaWdub3JlZC5cbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICAgICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICAgICAgICBmKGVudHJ5LnZhbHVlXywgZW50cnkua2V5XywgdGhpcyk7XG4gICAgICAgICAgICBlbnRyeSA9IGVudHJ5Lm5ld2VyO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0geyp9IFtvcHRfb3B0aW9uc10gT3B0aW9ucyAocmVzZXJ2ZWQgZm9yIHN1YmNsYXNzZXMpLlxuICAgICAqIEByZXR1cm4ge1R9IFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5LCBvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLmVudHJpZXNfW2tleV07XG4gICAgICAgIGFzc2VydChlbnRyeSAhPT0gdW5kZWZpbmVkLCAxNSk7IC8vIFRyaWVkIHRvIGdldCBhIHZhbHVlIGZvciBhIGtleSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZVxuICAgICAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAodGhpcy5vbGRlc3RfLm5ld2VyKTtcbiAgICAgICAgICAgIHRoaXMub2xkZXN0Xy5vbGRlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyO1xuICAgICAgICAgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5uZXdlciA9IG51bGw7XG4gICAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy5uZXdlc3RfO1xuICAgICAgICB0aGlzLm5ld2VzdF8ubmV3ZXIgPSBlbnRyeTtcbiAgICAgICAgdGhpcy5uZXdlc3RfID0gZW50cnk7XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYW4gZW50cnkgZnJvbSB0aGUgY2FjaGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgZW50cnkga2V5LlxuICAgICAqIEByZXR1cm4ge1R9IFRoZSByZW1vdmVkIGVudHJ5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgYXNzZXJ0KGVudHJ5ICE9PSB1bmRlZmluZWQsIDE1KTsgLy8gVHJpZWQgdG8gZ2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIGNhY2hlXG4gICAgICAgIGlmIChlbnRyeSA9PT0gdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8gPSAvKiogQHR5cGUge0VudHJ5fSAqLyAoZW50cnkub2xkZXIpO1xuICAgICAgICAgICAgaWYgKHRoaXMubmV3ZXN0Xykge1xuICAgICAgICAgICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0Xykge1xuICAgICAgICAgICAgdGhpcy5vbGRlc3RfID0gLyoqIEB0eXBlIHtFbnRyeX0gKi8gKGVudHJ5Lm5ld2VyKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9sZGVzdF8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9sZGVzdF8ub2xkZXIgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjtcbiAgICAgICAgICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuZW50cmllc19ba2V5XTtcbiAgICAgICAgLS10aGlzLmNvdW50XztcbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gQ291bnQuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3VudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBLZXlzLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5nZXRLZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIga2V5cyA9IG5ldyBBcnJheSh0aGlzLmNvdW50Xyk7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGVudHJ5O1xuICAgICAgICBmb3IgKGVudHJ5ID0gdGhpcy5uZXdlc3RfOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5vbGRlcikge1xuICAgICAgICAgICAga2V5c1tpKytdID0gZW50cnkua2V5XztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge0FycmF5PFQ+fSBWYWx1ZXMuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLmdldFZhbHVlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IG5ldyBBcnJheSh0aGlzLmNvdW50Xyk7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGVudHJ5O1xuICAgICAgICBmb3IgKGVudHJ5ID0gdGhpcy5uZXdlc3RfOyBlbnRyeTsgZW50cnkgPSBlbnRyeS5vbGRlcikge1xuICAgICAgICAgICAgdmFsdWVzW2krK10gPSBlbnRyeS52YWx1ZV87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1R9IExhc3QgdmFsdWUuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRlc3RfLnZhbHVlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gTGFzdCBrZXkuXG4gICAgICovXG4gICAgTFJVQ2FjaGUucHJvdG90eXBlLnBlZWtMYXN0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbGRlc3RfLmtleV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGtleSBvZiB0aGUgbmV3ZXN0IGl0ZW0gaW4gdGhlIGNhY2hlLiAgVGhyb3dzIGlmIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuZXdlc3Qga2V5LlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wZWVrRmlyc3RLZXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5ld2VzdF8ua2V5XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMub2xkZXN0XztcbiAgICAgICAgZGVsZXRlIHRoaXMuZW50cmllc19bZW50cnkua2V5X107XG4gICAgICAgIGlmIChlbnRyeS5uZXdlcikge1xuICAgICAgICAgICAgZW50cnkubmV3ZXIub2xkZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2xkZXN0XyA9IC8qKiBAdHlwZSB7RW50cnl9ICovIChlbnRyeS5uZXdlcik7XG4gICAgICAgIGlmICghdGhpcy5vbGRlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm5ld2VzdF8gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC0tdGhpcy5jb3VudF87XG4gICAgICAgIHJldHVybiBlbnRyeS52YWx1ZV87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5nZXQoa2V5KTsgLy8gdXBkYXRlIGBuZXdlc3RfYFxuICAgICAgICB0aGlzLmVudHJpZXNfW2tleV0udmFsdWVfID0gdmFsdWU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IEtleS5cbiAgICAgKiBAcGFyYW0ge1R9IHZhbHVlIFZhbHVlLlxuICAgICAqL1xuICAgIExSVUNhY2hlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICBhc3NlcnQoIShrZXkgaW4gdGhpcy5lbnRyaWVzXyksIDE2KTsgLy8gVHJpZWQgdG8gc2V0IGEgdmFsdWUgZm9yIGEga2V5IHRoYXQgaXMgdXNlZCBhbHJlYWR5XG4gICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgIGtleV86IGtleSxcbiAgICAgICAgICAgIG5ld2VyOiBudWxsLFxuICAgICAgICAgICAgb2xkZXI6IHRoaXMubmV3ZXN0XyxcbiAgICAgICAgICAgIHZhbHVlXzogdmFsdWUsXG4gICAgICAgIH07XG4gICAgICAgIGlmICghdGhpcy5uZXdlc3RfKSB7XG4gICAgICAgICAgICB0aGlzLm9sZGVzdF8gPSBlbnRyeTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubmV3ZXN0Xy5uZXdlciA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmV3ZXN0XyA9IGVudHJ5O1xuICAgICAgICB0aGlzLmVudHJpZXNfW2tleV0gPSBlbnRyeTtcbiAgICAgICAgKyt0aGlzLmNvdW50XztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCBhIG1heGltdW0gbnVtYmVyIG9mIGVudHJpZXMgZm9yIHRoZSBjYWNoZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZSBDYWNoZSBzaXplLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBMUlVDYWNoZS5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuaGlnaFdhdGVyTWFyayA9IHNpemU7XG4gICAgfTtcbiAgICByZXR1cm4gTFJVQ2FjaGU7XG59KCkpO1xuZXhwb3J0IGRlZmF1bHQgTFJVQ2FjaGU7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1MUlVDYWNoZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvdGlsZWNvb3JkXG4gKi9cbi8qKlxuICogQW4gYXJyYXkgb2YgdGhyZWUgbnVtYmVycyByZXByZXNlbnRpbmcgdGhlIGxvY2F0aW9uIG9mIGEgdGlsZSBpbiBhIHRpbGVcbiAqIGdyaWQuIFRoZSBvcmRlciBpcyBgemAgKHpvb20gbGV2ZWwpLCBgeGAgKGNvbHVtbiksIGFuZCBgeWAgKHJvdykuXG4gKiBAdHlwZWRlZiB7QXJyYXk8bnVtYmVyPn0gVGlsZUNvb3JkXG4gKiBAYXBpXG4gKi9cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IHogWi5cbiAqIEBwYXJhbSB7bnVtYmVyfSB4IFguXG4gKiBAcGFyYW0ge251bWJlcn0geSBZLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtUaWxlQ29vcmR9IFRpbGUgY29vcmRpbmF0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9yVXBkYXRlKHosIHgsIHksIG9wdF90aWxlQ29vcmQpIHtcbiAgICBpZiAob3B0X3RpbGVDb29yZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9wdF90aWxlQ29vcmRbMF0gPSB6O1xuICAgICAgICBvcHRfdGlsZUNvb3JkWzFdID0geDtcbiAgICAgICAgb3B0X3RpbGVDb29yZFsyXSA9IHk7XG4gICAgICAgIHJldHVybiBvcHRfdGlsZUNvb3JkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFt6LCB4LCB5XTtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICogQHBhcmFtIHtudW1iZXJ9IHkgWS5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5WlhZKHosIHgsIHkpIHtcbiAgICByZXR1cm4geiArICcvJyArIHggKyAnLycgKyB5O1xufVxuLyoqXG4gKiBHZXQgdGhlIGtleSBmb3IgYSB0aWxlIGNvb3JkLlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaGUgdGlsZSBjb29yZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gS2V5LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0S2V5KHRpbGVDb29yZCkge1xuICAgIHJldHVybiBnZXRLZXlaWFkodGlsZUNvb3JkWzBdLCB0aWxlQ29vcmRbMV0sIHRpbGVDb29yZFsyXSk7XG59XG4vKipcbiAqIEdldCB0aGUgdGlsZSBjYWNoZSBrZXkgZm9yIGEgdGlsZSBrZXkgb2J0YWluZWQgdGhyb3VnaCBgdGlsZS5nZXRLZXkoKWAuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGlsZUtleSBUaGUgdGlsZSBrZXkuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBjYWNoZSBrZXkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZUtleUZvclRpbGVLZXkodGlsZUtleSkge1xuICAgIHZhciBfYSA9IHRpbGVLZXlcbiAgICAgICAgLnN1YnN0cmluZyh0aWxlS2V5Lmxhc3RJbmRleE9mKCcvJykgKyAxLCB0aWxlS2V5Lmxlbmd0aClcbiAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgLm1hcChOdW1iZXIpLCB6ID0gX2FbMF0sIHggPSBfYVsxXSwgeSA9IF9hWzJdO1xuICAgIHJldHVybiBnZXRLZXlaWFkoeiwgeCwgeSk7XG59XG4vKipcbiAqIEdldCBhIHRpbGUgY29vcmQgZ2l2ZW4gYSBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSB0aWxlIGNvb3JkIGtleS5cbiAqIEByZXR1cm4ge1RpbGVDb29yZH0gVGhlIHRpbGUgY29vcmQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmcm9tS2V5KGtleSkge1xuICAgIHJldHVybiBrZXkuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkLlxuICogQHJldHVybiB7bnVtYmVyfSBIYXNoLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzaCh0aWxlQ29vcmQpIHtcbiAgICByZXR1cm4gKHRpbGVDb29yZFsxXSA8PCB0aWxlQ29vcmRbMF0pICsgdGlsZUNvb3JkWzJdO1xufVxuLyoqXG4gKiBAcGFyYW0ge1RpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7IWltcG9ydChcIi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVGlsZSBjb29yZGluYXRlIGlzIHdpdGhpbiBleHRlbnQgYW5kIHpvb20gbGV2ZWwgcmFuZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpIHtcbiAgICB2YXIgeiA9IHRpbGVDb29yZFswXTtcbiAgICB2YXIgeCA9IHRpbGVDb29yZFsxXTtcbiAgICB2YXIgeSA9IHRpbGVDb29yZFsyXTtcbiAgICBpZiAodGlsZUdyaWQuZ2V0TWluWm9vbSgpID4geiB8fCB6ID4gdGlsZUdyaWQuZ2V0TWF4Wm9vbSgpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgaWYgKCF0aWxlUmFuZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdGlsZVJhbmdlLmNvbnRhaW5zWFkoeCwgeSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWNvb3JkLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvVGlsZUNhY2hlXG4gKi9cbmltcG9ydCBMUlVDYWNoZSBmcm9tICcuL3N0cnVjdHMvTFJVQ2FjaGUuanMnO1xuaW1wb3J0IHsgZnJvbUtleSwgZ2V0S2V5IH0gZnJvbSAnLi90aWxlY29vcmQuanMnO1xudmFyIFRpbGVDYWNoZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVGlsZUNhY2hlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFRpbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZUNhY2hlLnByb3RvdHlwZS5leHBpcmVDYWNoZSA9IGZ1bmN0aW9uICh1c2VkVGlsZXMpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuY2FuRXhwaXJlQ2FjaGUoKSkge1xuICAgICAgICAgICAgdmFyIHRpbGUgPSB0aGlzLnBlZWtMYXN0KCk7XG4gICAgICAgICAgICBpZiAodGlsZS5nZXRLZXkoKSBpbiB1c2VkVGlsZXMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucG9wKCkucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBQcnVuZSBhbGwgdGlsZXMgZnJvbSB0aGUgY2FjaGUgdGhhdCBkb24ndCBoYXZlIHRoZSBzYW1lIHogYXMgdGhlIG5ld2VzdCB0aWxlLlxuICAgICAqL1xuICAgIFRpbGVDYWNoZS5wcm90b3R5cGUucHJ1bmVFeGNlcHROZXdlc3RaID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5nZXRDb3VudCgpID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleSA9IHRoaXMucGVla0ZpcnN0S2V5KCk7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBmcm9tS2V5KGtleSk7XG4gICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHRpbGUpIHtcbiAgICAgICAgICAgIGlmICh0aWxlLnRpbGVDb29yZFswXSAhPT0geikge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGdldEtleSh0aWxlLnRpbGVDb29yZCkpO1xuICAgICAgICAgICAgICAgIHRpbGUucmVsZWFzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVDYWNoZTtcbn0oTFJVQ2FjaGUpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVDYWNoZTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVRpbGVDYWNoZS5qcy5tYXAiLCJ2YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9Tb3VyY2VcbiAqL1xuaW1wb3J0IEJhc2VPYmplY3QgZnJvbSAnLi4vT2JqZWN0LmpzJztcbmltcG9ydCBTb3VyY2VTdGF0ZSBmcm9tICcuL1N0YXRlLmpzJztcbmltcG9ydCB7IGFic3RyYWN0IH0gZnJvbSAnLi4vdXRpbC5qcyc7XG5pbXBvcnQgeyBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJy4uL3Byb2ouanMnO1xuLyoqXG4gKiBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgYSB7QGxpbmsgbW9kdWxlOm9sL1BsdWdnYWJsZU1hcH5GcmFtZVN0YXRlfSBhbmQgcmV0dXJucyBhIHN0cmluZyBvclxuICogYW4gYXJyYXkgb2Ygc3RyaW5ncyByZXByZXNlbnRpbmcgc291cmNlIGF0dHJpYnV0aW9ucy5cbiAqXG4gKiBAdHlwZWRlZiB7ZnVuY3Rpb24oaW1wb3J0KFwiLi4vUGx1Z2dhYmxlTWFwLmpzXCIpLkZyYW1lU3RhdGUpOiAoc3RyaW5nfEFycmF5PHN0cmluZz4pfSBBdHRyaWJ1dGlvblxuICovXG4vKipcbiAqIEEgdHlwZSB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgYXR0cmlidXRpb24gaW5mb3JtYXRpb24gZm9yIGRhdGEgc291cmNlcy5cbiAqXG4gKiBJdCByZXByZXNlbnRzIGVpdGhlclxuICogKiBhIHNpbXBsZSBzdHJpbmcgKGUuZy4gYCfCqSBBY21lIEluYy4nYClcbiAqICogYW4gYXJyYXkgb2Ygc2ltcGxlIHN0cmluZ3MgKGUuZy4gYFsnwqkgQWNtZSBJbmMuJywgJ8KpIEJhY21lIEluYy4nXWApXG4gKiAqIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3RyaW5nIG9yIGFycmF5IG9mIHN0cmluZ3MgKHtAbGluayBtb2R1bGU6b2wvc291cmNlL1NvdXJjZX5BdHRyaWJ1dGlvbn0pXG4gKlxuICogQHR5cGVkZWYge3N0cmluZ3xBcnJheTxzdHJpbmc+fEF0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbkxpa2VcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge0F0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGU9J3JlYWR5J10gU3RhdGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD1mYWxzZV0gV3JhcFguXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQWJzdHJhY3QgYmFzZSBjbGFzczsgbm9ybWFsbHkgb25seSB1c2VkIGZvciBjcmVhdGluZyBzdWJjbGFzc2VzIGFuZCBub3RcbiAqIGluc3RhbnRpYXRlZCBpbiBhcHBzLlxuICogQmFzZSBjbGFzcyBmb3Ige0BsaW5rIG1vZHVsZTpvbC9sYXllci9MYXllcn5MYXllcn0gc291cmNlcy5cbiAqXG4gKiBBIGdlbmVyaWMgYGNoYW5nZWAgZXZlbnQgaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHN0YXRlIG9mIHRoZSBzb3VyY2UgY2hhbmdlcy5cbiAqIEBhYnN0cmFjdFxuICogQGFwaVxuICovXG52YXIgU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uKG9wdGlvbnMucHJvamVjdGlvbik7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7P0F0dHJpYnV0aW9ufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zXyA9IGFkYXB0QXR0cmlidXRpb25zKG9wdGlvbnMuYXR0cmlidXRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZVxuICAgICAgICAgICAgICAgIDogdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoaXMgc291cmNlIGlzIGN1cnJlbnRseSBsb2FkaW5nIGRhdGEuIFNvdXJjZXMgdGhhdCBkZWZlciBsb2FkaW5nIHRvIHRoZVxuICAgICAgICAgKiBtYXAncyB0aWxlIHF1ZXVlIG5ldmVyIHNldCB0aGlzIHRvIGB0cnVlYC5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuc3RhdGVfID1cbiAgICAgICAgICAgIG9wdGlvbnMuc3RhdGUgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc3RhdGUgOiBTb3VyY2VTdGF0ZS5SRUFEWTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMud3JhcFhfID0gb3B0aW9ucy53cmFwWCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy53cmFwWCA6IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYXR0cmlidXRpb24gZnVuY3Rpb24gZm9yIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBdHRyaWJ1dGlvbiBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldEF0dHJpYnV0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRBdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRpb25zQ29sbGFwc2libGVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwcm9qZWN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvamVjdGlvbjtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBhYnN0cmFjdFxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj58dW5kZWZpbmVkfSBSZXNvbHV0aW9ucy5cbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLmdldFJlc29sdXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gYWJzdHJhY3QoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZSwgc2VlIHtAbGluayBtb2R1bGU6b2wvc291cmNlL1N0YXRlflN0YXRlfSBmb3IgcG9zc2libGUgc3RhdGVzLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gU3RhdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW58dW5kZWZpbmVkfSBXcmFwIFguXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5nZXRXcmFwWCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcFhfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH0gQ29udGV4dCBvcHRpb25zLlxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuZ2V0Q29udGV4dE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZWZyZXNoZXMgdGhlIHNvdXJjZS4gVGhlIHNvdXJjZSB3aWxsIGJlIGNsZWFyZWQsIGFuZCBkYXRhIGZyb20gdGhlIHNlcnZlciB3aWxsIGJlIHJlbG9hZGVkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBhdHRyaWJ1dGlvbnMgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9ucyBBdHRyaWJ1dGlvbnMuXG4gICAgICogICAgIENhbiBiZSBwYXNzZWQgYXMgYHN0cmluZ2AsIGBBcnJheTxzdHJpbmc+YCwge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvU291cmNlfkF0dHJpYnV0aW9ufSxcbiAgICAgKiAgICAgb3IgYHVuZGVmaW5lZGAuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFNvdXJjZS5wcm90b3R5cGUuc2V0QXR0cmlidXRpb25zID0gZnVuY3Rpb24gKGF0dHJpYnV0aW9ucykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0aW9uc18gPSBhZGFwdEF0dHJpYnV0aW9ucyhhdHRyaWJ1dGlvbnMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgc3RhdGUgb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vU3RhdGUuanNcIikuZGVmYXVsdH0gc3RhdGUgU3RhdGUuXG4gICAgICovXG4gICAgU291cmNlLnByb3RvdHlwZS5zZXRTdGF0ZSA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICB0aGlzLnN0YXRlXyA9IHN0YXRlO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIHJldHVybiBTb3VyY2U7XG59KEJhc2VPYmplY3QpKTtcbi8qKlxuICogVHVybnMgdGhlIGF0dHJpYnV0aW9ucyBvcHRpb24gaW50byBhbiBhdHRyaWJ1dGlvbnMgZnVuY3Rpb24uXG4gKiBAcGFyYW0ge0F0dHJpYnV0aW9uTGlrZXx1bmRlZmluZWR9IGF0dHJpYnV0aW9uTGlrZSBUaGUgYXR0cmlidXRpb24gb3B0aW9uLlxuICogQHJldHVybiB7P0F0dHJpYnV0aW9ufSBBbiBhdHRyaWJ1dGlvbiBmdW5jdGlvbiAob3IgbnVsbCkuXG4gKi9cbmZ1bmN0aW9uIGFkYXB0QXR0cmlidXRpb25zKGF0dHJpYnV0aW9uTGlrZSkge1xuICAgIGlmICghYXR0cmlidXRpb25MaWtlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhdHRyaWJ1dGlvbkxpa2UpKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhdHRyaWJ1dGlvbkxpa2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0aW9uTGlrZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChmcmFtZVN0YXRlKSB7XG4gICAgICAgIHJldHVybiBbYXR0cmlidXRpb25MaWtlXTtcbiAgICB9O1xufVxuZXhwb3J0IGRlZmF1bHQgU291cmNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U291cmNlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxlZ3JpZC9UaWxlR3JpZFxuICovXG5pbXBvcnQgVGlsZVJhbmdlLCB7IGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlLCB9IGZyb20gJy4uL1RpbGVSYW5nZS5qcyc7XG5pbXBvcnQgeyBERUZBVUxUX1RJTEVfU0laRSB9IGZyb20gJy4vY29tbW9uLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgY2xhbXAgfSBmcm9tICcuLi9tYXRoLmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlLCBnZXRUb3BMZWZ0IH0gZnJvbSAnLi4vZXh0ZW50LmpzJztcbmltcG9ydCB7IGNyZWF0ZU9yVXBkYXRlIGFzIGNyZWF0ZU9yVXBkYXRlVGlsZUNvb3JkIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGlzU29ydGVkLCBsaW5lYXJGaW5kTmVhcmVzdCB9IGZyb20gJy4uL2FycmF5LmpzJztcbmltcG9ydCB7IHRvU2l6ZSB9IGZyb20gJy4uL3NpemUuanMnO1xuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9XG4gKi9cbnZhciB0bXBUaWxlQ29vcmQgPSBbMCwgMCwgMF07XG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBObyB0aWxlcyBvdXRzaWRlIHRoaXNcbiAqIGV4dGVudCB3aWxsIGJlIHJlcXVlc3RlZCBieSB7QGxpbmsgbW9kdWxlOm9sL3NvdXJjZS9UaWxlfSBzb3VyY2VzLiBXaGVuIG5vIGBvcmlnaW5gIG9yXG4gKiBgb3JpZ2luc2AgYXJlIGNvbmZpZ3VyZWQsIHRoZSBgb3JpZ2luYCB3aWxsIGJlIHNldCB0byB0aGUgdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gTWluaW11bSB6b29tLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9IFtvcmlnaW5dIFRoZSB0aWxlIGdyaWQgb3JpZ2luLCBpLmUuIHdoZXJlIHRoZSBgeGBcbiAqIGFuZCBgeWAgYXhlcyBtZWV0IChgW3osIDAsIDBdYCkuIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3RcbiAqIHNwZWNpZmllZCwgYGV4dGVudGAgb3IgYG9yaWdpbnNgIG11c3QgYmUgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59IFtvcmlnaW5zXSBUaWxlIGdyaWQgb3JpZ2lucywgaS5lLiB3aGVyZVxuICogdGhlIGB4YCBhbmQgYHlgIGF4ZXMgbWVldCAoYFt6LCAwLCAwXWApLCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiBvcmlnaW4uIFRpbGUgY29vcmRpbmF0ZXMgaW5jcmVhc2UgbGVmdCB0byByaWdodCBhbmQgZG93bndhcmRzLiBJZiBub3Qgc3BlY2lmaWVkLCBgZXh0ZW50YCBvclxuICogYG9yaWdpbmAgbXVzdCBiZSBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7IUFycmF5PG51bWJlcj59IHJlc29sdXRpb25zIFJlc29sdXRpb25zLiBUaGUgYXJyYXkgaW5kZXggb2YgZWFjaCByZXNvbHV0aW9uIG5lZWRzXG4gKiB0byBtYXRjaCB0aGUgem9vbSBsZXZlbC4gVGhpcyBtZWFucyB0aGF0IGV2ZW4gaWYgYSBgbWluWm9vbWAgaXMgY29uZmlndXJlZCwgdGhlIHJlc29sdXRpb25zXG4gKiBhcnJheSB3aWxsIGhhdmUgYSBsZW5ndGggb2YgYG1heFpvb20gKyAxYC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplPn0gW3NpemVzXSBOdW1iZXIgb2YgdGlsZSByb3dzIGFuZCBjb2x1bW5zXG4gKiBvZiB0aGUgZ3JpZCBmb3IgZWFjaCB6b29tIGxldmVsLiBJZiBzcGVjaWZpZWQgdGhlIHZhbHVlc1xuICogZGVmaW5lIGVhY2ggem9vbSBsZXZlbCdzIGV4dGVudCB0b2dldGhlciB3aXRoIHRoZSBgb3JpZ2luYCBvciBgb3JpZ2luc2AuXG4gKiBBIGdyaWQgYGV4dGVudGAgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gYWRkaXRpb24sIGFuZCB3aWxsIGZ1cnRoZXIgbGltaXQgdGhlIGV4dGVudFxuICogZm9yIHdoaWNoIHRpbGUgcmVxdWVzdHMgYXJlIG1hZGUgYnkgc291cmNlcy4gSWYgdGhlIGJvdHRvbS1sZWZ0IGNvcm5lciBvZlxuICogYW4gZXh0ZW50IGlzIHVzZWQgYXMgYG9yaWdpbmAgb3IgYG9yaWdpbnNgLCB0aGVuIHRoZSBgeWAgdmFsdWUgbXVzdCBiZVxuICogbmVnYXRpdmUgYmVjYXVzZSBPcGVuTGF5ZXJzIHRpbGUgY29vcmRpbmF0ZXMgdXNlIHRoZSB0b3AgbGVmdCBhcyB0aGUgb3JpZ2luLlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemVdIFRpbGUgc2l6ZS5cbiAqIERlZmF1bHQgaXMgYFsyNTYsIDI1Nl1gLlxuICogQHByb3BlcnR5IHtBcnJheTxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemU+fSBbdGlsZVNpemVzXSBUaWxlIHNpemVzLiBJZiBnaXZlbiwgdGhlIGFycmF5IGxlbmd0aFxuICogc2hvdWxkIG1hdGNoIHRoZSBsZW5ndGggb2YgdGhlIGByZXNvbHV0aW9uc2AgYXJyYXksIGkuZS4gZWFjaCByZXNvbHV0aW9uIGNhbiBoYXZlIGEgZGlmZmVyZW50XG4gKiB0aWxlIHNpemUuXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc2V0dGluZyB0aGUgZ3JpZCBwYXR0ZXJuIGZvciBzb3VyY2VzIGFjY2Vzc2luZyB0aWxlZC1pbWFnZVxuICogc2VydmVycy5cbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVHcmlkID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T3B0aW9uc30gb3B0aW9ucyBUaWxlIGdyaWQgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlR3JpZChvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1pblpvb20gPSBvcHRpb25zLm1pblpvb20gIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMubWluWm9vbSA6IDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7IUFycmF5PG51bWJlcj59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc29sdXRpb25zXyA9IG9wdGlvbnMucmVzb2x1dGlvbnM7XG4gICAgICAgIGFzc2VydChpc1NvcnRlZCh0aGlzLnJlc29sdXRpb25zXywgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBiIC0gYTtcbiAgICAgICAgfSwgdHJ1ZSksIDE3KTsgLy8gYHJlc29sdXRpb25zYCBtdXN0IGJlIHNvcnRlZCBpbiBkZXNjZW5kaW5nIG9yZGVyXG4gICAgICAgIC8vIGNoZWNrIGlmIHdlJ3ZlIGdvdCBhIGNvbnNpc3RlbnQgem9vbSBmYWN0b3IgYW5kIG9yaWdpblxuICAgICAgICB2YXIgem9vbUZhY3RvcjtcbiAgICAgICAgaWYgKCFvcHRpb25zLm9yaWdpbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCAtIDE7IGkgPCBpaTsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF6b29tRmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb21GYWN0b3IgPSB0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlc29sdXRpb25zX1tpXSAvIHRoaXMucmVzb2x1dGlvbnNfW2kgKyAxXSAhPT0gem9vbUZhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbUZhY3RvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfHVuZGVmaW5lZH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuem9vbUZhY3Rvcl8gPSB6b29tRmFjdG9yO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYXhab29tID0gdGhpcy5yZXNvbHV0aW9uc18ubGVuZ3RoIC0gMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9jb29yZGluYXRlLmpzXCIpLkNvb3JkaW5hdGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbl8gPSBvcHRpb25zLm9yaWdpbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5vcmlnaW4gOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWdpbnNfID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbnMub3JpZ2lucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbnNfID0gb3B0aW9ucy5vcmlnaW5zO1xuICAgICAgICAgICAgYXNzZXJ0KHRoaXMub3JpZ2luc18ubGVuZ3RoID09IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aCwgMjApOyAvLyBOdW1iZXIgb2YgYG9yaWdpbnNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICB2YXIgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQ7XG4gICAgICAgIGlmIChleHRlbnQgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5vcmlnaW5fICYmICF0aGlzLm9yaWdpbnNfKSB7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbl8gPSBnZXRUb3BMZWZ0KGV4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgYXNzZXJ0KCghdGhpcy5vcmlnaW5fICYmIHRoaXMub3JpZ2luc18pIHx8ICh0aGlzLm9yaWdpbl8gJiYgIXRoaXMub3JpZ2luc18pLCAxOCk7IC8vIEVpdGhlciBgb3JpZ2luYCBvciBgb3JpZ2luc2AgbXVzdCBiZSBjb25maWd1cmVkLCBuZXZlciBib3RoXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7QXJyYXk8bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZT59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplc18gPSBudWxsO1xuICAgICAgICBpZiAob3B0aW9ucy50aWxlU2l6ZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy50aWxlU2l6ZXNfID0gb3B0aW9ucy50aWxlU2l6ZXM7XG4gICAgICAgICAgICBhc3NlcnQodGhpcy50aWxlU2l6ZXNfLmxlbmd0aCA9PSB0aGlzLnJlc29sdXRpb25zXy5sZW5ndGgsIDE5KTsgLy8gTnVtYmVyIG9mIGB0aWxlU2l6ZXNgIGFuZCBgcmVzb2x1dGlvbnNgIG11c3QgYmUgZXF1YWxcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpbGVTaXplXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVTaXplICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IG9wdGlvbnMudGlsZVNpemVcbiAgICAgICAgICAgICAgICA6ICF0aGlzLnRpbGVTaXplc19cbiAgICAgICAgICAgICAgICAgICAgPyBERUZBVUxUX1RJTEVfU0laRVxuICAgICAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGFzc2VydCgoIXRoaXMudGlsZVNpemVfICYmIHRoaXMudGlsZVNpemVzXykgfHxcbiAgICAgICAgICAgICh0aGlzLnRpbGVTaXplXyAmJiAhdGhpcy50aWxlU2l6ZXNfKSwgMjIpOyAvLyBFaXRoZXIgYHRpbGVTaXplYCBvciBgdGlsZVNpemVzYCBtdXN0IGJlIGNvbmZpZ3VyZWQsIG5ldmVyIGJvdGhcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5leHRlbnRfID0gZXh0ZW50ICE9PSB1bmRlZmluZWQgPyBleHRlbnQgOiBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge0FycmF5PGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRtcFNpemVfID0gWzAsIDBdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRtcEV4dGVudF8gPSBbMCwgMCwgMCwgMF07XG4gICAgICAgIGlmIChvcHRpb25zLnNpemVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZnVsbFRpbGVSYW5nZXNfID0gb3B0aW9ucy5zaXplcy5tYXAoZnVuY3Rpb24gKHNpemUsIHopIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZVJhbmdlID0gbmV3IFRpbGVSYW5nZShNYXRoLm1pbigwLCBzaXplWzBdKSwgTWF0aC5tYXgoc2l6ZVswXSAtIDEsIC0xKSwgTWF0aC5taW4oMCwgc2l6ZVsxXSksIE1hdGgubWF4KHNpemVbMV0gLSAxLCAtMSkpO1xuICAgICAgICAgICAgICAgIGlmIChleHRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3RyaWN0ZWRUaWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1pblggPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblgsIHRpbGVSYW5nZS5taW5YKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1heFggPSBNYXRoLm1pbihyZXN0cmljdGVkVGlsZVJhbmdlLm1heFgsIHRpbGVSYW5nZS5tYXhYKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1pblkgPSBNYXRoLm1heChyZXN0cmljdGVkVGlsZVJhbmdlLm1pblksIHRpbGVSYW5nZS5taW5ZKTtcbiAgICAgICAgICAgICAgICAgICAgdGlsZVJhbmdlLm1heFkgPSBNYXRoLm1pbihyZXN0cmljdGVkVGlsZVJhbmdlLm1heFksIHRpbGVSYW5nZS5tYXhZKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbGVSYW5nZTtcbiAgICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4dGVudCkge1xuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVUaWxlUmFuZ2VzXyhleHRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgYSBmdW5jdGlvbiB3aXRoIGVhY2ggdGlsZSBjb29yZGluYXRlIGZvciBhIGdpdmVuIGV4dGVudCBhbmQgem9vbSBsZXZlbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gZXh0ZW50IEV4dGVudC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gem9vbSBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkKTogdm9pZH0gY2FsbGJhY2sgRnVuY3Rpb24gY2FsbGVkIHdpdGggZWFjaCB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5mb3JFYWNoVGlsZUNvb3JkID0gZnVuY3Rpb24gKGV4dGVudCwgem9vbSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVSYW5nZSA9IHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWihleHRlbnQsIHpvb20pO1xuICAgICAgICBmb3IgKHZhciBpID0gdGlsZVJhbmdlLm1pblgsIGlpID0gdGlsZVJhbmdlLm1heFg7IGkgPD0gaWk7ICsraSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IHRpbGVSYW5nZS5taW5ZLCBqaiA9IHRpbGVSYW5nZS5tYXhZOyBqIDw9IGpqOyArK2opIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhbem9vbSwgaSwgal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0KTogYm9vbGVhbn0gY2FsbGJhY2sgQ2FsbGJhY2suXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gW29wdF90aWxlUmFuZ2VdIFRlbXBvcmFyeSBpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdCBvYmplY3QuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IENhbGxiYWNrIHN1Y2NlZWRlZC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZSA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIGNhbGxiYWNrLCBvcHRfdGlsZVJhbmdlLCBvcHRfZXh0ZW50KSB7XG4gICAgICAgIHZhciB0aWxlUmFuZ2UsIHgsIHk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRFeHRlbnQgPSBudWxsO1xuICAgICAgICB2YXIgeiA9IHRpbGVDb29yZFswXSAtIDE7XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfID09PSAyKSB7XG4gICAgICAgICAgICB4ID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICAgICAgeSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgb3B0X2V4dGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHogPj0gdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHggPSBNYXRoLmZsb29yKHggLyAyKTtcbiAgICAgICAgICAgICAgICB5ID0gTWF0aC5mbG9vcih5IC8gMik7XG4gICAgICAgICAgICAgICAgdGlsZVJhbmdlID0gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UoeCwgeCwgeSwgeSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFoodGlsZUNvb3JkRXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYWxsYmFjayh6LCB0aWxlUmFuZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAtLXo7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIHRoaXMgdGlsZSBncmlkLCBpZiBpdCB3YXMgY29uZmlndXJlZC5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRFeHRlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4dGVudF87XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1heGltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNYXggem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1heFpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1heFpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG1pbmltdW0gem9vbSBsZXZlbCBmb3IgdGhlIGdyaWQuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBNaW4gem9vbS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldE1pblpvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pblpvb207XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIG9yaWdpbiBmb3IgdGhlIGdyaWQgYXQgdGhlIGdpdmVuIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gT3JpZ2luLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0T3JpZ2luID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMub3JpZ2luXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luXztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9yaWdpbnNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHJlc29sdXRpb24gZm9yIHRoZSBnaXZlbiB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IEludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFJlc29sdXRpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x1dGlvbnNfW3pdO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIHJlc29sdXRpb25zIGZvciB0aGUgdGlsZSBncmlkLlxuICAgICAqIEByZXR1cm4ge0FycmF5PG51bWJlcj59IFJlc29sdXRpb25zLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBbb3B0X3RpbGVSYW5nZV0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IFtvcHRfZXh0ZW50XSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgb3B0X3RpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICBpZiAodGlsZUNvb3JkWzBdIDwgdGhpcy5tYXhab29tKSB7XG4gICAgICAgICAgICBpZiAodGhpcy56b29tRmFjdG9yXyA9PT0gMikge1xuICAgICAgICAgICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdICogMjtcbiAgICAgICAgICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXSAqIDI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1pblggKyAxLCBtaW5ZLCBtaW5ZICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGlsZUNvb3JkRXh0ZW50ID0gdGhpcy5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCBvcHRfZXh0ZW50IHx8IHRoaXMudG1wRXh0ZW50Xyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRpbGVDb29yZEV4dGVudCwgdGlsZUNvb3JkWzBdICsgMSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBUaWxlIHJhbmdlLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRUaWxlUmFuZ2VGb3JUaWxlQ29vcmRBbmRaID0gZnVuY3Rpb24gKHRpbGVDb29yZCwgeiwgb3B0X3RpbGVSYW5nZSkge1xuICAgICAgICBpZiAoeiA+IHRoaXMubWF4Wm9vbSB8fCB6IDwgdGhpcy5taW5ab29tKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGlsZUNvb3JkWiA9IHRpbGVDb29yZFswXTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFggPSB0aWxlQ29vcmRbMV07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gdGlsZUNvb3JkWzJdO1xuICAgICAgICBpZiAoeiA9PT0gdGlsZUNvb3JkWikge1xuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKHRpbGVDb29yZFgsIHRpbGVDb29yZFksIHRpbGVDb29yZFgsIHRpbGVDb29yZFksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnpvb21GYWN0b3JfKSB7XG4gICAgICAgICAgICB2YXIgZmFjdG9yID0gTWF0aC5wb3codGhpcy56b29tRmFjdG9yXywgeiAtIHRpbGVDb29yZFopO1xuICAgICAgICAgICAgdmFyIG1pblggPSBNYXRoLmZsb29yKHRpbGVDb29yZFggKiBmYWN0b3IpO1xuICAgICAgICAgICAgdmFyIG1pblkgPSBNYXRoLmZsb29yKHRpbGVDb29yZFkgKiBmYWN0b3IpO1xuICAgICAgICAgICAgaWYgKHogPCB0aWxlQ29vcmRaKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZU9yVXBkYXRlVGlsZVJhbmdlKG1pblgsIG1pblgsIG1pblksIG1pblksIG9wdF90aWxlUmFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG1heFggPSBNYXRoLmZsb29yKGZhY3RvciAqICh0aWxlQ29vcmRYICsgMSkpIC0gMTtcbiAgICAgICAgICAgIHZhciBtYXhZID0gTWF0aC5mbG9vcihmYWN0b3IgKiAodGlsZUNvb3JkWSArIDEpKSAtIDE7XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgbWF4WCwgbWluWSwgbWF4WSwgb3B0X3RpbGVSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbGVDb29yZEV4dGVudCA9IHRoaXMuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGhpcy50bXBFeHRlbnRfKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZVJhbmdlRm9yRXh0ZW50QW5kWih0aWxlQ29vcmRFeHRlbnQsIHosIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBleHRlbnQgZm9yIGEgdGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlUmFuZ2UuanNcIikuZGVmYXVsdH0gdGlsZVJhbmdlIFRpbGUgcmFuZ2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBbb3B0X2V4dGVudF0gVGVtcG9yYXJ5IGltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZVJhbmdlRXh0ZW50ID0gZnVuY3Rpb24gKHosIHRpbGVSYW5nZSwgb3B0X2V4dGVudCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG4gICAgICAgIHZhciBtaW5YID0gb3JpZ2luWzBdICsgdGlsZVJhbmdlLm1pblggKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhYID0gb3JpZ2luWzBdICsgKHRpbGVSYW5nZS5tYXhYICsgMSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtaW5ZID0gb3JpZ2luWzFdICsgdGlsZVJhbmdlLm1pblkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhZID0gb3JpZ2luWzFdICsgKHRpbGVSYW5nZS5tYXhZICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHJldHVybiBjcmVhdGVPclVwZGF0ZShtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZLCBvcHRfZXh0ZW50KTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCBhIHRpbGUgcmFuZ2UgZm9yIHRoZSBnaXZlbiBleHRlbnQgYW5kIGludGVnZXIgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogSW50ZWdlciB6b29tIGxldmVsLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFtvcHRfdGlsZVJhbmdlXSBUZW1wb3JhcnkgdGlsZSByYW5nZSBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZVJhbmdlLmpzXCIpLmRlZmF1bHR9IFRpbGUgcmFuZ2UuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFogPSBmdW5jdGlvbiAoZXh0ZW50LCB6LCBvcHRfdGlsZVJhbmdlKSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSB0bXBUaWxlQ29vcmQ7XG4gICAgICAgIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhleHRlbnRbMF0sIGV4dGVudFszXSwgeiwgZmFsc2UsIHRpbGVDb29yZCk7XG4gICAgICAgIHZhciBtaW5YID0gdGlsZUNvb3JkWzFdO1xuICAgICAgICB2YXIgbWluWSA9IHRpbGVDb29yZFsyXTtcbiAgICAgICAgdGhpcy5nZXRUaWxlQ29vcmRGb3JYWUFuZFpfKGV4dGVudFsyXSwgZXh0ZW50WzFdLCB6LCB0cnVlLCB0aWxlQ29vcmQpO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlUmFuZ2UobWluWCwgdGlsZUNvb3JkWzFdLCBtaW5ZLCB0aWxlQ29vcmRbMl0sIG9wdF90aWxlUmFuZ2UpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gVGlsZSBjZW50ZXIuXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZENlbnRlciA9IGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb3JpZ2luWzBdICsgKHRpbGVDb29yZFsxXSArIDAuNSkgKiB0aWxlU2l6ZVswXSAqIHJlc29sdXRpb24sXG4gICAgICAgICAgICBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMC41KSAqIHRpbGVTaXplWzFdICogcmVzb2x1dGlvbixcbiAgICAgICAgXTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgZXh0ZW50IG9mIGEgdGlsZSBjb29yZGluYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW29wdF9leHRlbnRdIFRlbXBvcmFyeSBleHRlbnQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL2V4dGVudC5qc1wiKS5FeHRlbnR9IEV4dGVudC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEV4dGVudCA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIG9wdF9leHRlbnQpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZ2V0T3JpZ2luKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHRpbGVDb29yZFswXSk7XG4gICAgICAgIHZhciB0aWxlU2l6ZSA9IHRvU2l6ZSh0aGlzLmdldFRpbGVTaXplKHRpbGVDb29yZFswXSksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgbWluWCA9IG9yaWdpblswXSArIHRpbGVDb29yZFsxXSAqIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1pblkgPSBvcmlnaW5bMV0gLSAodGlsZUNvb3JkWzJdICsgMSkgKiB0aWxlU2l6ZVsxXSAqIHJlc29sdXRpb247XG4gICAgICAgIHZhciBtYXhYID0gbWluWCArIHRpbGVTaXplWzBdICogcmVzb2x1dGlvbjtcbiAgICAgICAgdmFyIG1heFkgPSBtaW5ZICsgdGlsZVNpemVbMV0gKiByZXNvbHV0aW9uO1xuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGUobWluWCwgbWluWSwgbWF4WCwgbWF4WSwgb3B0X2V4dGVudCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHRpbGUgY29vcmRpbmF0ZSBmb3IgdGhlIGdpdmVuIG1hcCBjb29yZGluYXRlIGFuZCByZXNvbHV0aW9uLiAgVGhpc1xuICAgICAqIG1ldGhvZCBjb25zaWRlcnMgdGhhdCBjb29yZGluYXRlcyB0aGF0IGludGVyc2VjdCB0aWxlIGJvdW5kYXJpZXMgc2hvdWxkIGJlXG4gICAgICogYXNzaWduZWQgdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRSZXNvbHV0aW9uID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHJlc29sdXRpb24sIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRSZXNvbHV0aW9uXyhjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCByZXNvbHV0aW9uLCBmYWxzZSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgZm9yIHJlc29sdXRpb25zIHRoYXQgY29ycmVzcG9uZFxuICAgICAqIHRvIGFuIGludGVnZXIgem9vbSBsZXZlbC4gIEluc3RlYWQgY2FsbCB0aGUgYGdldFRpbGVDb29yZEZvclhZQW5kWl9gIG1ldGhvZC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBYLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJlc29sdXRpb24gUmVzb2x1dGlvbiAoZm9yIGEgbm9uLWludGVnZXIgem9vbSBsZXZlbCkuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kUmVzb2x1dGlvbl8gPSBmdW5jdGlvbiAoeCwgeSwgcmVzb2x1dGlvbiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICB2YXIgeiA9IHRoaXMuZ2V0WkZvclJlc29sdXRpb24ocmVzb2x1dGlvbik7XG4gICAgICAgIHZhciBzY2FsZSA9IHJlc29sdXRpb24gLyB0aGlzLmdldFJlc29sdXRpb24oeik7XG4gICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLmdldE9yaWdpbih6KTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRoaXMuZ2V0VGlsZVNpemUoeiksIHRoaXMudG1wU2l6ZV8pO1xuICAgICAgICB2YXIgYWRqdXN0WCA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgYWRqdXN0WSA9IHJldmVyc2VJbnRlcnNlY3Rpb25Qb2xpY3kgPyAwLjUgOiAwO1xuICAgICAgICB2YXIgeEZyb21PcmlnaW4gPSBNYXRoLmZsb29yKCh4IC0gb3JpZ2luWzBdKSAvIHJlc29sdXRpb24gKyBhZGp1c3RYKTtcbiAgICAgICAgdmFyIHlGcm9tT3JpZ2luID0gTWF0aC5mbG9vcigob3JpZ2luWzFdIC0geSkgLyByZXNvbHV0aW9uICsgYWRqdXN0WSk7XG4gICAgICAgIHZhciB0aWxlQ29vcmRYID0gKHNjYWxlICogeEZyb21PcmlnaW4pIC8gdGlsZVNpemVbMF07XG4gICAgICAgIHZhciB0aWxlQ29vcmRZID0gKHNjYWxlICogeUZyb21PcmlnaW4pIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5jZWlsKHRpbGVDb29yZFgpIC0gMTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBBbHRob3VnaCB0aGVyZSBpcyByZXBldGl0aW9uIGJldHdlZW4gdGhpcyBtZXRob2QgYW5kIGBnZXRUaWxlQ29vcmRGb3JYWUFuZFJlc29sdXRpb25fYCxcbiAgICAgKiB0aGV5IHNob3VsZCBoYXZlIHNlcGFyYXRlIGltcGxlbWVudGF0aW9ucy4gIFRoaXMgbWV0aG9kIGlzIGZvciBpbnRlZ2VyIHpvb21cbiAgICAgKiBsZXZlbHMuICBUaGUgb3RoZXIgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmb3IgcmVzb2x1dGlvbnMgY29ycmVzcG9uZGluZ1xuICAgICAqIHRvIG5vbi1pbnRlZ2VyIHpvb20gbGV2ZWxzLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IE1hcCB4IGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgTWFwIHkgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBJbnRlZ2VyIHpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtib29sZWFufSByZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5IEluc3RlYWQgb2YgbGV0dGluZyBlZGdlXG4gICAgICogICAgIGludGVyc2VjdGlvbnMgZ28gdG8gdGhlIGhpZ2hlciB0aWxlIGNvb3JkaW5hdGUsIGxldCBlZGdlIGludGVyc2VjdGlvbnNcbiAgICAgKiAgICAgZ28gdG8gdGhlIGxvd2VyIHRpbGUgY29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IFtvcHRfdGlsZUNvb3JkXSBUZW1wb3JhcnkgaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZEZvclhZQW5kWl8gPSBmdW5jdGlvbiAoeCwgeSwgeiwgcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSwgb3B0X3RpbGVDb29yZCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5nZXRPcmlnaW4oeik7XG4gICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKHopO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSB0b1NpemUodGhpcy5nZXRUaWxlU2l6ZSh6KSwgdGhpcy50bXBTaXplXyk7XG4gICAgICAgIHZhciBhZGp1c3RYID0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSA/IDAuNSA6IDA7XG4gICAgICAgIHZhciBhZGp1c3RZID0gcmV2ZXJzZUludGVyc2VjdGlvblBvbGljeSA/IDAuNSA6IDA7XG4gICAgICAgIHZhciB4RnJvbU9yaWdpbiA9IE1hdGguZmxvb3IoKHggLSBvcmlnaW5bMF0pIC8gcmVzb2x1dGlvbiArIGFkanVzdFgpO1xuICAgICAgICB2YXIgeUZyb21PcmlnaW4gPSBNYXRoLmZsb29yKChvcmlnaW5bMV0gLSB5KSAvIHJlc29sdXRpb24gKyBhZGp1c3RZKTtcbiAgICAgICAgdmFyIHRpbGVDb29yZFggPSB4RnJvbU9yaWdpbiAvIHRpbGVTaXplWzBdO1xuICAgICAgICB2YXIgdGlsZUNvb3JkWSA9IHlGcm9tT3JpZ2luIC8gdGlsZVNpemVbMV07XG4gICAgICAgIGlmIChyZXZlcnNlSW50ZXJzZWN0aW9uUG9saWN5KSB7XG4gICAgICAgICAgICB0aWxlQ29vcmRYID0gTWF0aC5jZWlsKHRpbGVDb29yZFgpIC0gMTtcbiAgICAgICAgICAgIHRpbGVDb29yZFkgPSBNYXRoLmNlaWwodGlsZUNvb3JkWSkgLSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGlsZUNvb3JkWCA9IE1hdGguZmxvb3IodGlsZUNvb3JkWCk7XG4gICAgICAgICAgICB0aWxlQ29vcmRZID0gTWF0aC5mbG9vcih0aWxlQ29vcmRZKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3JlYXRlT3JVcGRhdGVUaWxlQ29vcmQoeiwgdGlsZUNvb3JkWCwgdGlsZUNvb3JkWSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBHZXQgYSB0aWxlIGNvb3JkaW5hdGUgZ2l2ZW4gYSBtYXAgY29vcmRpbmF0ZSBhbmQgem9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL2Nvb3JkaW5hdGUuanNcIikuQ29vcmRpbmF0ZX0gY29vcmRpbmF0ZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFpvb20gbGV2ZWwuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBbb3B0X3RpbGVDb29yZF0gRGVzdGluYXRpb24gaW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZCBvYmplY3QuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlR3JpZC5wcm90b3R5cGUuZ2V0VGlsZUNvb3JkRm9yQ29vcmRBbmRaID0gZnVuY3Rpb24gKGNvb3JkaW5hdGUsIHosIG9wdF90aWxlQ29vcmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGlsZUNvb3JkRm9yWFlBbmRaXyhjb29yZGluYXRlWzBdLCBjb29yZGluYXRlWzFdLCB6LCBmYWxzZSwgb3B0X3RpbGVDb29yZCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBUaWxlIHJlc29sdXRpb24uXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVDb29yZFJlc29sdXRpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdXRpb25zX1t0aWxlQ29vcmRbMF1dO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB0aWxlIHNpemUgZm9yIGEgem9vbSBsZXZlbC4gVGhlIHR5cGUgb2YgdGhlIHJldHVybiB2YWx1ZSBtYXRjaGVzIHRoZVxuICAgICAqIGB0aWxlU2l6ZWAgb3IgYHRpbGVTaXplc2AgdGhhdCB0aGUgdGlsZSBncmlkIHdhcyBjb25maWd1cmVkIHdpdGguIFRvIGFsd2F5c1xuICAgICAqIGdldCBhbiBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplYCwgcnVuIHRoZSByZXN1bHQgdGhyb3VnaCBgaW1wb3J0KFwiLi4vc2l6ZS5qc1wiKS5TaXplLnRvU2l6ZSgpYC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBaLlxuICAgICAqIEByZXR1cm4ge251bWJlcnxpbXBvcnQoXCIuLi9zaXplLmpzXCIpLlNpemV9IFRpbGUgc2l6ZS5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVGlsZUdyaWQucHJvdG90eXBlLmdldFRpbGVTaXplID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKHRoaXMudGlsZVNpemVfKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZV87XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlU2l6ZXNfW3pdO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBab29tIGxldmVsLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSBFeHRlbnQgdGlsZSByYW5nZSBmb3IgdGhlIHNwZWNpZmllZCB6b29tIGxldmVsLlxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRGdWxsVGlsZVJhbmdlID0gZnVuY3Rpb24gKHopIHtcbiAgICAgICAgaWYgKCF0aGlzLmZ1bGxUaWxlUmFuZ2VzXykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXh0ZW50X1xuICAgICAgICAgICAgICAgID8gdGhpcy5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKHRoaXMuZXh0ZW50XywgeilcbiAgICAgICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mdWxsVGlsZVJhbmdlc19bel07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByZXNvbHV0aW9uIFJlc29sdXRpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbb3B0X2RpcmVjdGlvbl1cbiAgICAgKiAgICAgSWYgMCwgdGhlIG5lYXJlc3QgcmVzb2x1dGlvbiB3aWxsIGJlIHVzZWQuXG4gICAgICogICAgIElmIDEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIChsb3dlciBaKSB3aWxsIGJlIHVzZWQuIElmIC0xLCB0aGVcbiAgICAgKiAgICAgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uIChoaWdoZXIgWikgd2lsbCBiZSB1c2VkLiBEZWZhdWx0IGlzIDAuXG4gICAgICogICAgIFVzZSBhIHtAbGluayBtb2R1bGU6b2wvYXJyYXl+TmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBmb3IgbW9yZSBwcmVjaXNlIGNvbnRyb2wuXG4gICAgICpcbiAgICAgKiBGb3IgZXhhbXBsZSB0byBjaGFuZ2UgdGlsZSBaIGF0IHRoZSBtaWRwb2ludCBvZiB6b29tIGxldmVsc1xuICAgICAqIGBgYGpzXG4gICAgICogZnVuY3Rpb24odmFsdWUsIGhpZ2gsIGxvdykge1xuICAgICAqICAgcmV0dXJuIHZhbHVlIC0gbG93ICogTWF0aC5zcXJ0KGhpZ2ggLyBsb3cpO1xuICAgICAqIH1cbiAgICAgKiBgYGBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFouXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5nZXRaRm9yUmVzb2x1dGlvbiA9IGZ1bmN0aW9uIChyZXNvbHV0aW9uLCBvcHRfZGlyZWN0aW9uKSB7XG4gICAgICAgIHZhciB6ID0gbGluZWFyRmluZE5lYXJlc3QodGhpcy5yZXNvbHV0aW9uc18sIHJlc29sdXRpb24sIG9wdF9kaXJlY3Rpb24gfHwgMCk7XG4gICAgICAgIHJldHVybiBjbGFtcCh6LCB0aGlzLm1pblpvb20sIHRoaXMubWF4Wm9vbSk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50IGZvciB0aGlzIHRpbGUgZ3JpZC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVHcmlkLnByb3RvdHlwZS5jYWxjdWxhdGVUaWxlUmFuZ2VzXyA9IGZ1bmN0aW9uIChleHRlbnQpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMucmVzb2x1dGlvbnNfLmxlbmd0aDtcbiAgICAgICAgdmFyIGZ1bGxUaWxlUmFuZ2VzID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgIGZvciAodmFyIHogPSB0aGlzLm1pblpvb207IHogPCBsZW5ndGg7ICsreikge1xuICAgICAgICAgICAgZnVsbFRpbGVSYW5nZXNbel0gPSB0aGlzLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZ1bGxUaWxlUmFuZ2VzXyA9IGZ1bGxUaWxlUmFuZ2VzO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVHcmlkO1xufSgpKTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVHcmlkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VGlsZUdyaWQuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3RpbGVncmlkXG4gKi9cbmltcG9ydCBDb3JuZXIgZnJvbSAnLi9leHRlbnQvQ29ybmVyLmpzJztcbmltcG9ydCBUaWxlR3JpZCBmcm9tICcuL3RpbGVncmlkL1RpbGVHcmlkLmpzJztcbmltcG9ydCBVbml0cyBmcm9tICcuL3Byb2ovVW5pdHMuanMnO1xuaW1wb3J0IHsgREVGQVVMVF9NQVhfWk9PTSwgREVGQVVMVF9USUxFX1NJWkUgfSBmcm9tICcuL3RpbGVncmlkL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBNRVRFUlNfUEVSX1VOSVQsIGdldCBhcyBnZXRQcm9qZWN0aW9uIH0gZnJvbSAnLi9wcm9qLmpzJztcbmltcG9ydCB7IGNvbnRhaW5zQ29vcmRpbmF0ZSwgY3JlYXRlT3JVcGRhdGUsIGdldENvcm5lciwgZ2V0SGVpZ2h0LCBnZXRXaWR0aCwgfSBmcm9tICcuL2V4dGVudC5qcyc7XG5pbXBvcnQgeyB0b1NpemUgfSBmcm9tICcuL3NpemUuanMnO1xuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gRGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZVxuICogcGFzc2VkIHByb2plY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pIHtcbiAgICB2YXIgdGlsZUdyaWQgPSBwcm9qZWN0aW9uLmdldERlZmF1bHRUaWxlR3JpZCgpO1xuICAgIGlmICghdGlsZUdyaWQpIHtcbiAgICAgICAgdGlsZUdyaWQgPSBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICBwcm9qZWN0aW9uLnNldERlZmF1bHRUaWxlR3JpZCh0aWxlR3JpZCk7XG4gICAgfVxuICAgIHJldHVybiB0aWxlR3JpZDtcbn1cbi8qKlxuICogQHBhcmFtIHtUaWxlR3JpZH0gdGlsZUdyaWQgVGlsZSBncmlkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gVGlsZSBjb29yZGluYXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gd3JhcFgodGlsZUdyaWQsIHRpbGVDb29yZCwgcHJvamVjdGlvbikge1xuICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgIHZhciBjZW50ZXIgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRDZW50ZXIodGlsZUNvb3JkKTtcbiAgICB2YXIgcHJvamVjdGlvbkV4dGVudCA9IGV4dGVudEZyb21Qcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgIGlmICghY29udGFpbnNDb29yZGluYXRlKHByb2plY3Rpb25FeHRlbnQsIGNlbnRlcikpIHtcbiAgICAgICAgdmFyIHdvcmxkV2lkdGggPSBnZXRXaWR0aChwcm9qZWN0aW9uRXh0ZW50KTtcbiAgICAgICAgdmFyIHdvcmxkc0F3YXkgPSBNYXRoLmNlaWwoKHByb2plY3Rpb25FeHRlbnRbMF0gLSBjZW50ZXJbMF0pIC8gd29ybGRXaWR0aCk7XG4gICAgICAgIGNlbnRlclswXSArPSB3b3JsZFdpZHRoICogd29ybGRzQXdheTtcbiAgICAgICAgcmV0dXJuIHRpbGVHcmlkLmdldFRpbGVDb29yZEZvckNvb3JkQW5kWihjZW50ZXIsIHopO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRpbGVDb29yZDtcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBleHRlbnQgRXh0ZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRfbWF4Wm9vbV0gTWF4aW11bSB6b29tIGxldmVsIChkZWZhdWx0IGlzXG4gKiAgICAgREVGQVVMVF9NQVhfWk9PTSkuXG4gKiBAcGFyYW0ge251bWJlcnxpbXBvcnQoXCIuL3NpemUuanNcIikuU2l6ZX0gW29wdF90aWxlU2l6ZV0gVGlsZSBzaXplIChkZWZhdWx0IHVzZXNcbiAqICAgICBERUZBVUxUX1RJTEVfU0laRSkuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vZXh0ZW50L0Nvcm5lci5qc1wiKS5kZWZhdWx0fSBbb3B0X2Nvcm5lcl0gRXh0ZW50IGNvcm5lciAoZGVmYXVsdCBpcyBgJ3RvcC1sZWZ0J2ApLlxuICogQHJldHVybiB7IVRpbGVHcmlkfSBUaWxlR3JpZCBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgY29ybmVyID0gb3B0X2Nvcm5lciAhPT0gdW5kZWZpbmVkID8gb3B0X2Nvcm5lciA6IENvcm5lci5UT1BfTEVGVDtcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSByZXNvbHV0aW9uc0Zyb21FeHRlbnQoZXh0ZW50LCBvcHRfbWF4Wm9vbSwgb3B0X3RpbGVTaXplKTtcbiAgICByZXR1cm4gbmV3IFRpbGVHcmlkKHtcbiAgICAgICAgZXh0ZW50OiBleHRlbnQsXG4gICAgICAgIG9yaWdpbjogZ2V0Q29ybmVyKGV4dGVudCwgY29ybmVyKSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zLFxuICAgICAgICB0aWxlU2l6ZTogb3B0X3RpbGVTaXplLFxuICAgIH0pO1xufVxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBYWVpPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vZXh0ZW50LmpzXCIpLkV4dGVudH0gW2V4dGVudF0gRXh0ZW50IGZvciB0aGUgdGlsZSBncmlkLiBUaGUgb3JpZ2luIGZvciBhbiBYWVogdGlsZSBncmlkIGlzIHRoZVxuICogdG9wLWxlZnQgY29ybmVyIG9mIHRoZSBleHRlbnQuIElmIGBtYXhSZXNvbHV0aW9uYCBpcyBub3QgcHJvdmlkZWQgdGhlIHplcm8gbGV2ZWwgb2YgdGhlIGdyaWQgaXMgZGVmaW5lZCBieSB0aGUgcmVzb2x1dGlvblxuICogYXQgd2hpY2ggb25lIHRpbGUgZml0cyBpbiB0aGUgcHJvdmlkZWQgZXh0ZW50LiBJZiBub3QgcHJvdmlkZWQsIHRoZSBleHRlbnQgb2YgdGhlIEVQU0c6Mzg1NyBwcm9qZWN0aW9uIGlzIHVzZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbV0gTWF4aW11bSB6b29tLiBUaGUgZGVmYXVsdCBpcyBgNDJgLiBUaGlzIGRldGVybWluZXMgdGhlIG51bWJlciBvZiBsZXZlbHNcbiAqIGluIHRoZSBncmlkIHNldC4gRm9yIGV4YW1wbGUsIGEgYG1heFpvb21gIG9mIDIxIG1lYW5zIHRoZXJlIGFyZSAyMiBsZXZlbHMgaW4gdGhlIGdyaWQgc2V0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttaW5ab29tPTBdIE1pbmltdW0gem9vbS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbdGlsZVNpemU9WzI1NiwgMjU2XV0gVGlsZSBzaXplIGluIHBpeGVscy5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgdGlsZSBncmlkIHdpdGggYSBzdGFuZGFyZCBYWVogdGlsaW5nIHNjaGVtZS5cbiAqIEBwYXJhbSB7WFlaT3B0aW9uc30gW29wdF9vcHRpb25zXSBUaWxlIGdyaWQgb3B0aW9ucy5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZSBncmlkIGluc3RhbmNlLlxuICogQGFwaVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlWFlaKG9wdF9vcHRpb25zKSB7XG4gICAgdmFyIHh5ek9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgZXh0ZW50ID0geHl6T3B0aW9ucy5leHRlbnQgfHwgZ2V0UHJvamVjdGlvbignRVBTRzozODU3JykuZ2V0RXh0ZW50KCk7XG4gICAgdmFyIGdyaWRPcHRpb25zID0ge1xuICAgICAgICBleHRlbnQ6IGV4dGVudCxcbiAgICAgICAgbWluWm9vbTogeHl6T3B0aW9ucy5taW5ab29tLFxuICAgICAgICB0aWxlU2l6ZTogeHl6T3B0aW9ucy50aWxlU2l6ZSxcbiAgICAgICAgcmVzb2x1dGlvbnM6IHJlc29sdXRpb25zRnJvbUV4dGVudChleHRlbnQsIHh5ek9wdGlvbnMubWF4Wm9vbSwgeHl6T3B0aW9ucy50aWxlU2l6ZSwgeHl6T3B0aW9ucy5tYXhSZXNvbHV0aW9uKSxcbiAgICB9O1xuICAgIHJldHVybiBuZXcgVGlsZUdyaWQoZ3JpZE9wdGlvbnMpO1xufVxuLyoqXG4gKiBDcmVhdGUgYSByZXNvbHV0aW9ucyBhcnJheSBmcm9tIGFuIGV4dGVudC4gIEEgem9vbSBmYWN0b3Igb2YgMiBpcyBhc3N1bWVkLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC5qc1wiKS5FeHRlbnR9IGV4dGVudCBFeHRlbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdF9tYXhab29tXSBNYXhpbXVtIHpvb20gbGV2ZWwgKGRlZmF1bHQgaXNcbiAqICAgICBERUZBVUxUX01BWF9aT09NKS5cbiAqIEBwYXJhbSB7bnVtYmVyfGltcG9ydChcIi4vc2l6ZS5qc1wiKS5TaXplfSBbb3B0X3RpbGVTaXplXSBUaWxlIHNpemUgKGRlZmF1bHQgdXNlc1xuICogICAgIERFRkFVTFRfVElMRV9TSVpFKS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFJlc29sdXRpb25dIFJlc29sdXRpb24gYXQgbGV2ZWwgemVyby5cbiAqIEByZXR1cm4geyFBcnJheTxudW1iZXI+fSBSZXNvbHV0aW9ucyBhcnJheS5cbiAqL1xuZnVuY3Rpb24gcmVzb2x1dGlvbnNGcm9tRXh0ZW50KGV4dGVudCwgb3B0X21heFpvb20sIG9wdF90aWxlU2l6ZSwgb3B0X21heFJlc29sdXRpb24pIHtcbiAgICB2YXIgbWF4Wm9vbSA9IG9wdF9tYXhab29tICE9PSB1bmRlZmluZWQgPyBvcHRfbWF4Wm9vbSA6IERFRkFVTFRfTUFYX1pPT007XG4gICAgdmFyIGhlaWdodCA9IGdldEhlaWdodChleHRlbnQpO1xuICAgIHZhciB3aWR0aCA9IGdldFdpZHRoKGV4dGVudCk7XG4gICAgdmFyIHRpbGVTaXplID0gdG9TaXplKG9wdF90aWxlU2l6ZSAhPT0gdW5kZWZpbmVkID8gb3B0X3RpbGVTaXplIDogREVGQVVMVF9USUxFX1NJWkUpO1xuICAgIHZhciBtYXhSZXNvbHV0aW9uID0gb3B0X21heFJlc29sdXRpb24gPiAwXG4gICAgICAgID8gb3B0X21heFJlc29sdXRpb25cbiAgICAgICAgOiBNYXRoLm1heCh3aWR0aCAvIHRpbGVTaXplWzBdLCBoZWlnaHQgLyB0aWxlU2l6ZVsxXSk7XG4gICAgdmFyIGxlbmd0aCA9IG1heFpvb20gKyAxO1xuICAgIHZhciByZXNvbHV0aW9ucyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIHogPSAwOyB6IDwgbGVuZ3RoOyArK3opIHtcbiAgICAgICAgcmVzb2x1dGlvbnNbel0gPSBtYXhSZXNvbHV0aW9uIC8gTWF0aC5wb3coMiwgeik7XG4gICAgfVxuICAgIHJldHVybiByZXNvbHV0aW9ucztcbn1cbi8qKlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0X21heFpvb21dIE1heGltdW0gem9vbSBsZXZlbCAoZGVmYXVsdCBpc1xuICogICAgIERFRkFVTFRfTUFYX1pPT00pLlxuICogQHBhcmFtIHtudW1iZXJ8aW1wb3J0KFwiLi9zaXplLmpzXCIpLlNpemV9IFtvcHRfdGlsZVNpemVdIFRpbGUgc2l6ZSAoZGVmYXVsdCB1c2VzXG4gKiAgICAgREVGQVVMVF9USUxFX1NJWkUpLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL2V4dGVudC9Db3JuZXIuanNcIikuZGVmYXVsdH0gW29wdF9jb3JuZXJdIEV4dGVudCBjb3JuZXIgKGRlZmF1bHQgaXMgYCd0b3AtbGVmdCdgKS5cbiAqIEByZXR1cm4geyFUaWxlR3JpZH0gVGlsZUdyaWQgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24sIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpIHtcbiAgICB2YXIgZXh0ZW50ID0gZXh0ZW50RnJvbVByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgcmV0dXJuIGNyZWF0ZUZvckV4dGVudChleHRlbnQsIG9wdF9tYXhab29tLCBvcHRfdGlsZVNpemUsIG9wdF9jb3JuZXIpO1xufVxuLyoqXG4gKiBHZW5lcmF0ZSBhIHRpbGUgZ3JpZCBleHRlbnQgZnJvbSBhIHByb2plY3Rpb24uICBJZiB0aGUgcHJvamVjdGlvbiBoYXMgYW5cbiAqIGV4dGVudCwgaXQgaXMgdXNlZC4gIElmIG5vdCwgYSBnbG9iYWwgZXh0ZW50IGlzIGFzc3VtZWQuXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICogQHJldHVybiB7aW1wb3J0KFwiLi9leHRlbnQuanNcIikuRXh0ZW50fSBFeHRlbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSB7XG4gICAgcHJvamVjdGlvbiA9IGdldFByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgdmFyIGV4dGVudCA9IHByb2plY3Rpb24uZ2V0RXh0ZW50KCk7XG4gICAgaWYgKCFleHRlbnQpIHtcbiAgICAgICAgdmFyIGhhbGYgPSAoMTgwICogTUVURVJTX1BFUl9VTklUW1VuaXRzLkRFR1JFRVNdKSAvIHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xuICAgICAgICBleHRlbnQgPSBjcmVhdGVPclVwZGF0ZSgtaGFsZiwgLWhhbGYsIGhhbGYsIGhhbGYpO1xuICAgIH1cbiAgICByZXR1cm4gZXh0ZW50O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZWdyaWQuanMubWFwIiwidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbi8qKlxuICogQG1vZHVsZSBvbC9zb3VyY2UvVGlsZVxuICovXG5pbXBvcnQgRXZlbnQgZnJvbSAnLi4vZXZlbnRzL0V2ZW50LmpzJztcbmltcG9ydCBTb3VyY2UgZnJvbSAnLi9Tb3VyY2UuanMnO1xuaW1wb3J0IFRpbGVDYWNoZSBmcm9tICcuLi9UaWxlQ2FjaGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IHsgYWJzdHJhY3QgfSBmcm9tICcuLi91dGlsLmpzJztcbmltcG9ydCB7IGFzc2VydCB9IGZyb20gJy4uL2Fzc2VydHMuanMnO1xuaW1wb3J0IHsgZXF1aXZhbGVudCB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0S2V5WlhZLCB3aXRoaW5FeHRlbnRBbmRaIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldEZvclByb2plY3Rpb24gYXMgZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLCB3cmFwWCwgfSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5pbXBvcnQgeyBzY2FsZSBhcyBzY2FsZVNpemUsIHRvU2l6ZSB9IGZyb20gJy4uL3NpemUuanMnO1xuLyoqKlxuICogQHRlbXBsYXRlIFJldHVyblxuICogQHR5cGVkZWYge2ltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5FdmVudFR5cGVzLCBpbXBvcnQoXCIuLi9ldmVudHMvRXZlbnQuanNcIikuZGVmYXVsdCwgUmV0dXJuPiAmXG4gKiAgIGltcG9ydChcIi4uL09ic2VydmFibGVcIikuT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JqZWN0RXZlbnRUeXBlXCIpLlR5cGVzLCBpbXBvcnQoXCIuLi9PYmplY3RcIikuT2JqZWN0RXZlbnQsIFJldHVybj4gJlxuICogICBpbXBvcnQoXCIuLi9PYnNlcnZhYmxlXCIpLk9uU2lnbmF0dXJlPGltcG9ydChcIi4vVGlsZUV2ZW50VHlwZVwiKS5UaWxlU291cmNlRXZlbnRUeXBlcywgVGlsZVNvdXJjZUV2ZW50LCBSZXR1cm4+ICZcbiAqICAgaW1wb3J0KFwiLi4vT2JzZXJ2YWJsZVwiKS5Db21iaW5lZE9uU2lnbmF0dXJlPGltcG9ydChcIi4uL09ic2VydmFibGVcIikuRXZlbnRUeXBlc3xpbXBvcnQoXCIuLi9PYmplY3RFdmVudFR5cGVcIikuVHlwZXN8XG4gKiAgICAgaW1wb3J0KFwiLi9UaWxlRXZlbnRUeXBlXCIpLlRpbGVTb3VyY2VFdmVudFR5cGVzLCBSZXR1cm4+fSBUaWxlU291cmNlT25TaWduYXR1cmVcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBDYWNoZVNpemUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW9dIFRpbGVQaXhlbFJhdGlvLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9wcm9qLmpzXCIpLlByb2plY3Rpb25MaWtlfSBbcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi9TdGF0ZS5qc1wiKS5kZWZhdWx0fSBbc3RhdGVdIFN0YXRlLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSBbdGlsZUdyaWRdIFRpbGVHcmlkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbd3JhcFg9dHJ1ZV0gV3JhcFguXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RyYW5zaXRpb25dIFRyYW5zaXRpb24uXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2tleV0gS2V5LlxuICogQHByb3BlcnR5IHtudW1iZXJ8aW1wb3J0KFwiLi4vYXJyYXkuanNcIikuTmVhcmVzdERpcmVjdGlvbkZ1bmN0aW9ufSBbekRpcmVjdGlvbj0wXSBaRGlyZWN0aW9uLlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIEFic3RyYWN0IGJhc2UgY2xhc3M7IG5vcm1hbGx5IG9ubHkgdXNlZCBmb3IgY3JlYXRpbmcgc3ViY2xhc3NlcyBhbmQgbm90XG4gKiBpbnN0YW50aWF0ZWQgaW4gYXBwcy5cbiAqIEJhc2UgY2xhc3MgZm9yIHNvdXJjZXMgcHJvdmlkaW5nIGltYWdlcyBkaXZpZGVkIGludG8gYSB0aWxlIGdyaWQuXG4gKiBAYWJzdHJhY3RcbiAqIEBhcGlcbiAqL1xudmFyIFRpbGVTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVTb3VyY2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBvcHRpb25zIFNvdXJjZVRpbGUgc291cmNlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZVNvdXJjZShvcHRpb25zKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbixcbiAgICAgICAgICAgIHN0YXRlOiBvcHRpb25zLnN0YXRlLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFgsXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIC8qKipcbiAgICAgICAgICogQHR5cGUge1RpbGVTb3VyY2VPblNpZ25hdHVyZTxpbXBvcnQoXCIuLi9PYnNlcnZhYmxlLmpzXCIpLk9uUmV0dXJuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLm9uO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8aW1wb3J0KFwiLi4vT2JzZXJ2YWJsZS5qc1wiKS5PblJldHVybj59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5vbmNlO1xuICAgICAgICAvKioqXG4gICAgICAgICAqIEB0eXBlIHtUaWxlU291cmNlT25TaWduYXR1cmU8dm9pZD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy51bjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMub3BhcXVlXyA9IG9wdGlvbnMub3BhcXVlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm9wYXF1ZSA6IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVQaXhlbFJhdGlvXyA9XG4gICAgICAgICAgICBvcHRpb25zLnRpbGVQaXhlbFJhdGlvICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnRpbGVQaXhlbFJhdGlvIDogMTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlR3JpZCA9IG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUdyaWQgOiBudWxsO1xuICAgICAgICB2YXIgdGlsZVNpemUgPSBbMjU2LCAyNTZdO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSBvcHRpb25zLnRpbGVHcmlkO1xuICAgICAgICBpZiAodGlsZUdyaWQpIHtcbiAgICAgICAgICAgIHRvU2l6ZSh0aWxlR3JpZC5nZXRUaWxlU2l6ZSh0aWxlR3JpZC5nZXRNaW5ab29tKCkpLCB0aWxlU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZUNhY2hlID0gbmV3IFRpbGVDYWNoZShvcHRpb25zLmNhY2hlU2l6ZSB8fCAwKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRtcFNpemUgPSBbMCwgMF07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMua2V5XyA9IG9wdGlvbnMua2V5IHx8ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5PcHRpb25zfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudGlsZU9wdGlvbnMgPSB7IHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbiB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogekRpcmVjdGlvbiBoaW50LCByZWFkIGJ5IHRoZSByZW5kZXJlci4gSW5kaWNhdGVzIHdoaWNoIHJlc29sdXRpb24gc2hvdWxkIGJlIHVzZWRcbiAgICAgICAgICogYnkgYSByZW5kZXJlciBpZiB0aGUgdmlld3MgcmVzb2x1dGlvbiBkb2VzIG5vdCBtYXRjaCBhbnkgcmVzb2x1dGlvbiBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICAgICAqIElmIDAsIHRoZSBuZWFyZXN0IHJlc29sdXRpb24gd2lsbCBiZSB1c2VkLiBJZiAxLCB0aGUgbmVhcmVzdCBsb3dlciByZXNvbHV0aW9uXG4gICAgICAgICAqIHdpbGwgYmUgdXNlZC4gSWYgLTEsIHRoZSBuZWFyZXN0IGhpZ2hlciByZXNvbHV0aW9uIHdpbGwgYmUgdXNlZC5cbiAgICAgICAgICogQHR5cGUge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy56RGlyZWN0aW9uID0gb3B0aW9ucy56RGlyZWN0aW9uID8gb3B0aW9ucy56RGlyZWN0aW9uIDogMDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlQ2FjaGUuY2FuRXhwaXJlQ2FjaGUoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn0gdXNlZFRpbGVzIFVzZWQgdGlsZXMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIGlmICh0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHRpbGVDYWNoZS5leHBpcmVDYWNoZSh1c2VkVGlsZXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogWm9vbSBsZXZlbC5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGVSYW5nZS5qc1wiKS5kZWZhdWx0fSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKGltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdCk6KGJvb2xlYW58dm9pZCl9IGNhbGxiYWNrIENhbGxlZCB3aXRoIGVhY2hcbiAgICAgKiAgICAgbG9hZGVkIHRpbGUuICBJZiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLCB0aGUgdGlsZSB3aWxsIG5vdCBiZVxuICAgICAqICAgICBjb25zaWRlcmVkIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgdGlsZSByYW5nZSBpcyBmdWxseSBjb3ZlcmVkIHdpdGggbG9hZGVkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmZvckVhY2hMb2FkZWRUaWxlID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHosIHRpbGVSYW5nZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKCF0aWxlQ2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY292ZXJlZCA9IHRydWU7XG4gICAgICAgIHZhciB0aWxlLCB0aWxlQ29vcmRLZXksIGxvYWRlZDtcbiAgICAgICAgZm9yICh2YXIgeCA9IHRpbGVSYW5nZS5taW5YOyB4IDw9IHRpbGVSYW5nZS5tYXhYOyArK3gpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XG4gICAgICAgICAgICAgICAgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICAgICAgICAgIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aWxlID0gLyoqIEB0eXBlIHshaW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5kZWZhdWx0fSAqLyAodGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGVkID0gdGlsZS5nZXRTdGF0ZSgpID09PSBUaWxlU3RhdGUuTE9BREVEO1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSBjYWxsYmFjayh0aWxlKSAhPT0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY292ZXJlZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEd1dHRlci5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRHdXR0ZXJGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIGtleSB0byBiZSB1c2VkIGZvciBhbGwgdGlsZXMgaW4gdGhlIHNvdXJjZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBrZXkgZm9yIGFsbCB0aWxlcy5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB2YWx1ZSB0byBiZSB1c2VkIGFzIHRoZSBrZXkgZm9yIGFsbCB0aWxlcyBpbiB0aGUgc291cmNlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBmb3IgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnNldEtleSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgaWYgKHRoaXMua2V5XyAhPT0ga2V5KSB7XG4gICAgICAgICAgICB0aGlzLmtleV8gPSBrZXk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRPcGFxdWUgPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcGFxdWVfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7QXJyYXk8bnVtYmVyPn0gUmVzb2x1dGlvbnMuXG4gICAgICovXG4gICAgVGlsZVNvdXJjZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkLmdldFJlc29sdXRpb25zKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAYWJzdHJhY3RcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGFic3RyYWN0KCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgZ3JpZCBvZiB0aGUgdGlsZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUdyaWQ7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFRpbGUgZ3JpZC5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24gPSBmdW5jdGlvbiAocHJvamVjdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMudGlsZUdyaWQpIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgYXNzZXJ0KGVxdWl2YWxlbnQodGhpcy5nZXRQcm9qZWN0aW9uKCksIHByb2plY3Rpb24pLCA2OCAvLyBBIFZlY3RvclRpbGUgc291cmNlIGNhbiBvbmx5IGJlIHJlbmRlcmVkIGlmIGl0IGhhcyBhIHByb2plY3Rpb24gY29tcGF0aWJsZSB3aXRoIHRoZSB2aWV3IHByb2plY3Rpb24uXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVDYWNoZTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEdldCB0aGUgdGlsZSBwaXhlbCByYXRpbyBmb3IgdGhpcyBzb3VyY2UuIFN1YmNsYXNzZXMgbWF5IG92ZXJyaWRlIHRoaXNcbiAgICAgKiBtZXRob2QsIHdoaWNoIGlzIG1lYW50IHRvIHJldHVybiBhIHN1cHBvcnRlZCBwaXhlbCByYXRpbyB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcHJvdmlkZWQgYHBpeGVsUmF0aW9gIGFzIGNsb3NlIGFzIHBvc3NpYmxlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gVGlsZSBwaXhlbCByYXRpby5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlUGl4ZWxSYXRpbyA9IGZ1bmN0aW9uIChwaXhlbFJhdGlvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVQaXhlbFJhdGlvXztcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gVGlsZSBzaXplLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLmdldFRpbGVQaXhlbFNpemUgPSBmdW5jdGlvbiAoeiwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgdmFyIHRpbGVQaXhlbFJhdGlvID0gdGhpcy5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcbiAgICAgICAgdmFyIHRpbGVTaXplID0gdG9TaXplKHRpbGVHcmlkLmdldFRpbGVTaXplKHopLCB0aGlzLnRtcFNpemUpO1xuICAgICAgICBpZiAodGlsZVBpeGVsUmF0aW8gPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRpbGVTaXplO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHNjYWxlU2l6ZSh0aWxlU2l6ZSwgdGlsZVBpeGVsUmF0aW8sIHRoaXMudG1wU2l6ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB0aWxlIGNvb3JkaW5hdGUgd3JhcHBlZCBhcm91bmQgdGhlIHgtYXhpcy4gV2hlbiB0aGUgdGlsZSBjb29yZGluYXRlXG4gICAgICogaXMgb3V0c2lkZSB0aGUgcmVzb2x1dGlvbiBhbmQgZXh0ZW50IHJhbmdlIG9mIHRoZSB0aWxlIGdyaWQsIGBudWxsYCB3aWxsIGJlXG4gICAgICogcmV0dXJuZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBjb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IFtvcHRfcHJvamVjdGlvbl0gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtpbXBvcnQoXCIuLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSBUaWxlIGNvb3JkaW5hdGUgdG8gYmUgcGFzc2VkIHRvIHRoZSB0aWxlVXJsRnVuY3Rpb24gb3JcbiAgICAgKiAgICAgbnVsbCBpZiBubyB0aWxlIFVSTCBzaG91bGQgYmUgY3JlYXRlZCBmb3IgdGhlIHBhc3NlZCBgdGlsZUNvb3JkYC5cbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5nZXRUaWxlQ29vcmRGb3JUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUNvb3JkLCBvcHRfcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IG9wdF9wcm9qZWN0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRfcHJvamVjdGlvbiA6IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICB2YXIgdGlsZUdyaWQgPSB0aGlzLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRoaXMuZ2V0V3JhcFgoKSAmJiBwcm9qZWN0aW9uLmlzR2xvYmFsKCkpIHtcbiAgICAgICAgICAgIHRpbGVDb29yZCA9IHdyYXBYKHRpbGVHcmlkLCB0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aXRoaW5FeHRlbnRBbmRaKHRpbGVDb29yZCwgdGlsZUdyaWQpID8gdGlsZUNvb3JkIDogbnVsbDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbGwgY2FjaGVkIHRpbGVzIGZyb20gdGhlIHNvdXJjZS4gVGhlIG5leHQgcmVuZGVyIGN5Y2xlIHdpbGwgZmV0Y2ggbmV3IHRpbGVzLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUaWxlU291cmNlLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50aWxlQ2FjaGUuY2xlYXIoKTtcbiAgICB9O1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBJbmNyZWFzZXMgdGhlIGNhY2hlIHNpemUgaWYgbmVlZGVkXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRpbGVDb3VudCBNaW5pbXVtIG51bWJlciBvZiB0aWxlcyBuZWVkZWQuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnVwZGF0ZUNhY2hlU2l6ZSA9IGZ1bmN0aW9uICh0aWxlQ291bnQsIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGVDYWNoZSA9IHRoaXMuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgaWYgKHRpbGVDb3VudCA+IHRpbGVDYWNoZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgICAgICAgICB0aWxlQ2FjaGUuaGlnaFdhdGVyTWFyayA9IHRpbGVDb3VudDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogTWFya3MgYSB0aWxlIGNvb3JkIGFzIGJlaW5nIHVzZWQsIHdpdGhvdXQgdHJpZ2dlcmluZyBhIGxvYWQuXG4gICAgICogQGFic3RyYWN0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqL1xuICAgIFRpbGVTb3VyY2UucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcHJvamVjdGlvbikgeyB9O1xuICAgIHJldHVybiBUaWxlU291cmNlO1xufShTb3VyY2UpKTtcbi8qKlxuICogQGNsYXNzZGVzY1xuICogRXZlbnRzIGVtaXR0ZWQgYnkge0BsaW5rIG1vZHVsZTpvbC9zb3VyY2UvVGlsZX5UaWxlU291cmNlfSBpbnN0YW5jZXMgYXJlIGluc3RhbmNlcyBvZiB0aGlzXG4gKiB0eXBlLlxuICovXG52YXIgVGlsZVNvdXJjZUV2ZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlU291cmNlRXZlbnQsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gdGlsZSBUaGUgdGlsZS5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUaWxlU291cmNlRXZlbnQodHlwZSwgdGlsZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB0eXBlKSB8fCB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpbGUgcmVsYXRlZCB0byB0aGUgZXZlbnQuXG4gICAgICAgICAqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9XG4gICAgICAgICAqIEBhcGlcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGUgPSB0aWxlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBUaWxlU291cmNlRXZlbnQ7XG59KEV2ZW50KSk7XG5leHBvcnQgeyBUaWxlU291cmNlRXZlbnQgfTtcbmV4cG9ydCBkZWZhdWx0IFRpbGVTb3VyY2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlLmpzLm1hcCIsIi8qKlxuICogQG1vZHVsZSBvbC90aWxldXJsZnVuY3Rpb25cbiAqL1xuaW1wb3J0IHsgYXNzZXJ0IH0gZnJvbSAnLi9hc3NlcnRzLmpzJztcbmltcG9ydCB7IG1vZHVsbyB9IGZyb20gJy4vbWF0aC5qcyc7XG5pbXBvcnQgeyBoYXNoIGFzIHRpbGVDb29yZEhhc2ggfSBmcm9tICcuL3RpbGVjb29yZC5qcyc7XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBUZW1wbGF0ZS5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCB0aWxlR3JpZCkge1xuICAgIHZhciB6UmVnRXggPSAvXFx7elxcfS9nO1xuICAgIHZhciB4UmVnRXggPSAvXFx7eFxcfS9nO1xuICAgIHZhciB5UmVnRXggPSAvXFx7eVxcfS9nO1xuICAgIHZhciBkYXNoWVJlZ0V4ID0gL1xcey15XFx9L2c7XG4gICAgcmV0dXJuIChcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgQ29vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiAodGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghdGlsZUNvb3JkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoelJlZ0V4LCB0aWxlQ29vcmRbMF0udG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSh4UmVnRXgsIHRpbGVDb29yZFsxXS50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKHlSZWdFeCwgdGlsZUNvb3JkWzJdLnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoZGFzaFlSZWdFeCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB6ID0gdGlsZUNvb3JkWzBdO1xuICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XG4gICAgICAgICAgICAgICAgYXNzZXJ0KHJhbmdlLCA1NSk7IC8vIFRoZSB7LXl9IHBsYWNlaG9sZGVyIHJlcXVpcmVzIGEgdGlsZSBncmlkIHdpdGggZXh0ZW50XG4gICAgICAgICAgICAgICAgdmFyIHkgPSByYW5nZS5nZXRIZWlnaHQoKSAtIHRpbGVDb29yZFsyXSAtIDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8c3RyaW5nPn0gdGVtcGxhdGVzIFRlbXBsYXRlcy5cbiAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlZ3JpZC9UaWxlR3JpZC5qc1wiKS5kZWZhdWx0fSB0aWxlR3JpZCBUaWxlIGdyaWQuXG4gKiBAcmV0dXJuIHtpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IFRpbGUgVVJMIGZ1bmN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJvbVRlbXBsYXRlcyh0ZW1wbGF0ZXMsIHRpbGVHcmlkKSB7XG4gICAgdmFyIGxlbiA9IHRlbXBsYXRlcy5sZW5ndGg7XG4gICAgdmFyIHRpbGVVcmxGdW5jdGlvbnMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICAgIHRpbGVVcmxGdW5jdGlvbnNbaV0gPSBjcmVhdGVGcm9tVGVtcGxhdGUodGVtcGxhdGVzW2ldLCB0aWxlR3JpZCk7XG4gICAgfVxuICAgIHJldHVybiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKTtcbn1cbi8qKlxuICogQHBhcmFtIHtBcnJheTxpbXBvcnQoXCIuL1RpbGUuanNcIikuVXJsRnVuY3Rpb24+fSB0aWxlVXJsRnVuY3Rpb25zIFRpbGUgVVJMIEZ1bmN0aW9ucy5cbiAqIEByZXR1cm4ge2ltcG9ydChcIi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZSBVUkwgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcm9tVGlsZVVybEZ1bmN0aW9ucyh0aWxlVXJsRnVuY3Rpb25zKSB7XG4gICAgaWYgKHRpbGVVcmxGdW5jdGlvbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB0aWxlVXJsRnVuY3Rpb25zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi90aWxlY29vcmQuanNcIikuVGlsZUNvb3JkfSB0aWxlQ29vcmQgVGlsZSBDb29yZGluYXRlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aWxlQ29vcmQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgaCA9IHRpbGVDb29yZEhhc2godGlsZUNvb3JkKTtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IG1vZHVsbyhoLCB0aWxlVXJsRnVuY3Rpb25zLmxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gdGlsZVVybEZ1bmN0aW9uc1tpbmRleF0odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLyoqXG4gKiBAcGFyYW0ge2ltcG9ydChcIi4vdGlsZWNvb3JkLmpzXCIpLlRpbGVDb29yZH0gdGlsZUNvb3JkIFRpbGUgY29vcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwaXhlbFJhdGlvIFBpeGVsIHJhdGlvLlxuICogQHBhcmFtIHtpbXBvcnQoXCIuL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gKiBAcmV0dXJuIHtzdHJpbmd8dW5kZWZpbmVkfSBUaWxlIFVSTC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG51bGxUaWxlVXJsRnVuY3Rpb24odGlsZUNvb3JkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBVUkwuXG4gKiBAcmV0dXJuIHtBcnJheTxzdHJpbmc+fSBBcnJheSBvZiB1cmxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kVXJsKHVybCkge1xuICAgIHZhciB1cmxzID0gW107XG4gICAgdmFyIG1hdGNoID0gL1xceyhbYS16XSktKFthLXpdKVxcfS8uZXhlYyh1cmwpO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgICAvLyBjaGFyIHJhbmdlXG4gICAgICAgIHZhciBzdGFydENoYXJDb2RlID0gbWF0Y2hbMV0uY2hhckNvZGVBdCgwKTtcbiAgICAgICAgdmFyIHN0b3BDaGFyQ29kZSA9IG1hdGNoWzJdLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHZhciBjaGFyQ29kZSA9IHZvaWQgMDtcbiAgICAgICAgZm9yIChjaGFyQ29kZSA9IHN0YXJ0Q2hhckNvZGU7IGNoYXJDb2RlIDw9IHN0b3BDaGFyQ29kZTsgKytjaGFyQ29kZSkge1xuICAgICAgICAgICAgdXJscy5wdXNoKHVybC5yZXBsYWNlKG1hdGNoWzBdLCBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoYXJDb2RlKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmxzO1xuICAgIH1cbiAgICBtYXRjaCA9IC9cXHsoXFxkKyktKFxcZCspXFx9Ly5leGVjKHVybCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIC8vIG51bWJlciByYW5nZVxuICAgICAgICB2YXIgc3RvcF8xID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7IGkgPD0gc3RvcF8xOyBpKyspIHtcbiAgICAgICAgICAgIHVybHMucHVzaCh1cmwucmVwbGFjZShtYXRjaFswXSwgaS50b1N0cmluZygpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybHM7XG4gICAgfVxuICAgIHVybHMucHVzaCh1cmwpO1xuICAgIHJldHVybiB1cmxzO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGlsZXVybGZ1bmN0aW9uLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1VybFRpbGVcbiAqL1xuaW1wb3J0IFRpbGVFdmVudFR5cGUgZnJvbSAnLi9UaWxlRXZlbnRUeXBlLmpzJztcbmltcG9ydCBUaWxlU291cmNlLCB7IFRpbGVTb3VyY2VFdmVudCB9IGZyb20gJy4vVGlsZS5qcyc7XG5pbXBvcnQgVGlsZVN0YXRlIGZyb20gJy4uL1RpbGVTdGF0ZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVGcm9tVGVtcGxhdGVzLCBleHBhbmRVcmwgfSBmcm9tICcuLi90aWxldXJsZnVuY3Rpb24uanMnO1xuaW1wb3J0IHsgZ2V0S2V5WlhZIH0gZnJvbSAnLi4vdGlsZWNvb3JkLmpzJztcbmltcG9ydCB7IGdldFVpZCB9IGZyb20gJy4uL3V0aWwuanMnO1xuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBPcHRpb25zXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4vU291cmNlLmpzXCIpLkF0dHJpYnV0aW9uTGlrZX0gW2F0dHJpYnV0aW9uc10gQXR0cmlidXRpb25zLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXR0cmlidXRpb25zQ29sbGFwc2libGU9dHJ1ZV0gQXR0cmlidXRpb25zIGFyZSBjb2xsYXBzaWJsZS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY2FjaGVTaXplXSBDYWNoZSBzaXplLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbb3BhcXVlPWZhbHNlXSBXaGV0aGVyIHRoZSBsYXllciBpcyBvcGFxdWUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3Byb2ouanNcIikuUHJvamVjdGlvbkxpa2V9IFtwcm9qZWN0aW9uXSBQcm9qZWN0aW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV0gU3RhdGUuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZUdyaWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSB0aWxlTG9hZEZ1bmN0aW9uIFRpbGVMb2FkRnVuY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3RpbGVQaXhlbFJhdGlvXSBUaWxlUGl4ZWxSYXRpby5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gVGlsZVVybEZ1bmN0aW9uLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt1cmxdIFVybC5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIFVybHMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXcmFwWC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbl0gVHJhbnNpdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5XSBLZXkuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdIFpEaXJlY3Rpb24uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgdGlsZXMgZGl2aWRlZCBpbnRvIGEgdGlsZSBncmlkIG92ZXIgaHR0cC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICovXG52YXIgVXJsVGlsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVXJsVGlsZSwgX3N1cGVyKTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09wdGlvbnN9IG9wdGlvbnMgSW1hZ2UgdGlsZSBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFVybFRpbGUob3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb25zLFxuICAgICAgICAgICAgY2FjaGVTaXplOiBvcHRpb25zLmNhY2hlU2l6ZSxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXG4gICAgICAgICAgICBzdGF0ZTogb3B0aW9ucy5zdGF0ZSxcbiAgICAgICAgICAgIHRpbGVHcmlkOiBvcHRpb25zLnRpbGVHcmlkLFxuICAgICAgICAgICAgdGlsZVBpeGVsUmF0aW86IG9wdGlvbnMudGlsZVBpeGVsUmF0aW8sXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuZ2VuZXJhdGVUaWxlVXJsRnVuY3Rpb25fID1cbiAgICAgICAgICAgIF90aGlzLnRpbGVVcmxGdW5jdGlvbiA9PT0gVXJsVGlsZS5wcm90b3R5cGUudGlsZVVybEZ1bmN0aW9uO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5Mb2FkRnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlTG9hZEZ1bmN0aW9uID0gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uO1xuICAgICAgICBpZiAob3B0aW9ucy50aWxlVXJsRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIF90aGlzLnRpbGVVcmxGdW5jdGlvbiA9IG9wdGlvbnMudGlsZVVybEZ1bmN0aW9uO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshQXJyYXk8c3RyaW5nPnxudWxsfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMudXJscyA9IG51bGw7XG4gICAgICAgIGlmIChvcHRpb25zLnVybHMpIHtcbiAgICAgICAgICAgIF90aGlzLnNldFVybHMob3B0aW9ucy51cmxzKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcHRpb25zLnVybCkge1xuICAgICAgICAgICAgX3RoaXMuc2V0VXJsKG9wdGlvbnMudXJsKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBib29sZWFuPn1cbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLnRpbGVMb2FkaW5nS2V5c18gPSB7fTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgbG9hZCBmdW5jdGlvbiBvZiB0aGUgc291cmNlLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuTG9hZEZ1bmN0aW9ufSBUaWxlTG9hZEZ1bmN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVMb2FkRnVuY3Rpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVMb2FkRnVuY3Rpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIHRpbGUgVVJMIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gVGlsZVVybEZ1bmN0aW9uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS50aWxlVXJsRnVuY3Rpb24gPT09IHRoaXMudGlsZVVybEZ1bmN0aW9uXG4gICAgICAgICAgICA/IHRoaXMudGlsZVVybEZ1bmN0aW9uLmJpbmQodGhpcylcbiAgICAgICAgICAgIDogdGhpcy50aWxlVXJsRnVuY3Rpb247XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIFVSTHMgdXNlZCBmb3IgdGhpcyBzb3VyY2UuXG4gICAgICogV2hlbiBhIHRpbGVVcmxGdW5jdGlvbiBpcyB1c2VkIGluc3RlYWQgb2YgdXJsIG9yIHVybHMsXG4gICAgICogbnVsbCB3aWxsIGJlIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fG51bGx9IFVSTHMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLmdldFVybHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVybHM7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgdGlsZSBjaGFuZ2UgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vZXZlbnRzL0V2ZW50LmpzXCIpLmRlZmF1bHR9IGV2ZW50IEV2ZW50LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciB0aWxlID0gLyoqIEB0eXBlIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9ICovIChldmVudC50YXJnZXQpO1xuICAgICAgICB2YXIgdWlkID0gZ2V0VWlkKHRpbGUpO1xuICAgICAgICB2YXIgdGlsZVN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xuICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgaWYgKHRpbGVTdGF0ZSA9PSBUaWxlU3RhdGUuTE9BRElORykge1xuICAgICAgICAgICAgdGhpcy50aWxlTG9hZGluZ0tleXNfW3VpZF0gPSB0cnVlO1xuICAgICAgICAgICAgdHlwZSA9IFRpbGVFdmVudFR5cGUuVElMRUxPQURTVEFSVDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1aWQgaW4gdGhpcy50aWxlTG9hZGluZ0tleXNfKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy50aWxlTG9hZGluZ0tleXNfW3VpZF07XG4gICAgICAgICAgICB0eXBlID1cbiAgICAgICAgICAgICAgICB0aWxlU3RhdGUgPT0gVGlsZVN0YXRlLkVSUk9SXG4gICAgICAgICAgICAgICAgICAgID8gVGlsZUV2ZW50VHlwZS5USUxFTE9BREVSUk9SXG4gICAgICAgICAgICAgICAgICAgIDogdGlsZVN0YXRlID09IFRpbGVTdGF0ZS5MT0FERURcbiAgICAgICAgICAgICAgICAgICAgICAgID8gVGlsZUV2ZW50VHlwZS5USUxFTE9BREVORFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IFRpbGVTb3VyY2VFdmVudCh0eXBlLCB0aWxlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGlsZSBsb2FkIGZ1bmN0aW9uIG9mIHRoZSBzb3VyY2UuXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gdGlsZUxvYWRGdW5jdGlvbiBUaWxlIGxvYWQgZnVuY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnNldFRpbGVMb2FkRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZUxvYWRGdW5jdGlvbikge1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5jbGVhcigpO1xuICAgICAgICB0aGlzLnRpbGVMb2FkRnVuY3Rpb24gPSB0aWxlTG9hZEZ1bmN0aW9uO1xuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGlsZSBVUkwgZnVuY3Rpb24gb2YgdGhlIHNvdXJjZS5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL1RpbGUuanNcIikuVXJsRnVuY3Rpb259IHRpbGVVcmxGdW5jdGlvbiBUaWxlIFVSTCBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2tleV0gT3B0aW9uYWwgbmV3IHRpbGUga2V5IGZvciB0aGUgc291cmNlLlxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBVcmxUaWxlLnByb3RvdHlwZS5zZXRUaWxlVXJsRnVuY3Rpb24gPSBmdW5jdGlvbiAodGlsZVVybEZ1bmN0aW9uLCBrZXkpIHtcbiAgICAgICAgdGhpcy50aWxlVXJsRnVuY3Rpb24gPSB0aWxlVXJsRnVuY3Rpb247XG4gICAgICAgIHRoaXMudGlsZUNhY2hlLnBydW5lRXhjZXB0TmV3ZXN0WigpO1xuICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0S2V5KGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBVUkwgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTC5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJsID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgdXJscyA9IGV4cGFuZFVybCh1cmwpO1xuICAgICAgICB0aGlzLnVybHMgPSB1cmxzO1xuICAgICAgICB0aGlzLnNldFVybHModXJscyk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIFVSTHMgdG8gdXNlIGZvciByZXF1ZXN0cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5PHN0cmluZz59IHVybHMgVVJMcy5cbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVXJsVGlsZS5wcm90b3R5cGUuc2V0VXJscyA9IGZ1bmN0aW9uICh1cmxzKSB7XG4gICAgICAgIHRoaXMudXJscyA9IHVybHM7XG4gICAgICAgIHZhciBrZXkgPSB1cmxzLmpvaW4oJ1xcbicpO1xuICAgICAgICBpZiAodGhpcy5nZW5lcmF0ZVRpbGVVcmxGdW5jdGlvbl8pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VGlsZVVybEZ1bmN0aW9uKGNyZWF0ZUZyb21UZW1wbGF0ZXModXJscywgdGhpcy50aWxlR3JpZCksIGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldEtleShrZXkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3RpbGVjb29yZC5qc1wiKS5UaWxlQ29vcmR9IHRpbGVDb29yZCBUaWxlIGNvb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge3N0cmluZ3x1bmRlZmluZWR9IFRpbGUgVVJMLlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnRpbGVVcmxGdW5jdGlvbiA9IGZ1bmN0aW9uICh0aWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIE1hcmtzIGEgdGlsZSBjb29yZCBhcyBiZWluZyB1c2VkLCB3aXRob3V0IHRyaWdnZXJpbmcgYSBsb2FkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6IFRpbGUgY29vcmRpbmF0ZSB6LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4IFRpbGUgY29vcmRpbmF0ZSB4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFRpbGUgY29vcmRpbmF0ZSB5LlxuICAgICAqL1xuICAgIFVybFRpbGUucHJvdG90eXBlLnVzZVRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSkge1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICBpZiAodGhpcy50aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBVcmxUaWxlO1xufShUaWxlU291cmNlKSk7XG5leHBvcnQgZGVmYXVsdCBVcmxUaWxlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VXJsVGlsZS5qcy5tYXAiLCIvKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVFdmVudFR5cGVcbiAqL1xuLyoqXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gYSB0aWxlIHN0YXJ0cyBsb2FkaW5nLlxuICAgICAqIEBldmVudCBtb2R1bGU6b2wvc291cmNlL1RpbGUuVGlsZVNvdXJjZUV2ZW50I3RpbGVsb2Fkc3RhcnRcbiAgICAgKiBAYXBpXG4gICAgICovXG4gICAgVElMRUxPQURTVEFSVDogJ3RpbGVsb2Fkc3RhcnQnLFxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGEgdGlsZSBmaW5pc2hlcyBsb2FkaW5nLCBlaXRoZXIgd2hlbiBpdHMgZGF0YSBpcyBsb2FkZWQsXG4gICAgICogb3Igd2hlbiBsb2FkaW5nIHdhcyBhYm9ydGVkIGJlY2F1c2UgdGhlIHRpbGUgaXMgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICAgKiBAZXZlbnQgbW9kdWxlOm9sL3NvdXJjZS9UaWxlLlRpbGVTb3VyY2VFdmVudCN0aWxlbG9hZGVuZFxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVORDogJ3RpbGVsb2FkZW5kJyxcbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgaWYgdGlsZSBsb2FkaW5nIHJlc3VsdHMgaW4gYW4gZXJyb3IuXG4gICAgICogQGV2ZW50IG1vZHVsZTpvbC9zb3VyY2UvVGlsZS5UaWxlU291cmNlRXZlbnQjdGlsZWxvYWRlcnJvclxuICAgICAqIEBhcGlcbiAgICAgKi9cbiAgICBUSUxFTE9BREVSUk9SOiAndGlsZWxvYWRlcnJvcicsXG59O1xuLyoqXG4gKiBAdHlwZWRlZiB7J3RpbGVsb2Fkc3RhcnQnfCd0aWxlbG9hZGVuZCd8J3RpbGVsb2FkZXJyb3InfSBUaWxlU291cmNlRXZlbnRUeXBlc1xuICovXG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlRXZlbnRUeXBlLmpzLm1hcCIsInZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG4vKipcbiAqIEBtb2R1bGUgb2wvc291cmNlL1RpbGVJbWFnZVxuICovXG5pbXBvcnQgRXZlbnRUeXBlIGZyb20gJy4uL2V2ZW50cy9FdmVudFR5cGUuanMnO1xuaW1wb3J0IEltYWdlVGlsZSBmcm9tICcuLi9JbWFnZVRpbGUuanMnO1xuaW1wb3J0IFJlcHJvalRpbGUgZnJvbSAnLi4vcmVwcm9qL1RpbGUuanMnO1xuaW1wb3J0IFRpbGVDYWNoZSBmcm9tICcuLi9UaWxlQ2FjaGUuanMnO1xuaW1wb3J0IFRpbGVTdGF0ZSBmcm9tICcuLi9UaWxlU3RhdGUuanMnO1xuaW1wb3J0IFVybFRpbGUgZnJvbSAnLi9VcmxUaWxlLmpzJztcbmltcG9ydCB7IEVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIH0gZnJvbSAnLi4vcmVwcm9qL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBJTUFHRV9TTU9PVEhJTkdfRElTQUJMRUQgfSBmcm9tICcuL2NvbW1vbi5qcyc7XG5pbXBvcnQgeyBlcXVpdmFsZW50LCBnZXQgYXMgZ2V0UHJvamVjdGlvbiB9IGZyb20gJy4uL3Byb2ouanMnO1xuaW1wb3J0IHsgZ2V0S2V5LCBnZXRLZXlaWFkgfSBmcm9tICcuLi90aWxlY29vcmQuanMnO1xuaW1wb3J0IHsgZ2V0Rm9yUHJvamVjdGlvbiBhcyBnZXRUaWxlR3JpZEZvclByb2plY3Rpb24gfSBmcm9tICcuLi90aWxlZ3JpZC5qcyc7XG5pbXBvcnQgeyBnZXRVaWQgfSBmcm9tICcuLi91dGlsLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIEVuYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb25dIFByb2plY3Rpb24uIERlZmF1bHQgaXMgdGhlIHZpZXcgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ9MC41XSBNYXhpbXVtIGFsbG93ZWQgcmVwcm9qZWN0aW9uIGVycm9yIChpbiBwaXhlbHMpLlxuICogSGlnaGVyIHZhbHVlcyBjYW4gaW5jcmVhc2UgcmVwcm9qZWN0aW9uIHBlcmZvcm1hbmNlLCBidXQgZGVjcmVhc2UgcHJlY2lzaW9uLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1N0YXRlLmpzXCIpLmRlZmF1bHR9IFtzdGF0ZV0gU291cmNlIHN0YXRlLlxuICogQHByb3BlcnR5IHt0eXBlb2YgaW1wb3J0KFwiLi4vSW1hZ2VUaWxlLmpzXCIpLmRlZmF1bHR9IFt0aWxlQ2xhc3NdIENsYXNzIHVzZWQgdG8gaW5zdGFudGlhdGUgaW1hZ2UgdGlsZXMuXG4gKiBEZWZhdWx0IGlzIHtAbGluayBtb2R1bGU6b2wvSW1hZ2VUaWxlfkltYWdlVGlsZX0uXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW89MV0gVGhlIHBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS4gRm9yIGV4YW1wbGUsIGlmIHRoZSB0aWxlXG4gKiBzZXJ2aWNlIGFkdmVydGl6ZXMgMjU2cHggYnkgMjU2cHggdGlsZXMgYnV0IGFjdHVhbGx5IHNlbmRzIDUxMnB4XG4gKiBieSA1MTJweCBpbWFnZXMgKGZvciByZXRpbmEvaGlkcGkgZGV2aWNlcykgdGhlbiBgdGlsZVBpeGVsUmF0aW9gXG4gKiBzaG91bGQgYmUgc2V0IHRvIGAyYC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0IHRpbGUgVVJMIGdpdmVuIGEgdGlsZSBjb29yZGluYXRlIGFuZCB0aGUgcHJvamVjdGlvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLCBhbmQgYHt6fWAgcGxhY2Vob2xkZXJzLlxuICogQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCwgbWF5IGJlXG4gKiB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWF0gV2hldGhlciB0byB3cmFwIHRoZSB3b3JsZCBob3Jpem9udGFsbHkuIFRoZSBkZWZhdWx0LCBpcyB0b1xuICogcmVxdWVzdCBvdXQtb2YtYm91bmRzIHRpbGVzIGZyb20gdGhlIHNlcnZlci4gV2hlbiBzZXQgdG8gYGZhbHNlYCwgb25seSBvbmVcbiAqIHdvcmxkIHdpbGwgYmUgcmVuZGVyZWQuIFdoZW4gc2V0IHRvIGB0cnVlYCwgdGlsZXMgd2lsbCBiZSByZXF1ZXN0ZWQgZm9yIG9uZVxuICogd29ybGQgb25seSwgYnV0IHRoZXkgd2lsbCBiZSB3cmFwcGVkIGhvcml6b250YWxseSB0byByZW5kZXIgbXVsdGlwbGUgd29ybGRzLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt0cmFuc2l0aW9uXSBEdXJhdGlvbiBvZiB0aGUgb3BhY2l0eSB0cmFuc2l0aW9uIGZvciByZW5kZXJpbmcuXG4gKiBUbyBkaXNhYmxlIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24sIHBhc3MgYHRyYW5zaXRpb246IDBgLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXldIE9wdGlvbmFsIHRpbGUga2V5IGZvciBwcm9wZXIgY2FjaGUgZmV0Y2hpbmdcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL2FycmF5LmpzXCIpLk5lYXJlc3REaXJlY3Rpb25GdW5jdGlvbn0gW3pEaXJlY3Rpb249MF1cbiAqIENob29zZSB3aGV0aGVyIHRvIHVzZSB0aWxlcyB3aXRoIGEgaGlnaGVyIG9yIGxvd2VyIHpvb20gbGV2ZWwgd2hlbiBiZXR3ZWVuIGludGVnZXJcbiAqIHpvb20gbGV2ZWxzLiBTZWUge0BsaW5rIG1vZHVsZTpvbC90aWxlZ3JpZC9UaWxlR3JpZH5UaWxlR3JpZCNnZXRaRm9yUmVzb2x1dGlvbn0uXG4gKi9cbi8qKlxuICogQGNsYXNzZGVzY1xuICogQmFzZSBjbGFzcyBmb3Igc291cmNlcyBwcm92aWRpbmcgaW1hZ2VzIGRpdmlkZWQgaW50byBhIHRpbGUgZ3JpZC5cbiAqXG4gKiBAZmlyZXMgaW1wb3J0KFwiLi9UaWxlLmpzXCIpLlRpbGVTb3VyY2VFdmVudFxuICogQGFwaVxuICovXG52YXIgVGlsZUltYWdlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhUaWxlSW1hZ2UsIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshT3B0aW9uc30gb3B0aW9ucyBJbWFnZSB0aWxlIG9wdGlvbnMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGlsZUltYWdlKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywge1xuICAgICAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9ucyxcbiAgICAgICAgICAgIGNhY2hlU2l6ZTogb3B0aW9ucy5jYWNoZVNpemUsXG4gICAgICAgICAgICBvcGFxdWU6IG9wdGlvbnMub3BhcXVlLFxuICAgICAgICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uLFxuICAgICAgICAgICAgc3RhdGU6IG9wdGlvbnMuc3RhdGUsXG4gICAgICAgICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcbiAgICAgICAgICAgIHRpbGVMb2FkRnVuY3Rpb246IG9wdGlvbnMudGlsZUxvYWRGdW5jdGlvblxuICAgICAgICAgICAgICAgID8gb3B0aW9ucy50aWxlTG9hZEZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgOiBkZWZhdWx0VGlsZUxvYWRGdW5jdGlvbixcbiAgICAgICAgICAgIHRpbGVQaXhlbFJhdGlvOiBvcHRpb25zLnRpbGVQaXhlbFJhdGlvLFxuICAgICAgICAgICAgdGlsZVVybEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVVcmxGdW5jdGlvbixcbiAgICAgICAgICAgIHVybDogb3B0aW9ucy51cmwsXG4gICAgICAgICAgICB1cmxzOiBvcHRpb25zLnVybHMsXG4gICAgICAgICAgICB3cmFwWDogb3B0aW9ucy53cmFwWCxcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG9wdGlvbnMudHJhbnNpdGlvbixcbiAgICAgICAgICAgIGtleTogb3B0aW9ucy5rZXksXG4gICAgICAgICAgICBhdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZTogb3B0aW9ucy5hdHRyaWJ1dGlvbnNDb2xsYXBzaWJsZSxcbiAgICAgICAgICAgIHpEaXJlY3Rpb246IG9wdGlvbnMuekRpcmVjdGlvbixcbiAgICAgICAgfSkgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUgez9zdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5jcm9zc09yaWdpbiA9XG4gICAgICAgICAgICBvcHRpb25zLmNyb3NzT3JpZ2luICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNyb3NzT3JpZ2luIDogbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICogQHR5cGUge3R5cGVvZiBJbWFnZVRpbGV9XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2xhc3MgPVxuICAgICAgICAgICAgb3B0aW9ucy50aWxlQ2xhc3MgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMudGlsZUNsYXNzIDogSW1hZ2VUaWxlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIFRpbGVDYWNoZT59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlQ2FjaGVGb3JQcm9qZWN0aW9uID0ge307XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcHJvdGVjdGVkXG4gICAgICAgICAqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdD59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy50aWxlR3JpZEZvclByb2plY3Rpb24gPSB7fTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfID0gb3B0aW9ucy5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqIEB0eXBlIHtvYmplY3R8dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgX3RoaXMuY29udGV4dE9wdGlvbnNfID1cbiAgICAgICAgICAgIG9wdGlvbnMuaW1hZ2VTbW9vdGhpbmcgPT09IGZhbHNlID8gSU1BR0VfU01PT1RISU5HX0RJU0FCTEVEIDogdW5kZWZpbmVkO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBfdGhpcy5yZW5kZXJSZXByb2plY3Rpb25FZGdlc18gPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBDYW4gZXhwaXJlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY2FuRXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmNhbkV4cGlyZUNhY2hlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGlsZUNhY2hlLmNhbkV4cGlyZUNhY2hlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25ba2V5XS5jYW5FeHBpcmVDYWNoZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHVzZWRUaWxlcyBVc2VkIHRpbGVzLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZXhwaXJlQ2FjaGUgPSBmdW5jdGlvbiAocHJvamVjdGlvbiwgdXNlZFRpbGVzKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUuZXhwaXJlQ2FjaGUuY2FsbCh0aGlzLCBwcm9qZWN0aW9uLCB1c2VkVGlsZXMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VkVGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICB0aGlzLnRpbGVDYWNoZS5leHBpcmVDYWNoZSh0aGlzLnRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciB0aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25baWRdO1xuICAgICAgICAgICAgdGlsZUNhY2hlLmV4cGlyZUNhY2hlKHRpbGVDYWNoZSA9PSB1c2VkVGlsZUNhY2hlID8gdXNlZFRpbGVzIDoge30pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfSBDb250ZXh0IG9wdGlvbnMuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRDb250ZXh0T3B0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dE9wdGlvbnNfO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gR3V0dGVyLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0R3V0dGVyRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRHdXR0ZXIoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfSBHdXR0ZXIuXG4gICAgICovXG4gICAgVGlsZUltYWdlLnByb3RvdHlwZS5nZXRHdXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBrZXkgdG8gYmUgdXNlZCBmb3IgYWxsIHRpbGVzIGluIHRoZSBzb3VyY2UuXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBUaGUga2V5IGZvciBhbGwgdGlsZXMuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0S2V5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKF9zdXBlci5wcm90b3R5cGUuZ2V0S2V5LmNhbGwodGhpcykgK1xuICAgICAgICAgICAgKHRoaXMuY29udGV4dE9wdGlvbnNfID8gJ1xcbicgKyBKU09OLnN0cmluZ2lmeSh0aGlzLmNvbnRleHRPcHRpb25zXykgOiAnJykpO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IE9wYXF1ZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldE9wYXF1ZSA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTiAmJlxuICAgICAgICAgICAgdGhpcy5nZXRQcm9qZWN0aW9uKCkgJiZcbiAgICAgICAgICAgIHByb2plY3Rpb24gJiZcbiAgICAgICAgICAgICFlcXVpdmFsZW50KHRoaXMuZ2V0UHJvamVjdGlvbigpLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0T3BhcXVlLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai9Qcm9qZWN0aW9uLmpzXCIpLmRlZmF1bHR9IHByb2plY3Rpb24gUHJvamVjdGlvbi5cbiAgICAgKiBAcmV0dXJuIHshaW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gVGlsZSBncmlkLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24pIHtcbiAgICAgICAgaWYgKCFFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uLmNhbGwodGhpcywgcHJvamVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRoaXNQcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgIGlmICh0aGlzLnRpbGVHcmlkICYmICghdGhpc1Byb2ogfHwgZXF1aXZhbGVudCh0aGlzUHJvaiwgcHJvamVjdGlvbikpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50aWxlR3JpZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwcm9qS2V5ID0gZ2V0VWlkKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKCEocHJvaktleSBpbiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9XG4gICAgICAgICAgICAgICAgICAgIGdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4ge2ltcG9ydChcIi4uL1RpbGVDYWNoZS5qc1wiKS5kZWZhdWx0fSBUaWxlIGNhY2hlLlxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUNhY2hlRm9yUHJvamVjdGlvbiA9IGZ1bmN0aW9uIChwcm9qZWN0aW9uKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04pIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLmdldFRpbGVDYWNoZUZvclByb2plY3Rpb24uY2FsbCh0aGlzLCBwcm9qZWN0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGhpc1Byb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgaWYgKCF0aGlzUHJvaiB8fCBlcXVpdmFsZW50KHRoaXNQcm9qLCBwcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHByb2pLZXkgPSBnZXRVaWQocHJvamVjdGlvbik7XG4gICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb25bcHJvaktleV0gPSBuZXcgVGlsZUNhY2hlKHRoaXMudGlsZUNhY2hlLmhpZ2hXYXRlck1hcmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltwcm9qS2V5XTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHogVGlsZSBjb29yZGluYXRlIHouXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHggVGlsZSBjb29yZGluYXRlIHguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHkgVGlsZSBjb29yZGluYXRlIHkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBpeGVsUmF0aW8gUGl4ZWwgcmF0aW8uXG4gICAgICogQHBhcmFtIHtpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBzZXQgb24gdGhlIHRpbGUuXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuY3JlYXRlVGlsZV8gPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KSB7XG4gICAgICAgIHZhciB0aWxlQ29vcmQgPSBbeiwgeCwgeV07XG4gICAgICAgIHZhciB1cmxUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICB2YXIgdGlsZVVybCA9IHVybFRpbGVDb29yZFxuICAgICAgICAgICAgPyB0aGlzLnRpbGVVcmxGdW5jdGlvbih1cmxUaWxlQ29vcmQsIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHRpbGUgPSBuZXcgdGhpcy50aWxlQ2xhc3ModGlsZUNvb3JkLCB0aWxlVXJsICE9PSB1bmRlZmluZWQgPyBUaWxlU3RhdGUuSURMRSA6IFRpbGVTdGF0ZS5FTVBUWSwgdGlsZVVybCAhPT0gdW5kZWZpbmVkID8gdGlsZVVybCA6ICcnLCB0aGlzLmNyb3NzT3JpZ2luLCB0aGlzLnRpbGVMb2FkRnVuY3Rpb24sIHRoaXMudGlsZU9wdGlvbnMpO1xuICAgICAgICB0aWxlLmtleSA9IGtleTtcbiAgICAgICAgdGlsZS5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5DSEFOR0UsIHRoaXMuaGFuZGxlVGlsZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgcmV0dXJuIHRpbGU7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0ge2ltcG9ydChcIi4uL3Byb2ovUHJvamVjdGlvbi5qc1wiKS5kZWZhdWx0fSBwcm9qZWN0aW9uIFByb2plY3Rpb24uXG4gICAgICogQHJldHVybiB7IWltcG9ydChcIi4uL1RpbGUuanNcIikuZGVmYXVsdH0gVGlsZS5cbiAgICAgKi9cbiAgICBUaWxlSW1hZ2UucHJvdG90eXBlLmdldFRpbGUgPSBmdW5jdGlvbiAoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbikge1xuICAgICAgICB2YXIgc291cmNlUHJvamVjdGlvbiA9IHRoaXMuZ2V0UHJvamVjdGlvbigpO1xuICAgICAgICBpZiAoIUVOQUJMRV9SQVNURVJfUkVQUk9KRUNUSU9OIHx8XG4gICAgICAgICAgICAhc291cmNlUHJvamVjdGlvbiB8fFxuICAgICAgICAgICAgIXByb2plY3Rpb24gfHxcbiAgICAgICAgICAgIGVxdWl2YWxlbnQoc291cmNlUHJvamVjdGlvbiwgcHJvamVjdGlvbikpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uIHx8IHByb2plY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZCA9IFt6LCB4LCB5XTtcbiAgICAgICAgICAgIHZhciB0aWxlID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIHRpbGVDb29yZEtleSA9IGdldEtleSh0aWxlQ29vcmQpO1xuICAgICAgICAgICAgaWYgKGNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcbiAgICAgICAgICAgICAgICB0aWxlID0gY2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICh0aWxlICYmIHRpbGUua2V5ID09IGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZVRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oc291cmNlUHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldFRpbGVHcmlkID0gdGhpcy5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRUaWxlQ29vcmQgPSB0aGlzLmdldFRpbGVDb29yZEZvclRpbGVVcmxGdW5jdGlvbih0aWxlQ29vcmQsIHByb2plY3Rpb24pO1xuICAgICAgICAgICAgICAgIHZhciBuZXdUaWxlID0gbmV3IFJlcHJvalRpbGUoc291cmNlUHJvamVjdGlvbiwgc291cmNlVGlsZUdyaWQsIHByb2plY3Rpb24sIHRhcmdldFRpbGVHcmlkLCB0aWxlQ29vcmQsIHdyYXBwZWRUaWxlQ29vcmQsIHRoaXMuZ2V0VGlsZVBpeGVsUmF0aW8ocGl4ZWxSYXRpbyksIHRoaXMuZ2V0R3V0dGVyKCksIGZ1bmN0aW9uICh6LCB4LCB5LCBwaXhlbFJhdGlvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRpbGVJbnRlcm5hbCh6LCB4LCB5LCBwaXhlbFJhdGlvLCBzb3VyY2VQcm9qZWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIHRoaXMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGRfLCB0aGlzLnJlbmRlclJlcHJvamVjdGlvbkVkZ2VzXywgdGhpcy5jb250ZXh0T3B0aW9uc18pO1xuICAgICAgICAgICAgICAgIG5ld1RpbGUua2V5ID0ga2V5O1xuICAgICAgICAgICAgICAgIGlmICh0aWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1RpbGUuaW50ZXJpbVRpbGUgPSB0aWxlO1xuICAgICAgICAgICAgICAgICAgICBuZXdUaWxlLnJlZnJlc2hJbnRlcmltQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIG5ld1RpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FjaGUuc2V0KHRpbGVDb29yZEtleSwgbmV3VGlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuZXdUaWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geiBUaWxlIGNvb3JkaW5hdGUgei5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geCBUaWxlIGNvb3JkaW5hdGUgeC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0geSBUaWxlIGNvb3JkaW5hdGUgeS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcGl4ZWxSYXRpbyBQaXhlbCByYXRpby5cbiAgICAgKiBAcGFyYW0geyFpbXBvcnQoXCIuLi9wcm9qL1Byb2plY3Rpb24uanNcIikuZGVmYXVsdH0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEByZXR1cm4geyFpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLmRlZmF1bHR9IFRpbGUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuZ2V0VGlsZUludGVybmFsID0gZnVuY3Rpb24gKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pIHtcbiAgICAgICAgdmFyIHRpbGUgPSBudWxsO1xuICAgICAgICB2YXIgdGlsZUNvb3JkS2V5ID0gZ2V0S2V5WlhZKHosIHgsIHkpO1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5nZXRLZXkoKTtcbiAgICAgICAgaWYgKCF0aGlzLnRpbGVDYWNoZS5jb250YWluc0tleSh0aWxlQ29vcmRLZXkpKSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy5jcmVhdGVUaWxlXyh6LCB4LCB5LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBrZXkpO1xuICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUuc2V0KHRpbGVDb29yZEtleSwgdGlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aWxlID0gdGhpcy50aWxlQ2FjaGUuZ2V0KHRpbGVDb29yZEtleSk7XG4gICAgICAgICAgICBpZiAodGlsZS5rZXkgIT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHNvdXJjZSdzIHBhcmFtcyBjaGFuZ2VkLiBJZiB0aGUgdGlsZSBoYXMgYW4gaW50ZXJpbSB0aWxlIGFuZCBpZiB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiB1c2UgaXQgdGhlbiB3ZSB1c2UgaXQuIE90aGVyd2lzZSB3ZSBjcmVhdGUgYSBuZXcgdGlsZS4gIEluIGJvdGhcbiAgICAgICAgICAgICAgICAvLyBjYXNlcyB3ZSBhdHRlbXB0IHRvIGFzc2lnbiBhbiBpbnRlcmltIHRpbGUgdG8gdGhlIG5ldyB0aWxlLlxuICAgICAgICAgICAgICAgIHZhciBpbnRlcmltVGlsZSA9IHRpbGU7XG4gICAgICAgICAgICAgICAgdGlsZSA9IHRoaXMuY3JlYXRlVGlsZV8oeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwga2V5KTtcbiAgICAgICAgICAgICAgICAvL21ha2UgdGhlIG5ldyB0aWxlIHRoZSBoZWFkIG9mIHRoZSBsaXN0LFxuICAgICAgICAgICAgICAgIGlmIChpbnRlcmltVGlsZS5nZXRTdGF0ZSgpID09IFRpbGVTdGF0ZS5JRExFKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhlIG9sZCB0aWxlIGhhc24ndCBiZWd1biBsb2FkaW5nIHlldCwgYW5kIGlzIG5vdyBvdXRkYXRlZCwgc28gd2UgY2FuIHNpbXBseSBkaXNjYXJkIGl0XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZS5pbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbGUuaW50ZXJpbVRpbGUgPSBpbnRlcmltVGlsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGlsZS5yZWZyZXNoSW50ZXJpbUNoYWluKCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aWxlQ2FjaGUucmVwbGFjZSh0aWxlQ29vcmRLZXksIHRpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aWxlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIHRvIHJlbmRlciByZXByb2plY3Rpb24gZWRnZXMgb3Igbm90ICh1c3VhbGx5IGZvciBkZWJ1Z2dpbmcpLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gcmVuZGVyIFJlbmRlciB0aGUgZWRnZXMuXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0UmVuZGVyUmVwcm9qZWN0aW9uRWRnZXMgPSBmdW5jdGlvbiAocmVuZGVyKSB7XG4gICAgICAgIGlmICghRU5BQkxFX1JBU1RFUl9SRVBST0pFQ1RJT04gfHxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID09IHJlbmRlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyUmVwcm9qZWN0aW9uRWRnZXNfID0gcmVuZGVyO1xuICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLnRpbGVDYWNoZUZvclByb2plY3Rpb24pIHtcbiAgICAgICAgICAgIHRoaXMudGlsZUNhY2hlRm9yUHJvamVjdGlvbltpZF0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYW5nZWQoKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRpbGUgZ3JpZCB0byB1c2Ugd2hlbiByZXByb2plY3RpbmcgdGhlIHRpbGVzIHRvIHRoZSBnaXZlblxuICAgICAqIHByb2plY3Rpb24gaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCB0aWxlIGdyaWQgZm9yIHRoZSBwcm9qZWN0aW9uLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZnVsIHdoZW4gdGhlIGRlZmF1bHQgdGlsZSBncmlkIGNhbm5vdCBiZSBjcmVhdGVkXG4gICAgICogKGUuZy4gcHJvamVjdGlvbiBoYXMgbm8gZXh0ZW50IGRlZmluZWQpIG9yXG4gICAgICogZm9yIG9wdGltaXphdGlvbiByZWFzb25zIChjdXN0b20gdGlsZSBzaXplLCByZXNvbHV0aW9ucywgLi4uKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gcHJvamVjdGlvbiBQcm9qZWN0aW9uLlxuICAgICAqIEBwYXJhbSB7aW1wb3J0KFwiLi4vdGlsZWdyaWQvVGlsZUdyaWQuanNcIikuZGVmYXVsdH0gdGlsZWdyaWQgVGlsZSBncmlkIHRvIHVzZSBmb3IgdGhlIHByb2plY3Rpb24uXG4gICAgICogQGFwaVxuICAgICAqL1xuICAgIFRpbGVJbWFnZS5wcm90b3R5cGUuc2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uID0gZnVuY3Rpb24gKHByb2plY3Rpb24sIHRpbGVncmlkKSB7XG4gICAgICAgIGlmIChFTkFCTEVfUkFTVEVSX1JFUFJPSkVDVElPTikge1xuICAgICAgICAgICAgdmFyIHByb2ogPSBnZXRQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xuICAgICAgICAgICAgaWYgKHByb2opIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvaktleSA9IGdldFVpZChwcm9qKTtcbiAgICAgICAgICAgICAgICBpZiAoIShwcm9qS2V5IGluIHRoaXMudGlsZUdyaWRGb3JQcm9qZWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpbGVHcmlkRm9yUHJvamVjdGlvbltwcm9qS2V5XSA9IHRpbGVncmlkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFRpbGVJbWFnZTtcbn0oVXJsVGlsZSkpO1xuLyoqXG4gKiBAcGFyYW0ge0ltYWdlVGlsZX0gaW1hZ2VUaWxlIEltYWdlIHRpbGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjIFNvdXJjZS5cbiAqL1xuZnVuY3Rpb24gZGVmYXVsdFRpbGVMb2FkRnVuY3Rpb24oaW1hZ2VUaWxlLCBzcmMpIHtcbiAgICAvKiogQHR5cGUge0hUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gKi8gKGltYWdlVGlsZS5nZXRJbWFnZSgpKS5zcmMgPVxuICAgICAgICBzcmM7XG59XG5leHBvcnQgZGVmYXVsdCBUaWxlSW1hZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1UaWxlSW1hZ2UuanMubWFwIiwiLyoqXG4gKiBAbW9kdWxlIG9sL3NvdXJjZS9YWVpcbiAqL1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbmltcG9ydCBUaWxlSW1hZ2UgZnJvbSAnLi9UaWxlSW1hZ2UuanMnO1xuaW1wb3J0IHsgY3JlYXRlWFlaLCBleHRlbnRGcm9tUHJvamVjdGlvbiB9IGZyb20gJy4uL3RpbGVncmlkLmpzJztcbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gT3B0aW9uc1xuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuL1NvdXJjZS5qc1wiKS5BdHRyaWJ1dGlvbkxpa2V9IFthdHRyaWJ1dGlvbnNdIEF0dHJpYnV0aW9ucy5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2F0dHJpYnV0aW9uc0NvbGxhcHNpYmxlPXRydWVdIEF0dHJpYnV0aW9ucyBhcmUgY29sbGFwc2libGUuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NhY2hlU2l6ZV0gSW5pdGlhbCB0aWxlIGNhY2hlIHNpemUuIFdpbGwgYXV0by1ncm93IHRvIGhvbGQgYXQgbGVhc3QgdGhlIG51bWJlciBvZiB0aWxlcyBpbiB0aGUgdmlld3BvcnQuXG4gKiBAcHJvcGVydHkge251bGx8c3RyaW5nfSBbY3Jvc3NPcmlnaW5dIFRoZSBgY3Jvc3NPcmlnaW5gIGF0dHJpYnV0ZSBmb3IgbG9hZGVkIGltYWdlcy4gIE5vdGUgdGhhdFxuICogeW91IG11c3QgcHJvdmlkZSBhIGBjcm9zc09yaWdpbmAgdmFsdWUgaWYgeW91IHdhbnQgdG8gYWNjZXNzIHBpeGVsIGRhdGEgd2l0aCB0aGUgQ2FudmFzIHJlbmRlcmVyLlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvQ09SU19lbmFibGVkX2ltYWdlIGZvciBtb3JlIGRldGFpbC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2ltYWdlU21vb3RoaW5nPXRydWVdIEVuYWJsZSBpbWFnZSBzbW9vdGhpbmcuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtvcGFxdWU9ZmFsc2VdIFdoZXRoZXIgdGhlIGxheWVyIGlzIG9wYXF1ZS5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vcHJvai5qc1wiKS5Qcm9qZWN0aW9uTGlrZX0gW3Byb2plY3Rpb249J0VQU0c6Mzg1NyddIFByb2plY3Rpb24uXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkPTAuNV0gTWF4aW11bSBhbGxvd2VkIHJlcHJvamVjdGlvbiBlcnJvciAoaW4gcGl4ZWxzKS5cbiAqIEhpZ2hlciB2YWx1ZXMgY2FuIGluY3JlYXNlIHJlcHJvamVjdGlvbiBwZXJmb3JtYW5jZSwgYnV0IGRlY3JlYXNlIHByZWNpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbbWF4Wm9vbT00Ml0gT3B0aW9uYWwgbWF4IHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21pblpvb209MF0gT3B0aW9uYWwgbWluIHpvb20gbGV2ZWwuIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge251bWJlcn0gW21heFJlc29sdXRpb25dIE9wdGlvbmFsIHRpbGUgZ3JpZCByZXNvbHV0aW9uIGF0IGxldmVsIHplcm8uIE5vdCB1c2VkIGlmIGB0aWxlR3JpZGAgaXMgcHJvdmlkZWQuXG4gKiBAcHJvcGVydHkge2ltcG9ydChcIi4uL3RpbGVncmlkL1RpbGVHcmlkLmpzXCIpLmRlZmF1bHR9IFt0aWxlR3JpZF0gVGlsZSBncmlkLlxuICogQHByb3BlcnR5IHtpbXBvcnQoXCIuLi9UaWxlLmpzXCIpLkxvYWRGdW5jdGlvbn0gW3RpbGVMb2FkRnVuY3Rpb25dIE9wdGlvbmFsIGZ1bmN0aW9uIHRvIGxvYWQgYSB0aWxlIGdpdmVuIGEgVVJMLiBUaGUgZGVmYXVsdCBpc1xuICogYGBganNcbiAqIGZ1bmN0aW9uKGltYWdlVGlsZSwgc3JjKSB7XG4gKiAgIGltYWdlVGlsZS5nZXRJbWFnZSgpLnNyYyA9IHNyYztcbiAqIH07XG4gKiBgYGBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdGlsZVBpeGVsUmF0aW89MV0gVGhlIHBpeGVsIHJhdGlvIHVzZWQgYnkgdGhlIHRpbGUgc2VydmljZS5cbiAqIEZvciBleGFtcGxlLCBpZiB0aGUgdGlsZSBzZXJ2aWNlIGFkdmVydGl6ZXMgMjU2cHggYnkgMjU2cHggdGlsZXMgYnV0IGFjdHVhbGx5IHNlbmRzIDUxMnB4XG4gKiBieSA1MTJweCBpbWFnZXMgKGZvciByZXRpbmEvaGlkcGkgZGV2aWNlcykgdGhlbiBgdGlsZVBpeGVsUmF0aW9gXG4gKiBzaG91bGQgYmUgc2V0IHRvIGAyYC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfGltcG9ydChcIi4uL3NpemUuanNcIikuU2l6ZX0gW3RpbGVTaXplPVsyNTYsIDI1Nl1dIFRoZSB0aWxlIHNpemUgdXNlZCBieSB0aGUgdGlsZSBzZXJ2aWNlLlxuICogTm90IHVzZWQgaWYgYHRpbGVHcmlkYCBpcyBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KFwiLi4vVGlsZS5qc1wiKS5VcmxGdW5jdGlvbn0gW3RpbGVVcmxGdW5jdGlvbl0gT3B0aW9uYWwgZnVuY3Rpb24gdG8gZ2V0XG4gKiB0aWxlIFVSTCBnaXZlbiBhIHRpbGUgY29vcmRpbmF0ZSBhbmQgdGhlIHByb2plY3Rpb24uXG4gKiBSZXF1aXJlZCBpZiBgdXJsYCBvciBgdXJsc2AgYXJlIG5vdCBwcm92aWRlZC5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdXJsXSBVUkwgdGVtcGxhdGUuIE11c3QgaW5jbHVkZSBge3h9YCwgYHt5fWAgb3IgYHsteX1gLFxuICogYW5kIGB7en1gIHBsYWNlaG9sZGVycy4gQSBgez8tP31gIHRlbXBsYXRlIHBhdHRlcm4sIGZvciBleGFtcGxlIGBzdWJkb21haW57YS1mfS5kb21haW4uY29tYCxcbiAqIG1heSBiZSB1c2VkIGluc3RlYWQgb2YgZGVmaW5pbmcgZWFjaCBvbmUgc2VwYXJhdGVseSBpbiB0aGUgYHVybHNgIG9wdGlvbi5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gW3VybHNdIEFuIGFycmF5IG9mIFVSTCB0ZW1wbGF0ZXMuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt3cmFwWD10cnVlXSBXaGV0aGVyIHRvIHdyYXAgdGhlIHdvcmxkIGhvcml6b250YWxseS5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbdHJhbnNpdGlvbj0yNTBdIER1cmF0aW9uIG9mIHRoZSBvcGFjaXR5IHRyYW5zaXRpb24gZm9yIHJlbmRlcmluZy5cbiAqIFRvIGRpc2FibGUgdGhlIG9wYWNpdHkgdHJhbnNpdGlvbiwgcGFzcyBgdHJhbnNpdGlvbjogMGAuXG4gKiBAcHJvcGVydHkge251bWJlcnxpbXBvcnQoXCIuLi9hcnJheS5qc1wiKS5OZWFyZXN0RGlyZWN0aW9uRnVuY3Rpb259IFt6RGlyZWN0aW9uPTBdXG4gKiBDaG9vc2Ugd2hldGhlciB0byB1c2UgdGlsZXMgd2l0aCBhIGhpZ2hlciBvciBsb3dlciB6b29tIGxldmVsIHdoZW4gYmV0d2VlbiBpbnRlZ2VyXG4gKiB6b29tIGxldmVscy4gU2VlIHtAbGluayBtb2R1bGU6b2wvdGlsZWdyaWQvVGlsZUdyaWR+VGlsZUdyaWQjZ2V0WkZvclJlc29sdXRpb259LlxuICovXG4vKipcbiAqIEBjbGFzc2Rlc2NcbiAqIExheWVyIHNvdXJjZSBmb3IgdGlsZSBkYXRhIHdpdGggVVJMcyBpbiBhIHNldCBYWVogZm9ybWF0IHRoYXQgYXJlXG4gKiBkZWZpbmVkIGluIGEgVVJMIHRlbXBsYXRlLiBCeSBkZWZhdWx0LCB0aGlzIGZvbGxvd3MgdGhlIHdpZGVseS11c2VkXG4gKiBHb29nbGUgZ3JpZCB3aGVyZSBgeGAgMCBhbmQgYHlgIDAgYXJlIGluIHRoZSB0b3AgbGVmdC4gR3JpZHMgbGlrZVxuICogVE1TIHdoZXJlIGB4YCAwIGFuZCBgeWAgMCBhcmUgaW4gdGhlIGJvdHRvbSBsZWZ0IGNhbiBiZSB1c2VkIGJ5XG4gKiB1c2luZyB0aGUgYHsteX1gIHBsYWNlaG9sZGVyIGluIHRoZSBVUkwgdGVtcGxhdGUsIHNvIGxvbmcgYXMgdGhlXG4gKiBzb3VyY2UgZG9lcyBub3QgaGF2ZSBhIGN1c3RvbSB0aWxlIGdyaWQuIEluIHRoaXMgY2FzZVxuICogYSBgdGlsZVVybEZ1bmN0aW9uYCBjYW4gYmUgdXNlZCwgc3VjaCBhczpcbiAqIGBgYGpzXG4gKiAgdGlsZVVybEZ1bmN0aW9uOiBmdW5jdGlvbihjb29yZGluYXRlKSB7XG4gKiAgICByZXR1cm4gJ2h0dHA6Ly9tYXBzZXJ2ZXIuY29tLycgKyBjb29yZGluYXRlWzBdICsgJy8nICtcbiAqICAgICAgY29vcmRpbmF0ZVsxXSArICcvJyArICgtY29vcmRpbmF0ZVsyXSAtIDEpICsgJy5wbmcnO1xuICogIH1cbiAqIGBgYFxuICogQGFwaVxuICovXG52YXIgWFlaID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhYWVosIF9zdXBlcik7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPcHRpb25zfSBbb3B0X29wdGlvbnNdIFhZWiBvcHRpb25zLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIFhZWihvcHRfb3B0aW9ucykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgcHJvamVjdGlvbiA9IG9wdGlvbnMucHJvamVjdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcm9qZWN0aW9uIDogJ0VQU0c6Mzg1Nyc7XG4gICAgICAgIHZhciB0aWxlR3JpZCA9IG9wdGlvbnMudGlsZUdyaWQgIT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBvcHRpb25zLnRpbGVHcmlkXG4gICAgICAgICAgICA6IGNyZWF0ZVhZWih7XG4gICAgICAgICAgICAgICAgZXh0ZW50OiBleHRlbnRGcm9tUHJvamVjdGlvbihwcm9qZWN0aW9uKSxcbiAgICAgICAgICAgICAgICBtYXhSZXNvbHV0aW9uOiBvcHRpb25zLm1heFJlc29sdXRpb24sXG4gICAgICAgICAgICAgICAgbWF4Wm9vbTogb3B0aW9ucy5tYXhab29tLFxuICAgICAgICAgICAgICAgIG1pblpvb206IG9wdGlvbnMubWluWm9vbSxcbiAgICAgICAgICAgICAgICB0aWxlU2l6ZTogb3B0aW9ucy50aWxlU2l6ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbnMsXG4gICAgICAgICAgICBjYWNoZVNpemU6IG9wdGlvbnMuY2FjaGVTaXplLFxuICAgICAgICAgICAgY3Jvc3NPcmlnaW46IG9wdGlvbnMuY3Jvc3NPcmlnaW4sXG4gICAgICAgICAgICBpbWFnZVNtb290aGluZzogb3B0aW9ucy5pbWFnZVNtb290aGluZyxcbiAgICAgICAgICAgIG9wYXF1ZTogb3B0aW9ucy5vcGFxdWUsXG4gICAgICAgICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxuICAgICAgICAgICAgcmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6IG9wdGlvbnMucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsXG4gICAgICAgICAgICB0aWxlR3JpZDogdGlsZUdyaWQsXG4gICAgICAgICAgICB0aWxlTG9hZEZ1bmN0aW9uOiBvcHRpb25zLnRpbGVMb2FkRnVuY3Rpb24sXG4gICAgICAgICAgICB0aWxlUGl4ZWxSYXRpbzogb3B0aW9ucy50aWxlUGl4ZWxSYXRpbyxcbiAgICAgICAgICAgIHRpbGVVcmxGdW5jdGlvbjogb3B0aW9ucy50aWxlVXJsRnVuY3Rpb24sXG4gICAgICAgICAgICB1cmw6IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgdXJsczogb3B0aW9ucy51cmxzLFxuICAgICAgICAgICAgd3JhcFg6IG9wdGlvbnMud3JhcFggIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMud3JhcFggOiB0cnVlLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogb3B0aW9ucy50cmFuc2l0aW9uLFxuICAgICAgICAgICAgYXR0cmlidXRpb25zQ29sbGFwc2libGU6IG9wdGlvbnMuYXR0cmlidXRpb25zQ29sbGFwc2libGUsXG4gICAgICAgICAgICB6RGlyZWN0aW9uOiBvcHRpb25zLnpEaXJlY3Rpb24sXG4gICAgICAgIH0pIHx8IHRoaXM7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFhZWjtcbn0oVGlsZUltYWdlKSk7XG5leHBvcnQgZGVmYXVsdCBYWVo7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1YWVouanMubWFwIiwiaW1wb3J0IFhZWlNvdXJjZSBmcm9tICdvbC9zb3VyY2UvWFlaLmpzJztcclxuXHJcbi8qKlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBWYXJpYW50cyB7XHJcbiAgW3ZhcmlhbnQ6IHN0cmluZ106IHN0cmluZ1xyXG59XHJcblxyXG4vKipcclxuICogQXZhaWxhYmxlIEJhc2VtYXAgdmFyaWFudHNcclxuICogQHByaXZhdGVcclxuICovXHJcbmV4cG9ydCBjb25zdCBWQVJJQU5UUzogVmFyaWFudHMgPSB7XHJcbiAgZ2VvbGFuZGJhc2VtYXA6ICdodHRwczovL21hcHN7MS00fS53aWVuLmd2LmF0L2Jhc2VtYXAvZ2VvbGFuZGJhc2VtYXAvbm9ybWFsL2dvb2dsZTM4NTcve3p9L3t5fS97eH0ucG5nJyxcclxuICBibWFwZ3JhdTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwZ3JhdS9ub3JtYWwvZ29vZ2xlMzg1Ny97en0ve3l9L3t4fS5wbmcnLFxyXG4gIGJtYXBvcnRob2ZvdG8zMGNtOiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBvcnRob2ZvdG8zMGNtL25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gIGJtYXBnZWxhZW5kZTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwZ2VsYWVuZGUvZ3JhdS9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gIGJtYXBvYmVyZmxhZWNoZTogJ2h0dHBzOi8vbWFwc3sxLTR9LndpZW4uZ3YuYXQvYmFzZW1hcC9ibWFwb2JlcmZsYWVjaGUvZ3JhdS9nb29nbGUzODU3L3t6fS97eX0ve3h9LmpwZWcnLFxyXG4gIGJtYXBvdmVybGF5OiAnaHR0cHM6Ly9tYXBzezEtNH0ud2llbi5ndi5hdC9iYXNlbWFwL2JtYXBvdmVybGF5L25vcm1hbC9nb29nbGUzODU3L3t6fS97eX0ve3h9LnBuZycsXHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQmFzZW1hcFNvdXJjZU9wdGlvbnMge1xyXG4gIHZhcmlhbnQ/OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb252ZW5pZW5jZSBzb3VyY2UgZm9yIGJhc2VtYXAuYXQgcmFzdGVyIG1hcHMuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQmFzZW1hcFNvdXJjZSBleHRlbmRzIFhZWlNvdXJjZSB7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT3B0aW9uc1xyXG4gICAqIEBwYXJhbSB7a2V5b2YgdmFyaWFudHN9IFtvcHRpb25zLnZhcmlhbnQ9XCJnZW9sYW5kYmFzZW1hcFwiXSBCYXNlbWFwIHZhcmlhbnRcclxuICAgKi9cclxuICBjb25zdHJ1Y3RvcihvcHRpb25zPzogQmFzZW1hcFNvdXJjZU9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHZhcmlhbnQgPSBvcHRpb25zPy52YXJpYW50IHx8ICdnZW9sYW5kYmFzZW1hcCc7XHJcbiAgICBzdXBlcih7XHJcbiAgICAgIHVybDogVkFSSUFOVFNbdmFyaWFudF0sXHJcbiAgICAgIGF0dHJpYnV0aW9uczogJ0dydW5ka2FydGU6IDxhIGhyZWY9XCJodHRwczovL2Jhc2VtYXAuYXQvXCI+YmFzZW1hcC5hdDwvYT4nLFxyXG4gICAgICBjcm9zc09yaWdpbjogXCJBbm9ueW1vdXNcIlxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCAnLi4vLi4vLi4vc3JjL2luZGV4Q29yZS5zY3NzJztcclxuaW1wb3J0IFRpbGVMYXllciBmcm9tIFwib2wvbGF5ZXIvVGlsZVwiO1xyXG5pbXBvcnQgVmlldyBmcm9tIFwib2wvVmlld1wiO1xyXG5pbXBvcnQgTWFwIGZyb20gXCJvbC9NYXBcIjtcclxuaW1wb3J0IHtBdHRyaWJ1dGlvbiwgQmFzZW1hcFNvdXJjZSwgRm9vdGVyLCBHZW9Mb2NhdGUsIE1vdXNlUG9zaXRpb24sIFNjYWxlTGluZSwgVG9wUmlnaHQsIFpvb20sfSBmcm9tIFwiLi4vLi4vLi4vc3JjXCI7XHJcbmltcG9ydCB7Z2V0Q2VudGVyfSBmcm9tIFwib2wvZXh0ZW50XCI7XHJcbmltcG9ydCB7TG9jYXRpb25SZXRyaWV2ZWRFdmVudH0gZnJvbSBcIi4uLy4uLy4uL3NyYy9iZ2lzL29sL2NvbnRyb2wvR2VvTG9jYXRlXCI7XHJcblxyXG5jb25zdCBvdXRwdXRUZXh0YXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGV4dGFyZWEtb3V0cHV0XCIpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcblxyXG5jb25zdCBnZW9sb2NhdGVDdHJsID0gbmV3IEdlb0xvY2F0ZSgpO1xyXG5nZW9sb2NhdGVDdHJsLm9uKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG91dHB1dFRleHRhcmVhLnZhbHVlID0gJ2dlb2xvY2F0ZSBidXR0b24gY2xpY2tlZFxcbicgKyBvdXRwdXRUZXh0YXJlYS52YWx1ZTtcclxufSk7XHJcblxyXG5nZW9sb2NhdGVDdHJsLm9uKFwibG9jYXRpb25fcmV0cmlldmVkXCIsIChlOiBMb2NhdGlvblJldHJpZXZlZEV2ZW50KSA9PiB7XHJcbiAgb3V0cHV0VGV4dGFyZWEudmFsdWUgPSAncG9zaXRpb24gcmV0cmlldmVkOiAnICsgZS5wb3NpdGlvbiArICdcXG4nICsgb3V0cHV0VGV4dGFyZWEudmFsdWU7XHJcbn0pO1xyXG5cclxubmV3IE1hcCh7XHJcbiAgdGFyZ2V0OiAnYmdpcy1tYXAnLFxyXG4gIGxheWVyczogW25ldyBUaWxlTGF5ZXIoe1xyXG4gICAgc291cmNlOiBuZXcgQmFzZW1hcFNvdXJjZSgpXHJcbiAgfSldLFxyXG4gIGNvbnRyb2xzOiBbXHJcbiAgICBuZXcgRm9vdGVyKFtcclxuICAgICAgbmV3IFNjYWxlTGluZSgpLFxyXG4gICAgICBuZXcgTW91c2VQb3NpdGlvbigpLFxyXG4gICAgICBuZXcgQXR0cmlidXRpb24oKSxcclxuICAgIF0pLFxyXG4gICAgbmV3IFRvcFJpZ2h0KFtcclxuICAgICAgZ2VvbG9jYXRlQ3RybCxcclxuICAgICAgbmV3IFpvb20oKSxcclxuICAgIF0pLFxyXG4gIF0sXHJcbiAgdmlldzogbmV3IFZpZXcoe1xyXG4gICAgY2VudGVyOiBnZXRDZW50ZXIoWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdKSxcclxuICAgIGNvbnN0cmFpbk9ubHlDZW50ZXI6IHRydWUsXHJcbiAgICBjb25zdHJhaW5SZXNvbHV0aW9uOiBmYWxzZSwgLy8gZGlzY3JldGUgem9vb21sZXZlbHNcclxuICAgIGV4dGVudDogWzEwNjAwMDAsIDU4MzgwMzAsIDE5MTM1MzAsIDYyODEyOTBdLFxyXG4gICAgbWF4Wm9vbTogMTUsXHJcbiAgICBtaW5ab29tOiA2LFxyXG4gICAgem9vbTogNyxcclxuICB9KVxyXG59KTtcclxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0NvbnRyb2wnO1xyXG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcblxyXG4vKipcclxuICogQSBzaW1wbGUgZm9vdGVyIHtAbGlua2NvZGUgQ29udGFpbmVyfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZvb3RlciBleHRlbmRzIENvbnRhaW5lciB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIGNoaWxkQ29udHJvbHMgVGhlIGNoaWxkIGNvbnRyb2xzIGZvciB0aGUgZm9vdGVyIGNvbnRhaW5lclxyXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBPcGVuTGF5ZXIgY29udHJvbCBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSwgb3B0aW9ucz86T3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDp7fTtcclxuICAgIHN1cGVyKHsuLi5vcHRzICwgc3R5bGVDbGFzczogJ2JnaXMtZm9vdGVyJywgY2hpbGRDb250cm9sc30pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgT2xNb3VzZVBvc2l0aW9uLCBPcHRpb25zIGFzIE9sTW91c2VQb3NpdGlvbk9wdGlvbnN9IGZyb20gJ29sL2NvbnRyb2wvTW91c2VQb3NpdGlvbic7XHJcbmltcG9ydCB7Q29vcmRpbmF0ZSwgZm9ybWF0fSBmcm9tICdvbC9jb29yZGluYXRlJztcclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyB0aGUgbW91c2UgcG9zaXRpb24gaW4gdGhlIG1hcC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb3VzZVBvc2l0aW9uIGV4dGVuZHMgT2xNb3VzZVBvc2l0aW9uIHtcclxuXHJcbi8qKlxyXG4gICAqIENyZWF0ZXMgYSBuZXcgbW91c2UgcG9zaXRpb24gY29udHJvbCB3aXRoIHRoZSBkZmF1bHQgdmFsdWVzLi5cclxuICAgKiBgYGB0eXBlc2NyaXB0XHJcbiAgICogLy8gRXhhbXBsZTogY3JlYXRlIGEgbmV3IE1vdXNlUG9zaXRpb24gY29udHJvbCB3aXRoIHRoZSBkZWZhdWx0IHBhcmFtZXRlcnMuXHJcbiAgICogY29uc3QgbW91c2VQb3NpdGlvbkNvbnRyb2wgPSBuZXcgTW91c2VQb3NpdGlvbigpO1xyXG4gICAqIGBgYFxyXG4gICAqIEBwYXJhbSBvcHRpb25zIEFsbCBvcHRpb25zIG9mIHRoZSBvcmlnaW5hbCBPcGVuTGF5ZXJzIE1vdXNlUG9zaXRpb24gY29udHJvbCBhcmUgYWxvd2VkLlxyXG4gICAqL1xyXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBPbE1vdXNlUG9zaXRpb25PcHRpb25zKSB7XHJcblxyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDoge307XHJcblxyXG4gICAgb3B0cy5wcm9qZWN0aW9uID0gb3B0cy5wcm9qZWN0aW9uID8gb3B0cy5wcm9qZWN0aW9uIDogJ0VQU0c6NDMyNic7XHJcbiAgICBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgPSBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgPyBvcHRzLmNvb3JkaW5hdGVGb3JtYXQgOiAoY29vcmRpbmF0ZTogQ29vcmRpbmF0ZSB8IHVuZGVmaW5lZCkgPT4gY29vcmRpbmF0ZSA/IGZvcm1hdChjb29yZGluYXRlLCAne3h9wrBOL3t5fcKwRScsIDQpIDogJyc7XHJcbiAgICBvcHRzLnVuZGVmaW5lZEhUTUwgPSBvcHRzLnVuZGVmaW5lZEhUTUwgPyBvcHRzLnVuZGVmaW5lZEhUTUwgOiAnJm5ic3A7LSZuYnNwO8KwTi8mbmJzcDstJm5ic3A7wrBFJztcclxuICAgIG9wdHMuY2xhc3NOYW1lID0gb3B0cy5jbGFzc05hbWUgPyBvcHRzLmNsYXNzTmFtZSA6ICdvbC1jb250cm9sIG9sLW1vdXNlLXBvc2l0aW9uIGJnaXMtbW91c2Vwb3NpdGlvbic7XHJcblxyXG4gICAgc3VwZXIob3B0cyk7XHJcbiAgfVxyXG5cclxuXHJcbn1cclxuXHJcblxyXG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgT2xBdHRyaWJ1dGlvbiwgT3B0aW9uc30gZnJvbSAnb2wvY29udHJvbC9BdHRyaWJ1dGlvbic7XHJcblxyXG4vKipcclxuICogQSBzaW1wbGUgd3JhcHBlciBjb250cm9sIG9mIHRoZSBPcGVuTGF5ZXIgQXR0cmlidXRpb24gY29udHJvbFxyXG4gKlxyXG4gKiBJdCBpcyBjb2xsYXBzZWQgYW5kIHdlIGFkZCBhIGJnaXMgc3R5bGUgY2xhc3MgKCpiZ2lzLWNvcHlyaWdodCopLlxyXG4gKiBTb21lIHZpc2libGUgY2hhbmdlcyBhcmUgbWFkZSB2aWEgY3NzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0aW9uIGV4dGVuZHMgT2xBdHRyaWJ1dGlvbiB7XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5sYXllciBBdHRyaWJ1dGlvbiBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE9wdGlvbnMpIHtcclxuXHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7XHJcbiAgICAgIGNvbGxhcHNlZDogZmFsc2VcclxuICAgIH07XHJcbiAgICBzdXBlcihvcHRzKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NOYW1lICs9ICcgYmdpcy1jb3B5cmlnaHQnO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IENvbnRyb2wsIHtPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL0NvbnRyb2wnO1xyXG5pbXBvcnQge0NvbnRhaW5lcn0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XHJcblxyXG4vKipcclxuICogQSBzaW1wbGUge0BsaW5rY29kZSBDb250YWluZXJ9IGZvciBjb250cm9scyBvbiB0aGUgdXBwZXIgcmlnaHQgY29ybmVyXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgVG9wUmlnaHQgZXh0ZW5kcyBDb250YWluZXIge1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSBjaGlsZENvbnRyb2xzIFRoZSBjaGlsZCBjb250cm9sIG9yIGFuIGFycmF5IG9mIGNoaWxkIGNvbnRyb2xzXHJcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIE9wZW5MYXllciBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IoY2hpbGRDb250cm9sczogQ29udHJvbCB8IENvbnRyb2xbXSwgb3B0aW9ucz86T3B0aW9ucykge1xyXG4gICAgY29uc3Qgb3B0cyA9IG9wdGlvbnMgPyBvcHRpb25zIDp7fTtcclxuICAgIHN1cGVyKHsuLi5vcHRzICwgc3R5bGVDbGFzczogJ2JnaXMtdG9wLXJpZ2h0JywgY2hpbGRDb250cm9sc30pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge2RlZmF1bHQgYXMgT2xab29tLCBPcHRpb25zfSBmcm9tICdvbC9jb250cm9sL1pvb20nO1xyXG5cclxuLyoqXHJcbiAqIFpvb20gYnV0dG9ucyBjb250cm9sXHJcbiAqIFRoZSBPcGVuTGF5ZXJzIFpvb20gY29udHJvbCBpcyB0aGUgYmFzZSBjbGFzc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFpvb20gZXh0ZW5kcyBPbFpvb20ge1xyXG5cclxuICAvKipcclxuICAgKiBDb25zdHJ1Y3RvclxyXG4gICAqIEBwYXJhbSBvcHRpb25zIHRoZSBPcGVuTGF5ZXJzIFpvb20gY29udHJvbCBvcHRpb25zXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IE9wdGlvbnMpIHtcclxuXHJcbiAgICBjb25zdCBvcHRzID0gb3B0aW9ucyA/IG9wdGlvbnMgOiB7fTtcclxuXHJcbiAgICBzdXBlcih7Li4ub3B0cyxcclxuICAgICAgem9vbUluTGFiZWw6ICBTdHJpbmcuZnJvbUNvZGVQb2ludCgweGU5MzQpLFxyXG4gICAgICB6b29tT3V0TGFiZWw6IFN0cmluZy5mcm9tQ29kZVBvaW50KDB4ZTkzNSkgfSk7XHJcblxyXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9ICdvbC1jb250cm9sIGJnaXMtY29udHJvbCB6b29tLWNvbnRhaW5lcic7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=